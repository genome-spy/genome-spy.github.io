(function(Ni,At){typeof exports=="object"&&typeof module<"u"?At(exports):typeof define=="function"&&define.amd?define(["exports"],At):(Ni=typeof globalThis<"u"?globalThis:Ni||self,At(Ni.genomeSpyDocEmbed={}))})(this,(function(Ni){"use strict";function At(t,e,n){return t.fields=e||[],t.fname=n,t}function bb(t){return t==null?null:t.fname}function xb(t){return t==null?null:t.fields}function Ib(t){return t.length===1?Bb(t[0]):vb(t)}const Bb=t=>function(e){return e[t]},vb=t=>{const e=t.length;return function(n){for(let i=0;i<e;++i)n=n[t[i]];return n}};function xe(t){throw Error(t)}function Sb(t){const e=[],n=t.length;let i=null,r=0,s="",o,a,l;t=t+"";function c(){e.push(s+t.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(l=t[a],l==="\\")s+=t.substring(o,a++),o=a;else if(l===i)c(),i=null,r=-1;else{if(i)continue;o===r&&l==='"'||o===r&&l==="'"?(o=a+1,i=l):l==="."&&!r?a>o?c():o=a+1:l==="["?(a>o&&c(),r=o=a+1):l==="]"&&(r||xe("Access path missing open bracket: "+t),r>0&&c(),r=0,o=a+1)}return r&&xe("Access path missing closing bracket: "+t),i&&xe("Access path missing closing quote: "+t),a>o&&(a++,c()),e}function ko(t,e,n){const i=Sb(t);return t=i.length===1?i[0]:t,At((n&&n.get||Ib)(i),[t],e||t)}ko("id");const Fo=At(t=>t,[],"identity");At(()=>0,[],"zero"),At(()=>1,[],"one"),At(()=>!0,[],"true"),At(()=>!1,[],"false");const Db=new Set([...Object.getOwnPropertyNames(Object.prototype).filter(t=>typeof Object.prototype[t]=="function"),"__proto__"]);var Ee=Array.isArray;function Ge(t){return t===Object(t)}function xt(t){return t[t.length-1]}function Gr(t){return t==null||t===""?null:+t}const mh=t=>e=>t*Math.exp(e),wh=t=>e=>Math.log(t*e),Qb=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),kb=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t,Ro=t=>e=>e<0?-Math.pow(-e,t):Math.pow(e,t);function nl(t,e,n,i){const r=n(t[0]),s=n(xt(t)),o=(s-r)*e;return[i(r-o),i(s-o)]}function Fb(t,e){return nl(t,e,Gr,Fo)}function Rb(t,e){var n=Math.sign(t[0]);return nl(t,e,wh(n),mh(n))}function Nb(t,e,n){return nl(t,e,Ro(n),Ro(1/n))}function No(t,e,n,i,r){const s=i(t[0]),o=i(xt(t)),a=e!=null?i(e):(s+o)/2;return[r(a+(s-a)*n),r(a+(o-a)*n)]}function yh(t,e,n){return No(t,e,n,Gr,Fo)}function Ch(t,e,n){const i=Math.sign(t[0]);return No(t,e,n,wh(i),mh(i))}function il(t,e,n,i){return No(t,e,n,Ro(i),Ro(1/i))}function Mb(t,e,n,i){return No(t,e,n,Qb(i),kb(i))}function rl(t){return t!=null?Ee(t)?t:[t]:[]}function Tb(t,e,n){let i=t[0],r=t[1],s;return r<i&&(s=r,r=i,i=s),s=r-i,s>=n-e?[e,n]:[i=Math.min(Math.max(i,e),n-s),i+s]}function ht(t){return typeof t=="function"}const Pb="descending";function Eh(t,e,n){n=n||{},e=rl(e)||[];const i=[],r=[],s={},o=n.comparator||Lb;return rl(t).forEach((a,l)=>{a!=null&&(i.push(e[l]===Pb?-1:1),r.push(a=ht(a)?a:ko(a,null,n)),(xb(a)||[]).forEach(c=>s[c]=1))}),r.length===0?null:At(o(r,i),Object.keys(s))}const bh=(t,e)=>(t<e||t==null)&&e!=null?-1:(t>e||e==null)&&t!=null?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0),Lb=(t,e)=>t.length===1?Ob(t[0],e[0]):Ub(t,e,t.length),Ob=(t,e)=>function(n,i){return bh(t(n),t(i))*e},Ub=(t,e,n)=>(e.push(0),function(i,r){let s,o=0,a=-1;for(;o===0&&++a<n;)s=t[a],o=bh(s(i),s(r));return o*e[a]});function _b(t){for(let e,n,i=1,r=arguments.length;i<r;++i){e=arguments[i];for(n in e)t[n]=e[n]}return t}function Mi(t,e){return Object.hasOwn(t,e)}function zr(t){return typeof t=="boolean"}function Gb(t){return Object.prototype.toString.call(t)==="[object Date]"}function zb(t){return t&&ht(t[Symbol.iterator])}function Ve(t){return typeof t=="number"}function Hb(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function le(t){return typeof t=="string"}function xh(t,e){const n=t[0],i=xt(t),r=+e;return r?r===1?i:n+r*(i-n):n}function Hr(t){return t&&xt(t)-t[0]||0}function sl(t){return Ee(t)?`[${t.map(e=>e===null?"null":sl(e))}]`:Ge(t)||le(t)?JSON.stringify(t).replaceAll("\u2028","\\u2028").replaceAll("\u2029","\\u2029"):t}function Yb(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}const Vb=t=>Ve(t)||Gb(t)?t:Date.parse(t);function Jb(t,e){return e=e||Vb,t==null||t===""?null:e(t)}function qb(t){return t==null||t===""?null:t+""}function Mo(t){const e={},n=t.length;for(let i=0;i<n;++i)e[t[i]]=!0;return e}const To=globalThis,ol=To.ShadowRoot&&(To.ShadyCSS===void 0||To.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,al=Symbol(),Ih=new WeakMap;let Bh=class{constructor(e,n,i){if(this._$cssResult$=!0,i!==al)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(ol&&e===void 0){const i=n!==void 0&&n.length===1;i&&(e=Ih.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&Ih.set(n,e))}return e}toString(){return this.cssText}};const Kb=t=>new Bh(typeof t=="string"?t:t+"",void 0,al),jb=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((i,r,s)=>i+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+t[s+1],t[0]);return new Bh(n,t,al)},Wb=(t,e)=>{if(ol)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const i=document.createElement("style"),r=To.litNonce;r!==void 0&&i.setAttribute("nonce",r),i.textContent=n.cssText,t.appendChild(i)}},vh=ol?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const i of e.cssRules)n+=i.cssText;return Kb(n)})(t):t;const{is:Xb,defineProperty:Zb,getOwnPropertyDescriptor:$b,getOwnPropertyNames:ex,getOwnPropertySymbols:tx,getPrototypeOf:nx}=Object,Po=globalThis,Sh=Po.trustedTypes,ix=Sh?Sh.emptyScript:"",rx=Po.reactiveElementPolyfillSupport,Yr=(t,e)=>t,cl={toAttribute(t,e){switch(e){case Boolean:t=t?ix:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},Dh=(t,e)=>!Xb(t,e),Qh={attribute:!0,type:String,converter:cl,reflect:!1,useDefault:!1,hasChanged:Dh};Symbol.metadata??=Symbol("metadata"),Po.litPropertyMetadata??=new WeakMap;let Ti=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=Qh){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const i=Symbol(),r=this.getPropertyDescriptor(e,i,n);r!==void 0&&Zb(this.prototype,e,r)}}static getPropertyDescriptor(e,n,i){const{get:r,set:s}=$b(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:r,set(o){const a=r?.call(this);s?.call(this,o),this.requestUpdate(e,a,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Qh}static _$Ei(){if(this.hasOwnProperty(Yr("elementProperties")))return;const e=nx(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Yr("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Yr("properties"))){const n=this.properties,i=[...ex(n),...tx(n)];for(const r of i)this.createProperty(r,n[r])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[i,r]of n)this.elementProperties.set(i,r)}this._$Eh=new Map;for(const[n,i]of this.elementProperties){const r=this._$Eu(n,i);r!==void 0&&this._$Eh.set(r,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const r of i)n.unshift(vh(r))}else e!==void 0&&n.push(vh(e));return n}static _$Eu(e,n){const i=n.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const i of n.keys())this.hasOwnProperty(i)&&(e.set(i,this[i]),delete this[i]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Wb(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,n,i){this._$AK(e,i)}_$ET(e,n){const i=this.constructor.elementProperties.get(e),r=this.constructor._$Eu(e,i);if(r!==void 0&&i.reflect===!0){const s=(i.converter?.toAttribute!==void 0?i.converter:cl).toAttribute(n,i.type);this._$Em=e,s==null?this.removeAttribute(r):this.setAttribute(r,s),this._$Em=null}}_$AK(e,n){const i=this.constructor,r=i._$Eh.get(e);if(r!==void 0&&this._$Em!==r){const s=i.getPropertyOptions(r),o=typeof s.converter=="function"?{fromAttribute:s.converter}:s.converter?.fromAttribute!==void 0?s.converter:cl;this._$Em=r;const a=o.fromAttribute(n,s.type);this[r]=a??this._$Ej?.get(r)??a,this._$Em=null}}requestUpdate(e,n,i,r=!1,s){if(e!==void 0){const o=this.constructor;if(r===!1&&(s=this[e]),i??=o.getPropertyOptions(e),!((i.hasChanged??Dh)(s,n)||i.useDefault&&i.reflect&&s===this._$Ej?.get(e)&&!this.hasAttribute(o._$Eu(e,i))))return;this.C(e,n,i)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:i,reflect:r,wrapped:s},o){i&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,o??n??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||i||(n=void 0),this._$AL.set(e,n)),r===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[r,s]of this._$Ep)this[r]=s;this._$Ep=void 0}const i=this.constructor.elementProperties;if(i.size>0)for(const[r,s]of i){const{wrapped:o}=s,a=this[r];o!==!0||this._$AL.has(r)||a===void 0||this.C(r,void 0,s,a)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),this._$EO?.forEach(i=>i.hostUpdate?.()),this.update(n)):this._$EM()}catch(i){throw e=!1,this._$EM(),i}e&&this._$AE(n)}willUpdate(e){}_$AE(e){this._$EO?.forEach(n=>n.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(n=>this._$ET(n,this[n])),this._$EM()}updated(e){}firstUpdated(e){}};Ti.elementStyles=[],Ti.shadowRootOptions={mode:"open"},Ti[Yr("elementProperties")]=new Map,Ti[Yr("finalized")]=new Map,rx?.({ReactiveElement:Ti}),(Po.reactiveElementVersions??=[]).push("2.1.2");const ll=globalThis,kh=t=>t,Lo=ll.trustedTypes,Fh=Lo?Lo.createPolicy("lit-html",{createHTML:t=>t}):void 0,Rh="$lit$",mn=`lit$${Math.random().toFixed(9).slice(2)}$`,Nh="?"+mn,sx=`<${Nh}>`,Jn=document,Vr=()=>Jn.createComment(""),Jr=t=>t===null||typeof t!="object"&&typeof t!="function",ul=Array.isArray,ox=t=>ul(t)||typeof t?.[Symbol.iterator]=="function",fl=`[ 	
\f\r]`,qr=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Mh=/-->/g,Th=/>/g,qn=RegExp(`>|${fl}(?:([^\\s"'>=/]+)(${fl}*=${fl}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Ph=/'/g,Lh=/"/g,Oh=/^(?:script|style|textarea|title)$/i,ax=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),oe=ax(1),Kn=Symbol.for("lit-noChange"),de=Symbol.for("lit-nothing"),Uh=new WeakMap,jn=Jn.createTreeWalker(Jn,129);function _h(t,e){if(!ul(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Fh!==void 0?Fh.createHTML(e):e}const cx=(t,e)=>{const n=t.length-1,i=[];let r,s=e===2?"<svg>":e===3?"<math>":"",o=qr;for(let a=0;a<n;a++){const l=t[a];let c,u,f=-1,h=0;for(;h<l.length&&(o.lastIndex=h,u=o.exec(l),u!==null);)h=o.lastIndex,o===qr?u[1]==="!--"?o=Mh:u[1]!==void 0?o=Th:u[2]!==void 0?(Oh.test(u[2])&&(r=RegExp("</"+u[2],"g")),o=qn):u[3]!==void 0&&(o=qn):o===qn?u[0]===">"?(o=r??qr,f=-1):u[1]===void 0?f=-2:(f=o.lastIndex-u[2].length,c=u[1],o=u[3]===void 0?qn:u[3]==='"'?Lh:Ph):o===Lh||o===Ph?o=qn:o===Mh||o===Th?o=qr:(o=qn,r=void 0);const A=o===qn&&t[a+1].startsWith("/>")?" ":"";s+=o===qr?l+sx:f>=0?(i.push(c),l.slice(0,f)+Rh+l.slice(f)+mn+A):l+mn+(f===-2?a:A)}return[_h(t,s+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),i]};class Kr{constructor({strings:e,_$litType$:n},i){let r;this.parts=[];let s=0,o=0;const a=e.length-1,l=this.parts,[c,u]=cx(e,n);if(this.el=Kr.createElement(c,i),jn.currentNode=this.el.content,n===2||n===3){const f=this.el.content.firstChild;f.replaceWith(...f.childNodes)}for(;(r=jn.nextNode())!==null&&l.length<a;){if(r.nodeType===1){if(r.hasAttributes())for(const f of r.getAttributeNames())if(f.endsWith(Rh)){const h=u[o++],A=r.getAttribute(f).split(mn),d=/([.?@])?(.*)/.exec(h);l.push({type:1,index:s,name:d[2],strings:A,ctor:d[1]==="."?ux:d[1]==="?"?fx:d[1]==="@"?Ax:Oo}),r.removeAttribute(f)}else f.startsWith(mn)&&(l.push({type:6,index:s}),r.removeAttribute(f));if(Oh.test(r.tagName)){const f=r.textContent.split(mn),h=f.length-1;if(h>0){r.textContent=Lo?Lo.emptyScript:"";for(let A=0;A<h;A++)r.append(f[A],Vr()),jn.nextNode(),l.push({type:2,index:++s});r.append(f[h],Vr())}}}else if(r.nodeType===8)if(r.data===Nh)l.push({type:2,index:s});else{let f=-1;for(;(f=r.data.indexOf(mn,f+1))!==-1;)l.push({type:7,index:s}),f+=mn.length-1}s++}}static createElement(e,n){const i=Jn.createElement("template");return i.innerHTML=e,i}}function Pi(t,e,n=t,i){if(e===Kn)return e;let r=i!==void 0?n._$Co?.[i]:n._$Cl;const s=Jr(e)?void 0:e._$litDirective$;return r?.constructor!==s&&(r?._$AO?.(!1),s===void 0?r=void 0:(r=new s(t),r._$AT(t,n,i)),i!==void 0?(n._$Co??=[])[i]=r:n._$Cl=r),r!==void 0&&(e=Pi(t,r._$AS(t,e.values),r,i)),e}class lx{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:i}=this._$AD,r=(e?.creationScope??Jn).importNode(n,!0);jn.currentNode=r;let s=jn.nextNode(),o=0,a=0,l=i[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new jr(s,s.nextSibling,this,e):l.type===1?c=new l.ctor(s,l.name,l.strings,this,e):l.type===6&&(c=new hx(s,this,e)),this._$AV.push(c),l=i[++a]}o!==l?.index&&(s=jn.nextNode(),o++)}return jn.currentNode=Jn,r}p(e){let n=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,n),n+=i.strings.length-2):i._$AI(e[n])),n++}}class jr{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,n,i,r){this.type=2,this._$AH=de,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=i,this.options=r,this._$Cv=r?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&e?.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Pi(this,e,n),Jr(e)?e===de||e==null||e===""?(this._$AH!==de&&this._$AR(),this._$AH=de):e!==this._$AH&&e!==Kn&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):ox(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==de&&Jr(this._$AH)?this._$AA.nextSibling.data=e:this.T(Jn.createTextNode(e)),this._$AH=e}$(e){const{values:n,_$litType$:i}=e,r=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=Kr.createElement(_h(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===r)this._$AH.p(n);else{const s=new lx(r,this),o=s.u(this.options);s.p(n),this.T(o),this._$AH=s}}_$AC(e){let n=Uh.get(e.strings);return n===void 0&&Uh.set(e.strings,n=new Kr(e)),n}k(e){ul(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let i,r=0;for(const s of e)r===n.length?n.push(i=new jr(this.O(Vr()),this.O(Vr()),this,this.options)):i=n[r],i._$AI(s),r++;r<n.length&&(this._$AR(i&&i._$AB.nextSibling,r),n.length=r)}_$AR(e=this._$AA.nextSibling,n){for(this._$AP?.(!1,!0,n);e!==this._$AB;){const i=kh(e).nextSibling;kh(e).remove(),e=i}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}class Oo{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,i,r,s){this.type=1,this._$AH=de,this._$AN=void 0,this.element=e,this.name=n,this._$AM=r,this.options=s,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=de}_$AI(e,n=this,i,r){const s=this.strings;let o=!1;if(s===void 0)e=Pi(this,e,n,0),o=!Jr(e)||e!==this._$AH&&e!==Kn,o&&(this._$AH=e);else{const a=e;let l,c;for(e=s[0],l=0;l<s.length-1;l++)c=Pi(this,a[i+l],n,l),c===Kn&&(c=this._$AH[l]),o||=!Jr(c)||c!==this._$AH[l],c===de?e=de:e!==de&&(e+=(c??"")+s[l+1]),this._$AH[l]=c}o&&!r&&this.j(e)}j(e){e===de?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class ux extends Oo{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===de?void 0:e}}class fx extends Oo{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==de)}}let Ax=class extends Oo{constructor(e,n,i,r,s){super(e,n,i,r,s),this.type=5}_$AI(e,n=this){if((e=Pi(this,e,n,0)??de)===Kn)return;const i=this._$AH,r=e===de&&i!==de||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,s=e!==de&&(i===de||r);r&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}};class hx{constructor(e,n,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){Pi(this,e)}}const dx=ll.litHtmlPolyfillSupport;dx?.(Kr,jr),(ll.litHtmlVersions??=[]).push("3.3.2");const Wr=(t,e,n)=>{const i=n?.renderBefore??e;let r=i._$litPart$;if(r===void 0){const s=n?.renderBefore??null;i._$litPart$=r=new jr(e.insertBefore(Vr(),s),s,void 0,n??{})}return r._$AI(t),r};const Al=globalThis;let Xr=class extends Ti{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Wr(n,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Kn}};Xr._$litElement$=!0,Xr.finalized=!0,Al.litElementHydrateSupport?.({LitElement:Xr});const gx=Al.litElementPolyfillSupport;gx?.({LitElement:Xr}),(Al.litElementVersions??=[]).push("4.2.2");var Gh={},hl={},dl=34,Zr=10,gl=13;function zh(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function px(t,e){var n=zh(t);return function(i,r){return e(n(i),r,t)}}function Hh(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var r in i)r in e||n.push(e[r]=r)}),n}function st(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function mx(t){return t<0?"-"+st(-t,6):t>9999?"+"+st(t,6):st(t,4)}function wx(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":mx(t.getUTCFullYear())+"-"+st(t.getUTCMonth()+1,2)+"-"+st(t.getUTCDate(),2)+(r?"T"+st(e,2)+":"+st(n,2)+":"+st(i,2)+"."+st(r,3)+"Z":i?"T"+st(e,2)+":"+st(n,2)+":"+st(i,2)+"Z":n||e?"T"+st(e,2)+":"+st(n,2)+"Z":"")}function Yh(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(f,h){var A,d,g=r(f,function(m,p){if(A)return A(m,p-1);d=m,A=h?px(m,h):zh(m)});return g.columns=d||[],g}function r(f,h){var A=[],d=f.length,g=0,m=0,p,w=d<=0,C=!1;f.charCodeAt(d-1)===Zr&&--d,f.charCodeAt(d-1)===gl&&--d;function y(){if(w)return hl;if(C)return C=!1,Gh;var I,b=g,S;if(f.charCodeAt(b)===dl){for(;g++<d&&f.charCodeAt(g)!==dl||f.charCodeAt(++g)===dl;);return(I=g)>=d?w=!0:(S=f.charCodeAt(g++))===Zr?C=!0:S===gl&&(C=!0,f.charCodeAt(g)===Zr&&++g),f.slice(b+1,I-1).replace(/""/g,'"')}for(;g<d;){if((S=f.charCodeAt(I=g++))===Zr)C=!0;else if(S===gl)C=!0,f.charCodeAt(g)===Zr&&++g;else if(S!==n)continue;return f.slice(b,I)}return w=!0,f.slice(b,d)}for(;(p=y())!==hl;){for(var x=[];p!==Gh&&p!==hl;)x.push(p),p=y();h&&(x=h(x,m++))==null||A.push(x)}return A}function s(f,h){return f.map(function(A){return h.map(function(d){return u(A[d])}).join(t)})}function o(f,h){return h==null&&(h=Hh(f)),[h.map(u).join(t)].concat(s(f,h)).join(`
`)}function a(f,h){return h==null&&(h=Hh(f)),s(f,h).join(`
`)}function l(f){return f.map(c).join(`
`)}function c(f){return f.map(u).join(t)}function u(f){return f==null?"":f instanceof Date?wx(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:i,parseRows:r,format:o,formatBody:a,formatRows:l,formatRow:c,formatValue:u}}var yx=Yh("	"),Cx=yx.parseRows;function Ex(t){return t}function bx(t){if(t==null)return Ex;var e,n,i=t.scale[0],r=t.scale[1],s=t.translate[0],o=t.translate[1];return function(a,l){l||(e=n=0);var c=2,u=a.length,f=new Array(u);for(f[0]=(e+=a[0])*i+s,f[1]=(n+=a[1])*r+o;c<u;)f[c]=a[c],++c;return f}}function xx(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n}function Ix(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(n){return Vh(t,n)})}:Vh(t,e)}function Vh(t,e){var n=e.id,i=e.bbox,r=e.properties==null?{}:e.properties,s=Jh(t,e);return n==null&&i==null?{type:"Feature",properties:r,geometry:s}:i==null?{type:"Feature",id:n,properties:r,geometry:s}:{type:"Feature",id:n,bbox:i,properties:r,geometry:s}}function Jh(t,e){var n=bx(t.transform),i=t.arcs;function r(u,f){f.length&&f.pop();for(var h=i[u<0?~u:u],A=0,d=h.length;A<d;++A)f.push(n(h[A],A));u<0&&xx(f,d)}function s(u){return n(u)}function o(u){for(var f=[],h=0,A=u.length;h<A;++h)r(u[h],f);return f.length<2&&f.push(f[0]),f}function a(u){for(var f=o(u);f.length<4;)f.push(f[0]);return f}function l(u){return u.map(a)}function c(u){var f=u.type,h;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(c)};case"Point":h=s(u.coordinates);break;case"MultiPoint":h=u.coordinates.map(s);break;case"LineString":h=o(u.arcs);break;case"MultiLineString":h=u.arcs.map(o);break;case"Polygon":h=l(u.arcs);break;case"MultiPolygon":h=u.arcs.map(l);break;default:return null}return{type:f,coordinates:h}}return c(e)}function Bx(t,e){var n={},i={},r={},s=[],o=-1;e.forEach(function(c,u){var f=t.arcs[c<0?~c:c],h;f.length<3&&!f[1][0]&&!f[1][1]&&(h=e[++o],e[o]=c,e[u]=h)}),e.forEach(function(c){var u=a(c),f=u[0],h=u[1],A,d;if(A=r[f])if(delete r[A.end],A.push(c),A.end=h,d=i[h]){delete i[d.start];var g=d===A?A:A.concat(d);i[g.start=A.start]=r[g.end=d.end]=g}else i[A.start]=r[A.end]=A;else if(A=i[h])if(delete i[A.start],A.unshift(c),A.start=f,d=r[f]){delete r[d.end];var m=d===A?A:d.concat(A);i[m.start=d.start]=r[m.end=A.end]=m}else i[A.start]=r[A.end]=A;else A=[c],i[A.start=f]=r[A.end=h]=A});function a(c){var u=t.arcs[c<0?~c:c],f=u[0],h;return t.transform?(h=[0,0],u.forEach(function(A){h[0]+=A[0],h[1]+=A[1]})):h=u[u.length-1],c<0?[h,f]:[f,h]}function l(c,u){for(var f in c){var h=c[f];delete u[h.start],delete h.start,delete h.end,h.forEach(function(A){n[A<0?~A:A]=1}),s.push(h)}}return l(r,i),l(i,r),e.forEach(function(c){n[c<0?~c:c]||s.push([c])}),s}function vx(t){return Jh(t,Sx.apply(this,arguments))}function Sx(t,e,n){var i,r,s;if(arguments.length>1)i=Dx(t,e,n);else for(r=0,i=new Array(s=t.arcs.length);r<s;++r)i[r]=r;return{type:"MultiLineString",arcs:Bx(t,i)}}function Dx(t,e,n){var i=[],r=[],s;function o(f){var h=f<0?~f:f;(r[h]||(r[h]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function l(f){f.forEach(a)}function c(f){f.forEach(l)}function u(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(u);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":l(f.arcs);break;case"MultiPolygon":c(f.arcs);break}}return u(e),r.forEach(n==null?function(f){i.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&i.push(f[0].i)}),i}function Wn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Qx(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Xn(t){let e,n,i;t.length!==2?(e=Wn,n=(a,l)=>Wn(t(a),l),i=(a,l)=>t(a)-l):(e=t===Wn||t===Qx?t:kx,n=t,i=t);function r(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){const f=r(a,l,c,u-1);return f>c&&i(a[f-1],l)>-i(a[f],l)?f-1:f}return{left:r,center:o,right:s}}function kx(){return 0}function qh(t){return t===null?NaN:+t}function*Fx(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(yield i)}}const Kh=Xn(Wn),wn=Kh.right;Kh.left,Xn(qh).center;function Rx(t,e){let n=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&++n;else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(r=+r)>=r&&++n}return n}function Nx(t,e){let n=0,i,r=0,s=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,s+=i*(o-r));else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,s+=i*(a-r))}if(n>1)return s/(n-1)}function Mx(t,e){let n,i;for(const r of t)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));return[n,i]}class jt extends Map{constructor(e,n=Lx){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(jh(this,e))}has(e){return super.has(jh(this,e))}set(e,n){return super.set(Tx(this,e),n)}delete(e){return super.delete(Px(this,e))}}function jh({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function Tx({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function Px({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function Lx(t){return t!==null&&typeof t=="object"?t.valueOf():t}function pl(t){return t}function Uo(t,...e){return Wh(t,pl,pl,e)}function Ox(t,...e){return Wh(t,Array.from,pl,e)}function Wh(t,e,n,i){return(function r(s,o){if(o>=i.length)return n(s);const a=new jt,l=i[o++];let c=-1;for(const u of s){const f=l(u,++c,s),h=a.get(f);h?h.push(u):a.set(f,[u])}for(const[u,f]of a)a.set(u,r(f,o));return e(a)})(t,0)}function Ux(t=Wn){if(t===Wn)return Xh;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function Xh(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const _x=Math.sqrt(50),Gx=Math.sqrt(10),zx=Math.sqrt(2);function _o(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),o=s>=_x?10:s>=Gx?5:s>=zx?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,r)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?_o(t,e,n*2):[a,l,c]}function Go(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,s,o]=i?_o(e,t,n):_o(t,e,n);if(!(s>=r))return[];const a=s-r+1,l=new Array(a);if(i)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(r+c)/-o;else for(let c=0;c<a;++c)l[c]=(r+c)*o;return l}function ml(t,e,n){return e=+e,t=+t,n=+n,_o(t,e,n)[2]}function Zn(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?ml(e,t,n):ml(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function wl(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function yl(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function Zh(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?Xh:Ux(r);i>n;){if(i-n>600){const l=i-n+1,c=e-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),A=Math.max(n,Math.floor(e-c*f/l+h)),d=Math.min(i,Math.floor(e+(l-c)*f/l+h));Zh(t,e,A,d,r)}const s=t[e];let o=n,a=i;for($r(t,n,e),r(t[i],s)>0&&$r(t,n,i);o<a;){for($r(t,o,a),++o,--a;r(t[o],s)<0;)++o;for(;r(t[a],s)>0;)--a}r(t[n],s)===0?$r(t,n,a):(++a,$r(t,a,i)),a<=e&&(n=a+1),e<=a&&(i=a-1)}return t}function $r(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function Hx(t,e,n){if(t=Float64Array.from(Fx(t,n)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return yl(t);if(e>=1)return wl(t);var i,r=(i-1)*e,s=Math.floor(r),o=wl(Zh(t,s).subarray(0,s+1)),a=yl(t.subarray(s+1));return o+(a-o)*(r-s)}}function $h(t,e,n=qh){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,s=Math.floor(r),o=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return o+(a-o)*(r-s)}}function Yx(t,e){let n=0,i=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let s of t)(s=e(s,++r,t))!=null&&(s=+s)>=s&&(++n,i+=s)}if(n)return i/n}function Vx(t,e){return Hx(t,.5,e)}function es(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(r);++i<r;)s[i]=t+i*n;return s}function ts(t,e){let n=0;if(e===void 0)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function Jx(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function zo(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Li(t){return t=zo(Math.abs(t)),t?t[1]:NaN}function qx(t,e){return function(n,i){for(var r=n.length,s=[],o=0,a=t[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),s.push(n.substring(r-=a,r+a)),!((l+=a+1)>i));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function Kx(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var jx=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Oi(t){if(!(e=jx.exec(t)))throw new Error("invalid format: "+t);var e;return new Cl({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Oi.prototype=Cl.prototype;function Cl(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Cl.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Wx(t){e:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var Ho;function Xx(t,e){var n=zo(t,e);if(!n)return Ho=void 0,t.toPrecision(e);var i=n[0],r=n[1],s=r-(Ho=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+zo(t,Math.max(0,e+s-1))[0]}function ed(t,e){var n=zo(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const td={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Jx,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>ed(t*100,e),r:ed,s:Xx,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function nd(t){return t}var id=Array.prototype.map,rd=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Zx(t){var e=t.grouping===void 0||t.thousands===void 0?nd:qx(id.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?nd:Kx(id.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f,h){f=Oi(f);var A=f.fill,d=f.align,g=f.sign,m=f.symbol,p=f.zero,w=f.width,C=f.comma,y=f.precision,x=f.trim,I=f.type;I==="n"?(C=!0,I="g"):td[I]||(y===void 0&&(y=12),x=!0,I="g"),(p||A==="0"&&d==="=")&&(p=!0,A="0",d="=");var b=(h&&h.prefix!==void 0?h.prefix:"")+(m==="$"?n:m==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():""),S=(m==="$"?i:/[%p]/.test(I)?o:"")+(h&&h.suffix!==void 0?h.suffix:""),D=td[I],v=/[defgprs%]/.test(I);y=y===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function F(R){var M=b,O=S,z,_,Y;if(I==="c")O=D(R)+O,R="";else{R=+R;var te=R<0||1/R<0;if(R=isNaN(R)?l:D(Math.abs(R),y),x&&(R=Wx(R)),te&&+R==0&&g!=="+"&&(te=!1),M=(te?g==="("?g:a:g==="-"||g==="("?"":g)+M,O=(I==="s"&&!isNaN(R)&&Ho!==void 0?rd[8+Ho/3]:"")+O+(te&&g==="("?")":""),v){for(z=-1,_=R.length;++z<_;)if(Y=R.charCodeAt(z),48>Y||Y>57){O=(Y===46?r+R.slice(z+1):R.slice(z))+O,R=R.slice(0,z);break}}}C&&!p&&(R=e(R,1/0));var ae=M.length+R.length+O.length,ne=ae<w?new Array(w-ae+1).join(A):"";switch(C&&p&&(R=e(ne+R,ne.length?w-O.length:1/0),ne=""),d){case"<":R=M+R+O+ne;break;case"=":R=M+ne+R+O;break;case"^":R=ne.slice(0,ae=ne.length>>1)+M+R+O+ne.slice(ae);break;default:R=ne+M+R+O;break}return s(R)}return F.toString=function(){return f+""},F}function u(f,h){var A=Math.max(-8,Math.min(8,Math.floor(Li(h)/3)))*3,d=Math.pow(10,-A),g=c((f=Oi(f),f.type="f",f),{suffix:rd[8+A/3]});return function(m){return g(d*m)}}return{format:c,formatPrefix:u}}var Yo,ze,sd;$x({thousands:",",grouping:[3],currency:["$",""]});function $x(t){return Yo=Zx(t),ze=Yo.format,sd=Yo.formatPrefix,Yo}function eI(t){return Math.max(0,-Li(Math.abs(t)))}function tI(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Li(e)/3)))*3-Li(Math.abs(t)))}function nI(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Li(e)-Li(t))+1}const El=new Date,bl=new Date;function Se(t,e,n,i){function r(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(t(s=new Date(+s)),s),r.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),r.round=s=>{const o=r(s),a=r.ceil(s);return s-o<a-s?o:a},r.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),r.range=(s,o,a)=>{const l=[];if(s=r.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),e(s,a),t(s);while(c<s&&s<o);return l},r.filter=s=>Se(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(r.count=(s,o)=>(El.setTime(+s),bl.setTime(+o),t(El),t(bl),Math.floor(n(El,bl))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?o=>i(o)%s===0:o=>r.count(0,o)%s===0):r)),r}const Ui=Se(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Ui.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Se(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Ui),Ui.range;const Wt=1e3,dt=Wt*60,Xt=dt*60,Zt=Xt*24,xl=Zt*7,od=Zt*30,Il=Zt*365,$t=Se(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Wt)},(t,e)=>(e-t)/Wt,t=>t.getUTCSeconds());$t.range;const Vo=Se(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Wt)},(t,e)=>{t.setTime(+t+e*dt)},(t,e)=>(e-t)/dt,t=>t.getMinutes());Vo.range;const Jo=Se(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*dt)},(t,e)=>(e-t)/dt,t=>t.getUTCMinutes());Jo.range;const qo=Se(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Wt-t.getMinutes()*dt)},(t,e)=>{t.setTime(+t+e*Xt)},(t,e)=>(e-t)/Xt,t=>t.getHours());qo.range;const Ko=Se(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Xt)},(t,e)=>(e-t)/Xt,t=>t.getUTCHours());Ko.range;const yn=Se(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*dt)/Zt,t=>t.getDate()-1);yn.range;const $n=Se(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Zt,t=>t.getUTCDate()-1);$n.range;const ad=Se(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Zt,t=>Math.floor(t/Zt));ad.range;function ei(t){return Se(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*dt)/xl)}const ns=ei(0),jo=ei(1),iI=ei(2),rI=ei(3),_i=ei(4),sI=ei(5),oI=ei(6);ns.range,jo.range,iI.range,rI.range,_i.range,sI.range,oI.range;function ti(t){return Se(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/xl)}const is=ti(0),Wo=ti(1),aI=ti(2),cI=ti(3),Gi=ti(4),lI=ti(5),uI=ti(6);is.range,Wo.range,aI.range,cI.range,Gi.range,lI.range,uI.range;const rs=Se(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());rs.range;const ss=Se(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());ss.range;const Ft=Se(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ft.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Se(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)}),Ft.range;const Rt=Se(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Rt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Se(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)}),Rt.range;function cd(t,e,n,i,r,s){const o=[[$t,1,Wt],[$t,5,5*Wt],[$t,15,15*Wt],[$t,30,30*Wt],[s,1,dt],[s,5,5*dt],[s,15,15*dt],[s,30,30*dt],[r,1,Xt],[r,3,3*Xt],[r,6,6*Xt],[r,12,12*Xt],[i,1,Zt],[i,2,2*Zt],[n,1,xl],[e,1,od],[e,3,3*od],[t,1,Il]];function a(c,u,f){const h=u<c;h&&([c,u]=[u,c]);const A=f&&typeof f.range=="function"?f:l(c,u,f),d=A?A.range(c,+u+1):[];return h?d.reverse():d}function l(c,u,f){const h=Math.abs(u-c)/f,A=Xn(([,,m])=>m).right(o,h);if(A===o.length)return t.every(Zn(c/Il,u/Il,f));if(A===0)return Ui.every(Math.max(Zn(c,u,f),1));const[d,g]=o[h/o[A-1][2]<o[A][2]/h?A-1:A];return d.every(g)}return[a,l]}const[fI,AI]=cd(Rt,ss,is,ad,Ko,Jo),[hI,dI]=cd(Ft,rs,ns,yn,qo,Vo),os="year",as="quarter",cs="month",ls="week",us="date",Xo="day",Bl="dayofyear",fs="hours",As="minutes",hs="seconds",Zo="milliseconds";[os,as,cs,ls,us,Xo,Bl,fs,As,hs,Zo].reduce((t,e,n)=>(t[e]=1+n,t),{});const gI={[os]:Ft,[as]:rs.every(3),[cs]:rs,[ls]:ns,[us]:yn,[Xo]:yn,[Bl]:yn,[fs]:qo,[As]:Vo,[hs]:$t,[Zo]:Ui},pI={[os]:Rt,[as]:ss.every(3),[cs]:ss,[ls]:is,[us]:$n,[Xo]:$n,[Bl]:$n,[fs]:Ko,[As]:Jo,[hs]:$t,[Zo]:Ui};function mI(t){return gI[t]}function wI(t){return pI[t]}function vl(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Sl(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ds(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function ld(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=gs(r),u=ps(r),f=gs(s),h=ps(s),A=gs(o),d=ps(o),g=gs(a),m=ps(a),p=gs(l),w=ps(l),C={a:Y,A:te,b:ae,B:ne,c:null,d:gd,e:gd,f:GI,g:XI,G:$I,H:OI,I:UI,j:_I,L:pd,m:zI,M:HI,p:_e,q:qt,Q:bd,s:xd,S:YI,u:VI,U:JI,V:qI,w:KI,W:jI,x:null,X:null,y:WI,Y:ZI,Z:eB,"%":Ed},y={a:vo,A:Ur,b:An,B:Ri,c:null,d:wd,e:wd,f:rB,g:dB,G:pB,H:tB,I:nB,j:iB,L:yd,m:sB,M:oB,p:So,q:_r,Q:bd,s:xd,S:aB,u:cB,U:lB,V:uB,w:fB,W:AB,x:null,X:null,y:hB,Y:gB,Z:mB,"%":Ed},x={a:v,A:F,b:R,B:M,c:O,d:hd,e:hd,f:MI,g:Ad,G:fd,H:dd,I:dd,j:kI,L:NI,m:QI,M:FI,p:D,q:DI,Q:PI,s:LI,S:RI,u:xI,U:II,V:BI,w:bI,W:vI,x:z,X:_,y:Ad,Y:fd,Z:SI,"%":TI};C.x=I(n,C),C.X=I(i,C),C.c=I(e,C),y.x=I(n,y),y.X=I(i,y),y.c=I(e,y);function I(U,K){return function(W){var N=[],Ze=-1,se=0,it=U.length,$e,hn,Do;for(W instanceof Date||(W=new Date(+W));++Ze<it;)U.charCodeAt(Ze)===37&&(N.push(U.slice(se,Ze)),(hn=ud[$e=U.charAt(++Ze)])!=null?$e=U.charAt(++Ze):hn=$e==="e"?" ":"0",(Do=K[$e])&&($e=Do(W,hn)),N.push($e),se=Ze+1);return N.push(U.slice(se,Ze)),N.join("")}}function b(U,K){return function(W){var N=ds(1900,void 0,1),Ze=S(N,U,W+="",0),se,it;if(Ze!=W.length)return null;if("Q"in N)return new Date(N.Q);if("s"in N)return new Date(N.s*1e3+("L"in N?N.L:0));if(K&&!("Z"in N)&&(N.Z=0),"p"in N&&(N.H=N.H%12+N.p*12),N.m===void 0&&(N.m="q"in N?N.q:0),"V"in N){if(N.V<1||N.V>53)return null;"w"in N||(N.w=1),"Z"in N?(se=Sl(ds(N.y,0,1)),it=se.getUTCDay(),se=it>4||it===0?Wo.ceil(se):Wo(se),se=$n.offset(se,(N.V-1)*7),N.y=se.getUTCFullYear(),N.m=se.getUTCMonth(),N.d=se.getUTCDate()+(N.w+6)%7):(se=vl(ds(N.y,0,1)),it=se.getDay(),se=it>4||it===0?jo.ceil(se):jo(se),se=yn.offset(se,(N.V-1)*7),N.y=se.getFullYear(),N.m=se.getMonth(),N.d=se.getDate()+(N.w+6)%7)}else("W"in N||"U"in N)&&("w"in N||(N.w="u"in N?N.u%7:"W"in N?1:0),it="Z"in N?Sl(ds(N.y,0,1)).getUTCDay():vl(ds(N.y,0,1)).getDay(),N.m=0,N.d="W"in N?(N.w+6)%7+N.W*7-(it+5)%7:N.w+N.U*7-(it+6)%7);return"Z"in N?(N.H+=N.Z/100|0,N.M+=N.Z%100,Sl(N)):vl(N)}}function S(U,K,W,N){for(var Ze=0,se=K.length,it=W.length,$e,hn;Ze<se;){if(N>=it)return-1;if($e=K.charCodeAt(Ze++),$e===37){if($e=K.charAt(Ze++),hn=x[$e in ud?K.charAt(Ze++):$e],!hn||(N=hn(U,W,N))<0)return-1}else if($e!=W.charCodeAt(N++))return-1}return N}function D(U,K,W){var N=c.exec(K.slice(W));return N?(U.p=u.get(N[0].toLowerCase()),W+N[0].length):-1}function v(U,K,W){var N=A.exec(K.slice(W));return N?(U.w=d.get(N[0].toLowerCase()),W+N[0].length):-1}function F(U,K,W){var N=f.exec(K.slice(W));return N?(U.w=h.get(N[0].toLowerCase()),W+N[0].length):-1}function R(U,K,W){var N=p.exec(K.slice(W));return N?(U.m=w.get(N[0].toLowerCase()),W+N[0].length):-1}function M(U,K,W){var N=g.exec(K.slice(W));return N?(U.m=m.get(N[0].toLowerCase()),W+N[0].length):-1}function O(U,K,W){return S(U,e,K,W)}function z(U,K,W){return S(U,n,K,W)}function _(U,K,W){return S(U,i,K,W)}function Y(U){return o[U.getDay()]}function te(U){return s[U.getDay()]}function ae(U){return l[U.getMonth()]}function ne(U){return a[U.getMonth()]}function _e(U){return r[+(U.getHours()>=12)]}function qt(U){return 1+~~(U.getMonth()/3)}function vo(U){return o[U.getUTCDay()]}function Ur(U){return s[U.getUTCDay()]}function An(U){return l[U.getUTCMonth()]}function Ri(U){return a[U.getUTCMonth()]}function So(U){return r[+(U.getUTCHours()>=12)]}function _r(U){return 1+~~(U.getUTCMonth()/3)}return{format:function(U){var K=I(U+="",C);return K.toString=function(){return U},K},parse:function(U){var K=b(U+="",!1);return K.toString=function(){return U},K},utcFormat:function(U){var K=I(U+="",y);return K.toString=function(){return U},K},utcParse:function(U){var K=b(U+="",!0);return K.toString=function(){return U},K}}}var ud={"-":"",_:" ",0:"0"},Re=/^\s*\d+/,yI=/^%/,CI=/[\\^$*+?|[\]().{}]/g;function Z(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function EI(t){return t.replace(CI,"\\$&")}function gs(t){return new RegExp("^(?:"+t.map(EI).join("|")+")","i")}function ps(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function bI(t,e,n){var i=Re.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function xI(t,e,n){var i=Re.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function II(t,e,n){var i=Re.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function BI(t,e,n){var i=Re.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function vI(t,e,n){var i=Re.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function fd(t,e,n){var i=Re.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Ad(t,e,n){var i=Re.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function SI(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function DI(t,e,n){var i=Re.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function QI(t,e,n){var i=Re.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function hd(t,e,n){var i=Re.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function kI(t,e,n){var i=Re.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function dd(t,e,n){var i=Re.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function FI(t,e,n){var i=Re.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function RI(t,e,n){var i=Re.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function NI(t,e,n){var i=Re.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function MI(t,e,n){var i=Re.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function TI(t,e,n){var i=yI.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function PI(t,e,n){var i=Re.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function LI(t,e,n){var i=Re.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function gd(t,e){return Z(t.getDate(),e,2)}function OI(t,e){return Z(t.getHours(),e,2)}function UI(t,e){return Z(t.getHours()%12||12,e,2)}function _I(t,e){return Z(1+yn.count(Ft(t),t),e,3)}function pd(t,e){return Z(t.getMilliseconds(),e,3)}function GI(t,e){return pd(t,e)+"000"}function zI(t,e){return Z(t.getMonth()+1,e,2)}function HI(t,e){return Z(t.getMinutes(),e,2)}function YI(t,e){return Z(t.getSeconds(),e,2)}function VI(t){var e=t.getDay();return e===0?7:e}function JI(t,e){return Z(ns.count(Ft(t)-1,t),e,2)}function md(t){var e=t.getDay();return e>=4||e===0?_i(t):_i.ceil(t)}function qI(t,e){return t=md(t),Z(_i.count(Ft(t),t)+(Ft(t).getDay()===4),e,2)}function KI(t){return t.getDay()}function jI(t,e){return Z(jo.count(Ft(t)-1,t),e,2)}function WI(t,e){return Z(t.getFullYear()%100,e,2)}function XI(t,e){return t=md(t),Z(t.getFullYear()%100,e,2)}function ZI(t,e){return Z(t.getFullYear()%1e4,e,4)}function $I(t,e){var n=t.getDay();return t=n>=4||n===0?_i(t):_i.ceil(t),Z(t.getFullYear()%1e4,e,4)}function eB(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Z(e/60|0,"0",2)+Z(e%60,"0",2)}function wd(t,e){return Z(t.getUTCDate(),e,2)}function tB(t,e){return Z(t.getUTCHours(),e,2)}function nB(t,e){return Z(t.getUTCHours()%12||12,e,2)}function iB(t,e){return Z(1+$n.count(Rt(t),t),e,3)}function yd(t,e){return Z(t.getUTCMilliseconds(),e,3)}function rB(t,e){return yd(t,e)+"000"}function sB(t,e){return Z(t.getUTCMonth()+1,e,2)}function oB(t,e){return Z(t.getUTCMinutes(),e,2)}function aB(t,e){return Z(t.getUTCSeconds(),e,2)}function cB(t){var e=t.getUTCDay();return e===0?7:e}function lB(t,e){return Z(is.count(Rt(t)-1,t),e,2)}function Cd(t){var e=t.getUTCDay();return e>=4||e===0?Gi(t):Gi.ceil(t)}function uB(t,e){return t=Cd(t),Z(Gi.count(Rt(t),t)+(Rt(t).getUTCDay()===4),e,2)}function fB(t){return t.getUTCDay()}function AB(t,e){return Z(Wo.count(Rt(t)-1,t),e,2)}function hB(t,e){return Z(t.getUTCFullYear()%100,e,2)}function dB(t,e){return t=Cd(t),Z(t.getUTCFullYear()%100,e,2)}function gB(t,e){return Z(t.getUTCFullYear()%1e4,e,4)}function pB(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Gi(t):Gi.ceil(t),Z(t.getUTCFullYear()%1e4,e,4)}function mB(){return"+0000"}function Ed(){return"%"}function bd(t){return+t}function xd(t){return Math.floor(+t/1e3)}var zi,Dl,Id,Ql,Bd;wB({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wB(t){return zi=ld(t),Dl=zi.format,Id=zi.parse,Ql=zi.utcFormat,Bd=zi.utcParse,zi}function $o(t){const e={};return n=>e[n]||(e[n]=t(n))}function vd(t,e,n){n=n||{},Ge(n)||xe(`Invalid time multi-format specifier: ${n}`);const i=e(hs),r=e(As),s=e(fs),o=e(us),a=e(ls),l=e(cs),c=e(as),u=e(os),f=t(n[Zo]||".%L"),h=t(n[hs]||":%S"),A=t(n[As]||"%I:%M"),d=t(n[fs]||"%I %p"),g=t(n[us]||n[Xo]||"%a %d"),m=t(n[ls]||"%b %d"),p=t(n[cs]||"%B"),w=t(n[as]||"%B"),C=t(n[os]||"%Y");return y=>(i(y)<y?f:r(y)<y?h:s(y)<y?A:o(y)<y?d:l(y)<y?a(y)<y?g:m:u(y)<y?c(y)<y?p:w:C)(y)}function Sd(t){const e=$o(t.format),n=$o(t.utcFormat);return{timeFormat:i=>le(i)?e(i):vd(e,mI,i),utcFormat:i=>le(i)?n(i):vd(n,wI,i),timeParse:$o(t.parse),utcParse:$o(t.utcParse)}}let kl;yB();function yB(){return kl=Sd({format:Dl,parse:Id,utcFormat:Ql,utcParse:Bd})}function CB(t){return Sd(ld(t))}function EB(t){return arguments.length?kl=CB(t):kl}const bB=t=>t!=null&&t===t,xB=t=>t==="true"||t==="false"||t===!0||t===!1,IB=t=>!Number.isNaN(Date.parse(t)),Dd=t=>!Number.isNaN(+t)&&!(t instanceof Date),BB=t=>Dd(t)&&Number.isInteger(+t),Qd={boolean:Yb,integer:Gr,number:Gr,date:Jb,string:qb,unknown:Fo},ea=[xB,BB,Dd,IB],vB=["boolean","integer","number","date"];function SB(t,e){if(!t||!t.length)return"unknown";const n=t.length,i=ea.length,r=ea.map((s,o)=>o+1);for(let s=0,o=0,a,l;s<n;++s)for(l=e?t[s][e]:t[s],a=0;a<i;++a)if(r[a]&&bB(l)&&!ea[a](l)&&(r[a]=0,++o,o===ea.length))return"string";return vB[r.reduce((s,o)=>s===0?o:s,0)-1]}function DB(t,e){return e.reduce((n,i)=>(n[i]=SB(t,i),n),{})}function kd(t){const e=function(n,i){const r={delimiter:t};return Fl(n,i?_b(i,r):r)};return e.responseType="text",e}function Fl(t,e){return e.header&&(t=e.header.map(sl).join(e.delimiter)+`
`+t),Yh(e.delimiter).parse(t+"")}Fl.responseType="text";function QB(t){return typeof Buffer=="function"&&ht(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function Rl(t,e){const n=e&&e.property?ko(e.property):Fo;return Ge(t)&&!QB(t)?kB(n(t),e):n(JSON.parse(t))}Rl.responseType="json";function kB(t,e){return!Ee(t)&&zb(t)&&(t=[...t]),e&&e.copy?JSON.parse(JSON.stringify(t)):t}const FB={interior:(t,e)=>t!==e,exterior:(t,e)=>t===e};function Fd(t,e){let n,i,r,s;return t=Rl(t,e),e&&e.feature?(n=Ix,r=e.feature):e&&e.mesh?(n=vx,r=e.mesh,s=FB[e.filter]):xe("Missing TopoJSON feature or mesh parameter."),i=(i=t.objects[r])?n(t,i,s):xe("Invalid TopoJSON object: "+r),i&&i.features||[i]}Fd.responseType="json";const Nl={dsv:Fl,csv:kd(","),tsv:kd("	"),json:Rl,topojson:Fd};function ta(t,e){return arguments.length>1?(Nl[t]=e,this):Mi(Nl,t)?Nl[t]:null}function Ml(t,e,n,i){e=e||{};const r=ta(e.type||"json");return r||xe("Unknown data format type: "+e.type),t=r(t,e),e.parse&&RB(t,e.parse,n,i),Mi(t,"columns")&&delete t.columns,t}function RB(t,e,n,i){if(!t.length)return;const r=EB();n=n||r.timeParse,i=i||r.utcParse;let s=t.columns||Object.keys(t[0]),o,a,l,c,u,f;e==="auto"&&(e=DB(t,s)),s=Object.keys(e);const h=s.map(A=>{const d=e[A];let g,m;if(d&&(d.startsWith("date:")||d.startsWith("utc:")))return g=d.split(/:(.+)?/,2),m=g[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(g[0]==="utc"?i:n)(m);if(!Qd[d])throw Error("Illegal format pattern: "+A+":"+d);return Qd[d]});for(l=0,u=t.length,f=s.length;l<u;++l)for(o=t[l],c=0;c<f;++c)a=s[c],o[a]=h[c](o[a])}const NB=`
:root {
--genome-spy-basic-spacing: 10px;
--genome-spy-font-family: system-ui, "Segoe UI", Roboto, Helvetica, Arial,
sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}

.genome-spy {
font-family: var(--genome-spy-font-family);

position: relative;

display: flex;
flex-direction: column;

.canvas-wrapper {
position: relative;
flex-grow: 1;
overflow: hidden;
}

canvas {
display: block;
transform: scale(1, 1);
opacity: 1;
transition:
transform 0.6s,
opacity 0.6s;

&:focus,
&:focus-visible {
outline: none;
}
}

.loading {
> canvas {
transform: scale(0.95, 0.95);
opacity: 0;
}
}

.loading-indicators {
position: absolute;
inset: 0;

user-select: none;
pointer-events: none;

div {
position: absolute;
display: flex;
align-items: center;
justify-content: center;

> div {
font-size: 11px;
transition: opacity 0.2s;
background: white;
padding: 2px 5px;
display: flex;
border-radius: 3px;
gap: 0.5em;
opacity: 0;

&.loading {
opacity: 0.5;
}

&.error {
opacity: 0.8;
color: firebrick;
}

> * {
display: block;
}

img {
width: 1.5em;
height: 1.5em;
}
}
}
}

.tooltip {
position: absolute;

max-width: 450px;
overflow: hidden;

--background-color: #f6f6f6;
background: var(--background-color);
padding: var(--genome-spy-basic-spacing);

--font-size: 12px;
font-size: var(--font-size);

box-shadow: 0px 3px 15px 0px rgba(0, 0, 0, 0.21);

&:not(.sticky) {
pointer-events: none;
}

transition:
outline-color 0.3s ease-in-out,
box-shadow 0.3s ease-in-out;

outline: 0px solid transparent;
&.sticky {
outline: 2px solid black;
box-shadow: 0px 3px 18px 0px rgba(0, 0, 0, 0.3);
}

z-index: 100;

> :last-child {
margin-bottom: 0;
}

> .title {
padding-bottom: calc(var(--genome-spy-basic-spacing) / 2);
margin-bottom: calc(var(--genome-spy-basic-spacing) / 2);
border-bottom: 1px dashed var(--background-color);
border-bottom: 1px dashed
color-mix(in srgb, black 25%, var(--background-color));
}

.summary {
font-size: 12px;
}

table {
&:first-child {
margin-top: 0;
}

border-collapse: collapse;

th,
td {
padding: 2px 0.4em;
vertical-align: top;
font-size: var(--font-size);

&:first-child {
padding-left: 0;
}
}

th {
text-align: left;
font-weight: bold;
}
}

.color-legend {
display: inline-block;
width: 0.8em;
height: 0.8em;
margin-left: 0.4em;
box-shadow: 0px 0px 3px 1px white;
}

.attributes {
.hovered {
background-color: #e0e0e0;
}
}

.na {
color: #aaa;
font-style: italic;
font-size: 80%;
}
}

.gene-track-tooltip {
.summary {
font-size: 90%;
}
}

.message-box {
display: flex;
align-items: center;
justify-content: center;
position: absolute;
top: 0;
height: 100%;
width: 100%;

> div {
border: 1px solid red;
padding: 10px;
background: #fff0f0;
}
}
}

.gs-input-binding {
display: grid;
grid-template-columns: max-content max-content;
column-gap: 1em;
row-gap: 0.3em;
justify-items: start;

> select,
> input:not([type="checkbox"]) {
width: 100%;
}

input[type="range"] + span {
display: inline-block;
margin-left: 0.3em;
min-width: 2.2em;
font-variant-numeric: tabular-nums;
}

input[type="range"],
input[type="radio"] {
vertical-align: text-bottom;
}

.radio-group {
display: flex;
align-items: center;
}

.description {
max-width: 26em;
grid-column: 1 / -1;
color: #777;
font-size: 90%;
margin-top: -0.5em;
}
}

.gs-input-bindings {
flex-basis: content;
font-size: 14px;
padding: var(--genome-spy-basic-spacing);
}
`;function MB(t,e){var n=t.getBoundingClientRect();return[e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop]}function Hi(t,e){return t.length==e.length&&t.every((n,i)=>t[i]===e[i])}function Ne(t){return Array.isArray(t)?t:typeof t<"u"?[t]:[]}function na(t){return t[t.length-1]}class TB{#e=!1;#t=!0;#n=void 0;#i=0;#s=void 0;#o=0;#r;#a;#c=[!0];constructor(e){this.#a=e,this.#r=document.createElement("div"),this.#r.className="tooltip",this.#a.appendChild(this.#r),this.clear()}set sticky(e){!e&&this.#e&&this.clear(),this.#e=e,this.#r.classList.toggle("sticky",this.#e)}get sticky(){return this.#e}set visible(e){e!=this.#t&&(this.#r.style.display=e?null:"none",this.#t=e)}get visible(){return this.#t}get enabled(){return na(this.#c)??!0}pushEnabledState(e){this.#c.push(e),e||(this.visible=!1)}popEnabledState(){this.#c.pop()}handleMouseMove(e){if(this.#e)return;this.mouseCoords=MB(this.#a,e);const n=performance.now();!this.visible&&!this._isPenalty()&&n-this.#o>500&&(this.#i=n+70),this.#s&&PB(this.mouseCoords,this.#s)>20&&(this.#i=n+400),this.#s=this.mouseCoords,this.visible&&this.updatePlacement(),this.#o=n}updatePlacement(){const[n,i]=this.mouseCoords;let r=n+20;r>this.#a.clientWidth-this.#r.offsetWidth&&(r=n-20-this.#r.offsetWidth),this.#r.style.left=r+"px",this.#r.style.top=Math.min(i+20,this.#a.clientHeight-this.#r.offsetHeight)+"px"}setContent(e){if(!this.#e){if(!e||!this.enabled||this._isPenalty()){this.visible&&(Wr("",this.#r),this.visible=!1),this.#n=void 0;return}Wr(e,this.#r),this.visible=!0,this.updatePlacement()}}clear(){this.#n=void 0,this.setContent(void 0)}updateWithDatum(e,n){if(e!==this.#n){this.#n=e,n||(n=r=>Promise.resolve(oe` ${JSON.stringify(r)} `));const i=e;n(e).then(r=>{this.#n===i&&this.setContent(r)}).catch(r=>{if(r!=="debounced")throw r})}}_isPenalty(){return this.#i&&this.#i>performance.now()}}function PB(t,e){let n=0;for(let i=0;i<t.length;i++)n+=(t[i]-e[i])**2;return Math.sqrt(n)}function LB(t){t.classList.add("genome-spy");const e=document.createElement("style");e.innerHTML=NB,t.appendChild(e);const n=Rd("div",{class:"canvas-wrapper"});t.appendChild(n),n.classList.add("loading");const i=Rd("div",{class:"loading-indicators"}),r=new TB(t);return{canvasWrapper:n,loadingIndicatorsElement:i,tooltip:r,styleElement:e}}function OB(t,e){const n=document.createElement("div");n.className="message-box";const i=document.createElement("div");i.textContent=e,n.appendChild(i),t.appendChild(n)}function Rd(t,e){const n=document.createElement(t);for(const[i,r]of Object.entries(e))["innerHTML","innerText","className"].includes(i)&&(n[i]=r),n.setAttribute(i,r);return n}const Nd={ATTRIBUTE:1,CHILD:2},Md=t=>(...e)=>({_$litDirective$:t,values:e});let Td=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,n,i){this._$Ct=e,this._$AM=n,this._$Ci=i}_$AS(e,n){return this.update(e,n)}update(e,n){return this.render(...n)}};const Pd="important",UB=" !"+Pd,ia=Md(class extends Td{constructor(t){if(super(t),t.type!==Nd.ATTRIBUTE||t.name!=="style"||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return i==null?e:e+`${n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${i};`},"")}update(t,[e]){const{style:n}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const i of this.ft)e[i]==null&&(this.ft.delete(i),i.includes("-")?n.removeProperty(i):n[i]=null);for(const i in e){const r=e[i];if(r!=null){this.ft.add(i);const s=typeof r=="string"&&r.endsWith(UB);i.includes("-")||s?n.setProperty(i,s?r.slice(0,-11):r,s?Pd:""):n[i]=r}}return Kn}}),Ld="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e.spinner_ajPY{transform-origin:center;animation:spinner_AtaB%20.75s%20infinite%20linear}@keyframes%20spinner_AtaB{100%25{transform:rotate(360deg)}}%3c/style%3e%3cpath%20d='M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z'%20opacity='.25'/%3e%3cpath%20d='M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z'%20class='spinner_ajPY'/%3e%3c/svg%3e";class _B{#e;#t;#n=null;constructor(e,n){this.#e=e,this.#t=n,this.#n=this.#t.subscribe(()=>this.updateLayout()),this.updateLayout()}destroy(){this.#n&&(this.#n(),this.#n=null)}updateLayout(){const e=[],n=()=>{for(const[,s]of this.#t.entries())if(s.status=="loading"||s.status=="error")return!0;return!1};let i,r=!1;for(const[s,o]of this.#t.entries()){const a=o.status=="loading"||o.status=="error",l=s.coords;if(!l&&a&&!i&&(i=o),l){a&&(r=!0);const c={left:`${l.x}px`,top:`${l.y}px`,width:`${l.width}px`,height:`${l.height}px`};e.push(oe`<div style=${ia(c)}>
                        <div class=${o.status}>
                            ${o.status=="error"?oe`<span
                                      >Loading
                                      failed${o.detail?oe`: ${o.detail}`:de}</span
                                  >`:oe`
                                      <img src="${Ld}" alt="" />
                                      <span>Loading...</span>
                                  `}
                        </div>
                    </div>`)}}if(i&&!r){const s={left:"0px",top:"0px",width:"100%",height:"100%"};e.push(oe`<div style=${ia(s)}>
                    <div class=${i.status}>
                        ${i.status=="error"?oe`<span
                                  >Loading
                                  failed${i.detail?oe`: ${i.detail}`:de}</span
                              >`:oe`
                                  <img src="${Ld}" alt="" />
                                  <span>Loading...</span>
                              `}
                    </div>
                </div>`)}n()?this.#e.style.display="block":setTimeout(()=>{n()||(this.#e.style.display="none")},3e3),Wr(e,this.#e)}}class Od{#e=new Map;#t=new Set;set(e,n,i){if(!e)throw new Error("LoadingStatusRegistry.set requires a view.");this.#e.set(e,{status:n,detail:i});const r={view:e,status:n,detail:i};for(const s of this.#t)s(r)}delete(e){const n=this.#e.get(e);if(!n)return;this.#e.delete(e);const i={view:e,status:n.status,detail:n.detail};for(const r of this.#t)r(i)}get(e){return this.#e.get(e)}entries(){return this.#e.entries()}subscribe(e){return this.#t.add(e),()=>{this.#t.delete(e)}}}function GB(t){return e=>{if(t.querySelector(".view-highlight")?.remove(),e){if(!e.isVisible())return;const n=e.coords;if(n){const i=document.createElement("div");i.className="view-highlight",i.style.position="absolute",i.style.left=n.x+"px",i.style.top=n.y+"px",i.style.width=n.width+"px",i.style.height=n.height+"px",i.style.border="1px solid green",i.style.backgroundColor="rgba(0, 255, 0, 0.05)",i.style.pointerEvents="none",t.appendChild(i)}}}}class zB{#e;constructor(){this.#e=new Map}add(e,n){document.addEventListener(e,n);let i=this.#e.get(e);i||(i=[],this.#e.set(e,i)),i.push(n)}removeAll(){for(const[e,n]of this.#e)for(const i of n)document.removeEventListener(e,i);this.#e.clear()}}class Ud{#e;constructor(){this.#e=new Map}add(e,n){let i=this.#e.get(e);i||(i=new Set,this.#e.set(e,i)),i.add(n)}remove(e,n){this.#e.get(e)?.delete(n)}emit(e,n){this.#e.get(e)?.forEach(i=>i(n))}}function ra(t,e,n=!0){let i,r=o=>{};return function(...a){return new Promise((l,c)=>{const u=()=>{clearTimeout(i),r=f=>{},l(t(...a))};n&&r("debounced"),clearTimeout(i),r=c,i=window.setTimeout(u,typeof e=="function"?e():e)})}}const Nt=1,Cn=2,Tl=4;class Pl{stats={count:0,first:null};#e=!1;#t=!1;#n=[];paramRuntimeProvider=null;get behavior(){return 0}get label(){return`(${this.constructor.name})`}constructor(e){this.paramRuntimeProvider=e,this.children=[],this.parent=void 0,this.completed=!1}get disposed(){return this.#t}reset(){this.completed=!1;for(const e of this.children)e.reset();this.stats.count=0,this.stats.first=null}initialize(){}initializeOnce(){this.#e||(this.initialize(),this.#e=!0)}#i(){this._propagate=Function("children","stats",es(this.children.length).map(e=>`const child${e} = children[${e}];`).join(`
`)+`return function propagate(datum) {
                    if (stats.count === 0) {
                        stats.first = structuredClone(datum);
                    }
                    stats.count++;
                ${es(this.children.length).map(e=>`child${e}.handle(datum);`).join(`
`)}
                };`)(this.children,this.stats)}setParent(e){this.parent=e}addChild(e){if(e.parent)throw new Error("Cannot add the child! It already has a parent.");return this.children.push(e),e.setParent(this),this.#i(),this}adopt(e){e.parent&&e.parent.removeChild(e),this.addChild(e)}adoptChildrenOf(e){for(const n of e.children)this.adopt(n)}insertAsParent(e){if(this.isRoot())throw new Error("Cannot insert a new parent for a root node!");e.parent=this.parent,this.parent.children[this.parent.children.indexOf(this)]=e,this.parent.#i(),this.parent=void 0,e.addChild(this)}removeChild(e){const n=this.children.indexOf(e);if(n>-1)this.children.splice(n,1),e.parent=void 0,this.#i();else throw new Error("Trying to remove an unknown child node!")}excise(){if(this.isRoot())throw new Error("Cannot excise root node!");if(this.isTerminal())this.parent.removeChild(this);else if(this.children.length==1){const e=this.children[0];e.setParent(this.parent),this.parent.children[this.parent.children.indexOf(this)]=e,this.parent.#i(),this.setParent(void 0),this.children.length=0}else throw new Error("Cannot excise a node that has multiple children!")}isRoot(){return!this.parent}isBranching(){return this.children.length>1}isTerminal(){return this.children.length==0}visit(e){e(this);for(const n of this.children)n.visit(e);e.afterChildren&&e.afterChildren(this)}subtreeToString(e=0){const n=this.children.map(i=>i.subtreeToString(e+1)).join("");return`${" ".repeat(e*2)}* ${this.label}${"identifier"in this&&this.identifier?": "+this.identifier:""} 
${n}`}handle(e){this._propagate(e)}complete(){this.completed=!0;for(const e of this.children)e.complete()}registerDisposer(e){this.#t?e():this.#n.push(e)}dispose(){if(!this.#t){this.#t=!0;for(const e of this.#n)e();this.#n.length=0}}disposeSubtree(){const e=()=>{};e.afterChildren=n=>{n.dispose()},this.visit(e)}beginBatch(e){for(const n of this.children)n.beginBatch(e)}get paramRuntime(){if(this.paramRuntimeProvider&&this.paramRuntimeProvider.paramRuntime)return this.paramRuntimeProvider.paramRuntime;if(!this.parent)throw new Error("Cannot find paramRuntime!");return this.parent.paramRuntime}repropagate(){if(this.parent)this.parent.repropagate();else throw new Error("Cannot repropagate data, no FlowNode with stored data found!")}_propagate(e){}}function _d(t){return t.type=="file"}function HB(t){return t.type=="facet"}class De extends Pl{#e;constructor(e,n){super(n),this.#e=e.type}get label(){return this.#e}}const gt="_uniqueId",Gd=1e4,zd=[null];class Ll extends De{get behavior(){return Cn}constructor(e){super(e),this.params=e,this.as=e.as??gt,this._blocks=[],this._usedBlocks=0,this._id=-1}initialize(){}reset(){super.reset(),this._usedBlocks=0,this._id=-1}handle(e){e[this.as]=this._nextId(),this._propagate(e)}_nextId(){return++this._id%Gd==0&&(this._id=this._getBlock()*Gd),this._id}_getBlock(){return this._usedBlocks<this._blocks.length?this._blocks[this._usedBlocks++]:this._reserveBlock()}_reserveBlock(){const e=zd.length;return zd[e]=this,this._blocks.push(e),this._usedBlocks++,e}}function $(t,e=t){if(/^[A-Za-z0-9_]+$/.test(t)){const n=function(r){t in r||YB(r,t)},i=new Function("validator",`
                let validated = !validator;
                return function accessField(datum) {
                    if (!validated) {
                        validator(datum);
                        validated = true;
                    }
                    return datum[${JSON.stringify(t)}];
                }`)(n);return At(i,[t],e)}else return ko(t)}function YB(t,e){throw new Error(`Invalid field "${e}". Available fields or properties: ${Object.keys(t).join(", ")}`)}function Hd(t,e,n){if(!t)return;function i(s){const o=s;return o.fields??=[],o.constant=o.fields.length===0,o.channelDef=e,o.channel=t,o.sourceKey=JB(e),o.scaleChannel=((pt(e)&&e.resolutionChannel)??(oa(t)&&t))||void 0,o.scaleChannel!==void 0&&(o.domainKeyBase=Vd({scaleChannel:o.scaleChannel,source:Ol(e)}).domainKeyBase),"param"in e?(o.predicate=c0(!1),o.predicate.param=e.param,o.predicate.empty=e.empty??!0):(o.predicate=c0(!0),o.predicate.empty=!1),o.equals=a=>a?o===a||o.sourceKey!==void 0&&o.sourceKey===a.sourceKey:!1,o.asNumberAccessor=()=>o,o}function r(s){if(be(s)){const o=i(n.createExpression(s.expr));if(o.fields.length>0)throw new Error("Expression in DatumDef/ValueDef cannot access data fields: "+s.expr);return o}else{const o=s;return i(()=>o)}}if(en(e))try{return i($(e.field))}catch(s){throw new Error(`Invalid field definition: ${s.message}`)}else{if(Vi(e))return i(n.createExpression(e.expr));if(Yi(e))return r(e.datum);if(ft(e))return r(e.value);throw new Error(`Invalid channel definition: "${t}": ${JSON.stringify(e)}! The channel definition must contain one of the following properties: "field", "datum", "value" or "expr".`)}}function VB(t,e,n){const i=[];if(XB(e)||Ul(e)){const r=Array.isArray(e.condition)?e.condition:[e.condition];for(const s of r)i.push(Hd(t,s,n))}if(i.push(Hd(t,e,n)),i.filter(r=>!r.constant).length>1)throw new Error("Only one accessor can be non-constant. Channel: "+t);return i}function Yd(t){return t.scaleChannel!==void 0}function Ol(t){if(en(t))return{kind:"field",value:t.field};if(Vi(t))return{kind:"expr",value:t.expr};if(Yi(t))return{kind:"datum",value:t.datum};if(ft(t))return{kind:"value",value:t.value};throw new Error("Cannot derive a domain key from channel definition: "+JSON.stringify(t))}function JB(t){const e=Ol(t);return e.kind==="datum"||e.kind==="value"?"constant|"+Kd(e.value):e.kind+"|"+qd(e)}function Vd({scaleChannel:t,source:e,type:n}){if(!t)throw new Error("Cannot build a domain key without a scale channel.");const i=t+"|"+e.kind+"|"+qd(e),r=n?n+"|"+i:void 0;return{domainKeyBase:i,domainKey:r}}function Jd(t,e){const{domainKey:n,domainKeyBase:i}=Vd({scaleChannel:t.scaleChannel,source:Ol(t.channelDef),type:e});if(!n)throw new Error("Cannot finalize a domain key without a resolved type.");return t.domainKeyBase=i,t.domainKey=n,n}function qd(t){switch(t.kind){case"field":case"expr":return t.value;case"datum":case"value":return Kd(t.value);default:throw new Error("Unknown domain key source.")}}function Kd(t){return be(t)?"expr:"+t.expr:t===void 0?"undefined":JSON.stringify(t)}function qB(t,e){const n={},i=r=>t.getScaleResolution(r)?.getScale();for(const[r,s]of Object.entries(e)){if(!s)continue;const o=r;if(KB(o))continue;const a=s;n[o]=jB(VB(o,a,t.paramRuntime),i)}return n}function KB(t){return t==="key"||t==="search"}function jB(t,e){if(t.length===1)return jd(t[0],e);const n=t.map(s=>s.predicate),i=t.map(s=>jd(s,e));return Object.assign(s=>{for(let o=0;o<i.length;o++)if(n[o](s))return i[o](s)},{constant:!1,accessors:i.map(s=>s.accessors[0]),dataAccessor:i.map(s=>s.dataAccessor).find(s=>s),scale:i.map(s=>s.scale).find(s=>s),channelDef:t.at(-1).channelDef})}function jd(t,e){const{channel:n,scaleChannel:i,channelDef:r}=t,s=t.scaleChannel?e(i):void 0;if(i&&!s)throw new Error(`Missing scale! "${n}": ${JSON.stringify(r)}`);return Object.assign(s?o=>s(t(o)):o=>t(o),{scale:s,constant:t.constant,accessors:[t],dataAccessor:t.constant?void 0:t,channelDef:r})}function ft(t){return t&&"value"in t}function en(t){return t&&"field"in t}function Yi(t){return t&&"datum"in t}function pt(t){return en(t)||Yi(t)||Vi(t)||Xd(t)}function Wd(t){if(Ul(t)){const e=t.condition;if(!Array.isArray(e)&&pt(e))return e}else if(pt(t))return t}function WB(t,e){const n=t.mark.encoding[e];if(!Array.isArray(n)&&pt(n))return n;throw new Error("Not a channel def with scale!")}function Xd(t){return t&&"chrom"in t}function Vi(t){return t&&"expr"in t}function XB(t){return(en(t)||Yi(t))&&"condition"in t}function Ul(t){return ft(t)&&"condition"in t}const ni=["x","y"],ZB=["x2","y2"],$B=[...ni,...ZB];function _l(t){return ni.includes(t)}function ms(t){return $B.includes(t)}const Zd={x:"x2",y:"y2"},$d=Object.fromEntries(Object.entries(Zd).map(t=>[t[1],t[0]]));function Gl(t){return t in $d}function zl(t){const e=Zd[t];if(e)return e;throw new Error(`${t} has no secondary channel!`)}function En(t){return $d[t]??t}function bn(t){return["color","fill","stroke"].includes(En(t))}function sa(t){return["shape"].includes(t)}function oa(t){return["x","y","x2","y2","color","fill","stroke","opacity","fillOpacity","strokeOpacity","strokeWidth","size","shape","angle","dx","dy","sample"].includes(t)}function ev(t){if(t==="shape")return["circle","square","cross","diamond","triangle-up","triangle-right","triangle-down","triangle-left","tick-up","tick-right","tick-down","tick-left"]}function e0(t){if(!sa(t))throw new Error("Not a discrete channel: "+t);const e=new Map(ev(t).map((n,i)=>[n,i]));return n=>{const i=e.get(n);if(i!==void 0)return i;throw new Error(`Invalid value for "${t}" channel: ${n}`)}}function Hl(t){return{type:"single",datum:t,uniqueId:t?.[gt]}}function Yl(t){return t??=[],{type:"multi",data:new Map(t.map(e=>[e[gt],e]))}}function t0(t){return{type:"interval",intervals:Object.fromEntries(t.map(e=>[e,null]))}}function tv(t,{add:e,remove:n,toggle:i}){const r=t.data;for(const s of e??[])r.set(s[gt],s);for(const s of n??[])r.delete(s[gt]);for(const s of i??[]){const o=s[gt];r.has(o)?r.delete(o):r.set(o,s)}return{type:"multi",data:r}}function nv(t,e){const n=!!(t.empty??!0),i=Mt(t.param),r=t.fields??{};if(i0(e))return`${i}.uniqueId == null ? ${n} : ${i}.uniqueId === datum[${JSON.stringify(gt)}]`;if(Vl(e))return`${i}.data.size == 0 ? ${n} : mapHasKey(${i}.data, datum[${JSON.stringify(gt)}])`;if(n0(e)){const s=Object.keys(e.intervals),o=Object.keys(r).filter(_l);if(o.length===0)throw new Error("Filtering using interval selections requires at least one primary positional channel in the config! "+JSON.stringify(t));if(o.some(c=>!s.includes(c)))throw new Error(`Selection channels (${s.join(", ")}) do not match the fields: ${JSON.stringify(t)}!`);const a=c=>`datum[${JSON.stringify(c)}]`;return s.map(c=>{const u=zl(c),f=r[c],h=r[u]??r[c],A=`${i}.intervals.${c}[0] <= ${a(h)}`,d=`${a(f)} <= ${i}.intervals.${c}[1]`;return`(${i}.intervals.${c} ? (${A} && ${d}) : ${n})`}).join(" && ")}else throw new Error(`Unrecognized selection type : ${JSON.stringify(e)}`)}function n0(t){return t.type==="interval"}function i0(t){return t.type==="single"}function Vl(t){return t.type==="multi"}function aa(t){const e=typeof t=="string"?{type:t}:{...t};return e.on=e.on?o0(e.on):ca(e)?{type:"click"}:void 0,e.clear=e.clear===!1?void 0:e.clear===!0||e.clear==null?{type:"dblclick"}:o0(e.clear),ca(e)&&e.on.type==="click"&&(e.toggle=!0),e}function ca(t){return t&&t.type=="point"}function r0(t){return t&&t.type=="interval"}function s0(t){return Object.values(t.intervals).some(e=>e&&e.length===2)}function iv(t,e){return Object.entries(t.intervals).every(([n,i])=>(n=="x"||n=="y")&&i&&i[0]<=e[n]&&i[1]>=e[n])}function o0(t){if(typeof t=="string"){const e=t.match(/^([a-zA-Z]+)(?:\[(.+)\])?$/);if(!e)throw new Error(`Invalid event type string: ${t}`);const[,n,i]=e,r={type:n};return i&&(r.filter=i),r}else return t}function be(t){return typeof t=="object"&&t!=null&&"expr"in t&&le(t.expr)}function Ie(t){if(be(t))throw new Error("ExprRef "+JSON.stringify(t)+" not allowed here. Expected a scalar value.");return t}function a0(t){return("expr"in t||"bind"in t)&&!("select"in t)}function Jl(t){return!("expr"in t||"bind"in t)&&"select"in t}function Mt(t){if(!/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t))throw new Error("Invalid parameter name: "+t+". Must be a valid JavaScript identifier.");return t}function ql(t,e,n){if("select"in t){const i=aa(t.select);if(ca(i))return i.toggle?Yl():Hl(null);if(r0(i)){if(!i.encodings)throw new Error('Interval selection "'+t.name+'" must have encodings defined!');return t0(i.encodings)}throw new Error('Unknown selection config for parameter "'+t.name+'".')}if("expr"in t){const i=e?.createExpression(t.expr);if(!i)throw new Error('Cannot evaluate expression for parameter "'+t.name+'".');return i(null)}return"value"in t?t.value:null}function ws(t,e,n,i,r={}){const s={...e},o=new Set;let a=!1,l=!1;const c=r.batchMode??"microtask";i?.(()=>{l=!0,o.clear(),a=!1});const f=()=>{if(l)return;if(!n||o.size===0){a=!1;return}const A=new Set(o);o.clear(),a=!1,n(A)},h=A=>{l||(o.add(A),a||(a=!0,queueMicrotask(()=>{l||(c=="whenPropagated"&&t.whenPropagated?t.whenPropagated().then(f).catch(()=>{f()}):f())})))};for(const[A,d]of Object.entries(e))if(be(d))if(n){const g=()=>h(A),m=t.watchExpression?t.watchExpression(d.expr,g,{scopeOwned:!i,registerDisposer:i}):t.createExpression(d.expr);if(!t.watchExpression){const p=m.subscribe(g);i?.(p)}Object.defineProperty(s,A,{enumerable:!0,get(){return m()}})}else{const g=t.createExpression(d.expr);Object.defineProperty(s,A,{enumerable:!0,get(){return g()}})}else s[A]=d;return s}function c0(t){return Object.assign(()=>t,{subscribe:()=>()=>{},invalidate:()=>{},identifier:()=>"constant",fields:[],globals:[],code:JSON.stringify(t)})}function rv(t){const e=Math.floor(Math.random()*16777215).toString(16),n=[];for(const i of t.paramConfigs.values()){if(!a0(i))continue;const r=i.bind;if(!r||!("input"in r))continue;const s=i.name,o=f=>{t.setValue(s,f)},a=t.getValue(s),l=r.name??s,c=r.debounce?ra(o,r.debounce,!1):o,u=`${e}-param-${s}`;if(r.input=="range")n.push(oe`<label for=${u}>${l}</label>
                    <div>
                        <input
                            id=${u}
                            type="range"
                            min=${r.min??0}
                            max=${r.max??100}
                            step=${r.step??Zn(r.min,r.max,100)}
                            .value=${a}
                            @input=${f=>{c(f.target.valueAsNumber),f.target.nextElementSibling.textContent=f.target.valueAsNumber}}
                        /><span>${a}</span>
                    </div>`);else if(r.input=="checkbox")n.push(oe`<label for=${u}>${l}</label>
                    <input
                        id=${u}
                        type="checkbox"
                        ?checked=${a}
                        @input=${f=>c(f.target.checked)}
                    />`);else if(r.input=="radio")n.push(oe`<span class="label">${l}</span>
                    <div class="radio-group">
                        ${r.options.map((f,h)=>oe`<label>
                                    <input
                                        type="radio"
                                        name=${s}
                                        value=${f}
                                        .checked=${a==f}
                                        @input=${A=>c(A.target.value)}
                                    />${r.labels?.[h]??f}</label
                                >`)}
                    </div>`);else if(r.input=="select")n.push(oe`<label for=${u}>${l}</label>
                    <select
                        id=${u}
                        @input=${f=>c(f.target.value)}
                    >
                        ${r.options.map((f,h)=>oe`<option
                                    value=${f}
                                    ?selected=${a==f}
                                >
                                    ${r.labels?.[h]??f}
                                </option>`)}
                    </select> `);else if(r.input=="text"||r.input=="number"||r.input=="color")n.push(oe`<label for=${u}>${l}</label>
                    <div>
                        <input
                            id=${u}
                            type=${r.input}
                            placeholder=${r.placeholder??""}
                            autocomplete=${r.autocomplete??"off"}
                            .value=${a}
                            @focus=${f=>f.target.select()}
                            @input=${f=>{c(r.input=="number"?f.target.valueAsNumber:f.target.value)}}
                        />
                    </div>`);else throw new Error("Unsupported input type: "+r.input);r.description&&n.push(oe`<div class="description">${r.description}</div>`)}return n}class sv{#e;#t;#n;constructor(e,n){this.#e=e,this.#t=n,this.#n=void 0}initialize(e){const n=[];e.visit(r=>{const s=r.paramRuntime;n.push(...rv(s))});const i=this.#t.inputBindingContainer;if(!(!i||i=="none"||!n.length)){if(this.#n=document.createElement("div"),this.#n.className="gs-input-bindings",i=="default")this.#e.appendChild(this.#n);else if(i instanceof HTMLElement)i.appendChild(this.#n);else throw new Error("Invalid inputBindingContainer");n.length&&Wr(oe`<div class="gs-input-binding">${n}</div>`,this.#n)}}remove(){this.#n?.remove()}}const Kl=5120,ys=5121,jl=5122,Wl=5123,Xl=5124,Zl=5125,$l=5126,ov=32819,av=32820,cv=33635,lv=5131,uv=33640,fv=35899,Av=35902,hv=36269,dv=34042,l0={};{const t=l0;t[Kl]=Int8Array,t[ys]=Uint8Array,t[jl]=Int16Array,t[Wl]=Uint16Array,t[Xl]=Int32Array,t[Zl]=Uint32Array,t[$l]=Float32Array,t[ov]=Uint16Array,t[av]=Uint16Array,t[cv]=Uint16Array,t[lv]=Uint16Array,t[uv]=Uint32Array,t[fv]=Uint32Array,t[Av]=Uint32Array,t[hv]=Uint32Array,t[dv]=Uint32Array}function eu(t){if(t instanceof Int8Array)return Kl;if(t instanceof Uint8Array||t instanceof Uint8ClampedArray)return ys;if(t instanceof Int16Array)return jl;if(t instanceof Uint16Array)return Wl;if(t instanceof Int32Array)return Xl;if(t instanceof Uint32Array)return Zl;if(t instanceof Float32Array)return $l;throw new Error("unsupported typed array type")}function gv(t){if(t===Int8Array)return Kl;if(t===Uint8Array||t===Uint8ClampedArray)return ys;if(t===Int16Array)return jl;if(t===Uint16Array)return Wl;if(t===Int32Array)return Xl;if(t===Uint32Array)return Zl;if(t===Float32Array)return $l;throw new Error("unsupported typed array type")}function pv(t){const e=l0[t];if(!e)throw new Error("unknown gl type");return e}const la=typeof SharedArrayBuffer<"u"?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};function mv(...t){console.error(...t)}function u0(...t){console.warn(...t)}function wv(t,e){return typeof WebGLBuffer<"u"&&e instanceof WebGLBuffer}function f0(t,e){return typeof WebGLRenderbuffer<"u"&&e instanceof WebGLRenderbuffer}function ua(t,e){return typeof WebGLTexture<"u"&&e instanceof WebGLTexture}function yv(t,e){return typeof WebGLSampler<"u"&&e instanceof WebGLSampler}const A0=35044,Tt=34962,Cv=34963,Ev=34660,bv=5120,xv=5121,Iv=5122,Bv=5123,vv=5124,Sv=5125,Dv=5126,h0={attribPrefix:""};function d0(t,e,n,i,r){t.bindBuffer(e,n),t.bufferData(e,i,r||A0)}function g0(t,e,n,i){if(wv(t,e))return e;n=n||Tt;const r=t.createBuffer();return d0(t,n,r,e,i),r}function p0(t){return t==="indices"}function Qv(t){return t instanceof Int8Array||t instanceof Uint8Array}function kv(t){return t===Int8Array||t===Uint8Array}function Fv(t){return t.length?t:t.data}const Rv=/coord|texture/i,Nv=/color|colour/i;function m0(t,e){let n;if(Rv.test(t)?n=2:Nv.test(t)?n=4:n=3,e%n>0)throw new Error(`Can not guess numComponents for attribute '${t}'. Tried ${n} but ${e} values is not evenly divisible by ${n}. You should specify it.`);return n}function Mv(t,e){return t.numComponents||t.size||m0(e,Fv(t).length)}function tu(t,e){if(la(t))return t;if(la(t.data))return t.data;Array.isArray(t)&&(t={data:t});let n=t.type;return n||(p0(e)?n=Uint16Array:n=Float32Array),new n(t.data)}function Tv(t,e){const n={};return Object.keys(e).forEach(function(i){if(!p0(i)){const r=e[i],s=r.attrib||r.name||r.attribName||h0.attribPrefix+i;if(r.value){if(!Array.isArray(r.value)&&!la(r.value))throw new Error("array.value is not array or typedarray");n[s]={value:r.value}}else{let o,a,l,c;if(r.buffer&&r.buffer instanceof WebGLBuffer)o=r.buffer,c=r.numComponents||r.size,a=r.type,l=r.normalize;else if(typeof r=="number"||typeof r.data=="number"){const u=r.data||r,f=r.type||Float32Array,h=u*f.BYTES_PER_ELEMENT;a=gv(f),l=r.normalize!==void 0?r.normalize:kv(f),c=r.numComponents||r.size||m0(i,u),o=t.createBuffer(),t.bindBuffer(Tt,o),t.bufferData(Tt,h,r.drawType||A0)}else{const u=tu(r,i);o=g0(t,u,void 0,r.drawType),a=eu(u),l=r.normalize!==void 0?r.normalize:Qv(u),c=Mv(r,i)}n[s]={buffer:o,numComponents:c,type:a,normalize:l,stride:r.stride||0,offset:r.offset||0,divisor:r.divisor===void 0?void 0:r.divisor,drawType:r.drawType}}}}),t.bindBuffer(Tt,null),n}function Pv(t,e,n,i){n=tu(n),i!==void 0?(t.bindBuffer(Tt,e.buffer),t.bufferSubData(Tt,i,n)):d0(t,Tt,e.buffer,n,e.drawType)}function Lv(t,e){return e===bv||e===xv?1:e===Iv||e===Bv?2:e===vv||e===Sv||e===Dv?4:0}const nu=["position","positions","a_position"];function Ov(t,e){let n,i;for(i=0;i<nu.length&&(n=nu[i],!(n in e||(n=h0.attribPrefix+n,n in e)));++i);i===nu.length&&(n=Object.keys(e)[0]);const r=e[n];if(!r.buffer)return 1;t.bindBuffer(Tt,r.buffer);const s=t.getBufferParameter(Tt,Ev);t.bindBuffer(Tt,null);const o=Lv(t,r.type),a=s/o,l=r.numComponents||r.size,c=a/l;if(c%1!==0)throw new Error(`numComponents ${l} not correct for length ${length}`);return c}function Uv(t,e,n){const i=Tv(t,e),r=Object.assign({},n||{});r.attribs=Object.assign({},n?n.attribs:{},i);const s=e.indices;if(s){const o=tu(s,"indices");r.indices=g0(t,o,Cv),r.numElements=o.length,r.elementType=eu(o)}else r.numElements||(r.numElements=Ov(t,r.attribs));return r}function Ji(t){return!!t.texStorage2D}const iu=(function(){const t={},e={};function n(i){const r=i.constructor.name;if(!t[r]){for(const s in i)if(typeof i[s]=="number"){const o=e[i[s]];e[i[s]]=o?`${o} | ${s}`:s}t[r]=!0}}return function(r,s){return n(r),e[s]||(typeof s=="number"?`0x${s.toString(16)}`:s)}})(),xn={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},qi=la,w0=(function(){let t;return function(){return t=t||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),t}})(),y0=6406,Pt=6407,ge=6408,C0=6409,E0=6410,Cs=6402,b0=34041,fa=33071,_v=9728,Gv=9729,tn=3553,nn=34067,In=32879,Bn=35866,Aa=34069,zv=34070,Hv=34071,Yv=34072,Vv=34073,Jv=34074,ru=10241,su=10240,ha=10242,da=10243,x0=32882,qv=33082,Kv=33083,jv=33084,Wv=33085,ou=3317,I0=3314,B0=32878,v0=3316,S0=3315,D0=32877,Xv=37443,Zv=37441,$v=37440,e2=33321,t2=36756,n2=33325,i2=33326,r2=33330,s2=33329,o2=33338,a2=33337,c2=33340,l2=33339,u2=33323,f2=36757,A2=33327,h2=33328,d2=33336,g2=33335,p2=33332,m2=33331,w2=33334,y2=33333,C2=32849,E2=35905,b2=36194,x2=36758,I2=35898,B2=35901,v2=34843,S2=34837,D2=36221,Q2=36239,k2=36215,F2=36233,R2=36209,N2=36227,M2=32856,T2=35907,P2=36759,L2=32855,O2=32854,U2=32857,_2=34842,G2=34836,z2=36220,H2=36238,Y2=36975,V2=36214,J2=36232,q2=36226,K2=36208,j2=33189,W2=33190,X2=36012,Z2=36013,$2=35056,vn=5120,pe=5121,ga=5122,Ki=5123,pa=5124,ii=5125,Je=5126,Q0=32819,k0=32820,F0=33635,It=5131,Es=36193,au=33640,eS=35899,tS=35902,nS=36269,iS=34042,ma=33319,ji=33320,wa=6403,Wi=36244,Xi=36248,ri=36249;let cu;function ya(t){if(!cu){const e={};e[y0]={textureFormat:y0,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[pe,It,Es,Je]},e[C0]={textureFormat:C0,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[pe,It,Es,Je]},e[E0]={textureFormat:E0,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[pe,It,Es,Je]},e[Pt]={textureFormat:Pt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[pe,It,Es,Je,F0]},e[ge]={textureFormat:ge,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[pe,It,Es,Je,Q0,k0]},e[Cs]={textureFormat:Cs,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[ii,Ki]},e[e2]={textureFormat:wa,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[pe]},e[t2]={textureFormat:wa,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[vn]},e[n2]={textureFormat:wa,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[Je,It]},e[i2]={textureFormat:wa,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[Je]},e[r2]={textureFormat:Wi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[pe]},e[s2]={textureFormat:Wi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[vn]},e[p2]={textureFormat:Wi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Ki]},e[m2]={textureFormat:Wi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[ga]},e[w2]={textureFormat:Wi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ii]},e[y2]={textureFormat:Wi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[pa]},e[u2]={textureFormat:ma,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[pe]},e[f2]={textureFormat:ma,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[vn]},e[A2]={textureFormat:ma,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[Je,It]},e[h2]={textureFormat:ma,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[Je]},e[d2]={textureFormat:ji,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[pe]},e[g2]={textureFormat:ji,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[vn]},e[o2]={textureFormat:ji,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ki]},e[a2]={textureFormat:ji,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ga]},e[c2]={textureFormat:ji,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[ii]},e[l2]={textureFormat:ji,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[pa]},e[C2]={textureFormat:Pt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[pe]},e[E2]={textureFormat:Pt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[pe]},e[b2]={textureFormat:Pt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[pe,F0]},e[x2]={textureFormat:Pt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[vn]},e[I2]={textureFormat:Pt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Je,It,eS]},e[B2]={textureFormat:Pt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Je,It,tS]},e[v2]={textureFormat:Pt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[Je,It]},e[S2]={textureFormat:Pt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Je]},e[D2]={textureFormat:Xi,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[pe]},e[Q2]={textureFormat:Xi,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[vn]},e[k2]={textureFormat:Xi,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Ki]},e[F2]={textureFormat:Xi,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[ga]},e[R2]={textureFormat:Xi,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[ii]},e[N2]={textureFormat:Xi,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[pa]},e[M2]={textureFormat:ge,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[pe]},e[T2]={textureFormat:ge,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[pe]},e[P2]={textureFormat:ge,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[vn]},e[L2]={textureFormat:ge,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[pe,k0,au]},e[O2]={textureFormat:ge,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[pe,Q0]},e[U2]={textureFormat:ge,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[au]},e[_2]={textureFormat:ge,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[Je,It]},e[G2]={textureFormat:ge,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[Je]},e[z2]={textureFormat:ri,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[pe]},e[H2]={textureFormat:ri,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[vn]},e[Y2]={textureFormat:ri,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[au]},e[V2]={textureFormat:ri,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Ki]},e[J2]={textureFormat:ri,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[ga]},e[q2]={textureFormat:ri,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[pa]},e[K2]={textureFormat:ri,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[ii]},e[j2]={textureFormat:Cs,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Ki,ii]},e[W2]={textureFormat:Cs,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ii]},e[X2]={textureFormat:Cs,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Je]},e[$2]={textureFormat:b0,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[iS]},e[Z2]={textureFormat:b0,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[nS]},Object.keys(e).forEach(function(n){const i=e[n];i.bytesPerElementMap={},i.bytesPerElement.forEach(function(r,s){const o=i.type[s];i.bytesPerElementMap[o]=r})}),cu=e}return cu[t]}function rS(t,e){const n=ya(t);if(!n)throw"unknown internal format";const i=n.bytesPerElementMap[e];if(i===void 0)throw"unknown internal format";return i}function Zi(t){const e=ya(t);if(!e)throw"unknown internal format";return{format:e.textureFormat,type:e.type[0]}}function R0(t){return(t&t-1)===0}function sS(t,e,n,i){if(!Ji(t))return R0(e)&&R0(n);const r=ya(i);if(!r)throw"unknown internal format";return r.colorRenderable&&r.textureFilterable}function oS(t){const e=ya(t);if(!e)throw"unknown internal format";return e.textureFilterable}function N0(t,e,n){return qi(e)?eu(e):n||pe}function Ca(t,e,n,i,r){if(r%1!==0)throw"can't guess dimensions";if(!n&&!i){const s=Math.sqrt(r/(e===nn?6:1));s%1===0?(n=s,i=s):(n=r,i=1)}else if(i){if(!n&&(n=r/i,n%1))throw"can't guess dimensions"}else if(i=r/n,i%1)throw"can't guess dimensions";return{width:n,height:i}}function $i(t,e){e.colorspaceConversion!==void 0&&t.pixelStorei(Xv,e.colorspaceConversion),e.premultiplyAlpha!==void 0&&t.pixelStorei(Zv,e.premultiplyAlpha),e.flipY!==void 0&&t.pixelStorei($v,e.flipY)}function M0(t){t.pixelStorei(ou,4),Ji(t)&&(t.pixelStorei(I0,0),t.pixelStorei(B0,0),t.pixelStorei(v0,0),t.pixelStorei(S0,0),t.pixelStorei(D0,0))}function aS(t,e,n,i){i.minMag&&(n.call(t,e,ru,i.minMag),n.call(t,e,su,i.minMag)),i.min&&n.call(t,e,ru,i.min),i.mag&&n.call(t,e,su,i.mag),i.wrap&&(n.call(t,e,ha,i.wrap),n.call(t,e,da,i.wrap),(e===In||yv(t,e))&&n.call(t,e,x0,i.wrap)),i.wrapR&&n.call(t,e,x0,i.wrapR),i.wrapS&&n.call(t,e,ha,i.wrapS),i.wrapT&&n.call(t,e,da,i.wrapT),i.minLod&&n.call(t,e,qv,i.minLod),i.maxLod&&n.call(t,e,Kv,i.maxLod),i.baseLevel&&n.call(t,e,jv,i.baseLevel),i.maxLevel&&n.call(t,e,Wv,i.maxLevel)}function T0(t,e,n){const i=n.target||tn;t.bindTexture(i,e),aS(t,i,t.texParameteri,n)}function cS(t){return t=t||xn.textureColor,qi(t)?t:new Uint8Array([t[0]*255,t[1]*255,t[2]*255,t[3]*255])}function lu(t,e,n,i,r,s){n=n||xn.textureOptions,s=s||ge;const o=n.target||tn;if(i=i||n.width,r=r||n.height,t.bindTexture(o,e),sS(t,i,r,s))t.generateMipmap(o);else{const a=oS(s)?Gv:_v;t.texParameteri(o,ru,a),t.texParameteri(o,su,a),t.texParameteri(o,ha,fa),t.texParameteri(o,da,fa)}}function bs(t){return t.auto===!0||t.auto===void 0&&t.level===void 0}function uu(t,e){return e=e||{},e.cubeFaceOrder||[Aa,zv,Hv,Yv,Vv,Jv]}function fu(t,e){const i=uu(t,e).map(function(r,s){return{face:r,ndx:s}});return i.sort(function(r,s){return r.face-s.face}),i}function P0(t,e,n,i){i=i||xn.textureOptions;const r=i.target||tn,s=i.level||0;let o=n.width,a=n.height;const l=i.internalFormat||i.format||ge,c=Zi(l),u=i.format||c.format,f=i.type||c.type;if($i(t,i),t.bindTexture(r,e),r===nn){const h=n.width,A=n.height;let d,g;if(h/6===A)d=A,g=[0,0,1,0,2,0,3,0,4,0,5,0];else if(A/6===h)d=h,g=[0,0,0,1,0,2,0,3,0,4,0,5];else if(h/3===A/2)d=h/3,g=[0,0,1,0,2,0,0,1,1,1,2,1];else if(h/2===A/3)d=h/2,g=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(n.src?n.src:n.nodeName);const m=w0();m?(m.canvas.width=d,m.canvas.height=d,o=d,a=d,fu(t,i).forEach(function(p){const w=g[p.ndx*2+0]*d,C=g[p.ndx*2+1]*d;m.drawImage(n,w,C,d,d,0,0,d,d),t.texImage2D(p.face,s,l,u,f,m.canvas)}),m.canvas.width=1,m.canvas.height=1):typeof createImageBitmap<"u"&&(o=d,a=d,fu(t,i).forEach(function(p){const w=g[p.ndx*2+0]*d,C=g[p.ndx*2+1]*d;t.texImage2D(p.face,s,l,d,d,0,u,f,null),createImageBitmap(n,w,C,d,d,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(y){$i(t,i),t.bindTexture(r,e),t.texImage2D(p.face,s,l,u,f,y),bs(i)&&lu(t,e,i,o,a,l)})}))}else if(r===In||r===Bn){const h=Math.min(n.width,n.height),A=Math.max(n.width,n.height),d=A/h;if(d%1!==0)throw"can not compute 3D dimensions of element";const g=n.width===A?1:0,m=n.height===A?1:0;t.pixelStorei(ou,1),t.pixelStorei(I0,n.width),t.pixelStorei(B0,0),t.pixelStorei(D0,0),t.texImage3D(r,s,l,h,h,h,0,u,f,null);for(let p=0;p<d;++p){const w=p*h*g,C=p*h*m;t.pixelStorei(v0,w),t.pixelStorei(S0,C),t.texSubImage3D(r,s,0,0,p,h,h,1,u,f,n)}M0(t)}else t.texImage2D(r,s,l,u,f,n);bs(i)&&lu(t,e,i,o,a,l),T0(t,e,i)}function xs(){}function lS(t){if(typeof document<"u"){const e=document.createElement("a");return e.href=t,e.hostname===location.hostname&&e.port===location.port&&e.protocol===location.protocol}else{const e=new URL(location.href).origin;return new URL(t,location.href).origin===e}}function uS(t,e){return e===void 0&&!lS(t)?"anonymous":e}function fS(t,e,n){n=n||xs;let i;if(e=e!==void 0?e:xn.crossOrigin,e=uS(t,e),typeof Image<"u"){i=new Image,e!==void 0&&(i.crossOrigin=e);const r=function(){i.removeEventListener("error",s),i.removeEventListener("load",o),i=null},s=function(){const l="couldn't load image: "+t;mv(l),n(l,i),r()},o=function(){n(null,i),r()};return i.addEventListener("error",s),i.addEventListener("load",o),i.src=t,i}else if(typeof ImageBitmap<"u"){let r,s;const o=function(){n(r,s)},a={};e&&(a.mode="cors"),fetch(t,a).then(function(l){if(!l.ok)throw l;return l.blob()}).then(function(l){return createImageBitmap(l,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(l){s=l,setTimeout(o)}).catch(function(l){r=l,setTimeout(o)}),i=null}return i}function L0(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof ImageData<"u"&&t instanceof ImageData||typeof HTMLElement<"u"&&t instanceof HTMLElement}function Au(t,e,n){return L0(t)?(setTimeout(function(){n(null,t)}),t):fS(t,e,n)}function hu(t,e,n){n=n||xn.textureOptions;const i=n.target||tn;if(t.bindTexture(i,e),n.color===!1)return;const r=cS(n.color);if(i===nn)for(let s=0;s<6;++s)t.texImage2D(Aa+s,0,ge,1,1,0,ge,pe,r);else i===In||i===Bn?t.texImage3D(i,0,ge,1,1,1,0,ge,pe,r):t.texImage2D(i,0,ge,1,1,0,ge,pe,r)}function AS(t,e,n,i){return i=i||xs,n=n||xn.textureOptions,hu(t,e,n),n=Object.assign({},n),Au(n.src,n.crossOrigin,function(s,o){s?i(s,e,o):(P0(t,e,o,n),i(null,e,o))})}function hS(t,e,n,i){i=i||xs;const r=n.src;if(r.length!==6)throw"there must be 6 urls for a cubemap";const s=n.level||0,o=n.internalFormat||n.format||ge,a=Zi(o),l=n.format||a.format,c=n.type||pe,u=n.target||tn;if(u!==nn)throw"target must be TEXTURE_CUBE_MAP";hu(t,e,n),n=Object.assign({},n);let f=6;const h=[],A=uu(t,n);let d;function g(m){return function(p,w){--f,p?h.push(p):w.width!==w.height?h.push("cubemap face img is not a square: "+w.src):($i(t,n),t.bindTexture(u,e),f===5?uu().forEach(function(C){t.texImage2D(C,s,o,l,c,w)}):t.texImage2D(m,s,o,l,c,w),bs(n)&&t.generateMipmap(u)),f===0&&i(h.length?h:void 0,e,d)}}d=r.map(function(m,p){return Au(m,n.crossOrigin,g(A[p]))})}function dS(t,e,n,i){i=i||xs;const r=n.src,s=n.internalFormat||n.format||ge,o=Zi(s),a=n.format||o.format,l=n.type||pe,c=n.target||Bn;if(c!==In&&c!==Bn)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";hu(t,e,n),n=Object.assign({},n);let u=r.length;const f=[];let h;const A=n.level||0;let d=n.width,g=n.height;const m=r.length;let p=!0;function w(C){return function(y,x){if(--u,y)f.push(y);else{if($i(t,n),t.bindTexture(c,e),p){p=!1,d=n.width||x.width,g=n.height||x.height,t.texImage3D(c,A,s,d,g,m,0,a,l,null);for(let I=0;I<m;++I)t.texSubImage3D(c,A,0,0,I,d,g,1,a,l,x)}else{let I=x,b;(x.width!==d||x.height!==g)&&(b=w0(),I=b.canvas,b.canvas.width=d,b.canvas.height=g,b.drawImage(x,0,0,d,g)),t.texSubImage3D(c,A,0,0,C,d,g,1,a,l,I),b&&I===b.canvas&&(b.canvas.width=0,b.canvas.height=0)}bs(n)&&t.generateMipmap(c)}u===0&&i(f.length?f:void 0,e,h)}}h=r.map(function(C,y){return Au(C,n.crossOrigin,w(y))})}function O0(t,e,n,i){i=i||xn.textureOptions;const r=i.target||tn;t.bindTexture(r,e);let s=i.width,o=i.height,a=i.depth;const l=i.level||0,c=i.internalFormat||i.format||ge,u=Zi(c),f=i.format||u.format,h=i.type||N0(t,n,u.type);if(qi(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{const m=pv(h);n=new m(n)}const A=rS(c,h),d=n.byteLength/A;if(d%1)throw"length wrong size for format: "+iu(t,f);let g;if(r===In||r===Bn)if(!s&&!o&&!a){const m=Math.cbrt(d);if(m%1!==0)throw"can't guess cube size of array of numElements: "+d;s=m,o=m,a=m}else s&&(!o||!a)?(g=Ca(t,r,o,a,d/s),o=g.width,a=g.height):o&&(!s||!a)?(g=Ca(t,r,s,a,d/o),s=g.width,a=g.height):(g=Ca(t,r,s,o,d/a),s=g.width,o=g.height);else g=Ca(t,r,s,o,d),s=g.width,o=g.height;if(M0(t),t.pixelStorei(ou,i.unpackAlignment||1),$i(t,i),r===nn){const m=A/n.BYTES_PER_ELEMENT,p=d/6*m;fu(t,i).forEach(w=>{const C=p*w.ndx,y=n.subarray(C,C+p);t.texImage2D(w.face,l,c,s,o,0,f,h,y)})}else r===In||r===Bn?t.texImage3D(r,l,c,s,o,a,0,f,h,n):t.texImage2D(r,l,c,s,o,0,f,h,n);return{width:s,height:o,depth:a,type:h}}function gS(t,e,n){const i=n.target||tn;t.bindTexture(i,e);const r=n.level||0,s=n.internalFormat||n.format||ge,o=Zi(s),a=n.format||o.format,l=n.type||o.type;if($i(t,n),i===nn)for(let c=0;c<6;++c)t.texImage2D(Aa+c,r,s,n.width,n.height,0,a,l,null);else i===In||i===Bn?t.texImage3D(i,r,s,n.width,n.height,n.depth,0,a,l,null):t.texImage2D(i,r,s,n.width,n.height,0,a,l,null)}function Is(t,e,n){n=n||xs,e=e||xn.textureOptions;const i=t.createTexture(),r=e.target||tn;let s=e.width||1,o=e.height||1;const a=e.internalFormat||ge;t.bindTexture(r,i),r===nn&&(t.texParameteri(r,ha,fa),t.texParameteri(r,da,fa));let l=e.src;if(l)if(typeof l=="function"&&(l=l(t,e)),typeof l=="string")AS(t,i,e,n);else if(qi(l)||Array.isArray(l)&&(typeof l[0]=="number"||Array.isArray(l[0])||qi(l[0]))){const c=O0(t,i,l,e);s=c.width,o=c.height}else Array.isArray(l)&&(typeof l[0]=="string"||L0(l[0]))?r===nn?hS(t,i,e,n):dS(t,i,e,n):(P0(t,i,l,e),s=l.width,o=l.height);else gS(t,i,e);return bs(e)&&lu(t,i,e,s,o,a),T0(t,i,e),i}function pS(t,e,n,i,r,s){i=i||n.width,r=r||n.height,s=s||n.depth;const o=n.target||tn;t.bindTexture(o,e);const a=n.level||0,l=n.internalFormat||n.format||ge,c=Zi(l),u=n.format||c.format;let f;const h=n.src;if(h&&(qi(h)||Array.isArray(h)&&typeof h[0]=="number")?f=n.type||N0(t,h,c.type):f=n.type||c.type,o===nn)for(let A=0;A<6;++A)t.texImage2D(Aa+A,a,l,i,r,0,u,f,null);else o===In||o===Bn?t.texImage3D(o,a,l,i,r,s,0,u,f,null):t.texImage2D(o,a,l,i,r,0,u,f,null)}const mS=u0,Ea=33984,wS=35048,ba=34962,yS=34963,du=35345,U0=35718,CS=35721,ES=35971,bS=35382,xS=35396,IS=35398,BS=35392,vS=35395,xa=5126,_0=35664,G0=35665,z0=35666,gu=5124,H0=35667,Y0=35668,V0=35669,J0=35670,q0=35671,K0=35672,j0=35673,W0=35674,X0=35675,Z0=35676,SS=35678,DS=35680,QS=35679,kS=35682,FS=35685,RS=35686,NS=35687,MS=35688,TS=35689,PS=35690,LS=36289,OS=36292,US=36293,pu=5125,$0=36294,eg=36295,tg=36296,_S=36298,GS=36299,zS=36300,HS=36303,YS=36306,VS=36307,JS=36308,qS=36311,Ia=3553,Ba=34067,mu=32879,va=35866,q={};function ng(t,e){return q[e].bindPoint}function KS(t,e){return function(n){t.uniform1f(e,n)}}function jS(t,e){return function(n){t.uniform1fv(e,n)}}function WS(t,e){return function(n){t.uniform2fv(e,n)}}function XS(t,e){return function(n){t.uniform3fv(e,n)}}function ZS(t,e){return function(n){t.uniform4fv(e,n)}}function ig(t,e){return function(n){t.uniform1i(e,n)}}function rg(t,e){return function(n){t.uniform1iv(e,n)}}function sg(t,e){return function(n){t.uniform2iv(e,n)}}function og(t,e){return function(n){t.uniform3iv(e,n)}}function ag(t,e){return function(n){t.uniform4iv(e,n)}}function $S(t,e){return function(n){t.uniform1ui(e,n)}}function eD(t,e){return function(n){t.uniform1uiv(e,n)}}function tD(t,e){return function(n){t.uniform2uiv(e,n)}}function nD(t,e){return function(n){t.uniform3uiv(e,n)}}function iD(t,e){return function(n){t.uniform4uiv(e,n)}}function rD(t,e){return function(n){t.uniformMatrix2fv(e,!1,n)}}function sD(t,e){return function(n){t.uniformMatrix3fv(e,!1,n)}}function oD(t,e){return function(n){t.uniformMatrix4fv(e,!1,n)}}function aD(t,e){return function(n){t.uniformMatrix2x3fv(e,!1,n)}}function cD(t,e){return function(n){t.uniformMatrix3x2fv(e,!1,n)}}function lD(t,e){return function(n){t.uniformMatrix2x4fv(e,!1,n)}}function uD(t,e){return function(n){t.uniformMatrix4x2fv(e,!1,n)}}function fD(t,e){return function(n){t.uniformMatrix3x4fv(e,!1,n)}}function AD(t,e){return function(n){t.uniformMatrix4x3fv(e,!1,n)}}function et(t,e,n,i){const r=ng(t,e);return Ji(t)?function(s){let o,a;ua(t,s)?(o=s,a=null):(o=s.texture,a=s.sampler),t.uniform1i(i,n),t.activeTexture(Ea+n),t.bindTexture(r,o),t.bindSampler(n,a)}:function(s){t.uniform1i(i,n),t.activeTexture(Ea+n),t.bindTexture(r,s)}}function tt(t,e,n,i,r){const s=ng(t,e),o=new Int32Array(r);for(let a=0;a<r;++a)o[a]=n+a;return Ji(t)?function(a){t.uniform1iv(i,o),a.forEach(function(l,c){t.activeTexture(Ea+o[c]);let u,f;ua(t,l)?(u=l,f=null):(u=l.texture,f=l.sampler),t.bindSampler(n,f),t.bindTexture(s,u)})}:function(a){t.uniform1iv(i,o),a.forEach(function(l,c){t.activeTexture(Ea+o[c]),t.bindTexture(s,l)})}}q[xa]={Type:Float32Array,size:4,setter:KS,arraySetter:jS},q[_0]={Type:Float32Array,size:8,setter:WS,cols:2},q[G0]={Type:Float32Array,size:12,setter:XS,cols:3},q[z0]={Type:Float32Array,size:16,setter:ZS,cols:4},q[gu]={Type:Int32Array,size:4,setter:ig,arraySetter:rg},q[H0]={Type:Int32Array,size:8,setter:sg,cols:2},q[Y0]={Type:Int32Array,size:12,setter:og,cols:3},q[V0]={Type:Int32Array,size:16,setter:ag,cols:4},q[pu]={Type:Uint32Array,size:4,setter:$S,arraySetter:eD},q[$0]={Type:Uint32Array,size:8,setter:tD,cols:2},q[eg]={Type:Uint32Array,size:12,setter:nD,cols:3},q[tg]={Type:Uint32Array,size:16,setter:iD,cols:4},q[J0]={Type:Uint32Array,size:4,setter:ig,arraySetter:rg},q[q0]={Type:Uint32Array,size:8,setter:sg,cols:2},q[K0]={Type:Uint32Array,size:12,setter:og,cols:3},q[j0]={Type:Uint32Array,size:16,setter:ag,cols:4},q[W0]={Type:Float32Array,size:32,setter:rD,rows:2,cols:2},q[X0]={Type:Float32Array,size:48,setter:sD,rows:3,cols:3},q[Z0]={Type:Float32Array,size:64,setter:oD,rows:4,cols:4},q[FS]={Type:Float32Array,size:32,setter:aD,rows:2,cols:3},q[RS]={Type:Float32Array,size:32,setter:lD,rows:2,cols:4},q[NS]={Type:Float32Array,size:48,setter:cD,rows:3,cols:2},q[MS]={Type:Float32Array,size:48,setter:fD,rows:3,cols:4},q[TS]={Type:Float32Array,size:64,setter:uD,rows:4,cols:2},q[PS]={Type:Float32Array,size:64,setter:AD,rows:4,cols:3},q[SS]={Type:null,size:0,setter:et,arraySetter:tt,bindPoint:Ia},q[DS]={Type:null,size:0,setter:et,arraySetter:tt,bindPoint:Ba},q[QS]={Type:null,size:0,setter:et,arraySetter:tt,bindPoint:mu},q[kS]={Type:null,size:0,setter:et,arraySetter:tt,bindPoint:Ia},q[LS]={Type:null,size:0,setter:et,arraySetter:tt,bindPoint:va},q[OS]={Type:null,size:0,setter:et,arraySetter:tt,bindPoint:va},q[US]={Type:null,size:0,setter:et,arraySetter:tt,bindPoint:Ba},q[_S]={Type:null,size:0,setter:et,arraySetter:tt,bindPoint:Ia},q[GS]={Type:null,size:0,setter:et,arraySetter:tt,bindPoint:mu},q[zS]={Type:null,size:0,setter:et,arraySetter:tt,bindPoint:Ba},q[HS]={Type:null,size:0,setter:et,arraySetter:tt,bindPoint:va},q[YS]={Type:null,size:0,setter:et,arraySetter:tt,bindPoint:Ia},q[VS]={Type:null,size:0,setter:et,arraySetter:tt,bindPoint:mu},q[JS]={Type:null,size:0,setter:et,arraySetter:tt,bindPoint:Ba},q[qS]={Type:null,size:0,setter:et,arraySetter:tt,bindPoint:va};function Sa(t,e){return function(n){if(n.value)switch(t.disableVertexAttribArray(e),n.value.length){case 4:t.vertexAttrib4fv(e,n.value);break;case 3:t.vertexAttrib3fv(e,n.value);break;case 2:t.vertexAttrib2fv(e,n.value);break;case 1:t.vertexAttrib1fv(e,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else t.bindBuffer(ba,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,n.numComponents||n.size,n.type||xa,n.normalize||!1,n.stride||0,n.offset||0),n.divisor!==void 0&&t.vertexAttribDivisor(e,n.divisor)}}function Sn(t,e){return function(n){if(n.value)if(t.disableVertexAttribArray(e),n.value.length===4)t.vertexAttrib4iv(e,n.value);else throw new Error("The length of an integer constant value must be 4!");else t.bindBuffer(ba,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,n.numComponents||n.size,n.type||gu,n.stride||0,n.offset||0),n.divisor!==void 0&&t.vertexAttribDivisor(e,n.divisor)}}function Da(t,e){return function(n){if(n.value)if(t.disableVertexAttribArray(e),n.value.length===4)t.vertexAttrib4uiv(e,n.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else t.bindBuffer(ba,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,n.numComponents||n.size,n.type||pu,n.stride||0,n.offset||0),n.divisor!==void 0&&t.vertexAttribDivisor(e,n.divisor)}}function wu(t,e,n){const i=n.size,r=n.count;return function(s){t.bindBuffer(ba,s.buffer);const o=s.size||s.numComponents||i,a=o/r,l=s.type||xa,u=q[l].size*o,f=s.normalize||!1,h=s.offset||0,A=u/r;for(let d=0;d<r;++d)t.enableVertexAttribArray(e+d),t.vertexAttribPointer(e+d,a,l,f,u,h+A*d),s.divisor!==void 0&&t.vertexAttribDivisor(e+d,s.divisor)}}const Be={};Be[xa]={size:4,setter:Sa},Be[_0]={size:8,setter:Sa},Be[G0]={size:12,setter:Sa},Be[z0]={size:16,setter:Sa},Be[gu]={size:4,setter:Sn},Be[H0]={size:8,setter:Sn},Be[Y0]={size:12,setter:Sn},Be[V0]={size:16,setter:Sn},Be[pu]={size:4,setter:Da},Be[$0]={size:8,setter:Da},Be[eg]={size:12,setter:Da},Be[tg]={size:16,setter:Da},Be[J0]={size:4,setter:Sn},Be[q0]={size:8,setter:Sn},Be[K0]={size:12,setter:Sn},Be[j0]={size:16,setter:Sn},Be[W0]={size:4,setter:wu,count:2},Be[X0]={size:9,setter:wu,count:3},Be[Z0]={size:16,setter:wu,count:4};function cg(t){const e=t.name;return e.startsWith("gl_")||e.startsWith("webgl_")}const hD=/(\.|\[|]|\w+)/g,dD=t=>t>="0"&&t<="9";function lg(t,e,n,i){const r=t.split(hD).filter(a=>a!=="");let s=0,o="";for(;;){const a=r[s++];o+=a;const l=dD(a[0]),c=l?parseInt(a):a;if(l&&(o+=r[s++]),s===r.length){n[c]=e;break}else{const f=r[s++],h=f==="[",A=n[c]||(h?[]:{});n[c]=A,n=A,i[o]=i[o]||(function(d){return function(g){dg(d,g)}})(A),o+=f}}}function gD(t,e){let n=0;function i(a,l,c){const u=l.name.endsWith("[0]"),f=l.type,h=q[f];if(!h)throw new Error(`unknown type: 0x${f.toString(16)}`);let A;if(h.bindPoint){const d=n;n+=l.size,u?A=h.arraySetter(t,f,d,c,l.size):A=h.setter(t,f,d,c,l.size)}else h.arraySetter&&u?A=h.arraySetter(t,c):A=h.setter(t,c);return A.location=c,A}const r={},s={},o=t.getProgramParameter(e,U0);for(let a=0;a<o;++a){const l=t.getActiveUniform(e,a);if(cg(l))continue;let c=l.name;c.endsWith("[0]")&&(c=c.substr(0,c.length-3));const u=t.getUniformLocation(e,l.name);if(u){const f=i(e,l,u);r[c]=f,lg(c,f,s,r)}}return r}function pD(t,e){const n={},i=t.getProgramParameter(e,ES);for(let r=0;r<i;++r){const s=t.getTransformFeedbackVarying(e,r);n[s.name]={index:r,type:s.type,size:s.size}}return n}function mD(t,e){const n=t.getProgramParameter(e,U0),i=[],r=[];for(let a=0;a<n;++a){r.push(a),i.push({});const l=t.getActiveUniform(e,a);i[a].name=l.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(a){const l=a[0],c=a[1];t.getActiveUniforms(e,r,t[l]).forEach(function(u,f){i[f][c]=u})});const s={},o=t.getProgramParameter(e,bS);for(let a=0;a<o;++a){const l=t.getActiveUniformBlockName(e,a),c={index:t.getUniformBlockIndex(e,l),usedByVertexShader:t.getActiveUniformBlockParameter(e,a,xS),usedByFragmentShader:t.getActiveUniformBlockParameter(e,a,IS),size:t.getActiveUniformBlockParameter(e,a,BS),uniformIndices:t.getActiveUniformBlockParameter(e,a,vS)};c.used=c.usedByVertexShader||c.usedByFragmentShader,s[l]=c}return{blockSpecs:s,uniformData:i}}const ug=/\[\d+\]\.$/,wD=(t,e)=>((t+(e-1))/e|0)*e;function yD(t,e,n,i){if(e||n){i=i||1;const s=t.length/4;return function(o){let a=0,l=0;for(let c=0;c<s;++c){for(let u=0;u<i;++u)t[a++]=o[l++];a+=4-i}}}else return function(r){r.length?t.set(r):t[0]=r}}function CD(t,e,n,i){const r=n.blockSpecs,s=n.uniformData,o=r[i];if(!o)return mS("no uniform block object named:",i),{name:i,uniforms:{}};const a=new ArrayBuffer(o.size),l=t.createBuffer(),c=o.index;t.bindBuffer(du,l),t.uniformBlockBinding(e,o.index,c);let u=i+".";ug.test(u)&&(u=u.replace(ug,"."));const f={},h={},A={};return o.uniformIndices.forEach(function(d){const g=s[d];let m=g.name;m.startsWith(u)&&(m=m.substr(u.length));const p=m.endsWith("[0]");p&&(m=m.substr(0,m.length-3));const w=q[g.type],C=w.Type,y=p?wD(w.size,16)*g.size:w.size*g.size,x=new C(a,g.offset,y/C.BYTES_PER_ELEMENT);f[m]=x;const I=yD(x,p,w.rows,w.cols);h[m]=I,lg(m,I,A,h)}),{name:i,array:a,asFloat:new Float32Array(a),buffer:l,uniforms:f,setters:h}}function fg(t,e,n){return CD(t,e.program,e.uniformBlockSpec,n)}function Ag(t,e,n){const r=(e.uniformBlockSpec||e).blockSpecs[n.name];if(r){const s=r.index;return t.bindBufferRange(du,s,n.buffer,n.offset||0,n.array.byteLength),!0}return!1}function hg(t,e,n){Ag(t,e,n)&&t.bufferData(du,n.array,wS)}function Bs(t,e){const n=t.setters;for(const i in e){const r=n[i];if(r){const s=e[i];r(s)}}}function dg(t,e){for(const n in e){const i=t[n];typeof i=="function"?i(e[n]):dg(t[n],e[n])}}function si(t,...e){const n=t.uniformSetters||t,i=e.length;for(let r=0;r<i;++r){const s=e[r];if(Array.isArray(s)){const o=s.length;for(let a=0;a<o;++a)si(n,s[a])}else for(const o in s){const a=n[o];a&&a(s[o])}}}function ED(t,e){const n={},i=t.getProgramParameter(e,CS);for(let r=0;r<i;++r){const s=t.getActiveAttrib(e,r);if(cg(s))continue;const o=t.getAttribLocation(e,s.name),a=Be[s.type],l=a.setter(t,o,a);l.location=o,n[s.name]=l}return n}function bD(t,e){for(const n in e){const i=t[n];i&&i(e[n])}}function oi(t,e,n){n.vertexArrayObject?t.bindVertexArray(n.vertexArrayObject):(bD(e.attribSetters||e,n.attribs),n.indices&&t.bindBuffer(yS,n.indices))}function xD(t,e){const n=gD(t,e),i=ED(t,e),r={program:e,uniformSetters:n,attribSetters:i};return Ji(t)&&(r.uniformBlockSpec=mD(t,e),r.transformFeedbackInfo=pD(t,e)),r}const ID=4,gg=5123;function Qa(t,e,n,i,r,s){n=n===void 0?ID:n;const o=e.indices,a=e.elementType,l=i===void 0?e.numElements:i;r=r===void 0?0:r,a||o?s!==void 0?t.drawElementsInstanced(n,l,a===void 0?gg:e.elementType,r,s):t.drawElements(n,l,a===void 0?gg:e.elementType,r):s!==void 0?t.drawArraysInstanced(n,r,l,s):t.drawArrays(n,r,l)}const BD=36160,ai=36161,vD=3553,SD=5121,DD=6402,QD=6408,kD=33190,FD=36012,RD=35056,ND=36013,MD=32854,TD=32855,PD=36194,pg=33189,mg=6401,wg=36168,yu=34041,Cu=36064,ka=36096,yg=36128,Eu=33306,bu=33071,xu=9729,Cg=[{format:QD,type:SD,min:xu,wrap:bu},{format:yu}],Bt={};Bt[yu]=Eu,Bt[mg]=yg,Bt[wg]=yg,Bt[DD]=ka,Bt[pg]=ka,Bt[kD]=ka,Bt[FD]=ka,Bt[RD]=Eu,Bt[ND]=Eu;function LD(t,e){return Bt[t]||Bt[e]}const Dn={};Dn[MD]=!0,Dn[TD]=!0,Dn[PD]=!0,Dn[yu]=!0,Dn[pg]=!0,Dn[mg]=!0,Dn[wg]=!0;function OD(t){return Dn[t]}const UD=32;function _D(t){return t>=Cu&&t<Cu+UD}function Eg(t,e,n,i){const r=BD,s=t.createFramebuffer();t.bindFramebuffer(r,s),n=n||t.drawingBufferWidth,i=i||t.drawingBufferHeight,e=e||Cg;const o=[],a={framebuffer:s,attachments:[],width:n,height:i};return e.forEach(function(l,c){let u=l.attachment;const f=l.samples,h=l.format;let A=l.attachmentPoint||LD(h,l.internalFormat);if(A||(A=Cu+c),_D(A)&&o.push(A),!u)if(f!==void 0||OD(h))u=t.createRenderbuffer(),t.bindRenderbuffer(ai,u),f>1?t.renderbufferStorageMultisample(ai,f,h,n,i):t.renderbufferStorage(ai,h,n,i);else{const d=Object.assign({},l);d.width=n,d.height=i,d.auto===void 0&&(d.auto=!1,d.min=d.min||d.minMag||xu,d.mag=d.mag||d.minMag||xu,d.wrapS=d.wrapS||d.wrap||bu,d.wrapT=d.wrapT||d.wrap||bu),u=Is(t,d)}if(f0(t,u))t.framebufferRenderbuffer(r,A,ai,u);else if(ua(t,u))l.layer!==void 0?t.framebufferTextureLayer(r,A,u,l.level||0,l.layer):t.framebufferTexture2D(r,A,l.target||vD,u,l.level||0);else throw new Error("unknown attachment type");a.attachments.push(u)}),t.drawBuffers&&t.drawBuffers(o),a}function GD(t,e,n,i,r){i=i||t.drawingBufferWidth,r=r||t.drawingBufferHeight,e.width=i,e.height=r,n=n||Cg,n.forEach(function(s,o){const a=e.attachments[o],l=s.format,c=s.samples;if(c!==void 0||f0(t,a))t.bindRenderbuffer(ai,a),c>1?t.renderbufferStorageMultisample(ai,c,l,i,r):t.renderbufferStorage(ai,l,i,r);else if(ua(t,a))pS(t,a,s,i,r);else throw new Error("unknown attachment type")})}function zD(t,e,n){const i=t.createVertexArray();return t.bindVertexArray(i),e.length||(e=[e]),e.forEach(function(r){oi(t,r,n)}),t.bindVertexArray(null),{numElements:n.numElements,elementType:n.elementType,vertexArrayObject:i}}const HD=/^(.*?)_/;function YD(t,e){iu(t,0);const n=t.getExtension(e);if(n){const i={},r=HD.exec(e)[1],s="_"+r;for(const o in n){const a=n[o],l=typeof a=="function",c=l?r:s;let u=o;o.endsWith(c)&&(u=o.substring(0,o.length-c.length)),t[u]!==void 0?!l&&t[u]!==a&&u0(u,t[u],a,o):l?t[u]=(function(f){return function(){return f.apply(n,arguments)}})(a):(t[u]=a,i[u]=a)}i.constructor={name:n.constructor.name},iu(i,0)}return n}const bg=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function xg(t){for(let e=0;e<bg.length;++e)YD(t,bg[e])}function VD(t,e){const n=["webgl2","webgl","experimental-webgl"];let i=null;for(let r=0;r<n.length;++r)if(i=t.getContext(n[r],e),i){xg(i);break}return i}function JD(t,e){return VD(t,e)}const qD=`flat out lowp vec4 vFillColor;
flat out lowp vec4 vStrokeColor;
flat out float vHalfStrokeWidth;
flat out vec4 vCornerRadii;

#if defined(ROUNDED_CORNERS) || defined(STROKED) || defined(SHADOW)
/** Position for SDF-strokes */
out vec2 vPosInPixels;
#endif

/** Size of the rect in pixels */
flat out vec2 vHalfSizeInPixels;

/**
 * Adjusts the vertex position to ensure that the rectangle is at least \`minSpan\`
 * wide or high. Returns a value that reflects the amount of clamping and can be
 * used to adjust the opacity of the rectangle.
 *
 * pos: vertex position
 * frac: vertex position within the rectangle, [0, 1]
 * size: width or height of the rectangle
 * minSize: minimum width or height of the rectangle
 */
float clampMinSize(inout float pos, float frac, float size, float minSize) {
    if (minSize > 0.0 && size < minSize) {
        pos += (frac - 0.5) * (minSize - size);
        return size / minSize;
    }

    return 1.0;
}

void sort(inout float a, inout float b) {
    if (a > b) {
        float tmp = b;
        b = a;
        a = tmp;
    }
}

/**
 * The vertex position wrt the rectangle specified by (x, x2, y, y2).
 * [0, 0] = [x, y], [1, 1] = [x2, y2]. 
 * The x or y component may contain fractional values if the rectangle 
 * have been tessellated.
 */
vec2 getVertexPos() {
    int index = gl_VertexID % 6;
    return vec2(
        index == 0 || index == 1 || index == 3 ? 0.0 : 1.0,
        index == 0 || index == 1 || index == 2 ? 0.0 : 1.0
    );
    
}

void main(void) {
    vec2 frac = getVertexPos();

    vec2 normalizedMinSize = vec2(uMinWidth, uMinHeight) / uViewportSize;
    vec4 cornerRadii = vec4(
        uCornerRadiusTopRight,
        uCornerRadiusBottomRight,
        uCornerRadiusTopLeft,
        uCornerRadiusBottomLeft
    );

    float x = getScaled_x();
    float x2 = getScaled_x2();
    float y = getScaled_y();
    float y2 = getScaled_y2();

    sort(x, x2);
    sort(y, y2);

    // Clamp x to prevent precision artifacts when the scale is zoomed very close.
	// TODO: clamp y as well
	float clampMargin = 1.0;
    vec2 pos1 = vec2(clamp(x, 0.0 - clampMargin, 1.0 + clampMargin), y);
    vec2 pos2 = vec2(clamp(x2, 0.0 - clampMargin, 1.0 + clampMargin), y2);

    vec2 size = pos2 - pos1;

    if (size.x <= 0.0 || size.y <= 0.0) {
        // Early exit. May increase performance or not...
        gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
        return;
    }

    vec2 pos = pos1 + frac * size;

    size.y *= getSampleFacetHeight(pos);

    // Clamp to minimum size, optionally compensate with opacity
    float opaFactor = uViewOpacity * max(uMinOpacity,
        clampMinSize(pos.x, frac.x, size.x, normalizedMinSize.x) *
        clampMinSize(pos.y, frac.y, size.y, normalizedMinSize.y));

    size = max(size, normalizedMinSize);

    pos = applySampleFacet(pos);

#if defined(ROUNDED_CORNERS) || defined(STROKED) || defined(SHADOW)
    // Add an extra pixel to the stroke width to accommodate edge antialiasing
    float aaPadding = 1.0 / uDevicePixelRatio;

    // TODO: Only expand to the offset direction. Now high offsets result in
    // a large expansion in all directions.
    float shadowPadding = uShadowBlur + max(abs(uShadowOffsetX), abs(uShadowOffsetY));

    float strokeWidth = getScaled_strokeWidth();
    float strokeOpacity = getScaled_strokeOpacity() * opaFactor;

    vec2 centeredFrac = frac - 0.5;
    vec2 expand = centeredFrac * (strokeWidth + aaPadding + shadowPadding * 2.0) / uViewportSize;
    pos += expand;

    vec2 sizeInPixels = size * uViewportSize;
    vPosInPixels = (centeredFrac + expand / size) * sizeInPixels;

    vHalfSizeInPixels = sizeInPixels / 2.0;

    vCornerRadii = min(cornerRadii, min(vHalfSizeInPixels.x, vHalfSizeInPixels.y));
    vHalfStrokeWidth = strokeWidth / 2.0;
    vStrokeColor = vec4(getScaled_stroke() * strokeOpacity, strokeOpacity);
#endif

    gl_Position = unitToNdc(pos);

    float fillOpacity = getScaled_fillOpacity() * opaFactor;
    vFillColor = vec4(getScaled_fill() * fillOpacity, fillOpacity);

    setupPicking();
}
`,KD=`#if defined(ROUNDED_CORNERS) || defined(STROKED) || defined(SHADOW)
in vec2 vPosInPixels;
#endif

flat in vec2 vHalfSizeInPixels;

flat in lowp vec4 vFillColor;
flat in lowp vec4 vStrokeColor;
flat in float vHalfStrokeWidth;
flat in vec4 vCornerRadii;

out lowp vec4 fragColor;

// ----------------------------------------------------------------------------
// Shadow source: https://madebyevan.com/shaders/fast-rounded-rectangle-shadows/
// License: CC0 (http://creativecommons.org/publicdomain/zero/1.0/)

#ifdef SHADOW

// A standard gaussian function, used for weighting samples
float gaussian(float x, float sigma) {
  const float pi = 3.141592653589793;
  return exp(-(x * x) / (2.0 * sigma * sigma)) / (sqrt(2.0 * pi) * sigma);
}

// This approximates the error function, needed for the gaussian integral
vec2 erf(vec2 x) {
  vec2 s = sign(x), a = abs(x);
  x = 1.0 + (0.278393 + (0.230389 + 0.078108 * (a * a)) * a) * a;
  x *= x;
  return s - s / (x * x);
}

// Return the blurred mask along the x dimension
float roundedBoxShadowX(float x, float y, float sigma, float corner, vec2 halfSize) {
  float delta = min(halfSize.y - corner - abs(y), 0.0);
  float curved = halfSize.x - corner + sqrt(max(0.0, corner * corner - delta * delta));
  vec2 integral = 0.5 + 0.5 * erf((x + vec2(-curved, curved)) * (sqrt(0.5) / sigma));
  return integral.y - integral.x;
}

// Return the mask for the shadow of a box from lower to upper
float roundedBoxShadow(vec2 lower, vec2 upper, vec2 point, float sigma, float corner) {
  // Center everything to make the math easier
  vec2 center = (lower + upper) * 0.5;
  vec2 halfSize = (upper - lower) * 0.5;
  point -= center;

  // The signal is only non-zero in a limited range, so don't waste samples
  float low = point.y - halfSize.y;
  float high = point.y + halfSize.y;
  float start = clamp(-3.0 * sigma, low, high);
  float end = clamp(3.0 * sigma, low, high);

  // Accumulate samples (we can get away with surprisingly few samples)
  float step = (end - start) / 4.0;
  float y = start + step * 0.5;
  float value = 0.0;
  for (int i = 0; i < 4; i++) {
    value += roundedBoxShadowX(point.x, point.y - y, sigma, corner, halfSize) * gaussian(y, sigma) * step;
    y += step;
  }

  return value;
}

// ----------------------------------------------------------------------------

#endif

// Source: https://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
float sdRoundedBox(vec2 p, vec2 b, vec4 r) {
    r.xy = p.x > 0.0 ? r.xy : r.zw;
    r.x  = p.y > 0.0 ? r.x  : r.y;
    vec2 q = abs(p) - b + r.x;
    return min(max(q.x, q.y), 0.0) + length(max(q, 0.0)) - r.x;
}

// Not a true SDF. Makes the corners of strokes sharp and is faster.
float sdSharpBox(vec2 p, vec2 b) {
    vec2 q = abs(p) - b;
    return max(q.x, q.y);
}

float diagonalPattern(vec2 uv, float spacing) {
    // Using 1.5 to approximate sqrt(2.0) to reduce aliasing artifacts.
    float divisor = spacing * vHalfStrokeWidth * 2.0 * 1.5;
    return abs(mod(uv.x - uv.y, divisor) - 0.5 * divisor) / 1.5;
}

float verticalPattern(float x, float spacing) {
    float divisor = spacing * vHalfStrokeWidth * 2.0;
    return abs(mod(x, divisor)) / 2.0;
}

float circle(vec2 p, float r) {
    return length(p) - r;
}

float masonryCirclePattern(vec2 uv, float spacing, float radius) {
    float halfSpacing = 0.5 * spacing;

    float row = floor(uv.y / spacing);
    float shift = mod(row, 2.0) * halfSpacing;

    vec2 shifted = vec2(uv.x + shift, uv.y + halfSpacing);
    vec2 cell = mod(shifted + 0.5 * spacing, spacing) - halfSpacing;

    return abs(circle(cell, radius));
}

/**
 * Patterns:
 * 0  none
 * 1  diagonal (/)
 * 2  antiDiagonal (\\)
 * 3  cross (X)
 * 4  vertical (|)
 * 5  horizontal (-)
 * 6  grid (+)
 * 7  dots (.)
 * 8  rings (o)
 * 9  ringsLarge (O)
 */
float pattern() {
#ifdef STROKED
    int patternType = uHatchPattern;
    vec2 uv = vPosInPixels;
    float spacing = 4.0;

    switch (patternType) {
        case 1:
            return diagonalPattern(vec2(uv.x, -uv.y), spacing);
        case 2:
            return diagonalPattern(uv, spacing);
        case 3:
            return min(
                diagonalPattern(uv, spacing),
                diagonalPattern(vec2(uv.x, -uv.y), spacing)
            );
        case 4:
            return verticalPattern(uv.x, spacing);
        case 5:
            return verticalPattern(uv.y, spacing);
        case 6:
            return min(
                verticalPattern(uv.x, spacing),
                verticalPattern(uv.y, spacing)
            );
        case 7:
        case 8:
        case 9: {
            float spacing = vHalfStrokeWidth * 14.0;
            float radius = spacing * (
                patternType == 8 ? 0.2 :
                patternType == 9 ? 0.35 :
                0.07
            );
            return masonryCirclePattern(uv, spacing, radius);
        }
        default:
            break;
    }
#endif
    return 1.0 / 0.0; // Infinity
}

void main(void) {

#if defined(ROUNDED_CORNERS) || defined(STROKED) || defined(SHADOW)
#ifdef ROUNDED_CORNERS
    // Distance from rectangle's edge in pixels. Negative inside the rectangle.
    float d = sdRoundedBox(vPosInPixels, vHalfSizeInPixels, vCornerRadii);
#else
    float d = sdSharpBox(vPosInPixels, vHalfSizeInPixels);
#endif

    vec4 backgroundColor = vec4(0.0, 0.0, 0.0, 0.0);

#ifdef SHADOW
    float maxCornerRadius = max(vCornerRadii.x, max(vCornerRadii.y, max(vCornerRadii.z, vCornerRadii.w)));

    float shadow = 0.0;
    // Only calculate shadow for the region outside the stroke.
    if (d >= vHalfStrokeWidth - 1.0 && uShadowOpacity > 0.0) {
        shadow = roundedBoxShadow(
            -vHalfSizeInPixels - vHalfStrokeWidth,
            vHalfSizeInPixels + vHalfStrokeWidth,
            vPosInPixels - vec2(uShadowOffsetX, -uShadowOffsetY),
            max(uShadowBlur / 2.5, 0.25),
            maxCornerRadius + vHalfStrokeWidth
        ) * uShadowOpacity * uViewOpacity;
    }
    backgroundColor = vec4(uShadowColor * shadow, shadow);
#endif

    if (vHalfStrokeWidth > 0.0 && uHatchPattern > 0) {
        d = max(d, -pattern());
    }

    fragColor = distanceToColor(
        d,
        vFillColor,
        vStrokeColor,
        backgroundColor,
        vHalfStrokeWidth
    );

    if (uPickingEnabled) {
        if (d < vHalfStrokeWidth) {
            fragColor = vPickingColor;
        }
    } else if (fragColor.a == 0.0) {
        discard;
    }
#else
    // The trivial, non-decorated case
    fragColor = vFillColor;
    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
#endif
}
`,jD=`layout(std140) uniform Mark {
    /** Minimum size (width, height) of the displayed rectangle in pixels */
    uniform float uMinWidth;
    uniform float uMinHeight;

    /** Minimum opacity for the size clamping */
    uniform float uMinOpacity;

    uniform float uCornerRadiusTopRight;
    uniform float uCornerRadiusBottomRight;
    uniform float uCornerRadiusTopLeft;
    uniform float uCornerRadiusBottomLeft;

    uniform int uHatchPattern;

    uniform vec3 uShadowColor;
    uniform float uShadowOpacity;
    uniform float uShadowBlur;
    uniform float uShadowOffsetX;
    uniform float uShadowOffsetY;

#pragma markUniforms
};
`,Ig=1e4;class WD{#e=!1;constructor(e){this.size=e,this.arrays={},this.pushers=[],this.dataUpdaters=[],this.vertexCount=0}configure(){if(this.#e)throw new Error("Already configured!");this.#t(),this.#n(),this.#e=!0}addConverter(e,n){const i=this.createUpdater(e,n.numComponents||1,n.targetArrayType??Float32Array,n.arrayReference),r=n.f;this.dataUpdaters.push(n.arrayReference?s=>i(r(s)):s=>i(r(s)))}createUpdater(e,n,i=Float32Array,r=void 0){if(!Ve(this.size))throw new Error("The number of vertices must be defined!");let s,o,a=0;const l=new i(this.size*n);if(this.arrays[e]={data:l,numComponents:n},n==1){let c=0;const u=f=>{c=+f};s=()=>{l[a++]=c},o=u}else{let c=r??[0];const u=r?f=>{}:f=>{c=f};switch(n){case 1:break;case 2:s=()=>{l[a++]=c[0],l[a++]=c[1]},o=u;break;case 3:s=()=>{l[a++]=c[0],l[a++]=c[1],l[a++]=c[2]},o=u;break;case 4:s=()=>{l[a++]=c[0],l[a++]=c[1],l[a++]=c[2],l[a++]=c[3]},o=u;break;default:throw new Error("Invalid numComponents: "+n)}}return this.pushers.push(s),o}pushAll(){throw new Error("Call configure() first!")}updateFromDatum(e){throw new Error("Call configure() first!")}#t(){if(this.size>Ig){const e=this.pushers.map((i,r)=>`const p${r} = that.pushers[${r}];`).join(`
`),n=this.pushers.map((i,r)=>`  p${r}();`).join(`
`);this.pushAll=new Function("that",`${e}
return function unrolledPushAll() {
${n}
  that.vertexCount++;
};`)(this)}else this.pushAll=()=>{for(let e=0;e<this.pushers.length;e++)this.pushers[e]();this.vertexCount++}}#n(){if(this.size>Ig){const e=this.dataUpdaters.map((i,r)=>`const u${r} = that.dataUpdaters[${r}];`).join(`
`),n=this.dataUpdaters.map((i,r)=>`  u${r}(datum);`).join(`
`);this.updateFromDatum=new Function("that","datum",`${e}
return function unrolledUpdateFromDatum(datum) {
${n}
};`)(this)}else this.updateFromDatum=e=>{for(let n=0;n<this.dataUpdaters.length;n++)this.dataUpdaters[n](e)}}pushFromDatum(e){this.updateFromDatum(e),this.pushAll()}}const er=5,Iu=127;function Bu(t){const e=[];for(let d=0;d<=Iu;d++)e.push(void 0);const n=new Map;for(const d of t.chars)d.id<=Iu?e[d.id]=d:n.set(d.id,d);const i=8722;n.has(i)||n.set(i,e[45]);function r(d){return(d<=Iu?e[d]:n.get(d))||e[63]}function s(d){return r(d.charCodeAt(0))}const o=t.common.base,a=s("x"),l=s("X"),c=s("q"),u=a.height-er*2,f=l.height-er*2,h=c.height-a.height+c.yoffset-a.yoffset;function A(d,g=1){let m=0;for(let p=0;p<d.length;p++)m+=r(d.charCodeAt(p)).xadvance;return m/o*g}return{measureWidth:A,getCharByCode:r,getChar:s,xHeight:u,capHeight:f,descent:h,common:t.common}}function tr(t,e=0,n=1){return Math.max(e,Math.min(n,t))}const Bg=2**31-1,XD=-2147483648;function ZD(t,e,n,i=n){const r=new Array(t);r.fill(Bg);let s=XD,o=-1/0,a=!1;const l=new Array(t);l.fill(0);const c=e[0],f=(e[1]-e[0])/t,h=(p,w)=>{const C=(p-c)/f,y=Math.floor(C);return tr(w&&y==C?y-1:y,0,t-1)};function A(p,w,C){if(a)return;if(w>s)s=w;else{a=!0;return}const y=n(p);if(y<o){a=!0;return}o=y;const x=h(y,!1);r[x]>w&&(r[x]=w),l[x]<C&&(l[x]=C)}function d(p,w,C){if(a)return;if(w>s)s=w;else{a=!0,console.debug("Items (vertices) are not ordered properly. Disabling binned index.");return}const y=n(p),x=i(p);if(y<o){a=!0;return}else if(x<y){a=!0;return}o=y;const I=h(y,!1),b=h(x,!0);for(let S=I;S<=b;S++)r[S]>w&&(r[S]=w),l[S]<C&&(l[S]=C)}const g=(p,w,C=[0,0])=>{const y=h(p,!1),x=h(w,!0),I=r[y],b=Math.max(l[x],I);return C[0]=I,C[1]=b,C},m=()=>{if(a)return;for(let w=1;w<l.length;w++)l[w]<l[w-1]&&(l[w]=l[w-1]);let p=!0;for(let w=r.length-1;w>0;w--)p&&r[w]==Bg?(r[w]=l[w],p=!1):r[w-1]>r[w]&&(r[w-1]=r[w]);return g};return A.getIndex=m,d.getIndex=m,n==i?A:d}function Lt(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Qn(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Fa=Symbol("implicit");function vu(){var t=new jt,e=[],n=[],i=Fa;function r(s){let o=t.get(s);if(o===void 0){if(i!==Fa)return i;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return r.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new jt;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return vu(e,n).unknown(i)},Lt.apply(r,arguments),r}function nr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function vs(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function kn(){}var ci=.7,ir=1/ci,rr="\\s*([+-]?\\d+)\\s*",Ss="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$D=/^#([0-9a-f]{3,8})$/,eQ=new RegExp(`^rgb\\(${rr},${rr},${rr}\\)$`),tQ=new RegExp(`^rgb\\(${Ot},${Ot},${Ot}\\)$`),nQ=new RegExp(`^rgba\\(${rr},${rr},${rr},${Ss}\\)$`),iQ=new RegExp(`^rgba\\(${Ot},${Ot},${Ot},${Ss}\\)$`),rQ=new RegExp(`^hsl\\(${Ss},${Ot},${Ot}\\)$`),sQ=new RegExp(`^hsla\\(${Ss},${Ot},${Ot},${Ss}\\)$`),vg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nr(kn,Fn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Sg,formatHex:Sg,formatHex8:oQ,formatHsl:aQ,formatRgb:Dg,toString:Dg});function Sg(){return this.rgb().formatHex()}function oQ(){return this.rgb().formatHex8()}function aQ(){return Ng(this).formatHsl()}function Dg(){return this.rgb().formatRgb()}function Fn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=$D.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Qg(e):n===3?new Me(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ra(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ra(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=eQ.exec(t))?new Me(e[1],e[2],e[3],1):(e=tQ.exec(t))?new Me(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=nQ.exec(t))?Ra(e[1],e[2],e[3],e[4]):(e=iQ.exec(t))?Ra(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=rQ.exec(t))?Rg(e[1],e[2]/100,e[3]/100,1):(e=sQ.exec(t))?Rg(e[1],e[2]/100,e[3]/100,e[4]):vg.hasOwnProperty(t)?Qg(vg[t]):t==="transparent"?new Me(NaN,NaN,NaN,0):null}function Qg(t){return new Me(t>>16&255,t>>8&255,t&255,1)}function Ra(t,e,n,i){return i<=0&&(t=e=n=NaN),new Me(t,e,n,i)}function Su(t){return t instanceof kn||(t=Fn(t)),t?(t=t.rgb(),new Me(t.r,t.g,t.b,t.opacity)):new Me}function Na(t,e,n,i){return arguments.length===1?Su(t):new Me(t,e,n,i??1)}function Me(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}nr(Me,Na,vs(kn,{brighter(t){return t=t==null?ir:Math.pow(ir,t),new Me(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ci:Math.pow(ci,t),new Me(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Me(li(this.r),li(this.g),li(this.b),Ma(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kg,formatHex:kg,formatHex8:cQ,formatRgb:Fg,toString:Fg}));function kg(){return`#${ui(this.r)}${ui(this.g)}${ui(this.b)}`}function cQ(){return`#${ui(this.r)}${ui(this.g)}${ui(this.b)}${ui((isNaN(this.opacity)?1:this.opacity)*255)}`}function Fg(){const t=Ma(this.opacity);return`${t===1?"rgb(":"rgba("}${li(this.r)}, ${li(this.g)}, ${li(this.b)}${t===1?")":`, ${t})`}`}function Ma(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function li(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ui(t){return t=li(t),(t<16?"0":"")+t.toString(16)}function Rg(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new vt(t,e,n,i)}function Ng(t){if(t instanceof vt)return new vt(t.h,t.s,t.l,t.opacity);if(t instanceof kn||(t=Fn(t)),!t)return new vt;if(t instanceof vt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),o=NaN,a=s-r,l=(s+r)/2;return a?(e===s?o=(n-i)/a+(n<i)*6:n===s?o=(i-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new vt(o,a,l,t.opacity)}function Du(t,e,n,i){return arguments.length===1?Ng(t):new vt(t,e,n,i??1)}function vt(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}nr(vt,Du,vs(kn,{brighter(t){return t=t==null?ir:Math.pow(ir,t),new vt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ci:Math.pow(ci,t),new vt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Me(Qu(t>=240?t-240:t+120,r,i),Qu(t,r,i),Qu(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new vt(Mg(this.h),Ta(this.s),Ta(this.l),Ma(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ma(this.opacity);return`${t===1?"hsl(":"hsla("}${Mg(this.h)}, ${Ta(this.s)*100}%, ${Ta(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Mg(t){return t=(t||0)%360,t<0?t+360:t}function Ta(t){return Math.max(0,Math.min(1,t||0))}function Qu(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Tg=Math.PI/180,Pg=180/Math.PI,Pa=18,Lg=.96422,Og=1,Ug=.82521,_g=4/29,sr=6/29,Gg=3*sr*sr,lQ=sr*sr*sr;function zg(t){if(t instanceof Ut)return new Ut(t.l,t.a,t.b,t.opacity);if(t instanceof rn)return Hg(t);t instanceof Me||(t=Su(t));var e=Mu(t.r),n=Mu(t.g),i=Mu(t.b),r=Fu((.2225045*e+.7168786*n+.0606169*i)/Og),s,o;return e===n&&n===i?s=o=r:(s=Fu((.4360747*e+.3850649*n+.1430804*i)/Lg),o=Fu((.0139322*e+.0971045*n+.7141733*i)/Ug)),new Ut(116*r-16,500*(s-r),200*(r-o),t.opacity)}function ku(t,e,n,i){return arguments.length===1?zg(t):new Ut(t,e,n,i??1)}function Ut(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}nr(Ut,ku,vs(kn,{brighter(t){return new Ut(this.l+Pa*(t??1),this.a,this.b,this.opacity)},darker(t){return new Ut(this.l-Pa*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=Lg*Ru(e),t=Og*Ru(t),n=Ug*Ru(n),new Me(Nu(3.1338561*e-1.6168667*t-.4906146*n),Nu(-.9787684*e+1.9161415*t+.033454*n),Nu(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Fu(t){return t>lQ?Math.pow(t,1/3):t/Gg+_g}function Ru(t){return t>sr?t*t*t:Gg*(t-_g)}function Nu(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Mu(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function uQ(t){if(t instanceof rn)return new rn(t.h,t.c,t.l,t.opacity);if(t instanceof Ut||(t=zg(t)),t.a===0&&t.b===0)return new rn(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Pg;return new rn(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Tu(t,e,n,i){return arguments.length===1?uQ(t):new rn(t,e,n,i??1)}function rn(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function Hg(t){if(isNaN(t.h))return new Ut(t.l,0,0,t.opacity);var e=t.h*Tg;return new Ut(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}nr(rn,Tu,vs(kn,{brighter(t){return new rn(this.h,this.c,this.l+Pa*(t??1),this.opacity)},darker(t){return new rn(this.h,this.c,this.l-Pa*(t??1),this.opacity)},rgb(){return Hg(this).rgb()}}));var Yg=-.14861,Pu=1.78277,Lu=-.29227,La=-.90649,Ds=1.97294,Vg=Ds*La,Jg=Ds*Pu,qg=Pu*Lu-La*Yg;function fQ(t){if(t instanceof fi)return new fi(t.h,t.s,t.l,t.opacity);t instanceof Me||(t=Su(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(qg*i+Vg*e-Jg*n)/(qg+Vg-Jg),s=i-r,o=(Ds*(n-r)-Lu*s)/La,a=Math.sqrt(o*o+s*s)/(Ds*r*(1-r)),l=a?Math.atan2(o,s)*Pg-120:NaN;return new fi(l<0?l+360:l,a,r,t.opacity)}function Ou(t,e,n,i){return arguments.length===1?fQ(t):new fi(t,e,n,i??1)}function fi(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}nr(fi,Ou,vs(kn,{brighter(t){return t=t==null?ir:Math.pow(ir,t),new fi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ci:Math.pow(ci,t),new fi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Tg,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new Me(255*(e+n*(Yg*i+Pu*r)),255*(e+n*(Lu*i+La*r)),255*(e+n*(Ds*i)),this.opacity)}}));function Kg(t,e,n,i,r){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*i+o*r)/6}function jg(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],s=t[i+1],o=i>0?t[i-1]:2*r-s,a=i<e-1?t[i+2]:2*s-r;return Kg((n-i/e)*e,o,r,s,a)}}function Wg(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],s=t[i%e],o=t[(i+1)%e],a=t[(i+2)%e];return Kg((n-i/e)*e,r,s,o,a)}}const Oa=t=>()=>t;function Xg(t,e){return function(n){return t+n*e}}function AQ(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Ua(t,e){var n=e-t;return n?Xg(t,n>180||n<-180?n-360*Math.round(n/360):n):Oa(isNaN(t)?e:t)}function hQ(t){return(t=+t)==1?Te:function(e,n){return n-e?AQ(e,n,t):Oa(isNaN(e)?n:e)}}function Te(t,e){var n=e-t;return n?Xg(t,n):Oa(isNaN(t)?e:t)}const Uu=(function t(e){var n=hQ(e);function i(r,s){var o=n((r=Na(r)).r,(s=Na(s)).r),a=n(r.g,s.g),l=n(r.b,s.b),c=Te(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=t,i})(1);function Zg(t){return function(e){var n=e.length,i=new Array(n),r=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Na(e[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=t(i),r=t(r),s=t(s),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=s(l),a+""}}}var dQ=Zg(jg),gQ=Zg(Wg);function _u(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=t[r]*(1-s)+e[r]*s;return i}}function $g(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function pQ(t,e){return($g(e)?_u:ep)(t,e)}function ep(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),s=new Array(n),o;for(o=0;o<i;++o)r[o]=Rn(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<i;++o)s[o]=r[o](a);return s}}function tp(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function St(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function np(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Rn(t[r],e[r]):i[r]=e[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var Gu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zu=new RegExp(Gu.source,"g");function mQ(t){return function(){return t}}function wQ(t){return function(e){return t(e)+""}}function ip(t,e){var n=Gu.lastIndex=zu.lastIndex=0,i,r,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(i=Gu.exec(t))&&(r=zu.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:St(i,r)})),n=zu.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?wQ(l[0].x):mQ(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function Rn(t,e){var n=typeof e,i;return e==null||n==="boolean"?Oa(e):(n==="number"?St:n==="string"?(i=Fn(e))?(e=i,Uu):ip:e instanceof Fn?Uu:e instanceof Date?tp:$g(e)?_u:Array.isArray(e)?ep:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?np:St)(t,e)}function yQ(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function CQ(t,e){var n=Ua(+t,+e);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function Qs(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var rp=180/Math.PI,Hu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function sp(t,e,n,i,r,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*rp,skewX:Math.atan(l)*rp,scaleX:o,scaleY:a}}var _a;function EQ(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Hu:sp(e.a,e.b,e.c,e.d,e.e,e.f)}function bQ(t){return t==null||(_a||(_a=document.createElementNS("http://www.w3.org/2000/svg","g")),_a.setAttribute("transform",t),!(t=_a.transform.baseVal.consolidate()))?Hu:(t=t.matrix,sp(t.a,t.b,t.c,t.d,t.e,t.f))}function op(t,e,n,i){function r(c){return c.length?c.pop()+" ":""}function s(c,u,f,h,A,d){if(c!==f||u!==h){var g=A.push("translate(",null,e,null,n);d.push({i:g-4,x:St(c,f)},{i:g-2,x:St(u,h)})}else(f||h)&&A.push("translate("+f+e+h+n)}function o(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(r(f)+"rotate(",null,i)-2,x:St(c,u)})):u&&f.push(r(f)+"rotate("+u+i)}function a(c,u,f,h){c!==u?h.push({i:f.push(r(f)+"skewX(",null,i)-2,x:St(c,u)}):u&&f.push(r(f)+"skewX("+u+i)}function l(c,u,f,h,A,d){if(c!==f||u!==h){var g=A.push(r(A)+"scale(",null,",",null,")");d.push({i:g-4,x:St(c,f)},{i:g-2,x:St(u,h)})}else(f!==1||h!==1)&&A.push(r(A)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=t(c),u=t(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,h),o(c.rotate,u.rotate,f,h),a(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(A){for(var d=-1,g=h.length,m;++d<g;)f[(m=h[d]).i]=m.x(A);return f.join("")}}}var xQ=op(EQ,"px, ","px)","deg)"),IQ=op(bQ,", ",")",")"),BQ=1e-12;function ap(t){return((t=Math.exp(t))+1/t)/2}function vQ(t){return((t=Math.exp(t))-1/t)/2}function SQ(t){return((t=Math.exp(2*t))-1)/(t+1)}const DQ=(function t(e,n,i){function r(s,o){var a=s[0],l=s[1],c=s[2],u=o[0],f=o[1],h=o[2],A=u-a,d=f-l,g=A*A+d*d,m,p;if(g<BQ)p=Math.log(h/c)/e,m=function(b){return[a+b*A,l+b*d,c*Math.exp(e*b*p)]};else{var w=Math.sqrt(g),C=(h*h-c*c+i*g)/(2*c*n*w),y=(h*h-c*c-i*g)/(2*h*n*w),x=Math.log(Math.sqrt(C*C+1)-C),I=Math.log(Math.sqrt(y*y+1)-y);p=(I-x)/e,m=function(b){var S=b*p,D=ap(x),v=c/(n*w)*(D*SQ(e*S+x)-vQ(x));return[a+v*A,l+v*d,c*D/ap(e*S+x)]}}return m.duration=p*1e3*e/Math.SQRT2,m}return r.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return t(o,a,l)},r})(Math.SQRT2,2,4);function cp(t){return function(e,n){var i=t((e=Du(e)).h,(n=Du(n)).h),r=Te(e.s,n.s),s=Te(e.l,n.l),o=Te(e.opacity,n.opacity);return function(a){return e.h=i(a),e.s=r(a),e.l=s(a),e.opacity=o(a),e+""}}}const QQ=cp(Ua);var kQ=cp(Te);function FQ(t,e){var n=Te((t=ku(t)).l,(e=ku(e)).l),i=Te(t.a,e.a),r=Te(t.b,e.b),s=Te(t.opacity,e.opacity);return function(o){return t.l=n(o),t.a=i(o),t.b=r(o),t.opacity=s(o),t+""}}function lp(t){return function(e,n){var i=t((e=Tu(e)).h,(n=Tu(n)).h),r=Te(e.c,n.c),s=Te(e.l,n.l),o=Te(e.opacity,n.opacity);return function(a){return e.h=i(a),e.c=r(a),e.l=s(a),e.opacity=o(a),e+""}}}const RQ=lp(Ua);var NQ=lp(Te);function up(t){return(function e(n){n=+n;function i(r,s){var o=t((r=Ou(r)).h,(s=Ou(s)).h),a=Te(r.s,s.s),l=Te(r.l,s.l),c=Te(r.opacity,s.opacity);return function(u){return r.h=o(u),r.s=a(u),r.l=l(Math.pow(u,n)),r.opacity=c(u),r+""}}return i.gamma=e,i})(1)}const MQ=up(Ua);var TQ=up(Te);function Yu(t,e){e===void 0&&(e=t,t=Rn);for(var n=0,i=e.length-1,r=e[0],s=new Array(i<0?0:i);n<i;)s[n]=t(r,r=e[++n]);return function(o){var a=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return s[a](o-a)}}function PQ(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}const LQ=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Rn,interpolateArray:pQ,interpolateBasis:jg,interpolateBasisClosed:Wg,interpolateCubehelix:MQ,interpolateCubehelixLong:TQ,interpolateDate:tp,interpolateDiscrete:yQ,interpolateHcl:RQ,interpolateHclLong:NQ,interpolateHsl:QQ,interpolateHslLong:kQ,interpolateHue:CQ,interpolateLab:FQ,interpolateNumber:St,interpolateNumberArray:_u,interpolateObject:np,interpolateRgb:Uu,interpolateRgbBasis:dQ,interpolateRgbBasisClosed:gQ,interpolateRound:Qs,interpolateString:ip,interpolateTransformCss:xQ,interpolateTransformSvg:IQ,interpolateZoom:DQ,piecewise:Yu,quantize:PQ},Symbol.toStringTag,{value:"Module"}));function OQ(t){return function(){return t}}function Vu(t){return+t}var fp=[0,1];function ot(t){return t}function Ju(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:OQ(isNaN(e)?NaN:.5)}function UQ(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function _Q(t,e,n){var i=t[0],r=t[1],s=e[0],o=e[1];return r<i?(i=Ju(r,i),s=n(o,s)):(i=Ju(i,r),s=n(s,o)),function(a){return s(i(a))}}function GQ(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=Ju(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=wn(t,a,1,i)-1;return s[l](r[l](a))}}function ks(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ga(){var t=fp,e=fp,n=Rn,i,r,s,o=ot,a,l,c;function u(){var h=Math.min(t.length,e.length);return o!==ot&&(o=UQ(t[0],t[h-1])),a=h>2?GQ:_Q,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=a(t.map(i),e,n)))(i(o(h)))}return f.invert=function(h){return o(r((c||(c=a(e,t.map(i),St)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Vu),u()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=Qs,u()},f.clamp=function(h){return arguments.length?(o=h?!0:ot,u()):o!==ot},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,A){return i=h,r=A,u()}}function Ap(){return Ga()(ot,ot)}function hp(t,e,n,i){var r=Zn(t,e,n),s;switch(i=Oi(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(s=tI(r,o))&&(i.precision=s),sd(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=nI(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=eI(r))&&(i.precision=s-(i.type==="%")*2);break}}return ze(i)}function Ai(t){var e=t.domain;return t.ticks=function(n){var i=e();return Go(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return hp(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,s=i.length-1,o=i[r],a=i[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=r,r=s,s=c);u-- >0;){if(c=ml(o,a,n),c===l)return i[r]=o,i[s]=a,e(i);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function dp(){var t=Ap();return t.copy=function(){return ks(t,dp())},Lt.apply(t,arguments),Ai(t)}function gp(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,Vu),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return gp(t).unknown(e)},t=arguments.length?Array.from(t,Vu):[0,1],Ai(n)}function pp(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],s=t[i],o;return s<r&&(o=n,n=i,i=o,o=r,r=s,s=o),t[n]=e.floor(r),t[i]=e.ceil(s),t}function mp(t){return Math.log(t)}function wp(t){return Math.exp(t)}function zQ(t){return-Math.log(-t)}function HQ(t){return-Math.exp(-t)}function YQ(t){return isFinite(t)?+("1e"+t):t<0?0:t}function VQ(t){return t===10?YQ:t===Math.E?Math.exp:e=>Math.pow(t,e)}function JQ(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function yp(t){return(e,n)=>-t(-e,n)}function qu(t){const e=t(mp,wp),n=e.domain;let i=10,r,s;function o(){return r=JQ(i),s=VQ(i),n()[0]<0?(r=yp(r),s=yp(s),t(zQ,HQ)):t(mp,wp),e}return e.base=function(a){return arguments.length?(i=+a,o()):i},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let h=r(c),A=r(u),d,g;const m=a==null?10:+a;let p=[];if(!(i%1)&&A-h<m){if(h=Math.floor(h),A=Math.ceil(A),c>0){for(;h<=A;++h)for(d=1;d<i;++d)if(g=h<0?d/s(-h):d*s(h),!(g<c)){if(g>u)break;p.push(g)}}else for(;h<=A;++h)for(d=i-1;d>=1;--d)if(g=h>0?d/s(-h):d*s(h),!(g<c)){if(g>u)break;p.push(g)}p.length*2<m&&(p=Go(c,u,m))}else p=Go(h,A,Math.min(A-h,m)).map(s);return f?p.reverse():p},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=Oi(l)).precision==null&&(l.trim=!0),l=ze(l)),a===1/0)return l;const c=Math.max(1,i*a/e.ticks().length);return u=>{let f=u/s(Math.round(r(u)));return f*i<i-.5&&(f*=i),f<=c?l(u):""}},e.nice=()=>n(pp(n(),{floor:a=>s(Math.floor(r(a))),ceil:a=>s(Math.ceil(r(a)))})),e}function Ku(){const t=qu(Ga()).domain([1,10]);return t.copy=()=>ks(t,Ku()).base(t.base()),Lt.apply(t,arguments),t}function Cp(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Ep(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function ju(t){var e=1,n=t(Cp(e),Ep(e));return n.constant=function(i){return arguments.length?t(Cp(e=+i),Ep(e)):e},Ai(n)}function bp(){var t=ju(Ga());return t.copy=function(){return ks(t,bp()).constant(t.constant())},Lt.apply(t,arguments)}function xp(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function qQ(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function KQ(t){return t<0?-t*t:t*t}function Wu(t){var e=t(ot,ot),n=1;function i(){return n===1?t(ot,ot):n===.5?t(qQ,KQ):t(xp(n),xp(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},Ai(e)}function Xu(){var t=Wu(Ga());return t.copy=function(){return ks(t,Xu()).exponent(t.exponent())},Lt.apply(t,arguments),t}function jQ(){return Xu.apply(null,arguments).exponent(.5)}function Ip(){var t=[],e=[],n=[],i;function r(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=$h(t,o/a);return s}function s(o){return o==null||isNaN(o=+o)?i:e[wn(n,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Wn),r()},s.range=function(o){return arguments.length?(e=Array.from(o),r()):e.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return Ip().domain(t).range(e).unknown(i)},Lt.apply(s,arguments)}function Bp(){var t=0,e=1,n=1,i=[.5],r=[0,1],s;function o(l){return l!=null&&l<=l?r[wn(i,l,0,n)]:s}function a(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,a()):r.slice()},o.invertExtent=function(l){var c=r.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,i[0]]:c>=n?[i[n-1],e]:[i[c-1],i[c]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return i.slice()},o.copy=function(){return Bp().domain([t,e]).range(r).unknown(s)},Lt.apply(Ai(o),arguments)}function vp(){var t=[.5],e=[0,1],n,i=1;function r(s){return s!=null&&s<=s?e[wn(t,s,0,i)]:n}return r.domain=function(s){return arguments.length?(t=Array.from(s),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(s){return arguments.length?(e=Array.from(s),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return vp().domain(t).range(e).unknown(n)},Lt.apply(r,arguments)}function WQ(t){return new Date(t)}function XQ(t){return t instanceof Date?+t:+new Date(+t)}function Zu(t,e,n,i,r,s,o,a,l,c){var u=Ap(),f=u.invert,h=u.domain,A=c(".%L"),d=c(":%S"),g=c("%I:%M"),m=c("%I %p"),p=c("%a %d"),w=c("%b %d"),C=c("%B"),y=c("%Y");function x(I){return(l(I)<I?A:a(I)<I?d:o(I)<I?g:s(I)<I?m:i(I)<I?r(I)<I?p:w:n(I)<I?C:y)(I)}return u.invert=function(I){return new Date(f(I))},u.domain=function(I){return arguments.length?h(Array.from(I,XQ)):h().map(WQ)},u.ticks=function(I){var b=h();return t(b[0],b[b.length-1],I??10)},u.tickFormat=function(I,b){return b==null?x:c(b)},u.nice=function(I){var b=h();return(!I||typeof I.range!="function")&&(I=e(b[0],b[b.length-1],I??10)),I?h(pp(b,I)):u},u.copy=function(){return ks(u,Zu(t,e,n,i,r,s,o,a,l,c))},u}function ZQ(){return Lt.apply(Zu(hI,dI,Ft,rs,ns,yn,qo,Vo,$t,Dl).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function $Q(){return Lt.apply(Zu(fI,AI,Rt,ss,is,$n,Ko,Jo,$t,Ql).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function za(){var t=0,e=1,n,i,r,s,o=ot,a=!1,l;function c(f){return f==null||isNaN(f=+f)?l:o(r===0?.5:(f=(s(f)-n)*r,a?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([t,e]=f,n=s(t=+t),i=s(e=+e),r=n===i?0:1/(i-n),c):[t,e]},c.clamp=function(f){return arguments.length?(a=!!f,c):a},c.interpolator=function(f){return arguments.length?(o=f,c):o};function u(f){return function(h){var A,d;return arguments.length?([A,d]=h,o=f(A,d),c):[o(0),o(1)]}}return c.range=u(Rn),c.rangeRound=u(Qs),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return s=f,n=f(t),i=f(e),r=n===i?0:1/(i-n),c}}function Nn(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function $u(){var t=Ai(za()(ot));return t.copy=function(){return Nn(t,$u())},Qn.apply(t,arguments)}function Sp(){var t=qu(za()).domain([1,10]);return t.copy=function(){return Nn(t,Sp()).base(t.base())},Qn.apply(t,arguments)}function Dp(){var t=ju(za());return t.copy=function(){return Nn(t,Dp()).constant(t.constant())},Qn.apply(t,arguments)}function ef(){var t=Wu(za());return t.copy=function(){return Nn(t,ef()).exponent(t.exponent())},Qn.apply(t,arguments)}function e3(){return ef.apply(null,arguments).exponent(.5)}function Ha(){var t=0,e=.5,n=1,i=1,r,s,o,a,l,c=ot,u,f=!1,h;function A(g){return isNaN(g=+g)?h:(g=.5+((g=+u(g))-s)*(i*g<i*s?a:l),c(f?Math.max(0,Math.min(1,g)):g))}A.domain=function(g){return arguments.length?([t,e,n]=g,r=u(t=+t),s=u(e=+e),o=u(n=+n),a=r===s?0:.5/(s-r),l=s===o?0:.5/(o-s),i=s<r?-1:1,A):[t,e,n]},A.clamp=function(g){return arguments.length?(f=!!g,A):f},A.interpolator=function(g){return arguments.length?(c=g,A):c};function d(g){return function(m){var p,w,C;return arguments.length?([p,w,C]=m,c=Yu(g,[p,w,C]),A):[c(0),c(.5),c(1)]}}return A.range=d(Rn),A.rangeRound=d(Qs),A.unknown=function(g){return arguments.length?(h=g,A):h},function(g){return u=g,r=g(t),s=g(e),o=g(n),a=r===s?0:.5/(s-r),l=s===o?0:.5/(o-s),i=s<r?-1:1,A}}function Qp(){var t=Ai(Ha()(ot));return t.copy=function(){return Nn(t,Qp())},Qn.apply(t,arguments)}function kp(){var t=qu(Ha()).domain([.1,1,10]);return t.copy=function(){return Nn(t,kp()).base(t.base())},Qn.apply(t,arguments)}function Fp(){var t=ju(Ha());return t.copy=function(){return Nn(t,Fp()).constant(t.constant())},Qn.apply(t,arguments)}function tf(){var t=Wu(Ha());return t.copy=function(){return Nn(t,tf()).exponent(t.exponent())},Qn.apply(t,arguments)}function t3(){return tf.apply(null,arguments).exponent(.5)}function _t(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}const n3=_t("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),i3=_t("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),r3=_t("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),s3=_t("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),o3=_t("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),a3=_t("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),c3=_t("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),l3=_t("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),u3=_t("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),f3=_t("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function nf(t,e,n){const i=t-e+n*2;return t?i>0?i:1:0}const A3="identity",or="linear",Mn="log",Fs="pow",Rs="sqrt",Ya="symlog",Rp="time",Np="utc",Gt="sequential",ar="diverging",rf="quantile",Mp="quantize",Tp="threshold",Ns="ordinal",sf="point",Pp="band",of="bin-ordinal",Qe="continuous",Ms="discrete",Ts="discretizing",mt="interpolating",Lp="temporal";function h3(t){return function(e){let n=e[0],i=e[1],r;return i<n&&(r=n,n=i,i=r),[t.invert(n),t.invert(i)]}}function d3(t){return function(e){const n=t.range();let i=e[0],r=e[1],s=-1,o,a,l,c;for(r<i&&(a=i,i=r,r=a),l=0,c=n.length;l<c;++l)n[l]>=i&&n[l]<=r&&(s<0&&(s=l),o=l);if(!(s<0))return i=t.invertExtent(n[s]),r=t.invertExtent(n[o]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function af(){const t=vu().unknown(void 0),e=t.domain,n=t.range;let i=[0,1],r,s,o=!1,a=0,l=0,c=.5;delete t.unknown;function u(){const f=e().length,h=i[1]<i[0],A=i[1-h],d=nf(f,a,l);let g=i[h-0];r=(A-g)/(d||1),o&&(r=Math.floor(r)),g+=(A-g-r*(f-a))*c,s=r*(1-a),o&&(g=Math.round(g),s=Math.round(s));const m=es(f).map(p=>g+r*p);return n(h?m.reverse():m)}return t.domain=function(f){return arguments.length?(e(f),u()):e()},t.range=function(f){return arguments.length?(i=[+f[0],+f[1]],u()):i.slice()},t.rangeRound=function(f){return i=[+f[0],+f[1]],o=!0,u()},t.bandwidth=function(){return s},t.step=function(){return r},t.round=function(f){return arguments.length?(o=!!f,u()):o},t.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),a=l,u()):a},t.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),u()):a},t.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),u()):l},t.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),u()):c},t.invertRange=function(f){if(f[0]==null||f[1]==null)return;const h=i[1]<i[0],A=h?n().reverse():n(),d=A.length-1;let g=+f[0],m=+f[1],p,w,C;if(!(g!==g||m!==m)&&(m<g&&(C=g,g=m,m=C),!(m<A[0]||g>i[1-h])))return p=Math.max(0,wn(A,g)-1),w=g===m?p:wn(A,m)-1,g-A[p]>s+1e-10&&++p,h&&(C=p,p=d-w,w=d-C),p>w?void 0:e().slice(p,w+1)},t.invert=function(f){const h=t.invertRange([f,f]);return h&&h[0]},t.copy=function(){return af().domain(e()).range(i).round(o).paddingInner(a).paddingOuter(l).align(c)},u()}function Op(t){const e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return Op(e())},t}function g3(){return Op(af().paddingInner(1))}var p3=Array.prototype.map;function m3(t){return p3.call(t,Gr)}const w3=Array.prototype.slice;function Up(){let t=[],e=[];function n(i){return i==null||i!==i?void 0:e[(wn(t,i)-1)%e.length]}return n.domain=function(i){return arguments.length?(t=m3(i),n):t.slice()},n.range=function(i){return arguments.length?(e=w3.call(i),n):e.slice()},n.tickFormat=function(i,r){return hp(t[0],xt(t),i??10,r)},n.copy=function(){return Up().domain(n.domain()).range(n.range())},n}const Va=new Map,y3=Symbol("vega_scale");function C3(t){return t[y3]=!0,t}function E3(t,e,n){const i=function(){const s=e();return s.invertRange||(s.invertRange=s.invert?h3(s):s.invertExtent?d3(s):void 0),s.type=t,C3(s)};return i.metadata=Mo(rl(n)),i}function ie(t,e,n){return arguments.length>1?(Va.set(t,E3(t,e,n)),this):b3(t)?Va.get(t):void 0}ie(A3,gp),ie(or,dp,Qe),ie(Mn,Ku,[Qe,Mn]),ie(Fs,Xu,Qe),ie(Rs,jQ,Qe),ie(Ya,bp,Qe),ie(Rp,ZQ,[Qe,Lp]),ie(Np,$Q,[Qe,Lp]),ie(Gt,$u,[Qe,mt]),ie(`${Gt}-${or}`,$u,[Qe,mt]),ie(`${Gt}-${Mn}`,Sp,[Qe,mt,Mn]),ie(`${Gt}-${Fs}`,ef,[Qe,mt]),ie(`${Gt}-${Rs}`,e3,[Qe,mt]),ie(`${Gt}-${Ya}`,Dp,[Qe,mt]),ie(`${ar}-${or}`,Qp,[Qe,mt]),ie(`${ar}-${Mn}`,kp,[Qe,mt,Mn]),ie(`${ar}-${Fs}`,tf,[Qe,mt]),ie(`${ar}-${Rs}`,t3,[Qe,mt]),ie(`${ar}-${Ya}`,Fp,[Qe,mt]),ie(rf,Ip,[Ts,rf]),ie(Mp,Bp,Ts),ie(Tp,vp,Ts),ie(of,Up,[Ms,Ts]),ie(Ns,vu,Ms),ie(Pp,af,Ms),ie(sf,g3,Ms);function b3(t){return Va.has(t)}function Ps(t,e){const n=Va.get(t);return n&&n.metadata[e]}function Pe(t){return Ps(t,Qe)}function sn(t){return Ps(t,Ms)}function hi(t){return Ps(t,Ts)}function _p(t){return Ps(t,Mn)}function Ja(t){return Ps(t,mt)}function x3(t,e){const n=e[0],i=xt(e)-n;return function(r){return t(n+r*i)}}function qa(t,e,n){return Yu(Gp(e||"rgb",n),t)}function I3(t,e){const n=new Array(e),i=e+1;for(let r=0;r<e;)n[r]=t(++r/i);return n}function Gp(t,e){const n=LQ[B3(t)];return e!=null&&n&&n.gamma?n.gamma(e):n}function B3(t){return"interpolate"+t.toLowerCase().split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join("")}const v3={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},S3={accent:i3,category10:n3,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:r3,observable10:s3,paired:o3,pastel1:a3,pastel2:c3,set1:l3,set2:u3,set3:f3,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function zp(t){if(Ee(t))return t;const e=t.length/6|0,n=new Array(e);for(let i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}function Hp(t,e){for(const n in t)cf(n,e(t[n]))}const Yp={};Hp(S3,zp),Hp(v3,t=>qa(zp(t)));function cf(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(Yp[t]=e,this):Yp[t]}function lf(){const t=e=>e;return t.invert=e=>e,t.copy=lf,t.invertRange=()=>{},t.type="null",t}const uf=4294967295,D3=.6,Q3=4294967295;function k3(t){let e=t>>>0;return e^=e>>>16,e=Math.imul(e,2146121005),e^=e>>>15,e=Math.imul(e,2221713035),e^=e>>>16,e>>>0}function F3(t,e={}){const n=Array.from(t,l=>N3(l,"key")),i=n.length,r=e.maxLoadFactor??D3;if(!(r>0&&r<1))throw new Error("maxLoadFactor must be between 0 and 1.");const s=e.capacity??M3(Math.ceil(i/r));if(!Number.isSafeInteger(s)||s<1)throw new Error("capacity must be a positive power of two.");if((s&s-1)!==0)throw new Error("capacity must be a power of two.");const o=new Uint32Array(s);o.fill(uf);const a=s-1;for(const l of n){if(l===uf)throw new Error("Hash table keys must not equal the empty sentinel (0xffffffff).");let c=k3(l)&a,u=!1;for(let f=0;f<s;f+=1){const h=o[c];if(h===uf||h===l){o[c]=l,u=!0;break}c=c+1&a}if(!u)throw new Error("Hash table insertion failed. Increase capacity or lower load factor.")}return{table:o,capacity:s,size:i}}function R3(t,e){if(!Number.isSafeInteger(t)||t<1)throw new Error("capacity must be a positive integer.");if((t&t-1)!==0)throw new Error("capacity must be a power of two.");if(!Number.isSafeInteger(e)||e<1)throw new Error("maxTextureSize must be a positive integer.");const n=e*e;if(t>n)throw new Error("Selection hash table exceeds maximum texture capacity.");const i=1<<Math.floor(Math.log2(e)),r=Math.min(t,i),s=t/r;if(s>e)throw new Error("Selection hash table dimensions exceed maximum texture size.");return{width:r,height:s}}function N3(t,e){if(!Number.isSafeInteger(t)||t<0||t>Q3)throw new Error(e+" must be a non-negative u32.");return t>>>0}function M3(t){let e=Math.max(1,t);return e-=1,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}class T3{constructor(e,n,i={}){this._container=e,this._sizeSource=n??(()=>({width:void 0,height:void 0})),this._shaderCache=new Map,this.rangeTextures=new WeakMap,this.selectionTextures=new WeakMap;const r=document.createElement("canvas");e.appendChild(r);const s=JD(r,{antialias:!0,depth:!1,premultipliedAlpha:!0,...i});if(!s)throw new Error("Unable to initialize WebGL. Your browser or machine may not support it.");if(!Ji(s))throw new Error("Your web browser does not support WebGL 2.0. Chrome, Firefox, and Safari Tech Preview should work.");xg(s);const o=s.getExtension("WEBGL_provoking_vertex");o&&o.provokingVertexWEBGL(o.FIRST_VERTEX_CONVENTION_WEBGL),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),this.canvas=r,this.gl=s,this._pickingAttachmentOptions=[{format:s.RGBA,type:s.UNSIGNED_BYTE,minMag:s.LINEAR,wrap:s.CLAMP_TO_EDGE}],this._pickingBufferInfo=Eg(s,this._pickingAttachmentOptions),s.bindFramebuffer(s.FRAMEBUFFER,null),this.adjustGl()}invalidateSize(){this._logicalCanvasSize=void 0,this.adjustGl()}compileShader(e,n){const i="#version 300 es",r="precision mediump float;";Ee(n)&&(n=n.join(`

`));const s=this.gl,o=n.replaceAll(/ {2,}|^\s*\/\/.*$/gm,"");let a=this._shaderCache.get(o);if(!a){const l=[i,r,n].join(`

`);a=s.createShader(e),s.shaderSource(a,l),s.compileShader(a),this._shaderCache.set(o,a)}return a}adjustGl(){const e=this.getLogicalCanvasSize();this.canvas.style.width=`${e.width}px`,this.canvas.style.height=`${e.height}px`;const n=this.getPhysicalCanvasSize(e);this.canvas.width=n.width,this.canvas.height=n.height,GD(this.gl,this._pickingBufferInfo,this._pickingAttachmentOptions)}finalize(){this.canvas.remove()}getPhysicalCanvasSize(e){const n=window.devicePixelRatio??1;return e=e||this.getLogicalCanvasSize(),{width:e.width*n,height:e.height*n}}getLogicalCanvasSize(){if(this._logicalCanvasSize)return this._logicalCanvasSize;const e=this._sizeSource(),n=window.getComputedStyle(this._container,null),i=e.width??this._container.clientWidth-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight),r=e.height??this._container.clientHeight-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom);return this._logicalCanvasSize={width:i,height:r},this._logicalCanvasSize}createRangeTexture(e,n=!1){const i=this.rangeTextures.get(e.getScale());if(!n&&i)return;function r(o,a){return sn(a.type)?a.domain().length:a.type=="threshold"?a.domain().length+1:a.type=="quantize"||a.type=="quantile"?o??4:o}const s=e.channel;if(bn(s)){const o=e.getScale(),a=o.props,l=o.range();let c;if(a.scheme)if(o.type=="threshold"&&l)c=ff(l,this.gl,o.domain().length,i);else{let u=le(a.scheme)?void 0:a.scheme.count;u=r(u,o),c=_3(a.scheme,this.gl,u,i,!!a.reverse)}else Ja(o.type)||Pe(o.type)&&l.length>1?c=G3(l,a.interpolate,this.gl,i):c=ff(l,this.gl,o.domain().length,i);this.rangeTextures.set(o,c)}else{const o=e.getScale();if(o.type==="ordinal"||hi(o.type)){const a=sa(s)?e0(s):c=>c,l=o.range();this.rangeTextures.set(o,z3(l.map(a),this.gl,o.domain().length,i))}}}createSelectionTexture(e,n=!0){if(!Vl(e))throw new Error("Not a multi-point selection, cannot create texture");const{table:i,capacity:r}=F3(e.data.keys()),{width:s,height:o}=R3(r,this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE)),a=this.selectionTextures.get(e),l=this.gl,c=Ls(this.gl,{level:0,minMag:l.NEAREST,format:l.RED_INTEGER,internalFormat:l.R32UI,width:s,height:o},i,n?a:!1);this.selectionTextures.set(e,c)}}function P3(t,e="",n=0){const i=/ERROR:\s*\d+:(\d+)/gi,r=[...e.matchAll(i)],s=new Map(r.map((o,a)=>{const l=parseInt(o[1]),c=r[a+1],u=c?c.index:e.length,f=e.substring(o.index,u);return[l-1,f]}));return t.split(`
`).map((o,a)=>{const l=s.get(a);return`${a+1+n}: ${o}${l?`

^^^ ${l}`:""}`}).join(`
`)}function L3(t,e,n){const i=t.createProgram();t.attachShader(i,e),t.attachShader(i,n),t.linkProgram(i);function r(){let s,o;if(!t.getProgramParameter(i,t.LINK_STATUS)){s=t.getProgramInfoLog(i);for(const l of[e,n])t.getShaderParameter(l,t.COMPILE_STATUS)||(s=t.getShaderInfoLog(l),o=P3(t.getShaderSource(l),s,0)+`
Error compiling: ${s}`,t.deleteShader(l));t.deleteProgram(i)}if(s)return{message:s,detail:o}}return{program:i,getProgramErrors:r}}function Ls(t,e,n,i){return i?O0(t,i,n,e):i=Is(t,{...e,src:n}),i}function O3(t,e,n,i){const{height:r,framebuffer:s}=e,o=new Uint8Array(4);return t.bindFramebuffer(t.FRAMEBUFFER,s),t.readPixels(n,r-i-1,1,1,t.RGBA,t.UNSIGNED_BYTE,o),t.bindFramebuffer(t.FRAMEBUFFER,null),o}function U3(t,e,n="image/png"){const{width:i,height:r}=e,s=new Uint8Array(i*r*4);t.bindFramebuffer(t.FRAMEBUFFER,e.framebuffer),t.readPixels(0,0,i,r,t.RGBA,t.UNSIGNED_BYTE,s),t.bindFramebuffer(t.FRAMEBUFFER,null);const o=document.createElement("canvas");o.width=i,o.height=r;const a=o.getContext("2d"),l=a.createImageData(i,r);for(let c=0;c<r;c++){const u=(r-1-c)*i*4,f=c*i*4;l.data.set(s.subarray(u,u+i*4),f)}return a.putImageData(l,0,0),o.toDataURL(n)}function _3(t,e,n,i,r=!1){const s=le(t)?t:t.name,o=!le(t)&&t.extent||[0,1];if(n===void 0&&!le(t)&&(n=t.count),s){const a=cf(s);if(ht(a)){const l=Vp(a,{extent:o,count:n,reverse:r});return Ls(e,{minMag:e.LINEAR,format:e.RGB,height:1,wrap:e.CLAMP_TO_EDGE},l,i)}else{if(Ee(a))return ff(r?Array.from(a).reverse():a,e,n,i);throw new Error("Unknown scheme: "+s)}}}function G3(t,e="rgb",n,i){const r=qa(t,le(e)?e:e.type,le(e)?void 0:e.gamma),s=Vp(r);return Ls(n,{minMag:n.LINEAR,format:n.RGB,height:1,wrap:n.CLAMP_TO_EDGE},s,i)}function z3(t,e,n,i){const r=Math.max(t.length,n||0),s=new Float32Array(r);for(let o=0;o<r;o++)s[o]=t[o%t.length];return Ls(e,{minMag:e.NEAREST,format:e.RED,internalFormat:e.R32F,height:1},s,i)}function ff(t,e,n,i){const r=Jp(t,n);return Ls(e,{minMag:e.NEAREST,format:e.RGB,height:1},r,i)}function Vp(t,{extent:e=[0,1],reverse:n=!1,count:i=256}={}){const r=e[0],s=na(e)-r,o=es(i).map(a=>a/(i-1)).map(a=>r+a/s).map(t);return n&&o.reverse(),Jp(o)}function Jp(t,e){const n=Math.max(t.length,e||0),i=new Uint8Array(n*3);for(let r=0;r<n;r++){const s=t[r%t.length],o=Fn(s);if(!o)throw new Error(`Invalid color "${s}" in the scheme ${JSON.stringify(t)}!`);const a=o.rgb();i[r*3+0]=a.r,i[r*3+1]=a.g,i[r*3+2]=a.b}return i}function Af(t){const e=Fn(t).rgb();return[e.r,e.g,e.b].map(n=>n/255)}const H3="attr_",Y3="uDomain_",V3="range_",J3="accessor_",qp="scale_",q3="getScaled_",hf="uRangeTexture_",Ka="uParam_",Os="checkSelection_",Kp=3402823466e29;function K3(t){const e=t.match(/^(?:(\w+)-)?(\w+)$/);if(!e)throw new Error("Not a scale type: "+t);return{family:e[1]||"continuous",transform:e[2]}}function Us(t,e){return`${J3}${t}_${e}`}function j3(t,e,n){let i;if(sa(t))i=di(e0(t)(n));else if(le(n))if(bn(t))i=ek(n);else throw new Error(`String values are not supported on the "${t}" channel: ${n}`);else if(zr(n))i=di(n?1:0);else if(n===null)if(bn(t))i=di([0,0,0]);else throw new Error(`null value is not supported on the "${t}" chanel.`);else i=di(n);const r=Us(t,e),s=`
${i.type} ${r}() {
    // Constant value
    return ${i};
}`;return{channel:t,accessorGlsl:s,accessorFunctionName:r}}function W3(t,e){let n="float",i=l=>l;bn(t)&&(n="vec3",i=l=>Af(l));const r=`u${sk(t)}_${e}`,s=`    // Dynamic value
    uniform ${n} ${r};`,o=Us(t,e);let a=`
${n} ${o}() {
    // Dynamic value
    return ${r};
}`;return{channel:t,uniformName:r,uniformGlsl:s,accessorGlsl:a,accessorFunctionName:o,adjuster:i}}function jp(t,e,n,i=[t]){const{attributeType:r}=cr(e,t),s=lr(i),o=`in highp ${r} ${s};`,a=Us(t,n),l=`
${r} ${a}() {
    return ${s};
}`;return{channel:t,attributeName:s,attributeGlsl:o,accessorGlsl:l,accessorFunctionName:a}}function X3(t,e,n){const{attributeType:i}=cr(e,t),r=lr(t),s=`    uniform highp ${i} ${r};`,o=Us(t,n),a=`
${i} ${o}() {
    return ${r};
}`;return{channel:t,uniformName:r,uniformGlsl:s,accessorGlsl:a,accessorFunctionName:o}}function Z3(t,e,n){e??=lf();const i=En(t),r=Y3+i,s=V3+i,{hp:o,attributeType:a}=cr(e,t),l=e.domain?e.domain().length:void 0;let c;const u=[];u.push(""),u.push("/".repeat(70)),u.push(`// Channel: ${t}`),u.push("");const{transform:f}=K3(e.type),h=(b,...S)=>tk.apply(null,[b,"value",...S]);let A;switch(f){case"linear":A=h("scaleLinear","domain",s);break;case"log":A=h("scaleLog","domain",s,e.base());break;case"symlog":A=h("scaleSymlog","domain",s,e.constant());break;case"pow":case"sqrt":A=h("scalePow","domain",s,e.exponent());break;case"index":case"locus":A=h("scaleBandHp","domain",s,e.paddingInner(),e.paddingOuter(),e.align(),n.band??.5);break;case"point":case"band":A=h("scaleBand","domain",s,e.paddingInner(),e.paddingOuter(),e.align(),n.band??.5);break;case"ordinal":case"null":case"identity":A=h("scaleIdentity");break;case"threshold":break;default:throw new Error(`Unsupported scale type: ${e.type}! ${t}: ${JSON.stringify(n)}`)}const d=im(e,t);let g;if(d&&t==i){const b=e.props.range??[];if(be(b)||b.some(be)){if(d.length<1||d.length>4)throw new Error(`A range with ExprRefs must have 1-4 elements, not ${d.length}! Range: ${JSON.stringify(d)}`);g=`    uniform ${Xp(d.length)} ${s};`}else if(d.length&&d.every(Ve)){const S=$p(d);u.push(`const ${S.type} ${s} = ${S};`)}}const m=Zp(t);let p;if(bn(t)){const b=hf+i;if(t==i&&u.push(`uniform sampler2D ${b};`),Pe(e.type))p=`getInterpolatedColor(${b}, transformed)`;else if(sn(e.type)||hi(e.type))p=`getDiscreteColor(${b}, int(transformed))`;else throw new Error("Problem with color scale!")}else if(e.type==="ordinal"||hi(e.type)){const b=hf+i;t==i&&u.push(`uniform sampler2D ${b};`),p=`getDiscreteColor(${b}, int(transformed)).r`}const w=[],C=Pe(e.type)&&l>2,y=hi(e.type)||C;if(w.push("int slot = 0;"),y){const b=r;w.push(C?`while (slot < ${b}.length() - 2 && value >= ${b}[slot + 1]) { slot++; }`:`while (slot < ${b}.length() && value >= ${b}[slot]) { slot++; }`)}const x=Pe(e.type)||hi(e.type)||["band","point"].includes(e.type);if(A){const b=r;x&&(o?w.push(`vec3 domain = ${b};`):w.push(`vec2 domain = vec2(${b}[slot], ${b}[slot + 1]);`)),w.push(`float transformed = ${A};`),C&&w.push(`transformed = (float(slot) + transformed) / (float(${b}.length() - 1));`)}else w.push("float transformed = float(slot);");"clamp"in e&&e.clamp()&&w.push(`transformed = clampToRange(transformed, ${$p(d)});`),w.push(`return ${p??"transformed"};`),u.push(`
${m} ${qp}${t}(${a} value) {
${w.map(b=>`    ${b}
`).join("")}
}`);const I=u.join(`
`);if(x&&t==i){const b=Pe(e.type)||hi(e.type)?l:2;c=o?`    highp vec3 ${r};`:`    mediump float ${r}[${b}];`}return{glsl:I,domainUniformName:r,domainUniform:c,rangeUniformName:s,rangeUniform:g}}function $3(t,e){const n=Zp(t),i=[],r=[];for(let s=0;s<e.length;s++){const o=e[s],a=Us(t,s),{param:l,empty:c}=o.predicate;i.push(l?`${Os}${l}(${!!c})`:null),r.push(o.scaleChannel?`return ${qp}${t}(${a}());`:`return ${a}();`)}return`${n} ${q3}${t}() {
${ok(i,r)}
}

#define ${t}_DEFINED`}function Wp(t){if(!Ve(t))throw new Error(`Not a number: ${t}`);if(t==1/0)return""+Kp;if(t==-1/0)return""+-Kp;{let e=`${t}`;return/^(-)?\d+$/.test(e)&&(e+=".0"),e}}function di(t){typeof t=="number"&&(t=[t]);const e=t.length;if(e<1||e>4)throw new Error("Invalid number of components: "+e);const n=Xp(e),i=`${n}(${t.map(Wp).join(", ")})`;return Object.assign(i,{type:n,numComponents:e})}function Xp(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error("Invalid number of components: "+t)}}function Zp(t){return bn(t)?"vec3":t=="uniqueId"?"uint":"float"}function ek(t){return di(Af(t))}function $p(t){return di([t[0],na(t)])}function tk(t,...e){const n=[];for(const i of e)Ve(i)?n.push(Wp(i)):Ee(i)?n.push(di(i)):n.push(i);return`${t}(${n.join(", ")})`}function cr(t,e){const n=t&&sn(t.type),i=t&&em(t.type),r=i&&nk(t.domain()),s=r?{attributeType:"uvec2",arrayConstructor:Uint32Array}:i?{attributeType:"uint",arrayConstructor:Uint32Array}:n?{attributeType:"uint",arrayConstructor:Uint16Array}:e=="uniqueId"?{attributeType:"uint",arrayConstructor:Uint32Array}:{attributeType:"float",arrayConstructor:Float32Array};return Object.assign(s,{numComponents:+(s.attributeType.match(/^vec([234])$/)?.[1]??1),discrete:n,hp:i,largeHp:r})}function em(t){return t=="index"||t=="locus"}function nk(t){return t[1]>2**32}const df=2**12;function tm(t,e=[]){const n=t%df,i=(t-n)/df;return e[0]=i,e[1]=n,e}function ik(t){const e=t%df;return[t-e,e]}function rk(t){return[...ik(t[0]),t[1]-t[0]]}function nm(t){const e=new jt([],JSON.stringify);for(const[n,i]of Object.entries(t)){const r=i.channelDef;if(en(r)){const o=[r.field,i.scale?(Pe(i.scale.type)||hi(i.scale.type))??!1:!1];e.set(o,[...e.get(o)??[],n])}}return e}function lr(t){return H3+Ne(t).toSorted().join("_")}function sk(t){return t[0].toUpperCase()+t.slice(1)}const im=(t,e)=>Ja(t.type)||Pe(t.type)&&bn(e)?[0,1]:t.range?t.range():void 0;function ok(t,e){if(t.length!=e.length)throw new Error("Unequal array lengths");const n=t.length;if(n==0)return"";if(n==1&&t[0]==null)return e[0];const i=[];for(let r=0;r<n;r++){const s=t[r],o=r==0?`if (${s})`:s==null&&r==n-1?"else":`else if (${s})`;i.push(`    ${o} {
        ${e[r]}
    }`)}return i.join(`
`)}function rm(){let t=0,e,n=0;const i=new Map,r=s=>(s===e||(n=i.get(s),n===void 0&&(n=t++,i.set(s,n)),e=s),n);return r.addAll=s=>{for(const o of s)r(o)},r.invert=s=>{for(const o of i.entries())if(o[1]==s)return o[0]},r.domain=()=>[...i.keys()],r}class _s{constructor({encoders:e,numVertices:n=void 0,attributes:i=[]}){this.encoders=e,this.variableEncoders=Object.fromEntries(Object.entries(e).filter(([s,o])=>i.includes(s)&&o&&!o.constant));const r=[...nm(e).entries()].filter(([s,o])=>s[1]&&o.length>1).map(([s,o])=>o);this.allocatedVertices=n,this.variableBuilder=new WD(n);for(const[s,o]of Object.entries(this.variableEncoders)){const a=o.dataAccessor;if(!a)continue;const l=r.find(C=>C.find(y=>y==s));if(l&&s!=l[0])continue;const c=a.asNumberAccessor(),u=o.scale,{largeHp:f,arrayConstructor:h,discrete:A,numComponents:d}=cr(u,s),g=[0,0];let m;if(u&&A)if("props"in u&&u.props.domainIndexer)m=u.props.domainIndexer;else if("domain"in u)m=rm(),m.addAll(u.domain());else throw new Error("Missing domain indexer for discrete scale.");const p=m?C=>m(a(C)):f?C=>tm(c(C),g):c,w=lr(l??s);this.variableBuilder.addConverter(w,{f:p,numComponents:d,arrayReference:f?g:void 0,targetArrayType:h})}this.lastOffset=0,this.rangeMap=new jt([],JSON.stringify)}registerBatch(e){const n=this.lastOffset,i=this.variableBuilder.vertexCount,r=i-n;r&&this.rangeMap.set(e,{offset:n,count:r,xIndex:this.xIndexer?.getIndex()}),this.lastOffset=i}addBatches(e){for(const[n,i]of e)this.addBatch(n,i)}addBatch(e,n,i=0,r=n.length){this.prepareXIndexer(n,i,r);for(let s=i;s<r;s++){const o=n[s];this.variableBuilder.pushFromDatum(o),this.addToXIndex(o)}this.registerBatch(e)}prepareXIndexer(e,n=0,i=n+e.length){const r=()=>{this.addToXIndex=c=>{},this.xIndexer=void 0},s=this.encoders.x?.channelDef;if(!("buildIndex"in s)||!s.buildIndex||!e.length||i-n<0){r();return}const o=c=>c&&Pe(c.scale?.type)&&c,a=o(this.variableEncoders.x),l=o(this.variableEncoders.x2);if(a&&!a.constant&&(!l||!l.constant)){const c=a.dataAccessor.asNumberAccessor(),u=l?l.dataAccessor.asNumberAccessor():c,f=[c(e[n]),u(e[i-1])];if(f[1]>f[0]){this.xIndexer=ZD(50,f,c,u);let h=this.variableBuilder.vertexCount;this.addToXIndex=A=>{let d=this.variableBuilder.vertexCount;this.xIndexer(A,h,d),h=d}}else r()}else r()}addToXIndex(e){}toArrays(){return{arrays:this.variableBuilder.arrays,vertexCount:this.variableBuilder.vertexCount,allocatedVertices:this.allocatedVertices,rangeMap:this.rangeMap}}}class ak extends _s{constructor({encoders:e,attributes:n,numItems:i}){super({encoders:e,attributes:n,numVertices:i*6}),this.variableBuilder.configure();const r=this.variableBuilder.pushAll;this.pushAllSixTimes=i>500?new Function("pushAll",`return function unrolledPushAllSixTimes() {
  pushAll(); pushAll(); pushAll(); pushAll(); pushAll(); pushAll();
};`)(r):function(){r(),r(),r(),r(),r(),r()}}addBatch(e,n,i=0,r=n.length){if(!(r<=i)){this.prepareXIndexer(n,i,r);for(let s=i;s<r;s++){const o=n[s];this.variableBuilder.updateFromDatum(o),this.pushAllSixTimes(),this.addToXIndex(o)}this.registerBatch(e)}}}class ck extends _s{constructor({encoders:e,attributes:n,tessellationThreshold:i=1/0,visibleRange:r=[-1/0,1/0],numItems:s}){super({encoders:e,attributes:n,numVertices:i==1/0?s*6:void 0}),this.visibleRange=r,this.tessellationThreshold=i||1/0,this.updateSide=this.variableBuilder.createUpdater("side",1),this.updatePos=this.variableBuilder.createUpdater("pos",1),this.variableBuilder.configure()}addBatch(e,n,i=0,r=n.length){this.prepareXIndexer(n,i,r);for(let s=i;s<r;s++){const o=n[s];this.variableBuilder.updateFromDatum(o),this.updateSide(-.5),this.updatePos(0),this.variableBuilder.pushAll();const a=1;for(let l=0;l<=a;l++)this.updatePos(l/a),this.updateSide(-.5),this.variableBuilder.pushAll(),this.updateSide(.5),this.variableBuilder.pushAll();this.variableBuilder.pushAll(),this.addToXIndex(o)}this.registerBatch(e)}}class lk extends _s{constructor({encoders:e,attributes:n,numItems:i=void 0}){super({encoders:e,attributes:n,numVertices:i}),this.variableBuilder.configure()}}class uk extends _s{constructor({encoders:e,attributes:n,numItems:i=void 0}){super({encoders:e,attributes:n,numVertices:i}),this.variableBuilder.configure()}toArrays(){const e=this.variableBuilder.arrays;for(let n of Object.values(e))n.divisor=1;return super.toArrays()}}class fk extends _s{constructor({encoders:e,attributes:n,fontMetrics:i,properties:r,numCharacters:s=void 0}){super({encoders:e,attributes:n,numVertices:s*6}),this.metadata=i,this.metrics=i,this.properties=r;const a=e.text.channelDef;this.numberFormat=!ft(a)&&"format"in a&&a.format?ze(a.format):l=>l,this.updateVertexCoord=this.variableBuilder.createUpdater("vertexCoord",2),this.updateTextureCoord=this.variableBuilder.createUpdater("textureCoord",2),this.updateWidth=this.variableBuilder.createUpdater("width",1),this.variableBuilder.configure()}addBatch(e,n,i=0,r=n.length){const s=this.properties.align||"left",o=this.properties.logoLetters??!1,a=this.metadata.common.base,l=this.metadata.common.scaleH;let c=-er;switch(this.properties.baseline){case"top":c+=this.metrics.capHeight;break;case"middle":c+=this.metrics.capHeight/2;break;case"bottom":c-=this.metrics.descent;break}const u=this.encoders.text,f=[0,0];this.updateVertexCoord(f);const h=[0,0];this.updateTextureCoord(h),this.prepareXIndexer(n,i,r);for(let A=i;A<r;A++){const d=n[A],g=this.numberFormat(u(d)),m=le(g)?g:g===null?"":""+g;if(m.length==0)continue;this.variableBuilder.updateFromDatum(d);const p=o?m.length:this.metrics.measureWidth(m);this.updateWidth(p);let w=s=="right"?-p:s=="center"?-p/2:0;if(!o){const I=this.metrics.getCharByCode(m.charCodeAt(0));w-=(I.width-I.xadvance)/a/2}let C=-.5,y=1,x=1;for(let I=0;I<m.length;I++){const b=this.metrics.getCharByCode(m.charCodeAt(I)),S=o?1:b.xadvance/a;if(b.id==32){w+=S;continue}o?(x=(b.width+er*2)/b.width,w=-x/2,y=(b.height+er*2)/b.height,C=-.5-er/b.height):(y=b.height/a,C=-(b.height+b.yoffset+c)/a,x=b.width/a);const D=b.x,v=b.y;f[0]=w,f[1]=C+y,h[0]=D/l,h[1]=v/l,this.variableBuilder.pushAll(),f[0]=w+x,f[1]=C+y,h[0]=(D+b.width)/l,h[1]=v/l,this.variableBuilder.pushAll(),f[0]=w,f[1]=C,h[0]=D/l,h[1]=(v+b.height)/l,this.variableBuilder.pushAll(),f[0]=w+x,f[1]=C+y,h[0]=(D+b.width)/l,h[1]=v/l,this.variableBuilder.pushAll(),f[0]=w,f[1]=C,h[0]=D/l,h[1]=(v+b.height)/l,this.variableBuilder.pushAll(),f[0]=w+x,f[1]=C,h[0]=(D+b.width)/l,h[1]=(v+b.height)/l,this.variableBuilder.pushAll(),w+=S}this.addToXIndex(d)}this.registerBatch(e)}}const sm=`#define PI 3.141593

uniform View {
    /** Offset in "unit" units */
    mediump vec2 uViewOffset;
    mediump vec2 uViewScale;
    /** Size of the logical viewport in pixels, i.e., the view */
    mediump vec2 uViewportSize;
    lowp float uDevicePixelRatio;
    // TODO: Views with opacity less than 1.0 should be rendered into a texture
    // that is rendered with the specified opacity.
    lowp float uViewOpacity;
    bool uPickingEnabled;
};


/**
 * Maps a coordinate on the unit scale to a normalized device coordinate.
 * (0, 0) is at the bottom left corner.
 */
vec4 unitToNdc(vec2 coord) {
    return vec4((coord * uViewScale + uViewOffset) * 2.0 - 1.0, 0.0, 1.0);
}

vec4 unitToNdc(float x, float y) {
    return unitToNdc(vec2(x, y));
}

vec4 pixelsToNdc(vec2 coord) {
    return unitToNdc(coord / uViewportSize);
}

vec4 pixelsToNdc(float x, float y) {
    return pixelsToNdc(vec2(x, y));
}

float linearstep(float edge0, float edge1, float x) {
    return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
}

const highp uint HASH_EMPTY_KEY = 0xffffffffu;

highp uint hash32(highp uint key) {
    highp uint v = key;
    v ^= v >> 16u;
    v *= 0x7feb352du;
    v ^= v >> 15u;
    v *= 0x846ca68bu;
    v ^= v >> 16u;
    return v;
}

bool isEmptyHashTexture(highp usampler2D s) {
    // Empty selections are encoded as a single empty hash slot.
    ivec2 texSize = textureSize(s, 0);
    return texSize.x == 1 && texSize.y == 1 && texelFetch(s, ivec2(0, 0), 0).r == HASH_EMPTY_KEY;
}

bool hashContainsTexture(highp usampler2D s, highp uint value) {
    ivec2 texSize = textureSize(s, 0);
    highp uint width = uint(texSize.x);
    highp uint size = width * uint(texSize.y);
    highp uint mask = size - 1u;
    highp uint index = hash32(value) & mask;

    for (highp uint probe = 0u; probe < size; probe += 1u) {
        ivec2 coord = ivec2(int(index % width), int(index / width));
        highp uint entry = texelFetch(s, coord, 0).r;
        if (entry == value) {
            return true;
        }
        if (entry == HASH_EMPTY_KEY) {
            return false;
        }
        index = (index + 1u) & mask;
    }

    return false;
}

/**
 * Calculates a gamma for antialiasing opacity based on the color.
 */
float getGammaForColor(vec3 rgb) {
    return mix(
        1.25,
        0.75,
        // RGB should be linearized but this is good enough for now
        smoothstep(0.0, 1.0, dot(rgb, vec3(0.299, 0.587, 0.114))));
}

// Fragment shader stuff ////////////////////////////////////////////////////////

// TODO: include the following only in fragment shaders

/**
 * Specialized linearstep for doing antialiasing
 */
float distanceToRatio(float d) {
	return clamp(d * uDevicePixelRatio + 0.5, 0.0, 1.0);
}

vec4 distanceToColor(float d, vec4 fill, vec4 stroke, vec4 background, float halfStrokeWidth) {
    if (halfStrokeWidth > 0.0) {
        // Distance to stroke's edge. Negative inside the stroke.
        float sd = abs(d) - halfStrokeWidth;
        return mix(
            stroke,
            d <= 0.0 ? fill : background,
            distanceToRatio(sd));
    } else {
        return mix(background, fill, distanceToRatio(-d));
    }
}
`,Ak=`uniform highp float uZero;

// Utils ------------

vec3 getDiscreteColor(sampler2D s, int index) {
    return texelFetch(s, ivec2(index % textureSize(s, 0).x, 0), 0).rgb;
}

vec3 getInterpolatedColor(sampler2D s, float unitValue) {
    return texture(s, vec2(unitValue, 0.0)).rgb;
}

float clampToRange(float value, vec2 range) {
    return clamp(value, min(range[0], range[1]), max(range[0], range[1]));
}

// Scales ------------
// Based on d3 scales: https://github.com/d3/d3-scale

float scaleIdentity(float value) {
    return value;
}

float scaleIdentity(uint value) {
    return float(value);
}

float scaleLinear(float value, vec2 domain, vec2 range) {
    float domainSpan = domain[1] - domain[0];
    float rangeSpan = range[1] - range[0];
    return (value - domain[0]) / domainSpan * rangeSpan + range[0];
}

float scaleLog(float value, vec2 domain, vec2 range, float base) {
    // y = m log(x) + b 
    // TODO: Perf optimization: precalculate log domain in js.
    // TODO: Reversed domain, etc
    return scaleLinear(log(value) / log(base), log(domain) / log(base), range);
}

float symlog(float value, float constant) {
    // WARNING: emulating log1p with log(x + 1). Small numbers are likely to
    // have significant precision problems.
    return sign(value) * log(abs(value / constant) + 1.0);
}

float scaleSymlog(float value, vec2 domain, vec2 range, float constant) {
    return scaleLinear(
        symlog(value, constant),
        vec2(symlog(domain[0], constant), symlog(domain[1], constant)),
        range
    );
}

float scalePow(float value, vec2 domain, vec2 range, float exponent) {
    // y = mx^k + b
    // TODO: Perf optimization: precalculate pow domain in js.
    // TODO: Reversed domain, etc
    return scaleLinear(
        pow(abs(value), exponent) * sign(value),
        pow(abs(domain), vec2(exponent)) * sign(domain),
        range
    );
}

// TODO: scaleThreshold
// TODO: scaleQuantile (special case of threshold scale)

// TODO: domainExtent should be uint
float scaleBand(uint value, vec2 domainExtent, vec2 range,
                float paddingInner, float paddingOuter,
                float align, float band) {

    // TODO: reverse
    float start = range[0];
    float stop = range[1];
    float rangeSpan = stop - start;

    float n = domainExtent[1] - domainExtent[0];

    // This fix departs from Vega and d3: https://github.com/vega/vega/issues/3357#issuecomment-1063253596
    paddingInner = int(n) > 1 ? paddingInner : 0.0;

    // Adapted from: https://github.com/d3/d3-scale/blob/master/src/band.js
    float step = rangeSpan / max(1.0, n - paddingInner + paddingOuter * 2.0);
    start += (rangeSpan - step * (n - paddingInner)) * align;
    float bandwidth = step * (1.0 - paddingInner);

    return start + (float(value) - domainExtent[0]) * step + bandwidth * band;
}

const int lowBits = 12;
const float lowDivisor = pow(2.0, float(lowBits));
const uint lowMask = uint(lowDivisor - 1.0);

vec2 splitUint(uint value) {
    uint valueLo = value & lowMask;
    uint valueHi = value - valueLo;
    return vec2(float(valueHi), float(valueLo));
}

/**
 * High precision variant of scaleBand for index/locus scales
 */
float scaleBandHp(uint value, vec3 domainExtent, vec2 range,
                 float paddingInner, float paddingOuter,
                 float align, float band) {

    // TODO: reverse
    float start = range[0];
    float stop = range[1];
    float rangeSpan = stop - start;

    vec2 domainStart = domainExtent.xy;
    float n = domainExtent[2];

    // The following computation is identical for every vertex. Could be done on the JS side.
    float step = rangeSpan / max(1.0, n - paddingInner + paddingOuter * 2.0);
    start += (rangeSpan - step * (n - paddingInner)) * align;
    float bandwidth = step * (1.0 - paddingInner);

    // Split into to values with each having a reduced number of significant digits
    // to mitigate the lack of precision in float32 calculations.
    vec2 splitValue = splitUint(value);

    // Using max to prevent the shader compiler from wrecking the precision.
    // Othwewise the compiler could optimize the sum of the four terms into
    // some equivalent form that does premature rounding.
    float inf = 1.0 / uZero;
    float hi = max(splitValue[0] - domainStart[0], -inf);
    float lo = max(splitValue[1] - domainStart[1], -inf);

    return dot(vec4(start, hi, lo, bandwidth), vec4(1.0, step, step, band));
}

/**
 * High precision variant of scaleBand for index/locus scales for large
 * domains where 32bit uints are not sufficient to represent the domain.
 */
float scaleBandHp(uvec2 value, vec3 domainExtent, vec2 range,
                 float paddingInner, float paddingOuter,
                 float align, float band) {

    // TODO: reverse
    float start = range[0];
    float stop = range[1];
    float rangeSpan = stop - start;

    vec2 domainStart = domainExtent.xy;
    float n = domainExtent[2];

    // The following computation is identical for every vertex. Could be done on the JS side.
    float step = rangeSpan / max(1.0, n - paddingInner + paddingOuter * 2.0);
    start += (rangeSpan - step * (n - paddingInner)) * align;
    float bandwidth = step * (1.0 - paddingInner);

    // Split into to values with each having a reduced number of significant digits
    // to mitigate the lack of precision in float32 calculations.
    vec2 splitValue = vec2(float(value[0]) * lowDivisor, float(value[1]));

    // Using max to prevent the shader compiler from wrecking the precision.
    // Othwewise the compiler could optimize the sum of the four terms into
    // some equivalent form that does premature rounding.
    float inf = 1.0 / uZero;
    float hi = max(splitValue[0] - domainStart[0], -inf);
    float lo = max(splitValue[1] - domainStart[1], -inf);

    return dot(vec4(start, hi, lo, bandwidth), vec4(1.0, step, step, band));
}
`,hk=`
/**
 * Describes where a sample facet should be shown. Interpolating between the
 * current and target positions/heights allows for transitioning between facet
 * configurations.
 */
struct SampleFacetPosition {
    float pos;
    float height;
    float targetPos;
    float targetHeight;
};

/**
 * Trasition fraction [0, 1] between the current and target configurations.
 */
uniform float uTransitionOffset;


// ----------------------------------------------------------------------------

#if !defined(SAMPLE_FACET_UNIFORM) && !defined(SAMPLE_FACET_TEXTURE)

SampleFacetPosition getSampleFacetPos() {
    return SampleFacetPosition(0.0, 1.0, 0.0, 1.0);
}

#elif defined(SAMPLE_FACET_UNIFORM)

/**
 * Location and height of the band on the Y axis on a normalized [0, 1] scale.
 * Elements: curr pos, curr height, target pos, target height
 */
uniform vec4 uSampleFacet;

SampleFacetPosition getSampleFacetPos() {
    return SampleFacetPosition(
        1.0 - uSampleFacet.x - uSampleFacet.y,
        uSampleFacet.y,
        1.0 - uSampleFacet.z - uSampleFacet.w,
        uSampleFacet.w
    );
}

#elif defined(SAMPLE_FACET_TEXTURE)

uniform sampler2D uSampleFacetTexture;

SampleFacetPosition getSampleFacetPos() {
    vec4 texel = texelFetch(uSampleFacetTexture, ivec2(int(attr_facetIndex), 0), 0);
    return SampleFacetPosition(
        1.0 - texel.r - texel.g,
        texel.g,
        1.0 - texel.r - texel.g,
        texel.g);
}

#endif

// ----------------------------------------------------------------------------

bool isFacetedSamples(SampleFacetPosition facetPos) {
    return facetPos != SampleFacetPosition(0.0, 1.0, 0.0, 1.0);
}

bool isFacetedSamples() {
    return isFacetedSamples(getSampleFacetPos());
}

bool isInTransit() {
    return uTransitionOffset > 0.0;
}

float getTransitionFraction(float xPos) {
    return smoothstep(0.0, 0.7 + uTransitionOffset, (xPos - uTransitionOffset) * 2.0);
}

vec2 applySampleFacet(vec2 pos) {
    SampleFacetPosition facetPos = getSampleFacetPos();

    if (!isFacetedSamples(facetPos)) {
        return pos;
    } else if (isInTransit()) {
        vec2 interpolated = mix(
            vec2(facetPos.pos, facetPos.height),
            vec2(facetPos.targetPos, facetPos.targetHeight),
            getTransitionFraction(pos.x));
        return vec2(pos.x, interpolated[0] + pos.y * interpolated[1]);
    } else {
        return vec2(pos.x, facetPos.pos + pos.y * facetPos.height);
    }
}

float getSampleFacetHeight(vec2 pos) {
    SampleFacetPosition facetPos = getSampleFacetPos();

    if (!isFacetedSamples(facetPos)) {
        return 1.0;
    } else if (isInTransit()) {
        return mix(
            facetPos.height,
            facetPos.targetHeight,
            getTransitionFraction(pos.x));
    } else {
        return facetPos.height;
    }
}
`,dk=`/*
 * Based on concepts presented at:
 * https://webglfundamentals.org/webgl/lessons/webgl-picking.html
 * https://deck.gl/docs/developer-guide/custom-layers/picking
 */

out highp vec4 vPickingColor;

/**
 * Passes the unique id to the fragment shader as a color if picking is enabled.
 * Returns true if picking is enabled.
 */
bool setupPicking() {
    if (uPickingEnabled) {
#ifdef uniqueId_DEFINED
        uint id = attr_uniqueId;
        vPickingColor = vec4(
            ivec4(id >> 0, id >> 8, id >> 16, id >> 24) & 0xFF
        ) / float(0xFF);
#else
        vPickingColor = vec4(1.0);
#endif
        return true;
    }
    return false;
}
`,gk=`in highp vec4 vPickingColor;
`,ja=Symbol("cacheMap");function Wa(t,e,n){let i=zs(t).get(e);return i===void 0&&(i=n(e),zs(t).set(e,i)),i}function gf(t,e){zs(t).delete(e)}function Gs(t,e){const n=zs(t);for(const i of n.keys())i.startsWith(e)&&n.delete(i);zs(t).delete(e)}function om(t){t[ja]=new Map}function zs(t){return t[ja]||om(t),t[ja]}function am(...t){const e={get(n,i,r){for(const s of t){const a=s()[i];if(a!==void 0)return a}},has(n,i,r){for(const s of t){const o=s();if(i in o)return!0}return!1}};return new Proxy({},e)}function pk(t){return le(t)||Ve(t)||zr(t)}class He extends Error{constructor(e,n){super(e),this.name="ViewError",this.view=n}}const mk="SAMPLE_FACET_UNIFORM",cm="SAMPLE_FACET_TEXTURE",lm="uSelectionTexture_";class Hs{#e=[];constructor(e){this.unitView=e,this.encoders=void 0,this.bufferInfo=void 0,this.bytesPerElement=new Map,this.programInfo=void 0,this.vertexArrayInfo=void 0,this.viewUniformInfo=void 0,this.markUniformInfo=void 0,this.markUniformsAltered=!0,this.selectionTextureOps=[],this.rangeMap=new wk,this.defaultProperties={get clip(){return["x","y"].map(n=>e.getScaleResolution(n)).some(n=>n?.isZoomable()??!1)},xOffset:0,yOffset:0,minBufferSize:0},this.properties=am(typeof this.unitView.spec.mark=="object"?()=>this.unitView.spec.mark:()=>({}),()=>this.defaultProperties)}augmentDefaultProperties(e){Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors(e))}get opaque(){return!1}get defaultHitTestMode(){return"intersects"}getAttributes(){throw new Error("Not implemented!")}getSupportedChannels(){return["sample","facetIndex","x","y","color","opacity","search","uniqueId"]}getDefaultEncoding(){const e={sample:void 0,uniqueId:void 0};return this.isPickingParticipant()&&(e.uniqueId={field:gt}),e}fixEncoding(e){return e}setupExprRefsNeedingGraphicsUpdate(e){const n=this.getSupportedChannels(),i={};for(const s of e){const o=this.properties[s];if(o&&be(o)){const a=this.unitView.paramRuntime.watchExpression(o.expr,()=>{this.updateGraphicsData(),this.unitView.context.animator.requestRender()});n.includes(s)||Object.defineProperty(i,s,{get(){return a()}})}}const r=this.properties;this.properties=am(()=>i,()=>r)}get encoding(){return Wa(this,"encoding",()=>{const e=this.getDefaultEncoding(),n=this.unitView.getEncoding(),i=o=>{const a=this.properties[o];return pk(a)||be(a)?{value:a}:void 0},r=Object.fromEntries(this.getSupportedChannels().map(o=>[o,i(o)]).filter(o=>ft(o[1]))),s=this.fixEncoding({...e,...r,...n});for(const o of Object.keys(s))this.getSupportedChannels().includes(o)||delete s[o];return s.x&&(s.x.buildIndex??=!0),s})}getContext(){return this.unitView.context}getType(){return this.unitView.getMarkType()}initializeData(){}initializeEncoders(){this.encoders=qB(this.unitView,this.encoding)}async initializeGraphics(){}updateGraphicsData(){}getSampleFacetMode(){if(this.encoders.facetIndex)return cm;if(this.unitView.getLayoutAncestors().find(e=>"samples"in e.spec))return mk}createAndLinkShaders(e,n,i=[]){const r=this.getAttributes(),s=this.encoders,o=this.getSampleFacetMode();o&&i.push(`#define ${o}`);const a="// view: "+this.unitView.getPathString();let l=[];const c=new Set,u=nm(s),f=[],h=Object.values(s).flatMap(x=>x.accessors).map(x=>x.predicate).filter(x=>x.param),A=new Map;for(const x of h){const I=x.param,b=this.unitView.paramRuntime,S=b.findValue(I);if(!S)throw new Error(`Cannot infer selection type as the parameter "${I}" has no value. Please ensure that the parameter is properly defined!`);const D=lr("uniqueId");if(i0(S)){if(!A.has(I)){A.set(I,"single");const v=Ka+Mt(I);f.push("    // Selection parameter"),f.push(`    uniform highp uint ${v};`),this.#e.push(()=>{this.registerMarkUniformValue(v,{expr:I},F=>F.uniqueId??0)}),l.push(`bool ${Os}${I}(bool empty) {
    return ${Ka}${I} == ${D} || (empty && ${Ka}${I} == 0u);
}`)}}else if(Vl(S)){if(!A.has(I)){A.set(I,"multi");const v=lm+Mt(I);l.push(`// Selection texture
uniform highp usampler2D ${v};`);const F=this.getContext().glHelper,R=F.selectionTextures;this.selectionTextureOps.push(()=>{const O=b.getValue(I),z=R.get(O);if(!z)throw new Error(`Bug: no selection texture found for "${I}"!`);si(this.programInfo,{[v]:z})});const M=lm+I;l.push(`bool ${Os}${I}(bool empty) {
   return hashContainsTexture(${M}, ${D}) || (empty && isEmptyHashTexture(${M}));
}`),F.createSelectionTexture(S),b.watchExpression(I,()=>{const O=b.getValue(I);F.createSelectionTexture(O),this.getContext().animator.requestRender()})}}else if(n0(S)&&!A.has(I)){A.set(I,"interval");const v=[],F=[];for(const R of Object.keys(S.intervals)){if(!["x","y"].includes(R))continue;const M=Ka+Mt(I)+`_${R}`,{attributeType:O}=cr(this.unitView.getScaleResolution(R).getScale(),R);f.push("    // Selection parameter"),f.push(`    uniform highp ${O}[2] ${M};`),this.#e.push(()=>{this.registerMarkUniformValue(M,{expr:I},ne=>ne.intervals[R]??[1,0])});const z=ne=>{for(const[_e,qt]of u.entries())if(_e[1]&&qt.includes(ne))return lr(qt);return lr(ne)},_=z(R),Y=M+"[0]",te=M+"[1]",ae=zl(R);if(this.encoding[ae]){const ne=z(ae),_e=this.defaultHitTestMode;if(_e=="endpoints")v.push(`((${Y} <= ${_} && ${_} <= ${te}) || (${Y} <= ${ne} && ${ne} <= ${te}))`);else if(_e=="encloses")v.push(`(${Y} <= ${_} && ${ne} <= ${te})`);else if(_e=="intersects")v.push(`(${Y} <= ${ne} && ${_} <= ${te})`);else throw new He(`Unsupported hit test mode "${_e}" for interval selection!`,this.unitView)}else v.push(`(${Y} <= ${_} && ${_} <= ${te})`);F.push(`${Y} > ${te}`)}l.push(`bool ${Os}${I}(bool empty) {
    return ${v.join(" && ")} || (empty && (${F.join(" || ")}));
}`)}}const d=(x,I,b,S)=>{const D=I.channelDef;if(ft(D))if(be(D.value)){const{uniformName:v,uniformGlsl:F,accessorGlsl:R,adjuster:M}=W3(x,b);l.push(R),f.push(F),this.#e.push(()=>{this.registerMarkUniformValue(v,D.value,M)})}else l.push(j3(x,b,D.value).accessorGlsl);else if(Yi(D)){const{uniformName:v,uniformGlsl:F,accessorGlsl:R}=X3(x,S,b);f.push(F),l.push(R);const{largeHp:M,discrete:O}=cr(S,x),z=O&&"domain"in S?_=>S.domain().indexOf(_):M?tm:_=>+_;this.#e.push(()=>{this.registerMarkUniformValue(v,D.datum,z)})}else if(en(D)){const v=u.get([D.field,!0]),{attributeGlsl:F,accessorGlsl:R}=jp(x,S,b,v?.includes(x)?v:void 0);c.add(F),l.push(R)}else if(Vi(D)){const{attributeGlsl:v,accessorGlsl:F}=jp(x,S,b);c.add(v),l.push(F)}else throw new He(`Unsupported channel definition: ${JSON.stringify(D)}`,this.unitView)};for(const[x,I]of Object.entries(s)){if(!r.includes(x))continue;const{channelDef:b,accessors:S,scale:D}=I;for(let v=0;v<S.length;v++)d(x,S[v],v,D);if(D){const v=Wd(b),F=v&&v.resolutionChannel||x,R=oa(F)?this.unitView.getScaleResolution(F):null,{glsl:M,domainUniform:O,domainUniformName:z,rangeUniform:_,rangeUniformName:Y}=Z3(x,D,b);l.push(M),f.push(O),f.push(_),_&&this.#e.push(()=>{const te=this.createMarkUniformSetter(Y),ae=()=>te(im(D,x));R.addEventListener("range",ae),ae()}),O&&this.#e.push(()=>{const te=this.createMarkUniformSetter(z),ae=()=>{const ne=sn(D.type)?[0,D.domain().length]:D.domain();te(em(D.type)?rk(ne):ne)};R.addEventListener("domain",ae),ae()})}l.push($3(x,S))}const g=[...A.keys()].map(x=>`${Os}${x}(false)`);l.push(`bool isPointSelected() {
`+(this.encoders.uniqueId&&g.length>0?`    return ${g.join(" || ")};`:"    return false;")+`
}`);const m=`precision highp float;
precision highp int;`,p=x=>x.replace("#pragma markUniforms",f.join(`
`));i=i.map(p),e=p(e),n=p(n);const w=[m,a,...i,sm,Ak,[...c].join(`
`),...l,hk,dk,e],C=[m,a,...i,sm,gk,n],y=this.gl;this.programStatus=L3(y,this.glHelper.compileShader(y.VERTEX_SHADER,w),this.glHelper.compileShader(y.FRAGMENT_SHADER,C))}finalizeGraphicsInitialization(){if(this.programInfo)return;if(!this.programStatus)throw new Error("No program status found! "+this.unitView.getPathString());const e=this.programStatus.getProgramErrors();if(e){e.detail&&console.warn(e.detail);const n=new Error("Cannot create shader program: "+e.message);throw n.view=this.unitView,n}this.programInfo=xD(this.gl,this.programStatus.program),delete this.programStatus,this.viewUniformInfo=fg(this.gl,this.programInfo,"View"),this.markUniformInfo=fg(this.gl,this.programInfo,"Mark"),this.gl.useProgram(this.programInfo.program),si(this.programInfo,{uSampleFacet:[0,1,0,1],uTransitionOffset:0,uZero:0});for(const n of this.#e)n();this.#e=void 0}createMarkUniformSetter(e){const n=this.markUniformInfo.setters[e];if(!n)throw new Error(`Uniform "${e}" not found int the Mark block!`);return i=>{n(i),this.markUniformsAltered=!0,this.unitView.context.animator.requestRender()}}registerMarkUniformValue(e,n,i=r=>r){const r=this.createMarkUniformSetter(e),s=o=>{if(o==null)throw new Error(`Trying to set null/undefined value for uniform: ${e}${be(n)?`Expr: ${n.expr}`:""}`);r(o)};if(be(n)){let o;const a=()=>s(i(o(null)));o=this.unitView.paramRuntime.watchExpression(n.expr,a),a()}else s(i(n))}deleteGraphicsData(){const e=this.glHelper;if(!e){this.vertexArrayInfo=void 0,this.bufferInfo=void 0;return}const n=e.gl;if(this.vertexArrayInfo&&(this.gl.bindVertexArray(null),n.deleteVertexArray(this.vertexArrayInfo.vertexArrayObject),this.vertexArrayInfo=void 0),this.bufferInfo){for(let i=0;i<8;i++)n.disableVertexAttribArray(i);Object.values(this.bufferInfo.attribs).forEach(i=>this.gl.deleteBuffer(i.buffer)),this.bufferInfo.indices&&this.gl.deleteBuffer(this.bufferInfo.indices),this.bufferInfo=void 0}}dispose(){this.deleteGraphicsData()}updateBufferInfo(e){if(this.gl.bindVertexArray(null),this.bufferInfo&&e.vertexCount<=this.bufferInfo.allocatedVertices)for(const[n,i]of Object.entries(e.arrays))i.data&&Pv(this.gl,this.bufferInfo.attribs[n],i.data,0);else{this.deleteGraphicsData(),this.bufferInfo=Uv(this.gl,e.arrays,{numElements:e.vertexCount}),this.bufferInfo.allocatedVertices=e.allocatedVertices;for(const[n,i]of Object.entries(e.arrays))this.bytesPerElement.set(n,i.data.BYTES_PER_ELEMENT)}}get glHelper(){return this.getContext().glHelper}get gl(){return this.glHelper.gl}isReady(){return this.bufferInfo&&this.programInfo}isPickingParticipant(){if(this.properties.tooltip===null&&!this.unitView.paramRuntime.hasPointSelections())return!1;for(const e of this.unitView.getLayoutAncestors())if(!e.isPickingSupported())return!1;return!0}bindOrSetMarkUniformBlock(){this.markUniformsAltered?(hg(this.gl,this.programInfo,this.markUniformInfo),this.markUniformsAltered=!1):Ag(this.gl,this.programInfo,this.markUniformInfo)}prepareRender(e){const n=this.glHelper,i=this.gl,r=[];r.push(()=>{this.vertexArrayInfo||(this.vertexArrayInfo=zD(this.gl,this.programInfo,this.bufferInfo)),i.useProgram(this.programInfo.program)});for(const[o,a]of Object.entries(this.encoders)){const l=n.rangeTextures.get(a.scale);l&&r.push(()=>si(this.programInfo,{[hf+o]:l}))}r.push(...this.selectionTextureOps),this.getSampleFacetMode()==cm&&r.push(()=>{let o;for(const a of this.unitView.getLayoutAncestors())if(o=a.getSampleFacetTexture(),o)break;if(!o)throw new Error("No facet texture available. This is bug.");si(this.programInfo,{uSampleFacetTexture:o})});const s=(e.picking??!1)&&this.isPickingParticipant();return r.push(()=>Bs(this.viewUniformInfo,{uViewOpacity:this.unitView.getEffectiveOpacity(),uPickingEnabled:s})),this.opaque||e.picking?r.push(()=>i.disable(i.BLEND)):r.push(()=>i.enable(i.BLEND)),r}prepareSampleFacetRendering(e){const n=e.sampleFacetRenderingOptions,i=this.programInfo.uniformSetters.uSampleFacet;if(n&&i){const r=n.pixelToUnit,s=n.locSize.location*r,o=n.locSize.size*r;if(s>1||s+o<0)return!1;this.gl.uniform4f(i.location,s,o,s,o)}return!0}render(e){}createRenderCallback(e,n){if(!this.bufferInfo)return()=>{};const i=this;let r;const s=this.unitView.getScaleResolution("x")?.getScale(),o=s&&Pe(s.type),a=["index","locus"].includes(s?.type)?-1:0,l=[0,0];r=f=>{if(o&&f.xIndex){const h=s.domain(),A=f.xIndex(h[0]+a,h[1],l),d=A[0],g=A[1]-d;g>0&&e(d,g)}else e(f.offset,f.count)};const c=this.rangeMap.get(void 0).count==0?n.facetId:void 0,u=this.rangeMap.get(c);return n.sampleFacetRenderingOptions?function(){u.count&&i.prepareSampleFacetRendering(n)&&r(u)}:function(){u.count&&r(u)}}setViewport(e,n,i,r){i=i.flatten();const s=this.gl,o=this.properties,a=.5,l=(o.xOffset??0)+a,c=(o.yOffset??0)+a;let u,f=i;if(o.clip!=="never"&&(o.clip||r)){let h=0,A=0,d;if(r){if(f=i.intersect(r).flatten(),!f.isDefined())return!1;d=[i.width/f.width,i.height/f.height],A=Math.max(0,i.y2-r.y2),h=Math.min(0,i.x-r.x)}else d=[1,1];const g=[f.x,e.height-f.y2,f.width,f.height].map(C=>C*n),m=g.map(C=>Math.floor(C)),p=g[0]-m[0],w=g[1]-m[1];s.viewport(...m),s.scissor(...m),s.enable(s.SCISSOR_TEST),u={uViewOffset:[(l+h+p/n)/f.width,-(c+A-w/n)/f.height],uViewScale:d}}else{if(!i.isDefined())return!1;s.viewport(0,0,e.width*n,e.height*n),s.disable(s.SCISSOR_TEST),u={uViewOffset:[(i.x+l)/e.width,(e.height-i.y-c-i.height)/e.height],uViewScale:[i.width/e.width,i.height/e.height]}}return Bs(this.viewUniformInfo,{...u,uViewportSize:[i.width,i.height],uDevicePixelRatio:n}),hg(this.gl,this.programInfo,this.viewUniformInfo),!0}findDatumAt(e,n){}}class wk extends jt{constructor(){super([],JSON.stringify)}get(e){let n=super.get(e);return n===void 0&&(n={offset:0,count:0,xIndex:void 0},super.set(e,n)),n}migrateEntries(e){for(const[n,i]of this.entries())e.has(n)||(i.offset=0,i.count=0,i.xIndex=void 0);for(const[n,i]of e.entries())Object.assign(this.get(n),i)}}function pf(t,e){const n=zl(e);let i=t[e]&&{...t[e]},r=t[n]&&{...t[n]};if(!(ft(i)||ft(r))){if(i){if(!pt(t[e]))return;if(r){if(i.type!="quantitative"){const s=(1-(i.band||1))/2;i.band=s,r.band=-s}}else if(i.type=="quantitative")r={datum:0,domainInert:!0};else{r={...i};const s=(1-(i.band??1))/2;i.band=0+s,r.band=1-s}}else i={value:0},r={value:1};t[e]=i,t[n]=r}}function Xa(t,e){const n=Wd(t);n&&(n.resolutionChannel=e)}function um(t,e){t.stroke||(e?t.stroke={value:null}:(t.stroke=structuredClone(t.color),Xa(t.stroke,"color"))),ft(t.stroke)&&t.stroke.value===null&&(t.strokeWidth={value:0}),t.strokeOpacity||(t.strokeOpacity=structuredClone(t.opacity),Xa(t.strokeOpacity,"opacity"))}function fm(t,e){ft(t.fill)&&t.fill.value===null?t.fillOpacity={value:0}:t.fill||(t.fill=structuredClone(t.color),Xa(t.fill,"color"),!e&&!t.fillOpacity&&(t.fillOpacity={value:0})),t.fillOpacity||(e?(t.fillOpacity=structuredClone(t.opacity),Xa(t.fillOpacity,"opacity")):t.fillOpacity={value:0})}const yk=["none","diagonal","antiDiagonal","cross","vertical","horizontal","grid","dots","rings","ringsLarge"];class Ck extends Hs{constructor(e){super(e),this.augmentDefaultProperties({x2:void 0,y2:void 0,filled:!0,color:"#4c78a8",opacity:1,strokeWidth:3,cornerRadius:0,minWidth:.5,minHeight:.5,minOpacity:1})}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","fill","stroke","fillOpacity","strokeOpacity","strokeWidth"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","fill","stroke","fillOpacity","strokeOpacity","strokeWidth"]}get opaque(){return Wa(this,"opaque",()=>!this.#e()&&!this.#t()&&!this.properties.shadowOpacity&&ft(this.encoding.fillOpacity)&&this.encoding.fillOpacity.value==1&&this.properties.minOpacity==1)&&this.unitView.getEffectiveOpacity()==1}fixEncoding(e){return pf(e,"x"),pf(e,"y"),um(e,this.properties.filled),fm(e,this.properties.filled),delete e.color,delete e.opacity,e}#e(){const e=this.properties;return e.cornerRadius||e.cornerRadiusBottomLeft||e.cornerRadiusBottomRight||e.cornerRadiusTopLeft||e.cornerRadiusTopRight}#t(){const e=this.encoding.strokeWidth;return!(ft(e)&&!e.value)||"condition"in e}async initializeGraphics(){await super.initializeGraphics();const e=[];this.#e()&&e.push("ROUNDED_CORNERS"),this.#t()&&e.push("STROKED"),this.properties.shadowOpacity&&e.push("SHADOW"),this.createAndLinkShaders(qD,KD,[jD,...e.map(n=>"#define "+n)])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;this.registerMarkUniformValue("uMinWidth",e.minWidth),this.registerMarkUniformValue("uMinHeight",e.minHeight),this.registerMarkUniformValue("uMinOpacity",e.minOpacity),this.registerMarkUniformValue("uCornerRadiusTopRight",e.cornerRadiusTopRight??e.cornerRadius??0),this.registerMarkUniformValue("uCornerRadiusBottomRight",e.cornerRadiusBottomRight??e.cornerRadius??0),this.registerMarkUniformValue("uCornerRadiusTopLeft",e.cornerRadiusTopLeft??e.cornerRadius??0),this.registerMarkUniformValue("uCornerRadiusBottomLeft",e.cornerRadiusBottomLeft??e.cornerRadius??0),this.registerMarkUniformValue("uHatchPattern",e.hatch,n=>Math.max(0,yk.indexOf(n??"none"))),this.registerMarkUniformValue("uShadowBlur",e.shadowBlur??0),this.registerMarkUniformValue("uShadowOpacity",e.shadowOpacity??0),this.registerMarkUniformValue("uShadowOffsetX",e.shadowOffsetX??0),this.registerMarkUniformValue("uShadowOffsetY",e.shadowOffsetY??0),this.registerMarkUniformValue("uShadowColor",e.shadowColor??"black",Af)}updateGraphicsData(){const e=this.unitView.getCollector();if(!e){console.debug("No collector");return}const n=e.getItemCount(),i=new ak({encoders:this.encoders,attributes:this.getAttributes(),numItems:n});i.addBatches(e.facetBatches);const r=i.toArrays();this.rangeMap.migrateEntries(r.rangeMap),this.updateBufferInfo(r)}prepareRender(e){const n=super.prepareRender(e);return n.push(()=>this.bindOrSetMarkUniformBlock()),n.push(()=>oi(this.gl,this.programInfo,this.vertexArrayInfo)),n}render(e){const n=this.gl;return this.createRenderCallback((i,r)=>{Qa(n,this.vertexArrayInfo,n.TRIANGLE_STRIP,r,i)},e)}findDatumAt(e,n){e=Ne(e);const i=this.unitView.getCollector().facetBatches.get(e);if(!i)return;const r=this.encoders,s=r.x.scale.type;if(sn(s)){const o=r.x.dataAccessor;return i.find(a=>n==o(a))}else{const o=r.x.dataAccessor,a=r.x2.dataAccessor;return i.find(l=>n>=o(l)&&n<a(l))}}}const Ek=`flat out float vRadius;
flat out float vRadiusWithPadding;
flat out lowp vec4 vFillColor;
flat out lowp vec4 vStrokeColor;
flat out lowp float vShape;
flat out lowp float vHalfStrokeWidth;
flat out mat2 vRotationMatrix;

// Copypaste from fragment shader
const float CIRCLE = 0.0;
const float SQUARE = 1.0;
const float CROSS = 2.0;
const float DIAMOND = 3.0;
const float TRIANGLE_UP = 4.0;
const float TRIANGLE_RIGHT = 5.0;
const float TRIANGLE_DOWN = 6.0;
const float TRIANGLE_LEFT = 7.0;
const float TICK_UP = 8.0;
const float TICK_RIGHT = 9.0;
const float TICK_DOWN = 10.0;
const float TICK_LEFT = 11.0;

float computeSemanticThresholdFactor() {
    // TODO: add smooth transition
    return getScaled_semanticScore() >= uSemanticThreshold ? 1.0 : 0.0;
}

// TODO: Move this into common.glsl or something
vec2 getDxDy() {
#if defined(dx_DEFINED) || defined(dy_DEFINED)
    return vec2(getScaled_dx(), getScaled_dy()) / uViewportSize;
#else
    return vec2(0.0, 0.0);
#endif
}

void main(void) {
    float shapeAngle = 0.0;

    // Selected points should always be visible
    float semanticThresholdFactor = isPointSelected()
        ? 1.0
        : computeSemanticThresholdFactor();

    if (semanticThresholdFactor <= 0.0) {
        gl_PointSize = 0.0;
        // Place the vertex outside the viewport. The default (0, 0) makes this super-slow
        // on Apple Silicon. Probably related to the tile-based GPU architecture.
        gl_Position = vec4(100.0, 0.0, 0.0, 0.0);
        // Exit early. MAY prevent some unnecessary calculations.
        return;
    }

    float size = getScaled_size();
    vec2 pos = vec2(getScaled_x(), getScaled_y()) + getDxDy();

    gl_Position = unitToNdc(applySampleFacet(pos));

    float strokeWidth = getScaled_strokeWidth();

    float diameter = sqrt(size) *
        uScaleFactor *
        semanticThresholdFactor;

    // Clamp minimum size and adjust opacity instead. Yields more pleasing result,
    // no flickering etc.
    float opacity = uViewOpacity;
	if (strokeWidth <= 0.0 || uInwardStroke) {
		float minDiameter = 1.0 / uDevicePixelRatio;
		if (diameter < minDiameter) {
			// We do some "cheap" gamma correction here. It breaks on dark background, though.
			// First we take a square of the size and then apply "gamma" of 1.5.
			opacity *= pow(diameter / minDiameter, 2.5);
			diameter = minDiameter;
		}
	}

	float fillOpa = getScaled_fillOpacity() * opacity;
	float strokeOpa = getScaled_strokeOpacity() * opacity;

    vShape = getScaled_shape();

	// Circle doesn't have sharp corners. Do some special optimizations to minimize the point size.
	bool circle = vShape == 0.0;

    if (vShape > TICK_UP && vShape <= TICK_LEFT) {
        shapeAngle = (vShape - TICK_UP) * 90.0;
        vShape = TICK_UP;
    } else if (vShape > TRIANGLE_UP && vShape <= TRIANGLE_LEFT) {
        shapeAngle = (vShape - TRIANGLE_UP) * 90.0;
        vShape = TRIANGLE_UP;
    }

	float angleInDegrees = getScaled_angle();
	float angle = -(shapeAngle + angleInDegrees) * PI / 180.0;
    float sinTheta = sin(angle);
    float cosTheta = cos(angle);
    vRotationMatrix = mat2(cosTheta, sinTheta, -sinTheta, cosTheta);

    // Not needed if we would draw rotated quads instead of gl.POINTS
	float roomForRotation = circle ? 1.0 : sin(mod(angle, PI / 2.0) + PI / 4.0) / sin(PI / 4.0);

	float aaPadding = 1.0 / uDevicePixelRatio;
	float rotationPadding = (diameter * roomForRotation) - diameter;
	// sqrt(3.0) ensures that the angles of equilateral triangles have enough room
	float strokePadding = uInwardStroke ? 0.0 : strokeWidth * (circle ? 1.0 : sqrt(3.0));
	float padding = rotationPadding + strokePadding + aaPadding;

    gl_PointSize = max(
        (diameter + padding),
        uPickingEnabled ? uMinPickingSize : 0.0
    ) * uDevicePixelRatio;

	vRadius = diameter / 2.0;
	vRadiusWithPadding = vRadius + padding / 2.0;

    vHalfStrokeWidth = strokeWidth / 2.0;

    vFillColor = vec4(getScaled_fill() * fillOpa, fillOpa);
    vStrokeColor = vec4(getScaled_stroke() * strokeOpa, strokeOpa);

    setupPicking();
}
`,bk=`const lowp vec4 white = vec4(1.0);
const lowp vec4 black = vec4(0.0, 0.0, 0.0, 1.0);

flat in float vRadius;
flat in float vRadiusWithPadding;

flat in lowp vec4 vFillColor;
flat in lowp vec4 vStrokeColor;
flat in lowp float vShape;
flat in lowp float vHalfStrokeWidth;

flat in mat2 vRotationMatrix;

out lowp vec4 fragColor;

// Copypaste from vertex shader
const float CIRCLE = 0.0;
const float SQUARE = 1.0;
const float CROSS = 2.0;
const float DIAMOND = 3.0;
const float TRIANGLE_UP = 4.0;
const float TICK_UP = 8.0;

// The distance functions are inspired by:
// http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
// However, these are not true distance functions, because the corners need to be sharp.

float circle(vec2 p, float r) {
    return length(p) - r;
}

float square(vec2 p, float r) {
    p = abs(p);
    return max(p.x, p.y) - r;
}

float tickUp(vec2 p, float r) {
    float halfR = r * 0.5;
    p.y += halfR;
    p = abs(p);
    return max(p.x - r * 0.15, p.y - halfR);
}

float equilateralTriangle(vec2 p, float r) {
    p.y = -p.y;
    float k = sqrt(3.0);
    float kr = k * r;
    p.y -= kr / 2.0;
    return max((abs(p.x) * k + p.y) / 2.0, -p.y - kr);
}

float crossShape(vec2 p, float r) {
    p = abs(p);

	vec2 b = vec2(0.4, 1.0) * r;
    vec2 v = abs(p) - b.xy;
    vec2 h = abs(p) - b.yx;
    return min(max(v.x, v.y), max(h.x, h.y));
}

float diamond(vec2 p, float r) {
    p = abs(p);
    return (max(abs(p.x - p.y), abs(p.x + p.y)) - r) / sqrt(2.0);
}

void main() {
    float d;

	/** Normalized point coord */
    vec2 p = vRotationMatrix * (2.0 * gl_PointCoord - 1.0) * vRadiusWithPadding;
	float r = vRadius;

    // We could also use textures here. Could even be faster, because we have plenty of branching here.
    if (vShape == CIRCLE) {
        d = circle(p, r);

    } else if (vShape == SQUARE) {
        d = square(p, r);

    } else if (vShape == CROSS) {
        d = crossShape(p, r);

    } else if (vShape == DIAMOND) {
        d = diamond(p, r);

    } else if (vShape == TRIANGLE_UP) {
        d = equilateralTriangle(p, r);

    } else if (vShape == TICK_UP) {
        d = tickUp(p, r);

    } else {
        d = 0.0;
    }

	if (!uPickingEnabled) {
		lowp vec4 fillColor = mix(vFillColor, white, -d * uGradientStrength / vRadius);

		fragColor = distanceToColor(
			d + (uInwardStroke ? vHalfStrokeWidth : 0.0),
			fillColor,
			vStrokeColor,
            vec4(0.0),
			vHalfStrokeWidth);

	} else if (d - vHalfStrokeWidth <= 0.0) {
        fragColor = vPickingColor;

	} else {
		discard;
    }
}

`,xk=`layout(std140) uniform Mark {
    /**
    * The stroke should only grow inwards, e.g, the diameter/outline is not affected by the stroke width.
    * Thus, a point that has a zero size has no visible stroke. This allows strokes to be used with
    * geometric zoom, etc.
    */
    uniform bool uInwardStroke;

    /** The minimum point size in pixels when rendering into the picking buffer */
    uniform float uMinPickingSize;

    /** Scale factor for geometric zoom */
    uniform mediump float uScaleFactor;

    uniform mediump float uZoomLevel;
    uniform highp float uSemanticThreshold;

    uniform mediump float uGradientStrength;

#pragma markUniforms
};
`;class Am extends De{constructor(e){super(e),this.params=e,this.k=e.size||500,this.reset()}reset(){super.reset(),this.reservoir=[],this.W=void 0,this.ingester=this._initialIngester}_initialIngester(e){this.reservoir.push(e),this.reservoir.length==this.k&&(this.W=Math.exp(Math.log(Math.random())/this.k),this.i=this.k,this.next=this.i,this.ingester=this._finalIngester,this._setNextStop())}_finalIngester(e){++this.i==this.next&&(this.reservoir[Math.floor(Math.random()*this.k)]=e,this.W*=Math.exp(Math.log(Math.random())/this.k),this._setNextStop())}_setNextStop(){this.next+=Math.floor(Math.log(Math.random())/Math.log(1-this.W))+1}handle(e){this.ingester(e)}complete(){for(const e of this.reservoir)this._propagate(e);super.complete()}}function Ik(t,e,n){const i=new Am({type:"sample",size:t});for(const r of e)i.handle(n(r));return i.complete(),i.reservoir}const Bk={};class vk extends Hs{#e=()=>0;constructor(e){super(e),this.augmentDefaultProperties({x:.5,y:.5,color:"#4c78a8",filled:!0,opacity:1,size:100,semanticScore:0,shape:"circle",strokeWidth:2,fillGradientStrength:0,dx:0,dy:0,angle:0,sampleFacetPadding:.1,semanticZoomFraction:.02,minPickingSize:2});const n=this.properties.semanticZoomFraction;if(n!=null)if(be(n)){const i=this.unitView.paramRuntime.watchExpression(n.expr,()=>this.getContext().animator.requestRender());this.#e=i}else this.#e=()=>n;"geometricZoomBound"in this.properties&&console.warn('geometricZoomBound is deprecated. Use something like the following instead: "size": { "expr": "min(0.5 * pow(zoomLevel, 2), 200)" }.')}getAttributes(){return["uniqueId","facetIndex","x","y","size","semanticScore","shape","strokeWidth","dx","dy","fill","stroke","fillOpacity","strokeOpacity","angle"]}getSupportedChannels(){return[...super.getSupportedChannels(),"size","semanticScore","shape","strokeWidth","dx","dy","fill","stroke","fillOpacity","strokeOpacity","angle"]}getDefaultEncoding(){return{...super.getDefaultEncoding(),...Bk}}fixEncoding(e){return um(e,this.properties.filled),fm(e,this.properties.filled),delete e.color,delete e.opacity,e}initializeData(){super.initializeData();const e=this.encoders.semanticScore?.dataAccessor?.asNumberAccessor();e&&(this.sampledSemanticScores=Float32Array.from(Ik(1e4,this.unitView.getCollector().getData(),e)),this.sampledSemanticScores.sort((n,i)=>n-i))}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(Ek,bk,[xk])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;this.registerMarkUniformValue("uInwardStroke",e.inwardStroke,n=>!!n),this.registerMarkUniformValue("uGradientStrength",e.fillGradientStrength),this.registerMarkUniformValue("uMinPickingSize",e.minPickingSize)}updateGraphicsData(){const e=this.unitView.getCollector();if(!e){console.debug("No collector");return}const n=e.getItemCount(),i=new lk({encoders:this.encoders,attributes:this.getAttributes(),numItems:Math.max(n,this.properties.minBufferSize||0)});i.addBatches(e.facetBatches);const r=i.toArrays();this.rangeMap.migrateEntries(r.rangeMap),this.updateBufferInfo(r)}#t(){const e=Math.pow(2,this.properties.geometricZoomBound||0);return Math.pow(Math.min(1,this.unitView.getZoomLevel()/e),1/3)}getSemanticThreshold(){if(this.sampledSemanticScores){const e=Math.max(0,1-this.#e()*this.unitView.getZoomLevel());if(e<=0)return-1/0;if(e>=1)return 1/0;{const n=this.sampledSemanticScores;return $h(n,e)}}else return-1}prepareRender(e){const n=super.prepareRender(e);return n.push(()=>{Bs(this.markUniformInfo,{uScaleFactor:this.#t(),uSemanticThreshold:this.getSemanticThreshold()}),this.markUniformsAltered=!0}),n.push(()=>this.bindOrSetMarkUniformBlock()),n.push(()=>oi(this.gl,this.programInfo,this.vertexArrayInfo)),n}render(e){const n=this.gl;return this.createRenderCallback((i,r)=>{r&&Qa(n,this.vertexArrayInfo,n.POINTS,r,i)},e)}}const Sk=`// Line caps
const int BUTT = 0;
const int SQUARE = 1;
const int ROUND = 2;

/** Position along the rule */
in float pos;

/** Which side of the stroke: -0.5 or 0.5 */
in float side;

flat out vec4 vColor;

/** Stroke width */
flat out float vSize;

/** The distance from the line center to the direction of normal in pixels */
out float vNormalLengthInPixels;

/** Distances from the line endings. Used for rendering the round caps and dashes */
out highp vec2 vPosInPixels;


void main(void) {
    float pixelSize = 1.0 / uDevicePixelRatio;

    // Stroke width in pixels
    float size = getScaled_size();
    float opacity = getScaled_opacity() * uViewOpacity;

    // Avoid artifacts in very thin lines by clamping the size and adjusting opacity respectively
    if (size < pixelSize) {
        opacity *= size / pixelSize;
        size = pixelSize;
    }

    vec2 a = applySampleFacet(vec2(getScaled_x(), getScaled_y()));
    vec2 b = applySampleFacet(vec2(getScaled_x2(), getScaled_y2()));

    vec2 tangent = b - a;

    float offset = 0.0;
    float relativeDiff = 0.0;
    if (uMinLength > 0.0 || uStrokeCap != BUTT) {
        float len = length(tangent * uViewportSize);

        // Elongate to reach the minimum length.
        // The length difference in pixels
        float diff = max(0.0, uMinLength - len);

        // Add line caps
        if (uStrokeCap != BUTT) {
            diff += size;
        }

        relativeDiff = diff / len;
        offset = relativeDiff * (pos - 0.5);
    }

    // Apply caps and minimum length by spreading the vertices along the tangent
    vec2 p = pos < 1.0
        ? a + tangent * (pos + offset)
        : b + tangent * offset;

    // Add an extra pixel to stroke width to accommodate edge antialiasing
    float aaPadding = pixelSize;

    // Extrude
    vec2 normal = normalize(vec2(-tangent.y, tangent.x) / uViewportSize);
    p += normal * side * (size + aaPadding) / uViewportSize;

    gl_Position = unitToNdc(p);

    vColor = vec4(getScaled_color() * opacity, opacity);
    vSize = size;
    vNormalLengthInPixels = side * (size + aaPadding);

    // TODO: Here's a precision problem that breaks round caps when zoomed in enough
    vPosInPixels = vec2(pos, (1.0 - pos)) * (1.0 + relativeDiff) * length(tangent * uViewportSize) -
        vec2(uStrokeCap != BUTT ? size / 2.0 : 0.0);
    
    setupPicking();
}
`,Dk=`// Line ending
const int BUTT = 0;
const int SQUARE = 1;
const int ROUND = 2;

uniform sampler2D uDashTexture;

flat in vec4 vColor;
flat in float vSize;

/** Position on the rule along its length in pixels */
in vec2 vPosInPixels;
in float vNormalLengthInPixels;

out lowp vec4 fragColor;

void main(void) {
    float dpr = uDevicePixelRatio;

    float distanceFromEnd = -min(vPosInPixels[0], vPosInPixels[1]);
    float distance; // from the rule centerline or end
    if (distanceFromEnd > 0.0 && uStrokeCap == ROUND) {
        // round cap
        distance = length(vec2(distanceFromEnd, vNormalLengthInPixels));
    } else {
        distance = abs(vNormalLengthInPixels);
    }

    // Use a signed distance field to implement edge antialiasing
    float opacity = clamp(((vSize / 2.0 - distance) * dpr), -0.5, 0.5) + 0.5;

    if (uDashTextureSize > 0.0) {
        float pos = (vPosInPixels[0] + uStrokeDashOffset) * dpr;
        float floored = floor(pos);
        vec2 texelPositions = (floored + vec2(0.5, 1.5)) / dpr / uDashTextureSize;
      
        // Do antialiasing
        opacity *= mix(
            texture(uDashTexture, vec2(texelPositions[0], 0)).r,
            texture(uDashTexture, vec2(texelPositions[1], 0)).r,
            clamp((pos - floored), 0.0, 1.0));
    }

    fragColor = vColor * opacity;

    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
}
`,Qk=`layout(std140) uniform Mark {
    /** Minimum rule length in pixels */
    uniform mediump float uMinLength;

    uniform mediump float uDashTextureSize;
    uniform lowp int uStrokeCap;
    uniform mediump float uStrokeDashOffset;

#pragma markUniforms
};
`;class kk extends Hs{constructor(e){super(e),this.dashTextureSize=0,this.augmentDefaultProperties({x2:void 0,y2:void 0,size:1,color:"black",opacity:1,minLength:0,strokeDash:null,strokeDashOffset:0,strokeCap:"butt"})}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","size","color","opacity"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size"]}fixEncoding(e){if(!(e.x&&e.y&&e.x2&&e.y2))if(e.x&&e.x2&&!e.y)e.y={value:.5},e.y2=e.y;else if(e.y&&e.y2&&!e.x)e.x={value:.5},e.x2=e.x;else if(e.x&&!e.y)e.y={value:0},e.y2={value:1},e.x2=e.x;else if(e.y&&!e.x)e.x={value:0},e.x2={value:1},e.y2=e.y;else if(e.x&&e.y&&e.y2)e.x2=e.x;else if(e.y&&e.x&&e.x2)e.y2=e.y;else if(e.y&&e.x)if(!e.x2&&pt(e.y)&&e.y.type=="quantitative")e.x2=e.x,e.y2={datum:0};else if(!e.y2&&pt(e.x)&&e.x.type=="quantitative")e.y2=e.y,e.x2={datum:0};else throw new Error("A bug!");else throw new Error("At a minimum, either the x or y channel must be defined in the rule mark's encoding: "+JSON.stringify(e));return e}async initializeGraphics(){await super.initializeGraphics();const e=this.gl,n=Fk(this.properties.strokeDash);this.dashTexture=Is(e,{level:0,mag:e.NEAREST,min:e.NEAREST,internalFormat:e.R8,format:e.RED,src:n,height:1}),this.dashTextureSize=n.length,this.createAndLinkShaders(Sk,Dk,[Qk])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;this.registerMarkUniformValue("uMinLength",e.minLength),this.registerMarkUniformValue("uStrokeCap",e.strokeCap??"butt",n=>["butt","square","round"].indexOf(n)),Bs(this.markUniformInfo,{uDashTextureSize:+this.dashTextureSize}),this.markUniformsAltered=!0}updateGraphicsData(){const e=this.unitView.getCollector();if(!e){console.debug("No collector");return}const n=e.getItemCount(),i=new ck({encoders:this.encoders,attributes:this.getAttributes(),numItems:Math.max(n,this.properties.minBufferSize||0)});i.addBatches(e.facetBatches);const r=i.toArrays();this.rangeMap.migrateEntries(r.rangeMap),this.updateBufferInfo(r)}prepareRender(e){const n=super.prepareRender(e);return n.push(()=>this.bindOrSetMarkUniformBlock()),n.push(()=>si(this.programInfo,{uDashTexture:this.dashTexture})),n.push(()=>oi(this.gl,this.programInfo,this.vertexArrayInfo)),n}render(e){const n=this.gl;return this.createRenderCallback((i,r)=>Qa(n,this.vertexArrayInfo,n.TRIANGLE_STRIP,r,i),e)}}function Fk(t){if(!t)return new Uint8Array(0);if(t.length==0||t.length%2||t.findIndex(s=>Math.round(s)!=s||s<1||s>1e3)>=0)throw new Error("Invalid stroke dash pattern: "+JSON.stringify(t));const e=t.reduce((s,o)=>s+o),n=new Uint8Array(e);let i=!0,r=0;for(let s of t){for(;s;)n[r++]=i&&255||0,s--;i=!i}return n}const Rk=`flat out vec4 vColor;

/** Stroke width */
flat out float vSize;

/** The distance from the line center to the direction of normal in pixels */
out float vNormalLengthInPixels;

flat out float vGamma;

const int SHAPE_ARC = 0;
const int SHAPE_DOME = 1;
const int SHAPE_DIAGONAL = 2;
const int SHAPE_LINE = 3;
const int ORIENT_VERTICAL = 0;
const int ORIENT_HORIZONTAL = 1;

float distanceFromLine(vec2 pointOnLine1, vec2 pointOnLine2, vec2 point) {
    vec2 a = point - pointOnLine1;
    vec2 b = pointOnLine2 - pointOnLine1;
    vec2 proj = dot(a, b) / dot(b, b) * b;
    return length(a - proj);
}

bool isInsideViewport(vec2 point, float marginFactor) {
    vec2 margin = uViewportSize * vec2(marginFactor);
    return point.x >= -margin.x
        && point.x <= uViewportSize.x + margin.x
        && point.y >= -margin.y
        && point.y <= uViewportSize.y + margin.y;
}

void main(void) {
    float pixelSize = 1.0 / uDevicePixelRatio;
    float opacity = getScaled_opacity() * uViewOpacity;

    // The bezier's control points
    vec2 p1, p2, p3, p4;

    vec2 a = applySampleFacet(vec2(getScaled_x(), getScaled_y())) * uViewportSize;
    vec2 b = applySampleFacet(vec2(getScaled_x2(), getScaled_y2())) * uViewportSize;

    if (uShape <= SHAPE_DOME) {
        if (uShape == SHAPE_DOME) {
            vec2 height = vec2(0.0);
            if (uOrient == ORIENT_VERTICAL) {
                p1 = vec2(min(a.x, b.x), b.y);
                p4 = vec2(max(a.x, b.x), b.y);
                height = vec2(0.0, a.y - b.y);

                if (uClampApex) {
                    if (p4.x > 0.0) {
                        p1.x = max(p1.x, -p4.x);
                    }
                    if (p1.x < uViewportSize.x) {
                        p4.x = min(p4.x, 2.0 * uViewportSize.x - p1.x);
                    }
                }

            } else {
                p1 = vec2(b.x, min(a.y, b.y));
                p4 = vec2(b.x, max(a.y, b.y));
                height = vec2(a.x - b.x, 0.0);

                if (uClampApex) {
                    if (p4.y > 0.0) {
                        p1.y = max(p1.y, -p4.y);
                    }
                    if (p1.y < uViewportSize.y) {
                        p4.y = min(p4.y, 2.0 * uViewportSize.y - p1.y);
                    }
                }
            }

            vec2 controlOffset = height / 0.75;

            p2 = p1 + controlOffset;
            p3 = p4 + controlOffset;

        } if (uShape == SHAPE_ARC) {
            p1 = a;
            p4 = b;

            vec2 chordVector = p4 - p1;
            vec2 unitChordVector = normalize(chordVector);
            vec2 chordNormal = vec2(-unitChordVector.y, unitChordVector.x);
            float chordLength = length(chordVector);

            if (chordLength > uMaxChordLength) {
                if (isInsideViewport(p1, 2.0)) {
                    chordLength = uMaxChordLength;
                    p4 = p1 + unitChordVector * uMaxChordLength;
                } else if (isInsideViewport(p4, 2.0)) {
                    chordLength = uMaxChordLength;
                    p1 = p4 - unitChordVector * uMaxChordLength;
                }
            }

            float height = max(
                chordLength / 2.0 * uArcHeightFactor,
                uMinArcHeight
            );

            // This is a bit poor approximation of a circular arc, but it's probably enough for most purposes.
            // TODO: Consider a more sophisticated approach: https://stackoverflow.com/a/44829356/1547896
            vec2 controlOffset = chordNormal * height / 0.75;

            p2 = p1 + controlOffset;
            p3 = p4 + controlOffset;
        }

    } else if (uShape == SHAPE_DIAGONAL) {
        if (uOrient == ORIENT_VERTICAL) {
            p1 = a;
            p2 = vec2(a.x, (a.y + b.y) / 2.0);
            p3 = vec2(b.x, (a.y + b.y) / 2.0);
            p4 = b;
        } else {
            p1 = a;
            p2 = vec2((a.x + b.x) / 2.0, a.y);
            p3 = vec2((a.x + b.x) / 2.0, b.y);
            p4 = b;
        }
    } else if (uShape == SHAPE_LINE) {
        p1 = a;
        p2 = (a + b) / 2.0;
        p3 = p2;
        p4 = b;
    }

    vec2 strip = vec2(
        float(gl_VertexID / 2) / float(uSegmentBreaks),
        float(gl_VertexID % 2) - 0.5
    );

    // Make segments shorter near the endpoints to make the tightly bent attachment points smoother
    float t = smoothstep(0.0, 1.0, strip.x);

    // https://stackoverflow.com/a/31317254/1547896
    vec2 C1 = p4 - 3.0 * p3 + 3.0 * p2 - p1;
    vec2 C2 = 3.0 * p3 - 6.0 * p2 + 3.0 * p1;
    vec2 C3 = 3.0 * p2 - 3.0 * p1;
    vec2 C4 = p1;

    vec2 p;
    // Skip computation at endpoints to maintain precision
    if (t == 0.0) {
        p = p1;
    } else if (t == 1.0) {
        p = p4;
    } else {
        p = C1*t*t*t + C2*t*t + C3*t + C4;
    }

    vec2 tangent = normalize(3.0*C1*t*t + 2.0*C2*t + C3);
    vec2 normal = vec2(-tangent.y, tangent.x);

    float size = getScaled_size();

    // Avoid artifacts in very thin lines by clamping the size and adjusting opacity respectively
    if (size < pixelSize) {
        opacity *= size / pixelSize;
        size = pixelSize;
    }

    // Handle minimum picking size or add an extra pixel to the stroke width to accommodate edge antialiasing
    float paddedSize = uPickingEnabled
        ? max(size, uMinPickingSize)
        : size + pixelSize;

    vNormalLengthInPixels = strip.y * paddedSize;
    
    if (uShape == SHAPE_ARC &&
        uArcFadingDistance[0] > 0.0 &&
        uArcFadingDistance[1] > 0.0 &&
        (!uNoFadingOnPointSelection || !isPointSelected()))
    {
        float d = distanceFromLine(p1, p4, p);
        float distanceOpacity = smoothstep(uArcFadingDistance[1], uArcFadingDistance[0], d);    

        // Fade out
        opacity *= distanceOpacity;

        // Collapse fully transparent triangles to skip fragment processing 
        if (distanceOpacity <= 0.0) {
            vNormalLengthInPixels = 0.0;
        }
    }

    // Extrude
    p += normal * vNormalLengthInPixels;

    gl_Position = pixelsToNdc(p);

    vec3 color = getScaled_color();

    vColor = vec4(color * opacity, opacity);

    vGamma = getGammaForColor(color);

    vSize = paddedSize;

    setupPicking();
}
`,Nk=`flat in vec4 vColor;
flat in float vSize;
in float vNormalLengthInPixels;
flat in float vGamma;

out lowp vec4 fragColor;

void main(void) {
    float dpr = uDevicePixelRatio;

    float distance = abs(vNormalLengthInPixels);
    float opacity = clamp(((vSize / 2.0 - distance) * dpr), 0.0, 1.0);

    opacity = pow(opacity, vGamma);

    fragColor = vColor * opacity;

    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
}
`,Mk=`layout(std140) uniform Mark {
    uniform float uArcHeightFactor;

    /** Make very small arcs visible */
    uniform float uMinArcHeight;

    /** The minimum stroke width in pixels when rendering into the picking buffer */
    uniform float uMinPickingSize;

    uniform int uShape;
    uniform int uOrient;
    uniform bool uClampApex;

    // In pixels
    uniform float uMaxChordLength;
    // In pixels
    uniform vec2 uArcFadingDistance;
    uniform bool uNoFadingOnPointSelection;

    uniform int uSegmentBreaks;

#pragma markUniforms
};
`,Tk=["arc","dome","diagonal","line"],Pk=["vertical","horizontal"];class Lk extends Hs{constructor(e){super(e),this.augmentDefaultProperties({x:0,x2:void 0,y:0,y2:void 0,size:1,color:"black",opacity:1,segments:101,arcHeightFactor:1,minArcHeight:1.5,minPickingSize:3,clampApex:!1,maxChordLength:5e4,arcFadingDistance:!1,noFadingOnPointSelection:!0,linkShape:"arc",orient:"vertical"}),this._baseInstanceExt=this.gl.getExtension("WEBGL_draw_instanced_base_vertex_base_instance")}get defaultHitTestMode(){return"endpoints"}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","size","color","opacity"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size"]}fixEncoding(e){return e.x2||(pt(e.x)?e.x2={datum:0}:e.x2=e.x),e.y2||(pt(e.y)?e.y2={datum:0}:e.y2=e.y),e}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(Rk,Nk,[Mk])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;this.registerMarkUniformValue("uArcFadingDistance",e.arcFadingDistance,n=>n||[0,0]),this.registerMarkUniformValue("uArcHeightFactor",e.arcHeightFactor),this.registerMarkUniformValue("uMinArcHeight",e.minArcHeight),this.registerMarkUniformValue("uMinPickingSize",e.minPickingSize),this.registerMarkUniformValue("uShape",e.linkShape,n=>Tk.indexOf(n)),this.registerMarkUniformValue("uOrient",e.orient,n=>Pk.indexOf(n)),this.registerMarkUniformValue("uClampApex",e.clampApex,n=>!!n),this.registerMarkUniformValue("uMaxChordLength",e.maxChordLength),this.registerMarkUniformValue("uSegmentBreaks",e.segments,n=>n),this.registerMarkUniformValue("uNoFadingOnPointSelection",e.noFadingOnPointSelection,n=>!!n)}updateGraphicsData(){const e=this.unitView.getCollector();if(!e){console.debug("No collector");return}const n=e.getItemCount(),i=new uk({encoders:this.encoders,attributes:this.getAttributes(),numItems:n});i.addBatches(e.facetBatches);const r=i.toArrays();this.rangeMap.migrateEntries(r.rangeMap),this.arrays=Object.fromEntries(Object.entries(r.arrays).map(([s,o])=>[s,{...o,data:void 0}])),this.updateBufferInfo(r)}prepareRender(e){const n=super.prepareRender(e);return n.push(()=>this.bindOrSetMarkUniformBlock()),this._baseInstanceExt?n.push(()=>oi(this.gl,this.programInfo,this.vertexArrayInfo)):n.push(()=>this.gl.bindVertexArray(null)),n}render(e){const n=this.gl,i=()=>(this.markUniformInfo.uniforms.uSegmentBreaks[0]+1)*2;return this._baseInstanceExt?this.createRenderCallback((r,s)=>{this._baseInstanceExt.drawArraysInstancedBaseInstanceWEBGL(n.TRIANGLE_STRIP,0,i(),s,r)},e):this.createRenderCallback((r,s)=>{for(const o of Object.entries(this.bufferInfo.attribs)){const[a,l]=o;l.buffer&&l.numComponents&&l.divisor&&(l.offset=r*this.arrays[a].numComponents*this.bytesPerElement.get(a))}oi(n,this.programInfo,this.bufferInfo),n.drawArraysInstanced(n.TRIANGLE_STRIP,0,i(),s)},e)}}const Ok=`in mediump vec2 vertexCoord;
in lowp vec2 textureCoord;

// Width of the text (all letters)
in float width;

out vec2 vTexCoord;
out float vEdgeFadeOpacity;
flat out vec4 vColor;
flat out float vSlope;
flat out float vGamma;

struct RangeResult {
    float pos;
    float scale;
};

float minValue(vec4 v) {
    return min(min(v.x, v.y), min(v.z, v.w));
}

float maxValue(vec4 v) {
    return max(max(v.x, v.y), max(v.z, v.w));
}

/**
 * All measures are in [0, 1]
 */
RangeResult positionInsideRange(float a, float b, float width, float padding,
                                int align, bool flush) {
    float span = b - a;
    float paddedWidth = width + 2.0 * padding;

    // Is the text clearly outside the viewport
    if (a > 1.0 || b < 0.0) {
        return RangeResult(0.0, 0.0);
    }

    // How much extra space we have for adjusting the position so that the
    // text stays inside the range.
    float extra = max(0.0, span - paddedWidth);

    float pos;

    // Align the text and try to keep it inside the range and the viewport
    if (align == 0) {
        float centre = a + b;

        if (flush) {
            float leftOver = max(0.0, paddedWidth - centre);
            centre += min(leftOver, extra);

            float rightOver = max(0.0, paddedWidth + centre - 2.0);
            centre -= min(rightOver, extra);
        }

        pos = centre / 2.0;

    } else if (align < 0) {
        float edge = a;

        if (flush) {
            float over = max(0.0, -edge);
            edge += min(over, extra);
        }

        pos = edge + padding;

    } else {
        float edge = b;

        if (flush) {
            float over = max(0.0, edge - 1.0);
            edge -= min(over, extra);
        }

		// TODO: If the text spans the whole viewport, try to keep it centered if possible.

        pos = edge - padding;
    }

    // How the text should be scaled to make it fit inside the range (if it didn't fit).
    float scale = clamp((span - padding) / paddedWidth, 0.0, 1.0);

    // TODO: Fix padding in scale factor. Padding should stay constant
    return RangeResult(pos, scale);
}

vec2 calculateRotatedDimensions(float width, mat2 rotationMatrix) {
    vec2 a = abs(rotationMatrix * vec2(width / 2.0, 0.5));
    vec2 b = abs(rotationMatrix * vec2(width / 2.0, -0.5));
    return vec2(max(a.x, b.x), max(a.y, b.y)) * 2.0;
}

/** Needed when using ranged text */
ivec2 fixAlignForAngle(ivec2 align, float angleInDegrees) {
    float a = mod(angleInDegrees + 45.0, 360.0);
    int x = align.x;
    int y = -align.y;

    // TODO: Optimize by avoiding branching
    if (a < 90.0) {
        return ivec2(x, y);
    } else if (a < 180.0) {
        return ivec2(y, -x);
    } else if (a < 270.0) {
        return ivec2(-x, y);
    } else {
        return ivec2(-y, x);
    }
}

void main(void) {
    float opacity = getScaled_opacity() * uViewOpacity;
    vec2 size = vec2(getScaled_size());
    float x = getScaled_x();
    float y = getScaled_y();

    float scale = 1.0;

	float angleInDegrees = getScaled_angle();
	float angle = -angleInDegrees * PI / 180.0;
	
    float sinTheta = sin(angle);
    float cosTheta = cos(angle);
    mat2 rotationMatrix = mat2(cosTheta, sinTheta, -sinTheta, cosTheta);

    vec2 flushSize = calculateRotatedDimensions(width, rotationMatrix);

#if defined(x2_DEFINED) || defined(y2_DEFINED)
    ivec2 align = fixAlignForAngle(uAlign, angleInDegrees);
#else
    ivec2 align = uAlign;
#endif

#ifdef x2_DEFINED
    float x2 = getScaled_x2();

    if (uLogoLetter) {
        size.x = (x2 - x) * uViewportSize.x;
        x += (x2 - x) / 2.0;

    } else {
        float x2 = getScaled_x2();
        RangeResult result = positionInsideRange(
            min(x, x2), max(x, x2),
            size.x * scale * flushSize.x / uViewportSize.x, uPaddingX / uViewportSize.x,
            align.x, uFlushX);
        
        x = result.pos;
        scale *= result.scale;
    }
#endif

    // Position of the text origo 
    vec2 pos = applySampleFacet(vec2(x, y));

#ifdef y2_DEFINED
    float y2 = getScaled_y2();
    vec2 pos2 = applySampleFacet(vec2(x, y2));

    if (uLogoLetter) {
        size.y = (pos2.y - pos.y) * uViewportSize.y;
        pos.y += (pos2.y - pos.y) / 2.0;

    } else {
        RangeResult result = positionInsideRange(
            min(pos.y, pos2.y), max(pos.y, pos2.y),
            size.y * scale * flushSize.y / uViewportSize.y, uPaddingY / uViewportSize.y,
            align.y, uFlushY);
        
        pos.y = result.pos;
        scale *= result.scale;
    }
#endif

    if (scale < 1.0) {
        if (uSqueeze) {
            vec2 scaleFadeExtent = vec2(3.0, 6.0) / size;

            if (scale  < scaleFadeExtent[0]) {
                gl_Position = vec4(0.0);
                return;
            }

            size *= scale;
            opacity *= linearstep(scaleFadeExtent[0], scaleFadeExtent[1], scale);

        } else if (scale < 1.0) {
            // Eliminate the text
            gl_Position = vec4(0.0);
            return;
        }
    }

    // Position of the character vertex in relation to the text origo
    vec2 charPos = rotationMatrix * (vertexCoord * size + uD);

    // Position of the character vertex inside the unit viewport
    vec2 unitPos = pos + charPos / uViewportSize;

    gl_Position = unitToNdc(unitPos);

    // Controls antialiasing of the SDF
    vSlope = max(1.0, min(size.x, size.y) / uSdfNumerator * uDevicePixelRatio);

    vec3 color = getScaled_color();

    // Premultiply alpha
    vColor = vec4(color * opacity, opacity);

    // Do something like gamma correction for text when the color is close to black or white.
    vGamma = getGammaForColor(color);

    vTexCoord = textureCoord;

    // Edge fading. The implementation is simplistic and fails with primitives that
    // span the whole viewport. However, it works just fine with reasonable font sizes.
    // x: top, y: right, z: bottom, w: left
    if (maxValue(uViewportEdgeFadeDistance) > -pow(10.0, 10.0)) { // -Infinity would be nice
        vEdgeFadeOpacity = minValue(
            ((vec4(1.0, 1.0, 0.0, 0.0) + vec4(-1.0, -1.0, 1.0, 1.0) * unitPos.yxyx) *
                uViewportSize.yxyx - uViewportEdgeFadeDistance) / uViewportEdgeFadeWidth);
    } else {
        vEdgeFadeOpacity = 1.0;
    }

    setupPicking();
}
`,Uk=`uniform sampler2D uTexture;

in vec2 vTexCoord;
in float vEdgeFadeOpacity;
flat in vec4 vColor;
flat in float vSlope;
flat in float vGamma;

out lowp vec4 fragColor;

float median(float r, float g, float b) {
    return max(min(r, g), min(max(r, g), b));
}

float getDist(vec2 uv) {
    vec3 c = texture(uTexture, uv).rgb;
    return 1.0 - median(c.r, c.g, c.b);
}

/**
 * Calculates the super-sampled distance to the edge.
 * This is used to avoid aliasing when rendering small text,
 * as mip-mapping cannot be used here.
 * The distance is averaged over a grid of n x n samples.
 */
float getSuperDist(vec2 uv) {
    vec2 dx = dFdx(uv);
    vec2 dy = dFdy(uv);

    float n = 2.0;

    float sum = 0.0;
    for (float x = 0.5; x < n; x++){
        for (float y = 0.5; y < n; y++) {
            sum += getDist(
                uv +
                x / n * dx +
                y / n * dy
            ); 
        }
    }

    return sum / (n * n);
}

void main() {
    float sigDist = getSuperDist(vTexCoord);

    float slope = vSlope;
    if (uLogoLetter) {
        // Using screen-space derivatives for logo letters because skewed aspect ratios
        // result in blurry edges otherwise. However, use of screen-space derivatives
        // results in crappy looking text with regular letters text.
        slope = 0.7 / length(vec2(dFdy(sigDist), dFdx(sigDist)));
    }

    float opa = clamp((sigDist - 0.5) * slope + 0.5, 0.0, 1.0);
    opa *= clamp(vEdgeFadeOpacity, 0.0, 1.0);

    opa = pow(opa, vGamma);

    fragColor = vColor * opa;

    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
}
`,_k=`layout(std140) uniform Mark {
    uniform mediump float uSdfNumerator;

    uniform mediump vec2 uD; // dx & dy

    uniform mediump vec4 uViewportEdgeFadeWidth;
    uniform mediump vec4 uViewportEdgeFadeDistance;
        
    uniform bool uSqueeze;
    uniform bool uLogoLetter;

    // x: -1, 0, 1 = left, center, right
    // y: -1, 0, 1 = top, middle, bottom 
    uniform lowp ivec2 uAlign;

    uniform mediump float uPaddingX;
    uniform bool uFlushX;
    uniform mediump float uPaddingY;
    uniform bool uFlushY;

#pragma markUniforms
};
`,Gk={left:-1,center:0,right:1},zk={top:-1,middle:0,bottom:1,alphabetic:1};class Hk extends Hs{constructor(e){super(e),this.augmentDefaultProperties({x:.5,y:.5,x2:void 0,y2:void 0,text:"",size:11,color:"black",opacity:1,font:void 0,fontStyle:void 0,fontWeight:void 0,align:"center",baseline:"middle",dx:0,dy:0,angle:0,fitToBand:!1,squeeze:!0,paddingX:0,paddingY:0,flushX:!0,flushY:!0,logoLetters:!1,viewportEdgeFadeWidthTop:0,viewportEdgeFadeWidthRight:0,viewportEdgeFadeWidthBottom:0,viewportEdgeFadeWidthLeft:0,viewportEdgeFadeDistanceTop:-1/0,viewportEdgeFadeDistanceRight:-1/0,viewportEdgeFadeDistanceBottom:-1/0,viewportEdgeFadeDistanceLeft:-1/0}),this.font=this.properties.font?e.context.fontManager.getFont(this.properties.font,this.properties.fontStyle,this.properties.fontWeight):e.context.fontManager.getDefaultFont(),this.setupExprRefsNeedingGraphicsUpdate(["text","fitToBand","logoLetters"])}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","color","size","opacity","angle"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size","text","angle"]}fixEncoding(e){for(const n of ni)this.properties.fitToBand&&pf(e,n);return e}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(Ok,Uk,[_k])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties,n=this.font.metrics.common.base*.35*(this.properties.logoLetters?.5:1);this.registerMarkUniformValue("uPaddingX",e.paddingX),this.registerMarkUniformValue("uPaddingY",e.paddingY),this.registerMarkUniformValue("uFlushX",e.flushX,i=>!!i),this.registerMarkUniformValue("uFlushY",e.flushY,i=>!!i),this.registerMarkUniformValue("uSqueeze",e.squeeze,i=>!!i),Bs(this.markUniformInfo,{uAlign:[Gk[e.align],zk[e.baseline]],uD:[e.dx,-e.dy],uLogoLetter:!!e.logoLetters,uSdfNumerator:n,uViewportEdgeFadeWidth:[e.viewportEdgeFadeWidthTop,e.viewportEdgeFadeWidthRight,e.viewportEdgeFadeWidthBottom,e.viewportEdgeFadeWidthLeft],uViewportEdgeFadeDistance:[e.viewportEdgeFadeDistanceTop,e.viewportEdgeFadeDistanceRight,e.viewportEdgeFadeDistanceBottom,e.viewportEdgeFadeDistanceLeft]})}updateGraphicsData(){const e=this.unitView.getCollector();if(!e){console.debug("No collector");return}const n=e.getData(),i=this.encoding,r=this.encoders.text;let s=0;const o="format"in i.text?ze(i.text.format):c=>c;for(const c of n){const u=o(r(c)),f=le(u)?u:u===null?"":""+u;s+=f&&f.length||0}const a=new fk({encoders:this.encoders,attributes:this.getAttributes(),properties:this.properties,fontMetrics:this.font.metrics,numCharacters:Math.max(s,this.properties.minBufferSize||1024)});a.addBatches(e.facetBatches);const l=a.toArrays();this.rangeMap.migrateEntries(l.rangeMap),this.updateBufferInfo(l)}prepareRender(e){const n=super.prepareRender(e);return n.push(()=>{si(this.programInfo,{uTexture:this.font.texture})}),n.push(()=>this.bindOrSetMarkUniformBlock()),n.push(()=>oi(this.gl,this.programInfo,this.vertexArrayInfo)),n}render(e){const n=this.gl;return this.createRenderCallback((i,r)=>Qa(n,this.vertexArrayInfo,n.TRIANGLES,r,i),e)}}const hm=1;function mf(){let t=[0,1],e=[0,1],n=1,i=1,r=0,s=0,o=.5,a=0;const c=u=>(u+o-t[0])/n*i+e[0];return c.invert=u=>(u-e[0])/i*n+t[0]-o,c.domain=function(u){if(arguments.length){t=Mx(u),n=t[1]-t[0];const f=t[0]===0&&t[0]===0;if(n<hm&&!f){n=hm;const h=(t[0]+t[1])/2;t[0]=h-n/2,t[1]=h+n/2}return c}else return t.slice()},c.range=function(u){return arguments.length?(e=[...u],i=e[1]-e[0],c):e},c.numberingOffset=function(u){return arguments.length?(a=u,c):a},c.padding=function(u){return arguments.length?(s=u,r=Math.min(1,u),c):r},c.paddingInner=function(u){return arguments.length?(r=Math.min(1,u),c):r},c.paddingOuter=function(u){return arguments.length?(s=u,c):s},c.align=function(u){return arguments.length?(o=Math.max(0,Math.min(1,u)),c):o},c.step=()=>i/n,c.bandwidth=()=>c.step(),c.ticks=u=>{const f=c.align(),h=c.numberingOffset();return Go(t[0]-f+h,t[1]-f+h,Math.min(u,Math.ceil(n))).filter(Number.isInteger).map(A=>A-a)},c.tickFormat=(u,f)=>{if(f)throw new Error("Index scale's tickFormat does not support a specifier!");const A=Zn(t[0],t[1],Math.min(u,Math.ceil(n)))<1e5?ze(","):ze(".3s");return d=>A(d+a)},c.copy=()=>mf().domain(t).range(e).paddingInner(r).paddingOuter(s).numberingOffset(a),c}const wf=ze(",d");function Yk(t){return t.chrom+":"+wf(Math.floor(t.pos+1))}function Vk(t,e){return t.chrom+":"+wf(Math.floor(t.pos+1))+"-"+(t.chrom!=e.chrom?e.chrom+":":"")+wf(Math.ceil(e.pos))}const dm={dm6:`chr3R	32079331
chr3L	28110227
chr2R	25286936
chrX	23542271
chr2L	23513712
chrY	3667352
chr4	1348131
chrM	19524`,hg18:`chr1	247249719
chr2	242951149
chr3	199501827
chr4	191273063
chr5	180857866
chr6	170899992
chr7	158821424
chr8	146274826
chr9	140273252
chr10	135374737
chr11	134452384
chr12	132349534
chr13	114142980
chr14	106368585
chr15	100338915
chr16	88827254
chr17	78774742
chr18	76117153
chr19	63811651
chr20	62435964
chr21	46944323
chr22	49691432
chrX	154913754
chrY	57772954
chrM	16571`,hg19:`chr1	249250621
chr2	243199373
chr3	198022430
chr4	191154276
chr5	180915260
chr6	171115067
chr7	159138663
chr8	146364022
chr9	141213431
chr10	135534747
chr11	135006516
chr12	133851895
chr13	115169878
chr14	107349540
chr15	102531392
chr16	90354753
chr17	81195210
chr18	78077248
chr19	59128983
chr20	63025520
chr21	48129895
chr22	51304566
chrX	155270560
chrY	59373566
chrM	16571`,hg38:`chr1	248956422
chr2	242193529
chr3	198295559
chr4	190214555
chr5	181538259
chr6	170805979
chr7	159345973
chr8	145138636
chr9	138394717
chr10	133797422
chr11	135086622
chr12	133275309
chr13	114364328
chr14	107043718
chr15	101991189
chr16	90338345
chr17	83257441
chr18	80373285
chr19	58617616
chr20	64444167
chr21	46709983
chr22	50818468
chrX	156040895
chrY	57227415
chrM	16569`,mm9:`chr1	197195432
chr2	181748087
chr3	159599783
chr4	155630120
chr5	152537259
chr6	149517037
chr7	152524553
chr8	131738871
chr9	124076172
chr10	129993255
chr11	121843856
chr12	121257530
chr13	120284312
chr14	125194864
chr15	103494974
chr16	98319150
chr17	95272651
chr18	90772031
chr19	61342430
chrX	166650296
chrY	15902555
chrM	16299`,mm10:`chr1	195471971
chr2	182113224
chr3	160039680
chr4	156508116
chr5	151834684
chr6	149736546
chr7	145441459
chr8	129401213
chr9	124595110
chr10	130694993
chr11	122082543
chr12	120129022
chr13	120421639
chr14	124902244
chr15	104043685
chr16	98207768
chr17	94987271
chr18	90702639
chr19	61431566
chrX	171031299
chrY	91744698
chrM	16299`};function Jk(t){if(!(t in dm))throw new Error(`Unknown assembly: ${t}`);return dm[t].split(`
`).map(e=>{const n=e.split("	");return{name:n[0],size:parseInt(n[1])}})}const qk=/^([A-Za-z]+:)?\/\//;function gi(t,e){if(e&&qk.test(e))return e;const n=typeof t=="function"?t():t;if(!n)return e;if(!e)return n;if(/[#?]/.test(n))throw new Error(`Cannot append to a url with query or hash. Append: ${e}, base: ${n}`);return gm(n)+e}function gm(t){const e=t.replace(/[^/]*$/,"");return e===""?void 0:e.endsWith("://")?t+"/":e}class Kk{constructor(e){if(this.config={name:"custom",...e},"baseUrl"in e)throw new Error("The `baseUrl` property in genome config has been removed in GenomeSpy v0.52.0. Use `url` instead. See https://genomespy.app/docs/genomic-data/genomic-coordinates/.");if(!yf(e))throw new Error("Not a genome configuration: "+JSON.stringify(e));if(this.chromosomes=[],this.cumulativeChromPositions=new Map,this.chromosomesByName=new Map,this.startByIndex=[],this.totalSize=0,mm(this.config))this.setChromSizes(this.config.contigs);else if(!Cf(this.config)){const n=Jk(this.config.name);if(n)this.setChromSizes(n);else throw new Error(`Unknown genome: ${this.config.name}. Please provide contigs or a URL. See https://genomespy.app/docs/genomic-data/genomic-coordinates/.`)}}get name(){return this.config.name}async load(e){if(Cf(this.config))try{const n=gi(e,this.config.url),i=await fetch(n);if(!i.ok)throw new Error(`${i.status} ${i.statusText}`);this.setChromSizes(jk(await i.text()))}catch(n){throw new Error(`Could not load chrom sizes: ${this.config.url}. Reason: ${n.message}`)}}hasChrPrefix(){return this.chromosomes.some(e=>e.name.startsWith("chr"))}setChromSizes(e){let n=0;this.startByIndex=[0];for(let i=0;i<e.length;i++){this.startByIndex.push(n);const r=e[i].size,s={...e[i],continuousStart:n,continuousEnd:n+r,continuousInterval:[n,n+r],index:i,number:i+1,odd:!(i&1)};this.chromosomes.push(s);const o=s.name.replace(/^chr/i,"");for(const a of["chr"+o,"CHR"+o,"Chr"+o,s.number,""+s.number,o,s.name])this.cumulativeChromPositions.set(a,n),this.chromosomesByName.set(a,s);n+=s.size}this.totalSize=n}getExtent(){return[0,this.totalSize]}toContinuous(e,n){let i=this.cumulativeChromPositions.get(e);if(i===void 0)throw new Error("Unknown chromosome/contig: "+e);return i+ +n}toChromosome(e){if(e>this.totalSize)return;e=Math.floor(e);const n=wn(this.startByIndex,e)-1;if(n>0&&n<=this.chromosomes.length)return this.chromosomes[n-1]}toChromosomal(e){const n=this.toChromosome(e);if(n)return{chrom:n.name,pos:Math.floor(e)-n.continuousStart}}getChromosome(e){return this.chromosomesByName.get(e)}formatInterval(e){return Vk(...this.toChromosomalInterval(e))}formatLocus(e){const n=this.toChromosomal(e);if(n)return Yk(n)}toChromosomalInterval(e){const n=this.toChromosomal(e[0]+.5),i=this.toChromosomal(e[1]-.5);return i.pos+=1,[n,i]}toContinuousInterval(e){let[n,i]=e;return i||(i=n),[this.toContinuous(n.chrom,n.pos??0),this.toContinuous(i.chrom,i.pos??this.chromosomesByName.get(i.chrom)?.size)]}toDiscreteChromosomeIntervals(e){const n=e[0],i=e[1],r=[];if(n.chrom===i.chrom)r.push({chrom:n.chrom,startPos:n.pos,endPos:i.pos});else{const s=this.chromosomes.findIndex(a=>a.name===n.chrom),o=this.chromosomes.findIndex(a=>a.name===i.chrom);r.push({chrom:n.chrom,startPos:n.pos,endPos:this.chromosomes[s].size});for(let a=s+1;a<o;a++)r.push({chrom:this.chromosomes[a].name,startPos:0,endPos:this.chromosomes[a].size});r.push({chrom:i.chrom,startPos:0,endPos:i.pos})}return r}continuousToDiscreteChromosomeIntervals(e){return this.toDiscreteChromosomeIntervals([this.toChromosomal(e[0]),this.toChromosomal(e[1])])}parseInterval(e){const n=e.match(/^(chr[0-9A-Z]+)(?::([0-9,]+)(?:-(?:(chr[0-9A-Z]+):)?([0-9,]+))?)?$/);if(n){const i=n[1];if(n.slice(2).every(a=>a===void 0)){const a=this.getChromosome(i);return a?[a.continuousStart,a.continuousEnd]:void 0}const r=n[3]||i,s=parseInt(n[2].replace(/,/g,"")),o=n[4]!==void 0?parseInt(n[4].replace(/,/g,"")):s;return[this.toContinuous(i,s-1),this.toContinuous(r,o)]}}}function jk(t){return Cx(t).map(([e,n])=>({name:e,size:parseInt(n)}))}function pm(t){return Ge(t)&&"chrom"in t}function Wk(t){return t.every(pm)}function yf(t){return Ge(t)&&("name"in t||Cf(t)||mm(t))}function Cf(t){return yf(t)&&"url"in t}function mm(t){return yf(t)&&"contigs"in t}function Xk(){const t=mf().numberingOffset(1);let e;t.genome=function(i){return arguments.length?(e=i,t):e},t.ticks=i=>{if(!e)return[];const r=t.domain(),s=t.numberingOffset(),[o,a]=[Math.max(r[0],0),Math.min(r[1],e.totalSize-1)].map(u=>e.toChromosome(u)),l=Math.max(1,Zn(r[0],r[1],i)),c=[];for(let u=o.index;u<=a.index;u++){const f=e.chromosomes[u],h=Math.max(f.continuousStart+l,r[0]-(r[0]-f.continuousStart)%l),A=Math.min(f.continuousEnd-l/4,r[1]+1);for(let d=h;d<=A;d+=l){const g=d-s;g>=r[0]&&g<r[1]&&c.push(g)}}return c},t.tickFormat=(i,r)=>{if(!e)return;if(r)throw new Error("Locus scale's tickFormat does not support a specifier!");const s=t.domain(),o=s[1]-s[0],a=t.numberingOffset(),c=Zn(s[0],s[1],Math.min(i,Math.ceil(o)))<1e6?ze(","):ze(".3s"),u=f=>f-e.toChromosome(f).continuousStart;return f=>c(u(f)+a)};const n=t.copy;return t.copy=()=>{const i=n();let r=e;return i.genome=function(s){return arguments.length?(r=s,i):r},i.genome(e)},t}function Zk(t){return t.type=="locus"}function $k(t,e){const n=Ys(t);return n?n.toChromosomal(e):e}function e8(t,e){const n=Ys(t);return n&&pm(e)?n.toContinuous(e.chrom,e.pos):e}function t8(t,e){const n=Ys(t);return n&&Wk(e)?n.toContinuousInterval(e):e}function n8(t,e){const n=Ys(t);return n?n.toChromosomalInterval(e):e}function i8(t){const e=Ys(t);if(!e)throw new Error("No genome has been defined!");return e.getExtent()}function Ys(t){if(t&&"toChromosomal"in t)return t;if(t&&"genome"in t)return t.genome()}function wm(t,e,n){return Ve(e)&&n!=null&&(e=Math.min(e,~~(Hr(t.domain())/n)||1)),Ge(e)&&(e.step,e=e.interval),e}function ym(t,e,n){var i=t.range(),r=Math.floor(i[0]),s=Math.ceil(xt(i));if(r>s&&(i=s,s=r,r=i),e=e.filter(function(a){return a=t(a),r<=a&&a<=s}),n>0&&e.length>1){for(var o=[e[0],xt(e)];e.length>n&&e.length>=3;)e=e.filter(function(a,l){return!(l%2)});e.length<3&&(e=o)}return e}function r8(t,e){return t.bins?ym(t,s8(t.bins,e)):t.ticks?t.ticks(e):t.domain()}function s8(t,e){var n=t.length,i=~~(n/(e||n));return i<2?t.slice():t.filter(function(r,s){return!(s%i)})}function o8(t,e,n){var i=t.tickFormat?t.tickFormat(e,n):n?ze(n):String;if(_p(t.type)){var r=c8(n);i=t.bins?r:a8(i,r)}return i}function a8(t,e){return function(n){return t(n)?e(n):""}}function c8(t){var e=Oi(t||",");if(e.precision==null){switch(e.precision=12,e.type){case"%":e.precision-=2;break;case"e":e.precision-=1;break}return l8(ze(e),ze(".1f")(1)[1])}else return ze(e)}function l8(t,e){return function(n){var i=t(n),r=i.indexOf(e),s,o;if(r<0)return i;for(s=u8(i,r),o=s<i.length?i.slice(s):"";--s>r;)if(i[s]!=="0"){++s;break}return i.slice(0,s)+o}}function u8(t,e){var n=t.lastIndexOf("e"),i;if(n>0)return n;for(n=t.length;--n>e;)if(i=t.charCodeAt(n),i>=48&&i<=57)return n+1}const f8="locus",A8="index";var h8=5;function d8(t){const e=t.type;return!t.bins&&(e===or||e===Fs||e===Rs)}function Cm(t){return Pe(t)&&![Gt,A8,f8].includes(t)}function Em(t){return t||{warn:(e,...n)=>console.warn(e,...n)}}var g8=Mo(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma","zoom","fp64","name"]);function bm(t,e,n){n=Em(n);for(const r in t)if(!g8[r]){if(r==="padding"&&Cm(e.type))continue;ht(e[r])?e[r](t[r]):n.warn("Unsupported scale property: "+r)}const i=xm(e,t,n);i.domain&&e.domain(i.domain),i.applyOrdinalUnknown&&e.unknown(i.ordinalUnknown),x8(e,t,b8(e,t,i.count))}function p8(t,e){const n=m8(t),i=ie(n);if(!i)throw new Error("Unknown scale type: "+n);const r=i();return!t.domain&&Pe(r.type)&&(t.domain=[0,0]),bm(t,r,e),r}function m8(t){var e=t.type,n="",i;return e===Gt?Gt+"-"+or:(w8(t)&&(i=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(t.domainMid!=null):0,n=i===2?Gt+"-":i===3?ar+"-":""),(n+e||or).toLowerCase())}function w8(t){const e=t.type;return Pe(e)&&e!==Rp&&e!==Np&&(t.scheme||t.range&&t.range.length&&t.range.every(le))}function y8(t){if(!t.copy)return t;const e=t.copy();return e.type==null&&t.type!=null&&(e.type=t.type),e}function xm(t,e,n){if(!t.domain)return{domain:null,count:0,ordinalUnknown:void 0,applyOrdinalUnknown:!1};n=Em(n);const i=y8(t);var r=C8(i,e.domainRaw,n);if(r>-1)return{domain:i.domain(),count:r,ordinalUnknown:i.type===Ns&&e.domainImplicit?Fa:void 0,applyOrdinalUnknown:!1};var s=e.domain,o=i.type,a=e.zero||e.zero===void 0&&d8(i),l,c;return s?(Cm(o)&&e.padding&&s[0]!==xt(s)&&(s=E8(o,s,e.range,e.padding,e.exponent,e.constant)),(a||e.domainMin!=null||e.domainMax!=null||e.domainMid!=null)&&(l=(s=s.slice()).length-1||1,a&&(s[0]>0&&(s[0]=0),s[l]<0&&(s[l]=0)),e.domainMin!=null&&(s[0]=e.domainMin),e.domainMax!=null&&(s[l]=e.domainMax),e.domainMid!=null&&(c=e.domainMid,(c<s[0]||c>s[l])&&n.warn("Scale domainMid exceeds domain min or max.",c),s.splice(l,0,c))),i.domain(Im(o,s,n)),e.nice&&i.nice&&i.nice(e.nice!==!0&&wm(i,e.nice)||null),{domain:i.domain(),count:s.length,ordinalUnknown:o===Ns&&e.domainImplicit?Fa:void 0,applyOrdinalUnknown:o===Ns}):{domain:null,count:0,ordinalUnknown:void 0,applyOrdinalUnknown:!1}}function C8(t,e,n){return e?(t.domain(Im(t.type,e,n)),e.length):-1}function E8(t,e,n,i,r,s){n??=[0,1];var o=Math.abs(xt(n)-n[0]),a=o/(o-2*i),l=t===Mn?Ch(e,null,a):t===Rs?il(e,null,a,.5):t===Fs?il(e,null,a,r||1):t===Ya?Mb(e,null,a,s||1):yh(e,null,a);return e=e.slice(),e[0]=l[0],e[e.length-1]=l[1],e}function Im(t,e,n){if(_p(t)){var i=Math.abs(e.reduce(function(r,s){return r+(s<0?-1:s>0?1:0)},0));i!==e.length&&n.warn("Log scale domain includes zero: "+sl(e))}return e}function b8(t,e,n){let i=e.bins;if(i&&!Ee(i)){const r=(i.start==null||i.stop==null)&&t.domain(),s=i.start==null?r[0]:i.start,o=i.stop==null?xt(r):i.stop,a=i.step;a||xe("Scale bins parameter missing step property."),i=es(s,o+a,a)}return i?t.bins=i:t.bins&&delete t.bins,t.type===of&&(i?!e.domain&&!e.domainRaw&&(t.domain(i),n=i.length):t.bins=t.domain()),n}function x8(t,e,n){var i=t.type,r=e.round||!1,s=e.range;if(e.rangeStep!=null)s=I8(i,e,n);else if(e.scheme&&(s=B8(i,e,n),ht(s))){if(t.interpolator)return t.interpolator(s);xe(`Scale type ${i} does not support interpolating color schemes.`)}if(s&&Ja(i))return t.interpolator(qa(Ef(s,e.reverse),e.interpolate,e.interpolateGamma));s&&e.interpolate&&t.interpolate?t.interpolate(Gp(e.interpolate,e.interpolateGamma)):ht(t.round)?t.round(r):ht(t.rangeRound)&&t.interpolate(r?Qs:Rn),s&&t.range(Ef(s,e.reverse))}function I8(t,e,n){t!==Pp&&t!==sf&&xe("Only band and point scales support rangeStep.");var i=(e.paddingOuter!=null?e.paddingOuter:e.padding)||0,r=t===sf?1:(e.paddingInner!=null?e.paddingInner:e.padding)||0;return[0,e.rangeStep*nf(n,r,i)]}function B8(t,e,n){var i=e.schemeExtent,r,s;return Ee(e.scheme)?s=qa(e.scheme,e.interpolate,e.interpolateGamma):(r=e.scheme.toLowerCase(),s=cf(r),s||xe(`Unrecognized scheme name: ${e.scheme}`)),n=t===Tp?n+1:t===of?n-1:t===rf||t===Mp?+e.schemeCount||h8:n,Ja(t)?Bm(s,i,e.reverse):ht(s)?I3(Bm(s,i),n):t===Ns?s:s.slice(0,n)}function Bm(t,e,n){return ht(t)&&(e||n)?x3(t,Ef(e||[0,1],n)):t}function Ef(t,e){return e?t.slice().reverse():t}class v8{#e;#t=new Set;#n;#i;#s;#o;#r=0;constructor({getParamRuntime:e,onRangeChange:n,onDomainChange:i,getGenomeStore:r}){this.#n=e,this.#i=n,this.#s=i,this.#o=r}get scale(){return this.#e}getLocusGenome(){const n=this.#o?.()?.getGenome();if(!n)throw new Error("No genome has been defined!");return n}createScale(e){const n=p8({...this.#c(e),range:void 0});return n.props=e,"unknown"in n&&n.unknown(null),this.#e=n,this.#a(e),this.#l(),this.#u(),this.#e}#a(e){const n=this.#e;if(!n||!Zk(n))return;const r=this.#o?.()?.getGenome(e.assembly);if(!r)throw new Error("No genome has been defined!");n.genome(r)}reconfigureScale(e){const n=this.#e;!n||n.type=="null"||(bm({...this.#c(e),range:void 0},n),n.props=e,this.#l())}withDomainNotificationsSuppressed(e){this.#r+=1;try{e()}finally{this.#r-=1}}#c(e){const n=e,{assembly:i,domainIndexer:r,...s}=n;return s}#l(){const e=this.#e;if(!e)return;const n=e.props;this.#t.forEach(s=>s.invalidate()),this.#t.clear();const i=D8({range:n.range,reverse:n.reverse,createExpression:s=>this.#n().createExpression(s),registerExpr:s=>this.#t.add(s)});if(!i)return;if("values"in i){e.range(i.values);return}const r=()=>e.range(i.evaluate());i.setup(r),r()}#u(){const e=this.#e;if(!e)return;const n=e.range,i=e.domain,r=()=>this.#i?.();S8(e,{onRangeChange:r,onDomainChange:()=>{this.#r>0||this.#s?.()},range:n,domain:i}),r()}dispose(){this.#t.forEach(e=>e.invalidate()),this.#t.clear()}}function S8(t,{onRangeChange:e,onDomainChange:n,range:i,domain:r}){typeof i=="function"&&(t.range=(function(s){if(arguments.length)i(s),e?.();else return i()})),typeof r=="function"&&(t.domain=(function(s){if(arguments.length)r(s),n?.();else return r()}))}function D8({range:t,reverse:e,createExpression:n,registerExpr:i}){if(!t||!Ee(t))return null;const r=(s,o)=>o?s.slice().reverse():s;if(t.some(be)){let s;return{dynamic:!0,evaluate:()=>r(s.map(l=>l()),e),setup:l=>{s=t.map(c=>{if(be(c)){const u=n(c.expr);return u.subscribe(l),i(u),()=>u(null)}return()=>c})}}}return{dynamic:!1,values:r(t,e)}}function Za(t,e,n){if(n=n||[],t.some(o=>o===null)){if(t.every(o=>o===null))return null;throw console.warn(t),new Error("Cannot merge objects with nulls!")}const i={},r=(o,a)=>o===a||ur(o)&&ur(a)||ur(o)&&a===!0||o===!0&&Ge(a)||Array.isArray(o)&&Array.isArray(a)&&o.length===a.length&&o.every((l,c)=>l===a[c]),s=o=>{for(let a in o){const l=o[a];if(!n.includes(a)&&l!==void 0)if(i[a]!==void 0&&!r(i[a],l))console.warn(`Conflicting property ${a} of ${e}: (${JSON.stringify(i[a])} and ${JSON.stringify(o[a])}). Using ${JSON.stringify(i[a])}.`);else{const c=i[a];if(ur(c))ur(l)&&(i[a]=Za([c,l],a));else if(ur(l)){if(!(c===!0||c===void 0))throw new Error("Bug in merge! Target is: "+c);i[a]=Za([{},l],a)}else i[a]=l}}};for(const o of t)s(o);return i}function ur(t){return Ge(t)&&!Array.isArray(t)}const vm="quantitative",Sm="ordinal",Dm="nominal",Vs="locus",Qm="index";function Q8(t,e,n){const i={};return n&&(i.zero=!1),ms(t)?i.nice=!n:bn(t)?i.scheme=e==Dm?"tableau10":e==Sm?"blues":"viridis":sa(t)?i.range=t=="shape"?["circle","square","triangle-up","cross","diamond"]:[]:t=="size"?i.range=[0,400]:t=="angle"&&(i.range=[0,360]),i}function k8(t,e){if(e==Qm||e==Vs){if(_l(t))return e;throw new Error(t+" does not support "+e+" data type. Only positional channels do.")}const n={x:["band","band","linear"],y:["band","band","linear"],size:[void 0,"point","linear"],opacity:[void 0,"point","linear"],fillOpacity:[void 0,"point","linear"],strokeOpacity:[void 0,"point","linear"],color:["ordinal","ordinal","linear"],fill:["ordinal","ordinal","linear"],stroke:["ordinal","ordinal","linear"],strokeWidth:[void 0,void 0,"linear"],shape:["ordinal","ordinal",void 0],dx:[void 0,void 0,"null"],dy:[void 0,void 0,"null"],angle:[void 0,void 0,"linear"],sample:["null",void 0,void 0]},r=["sample"].includes(t)?"null":n[t]?n[t][[Dm,Sm,vm].indexOf(e)]:e==vm?"linear":"ordinal";if(r===void 0)throw new Error('Channel "'+t+'" is not compatible with "'+e+'" data type. Use of a proper scale may be needed.');return r}function F8(t,e){ms(e)&&t.type!=="ordinal"&&(t.range=[0,1]),e=="opacity"&&Pe(t.type)&&(t.clamp=!0)}function R8({channel:t,dataType:e,members:n,isExplicitDomain:i}){const r=Array.from(n).map(a=>a.channelDef.scale).filter(a=>a!==void 0),s=Za(r,"scale",["domain"]);if(s===null||s.type=="null")return{type:"null"};const o={...Q8(t,e,i),...s};return o.type||(o.type=k8(t,e)),t=="y"&&sn(o.type)&&o.reverse==null&&(o.reverse=!0),o.range&&o.scheme&&delete o.scheme,!("zoom"in o)&&[Qm,Vs].includes(o.type)&&(o.zoom=!0),F8(o,t),o}class Js extends Array{constructor(){super(),this.type=void 0}extend(e){return this}extendAll(e){if(e instanceof Js&&e.type!=this.type)throw new Error(`Cannot combine different types of domains: ${this.type} and ${e.type}`);for(const n of e)this.extend(n);return this}extendAllWithAccessor(e,n){for(const i of e)this.extend(n(i));return this}}class bf extends Js{constructor(){super(),this.type="quantitative"}extend(e){return e==null||Number.isNaN(e)?this:(e=+e,this.length?e<this[0]?this[0]=e:e>this[1]&&(this[1]=e):(this.push(e),this.push(e)),this)}}class km extends Js{constructor(){super(),this.type="ordinal",this.uniqueValues=new Set}extend(e){return e==null||Number.isNaN(e)?this:(this.uniqueValues.has(e)||(this.uniqueValues.add(e),this.push(e)),this)}}class xf extends km{constructor(){super(),this.type="nominal"}}class N8 extends Js{constructor(e){super();let n=0;for(let i=1;i<e.length;i++)n+=Math.sign(e[i]-e[i-1]);if(Math.abs(n)!=e.length-1)throw new Error("Piecewise domain must be strictly increasing or decreasing: "+JSON.stringify(e));e.forEach(i=>this.push(i))}extend(e){if(this.includes(e))return this;throw new Error("Piecewise domains are immutable and cannot be unioned!")}}const Fm={quantitative:bf,index:bf,locus:bf,nominal:xf,ordinal:km};function $a(t,e){if(t=="quantitative"&&M8(e)){const n=new N8(e);return n.type=t,n}else if(Fm[t]){const n=new Fm[t];return n.type=t,e&&n.extendAll(e),n}throw new Error("Unknown type: "+t)}function M8(t){return t&&t.length>0&&t.length!=2&&t.every(e=>typeof e=="number")}class T8{#e;#t;#n;#i;#s;#o;#r;#a=!0;#c=new WeakMap;constructor({getMembers:e,getDataMembers:n,getType:i,getLocusExtent:r,fromComplexInterval:s}){this.#e=e,this.#t=n??e,this.#n=i,this.#i=r,this.#s=s}get initialDomainSnapshot(){return this.#o}hasConfiguredDomain(){return!!this.getConfiguredDomain()}invalidateConfiguredDomain(){this.#a=!0}getConfiguredOrDefaultDomain(e=!1){return this.getConfiguredDomain()??O8(this.#n(),this.#i,e?this.getDataDomain():void 0)}getConfiguredDomain(){if(!this.#a)return this.#r;const e=P8(this.#e(),this.#s);return this.#r=e,this.#a=!1,e}getDataDomain(){return L8(this.#t(),this.#n,e=>this.#l(e))}captureInitialDomain(e,n){if(!this.#o&&Pe(e.type)){const i=e.domain();Hr(i)>0&&(this.#o=i)}return n?!1:(this.#o=e.domain(),!0)}#l(e){const n=this.#c.get(e);if(n)return n;const i=e.view.mark.encoders;if(!i)return[];const r=i[e.channel];if(!r)return[];const s=r.accessors??[];if(s.length===0)return[];const o=s.filter(Yd).filter(a=>!a.channelDef.domainInert);return this.#c.set(e,o),o}}function P8(t,e){const n=Array.from(t).filter(i=>i.contributesToDomain).map(i=>i.channelDef).filter(i=>i.scale?.domain).map(i=>$a(i.type,e(i.scale.domain)));if(n.length>0)return n.reduce((i,r)=>i.extendAll(r))}function L8(t,e,n){const i=e(),r=new Map;for(const o of t){if(!o.contributesToDomain)continue;const a=n(o);if(a.length===0)continue;const l=o.view.getCollector();for(const c of a){const u=Jd(c,i),f=l??null;let h=r.get(f);if(h||(h=new Map,r.set(f,h)),h.has(u))continue;let A;if(l)A=l.getDomain(u,i,c);else if(c.constant)A=$a(i),A.extend(c({}));else continue;h.set(u,A)}}if(r.size===0)return;const s=$a(i);for(const o of r.values())for(const a of o.values())s.extendAll(a);return s}function O8(t,e,n){return t==Vs?e():n??[]}function U8(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function _8(t,e,n){return t*Math.pow(e/t,n)}const G8=t=>new Promise(e=>setTimeout(e,t));function z8(){return{canceled:!1}}function H8(t){const e=t.requestAnimationFrame||window.requestAnimationFrame,n=t.signal,i=t.cancelToken,r=()=>new Promise((s,o)=>{if(i?.canceled)return s();if(n?.aborted)return o("aborted");const a=performance.now(),l=a+(t.duration||1e3),c=typeof t.from=="number"?t.from:0,u=typeof t.to=="number"?t.to:1,f=t.easingFunction||(m=>m),h=m=>(m-a)/(l-a),A=m=>m*(u-c)+c,d=m=>Math.max(0,Math.min(1,m)),g=m=>{if(i?.canceled){s();return}n?.aborted?o("aborted"):(t.onUpdate(A(f(d(h(m))))),m<l?e(g):(t.onUpdate(A(f(1))),s()))};e(g)});return t.delay?i?.canceled?Promise.resolve():n?.aborted?Promise.reject("aborted"):G8(t.delay).then(r):r()}class Y8{#e;#t;#n;#i;#s;#o;#r=null;constructor({getScale:e,getAnimator:n,getInitialDomainSnapshot:i,getResetDomain:r,fromComplexInterval:s,getGenomeExtent:o}){this.#e=e,this.#t=n,this.#n=i,this.#i=r,this.#s=s,this.#o=o}getZoomExtent(){const e=this.#e(),n=e.props.zoom;return V8(e,n,this.#s,this.#o,this.#n)}isZoomable(){return this.isZoomingSupported()&&!!this.#e().props.zoom}isZoomingSupported(){const e=this.#e().type;return Pe(e)&&!sn(e)}getDomainChangeAction(e,n){return Hi(n,e)?"none":this.isZoomable()?"restore":this.isZoomingSupported()?"animate":"notify"}isZoomed(){return this.isZoomingSupported()&&Hi(this.#i(),this.#e().domain())}zoom(e,n,i){if(!this.isZoomingSupported())return!1;const r=this.#e(),s=r.domain();let o=J8(r,s,e,n,i);const a=this.getZoomExtent();return o=Tb(o,a[0],a[1]),[0,1].some(l=>o[l]!=s[l])?(r.domain(o),!0):!1}async zoomTo(e,n=!1){if(zr(n)&&(n=n?700:0),!this.isZoomingSupported())throw new Error("Not a zoomable scale!");const i=this.#s(e),r=this.#t(),s=this.#e(),o=s.domain();if(n>0&&o.length==2){const a=o[1]-o[0],l=i[1]-i[0],c=o[0]+a/2,u=i[0]+l/2,f=o[0]==i[0],h=o[1]==i[1];this.#a();const A=z8();this.#r=A,await r.transition({duration:n,easingFunction:U8,cancelToken:A,onUpdate:d=>{const g=_8(a,l,d),m=a==l?d:(a-g)/(a-l),p=m*u+(1-m)*c,w=[f?o[0]:p-g/2,h?o[1]:p+g/2];s.domain(w)}}),this.#r===A&&(this.#r=null),s.domain(i)}else this.#a(),s.domain(i),r?.requestRender()}#a(){this.#r&&(this.#r.canceled=!0,this.#r=null)}resetZoom(){if(!this.isZoomingSupported())throw new Error("Not a zoomable scale!");const e=this.#e(),n=e.domain(),i=this.#i();return[0,1].some(r=>i[r]!=n[r])?(e.domain(i),!0):!1}getZoomLevel(){return this.isZoomable()?Hr(this.getZoomExtent())/Hr(this.#e().domain()):1}}function V8(t,e,n,i,r){return q8(e)&&Ee(e.extent)?n(e.extent):e&&t.props.type=="locus"?i():r()}function J8(t,e,n,i,r){let s=[...e],o=t.invert(i);switch(t.props.reverse&&(r=-r),"align"in t&&(o+=t.align()),t.type){case"linear":case"index":case"locus":s=Fb(s,r||0),s=yh(s,o,n);break;case"log":s=Rb(s,r||0),s=Ch(s,o,n);break;case"pow":case"sqrt":{const a=t;s=Nb(s,r||0,a.exponent()),s=il(s,o,n,a.exponent());break}default:throw new Error("Zooming is not implemented for: "+t.type)}return s}function q8(t){return Ge(t)}ie("index",mf,["continuous"]),ie("locus",Xk,["continuous"]),ie("null",lf,[]);class K8{#e=new Set;#t=new Set;#n={domain:new Set,range:new Set};#i;#s;#o;#r;#a=!1;constructor(e){this.channel=e,this.type=null,this.name=void 0,this.#s=new T8({getMembers:()=>this.#l(),getDataMembers:()=>this.#l(this.#t),getType:()=>this.type,getLocusExtent:()=>this.#f(),fromComplexInterval:this.fromComplexInterval.bind(this)}),this.#i=new v8({getParamRuntime:()=>this.#c.paramRuntime,onRangeChange:()=>this.#h("range"),onDomainChange:()=>this.#h("domain"),getGenomeStore:()=>this.#u.genomeStore}),this.#o=new Y8({getScale:()=>this.getScale(),getAnimator:()=>this.#u.animator,getInitialDomainSnapshot:()=>this.#s.initialDomainSnapshot,getResetDomain:()=>this.#s.getConfiguredOrDefaultDomain(),fromComplexInterval:this.fromComplexInterval.bind(this),getGenomeExtent:()=>this.#f()})}get#c(){const e=this.#e.values().next().value;if(!e)throw new Error("ScaleResolution has no members!");return e.view}#l(e=this.#e){const n=new Set;for(const i of e){const r=i.view;r.isConfiguredVisible()&&(!r.isDataInitialized()&&!i.channelDef?.scale?.domain||n.add(i))}return n}get#u(){return this.#c.context}get zoomExtent(){return(this.#i.scale&&Pe(this.#i.scale.type)&&this.#o.getZoomExtent())??[-1/0,1/0]}#f(){return i8(this.#A())}#A(){if(this.type===Vs)return this.#i.scale??this.#i.getLocusGenome()}addEventListener(e,n){this.#n[e].add(n)}removeEventListener(e,n){this.#n[e].delete(n)}#h(e){for(const n of this.#n[e].values())n({type:e,scaleResolution:this})}#d(e){const{channel:n,channelDef:i}=e,r=i.type==null&&this.type;if(n!="sample"&&!i.type&&!Gl(n)&&!r)throw new Error(`The "type" property must be defined in channel definition: "${n}": ${JSON.stringify(i)}. Must be one of: "quantitative", "ordinal", "nominal", "locus", "index"`);const s=n=="sample"?"nominal":i.type,o=i?.scale?.name;if(o){if(this.name!==void 0&&o!=this.name)throw new Error(`Shared scales have conflicting names: "${o}" vs. "${this.name}"!`);this.name=o}if(!r){if(!this.type)this.type=s;else if(s!==this.type&&!Gl(n))throw new Error(`Can not use shared scale for different data types: ${this.type} vs. ${s}. Use "resolve: independent" for channel ${this.channel}`)}this.#e.add(e),e.contributesToDomain&&this.#t.add(e),this.#s.invalidateConfiguredDomain()}registerMember(e){return this.#d(e),()=>{const n=this.#e.delete(e);return n&&(this.#t.delete(e),this.#s.invalidateConfiguredDomain()),n&&this.#e.size===0}}dispose(){this.#n.domain.clear(),this.#n.range.clear(),this.#i.dispose()}#g(){for(const e of this.#e)if(e.view.hasRendered())return!0;return!1}registerCollectorSubscriptions(e,n){const i=new Set;for(const o of n)o.channelDef.domainInert||i.add(Jd(o,this.type));if(i.size===0)return()=>{};const r=()=>{this.reconfigureDomain()},s=[];for(const o of i)s.push(e.subscribeDomainChanges(o,r));return()=>{for(const o of s)o()}}#p(){return this.#s.hasConfiguredDomain()}#w(){const e=this.#i.scale;if(!e)return!1;const n=e.domain();return Pe(e.type)?n.length>2||n.length==2&&(n[0]!==0||n[1]!==0):n.length>0}#y(){return R8({channel:this.channel,dataType:this.type,members:this.#e,isExplicitDomain:this.#p()})}#m(e=!1){const n=this.#y();if(n===null||n.type=="null")return{type:"null"};const i=this.#s.getConfiguredOrDefaultDomain(e);if(sn(n.type)){const r=this.#p(),s=this.#C(r);if(i!=null){if(r&&s.domain().length>0&&!Hi(s.domain(),i))return this.#r=void 0,this.#m(e);s.addAll(i);const o=new Set(i),a=s.domain().filter(l=>o.has(l));n.domain=a.length>0?a:new xf}else{const o=s.domain();n.domain=o.length>0?o:new xf}n.domainIndexer=s}else i&&i.length>0&&(n.domain=i);return!n.domain&&n.domainMid!==void 0&&(n.domain=[n.domainMin??0,n.domainMax??1]),n}#C(e){return(!this.#r||this.#a!==e)&&(this.#r=rm(),this.#a=e),this.#r}reconfigure(){this.#s.invalidateConfiguredDomain();const e=this.#E(!0);e&&(this.#b(e,(n,i)=>this.#i.reconfigureScale(i)),this.#x(e))}reconfigureDomain(){const e=this.#E(!0,!0);if(!e)return;const{domainConfig:n,targetDomain:i}=e,r=i!=null&&Hi(i,e.scale.domain());i!=null&&!r&&this.#b(e,s=>{s.domain(i),n.applyOrdinalUnknown&&s.unknown(n.ordinalUnknown)}),this.#x(e)}#E(e,n=!1){const i=this.#i.scale;if(!i||i.type=="null")return;const r={scale:i,props:this.#m(e),previousDomain:i.domain(),domainWasInitialized:this.#w()};if(n){const s=xm(i,r.props);return{...r,domainConfig:s,targetDomain:s.domain}}return r}#b(e,n){this.#i.withDomainNotificationsSuppressed(()=>{n(e.scale,e.props)})}#x(e){const{scale:n,previousDomain:i,domainWasInitialized:r}=e;if(this.#s.captureInitialDomain(n,r)){this.#h("domain");return}const s=n.domain(),o=this.#o.getDomainChangeAction(i,s);o==="restore"?this.#i.withDomainNotificationsSuppressed(()=>{n.domain(i)}):o==="animate"?this.#g()?(this.#i.withDomainNotificationsSuppressed(()=>{n.domain(i)}),this.zoomTo(s,500)):this.#h("domain"):o==="notify"&&this.#h("domain")}get scale(){if(this.#i.scale)return this.#i.scale;throw new Error("ScaleResolution.scale accessed before initialization. Call initializeScale().")}getScale(){return this.#i.scale??this.initializeScale()}initializeScale(){if(this.#i.scale)return this.#i.scale;const e=this.#m();return this.#i.createScale(e)}getDomain(){return this.getScale().domain()}getDataDomain(){return this.#s.getDataDomain()}getComplexDomain(){return n8(this.#A(),this.getDomain())}isZoomed(){return this.#o.isZoomed()}isZoomable(){return this.#o.isZoomable()}zoom(e,n,i){return this.#o.zoom(e,n,i)}async zoomTo(e,n=!1){return this.#o.zoomTo(e,n)}resetZoom(){return this.#o.resetZoom()}getZoomLevel(){return this.#o.getZoomLevel()}getAxisLength(){if(this.channel!=="x"&&this.channel!=="y")throw new Error("Axis length is only defined for x and y channels!");const e=Array.from(this.#e).map(n=>n.view.coords?.[this.channel==="x"?"width":"height"]).filter(n=>n>0);return e.length?e.reduce((n,i)=>Math.min(n,i),1e4):0}invertToComplex(e){const n=this.getScale();if("invert"in n){const i=n.invert(e);return this.toComplex(i)}else throw new Error("The scale does not support inverting!")}toComplex(e){return $k(this.#A(),e)}fromComplex(e){return e8(this.#A(),e)}fromComplexInterval(e){return this.type==Vs?t8(this.#A(),e):e}}function If(...t){for(const e of t)if(e!==void 0)return e}class j8{#e=new Set;constructor(e){this.channel=e}get scaleResolution(){return this.#e.values().next().value?.view.getScaleResolution(this.channel)}#t(e){const{view:n}=e,i=n.getScaleResolution(this.channel);if(!i)throw new Error("Cannot find a scale resolution!");if(this.scaleResolution&&i!==this.scaleResolution)throw new Error(`Shared axes must have a shared scale! Channel: ${this.channel}, existing views: [${Array.from(this.#e).map(r=>r.view.getPathString()).join(", ")}], new view: ${n.getPathString()}.`);this.#e.add(e),gf(this,"axisProps")}registerMember(e){return this.#t(e),()=>this.removeMember(e)&&this.#e.size===0}removeMember(e){const n=this.#e.delete(e);return n&&gf(this,"axisProps"),n}getAxisProps(){return Wa(this,"axisProps",()=>{const e=Array.from(this.#e).map(n=>{const i=n.view.mark.encoding[n.channel];return"axis"in i&&i.axis});return e.length>0&&e.some(n=>n===null)?null:Za(e.filter(n=>n!==void 0),"axis",["title"])})}getTitle(){const e=o=>{const a=WB(o.view,o.channel);if(!ft(a))return{member:o,axisTitle:"axis"in a?a.axis?.title:void 0,explicitTitle:If("axis"in a?a.axis?.title:void 0,a.title),implicitTitle:If(en(a)?a.field:void 0,Vi(a)?a.expr:void 0)}},n=Array.from(this.#e).map(e),i=n.map(o=>o.axisTitle).find(o=>o!==void 0);if(i!==void 0)return i;const r=n.filter(o=>{if(Gl(o.member.channel)&&!o.explicitTitle){const a=En(o.member.channel);return n.find(l=>l.member.view==o.member.view&&l.member.channel==a)?.explicitTitle===void 0}return!0}),s=new Set(r.map(o=>If(o.explicitTitle,o.implicitTitle)).filter(le));return s.size?[...s].join(", "):null}}function Rm(t,e,{spacing:n,devicePixelRatio:i,offset:r,reverse:s}={}){n=n||0,r=r||0;let o=0,a=0;for(const d of t)o+=ec(d.px)+(Bf(d)?0:n),a+=ec(d.grow);o-=n;const l=Math.max(0,e-o),c=i!==void 0?d=>Math.round(d*i)/i:d=>d,u=[],f=[],h=d=>{const g=u.length;if(!g)return;const m=(d?n:0)*(s?-1:1);A-=m;for(let p=0;p<g;p++)f.push({location:A+(p+1)/(g+1)*m,size:0});A+=m,u.length=0};let A=s?Math.max(e,o):0+r;if(t.length==1&&Bf(t[0]))return[{location:A,size:0}];for(let d=0;d<t.length;d++){const g=t[d];if(Bf(g))u.push(g);else{h(f.length>0);const m=ec(g.px)+(a?ec(g.grow)/a*l:0);s&&(A-=m),f.push({location:c(A),size:c(m)}),s?A-=n:A+=m+n}}return A+=s?n:-n,h(!1),f}function W8(t){let e=0,n=0;for(const i of t)e=Math.max(e,i.px??0),n=Math.max(n,i.grow??0);return{px:e,grow:n}}class Tn{constructor(e,n){this.width=e,this.height=n}addPadding(e){return this.#e(e.width,e.height)}subtractPadding(e){return this.#e(-e.width,-e.height)}#e(e,n){return new Tn({px:(this.width.px??0)+e,grow:this.width.grow},{px:(this.height.px??0)+n,grow:this.height.grow})}isGrowing(){return!!(this.width.grow||this.height.grow)}}const qs=Object.freeze({px:0,grow:0}),Nm=new Tn(qs,qs);function Bf(t){return!t.px&&!t.grow}function ec(t){return t||0}function X8(t){return t&&(Ve(t.px)||Ve(t.grow))}function Mm(t){if(Tf(t))throw new Error("parseSizeDef does not accept step-based sizes.");if(X8(t))return t;if(Ve(t))return{px:t,grow:0};if(t==="container")return{px:0,grow:1};if(!t)return{px:0,grow:1};throw new Error(`Invalid sizeDef: ${t}`)}class qe{constructor(e,n,i,r){this.top=e||0,this.right=n||0,this.bottom=i||0,this.left=r||0}get width(){return this.left+this.right}get height(){return this.top+this.bottom}expand(e){return e<=0?this:new qe(this.top+e,this.right+e,this.bottom+e,this.left+e)}add(e){return new qe(this.top+e.top,this.right+e.right,this.bottom+e.bottom,this.left+e.left)}subtract(e){return new qe(this.top-e.top,this.right-e.right,this.bottom-e.bottom,this.left-e.left)}union(e){return new qe(Math.max(this.top,e.top),Math.max(this.right,e.right),Math.max(this.bottom,e.bottom),Math.max(this.left,e.left))}getHorizontal(){return new qe(0,this.right,0,this.left)}getVertical(){return new qe(this.top,0,this.bottom,0)}get horizontalTotal(){return this.left+this.right}get verticalTotal(){return this.top+this.bottom}static createFromConfig(e){return typeof e=="number"?this.createUniformPadding(e):e?this.createFromRecord(e):vf}static createFromRecord(e){return new qe(e.top,e.right,e.bottom,e.left)}static zero(){return vf}static createUniformPadding(e){return new qe(e,e,e,e)}}const vf=qe.createUniformPadding(0);Object.freeze(vf);class fr{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(e,n){let i=this.length++;for(;i>0;){const r=i-1>>1,s=this.values[r];if(n>=s)break;this.ids[i]=this.ids[r],this.values[i]=s,i=r}this.ids[i]=e,this.values[i]=n}pop(){if(this.length===0)return;const e=this.ids,n=this.values,i=e[0],r=--this.length;if(r>0){const s=e[r],o=n[r];let a=0;const l=r>>1;for(;a<l;){const c=(a<<1)+1,u=c+1,f=c+(+(u<r)&+(n[u]<n[c]));if(n[f]>=o)break;e[a]=e[f],n[a]=n[f],a=f}e[a]=s,n[a]=o}return i}peek(){return this.length>0?this.ids[0]:void 0}peekValue(){return this.length>0?this.values[0]:void 0}shrink(){this.ids.length=this.values.length=this.length}}const Tm=Symbol("runtimeNode"),Pm=1e6;function Z8(t){return t?(e,n)=>{t.addDisposer(e,n)}:()=>{}}function Lm(t,e){const n={id:t.id,name:t.name,kind:t.kind,get(){return t.value},subscribe(i){return t.listeners.add(i),()=>{t.listeners.delete(i)}}};return Object.defineProperty(n,Tm,{enumerable:!1,configurable:!1,writable:!1,value:t}),e?Object.assign(n,{set(i){e(i)}}):n}function Om(t){const e=t[Tm];if(!e)throw new Error("ParamRef is not bound to this graph runtime. Expected runtime-created ref.");return e}function Um(t){for(const e of t)e()}class $8{#e=1;#t=1;#n=0;#i=!1;#s=!1;#o=new Set;#r=new Set;#a=new fr;#c=new fr;#l=new Set;#u;constructor(e={}){this.#u=Z8(e.lifecycleRegistry)}createWritable(e,n,i,r,s={}){const o="n"+this.#e++,a=s.notify??!0,l={id:o,name:n,kind:i,value:r,rank:0,disposed:!1,listeners:new Set,subscribe(u){return l.listeners.add(u),()=>{l.listeners.delete(u)}}},c=u=>{if(l.disposed)throw new Error('Cannot set disposed parameter "'+n+'" ('+o+").");u!==l.value&&(l.value=u,a&&(Um(l.listeners),this.#d()))};return this.#u(e,()=>{l.disposed=!0,l.listeners.clear()}),Lm(l,c)}computed(e,n,i,r){const o=i.map(Om).reduce((h,A)=>Math.max(h,A.rank),0),l={id:"n"+this.#e++,name:n,kind:"derived",rank:o+1,value:r(),disposed:!1,listeners:new Set,fn:r,subscribe(h){return l.listeners.add(h),()=>{l.listeners.delete(h)}}},c=()=>{l.disposed||this.#f(l)},u=i.map(h=>h.subscribe(c)),f=()=>{l.disposed||(l.disposed=!0,u.forEach(h=>h()),l.listeners.clear(),this.#o.delete(l))};return this.#u(e,f),Lm(l)}effect(e,n,i){const s=n.map(Om).reduce((f,h)=>Math.max(f,h.rank),0),a={id:"n"+this.#e++,rank:s+1,disposed:!1,fn:i},l=()=>{a.disposed||this.#A(a)},c=n.map(f=>f.subscribe(l)),u=()=>{a.disposed||(a.disposed=!0,c.forEach(f=>f()),this.#r.delete(a))};return this.#u(e,u),u}runInTransaction(e){this.#n+=1;try{return e()}finally{this.#n-=1,this.#n===0&&this.#d()}}flushNow(){if(!(this.#n>0||this.#s)){this.#i=!1,this.#s=!0;try{let e=!0;for(;e;){for(e=!1;this.#a.length>0;){e=!0;const n=this.#a.pop();if(this.#o.delete(n),n.disposed)continue;const i=n.value,r=n.fn();r!==i&&(n.value=r,Um(n.listeners))}for(;this.#c.length>0;){e=!0;const n=this.#c.pop();this.#r.delete(n),!n.disposed&&n.fn()}}}finally{this.#s=!1,this.#p()}}}whenPropagated(e={}){if(this.#g())return Promise.resolve();const{signal:n,timeoutMs:i}=e;return n?.aborted?Promise.reject(new Error("whenPropagated aborted")):new Promise((r,s)=>{const o={resolve:r,reject:s};n&&(o.abortHandler=()=>{this.#l.delete(o),s(new Error("whenPropagated aborted"))},n.addEventListener("abort",o.abortHandler,{once:!0})),i!=null&&(o.timeoutId=setTimeout(()=>{this.#l.delete(o),o.abortHandler&&n?.removeEventListener("abort",o.abortHandler),s(new Error("whenPropagated timeout after "+i+" ms"))},i)),this.#l.add(o)})}#f(e){this.#o.has(e)||(this.#o.add(e),this.#a.push(e,this.#h(e.rank)),this.#d())}#A(e){this.#r.has(e)||(this.#r.add(e),this.#c.push(e,this.#h(e.rank)),this.#d())}#h(e){const n=this.#t%Pm;return this.#t+=1,e*Pm+n}#d(){this.#n>0||this.#i||this.#s||(this.#i=!0,queueMicrotask(()=>{this.flushNow()}))}#g(){return this.#n===0&&!this.#i&&!this.#s&&this.#a.length===0&&this.#c.length===0&&this.#o.size===0&&this.#r.size===0}#p(){if(this.#g()){for(const e of this.#l)e.timeoutId&&clearTimeout(e.timeoutId),e.resolve();this.#l.clear()}}}class e4{#e=1;#t=new Map;createOwner(e,n){const i=e+":"+n+":"+this.#e++;return this.#t.set(i,new Set),i}addDisposer(e,n){const i=this.#t.get(e);if(!i)throw new Error("Unknown owner: "+e);i.add(n)}disposeOwner(e){const n=this.#t.get(e);if(n){for(const i of n)i();n.clear(),this.#t.delete(e)}}}class t4{#e=1;#t=new Map;createRootScope(e){const n="scope:"+this.#e++;return this.#t.set(n,{params:new Map,ownerId:e}),n}createChildScope(e,n){if(!this.#t.has(n))throw new Error("Unknown parent scope: "+n);const i="scope:"+this.#e++;return this.#t.set(i,{parentScope:n,params:new Map,ownerId:e}),i}getOwnerId(e){const n=this.#t.get(e);if(!n)throw new Error("Unknown scope: "+e);return n.ownerId}clearScope(e){const n=this.#t.get(e);if(!n)throw new Error("Unknown scope: "+e);n.params.clear()}register(e,n,i){Mt(n);const r=this.#t.get(e);if(!r)throw new Error("Unknown scope: "+e);if(r.params.has(n))throw new Error('Parameter "'+n+'" already exists in scope '+e);return r.params.set(n,i),i}resolve(e,n){Mt(n);let i=e;for(;i;){const r=this.#t.get(i);if(!r)throw new Error("Unknown scope: "+i);const s=r.params.get(n);if(s)return s;i=r.parentScope}}}const n4="RawCode",i4="Literal",r4="Property",s4="Identifier",o4="ArrayExpression",a4="BinaryExpression",c4="CallExpression",l4="ConditionalExpression",u4="LogicalExpression",f4="MemberExpression",A4="ObjectExpression",h4="UnaryExpression";function Dt(t){this.type=t}Dt.prototype.visit=function(t){let e,n,i;if(t(this))return 1;for(e=d4(this),n=0,i=e.length;n<i;++n)if(e[n].visit(t))return 1};function d4(t){switch(t.type){case o4:return t.elements;case a4:case u4:return[t.left,t.right];case c4:return[t.callee].concat(t.arguments);case l4:return[t.test,t.consequent,t.alternate];case f4:return[t.object,t.property];case A4:return t.properties;case r4:return[t.key,t.value];case h4:return[t.argument];case s4:case i4:case n4:default:return[]}}var zt,G,k,Ke,re,tc=1,Ks=2,pi=3,Pn=4,nc=5,mi=6,at=7,js=8,g4=9;zt={},zt[tc]="Boolean",zt[Ks]="<end>",zt[pi]="Identifier",zt[Pn]="Keyword",zt[nc]="Null",zt[mi]="Numeric",zt[at]="Punctuator",zt[js]="String",zt[g4]="RegularExpression";var p4="ArrayExpression",m4="BinaryExpression",w4="CallExpression",y4="ConditionalExpression",_m="Identifier",C4="Literal",E4="LogicalExpression",b4="MemberExpression",x4="ObjectExpression",I4="Property",B4="UnaryExpression",Le="Unexpected token %0",v4="Unexpected number",S4="Unexpected string",D4="Unexpected identifier",Q4="Unexpected reserved word",k4="Unexpected end of input",Sf="Invalid regular expression",Df="Invalid regular expression: missing /",Gm="Octal literals are not allowed in strict mode.",F4="Duplicate data property in object literal not allowed in strict mode",Ye="ILLEGAL",Ws="Disabled.",R4=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),N4=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function ic(t,e){if(!t)throw new Error("ASSERT: "+e)}function on(t){return t>=48&&t<=57}function Qf(t){return"0123456789abcdefABCDEF".includes(t)}function Xs(t){return"01234567".includes(t)}function M4(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(t)}function Zs(t){return t===10||t===13||t===8232||t===8233}function $s(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&R4.test(String.fromCharCode(t))}function rc(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&N4.test(String.fromCharCode(t))}const T4={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function zm(){for(;k<Ke;){const t=G.charCodeAt(k);if(M4(t)||Zs(t))++k;else break}}function kf(t){var e,n,i,r=0;for(n=t==="u"?4:2,e=0;e<n;++e)k<Ke&&Qf(G[k])?(i=G[k++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):ee({},Le,Ye);return String.fromCharCode(r)}function P4(){var t,e,n,i;for(t=G[k],e=0,t==="}"&&ee({},Le,Ye);k<Ke&&(t=G[k++],!!Qf(t));)e=e*16+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||t!=="}")&&ee({},Le,Ye),e<=65535?String.fromCharCode(e):(n=(e-65536>>10)+55296,i=(e-65536&1023)+56320,String.fromCharCode(n,i))}function Hm(){var t,e;for(t=G.charCodeAt(k++),e=String.fromCharCode(t),t===92&&(G.charCodeAt(k)!==117&&ee({},Le,Ye),++k,t=kf("u"),(!t||t==="\\"||!$s(t.charCodeAt(0)))&&ee({},Le,Ye),e=t);k<Ke&&(t=G.charCodeAt(k),!!rc(t));)++k,e+=String.fromCharCode(t),t===92&&(e=e.substr(0,e.length-1),G.charCodeAt(k)!==117&&ee({},Le,Ye),++k,t=kf("u"),(!t||t==="\\"||!rc(t.charCodeAt(0)))&&ee({},Le,Ye),e+=t);return e}function L4(){var t,e;for(t=k++;k<Ke;){if(e=G.charCodeAt(k),e===92)return k=t,Hm();if(rc(e))++k;else break}return G.slice(t,k)}function O4(){var t,e,n;return t=k,e=G.charCodeAt(k)===92?Hm():L4(),e.length===1?n=pi:T4.hasOwnProperty(e)?n=Pn:e==="null"?n=nc:e==="true"||e==="false"?n=tc:n=pi,{type:n,value:e,start:t,end:k}}function Ff(){var t=k,e=G.charCodeAt(k),n,i=G[k],r,s,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++k,{type:at,value:String.fromCharCode(e),start:t,end:k};default:if(n=G.charCodeAt(k+1),n===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return k+=2,{type:at,value:String.fromCharCode(e)+String.fromCharCode(n),start:t,end:k};case 33:case 61:return k+=2,G.charCodeAt(k)===61&&++k,{type:at,value:G.slice(t,k),start:t,end:k}}}if(o=G.substr(k,4),o===">>>=")return k+=4,{type:at,value:o,start:t,end:k};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return k+=3,{type:at,value:s,start:t,end:k};if(r=s.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return k+=2,{type:at,value:r,start:t,end:k};if(r==="//"&&ee({},Le,Ye),"<>=!+-*%&|^/".includes(i))return++k,{type:at,value:i,start:t,end:k};ee({},Le,Ye)}function U4(t){let e="";for(;k<Ke&&Qf(G[k]);)e+=G[k++];return e.length===0&&ee({},Le,Ye),$s(G.charCodeAt(k))&&ee({},Le,Ye),{type:mi,value:parseInt("0x"+e,16),start:t,end:k}}function _4(t){let e="0"+G[k++];for(;k<Ke&&Xs(G[k]);)e+=G[k++];return($s(G.charCodeAt(k))||on(G.charCodeAt(k)))&&ee({},Le,Ye),{type:mi,value:parseInt(e,8),octal:!0,start:t,end:k}}function Ym(){var t,e,n;if(n=G[k],ic(on(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),e=k,t="",n!=="."){if(t=G[k++],n=G[k],t==="0"){if(n==="x"||n==="X")return++k,U4(e);if(Xs(n))return _4(e);n&&on(n.charCodeAt(0))&&ee({},Le,Ye)}for(;on(G.charCodeAt(k));)t+=G[k++];n=G[k]}if(n==="."){for(t+=G[k++];on(G.charCodeAt(k));)t+=G[k++];n=G[k]}if(n==="e"||n==="E")if(t+=G[k++],n=G[k],(n==="+"||n==="-")&&(t+=G[k++]),on(G.charCodeAt(k)))for(;on(G.charCodeAt(k));)t+=G[k++];else ee({},Le,Ye);return $s(G.charCodeAt(k))&&ee({},Le,Ye),{type:mi,value:parseFloat(t),start:e,end:k}}function G4(){var t="",e,n,i,r,s=!1;for(e=G[k],ic(e==="'"||e==='"',"String literal must starts with a quote"),n=k,++k;k<Ke;)if(i=G[k++],i===e){e="";break}else if(i==="\\")if(i=G[k++],!i||!Zs(i.charCodeAt(0)))switch(i){case"u":case"x":G[k]==="{"?(++k,t+=P4()):t+=kf(i);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:Xs(i)?(r="01234567".indexOf(i),r!==0&&(s=!0),k<Ke&&Xs(G[k])&&(s=!0,r=r*8+"01234567".indexOf(G[k++]),"0123".includes(i)&&k<Ke&&Xs(G[k])&&(r=r*8+"01234567".indexOf(G[k++]))),t+=String.fromCharCode(r)):t+=i;break}else i==="\r"&&G[k]===`
`&&++k;else{if(Zs(i.charCodeAt(0)))break;t+=i}return e!==""&&ee({},Le,Ye),{type:js,value:t,octal:s,start:n,end:k}}function z4(t,e){let n=t;e.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";ee({},Sf)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ee({},Sf)}try{return new RegExp(t,e)}catch{return null}}function H4(){var t,e,n,i,r;for(t=G[k],ic(t==="/","Regular expression literal must start with a slash"),e=G[k++],n=!1,i=!1;k<Ke;)if(t=G[k++],e+=t,t==="\\")t=G[k++],Zs(t.charCodeAt(0))&&ee({},Df),e+=t;else if(Zs(t.charCodeAt(0)))ee({},Df);else if(n)t==="]"&&(n=!1);else if(t==="/"){i=!0;break}else t==="["&&(n=!0);return i||ee({},Df),r=e.substr(1,e.length-2),{value:r,literal:e}}function Y4(){var t,e,n;for(e="",n="";k<Ke&&(t=G[k],!!rc(t.charCodeAt(0)));)++k,t==="\\"&&k<Ke?ee({},Le,Ye):(n+=t,e+=t);return n.search(/[^gimuy]/g)>=0&&ee({},Sf,n),{value:n,literal:e}}function V4(){var t,e,n,i;return re=null,zm(),t=k,e=H4(),n=Y4(),i=z4(e.value,n.value),{literal:e.literal+n.literal,value:i,regex:{pattern:e.value,flags:n.value},start:t,end:k}}function J4(t){return t.type===pi||t.type===Pn||t.type===tc||t.type===nc}function Vm(){if(zm(),k>=Ke)return{type:Ks,start:k,end:k};const t=G.charCodeAt(k);return $s(t)?O4():t===40||t===41||t===59?Ff():t===39||t===34?G4():t===46?on(G.charCodeAt(k+1))?Ym():Ff():on(t)?Ym():Ff()}function ct(){const t=re;return k=t.end,re=Vm(),k=t.end,t}function Jm(){const t=k;re=Vm(),k=t}function q4(t){const e=new Dt(p4);return e.elements=t,e}function qm(t,e,n){const i=new Dt(t==="||"||t==="&&"?E4:m4);return i.operator=t,i.left=e,i.right=n,i}function K4(t,e){const n=new Dt(w4);return n.callee=t,n.arguments=e,n}function j4(t,e,n){const i=new Dt(y4);return i.test=t,i.consequent=e,i.alternate=n,i}function Rf(t){const e=new Dt(_m);return e.name=t,e}function eo(t){const e=new Dt(C4);return e.value=t.value,e.raw=G.slice(t.start,t.end),t.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=t.regex),e}function Km(t,e,n){const i=new Dt(b4);return i.computed=t==="[",i.object=e,i.property=n,i.computed||(n.member=!0),i}function W4(t){const e=new Dt(x4);return e.properties=t,e}function jm(t,e,n){const i=new Dt(I4);return i.key=e,i.value=n,i.kind=t,i}function X4(t,e){const n=new Dt(B4);return n.operator=t,n.argument=e,n.prefix=!0,n}function ee(t,e){var n,i=Array.prototype.slice.call(arguments,2),r=e.replace(/%(\d)/g,(s,o)=>(ic(o<i.length,"Message reference must be in range"),i[o]));throw n=new Error(r),n.index=k,n.description=r,n}function sc(t){t.type===Ks&&ee(t,k4),t.type===mi&&ee(t,v4),t.type===js&&ee(t,S4),t.type===pi&&ee(t,D4),t.type===Pn&&ee(t,Q4),ee(t,Le,t.value)}function je(t){const e=ct();(e.type!==at||e.value!==t)&&sc(e)}function he(t){return re.type===at&&re.value===t}function Nf(t){return re.type===Pn&&re.value===t}function Z4(){const t=[];for(k=re.start,je("[");!he("]");)he(",")?(ct(),t.push(null)):(t.push(wi()),he("]")||je(","));return ct(),q4(t)}function Wm(){k=re.start;const t=ct();return t.type===js||t.type===mi?(t.octal&&ee(t,Gm),eo(t)):Rf(t.value)}function $4(){var t,e,n,i;if(k=re.start,t=re,t.type===pi)return n=Wm(),je(":"),i=wi(),jm("init",n,i);if(t.type===Ks||t.type===at)sc(t);else return e=Wm(),je(":"),i=wi(),jm("init",e,i)}function eF(){var t=[],e,n,i,r={},s=String;for(k=re.start,je("{");!he("}");)e=$4(),e.key.type===_m?n=e.key.name:n=s(e.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?ee({},F4):r[i]=!0,t.push(e),he("}")||je(",");return je("}"),W4(t)}function tF(){je("(");const t=Mf();return je(")"),t}const nF={if:1};function iF(){var t,e,n;if(he("("))return tF();if(he("["))return Z4();if(he("{"))return eF();if(t=re.type,k=re.start,t===pi||nF[re.value])n=Rf(ct().value);else if(t===js||t===mi)re.octal&&ee(re,Gm),n=eo(ct());else{if(t===Pn)throw new Error(Ws);t===tc?(e=ct(),e.value=e.value==="true",n=eo(e)):t===nc?(e=ct(),e.value=null,n=eo(e)):he("/")||he("/=")?(n=eo(V4()),Jm()):sc(ct())}return n}function rF(){const t=[];if(je("("),!he(")"))for(;k<Ke&&(t.push(wi()),!he(")"));)je(",");return je(")"),t}function sF(){k=re.start;const t=ct();return J4(t)||sc(t),Rf(t.value)}function oF(){return je("."),sF()}function aF(){je("[");const t=Mf();return je("]"),t}function cF(){var t,e,n;for(t=iF();;)if(he("."))n=oF(),t=Km(".",t,n);else if(he("("))e=rF(),t=K4(t,e);else if(he("["))n=aF(),t=Km("[",t,n);else break;return t}function Xm(){const t=cF();if(re.type===at&&(he("++")||he("--")))throw new Error(Ws);return t}function oc(){var t,e;if(re.type!==at&&re.type!==Pn)e=Xm();else{if(he("++")||he("--"))throw new Error(Ws);if(he("+")||he("-")||he("~")||he("!"))t=ct(),e=oc(),e=X4(t.value,e);else{if(Nf("delete")||Nf("void")||Nf("typeof"))throw new Error(Ws);e=Xm()}}return e}function Zm(t){let e=0;if(t.type!==at&&t.type!==Pn)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function lF(){var t,e,n,i,r,s,o,a,l,c;if(t=re,l=oc(),i=re,r=Zm(i),r===0)return l;for(i.prec=r,ct(),e=[t,re],o=oc(),s=[l,i,o];(r=Zm(re))>0;){for(;s.length>2&&r<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),e.pop(),n=qm(a,l,o),s.push(n);i=ct(),i.prec=r,s.push(i),e.push(re),n=oc(),s.push(n)}for(c=s.length-1,n=s[c],e.pop();c>1;)e.pop(),n=qm(s[c-1].value,s[c-2],n),c-=2;return n}function wi(){var t,e,n;return t=lF(),he("?")&&(ct(),e=wi(),je(":"),n=wi(),t=j4(t,e,n)),t}function Mf(){const t=wi();if(he(","))throw new Error(Ws);return t}function $m(t){G=t,k=0,Ke=G.length,re=null,Jm();const e=Mf();if(re.type!==Ks)throw new Error("Unexpect token after expression.");return e}var uF={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function ew(t){function e(o,a,l,c){let u=t(a[0]);return l&&(u=l+"("+u+")",l.lastIndexOf("new ",0)===0&&(u="("+u+")")),u+"."+o+(c<0?"":c===0?"()":"("+a.slice(1).map(t).join(",")+")")}function n(o,a,l){return c=>e(o,c,a,l)}const i="new Date",r="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&xe("Missing arguments to clamp function."),o.length>3&&xe("Too many arguments to clamp function.");const a=o.map(t);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),btoa:"btoa",atob:"atob",regexp:s,test:n("test",s),if:function(o){o.length<3&&xe("Missing arguments to if function."),o.length>3&&xe("Too many arguments to if function.");const a=o.map(t);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function fF(t){const e=t&&t.length-1;return e&&(t[0]==='"'&&t[e]==='"'||t[0]==="'"&&t[e]==="'")?t.slice(1,-1):t}function tw(t){t=t||{};const e=t.allowed?Mo(t.allowed):{},n=t.forbidden?Mo(t.forbidden):{},i=t.constants||uF,r=(t.functions||ew)(f),s=t.globalvar,o=t.fieldvar,a=ht(s)?s:d=>`${s}["${d}"]`;[...Object.getOwnPropertyNames(Object.prototype).filter(d=>typeof Object.prototype[d]=="function")];let l={},c={},u=0;function f(d){if(le(d))return d;const g=h[d.type];return g==null&&xe("Unsupported type: "+d.type),g(d)}const h={Literal:d=>d.raw,Identifier:d=>{const g=d.name;return u>0?g:Mi(n,g)?xe("Illegal identifier: "+g):Mi(i,g)?i[g]:Mi(e,g)?g:(l[g]=1,a(g))},MemberExpression:d=>{const g=!d.computed,m=f(d.object);g&&(u+=1);const p=f(d.property);return m===o&&(c[fF(p)]=1),g&&(u-=1),m+(g?"."+p:"["+p+"]")},CallExpression:d=>{d.callee.type!=="Identifier"&&xe("Illegal callee type: "+d.callee.type);const g=d.callee.name,m=d.arguments,p=Mi(r,g)&&r[g];return p||xe("Unrecognized function: "+g),ht(p)?p(m):p+"("+m.map(f).join(",")+")"},ArrayExpression:d=>"["+d.elements.map(f).join(",")+"]",BinaryExpression:d=>"("+f(d.left)+" "+d.operator+" "+f(d.right)+")",UnaryExpression:d=>"("+d.operator+f(d.argument)+")",ConditionalExpression:d=>"("+f(d.test)+"?"+f(d.consequent)+":"+f(d.alternate)+")",LogicalExpression:d=>"("+f(d.left)+d.operator+f(d.right)+")",ObjectExpression:d=>{for(const g of d.properties){const m=g.key.name;Db.has(m)&&xe("Illegal property: "+m)}return"{"+d.properties.map(f).join(",")+"}"},Property:d=>{u+=1;const g=f(d.key);return u-=1,g+":"+f(d.value)}};function A(d){const g={code:f(d),globals:Object.keys(l),fields:Object.keys(c)};return l={},c={},g}return A.functions=r,A.constants=i,A}function nw(t,e,n){return n=(n-t)/(e-t),n=Math.max(0,Math.min(1,n)),n*n*(3-2*n)}function AF(t,e,n){return tr((n-t)/(e-t),0,1)}const iw={clamp:tr,format(t,e){return ze(e)(t)},mapHasKey(t,e){return t.has(e)},isArray:Ee,isBoolean:zr,isDefined(t){return t!==void 0},isNumber:Ve,isObject:Ge,isRegExp:Hb,isString:le,isValid(t){return t!=null&&t===t},lerp:xh,linearstep:AF,replace(t,e,n){return String(t).replace(e,n)},smoothstep:nw};function hF(t){const e=ew(t);for(const n in iw)e[n]=`this.${n}`;return e}const dF=tw({forbidden:[],allowed:["datum","undefined"],globalvar:"globalObject",fieldvar:"datum",functions:hF});function gF(t,e={}){try{const n=$m(t),i=dF(n),r=Function("datum","globalObject",`"use strict";
            try {
                return (${i.code});
            } catch (e) {
                throw new Error("Error evaluating expression: " + ${JSON.stringify(t)} + ", " + e.message, e);
            }`).bind(iw),s=o=>r(o,e);return s.fields=i.fields,s.globals=i.globals,s.code=i.code,s}catch(n){throw new Error(`Invalid expression: ${t}, ${n.message}`)}}const pF=tw({forbidden:[],allowed:["event"],globalvar:"globalObject"});function rw(t){try{const e=$m(t),n=pF(e);return Function("event","globalObject",`"use strict";
            try {
                return !!(${n.code});
            } catch (e) {
                throw new Error("Error evaluating expression: " + ${JSON.stringify(t)} + ", " + e.message, e);
            }`)}catch(e){throw new Error(`Invalid expression: ${t}, ${e.message}`)}}function mF(t,e={}){return gF(t,e)}function sw(t,e){const n={},i=mF(t,n),r=new Map;for(const o of i.globals){if(r.has(o))continue;const a=e(o);if(!a)throw new Error('Unknown variable "'+o+'" in expression: '+t);r.set(o,a),Object.defineProperty(n,o,{enumerable:!0,get(){return a.get()}})}const s=new Set;return i.subscribe=o=>{const a=[];for(const u of r.values())a.push(u.subscribe(o));let l=!0;const c=()=>{l&&(l=!1,s.delete(c),a.forEach(u=>u()))};return s.add(c),c},i.invalidate=()=>{for(const o of s)o();s.clear()},i.identifier=()=>i.code+"|"+Array.from(r.values()).map(o=>o.id).join(","),{expression:i,dependencies:Array.from(r.values())}}class wF{#e=new e4;#t=new $8({lifecycleRegistry:this.#e});#n=new t4;createScope(e){const n=this.#e.createOwner("scope",e??"root");return e?this.#n.createChildScope(n,e):this.#n.createRootScope(n)}disposeScope(e){const n=this.#n.getOwnerId(e);this.#e.disposeOwner(n),this.#n.clearScope(e)}addScopeDisposer(e,n){const i=this.#n.getOwnerId(e);this.#e.addDisposer(i,n)}registerBase(e,n,i,r){const s=this.#n.getOwnerId(e),o=this.#t.createWritable(s,n,"base",i,r);return this.#n.register(e,n,o)}registerSelection(e,n,i,r){const s=this.#n.getOwnerId(e),o=this.#t.createWritable(s,n,"selection",i,r);return this.#n.register(e,n,o)}registerDerived(e,n,i){const{expression:r,dependencies:s}=sw(i,l=>this.resolve(e,l)),o=this.#n.getOwnerId(e),a=this.#t.computed(o,n,s,()=>r(null));return this.#n.register(e,n,a)}createExpression(e,n){const{expression:i}=sw(n,r=>this.resolve(e,r));return i}resolve(e,n){return this.#n.resolve(e,n)}runInTransaction(e){return this.#t.runInTransaction(e)}flushNow(){this.#t.flushNow()}whenPropagated(e){return this.#t.whenPropagated(e)}}class yF{#e;#t;#n=new Map;#i=new Map;#s=new Map;#o;#r=!1;constructor(e){this.#o=e??(()=>{});const n=this.#o();n?(this.#e=n.#e,this.#t=this.#e.createScope(n.#t)):(this.#e=new wF,this.#t=this.#e.createScope())}registerParam(e){const n=e.name;if(Mt(n),this.#s.has(n))throw new Error('Parameter "'+n+'" already registered in this scope.');if("value"in e&&"expr"in e)throw new Error(`The parameter "${n}" must not have both value and expr properties!`);let i,r;if(e.push=="outer"){const s=this.findRuntimeForParam(n);if(!s)throw new Error(`Parameter "${n}" not found in outer scope!`);const o=s.paramConfigs.get(n);if(!o)throw new Error(`Outer parameter "${n}" exists as a value but has no registered config.`);if("expr"in o||"select"in o)throw new Error(`The outer parameter "${n}" must not have expr or select properties!`);i=a=>{s.setValue(n,a)},this.#n.set(n,i)}else if("value"in e)r=ql(e,this),i=this.#a(n,r);else if("expr"in e){const s=this.#e.registerDerived(this.#t,n,e.expr);this.#i.set(n,s),i=()=>{throw new Error('Cannot set derived parameter "'+n+'".')}}else r=ql(e,this),i=this.#a(n,r);if("select"in e){if(r??=ql(e,this),!this.#n.has(n)){const s=this.#e.registerSelection(this.#t,n,r);this.#i.set(n,s),this.#n.set(n,o=>{s.set(o),this.#e.flushNow()}),i=this.#n.get(n)}i(r)}return this.#s.set(n,e),i}allocateSetter(e,n,i=!1){if(Mt(e),this.#n.has(e))throw new Error("Setter already allocated for parameter: "+e);const r=this.#e.registerBase(this.#t,e,n,{notify:!i});this.#i.set(e,r);const s=o=>{r.set(o),this.#e.flushNow()};return this.#n.set(e,s),s}setValue(e,n){Mt(e);const i=this.#n.get(e);if(!i)throw new Error("Writable parameter not found in this scope: "+e);i(n)}getValue(e){return this.#i.get(e)?.get()}subscribe(e,n){Mt(e);const i=this.findRuntimeForParam(e);if(!i)throw new Error("Parameter not found: "+e);const r=i.#i.get(e);if(!r)throw new Error("Parameter found without local reference: "+e);return r.subscribe(n)}findValue(e){return this.findRuntimeForParam(e)?.getValue(e)}get paramConfigs(){return this.#s}findRuntimeForParam(e){return this.#i.has(e)?this:this.#o()?.findRuntimeForParam(e)}createExpression(e){return this.#e.createExpression(this.#t,e)}watchExpression(e,n,i={}){const r=this.createExpression(e),s=r.subscribe(n);return(i.scopeOwned??!0)&&this.#e.addScopeDisposer(this.#t,s),i.registerDisposer?.(s),r}#a(e,n){const i=this.#e.registerBase(this.#t,e,n);this.#i.set(e,i);const r=s=>{i.set(s),this.#e.flushNow()};return this.#n.set(e,r),r}evaluateAndGet(e){return this.createExpression(e)()}runInTransaction(e){return this.#e.runInTransaction(e)}flushNow(){this.#e.flushNow()}whenPropagated(e){return this.#e.whenPropagated(e)}dispose(){this.#r||(this.#r=!0,this.#e.disposeScope(this.#t),this.#n.clear(),this.#i.clear(),this.#s.clear())}hasPointSelections(){for(const e of this.#s.values())if(Jl(e)){const n=e.select;if(le(n)){if(n=="point")return!0}else if(n.type=="point")return!0}return!1}}function to(t,e){return!e||/^(data:|([A-Za-z]+:)?\/\/)/.test(t)||t.startsWith("/")?t:(e.endsWith("/")||(e+="/"),e+t)}function CF(t){if(!t)return t;if(/[?#]/.test(t))throw new Error(`Invalid base URL: ${t} - cannot contain query or hash.`);return t.endsWith("/")?t:t+"/"}const Ln="VISIT_SKIP",Ar="VISIT_STOP",ow=t=>t;class aw{spec;#e;#t={};#n={};#i={};#s;#o;#r=!1;opacityFunction=ow;#a=[];#c="none";facetCoords=new jt([],JSON.stringify);constructor(e,n,i,r,s,o={}){if(!e)throw new Error("View spec must be defined!");if(this.context=n,this.layoutParent=i,this.dataParent=r,this.#e=s,this.spec=e,this.resolutions={scale:{},axis:{}},om(this),this.options={blockEncodingInheritance:!1,...o},this.flowHandle=void 0,this.needsAxes={x:!1,y:!1},this.paramRuntime=new yF(()=>this.dataParent?.paramRuntime),e.params)for(const a of e.params)this.paramRuntime.registerParam(a);if(!this.layoutParent?.options.layeredChildren){const a=l=>this.paramRuntime.findRuntimeForParam(l)?void 0:this.paramRuntime.allocateSetter(l,0);this.#o=a("height"),this.#s=a("width")}}get name(){return this.spec.name??this.#e}get explicitName(){return this.spec.name}get defaultName(){return this.#e}get coords(){return this.facetCoords.values().next().value}getPadding(){return this._cache("size/padding",()=>qe.createFromConfig(this.spec.padding))}getOverhang(){return qe.zero()}isScrollable(){return this.spec.viewportWidth!=null||this.spec.viewportHeight!=null}getSize(){return this._cache("size/size",()=>this.isConfiguredVisible()?new Tn(this.#l("width"),this.#l("height")):Nm)}getViewportSize(){if(!this.isScrollable())return this.getSize();if(!this.isConfiguredVisible())return Nm;const e=this.getSize();return new Tn(this.#l("viewportWidth")??e.width,this.#l("viewportHeight")??e.height)}#l(e){let n=this.spec[e];const i=Tf(n),r=e=="viewportWidth"||e=="viewportHeight";if(i){if(r)throw new He(`Cannot use step-based size with "${e}"!`,this);const s=n.step,o=this.getScaleResolution(e=="width"?"x":"y")?.getScale();if(o){let a=0;if(sn(o.type))a=o.domain().length;else if(["locus","index"].includes(o.type)){const c=o.domain();a=na(c)-c[0]}else throw new He(`Cannot use step-based size with "${o.type}" scale!`,this);const l=o;return a=nf(a,l.paddingInner(),l.paddingOuter()),{px:a*s,grow:0}}else throw new He(`Cannot use step-based size with "${e}"!`,this)}else return(n&&Mm(n))??(r?void 0:{px:0,grow:1})}registerStepSizeInvalidation(){this.#u("width","x"),this.#u("height","y")}#u(e,n){const i=this.spec[e];if(!Tf(i))return;const r=this.getScaleResolution(n);if(!r)throw new He("Cannot use 'step' size without a scale!",this);const s=()=>this.invalidateSizeCache();r.addEventListener("domain",s),this.registerDisposer(()=>r.removeEventListener("domain",s))}isConfiguredVisible(){return this.context.isViewConfiguredVisible(this)}isVisibleInSpec(){return this.spec.visible??!0}isVisible(){return this.getLayoutAncestors().every(e=>e.isConfiguredVisible())}isDomainInert(){if(this.spec.domainInert)return!0;const e=this.dataParent;return e?e.isDomainInert():!1}getDataInitializationState(){return this.#c}_setDataInitializationState(e){this.#c=e}isDataInitialized(){return this.#c==="ready"}getEffectiveOpacity(){return this.opacityFunction(this.layoutParent?.getEffectiveOpacity()??1)}getPathString(){return this.getLayoutAncestors().map(e=>e.name).reverse().join("/")}#f(e){const n=[];let i=this;do n.push(i),i=i[e];while(i);return n}getLayoutAncestors(){return this.#f("layoutParent")}getDataAncestors(){return this.#f("dataParent")}handleBroadcast(e){for(const n of this.#t[e.type]||[])n(e)}_addBroadcastHandler(e,n){let i=this.#t[e];return i||(i=[],this.#t[e]=i),i.push(n),()=>{const r=this.#t[e];if(!r)return;const s=r.indexOf(n);s>=0&&r.splice(s,1)}}handleInteractionEvent(e,n,i){const r=i?this.#n:this.#i;for(const s of r[n.type]||[])s(e,n)}addInteractionEventListener(e,n,i){const r=i?this.#n:this.#i;let s=r[e];s||(s=[],r[e]=s),s.push(n)}removeInteractionEventListener(e,n,i){let s=(i?this.#n:this.#i)?.[e];if(s){const o=s.indexOf(n);o>=0&&s.splice(o,1)}}visit(e){try{const n=e(this);if(e.postOrder&&e.postOrder(this),n!==Ar)return n}catch(n){throw n.view=this,n}}getDescendants(){const e=[];return this.visit(n=>{e.push(n)}),e}dispose(){for(const n of this.#a)n();this.#a.length=0;const e=this.flowHandle;e?.collector&&(this.context.dataFlow.pruneCollectorBranch(e.collector),this.context.dataFlow.removeCollector(e.collector)),e?.dataSource&&e.dataSource.view===this&&!e.dataSource.identifier&&this.context.dataFlow.removeDataSource(e.dataSource),this.paramRuntime.dispose(),this.context.dataFlow.loadingStatusRegistry.delete(this),this.flowHandle=void 0}registerDisposer(e){this.#a.push(e)}disposeSubtree(){const e=()=>{};e.postOrder=n=>{n.dispose()},this.visit(e)}configureViewOpacity(){(!this.opacityFunction||this.opacityFunction===ow)&&(this.opacityFunction=bF(this))}onBeforeRender(){this.#r||(this.#r=!0)}hasRendered(){return this.#r}render(e,n,i={}){i.firstFacet&&this.facetCoords.clear(),this.facetCoords.set(i.facetId,i.clipRect?n.intersect(i.clipRect):n),this.#s?.(n.width),this.#o?.(n.height)}getEncoding(){const e=this.dataParent&&!this.options.blockEncodingInheritance?this.dataParent.getEncoding():{},n=this.spec.encoding||{},i={...e,...n};for(const[r,s]of Object.entries(i))s===null&&delete i[r];return i}getFacetAccessor(e){if(this.layoutParent)return this.layoutParent.getFacetAccessor(this)}getFacetFields(e){const n=this.getEncoding().sample;return en(n)?[n.field]:this.layoutParent?.getFacetFields(this)}getSampleFacetTexture(){}getScaleResolution(e){const n=En(e);return this.getDataAncestors().map(i=>i.resolutions.scale[n]).find(i=>i)}getAxisResolution(e){const n=En(e);return this.getDataAncestors().map(i=>i.resolutions.axis[n]).find(i=>i)}getConfiguredResolution(e,n){return this.spec.resolve?.[n]?.[e]}getConfiguredOrDefaultResolution(e,n){return this.getConfiguredResolution(e,n)??this.getConfiguredResolution("default",n)??this.getDefaultResolution(e,n)}getDefaultResolution(e,n){return"independent"}getBaseUrl(){return gi(()=>this.dataParent?.getBaseUrl(),CF(this.spec.baseUrl))}isPickingSupported(){return!0}getTitleText(){const e=this.spec.title;if(e)return le(e)?e:be(e.text)?this.paramRuntime.evaluateAndGet(e.text.expr):e.text}_cache(e,n){return Wa(this,e,n)}_invalidateCacheByPrefix(e,n="self"){switch(n){case"self":Gs(this,e);break;case"ancestors":for(const i of this.getLayoutAncestors())Gs(i,e);break;case"progeny":this.visit(i=>Gs(i,e));break}}invalidateSizeCache(){Gs(this,"size"),this._invalidateCacheByPrefix("size","ancestors")}propagateInteractionEvent(e){}}function EF(t){return"unitsPerPixel"in t}function bF(t){const e="opacity"in t.spec?t.spec.opacity:void 0;if(e!==void 0){if(Ve(e))return n=>n*e;if(EF(e)){const n=c=>{const u=t.getScaleResolution(c),f=u?.getScale();if(["linear","index","locus"].includes(f?.type))return{scale:f,scaleResolution:u}},i=cw(e.values,"opacity.values",t);if(!Ee(e.unitsPerPixel))throw new He('"opacity.unitsPerPixel" must be an array.',t);let r=()=>1,s=[];const o=()=>{const c=cw(s.map(h=>h()),"opacity.unitsPerPixel",t),u=xF(c,i,t),f=Ku().domain(u.unitsPerPixel).range(u.values).clamp(!0);r=h=>f(h)};s=e.unitsPerPixel.map(c=>{if(be(c)){const u=t.paramRuntime.watchExpression(c.expr,()=>{o(),t.context.animator.requestRender()});return()=>u(null)}else return()=>c}),o();const a=c=>{const f=c.scaleResolution.getAxisLength()||1e3;return Hr(c.scale.domain())/f};let l;if(e.channel==="auto"){const c=n("x"),u=n("y");if(c&&u)l=()=>(a(c)+a(u))/2;else if(c)l=()=>a(c);else if(u)l=()=>a(u);else throw new He("Cannot find a resolved quantitative x or y scale for dynamic opacity!",t)}else{const c=e.channel?n(e.channel):n("x")??n("y");if(!c)throw new He("Cannot find a resolved quantitative scale for dynamic opacity!",t);l=()=>a(c)}return c=>r(l())*c}else if(be(e)){const n=t.paramRuntime.watchExpression(e.expr,()=>t.context.animator.requestRender());return i=>n(null)*i}}return n=>n}function xF(t,e,n){if(!t.length)throw new He('"opacity.unitsPerPixel" must contain at least one stop.',n);if(t.length!==e.length)throw new He('"opacity.unitsPerPixel" and "opacity.values" must have the same length.',n);t.forEach((o,a)=>{if(o<=0)throw new He("Invalid opacity.unitsPerPixel value at index "+a+". Stop values must be positive.",n)});const i=t.map((o,a)=>({stop:o,value:e[a]}));i.sort((o,a)=>a.stop-o.stop);const r=i.map(o=>o.stop),s=i.map(o=>o.value);for(let o=1;o<t.length;o++)if(r[o-1]<=r[o])throw new He('"opacity.unitsPerPixel" must be strictly decreasing.',n);return{unitsPerPixel:r,values:s}}function cw(t,e,n){if(!Ee(t))throw new He('"'+e+'" must evaluate to an array.',n);return t.map((i,r)=>{if(!Ve(i)||!Number.isFinite(i))throw new He("Invalid "+e+" value at index "+r+". Expected a finite number.",n);return i})}const Tf=t=>!!t?.step;function IF(t){return BF(t?.search,"search")}function BF(t,e){if(!t)return;const n=Array.isArray(t)?t:[t];if(n.length===0)throw new Error("The "+e+" channel array must not be empty.");const i=[];for(const r of n){if(!r||typeof r!="object"||!("field"in r))throw new Error("The "+e+" channel must be a field definition or an array of field definitions.");const s=r.field;if(typeof s!="string")throw new Error("The "+e+" channel field definition must include a string field name.");i.push(s)}return i}const vF={point:vk,rect:Ck,rule:kk,link:Lk,text:Hk};class nt extends aw{#e;#t=!1;#n=null;constructor(e,n,i,r,s,o){super(e,n,i,r,s,o),this.spec=e;const a=vF[this.getMarkType()];if(a)this.mark=new a(this);else throw new Error(`No such mark: ${this.getMarkType()}`);this.resolve(),this.#e=this.paramRuntime.allocateSetter("zoomLevel",1);for(const l of["x","y"]){const c=this.getScaleResolution(l);if(c){const u=()=>{this.#e(Math.sqrt(this.getZoomLevel()))};c.addEventListener("domain",u),this.registerDisposer(()=>c.removeEventListener("domain",u))}}this.needsAxes={x:!0,y:!0},this.#i()}#i(){for(const[e,n]of this.paramRuntime.paramConfigs){if(!("select"in n))continue;const i=aa(n.select),r=i.on,s=i.clear;if(ca(i)){let a=0;const l=h=>{this.paramRuntime.setValue(e,h)},c=()=>{const h=this.context.getCurrentHover();return h?.mark?.unitView===this?h.datum:null},u=r.filter?rw(r.filter):()=>!0,f=(h,A)=>{if(!u(A.proxiedMouseEvent))return;const d=c(),g=d?d[gt]:0;let m;if(i.toggle)if(A.mouseEvent.shiftKey){if(d){const w=this.paramRuntime.getValue(e);m=tv(w,{toggle:[d]})}}else m=Yl(d?[d]:null);else g!=a&&(a=g,m=Hl(d));m!==void 0&&l(m)};if(this.addInteractionEventListener(["mouseover","pointerover"].includes(r.type)?"mousemove":r.type,f),s){const h=s.filter?rw(s.filter):()=>!0,A=(d,g)=>{if(!h(g.proxiedMouseEvent))return;a=0;const m=i.toggle?Yl():Hl(null);l(m)};this.addInteractionEventListener(s.type,A)}}}}render(e,n,i={}){super.render(e,n,i),this.isConfiguredVisible()&&(e.pushView(this,n),e.renderMark(this.mark,i),e.popView(this))}getMarkType(){return typeof this.spec.mark=="object"?this.spec.mark.type:this.spec.mark}getEncoding(){const e=super.getEncoding(),n=this.mark.getSupportedChannels();for(const i of Object.keys(e))i!=="key"&&(n.includes(i)||delete e[i]);return e}resolve(e){if(!e){this.resolve("scale"),this.resolve("axis");return}const n=this.mark.encoding;for(const[i,r]of Object.entries(n)){if(!r||Array.isArray(r))continue;let s;if(pt(r))s=r;else if(Ul(r)){const l=r.condition;if(!Array.isArray(l)&&pt(l))s=l;else continue}else continue;const o=En(s.resolutionChannel??i);if(!oa(o)||e=="axis"&&!ms(o))continue;let a=this;for(;(a.getConfiguredOrDefaultResolution(o,e)=="forced"||a.dataParent&&["shared","excluded","forced"].includes(a.dataParent.getConfiguredOrDefaultResolution(o,e)))&&a.getConfiguredOrDefaultResolution(o,e)!="excluded";)a=a.dataParent;if(e=="axis"&&ms(i)&&_l(o)){a.resolutions[e][o]||(a.resolutions[e][o]=new j8(o));const l=a.resolutions[e][o],c=l.registerMember({view:this,channel:i,channelDef:s});this.registerDisposer(()=>{c()&&a.resolutions[e][o]===l&&delete a.resolutions[e][o]})}else if(e=="scale"&&oa(i)){if(!a.resolutions[e][o]){const f=new K8(o);a.resolutions[e][o]=f;const h=A=>{this.context.glHelper?.createRangeTexture(A.scaleResolution,!0)};f.addEventListener("range",h),f.addEventListener("domain",h),this.registerDisposer(()=>{f.removeEventListener("range",h),f.removeEventListener("domain",h)})}const l=!this.isDomainInert(),c=a.resolutions[e][o],u=c.registerMember({view:this,channel:i,channelDef:s,contributesToDomain:l});this.registerDisposer(()=>{u()&&a.resolutions[e][o]===c&&(c.dispose(),delete a.resolutions[e][o])})}}}dispose(){super.dispose(),this.mark.dispose()}getDataAccessor(e){const n=this.mark.encoders;if(n)return n[e]?.dataAccessor}getSearchAccessors(){if(!this.#n){const e=IF(this.getEncoding())??[];this.#n=e.map(n=>$(n))}return this.#n}getFacetAccessor(e){const n=this.getDataAccessor("sample");return n||super.getFacetAccessor(this)}getCollector(){return this.flowHandle?.collector}registerDomainSubscriptions(){if(this.#t||this.isDomainInert())return;const e=this.getCollector();if(!e)return;const n=this.mark.encoders;if(!n)throw new Error("Encoders are not initialized!");this.#t=!0;const i=new Map;for(const r of Object.values(n)){if(!r)continue;const s=r.accessors??[];if(s.length!==0)for(const o of s){if(!Yd(o)||o.channelDef.domainInert)continue;const a=this.getScaleResolution(o.scaleChannel);if(!a)throw new Error("Missing scale resolution for channel: "+o.scaleChannel);let l=i.get(a);l||(l=new Set,i.set(a,l)),l.add(o)}}for(const[r,s]of i){if(s.size===0)continue;const o=r.registerCollectorSubscriptions(e,s);this.registerDisposer(o)}}getZoomLevel(){const e=n=>this.getScaleResolution(n)?.getZoomLevel()??1;return ni.map(e).reduce((n,i)=>n*i,1)}propagateInteractionEvent(e){this.handleInteractionEvent(void 0,e,!0),e.target=this,!e.stopped&&this.handleInteractionEvent(void 0,e,!1)}getDefaultResolution(e,n){return e=="x"?"shared":"independent"}}class Pf extends Error{constructor(e,n){super(n),this.kind=e}}async function lw(t,e={}){let n;try{n=await fetch(t,{signal:e.signal})}catch(i){throw new Pf("network",String(i))}if(!n.ok)throw new Pf("http",String(n.status)+" "+n.statusText);try{return await n.json()}catch(i){throw new Pf("json",String(i))}}function SF(t){const e=new Set;t.visit(n=>{for(const i of Object.values(n.resolutions.scale)){const r=i.name;if(r&&e.has(r))throw new Error(`The same scale name "${r}" occurs in multiple scale resolutions!`);e.add(r)}})}function DF(t){for(const e of ni){const n=t.getScaleResolution(e);n&&!n.name&&n.isZoomable()&&(n.name=`${e}_at_root`)}}function Lf(t,e=()=>!0){return Promise.allSettled(t).then(n=>{if(e())for(const i of n)"value"in i?i.value.finalizeGraphicsInitialization():"reason"in i&&console.error(i.reason)})}async function QF(t,e,n){const i=t.import;if(!("url"in i))throw new Error("Not an url import: "+JSON.stringify(i));const r=gi(e,i.url);let s;try{s=await lw(r)}catch(o){throw new Error(`Could not load imported view spec: ${r}. Reason: ${o.message}`)}if(n.isViewSpec(s))return s.baseUrl=gi(gm(i.url),s.baseUrl),s;throw new Error(`The imported spec "${r}" is not a view spec: ${JSON.stringify(t)}`)}function kF(t){const e=t.getSize(),n=t.getPadding(),i=(r,s)=>r.grow>0?void 0:r.px+s;return{width:i(e.width,n.horizontalTotal),height:i(e.height,n.verticalTotal)}}function*Of(t,e=[]){for(const[n,i]of t.entries())if(i instanceof Map)for(const r of Of(i,[...e,n]))yield r;else yield[[...e,n],i]}const uw=2147483647,FF=fw([uw]);function RF(t){for(let e=1;e<t.length;e++)if(t[e]<t[e-1])return!1;return!0}function fw(t){let e=0;for(let n=0,i=t.length;n<i;n++)t[n]>e&&(e=t[n]);return Math.floor(Math.log2(e)/4)+1}function NF(t){const e=fw(t);let n=Array.from({length:t.length},(s,o)=>o);if(RF(t))return n;let i=new Array(t.length);const r=new Array(16);for(let s=0;s<e;s++){r.fill(0);const o=s*4,a=Math.pow(16,s),l=c=>{const u=t[n[c]];return s>=FF?u>uw?Math.floor(u/a)%16:0:u>>o&15};for(let c=0;c<t.length;c++)r[l(c)]++;for(let c=1;c<16;c++)r[c]+=r[c-1];for(let c=t.length-1;c>=0;c--)i[--r[l(c)]]=n[c];[n,i]=[i,n]}return n}const ac="|",Uf="\\";class MF{#e=null;#t=null;#n=!1;invalidate(){this.#e=null,this.#t=null,this.#n=!1}findDatum(e,n,i){if(!e||e.length===0)return;const r=e.join(", ");if(e.length!==n.length)throw new Error(`Key tuple length ${n.length} does not match fields [${r}]`);(!this.#e||!this.#s(e))&&this.#i(e,i);const s=this.#t;let o;if(this.#n){let a="";for(let l=0;l<n.length;l++){l>0&&(a+=ac);const c=s[l],u=cc(n[l],c);a+=Aw(u)}o=a}else{const a=s[0];o=cc(n[0],a)}return this.#e.get(o)}#i(e,n){const i=e.map(a=>$(a)),r=new Map,s=e.join(", "),o=e.length!==1;if(o)for(const a of n)for(let l=0,c=a.length;l<c;l++){const u=a[l];let f="";for(let A=0;A<i.length;A++){A>0&&(f+=ac);const d=e[A],g=cc(i[A](u),d);f+=Aw(g)}if(r.get(f)!==void 0){const A=i.map(d=>d(u));throw new Error(`Duplicate key detected for fields [${s}]: ${JSON.stringify(A)}`)}r.set(f,u)}else{const a=i[0],l=e[0];for(const c of n)for(let u=0,f=c.length;u<f;u++){const h=c[u],A=cc(a(h),l);if(r.get(A)!==void 0)throw new Error(`Duplicate key detected for fields [${s}]: ${JSON.stringify(A)}`);r.set(A,h)}}this.#e=r,this.#t=[...e],this.#n=o}#s(e){if(!this.#t||this.#t.length!==e.length)return!1;for(let n=0;n<e.length;n++)if(this.#t[n]!==e[n])return!1;return!0}}function cc(t,e){if(t===void 0)throw new Error(`Key field "${e}" is undefined. Ensure all key fields are present in the data.`);if(t===null)throw new Error(`Key field "${e}" is null. Ensure all key fields are present in the data.`);if(typeof t!="string"&&typeof t!="number"&&typeof t!="boolean")throw new Error(`Key field "${e}" must be a scalar value (string, number, or boolean).`);return t}function TF(t){if(!(t.indexOf(Uf)!==-1||t.indexOf(ac)!==-1))return t;let n="";for(let i=0;i<t.length;i++){const r=t[i];(r===Uf||r===ac)&&(n+=Uf),n+=r}return n}function Aw(t){return typeof t=="string"?TF(t):String(t)}class hw extends Pl{#e=[];#t=$(gt);#n=[];#i=new MF;#s;#o;#r=new PF;get behavior(){return Tl}get label(){return"collect"}constructor(e){super(),this.params=e??{type:"collect"},this.observers=new Set,this.facetBatches=new jt([],JSON.stringify),this.#o=OF(this.params?.sort),this.#a()}#a(){this.#e=[],this.#n=[],this.#i.invalidate(),this.facetBatches.clear(),this.facetBatches.set(void 0,this.#e)}reset(){super.reset(),this.#a()}handle(e){this.#e.push(e)}beginBatch(e){this.#i.invalidate(),HB(e)&&(this.#e=[],this.facetBatches.set(Ne(e.facetId),this.#e))}complete(){if(this.#e=[],this.params.groupby?.length){if(this.facetBatches.size>1)throw new Error("TODO: Support faceted data!");const e=this.facetBatches.get(void 0),n=this.params.groupby.map(r=>$(r)),i=n.length>1?Uo(e,...n):LF(e,n[0]);this.facetBatches.clear();for(const[r,s]of Of(i))this.facetBatches.set(r,s)}if(this.#o)for(const e of this.facetBatches.values())e.sort(this.#o);this.#f(),this.#c(),super.complete(),this.#u();for(const e of this.observers)e(this)}observe(e){return this.observers.add(e),()=>{this.observers.delete(e)}}#c(){if(this.children.length)for(const[e,n]of this.facetBatches.entries()){if(e){const i={type:"facet",facetId:e};for(const r of this.children)r.beginBatch(i)}for(let i=0,r=n.length;i<r;i++)this._propagate(n[i])}}repropagate(){for(const e of this.children)e.reset();this.#c();for(const e of this.children)e.complete();this.#u()}getDomain(e,n,i){return this.#r.getDomain(e,()=>{const r=$a(n);if(i.constant)r.extend(i({}));else if(this.completed)for(const s of this.facetBatches.values())for(let o=0,a=s.length;o<a;o++)r.extend(i(s[o]));return r})}subscribeDomainChanges(e,n){return this.#r.subscribe(e,n)}getData(){switch(this.#l(),this.facetBatches.size){case 0:return[];case 1:return[...this.facetBatches.values()][0];default:{const e=this.facetBatches;return{[Symbol.iterator]:function*(){for(const i of e.values())yield*i}}}}}visitData(e){this.#l();for(const n of this.facetBatches.values())for(let i=0;i<n.length;i++)e(n[i])}getItemCount(){let e=0;for(const n of this.facetBatches.values())e+=n.length;return e}#l(){if(!this.completed)throw new Error("Data propagation is not completed! No data are available.")}#u(){this.#r.hasCachedDomains()&&this.#r.clear(),this.#r.notify()}#f(){this.#s=[];const e=this.facetBatches.values().next().value?.[0];if(e==null||!(gt in e))return;let n=0;const i=[],r=this.#t;for(const[s,o]of this.facetBatches){this.#s.push({start:n,stop:n+o.length,facetId:s}),n+=o.length;for(let a=0,l=o.length;a<l;a++)i.push(r(o[a]))}this.#n=NF(i)}findDatumByUniqueId(e){if(!this.#n.length)return;const n=Xn(a=>a.start).right,i=this.#t,r=Xn(a=>i(s(a))).left,s=a=>{const l=n(this.#s,a),c=this.#s[l-1];return!c||a>=c.stop?void 0:this.facetBatches.get(c.facetId)[a-c.start]},o=r(this.#n,e);if(o>=0){const a=s(this.#n[o]);if(a&&i(a)===e)return a}}findDatumByKey(e,n){return this.#l(),this.#i.findDatum(e,n,this.facetBatches.values())}}class PF{#e=new Map;#t=new Map;hasCachedDomains(){return this.#e.size>0}clear(){this.#e.clear()}getDomain(e,n){const i=this.#e.get(e);if(i)return i;{const r=n();return this.#e.set(e,r),r}}subscribe(e,n){let i=this.#t.get(e);return i||(i=new Set,this.#t.set(e,i)),i.add(n),()=>{const r=this.#t.get(e);r&&(r.delete(n),r.size===0&&this.#t.delete(e))}}notify(){if(this.#t.size===0)return;const e=new Set;for(const n of this.#t.values())for(const i of n)e.add(i);for(const n of e)n()}}function LF(t,e){const n=new Map;for(let i=0,r=t.length;i<r;i++){const s=t[i],o=e(s);let a=n.get(o);a||(a=[],n.set(o,a)),a.push(s)}return n}function OF(t){if(t?.field){const e=Ne(t.field);if(e.length==1&&!e[0].includes(".")){const n=Ne(t.order)[0]??"ascending",i=JSON.stringify(e[0]);return new Function("a","b",`return a[${i}] ${n==="ascending"?"-":"+"} b[${i}];`)}return Eh(t.field,t.order)}}class UF extends De{get behavior(){return Nt}constructor(e){super(e),this.params=e,this.startAccessor=$(e.start),this.endAccessor=$(e.end),this.chromAccessor=e.chrom?$(e.chrom):n=>{},this.weightAccessor=e.weight?$(e.weight):n=>1,this.as={coverage:e.as??"coverage",start:e.asStart??e.start,end:e.asEnd??e.end,chrom:e.asChrom??e.chrom},this.createSegment=new Function("start","end","coverage","chrom","return {"+Object.entries(this.as).filter(([n,i])=>i).map(([n,i])=>`${JSON.stringify(i)}: ${n}`).join(", ")+"};"),this.ends=new fr}reset(){super.reset(),this.initialize()}initialize(){const e=this.as.coverage,n=this.as.end,i=this.as.chrom,r=this.startAccessor,s=this.endAccessor,o=this.chromAccessor,a=this.weightAccessor;let l,c,u,f=0,h=NaN;const A=this.ends;A.clear();const d=p=>{this._propagate(p),l=null},g=(p,w,C)=>{if(p==w)return;let y=!1;l&&(l[e]===C?(l[n]=w,y=!0):l[e]!=0&&d(l)),y||(l=this.createSegment(p,w,C,u))},m=()=>{let p=0;for(;(p=A.peekValue())!==void 0;)g(h,p,f),h=p,f-=A.pop();h=NaN,l&&d(l)};this.handle=p=>{const w=r(p);let C=0;for(;(C=A.peekValue())!==void 0&&C<w;)g(h,C,f),h=C,f-=A.pop();if(i){let x=o(p);x!==c&&(m(),u=x,c=u)}isNaN(h)||g(h,w,f),h=w;const y=a(p);f+=y,A.push(y,s(p))},this.complete=()=>{m(),super.complete()},this.beginBatch=p=>{m(),c=null,super.beginBatch(p)}}}function _F(t,e,n=s=>+s,i=0,r=t.length){const s=new fr,o=r-i;let a;for(a=0;a<e&&a<o;a++)s.push(a,n(t[i+a]));for(;a<o;a++){const u=n(t[i+a]);u>=s.peekValue()&&(s.push(a,u),s.pop())}const l=[];let c;for(;(c=s.pop())!==void 0;)l.push(t[i+c]);return l.reverse()}class GF{constructor(e,n=-1/0,i=1/0){this.maxSize=e,this.lowerLimit=n,this.upperLimit=i;const r=this.maxSize*2+1;this.lowerLimits=new Float64Array(r),this.upperLimits=new Float64Array(r),this.lowerChildren=new Int32Array(r),this.upperChildren=new Int32Array(r),this.reset()}reset(){this.lowerLimits.fill(0),this.upperLimits.fill(0),this.lowerChildren.fill(0),this.upperChildren.fill(0),this.n=1,this.lowerLimits[0]=this.lowerLimit,this.upperLimits[0]=this.upperLimit}_findSlot(e,n,i=0){if(e>=this.lowerLimits[i]&&n<=this.upperLimits[i]){const r=this.lowerChildren[i];if(r){const s=this._findSlot(e,n,r);return s>=0?s:this._findSlot(e,n,this.upperChildren[i])}else return i}else return-1}reserve(e,n){if(n-e<=0)throw new Error("Cannot reserve an empty or negative-size slot!");if(this.n+1>this.lowerLimits.length)return!1;const i=this._findSlot(e,n);if(i<0)return!1;const r=this.n++,s=this.n++;return this.lowerLimits[r]=this.lowerLimits[i],this.upperLimits[r]=e,this.lowerLimits[s]=n,this.upperLimits[s]=this.upperLimits[i],this.lowerChildren[i]=r,this.upperChildren[i]=s,!0}}class zF extends De{get behavior(){return Tl}constructor(e,n){if(super(e),this.params=e,this._data=[],this.channel=e.channel??"x",!["x","y"].includes(this.channel))throw new Error("Invalid channel: "+this.channel);this.startPosAccessor=$(this.params.pos),this.endPosAccessor=$(this.params.pos2??this.params.pos),this.startPosBisector=Xn(this.startPosAccessor),this.endPosBisector=Xn(this.endPosAccessor),this.scoreAccessor=$(this.params.score),this.widthAccessor=$(this.params.width),this.laneAccessor=this.params.lane?$(this.params.lane):o=>0,this.padding=this.params.padding??0,this.reservationMaps=new Map,this.resolution=n.getScaleResolution(this.channel);const i=()=>this._filterAndPropagate();this.schedule=()=>n.context.animator.requestTransition(i);const r=()=>this.schedule();this.resolution.addEventListener("domain",r),this.registerDisposer(()=>this.resolution.removeEventListener("domain",r));const s=n._addBroadcastHandler("layoutComputed",()=>this.schedule());this.registerDisposer(s)}complete(){const e=this.startPosAccessor;this._data.sort((n,i)=>e(n)-e(i));for(const n of new Set(this._data.map(this.laneAccessor)))this.reservationMaps.set(n,new GF(200));this.schedule(),super.complete()}_filterAndPropagate(){super.reset();const e=this.resolution.getScale(),n=this.resolution.getAxisLength();if(!n)return;for(const o of this.reservationMaps.values())o.reset();const i=e.domain(),s=_F(this._data,70,this.scoreAccessor,this.endPosBisector.left(this._data,i[0]),this.startPosBisector.right(this._data,i[1]));for(const o of s){let a=e(this.startPosAccessor(o))*n,l=e(this.endPosAccessor(o))*n;const c=l-a,u=this.widthAccessor(o)+this.padding*2;let f=(a+l)/2;const h=Math.max(0,(c-u)/2);if(h>0){const A=Math.max(0,u/2-f);f+=Math.min(A,h);const d=Math.max(0,u/2+f-n);f-=Math.min(d,h)}if(this.reservationMaps.get(this.laneAccessor(o)).reserve(f-u/2,f+u/2))if(this.params.asMidpoint){const A=Object.assign({},o);A[this.params.asMidpoint]=e.invert(f/n),this._propagate(A)}else this._propagate(o)}super.complete()}reset(){super.reset(),this._data=[],this.groups=new Map}handle(e){this._data.push(e)}}class HF extends De{constructor(e,n){super(e,n),this.params=e,this.predicate=void 0}initialize(){let e="";if(YF(this.params))e=this.params.expr;else if(VF(this.params)){const n=this.paramRuntime.findValue(this.params.param);if(!n)throw new Error(`Cannot initialize filter transform. Selection parameter "${this.params.param}" not found!`);e=nv(this.params,n)}else throw new Error("Invalid filter params: "+JSON.stringify(this.params));this.predicate=this.paramRuntime.watchExpression(e,()=>this.repropagate(),{scopeOwned:!1,registerDisposer:n=>this.registerDisposer(n)})}handle(e){this.predicate(e)&&this._propagate(e)}}function YF(t){return"expr"in t}function VF(t){return"param"in t}class JF extends De{get behavior(){return Nt}constructor(e){super(e),this.params=e;const n=e.index;if(e.fields){const i=Ne(e.fields).map(s=>$(s)),r=Ne(e.as||e.fields);if(i.length!==r.length)throw new Error(`Lengths of "fields" (${i.length}), and "as" (${r.length}) do not match!`);this.handle=s=>{const o=i.map((l,c)=>l(s)??[]),a=o[0].length;for(let l=0;l<a;l++){const c=Object.assign({},s);for(let u=0;u<i.length;u++)c[r[u]]=l<o[u].length?o[u][l]:null;n&&(c[n]=l),this._propagate(c)}}}else this.handle=i=>{for(let r=0;r<i.length;r++){const s=Object.assign({},i[r]);n&&(s[n]=r),this._propagate(s)}}}}const qF=48;function*KF(t,e=","){const n=e.charCodeAt(0);let i=0;for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);s==n?(yield i,i=0):i=i*10+s-qF}yield i}class jF extends De{get behavior(){return Nt}constructor(e){super(e);const n=$(e.exons??"exons"),i=$(e.start??"start"),[r,s]=e.as||["exonStart","exonEnd"];this.handle=o=>{let a=i(o),l=a,c=!0;const u=n(o);for(const f of KF(u)){if(c)l=a+f;else{a=l+f;const h=Object.assign({},o);h[r]=l,h[s]=a,this._propagate(h)}c=!c}}}}class WF extends De{get behavior(){return Nt}constructor(e){super(e);const n=Ne(e.field).map(s=>$(s)),i=Ne(e.separator),r=Ne(e.as||e.field);if(n.length!==i.length||n.length!==r.length)throw new Error(`Lengths of "separator" (${i.length}), "fields" (${n.length}), and "as" (${r.length}) do not match!`);this.handle=s=>{if(n.some(l=>!l(s)))return;const o=n.map((l,c)=>l(s).split(i[c]));XF(o,s);const a=o[0].length;for(let l=0;l<a;l++){const c=Object.assign({},s);for(let u=0;u<n.length;u++)c[r[u]]=o[u][l];this._propagate(c)}}}}function XF(t,e){const n=t.map(i=>i.length);if(!n.every(i=>i==n[0]))throw new Error("Mismatching number of elements in the fields to be split: "+JSON.stringify(e))}class ZF extends De{get behavior(){return Cn}constructor(e,n){super(e,n),this.params=e,this.as=e.as,this.fn=void 0}initialize(){this.fn=this.paramRuntime.watchExpression(this.params.expr,()=>this.repropagate(),{scopeOwned:!1,registerDisposer:e=>this.registerDisposer(e)})}handle(e){e[this.as]=this.fn(e),this._propagate(e)}}class dw extends De{get behavior(){return Cn}constructor(e,n){e={channel:"x",...e},super(e),this.params=e;const i=e.channel;if(!["x","y"].includes(i))throw new Error("Invalid channel: "+i);const r=n.getScaleResolution(i).getScale(),s="genome"in r?r.genome():void 0;if(!s)throw new Error("LinearizeGenomicCoordinate transform requires a locus scale!");const o=$(e.chrom),a=Ne(e.pos).map(g=>$(g)),l=Ne(e.as);if(a.length!=l.length)throw new Error('The number of "pos" and "as" elements must be equal!');const c=Ne(e.offset);let u;if(c.length==0)u=new Array(a.length).fill(0);else if(c.length==1)u=new Array(a.length).fill(c[0]);else if(c.length==a.length)u=c;else throw new Error(`Invalid "offset" parameter: ${JSON.stringify(e.offset)}!`);const f=new Function("datum","chromOffset","posAccessors",l.map((g,m)=>`datum[${JSON.stringify(g)}] = chromOffset + +posAccessors[${m}](datum) - ${u[m]};`).join(`
`));let h,A=0;const d=g=>{if(g!==h){if(A=s.cumulativeChromPositions.get(g),A===void 0)return;h=g}return A};this.handle=g=>{const m=o(g),p=d(m);if(p===void 0)throw new Error(`Unknown chromosome/contig "${m}" in datum: ${JSON.stringify(g)}`);f(g,p,a),this._propagate(g)}}}const gw={chars:JSON.parse('[{"id":87,"width":53,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":43.491,"chnl":15,"x":0,"y":0,"page":0},{"id":124,"width":17,"height":50,"xoffset":0,"yoffset":-32.193000000000005,"xadvance":10.521,"chnl":15,"x":0,"y":42,"page":0},{"id":40,"width":20,"height":49,"xoffset":0,"yoffset":-32.571000000000005,"xadvance":11.214,"chnl":15,"x":0,"y":94,"page":0},{"id":41,"width":19,"height":49,"xoffset":0,"yoffset":-32.571000000000005,"xadvance":11.214,"chnl":15,"x":0,"y":145,"page":0},{"id":36,"width":32,"height":49,"xoffset":0,"yoffset":-34.419000000000004,"xadvance":24.360000000000003,"chnl":15,"x":0,"y":196,"page":0},{"id":125,"width":21,"height":48,"xoffset":0,"yoffset":-32.193000000000005,"xadvance":12.642000000000001,"chnl":15,"x":0,"y":247,"page":0},{"id":91,"width":22,"height":48,"xoffset":0,"yoffset":-32.193000000000005,"xadvance":12.852,"chnl":15,"x":0,"y":297,"page":0},{"id":93,"width":19,"height":48,"xoffset":0,"yoffset":-32.193000000000005,"xadvance":12.852,"chnl":15,"x":0,"y":347,"page":0},{"id":123,"width":21,"height":48,"xoffset":0,"yoffset":-32.193000000000005,"xadvance":12.642000000000001,"chnl":15,"x":0,"y":397,"page":0},{"id":106,"width":19,"height":48,"xoffset":0,"yoffset":-30.639000000000003,"xadvance":10.08,"chnl":15,"x":0,"y":447,"page":0},{"id":81,"width":43,"height":47,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":33.621,"chnl":15,"x":21,"y":447,"page":0},{"id":77,"width":45,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":38.997,"chnl":15,"x":66,"y":447,"page":0},{"id":64,"width":43,"height":44,"xoffset":0,"yoffset":-28.539,"xadvance":35.133,"chnl":15,"x":23,"y":397,"page":0},{"id":92,"width":28,"height":43,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":18.984,"chnl":15,"x":68,"y":397,"page":0},{"id":47,"width":28,"height":43,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":18.984,"chnl":15,"x":98,"y":397,"page":0},{"id":109,"width":42,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":34.545,"chnl":15,"x":113,"y":447,"page":0},{"id":119,"width":42,"height":31,"xoffset":0,"yoffset":-21.315,"xadvance":32.991,"chnl":15,"x":157,"y":447,"page":0},{"id":42,"width":25,"height":42,"xoffset":0,"yoffset":-31.626,"xadvance":17.85,"chnl":15,"x":128,"y":397,"page":0},{"id":37,"width":42,"height":41,"xoffset":0,"yoffset":-30.387,"xadvance":33.663000000000004,"chnl":15,"x":155,"y":397,"page":0},{"id":79,"width":42,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":33.621,"chnl":15,"x":199,"y":397,"page":0},{"id":102,"width":24,"height":41,"xoffset":0,"yoffset":-30.534000000000002,"xadvance":14.721,"chnl":15,"x":243,"y":397,"page":0},{"id":100,"width":31,"height":41,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":23.520000000000003,"chnl":15,"x":269,"y":397,"page":0},{"id":98,"width":32,"height":41,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":23.520000000000003,"chnl":15,"x":302,"y":397,"page":0},{"id":56,"width":32,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":24.360000000000003,"chnl":15,"x":336,"y":397,"page":0},{"id":38,"width":40,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":29.904000000000003,"chnl":15,"x":370,"y":397,"page":0},{"id":108,"width":17,"height":41,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":9.912,"chnl":15,"x":412,"y":397,"page":0},{"id":107,"width":31,"height":41,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":21.336000000000002,"chnl":15,"x":431,"y":397,"page":0},{"id":48,"width":33,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":24.360000000000003,"chnl":15,"x":464,"y":397,"page":0},{"id":71,"width":38,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":30.681,"chnl":15,"x":21,"y":347,"page":0},{"id":83,"width":31,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":22.785,"chnl":15,"x":61,"y":347,"page":0},{"id":63,"width":27,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":18.795,"chnl":15,"x":94,"y":347,"page":0},{"id":105,"width":18,"height":41,"xoffset":0,"yoffset":-30.639000000000003,"xadvance":10.08,"chnl":15,"x":123,"y":347,"page":0},{"id":51,"width":32,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":24.360000000000003,"chnl":15,"x":143,"y":347,"page":0},{"id":104,"width":31,"height":41,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":23.436,"chnl":15,"x":177,"y":347,"page":0},{"id":67,"width":37,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":28.056,"chnl":15,"x":210,"y":347,"page":0},{"id":88,"width":37,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":27.258000000000003,"chnl":15,"x":249,"y":347,"page":0},{"id":68,"width":40,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":31.941000000000003,"chnl":15,"x":288,"y":347,"page":0},{"id":70,"width":32,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":23.751,"chnl":15,"x":330,"y":347,"page":0},{"id":34,"width":23,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":15.561000000000002,"chnl":15,"x":364,"y":347,"page":0},{"id":72,"width":38,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":32.067,"chnl":15,"x":389,"y":347,"page":0},{"id":73,"width":18,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":11.760000000000002,"chnl":15,"x":429,"y":347,"page":0},{"id":74,"width":24,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":17.745,"chnl":15,"x":449,"y":347,"page":0},{"id":75,"width":38,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":27.825000000000003,"chnl":15,"x":24,"y":297,"page":0},{"id":76,"width":31,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":21.567,"chnl":15,"x":475,"y":347,"page":0},{"id":66,"width":35,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":27.153000000000002,"chnl":15,"x":64,"y":297,"page":0},{"id":78,"width":38,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":32.067,"chnl":15,"x":101,"y":297,"page":0},{"id":33,"width":18,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":11.298,"chnl":15,"x":141,"y":297,"page":0},{"id":80,"width":34,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":25.221,"chnl":15,"x":161,"y":297,"page":0},{"id":65,"width":38,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":28.434,"chnl":15,"x":197,"y":297,"page":0},{"id":82,"width":36,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":26.313000000000002,"chnl":15,"x":237,"y":297,"page":0},{"id":35,"width":33,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":275,"y":297,"page":0},{"id":84,"width":34,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.801000000000002,"chnl":15,"x":310,"y":297,"page":0},{"id":85,"width":37,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":30.891000000000002,"chnl":15,"x":346,"y":297,"page":0},{"id":86,"width":38,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":28.434,"chnl":15,"x":385,"y":297,"page":0},{"id":39,"width":16,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":8.568000000000001,"chnl":15,"x":425,"y":297,"page":0},{"id":69,"width":32,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.255000000000003,"chnl":15,"x":443,"y":297,"page":0},{"id":89,"width":36,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":26.208000000000002,"chnl":15,"x":23,"y":247,"page":0},{"id":90,"width":34,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":25.284000000000002,"chnl":15,"x":477,"y":297,"page":0},{"id":49,"width":31,"height":40,"xoffset":0,"yoffset":-30.156000000000002,"xadvance":24.360000000000003,"chnl":15,"x":61,"y":247,"page":0},{"id":50,"width":32,"height":40,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":24.360000000000003,"chnl":15,"x":94,"y":247,"page":0},{"id":57,"width":32,"height":40,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":24.360000000000003,"chnl":15,"x":128,"y":247,"page":0},{"id":94,"width":32,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":162,"y":247,"page":0},{"id":96,"width":21,"height":40,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":16.8,"chnl":15,"x":196,"y":247,"page":0},{"id":55,"width":33,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":219,"y":247,"page":0},{"id":54,"width":33,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":254,"y":247,"page":0},{"id":53,"width":32,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":289,"y":247,"page":0},{"id":52,"width":33,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":323,"y":247,"page":0},{"id":103,"width":31,"height":39,"xoffset":0,"yoffset":-21.630000000000003,"xadvance":21.84,"chnl":15,"x":358,"y":247,"page":0},{"id":112,"width":32,"height":39,"xoffset":0,"yoffset":-21.651,"xadvance":23.541,"chnl":15,"x":391,"y":247,"page":0},{"id":113,"width":31,"height":39,"xoffset":0,"yoffset":-21.651,"xadvance":23.520000000000003,"chnl":15,"x":425,"y":247,"page":0},{"id":116,"width":25,"height":39,"xoffset":0,"yoffset":-28.182000000000002,"xadvance":15.057,"chnl":15,"x":458,"y":247,"page":0},{"id":121,"width":31,"height":38,"xoffset":0,"yoffset":-21.273,"xadvance":21.651,"chnl":15,"x":34,"y":196,"page":0},{"id":59,"width":18,"height":36,"xoffset":0,"yoffset":-20.706,"xadvance":10.983,"chnl":15,"x":485,"y":247,"page":0},{"id":43,"width":32,"height":34,"xoffset":0,"yoffset":-24.486,"xadvance":24.360000000000003,"chnl":15,"x":67,"y":196,"page":0},{"id":60,"width":30,"height":33,"xoffset":0,"yoffset":-23.331000000000003,"xadvance":24.360000000000003,"chnl":15,"x":101,"y":196,"page":0},{"id":62,"width":31,"height":33,"xoffset":0,"yoffset":-23.331000000000003,"xadvance":24.360000000000003,"chnl":15,"x":133,"y":196,"page":0},{"id":117,"width":30,"height":32,"xoffset":0,"yoffset":-21.273,"xadvance":23.415000000000003,"chnl":15,"x":166,"y":196,"page":0},{"id":99,"width":29,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":20.055,"chnl":15,"x":198,"y":196,"page":0},{"id":110,"width":31,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":23.436,"chnl":15,"x":229,"y":196,"page":0},{"id":111,"width":32,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":23.814,"chnl":15,"x":262,"y":196,"page":0},{"id":126,"width":32,"height":26,"xoffset":0,"yoffset":-16.128,"xadvance":24.360000000000003,"chnl":15,"x":201,"y":447,"page":0},{"id":101,"width":31,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":22.176000000000002,"chnl":15,"x":296,"y":196,"page":0},{"id":114,"width":25,"height":32,"xoffset":0,"yoffset":-21.651,"xadvance":15.288,"chnl":15,"x":329,"y":196,"page":0},{"id":115,"width":27,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":18.186,"chnl":15,"x":356,"y":196,"page":0},{"id":97,"width":28,"height":32,"xoffset":0,"yoffset":-21.651,"xadvance":20.874000000000002,"chnl":15,"x":385,"y":196,"page":0},{"id":118,"width":31,"height":31,"xoffset":0,"yoffset":-21.273,"xadvance":21.672,"chnl":15,"x":415,"y":196,"page":0},{"id":61,"width":31,"height":29,"xoffset":0,"yoffset":-19.089000000000002,"xadvance":24.360000000000003,"chnl":15,"x":448,"y":196,"page":0},{"id":120,"width":30,"height":31,"xoffset":0,"yoffset":-21.273,"xadvance":20.916,"chnl":15,"x":21,"y":145,"page":0},{"id":58,"width":18,"height":31,"xoffset":0,"yoffset":-20.706,"xadvance":10.5,"chnl":15,"x":53,"y":145,"page":0},{"id":122,"width":28,"height":31,"xoffset":0,"yoffset":-21.273,"xadvance":18.984,"chnl":15,"x":73,"y":145,"page":0},{"id":95,"width":28,"height":16,"xoffset":0,"yoffset":0,"xadvance":19.278000000000002,"chnl":15,"x":235,"y":447,"page":0},{"id":45,"width":23,"height":24,"xoffset":0,"yoffset":-14.175,"xadvance":15.603000000000002,"chnl":15,"x":481,"y":196,"page":0},{"id":44,"width":17,"height":21,"xoffset":0,"yoffset":-4.956,"xadvance":9.534,"chnl":15,"x":103,"y":145,"page":0},{"id":46,"width":18,"height":15,"xoffset":0,"yoffset":-4.956,"xadvance":9.912,"chnl":15,"x":0,"y":497,"page":0},{"id":32,"width":0,"height":0,"xoffset":0,"yoffset":0,"xadvance":10.752,"chnl":15,"x":20,"y":497,"page":0}]'),common:{lineHeight:50.400000000000006,base:41.454,scaleW:512,scaleH:512,pages:1,packed:0,alphaChnl:0,redChnl:0,greenChnl:0,blueChnl:0}};class $F extends De{get behavior(){return Cn}constructor(e,n){super(e,n),this.params=e;const i=Bu(gw),r=$(e.field),s=e.as;let o=0;if(be(e.fontSize)){const a=n.paramRuntime.watchExpression(e.fontSize.expr,()=>{o=a(),this.repropagate()},{scopeOwned:!1,registerDisposer:l=>this.registerDisposer(l)});o=a()}else o=e.fontSize;this.handle=a=>{const l=r(a);l!==void 0?a[s]=i.measureWidth(l,o):a[s]=0,this._propagate(a)}}}const eR=65536;class tR extends De{get behavior(){return Cn}constructor(e){super(e),this.params=e}reset(){super.reset(),this.initialize()}initialize(){const e=this.params,n=e.as||"lane",i=Ve(e.spacing)?e.spacing:1,r=$(e.start),s=$(e.end);if(!e.preference!=!e.preferredOrder)throw new Error('Must specify both "preference" and "preferredOrder"');if(e.preference){const o=new Float64Array(eR),a=$(e.preference),l=e.preferredOrder;let c=1/0;this.handle=u=>{const f=r(u);f<c&&o.fill(-1/0),c=f;const h=l.indexOf(a(u));let A=-1;if(h>=0&&o[h]<f)A=h;else{const d=r(u);for(A=0;A<o.length&&!(o[A]<d);A++);if(A>=o.length)throw new Error("Out of lanes!")}o[A]=s(u)+i,u[n]=A,this._propagate(u)}}else{const o=new fr,a=new fr;let l=-1/0,c=0;this.handle=u=>{const f=r(u);for(;o.length&&(o.peekValue()<=f||f<l);){const A=o.pop();a.push(A,A)}l=f;let h=a.pop();h===void 0&&(h=c++),u[n]=h,this._propagate(u),o.push(h,s(u)+i)}}}}class nR extends De{get behavior(){return Nt}constructor(e){if(super(e),this.params=e,e.as&&e.as.length!=e.fields.length)throw new Error('"fields" and "as" have unequal lengths!');const n=e.fields.map(r=>$(r)),i=e.as?e.as:n.map(bb);this.handle=r=>{const s={};for(let o=0;o<n.length;o++)s[i[o]]=n[o](r);this._propagate(s)}}}class iR extends De{get behavior(){return Cn}constructor(e){super(e),this.params=e;const n=new RegExp(e.regex),i=typeof e.as=="string"?[e.as]:e.as,r=$(e.field);this.handle=s=>{const o=r(s);if(le(o)){const a=o.match(n);if(a){if(a.length-1!=i.length)throw new Error('The number of RegEx groups and the length of "as" do not match!');for(let l=0;l<i.length;l++)s[i[l]]=a[l+1]}else if(e.skipInvalidInput)for(let l=0;l<i.length;l++)s[i[l]]=void 0;else throw new Error(`"${o}" does not match the given regex: ${n.toString()}`)}else if(!e.skipInvalidInput)throw new Error(`Trying to match a non-string field. Encountered type: ${typeof o}, field content: "${o}".`);this._propagate(s)}}}class rR extends De{get behavior(){return Nt}constructor(e){super(e),this.params=e;const n=Ne(e.columnRegex).map(h=>new RegExp(h));for(const h of n)if(RegExp("|"+h.source).exec("").length-1!=1)throw new Error(`Regex ${h.toString()} must have exactly one capturing group!`);const i=Ne(e.asValue);if(n.length!=i.length)throw new Error('Lengths of "columnRegex" and "as" are not equal!');const r=e.skipRegex?new RegExp(e.skipRegex):void 0,s=e.asKey||"sample";let o,a,l;const c=h=>{const A=Object.keys(h);for(const m of n)if(!A.some(p=>m.test(p)))throw new Error(`No columns matching the regex ${m.toString()} found in the data!`);const d=new Map;for(const[m,p]of n.entries())for(const w of A){const C=p.exec(w)?.[1];if(C!==void 0){let y=d.get(C);y||(y=[],d.set(C,y)),y[m]=w}}o=[...d.entries()],a=A.filter(m=>!n.some(p=>p.test(m))&&!(r&&r.test(m)));const g=[...a.map(m=>JSON.stringify(m)+": datum["+JSON.stringify(m)+"]"),JSON.stringify(s)+": sampleId",...i.map((m,p)=>JSON.stringify(m)+`: datum[attrs[${p}]]`)];l=new Function("datum","sampleId","attrs",`return {
`+g.join(`,
`)+`
};`)},u=h=>{o||c(h);for(let A=0;A<o.length;A++){const[d,g]=o[A],m=l(h,d,g);this._propagate(m)}},f=h=>{c(h),u(h),this.handle=u};this.handle=f,this.beginBatch=h=>{_d(h)&&(this.handle=f),super.beginBatch(h)}}}class sR extends De{get behavior(){return Cn}constructor(e){super(e),this.params=e,this.buffer=[]}reset(){super.reset(),this.buffer=[]}handle(e){this.buffer.push(e)}complete(){const e=this.params,n=e.as||["y0","y1"],i=e.sort?Eh(e.sort.field,e.sort.order):void 0,r=e.field?$(e.field):()=>1,s=e.groupby.map(u=>$(u)),o=Ox(this.buffer,u=>s.map(f=>f(u)).join()).map(u=>u[1]);let a=u=>!0;if(e.baseField){const u=$(e.baseField);a=f=>u(f)!==null}let l,c;switch(e.offset){case"normalize":l=(u,f)=>u/f,c=(u,f)=>ts(u,f);break;case"center":l=(u,f)=>u-f/2,c=(u,f)=>ts(u,f);break;case"information":{const u=Math.log2(e.cardinality??4);l=(f,h)=>f/h,c=(f,h)=>{const d=ts(f,w=>+!a(w)),g=ts(f,h),m=g-d;let p=0;for(let w=0;w<f.length;w++){const C=f[w];if(a(C)){const y=h(C)/m;p-=y*Math.log2(y)}}return m/(u-(p+0))*(m/g)}}break;default:l=(u,f)=>u,c=(u,f)=>1}for(const u of o){i&&u.sort(i);const f=c(u,r);let h=0;for(const A of u){const d=h+r(A);a(A)&&(A[n[0]]=l(h,f),A[n[1]]=l(d,f),this._propagate(A),h=d)}}super.complete()}}class oR extends De{get behavior(){return Nt}constructor(e){super(e),this.params=e;const n=$(e.field??"sequence"),[i,r]=e.as??["pos","sequence"];this.handle=s=>{const o=Object.assign({},s,{[r]:"",[i]:0}),a=n(s);for(let l=0;l<a.length;l++){const c=Object.assign({},o);c[i]=l,c[r]=a.charAt(l),this._propagate(c)}}}}const pw={count:t=>t.length,valid:Rx,sum:ts,min:yl,max:wl,mean:Yx,median:Vx,variance:Nx};class aR extends De{get behavior(){return Nt}constructor(e){if(super(e),this.params=e,this.buffer=[],this.ops=[],this.as=[],e.fields){if(e.fields.length!=e.ops.length)throw new Error("Fields and ops must have the same length!");if(e.as&&e.as.length!=e.ops.length)throw new Error('If "as" is defined, "fields" and "as" must have the same length!');e.fields.forEach((n,i)=>{const r=$(n),s=pw[e.ops[i]];this.ops.push(o=>s(o,r)),this.as.push(e.as?e.as[i]:`${e.ops[i]}_${e.fields[i]}`)})}else this.ops.push(n=>pw.count(n)),this.as.push("count")}reset(){super.reset(),this.buffer=[]}handle(e){this.buffer.push(e)}complete(){const n=this.params?.groupby;if(n?.length>0){const i=n.map(s=>$(s)),r=Uo(this.buffer,...i);for(const[s,o]of Of(r)){const a={};for(let l=0;l<n.length;l++)a[n[l]]=s[l];this.ops.forEach((l,c)=>{a[this.as[c]]=l(o)}),this._propagate(a)}}else{const i={};this.ops.forEach((r,s)=>{i[this.as[s]]=r(this.buffer)}),this._propagate(i)}super.complete()}}const cR={aggregate:aR,collect:hw,coverage:UF,filterScoredLabels:zF,filter:HF,flatten:JF,flattenCompressedExons:jF,flattenDelimited:WF,flattenSequence:oR,formula:ZF,identifier:Ll,linearizeGenomicCoordinate:dw,measureText:$F,pileup:tR,project:nR,regexExtract:iR,regexFold:rR,sample:Am,stack:sR};function lR(t,e){const n=cR[t.type];if(n)return new n(t,e);throw new Error("Unknown transform: "+t.type)}function mw(t,e=[]){if(!Cw(t)&&!yw(t))return;const n={...t.format};if(n.type??=yw(t)&&fR(e),n.parse??="auto",!n.type)throw new Error("Format for the data source was not defined and it could not be inferred: "+JSON.stringify(t));return n}function uR(t){return ta(t)?.responseType??"text"}function fR(t){if(Array.isArray(t)&&(t=t[0]),t)return t.match(/\.(csv|tsv|json)/)?.[1]}const ww=t=>typeof t!="object"?AR:hR,AR=t=>({data:t}),hR=t=>t;function yw(t){return"url"in t}class yi extends Pl{view;constructor(e){super(),this.view=e}get identifier(){}setLoadingStatus(e,n){this.view.context.dataFlow.loadingStatusRegistry.set(this.view,e,n)}get paramRuntime(){return this.view.paramRuntime}handle(e){throw new Error("Source does not handle incoming data!")}async load(){}repropagate(){this.load()}}function Cw(t){return"values"in t}class dR extends yi{constructor(e,n){if(super(n),this.params=e,typeof e.values=="string"&&!e?.format?.type)throw new Error("Data format type (csv, dsv, ...) must be specified if a string is provided!")}get label(){return"inlineSource"}isTrivial(){const e=this.params.values,n=Array.isArray(e)?e[0]:e;return!!(n&&Object.keys(n).length==0&&n.constructor===Object)}updateDynamicData(e){this.#e(e)}loadSynchronously(){this.#e(this.params.values)}#e(e){let n=[],i=r=>r;if(Array.isArray(e))e.length>0&&(n=e,i=ww(e[0]));else if(typeof e=="object")n=[e];else if(typeof e=="string")n=Ml(e,mw(this.params));else throw new Error('"values" in data configuration is not an array, object, or a string!');this.reset(),this.beginBatch({type:"file"});for(const r of n)this._propagate(i(r));this.complete()}async load(){this.loadSynchronously()}}function gR(t){return"url"in t}class pR extends yi{constructor(e,n){super(n),this.params=ws(n.paramRuntime,e,()=>this.load(),i=>this.registerDisposer(i),{batchMode:"whenPropagated"}),this.baseUrl=n?.getBaseUrl()}get identifier(){return JSON.stringify({params:this.params,baseUrl:this.baseUrl})}get label(){return"urlSource"}async#e(e){const n=gi(this.baseUrl,e.urlsFromFile),i=await fetch(n);if(!i.ok)throw new Error(`Cannot load "${n}": ${i.status} ${i.statusText}`);const r=await i.text();return Ml(r,{type:e.type??"tsv"}).map(o=>typeof o=="string"?o:o.url).map(o=>gi(n,o))}async load(){const e=Ie(this.params.url),n=typeof e=="object"&&"urlsFromFile"in e?await this.#e(e):(Array.isArray(e)?e:[e]).map(a=>gi(this.baseUrl,a)),i=mw(this.params,n),r=uR(i.type);if(n.length===0||!n[0]){this.reset(),this.complete();return}const s=async a=>{try{const l=await fetch(a);if(!l.ok)throw new Error(`${l.status} ${l.statusText}`);return typeof l[r]=="function"?l[r]():l.text()}catch(l){throw new Error(`Could not load data: ${a}. Reason: ${l.message}`)}},o=async(a,l)=>{try{const c=Ml(a,i),u=c instanceof Promise?await c:c;this.beginBatch({type:"file",url:l});for(const f of u)this._propagate(f)}catch(c){throw console.warn(c),new Error(`Cannot parse: ${l}: ${c.message}`)}};this.setLoadingStatus("loading"),this.reset();try{await Promise.all(n.map(a=>s(a).then(o))),this.setLoadingStatus("complete")}catch(a){this.setLoadingStatus("error",a.message)}this.complete()}}function mR(t){return"sequence"in t}class wR extends yi{constructor(e,n){if(super(n),this.sequence=ws(n.paramRuntime,e.sequence,()=>this.loadSynchronously(),i=>this.registerDisposer(i),{batchMode:"whenPropagated"}),!("start"in this.sequence))throw new Error("'start' is missing from sequence parameters!");if(!("stop"in this.sequence))throw new Error("'stop' is missing from sequence parameters!")}get label(){return"sequenceSource"}loadSynchronously(){const e=Ie(this.sequence.as)??"data",n=Ie(this.sequence.start)??0,i=Ie(this.sequence.step)??1,r=Ie(this.sequence.stop);this.reset(),this.beginBatch({type:"file"});for(let s=n;s<r;s+=i)this._propagate({[e]:s});this.complete()}async load(){this.loadSynchronously()}}class _f extends yi{initializedPromise=Promise.resolve();_lastLoadedDomain;constructor(e,n){if(super(e),n){if(n!=="x"&&n!=="y")throw new Error(`Invalid channel specified for the lazy data source: ${n}. Must be either "x" or "y"`)}else throw new Error('No channel has been specified for the lazy data source. Must be either "x" or "y".');if(this.channel=n,this.scaleResolution=this.view.getScaleResolution(n),!this.scaleResolution){const r=[`The lazy data source cannot find a resolved scale for channel "${n}".`];throw this.view instanceof nt||r.push('Make sure the view has a "shared" scale resolution as it is not a unit view.'),new Error(r.join(" "))}const i=()=>{this.view.isVisible()&&this.onDomainChanged(this.scaleResolution.getDomain(),this.scaleResolution.getComplexDomain())};this.scaleResolution.addEventListener("domain",i),this.view.context.addBroadcastListener("layoutComputed",i)}get genome(){const e=this.scaleResolution.getScale();if("genome"in e){const n=e.genome();if(n)return n}throw new Error("No genome has been defined!")}onDomainChanged(e,n){}requestRender(){this.view.context.animator.requestRender()}async load(){this.reset(),this.complete()}publishData(e){this._lastLoadedDomain=Array.from(this.scaleResolution.getDomain()),this.reset(),this.beginBatch({type:"file"});for(const n of e)for(const i of n)this._propagate(i);this.complete()}isDataReadyForDomain(e){const n=e[this.channel];if(!n||!this._lastLoadedDomain)return!1;const[i,r]=n[0]<=n[1]?n:[n[1],n[0]],[s,o]=this._lastLoadedDomain[0]<=this._lastLoadedDomain[1]?this._lastLoadedDomain:[this._lastLoadedDomain[1],this._lastLoadedDomain[0]];return i>=s&&r<=o}}class yR extends _f{ticks=[];constructor(e,n){const i={...e};super(n,i.channel),this.params=e}get label(){return"axisTickSource"}async load(){this.ticks=null,this.onDomainChanged()}onDomainChanged(){const e=this.scaleResolution.getScale(),n=this.scaleResolution.getAxisLength(),i=this.params.axis,r=l=>25+60*nw(100,700,l),s=Ve(i.tickCount)?i.tickCount:Math.round(n/r(n)),o=wm(e,s,i.tickMinStep),a=i.values?ym(e,i.values,o):r8(e,o);if(this.ticks==null||!Hi(a,this.ticks)){this.ticks=a;const l=o8(e,s,i.format);this.publishData([a.map(c=>({value:c,label:l(c)}))])}}}class CR extends _f{constructor(e,n){super(n,e.channel)}get label(){return"axisGenomeSource"}async load(){this.publishData([this.genome.chromosomes])}}class no extends _f{#e=new AbortController;#t=[0,0];#n=[0,0];#i=0;params;setupDebouncing(e){const n=()=>Ie(e.debounce),i=e.debounceMode;if(i=="domain")this.onDomainChanged=ra(this.onDomainChanged.bind(this),n,!1);else if(i=="window")this.loadInterval=ra(this.loadInterval.bind(this),n,!1);else throw new Error("Invalid debounceMode: "+i)}onDomainChanged(e){this.#n=e;const n=Ie(this.params?.windowSize)??-1;e[1]-e[0]>n||this.callIfWindowsChanged(e,n,async i=>{await this.initializedPromise,this.loadInterval(i)})}reloadLastDomain(){const e=this.#n;this.#n=[0,0],this.#t=[0,0],this._lastLoadedDomain=void 0,this.onDomainChanged(e)}async loadInterval(e){}publishData(e){const n=this._lastLoadedDomain;super.publishData(e),n&&(this._lastLoadedDomain=n)}async discretizeAndLoad(e,n){this.#e.abort(),this.setLoadingStatus("loading"),this.#e=new AbortController;const i=this.#e.signal,r=this.genome.continuousToDiscreteChromosomeIntervals(e);try{const s=await Promise.all(r.map(async o=>n(o,i)));if(!i.aborted)return this.setLoadingStatus("complete"),this._lastLoadedDomain=Array.from(e),s}catch(s){if(!i.aborted)throw this.setLoadingStatus("error",s.message),s}}callIfWindowsChanged(e,n,i){const r=[Math.max(Math.floor(e[0]/n)*n,0),Math.min(Math.ceil(e[1]/n)*n,this.genome.totalSize)],s=this.#t;(n!==this.#i||r[0]<s[0]||r[1]>s[1])&&(this.#t=r,this.#i=n,i(r))}}class ER extends no{constructor(e,n){const i={channel:"x",windowSize:7e3,debounce:200,debounceMode:"window",...e};if(super(n,i.channel),this.params=i,!this.params.url)throw new Error("No URL provided for IndexedFastaSource");this.setupDebouncing(this.params),this.initializedPromise=new Promise(r=>{Promise.all([Promise.resolve().then(()=>JT),Promise.resolve().then(()=>ao)]).then(([{IndexedFasta:s},{RemoteFile:o}])=>{const a=l=>new o(to(l,this.view.getBaseUrl()));this.fasta=new s({fasta:a(this.params.url),fai:a(this.params.indexUrl??this.params.url+".fai")}),r()})})}get label(){return"bigWigSource"}async loadInterval(e){const n=await this.discretizeAndLoad(e,async(i,r)=>this.fasta.getSequence(i.chrom,i.startPos,i.endPos,{signal:r}).then(s=>{if(s!=null)return{chrom:i.chrom,start:i.startPos,sequence:s};console.log(`No sequence found for interval ${i.chrom}:${i.startPos}-${i.endPos}`)}));this.publishData([n.filter(i=>i!==void 0)])}}class bR extends no{#e=[];#t;constructor(e,n){const i={pixelsPerBin:2,channel:"x",debounce:200,debounceMode:"window",...e},r=Ie(i.channel);if(super(n,r),this.params=ws(n.paramRuntime,i,s=>{s.has("url")?this.#n().then(()=>this.reloadLastDomain()):s.has("pixelsPerBin")&&this.reloadLastDomain()},s=>this.registerDisposer(s),{batchMode:"whenPropagated"}),!this.params.url)throw new Error("No URL provided for BigWigSource");this.setupDebouncing(this.params),this.#n()}get label(){return"bigWigSource"}#n(){return this.initializedPromise=new Promise((e,n)=>{Promise.all([Promise.resolve().then(()=>$C),Promise.resolve().then(()=>ao)]).then(([{BigWig:i},{RemoteFile:r}])=>{this.#t=new i({filehandle:new r(to(Ie(this.params.url),this.view.getBaseUrl()))}),this.setLoadingStatus("loading"),this.#t.getHeader().then(s=>{this.#e=s.zoomLevels.map(o=>o.reductionLevel).reverse(),this.#e.push(1),this.setLoadingStatus("complete"),e()}).catch(s=>{this.load(),this.setLoadingStatus("error",`${Ie(this.params.url)}: ${s.message}`),n(s)})})}),this.initializedPromise}async onDomainChanged(e){await this.initializedPromise;const n=this.scaleResolution.getAxisLength()||700,i=xR(e,n,this.#e),r=Math.max(i*n,5e3);this.callIfWindowsChanged(e,r,s=>this.loadInterval(s,i))}async loadInterval(e,n){const i=.5/n/Ie(this.params.pixelsPerBin),r=await this.discretizeAndLoad(e,(s,o)=>this.#t.getFeatures(s.chrom,s.startPos,s.endPos,{scale:i,signal:o}).then(a=>a.map(l=>({chrom:s.chrom,start:l.start,end:l.end,score:l.score}))));r&&this.publishData(r)}}function xR(t,e,n){const i=(t[1]-t[0])/e;return n.find(r=>r<i)??n.at(-1)}class IR extends no{parser;bbi;parseLine;constructor(e,n){const i={channel:"x",windowSize:1e6,debounce:200,debounceMode:"window",...e},r=Ie(i.channel);if(super(n,r),this.params=ws(n.paramRuntime,i,s=>{s.has("url")?this.#e().then(()=>this.reloadLastDomain()):s.has("windowSize")&&this.reloadLastDomain()},s=>this.registerDisposer(s),{batchMode:"whenPropagated"}),!this.params.url)throw new Error("No URL provided for BigBedSource");this.setupDebouncing(this.params),this.#e()}get label(){return"bigBedSource"}#e(){return this.initializedPromise=new Promise((e,n)=>{Promise.all([Promise.resolve().then(()=>$6),Promise.resolve().then(()=>$C),Promise.resolve().then(()=>ao)]).then(([i,{BigBed:r},{RemoteFile:s}])=>{const o=i.default;this.bbi=new r({filehandle:new s(to(Ie(this.params.url),this.view.getBaseUrl()))}),this.setLoadingStatus("loading"),this.bbi.getHeader().then(async a=>{this.parser=new o({autoSql:a.autoSql});try{const l=BR(this.parser);this.parseLine=(c,u)=>l(c,u.start,u.end,u.rest)}catch{this.parseLine=(c,u)=>this.parser.parseLine(`${c}	${u.start}	${u.end}	${u.rest}`)}this.setLoadingStatus("complete"),e()}).catch(a=>{this.load(),this.setLoadingStatus("error",`${Ie(this.params.url)}: ${a.message}`),n(a)})})}),this.initializedPromise}async loadInterval(e){const n=await this.discretizeAndLoad(e,async(i,r)=>this.bbi.getFeatures(i.chrom,i.startPos,i.endPos,{signal:r}).then(s=>s.map(o=>this.parseLine(i.chrom,o))));n&&this.publishData(n)}}function BR(t){const e=t.autoSql.fields.filter(w=>w.type).slice(3);let n=0,i="",r=0,s={};const o="	",a=o.charCodeAt(0),l=48,c=45;function u(){let w=i.indexOf(o,n);w<0&&(w=r);const C=i.substring(n,w);return n=w+1,C}function f(){let w=0,C=i.charCodeAt(n),y=1;C===c&&(y=-1,n++,C=i.charCodeAt(n));do{if(C===a){n++;break}w=w*10+C-l,C=i.charCodeAt(++n)}while(n<r);return w*y}const h=e.map(w=>`${JSON.stringify(w.name)}: ${w.isNumeric?"0":"emptyString"}`),A=new Function(`
        const emptyString = "";
        return function makeTemplate(chrom, chromStart, chromEnd) {
            return {
                chrom,
                chromStart,
                chromEnd,
                ${h.join(`,
`)}
            }
        };`)(),d=e.map(w=>{const C=w.type,y=JSON.stringify(w.name);if(["ubyte","int","uint"].includes(C))return`d[${y}] = parseInt();`;if(w.isNumeric)return`d[${y}] = Number(parseString());`;if(["char","string","lstring"].includes(C))return`d[${y}] = parseString();`;throw new Error("Unsupported type: "+C)}),g=vR(d,50).map((w,C)=>Function("parseInt","parseString",`return function parseFieldChunk${C}(d) {
            ${w.join(`
`)}
        }`)(f,u));function m(w){i=w,r=w.length,n=0}function p(w,C,y,x){m(x),s=A(w,C,y);for(const I of g)I(s);return s}return p}function vR(t,e){return Array.from({length:Math.ceil(t.length/e)},(n,i)=>t.slice(i*e,i*e+e))}class SR extends no{#e;chrPrefixFixer=e=>e;constructor(e,n){const i={channel:"x",windowSize:2e4,debounce:200,debounceMode:"domain",...e};if(super(n,i.channel),this.params=i,!this.params.url)throw new Error("No URL provided for BamSource");this.setupDebouncing(this.params),this.initializedPromise=new Promise(r=>{Promise.all([Promise.resolve().then(()=>mL),Promise.resolve().then(()=>ao)]).then(([{BamFile:s},{RemoteFile:o}])=>{const a=l=>new o(to(l,this.view.getBaseUrl()));this.#e=new s({bamFilehandle:a(this.params.url),baiFilehandle:a(this.params.indexUrl??this.params.url+".bai")}),this.#e.getHeader().then(l=>{const c=this.genome.hasChrPrefix(),u=this.#e.indexToChr?.[0]?.refName.startsWith("chr");c&&!u?this.chrPrefixFixer=f=>f.replace("chr",""):!c&&u&&(this.chrPrefixFixer=f=>"chr"+f),r()})})})}get label(){return"bamSource"}async loadInterval(e){const n=await this.discretizeAndLoad(e,async(i,r)=>this.#e.getRecordsForRange(this.chrPrefixFixer(i.chrom),i.startPos,i.endPos,{signal:r}).then(s=>s.map(o=>({chrom:i.chrom,start:o.start,end:o.end,name:o.name,cigar:o.CIGAR,mapq:o.mq,strand:o.strand===1?"+":"-"}))));n&&this.publishData(n)}}class Ew extends no{#e;constructor(e,n){const i={channel:"x",windowSize:3e6,debounce:200,debounceMode:"domain",addChrPrefix:!1,...e},r=Ie(i.channel);if(super(n,r),this.params=ws(n.paramRuntime,i,s=>{s.has("url")||s.has("indexUrl")||s.has("addChrPrefix")?this.#t().then(()=>this.reloadLastDomain()):s.has("windowSize")&&this.reloadLastDomain()},s=>this.registerDisposer(s),{batchMode:"whenPropagated"}),!Ie(this.params.url))throw new Error("No URL provided for TabixSource");this.setupDebouncing(this.params),this.#t()}#t(){return this.initializedPromise=new Promise((e,n)=>{Promise.all([Promise.resolve().then(()=>SL),Promise.resolve().then(()=>ao)]).then(async([{TabixIndexedFile:i},{RemoteFile:r}])=>{const s=c=>new r(to(c,this.view.getBaseUrl())),o=Ie(this.params.url),a=Ie(this.params.indexUrl)??o+".tbi",l=Ie(this.params.addChrPrefix);this.#e=new i({filehandle:s(o),tbiFilehandle:s(a),renameRefSeqs:l===!0?c=>"chr"+c:l?c=>l+c:void 0});try{this.setLoadingStatus("loading");const c=await this.#e.getHeader();await this._handleHeader(c),this.setLoadingStatus("complete"),e()}catch(c){this.load(),this.setLoadingStatus("error",`${Ie(this.params.url)}: ${c.message}`),n(c)}})}),this.initializedPromise}async loadInterval(e){await this.initializedPromise;const n=await this.discretizeAndLoad(e,async(i,r)=>{const s=[];return await this.#e.getLines(i.chrom,i.startPos,i.endPos,{lineCallback:o=>{s.push(o)},signal:r}),this._parseFeatures(s)});n&&this.publishData(n)}async _handleHeader(e){}_parseFeatures(e){return[]}}class DR extends Ew{#e;get label(){return"gff3Source"}async _handleHeader(e){this.#e=await Promise.resolve().then(()=>VL)}_parseFeatures(e){return this.#e?.parseArraySync(e)}}class QR extends Ew{#e;get label(){return"vcfSource"}async _handleHeader(e){const n=(await Promise.resolve().then(()=>ZL)).default;this.#e=new n({header:e})}_parseFeatures(e){return e.map(n=>{const i=this.#e.parseLine(n);return delete i.GENOTYPES,i.SAMPLES=i.SAMPLES(),i})}}const kR=[];function FR(t,e){if(Cw(t))return new dR(t,e);if(gR(t))return new pR(t,e);if(mR(t))return new wR(t,e);if(RR(t))return zR(t.lazy,e);throw new Error("Cannot figure out the data source type: "+JSON.stringify(t))}function RR(t){return"lazy"in t}function NR(t){return t?.type=="axisTicks"}function MR(t){return t?.type=="axisGenome"}function TR(t){return t?.type=="indexedFasta"}function PR(t){return t?.type=="bigwig"}function LR(t){return t?.type=="bigbed"}function OR(t){return t?.type=="bam"}function UR(t){return t?.type=="gff3"}function _R(t){return t?.type=="vcf"}const GR=[{guard:NR,Source:yR},{guard:MR,Source:CR},{guard:TR,Source:ER},{guard:PR,Source:bR},{guard:LR,Source:IR},{guard:OR,Source:SR},{guard:UR,Source:DR},{guard:_R,Source:QR}];function zR(t,e){for(const n of kR)if(n.guard(t))return new n.Source(t,e);for(const n of GR)if(n.guard(t))return new n.Source(t,e);throw new Error("Cannot figure out the data source type: "+JSON.stringify(t))}function HR(t){const e=bw(t).filter(i=>typeof i=="string"),n=new Function("source","return { "+e.map(i=>JSON.stringify(i)).map(i=>`${i}: source[${i}]`).join(`,
`)+" };");return n.properties=e,n}function bw(t){let e=[];do e=e.concat(Object.keys(t)),t=Object.getPrototypeOf(t);while(t&&t!==Object.prototype);return Array.from(new Set(e))}class lc extends De{get behavior(){return Nt}#e;#t=e=>e;constructor(){super({type:"clone"});const e=n=>{const i=bw(n);(!this.#e||!Hi(i,this.#e))&&(this.#e=i,this.#t=HR(n));const r=this.#t;this.handle=s=>this._propagate(r(s)),this.handle(n)};this.handle=e,this.beginBatch=n=>{_d(n)&&(this.handle=e),super.beginBatch(n)}}}function YR(t){return"name"in t}class xw extends yi{#e;constructor(e,n,i){super(n),this.provider=i,this.params=e}get identifier(){return this.params.name}get label(){return"namedSource"}updateDynamicData(e){this.#e=e,this.loadSynchronously()}loadSynchronously(){const e=this.#e??this.provider(this.params.name)??[];let n=i=>i;if(Array.isArray(e))e.length>0&&(n=ww(e[0]));else throw new Error(`Named data "${this.params.name}" is not an array!`);this.reset(),this.beginBatch({type:"file"});for(const i of e)this._propagate(n(i));this.complete()}async load(){this.loadSynchronously()}}class Iw{#e;#t;loadingStatusRegistry;constructor(){this.#e=new Set,this.#t=new Set,this.loadingStatusRegistry=new Od}get dataSources(){return[...this.#e]}get collectors(){return[...this.#t]}replaceDataSources(e){this.#e=new Set(e)}addDataSource(e){this.#e.add(e)}removeDataSource(e){e.disposeSubtree(),this.#e.delete(e)}addCollector(e){this.#t.add(e)}removeCollector(e){e.parent&&e.parent.removeChild(e),e.disposeSubtree(),e.observers.clear(),this.#t.delete(e)}pruneCollectorBranch(e){let n=e.parent;for(n&&n.removeChild(e),e.disposeSubtree();n&&n.children.length===0;){const i=n;n=i.parent,n?(n.removeChild(i),i.dispose()):i instanceof yi?this.removeDataSource(i):i.dispose()}}findNamedDataSource(e){let n;for(const i of this.#e.values())if(i instanceof xw&&e==i.identifier){if(n&&n!==i)throw new Error(`Found multiple instances of named data: ${e}. Data flow optimization is broken (it's a bug).`);n=i}if(n)return{dataSource:n}}}function VR(t,e){const n=new Map,i=[];for(const r of t)n.set(r,{ref:r,children:[]});for(const r of n.values()){const s=n.get(e(r.ref));s?s.children.push(r):i.push(r)}return i}function Bw(t,e,n){const i=e.preOrder?.(t);if(i)return i;for(const r of n(t)){const s=Bw(r,e,n);if(s==="stop")return s}return e.postOrder?.(t)}function JR(t,e){return Bw(t,e,n=>n.children)}function qR(t,e,n,i){const r=[],s=[];let o;const a=e??new Iw,l=[],c=i??(()=>!0);function u(p,w=()=>{}){if(!o)throw w()||new Error("Cannot append data flow node, no parent exist!");return o.addChild(p),o=p,r.push(p),p}function f(p,w){return u(p,()=>new Error("Cannot append a transform because no (inherited) data are available! "))}function h(p,w){for(const C of p){let y;try{y=lR(C,w)}catch(x){throw console.warn(x),new Error(`Cannot initialize "${C.type}" transform: ${x}`)}y.behavior&Cn&&f(new lc),f(y)}}function A(){return r.findLastIndex(p=>p instanceof Ll)>r.findLastIndex(p=>p instanceof yi)}const d=p=>{if(!c(p)){const w=p.flowHandle?.node;if(w){w!==o&&(o=w,r.push(w));return}if(p.spec.data||p.spec.transform||p instanceof nt)throw new Error("Cannot reuse missing flow nodes for "+p.getPathString());return}if(p.spec.data){const w=p.flowHandle?.dataSource;w&&w.view===p&&!w.identifier&&a.removeDataSource(w);const C=YR(p.spec.data)?new xw(p.spec.data,p,p.context.getNamedDataFromProvider):FR(p.spec.data,p);o=C,r.push(C),a.addDataSource(C),p.flowHandle??={},p.flowHandle.dataSource=C}if(p.spec.transform&&h(p.spec.transform,p),p instanceof nt){if(!o)throw new Error(`A unit view (${p.getPathString()}) has no (inherited) data source`);const w=jR(p);if(w){l.push(w.rewrite);for(const x of w.transforms)f(x)}p.mark.isPickingParticipant()&&!A()&&(f(new lc),f(new Ll({type:"identifier"})));const C=new hw({type:"collect",groupby:p.getFacetFields(),sort:WR(p,w?.rewrittenEncoding)});u(C);const y=p.flowHandle?.collector;y&&a.removeCollector(y),a.addCollector(C),p.flowHandle??={},p.flowHandle.collector=C}o&&(p.flowHandle??={},p.flowHandle.node=o)},g=KR(t,n),m=VR(g,p=>p.dataParent);for(const p of m)JR(p,{preOrder:w=>{s.push({view:w.ref,nodeStackDepth:r.length}),d(w.ref)},postOrder:()=>{const{nodeStackDepth:w}=s.pop();r.length=w,o=r.at(-1)}});return l.forEach(p=>p()),a}function KR(t,e){if(!e)return t.getDescendants();const n=[];return t.visit(i=>{if(!e(i))return Ln;n.push(i)}),n}function jR(t){const e=[],n={},i=t.mark.encoding,r=t.getEncoding(),s=[];for(const[a,l]of Object.entries(i)){const c=a;En(c)!==c&&!(c in r)||ms(c)&&!Array.isArray(l)&&Xd(l)&&s.push({channel:c,chromPosDef:l})}const o=Uo(s,a=>En(a.channel),a=>a.chromPosDef.chrom);for(const[a,l]of o.entries())for(const[c,u]of l.entries()){const f=[],h=[],A=[];for(const{channel:d,chromPosDef:g}of u){const m=C=>C.replace(/[^A-Za-z0-9_]/g,""),p=["_linearized_",m(g.chrom),"_",m(g.pos)].join(""),w={...t.spec.encoding?.[d]??r[d]??i[d]??{},field:p};delete w.chrom,delete w.pos,!w.type&&g.type&&(w.type=g.type),n[d]=w,f.push(g.pos),A.push(g.offset??0),h.push(p)}e.push(new lc),e.push(new dw({type:"linearizeGenomicCoordinate",channel:a,chrom:c,pos:f,offset:A,as:h},t))}return e.length?{transforms:e,rewrittenEncoding:n,rewrite:()=>{t.spec.encoding={...t.spec.encoding,...n},gf(t.mark,"encoding")}}:void 0}function WR(t,e){const n={...t.getEncoding(),...e}.x;if(pt(n)&&t.getScaleResolution("x")?.isZoomable()){if(en(n))return"buildIndex"in n&&n.buildIndex?{field:n.field}:null;if(!Yi(n)){if(Vi(n))throw new Error("A zoomable x channel must be mapped to a field.")}}}function vw(t,e=void 0){if(t.parent!==e)return!1;for(const n of t.children)if(!vw(n,t))return!1;return!0}function Gf(t,e=!1){if(t.behavior&Tl&&(e=!0),t instanceof lc)if(e)e=!1;else{const n=t.children[0];t.excise(),n&&Gf(n,e);return}t.behavior&Nt&&(e=!1);for(let n=0,i=t.children.length;n<i;n++)Gf(t.children[n],e||i>1)}function XR(t){const e=t.dataSources,n=new Map;for(const s of e)s.identifier&&!n.has(s.identifier)&&n.set(s.identifier,s);const i=new Set,r=new Map;for(const s of e)if(s.identifier){const o=n.get(s.identifier);o&&(o!==s&&o.adoptChildrenOf(s),i.add(o),r.set(s,o))}else i.add(s),r.set(s,s);return t.replaceDataSources(i),r}function ZR(t){if(Gf(t),!vw(t))throw new Error("Encountered a bug! There's a problem in the data flow structure.")}function $R(t){const e=XR(t);for(const n of t.dataSources)ZR(n);return e}const zf=new WeakMap,Hf=new WeakMap;function Sw(t,e){const n=zf.get(t);if(n){if(!e?.queueReload)return n;const r=Hf.get(t);if(r)return r;const s=n.catch(()=>{}).then(()=>Sw(t)).finally(()=>{Hf.delete(t)});return Hf.set(t,s),s}const i=Promise.resolve().then(()=>t.load()).finally(()=>{zf.delete(t)});return zf.set(t,i),i}function eN(t,e){for(const n of t.getDescendants()){const i=n.flowHandle;if(!i)continue;const r=i.dataSource;r&&(i.dataSource=e.get(r)??r)}}function Yf(t,e,n,i){const r=i??(()=>!0),o=Dw(t,n).filter(r);if(o.length===0)return{dataFlow:e,unitViews:[],dataSources:new Set,graphicsPromises:[]};const a=new Set(o);for(const A of o)A._setDataInitializationState("pending");let l;try{l=qR(t,e,n,d=>a.has(d));const A=$R(l);eN(t,A)}catch(A){for(const d of o)d._setDataInitializationState("none");throw A}const c=tN(o);for(const A of c)A.visit(d=>d.initializeOnce());const u=o.filter(A=>A instanceof nt),f=[],h=!!t.context.glHelper;for(const A of u){const d=A.mark;d.initializeEncoders(),A.registerDomainSubscriptions(),h&&f.push(d.initializeGraphics().then(()=>d));const g=m=>{if(d.initializeData(),h)try{d.updateGraphicsData()}catch(p){throw p.view=A,p}A.context.animator.requestRender()};A.registerDisposer(A.flowHandle.collector.observe(g))}for(const A of o)A._setDataInitializationState("ready");return{dataFlow:l,unitViews:u,dataSources:c,graphicsPromises:f}}function tN(t,e){const n=Array.isArray(t)?t:Dw(t,e),i=new Set;for(const r of n){let s=r;for(;s&&!s.flowHandle?.dataSource;)s=s.dataParent;s?.flowHandle?.dataSource&&i.add(s.flowHandle.dataSource)}return i}function nN(t,e){const n=new Set;return t.visit(i=>{if(e&&!e(i))return Ln;if(i.flowHandle?.dataSource)return n.add(i.flowHandle.dataSource),Ln}),n}function Vf(t,e,n,i){return e||(e=nN(t,n)),Promise.all(Array.from(e).map(r=>Sw(r,i))).then(r=>(iN(t),r))}function Dw(t,e){const n=[];return e?(t.visit(i=>{if(!e(i))return Ln;n.push(i)}),n):t.getDescendants()}function iN(t){const e={type:"subtreeDataReady",payload:{subtreeRoot:t}};t.visit(n=>n.handleBroadcast(e))}async function rN(t,e,n,i){const r=a=>a.isConfiguredVisible(),{dataFlow:s,graphicsPromises:o}=Yf(t,e,r);return i(s),await n.waitUntilReady(),await Vf(t,new Set(s.dataSources),r),await Lf(o),s}async function sN(t,e,n){const i=h=>h.isConfiguredVisible(),s=oN(t,i).filter(h=>h.getDataInitializationState()==="none");if(s.length===0)return e;const o=new Set(s),a=h=>o.has(h),l=new Set,c=[];for(const h of s){if(h.spec.data){c.push(h);continue}const A=cN(h);A?l.add(A):c.push(h)}const{dataFlow:u,graphicsPromises:f}=Yf(t,e,i,a);await n.waitUntilReady();for(const h of l)h.repropagate();if(c.length){const h=aN(c);await Promise.all(Array.from(h.entries()).map(([A,d])=>Vf(A,d,void 0,{queueReload:!0})))}return await Lf(f),u}function oN(t,e){const n=[];return t.visit(i=>{if(!e(i))return Ln;n.push(i)}),n}function aN(t){const e=new Map;for(const n of t){let i=n;for(;i&&!i.flowHandle?.dataSource;)i=i.dataParent;if(!i?.flowHandle?.dataSource){if(n.spec.data)throw new Error("No data source found for view "+n.getPathString());continue}let r=e.get(i);r||(r=new Set,e.set(i,r)),r.add(i.flowHandle.dataSource)}return e}function cN(t){let e=t.dataParent;for(;e;){const n=e.flowHandle?.collector;if(n)return n.completed?n:void 0;e=e.dataParent}}class lN{constructor(e){this._renderCallback=e,this._renderRequested=!1,this._warn=!1,this.transitions=[]}requestTransition(e){this.cancelTransition(e),this.transitions.push(e),this.requestRender()}cancelTransition(e){const n=this.transitions.indexOf(e);n>=0&&this.transitions.splice(n,1)}requestRender(){this._renderRequested?this._warn&&console.warn("Render already requested!"):(this._renderRequested=!0,window.requestAnimationFrame(e=>{this._renderRequested=!1;const n=this.transitions;this.transitions=[];let i;for(;i=n.shift();)i(e);this._renderCallback(e)}))}transition(e){return H8({requestAnimationFrame:n=>this.requestTransition(n),...e})}}function Jf(t,e,n,i,r){let s=0,o=!0,a=structuredClone(r),l=a;function c(h,A,d,g){return A+(h-A)*Math.pow(2,-d/g)}function u(h){if(o)return;const A=h-s;s=h;for(const g of Object.keys(l))a[g]=c(a[g],l[g],A,n);e(a);let d=-1/0;for(const g of Object.keys(l))d=Math.max(d,Math.abs(l[g]-a[g]));d<i?(a=l,e(a),o=!0,d!=0&&t.requestRender()):t.requestTransition(g=>u(g))}function f(h){l=h,o&&(o=!1,s=+document.timeline.currentTime,u(s))}return f.stop=()=>{o=!0},f}class uN{constructor(e){this.genomes=new Map,this.baseUrl=e}async initialize(e){const n=new Kk(e);return this.genomes.set(n.name,n),Promise.all([...this.genomes.values()].map(i=>i.load(this.baseUrl)))}getGenome(e){if(!this.genomes.size)throw new Error("No genomes have been configured!");if(e){const n=this.genomes.get(e);if(!n)throw new Error(`No genome with the name ${e} has been configured!`);return n}else{if(this.genomes.size>1)throw new Error("Cannot pick a default genome! More than one have been configured!");return this.genomes.values().next().value}}}const fN="data:image/png;base64,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",AN={thin:100,light:300,regular:400,normal:400,medium:500,bold:700,black:900};class hN{constructor(e){this._webGLHelper=e,this.fontRepository="https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/",this._fonts=new jt([],JSON.stringify),this._metadataPromises=new Map,this._fontPromises=new Map,this._promises=[],this._defaultFontEntry={metrics:Bu(gw),texture:e?this._createTextureNow(fN):void 0}}async waitUntilReady(){await Promise.all(this._promises)}getFont(e,n="normal",i="regular"){if(le(i)&&(i=AN[i.toLowerCase()],!i))throw new Error("Unknown font weight: "+i);const r={family:e,style:n,weight:i};let s=this._fonts.get(r);return s||(s={metrics:void 0,texture:void 0},this._fonts.set(r,s),this._promises.push(this._loadFontEntry(s,r))),s}async _loadFontEntry(e,n){try{const i=await this._loadMetadata(n.family),r=gN(i,n),s=this.fontRepository+Qw(n.family)+"/"+r.replace(/\.\w+/,""),o=this._createTexture(s+".png"),a=this._loadFont(s+".json");e.texture=await o,e.metrics=await a}catch{console.warn(`Cannot load font: "${n.family}". Using the embedded default font.`),e.metrics=this._defaultFontEntry.metrics,e.texture=this._defaultFontEntry.texture}}_loadFont(e){let n=this._fontPromises.get(e);return n||(n=fetch(e).then(i=>{if(!i.ok)throw new Error("Could not load font: "+i.status);return i}).then(i=>i.json()).then(i=>Bu(i)),this._fontPromises.set(e,n)),n}_loadMetadata(e){const n=Qw(e);let i=this._metadataPromises.get(n);if(!i){const r=this.fontRepository+n+"/METADATA.pb";i=fetch(r).then(s=>{if(!s.ok)throw new Error("Could not load font metadata. Response status: "+s.status+", url: "+r);return s}).then(s=>s.text()).then(s=>dN(s)).catch(s=>{console.warn(s.message)}),this._metadataPromises.set(n,i)}return i}getDefaultFont(){return this._defaultFontEntry}_createTexture(e){const n=this._webGLHelper.gl;return new Promise((i,r)=>{Is(n,{src:e,min:n.LINEAR},(s,o,a)=>{s?r(s):i(o)})})}_createTextureNow(e){const n=this._webGLHelper.gl;let i;const r=new Promise((s,o)=>{i=Is(n,{src:e,min:n.LINEAR},(a,l,c)=>{a?o(a):s(l)})});return this._promises.push(r),i}}function Qw(t){return t.toLowerCase().replaceAll(/[^\w]/g,"")}function dN(t){const e=t.split(`
`),n=[];let i;for(const r of e)if(r.startsWith("fonts {")&&(i={name:void 0,style:void 0,weight:void 0,filename:void 0,post_script_name:void 0,full_name:void 0,copyright:void 0}),r.startsWith("}")&&(n.push(i),i=void 0),i){let s=r.match(/^\s*([A-Za-z_]+):[ ]?"(.*)"$/);if(s){const o=s[1];i[o]=s[2]}if(s=r.match(/^\s*([A-Za-z_]+):[ ]?(\d+)$/),s){const o=s[1];i[o]=+s[2]}}return n}function gN(t,e){let n,i=Number.POSITIVE_INFINITY;for(const r of t)if(e.family.localeCompare(r.name,void 0,{sensitivity:"accent"})==0&&e.style==r.style){const s=Math.abs(e.weight-r.weight);s<i&&(i=s,n=r)}return n?.filename}function pN(t,e){const n=[];let i;for(const r of t.split(`
`))if(r.startsWith(">"))i={identifier:r.match(/>(\S+)/)[1],sequence:""},n.push(i);else if(i)i.sequence+=r.trim();else throw new Error("Invalid fasta file!");return n}const kw=new Map,mN={Organism:"Homo sapiens"};async function wN(t,e,n={}){const i=t.symbol,r={...mN,GENE:i};for(const[o,a]of Object.entries(n))typeof a=="string"&&(r[o]=a);let s=kw.get(i)??await EN(r);return s?(kw.set(i,s),oe`
            <div class="title">
                <strong>${s.name}</strong>
                ${s.description}
            </div>
            <p class="summary">${s.summary}</p>
            <p class="source">Source: NCBI RefSeq Gene</p>
        `):null}async function yN(t){const e={mode:"cors"},n=new URL("https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi");n.search=new URLSearchParams({db:"gene",term:bN(t),sort:"relevance",retmax:"1",retmode:"json"}).toString();const r=(await fetch(n.toString(),e).then(s=>s.json())).esearchresult.idlist[0];if(r){const s=new URL("https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi");return s.search=new URLSearchParams({db:"gene",id:r,retmode:"json"}).toString(),(await fetch(s.toString(),e).then(l=>l.json())).result[r]}else return null}const CN=ra(yN,500);function EN(t){return CN(t)}function bN(t){return Object.entries(t).filter(([e,n])=>n&&n.length>0).map(([e,n])=>`("${n}"[${e}])`).join(" AND ")}const xN=ze(".4~r"),IN=ze(".4~e");function Fw(t){return t==null?oe` <span class="na">NA</span> `:le(t)?t.substring(0,30):Number.isInteger(t)?""+t:Ve(t)?Math.abs(t)>Math.pow(10,8)||Math.abs(t)<Math.pow(10,-8)?IN(t):xN(t):zr(t)?t?"True":"False":Ee(t)?oe`${t.map((e,n)=>[Fw(e),n<t.length-1?", ":de])}`:"?"+typeof t+" "+t}function Rw(t){const e=[];return Nw(Object.entries(t),e),e}function Nw(t,e,n){for(const[i,r]of t)i.startsWith("_")||(r!==null&&typeof r=="object"&&!Array.isArray(r)?Nw(Object.entries(r),e,(n||"")+i+"."):e.push({key:(n||"")+i,value:r}))}const BN={x:"x2",y:"y2"},vN=new Set(["auto","locus","interval","endpoints","disabled"]),Mw=new WeakMap;function Tw(t,e,n){const i=SN(e),r=Lw("x",t,e,i,zw(n,"x")),s=Lw("y",t,e,i,zw(n,"y")),o=r.rows.length>0&&s.rows.length>0,a=[...o?Pw("x",r.rows):r.rows,...o?Pw("y",s.rows):s.rows],l=new Set;for(const c of[r,s])for(const u of c.usedLinearizedFields){const f=i.get(u);if(!f||f.ambiguous)continue;NN(t,u,f,e)&&(l.add(f.chrom),l.add(f.pos))}return{hiddenRowKeys:[...l],genomicRows:a,flattenDatumRows:()=>Rw(t),formatGenomicLocus:(c,u)=>uc(e,c,u),formatGenomicInterval:(c,u)=>Gw(e,c,u)}}function SN(t){const e=Mw.get(t);if(e)return e;const n=FN(t);return Mw.set(t,n),n}function Pw(t,e){const n=t.toUpperCase()+" ";return e.map(i=>({key:n+i.key,value:i.value}))}function Lw(t,e,n,i,r){const s=new Set;if(r==="disabled")return{rows:[],usedLinearizedFields:s};const o=_w(n,t,e);if(!o)return{rows:[],usedLinearizedFields:s};o.field&&s.add(o.field);const a=_w(n,BN[t],e);a?.field&&s.add(a.field);const l=r==="auto"?DN(o,a,i):r;if(l==="endpoints"&&a){const[c,u]=QN(o,a,i);return{rows:[{key:"Endpoint 1",value:uc(n,t,c.value)??String(c.value)},{key:"Endpoint 2",value:uc(n,t,u.value)??String(u.value)}],usedLinearizedFields:s}}return l==="interval"&&a?{rows:[{key:"Interval",value:Gw(n,t,[o.value,a.value])??o.value+" - "+a.value}],usedLinearizedFields:s}:{rows:[{key:"Coordinate",value:uc(n,t,o.value)??String(o.value)}],usedLinearizedFields:s}}function DN(t,e,n){if(!e)return"locus";const i=Ow(t.field,n),r=Ow(e.field,n);return i&&r&&i!==r?"endpoints":"interval"}function Ow(t,e){const n=t?e.get(t):void 0;return n&&!n.ambiguous?n.groupId:void 0}function QN(t,e,n){const i=Uw(t.field,n),r=Uw(e.field,n);return i===2&&r!==2?[e,t]:r===1&&i!==1?[e,t]:i===2&&r===1?[e,t]:[t,e]}function Uw(t,e){const n=t?e.get(t):void 0,i=[n?.pos,n?.chrom,t];let r;for(const s of i){const o=kN(s);if(o!==void 0){if(r===void 0)r=o;else if(r!==o)return}}return r}function kN(t){if(!t)return;const e=t.toLowerCase(),n=e.match(/(?:^|[^0-9])(1|2)$/);if(n)return n[1]==="1"?1:2;const i=e.match(/(?:^|[_-])(first|second)(?:[_-]|$)/);if(i)return i[1]==="first"?1:2}function _w(t,e,n){const i=t.encoders?.[e];if(i?.scale?.type!=="locus")return;const r=i.dataAccessor;if(!r)return;const s=+r(n);if(Number.isFinite(s))return{value:s,field:r.fields?.length===1?r.fields[0]:void 0}}function FN(t){const e=new Map;let n=0,r=t.unitView?.getCollector?.()?.parent;for(;r;){const s=r.params;if(s?.type==="linearizeGenomicCoordinate"){const o=Ne(s.as),a=Ne(s.pos),l=RN(s.offset,a.length),c="g"+n++,u=s.channel==="y"?"y":"x";for(let f=0;f<o.length;f++){if(f>=a.length)continue;const h=e.get(o[f]);h?h.ambiguous=!0:e.set(o[f],{groupId:c,chrom:s.chrom,pos:a[f],offset:l[f],channel:u,ambiguous:!1})}}r=r.parent}return e}function RN(t,e){const n=Ne(t);return n.length===0?new Array(e).fill(0):n.length===1?new Array(e).fill(n[0]):n.length===e?n:new Array(e).fill(0)}function uc(t,e,n){return qf(t,e)?.formatLocus(n)}function Gw(t,e,n){return qf(t,e)?.formatInterval(n)}function qf(t,e){const n=t.encoders?.[e]?.scale;return n?.type==="locus"&&"genome"in n?n.genome():void 0}function zw(t,e){const n=t?.genomicCoordinates?.[e],i=typeof n=="string"?n:n?.mode??"auto";if(!vN.has(i))throw new Error('Unknown genomic coordinate display mode: "'+i+'"');return i}function NN(t,e,n,i){const r=qf(i,n.channel);if(!r)return!1;const s=t[n.chrom],o=t[n.pos],a=t[e];if(s===void 0||o===void 0||a===void 0)return!1;const l=+o,c=+a;if(!Number.isFinite(l)||!Number.isFinite(c))return!1;let u;try{u=r.toContinuous(s,l-n.offset)}catch{return!1}return Math.abs(u-c)<1e-6}async function MN(t,e,n,i){const r=(g,m)=>{for(const[p,w]of Object.entries(e.encoders))if(w?.dataAccessor?.fields.includes(g))switch(p){case"color":case"fill":case"stroke":return oe`
                            <span
                                class="color-legend"
                                style=${`background-color: ${w(m)}`}
                            ></span>
                        `}return""},s=i??Tw(t,e,n),o=s.flattenDatumRows?s.flattenDatumRows():Rw(t),a=s.genomicRows??[],l=new Set(s.hiddenRowKeys??[]),c=o.filter(g=>!l.has(g.key)),u=[...a,...c];if(!u.length)return;const f=u.map(g=>{const m=Fw(g.value),p=r(g.key,t);return oe`
            <tr>
                <th>${g.key}</th>
                <td>${m} ${p}</td>
            </tr>
        `}),h=oe`
        <table class="attributes">
            ${f}
        </table>
    `,A=e.unitView.getTitleText(),d=A?oe`
              <div class="title">
                  <strong>${A}</strong>
              </div>
          `:"";return oe`${d}${h}`}class io extends aw{#e=new Map;constructor(e,n,i,r,s,o){super(e,n,i,r,s,o),this.spec=e}async initializeChildren(){}getNextAutoName(e){const n=this.#e.get(e)??0;return this.#e.set(e,n+1),e+n}*[Symbol.iterator](){}visit(e){let n;try{n=e(this)}catch(i){throw i.view=this,i}if(n===Ar)return n;if(n!==Ln){e.beforeChildren&&e.beforeChildren(this);for(const i of this){const r=i.visit(e);if(r===Ar)return r}e.afterChildren&&e.afterChildren(this),e.postOrder&&e.postOrder(this)}}findDescendantByPath(e){let n=this;for(let i=0;i<e.length;i++){if(!(n instanceof io))return;const r=n.#t(e[i]);if(!r)return;if(i===e.length-1)return r;n=r}}#t(e){for(const n of this)if(n.name===e)return n}findDescendantByName(e){let n;return this.visit(i=>{if(i.name==e)return n=i,Ar}),n}getDefaultResolution(e,n){return"shared"}}function TN(t){SF(t),DF(t)}function Hw(t){t.getDescendants().forEach(e=>e.configureViewOpacity())}class Yw{constructor(e,n){this.container=e,this.options=n}async addChildSpec(e,n){const{specs:i,insertAt:r}=this.options.getChildSpecs(),s=n??i.length,o=this.options.defaultName?.(s,e)??this.container.getNextAutoName("child"),a=await this.container.context.createOrImportView(e,this.container,this.container,o);r(s,e);const l=this.options.insertView(a,s);this.options.prepareView&&await this.options.prepareView(a,s,l),Hw(a);const c=h=>h.isConfiguredVisible(),{dataSources:u,graphicsPromises:f}=Yf(a,this.container.context.dataFlow,c);return await Vf(a,u),await Lf(f),this.options.requestLayout!==!1&&(this.container.invalidateSizeCache(),this.container.context.requestLayoutReflow()),a}async removeChildAt(e){const{removeAt:n}=this.options.getChildSpecs();this.options.removeView(e),n(e),this.options.afterRemove&&await this.options.afterRemove(e),this.options.requestLayout!==!1&&(this.container.invalidateSizeCache(),this.container.context.requestLayoutReflow())}}const Vw=.5;function Kf(t){return"multiscale"in t&&Ee(t.multiscale)}function PN(t){if(!t.multiscale.length)throw new Error('"multiscale" must contain at least one child view.');const e=LN(t.stops,t.multiscale.length),n=t.multiscale.map((r,s)=>t.multiscale.length===1?r:{opacity:ON(s,t.multiscale.length,e),layer:[r]}),i={...t};return delete i.multiscale,delete i.stops,{...i,layer:n}}function LN(t,e){let n="unitsPerPixel",i,r="auto",s=Vw;if(Ee(t))i=Jw(t,e,"stops");else if(Ge(t))n=t.metric??"unitsPerPixel",i=Jw(t.values,e,"stops.values"),r=t.channel??"auto",s=t.fade??Vw;else throw new Error('"stops" must be an array or an object with "values".');if(n!=="unitsPerPixel")throw new Error('Only "unitsPerPixel" is supported for "stops.metric" in multiscale.');if(!["x","y","auto"].includes(r))throw new Error('"stops.channel" must be one of "x", "y", or "auto".');if(!Number.isFinite(s)||s<0||s>.5)throw new Error('"stops.fade" must be a finite number in range [0, 0.5].');if(i.forEach((o,a)=>{if(!be(o)&&(!Number.isFinite(o)||o<=0))throw new Error("Invalid stop value at index "+a+". Stop values must be positive finite numbers.")}),!i.some(be)){const o=i;for(let a=1;a<o.length;a++)if(o[a-1]<=o[a])throw new Error('"stops.values" must be strictly decreasing for "unitsPerPixel".');for(let a=0;a<o.length-1;a++){const l=o[a]*(1-s),c=o[a+1]*(1+s);if(l<=c)throw new Error("Adjacent transitions overlap. Reduce fade or increase stop spacing.")}}return{metric:n,values:i,channel:r,fade:s}}function Jw(t,e,n){if(!Ee(t))throw new Error('"'+n+'" must be an array of numbers or ExprRefs.');const i=e-1;if(t.length!==i)throw new Error("Invalid stop count for multiscale. Expected "+i+", got "+t.length+".");for(const r of t)if(!be(r)&&!Number.isFinite(r))throw new Error('"'+n+'" must contain only numbers or ExprRefs.');return t}function ON(t,e,n){let i,r;const s=n.values.map(o=>({hi:qw(o,1+n.fade),lo:qw(o,1-n.fade)}));if(t===0)i=[s[0].hi,s[0].lo];else if(t===e-1){const o=s.at(-1);i=[o.hi,o.lo]}else{const o=s[t-1],a=s[t];i=[o.hi,o.lo,a.hi,a.lo]}return t===0?r=[1,0]:t===e-1?r=[0,1]:r=[0,1,1,0],{channel:n.channel,unitsPerPixel:i,values:r}}function qw(t,e){return be(t)?{expr:"("+t.expr+") * "+e}:t*e}function jf(t){return"mark"in t&&(le(t.mark)||Ge(t.mark))}function Wf(t){return"layer"in t&&Ge(t.layer)}function Kw(t){return"import"in t}function ro(t){return"vconcat"in t&&Ee(t.vconcat)}function jw(t){return"hconcat"in t&&Ee(t.hconcat)}function fc(t){return"concat"in t&&Ee(t.concat)}class Ci extends io{#e=[];constructor(e,n,i,r,s,o){super(e,n,i,r,s,{layersChildren:!0,...o}),this.spec=e,this.needsAxes={x:!0,y:!0}}async initializeChildren(){this.#e=await Promise.all(this.spec.layer.map(e=>this.context.createOrImportView(e,this,this,this.getNextAutoName("layer"),n=>{if(!Wf(n)&&!jf(n)&&!Kf(n))throw new He("LayerView accepts only unit, layer, or multiscale specs as children!",this)})))}async addChildSpec(e,n){return this.#t().addChildSpec(e,n)}async removeChildAt(e){await this.#t().removeChildAt(e)}#t(){return new Yw(this,{getChildSpecs:()=>({specs:this.spec.layer,insertAt:(e,n)=>{this.spec.layer.splice(e,0,n)},removeAt:e=>{this.spec.layer.splice(e,1)}}),insertView:(e,n)=>(e.layoutParent??=this,this.#e.splice(n,0,e),e),removeView:e=>{const n=this.#e[e];if(!n)throw new Error("Child index out of range!");n.disposeSubtree(),this.#e.splice(e,1)},defaultName:()=>this.getNextAutoName("layer")})}get children(){return this.#e.slice()}*[Symbol.iterator](){for(const e of this.#e)yield e}render(e,n,i={}){if(super.render(e,n,i),!!this.isConfiguredVisible()){e.pushView(this,n);for(const r of this.#e)r.render(e,n,i);e.popView(this)}}propagateInteractionEvent(e){this.handleInteractionEvent(void 0,e,!0);for(let n=this.#e.length-1;n>=0;n--)if(this.#e[n].propagateInteractionEvent(e),e.stopped)return;this.handleInteractionEvent(void 0,e,!1)}}class Ww{constructor(e,n){this.n=e,this.maxCols=n??1/0}get nRows(){return this.maxCols==1/0?1:Math.ceil(this.n/this.maxCols)}get nCols(){return Math.min(this.n,this.maxCols)}get rowIndices(){const e=[],n=this.nCols,i=this.nRows;for(let r=0;r<i;r++){const s=[];e.push(s);for(let o=0;o<n;o++){const a=r*n+o;a<this.n&&s.push(a)}}return e}get colIndices(){const e=[],n=this.nCols,i=this.nRows;for(let r=0;r<n;r++){const s=[];e.push(s);for(let o=0;o<i;o++){const a=o*n+r;a<this.n&&s.push(a)}}return e}getCellIndex(e,n){let i=0;if(this.maxCols==1/0)i=n==0?e:void 0;else{if(e>=this.maxCols)return;i=n*this.nCols+e}return i<this.n?i:void 0}getCellCoords(e){if(!(e<0||e>=this.n))return[e%this.nCols,Math.floor(e/this.nCols)]}}function an(t){return()=>t}class ve{static create(e,n,i,r){return new ve(an(e),an(n),an(i),an(r))}static ZERO=ve.create(0,0,0,0);_offset(e,n){const i=this["_"+e];if(n===0)return i;switch(typeof n){case"number":return()=>i()+n;case"function":return()=>i()+n();default:throw new Error("Not a number of function")}}_passThrough(e){return this._offset(e,0)}constructor(e,n,i,r){this._x=e,this._y=n,this._width=i,this._height=r}get x(){return this._x()}get y(){return this._y()}get width(){return this._width()}get height(){return this._height()}get x2(){return this._x()+this._width()}get y2(){return this._y()+this._height()}equals(e){return e?this===e||this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height:!1}modify(e){if(!Object.keys(e).length)return this;const n=i=>{const r=e[i];return typeof r=="number"?an(r):typeof r=="function"?r:this._passThrough(i)};return new ve(n("x"),n("y"),n("width"),n("height"))}translate(e,n){return e===0&&n===0?this:new ve(this._offset("x",e),this._offset("y",n),this._passThrough("width"),this._passThrough("height"))}translateBy(e){return this.translate(e.x,e.y)}expand(e,n=1){return e.left==0&&e.top==0&&e.right==0&&e.bottom==0?this:new ve(e.left?this._offset("x",-e.left*n):this._passThrough("x"),e.top?this._offset("y",-e.top*n):this._passThrough("y"),e.width?this._offset("width",e.width*n):this._passThrough("width"),e.height?this._offset("height",e.height*n):this._passThrough("height"))}shrink(e){return this.expand(e,-1)}intersect(e){return this===e||e==null?this:new ve(()=>Math.max(this.x,e.x),()=>Math.max(this.y,e.y),()=>Math.min(this.x2,e.x2)-Math.max(this.x,e.x),()=>Math.min(this.y2,e.y2)-Math.max(this.y,e.y))}union(e){return this===e||e==null?this:new ve(()=>Math.min(this.x,e.x),()=>Math.min(this.y,e.y),()=>Math.max(this.x2,e.x2)-Math.min(this.x,e.x),()=>Math.max(this.y2,e.y2)-Math.min(this.y,e.y))}isDefined(){return this.width>=0&&this.height>=0}flatten(){return new ve(an(this.x),an(this.y),an(this.width),an(this.height))}containsPoint(e,n){return e>=this.x&&e<this.x2&&n>=this.y&&n<this.y2}normalizePoint(e,n,i=!1){const r={x:(e-this.x)/this.width,y:(n-this.y)/this.height};return i&&(r.y=1-r.y),r}denormalizePoint(e,n,i=!1){return i&&(n=1-n),{x:this.x+e*this.width,y:this.y+n*this.height}}toString(){return`Rectangle: x: ${this.x}, y: ${this.y}, width: ${this.width}, height: ${this.height}`}toRoundedString(){return`Rectangle: x: ${Math.round(this.x)}, y: ${Math.round(this.y)}, width: ${Math.round(this.width)}, height: ${Math.round(this.height)}`}}const hr=new WeakMap,Xf=new WeakMap;function UN(t,e){if(e!==null&&typeof e!="string")throw new Error("Import scope name must be a string or null.");hr.set(t,{name:e})}function cn(t,e={}){const i=e.skipSubtree??!1?"excludeSubtree":"exclude";Xf.set(t,i)}function Zf(t){const e=t.getDataAncestors(),n=[];for(let i=e.length-1;i>=0;i-=1){const r=hr.get(e[i]);r&&typeof r.name=="string"&&n.push(r.name)}return n}function _N(t){const e=[];for(const n of GN(t)){const i=zN(n);HN(t,i,e),YN(t,i,e)}return e}function Xw(t){return t.persist===!1?!1:Jl(t)?!0:a0(t)?!!t.bind:!1}function GN(t){const e=new Set([t]);return t.visit(n=>{const i=hr.get(n);i&&typeof i.name=="string"&&e.add(n)}),Array.from(e)}function zN(t){return Zf(t)}function Zw(t){return t.length?"import scope ["+t.join(" / ")+"]":"import scope (root)"}function HN(t,e,n){const i=new Map;$w(t,e,r=>{for(const[s,o]of r.paramRuntime.paramConfigs){if(!Xw(o))continue;const a=i.get(s);a?a.push(r):i.set(s,[r])}});for(const[r,s]of i){if(s.length<=1)continue;const o=s.map(a=>a.getPathString()).join(", ");n.push({message:'Bookmarkable parameter "'+r+'" is not unique within '+Zw(e)+". Found in: "+o+".",scope:e})}}function YN(t,e,n){const i=VN(t,e);if(!i.length)return;const r=i.filter(o=>JN(o));if(r.length<=1)return;const s=new Map;for(const o of r){const a=hr.get(o),l=a?a.name:void 0;typeof l!="string"||!l.length||s.set(l,(s.get(l)??0)+1)}for(const[o,a]of s)a>1&&n.push({message:'Import instance name "'+o+'" is used multiple times for addressable instances in '+Zw(e)+".",scope:e})}function VN(t,e){const n=[];return $w(t,e,i=>{if(Zf(i).length!==e.length+1)return;const s=hr.get(i);!s||typeof s.name!="string"||n.push(i)},{includeNamedImportRoots:!0}),n}function JN(t){let e=!1;return t.visit(n=>{const i=Xf.get(n);if(i==="excludeSubtree")return Ln;if(i!=="exclude"){for(const r of n.paramRuntime.paramConfigs.values())if(Xw(r))return e=!0,Ar}}),e}function $w(t,e,n,i={}){const r=i.includeNamedImportRoots??!1;t.visit(s=>{const o=hr.get(s),a=Xf.get(s);if(a==="excludeSubtree")return Ln;if(a!=="exclude"&&qN(s,e,o,r))return n(s)})}function qN(t,e,n,i){const r=Zf(t);return KN(r,e)?!0:!i||!n||typeof n.name!="string"||r.length!==e.length+1?!1:ey(e,r)}function KN(t,e){return t.length!==e.length?!1:ey(t,e)}function ey(t,e){if(t.length>e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const jN="chromosome_ticks_and_labels",WN={x:"width",y:"height"};function $f(t){return t=="x"?"y":"x"}const Ac={x:["bottom","top"],y:["left","right"]},eA=Object.fromEntries(Object.entries(Ac).map(([t,e])=>e.map(n=>[n,t])).flat(1));function On(t){return eA[t]}class ty extends Ci{constructor(e,n,i,r,s,o){const a=n=="locus",l={...a?ZN:ny,...XN(n,e),...e};super(a?$N(l,n):iy(l,n),i,r,s,`axis_${e.orient}`,{blockEncodingInheritance:!0,...o}),this.axisProps=l,cn(this,{skipSubtree:!0})}getSize(){const e={px:this.getPerpendicularSize()},n={grow:1};return eA[this.axisProps.orient]=="x"?new Tn(n,e):new Tn(e,n)}getPerpendicularSize(){return tA(this.axisProps)}isPickingSupported(){return!1}}function tA(t){const e=On(t.orient);let n=t.ticks&&t.tickSize||0;return t.labels&&(n+=t.labelPadding,e=="x"?n+=t.labelFontSize:n+=30),t.title&&(n+=t.titlePadding+t.titleFontSize),n=Math.min(t.maxExtent||1/0,Math.max(t.minExtent||0,n)),n}const ny={values:null,minExtent:20,maxExtent:1/0,offset:0,domain:!0,domainWidth:1,domainColor:"gray",domainDash:null,domainDashOffset:0,domainCap:"square",ticks:!0,tickSize:5,tickWidth:1,tickColor:"gray",tickDash:null,tickDashOffset:0,tickCap:"square",tickCount:null,tickMinStep:null,labels:!0,labelAlign:"center",labelBaseline:"middle",labelPadding:4,labelFontSize:10,labelLimit:180,labelColor:"black",format:null,titleColor:"black",titleFont:"sans-serif",titleFontSize:10,titlePadding:3};function XN(t,e){const n=e.orient,i=t=="nominal"||t=="ordinal";let r="center",s="middle",o=e.labelAngle??((n=="top"||n=="bottom")&&i?-90:0);switch(n){case"left":r="right";break;case"right":r="left";break;case"top":case"bottom":Math.abs(o)>30?(r=o>0==(n=="bottom")?"left":"right",s="middle"):s=n=="top"?"alphabetic":"top";break}return{labelAlign:r,labelAngle:o,labelBaseline:s}}function iy(t,e){const n={...t,extent:tA(t)},i=On(n.orient),r=$f(i),s=n.orient=="bottom"||n.orient=="right"?1:-1,o=n.orient=="bottom"||n.orient=="left"?1:0,a=()=>({field:"value",type:e}),l=()=>({name:"domain",data:{values:[{}]},mark:{type:"rule",clip:!1,strokeDash:n.domainDash,strokeCap:n.domainCap,color:n.domainColor,[r]:o,size:n.domainWidth}}),c=()=>({name:"labels",mark:{type:"text",clip:!1,align:n.labelAlign,angle:n.labelAngle,baseline:n.labelBaseline,[r+"Offset"]:(n.tickSize+n.labelPadding)*s,[r]:o,size:n.labelFontSize,color:n.labelColor,minBufferSize:1500},encoding:{[i]:a(),text:{field:"label"}}}),u=()=>({name:"ticks",mark:{type:"rule",clip:!1,strokeDash:n.tickDash,strokeCap:n.tickCap,color:n.tickColor,size:n.tickWidth,minBufferSize:300},encoding:{[r]:{value:o},[r+"2"]:{value:o-n.tickSize/n.extent*(o?1:-1)}}}),f=()=>({name:"title",data:{values:[{}]},mark:{type:"text",clip:!1,align:"center",baseline:n.orient=="bottom"?"bottom":"top",angle:[0,90,0,-90][["top","right","bottom","left"].indexOf(n.orient)],text:n.title,color:n.titleColor,[i]:.5,[r]:1-o}}),h=()=>{const d={name:"ticks_and_labels",encoding:{[i]:a()},layer:[]};return n.ticks&&d.layer.push(u()),n.labels&&d.layer.push(c()),d},A={resolve:{scale:{[i]:"forced"}},domainInert:!0,[WN[$f(i)]]:n.extent,data:{lazy:{type:"axisTicks",channel:i,axis:t}},layer:[]};return n.domain&&A.layer.push(l()),(n.ticks||n.labels)&&A.layer.push(h()),n.title&&A.layer.push(f()),A}const ZN={...ny,chromTicks:!0,chromTickSize:18,chromTickWidth:1,chromTickColor:"#989898",chromTickDash:[4,2],chromTickDashOffset:1,chromLabels:!0,chromLabelFontSize:13,chromLabelFontWeight:"normal",chromLabelFontStyle:"normal",chromLabelColor:"black",chromLabelAlign:"left",chromLabelPadding:7};function $N(t,e){const n={...t,extent:tA(t)},i=On(n.orient),r=$f(i),s=n.orient=="bottom"||n.orient=="left"?1:0,o=()=>({name:"chromosome_ticks",mark:{type:"rule",strokeDash:t.chromTickDash,strokeDashOffset:t.chromTickDashOffset,[r]:s,[r+"2"]:s-n.chromTickSize/n.extent*(s?1:-1),color:t.chromTickColor,size:n.chromTickWidth}}),a=()=>{let u;switch(n.orient){case"top":u={y:0,angle:0,paddingX:4,dy:-n.chromLabelPadding,viewportEdgeFadeWidthLeft:20,viewportEdgeFadeWidthRight:20,viewportEdgeFadeDistanceRight:-10,viewportEdgeFadeDistanceLeft:-20};break;case"bottom":u={y:1,angle:0,paddingX:4,dy:n.chromLabelPadding+n.chromLabelFontSize*.73,viewportEdgeFadeWidthLeft:20,viewportEdgeFadeWidthRight:20,viewportEdgeFadeDistanceRight:-10,viewportEdgeFadeDistanceLeft:-20};break;case"left":u={x:1,angle:-90,paddingY:4,dy:-n.chromLabelPadding,viewportEdgeFadeWidthBottom:20,viewportEdgeFadeWidthTop:20,viewportEdgeFadeDistanceBottom:-20,viewportEdgeFadeDistanceTop:-10};break;case"right":u={x:0,angle:90,align:"right",paddingY:4,dy:-n.chromLabelPadding};break;default:u={}}return{name:"chromosome_labels",mark:{type:"text",size:n.chromLabelFontSize,font:n.chromLabelFont,fontWeight:n.chromLabelFontWeight,fontStyle:n.chromLabelFontStyle,color:n.chromLabelColor,align:t.chromLabelAlign,baseline:"alphabetic",clip:!1,...u},encoding:{[i+"2"]:{field:"continuousEnd",type:e},text:{field:"name"}}}};let l;switch(n.orient){case"bottom":case"top":l={};break;case"left":l={labelAngle:-90,labelAlign:"center",labelPadding:6};break;case"right":l={labelAngle:90,labelAlign:"center",labelPadding:6};break;default:l={}}const c=iy({...t,...l},e);if(t.chromTicks||t.chromLabels){const u={name:jN,data:{lazy:{type:"axisGenome",channel:On(n.orient)}},encoding:{[i]:{field:"continuousStart",type:e,band:0}},layer:[]};if(t.chromTicks&&u.layer.push(o()),t.chromLabels){u.layer.push(a());let f;c.layer.filter(h=>h.name=="ticks_and_labels").forEach(h=>h.layer.filter(A=>A.name=="labels").forEach(A=>{f=A.mark})),f&&(n.orient=="top"||n.orient=="bottom"?(f.viewportEdgeFadeWidthLeft=30,f.viewportEdgeFadeDistanceLeft=40):(f.viewportEdgeFadeWidthBottom=30,f.viewportEdgeFadeDistanceBottom=40))}c.layer.push(u)}return c}class eM{#e;#t=0;#n=0;constructor(e){this.#e=new Array(e)}push(e){this.#e[this.#t]=e,this.#t=(this.#t+1)%this.size,this.#n=Math.min(this.#n+1,this.size)}get(){const e=this.#e;return this.#n<this.size?e.slice(0,this.#n):e.slice(this.#t,this.size).concat(e.slice(0,this.#t))}get size(){return this.#e.length}get length(){return this.#n}}class lt{static fromMouseEvent(e){return new lt(e.clientX,e.clientY)}constructor(e,n){this.x=e,this.y=n}subtract(e){return new lt(this.x-e.x,this.y-e.y)}add(e){return new lt(this.x-e.x,this.y-e.y)}multiply(e){return new lt(this.x*e,this.y*e)}get length(){return Math.sqrt(this.x**2+this.y**2)}equals(e){return e?e===this||e.x===this.x&&e.y===this.y:!1}}let so,ry=0;function sy(){ry=performance.now()}function oy(){return performance.now()-ry<50}function tM(t){return function(...e){sy(),t(...e)}}function nM(t,e,n,i,r){if(n=tM(n),t.type=="wheel"){t.uiEvent.preventDefault();const s=t.uiEvent,o=s.deltaMode?120:1;if(!s.deltaX&&!s.deltaY)return;so?.stop();let{x:a,y:l}=t.point;if(i){const c=i.mark.encoders;c.x&&!c.x2&&!c.x.constant&&(a=+c.x(i.datum)*e.width+e.x),c.y&&!c.y2&&!c.y.constant&&(l=(1-+c.y(i.datum))*e.height+e.y)}Math.abs(s.deltaX)<Math.abs(s.deltaY)?n({x:a,y:l,xDelta:0,yDelta:0,zDelta:s.deltaY*o/300}):n({x:a,y:l,xDelta:-s.deltaX*o,yDelta:0,zDelta:0})}else if(t.type=="mousedown"&&t.mouseEvent.button===0){so&&so.stop();const s=new eM(30),o=t.mouseEvent;o.preventDefault();let a=lt.fromMouseEvent(o);const l=f=>{const h=lt.fromMouseEvent(f);s.push({point:h,timestamp:performance.now()});const A=h.subtract(a);n({x:a.x,y:a.y,xDelta:A.x,yDelta:A.y,zDelta:0}),a=h},c=()=>{const h=performance.now(),A=s.get().filter(C=>h-C.timestamp<160);if(A.length<5||!r||iM(A))return;const d=A.at(-1),g=A[0],m=d.point.subtract(g.point).multiply(1/(d.timestamp-g.timestamp));let p=a.x,w=a.y;so=Jf(r,C=>{n({x:C.x,y:C.y,xDelta:p-C.x,yDelta:w-C.y,zDelta:0}),p=C.x,w=C.y},150,.5,{x:p,y:w}),so({x:a.x-m.x*250,y:a.y-m.y*250})},u=()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",u),c()};document.addEventListener("mouseup",u,!1),document.addEventListener("mousemove",l,!1)}}function iM(t){const e=t[Math.floor(t.length/2)],n=e.point.subtract(t[0].point).multiply(e.timestamp-t[0].timestamp),i=t.at(-1).point.subtract(e.point).multiply(t.at(-1).timestamp-e.timestamp),r=n.length;return i.length/r<.4}class rM extends Ci{constructor(e,n,i,r,s,o){const l={...n=="locus"?sM:ay,...e};super(lM(l,n),i,r,s,`axisGrid_${e.orient}`,{blockEncodingInheritance:!0,...o}),this.axisProps=l,cn(this,{skipSubtree:!0})}getOrient(){return this.axisProps.orient}isPickingSupported(){return!1}}const ay={values:null,grid:!1,gridCap:"butt",gridColor:"lightgray",gridDash:null,gridOpacity:1,gridWidth:1,tickCount:null,tickMinStep:null},sM={...ay,chromGrid:!1,chromGridCap:"butt",chromGridColor:"gray",chromGridDash:[1,5],chromGridOpacity:1,chromGridWidth:1};function oM(t,e){const n=t,i=On(n.orient);return{name:"grid_lines",data:{lazy:{type:"axisTicks",channel:i,axis:t}},mark:{type:"rule",strokeDash:n.gridDash,strokeCap:n.gridCap,color:n.gridColor,size:n.gridWidth,opacity:n.gridOpacity,minBufferSize:300},encoding:{[i]:{field:"value",type:e}}}}function aM(t,e){const n=t,i=On(n.orient);return{name:"chromosome_lines",data:{lazy:{type:"axisGenome",channel:i}},mark:{type:"rule",strokeDash:n.chromGridDash,strokeCap:n.chromGridCap,color:n.chromGridColor,size:n.chromGridWidth,opacity:n.chromGridOpacity},encoding:{[i]:{field:"continuousStart",type:e,band:0}}}}function cM(t,e){const n=t,i=On(n.orient);return{name:"chromosome_fill",data:{lazy:{type:"axisGenome",channel:i}},mark:{type:"rect"},encoding:{[i]:{field:"continuousStart",type:e,band:0},[i+"2"]:{field:"continuousEnd",band:0},fill:{field:"odd",type:"nominal",scale:{domain:[!1,!0],range:[n.chromGridFillEven??"white",n.chromGridFillOdd??"white"]}},opacity:{field:"odd",type:"nominal",scale:{type:"ordinal",domain:[!1,!0],range:[n.chromGridFillEven?1:0,n.chromGridFillOdd?1:0]}}}}}function lM(t,e){const n={...t},i=[];return n.chromGrid&&(n.chromGridFillOdd||n.chromGridFillEven)&&i.push(cM(n,e)),n.chromGrid&&n.chromGridOpacity>0&&i.push(aM(n,e)),n.grid&&n.gridOpacity>0&&i.push(oM(n,e)),{name:"grid_layers",resolve:{scale:{[On(t.orient)]:"forced",fill:"independent",opacity:"independent"}},domainInert:!0,layer:i}}const cy={anchor:"middle",frame:"group",offset:10,orient:"top",align:void 0,angle:0,baseline:"alphabetic",dx:0,dy:0,color:void 0,font:void 0,fontSize:12,fontStyle:"normal",fontWeight:"normal"},uM={orient:"left",anchor:"middle",align:"right",baseline:"middle",angle:0,fontSize:12},fM={orient:"top",anchor:"start",align:"left",baseline:"top",offset:-10,dx:10,fontSize:12},AM={start:0,middle:.5,end:1},hM={start:"left",middle:"center",end:"right"};function dM(t){if(!t)return;const e=le(t)?{text:t}:t;if(!e.text||e.orient=="none")return;const n={"track-title":uM,overlay:fM}[e.style]??{},i={...cy,...n,...e};let r={},s={x:0,y:0};const o=AM[i.anchor??"middle"];switch(i.orient){case"top":s={x:o,y:1},r={baseline:"alphabetic",angle:0};break;case"right":s={x:1,y:1-o},r={baseline:"alphabetic",angle:90};break;case"bottom":s={x:o,y:0},r={baseline:"top",angle:0};break;case"left":s={x:0,y:o},r={baseline:"alphabetic",angle:-90};break}const a={...cy,...r,...n,...e},l={xOffset:0,yOffset:0};switch(i.orient){case"top":l.yOffset=-a.offset;break;case"right":l.xOffset=a.offset;break;case"bottom":l.yOffset=a.offset;break;case"left":l.xOffset=-a.offset;break}return{data:{values:[{}]},mark:{type:"text",tooltip:null,clip:!1,...s,...l,text:a.text,align:a.align??hM[a.anchor],angle:a.angle,baseline:a.baseline,dx:a.dx,dy:a.dy,color:a.color,font:a.font,size:a.fontSize,fontStyle:a.fontStyle,fontWeight:a.fontWeight}}}class ly extends nt{#e;#t=ve.ZERO;#n=ve.ZERO;#i=ve.ZERO;viewportOffset=0;#s;constructor(e,n,i={}){const r={scrollbarSize:8,scrollbarPadding:2,scrollbarMinLength:20};super({params:[{name:"scrollbarOpacity",value:1}],opacity:{expr:"scrollbarOpacity"},data:{values:[{}]},mark:{type:"rect",fill:"#b0b0b0",fillOpacity:.6,stroke:"white",strokeWidth:1,strokeOpacity:1,cornerRadius:5,clip:!1}},e.layoutParent.context,e.layoutParent,e.view,"scrollbar-"+n,{blockEncodingInheritance:!0}),cn(this,{skipSubtree:!0}),this.config=r,this.#e=n,this.#s=i.onViewportOffsetChange;const s=this.config.scrollbarPadding,o=this.config.scrollbarSize;this.#t=this.#e=="vertical"?new ve(()=>this.#n.x+this.#n.width-o-s,()=>this.#n.y+s+this.scrollOffset,()=>o,()=>this.#a()):new ve(()=>this.#n.x+s+this.scrollOffset,()=>this.#n.y+this.#n.height-o-s,()=>this.#a(),()=>o),this.#A(this.viewportOffset),this.addInteractionEventListener("mousedown",(a,l)=>{if(l.stopPropagation(),this.#c()<=0)return;const c=d=>n=="vertical"?d.clientY:d.clientX;l.mouseEvent.preventDefault();const u=this.scrollOffset,f=c(l.mouseEvent),h=d=>{const g=this.#c();if(g<=0)return;const m=tr(c(d)-f+u,0,g);this.interpolateViewportOffset({x:this.#u(m)})},A=()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",A)};document.addEventListener("mouseup",A,!1),document.addEventListener("mousemove",h,!1)})}get scrollOffset(){return this.#l(this.viewportOffset)}setViewportOffset(e,{notify:n=!0,syncSmoother:i=!1}={}){this.viewportOffset=tr(e,0,this.#f()),i&&this.#A(this.viewportOffset),n&&this.#s&&this.#s(this.viewportOffset)}#o(){const e=this.#e=="horizontal"?"width":"height",n=this.#n[e],i=this.#i[e];return i>0?Math.min(1,n/i):1}#r(){const e=this.#e=="horizontal"?"width":"height";return Math.max(0,this.#n[e]-2*this.config.scrollbarPadding)}#a(){const e=this.#r(),n=this.#o()*e,i=this.config.scrollbarMinLength;return Math.min(e,Math.max(i,n))}#c(){return Math.max(0,this.#r()-this.#a())}#l(e){const n=this.#f(),i=this.#c();return n<=0||i<=0?0:e/n*i}#u(e){const n=this.#f(),i=this.#c();return n<=0||i<=0?0:e/i*n}#f(){const e=this.#e=="horizontal"?"width":"height";return Math.max(0,this.#i[e]-this.#n[e])}render(e,n,i){super.render(e,this.#t,i)}updateScrollbar(e,n){this.#n=e.flatten(),this.#i=n,this.setViewportOffset(this.viewportOffset,{notify:!1,syncSmoother:!0})}#A(e){this.interpolateViewportOffset=Jf(this.context.animator,n=>{this.setViewportOffset(n.x,{notify:!0,syncSmoother:!1})},35,.4,{x:e})}}class gM extends Ci{constructor(e,n,i={}){const r=n(),s=Object.keys(r.intervals);if(ni.every(u=>!s.includes(u)))throw new Error("SelectionRect requires at least one of the channels 'x' or 'y' to be present in the selection.");const o={name:"selectionRect",domainInert:!0,resolve:{scale:{x:"forced",y:"forced"}},data:{values:uy(n())},encoding:{},layer:[]};s.includes("x")&&(o.encoding.x={field:"_x",type:null,title:null},o.encoding.x2={field:"_x2"}),s.includes("y")&&(o.encoding.y={field:"_y",type:null,title:null},o.encoding.y2={field:"_y2"}),o.layer.push({name:"selectionRectRect",mark:{type:"rect",clip:!0,fill:"#808080",fillOpacity:.05,stroke:"black",strokeWidth:1,strokeOpacity:.2,...i}});const a=u=>{const f=e.view.getScaleResolution(u);return`format(datum._${u}2 - datum._${u}, '.3s')`+(f.type==="locus"?" + 'b'":"")},l=i.measure=="inside"?9:i.measure=="outside"?-9:0;s.includes("x")&&l!=0&&o.layer.push({name:"selectionRectTextX",mark:{type:"text",align:"center",paddingX:5,dy:l,tooltip:null},encoding:{text:{expr:a("x")},y:s.includes("y")?{field:"_y2",type:null,title:null}:{value:1},y2:null}}),s.includes("y")&&l!=0&&o.layer.push({name:"selectionRectTextY",mark:{type:"text",align:"center",paddingY:5,dy:l,tooltip:null,angle:-90},encoding:{text:{expr:a("y")},x2:null}}),super(o,e.layoutParent.context,e.layoutParent,e.view,"selectionRect",{blockEncodingInheritance:!0}),cn(this,{skipSubtree:!0});const c=()=>{const u=n(),f=this.flowHandle?.dataSource;if(!f)throw new Error("Cannot find selection rect data source handle!");f.updateDynamicData(uy(u))};this.registerDisposer(n.subscribe(c))}}function uy(t){const e=t.intervals.x,n=t.intervals.y;return!e&&!n?[]:[{_x:e?.[0],_x2:e?.[1],_y:n?.[0],_y2:n?.[1]}]}class pM{constructor(e,n,i){if(this.layoutParent=n,this.view=e,this.serial=i,this.background=void 0,this.backgroundStroke=void 0,this.axes={},this.gridLines={},this.scrollbars={},this.selectionRect=void 0,this.title=void 0,this.coords=ve.ZERO,e.needsAxes.x||e.needsAxes.y){const r=e.spec,s="view"in r?r?.view:void 0,o=mM(s);o&&(this.background=new nt(o,n.context,n,e,"background"+i,{blockEncodingInheritance:!0}),cn(this.background,{skipSubtree:!0}));const a=wM(s);a&&(this.backgroundStroke=new nt(a,n.context,n,e,"backgroundStroke"+i,{blockEncodingInheritance:!0}),cn(this.backgroundStroke,{skipSubtree:!0}));const l=dM(e.spec.title);if(l){const c=new nt(l,n.context,n,e,"title"+i,{blockEncodingInheritance:!0});this.title=c,cn(this.title,{skipSubtree:!0})}}e.spec.viewportWidth!=null&&(this.scrollbars.horizontal=new ly(this,"horizontal")),e.spec.viewportHeight!=null&&(this.scrollbars.vertical=new ly(this,"vertical")),this.#e()}#e(){const e=this.view,n=i=>{this.view.context.glHelper.canvas.style.cursor=i};for(const[i,r]of e.paramRuntime.paramConfigs){if(!("select"in r))continue;const s=aa(r.select);if(!r0(s))continue;const o=s.encodings,a=Object.fromEntries(o.map(C=>{const y=this.view.getScaleResolution(C),x=y?.getScale();if(!x||!Pe(x.type))throw new Error(`No continuous scale found for interval selection param "${i}" on channel "${C}"! Scale type is "${x?.type??"none"}".`);return[C,y]}));if(this.selectionRect)throw new Error("Only one interval selection per container is currently allowed!");let l=!1,c=!1,u=!1,f=null;const h=(C,y)=>Object.fromEntries(o.map(x=>[x,[Math.min(C[x],y[x]),Math.max(C[x],y[x])]])),A=e.paramRuntime.createExpression(i),d=C=>{e.paramRuntime.setValue(i,C)};r.value&&d({type:"interval",intervals:r.value});const g=()=>{d(t0(o)),n(null)};this.selectionRect=new gM(this,A,s.mark),this.selectionRect.initializeChildren();const m=C=>{const y={x:0,y:0},x=e.coords.normalizePoint(C.x,C.y,!0);for(const I of o){const b=a[I].getScale(),S=b.invert(I=="x"?x.x:x.y);y[I]=S+(["index","locus"].includes(b.type)?.5:0)}return y},p=C=>{const{intervals:y}=C,x=(S,D,v)=>{const F=(O,z)=>z==null?null:a[O].getScale()(z),R=F("x",S)??v,M=F("y",D)??v;return e.coords.denormalizePoint(R,M,!0)},I=x(y.x?.[0],y.y?.[0],0),b=x(y.x?.[1],y.y?.[1],1);return ve.create(I.x,I.y,b.x-I.x,b.y-I.y)};e.addInteractionEventListener("mousedown",(C,y)=>{if(y.mouseEvent.button!=0)return;if(f=l?p(A()):null,f)n("grabbing"),c=!0;else{const D=y.point;if(s0(A())&&(c=!0),y.mouseEvent.shiftKey)g(),u=!0;else if(s0(A())){const F=(R,M)=>{e.removeInteractionEventListener("mouseup",F);const O=M.point;D.subtract(O).length<2&&g()};e.addInteractionEventListener("mouseup",F);return}else return}y.stopPropagation();const x=y.point,I=lt.fromMouseEvent(y.mouseEvent).subtract(x),b=D=>{const v=lt.fromMouseEvent(D).subtract(I);let F;if(f){const R=v.subtract(x),M=f.translate(R.x,R.y);F=h(m(new lt(M.x,M.y)),m(new lt(M.x2,M.y2)))}else F=h(m(x),m(v));for(const R of o){const M=a[R],{zoomExtent:O,scale:z}=M,_=F[R];if(["index","locus"].includes(z.type)&&(_[0]=Math.ceil(_[0]),_[1]=Math.ceil(_[1])),f){const Y=_[1]-_[0],te=O[0],ae=O[1];_[0]<te&&(_[0]=te,_[1]=te+Y),_[1]>ae&&(_[1]=ae,_[0]=ae-Y)}else _[0]=Math.max(O[0],_[0]),_[1]=Math.min(O[1],_[1]);_[1]=Math.min(O[1],_[1])}d({type:"interval",intervals:F})},S=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",S),u=!1,f&&(n("move"),f=null)};document.addEventListener("mousemove",b),document.addEventListener("mouseup",S)}),e.addInteractionEventListener("click",(C,y)=>{y.mouseEvent.button==0&&c&&(y.stopPropagation(),c=!1)},!0);const w=C=>iv(A(),m(C));e.addInteractionEventListener("dblclick",(C,y)=>{w(y.point)&&(g(),y.stopPropagation())},!0),e.addInteractionEventListener("mousemove",(C,y)=>{w(y.point)?u||(l=!0,f||n("move")):(l=!1,f||n(null))})}}*getChildren(){this.background&&(yield this.background),this.backgroundStroke&&(yield this.backgroundStroke),this.title&&(yield this.title),yield*Object.values(this.axes),yield*Object.values(this.gridLines),yield this.view,yield*Object.values(this.scrollbars),this.selectionRect&&(yield this.selectionRect)}async createAxes(){this.disposeAxisViews();const{view:e,axes:n,gridLines:i}=this,r=(a,l)=>{const c=a.getAxisProps();if(c===null)return;const u=c?{...c}:{};if(!u.orient){for(const f of Ac[l])if(!n[f]){u.orient=f;break}if(!u.orient)throw new Error("No slots available for an axis! Perhaps a LayerView has more than two children?")}if(u.title??=a.getTitle(),!Ac[l].includes(u.orient))throw new Error(`Invalid axis orientation "${u.orient}" on channel "${l}"!`);return u},s=async(a,l,c)=>{const u=r(a,l);if(u){if(n[u.orient])throw new Error(`An axis with the orient "${u.orient}" already exists!`);const f=new ty(u,a.scaleResolution.type,this.layoutParent.context,this.layoutParent,c);n[u.orient]=f,await f.initializeChildren()}},o=async(a,l,c)=>{const u=r(a,l);if(u&&(u.grid||u.chromGrid)){const f=new rM(u,a.scaleResolution.type,this.layoutParent.context,this.layoutParent,c);i[u.orient]=f,await f.initializeChildren()}};for(const a of["x","y"])if(e.needsAxes[a]){const l=e.resolutions.axis[a];if(!l)continue;await s(l,a,e)}for(const a of["x","y"])if(e.needsAxes[a]&&e.getConfiguredOrDefaultResolution(a,"axis")!="excluded"){const l=e.getAxisResolution(a);if(!l)continue;await o(l,a,e)}if(e instanceof Ci){for(const a of e)for(const[l,c]of Object.entries(a.resolutions.axis)){const u=c.getAxisProps();u&&u.orient&&await s(c,l,a)}for(const a of e)for(const[l,c]of Object.entries(a.resolutions.axis)){const u=c.getAxisProps();u&&!u.orient&&await s(c,l,a)}}[...Object.values(n),...Object.values(i)].forEach(a=>a.visit(l=>{l instanceof nt&&l.resolve("scale")}))}disposeAxisViews(){for(const e of Object.values(this.axes))e.disposeSubtree();for(const e of Object.values(this.gridLines))e.disposeSubtree();this.axes={},this.gridLines={}}getOverhang(){const e=n=>{const i=this.axes[n];return i?Math.max(i.getPerpendicularSize()+(i.axisProps.offset??0),0):0};return new qe(e("top"),e("right"),e("bottom"),e("left")).add(this.view.getOverhang())}getOverhangAndPadding(){return this.getOverhang().add(this.view.getPadding())}}function mM(t){if(t?.fill||t?.fillOpacity||t?.shadowOpacity)return{data:{values:[{}]},mark:{color:t.fill,opacity:t.fillOpacity??(t.fill?1:0),type:"rect",clip:!1,tooltip:null,minHeight:1,minOpacity:0,shadowBlur:t.shadowBlur,shadowColor:t.shadowColor,shadowOffsetX:t.shadowOffsetX,shadowOffsetY:t.shadowOffsetY,shadowOpacity:t.shadowOpacity}}}function wM(t){if(!(!t||!t.stroke||t.strokeWidth===0||t.strokeOpacity===0))return{resolve:{scale:{x:"excluded",y:"excluded"},axis:{x:"excluded",y:"excluded"}},data:{values:[{x:0,y:0,x2:1,y2:0},{x:1,y:0,x2:1,y2:1},{x:1,y:1,x2:0,y2:1},{x:0,y:1,x2:0,y2:0}]},mark:{size:t.strokeWidth??1,color:t.stroke??"lightgray",strokeCap:"square",opacity:t.strokeOpacity??1,type:"rule",clip:!1,tooltip:null},encoding:{x:{field:"x",type:"quantitative",scale:null},y:{field:"y",type:"quantitative",scale:null},x2:{field:"x2"},y2:{field:"y2"}}}}const yM={pan:{baseSpeed:1,maxExtraSpeed:3,pressHalfLifeMs:30,releaseHalfLifeMs:100,holdGrowthHalfLifeMs:800,stopVelocity:.01},zoom:{baseSpeed:3,maxExtraSpeed:15,pressHalfLifeMs:10,releaseHalfLifeMs:100,holdGrowthHalfLifeMs:600,stopVelocity:.01}};class CM{#e;#t;#n;#i;#s;constructor(e=yM){this.#i=e.pan,this.#s=e.zoom,this.#e={KeyW:!1,KeyA:!1,KeyS:!1,KeyD:!1},this.#t={velocity:0,holdMs:0,direction:0},this.#n={velocity:0,holdMs:0,direction:0}}isNavigationKey(e){return e==="KeyW"||e==="KeyA"||e==="KeyS"||e==="KeyD"}handleKeyDown(e){return this.#o(e,!0)}handleKeyUp(e){return this.#o(e,!1)}reset(){this.#e.KeyW=!1,this.#e.KeyA=!1,this.#e.KeyS=!1,this.#e.KeyD=!1,this.#t.velocity=0,this.#t.holdMs=0,this.#t.direction=0,this.#n.velocity=0,this.#n.holdMs=0,this.#n.direction=0}step(e){if(e<=0)return{panDelta:0,zoomDelta:0,active:this.isActive()};{const n=fy(this.#e.KeyD,this.#e.KeyA),i=fy(this.#e.KeyW,this.#e.KeyS),r=Ay(this.#t,n,e,this.#i),s=Ay(this.#n,i,e,this.#s),o=e/1e3;return{panDelta:r*o,zoomDelta:s*o,active:this.isActive()}}}isActive(){return this.#e.KeyW||this.#e.KeyA||this.#e.KeyS||this.#e.KeyD?!0:this.#t.velocity!==0||this.#n.velocity!==0}#o(e,n){if(this.isNavigationKey(e)){const i=e;return this.#e[i]===n?!1:(this.#e[i]=n,!0)}else return!1}}function fy(t,e){return t===e?0:e?1:-1}function Ay(t,e,n,i){if(e!==0){t.direction!==e&&(t.holdMs=0),t.holdMs+=n;const r=i.maxExtraSpeed*(1-Math.pow(2,-t.holdMs/i.holdGrowthHalfLifeMs)),s=e*(i.baseSpeed+r);t.velocity=hy(t.velocity,s,n,i.pressHalfLifeMs)}else t.holdMs=0,t.velocity=hy(t.velocity,0,n,i.releaseHalfLifeMs),Math.abs(t.velocity)<i.stopVelocity&&(t.velocity=0);return t.direction=e,t.velocity}function hy(t,e,n,i){return e+(t-e)*Math.pow(2,-n/i)}function dy(t){const e={x:new Set,y:new Set};return t.visit(n=>{for(const[i,r]of Object.entries(e)){const s=n.getScaleResolution(i);s&&s.isZoomable()&&r.add(s)}}),e}function nA(t){const e=dy(t).x;if(e.size===1){const n=e.values().next().value,i=t.getScaleResolution("x");return!i||i!==n?void 0:n}}class EM{#e;#t;#n=.5;#i=new CM;#s=!1;#o=0;#r=e=>{if(!this.#s)return;const n=nA(this.#t);if(!n){this.#i.reset(),this.#s=!1,this.#o=0;return}const i=Math.max(0,e-this.#o);this.#o=e;const r=this.#i.step(i);(r.panDelta!==0||r.zoomDelta!==0)&&n.zoom(2**r.zoomDelta,this.#n,r.panDelta)&&(sy(),this.#e.animator.requestRender()),r.active?this.#e.animator.requestTransition(this.#r):(this.#s=!1,this.#o=0)};constructor({context:e,viewRoot:n}){this.#e=e,this.#t=n,this.#a()}handlePointerEvent(e,n){if(e){const i=e.view;if(typeof i.getKeyboardZoomAnchorX=="function"){const r=i.getKeyboardZoomAnchorX(n.point);Number.isFinite(r)&&(this.#n=Math.max(0,Math.min(1,r)))}else{const r=e.coords.normalizePoint(n.point.x,n.point.y);this.#n=r.x}}else return}#a(){const e=this.#e.addKeyboardListener;typeof e=="function"&&(e("keydown",n=>{bM(n)||!this.#i.isNavigationKey(n.code)||!nA(this.#t)||!this.#i.handleKeyDown(n.code)||(n.preventDefault(),this.#c())}),e("keyup",n=>{!this.#i.isNavigationKey(n.code)||!this.#i.handleKeyUp(n.code)||!nA(this.#t)||(n.preventDefault(),this.#c())}))}#c(){this.#s||(this.#s=!0,this.#o=performance.now(),this.#e.animator.requestTransition(this.#r))}}function bM(t){return!!(t.altKey||t.ctrlKey||t.metaKey||xM(t.target))}function xM(t){if(!t||typeof t!="object")return!1;const e=t;if(e.isContentEditable)return!0;if(typeof e.nodeName=="string"){const n=e.nodeName.toLowerCase();return n==="input"||n==="textarea"||n==="select"}return!1}const hc=Object.freeze({size:1,color:"#ccc",opacity:1,strokeDash:[4,4],strokeCap:"butt"});class IM{#e;#t;#n;#i=[];#s=[];#o={x:[0,0],y:[0,0]};constructor({direction:e,props:n,context:i,layoutParent:r,dataParent:s,getName:o}){this.#e=e,this.#t=n.includePlotMargin??!0;const a={...n};delete a.includePlotMargin,this.#n=this.#c(a,i,r,s,o)}get view(){return this.#n}update(e,n,i,r,s,o){this.#r(e,n,r,s),this.#a(i,o)}render(e,n,i){this.#n.render(e,n,i)}#r(e,n,i,r){if(this.#s.length=0,n<2)return;const s=this.#e==="vertical"?"column":"row",o=r?3:2;for(let a=1;a<n;a++){const c=i(s,a)-o,u=e[c],f=u?u.location:0,h=u?u.size:0;this.#s.push(f+h/2)}}#a(e,n){const i=this.#t?0:n.left,r=this.#t?e.width:e.width-n.right,s=this.#t?0:n.bottom,o=this.#t?e.height:e.height-n.top;this.#i.length=this.#s.length;for(let u=0;u<this.#s.length;u++){const f=this.#s[u],h=this.#i[u]??{};if(this.#e==="vertical")h.x=f,h.x2=f,h.y=s,h.y2=o;else{const A=e.height-f;h.x=i,h.x2=r,h.y=A,h.y2=A}this.#i[u]=h}const a=this.#n.flowHandle?.dataSource;if(!a)return;a.updateDynamicData(this.#i),this.#o.x[1]=e.width,this.#o.y[1]=e.height;const l=this.#n.getScaleResolution("x")?.getScale();l&&l.domain(this.#o.x);const c=this.#n.getScaleResolution("y")?.getScale();c&&c.domain(this.#o.y)}#c(e,n,i,r,s){const o=vM(e),a=this.#e==="horizontal"?s("separatorHorizontal"):s("separatorVertical"),l=new nt(o,n,i,r,a,{blockEncodingInheritance:!0});return cn(l,{skipSubtree:!0}),l}}function BM(t){if(!t)return null;const e=t===!0?{...hc}:{...hc,...t};return e.strokeDash===hc.strokeDash&&(e.strokeDash=hc.strokeDash.slice()),e}function vM(t){return{domainInert:!0,data:{values:[]},resolve:{scale:{x:"excluded",y:"excluded"},axis:{x:"excluded",y:"excluded"}},mark:{...t,type:"rule",clip:t.clip??!1,tooltip:null},encoding:{x:{field:"x",type:"quantitative",scale:{nice:!1,zero:!1}},y:{field:"y",type:"quantitative",scale:{nice:!1,zero:!1}},x2:{field:"x2"},y2:{field:"y2"}}}}class SM extends io{#e=1/0;#t=10;#n=[];#i={};#s=0;#o={};#r=null;constructor(e,n,i,r,s,o,a){super(e,n,i,r,s,a),this.spec=e,this.#t=e.spacing??10,this.#e=o,this.#n=[],this.wrappingFacet=!1;const l=BM(e.separator);if(l)for(const c of QM(e))this.#o[c]=new IM({direction:c,props:l,context:this.context,layoutParent:this,dataParent:this,getName:u=>this.getNextAutoName(u)});this.layoutParent||(this.#r=new EM({context:this.context,viewRoot:this}))}appendChild(e){this.appendChildView(e)}appendChildView(e){return this.insertChildViewAt(e,this.#n.length)}insertChildViewAt(e,n){e.layoutParent??=this;const i=new pM(e,this,this.#s);return this.#s++,this.#n.splice(n,0,i),this.invalidateSizeCache(),i}removeChildView(e){const n=this.#n.findIndex(i=>i.view===e);if(n<0)throw new Error("Not my child view!");this.removeChildAt(n)}removeChildAt(e){const n=this.#n[e];if(!n)throw new Error("Child index out of range!");this.#l(n),this.#n.splice(e,1),this.invalidateSizeCache()}get#a(){return this.#n.filter(e=>e.view.isConfiguredVisible())}get#c(){return new Ww(this.#a.length,this.#e??1/0)}setChildren(e){for(const n of this.#n)this.#l(n);this.#n=[];for(const n of e)this.appendChild(n);this.invalidateSizeCache()}#l(e){e.disposeAxisViews();for(const n of e.getChildren())n.disposeSubtree()}get children(){return this.#n.map(e=>e.view)}get childCount(){return this.#n.length}async createAxes(){await this.syncSharedAxes(),await Promise.all(this.#n.map(e=>e.createAxes()))}async syncSharedAxes(){for(const n of Object.values(this.#i))n.disposeSubtree();this.#i={};const e=[];for(const n of ni){const i=this.resolutions.axis[n];if(!i)continue;const r=i.getAxisProps();if(!r)continue;const s={title:i.getTitle(),orient:Ac[n][0],...r},o=new ty(s,i.scaleResolution.type,this.context,this,this);e.push(o.initializeChildren()),this.#i[n]=o}await Promise.all(e)}*[Symbol.iterator](){for(const e of this.#n)yield*e.getChildren();for(const e of Object.values(this.#o))yield e.view;for(const e of Object.values(this.#i))yield e}#u(e){const n=e=="column"?"width":"height",i=(r,s)=>r.map(o=>{const l=this.#a[o].getOverhangAndPadding();return e=="column"?s?l.right:l.left:s?l.bottom:l.top}).reduce((o,a)=>Math.max(o,a),0);return this._cache(`size/directionSizes/${e}`,()=>this.#c[e=="column"?"colIndices":"rowIndices"].map(r=>({axisBefore:i(r,0),axisAfter:i(r,1),view:W8(r.map(s=>this.#a[s].view.getViewportSize()[n]))})))}#f(e){const n=this.#u(e),i=[];i.push(qs);for(const[r,s]of n.entries())r>0&&i.push({px:this.#t,grow:0}),(r==0||this.wrappingFacet)&&i.push(qs),i.push({px:s.axisBefore,grow:0}),i.push(s.view),i.push({px:s.axisAfter,grow:0}),(r==n.length-1||this.wrappingFacet)&&i.push(qs);return i}#A(e){let n=0,i=0;const r=e=="row"?this.spec.height:this.spec.width;if(r||r===0)return Mm(r);const s=this.#u(e);for(const[o,a]of s.entries())o>0&&(i+=this.#t),(o==0||this.wrappingFacet)&&(i+=0),i+=a.axisBefore,i+=a.view.px??0,n+=a.view.grow??0,i+=a.axisAfter,(o==s.length-1||this.wrappingFacet)&&(i+=0);return{px:i,grow:n}}#h(e,n){return e=="row"&&this.wrappingFacet?1+6*n+2:2+4*n+1}getOverhang(){return this.#d().union(this.#g())}#d(){const e=this.#u("column"),n=this.#u("row");return!e.length||!n.length?qe.zero():new qe(n.at(0).axisBefore,e.at(-1).axisAfter,n.at(-1).axisAfter,e.at(0).axisBefore)}#g(){const e=n=>{const i=eA[n],r=this.#i[i];return r?.axisProps.orient!==n?0:Math.max(r.getPerpendicularSize()+(r.axisProps.offset??0),0)};return new qe(e("top"),e("right"),e("bottom"),e("left"))}getSize(){return this._cache("size",()=>new Tn(this.#A("column"),this.#A("row")).addPadding(this.#g()))}render(e,n,i={}){if(super.render(e,n,i),!this.isConfiguredVisible())return;this.layoutParent||(n=n.shrink(this.getPadding())),n=n.shrink(this.#g()),e.pushView(this,n);const r=e.getDevicePixelRatio(),s={devicePixelRatio:r},o=Rm(this.#f("column"),n.width,s),a=Rm(this.#f("row"),n.height,s),l=new Ww(this.#a.length,this.#e??1/0),c=d=>Math.round(d*r)/r,u=[];for(const[d,g]of this.#a.entries()){const{view:m,axes:p,gridLines:w,background:C,backgroundStroke:y,title:x,selectionRect:I}=g,[b,S]=l.getCellCoords(d),D=o[this.#h("column",b)],v=a[this.#h("row",S)],F=m.getViewportSize(),R=m.getSize(),M=m.getOverhang(),O=D.location-M.left,z=v.location-M.top,_=(U,K)=>(U[K].grow?(K=="width"?D:v).size:U[K].px)+M[K],Y=_(F,"width"),te=_(F,"height"),ae=_(R,"width"),ne=_(R,"height"),_e=g.scrollbars.horizontal,qt=g.scrollbars.vertical,vo=_e?()=>c(_e.viewportOffset):()=>0,Ur=qt?()=>c(qt.viewportOffset):()=>0,An=new ve(()=>n.x+O,()=>n.y+z,()=>Y,()=>te),Ri=m.isScrollable(),So=Ri?new ve(()=>n.x+O-vo(),()=>n.y+z-Ur(),()=>ae,()=>ne):An;g.coords=An;const _r=i.clipRect?An.intersect(i.clipRect):An;u.push({col:b,row:S,view:m,axes:p,gridLines:w,background:C,backgroundStroke:y,title:x,selectionRect:I,viewportCoords:An,viewCoords:So,clippedChildCoords:_r,viewWidth:ae,viewHeight:ne,scrollable:Ri,gridChild:g})}for(const d of u)d.background?.render(e,d.clippedChildCoords,{...i,clipRect:void 0});const f=this.#d(),h=this.#o.vertical;h&&(h.update(o,l.nCols,n,(d,g)=>this.#h(d,g),this.wrappingFacet,f),h.render(e,n,i));const A=this.#o.horizontal;A&&(A.update(a,l.nRows,n,(d,g)=>this.#h(d,g),this.wrappingFacet,f),A.render(e,n,i));for(const d of u){const{view:g,axes:m,gridLines:p,backgroundStroke:w,title:C,selectionRect:y,viewportCoords:x,viewCoords:I,clippedChildCoords:b,viewWidth:S,viewHeight:D,scrollable:v,gridChild:F,col:R,row:M}=d;for(const z of Object.values(p))z.render(e,x,i);const O=DM(g)||v;O&&g.render(e,I,{...i,clipRect:b}),w?.render(e,b,{...i,clipRect:void 0});for(const[z,_]of Object.entries(m)){const Y=z=="left"||z=="right"?"vertical":"horizontal",te=F.scrollbars[Y],ae=te?x.modify(Y=="vertical"?{y:()=>I.y,height:D}:{x:()=>I.x,width:S}):x,ne=gy(ae,z,_);let _e=i.clipRect;te&&(_e=ne.intersect(_e).intersect(te?x.modify(Y=="vertical"?{x:-1e5,width:2e5}:{y:-1e5,height:2e5}):void 0)),_.render(e,ne,{...i,clipRect:_e})}for(const z of Object.values(this.#i)){const Y=z.axisProps.orient;(Y=="left"&&R==0||Y=="right"&&R==l.nCols-1||Y=="top"&&M==0||Y=="bottom"&&M==l.nRows-1)&&z.render(e,gy(x.shrink(F.view.getOverhang()),Y,z),i)}O||g.render(e,I,i),y?.render(e,I,i);for(const z of Object.values(F.scrollbars))z.updateScrollbar(x,I),z.render(e,n,i);C?.render(e,x,i)}e.popView(this)}propagateInteractionEvent(e){if(this.handleInteractionEvent(void 0,e,!0),e.stopped)return;const n=this.#a.find(r=>r.coords.containsPoint(e.point.x,e.point.y));this.#r?.handlePointerEvent(n,e);for(const r of Object.values(n?.scrollbars??{}))if(r.coords.containsPoint(e.point.x,e.point.y)&&(r.propagateInteractionEvent(e),e.stopped))return;const i=n?.view;if(i){if(i.propagateInteractionEvent(e),e.stopped)return;(i instanceof nt||i instanceof Ci)&&nM(e,n.coords,r=>this.#p(n.coords,n.view,r),this.context.getCurrentHover(),this.context.animator)}e.stopped||this.handleInteractionEvent(void 0,e,!1)}#p(e,n,i){for(const[r,s]of Object.entries(dy(n))){if(s.size<=0)continue;const o=e.normalizePoint(i.x,i.y),a=e.normalizePoint(i.x+i.xDelta,i.y+i.yDelta),l={x:a.x-o.x,y:a.y-o.y};for(const c of s)c.zoom(2**i.zDelta,r=="y"?1-o[r]:o[r],r=="x"?l.x:-l.y)}this.context.animator.requestRender()}getDefaultResolution(e,n){return"independent"}}function DM(t){let e=!0;return t.visit(n=>{n instanceof nt&&(e&&=n.mark.properties.clip===!0)}),e}function QM(t){return"vconcat"in t?["horizontal"]:"hconcat"in t?["vertical"]:["horizontal","vertical"]}function gy(t,e,n){const i=n.axisProps,r=n.getPerpendicularSize();if(e=="bottom")return t.translate(0,t.height+i.offset).modify({height:r});if(e=="top")return t.translate(0,-r-i.offset).modify({height:r});if(e=="left")return t.translate(-r-i.offset,0).modify({width:r});if(e=="right")return t.translate(t.width+i.offset,0).modify({width:r})}class iA extends SM{constructor(e,n,i,r,s){super(e,n,i,r,s,fc(e)?e.columns:ro(e)?1:1/0),this.spec=e}async initializeChildren(){const e=this.spec,n=fc(e)?e.concat:ro(e)?e.vconcat:e.hconcat;this.setChildren(await Promise.all(n.map(i=>this.context.createOrImportView(i,this,this,this.getNextAutoName("grid"))))),await this.createAxes()}async addChildSpec(e,n){return this.#t().addChildSpec(e,n)}async removeChildAt(e){await this.#t().removeChildAt(e)}getDefaultResolution(e,n){return n=="axis"?"independent":ro(this.spec)&&e==="x"||jw(this.spec)&&e==="y"?"shared":"independent"}#e(){const e=this.spec;let n;return fc(e)?n=e.concat:ro(e)?n=e.vconcat:n=e.hconcat,{specs:n,insertAt:(i,r)=>{n.splice(i,0,r)},removeAt:i=>{n.splice(i,1)}}}#t(){return new Yw(this,{getChildSpecs:this.#e.bind(this),insertView:(e,n)=>this.insertChildViewAt(e,n),removeView:e=>super.removeChildAt(e),prepareView:async(e,n,i)=>{await i.createAxes(),await this.syncSharedAxes()},afterRemove:async()=>{await this.syncSharedAxes()},defaultName:()=>this.getNextAutoName("grid")})}}const py="viewRoot";class kM{#e=new Map;constructor(e={}){this.options={allowImport:!0,wrapRoot:!0,...e};const n=i=>(r,s,o,a,l)=>new i(r,s,o,a,l);this.addViewType(Wf,n(Ci)),this.addViewType(Kf,((i,r,s,o,a)=>new Ci(PN(i),r,s,o,a))),this.addViewType(jf,n(nt)),this.addViewType(ro,n(iA)),this.addViewType(jw,n(iA)),this.addViewType(fc,n(iA))}addViewType(e,n){this.#e.set(e,n)}createView(e,n,i,r,s){for(const[o,a]of this.#e)if(o(e))return a(e,n,i,r,s);throw RM(e)?new Error("SampleView is not supported by the @genome-spy/core package. Use @genome-spy/app instead!"):new Error("Invalid spec, cannot figure out the view type from the properties: "+JSON.stringify([...Object.keys(e)]))}isViewSpec(e){const n=[...this.#e.keys()].filter(i=>i(e));if(n.length>1)throw new Error("Ambiguous spec. Cannot create a view!");return n.length==1}async createOrImportView(e,n,i,r,s,o){let a;const l=Kw(e)?e.name??null:void 0;if(Kw(e)){let h;if("url"in e.import)if(this.options.allowImport)h=await QF(e,r.getBaseUrl(),n);else throw new He("Importing views is not allowed!",i);else if("template"in e.import)h=my(e.import.template,r);else throw new Error("Invalid import: "+JSON.stringify(e));o?.(h),FM(h,e),a=h}else a=e;const c=h=>h?.params?.some(A=>Jl(A)&&aa(A.select).type=="interval");let u=!1;!r&&this.options.wrapRoot&&(jf(a)||Wf(a)||Kf(a)||c(a))&&s===py&&(a={name:"implicitRoot",vconcat:[a]},u=!0);const f=this.createView(a,n,i,r,s);return l!==void 0&&UN(f,l),u&&cn(f),f instanceof io&&await f.initializeChildren(),f.registerStepSizeInvalidation(),f}}function my(t,e){const n=e.spec?.templates?.[t];if(n)return structuredClone(n);if(e.dataParent)return my(t,e.dataParent);throw new Error(`Cannot find template "${t}" in current view or its ancestors!`)}function FM(t,e){e.name!=null&&(t.name=e.name),e.visible!=null&&(t.visible=e.visible);const n=Ee(e.params)?e.params:Ge(e.params)?Object.entries(e.params).map(([i,r])=>({name:i,value:r})):[];if(n.length){t.params??=[];for(const i of n){const r=t.params.findIndex(s=>s.name==i.name);r>=0&&(t.params[r]=i)}for(const i of n)t.params.some(r=>r.name==i.name)||t.params.push(i)}}function RM(t){return"samples"in t&&Ge(t.samples)&&"spec"in t&&Ge(t.spec)}class NM{#e;constructor(e,n){this.point=e,this.uiEvent=n,this.stopped=!1,this.target=void 0}stopPropagation(){this.stopped=!0}get type(){return this.uiEvent.type}get proxiedMouseEvent(){return this.#e||(this.#e=MM(this.mouseEvent)),this.#e}get mouseEvent(){if(this.uiEvent instanceof MouseEvent)return this.uiEvent;throw new Error("Not a MouseEvent!")}}function MM(t){const e=i=>i===null||typeof i!="object"&&typeof i!="function",n={get(i,r,s){const o=Reflect.get(i,r,i);if(!e(o))throw new Error(`Access to non-primitive property "${String(r)}" is not allowed.`);return o},getPrototypeOf(){return null},ownKeys(i){return Reflect.ownKeys(i).filter(s=>e(i[s])).map(s=>typeof s=="symbol"?s:String(s))},getOwnPropertyDescriptor(i,r){const s=Reflect.getOwnPropertyDescriptor(i,r);if(s&&!("get"in s||"set"in s)&&e(s.value))return{value:s.value,writable:!!s.writable,enumerable:!!s.enumerable,configurable:!!s.configurable}},has(i,r){return r in i?e(i[r]):!1}};return new Proxy(t,n)}class TM{constructor(e,n){this.animator=e,this.disabled=!!n,this.maxDistance=500,this.callback=null,this.targetValue=0,this.lastValue=0,this.smoother=Jf(e,i=>{const r=i.x-this.lastValue;this.lastValue=i.x,this.callback?.(r)},40,.1,{x:0})}cancel(){this.lastValue!==this.targetValue&&(this.targetValue=xh([this.lastValue,this.targetValue],.3),this.smoother({x:this.targetValue}))}setMomentum(e,n){if(this.disabled){n(e);return}this.callback=n;const i=tr(this.targetValue+e-this.lastValue,-this.maxDistance,this.maxDistance);this.targetValue=this.lastValue+i,this.smoother({x:this.targetValue})}}function PM(t){const e={},n=["string","number","boolean"],i=["wheelDelta","wheelDeltaX","wheelDeltaY"];for(const r in t){const s=r;!i.includes(r)&&n.includes(typeof t[s])&&(e[s]=t[s])}return e}class LM{#e;#t;#n;#i;#s;#o;#r;#a;#c;#l;#u;#f;constructor({viewRoot:e,glHelper:n,tooltip:i,animator:r,emitEvent:s,tooltipHandlers:o,renderPickingFramebuffer:a,getDevicePixelRatio:l}){this.#e=e,this.#t=n,this.#n=i,this.#i=r,this.#s=s,this.#o=o,this.#r=a,this.#a=l,this.#c=void 0,this.#l=new TM(this.#i),this.#u=void 0,this.#f=!1}getCurrentHover(){return this.#c}registerMouseEvents(){const e=this.#t.canvas;let n=performance.now(),i=!1;const r=s=>{const o=performance.now(),a=o-n<200;if(s instanceof MouseEvent){const l=e.getBoundingClientRect(),c=new lt(s.clientX-l.left-e.clientLeft,s.clientY-l.top-e.clientTop);s.type=="mousemove"&&!a&&(this.#n.handleMouseMove(s),this.#f=!1,s.buttons==0&&!oy()&&(this.#r(),this.#A(c.x,c.y)));const u=f=>{this.#e.propagateInteractionEvent(new NM(c,f)),this.#f||this.#n.clear()};if(s.type!="wheel"&&this.#l.cancel(),(s.type=="mousedown"||s.type=="mouseup")&&!oy())this.#r();else if(s.type=="wheel"){n=o,this.#f=!1;const f=s;if(Math.abs(f.deltaX)>Math.abs(f.deltaY))this.#c=null,this.#l.cancel();else{const h=PM(f);this.#l.setMomentum(f.deltaY*(f.deltaMode?80:1),A=>{const d=new WheelEvent("wheel",{...h,deltaMode:0,deltaX:0,deltaY:A});u(d)}),f.preventDefault();return}}if(s.type=="click"){if(i)return;const f=this.#c?{type:s.type,viewPath:this.#c.mark.unitView.getLayoutAncestors().map(h=>h.name).reverse(),datum:this.#c.datum}:{type:s.type,viewPath:null,datum:null};this.#s("click",f)}(s.type!="click"||this.#u?.subtract(lt.fromMouseEvent(s)).length<3)&&u(s)}};["mousedown","mouseup","wheel","click","mousemove","gesturechange","contextmenu","dblclick"].forEach(s=>e.addEventListener(s,r)),e.addEventListener("mousedown",s=>{this.#u=lt.fromMouseEvent(s),this.#n.sticky?(this.#n.sticky=!1,this.#n.clear(),i=!0):i=!1;const o=()=>{document.addEventListener("mouseup",()=>this.#n.popEnabledState(),{once:!0}),this.#n.pushEnabledState(!1)};if(s.button==2||s.shiftKey||s.ctrlKey||s.metaKey)o();else if(this.#n.visible){const a=setTimeout(()=>{i=!0,this.#n.sticky=!0},400),l=()=>clearTimeout(a);document.addEventListener("mouseup",l,{once:!0}),document.addEventListener("mousemove",l,{once:!0})}}),e.addEventListener("dragstart",s=>s.stopPropagation()),e.addEventListener("mouseout",()=>{this.#n.clear(),this.#c=null})}#A(e,n){const i=this.#a(),r=O3(this.#t.gl,this.#t._pickingBufferInfo,e*i,n*i),s=r[0]|r[1]<<8|r[2]<<16|r[3]<<24;if(s==0){this.#c=null;return}if(s!==this.#c?.uniqueId&&(this.#c=null),this.#c||this.#e.visit(o=>{if(o instanceof nt){if(o.mark.isPickingParticipant()&&[...o.facetCoords.values()].some(a=>a.containsPoint(e,n))){const a=o.getCollector().findDatumByUniqueId(s);a&&(this.#c={mark:o.mark,datum:a,uniqueId:s})}if(this.#c)return Ar}}),this.#c){const o=this.#c.mark;this.updateTooltip(this.#c.datum,async a=>{if(!o.isPickingParticipant())return;const l=o.properties.tooltip;if(l!==null){const c=l?.handler??"default",u=this.#o[c];if(!u)throw new Error("No such tooltip handler: "+c);const f=Tw(a,o,l?.params);return u(a,o,l?.params,f)}})}}updateTooltip(e,n){if(!this.#f||!e)this.#n.updateWithDatum(e,n),this.#f=!0;else throw new Error("Tooltip has already been updated! Duplicate event handler?")}}class wy{constructor(e){this.globalOptions=e}pushView(e,n){}popView(e){}renderMark(e,n){}getDevicePixelRatio(){return 1}}class rA extends wy{#e=[0,0,0,0];#t;#n=[];#i;#s;#o=new Set;#r=void 0;#a=1;#c={width:0,height:0};constructor(e,n){if(super(e),this.#s=n.webGLHelper,this.#i=n.framebufferInfo,this.#a=n.devicePixelRatio,this.#c=n.canvasSize,n.clearColor){const i=Fn(n.clearColor).rgb();this.#e=[i.r/255,i.g/255,i.b/255,i.opacity]}}getDevicePixelRatio(){return this.#a}pushView(e,n){this.#o.add(e),this.#r=n}renderMark(e,n){if(this.globalOptions.picking&&!e.isPickingParticipant())return;const i=e.render(n);i&&this.#n.push({mark:e,callback:i,coords:this.#r,clipRect:n.clipRect})}render(){if(this.#t||this.#l(),this.#t.length==0)return;const e=this.#s.gl,n=this.#i;n?(e.bindFramebuffer(e.FRAMEBUFFER,n.framebuffer),e.viewport(0,0,n.width,n.height)):e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.disable(e.SCISSOR_TEST),e.clearColor(...this.#e),e.clear(e.COLOR_BUFFER_BIT);for(const i of this.#o)i.onBeforeRender();for(const i of this.#t)i();this.#i&&e.bindFramebuffer(e.FRAMEBUFFER,null)}#l(){this.#t=[];let e=!0,n=!0;const i=o=>()=>{e&&o()},r=o=>()=>{e&&n&&o()},s=Uo(this.#n.reverse(),o=>o.mark);for(const[o,a]of[...s.entries()].reverse()){if(!o.isReady())continue;this.#t.push(()=>{e=o.unitView.getEffectiveOpacity()>0}),this.#t.push(...o.prepareRender(this.globalOptions).map(c=>i(c)));let l;for(const c of a){const u=c.coords;u.equals(l)||this.#t.push(i(()=>{n=o.setViewport(this.#c,this.#a,u,c.clipRect)})),this.#t.push(r(c.callback)),l=c.coords}}}}class OM extends wy{constructor(...e){super({}),this.contexts=e}pushView(e,n){for(const i of this.contexts)i.pushView(e,n)}popView(e){for(const n of this.contexts)n.popView(e)}renderMark(e,n){for(const i of this.contexts)i.renderMark(e,n)}}class UM{#e;#t;#n;#i;#s;#o;#r;#a;constructor({viewRoot:e,glHelper:n,getBackground:i,broadcast:r,onLayoutComputed:s}){this.#e=e,this.#t=n,this.#n=i,this.#i=r,this.#s=s,this.#o=void 0,this.#r=void 0,this.#a=!1}computeLayout(){const e=this.#e;if(!e)return;this.#i("layout");const n=this.#t.getLogicalCanvasSize();if(isNaN(n.width)||isNaN(n.height)){console.log(`NaN in canvas size: ${n.width}x${n.height}. Skipping computeLayout().`);return}const i={webGLHelper:this.#t,canvasSize:n,devicePixelRatio:window.devicePixelRatio??1};this.#o=new rA({picking:!1},{...i,clearColor:this.#n()}),this.#r=new rA({picking:!0},{...i,framebufferInfo:this.#t._pickingBufferInfo}),e.render(new OM(this.#o,this.#r),ve.create(0,0,n.width,n.height)),this.#s(),this.#i("layoutComputed")}renderAll(){this.#o?.render(),this.#a=!0}renderPickingFramebuffer(){this.#a&&(this.#r.render(),this.#a=!1)}}function _M(t){const e=o=>{throw new Error("ViewContext."+o+" is not configured.")},n={dataFlow:t.dataFlow??e("dataFlow"),glHelper:t.glHelper??e("glHelper"),animator:t.animator??e("animator"),genomeStore:t.genomeStore,fontManager:t.fontManager??e("fontManager"),createOrImportView:async function(o,a,l,c,u){const f=t.createOrImportViewWithContext;return f?f(n,o,a,l,c,u):Promise.reject(new Error("ViewContext.createOrImportView is not configured."))}},i=["requestLayoutReflow","updateTooltip","getNamedDataFromProvider","getCurrentHover","addKeyboardListener","addBroadcastListener","removeBroadcastListener","highlightView","isViewConfiguredVisible","isViewSpec"],r=t,s=n;for(const o of i)s[o]=r[o]??(()=>e(o));return n}function GM({glHelper:t,viewRoot:e,logicalWidth:n,logicalHeight:i,devicePixelRatio:r,clearColor:s="white"}){n??=t.getLogicalCanvasSize().width,i??=t.getLogicalCanvasSize().height,r??=window.devicePixelRatio??1;const o=t.gl,a=Math.floor(n*r),l=Math.floor(i*r),c=Eg(o,[{format:o.RGBA,type:o.UNSIGNED_BYTE,minMag:o.LINEAR,wrap:o.CLAMP_TO_EDGE}],a,l),u=new rA({picking:!1},{webGLHelper:t,canvasSize:{width:n,height:i},devicePixelRatio:r,clearColor:s,framebufferInfo:c});return e.render(u,ve.create(0,0,n,i)),u.render(),U3(o,c,"image/png")}async function zM(){const{parquetReadObjects:t}=await Promise.resolve().then(()=>e9);return t}async function yy(t){const e=await zM(),n=t instanceof Uint8Array?t.buffer:t;return await e({file:n})}yy.responseType="arrayBuffer",ta("fasta",pN),ta("parquet",yy);class HM{#e=[];#t;#n;#i;#s;#o;#r;#a=new zB;#c=new Ud;#l=new Ud;constructor(e,n,i={}){this.container=e,this.options=i,i.inputBindingContainer??="default",this.spec=n,this.viewFactory=new kM,this.namedDataProviders=[],this.animator=new lN(()=>this.renderAll()),this.genomeStore=void 0,this.viewVisibilityPredicate=r=>r.isVisibleInSpec(),this.tooltipHandlers={default:MN,refseqgene:wN,...i.tooltipHandlers??{}},this.viewRoot=void 0,this.#s=new sv(e,i),this.dpr=window.devicePixelRatio}get#u(){return this.container.querySelector(".canvas-wrapper")}#f(){this.#s.initialize(this.viewRoot)}registerNamedDataProvider(e){this.namedDataProviders.unshift(e)}getNamedDataFromProvider(e){for(const n of this.namedDataProviders){const i=n(e);if(i)return i}}updateNamedData(e,n){const i=this.viewRoot.context.dataFlow.findNamedDataSource(e);if(!i)throw new Error("No such named data source: "+e);i.dataSource.updateDynamicData(n),this.animator.requestRender()}addEventListener(e,n){this.#c.add(e,n)}removeEventListener(e,n){this.#c.remove(e,n)}broadcast(e,n){const i={type:e,payload:n};this.viewRoot.visit(r=>r.handleBroadcast(i)),this.#l.emit(e,i)}#A(){const e=this.viewRoot.paramRuntime.allocateSetter("devicePixelRatio",this.dpr),n=()=>{this.#r.invalidateSize(),this.dpr=window.devicePixelRatio,e(this.dpr),this.computeLayout(),this.renderAll()};if(this.viewRoot.getSize().isGrowing()){const s=new ResizeObserver(n);s.observe(this.container),this.#e.push(()=>s.disconnect())}let i=null;const r=()=>{i!=null&&(i(),n());const s=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);s.addEventListener("change",r),i=()=>{s.removeEventListener("change",r)}};r(),i&&this.#e.push(i)}#h(){const{canvasWrapper:e,loadingIndicatorsElement:n,tooltip:i}=LB(this.container);this.#r=new T3(e,()=>this.viewRoot?kF(this.viewRoot):{width:void 0,height:void 0},{powerPreference:this.options.powerPreference??"default"}),e.appendChild(n),this.tooltip=i,this.#i=new Od,this.#n=new _B(n,this.#i)}destroy(){const e=this.#u;for(this.container.classList.remove("genome-spy"),e.classList.remove("loading"),this.#a.removeAll(),this.#e.forEach(n=>n()),this.#r.finalize(),this.#s.remove(),this.#n.destroy();this.container.firstChild;)this.container.firstChild.remove()}async#d(){await this.#g();const e=this.#p();await this.#y(e),await rN(this.viewRoot,e.dataFlow,e.fontManager,n=>this.broadcast("dataFlowBuilt",n)),this.#C(e)}async#g(){this.spec.genome&&(this.genomeStore=new uN(this.spec.baseUrl),await this.genomeStore.initialize(this.spec.genome))}#p(){const e=new Iw;return e.loadingStatusRegistry=this.#i,_M({dataFlow:e,glHelper:this.#r,animator:this.animator,genomeStore:this.genomeStore,fontManager:new hN(this.#r),updateTooltip:this.updateTooltip.bind(this),getNamedDataFromProvider:this.getNamedDataFromProvider.bind(this),getCurrentHover:()=>this.#o.getCurrentHover(),addKeyboardListener:(n,i)=>{this.#a.add(n,r=>{this.#w(n,r)&&i(r)})},addBroadcastListener:(n,i)=>this.#l.add(n,i),removeBroadcastListener:(n,i)=>this.#l.remove(n,i),isViewConfiguredVisible:this.viewVisibilityPredicate,isViewSpec:n=>this.viewFactory.isViewSpec(n),createOrImportViewWithContext:(n,i,r,s,o,a)=>this.viewFactory.createOrImportView(i,n,r,s,o,a),highlightView:GB(this.container)})}#w(e,n){if(e==="keyup")return!0;const i=document.activeElement;return i&&i!==document.body?this.container.contains(i):this.container.matches(":hover")}async#y(e){const n=this.spec;n.datasets&&this.registerNamedDataProvider(i=>n.datasets[i]),this.viewRoot=await e.createOrImportView(n,null,null,py),this.#i.set(this.viewRoot,"loading"),this.#u.style.flexGrow=this.viewRoot.getSize().height.grow>0?"1":"0",this.#f(),TN(this.viewRoot),Hw(this.viewRoot),this.#m(),this.#r.invalidateSize(),this.#t=new UM({viewRoot:this.viewRoot,glHelper:this.#r,getBackground:()=>this.spec.background,broadcast:this.broadcast.bind(this),onLayoutComputed:()=>this.#n.updateLayout()}),e.requestLayoutReflow=this.computeLayout.bind(this),this.#A()}#m(){const e=_N(this.viewRoot);if(e.length)for(const n of e)console.warn("Selector constraints warning:",n.message)}#C(e){e.requestLayoutReflow=this.computeLayout.bind(this),this.viewRoot.visit(n=>Gs(n,"size")),this.#r.invalidateSize(),this.#o=new LM({viewRoot:this.viewRoot,glHelper:this.#r,tooltip:this.tooltip,animator:this.animator,emitEvent:this.#c.emit.bind(this.#c),tooltipHandlers:this.tooltipHandlers,renderPickingFramebuffer:this.renderPickingFramebuffer.bind(this),getDevicePixelRatio:()=>this.dpr})}async launch(){let e=!1;try{return this.#h(),await this.#d(),this.registerMouseEvents(),this.computeLayout(),this.animator.requestRender(),e=!0,!0}catch(n){const i=`${n.view?`At "${n.view.getPathString()}": `:""}${n.toString()}`;return console.error(n.stack),this.options.onError?.(n,this.container)||OB(this.container,i),this.viewRoot&&this.#i.set(this.viewRoot,"error",i),!1}finally{this.#u.classList.remove("loading"),e&&this.viewRoot&&this.#i.set(this.viewRoot,"complete")}}async initializeVisibleViewData(){this.viewRoot&&(await sN(this.viewRoot,this.viewRoot.context.dataFlow,this.viewRoot.context.fontManager),this.viewRoot._invalidateCacheByPrefix("size","progeny"),this.#r.invalidateSize(),this.computeLayout(),this.animator.requestRender())}registerMouseEvents(){this.#o.registerMouseEvents()}updateTooltip(e,n){this.#o.updateTooltip(e,n)}exportCanvas(e,n,i,r="white"){const s=GM({glHelper:this.#r,viewRoot:this.viewRoot,logicalWidth:e,logicalHeight:n,devicePixelRatio:i,clearColor:r});return this.computeLayout(),this.renderAll(),s}getLogicalCanvasSize(){return this.#r.getLogicalCanvasSize()}computeLayout(){this.#t.computeLayout()}renderAll(){this.#t.renderAll()}renderPickingFramebuffer(){this.#t.renderPickingFramebuffer()}getSearchableViews(){const e=[];return this.viewRoot.visit(n=>{n instanceof nt&&n.getSearchAccessors().length>0&&e.push(n)}),e}getNamedScaleResolutions(){const e=new Map;return this.viewRoot.visit(n=>{for(const i of Object.values(n.resolutions.scale))i.name&&e.set(i.name,i)}),e}}async function YM(t,e,n={}){let i;if(le(t)){if(i=document.querySelector(t),!i)throw new Error(`No such element: ${t}`)}else if(t instanceof HTMLElement)i=t;else throw new Error(`Invalid element: ${t}`);let r;try{const s=Ge(e)?e:await JM(e);if(s.baseUrl??="",s.width??="container",s.padding??=10,i==document.body){const o=document.createElement("div");o.style.position="fixed",o.style.inset="0",o.style.overflow="hidden",i.appendChild(o),i=o}r=new HM(i,s,n),VM(r,n),await r.launch()}catch(s){i.innerText=s.toString(),console.error(s)}return{finalize(){for(r.destroy();i.firstChild;)i.firstChild.remove()},addEventListener(s,o){r.addEventListener(s,o)},removeEventListener(s,o){r.removeEventListener(s,o)},getScaleResolutionByName(s){return r.getNamedScaleResolutions().get(s)},updateNamedData:r.updateNamedData.bind(r),exportCanvas:r.exportCanvas.bind(r)}}function VM(t,e){e.namedDataProvider&&t.registerNamedDataProvider(e.namedDataProvider)}async function JM(t){let e;try{e=await lw(t)}catch(n){throw new Error(`Could not load or parse configuration: ${t}, reason: ${n.message}`)}if(!e.baseUrl){const n=t.match(/^[^?#]*\//);e.baseUrl=n&&n[0]||"./"}return e}const qM=t=>t.strings===void 0;const oo=(t,e)=>{const n=t._$AN;if(n===void 0)return!1;for(const i of n)i._$AO?.(e,!1),oo(i,e);return!0},dc=t=>{let e,n;do{if((e=t._$AM)===void 0)break;n=e._$AN,n.delete(t),t=e}while(n?.size===0)},Cy=t=>{for(let e;e=t._$AM;t=e){let n=e._$AN;if(n===void 0)e._$AN=n=new Set;else if(n.has(t))break;n.add(t),WM(e)}};function KM(t){this._$AN!==void 0?(dc(this),this._$AM=t,Cy(this)):this._$AM=t}function jM(t,e=!1,n=0){const i=this._$AH,r=this._$AN;if(r!==void 0&&r.size!==0)if(e)if(Array.isArray(i))for(let s=n;s<i.length;s++)oo(i[s],!1),dc(i[s]);else i!=null&&(oo(i,!1),dc(i));else oo(this,t)}const WM=t=>{t.type==Nd.CHILD&&(t._$AP??=jM,t._$AQ??=KM)};class XM extends Td{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,n,i){super._$AT(e,n,i),Cy(this),this.isConnected=e._$AU}_$AO(e,n=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),n&&(oo(this,e),dc(this))}setValue(e){if(qM(this._$Ct))this._$Ct._$AI(e,this);else{const n=[...this._$Ct._$AH];n[this._$Ci]=e,this._$Ct._$AI(n,this,0)}}disconnected(){}reconnected(){}}const ZM=()=>new $M;class $M{}const sA=new WeakMap,eT=Md(class extends XM{render(t){return de}update(t,[e]){const n=e!==this.G;return n&&this.G!==void 0&&this.rt(void 0),(n||this.lt!==this.ct)&&(this.G=e,this.ht=t.options?.host,this.rt(this.ct=t.element)),de}rt(t){if(this.isConnected||(t=void 0),typeof this.G=="function"){const e=this.ht??globalThis;let n=sA.get(e);n===void 0&&(n=new WeakMap,sA.set(e,n)),n.get(this.G)!==void 0&&this.G.call(this.ht,void 0),n.set(this.G,t),t!==void 0&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){return typeof this.G=="function"?sA.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});function Ey(){const t=document.querySelector("meta[name='base_url']").getAttribute("content");return t||console.error('No <meta name="base_url" ...> found!'),t}async function tT(t,e){const i=`${Ey()}/data/`;try{e.baseUrl=e.baseUrl||i,await YM(t,e,{bare:!0})}catch(r){const s=document.createElement("pre");s.innerText=r.toString(),t.appendChild(s)}}class by extends Xr{static get styles(){return jb`
            .show-spec {
                font-size: 70%;
                text-align: center;
            }

            .show-spec a {
                color: #3f51b5;
                text-decoration: none;
            }
        `}static get properties(){return{height:{type:String},specHidden:{type:Boolean}}}constructor(){super(),this.height=300,this.specHidden=!1,this.embedRef=ZM()}render(){return oe`
            <link rel="stylesheet" href=${Ey()+"/app/style.css"} />
            <div
                class="embed-container"
                style=${ia({height:this.height+"px"})}
                ${eT(this.embedRef)}
            ></div>
            ${this.specHidden?oe`
                      <div class="show-spec">
                          <a
                              href="#"
                              @click=${e=>{this.specHidden=!1,e.preventDefault()}}
                              >Show specification</a
                          >
                      </div>
                  `:de}

            <div
                class="embed-spec"
                style=${ia({display:this.specHidden?"none":"block"})}
            >
                <slot></slot>
            </div>
        `}firstUpdated(){const e=this.shadowRoot.querySelector("slot").assignedNodes().filter(n=>n instanceof HTMLElement)[0]?.textContent;if(e){const n=new IntersectionObserver(i=>{i.forEach(r=>{if(r.isIntersecting){const s=r.target;tT(s,JSON.parse(e)),n.unobserve(s)}})});setTimeout(()=>n.observe(this.embedRef.value),80)}}}customElements.define("genome-spy-doc-embed",by);class nT{constructor(e){this.blob=e}async read(e,n=0){if(!e)return new Uint8Array(0);const i=n,r=i+e,s=this.blob.slice(i,r);return s.bytes?s.bytes():new Uint8Array(await s.arrayBuffer())}async readFile(e){const n=typeof e=="string"?e:e?.encoding;if(n==="utf8")return this.blob.text();if(n)throw new Error(`unsupported encoding: ${n}`);return this.blob.bytes?this.blob.bytes():new Uint8Array(await this.blob.arrayBuffer())}async stat(){return{size:this.blob.size}}async close(){}}function iT(t){return(typeof t=="object"&&t!==null&&"message"in t?t.message:`${t}`).replace(/\.$/,"")}class Ht{constructor(e,n={}){this.baseOverrides={},this.url=e;const i=n.fetch||globalThis.fetch.bind(globalThis);n.overrides&&(this.baseOverrides=n.overrides),this.fetchImplementation=i}async fetch(e,n){const i=s=>new Error(`${iT(s)} fetching ${e}`,{cause:s});let r;try{r=await this.fetchImplementation(e,n)}catch(s){if(`${s}`.includes("Failed to fetch")){console.warn(`generic-filehandle: refetching ${e} to attempt to work around chrome CORS header caching bug`);try{r=await this.fetchImplementation(e,{...n,cache:"reload"})}catch(o){throw i(o)}}else throw i(s)}return r}async read(e,n,i={}){if(e===0)return new Uint8Array(0);const{headers:r={},signal:s,overrides:o={}}=i;e<1/0?r.range=`bytes=${n}-${n+e-1}`:e===1/0&&n!==0&&(r.range=`bytes=${n}-`);const a=await this.fetch(this.url,{...this.baseOverrides,...o,headers:{...this.baseOverrides.headers,...o.headers,...r},method:"GET",redirect:"follow",mode:"cors",signal:s});if(!a.ok)throw new Error(`HTTP ${a.status} fetching ${this.url}`);if(a.status===200&&n===0||a.status===206){const l=a.headers.get("content-range"),c=/\/(\d+)$/.exec(l||"");c?.[1]&&(this._stat={size:parseInt(c[1],10)});const u=a.bytes?await a.bytes():new Uint8Array(await a.arrayBuffer());return u.byteLength<=e?u:u.subarray(0,e)}throw new Error(a.status===200?`${this.url} fetch returned status 200, expected 206`:`HTTP ${a.status} fetching ${this.url}`)}async readFile(e={}){let n,i;if(typeof e=="string")n=e,i={};else{n=e.encoding;const{encoding:l,...c}=e;i=c}const{headers:r={},signal:s,overrides:o={}}=i,a=await this.fetch(this.url,{...this.baseOverrides,...o,headers:{...this.baseOverrides.headers,...o.headers,...r},method:"GET",redirect:"follow",mode:"cors",signal:s});if(!a.ok)throw new Error(`HTTP ${a.status} fetching ${this.url}`);if(n==="utf8")return a.text();if(n)throw new Error(`unsupported encoding: ${n}`);return a.bytes?a.bytes():new Uint8Array(await a.arrayBuffer())}async stat(){if(!this._stat&&(await this.read(10,0),!this._stat))throw new Error(`unable to determine size of file at ${this.url}`);return this._stat}async close(){}}class We{readFile(){throw new Error("unimplemented")}read(){throw new Error("unimplemented")}close(){throw new Error("unimplemented")}}const ao=Object.freeze(Object.defineProperty({__proto__:null,BlobFile:nT,LocalFile:We,RemoteFile:Ht},Symbol.toStringTag,{value:"Module"})),xy=65536,rT=xy*xy;function oA(t,e=0){const n=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24;return((t[e+4]|t[e+5]<<8|t[e+6]<<16|t[e+7]<<24)>>>0)*rT+(n>>>0)}const gc=1;function Iy(t,e,n){const i=e[gc],r=n?n[gc]:1/0;return i<=t&&r>t?0:i<t?-1:1}class sT{filehandle;index;constructor({filehandle:e}){this.filehandle=e}_getIndex(){return this.index||(this.index=this._readIndex().catch(e=>{throw this.index=void 0,e})),this.index}async _readIndex(){const e=await this.filehandle.read(8,0),n=oA(e);if(!n)return[[0,0]];const i=new Array(n+1);i[0]=[0,0];const r=16*n;if(r>Number.MAX_SAFE_INTEGER)throw new TypeError("integer overflow");const s=await this.filehandle.read(r,8);for(let o=0;o<n;o+=1){const a=oA(s,o*16),l=oA(s,o*16+8);i[o+1]=[a,l]}return i}async getLastBlock(){return(await this._getIndex()).at(-1)}async getRelevantBlocksForRead(e,n){const i=n+e;if(e===0)return[];const r=await this._getIndex(),s=[];let o=0,a=r.length-1,l=Math.floor(r.length/2),c=Iy(n,r[l],r[l+1]);for(;c!==0;)c>0?a=l-1:c<0&&(o=l+1),l=Math.ceil((a-o)/2)+o,c=Iy(n,r[l],r[l+1]);s.push(r[l]);let u=l+1;for(;u<r.length&&(s.push(r[u]),!(r[u][gc]>=i));u+=1);return s[s.length-1][gc]<i&&s.push([]),s}}var By=0,aA=2,pc=4,Ei=0,mc=1,oT=2,aT=-5;function cT(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function lT(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(var i in n)cT(n,i)&&(t[i]=n[i])}}return t}function vy(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)}var co={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray){t.set(e.subarray(n,n+i),r);return}for(var s=0;s<i;s++)t[r+s]=e[n+s]},flattenChunks:function(t){var e,n,i,r,s,o;for(i=0,e=0,n=t.length;e<n;e++)i+=t[e].length;for(o=new Uint8Array(i),r=0,e=0,n=t.length;e<n;e++)s=t[e],o.set(s,r),r+=s.length;return o},Buf8:function(t){return new Uint8Array(t)},Buf16:function(t){return new Uint16Array(t)},Buf32:function(t){return new Int32Array(t)}},lo={arraySet:function(t,e,n,i,r){for(var s=0;s<i;s++)t[r+s]=e[n+s]},flattenChunks:function(t){return[].concat.apply([],t)},Buf8:function(t){return new Array(t)},Buf16:function(t){return new Array(t)},Buf32:function(t){return new Array(t)}};let dr=()=>{const t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";return dr=()=>t,t},Un=(t,e,n,i,r)=>(Un=dr()?co.arraySet:lo.arraySet,Un(t,e,n,i,r)),cA=t=>(cA=dr()?co.flattenChunks:lo.flattenChunks,cA(t)),gr=t=>(gr=dr()?co.Buf8:lo.Buf8,gr(t)),pr=t=>(pr=dr()?co.Buf16:lo.Buf16,pr(t)),mr=t=>(mr=dr()?co.Buf32:lo.Buf32,mr(t)),Sy=function(){let t=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}return Sy=()=>t,t},Dy=function(){let t=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{t=!1}return Dy=()=>t,t},lA=function(t){for(var e=gr(256),n=0;n<256;n++)e[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;return e[254]=e[254]=1,lA=i=>e[i],e[t]};function Qy(t){var e,n,i,r,s,o=t.length,a=0;for(r=0;r<o;r++)n=t.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=t.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(a),s=0,r=0;s<a;r++)n=t.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=t.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|n&63):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|n&63):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|n&63);return e}function uT(t,e){if(e<65534&&(t.subarray&&Dy()||!t.subarray&&Sy()))return String.fromCharCode.apply(null,vy(t,e));for(var n="",i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n}function fT(t){for(var e=new Uint8Array(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e}function AT(t,e){var n,i,r,s,o=e||t.length,a=new Array(o*2);for(i=0,n=0;n<o;){if(r=t[n++],r<128){a[i++]=r;continue}if(s=lA(r),s>4){a[i++]=65533,n+=s-1;continue}for(r&=s===2?31:s===3?15:7;s>1&&n<o;)r=r<<6|t[n++]&63,s--;if(s>1){a[i++]=65533;continue}r<65536?a[i++]=r:(r-=65536,a[i++]=55296|r>>10&1023,a[i++]=56320|r&1023)}return uT(a,i)}function hT(t,e){var n;for(e=e||t.length,e>t.length&&(e=t.length),n=e-1;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+lA(t[n])>e?n:e}function dT(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}function uA(t,e,n,i){for(var r=t&65535|0,s=t>>>16&65535|0,o=0;n!==0;){o=n>2e3?2e3:n,n-=o;do r=r+e[i++]|0,s=s+r|0;while(--o);r%=65521,s%=65521}return r|s<<16|0}function gT(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e}let ky=function(){const t=gT();return ky=()=>t,t};function Yt(t,e,n,i){var r=ky(),s=i+n;t^=-1;for(var o=i;o<s;o++)t=t>>>8^r[(t^e[o])&255];return t^-1}var wc=30,pT=12;function mT(t,e){var n,i,r,s,o,a,l,c,u,f,h,A,d,g,m,p,w,C,y,x,I,b,S,D,v;n=t.state,i=t.next_in,D=t.input,r=i+(t.avail_in-5),s=t.next_out,v=t.output,o=s-(e-t.avail_out),a=s+(t.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,f=n.wnext,h=n.window,A=n.hold,d=n.bits,g=n.lencode,m=n.distcode,p=(1<<n.lenbits)-1,w=(1<<n.distbits)-1;e:do{d<15&&(A+=D[i++]<<d,d+=8,A+=D[i++]<<d,d+=8),C=g[A&p];t:for(;;){if(y=C>>>24,A>>>=y,d-=y,y=C>>>16&255,y===0)v[s++]=C&65535;else if(y&16){x=C&65535,y&=15,y&&(d<y&&(A+=D[i++]<<d,d+=8),x+=A&(1<<y)-1,A>>>=y,d-=y),d<15&&(A+=D[i++]<<d,d+=8,A+=D[i++]<<d,d+=8),C=m[A&w];n:for(;;){if(y=C>>>24,A>>>=y,d-=y,y=C>>>16&255,y&16){if(I=C&65535,y&=15,d<y&&(A+=D[i++]<<d,d+=8,d<y&&(A+=D[i++]<<d,d+=8)),I+=A&(1<<y)-1,I>l){t.msg="invalid distance too far back",n.mode=wc;break e}if(A>>>=y,d-=y,y=s-o,I>y){if(y=I-y,y>u&&n.sane){t.msg="invalid distance too far back",n.mode=wc;break e}if(b=0,S=h,f===0){if(b+=c-y,y<x){x-=y;do v[s++]=h[b++];while(--y);b=s-I,S=v}}else if(f<y){if(b+=c+f-y,y-=f,y<x){x-=y;do v[s++]=h[b++];while(--y);if(b=0,f<x){y=f,x-=y;do v[s++]=h[b++];while(--y);b=s-I,S=v}}}else if(b+=f-y,y<x){x-=y;do v[s++]=h[b++];while(--y);b=s-I,S=v}for(;x>2;)v[s++]=S[b++],v[s++]=S[b++],v[s++]=S[b++],x-=3;x&&(v[s++]=S[b++],x>1&&(v[s++]=S[b++]))}else{b=s-I;do v[s++]=v[b++],v[s++]=v[b++],v[s++]=v[b++],x-=3;while(x>2);x&&(v[s++]=v[b++],x>1&&(v[s++]=v[b++]))}}else if((y&64)===0){C=m[(C&65535)+(A&(1<<y)-1)];continue n}else{t.msg="invalid distance code",n.mode=wc;break e}break}}else if((y&64)===0){C=g[(C&65535)+(A&(1<<y)-1)];continue t}else if(y&32){n.mode=pT;break e}else{t.msg="invalid literal/length code",n.mode=wc;break e}break}}while(i<r&&s<a);x=d>>3,i-=x,d-=x<<3,A&=(1<<d)-1,t.next_in=i,t.next_out=s,t.avail_in=i<r?5+(r-i):5-(i-r),t.avail_out=s<a?257+(a-s):257-(s-a),n.hold=A,n.bits=d}var wr=15,Fy=852,Ry=592,Ny=0,fA=1,My=2,wT=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],yT=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],CT=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],ET=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function uo(t,e,n,i,r,s,o,a){var l=a.bits,c=0,u=0,f=0,h=0,A=0,d=0,g=0,m=0,p=0,w=0,C,y,x,I,b,S=null,D=0,v,F=pr(wr+1),R=pr(wr+1),M=null,O=0,z,_,Y;for(c=0;c<=wr;c++)F[c]=0;for(u=0;u<i;u++)F[e[n+u]]++;for(A=l,h=wr;h>=1&&F[h]===0;h--);if(A>h&&(A=h),h===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,a.bits=1,0;for(f=1;f<h&&F[f]===0;f++);for(A<f&&(A=f),m=1,c=1;c<=wr;c++)if(m<<=1,m-=F[c],m<0)return-1;if(m>0&&(t===Ny||h!==1))return-1;for(R[1]=0,c=1;c<wr;c++)R[c+1]=R[c]+F[c];for(u=0;u<i;u++)e[n+u]!==0&&(o[R[e[n+u]]++]=u);if(t===Ny?(S=M=o,v=19):t===fA?(S=wT,D-=257,M=yT,O-=257,v=256):(S=CT,M=ET,v=-1),w=0,u=0,c=f,b=s,d=A,g=0,x=-1,p=1<<A,I=p-1,t===fA&&p>Fy||t===My&&p>Ry)return 1;for(;;){z=c-g,o[u]<v?(_=0,Y=o[u]):o[u]>v?(_=M[O+o[u]],Y=S[D+o[u]]):(_=96,Y=0),C=1<<c-g,y=1<<d,f=y;do y-=C,r[b+(w>>g)+y]=z<<24|_<<16|Y|0;while(y!==0);for(C=1<<c-1;w&C;)C>>=1;if(C!==0?(w&=C-1,w+=C):w=0,u++,--F[c]===0){if(c===h)break;c=e[n+o[u]]}if(c>A&&(w&I)!==x){for(g===0&&(g=A),b+=f,d=c-g,m=1<<d;d+g<h&&(m-=F[d+g],!(m<=0));)d++,m<<=1;if(p+=1<<d,t===fA&&p>Fy||t===My&&p>Ry)return 1;x=w&I,r[x]=A<<24|d<<16|b-s|0}}return w!==0&&(r[b+w]=c-g<<24|64<<16|0),a.bits=A,0}var bT=0,Ty=1,Py=2,Ly=4,bi=0,xT=1,IT=2,wt=-2,Oy=-3,Uy=-4,BT=-5,_y=8,Gy=1,zy=2,Hy=3,Yy=4,Vy=5,Jy=6,qy=7,Ky=8,jy=9,Wy=10,yc=11,ln=12,AA=13,Xy=14,hA=15,Zy=16,$y=17,eC=18,tC=19,Cc=20,Ec=21,nC=22,iC=23,rC=24,sC=25,oC=26,dA=27,aC=28,cC=29,me=30,lC=31,vT=32,ST=852,DT=592;function uC(t){return(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24)}function QT(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=pr(320),this.work=pr(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function kT(t){var e;return!t||!t.state?wt:(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=Gy,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=mr(ST),e.distcode=e.distdyn=mr(DT),e.sane=1,e.back=-1,bi)}function FT(t){var e;return!t||!t.state?wt:(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,kT(t))}function RT(t,e){var n,i;return!t||!t.state||(i=t.state,e<0?(n=0,e=-e):(n=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?wt:(i.window!==null&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,FT(t))}function NT(t,e){var n,i;return t?(i=new QT,t.state=i,i.window=null,n=RT(t,e),n!==bi&&(t.state=null),n):wt}var fC=!0,gA,pA;function MT(t){if(fC){var e;for(gA=mr(512),pA=mr(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(uo(Ty,t.lens,0,288,gA,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;uo(Py,t.lens,0,32,pA,0,t.work,{bits:5}),fC=!1}t.lencode=gA,t.lenbits=9,t.distcode=pA,t.distbits=5}function AC(t,e,n,i){var r,s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=gr(s.wsize)),i>=s.wsize?(Un(s.window,e,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),Un(s.window,e,n-i,r,s.wnext),i-=r,i?(Un(s.window,e,n-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0}function TT(t,e){var n,i,r,s,o,a,l,c,u,f,h,A,d,g,m=0,p,w,C,y,x,I,b,S,D=gr(4),v,F,R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return wt;n=t.state,n.mode===ln&&(n.mode=AA),o=t.next_out,r=t.output,l=t.avail_out,s=t.next_in,i=t.input,a=t.avail_in,c=n.hold,u=n.bits,f=a,h=l,S=bi;e:for(;;)switch(n.mode){case Gy:if(n.wrap===0){n.mode=AA;break}for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.wrap&2&&c===35615){n.check=0,D[0]=c&255,D[1]=c>>>8&255,n.check=Yt(n.check,D,2,0),c=0,u=0,n.mode=zy;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=me;break}if((c&15)!==_y){t.msg="unknown compression method",n.mode=me;break}if(c>>>=4,u-=4,b=(c&15)+8,n.wbits===0)n.wbits=b;else if(b>n.wbits){t.msg="invalid window size",n.mode=me;break}n.dmax=1<<b,t.adler=n.check=1,n.mode=c&512?Wy:ln,c=0,u=0;break;case zy:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==_y){t.msg="unknown compression method",n.mode=me;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=me;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&(D[0]=c&255,D[1]=c>>>8&255,n.check=Yt(n.check,D,2,0)),c=0,u=0,n.mode=Hy;case Hy:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&(D[0]=c&255,D[1]=c>>>8&255,D[2]=c>>>16&255,D[3]=c>>>24&255,n.check=Yt(n.check,D,4,0)),c=0,u=0,n.mode=Yy;case Yy:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&(D[0]=c&255,D[1]=c>>>8&255,n.check=Yt(n.check,D,2,0)),c=0,u=0,n.mode=Vy;case Vy:if(n.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&(D[0]=c&255,D[1]=c>>>8&255,n.check=Yt(n.check,D,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=Jy;case Jy:if(n.flags&1024&&(A=n.length,A>a&&(A=a),A&&(n.head&&(b=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Un(n.head.extra,i,s,A,b)),n.flags&512&&(n.check=Yt(n.check,i,A,s)),a-=A,s+=A,n.length-=A),n.length))break e;n.length=0,n.mode=qy;case qy:if(n.flags&2048){if(a===0)break e;A=0;do b=i[s+A++],n.head&&b&&n.length<65536&&(n.head.name+=String.fromCharCode(b));while(b&&A<a);if(n.flags&512&&(n.check=Yt(n.check,i,A,s)),a-=A,s+=A,b)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=Ky;case Ky:if(n.flags&4096){if(a===0)break e;A=0;do b=i[s+A++],n.head&&b&&n.length<65536&&(n.head.comment+=String.fromCharCode(b));while(b&&A<a);if(n.flags&512&&(n.check=Yt(n.check,i,A,s)),a-=A,s+=A,b)break e}else n.head&&(n.head.comment=null);n.mode=jy;case jy:if(n.flags&512){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(n.check&65535)){t.msg="header crc mismatch",n.mode=me;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=ln;break;case Wy:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.adler=n.check=uC(c),c=0,u=0,n.mode=yc;case yc:if(n.havedict===0)return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,IT;t.adler=n.check=1,n.mode=ln;case ln:case AA:if(n.last){c>>>=u&7,u-=u&7,n.mode=dA;break}for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=Xy;break;case 1:MT(n),n.mode=Cc;break;case 2:n.mode=$y;break;case 3:t.msg="invalid block type",n.mode=me}c>>>=2,u-=2;break;case Xy:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=me;break}n.length=c&65535,c=0,u=0,n.mode=hA;case hA:n.mode=Zy;case Zy:if(A=n.length,A){if(A>a&&(A=a),A>l&&(A=l),A===0)break e;Un(r,i,s,A,o),a-=A,s+=A,l-=A,o+=A,n.length-=A;break}n.mode=ln;break;case $y:for(;u<14;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=me;break}n.have=0,n.mode=eC;case eC:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.lens[R[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[R[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,v={bits:n.lenbits},S=uo(bT,n.lens,0,19,n.lencode,0,n.work,v),n.lenbits=v.bits,S){t.msg="invalid code lengths set",n.mode=me;break}n.have=0,n.mode=tC;case tC:for(;n.have<n.nlen+n.ndist;){for(;m=n.lencode[c&(1<<n.lenbits)-1],p=m>>>24,w=m>>>16&255,C=m&65535,!(p<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(C<16)c>>>=p,u-=p,n.lens[n.have++]=C;else{if(C===16){for(F=p+2;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c>>>=p,u-=p,n.have===0){t.msg="invalid bit length repeat",n.mode=me;break}b=n.lens[n.have-1],A=3+(c&3),c>>>=2,u-=2}else if(C===17){for(F=p+3;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=p,u-=p,b=0,A=3+(c&7),c>>>=3,u-=3}else{for(F=p+7;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=p,u-=p,b=0,A=11+(c&127),c>>>=7,u-=7}if(n.have+A>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=me;break}for(;A--;)n.lens[n.have++]=b}}if(n.mode===me)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=me;break}if(n.lenbits=9,v={bits:n.lenbits},S=uo(Ty,n.lens,0,n.nlen,n.lencode,0,n.work,v),n.lenbits=v.bits,S){t.msg="invalid literal/lengths set",n.mode=me;break}if(n.distbits=6,n.distcode=n.distdyn,v={bits:n.distbits},S=uo(Py,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,v),n.distbits=v.bits,S){t.msg="invalid distances set",n.mode=me;break}n.mode=Cc;case Cc:n.mode=Ec;case Ec:if(a>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,mT(t,h),o=t.next_out,r=t.output,l=t.avail_out,s=t.next_in,i=t.input,a=t.avail_in,c=n.hold,u=n.bits,n.mode===ln&&(n.back=-1);break}for(n.back=0;m=n.lencode[c&(1<<n.lenbits)-1],p=m>>>24,w=m>>>16&255,C=m&65535,!(p<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(w&&(w&240)===0){for(y=p,x=w,I=C;m=n.lencode[I+((c&(1<<y+x)-1)>>y)],p=m>>>24,w=m>>>16&255,C=m&65535,!(y+p<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=y,u-=y,n.back+=y}if(c>>>=p,u-=p,n.back+=p,n.length=C,w===0){n.mode=oC;break}if(w&32){n.back=-1,n.mode=ln;break}if(w&64){t.msg="invalid literal/length code",n.mode=me;break}n.extra=w&15,n.mode=nC;case nC:if(n.extra){for(F=n.extra;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=iC;case iC:for(;m=n.distcode[c&(1<<n.distbits)-1],p=m>>>24,w=m>>>16&255,C=m&65535,!(p<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((w&240)===0){for(y=p,x=w,I=C;m=n.distcode[I+((c&(1<<y+x)-1)>>y)],p=m>>>24,w=m>>>16&255,C=m&65535,!(y+p<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=y,u-=y,n.back+=y}if(c>>>=p,u-=p,n.back+=p,w&64){t.msg="invalid distance code",n.mode=me;break}n.offset=C,n.extra=w&15,n.mode=rC;case rC:if(n.extra){for(F=n.extra;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=me;break}n.mode=sC;case sC:if(l===0)break e;if(A=h-l,n.offset>A){if(A=n.offset-A,A>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=me;break}A>n.wnext?(A-=n.wnext,d=n.wsize-A):d=n.wnext-A,A>n.length&&(A=n.length),g=n.window}else g=r,d=o-n.offset,A=n.length;A>l&&(A=l),l-=A,n.length-=A;do r[o++]=g[d++];while(--A);n.length===0&&(n.mode=Ec);break;case oC:if(l===0)break e;r[o++]=n.length,l--,n.mode=Ec;break;case dA:if(n.wrap){for(;u<32;){if(a===0)break e;a--,c|=i[s++]<<u,u+=8}if(h-=l,t.total_out+=h,n.total+=h,h&&(t.adler=n.check=n.flags?Yt(n.check,r,h,o-h):uA(n.check,r,h,o-h)),h=l,(n.flags?c:uC(c))!==n.check){t.msg="incorrect data check",n.mode=me;break}c=0,u=0}n.mode=aC;case aC:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=me;break}c=0,u=0}n.mode=cC;case cC:S=xT;break e;case me:S=Oy;break e;case lC:return Uy;case vT:default:return wt}return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,(n.wsize||h!==t.avail_out&&n.mode<me&&(n.mode<dA||e!==Ly))&&AC(t,t.output,t.next_out,h-t.avail_out),f-=t.avail_in,h-=t.avail_out,t.total_in+=f,t.total_out+=h,n.total+=h,n.wrap&&h&&(t.adler=n.check=n.flags?Yt(n.check,r,h,t.next_out-h):uA(n.check,r,h,t.next_out-h)),t.data_type=n.bits+(n.last?64:0)+(n.mode===ln?128:0)+(n.mode===Cc||n.mode===hA?256:0),(f===0&&h===0||e===Ly)&&S===bi&&(S=BT),S}function PT(t){if(!t||!t.state)return wt;var e=t.state;return e.window&&(e.window=null),t.state=null,bi}function LT(t,e){var n;return!t||!t.state||(n=t.state,(n.wrap&2)===0)?wt:(n.head=e,e.done=!1,bi)}function hC(t,e){var n=e.length,i,r,s;return!t||!t.state||(i=t.state,i.wrap!==0&&i.mode!==yc)?wt:i.mode===yc&&(r=1,r=uA(r,e,n,0),r!==i.check)?Oy:(s=AC(t,e,n,n),s?(i.mode=lC,Uy):(i.havedict=1,bi))}const mA={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function OT(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var wA=Object.prototype.toString;let dC=class ph{constructor(e){if(!(this instanceof ph))return new ph(e);this.options=lT({chunkSize:16384,windowBits:0,to:""},e||{});var n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(e&&e.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15)===0&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new OT,this.strm.avail_out=0;var i=NT(this.strm,n.windowBits);if(i!==Ei)throw new Error(mA[i]);if(this.header=new dT,LT(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=Qy(n.dictionary):wA.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(i=hC(this.strm,n.dictionary),i!==Ei)))throw new Error(mA[i])}push(e,n){var i=this.strm,r=this.options.chunkSize,s=this.options.dictionary,o,a,l,c,u,f,h=!1;if(this.ended)return!1;a=n===~~n?n:n===!0?pc:By,typeof e=="string"?i.input=fT(e):wA.call(e)==="[object ArrayBuffer]"?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(i.avail_out===0&&(i.output=gr(r),i.next_out=0,i.avail_out=r),o=TT(i,By),o===oT&&s&&(typeof s=="string"?f=Qy(s):wA.call(s)==="[object ArrayBuffer]"?f=new Uint8Array(s):f=s,o=hC(this.strm,f)),o===aT&&h===!0&&(o=Ei,h=!1),o!==mc&&o!==Ei)return this.onEnd(o),this.ended=!0,!1;i.next_out&&(i.avail_out===0||o===mc||i.avail_in===0&&(a===pc||a===aA))&&(this.options.to==="string"?(l=hT(i.output,i.next_out),c=i.next_out-l,u=AT(i.output,l),i.next_out=c,i.avail_out=r-c,c&&Un(i.output,i.output,l,c,0),this.onData(u)):this.onData(vy(i.output,i.next_out))),i.avail_in===0&&i.avail_out===0&&(h=!0)}while((i.avail_in>0||i.avail_out===0)&&o!==mc);return o===mc&&(a=pc),a===pc?(o=PT(this.strm),this.onEnd(o),this.ended=!0,o===Ei):(a===aA&&(this.onEnd(Ei),i.avail_out=0),!0)}onData(e){this.chunks.push(e)}onEnd(e){e===Ei&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=cA(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg}};function UT(t,e){var n=new dC(e);if(n.push(t,!0),n.err)throw n.msg||mA[n.err];return n.result}function _T(t,e){return e=e||{},e.raw=!0,UT(t,e)}function GT(t){let e=0;for(const n of t)e+=n.length;return e}function gC(t,e){const n=new Uint8Array(e??GT(t));let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}async function zT(t){try{let e,n=0,i;const r=[];let s=0;do{const o=t.subarray(n);if(i=new dC(void 0),{strm:e}=i,i.push(o,aA),i.err)throw new Error(i.msg);n+=e.next_in;const a=i.result;r.push(a),s+=a.length}while(e.avail_in);return gC(r,s)}catch(e){throw/incorrect header check/.exec(`${e}`)?new Error("problem decompressing block: incorrect gzip header check"):e}}class pC{filehandle;gzi;constructor({filehandle:e,gziFilehandle:n}){this.filehandle=e,this.gzi=new sT({filehandle:n})}async _readAndUncompressBlock(e,n){let i=n;i||(i=(await this.filehandle.stat()).size);const r=i-e,s=await this.filehandle.read(r,e);return zT(s)}async read(e,n){const i=await this.gzi.getRelevantBlocksForRead(e,n),r=[];for(let s=0;s<i.length-1;s+=1){const o=await this._readAndUncompressBlock(i[s][0],i[s+1][0]),[,a]=i[s],l=a>=n?0:n-a,c=Math.min(n+e,a+o.length)-a;l>=0&&l<o.length&&r.push(o.subarray(l,c))}return gC(r)}}function mC(t,e){return t.offset+t.lineBytes*Math.floor(e/t.lineLength)+e%t.lineLength}async function HT(t,e={}){const n=new TextDecoder("utf8");return Object.fromEntries(n.decode(await t.readFile(e)).split(/\r?\n/).map(i=>i.trim()).filter(i=>!!i).map(i=>i.split("	")).map(i=>{if(i[0]?.startsWith(">"))throw new Error("found > in sequence name, might have supplied FASTA file for the FASTA index");return[i[0],{name:i[0],length:+i[1],start:0,end:+i[1],offset:+i[2],lineLength:+i[3],lineBytes:+i[4]}]}))}class wC{constructor({fasta:e,fai:n,path:i,faiPath:r}){if(e)this.fasta=e;else if(i)this.fasta=new We(i);else throw new Error("Need to pass filehandle for fasta or path to localfile");if(n)this.fai=n;else if(r)this.fai=new We(r);else if(i)this.fai=new We(`${i}.fai`);else throw new Error("Need to pass filehandle for  or path to localfile")}async _getIndexes(e){return this.indexes||(this.indexes=HT(this.fai,e).catch(n=>{throw this.indexes=void 0,n})),this.indexes}async getSequenceNames(e){return Object.keys(await this._getIndexes(e))}async getSequenceSizes(e){const n={},i=await this._getIndexes(e);for(const r of Object.values(i))n[r.name]=r.length;return n}async getSequenceSize(e,n){return(await this._getIndexes(n))[e]?.length}async hasReferenceSequence(e,n){return!!(await this._getIndexes(n))[e]}async getResiduesByName(e,n,i,r){const s=(await this._getIndexes(r))[e];return s?this._fetchFromIndexEntry(s,n,i,r):void 0}async getSequence(e,n,i,r){return this.getResiduesByName(e,n,i,r)}async _fetchFromIndexEntry(e,n=0,i,r){let s=i;if(n<0)throw new TypeError("regionStart cannot be less than 0");if((s===void 0||s>e.length)&&(s=e.length),n>=s)return"";const o=mC(e,n),a=mC(e,s)-o,c=new TextDecoder("utf8").decode(await this.fasta.read(a,o,r)).replace(/\s+/g,"");if(/[^\x20-\x7e]/.test(c.slice(0,1e3)))throw new Error("Non-ASCII characters detected in sequence. The file may be gzip compressed. Use BgzipIndexedFasta for bgzip files, or decompress the file.");return c}}class YT extends wC{constructor({fasta:e,path:n,fai:i,faiPath:r,gzi:s,gziPath:o}){super({fasta:e,path:n,fai:i,faiPath:r}),e&&s?this.fasta=new pC({filehandle:e,gziFilehandle:s}):n&&o&&(this.fasta=new pC({filehandle:new We(n),gziFilehandle:new We(o)}))}}function yC(t){return t.split(">").filter(e=>/\S/.test(e)).map(e=>{const[n,...i]=e.split(`
`),[r,...s]=n.split(" "),o=i.join("").replace(/\s/g,"");return{id:r,description:s.join(" "),sequence:o}})}class VT{constructor({fasta:e,path:n}){if(e)this.fasta=e;else if(n)this.fasta=new We(n);else throw new Error("Need to pass fasta or path");this.data=this.fasta.readFile().then(i=>{const s=new TextDecoder("utf8").decode(i);return yC(s)})}async fetch(e,n,i){const s=(await this.data).find(a=>a.id===e),o=i-n;if(!s)throw new Error(`no sequence with id ${e} exists`);return s.sequence.slice(n,o)}async getSequenceNames(){return(await this.data).map(n=>n.id)}}const JT=Object.freeze(Object.defineProperty({__proto__:null,BgzipIndexedFasta:YT,FetchableSmallFasta:VT,IndexedFasta:wC,parseSmallFasta:yC},Symbol.toStringTag,{value:"Module"})),CC=BigInt(32);function qT(t,e,n){const i=+!!n,r=+!n;return BigInt(t.getInt32(e,n)*r+t.getInt32(e+4,n)*i)<<CC|BigInt(t.getUint32(e,n)*i+t.getUint32(e+4,n)*r)}function KT(t,e,n){const i=t.getUint32(e,n),r=t.getUint32(e+4,n),s=+!!n,o=+!n;return BigInt(i*o+r*s)<<CC|BigInt(i*s+r*o)}"getBigInt64"in DataView||(DataView.prototype.getBigInt64=function(t,e){return qT(this,t,e)}),"getBigUint64"in DataView||(DataView.prototype.getBigUint64=function(t,e){return KT(this,t,e)});var yA=function(t,e){return yA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},yA(t,e)};function CA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");yA(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function jT(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(f){o(f)}}function l(u){try{c(i.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})}function EC(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(i=1,r&&(s=c[0]&2?r.return:c[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,c[1])).done)return s;switch(r=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,r=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],r=0}finally{i=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function fo(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function EA(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function bA(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}function yr(t){return this instanceof yr?(this.v=t,this):new yr(t)}function WT(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(A){return function(d){return Promise.resolve(d).then(A,f)}}function a(A,d){i[A]&&(r[A]=function(g){return new Promise(function(m,p){s.push([A,g,m,p])>1||l(A,g)})},d&&(r[A]=d(r[A])))}function l(A,d){try{c(i[A](d))}catch(g){h(s[0][3],g)}}function c(A){A.value instanceof yr?Promise.resolve(A.value.v).then(u,f):h(s[0][2],A)}function u(A){l("next",A)}function f(A){l("throw",A)}function h(A,d){A(d),s.shift(),s.length&&l(s[0][0],s[0][1])}}function XT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof fo=="function"?fo(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),r(a,l,o.done,o.value)})}}function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}typeof SuppressedError=="function"&&SuppressedError;function ke(t){return typeof t=="function"}function bC(t){var e=function(i){Error.call(i),i.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var xA=bC(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(i,r){return r+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function xC(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var IA=(function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,i,r,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=fo(o),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(g){e={error:g}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else o.remove(this);var u=this.initialTeardown;if(ke(u))try{u()}catch(g){s=g instanceof xA?g.errors:[g]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var h=fo(f),A=h.next();!A.done;A=h.next()){var d=A.value;try{BC(d)}catch(g){s=s??[],g instanceof xA?s=bA(bA([],EA(s)),EA(g.errors)):s.push(g)}}}catch(g){i={error:g}}finally{try{A&&!A.done&&(r=h.return)&&r.call(h)}finally{if(i)throw i.error}}}if(s)throw new xA(s)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)BC(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&xC(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&xC(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=(function(){var e=new t;return e.closed=!0,e})(),t})();IA.EMPTY;function IC(t){return t instanceof IA||t&&"closed"in t&&ke(t.remove)&&ke(t.add)&&ke(t.unsubscribe)}function BC(t){ke(t)?t():t.unsubscribe()}var ZT={Promise:void 0},$T={setTimeout:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setTimeout.apply(void 0,bA([t,e],EA(n)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function vC(t){$T.setTimeout(function(){throw t})}function SC(){}function e6(t){t()}var BA=(function(t){CA(e,t);function e(n){var i=t.call(this)||this;return i.isStopped=!1,n?(i.destination=n,IC(n)&&n.add(i)):i.destination=i6,i}return e.create=function(n,i,r){return new bc(n,i,r)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e})(IA),t6=(function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(i){xc(i)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(i){xc(i)}else xc(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){xc(n)}},t})(),bc=(function(t){CA(e,t);function e(n,i,r){var s=t.call(this)||this,o;return ke(n)||!n?o={next:n??void 0,error:i??void 0,complete:r??void 0}:o=n,s.destination=new t6(o),s}return e})(BA);function xc(t){vC(t)}function n6(t){throw t}var i6={closed:!0,next:SC,error:n6,complete:SC},vA=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function DC(t){return t}function r6(t){return t.length===0?DC:t.length===1?t[0]:function(n){return t.reduce(function(i,r){return r(i)},n)}}var yt=(function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,i){var r=this,s=o6(e)?e:new bc(e,n,i);return e6(function(){var o=r,a=o.operator,l=o.source;s.add(a?a.call(s,l):l?r._subscribe(s):r._trySubscribe(s))}),s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var i=this;return n=QC(n),new n(function(r,s){var o=new bc({next:function(a){try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});i.subscribe(o)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[vA]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return r6(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=QC(e),new e(function(i,r){var s;n.subscribe(function(o){return s=o},function(o){return r(o)},function(){return i(s)})})},t.create=function(e){return new t(e)},t})();function QC(t){var e;return(e=t??ZT.Promise)!==null&&e!==void 0?e:Promise}function s6(t){return t&&ke(t.next)&&ke(t.error)&&ke(t.complete)}function o6(t){return t&&t instanceof BA||s6(t)&&IC(t)}function a6(t){return ke(t?.lift)}function Cr(t){return function(e){if(a6(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ao(t,e,n,i,r){return new c6(t,e,n,i,r)}var c6=(function(t){CA(e,t);function e(n,i,r,s,o,a){var l=t.call(this,n)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=i?function(c){try{i(c)}catch(u){n.error(u)}}:t.prototype._next,l._error=s?function(c){try{s(c)}catch(u){n.error(u)}finally{this.unsubscribe()}}:t.prototype._error,l._complete=r?function(){try{r()}catch(c){n.error(c)}finally{this.unsubscribe()}}:t.prototype._complete,l}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;t.prototype.unsubscribe.call(this),!i&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e})(BA),l6=new yt(function(t){return t.complete()});function u6(t){return t&&ke(t.schedule)}function kC(t){return t[t.length-1]}function f6(t){return u6(kC(t))?t.pop():void 0}function A6(t,e){return typeof kC(t)=="number"?t.pop():e}var FC=(function(t){return t&&typeof t.length=="number"&&typeof t!="function"});function RC(t){return ke(t?.then)}function NC(t){return ke(t[vA])}function MC(t){return Symbol.asyncIterator&&ke(t?.[Symbol.asyncIterator])}function TC(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function h6(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var PC=h6();function LC(t){return ke(t?.[PC])}function OC(t){return WT(this,arguments,function(){var n,i,r,s;return EC(this,function(o){switch(o.label){case 0:n=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,yr(n.read())];case 3:return i=o.sent(),r=i.value,s=i.done,s?[4,yr(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,yr(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function UC(t){return ke(t?.getReader)}function Er(t){if(t instanceof yt)return t;if(t!=null){if(NC(t))return d6(t);if(FC(t))return g6(t);if(RC(t))return p6(t);if(MC(t))return _C(t);if(LC(t))return m6(t);if(UC(t))return w6(t)}throw TC(t)}function d6(t){return new yt(function(e){var n=t[vA]();if(ke(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function g6(t){return new yt(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function p6(t){return new yt(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,vC)})}function m6(t){return new yt(function(e){var n,i;try{for(var r=fo(t),s=r.next();!s.done;s=r.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(a){n={error:a}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}e.complete()})}function _C(t){return new yt(function(e){y6(t,e).catch(function(n){return e.error(n)})})}function w6(t){return _C(OC(t))}function y6(t,e){var n,i,r,s;return jT(this,void 0,void 0,function(){var o,a;return EC(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=XT(t),l.label=1;case 1:return[4,n.next()];case 2:if(i=l.sent(),!!i.done)return[3,4];if(o=i.value,e.next(o),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),r={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),i&&!i.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function xi(t,e,n,i,r){i===void 0&&(i=0),r===void 0&&(r=!1);var s=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function GC(t,e){return e===void 0&&(e=0),Cr(function(n,i){n.subscribe(Ao(i,function(r){return xi(i,t,function(){return i.next(r)},e)},function(){return xi(i,t,function(){return i.complete()},e)},function(r){return xi(i,t,function(){return i.error(r)},e)}))})}function zC(t,e){return e===void 0&&(e=0),Cr(function(n,i){i.add(t.schedule(function(){return n.subscribe(i)},e))})}function C6(t,e){return Er(t).pipe(zC(e),GC(e))}function E6(t,e){return Er(t).pipe(zC(e),GC(e))}function b6(t,e){return new yt(function(n){var i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function x6(t,e){return new yt(function(n){var i;return xi(n,e,function(){i=t[PC](),xi(n,e,function(){var r,s,o;try{r=i.next(),s=r.value,o=r.done}catch(a){n.error(a);return}o?n.complete():n.next(s)},0,!0)}),function(){return ke(i?.return)&&i.return()}})}function HC(t,e){if(!t)throw new Error("Iterable cannot be null");return new yt(function(n){xi(n,e,function(){var i=t[Symbol.asyncIterator]();xi(n,e,function(){i.next().then(function(r){r.done?n.complete():n.next(r.value)})},0,!0)})})}function I6(t,e){return HC(OC(t),e)}function B6(t,e){if(t!=null){if(NC(t))return C6(t,e);if(FC(t))return b6(t,e);if(RC(t))return E6(t,e);if(MC(t))return HC(t,e);if(LC(t))return x6(t,e);if(UC(t))return I6(t,e)}throw TC(t)}function v6(t,e){return e?B6(t,e):Er(t)}var S6=bC(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function YC(t,e){return new Promise(function(n,i){var r=new bc({next:function(s){n(s),r.unsubscribe()},error:i,complete:function(){i(new S6)}});t.subscribe(r)})}function VC(t,e){return Cr(function(n,i){var r=0;n.subscribe(Ao(i,function(s){i.next(t.call(e,s,r++))}))})}function D6(t,e,n,i,r,s,o,a){var l=[],c=0,u=0,f=!1,h=function(){f&&!l.length&&!c&&e.complete()},A=function(g){return c<i?d(g):l.push(g)},d=function(g){c++;var m=!1;Er(n(g,u++)).subscribe(Ao(e,function(p){e.next(p)},function(){m=!0},void 0,function(){if(m)try{c--;for(var p=function(){var w=l.shift();o||d(w)};l.length&&c<i;)p();h()}catch(w){e.error(w)}}))};return t.subscribe(Ao(e,A,function(){f=!0,h()})),function(){}}function JC(t,e,n){return n===void 0&&(n=1/0),ke(e)?JC(function(i,r){return VC(function(s,o){return e(i,s,r,o)})(Er(t(i,r)))},n):(typeof e=="number"&&(n=e),Cr(function(i,r){return D6(i,r,t,n)}))}function Q6(t){return t===void 0&&(t=1/0),JC(DC,t)}function k6(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=f6(t),i=A6(t,1/0),r=t;return r.length?r.length===1?Er(r[0]):Q6(i)(v6(r,n)):l6}function F6(t,e,n,i,r){return function(s,o){var a=n,l=e,c=0;s.subscribe(Ao(o,function(u){var f=c++;l=a?t(l,u,f):(a=!0,u)},(function(){a&&o.next(l),o.complete()})))}}function qC(t,e){return Cr(F6(t,e,arguments.length>=2,!1,!0))}var R6=function(t,e){return t.push(e),t};function N6(){return Cr(function(t,e){qC(R6,[])(t).subscribe(e)})}class M6{}class T6{constructor(){this.signals=new Set,this.abortController=new AbortController}addSignal(e=new M6){if(this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(e),e.aborted?this.handleAborted(e):typeof e.addEventListener=="function"&&e.addEventListener("abort",()=>{this.handleAborted(e)})}handleAborted(e){this.signals.delete(e),this.signals.size===0&&this.abortController.abort()}get signal(){return this.abortController.signal}abort(){this.abortController.abort()}}class P6{constructor(){this.callbacks=new Set}addCallback(e=()=>{}){this.callbacks.add(e),this.currentMessage&&e(this.currentMessage)}callback(e){this.currentMessage=e;for(const n of this.callbacks)n(e)}}class br{constructor({fill:e,cache:n}){if(typeof e!="function")throw new TypeError("must pass a fill function");if(typeof n!="object")throw new TypeError("must pass a cache object");if(typeof n.get!="function"||typeof n.set!="function"||typeof n.delete!="function")throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=n,this.fillCallback=e}static isAbortException(e){return e.name==="AbortError"||e.code==="ERR_ABORTED"||e.message==="AbortError: aborted"||e.message==="Error: aborted"}evict(e,n){this.cache.get(e)===n&&this.cache.delete(e)}fill(e,n,i,r){const s=new T6,o=new P6;o.addCallback(r);const a={aborter:s,promise:this.fillCallback(n,s.signal,l=>{o.callback(l)}),settled:!1,statusReporter:o,get aborted(){return this.aborter.signal.aborted}};a.aborter.addSignal(i),a.aborter.signal.addEventListener("abort",()=>{a.settled||this.evict(e,a)}),a.promise.then(()=>{a.settled=!0},()=>{a.settled=!0,this.evict(e,a)}).catch(l=>{throw console.error(l),l}),this.cache.set(e,a)}static checkSinglePromise(e,n){function i(){if(n?.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return e.then(r=>(i(),r),r=>{throw i(),r})}has(e){return this.cache.has(e)}get(e,n,i,r){if(!i&&n instanceof AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");const s=this.cache.get(e);return s?s.aborted&&!s.settled?(this.evict(e,s),this.get(e,n,i,r)):s.settled?s.promise:(s.aborter.addSignal(i),s.statusReporter.addCallback(r),br.checkSinglePromise(s.promise,i)):(this.fill(e,n,i,r),br.checkSinglePromise(this.cache.get(e).promise,i))}delete(e){const n=this.cache.get(e);n&&(n.settled||n.aborter.abort(),this.cache.delete(e))}clear(){const e=this.cache.keys();let n=0;for(let i=e.next();!i.done;i=e.next())this.delete(i.value),n+=1;return n}}function L6(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var SA,KC;function O6(){if(KC)return SA;KC=1;class t{constructor(n={}){if(!(n.maxSize&&n.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=n.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(n,i){this.cache.set(n,i),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(n){if(this.cache.has(n))return this.cache.get(n);if(this.oldCache.has(n)){const i=this.oldCache.get(n);return this.oldCache.delete(n),this._set(n,i),i}}set(n,i){return this.cache.has(n)?this.cache.set(n,i):this._set(n,i),this}has(n){return this.cache.has(n)||this.oldCache.has(n)}peek(n){if(this.cache.has(n))return this.cache.get(n);if(this.oldCache.has(n))return this.oldCache.get(n)}delete(n){const i=this.cache.delete(n);return i&&this._size--,this.oldCache.delete(n)||i}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[n]of this)yield n}*values(){for(const[,n]of this)yield n}*[Symbol.iterator](){for(const n of this.cache)yield n;for(const n of this.oldCache){const[i]=n;this.cache.has(i)||(yield n)}}get size(){let n=0;for(const i of this.oldCache.keys())this.cache.has(i)||n++;return this._size+n}}return SA=t,SA}var U6=O6();const jC=L6(U6);class xr{ranges;constructor(e){this.ranges=e}get min(){return this.ranges[0].min}get max(){return this.ranges.at(-1).max}contains(e){for(const n of this.ranges)if(n.min<=e&&n.max>=e)return!0;return!1}isContiguous(){return this.ranges.length>1}getRanges(){return this.ranges.map(e=>new xr([{min:e.min,max:e.max}]))}toString(){return this.ranges.map(e=>`[${e.min}-${e.max}]`).join(",")}union(e){const n=[...this.getRanges(),...e.getRanges()].sort((s,o)=>s.min<o.min?-1:s.min>o.min?1:s.max<o.max?-1:o.max>s.max?1:0),i=[];let r=n[0];for(const s of n)s.min>r.max+1?(i.push(r),r=s):s.max>r.max&&(r=new xr([{min:r.min,max:s.max}]));return i.push(r),i.length===1?i[0]:new xr(i)}}function _6(t){return _T(t.subarray(2),void 0)}class G6 extends Error{code;constructor(e){super(e),this.code="ERR_ABORTED"}}function z6(t){t.sort((r,s)=>r.offset-s.offset);const e=[];let n,i;for(const r of t)n&&i&&r.offset-i<=2e3?(n.length=n.length+r.length-i+r.offset,n.blocks.push(r)):e.push(n={blocks:[r],length:r.length,offset:r.offset}),i=n.offset+n.length;return e}function Ic(t){if(t&&t.aborted)if(typeof DOMException>"u"){const e=new G6("aborted");throw e.code="ERR_ABORTED",e}else throw new DOMException("aborted","AbortError")}const H6=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function DA(t,e,n,i){return t<i&&e>=n}class WC{bbi;refsByName;cirTreeOffset;isCompressed;blockType;cirTreePromise;featureCache=new br({cache:new jC({maxSize:1e3}),fill:async({length:e,offset:n},i)=>this.bbi.read(e,n,{signal:i})});constructor(e,n,i,r,s){if(this.bbi=e,this.refsByName=n,this.cirTreeOffset=i,this.isCompressed=r,this.blockType=s,!(i>=0))throw new Error("invalid cirTreeOffset!")}async readWigData(e,n,i,r,s){try{const o=this.refsByName[e];o===void 0&&r.complete();const a={chrId:o,start:n,end:i};this.cirTreePromise||(this.cirTreePromise=this.bbi.read(48,this.cirTreeOffset,s));const l=await this.cirTreePromise,u=new DataView(l.buffer).getUint32(4,!0);let f=[],h=0;const A=(p,w,C)=>{try{const x=p.subarray(w),I=new DataView(x.buffer,x.byteOffset,x.length);let b=0;const S=I.getUint8(b);b+=2;const D=I.getUint16(b,!0);if(b+=2,S===1){const v=[];for(let F=0;F<D;F++){const R=I.getUint32(b,!0);b+=4;const M=I.getUint32(b,!0);b+=4;const O=I.getUint32(b,!0);b+=4;const z=I.getUint32(b,!0);b+=4;const _=Number(I.getBigUint64(b,!0));b+=8;const Y=Number(I.getBigUint64(b,!0));b+=8,v.push({startChrom:R,startBase:M,endBase:z,endChrom:O,blockOffset:_,blockSize:Y,offset:b})}f=f.concat(v.filter(F=>d(F)).map(F=>({offset:F.blockOffset,length:F.blockSize})))}else if(S===0){const v=[];for(let R=0;R<D;R++){const M=I.getUint32(b,!0);b+=4;const O=I.getUint32(b,!0);b+=4;const z=I.getUint32(b,!0);b+=4;const _=I.getUint32(b,!0);b+=4;const Y=Number(I.getBigUint64(b,!0));b+=8,v.push({startChrom:M,startBase:O,endChrom:z,endBase:_,blockOffset:Y,offset:b})}const F=v.filter(R=>d(R)).map(R=>R.blockOffset);F.length>0&&m(F,C+1)}}catch(y){r.error(y)}},d=p=>{const{startChrom:w,startBase:C,endChrom:y,endBase:x}=p;return(w<o||w===o&&C<=i)&&(y>o||y===o&&x>=n)},g=async(p,w,C)=>{try{const y=w.max-w.min,x=w.min,I=await this.featureCache.get(`${y}_${x}`,{length:y,offset:x},s?.signal);for(const b of p)w.contains(b)&&(A(I,b-x,C),h-=1,h===0&&this.readFeatures(r,f,{...s,request:a}).catch(S=>{r.error(S)}))}catch(y){r.error(y)}},m=(p,w)=>{try{h+=p.length;const C=4+u*32;let y=new xr([{min:p[0],max:p[0]+C}]);for(let x=1;x<p.length;x+=1){const I=new xr([{min:p[x],max:p[x]+C}]);y=y.union(I)}y.getRanges().map(x=>g(p,x,w))}catch(C){r.error(C)}};m([this.cirTreeOffset+48],1);return}catch(o){r.error(o)}}parseSummaryBlock(e,n,i){const r=[];let s=n;const o=new DataView(e.buffer,e.byteOffset,e.length);for(;s<e.byteLength;){const a=o.getUint32(s,!0);s+=4;const l=o.getUint32(s,!0);s+=4;const c=o.getUint32(s,!0);s+=4;const u=o.getUint32(s,!0);s+=4;const f=o.getFloat32(s,!0);s+=4;const h=o.getFloat32(s,!0);s+=4;const A=o.getFloat32(s,!0);s+=4,s+=4,(!i||a===i.chrId&&DA(l,c,i.start,i.end))&&r.push({start:l,end:c,maxScore:h,minScore:f,summary:!0,score:A/(u||1)})}return r}parseBigBedBlock(e,n,i,r){const s=[];let o=n;const a=e,l=new DataView(a.buffer,a.byteOffset,a.length);for(;o<e.byteLength;){const c=o,u=l.getUint32(o,!0);o+=4;const f=l.getInt32(o,!0);o+=4;const h=l.getInt32(o,!0);o+=4;let A=o;for(;A<e.length&&e[A]!==0;A++);const d=e.subarray(o,A),g=H6?.decode(d)??d.toString();o=A+1,s.push({chromId:u,start:f,end:h,rest:g,uniqueId:`bb-${i+c}`})}return r?s.filter(c=>DA(c.start,c.end,r.start,r.end)):s}parseBigWigBlock(e,n,i){const r=e.subarray(n),s=new DataView(r.buffer,r.byteOffset,r.length);let o=0;o+=4;const a=s.getInt32(o,!0);o+=8;const l=s.getUint32(o,!0);o+=4;const c=s.getUint32(o,!0);o+=4;const u=s.getUint8(o);o+=2;const f=s.getUint16(o,!0);o+=2;const h=new Array(f);switch(u){case 1:{for(let A=0;A<f;A++){const d=s.getInt32(o,!0);o+=4;const g=s.getInt32(o,!0);o+=4;const m=s.getFloat32(o,!0);o+=4,h[A]={start:d,end:g,score:m}}break}case 2:{for(let A=0;A<f;A++){const d=s.getInt32(o,!0);o+=4;const g=s.getFloat32(o,!0);o+=4,h[A]={score:g,start:d,end:d+c}}break}case 3:{for(let A=0;A<f;A++){const d=s.getFloat32(o,!0);o+=4;const g=a+A*l;h[A]={score:d,start:g,end:g+c}}break}}return i?h.filter(A=>DA(A.start,A.end,i.start,i.end)):h}async readFeatures(e,n,i={}){try{const{blockType:r,isCompressed:s}=this,{signal:o,request:a}=i,l=z6(n);Ic(o),await Promise.all(l.map(async c=>{Ic(o);const{length:u,offset:f}=c,h=await this.featureCache.get(`${u}_${f}`,c,o);for(const A of c.blocks){Ic(o);let d=h.subarray(A.offset-c.offset);switch(s&&(d=_6(d)),Ic(o),r){case"summary":{e.next(this.parseSummaryBlock(d,0,a));break}case"bigwig":{e.next(this.parseBigWigBlock(d,0,a));break}case"bigbed":{e.next(this.parseBigBedBlock(d,0,A.offset*256,a));break}default:console.warn(`Don't know what to do with ${r}`)}}})),e.complete()}catch(r){e.error(r)}}}const Y6=-2003829722,XC=-2021002517;function Ir(t){return new DataView(t.buffer,t.byteOffset,t.length)}class ZC{bbi;headerP;renameRefSeqs;getHeader(e){return this.headerP||(this.headerP=this._getHeader(e).catch(n=>{throw this.headerP=void 0,n})),this.headerP}constructor(e){const{filehandle:n,renameRefSeqs:i=o=>o,path:r,url:s}=e;if(this.renameRefSeqs=i,n)this.bbi=n;else if(s)this.bbi=new Ht(s);else if(r)this.bbi=new We(r);else throw new Error("no file given")}async _getHeader(e){const n=await this._getMainHeader(e),i=await this._readChromTree(n,e);return{...n,...i}}async _getMainHeader(e,n=2e3){const i=await this.bbi.read(n,0,e),r=Ir(i),s=r.getInt32(0,!0);if(s!==Y6&&s!==XC)throw new Error("not a BigWig/BigBed file");let o=0;const a=r.getInt32(o,!0);o+=4;const l=r.getUint16(o,!0);o+=2;const c=r.getUint16(o,!0);o+=2;const u=Number(r.getBigUint64(o,!0));o+=8;const f=Number(r.getBigUint64(o,!0));o+=8;const h=Number(r.getBigUint64(o,!0));o+=8;const A=r.getUint16(o,!0);o+=2;const d=r.getUint16(o,!0);o+=2;const g=Number(r.getBigUint64(o,!0));o+=8;const m=Number(r.getBigUint64(o,!0));o+=8;const p=r.getUint32(o,!0);o+=4;const w=Number(r.getBigUint64(o,!0));o+=8;const C=[];for(let b=0;b<c;b++){const S=r.getUint32(o,!0);o+=4;const D=r.getUint32(o,!0);o+=4;const v=Number(r.getBigUint64(o,!0));o+=8;const F=Number(r.getBigUint64(o,!0));o+=8,C.push({reductionLevel:S,reserved:D,dataOffset:v,indexOffset:F})}const y=a===XC?"bigbed":"bigwig";if(g>n||m>n-40)return this._getMainHeader(e,n*2);let x;if(m){const b=i.subarray(m);let S=0;const D=Ir(b),v=Number(D.getBigUint64(S,!0));S+=8;const F=D.getFloat64(S,!0);S+=8;const R=D.getFloat64(S,!0);S+=8;const M=D.getFloat64(S,!0);S+=8;const O=D.getFloat64(S,!0);S+=8,x={scoreMin:F,scoreMax:R,scoreSum:M,scoreSumSquares:O,basesCovered:v}}else throw new Error("no stats");const I=new TextDecoder("utf8");return{zoomLevels:C,magic:a,extHeaderOffset:w,numZoomLevels:c,fieldCount:A,totalSummary:x,definedFieldCount:d,uncompressBufSize:p,asOffset:g,chromTreeOffset:u,totalSummaryOffset:m,unzoomedDataOffset:f,unzoomedIndexOffset:h,fileType:y,version:l,autoSql:g?I.decode(i.subarray(g,i.indexOf(0,g))):""}}async _readChromTree(e,n){const i=[],r={},s=e.chromTreeOffset,o=Ir(await this.bbi.read(32,s,n));let a=0;a+=4,a+=4;const l=o.getUint32(a,!0);a+=4;const c=o.getUint32(a,!0);a+=4,a+=8;const u=new TextDecoder("utf8"),f=async h=>{const A=await this.bbi.read(4,h),d=Ir(A);let g=0;const m=d.getUint8(g);g+=1,g+=1;const p=d.getUint16(g,!0);if(g+=2,m){const w=await this.bbi.read(p*(l+c),h+g),C=Ir(w);g=0;for(let y=0;y<p;y++){const x=u.decode(w.subarray(g,g+l)).replaceAll("\0","");g+=l;const I=C.getUint32(g,!0);g+=4;const b=C.getUint32(g,!0);g+=4,r[this.renameRefSeqs(x)]=I,i[I]={name:x,id:I,length:b}}}else{const w=[],C=Ir(await this.bbi.read(p*(l+8),h+g));g=0;for(let y=0;y<p;y++){g+=l;const x=Number(C.getBigUint64(g,!0));g+=8,w.push(f(x))}await Promise.all(w)}};return await f(s+32),{refsByName:r,refsByNumber:i}}async getUnzoomedView(e){const{unzoomedIndexOffset:n,refsByName:i,uncompressBufSize:r,fileType:s}=await this.getHeader(e);return new WC(this.bbi,i,n,r>0,s)}async getFeatureStream(e,n,i,r){await this.getHeader(r);const s=this.renameRefSeqs(e);let o;const{basesPerSpan:a,scale:l}=r||{};return a?o=await this.getView(1/a,r):l?o=await this.getView(l,r):o=await this.getView(1,r),new yt(c=>{o.readWigData(s,n,i,c,r).catch(u=>{c.error(u)})})}async getFeatures(e,n,i,r){const s=await this.getFeatureStream(e,n,i,r);return(await YC(s.pipe(N6()))).flat()}}class V6 extends ZC{async getView(e,n){const{zoomLevels:i,refsByName:r,uncompressBufSize:s}=await this.getHeader(n),o=1/e,a=i.length-1;for(let l=a;l>=0;l-=1){const c=i[l];if(c&&c.reductionLevel<=2*o)return new WC(this.bbi,r,c.indexOffset,s>0,"summary")}return this.getUnzoomedView(n)}}function J6(t){return t.filter(e=>!!e)}class q6 extends ZC{readIndicesCache=new br({cache:new jC({maxSize:1}),fill:(e,n)=>this._readIndices({...e,signal:n})});readIndices(e={}){const{signal:n,...i}=e;return this.readIndicesCache.get(JSON.stringify(i),e,n)}async getView(e,n){return this.getUnzoomedView(n)}async _readIndices(e){const{extHeaderOffset:n}=await this.getHeader(e),i=await this.bbi.read(64,n),r=new DataView(i.buffer,i.byteOffset,i.length);let s=0;s+=2;const o=r.getUint16(s,!0);s+=2;const a=Number(r.getBigUint64(s,!0));if(s+=8,o===0)return[];const l=20,c=l*o,u=await this.bbi.read(c,a),f=[];for(let h=0;h<o;h+=1){const A=u.subarray(h*l),d=new DataView(A.buffer,A.byteOffset,A.length);let g=0;const m=d.getInt16(g,!0);g+=2;const p=d.getInt16(g,!0);g+=2;const w=Number(d.getBigUint64(g,!0));g+=12;const C=d.getInt16(g,!0);f.push({type:m,fieldcount:p,offset:w,field:C})}return f}async searchExtraIndexBlocks(e,n={}){const i=await this.readIndices(n);if(i.length===0)return[];const r=new TextDecoder("utf8"),s=i.map(async o=>{const{offset:a,field:l}=o,c=await this.bbi.read(32,a,n),u=new DataView(c.buffer,c.byteOffset,c.length);let f=0;f+=4;const h=u.getInt32(f,!0);f+=4;const A=u.getInt32(f,!0);f+=4;const d=u.getInt32(f,!0);f+=4,f+=8;const g=async m=>{const p=m,w=4+h*(A+d),y=await this.bbi.read(w,p,n),x=new DataView(y.buffer,y.byteOffset,y.length);let I=0;const b=x.getInt8(I);I+=2;const S=x.getInt16(I,!0);I+=2;const D=[];if(b===0){const v=[];for(let R=0;R<S;R++){const M=r.decode(y.subarray(I,I+A)).replaceAll("\0","");I+=A;const O=Number(x.getBigUint64(I,!0));I+=8,v.push({key:M,offset:O})}let F=0;for(const{key:R,offset:M}of v){if(e.localeCompare(R)<0&&F)return g(F);F=M}return g(F)}else if(b===1){for(let v=0;v<S;v++){const F=r.decode(y.subarray(I,I+A)).replaceAll("\0","");I+=A;const R=Number(x.getBigUint64(I,!0));I+=8;const M=x.getUint32(I,!0);I+=4;const O=x.getUint32(I,!0);I+=4,D.push({key:F,offset:R,length:M,reserved:O})}for(const v of D)if(v.key===e)return{...v,field:l};return}};return g(a+32)});return J6(await Promise.all(s))}async searchExtraIndex(e,n={}){const i=await this.searchExtraIndexBlocks(e,n);if(i.length===0)return[];const r=await this.getUnzoomedView(n),s=i.map(a=>new yt(l=>{r.readFeatures(l,[a],n).catch(c=>{l.error(c)})}).pipe(qC((l,c)=>l.concat(c)),VC(l=>{for(const c of l)c.field=a.field;return l})));return(await YC(k6(...s))).filter(a=>a.rest?.split("	")[(a.field||0)-3]===e)}}const $C=Object.freeze(Object.defineProperty({__proto__:null,BigBed:q6,BigWig:V6},Symbol.toStringTag,{value:"Module"}));function K6(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function Br(t,e,n,i){this.message=t,this.expected=e,this.found=n,this.location=i,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Br)}K6(Br,Error),Br.buildMessage=function(t,e){var n={literal:function(c){return'"'+r(c.text)+'"'},class:function(c){var u="",f;for(f=0;f<c.parts.length;f++)u+=c.parts[f]instanceof Array?s(c.parts[f][0])+"-"+s(c.parts[f][1]):s(c.parts[f]);return"["+(c.inverted?"^":"")+u+"]"},any:function(c){return"any character"},end:function(c){return"end of input"},other:function(c){return c.description}};function i(c){return c.charCodeAt(0).toString(16).toUpperCase()}function r(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+i(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+i(u)})}function s(c){return c.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+i(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+i(u)})}function o(c){return n[c.type](c)}function a(c){var u=new Array(c.length),f,h;for(f=0;f<c.length;f++)u[f]=o(c[f]);if(u.sort(),u.length>0){for(f=1,h=1;f<u.length;f++)u[f-1]!==u[f]&&(u[h]=u[f],h++);u.length=h}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}function l(c){return c?'"'+r(c)+'"':"end of input"}return"Expected "+a(t)+" but "+l(e)+" found."};function j6(t,e){e=e!==void 0?e:{};var n={},i={declaration:mb},r=mb,s="(",o=ce("(",!1),a=")",l=ce(")",!1),c=function(E,Q,T,L){return{type:E,name:Q,comment:T,fields:L}},u="simple",f=ce("simple",!1),h="object",A=ce("object",!1),d="table",g=ce("table",!1),m="auto",p=ce("auto",!1),w="primary",C=ce("primary",!1),y="index",x=ce("index",!1),I="unique",b=ce("unique",!1),S=function(E,Q){return Q},D=function(E,Q){return E.name&&Q.unshift(E),Q},v="#",F=ce("#",!1),R=";",M=ce(";",!1),O=function(E,Q,T){return{type:E,name:Q,comment:T}},z="[",_=ce("[",!1),Y="]",te=ce("]",!1),ae=function(E,Q,T,L){return{type:E,size:Q,name:T,comment:L}},ne=function(E,Q,T,L){return{type:E,vals:Q,name:T,comment:L}},_e=",",qt=ce(",",!1),vo=function(E,Q){return Q.unshift(E),Q},Ur="int",An=ce("int",!1),Ri="uint",So=ce("uint",!1),_r="short",U=ce("short",!1),K="ushort",W=ce("ushort",!1),N="byte",Ze=ce("byte",!1),se="ubyte",it=ce("ubyte",!1),$e="float",hn=ce("float",!1),Do="char",t9=ce("char",!1),$E="string",n9=ce("string",!1),eb="lstring",i9=ce("lstring",!1),tb="enum",r9=ce("enum",!1),nb="double",s9=ce("double",!1),ib="bigint",o9=ce("bigint",!1),rb="set",a9=ce("set",!1),c9=function(E,Q){return E+" "+Q},l9=/^[a-zA-Z_]/,u9=Qo([["a","z"],["A","Z"],"_"],!1,!1),sb=/^[a-zA-Z0-9_]/,ob=Qo([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),f9=function(E){return hb()},ab=/^[^\n\r]/,cb=Qo([`
`,"\r"],!0,!1),A9=function(E){return E.join("").replace(/^"/,"").replace(/"$/,"")},h9=db("integer"),lb=/^[0-9]/,ub=Qo([["0","9"]],!1,!1),d9=function(){return parseInt(hb(),10)},g9=db("whitespace"),fb=/^[ \t\n\r]/,Ab=Qo([" ","	",`
`,"\r"],!1,!1),B=0,rt=0,$c=[{line:1,column:1}],Kt=0,hh=[],V=0,el;if("startRule"in e){if(!(e.startRule in i))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');r=i[e.startRule]}function hb(){return t.substring(rt,B)}function ce(E,Q){return{type:"literal",text:E,ignoreCase:Q}}function Qo(E,Q,T){return{type:"class",parts:E,inverted:Q,ignoreCase:T}}function p9(){return{type:"end"}}function db(E){return{type:"other",description:E}}function gb(E){var Q=$c[E],T;if(Q)return Q;for(T=E-1;!$c[T];)T--;for(Q=$c[T],Q={line:Q.line,column:Q.column};T<E;)t.charCodeAt(T)===10?(Q.line++,Q.column=1):Q.column++,T++;return $c[E]=Q,Q}function pb(E,Q){var T=gb(E),L=gb(Q);return{start:{offset:E,line:T.line,column:T.column},end:{offset:Q,line:L.line,column:L.column}}}function J(E){B<Kt||(B>Kt&&(Kt=B,hh=[]),hh.push(E))}function m9(E,Q,T){return new Br(Br.buildMessage(E,Q),E,Q,T)}function mb(){var E,Q,T,L,H,Ae,ye,bt,Hn,dn,Yn,gn,Vn,pn;return E=B,Q=X(),Q!==n?(T=wb(),T!==n?(L=X(),L!==n?(H=yb(),H!==n?(Ae=X(),Ae!==n?(ye=tl(),ye!==n?(bt=X(),bt!==n?(t.charCodeAt(B)===40?(Hn=s,B++):(Hn=n,V===0&&J(o)),Hn!==n?(dn=X(),dn!==n?(Yn=w9(),Yn!==n?(gn=X(),gn!==n?(t.charCodeAt(B)===41?(Vn=a,B++):(Vn=n,V===0&&J(l)),Vn!==n?(pn=X(),pn!==n?(rt=E,Q=c(T,H,ye,Yn),E=Q):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n),E}function wb(){var E;return t.substr(B,6)===u?(E=u,B+=6):(E=n,V===0&&J(f)),E===n&&(t.substr(B,6)===h?(E=h,B+=6):(E=n,V===0&&J(A)),E===n&&(t.substr(B,5)===d?(E=d,B+=5):(E=n,V===0&&J(g)))),E}function yb(){var E,Q,T,L;return E=kt(),E===n&&(E=B,Q=kt(),Q!==n?(T=Cb(),T!==n?(Q=[Q,T],E=Q):(B=E,E=n)):(B=E,E=n),E===n&&(E=B,Q=kt(),Q!==n?(t.substr(B,4)===m?(T=m,B+=4):(T=n,V===0&&J(p)),T!==n?(Q=[Q,T],E=Q):(B=E,E=n)):(B=E,E=n),E===n&&(E=B,Q=kt(),Q!==n?(T=Cb(),T!==n?(t.substr(B,4)===m?(L=m,B+=4):(L=n,V===0&&J(p)),L!==n?(Q=[Q,T,L],E=Q):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)))),E}function Cb(){var E;return t.substr(B,7)===w?(E=w,B+=7):(E=n,V===0&&J(C)),E===n&&(t.substr(B,5)===y?(E=y,B+=5):(E=n,V===0&&J(x)),E===n&&(t.substr(B,6)===I?(E=I,B+=6):(E=n,V===0&&J(b)))),E}function tl(){var E;return E=Eb(),E===n&&(E=X()),E}function w9(){var E,Q,T,L,H,Ae,ye;if(E=B,Q=dh(),Q!==n)if(T=X(),T!==n){for(L=[],H=B,Ae=X(),Ae!==n?(ye=dh(),ye!==n?(rt=H,Ae=S(Q,ye),H=Ae):(B=H,H=n)):(B=H,H=n);H!==n;)L.push(H),H=B,Ae=X(),Ae!==n?(ye=dh(),ye!==n?(rt=H,Ae=S(Q,ye),H=Ae):(B=H,H=n)):(B=H,H=n);L!==n?(H=X(),H!==n?(rt=E,Q=D(Q,L),E=Q):(B=E,E=n)):(B=E,E=n)}else B=E,E=n;else B=E,E=n;return E}function y9(){var E;return t.charCodeAt(B)===35?(E=v,B++):(E=n,V===0&&J(F)),E}function C9(){var E,Q,T,L,H;return E=B,Q=X(),Q!==n?(T=y9(),T!==n?(L=Eb(),L!==n?(H=X(),H!==n?(Q=[Q,T,L,H],E=Q):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n),E}function dh(){var E,Q,T,L,H,Ae,ye,bt,Hn,dn,Yn,gn,Vn,pn;return E=B,Q=gh(),Q!==n?(T=X(),T!==n?(L=kt(),L!==n?(H=X(),H!==n?(t.charCodeAt(B)===59?(Ae=R,B++):(Ae=n,V===0&&J(M)),Ae!==n?(ye=X(),ye!==n?(bt=tl(),bt!==n?(rt=E,Q=O(Q,L,bt),E=Q):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n),E===n&&(E=B,Q=gh(),Q!==n?(T=X(),T!==n?(t.charCodeAt(B)===91?(L=z,B++):(L=n,V===0&&J(_)),L!==n?(H=X(),H!==n?(Ae=b9(),Ae!==n?(ye=X(),ye!==n?(t.charCodeAt(B)===93?(bt=Y,B++):(bt=n,V===0&&J(te)),bt!==n?(Hn=X(),Hn!==n?(dn=kt(),dn!==n?(Yn=X(),Yn!==n?(t.charCodeAt(B)===59?(gn=R,B++):(gn=n,V===0&&J(M)),gn!==n?(Vn=X(),Vn!==n?(pn=tl(),pn!==n?(rt=E,Q=ae(Q,Ae,dn,pn),E=Q):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n),E===n&&(E=B,Q=gh(),Q!==n?(T=X(),T!==n?(t.charCodeAt(B)===40?(L=s,B++):(L=n,V===0&&J(o)),L!==n?(H=X(),H!==n?(Ae=E9(),Ae!==n?(ye=X(),ye!==n?(t.charCodeAt(B)===41?(bt=a,B++):(bt=n,V===0&&J(l)),bt!==n?(Hn=X(),Hn!==n?(dn=kt(),dn!==n?(Yn=X(),Yn!==n?(t.charCodeAt(B)===59?(gn=R,B++):(gn=n,V===0&&J(M)),gn!==n?(Vn=X(),Vn!==n?(pn=tl(),pn!==n?(rt=E,Q=ne(Q,Ae,dn,pn),E=Q):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n)):(B=E,E=n),E===n&&(E=C9()))),E}function E9(){var E,Q,T,L,H,Ae,ye;if(E=B,Q=kt(),Q!==n){for(T=[],L=B,t.charCodeAt(B)===44?(H=_e,B++):(H=n,V===0&&J(qt)),H!==n?(Ae=X(),Ae!==n?(ye=kt(),ye!==n?(rt=L,H=S(Q,ye),L=H):(B=L,L=n)):(B=L,L=n)):(B=L,L=n);L!==n;)T.push(L),L=B,t.charCodeAt(B)===44?(H=_e,B++):(H=n,V===0&&J(qt)),H!==n?(Ae=X(),Ae!==n?(ye=kt(),ye!==n?(rt=L,H=S(Q,ye),L=H):(B=L,L=n)):(B=L,L=n)):(B=L,L=n);T!==n?(rt=E,Q=vo(Q,T),E=Q):(B=E,E=n)}else B=E,E=n;return E}function gh(){var E,Q,T,L;return t.substr(B,3)===Ur?(E=Ur,B+=3):(E=n,V===0&&J(An)),E===n&&(t.substr(B,4)===Ri?(E=Ri,B+=4):(E=n,V===0&&J(So)),E===n&&(t.substr(B,5)===_r?(E=_r,B+=5):(E=n,V===0&&J(U)),E===n&&(t.substr(B,6)===K?(E=K,B+=6):(E=n,V===0&&J(W)),E===n&&(t.substr(B,4)===N?(E=N,B+=4):(E=n,V===0&&J(Ze)),E===n&&(t.substr(B,5)===se?(E=se,B+=5):(E=n,V===0&&J(it)),E===n&&(t.substr(B,5)===$e?(E=$e,B+=5):(E=n,V===0&&J(hn)),E===n&&(t.substr(B,4)===Do?(E=Do,B+=4):(E=n,V===0&&J(t9)),E===n&&(t.substr(B,6)===$E?(E=$E,B+=6):(E=n,V===0&&J(n9)),E===n&&(t.substr(B,7)===eb?(E=eb,B+=7):(E=n,V===0&&J(i9)),E===n&&(t.substr(B,4)===tb?(E=tb,B+=4):(E=n,V===0&&J(r9)),E===n&&(t.substr(B,6)===nb?(E=nb,B+=6):(E=n,V===0&&J(s9)),E===n&&(t.substr(B,6)===ib?(E=ib,B+=6):(E=n,V===0&&J(o9)),E===n&&(t.substr(B,3)===rb?(E=rb,B+=3):(E=n,V===0&&J(a9)),E===n&&(E=B,Q=wb(),Q!==n?(T=X(),T!==n?(L=yb(),L!==n?(rt=E,Q=c9(Q,L),E=Q):(B=E,E=n)):(B=E,E=n)):(B=E,E=n))))))))))))))),E}function b9(){var E;return E=x9(),E===n&&(E=kt()),E}function kt(){var E,Q,T,L,H;if(E=B,Q=B,l9.test(t.charAt(B))?(T=t.charAt(B),B++):(T=n,V===0&&J(u9)),T!==n){for(L=[],sb.test(t.charAt(B))?(H=t.charAt(B),B++):(H=n,V===0&&J(ob));H!==n;)L.push(H),sb.test(t.charAt(B))?(H=t.charAt(B),B++):(H=n,V===0&&J(ob));L!==n?(T=[T,L],Q=T):(B=Q,Q=n)}else B=Q,Q=n;return Q!==n&&(rt=E,Q=f9()),E=Q,E}function Eb(){var E,Q,T;for(E=B,Q=[],ab.test(t.charAt(B))?(T=t.charAt(B),B++):(T=n,V===0&&J(cb));T!==n;)Q.push(T),ab.test(t.charAt(B))?(T=t.charAt(B),B++):(T=n,V===0&&J(cb));return Q!==n&&(rt=E,Q=A9(Q)),E=Q,E}function x9(){var E,Q,T,L;if(V++,E=B,Q=X(),Q!==n){if(T=[],lb.test(t.charAt(B))?(L=t.charAt(B),B++):(L=n,V===0&&J(ub)),L!==n)for(;L!==n;)T.push(L),lb.test(t.charAt(B))?(L=t.charAt(B),B++):(L=n,V===0&&J(ub));else T=n;T!==n?(rt=E,Q=d9(),E=Q):(B=E,E=n)}else B=E,E=n;return V--,E===n&&(Q=n,V===0&&J(h9)),E}function X(){var E,Q;for(V++,E=[],fb.test(t.charAt(B))?(Q=t.charAt(B),B++):(Q=n,V===0&&J(Ab));Q!==n;)E.push(Q),fb.test(t.charAt(B))?(Q=t.charAt(B),B++):(Q=n,V===0&&J(Ab));return V--,E===n&&(Q=n,V===0&&J(g9)),E}if(el=r(),el!==n&&B===t.length)return el;throw el!==n&&B<t.length&&J(p9()),m9(hh,Kt<t.length?t.charAt(Kt):null,Kt<t.length?pb(Kt,Kt+1):pb(Kt,Kt))}const e1={SyntaxError:Br,parse:j6},QA=Object.fromEntries(Object.entries(Object.freeze(Object.defineProperty({__proto__:null,bigChain:`table bigChain
"bigChain pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint score;         "Score (0-1000)"
    char[1] strand;     "+ or - for strand"
    uint tSize;         "size of target sequence"
    string qName;       "name of query sequence"
    uint qSize;         "size of query sequence"
    uint qStart;        "start of alignment on query sequence"
    uint qEnd;          "end of alignment on query sequence"
    uint chainScore;    "score from chain"
    )`,bigGenePred:`table bigGenePred
"bigGenePred gene models"
   (
   string chrom;       "Reference sequence chromosome or scaffold"
   uint   chromStart;  "Start position in chromosome"
   uint   chromEnd;    "End position in chromosome"
   string name;        "Name or ID of item, ideally both human readable and unique"
   uint score;         "Score (0-1000)"
   char[1] strand;     "+ or - for strand"
   uint thickStart;    "Start of where display should be thick (start codon)"
   uint thickEnd;      "End of where display should be thick (stop codon)"
   uint reserved;       "RGB value (use R,G,B string in input file)"
   int blockCount;     "Number of blocks"
   int[blockCount] blockSizes; "Comma separated list of block sizes"
   int[blockCount] chromStarts; "Start positions relative to chromStart"
   string name2;       "Alternative/human readable name"
   string cdsStartStat; "Status of CDS start annotation (none, unknown, incomplete, or complete)"
   string cdsEndStat;   "Status of CDS end annotation (none, unknown, incomplete, or complete)"
   int[blockCount] exonFrames; "Exon frame {0,1,2}, or -1 if no frame for exon"
   string type;        "Transcript type"
   string geneName;    "Primary identifier for gene"
   string geneName2;   "Alternative/human readable gene name"
   string geneType;    "Gene type"
   )`,bigInteract:`table interact
"interaction between two regions"
    (
    string chrom;        "Chromosome (or contig, scaffold, etc.). For interchromosomal, use 2 records"
    uint chromStart;     "Start position of lower region. For interchromosomal, set to chromStart of this region"
    uint chromEnd;       "End position of upper region. For interchromosomal, set to chromEnd of this region"
    string name;         "Name of item, for display.  Usually 'sourceName/targetName/exp' or empty"
    uint score;          "Score (0-1000)"
    double value;        "Strength of interaction or other data value. Typically basis for score"
    string exp;          "Experiment name (metadata for filtering). Use . if not applicable"
    string color;        "Item color.  Specified as r,g,b or hexadecimal #RRGGBB or html color name, as in //www.w3.org/TR/css3-color/#html4. Use 0 and spectrum setting to shade by score"
    string sourceChrom;  "Chromosome of source region (directional) or lower region. For non-directional interchromosomal, chrom of this region."
    uint sourceStart;    "Start position in chromosome of source/lower/this region"
    uint sourceEnd;      "End position in chromosome of source/lower/this region"
    string sourceName;   "Identifier of source/lower/this region"
    string sourceStrand; "Orientation of source/lower/this region: + or -.  Use . if not applicable"
    string targetChrom;  "Chromosome of target region (directional) or upper region. For non-directional interchromosomal, chrom of other region"
    uint targetStart;    "Start position in chromosome of target/upper/this region"
    uint targetEnd;      "End position in chromosome of target/upper/this region"
    string targetName;   "Identifier of target/upper/this region"
    string targetStrand; "Orientation of target/upper/this region: + or -.  Use . if not applicable"

    )`,bigLink:`table bigLink
"bigLink pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint qStart;        "start of alignment on query sequence"
    )`,bigMaf:`table bedMaf
"Bed3 with MAF block"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start position in chromosome"
    uint   chromEnd;   "End position in chromosome"
    lstring mafBlock;   "MAF block"
    )`,bigNarrowPeak:`table bigNarrowPeak
"BED6+4 Peaks of signal enrichment based on pooled, normalized (interpreted) data."
(
    string chrom;        "Reference sequence chromosome or scaffold"
    uint   chromStart;   "Start position in chromosome"
    uint   chromEnd;     "End position in chromosome"
    string name;	 "Name given to a region (preferably unique). Use . if no name is assigned"
    uint   score;        "Indicates how dark the peak will be displayed in the browser (0-1000) "
    char[1]  strand;     "+ or - or . for unknown"
    float  signalValue;  "Measurement of average enrichment for the region"
    float  pValue;       "Statistical significance of signal value (-log10). Set to -1 if not used."
    float  qValue;       "Statistical significance with multiple-test correction applied (FDR -log10). Set to -1 if not used."
    int   peak;         "Point-source called for this peak; 0-based offset from chromStart. Set to -1 if no point-source called."
)`,bigPsl:`table bigPsl
"bigPsl pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint score;         "Score (0-1000)"
    char[1] strand;     "+ or - indicates whether the query aligns to the + or - strand on the reference"
    uint thickStart;    "Start of where display should be thick (start codon)"
    uint thickEnd;      "End of where display should be thick (stop codon)"
    uint reserved;       "RGB value (use R,G,B string in input file)"
    int blockCount;     "Number of blocks"
    int[blockCount] blockSizes; "Comma separated list of block sizes"
    int[blockCount] chromStarts; "Start positions relative to chromStart"

    uint    oChromStart;"Start position in other chromosome"
    uint    oChromEnd;  "End position in other chromosome"
    char[1] oStrand;    "+ or -, - means that psl was reversed into BED-compatible coordinates"
    uint    oChromSize; "Size of other chromosome."
    int[blockCount] oChromStarts; "Start positions relative to oChromStart or from oChromStart+oChromSize depending on strand"

    lstring  oSequence;  "Sequence on other chrom (or empty)"
    string   oCDS;       "CDS in NCBI format"

    uint    chromSize;"Size of target chromosome"

    uint match;        "Number of bases matched."
    uint misMatch; " Number of bases that don't match "
    uint repMatch; " Number of bases that match but are part of repeats "
    uint nCount;   " Number of 'N' bases "
    uint seqType;    "0=empty, 1=nucleotide, 2=amino_acid"
    )`,defaultBedSchema:`table defaultBedSchema
"BED12"
    (
    string chrom;      "The name of the chromosome (e.g. chr3, chrY, chr2_random) or scaffold (e.g. scaffold10671)."
    uint   chromStart; "The starting position of the feature in the chromosome or scaffold. The first base in a chromosome is numbered 0."
    uint   chromEnd;   "The ending position of the feature in the chromosome or scaffold. The chromEnd base is not included in the display of the feature. For example, the first 100 bases of a chromosome are defined as chromStart=0, chromEnd=100, and span the bases numbered 0-99."
    string   name;   "Defines the name of the BED line."
    float   score;   "Feature score, doesn't care about the 0-1000 limit as in bed"
    char   strand;   "Defines the strand. Either '.' (=no strand) or '+' or '-'"
    uint thickStart; "The starting position at which the feature is drawn thickly (for example, the start codon in gene displays). When there is no thick part, thickStart and thickEnd are usually set to the chromStart position."
    uint thickEnd; "The ending position at which the feature is drawn thickly (for example the stop codon in gene displays)."
    string itemRgb; "An RGB value of the form R,G,B (e.g. 255,0,0). "
    uint blockCount; " The number of blocks (exons) in the BED line."
    uint[blockCount] blockSizes; " A comma-separated list of the block sizes. The number of items in this list should correspond to blockCount."
    uint[blockCount] blockStarts; "A comma-separated list of block starts. All of the blockStart positions should be calculated relative to chromStart. The number of items in this list should correspond to blockCount."
    )`,mafFrames:`table mafFrames
"codon frame assignment for MAF components"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start range in chromosome"
    uint   chromEnd;   "End range in chromosome"
    string src;        "Name of sequence source in MAF"
    ubyte frame;       "frame (0,1,2) for first base(+) or last bast(-)"
    char[1] strand;    "+ or -"
    string name;       "Name of gene used to define frame"
    int    prevFramePos;  "target position of the previous base (in transcription direction) that continues this frame, or -1 if none, or frame not contiguous"
    int    nextFramePos;  "target position of the next base (in transcription direction) that continues this frame, or -1 if none, or frame not contiguous"
    ubyte  isExonStart;  "does this start the CDS portion of an exon?"
    ubyte  isExonEnd;    "does this end the CDS portion of an exon?"
    )`,mafSummary:`table mafSummary
"Positions and scores for alignment blocks"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start position in chromosome"
    uint   chromEnd;   "End position in chromosome"
    string src;        "Sequence name or database of alignment"
    float  score;      "Floating point score."
    char[1] leftStatus;  "Gap/break annotation for preceding block"
    char[1] rightStatus; "Gap/break annotation for following block"
    )`},Symbol.toStringTag,{value:"Module"}))).map(([t,e])=>[t,e1.parse(e.trim())]));function kA(t){const e=new Set(["uint","int","float","long"]);return{...t,fields:t.fields.map(n=>({...n,isArray:n.size&&n.type!=="char",arrayIsNumeric:n.size&&e.has(n.type),isNumeric:!n.size&&e.has(n.type)})).filter(n=>!!n.name)}}const W6={".":0,"-":-1,"+":1};function X6(t){return t.length>=12&&!Number.isNaN(Number.parseInt(t[9],10))&&t[10]?.split(",").filter(e=>!!e).length===Number.parseInt(t[9],10)}class Z6{constructor(e={}){if(e.autoSql)this.autoSql=kA(e1.parse(e.autoSql));else if(e.type){if(!QA[e.type])throw new Error("Type not found");this.autoSql=kA(QA[e.type])}else this.autoSql=kA(QA.defaultBedSchema),this.attemptDefaultBed=!0}parseLine(e,n={}){const{autoSql:i}=this,{uniqueId:r}=n,s=Array.isArray(e)?e:e.split("	");let o={};if(!this.attemptDefaultBed||this.attemptDefaultBed&&X6(s))for(let a=0;a<i.fields.length;a++){const l=i.fields[a];let c=s[a];const{isNumeric:u,isArray:f,arrayIsNumeric:h,name:A}=l;if(c==null)break;if(c!=="."){if(u){const d=Number(c);c=Number.isNaN(d)?c:d}else f&&(c=c.split(","),c.at(-1)===""&&c.pop(),h&&(c=c.map(Number)));o[A]=c}}else{const a=["chrom","chromStart","chromEnd","name"];o=Object.fromEntries(s.map((l,c)=>[a[c]||"field"+c,l])),o.chromStart=+o.chromStart,o.chromEnd=+o.chromEnd,Number.isNaN(Number.parseFloat(o.field4))||(o.score=+o.field4,delete o.field4),(o.field5==="+"||o.field5==="-")&&(o.strand=o.field5,delete o.field5)}return r&&(o.uniqueId=r),o.strand=W6[o.strand]||0,o.chrom=decodeURIComponent(o.chrom),o}}const $6=Object.freeze(Object.defineProperty({__proto__:null,default:Z6},Symbol.toStringTag,{value:"Module"}));var Fe=function(t,e,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},P=function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},ue,ut,fe,Ce,Ii,ho,Bi,Bc,Qt,t1,FA,RA,NA,n1,vc;class go extends Map{constructor(e={}){if(super(),ue.add(this),ut.set(this,0),fe.set(this,new Map),Ce.set(this,new Map),Ii.set(this,void 0),ho.set(this,void 0),Bi.set(this,void 0),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");Fe(this,Ii,e.maxSize,"f"),Fe(this,ho,e.maxAge||Number.POSITIVE_INFINITY,"f"),Fe(this,Bi,e.onEviction,"f")}get __oldCache(){return P(this,Ce,"f")}get(e){if(P(this,fe,"f").has(e)){const n=P(this,fe,"f").get(e);return P(this,ue,"m",FA).call(this,e,n)}if(P(this,Ce,"f").has(e)){const n=P(this,Ce,"f").get(e);if(!P(this,ue,"m",Qt).call(this,e,n))return P(this,ue,"m",n1).call(this,e,n),n.value}}set(e,n,{maxAge:i=P(this,ho,"f")}={}){const r=typeof i=="number"&&i!==Number.POSITIVE_INFINITY?Date.now()+i:void 0;return P(this,fe,"f").has(e)?P(this,fe,"f").set(e,{value:n,expiry:r}):P(this,ue,"m",NA).call(this,e,{value:n,expiry:r}),this}has(e){return P(this,fe,"f").has(e)?!P(this,ue,"m",Qt).call(this,e,P(this,fe,"f").get(e)):P(this,Ce,"f").has(e)?!P(this,ue,"m",Qt).call(this,e,P(this,Ce,"f").get(e)):!1}peek(e){if(P(this,fe,"f").has(e))return P(this,ue,"m",RA).call(this,e,P(this,fe,"f"));if(P(this,Ce,"f").has(e))return P(this,ue,"m",RA).call(this,e,P(this,Ce,"f"))}expiresIn(e){const n=P(this,fe,"f").get(e)??P(this,Ce,"f").get(e);if(n)return n.expiry?n.expiry-Date.now():Number.POSITIVE_INFINITY}delete(e){var n;const i=P(this,fe,"f").delete(e);return i&&Fe(this,ut,(n=P(this,ut,"f"),n--,n),"f"),P(this,Ce,"f").delete(e)||i}clear(){P(this,fe,"f").clear(),P(this,Ce,"f").clear(),Fe(this,ut,0,"f")}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const n=[...P(this,ue,"m",vc).call(this)],i=n.length-e;i<0?(Fe(this,fe,new Map(n),"f"),Fe(this,Ce,new Map,"f"),Fe(this,ut,n.length,"f")):(i>0&&P(this,ue,"m",Bc).call(this,n.slice(0,i)),Fe(this,Ce,new Map(n.slice(i)),"f"),Fe(this,fe,new Map,"f"),Fe(this,ut,0,"f")),Fe(this,Ii,e,"f")}evict(e=1){const n=e;if(!n||n<=0)return;const i=[...P(this,ue,"m",vc).call(this)],r=Math.trunc(Math.min(n,Math.max(i.length-1,0)));r<=0||(P(this,ue,"m",Bc).call(this,i.slice(0,r)),Fe(this,Ce,new Map(i.slice(r)),"f"),Fe(this,fe,new Map,"f"),Fe(this,ut,0,"f"))}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[(ut=new WeakMap,fe=new WeakMap,Ce=new WeakMap,Ii=new WeakMap,ho=new WeakMap,Bi=new WeakMap,ue=new WeakSet,Bc=function(n){if(typeof P(this,Bi,"f")=="function")for(const[i,r]of n)P(this,Bi,"f").call(this,i,r.value)},Qt=function(n,i){return typeof i.expiry=="number"&&i.expiry<=Date.now()?(typeof P(this,Bi,"f")=="function"&&P(this,Bi,"f").call(this,n,i.value),this.delete(n)):!1},t1=function(n,i){if(!P(this,ue,"m",Qt).call(this,n,i))return i.value},FA=function(n,i){return i.expiry?P(this,ue,"m",t1).call(this,n,i):i.value},RA=function(n,i){const r=i.get(n);return P(this,ue,"m",FA).call(this,n,r)},NA=function(n,i){var r;P(this,fe,"f").set(n,i),Fe(this,ut,(r=P(this,ut,"f"),r++,r),"f"),P(this,ut,"f")>=P(this,Ii,"f")&&(Fe(this,ut,0,"f"),P(this,ue,"m",Bc).call(this,P(this,Ce,"f")),Fe(this,Ce,P(this,fe,"f"),"f"),Fe(this,fe,new Map,"f"))},n1=function(n,i){P(this,Ce,"f").delete(n),P(this,ue,"m",NA).call(this,n,i)},vc=function*(){for(const n of P(this,Ce,"f")){const[i,r]=n;P(this,fe,"f").has(i)||P(this,ue,"m",Qt).call(this,i,r)||(yield n)}for(const n of P(this,fe,"f")){const[i,r]=n;P(this,ue,"m",Qt).call(this,i,r)||(yield n)}},Symbol.iterator)](){for(const e of P(this,fe,"f")){const[n,i]=e;P(this,ue,"m",Qt).call(this,n,i)||(yield[n,i.value])}for(const e of P(this,Ce,"f")){const[n,i]=e;P(this,fe,"f").has(n)||P(this,ue,"m",Qt).call(this,n,i)||(yield[n,i.value])}}*entriesDescending(){let e=[...P(this,fe,"f")];for(let n=e.length-1;n>=0;--n){const i=e[n],[r,s]=i;P(this,ue,"m",Qt).call(this,r,s)||(yield[r,s.value])}e=[...P(this,Ce,"f")];for(let n=e.length-1;n>=0;--n){const i=e[n],[r,s]=i;P(this,fe,"f").has(r)||P(this,ue,"m",Qt).call(this,r,s)||(yield[r,s.value])}}*entriesAscending(){for(const[e,n]of P(this,ue,"m",vc).call(this))yield[e,n.value]}get size(){if(!P(this,ut,"f"))return P(this,Ce,"f").size;let e=0;for(const n of P(this,Ce,"f").keys())P(this,fe,"f").has(n)||e++;return Math.min(P(this,ut,"f")+e,P(this,Ii,"f"))}get maxSize(){return P(this,Ii,"f")}get maxAge(){return P(this,ho,"f")}entries(){return this.entriesAscending()}forEach(e,n=this){for(const[i,r]of this.entriesAscending())e.call(n,r,i,this)}get[Symbol.toStringTag](){return"QuickLRU"}toString(){return`QuickLRU(${this.size}/${this.maxSize})`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}let i1=class{constructor(e,n,i,r){this.minv=e,this.maxv=n,this.bin=i,this._fetchedSize=r}toUniqueString(){return`${this.minv.toString()}..${this.maxv.toString()} (bin ${this.bin}, fetchedSize ${this.fetchedSize()})`}toString(){return this.toUniqueString()}compareTo(e){return this.minv.compareTo(e.minv)||this.maxv.compareTo(e.maxv)||this.bin-e.bin}fetchedSize(){return this._fetchedSize!==void 0?this._fetchedSize:this.maxv.blockPosition+65536-this.minv.blockPosition}};const r1=65536,eP=r1*r1;function tP(t,e=0){const n=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24;return((t[e+4]|t[e+5]<<8|t[e+6]<<16|t[e+7]<<24)>>>0)*eP+(n>>>0)}function nP(t={}){return"aborted"in t?{signal:t}:t}function MA(t,e){const n=t.length;if(n===0)return t;let i;if(e){const l=e.blockPosition,c=e.dataPosition;i=[];for(let u=0;u<n;u++){const f=t[u],h=f.maxv;(h.blockPosition-l||h.dataPosition-c)>0&&i.push(f)}if(i.length===0)return i}else i=t;i.sort((l,c)=>{const u=l.minv.blockPosition-c.minv.blockPosition;return u!==0?u:l.minv.dataPosition-c.minv.dataPosition});const r=[];let s=i[0];r.push(s);let o=s.minv.blockPosition,a=s.maxv.blockPosition;for(let l=1;l<i.length;l++){const c=i[l],u=c.minv.blockPosition,f=c.maxv.blockPosition;if(u-a<65e3&&f-o<5e6){const h=c.maxv,A=s.maxv;(f-a||h.dataPosition-A.dataPosition)>0&&(s.maxv=h,a=f)}else r.push(c),s=c,o=u,a=f}return r}function s1(t,e){return{lineCount:tP(t,e)}}function po(t,e){return t?t.compareTo(e)>0?e:t:e}function iP(t,e=n=>n){let n=0,i=0;const r=[],s={};for(let o=0;o<t.length;o+=1)if(!t[o]){if(i<o){let a="";for(let l=i;l<o;l++)a+=String.fromCharCode(t[l]);a=e(a),r[n]=a,s[a]=n}i=o+1,n+=1}return{refNameToId:s,refIdToName:r}}function rP(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}function sP(t,e,n){return!!((t&e)!==e||t&n)}function oP(t,e){return e==="*"?t===void 0:`${t}`!=`${e}`}function aP(t){if(!t)return"";const{flagInclude:e=0,flagExclude:n=0,tagFilter:i}=t,r=i?`:${i.tag}=${i.value??"*"}`:"";return`:f${e}x${n}${r}`}let o1=class{constructor({filehandle:e,renameRefSeq:n=i=>i}){this.filehandle=e,this.renameRefSeq=n}async estimatedBytesForRegions(e,n){const i=await Promise.all(e.map(o=>this.blocksForRange(o.refId,o.start,o.end,n))),r=MA(i.flat());let s=0;for(const o of r)s+=o.fetchedSize();return s}},a1=class{constructor(e,n){this.blockPosition=e,this.dataPosition=n}toString(){return`${this.blockPosition}:${this.dataPosition}`}compareTo(e){return this.blockPosition-e.blockPosition||this.dataPosition-e.dataPosition}};function _n(t,e=0,n=!1){if(n)throw new Error("big-endian virtual file offsets not implemented");return new a1(t[e+7]*1099511627776+t[e+6]*4294967296+t[e+5]*16777216+t[e+4]*65536+t[e+3]*256+t[e+2],t[e+1]<<8|t[e])}const cP=21578050;function lP(t,e){return t-t%e}function uP(t,e){return t-t%e+e}function fP(t,e){return e-=1,[[0,0],[1+(t>>26),1+(e>>26)],[9+(t>>23),9+(e>>23)],[73+(t>>20),73+(e>>20)],[585+(t>>17),585+(e>>17)],[4681+(t>>14),4681+(e>>14)]]}class vr extends o1{async lineCount(e,n){return(await this.parse(n)).indices(e)?.stats?.lineCount||0}async _parse(e){const n=await this.filehandle.readFile(),i=new DataView(n.buffer);if(i.getUint32(0,!0)!==cP)throw new Error("Not a BAI file");const r=i.getInt32(4,!0),o=((1<<(5+1)*3)-1)/7;let a=8,l;const c=[];for(let h=0;h<r;h++){c.push(a);const A=i.getInt32(a,!0);a+=4;for(let m=0;m<A;m+=1){const p=i.getUint32(a,!0);if(a+=4,p===o+1)a+=4,a+=32;else{if(p>o+1)throw new Error("bai index contains too many bins, please use CSI");{const w=i.getInt32(a,!0);a+=4;for(let C=0;C<w;C++)a+=8,a+=8}}}const d=i.getInt32(a,!0);a+=4;const g=new Array(d);for(let m=0;m<d;m++){const p=_n(n,a);a+=8,l=po(l,p),g[m]=p}}const u=new go({maxSize:5});function f(h){let A=c[h];if(A===void 0)return;const d=i.getInt32(A,!0);let g;A+=4;const m={};for(let C=0;C<d;C+=1){const y=i.getUint32(A,!0);if(A+=4,y===o+1)A+=4,g=s1(n,A+16),A+=32;else{if(y>o+1)throw new Error("bai index contains too many bins, please use CSI");{const x=i.getInt32(A,!0);A+=4;const I=new Array(x);for(let b=0;b<x;b++){const S=_n(n,A);A+=8;const D=_n(n,A);A+=8,l=po(l,S),I[b]=new i1(S,D,y)}m[y]=I}}}const p=i.getInt32(A,!0);A+=4;const w=new Array(p);for(let C=0;C<p;C++){const y=_n(n,A);A+=8,l=po(l,y),w[C]=y}return{binIndex:m,linearIndex:w,stats:g}}return{bai:!0,firstDataLine:l,maxBlockSize:65536,indices:h=>{if(!u.has(h)){const A=f(h);return A&&u.set(h,A),A}return u.get(h)},refCount:r}}async indexCov(e,n,i,r){const o=n!==void 0,l=(await this.parse(r)).indices(e);if(!l)return[];const{linearIndex:c,stats:u}=l;if(c.length===0)return[];const f=i===void 0?(c.length-1)*16384:uP(i,16384),h=n===void 0?0:lP(n,16384),A=o?new Array((f-h)/16384):new Array(c.length-1),d=c[c.length-1].blockPosition;if(f>(c.length-1)*16384)throw new Error("query outside of range of linear index");let g=c[h/16384].blockPosition;for(let m=h/16384,p=0;m<f/16384;m++,p++)A[p]={score:c[m+1].blockPosition-g,start:m*16384,end:m*16384+16384},g=c[m+1].blockPosition;return A.map(m=>({...m,score:m.score*(u?.lineCount||0)/d}))}async blocksForRange(e,n,i,r={}){n<0&&(n=0);const s=await this.parse(r);if(!s)return[];const o=s.indices(e);if(!o)return[];const a=fP(n,i),l=[],{binIndex:c}=o;for(const[d,g]of a)for(let m=d;m<=g;m++){const p=c[m];if(p)for(let w=0,C=p.length;w<C;w++)l.push(p[w])}const{linearIndex:u}=o,f=u.length,h=Math.min(n>>14,f-1),A=u[h];return MA(l,A)}async parse(e={}){return this.setupP||(this.setupP=this._parse(e).catch(n=>{throw this.setupP=void 0,n})),this.setupP}async hasRefSeq(e,n={}){return!!(await this.parse(n)).indices(e)?.binIndex}}var c1=0,l1=2,Sc=4,vi=0,Dc=1,AP=2,hP=-5;function dP(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function gP(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(var i in n)dP(n,i)&&(t[i]=n[i])}}return t}function u1(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)}var mo={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray){t.set(e.subarray(n,n+i),r);return}for(var s=0;s<i;s++)t[r+s]=e[n+s]},flattenChunks:function(t){var e,n,i,r,s,o;for(i=0,e=0,n=t.length;e<n;e++)i+=t[e].length;for(o=new Uint8Array(i),r=0,e=0,n=t.length;e<n;e++)s=t[e],o.set(s,r),r+=s.length;return o},Buf8:function(t){return new Uint8Array(t)},Buf16:function(t){return new Uint16Array(t)},Buf32:function(t){return new Int32Array(t)}},wo={arraySet:function(t,e,n,i,r){for(var s=0;s<i;s++)t[r+s]=e[n+s]},flattenChunks:function(t){return[].concat.apply([],t)},Buf8:function(t){return new Array(t)},Buf16:function(t){return new Array(t)},Buf32:function(t){return new Array(t)}};let Sr=()=>{const t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";return Sr=()=>t,t},Gn=(t,e,n,i,r)=>(Gn=Sr()?mo.arraySet:wo.arraySet,Gn(t,e,n,i,r)),TA=t=>(TA=Sr()?mo.flattenChunks:wo.flattenChunks,TA(t)),Dr=t=>(Dr=Sr()?mo.Buf8:wo.Buf8,Dr(t)),Qr=t=>(Qr=Sr()?mo.Buf16:wo.Buf16,Qr(t)),kr=t=>(kr=Sr()?mo.Buf32:wo.Buf32,kr(t)),f1=function(){let t=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}return f1=()=>t,t},A1=function(){let t=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{t=!1}return A1=()=>t,t},PA=function(t){for(var e=Dr(256),n=0;n<256;n++)e[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;return e[254]=e[254]=1,PA=i=>e[i],e[t]};function h1(t){var e,n,i,r,s,o=t.length,a=0;for(r=0;r<o;r++)n=t.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=t.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(a),s=0,r=0;s<a;r++)n=t.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=t.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|n&63):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|n&63):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|n&63);return e}function pP(t,e){if(e<65534&&(t.subarray&&A1()||!t.subarray&&f1()))return String.fromCharCode.apply(null,u1(t,e));for(var n="",i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n}function mP(t){for(var e=new Uint8Array(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e}function wP(t,e){var n,i,r,s,o=e||t.length,a=new Array(o*2);for(i=0,n=0;n<o;){if(r=t[n++],r<128){a[i++]=r;continue}if(s=PA(r),s>4){a[i++]=65533,n+=s-1;continue}for(r&=s===2?31:s===3?15:7;s>1&&n<o;)r=r<<6|t[n++]&63,s--;if(s>1){a[i++]=65533;continue}r<65536?a[i++]=r:(r-=65536,a[i++]=55296|r>>10&1023,a[i++]=56320|r&1023)}return pP(a,i)}function yP(t,e){var n;for(e=e||t.length,e>t.length&&(e=t.length),n=e-1;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+PA(t[n])>e?n:e}function CP(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}function LA(t,e,n,i){for(var r=t&65535|0,s=t>>>16&65535|0,o=0;n!==0;){o=n>2e3?2e3:n,n-=o;do r=r+e[i++]|0,s=s+r|0;while(--o);r%=65521,s%=65521}return r|s<<16|0}function EP(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e}let d1=function(){const t=EP();return d1=()=>t,t};function Vt(t,e,n,i){var r=d1(),s=i+n;t^=-1;for(var o=i;o<s;o++)t=t>>>8^r[(t^e[o])&255];return t^-1}var Qc=30,bP=12;function xP(t,e){var n,i,r,s,o,a,l,c,u,f,h,A,d,g,m,p,w,C,y,x,I,b,S,D,v;n=t.state,i=t.next_in,D=t.input,r=i+(t.avail_in-5),s=t.next_out,v=t.output,o=s-(e-t.avail_out),a=s+(t.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,f=n.wnext,h=n.window,A=n.hold,d=n.bits,g=n.lencode,m=n.distcode,p=(1<<n.lenbits)-1,w=(1<<n.distbits)-1;e:do{d<15&&(A+=D[i++]<<d,d+=8,A+=D[i++]<<d,d+=8),C=g[A&p];t:for(;;){if(y=C>>>24,A>>>=y,d-=y,y=C>>>16&255,y===0)v[s++]=C&65535;else if(y&16){x=C&65535,y&=15,y&&(d<y&&(A+=D[i++]<<d,d+=8),x+=A&(1<<y)-1,A>>>=y,d-=y),d<15&&(A+=D[i++]<<d,d+=8,A+=D[i++]<<d,d+=8),C=m[A&w];n:for(;;){if(y=C>>>24,A>>>=y,d-=y,y=C>>>16&255,y&16){if(I=C&65535,y&=15,d<y&&(A+=D[i++]<<d,d+=8,d<y&&(A+=D[i++]<<d,d+=8)),I+=A&(1<<y)-1,I>l){t.msg="invalid distance too far back",n.mode=Qc;break e}if(A>>>=y,d-=y,y=s-o,I>y){if(y=I-y,y>u&&n.sane){t.msg="invalid distance too far back",n.mode=Qc;break e}if(b=0,S=h,f===0){if(b+=c-y,y<x){x-=y;do v[s++]=h[b++];while(--y);b=s-I,S=v}}else if(f<y){if(b+=c+f-y,y-=f,y<x){x-=y;do v[s++]=h[b++];while(--y);if(b=0,f<x){y=f,x-=y;do v[s++]=h[b++];while(--y);b=s-I,S=v}}}else if(b+=f-y,y<x){x-=y;do v[s++]=h[b++];while(--y);b=s-I,S=v}for(;x>2;)v[s++]=S[b++],v[s++]=S[b++],v[s++]=S[b++],x-=3;x&&(v[s++]=S[b++],x>1&&(v[s++]=S[b++]))}else{b=s-I;do v[s++]=v[b++],v[s++]=v[b++],v[s++]=v[b++],x-=3;while(x>2);x&&(v[s++]=v[b++],x>1&&(v[s++]=v[b++]))}}else if((y&64)===0){C=m[(C&65535)+(A&(1<<y)-1)];continue n}else{t.msg="invalid distance code",n.mode=Qc;break e}break}}else if((y&64)===0){C=g[(C&65535)+(A&(1<<y)-1)];continue t}else if(y&32){n.mode=bP;break e}else{t.msg="invalid literal/length code",n.mode=Qc;break e}break}}while(i<r&&s<a);x=d>>3,i-=x,d-=x<<3,A&=(1<<d)-1,t.next_in=i,t.next_out=s,t.avail_in=i<r?5+(r-i):5-(i-r),t.avail_out=s<a?257+(a-s):257-(s-a),n.hold=A,n.bits=d}var Fr=15,g1=852,p1=592,m1=0,OA=1,w1=2,IP=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],BP=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],vP=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],SP=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function yo(t,e,n,i,r,s,o,a){var l=a.bits,c=0,u=0,f=0,h=0,A=0,d=0,g=0,m=0,p=0,w=0,C,y,x,I,b,S=null,D=0,v,F=Qr(Fr+1),R=Qr(Fr+1),M=null,O=0,z,_,Y;for(c=0;c<=Fr;c++)F[c]=0;for(u=0;u<i;u++)F[e[n+u]]++;for(A=l,h=Fr;h>=1&&F[h]===0;h--);if(A>h&&(A=h),h===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,a.bits=1,0;for(f=1;f<h&&F[f]===0;f++);for(A<f&&(A=f),m=1,c=1;c<=Fr;c++)if(m<<=1,m-=F[c],m<0)return-1;if(m>0&&(t===m1||h!==1))return-1;for(R[1]=0,c=1;c<Fr;c++)R[c+1]=R[c]+F[c];for(u=0;u<i;u++)e[n+u]!==0&&(o[R[e[n+u]]++]=u);if(t===m1?(S=M=o,v=19):t===OA?(S=IP,D-=257,M=BP,O-=257,v=256):(S=vP,M=SP,v=-1),w=0,u=0,c=f,b=s,d=A,g=0,x=-1,p=1<<A,I=p-1,t===OA&&p>g1||t===w1&&p>p1)return 1;for(;;){z=c-g,o[u]<v?(_=0,Y=o[u]):o[u]>v?(_=M[O+o[u]],Y=S[D+o[u]]):(_=96,Y=0),C=1<<c-g,y=1<<d,f=y;do y-=C,r[b+(w>>g)+y]=z<<24|_<<16|Y|0;while(y!==0);for(C=1<<c-1;w&C;)C>>=1;if(C!==0?(w&=C-1,w+=C):w=0,u++,--F[c]===0){if(c===h)break;c=e[n+o[u]]}if(c>A&&(w&I)!==x){for(g===0&&(g=A),b+=f,d=c-g,m=1<<d;d+g<h&&(m-=F[d+g],!(m<=0));)d++,m<<=1;if(p+=1<<d,t===OA&&p>g1||t===w1&&p>p1)return 1;x=w&I,r[x]=A<<24|d<<16|b-s|0}}return w!==0&&(r[b+w]=c-g<<24|64<<16|0),a.bits=A,0}var DP=0,y1=1,C1=2,E1=4,Si=0,QP=1,kP=2,Ct=-2,b1=-3,x1=-4,FP=-5,I1=8,B1=1,v1=2,S1=3,D1=4,Q1=5,k1=6,F1=7,R1=8,N1=9,M1=10,kc=11,un=12,UA=13,T1=14,_A=15,P1=16,L1=17,O1=18,U1=19,Fc=20,Rc=21,_1=22,G1=23,z1=24,H1=25,Y1=26,GA=27,V1=28,J1=29,we=30,q1=31,RP=32,NP=852,MP=592;function K1(t){return(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24)}function TP(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=Qr(320),this.work=Qr(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function PP(t){var e;return!t||!t.state?Ct:(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=B1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=kr(NP),e.distcode=e.distdyn=kr(MP),e.sane=1,e.back=-1,Si)}function LP(t){var e;return!t||!t.state?Ct:(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,PP(t))}function OP(t,e){var n,i;return!t||!t.state||(i=t.state,e<0?(n=0,e=-e):(n=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?Ct:(i.window!==null&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,LP(t))}function UP(t,e){var n,i;return t?(i=new TP,t.state=i,i.window=null,n=OP(t,e),n!==Si&&(t.state=null),n):Ct}var j1=!0,zA,HA;function _P(t){if(j1){var e;for(zA=kr(512),HA=kr(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(yo(y1,t.lens,0,288,zA,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;yo(C1,t.lens,0,32,HA,0,t.work,{bits:5}),j1=!1}t.lencode=zA,t.lenbits=9,t.distcode=HA,t.distbits=5}function W1(t,e,n,i){var r,s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=Dr(s.wsize)),i>=s.wsize?(Gn(s.window,e,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),Gn(s.window,e,n-i,r,s.wnext),i-=r,i?(Gn(s.window,e,n-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0}function GP(t,e){var n,i,r,s,o,a,l,c,u,f,h,A,d,g,m=0,p,w,C,y,x,I,b,S,D=Dr(4),v,F,R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return Ct;n=t.state,n.mode===un&&(n.mode=UA),o=t.next_out,r=t.output,l=t.avail_out,s=t.next_in,i=t.input,a=t.avail_in,c=n.hold,u=n.bits,f=a,h=l,S=Si;e:for(;;)switch(n.mode){case B1:if(n.wrap===0){n.mode=UA;break}for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.wrap&2&&c===35615){n.check=0,D[0]=c&255,D[1]=c>>>8&255,n.check=Vt(n.check,D,2,0),c=0,u=0,n.mode=v1;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=we;break}if((c&15)!==I1){t.msg="unknown compression method",n.mode=we;break}if(c>>>=4,u-=4,b=(c&15)+8,n.wbits===0)n.wbits=b;else if(b>n.wbits){t.msg="invalid window size",n.mode=we;break}n.dmax=1<<b,t.adler=n.check=1,n.mode=c&512?M1:un,c=0,u=0;break;case v1:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==I1){t.msg="unknown compression method",n.mode=we;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=we;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&(D[0]=c&255,D[1]=c>>>8&255,n.check=Vt(n.check,D,2,0)),c=0,u=0,n.mode=S1;case S1:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&(D[0]=c&255,D[1]=c>>>8&255,D[2]=c>>>16&255,D[3]=c>>>24&255,n.check=Vt(n.check,D,4,0)),c=0,u=0,n.mode=D1;case D1:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&(D[0]=c&255,D[1]=c>>>8&255,n.check=Vt(n.check,D,2,0)),c=0,u=0,n.mode=Q1;case Q1:if(n.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&(D[0]=c&255,D[1]=c>>>8&255,n.check=Vt(n.check,D,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=k1;case k1:if(n.flags&1024&&(A=n.length,A>a&&(A=a),A&&(n.head&&(b=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Gn(n.head.extra,i,s,A,b)),n.flags&512&&(n.check=Vt(n.check,i,A,s)),a-=A,s+=A,n.length-=A),n.length))break e;n.length=0,n.mode=F1;case F1:if(n.flags&2048){if(a===0)break e;A=0;do b=i[s+A++],n.head&&b&&n.length<65536&&(n.head.name+=String.fromCharCode(b));while(b&&A<a);if(n.flags&512&&(n.check=Vt(n.check,i,A,s)),a-=A,s+=A,b)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=R1;case R1:if(n.flags&4096){if(a===0)break e;A=0;do b=i[s+A++],n.head&&b&&n.length<65536&&(n.head.comment+=String.fromCharCode(b));while(b&&A<a);if(n.flags&512&&(n.check=Vt(n.check,i,A,s)),a-=A,s+=A,b)break e}else n.head&&(n.head.comment=null);n.mode=N1;case N1:if(n.flags&512){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(n.check&65535)){t.msg="header crc mismatch",n.mode=we;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=un;break;case M1:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.adler=n.check=K1(c),c=0,u=0,n.mode=kc;case kc:if(n.havedict===0)return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,kP;t.adler=n.check=1,n.mode=un;case un:case UA:if(n.last){c>>>=u&7,u-=u&7,n.mode=GA;break}for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=T1;break;case 1:_P(n),n.mode=Fc;break;case 2:n.mode=L1;break;case 3:t.msg="invalid block type",n.mode=we}c>>>=2,u-=2;break;case T1:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=we;break}n.length=c&65535,c=0,u=0,n.mode=_A;case _A:n.mode=P1;case P1:if(A=n.length,A){if(A>a&&(A=a),A>l&&(A=l),A===0)break e;Gn(r,i,s,A,o),a-=A,s+=A,l-=A,o+=A,n.length-=A;break}n.mode=un;break;case L1:for(;u<14;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=we;break}n.have=0,n.mode=O1;case O1:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.lens[R[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[R[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,v={bits:n.lenbits},S=yo(DP,n.lens,0,19,n.lencode,0,n.work,v),n.lenbits=v.bits,S){t.msg="invalid code lengths set",n.mode=we;break}n.have=0,n.mode=U1;case U1:for(;n.have<n.nlen+n.ndist;){for(;m=n.lencode[c&(1<<n.lenbits)-1],p=m>>>24,w=m>>>16&255,C=m&65535,!(p<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(C<16)c>>>=p,u-=p,n.lens[n.have++]=C;else{if(C===16){for(F=p+2;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c>>>=p,u-=p,n.have===0){t.msg="invalid bit length repeat",n.mode=we;break}b=n.lens[n.have-1],A=3+(c&3),c>>>=2,u-=2}else if(C===17){for(F=p+3;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=p,u-=p,b=0,A=3+(c&7),c>>>=3,u-=3}else{for(F=p+7;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=p,u-=p,b=0,A=11+(c&127),c>>>=7,u-=7}if(n.have+A>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=we;break}for(;A--;)n.lens[n.have++]=b}}if(n.mode===we)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=we;break}if(n.lenbits=9,v={bits:n.lenbits},S=yo(y1,n.lens,0,n.nlen,n.lencode,0,n.work,v),n.lenbits=v.bits,S){t.msg="invalid literal/lengths set",n.mode=we;break}if(n.distbits=6,n.distcode=n.distdyn,v={bits:n.distbits},S=yo(C1,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,v),n.distbits=v.bits,S){t.msg="invalid distances set",n.mode=we;break}n.mode=Fc;case Fc:n.mode=Rc;case Rc:if(a>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,xP(t,h),o=t.next_out,r=t.output,l=t.avail_out,s=t.next_in,i=t.input,a=t.avail_in,c=n.hold,u=n.bits,n.mode===un&&(n.back=-1);break}for(n.back=0;m=n.lencode[c&(1<<n.lenbits)-1],p=m>>>24,w=m>>>16&255,C=m&65535,!(p<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(w&&(w&240)===0){for(y=p,x=w,I=C;m=n.lencode[I+((c&(1<<y+x)-1)>>y)],p=m>>>24,w=m>>>16&255,C=m&65535,!(y+p<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=y,u-=y,n.back+=y}if(c>>>=p,u-=p,n.back+=p,n.length=C,w===0){n.mode=Y1;break}if(w&32){n.back=-1,n.mode=un;break}if(w&64){t.msg="invalid literal/length code",n.mode=we;break}n.extra=w&15,n.mode=_1;case _1:if(n.extra){for(F=n.extra;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=G1;case G1:for(;m=n.distcode[c&(1<<n.distbits)-1],p=m>>>24,w=m>>>16&255,C=m&65535,!(p<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((w&240)===0){for(y=p,x=w,I=C;m=n.distcode[I+((c&(1<<y+x)-1)>>y)],p=m>>>24,w=m>>>16&255,C=m&65535,!(y+p<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=y,u-=y,n.back+=y}if(c>>>=p,u-=p,n.back+=p,w&64){t.msg="invalid distance code",n.mode=we;break}n.offset=C,n.extra=w&15,n.mode=z1;case z1:if(n.extra){for(F=n.extra;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=we;break}n.mode=H1;case H1:if(l===0)break e;if(A=h-l,n.offset>A){if(A=n.offset-A,A>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=we;break}A>n.wnext?(A-=n.wnext,d=n.wsize-A):d=n.wnext-A,A>n.length&&(A=n.length),g=n.window}else g=r,d=o-n.offset,A=n.length;A>l&&(A=l),l-=A,n.length-=A;do r[o++]=g[d++];while(--A);n.length===0&&(n.mode=Rc);break;case Y1:if(l===0)break e;r[o++]=n.length,l--,n.mode=Rc;break;case GA:if(n.wrap){for(;u<32;){if(a===0)break e;a--,c|=i[s++]<<u,u+=8}if(h-=l,t.total_out+=h,n.total+=h,h&&(t.adler=n.check=n.flags?Vt(n.check,r,h,o-h):LA(n.check,r,h,o-h)),h=l,(n.flags?c:K1(c))!==n.check){t.msg="incorrect data check",n.mode=we;break}c=0,u=0}n.mode=V1;case V1:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=we;break}c=0,u=0}n.mode=J1;case J1:S=QP;break e;case we:S=b1;break e;case q1:return x1;case RP:default:return Ct}return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,(n.wsize||h!==t.avail_out&&n.mode<we&&(n.mode<GA||e!==E1))&&W1(t,t.output,t.next_out,h-t.avail_out),f-=t.avail_in,h-=t.avail_out,t.total_in+=f,t.total_out+=h,n.total+=h,n.wrap&&h&&(t.adler=n.check=n.flags?Vt(n.check,r,h,t.next_out-h):LA(n.check,r,h,t.next_out-h)),t.data_type=n.bits+(n.last?64:0)+(n.mode===un?128:0)+(n.mode===Fc||n.mode===_A?256:0),(f===0&&h===0||e===E1)&&S===Si&&(S=FP),S}function zP(t){if(!t||!t.state)return Ct;var e=t.state;return e.window&&(e.window=null),t.state=null,Si}function HP(t,e){var n;return!t||!t.state||(n=t.state,(n.wrap&2)===0)?Ct:(n.head=e,e.done=!1,Si)}function X1(t,e){var n=e.length,i,r,s;return!t||!t.state||(i=t.state,i.wrap!==0&&i.mode!==kc)?Ct:i.mode===kc&&(r=1,r=LA(r,e,n,0),r!==i.check)?b1:(s=W1(t,e,n,n),s?(i.mode=q1,x1):(i.havedict=1,Si))}const YA={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function YP(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var VA=Object.prototype.toString;class Nc{constructor(e){if(!(this instanceof Nc))return new Nc(e);this.options=gP({chunkSize:16384,windowBits:0,to:""},e||{});var n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(e&&e.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15)===0&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new YP,this.strm.avail_out=0;var i=UP(this.strm,n.windowBits);if(i!==vi)throw new Error(YA[i]);if(this.header=new CP,HP(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=h1(n.dictionary):VA.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(i=X1(this.strm,n.dictionary),i!==vi)))throw new Error(YA[i])}push(e,n){var i=this.strm,r=this.options.chunkSize,s=this.options.dictionary,o,a,l,c,u,f,h=!1;if(this.ended)return!1;a=n===~~n?n:n===!0?Sc:c1,typeof e=="string"?i.input=mP(e):VA.call(e)==="[object ArrayBuffer]"?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(i.avail_out===0&&(i.output=Dr(r),i.next_out=0,i.avail_out=r),o=GP(i,c1),o===AP&&s&&(typeof s=="string"?f=h1(s):VA.call(s)==="[object ArrayBuffer]"?f=new Uint8Array(s):f=s,o=X1(this.strm,f)),o===hP&&h===!0&&(o=vi,h=!1),o!==Dc&&o!==vi)return this.onEnd(o),this.ended=!0,!1;i.next_out&&(i.avail_out===0||o===Dc||i.avail_in===0&&(a===Sc||a===l1))&&(this.options.to==="string"?(l=yP(i.output,i.next_out),c=i.next_out-l,u=wP(i.output,l),i.next_out=c,i.avail_out=r-c,c&&Gn(i.output,i.output,l,c,0),this.onData(u)):this.onData(u1(i.output,i.next_out))),i.avail_in===0&&i.avail_out===0&&(h=!0)}while((i.avail_in>0||i.avail_out===0)&&o!==Dc);return o===Dc&&(a=Sc),a===Sc?(o=zP(this.strm),this.onEnd(o),this.ended=!0,o===vi):(a===l1&&(this.onEnd(vi),i.avail_out=0),!0)}onData(e){this.chunks.push(e)}onEnd(e){e===vi&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=TA(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg}}function VP(t,e){var n=new Nc(e);if(n.push(t,!0),n.err)throw n.msg||YA[n.err];return n.result}var JP=VP,Di={};Di.d=(t,e)=>{for(var n in e)Di.o(e,n)&&!Di.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},Di.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Di.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var JA={};Di.r(JA),Di.d(JA,{ChunkSliceResult:()=>Nr,DecompressResult:()=>Mr,__wbg_Error_52673b7de5a0ca89:()=>tL,__wbg___wbindgen_throw_dd24417ed36fc46e:()=>nL,__wbg_set_wasm:()=>Z1,decompress_all:()=>iE,decompress_block:()=>eL,decompress_chunk_slice:()=>rE});const qP="data:application/wasm;base64,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fGooAgAiAkF4cSIAaiEDAkACQCACQQFxDQAgAkECcUUNASABKAIAIgIgAGohAAJAIAEgAmsiAUEAKALAoEBHDQAgAygCBEEDcUEDRw0BQQAgADYCuKBAIAMgAygCBEF+cTYCBCABIABBAXI2AgQgAyAANgIADwsgASACEBALAkACQAJAAkACQAJAIAMoAgQiAkECcQ0AIANBACgCxKBARg0CIANBACgCwKBARg0DIAMgAkF4cSICEBAgASACIABqIgBBAXI2AgQgASAAaiAANgIAIAFBACgCwKBARw0BQQAgADYCuKBADwsgAyACQX5xNgIEIAEgAEEBcjYCBCABIABqIAA2AgALIABBgAJJDQIgASAAEBFBACEBQQBBACgC2KBAQX9qIgA2AtigQCAADQQCQEEAKAKgnkAiAEUNAEEAIQEDQCABQQFqIQEgACgCCCIADQALC0EAIAFB/x8gAUH/H0sbNgLYoEAPC0EAIAE2AsSgQEEAQQAoArygQCAAaiIANgK8oEAgASAAQQFyNgIEAkAgAUEAKALAoEBHDQBBAEEANgK4oEBBAEEANgLAoEALIABBACgC0KBAIgRNDQNBACgCxKBAIgBFDQNBACECQQAoArygQCIFQSlJDQJBmJ7AACEBA0ACQCABKAIAIgMgAEsNACAAIAMgASgCBGpJDQQLIAEoAgghAQwACwtBACABNgLAoEBBAEEAKAK4oEAgAGoiADYCuKBAIAEgAEEBcjYCBCABIABqIAA2AgAPCwJAAkBBACgCsKBAIgNBASAAQQN2dCICcQ0AQQAgAyACcjYCsKBAIABB+AFxQaiewABqIgAhAwwBCyAAQfgBcSIDQaiewABqIQAgA0GwnsAAaigCACEDCyAAIAE2AgggAyABNgIMIAEgADYCDCABIAM2AggPCwJAQQAoAqCeQCIBRQ0AQQAhAgNAIAJBAWohAiABKAIIIgENAAsLQQAgAkH/HyACQf8fSxs2AtigQCAFIARNDQBBAEF/NgLQoEALC44FAQd/AkACQCAAKAIIIgNBgICAwAFxRQ0AAkACQAJAAkACQCADQYCAgIABcUUNACAALwEOIgQNAUEAIQIMAgsCQCACQRBJDQAgASACEAYhBQwECwJAIAINAEEAIQJBACEFDAQLIAJBA3EhBgJAAkAgAkEETw0AQQAhBUEAIQcMAQsg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IgJBAWoiAzYCACADRQ0BIAAoAgBBf0YNAiAAKAIQIQAgASACNgIAIAAPCxBdCwALEF8AC1ABAX8CQCACIAAoAgAgACgCCCIDa00NACAAIAMgAkEBQQEQFyAAKAIIIQMLAkAgAkUNACAAKAIEIANqIAEgAvwKAAALIAAgAyACajYCCEEAC0wBAX8CQCAAKAIAIgBBDGooAgAiAUUNACAAQRBqKAIAIAFBARBXCwJAIABBf0YNACAAIAAoAgRBf2oiATYCBCABDQAgAEEcQQQQVwsLRQACQAJAIAFBCUkNACABIAAQDyEBDAELIAAQAiEBCwJAIAFFDQAgAUF8ai0AAEEDcUUNACAARQ0AIAFBACAA/AsACyABC1IBAn9BACEBQQBBACgC6KBAIgJBAWo2AuigQAJAIAJBAEgNAEEBIQFBAC0A5KBADQBBACAAOgDkoEBBAEEAKALgoEBBAWo2AuCgQEECIQELIAELRwECfyABKAIEIQIgASgCACEDEGsCQEEIQQQQWiIBDQBBBEEIEGEACyABIAI2AgQgASADNgIAIABB8JfAADYCBCAAIAE2AgALOAACQAJAIAAgAksNACABIAJLDQEgACABTQ0BIAAgASADECsACyAAIAIgAxAsAAsgASACIAMQLQALQQEBfyMAQSBrIgMkACADQQA2AhAgA0EBNgIEIANCBDcCCCADIAE2AhwgAyAANgIYIAMgA0EYajYCACADIAIQQQALOQACQCACQYCAxABGDQAgACACIAEoAhARBQBFDQBBAQ8LAkAgAw0AQQAPCyAAIAMgBCABKAIMEQcACzYBAX8jAEEgayIBJAAgAUEANgIYIAFBATYCDCABQaSZwAA2AgggAUIENwIQIAFBCGogABBBAAsnAAJAIAAgARBPRQ0AAkAgAEUNABBrIAAgARBaIgFFDQELIAEPCwALLAIBfwF+IwBBEGsiASQAIAApAgAhAiABIAA2AgwgASACNwIEIAFBBGoQZgALLQEBfyMAQRBrIgEkACABIAApAgA3AgggAUEIakH0lsAAIAAoAghBAUEAECEACyoBAX8jAEEQayIDJAAgAyACNgIMIAMgATYCCCADIAA2AgQgA0EEahBnAAsqAQF/IwBBEGsiAiQAIAJBATsBDCACIAE2AgggAiAANgIEIAJBBGoQPgALKQEBfwJAIAAoAgAiAUGAgICAeHJBgICAgHhGDQAgACgCBCABQQEQVwsLHgEBfwJAIAAoAgAiAkUNACABIAIgACgCBBBTDwsACyAAAkAgASgCAEUNACAAQfCXwAA2AgQgACABNgIADwsACxsBAX8QayAAQQRqQQQQWiIBIAA2AgAgAUEEagsjAQF/AkBBjIvAABAwIgANAEHAisAAQTpB/IrAABBAAAsgAAsXAAJAIAFBCUkNACABIAAQDw8LIAAQAgsfAAJAIABBgICAgHhyQYCAgIB4Rg0AIAEgAEEBEFcLCxwBAX8CQCAAKAIAIgFFDQAgACgCBCABQQEQVwsLFgACQCAARQ0AIAAgARBhAAsgAhA8AAsVACAAQXxqIgAgACgCAEEEakEEEFcLGgEBfyABIABBACgC3KBAIgJBAyACGxEEAAALHQAgAEEIakEAKQKYlkA3AgAgAEEAKQKQlkA3AgALHQAgAEEIakEAKQKolkA3AgAgAEEAKQKglkA3AgALFQAgAWlBAUYgAEGAgICAeCABa01xCxIAAkAgAUUNACAAIAEgAhBXCwsSACAAIAEgAiADIARBACAFEAMLFQACQCAARQ0AIAAgACgCqFoRAgALCxYAIAAoAgAgASACIAAoAgQoAgwRBwALDQAgACABIAIgAxAHDwsQACABIAAoAgAgACgCBBBTCxMAIABB8JfAADYCBCAAIAE2AgALCwAgACABIAIQLw8LCgAgACABEGoaAAsLACAAIwBqJAAjAAsJACAAIAEQRw8LCQAgACABEDYPCwkAIAAgARBMDwsMAEG4iMAAQRsQXgALCQAgACABEGMACw0AQdOIwABBzwAQXgALDAAgACABKQIANwMACwkAIAEgABBcAAsNACABQdicwABBGBAKCwgAIAAgARAACwgAIAAgARABCwkAIAAoAgAQUgsHACAAECMACwcAIAAQPwALCQAgAEEANgIACwUAQQAPCwUAEGwACwMADwsDAAALC4YdAgBBgIDAAAvwHC9ob21lL2NkaWVzaC8uY2FyZ28vcmVnaXN0cnkvc3JjL2luZGV4LmNyYXRlcy5pby0xOTQ5Y2Y4YzZiNWI1NTdmL3dhc20tYmluZGdlbi0wLjIuMTA2L3NyYy9jb252ZXJ0L3NsaWNlcy5ycwAvaG9tZS9jZGllc2gvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9pbmRleC5jcmF0ZXMuaW8tMTk0OWNmOGM2YjViNTU3Zi93YXNtLWJpbmRnZW4tMC4yLjEwNi9zcmMvZXh0ZXJucmVmLnJzAC9ob21lL2NkaWVzaC8ucnVzdHVwL3Rvb2xjaGFpbnMvc3RhYmxlLXg4Nl82NC11bmtub3duLWxpbnV4LWdudS9saWIvcnVzdGxpYi9zcmMvcnVzdC9saWJyYXJ5L2FsbG9jL3NyYy9zbGljZS5ycwAvaG9tZS9jZGllc2gvLnJ1c3R1cC90b29sY2hhaW5zL3N0YWJsZS14ODZfNjQtdW5rbm93bi1saW51eC1nbnUvbGliL3J1c3RsaWIvc3JjL3J1c3QvbGlicmFyeS9hbGxvYy9zcmMvcmF3X3ZlYy9tb2QucnMAL3J1c3RjL2VkNjFlN2Q3ZTI0MjQ5NGZiNzA1N2YyNjU3MzAwZDllNzdiYjRmY2IvbGlicmFyeS9hbGxvYy9zcmMvcmF3X3ZlYy9tb2QucnMAL3J1c3QvZGVwcy9kbG1hbGxvYy0wLjIuMTAvc3JjL2RsbWFsbG9jLnJzAGxpYnJhcnkvc3RkL3NyYy9hbGxvYy5ycwAvaG9tZS9jZGllc2gvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9pbmRleC5jcmF0ZXMuaW8tMTk0OWNmOGM2YjViNTU3Zi9saWJkZWZsYXRlci0xLjI1LjAvc3JjL2xpYi5ycwBFARAAdQAAACoCAAARAAAA1QAQAG8AAAC9AQAAHQAAAGF0dGVtcHRlZCB0byB0YWtlIG93bmVyc2hpcCBvZiBSdXN0IHZhbHVlIHdoaWxlIGl0IHdhcyBib3Jyb3dlZAClAhAACgAAAF0AAAAWAAAAaW52YWxpZCBiZ3pmIGhlYWRlcgClAhAACgAAACkAAAAJAAAApQIQAAoAAAAqAAAACQAAAKUCEAAKAAAAKwAAAAkAAAClAhAACgAAACwAAAAJAAAApQIQAAoAAAAwAAAAFgAAAGRlY29tcHJlc3Npb24gZmFpbGVkpQIQAAoAAAAvAAAAHgAAAKUCEAAKAAAApQAAACQAAAClAhAACgAAAKYAAAAkAAAApQIQAAoAAACnAAAAFgAAAKUCEAAKAAAAxQAAABQAAAClAhAACgAAAMYAAAAUAAAApQIQAAoAAADbAAAAGAAAAKUCEAAKAAAA3AAAABgAAAClAhAACgAAANMAAAAxAAAAAAAQAGwAAAAjAQAADgAAAG51bGwgcG9pbnRlciBwYXNzZWQgdG8gcnVzdHJlY3Vyc2l2ZSB1c2Ugb2YgYW4gb2JqZWN0IGRldGVjdGVkIHdoaWNoIHdvdWxkIGxlYWQgdG8gdW5zYWZlIGFsaWFzaW5nIGluIHJ1c3QAAG0AEABnAAAAfwAAABEAAABtABAAZwAAAIwAAAARAAAAbGliZGVmbGF0ZV9kZWZsYXRlX2RlY29tcHJlc3MgcmV0dXJuZWQgYW4gdW5rbm93biBlcnJvciB0eXBlOiB0aGlzIGlzIGFuIGludGVybmFsIGJ1ZyB0aGF0ICoqbXVzdCoqIGJlIGZpeGVkUAIQAF8AAAAMAQAAFQAAAGxpYmRlZmxhdGVfYWxsb2NfZGVjb21wcmVzc29yIHJldHVybmVkIE5VTEw6IG91dCBvZiBtZW1vcnkAAFACEABfAAAAnAAAABEAAAAMAAAAAQAAAAIAAAAAAAAAAAAAABAREgAIBwkGCgULBAwDDQIOAQ8AAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAAAAAAAEAAAACAAAAAwAAAAQAAQAFAAEABwACAAkAAgANAAMAEQADABkABAAhAAQAMQAFAEEABQBhAAYAgQAGAMEABwABAQcAgQEIAAECCAABAwkAAQQJAAEGCgABCAoAAQwLAAEQCwABGAwAASAMAAEwDQABQA0AAWANAAFgDQABYAAAAIAAAAGAAAACgAAAA4AAAASAAAAFgAAABoAAAAeAAAAIgAAACYAAAAqAAAALgAAADIAAAA2AAAAOgAAAD4AAABCAAAARgAAAEoAAABOAAAAUgAAAFYAAABaAAAAXgAAAGIAAABmAAAAagAAAG4AAAByAAAAdgAAAHoAAAB+AAAAggAAAIYAAACKAAAAjgAAAJIAAACWAAAAmgAAAJ4AAACiAAAApgAAAKoAAACuAAAAsgAAALYAAAC6AAAAvgAAAMIAAADGAAAAygAAAM4AAADSAAAA1gAAANoAAADeAAAA4gAAAOYAAADqAAAA7gAAAPIAAAD2AAAA+gAAAP4AAAECAAABBgAAAQoAAAEOAAABEgAAARYAAAEaAAABHgAAASIAAAEmAAABKgAAAS4AAAEyAAABNgAAAToAAAE+AAABQgAAAUYAAAFKAAABTgAAAVIAAAFWAAABWgAAAV4AAAFiAAABZgAAAWoAAAFuAAABcgAAAXYAAAF6AAABfgAAAYIAAAGGAAABigAAAY4AAAGSAAABlgAAAZoAAAGeAAABogAAAaYAAAGqAAABrgAAAbIAAAG2AAABugAAAb4AAAHCAAABxgAAAcoAAAHOAAAB0gAAAdYAAAHaAAAB3gAAAeIAAAHmAAAB6gAAAe4AAAHyAAAB9gAAAfoAAAH+AAACAgAAAgYAAAIKAAACDgAAAhIAAAIWAAACGgAAAh4AAAIiAAACJgAAAioAAAIuAAACMgAAAjYAAAI6AAACPgAAAkIAAAJGAAACSgAAAk4AAAJSAAACVgAAAloAAAJeAAACYgAAAmYAAAJqAAACbgAAAnIAAAJ2AAACegAAAn4AAAKCAAAChgAAAooAAAKOAAACkgAAApYAAAKaAAACngAAAqIAAAKmAAACqgAAAq4AAAKyAAACtgAAAroAAAK+AAACwgAAAsYAAALKAAACzgAAAtIAAALWAAAC2gAAAt4AAALiAAAC5gAAAuoAAALuAAAC8gAAAvYAAAL6AAAC/gAAAwIAAAMGAAADCgAAAw4AAAMSAAADFgAAAxoAAAMeAAADIgAAAyYAAAMqAAADLgAAAzIAAAM2AAADOgAAAz4AAANCAAADRgAAA0oAAANOAAADUgAAA1YAAANaAAADXgAAA2IAAANmAAADagAAA24AAANyAAADdgAAA3oAAAN+AAADggAAA4YAAAOKAAADjgAAA5IAAAOWAAADmgAAA54AAAOiAAADpgAAA6oAAAOuAAADsgAAA7YAAAO6AAADvgAAA8IAAAPGAAADygAAA84AAAPSAAAD1gAAA9oAAAPeAAAD4gAAA+YAAAPqAAAD7gAAA/IAAAP2AAAD+gAAA/4AAoAAAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgABAAsAAQANAAEADwABABEAAgATAAIAFwACABsAAgAfAAMAIwADACsAAwAzAAMAOwAEAEMABABTAAQAYwAEAHMABQCDAAUAowAFAMMABQDjAAAAAgEAAAIBAAACAW1dy9YsUOtjeEGmV3Ebi7nyfVy2Bv6hO/Xnf5Lkw1AabWVtb3J5IGFsbG9jYXRpb24gb2YgIGJ5dGVzIGZhaWxlZAAAMAsQABUAAABFCxAADQAAADcCEAAYAAAAZAEAAAkAAAAAAAAACAAAAAQAAAAFAAAABgAAAAcAAAAIAAAACQAAAAwAAAAEAAAACgAAAAsAAAAMAAAAAAAAAAgAAAAEAAAADQAAAA4AAAAPAAAAEAAAABEAAAAQAAAABAAAABIAAAATAAAAFAAAAAgAAAC7ARAAUAAAACoCAAARAAAAAAAAAAgAAAAEAAAAFQAAAGFzc2VydGlvbiBmYWlsZWQ6IHBzaXplID49IHNpemUgKyBtaW5fb3ZlcmhlYWQAAAwCEAAqAAAAsQQAAAkAAABhc3NlcnRpb24gZmFpbGVkOiBwc2l6ZSA8PSBzaXplICsgbWF4X292ZXJoZWFkAAAMAhAAKgAAALcEAAANAAAACQAAAAwAAAAEAAAAFgAAAGNhcGFjaXR5IG92ZXJmbG93AAAAkAwQABEAAAAwMDAxMDIwMzA0MDUwNjA3MDgwOTEwMTExMjEzMTQxNTE2MTcxODE5MjAyMTIyMjMyNDI1MjYyNzI4MjkzMDMxMzIzMzM0MzUzNjM3MzgzOTQwNDE0MjQzNDQ0NTQ2NDc0ODQ5NTA1MTUyNTM1NDU1NTY1NzU4NTk2MDYxNjI2MzY0NjU2NjY3Njg2OTcwNzE3MjczNzQ3NTc2Nzc3ODc5ODA4MTgyODM4NDg1ODY4Nzg4ODk5MDkxOTI5Mzk0OTU5Njk3OTg5OQEAAAAAAAAAcmFuZ2Ugc3RhcnQgaW5kZXggIG91dCBvZiByYW5nZSBmb3Igc2xpY2Ugb2YgbGVuZ3RoIHwNEAASAAAAjg0QACIAAAByYW5nZSBlbmQgaW5kZXggwA0QABAAAACODRAAIgAAAHNsaWNlIGluZGV4IHN0YXJ0cyBhdCAgYnV0IGVuZHMgYXQgAOANEAAWAAAA9g0QAA0AAABpbmRleCBvdXQgb2YgYm91bmRzOiB0aGUgbGVuIGlzICBidXQgdGhlIGluZGV4IGlzIAAAFA4QACAAAAA0DhAAEgAAAFJlZkNlbGwgYWxyZWFkeSBib3Jyb3dlZABB8JzAAAsEBAAAAAApBG5hbWUBIgFZH19fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIAPAlwcm9kdWNlcnMBDHByb2Nlc3NlZC1ieQIGd2FscnVzBjAuMjQuNAx3YXNtLWJpbmRnZW4HMC4yLjEwNg==";let j;function Z1(t){j=t}function KP(t){Co===fn.length&&fn.push(fn.length+1);const e=Co;return Co=fn[e],fn[e]=t,e}function jP(t){t<132||(fn[t]=Co,Co=t)}function $1(t,e){return t=t>>>0,WP().subarray(t/4,t/4+e)}function qA(t,e){return t=t>>>0,KA().subarray(t/1,t/1+e)}let Rr=null;function Oe(){return(Rr===null||Rr.buffer.detached===!0||Rr.buffer.detached===void 0&&Rr.buffer!==j.memory.buffer)&&(Rr=new DataView(j.memory.buffer)),Rr}function eE(t,e){return t=t>>>0,$P(t,e)}let Mc=null;function WP(){return(Mc===null||Mc.byteLength===0)&&(Mc=new Uint32Array(j.memory.buffer)),Mc}let Tc=null;function KA(){return(Tc===null||Tc.byteLength===0)&&(Tc=new Uint8Array(j.memory.buffer)),Tc}function XP(t){return fn[t]}let fn=new Array(128).fill(void 0);fn.push(void 0,null,!0,!1);let Co=fn.length;function jA(t,e){const n=e(t.length*1,1)>>>0;return KA().set(t,n/1),Lc=t.length,n}function WA(t){const e=XP(t);return jP(t),e}let Pc=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Pc.decode();const ZP=2146435072;let XA=0;function $P(t,e){return XA+=e,XA>=ZP&&(Pc=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),Pc.decode(),XA=e),Pc.decode(KA().subarray(t,t+e))}let Lc=0;const tE=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>j.__wbg_chunksliceresult_free(t>>>0,1)),nE=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>j.__wbg_decompressresult_free(t>>>0,1));class Nr{static __wrap(e){e=e>>>0;const n=Object.create(Nr.prototype);return n.__wbg_ptr=e,tE.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,tE.unregister(this),e}free(){const e=this.__destroy_into_raw();j.__wbg_chunksliceresult_free(e,0)}get cpositions(){try{const r=j.__wbindgen_add_to_stack_pointer(-16);j.chunksliceresult_cpositions(r,this.__wbg_ptr);var e=Oe().getInt32(r+0,!0),n=Oe().getInt32(r+4,!0),i=$1(e,n).slice();return j.__wbindgen_export(e,n*4,4),i}finally{j.__wbindgen_add_to_stack_pointer(16)}}get dpositions(){try{const r=j.__wbindgen_add_to_stack_pointer(-16);j.chunksliceresult_dpositions(r,this.__wbg_ptr);var e=Oe().getInt32(r+0,!0),n=Oe().getInt32(r+4,!0),i=$1(e,n).slice();return j.__wbindgen_export(e,n*4,4),i}finally{j.__wbindgen_add_to_stack_pointer(16)}}get buffer(){try{const r=j.__wbindgen_add_to_stack_pointer(-16);j.chunksliceresult_buffer(r,this.__wbg_ptr);var e=Oe().getInt32(r+0,!0),n=Oe().getInt32(r+4,!0),i=qA(e,n).slice();return j.__wbindgen_export(e,n*1,1),i}finally{j.__wbindgen_add_to_stack_pointer(16)}}}Symbol.dispose&&(Nr.prototype[Symbol.dispose]=Nr.prototype.free);class Mr{static __wrap(e){e=e>>>0;const n=Object.create(Mr.prototype);return n.__wbg_ptr=e,nE.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,nE.unregister(this),e}free(){const e=this.__destroy_into_raw();j.__wbg_decompressresult_free(e,0)}get bytes_read(){return j.decompressresult_bytes_read(this.__wbg_ptr)>>>0}get data(){try{const r=j.__wbindgen_add_to_stack_pointer(-16);j.decompressresult_data(r,this.__wbg_ptr);var e=Oe().getInt32(r+0,!0),n=Oe().getInt32(r+4,!0),i=qA(e,n).slice();return j.__wbindgen_export(e,n*1,1),i}finally{j.__wbindgen_add_to_stack_pointer(16)}}}Symbol.dispose&&(Mr.prototype[Symbol.dispose]=Mr.prototype.free);function iE(t){try{const o=j.__wbindgen_add_to_stack_pointer(-16),a=jA(t,j.__wbindgen_export2),l=Lc;j.decompress_all(o,a,l);var e=Oe().getInt32(o+0,!0),n=Oe().getInt32(o+4,!0),i=Oe().getInt32(o+8,!0),r=Oe().getInt32(o+12,!0);if(r)throw WA(i);var s=qA(e,n).slice();return j.__wbindgen_export(e,n*1,1),s}finally{j.__wbindgen_add_to_stack_pointer(16)}}function eL(t){try{const r=j.__wbindgen_add_to_stack_pointer(-16),s=jA(t,j.__wbindgen_export2),o=Lc;j.decompress_block(r,s,o);var e=Oe().getInt32(r+0,!0),n=Oe().getInt32(r+4,!0),i=Oe().getInt32(r+8,!0);if(i)throw WA(n);return Mr.__wrap(e)}finally{j.__wbindgen_add_to_stack_pointer(16)}}function rE(t,e,n,i,r){try{const l=j.__wbindgen_add_to_stack_pointer(-16),c=jA(t,j.__wbindgen_export2),u=Lc;j.decompress_chunk_slice(l,c,u,e,n,i,r);var s=Oe().getInt32(l+0,!0),o=Oe().getInt32(l+4,!0),a=Oe().getInt32(l+8,!0);if(a)throw WA(o);return Nr.__wrap(s)}finally{j.__wbindgen_add_to_stack_pointer(16)}}function tL(t,e){const n=Error(eE(t,e));return KP(n)}function nL(t,e){throw new Error(eE(t,e))}let Eo=null,ZA=null;async function sE(){return Eo||(ZA||(ZA=(async()=>{const e=await(await fetch(qP)).arrayBuffer(),{instance:n}=await WebAssembly.instantiate(e,{"./bgzf_wasm_bg.js":JA});return Eo=n.exports,Z1(Eo),Eo})()),ZA)}async function iL(t){return await sE(),iE(t)}async function rL(t,e,n,i,r){await sE();const s=rE(t,e,n,i,r),o=s.buffer,a=[...s.cpositions],l=[...s.dpositions];return s.free(),{buffer:o,cpositions:a,dpositions:l}}function sL(t){return t.length>=2&&t[0]===31&&t[1]===139}async function oL(t){if(typeof DecompressionStream<"u"){const e=new DecompressionStream("gzip"),n=e.writable.getWriter(),i=n.write(t).then(()=>n.close()),r=[],s=e.readable.getReader();for(;;){const{done:c,value:u}=await s.read();if(c)break;r.push(u)}await i;const o=r.reduce((c,u)=>c+u.length,0),a=new Uint8Array(o);let l=0;for(const c of r)a.set(c,l),l+=c.length;return a}else return JP(t,void 0)}async function Tr(t){try{return await iL(t)}catch(e){if(/invalid bgzf header/.exec(`${e}`)){if(sL(t))return oL(t);throw new Error("problem decompressing block: not a valid bgzf or gzip block")}throw/invalid gzip header/.exec(`${e}`)?new Error("problem decompressing block: incorrect gzip header check"):e}}async function oE(t,e,n){try{const{minv:i,maxv:r}=e,s=await rL(t,i.blockPosition,i.dataPosition,r.blockPosition,r.dataPosition);return{buffer:s.buffer,cpositions:s.cpositions,dpositions:s.dpositions}}catch(i){throw/invalid gzip header/.exec(`${i}`)?new Error("problem decompressing block: incorrect gzip header check"):i}}let $A=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&($A=new Int32Array($A));const aL=(t,e)=>{let n=-1;for(let i=0;i<t.length;i++)n=$A[(n^t[i])&255]^n>>>8;return n^-1},cL=21582659,lL=38359875;function uL(t,e){return t*2**e}function aE(t,e){return Math.floor(t/2**e)}let Oc=class extends o1{constructor(){super(...arguments),this.maxBinNumber=0,this.depth=0,this.minShift=0}async lineCount(e,n){return(await this.parse(n)).indices(e)?.stats?.lineCount||0}async indexCov(){return[]}parseAuxData(e,n){const i=new DataView(e.buffer),r=i.getUint32(n,!0),s=r&65536?"zero-based-half-open":"1-based-closed",o={0:"generic",1:"SAM",2:"VCF"}[r&15];if(!o)throw new Error(`invalid Tabix preset format flags ${r}`);const a={ref:i.getInt32(n+4,!0),start:i.getInt32(n+8,!0),end:i.getInt32(n+12,!0)},l=i.getInt32(n+16,!0),c=l?String.fromCharCode(l):"",u=i.getInt32(n+20,!0),f=i.getInt32(n+24,!0);return{columnNumbers:a,coordinateType:s,metaValue:l,metaChar:c,skipLines:u,format:o,formatFlags:r,...iP(e.subarray(n+28,n+28+f),this.renameRefSeq)}}async _parse(e){const n=await this.filehandle.readFile(e),i=await Tr(n),r=new DataView(i.buffer);let s;const o=r.getUint32(0,!0);if(o===cL)s=1;else if(o===lL)s=2;else throw new Error(`Not a CSI file ${o}`);this.minShift=r.getInt32(4,!0),this.depth=r.getInt32(8,!0),this.maxBinNumber=((1<<(this.depth+1)*3)-1)/7;const a=this.maxBinNumber,l=r.getInt32(12,!0),c=l>=30?this.parseAuxData(i,16):void 0,u=r.getInt32(16+l,!0);let f=16+l+4,h;const A=[];for(let m=0;m<u;m++){A.push(f);const p=r.getInt32(f,!0);f+=4;for(let w=0;w<p;w++){const C=r.getUint32(f,!0);if(f+=4,C>this.maxBinNumber)f+=44;else{f+=8;const y=r.getInt32(f,!0);f+=4;for(let x=0;x<y;x+=1){const I=_n(i,f);f+=8,f+=8,h=po(h,I)}}}}const d=new go({maxSize:5});function g(m){let p=A[m];if(p===void 0)return;const w=r.getInt32(p,!0);p+=4;const C={};let y;for(let x=0;x<w;x++){const I=r.getUint32(p,!0);if(p+=4,I>a)y=s1(i,p+28),p+=44;else{h=po(h,_n(i,p)),p+=8;const b=r.getInt32(p,!0);p+=4;const S=new Array(b);for(let D=0;D<b;D+=1){const v=_n(i,p);p+=8;const F=_n(i,p);p+=8,S[D]=new i1(v,F,I)}C[I]=S}}return{binIndex:C,stats:y}}return{csiVersion:s,firstDataLine:h,indices:m=>{if(!d.has(m)){const p=g(m);return p&&d.set(m,p),p}return d.get(m)},refCount:u,csi:!0,maxBlockSize:65536,...c}}async blocksForRange(e,n,i,r={}){n<0&&(n=0);const o=(await this.parse(r)).indices(e);if(!o)return[];const a=this.reg2bins(n,i);if(a.length===0)return[];const l=[],{binIndex:c}=o;for(const[u,f]of a)for(let h=u;h<=f;h++){const A=c[h];if(A)for(let d=0,g=A.length;d<g;d++)l.push(A[d])}return MA(l,new a1(0,0))}reg2bins(e,n){e-=1,e<1&&(e=1),n>2**50&&(n=2**34),n-=1;let i=0,r=0,s=this.minShift+this.depth*3;const o=[];for(;i<=this.depth;s-=3,r+=uL(1,i*3),i+=1){const a=r+aE(e,s),l=r+aE(n,s);if(l-a+o.length>this.maxBinNumber)throw new Error(`query ${e}-${n} is too large for current binning scheme (shift ${this.minShift}, depth ${this.depth}), try a smaller query or a coarser index binning scheme`);o.push([a,l])}return o}async parse(e={}){return this.setupP||(this.setupP=this._parse(e).catch(n=>{throw this.setupP=void 0,n})),this.setupP}async hasRefSeq(e,n={}){return!!(await this.parse(n)).indices(e)?.binIndex}};class fL{read(){throw new Error("never called")}stat(){throw new Error("never called")}readFile(){throw new Error("never called")}close(){throw new Error("never called")}}const AL=3,hL=4,Et={BAM_FPAIRED:1,BAM_FPROPER_PAIR:2,BAM_FUNMAP:4,BAM_FMUNMAP:8,BAM_FREVERSE:16,BAM_FMREVERSE:32,BAM_FREAD1:64,BAM_FREAD2:128,BAM_FSECONDARY:256,BAM_FQCFAIL:512,BAM_FDUP:1024,BAM_FSUPPLEMENTARY:2048},bo="=ACMGRSVTWYHKDBN".split(""),dL=[77,73,68,78,83,72,80,61,88,63,63,63,63,63,63,63],cE=461;class lE{constructor(e){this.bytes=e.bytes,this.fileOffset=e.fileOffset,this._dataView=new DataView(this.bytes.byteArray.buffer)}get byteArray(){return this.bytes.byteArray}get flags(){return this._cachedFlags===void 0&&(this._cachedFlags=(this._dataView.getInt32(this.bytes.start+16,!0)&4294901760)>>16),this._cachedFlags}get ref_id(){return this._cachedRefId===void 0&&(this._cachedRefId=this._dataView.getInt32(this.bytes.start+4,!0)),this._cachedRefId}get start(){return this._cachedStart===void 0&&(this._cachedStart=this._dataView.getInt32(this.bytes.start+8,!0)),this._cachedStart}get end(){return this._cachedEnd===void 0&&(this._cachedEnd=this.start+this.length_on_ref),this._cachedEnd}get mq(){const e=(this.bin_mq_nl&65280)>>8;return e===255?void 0:e}get score(){return this.mq}get qual(){if(this.isSegmentUnmapped())return null;{const e=this.b0+this.read_name_length+this.num_cigar_bytes+this.num_seq_bytes;return this.byteArray.subarray(e,e+this.seq_length)}}get strand(){return this.isReverseComplemented()?-1:1}get b0(){return this.bytes.start+36}get tagsStart(){return this._cachedTagsStart===void 0&&(this._cachedTagsStart=this.b0+this.read_name_length+this.num_cigar_bytes+this.num_seq_bytes+this.seq_length),this._cachedTagsStart}get name(){const e=this.read_name_length-1,n=this.b0,i=this.byteArray,r=new Array(e);for(let s=0;s<e;s++)r[s]=i[n+s];return String.fromCharCode(...r)}get NUMERIC_MD(){if(this._cachedNUMERIC_MD===void 0){const e=this.getTagRaw("MD");this._cachedNUMERIC_MD=e instanceof Uint8Array?e:null}return this._cachedNUMERIC_MD===null?void 0:this._cachedNUMERIC_MD}get tags(){return this._cachedTags===void 0&&(this._cachedTags=this._computeTags()),this._cachedTags}getTag(e){return this._cachedTags!==void 0?this._cachedTags[e]:this._findTag(e,!1)}getTagRaw(e){return this._findTag(e,!0)}_findTag(e,n){const i=e.charCodeAt(0),r=e.charCodeAt(1);let s=this.tagsStart;const o=this.bytes.end,a=this.byteArray;for(;s<o;){const l=a[s],c=a[s+1],u=a[s+2];s+=3;const f=l===i&&c===r;switch(u){case 65:if(f)return String.fromCharCode(a[s]);s+=1;break;case 105:if(f)return this._dataView.getInt32(s,!0);s+=4;break;case 73:if(f)return this._dataView.getUint32(s,!0);s+=4;break;case 99:if(f)return this._dataView.getInt8(s);s+=1;break;case 67:if(f)return this._dataView.getUint8(s);s+=1;break;case 115:if(f)return this._dataView.getInt16(s,!0);s+=2;break;case 83:if(f)return this._dataView.getUint16(s,!0);s+=2;break;case 102:if(f)return this._dataView.getFloat32(s,!0);s+=4;break;case 90:case 72:{if(f){const h=s;for(;s<o&&a[s]!==0;)s++;if(n)return a.subarray(h,s);const A=[];for(let d=h;d<s;d++)A.push(String.fromCharCode(a[d]));return A.join("")}for(;s<=o&&a[s++]!==0;);break}case 66:{const h=a[s++],A=this._dataView.getInt32(s,!0);s+=4;const d=a.byteOffset+s;if(f)if(h===105){if(d%4===0)return new Int32Array(a.buffer,d,A);const g=new Array(A);for(let m=0;m<A;m++)g[m]=this._dataView.getInt32(s+m*4,!0);return g}else if(h===73){if(d%4===0)return new Uint32Array(a.buffer,d,A);const g=new Array(A);for(let m=0;m<A;m++)g[m]=this._dataView.getUint32(s+m*4,!0);return g}else if(h===115){if(d%2===0)return new Int16Array(a.buffer,d,A);const g=new Array(A);for(let m=0;m<A;m++)g[m]=this._dataView.getInt16(s+m*2,!0);return g}else if(h===83){if(d%2===0)return new Uint16Array(a.buffer,d,A);const g=new Array(A);for(let m=0;m<A;m++)g[m]=this._dataView.getUint16(s+m*2,!0);return g}else{if(h===99)return new Int8Array(a.buffer,d,A);if(h===67)return new Uint8Array(a.buffer,d,A);if(h===102){if(d%4===0)return new Float32Array(a.buffer,d,A);const g=new Array(A);for(let m=0;m<A;m++)g[m]=this._dataView.getFloat32(s+m*4,!0);return g}}h===105||h===73||h===102?s+=A<<2:h===115||h===83?s+=A<<1:(h===99||h===67)&&(s+=A);break}}}}_computeTags(){let e=this.tagsStart;const n=this.bytes.end,i=this.byteArray,r={};for(;e<n;){const s=String.fromCharCode(i[e],i[e+1]),o=i[e+2];switch(e+=3,o){case 65:r[s]=String.fromCharCode(i[e]),e+=1;break;case 105:r[s]=this._dataView.getInt32(e,!0),e+=4;break;case 73:r[s]=this._dataView.getUint32(e,!0),e+=4;break;case 99:r[s]=this._dataView.getInt8(e),e+=1;break;case 67:r[s]=this._dataView.getUint8(e),e+=1;break;case 115:r[s]=this._dataView.getInt16(e,!0),e+=2;break;case 83:r[s]=this._dataView.getUint16(e,!0),e+=2;break;case 102:r[s]=this._dataView.getFloat32(e,!0),e+=4;break;case 90:case 72:{const a=[];for(;e<=n;){const l=i[e++];if(l!==0)a.push(String.fromCharCode(l));else break}r[s]=a.join("");break}case 66:{const a=i[e++],l=this._dataView.getInt32(e,!0);e+=4;const c=i.byteOffset+e;if(a===105){if(c%4===0)r[s]=new Int32Array(i.buffer,c,l);else{const u=new Array(l);for(let f=0;f<l;f++)u[f]=this._dataView.getInt32(e+f*4,!0);r[s]=u}e+=l<<2}else if(a===73){if(c%4===0)r[s]=new Uint32Array(i.buffer,c,l);else{const u=new Array(l);for(let f=0;f<l;f++)u[f]=this._dataView.getUint32(e+f*4,!0);r[s]=u}e+=l<<2}else if(a===115){if(c%2===0)r[s]=new Int16Array(i.buffer,c,l);else{const u=new Array(l);for(let f=0;f<l;f++)u[f]=this._dataView.getInt16(e+f*2,!0);r[s]=u}e+=l<<1}else if(a===83){if(c%2===0)r[s]=new Uint16Array(i.buffer,c,l);else{const u=new Array(l);for(let f=0;f<l;f++)u[f]=this._dataView.getUint16(e+f*2,!0);r[s]=u}e+=l<<1}else if(a===99)r[s]=new Int8Array(i.buffer,c,l),e+=l;else if(a===67)r[s]=new Uint8Array(i.buffer,c,l),e+=l;else if(a===102){if(c%4===0)r[s]=new Float32Array(i.buffer,c,l);else{const u=new Array(l);for(let f=0;f<l;f++)u[f]=this._dataView.getFloat32(e+f*4,!0);r[s]=u}e+=l<<2}break}default:console.error("Unknown BAM tag type",o);break}}return r}isPaired(){return!!(this.flags&Et.BAM_FPAIRED)}isProperlyPaired(){return!!(this.flags&Et.BAM_FPROPER_PAIR)}isSegmentUnmapped(){return!!(this.flags&Et.BAM_FUNMAP)}isMateUnmapped(){return!!(this.flags&Et.BAM_FMUNMAP)}isReverseComplemented(){return!!(this.flags&Et.BAM_FREVERSE)}isMateReverseComplemented(){return!!(this.flags&Et.BAM_FMREVERSE)}isRead1(){return!!(this.flags&Et.BAM_FREAD1)}isRead2(){return!!(this.flags&Et.BAM_FREAD2)}isSecondary(){return!!(this.flags&Et.BAM_FSECONDARY)}isFailedQc(){return!!(this.flags&Et.BAM_FQCFAIL)}isDuplicate(){return!!(this.flags&Et.BAM_FDUP)}isSupplementary(){return!!(this.flags&Et.BAM_FSUPPLEMENTARY)}get cigarAndLength(){return this._cachedCigarAndLength===void 0&&(this._cachedCigarAndLength=this._computeCigarAndLength()),this._cachedCigarAndLength}_computeCigarAndLength(){if(this.isSegmentUnmapped())return{length_on_ref:0,NUMERIC_CIGAR:new Uint32Array(0)};const e=this.num_cigar_ops;let n=this.b0+this.read_name_length;const i=this._dataView.getInt32(n,!0),r=i>>4;if((i&15)===hL&&r===this.seq_length){n+=4;const u=this._dataView.getInt32(n,!0),f=u>>4;return(u&15)!==AL&&console.warn("CG tag with no N tag"),{NUMERIC_CIGAR:this.tags.CG,length_on_ref:f}}const o=this.byteArray.byteOffset+n;if(o%4===0&&e>50){const u=new Uint32Array(this.byteArray.buffer,o,e);let f=0;for(let h=0;h<e;++h){const A=u[h];f+=(A>>4)*(cE>>(A&15)&1)}return{NUMERIC_CIGAR:u,length_on_ref:f}}const l=new Array(e);let c=0;for(let u=0;u<e;++u){const f=this._dataView.getInt32(n+u*4,!0)|0;l[u]=f,c+=(f>>4)*(cE>>(f&15)&1)}return{NUMERIC_CIGAR:l,length_on_ref:c}}get length_on_ref(){return this.cigarAndLength.length_on_ref}get NUMERIC_CIGAR(){return this.cigarAndLength.NUMERIC_CIGAR}get CIGAR(){const e=this.NUMERIC_CIGAR;let n="";for(let i=0,r=e.length;i<r;i++){const s=e[i],o=s>>4,a=dL[s&15];n+=o+String.fromCharCode(a)}return n}get num_cigar_ops(){return this.flag_nc&65535}get num_cigar_bytes(){return this.num_cigar_ops<<2}get read_name_length(){return this.bin_mq_nl&255}get num_seq_bytes(){return this.seq_length+1>>1}get NUMERIC_SEQ(){const e=this.b0+this.read_name_length+this.num_cigar_bytes;return this.byteArray.subarray(e,e+this.num_seq_bytes)}get seq(){const e=this.NUMERIC_SEQ,n=this.seq_length,i=new Array(n);let r=0;const s=n>>1;for(let o=0;o<s;++o){const a=e[o];i[r++]=bo[(a&240)>>4],i[r++]=bo[a&15]}if(r<n){const o=e[s];i[r]=bo[(o&240)>>4]}return i.join("")}get pair_orientation(){if(!this.isSegmentUnmapped()&&!this.isMateUnmapped()&&this.ref_id===this.next_refid){const e=this.isReverseComplemented()?"R":"F",n=this.isMateReverseComplemented()?"R":"F";let i=" ",r=" ";return this.isRead1()?(i="1",r="2"):this.isRead2()&&(i="2",r="1"),this.template_length>0?`${e}${i}${n}${r}`:`${n}${r}${e}${i}`}}get bin_mq_nl(){return this._dataView.getInt32(this.bytes.start+12,!0)}get flag_nc(){return this._dataView.getInt32(this.bytes.start+16,!0)}get seq_length(){return this._dataView.getInt32(this.bytes.start+20,!0)}get next_refid(){return this._dataView.getInt32(this.bytes.start+24,!0)}get next_pos(){return this._dataView.getInt32(this.bytes.start+28,!0)}get template_length(){return this._dataView.getInt32(this.bytes.start+32,!0)}seqAt(e){if(e<this.seq_length){const n=e>>1,i=this.byteArray[this.b0+this.read_name_length+this.num_cigar_bytes+n];return e%2===0?bo[(i&240)>>4]:bo[i&15]}else return}toJSON(){const e={};for(const n of Object.keys(this))n.startsWith("_")||n==="bytes"||(e[n]=this[n]);return e}}function uE(t){const e=t.split(/\r?\n/),n=[];for(const i of e){const[r,...s]=i.split(/\t/);r&&n.push({tag:r.slice(1),data:s.map(o=>{const a=o.indexOf(":"),l=o.slice(0,a),c=o.slice(a+1);return{tag:l,value:c}})})}return n}const fE=21840194,gL=65536;class AE{constructor({bamFilehandle:e,bamPath:n,bamUrl:i,baiPath:r,baiFilehandle:s,baiUrl:o,csiPath:a,csiFilehandle:l,csiUrl:c,htsget:u,renameRefSeqs:f=A=>A,recordClass:h}){if(this.htsget=!1,this.chunkFeatureCache=new go({maxSize:100}),this.renameRefSeq=f,this.RecordClass=h??lE,e)this.bam=e;else if(n)this.bam=new We(n);else if(i)this.bam=new Ht(i);else if(u)this.htsget=!0,this.bam=new fL;else throw new Error("unable to initialize bam");if(l)this.index=new Oc({filehandle:l});else if(a)this.index=new Oc({filehandle:new We(a)});else if(c)this.index=new Oc({filehandle:new Ht(c)});else if(s)this.index=new vr({filehandle:s});else if(r)this.index=new vr({filehandle:new We(r)});else if(o)this.index=new vr({filehandle:new Ht(o)});else if(n)this.index=new vr({filehandle:new We(`${n}.bai`)});else if(i)this.index=new vr({filehandle:new Ht(`${i}.bai`)});else if(u)this.htsget=!0;else throw new Error("unable to infer index format")}async getHeaderPre(e){const n=nP(e);if(!this.index)return;const i=await this.index.parse(n),r=i.firstDataLine===void 0?await this.bam.readFile():await this.bam.read(i.firstDataLine.blockPosition+gL,0),s=await Tr(r),o=new DataView(s.buffer);if(o.getInt32(0,!0)!==fE)throw new Error("Not a BAM file");const a=o.getInt32(4,!0),l=new TextDecoder("utf8");this.header=l.decode(s.subarray(8,8+a));const{chrToIndex:c,indexToChr:u}=this._parseRefSeqs(s,a+8);return this.chrToIndex=c,this.indexToChr=u,uE(this.header)}getHeader(e){return this.headerP||(this.headerP=this.getHeaderPre(e).catch(n=>{throw this.headerP=void 0,n})),this.headerP}async getHeaderText(e={}){return await this.getHeader(e),this.header}_parseRefSeqs(e,n){const i=new DataView(e.buffer),r=i.getInt32(n,!0);let s=n+4;const o={},a=[],l=new TextDecoder("utf8");for(let c=0;c<r;c+=1){if(s+8>e.length)throw new Error(`Insufficient data for reference sequences: need more than ${e.length} bytes`);const u=i.getInt32(s,!0),f=this.renameRefSeq(l.decode(e.subarray(s+4,s+4+u-1))),h=i.getInt32(s+u+4,!0);o[f]=c,a.push({refName:f,length:h}),s=s+8+u}return{chrToIndex:o,indexToChr:a}}async getRecordsForRange(e,n,i,r){await this.getHeader(r);const s=this.chrToIndex?.[e];if(s===void 0||!this.index)return[];const o=await this.index.blocksForRange(s,n-1,i,r);return this._fetchChunkFeaturesDirect(o,s,n,i,r)}chunkCacheKey(e,n){const{minv:i,maxv:r}=e;return`${i.blockPosition}:${i.dataPosition}-${r.blockPosition}:${r.dataPosition}${aP(n)}`}blocksOverlap(e,n,i,r){return e<=r&&n>=i}evictOverlappingChunks(e,n){for(const[i,r]of this.chunkFeatureCache)this.blocksOverlap(e,n,r.minBlock,r.maxBlock)&&this.chunkFeatureCache.delete(i)}async _fetchChunkFeaturesDirect(e,n,i,r,s={}){const{viewAsPairs:o,filterBy:a}=s,{flagInclude:l=0,flagExclude:c=0,tagFilter:u}=a||{},f=[];for(let h=0,A=e.length;h<A;h++){const d=e[h],g=this.chunkCacheKey(d,a),m=d.minv.blockPosition,p=d.maxv.blockPosition;let w;const C=this.chunkFeatureCache.get(g);if(C)w=C.features;else{this.evictOverlappingChunks(m,p);const{data:x,cpositions:I,dpositions:b}=await this._readChunk({chunk:d,opts:s}),S=await this.readBamFeatures(x,I,b,d);if(a){w=[];for(let D=0,v=S.length;D<v;D++){const F=S[D];sP(F.flags,l,c)||u&&oP(F.tags[u.tag],u.value)||w.push(F)}}else w=S;this.chunkFeatureCache.set(g,{minBlock:m,maxBlock:p,features:w})}let y=!1;for(let x=0,I=w.length;x<I;x++){const b=w[x];if(b.ref_id===n)if(b.start>=r){y=!0;break}else b.end>=i&&f.push(b)}if(y)break}if(o){const h=await this.fetchPairs(n,f,s);for(let A=0,d=h.length;A<d;A++)f.push(h[A])}return f}async fetchPairs(e,n,i){const{pairAcrossChr:r,maxInsertSize:s=2e5}=i,o={},a={};for(let h=0,A=n.length;h<A;h++){const d=n[h],g=d.name;o[g]=(o[g]||0)+1,a[d.fileOffset]=1}const l=[];for(let h=0,A=n.length;h<A;h++){const d=n[h],g=d.name;this.index&&o[g]===1&&(r||d.next_refid===e&&Math.abs(d.start-d.next_pos)<s)&&l.push(this.index.blocksForRange(d.next_refid,d.next_pos,d.next_pos+1,i))}const c=new Map,u=await Promise.all(l);for(let h=0,A=u.length;h<A;h++){const d=u[h];for(let g=0,m=d.length;g<m;g++){const p=d[g],w=p.toString();c.has(w)||c.set(w,p)}}return(await Promise.all([...c.values()].map(async h=>{const{data:A,cpositions:d,dpositions:g,chunk:m}=await this._readChunk({chunk:h,opts:i}),p=[],w=await this.readBamFeatures(A,d,g,m);for(let C=0,y=w.length;C<y;C++){const x=w[C];o[x.name]===1&&!a[x.fileOffset]&&p.push(x)}return p}))).flat()}async _readChunk({chunk:e,opts:n}){const i=await this.bam.read(e.fetchedSize(),e.minv.blockPosition,n),{buffer:r,cpositions:s,dpositions:o}=await oE(i,e);return{data:r,cpositions:s,dpositions:o,chunk:e}}async readBamFeatures(e,n,i,r){let s=0;const o=[];let a=0;const l=new DataView(e.buffer),c=i.length>0,u=n.length>0;for(;s+4<e.length;){const f=l.getInt32(s,!0),h=s+4+f-1;if(c){for(;s+r.minv.dataPosition>=i[a++];);a--}if(h<e.length){const A=new this.RecordClass({bytes:{byteArray:e,start:s,end:h},fileOffset:u?n[a]*256+(s-i[a])+r.minv.dataPosition+1:aL(e.subarray(s,h))>>>0});o.push(A)}s=h+1}return o}async hasRefSeq(e){const n=this.chrToIndex?.[e];return n===void 0?!1:this.index?.hasRefSeq(n)}async lineCount(e){const n=this.chrToIndex?.[e];return n===void 0||!this.index?0:this.index.lineCount(n)}async indexCov(e,n,i){if(!this.index)return[];await this.index.parse();const r=this.chrToIndex?.[e];return r===void 0?[]:this.index.indexCov(r,n,i)}async blocksForRange(e,n,i,r){if(!this.index)return[];await this.index.parse();const s=this.chrToIndex?.[e];return s===void 0?[]:this.index.blocksForRange(s,n,i,r)}clearFeatureCache(){this.chunkFeatureCache.clear()}async estimatedBytesForRegions(e,n){if(!this.index)return 0;if(await this.getHeader(n),!this.chrToIndex)throw new Error("Header not yet parsed");return this.index.estimatedBytesForRegions(e.map(i=>{const r=this.chrToIndex[i.refName];if(r===void 0)throw new Error(`Unknown reference name: ${i.refName}`);return{refId:r,start:i.start,end:i.end}}),n)}}async function hE(t,e){const n=await Promise.all(t.map(async i=>{const{url:r,headers:s}=i;if(r.startsWith("data:")){const o=await fetch(r);if(!o.ok)throw new Error("failed to decode base64");const a=await o.arrayBuffer();return new Uint8Array(a)}else{const{referer:o,...a}=s,l=await fetch(r,{...e,headers:{...e?.headers,...a}});if(!l.ok)throw new Error(`HTTP ${l.status} fetching ${r}: ${await l.text()}`);return new Uint8Array(await l.arrayBuffer())}}));return rP(await Promise.all(n.map(i=>Tr(i))))}class pL extends AE{constructor(e){super({htsget:!0,recordClass:e.recordClass}),this.baseUrl=e.baseUrl,this.trackId=e.trackId}async getRecordsForRange(e,n,i,r){const o=`${`${this.baseUrl}/${this.trackId}`}?referenceName=${e}&start=${n}&end=${i}&format=BAM`,a=this.chrToIndex?.[e];if(a===void 0)return[];const l=await fetch(o,{...r});if(!l.ok)throw new Error(`HTTP ${l.status} fetching ${o}: ${await l.text()}`);const c=await l.json(),u=await hE(c.htsget.urls.slice(1),r),f=await this.readBamFeatures(u,[],[],{minv:{dataPosition:0,blockPosition:0},maxv:{dataPosition:0,blockPosition:0}}),h=[];for(let A=0,d=f.length;A<d;A++){const g=f[A];if(g.ref_id===a){if(g.start>=i)break;g.end>=n&&h.push(g)}}return h}async getHeader(e={}){const n=`${this.baseUrl}/${this.trackId}?referenceName=na&class=header`,i=await fetch(n,e);if(!i.ok)throw new Error(`HTTP ${i.status} fetching ${n}: ${await i.text()}`);const r=await i.json(),s=await hE(r.htsget.urls,e),o=new DataView(s.buffer);if(o.getInt32(0,!0)!==fE)throw new Error("Not a BAM file");const a=o.getInt32(4,!0),c=new TextDecoder("utf8").decode(s.subarray(8,8+a)),u=uE(c),f=[],h={},A=u.filter(d=>d.tag==="SQ");for(const[d,g]of A.entries()){let m="",p=0;for(const w of g.data)w.tag==="SN"?m=w.value:w.tag==="LN"&&(p=+w.value);h[m]=d,f[d]={refName:m,length:p}}return this.chrToIndex=h,this.indexToChr=f,u}}const mL=Object.freeze(Object.defineProperty({__proto__:null,BAI:vr,BamFile:AE,BamRecord:lE,CSI:Oc,HtsgetFile:pL},Symbol.toStringTag,{value:"Module"}));class Uc{constructor(e,n,i,r){this.minv=e,this.maxv=n,this.bin=i,this._fetchedSize=r}toUniqueString(){return`${this.minv}..${this.maxv} (bin ${this.bin}, fetchedSize ${this.fetchedSize()})`}toString(){return this.toUniqueString()}compareTo(e){return this.minv.compareTo(e.minv)||this.maxv.compareTo(e.maxv)||this.bin-e.bin}fetchedSize(){return this._fetchedSize!==void 0?this._fetchedSize:this.maxv.blockPosition+65536-this.minv.blockPosition}}class dE{constructor({filehandle:e,renameRefSeqs:n=i=>i}){this.filehandle=e,this.renameRefSeq=n}async getMetadata(e={}){const{indices:n,...i}=await this.parse(e);return i}_findFirstData(e,n){return e?e.compareTo(n)>0?n:e:n}async parse(e={}){return this.parseP||(this.parseP=this._parse(e).catch(n=>{throw this.parseP=void 0,n})),this.parseP}async hasRefSeq(e,n={}){return!!(await this.parse(n)).indices[e]?.binIndex}_parseNameBytes(e){let n=0,i=0;const r=[],s={},o=new TextDecoder("utf8");for(let a=0;a<e.length;a+=1)if(!e[a]){if(i<a){const l=this.renameRefSeq(o.decode(e.subarray(i,a)));r[n]=l,s[l]=n}i=a+1,n+=1}return{refNameToId:s,refIdToName:r}}}const gE=65536,wL=gE*gE;function pE(t,e=0){const n=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24;return((t[e+4]|t[e+5]<<8|t[e+6]<<16|t[e+7]<<24)>>>0)*wL+(n>>>0)}function yL(t,e){return e.minv.blockPosition-t.maxv.blockPosition<65e3&&e.maxv.blockPosition-t.minv.blockPosition<5e6}function mE(t,e){const n=[];let i;if(t.length===0)return t;t.sort(function(r,s){const o=r.minv.blockPosition-s.minv.blockPosition;return o===0?r.minv.dataPosition-s.minv.dataPosition:o});for(const r of t)(!e||r.maxv.compareTo(e)>0)&&(i===void 0?(n.push(r),i=r):yL(i,r)?r.maxv.compareTo(i.maxv)>0&&(i.maxv=r.maxv):(n.push(r),i=r));return n}class eh{constructor(e,n){this.blockPosition=e,this.dataPosition=n}toString(){return`${this.blockPosition}:${this.dataPosition}`}compareTo(e){return this.blockPosition-e.blockPosition||this.dataPosition-e.dataPosition}}function Pr(t,e=0){return new eh(t[e+7]*1099511627776+t[e+6]*4294967296+t[e+5]*16777216+t[e+4]*65536+t[e+3]*256+t[e+2],t[e+1]<<8|t[e])}const CL=21582659,EL=38359875,bL={0:"generic",1:"SAM",2:"VCF"};function xL(t,e){return t*2**e}function wE(t,e){return Math.floor(t/2**e)}class _c extends dE{constructor(e){super(e),this.maxBinNumber=0,this.depth=0,this.minShift=0}async lineCount(e,n={}){const i=await this.parse(n),r=i.refNameToId[e];if(r===void 0||!i.indices[r])return-1;const{stats:o}=i.indices[r];return o?o.lineCount:-1}indexCov(){throw new Error("CSI indexes do not support indexcov")}parseAuxData(e,n){const i=new DataView(e.buffer),r=i.getInt32(n,!0),s=r&65536?"zero-based-half-open":"1-based-closed",o=bL[r&15];if(!o)throw new Error(`invalid Tabix preset format flags ${r}`);const a={ref:i.getInt32(n+4,!0),start:i.getInt32(n+8,!0),end:i.getInt32(n+12,!0)},l=i.getInt32(n+16,!0),c=l?String.fromCharCode(l):void 0,u=i.getInt32(n+20,!0),f=i.getInt32(n+24,!0),{refIdToName:h,refNameToId:A}=this._parseNameBytes(e.subarray(n+28,n+28+f));return{refIdToName:h,refNameToId:A,skipLines:u,metaChar:c,columnNumbers:a,format:o,coordinateType:s}}async _parse(e={}){const n=await Tr(await this.filehandle.readFile(e)),i=new DataView(n.buffer);let r;if(i.getUint32(0,!0)===CL)r=1;else if(i.getUint32(0,!0)===EL)r=2;else throw new Error("Not a CSI file");this.minShift=i.getInt32(4,!0),this.depth=i.getInt32(8,!0),this.maxBinNumber=((1<<(this.depth+1)*3)-1)/7;const s=2**(this.minShift+this.depth*3),o=i.getInt32(12,!0),a=o&&o>=30?this.parseAuxData(n,16):{refIdToName:[],refNameToId:{},metaChar:void 0,columnNumbers:{ref:0,start:1,end:2},coordinateType:"zero-based-half-open",format:"generic"},l=i.getInt32(16+o,!0);let c,u=16+o+4;const f=new Array(l).fill(0).map(()=>{const h=i.getInt32(u,!0);u+=4;const A={};let d;for(let g=0;g<h;g+=1){const m=i.getUint32(u,!0);if(m>this.maxBinNumber)d=this.parsePseudoBin(n,u+4),u+=48;else{const p=Pr(n,u+4);c=this._findFirstData(c,p);const w=i.getInt32(u+12,!0);u+=16;const C=new Array(w);for(let y=0;y<w;y+=1){const x=Pr(n,u),I=Pr(n,u+8);u+=16,C[y]=new Uc(x,I,m)}A[m]=C}}return{binIndex:A,stats:d}});return{...a,csi:!0,refCount:l,maxBlockSize:65536,firstDataLine:c,csiVersion:r,indices:f,depth:this.depth,maxBinNumber:this.maxBinNumber,maxRefLength:s}}parsePseudoBin(e,n){return{lineCount:pE(e,n+28)}}async blocksForRange(e,n,i,r={}){n<0&&(n=0);const s=await this.parse(r),o=s.refNameToId[e];if(o===void 0)return[];const a=s.indices[o];if(!a)return[];const l=this.reg2bins(n,i),c=[];for(const[u,f]of l)for(let h=u;h<=f;h++)if(a.binIndex[h])for(const A of a.binIndex[h])c.push(new Uc(A.minv,A.maxv,h));return mE(c,new eh(0,0))}reg2bins(e,n){e-=1,e<1&&(e=1),n>2**50&&(n=2**34),n-=1;let i=0,r=0,s=this.minShift+this.depth*3;const o=[];for(;i<=this.depth;s-=3,r+=xL(1,i*3),i+=1){const a=r+wE(e,s),l=r+wE(n,s);if(l-a+o.length>this.maxBinNumber)throw new Error(`query ${e}-${n} is too large for current binning scheme (shift ${this.minShift}, depth ${this.depth}), try a smaller query or a coarser index binning scheme`);o.push([a,l])}return o}}const IL=21578324,yE=14;function BL(t,e){return t+=1,e-=1,[[0,0],[1+(t>>26),1+(e>>26)],[9+(t>>23),9+(e>>23)],[73+(t>>20),73+(e>>20)],[585+(t>>17),585+(e>>17)],[4681+(t>>14),4681+(e>>14)]]}class Lr extends dE{async lineCount(e,n={}){const i=await this.parse(n),r=i.refNameToId[e];return r===void 0||!i.indices[r]?-1:i.indices[r].stats?.lineCount??-1}async _parse(e={}){const n=await this.filehandle.readFile(e),i=await Tr(n),r=new DataView(i.buffer);if(r.getUint32(0,!0)!==IL)throw new Error("Not a TBI file");const o=r.getUint32(4,!0),a=r.getUint32(8,!0),l=a&65536?"zero-based-half-open":"1-based-closed",u={0:"generic",1:"SAM",2:"VCF"}[a&15];if(!u)throw new Error(`invalid Tabix preset format flags ${a}`);const f={ref:r.getInt32(12,!0),start:r.getInt32(16,!0),end:r.getInt32(20,!0)},h=r.getInt32(24,!0),A=5,d=((1<<(A+1)*3)-1)/7,g=2**(14+A*3),m=h?String.fromCharCode(h):void 0,p=r.getInt32(28,!0),w=r.getInt32(32,!0),{refNameToId:C,refIdToName:y}=this._parseNameBytes(i.slice(36,36+w));let x=36+w,I;return{indices:new Array(o).fill(0).map(()=>{const S=r.getInt32(x,!0);x+=4;const D={};let v;for(let M=0;M<S;M+=1){const O=r.getUint32(x,!0);if(x+=4,O>d+1)throw new Error("tabix index contains too many bins, please use a CSI index");if(O===d+1){const z=r.getInt32(x,!0);x+=4,z===2&&(v=this.parsePseudoBin(i,x)),x+=16*z}else{const z=r.getInt32(x,!0);x+=4;const _=new Array(z);for(let Y=0;Y<z;Y+=1){const te=Pr(i,x),ae=Pr(i,x+8);x+=16,I=this._findFirstData(I,te),_[Y]=new Uc(te,ae,O)}D[O]=_}}const F=r.getInt32(x,!0);x+=4;const R=new Array(F);for(let M=0;M<F;M+=1)R[M]=Pr(i,x),x+=8,I=this._findFirstData(I,R[M]);return{binIndex:D,linearIndex:R,stats:v}}),metaChar:m,maxBinNumber:d,maxRefLength:g,skipLines:p,firstDataLine:I,columnNumbers:f,coordinateType:l,format:u,refIdToName:y,refNameToId:C,maxBlockSize:65536}}parsePseudoBin(e,n){return{lineCount:pE(e,n+16)}}async blocksForRange(e,n,i,r={}){n<0&&(n=0);const s=await this.parse(r),o=s.refNameToId[e];if(o===void 0)return[];const a=s.indices[o];if(!a)return[];(a.linearIndex.length>0?a.linearIndex[n>>yE>=a.linearIndex.length?a.linearIndex.length-1:n>>yE]:new eh(0,0))||console.warn("querying outside of possible tabix range");const c=BL(n,i),u=[];for(const[g,m]of c)for(let p=g;p<=m;p++)if(a.binIndex[p])for(const w of a.binIndex[p])u.push(new Uc(w.minv,w.maxv,p));const f=a.linearIndex.length;let h;const A=Math.min(n>>14,f-1),d=Math.min(i>>14,f-1);for(let g=A;g<=d;++g){const m=a.linearIndex[g];m&&(!h||m.compareTo(h)<0)&&(h=m)}return mE(u,h)}}class vL{constructor({path:e,filehandle:n,url:i,tbiPath:r,tbiUrl:s,tbiFilehandle:o,csiPath:a,csiUrl:l,csiFilehandle:c,renameRefSeqs:u,chunkCacheSize:f=5*2**20}){this.cache=new go({maxSize:1e3});const h=u??(A=>A);if(n)this.filehandle=n;else if(e)this.filehandle=new We(e);else if(i)this.filehandle=new Ht(i);else throw new TypeError("must provide either filehandle or path");if(o)this.index=new Lr({filehandle:o,renameRefSeqs:h});else if(c)this.index=new _c({filehandle:c,renameRefSeqs:h});else if(r)this.index=new Lr({filehandle:new We(r),renameRefSeqs:h});else if(a)this.index=new _c({filehandle:new We(a),renameRefSeqs:h});else if(e)this.index=new Lr({filehandle:new We(`${e}.tbi`),renameRefSeqs:h});else if(l)this.index=new _c({filehandle:new Ht(l)});else if(s)this.index=new Lr({filehandle:new Ht(s)});else if(i)this.index=new Lr({filehandle:new Ht(`${i}.tbi`)});else throw new TypeError("must provide one of tbiFilehandle, tbiPath, csiFilehandle, csiPath, tbiUrl, csiUrl");this.renameRefSeq=h,this.hasCustomRenameRefSeq=u!==void 0,this.chunkCache=new br({cache:new go({maxSize:Math.floor(f/65536)}),fill:(A,d)=>this.readChunk(A,{signal:d})})}calculateFileOffset(e,n,i,r,s){return e[i]*256+(r-n[i])+s+1}async getLines(e,n,i,r){let s,o={},a;typeof r=="function"?a=r:(o=r,a=r.lineCallback,s=r.signal);const l=await this.index.getMetadata(o),c=n??0,u=i??l.maxRefLength;if(!(c<=u))throw new TypeError("invalid start and end coordinates. start must be less than or equal to end");if(c===u)return;const f=await this.index.blocksForRange(e,c,u,o),h=new TextDecoder("utf8"),A=l.format==="VCF",d={ref:l.columnNumbers.ref||0,start:l.columnNumbers.start||0,end:A?8:l.columnNumbers.end||0},g=Math.max(d.ref,d.start,d.end),m=l.metaChar?.charCodeAt(0),p=l.coordinateType==="1-based-closed"?-1:0,w=!this.hasCustomRenameRefSeq;for(const C of f){const{buffer:y,cpositions:x,dpositions:I}=await this.chunkCache.get(C.toString(),C,s);let b=0,S=0;const D=h.decode(y);if(y.length==D.length)for(;b<D.length;){const F=D.indexOf(`
`,b);if(F===-1)break;const R=D.slice(b,F);if(I){const O=b+C.minv.dataPosition;for(;S<I.length&&O>=I[S];)S++}const M=this.checkLine(e,c,u,R,d.ref,d.start,d.end,g,m,p,A,w);if(M===null)return;M!==void 0&&a(R,this.calculateFileOffset(x,I,S,b,C.minv.dataPosition),M.start,M.end),b=F+1}else for(;b<y.length;){const F=y.indexOf(10,b);if(F===-1)break;const R=y.slice(b,F),M=h.decode(R);if(I){const z=b+C.minv.dataPosition;for(;S<I.length&&z>=I[S];)S++}const O=this.checkLine(e,c,u,M,d.ref,d.start,d.end,g,m,p,A,w);if(O===null)return;O!==void 0&&a(M,this.calculateFileOffset(x,I,S,b,C.minv.dataPosition),O.start,O.end),b=F+1}}}async getMetadata(e={}){return this.index.getMetadata(e)}async getHeaderBuffer(e={}){const{firstDataLine:n,metaChar:i,maxBlockSize:r}=await this.getMetadata(e),s=(n?.blockPosition||0)+r,o=await this.filehandle.read(s,0,e),a=await Tr(o);if(i){let l=-1;const c=10,u=i.charCodeAt(0);for(let f=0,h=a.length;f<h;f++){const A=a[f];if(f===l+1&&A!==u)break;A===c&&(l=f)}return a.subarray(0,l+1)}return a}async getHeader(e={}){const n=new TextDecoder("utf8"),i=await this.getHeaderBuffer(e);return n.decode(i)}async getReferenceSequenceNames(e={}){return(await this.getMetadata(e)).refIdToName}checkLine(e,n,i,r,s,o,a,l,c,u,f,h){if(c!==void 0&&r.charCodeAt(0)===c)return;if(r.length<500){const C=r.split("	"),y=C[s-1];if(!(h?y===e:this.renameRefSeq(y)===e))return;const I=+C[o-1]+u;if(I>=i)return null;let b;return a===0||a===o?b=I+1:f?b=this._getVcfEnd(I,C[3],C[a-1]):b=+C[a-1],b<=n?void 0:{start:I,end:b}}let A=-1;const d=[-1];for(let C=0;C<l;C++){const y=r.indexOf("	",A+1);if(y===-1){d.push(r.length);break}d.push(y),A=y}const g=r.slice(d[s-1]+1,d[s]);if(!(h?g===e:this.renameRefSeq(g)===e))return;const p=+r.slice(d[o-1]+1,d[o])+u;if(p>=i)return null;let w;if(a===0||a===o?w=p+1:f?w=this._getVcfEnd(p,r.slice(d[3]+1,d[4]),r.slice(d[a-1]+1,d[a])):w=+r.slice(d[a-1]+1,d[a]),!(w<=n))return{start:p,end:w}}_getVcfEnd(e,n,i){let r=e+n.length;if(i.includes("SVTYPE=TRA"))return e+1;if(i[0]!=="."){const o=i.indexOf("END=");if(o!==-1&&(o===0||i[o-1]===";")){const a=o+4;let l=i.indexOf(";",a);l===-1&&(l=i.length),r=Number.parseInt(i.slice(a,l),10)}}return r}async lineCount(e,n={}){return this.index.lineCount(e,n)}async readChunk(e,n={}){const i=await this.filehandle.read(e.fetchedSize(),e.minv.blockPosition,n);return oE(i,e,this.cache)}}const SL=Object.freeze(Object.defineProperty({__proto__:null,CSI:_c,TBI:Lr,TabixIndexedFile:vL},Symbol.toStringTag,{value:"Module"})),DL=/%([0-9A-Fa-f]{2})/g,QL=/^\s*##\s*(\S+)\s*(.*)/,kL=/\r?\n$/,CE=/\s+/,EE=/\D/g;function Gc(t){return t.includes("%")?t.replaceAll(DL,(e,n)=>String.fromCharCode(parseInt(n,16))):t}function FL(t){if(!t.length||t===".")return{};const e={};let n=t;n.endsWith(`
`)&&(n=n.slice(0,n.endsWith(`\r
`)?-2:-1));for(const i of n.split(";")){const r=i.indexOf("=");if(r===-1)continue;const s=i.slice(r+1);if(!s.length)continue;const o=i.slice(0,r).trim();let a=e[o];a||(a=[],e[o]=a);for(const l of s.split(","))a.push(Gc(l.trim()))}return e}function RL(t){if(!t.length||t===".")return{};const e={};let n=t;n.endsWith(`
`)&&(n=n.slice(0,n.endsWith(`\r
`)?-2:-1));for(const i of n.split(";")){const r=i.indexOf("=");if(r===-1)continue;const s=i.slice(r+1);if(!s.length)continue;const o=i.slice(0,r).trim();let a=e[o];a||(a=[],e[o]=a);for(const l of s.split(","))a.push(l.trim())}return e}function NL(t){return th(t.split("	"))}function Ue(t){return t==="."||t===""||t===void 0?null:t}function th(t){const e=Ue(t[0]),n=Ue(t[1]),i=Ue(t[2]),r=Ue(t[3]),s=Ue(t[4]),o=Ue(t[5]),a=Ue(t[6]),l=Ue(t[7]),c=Ue(t[8]);return{seq_id:e?Gc(e):null,source:n?Gc(n):null,type:i?Gc(i):null,start:r===null?null:parseInt(r,10),end:s===null?null:parseInt(s,10),score:o===null?null:parseFloat(o),strand:a,phase:l,attributes:c===null?null:FL(c)}}function ML(t){const e=Ue(t[0]),n=Ue(t[1]),i=Ue(t[2]),r=Ue(t[3]),s=Ue(t[4]),o=Ue(t[5]),a=Ue(t[6]),l=Ue(t[7]),c=Ue(t[8]);return{seq_id:e,source:n,type:i,start:r===null?null:parseInt(r,10),end:s===null?null:parseInt(s,10),score:o===null?null:parseFloat(o),strand:a,phase:l,attributes:c===null?null:RL(c)}}function TL(t){const e=QL.exec(t);if(!e)return null;const[,n]=e;let[,,i]=e;const r={directive:n};if(i.length&&(i=i.replace(kL,""),r.value=i),n==="sequence-region"){const s=i.split(CE,3);return{...r,seq_id:s[0],start:s[1]?.replaceAll(EE,""),end:s[2]?.replaceAll(EE,"")}}else if(n==="genome-build"){const[s,o]=i.split(CE,2);return{...r,source:s,buildName:o}}return r}const PL=/^\s*[^#\s>]/,LL=/^\s*(#+)(.*)/,OL=/^\s*$/,UL=/^\s*>/,_L=/\r?\n?$/g;class zc{featureCallback;endCallback;commentCallback;errorCallback;disableDerivesFromReferences;directiveCallback;bufferSize;eof=!1;lineNumber=0;_underConstructionTopLevel=[];_underConstructionById={};_completedReferences={};_underConstructionOrphans={};constructor(e){const n=()=>{};this.featureCallback=e.featureCallback||n,this.endCallback=e.endCallback||n,this.commentCallback=e.commentCallback||n,this.errorCallback=e.errorCallback||n,this.directiveCallback=e.directiveCallback||n,this.disableDerivesFromReferences=e.disableDerivesFromReferences||!1,this.bufferSize=e.bufferSize===void 0?1/0:e.bufferSize}addLine(e){if(this.eof)return;if(this.lineNumber+=1,PL.test(e)){this._bufferLine(e);return}const n=LL.exec(e);if(n){const[,i]=n;let[,,r]=n;if(i.length===3)this._emitAllUnderConstructionFeatures();else if(i.length===2){const s=TL(e);s&&(s.directive==="FASTA"?(this._emitAllUnderConstructionFeatures(),this.eof=!0):this._emitItem(s))}else this._emitItem({comment:r.trimStart()})}else if(!OL.test(e))if(UL.test(e))this._emitAllUnderConstructionFeatures(),this.eof=!0;else{const i=e.replaceAll(_L,"");throw new Error(`GFF3 parse error.  Cannot parse '${i}'.`)}}addParsedFeatureLine(e){this.eof||(this.lineNumber+=1,this._bufferParsedLine(e))}finish(){this._emitAllUnderConstructionFeatures(),this.endCallback()}_emitItem(e){Array.isArray(e)?this.featureCallback(e):"directive"in e?this.directiveCallback(e):"comment"in e&&this.commentCallback(e)}_enforceBufferSizeLimit(e=0){const n=i=>{i&&Array.isArray(i)&&i[0].attributes?.ID?.[0]&&(i[0].attributes.ID.forEach(s=>{delete this._underConstructionById[s],delete this._completedReferences[s]}),i.forEach(s=>{s.child_features&&s.child_features.forEach(o=>{n(o)}),s.derived_features&&s.derived_features.forEach(o=>{n(o)})}))};for(;this._underConstructionTopLevel.length+e>this.bufferSize;){const i=this._underConstructionTopLevel.shift();i&&(this._emitItem(i),n(i))}}_emitAllUnderConstructionFeatures(){this._underConstructionTopLevel.forEach(this._emitItem.bind(this)),this._underConstructionTopLevel=[],this._underConstructionById={},this._completedReferences={};const e=Object.keys(this._underConstructionOrphans);if(e.length)throw new Error(`some features reference other features that do not exist in the file (or in the same '###' scope). ${e.join(",")}`)}_bufferLine(e){this._bufferParsedLine(NL(e))}_bufferParsedLine(e){const n=e;n.child_features=[],n.derived_features=[];const i=n.attributes?.ID||[],r=n.attributes?.Parent||[],s=this.disableDerivesFromReferences?[]:n.attributes?.Derives_from||[];if(!i.length&&!r.length&&!s.length){this._emitItem([n]);return}let o;i.forEach(a=>{const l=this._underConstructionById[a];l?(l[l.length-1].type!==n.type&&this._parseError(`multi-line feature "${a}" has inconsistent types: "${n.type}", "${l[l.length-1].type}"`),l.push(n),o=l):(o=[n],this._enforceBufferSizeLimit(1),!r.length&&!s.length&&this._underConstructionTopLevel.push(o),this._underConstructionById[a]=o,this._resolveReferencesTo(o,a))}),this._resolveReferencesFrom(o||[n],{Parent:r,Derives_from:s},i)}_resolveReferencesTo(e,n){const i=this._underConstructionOrphans[n];if(i){for(const r of e)r.child_features.push(...i.Parent),r.derived_features.push(...i.Derives_from);delete this._underConstructionOrphans[n]}}_parseError(e){this.eof=!0,this.errorCallback(`${this.lineNumber}: ${e}`)}_resolveReferencesFrom(e,n,i){for(const r of n.Parent){const s=this._underConstructionById[r];if(s){let o=!1;for(const a of i){const l=`Parent,${r}`,c=this._completedReferences[a]||(this._completedReferences[a]={});c[l]&&(o=!0),c[l]=!0}if(!o)for(const a of s)a.child_features.push(e)}else{let o=this._underConstructionOrphans[r];o||(o={Parent:[],Derives_from:[]},this._underConstructionOrphans[r]=o),o.Parent.push(e)}}for(const r of n.Derives_from){const s=this._underConstructionById[r];if(s){let o=!1;for(const a of i){const l=`Derives_from,${r}`,c=this._completedReferences[a]||(this._completedReferences[a]={});c[l]&&(o=!0),c[l]=!0}if(!o)for(const a of s)a.derived_features.push(e)}else{let o=this._underConstructionOrphans[r];o||(o={Parent:[],Derives_from:[]},this._underConstructionOrphans[r]=o),o.Derives_from.push(e)}}}}function GL(t){const e=[],n=new zc({featureCallback:i=>e.push(i),disableDerivesFromReferences:!0,errorCallback:i=>{throw new Error(i)}});for(const i of t.split(/\r?\n/))n.addLine(i);return n.finish(),e}function zL(t){const e=[],n=new zc({featureCallback:i=>e.push(i),disableDerivesFromReferences:!0,errorCallback:i=>{throw new Error(i)}});for(const i of t)n.addLine(i);return n.finish(),e}function HL(t){const e=[],n=new zc({featureCallback:i=>e.push(i),disableDerivesFromReferences:!0,errorCallback:i=>{throw new Error(i)}});for(const i of t){const r=th(i.fields);i.lineHash!==void 0&&(r.attributes||(r.attributes={}),r.attributes._lineHash=[String(i.lineHash)]),n.addParsedFeatureLine(r)}return n.finish(),e}function YL(t,e){const n=[],i=new zc({featureCallback:s=>n.push(s),disableDerivesFromReferences:!0,errorCallback:s=>{throw new Error(s)}}),r=e?th:ML;for(const s of t){const o=r(s.fields);s.lineHash!==void 0&&(o.attributes||(o.attributes={}),o.attributes._lineHash=[String(s.lineHash)]),i.addParsedFeatureLine(o)}return i.finish(),n}const VL=Object.freeze(Object.defineProperty({__proto__:null,parseArraySync:zL,parseRecordsSync:HL,parseRecordsSyncFast:YL,parseStringSync:GL},Symbol.toStringTag,{value:"Module"}));function JL(t,e,n){const i=Object.create(null),r=n.length,s=e.length,o=9,a=58;let l=0;if(t==="GT"){for(let f=0;f<r;f++){const h=l;for(;l<s&&e.charCodeAt(l)!==o;)l++;i[n[f]]=e.slice(h,l),l++}return i}const c=t.indexOf("GT");if(c===-1)return i;if(c===0){for(let f=0;f<r;f++){const h=l;for(;l<s&&e.charCodeAt(l)!==a&&e.charCodeAt(l)!==o;)l++;for(i[n[f]]=e.slice(h,l);l<s&&e.charCodeAt(l)!==o;)l++;l++}return i}let u=0;for(let f=0;f<c;f++)t.charCodeAt(f)===a&&u++;for(let f=0;f<r;f++){const h=l;let A=l;for(;A<s&&e.charCodeAt(A)!==o;)A++;let d=0,g=h;for(let m=h;m<=A;m++)if(m===A||e.charCodeAt(m)===a){if(d===u){i[n[f]]=e.slice(g,m);break}d++,g=m+1}l=A+1}return i}function qL(t){const e=[],n=[];let i=!1,r=!1;const s=t.length;for(let o=0;o<s;o++){const a=t[o];a==='"'?(i=!i,n.push(a)):a==="["?(r=!0,n.push(a)):a==="]"?(r=!1,n.push(a)):a===","&&!i&&!r?(e.push(n.join("").trim()),n.length=0):n.push(a)}return n.length>0&&e.push(n.join("").trim()),e}function KL(t,e){const n=t.indexOf(e);return[t.slice(0,n),t.slice(n+1)]}function jL(t){const e=t.slice(1,-1),n=qL(e),i=[];for(let r=0;r<n.length;r++){const s=n[r],[o,a]=KL(s,"=");if(a&&a.startsWith("[")&&a.endsWith("]")){const l=a.slice(1,-1).split(",");for(let c=0;c<l.length;c++)l[c]=l[c].trim();i.push([o,l])}else a&&a.startsWith('"')&&a.endsWith('"')?i.push([o,a.slice(1,-1)]):i.push([o,a])}return Object.fromEntries(i)}const Hc={InfoFields:{AA:{Number:1,Type:"String",Description:"Ancestral allele"},AC:{Number:"A",Type:"Integer",Description:"Allele count in genotypes, for each ALT allele, in the same order as listed"},AD:{Number:"R",Type:"Integer",Description:"Total read depth for each allele"},ADF:{Number:"R",Type:"Integer",Description:"Read depth for each allele on the forward strand"},ADR:{Number:"R",Type:"Integer",Description:"Read depth for each allele on the reverse strand"},AF:{Number:"A",Type:"Float",Description:"Allele frequency for each ALT allele in the same order as listed (estimated from primary data, not called genotypes)"},AN:{Number:1,Type:"Integer",Description:"Total number of alleles in called genotypes"},BQ:{Number:1,Type:"Float",Description:"RMS base quality"},CIGAR:{Number:1,Type:"Float",Description:"Cigar string describing how to align an alternate allele to the reference allele"},DB:{Number:0,Type:"Flag",Description:"dbSNP membership"},DP:{Number:1,Type:"Integer",Description:"combined depth across samples"},END:{Number:1,Type:"Integer",Description:"End position (for use with symbolic alleles)"},H2:{Number:0,Type:"Flag",Description:"HapMap2 membership"},H3:{Number:0,Type:"Flag",Description:"HapMap3 membership"},MQ:{Number:1,Type:null,Description:"RMS mapping quality"},MQ0:{Number:1,Type:"Integer",Description:"Number of MAPQ == 0 reads"},NS:{Number:1,Type:"Integer",Description:"Number of samples with data"},SB:{Number:4,Type:"Integer",Description:"Strand bias"},SOMATIC:{Number:0,Type:"Flag",Description:"Somatic mutation (for cancer genomics)"},VALIDATED:{Number:0,Type:"Flag",Description:"Validated by follow-up experiment"},"1000G":{Number:0,Type:"Flag",Description:"1000 Genomes membership"},IMPRECISE:{Number:0,Type:"Flag",Description:"Imprecise structural variation"},NOVEL:{Number:0,Type:"Flag",Description:"Indicates a novel structural variation"},SVTYPE:{Number:1,Type:"String",Description:"Type of structural variant"},SVLEN:{Number:null,Type:"Integer",Description:"Difference in length between REF and ALT alleles"},CIPOS:{Number:2,Type:"Integer",Description:"Confidence interval around POS for imprecise variants"},CIEND:{Number:2,Type:"Integer",Description:"Confidence interval around END for imprecise variants"},HOMLEN:{Type:"Integer",Description:"Length of base pair identical micro-homology at event breakpoints"},HOMSEQ:{Type:"String",Description:"Sequence of base pair identical micro-homology at event breakpoints"},BKPTID:{Type:"String",Description:"ID of the assembled alternate allele in the assembly file"},MEINFO:{Number:4,Type:"String",Description:"Mobile element info of the form NAME,START,END,POLARITY"},METRANS:{Number:4,Type:"String",Description:"Mobile element transduction info of the form CHR,START,END,POLARITY"},DGVID:{Number:1,Type:"String",Description:"ID of this element in Database of Genomic Variation"},DBVARID:{Number:1,Type:"String",Description:"ID of this element in DBVAR"},DBRIPID:{Number:1,Type:"String",Description:"ID of this element in DBRIP"},MATEID:{Number:null,Type:"String",Description:"ID of mate breakends"},PARID:{Number:1,Type:"String",Description:"ID of partner breakend"},EVENT:{Number:1,Type:"String",Description:"ID of event associated to breakend"},CILEN:{Number:2,Type:"Integer",Description:"Confidence interval around the inserted material between breakend"},DPADJ:{Type:"Integer",Description:"Read Depth of adjacency"},CN:{Number:1,Type:"Integer",Description:"Copy number of segment containing breakend"},CNADJ:{Number:null,Type:"Integer",Description:"Copy number of adjacency"},CICN:{Number:2,Type:"Integer",Description:"Confidence interval around copy number for the segment"},CICNADJ:{Number:null,Type:"Integer",Description:"Confidence interval around copy number for the adjacency"}},GenotypeFields:{AD:{Number:"R",Type:"Integer",Description:"Read depth for each allele"},ADF:{Number:"R",Type:"Integer",Description:"Read depth for each allele on the forward strand"},ADR:{Number:"R",Type:"Integer",Description:"Read depth for each allele on the reverse strand"},DP:{Number:1,Type:"Integer",Description:"Read depth"},EC:{Number:"A",Type:"Integer",Description:"Expected alternate allele counts"},FT:{Number:1,Type:"String",Description:'Filter indicating if this genotype was "called"'},GL:{Number:"G",Type:"Float",Description:"Genotype likelihoods"},GP:{Number:"G",Type:"Float",Description:"Genotype posterior probabilities"},GQ:{Number:1,Type:"Integer",Description:"Conditional genotype quality"},GT:{Number:1,Type:"String",Description:"Genotype"},HQ:{Number:2,Type:"Integer",Description:"Haplotype quality"},MQ:{Number:1,Type:"Integer",Description:"RMS mapping quality"},PL:{Number:"G",Type:"Integer",Description:"Phred-scaled genotype likelihoods rounded to the closest integer"},PQ:{Number:1,Type:"Integer",Description:"Phasing quality"},PS:{Number:1,Type:"Integer",Description:"Phase set"}},AltTypes:{DEL:{Description:"Deletion relative to the reference"},INS:{Description:"Insertion of novel sequence relative to the reference"},DUP:{Description:"Region of elevated copy number relative to the reference"},INV:{Description:"Inversion of reference sequence"},CNV:{Description:"Copy number variable region (may be both deletion and duplication)"},"DUP:TANDEM":{Description:"Tandem duplication"},"DEL:ME":{Description:"Deletion of mobile element relative to the reference"},"INS:ME":{Description:"Insertion of a mobile element relative to the reference"},NON_REF:{Description:"Represents any possible alternative allele at this location"},"*":{Description:"Represents any possible alternative allele at this location"}},FilterTypes:{PASS:{Description:"Passed all filters"}}};function WL(t){try{return decodeURIComponent(t)}catch{return t}}class XL{constructor({header:e="",strict:n=!0}){if(!e.length)throw new Error("empty header received");const i=e.split(/[\r\n]+/).filter(Boolean);if(!i.length)throw new Error("no non-empty header lines specified");this.strict=n,this.metadata={INFO:{...Hc.InfoFields},FORMAT:{...Hc.GenotypeFields},ALT:{...Hc.AltTypes},FILTER:{...Hc.FilterTypes}};let r;for(let l=0;l<i.length;l++){const c=i[l];if(c.startsWith("#"))c.startsWith("##")?this.parseMetadata(c):r=c;else throw new Error(`Bad line in header:
${c}`)}if(!r)throw new Error("No format line found in header");const s=r.trim().split("	"),o=s.slice(0,8),a=["#CHROM","POS","ID","REF","ALT","QUAL","FILTER","INFO"];if(s.length<8)throw new Error(`VCF header missing columns:
${r}`);if(o.length!==a.length||!o.every((l,c)=>l===a[c]))throw new Error(`VCF column headers not correct:
${r}`);this.samples=s.slice(9)}parseInfo(e){const n={},i=e.includes("%"),r=e.split(";"),s=this.metadata.INFO,o=r.length;for(let a=0;a<o;a++){const l=r[a],c=l.indexOf("="),u=c===-1?l:l.slice(0,c),f=c===-1?void 0:l.slice(c+1),h=s[u]?.Type;if(h==="Flag")n[u]=!0;else if(!f)n[u]=!0;else{const A=h==="Integer"||h==="Float",d=f.split(","),g=d.length;if(i){const m=[];for(let p=0;p<g;p++){const w=d[p];if(w===".")m.push(void 0);else{const C=WL(w);m.push(A?Number(C):C)}}n[u]=m}else{const m=[];for(let p=0;p<g;p++){const w=d[p];w==="."?m.push(void 0):m.push(A?Number(w):w)}n[u]=m}}}return n}parseSamples(e,n){const i={};if(e){const r=n.split("	"),s=e.split(":"),o=this.metadata.FORMAT,a=[];for(let u=0;u<s.length;u++){const f=o[s[u]]?.Type;a.push(f==="Integer"||f==="Float")}const l=s.length,c=this.samples.length;for(let u=0;u<c;u++){const f=this.samples[u],h={},A=r[u],d=A.length;let g=0,m=0;for(let p=0;p<=d;p++)if(p===d||A[p]===":"){const w=A.slice(g,p);if(w===""||w===".")h[s[m]]=void 0;else{const C=w.split(","),y=[];if(a[m])for(let x=0;x<C.length;x++){const I=C[x];y.push(I==="."?void 0:+I)}else for(let x=0;x<C.length;x++){const I=C[x];y.push(I==="."?void 0:I)}h[s[m]]=y}if(g=p+1,m+=1,m>=l)break}i[f]=h}}return i}parseMetadata(e){const n=/^##(.+?)=(.*)/.exec(e.trim());if(!n)throw new Error(`Line is not a valid metadata line: ${e}`);const[i,r]=n.slice(1,3),s=i;if(r?.startsWith("<")){s in this.metadata||(this.metadata[s]={});const[o,a]=this.parseStructuredMetaVal(r);o?this.metadata[s][o]=a:this.metadata[s]=a}else this.metadata[s]=r}parseStructuredMetaVal(e){const n=jL(e),i=n.ID;return delete n.ID,"Number"in n&&(Number.isNaN(Number(n.Number))||(n.Number=Number(n.Number))),[i,n]}getMetadata(...e){let n=this.metadata;const i=e.length;for(let r=0;r<i;r++)if(n=n[e[r]],!n)return n;return n}parseLine(e){let n=0,i=0;for(;n<e.length&&i<9;)e[n]==="	"&&(i+=1),n+=1;const r=i===9?n-1:n,s=e.slice(0,r).split("	"),o=e.slice(r+1),[a,l,c,u,f,h,A]=s,d=a,g=+l,m=c==="."?void 0:c.split(";"),p=u,w=f==="."?void 0:f.split(","),C=h==="."?void 0:+h,y=A==="."?void 0:A.split(";"),x=s[8];if(this.strict&&!s[7])throw new Error("no INFO field specified, must contain at least a '.' (turn off strict mode to allow)");const I=s[7]===void 0||s[7]==="."?{}:this.parseInfo(s[7]);return{CHROM:d,POS:g,ALT:w,INFO:I,REF:p,FILTER:y?.length===1&&y[0]==="PASS"?"PASS":y,ID:m,QUAL:C,FORMAT:x,SAMPLES:()=>this.parseSamples(s[8]??"",o),GENOTYPES:()=>JL(s[8]??"",o,this.samples)}}}const ZL=Object.freeze(Object.defineProperty({__proto__:null,default:XL},Symbol.toStringTag,{value:"Module"})),bE=["BOOLEAN","INT32","INT64","INT96","FLOAT","DOUBLE","BYTE_ARRAY","FIXED_LEN_BYTE_ARRAY"],Qi=["PLAIN","GROUP_VAR_INT","PLAIN_DICTIONARY","RLE","BIT_PACKED","DELTA_BINARY_PACKED","DELTA_LENGTH_BYTE_ARRAY","DELTA_BYTE_ARRAY","RLE_DICTIONARY","BYTE_STREAM_SPLIT"],$L=["REQUIRED","OPTIONAL","REPEATED"],e5=["UTF8","MAP","MAP_KEY_VALUE","LIST","ENUM","DECIMAL","DATE","TIME_MILLIS","TIME_MICROS","TIMESTAMP_MILLIS","TIMESTAMP_MICROS","UINT_8","UINT_16","UINT_32","UINT_64","INT_8","INT_16","INT_32","INT_64","JSON","BSON","INTERVAL"],t5=["UNCOMPRESSED","SNAPPY","GZIP","LZO","BROTLI","LZ4","ZSTD","LZ4_RAW"],xE=["DATA_PAGE","INDEX_PAGE","DICTIONARY_PAGE","DATA_PAGE_V2"],n5=["SPHERICAL","VINCENTY","THOMAS","ANDOYER","KARNEY"];function nh(t){const e=Yc(t);if(e.type===1)return{type:"Point",coordinates:ih(t,e)};if(e.type===2)return{type:"LineString",coordinates:rh(t,e)};if(e.type===3)return{type:"Polygon",coordinates:IE(t,e)};if(e.type===4){const n=[];for(let i=0;i<e.count;i++)n.push(ih(t,Yc(t)));return{type:"MultiPoint",coordinates:n}}else if(e.type===5){const n=[];for(let i=0;i<e.count;i++)n.push(rh(t,Yc(t)));return{type:"MultiLineString",coordinates:n}}else if(e.type===6){const n=[];for(let i=0;i<e.count;i++)n.push(IE(t,Yc(t)));return{type:"MultiPolygon",coordinates:n}}else if(e.type===7){const n=[];for(let i=0;i<e.count;i++)n.push(nh(t));return{type:"GeometryCollection",geometries:n}}else throw new Error(`Unsupported geometry type: ${e.type}`)}function Yc(t){const{view:e}=t,n=e.getUint8(t.offset++)===1,i=e.getUint32(t.offset,n);t.offset+=4;const r=i%1e3,s=Math.floor(i/1e3);let o=0;r>1&&r<=7&&(o=e.getUint32(t.offset,n),t.offset+=4);let a=2;return s&&a++,s===3&&a++,{littleEndian:n,type:r,dim:a,count:o}}function ih(t,e){const n=[];for(let i=0;i<e.dim;i++){const r=t.view.getFloat64(t.offset,e.littleEndian);t.offset+=8,n.push(r)}return n}function rh(t,e){const n=[];for(let i=0;i<e.count;i++)n.push(ih(t,e));return n}function IE(t,e){const{view:n}=t,i=[];for(let r=0;r<e.count;r++){const s=n.getUint32(t.offset,e.littleEndian);t.offset+=4,i.push(rh(t,{...e,count:s}))}return i}const BE=new TextDecoder,Vc={timestampFromMilliseconds(t){return new Date(Number(t))},timestampFromMicroseconds(t){return new Date(Number(t/1000n))},timestampFromNanoseconds(t){return new Date(Number(t/1000000n))},dateFromDays(t){return new Date(t*864e5)},stringFromBytes(t){return t&&BE.decode(t)},geometryFromBytes(t){return t&&nh({view:new DataView(t.buffer,t.byteOffset,t.byteLength),offset:0})},geographyFromBytes(t){return t&&nh({view:new DataView(t.buffer,t.byteOffset,t.byteLength),offset:0})}};function vE(t,e,n,i){if(e&&n.endsWith("_DICTIONARY")){let r=t;t instanceof Uint8Array&&!(e instanceof Uint8Array)&&(r=new e.constructor(t.length));for(let s=0;s<t.length;s++)r[s]=e[t[s]];return r}else return SE(t,i)}function SE(t,e){const{element:n,parsers:i,utf8:r=!0,schemaPath:s}=e,{type:o,converted_type:a,logical_type:l}=n;if(s?.some(u=>u.element.logical_type?.type==="VARIANT")&&o==="BYTE_ARRAY"&&a!=="UTF8"&&l?.type!=="STRING")return t;if(a==="DECIMAL"){const f=10**-(n.scale||0),h=new Array(t.length);for(let A=0;A<h.length;A++)t[A]instanceof Uint8Array?h[A]=DE(t[A])*f:h[A]=Number(t[A])*f;return h}if(!a&&o==="INT96")return Array.from(t).map(u=>i.timestampFromNanoseconds(i5(u)));if(a==="DATE")return Array.from(t).map(u=>i.dateFromDays(u));if(a==="TIMESTAMP_MILLIS")return Array.from(t).map(u=>i.timestampFromMilliseconds(u));if(a==="TIMESTAMP_MICROS")return Array.from(t).map(u=>i.timestampFromMicroseconds(u));if(a==="JSON")return t.map(u=>JSON.parse(BE.decode(u)));if(a==="BSON")throw new Error("parquet bson not supported");if(a==="INTERVAL")throw new Error("parquet interval not supported");if(l?.type==="GEOMETRY")return t.map(u=>i.geometryFromBytes(u));if(l?.type==="GEOGRAPHY")return t.map(u=>i.geographyFromBytes(u));if(a==="UTF8"||l?.type==="STRING"||r&&o==="BYTE_ARRAY")return t.map(u=>i.stringFromBytes(u));if(a==="UINT_64"||l?.type==="INTEGER"&&l.bitWidth===64&&!l.isSigned){if(t instanceof BigInt64Array)return new BigUint64Array(t.buffer,t.byteOffset,t.length);const u=new BigUint64Array(t.length);for(let f=0;f<u.length;f++)u[f]=BigInt(t[f]);return u}if(a==="UINT_32"||l?.type==="INTEGER"&&l.bitWidth===32&&!l.isSigned){if(t instanceof Int32Array)return new Uint32Array(t.buffer,t.byteOffset,t.length);const u=new Uint32Array(t.length);for(let f=0;f<u.length;f++)u[f]=t[f];return u}if(l?.type==="FLOAT16")return Array.from(t).map(QE);if(l?.type==="TIMESTAMP"){const{unit:u}=l;let f=i.timestampFromMilliseconds;u==="MICROS"&&(f=i.timestampFromMicroseconds),u==="NANOS"&&(f=i.timestampFromNanoseconds);const h=new Array(t.length);for(let A=0;A<h.length;A++)h[A]=f(t[A]);return h}return t}function DE(t){if(!t.length)return 0;let e=0n;for(const i of t)e=e*256n+BigInt(i);const n=t.length*8;return e>=2n**BigInt(n-1)&&(e-=2n**BigInt(n)),Number(e)}function i5(t){const e=(t>>64n)-2440588n,n=t&0xffffffffffffffffn;return e*86400000000000n+n}function QE(t){if(!t)return;const e=t[1]<<8|t[0],n=e>>15?-1:1,i=e>>10&31,r=e&1023;return i===0?n*2**-14*(r/1024):i===31?r?NaN:n*(1/0):n*2**(i-15)*(1+r/1024)}function kE(t,e,n){const i=t[e],r=[];let s=1;if(i.num_children)for(;r.length<i.num_children;){const o=t[e+s],a=kE(t,e+s,[...n,o.name]);s+=a.count,r.push(a)}return{count:s,element:i,children:r,path:n}}function FE(t,e){let n=kE(t,0,[]);const i=[n];for(const r of e){const s=n.children.find(o=>o.element.name===r);if(!s)throw new Error(`parquet schema element not found: ${e}`);i.push(s),n=s}return i}function r5(t){const e=[];function n(i){if(i.children.length)for(const r of i.children)n(r);else e.push(i.path.join("."))}return n(t),e}function RE(t){let e=0;for(const{element:n}of t)n.repetition_type==="REPEATED"&&e++;return e}function sh(t){let e=0;for(const{element:n}of t.slice(1))n.repetition_type!=="REQUIRED"&&e++;return e}function s5(t){if(!t||t.element.converted_type!=="LIST"||t.children.length>1)return!1;const e=t.children[0];return!(e.children.length>1||e.element.repetition_type!=="REPEATED")}function o5(t){if(!t||t.element.converted_type!=="MAP"||t.children.length>1)return!1;const e=t.children[0];return!(e.children.length!==2||e.element.repetition_type!=="REPEATED"||e.children.find(r=>r.element.name==="key")?.element.repetition_type==="REPEATED"||e.children.find(r=>r.element.name==="value")?.element.repetition_type==="REPEATED")}function NE(t){if(t.length!==2)return!1;const[,e]=t;return!(e.element.repetition_type==="REPEATED"||e.children.length)}const Xe={STOP:0,TRUE:1,FALSE:2,BYTE:3,I16:4,I32:5,I64:6,DOUBLE:7,BINARY:8,LIST:9,STRUCT:12};function oh(t){let e=0;const n={};for(;t.offset<t.view.byteLength;){const[i,r,s]=TE(t,e);if(e=s,i===Xe.STOP)break;n[`field_${r}`]=Jc(t,i)}return n}function Jc(t,e){switch(e){case Xe.TRUE:return!0;case Xe.FALSE:return!1;case Xe.BYTE:return t.view.getInt8(t.offset++);case Xe.I16:case Xe.I32:return ME(t);case Xe.I64:return ah(t);case Xe.DOUBLE:{const n=t.view.getFloat64(t.offset,!0);return t.offset+=8,n}case Xe.BINARY:{const n=ki(t),i=new Uint8Array(t.view.buffer,t.view.byteOffset+t.offset,n);return t.offset+=n,i}case Xe.LIST:{const n=t.view.getUint8(t.offset++),i=n&15;let r=n>>4;r===15&&(r=ki(t));const s=i===Xe.TRUE||i===Xe.FALSE,o=new Array(r);for(let a=0;a<r;a++)o[a]=s?Jc(t,Xe.BYTE)===1:Jc(t,i);return o}case Xe.STRUCT:{const n={};let i=0;for(;;){const[r,s,o]=TE(t,i);if(i=o,r===Xe.STOP)break;n[`field_${s}`]=Jc(t,r)}return n}default:throw new Error(`thrift unhandled type: ${e}`)}}function ki(t){let e=0,n=0;for(;;){const i=t.view.getUint8(t.offset++);if(e|=(i&127)<<n,!(i&128))return e;n+=7}}function a5(t){let e=0n,n=0n;for(;;){const i=t.view.getUint8(t.offset++);if(e|=BigInt(i&127)<<n,!(i&128))return e;n+=7n}}function ME(t){const e=ki(t);return e>>>1^-(e&1)}function ah(t){const e=a5(t);return e>>1n^-(e&1n)}function TE(t,e){const n=t.view.getUint8(t.offset++),i=n&15;if(i===Xe.STOP)return[0,0,e];const r=n>>4,s=r?e+r:ME(t);return[i,s,s]}function c5(t,e){const n=new Map,i=e?.find(({key:s})=>s==="geo")?.value,r=(i&&JSON.parse(i)?.columns)??{};for(const[s,o]of Object.entries(r)){if(o.encoding!=="WKB")continue;const a=o.edges==="spherical"?"GEOGRAPHY":"GEOMETRY",l=o.crs?.id??o.crs?.ids?.[0],c=l?`${l.authority}:${l.code.toString()}`:void 0;n.set(s,{type:a,crs:c})}for(let s=1;s<t.length;s++){const o=t[s],{logical_type:a,name:l,num_children:c,repetition_type:u,type:f}=o;if(c){s+=c;continue}f==="BYTE_ARRAY"&&a===void 0&&u!=="REPEATED"&&(o.logical_type=n.get(l))}}const l5=1<<19,u5=new TextDecoder;function Jt(t){return t&&u5.decode(t)}async function f5(t,{parsers:e,initialFetchSize:n=l5,geoparquet:i=!0}={}){if(!t||!(t.byteLength>=0))throw new Error("parquet expected AsyncBuffer");const r=Math.max(0,t.byteLength-n),s=await t.slice(r,t.byteLength),o=new DataView(s);if(o.getUint32(s.byteLength-4,!0)!==827474256)throw new Error("parquet file invalid (footer != PAR1)");const a=o.getUint32(s.byteLength-8,!0);if(a>t.byteLength-8)throw new Error(`parquet metadata length ${a} exceeds available buffer ${t.byteLength-8}`);if(a+8>n){const l=t.byteLength-a-8,c=await t.slice(l,r),u=new ArrayBuffer(a+8),f=new Uint8Array(u);return f.set(new Uint8Array(c)),f.set(new Uint8Array(s),r-l),PE(u,{parsers:e,geoparquet:i})}else return PE(s,{parsers:e,geoparquet:i})}function PE(t,{parsers:e,geoparquet:n=!0}={}){if(!(t instanceof ArrayBuffer))throw new Error("parquet expected ArrayBuffer");const i=new DataView(t);if(e={...Vc,...e},i.byteLength<8)throw new Error("parquet file is too short");if(i.getUint32(i.byteLength-4,!0)!==827474256)throw new Error("parquet file invalid (footer != PAR1)");const r=i.byteLength-8,s=i.getUint32(r,!0);if(s>i.byteLength-8)throw new Error(`parquet metadata length ${s} exceeds available buffer ${i.byteLength-8}`);const o=r-s,l=oh({view:i,offset:o}),c=l.field_1,u=l.field_2.map(m=>({type:bE[m.field_1],type_length:m.field_2,repetition_type:$L[m.field_3],name:Jt(m.field_4),num_children:m.field_5,converted_type:e5[m.field_6],scale:m.field_7,precision:m.field_8,field_id:m.field_9,logical_type:A5(m.field_10)})),f=u.filter(m=>m.type),h=l.field_3,A=l.field_4.map(m=>({columns:m.field_1.map((p,w)=>({file_path:Jt(p.field_1),file_offset:p.field_2,meta_data:p.field_3&&{type:bE[p.field_3.field_1],encodings:p.field_3.field_2?.map(C=>Qi[C]),path_in_schema:p.field_3.field_3.map(Jt),codec:t5[p.field_3.field_4],num_values:p.field_3.field_5,total_uncompressed_size:p.field_3.field_6,total_compressed_size:p.field_3.field_7,key_value_metadata:p.field_3.field_8?.map(C=>({key:Jt(C.field_1),value:Jt(C.field_2)})),data_page_offset:p.field_3.field_9,index_page_offset:p.field_3.field_10,dictionary_page_offset:p.field_3.field_11,statistics:h5(p.field_3.field_12,f[w],e),encoding_stats:p.field_3.field_13?.map(C=>({page_type:xE[C.field_1],encoding:Qi[C.field_2],count:C.field_3})),bloom_filter_offset:p.field_3.field_14,bloom_filter_length:p.field_3.field_15,size_statistics:p.field_3.field_16&&{unencoded_byte_array_data_bytes:p.field_3.field_16.field_1,repetition_level_histogram:p.field_3.field_16.field_2,definition_level_histogram:p.field_3.field_16.field_3},geospatial_statistics:p.field_3.field_17&&{bbox:p.field_3.field_17.field_1&&{xmin:p.field_3.field_17.field_1.field_1,xmax:p.field_3.field_17.field_1.field_2,ymin:p.field_3.field_17.field_1.field_3,ymax:p.field_3.field_17.field_1.field_4,zmin:p.field_3.field_17.field_1.field_5,zmax:p.field_3.field_17.field_1.field_6,mmin:p.field_3.field_17.field_1.field_7,mmax:p.field_3.field_17.field_1.field_8},geospatial_types:p.field_3.field_17.field_2}},offset_index_offset:p.field_4,offset_index_length:p.field_5,column_index_offset:p.field_6,column_index_length:p.field_7,crypto_metadata:p.field_8,encrypted_column_metadata:p.field_9})),total_byte_size:m.field_2,num_rows:m.field_3,sorting_columns:m.field_4?.map(p=>({column_idx:p.field_1,descending:p.field_2,nulls_first:p.field_3})),file_offset:m.field_5,total_compressed_size:m.field_6,ordinal:m.field_7})),d=l.field_5?.map(m=>({key:Jt(m.field_1),value:Jt(m.field_2)})),g=Jt(l.field_6);return n&&c5(u,d),{version:c,schema:u,num_rows:h,row_groups:A,key_value_metadata:d,created_by:g,metadata_length:s}}function LE({schema:t}){return FE(t,[])[0]}function A5(t){return t?.field_1?{type:"STRING"}:t?.field_2?{type:"MAP"}:t?.field_3?{type:"LIST"}:t?.field_4?{type:"ENUM"}:t?.field_5?{type:"DECIMAL",scale:t.field_5.field_1,precision:t.field_5.field_2}:t?.field_6?{type:"DATE"}:t?.field_7?{type:"TIME",isAdjustedToUTC:t.field_7.field_1,unit:OE(t.field_7.field_2)}:t?.field_8?{type:"TIMESTAMP",isAdjustedToUTC:t.field_8.field_1,unit:OE(t.field_8.field_2)}:t?.field_10?{type:"INTEGER",bitWidth:t.field_10.field_1,isSigned:t.field_10.field_2}:t?.field_11?{type:"NULL"}:t?.field_12?{type:"JSON"}:t?.field_13?{type:"BSON"}:t?.field_14?{type:"UUID"}:t?.field_15?{type:"FLOAT16"}:t?.field_16?{type:"VARIANT",specification_version:t.field_16.field_1}:t?.field_17?{type:"GEOMETRY",crs:Jt(t.field_17.field_1)}:t?.field_18?{type:"GEOGRAPHY",crs:Jt(t.field_18.field_1),algorithm:n5[t.field_18.field_2]}:t}function OE(t){if(t.field_1)return"MILLIS";if(t.field_2)return"MICROS";if(t.field_3)return"NANOS";throw new Error("parquet time unit required")}function h5(t,e,n){return t&&{max:qc(t.field_1,e,n),min:qc(t.field_2,e,n),null_count:t.field_3,distinct_count:t.field_4,max_value:qc(t.field_5,e,n),min_value:qc(t.field_6,e,n),is_max_value_exact:t.field_7,is_min_value_exact:t.field_8}}function qc(t,e,n){const{type:i,converted_type:r,logical_type:s}=e;if(t===void 0)return t;if(i==="BOOLEAN")return t[0]===1;if(i==="BYTE_ARRAY")return n.stringFromBytes(t);const o=new DataView(t.buffer,t.byteOffset,t.byteLength);return i==="FLOAT"&&o.byteLength===4?o.getFloat32(0,!0):i==="DOUBLE"&&o.byteLength===8?o.getFloat64(0,!0):i==="INT32"&&r==="DATE"?n.dateFromDays(o.getInt32(0,!0)):i==="INT64"&&r==="TIMESTAMP_MILLIS"?n.timestampFromMilliseconds(o.getBigInt64(0,!0)):i==="INT64"&&r==="TIMESTAMP_MICROS"?n.timestampFromMicroseconds(o.getBigInt64(0,!0)):i==="INT64"&&s?.type==="TIMESTAMP"&&s?.unit==="NANOS"?n.timestampFromNanoseconds(o.getBigInt64(0,!0)):i==="INT64"&&s?.type==="TIMESTAMP"&&s?.unit==="MICROS"?n.timestampFromMicroseconds(o.getBigInt64(0,!0)):i==="INT64"&&s?.type==="TIMESTAMP"?n.timestampFromMilliseconds(o.getBigInt64(0,!0)):i==="INT32"&&o.byteLength===4?o.getInt32(0,!0):i==="INT64"&&o.byteLength===8?o.getBigInt64(0,!0):r==="DECIMAL"?DE(t)*10**-(e.scale||0):s?.type==="FLOAT16"?QE(t):t}function UE(t,e){for(let i=0;i<e.length;i+=1e4)t.push(...e.slice(i,i+1e4))}function Or(t,e,n=!0){if(n?t===e:t==e)return!0;if(t instanceof Uint8Array&&e instanceof Uint8Array)return Or(Array.from(t),Array.from(e),n);if(!t||!e||typeof t!=typeof e)return!1;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!Or(t[r],e[r],n))return!1;return!0}if(typeof t!="object")return!1;const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!1;for(const r of i)if(!Or(t[r],e[r],n))return!1;return!0}function d5(t){if(!t)return[];if(t.length===1)return t[0];const e=[];for(const n of t)UE(e,n);return e}function ch({rowGroup:t,physicalColumns:e,filter:n,strict:i=!0}){if(!n)return!1;if("$and"in n&&Array.isArray(n.$and))return n.$and.some(r=>ch({rowGroup:t,physicalColumns:e,filter:r,strict:i}));if("$or"in n&&Array.isArray(n.$or))return n.$or.every(r=>ch({rowGroup:t,physicalColumns:e,filter:r,strict:i}));if("$nor"in n&&Array.isArray(n.$nor))return!1;for(const[r,s]of Object.entries(n)){const o=e.indexOf(r);if(o===-1)continue;const a=t.columns[o].meta_data?.statistics;if(!a)continue;const{min:l,max:c,min_value:u,max_value:f}=a,h=u!==void 0?u:l,A=f!==void 0?f:c;if(!(h===void 0||A===void 0)){for(const[d,g]of Object.entries(s||{}))if(d==="$gt"&&A<=g||d==="$gte"&&A<g||d==="$lt"&&h>=g||d==="$lte"&&h>g||d==="$eq"&&(g<h||g>A)||d==="$ne"&&Or(h,A,i)&&Or(h,g,i)||d==="$in"&&Array.isArray(g)&&g.every(m=>m<h||m>A)||d==="$nin"&&Array.isArray(g)&&Or(h,A,i)&&g.includes(h))return!0}}return!1}const g5=1<<21;function p5({metadata:t,rowStart:e=0,rowEnd:n=1/0,columns:i,filter:r,filterStrict:s=!0,useOffsetIndex:o=!1}){if(!t)throw new Error("parquetPlan requires metadata");const a=[],l=[],c=[],u=r5(LE(t));let f=0;for(const h of t.row_groups){const A=Number(h.num_rows),d=f+A;if(A>0&&d>e&&f<n&&!ch({rowGroup:h,physicalColumns:u,filter:r,strict:s})){const g=[];for(const C of h.columns){const y=C.meta_data;if(C.file_path)throw new Error("parquet file_path not supported");if(!y)throw new Error("parquet column metadata is undefined");if(!i||i.includes(y.path_in_schema[0])){const x=y.dictionary_page_offset||y.data_page_offset,I=Number(x),b=Number(x+y.total_compressed_size);if(o&&C.offset_index_offset&&C.offset_index_length){const S=Number(C.offset_index_offset);g.push({columnMetadata:y,offsetIndex:{startByte:S,endByte:S+C.offset_index_length},bounds:{startByte:I,endByte:b}})}else g.push({columnMetadata:y,range:{startByte:I,endByte:b}})}}const m=Math.max(e-f,0),p=Math.min(n-f,A);a.push({chunks:g,rowGroup:h,groupStart:f,groupRows:A,selectStart:m,selectEnd:p});let w;for(const C of g)if("offsetIndex"in C)c.push(C.offsetIndex);else{const{range:y}=C;i?l.push(y):w&&y.endByte-w.startByte<=g5?w.endByte=y.endByte:(w&&l.push(w),w={...y})}w&&l.push(w)}f=d}return isFinite(n)||(n=f),l.push(...c),{metadata:t,rowStart:e,rowEnd:n,columns:i,fetches:l,groups:a}}function m5(t,{fetches:e}){const n=e.map(({startByte:i,endByte:r})=>t.slice(i,r));return{byteLength:t.byteLength,slice(i,r=t.byteLength){const s=e.findIndex(({startByte:o,endByte:a})=>o<=i&&r<=a);if(s<0)return t.slice(i,r);if(e[s].startByte!==i||e[s].endByte!==r){const o=i-e[s].startByte,a=r-e[s].startByte;return n[s]instanceof Promise?n[s].then(l=>l.slice(o,a)):n[s].slice(o,a)}else return n[s]}}}const lh=new TextDecoder,_E=new WeakMap;function GE(t,e=Vc){if(Array.isArray(t))return t.map(n=>GE(n,e));if(typeof t!="object")return t;if("metadata"in t){const n=w5(t.metadata),i=t.typed_value&&Kc(t.typed_value,n,e),r=t.value&&xo(jc(t.value),n,e);return i&&r?{...r,...i}:i??r}return t}function Kc(t,e,n){if(t&&typeof t=="object"&&!Array.isArray(t)&&!(t instanceof Uint8Array)){if("typed_value"in t)return Kc(t.typed_value,e,n);if("value"in t&&t.value instanceof Uint8Array)return xo(jc(t.value),e,n);const i={};for(const[r,s]of Object.entries(t))i[r]=Kc(s,e,n);return i}return t instanceof Uint8Array?xo(jc(t),e,n):Array.isArray(t)?t.map(i=>Kc(i,e,n)):t}function jc(t){return{view:new DataView(t.buffer,t.byteOffset,t.byteLength),offset:0}}function w5(t){let e=_E.get(t.buffer);e||(e=new Map,_E.set(t.buffer,e));const n=`${t.byteOffset}:${t.byteLength}`,i=e.get(n);if(i)return i;const r=jc(t),s=r.view.getUint8(r.offset++),o=s&15;if(o!==1)throw new Error(`parquet unsupported variant metadata version: ${o}`);const a=(s>>4&1)===1,l=(s>>6&3)+1,c=Fi(r,l),u=new Array(c+1);for(let d=0;d<u.length;d++)u[d]=Fi(r,l);const f=r.offset,h=new Array(c);for(let d=0;d<c;d++){const g=u[d],m=u[d+1],p=new Uint8Array(t.buffer,t.byteOffset+f+g,m-g);h[d]=lh.decode(p)}const A={dictionary:h,sorted:a};return e.set(n,A),A}function Fi(t,e){let n=0;for(let i=0;i<e;i++)n|=t.view.getUint8(t.offset+i)<<i*8;return t.offset+=e,n}function xo(t,e,n){const i=t.view.getUint8(t.offset++),r=i&3,s=i>>2;if(r===0)return y5(t,s,n);if(r===2)return C5(t,s,e,n);if(r===3)return E5(t,s,e,n);const o=new Uint8Array(t.view.buffer,t.view.byteOffset+t.offset,s);return t.offset+=s,lh.decode(o)}function y5(t,e,n){switch(e){case 0:return null;case 1:return!0;case 2:return!1;case 3:{const i=t.view.getInt8(t.offset);return t.offset+=1,i}case 4:{const i=t.view.getInt16(t.offset,!0);return t.offset+=2,i}case 5:{const i=t.view.getInt32(t.offset,!0);return t.offset+=4,i}case 6:{const i=t.view.getBigInt64(t.offset,!0);return t.offset+=8,i}case 7:{const i=t.view.getFloat64(t.offset,!0);return t.offset+=8,i}case 8:return uh(t,4);case 9:return uh(t,8);case 10:return uh(t,16);case 11:{const i=t.view.getInt32(t.offset,!0);return t.offset+=4,n.dateFromDays(i)}case 12:case 13:{const i=t.view.getBigInt64(t.offset,!0);return t.offset+=8,n.timestampFromMicroseconds(i)}case 14:{const i=t.view.getFloat32(t.offset,!0);return t.offset+=4,i}case 15:return zE(t);case 16:{const i=zE(t);return lh.decode(i)}case 17:{const i=t.view.getBigInt64(t.offset,!0);return t.offset+=8,i}case 18:case 19:{const i=t.view.getBigInt64(t.offset,!0);return t.offset+=8,n.timestampFromNanoseconds(i)}case 20:{const i=new Uint8Array(t.view.buffer,t.view.byteOffset+t.offset,16);t.offset+=16;const r=Array.from(i,s=>s.toString(16).padStart(2,"0")).join("");return`${r.slice(0,8)}-${r.slice(8,12)}-${r.slice(12,16)}-${r.slice(16,20)}-${r.slice(20)}`}default:throw new Error(`parquet unsupported variant primitive type: ${e}`)}}function C5(t,e,n,i){const r=(e&3)+1,s=(e>>2&3)+1,a=e>>4&1?Fi(t,4):t.view.getUint8(t.offset++),l=new Array(a);for(let f=0;f<a;f++)l[f]=Fi(t,s);const c=new Array(a+1);for(let f=0;f<c.length;f++)c[f]=Fi(t,r);const u={};for(let f=0;f<a;f++){const h=n.dictionary[l[f]],A={view:t.view,offset:t.offset+c[f]};u[h]=xo(A,n,i)}return t.offset+=c[c.length-1],u}function E5(t,e,n,i){const r=e&3,s=e>>2&1,o=r+1,a=Fi(t,s?4:1),l=new Array(a+1);for(let f=0;f<l.length;f++)l[f]=Fi(t,o);const c=t.offset,u=new Array(a);for(let f=0;f<a;f++){const h={view:t.view,offset:c+l[f]};u[f]=xo(h,n,i)}return t.offset=c+l[l.length-1],u}function uh(t,e){const n=t.view.getUint8(t.offset);t.offset+=1;let i;if(e===4)i=BigInt(t.view.getInt32(t.offset,!0)),t.offset+=4;else if(e===8)i=t.view.getBigInt64(t.offset,!0),t.offset+=8;else{const r=t.view.getBigUint64(t.offset,!0);i=t.view.getBigInt64(t.offset+8,!0)<<64n|r,t.offset+=16}return Number(i)*10**-n}function zE(t){const e=t.view.getUint32(t.offset,!0);t.offset+=4;const n=new Uint8Array(t.view.buffer,t.view.byteOffset+t.offset,e);return t.offset+=e,n}function HE(t,e,n,i,r){const s=sh(r);if(!e?.length&&!n.length){if(!s||!i.length)return i;e=new Array(i.length).fill(s)}const o=e?.length||n.length,a=r.map(({element:d})=>d.repetition_type);let l=0;const c=[t];let u=t,f=0,h=0,A=0;if(n[0])for(;f<a.length-2&&A<n[0];)f++,a[f]!=="REQUIRED"&&(u=u.at(-1),c.push(u),h++),a[f]==="REPEATED"&&A++;for(let d=0;d<o;d++){const g=e?.length?e[d]:s,m=n[d];for(;f&&(m<A||a[f]!=="REPEATED");)a[f]!=="REQUIRED"&&(c.pop(),h--),a[f]==="REPEATED"&&A--,f--;for(u=c.at(-1);(f<a.length-2||a[f+1]==="REPEATED")&&(h<g||a[f+1]==="REQUIRED");){if(f++,a[f]!=="REQUIRED"){const p=[];u.push(p),u=p,c.push(p),h++}a[f]==="REPEATED"&&A++}g===s?u.push(i[l++]):f===a.length-2?u.push(null):u.push([])}if(!t.length)for(let d=0;d<s;d++){const g=[];u.push(g),u=g}return t}function Io(t,e,n,i=0){const r=e.path.join("."),s=e.element.repetition_type==="OPTIONAL",o=s?i+1:i;if(s5(e)){let a=e.children[0],l=o;a.children.length===1&&(a=a.children[0],l++),Io(t,a,n,l);const c=a.path.join("."),u=t.get(c);if(!u)throw new Error("parquet list column missing values");s&&Wc(u,i),t.set(r,u),t.delete(c);return}if(o5(e)){const a=e.children[0].element.name;Io(t,e.children[0].children[0],n,o+1),Io(t,e.children[0].children[1],n,o+1);const l=t.get(`${r}.${a}.key`),c=t.get(`${r}.${a}.value`);if(!l)throw new Error("parquet map column missing keys");if(!c)throw new Error("parquet map column missing values");if(l.length!==c.length)throw new Error("parquet map column key/value length mismatch");const u=YE(l,c,o);s&&Wc(u,i),t.delete(`${r}.${a}.key`),t.delete(`${r}.${a}.value`),t.set(r,u);return}if(e.children.length){const a=e.element.repetition_type==="REQUIRED"?i:i+1,l={};for(const u of e.children){Io(t,u,n,a);const f=t.get(u.path.join("."));if(!f)throw new Error("parquet struct missing child data");l[u.element.name]=f}for(const u of e.children)t.delete(u.path.join("."));let c=VE(l,a);e.element.logical_type?.type==="VARIANT"&&(c=GE(c,n)),s&&Wc(c,i),t.set(r,c)}}function Wc(t,e){for(let n=0;n<t.length;n++)e?Wc(t[n],e-1):t[n]=t[n][0]}function YE(t,e,n){const i=[];for(let r=0;r<t.length;r++)if(n)i.push(YE(t[r],e[r],n-1));else if(t[r]){const s={};for(let o=0;o<t[r].length;o++){const a=e[r][o];s[t[r][o]]=a===void 0?null:a}i.push(s)}else i.push(void 0);return i}function VE(t,e){const n=Object.keys(t),i=t[n[0]]?.length,r=[];for(let s=0;s<i;s++){const o={};for(const a of n){if(t[a].length!==i)throw new Error("parquet struct parsing error");o[a]=t[a][s]}e?r.push(VE(o,e-1)):r.push(o)}return r}function Bo(t,e,n){const i=n instanceof Int32Array,r=ki(t),s=ki(t);ki(t);let o=ah(t),a=0;n[a++]=i?Number(o):o;const l=r/s;for(;a<e;){const c=ah(t),u=new Uint8Array(s);for(let f=0;f<s;f++)u[f]=t.view.getUint8(t.offset++);for(let f=0;f<s&&a<e;f++){const h=BigInt(u[f]);if(h){let A=0n,d=l;const g=(1n<<h)-1n;for(;d&&a<e;){let m=BigInt(t.view.getUint8(t.offset))>>A&g;for(A+=h;A>=8;)A-=8n,t.offset++,A&&(m|=BigInt(t.view.getUint8(t.offset))<<h-A&g);const p=c+m;o+=p,n[a++]=i?Number(o):o,d--}d&&(t.offset+=Math.ceil((d*Number(h)+Number(A))/8))}else for(let A=0;A<l&&a<e;A++)o+=c,n[a++]=i?Number(o):o}}}function JE(t,e,n){const i=new Int32Array(e);Bo(t,e,i);for(let r=0;r<e;r++)n[r]=new Uint8Array(t.view.buffer,t.view.byteOffset+t.offset,i[r]),t.offset+=i[r]}function b5(t,e,n){const i=new Int32Array(e);Bo(t,e,i);const r=new Int32Array(e);Bo(t,e,r);for(let s=0;s<e;s++){const o=new Uint8Array(t.view.buffer,t.view.byteOffset+t.offset,r[s]);i[s]?(n[s]=new Uint8Array(i[s]+r[s]),n[s].set(n[s-1].subarray(0,i[s])),n[s].set(o,i[s])):n[s]=o,t.offset+=r[s]}}function Xc(t){return 32-Math.clz32(t)}function zn(t,e,n,i){i===void 0&&(i=t.view.getUint32(t.offset,!0),t.offset+=4);const r=t.offset;let s=0;for(;s<n.length;){const o=ki(t);if(o&1)s=I5(t,o,e,n,s);else{const a=o>>>1;x5(t,a,e,n,s),s+=a}}t.offset=r+i}function x5(t,e,n,i,r){const s=n+7>>3;let o=0;for(let a=0;a<s;a++)o|=t.view.getUint8(t.offset++)<<(a<<3);for(let a=0;a<e;a++)i[r+a]=o}function I5(t,e,n,i,r){let s=e>>1<<3;const o=(1<<n)-1;let a=0;if(t.offset<t.view.byteLength)a=t.view.getUint8(t.offset++);else if(o)throw new Error(`parquet bitpack offset ${t.offset} out of range`);let l=8,c=0;for(;s;)c>8?(c-=8,l-=8,a>>>=8):l-c<n?(a|=t.view.getUint8(t.offset)<<l,t.offset++,l+=8):(r<i.length&&(i[r++]=a>>c&o),s--,c+=n);return r}function qE(t,e,n,i){const r=B5(n,i),s=new Uint8Array(e*r);for(let o=0;o<r;o++)for(let a=0;a<e;a++)s[a*r+o]=t.view.getUint8(t.offset++);if(n==="FLOAT")return new Float32Array(s.buffer);if(n==="DOUBLE")return new Float64Array(s.buffer);if(n==="INT32")return new Int32Array(s.buffer);if(n==="INT64")return new BigInt64Array(s.buffer);if(n==="FIXED_LEN_BYTE_ARRAY"){const o=new Array(e);for(let a=0;a<e;a++)o[a]=s.subarray(a*r,(a+1)*r);return o}throw new Error(`parquet byte_stream_split unsupported type: ${n}`)}function B5(t,e){switch(t){case"INT32":case"FLOAT":return 4;case"INT64":case"DOUBLE":return 8;case"FIXED_LEN_BYTE_ARRAY":if(!e)throw new Error("parquet byteWidth missing type_length");return e;default:throw new Error(`parquet unsupported type: ${t}`)}}function fh(t,e,n,i){if(n===0)return[];if(e==="BOOLEAN")return v5(t,n);if(e==="INT32")return S5(t,n);if(e==="INT64")return D5(t,n);if(e==="INT96")return Q5(t,n);if(e==="FLOAT")return k5(t,n);if(e==="DOUBLE")return F5(t,n);if(e==="BYTE_ARRAY")return R5(t,n);if(e==="FIXED_LEN_BYTE_ARRAY"){if(!i)throw new Error("parquet missing fixed length");return N5(t,n,i)}else throw new Error(`parquet unhandled type: ${e}`)}function v5(t,e){const n=new Array(e);for(let i=0;i<e;i++){const r=t.offset+(i/8|0),s=i%8,o=t.view.getUint8(r);n[i]=(o&1<<s)!==0}return t.offset+=Math.ceil(e/8),n}function S5(t,e){const n=(t.view.byteOffset+t.offset)%4?new Int32Array(Zc(t.view.buffer,t.view.byteOffset+t.offset,e*4)):new Int32Array(t.view.buffer,t.view.byteOffset+t.offset,e);return t.offset+=e*4,n}function D5(t,e){const n=(t.view.byteOffset+t.offset)%8?new BigInt64Array(Zc(t.view.buffer,t.view.byteOffset+t.offset,e*8)):new BigInt64Array(t.view.buffer,t.view.byteOffset+t.offset,e);return t.offset+=e*8,n}function Q5(t,e){const n=new Array(e);for(let i=0;i<e;i++){const r=t.view.getBigInt64(t.offset+i*12,!0),s=t.view.getInt32(t.offset+i*12+8,!0);n[i]=BigInt(s)<<64n|r}return t.offset+=e*12,n}function k5(t,e){const n=(t.view.byteOffset+t.offset)%4?new Float32Array(Zc(t.view.buffer,t.view.byteOffset+t.offset,e*4)):new Float32Array(t.view.buffer,t.view.byteOffset+t.offset,e);return t.offset+=e*4,n}function F5(t,e){const n=(t.view.byteOffset+t.offset)%8?new Float64Array(Zc(t.view.buffer,t.view.byteOffset+t.offset,e*8)):new Float64Array(t.view.buffer,t.view.byteOffset+t.offset,e);return t.offset+=e*8,n}function R5(t,e){const n=new Array(e);for(let i=0;i<e;i++){const r=t.view.getUint32(t.offset,!0);t.offset+=4,n[i]=new Uint8Array(t.view.buffer,t.view.byteOffset+t.offset,r),t.offset+=r}return n}function N5(t,e,n){const i=new Array(e);for(let r=0;r<e;r++)i[r]=new Uint8Array(t.view.buffer,t.view.byteOffset+t.offset,n),t.offset+=n;return i}function Zc(t,e,n){const i=new ArrayBuffer(n);return new Uint8Array(i).set(new Uint8Array(t,e,n)),i}const M5=[0,255,65535,16777215,4294967295];function KE(t,e,n,i,r){for(let s=0;s<r;s++)n[i+s]=t[e+s]}function T5(t,e){const n=t.byteLength,i=e.byteLength;let r=0,s=0;for(;r<n;){const o=t[r];if(r++,o<128)break}if(i&&r>=n)throw new Error("invalid snappy length header");for(;r<n;){const o=t[r];let a=0;if(r++,r>=n)throw new Error("missing eof marker");if((o&3)===0){let l=(o>>>2)+1;if(l>60){if(r+3>=n)throw new Error("snappy error literal pos + 3 >= inputLength");const c=l-60;l=t[r]+(t[r+1]<<8)+(t[r+2]<<16)+(t[r+3]<<24),l=(l&M5[c])+1,r+=c}if(r+l>n)throw new Error("snappy error literal exceeds input length");KE(t,r,e,s,l),r+=l,s+=l}else{let l=0;switch(o&3){case 1:a=(o>>>2&7)+4,l=t[r]+(o>>>5<<8),r++;break;case 2:if(n<=r+1)throw new Error("snappy error end of input");a=(o>>>2)+1,l=t[r]+(t[r+1]<<8),r+=2;break;case 3:if(n<=r+3)throw new Error("snappy error end of input");a=(o>>>2)+1,l=t[r]+(t[r+1]<<8)+(t[r+2]<<16)+(t[r+3]<<24),r+=4;break}if(l===0||isNaN(l))throw new Error(`invalid offset ${l} pos ${r} inputLength ${n}`);if(l>s)throw new Error("cannot copy from before start of buffer");KE(e,s-l,e,s,a),s+=a}}if(s!==i)throw new Error("premature end of input")}function P5(t,e,{type:n,element:i,schemaPath:r}){const s=new DataView(t.buffer,t.byteOffset,t.byteLength),o={view:s,offset:0};let a;const l=L5(o,e,r),{definitionLevels:c,numNulls:u}=O5(o,e,r),f=e.num_values-u;if(e.encoding==="PLAIN")a=fh(o,n,f,i.type_length);else if(e.encoding==="PLAIN_DICTIONARY"||e.encoding==="RLE_DICTIONARY"||e.encoding==="RLE"){const h=n==="BOOLEAN"?1:s.getUint8(o.offset++);h?(a=new Array(f),n==="BOOLEAN"?(zn(o,h,a),a=a.map(A=>!!A)):zn(o,h,a,s.byteLength-o.offset)):a=new Uint8Array(f)}else if(e.encoding==="BYTE_STREAM_SPLIT")a=qE(o,f,n,i.type_length);else if(e.encoding==="DELTA_BINARY_PACKED")a=n==="INT32"?new Int32Array(f):new BigInt64Array(f),Bo(o,f,a);else if(e.encoding==="DELTA_LENGTH_BYTE_ARRAY")a=new Array(f),JE(o,f,a);else throw new Error(`parquet unsupported encoding: ${e.encoding}`);return{definitionLevels:c,repetitionLevels:l,dataPage:a}}function L5(t,e,n){if(n.length>1){const i=RE(n);if(i){const r=new Array(e.num_values);return zn(t,Xc(i),r),r}}return[]}function O5(t,e,n){const i=sh(n);if(!i)return{definitionLevels:[],numNulls:0};const r=new Array(e.num_values);zn(t,Xc(i),r);let s=e.num_values;for(const o of r)o===i&&s--;return s===0&&(r.length=0),{definitionLevels:r,numNulls:s}}function Ah(t,e,n,i){let r;const s=i?.[n];if(n==="UNCOMPRESSED")r=t;else if(s)r=s(t,e);else if(n==="SNAPPY")r=new Uint8Array(e),T5(t,r);else throw new Error(`parquet unsupported compression codec: ${n}`);if(r?.length!==e)throw new Error(`parquet decompressed page length ${r?.length} does not match header ${e}`);return r}function U5(t,e,n){const r={view:new DataView(t.buffer,t.byteOffset,t.byteLength),offset:0},{type:s,element:o,schemaPath:a,codec:l,compressors:c}=n,u=e.data_page_header_v2;if(!u)throw new Error("parquet data page header v2 is undefined");const f=_5(r,u,a);r.offset=u.repetition_levels_byte_length;const h=G5(r,u,a),A=e.uncompressed_page_size-u.definition_levels_byte_length-u.repetition_levels_byte_length;let d=t.subarray(r.offset);u.is_compressed!==!1&&(d=Ah(d,A,l,c));const g=new DataView(d.buffer,d.byteOffset,d.byteLength),m={view:g,offset:0};let p;const w=u.num_values-u.num_nulls;if(u.encoding==="PLAIN")p=fh(m,s,w,o.type_length);else if(u.encoding==="RLE")p=new Array(w),zn(m,1,p),p=p.map(C=>!!C);else if(u.encoding==="PLAIN_DICTIONARY"||u.encoding==="RLE_DICTIONARY"){const C=g.getUint8(m.offset++);p=new Array(w),zn(m,C,p,A-1)}else if(u.encoding==="DELTA_BINARY_PACKED")p=s==="INT32"?new Int32Array(w):new BigInt64Array(w),Bo(m,w,p);else if(u.encoding==="DELTA_LENGTH_BYTE_ARRAY")p=new Array(w),JE(m,w,p);else if(u.encoding==="DELTA_BYTE_ARRAY")p=new Array(w),b5(m,w,p);else if(u.encoding==="BYTE_STREAM_SPLIT")p=qE(m,w,s,o.type_length);else throw new Error(`parquet unsupported encoding: ${u.encoding}`);return{definitionLevels:h,repetitionLevels:f,dataPage:p}}function _5(t,e,n){const i=RE(n);if(!i)return[];const r=new Array(e.num_values);return zn(t,Xc(i),r,e.repetition_levels_byte_length),r}function G5(t,e,n){const i=sh(n);if(i){const r=new Array(e.num_values);return zn(t,Xc(i),r,e.definition_levels_byte_length),r}}function jE(t,{groupStart:e,selectStart:n,selectEnd:i},r,s){const{pathInSchema:o,schemaPath:a}=r,l=NE(a),c=[];let u,f,h=0,A=0;const d=s&&(()=>{f&&s({pathInSchema:o,columnData:f,rowStart:e+h-f.length,rowEnd:e+h})});for(;(l?h<i:t.offset<t.view.byteLength-1)&&!(t.offset>=t.view.byteLength-1);){const g=z5(t);if(g.type==="DICTIONARY_PAGE"){const{data:m}=WE(t,g,r,u,void 0,0);m&&(u=SE(m,r))}else{const m=f?.length||0,p=WE(t,g,r,u,f,n-h);p.skipped?(c.length||(A+=p.skipped),h+=p.skipped):p.data&&f===p.data?h+=p.data.length-m:p.data&&p.data.length&&(d?.(),c.push(p.data),h+=p.data.length,f=p.data)}}return d?.(),{data:c,skipped:A}}function WE(t,e,n,i,r,s){const{type:o,element:a,schemaPath:l,codec:c,compressors:u}=n,f=new Uint8Array(t.view.buffer,t.view.byteOffset+t.offset,e.compressed_page_size);if(t.offset+=e.compressed_page_size,e.type==="DATA_PAGE"){const h=e.data_page_header;if(!h)throw new Error("parquet data page header is undefined");if(s>h.num_values&&NE(l))return{skipped:h.num_values};const A=Ah(f,Number(e.uncompressed_page_size),c,u),{definitionLevels:d,repetitionLevels:g,dataPage:m}=P5(A,h,n),p=vE(m,i,h.encoding,n),w=Array.isArray(r)?r:[];return{skipped:0,data:HE(w,d,g,p,l)}}else if(e.type==="DATA_PAGE_V2"){const h=e.data_page_header_v2;if(!h)throw new Error("parquet data page header v2 is undefined");if(s>h.num_rows)return{skipped:h.num_values};const{definitionLevels:A,repetitionLevels:d,dataPage:g}=U5(f,e,n),m=vE(g,i,h.encoding,n),p=Array.isArray(r)?r:[];return{skipped:0,data:HE(p,A,d,m,l)}}else if(e.type==="DICTIONARY_PAGE"){const h=e.dictionary_page_header;if(!h)throw new Error("parquet dictionary page header is undefined");const A=Ah(f,Number(e.uncompressed_page_size),c,u),d={view:new DataView(A.buffer,A.byteOffset,A.byteLength),offset:0};return{skipped:0,data:fh(d,o,h.num_values,a.type_length)}}else throw new Error(`parquet unsupported page type: ${e.type}`)}function z5(t){const e=oh(t),n=xE[e.field_1],i=e.field_2,r=e.field_3,s=e.field_4,o=e.field_5&&{num_values:e.field_5.field_1,encoding:Qi[e.field_5.field_2],definition_level_encoding:Qi[e.field_5.field_3],repetition_level_encoding:Qi[e.field_5.field_4],statistics:e.field_5.field_5&&{max:e.field_5.field_5.field_1,min:e.field_5.field_5.field_2,null_count:e.field_5.field_5.field_3,distinct_count:e.field_5.field_5.field_4,max_value:e.field_5.field_5.field_5,min_value:e.field_5.field_5.field_6}},a=e.field_6,l=e.field_7&&{num_values:e.field_7.field_1,encoding:Qi[e.field_7.field_2],is_sorted:e.field_7.field_3},c=e.field_8&&{num_values:e.field_8.field_1,num_nulls:e.field_8.field_2,num_rows:e.field_8.field_3,encoding:Qi[e.field_8.field_4],definition_levels_byte_length:e.field_8.field_5,repetition_levels_byte_length:e.field_8.field_6,is_compressed:e.field_8.field_7===void 0?!0:e.field_8.field_7,statistics:e.field_8.field_8};return{type:n,uncompressed_page_size:i,compressed_page_size:r,crc:s,data_page_header:o,index_page_header:a,dictionary_page_header:l,data_page_header_v2:c}}function H5(t){const e=oh(t);return{page_locations:e.field_1.map(Y5),unencoded_byte_array_data_bytes:e.field_2}}function Y5(t){return{offset:t.field_1,compressed_page_size:t.field_2,first_row_index:t.field_3}}function V5(t,{metadata:e},n){const{file:i,compressors:r,utf8:s}=t,o=[],a={...Vc,...t.parsers};for(const l of n.chunks){const{columnMetadata:c}=l,u=FE(e.schema,c.path_in_schema),f={pathInSchema:c.path_in_schema,type:c.type,element:u[u.length-1].element,schemaPath:u,codec:c.codec,parsers:a,compressors:r,utf8:s};if(!("offsetIndex"in l)){o.push({pathInSchema:c.path_in_schema,data:Promise.resolve(i.slice(l.range.startByte,l.range.endByte)).then(h=>{const A={view:new DataView(h),offset:0};return jE(A,n,f,t.onPage)})});continue}o.push({pathInSchema:c.path_in_schema,data:Promise.resolve(i.slice(l.offsetIndex.startByte,l.offsetIndex.endByte)).then(async h=>{const A=H5({view:new DataView(h),offset:0}),{selectStart:d,selectEnd:g}=n,m=A.page_locations;let p=NaN,w=NaN,C=0;for(let D=0;D<m.length;D++){const v=m[D],F=Number(v.first_row_index),R=D+1<m.length?Number(m[D+1].first_row_index):n.groupRows;F<g&&R>d&&(Number.isNaN(p)&&(p=Number(v.offset),C=F),w=Number(v.offset)+v.compressed_page_size)}const y=await i.slice(p,w),x={view:new DataView(y),offset:0},I=C?{...n,groupStart:n.groupStart+C,selectStart:n.selectStart-C,selectEnd:n.selectEnd-C}:n,{data:b,skipped:S}=jE(x,I,f,t.onPage);return{data:b,skipped:C+S}})})}return{groupStart:n.groupStart,groupRows:n.groupRows,asyncColumns:o}}function J5(t,e,n){const{asyncColumns:i}=t;n={...Vc,...n};const r=[];for(const s of e.children)if(s.children.length){const o=i.filter(c=>c.pathInSchema[0]===s.element.name);if(!o.length)continue;const a=new Map,l=Promise.all(o.map(c=>c.data.then(({data:u})=>{a.set(c.pathInSchema.join("."),d5(u))}))).then(()=>{Io(a,s,n);const c=a.get(s.path.join("."));if(!c)throw new Error("parquet column data not assembled");return{data:[c],skipped:0}});r.push({pathInSchema:s.path,data:l})}else{const o=i.find(a=>a.pathInSchema[0]===s.element.name);o&&r.push(o)}return{...t,asyncColumns:r}}const XE=new Map,q5=200;function K5(t){if(!t.metadata)throw new Error("parquet requires metadata");const e=p5(t);return t.file=m5(t.file,e),e.groups.map(n=>V5(t,e,n))}function j5(t){if(!t)return[];if(t.length===1)return t[0];let e=0;for(const r of t)e+=r.length;const n=Array(e);let i=0;for(const r of t){for(let s=0;s<r.length;s++)n[i+s]=r[s];i+=r.length}return n}function W5(t){const e=t.join(""),n=XE.get(e);if(n)return n;const i=t.map((s,o)=>JSON.stringify(s)+": columnData["+o+"][row - columnSkipped["+o+"]]").join(`,
`),r=new Function("groupData","selectStart","selectCount","columnData","columnSkipped",`for (let selectRow = 0; selectRow < selectCount; selectRow++) {
    const row = selectStart + selectRow;
    groupData[selectRow] = {
`+i+`
    };
}
return groupData;`);return XE.set(e,r),r}function X5(t,e,n,i,r,s){for(let o=0;o<n;o++){const a=e+o,l={};for(let c=0;c<i.length;c++)l[i[c]]=r[c][a-s[c]];t[o]=l}return t}async function Z5({asyncColumns:t},e,n){const i=await Promise.all(t.map(f=>f.data)),r=t.length,s=Array(r),o=Array(r),a=Array(r);for(let f=0;f<r;f++)s[f]=t[f].pathInSchema[0],o[f]=j5(i[f].data),a[f]=i[f].skipped;const l=n-e,c=Array(l);return r>q5?X5(c,e,l,s,o,a):W5(s)(c,e,l,o,a)}async function ZE(t){if("rowFormat"in t)throw new Error('parquetRead supports only object rows; use rowFormat: "object" implicitly');if("filter"in t||"filterStrict"in t)throw new Error("parquetRead does not support filtering");t.metadata??=await f5(t.file,t);const{rowStart:e=0,rowEnd:n,onChunk:i,onComplete:r}=t,s=K5(t);if(!r&&!i){for(const{asyncColumns:l}of s)for(const{data:c}of l)await c;return}const o=LE(t.metadata),a=s.map(l=>J5(l,o,t.parsers));if(i)for(const l of a)for(const c of l.asyncColumns)c.data.then(u=>{let f=l.groupStart+u.skipped;for(const h of u.data)i({columnName:c.pathInSchema[0],columnData:h,rowStart:f,rowEnd:f+h.length}),f+=h.length});if(r){const l=[];for(const c of a){const u=Math.max(e-c.groupStart,0),f=Math.min((n??1/0)-c.groupStart,c.groupRows),h=await Z5(c,u,f);UE(l,h)}r(l)}else for(const{asyncColumns:l}of a)for(const{data:c}of l)await c}function $5(t){return new Promise((e,n)=>{ZE({...t,onComplete:e}).catch(n)})}const e9=Object.freeze(Object.defineProperty({__proto__:null,parquetRead:ZE,parquetReadObjects:$5},Symbol.toStringTag,{value:"Module"}));Ni.GenomeSpyDocEmbed=by,Object.defineProperty(Ni,Symbol.toStringTag,{value:"Module"})}));
