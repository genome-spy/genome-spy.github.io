(function(se,te){typeof exports=="object"&&typeof module<"u"?te(exports):typeof define=="function"&&define.amd?define(["exports"],te):(se=typeof globalThis<"u"?globalThis:se||self,te(se.genomeSpyDocEmbed={}))})(this,(function(se){"use strict";var RL=Object.defineProperty;var NL=Object.getPrototypeOf;var TL=Reflect.get;var ab=se=>{throw TypeError(se)};var PL=(se,te,De)=>te in se?RL(se,te,{enumerable:!0,configurable:!0,writable:!0,value:De}):se[te]=De;var j=(se,te,De)=>PL(se,typeof te!="symbol"?te+"":te,De),_0=(se,te,De)=>te.has(se)||ab("Cannot "+De);var C=(se,te,De)=>(_0(se,te,"read from private field"),De?De.call(se):te.get(se)),D=(se,te,De)=>te.has(se)?ab("Cannot add the same private member more than once"):te instanceof WeakSet?te.add(se):te.set(se,De),F=(se,te,De,Yi)=>(_0(se,te,"write to private field"),Yi?Yi.call(se,De):te.set(se,De),De),T=(se,te,De)=>(_0(se,te,"access private method"),De);var cb=(se,te,De,Yi)=>({set _(Yf){F(se,te,Yf,De)},get _(){return C(se,te,Yi)}}),lb=(se,te,De)=>TL(NL(se),De,te);var LE,zn,Ys,Ii,Ei,Js,Ic,dt,Er,qs,bi,Bi,br,Br,vi,pl,Ec,vr,Qi,Ks,js,bc,Bc,vc,yn,Qc,Ws,ub,fb,en,Xs,Qr,V0,Y0,Zs,Ff,Ab,wn,Sc,Dc,kc,Fc,$s,eo,zt,hb,J0,q0,db,to,no,Mc,Rc,Si,Ht,Nc,Tc,ro,io,Pc,Lc,K0,so,oo,ao,Oc,Uc,co,lo,xn,ml,j0,In,uo,Ne,En,_t,Di,Gc,Z,W0,gb,X0,Z0,Lo,Cl,pb,$0,mb,Cb,yl,yb,eg,bn,Mf,wb,zc,Rf,xb,Hn,Hc,Sr,ki,fo,Dt,tg,ng,rg,Ib,_c,ig,Nf,Eb,Ao,ho,go,Vc,po,mo,Yc,sg,Jc,og,Fi,Co,qc,Kc,yo,jc,Wc,_n,Mi,Vt,Xc,ag,Ri,Dr,kr,Fr,Zc,kt,wo,xo,me,bb,cg,zf,wl,Bb,vb,Hf,lg,Tf,Qb,Io,Eo,ct,Vn,$c,ie,Vi,Sb,ug,xl,fg,Ag,hg,Db,_f,kb,Ni,Fb,dg,bo,Bo,vo,Ti,gt,el,tl,nl,Qo,rl,_e,Pi,So,Yn,Pf,Mb,il,nn,sl,Do,ol,al,cl,ko,ll,Lf,Rb,ul,Li,fl,Fo,Al,Oi,Ui,Gi,Mo,zi,Ro,No,Hi,pt,hl,_i,To,Re,Vf,Nb,Tb,Pb,Lb,Ob,Ub,Gb,zb;function te(n,t,e){return n.fields=t||[],n.fname=e,n}function De(n){return n==null?null:n.fname}function Yi(n){return n==null?null:n.fields}function Yf(n){return n.length===1?Hb(n[0]):_b(n)}const Hb=n=>function(t){return t[n]},_b=n=>{const t=n.length;return function(e){for(let r=0;r<t;++r)e=e[n[r]];return e}};function Te(n){throw Error(n)}function Vb(n){const t=[],e=n.length;let r=null,i=0,s="",o,a,l;n=n+"";function c(){t.push(s+n.substring(o,a)),s="",o=a+1}for(o=a=0;a<e;++a)if(l=n[a],l==="\\")s+=n.substring(o,a++),o=a;else if(l===r)c(),r=null,i=-1;else{if(r)continue;o===i&&l==='"'||o===i&&l==="'"?(o=a+1,r=l):l==="."&&!i?a>o?c():o=a+1:l==="["?(a>o&&c(),i=o=a+1):l==="]"&&(i||Te("Access path missing open bracket: "+n),i>0&&c(),i=0,o=a+1)}return i&&Te("Access path missing closing bracket: "+n),r&&Te("Access path missing closing quote: "+n),a>o&&(a++,c()),t}function Il(n,t,e){const r=Vb(n);return n=r.length===1?r[0]:n,te((e&&e.get||Yf)(r),[n],t||n)}Il("id");const El=te(n=>n,[],"identity");te(()=>0,[],"zero"),te(()=>1,[],"one"),te(()=>!0,[],"true"),te(()=>!1,[],"false");const Yb=new Set([...Object.getOwnPropertyNames(Object.prototype).filter(n=>typeof Object.prototype[n]=="function"),"__proto__"]);var Xe=Array.isArray;function et(n){return n===Object(n)}function qt(n){return n[n.length-1]}function Oo(n){return n==null||n===""?null:+n}const pg=n=>t=>n*Math.exp(t),mg=n=>t=>Math.log(n*t),Jb=n=>t=>Math.sign(t)*Math.log1p(Math.abs(t/n)),qb=n=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*n,bl=n=>t=>t<0?-Math.pow(-t,n):Math.pow(t,n);function Jf(n,t,e,r){const i=e(n[0]),s=e(qt(n)),o=(s-i)*t;return[r(i-o),r(s-o)]}function Kb(n,t){return Jf(n,t,Oo,El)}function jb(n,t){var e=Math.sign(n[0]);return Jf(n,t,mg(e),pg(e))}function Wb(n,t,e){return Jf(n,t,bl(e),bl(1/e))}function Bl(n,t,e,r,i){const s=r(n[0]),o=r(qt(n)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*e),i(a+(o-a)*e)]}function Cg(n,t,e){return Bl(n,t,e,Oo,El)}function yg(n,t,e){const r=Math.sign(n[0]);return Bl(n,t,e,mg(r),pg(r))}function qf(n,t,e,r){return Bl(n,t,e,bl(r),bl(1/r))}function Xb(n,t,e,r){return Bl(n,t,e,Jb(r),qb(r))}function Kf(n){return n!=null?Xe(n)?n:[n]:[]}function Zb(n,t,e){let r=n[0],i=n[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=e-t?[t,e]:[r=Math.min(Math.max(r,t),e-s),r+s]}function Ft(n){return typeof n=="function"}const $b="descending";function wg(n,t,e){e=e||{},t=Kf(t)||[];const r=[],i=[],s={},o=e.comparator||eB;return Kf(n).forEach((a,l)=>{a!=null&&(r.push(t[l]===$b?-1:1),i.push(a=Ft(a)?a:Il(a,null,e)),(Yi(a)||[]).forEach(c=>s[c]=1))}),i.length===0?null:te(o(i,r),Object.keys(s))}const xg=(n,t)=>(n<t||n==null)&&t!=null?-1:(n>t||t==null)&&n!=null?1:(t=t instanceof Date?+t:t,(n=n instanceof Date?+n:n)!==n&&t===t?-1:t!==t&&n===n?1:0),eB=(n,t)=>n.length===1?tB(n[0],t[0]):nB(n,t,n.length),tB=(n,t)=>function(e,r){return xg(n(e),n(r))*t},nB=(n,t,e)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<e;)s=n[a],o=xg(s(r),s(i));return o*t[a]});function rB(n){for(let t,e,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(e in t)n[e]=t[e]}return n}function Ji(n,t){return Object.hasOwn(n,t)}function Uo(n){return typeof n=="boolean"}function iB(n){return Object.prototype.toString.call(n)==="[object Date]"}function sB(n){return n&&Ft(n[Symbol.iterator])}function ft(n){return typeof n=="number"}function oB(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function Ce(n){return typeof n=="string"}function Ig(n,t){const e=n[0],r=qt(n),i=+t;return i?i===1?r:e+i*(r-e):e}function Go(n){return n&&qt(n)-n[0]||0}function jf(n){return Xe(n)?`[${n.map(t=>t===null?"null":jf(t))}]`:et(n)||Ce(n)?JSON.stringify(n).replaceAll("\u2028","\\u2028").replaceAll("\u2029","\\u2029"):n}function aB(n){return n==null||n===""?null:!n||n==="false"||n==="0"?!1:!!n}const cB=n=>ft(n)||iB(n)?n:Date.parse(n);function lB(n,t){return t=t||cB,n==null||n===""?null:t(n)}function uB(n){return n==null||n===""?null:n+""}function vl(n){const t={},e=n.length;for(let r=0;r<e;++r)t[n[r]]=!0;return t}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ql=globalThis,Wf=Ql.ShadowRoot&&(Ql.ShadyCSS===void 0||Ql.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Xf=Symbol(),Eg=new WeakMap;let bg=class{constructor(t,e,r){if(this._$cssResult$=!0,r!==Xf)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(Wf&&t===void 0){const r=e!==void 0&&e.length===1;r&&(t=Eg.get(e)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),r&&Eg.set(e,t))}return t}toString(){return this.cssText}};const fB=n=>new bg(typeof n=="string"?n:n+"",void 0,Xf),AB=(n,...t)=>{const e=n.length===1?n[0]:t.reduce((r,i,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+n[s+1],n[0]);return new bg(e,n,Xf)},hB=(n,t)=>{if(Wf)n.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(const e of t){const r=document.createElement("style"),i=Ql.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=e.cssText,n.appendChild(r)}},Bg=Wf?n=>n:n=>n instanceof CSSStyleSheet?(t=>{let e="";for(const r of t.cssRules)e+=r.cssText;return fB(e)})(n):n;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:dB,defineProperty:gB,getOwnPropertyDescriptor:pB,getOwnPropertyNames:mB,getOwnPropertySymbols:CB,getPrototypeOf:yB}=Object,Wn=globalThis,vg=Wn.trustedTypes,wB=vg?vg.emptyScript:"",Zf=Wn.reactiveElementPolyfillSupport,zo=(n,t)=>n,$f={toAttribute(n,t){switch(t){case Boolean:n=n?wB:null;break;case Object:case Array:n=n==null?n:JSON.stringify(n)}return n},fromAttribute(n,t){let e=n;switch(t){case Boolean:e=n!==null;break;case Number:e=n===null?null:Number(n);break;case Object:case Array:try{e=JSON.parse(n)}catch{e=null}}return e}},Qg=(n,t)=>!dB(n,t),Sg={attribute:!0,type:String,converter:$f,reflect:!1,useDefault:!1,hasChanged:Qg};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Wn.litPropertyMetadata??(Wn.litPropertyMetadata=new WeakMap);let qi=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??(this.l=[])).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=Sg){if(e.state&&(e.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((e=Object.create(e)).wrapped=!0),this.elementProperties.set(t,e),!e.noAccessor){const r=Symbol(),i=this.getPropertyDescriptor(t,r,e);i!==void 0&&gB(this.prototype,t,i)}}static getPropertyDescriptor(t,e,r){const{get:i,set:s}=pB(this.prototype,t)??{get(){return this[e]},set(o){this[e]=o}};return{get:i,set(o){const a=i==null?void 0:i.call(this);s==null||s.call(this,o),this.requestUpdate(t,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??Sg}static _$Ei(){if(this.hasOwnProperty(zo("elementProperties")))return;const t=yB(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(zo("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(zo("properties"))){const e=this.properties,r=[...mB(e),...CB(e)];for(const i of r)this.createProperty(i,e[i])}const t=this[Symbol.metadata];if(t!==null){const e=litPropertyMetadata.get(t);if(e!==void 0)for(const[r,i]of e)this.elementProperties.set(r,i)}this._$Eh=new Map;for(const[e,r]of this.elementProperties){const i=this._$Eu(e,r);i!==void 0&&this._$Eh.set(i,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const r=new Set(t.flat(1/0).reverse());for(const i of r)e.unshift(Bg(i))}else t!==void 0&&e.push(Bg(t));return e}static _$Eu(t,e){const r=e.attribute;return r===!1?void 0:typeof r=="string"?r:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),(t=this.constructor.l)==null||t.forEach(e=>e(this))}addController(t){var e;(this._$EO??(this._$EO=new Set)).add(t),this.renderRoot!==void 0&&this.isConnected&&((e=t.hostConnected)==null||e.call(t))}removeController(t){var e;(e=this._$EO)==null||e.delete(t)}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const r of e.keys())this.hasOwnProperty(r)&&(t.set(r,this[r]),delete this[r]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return hB(t,this.constructor.elementStyles),t}connectedCallback(){var t;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$EO)==null||t.forEach(e=>{var r;return(r=e.hostConnected)==null?void 0:r.call(e)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$EO)==null||t.forEach(e=>{var r;return(r=e.hostDisconnected)==null?void 0:r.call(e)})}attributeChangedCallback(t,e,r){this._$AK(t,r)}_$ET(t,e){var s;const r=this.constructor.elementProperties.get(t),i=this.constructor._$Eu(t,r);if(i!==void 0&&r.reflect===!0){const o=(((s=r.converter)==null?void 0:s.toAttribute)!==void 0?r.converter:$f).toAttribute(e,r.type);this._$Em=t,o==null?this.removeAttribute(i):this.setAttribute(i,o),this._$Em=null}}_$AK(t,e){var s,o;const r=this.constructor,i=r._$Eh.get(t);if(i!==void 0&&this._$Em!==i){const a=r.getPropertyOptions(i),l=typeof a.converter=="function"?{fromAttribute:a.converter}:((s=a.converter)==null?void 0:s.fromAttribute)!==void 0?a.converter:$f;this._$Em=i;const c=l.fromAttribute(e,a.type);this[i]=c??((o=this._$Ej)==null?void 0:o.get(i))??c,this._$Em=null}}requestUpdate(t,e,r,i=!1,s){var o;if(t!==void 0){const a=this.constructor;if(i===!1&&(s=this[t]),r??(r=a.getPropertyOptions(t)),!((r.hasChanged??Qg)(s,e)||r.useDefault&&r.reflect&&s===((o=this._$Ej)==null?void 0:o.get(t))&&!this.hasAttribute(a._$Eu(t,r))))return;this.C(t,e,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(t,e,{useDefault:r,reflect:i,wrapped:s},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(t)&&(this._$Ej.set(t,o??e??this[t]),s!==!0||o!==void 0)||(this._$AL.has(t)||(this.hasUpdated||r||(e=void 0),this._$AL.set(t,e)),i===!0&&this._$Em!==t&&(this._$Eq??(this._$Eq=new Set)).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const i=this.constructor.elementProperties;if(i.size>0)for(const[s,o]of i){const{wrapped:a}=o,l=this[s];a!==!0||this._$AL.has(s)||l===void 0||this.C(s,void 0,o,l)}}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),(r=this._$EO)==null||r.forEach(i=>{var s;return(s=i.hostUpdate)==null?void 0:s.call(i)}),this.update(e)):this._$EM()}catch(i){throw t=!1,this._$EM(),i}t&&this._$AE(e)}willUpdate(t){}_$AE(t){var e;(e=this._$EO)==null||e.forEach(r=>{var i;return(i=r.hostUpdated)==null?void 0:i.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&(this._$Eq=this._$Eq.forEach(e=>this._$ET(e,this[e]))),this._$EM()}updated(t){}firstUpdated(t){}};qi.elementStyles=[],qi.shadowRootOptions={mode:"open"},qi[zo("elementProperties")]=new Map,qi[zo("finalized")]=new Map,Zf==null||Zf({ReactiveElement:qi}),(Wn.reactiveElementVersions??(Wn.reactiveElementVersions=[])).push("2.1.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ho=globalThis,Dg=n=>n,Sl=Ho.trustedTypes,kg=Sl?Sl.createPolicy("lit-html",{createHTML:n=>n}):void 0,Fg="$lit$",Xn=`lit$${Math.random().toFixed(9).slice(2)}$`,Mg="?"+Xn,xB=`<${Mg}>`,Pr=document,_o=()=>Pr.createComment(""),Vo=n=>n===null||typeof n!="object"&&typeof n!="function",eA=Array.isArray,IB=n=>eA(n)||typeof(n==null?void 0:n[Symbol.iterator])=="function",tA=`[ 	
\f\r]`,Yo=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Rg=/-->/g,Ng=/>/g,Lr=RegExp(`>|${tA}(?:([^\\s"'>=/]+)(${tA}*=${tA}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Tg=/'/g,Pg=/"/g,Lg=/^(?:script|style|textarea|title)$/i,EB=n=>(t,...e)=>({_$litType$:n,strings:t,values:e}),Ie=EB(1),Or=Symbol.for("lit-noChange"),ke=Symbol.for("lit-nothing"),Og=new WeakMap,Ur=Pr.createTreeWalker(Pr,129);function Ug(n,t){if(!eA(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return kg!==void 0?kg.createHTML(t):t}const bB=(n,t)=>{const e=n.length-1,r=[];let i,s=t===2?"<svg>":t===3?"<math>":"",o=Yo;for(let a=0;a<e;a++){const l=n[a];let c,u,f=-1,h=0;for(;h<l.length&&(o.lastIndex=h,u=o.exec(l),u!==null);)h=o.lastIndex,o===Yo?u[1]==="!--"?o=Rg:u[1]!==void 0?o=Ng:u[2]!==void 0?(Lg.test(u[2])&&(i=RegExp("</"+u[2],"g")),o=Lr):u[3]!==void 0&&(o=Lr):o===Lr?u[0]===">"?(o=i??Yo,f=-1):u[1]===void 0?f=-2:(f=o.lastIndex-u[2].length,c=u[1],o=u[3]===void 0?Lr:u[3]==='"'?Pg:Tg):o===Pg||o===Tg?o=Lr:o===Rg||o===Ng?o=Yo:(o=Lr,i=void 0);const A=o===Lr&&n[a+1].startsWith("/>")?" ":"";s+=o===Yo?l+xB:f>=0?(r.push(c),l.slice(0,f)+Fg+l.slice(f)+Xn+A):l+Xn+(f===-2?a:A)}return[Ug(n,s+(n[e]||"<?>")+(t===2?"</svg>":t===3?"</math>":"")),r]};class Jo{constructor({strings:t,_$litType$:e},r){let i;this.parts=[];let s=0,o=0;const a=t.length-1,l=this.parts,[c,u]=bB(t,e);if(this.el=Jo.createElement(c,r),Ur.currentNode=this.el.content,e===2||e===3){const f=this.el.content.firstChild;f.replaceWith(...f.childNodes)}for(;(i=Ur.nextNode())!==null&&l.length<a;){if(i.nodeType===1){if(i.hasAttributes())for(const f of i.getAttributeNames())if(f.endsWith(Fg)){const h=u[o++],A=i.getAttribute(f).split(Xn),d=/([.?@])?(.*)/.exec(h);l.push({type:1,index:s,name:d[2],strings:A,ctor:d[1]==="."?vB:d[1]==="?"?QB:d[1]==="@"?SB:Dl}),i.removeAttribute(f)}else f.startsWith(Xn)&&(l.push({type:6,index:s}),i.removeAttribute(f));if(Lg.test(i.tagName)){const f=i.textContent.split(Xn),h=f.length-1;if(h>0){i.textContent=Sl?Sl.emptyScript:"";for(let A=0;A<h;A++)i.append(f[A],_o()),Ur.nextNode(),l.push({type:2,index:++s});i.append(f[h],_o())}}}else if(i.nodeType===8)if(i.data===Mg)l.push({type:2,index:s});else{let f=-1;for(;(f=i.data.indexOf(Xn,f+1))!==-1;)l.push({type:7,index:s}),f+=Xn.length-1}s++}}static createElement(t,e){const r=Pr.createElement("template");return r.innerHTML=t,r}}function Ki(n,t,e=n,r){var o,a;if(t===Or)return t;let i=r!==void 0?(o=e._$Co)==null?void 0:o[r]:e._$Cl;const s=Vo(t)?void 0:t._$litDirective$;return(i==null?void 0:i.constructor)!==s&&((a=i==null?void 0:i._$AO)==null||a.call(i,!1),s===void 0?i=void 0:(i=new s(n),i._$AT(n,e,r)),r!==void 0?(e._$Co??(e._$Co=[]))[r]=i:e._$Cl=i),i!==void 0&&(t=Ki(n,i._$AS(n,t.values),i,r)),t}class BB{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:r}=this._$AD,i=((t==null?void 0:t.creationScope)??Pr).importNode(e,!0);Ur.currentNode=i;let s=Ur.nextNode(),o=0,a=0,l=r[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new qo(s,s.nextSibling,this,t):l.type===1?c=new l.ctor(s,l.name,l.strings,this,t):l.type===6&&(c=new DB(s,this,t)),this._$AV.push(c),l=r[++a]}o!==(l==null?void 0:l.index)&&(s=Ur.nextNode(),o++)}return Ur.currentNode=Pr,i}p(t){let e=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(t,r,e),e+=r.strings.length-2):r._$AI(t[e])),e++}}class qo{get _$AU(){var t;return((t=this._$AM)==null?void 0:t._$AU)??this._$Cv}constructor(t,e,r,i){this.type=2,this._$AH=ke,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=r,this.options=i,this._$Cv=(i==null?void 0:i.isConnected)??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return e!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=Ki(this,t,e),Vo(t)?t===ke||t==null||t===""?(this._$AH!==ke&&this._$AR(),this._$AH=ke):t!==this._$AH&&t!==Or&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):IB(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==ke&&Vo(this._$AH)?this._$AA.nextSibling.data=t:this.T(Pr.createTextNode(t)),this._$AH=t}$(t){var s;const{values:e,_$litType$:r}=t,i=typeof r=="number"?this._$AC(t):(r.el===void 0&&(r.el=Jo.createElement(Ug(r.h,r.h[0]),this.options)),r);if(((s=this._$AH)==null?void 0:s._$AD)===i)this._$AH.p(e);else{const o=new BB(i,this),a=o.u(this.options);o.p(e),this.T(a),this._$AH=o}}_$AC(t){let e=Og.get(t.strings);return e===void 0&&Og.set(t.strings,e=new Jo(t)),e}k(t){eA(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let r,i=0;for(const s of t)i===e.length?e.push(r=new qo(this.O(_o()),this.O(_o()),this,this.options)):r=e[i],r._$AI(s),i++;i<e.length&&(this._$AR(r&&r._$AB.nextSibling,i),e.length=i)}_$AR(t=this._$AA.nextSibling,e){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,e);t!==this._$AB;){const i=Dg(t).nextSibling;Dg(t).remove(),t=i}}setConnected(t){var e;this._$AM===void 0&&(this._$Cv=t,(e=this._$AP)==null||e.call(this,t))}}class Dl{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,r,i,s){this.type=1,this._$AH=ke,this._$AN=void 0,this.element=t,this.name=e,this._$AM=i,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=ke}_$AI(t,e=this,r,i){const s=this.strings;let o=!1;if(s===void 0)t=Ki(this,t,e,0),o=!Vo(t)||t!==this._$AH&&t!==Or,o&&(this._$AH=t);else{const a=t;let l,c;for(t=s[0],l=0;l<s.length-1;l++)c=Ki(this,a[r+l],e,l),c===Or&&(c=this._$AH[l]),o||(o=!Vo(c)||c!==this._$AH[l]),c===ke?t=ke:t!==ke&&(t+=(c??"")+s[l+1]),this._$AH[l]=c}o&&!i&&this.j(t)}j(t){t===ke?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class vB extends Dl{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===ke?void 0:t}}class QB extends Dl{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==ke)}}let SB=class extends Dl{constructor(t,e,r,i,s){super(t,e,r,i,s),this.type=5}_$AI(t,e=this){if((t=Ki(this,t,e,0)??ke)===Or)return;const r=this._$AH,i=t===ke&&r!==ke||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,s=t!==ke&&(r===ke||i);i&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e;typeof this._$AH=="function"?this._$AH.call(((e=this.options)==null?void 0:e.host)??this.element,t):this._$AH.handleEvent(t)}};class DB{constructor(t,e,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){Ki(this,t)}}const nA=Ho.litHtmlPolyfillSupport;nA==null||nA(Jo,qo),(Ho.litHtmlVersions??(Ho.litHtmlVersions=[])).push("3.3.2");const Ko=(n,t,e)=>{const r=(e==null?void 0:e.renderBefore)??t;let i=r._$litPart$;if(i===void 0){const s=(e==null?void 0:e.renderBefore)??null;r._$litPart$=i=new qo(t.insertBefore(_o(),s),s,void 0,e??{})}return i._$AI(n),i};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Gr=globalThis;let jo=class extends qi{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e;const t=super.createRenderRoot();return(e=this.renderOptions).renderBefore??(e.renderBefore=t.firstChild),t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=Ko(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)==null||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)==null||t.setConnected(!1)}render(){return Or}};jo._$litElement$=!0,jo.finalized=!0,(LE=Gr.litElementHydrateSupport)==null||LE.call(Gr,{LitElement:jo});const rA=Gr.litElementPolyfillSupport;rA==null||rA({LitElement:jo}),(Gr.litElementVersions??(Gr.litElementVersions=[])).push("4.2.2");var Gg={},iA={},sA=34,Wo=10,oA=13;function zg(n){return new Function("d","return {"+n.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function kB(n,t){var e=zg(n);return function(r,i){return t(e(r),i,n)}}function Hg(n){var t=Object.create(null),e=[];return n.forEach(function(r){for(var i in r)i in t||e.push(t[i]=i)}),e}function yt(n,t){var e=n+"",r=e.length;return r<t?new Array(t-r+1).join(0)+e:e}function FB(n){return n<0?"-"+yt(-n,6):n>9999?"+"+yt(n,6):yt(n,4)}function MB(n){var t=n.getUTCHours(),e=n.getUTCMinutes(),r=n.getUTCSeconds(),i=n.getUTCMilliseconds();return isNaN(n)?"Invalid Date":FB(n.getUTCFullYear())+"-"+yt(n.getUTCMonth()+1,2)+"-"+yt(n.getUTCDate(),2)+(i?"T"+yt(t,2)+":"+yt(e,2)+":"+yt(r,2)+"."+yt(i,3)+"Z":r?"T"+yt(t,2)+":"+yt(e,2)+":"+yt(r,2)+"Z":e||t?"T"+yt(t,2)+":"+yt(e,2)+"Z":"")}function _g(n){var t=new RegExp('["'+n+`
\r]`),e=n.charCodeAt(0);function r(f,h){var A,d,g=i(f,function(m,p){if(A)return A(m,p-1);d=m,A=h?kB(m,h):zg(m)});return g.columns=d||[],g}function i(f,h){var A=[],d=f.length,g=0,m=0,p,w=d<=0,I=!1;f.charCodeAt(d-1)===Wo&&--d,f.charCodeAt(d-1)===oA&&--d;function y(){if(w)return iA;if(I)return I=!1,Gg;var B,E=g,Q;if(f.charCodeAt(E)===sA){for(;g++<d&&f.charCodeAt(g)!==sA||f.charCodeAt(++g)===sA;);return(B=g)>=d?w=!0:(Q=f.charCodeAt(g++))===Wo?I=!0:Q===oA&&(I=!0,f.charCodeAt(g)===Wo&&++g),f.slice(E+1,B-1).replace(/""/g,'"')}for(;g<d;){if((Q=f.charCodeAt(B=g++))===Wo)I=!0;else if(Q===oA)I=!0,f.charCodeAt(g)===Wo&&++g;else if(Q!==e)continue;return f.slice(E,B)}return w=!0,f.slice(E,d)}for(;(p=y())!==iA;){for(var b=[];p!==Gg&&p!==iA;)b.push(p),p=y();h&&(b=h(b,m++))==null||A.push(b)}return A}function s(f,h){return f.map(function(A){return h.map(function(d){return u(A[d])}).join(n)})}function o(f,h){return h==null&&(h=Hg(f)),[h.map(u).join(n)].concat(s(f,h)).join(`
`)}function a(f,h){return h==null&&(h=Hg(f)),s(f,h).join(`
`)}function l(f){return f.map(c).join(`
`)}function c(f){return f.map(u).join(n)}function u(f){return f==null?"":f instanceof Date?MB(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:l,formatRow:c,formatValue:u}}var RB=_g("	"),NB=RB.parseRows;function TB(n){return n}function PB(n){if(n==null)return TB;var t,e,r=n.scale[0],i=n.scale[1],s=n.translate[0],o=n.translate[1];return function(a,l){l||(t=e=0);var c=2,u=a.length,f=new Array(u);for(f[0]=(t+=a[0])*r+s,f[1]=(e+=a[1])*i+o;c<u;)f[c]=a[c],++c;return f}}function LB(n,t){for(var e,r=n.length,i=r-t;i<--r;)e=n[i],n[i++]=n[r],n[r]=e}function OB(n,t){return typeof t=="string"&&(t=n.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(e){return Vg(n,e)})}:Vg(n,t)}function Vg(n,t){var e=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=Yg(n,t);return e==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:e,properties:i,geometry:s}:{type:"Feature",id:e,bbox:r,properties:i,geometry:s}}function Yg(n,t){var e=PB(n.transform),r=n.arcs;function i(u,f){f.length&&f.pop();for(var h=r[u<0?~u:u],A=0,d=h.length;A<d;++A)f.push(e(h[A],A));u<0&&LB(f,d)}function s(u){return e(u)}function o(u){for(var f=[],h=0,A=u.length;h<A;++h)i(u[h],f);return f.length<2&&f.push(f[0]),f}function a(u){for(var f=o(u);f.length<4;)f.push(f[0]);return f}function l(u){return u.map(a)}function c(u){var f=u.type,h;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(c)};case"Point":h=s(u.coordinates);break;case"MultiPoint":h=u.coordinates.map(s);break;case"LineString":h=o(u.arcs);break;case"MultiLineString":h=u.arcs.map(o);break;case"Polygon":h=l(u.arcs);break;case"MultiPolygon":h=u.arcs.map(l);break;default:return null}return{type:f,coordinates:h}}return c(t)}function UB(n,t){var e={},r={},i={},s=[],o=-1;t.forEach(function(c,u){var f=n.arcs[c<0?~c:c],h;f.length<3&&!f[1][0]&&!f[1][1]&&(h=t[++o],t[o]=c,t[u]=h)}),t.forEach(function(c){var u=a(c),f=u[0],h=u[1],A,d;if(A=i[f])if(delete i[A.end],A.push(c),A.end=h,d=r[h]){delete r[d.start];var g=d===A?A:A.concat(d);r[g.start=A.start]=i[g.end=d.end]=g}else r[A.start]=i[A.end]=A;else if(A=r[h])if(delete r[A.start],A.unshift(c),A.start=f,d=i[f]){delete i[d.end];var m=d===A?A:d.concat(A);r[m.start=d.start]=i[m.end=A.end]=m}else r[A.start]=i[A.end]=A;else A=[c],r[A.start=f]=i[A.end=h]=A});function a(c){var u=n.arcs[c<0?~c:c],f=u[0],h;return n.transform?(h=[0,0],u.forEach(function(A){h[0]+=A[0],h[1]+=A[1]})):h=u[u.length-1],c<0?[h,f]:[f,h]}function l(c,u){for(var f in c){var h=c[f];delete u[h.start],delete h.start,delete h.end,h.forEach(function(A){e[A<0?~A:A]=1}),s.push(h)}}return l(i,r),l(r,i),t.forEach(function(c){e[c<0?~c:c]||s.push([c])}),s}function GB(n){return Yg(n,zB.apply(this,arguments))}function zB(n,t,e){var r,i,s;if(arguments.length>1)r=HB(n,t,e);else for(i=0,r=new Array(s=n.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:UB(n,r)}}function HB(n,t,e){var r=[],i=[],s;function o(f){var h=f<0?~f:f;(i[h]||(i[h]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function l(f){f.forEach(a)}function c(f){f.forEach(l)}function u(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(u);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":l(f.arcs);break;case"MultiPolygon":c(f.arcs);break}}return u(t),i.forEach(e==null?function(f){r.push(f[0].i)}:function(f){e(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function zr(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function _B(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function Hr(n){let t,e,r;n.length!==2?(t=zr,e=(a,l)=>zr(n(a),l),r=(a,l)=>n(a)-l):(t=n===zr||n===_B?n:VB,e=n,r=n);function i(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;e(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;e(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){const f=i(a,l,c,u-1);return f>c&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:o,right:s}}function VB(){return 0}function Jg(n){return n===null?NaN:+n}function*YB(n,t){if(t===void 0)for(let e of n)e!=null&&(e=+e)>=e&&(yield e);else{let e=-1;for(let r of n)(r=t(r,++e,n))!=null&&(r=+r)>=r&&(yield r)}}const qg=Hr(zr),Zn=qg.right;qg.left,Hr(Jg).center;function JB(n,t){let e=0;if(t===void 0)for(let r of n)r!=null&&(r=+r)>=r&&++e;else{let r=-1;for(let i of n)(i=t(i,++r,n))!=null&&(i=+i)>=i&&++e}return e}function qB(n,t){let e=0,r,i=0,s=0;if(t===void 0)for(let o of n)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++e,s+=r*(o-i));else{let o=-1;for(let a of n)(a=t(a,++o,n))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++e,s+=r*(a-i))}if(e>1)return s/(e-1)}function KB(n,t){let e,r;for(const i of n)i!=null&&(e===void 0?i>=i&&(e=r=i):(e>i&&(e=i),r<i&&(r=i)));return[e,r]}class Sn extends Map{constructor(t,e=XB){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Kg(this,t))}has(t){return super.has(Kg(this,t))}set(t,e){return super.set(jB(this,t),e)}delete(t){return super.delete(WB(this,t))}}function Kg({_intern:n,_key:t},e){const r=t(e);return n.has(r)?n.get(r):e}function jB({_intern:n,_key:t},e){const r=t(e);return n.has(r)?n.get(r):(n.set(r,e),e)}function WB({_intern:n,_key:t},e){const r=t(e);return n.has(r)&&(e=n.get(r),n.delete(r)),e}function XB(n){return n!==null&&typeof n=="object"?n.valueOf():n}function aA(n){return n}function kl(n,...t){return jg(n,aA,aA,t)}function ZB(n,...t){return jg(n,Array.from,aA,t)}function jg(n,t,e,r){return(function i(s,o){if(o>=r.length)return e(s);const a=new Sn,l=r[o++];let c=-1;for(const u of s){const f=l(u,++c,s),h=a.get(f);h?h.push(u):a.set(f,[u])}for(const[u,f]of a)a.set(u,i(f,o));return t(a)})(n,0)}function $B(n=zr){if(n===zr)return Wg;if(typeof n!="function")throw new TypeError("compare is not a function");return(t,e)=>{const r=n(t,e);return r||r===0?r:(n(e,e)===0)-(n(t,t)===0)}}function Wg(n,t){return(n==null||!(n>=n))-(t==null||!(t>=t))||(n<t?-1:n>t?1:0)}const e2=Math.sqrt(50),t2=Math.sqrt(10),n2=Math.sqrt(2);function Fl(n,t,e){const r=(t-n)/Math.max(0,e),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=e2?10:s>=t2?5:s>=n2?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(n*c),l=Math.round(t*c),a/c<n&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(n/c),l=Math.round(t/c),a*c<n&&++a,l*c>t&&--l),l<a&&.5<=e&&e<2?Fl(n,t,e*2):[a,l,c]}function Ml(n,t,e){if(t=+t,n=+n,e=+e,!(e>0))return[];if(n===t)return[n];const r=t<n,[i,s,o]=r?Fl(t,n,e):Fl(n,t,e);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(i+c)/-o;else for(let c=0;c<a;++c)l[c]=(i+c)*o;return l}function cA(n,t,e){return t=+t,n=+n,e=+e,Fl(n,t,e)[2]}function _r(n,t,e){t=+t,n=+n,e=+e;const r=t<n,i=r?cA(t,n,e):cA(n,t,e);return(r?-1:1)*(i<0?1/-i:i)}function lA(n,t){let e;if(t===void 0)for(const r of n)r!=null&&(e<r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of n)(i=t(i,++r,n))!=null&&(e<i||e===void 0&&i>=i)&&(e=i)}return e}function uA(n,t){let e;if(t===void 0)for(const r of n)r!=null&&(e>r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of n)(i=t(i,++r,n))!=null&&(e>i||e===void 0&&i>=i)&&(e=i)}return e}function Xg(n,t,e=0,r=1/0,i){if(t=Math.floor(t),e=Math.floor(Math.max(0,e)),r=Math.floor(Math.min(n.length-1,r)),!(e<=t&&t<=r))return n;for(i=i===void 0?Wg:$B(i);r>e;){if(r-e>600){const l=r-e+1,c=t-e+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),A=Math.max(e,Math.floor(t-c*f/l+h)),d=Math.min(r,Math.floor(t+(l-c)*f/l+h));Xg(n,t,A,d,i)}const s=n[t];let o=e,a=r;for(Xo(n,e,t),i(n[r],s)>0&&Xo(n,e,r);o<a;){for(Xo(n,o,a),++o,--a;i(n[o],s)<0;)++o;for(;i(n[a],s)>0;)--a}i(n[e],s)===0?Xo(n,e,a):(++a,Xo(n,a,r)),a<=t&&(e=a+1),t<=a&&(r=a-1)}return n}function Xo(n,t,e){const r=n[t];n[t]=n[e],n[e]=r}function r2(n,t,e){if(n=Float64Array.from(YB(n,e)),!(!(r=n.length)||isNaN(t=+t))){if(t<=0||r<2)return uA(n);if(t>=1)return lA(n);var r,i=(r-1)*t,s=Math.floor(i),o=lA(Xg(n,s).subarray(0,s+1)),a=uA(n.subarray(s+1));return o+(a-o)*(i-s)}}function Zg(n,t,e=Jg){if(!(!(r=n.length)||isNaN(t=+t))){if(t<=0||r<2)return+e(n[0],0,n);if(t>=1)return+e(n[r-1],r-1,n);var r,i=(r-1)*t,s=Math.floor(i),o=+e(n[s],s,n),a=+e(n[s+1],s+1,n);return o+(a-o)*(i-s)}}function i2(n,t){let e=0,r=0;if(t===void 0)for(let i of n)i!=null&&(i=+i)>=i&&(++e,r+=i);else{let i=-1;for(let s of n)(s=t(s,++i,n))!=null&&(s=+s)>=s&&(++e,r+=s)}if(e)return r/e}function s2(n,t){return r2(n,.5,t)}function Zo(n,t,e){n=+n,t=+t,e=(i=arguments.length)<2?(t=n,n=0,1):i<3?1:+e;for(var r=-1,i=Math.max(0,Math.ceil((t-n)/e))|0,s=new Array(i);++r<i;)s[r]=n+r*e;return s}function $o(n,t){let e=0;if(t===void 0)for(let r of n)(r=+r)&&(e+=r);else{let r=-1;for(let i of n)(i=+t(i,++r,n))&&(e+=i)}return e}function o2(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function Rl(n,t){if(!isFinite(n)||n===0)return null;var e=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"),r=n.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+n.slice(e+1)]}function ji(n){return n=Rl(Math.abs(n)),n?n[1]:NaN}function a2(n,t){return function(e,r){for(var i=e.length,s=[],o=0,a=n[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(e.substring(i-=a,i+a)),!((l+=a+1)>r));)a=n[o=(o+1)%n.length];return s.reverse().join(t)}}function c2(n){return function(t){return t.replace(/[0-9]/g,function(e){return n[+e]})}}var l2=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wi(n){if(!(t=l2.exec(n)))throw new Error("invalid format: "+n);var t;return new fA({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Wi.prototype=fA.prototype;function fA(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}fA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function u2(n){e:for(var t=n.length,e=1,r=-1,i;e<t;++e)switch(n[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+n[e])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var Nl;function f2(n,t){var e=Rl(n,t);if(!e)return Nl=void 0,n.toPrecision(t);var r=e[0],i=e[1],s=i-(Nl=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Rl(n,Math.max(0,t+s-1))[0]}function $g(n,t){var e=Rl(n,t);if(!e)return n+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const ep={"%":(n,t)=>(n*100).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:o2,e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>$g(n*100,t),r:$g,s:f2,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function tp(n){return n}var np=Array.prototype.map,rp=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function A2(n){var t=n.grouping===void 0||n.thousands===void 0?tp:a2(np.call(n.grouping,Number),n.thousands+""),e=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",s=n.numerals===void 0?tp:c2(np.call(n.numerals,String)),o=n.percent===void 0?"%":n.percent+"",a=n.minus===void 0?"−":n.minus+"",l=n.nan===void 0?"NaN":n.nan+"";function c(f,h){f=Wi(f);var A=f.fill,d=f.align,g=f.sign,m=f.symbol,p=f.zero,w=f.width,I=f.comma,y=f.precision,b=f.trim,B=f.type;B==="n"?(I=!0,B="g"):ep[B]||(y===void 0&&(y=12),b=!0,B="g"),(p||A==="0"&&d==="=")&&(p=!0,A="0",d="=");var E=(h&&h.prefix!==void 0?h.prefix:"")+(m==="$"?e:m==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():""),Q=(m==="$"?r:/[%p]/.test(B)?o:"")+(h&&h.suffix!==void 0?h.suffix:""),k=ep[B],S=/[defgprs%]/.test(B);y=y===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function P(N){var U=E,H=Q,J,V,$;if(B==="c")H=k(N)+H,N="";else{N=+N;var le=N<0||1/N<0;if(N=isNaN(N)?l:k(Math.abs(N),y),b&&(N=u2(N)),le&&+N==0&&g!=="+"&&(le=!1),U=(le?g==="("?g:a:g==="-"||g==="("?"":g)+U,H=(B==="s"&&!isNaN(N)&&Nl!==void 0?rp[8+Nl/3]:"")+H+(le&&g==="("?")":""),S){for(J=-1,V=N.length;++J<V;)if($=N.charCodeAt(J),48>$||$>57){H=($===46?i+N.slice(J+1):N.slice(J))+H,N=N.slice(0,J);break}}}I&&!p&&(N=t(N,1/0));var de=U.length+N.length+H.length,ge=de<w?new Array(w-de+1).join(A):"";switch(I&&p&&(N=t(ge+N,ge.length?w-H.length:1/0),ge=""),d){case"<":N=U+N+H+ge;break;case"=":N=U+ge+N+H;break;case"^":N=ge.slice(0,de=ge.length>>1)+U+N+H+ge.slice(de);break;default:N=ge+U+N+H;break}return s(N)}return P.toString=function(){return f+""},P}function u(f,h){var A=Math.max(-8,Math.min(8,Math.floor(ji(h)/3)))*3,d=Math.pow(10,-A),g=c((f=Wi(f),f.type="f",f),{suffix:rp[8+A/3]});return function(m){return g(d*m)}}return{format:c,formatPrefix:u}}var Tl,Ze,ip;h2({thousands:",",grouping:[3],currency:["$",""]});function h2(n){return Tl=A2(n),Ze=Tl.format,ip=Tl.formatPrefix,Tl}function d2(n){return Math.max(0,-ji(Math.abs(n)))}function g2(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ji(t)/3)))*3-ji(Math.abs(n)))}function p2(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,ji(t)-ji(n))+1}const AA=new Date,hA=new Date;function Oe(n,t,e,r){function i(s){return n(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(n(s=new Date(+s)),s),i.ceil=s=>(n(s=new Date(s-1)),t(s,1),n(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),t(s,a),n(s);while(c<s&&s<o);return l},i.filter=s=>Oe(o=>{if(o>=o)for(;n(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),e&&(i.count=(s,o)=>(AA.setTime(+s),hA.setTime(+o),n(AA),n(hA),Math.floor(e(AA,hA))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Xi=Oe(()=>{},(n,t)=>{n.setTime(+n+t)},(n,t)=>t-n);Xi.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?Oe(t=>{t.setTime(Math.floor(t/n)*n)},(t,e)=>{t.setTime(+t+e*n)},(t,e)=>(e-t)/n):Xi),Xi.range;const Dn=1e3,Mt=Dn*60,kn=Mt*60,Fn=kn*24,dA=Fn*7,sp=Fn*30,gA=Fn*365,Mn=Oe(n=>{n.setTime(n-n.getMilliseconds())},(n,t)=>{n.setTime(+n+t*Dn)},(n,t)=>(t-n)/Dn,n=>n.getUTCSeconds());Mn.range;const Pl=Oe(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*Dn)},(n,t)=>{n.setTime(+n+t*Mt)},(n,t)=>(t-n)/Mt,n=>n.getMinutes());Pl.range;const Ll=Oe(n=>{n.setUTCSeconds(0,0)},(n,t)=>{n.setTime(+n+t*Mt)},(n,t)=>(t-n)/Mt,n=>n.getUTCMinutes());Ll.range;const Ol=Oe(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*Dn-n.getMinutes()*Mt)},(n,t)=>{n.setTime(+n+t*kn)},(n,t)=>(t-n)/kn,n=>n.getHours());Ol.range;const Ul=Oe(n=>{n.setUTCMinutes(0,0,0)},(n,t)=>{n.setTime(+n+t*kn)},(n,t)=>(t-n)/kn,n=>n.getUTCHours());Ul.range;const $n=Oe(n=>n.setHours(0,0,0,0),(n,t)=>n.setDate(n.getDate()+t),(n,t)=>(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*Mt)/Fn,n=>n.getDate()-1);$n.range;const Vr=Oe(n=>{n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCDate(n.getUTCDate()+t)},(n,t)=>(t-n)/Fn,n=>n.getUTCDate()-1);Vr.range;const op=Oe(n=>{n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCDate(n.getUTCDate()+t)},(n,t)=>(t-n)/Fn,n=>Math.floor(n/Fn));op.range;function Yr(n){return Oe(t=>{t.setDate(t.getDate()-(t.getDay()+7-n)%7),t.setHours(0,0,0,0)},(t,e)=>{t.setDate(t.getDate()+e*7)},(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Mt)/dA)}const ea=Yr(0),Gl=Yr(1),m2=Yr(2),C2=Yr(3),Zi=Yr(4),y2=Yr(5),w2=Yr(6);ea.range,Gl.range,m2.range,C2.range,Zi.range,y2.range,w2.range;function Jr(n){return Oe(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e*7)},(t,e)=>(e-t)/dA)}const ta=Jr(0),zl=Jr(1),x2=Jr(2),I2=Jr(3),$i=Jr(4),E2=Jr(5),b2=Jr(6);ta.range,zl.range,x2.range,I2.range,$i.range,E2.range,b2.range;const na=Oe(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,t)=>{n.setMonth(n.getMonth()+t)},(n,t)=>t.getMonth()-n.getMonth()+(t.getFullYear()-n.getFullYear())*12,n=>n.getMonth());na.range;const ra=Oe(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCMonth(n.getUTCMonth()+t)},(n,t)=>t.getUTCMonth()-n.getUTCMonth()+(t.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());ra.range;const sn=Oe(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,t)=>{n.setFullYear(n.getFullYear()+t)},(n,t)=>t.getFullYear()-n.getFullYear(),n=>n.getFullYear());sn.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Oe(t=>{t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e*n)}),sn.range;const on=Oe(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCFullYear(n.getUTCFullYear()+t)},(n,t)=>t.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());on.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Oe(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e*n)}),on.range;function ap(n,t,e,r,i,s){const o=[[Mn,1,Dn],[Mn,5,5*Dn],[Mn,15,15*Dn],[Mn,30,30*Dn],[s,1,Mt],[s,5,5*Mt],[s,15,15*Mt],[s,30,30*Mt],[i,1,kn],[i,3,3*kn],[i,6,6*kn],[i,12,12*kn],[r,1,Fn],[r,2,2*Fn],[e,1,dA],[t,1,sp],[t,3,3*sp],[n,1,gA]];function a(c,u,f){const h=u<c;h&&([c,u]=[u,c]);const A=f&&typeof f.range=="function"?f:l(c,u,f),d=A?A.range(c,+u+1):[];return h?d.reverse():d}function l(c,u,f){const h=Math.abs(u-c)/f,A=Hr(([,,m])=>m).right(o,h);if(A===o.length)return n.every(_r(c/gA,u/gA,f));if(A===0)return Xi.every(Math.max(_r(c,u,f),1));const[d,g]=o[h/o[A-1][2]<o[A][2]/h?A-1:A];return d.every(g)}return[a,l]}const[B2,v2]=ap(on,ra,ta,op,Ul,Ll),[Q2,S2]=ap(sn,na,ea,$n,Ol,Pl),ia="year",sa="quarter",oa="month",aa="week",ca="date",Hl="day",pA="dayofyear",la="hours",ua="minutes",fa="seconds",_l="milliseconds";[ia,sa,oa,aa,ca,Hl,pA,la,ua,fa,_l].reduce((n,t,e)=>(n[t]=1+e,n),{});const D2={[ia]:sn,[sa]:na.every(3),[oa]:na,[aa]:ea,[ca]:$n,[Hl]:$n,[pA]:$n,[la]:Ol,[ua]:Pl,[fa]:Mn,[_l]:Xi},k2={[ia]:on,[sa]:ra.every(3),[oa]:ra,[aa]:ta,[ca]:Vr,[Hl]:Vr,[pA]:Vr,[la]:Ul,[ua]:Ll,[fa]:Mn,[_l]:Xi};function F2(n){return D2[n]}function M2(n){return k2[n]}function mA(n){if(0<=n.y&&n.y<100){var t=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return t.setFullYear(n.y),t}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function CA(n){if(0<=n.y&&n.y<100){var t=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function Aa(n,t,e){return{y:n,m:t,d:e,H:0,M:0,S:0,L:0}}function cp(n){var t=n.dateTime,e=n.date,r=n.time,i=n.periods,s=n.days,o=n.shortDays,a=n.months,l=n.shortMonths,c=ha(i),u=da(i),f=ha(s),h=da(s),A=ha(o),d=da(o),g=ha(a),m=da(a),p=ha(l),w=da(l),I={a:$,A:le,b:de,B:ge,c:null,d:dp,e:dp,f:tv,g:fv,G:hv,H:Z2,I:$2,j:ev,L:gp,m:nv,M:rv,p:Me,q:Bn,Q:xp,s:Ip,S:iv,u:sv,U:ov,V:av,w:cv,W:lv,x:null,X:null,y:uv,Y:Av,Z:dv,"%":wp},y={a:vn,A:Mr,b:Po,B:Le,c:null,d:mp,e:mp,f:Cv,g:Sv,G:kv,H:gv,I:pv,j:mv,L:Cp,m:yv,M:wv,p:Yt,q:vt,Q:xp,s:Ip,S:xv,u:Iv,U:Ev,V:bv,w:Bv,W:vv,x:null,X:null,y:Qv,Y:Dv,Z:Fv,"%":wp},b={a:S,A:P,b:N,B:U,c:H,d:Ap,e:Ap,f:K2,g:fp,G:up,H:hp,I:hp,j:V2,L:q2,m:_2,M:Y2,p:k,q:H2,Q:W2,s:X2,S:J2,u:L2,U:O2,V:U2,w:P2,W:G2,x:J,X:V,y:fp,Y:up,Z:z2,"%":j2};I.x=B(e,I),I.X=B(r,I),I.c=B(t,I),y.x=B(e,y),y.X=B(r,y),y.c=B(t,y);function B(_,ee){return function(re){var L=[],lt=-1,he=0,mt=_.length,ut,Jn,dl;for(re instanceof Date||(re=new Date(+re));++lt<mt;)_.charCodeAt(lt)===37&&(L.push(_.slice(he,lt)),(Jn=lp[ut=_.charAt(++lt)])!=null?ut=_.charAt(++lt):Jn=ut==="e"?" ":"0",(dl=ee[ut])&&(ut=dl(re,Jn)),L.push(ut),he=lt+1);return L.push(_.slice(he,lt)),L.join("")}}function E(_,ee){return function(re){var L=Aa(1900,void 0,1),lt=Q(L,_,re+="",0),he,mt;if(lt!=re.length)return null;if("Q"in L)return new Date(L.Q);if("s"in L)return new Date(L.s*1e3+("L"in L?L.L:0));if(ee&&!("Z"in L)&&(L.Z=0),"p"in L&&(L.H=L.H%12+L.p*12),L.m===void 0&&(L.m="q"in L?L.q:0),"V"in L){if(L.V<1||L.V>53)return null;"w"in L||(L.w=1),"Z"in L?(he=CA(Aa(L.y,0,1)),mt=he.getUTCDay(),he=mt>4||mt===0?zl.ceil(he):zl(he),he=Vr.offset(he,(L.V-1)*7),L.y=he.getUTCFullYear(),L.m=he.getUTCMonth(),L.d=he.getUTCDate()+(L.w+6)%7):(he=mA(Aa(L.y,0,1)),mt=he.getDay(),he=mt>4||mt===0?Gl.ceil(he):Gl(he),he=$n.offset(he,(L.V-1)*7),L.y=he.getFullYear(),L.m=he.getMonth(),L.d=he.getDate()+(L.w+6)%7)}else("W"in L||"U"in L)&&("w"in L||(L.w="u"in L?L.u%7:"W"in L?1:0),mt="Z"in L?CA(Aa(L.y,0,1)).getUTCDay():mA(Aa(L.y,0,1)).getDay(),L.m=0,L.d="W"in L?(L.w+6)%7+L.W*7-(mt+5)%7:L.w+L.U*7-(mt+6)%7);return"Z"in L?(L.H+=L.Z/100|0,L.M+=L.Z%100,CA(L)):mA(L)}}function Q(_,ee,re,L){for(var lt=0,he=ee.length,mt=re.length,ut,Jn;lt<he;){if(L>=mt)return-1;if(ut=ee.charCodeAt(lt++),ut===37){if(ut=ee.charAt(lt++),Jn=b[ut in lp?ee.charAt(lt++):ut],!Jn||(L=Jn(_,re,L))<0)return-1}else if(ut!=re.charCodeAt(L++))return-1}return L}function k(_,ee,re){var L=c.exec(ee.slice(re));return L?(_.p=u.get(L[0].toLowerCase()),re+L[0].length):-1}function S(_,ee,re){var L=A.exec(ee.slice(re));return L?(_.w=d.get(L[0].toLowerCase()),re+L[0].length):-1}function P(_,ee,re){var L=f.exec(ee.slice(re));return L?(_.w=h.get(L[0].toLowerCase()),re+L[0].length):-1}function N(_,ee,re){var L=p.exec(ee.slice(re));return L?(_.m=w.get(L[0].toLowerCase()),re+L[0].length):-1}function U(_,ee,re){var L=g.exec(ee.slice(re));return L?(_.m=m.get(L[0].toLowerCase()),re+L[0].length):-1}function H(_,ee,re){return Q(_,t,ee,re)}function J(_,ee,re){return Q(_,e,ee,re)}function V(_,ee,re){return Q(_,r,ee,re)}function $(_){return o[_.getDay()]}function le(_){return s[_.getDay()]}function de(_){return l[_.getMonth()]}function ge(_){return a[_.getMonth()]}function Me(_){return i[+(_.getHours()>=12)]}function Bn(_){return 1+~~(_.getMonth()/3)}function vn(_){return o[_.getUTCDay()]}function Mr(_){return s[_.getUTCDay()]}function Po(_){return l[_.getUTCMonth()]}function Le(_){return a[_.getUTCMonth()]}function Yt(_){return i[+(_.getUTCHours()>=12)]}function vt(_){return 1+~~(_.getUTCMonth()/3)}return{format:function(_){var ee=B(_+="",I);return ee.toString=function(){return _},ee},parse:function(_){var ee=E(_+="",!1);return ee.toString=function(){return _},ee},utcFormat:function(_){var ee=B(_+="",y);return ee.toString=function(){return _},ee},utcParse:function(_){var ee=E(_+="",!0);return ee.toString=function(){return _},ee}}}var lp={"-":"",_:" ",0:"0"},Ve=/^\s*\d+/,R2=/^%/,N2=/[\\^$*+?|[\]().{}]/g;function ae(n,t,e){var r=n<0?"-":"",i=(r?-n:n)+"",s=i.length;return r+(s<e?new Array(e-s+1).join(t)+i:i)}function T2(n){return n.replace(N2,"\\$&")}function ha(n){return new RegExp("^(?:"+n.map(T2).join("|")+")","i")}function da(n){return new Map(n.map((t,e)=>[t.toLowerCase(),e]))}function P2(n,t,e){var r=Ve.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function L2(n,t,e){var r=Ve.exec(t.slice(e,e+1));return r?(n.u=+r[0],e+r[0].length):-1}function O2(n,t,e){var r=Ve.exec(t.slice(e,e+2));return r?(n.U=+r[0],e+r[0].length):-1}function U2(n,t,e){var r=Ve.exec(t.slice(e,e+2));return r?(n.V=+r[0],e+r[0].length):-1}function G2(n,t,e){var r=Ve.exec(t.slice(e,e+2));return r?(n.W=+r[0],e+r[0].length):-1}function up(n,t,e){var r=Ve.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function fp(n,t,e){var r=Ve.exec(t.slice(e,e+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function z2(n,t,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(e,e+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function H2(n,t,e){var r=Ve.exec(t.slice(e,e+1));return r?(n.q=r[0]*3-3,e+r[0].length):-1}function _2(n,t,e){var r=Ve.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function Ap(n,t,e){var r=Ve.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function V2(n,t,e){var r=Ve.exec(t.slice(e,e+3));return r?(n.m=0,n.d=+r[0],e+r[0].length):-1}function hp(n,t,e){var r=Ve.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function Y2(n,t,e){var r=Ve.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function J2(n,t,e){var r=Ve.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function q2(n,t,e){var r=Ve.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function K2(n,t,e){var r=Ve.exec(t.slice(e,e+6));return r?(n.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function j2(n,t,e){var r=R2.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function W2(n,t,e){var r=Ve.exec(t.slice(e));return r?(n.Q=+r[0],e+r[0].length):-1}function X2(n,t,e){var r=Ve.exec(t.slice(e));return r?(n.s=+r[0],e+r[0].length):-1}function dp(n,t){return ae(n.getDate(),t,2)}function Z2(n,t){return ae(n.getHours(),t,2)}function $2(n,t){return ae(n.getHours()%12||12,t,2)}function ev(n,t){return ae(1+$n.count(sn(n),n),t,3)}function gp(n,t){return ae(n.getMilliseconds(),t,3)}function tv(n,t){return gp(n,t)+"000"}function nv(n,t){return ae(n.getMonth()+1,t,2)}function rv(n,t){return ae(n.getMinutes(),t,2)}function iv(n,t){return ae(n.getSeconds(),t,2)}function sv(n){var t=n.getDay();return t===0?7:t}function ov(n,t){return ae(ea.count(sn(n)-1,n),t,2)}function pp(n){var t=n.getDay();return t>=4||t===0?Zi(n):Zi.ceil(n)}function av(n,t){return n=pp(n),ae(Zi.count(sn(n),n)+(sn(n).getDay()===4),t,2)}function cv(n){return n.getDay()}function lv(n,t){return ae(Gl.count(sn(n)-1,n),t,2)}function uv(n,t){return ae(n.getFullYear()%100,t,2)}function fv(n,t){return n=pp(n),ae(n.getFullYear()%100,t,2)}function Av(n,t){return ae(n.getFullYear()%1e4,t,4)}function hv(n,t){var e=n.getDay();return n=e>=4||e===0?Zi(n):Zi.ceil(n),ae(n.getFullYear()%1e4,t,4)}function dv(n){var t=n.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ae(t/60|0,"0",2)+ae(t%60,"0",2)}function mp(n,t){return ae(n.getUTCDate(),t,2)}function gv(n,t){return ae(n.getUTCHours(),t,2)}function pv(n,t){return ae(n.getUTCHours()%12||12,t,2)}function mv(n,t){return ae(1+Vr.count(on(n),n),t,3)}function Cp(n,t){return ae(n.getUTCMilliseconds(),t,3)}function Cv(n,t){return Cp(n,t)+"000"}function yv(n,t){return ae(n.getUTCMonth()+1,t,2)}function wv(n,t){return ae(n.getUTCMinutes(),t,2)}function xv(n,t){return ae(n.getUTCSeconds(),t,2)}function Iv(n){var t=n.getUTCDay();return t===0?7:t}function Ev(n,t){return ae(ta.count(on(n)-1,n),t,2)}function yp(n){var t=n.getUTCDay();return t>=4||t===0?$i(n):$i.ceil(n)}function bv(n,t){return n=yp(n),ae($i.count(on(n),n)+(on(n).getUTCDay()===4),t,2)}function Bv(n){return n.getUTCDay()}function vv(n,t){return ae(zl.count(on(n)-1,n),t,2)}function Qv(n,t){return ae(n.getUTCFullYear()%100,t,2)}function Sv(n,t){return n=yp(n),ae(n.getUTCFullYear()%100,t,2)}function Dv(n,t){return ae(n.getUTCFullYear()%1e4,t,4)}function kv(n,t){var e=n.getUTCDay();return n=e>=4||e===0?$i(n):$i.ceil(n),ae(n.getUTCFullYear()%1e4,t,4)}function Fv(){return"+0000"}function wp(){return"%"}function xp(n){return+n}function Ip(n){return Math.floor(+n/1e3)}var es,yA,Ep,wA,bp;Mv({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Mv(n){return es=cp(n),yA=es.format,Ep=es.parse,wA=es.utcFormat,bp=es.utcParse,es}function Vl(n){const t={};return e=>t[e]||(t[e]=n(e))}function Bp(n,t,e){e=e||{},et(e)||Te(`Invalid time multi-format specifier: ${e}`);const r=t(fa),i=t(ua),s=t(la),o=t(ca),a=t(aa),l=t(oa),c=t(sa),u=t(ia),f=n(e[_l]||".%L"),h=n(e[fa]||":%S"),A=n(e[ua]||"%I:%M"),d=n(e[la]||"%I %p"),g=n(e[ca]||e[Hl]||"%a %d"),m=n(e[aa]||"%b %d"),p=n(e[oa]||"%B"),w=n(e[sa]||"%B"),I=n(e[ia]||"%Y");return y=>(r(y)<y?f:i(y)<y?h:s(y)<y?A:o(y)<y?d:l(y)<y?a(y)<y?g:m:u(y)<y?c(y)<y?p:w:I)(y)}function vp(n){const t=Vl(n.format),e=Vl(n.utcFormat);return{timeFormat:r=>Ce(r)?t(r):Bp(t,F2,r),utcFormat:r=>Ce(r)?e(r):Bp(e,M2,r),timeParse:Vl(n.parse),utcParse:Vl(n.utcParse)}}let xA;Rv();function Rv(){return xA=vp({format:yA,parse:Ep,utcFormat:wA,utcParse:bp})}function Nv(n){return vp(cp(n))}function Tv(n){return arguments.length?xA=Nv(n):xA}const Pv=n=>n!=null&&n===n,Lv=n=>n==="true"||n==="false"||n===!0||n===!1,Ov=n=>!Number.isNaN(Date.parse(n)),Qp=n=>!Number.isNaN(+n)&&!(n instanceof Date),Uv=n=>Qp(n)&&Number.isInteger(+n),Sp={boolean:aB,integer:Oo,number:Oo,date:lB,string:uB,unknown:El},Yl=[Lv,Uv,Qp,Ov],Gv=["boolean","integer","number","date"];function zv(n,t){if(!n||!n.length)return"unknown";const e=n.length,r=Yl.length,i=Yl.map((s,o)=>o+1);for(let s=0,o=0,a,l;s<e;++s)for(l=t?n[s][t]:n[s],a=0;a<r;++a)if(i[a]&&Pv(l)&&!Yl[a](l)&&(i[a]=0,++o,o===Yl.length))return"string";return Gv[i.reduce((s,o)=>s===0?o:s,0)-1]}function Hv(n,t){return t.reduce((e,r)=>(e[r]=zv(n,r),e),{})}function Dp(n){const t=function(e,r){const i={delimiter:n};return IA(e,r?rB(r,i):i)};return t.responseType="text",t}function IA(n,t){return t.header&&(n=t.header.map(jf).join(t.delimiter)+`
`+n),_g(t.delimiter).parse(n+"")}IA.responseType="text";function _v(n){return typeof Buffer=="function"&&Ft(Buffer.isBuffer)?Buffer.isBuffer(n):!1}function EA(n,t){const e=t&&t.property?Il(t.property):El;return et(n)&&!_v(n)?Vv(e(n),t):e(JSON.parse(n))}EA.responseType="json";function Vv(n,t){return!Xe(n)&&sB(n)&&(n=[...n]),t&&t.copy?JSON.parse(JSON.stringify(n)):n}const Yv={interior:(n,t)=>n!==t,exterior:(n,t)=>n===t};function kp(n,t){let e,r,i,s;return n=EA(n,t),t&&t.feature?(e=OB,i=t.feature):t&&t.mesh?(e=GB,i=t.mesh,s=Yv[t.filter]):Te("Missing TopoJSON feature or mesh parameter."),r=(r=n.objects[i])?e(n,r,s):Te("Invalid TopoJSON object: "+i),r&&r.features||[r]}kp.responseType="json";const bA={dsv:IA,csv:Dp(","),tsv:Dp("	"),json:EA,topojson:kp};function BA(n,t){return arguments.length>1?(bA[n]=t,this):Ji(bA,n)?bA[n]:null}function vA(n,t,e,r){t=t||{};const i=BA(t.type||"json");return i||Te("Unknown data format type: "+t.type),n=i(n,t),t.parse&&Jv(n,t.parse,e,r),Ji(n,"columns")&&delete n.columns,n}function Jv(n,t,e,r){if(!n.length)return;const i=Tv();e=e||i.timeParse,r=r||i.utcParse;let s=n.columns||Object.keys(n[0]),o,a,l,c,u,f;t==="auto"&&(t=Hv(n,s)),s=Object.keys(t);const h=s.map(A=>{const d=t[A];let g,m;if(d&&(d.startsWith("date:")||d.startsWith("utc:")))return g=d.split(/:(.+)?/,2),m=g[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(g[0]==="utc"?r:e)(m);if(!Sp[d])throw Error("Illegal format pattern: "+A+":"+d);return Sp[d]});for(l=0,u=n.length,f=s.length;l<u;++l)for(o=n[l],c=0;c<f;++c)a=s[c],o[a]=h[c](o[a])}const qv=`
:root {
--genome-spy-basic-spacing: 10px;
--genome-spy-font-family: system-ui, "Segoe UI", Roboto, Helvetica, Arial,
sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}

@keyframes genome-spy-blinker {
50% {
opacity: 0;
}
}

.genome-spy {
font-family: var(--genome-spy-font-family);

position: relative;

display: flex;
flex-direction: column;

.canvas-wrapper {
position: relative;
flex-grow: 1;
overflow: hidden;
}

canvas {
display: block;
transform: scale(1, 1);
opacity: 1;
transition:
transform 0.6s,
opacity 0.6s;

&:focus,
&:focus-visible {
outline: none;
}
}

.loading-message {
position: absolute;
inset: 0;
display: flex;

align-items: center;
justify-content: center;

.message {
color: #666;
opacity: 0;
transition: opacity 0.7s;
}
}

.loading {
> canvas {
transform: scale(0.95, 0.95);
opacity: 0;
}

> .loading-message .message {
opacity: 1;

.ellipsis {
animation: genome-spy-blinker 1s linear infinite;
}
}
}

.loading-indicators {
position: absolute;
inset: 0;

user-select: none;
pointer-events: none;

div {
position: absolute;
display: flex;
align-items: center;
justify-content: center;

> div {
font-size: 11px;
transition: opacity 0.2s;
background: white;
padding: 2px 5px;
display: flex;
border-radius: 3px;
gap: 0.5em;
opacity: 0;

&.loading {
opacity: 0.5;
}

&.error {
opacity: 0.8;
color: firebrick;
}

> * {
display: block;
}

img {
width: 1.5em;
height: 1.5em;
}
}
}
}

.tooltip {
position: absolute;

max-width: 450px;
overflow: hidden;

--background-color: #f6f6f6;
background: var(--background-color);
padding: var(--genome-spy-basic-spacing);

--font-size: 12px;
font-size: var(--font-size);

box-shadow: 0px 3px 15px 0px rgba(0, 0, 0, 0.21);

&:not(.sticky) {
pointer-events: none;
}

transition:
outline-color 0.3s ease-in-out,
box-shadow 0.3s ease-in-out;

outline: 0px solid transparent;
&.sticky {
outline: 2px solid black;
box-shadow: 0px 3px 18px 0px rgba(0, 0, 0, 0.3);
}

z-index: 100;

> :last-child {
margin-bottom: 0;
}

> .title {
padding-bottom: calc(var(--genome-spy-basic-spacing) / 2);
margin-bottom: calc(var(--genome-spy-basic-spacing) / 2);
border-bottom: 1px dashed var(--background-color);
border-bottom: 1px dashed
color-mix(in srgb, black 25%, var(--background-color));
}

.summary {
font-size: 12px;
}

table {
&:first-child {
margin-top: 0;
}

border-collapse: collapse;

th,
td {
padding: 2px 0.4em;
vertical-align: top;
font-size: var(--font-size);

&:first-child {
padding-left: 0;
}
}

th {
text-align: left;
font-weight: bold;
}
}

.color-legend {
display: inline-block;
width: 0.8em;
height: 0.8em;
margin-left: 0.4em;
box-shadow: 0px 0px 3px 1px white;
}

.attributes {
.hovered {
background-color: #e0e0e0;
}
}

.na {
color: #aaa;
font-style: italic;
font-size: 80%;
}
}

.gene-track-tooltip {
.summary {
font-size: 90%;
}
}

.message-box {
display: flex;
align-items: center;
justify-content: center;
position: absolute;
top: 0;
height: 100%;
width: 100%;

> div {
border: 1px solid red;
padding: 10px;
background: #fff0f0;
}
}
}

.gs-input-binding {
display: grid;
grid-template-columns: max-content max-content;
column-gap: 1em;
row-gap: 0.3em;
justify-items: start;

> select,
> input:not([type="checkbox"]) {
width: 100%;
}

input[type="range"] + span {
display: inline-block;
margin-left: 0.3em;
min-width: 2.2em;
font-variant-numeric: tabular-nums;
}

input[type="range"],
input[type="radio"] {
vertical-align: text-bottom;
}

.radio-group {
display: flex;
align-items: center;
}

.description {
max-width: 26em;
grid-column: 1 / -1;
color: #777;
font-size: 90%;
margin-top: -0.5em;
}
}

.gs-input-bindings {
flex-basis: content;
font-size: 14px;
padding: var(--genome-spy-basic-spacing);
}
`;function Kv(n,t){var e=n.getBoundingClientRect();return[t.clientX-e.left-n.clientLeft,t.clientY-e.top-n.clientTop]}function ga(n,t){return n.length==t.length&&n.every((e,r)=>n[r]===t[r])}function tt(n){return Array.isArray(n)?n:typeof n<"u"?[n]:[]}function Jl(n){return n[n.length-1]}class jv{constructor(t){D(this,zn,!1);D(this,Ys,!0);D(this,Ii);D(this,Ei,0);D(this,Js);D(this,Ic,0);D(this,dt);D(this,Er);D(this,qs,[!0]);F(this,Er,t),F(this,dt,document.createElement("div")),C(this,dt).className="tooltip",C(this,Er).appendChild(C(this,dt)),this.clear()}set sticky(t){!t&&C(this,zn)&&this.clear(),F(this,zn,t),C(this,dt).classList.toggle("sticky",C(this,zn))}get sticky(){return C(this,zn)}set visible(t){t!=C(this,Ys)&&(C(this,dt).style.display=t?null:"none",F(this,Ys,t))}get visible(){return C(this,Ys)}get enabled(){return Jl(C(this,qs))??!0}pushEnabledState(t){C(this,qs).push(t),t||(this.visible=!1)}popEnabledState(){C(this,qs).pop()}handleMouseMove(t){if(C(this,zn))return;this.mouseCoords=Kv(C(this,Er),t);const e=performance.now();!this.visible&&!this._isPenalty()&&e-C(this,Ic)>500&&F(this,Ei,e+70),C(this,Js)&&Wv(this.mouseCoords,C(this,Js))>20&&F(this,Ei,e+400),F(this,Js,this.mouseCoords),this.visible&&this.updatePlacement(),F(this,Ic,e)}updatePlacement(){const[e,r]=this.mouseCoords;let i=e+20;i>C(this,Er).clientWidth-C(this,dt).offsetWidth&&(i=e-20-C(this,dt).offsetWidth),C(this,dt).style.left=i+"px",C(this,dt).style.top=Math.min(r+20,C(this,Er).clientHeight-C(this,dt).offsetHeight)+"px"}setContent(t){if(!C(this,zn)){if(!t||!this.enabled||this._isPenalty()){this.visible&&(Ko("",C(this,dt)),this.visible=!1),F(this,Ii,void 0);return}Ko(t,C(this,dt)),this.visible=!0,this.updatePlacement()}}clear(){F(this,Ii,void 0),this.setContent(void 0)}updateWithDatum(t,e){t!==C(this,Ii)&&(F(this,Ii,t),e||(e=r=>Promise.resolve(Ie` ${JSON.stringify(r)} `)),e(t).then(r=>this.setContent(r)).catch(r=>{if(r!=="debounced")throw r}))}_isPenalty(){return C(this,Ei)&&C(this,Ei)>performance.now()}}zn=new WeakMap,Ys=new WeakMap,Ii=new WeakMap,Ei=new WeakMap,Js=new WeakMap,Ic=new WeakMap,dt=new WeakMap,Er=new WeakMap,qs=new WeakMap;function Wv(n,t){let e=0;for(let r=0;r<n.length;r++)e+=(n[r]-t[r])**2;return Math.sqrt(e)}function Xv(n){n.classList.add("genome-spy");const t=document.createElement("style");t.innerHTML=qv,n.appendChild(t);const e=QA("div",{class:"canvas-wrapper"});n.appendChild(e),e.classList.add("loading");const r=QA("div",{class:"loading-message",innerHTML:'<div class="message">Loading<span class="ellipsis">...</span></div>'});e.appendChild(r);const i=QA("div",{class:"loading-indicators"});e.appendChild(i);const s=new jv(n);return r.querySelector(".message").addEventListener("transitionend",()=>{r.style.display="none"}),{canvasWrapper:e,loadingMessageElement:r,loadingIndicatorsElement:i,tooltip:s,styleElement:t}}function Zv(n,t){const e=document.createElement("div");e.className="message-box";const r=document.createElement("div");r.textContent=t,e.appendChild(r),n.appendChild(e)}function QA(n,t){const e=document.createElement(n);for(const[r,i]of Object.entries(t))["innerHTML","innerText","className"].includes(r)&&(e[r]=i),e.setAttribute(r,i);return e}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Fp={ATTRIBUTE:1,CHILD:2},Mp=n=>(...t)=>({_$litDirective$:n,values:t});let Rp=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,r){this._$Ct=t,this._$AM=e,this._$Ci=r}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Np="important",$v=" !"+Np,SA=Mp(class extends Rp{constructor(n){var t;if(super(n),n.type!==Fp.ATTRIBUTE||n.name!=="style"||((t=n.strings)==null?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(n){return Object.keys(n).reduce((t,e)=>{const r=n[e];return r==null?t:t+`${e=e.includes("-")?e:e.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(n,[t]){const{style:e}=n.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(t)),this.render(t);for(const r of this.ft)t[r]==null&&(this.ft.delete(r),r.includes("-")?e.removeProperty(r):e[r]=null);for(const r in t){const i=t[r];if(i!=null){this.ft.add(r);const s=typeof i=="string"&&i.endsWith($v);r.includes("-")||s?e.setProperty(r,s?i.slice(0,-11):i,s?Np:""):e[r]=i}}return Or}}),eQ="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e.spinner_ajPY{transform-origin:center;animation:spinner_AtaB%20.75s%20infinite%20linear}@keyframes%20spinner_AtaB{100%25{transform:rotate(360deg)}}%3c/style%3e%3cpath%20d='M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z'%20opacity='.25'/%3e%3cpath%20d='M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z'%20class='spinner_ajPY'/%3e%3c/svg%3e";class tQ{constructor(t){D(this,bi);D(this,Bi);F(this,bi,t),F(this,Bi,new Map)}setDataLoadingStatus(t,e,r){C(this,Bi).set(t,{status:e,detail:r}),this.updateLayout()}updateLayout(){const t=[],e=()=>[...C(this,Bi).values()].some(r=>r.status=="loading"||r.status=="error");for(const[r,i]of C(this,Bi)){const s=r.coords;if(s){const o={left:`${s.x}px`,top:`${s.y}px`,width:`${s.width}px`,height:`${s.height}px`};t.push(Ie`<div style=${SA(o)}>
                        <div class=${i.status}>
                            ${i.status=="error"?Ie`<span
                                      >Loading
                                      failed${i.detail?Ie`: ${i.detail}`:ke}</span
                                  >`:Ie`
                                      <img src="${eQ}" alt="" />
                                      <span>Loading...</span>
                                  `}
                        </div>
                    </div>`)}}e()?C(this,bi).style.display="block":setTimeout(()=>{e()||(C(this,bi).style.display="none")},3e3),Ko(t,C(this,bi))}}bi=new WeakMap,Bi=new WeakMap;function nQ(n){return t=>{var e;if((e=n.querySelector(".view-highlight"))==null||e.remove(),t){if(!t.isConfiguredVisible())return;const r=t.coords;if(r){const i=document.createElement("div");i.className="view-highlight",i.style.position="absolute",i.style.left=r.x+"px",i.style.top=r.y+"px",i.style.width=r.width+"px",i.style.height=r.height+"px",i.style.border="1px solid green",i.style.backgroundColor="rgba(0, 255, 0, 0.1)",i.style.pointerEvents="none",n.appendChild(i)}}}}class rQ{constructor(){D(this,br);F(this,br,new Map)}add(t,e){document.addEventListener(t,e);let r=C(this,br).get(t);r||(r=[],C(this,br).set(t,r)),r.push(e)}removeAll(){for(const[t,e]of C(this,br))for(const r of e)document.removeEventListener(t,r);C(this,br).clear()}}br=new WeakMap;class Tp{constructor(){D(this,Br);F(this,Br,new Map)}add(t,e){let r=C(this,Br).get(t);r||(r=new Set,C(this,Br).set(t,r)),r.add(e)}remove(t,e){var r;(r=C(this,Br).get(t))==null||r.delete(e)}emit(t,e){var r;(r=C(this,Br).get(t))==null||r.forEach(i=>i(e))}}Br=new WeakMap;function ql(n,t,e=!0){let r,i=o=>{};return function(...a){return new Promise((l,c)=>{const u=()=>{clearTimeout(r),i=f=>{},l(n(...a))};e&&i("debounced"),clearTimeout(r),i=c,r=window.setTimeout(u,typeof t=="function"?t():t)})}}const iQ="RawCode",sQ="Literal",oQ="Property",aQ="Identifier",cQ="ArrayExpression",lQ="BinaryExpression",uQ="CallExpression",fQ="ConditionalExpression",AQ="LogicalExpression",hQ="MemberExpression",dQ="ObjectExpression",gQ="UnaryExpression";function Kt(n){this.type=n}Kt.prototype.visit=function(n){let t,e,r;if(n(this))return 1;for(t=pQ(this),e=0,r=t.length;e<r;++e)if(t[e].visit(n))return 1};function pQ(n){switch(n.type){case cQ:return n.elements;case lQ:case AQ:return[n.left,n.right];case uQ:return[n.callee].concat(n.arguments);case fQ:return[n.test,n.consequent,n.alternate];case hQ:return[n.object,n.property];case dQ:return n.properties;case oQ:return[n.key,n.value];case gQ:return[n.argument];case aQ:case sQ:case iQ:default:return[]}}var an,Y,R,nt,Ae,Kl=1,pa=2,qr=3,er=4,jl=5,Kr=6,wt=7,ma=8,mQ=9;an={},an[Kl]="Boolean",an[pa]="<end>",an[qr]="Identifier",an[er]="Keyword",an[jl]="Null",an[Kr]="Numeric",an[wt]="Punctuator",an[ma]="String",an[mQ]="RegularExpression";var CQ="ArrayExpression",yQ="BinaryExpression",wQ="CallExpression",xQ="ConditionalExpression",Pp="Identifier",IQ="Literal",EQ="LogicalExpression",bQ="MemberExpression",BQ="ObjectExpression",vQ="Property",QQ="UnaryExpression",Ye="Unexpected token %0",SQ="Unexpected number",DQ="Unexpected string",kQ="Unexpected identifier",FQ="Unexpected reserved word",MQ="Unexpected end of input",DA="Invalid regular expression",kA="Invalid regular expression: missing /",Lp="Octal literals are not allowed in strict mode.",RQ="Duplicate data property in object literal not allowed in strict mode",$e="ILLEGAL",Ca="Disabled.",NQ=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),TQ=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Wl(n,t){if(!n)throw new Error("ASSERT: "+t)}function Rn(n){return n>=48&&n<=57}function FA(n){return"0123456789abcdefABCDEF".includes(n)}function ya(n){return"01234567".includes(n)}function PQ(n){return n===32||n===9||n===11||n===12||n===160||n>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(n)}function wa(n){return n===10||n===13||n===8232||n===8233}function xa(n){return n===36||n===95||n>=65&&n<=90||n>=97&&n<=122||n===92||n>=128&&NQ.test(String.fromCharCode(n))}function Xl(n){return n===36||n===95||n>=65&&n<=90||n>=97&&n<=122||n>=48&&n<=57||n===92||n>=128&&TQ.test(String.fromCharCode(n))}const LQ={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Op(){for(;R<nt;){const n=Y.charCodeAt(R);if(PQ(n)||wa(n))++R;else break}}function MA(n){var t,e,r,i=0;for(e=n==="u"?4:2,t=0;t<e;++t)R<nt&&FA(Y[R])?(r=Y[R++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):ce({},Ye,$e);return String.fromCharCode(i)}function OQ(){var n,t,e,r;for(n=Y[R],t=0,n==="}"&&ce({},Ye,$e);R<nt&&(n=Y[R++],!!FA(n));)t=t*16+"0123456789abcdef".indexOf(n.toLowerCase());return(t>1114111||n!=="}")&&ce({},Ye,$e),t<=65535?String.fromCharCode(t):(e=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(e,r))}function Up(){var n,t;for(n=Y.charCodeAt(R++),t=String.fromCharCode(n),n===92&&(Y.charCodeAt(R)!==117&&ce({},Ye,$e),++R,n=MA("u"),(!n||n==="\\"||!xa(n.charCodeAt(0)))&&ce({},Ye,$e),t=n);R<nt&&(n=Y.charCodeAt(R),!!Xl(n));)++R,t+=String.fromCharCode(n),n===92&&(t=t.substr(0,t.length-1),Y.charCodeAt(R)!==117&&ce({},Ye,$e),++R,n=MA("u"),(!n||n==="\\"||!Xl(n.charCodeAt(0)))&&ce({},Ye,$e),t+=n);return t}function UQ(){var n,t;for(n=R++;R<nt;){if(t=Y.charCodeAt(R),t===92)return R=n,Up();if(Xl(t))++R;else break}return Y.slice(n,R)}function GQ(){var n,t,e;return n=R,t=Y.charCodeAt(R)===92?Up():UQ(),t.length===1?e=qr:LQ.hasOwnProperty(t)?e=er:t==="null"?e=jl:t==="true"||t==="false"?e=Kl:e=qr,{type:e,value:t,start:n,end:R}}function RA(){var n=R,t=Y.charCodeAt(R),e,r=Y[R],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++R,{type:wt,value:String.fromCharCode(t),start:n,end:R};default:if(e=Y.charCodeAt(R+1),e===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return R+=2,{type:wt,value:String.fromCharCode(t)+String.fromCharCode(e),start:n,end:R};case 33:case 61:return R+=2,Y.charCodeAt(R)===61&&++R,{type:wt,value:Y.slice(n,R),start:n,end:R}}}if(o=Y.substr(R,4),o===">>>=")return R+=4,{type:wt,value:o,start:n,end:R};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return R+=3,{type:wt,value:s,start:n,end:R};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return R+=2,{type:wt,value:i,start:n,end:R};if(i==="//"&&ce({},Ye,$e),"<>=!+-*%&|^/".includes(r))return++R,{type:wt,value:r,start:n,end:R};ce({},Ye,$e)}function zQ(n){let t="";for(;R<nt&&FA(Y[R]);)t+=Y[R++];return t.length===0&&ce({},Ye,$e),xa(Y.charCodeAt(R))&&ce({},Ye,$e),{type:Kr,value:parseInt("0x"+t,16),start:n,end:R}}function HQ(n){let t="0"+Y[R++];for(;R<nt&&ya(Y[R]);)t+=Y[R++];return(xa(Y.charCodeAt(R))||Rn(Y.charCodeAt(R)))&&ce({},Ye,$e),{type:Kr,value:parseInt(t,8),octal:!0,start:n,end:R}}function Gp(){var n,t,e;if(e=Y[R],Wl(Rn(e.charCodeAt(0))||e===".","Numeric literal must start with a decimal digit or a decimal point"),t=R,n="",e!=="."){if(n=Y[R++],e=Y[R],n==="0"){if(e==="x"||e==="X")return++R,zQ(t);if(ya(e))return HQ(t);e&&Rn(e.charCodeAt(0))&&ce({},Ye,$e)}for(;Rn(Y.charCodeAt(R));)n+=Y[R++];e=Y[R]}if(e==="."){for(n+=Y[R++];Rn(Y.charCodeAt(R));)n+=Y[R++];e=Y[R]}if(e==="e"||e==="E")if(n+=Y[R++],e=Y[R],(e==="+"||e==="-")&&(n+=Y[R++]),Rn(Y.charCodeAt(R)))for(;Rn(Y.charCodeAt(R));)n+=Y[R++];else ce({},Ye,$e);return xa(Y.charCodeAt(R))&&ce({},Ye,$e),{type:Kr,value:parseFloat(n),start:t,end:R}}function _Q(){var n="",t,e,r,i,s=!1;for(t=Y[R],Wl(t==="'"||t==='"',"String literal must starts with a quote"),e=R,++R;R<nt;)if(r=Y[R++],r===t){t="";break}else if(r==="\\")if(r=Y[R++],!r||!wa(r.charCodeAt(0)))switch(r){case"u":case"x":Y[R]==="{"?(++R,n+=OQ()):n+=MA(r);break;case"n":n+=`
`;break;case"r":n+="\r";break;case"t":n+="	";break;case"b":n+="\b";break;case"f":n+="\f";break;case"v":n+="\v";break;default:ya(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),R<nt&&ya(Y[R])&&(s=!0,i=i*8+"01234567".indexOf(Y[R++]),"0123".includes(r)&&R<nt&&ya(Y[R])&&(i=i*8+"01234567".indexOf(Y[R++]))),n+=String.fromCharCode(i)):n+=r;break}else r==="\r"&&Y[R]===`
`&&++R;else{if(wa(r.charCodeAt(0)))break;n+=r}return t!==""&&ce({},Ye,$e),{type:ma,value:n,octal:s,start:e,end:R}}function VQ(n,t){let e=n;t.includes("u")&&(e=e.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";ce({},DA)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(e)}catch{ce({},DA)}try{return new RegExp(n,t)}catch{return null}}function YQ(){var n,t,e,r,i;for(n=Y[R],Wl(n==="/","Regular expression literal must start with a slash"),t=Y[R++],e=!1,r=!1;R<nt;)if(n=Y[R++],t+=n,n==="\\")n=Y[R++],wa(n.charCodeAt(0))&&ce({},kA),t+=n;else if(wa(n.charCodeAt(0)))ce({},kA);else if(e)n==="]"&&(e=!1);else if(n==="/"){r=!0;break}else n==="["&&(e=!0);return r||ce({},kA),i=t.substr(1,t.length-2),{value:i,literal:t}}function JQ(){var n,t,e;for(t="",e="";R<nt&&(n=Y[R],!!Xl(n.charCodeAt(0)));)++R,n==="\\"&&R<nt?ce({},Ye,$e):(e+=n,t+=n);return e.search(/[^gimuy]/g)>=0&&ce({},DA,e),{value:e,literal:t}}function qQ(){var n,t,e,r;return Ae=null,Op(),n=R,t=YQ(),e=JQ(),r=VQ(t.value,e.value),{literal:t.literal+e.literal,value:r,regex:{pattern:t.value,flags:e.value},start:n,end:R}}function KQ(n){return n.type===qr||n.type===er||n.type===Kl||n.type===jl}function zp(){if(Op(),R>=nt)return{type:pa,start:R,end:R};const n=Y.charCodeAt(R);return xa(n)?GQ():n===40||n===41||n===59?RA():n===39||n===34?_Q():n===46?Rn(Y.charCodeAt(R+1))?Gp():RA():Rn(n)?Gp():RA()}function xt(){const n=Ae;return R=n.end,Ae=zp(),R=n.end,n}function Hp(){const n=R;Ae=zp(),R=n}function jQ(n){const t=new Kt(CQ);return t.elements=n,t}function _p(n,t,e){const r=new Kt(n==="||"||n==="&&"?EQ:yQ);return r.operator=n,r.left=t,r.right=e,r}function WQ(n,t){const e=new Kt(wQ);return e.callee=n,e.arguments=t,e}function XQ(n,t,e){const r=new Kt(xQ);return r.test=n,r.consequent=t,r.alternate=e,r}function NA(n){const t=new Kt(Pp);return t.name=n,t}function Ia(n){const t=new Kt(IQ);return t.value=n.value,t.raw=Y.slice(n.start,n.end),n.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=n.regex),t}function Vp(n,t,e){const r=new Kt(bQ);return r.computed=n==="[",r.object=t,r.property=e,r.computed||(e.member=!0),r}function ZQ(n){const t=new Kt(BQ);return t.properties=n,t}function Yp(n,t,e){const r=new Kt(vQ);return r.key=t,r.value=e,r.kind=n,r}function $Q(n,t){const e=new Kt(QQ);return e.operator=n,e.argument=t,e.prefix=!0,e}function ce(n,t){var e,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(Wl(o<r.length,"Message reference must be in range"),r[o]));throw e=new Error(i),e.index=R,e.description=i,e}function Zl(n){n.type===pa&&ce(n,MQ),n.type===Kr&&ce(n,SQ),n.type===ma&&ce(n,DQ),n.type===qr&&ce(n,kQ),n.type===er&&ce(n,FQ),ce(n,Ye,n.value)}function rt(n){const t=xt();(t.type!==wt||t.value!==n)&&Zl(t)}function Ee(n){return Ae.type===wt&&Ae.value===n}function TA(n){return Ae.type===er&&Ae.value===n}function eS(){const n=[];for(R=Ae.start,rt("[");!Ee("]");)Ee(",")?(xt(),n.push(null)):(n.push(jr()),Ee("]")||rt(","));return xt(),jQ(n)}function Jp(){R=Ae.start;const n=xt();return n.type===ma||n.type===Kr?(n.octal&&ce(n,Lp),Ia(n)):NA(n.value)}function tS(){var n,t,e,r;if(R=Ae.start,n=Ae,n.type===qr)return e=Jp(),rt(":"),r=jr(),Yp("init",e,r);if(n.type===pa||n.type===wt)Zl(n);else return t=Jp(),rt(":"),r=jr(),Yp("init",t,r)}function nS(){var n=[],t,e,r,i={},s=String;for(R=Ae.start,rt("{");!Ee("}");)t=tS(),t.key.type===Pp?e=t.key.name:e=s(t.key.value),r="$"+e,Object.prototype.hasOwnProperty.call(i,r)?ce({},RQ):i[r]=!0,n.push(t),Ee("}")||rt(",");return rt("}"),ZQ(n)}function rS(){rt("(");const n=PA();return rt(")"),n}const iS={if:1};function sS(){var n,t,e;if(Ee("("))return rS();if(Ee("["))return eS();if(Ee("{"))return nS();if(n=Ae.type,R=Ae.start,n===qr||iS[Ae.value])e=NA(xt().value);else if(n===ma||n===Kr)Ae.octal&&ce(Ae,Lp),e=Ia(xt());else{if(n===er)throw new Error(Ca);n===Kl?(t=xt(),t.value=t.value==="true",e=Ia(t)):n===jl?(t=xt(),t.value=null,e=Ia(t)):Ee("/")||Ee("/=")?(e=Ia(qQ()),Hp()):Zl(xt())}return e}function oS(){const n=[];if(rt("("),!Ee(")"))for(;R<nt&&(n.push(jr()),!Ee(")"));)rt(",");return rt(")"),n}function aS(){R=Ae.start;const n=xt();return KQ(n)||Zl(n),NA(n.value)}function cS(){return rt("."),aS()}function lS(){rt("[");const n=PA();return rt("]"),n}function uS(){var n,t,e;for(n=sS();;)if(Ee("."))e=cS(),n=Vp(".",n,e);else if(Ee("("))t=oS(),n=WQ(n,t);else if(Ee("["))e=lS(),n=Vp("[",n,e);else break;return n}function qp(){const n=uS();if(Ae.type===wt&&(Ee("++")||Ee("--")))throw new Error(Ca);return n}function $l(){var n,t;if(Ae.type!==wt&&Ae.type!==er)t=qp();else{if(Ee("++")||Ee("--"))throw new Error(Ca);if(Ee("+")||Ee("-")||Ee("~")||Ee("!"))n=xt(),t=$l(),t=$Q(n.value,t);else{if(TA("delete")||TA("void")||TA("typeof"))throw new Error(Ca);t=qp()}}return t}function Kp(n){let t=0;if(n.type!==wt&&n.type!==er)return 0;switch(n.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function fS(){var n,t,e,r,i,s,o,a,l,c;if(n=Ae,l=$l(),r=Ae,i=Kp(r),i===0)return l;for(r.prec=i,xt(),t=[n,Ae],o=$l(),s=[l,r,o];(i=Kp(Ae))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),t.pop(),e=_p(a,l,o),s.push(e);r=xt(),r.prec=i,s.push(r),t.push(Ae),e=$l(),s.push(e)}for(c=s.length-1,e=s[c],t.pop();c>1;)t.pop(),e=_p(s[c-1].value,s[c-2],e),c-=2;return e}function jr(){var n,t,e;return n=fS(),Ee("?")&&(xt(),t=jr(),rt(":"),e=jr(),n=XQ(n,t,e)),n}function PA(){const n=jr();if(Ee(","))throw new Error(Ca);return n}function jp(n){Y=n,R=0,nt=Y.length,Ae=null,Hp();const t=PA();if(Ae.type!==pa)throw new Error("Unexpect token after expression.");return t}var AS={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Wp(n){function t(o,a,l,c){let u=n(a[0]);return l&&(u=l+"("+u+")",l.lastIndexOf("new ",0)===0&&(u="("+u+")")),u+"."+o+(c<0?"":c===0?"()":"("+a.slice(1).map(n).join(",")+")")}function e(o,a,l){return c=>t(o,c,a,l)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Te("Missing arguments to clamp function."),o.length>3&&Te("Too many arguments to clamp function.");const a=o.map(n);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:e("getDate",r,0),day:e("getDay",r,0),year:e("getFullYear",r,0),month:e("getMonth",r,0),hours:e("getHours",r,0),minutes:e("getMinutes",r,0),seconds:e("getSeconds",r,0),milliseconds:e("getMilliseconds",r,0),time:e("getTime",r,0),timezoneoffset:e("getTimezoneOffset",r,0),utcdate:e("getUTCDate",r,0),utcday:e("getUTCDay",r,0),utcyear:e("getUTCFullYear",r,0),utcmonth:e("getUTCMonth",r,0),utchours:e("getUTCHours",r,0),utcminutes:e("getUTCMinutes",r,0),utcseconds:e("getUTCSeconds",r,0),utcmilliseconds:e("getUTCMilliseconds",r,0),length:e("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:e("toUpperCase",i,0),lower:e("toLowerCase",i,0),substring:e("substring",i),split:e("split",i),trim:e("trim",i,0),btoa:"btoa",atob:"atob",regexp:s,test:e("test",s),if:function(o){o.length<3&&Te("Missing arguments to if function."),o.length>3&&Te("Too many arguments to if function.");const a=o.map(n);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function hS(n){const t=n&&n.length-1;return t&&(n[0]==='"'&&n[t]==='"'||n[0]==="'"&&n[t]==="'")?n.slice(1,-1):n}function Xp(n){n=n||{};const t=n.allowed?vl(n.allowed):{},e=n.forbidden?vl(n.forbidden):{},r=n.constants||AS,i=(n.functions||Wp)(f),s=n.globalvar,o=n.fieldvar,a=Ft(s)?s:d=>`${s}["${d}"]`;[...Object.getOwnPropertyNames(Object.prototype).filter(d=>typeof Object.prototype[d]=="function")];let l={},c={},u=0;function f(d){if(Ce(d))return d;const g=h[d.type];return g==null&&Te("Unsupported type: "+d.type),g(d)}const h={Literal:d=>d.raw,Identifier:d=>{const g=d.name;return u>0?g:Ji(e,g)?Te("Illegal identifier: "+g):Ji(r,g)?r[g]:Ji(t,g)?g:(l[g]=1,a(g))},MemberExpression:d=>{const g=!d.computed,m=f(d.object);g&&(u+=1);const p=f(d.property);return m===o&&(c[hS(p)]=1),g&&(u-=1),m+(g?"."+p:"["+p+"]")},CallExpression:d=>{d.callee.type!=="Identifier"&&Te("Illegal callee type: "+d.callee.type);const g=d.callee.name,m=d.arguments,p=Ji(i,g)&&i[g];return p||Te("Unrecognized function: "+g),Ft(p)?p(m):p+"("+m.map(f).join(",")+")"},ArrayExpression:d=>"["+d.elements.map(f).join(",")+"]",BinaryExpression:d=>"("+f(d.left)+" "+d.operator+" "+f(d.right)+")",UnaryExpression:d=>"("+d.operator+f(d.argument)+")",ConditionalExpression:d=>"("+f(d.test)+"?"+f(d.consequent)+":"+f(d.alternate)+")",LogicalExpression:d=>"("+f(d.left)+d.operator+f(d.right)+")",ObjectExpression:d=>{for(const g of d.properties){const m=g.key.name;Yb.has(m)&&Te("Illegal property: "+m)}return"{"+d.properties.map(f).join(",")+"}"},Property:d=>{u+=1;const g=f(d.key);return u-=1,g+":"+f(d.value)}};function A(d){const g={code:f(d),globals:Object.keys(l),fields:Object.keys(c)};return l={},c={},g}return A.functions=i,A.constants=r,A}function Zp(n,t,e){return e=(e-n)/(t-n),e=Math.max(0,Math.min(1,e)),e*e*(3-2*e)}function ts(n,t=0,e=1){return Math.max(t,Math.min(e,n))}function dS(n,t,e){return ts((e-n)/(t-n),0,1)}const $p={clamp:ts,format(n,t){return Ze(t)(n)},mapHasKey(n,t){return n.has(t)},isArray:Xe,isBoolean:Uo,isDefined(n){return n!==void 0},isNumber:ft,isObject:et,isRegExp:oB,isString:Ce,isValid(n){return n!=null&&n===n},lerp:Ig,linearstep:dS,replace(n,t,e){return String(n).replace(t,e)},smoothstep:Zp};function gS(n){const t=Wp(n);for(const e in $p)t[e]=`this.${e}`;return t}const pS=Xp({forbidden:[],allowed:["datum","undefined"],globalvar:"globalObject",fieldvar:"datum",functions:gS});function mS(n,t={}){try{const e=jp(n),r=pS(e),i=Function("datum","globalObject",`"use strict";
            try {
                return (${r.code});
            } catch (e) {
                throw new Error("Error evaluating expression: " + ${JSON.stringify(n)} + ", " + e.message, e);
            }`).bind($p),s=o=>i(o,t);return s.fields=r.fields,s.globals=r.globals,s.code=r.code,s}catch(e){throw new Error(`Invalid expression: ${n}, ${e.message}`)}}const CS=Xp({forbidden:[],allowed:["event"],globalvar:"globalObject"});function em(n){try{const t=jp(n),e=CS(t);return Function("event","globalObject",`"use strict";
            try {
                return !!(${e.code});
            } catch (e) {
                throw new Error("Error evaluating expression: " + ${JSON.stringify(n)} + ", " + e.message, e);
            }`)}catch(t){throw new Error(`Invalid expression: ${n}, ${t.message}`)}}const cn=1,tr=2,LA=4;class OA{constructor(t){D(this,vi);j(this,"stats",{count:0,first:null});j(this,"paramMediatorProvider",null);this.paramMediatorProvider=t,this.children=[],this.parent=void 0,this.completed=!1}get behavior(){return 0}get label(){return`(${this.constructor.name})`}reset(){this.completed=!1;for(const t of this.children)t.reset();this.stats.count=0,this.stats.first=null}initialize(){}setParent(t){this.parent=t}addChild(t){if(t.parent)throw new Error("Cannot add the child! It already has a parent.");return this.children.push(t),t.setParent(this),T(this,vi,pl).call(this),this}adopt(t){t.parent&&t.parent.removeChild(t),this.addChild(t)}adoptChildrenOf(t){for(const e of t.children)this.adopt(e)}insertAsParent(t){var e;if(this.isRoot())throw new Error("Cannot insert a new parent for a root node!");t.parent=this.parent,this.parent.children[this.parent.children.indexOf(this)]=t,T(e=this.parent,vi,pl).call(e),this.parent=void 0,t.addChild(this)}removeChild(t){const e=this.children.indexOf(t);if(e>-1)this.children.splice(e,1),t.parent=void 0,T(this,vi,pl).call(this);else throw new Error("Trying to remove an unknown child node!")}excise(){var t;if(this.isRoot())throw new Error("Cannot excise root node!");if(this.isTerminal())this.parent.removeChild(this);else if(this.children.length==1){const e=this.children[0];e.setParent(this.parent),this.parent.children[this.parent.children.indexOf(this)]=e,T(t=this.parent,vi,pl).call(t),this.setParent(void 0),this.children.length=0}else throw new Error("Cannot excise a node that has multiple children!")}isRoot(){return!this.parent}isBranching(){return this.children.length>1}isTerminal(){return this.children.length==0}visit(t){t(this);for(const e of this.children)e.visit(t);t.afterChildren&&t.afterChildren(this)}subtreeToString(t=0){const e=this.children.map(r=>r.subtreeToString(t+1)).join("");return`${" ".repeat(t*2)}* ${this.label}${"identifier"in this&&this.identifier?": "+this.identifier:""} 
${e}`}handle(t){this._propagate(t)}complete(){this.completed=!0;for(const t of this.children)t.complete()}beginBatch(t){for(const e of this.children)e.beginBatch(t)}get paramMediator(){if(this.paramMediatorProvider)return this.paramMediatorProvider.paramMediator;if(!this.parent)throw new Error("Cannot find paramMediator!");return this.parent.paramMediator}repropagate(){if(this.parent)this.parent.repropagate();else throw new Error("Cannot repropagate data, no FlowNode with stored data found!")}_propagate(t){}}vi=new WeakSet,pl=function(){this._propagate=Function("children","stats",Zo(this.children.length).map(t=>`const child${t} = children[${t}];`).join(`
`)+`return function propagate(datum) {
                    if (stats.count === 0) {
                        stats.first = structuredClone(datum);
                    }
                    stats.count++;
                ${Zo(this.children.length).map(t=>`child${t}.handle(datum);`).join(`
`)}
                };`)(this.children,this.stats)};function tm(n){return n.type=="file"}function yS(n){return n.type=="facet"}class Ue extends OA{constructor(e,r){super(r);D(this,Ec);F(this,Ec,e.type)}get label(){return C(this,Ec)}}Ec=new WeakMap;const Rt="_uniqueId",nm=1e4,rm=[null];class UA extends Ue{get behavior(){return tr}constructor(t){super(t),this.params=t,this.as=t.as??Rt,this._blocks=[],this._usedBlocks=0,this._id=-1}initialize(){}reset(){super.reset(),this._usedBlocks=0,this._id=-1}handle(t){t[this.as]=this._nextId(),this._propagate(t)}_nextId(){return++this._id%nm==0&&(this._id=this._getBlock()*nm),this._id}_getBlock(){return this._usedBlocks<this._blocks.length?this._blocks[this._usedBlocks++]:this._reserveBlock()}_reserveBlock(){const t=rm.length;return rm[t]=this,this._blocks.push(t),this._usedBlocks++,t}}function ue(n,t=n){if(/^[A-Za-z0-9_]+$/.test(n)){const e=function(i){n in i||wS(i,n)},r=new Function("validator",`
                let validated = !validator;
                return function accessField(datum) {
                    if (!validated) {
                        validator(datum);
                        validated = true;
                    }
                    return datum[${JSON.stringify(n)}];
                }`)(e);return te(r,[n],t)}else return Il(n)}function wS(n,t){throw new Error(`Invalid field "${t}". Available fields or properties: ${Object.keys(n).join(", ")}`)}function im(n,t,e){if(!n)return;function r(s){const o=s;return o.fields??(o.fields=[]),o.constant=o.fields.length===0,o.channelDef=t,o.channel=n,o.scaleChannel=((Qt(t)&&t.resolutionChannel)??(tu(n)&&n))||void 0,"param"in t?(o.predicate=Cm(!1),o.predicate.param=t.param,o.predicate.empty=t.empty??!0):(o.predicate=Cm(!0),o.predicate.empty=!1),o.asNumberAccessor=()=>o,o}function i(s){if(it(s)){const o=r(e.createExpression(s.expr));if(o.fields.length>0)throw new Error("Expression in DatumDef/ValueDef cannot access data fields: "+s.expr);return o}else{const o=s;return r(()=>o)}}if(nr(t))try{return r(ue(t.field))}catch(s){throw new Error(`Invalid field definition: ${s.message}`)}else{if(ba(t))return r(e.createExpression(t.expr));if(Ea(t))return i(t.datum);if(Nt(t))return i(t.value);throw new Error(`Invalid channel definition: "${n}": ${JSON.stringify(t)}! The channel definition must contain one of the following properties: "field", "datum", "value" or "expr".`)}}function xS(n,t,e){const r=[];if(BS(t)||GA(t)){const i=Array.isArray(t.condition)?t.condition:[t.condition];for(const s of i)r.push(im(n,s,e))}if(r.push(im(n,t,e)),r.filter(i=>!i.constant).length>1)throw new Error("Only one accessor can be non-constant. Channel: "+n);return r}function IS(n,t){const e={},r=i=>{var s;return(s=n.getScaleResolution(i))==null?void 0:s.getScale()};for(const[i,s]of Object.entries(t))s&&(e[i]=ES(xS(i,s,n.paramMediator),r));return e}function ES(n,t){if(n.length===1)return sm(n[0],t);const e=n.map(s=>s.predicate),r=n.map(s=>sm(s,t));return Object.assign(s=>{for(let o=0;o<r.length;o++)if(e[o](s))return r[o](s)},{constant:!1,accessors:r.map(s=>s.accessors[0]),dataAccessor:r.map(s=>s.dataAccessor).find(s=>s),scale:r.map(s=>s.scale).find(s=>s),channelDef:n.at(-1).channelDef})}function sm(n,t){const{channel:e,scaleChannel:r,channelDef:i}=n,s=n.scaleChannel?t(r):void 0;if(r&&!s)throw new Error(`Missing scale! "${e}": ${JSON.stringify(i)}`);return Object.assign(s?o=>s(n(o)):o=>n(o),{scale:s,constant:n.constant,accessors:[n],dataAccessor:n.constant?void 0:n,channelDef:i})}function Nt(n){return n&&"value"in n}function nr(n){return n&&"field"in n}function Ea(n){return n&&"datum"in n}function Qt(n){return nr(n)||Ea(n)||ba(n)||am(n)}function om(n){if(GA(n)){const t=n.condition;if(!Array.isArray(t)&&Qt(t))return t}else if(Qt(n))return n}function bS(n,t){const e=n.mark.encoding[t];if(Qt(e))return e;throw new Error("Not a channel def with scale!")}function am(n){return n&&"chrom"in n}function ba(n){return n&&"expr"in n}function BS(n){return(nr(n)||Ea(n))&&"condition"in n}function GA(n){return Nt(n)&&"condition"in n}const Wr=["x","y"],vS=["x2","y2"],QS=[...Wr,...vS];function zA(n){return Wr.includes(n)}function Ba(n){return QS.includes(n)}const cm={x:"x2",y:"y2"},lm=Object.fromEntries(Object.entries(cm).map(n=>[n[1],n[0]]));function HA(n){return n in lm}function _A(n){const t=cm[n];if(t)return t;throw new Error(`${n} has no secondary channel!`)}function Xr(n){return lm[n]??n}function rr(n){return["color","fill","stroke"].includes(Xr(n))}function eu(n){return["shape"].includes(n)}function tu(n){return["x","y","x2","y2","color","fill","stroke","opacity","fillOpacity","strokeOpacity","strokeWidth","size","shape","angle","dx","dy","sample"].includes(n)}function SS(n){switch(n){case"shape":return["circle","square","cross","diamond","triangle-up","triangle-right","triangle-down","triangle-left","tick-up","tick-right","tick-down","tick-left"]}}function um(n){if(!eu(n))throw new Error("Not a discrete channel: "+n);const t=new Map(SS(n).map((e,r)=>[e,r]));return e=>{const r=t.get(e);if(r!==void 0)return r;throw new Error(`Invalid value for "${n}" channel: ${e}`)}}function VA(n){return{type:"single",datum:n,uniqueId:n==null?void 0:n[Rt]}}function YA(n){return n??(n=[]),{type:"multi",data:new Map(n.map(t=>[t[Rt],t]))}}function fm(n){return{type:"interval",intervals:Object.fromEntries(n.map(t=>[t,null]))}}function DS(n,{add:t,remove:e,toggle:r}){const i=n.data;for(const s of t??[])i.set(s[Rt],s);for(const s of e??[])i.delete(s[Rt]);for(const s of r??[]){const o=s[Rt];i.has(o)?i.delete(o):i.set(o,s)}return{type:"multi",data:i}}function kS(n,t){const e=!!(n.empty??!0),r=va(n.param),i=n.fields??{};if(hm(t))return`${r}.uniqueId == null ? ${e} : ${r}.uniqueId === datum[${JSON.stringify(Rt)}]`;if(JA(t))return`${r}.data.size == 0 ? ${e} : mapHasKey(${r}.data, datum[${JSON.stringify(Rt)}])`;if(Am(t)){const s=Object.keys(t.intervals),o=Object.keys(i).filter(zA);if(o.length===0)throw new Error("Filtering using interval selections requires at least one primary positional channel in the config! "+JSON.stringify(n));if(o.some(c=>!s.includes(c)))throw new Error(`Selection channels (${s.join(", ")}) do not match the fields: ${JSON.stringify(n)}!`);const a=c=>`datum[${JSON.stringify(c)}]`;return s.map(c=>{const u=_A(c),f=i[c],h=i[u]??i[c],A=`${r}.intervals.${c}[0] <= ${a(h)}`,d=`${a(f)} <= ${r}.intervals.${c}[1]`;return`(${r}.intervals.${c} ? (${A} && ${d}) : ${e})`}).join(" && ")}else throw new Error(`Unrecognized selection type : ${JSON.stringify(t)}`)}function Am(n){return n.type==="interval"}function hm(n){return n.type==="single"}function JA(n){return n.type==="multi"}function nu(n){const t=typeof n=="string"?{type:n}:{...n};return t.on=t.on?pm(t.on):ru(t)?{type:"click"}:void 0,t.clear=t.clear===!1?void 0:t.clear===!0||t.clear==null?{type:"dblclick"}:pm(t.clear),ru(t)&&t.on.type==="click"&&(t.toggle=!0),t}function ru(n){return n&&n.type=="point"}function dm(n){return n&&n.type=="interval"}function gm(n){return Object.values(n.intervals).some(t=>t&&t.length===2)}function FS(n,t){return Object.entries(n.intervals).every(([e,r])=>(e=="x"||e=="y")&&r&&r[0]<=t[e]&&r[1]>=t[e])}function pm(n){if(typeof n=="string"){const t=n.match(/^([a-zA-Z]+)(?:\[(.+)\])?$/);if(!t)throw new Error(`Invalid event type string: ${n}`);const[,e,r]=t,i={type:e};return r&&(i.filter=r),i}else return n}class MS{constructor(t){D(this,vr);j(this,"paramListeners");D(this,Qi,new Map);D(this,Ks,new Map);D(this,js,new Map);D(this,bc);F(this,bc,t??(()=>{})),F(this,vr,new Map),this.paramListeners=new Map}registerParam(t){const e=t.name;if("value"in t&&"expr"in t)throw new Error(`The parameter "${e}" must not have both value and expr properties!`);let r;if(t.push=="outer"){const i=this.findMediatorForParam(e);if(!i)throw new Error(`Parameter "${e}" not found in outer scope!`);const s=i.paramConfigs.get(e);if("expr"in s||"select"in s)throw new Error(`The outer parameter "${e}" must not have expr or select properties!`);r=i.getSetter(e),C(this,Qi).set(e,r)}else if("value"in t)r=this.allocateSetter(e,t.value);else if("expr"in t){const i=this.createExpression(t.expr),s=this.allocateSetter(e,i(null));i.addListener(()=>s(i(null))),r=o=>{}}else r=this.allocateSetter(e,null);if("select"in t){const i=nu(t.select);if(ru(i))r(i.toggle?YA():VA(null));else if(dm(i)){if(!i.encodings)throw new Error(`Interval selection "${e}" must have encodings defined!`);r(fm(i.encodings))}}return C(this,js).set(e,t),r}allocateSetter(t,e,r=!1){if(va(t),C(this,Qi).has(t))throw new Error("Setter already allocated for parameter: "+t);const i=s=>{const o=C(this,vr).get(t);if(s!==o){C(this,vr).set(t,s);const a=this.paramListeners.get(t);if(a&&!r)for(const l of a)l()}};return i(e),C(this,Qi).set(t,i),i}getSetter(t){const e=C(this,Qi).get(t);if(!e)throw new Error("Setter not found for parameter: "+t);return e}getValue(t){return C(this,vr).get(t)}findValue(t){const e=this.findMediatorForParam(t);return e==null?void 0:e.getValue(t)}get paramConfigs(){return C(this,js)}findMediatorForParam(t){var e;return C(this,vr).has(t)?this:(e=C(this,bc).call(this))==null?void 0:e.findMediatorForParam(t)}createExpression(t){if(C(this,Ks).has(t))return C(this,Ks).get(t);const e={},r=mS(t,e),i=new Map;for(const o of r.globals){const a=this.findMediatorForParam(o);if(!a)throw new Error(`Unknown variable "${o}" in expression: ${t}`);i.set(o,a),Object.defineProperty(e,o,{enumerable:!0,get(){return a.getValue(o)}})}const s=new Set;return r.addListener=o=>{for(const[a,l]of i){const c=l.paramListeners.get(a)??new Set;l.paramListeners.set(a,c),c.add(o),s.add(o)}},r.removeListener=o=>{var a;for(const[l,c]of i)(a=c.paramListeners.get(l))==null||a.delete(o);s.delete(o)},r.invalidate=()=>{var o;for(const[a,l]of i)for(const c of s)(o=l.paramListeners.get(a))==null||o.delete(c);s.clear()},r.identifier=()=>r.code,C(this,Ks).set(t,r),r}evaluateAndGet(t){return this.createExpression(t)()}hasPointSelections(){for(const t of C(this,js).values())if(mm(t)){const e=t.select;if(Ce(e)){if(e=="point")return!0}else if(e.type=="point")return!0}return!1}}vr=new WeakMap,Qi=new WeakMap,Ks=new WeakMap,js=new WeakMap,bc=new WeakMap;function it(n){return typeof n=="object"&&n!=null&&"expr"in n&&Ce(n.expr)}function Tt(n){if(it(n))throw new Error(`ExprRef ${JSON.stringify(n)} not allowed here. Expected a scalar value.`);return n}function RS(n){return("expr"in n||"bind"in n)&&!("select"in n)}function mm(n){return!("expr"in n||"bind"in n)&&"select"in n}function iu(n,t,e){const r={...t},i=[],s=o=>{i.push(o),i.length===1&&queueMicrotask(()=>{e(i.slice()),i.length=0})};for(const[o,a]of Object.entries(t))if(it(a)){const l=n.createExpression(a.expr);e&&l.addListener(()=>s(o)),Object.defineProperty(r,o,{enumerable:!0,get(){return l()}})}else r[o]=a;return r}function va(n){if(!/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(n))throw new Error(`Invalid parameter name: ${n}. Must be a valid JavaScript identifier.`);return n}function Cm(n){return Object.assign(()=>n,{addListener:()=>{},removeListener:()=>{},invalidate:()=>{},identifier:()=>"constant",fields:[],globals:[],code:JSON.stringify(n)})}function NS(n){const t=Math.floor(Math.random()*16777215).toString(16),e=[];for(const r of n.paramConfigs.values()){if(!RS(r))continue;const i=r.bind;if(!i||!("input"in i))continue;const s=r.name,o=n.getSetter(s),a=n.getValue(s),l=i.name??s,c=i.debounce?ql(o,i.debounce,!1):o,u=`${t}-param-${s}`;if(i.input=="range")e.push(Ie`<label for=${u}>${l}</label>
                    <div>
                        <input
                            id=${u}
                            type="range"
                            min=${i.min??0}
                            max=${i.max??100}
                            step=${i.step??_r(i.min,i.max,100)}
                            .value=${a}
                            @input=${f=>{c(f.target.valueAsNumber),f.target.nextElementSibling.textContent=f.target.valueAsNumber}}
                        /><span>${a}</span>
                    </div>`);else if(i.input=="checkbox")e.push(Ie`<label for=${u}>${l}</label>
                    <input
                        id=${u}
                        type="checkbox"
                        ?checked=${a}
                        @input=${f=>c(f.target.checked)}
                    />`);else if(i.input=="radio")e.push(Ie`<span class="label">${l}</span>
                    <div class="radio-group">
                        ${i.options.map((f,h)=>{var A;return Ie`<label>
                                    <input
                                        type="radio"
                                        name=${s}
                                        value=${f}
                                        .checked=${a==f}
                                        @input=${d=>c(d.target.value)}
                                    />${((A=i.labels)==null?void 0:A[h])??f}</label
                                >`})}
                    </div>`);else if(i.input=="select")e.push(Ie`<label for=${u}>${l}</label>
                    <select
                        id=${u}
                        @input=${f=>c(f.target.value)}
                    >
                        ${i.options.map((f,h)=>{var A;return Ie`<option
                                    value=${f}
                                    ?selected=${a==f}
                                >
                                    ${((A=i.labels)==null?void 0:A[h])??f}
                                </option>`})}
                    </select> `);else if(i.input=="text"||i.input=="number"||i.input=="color")e.push(Ie`<label for=${u}>${l}</label>
                    <div>
                        <input
                            id=${u}
                            type=${i.input}
                            placeholder=${i.placeholder??""}
                            autocomplete=${i.autocomplete??"off"}
                            .value=${a}
                            @focus=${f=>f.target.select()}
                            @input=${f=>{c(i.input=="number"?f.target.valueAsNumber:f.target.value)}}
                        />
                    </div>`);else throw new Error("Unsupported input type: "+i.input);i.description&&e.push(Ie`<div class="description">${i.description}</div>`)}return e}class TS{constructor(t,e){D(this,Bc);D(this,vc);D(this,yn);F(this,Bc,t),F(this,vc,e),F(this,yn,void 0)}initialize(t){const e=[];t.visit(i=>{const s=i.paramMediator;e.push(...NS(s))});const r=C(this,vc).inputBindingContainer;if(!(!r||r=="none"||!e.length)){if(F(this,yn,document.createElement("div")),C(this,yn).className="gs-input-bindings",r=="default")C(this,Bc).appendChild(C(this,yn));else if(r instanceof HTMLElement)r.appendChild(C(this,yn));else throw new Error("Invalid inputBindingContainer");e.length&&Ko(Ie`<div class="gs-input-binding">${e}</div>`,C(this,yn))}}remove(){var t;(t=C(this,yn))==null||t.remove()}}Bc=new WeakMap,vc=new WeakMap,yn=new WeakMap;/* @license twgl.js 4.24.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */const qA=5120,Qa=5121,KA=5122,jA=5123,WA=5124,XA=5125,ZA=5126,PS=32819,LS=32820,OS=33635,US=5131,GS=33640,zS=35899,HS=35902,_S=36269,VS=34042,ym={};{const n=ym;n[qA]=Int8Array,n[Qa]=Uint8Array,n[KA]=Int16Array,n[jA]=Uint16Array,n[WA]=Int32Array,n[XA]=Uint32Array,n[ZA]=Float32Array,n[PS]=Uint16Array,n[LS]=Uint16Array,n[OS]=Uint16Array,n[US]=Uint16Array,n[GS]=Uint32Array,n[zS]=Uint32Array,n[HS]=Uint32Array,n[_S]=Uint32Array,n[VS]=Uint32Array}function $A(n){if(n instanceof Int8Array)return qA;if(n instanceof Uint8Array||n instanceof Uint8ClampedArray)return Qa;if(n instanceof Int16Array)return KA;if(n instanceof Uint16Array)return jA;if(n instanceof Int32Array)return WA;if(n instanceof Uint32Array)return XA;if(n instanceof Float32Array)return ZA;throw new Error("unsupported typed array type")}function YS(n){if(n===Int8Array)return qA;if(n===Uint8Array||n===Uint8ClampedArray)return Qa;if(n===Int16Array)return KA;if(n===Uint16Array)return jA;if(n===Int32Array)return WA;if(n===Uint32Array)return XA;if(n===Float32Array)return ZA;throw new Error("unsupported typed array type")}function JS(n){const t=ym[n];if(!t)throw new Error("unknown gl type");return t}const su=typeof SharedArrayBuffer<"u"?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function qS(...n){console.error(...n)}function wm(...n){console.warn(...n)}function KS(n,t){return typeof WebGLBuffer<"u"&&t instanceof WebGLBuffer}function xm(n,t){return typeof WebGLRenderbuffer<"u"&&t instanceof WebGLRenderbuffer}function ou(n,t){return typeof WebGLTexture<"u"&&t instanceof WebGLTexture}function jS(n,t){return typeof WebGLSampler<"u"&&t instanceof WebGLSampler}const Im=35044,ln=34962,WS=34963,XS=34660,ZS=5120,$S=5121,eD=5122,tD=5123,nD=5124,rD=5125,iD=5126,Em={attribPrefix:""};function bm(n,t,e,r,i){n.bindBuffer(t,e),n.bufferData(t,r,i||Im)}function Bm(n,t,e,r){if(KS(n,t))return t;e=e||ln;const i=n.createBuffer();return bm(n,e,i,t,r),i}function vm(n){return n==="indices"}function sD(n){return n instanceof Int8Array||n instanceof Uint8Array}function oD(n){return n===Int8Array||n===Uint8Array}function aD(n){return n.length?n:n.data}const cD=/coord|texture/i,lD=/color|colour/i;function Qm(n,t){let e;if(cD.test(n)?e=2:lD.test(n)?e=4:e=3,t%e>0)throw new Error(`Can not guess numComponents for attribute '${n}'. Tried ${e} but ${t} values is not evenly divisible by ${e}. You should specify it.`);return e}function uD(n,t){return n.numComponents||n.size||Qm(t,aD(n).length)}function eh(n,t){if(su(n))return n;if(su(n.data))return n.data;Array.isArray(n)&&(n={data:n});let e=n.type;return e||(vm(t)?e=Uint16Array:e=Float32Array),new e(n.data)}function fD(n,t){const e={};return Object.keys(t).forEach(function(r){if(!vm(r)){const i=t[r],s=i.attrib||i.name||i.attribName||Em.attribPrefix+r;if(i.value){if(!Array.isArray(i.value)&&!su(i.value))throw new Error("array.value is not array or typedarray");e[s]={value:i.value}}else{let o,a,l,c;if(i.buffer&&i.buffer instanceof WebGLBuffer)o=i.buffer,c=i.numComponents||i.size,a=i.type,l=i.normalize;else if(typeof i=="number"||typeof i.data=="number"){const u=i.data||i,f=i.type||Float32Array,h=u*f.BYTES_PER_ELEMENT;a=YS(f),l=i.normalize!==void 0?i.normalize:oD(f),c=i.numComponents||i.size||Qm(r,u),o=n.createBuffer(),n.bindBuffer(ln,o),n.bufferData(ln,h,i.drawType||Im)}else{const u=eh(i,r);o=Bm(n,u,void 0,i.drawType),a=$A(u),l=i.normalize!==void 0?i.normalize:sD(u),c=uD(i,r)}e[s]={buffer:o,numComponents:c,type:a,normalize:l,stride:i.stride||0,offset:i.offset||0,divisor:i.divisor===void 0?void 0:i.divisor,drawType:i.drawType}}}}),n.bindBuffer(ln,null),e}function AD(n,t,e,r){e=eh(e),r!==void 0?(n.bindBuffer(ln,t.buffer),n.bufferSubData(ln,r,e)):bm(n,ln,t.buffer,e,t.drawType)}function hD(n,t){return t===ZS||t===$S?1:t===eD||t===tD?2:t===nD||t===rD||t===iD?4:0}const th=["position","positions","a_position"];function dD(n,t){let e,r;for(r=0;r<th.length&&(e=th[r],!(e in t||(e=Em.attribPrefix+e,e in t)));++r);r===th.length&&(e=Object.keys(t)[0]);const i=t[e];if(!i.buffer)return 1;n.bindBuffer(ln,i.buffer);const s=n.getBufferParameter(ln,XS);n.bindBuffer(ln,null);const o=hD(n,i.type),a=s/o,l=i.numComponents||i.size,c=a/l;if(c%1!==0)throw new Error(`numComponents ${l} not correct for length ${length}`);return c}function gD(n,t,e){const r=fD(n,t),i=Object.assign({},e||{});i.attribs=Object.assign({},e?e.attribs:{},r);const s=t.indices;if(s){const o=eh(s,"indices");i.indices=Bm(n,o,WS),i.numElements=o.length,i.elementType=$A(o)}else i.numElements||(i.numElements=dD(n,i.attribs));return i}function ns(n){return!!n.texStorage2D}const nh=(function(){const n={},t={};function e(r){const i=r.constructor.name;if(!n[i]){for(const s in r)if(typeof r[s]=="number"){const o=t[r[s]];t[r[s]]=o?`${o} | ${s}`:s}n[i]=!0}}return function(i,s){return e(i),t[s]||(typeof s=="number"?`0x${s.toString(16)}`:s)}})(),ir={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},rs=su,Sm=(function(){let n;return function(){return n=n||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),n}})(),Dm=6406,un=6407,be=6408,km=6409,Fm=6410,Sa=6402,Mm=34041,au=33071,pD=9728,mD=9729,Nn=3553,Tn=34067,sr=32879,or=35866,cu=34069,CD=34070,yD=34071,wD=34072,xD=34073,ID=34074,rh=10241,ih=10240,lu=10242,uu=10243,Rm=32882,ED=33082,bD=33083,BD=33084,vD=33085,sh=3317,Nm=3314,Tm=32878,Pm=3316,Lm=3315,Om=32877,QD=37443,SD=37441,DD=37440,kD=33321,FD=36756,MD=33325,RD=33326,ND=33330,TD=33329,PD=33338,LD=33337,OD=33340,UD=33339,GD=33323,zD=36757,HD=33327,_D=33328,VD=33336,YD=33335,JD=33332,qD=33331,KD=33334,jD=33333,WD=32849,XD=35905,ZD=36194,$D=36758,e3=35898,t3=35901,n3=34843,r3=34837,i3=36221,s3=36239,o3=36215,a3=36233,c3=36209,l3=36227,u3=32856,f3=35907,A3=36759,h3=32855,d3=32854,g3=32857,p3=34842,m3=34836,C3=36220,y3=36238,w3=36975,x3=36214,I3=36232,E3=36226,b3=36208,B3=33189,v3=33190,Q3=36012,S3=36013,D3=35056,ar=5120,Be=5121,fu=5122,is=5123,Au=5124,Zr=5125,st=5126,Um=32819,Gm=32820,zm=33635,jt=5131,Da=36193,oh=33640,k3=35899,F3=35902,M3=36269,R3=34042,hu=33319,ss=33320,du=6403,os=36244,as=36248,$r=36249;let ah;function gu(n){if(!ah){const t={};t[Dm]={textureFormat:Dm,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[Be,jt,Da,st]},t[km]={textureFormat:km,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[Be,jt,Da,st]},t[Fm]={textureFormat:Fm,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[Be,jt,Da,st]},t[un]={textureFormat:un,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[Be,jt,Da,st,zm]},t[be]={textureFormat:be,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[Be,jt,Da,st,Um,Gm]},t[Sa]={textureFormat:Sa,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Zr,is]},t[kD]={textureFormat:du,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[Be]},t[FD]={textureFormat:du,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[ar]},t[MD]={textureFormat:du,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[st,jt]},t[RD]={textureFormat:du,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[st]},t[ND]={textureFormat:os,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Be]},t[TD]={textureFormat:os,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[ar]},t[JD]={textureFormat:os,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[is]},t[qD]={textureFormat:os,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[fu]},t[KD]={textureFormat:os,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Zr]},t[jD]={textureFormat:os,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Au]},t[GD]={textureFormat:hu,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[Be]},t[zD]={textureFormat:hu,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[ar]},t[HD]={textureFormat:hu,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[st,jt]},t[_D]={textureFormat:hu,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[st]},t[VD]={textureFormat:ss,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Be]},t[YD]={textureFormat:ss,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[ar]},t[PD]={textureFormat:ss,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[is]},t[LD]={textureFormat:ss,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[fu]},t[OD]={textureFormat:ss,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Zr]},t[UD]={textureFormat:ss,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Au]},t[WD]={textureFormat:un,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[Be]},t[XD]={textureFormat:un,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Be]},t[ZD]={textureFormat:un,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[Be,zm]},t[$D]={textureFormat:un,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[ar]},t[e3]={textureFormat:un,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[st,jt,k3]},t[t3]={textureFormat:un,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[st,jt,F3]},t[n3]={textureFormat:un,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[st,jt]},t[r3]={textureFormat:un,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[st]},t[i3]={textureFormat:as,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Be]},t[s3]={textureFormat:as,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[ar]},t[o3]={textureFormat:as,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[is]},t[a3]={textureFormat:as,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[fu]},t[c3]={textureFormat:as,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Zr]},t[l3]={textureFormat:as,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Au]},t[u3]={textureFormat:be,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Be]},t[f3]={textureFormat:be,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Be]},t[A3]={textureFormat:be,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[ar]},t[h3]={textureFormat:be,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[Be,Gm,oh]},t[d3]={textureFormat:be,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[Be,Um]},t[g3]={textureFormat:be,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[oh]},t[p3]={textureFormat:be,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[st,jt]},t[m3]={textureFormat:be,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[st]},t[C3]={textureFormat:$r,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Be]},t[y3]={textureFormat:$r,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ar]},t[w3]={textureFormat:$r,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[oh]},t[x3]={textureFormat:$r,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[is]},t[I3]={textureFormat:$r,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[fu]},t[E3]={textureFormat:$r,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Au]},t[b3]={textureFormat:$r,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Zr]},t[B3]={textureFormat:Sa,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[is,Zr]},t[v3]={textureFormat:Sa,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Zr]},t[Q3]={textureFormat:Sa,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[st]},t[D3]={textureFormat:Mm,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[R3]},t[S3]={textureFormat:Mm,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[M3]},Object.keys(t).forEach(function(e){const r=t[e];r.bytesPerElementMap={},r.bytesPerElement.forEach(function(i,s){const o=r.type[s];r.bytesPerElementMap[o]=i})}),ah=t}return ah[n]}function N3(n,t){const e=gu(n);if(!e)throw"unknown internal format";const r=e.bytesPerElementMap[t];if(r===void 0)throw"unknown internal format";return r}function cs(n){const t=gu(n);if(!t)throw"unknown internal format";return{format:t.textureFormat,type:t.type[0]}}function Hm(n){return(n&n-1)===0}function T3(n,t,e,r){if(!ns(n))return Hm(t)&&Hm(e);const i=gu(r);if(!i)throw"unknown internal format";return i.colorRenderable&&i.textureFilterable}function P3(n){const t=gu(n);if(!t)throw"unknown internal format";return t.textureFilterable}function _m(n,t,e){return rs(t)?$A(t):e||Be}function pu(n,t,e,r,i){if(i%1!==0)throw"can't guess dimensions";if(!e&&!r){const s=Math.sqrt(i/(t===Tn?6:1));s%1===0?(e=s,r=s):(e=i,r=1)}else if(r){if(!e&&(e=i/r,e%1))throw"can't guess dimensions"}else if(r=i/e,r%1)throw"can't guess dimensions";return{width:e,height:r}}function ls(n,t){t.colorspaceConversion!==void 0&&n.pixelStorei(QD,t.colorspaceConversion),t.premultiplyAlpha!==void 0&&n.pixelStorei(SD,t.premultiplyAlpha),t.flipY!==void 0&&n.pixelStorei(DD,t.flipY)}function Vm(n){n.pixelStorei(sh,4),ns(n)&&(n.pixelStorei(Nm,0),n.pixelStorei(Tm,0),n.pixelStorei(Pm,0),n.pixelStorei(Lm,0),n.pixelStorei(Om,0))}function L3(n,t,e,r){r.minMag&&(e.call(n,t,rh,r.minMag),e.call(n,t,ih,r.minMag)),r.min&&e.call(n,t,rh,r.min),r.mag&&e.call(n,t,ih,r.mag),r.wrap&&(e.call(n,t,lu,r.wrap),e.call(n,t,uu,r.wrap),(t===sr||jS(n,t))&&e.call(n,t,Rm,r.wrap)),r.wrapR&&e.call(n,t,Rm,r.wrapR),r.wrapS&&e.call(n,t,lu,r.wrapS),r.wrapT&&e.call(n,t,uu,r.wrapT),r.minLod&&e.call(n,t,ED,r.minLod),r.maxLod&&e.call(n,t,bD,r.maxLod),r.baseLevel&&e.call(n,t,BD,r.baseLevel),r.maxLevel&&e.call(n,t,vD,r.maxLevel)}function Ym(n,t,e){const r=e.target||Nn;n.bindTexture(r,t),L3(n,r,n.texParameteri,e)}function O3(n){return n=n||ir.textureColor,rs(n)?n:new Uint8Array([n[0]*255,n[1]*255,n[2]*255,n[3]*255])}function ch(n,t,e,r,i,s){e=e||ir.textureOptions,s=s||be;const o=e.target||Nn;if(r=r||e.width,i=i||e.height,n.bindTexture(o,t),T3(n,r,i,s))n.generateMipmap(o);else{const a=P3(s)?mD:pD;n.texParameteri(o,rh,a),n.texParameteri(o,ih,a),n.texParameteri(o,lu,au),n.texParameteri(o,uu,au)}}function ka(n){return n.auto===!0||n.auto===void 0&&n.level===void 0}function lh(n,t){return t=t||{},t.cubeFaceOrder||[cu,CD,yD,wD,xD,ID]}function uh(n,t){const r=lh(n,t).map(function(i,s){return{face:i,ndx:s}});return r.sort(function(i,s){return i.face-s.face}),r}function Jm(n,t,e,r){r=r||ir.textureOptions;const i=r.target||Nn,s=r.level||0;let o=e.width,a=e.height;const l=r.internalFormat||r.format||be,c=cs(l),u=r.format||c.format,f=r.type||c.type;if(ls(n,r),n.bindTexture(i,t),i===Tn){const h=e.width,A=e.height;let d,g;if(h/6===A)d=A,g=[0,0,1,0,2,0,3,0,4,0,5,0];else if(A/6===h)d=h,g=[0,0,0,1,0,2,0,3,0,4,0,5];else if(h/3===A/2)d=h/3,g=[0,0,1,0,2,0,0,1,1,1,2,1];else if(h/2===A/3)d=h/2,g=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(e.src?e.src:e.nodeName);const m=Sm();m?(m.canvas.width=d,m.canvas.height=d,o=d,a=d,uh(n,r).forEach(function(p){const w=g[p.ndx*2+0]*d,I=g[p.ndx*2+1]*d;m.drawImage(e,w,I,d,d,0,0,d,d),n.texImage2D(p.face,s,l,u,f,m.canvas)}),m.canvas.width=1,m.canvas.height=1):typeof createImageBitmap<"u"&&(o=d,a=d,uh(n,r).forEach(function(p){const w=g[p.ndx*2+0]*d,I=g[p.ndx*2+1]*d;n.texImage2D(p.face,s,l,d,d,0,u,f,null),createImageBitmap(e,w,I,d,d,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(y){ls(n,r),n.bindTexture(i,t),n.texImage2D(p.face,s,l,u,f,y),ka(r)&&ch(n,t,r,o,a,l)})}))}else if(i===sr||i===or){const h=Math.min(e.width,e.height),A=Math.max(e.width,e.height),d=A/h;if(d%1!==0)throw"can not compute 3D dimensions of element";const g=e.width===A?1:0,m=e.height===A?1:0;n.pixelStorei(sh,1),n.pixelStorei(Nm,e.width),n.pixelStorei(Tm,0),n.pixelStorei(Om,0),n.texImage3D(i,s,l,h,h,h,0,u,f,null);for(let p=0;p<d;++p){const w=p*h*g,I=p*h*m;n.pixelStorei(Pm,w),n.pixelStorei(Lm,I),n.texSubImage3D(i,s,0,0,p,h,h,1,u,f,e)}Vm(n)}else n.texImage2D(i,s,l,u,f,e);ka(r)&&ch(n,t,r,o,a,l),Ym(n,t,r)}function Fa(){}function U3(n){if(typeof document<"u"){const t=document.createElement("a");return t.href=n,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}else{const t=new URL(location.href).origin;return new URL(n,location.href).origin===t}}function G3(n,t){return t===void 0&&!U3(n)?"anonymous":t}function z3(n,t,e){e=e||Fa;let r;if(t=t!==void 0?t:ir.crossOrigin,t=G3(n,t),typeof Image<"u"){r=new Image,t!==void 0&&(r.crossOrigin=t);const i=function(){r.removeEventListener("error",s),r.removeEventListener("load",o),r=null},s=function(){const l="couldn't load image: "+n;qS(l),e(l,r),i()},o=function(){e(null,r),i()};return r.addEventListener("error",s),r.addEventListener("load",o),r.src=n,r}else if(typeof ImageBitmap<"u"){let i,s;const o=function(){e(i,s)},a={};t&&(a.mode="cors"),fetch(n,a).then(function(l){if(!l.ok)throw l;return l.blob()}).then(function(l){return createImageBitmap(l,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(l){s=l,setTimeout(o)}).catch(function(l){i=l,setTimeout(o)}),r=null}return r}function qm(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof ImageData<"u"&&n instanceof ImageData||typeof HTMLElement<"u"&&n instanceof HTMLElement}function fh(n,t,e){return qm(n)?(setTimeout(function(){e(null,n)}),n):z3(n,t,e)}function Ah(n,t,e){e=e||ir.textureOptions;const r=e.target||Nn;if(n.bindTexture(r,t),e.color===!1)return;const i=O3(e.color);if(r===Tn)for(let s=0;s<6;++s)n.texImage2D(cu+s,0,be,1,1,0,be,Be,i);else r===sr||r===or?n.texImage3D(r,0,be,1,1,1,0,be,Be,i):n.texImage2D(r,0,be,1,1,0,be,Be,i)}function H3(n,t,e,r){return r=r||Fa,e=e||ir.textureOptions,Ah(n,t,e),e=Object.assign({},e),fh(e.src,e.crossOrigin,function(s,o){s?r(s,t,o):(Jm(n,t,o,e),r(null,t,o))})}function _3(n,t,e,r){r=r||Fa;const i=e.src;if(i.length!==6)throw"there must be 6 urls for a cubemap";const s=e.level||0,o=e.internalFormat||e.format||be,a=cs(o),l=e.format||a.format,c=e.type||Be,u=e.target||Nn;if(u!==Tn)throw"target must be TEXTURE_CUBE_MAP";Ah(n,t,e),e=Object.assign({},e);let f=6;const h=[],A=lh(n,e);let d;function g(m){return function(p,w){--f,p?h.push(p):w.width!==w.height?h.push("cubemap face img is not a square: "+w.src):(ls(n,e),n.bindTexture(u,t),f===5?lh().forEach(function(I){n.texImage2D(I,s,o,l,c,w)}):n.texImage2D(m,s,o,l,c,w),ka(e)&&n.generateMipmap(u)),f===0&&r(h.length?h:void 0,t,d)}}d=i.map(function(m,p){return fh(m,e.crossOrigin,g(A[p]))})}function V3(n,t,e,r){r=r||Fa;const i=e.src,s=e.internalFormat||e.format||be,o=cs(s),a=e.format||o.format,l=e.type||Be,c=e.target||or;if(c!==sr&&c!==or)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";Ah(n,t,e),e=Object.assign({},e);let u=i.length;const f=[];let h;const A=e.level||0;let d=e.width,g=e.height;const m=i.length;let p=!0;function w(I){return function(y,b){if(--u,y)f.push(y);else{if(ls(n,e),n.bindTexture(c,t),p){p=!1,d=e.width||b.width,g=e.height||b.height,n.texImage3D(c,A,s,d,g,m,0,a,l,null);for(let B=0;B<m;++B)n.texSubImage3D(c,A,0,0,B,d,g,1,a,l,b)}else{let B=b,E;(b.width!==d||b.height!==g)&&(E=Sm(),B=E.canvas,E.canvas.width=d,E.canvas.height=g,E.drawImage(b,0,0,d,g)),n.texSubImage3D(c,A,0,0,I,d,g,1,a,l,B),E&&B===E.canvas&&(E.canvas.width=0,E.canvas.height=0)}ka(e)&&n.generateMipmap(c)}u===0&&r(f.length?f:void 0,t,h)}}h=i.map(function(I,y){return fh(I,e.crossOrigin,w(y))})}function Km(n,t,e,r){r=r||ir.textureOptions;const i=r.target||Nn;n.bindTexture(i,t);let s=r.width,o=r.height,a=r.depth;const l=r.level||0,c=r.internalFormat||r.format||be,u=cs(c),f=r.format||u.format,h=r.type||_m(n,e,u.type);if(rs(e))e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));else{const m=JS(h);e=new m(e)}const A=N3(c,h),d=e.byteLength/A;if(d%1)throw"length wrong size for format: "+nh(n,f);let g;if(i===sr||i===or)if(!s&&!o&&!a){const m=Math.cbrt(d);if(m%1!==0)throw"can't guess cube size of array of numElements: "+d;s=m,o=m,a=m}else s&&(!o||!a)?(g=pu(n,i,o,a,d/s),o=g.width,a=g.height):o&&(!s||!a)?(g=pu(n,i,s,a,d/o),s=g.width,a=g.height):(g=pu(n,i,s,o,d/a),s=g.width,o=g.height);else g=pu(n,i,s,o,d),s=g.width,o=g.height;if(Vm(n),n.pixelStorei(sh,r.unpackAlignment||1),ls(n,r),i===Tn){const m=A/e.BYTES_PER_ELEMENT,p=d/6*m;uh(n,r).forEach(w=>{const I=p*w.ndx,y=e.subarray(I,I+p);n.texImage2D(w.face,l,c,s,o,0,f,h,y)})}else i===sr||i===or?n.texImage3D(i,l,c,s,o,a,0,f,h,e):n.texImage2D(i,l,c,s,o,0,f,h,e);return{width:s,height:o,depth:a,type:h}}function Y3(n,t,e){const r=e.target||Nn;n.bindTexture(r,t);const i=e.level||0,s=e.internalFormat||e.format||be,o=cs(s),a=e.format||o.format,l=e.type||o.type;if(ls(n,e),r===Tn)for(let c=0;c<6;++c)n.texImage2D(cu+c,i,s,e.width,e.height,0,a,l,null);else r===sr||r===or?n.texImage3D(r,i,s,e.width,e.height,e.depth,0,a,l,null):n.texImage2D(r,i,s,e.width,e.height,0,a,l,null)}function Ma(n,t,e){e=e||Fa,t=t||ir.textureOptions;const r=n.createTexture(),i=t.target||Nn;let s=t.width||1,o=t.height||1;const a=t.internalFormat||be;n.bindTexture(i,r),i===Tn&&(n.texParameteri(i,lu,au),n.texParameteri(i,uu,au));let l=t.src;if(l)if(typeof l=="function"&&(l=l(n,t)),typeof l=="string")H3(n,r,t,e);else if(rs(l)||Array.isArray(l)&&(typeof l[0]=="number"||Array.isArray(l[0])||rs(l[0]))){const c=Km(n,r,l,t);s=c.width,o=c.height}else Array.isArray(l)&&(typeof l[0]=="string"||qm(l[0]))?i===Tn?_3(n,r,t,e):V3(n,r,t,e):(Jm(n,r,l,t),s=l.width,o=l.height);else Y3(n,r,t);return ka(t)&&ch(n,r,t,s,o,a),Ym(n,r,t),r}function J3(n,t,e,r,i,s){r=r||e.width,i=i||e.height,s=s||e.depth;const o=e.target||Nn;n.bindTexture(o,t);const a=e.level||0,l=e.internalFormat||e.format||be,c=cs(l),u=e.format||c.format;let f;const h=e.src;if(h&&(rs(h)||Array.isArray(h)&&typeof h[0]=="number")?f=e.type||_m(n,h,c.type):f=e.type||c.type,o===Tn)for(let A=0;A<6;++A)n.texImage2D(cu+A,a,l,r,i,0,u,f,null);else o===sr||o===or?n.texImage3D(o,a,l,r,i,s,0,u,f,null):n.texImage2D(o,a,l,r,i,0,u,f,null)}const q3=wm,mu=33984,K3=35048,Cu=34962,j3=34963,hh=35345,jm=35718,W3=35721,X3=35971,Z3=35382,$3=35396,ek=35398,tk=35392,nk=35395,yu=5126,Wm=35664,Xm=35665,Zm=35666,dh=5124,$m=35667,eC=35668,tC=35669,nC=35670,rC=35671,iC=35672,sC=35673,oC=35674,aC=35675,cC=35676,rk=35678,ik=35680,sk=35679,ok=35682,ak=35685,ck=35686,lk=35687,uk=35688,fk=35689,Ak=35690,hk=36289,dk=36292,gk=36293,gh=5125,lC=36294,uC=36295,fC=36296,pk=36298,mk=36299,Ck=36300,yk=36303,wk=36306,xk=36307,Ik=36308,Ek=36311,wu=3553,xu=34067,ph=32879,Iu=35866,X={};function AC(n,t){return X[t].bindPoint}function bk(n,t){return function(e){n.uniform1f(t,e)}}function Bk(n,t){return function(e){n.uniform1fv(t,e)}}function vk(n,t){return function(e){n.uniform2fv(t,e)}}function Qk(n,t){return function(e){n.uniform3fv(t,e)}}function Sk(n,t){return function(e){n.uniform4fv(t,e)}}function hC(n,t){return function(e){n.uniform1i(t,e)}}function dC(n,t){return function(e){n.uniform1iv(t,e)}}function gC(n,t){return function(e){n.uniform2iv(t,e)}}function pC(n,t){return function(e){n.uniform3iv(t,e)}}function mC(n,t){return function(e){n.uniform4iv(t,e)}}function Dk(n,t){return function(e){n.uniform1ui(t,e)}}function kk(n,t){return function(e){n.uniform1uiv(t,e)}}function Fk(n,t){return function(e){n.uniform2uiv(t,e)}}function Mk(n,t){return function(e){n.uniform3uiv(t,e)}}function Rk(n,t){return function(e){n.uniform4uiv(t,e)}}function Nk(n,t){return function(e){n.uniformMatrix2fv(t,!1,e)}}function Tk(n,t){return function(e){n.uniformMatrix3fv(t,!1,e)}}function Pk(n,t){return function(e){n.uniformMatrix4fv(t,!1,e)}}function Lk(n,t){return function(e){n.uniformMatrix2x3fv(t,!1,e)}}function Ok(n,t){return function(e){n.uniformMatrix3x2fv(t,!1,e)}}function Uk(n,t){return function(e){n.uniformMatrix2x4fv(t,!1,e)}}function Gk(n,t){return function(e){n.uniformMatrix4x2fv(t,!1,e)}}function zk(n,t){return function(e){n.uniformMatrix3x4fv(t,!1,e)}}function Hk(n,t){return function(e){n.uniformMatrix4x3fv(t,!1,e)}}function At(n,t,e,r){const i=AC(n,t);return ns(n)?function(s){let o,a;ou(n,s)?(o=s,a=null):(o=s.texture,a=s.sampler),n.uniform1i(r,e),n.activeTexture(mu+e),n.bindTexture(i,o),n.bindSampler(e,a)}:function(s){n.uniform1i(r,e),n.activeTexture(mu+e),n.bindTexture(i,s)}}function ht(n,t,e,r,i){const s=AC(n,t),o=new Int32Array(i);for(let a=0;a<i;++a)o[a]=e+a;return ns(n)?function(a){n.uniform1iv(r,o),a.forEach(function(l,c){n.activeTexture(mu+o[c]);let u,f;ou(n,l)?(u=l,f=null):(u=l.texture,f=l.sampler),n.bindSampler(e,f),n.bindTexture(s,u)})}:function(a){n.uniform1iv(r,o),a.forEach(function(l,c){n.activeTexture(mu+o[c]),n.bindTexture(s,l)})}}X[yu]={Type:Float32Array,size:4,setter:bk,arraySetter:Bk},X[Wm]={Type:Float32Array,size:8,setter:vk,cols:2},X[Xm]={Type:Float32Array,size:12,setter:Qk,cols:3},X[Zm]={Type:Float32Array,size:16,setter:Sk,cols:4},X[dh]={Type:Int32Array,size:4,setter:hC,arraySetter:dC},X[$m]={Type:Int32Array,size:8,setter:gC,cols:2},X[eC]={Type:Int32Array,size:12,setter:pC,cols:3},X[tC]={Type:Int32Array,size:16,setter:mC,cols:4},X[gh]={Type:Uint32Array,size:4,setter:Dk,arraySetter:kk},X[lC]={Type:Uint32Array,size:8,setter:Fk,cols:2},X[uC]={Type:Uint32Array,size:12,setter:Mk,cols:3},X[fC]={Type:Uint32Array,size:16,setter:Rk,cols:4},X[nC]={Type:Uint32Array,size:4,setter:hC,arraySetter:dC},X[rC]={Type:Uint32Array,size:8,setter:gC,cols:2},X[iC]={Type:Uint32Array,size:12,setter:pC,cols:3},X[sC]={Type:Uint32Array,size:16,setter:mC,cols:4},X[oC]={Type:Float32Array,size:32,setter:Nk,rows:2,cols:2},X[aC]={Type:Float32Array,size:48,setter:Tk,rows:3,cols:3},X[cC]={Type:Float32Array,size:64,setter:Pk,rows:4,cols:4},X[ak]={Type:Float32Array,size:32,setter:Lk,rows:2,cols:3},X[ck]={Type:Float32Array,size:32,setter:Uk,rows:2,cols:4},X[lk]={Type:Float32Array,size:48,setter:Ok,rows:3,cols:2},X[uk]={Type:Float32Array,size:48,setter:zk,rows:3,cols:4},X[fk]={Type:Float32Array,size:64,setter:Gk,rows:4,cols:2},X[Ak]={Type:Float32Array,size:64,setter:Hk,rows:4,cols:3},X[rk]={Type:null,size:0,setter:At,arraySetter:ht,bindPoint:wu},X[ik]={Type:null,size:0,setter:At,arraySetter:ht,bindPoint:xu},X[sk]={Type:null,size:0,setter:At,arraySetter:ht,bindPoint:ph},X[ok]={Type:null,size:0,setter:At,arraySetter:ht,bindPoint:wu},X[hk]={Type:null,size:0,setter:At,arraySetter:ht,bindPoint:Iu},X[dk]={Type:null,size:0,setter:At,arraySetter:ht,bindPoint:Iu},X[gk]={Type:null,size:0,setter:At,arraySetter:ht,bindPoint:xu},X[pk]={Type:null,size:0,setter:At,arraySetter:ht,bindPoint:wu},X[mk]={Type:null,size:0,setter:At,arraySetter:ht,bindPoint:ph},X[Ck]={Type:null,size:0,setter:At,arraySetter:ht,bindPoint:xu},X[yk]={Type:null,size:0,setter:At,arraySetter:ht,bindPoint:Iu},X[wk]={Type:null,size:0,setter:At,arraySetter:ht,bindPoint:wu},X[xk]={Type:null,size:0,setter:At,arraySetter:ht,bindPoint:ph},X[Ik]={Type:null,size:0,setter:At,arraySetter:ht,bindPoint:xu},X[Ek]={Type:null,size:0,setter:At,arraySetter:ht,bindPoint:Iu};function Eu(n,t){return function(e){if(e.value)switch(n.disableVertexAttribArray(t),e.value.length){case 4:n.vertexAttrib4fv(t,e.value);break;case 3:n.vertexAttrib3fv(t,e.value);break;case 2:n.vertexAttrib2fv(t,e.value);break;case 1:n.vertexAttrib1fv(t,e.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else n.bindBuffer(Cu,e.buffer),n.enableVertexAttribArray(t),n.vertexAttribPointer(t,e.numComponents||e.size,e.type||yu,e.normalize||!1,e.stride||0,e.offset||0),e.divisor!==void 0&&n.vertexAttribDivisor(t,e.divisor)}}function cr(n,t){return function(e){if(e.value)if(n.disableVertexAttribArray(t),e.value.length===4)n.vertexAttrib4iv(t,e.value);else throw new Error("The length of an integer constant value must be 4!");else n.bindBuffer(Cu,e.buffer),n.enableVertexAttribArray(t),n.vertexAttribIPointer(t,e.numComponents||e.size,e.type||dh,e.stride||0,e.offset||0),e.divisor!==void 0&&n.vertexAttribDivisor(t,e.divisor)}}function bu(n,t){return function(e){if(e.value)if(n.disableVertexAttribArray(t),e.value.length===4)n.vertexAttrib4uiv(t,e.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else n.bindBuffer(Cu,e.buffer),n.enableVertexAttribArray(t),n.vertexAttribIPointer(t,e.numComponents||e.size,e.type||gh,e.stride||0,e.offset||0),e.divisor!==void 0&&n.vertexAttribDivisor(t,e.divisor)}}function mh(n,t,e){const r=e.size,i=e.count;return function(s){n.bindBuffer(Cu,s.buffer);const o=s.size||s.numComponents||r,a=o/i,l=s.type||yu,u=X[l].size*o,f=s.normalize||!1,h=s.offset||0,A=u/i;for(let d=0;d<i;++d)n.enableVertexAttribArray(t+d),n.vertexAttribPointer(t+d,a,l,f,u,h+A*d),s.divisor!==void 0&&n.vertexAttribDivisor(t+d,s.divisor)}}const Pe={};Pe[yu]={size:4,setter:Eu},Pe[Wm]={size:8,setter:Eu},Pe[Xm]={size:12,setter:Eu},Pe[Zm]={size:16,setter:Eu},Pe[dh]={size:4,setter:cr},Pe[$m]={size:8,setter:cr},Pe[eC]={size:12,setter:cr},Pe[tC]={size:16,setter:cr},Pe[gh]={size:4,setter:bu},Pe[lC]={size:8,setter:bu},Pe[uC]={size:12,setter:bu},Pe[fC]={size:16,setter:bu},Pe[nC]={size:4,setter:cr},Pe[rC]={size:8,setter:cr},Pe[iC]={size:12,setter:cr},Pe[sC]={size:16,setter:cr},Pe[oC]={size:4,setter:mh,count:2},Pe[aC]={size:9,setter:mh,count:3},Pe[cC]={size:16,setter:mh,count:4};function CC(n){const t=n.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const _k=/(\.|\[|]|\w+)/g,Vk=n=>n>="0"&&n<="9";function yC(n,t,e,r){const i=n.split(_k).filter(a=>a!=="");let s=0,o="";for(;;){const a=i[s++];o+=a;const l=Vk(a[0]),c=l?parseInt(a):a;if(l&&(o+=i[s++]),s===i.length){e[c]=t;break}else{const f=i[s++],h=f==="[",A=e[c]||(h?[]:{});e[c]=A,e=A,r[o]=r[o]||(function(d){return function(g){bC(d,g)}})(A),o+=f}}}function Yk(n,t){let e=0;function r(a,l,c){const u=l.name.endsWith("[0]"),f=l.type,h=X[f];if(!h)throw new Error(`unknown type: 0x${f.toString(16)}`);let A;if(h.bindPoint){const d=e;e+=l.size,u?A=h.arraySetter(n,f,d,c,l.size):A=h.setter(n,f,d,c,l.size)}else h.arraySetter&&u?A=h.arraySetter(n,c):A=h.setter(n,c);return A.location=c,A}const i={},s={},o=n.getProgramParameter(t,jm);for(let a=0;a<o;++a){const l=n.getActiveUniform(t,a);if(CC(l))continue;let c=l.name;c.endsWith("[0]")&&(c=c.substr(0,c.length-3));const u=n.getUniformLocation(t,l.name);if(u){const f=r(t,l,u);i[c]=f,yC(c,f,s,i)}}return i}function Jk(n,t){const e={},r=n.getProgramParameter(t,X3);for(let i=0;i<r;++i){const s=n.getTransformFeedbackVarying(t,i);e[s.name]={index:i,type:s.type,size:s.size}}return e}function qk(n,t){const e=n.getProgramParameter(t,jm),r=[],i=[];for(let a=0;a<e;++a){i.push(a),r.push({});const l=n.getActiveUniform(t,a);r[a].name=l.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(a){const l=a[0],c=a[1];n.getActiveUniforms(t,i,n[l]).forEach(function(u,f){r[f][c]=u})});const s={},o=n.getProgramParameter(t,Z3);for(let a=0;a<o;++a){const l=n.getActiveUniformBlockName(t,a),c={index:n.getUniformBlockIndex(t,l),usedByVertexShader:n.getActiveUniformBlockParameter(t,a,$3),usedByFragmentShader:n.getActiveUniformBlockParameter(t,a,ek),size:n.getActiveUniformBlockParameter(t,a,tk),uniformIndices:n.getActiveUniformBlockParameter(t,a,nk)};c.used=c.usedByVertexShader||c.usedByFragmentShader,s[l]=c}return{blockSpecs:s,uniformData:r}}const wC=/\[\d+\]\.$/,Kk=(n,t)=>((n+(t-1))/t|0)*t;function jk(n,t,e,r){if(t||e){r=r||1;const s=n.length/4;return function(o){let a=0,l=0;for(let c=0;c<s;++c){for(let u=0;u<r;++u)n[a++]=o[l++];a+=4-r}}}else return function(i){i.length?n.set(i):n[0]=i}}function Wk(n,t,e,r){const i=e.blockSpecs,s=e.uniformData,o=i[r];if(!o)return q3("no uniform block object named:",r),{name:r,uniforms:{}};const a=new ArrayBuffer(o.size),l=n.createBuffer(),c=o.index;n.bindBuffer(hh,l),n.uniformBlockBinding(t,o.index,c);let u=r+".";wC.test(u)&&(u=u.replace(wC,"."));const f={},h={},A={};return o.uniformIndices.forEach(function(d){const g=s[d];let m=g.name;m.startsWith(u)&&(m=m.substr(u.length));const p=m.endsWith("[0]");p&&(m=m.substr(0,m.length-3));const w=X[g.type],I=w.Type,y=p?Kk(w.size,16)*g.size:w.size*g.size,b=new I(a,g.offset,y/I.BYTES_PER_ELEMENT);f[m]=b;const B=jk(b,p,w.rows,w.cols);h[m]=B,yC(m,B,A,h)}),{name:r,array:a,asFloat:new Float32Array(a),buffer:l,uniforms:f,setters:h}}function xC(n,t,e){return Wk(n,t.program,t.uniformBlockSpec,e)}function IC(n,t,e){const i=(t.uniformBlockSpec||t).blockSpecs[e.name];if(i){const s=i.index;return n.bindBufferRange(hh,s,e.buffer,e.offset||0,e.array.byteLength),!0}return!1}function EC(n,t,e){IC(n,t,e)&&n.bufferData(hh,e.array,K3)}function Ra(n,t){const e=n.setters;for(const r in t){const i=e[r];if(i){const s=t[r];i(s)}}}function bC(n,t){for(const e in t){const r=n[e];typeof r=="function"?r(t[e]):bC(n[e],t[e])}}function ei(n,...t){const e=n.uniformSetters||n,r=t.length;for(let i=0;i<r;++i){const s=t[i];if(Array.isArray(s)){const o=s.length;for(let a=0;a<o;++a)ei(e,s[a])}else for(const o in s){const a=e[o];a&&a(s[o])}}}function Xk(n,t){const e={},r=n.getProgramParameter(t,W3);for(let i=0;i<r;++i){const s=n.getActiveAttrib(t,i);if(CC(s))continue;const o=n.getAttribLocation(t,s.name),a=Pe[s.type],l=a.setter(n,o,a);l.location=o,e[s.name]=l}return e}function Zk(n,t){for(const e in t){const r=n[e];r&&r(t[e])}}function ti(n,t,e){e.vertexArrayObject?n.bindVertexArray(e.vertexArrayObject):(Zk(t.attribSetters||t,e.attribs),e.indices&&n.bindBuffer(j3,e.indices))}function $k(n,t){const e=Yk(n,t),r=Xk(n,t),i={program:t,uniformSetters:e,attribSetters:r};return ns(n)&&(i.uniformBlockSpec=qk(n,t),i.transformFeedbackInfo=Jk(n,t)),i}const e4=4,BC=5123;function Bu(n,t,e,r,i,s){e=e===void 0?e4:e;const o=t.indices,a=t.elementType,l=r===void 0?t.numElements:r;i=i===void 0?0:i,a||o?s!==void 0?n.drawElementsInstanced(e,l,a===void 0?BC:t.elementType,i,s):n.drawElements(e,l,a===void 0?BC:t.elementType,i):s!==void 0?n.drawArraysInstanced(e,i,l,s):n.drawArrays(e,i,l)}const t4=36160,ni=36161,n4=3553,r4=5121,i4=6402,s4=6408,o4=33190,a4=36012,c4=35056,l4=36013,u4=32854,f4=32855,A4=36194,vC=33189,QC=6401,SC=36168,Ch=34041,yh=36064,vu=36096,DC=36128,wh=33306,xh=33071,Ih=9729,kC=[{format:s4,type:r4,min:Ih,wrap:xh},{format:Ch}],Wt={};Wt[Ch]=wh,Wt[QC]=DC,Wt[SC]=DC,Wt[i4]=vu,Wt[vC]=vu,Wt[o4]=vu,Wt[a4]=vu,Wt[c4]=wh,Wt[l4]=wh;function h4(n,t){return Wt[n]||Wt[t]}const lr={};lr[u4]=!0,lr[f4]=!0,lr[A4]=!0,lr[Ch]=!0,lr[vC]=!0,lr[QC]=!0,lr[SC]=!0;function d4(n){return lr[n]}const g4=32;function p4(n){return n>=yh&&n<yh+g4}function FC(n,t,e,r){const i=t4,s=n.createFramebuffer();n.bindFramebuffer(i,s),e=e||n.drawingBufferWidth,r=r||n.drawingBufferHeight,t=t||kC;const o=[],a={framebuffer:s,attachments:[],width:e,height:r};return t.forEach(function(l,c){let u=l.attachment;const f=l.samples,h=l.format;let A=l.attachmentPoint||h4(h,l.internalFormat);if(A||(A=yh+c),p4(A)&&o.push(A),!u)if(f!==void 0||d4(h))u=n.createRenderbuffer(),n.bindRenderbuffer(ni,u),f>1?n.renderbufferStorageMultisample(ni,f,h,e,r):n.renderbufferStorage(ni,h,e,r);else{const d=Object.assign({},l);d.width=e,d.height=r,d.auto===void 0&&(d.auto=!1,d.min=d.min||d.minMag||Ih,d.mag=d.mag||d.minMag||Ih,d.wrapS=d.wrapS||d.wrap||xh,d.wrapT=d.wrapT||d.wrap||xh),u=Ma(n,d)}if(xm(n,u))n.framebufferRenderbuffer(i,A,ni,u);else if(ou(n,u))l.layer!==void 0?n.framebufferTextureLayer(i,A,u,l.level||0,l.layer):n.framebufferTexture2D(i,A,l.target||n4,u,l.level||0);else throw new Error("unknown attachment type");a.attachments.push(u)}),n.drawBuffers&&n.drawBuffers(o),a}function m4(n,t,e,r,i){r=r||n.drawingBufferWidth,i=i||n.drawingBufferHeight,t.width=r,t.height=i,e=e||kC,e.forEach(function(s,o){const a=t.attachments[o],l=s.format,c=s.samples;if(c!==void 0||xm(n,a))n.bindRenderbuffer(ni,a),c>1?n.renderbufferStorageMultisample(ni,c,l,r,i):n.renderbufferStorage(ni,l,r,i);else if(ou(n,a))J3(n,a,s,r,i);else throw new Error("unknown attachment type")})}function C4(n,t,e){const r=n.createVertexArray();return n.bindVertexArray(r),t.length||(t=[t]),t.forEach(function(i){ti(n,i,e)}),n.bindVertexArray(null),{numElements:e.numElements,elementType:e.elementType,vertexArrayObject:r}}const y4=/^(.*?)_/;function w4(n,t){nh(n,0);const e=n.getExtension(t);if(e){const r={},i=y4.exec(t)[1],s="_"+i;for(const o in e){const a=e[o],l=typeof a=="function",c=l?i:s;let u=o;o.endsWith(c)&&(u=o.substring(0,o.length-c.length)),n[u]!==void 0?!l&&n[u]!==a&&wm(u,n[u],a,o):l?n[u]=(function(f){return function(){return f.apply(e,arguments)}})(a):(n[u]=a,r[u]=a)}r.constructor={name:e.constructor.name},nh(r,0)}return e}const MC=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function RC(n){for(let t=0;t<MC.length;++t)w4(n,MC[t])}function x4(n,t){const e=["webgl2","webgl","experimental-webgl"];let r=null;for(let i=0;i<e.length;++i)if(r=n.getContext(e[i],t),r){RC(r);break}return r}function I4(n,t){return x4(n,t)}const E4=`flat out lowp vec4 vFillColor;
flat out lowp vec4 vStrokeColor;
flat out float vHalfStrokeWidth;
flat out vec4 vCornerRadii;

#if defined(ROUNDED_CORNERS) || defined(STROKED) || defined(SHADOW)
/** Position for SDF-strokes */
out vec2 vPosInPixels;
#endif

/** Size of the rect in pixels */
flat out vec2 vHalfSizeInPixels;

/**
 * Adjusts the vertex position to ensure that the rectangle is at least \`minSpan\`
 * wide or high. Returns a value that reflects the amount of clamping and can be
 * used to adjust the opacity of the rectangle.
 *
 * pos: vertex position
 * frac: vertex position within the rectangle, [0, 1]
 * size: width or height of the rectangle
 * minSize: minimum width or height of the rectangle
 */
float clampMinSize(inout float pos, float frac, float size, float minSize) {
    if (minSize > 0.0 && size < minSize) {
        pos += (frac - 0.5) * (minSize - size);
        return size / minSize;
    }

    return 1.0;
}

void sort(inout float a, inout float b) {
    if (a > b) {
        float tmp = b;
        b = a;
        a = tmp;
    }
}

/**
 * The vertex position wrt the rectangle specified by (x, x2, y, y2).
 * [0, 0] = [x, y], [1, 1] = [x2, y2]. 
 * The x or y component may contain fractional values if the rectangle 
 * have been tessellated.
 */
vec2 getVertexPos() {
    int index = gl_VertexID % 6;
    return vec2(
        index == 0 || index == 1 || index == 3 ? 0.0 : 1.0,
        index == 0 || index == 1 || index == 2 ? 0.0 : 1.0
    );
    
}

void main(void) {
    vec2 frac = getVertexPos();

    vec2 normalizedMinSize = vec2(uMinWidth, uMinHeight) / uViewportSize;
    vec4 cornerRadii = vec4(
        uCornerRadiusTopRight,
        uCornerRadiusBottomRight,
        uCornerRadiusTopLeft,
        uCornerRadiusBottomLeft
    );

    float x = getScaled_x();
    float x2 = getScaled_x2();
    float y = getScaled_y();
    float y2 = getScaled_y2();

    sort(x, x2);
    sort(y, y2);

    // Clamp x to prevent precision artifacts when the scale is zoomed very close.
	// TODO: clamp y as well
	float clampMargin = 1.0;
    vec2 pos1 = vec2(clamp(x, 0.0 - clampMargin, 1.0 + clampMargin), y);
    vec2 pos2 = vec2(clamp(x2, 0.0 - clampMargin, 1.0 + clampMargin), y2);

    vec2 size = pos2 - pos1;

    if (size.x <= 0.0 || size.y <= 0.0) {
        // Early exit. May increase performance or not...
        gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
        return;
    }

    vec2 pos = pos1 + frac * size;

    size.y *= getSampleFacetHeight(pos);

    // Clamp to minimum size, optionally compensate with opacity
    float opaFactor = uViewOpacity * max(uMinOpacity,
        clampMinSize(pos.x, frac.x, size.x, normalizedMinSize.x) *
        clampMinSize(pos.y, frac.y, size.y, normalizedMinSize.y));

    size = max(size, normalizedMinSize);

    pos = applySampleFacet(pos);

#if defined(ROUNDED_CORNERS) || defined(STROKED) || defined(SHADOW)
    // Add an extra pixel to the stroke width to accommodate edge antialiasing
    float aaPadding = 1.0 / uDevicePixelRatio;

    // TODO: Only expand to the offset direction. Now high offsets result in
    // a large expansion in all directions.
    float shadowPadding = uShadowBlur + max(abs(uShadowOffsetX), abs(uShadowOffsetY));

    float strokeWidth = getScaled_strokeWidth();
    float strokeOpacity = getScaled_strokeOpacity() * opaFactor;

    vec2 centeredFrac = frac - 0.5;
    vec2 expand = centeredFrac * (strokeWidth + aaPadding + shadowPadding * 2.0) / uViewportSize;
    pos += expand;

    vec2 sizeInPixels = size * uViewportSize;
    vPosInPixels = (centeredFrac + expand / size) * sizeInPixels;

    vHalfSizeInPixels = sizeInPixels / 2.0;

    vCornerRadii = min(cornerRadii, min(vHalfSizeInPixels.x, vHalfSizeInPixels.y));
    vHalfStrokeWidth = strokeWidth / 2.0;
    vStrokeColor = vec4(getScaled_stroke() * strokeOpacity, strokeOpacity);
#endif

    gl_Position = unitToNdc(pos);

    float fillOpacity = getScaled_fillOpacity() * opaFactor;
    vFillColor = vec4(getScaled_fill() * fillOpacity, fillOpacity);

    setupPicking();
}
`,b4=`#if defined(ROUNDED_CORNERS) || defined(STROKED) || defined(SHADOW)
in vec2 vPosInPixels;
#endif

flat in vec2 vHalfSizeInPixels;

flat in lowp vec4 vFillColor;
flat in lowp vec4 vStrokeColor;
flat in float vHalfStrokeWidth;
flat in vec4 vCornerRadii;

out lowp vec4 fragColor;

// ----------------------------------------------------------------------------
// Shadow source: https://madebyevan.com/shaders/fast-rounded-rectangle-shadows/
// License: CC0 (http://creativecommons.org/publicdomain/zero/1.0/)

#ifdef SHADOW

// A standard gaussian function, used for weighting samples
float gaussian(float x, float sigma) {
  const float pi = 3.141592653589793;
  return exp(-(x * x) / (2.0 * sigma * sigma)) / (sqrt(2.0 * pi) * sigma);
}

// This approximates the error function, needed for the gaussian integral
vec2 erf(vec2 x) {
  vec2 s = sign(x), a = abs(x);
  x = 1.0 + (0.278393 + (0.230389 + 0.078108 * (a * a)) * a) * a;
  x *= x;
  return s - s / (x * x);
}

// Return the blurred mask along the x dimension
float roundedBoxShadowX(float x, float y, float sigma, float corner, vec2 halfSize) {
  float delta = min(halfSize.y - corner - abs(y), 0.0);
  float curved = halfSize.x - corner + sqrt(max(0.0, corner * corner - delta * delta));
  vec2 integral = 0.5 + 0.5 * erf((x + vec2(-curved, curved)) * (sqrt(0.5) / sigma));
  return integral.y - integral.x;
}

// Return the mask for the shadow of a box from lower to upper
float roundedBoxShadow(vec2 lower, vec2 upper, vec2 point, float sigma, float corner) {
  // Center everything to make the math easier
  vec2 center = (lower + upper) * 0.5;
  vec2 halfSize = (upper - lower) * 0.5;
  point -= center;

  // The signal is only non-zero in a limited range, so don't waste samples
  float low = point.y - halfSize.y;
  float high = point.y + halfSize.y;
  float start = clamp(-3.0 * sigma, low, high);
  float end = clamp(3.0 * sigma, low, high);

  // Accumulate samples (we can get away with surprisingly few samples)
  float step = (end - start) / 4.0;
  float y = start + step * 0.5;
  float value = 0.0;
  for (int i = 0; i < 4; i++) {
    value += roundedBoxShadowX(point.x, point.y - y, sigma, corner, halfSize) * gaussian(y, sigma) * step;
    y += step;
  }

  return value;
}

// ----------------------------------------------------------------------------

#endif

// Source: https://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
float sdRoundedBox(vec2 p, vec2 b, vec4 r) {
    r.xy = p.x > 0.0 ? r.xy : r.zw;
    r.x  = p.y > 0.0 ? r.x  : r.y;
    vec2 q = abs(p) - b + r.x;
    return min(max(q.x, q.y), 0.0) + length(max(q, 0.0)) - r.x;
}

// Not a true SDF. Makes the corners of strokes sharp and is faster.
float sdSharpBox(vec2 p, vec2 b) {
    vec2 q = abs(p) - b;
    return max(q.x, q.y);
}

float diagonalPattern(vec2 uv, float spacing) {
    // Using 1.5 to approximate sqrt(2.0) to reduce aliasing artifacts.
    float divisor = spacing * vHalfStrokeWidth * 2.0 * 1.5;
    return abs(mod(uv.x - uv.y, divisor) - 0.5 * divisor) / 1.5;
}

float verticalPattern(float x, float spacing) {
    float divisor = spacing * vHalfStrokeWidth * 2.0;
    return abs(mod(x, divisor)) / 2.0;
}

float circle(vec2 p, float r) {
    return length(p) - r;
}

float masonryCirclePattern(vec2 uv, float spacing, float radius) {
    float halfSpacing = 0.5 * spacing;

    float row = floor(uv.y / spacing);
    float shift = mod(row, 2.0) * halfSpacing;

    vec2 shifted = vec2(uv.x + shift, uv.y + halfSpacing);
    vec2 cell = mod(shifted + 0.5 * spacing, spacing) - halfSpacing;

    return abs(circle(cell, radius));
}

/**
 * Patterns:
 * 0  none
 * 1  diagonal (/)
 * 2  antiDiagonal (\\)
 * 3  cross (X)
 * 4  vertical (|)
 * 5  horizontal (-)
 * 6  grid (+)
 * 7  dots (.)
 * 8  rings (o)
 * 9  ringsLarge (O)
 */
float pattern() {
#ifdef STROKED
    int patternType = uHatchPattern;
    vec2 uv = vPosInPixels;
    float spacing = 4.0;

    switch (patternType) {
        case 1:
            return diagonalPattern(vec2(uv.x, -uv.y), spacing);
        case 2:
            return diagonalPattern(uv, spacing);
        case 3:
            return min(
                diagonalPattern(uv, spacing),
                diagonalPattern(vec2(uv.x, -uv.y), spacing)
            );
        case 4:
            return verticalPattern(uv.x, spacing);
        case 5:
            return verticalPattern(uv.y, spacing);
        case 6:
            return min(
                verticalPattern(uv.x, spacing),
                verticalPattern(uv.y, spacing)
            );
        case 7:
        case 8:
        case 9: {
            float spacing = vHalfStrokeWidth * 14.0;
            float radius = spacing * (
                patternType == 8 ? 0.2 :
                patternType == 9 ? 0.35 :
                0.07
            );
            return masonryCirclePattern(uv, spacing, radius);
        }
        default:
            break;
    }
#endif
    return 1.0 / 0.0; // Infinity
}

void main(void) {

#if defined(ROUNDED_CORNERS) || defined(STROKED) || defined(SHADOW)
#ifdef ROUNDED_CORNERS
    // Distance from rectangle's edge in pixels. Negative inside the rectangle.
    float d = sdRoundedBox(vPosInPixels, vHalfSizeInPixels, vCornerRadii);
#else
    float d = sdSharpBox(vPosInPixels, vHalfSizeInPixels);
#endif

    vec4 backgroundColor = vec4(0.0, 0.0, 0.0, 0.0);

#ifdef SHADOW
    float maxCornerRadius = max(vCornerRadii.x, max(vCornerRadii.y, max(vCornerRadii.z, vCornerRadii.w)));

    float shadow = 0.0;
    // Only calculate shadow for the region outside the stroke.
    if (d >= vHalfStrokeWidth - 1.0 && uShadowOpacity > 0.0) {
        shadow = roundedBoxShadow(
            -vHalfSizeInPixels - vHalfStrokeWidth,
            vHalfSizeInPixels + vHalfStrokeWidth,
            vPosInPixels - vec2(uShadowOffsetX, -uShadowOffsetY),
            max(uShadowBlur / 2.5, 0.25),
            maxCornerRadius + vHalfStrokeWidth
        ) * uShadowOpacity * uViewOpacity;
    }
    backgroundColor = vec4(uShadowColor * shadow, shadow);
#endif

    if (vHalfStrokeWidth > 0.0 && uHatchPattern > 0) {
        d = max(d, -pattern());
    }

    fragColor = distanceToColor(
        d,
        vFillColor,
        vStrokeColor,
        backgroundColor,
        vHalfStrokeWidth
    );

    if (uPickingEnabled) {
        if (d < vHalfStrokeWidth) {
            fragColor = vPickingColor;
        }
    } else if (fragColor.a == 0.0) {
        discard;
    }
#else
    // The trivial, non-decorated case
    fragColor = vFillColor;
    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
#endif
}
`,B4=`layout(std140) uniform Mark {
    /** Minimum size (width, height) of the displayed rectangle in pixels */
    uniform float uMinWidth;
    uniform float uMinHeight;

    /** Minimum opacity for the size clamping */
    uniform float uMinOpacity;

    uniform float uCornerRadiusTopRight;
    uniform float uCornerRadiusBottomRight;
    uniform float uCornerRadiusTopLeft;
    uniform float uCornerRadiusBottomLeft;

    uniform int uHatchPattern;

    uniform vec3 uShadowColor;
    uniform float uShadowOpacity;
    uniform float uShadowBlur;
    uniform float uShadowOffsetX;
    uniform float uShadowOffsetY;

#pragma markUniforms
};
`,NC=1e4;class v4{constructor(t){D(this,Ws);D(this,Qc,!1);this.size=t,this.arrays={},this.pushers=[],this.dataUpdaters=[],this.vertexCount=0}configure(){if(C(this,Qc))throw new Error("Already configured!");T(this,Ws,ub).call(this),T(this,Ws,fb).call(this),F(this,Qc,!0)}addConverter(t,e){const r=this.createUpdater(t,e.numComponents||1,e.targetArrayType??Float32Array,e.arrayReference),i=e.f;this.dataUpdaters.push(e.arrayReference?s=>r(i(s)):s=>r(i(s)))}createUpdater(t,e,r=Float32Array,i=void 0){if(!ft(this.size))throw new Error("The number of vertices must be defined!");let s,o,a=0;const l=new r(this.size*e);if(this.arrays[t]={data:l,numComponents:e},e==1){let c=0;const u=f=>{c=+f};s=()=>{l[a++]=c},o=u}else{let c=i??[0];const u=i?f=>{}:f=>{c=f};switch(e){case 1:break;case 2:s=()=>{l[a++]=c[0],l[a++]=c[1]},o=u;break;case 3:s=()=>{l[a++]=c[0],l[a++]=c[1],l[a++]=c[2]},o=u;break;case 4:s=()=>{l[a++]=c[0],l[a++]=c[1],l[a++]=c[2],l[a++]=c[3]},o=u;break;default:throw new Error("Invalid numComponents: "+e)}}return this.pushers.push(s),o}pushAll(){throw new Error("Call configure() first!")}updateFromDatum(t){throw new Error("Call configure() first!")}pushFromDatum(t){this.updateFromDatum(t),this.pushAll()}}Qc=new WeakMap,Ws=new WeakSet,ub=function(){if(this.size>NC){const t=this.pushers.map((r,i)=>`const p${i} = that.pushers[${i}];`).join(`
`),e=this.pushers.map((r,i)=>`  p${i}();`).join(`
`);this.pushAll=new Function("that",`${t}
return function unrolledPushAll() {
${e}
  that.vertexCount++;
};`)(this)}else this.pushAll=()=>{for(let t=0;t<this.pushers.length;t++)this.pushers[t]();this.vertexCount++}},fb=function(){if(this.size>NC){const t=this.dataUpdaters.map((r,i)=>`const u${i} = that.dataUpdaters[${i}];`).join(`
`),e=this.dataUpdaters.map((r,i)=>`  u${i}(datum);`).join(`
`);this.updateFromDatum=new Function("that","datum",`${t}
return function unrolledUpdateFromDatum(datum) {
${e}
};`)(this)}else this.updateFromDatum=t=>{for(let e=0;e<this.dataUpdaters.length;e++)this.dataUpdaters[e](t)}};const us=5,Eh=127;function bh(n){const t=[];for(let d=0;d<=Eh;d++)t.push(void 0);const e=new Map;for(const d of n.chars)d.id<=Eh?t[d.id]=d:e.set(d.id,d);const r=8722;e.has(r)||e.set(r,t[45]);function i(d){return(d<=Eh?t[d]:e.get(d))||t[63]}function s(d){return i(d.charCodeAt(0))}const o=n.common.base,a=s("x"),l=s("X"),c=s("q"),u=a.height-us*2,f=l.height-us*2,h=c.height-a.height+c.yoffset-a.yoffset;function A(d,g=1){let m=0;for(let p=0;p<d.length;p++)m+=i(d.charCodeAt(p)).xadvance;return m/o*g}return{measureWidth:A,getCharByCode:i,getChar:s,xHeight:u,capHeight:f,descent:h,common:n.common}}const TC=2**31-1,Q4=-2147483648;function S4(n,t,e,r=e){const i=new Array(n);i.fill(TC);let s=Q4,o=-1/0,a=!1;const l=new Array(n);l.fill(0);const c=t[0],f=(t[1]-t[0])/n,h=(p,w)=>{const I=(p-c)/f,y=Math.floor(I);return ts(w&&y==I?y-1:y,0,n-1)};function A(p,w,I){if(a)return;if(w>s)s=w;else{a=!0;return}const y=e(p);if(y<o){a=!0;return}o=y;const b=h(y,!1);i[b]>w&&(i[b]=w),l[b]<I&&(l[b]=I)}function d(p,w,I){if(a)return;if(w>s)s=w;else{a=!0,console.debug("Items (vertices) are not ordered properly. Disabling binned index.");return}const y=e(p),b=r(p);if(y<o){a=!0;return}else if(b<y){a=!0;return}o=y;const B=h(y,!1),E=h(b,!0);for(let Q=B;Q<=E;Q++)i[Q]>w&&(i[Q]=w),l[Q]<I&&(l[Q]=I)}const g=(p,w,I=[0,0])=>{const y=h(p,!1),b=h(w,!0),B=i[y],E=Math.max(l[b],B);return I[0]=B,I[1]=E,I},m=()=>{if(a)return;for(let w=1;w<l.length;w++)l[w]<l[w-1]&&(l[w]=l[w-1]);let p=!0;for(let w=i.length-1;w>0;w--)p&&i[w]==TC?(i[w]=l[w],p=!1):i[w-1]>i[w]&&(i[w-1]=i[w]);return g};return A.getIndex=m,d.getIndex=m,e==r?A:d}function fn(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n);break}return this}function ur(n,t){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Bh=Symbol("implicit");function vh(){var n=new Sn,t=[],e=[],r=Bh;function i(s){let o=n.get(s);if(o===void 0){if(r!==Bh)return r;n.set(s,o=t.push(s)-1)}return e[o%e.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],n=new Sn;for(const o of s)n.has(o)||n.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(e=Array.from(s),i):e.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return vh(t,e).unknown(r)},fn.apply(i,arguments),i}function fs(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function Na(n,t){var e=Object.create(n.prototype);for(var r in t)e[r]=t[r];return e}function fr(){}var ri=.7,As=1/ri,hs="\\s*([+-]?\\d+)\\s*",Ta="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",An="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",D4=/^#([0-9a-f]{3,8})$/,k4=new RegExp(`^rgb\\(${hs},${hs},${hs}\\)$`),F4=new RegExp(`^rgb\\(${An},${An},${An}\\)$`),M4=new RegExp(`^rgba\\(${hs},${hs},${hs},${Ta}\\)$`),R4=new RegExp(`^rgba\\(${An},${An},${An},${Ta}\\)$`),N4=new RegExp(`^hsl\\(${Ta},${An},${An}\\)$`),T4=new RegExp(`^hsla\\(${Ta},${An},${An},${Ta}\\)$`),PC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fs(fr,Ar,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:LC,formatHex:LC,formatHex8:P4,formatHsl:L4,formatRgb:OC,toString:OC});function LC(){return this.rgb().formatHex()}function P4(){return this.rgb().formatHex8()}function L4(){return _C(this).formatHsl()}function OC(){return this.rgb().formatRgb()}function Ar(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=D4.exec(n))?(e=t[1].length,t=parseInt(t[1],16),e===6?UC(t):e===3?new Je(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?Qu(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?Qu(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=k4.exec(n))?new Je(t[1],t[2],t[3],1):(t=F4.exec(n))?new Je(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=M4.exec(n))?Qu(t[1],t[2],t[3],t[4]):(t=R4.exec(n))?Qu(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=N4.exec(n))?HC(t[1],t[2]/100,t[3]/100,1):(t=T4.exec(n))?HC(t[1],t[2]/100,t[3]/100,t[4]):PC.hasOwnProperty(n)?UC(PC[n]):n==="transparent"?new Je(NaN,NaN,NaN,0):null}function UC(n){return new Je(n>>16&255,n>>8&255,n&255,1)}function Qu(n,t,e,r){return r<=0&&(n=t=e=NaN),new Je(n,t,e,r)}function Qh(n){return n instanceof fr||(n=Ar(n)),n?(n=n.rgb(),new Je(n.r,n.g,n.b,n.opacity)):new Je}function Su(n,t,e,r){return arguments.length===1?Qh(n):new Je(n,t,e,r??1)}function Je(n,t,e,r){this.r=+n,this.g=+t,this.b=+e,this.opacity=+r}fs(Je,Su,Na(fr,{brighter(n){return n=n==null?As:Math.pow(As,n),new Je(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?ri:Math.pow(ri,n),new Je(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Je(ii(this.r),ii(this.g),ii(this.b),Du(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:GC,formatHex:GC,formatHex8:O4,formatRgb:zC,toString:zC}));function GC(){return`#${si(this.r)}${si(this.g)}${si(this.b)}`}function O4(){return`#${si(this.r)}${si(this.g)}${si(this.b)}${si((isNaN(this.opacity)?1:this.opacity)*255)}`}function zC(){const n=Du(this.opacity);return`${n===1?"rgb(":"rgba("}${ii(this.r)}, ${ii(this.g)}, ${ii(this.b)}${n===1?")":`, ${n})`}`}function Du(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function ii(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function si(n){return n=ii(n),(n<16?"0":"")+n.toString(16)}function HC(n,t,e,r){return r<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new Xt(n,t,e,r)}function _C(n){if(n instanceof Xt)return new Xt(n.h,n.s,n.l,n.opacity);if(n instanceof fr||(n=Ar(n)),!n)return new Xt;if(n instanceof Xt)return n;n=n.rgb();var t=n.r/255,e=n.g/255,r=n.b/255,i=Math.min(t,e,r),s=Math.max(t,e,r),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(e-r)/a+(e<r)*6:e===s?o=(r-t)/a+2:o=(t-e)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Xt(o,a,l,n.opacity)}function Sh(n,t,e,r){return arguments.length===1?_C(n):new Xt(n,t,e,r??1)}function Xt(n,t,e,r){this.h=+n,this.s=+t,this.l=+e,this.opacity=+r}fs(Xt,Sh,Na(fr,{brighter(n){return n=n==null?As:Math.pow(As,n),new Xt(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?ri:Math.pow(ri,n),new Xt(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*t,i=2*e-r;return new Je(Dh(n>=240?n-240:n+120,i,r),Dh(n,i,r),Dh(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Xt(VC(this.h),ku(this.s),ku(this.l),Du(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Du(this.opacity);return`${n===1?"hsl(":"hsla("}${VC(this.h)}, ${ku(this.s)*100}%, ${ku(this.l)*100}%${n===1?")":`, ${n})`}`}}));function VC(n){return n=(n||0)%360,n<0?n+360:n}function ku(n){return Math.max(0,Math.min(1,n||0))}function Dh(n,t,e){return(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)*255}const YC=Math.PI/180,JC=180/Math.PI,Fu=18,qC=.96422,KC=1,jC=.82521,WC=4/29,ds=6/29,XC=3*ds*ds,U4=ds*ds*ds;function ZC(n){if(n instanceof hn)return new hn(n.l,n.a,n.b,n.opacity);if(n instanceof Pn)return $C(n);n instanceof Je||(n=Qh(n));var t=Nh(n.r),e=Nh(n.g),r=Nh(n.b),i=Fh((.2225045*t+.7168786*e+.0606169*r)/KC),s,o;return t===e&&e===r?s=o=i:(s=Fh((.4360747*t+.3850649*e+.1430804*r)/qC),o=Fh((.0139322*t+.0971045*e+.7141733*r)/jC)),new hn(116*i-16,500*(s-i),200*(i-o),n.opacity)}function kh(n,t,e,r){return arguments.length===1?ZC(n):new hn(n,t,e,r??1)}function hn(n,t,e,r){this.l=+n,this.a=+t,this.b=+e,this.opacity=+r}fs(hn,kh,Na(fr,{brighter(n){return new hn(this.l+Fu*(n??1),this.a,this.b,this.opacity)},darker(n){return new hn(this.l-Fu*(n??1),this.a,this.b,this.opacity)},rgb(){var n=(this.l+16)/116,t=isNaN(this.a)?n:n+this.a/500,e=isNaN(this.b)?n:n-this.b/200;return t=qC*Mh(t),n=KC*Mh(n),e=jC*Mh(e),new Je(Rh(3.1338561*t-1.6168667*n-.4906146*e),Rh(-.9787684*t+1.9161415*n+.033454*e),Rh(.0719453*t-.2289914*n+1.4052427*e),this.opacity)}}));function Fh(n){return n>U4?Math.pow(n,1/3):n/XC+WC}function Mh(n){return n>ds?n*n*n:XC*(n-WC)}function Rh(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function Nh(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function G4(n){if(n instanceof Pn)return new Pn(n.h,n.c,n.l,n.opacity);if(n instanceof hn||(n=ZC(n)),n.a===0&&n.b===0)return new Pn(NaN,0<n.l&&n.l<100?0:NaN,n.l,n.opacity);var t=Math.atan2(n.b,n.a)*JC;return new Pn(t<0?t+360:t,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity)}function Th(n,t,e,r){return arguments.length===1?G4(n):new Pn(n,t,e,r??1)}function Pn(n,t,e,r){this.h=+n,this.c=+t,this.l=+e,this.opacity=+r}function $C(n){if(isNaN(n.h))return new hn(n.l,0,0,n.opacity);var t=n.h*YC;return new hn(n.l,Math.cos(t)*n.c,Math.sin(t)*n.c,n.opacity)}fs(Pn,Th,Na(fr,{brighter(n){return new Pn(this.h,this.c,this.l+Fu*(n??1),this.opacity)},darker(n){return new Pn(this.h,this.c,this.l-Fu*(n??1),this.opacity)},rgb(){return $C(this).rgb()}}));var e1=-.14861,Ph=1.78277,Lh=-.29227,Mu=-.90649,Pa=1.97294,t1=Pa*Mu,n1=Pa*Ph,r1=Ph*Lh-Mu*e1;function z4(n){if(n instanceof oi)return new oi(n.h,n.s,n.l,n.opacity);n instanceof Je||(n=Qh(n));var t=n.r/255,e=n.g/255,r=n.b/255,i=(r1*r+t1*t-n1*e)/(r1+t1-n1),s=r-i,o=(Pa*(e-i)-Lh*s)/Mu,a=Math.sqrt(o*o+s*s)/(Pa*i*(1-i)),l=a?Math.atan2(o,s)*JC-120:NaN;return new oi(l<0?l+360:l,a,i,n.opacity)}function Oh(n,t,e,r){return arguments.length===1?z4(n):new oi(n,t,e,r??1)}function oi(n,t,e,r){this.h=+n,this.s=+t,this.l=+e,this.opacity=+r}fs(oi,Oh,Na(fr,{brighter(n){return n=n==null?As:Math.pow(As,n),new oi(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?ri:Math.pow(ri,n),new oi(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=isNaN(this.h)?0:(this.h+120)*YC,t=+this.l,e=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(n),i=Math.sin(n);return new Je(255*(t+e*(e1*r+Ph*i)),255*(t+e*(Lh*r+Mu*i)),255*(t+e*(Pa*r)),this.opacity)}}));function i1(n,t,e,r,i){var s=n*n,o=s*n;return((1-3*n+3*s-o)*t+(4-6*s+3*o)*e+(1+3*n+3*s-3*o)*r+o*i)/6}function s1(n){var t=n.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,t-1):Math.floor(e*t),i=n[r],s=n[r+1],o=r>0?n[r-1]:2*i-s,a=r<t-1?n[r+2]:2*s-i;return i1((e-r/t)*t,o,i,s,a)}}function o1(n){var t=n.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*t),i=n[(r+t-1)%t],s=n[r%t],o=n[(r+1)%t],a=n[(r+2)%t];return i1((e-r/t)*t,i,s,o,a)}}const Ru=n=>()=>n;function a1(n,t){return function(e){return n+e*t}}function H4(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(r){return Math.pow(n+r*t,e)}}function Nu(n,t){var e=t-n;return e?a1(n,e>180||e<-180?e-360*Math.round(e/360):e):Ru(isNaN(n)?t:n)}function _4(n){return(n=+n)==1?qe:function(t,e){return e-t?H4(t,e,n):Ru(isNaN(t)?e:t)}}function qe(n,t){var e=t-n;return e?a1(n,e):Ru(isNaN(n)?t:n)}const Uh=(function n(t){var e=_4(t);function r(i,s){var o=e((i=Su(i)).r,(s=Su(s)).r),a=e(i.g,s.g),l=e(i.b,s.b),c=qe(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=n,r})(1);function c1(n){return function(t){var e=t.length,r=new Array(e),i=new Array(e),s=new Array(e),o,a;for(o=0;o<e;++o)a=Su(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=n(r),i=n(i),s=n(s),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=s(l),a+""}}}var V4=c1(s1),Y4=c1(o1);function Gh(n,t){t||(t=[]);var e=n?Math.min(t.length,n.length):0,r=t.slice(),i;return function(s){for(i=0;i<e;++i)r[i]=n[i]*(1-s)+t[i]*s;return r}}function l1(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function J4(n,t){return(l1(t)?Gh:u1)(n,t)}function u1(n,t){var e=t?t.length:0,r=n?Math.min(e,n.length):0,i=new Array(r),s=new Array(e),o;for(o=0;o<r;++o)i[o]=hr(n[o],t[o]);for(;o<e;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function f1(n,t){var e=new Date;return n=+n,t=+t,function(r){return e.setTime(n*(1-r)+t*r),e}}function Zt(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function A1(n,t){var e={},r={},i;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in n?e[i]=hr(n[i],t[i]):r[i]=t[i];return function(s){for(i in e)r[i]=e[i](s);return r}}var zh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hh=new RegExp(zh.source,"g");function q4(n){return function(){return n}}function K4(n){return function(t){return n(t)+""}}function h1(n,t){var e=zh.lastIndex=Hh.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(n=n+"",t=t+"";(r=zh.exec(n))&&(i=Hh.exec(t));)(s=i.index)>e&&(s=t.slice(e,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Zt(r,i)})),e=Hh.lastIndex;return e<t.length&&(s=t.slice(e),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?K4(l[0].x):q4(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function hr(n,t){var e=typeof t,r;return t==null||e==="boolean"?Ru(t):(e==="number"?Zt:e==="string"?(r=Ar(t))?(t=r,Uh):h1:t instanceof Ar?Uh:t instanceof Date?f1:l1(t)?Gh:Array.isArray(t)?u1:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?A1:Zt)(n,t)}function j4(n){var t=n.length;return function(e){return n[Math.max(0,Math.min(t-1,Math.floor(e*t)))]}}function W4(n,t){var e=Nu(+n,+t);return function(r){var i=e(r);return i-360*Math.floor(i/360)}}function La(n,t){return n=+n,t=+t,function(e){return Math.round(n*(1-e)+t*e)}}var d1=180/Math.PI,_h={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function g1(n,t,e,r,i,s){var o,a,l;return(o=Math.sqrt(n*n+t*t))&&(n/=o,t/=o),(l=n*e+t*r)&&(e-=n*l,r-=t*l),(a=Math.sqrt(e*e+r*r))&&(e/=a,r/=a,l/=a),n*r<t*e&&(n=-n,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,n)*d1,skewX:Math.atan(l)*d1,scaleX:o,scaleY:a}}var Tu;function X4(n){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return t.isIdentity?_h:g1(t.a,t.b,t.c,t.d,t.e,t.f)}function Z4(n){return n==null||(Tu||(Tu=document.createElementNS("http://www.w3.org/2000/svg","g")),Tu.setAttribute("transform",n),!(n=Tu.transform.baseVal.consolidate()))?_h:(n=n.matrix,g1(n.a,n.b,n.c,n.d,n.e,n.f))}function p1(n,t,e,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,f,h,A,d){if(c!==f||u!==h){var g=A.push("translate(",null,t,null,e);d.push({i:g-4,x:Zt(c,f)},{i:g-2,x:Zt(u,h)})}else(f||h)&&A.push("translate("+f+t+h+e)}function o(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Zt(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(c,u,f,h){c!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Zt(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function l(c,u,f,h,A,d){if(c!==f||u!==h){var g=A.push(i(A)+"scale(",null,",",null,")");d.push({i:g-4,x:Zt(c,f)},{i:g-2,x:Zt(u,h)})}else(f!==1||h!==1)&&A.push(i(A)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=n(c),u=n(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,h),o(c.rotate,u.rotate,f,h),a(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(A){for(var d=-1,g=h.length,m;++d<g;)f[(m=h[d]).i]=m.x(A);return f.join("")}}}var $4=p1(X4,"px, ","px)","deg)"),e8=p1(Z4,", ",")",")"),t8=1e-12;function m1(n){return((n=Math.exp(n))+1/n)/2}function n8(n){return((n=Math.exp(n))-1/n)/2}function r8(n){return((n=Math.exp(2*n))-1)/(n+1)}const i8=(function n(t,e,r){function i(s,o){var a=s[0],l=s[1],c=s[2],u=o[0],f=o[1],h=o[2],A=u-a,d=f-l,g=A*A+d*d,m,p;if(g<t8)p=Math.log(h/c)/t,m=function(E){return[a+E*A,l+E*d,c*Math.exp(t*E*p)]};else{var w=Math.sqrt(g),I=(h*h-c*c+r*g)/(2*c*e*w),y=(h*h-c*c-r*g)/(2*h*e*w),b=Math.log(Math.sqrt(I*I+1)-I),B=Math.log(Math.sqrt(y*y+1)-y);p=(B-b)/t,m=function(E){var Q=E*p,k=m1(b),S=c/(e*w)*(k*r8(t*Q+b)-n8(b));return[a+S*A,l+S*d,c*k/m1(t*Q+b)]}}return m.duration=p*1e3*t/Math.SQRT2,m}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return n(o,a,l)},i})(Math.SQRT2,2,4);function C1(n){return function(t,e){var r=n((t=Sh(t)).h,(e=Sh(e)).h),i=qe(t.s,e.s),s=qe(t.l,e.l),o=qe(t.opacity,e.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const s8=C1(Nu);var o8=C1(qe);function a8(n,t){var e=qe((n=kh(n)).l,(t=kh(t)).l),r=qe(n.a,t.a),i=qe(n.b,t.b),s=qe(n.opacity,t.opacity);return function(o){return n.l=e(o),n.a=r(o),n.b=i(o),n.opacity=s(o),n+""}}function y1(n){return function(t,e){var r=n((t=Th(t)).h,(e=Th(e)).h),i=qe(t.c,e.c),s=qe(t.l,e.l),o=qe(t.opacity,e.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const c8=y1(Nu);var l8=y1(qe);function w1(n){return(function t(e){e=+e;function r(i,s){var o=n((i=Oh(i)).h,(s=Oh(s)).h),a=qe(i.s,s.s),l=qe(i.l,s.l),c=qe(i.opacity,s.opacity);return function(u){return i.h=o(u),i.s=a(u),i.l=l(Math.pow(u,e)),i.opacity=c(u),i+""}}return r.gamma=t,r})(1)}const u8=w1(Nu);var f8=w1(qe);function Vh(n,t){t===void 0&&(t=n,n=hr);for(var e=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);e<r;)s[e]=n(i,i=t[++e]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function A8(n,t){for(var e=new Array(t),r=0;r<t;++r)e[r]=n(r/(t-1));return e}const h8=Object.freeze(Object.defineProperty({__proto__:null,interpolate:hr,interpolateArray:J4,interpolateBasis:s1,interpolateBasisClosed:o1,interpolateCubehelix:u8,interpolateCubehelixLong:f8,interpolateDate:f1,interpolateDiscrete:j4,interpolateHcl:c8,interpolateHclLong:l8,interpolateHsl:s8,interpolateHslLong:o8,interpolateHue:W4,interpolateLab:a8,interpolateNumber:Zt,interpolateNumberArray:Gh,interpolateObject:A1,interpolateRgb:Uh,interpolateRgbBasis:V4,interpolateRgbBasisClosed:Y4,interpolateRound:La,interpolateString:h1,interpolateTransformCss:$4,interpolateTransformSvg:e8,interpolateZoom:i8,piecewise:Vh,quantize:A8},Symbol.toStringTag,{value:"Module"}));function d8(n){return function(){return n}}function Yh(n){return+n}var x1=[0,1];function It(n){return n}function Jh(n,t){return(t-=n=+n)?function(e){return(e-n)/t}:d8(isNaN(t)?NaN:.5)}function g8(n,t){var e;return n>t&&(e=n,n=t,t=e),function(r){return Math.max(n,Math.min(t,r))}}function p8(n,t,e){var r=n[0],i=n[1],s=t[0],o=t[1];return i<r?(r=Jh(i,r),s=e(o,s)):(r=Jh(r,i),s=e(s,o)),function(a){return s(r(a))}}function m8(n,t,e){var r=Math.min(n.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Jh(n[o],n[o+1]),s[o]=e(t[o],t[o+1]);return function(a){var l=Zn(n,a,1,r)-1;return s[l](i[l](a))}}function Oa(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function Pu(){var n=x1,t=x1,e=hr,r,i,s,o=It,a,l,c;function u(){var h=Math.min(n.length,t.length);return o!==It&&(o=g8(n[0],n[h-1])),a=h>2?m8:p8,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=a(n.map(r),t,e)))(r(o(h)))}return f.invert=function(h){return o(i((c||(c=a(t,n.map(r),Zt)))(h)))},f.domain=function(h){return arguments.length?(n=Array.from(h,Yh),u()):n.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),e=La,u()},f.clamp=function(h){return arguments.length?(o=h?!0:It,u()):o!==It},f.interpolate=function(h){return arguments.length?(e=h,u()):e},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,A){return r=h,i=A,u()}}function I1(){return Pu()(It,It)}function E1(n,t,e,r){var i=_r(n,t,e),s;switch(r=Wi(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(n),Math.abs(t));return r.precision==null&&!isNaN(s=g2(i,o))&&(r.precision=s),ip(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=p2(i,Math.max(Math.abs(n),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=d2(i))&&(r.precision=s-(r.type==="%")*2);break}}return Ze(r)}function ai(n){var t=n.domain;return n.ticks=function(e){var r=t();return Ml(r[0],r[r.length-1],e??10)},n.tickFormat=function(e,r){var i=t();return E1(i[0],i[i.length-1],e??10,r)},n.nice=function(e){e==null&&(e=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);u-- >0;){if(c=cA(o,a,e),c===l)return r[i]=o,r[s]=a,t(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return n},n}function b1(){var n=I1();return n.copy=function(){return Oa(n,b1())},fn.apply(n,arguments),ai(n)}function B1(n){var t;function e(r){return r==null||isNaN(r=+r)?t:r}return e.invert=e,e.domain=e.range=function(r){return arguments.length?(n=Array.from(r,Yh),e):n.slice()},e.unknown=function(r){return arguments.length?(t=r,e):t},e.copy=function(){return B1(n).unknown(t)},n=arguments.length?Array.from(n,Yh):[0,1],ai(e)}function v1(n,t){n=n.slice();var e=0,r=n.length-1,i=n[e],s=n[r],o;return s<i&&(o=e,e=r,r=o,o=i,i=s,s=o),n[e]=t.floor(i),n[r]=t.ceil(s),n}function Q1(n){return Math.log(n)}function S1(n){return Math.exp(n)}function C8(n){return-Math.log(-n)}function y8(n){return-Math.exp(-n)}function w8(n){return isFinite(n)?+("1e"+n):n<0?0:n}function x8(n){return n===10?w8:n===Math.E?Math.exp:t=>Math.pow(n,t)}function I8(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),t=>Math.log(t)/n)}function D1(n){return(t,e)=>-n(-t,e)}function qh(n){const t=n(Q1,S1),e=t.domain;let r=10,i,s;function o(){return i=I8(r),s=x8(r),e()[0]<0?(i=D1(i),s=D1(s),n(C8,y8)):n(Q1,S1),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(e(a),o()):e()},t.ticks=a=>{const l=e();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let h=i(c),A=i(u),d,g;const m=a==null?10:+a;let p=[];if(!(r%1)&&A-h<m){if(h=Math.floor(h),A=Math.ceil(A),c>0){for(;h<=A;++h)for(d=1;d<r;++d)if(g=h<0?d/s(-h):d*s(h),!(g<c)){if(g>u)break;p.push(g)}}else for(;h<=A;++h)for(d=r-1;d>=1;--d)if(g=h>0?d/s(-h):d*s(h),!(g<c)){if(g>u)break;p.push(g)}p.length*2<m&&(p=Ml(c,u,m))}else p=Ml(h,A,Math.min(A-h,m)).map(s);return f?p.reverse():p},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Wi(l)).precision==null&&(l.trim=!0),l=Ze(l)),a===1/0)return l;const c=Math.max(1,r*a/t.ticks().length);return u=>{let f=u/s(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=c?l(u):""}},t.nice=()=>e(v1(e(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function Kh(){const n=qh(Pu()).domain([1,10]);return n.copy=()=>Oa(n,Kh()).base(n.base()),fn.apply(n,arguments),n}function k1(n){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/n))}}function F1(n){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*n}}function jh(n){var t=1,e=n(k1(t),F1(t));return e.constant=function(r){return arguments.length?n(k1(t=+r),F1(t)):t},ai(e)}function M1(){var n=jh(Pu());return n.copy=function(){return Oa(n,M1()).constant(n.constant())},fn.apply(n,arguments)}function R1(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function E8(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function b8(n){return n<0?-n*n:n*n}function Wh(n){var t=n(It,It),e=1;function r(){return e===1?n(It,It):e===.5?n(E8,b8):n(R1(e),R1(1/e))}return t.exponent=function(i){return arguments.length?(e=+i,r()):e},ai(t)}function Xh(){var n=Wh(Pu());return n.copy=function(){return Oa(n,Xh()).exponent(n.exponent())},fn.apply(n,arguments),n}function B8(){return Xh.apply(null,arguments).exponent(.5)}function N1(){var n=[],t=[],e=[],r;function i(){var o=0,a=Math.max(1,t.length);for(e=new Array(a-1);++o<a;)e[o-1]=Zg(n,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[Zn(e,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?e[a-1]:n[0],a<e.length?e[a]:n[n.length-1]]},s.domain=function(o){if(!arguments.length)return n.slice();n=[];for(let a of o)a!=null&&!isNaN(a=+a)&&n.push(a);return n.sort(zr),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return e.slice()},s.copy=function(){return N1().domain(n).range(t).unknown(r)},fn.apply(s,arguments)}function T1(){var n=0,t=1,e=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[Zn(r,l,0,e)]:s}function a(){var l=-1;for(r=new Array(e);++l<e;)r[l]=((l+1)*t-(l-e)*n)/(e+1);return o}return o.domain=function(l){return arguments.length?([n,t]=l,n=+n,t=+t,a()):[n,t]},o.range=function(l){return arguments.length?(e=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[n,r[0]]:c>=e?[r[e-1],t]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return T1().domain([n,t]).range(i).unknown(s)},fn.apply(ai(o),arguments)}function P1(){var n=[.5],t=[0,1],e,r=1;function i(s){return s!=null&&s<=s?t[Zn(n,s,0,r)]:e}return i.domain=function(s){return arguments.length?(n=Array.from(s),r=Math.min(n.length,t.length-1),i):n.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(n.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[n[o-1],n[o]]},i.unknown=function(s){return arguments.length?(e=s,i):e},i.copy=function(){return P1().domain(n).range(t).unknown(e)},fn.apply(i,arguments)}function v8(n){return new Date(n)}function Q8(n){return n instanceof Date?+n:+new Date(+n)}function Zh(n,t,e,r,i,s,o,a,l,c){var u=I1(),f=u.invert,h=u.domain,A=c(".%L"),d=c(":%S"),g=c("%I:%M"),m=c("%I %p"),p=c("%a %d"),w=c("%b %d"),I=c("%B"),y=c("%Y");function b(B){return(l(B)<B?A:a(B)<B?d:o(B)<B?g:s(B)<B?m:r(B)<B?i(B)<B?p:w:e(B)<B?I:y)(B)}return u.invert=function(B){return new Date(f(B))},u.domain=function(B){return arguments.length?h(Array.from(B,Q8)):h().map(v8)},u.ticks=function(B){var E=h();return n(E[0],E[E.length-1],B??10)},u.tickFormat=function(B,E){return E==null?b:c(E)},u.nice=function(B){var E=h();return(!B||typeof B.range!="function")&&(B=t(E[0],E[E.length-1],B??10)),B?h(v1(E,B)):u},u.copy=function(){return Oa(u,Zh(n,t,e,r,i,s,o,a,l,c))},u}function S8(){return fn.apply(Zh(Q2,S2,sn,na,ea,$n,Ol,Pl,Mn,yA).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function D8(){return fn.apply(Zh(B2,v2,on,ra,ta,Vr,Ul,Ll,Mn,wA).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Lu(){var n=0,t=1,e,r,i,s,o=It,a=!1,l;function c(f){return f==null||isNaN(f=+f)?l:o(i===0?.5:(f=(s(f)-e)*i,a?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([n,t]=f,e=s(n=+n),r=s(t=+t),i=e===r?0:1/(r-e),c):[n,t]},c.clamp=function(f){return arguments.length?(a=!!f,c):a},c.interpolator=function(f){return arguments.length?(o=f,c):o};function u(f){return function(h){var A,d;return arguments.length?([A,d]=h,o=f(A,d),c):[o(0),o(1)]}}return c.range=u(hr),c.rangeRound=u(La),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return s=f,e=f(n),r=f(t),i=e===r?0:1/(r-e),c}}function dr(n,t){return t.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function $h(){var n=ai(Lu()(It));return n.copy=function(){return dr(n,$h())},ur.apply(n,arguments)}function L1(){var n=qh(Lu()).domain([1,10]);return n.copy=function(){return dr(n,L1()).base(n.base())},ur.apply(n,arguments)}function O1(){var n=jh(Lu());return n.copy=function(){return dr(n,O1()).constant(n.constant())},ur.apply(n,arguments)}function ed(){var n=Wh(Lu());return n.copy=function(){return dr(n,ed()).exponent(n.exponent())},ur.apply(n,arguments)}function k8(){return ed.apply(null,arguments).exponent(.5)}function Ou(){var n=0,t=.5,e=1,r=1,i,s,o,a,l,c=It,u,f=!1,h;function A(g){return isNaN(g=+g)?h:(g=.5+((g=+u(g))-s)*(r*g<r*s?a:l),c(f?Math.max(0,Math.min(1,g)):g))}A.domain=function(g){return arguments.length?([n,t,e]=g,i=u(n=+n),s=u(t=+t),o=u(e=+e),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,A):[n,t,e]},A.clamp=function(g){return arguments.length?(f=!!g,A):f},A.interpolator=function(g){return arguments.length?(c=g,A):c};function d(g){return function(m){var p,w,I;return arguments.length?([p,w,I]=m,c=Vh(g,[p,w,I]),A):[c(0),c(.5),c(1)]}}return A.range=d(hr),A.rangeRound=d(La),A.unknown=function(g){return arguments.length?(h=g,A):h},function(g){return u=g,i=g(n),s=g(t),o=g(e),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,A}}function U1(){var n=ai(Ou()(It));return n.copy=function(){return dr(n,U1())},ur.apply(n,arguments)}function G1(){var n=qh(Ou()).domain([.1,1,10]);return n.copy=function(){return dr(n,G1()).base(n.base())},ur.apply(n,arguments)}function z1(){var n=jh(Ou());return n.copy=function(){return dr(n,z1()).constant(n.constant())},ur.apply(n,arguments)}function td(){var n=Wh(Ou());return n.copy=function(){return dr(n,td()).exponent(n.exponent())},ur.apply(n,arguments)}function F8(){return td.apply(null,arguments).exponent(.5)}function dn(n){for(var t=n.length/6|0,e=new Array(t),r=0;r<t;)e[r]="#"+n.slice(r*6,++r*6);return e}const M8=dn("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),R8=dn("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),N8=dn("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),T8=dn("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),P8=dn("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),L8=dn("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),O8=dn("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),U8=dn("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),G8=dn("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),z8=dn("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function nd(n,t,e){const r=n-t+e*2;return n?r>0?r:1:0}const H8="identity",gs="linear",gr="log",Ua="pow",Ga="sqrt",Uu="symlog",H1="time",_1="utc",gn="sequential",ps="diverging",rd="quantile",V1="quantize",Y1="threshold",id="ordinal",sd="point",J1="band",od="bin-ordinal",Ge="continuous",za="discrete",Ha="discretizing",Pt="interpolating",q1="temporal";function _8(n){return function(t){let e=t[0],r=t[1],i;return r<e&&(i=e,e=r,r=i),[n.invert(e),n.invert(r)]}}function V8(n){return function(t){const e=n.range();let r=t[0],i=t[1],s=-1,o,a,l,c;for(i<r&&(a=r,r=i,i=a),l=0,c=e.length;l<c;++l)e[l]>=r&&e[l]<=i&&(s<0&&(s=l),o=l);if(!(s<0))return r=n.invertExtent(e[s]),i=n.invertExtent(e[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function ad(){const n=vh().unknown(void 0),t=n.domain,e=n.range;let r=[0,1],i,s,o=!1,a=0,l=0,c=.5;delete n.unknown;function u(){const f=t().length,h=r[1]<r[0],A=r[1-h],d=nd(f,a,l);let g=r[h-0];i=(A-g)/(d||1),o&&(i=Math.floor(i)),g+=(A-g-i*(f-a))*c,s=i*(1-a),o&&(g=Math.round(g),s=Math.round(s));const m=Zo(f).map(p=>g+i*p);return e(h?m.reverse():m)}return n.domain=function(f){return arguments.length?(t(f),u()):t()},n.range=function(f){return arguments.length?(r=[+f[0],+f[1]],u()):r.slice()},n.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,u()},n.bandwidth=function(){return s},n.step=function(){return i},n.round=function(f){return arguments.length?(o=!!f,u()):o},n.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),a=l,u()):a},n.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),u()):a},n.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),u()):l},n.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),u()):c},n.invertRange=function(f){if(f[0]==null||f[1]==null)return;const h=r[1]<r[0],A=h?e().reverse():e(),d=A.length-1;let g=+f[0],m=+f[1],p,w,I;if(!(g!==g||m!==m)&&(m<g&&(I=g,g=m,m=I),!(m<A[0]||g>r[1-h])))return p=Math.max(0,Zn(A,g)-1),w=g===m?p:Zn(A,m)-1,g-A[p]>s+1e-10&&++p,h&&(I=p,p=d-w,w=d-I),p>w?void 0:t().slice(p,w+1)},n.invert=function(f){const h=n.invertRange([f,f]);return h&&h[0]},n.copy=function(){return ad().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(l).align(c)},u()}function K1(n){const t=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,n.copy=function(){return K1(t())},n}function Y8(){return K1(ad().paddingInner(1))}var J8=Array.prototype.map;function q8(n){return J8.call(n,Oo)}const K8=Array.prototype.slice;function j1(){let n=[],t=[];function e(r){return r==null||r!==r?void 0:t[(Zn(n,r)-1)%t.length]}return e.domain=function(r){return arguments.length?(n=q8(r),e):n.slice()},e.range=function(r){return arguments.length?(t=K8.call(r),e):t.slice()},e.tickFormat=function(r,i){return E1(n[0],qt(n),r??10,i)},e.copy=function(){return j1().domain(e.domain()).range(e.range())},e}const Gu=new Map,j8=Symbol("vega_scale");function W8(n){return n[j8]=!0,n}function X8(n,t,e){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?_8(s):s.invertExtent?V8(s):void 0),s.type=n,W8(s)};return r.metadata=vl(Kf(e)),r}function fe(n,t,e){return arguments.length>1?(Gu.set(n,X8(n,t,e)),this):Z8(n)?Gu.get(n):void 0}fe(H8,B1),fe(gs,b1,Ge),fe(gr,Kh,[Ge,gr]),fe(Ua,Xh,Ge),fe(Ga,B8,Ge),fe(Uu,M1,Ge),fe(H1,S8,[Ge,q1]),fe(_1,D8,[Ge,q1]),fe(gn,$h,[Ge,Pt]),fe(`${gn}-${gs}`,$h,[Ge,Pt]),fe(`${gn}-${gr}`,L1,[Ge,Pt,gr]),fe(`${gn}-${Ua}`,ed,[Ge,Pt]),fe(`${gn}-${Ga}`,k8,[Ge,Pt]),fe(`${gn}-${Uu}`,O1,[Ge,Pt]),fe(`${ps}-${gs}`,U1,[Ge,Pt]),fe(`${ps}-${gr}`,G1,[Ge,Pt,gr]),fe(`${ps}-${Ua}`,td,[Ge,Pt]),fe(`${ps}-${Ga}`,F8,[Ge,Pt]),fe(`${ps}-${Uu}`,z1,[Ge,Pt]),fe(rd,N1,[Ha,rd]),fe(V1,T1,Ha),fe(Y1,P1,Ha),fe(od,j1,[za,Ha]),fe(id,vh,za),fe(J1,ad,za),fe(sd,Y8,za);function Z8(n){return Gu.has(n)}function _a(n,t){const e=Gu.get(n);return e&&e.metadata[t]}function Ke(n){return _a(n,Ge)}function pr(n){return _a(n,za)}function ci(n){return _a(n,Ha)}function W1(n){return _a(n,gr)}function zu(n){return _a(n,Pt)}function $8(n,t){const e=t[0],r=qt(t)-e;return function(i){return n(e+i*r)}}function Hu(n,t,e){return Vh(X1(t||"rgb",e),n)}function eF(n,t){const e=new Array(t),r=t+1;for(let i=0;i<t;)e[i]=n(++i/r);return e}function X1(n,t){const e=h8[tF(n)];return t!=null&&e&&e.gamma?e.gamma(t):e}function tF(n){return"interpolate"+n.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const nF={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},rF={accent:R8,category10:M8,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:N8,observable10:T8,paired:P8,pastel1:L8,pastel2:O8,set1:U8,set2:G8,set3:z8,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function Z1(n){if(Xe(n))return n;const t=n.length/6|0,e=new Array(t);for(let r=0;r<t;)e[r]="#"+n.slice(r*6,++r*6);return e}function $1(n,t){for(const e in n)cd(e,t(n[e]))}const ey={};$1(rF,Z1),$1(nF,n=>Hu(Z1(n)));function cd(n,t){return n=n&&n.toLowerCase(),arguments.length>1?(ey[n]=t,this):ey[n]}function ld(){const n=t=>t;return n.invert=t=>t,n.copy=ld,n.invertRange=()=>{},n.type="null",n}class iF{constructor(t,e,r={}){this._container=t,this._sizeSource=e??(()=>({width:void 0,height:void 0})),this._shaderCache=new Map,this.rangeTextures=new WeakMap,this.selectionTextures=new WeakMap;const i=document.createElement("canvas");t.appendChild(i);const s=I4(i,{antialias:!0,depth:!1,premultipliedAlpha:!0,...r});if(!s)throw new Error("Unable to initialize WebGL. Your browser or machine may not support it.");if(!ns(s))throw new Error("Your web browser does not support WebGL 2.0. Chrome, Firefox, and Safari Tech Preview should work.");RC(s);const o=s.getExtension("WEBGL_provoking_vertex");o&&o.provokingVertexWEBGL(o.FIRST_VERTEX_CONVENTION_WEBGL),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),this.canvas=i,this.gl=s,this._pickingAttachmentOptions=[{format:s.RGBA,type:s.UNSIGNED_BYTE,minMag:s.LINEAR,wrap:s.CLAMP_TO_EDGE}],this._pickingBufferInfo=FC(s,this._pickingAttachmentOptions),s.bindFramebuffer(s.FRAMEBUFFER,null),this.adjustGl()}invalidateSize(){this._logicalCanvasSize=void 0,this.adjustGl()}compileShader(t,e){const r="#version 300 es",i="precision mediump float;";Xe(e)&&(e=e.join(`

`));const s=this.gl,o=e.replaceAll(/ {2,}|^\s*\/\/.*$/gm,"");let a=this._shaderCache.get(o);if(!a){const l=[r,i,e].join(`

`);a=s.createShader(t),s.shaderSource(a,l),s.compileShader(a),this._shaderCache.set(o,a)}return a}adjustGl(){const t=this.getLogicalCanvasSize();this.canvas.style.width=`${t.width}px`,this.canvas.style.height=`${t.height}px`;const e=this.getPhysicalCanvasSize(t);this.canvas.width=e.width,this.canvas.height=e.height,m4(this.gl,this._pickingBufferInfo,this._pickingAttachmentOptions)}finalize(){this.canvas.remove()}getPhysicalCanvasSize(t){const e=window.devicePixelRatio??1;return t=t||this.getLogicalCanvasSize(),{width:t.width*e,height:t.height*e}}getLogicalCanvasSize(){if(this._logicalCanvasSize)return this._logicalCanvasSize;const t=this._sizeSource(),e=window.getComputedStyle(this._container,null),r=t.width??this._container.clientWidth-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight),i=t.height??this._container.clientHeight-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom);return this._logicalCanvasSize={width:r,height:i},this._logicalCanvasSize}createRangeTexture(t,e=!1){const r=this.rangeTextures.get(t.getScale());if(!e&&r)return;function i(o,a){return pr(a.type)?a.domain().length:a.type=="threshold"?a.domain().length+1:a.type=="quantize"||a.type=="quantile"?o??4:o}const s=t.channel;if(rr(s)){const o=t.getScale(),a=o.props,l=o.range();let c;if(a.scheme)if(o.type=="threshold"&&l)c=ud(l,this.gl,o.domain().length,r);else{let u=Ce(a.scheme)?void 0:a.scheme.count;u=i(u,o),c=lF(a.scheme,this.gl,u,r)}else zu(o.type)||Ke(o.type)&&l.length>1?c=uF(l,a.interpolate,this.gl,r):c=ud(l,this.gl,o.domain().length,r);this.rangeTextures.set(o,c)}else{const o=t.getScale();if(o.type==="ordinal"||ci(o.type)){const a=eu(s)?um(s):c=>c,l=o.range();this.rangeTextures.set(o,fF(l.map(a),this.gl,o.domain().length,r))}}}createSelectionTexture(t,e=!0){if(!JA(t))throw new Error("Not a multi-point selection, cannot create texture");const r=Array.from(t.data.keys()),i=r.length>0?r.sort((l,c)=>l-c):[0],s=this.selectionTextures.get(t),o=this.gl,a=Va(this.gl,{level:0,minMag:o.NEAREST,format:o.RED_INTEGER,internalFormat:o.R32UI,height:1,width:i.length},new Uint32Array(i),e?s:!1);this.selectionTextures.set(t,a)}}function sF(n,t="",e=0){const r=/ERROR:\s*\d+:(\d+)/gi,i=[...t.matchAll(r)],s=new Map(i.map((o,a)=>{const l=parseInt(o[1]),c=i[a+1],u=c?c.index:t.length,f=t.substring(o.index,u);return[l-1,f]}));return n.split(`
`).map((o,a)=>{const l=s.get(a);return`${a+1+e}: ${o}${l?`

^^^ ${l}`:""}`}).join(`
`)}function oF(n,t,e){const r=n.createProgram();n.attachShader(r,t),n.attachShader(r,e),n.linkProgram(r);function i(){let s,o;if(!n.getProgramParameter(r,n.LINK_STATUS)){s=n.getProgramInfoLog(r);for(const l of[t,e])n.getShaderParameter(l,n.COMPILE_STATUS)||(s=n.getShaderInfoLog(l),o=sF(n.getShaderSource(l),s,0)+`
Error compiling: ${s}`,n.deleteShader(l));n.deleteProgram(r)}if(s)return{message:s,detail:o}}return{program:r,getProgramErrors:i}}function Va(n,t,e,r){return r?Km(n,r,e,t):r=Ma(n,{...t,src:e}),r}function aF(n,t,e,r){const{height:i,framebuffer:s}=t,o=new Uint8Array(4);return n.bindFramebuffer(n.FRAMEBUFFER,s),n.readPixels(e,i-r-1,1,1,n.RGBA,n.UNSIGNED_BYTE,o),n.bindFramebuffer(n.FRAMEBUFFER,null),o}function cF(n,t,e="image/png"){const{width:r,height:i}=t,s=new Uint8Array(r*i*4);n.bindFramebuffer(n.FRAMEBUFFER,t.framebuffer),n.readPixels(0,0,r,i,n.RGBA,n.UNSIGNED_BYTE,s),n.bindFramebuffer(n.FRAMEBUFFER,null);const o=document.createElement("canvas");o.width=r,o.height=i;const a=o.getContext("2d"),l=a.createImageData(r,i);for(let c=0;c<i;c++){const u=(i-1-c)*r*4,f=c*r*4;l.data.set(s.subarray(u,u+r*4),f)}return a.putImageData(l,0,0),o.toDataURL(e)}function lF(n,t,e,r){const i=Ce(n)?n:n.name,s=!Ce(n)&&n.extent||[0,1];if(e===void 0&&!Ce(n)&&(e=n.count),i){const o=cd(i);if(Ft(o)){const a=ty(o,{extent:s,count:e});return Va(t,{minMag:t.LINEAR,format:t.RGB,height:1,wrap:t.CLAMP_TO_EDGE},a,r)}else{if(Xe(o))return ud(o,t);throw new Error("Unknown scheme: "+i)}}}function uF(n,t="rgb",e,r){const i=Hu(n,Ce(t)?t:t.type,Ce(t)?void 0:t.gamma),s=ty(i);return Va(e,{minMag:e.LINEAR,format:e.RGB,height:1,wrap:e.CLAMP_TO_EDGE},s,r)}function fF(n,t,e,r){const i=Math.max(n.length,e||0),s=new Float32Array(i);for(let o=0;o<i;o++)s[o]=n[o%n.length];return Va(t,{minMag:t.NEAREST,format:t.RED,internalFormat:t.R32F,height:1},s,r)}function ud(n,t,e,r){const i=ny(n,e);return Va(t,{minMag:t.NEAREST,format:t.RGB,height:1},i,r)}function ty(n,{extent:t=[0,1],reverse:e=!1,count:r=256}={}){const i=t[0],s=Jl(t)-i,o=Zo(r).map(a=>a/(r-1)).map(a=>i+a/s).map(n);return e&&o.reverse(),ny(o)}function ny(n,t){const e=Math.max(n.length,t||0),r=new Uint8Array(e*3);for(let i=0;i<e;i++){const s=n[i%n.length],o=Ar(s);if(!o)throw new Error(`Invalid color "${s}" in the scheme ${JSON.stringify(n)}!`);const a=o.rgb();r[i*3+0]=a.r,r[i*3+1]=a.g,r[i*3+2]=a.b}return r}function fd(n){const t=Ar(n).rgb();return[t.r,t.g,t.b].map(e=>e/255)}const AF="attr_",hF="uDomain_",dF="range_",gF="accessor_",ry="scale_",pF="getScaled_",Ad="uRangeTexture_",_u="uParam_",Ya="checkSelection_",iy=3402823466e29;function mF(n){const t=n.match(/^(?:(\w+)-)?(\w+)$/);if(!t)throw new Error("Not a scale type: "+n);return{family:t[1]||"continuous",transform:t[2]}}function Ja(n,t){return`${gF}${n}_${t}`}function CF(n,t,e){let r;if(eu(n))r=li(um(n)(e));else if(Ce(e))if(rr(n))r=EF(e);else throw new Error(`String values are not supported on the "${n}" channel: ${e}`);else if(Uo(e))r=li(e?1:0);else if(e===null)if(rr(n))r=li([0,0,0]);else throw new Error(`null value is not supported on the "${n}" chanel.`);else r=li(e);const i=Ja(n,t),s=`
${r.type} ${i}() {
    // Constant value
    return ${r};
}`;return{channel:n,accessorGlsl:s,accessorFunctionName:i}}function yF(n,t){let e="float",r=l=>l;rr(n)&&(e="vec3",r=l=>fd(l));const i=`u${SF(n)}_${t}`,s=`    // Dynamic value
    uniform ${e} ${i};`,o=Ja(n,t);let a=`
${e} ${o}() {
    // Dynamic value
    return ${i};
}`;return{channel:n,uniformName:i,uniformGlsl:s,accessorGlsl:a,accessorFunctionName:o,adjuster:r}}function sy(n,t,e,r=[n]){const{attributeType:i}=ms(t,n),s=Cs(r),o=`in highp ${i} ${s};`,a=Ja(n,e),l=`
${i} ${a}() {
    return ${s};
}`;return{channel:n,attributeName:s,attributeGlsl:o,accessorGlsl:l,accessorFunctionName:a}}function wF(n,t,e){const{attributeType:r}=ms(t,n),i=Cs(n),s=`    uniform highp ${r} ${i};`,o=Ja(n,e),a=`
${r} ${o}() {
    return ${i};
}`;return{channel:n,uniformName:i,uniformGlsl:s,accessorGlsl:a,accessorFunctionName:o}}function xF(n,t,e){t??(t=ld());const r=Xr(n),i=hF+r,s=dF+r,{hp:o,attributeType:a}=ms(t,n),l=t.domain?t.domain().length:void 0;let c;const u=[];u.push(""),u.push("/".repeat(70)),u.push(`// Channel: ${n}`),u.push("");const{transform:f}=mF(t.type),h=(E,...Q)=>bF.apply(null,[E,"value",...Q]);let A;switch(f){case"linear":A=h("scaleLinear","domain",s);break;case"log":A=h("scaleLog","domain",s,t.base());break;case"symlog":A=h("scaleSymlog","domain",s,t.constant());break;case"pow":case"sqrt":A=h("scalePow","domain",s,t.exponent());break;case"index":case"locus":A=h("scaleBandHp","domain",s,t.paddingInner(),t.paddingOuter(),t.align(),e.band??.5);break;case"point":case"band":A=h("scaleBand","domain",s,t.paddingInner(),t.paddingOuter(),t.align(),e.band??.5);break;case"ordinal":case"null":case"identity":A=h("scaleIdentity");break;case"threshold":break;default:throw new Error(`Unsupported scale type: ${t.type}! ${n}: ${JSON.stringify(e)}`)}const d=hy(t,n);let g;if(d&&n==r){const E=t.props.range??[];if(it(E)||E.some(it)){if(d.length<1||d.length>4)throw new Error(`A range with ExprRefs must have 1-4 elements, not ${d.length}! Range: ${JSON.stringify(d)}`);g=`    uniform ${ay(d.length)} ${s};`}else if(d.length&&d.every(ft)){const Q=ly(d);u.push(`const ${Q.type} ${s} = ${Q};`)}}const m=cy(n);let p;if(rr(n)){const E=Ad+r;if(n==r&&u.push(`uniform sampler2D ${E};`),Ke(t.type))p=`getInterpolatedColor(${E}, transformed)`;else if(pr(t.type)||ci(t.type))p=`getDiscreteColor(${E}, int(transformed))`;else throw new Error("Problem with color scale!")}else if(t.type==="ordinal"||ci(t.type)){const E=Ad+r;n==r&&u.push(`uniform sampler2D ${E};`),p=`getDiscreteColor(${E}, int(transformed)).r`}const w=[],I=Ke(t.type)&&l>2,y=ci(t.type)||I;if(w.push("int slot = 0;"),y){const E=i;w.push(I?`while (slot < ${E}.length() - 2 && value >= ${E}[slot + 1]) { slot++; }`:`while (slot < ${E}.length() && value >= ${E}[slot]) { slot++; }`)}const b=Ke(t.type)||ci(t.type)||["band","point"].includes(t.type);if(A){const E=i;b&&(o?w.push(`vec3 domain = ${E};`):w.push(`vec2 domain = vec2(${E}[slot], ${E}[slot + 1]);`)),w.push(`float transformed = ${A};`),I&&w.push(`transformed = (float(slot) + transformed) / (float(${E}.length() - 1));`)}else w.push("float transformed = float(slot);");"clamp"in t&&t.clamp()&&w.push(`transformed = clampToRange(transformed, ${ly(d)});`),w.push(`return ${p??"transformed"};`),u.push(`
${m} ${ry}${n}(${a} value) {
${w.map(E=>`    ${E}
`).join("")}
}`);const B=u.join(`
`);if(b&&n==r){const E=Ke(t.type)||ci(t.type)?l:2;c=o?`    highp vec3 ${i};`:`    mediump float ${i}[${E}];`}return{glsl:B,domainUniformName:i,domainUniform:c,rangeUniformName:s,rangeUniform:g}}function IF(n,t){const e=cy(n),r=[],i=[];for(let s=0;s<t.length;s++){const o=t[s],a=Ja(n,s),{param:l,empty:c}=o.predicate;r.push(l?`${Ya}${l}(${!!c})`:null),i.push(o.scaleChannel?`return ${ry}${n}(${a}());`:`return ${a}();`)}return`${e} ${pF}${n}() {
${DF(r,i)}
}

#define ${n}_DEFINED`}function oy(n){if(!ft(n))throw new Error(`Not a number: ${n}`);if(n==1/0)return""+iy;if(n==-1/0)return""+-iy;{let t=`${n}`;return/^(-)?\d+$/.test(t)&&(t+=".0"),t}}function li(n){typeof n=="number"&&(n=[n]);const t=n.length;if(t<1||t>4)throw new Error("Invalid number of components: "+t);const e=ay(t),r=`${e}(${n.map(oy).join(", ")})`;return Object.assign(r,{type:e,numComponents:t})}function ay(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error("Invalid number of components: "+n)}}function cy(n){return rr(n)?"vec3":n=="uniqueId"?"uint":"float"}function EF(n){return li(fd(n))}function ly(n){return li([n[0],Jl(n)])}function bF(n,...t){const e=[];for(const r of t)ft(r)?e.push(oy(r)):Xe(r)?e.push(li(r)):e.push(r);return`${n}(${e.join(", ")})`}function ms(n,t){var o;const e=n&&pr(n.type),r=n&&uy(n.type),i=r&&BF(n.domain()),s=i?{attributeType:"uvec2",arrayConstructor:Uint32Array}:r?{attributeType:"uint",arrayConstructor:Uint32Array}:e?{attributeType:"uint",arrayConstructor:Uint16Array}:t=="uniqueId"?{attributeType:"uint",arrayConstructor:Uint32Array}:{attributeType:"float",arrayConstructor:Float32Array};return Object.assign(s,{numComponents:+(((o=s.attributeType.match(/^vec([234])$/))==null?void 0:o[1])??1),discrete:e,hp:r,largeHp:i})}function uy(n){return n=="index"||n=="locus"}function BF(n){return n[1]>2**32}const hd=2**12;function fy(n,t=[]){const e=n%hd,r=(n-e)/hd;return t[0]=r,t[1]=e,t}function vF(n){const t=n%hd;return[n-t,t]}function QF(n){return[...vF(n[0]),n[1]-n[0]]}function Ay(n){const t=new Sn([],JSON.stringify);for(const[e,r]of Object.entries(n)){const i=r.channelDef;if(nr(i)){const o=[i.field,r.scale?(Ke(r.scale.type)||ci(r.scale.type))??!1:!1];t.set(o,[...t.get(o)??[],e])}}return t}function Cs(n){return AF+tt(n).toSorted().join("_")}function SF(n){return n[0].toUpperCase()+n.slice(1)}const hy=(n,t)=>zu(n.type)||Ke(n.type)&&rr(t)?[0,1]:n.range?n.range():void 0;function DF(n,t){if(n.length!=t.length)throw new Error("Unequal array lengths");const e=n.length;if(e==0)return"";if(e==1&&n[0]==null)return t[0];const r=[];for(let i=0;i<e;i++){const s=n[i],o=i==0?`if (${s})`:s==null&&i==e-1?"else":`else if (${s})`;r.push(`    ${o} {
        ${t[i]}
    }`)}return r.join(`
`)}function dy(){let n=0,t,e=0;const r=new Map,i=s=>(s===t||(e=r.get(s),e===void 0&&(e=n++,r.set(s,e)),t=s),e);return i.addAll=s=>{for(const o of s)i(o)},i.invert=s=>{for(const o of r.entries())if(o[1]==s)return o[0]},i.domain=()=>[...r.keys()],i}class qa{constructor({encoders:t,numVertices:e=void 0,attributes:r=[]}){this.encoders=t,this.variableEncoders=Object.fromEntries(Object.entries(t).filter(([s,o])=>r.includes(s)&&o&&!o.constant));const i=[...Ay(t).entries()].filter(([s,o])=>s[1]&&o.length>1).map(([s,o])=>o);this.allocatedVertices=e,this.variableBuilder=new v4(e);for(const[s,o]of Object.entries(this.variableEncoders)){const a=o.dataAccessor;if(!a)continue;const l=i.find(I=>I.find(y=>y==s));if(l&&s!=l[0])continue;const c=a.asNumberAccessor(),u=o.scale,{largeHp:f,arrayConstructor:h,discrete:A,numComponents:d}=ms(u,s),g=[0,0];let m;if(u&&A)if("props"in u&&u.props.domainIndexer)m=u.props.domainIndexer;else if("domain"in u)m=dy(),m.addAll(u.domain());else throw new Error("Missing domain indexer for discrete scale.");const p=m?I=>m(a(I)):f?I=>fy(c(I),g):c,w=Cs(l??s);this.variableBuilder.addConverter(w,{f:p,numComponents:d,arrayReference:f?g:void 0,targetArrayType:h})}this.lastOffset=0,this.rangeMap=new Sn([],JSON.stringify)}registerBatch(t){var s;const e=this.lastOffset,r=this.variableBuilder.vertexCount,i=r-e;i&&this.rangeMap.set(t,{offset:e,count:i,xIndex:(s=this.xIndexer)==null?void 0:s.getIndex()}),this.lastOffset=r}addBatches(t){for(const[e,r]of t)this.addBatch(e,r)}addBatch(t,e,r=0,i=e.length){this.prepareXIndexer(e,r,i);for(let s=r;s<i;s++){const o=e[s];this.variableBuilder.pushFromDatum(o),this.addToXIndex(o)}this.registerBatch(t)}prepareXIndexer(t,e=0,r=e+t.length){var c;const i=()=>{this.addToXIndex=u=>{},this.xIndexer=void 0},s=(c=this.encoders.x)==null?void 0:c.channelDef;if(!("buildIndex"in s)||!s.buildIndex||!t.length||r-e<0){i();return}const o=u=>{var f;return u&&Ke((f=u.scale)==null?void 0:f.type)&&u},a=o(this.variableEncoders.x),l=o(this.variableEncoders.x2);if(a&&!a.constant&&(!l||!l.constant)){const u=a.dataAccessor.asNumberAccessor(),f=l?l.dataAccessor.asNumberAccessor():u,h=[u(t[e]),f(t[r-1])];if(h[1]>h[0]){this.xIndexer=S4(50,h,u,f);let A=this.variableBuilder.vertexCount;this.addToXIndex=d=>{let g=this.variableBuilder.vertexCount;this.xIndexer(d,A,g),A=g}}else i()}else i()}addToXIndex(t){}toArrays(){return{arrays:this.variableBuilder.arrays,vertexCount:this.variableBuilder.vertexCount,allocatedVertices:this.allocatedVertices,rangeMap:this.rangeMap}}}class kF extends qa{constructor({encoders:t,attributes:e,numItems:r}){super({encoders:t,attributes:e,numVertices:r*6}),this.variableBuilder.configure();const i=this.variableBuilder.pushAll;this.pushAllSixTimes=r>500?new Function("pushAll",`return function unrolledPushAllSixTimes() {
  pushAll(); pushAll(); pushAll(); pushAll(); pushAll(); pushAll();
};`)(i):function(){i(),i(),i(),i(),i(),i()}}addBatch(t,e,r=0,i=e.length){if(!(i<=r)){this.prepareXIndexer(e,r,i);for(let s=r;s<i;s++){const o=e[s];this.variableBuilder.updateFromDatum(o),this.pushAllSixTimes(),this.addToXIndex(o)}this.registerBatch(t)}}}class FF extends qa{constructor({encoders:t,attributes:e,tessellationThreshold:r=1/0,visibleRange:i=[-1/0,1/0],numItems:s}){super({encoders:t,attributes:e,numVertices:r==1/0?s*6:void 0}),this.visibleRange=i,this.tessellationThreshold=r||1/0,this.updateSide=this.variableBuilder.createUpdater("side",1),this.updatePos=this.variableBuilder.createUpdater("pos",1),this.variableBuilder.configure()}addBatch(t,e,r=0,i=e.length){this.prepareXIndexer(e,r,i);for(let s=r;s<i;s++){const o=e[s];this.variableBuilder.updateFromDatum(o),this.updateSide(-.5),this.updatePos(0),this.variableBuilder.pushAll();const a=1;for(let l=0;l<=a;l++)this.updatePos(l/a),this.updateSide(-.5),this.variableBuilder.pushAll(),this.updateSide(.5),this.variableBuilder.pushAll();this.variableBuilder.pushAll(),this.addToXIndex(o)}this.registerBatch(t)}}class MF extends qa{constructor({encoders:t,attributes:e,numItems:r=void 0}){super({encoders:t,attributes:e,numVertices:r}),this.variableBuilder.configure()}}class RF extends qa{constructor({encoders:t,attributes:e,numItems:r=void 0}){super({encoders:t,attributes:e,numVertices:r}),this.variableBuilder.configure()}toArrays(){const t=this.variableBuilder.arrays;for(let e of Object.values(t))e.divisor=1;return super.toArrays()}}class NF extends qa{constructor({encoders:t,attributes:e,fontMetrics:r,properties:i,numCharacters:s=void 0}){super({encoders:t,attributes:e,numVertices:s*6}),this.metadata=r,this.metrics=r,this.properties=i;const a=t.text.channelDef;this.numberFormat=!Nt(a)&&"format"in a&&a.format?Ze(a.format):l=>l,this.updateVertexCoord=this.variableBuilder.createUpdater("vertexCoord",2),this.updateTextureCoord=this.variableBuilder.createUpdater("textureCoord",2),this.updateWidth=this.variableBuilder.createUpdater("width",1),this.variableBuilder.configure()}addBatch(t,e,r=0,i=e.length){const s=this.properties.align||"left",o=this.properties.logoLetters??!1,a=this.metadata.common.base,l=this.metadata.common.scaleH;let c=-us;switch(this.properties.baseline){case"top":c+=this.metrics.capHeight;break;case"middle":c+=this.metrics.capHeight/2;break;case"bottom":c-=this.metrics.descent;break}const u=this.encoders.text,f=[0,0];this.updateVertexCoord(f);const h=[0,0];this.updateTextureCoord(h),this.prepareXIndexer(e,r,i);for(let A=r;A<i;A++){const d=e[A],g=this.numberFormat(u(d)),m=Ce(g)?g:g===null?"":""+g;if(m.length==0)continue;this.variableBuilder.updateFromDatum(d);const p=o?m.length:this.metrics.measureWidth(m);this.updateWidth(p);let w=s=="right"?-p:s=="center"?-p/2:0;if(!o){const B=this.metrics.getCharByCode(m.charCodeAt(0));w-=(B.width-B.xadvance)/a/2}let I=-.5,y=1,b=1;for(let B=0;B<m.length;B++){const E=this.metrics.getCharByCode(m.charCodeAt(B)),Q=o?1:E.xadvance/a;if(E.id==32){w+=Q;continue}o?(b=(E.width+us*2)/E.width,w=-b/2,y=(E.height+us*2)/E.height,I=-.5-us/E.height):(y=E.height/a,I=-(E.height+E.yoffset+c)/a,b=E.width/a);const k=E.x,S=E.y;f[0]=w,f[1]=I+y,h[0]=k/l,h[1]=S/l,this.variableBuilder.pushAll(),f[0]=w+b,f[1]=I+y,h[0]=(k+E.width)/l,h[1]=S/l,this.variableBuilder.pushAll(),f[0]=w,f[1]=I,h[0]=k/l,h[1]=(S+E.height)/l,this.variableBuilder.pushAll(),f[0]=w+b,f[1]=I+y,h[0]=(k+E.width)/l,h[1]=S/l,this.variableBuilder.pushAll(),f[0]=w,f[1]=I,h[0]=k/l,h[1]=(S+E.height)/l,this.variableBuilder.pushAll(),f[0]=w+b,f[1]=I,h[0]=(k+E.width)/l,h[1]=(S+E.height)/l,this.variableBuilder.pushAll(),w+=Q}this.addToXIndex(d)}this.registerBatch(t)}}const gy=`#define PI 3.141593

uniform View {
    /** Offset in "unit" units */
    mediump vec2 uViewOffset;
    mediump vec2 uViewScale;
    /** Size of the logical viewport in pixels, i.e., the view */
    mediump vec2 uViewportSize;
    lowp float uDevicePixelRatio;
    // TODO: Views with opacity less than 1.0 should be rendered into a texture
    // that is rendered with the specified opacity.
    lowp float uViewOpacity;
    bool uPickingEnabled;
};


/**
 * Maps a coordinate on the unit scale to a normalized device coordinate.
 * (0, 0) is at the bottom left corner.
 */
vec4 unitToNdc(vec2 coord) {
    return vec4((coord * uViewScale + uViewOffset) * 2.0 - 1.0, 0.0, 1.0);
}

vec4 unitToNdc(float x, float y) {
    return unitToNdc(vec2(x, y));
}

vec4 pixelsToNdc(vec2 coord) {
    return unitToNdc(coord / uViewportSize);
}

vec4 pixelsToNdc(float x, float y) {
    return pixelsToNdc(vec2(x, y));
}

float linearstep(float edge0, float edge1, float x) {
    return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
}

bool isEmptyBinarySearchTexture(highp usampler2D s) {
    // The minimum texture size is 1x1. Zero is a special value that indicates
    // an empty selection. Unique ids never start at zero.
    return textureSize(s, 0).x == 1 && texelFetch(s, ivec2(0, 0), 0).r == 0u;
}

bool binarySearchTexture(highp usampler2D s, uint value) {
    int texSize = textureSize(s, 0).x;

    if (texSize == 1 && texelFetch(s, ivec2(0, 0), 0).r == 0u) {
        return false;
    }

    int left = 0;
    int right = texSize - 1;

    while (left <= right) {
        int mid = left + (right - left) / 2;

        uint midValue = texelFetch(s, ivec2(mid, 0), 0).r;

        if (midValue == value) {
            return true;
        }

        if (midValue < value) {
            left = mid + 1;
        } else {
            right = mid - 1;
        }
    }

    return false;
}

/**
 * Calculates a gamma for antialiasing opacity based on the color.
 */
float getGammaForColor(vec3 rgb) {
    return mix(
        1.25,
        0.75,
        // RGB should be linearized but this is good enough for now
        smoothstep(0.0, 1.0, dot(rgb, vec3(0.299, 0.587, 0.114))));
}

// Fragment shader stuff ////////////////////////////////////////////////////////

// TODO: include the following only in fragment shaders

/**
 * Specialized linearstep for doing antialiasing
 */
float distanceToRatio(float d) {
	return clamp(d * uDevicePixelRatio + 0.5, 0.0, 1.0);
}

vec4 distanceToColor(float d, vec4 fill, vec4 stroke, vec4 background, float halfStrokeWidth) {
    if (halfStrokeWidth > 0.0) {
        // Distance to stroke's edge. Negative inside the stroke.
        float sd = abs(d) - halfStrokeWidth;
        return mix(
            stroke,
            d <= 0.0 ? fill : background,
            distanceToRatio(sd));
    } else {
        return mix(background, fill, distanceToRatio(-d));
    }
}
`,TF=`uniform highp float uZero;

// Utils ------------

vec3 getDiscreteColor(sampler2D s, int index) {
    return texelFetch(s, ivec2(index % textureSize(s, 0).x, 0), 0).rgb;
}

vec3 getInterpolatedColor(sampler2D s, float unitValue) {
    return texture(s, vec2(unitValue, 0.0)).rgb;
}

float clampToRange(float value, vec2 range) {
    return clamp(value, min(range[0], range[1]), max(range[0], range[1]));
}

// Scales ------------
// Based on d3 scales: https://github.com/d3/d3-scale

float scaleIdentity(float value) {
    return value;
}

float scaleIdentity(uint value) {
    return float(value);
}

float scaleLinear(float value, vec2 domain, vec2 range) {
    float domainSpan = domain[1] - domain[0];
    float rangeSpan = range[1] - range[0];
    return (value - domain[0]) / domainSpan * rangeSpan + range[0];
}

float scaleLog(float value, vec2 domain, vec2 range, float base) {
    // y = m log(x) + b 
    // TODO: Perf optimization: precalculate log domain in js.
    // TODO: Reversed domain, etc
    return scaleLinear(log(value) / log(base), log(domain) / log(base), range);
}

float symlog(float value, float constant) {
    // WARNING: emulating log1p with log(x + 1). Small numbers are likely to
    // have significant precision problems.
    return sign(value) * log(abs(value / constant) + 1.0);
}

float scaleSymlog(float value, vec2 domain, vec2 range, float constant) {
    return scaleLinear(
        symlog(value, constant),
        vec2(symlog(domain[0], constant), symlog(domain[1], constant)),
        range
    );
}

float scalePow(float value, vec2 domain, vec2 range, float exponent) {
    // y = mx^k + b
    // TODO: Perf optimization: precalculate pow domain in js.
    // TODO: Reversed domain, etc
    return scaleLinear(
        pow(abs(value), exponent) * sign(value),
        pow(abs(domain), vec2(exponent)) * sign(domain),
        range
    );
}

// TODO: scaleThreshold
// TODO: scaleQuantile (special case of threshold scale)

// TODO: domainExtent should be uint
float scaleBand(uint value, vec2 domainExtent, vec2 range,
                float paddingInner, float paddingOuter,
                float align, float band) {

    // TODO: reverse
    float start = range[0];
    float stop = range[1];
    float rangeSpan = stop - start;

    float n = domainExtent[1] - domainExtent[0];

    // This fix departs from Vega and d3: https://github.com/vega/vega/issues/3357#issuecomment-1063253596
    paddingInner = int(n) > 1 ? paddingInner : 0.0;

    // Adapted from: https://github.com/d3/d3-scale/blob/master/src/band.js
    float step = rangeSpan / max(1.0, n - paddingInner + paddingOuter * 2.0);
    start += (rangeSpan - step * (n - paddingInner)) * align;
    float bandwidth = step * (1.0 - paddingInner);

    return start + (float(value) - domainExtent[0]) * step + bandwidth * band;
}

const int lowBits = 12;
const float lowDivisor = pow(2.0, float(lowBits));
const uint lowMask = uint(lowDivisor - 1.0);

vec2 splitUint(uint value) {
    uint valueLo = value & lowMask;
    uint valueHi = value - valueLo;
    return vec2(float(valueHi), float(valueLo));
}

/**
 * High precision variant of scaleBand for index/locus scales
 */
float scaleBandHp(uint value, vec3 domainExtent, vec2 range,
                 float paddingInner, float paddingOuter,
                 float align, float band) {

    // TODO: reverse
    float start = range[0];
    float stop = range[1];
    float rangeSpan = stop - start;

    vec2 domainStart = domainExtent.xy;
    float n = domainExtent[2];

    // The following computation is identical for every vertex. Could be done on the JS side.
    float step = rangeSpan / max(1.0, n - paddingInner + paddingOuter * 2.0);
    start += (rangeSpan - step * (n - paddingInner)) * align;
    float bandwidth = step * (1.0 - paddingInner);

    // Split into to values with each having a reduced number of significant digits
    // to mitigate the lack of precision in float32 calculations.
    vec2 splitValue = splitUint(value);

    // Using max to prevent the shader compiler from wrecking the precision.
    // Othwewise the compiler could optimize the sum of the four terms into
    // some equivalent form that does premature rounding.
    float inf = 1.0 / uZero;
    float hi = max(splitValue[0] - domainStart[0], -inf);
    float lo = max(splitValue[1] - domainStart[1], -inf);

    return dot(vec4(start, hi, lo, bandwidth), vec4(1.0, step, step, band));
}

/**
 * High precision variant of scaleBand for index/locus scales for large
 * domains where 32bit uints are not sufficient to represent the domain.
 */
float scaleBandHp(uvec2 value, vec3 domainExtent, vec2 range,
                 float paddingInner, float paddingOuter,
                 float align, float band) {

    // TODO: reverse
    float start = range[0];
    float stop = range[1];
    float rangeSpan = stop - start;

    vec2 domainStart = domainExtent.xy;
    float n = domainExtent[2];

    // The following computation is identical for every vertex. Could be done on the JS side.
    float step = rangeSpan / max(1.0, n - paddingInner + paddingOuter * 2.0);
    start += (rangeSpan - step * (n - paddingInner)) * align;
    float bandwidth = step * (1.0 - paddingInner);

    // Split into to values with each having a reduced number of significant digits
    // to mitigate the lack of precision in float32 calculations.
    vec2 splitValue = vec2(float(value[0]) * lowDivisor, float(value[1]));

    // Using max to prevent the shader compiler from wrecking the precision.
    // Othwewise the compiler could optimize the sum of the four terms into
    // some equivalent form that does premature rounding.
    float inf = 1.0 / uZero;
    float hi = max(splitValue[0] - domainStart[0], -inf);
    float lo = max(splitValue[1] - domainStart[1], -inf);

    return dot(vec4(start, hi, lo, bandwidth), vec4(1.0, step, step, band));
}
`,PF=`
/**
 * Describes where a sample facet should be shown. Interpolating between the
 * current and target positions/heights allows for transitioning between facet
 * configurations.
 */
struct SampleFacetPosition {
    float pos;
    float height;
    float targetPos;
    float targetHeight;
};

/**
 * Trasition fraction [0, 1] between the current and target configurations.
 */
uniform float uTransitionOffset;


// ----------------------------------------------------------------------------

#if !defined(SAMPLE_FACET_UNIFORM) && !defined(SAMPLE_FACET_TEXTURE)

SampleFacetPosition getSampleFacetPos() {
    return SampleFacetPosition(0.0, 1.0, 0.0, 1.0);
}

#elif defined(SAMPLE_FACET_UNIFORM)

/**
 * Location and height of the band on the Y axis on a normalized [0, 1] scale.
 * Elements: curr pos, curr height, target pos, target height
 */
uniform vec4 uSampleFacet;

SampleFacetPosition getSampleFacetPos() {
    return SampleFacetPosition(
        1.0 - uSampleFacet.x - uSampleFacet.y,
        uSampleFacet.y,
        1.0 - uSampleFacet.z - uSampleFacet.w,
        uSampleFacet.w
    );
}

#elif defined(SAMPLE_FACET_TEXTURE)

uniform sampler2D uSampleFacetTexture;

SampleFacetPosition getSampleFacetPos() {
    vec4 texel = texelFetch(uSampleFacetTexture, ivec2(int(attr_facetIndex), 0), 0);
    return SampleFacetPosition(
        1.0 - texel.r - texel.g,
        texel.g,
        1.0 - texel.r - texel.g,
        texel.g);
}

#endif

// ----------------------------------------------------------------------------

bool isFacetedSamples(SampleFacetPosition facetPos) {
    return facetPos != SampleFacetPosition(0.0, 1.0, 0.0, 1.0);
}

bool isFacetedSamples() {
    return isFacetedSamples(getSampleFacetPos());
}

bool isInTransit() {
    return uTransitionOffset > 0.0;
}

float getTransitionFraction(float xPos) {
    return smoothstep(0.0, 0.7 + uTransitionOffset, (xPos - uTransitionOffset) * 2.0);
}

vec2 applySampleFacet(vec2 pos) {
    SampleFacetPosition facetPos = getSampleFacetPos();

    if (!isFacetedSamples(facetPos)) {
        return pos;
    } else if (isInTransit()) {
        vec2 interpolated = mix(
            vec2(facetPos.pos, facetPos.height),
            vec2(facetPos.targetPos, facetPos.targetHeight),
            getTransitionFraction(pos.x));
        return vec2(pos.x, interpolated[0] + pos.y * interpolated[1]);
    } else {
        return vec2(pos.x, facetPos.pos + pos.y * facetPos.height);
    }
}

float getSampleFacetHeight(vec2 pos) {
    SampleFacetPosition facetPos = getSampleFacetPos();

    if (!isFacetedSamples(facetPos)) {
        return 1.0;
    } else if (isInTransit()) {
        return mix(
            facetPos.height,
            facetPos.targetHeight,
            getTransitionFraction(pos.x));
    } else {
        return facetPos.height;
    }
}
`,LF=`/*
 * Based on concepts presented at:
 * https://webglfundamentals.org/webgl/lessons/webgl-picking.html
 * https://deck.gl/docs/developer-guide/custom-layers/picking
 */

out highp vec4 vPickingColor;

/**
 * Passes the unique id to the fragment shader as a color if picking is enabled.
 * Returns true if picking is enabled.
 */
bool setupPicking() {
    if (uPickingEnabled) {
#ifdef uniqueId_DEFINED
        uint id = attr_uniqueId;
        vPickingColor = vec4(
            ivec4(id >> 0, id >> 8, id >> 16, id >> 24) & 0xFF
        ) / float(0xFF);
#else
        vPickingColor = vec4(1.0);
#endif
        return true;
    }
    return false;
}
`,OF=`in highp vec4 vPickingColor;
`,Vu=Symbol("cacheMap");function Yu(n,t,e){let r=Ka(n).get(t);return r===void 0&&(r=e(t),Ka(n).set(t,r)),r}function dd(n,t){Ka(n).delete(t)}function Ju(n,t){const e=Ka(n);for(const r of e.keys())r.startsWith(t)&&e.delete(r);Ka(n).delete(t)}function py(n){n[Vu]=new Map}function Ka(n){return n[Vu]||py(n),n[Vu]}function my(...n){const t={get(e,r,i){for(const s of n){const a=s()[r];if(a!==void 0)return a}},has(e,r,i){for(const s of n){const o=s();if(r in o)return!0}return!1}};return new Proxy({},t)}function UF(n){return Ce(n)||ft(n)||Uo(n)}class mr extends Error{constructor(t,e){super(t),this.name="ViewError",this.view=e}}const GF="SAMPLE_FACET_UNIFORM",Cy="SAMPLE_FACET_TEXTURE",yy="uSelectionTexture_";class ja{constructor(t){D(this,en,[]);D(this,Xs,[]);this.unitView=t,this.encoders=void 0,this.bufferInfo=void 0,this.bytesPerElement=new Map,this.programInfo=void 0,this.vertexArrayInfo=void 0,this.viewUniformInfo=void 0,this.markUniformInfo=void 0,this.markUniformsAltered=!0,this.selectionTextureOps=[],this.rangeMap=new zF,this.defaultProperties={get clip(){return["x","y"].map(e=>t.getScaleResolution(e)).some(e=>(e==null?void 0:e.isZoomable())??!1)},xOffset:0,yOffset:0,minBufferSize:0},this.properties=my(typeof this.unitView.spec.mark=="object"?()=>this.unitView.spec.mark:()=>({}),()=>this.defaultProperties)}augmentDefaultProperties(t){Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors(t))}get opaque(){return!1}get defaultHitTestMode(){return"intersects"}getAttributes(){throw new Error("Not implemented!")}getSupportedChannels(){return["sample","facetIndex","x","y","color","opacity","search","uniqueId"]}getDefaultEncoding(){const t={sample:void 0,uniqueId:void 0};return this.isPickingParticipant()&&(t.uniqueId={field:Rt}),t}fixEncoding(t){return t}setupExprRefsNeedingGraphicsUpdate(t){const e=this.getSupportedChannels(),r={};for(const s of t){const o=this.properties[s];if(o&&it(o)){const a=this.unitView.paramMediator.createExpression(o.expr);a.addListener(()=>{this.updateGraphicsData(),this.unitView.context.animator.requestRender()}),e.includes(s)||Object.defineProperty(r,s,{get(){return a()}})}}const i=this.properties;this.properties=my(()=>r,()=>i)}get encoding(){return Yu(this,"encoding",()=>{var o;const t=this.getDefaultEncoding(),e=this.unitView.getEncoding(),r=a=>{const l=this.properties[a];return UF(l)||it(l)?{value:l}:void 0},i=Object.fromEntries(this.getSupportedChannels().map(a=>[a,r(a)]).filter(a=>Nt(a[1]))),s=this.fixEncoding({...t,...i,...e});for(const a of Object.keys(s))this.getSupportedChannels().includes(a)||delete s[a];return s.x&&((o=s.x).buildIndex??(o.buildIndex=!0)),s})}getContext(){return this.unitView.context}getType(){return this.unitView.getMarkType()}initializeData(){}initializeEncoders(){this.encoders=IS(this.unitView,this.encoding)}async initializeGraphics(){}updateGraphicsData(){}getSampleFacetMode(){if(this.encoders.facetIndex)return Cy;if(this.unitView.getLayoutAncestors().find(t=>"samples"in t.spec))return GF}createAndLinkShaders(t,e,r=[]){const i=this.getAttributes(),s=this.encoders,o=this.getSampleFacetMode();o&&r.push(`#define ${o}`);const a="// view: "+this.unitView.getPathString();let l=[];const c=new Set,u=Ay(s),f=[],h=Object.values(s).flatMap(b=>b.accessors).map(b=>b.predicate).filter(b=>b.param),A=new Map;for(const b of h){const B=b.param,E=this.unitView.paramMediator,Q=E.findValue(B);if(!Q)throw new Error(`Cannot infer selection type as the parameter "${B}" has no value. Please ensure that the parameter is properly defined!`);const k=Cs("uniqueId");if(hm(Q)){if(!A.has(B)){A.set(B,"single");const S=_u+va(B);f.push("    // Selection parameter"),f.push(`    uniform highp uint ${S};`),C(this,en).push(()=>{this.registerMarkUniformValue(S,{expr:B},P=>P.uniqueId??0)}),l.push(`bool ${Ya}${B}(bool empty) {
    return ${_u}${B} == ${k} || (empty && ${_u}${B} == 0u);
}`)}}else if(JA(Q)){if(!A.has(B)){A.set(B,"multi");const S=yy+va(B);l.push(`// Selection texture
uniform highp usampler2D ${S};`);const P=this.getContext().glHelper,N=P.selectionTextures;this.selectionTextureOps.push(()=>{const J=E.getValue(B),V=N.get(J);if(!V)throw new Error(`Bug: no selection texture found for "${B}"!`);ei(this.programInfo,{[S]:V})});const U=yy+B;l.push(`bool ${Ya}${B}(bool empty) {
   return binarySearchTexture(${U}, ${k}) || (empty && isEmptyBinarySearchTexture(${U}));
}`),P.createSelectionTexture(Q);const H=E.createExpression(B);H.addListener(()=>{const J=H(null);P.createSelectionTexture(J),this.getContext().animator.requestRender()})}}else if(Am(Q)&&!A.has(B)){A.set(B,"interval");const S=[],P=[];for(const N of Object.keys(Q.intervals)){if(!["x","y"].includes(N))continue;const U=_u+va(B)+`_${N}`,{attributeType:H}=ms(this.unitView.getScaleResolution(N).getScale(),N);f.push("    // Selection parameter"),f.push(`    uniform highp ${H}[2] ${U};`),C(this,en).push(()=>{this.registerMarkUniformValue(U,{expr:B},ge=>ge.intervals[N]??[1,0])});const J=ge=>{for(const[Me,Bn]of u.entries())if(Me[1]&&Bn.includes(ge))return Cs(Bn);return Cs(ge)},V=J(N),$=U+"[0]",le=U+"[1]",de=_A(N);if(this.encoding[de]){const ge=J(de),Me=this.defaultHitTestMode;if(Me=="endpoints")S.push(`((${$} <= ${V} && ${V} <= ${le}) || (${$} <= ${ge} && ${ge} <= ${le}))`);else if(Me=="encloses")S.push(`(${$} <= ${V} && ${ge} <= ${le})`);else if(Me=="intersects")S.push(`(${$} <= ${ge} && ${V} <= ${le})`);else throw new mr(`Unsupported hit test mode "${Me}" for interval selection!`,this.unitView)}else S.push(`(${$} <= ${V} && ${V} <= ${le})`);P.push(`${$} > ${le}`)}l.push(`bool ${Ya}${B}(bool empty) {
    return ${S.join(" && ")} || (empty && (${P.join(" || ")}));
}`)}}const d=(b,B,E,Q)=>{const k=B.channelDef;if(Nt(k))if(it(k.value)){const{uniformName:S,uniformGlsl:P,accessorGlsl:N,adjuster:U}=yF(b,E);l.push(N),f.push(P),C(this,en).push(()=>{this.registerMarkUniformValue(S,k.value,U)})}else l.push(CF(b,E,k.value).accessorGlsl);else if(Ea(k)){const{uniformName:S,uniformGlsl:P,accessorGlsl:N}=wF(b,Q,E);f.push(P),l.push(N);const{largeHp:U,discrete:H}=ms(Q,b),J=H&&"domain"in Q?V=>Q.domain().indexOf(V):U?fy:V=>+V;C(this,en).push(()=>{this.registerMarkUniformValue(S,k.datum,J)})}else if(nr(k)){const S=u.get([k.field,!0]),{attributeGlsl:P,accessorGlsl:N}=sy(b,Q,E,S!=null&&S.includes(b)?S:void 0);c.add(P),l.push(N)}else if(ba(k)){const{attributeGlsl:S,accessorGlsl:P}=sy(b,Q,E);c.add(S),l.push(P)}else throw new mr(`Unsupported channel definition: ${JSON.stringify(k)}`,this.unitView)};for(const[b,B]of Object.entries(s)){if(!i.includes(b))continue;const{channelDef:E,accessors:Q,scale:k}=B;for(let S=0;S<Q.length;S++)d(b,Q[S],S,k);if(k){const S=om(E),P=S&&S.resolutionChannel||b,N=tu(P)?this.unitView.getScaleResolution(P):null,{glsl:U,domainUniform:H,domainUniformName:J,rangeUniform:V,rangeUniformName:$}=xF(b,k,E);l.push(U),f.push(H),f.push(V),V&&C(this,en).push(()=>{const le=this.createMarkUniformSetter($),de=()=>le(hy(k,b));N.addEventListener("range",de),de()}),H&&C(this,en).push(()=>{const le=this.createMarkUniformSetter(J),de=()=>{const ge=pr(k.type)?[0,k.domain().length]:k.domain();le(uy(k.type)?QF(ge):ge)};N.addEventListener("domain",de),de()})}l.push(IF(b,Q))}const g=[...A.keys()].map(b=>`${Ya}${b}(false)`);l.push(`bool isPointSelected() {
`+(this.encoders.uniqueId&&g.length>0?`    return ${g.join(" || ")};`:"    return false;")+`
}`);const m=`precision highp float;
precision highp int;`,p=b=>b.replace("#pragma markUniforms",f.join(`
`));r=r.map(p),t=p(t),e=p(e);const w=[m,a,...r,gy,TF,[...c].join(`
`),...l,PF,LF,t],I=[m,a,...r,gy,OF,e],y=this.gl;this.programStatus=oF(y,this.glHelper.compileShader(y.VERTEX_SHADER,w),this.glHelper.compileShader(y.FRAGMENT_SHADER,I))}finalizeGraphicsInitialization(){const t=this.programStatus.getProgramErrors();if(t){t.detail&&console.warn(t.detail);const e=new Error("Cannot create shader program: "+t.message);throw e.view=this.unitView,e}this.programInfo=$k(this.gl,this.programStatus.program),delete this.programStatus,this.viewUniformInfo=xC(this.gl,this.programInfo,"View"),this.markUniformInfo=xC(this.gl,this.programInfo,"Mark"),this.gl.useProgram(this.programInfo.program),ei(this.programInfo,{uSampleFacet:[0,1,0,1],uTransitionOffset:0,uZero:0});for(const e of C(this,en))e();F(this,en,void 0)}createMarkUniformSetter(t){const e=this.markUniformInfo.setters[t];if(!e)throw new Error(`Uniform "${t}" not found int the Mark block!`);return r=>{e(r),this.markUniformsAltered=!0,this.unitView.context.animator.requestRender()}}registerMarkUniformValue(t,e,r=i=>i){const i=this.createMarkUniformSetter(t),s=o=>{if(o==null)throw new Error(`Trying to set null/undefined value for uniform: ${t}${it(e)?`Expr: ${e.expr}`:""}`);i(o)};if(it(e)){const o=this.unitView.paramMediator.createExpression(e.expr),a=()=>s(r(o(null)));o.addListener(a),C(this,Xs).push({expr:o,listener:a}),a()}else s(r(e))}deleteGraphicsData(){const t=this.glHelper;if(!t){this.vertexArrayInfo=void 0,this.bufferInfo=void 0;return}const e=t.gl;if(this.vertexArrayInfo&&(this.gl.bindVertexArray(null),e.deleteVertexArray(this.vertexArrayInfo.vertexArrayObject),this.vertexArrayInfo=void 0),this.bufferInfo){for(let r=0;r<8;r++)e.disableVertexAttribArray(r);Object.values(this.bufferInfo.attribs).forEach(r=>this.gl.deleteBuffer(r.buffer)),this.bufferInfo.indices&&this.gl.deleteBuffer(this.bufferInfo.indices),this.bufferInfo=void 0}}dispose(){for(const{expr:t,listener:e}of C(this,Xs))t.removeListener(e);C(this,Xs).length=0,this.deleteGraphicsData()}updateBufferInfo(t){if(this.gl.bindVertexArray(null),this.bufferInfo&&t.vertexCount<=this.bufferInfo.allocatedVertices)for(const[e,r]of Object.entries(t.arrays))r.data&&AD(this.gl,this.bufferInfo.attribs[e],r.data,0);else{this.deleteGraphicsData(),this.bufferInfo=gD(this.gl,t.arrays,{numElements:t.vertexCount}),this.bufferInfo.allocatedVertices=t.allocatedVertices;for(const[e,r]of Object.entries(t.arrays))this.bytesPerElement.set(e,r.data.BYTES_PER_ELEMENT)}}get glHelper(){return this.getContext().glHelper}get gl(){return this.glHelper.gl}onBeforeSampleAnimation(){}onAfterSampleAnimation(){}isReady(){return this.bufferInfo&&this.programInfo}isPickingParticipant(){if(this.properties.tooltip===null&&!this.unitView.paramMediator.hasPointSelections())return!1;for(const t of this.unitView.getLayoutAncestors())if(!t.isPickingSupported())return!1;return!0}bindOrSetMarkUniformBlock(){this.markUniformsAltered?(EC(this.gl,this.programInfo,this.markUniformInfo),this.markUniformsAltered=!1):IC(this.gl,this.programInfo,this.markUniformInfo)}prepareRender(t){const e=this.glHelper,r=this.gl,i=[];i.push(()=>{this.vertexArrayInfo||(this.vertexArrayInfo=C4(this.gl,this.programInfo,this.bufferInfo)),r.useProgram(this.programInfo.program)});for(const[o,a]of Object.entries(this.encoders)){const l=e.rangeTextures.get(a.scale);l&&i.push(()=>ei(this.programInfo,{[Ad+o]:l}))}i.push(...this.selectionTextureOps),this.getSampleFacetMode()==Cy&&i.push(()=>{let o;for(const a of this.unitView.getLayoutAncestors())if(o=a.getSampleFacetTexture(),o)break;if(!o)throw new Error("No facet texture available. This is bug.");ei(this.programInfo,{uSampleFacetTexture:o})});const s=(t.picking??!1)&&this.isPickingParticipant();return i.push(()=>Ra(this.viewUniformInfo,{uViewOpacity:this.unitView.getEffectiveOpacity(),uPickingEnabled:s})),this.opaque||t.picking?i.push(()=>r.disable(r.BLEND)):i.push(()=>r.enable(r.BLEND)),i}prepareSampleFacetRendering(t){const e=t.sampleFacetRenderingOptions,r=this.programInfo.uniformSetters.uSampleFacet;if(e&&r){const i=e.locSize?e.locSize.location:0,s=e.locSize?e.locSize.size:1;if(i>1||i+s<0)return!1;const o=e.targetLocSize?e.targetLocSize.location:i,a=e.targetLocSize?e.targetLocSize.size:s;this.gl.uniform4f(r.location,i,s,o,a)}return!0}render(t){}createRenderCallback(t,e){var f;if(!this.bufferInfo)return()=>{};const r=this;let i;const s=(f=this.unitView.getScaleResolution("x"))==null?void 0:f.getScale(),o=s&&Ke(s.type),a=["index","locus"].includes(s==null?void 0:s.type)?-1:0,l=[0,0];i=h=>{if(o&&h.xIndex){const A=s.domain(),d=h.xIndex(A[0]+a,A[1],l),g=d[0],m=d[1]-g;m>0&&t(g,m)}else t(h.offset,h.count)};const c=this.rangeMap.get(void 0).count==0?e.facetId:void 0,u=this.rangeMap.get(c);return e.sampleFacetRenderingOptions?function(){u.count&&r.prepareSampleFacetRendering(e)&&i(u)}:function(){u.count&&i(u)}}setViewport(t,e,r,i){r=r.flatten();const s=this.gl,o=this.properties,a=.5,l=(o.xOffset??0)+a,c=(o.yOffset??0)+a;let u,f=r;if(o.clip!=="never"&&(o.clip||i)){let h=0,A=0,d;if(i){if(f=r.intersect(i).flatten(),!f.isDefined())return!1;d=[r.width/f.width,r.height/f.height],A=Math.max(0,r.y2-i.y2),h=Math.min(0,r.x-i.x)}else d=[1,1];const g=[f.x,t.height-f.y2,f.width,f.height].map(I=>I*e),m=g.map(I=>Math.floor(I)),p=g[0]-m[0],w=g[1]-m[1];s.viewport(...m),s.scissor(...m),s.enable(s.SCISSOR_TEST),u={uViewOffset:[(l+h+p/e)/f.width,-(c+A-w/e)/f.height],uViewScale:d}}else{if(!r.isDefined())return!1;s.viewport(0,0,t.width*e,t.height*e),s.disable(s.SCISSOR_TEST),u={uViewOffset:[(r.x+l)/t.width,(t.height-r.y-c-r.height)/t.height],uViewScale:[r.width/t.width,r.height/t.height]}}return Ra(this.viewUniformInfo,{...u,uViewportSize:[r.width,r.height],uDevicePixelRatio:e}),EC(this.gl,this.programInfo,this.viewUniformInfo),!0}findDatumAt(t,e){}}en=new WeakMap,Xs=new WeakMap;class zF extends Sn{constructor(){super([],JSON.stringify)}get(t){let e=super.get(t);return e===void 0&&(e={offset:0,count:0,xIndex:void 0},super.set(t,e)),e}migrateEntries(t){for(const[e,r]of this.entries())t.has(e)||(r.offset=0,r.count=0,r.xIndex=void 0);for(const[e,r]of t.entries())Object.assign(this.get(e),r)}}function gd(n,t){const e=_A(t);let r=n[t]&&{...n[t]},i=n[e]&&{...n[e]};if(!(Nt(r)||Nt(i))){if(r){if(!Qt(n[t]))return;if(i){if(r.type!="quantitative"){const s=(1-(r.band||1))/2;r.band=s,i.band=-s}}else if(r.type=="quantitative")i={datum:0,contributesToScaleDomain:!1};else{i={...r};const s=(1-(r.band??1))/2;r.band=0+s,i.band=1-s}}else r={value:0},i={value:1};n[t]=r,n[e]=i}}function qu(n,t){const e=om(n);e&&(e.resolutionChannel=t)}function wy(n,t){n.stroke||(t?n.stroke={value:null}:(n.stroke=structuredClone(n.color),qu(n.stroke,"color"))),Nt(n.stroke)&&n.stroke.value===null&&(n.strokeWidth={value:0}),n.strokeOpacity||(n.strokeOpacity=structuredClone(n.opacity),qu(n.strokeOpacity,"opacity"))}function xy(n,t){Nt(n.fill)&&n.fill.value===null?n.fillOpacity={value:0}:n.fill||(n.fill=structuredClone(n.color),qu(n.fill,"color"),!t&&!n.fillOpacity&&(n.fillOpacity={value:0})),n.fillOpacity||(t?(n.fillOpacity=structuredClone(n.opacity),qu(n.fillOpacity,"opacity")):n.fillOpacity={value:0})}const HF=["none","diagonal","antiDiagonal","cross","vertical","horizontal","grid","dots","rings","ringsLarge"];class _F extends ja{constructor(e){super(e);D(this,Qr);this.augmentDefaultProperties({x2:void 0,y2:void 0,filled:!0,color:"#4c78a8",opacity:1,strokeWidth:3,cornerRadius:0,minWidth:.5,minHeight:.5,minOpacity:1})}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","fill","stroke","fillOpacity","strokeOpacity","strokeWidth"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","fill","stroke","fillOpacity","strokeOpacity","strokeWidth"]}get opaque(){return Yu(this,"opaque",()=>!T(this,Qr,V0).call(this)&&!T(this,Qr,Y0).call(this)&&!this.properties.shadowOpacity&&Nt(this.encoding.fillOpacity)&&this.encoding.fillOpacity.value==1&&this.properties.minOpacity==1)&&this.unitView.getEffectiveOpacity()==1}fixEncoding(e){return gd(e,"x"),gd(e,"y"),wy(e,this.properties.filled),xy(e,this.properties.filled),delete e.color,delete e.opacity,e}onBeforeSampleAnimation(){}onAfterSampleAnimation(){}async initializeGraphics(){await super.initializeGraphics();const e=[];T(this,Qr,V0).call(this)&&e.push("ROUNDED_CORNERS"),T(this,Qr,Y0).call(this)&&e.push("STROKED"),this.properties.shadowOpacity&&e.push("SHADOW"),this.createAndLinkShaders(E4,b4,[B4,...e.map(r=>"#define "+r)])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;this.registerMarkUniformValue("uMinWidth",e.minWidth),this.registerMarkUniformValue("uMinHeight",e.minHeight),this.registerMarkUniformValue("uMinOpacity",e.minOpacity),this.registerMarkUniformValue("uCornerRadiusTopRight",e.cornerRadiusTopRight??e.cornerRadius??0),this.registerMarkUniformValue("uCornerRadiusBottomRight",e.cornerRadiusBottomRight??e.cornerRadius??0),this.registerMarkUniformValue("uCornerRadiusTopLeft",e.cornerRadiusTopLeft??e.cornerRadius??0),this.registerMarkUniformValue("uCornerRadiusBottomLeft",e.cornerRadiusBottomLeft??e.cornerRadius??0),this.registerMarkUniformValue("uHatchPattern",e.hatch,r=>Math.max(0,HF.indexOf(r??"none"))),this.registerMarkUniformValue("uShadowBlur",e.shadowBlur??0),this.registerMarkUniformValue("uShadowOpacity",e.shadowOpacity??0),this.registerMarkUniformValue("uShadowOffsetX",e.shadowOffsetX??0),this.registerMarkUniformValue("uShadowOffsetY",e.shadowOffsetY??0),this.registerMarkUniformValue("uShadowColor",e.shadowColor??"black",fd)}updateGraphicsData(){const e=this.unitView.getCollector();if(!e){console.debug("No collector");return}const r=e.getItemCount(),i=new kF({encoders:this.encoders,attributes:this.getAttributes(),numItems:r});i.addBatches(e.facetBatches);const s=i.toArrays();this.rangeMap.migrateEntries(s.rangeMap),this.updateBufferInfo(s)}prepareRender(e){const r=super.prepareRender(e);return r.push(()=>this.bindOrSetMarkUniformBlock()),r.push(()=>ti(this.gl,this.programInfo,this.vertexArrayInfo)),r}render(e){const r=this.gl;return this.createRenderCallback((i,s)=>{Bu(r,this.vertexArrayInfo,r.TRIANGLE_STRIP,s,i)},e)}findDatumAt(e,r){e=tt(e);const i=this.unitView.getCollector().facetBatches.get(e);if(!i)return;const s=this.encoders,o=s.x.scale.type;if(pr(o)){const a=s.x.dataAccessor;return i.find(l=>r==a(l))}else{const a=s.x.dataAccessor,l=s.x2.dataAccessor;return i.find(c=>r>=a(c)&&r<l(c))}}}Qr=new WeakSet,V0=function(){const e=this.properties;return e.cornerRadius||e.cornerRadiusBottomLeft||e.cornerRadiusBottomRight||e.cornerRadiusTopLeft||e.cornerRadiusTopRight},Y0=function(){const e=this.encoding.strokeWidth;return!(Nt(e)&&!e.value)||"condition"in e};const VF=`flat out float vRadius;
flat out float vRadiusWithPadding;
flat out lowp vec4 vFillColor;
flat out lowp vec4 vStrokeColor;
flat out lowp float vShape;
flat out lowp float vHalfStrokeWidth;
flat out mat2 vRotationMatrix;

// Copypaste from fragment shader
const float CIRCLE = 0.0;
const float SQUARE = 1.0;
const float CROSS = 2.0;
const float DIAMOND = 3.0;
const float TRIANGLE_UP = 4.0;
const float TRIANGLE_RIGHT = 5.0;
const float TRIANGLE_DOWN = 6.0;
const float TRIANGLE_LEFT = 7.0;
const float TICK_UP = 8.0;
const float TICK_RIGHT = 9.0;
const float TICK_DOWN = 10.0;
const float TICK_LEFT = 11.0;

float computeSemanticThresholdFactor() {
    // TODO: add smooth transition
    return getScaled_semanticScore() >= uSemanticThreshold ? 1.0 : 0.0;
}

// TODO: Move this into common.glsl or something
vec2 getDxDy() {
#if defined(dx_DEFINED) || defined(dy_DEFINED)
    return vec2(getScaled_dx(), getScaled_dy()) / uViewportSize;
#else
    return vec2(0.0, 0.0);
#endif
}

void main(void) {
    float shapeAngle = 0.0;

    // Selected points should always be visible
    float semanticThresholdFactor = isPointSelected()
        ? 1.0
        : computeSemanticThresholdFactor();

    if (semanticThresholdFactor <= 0.0) {
        gl_PointSize = 0.0;
        // Place the vertex outside the viewport. The default (0, 0) makes this super-slow
        // on Apple Silicon. Probably related to the tile-based GPU architecture.
        gl_Position = vec4(100.0, 0.0, 0.0, 0.0);
        // Exit early. MAY prevent some unnecessary calculations.
        return;
    }

    float size = getScaled_size();
    vec2 pos = vec2(getScaled_x(), getScaled_y()) + getDxDy();

    gl_Position = unitToNdc(applySampleFacet(pos));

    float strokeWidth = getScaled_strokeWidth();

    float diameter = sqrt(size) *
        uScaleFactor *
        semanticThresholdFactor;

    // Clamp minimum size and adjust opacity instead. Yields more pleasing result,
    // no flickering etc.
    float opacity = uViewOpacity;
	if (strokeWidth <= 0.0 || uInwardStroke) {
		float minDiameter = 1.0 / uDevicePixelRatio;
		if (diameter < minDiameter) {
			// We do some "cheap" gamma correction here. It breaks on dark background, though.
			// First we take a square of the size and then apply "gamma" of 1.5.
			opacity *= pow(diameter / minDiameter, 2.5);
			diameter = minDiameter;
		}
	}

	float fillOpa = getScaled_fillOpacity() * opacity;
	float strokeOpa = getScaled_strokeOpacity() * opacity;

    vShape = getScaled_shape();

	// Circle doesn't have sharp corners. Do some special optimizations to minimize the point size.
	bool circle = vShape == 0.0;

    if (vShape > TICK_UP && vShape <= TICK_LEFT) {
        shapeAngle = (vShape - TICK_UP) * 90.0;
        vShape = TICK_UP;
    } else if (vShape > TRIANGLE_UP && vShape <= TRIANGLE_LEFT) {
        shapeAngle = (vShape - TRIANGLE_UP) * 90.0;
        vShape = TRIANGLE_UP;
    }

	float angleInDegrees = getScaled_angle();
	float angle = -(shapeAngle + angleInDegrees) * PI / 180.0;
    float sinTheta = sin(angle);
    float cosTheta = cos(angle);
    vRotationMatrix = mat2(cosTheta, sinTheta, -sinTheta, cosTheta);

    // Not needed if we would draw rotated quads instead of gl.POINTS
	float roomForRotation = circle ? 1.0 : sin(mod(angle, PI / 2.0) + PI / 4.0) / sin(PI / 4.0);

	float aaPadding = 1.0 / uDevicePixelRatio;
	float rotationPadding = (diameter * roomForRotation) - diameter;
	// sqrt(3.0) ensures that the angles of equilateral triangles have enough room
	float strokePadding = uInwardStroke ? 0.0 : strokeWidth * (circle ? 1.0 : sqrt(3.0));
	float padding = rotationPadding + strokePadding + aaPadding;

    gl_PointSize = max(
        (diameter + padding),
        uPickingEnabled ? uMinPickingSize : 0.0
    ) * uDevicePixelRatio;

	vRadius = diameter / 2.0;
	vRadiusWithPadding = vRadius + padding / 2.0;

    vHalfStrokeWidth = strokeWidth / 2.0;

    vFillColor = vec4(getScaled_fill() * fillOpa, fillOpa);
    vStrokeColor = vec4(getScaled_stroke() * strokeOpa, strokeOpa);

    setupPicking();
}
`,YF=`const lowp vec4 white = vec4(1.0);
const lowp vec4 black = vec4(0.0, 0.0, 0.0, 1.0);

flat in float vRadius;
flat in float vRadiusWithPadding;

flat in lowp vec4 vFillColor;
flat in lowp vec4 vStrokeColor;
flat in lowp float vShape;
flat in lowp float vHalfStrokeWidth;

flat in mat2 vRotationMatrix;

out lowp vec4 fragColor;

// Copypaste from vertex shader
const float CIRCLE = 0.0;
const float SQUARE = 1.0;
const float CROSS = 2.0;
const float DIAMOND = 3.0;
const float TRIANGLE_UP = 4.0;
const float TICK_UP = 8.0;

// The distance functions are inspired by:
// http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
// However, these are not true distance functions, because the corners need to be sharp.

float circle(vec2 p, float r) {
    return length(p) - r;
}

float square(vec2 p, float r) {
    p = abs(p);
    return max(p.x, p.y) - r;
}

float tickUp(vec2 p, float r) {
    float halfR = r * 0.5;
    p.y += halfR;
    p = abs(p);
    return max(p.x - r * 0.15, p.y - halfR);
}

float equilateralTriangle(vec2 p, float r) {
    p.y = -p.y;
    float k = sqrt(3.0);
    float kr = k * r;
    p.y -= kr / 2.0;
    return max((abs(p.x) * k + p.y) / 2.0, -p.y - kr);
}

float crossShape(vec2 p, float r) {
    p = abs(p);

	vec2 b = vec2(0.4, 1.0) * r;
    vec2 v = abs(p) - b.xy;
    vec2 h = abs(p) - b.yx;
    return min(max(v.x, v.y), max(h.x, h.y));
}

float diamond(vec2 p, float r) {
    p = abs(p);
    return (max(abs(p.x - p.y), abs(p.x + p.y)) - r) / sqrt(2.0);
}

void main() {
    float d;

	/** Normalized point coord */
    vec2 p = vRotationMatrix * (2.0 * gl_PointCoord - 1.0) * vRadiusWithPadding;
	float r = vRadius;

    // We could also use textures here. Could even be faster, because we have plenty of branching here.
    if (vShape == CIRCLE) {
        d = circle(p, r);

    } else if (vShape == SQUARE) {
        d = square(p, r);

    } else if (vShape == CROSS) {
        d = crossShape(p, r);

    } else if (vShape == DIAMOND) {
        d = diamond(p, r);

    } else if (vShape == TRIANGLE_UP) {
        d = equilateralTriangle(p, r);

    } else if (vShape == TICK_UP) {
        d = tickUp(p, r);

    } else {
        d = 0.0;
    }

	if (!uPickingEnabled) {
		lowp vec4 fillColor = mix(vFillColor, white, -d * uGradientStrength / vRadius);

		fragColor = distanceToColor(
			d + (uInwardStroke ? vHalfStrokeWidth : 0.0),
			fillColor,
			vStrokeColor,
            vec4(0.0),
			vHalfStrokeWidth);

	} else if (d - vHalfStrokeWidth <= 0.0) {
        fragColor = vPickingColor;

	} else {
		discard;
    }
}

`,JF=`layout(std140) uniform Mark {
    /**
    * The stroke should only grow inwards, e.g, the diameter/outline is not affected by the stroke width.
    * Thus, a point that has a zero size has no visible stroke. This allows strokes to be used with
    * geometric zoom, etc.
    */
    uniform bool uInwardStroke;

    /** The minimum point size in pixels when rendering into the picking buffer */
    uniform float uMinPickingSize;

    /** Scale factor for geometric zoom */
    uniform mediump float uScaleFactor;

    uniform mediump float uZoomLevel;
    uniform highp float uSemanticThreshold;

    uniform mediump float uGradientStrength;

#pragma markUniforms
};
`;class Iy extends Ue{constructor(t){super(t),this.params=t,this.k=t.size||500,this.reset()}reset(){super.reset(),this.reservoir=[],this.W=void 0,this.ingester=this._initialIngester}_initialIngester(t){this.reservoir.push(t),this.reservoir.length==this.k&&(this.W=Math.exp(Math.log(Math.random())/this.k),this.i=this.k,this.next=this.i,this.ingester=this._finalIngester,this._setNextStop())}_finalIngester(t){++this.i==this.next&&(this.reservoir[Math.floor(Math.random()*this.k)]=t,this.W*=Math.exp(Math.log(Math.random())/this.k),this._setNextStop())}_setNextStop(){this.next+=Math.floor(Math.log(Math.random())/Math.log(1-this.W))+1}handle(t){this.ingester(t)}complete(){for(const t of this.reservoir)this._propagate(t);super.complete()}}function qF(n,t,e){const r=new Iy({type:"sample",size:n});for(const i of t)r.handle(e(i));return r.complete(),r.reservoir}const KF={};class jF extends ja{constructor(e){super(e);D(this,Ff);D(this,Zs,()=>0);this.augmentDefaultProperties({x:.5,y:.5,color:"#4c78a8",filled:!0,opacity:1,size:100,semanticScore:0,shape:"circle",strokeWidth:2,fillGradientStrength:0,dx:0,dy:0,angle:0,sampleFacetPadding:.1,semanticZoomFraction:.02,minPickingSize:2});const r=this.properties.semanticZoomFraction;if(r!=null)if(it(r)){const i=this.unitView.paramMediator.createExpression(r.expr);i.addListener(()=>this.getContext().animator.requestRender()),F(this,Zs,i)}else F(this,Zs,()=>r);"geometricZoomBound"in this.properties&&console.warn('geometricZoomBound is deprecated. Use something like the following instead: "size": { "expr": "min(0.5 * pow(zoomLevel, 2), 200)" }.')}getAttributes(){return["uniqueId","facetIndex","x","y","size","semanticScore","shape","strokeWidth","dx","dy","fill","stroke","fillOpacity","strokeOpacity","angle"]}getSupportedChannels(){return[...super.getSupportedChannels(),"size","semanticScore","shape","strokeWidth","dx","dy","fill","stroke","fillOpacity","strokeOpacity","angle"]}getDefaultEncoding(){return{...super.getDefaultEncoding(),...KF}}fixEncoding(e){return wy(e,this.properties.filled),xy(e,this.properties.filled),delete e.color,delete e.opacity,e}initializeData(){var r,i;super.initializeData();const e=(i=(r=this.encoders.semanticScore)==null?void 0:r.dataAccessor)==null?void 0:i.asNumberAccessor();e&&(this.sampledSemanticScores=Float32Array.from(qF(1e4,this.unitView.getCollector().getData(),e)),this.sampledSemanticScores.sort((s,o)=>s-o))}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(VF,YF,[JF])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;this.registerMarkUniformValue("uInwardStroke",e.inwardStroke,r=>!!r),this.registerMarkUniformValue("uGradientStrength",e.fillGradientStrength),this.registerMarkUniformValue("uMinPickingSize",e.minPickingSize)}updateGraphicsData(){const e=this.unitView.getCollector();if(!e){console.debug("No collector");return}const r=e.getItemCount(),i=new MF({encoders:this.encoders,attributes:this.getAttributes(),numItems:Math.max(r,this.properties.minBufferSize||0)});i.addBatches(e.facetBatches);const s=i.toArrays();this.rangeMap.migrateEntries(s.rangeMap),this.updateBufferInfo(s)}getSemanticThreshold(){if(this.sampledSemanticScores){const e=Math.max(0,1-C(this,Zs).call(this)*this.unitView.getZoomLevel());if(e<=0)return-1/0;if(e>=1)return 1/0;{const r=this.sampledSemanticScores;return Zg(r,e)}}else return-1}prepareRender(e){const r=super.prepareRender(e);return r.push(()=>{Ra(this.markUniformInfo,{uScaleFactor:T(this,Ff,Ab).call(this),uSemanticThreshold:this.getSemanticThreshold()}),this.markUniformsAltered=!0}),r.push(()=>this.bindOrSetMarkUniformBlock()),r.push(()=>ti(this.gl,this.programInfo,this.vertexArrayInfo)),r}render(e){const r=this.gl;return this.createRenderCallback((i,s)=>{s&&Bu(r,this.vertexArrayInfo,r.POINTS,s,i)},e)}}Zs=new WeakMap,Ff=new WeakSet,Ab=function(){const e=Math.pow(2,this.properties.geometricZoomBound||0);return Math.pow(Math.min(1,this.unitView.getZoomLevel()/e),1/3)};const WF=`// Line caps
const int BUTT = 0;
const int SQUARE = 1;
const int ROUND = 2;

/** Position along the rule */
in float pos;

/** Which side of the stroke: -0.5 or 0.5 */
in float side;

flat out vec4 vColor;

/** Stroke width */
flat out float vSize;

/** The distance from the line center to the direction of normal in pixels */
out float vNormalLengthInPixels;

/** Distances from the line endings. Used for rendering the round caps and dashes */
out highp vec2 vPosInPixels;


void main(void) {
    float pixelSize = 1.0 / uDevicePixelRatio;

    // Stroke width in pixels
    float size = getScaled_size();
    float opacity = getScaled_opacity() * uViewOpacity;

    // Avoid artifacts in very thin lines by clamping the size and adjusting opacity respectively
    if (size < pixelSize) {
        opacity *= size / pixelSize;
        size = pixelSize;
    }

    vec2 a = applySampleFacet(vec2(getScaled_x(), getScaled_y()));
    vec2 b = applySampleFacet(vec2(getScaled_x2(), getScaled_y2()));

    vec2 tangent = b - a;

    float offset = 0.0;
    float relativeDiff = 0.0;
    if (uMinLength > 0.0 || uStrokeCap != BUTT) {
        float len = length(tangent * uViewportSize);

        // Elongate to reach the minimum length.
        // The length difference in pixels
        float diff = max(0.0, uMinLength - len);

        // Add line caps
        if (uStrokeCap != BUTT) {
            diff += size;
        }

        relativeDiff = diff / len;
        offset = relativeDiff * (pos - 0.5);
    }

    // Apply caps and minimum length by spreading the vertices along the tangent
    vec2 p = pos < 1.0
        ? a + tangent * (pos + offset)
        : b + tangent * offset;

    // Add an extra pixel to stroke width to accommodate edge antialiasing
    float aaPadding = pixelSize;

    // Extrude
    vec2 normal = normalize(vec2(-tangent.y, tangent.x) / uViewportSize);
    p += normal * side * (size + aaPadding) / uViewportSize;

    gl_Position = unitToNdc(p);

    vColor = vec4(getScaled_color() * opacity, opacity);
    vSize = size;
    vNormalLengthInPixels = side * (size + aaPadding);

    // TODO: Here's a precision problem that breaks round caps when zoomed in enough
    vPosInPixels = vec2(pos, (1.0 - pos)) * (1.0 + relativeDiff) * length(tangent * uViewportSize) -
        vec2(uStrokeCap != BUTT ? size / 2.0 : 0.0);
    
    setupPicking();
}
`,XF=`// Line ending
const int BUTT = 0;
const int SQUARE = 1;
const int ROUND = 2;

uniform sampler2D uDashTexture;

flat in vec4 vColor;
flat in float vSize;

/** Position on the rule along its length in pixels */
in vec2 vPosInPixels;
in float vNormalLengthInPixels;

out lowp vec4 fragColor;

void main(void) {
    float dpr = uDevicePixelRatio;

    float distanceFromEnd = -min(vPosInPixels[0], vPosInPixels[1]);
    float distance; // from the rule centerline or end
    if (distanceFromEnd > 0.0 && uStrokeCap == ROUND) {
        // round cap
        distance = length(vec2(distanceFromEnd, vNormalLengthInPixels));
    } else {
        distance = abs(vNormalLengthInPixels);
    }

    // Use a signed distance field to implement edge antialiasing
    float opacity = clamp(((vSize / 2.0 - distance) * dpr), -0.5, 0.5) + 0.5;

    if (uDashTextureSize > 0.0) {
        float pos = (vPosInPixels[0] + uStrokeDashOffset) * dpr;
        float floored = floor(pos);
        vec2 texelPositions = (floored + vec2(0.5, 1.5)) / dpr / uDashTextureSize;
      
        // Do antialiasing
        opacity *= mix(
            texture(uDashTexture, vec2(texelPositions[0], 0)).r,
            texture(uDashTexture, vec2(texelPositions[1], 0)).r,
            clamp((pos - floored), 0.0, 1.0));
    }

    fragColor = vColor * opacity;

    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
}
`,ZF=`layout(std140) uniform Mark {
    /** Minimum rule length in pixels */
    uniform mediump float uMinLength;

    uniform mediump float uDashTextureSize;
    uniform lowp int uStrokeCap;
    uniform mediump float uStrokeDashOffset;

#pragma markUniforms
};
`;class $F extends ja{constructor(t){super(t),this.dashTextureSize=0,this.augmentDefaultProperties({x2:void 0,y2:void 0,size:1,color:"black",opacity:1,minLength:0,strokeDash:null,strokeDashOffset:0,strokeCap:"butt"})}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","size","color","opacity"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size"]}fixEncoding(t){if(!(t.x&&t.y&&t.x2&&t.y2))if(t.x&&t.x2&&!t.y)t.y={value:.5},t.y2=t.y;else if(t.y&&t.y2&&!t.x)t.x={value:.5},t.x2=t.x;else if(t.x&&!t.y)t.y={value:0},t.y2={value:1},t.x2=t.x;else if(t.y&&!t.x)t.x={value:0},t.x2={value:1},t.y2=t.y;else if(t.x&&t.y&&t.y2)t.x2=t.x;else if(t.y&&t.x&&t.x2)t.y2=t.y;else if(t.y&&t.x)if(!t.x2&&Qt(t.y)&&t.y.type=="quantitative")t.x2=t.x,t.y2={datum:0};else if(!t.y2&&Qt(t.x)&&t.x.type=="quantitative")t.y2=t.y,t.x2={datum:0};else throw new Error("A bug!");else throw new Error("At a minimum, either the x or y channel must be defined in the rule mark's encoding: "+JSON.stringify(t));return t}async initializeGraphics(){await super.initializeGraphics();const t=this.gl,e=eM(this.properties.strokeDash);this.dashTexture=Ma(t,{level:0,mag:t.NEAREST,min:t.NEAREST,internalFormat:t.R8,format:t.RED,src:e,height:1}),this.dashTextureSize=e.length,this.createAndLinkShaders(WF,XF,[ZF])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const t=this.properties;this.registerMarkUniformValue("uMinLength",t.minLength),this.registerMarkUniformValue("uStrokeCap",t.strokeCap??"butt",e=>["butt","square","round"].indexOf(e)),Ra(this.markUniformInfo,{uDashTextureSize:+this.dashTextureSize}),this.markUniformsAltered=!0}updateGraphicsData(){const t=this.unitView.getCollector();if(!t){console.debug("No collector");return}const e=t.getItemCount(),r=new FF({encoders:this.encoders,attributes:this.getAttributes(),numItems:Math.max(e,this.properties.minBufferSize||0)});r.addBatches(t.facetBatches);const i=r.toArrays();this.rangeMap.migrateEntries(i.rangeMap),this.updateBufferInfo(i)}prepareRender(t){const e=super.prepareRender(t);return e.push(()=>this.bindOrSetMarkUniformBlock()),e.push(()=>ei(this.programInfo,{uDashTexture:this.dashTexture})),e.push(()=>ti(this.gl,this.programInfo,this.vertexArrayInfo)),e}render(t){const e=this.gl;return this.createRenderCallback((r,i)=>Bu(e,this.vertexArrayInfo,e.TRIANGLE_STRIP,i,r),t)}}function eM(n){if(!n)return new Uint8Array(0);if(n.length==0||n.length%2||n.findIndex(s=>Math.round(s)!=s||s<1||s>1e3)>=0)throw new Error("Invalid stroke dash pattern: "+JSON.stringify(n));const t=n.reduce((s,o)=>s+o),e=new Uint8Array(t);let r=!0,i=0;for(let s of n){for(;s;)e[i++]=r&&255||0,s--;r=!r}return e}const tM=`flat out vec4 vColor;

/** Stroke width */
flat out float vSize;

/** The distance from the line center to the direction of normal in pixels */
out float vNormalLengthInPixels;

flat out float vGamma;

const int SHAPE_ARC = 0;
const int SHAPE_DOME = 1;
const int SHAPE_DIAGONAL = 2;
const int SHAPE_LINE = 3;
const int ORIENT_VERTICAL = 0;
const int ORIENT_HORIZONTAL = 1;

float distanceFromLine(vec2 pointOnLine1, vec2 pointOnLine2, vec2 point) {
    vec2 a = point - pointOnLine1;
    vec2 b = pointOnLine2 - pointOnLine1;
    vec2 proj = dot(a, b) / dot(b, b) * b;
    return length(a - proj);
}

bool isInsideViewport(vec2 point, float marginFactor) {
    vec2 margin = uViewportSize * vec2(marginFactor);
    return point.x >= -margin.x
        && point.x <= uViewportSize.x + margin.x
        && point.y >= -margin.y
        && point.y <= uViewportSize.y + margin.y;
}

void main(void) {
    float pixelSize = 1.0 / uDevicePixelRatio;
    float opacity = getScaled_opacity() * uViewOpacity;

    // The bezier's control points
    vec2 p1, p2, p3, p4;

    vec2 a = applySampleFacet(vec2(getScaled_x(), getScaled_y())) * uViewportSize;
    vec2 b = applySampleFacet(vec2(getScaled_x2(), getScaled_y2())) * uViewportSize;

    if (uShape <= SHAPE_DOME) {
        if (uShape == SHAPE_DOME) {
            vec2 height = vec2(0.0);
            if (uOrient == ORIENT_VERTICAL) {
                p1 = vec2(min(a.x, b.x), b.y);
                p4 = vec2(max(a.x, b.x), b.y);
                height = vec2(0.0, a.y - b.y);

                if (uClampApex) {
                    if (p4.x > 0.0) {
                        p1.x = max(p1.x, -p4.x);
                    }
                    if (p1.x < uViewportSize.x) {
                        p4.x = min(p4.x, 2.0 * uViewportSize.x - p1.x);
                    }
                }

            } else {
                p1 = vec2(b.x, min(a.y, b.y));
                p4 = vec2(b.x, max(a.y, b.y));
                height = vec2(a.x - b.x, 0.0);

                if (uClampApex) {
                    if (p4.y > 0.0) {
                        p1.y = max(p1.y, -p4.y);
                    }
                    if (p1.y < uViewportSize.y) {
                        p4.y = min(p4.y, 2.0 * uViewportSize.y - p1.y);
                    }
                }
            }

            vec2 controlOffset = height / 0.75;

            p2 = p1 + controlOffset;
            p3 = p4 + controlOffset;

        } if (uShape == SHAPE_ARC) {
            p1 = a;
            p4 = b;

            vec2 chordVector = p4 - p1;
            vec2 unitChordVector = normalize(chordVector);
            vec2 chordNormal = vec2(-unitChordVector.y, unitChordVector.x);
            float chordLength = length(chordVector);

            if (chordLength > uMaxChordLength) {
                if (isInsideViewport(p1, 2.0)) {
                    chordLength = uMaxChordLength;
                    p4 = p1 + unitChordVector * uMaxChordLength;
                } else if (isInsideViewport(p4, 2.0)) {
                    chordLength = uMaxChordLength;
                    p1 = p4 - unitChordVector * uMaxChordLength;
                }
            }

            float height = max(
                chordLength / 2.0 * uArcHeightFactor,
                uMinArcHeight
            );

            // This is a bit poor approximation of a circular arc, but it's probably enough for most purposes.
            // TODO: Consider a more sophisticated approach: https://stackoverflow.com/a/44829356/1547896
            vec2 controlOffset = chordNormal * height / 0.75;

            p2 = p1 + controlOffset;
            p3 = p4 + controlOffset;
        }

    } else if (uShape == SHAPE_DIAGONAL) {
        if (uOrient == ORIENT_VERTICAL) {
            p1 = a;
            p2 = vec2(a.x, (a.y + b.y) / 2.0);
            p3 = vec2(b.x, (a.y + b.y) / 2.0);
            p4 = b;
        } else {
            p1 = a;
            p2 = vec2((a.x + b.x) / 2.0, a.y);
            p3 = vec2((a.x + b.x) / 2.0, b.y);
            p4 = b;
        }
    } else if (uShape == SHAPE_LINE) {
        p1 = a;
        p2 = (a + b) / 2.0;
        p3 = p2;
        p4 = b;
    }

    vec2 strip = vec2(
        float(gl_VertexID / 2) / float(uSegmentBreaks),
        float(gl_VertexID % 2) - 0.5
    );

    // Make segments shorter near the endpoints to make the tightly bent attachment points smoother
    float t = smoothstep(0.0, 1.0, strip.x);

    // https://stackoverflow.com/a/31317254/1547896
    vec2 C1 = p4 - 3.0 * p3 + 3.0 * p2 - p1;
    vec2 C2 = 3.0 * p3 - 6.0 * p2 + 3.0 * p1;
    vec2 C3 = 3.0 * p2 - 3.0 * p1;
    vec2 C4 = p1;

    vec2 p;
    // Skip computation at endpoints to maintain precision
    if (t == 0.0) {
        p = p1;
    } else if (t == 1.0) {
        p = p4;
    } else {
        p = C1*t*t*t + C2*t*t + C3*t + C4;
    }

    vec2 tangent = normalize(3.0*C1*t*t + 2.0*C2*t + C3);
    vec2 normal = vec2(-tangent.y, tangent.x);

    float size = getScaled_size();

    // Avoid artifacts in very thin lines by clamping the size and adjusting opacity respectively
    if (size < pixelSize) {
        opacity *= size / pixelSize;
        size = pixelSize;
    }

    // Handle minimum picking size or add an extra pixel to the stroke width to accommodate edge antialiasing
    float paddedSize = uPickingEnabled
        ? max(size, uMinPickingSize)
        : size + pixelSize;

    vNormalLengthInPixels = strip.y * paddedSize;
    
    if (uShape == SHAPE_ARC &&
        uArcFadingDistance[0] > 0.0 &&
        uArcFadingDistance[1] > 0.0 &&
        (!uNoFadingOnPointSelection || !isPointSelected()))
    {
        float d = distanceFromLine(p1, p4, p);
        float distanceOpacity = smoothstep(uArcFadingDistance[1], uArcFadingDistance[0], d);    

        // Fade out
        opacity *= distanceOpacity;

        // Collapse fully transparent triangles to skip fragment processing 
        if (distanceOpacity <= 0.0) {
            vNormalLengthInPixels = 0.0;
        }
    }

    // Extrude
    p += normal * vNormalLengthInPixels;

    gl_Position = pixelsToNdc(p);

    vec3 color = getScaled_color();

    vColor = vec4(color * opacity, opacity);

    vGamma = getGammaForColor(color);

    vSize = paddedSize;

    setupPicking();
}
`,nM=`flat in vec4 vColor;
flat in float vSize;
in float vNormalLengthInPixels;
flat in float vGamma;

out lowp vec4 fragColor;

void main(void) {
    float dpr = uDevicePixelRatio;

    float distance = abs(vNormalLengthInPixels);
    float opacity = clamp(((vSize / 2.0 - distance) * dpr), 0.0, 1.0);

    opacity = pow(opacity, vGamma);

    fragColor = vColor * opacity;

    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
}
`,rM=`layout(std140) uniform Mark {
    uniform float uArcHeightFactor;

    /** Make very small arcs visible */
    uniform float uMinArcHeight;

    /** The minimum stroke width in pixels when rendering into the picking buffer */
    uniform float uMinPickingSize;

    uniform int uShape;
    uniform int uOrient;
    uniform bool uClampApex;

    // In pixels
    uniform float uMaxChordLength;
    // In pixels
    uniform vec2 uArcFadingDistance;
    uniform bool uNoFadingOnPointSelection;

    uniform int uSegmentBreaks;

#pragma markUniforms
};
`,iM=["arc","dome","diagonal","line"],sM=["vertical","horizontal"];class oM extends ja{constructor(t){super(t),this.augmentDefaultProperties({x:0,x2:void 0,y:0,y2:void 0,size:1,color:"black",opacity:1,segments:101,arcHeightFactor:1,minArcHeight:1.5,minPickingSize:3,clampApex:!1,maxChordLength:5e4,arcFadingDistance:!1,noFadingOnPointSelection:!0,linkShape:"arc",orient:"vertical"}),this._baseInstanceExt=this.gl.getExtension("WEBGL_draw_instanced_base_vertex_base_instance")}get defaultHitTestMode(){return"endpoints"}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","size","color","opacity"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size"]}fixEncoding(t){return t.x2||(Qt(t.x)?t.x2={datum:0}:t.x2=t.x),t.y2||(Qt(t.y)?t.y2={datum:0}:t.y2=t.y),t}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(tM,nM,[rM])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const t=this.properties;this.registerMarkUniformValue("uArcFadingDistance",t.arcFadingDistance,e=>e||[0,0]),this.registerMarkUniformValue("uArcHeightFactor",t.arcHeightFactor),this.registerMarkUniformValue("uMinArcHeight",t.minArcHeight),this.registerMarkUniformValue("uMinPickingSize",t.minPickingSize),this.registerMarkUniformValue("uShape",t.linkShape,e=>iM.indexOf(e)),this.registerMarkUniformValue("uOrient",t.orient,e=>sM.indexOf(e)),this.registerMarkUniformValue("uClampApex",t.clampApex,e=>!!e),this.registerMarkUniformValue("uMaxChordLength",t.maxChordLength),this.registerMarkUniformValue("uSegmentBreaks",t.segments,e=>e),this.registerMarkUniformValue("uNoFadingOnPointSelection",t.noFadingOnPointSelection,e=>!!e)}updateGraphicsData(){const t=this.unitView.getCollector();if(!t){console.debug("No collector");return}const e=t.getItemCount(),r=new RF({encoders:this.encoders,attributes:this.getAttributes(),numItems:e});r.addBatches(t.facetBatches);const i=r.toArrays();this.rangeMap.migrateEntries(i.rangeMap),this.arrays=Object.fromEntries(Object.entries(i.arrays).map(([s,o])=>[s,{...o,data:void 0}])),this.updateBufferInfo(i)}prepareRender(t){const e=super.prepareRender(t);return e.push(()=>this.bindOrSetMarkUniformBlock()),this._baseInstanceExt?e.push(()=>ti(this.gl,this.programInfo,this.vertexArrayInfo)):e.push(()=>this.gl.bindVertexArray(null)),e}render(t){const e=this.gl,r=()=>(this.markUniformInfo.uniforms.uSegmentBreaks[0]+1)*2;return this._baseInstanceExt?this.createRenderCallback((i,s)=>{this._baseInstanceExt.drawArraysInstancedBaseInstanceWEBGL(e.TRIANGLE_STRIP,0,r(),s,i)},t):this.createRenderCallback((i,s)=>{for(const o of Object.entries(this.bufferInfo.attribs)){const[a,l]=o;l.buffer&&l.numComponents&&l.divisor&&(l.offset=i*this.arrays[a].numComponents*this.bytesPerElement.get(a))}ti(e,this.programInfo,this.bufferInfo),e.drawArraysInstanced(e.TRIANGLE_STRIP,0,r(),s)},t)}}const aM=`in mediump vec2 vertexCoord;
in lowp vec2 textureCoord;

// Width of the text (all letters)
in float width;

out vec2 vTexCoord;
out float vEdgeFadeOpacity;
flat out vec4 vColor;
flat out float vSlope;
flat out float vGamma;

struct RangeResult {
    float pos;
    float scale;
};

float minValue(vec4 v) {
    return min(min(v.x, v.y), min(v.z, v.w));
}

float maxValue(vec4 v) {
    return max(max(v.x, v.y), max(v.z, v.w));
}

/**
 * All measures are in [0, 1]
 */
RangeResult positionInsideRange(float a, float b, float width, float padding,
                                int align, bool flush) {
    float span = b - a;
    float paddedWidth = width + 2.0 * padding;

    // Is the text clearly outside the viewport
    if (a > 1.0 || b < 0.0) {
        return RangeResult(0.0, 0.0);
    }

    // How much extra space we have for adjusting the position so that the
    // text stays inside the range.
    float extra = max(0.0, span - paddedWidth);

    float pos;

    // Align the text and try to keep it inside the range and the viewport
    if (align == 0) {
        float centre = a + b;

        if (flush) {
            float leftOver = max(0.0, paddedWidth - centre);
            centre += min(leftOver, extra);

            float rightOver = max(0.0, paddedWidth + centre - 2.0);
            centre -= min(rightOver, extra);
        }

        pos = centre / 2.0;

    } else if (align < 0) {
        float edge = a;

        if (flush) {
            float over = max(0.0, -edge);
            edge += min(over, extra);
        }

        pos = edge + padding;

    } else {
        float edge = b;

        if (flush) {
            float over = max(0.0, edge - 1.0);
            edge -= min(over, extra);
        }

		// TODO: If the text spans the whole viewport, try to keep it centered if possible.

        pos = edge - padding;
    }

    // How the text should be scaled to make it fit inside the range (if it didn't fit).
    float scale = clamp((span - padding) / paddedWidth, 0.0, 1.0);

    // TODO: Fix padding in scale factor. Padding should stay constant
    return RangeResult(pos, scale);
}

vec2 calculateRotatedDimensions(float width, mat2 rotationMatrix) {
    vec2 a = abs(rotationMatrix * vec2(width / 2.0, 0.5));
    vec2 b = abs(rotationMatrix * vec2(width / 2.0, -0.5));
    return vec2(max(a.x, b.x), max(a.y, b.y)) * 2.0;
}

/** Needed when using ranged text */
ivec2 fixAlignForAngle(ivec2 align, float angleInDegrees) {
    float a = mod(angleInDegrees + 45.0, 360.0);
    int x = align.x;
    int y = -align.y;

    // TODO: Optimize by avoiding branching
    if (a < 90.0) {
        return ivec2(x, y);
    } else if (a < 180.0) {
        return ivec2(y, -x);
    } else if (a < 270.0) {
        return ivec2(-x, y);
    } else {
        return ivec2(-y, x);
    }
}

void main(void) {
    float opacity = getScaled_opacity() * uViewOpacity;
    vec2 size = vec2(getScaled_size());
    float x = getScaled_x();
    float y = getScaled_y();

    float scale = 1.0;

	float angleInDegrees = getScaled_angle();
	float angle = -angleInDegrees * PI / 180.0;
	
    float sinTheta = sin(angle);
    float cosTheta = cos(angle);
    mat2 rotationMatrix = mat2(cosTheta, sinTheta, -sinTheta, cosTheta);

    vec2 flushSize = calculateRotatedDimensions(width, rotationMatrix);

#if defined(x2_DEFINED) || defined(y2_DEFINED)
    ivec2 align = fixAlignForAngle(uAlign, angleInDegrees);
#else
    ivec2 align = uAlign;
#endif

#ifdef x2_DEFINED
    float x2 = getScaled_x2();

    if (uLogoLetter) {
        size.x = (x2 - x) * uViewportSize.x;
        x += (x2 - x) / 2.0;

    } else {
        float x2 = getScaled_x2();
        RangeResult result = positionInsideRange(
            min(x, x2), max(x, x2),
            size.x * scale * flushSize.x / uViewportSize.x, uPaddingX / uViewportSize.x,
            align.x, uFlushX);
        
        x = result.pos;
        scale *= result.scale;
    }
#endif

    // Position of the text origo 
    vec2 pos = applySampleFacet(vec2(x, y));

#ifdef y2_DEFINED
    float y2 = getScaled_y2();
    vec2 pos2 = applySampleFacet(vec2(x, y2));

    if (uLogoLetter) {
        size.y = (pos2.y - pos.y) * uViewportSize.y;
        pos.y += (pos2.y - pos.y) / 2.0;

    } else {
        RangeResult result = positionInsideRange(
            min(pos.y, pos2.y), max(pos.y, pos2.y),
            size.y * scale * flushSize.y / uViewportSize.y, uPaddingY / uViewportSize.y,
            align.y, uFlushY);
        
        pos.y = result.pos;
        scale *= result.scale;
    }
#endif

    if (scale < 1.0) {
        if (uSqueeze) {
            vec2 scaleFadeExtent = vec2(3.0, 6.0) / size;

            if (scale  < scaleFadeExtent[0]) {
                gl_Position = vec4(0.0);
                return;
            }

            size *= scale;
            opacity *= linearstep(scaleFadeExtent[0], scaleFadeExtent[1], scale);

        } else if (scale < 1.0) {
            // Eliminate the text
            gl_Position = vec4(0.0);
            return;
        }
    }

    // Position of the character vertex in relation to the text origo
    vec2 charPos = rotationMatrix * (vertexCoord * size + uD);

    // Position of the character vertex inside the unit viewport
    vec2 unitPos = pos + charPos / uViewportSize;

    gl_Position = unitToNdc(unitPos);

    // Controls antialiasing of the SDF
    vSlope = max(1.0, min(size.x, size.y) / uSdfNumerator * uDevicePixelRatio);

    vec3 color = getScaled_color();

    // Premultiply alpha
    vColor = vec4(color * opacity, opacity);

    // Do something like gamma correction for text when the color is close to black or white.
    vGamma = getGammaForColor(color);

    vTexCoord = textureCoord;

    // Edge fading. The implementation is simplistic and fails with primitives that
    // span the whole viewport. However, it works just fine with reasonable font sizes.
    // x: top, y: right, z: bottom, w: left
    if (maxValue(uViewportEdgeFadeDistance) > -pow(10.0, 10.0)) { // -Infinity would be nice
        vEdgeFadeOpacity = minValue(
            ((vec4(1.0, 1.0, 0.0, 0.0) + vec4(-1.0, -1.0, 1.0, 1.0) * unitPos.yxyx) *
                uViewportSize.yxyx - uViewportEdgeFadeDistance) / uViewportEdgeFadeWidth);
    } else {
        vEdgeFadeOpacity = 1.0;
    }

    setupPicking();
}
`,cM=`uniform sampler2D uTexture;

in vec2 vTexCoord;
in float vEdgeFadeOpacity;
flat in vec4 vColor;
flat in float vSlope;
flat in float vGamma;

out lowp vec4 fragColor;

float median(float r, float g, float b) {
    return max(min(r, g), min(max(r, g), b));
}

float getDist(vec2 uv) {
    vec3 c = texture(uTexture, uv).rgb;
    return 1.0 - median(c.r, c.g, c.b);
}

/**
 * Calculates the super-sampled distance to the edge.
 * This is used to avoid aliasing when rendering small text,
 * as mip-mapping cannot be used here.
 * The distance is averaged over a grid of n x n samples.
 */
float getSuperDist(vec2 uv) {
    vec2 dx = dFdx(uv);
    vec2 dy = dFdy(uv);

    float n = 2.0;

    float sum = 0.0;
    for (float x = 0.5; x < n; x++){
        for (float y = 0.5; y < n; y++) {
            sum += getDist(
                uv +
                x / n * dx +
                y / n * dy
            ); 
        }
    }

    return sum / (n * n);
}

void main() {
    float sigDist = getSuperDist(vTexCoord);

    float slope = vSlope;
    if (uLogoLetter) {
        // Using screen-space derivatives for logo letters because skewed aspect ratios
        // result in blurry edges otherwise. However, use of screen-space derivatives
        // results in crappy looking text with regular letters text.
        slope = 0.7 / length(vec2(dFdy(sigDist), dFdx(sigDist)));
    }

    float opa = clamp((sigDist - 0.5) * slope + 0.5, 0.0, 1.0);
    opa *= clamp(vEdgeFadeOpacity, 0.0, 1.0);

    opa = pow(opa, vGamma);

    fragColor = vColor * opa;

    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
}
`,lM=`layout(std140) uniform Mark {
    uniform mediump float uSdfNumerator;

    uniform mediump vec2 uD; // dx & dy

    uniform mediump vec4 uViewportEdgeFadeWidth;
    uniform mediump vec4 uViewportEdgeFadeDistance;
        
    uniform bool uSqueeze;
    uniform bool uLogoLetter;

    // x: -1, 0, 1 = left, center, right
    // y: -1, 0, 1 = top, middle, bottom 
    uniform lowp ivec2 uAlign;

    uniform mediump float uPaddingX;
    uniform bool uFlushX;
    uniform mediump float uPaddingY;
    uniform bool uFlushY;

#pragma markUniforms
};
`,uM={left:-1,center:0,right:1},fM={top:-1,middle:0,bottom:1,alphabetic:1};class AM extends ja{constructor(t){super(t),this.augmentDefaultProperties({x:.5,y:.5,x2:void 0,y2:void 0,text:"",size:11,color:"black",opacity:1,font:void 0,fontStyle:void 0,fontWeight:void 0,align:"center",baseline:"middle",dx:0,dy:0,angle:0,fitToBand:!1,squeeze:!0,paddingX:0,paddingY:0,flushX:!0,flushY:!0,logoLetters:!1,viewportEdgeFadeWidthTop:0,viewportEdgeFadeWidthRight:0,viewportEdgeFadeWidthBottom:0,viewportEdgeFadeWidthLeft:0,viewportEdgeFadeDistanceTop:-1/0,viewportEdgeFadeDistanceRight:-1/0,viewportEdgeFadeDistanceBottom:-1/0,viewportEdgeFadeDistanceLeft:-1/0}),this.font=this.properties.font?t.context.fontManager.getFont(this.properties.font,this.properties.fontStyle,this.properties.fontWeight):t.context.fontManager.getDefaultFont(),this.setupExprRefsNeedingGraphicsUpdate(["text","fitToBand","logoLetters"])}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","color","size","opacity","angle"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size","text","angle"]}fixEncoding(t){for(const e of Wr)this.properties.fitToBand&&gd(t,e);return t}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(aM,cM,[lM])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const t=this.properties,e=this.font.metrics.common.base*.35*(this.properties.logoLetters?.5:1);this.registerMarkUniformValue("uPaddingX",t.paddingX),this.registerMarkUniformValue("uPaddingY",t.paddingY),this.registerMarkUniformValue("uFlushX",t.flushX,r=>!!r),this.registerMarkUniformValue("uFlushY",t.flushY,r=>!!r),this.registerMarkUniformValue("uSqueeze",t.squeeze,r=>!!r),Ra(this.markUniformInfo,{uAlign:[uM[t.align],fM[t.baseline]],uD:[t.dx,-t.dy],uLogoLetter:!!t.logoLetters,uSdfNumerator:e,uViewportEdgeFadeWidth:[t.viewportEdgeFadeWidthTop,t.viewportEdgeFadeWidthRight,t.viewportEdgeFadeWidthBottom,t.viewportEdgeFadeWidthLeft],uViewportEdgeFadeDistance:[t.viewportEdgeFadeDistanceTop,t.viewportEdgeFadeDistanceRight,t.viewportEdgeFadeDistanceBottom,t.viewportEdgeFadeDistanceLeft]})}updateGraphicsData(){const t=this.unitView.getCollector();if(!t){console.debug("No collector");return}const e=t.getData(),r=this.encoding,i=this.encoders.text;let s=0;const o="format"in r.text?Ze(r.text.format):c=>c;for(const c of e){const u=o(i(c)),f=Ce(u)?u:u===null?"":""+u;s+=f&&f.length||0}const a=new NF({encoders:this.encoders,attributes:this.getAttributes(),properties:this.properties,fontMetrics:this.font.metrics,numCharacters:Math.max(s,this.properties.minBufferSize||1024)});a.addBatches(t.facetBatches);const l=a.toArrays();this.rangeMap.migrateEntries(l.rangeMap),this.updateBufferInfo(l)}prepareRender(t){const e=super.prepareRender(t);return e.push(()=>{ei(this.programInfo,{uTexture:this.font.texture})}),e.push(()=>this.bindOrSetMarkUniformBlock()),e.push(()=>ti(this.gl,this.programInfo,this.vertexArrayInfo)),e}render(t){const e=this.gl;return this.createRenderCallback((r,i)=>Bu(e,this.vertexArrayInfo,e.TRIANGLES,i,r),t)}}const Ey=1;function pd(){let n=[0,1],t=[0,1],e=1,r=1,i=0,s=0,o=.5,a=0;const c=u=>(u+o-n[0])/e*r+t[0];return c.invert=u=>(u-t[0])/r*e+n[0]-o,c.domain=function(u){if(arguments.length){n=KB(u),e=n[1]-n[0];const f=n[0]===0&&n[0]===0;if(e<Ey&&!f){e=Ey;const h=(n[0]+n[1])/2;n[0]=h-e/2,n[1]=h+e/2}return c}else return n.slice()},c.range=function(u){return arguments.length?(t=[...u],r=t[1]-t[0],c):t},c.numberingOffset=function(u){return arguments.length?(a=u,c):a},c.padding=function(u){return arguments.length?(s=u,i=Math.min(1,u),c):i},c.paddingInner=function(u){return arguments.length?(i=Math.min(1,u),c):i},c.paddingOuter=function(u){return arguments.length?(s=u,c):s},c.align=function(u){return arguments.length?(o=Math.max(0,Math.min(1,u)),c):o},c.step=()=>r/e,c.bandwidth=()=>c.step(),c.ticks=u=>{const f=c.align(),h=c.numberingOffset();return Ml(n[0]-f+h,n[1]-f+h,Math.min(u,Math.ceil(e))).filter(Number.isInteger).map(A=>A-a)},c.tickFormat=(u,f)=>{if(f)throw new Error("Index scale's tickFormat does not support a specifier!");const A=_r(n[0],n[1],Math.min(u,Math.ceil(e)))<1e5?Ze(","):Ze(".3s");return d=>A(d+a)},c.copy=()=>pd().domain(n).range(t).paddingInner(i).paddingOuter(s).numberingOffset(a),c}const by=Ze(",d");function hM(n,t){return n.chrom+":"+by(Math.floor(n.pos+1))+"-"+(n.chrom!=t.chrom?t.chrom+":":"")+by(Math.ceil(t.pos))}const By={dm6:`chr3R	32079331
chr3L	28110227
chr2R	25286936
chrX	23542271
chr2L	23513712
chrY	3667352
chr4	1348131
chrM	19524`,hg18:`chr1	247249719
chr2	242951149
chr3	199501827
chr4	191273063
chr5	180857866
chr6	170899992
chr7	158821424
chr8	146274826
chr9	140273252
chr10	135374737
chr11	134452384
chr12	132349534
chr13	114142980
chr14	106368585
chr15	100338915
chr16	88827254
chr17	78774742
chr18	76117153
chr19	63811651
chr20	62435964
chr21	46944323
chr22	49691432
chrX	154913754
chrY	57772954
chrM	16571`,hg19:`chr1	249250621
chr2	243199373
chr3	198022430
chr4	191154276
chr5	180915260
chr6	171115067
chr7	159138663
chr8	146364022
chr9	141213431
chr10	135534747
chr11	135006516
chr12	133851895
chr13	115169878
chr14	107349540
chr15	102531392
chr16	90354753
chr17	81195210
chr18	78077248
chr19	59128983
chr20	63025520
chr21	48129895
chr22	51304566
chrX	155270560
chrY	59373566
chrM	16571`,hg38:`chr1	248956422
chr2	242193529
chr3	198295559
chr4	190214555
chr5	181538259
chr6	170805979
chr7	159345973
chr8	145138636
chr9	138394717
chr10	133797422
chr11	135086622
chr12	133275309
chr13	114364328
chr14	107043718
chr15	101991189
chr16	90338345
chr17	83257441
chr18	80373285
chr19	58617616
chr20	64444167
chr21	46709983
chr22	50818468
chrX	156040895
chrY	57227415
chrM	16569`,mm9:`chr1	197195432
chr2	181748087
chr3	159599783
chr4	155630120
chr5	152537259
chr6	149517037
chr7	152524553
chr8	131738871
chr9	124076172
chr10	129993255
chr11	121843856
chr12	121257530
chr13	120284312
chr14	125194864
chr15	103494974
chr16	98319150
chr17	95272651
chr18	90772031
chr19	61342430
chrX	166650296
chrY	15902555
chrM	16299`,mm10:`chr1	195471971
chr2	182113224
chr3	160039680
chr4	156508116
chr5	151834684
chr6	149736546
chr7	145441459
chr8	129401213
chr9	124595110
chr10	130694993
chr11	122082543
chr12	120129022
chr13	120421639
chr14	124902244
chr15	104043685
chr16	98207768
chr17	94987271
chr18	90702639
chr19	61431566
chrX	171031299
chrY	91744698
chrM	16299`};function dM(n){if(!(n in By))throw new Error(`Unknown assembly: ${n}`);return By[n].split(`
`).map(t=>{const e=t.split("	");return{name:e[0],size:parseInt(e[1])}})}const gM=/^([A-Za-z]+:)?\/\//;function ui(n,t){if(t&&gM.test(t))return t;const e=typeof n=="function"?n():n;if(!e)return t;if(!t)return e;if(/[#?]/.test(e))throw new Error(`Cannot append to a url with query or hash. Append: ${t}, base: ${e}`);return vy(e)+t}function vy(n){const t=n.replace(/[^/]*$/,"");return t===""?void 0:t.endsWith("://")?n+"/":t}class pM{constructor(t){if(this.config={name:"custom",...t},"baseUrl"in t)throw new Error("The `baseUrl` property in genome config has been removed in GenomeSpy v0.52.0. Use `url` instead. See https://genomespy.app/docs/genomic-data/genomic-coordinates/.");if(!md(t))throw new Error("Not a genome configuration: "+JSON.stringify(t));if(this.chromosomes=[],this.cumulativeChromPositions=new Map,this.chromosomesByName=new Map,this.startByIndex=[],this.totalSize=0,Sy(this.config))this.setChromSizes(this.config.contigs);else if(!Cd(this.config)){const e=dM(this.config.name);if(e)this.setChromSizes(e);else throw new Error(`Unknown genome: ${this.config.name}. Please provide contigs or a URL. See https://genomespy.app/docs/genomic-data/genomic-coordinates/.`)}}get name(){return this.config.name}async load(t){if(Cd(this.config))try{const e=ui(t,this.config.url),r=await fetch(e);if(!r.ok)throw new Error(`${r.status} ${r.statusText}`);this.setChromSizes(mM(await r.text()))}catch(e){throw new Error(`Could not load chrom sizes: ${this.config.url}. Reason: ${e.message}`)}}hasChrPrefix(){return this.chromosomes.some(t=>t.name.startsWith("chr"))}setChromSizes(t){let e=0;this.startByIndex=[0];for(let r=0;r<t.length;r++){this.startByIndex.push(e);const i=t[r].size,s={...t[r],continuousStart:e,continuousEnd:e+i,continuousInterval:[e,e+i],index:r,number:r+1,odd:!(r&1)};this.chromosomes.push(s);const o=s.name.replace(/^chr/i,"");for(const a of["chr"+o,"CHR"+o,"Chr"+o,s.number,""+s.number,o,s.name])this.cumulativeChromPositions.set(a,e),this.chromosomesByName.set(a,s);e+=s.size}this.totalSize=e}getExtent(){return[0,this.totalSize]}toContinuous(t,e){let r=this.cumulativeChromPositions.get(t);if(r===void 0)throw new Error("Unknown chromosome/contig: "+t);return r+ +e}toChromosome(t){if(t>this.totalSize)return;t=Math.floor(t);const e=Zn(this.startByIndex,t)-1;if(e>0&&e<=this.chromosomes.length)return this.chromosomes[e-1]}toChromosomal(t){const e=this.toChromosome(t);if(e)return{chrom:e.name,pos:Math.floor(t)-e.continuousStart}}getChromosome(t){return this.chromosomesByName.get(t)}formatInterval(t){return hM(...this.toChromosomalInterval(t))}toChromosomalInterval(t){const e=this.toChromosomal(t[0]+.5),r=this.toChromosomal(t[1]-.5);return r.pos+=1,[e,r]}toContinuousInterval(t){var i;let[e,r]=t;return r||(r=e),[this.toContinuous(e.chrom,e.pos??0),this.toContinuous(r.chrom,r.pos??((i=this.chromosomesByName.get(r.chrom))==null?void 0:i.size))]}toDiscreteChromosomeIntervals(t){const e=t[0],r=t[1],i=[];if(e.chrom===r.chrom)i.push({chrom:e.chrom,startPos:e.pos,endPos:r.pos});else{const s=this.chromosomes.findIndex(a=>a.name===e.chrom),o=this.chromosomes.findIndex(a=>a.name===r.chrom);i.push({chrom:e.chrom,startPos:e.pos,endPos:this.chromosomes[s].size});for(let a=s+1;a<o;a++)i.push({chrom:this.chromosomes[a].name,startPos:0,endPos:this.chromosomes[a].size});i.push({chrom:r.chrom,startPos:0,endPos:r.pos})}return i}continuousToDiscreteChromosomeIntervals(t){return this.toDiscreteChromosomeIntervals([this.toChromosomal(t[0]),this.toChromosomal(t[1])])}parseInterval(t){const e=t.match(/^(chr[0-9A-Z]+)(?::([0-9,]+)(?:-(?:(chr[0-9A-Z]+):)?([0-9,]+))?)?$/);if(e){const r=e[1];if(e.slice(2).every(a=>a===void 0)){const a=this.getChromosome(r);return a?[a.continuousStart,a.continuousEnd]:void 0}const i=e[3]||r,s=parseInt(e[2].replace(/,/g,"")),o=e[4]!==void 0?parseInt(e[4].replace(/,/g,"")):s;return[this.toContinuous(r,s-1),this.toContinuous(i,o)]}}}function mM(n){return NB(n).map(([t,e])=>({name:t,size:parseInt(e)}))}function Qy(n){return et(n)&&"chrom"in n}function CM(n){return n.every(Qy)}function md(n){return et(n)&&("name"in n||Cd(n)||Sy(n))}function Cd(n){return md(n)&&"url"in n}function Sy(n){return md(n)&&"contigs"in n}function yM(){const n=pd().numberingOffset(1);let t;n.genome=function(r){return arguments.length?(t=r,n):t},n.ticks=r=>{if(!t)return[];const i=n.domain(),s=n.numberingOffset(),[o,a]=[Math.max(i[0],0),Math.min(i[1],t.totalSize-1)].map(u=>t.toChromosome(u)),l=Math.max(1,_r(i[0],i[1],r)),c=[];for(let u=o.index;u<=a.index;u++){const f=t.chromosomes[u],h=Math.max(f.continuousStart+l,i[0]-(i[0]-f.continuousStart)%l),A=Math.min(f.continuousEnd-l/4,i[1]+1);for(let d=h;d<=A;d+=l){const g=d-s;g>=i[0]&&g<i[1]&&c.push(g)}}return c},n.tickFormat=(r,i)=>{if(!t)return;if(i)throw new Error("Locus scale's tickFormat does not support a specifier!");const s=n.domain(),o=s[1]-s[0],a=n.numberingOffset(),c=_r(s[0],s[1],Math.min(r,Math.ceil(o)))<1e6?Ze(","):Ze(".3s"),u=f=>f-t.toChromosome(f).continuousStart;return f=>c(u(f)+a)};const e=n.copy;return n.copy=()=>e().genome(t),n}function wM(n){return n.type=="locus"}function xM(n,t){const e=Wa(n);return e?e.toChromosomal(t):t}function IM(n,t){const e=Wa(n);return e&&Qy(t)?e.toContinuous(t.chrom,t.pos):t}function EM(n,t){const e=Wa(n);return e&&CM(t)?e.toContinuousInterval(t):t}function bM(n,t){const e=Wa(n);return e?e.toChromosomalInterval(t):t}function BM(n){const t=Wa(n);if(!t)throw new Error("No genome has been defined!");return t.getExtent()}function Wa(n){if(n&&"toChromosomal"in n)return n;if(n&&"genome"in n)return n.genome()}/*!
 * Adapted from vega-encode:
 * https://github.com/vega/vega/blob/master/packages/vega-encode/src/ticks.js
 *
 * Copyright (c) 2015-2018, University of Washington Interactive Data Lab
 * All rights reserved.
 *
 * BSD-3-Clause License: https://github.com/vega/vega-lite/blob/master/LICENSE
 */function Dy(n,t,e){return ft(t)&&e!=null&&(t=Math.min(t,~~(Go(n.domain())/e)||1)),et(t)&&(t.step,t=t.interval),t}function ky(n,t,e){var r=n.range(),i=Math.floor(r[0]),s=Math.ceil(qt(r));if(i>s&&(r=s,s=i,i=r),t=t.filter(function(a){return a=n(a),i<=a&&a<=s}),e>0&&t.length>1){for(var o=[t[0],qt(t)];t.length>e&&t.length>=3;)t=t.filter(function(a,l){return!(l%2)});t.length<3&&(t=o)}return t}function vM(n,t){return n.bins?ky(n,QM(n.bins,t)):n.ticks?n.ticks(t):n.domain()}function QM(n,t){var e=n.length,r=~~(e/(t||e));return r<2?n.slice():n.filter(function(i,s){return!(s%r)})}function SM(n,t,e){var r=n.tickFormat?n.tickFormat(t,e):e?Ze(e):String;if(W1(n.type)){var i=kM(e);r=n.bins?i:DM(r,i)}return r}function DM(n,t){return function(e){return n(e)?t(e):""}}function kM(n){var t=Wi(n||",");if(t.precision==null){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1;break}return FM(Ze(t),Ze(".1f")(1)[1])}else return Ze(t)}function FM(n,t){return function(e){var r=n(e),i=r.indexOf(t),s,o;if(i<0)return r;for(s=MM(r,i),o=s<r.length?r.slice(s):"";--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function MM(n,t){var e=n.lastIndexOf("e"),r;if(e>0)return e;for(e=n.length;--e>t;)if(r=n.charCodeAt(e),r>=48&&r<=57)return e+1}/*!
 * Adapted from vega-encode:
 * https://github.com/vega/vega/blob/master/packages/vega-encode/src/Scale.js
 *
 * Copyright (c) 2015-2018, University of Washington Interactive Data Lab
 * All rights reserved.
 *
 * BSD-3-Clause License: https://github.com/vega/vega-lite/blob/master/LICENSE
 */const RM="locus",NM="index";var TM=5;function PM(n){const t=n.type;return!n.bins&&(t===gs||t===Ua||t===Ga)}function Fy(n){return Ke(n)&&![gn,NM,RM].includes(n)}function My(n){return n||{warn:(t,...e)=>console.warn(t,...e)}}var LM=vl(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma","zoom","fp64","name"]);function Ry(n,t,e){e=My(e);for(const r in n)if(!LM[r]){if(r==="padding"&&Fy(t.type))continue;Ft(t[r])?t[r](n[r]):e.warn("Unsupported scale property: "+r)}VM(t,n,_M(t,n,Ny(t,n,e)))}function OM(n,t){const e=UM(n),r=fe(e);if(!r)throw new Error("Unknown scale type: "+e);const i=r();return!n.domain&&Ke(i.type)&&(n.domain=[0,0]),Ry(n,i,t),i}function UM(n){var t=n.type,e="",r;return t===gn?gn+"-"+gs:(GM(n)&&(r=n.rawDomain?n.rawDomain.length:n.domain?n.domain.length+ +(n.domainMid!=null):0,e=r===2?gn+"-":r===3?ps+"-":""),(e+t||gs).toLowerCase())}function GM(n){const t=n.type;return Ke(t)&&t!==H1&&t!==_1&&(n.scheme||n.range&&n.range.length&&n.range.every(Ce))}function Ny(n,t,e){if(!n.domain)return 0;e=My(e);var r=zM(n,t.domainRaw,e);if(r>-1)return r;var i=t.domain,s=n.type,o=t.zero||t.zero===void 0&&PM(n),a,l;return i?(Fy(s)&&t.padding&&i[0]!==qt(i)&&(i=HM(s,i,t.range,t.padding,t.exponent,t.constant)),(o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null&&(l=t.domainMid,(l<i[0]||l>i[a])&&e.warn("Scale domainMid exceeds domain min or max.",l),i.splice(a,0,l))),n.domain(Ty(s,i,e)),s===id&&n.unknown(t.domainImplicit?Bh:void 0),t.nice&&n.nice&&n.nice(t.nice!==!0&&Dy(n,t.nice)||null),i.length):0}function zM(n,t,e){return t?(n.domain(Ty(n.type,t,e)),t.length):-1}function HM(n,t,e,r,i,s){e??(e=[0,1]);var o=Math.abs(qt(e)-e[0]),a=o/(o-2*r),l=n===gr?yg(t,null,a):n===Ga?qf(t,null,a,.5):n===Ua?qf(t,null,a,i||1):n===Uu?Xb(t,null,a,s||1):Cg(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function Ty(n,t,e){if(W1(n)){var r=Math.abs(t.reduce(function(i,s){return i+(s<0?-1:s>0?1:0)},0));r!==t.length&&e.warn("Log scale domain includes zero: "+jf(t))}return t}function _M(n,t,e){let r=t.bins;if(r&&!Xe(r)){const i=(r.start==null||r.stop==null)&&n.domain(),s=r.start==null?i[0]:r.start,o=r.stop==null?qt(i):r.stop,a=r.step;a||Te("Scale bins parameter missing step property."),r=Zo(s,o+a,a)}return r?n.bins=r:n.bins&&delete n.bins,n.type===od&&(r?!t.domain&&!t.domainRaw&&(n.domain(r),e=r.length):n.bins=n.domain()),e}function VM(n,t,e){var r=n.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=YM(r,t,e);else if(t.scheme&&(s=JM(r,t,e),Ft(s))){if(n.interpolator)return n.interpolator(s);Te(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&zu(r))return n.interpolator(Hu(yd(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&n.interpolate?n.interpolate(X1(t.interpolate,t.interpolateGamma)):Ft(n.round)?n.round(i):Ft(n.rangeRound)&&n.interpolate(i?La:hr),s&&n.range(yd(s,t.reverse))}function YM(n,t,e){n!==J1&&n!==sd&&Te("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=n===sd?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*nd(e,i,r)]}function JM(n,t,e){var r=t.schemeExtent,i,s;return Xe(t.scheme)?s=Hu(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=cd(i),s||Te(`Unrecognized scheme name: ${t.scheme}`)),e=n===Y1?e+1:n===od?e-1:n===rd||n===V1?+t.schemeCount||TM:e,zu(n)?Py(s,r,t.reverse):Ft(s)?eF(Py(s,r),e):n===id?s:s.slice(0,e)}function Py(n,t,e){return Ft(n)&&(t||e)?$8(n,yd(t||[0,1],e)):n}function yd(n,t){return t?n.slice().reverse():n}class qM{constructor({getParamMediator:t,onRangeChange:e,onDomainChange:r,getGenomeStore:i}){D(this,zt);D(this,wn);D(this,Sc,new Set);D(this,Dc);D(this,kc);D(this,Fc);D(this,$s);D(this,eo,0);F(this,Dc,t),F(this,kc,e),F(this,Fc,r),F(this,$s,i)}get scale(){return C(this,wn)}getLocusGenome(){var r;const t=(r=C(this,$s))==null?void 0:r.call(this),e=t==null?void 0:t.getGenome();if(!e)throw new Error("No genome has been defined!");return e}createScale(t){const e=OM({...T(this,zt,J0).call(this,t),range:void 0});return e.props=t,"unknown"in e&&e.unknown(null),F(this,wn,e),T(this,zt,hb).call(this,t),T(this,zt,q0).call(this),T(this,zt,db).call(this),C(this,wn)}reconfigureScale(t){const e=C(this,wn);!e||e.type=="null"||(Ry({...T(this,zt,J0).call(this,t),range:void 0},e),e.props=t,T(this,zt,q0).call(this))}withDomainNotificationsSuppressed(t){F(this,eo,C(this,eo)+1);try{t()}finally{F(this,eo,C(this,eo)-1)}}}wn=new WeakMap,Sc=new WeakMap,Dc=new WeakMap,kc=new WeakMap,Fc=new WeakMap,$s=new WeakMap,eo=new WeakMap,zt=new WeakSet,hb=function(t){var s;const e=C(this,wn);if(!e||!wM(e))return;const r=(s=C(this,$s))==null?void 0:s.call(this),i=r==null?void 0:r.getGenome(t.assembly);if(!i)throw new Error("No genome has been defined!");e.genome(i)},J0=function(t){const e=t,{assembly:r,domainIndexer:i,...s}=e;return s},q0=function(){const t=C(this,wn);if(!t)return;const e=t.props;C(this,Sc).forEach(s=>s.invalidate());const r=jM({range:e.range,reverse:e.reverse,createExpression:s=>C(this,Dc).call(this).createExpression(s),registerExpr:s=>C(this,Sc).add(s)});if(!r)return;if("values"in r){t.range(r.values);return}const i=()=>t.range(r.evaluate());r.setup(i),i()},db=function(){const t=C(this,wn);if(!t)return;const e=t.range,r=t.domain,i=()=>{var o;return(o=C(this,kc))==null?void 0:o.call(this)};KM(t,{onRangeChange:i,onDomainChange:()=>{var o;C(this,eo)>0||(o=C(this,Fc))==null||o.call(this)},range:e,domain:r}),i()};function KM(n,{onRangeChange:t,onDomainChange:e,range:r,domain:i}){typeof r=="function"&&(n.range=(function(s){if(arguments.length)r(s),t==null||t();else return r()})),typeof i=="function"&&(n.domain=(function(s){if(arguments.length)i(s),e==null||e();else return i()}))}function jM({range:n,reverse:t,createExpression:e,registerExpr:r}){if(!n||!Xe(n))return null;const i=(s,o)=>o?s.slice().reverse():s;if(n.some(it)){let s;return{dynamic:!0,evaluate:()=>i(s.map(l=>l()),t),setup:l=>{s=n.map(c=>{if(it(c)){const u=e(c.expr);return u.addListener(l),r(u),()=>u(null)}return()=>c})}}}return{dynamic:!1,values:i(n,t)}}function Ku(n,t,e){if(e=e||[],n.some(o=>o===null)){if(n.every(o=>o===null))return null;throw console.warn(n),new Error("Cannot merge objects with nulls!")}const r={},i=(o,a)=>o===a||ys(o)&&ys(a)||ys(o)&&a===!0||o===!0&&et(a)||Array.isArray(o)&&Array.isArray(a)&&o.length===a.length&&o.every((l,c)=>l===a[c]),s=o=>{for(let a in o){const l=o[a];if(!e.includes(a)&&l!==void 0)if(r[a]!==void 0&&!i(r[a],l))console.warn(`Conflicting property ${a} of ${t}: (${JSON.stringify(r[a])} and ${JSON.stringify(o[a])}). Using ${JSON.stringify(r[a])}.`);else{const c=r[a];if(ys(c))ys(l)&&(r[a]=Ku([c,l],a));else if(ys(l)){if(!(c===!0||c===void 0))throw new Error("Bug in merge! Target is: "+c);r[a]=Ku([{},l],a)}else r[a]=l}}};for(const o of n)s(o);return r}function ys(n){return et(n)&&!Array.isArray(n)}const Ly="quantitative",Oy="ordinal",Uy="nominal",Xa="locus",Gy="index";function WM(n,t,e){const r={};return e&&(r.zero=!1),Ba(n)?r.nice=!e:rr(n)?r.scheme=t==Uy?"tableau10":t==Oy?"blues":"viridis":eu(n)?r.range=n=="shape"?["circle","square","triangle-up","cross","diamond"]:[]:n=="size"?r.range=[0,400]:n=="angle"&&(r.range=[0,360]),r}function XM(n,t){if(t==Gy||t==Xa){if(zA(n))return t;throw new Error(n+" does not support "+t+" data type. Only positional channels do.")}const e={x:["band","band","linear"],y:["band","band","linear"],size:[void 0,"point","linear"],opacity:[void 0,"point","linear"],fillOpacity:[void 0,"point","linear"],strokeOpacity:[void 0,"point","linear"],color:["ordinal","ordinal","linear"],fill:["ordinal","ordinal","linear"],stroke:["ordinal","ordinal","linear"],strokeWidth:[void 0,void 0,"linear"],shape:["ordinal","ordinal",void 0],dx:[void 0,void 0,"null"],dy:[void 0,void 0,"null"],angle:[void 0,void 0,"linear"],sample:["null",void 0,void 0]},i=["sample"].includes(n)?"null":e[n]?e[n][[Uy,Oy,Ly].indexOf(t)]:t==Ly?"linear":"ordinal";if(i===void 0)throw new Error('Channel "'+n+'" is not compatible with "'+t+'" data type. Use of a proper scale may be needed.');return i}function ZM(n,t){Ba(t)&&n.type!=="ordinal"&&(n.range=[0,1]),t=="opacity"&&Ke(n.type)&&(n.clamp=!0)}function $M({channel:n,dataType:t,members:e,isExplicitDomain:r}){const i=Array.from(e).map(a=>a.channelDef.scale).filter(a=>a!==void 0),s=Ku(i,"scale",["domain"]);if(s===null||s.type=="null")return{type:"null"};const o={...WM(n,t,r),...s};return o.type||(o.type=XM(n,t)),n=="y"&&pr(o.type)&&o.reverse==null&&(o.reverse=!0),o.range&&o.scheme&&delete o.scheme,!("zoom"in o)&&[Gy,Xa].includes(o.type)&&(o.zoom=!0),ZM(o,n),o}class Za extends Array{constructor(){super(),this.type=void 0}extend(t){return this}extendAll(t){if(t instanceof Za&&t.type!=this.type)throw new Error(`Cannot combine different types of domains: ${this.type} and ${t.type}`);for(const e of t)this.extend(e);return this}extendAllWithAccessor(t,e){for(const r of t)this.extend(e(r));return this}}class wd extends Za{constructor(){super(),this.type="quantitative"}extend(t){return t==null||Number.isNaN(t)?this:(t=+t,this.length?t<this[0]?this[0]=t:t>this[1]&&(this[1]=t):(this.push(t),this.push(t)),this)}}class zy extends Za{constructor(){super(),this.type="ordinal",this.uniqueValues=new Set}extend(t){return t==null||Number.isNaN(t)?this:(this.uniqueValues.has(t)||(this.uniqueValues.add(t),this.push(t)),this)}}class xd extends zy{constructor(){super(),this.type="nominal"}}class eR extends Za{constructor(t){super();let e=0;for(let r=1;r<t.length;r++)e+=Math.sign(t[r]-t[r-1]);if(Math.abs(e)!=t.length-1)throw new Error("Piecewise domain must be strictly increasing or decreasing: "+JSON.stringify(t));t.forEach(r=>this.push(r))}extend(t){if(this.includes(t))return this;throw new Error("Piecewise domains are immutable and cannot be unioned!")}}const Hy={quantitative:wd,index:wd,locus:wd,nominal:xd,ordinal:zy};function _y(n,t){if(n=="quantitative"&&tR(t)){const e=new eR(t);return e.type=n,e}else if(Hy[n]){const e=new Hy[n];return e.type=n,t&&e.extendAll(t),e}throw new Error("Unknown type: "+n)}function tR(n){return n&&n.length>0&&n.length!=2&&n.every(t=>typeof t=="number")}class nR{constructor({getMembers:t,getType:e,getLocusExtent:r,fromComplexInterval:i}){D(this,to);D(this,no);D(this,Mc);D(this,Rc);D(this,Si);F(this,to,t),F(this,no,e),F(this,Mc,r),F(this,Rc,i)}get initialDomainSnapshot(){return C(this,Si)}hasConfiguredDomain(){return!!this.getConfiguredDomain()}getConfiguredOrDefaultDomain(t=!1){return this.getConfiguredDomain()??sR(C(this,no).call(this),C(this,Mc),t?this.getDataDomain():void 0)}getConfiguredDomain(){return rR(C(this,to).call(this),C(this,Rc))}getDataDomain(){return iR(C(this,to).call(this),C(this,no))}captureInitialDomain(t,e){if(!C(this,Si)&&Ke(t.type)){const r=t.domain();Go(r)>0&&F(this,Si,r)}return e?!1:(F(this,Si,t.domain()),!0)}}to=new WeakMap,no=new WeakMap,Mc=new WeakMap,Rc=new WeakMap,Si=new WeakMap;function rR(n,t){const e=Array.from(n).map(r=>r.channelDef).filter(r=>{var i;return(i=r.scale)==null?void 0:i.domain}).map(r=>_y(r.type,t(r.scale.domain)));if(e.length>0)return e.reduce((r,i)=>r.extendAll(i))}function iR(n,t){const e=Array.from(n).map(r=>{var i;return(i=r.dataDomainSource)==null?void 0:i.call(r,r.channel,t())}).filter(r=>!!r);if(e.length!==0)return e.reduce((r,i)=>r.extendAll(i))}function sR(n,t,e){return n==Xa?t():e??[]}function oR(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}function aR(n,t,e){return n*Math.pow(t/n,e)}class cR{constructor({getScale:t,getAnimator:e,getInitialDomainSnapshot:r,getResetDomain:i,fromComplexInterval:s,getGenomeExtent:o}){D(this,Ht);D(this,Nc);D(this,Tc);D(this,ro);D(this,io);D(this,Pc);F(this,Ht,t),F(this,Nc,e),F(this,Tc,r),F(this,ro,i),F(this,io,s),F(this,Pc,o)}getZoomExtent(){const t=C(this,Ht).call(this),e=t.props.zoom;return lR(t,e,C(this,io),C(this,Pc),C(this,Tc))}isZoomable(){return this.isZoomingSupported()&&!!C(this,Ht).call(this).props.zoom}isZoomingSupported(){return Ke(C(this,Ht).call(this).type)}isZoomed(){return this.isZoomingSupported()&&ga(C(this,ro).call(this),C(this,Ht).call(this).domain())}zoom(t,e,r){if(!this.isZoomingSupported())return!1;const i=C(this,Ht).call(this),s=i.domain();let o=uR(i,s,t,e,r);const a=this.getZoomExtent();return o=Zb(o,a[0],a[1]),[0,1].some(l=>o[l]!=s[l])?(i.domain(o),!0):!1}async zoomTo(t,e=!1){if(Uo(e)&&(e=e?700:0),!this.isZoomingSupported())throw new Error("Not a zoomable scale!");const r=C(this,io).call(this,t),i=C(this,Nc).call(this),s=C(this,Ht).call(this),o=s.domain();if(e>0&&o.length==2){const a=o[1]-o[0],l=r[1]-r[0],c=o[0]+a/2,u=r[0]+l/2,f=o[0]==r[0],h=o[1]==r[1];await i.transition({duration:e,easingFunction:oR,onUpdate:A=>{const d=aR(a,l,A),g=a==l?A:(a-d)/(a-l),m=g*u+(1-g)*c,p=[f?o[0]:m-d/2,h?o[1]:m+d/2];s.domain(p)}}),s.domain(r)}else s.domain(r),i==null||i.requestRender()}resetZoom(){if(!this.isZoomingSupported())throw new Error("Not a zoomable scale!");const t=C(this,Ht).call(this),e=t.domain(),r=C(this,ro).call(this);return[0,1].some(i=>r[i]!=e[i])?(t.domain(r),!0):!1}getZoomLevel(){return this.isZoomable()?Go(this.getZoomExtent())/Go(C(this,Ht).call(this).domain()):1}}Ht=new WeakMap,Nc=new WeakMap,Tc=new WeakMap,ro=new WeakMap,io=new WeakMap,Pc=new WeakMap;function lR(n,t,e,r,i){return fR(t)&&Xe(t.extent)?e(t.extent):t&&n.props.type=="locus"?r():i()}function uR(n,t,e,r,i){let s=[...t],o=n.invert(r);switch(n.props.reverse&&(i=-i),"align"in n&&(o+=n.align()),n.type){case"linear":case"index":case"locus":s=Kb(s,i||0),s=Cg(s,o,e);break;case"log":s=jb(s,i||0),s=yg(s,o,e);break;case"pow":case"sqrt":{const a=n;s=Wb(s,i||0,a.exponent()),s=qf(s,o,e,a.exponent());break}default:throw new Error("Zooming is not implemented for: "+n.type)}return s}function fR(n){return et(n)}function Vy(n,t,{spacing:e,devicePixelRatio:r,offset:i,reverse:s}={}){e=e||0,i=i||0;let o=0,a=0;for(const d of n)o+=ju(d.px)+(Id(d)?0:e),a+=ju(d.grow);o-=e;const l=Math.max(0,t-o),c=r!==void 0?d=>Math.round(d*r)/r:d=>d,u=[],f=[],h=d=>{const g=u.length;if(!g)return;const m=(d?e:0)*(s?-1:1);A-=m;for(let p=0;p<g;p++)f.push({location:A+(p+1)/(g+1)*m,size:0});A+=m,u.length=0};let A=s?Math.max(t,o):0+i;if(n.length==1&&Id(n[0]))return[{location:A,size:0}];for(let d=0;d<n.length;d++){const g=n[d];if(Id(g))u.push(g);else{h(f.length>0);const m=ju(g.px)+(a?ju(g.grow)/a*l:0);s&&(A-=m),f.push({location:c(A),size:c(m)}),s?A-=e:A+=m+e}}return A+=s?e:-e,h(!1),f}function AR(n){let t=0,e=0;for(const r of n)t=Math.max(t,r.px??0),e=Math.max(e,r.grow??0);return{px:t,grow:e}}const O0=class O0{constructor(t,e){D(this,Lc);this.width=t,this.height=e}addPadding(t){return T(this,Lc,K0).call(this,t.width,t.height)}subtractPadding(t){return T(this,Lc,K0).call(this,-t.width,-t.height)}isGrowing(){return!!(this.width.grow||this.height.grow)}};Lc=new WeakSet,K0=function(t,e){return new O0({px:(this.width.px??0)+t,grow:this.width.grow},{px:(this.height.px??0)+e,grow:this.height.grow})};let Cr=O0;const $a=Object.freeze({px:0,grow:0}),Yy=new Cr($a,$a);function Id(n){return!n.px&&!n.grow}function ju(n){return n||0}function hR(n){return n&&(ft(n.px)||ft(n.grow))}function Jy(n){if(jy(n))throw new Error("parseSizeDef does not accept step-based sizes.");if(hR(n))return n;if(ft(n))return{px:n,grow:0};if(n==="container")return{px:0,grow:1};if(!n)return{px:0,grow:1};throw new Error(`Invalid sizeDef: ${n}`)}class ot{constructor(t,e,r,i){this.top=t||0,this.right=e||0,this.bottom=r||0,this.left=i||0}get width(){return this.left+this.right}get height(){return this.top+this.bottom}expand(t){return t<=0?this:new ot(this.top+t,this.right+t,this.bottom+t,this.left+t)}add(t){return new ot(this.top+t.top,this.right+t.right,this.bottom+t.bottom,this.left+t.left)}subtract(t){return new ot(this.top-t.top,this.right-t.right,this.bottom-t.bottom,this.left-t.left)}union(t){return new ot(Math.max(this.top,t.top),Math.max(this.right,t.right),Math.max(this.bottom,t.bottom),Math.max(this.left,t.left))}getHorizontal(){return new ot(0,this.right,0,this.left)}getVertical(){return new ot(this.top,0,this.bottom,0)}get horizontalTotal(){return this.left+this.right}get verticalTotal(){return this.top+this.bottom}static createFromConfig(t){return typeof t=="number"?this.createUniformPadding(t):t?this.createFromRecord(t):Ed}static createFromRecord(t){return new ot(t.top,t.right,t.bottom,t.left)}static zero(){return Ed}static createUniformPadding(t){return new ot(t,t,t,t)}}const Ed=ot.createUniformPadding(0);Object.freeze(Ed);function ec(n,t){return!t||/^(data:|([A-Za-z]+:)?\/\/)/.test(n)||n.startsWith("/")?n:(t.endsWith("/")||(t+="/"),t+n)}function dR(n){if(!n)return n;if(/[?#]/.test(n))throw new Error(`Invalid base URL: ${n} - cannot contain query or hash.`);return n.endsWith("/")?n:n+"/"}const fi="VISIT_SKIP",tc="VISIT_STOP",qy=n=>n;class Ky{constructor(t,e,r,i,s,o={}){D(this,xn);D(this,so,{});D(this,oo,{});D(this,ao,{});D(this,Oc);D(this,Uc);j(this,"opacityFunction",qy);D(this,co,[]);D(this,lo,"none");j(this,"facetCoords",new Sn([],JSON.stringify));var a;if(!t)throw new Error("View spec must be defined!");if(this.context=e,this.layoutParent=r,this.dataParent=i,this.name=t.name||s,this.spec=t,this.resolutions={scale:{},axis:{}},py(this),this.options={blockEncodingInheritance:!1,contributesToScaleDomain:!0,...o},this.flowHandle=void 0,this.needsAxes={x:!1,y:!1},this.paramMediator=new MS(()=>{var l;return(l=this.dataParent)==null?void 0:l.paramMediator}),t.params)for(const l of t.params)this.paramMediator.registerParam(l);if(!((a=this.layoutParent)!=null&&a.options.layeredChildren)){const l=c=>this.paramMediator.findMediatorForParam(c)?void 0:this.paramMediator.allocateSetter(c,0);F(this,Uc,l("height")),F(this,Oc,l("width"))}}get coords(){return this.facetCoords.values().next().value}getPadding(){return this._cache("size/padding",()=>ot.createFromConfig(this.spec.padding))}getOverhang(){return ot.zero()}isScrollable(){return this.spec.viewportWidth!=null||this.spec.viewportHeight!=null}getSize(){return this._cache("size/size",()=>this.isConfiguredVisible()?new Cr(T(this,xn,ml).call(this,"width"),T(this,xn,ml).call(this,"height")):Yy)}getViewportSize(){if(!this.isScrollable())return this.getSize();if(!this.isConfiguredVisible())return Yy;const t=this.getSize();return new Cr(T(this,xn,ml).call(this,"viewportWidth")??t.width,T(this,xn,ml).call(this,"viewportHeight")??t.height)}isConfiguredVisible(){return this.context.isViewConfiguredVisible(this)}isVisibleInSpec(){return this.spec.visible??!0}isVisible(){return this.getLayoutAncestors().every(t=>t.isConfiguredVisible())}getDataInitializationState(){return C(this,lo)}_setDataInitializationState(t){F(this,lo,t)}isDataInitialized(){return C(this,lo)==="ready"}getEffectiveOpacity(){var t;return this.opacityFunction(((t=this.layoutParent)==null?void 0:t.getEffectiveOpacity())??1)}getPathString(){return this.getLayoutAncestors().map(t=>t.name).reverse().join("/")}getLayoutAncestors(){return T(this,xn,j0).call(this,"layoutParent")}getDataAncestors(){return T(this,xn,j0).call(this,"dataParent")}handleBroadcast(t){for(const e of C(this,so)[t.type]||[])e(t)}_addBroadcastHandler(t,e){let r=C(this,so)[t];r||(r=[],C(this,so)[t]=r),r.push(e)}handleInteractionEvent(t,e,r){const i=r?C(this,oo):C(this,ao);for(const s of i[e.type]||[])s(t,e)}addInteractionEventListener(t,e,r){const i=r?C(this,oo):C(this,ao);let s=i[t];s||(s=[],i[t]=s),s.push(e)}removeInteractionEventListener(t,e,r){const i=r?C(this,oo):C(this,ao);let s=i==null?void 0:i[t];if(s){const o=s.indexOf(e);o>=0&&s.splice(o,1)}}visit(t){try{const e=t(this);if(t.postOrder&&t.postOrder(this),e!==tc)return e}catch(e){throw e.view=this,e}}getDescendants(){const t=[];return this.visit(e=>{t.push(e)}),t}dispose(){for(const e of C(this,co))e();C(this,co).length=0;const t=this.flowHandle;t!=null&&t.collector&&(this.context.dataFlow.pruneCollectorBranch(t.collector),this.context.dataFlow.removeCollector(t.collector)),t!=null&&t.dataSource&&t.dataSource.view===this&&!t.dataSource.identifier&&this.context.dataFlow.removeDataSource(t.dataSource),this.flowHandle=void 0}registerDisposer(t){C(this,co).push(t)}disposeSubtree(){const t=()=>{};t.postOrder=e=>{e.dispose()},this.visit(t)}configureViewOpacity(){(!this.opacityFunction||this.opacityFunction===qy)&&(this.opacityFunction=pR(this))}onBeforeRender(){}render(t,e,r={}){var i,s;r.firstFacet&&this.facetCoords.clear(),this.facetCoords.set(r.facetId,r.clipRect?e.intersect(r.clipRect):e),(i=C(this,Oc))==null||i.call(this,e.width),(s=C(this,Uc))==null||s.call(this,e.height)}getEncoding(){const t=this.dataParent&&!this.options.blockEncodingInheritance?this.dataParent.getEncoding():{},e=this.spec.encoding||{},r={...t,...e};for(const[i,s]of Object.entries(r))s===null&&delete r[i];return r}getFacetAccessor(t){if(this.layoutParent)return this.layoutParent.getFacetAccessor(this)}getFacetFields(t){var r;const e=this.getEncoding().sample;return nr(e)?[e.field]:(r=this.layoutParent)==null?void 0:r.getFacetFields(this)}getSampleFacetTexture(){}getScaleResolution(t){const e=Xr(t);return this.getDataAncestors().map(r=>r.resolutions.scale[e]).find(r=>r)}getAxisResolution(t){const e=Xr(t);return this.getDataAncestors().map(r=>r.resolutions.axis[e]).find(r=>r)}getConfiguredResolution(t,e){var r,i;return(i=(r=this.spec.resolve)==null?void 0:r[e])==null?void 0:i[t]}getConfiguredOrDefaultResolution(t,e){return this.getConfiguredResolution(t,e)??this.getConfiguredResolution("default",e)??this.getDefaultResolution(t,e)}getDefaultResolution(t,e){return"independent"}getBaseUrl(){return ui(()=>{var t;return(t=this.dataParent)==null?void 0:t.getBaseUrl()},dR(this.spec.baseUrl))}isPickingSupported(){return!0}getTitleText(){const t=this.spec.title;if(t)return Ce(t)?t:it(t.text)?this.paramMediator.evaluateAndGet(t.text.expr):t.text}_cache(t,e){return Yu(this,t,e)}_invalidateCacheByPrefix(t,e="self"){switch(e){case"self":Ju(this,t);break;case"ancestors":for(const r of this.getLayoutAncestors())Ju(r,t);break;case"progeny":this.visit(r=>Ju(r,t));break}}invalidateSizeCache(){this._invalidateCacheByPrefix("size/","ancestors")}propagateInteractionEvent(t){}}so=new WeakMap,oo=new WeakMap,ao=new WeakMap,Oc=new WeakMap,Uc=new WeakMap,co=new WeakMap,lo=new WeakMap,xn=new WeakSet,ml=function(t){var i;let e=this.spec[t];const r=t=="viewportWidth"||t=="viewportHeight";if(jy(e)){if(r)throw new mr(`Cannot use step-based size with "${t}"!`,this);const s=e.step,o=(i=this.getScaleResolution(t=="width"?"x":"y"))==null?void 0:i.getScale();if(o){let a=0;if(pr(o.type))a=o.domain().length;else if(["locus","index"].includes(o.type)){const c=o.domain();a=Jl(c)-c[0]}else throw new mr(`Cannot use step-based size with "${o.type}" scale!`,this);const l=o;return a=nd(a,l.paddingInner(),l.paddingOuter()),{px:a*s,grow:0}}else throw new mr("Cannot use 'step' size with missing scale!",this)}else return(e&&Jy(e))??(r?void 0:{px:0,grow:1})},j0=function(t){const e=[];let r=this;do e.push(r),r=r[t];while(r);return e};function gR(n){return"unitsPerPixel"in n}function pR(n){const t="opacity"in n.spec?n.spec.opacity:void 0;if(t!==void 0){if(ft(t))return e=>e*t;if(gR(t)){const e=s=>{var a;const o=(a=n.getScaleResolution(s))==null?void 0:a.getScale();if(["linear","index","locus"].includes(o==null?void 0:o.type))return o},r=t.channel?e(t.channel):e("x")??e("y");if(!r)throw new mr("Cannot find a resolved quantitative scale for dynamic opacity!",n);const i=Kh().domain(t.unitsPerPixel).range(t.values).clamp(!0);return s=>{const a=Go(r.domain())/1e3;return i(a)*s}}else if(it(t)){const e=n.paramMediator.createExpression(t.expr);return e.addListener(()=>n.context.animator.requestRender()),r=>e(null)*r}}return e=>e}const jy=n=>!!(n!=null&&n.step);fe("index",pd,["continuous"]),fe("locus",yM,["continuous"]),fe("null",ld,[]);class mR{constructor(t){D(this,Z);D(this,In,new Set);D(this,uo,{domain:new Set,range:new Set});D(this,Ne);D(this,En);D(this,_t);D(this,Di);D(this,Gc,!1);this.channel=t,this.type=null,this.name=void 0,F(this,En,new nR({getMembers:()=>T(this,Z,gb).call(this),getType:()=>this.type,getLocusExtent:()=>T(this,Z,Z0).call(this),fromComplexInterval:this.fromComplexInterval.bind(this)})),F(this,Ne,new qM({getParamMediator:()=>C(this,Z,W0).paramMediator,onRangeChange:()=>T(this,Z,Cl).call(this,"range"),onDomainChange:()=>T(this,Z,Cl).call(this,"domain"),getGenomeStore:()=>C(this,Z,X0).genomeStore})),F(this,_t,new cR({getScale:()=>this.getScale(),getAnimator:()=>C(this,Z,X0).animator,getInitialDomainSnapshot:()=>C(this,En).initialDomainSnapshot,getResetDomain:()=>C(this,En).getConfiguredOrDefaultDomain(),fromComplexInterval:this.fromComplexInterval.bind(this),getGenomeExtent:()=>T(this,Z,Z0).call(this)}))}get zoomExtent(){return(C(this,Ne).scale&&Ke(C(this,Ne).scale.type)&&C(this,_t).getZoomExtent())??[-1/0,1/0]}addEventListener(t,e){C(this,uo)[t].add(e)}removeEventListener(t,e){C(this,uo)[t].delete(e)}registerMember(t){return T(this,Z,pb).call(this,t),()=>C(this,In).delete(t)&&C(this,In).size===0}reconfigure(){const t=T(this,Z,yl).call(this,!0);T(this,Z,eg).call(this,()=>C(this,Ne).reconfigureScale(t))}reconfigureDomain(){const t=T(this,Z,yl).call(this,!0);T(this,Z,eg).call(this,()=>{Ny(C(this,Ne).scale,t)})}get scale(){if(C(this,Ne).scale)return C(this,Ne).scale;throw new Error("ScaleResolution.scale accessed before initialization. Call initializeScale().")}getScale(){return C(this,Ne).scale??this.initializeScale()}initializeScale(){if(C(this,Ne).scale)return C(this,Ne).scale;const t=T(this,Z,yl).call(this);return C(this,Ne).createScale(t)}getDomain(){return this.getScale().domain()}getDataDomain(){return C(this,En).getDataDomain()}getComplexDomain(){return bM(T(this,Z,Lo).call(this),this.getDomain())}isZoomed(){return C(this,_t).isZoomed()}isZoomable(){return C(this,_t).isZoomable()}zoom(t,e,r){return C(this,_t).zoom(t,e,r)}async zoomTo(t,e=!1){return C(this,_t).zoomTo(t,e)}resetZoom(){return C(this,_t).resetZoom()}getZoomLevel(){return C(this,_t).getZoomLevel()}getAxisLength(){if(this.channel!=="x"&&this.channel!=="y")throw new Error("Axis length is only defined for x and y channels!");const t=Array.from(C(this,In)).map(e=>{var r;return(r=e.view.coords)==null?void 0:r[this.channel==="x"?"width":"height"]}).filter(e=>e>0);return t.length?t.reduce((e,r)=>Math.min(e,r),1e4):0}invertToComplex(t){const e=this.getScale();if("invert"in e){const r=e.invert(t);return this.toComplex(r)}else throw new Error("The scale does not support inverting!")}toComplex(t){return xM(T(this,Z,Lo).call(this),t)}fromComplex(t){return IM(T(this,Z,Lo).call(this),t)}fromComplexInterval(t){return this.type==Xa?EM(T(this,Z,Lo).call(this),t):t}}In=new WeakMap,uo=new WeakMap,Ne=new WeakMap,En=new WeakMap,_t=new WeakMap,Di=new WeakMap,Gc=new WeakMap,Z=new WeakSet,W0=function(){const t=C(this,In).values().next().value;if(!t)throw new Error("ScaleResolution has no members!");return t.view},gb=function(){var e,r;const t=new Set;for(const i of C(this,In)){const s=i.view;s.isConfiguredVisible()&&(!s.isDataInitialized()&&!((r=(e=i.channelDef)==null?void 0:e.scale)!=null&&r.domain)||t.add(i))}return t},X0=function(){return C(this,Z,W0).context},Z0=function(){return BM(T(this,Z,Lo).call(this))},Lo=function(){if(this.type===Xa)return C(this,Ne).scale??C(this,Ne).getLocusGenome()},Cl=function(t){for(const e of C(this,uo)[t].values())e({type:t,scaleResolution:this})},pb=function(t){var a;const{channel:e,channelDef:r}=t,i=r.type==null&&this.type;if(e!="sample"&&!r.type&&!HA(e)&&!i)throw new Error(`The "type" property must be defined in channel definition: "${e}": ${JSON.stringify(r)}. Must be one of: "quantitative", "ordinal", "nominal", "locus", "index"`);const s=e=="sample"?"nominal":r.type,o=(a=r==null?void 0:r.scale)==null?void 0:a.name;if(o){if(this.name!==void 0&&o!=this.name)throw new Error(`Shared scales have conflicting names: "${o}" vs. "${this.name}"!`);this.name=o}if(!i){if(!this.type)this.type=s;else if(s!==this.type&&!HA(e))throw new Error(`Can not use shared scale for different data types: ${this.type} vs. ${s}. Use "resolve: independent" for channel ${this.channel}`)}C(this,In).add(t)},$0=function(){return C(this,En).hasConfiguredDomain()},mb=function(){const t=C(this,Ne).scale;if(!t)return!1;const e=t.domain();return Ke(t.type)?e.length>2||e.length==2&&(e[0]!==0||e[1]!==0):e.length>0},Cb=function(){return $M({channel:this.channel,dataType:this.type,members:C(this,In),isExplicitDomain:T(this,Z,$0).call(this)})},yl=function(t=!1){const e=T(this,Z,Cb).call(this);if(e===null||e.type=="null")return{type:"null"};const r=C(this,En).getConfiguredOrDefaultDomain(t);if(pr(e.type)){const i=T(this,Z,$0).call(this),s=T(this,Z,yb).call(this,i);if(r!=null){if(i&&s.domain().length>0&&!ga(s.domain(),r))return F(this,Di,void 0),T(this,Z,yl).call(this,t);s.addAll(r);const o=new Set(r),a=s.domain().filter(l=>o.has(l));e.domain=a.length>0?a:new xd}else{const o=s.domain();e.domain=o.length>0?o:new xd}e.domainIndexer=s}else r&&r.length>0&&(e.domain=r);return!e.domain&&e.domainMid!==void 0&&(e.domain=[e.domainMin??0,e.domainMax??1]),e},yb=function(t){return(!C(this,Di)||C(this,Gc)!==t)&&(F(this,Di,dy()),F(this,Gc,t)),C(this,Di)},eg=function(t){const e=C(this,Ne).scale;if(!e||e.type=="null")return;const r=T(this,Z,mb).call(this),i=e.domain();if(C(this,Ne).withDomainNotificationsSuppressed(t),C(this,En).captureInitialDomain(e,r)){T(this,Z,Cl).call(this,"domain");return}const s=e.domain();ga(s,i)||(this.isZoomable()?C(this,Ne).withDomainNotificationsSuppressed(()=>{e.domain(i)}):C(this,_t).isZoomingSupported()?(C(this,Ne).withDomainNotificationsSuppressed(()=>{e.domain(i)}),this.zoomTo(s,500)):T(this,Z,Cl).call(this,"domain"))};function Wy(n,t){const e=new Set;function r(s){for(const o of Object.values(s.resolutions.scale))e.add(o)}function i(s){if(t&&!t(s))return fi;s.options.contributesToScaleDomain&&r(s)}for(const s of tt(n))s.visit(i);e.forEach(s=>s.reconfigureDomain())}function bd(...n){for(const t of n)if(t!==void 0)return t}class CR{constructor(t){D(this,Mf);D(this,bn,new Set);this.channel=t}get scaleResolution(){const t=C(this,bn).values().next().value;return t==null?void 0:t.view.getScaleResolution(this.channel)}registerMember(t){return T(this,Mf,wb).call(this,t),()=>this.removeMember(t)&&C(this,bn).size===0}removeMember(t){const e=C(this,bn).delete(t);return e&&dd(this,"axisProps"),e}getAxisProps(){return Yu(this,"axisProps",()=>{const t=Array.from(C(this,bn)).map(e=>{const r=e.view.mark.encoding[e.channel];return"axis"in r&&r.axis});return t.length>0&&t.some(e=>e===null)?null:Ku(t.filter(e=>e!==void 0),"axis",["title"])})}getTitle(){const t=s=>{var a;const o=bS(s.view,s.channel);if(!Nt(o))return{member:s,explicitTitle:bd("axis"in o?(a=o.axis)==null?void 0:a.title:void 0,o.title),implicitTitle:bd(nr(o)?o.field:void 0,ba(o)?o.expr:void 0)}},e=Array.from(C(this,bn)).map(t),r=e.filter(s=>{var o;if(HA(s.member.channel)&&!s.explicitTitle){const a=Xr(s.member.channel);return((o=e.find(l=>l.member.view==s.member.view&&l.member.channel==a))==null?void 0:o.explicitTitle)===void 0}return!0}),i=new Set(r.map(s=>bd(s.explicitTitle,s.implicitTitle)).filter(Ce));return i.size?[...i].join(", "):null}}bn=new WeakMap,Mf=new WeakSet,wb=function(t){const{view:e}=t,r=e.getScaleResolution(this.channel);if(!r)throw new Error("Cannot find a scale resolution!");if(this.scaleResolution&&r!==this.scaleResolution)throw new Error(`Shared axes must have a shared scale! Channel: ${this.channel}, existing views: [${Array.from(C(this,bn)).map(i=>i.view.getPathString()).join(", ")}], new view: ${e.getPathString()}.`);C(this,bn).add(t),dd(this,"axisProps")};const yR={point:jF,rect:_F,rule:$F,link:oM,text:AM};class Et extends Ky{constructor(e,r,i,s,o,a){super(e,r,i,s,o,a);D(this,Rf);D(this,zc);this.spec=e;const l=yR[this.getMarkType()];if(l)this.mark=new l(this);else throw new Error(`No such mark: ${this.getMarkType()}`);this.resolve(),F(this,zc,this.paramMediator.allocateSetter("zoomLevel",1));for(const c of["x","y"]){const u=this.getScaleResolution(c);if(u){const f=()=>{C(this,zc).call(this,Math.sqrt(this.getZoomLevel()))};u.addEventListener("domain",f),this.registerDisposer(()=>u.removeEventListener("domain",f))}}this.needsAxes={x:!0,y:!0},T(this,Rf,xb).call(this)}render(e,r,i={}){super.render(e,r,i),this.isConfiguredVisible()&&(e.pushView(this,r),e.renderMark(this.mark,i),e.popView(this))}getMarkType(){return typeof this.spec.mark=="object"?this.spec.mark.type:this.spec.mark}getEncoding(){const e=super.getEncoding(),r=this.mark.getSupportedChannels();for(const i of Object.keys(e))r.includes(i)||delete e[i];return e}resolve(e){if(!e){this.resolve("scale"),this.resolve("axis");return}const r=this.mark.encoding;for(const[i,s]of Object.entries(r)){if(!s)continue;let o;if(Qt(s))o=s;else if(GA(s)){const c=s.condition;if(!Array.isArray(c)&&Qt(c))o=c;else continue}else continue;const a=Xr(o.resolutionChannel??i);if(!tu(a)||e=="axis"&&!Ba(a))continue;let l=this;for(;(l.getConfiguredOrDefaultResolution(a,e)=="forced"||l.dataParent&&["shared","excluded","forced"].includes(l.dataParent.getConfiguredOrDefaultResolution(a,e)))&&l.getConfiguredOrDefaultResolution(a,e)!="excluded";)l=l.dataParent;if(e=="axis"&&Ba(i)&&zA(a)){l.resolutions[e][a]||(l.resolutions[e][a]=new CR(a));const c=l.resolutions[e][a],u=c.registerMember({view:this,channel:i,channelDef:o});this.registerDisposer(()=>{u()&&l.resolutions[e][a]===c&&delete l.resolutions[e][a]})}else if(e=="scale"&&tu(i)){if(!l.resolutions[e][a]){const h=new mR(a);l.resolutions[e][a]=h;const A=d=>{var g;(g=this.context.glHelper)==null||g.createRangeTexture(d.scaleResolution,!0)};h.addEventListener("range",A),h.addEventListener("domain",A),this.registerDisposer(()=>{h.removeEventListener("range",A),h.removeEventListener("domain",A)})}const c=this.getLayoutAncestors().some(h=>!h.options.contributesToScaleDomain)||Qt(o)&&o.contributesToScaleDomain===!1?void 0:this.extractDataDomain.bind(this),u=l.resolutions[e][a],f=u.registerMember({view:this,channel:i,channelDef:o,dataDomainSource:c});this.registerDisposer(()=>{f()&&l.resolutions[e][a]===u&&delete l.resolutions[e][a]})}}}dispose(){super.dispose(),this.mark.dispose()}getDataAccessor(e){var i;const r=this.mark.encoders;if(r)return(i=r[e])==null?void 0:i.dataAccessor}getFacetAccessor(e){const r=this.getDataAccessor("sample");return r||super.getFacetAccessor(this)}getCollector(){var e;return(e=this.flowHandle)==null?void 0:e.collector}extractDataDomain(e,r){var s;let i=_y(r);return(((s=this.mark.encoders[e])==null?void 0:s.accessors)??[]).filter(o=>o.scaleChannel).forEach(o=>{if(o.constant)i.extend(o({}));else{const a=this.getCollector();a!=null&&a.completed&&a.visitData(l=>i.extend(o(l)))}}),i}getZoomLevel(){const e=r=>{var i;return((i=this.getScaleResolution(r))==null?void 0:i.getZoomLevel())??1};return Wr.map(e).reduce((r,i)=>r*i,1)}propagateInteractionEvent(e){this.handleInteractionEvent(void 0,e,!0),e.target=this,!e.stopped&&this.handleInteractionEvent(void 0,e,!1)}getDefaultResolution(e,r){return e=="x"?"shared":"independent"}}zc=new WeakMap,Rf=new WeakSet,xb=function(){for(const[e,r]of this.paramMediator.paramConfigs){if(!("select"in r))continue;const i=nu(r.select),s=i.on,o=i.clear;if(ru(i)){let l=0;const c=this.paramMediator.getSetter(e),u=()=>{var d;const A=this.context.getCurrentHover();return((d=A==null?void 0:A.mark)==null?void 0:d.unitView)===this?A.datum:null},f=s.filter?em(s.filter):()=>!0,h=(A,d)=>{if(!f(d.proxiedMouseEvent))return;const g=u(),m=g?g[Rt]:0;let p;if(i.toggle)if(d.mouseEvent.shiftKey){if(g){const I=this.paramMediator.getValue(e);p=DS(I,{toggle:[g]})}}else p=YA(g?[g]:null);else m!=l&&(l=m,p=VA(g));p!==void 0&&c(p)};if(this.addInteractionEventListener(["mouseover","pointerover"].includes(s.type)?"mousemove":s.type,h),o){const A=o.filter?em(o.filter):()=>!0,d=(g,m)=>{if(!A(m.proxiedMouseEvent))return;l=0;const p=i.toggle?YA():VA(null);c(p)};this.addInteractionEventListener(o.type,d)}}}};function wR(n){const t=new Set;n.visit(e=>{for(const r of Object.values(e.resolutions.scale)){const i=r.name;if(i&&t.has(i))throw new Error(`The same scale name "${i}" occurs in multiple scale resolutions!`);t.add(i)}})}function xR(n){for(const t of Wr){const e=n.getScaleResolution(t);e&&!e.name&&e.isZoomable()&&(e.name=`${t}_at_root`)}}function Bd(n,t=()=>!0){return Promise.allSettled(n).then(e=>{if(t())for(const r of e)"value"in r?r.value.finalizeGraphicsInitialization():"reason"in r&&console.error(r.reason)})}async function IR(n,t,e){const r=n.import;if(!("url"in r))throw new Error("Not an url import: "+JSON.stringify(r));const i=ui(t,r.url);let s;try{const o=await fetch(i);if(!o.ok)throw new Error(`${o.status} ${o.statusText}`);s=await o.json()}catch(o){throw new Error(`Could not load imported view spec: ${i}. Reason: ${o.message}`)}if(e.isViewSpec(s))return s.baseUrl=ui(vy(r.url),s.baseUrl),s;throw new Error(`The imported spec "${i}" is not a view spec: ${JSON.stringify(n)}`)}function ER(n){const t=n.getSize(),e=n.getPadding(),r=(i,s)=>i.grow>0?void 0:i.px+s;return{width:r(t.width,e.horizontalTotal),height:r(t.height,e.verticalTotal)}}function*vd(n,t=[]){for(const[e,r]of n.entries())if(r instanceof Map)for(const i of vd(r,[...t,e]))yield i;else yield[[...t,e],r]}const Xy=2147483647,bR=Zy([Xy]);function Zy(n){let t=0;for(let e=0,r=n.length;e<r;e++)t=Math.max(t,n[e]);return Math.floor(Math.log2(t)/4)+1}function BR(n){const t=Zy(n);let e=Array.from({length:n.length},(s,o)=>o),r=new Array(n.length);const i=new Array(16);for(let s=0;s<t;s++){i.fill(0);const o=s*4,a=Math.pow(16,s),l=c=>{const u=n[e[c]];return s>=bR?u>Xy?Math.floor(u/a)%16:0:u>>o&15};for(let c=0;c<n.length;c++)i[l(c)]++;for(let c=1;c<16;c++)i[c]+=i[c-1];for(let c=n.length-1;c>=0;c--)r[--i[l(c)]]=e[c];[e,r]=[r,e]}return e}class $y extends OA{constructor(e){var r;super();D(this,Dt);D(this,Hn,[]);D(this,Hc,ue(Rt));D(this,Sr,[]);D(this,ki);D(this,fo);this.params=e??{type:"collect"},this.observers=new Set,this.facetBatches=new Sn([],JSON.stringify),F(this,fo,QR((r=this.params)==null?void 0:r.sort)),T(this,Dt,tg).call(this)}get behavior(){return LA}get label(){return"collect"}reset(){super.reset(),T(this,Dt,tg).call(this)}handle(e){C(this,Hn).push(e)}beginBatch(e){yS(e)&&(F(this,Hn,[]),this.facetBatches.set(tt(e.facetId),C(this,Hn)))}complete(){var e;if(F(this,Hn,[]),(e=this.params.groupby)!=null&&e.length){if(this.facetBatches.size>1)throw new Error("TODO: Support faceted data!");const r=this.facetBatches.get(void 0),i=this.params.groupby.map(o=>ue(o)),s=i.length>1?kl(r,...i):vR(r,i[0]);this.facetBatches.clear();for(const[o,a]of vd(s))this.facetBatches.set(o,a)}if(C(this,fo))for(const r of this.facetBatches.values())r.sort(C(this,fo));T(this,Dt,Ib).call(this),T(this,Dt,ng).call(this),super.complete();for(const r of this.observers)r(this)}observe(e){return this.observers.add(e),()=>{this.observers.delete(e)}}repropagate(){for(const e of this.children)e.reset();T(this,Dt,ng).call(this);for(const e of this.children)e.complete()}getData(){switch(T(this,Dt,rg).call(this),this.facetBatches.size){case 0:return[];case 1:return[...this.facetBatches.values()][0];default:{const e=this.facetBatches;return{[Symbol.iterator]:function*(){for(const i of e.values())yield*i}}}}}visitData(e){T(this,Dt,rg).call(this);for(const r of this.facetBatches.values())for(let i=0;i<r.length;i++)e(r[i])}getItemCount(){let e=0;for(const r of this.facetBatches.values())e+=r.length;return e}findDatumByUniqueId(e){if(!C(this,Sr).length)return;const r=Hr(l=>l.start).right,i=C(this,Hc),s=Hr(l=>i(o(l))).left,o=l=>{const c=r(C(this,ki),l),u=C(this,ki)[c-1];return!u||l>=u.stop?void 0:this.facetBatches.get(u.facetId)[l-u.start]},a=s(C(this,Sr),e);if(a>=0){const l=o(C(this,Sr)[a]);if(l&&i(l)===e)return l}}}Hn=new WeakMap,Hc=new WeakMap,Sr=new WeakMap,ki=new WeakMap,fo=new WeakMap,Dt=new WeakSet,tg=function(){F(this,Hn,[]),F(this,Sr,[]),this.facetBatches.clear(),this.facetBatches.set(void 0,C(this,Hn))},ng=function(){if(this.children.length)for(const[e,r]of this.facetBatches.entries()){if(e){const i={type:"facet",facetId:e};for(const s of this.children)s.beginBatch(i)}for(let i=0,s=r.length;i<s;i++)this._propagate(r[i])}},rg=function(){if(!this.completed)throw new Error("Data propagation is not completed! No data are available.")},Ib=function(){var o;F(this,ki,[]);const e=(o=this.facetBatches.values().next().value)==null?void 0:o[0];if(e==null||!(Rt in e))return;let r=0;const i=[],s=C(this,Hc);for(const[a,l]of this.facetBatches){C(this,ki).push({start:r,stop:r+l.length,facetId:a}),r+=l.length;for(let c=0,u=l.length;c<u;c++)i.push(s(l[c]))}F(this,Sr,BR(i))};function vR(n,t){const e=new Map;for(let r=0,i=n.length;r<i;r++){const s=n[r],o=t(s);let a=e.get(o);a||(a=[],e.set(o,a)),a.push(s)}return e}function QR(n){if(n!=null&&n.field){const t=tt(n.field);if(t.length==1&&!t[0].includes(".")){const e=tt(n.order)[0]??"ascending",r=JSON.stringify(t[0]);return new Function("a","b",`return a[${r}] ${e==="ascending"?"-":"+"} b[${r}];`)}return wg(n.field,n.order)}}class Wu{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(t,e){let r=this.length++;for(;r>0;){const i=r-1>>1,s=this.values[i];if(e>=s)break;this.ids[r]=this.ids[i],this.values[r]=s,r=i}this.ids[r]=t,this.values[r]=e}pop(){if(this.length===0)return;const t=this.ids[0];if(this.length--,this.length>0){const e=this.ids[0]=this.ids[this.length],r=this.values[0]=this.values[this.length],i=this.length>>1;let s=0;for(;s<i;){let o=(s<<1)+1;const a=o+1;let l=this.ids[o],c=this.values[o];const u=this.values[a];if(a<this.length&&u<c&&(o=a,l=this.ids[a],c=u),c>=r)break;this.ids[s]=l,this.values[s]=c,s=o}this.ids[s]=e,this.values[s]=r}return t}peek(){if(this.length!==0)return this.ids[0]}peekValue(){if(this.length!==0)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}class SR extends Ue{get behavior(){return cn}constructor(t){super(t),this.params=t,this.startAccessor=ue(t.start),this.endAccessor=ue(t.end),this.chromAccessor=t.chrom?ue(t.chrom):e=>{},this.weightAccessor=t.weight?ue(t.weight):e=>1,this.as={coverage:t.as??"coverage",start:t.asStart??t.start,end:t.asEnd??t.end,chrom:t.asChrom??t.chrom},this.createSegment=new Function("start","end","coverage","chrom","return {"+Object.entries(this.as).filter(([e,r])=>r).map(([e,r])=>`${JSON.stringify(r)}: ${e}`).join(", ")+"};"),this.ends=new Wu}reset(){super.reset(),this.initialize()}initialize(){const t=this.as.coverage,e=this.as.end,r=this.as.chrom,i=this.startAccessor,s=this.endAccessor,o=this.chromAccessor,a=this.weightAccessor;let l,c,u,f=0,h=NaN;const A=this.ends;A.clear();const d=p=>{this._propagate(p),l=null},g=(p,w,I)=>{if(p==w)return;let y=!1;l&&(l[t]===I?(l[e]=w,y=!0):l[t]!=0&&d(l)),y||(l=this.createSegment(p,w,I,u))},m=()=>{let p=0;for(;(p=A.peekValue())!==void 0;)g(h,p,f),h=p,f-=A.pop();h=NaN,l&&d(l)};this.handle=p=>{const w=i(p);let I=0;for(;(I=A.peekValue())!==void 0&&I<w;)g(h,I,f),h=I,f-=A.pop();if(r){let b=o(p);b!==c&&(m(),u=b,c=u)}isNaN(h)||g(h,w,f),h=w;const y=a(p);f+=y,A.push(y,s(p))},this.complete=()=>{m(),super.complete()},this.beginBatch=p=>{m(),c=null,super.beginBatch(p)}}}function DR(n,t,e=s=>+s,r=0,i=n.length){const s=new Wu,o=i-r;let a;for(a=0;a<t&&a<o;a++)s.push(a,e(n[r+a]));for(;a<o;a++){const u=e(n[r+a]);u>=s.peekValue()&&(s.push(a,u),s.pop())}const l=[];let c;for(;(c=s.pop())!==void 0;)l.push(n[r+c]);return l.reverse()}class kR{constructor(t,e=-1/0,r=1/0){this.maxSize=t,this.lowerLimit=e,this.upperLimit=r;const i=this.maxSize*2+1;this.lowerLimits=new Float64Array(i),this.upperLimits=new Float64Array(i),this.lowerChildren=new Int32Array(i),this.upperChildren=new Int32Array(i),this.reset()}reset(){this.lowerLimits.fill(0),this.upperLimits.fill(0),this.lowerChildren.fill(0),this.upperChildren.fill(0),this.n=1,this.lowerLimits[0]=this.lowerLimit,this.upperLimits[0]=this.upperLimit}_findSlot(t,e,r=0){if(t>=this.lowerLimits[r]&&e<=this.upperLimits[r]){const i=this.lowerChildren[r];if(i){const s=this._findSlot(t,e,i);return s>=0?s:this._findSlot(t,e,this.upperChildren[r])}else return r}else return-1}reserve(t,e){if(e-t<=0)throw new Error("Cannot reserve an empty or negative-size slot!");if(this.n+1>this.lowerLimits.length)return!1;const r=this._findSlot(t,e);if(r<0)return!1;const i=this.n++,s=this.n++;return this.lowerLimits[i]=this.lowerLimits[r],this.upperLimits[i]=t,this.lowerLimits[s]=e,this.upperLimits[s]=this.upperLimits[r],this.lowerChildren[r]=i,this.upperChildren[r]=s,!0}}class FR extends Ue{get behavior(){return LA}constructor(t,e){if(super(t),this.params=t,this._data=[],this.channel=t.channel??"x",!["x","y"].includes(this.channel))throw new Error("Invalid channel: "+this.channel);this.startPosAccessor=ue(this.params.pos),this.endPosAccessor=ue(this.params.pos2??this.params.pos),this.startPosBisector=Hr(this.startPosAccessor),this.endPosBisector=Hr(this.endPosAccessor),this.scoreAccessor=ue(this.params.score),this.widthAccessor=ue(this.params.width),this.laneAccessor=this.params.lane?ue(this.params.lane):i=>0,this.padding=this.params.padding??0,this.reservationMaps=new Map,this.resolution=e.getScaleResolution(this.channel);const r=()=>this._filterAndPropagate();this.schedule=()=>e.context.animator.requestTransition(r),this.resolution.addEventListener("domain",i=>this.schedule()),e._addBroadcastHandler("layoutComputed",()=>this.schedule())}complete(){const t=this.startPosAccessor;this._data.sort((e,r)=>t(e)-t(r));for(const e of new Set(this._data.map(this.laneAccessor)))this.reservationMaps.set(e,new kR(200));this.schedule(),super.complete()}_filterAndPropagate(){super.reset();const t=this.resolution.getScale(),e=this.resolution.getAxisLength();if(!e)return;for(const o of this.reservationMaps.values())o.reset();const r=t.domain(),s=DR(this._data,70,this.scoreAccessor,this.endPosBisector.left(this._data,r[0]),this.startPosBisector.right(this._data,r[1]));for(const o of s){let a=t(this.startPosAccessor(o))*e,l=t(this.endPosAccessor(o))*e;const c=l-a,u=this.widthAccessor(o)+this.padding*2;let f=(a+l)/2;const h=Math.max(0,(c-u)/2);if(h>0){const A=Math.max(0,u/2-f);f+=Math.min(A,h);const d=Math.max(0,u/2+f-e);f-=Math.min(d,h)}if(this.reservationMaps.get(this.laneAccessor(o)).reserve(f-u/2,f+u/2))if(this.params.asMidpoint){const A=Object.assign({},o);A[this.params.asMidpoint]=t.invert(f/e),this._propagate(A)}else this._propagate(o)}super.complete()}reset(){super.reset(),this._data=[],this.groups=new Map}handle(t){this._data.push(t)}}class MR extends Ue{constructor(t,e){super(t,e),this.params=t,this.predicate=void 0}initialize(){let t="";if(RR(this.params))t=this.params.expr;else if(NR(this.params)){const e=this.paramMediator.findValue(this.params.param);if(!e)throw new Error(`Cannot initialize filter transform. Selection parameter "${this.params.param}" not found!`);t=kS(this.params,e)}else throw new Error("Invalid filter params: "+JSON.stringify(this.params));this.predicate=this.paramMediator.createExpression(t),this.predicate.addListener(()=>this.repropagate())}handle(t){this.predicate(t)&&this._propagate(t)}}function RR(n){return"expr"in n}function NR(n){return"param"in n}class TR extends Ue{get behavior(){return cn}constructor(t){super(t),this.params=t;const e=t.index;if(t.fields){const r=tt(t.fields).map(s=>ue(s)),i=tt(t.as||t.fields);if(r.length!==i.length)throw new Error(`Lengths of "fields" (${r.length}), and "as" (${i.length}) do not match!`);this.handle=s=>{const o=r.map((l,c)=>l(s)??[]),a=o[0].length;for(let l=0;l<a;l++){const c=Object.assign({},s);for(let u=0;u<r.length;u++)c[i[u]]=l<o[u].length?o[u][l]:null;e&&(c[e]=l),this._propagate(c)}}}else this.handle=r=>{for(let i=0;i<r.length;i++){const s=Object.assign({},r[i]);e&&(s[e]=i),this._propagate(s)}}}}const PR=48;function*LR(n,t=","){const e=t.charCodeAt(0);let r=0;for(let i=0;i<n.length;i++){const s=n.charCodeAt(i);s==e?(yield r,r=0):r=r*10+s-PR}yield r}class OR extends Ue{get behavior(){return cn}constructor(t){super(t);const e=ue(t.exons??"exons"),r=ue(t.start??"start"),[i,s]=t.as||["exonStart","exonEnd"];this.handle=o=>{let a=r(o),l=a,c=!0;const u=e(o);for(const f of LR(u)){if(c)l=a+f;else{a=l+f;const h=Object.assign({},o);h[i]=l,h[s]=a,this._propagate(h)}c=!c}}}}class UR extends Ue{get behavior(){return cn}constructor(t){super(t);const e=tt(t.field).map(s=>ue(s)),r=tt(t.separator),i=tt(t.as||t.field);if(e.length!==r.length||e.length!==i.length)throw new Error(`Lengths of "separator" (${r.length}), "fields" (${e.length}), and "as" (${i.length}) do not match!`);this.handle=s=>{if(e.some(l=>!l(s)))return;const o=e.map((l,c)=>l(s).split(r[c]));GR(o,s);const a=o[0].length;for(let l=0;l<a;l++){const c=Object.assign({},s);for(let u=0;u<e.length;u++)c[i[u]]=o[u][l];this._propagate(c)}}}}function GR(n,t){const e=n.map(r=>r.length);if(!e.every(r=>r==e[0]))throw new Error("Mismatching number of elements in the fields to be split: "+JSON.stringify(t))}class zR extends Ue{get behavior(){return tr}constructor(t,e){super(t,e),this.params=t,this.as=t.as,this.fn=void 0}initialize(){this.fn=this.paramMediator.createExpression(this.params.expr),this.fn.addListener(()=>this.repropagate())}handle(t){t[this.as]=this.fn(t),this._propagate(t)}}class ew extends Ue{get behavior(){return tr}constructor(t,e){t={channel:"x",...t},super(t),this.params=t;const r=t.channel;if(!["x","y"].includes(r))throw new Error("Invalid channel: "+r);const i=e.getScaleResolution(r).getScale(),s="genome"in i?i.genome():void 0;if(!s)throw new Error("LinearizeGenomicCoordinate transform requires a locus scale!");const o=ue(t.chrom),a=tt(t.pos).map(g=>ue(g)),l=tt(t.as);if(a.length!=l.length)throw new Error('The number of "pos" and "as" elements must be equal!');const c=tt(t.offset);let u;if(c.length==0)u=new Array(a.length).fill(0);else if(c.length==1)u=new Array(a.length).fill(c[0]);else if(c.length==a.length)u=c;else throw new Error(`Invalid "offset" parameter: ${JSON.stringify(t.offset)}!`);const f=new Function("datum","chromOffset","posAccessors",l.map((g,m)=>`datum[${JSON.stringify(g)}] = chromOffset + +posAccessors[${m}](datum) - ${u[m]};`).join(`
`));let h,A=0;const d=g=>{if(g!==h){if(A=s.cumulativeChromPositions.get(g),A===void 0)return;h=g}return A};this.handle=g=>{const m=o(g),p=d(m);if(p===void 0)throw new Error(`Unknown chromosome/contig "${m}" in datum: ${JSON.stringify(g)}`);f(g,p,a),this._propagate(g)}}}const tw={chars:JSON.parse('[{"id":87,"width":53,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":43.491,"chnl":15,"x":0,"y":0,"page":0},{"id":124,"width":17,"height":50,"xoffset":0,"yoffset":-32.193000000000005,"xadvance":10.521,"chnl":15,"x":0,"y":42,"page":0},{"id":40,"width":20,"height":49,"xoffset":0,"yoffset":-32.571000000000005,"xadvance":11.214,"chnl":15,"x":0,"y":94,"page":0},{"id":41,"width":19,"height":49,"xoffset":0,"yoffset":-32.571000000000005,"xadvance":11.214,"chnl":15,"x":0,"y":145,"page":0},{"id":36,"width":32,"height":49,"xoffset":0,"yoffset":-34.419000000000004,"xadvance":24.360000000000003,"chnl":15,"x":0,"y":196,"page":0},{"id":125,"width":21,"height":48,"xoffset":0,"yoffset":-32.193000000000005,"xadvance":12.642000000000001,"chnl":15,"x":0,"y":247,"page":0},{"id":91,"width":22,"height":48,"xoffset":0,"yoffset":-32.193000000000005,"xadvance":12.852,"chnl":15,"x":0,"y":297,"page":0},{"id":93,"width":19,"height":48,"xoffset":0,"yoffset":-32.193000000000005,"xadvance":12.852,"chnl":15,"x":0,"y":347,"page":0},{"id":123,"width":21,"height":48,"xoffset":0,"yoffset":-32.193000000000005,"xadvance":12.642000000000001,"chnl":15,"x":0,"y":397,"page":0},{"id":106,"width":19,"height":48,"xoffset":0,"yoffset":-30.639000000000003,"xadvance":10.08,"chnl":15,"x":0,"y":447,"page":0},{"id":81,"width":43,"height":47,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":33.621,"chnl":15,"x":21,"y":447,"page":0},{"id":77,"width":45,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":38.997,"chnl":15,"x":66,"y":447,"page":0},{"id":64,"width":43,"height":44,"xoffset":0,"yoffset":-28.539,"xadvance":35.133,"chnl":15,"x":23,"y":397,"page":0},{"id":92,"width":28,"height":43,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":18.984,"chnl":15,"x":68,"y":397,"page":0},{"id":47,"width":28,"height":43,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":18.984,"chnl":15,"x":98,"y":397,"page":0},{"id":109,"width":42,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":34.545,"chnl":15,"x":113,"y":447,"page":0},{"id":119,"width":42,"height":31,"xoffset":0,"yoffset":-21.315,"xadvance":32.991,"chnl":15,"x":157,"y":447,"page":0},{"id":42,"width":25,"height":42,"xoffset":0,"yoffset":-31.626,"xadvance":17.85,"chnl":15,"x":128,"y":397,"page":0},{"id":37,"width":42,"height":41,"xoffset":0,"yoffset":-30.387,"xadvance":33.663000000000004,"chnl":15,"x":155,"y":397,"page":0},{"id":79,"width":42,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":33.621,"chnl":15,"x":199,"y":397,"page":0},{"id":102,"width":24,"height":41,"xoffset":0,"yoffset":-30.534000000000002,"xadvance":14.721,"chnl":15,"x":243,"y":397,"page":0},{"id":100,"width":31,"height":41,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":23.520000000000003,"chnl":15,"x":269,"y":397,"page":0},{"id":98,"width":32,"height":41,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":23.520000000000003,"chnl":15,"x":302,"y":397,"page":0},{"id":56,"width":32,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":24.360000000000003,"chnl":15,"x":336,"y":397,"page":0},{"id":38,"width":40,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":29.904000000000003,"chnl":15,"x":370,"y":397,"page":0},{"id":108,"width":17,"height":41,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":9.912,"chnl":15,"x":412,"y":397,"page":0},{"id":107,"width":31,"height":41,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":21.336000000000002,"chnl":15,"x":431,"y":397,"page":0},{"id":48,"width":33,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":24.360000000000003,"chnl":15,"x":464,"y":397,"page":0},{"id":71,"width":38,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":30.681,"chnl":15,"x":21,"y":347,"page":0},{"id":83,"width":31,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":22.785,"chnl":15,"x":61,"y":347,"page":0},{"id":63,"width":27,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":18.795,"chnl":15,"x":94,"y":347,"page":0},{"id":105,"width":18,"height":41,"xoffset":0,"yoffset":-30.639000000000003,"xadvance":10.08,"chnl":15,"x":123,"y":347,"page":0},{"id":51,"width":32,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":24.360000000000003,"chnl":15,"x":143,"y":347,"page":0},{"id":104,"width":31,"height":41,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":23.436,"chnl":15,"x":177,"y":347,"page":0},{"id":67,"width":37,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":28.056,"chnl":15,"x":210,"y":347,"page":0},{"id":88,"width":37,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":27.258000000000003,"chnl":15,"x":249,"y":347,"page":0},{"id":68,"width":40,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":31.941000000000003,"chnl":15,"x":288,"y":347,"page":0},{"id":70,"width":32,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":23.751,"chnl":15,"x":330,"y":347,"page":0},{"id":34,"width":23,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":15.561000000000002,"chnl":15,"x":364,"y":347,"page":0},{"id":72,"width":38,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":32.067,"chnl":15,"x":389,"y":347,"page":0},{"id":73,"width":18,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":11.760000000000002,"chnl":15,"x":429,"y":347,"page":0},{"id":74,"width":24,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":17.745,"chnl":15,"x":449,"y":347,"page":0},{"id":75,"width":38,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":27.825000000000003,"chnl":15,"x":24,"y":297,"page":0},{"id":76,"width":31,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":21.567,"chnl":15,"x":475,"y":347,"page":0},{"id":66,"width":35,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":27.153000000000002,"chnl":15,"x":64,"y":297,"page":0},{"id":78,"width":38,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":32.067,"chnl":15,"x":101,"y":297,"page":0},{"id":33,"width":18,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":11.298,"chnl":15,"x":141,"y":297,"page":0},{"id":80,"width":34,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":25.221,"chnl":15,"x":161,"y":297,"page":0},{"id":65,"width":38,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":28.434,"chnl":15,"x":197,"y":297,"page":0},{"id":82,"width":36,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":26.313000000000002,"chnl":15,"x":237,"y":297,"page":0},{"id":35,"width":33,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":275,"y":297,"page":0},{"id":84,"width":34,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.801000000000002,"chnl":15,"x":310,"y":297,"page":0},{"id":85,"width":37,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":30.891000000000002,"chnl":15,"x":346,"y":297,"page":0},{"id":86,"width":38,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":28.434,"chnl":15,"x":385,"y":297,"page":0},{"id":39,"width":16,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":8.568000000000001,"chnl":15,"x":425,"y":297,"page":0},{"id":69,"width":32,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.255000000000003,"chnl":15,"x":443,"y":297,"page":0},{"id":89,"width":36,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":26.208000000000002,"chnl":15,"x":23,"y":247,"page":0},{"id":90,"width":34,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":25.284000000000002,"chnl":15,"x":477,"y":297,"page":0},{"id":49,"width":31,"height":40,"xoffset":0,"yoffset":-30.156000000000002,"xadvance":24.360000000000003,"chnl":15,"x":61,"y":247,"page":0},{"id":50,"width":32,"height":40,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":24.360000000000003,"chnl":15,"x":94,"y":247,"page":0},{"id":57,"width":32,"height":40,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":24.360000000000003,"chnl":15,"x":128,"y":247,"page":0},{"id":94,"width":32,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":162,"y":247,"page":0},{"id":96,"width":21,"height":40,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":16.8,"chnl":15,"x":196,"y":247,"page":0},{"id":55,"width":33,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":219,"y":247,"page":0},{"id":54,"width":33,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":254,"y":247,"page":0},{"id":53,"width":32,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":289,"y":247,"page":0},{"id":52,"width":33,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":323,"y":247,"page":0},{"id":103,"width":31,"height":39,"xoffset":0,"yoffset":-21.630000000000003,"xadvance":21.84,"chnl":15,"x":358,"y":247,"page":0},{"id":112,"width":32,"height":39,"xoffset":0,"yoffset":-21.651,"xadvance":23.541,"chnl":15,"x":391,"y":247,"page":0},{"id":113,"width":31,"height":39,"xoffset":0,"yoffset":-21.651,"xadvance":23.520000000000003,"chnl":15,"x":425,"y":247,"page":0},{"id":116,"width":25,"height":39,"xoffset":0,"yoffset":-28.182000000000002,"xadvance":15.057,"chnl":15,"x":458,"y":247,"page":0},{"id":121,"width":31,"height":38,"xoffset":0,"yoffset":-21.273,"xadvance":21.651,"chnl":15,"x":34,"y":196,"page":0},{"id":59,"width":18,"height":36,"xoffset":0,"yoffset":-20.706,"xadvance":10.983,"chnl":15,"x":485,"y":247,"page":0},{"id":43,"width":32,"height":34,"xoffset":0,"yoffset":-24.486,"xadvance":24.360000000000003,"chnl":15,"x":67,"y":196,"page":0},{"id":60,"width":30,"height":33,"xoffset":0,"yoffset":-23.331000000000003,"xadvance":24.360000000000003,"chnl":15,"x":101,"y":196,"page":0},{"id":62,"width":31,"height":33,"xoffset":0,"yoffset":-23.331000000000003,"xadvance":24.360000000000003,"chnl":15,"x":133,"y":196,"page":0},{"id":117,"width":30,"height":32,"xoffset":0,"yoffset":-21.273,"xadvance":23.415000000000003,"chnl":15,"x":166,"y":196,"page":0},{"id":99,"width":29,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":20.055,"chnl":15,"x":198,"y":196,"page":0},{"id":110,"width":31,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":23.436,"chnl":15,"x":229,"y":196,"page":0},{"id":111,"width":32,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":23.814,"chnl":15,"x":262,"y":196,"page":0},{"id":126,"width":32,"height":26,"xoffset":0,"yoffset":-16.128,"xadvance":24.360000000000003,"chnl":15,"x":201,"y":447,"page":0},{"id":101,"width":31,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":22.176000000000002,"chnl":15,"x":296,"y":196,"page":0},{"id":114,"width":25,"height":32,"xoffset":0,"yoffset":-21.651,"xadvance":15.288,"chnl":15,"x":329,"y":196,"page":0},{"id":115,"width":27,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":18.186,"chnl":15,"x":356,"y":196,"page":0},{"id":97,"width":28,"height":32,"xoffset":0,"yoffset":-21.651,"xadvance":20.874000000000002,"chnl":15,"x":385,"y":196,"page":0},{"id":118,"width":31,"height":31,"xoffset":0,"yoffset":-21.273,"xadvance":21.672,"chnl":15,"x":415,"y":196,"page":0},{"id":61,"width":31,"height":29,"xoffset":0,"yoffset":-19.089000000000002,"xadvance":24.360000000000003,"chnl":15,"x":448,"y":196,"page":0},{"id":120,"width":30,"height":31,"xoffset":0,"yoffset":-21.273,"xadvance":20.916,"chnl":15,"x":21,"y":145,"page":0},{"id":58,"width":18,"height":31,"xoffset":0,"yoffset":-20.706,"xadvance":10.5,"chnl":15,"x":53,"y":145,"page":0},{"id":122,"width":28,"height":31,"xoffset":0,"yoffset":-21.273,"xadvance":18.984,"chnl":15,"x":73,"y":145,"page":0},{"id":95,"width":28,"height":16,"xoffset":0,"yoffset":0,"xadvance":19.278000000000002,"chnl":15,"x":235,"y":447,"page":0},{"id":45,"width":23,"height":24,"xoffset":0,"yoffset":-14.175,"xadvance":15.603000000000002,"chnl":15,"x":481,"y":196,"page":0},{"id":44,"width":17,"height":21,"xoffset":0,"yoffset":-4.956,"xadvance":9.534,"chnl":15,"x":103,"y":145,"page":0},{"id":46,"width":18,"height":15,"xoffset":0,"yoffset":-4.956,"xadvance":9.912,"chnl":15,"x":0,"y":497,"page":0},{"id":32,"width":0,"height":0,"xoffset":0,"yoffset":0,"xadvance":10.752,"chnl":15,"x":20,"y":497,"page":0}]'),common:{lineHeight:50.400000000000006,base:41.454,scaleW:512,scaleH:512,pages:1,packed:0,alphaChnl:0,redChnl:0,greenChnl:0,blueChnl:0}};class HR extends Ue{get behavior(){return tr}constructor(t,e){super(t),this.params=t;const r=bh(tw),i=ue(t.field),s=t.as;let o=0;if(it(t.fontSize)){const a=e.paramMediator.createExpression(t.fontSize.expr);o=a(),a.addListener(()=>{o=a(),this.repropagate()})}else o=t.fontSize;this.handle=a=>{const l=i(a);l!==void 0?a[s]=r.measureWidth(l,o):a[s]=0,this._propagate(a)}}}const _R=65536;class VR extends Ue{get behavior(){return tr}constructor(t){super(t),this.params=t}reset(){super.reset(),this.initialize()}initialize(){const t=this.params,e=t.as||"lane",r=ft(t.spacing)?t.spacing:1,i=ue(t.start),s=ue(t.end);if(!t.preference!=!t.preferredOrder)throw new Error('Must specify both "preference" and "preferredOrder"');if(t.preference){const o=new Float64Array(_R),a=ue(t.preference),l=t.preferredOrder;let c=1/0;this.handle=u=>{const f=i(u);f<c&&o.fill(-1/0),c=f;const h=l.indexOf(a(u));let A=-1;if(h>=0&&o[h]<f)A=h;else{const d=i(u);for(A=0;A<o.length&&!(o[A]<d);A++);if(A>=o.length)throw new Error("Out of lanes!")}o[A]=s(u)+r,u[e]=A,this._propagate(u)}}else{const o=new Wu,a=new Wu;let l=-1/0,c=0;this.handle=u=>{const f=i(u);for(;o.length&&(o.peekValue()<=f||f<l);){const A=o.pop();a.push(A,A)}l=f;let h=a.pop();h===void 0&&(h=c++),u[e]=h,this._propagate(u),o.push(h,s(u)+r)}}}}class YR extends Ue{get behavior(){return cn}constructor(t){if(super(t),this.params=t,t.as&&t.as.length!=t.fields.length)throw new Error('"fields" and "as" have unequal lengths!');const e=t.fields.map(i=>ue(i)),r=t.as?t.as:e.map(De);this.handle=i=>{const s={};for(let o=0;o<e.length;o++)s[r[o]]=e[o](i);this._propagate(s)}}}class JR extends Ue{get behavior(){return tr}constructor(t){super(t),this.params=t;const e=new RegExp(t.regex),r=typeof t.as=="string"?[t.as]:t.as,i=ue(t.field);this.handle=s=>{const o=i(s);if(Ce(o)){const a=o.match(e);if(a){if(a.length-1!=r.length)throw new Error('The number of RegEx groups and the length of "as" do not match!');for(let l=0;l<r.length;l++)s[r[l]]=a[l+1]}else if(t.skipInvalidInput)for(let l=0;l<r.length;l++)s[r[l]]=void 0;else throw new Error(`"${o}" does not match the given regex: ${e.toString()}`)}else if(!t.skipInvalidInput)throw new Error(`Trying to match a non-string field. Encountered type: ${typeof o}, field content: "${o}".`);this._propagate(s)}}}class qR extends Ue{get behavior(){return cn}constructor(t){super(t),this.params=t;const e=tt(t.columnRegex).map(h=>new RegExp(h));for(const h of e)if(RegExp("|"+h.source).exec("").length-1!=1)throw new Error(`Regex ${h.toString()} must have exactly one capturing group!`);const r=tt(t.asValue);if(e.length!=r.length)throw new Error('Lengths of "columnRegex" and "as" are not equal!');const i=t.skipRegex?new RegExp(t.skipRegex):void 0,s=t.asKey||"sample";let o,a,l;const c=h=>{var m;const A=Object.keys(h);for(const p of e)if(!A.some(w=>p.test(w)))throw new Error(`No columns matching the regex ${p.toString()} found in the data!`);const d=new Map;for(const[p,w]of e.entries())for(const I of A){const y=(m=w.exec(I))==null?void 0:m[1];if(y!==void 0){let b=d.get(y);b||(b=[],d.set(y,b)),b[p]=I}}o=[...d.entries()],a=A.filter(p=>!e.some(w=>w.test(p))&&!(i&&i.test(p)));const g=[...a.map(p=>JSON.stringify(p)+": datum["+JSON.stringify(p)+"]"),JSON.stringify(s)+": sampleId",...r.map((p,w)=>JSON.stringify(p)+`: datum[attrs[${w}]]`)];l=new Function("datum","sampleId","attrs",`return {
`+g.join(`,
`)+`
};`)},u=h=>{o||c(h);for(let A=0;A<o.length;A++){const[d,g]=o[A],m=l(h,d,g);this._propagate(m)}},f=h=>{c(h),u(h),this.handle=u};this.handle=f,this.beginBatch=h=>{tm(h)&&(this.handle=f),super.beginBatch(h)}}}class KR extends Ue{get behavior(){return tr}constructor(t){super(t),this.params=t,this.buffer=[]}reset(){this.buffer=[]}handle(t){this.buffer.push(t)}complete(){const t=this.params,e=t.as||["y0","y1"],r=t.sort?wg(t.sort.field,t.sort.order):void 0,i=t.field?ue(t.field):()=>1,s=t.groupby.map(u=>ue(u)),o=ZB(this.buffer,u=>s.map(f=>f(u)).join()).map(u=>u[1]);let a=u=>!0;if(t.baseField){const u=ue(t.baseField);a=f=>u(f)!==null}let l,c;switch(t.offset){case"normalize":l=(u,f)=>u/f,c=(u,f)=>$o(u,f);break;case"center":l=(u,f)=>u-f/2,c=(u,f)=>$o(u,f);break;case"information":{const u=Math.log2(t.cardinality??4);l=(f,h)=>f/h,c=(f,h)=>{const d=$o(f,w=>+!a(w)),g=$o(f,h),m=g-d;let p=0;for(let w=0;w<f.length;w++){const I=f[w];if(a(I)){const y=h(I)/m;p-=y*Math.log2(y)}}return m/(u-(p+0))*(m/g)}}break;default:l=(u,f)=>u,c=(u,f)=>1}for(const u of o){r&&u.sort(r);const f=c(u,i);let h=0;for(const A of u){const d=h+i(A);a(A)&&(A[e[0]]=l(h,f),A[e[1]]=l(d,f),this._propagate(A),h=d)}}super.complete()}}class jR extends Ue{get behavior(){return cn}constructor(t){super(t),this.params=t;const e=ue(t.field??"sequence"),[r,i]=t.as??["pos","sequence"];this.handle=s=>{const o=Object.assign({},s,{[i]:"",[r]:0}),a=e(s);for(let l=0;l<a.length;l++){const c=Object.assign({},o);c[r]=l,c[i]=a.charAt(l),this._propagate(c)}}}}const nw={count:n=>n.length,valid:JB,sum:$o,min:uA,max:lA,mean:i2,median:s2,variance:qB};class WR extends Ue{get behavior(){return cn}constructor(t){if(super(t),this.params=t,this.buffer=[],this.ops=[],this.as=[],t.fields){if(t.fields.length!=t.ops.length)throw new Error("Fields and ops must have the same length!");if(t.as&&t.as.length!=t.ops.length)throw new Error('If "as" is defined, "fields" and "as" must have the same length!');t.fields.forEach((e,r)=>{const i=ue(e),s=nw[t.ops[r]];this.ops.push(o=>s(o,i)),this.as.push(t.as?t.as[r]:`${t.ops[r]}_${t.fields[r]}`)})}else this.ops.push(e=>nw.count(e)),this.as.push("count")}reset(){super.reset(),this.buffer=[]}handle(t){this.buffer.push(t)}complete(){const t=this.params,e=t==null?void 0:t.groupby;if((e==null?void 0:e.length)>0){const r=e.map(s=>ue(s)),i=kl(this.buffer,...r);for(const[s,o]of vd(i)){const a={};for(let l=0;l<e.length;l++)a[e[l]]=s[l];this.ops.forEach((l,c)=>{a[this.as[c]]=l(o)}),this._propagate(a)}}else{const r={};this.ops.forEach((i,s)=>{r[this.as[s]]=i(this.buffer)}),this._propagate(r)}super.complete()}}const XR={aggregate:WR,collect:$y,coverage:SR,filterScoredLabels:FR,filter:MR,flatten:TR,flattenCompressedExons:OR,flattenDelimited:UR,flattenSequence:jR,formula:zR,identifier:UA,linearizeGenomicCoordinate:ew,measureText:HR,pileup:VR,project:YR,regexExtract:JR,regexFold:qR,sample:Iy,stack:KR};function ZR(n,t){const e=XR[n.type];if(e)return new e(n,t);throw new Error("Unknown transform: "+n.type)}function rw(n,t=[]){if(!ow(n)&&!sw(n))return;const e={...n.format};if(e.type??(e.type=sw(n)&&eN(t)),e.parse??(e.parse="auto"),!e.type)throw new Error("Format for the data source was not defined and it could not be inferred: "+JSON.stringify(n));return e}function $R(n){var t;return((t=BA(n))==null?void 0:t.responseType)??"text"}function eN(n){var t;if(Array.isArray(n)&&(n=n[0]),n)return(t=n.match(/\.(csv|tsv|json)/))==null?void 0:t[1]}const iw=n=>typeof n!="object"?tN:nN,tN=n=>({data:n}),nN=n=>n;function sw(n){return"url"in n}class Ai extends OA{constructor(e){super();j(this,"view");this.view=e}get identifier(){}setLoadingStatus(e,r){this.view.context.setDataLoadingStatus(this.view,e,r)}get paramMediator(){return this.view.paramMediator}handle(e){throw new Error("Source does not handle incoming data!")}async load(){}repropagate(){this.load()}}function ow(n){return"values"in n}class rN extends Ai{constructor(e,r){var i;super(r);D(this,_c);if(this.params=e,typeof e.values=="string"&&!((i=e==null?void 0:e.format)!=null&&i.type))throw new Error("Data format type (csv, dsv, ...) must be specified if a string is provided!")}get label(){return"inlineSource"}isTrivial(){const e=this.params.values,r=Array.isArray(e)?e[0]:e;return!!(r&&Object.keys(r).length==0&&r.constructor===Object)}updateDynamicData(e){T(this,_c,ig).call(this,e)}loadSynchronously(){T(this,_c,ig).call(this,this.params.values)}async load(){this.loadSynchronously()}}_c=new WeakSet,ig=function(e){let r=[],i=s=>s;if(Array.isArray(e))e.length>0&&(r=e,i=iw(e[0]));else if(typeof e=="object")r=[e];else if(typeof e=="string")r=vA(e,rw(this.params));else throw new Error('"values" in data configuration is not an array, object, or a string!');this.reset(),this.beginBatch({type:"file"});for(const s of r)this._propagate(i(s));this.complete()};function iN(n){return"url"in n}class sN extends Ai{constructor(e,r){super(r);D(this,Nf);this.params=iu(r.paramMediator,e,()=>this.load()),this.baseUrl=r==null?void 0:r.getBaseUrl()}get identifier(){return JSON.stringify({params:this.params,baseUrl:this.baseUrl})}get label(){return"urlSource"}async load(){const e=Tt(this.params.url),r=typeof e=="object"&&"urlsFromFile"in e?await T(this,Nf,Eb).call(this,e):(Array.isArray(e)?e:[e]).map(l=>ui(this.baseUrl,l)),i=rw(this.params,r),s=$R(i.type);if(r.length===0||!r[0]){this.reset(),this.complete();return}const o=async l=>{try{const c=await fetch(l);if(!c.ok)throw new Error(`${c.status} ${c.statusText}`);return typeof c[s]=="function"?c[s]():c.text()}catch(c){throw new Error(`Could not load data: ${l}. Reason: ${c.message}`)}},a=(l,c)=>{try{const u=vA(l,i);this.beginBatch({type:"file",url:c});for(const f of u)this._propagate(f)}catch(u){throw new Error(`Cannot parse: ${c}: ${u.message}`)}};this.setLoadingStatus("loading"),this.reset();try{await Promise.all(r.map(l=>o(l).then(a))),this.setLoadingStatus("complete")}catch(l){this.setLoadingStatus("error",l.message)}this.complete()}}Nf=new WeakSet,Eb=async function(e){const r=ui(this.baseUrl,e.urlsFromFile),i=await fetch(r);if(!i.ok)throw new Error(`Cannot load "${r}": ${i.status} ${i.statusText}`);const s=await i.text();return vA(s,{type:e.type??"tsv"}).map(a=>typeof a=="string"?a:a.url).map(a=>ui(r,a))};function oN(n){return"sequence"in n}class aN extends Ai{constructor(t,e){if(super(e),this.sequence=iu(e.paramMediator,t.sequence,()=>this.loadSynchronously()),!("start"in this.sequence))throw new Error("'start' is missing from sequence parameters!");if(!("stop"in this.sequence))throw new Error("'stop' is missing from sequence parameters!")}get label(){return"sequenceSource"}loadSynchronously(){const t=Tt(this.sequence.as)??"data",e=Tt(this.sequence.start)??0,r=Tt(this.sequence.step)??1,i=Tt(this.sequence.stop);this.reset(),this.beginBatch({type:"file"});for(let s=e;s<i;s+=r)this._propagate({[t]:s});this.complete()}async load(){this.loadSynchronously()}}class Qd extends Ai{constructor(e,r){super(e);j(this,"initializedPromise",Promise.resolve());if(r){if(r!=="x"&&r!=="y")throw new Error(`Invalid channel specified for the lazy data source: ${r}. Must be either "x" or "y"`)}else throw new Error('No channel has been specified for the lazy data source. Must be either "x" or "y".');if(this.channel=r,this.scaleResolution=this.view.getScaleResolution(r),!this.scaleResolution){const s=[`The lazy data source cannot find a resolved scale for channel "${r}".`];throw this.view instanceof Et||s.push('Make sure the view has a "shared" scale resolution as it is not a unit view.'),new Error(s.join(" "))}const i=()=>{this.view.isVisible()&&this.onDomainChanged(this.scaleResolution.getDomain(),this.scaleResolution.getComplexDomain())};this.scaleResolution.addEventListener("domain",i),this.view.context.addBroadcastListener("layoutComputed",i)}get genome(){const e=this.scaleResolution.getScale();if("genome"in e){const r=e.genome();if(r)return r}throw new Error("No genome has been defined!")}onDomainChanged(e,r){}requestRender(){this.view.context.animator.requestRender()}async load(){this.reset(),this.complete()}publishData(e){this.reset(),this.beginBatch({type:"file"});for(const r of e)for(const i of r)this._propagate(i);this.complete(),Wy(this.view)}}class cN extends Qd{constructor(e,r){const i={...e};super(r,i.channel);j(this,"ticks",[]);this.params=e}get label(){return"axisTickSource"}async load(){this.ticks=null,this.onDomainChanged()}onDomainChanged(){const e=this.scaleResolution.getScale(),r=this.scaleResolution.getAxisLength(),i=this.params.axis,s=c=>25+60*Zp(100,700,c),o=ft(i.tickCount)?i.tickCount:Math.round(r/s(r)),a=Dy(e,o,i.tickMinStep),l=i.values?ky(e,i.values,a):vM(e,a);if(this.ticks==null||!ga(l,this.ticks)){this.ticks=l;const c=SM(e,o,i.format);this.publishData([l.map(u=>({value:u,label:c(u)}))])}}}class lN extends Qd{constructor(t,e){super(e,t.channel)}get label(){return"axisGenomeSource"}async load(){this.publishData([this.genome.chromosomes])}}class nc extends Qd{constructor(){super(...arguments);D(this,Ao,new AbortController);D(this,ho,[0,0]);D(this,go,[0,0]);D(this,Vc,0);j(this,"params")}setupDebouncing(e){const r=()=>Tt(e.debounce),i=e.debounceMode;if(i=="domain")this.onDomainChanged=ql(this.onDomainChanged.bind(this),r,!1);else if(i=="window")this.loadInterval=ql(this.loadInterval.bind(this),r,!1);else throw new Error("Invalid debounceMode: "+i)}onDomainChanged(e){var i;F(this,go,e);const r=Tt((i=this.params)==null?void 0:i.windowSize)??-1;e[1]-e[0]>r||this.callIfWindowsChanged(e,r,async s=>{await this.initializedPromise,this.loadInterval(s)})}reloadLastDomain(){const e=C(this,go);F(this,go,[0,0]),F(this,ho,[0,0]),this.onDomainChanged(e)}async loadInterval(e){}async discretizeAndLoad(e,r){C(this,Ao).abort(),this.setLoadingStatus("loading"),F(this,Ao,new AbortController);const i=C(this,Ao).signal,s=this.genome.continuousToDiscreteChromosomeIntervals(e);try{const o=await Promise.all(s.map(async a=>r(a,i)));if(!i.aborted)return this.setLoadingStatus("complete"),o}catch(o){if(!i.aborted)throw this.setLoadingStatus("error",o.message),o}}callIfWindowsChanged(e,r,i){const s=[Math.max(Math.floor(e[0]/r)*r,0),Math.min(Math.ceil(e[1]/r)*r,this.genome.totalSize)],o=C(this,ho);(r!==C(this,Vc)||s[0]<o[0]||s[1]>o[1])&&(F(this,ho,s),F(this,Vc,r),i(s))}}Ao=new WeakMap,ho=new WeakMap,go=new WeakMap,Vc=new WeakMap;class uN extends nc{constructor(t,e){const r={channel:"x",windowSize:7e3,debounce:200,debounceMode:"window",...t};if(super(e,r.channel),this.params=r,!this.params.url)throw new Error("No URL provided for IndexedFastaSource");this.setupDebouncing(this.params),this.initializedPromise=new Promise(i=>{Promise.all([Promise.resolve().then(()=>i9),Promise.resolve().then(()=>ac)]).then(([{IndexedFasta:s},{RemoteFile:o}])=>{const a=l=>new o(ec(l,this.view.getBaseUrl()));this.fasta=new s({fasta:a(this.params.url),fai:a(this.params.indexUrl??this.params.url+".fai")}),i()})})}get label(){return"bigWigSource"}async loadInterval(t){const e=await this.discretizeAndLoad(t,async(r,i)=>this.fasta.getSequence(r.chrom,r.startPos,r.endPos,{signal:i}).then(s=>{if(s!=null)return{chrom:r.chrom,start:r.startPos,sequence:s};console.log(`No sequence found for interval ${r.chrom}:${r.startPos}-${r.endPos}`)}));this.publishData([e.filter(r=>r!==void 0)])}}class fN extends nc{constructor(e,r){const i={pixelsPerBin:2,channel:"x",debounce:200,debounceMode:"window",...e},s=iu(r.paramMediator,i,o=>{o.includes("url")?T(this,Yc,sg).call(this).then(()=>this.reloadLastDomain()):o.includes("pixelsPerBin")&&this.reloadLastDomain()});super(r,s.channel);D(this,Yc);D(this,po,[]);D(this,mo);if(this.params=s,!this.params.url)throw new Error("No URL provided for BigWigSource");this.setupDebouncing(this.params),T(this,Yc,sg).call(this)}get label(){return"bigWigSource"}async onDomainChanged(e){await this.initializedPromise;const r=this.scaleResolution.getAxisLength()||700,i=AN(e,r,C(this,po)),s=Math.max(i*r,5e3);this.callIfWindowsChanged(e,s,o=>this.loadInterval(o,i))}async loadInterval(e,r){const i=.5/r/Tt(this.params.pixelsPerBin),s=await this.discretizeAndLoad(e,(o,a)=>C(this,mo).getFeatures(o.chrom,o.startPos,o.endPos,{scale:i,signal:a}).then(l=>l.map(c=>({chrom:o.chrom,start:c.start,end:c.end,score:c.score}))));s&&this.publishData(s)}}po=new WeakMap,mo=new WeakMap,Yc=new WeakSet,sg=function(){return this.initializedPromise=new Promise((e,r)=>{Promise.all([Promise.resolve().then(()=>dI),Promise.resolve().then(()=>ac)]).then(([{BigWig:i},{RemoteFile:s}])=>{F(this,mo,new i({filehandle:new s(ec(Tt(this.params.url),this.view.getBaseUrl()))})),this.setLoadingStatus("loading"),C(this,mo).getHeader().then(o=>{F(this,po,o.zoomLevels.map(a=>a.reductionLevel).reverse()),C(this,po).push(1),this.setLoadingStatus("complete"),e()}).catch(o=>{this.load(),this.setLoadingStatus("error",`${Tt(this.params.url)}: ${o.message}`),r(o)})})}),this.initializedPromise};function AN(n,t,e){const r=(n[1]-n[0])/t;return e.find(i=>i<r)??e.at(-1)}class hN extends nc{constructor(e,r){const i={channel:"x",windowSize:1e6,debounce:200,debounceMode:"window",...e},s=iu(r.paramMediator,i,o=>{o.includes("url")?T(this,Jc,og).call(this).then(()=>this.reloadLastDomain()):o.includes("windowSize")&&this.reloadLastDomain()});super(r,s.channel);D(this,Jc);j(this,"parser");j(this,"bbi");j(this,"parseLine");if(this.params=s,!this.params.url)throw new Error("No URL provided for BigBedSource");this.setupDebouncing(this.params),T(this,Jc,og).call(this)}get label(){return"bigBedSource"}async loadInterval(e){const r=await this.discretizeAndLoad(e,async(i,s)=>this.bbi.getFeatures(i.chrom,i.startPos,i.endPos,{signal:s}).then(o=>o.map(a=>this.parseLine(i.chrom,a))));r&&this.publishData(r)}}Jc=new WeakSet,og=function(){return this.initializedPromise=new Promise((e,r)=>{Promise.all([Promise.resolve().then(()=>u5),Promise.resolve().then(()=>dI),Promise.resolve().then(()=>ac)]).then(([i,{BigBed:s},{RemoteFile:o}])=>{const a=i.default;this.bbi=new s({filehandle:new o(ec(Tt(this.params.url),this.view.getBaseUrl()))}),this.setLoadingStatus("loading"),this.bbi.getHeader().then(async l=>{this.parser=new a({autoSql:l.autoSql});try{const c=dN(this.parser);this.parseLine=(u,f)=>c(u,f.start,f.end,f.rest)}catch{this.parseLine=(u,f)=>this.parser.parseLine(`${u}	${f.start}	${f.end}	${f.rest}`)}this.setLoadingStatus("complete"),e()}).catch(l=>{this.load(),this.setLoadingStatus("error",`${Tt(this.params.url)}: ${l.message}`),r(l)})})}),this.initializedPromise};function dN(n){const t=n.autoSql.fields.filter(w=>w.type).slice(3);let e=0,r="",i=0,s={};const o="	",a=o.charCodeAt(0),l=48,c=45;function u(){let w=r.indexOf(o,e);w<0&&(w=i);const I=r.substring(e,w);return e=w+1,I}function f(){let w=0,I=r.charCodeAt(e),y=1;I===c&&(y=-1,e++,I=r.charCodeAt(e));do{if(I===a){e++;break}w=w*10+I-l,I=r.charCodeAt(++e)}while(e<i);return w*y}const h=t.map(w=>`${JSON.stringify(w.name)}: ${w.isNumeric?"0":"emptyString"}`),A=new Function(`
        const emptyString = "";
        return function makeTemplate(chrom, chromStart, chromEnd) {
            return {
                chrom,
                chromStart,
                chromEnd,
                ${h.join(`,
`)}
            }
        };`)(),d=t.map(w=>{const I=w.type,y=JSON.stringify(w.name);if(["ubyte","int","uint"].includes(I))return`d[${y}] = parseInt();`;if(w.isNumeric)return`d[${y}] = Number(parseString());`;if(["char","string","lstring"].includes(I))return`d[${y}] = parseString();`;throw new Error("Unsupported type: "+I)}),g=gN(d,50).map((w,I)=>Function("parseInt","parseString",`return function parseFieldChunk${I}(d) {
            ${w.join(`
`)}
        }`)(f,u));function m(w){r=w,i=w.length,e=0}function p(w,I,y,b){m(b),s=A(w,I,y);for(const B of g)B(s);return s}return p}function gN(n,t){return Array.from({length:Math.ceil(n.length/t)},(e,r)=>n.slice(r*t,r*t+t))}class pN extends nc{constructor(e,r){const i={channel:"x",windowSize:2e4,debounce:200,debounceMode:"domain",...e};super(r,i.channel);D(this,Fi);j(this,"chrPrefixFixer",e=>e);if(this.params=i,!this.params.url)throw new Error("No URL provided for BamSource");this.setupDebouncing(this.params),this.initializedPromise=new Promise(s=>{Promise.all([Promise.resolve().then(()=>SP),Promise.resolve().then(()=>ac)]).then(([{BamFile:o},{RemoteFile:a}])=>{const l=c=>new a(ec(c,this.view.getBaseUrl()));F(this,Fi,new o({bamFilehandle:l(this.params.url),baiFilehandle:l(this.params.indexUrl??this.params.url+".bai")})),C(this,Fi).getHeader().then(c=>{var h,A;const u=this.genome.hasChrPrefix(),f=(A=(h=C(this,Fi).indexToChr)==null?void 0:h[0])==null?void 0:A.refName.startsWith("chr");u&&!f?this.chrPrefixFixer=d=>d.replace("chr",""):!u&&f&&(this.chrPrefixFixer=d=>"chr"+d),s()})})})}get label(){return"bamSource"}async loadInterval(e){const r=await this.discretizeAndLoad(e,async(i,s)=>C(this,Fi).getRecordsForRange(this.chrPrefixFixer(i.chrom),i.startPos,i.endPos,{signal:s}).then(o=>o.map(a=>({chrom:i.chrom,start:a.start,end:a.end,name:a.name,cigar:a.CIGAR,mapq:a.mq,strand:a.strand===1?"+":"-"}))));r&&this.publishData(r)}}Fi=new WeakMap;class aw extends nc{constructor(e,r){const i={channel:"x",windowSize:3e6,debounce:200,debounceMode:"domain",addChrPrefix:!1,...e};super(r,i.channel);D(this,Co);if(this.params=i,!this.params.url)throw new Error("No URL provided for TabixSource");this.setupDebouncing(this.params),this.initializedPromise=new Promise(s=>{Promise.all([Promise.resolve().then(()=>OP),Promise.resolve().then(()=>ac)]).then(async([{TabixIndexedFile:o},{RemoteFile:a}])=>{const l=u=>new a(ec(u,this.view.getBaseUrl()));F(this,Co,new o({filehandle:l(this.params.url),tbiFilehandle:l(this.params.indexUrl??this.params.url+".tbi"),renameRefSeqs:this.params.addChrPrefix===!0?u=>"chr"+u:this.params.addChrPrefix?u=>this.params.addChrPrefix+u:void 0}));const c=await C(this,Co).getHeader();await this._handleHeader(c),s()})})}async loadInterval(e){await this.initializedPromise;const r=await this.discretizeAndLoad(e,async(i,s)=>{const o=[];return await C(this,Co).getLines(i.chrom,i.startPos,i.endPos,{lineCallback:a=>{o.push(a)},signal:s}),this._parseFeatures(o)});r&&this.publishData(r)}async _handleHeader(e){}_parseFeatures(e){return[]}}Co=new WeakMap;class mN extends aw{constructor(){super(...arguments);D(this,qc)}get label(){return"gff3Source"}async _handleHeader(e){F(this,qc,await Promise.resolve().then(()=>nL))}_parseFeatures(e){var i;return(i=C(this,qc))==null?void 0:i.parseArraySync(e)}}qc=new WeakMap;class CN extends aw{constructor(){super(...arguments);D(this,Kc)}get label(){return"vcfSource"}async _handleHeader(e){const r=(await Promise.resolve().then(()=>lL)).default;F(this,Kc,new r({header:e}))}_parseFeatures(e){return e.map(r=>{const i=C(this,Kc).parseLine(r);return delete i.GENOTYPES,i.SAMPLES=i.SAMPLES(),i})}}Kc=new WeakMap;function yN(n,t){if(ow(n))return new rN(n,t);if(iN(n))return new sN(n,t);if(oN(n))return new aN(n,t);if(wN(n))return DN(n.lazy,t);throw new Error("Cannot figure out the data source type: "+JSON.stringify(n))}function wN(n){return"lazy"in n}function xN(n){return(n==null?void 0:n.type)=="axisTicks"}function IN(n){return(n==null?void 0:n.type)=="axisGenome"}function EN(n){return(n==null?void 0:n.type)=="indexedFasta"}function bN(n){return(n==null?void 0:n.type)=="bigwig"}function BN(n){return(n==null?void 0:n.type)=="bigbed"}function vN(n){return(n==null?void 0:n.type)=="bam"}function QN(n){return(n==null?void 0:n.type)=="gff3"}function SN(n){return(n==null?void 0:n.type)=="vcf"}function DN(n,t){if(xN(n))return new cN(n,t);if(IN(n))return new lN(n,t);if(EN(n))return new uN(n,t);if(bN(n))return new fN(n,t);if(BN(n))return new hN(n,t);if(vN(n))return new pN(n,t);if(QN(n))return new mN(n,t);if(SN(n))return new CN(n,t);throw new Error("Cannot figure out the data source type: "+JSON.stringify(n))}function kN(n){const t=cw(n).filter(r=>typeof r=="string"),e=new Function("source","return { "+t.map(r=>JSON.stringify(r)).map(r=>`${r}: source[${r}]`).join(`,
`)+" };");return e.properties=t,e}function cw(n){let t=[];do t=t.concat(Object.keys(n)),n=Object.getPrototypeOf(n);while(n&&n!==Object.prototype);return Array.from(new Set(t))}class Xu extends Ue{constructor(){super({type:"clone"});D(this,yo);D(this,jc,e=>e);const e=r=>{const i=cw(r);(!C(this,yo)||!ga(i,C(this,yo)))&&(F(this,yo,i),F(this,jc,kN(r)));const s=C(this,jc);this.handle=o=>this._propagate(s(o)),this.handle(r)};this.handle=e,this.beginBatch=r=>{tm(r)&&(this.handle=e),super.beginBatch(r)}}get behavior(){return cn}}yo=new WeakMap,jc=new WeakMap;function FN(n){return"name"in n}class lw extends Ai{constructor(e,r,i){super(r);D(this,Wc);this.provider=i,this.params=e}get identifier(){return this.params.name}get label(){return"namedSource"}updateDynamicData(e){F(this,Wc,e),this.loadSynchronously()}loadSynchronously(){const e=C(this,Wc)??this.provider(this.params.name)??[];let r=i=>i;if(Array.isArray(e))e.length>0&&(r=iw(e[0]));else throw new Error(`Named data "${this.params.name}" is not an array!`);this.reset(),this.beginBatch({type:"file"});for(const i of e)this._propagate(r(i));this.complete()}async load(){this.loadSynchronously()}}Wc=new WeakMap;class uw{constructor(){D(this,_n);D(this,Mi);F(this,_n,new Set),F(this,Mi,new Set)}get dataSources(){return[...C(this,_n)]}get collectors(){return[...C(this,Mi)]}replaceDataSources(t){F(this,_n,new Set(t))}addDataSource(t){C(this,_n).add(t)}removeDataSource(t){C(this,_n).delete(t)}addCollector(t){C(this,Mi).add(t)}removeCollector(t){t.observers.clear(),C(this,Mi).delete(t)}pruneCollectorBranch(t){let e=t.parent;for(e&&e.removeChild(t);e&&e.children.length===0;){const r=e;e=r.parent,e?e.removeChild(r):r instanceof Ai&&this.removeDataSource(r)}}findNamedDataSource(t){let e;for(const r of C(this,_n).values())if(r instanceof lw&&t==r.identifier){if(e&&e!==r)throw new Error(`Found multiple instances of named data: ${t}. Data flow optimization is broken (it's a bug).`);e=r}if(e)return{dataSource:e}}}_n=new WeakMap,Mi=new WeakMap;function MN(n,t){const e=new Map,r=[];for(const i of n)e.set(i,{ref:i,children:[]});for(const i of e.values()){const s=e.get(t(i.ref));s?s.children.push(i):r.push(i)}return r}function fw(n,t,e){var i,s;const r=(i=t.preOrder)==null?void 0:i.call(t,n);if(r)return r;for(const o of e(n)){const a=fw(o,t,e);if(a==="stop")return a}return(s=t.postOrder)==null?void 0:s.call(t,n)}function RN(n,t){return fw(n,t,e=>e.children)}function NN(n,t,e,r){const i=[],s=[];let o;const a=t??new uw,l=[],c=r??(()=>!0);function u(p,w=()=>{}){if(!o)throw w()||new Error("Cannot append data flow node, no parent exist!");return o.addChild(p),o=p,i.push(p),p}function f(p,w){return u(p,()=>new Error("Cannot append a transform because no (inherited) data are available! "))}function h(p,w){for(const I of p){let y;try{y=ZR(I,w)}catch(b){throw console.warn(b),new Error(`Cannot initialize "${I.type}" transform: ${b}`)}y.behavior&tr&&f(new Xu),f(y)}}function A(){return i.findLastIndex(p=>p instanceof UA)>i.findLastIndex(p=>p instanceof Ai)}const d=p=>{var w,I,y;if(!c(p)){const b=(w=p.flowHandle)==null?void 0:w.node;if(b){b!==o&&(o=b,i.push(b));return}if(p.spec.data||p.spec.transform||p instanceof Et)throw new Error("Cannot reuse missing flow nodes for "+p.getPathString());return}if(p.spec.data){const b=(I=p.flowHandle)==null?void 0:I.dataSource;b&&b.view===p&&!b.identifier&&a.removeDataSource(b);const B=FN(p.spec.data)?new lw(p.spec.data,p,p.context.getNamedDataFromProvider):yN(p.spec.data,p);o=B,i.push(B),a.addDataSource(B),p.flowHandle??(p.flowHandle={}),p.flowHandle.dataSource=B}if(p.spec.transform&&h(p.spec.transform,p),p instanceof Et){if(!o)throw new Error(`A unit view (${p.getPathString()}) has no (inherited) data source`);const b=PN(p);if(b){l.push(b.rewrite);for(const Q of b.transforms)f(Q)}p.mark.isPickingParticipant()&&!A()&&(f(new Xu),f(new UA({type:"identifier"})));const B=new $y({type:"collect",groupby:p.getFacetFields(),sort:LN(p,b==null?void 0:b.rewrittenEncoding)});u(B);const E=(y=p.flowHandle)==null?void 0:y.collector;E&&a.removeCollector(E),a.addCollector(B),p.flowHandle??(p.flowHandle={}),p.flowHandle.collector=B}o&&(p.flowHandle??(p.flowHandle={}),p.flowHandle.node=o)},g=TN(n,e),m=MN(g,p=>p.dataParent);for(const p of m)RN(p,{preOrder:w=>{s.push({view:w.ref,nodeStackDepth:i.length}),d(w.ref)},postOrder:()=>{const{nodeStackDepth:w}=s.pop();i.length=w,o=i.at(-1)}});return l.forEach(p=>p()),a}function TN(n,t){if(!t)return n.getDescendants();const e=[];return n.visit(r=>{if(!t(r))return fi;e.push(r)}),e}function PN(n){var o;const t=[],e={},r=n.mark.encoding,i=[];for(const[a,l]of Object.entries(r)){const c=a;Ba(c)&&am(l)&&i.push({channel:c,chromPosDef:l})}const s=kl(i,a=>Xr(a.channel),a=>a.chromPosDef.chrom);for(const[a,l]of s.entries())for(const[c,u]of l.entries()){const f=[],h=[],A=[];for(const{channel:d,chromPosDef:g}of u){const m=I=>I.replace(/[^A-Za-z0-9_]/g,""),p=["_linearized_",m(g.chrom),"_",m(g.pos)].join(""),w={...((o=n.spec.encoding)==null?void 0:o[d])??r[d]??{},field:p};delete w.chrom,delete w.pos,!w.type&&g.type&&(w.type=g.type),e[d]=w,f.push(g.pos),A.push(g.offset??0),h.push(p)}t.push(new Xu),t.push(new ew({type:"linearizeGenomicCoordinate",channel:a,chrom:c,pos:f,offset:A,as:h},n))}return t.length?{transforms:t,rewrittenEncoding:e,rewrite:()=>{n.spec.encoding={...n.spec.encoding,...e},dd(n.mark,"encoding")}}:void 0}function LN(n,t){var r;const e={...n.getEncoding(),...t}.x;if(Qt(e)&&(r=n.getScaleResolution("x"))!=null&&r.isZoomable()){if(nr(e))return"buildIndex"in e&&e.buildIndex?{field:e.field}:null;if(!Ea(e)){if(ba(e))throw new Error("A zoomable x channel must be mapped to a field.")}}}function Aw(n,t=void 0){if(n.parent!==t)return!1;for(const e of n.children)if(!Aw(e,n))return!1;return!0}function Sd(n,t=!1){if(n.behavior&LA&&(t=!0),n instanceof Xu)if(t)t=!1;else{const e=n.children[0];n.excise(),e&&Sd(e,t);return}n.behavior&cn&&(t=!1);for(let e=0,r=n.children.length;e<r;e++)Sd(n.children[e],t||r>1)}function ON(n){const t=n.dataSources,e=new Map;for(const s of t)s.identifier&&!e.has(s.identifier)&&e.set(s.identifier,s);const r=new Set,i=new Map;for(const s of t)if(s.identifier){const o=e.get(s.identifier);o&&(o!==s&&o.adoptChildrenOf(s),r.add(o),i.set(s,o))}else r.add(s),i.set(s,s);return n.replaceDataSources(r),i}function UN(n){if(Sd(n),!Aw(n))throw new Error("Encountered a bug! There's a problem in the data flow structure.")}function GN(n){const t=ON(n);for(const e of n.dataSources)UN(e);return t}const Dd=new WeakMap,kd=new WeakMap;function hw(n,t){const e=Dd.get(n);if(e){if(!(t!=null&&t.queueReload))return e;const i=kd.get(n);if(i)return i;const s=e.catch(()=>{}).then(()=>hw(n)).finally(()=>{kd.delete(n)});return kd.set(n,s),s}const r=Promise.resolve().then(()=>n.load()).finally(()=>{Dd.delete(n)});return Dd.set(n,r),r}function zN(n,t){for(const e of n.getDescendants()){const r=e.flowHandle;if(!r)continue;const i=r.dataSource;i&&(r.dataSource=t.get(i)??i)}}function Fd(n,t,e,r){const i=r??(()=>!0),o=dw(n,e).filter(i);if(o.length===0)return{dataFlow:t,unitViews:[],dataSources:new Set,graphicsPromises:[]};const a=new Set(o);for(const A of o)A._setDataInitializationState("pending");let l;try{l=NN(n,t,e,d=>a.has(d));const A=GN(l);zN(n,A)}catch(A){for(const d of o)d._setDataInitializationState("none");throw A}const c=HN(o);for(const A of c)A.visit(d=>d.initialize());const u=o.filter(A=>A instanceof Et),f=[],h=!!n.context.glHelper;for(const A of u){const d=A.mark;d.initializeEncoders(),h&&f.push(d.initializeGraphics().then(()=>d));const g=m=>{if(d.initializeData(),h)try{d.updateGraphicsData()}catch(p){throw p.view=A,p}A.context.animator.requestRender()};A.registerDisposer(A.flowHandle.collector.observe(g))}for(const A of o)A._setDataInitializationState("ready");return{dataFlow:l,unitViews:u,dataSources:c,graphicsPromises:f}}function HN(n,t){var i,s;const e=Array.isArray(n)?n:dw(n,t),r=new Set;for(const o of e){let a=o;for(;a&&!((i=a.flowHandle)!=null&&i.dataSource);)a=a.dataParent;(s=a==null?void 0:a.flowHandle)!=null&&s.dataSource&&r.add(a.flowHandle.dataSource)}return r}function _N(n,t){const e=new Set;return n.visit(r=>{var i;if(t&&!t(r))return fi;if((i=r.flowHandle)!=null&&i.dataSource)return e.add(r.flowHandle.dataSource),fi}),e}function Md(n,t,e,r){return t||(t=_N(n,e)),Promise.all(Array.from(t).map(i=>hw(i,r))).then(i=>(Wy(n,e),VN(n),i))}function dw(n,t){const e=[];return t?(n.visit(r=>{if(!t(r))return fi;e.push(r)}),e):n.getDescendants()}function VN(n){const t={type:"subtreeDataReady",payload:{subtreeRoot:n}};n.visit(e=>e.handleBroadcast(t))}async function YN(n,t,e,r){const i=a=>a.isConfiguredVisible(),{dataFlow:s,graphicsPromises:o}=Fd(n,t,i);return r(s),await e.waitUntilReady(),await Md(n,new Set(s.dataSources),i),await Bd(o),s}async function JN(n,t,e){const r=f=>f.isConfiguredVisible(),s=qN(n,r).filter(f=>f.getDataInitializationState()==="none");if(s.length===0)return t;const o=new Set(s),a=f=>o.has(f),{dataFlow:l,graphicsPromises:c}=Fd(n,t,r,a);await e.waitUntilReady();const u=KN(s);return await Promise.all(Array.from(u.entries()).map(([f,h])=>Md(f,h,void 0,{queueReload:!0}))),await Bd(c),l}function qN(n,t){const e=[];return n.visit(r=>{if(!t(r))return fi;e.push(r)}),e}function KN(n){var e,r;const t=new Map;for(const i of n){let s=i;for(;s&&!((e=s.flowHandle)!=null&&e.dataSource);)s=s.dataParent;if(!((r=s==null?void 0:s.flowHandle)!=null&&r.dataSource)){if(i.spec.data)throw new Error("No data source found for view "+i.getPathString());continue}let o=t.get(s);o||(o=new Set,t.set(s,o)),o.add(s.flowHandle.dataSource)}return t}const jN=n=>new Promise(t=>setTimeout(t,n));function WN(n){const t=n.requestAnimationFrame||window.requestAnimationFrame,e=n.signal,r=()=>new Promise((i,s)=>{if(e!=null&&e.aborted)return s("aborted");const o=performance.now(),a=o+(n.duration||1e3),l=typeof n.from=="number"?n.from:0,c=typeof n.to=="number"?n.to:1,u=n.easingFunction||(g=>g),f=g=>(g-o)/(a-o),h=g=>g*(c-l)+l,A=g=>Math.max(0,Math.min(1,g)),d=g=>{e!=null&&e.aborted?s("aborted"):(n.onUpdate(h(u(A(f(g))))),g<a?t(d):(n.onUpdate(h(u(1))),i()))};t(d)});return n.delay?e!=null&&e.aborted?Promise.reject("aborted"):jN(n.delay).then(r):r()}class XN{constructor(t){this._renderCallback=t,this._renderRequested=!1,this._warn=!1,this.transitions=[]}requestTransition(t){this.cancelTransition(t),this.transitions.push(t),this.requestRender()}cancelTransition(t){const e=this.transitions.indexOf(t);e>=0&&this.transitions.splice(e,1)}requestRender(){this._renderRequested?this._warn&&console.warn("Render already requested!"):(this._renderRequested=!0,window.requestAnimationFrame(t=>{this._renderRequested=!1;const e=this.transitions;this.transitions=[];let r;for(;r=e.shift();)r(t);this._renderCallback(t)}))}transition(t){return WN({requestAnimationFrame:e=>this.requestTransition(e),...t})}}function Rd(n,t,e,r,i){let s=0,o=!0,a=structuredClone(i),l=a;function c(h,A,d,g){return A+(h-A)*Math.pow(2,-d/g)}function u(h){if(o)return;const A=h-s;s=h;for(const g of Object.keys(l))a[g]=c(a[g],l[g],A,e);t(a);let d=-1/0;for(const g of Object.keys(l))d=Math.max(d,Math.abs(l[g]-a[g]));d<r?(a=l,t(a),o=!0,d!=0&&n.requestRender()):n.requestTransition(g=>u(g))}function f(h){l=h,o&&(o=!1,s=+document.timeline.currentTime,u(s))}return f.stop=()=>{o=!0},f}class ZN{constructor(t){this.genomes=new Map,this.baseUrl=t}async initialize(t){const e=new pM(t);return this.genomes.set(e.name,e),Promise.all([...this.genomes.values()].map(r=>r.load(this.baseUrl)))}getGenome(t){if(!this.genomes.size)throw new Error("No genomes have been configured!");if(t){const e=this.genomes.get(t);if(!e)throw new Error(`No genome with the name ${t} has been configured!`);return e}else{if(this.genomes.size>1)throw new Error("Cannot pick a default genome! More than one have been configured!");return this.genomes.values().next().value}}}const $N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAIAAAB7GkOtAAEFzklEQVR4AezcRXjr2BnG8b8SQ+gJOiA5d1NmZuZVuU133Zf3++6XxW27Ku7LzIzDrMgByxQGaxwfWVFGMly088z7e76Zi5bu6nvP+Y4sKwgC2n4KP4QfgEcvAVdZGHfuM++Fj8HHwUZERO6aMTocsMGhl4C7bbrzr7C5N0REFAC30nct7qwhdH8REQXAfKf7FrjTLPpJ7EPuMhERycB36XD+hX0/DuzSlsnw3OfyilcwAA/vn/yzQQMoUHg9r59hhn7Oz/njH9ncJAiAXNj9P2qTxdhARETufgDYNs4fsH/Cv2jL53nzm1lcZH2dngKCP/Gnn/LTEiXg+Tw/Q+btvJ1+/vlPfvYz/v1vEwA26w4fs8lm4R4GgIiIAmB5GdvGnmbuh9Rq8MIXcuMGpVJ6AFhEXNwneOI//OfnSz8fL49/jI+9lJcecjjJJD15Ho8+yo9/TKUCb7J5vY1tcw+JiOgMILYJcDpNuFQKq5+neMrFbRXLnI+fu7im6KlSCS9fqXDBccLb31siIgqARBOu1SiV8DzKZbpr0nRxWxnQqs8tv51lol/2Xf63qlS6euOpKYZIREQ7ANOHTYdu1SDL/wMOlguFlxW+Hf8dujMX9ryrNx4KEREFgGXd9BQoWu97S0vLbU36T4EOD6NwGf78R0REAZBoxWaJ3qqDA9Kcx3p9YXW1sLLSCoBM5jIV+i7/gwCWl8Nbzs0xLCIiCgDbDiub7b8JMF3exT3kMOM4a3bLmuNczoX22ScpPluK33KIREQUALmc2QS0KjGqT3BxzWKf2VmKhl0sEhD0ngKZS5ZKOgAQERmVAEg05KhVBwFXnXJ62eWLRYoGrRofv8yGHsv/gwOYmwtvtryMiIgMLQCSxwCHh92mQNGg/4gjEwCTxRZMRdOhPfbSl/86/hURGbUAmJ4eaAoULf/N/OeibDsKgPhf0AOgIiLXIQASbTn+la3ICSfRSS+xru84YY2NpU+BqtXwYr4PU1PaAYiIjFoAxNpy9NKGajV5/HvMcTwApqYuf2X+govboJG+/I82GiIiMiIBsLAQdualpStfCIg/AJqc/9DWewqUfABUy38RkREKgPjpbKJtc8xxdAIc7/dXAyBlCnR8HIuSbFYHACIioxgA6e+EODqKr+tPOU0GQHwKtMmm2SvUqcdzpNmM3SCXQ0RERicAVlbCFj07C81m/CjYrP1T5z/pUyArnALFJ0k6/hURGdEASL4XyNQRR2b5n5z/9JsCRdfQA6AiIqMdAClTIM+Ljn/POEsGQHIK5BF+ZGurZpb/+/uxS09PIyIiIxgApiYnYX/fjIDcrc7x79xc6vyn27NArY/qBXAiItcjAMbGnrkJOLzo4rH3/6yvR8v/vlMgz3tKb4AQEbkWAZBo1Ftb3vb25s6mi3vOeXyRn2S+5GuqRMk9cLd2Wp9u7O5CoRBedH4eEREZzQCIdgCZDJTLZd/f8Xe2m9u95z/JKdB2dXunsuP7uzr+FRG5HgGQz8fadbPpV6t+zW9VvLv3DQDLotwol+vlet2/HvMfEREFQLxdW1Cp16v1amWx0jMArOitotHf8hu+v+c3Gj5zc+HllpcREZFRDoD4AzvVWq1Sq1zOf9bW6CkKgPLr/Uqj0njkA/HLiYjIsGQYwMxMuAlYW+Oz//8/X/4/L3lJcvlvQdBrChR896vf1QHAdSIi2gEkm/Yg85/kFOjC5KQOAERERkEGPjT4McC6w/rfYQ6KS93nPx9K3QS8ulVPgdMJE8tCRESGGgAbDGBhAcdhw4YlWIUiqcv/b8Gn2UgNgI0iWGB3MkBERIYdAJ9iMO8Je3e7iu1Klbjg9HS7+5syV3AsRERk2AGQZzB52/TudhVhjVSpF8ybT0X5kUNERIZrjMGtJpb/gyuaCiPk+hARUQAYzq0GwMzVEZCIiAybFQQBIiLyrN4BiIiIAqAK34T3wxp8CX7N0+zZAQYCQRzF4bfMAQroCKETRMfYvWRHqFt0kI4wkaaQDQQ7+33mDPPz9wBwAQAgAAAIAAALU3KeWwEu+dglp7yNATqEADT35Np+/zGNAHQOEIDWgFsyBQAbAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAH8iAAAIAAACAIAAACAAAAgAAAIAgAAAULLPD9v0CYCSKXOO6RYAJaPff40ASg75tnm+5QLACAyAAAAgAAAMtdasBAAuAADKkJcHO3eZ3Uh2wFH8GtRkZmb2kXrCWUNWHGbmxAwyW2RmtpXSyOrwfJ9X93f+ghW8K6xZSP3LRvgvf4bvw/fgl7wq8iUlSaqlYgn2P62SgWYqcjBXWSAkyQBUXMCv/ysDST73d5j7/P6csEiSAajYgcy/LzWX7Z3rZQ5WkCSFGICKJ/jrp/cBh4f7f/9xam4q9ffUe94jSQo2ABWH8BPIzM9n5uYyf9/KHGe+zbd76UWSFG4AKtLp1YWF/dLOjjiqp94AxIAkA/D8zNISi4vXCwtn1L/hTTTCJ0n+EWx1lZWVaIn9wgwz0aaYInCSZACKRdbXWVtjdXWSySmmppnuppvASZIB2NxkY4N0mkJhnPFok0wSPkkyAFtbpW1ujjASbYyxDjoInCQZgNNTdnfZ2WFvb4ihYYajIUkKPwCZTGn7+3XU9dM/wMAgg4RPkgxAPk8uRzbbQ08vvX30VVNN4CTJANzfc3BAoRCtm+7yCJ8kGYCjo9dBO+0ddHTSSfgkyQCcnXF6yslJE01ttEXzGnDxIMkAXFxwfh6tmeZoLbQgKRZkAK6uymugIVojjUiKBRmA29vSbm4+8KGOumhIkmIRgLu70u7v3/O+PCRJ4Qfg8fF1kCDhJaAlKTYBeH7m5aV0D7XU1lATDUlS+AEoFl9XQhVV0ZAkhR+AqqrSqquBIsUXXqIhSQo/ALW1pdXUAE88lYckKRYBSCR484aqqgceykOSFH4AIu/elXfL7Q030ZAkxSIAHz6UVld3xdU119E9kqRYBKC+noaGaJdcXnARDUlSLALQ1FRac/MZZ6ecnnCCJCkWAWhpobU12jXXxxxHO+ccSVL4AWhvL62jg0TigIPykCSFH4Dqarq6SuvuLlDIkcuSRZIUfgAiPT309tLXlyWbIRPNH4NKUjwC0NdHfz8DA0+Jqj32dtndYQdJUvgB+PCBwUGGhhgZ2WFnm+1oSJLCD0BkZITR0Wh58ptspknbgHiQZAD6+hgfZ2KC4eE06XXW11hDkhR+ACITE0xOMj29xdYqqyuspEkjSbEXgwAMDzMzU9rU1DLLUQCiEiBJCkItX2x2lu3tod3d5P5d63XrW94iKQ5kAJp6elKpVDKTSWbbkr9Nfo2vETxJMgDJ8j5+TGXzyVxyND/KFpKkkAPQD0lIlQPw7l3qs+8k8glylHaHJCnAANR/OvcrTzqAkQQfeQ3AHwiNJBmAmX8596NN8C8+g1xlewRCkgxAz3+98H/Hv6v7lwbk4ZEvNUlSVbFYRJLkH8FiQpL0D/buAqqtNd/7+DcUSQrBQ4TgGg6NNEyZqZ13pvJed3dZet3d71123WXZdR13OX7OSIVOE6BKC6USCMGC9oS2+z6bTUIoFkrP9Ib+P+u3Uk+C/X/7efZOycHEanzwy/Aq643CS/Cn8MPQBQWk6YU/htNg2jTrmDZJDnwV/Cn087TNwz/B14Ips9TBL8I5duwe/AUcA9Nq/o8TQshVQL3gTMaDIQF9azPKWl6IwdhywuxOIJlOstZ0MkIIkT0FkN4BLihhcO3ov8Im/DAGseVEeFK1cDBZAFksnowQQmRVAYxAL7iYck71Hy9Ln/4zbK7C6IBkHrBzFggkUyoFIIQQz+KVwL30O/v7nH19rnf1NTf3wTCbej9JHoi9SSzKGPRgcOI8ylEUE2g8JhxmYABNS9v8cQd4TwvLvp2thMPh4eHhRCJRWVnZ0dFRVVW11bMzzMOn2Lk6OISy7dOKRLhy5cHUVDw/P15XN+PzIYQQWVQAceJfevClvl41/Qf6XAV91dUPLRYyKQDF72fsc3pi00ZpBAlasfrwsYYJuHWLM2d4/XUePgRaqQpwOkAgkMmkPXPmzJtvvnn58uXFxcWampqxsbETJ05UVFRsUwBP0gF1y2H7Ahgf54031DObHh2dtlimOztZWqKri2whhJACGGDgLd46c+dMX99CzO2mtpaurkwLoLiYQIBYjLHPqhooX7TkkefE6cBhx06ahQVCIT3nzjE4VaaP/oMHCQQwm9nO1NSUGv2qA954443p6Wmv15ubm+t2uw8fPszjPsJ68+Rt3QGvwImlJZRaqCNDg4P09vLaa/H+/nh5eXxxEaeTjg727ycrCCGkAAoosGBZYCHW309dHfX1NDRQUUGGmpqW1wFjxGKTX/ximLADhxPnKU6RJhRayeAgvC9AYDk1NWRgZmZmYmLi7t27k5OTwMDAgN/vV02AYbvD9dIt1hYaXISX4FTsP15+qVqrLqGkkEIysbDAzAyjo3FNi09MxCMRxseZnpYCyBpCSAG00OLBM8jgzbmbsStXaGykuZnDh8lcIKAKwMilG5ecOI1FwAEOsOzmzdUCwOslEFhJZgoKCvbv319SUsIytftfVFRksVi2LoBtpr+G7hb0xLjwMhcufFlr76LLi7eRRjJhtVJeTk3N9NTUtM2maoDsIoSQAjBjbqf9Bjeucz129TwtLQwM0N6uT7cMmc3GRpCesbHwzMoiQKWSytnZ1el/v8xJILn5kzGHw9HS0hIMBvPy8hYWFurq6jo7OxsaGmC9byJNof7rdTRWxOP0vKRGv4pjMu8UXUGCKhYsmS59vF4WF+NtbfEy0/TgJIWF2XT4L4SQAlBaaW2hpZnmy4nLUzduoDI4mGkBGGprjY0gldgbb4QJG4uAE5xITf/he7nGWV89Nhs7cejQoZycnKampkQiYbPZVAHU19fzBDRW9fSo0W+6cKHg5t2TnDSmfzXVZKi0lBdfnKiqmpy8MW39UOLf7Nhs+m9mESGEFEAeeU00NdLYQMPUzesMDenx+cjLI2Ppi4C+K31GATivO0OhDqMAjAN/PR4PO1RaWnry5MmpqamlpSX18/z8/N1O/y9/WY1+lhPkPcb076STHamqGqgaHGLobnCUr+uipobsIoSQAlDqqVepo+7i3EVteJjbt7lzh8bGHczVffvw+03GyYBYLDwediaczj5VAI5QiCV3g7H5o6nbJBM7U1ZWxhPTSDGpektOf4/WHiRohB0aNA320nul8sr1/++hrY2mJrKOEEL+N9ASSmqoceOuppq7d/Xcu8d2ND1pnE413zW//77fHyUajoTDw+Fr13rvThfNqd9fDlbrun/+DvskaBhMKtPTqenvmMw3Rn8XXfvZzxZMjydqip7hTE9uT+jg3H2fj85OSkrIOkIIKQBFjX4VFy599I+M6HnwgHW0tKxnXORzMRD4XZ8v3BgOR8PRaPg3Dx4MGZs/DQ1b3OHTVwg/lD7Adcnpr2/9p6a/C9dOn9YII5fyLvUcuT7Y3U1XF14vQgiRjVtAyuoLuJaWiEaNnRycTnZoqCkQahxTsQyM1X506LW8Xw4H/r8jUG4PlDfzDJhYs/W/UgA9PUEOd9Gl8gIvkKKRIVepy9ftm+vOzTl8+ILqgOwlhJACsGK1YVMpoSQ+Po7KxMROC2B+nlCoIhQKhEK/0fhXFY7PePI/E1G/sh+02/PsDhxFFD2b0a8MDaWmvwdPV/K6TwwaO+CiqrvqePfxfd1VOd3dORbLebKWEEIKQKmgQqWc8vjkJFNTKlvOVY11QiEjnqGhoZPek46I93ok4vyhL4S0kB27ylGOZnp/O2dic9PTqenvnDJ3pV/1r5Hyd/DtUMmWmqFbj6PbceyQIweMnCVrCSGkAMooK6VUhfh14nFmZnY0bwcGCIW4eFG/7aCj09tZH/E6IhFGRsKmsAOHscXUQgtfecnpbx6MBJNX/bs0F2neC9/BdrzQnUwnVXAMcpL5EtlJCCEFUEyxFasK8/PMzel59IicHDKgyiIUWknR2xV+/P58f8DrNc4nJyKR0P2VRYADhxUrOxePx43XAeTm5rITxta/8cqvIEf06a8F07f+Tej+H9v1XXdaGjFUru2AL5CFhBBSAIUUGkFZWFhJURHbW53+d+5wAr9f8/vxO+rr8XqJRFTunDsXYqUDjnGMnZidne3p6RkcHEwkElVVVZ2dnW1tbWRoaCg1/TvoCGorV/6wI4Vrp7+DdOXrOuARWUUIIQVgwaJixozy9ttGMimAq1dXC+AABwIE/Ph9+ACjAIyE765uBLXSSsbOnj376quv9vb2Liws1NfXT05OWiyW2tpatjU9TU+PMf2dk2Zj9KuYMe/s9WhzbK0UvlZPdhJCSAHkkptPvooJk7a0hJHtTE6ubv1XPLD78RvBUFi40gEjI0sjnwk9XN0IKqaYDESj0YGBgQsXLrz00kuapjU1NVmt1paWlkwKwBj9Kub/iATPnlw+99vq5DYqm47+JqgkpRshxN4nBaDsY5+KaoKlhw9RefQo882fkYjpNH7j8N+GjZSWFqMA1O3dixfDhI0OOM5xMnD//v25ubmpqSk1/YGRkZGZmRm1FGBbly+nLvwPvv9IF21BbndsNfqVpuUgBfDcEUIKwIRJBUXTkrdbuXRptQACyWP/tPOrST6fUQAqoWjIWAGoZLIRVFRUVFZW5nK5SkpK4vF4c3OzzWZTP89k7cCtW/T1AV3vvxNEBRNbaIQmHvPHPBeEEFIAj3ikoqGRk4PJpOdxx0mKxVZ2fhZDHIdmmo0CYL3S0pWNoGj0wcJCiFl78oRwCSVsqaKioqOjY3x8vLi4eHFx0e12BwKB1tZWtnhmBk3T35q2Jdq4yO2L8EdwfOsCeG4JIaQAHvDACPv2Gdniu26FQkyHOKQSXbmKNEiwjDI21NHB+DgWCw8f3oMw2BmzE3qRF9nO4cOHLRZLe3t7IpGorKz0eDxqEZDRN4Ts1COE2IaQAkiQMIKSn29kszEbDeMN6aEPgxnzNofzx4/j8RjnFUJgB4eeaBt2thNYpmmayWTCsG0BvKBHCLE9IQWwwMIiiyooZvNKHmdHGcUeAiM7kjxyf2h0QDKlZGSL6a/YN/+1EEKIHDY3x5zKPPPk5LB/vx6LhfUewcXk9J/giUUgvJwQz5QQQsgKYIYZI1itKpu+BCyUzGV2Z3UR4IB2nhEhhJACmGRyiikVSkspKdGzoYPL+VUypPGsvG85f48QQmxNtoDGGZ9gYpJJystXIoTY84QUwDjjY4ypLLCAzaanogIhxJ4npABGGBllVIWiIhwOqqqorEQIsecJKYC73L3HvQgRqqtxOnG5EELseUIKYJTR29y+w50YMWpqVPQaEELseUIKYIihW9xSwWajvp66OimAvU8IIQUQJ36Tm4MMqhqgqYmGBr0DhBB7npACuMa161wfYOB+qZnmZhW9BoQQe5uQAhhn/CpXjQ6gvZ22NlpbsVgQQuxtQgpgmGFVAFe4Mu+w0tGBx6PXgBBCiD0nd92vc61Y22lf6rRffeEFvQPMZoQQe56QAvDhS5BwdDjc3v6aAwf6PZ4RhBB7nZACMLyr7F01vhq3113j9dZAH/TDIkKIvU5IAeDD4XU4fI4aOzXghhroh+sIIfYwIQXQBl7wgZd2cCcLwGiCfhhDCLH3CCmAYvAlk4NSBO82pn/aUqAPEggh9hIhBeBLHv67SFe9nJq0JugnuwkhhDBpmoYQQgh5IVgaIYQQUgCmjXIY/gzukrke+C3wg2mzZPK4Rk7BX8Ntnoj6Z38C74Zq+Bn4ArtzAX4FmsCUWerhF+EcG/hx+Ev4LAyzVlR/ezme8WPkwnfDh8lEDP4W3gsm6ITfhStsYhT+Kvk0fPAHG1wcZnraqYDvYnMP4b/gW1P/4ImfzPNg03eWKS1e+H24yjv1kX0P/N7az/8p+Hf4Xih9Sg+RbgD+GI7tfuyY4TvhP2CerX0GfhSsO3zOJ+EfYIrtDcMfwaHN7+o74P1PswA0NpCHkcw1QSN69rE7juQd1bIXzKx+NXwCPZ9Ev30ZvV7FQT3iK8eMkXeEGw5Ap367qgw6wKPfPn31yVif1h0V7uHLQDOXb4TNGIe6Q2s/zKkOGGAXjLtoIOvNw1W4podDxtpEzw0Y0G/1tOnB9RxP/6CejGmIXb6zLO9kAaSmv4U1OvRZwS39llGepjxoSKaXXUjdC89hAWjrVkp5WxWACQrAt9HoblLZTQFYocHoALLY4iLXrnHNz7VkB/wuKUMqRg3oMWog2gZ27DxP6iG4ixWACfGEKwCLyjs5/Vt4XAF0ZFYAuzh230UBOJN34XwuCyC9A85zfphhLV8jj2/Me6wCvj31hefTk/L+1BWljZ+lcQZ3an+juJiuLioq2FyceA89k0ymHf43UNCVesiNvX/TMwBnSeOCI2zo28egiqcskdBHv8rVWq6BUQCzrHdjNUYNfLKNNpVKKslIxu+XGLzOWp3gSXtHvD91CuCt9S8cpzX1gcjU6CiRCBMTzM+ztERODmYzJSU4HNTVkZcHFCdHfxDKSDmzflf7/OrEN9VR58CBMjvL8DDRqPqJ/hC5uRQVYbfrnzlWK7szPj5+7969iYmJ2dnZJXXnUFBQYLVabTab2+0uUW/IU6Ge/L17q++lffvYv5/yclwu3G629b/sfQdYFGnW9SmBJgoNKJIzggKCIKLojDppZ76dmY3On3POOeecc845rRu+71t3djbNrI6ZIAgiUTI0OTTdQHdD/ef1LmUrdFMdGNedPs996oEOVV1vOOfe+4Zqxs6yaoNAFTnPwfIg1FWGh9WFNjZgscQdOhRXWhrH9wLCzAzGxiC/1uN5+muzspCXByBV2F/Z7qgAhrzMgDotG8ziIpxOSGtJTMShQ8jPR0aGmaaeDhR+jMJ5FBija/x6Y6P6hb4xh7lWtK5gxUtDqoEKo7X7JpmPADuCxBtP2/tlX5cYAe5hb1ze8WeIKSAdE9rEXdz9FJ9SAC5b2FrghW8Y7J8niwp2I53iYhT/KorvbgsAa5Ed/rXX4Bud6PwxfjyIQRwQAfglnmWvW8P3LuOLAD7wqwHZu39f3cm/Um+FE5ub29Tfg94F9OYr6l+Cf/Q+jQOc/bjaj/4KVFAGUpEaugD40IBKoMq7LOQru2nACW+Vv2yS1B4+RH8/ezV5VLGzIQCpqYraSkpw7BjNSP6U7PXjh7e57gAOnMGZ9/T3LO0PtUePMDiIqSksL4sA0NVQ5y8rQ02N2uY2KJD0u7q6BgYGRkdHZ2dnKQAbGxuaplEAyPtHjhwpKCg4evRoVVVVIkkqaHiX0uwsVldFAIT4yKfqLqqqeDuB1vPgtgbwZPX1eP99WDqacf8+r6Uuur7OO4nLzIyraow98XVZELo3WInt7WzVSnEpA/y1IgD8tXTs+GtZp5WVVfn5wv5+/BcjCOBRB9SvYn8ZGnrOXRAtJwnwtLwNEsieRVBYiMIOFN7eFoCKCvXzTp+Gb3Sg44f44RjGkMDvR6PwS+osgG8BCF0DXofArwAYrd4E+4dXAACn7lzRVvpi+o7HtHsVu+4ddEcbS8p8CQCtC12/ioUF4L33VIcnF7Bl7wYq8BCGBjDwK/gVd3EBit5X36dnYRLkL82HBvhgfx3hh/C+lwA0YR4msQU8gsQBN1kONEMGkpEctAD40IBKmt+vGBpwQllA4I03N6OjA2RnupxknJWVGDegwZ1ggZDF0aPkkRNzc/VnztTFxNTtqE5fveEeUKqXFtmLlu9cO9zaigcP0NeH8XFtYUEXAbBaVXhByiCV8BXKQGAgHfU3Nzd3dHT09PQMDQ1NT08vLy9vbm7qum6xWKxWa1ZWVnFx8fHjxycnJxsbG7MNgg6xlPhrLRZsbdGHIPGRhlSXobadOcOYMMB6Fg2g36Xn5GDp/t2M69e1O3fQ2cmyYmYyPi4hvvhy/Hg8pgAbVA3n7CGJuHED9+6hq0u1TZstcWXD4rFsRm3akzQ9I4NlTrYtHh+vbmiorq2thj8UAMdEAFZXH7ISqSvd3eq0/G2GEFIARMt57xQGvnjhAjVgbwGgkdR/BUvuRH5eyVVtrSrY3TCPeeY52NG+i++i8Liw/y574/8AvnAA30/GajDs77seTWvA5f0aBHbB5dJdriSXxcJGv3vK1WD/UuwCegZ0CEQGlABQ3mmPH/sSAHk8PT/khlu+pqJ4c/itUKXn0APPB18Mn/svXgzN0ICZeAQON9ClZEAFATSRAWoAlSDxpZiXwBu/fh23bqGlhe5tNrKLUJGBjAQkQIfT4Zx2TA+PDk0ODuZOT9fZ7XVud/3581HP989x+ADfyF7NdnzqcNz8acadO8XD9/PyFtOaVE93uehgeAYH56Za58hQ6v/4eOoNkyABsf/169dv3brV0tLCIIDkTk//0KFD8fHxFACn0zkzM/P48eNHjx6NjY0tLCwwMrhw4QIlIWD2v3ZNlRLpj8THSOWVV+jukHoU+y8vq5iABcjj0pJytC0Wn91hGH6YIzOTxdC30dys8VrXr6csbCYiFUhdX1+P646Lm4qDDZiCshPAKewOXVdaRQH49FP+4DJPUSkaWaexiKUuUh0nlice93cuDg1Vzc5WOzerPalRpwpA+A8C5ueHbt0aunvX2dZGIU+YWGS3z0R9EpKiEOXcck4tTfUs9ayTGFggBAMCaqE/UDVYTmIMeByK/fl1HhlL+aYdagAA45vmmVYLH3/gLeyKVL7zmY0BkKolCnOvrrqI/+qy/OiqxZKIjjS6JGxNBsFmP91NzifI4aIBdBrWhf15rK7e9dmTpH4xJhNZB/wa/cRABwN1UxrgFchcQOjgfXnzPs06tUbKPoqjWcgKzHmXaPrEifXY2I6+voHR74kA8EiTsYF4xOPnFnTfSFu3b5NrWJn1qD+Jk/zNLAf2agCrWJ3EJO+ly9Z16JPoeldaPXIOw4Lz4MEkHLcdzptLjuvX34y/efw9nS2FTkVsLBMbpH02NvIqo4IJUpX40eYFgEl/+v5k/2vXrg0ODp4+ffrkyZNlZWWZmZkJKo9MN3SVXj8jg9bW1rt3766trR04cIBZoLfeeovZoQCGRuhK81dSA1ZW8MYbOHkSpaXMdLNrUADYAdmo+LPVZ27eVPfGvBm5nO8GiA2Fzo3u9uzm5qqFU3nIk4pgwE1/Im4xToWDU9t2yreoM3Rgzd69ywo9h3NVqMpBDpuiB54FLIxilK20d7C32lFa7a4u2CzAJtAIP8iYxfEbg0M3W4ZvfdzS3Hzcc7QK58pQlotcdhkKAJsKeZlXue68bmfskpLCaIC0sNd4gKpwMQZXW6R+mg8B2MSmvE0NYGnL13Y//+V9Zn8fSew0efmzEAC2ue5u+j8Shbnsdhex6YqJuxLznSSyEkufvMwoj7Ge5sX+KfAFCrZoAI2+oAOGBtDf2cH+IsVsTCg+JxFAqHPeNB/vhHHuCBvPs9SfMm4n7wtT8w/x3GEeLLJz59jbmSHh2Ry9vW2UgbEBkQGaIQMWWBB+6CGWC6uZ3Y7My1omU1zAhbM4ewIn8pEfhzgA61gnWXSjm/08ai2q7kYd7wUC0xpAAXDcufPXs2+91aAzwcPiIDdaLCQ7XlY1VZdLJVSWWWCDg6qOFhdVkZoAXf729nb6/mT/hoYGuvZnz56trq7mkG8cfXPA4XCMjIzk5+dTD9g/Hjx4IGPCOTk5dXV1MAlqFJMe5FP2tbfeUpmNs2dVrt9qNWYQqM5IyqMYfPQRi1Qy7EGks1yufper19Xd/frEa6dwqhSlVlh16MtY1qDxXxC92wLwF3yFXeMsWTbIdKSzWl/BK01oYg0CkDpl/+1BTzWq82x5VderFPuLNfleaXgTx24eG7o5NHJvJAUJbCQ1qOGgEDmY414UAP5CthM2G2rVp85PeXWVEBsd3UsAWIqGBpBvxiUI2DX5TMIR4yVQeALynV3xBV+v/SdlAePfmdGYVHntsxCAvj42R0ZhJDJJR7pWVtxs4B6PJf7Kr0lOth06pFEhqaJsB7W1NQ0NNVFRNdib20jjYmQGcfF3FQBJ/tCY9fOd/zEXBPhgMx1hxfi4wftiySOLivFxwVsAVN4jUOTn0ygALG0aq2alt7e5t7d/QrE/zVsG2E/CxvyhY2aGIsWMNr1FzmStRe1pnKYGHMZhbIP9mcXCO6RXAKByvRI3QASkARv/em3sUuWFV/7q2bOv0HXeBsc1lX+ytqa6PPmTHMsEOhszO78ZAWBuh/kfevednZ3M/NTW1jK/f/HixVSv79LZZ+o/OTmZKRQODnOImJpRWFjINFFlZaWpIGBignXKUuJPZKjH3qSmqZw/D29Qzfi6283fxG7Bz1PJ2DEDFwCK4sDG6OBf6c95A+dexatkWJ+rFG/AJ5aW6CCyJA+hjMEcG56wv1GnPC21ZA5zVJf4uXhc3xYAD3Bux4rQSbK/soM3D9a01Gxgg84+2wMFIBOZRlOkDHCof1abZYNnSn+F5Sa1aQJeAqC8NNGAnQJguP9qwpjxHdP4CG9fAb4B2AMhqNcVrf+eD7BjdkcyfLyw3wIgSVuG7a2t5Gm2cSZh3IWF7vj4xNH45ssrhy8vHaqf4lsSHxyZnz+xulpz7twJEwEp1drgcw6nSRBAGSfHeY/DCPurmiiuheR/LJYwerR6GKeOsxU+O9KbNDSr6BjnvKk/xHy9lJoIAI/Ug6Xe3juUgcmnMmAMEePnBOPK21I1CfDX84fRJfRmf2/K4FsQrD9LPa9hT5wBzh7G+WqcOLlLZdNXZkCgOrsw18qKMhNgTp/ePfP7zPUXFRXJJB/F/jvAgIAywDlC/Fh3dzcHivlFfr20tNTMZVQpsRdI0plKz/Hq3cCmRJ3gxdgxlWzYbIYbax4D9q/8OLHh3W+/W/9KPWk6mC6g6zIuzSNzJh541rCGHYhBDLUBgkVANMADdbzk3Ugg7K8q/T7YgDlKRA1gO9nphdC/ydKzOB86TUtbWR6G1KbHo4b6/aKgQJL5KhyclzEAGQr2+iJpR9x/hqQorBb29znR6Ns+JADOYOnk0lMJ+OoLXAdAF6O5mXlGagB5mblIOlFkZ1damivhkeVfnHvNsgLLwoQ+MaANPHr8aGbmxyfsjhpX/Ak9K+18JeLNUhmNzCApIB55iZ2BGAeOTbj/Wz5e8IFNIA9be330gNef/srK4H2h/gHbUdWDG71zPirHGi6QUGjbMkCb7+u7SRmYUuzvPVOIn8MLx/S0TPzXoDF1SzefdQkzEA0wLQBnoeyED8GnM8d0vTgnWF+nDwyXy1wAM2Oz2Tjxn2l9RgBkefK7b4op4Ac49ksB4KgAv8iv7xSAsV1bEUuJhH74MD0t5OQg3Qk4oe24lWQoArNalU+2sMBEFhnQWwDysDeYpqdzzZZJ9g8y26dpqjSTkmgTqxN96LuN29QAnpZxwAFf/WVFNOBZARjdpn4eOyBI1pPhG3SkeAtxehw0sCrFyOMmgwBW4HyLHYYGlJTsdP99DP+anKLzPcCJgHERghcuAHQxjKQtLl1CUxPDUlKw6/CUK7HD8u9+v8Uy8K5ljiXVp/cVaoXdq90112tObJ2oRCUkZo/fuyaMoeDp7SwQryJTPN1wG8O/Qv08+gjYfUwQ/D5g3z0LJMiGfGdM2W56/ZrXOjAfO5LNAz0Y68WHvXikNODUXzloTS/MPHymOK/46CHF+7SDOLgfGRfyvmHrfX3D5eVkqbn5+T+8cLV/QGTAXY7S8he7aNrtJj2RpGhpirfS6dNJ3t+8BpjEnwZ0v3x14IAy8V7FTPx899LSEmf18JiWlkbHPz09nZM+fYe2GfwAPymLBhYXF/nFvRur0wkpJYeD7K/IPe0B8ACaj2xmLC1WuaX8PL9LPfPCn8DeSEbeYeTnoIBMGvyIT2amLEpYu3//Jm4y6c9Z8+RLOu80iv3uSuCA0gCPd3oTyn7dnmkSFXKsremkes2jHdg8oG1pJmrT51CwW1JAXgKwhS1j/g/FXD7qb5nqd+EbVxMD04BLPzcrgdkW6YzTm2R6p7paLZfgeNSZM8yIufAtl+aKOeWKiclJseS8hxMckOEUguM4XugurLlRA4E5DTCmA01P60YQIAJgDP/aYUdx047hX3Na/JE/DTjD7/hlf4FvAXACo4Yld43GPx79+jffsXJuYEZGQVHB0fLC5PJCHDqI/cRGwdG+jbLejb4B9+NJi23u4MJU0p+MH4hPQGY8QEuAsswXuOkFGYo8BXDkg3RjREL7oQFSxWEE53c6ngAAB3iZ60+iz+sbMvmHnyQ4NYhf5BmwA38Sz6Bxfd0oJeXXJ32CPwDcAzQfYekPobC8rMKFzU1aoAIA5AnvhjTqL+vRGLt4PDOdnd/H9xkHMMIzBIB/k0F3yXyuKw0wB413abNRTRUtra6ynLSNDd0jSaQtBAjvrD4ZblQiAAZSQjtC/TwuYxmFtXtn/y/DF74ugvJSbgUh0ej4OEWV96+82Lo6lhwbGtnfBZfFsmWxaDExugaNLn+BXsAxGTp3ye5k3IBpDRBWl7lAWPGaD0rvxhj+lTleyhgU+8PH2A2Wj2AxOqCRXfuHUNzvxOX/9vF/+29YAmCFNy7ADBKAk0ApUFaF0hiU0hX/X9/u+ST9WlpWlsa+QQXt62PpMRskEXrYN5Xg6Xt7edR6e8v7+spHR+3Rs9Vvud6qiFJjABVIKQdywjkcrAUTAdBcLkkHW2ChIVCsA3gxGuB5AtnvIWYb8AvjY6R+fpHgpPgopjF94y4ZXAycHnvg8oOCywUoK4BP/Aco8ENEfHxQA2M/Af6wtI7gNcBqpXfIMlK0mpvL/jo4OjroHGRyRtx/SfeRIupQ93zez7P3Nk7kA5rsBDE7qwTAbldCycXXbverm5uXgiJYbwGAsSDAEADRAJkzFLQAfA0GXkYBYDFTdhmQxsWxIEheEgSR+tmbeVSdWJn0NdCno0HgftZfexO+QZ5/OhLQ3m43pgPZKqzy1wQmUHxe8j9BTJeN3fmqDoxKtNBx9YMx4N2rwLmQRn8P1uNUCRT7M+FO+93zvT3zPb29VzfZvkj9chQZYDHukfzRTJKqUL/3MX4+t0KR/rsyx5RHdr+ft/mgenDkXB3CpK/wIbjH52maUWKm8lOeDzybqN7EMbNlLVQVzKStvDDUNvsmQ5bMTNX2SaNk68nJtampgcnJgZWBFKTQ/WcvZhyvQWN2yOTGfeT6tjaVHGbvGR3lKemUpi5a0u3JybwceanroOVK1P1vRCEIUKoksX/kCKaNuUC1tQvaorj/PBruv1SKT/wSduJtAC+1AIgzQmH3Tq6JAIgGbAuAj7birQFvmh0KZmV7toOA4YpUkWKkpJie/Xl5J/tf9pli71ACQO7/b/HUgNCJzQprIxpLvWSgzN3b09XT23cVO2UgLS0Eh3QX6o+Zy6reJn05eve0F6wBMTE0aStsOeJABLyXYwOAF6MB4stL0l9CAddeQ8fubTAdxC/y6+L+7+EKiQEbX9tgMn0NJUCtmbLWQ9psWzdf23nAmK8pfa+/ruZwk6qZNpiaImGr0ezBweXu7ubF5iUsUdzSkEaPhBN49mT/hQW1Eu7uXTqFaixyNKFCdf+abHqiMvStx8U9ZI1EDyGqH98JKQiYvrtkzAcdLloU9n9m3fAvNKL9d1rGWqo2pqdZo0zFiADQkrwFwLcGmEFqqqEBpLMpsr/z8eOh8bShXBn+PSbuv/o9e+CNPf7XvfcB6gAxKR+KB86FrgEEk2BNaHpGBly9PZ09A5QByQXJUZSAdx4IOPzV0/M8+2uzGce2SZ/2WU37uQ2chUnExzN3zk4ry33pCa5gJaAyxWllLwoJCir1L6u9Vp8AvsFsj5H657IAGQ8wtdKbUTQTKZpm1+wr+gpz0Lum3nSEF5qc1YzCXISq+AH4QFYWjRkhcgU1gGLABkrS4DTC/ul+WSUwjvECFGAvtLbiyf4UuNdu4UoITkFkl6HfTqWhAOgsKGYmLBNQAuBz6Nj8UPD6kxTQFmfsPhEAmvE2L/e5FAA2xJQUcVQp43TOqb2sWlcO1EZAmuuJOtD0sHgjJSWGAKi03+jw8MiofTh3eD3a81Qcwg1t356ykoEMmrcM9Gz09Hb2DvVffRoKUN0uXlQdxjQ+/lgFxQb1b86kG/6+8QeCAt1TmkS6koqmnw6faAfuBBYBWK1UOx4XlxbnMT+DGQccptZDWKCov0HZi0J0dDRn/qQ9wcITcFsI7vTALYB8zRnlB/gxADIdKNWM0rP009QkKQ7qzs3MzWgzNt3GiY0MCkLh/fDGSxcAC5R1+89l5eQoq6lBZ6di6sVFepCzmGUcQPk3s2iEzfvBA7UpBk7XUgCUVVczy/RsOUxgFbgWtK4/JfmeXuX+c+3eiH1h5OCIkt7CeiP7/7kUAJY1q7CgQA3Okm+Yd9N1hgKuo0ddhS7XATUGwBFgskZYIHsA06jxrP+Jyclx2xrnkxnsr9QorNB8tHwJAsICujw0QwZ47Fnv6X3QOyoy4HZTGkwLAGlF1cMPfqAqZGPaupP6Q1n6y04qbjrBLsoOwL66a/ksoFuxv7IMmAcFUVrU0hJ9wFGMcmyvGtV+NhyUgWJhf3WswwsEN3nmvH5u6kBa59R+LuziCq/jPjaUZiJhfHx8ii4wwK9wsyBODDV5Gdno3z0zwyIa0ob60FetV/tpxMwUyYRaHAdeAy5BHa2h9glfDt1FIBbKLEC7GeGvq5N1tpS3LQLKTGy7BBYeUzKQxXsVFZyDLhGk/ty8gJvALQQLLwHo0cEVG1NTk9Pz4wfHKcPyBgnw8yoADLJIUlVVsNnUPn/NzbINoaukxFVgdV1xWX75lsUyAk8OHaRwTHAXnteoAWvj67bZ2anZ9cm5SRS/bW74N7Dra+aD4JCRi1zaMzKw1tO7NDjBvhDIiKKu06gaB/Omn6d+cmXIWQ7lo7PZM/Cbtk9zyI7JN47dZSLTKB+P7ulARzOa7+HmCG4DM0Cm+UE3WYJJ+RrEYA96mAfgMk4KJJ4FL92GNuaIuDqprqZO2J/HEN3a0GSdLJTH5V3c55k7fXIvoN7eXi4EI61zuu9O9n/48CH3jeCyYfr+/Bi/yK+b3OpDlsaQkPqd/d3opiOdoqXsOpI/hakudNlgY0m+mv8qJEvWCFj3MUFUAli2LdZ4okZ3N5xOVjE1fud2EzS2WjJ/EpISkGBmv0KXS31pfV1FpkpFYmOF/Z8Bs3B3pnBLD0UAZG9JGmWXHhY38JiZnZsunUZhuZH9/7wKAMEIjlrMqmU1tLfLriPuoiJ3Xp4rlxHAty2DOfhODiueDVc5dyFBBEDnMa9L+3Nzc7Y5B2pz8CX1KusnLOyvmWvqEgSEF+ylNC8Z6JWnQNoCYWmgPNeb+sO6/WdmJouZNUmK9pCgKVqyOY8VVgAMCEa0EVLSfdy3nX/72IXZ0b88ij8RgAvNcEe5ckND8w8ftqOdp+Wo4AmcYLGQGljqvARVpxOdLWiZxvRq8WpKQ0rJ6RLF/vF4sSDRc/sHuvzMEty/f5/PA2BWhwO83OSHi36Z5dd1fWVlhe/yLXlgAHfa5H5Bx44d446hatqoGaSk0OuSodS5u3db0cqSoctchSpqQApSGOTR5WcuRbbYfIiHAxg4n34+qTGp7nSdEoCcfU8Q5QEWL7vd2uphanJ+XlXuiRP8/cp3NNj//n15losExMyLcpAMMDUczqhUtr9WLDQ+Tp4x+ijPqTNDRK+Uu9TcHADCEASsPJgTrFo28KUiefXzLQCshHPnFPvLbqsDA2yXGwMDroGB2fh4S/Z3LP0q00fvSJEb57xXVobC1AcOiAYsFhf/1z/Z/N2i+9/iNujhcf8dgRD69rrCiwg/JJ9FAVCG3jJAZGB2rx4BlAMVPH5xm/pJDQgrWNKsQ5LPxAQeLj20wEJGpo8pa5jpkk9isj+6X2/sPNf0tYGmRJxFYGDzGB+Xx0V1jnRq0Oywc7SNvMDBANIcx4eZ9GPSg/KwlrVG9reetvJ4KONQOPgrVHDjT2Z1uLKX2f+2tjZN07jZPff8YXaIY7wUAA788gMMDvguX6+vrz916lRNTQ13DYJ58MOTk+J4dXd2slgWsch0mWweTsmkR72ABabR+CJ1eiZlJq4xThVUY0pJeQk+ExwxckHT07GdndQAB+lYJoAyGmC+i9Th8VAV6DWSpulTVKKSzgSd6jSkmZkVInthMOdJ2lGjtPHxJBmlCS4XE9G8Fh/3VtHefqb81x7+V55Hv/t66AKQ3bH6V+cVjJcYDn++BUBckjfeYI2SHmQ9hnt83DU1FT81ZXn82DI4yIqhAMhe0HwXDQ3sKFAIeih4oLh4kE/cG4q1hmf497/62TzP9xsp+Oky/hX2BdtBAI8rpYAhA7sh2qB+2mko6qcniH0AuxwduNlZtW63pYV+/n2yM1NAZGcdugMOe870iROL9fX66cbvTjUlxiXFrZ9AYMMAbB5OJ9WVF3jw6AGTGAwp6BUyjiHT8RI22MhrK8dycLKp5cwJ6+mKlJJDb6hSePHg0764CzTZn9TPlcDc6ZNbAzG9w2Fe7wfCcGyAue5XXnmF7N/U1MSvqAmg5iEPKWT6Q9P4N3cfnXBMSCmxIigALriWsUwxZu1sHS1F9aWWU3XWM8dT6kqsQPpnVhoyINzZZekaT+hce/BobXjiQ5AQGEJyKNtiUQKwtESXkfNHKu353LyTm0VTBswl3FSnP3ZM+SJMpvFsbJcMUakrsq2IZWKiZrn/1KlHjY3fXDybihDAUxqE/6c4K/wq8OabL4P7XwD8Kdo+C4BMEJE5WFR4sv/EhKttyn1lyvKVSVaDzPSiMfdJ547dm548fb0gZxkkOg6UDB4oHogqHkTsUWF/hDzQ/Dt9LdarUvZCoEFT8zXhKQNKlaFsl/IqN9ifxxglAGnYT9TXK+aJiaEYUO7Z6RbX1xddioiQq7ZuVfFBbS08pxKSEpNOBzExk16CrtOPk0G22ZGR2dkhOLrU0KDFQodLXTj/ouwu0F5fb62uTgGswBl4owg+UASz7xQFGSQVkf3p73OXf+7zzEmD8gQYeSYwnwpAkaioqOBQATM/3DKaD43hJxEoGFW/+qo8sIxur314+IHNxgwc1PY3miq95GRVUDnV8vDkoZqaloYGKSiKZZTZZV55CA0JPbjQeSG+Mz6tO40JQ675Gm0enWu+tmr1eGJiojc3E+1ahjujEOfZ1OtQdxZnj+CIyS3m6IswCiLbMxrgqMriL/d5Dh1iJi3F48k6tFJSsnq8kbQUH9eQlpqfmufvXl41HwSkPwQytv9nxunzgWiTjgl7P8314yXXnank5C9ZvvqBZaxBqQIlurOT0RpDe8kXMeG7+7YH2h6jwmrzsuKBgZKB1X4X3i8OPf/zwy/6WB9MVNP8fxl/AJh5a1+LPrpS2F8dvVEmpO91PJyGzwLM+dGBY/tnOMdQWzzRhATWpzysV6cnMIhCOnRsDQgC9OusVsVx5eX0J3gNiQmU7CQlkfL4lrh/bEUtgPAaj8f2WnpfSjO1QlB0NUiQ9zm0y0Hd8vJyzgWSh8LLujB5KDxHhvlMGNkv2kj9B6MBZD4eWdysCbpWKyvgVQgKAJWSBcUUCeuJH8jOvr9dULTGPZbGC4qUhYJVoBPRndFNnU1MT9FTY+jGAXympxxLjk1scriCQ77M+JOdGe9Wo9ok+xubNlME2SL4B1Niy8tuj2eKxclbJ7vwRTZF5hoGkrM4WUDGFYJ+NK4kON4uUpqIbCmbInxuEK0YptfsHBiXy+pypVomK2O+HBMz9j6GRiTrx5lC7M/yfCLZ9ybQBShuuAcxOHB4YPB3DqJcUb8yOjshwCd75yszgwzsO2KBE8+Q1zvPUn8mPluQe+VR24zgxemkM0pVYMcTlKDksHZ4DWvBz72gMdk9NYXFRaacRADoZPAyjPR5NEimZVsAeMzyzWplynZHK1Dv9ZUKZSGBa7vOnDnD4V+6/0wZM/VvCIDxCDBGA6EvP2PGTMZk6Awr74pX0TQJlaQ+vOdGS0FJWVX4Z7/Q2Z/oVIYuYAqyXpZZKRtsi1h0wikCwMweM/4yGTq4hDC/ydY4PQ27HR6POAmKWuidUwEJBhZxWpwd9lAEgKguVAZaNo+0g58nATgHbAGaqRmbbrfGdmjhJKBEi6XCgop3lJ/C5u5wsD8zccD2yhoLYnxOsT8GeKQTgeJGw/3/nCABBt7dZv8cvCAwjcc+RvMVsiUjmRbqrCPaXpgAjDjgPQjq8Syi5CXfMN63qL/CA3I9gwDsNyiKdKdo/rFDLKVk0YgdiFKvhogxEQBlBmT7z3CvwaafoMwP9opETYUdRwoBbwFIwOdPADaBxwD8rzon+1MDYOFWQJrFoltAMF23vEzqp+/PdB1jVXor6kMBxr9kfzFFPOL+0wH4POJd7/AkgofeAuAbEYx7ieW72Ddsebn/63hB0MPOgt4CEA68rQz/6aUSAB6HfY7cCvuLbe8EaoG+PYPEaqVTZOwip4b1AgETiOL+M4pE8asiAPic4ueT/XW8OIhvG8Ge6PoMBKBrWwAG8AsFQwA+Z25nNMq9BIDHMZ8U4HKJBuzY1d1rx1CRhiDcf0kBqeRm8TPDvxFE4FIaEMGLF0vM70z+vFBfREPYkA78dnwOEQ3imJcAfApMQBblk+0LtIID+gFjD3ojAlAaoFsgWFxUmR+7HSkpNIYCu+ygXeUndB2X5M8okpGYJe6/OkMoiGBzP915/ecpWIgCfq2yvWEBfgPtcxtSGUUVLNL3qQD1F1WIEURDUOUVB1xX64Bu47YTTo7B1KP+MA4DpH6dg8CUgURYRANAzM4az+xRxM3JCbvOff7Av/s/P4AmGX9Ugz6lpXi5UK8Mf3ef11/+QWURRBBBBOEWAOKECACmNqfaP22/PnPdBhttXpvnloQVqHC5LNQAJoIsUCPAPKrZgi0taqegnh7qg5q6VVDA0WDz07FmMDOIzAFcHjQmoGRnIzFx//Psf0JZBBFEEEFEAAQ4CX1L79js6Njq6LjZ0TPTs4CFaUyPYrQPfTmunCfrAOos/RbLA4s2+zGGhtDZqfbtfvAAdXVqDXBFxe7T+yp8uf8ZyiLBXAQRRBDBC18J3FGvdWyld6Cgx1KDVk/nQCcHAx5rj7lT5xH3kWRXssv16yxXHlrW2jA/rzI/8nSS6mo0NlID1KxQ01gCBoEBdYwggggiiOCFCoAN6KA1NDx4suxaVt0t9PXdmrzVoXUcKjh08DcddLkSYq64Y9buqKWiNpvK+F+4gNpaJQBnzwb0mEOD/TfwWSOCCCKIIAJN13Vs4wfb1g1gdJTpHZXcHxigp69PTzcvLn7D6fxva2uXLZYP4uIuyLY/+flqpSIjALr/TP68dIgggggiiEQAD8T9F/YnyOwczi0r05non5jAzIyLezI5HJb1b1ssX46JjZVdCRkiyK6EkYmbLyUiiCCCiADMKOoXDfCCpumyFQmzPXNzrrFl1xWn5TtXLd9MtMR+RXYljHj9LzciiCCCiAB0bNv8rsssrFaa+zF+thPcBYsFCUAlXlpEEEEEEURwAEDnNvt3+Vxkp9FcLo0LwX62ExwseJkRQQQRRBBB9JyR/d+d/eugcBKAy6UsweW1E9xLiwgiiCCCCKKN5M/sLuz/d409HLa2FPvX0DZRjvJMZELDS68BEUQQQQQRAeh8nv0Hn9vAgezf4FZGkP0TkADgZdeACCKIIIKIAOz0/UvwLOJcKHEBNC+8vBoQQQQRRBDBgQ5g2szWqm5gVwEgNLyUiCCCCCKICADMOPEuwK0MiGhABBFEEMEvzFYQn09EEEEEEUTWAUQQQQQRRBARALQAfwYoAjRT5oUfAX8cOBbo12DuC9nA7wC+CTiggFd3ntIkaoC/CfTBBLR9ts/gGsHDiWBxD/gHwLvAwTD91uvAHwKOBHX/2cAfAW7ue+2+ppoVbiMofAj8diB5r2sUAX8aaMY+oVj1fbSGu1v4Pksc8JuAXzX7iNP/C3zN92lfCOSXHAX+AtARdGF9AFx50ZvBhY4qYAwYV4ZVhBtV25ZorE+bB7r3ZzpSBMPAgirkoHDaa8rANXX8hUc90CCGwOEBVoBlwI4XiG7sByLQTYrVyy8AWUC1Yn8lA3cQVhxTp1ZWAcBbAGjTCAQTiMAMepQAoARIQVA4C7i8NOAXGmWK93GKx+C607IyrOAFYgpoRQT7pwGE9osuAEYQYMQB4UGS4f4/53MtKAHAjwCPySBgALiLCPbEgJcANAadWRQNkFDgNn5RccTL909DUFgRQwgIKQZeV+yPFoQf+xib6y+Bf/9ShALRz6efWoAheScaiYlqx/+CAqT5bdvGKeKB6n6Mt3sLQApS6lB3CIdgDhsbuHsX09PYRjWtCNWnkOn9fPnK7Qhg4VlW14BvYDd0deHOIyM0qQGOwg8uwxw2NzE6CpsNS0tYW+O/UmyqwLKykJOD8ICnHhtThbK8rApI1+H1yDajdsxUkRn0XEXvmirbEmWXTNXd5R3XiKMGrMB1Da51uMTDhAYtDWlsD1ZYzf/U68A0QkQ2cM5E7ZrA48fo78fKirR3of5TKC/ECVPFshPL7VjuxzJMopBX9NlcDYr5Bkyj5QZaprwjgGKgPpRuMYKRKUwtYnENa5vYjEZ0EpLYinKRexiHYQLNuw8CtG17FwfykS+nwvo6hoZUD2SNuFyIikJSEjIyFGulpiJ0sLqnprC4qC5ExMXxtKpjFxYC6EGPHXYIYFG8so2GvTRgZgbNzXA6jbINgYbAJtk/MDCwurqanJx89OjRoqKiYAXA0AAyGSkmMxMlJaiuxsmTptilrExR1dj3MTaChyDykMdG8A7egTm0tuKTT/BQfZfItaLqHVRVoWpnqRhZINoAnuKDnQXHkr5zB8rcSMIJqaiQBeDRI/T0qObHFrKwoOpSBIAtkMzMRsKSq6xEXh6Ch8eDzk709WF4mJcRnVECYLEgOdl4IpsqoZSUsAgA70jZPREA3kHWeZwPRgAI/sKzZ6kBytw2PABRhCK2hzfxpumfGroGZLFRmKtdE3Tw8cdoa8PcHIT9UdWA108I+wcnAGSulU+xYjPF/jRTzfUDk/fKjsYe13pTCUCW1A+Kg+4WpP4udA1gYAIT85h3wsm6jkFMkpaU8aOMAhQUohyoAp6l5je8//RTYoOiAVGIakDDe3gvpmeQjp3S48lJxdEiAGx1ZK3SUtUpyFpBY2REdT2enITG7s1+R8THIz1dqcvx49212T849ANKHRRinmtjDXvFAb29bEo8t8+C/YYdOGiyz/Z88sknHR0dCwsLhw4dqquru3TpUgn7bpACACT3osIVPTObskAHs6KCaqUczzNnTHVZqsX4OJR9nx7rJVzKQhYVuxKV2AsTE6pFdnTgww95QYpG9SuoJvvHIQ47kPSsBizu+ntcLqF+GiMLNpQTqrOGCDkrew6bnzwxE/PzcDiUAIhuigtSXq7u6PRpVSTBgCxz7x7a29HdjcFBnktdRgQgNlYxPqOM4mIcO0Zt4GUoBiEKAOWG7M+m2fMp5mzRJXiXGkBjDSK4KINKqDTAJTLAs7+BN47gCJ3BYzgW0E+9BswEyf6XERZQfVnldCZ+/GMqQS1qSf1kolM4FVLwxahO2fcAZ1DsH/zFSZuK/Wk3sD4l7E8LEg/x8DZu38d9+g9Ugtn42fjk+KioKJfLpS/qWVeyilGcicfAGPAbYOCLAEwJgKEBRXoR3cql2y2HWRfsHXTESNbkaFIGBcBqpc+lWMtmU07ZuXMIAqR+9vD793ly+l4kQPY7ht009m1xc+cWGh6ff3xVv4qjMTvb2N/fKxe0uqoa1Ecfwf72Lp/Af5ZTmhWAlpaWH//4x6Ojo8XFxZubm5mZmeYFwBuq9PjFy5dZmJ7x8fn29vn2H40x/GHsozozdXVPMGtE7SUp0m7eZLOg8lMAeGQkuKc/QiOrsirJ+2JlKIMPFHhpwE927VrC+yIA9BHCAdLvjRv49FOeWLUQNrNsZJch6yAOMjhd96zPL86PLo729q4NDZHDWXhslvQYAmf/69dZgGhpwYMHMQ4Hw7oj9fWJiYmapq2trc3Ozo4MDq5SG0ZHeWuqyC5eDDHrRPYXy/lb9X/wO1n/82qPbwEwjexs0QCxrsddZH8xlhhM48gRmvn0cBvwCa1ztRsWi5LlkCFkSSP7k8tI/WKxiEXQYK2trNBIVdXVZIKvK/ORH2Oqj6KfkBC2tKLcDdtX4p8r/X3fzP7o+lgI08aGb+HWNVy7i7vzqfNVVVVnC85arVYRgLm5ucetjz8c/DAJo8A//rcH0n4v86S0HdL57+Rsfi+VgQzHDYfjxrXDt28rsmBTYj2QmlmYlAH2OqoCO4XdDk1TV6mtRUAg6bN7s5PT/aLjxfOfOqXYj+7/1hZPq/r8T35iX1+3H7DPvjbrQLbZwZa4pxpAf1Fsl+b7TgDsz7TP4uLi1NQU2R9g23w8OTnJUGB9fT2OpB2oAJDh2cKoTtROeoIsPYdjoZ8xL51NvkczA/L2+LjYzIiKCikAtDM44599WJsUAEZdzBFXo1oEAH7hHQS0wws2m0H9tIzkf13/3pXvf/f7YeEBnlg0IHYj+RLqK1BBlyQFKQxOGfbOYGYQg+1oZ2KO3Yzkw6iUfgObEMyPLdC7uXWLGsAOSuqvvXSprKwsOzv74MGDFACn02mz2Zj1Y9z3iD9IREZyTwwOggLPIe4/j2eys7Kys28fvvsbZ3+mAaw+BA0mTN1uEQCb61rX+M80oAlNMAEWHeWTR9PsPwDc68TdT/7y9/DaaxRFJR0hoq3NEACmsw32598IBcL+y8tRfz3qOFIqkQLabgOGQmUM9uh9hgXkfbHpq2lvXqmvdwx8hODBPt6GNkYAi6mLzD+cPn2azTU9PT0mJoZMxLb68OHD5NvJzFSc/g2nexNrf5KUVEdXhpoWeNWstq067jhWb7SoJvveeygqUmkZEYDpadWCeVdMI7DjS8cj9/BC5h0vo4fThSX119erWD4zk8xIAWBl8XXPo0f227ft8QWORAfM43+olQ+E06k7HBppluczoBvjOG/DNNjdY+Pj4w8+gd1uT01N5TBAQkICXw8mAhCPzQjfGaRQAvs/GqOiMmLkzSsnZE9YLEYQQHu49VAEgEGAL1+SekPqFyOE+qkBZkaNZEaQ2CgUGLV5Z34KCuYbG6/Mn3HhzwK/D6FgdpbRIR1/xc9k/4u4SFWrQQ1dwnSkUwAo6kyA8j6oB1vYGhwfpDsi4wHmBYBKSC9GOig70quvvsoeVVlZWVBQkJKScuDAAdb0+Pg4O1VaWhqdrC5+nvUiQwLMe4bm/sfMZeXm5ubk51qLinrCIgAyOORyiQx0XruWM9MpGmDmtIzmyX1Op8l5IesP8eD7aL2He3P/LkcNkPDSVKAQwOZksL8FFoP9WekIDZL/oQakfMD6SzmDlHzfk0bogDK3oWmhzzNh+zJuCK866uscR+ucDxAsRjFKj6cXvY/x+NVq1VZfe+01ZqLZMrdlboW5aYYCVILey73lieXDiV+oSyzVk5O1wKvG0exw3Ot20LF64w3U1Sl2Zsu3WKgHinDYOfm3w8HkrGIT5kj5BxOkJsGQWno4T8XQ4ZVXVBKppoY9i6eVmyEnOnJyVuPjV7/1U/wDIGBJFt9faUDoc5ooscz21NTUuN3u+fn5jIwM/s1X6CaGOg2UHZSyR3GllmwsLFANePOmBABguRtxwFpHh5EI8iUABvszm12IQiP/AxNIezYOcDCCM9j/wYOKCr2xcfrUGfeVM27UIkRQDvv6VCNht72Ak2R/0QAN2vaPSWM0wCiV7D+HOYbGvb2bpLCREeVJmFJll4tBEONQ/niKeX19fVNTEzWg1Cv8YiIo8wmio6MdDsf09PQsy45ETReRoxzseAGCzojh/lehpLC4sKCkgNQ52Nvbs6w0QAyhoLJSgoCN6OgutzsXP9MA5s2wB0h8ZqcEPkDfIzxiUxrRRnDpEgWAFipHG2S5uNiAc8L+tSE3JmETseSK5BRdaUB5SBMHJ4FsMyNtxg1VrtfVNdfVr6+fZKwKDUFhHvOMeun30BXNz8/nLBQ2Wrop2AabMVlpaGgoLy/v0ZcfTelTs5idxwX6TEFMkl//I7aN1x0uVi7ZubERBuihUwyokyxSMg95n92V4i2OPH/PniDL8Vu9vYqJSHzsSlSOV19VaW2vm1E+1sGDKky3j2PxMQLC+8CvigDQVBXroe6qyZs75fF4cnJy6BfSQSwvLz9p2guM3ktelFFrN9h1xYMzDRkNliCgd6GX7C9WjnI8i5kZSf2rI51o8f1pvLhZ/9IQgLa2T7cdf1I1y+HMGTaSraUzm5vlm9AQyBDwBVmjuX10M17jDZHKORmEGWneCEeUG9FosL8B+obsD2QiEtyIa4SBKUOH+XmJrkx0UF5jaIh0U1pXd+zYsdraWrL/bgqdy7fGWLy9vbO8ZX6Lv29yknwZtPtvWcrgfZUnlJeWF1CH2B967oZJAAhpl/n5g5ubXUAunJQBxk/hmhC+hjX6oX1aH4/IUe6/RABhSf2TTdgmDfcfut8NcXWz6iLGAf1kJNN8n8UMSaRiLzCQMlL/cbbCerolm/V1ntuax1OEGAQFFrsTThJaUlISuZ5ZCLL/jpHBwxwSYJoCgENzOHXnOtaDXCtVb8WpEkX9tJ0gx7CzMLBgA2BXokdpsymKoTO7J4SvqBns6nRh2XjotZD9d6L0MFY0LELZiMlSWnduM79z1el4AgC3Ibi9c1XVQXjjLHyAzv7Zs2c57sLMMKuA3mHYFoJR5MToVNJMqaj3oJUxGHDtmvdo8HOzeoT6afRDa7Z9/6IAJyTUbW7O37mj7O7d7jt3DkyMnWkS9lfH7+QjcHz9WQFYmZtbnplZmZ5ejltbyUQmyZ3Bii8HlgpBBycVqSMYsdtVtbPvmQKFgnLBhgvQxyfLc2QfPsC36FVlcYSG4Lfm5ujFBCoADO0M9/8kysmatOiKIrI/bbS/v2fhZxrA0Y4waAAN6ARyty09TGuByPu9Wi+PC1jA0XC4/+3thgCw3f6M/fWGeMT7/jnBRAApqEjRUhgEhLYIKg64CrwL3xDqp032JL+J+jrmUPTcVIQEdgExfRvYAe+31Ie1A5quBVmE9cpwyu+8AyaFSNwycW5xkU3clABQJ6gWdKEI9qncXH/JwzpgEfgz/lJAbYBDGZzyBz50YMapOTmG8QTOPwZc8cH+NJgTAIEMA4R5JfD6uhpZoanAKi5OGRBcEDD5+LExGuw9c25wUNhf5VXImHSyxBAYVi1Rd+qK784P3pmPvTPvmqu6JOyv8+gRCddCFQBieXm5bmmlBMvUQ7J/tu+I2wILLRrRMr1SdNRsOsZu59XoRrFGGdPRdYIPMOjmB/gx/rHGb/G7DkfQ7n/i6hFhfxWlxUepgFqCgFtPgwAJy0LHgpcGXAyZ+sWvJPWLkQJCd/8ZURnsn6pbhfp5pLSHbSKORADr6ylQ7M8jQoUVIKv8E1+TG0n9ck9NivrrGAGUwGOu1H2664lI5IQu/vgZ+8zS0hLn/OycgsLsP6emsPvI4lB+PlFLDFI1/wXUYF68nzKwsjhVQEWwU0i/MOkKUS3oQiUl0X9Vo3b+KfUN+MeVZ9hf/r7mwLDj1zucX1BBgLC/2kbzA//sT/xjhIIgBEDKjabrSl9YoDwGpNhUehkNljjgoetpECCju0wpGVM/CSP1T8cZAWAOuEPLyrpTX39nYcHBtkflFvefVTmF4JBJ8ybmhNWVL68ur6yusNfSi2Gex8/vdMHlhtsDjwyKSzLN5BQgKgaNAkCokTS/iNoGXC75YqDTTQ33v2Gb/SlvACgAEgRM9fcbo8FKm8MEEYAcdURpaOwPDX3oE1vCEo7Whur+2+0G+0fNLzXoaso/zc+kZA2BRQUy/EvjRNJkPZm0mIAEeltSg5o0moADjFTA6iu9YWSzKlwnSP00RgDAPVNF7vvFDC1D1vp0bXQNDw9zWjojV6ahmY7Ydqxn7t+/z0lxnKqYgxwOkvHzvN/gd4nIhj8Y3qq3D2smO+ZwKL5jB+RwAhMp8vtN1rcPATDYf1PTyIf8bfpXy64D35jGlQMY/+q3L2+evnwaNM1LAD4zRJsITxWBiaKyUAJukQUFRhxgb2szggAuEAOM1D/fBMklKPdfNp8Tu1tZyWUQnDVI/WamQX9KnhpCRlL2Ki0b5pyJRSySiVh+AAuP0um7Oe1gdI660Diws7GxwSn/HN+P8aEejKnpR/AzhLqANLKg3P+UdTWqQSNxGlPMngYBs4+MIEDxVDigP5sIiguW+gk6Kjvdf1roqX/ee4N+RrH/akP9ag7cY6wgEgTdTA2mUA7YgGU/+Z/+lJR7KclL8bB/i2GBRreI9WixGGvK2Yk0s7piVRqAV4Hrz007MVL/MdO5Qv00UXottF13jugqcKTfZtNsnJfMMQB2Qg5NceaPTAPlLPXu7u579+6N94+z43MNIGeUB7dTkKlvsfuIBRJ9GzOVjcFPWijsTww+O2GTxKTzV0mK7AYUvv1t/J8o4Ks+Bv1ftABIhKoITEwB84Hue2VMCWUQMPN0Sqh1odiY/GOBxXD/tQDKoc+gfmOrEA7d0/YFq2Im2pLiibEpTE1jmqKZlRXIOgB+QeKt2VlGzQyoGT4z0e8jSzHC3kUPa1Pclvj4gNYB2GxP3f+m7ey/kILACALmGATYfhYEkDgQJox5aUBDoOyvwYDB/mywOHoyVPZ/8MAQgOOu4w0PGxpGGhpmRmDvIk1oFADWUXq6oubi4j3rlZ3btm1TPO4cAf5WSspCUsriNxl2aPRDDQFgG2Aim92FiazKSmOlt18xSBUN8JX6H+2NfxOK+uv1ekbh4dpzjSP5c5hb19ctvZbrvddn/sYM5yhTCThLjU4MFy0ODg4udi/KlDle3XcgFSYN0HVlhKbJ0dQKT29oGi28e7vpHP2qqVEXuolt/DpcBiAaAPy8CYAk0LwF4N8icPCLxv4QH38so8G0tEdFDx9qZH+m3eq3ff9A5pt3bFM/j492lvYLFAC61GTNIQw54DhRwnwUO69p15zMwm7PMavBQbpRnDzHmJpDwTsn9nLWV2dnJ6cAcfkfiNRUyX4G4f4f8mQa2f/nnSkJApQAtBtBAFsDwgIfAmDS8RewkTLzIwJAsQ0x+0/dRUeHmgne1pY1kHHqw1OnurMahr6XNDWlka9dLtnvSaiZF2KzJaOaEQDF/t62suKUCOCbhSkL30xZXNRWVrTNLRLPFrZkXqNqBkVFqKjgyKRsKrIXDcZva0Ai4DDkzEj9N6rMjzJWdLjYX2Y/n184H9Mck9aZlt+XP544/iDzgeN/OjajNmNcMcn2ZOZ8mtB0HMd56bM4G4YOqvtdX00RpREWi2RgzUTeYt5p2DDu76kbWfHnGnEU5PIvJAiIlov6z4khN4ktnm7p6yHMATfWhXFWCedHliyUHOo/2ttbzrHfDGQEMvFfYFA/bRj+oYWJ/e3qiC34B12hTnR2o5t8RDY+dowsYXYNtczuVMxC1/LRI/pNpHiG0vSkOM2Lc+mwDSZb+dadO3eYXeXfIEgWDDT4GXOgHBvu/6vb7L9zUpORBVpmImjiZ0FAIxrDqKqiAc9CN1+bQv3UACoBjtaJAJhy+nytkurspAZYZmfrfvjFuvbEUw++Vz84yJH2Y9HRTMdxJJMuLYMARc1s2NPTqp9wTroPnNqOm23P2fIyberI8szQzJX5wz9G8ZeRRLqiALjgojJMOaco7etU95ER2eyMRKbEgNg7C0RzAKrPGdmsMvdxet9iXsXpn17N7UnmdGbdaH7rxq1/3tKSmvrb33t7xl497/zTzs18tRkch3wZbTD1z4qp0Cv2fTtocpYxG0Jyr2ZmRjJ09h45oDGt6h+fAq+E/HvDt132FvDNbdPNXT1aPrBrYxARdbmUiqrSoYUAIwigsa/2P+5fHuReBuW8hPj+ZH81D9osfrrN/tPh3i9cD8X9Z9dlqM0tsR7gAZXg4knmo6hsAaxFZ2mTc+n+s6C4M+rdu3c5wMsJSBQDLvPjIu+trS36/hMTE319fWT/27dvy9Q3zv6kePjYBbfKl/s/3KPe88r+74CmkXQoACoISJ0pwc80QO2CECb0PCMAekBazhyKCIDh/ivfn8egIKooY1Mu4Hu/53vDlZU/LSv7Wm0tZ1sxo+1yubj1CpdhM/Dqp1RMTKhIeWuLxKEGiX0jXRkqgTVh/9VVm7YydX7FVvrlFVv2EduRNFvaQdvB2LFYCgBHLTmAxK7Cm2JbeszCp1dL9pf13juq2EcWaJw0aKT+tZkj5H1x/2P1WHM94D8BH5hUTY2XuXHjfNTtxsarr702E1235Dzg3NK3mIxPRCJbi+kdpUzMAuqFvwBGFt0sLMhkdImMzfQ7cXNVHtVul+wcQwGfyyq7gJZQqF/bVQN04B0EA2re8tracmLickKCHkwKaIcSyORe3j7bN41lEYoqM2EqgwHa2NiU3jw8Nrw+yvyGTQ0f2auqkqoqURmII/+JYn+s7P1DtCDYP3gB4HYo3ISgGc0d6GDGj72N7lZNTeBiabOp9ufx2FtafvSjH5FxuA8EN1fhdE8KgKz+/TcTEx81NFh/rfWjP/zhFlmPtFxUZHInX8YMJLq0XlweAJGJTHH/dy8DyUGvrzvd7h6gBCOUAdkmOoyJoODCOIP96fXhaH2o7j91l2zb1yeL7M+dO8dllsePH2fhc9cNvsKMNhfcMy/HDZr4CuWZWzYxV8PEHTXYzGZ88UARLWkFX1mx2ZZttt+wYsvJtGWm29IpABabBf8PHnjmMc8UIjOl9Ip06ENjQwxKlMCXqDVQewkAzeqd+h/qi3lTpv3odSRi35kM79p/2+SeZJoEGiy3jo64JpJtQmpqYY5LaeK+oBVIA1KBDB8L6RkwUZjZgyiZ9AlkTYAJUCpk9idvhyrCM/A8u2+yO25HK5Rlhsz+OzTg+8B/DnR/SnqB/f3LDsdycvLysWOs6hDHAHRATXOQOQh0eTAzQ85gaVIeg/a3ZV3YL4+PX8kZv/9nx91jY5vnS6ovv2M2+aM/FwG49oP9QxEAbohIAaDdxd3jx9U8VKZtT50KfGsGTeOXqbiyCetWf//DJzv/kP25x5Ou68709Jmioh++9VZHnaOjoWOLQyqs9fJyn4nvHX7ceg/e6AFoCmCQngO/5MWtRgsL6QcoARDDVNh8OmA6qAwe3WRj9iczYOL7KwsODocsBIUaUyHNNnIHDu7DwRmNjL3gBeoxX6EecPLVA6bYmTJiFfDqAezGukzLzFzJzPwKEIcVr4GCs4j+o9FHcETWEpL9F7HI5KmHMsdaJrvV1flNalslAqBeGKn/U4r6VeaHHc1fNltHENA9HtKuGr52Oll+bW0aNzkg5SYm8mey8fNIY1vmK4xhyMb8W/N1MrMCYLXjgmNnbocixNwp1Yj+E3sE64WRsVktYpGzFVHIx9TuZ2wG9JIoukbi3qh+pfr37qNlFDbgIAKEFuZcECv4pz9Fc/MScfgwE5SKpUlAIQ4CFxbqLMDaWjhuakNs4snJmJpSgRJeB9KCebhGUpIxI6j/j/yIWfLT75yWjR+EfczDBPsHQ/2hCAA3oLiJmzTKQP7R9aYm7oJMGieBB3VFlvalS3RJ2HzloTNs0Gsu11pUlP5kBPIn+fltR6faT9ycKJrBF77AgqWT7tvzrYA3BlDRA/QCwwEkpoRY3YChAeGi/6A123D/HXAY7j+7a7AqNK3KeXKSOldYWMhtNrivGTWAurtzEw4qMeMwTsFias7R3886Ug3bIZRk/lGQHRAkK8NRwA3YgD8KAWfL2GDjEDxDgcG1Qf429SPn5pQr5hMJQOroqLW1NaG11UlyKHKXGckf+EDu801SA74Ac5ANb/Un06K03glmzru7NbbcHQJAAqAAkGPJLWyt/BKCQec0rO2IT2Y18SxKdBUpgcVCT4A8SAmiJJMEZfyNMVMAw28UjOJieQIHT6LESuZBMDJgu1pZUcLA12Wz3vz30POPgT8SrsZtaMBvD3TFYlcXd6hettuXjxxZYrHyrkMXADIXm8z6+nJS0t3h4anpD/+OanYxbyOUpysxm9w7hoxxxIxnux9VIb0KBaSufaFsLXynMgRg0if7f4pPb+AGBeBI2Qo3EKRRA/LzQ5Ao9hgKCJsv29zMDBuf7nbjyRzE1vT0lpwbrYWtbVobowyqNNNMbLhmb7dHDMHBEABaPl4YFrBgCAB9tzDM/ZdVoOQRgBke7sPKHVgN9t+5uQ13PeP0ds7Q5TQtGPs9mRWAZWU7EQPkefvkyEUuE3TMoQ9iEEtLsnzMrwDAbif7pz4x59b/S6//RFF/Curuwfht2i6t8RPRJXzy3BD2QQguwSfYShdPnhzc2PjWo0e/t7W1RYtf+3SNzCkCwD8sFhKyKht5oiKDJWrZ+fNBbdT9r4/gWjZ9XlUU9PQZnPHUHo8qHHmMF/NyLCIOy7Nf0DFiWZkEU3n8ZbJ3I/md5+GvZ6vgmBCFS9Mo8HQRZD9ItUlc3xmAFlbXJtDQiCrIeyczkP2BZe5Us7jIv2X0ItStIJIrx6wJtw/ldjomRvS/P++JSeI3QkY1MA6MVeER/6IlvshHNush64dif1K/WHrpIps1jQJA6g49OiHTMJw2appuyGD0SAt+rCJ7rZWulOyuw7Zu3m2GuP/jwU9L6HnxAgAj+bOGNRw9Far7T6ytydQ3LsAmv3OHpXwKuG9wvSs/xpEAmTQd4D4cZp8Er3ZNQKJafGesa3W54BcjrakdLVbOx+nrm3jrSn0q6lqUyb1ou9b0e8BHV2AHrsCAseXO3gLQ5aloT/H0FqaOaGVfP3TIUXbEWep0lbrc75KZlK1jnVHaHOa6YYuN5SCXKiry9i/9EgJGE+DKwKceXL0KVhAjD7pK5DvqAVWFLYJqc+ECA3DlGzHvFeiiJXkIMMuZ0dMPf8iUIJNCssqSzYMyz8sp9q9pQl8jkBoK+4cONnh5NvhabS23KlvOyWGSAGIhRgCsMI5nXiu6dqfoTt9Zy+q7775OuolByMgEqoDf/kPgTwHlCDOuARfMaoAOA8NAIYKAsL+4/9biBfH9KQD0JIKmft1XTVss85jnqF4r6GS1LCa6hPppZtcZu0N1/wWDz8QBLwAsh/C6/yKxYvT6OduKOxlQCfyu2EuMfwKZM+dz5vhvAW4D/XgGunr4l8mt1jRoNACm1jS1I5VTMVtTLa1WAG1X6toUkdcCmg9iOiSPKcEVYf+3gTlhf5o3/jV2x/376uFI9+5VPXz4/mD1+V95553V48VrpWuuIpdH97g1twsuCgAf5DJzbab/p/3N15pbWpbYYEknDG7J4YGhBvAAUReZQmK6n346+VqVv8ySYlKIfY8KU1/PGDzguYskd8oGJZYqQsdrcFDFdszvaZo8I50np0goXZlvBLIBDSjbd+ov2GuS/dzcUmLikt2+lNmOx2rjgTAsBHuMx91aN+mmLWca77/PYUB126q5hyUIUHgT0BF+/AHgX+2tAToM/IMgHxzLwV7D908pWiDvi5GITNxZwOKwiU1x/FkpQxhC7Tlx/5n8Cdj9tyEkvGgBMNifzIKjDcL+yusJAWQQMf0JONsKfqFvQ/LgPt2uC4AFiAG6fdCC7o80GN9wVihN6InEpMwXRoBWWFutFICszay38Bbm2gDa3wP/3rX93QauPMQV9B/HZbR/wNECYxagppnYQFOjAHDs6/r1WNu5d9n6L7EDcM8D6OR9SiLdf5euBGAFK5OuyXZXO5zgxDby6sKC8tqDQT2QVCN0rLz+lRVKrzyPm96ALJ1TXhFfCQI8gwy/FRQwFyQP4pZHsjHdRNVSJ6+qwZWkz8jxLwWa4A8shzfftJWVzTl/ZeH3L+LLauJTaAKggZjF7BSmhjGMjBwORaoRFR7Dg3jsMzKAGX8aoMPA6eDZXxx/HpMLDfbniJGZtFIw0ifUL+sMFN8Z7r9JrIXH/ReMemlABT5TsGUaAsA+GR73HzC2AHOOj3OAl09b5XZM0b5JhHMuuCCDHwMgq414Bp8CINYeMEvwZhewsIQlQNbk+/bvVoBWZYmtidVz1bIqxZz30f3X0B1zGUAtUAbpMaS80lJey/8vJv3SP2aS3Barxnb1qioZftSgxSKW5t3OqxqrNmY2+AA77hW6ubnOtI0e9EZA5UD+F+WJ7bDbKQBUX1mhTZpSpRQKmNZ77TXVoiYmVHixvi77uDHdxJOrSyyHzu/mUAE0KfOP5bSo3rS+x7GPx75YSv0zH1VF+2mLlG6J3YxR/HDO8/A9GrX/4wHmr2bK9z9YIJkfnceKihBcAc2fS8hkN6lfDFYreV/cf/aygN3/OYQBL04AjOw/2yd7qXn33+w0cIBrfbkFE6d7cjoQfIB7W/IB3NyISYZqyA67L9Eq2Wb/GHXEPZgHb5AemOwrBYuFvh4v5GtimbA/WoB+sGWwUOiAm2F/JQAw3KCTsjerTgVITt6zKTscpF9FkohTo73+W6PL5eJCCq6mprKyCVNcKJrBQ+b50PYJubnK9gfGVkMSJDHCo1hKaKtDr5AuVbXN/uf81QOzlkwMPMCD7lM9y8e/QA+UTTFAAdB2fS9ajOoqA82hRzqhf18PyFHYc0xYAxqCZH9x/xPy5kn94vvT9Qn4xjRTL85gxmB/O+w4eUnc/wAaqD2c7r9gSjQAnylYFPvi/gMyB5xFSmbhLnuc38lJPhwK3vX52pz5w3e5xbHah4NeIX2unByfjmeelwDQbgFbaEYz74V7JBzH8SQk+aD01i50UeoYBKD0uOwqtXsK6L6ifmWtT7fpN9+LxoEiq/F6ivlZFLJLAKkY8wuw2bhzeHpGhmW3VAFXs7e3t7PcuMNVXJyHt8KSllxFcEHAi4YWinLJnChpzyMY4VCiFdZpTLO6xfmurq1+yv6F/q7JhsSvt5S1tDNFLxOfTCPaz10kIIHGZrQgWwLZ7T8BLuNlh47QwIFxw/ePz517Qv1uWlElnL6bRxzifD/81tT2EmJ0BtWYj+H+AwG7/0sIG16EABjsz05isL+5bK8JMiMtlZTQhxpub+fOxlx6zdVefJ6t90IwPniP+0C0trY2NzerVWCAqfnmR4CLT0OBttttH69//AiPClBAH78c5YUo9N5izwYb32WNy6pyJCfTv+AP83mV1m3bCrgHaL6I1YQGsGBkU9TBwSW0t38rMTF9eTmdq9YPH+YgOXcx4VAKd4Q29s9guVEGTp0iTakyS0oKjX71l4z6jQwTyy0rSy0160Qn652JPpKtLGzMRGbWqay8pjxrk1Wxfy78YxnLk2WTM03ZW41qrz82lfDsBkqvhFPQaFhZpHwrA37vz4sG3AziHePtWdrz9Zhj6Ow5v+wvjj8tLuf2+fM3z59fSDlvb61yt/ptHixMEnYxihE4DPZnW2HDMeZ9BrDhwWL43X/BnDrlZwe6SEb+h8kQ8xt/mgUZlp1yfBxzc9zmgQMATPEz1ZOdnc3N4DgpiEt/mfPhHm1MZHODezqzaGhgdZDP9l5wlCrjARixjLRZ2qgBP1r5UQlKKADUszzkMRqgo6BDd8BBARjEIGucTW7V4sLpV9VVTpygz+xPAOYDY3/NBLHqfjmvoEAJ0+SkPG244w85HF8bHk7PyUlLT+dMKkMAuIMeU2qPFbpOn3adOcNi894i5SWSAQ0hg1EcGwsdOaYP+/tXPsJHD/GQKaBVrDqtk1VVJztP5+Y25b5y7hVkYk8crz2+2Lh4oNF5oKnpflFR2LaDpi6JYXlYtkYytrXS8cLxDfiCB/i2D4fmDwM//cbsLl/OFV3zLwDMshm+f0zW3z937ttZ56bvnpu3V9tdcPlvGFnI4hyRIASgG92GAAAg74v7TyIIxv1fRdjR8yLcfw88hvuvBqjCBRlcWVjA2trGnTsff/wxaYtZiyNHjtCfFQHgQxooCXRmlxgZNzbKfHOzu68kYfWCq80y3GaZa0v0LN63tgy1kOiLUMR8cypSRQCccNIlHMUogwCVz62/yKvwWv5mtbcAAwGwv2aeWPfiWFL5+joTQapJcn/HT+4MaFo6n2PKCbJUUAoA8/7M/2xtzeTnb3LiP7WSpcUbslh8FZLA9HsHATv2Hwd3/oKkYKebUfyWljhuRTGgs7Hlco2wNHLSmE1ki+6src091piHQ7mAX0KPAhqR25j7SuMrBxpdBwoLDwCt4RKAZCSLUdyNh5dyKPiFhl8GrsAPPMB3nmnJ/xQCzB6+csUv+xP/zPe8WAbjZP85zL079duHzjfcPT8zVzPn0BzYC1/BV9awRtpSYyqmMYlJg/35dfH9xd8MlKTF9gPL+Iwwhann5/7L5j/hBfM5Gxtq1gej366u7icjAdwKlP4sh0XJZcxmbLEH0/WtqFDzzZnOaGpSymEObRZL24ULbfHxA/wKswA9PYt8WMr4gzZPG9OtFlhk6uc61tWQclEdfw/ZglchZfpb5tZqlv21cPvXdBI5ZYY6xfzZ8LCKBrhf3urqPEtxa4s/mZwhz7aRZBFviJGMv1u57PNKvt/77cB/xn7it++8dk4I6RCWA9mfZcI4wFjGwBaRnc23PJWVnTExuQAtzydLH1TsL5bdmP1KBg5ADM1hEQAmf5i4oD19fJ3dLgKww79+DwHibYSIGvhFvQeYhYGPgIPqojU4DLOohcAYaudIvVrNCFUxV8EG58Z/VjsvohbBw/d36QYK9beicwpHYMlTvC/uf6AQ938dLwF8N6Xtp77oW/giGyZpUVEw+03YwUKWSd8MqIeGwE07l5a4167iM4uFwiBzDSWMN78Kj3gItIkxaOD55Wlfwppzc5x56nC5ZMYhyYAiZzwObO90iW7q3fd9FfBJZbvjfSj86h4TaClP1OKxMZaWiqAYHRkCEBuryuzQIeodRWLvmT8fYDdYfb3h1cnfxv7go53XzpWXQkBBAU22/RUBoEyyzkUah4EuQDTg5O5DSo1eloRM4BUYGoC7oQsAUxYJSIhHfCxiN1ifTidtD802hy8geJi5Yr2ykPFByOcO/ipG6v9hK7K65UN0GEg69ARTU4MRANpLgcs+g6FejPahhiZLosiMKv28T+DJc3MVpclGTBL+6jq7KeleNn/+/+y9B1wU2bru/S8FGhAkJ4liAAOimJ0czz5p9rlnNt64z3dzzjnnnHPO+Y4n3JmTdpysM86YYVRMgAhKjgJNqu9Zs37UbYWWohsanKlnv7umraaraq1a63ned721akkezNY3uj32h2kQF1qfWacwNNDfL9a060GqdPa1mboGOYQihhV57uG/QeNy2d/C/vjbS69lJwMV4nEBUJ0lJcXhHW5cHXKP9YqyVu5yiouNRV8rr9xsKSASWx9l/w1YFD6qAZ/EKQDek6BSAvskaPQlAU7GXpcrLQANshXJ5TTGz/6xl+MKt86x5TyN57DARowxPjbRAjM8HTgZrQR5LZxsAdcbRhW1rCrS0uxCpTb29QTAvtJsudMOZiLY/wERsDKgniW32S4I7PnMHu+vBPuH4aS/DhM/7GhGfAgwFLFe6ks+n2HMh28as4hbAOy7UVxcOyUgeqMP4RshVgSZPr+IHdt5FBsW7Fr5s1jchXNst3N6pp62RK1/+G8f96CFUAvcYC1gc2HxwWP/L1gAT91XHK6PfhdivSJA83wEINvBKmAD0THIYD/9QwxNMGEnoHvu51OPGtYtRuAcWPbvIYDBDaw9rbgdIQABAiwHTdBsbHWQxALYVOc441e5ep3r7bTz5VIPFBWZD6uMAN58fst3ATqgBWM3n9pI3lL/eRgjgXDX/3H9YyP8OmPrBFnw22U+6mp9w3FxH0u1neb0AAOTTHbQcZ7zH2z8yH3hBb1tjh//cerq/JRv/SNAgAABAiRFe/B8mmmzFl3pOHtesfNc7LPnXxUECBAgQCAAz7MQd5hpS04hcw9btrB9O/X1Zhai4/DVQYAAAQIEAnCSBagwtnGjyfraBRB27OCrhgABAgQIBKBxMfYX7OoKoRBfTQQIECBAIACFPIpCAgQIECDA1wAbCBAgQIAAgQAECBAgQICvDxzXdQkQIECAAEEEECBAgAABvt4CMAz/Hn4EnEetBv48XMEvRuE/wjfAgTT4/+CXiAbHh5XDt+E/wG3fJ145i/N00dEB/xCOgQOvwL+GfnxhAv4L/AQ4UA9/HW7gIeYaSjTG4H/AX/XfrtZhGR1/9jr8G+/ufg5/CrYtp8W0w9+HIz7OtB/+BtyIcnGvwb+DIXyiCf4i1IIDu+EvQTP+8Dn8SagCBw7A34q+atl78Idhawxd0fFnb2CIo48n4R78IzgOIfhN8A4eVoluDsPfhTaWQBj+O7wRB3mFDHPyzlMdARTA8XnbRoCvyote2ozRru3TW0bXn7OVDTnGDBiEIWMGAaqssTqomD96PgGeSgHYDMfhmDF2E+Crwv7MU7+1u1/hV6R57L8BmIUhGJQlpMTrH1vnKTonwfKy/hEIQMo89R+HBlYHAX6RNcA96/5726eujP6Z1rJ/NkIE+7sE8DTA2kojK6oABEg6FTUJ8D2ioAb2LVjUKspxRuE7RCANfgJY8HOHR9HWRksLIyMYeCM/Bcd58dHfwSkfZ10MGzaQnExaGllZ5OVRUkJ6OkvAx+mSkqiuXnQBVwfcKAfogE95BC9DnlfKaCeeWCSlUg87gWi/9V9FDk4yyWmkbWZzHnkllGSQ4b96/KL9NG1dHvvLXq83d8Q//De/hdjAhhRSVMYssmwZ9TluDXCIgJrwxYv09GDZnwM5bKeRU4O3GLzIkJ1yrxazf7+vSm2Hz+K/LA+vQfaSvalpwXpCu2AvPvH5AlU/ANu9k0aetWqYqu9RBZdh1lsv8ciRGN5H0ELLda5PMRUhLNvZeGCpst6DT/BACN7w05tsQ4sDh6FqkTrxEIZ3iBcLSkSjJwC+NWAn1PjrgQvrJg0a/SyKePcuH3zA2bP09WF9f6qP8eIxji34XYxd3xMAkb5de7W01HTD2tonLGXn63QpKRw/rharQ/k9wAINeBnw1exgHH4ZD/ug3tdvF1bRz0QVAJFjAQWllG5lay21IsoVE4CxMaP07W/TBrNou7eNmnb27cM//Dc/fmZxAUgn3StjNdUqo/7pK+/rLk2258/z/e9z6xaQzSs55OS8BUgABhk6z+AdTCt87rnHVoZ1o1aqpwHx4zX/vSlSA3YZs4hBAw4Yg0XJTj2xqoiqt6nq4DYG7NmjvmQ0YDnoo+8MZz7iozHGcKzv/2NUVfkrq6cBKXDSR2+KXwMOweFodbKiGhCyR/clAJ4G7Nv3a+EkvOkJwPJ7/gh8NxVO+omau7v55BM+/ZT33+f69f3sF/Uf57gslVS/J/bOSlQ4jiHrTZsM4xcWUlHBjh20t3P4sFECixhOV1amHq2mrMPaHu3/AHfhLLy8zBN7GrBPtrzfelWUGjUCEDlmk11IYQUV29neSmsDDbvZvTICIPa3Nv05kNdOZrv5l38B8N/8SI0aAWxiU2QZdUEHOagPvjRAcKNqQDhMVxfXrvH22477LcP+8/7FqaEhpAGDP4TaExw6xPR0xI+XKlwbfE58eHW59XgFWmJhf4vPoB32w4Enn1Usbewyt3+I8c6Skti1SwH1soIA3cE73DnHuSaaqNpK1Td1UFW+77J2wAVojI0ClolDMr9nmYxjDNPTM/9rAv816yebeM9r0yLKlV+71MFTnGFRvzWx/y52ifetWacsBrySmsrJZ2jEPi7pYdadnQxPDoWHHgw8uHNn6NIldu826jMxYYLyykpiw717nDuHFYBXX0Unf8xptPW4rvAKqfDMwuWgw4SHGe6h5zM+u8hFucaddGrPNNP11BM/pLeytraa/1jz5s9t/5u//MtWDu7eVTNb2QLCYmWcYWaSySGGHvDgNrcvcUlNTp+N5whWA+IIBQzFW3Nz5tlfbQvm5rD7JQN4X0U9zAFfu1w4D6fgraGL2a1Q/zTO8tF9txqQn09f37htHsZqavAH3VO1KutZeJJiLFE4Ia062AiyN+Lo6yf87Y0CF8bg+/A9bbvP3L6t0Daf/M1s9i0AkXqxG08DcnJWUABcIjE5aXx/a5cuacBBYz7W5J0RKxoRSuHEY9H5LLMTTKgb3uNeCy0XJi9cuDA1NkZSkumMW7YYRz42NDdbATD27LOsf0RWUaQAWHK8z/1b3LrCFflTAwyI/eU1q3CVVBIPJJW2b/f2FhTUFBQU3N28+cW2EdvlV1AA/jUWi5RRbWCccbUBCdtNbkoALnBBCufiKiwooCCLrFg1wAXHY3lL8dq6WGFwBwcd7Z8LpZGbq/1kZrpPvj8R+DVP6knD8JayDvxN4M2nUQO2brUmAcC2EMmAfwGw1C8NGGVUdZt4AWgEquEgXjOI8TAL8PKyOPUiXOjn4ve5ffsG+Qrc5bTtZKdfAXB5FDvjLE/UMzjMw/P9z57dwhbP96+gIm52W0QDbOfvp1/N5TKX00l/l3dv3JC8qbUo7jRNLga8/o3Xf9j4w3O/d9YKgJSgrs5HRi4B8F1FkQIgxu+g4ypX88jToKqI8nM+zyW3lNI4BcBz7hzXKTpbVFhYWFBY2N46Yrt8vU0Fr1TpomiA2sBDHqoNiC+aadYde5/3FQrIUVILlNN0hCNAzBoglrcaQMGX7D8/CmFVQVvttOYyj/8D34KNUUvwU0uw/yngz3o/ego1wGPsy5eZ6uqy7cTE5kVF+ECk+++JSeJ7k38N8CkALy3Lnb42woXvIUfgwoUyeJ2GAxyQBqhV+xIAd+nzOCv7wJx1/K2Jayz1y/ffwQ7iQx7eyXIXErBYTFF/JpkiArGbQgG1Hfmm9+/HKADT4UOHwsNn7509t9cKgNmWlz/KE2ukAf6ryEMZZfvYV0JJMsnSy1/hV8SPqqVaaiUM5ZQTE2z61/ZtNcqSYv2vJHXLltlbt+xu2b59Kx1jLlZGuflim73stVGm6FpN8AY3lOdQAQ9z2MGJWQPk6Q8NGQ1gZ2QCAMv+ngB4wsBvW8j+wnbmUblECc8v9qPtC3loPSMjA08D5JB5iSI/AtBHn3X/de9ISkq8+y+ULvgUU92XEoEQlPpv5b294n3L/s70dMM8+6sj+5oH4OIH7gr2Sl2r5/5vmkr2Rn7qqEvAE9tppO1hj/wEebVgAk/roMWGsBGAQzXhGrksSgZYGx31X4PrEWo9ysaL9LexDVDv6qKrm258I3r6d7qCirLSstLSUsrKSE/3Rn0TOQEqREhcL9JXARULyhtQ6cQmAwzEms5ichLL8qNjjijeNUNAXgRgtQHL/makQqiALNkKZdQcnlo8ytueRxAOsxQWH/3fvBmf2LhRJuWwps+x139iuru74MCua9nfEfvfv6/OZdlfWxZDUvyPPMfbWK9e9Xz/pJHx4/PP/BziECsEJ/qTGp4bmEuuHfANh03XnZrCdWNYBVk/PFQ5PXxoemjIHWpxur1kwEsvrU4NrmoVRUACqWigmGJFAJYZRWLxp39TSVUbrUyqrKyooLJS1n/tWuyp4Dg6nDSghJJ88tUSFOuMMSYZ0Ic88lgOJp1JPV8AjAxaT38sN6fioWX/jZMIc3hDQGO5uQ9NEJCN85A9sBljbAKDTbGzz9ON0lJL3cbp7+4eV2vwkwqeYca6/7IY079paY/bSvamyH3Oajk4ov4vfX+amuTKeOyvRuZLANwETzK/fdvz/RW5HOc5z/1PJMElkyzplwGOYz5pK4sBc3Pls7OHDs2qgw/9kB+eOzfpJQMaGha5FvvJWfcaYAUyk0zAMuMEE/GnfyupEevLUrWxZgSAOFPBLrFAPV4ykEKKTQ/I5phjOfiYj1Wwaaaxw0nGdPez3zIs3wlv2f3Thv1FL5u+3D9LutlPlrVXPeb/Lcssp7PUHXXBecpSwRKAiCBAAuDD/R9hxKbyjJWXJ14ABMfPQPpncAT4uyvVxJ27d637bww89n/CQHpSwgclXDx0dhret+5/hxlvFe9b919cvBpnjdZdRhn1GC03V2Rto8aYsfcQEgBjp+dOawjISwZUV/vIq6xLDUgiydNI0aK1ONO/gHH/qdSW4mJsEFBU1N7ebb/fv183InEuyRRT8iJlgFUCeQb4xk1uypE5zemwE8aFIasBSi/knMppIrsJwYFb2P3P52h/D7mnsNgse9MW2BMA/3B83NGnNBU80dWl1rBkKthz/2NP/4ZChvTT08nI0DYeAXCffJMqoRFjBn8y/qM7wPi4N/Qv7qmhxhv9JzqS1oz9+/ocO+FLduuWEhTeYz+KXBL8Mqw73Omks4ceMBxdVhZ9VqY/Fi3hkNEAd2jYGW4eaPZmBsgkMLBOZcAlKqSOYcIywDKjLJ70ryyffOv22+yLPloNmO3utn/if1KYywqgjz4xs/EfQffKRjxEwwJu0W/VhC5zuRWoNt//BFyaYWCAb/3bgT/xb+eH0l7jt8HPwrXkpG+9ff3n3qbVHi3riFqJLIa75fhQ9acrCEhL8zRAMWHE86BRBKCffhsB3OWueDz29O+WLeYRwLw864usLPvHDh9hn8f+otM88jz2DxEiOpLWhv3FApb6pQHNzRIrb+Qnh5xEsv8009e4pkcbr3JVo9tqMHV11NaybVuctZKqHMYQQ8MMa3vnzj1PAF55RY607ZRrLwP+K+o+93vpteP+YqnNbM4gIy73f2rKsr/3mK/+ZU3tuL192v6VBCAxuM51NQDRh+5XCSU24SEB8P+gtpRjBGeERluZb4vluxj6Oer/wJVs9g1CNgafaj+zg/xsLrk5vParUAMO2Pno8bC/fw14jacAkQLgJY28WcHRHv9/5JebNrFcyHOTb/PwISUlsvXM/g4RuH7dsr/Zgsf+1rVaQgAShe97/2V01Dl/3rD/+fOVbqU38qMqX/E8V/OiHx1D/WOMPeCB3P8rXJEcFe0a0N0/etQ9cMCEgHFC9CENsAIgu3hxbD4ZoFOsmEvrOAv/sfLsP8poCy2ttHbQAeg2FVJYQAExYN6338AGkb01LDZt8oKA/lu34kwF+8ccc3ICNNv5Epf0AdjN7u1sl7MO+BeAYbKHaRyen4Y52MzQVWYmTmQ3vpnDkez5Yg7SK/ZXk9jGNu3UV1jHXC1jxw784LMovcG3Bnwf/h3rHcXFlsaNU97V9dALAti5k0cxy+yKzf4V+4sF4sCZhR+dqOR7xP9s398ki3K8vj6P/QmHRf2W/f1M109K4POIpxDeATtcdedO+tmzO365ft+Vfcdrjh8PHdcdW41o/xQWn8se8/2VzJRXe3fz3f4t/31nVW5t7WYNOh854qMb+utttdQOu8NDjhEAzTCKTAbU1BA/NmywtuAfK+37K6l0jnPNNPfQk056NdVibfnI8aV/t1r3P3J6uqjfaoDCWPV0/6ngW/jHLSwcptwpue0qoHx/OQFnOdtJp2RbnaeOuhpqeAIOEYkRGDZ6z4xl+Q6GPsZkgMnOOWRSvXDIphks+8szMF+hr+oheRmDM3/cB/v70IDfAUNPTSpYAoDnOkgAorn/upuP6MYawCOc95Zk/0b/L4EIPfFgHvt3dpZT7uV+8YEkN5E18w7eM9L1k5OlP/ZrS//vjoqKmrIDDcXP1pC1SmddhP1d3Jn8mfGS8f6S/l9X8sef3/Kz5eV527eW7K2sLDHNayMrBDsQZDv8xdGLX2qANaeoyCU+JCVZW/CPZaJ1wUdvprQEUo6/xsc0SiYfGdjP/j3sETmKuONJ/1rfX/EfEXDLyx2rATk5bW2D/lPBp/CJJpnXk6Y+nRrdPdqzuUfccZ3rYcLP8Zx9GGG5TyEPz5v7yFQvJ8fOASPHyxOoMWibRZbdn0zyMp4TrPTB/r41IPupSgWPRU8FP+7+W9FYI7yF8C6/B2NdLIpkaCQa/tGyBj489lcdpZHmsX8uSyQbEz4E1DAJDVjMzl7u77/8K/8nP/9sbe2OsbEcBV4vv2zpa4WxyW4Woo/M0czNPZu/0/7vfzG7qrSgYItchm3bTAqooYHSUlYCG9loNcBaa0dr5KviQqH4Dr4R1VtKCo6Dq//oH7IYm6zwhSxyYGSCiX7673HvBjfEj4DI8ShHrYMcT/pX9Gfcf7dCWx6F++UQkGRg9tKg/1TwW/jBFVlkZ5o+Pj32v8b6d/dn7c7amrRVYzIa/FHnOcIR23/8o3yIP/Kz/JHfjoVlf20rsM/5W7LFsr8sx9sfU1jmxBedPi1Qo/Y0oLkZr/1ECoCaqHX/Tfo3Pd1Qv/3BGqF/G40XshuzeQOcKLe3cqXmdnR0eLlfwGP/nez02aqSEvuOjO1wwAoAnZ189lnf6aMff+yKtTT8K3vmmWXViYsPnPTeZrcAM+GZ8e7x/u7+v0qHCO5W0ecmulSdDg+7L7xgnyCOv5/luXmHnP+XEG5qGvQSwipv/D1EJiGZtJ9ky8epBezvCYB9UyZQTrnIUe6/BEAOsnyNuNK/bq2NAJyFzdsGBtKAS5fsL/wIwCWWQGolJ89OnD0Lf5yWGnBdw8O9va//yut5bXn57flbDm+pKq6qoWYve2N5wGnMGM/A6ci5vk69a1g+MgKwQUAO3v5lt2oHi6+FBkQKgNeEIlPB9tHPx0f/U1PX9NVaDbDN/7BejHd5YsJjfzUrkb6X+/VB/WsjAPMaMDPjNjc7GzYwOcl5R93SCoD0+8CBlT/twlWM7J2ZYcamAZQHrqAio/vMpe6PGBiQPjm6moICrxm5xAW5lp4A/IAfnDvn2lGgrCx3717igS7Q2qT3afm4YTdR3pWv9lRCiXrVDnbI8dc/de3xpH8JUzlVaWcATC2kpU05Ng8crqgI3b1rf7QCqeCTwNG/T+VP2JPNzXH/PmfPnv+VN3e35RU+yKuZKX711YrMzHT84QqP4mELY2EeggOjdq4vMxPJ2VcMy98l++6jQ0AapND+MDlXsPfRmR/ZdnxNX/naaEDkjK6OjsdTwbPMLv78D6ypAMSrAQ4+4LH/zZsKWD32Fwv4jyWT1uolSeJ7KZi18atXpQFif5l2686uIKoiP0aBgkeRmvSgn/6OL74wQ85lZSYXLHpeof5ykIPeE0GfT34emRAuww+qowlAWhq5xtKQ6d+xcSO/BpKJgIPjLZZSRFE55ZIxWfyzf8veKhP7h6j8VfLsqRbQUqXVgP929+5fnvf5tGMluuURqARcabxu9Oxs//f/ykcfdYbDZGSQm4sCP584tXCAa+z/MmZpHoYwGeA/n625XpeQWUyBYX+1BLH/fXJOWSnFyczkxRc5ciSBb3pwYpv678ZxQie+VLAEAFF/ZCrYc/9VpY+8QWINsSfi0+rNvWhpWfS5zzLKolH/H4WTcGxtBGAhiebnu8eOORKAyUlZ7507VgNsHCD6FRLm64iPppnuoquFlg46uHXL+JxdXVYA4j+zbQKRCeEbD254yYDsg2T4Y+mFMKqZxsk0MJZGcnLs3MhPQXJkd/WWSyykMN75GV6/hcpTlR0YW8Bp3j+noZKcCrFyW9uYj1SwD9Qt+CSxHBigX6KfeuFCODfXlQDI6upiFoBBxn6A8Br8WhhE7P8uOfB7oQUL/gUMAl+Q8wV/BX4DBpw4sfR5nQT0yuiTwLW179tRT5HhD/aP9St7HGvxpIKHOzuxDaKnh8LChe6/hGK9zadfeQ3o7/fYX+SpgVnL/voQbbJYWZS0c9JaVo1o/tgxFcDGAe3t9z/7zAqA2ebkkLCXwdmHUoopzicf742gw8OsKDazOXJ22PXrPVlZTna2GQ560T9LLxCAxnTwLCb8yIKPK4yxMS9yT0/fdGnTJf7XJfgr0d94lo19q/0tZq/iIxUcSyNwa2sddSTZwMDMmTN6eWJeHlYDSkvdJd3mFh7F7Cxzc+wtc/dyEX72ND87Q1L5/W9x9k3K6ikDOrWfn/+56Q19yXkv0vYtyl6lzIEi7HsHEsH7MYQCqaTKD1AsaF8DJaEbYQR/GGXUvlYPML4KabIYHnaI1ACvQQwUJln3X1syM22YYMd/vuIa4LH/vXty+R957tNdXvtJWuOq2bHDCoC2WgT46tVBbyBIr88MhRLn6CSRFCJk3wpn3uY4NcXMjGxln0yqoMJqwHwyYMpmg7M2cIAno4HFsCstgv3T1uuAcET6t6L6Nx6vhE/haPS26UI3vA2VD7j6q+/4TAXHUM6GBgmAtZ6WlvPnDfvn5cmcZY+lVVYqp+/W1wODsssMNf3FHX90RzY/nkO6Pe0XMPiAgZ8lZ7I9548fzsZSFZnGbHyzHpFFlswmflRTffT10CO/Xp1lSfbXX+rv1doB+/yz3KA4nwf1mlPb/qS2lAWj/zYIXp8asPh8vr8JjbADn7h0ybK/PkibPfbXwyYxeA9JrCGsKtbVWQHQVhqg12d6CeHnn1+5E/mIVSeZnGJqllk7IdB7rH4FR4GEfezzgoAzs2e+TAYkZR3fmJ2UtDW2FMcfN2Zwfr0mBT0fnl8RTx4xT4BGd4pcDIqgUvYOxcX/6cGDWFLBPsrppqU5ERpw/XqfBMDash/Q2rbNLSmx76wffNc+BfS7c04eMY978k0MGGhm8Jr215U0lZhHgHgVcrHsb7brFKqPQgqLKMokU5zeQYc49za3a6ld8hVb+stOOu0b13UEbWOIACBybUe1o4e2Rd29m9K+fcHzP+sE7tJh1xGE/dC4vFzawuc+3QM11MQWOyatC208ciQyDohMCB88iB/E/3YO+zI40QAgSjb+WEYGq4PIV0Rc7XfOnevLygplp6RkQw5x4OC6fDCks9NL/xYW/tiXT3jyoyU+AuOKa9hJYQ8etPtIBcc+DulpwPe/f+GC6w0E7dq1vAZmW62dAqZt0nRado55BCgDbx0Ya527c3fnuHYSQA6W/Y2tX5RSWkGF+LWJJlH/da7rswj9CZmhbrqbaW6h5Ra3AP29jqDjxD8rWM1APNjd2Xm/M6Nze6e6UuRa8uub/Z0oO2U+IHr02H9gYAc7Gtyoz306+ELSmj8PZhlAyQArALLJTz+NfDBU/XDl4RAJ9f7LXL7JTRtO2teBUli4OnKHeCIyIXz7dkpWVkp2YSgbXoENy3lMo6+v78aNG8PDw+np6dXV1eXl5YnXAN/uv/eiB389R39q7dKltrawj1RwrKiv94KAyfOCHQgy26KiZfd0bwpYNiU5To6IHgMePsR+NTm+IXISgAs/aYMA1i+2YmbJ7WSn2Pw+9y9xSRJpl1ErppgFuMc9zRs/xzl1KzvrTb/VEXSc+CcE6L7Q1dVz/37Pg5zume715/4vl/1907XH/jduqF15T/6kkRb9NOsuAojCbSkpkQnhgcuXI+OAePy+URjDYizy7PaRhjHG1KBF/Re5eJ7zIhn7ICrV1fasK6kBEd5uCSURCeGSCxceZr/8zWzIgiO+b+GDBw/ef//9ixcv9vb2bt68ua6u7vnnn9+xY8eKNFJ3pdO/yckepUfJjrkLEtxmSrBRjNmbNyUiPlLBMY7MRSYDutrarAbIXnuNpKTlOXmieBsE5Ni5vk42Lp4wDAxg2V/asMG1Wm/Zn3TWL/LJ381u3QF1ljOcUU8R+08zrfoSs8uvzyIriSTtUZO2a2tLJM5yVhGDfX3IXvbWUmszyfFrABdm+nt7+76Eide96GA9oA/6wW580bKDkIdFHlFw44aX+6WPhv4Gy/7lpEP/cqg/L/Jj0jqaFJKVFRkHdLS0RMYBMcd2p7DotR9x8OBNBBNFXeWqmixiqcOHjZ+5Zw8FBauaEtrFLu8VER/wwbvvvv0uy8O1a9c+++yzd99999atWyUlJWNjWmEwd9u2bRs2bFh5jY4//bvNuv9ORobvJyTm14nk5k17GCsAK39DRCIRGtDcPOoNBB096l80I8d52GmJfj4CGBhw7H7r+8u8Kv6f8APWO5S76qZbbVUOmrwlyYA+y9NXx7HvzZYAqEPZl+tp9P8LvrjBDeAoRxUoiK10hJWaFZx0mf/TLxhQtRu7V81+HcDSTBec8s/+rzseLf9uFsPAgMf+Ysj6U/WG/ck6wFmM4eAT+z0BsCdLSkQO0L9nXFQUGQe0tNy17C97+eUY1+c5FYX9rQCMM25fdzPGGMXFZjTgyBHT6UUHq4/Ip0IVLLNMyP25d+/elStXXNeVBlRWVnZ3dw8NDUkGVly44hr/keG5/8tZ4q6sDPubvDx1dT+p4NjLtm2bupk1JaIiB4J27PAf0WPdfxsBWHtMGEofewuQg/CqyzpHGmmi8jBh+1nekl1Co4IKxQcZZFgBGGVUHpVuuT5vZrN9sdIJTmi7gQ3xu4ieBnzrSv/rL/ZP1U3zzXU2/nPKY39/zCz29xBNAK5f59Ilw/4dHaUvlx44ldfAhQNcWOaATz3sBxYKwNprQKTKe3GAthcu9NpRIJmmSsaAX9Vx/uuv8l+jv1J582YKSigtNRQgx//AASMAycmrUtRHXd1kkiMTwuo2y3x1eXIoFNLgj3IAjuOkpaWlpKQkRRuzSHwoEDFnJyfHSwAss615QUB/f+ypYH+IDALGmpqsBngy4Ace+yfNpFpPX8z42Fd7yLZfPXXvZiii6HmeTyVVF7+FLXLwdTc0fCrjUaiAGpGxL1ZqoEHKoZ+s7Auib9/u/N4/7fRe/WZUdX0g/G74Xf47Mj846PhayUPtpqvLyAB0vtv5n5EtF2VQv4o5gJ8kOlLs175RW2sjAEDbs7Dpoo0D5J2v6InF/qmpZGSYAaaSEtOMamp09kSVE/t4nI0DJplcboxcUVGxe/duufxdXV3y+pUD2Lp1q/TA/0X7v+I34J3lNgPrsae2aa9q2mZV/BOe46WCdV/27pVCt80fcmREqh3/bbGlihDljRutBugEOulduNBD7nmbDPDVFCzFpwzyDTZKtXRzI5ebzcrScZxULwLwU8UxNKm9slXUgFd5tZBCla6W2g46euiRB6PuOstsEklppKlo+oMKKrazXeOc9dRrPx7iK2J5OZbwf7IAeqGKhLv//nuTDzgyx+85XmXFkRSnF+L9phFiePW1wX+Dby8YBJYbPjtLWRnh8DSchXTY1GLiAPnoHuI6sRUA9Uv7Fhi7KHl0xHu66OPd6ifqP3nkSQPwC1tJB8bHx/Py8gYHBzdt2lRTU3No8cWMGuO7Yu9GGXzbZ/XY9G+drN26OKpd0bhPOJFhv7Iy0unJyVlohzZsJmBFb4uHwkITgKpJSAPgIuRC3gPJwMInkhsXFYDiQRqH2MCGUkojlmRS2VUCRkdzwLD/Rjb6rOJGloM9skSMBanRyv3vpLOX3hFG1HTnmFOhFB9kkSXlU/GrqdZn/Hcq35mA56tANgdbZVmJFQD/vckvFmpAY0LYX0iKfczX8fGqmhT7RUwQl8kdm54GhsDEAZAuC7M1tEInlgD4GOpZuXKGIcRiqKNuD3ummV5ms3GeffZZ8f7o6GhqaqrWM/B70bHfGVsGH9WT3M63LF1PeS6wz7bmLIwId+60LaFt3vaxas1v2zaZndIlnIdcKwNhqkJLnHPPoDEGsW9SIgJlZdafycE+/u+7ik8m3vf3AfkrMvuKw1FGIwUgk8xlTvdd3k3aUSWbFwD7IUFY+d6EI/NxjldZJSTFmPdzoqxZ5muvb1gPHYMuLw7AWGHsJ44Jq386+YyhmI5T8CWWe9Gh1a6ekCXqdl/xo++W0D9/0LtQ4eu2xBSVRejVEFyA3Hnb/ORaHYQhGCQaQiHL/jK/COEboTV7UUT8rcY/QhmQAAFIWG9yfNBpKHEC4KNfOqwJbs4LgLYvQQYB1i06wQpAzwq/Cd0bBYIKEoTbNgLAbF8iOgbnbeYJxbLsn008CLBVNi8Am3mK4bC2SCIKBqLs0MQW+aqrNiV4CVyeFwBtXybAukWbJWr/SST/3cGLLEYS1/cjBoJgH1GwlPsPDmRjLId4EGALVMGs2T71cGRreHLXZSGGhzl16l+fOsUPfkBjIydf4qcxcNjClhd44ZExPpenDgECBAgQIIno+N1YL7sX3vLcs+d4roqqOup4mhEgQIAAAZKe50mYeXaO++/yTzD2PLBzhhkXl6ccAQIECBAg6STR8QZfVQQIECBAgKTGryX7BwgQIECApEIWQxZfbQQIECBAgA18fRAgQIAAAQIBCBAgQIAAjuu6fF0RIECAAEEEECBAgAABAgE4DX8YtoDzqL0J/wfmeBxOAi0Z3lit06bAT8N/hB6w6IP/Dr8R8lboFPHDWV2Liln43/AmOFAMfxA+Wt8FibR9ROAm/At4A0IxVIfjw47An4cPeTJGMU3tG6vTSiC+s0cv62H4u9DG0rgH/wiOQwh+E7yDQQf8Q8zOVPi2dsZ0wcv7rcV34LdBJjjwCvxr6E/EiRfiV+G3RlzIv4GBZV9HGvx/8EtfxwhgH9SxSqiZt0KwyIc675xPJwKUwAEisAP2z9vKo3L+0AeIDS5rCZcAwasg1isKoc7YaiAUIQCRqIPOebtFvAjgJJZkUqBBtnBZ7G6M9UAbK4e0eeqXZQbsHyAQgJV3/2Wr6v7nL4iPIjVggqcJwVtvGxYVgE3zGtCj7QreVEv9+2EbMeBt1hJv8/VEgKRTiyQBuoiCN2EDHhpZPsYYe8CDAQZGGBlnfJrpOebsWijppGeRlU9+CSUppBCJXfPsv4dlYHCQe/fo62N0lKkpu4w6GRnk5FBczPz6Wamwc94WojxCA84yj+lp7t7lwQOGhpicZG6OlBQ2b6aoiIoKc4plYmJi4sqVK52dnYAW9tLqvlrikZhhr03FHx9nZoaNG0lPJztbpfa3eN6CRjELP8+jKIbniIbGlWZ/3cTubgYGzK1Uhc/O4jimzlVLKldBAaWlppgR2A4HrAAsLFU17P+Ennt0wydYqAXuY18VVfjDZ5/R3h55tv2k7OdHDpD6SB2cijqo+x0fqulsZGMaaZlk5pJbRJG2+ISPs8f2cvbDRNZRY5Sz3INPHo2x34AO+HTBzhiqy/vlApxqXDQDMMqjeBnyHm2qp3ycdeF5G72f+k8CjBGBVyA38nD+L4U0+AmWi8ZoAuBDA96MbyXPDjpuc1vb+9zvo2+YYQnAFFMurhWATWzKJruAgi1sUT/czvY8e5cyoQ5rfiGaaGri5k3TR0UcIyN4ApCZSV6eYX+7BPy2bZ77nxc99uict3tgjnzjBq2t3L8vShJ5GwGwa36XlFBdze7d1NezHHz00UenT5++desW6Iq2aY3fV199NVlXu1zcvs21a9y5Q1cX/f08fIgnALbU9vK2b/fJG1E0oPhJd/+tFaV+1YkKZSXNarkq3BMAK+fS3fJyVZy5oampQM489R+ATYuWav9+0zC6v0d3H3cQcsiROyL/I4Ol9fv6dT75hNOnwWAz7Of1AzKd3UdvXtCnfxPRYJdZ38xm9YUSSsopr6ZaXQN/8H92nzgEh4GlBMDTgAULJnoaELK/XX512V9GgXl3PUtowMsLCuBPebzz+hIAHxrwChYxiGCa/eNVEgAoaKEA4T/DKfjlK1d+mtghum+i6RrXbnGrjbYuunrpHWLoIQ8jBUAdT52wkEK18q1sraFmL3v3s3/Dvg1Y9i/BF+T1nz3LpUtcvWqoUDQtPz0cRhBNSwDkMJaViQTFLOn792sl9Zq0tBqiIt3TgIGBznPnXHtkEZNOZEnWdc2Rc3ONH7pzp9k/PMxzz+H4IUDp1E25/9KATz/91HXdI0eOpKWlVVZW7hZTLwuffsr581jl6+igt5exMSsAxlNWqcWSujx9NTjI4cPL5A1PA4qiLoDqrqjjL8a/fNnomYrT1kZnpxEAVWykAOhuqtqlu5WV7NhhpKKuTh88378yWqnS0owG9PTQ/V16vqeKOsIRudgi2ROcWDKwVBOQffyxaVy8YKjfHK2iwndVWozAdwkBTxIALzKWY1RJ5Q527GJXHXX6J9Hh/+z+cUi2vLN0wAVoXLDzIjTGdsGGhWMos8e7Ly/nV95ZLfv7/6kPDXgZYrwUUuHkquUA5EyJd/LzXRi31/IpXGmEv0BMuMGNc5xTf2mmWZ/vcMfFBeOPlmSaLrxhg7rz3OTkxMjIxI3hXv2NWrx8HIULnXT2VvYeqTuSU5fDPvxAPVLutOman3/OlSviffXqPLbJjXJwJsOTg+HBzj6J0TV5cfIra/r6tKR6zTPP5GRlER07oPP+/c4zZzrPnr1y/ryOnE+fOCevxjCJAoCRkXBn5/1b5+4byRkYMLSrL0SyPjA0NNTT09Pa2qqBIEBxwIMHDxQEsCycOcOHHxoNuHhR5ZKOKsYRcYhBwrPhgZGBeyP3RsSPMgnD5KRRhYYGVhDuijr+ukG6gypLc7PulDTVjtLkkptOUTLJc+5cOBweDY8O9KnJ3CAnx7j/7e1qAPUDAw1Hj1oBeBKqqmwcIJMzf5nLYn9r8j+IDsv+0ibD/rt26SDGDhwgJjxDCA4RBdNMjzE2wMBFLsrkG+1kp7yoBzw4xKE97CE+nCAEB7EIECSBjV+cnu7Kc7T4xBu1Owk1LBMi/dOcPsvZ85y/whUwbmh1tXGU9UHemyJmx5EAIOobHjbU1NlJa+v4lcEr7bT3JPUM7Rsarxs/UXeiKKWIJaEDXbggEpQGyBEupliO0ja2iQ0lKg7OBBN99N3l7k1uXuu4ltE9WDOSWTO1s2YOnoEcoqOjLuVM5+SZzq4znZfPydeUSm7dKrlUbRkBEF23tYkXxMMDYXGxPG59J4koLGQJqBJSNeKfm5vbpkMYaczLyMgIhUL4x9WrGpMWi6ngqcPhgzwjJ7GCCtGlBGCSSZW6lVZxXHNHs6nrpCSys20iZB2yv+6dkXDdx3PnTNFAZREpl1KaR56GCo0AMBcmPMyw+Fs39NbgrTH9fWdnaV9fw+how9TUgRMnjMg9GZ4A9PSEb96M1IBUUqPVtGV/bXWrLPXLvHP5xz/Bw1Y4zAK4uBKAUUb76e+kU87Tda530KHP2iNh0LcSH2LCP8JDNYEGBALgwfVIYdx3YiiK7y/2/5APz3BGPktKiukme/YYiamoMMSYlRUpAIZD1RM7OuQCq5uJBIaH976XVPcwvy5cVD0Nx6F86aHZ5mZ1Tf1YZKGlKw9zuJZafbYDu+OMq7urIykE0M7BqcGaj2pqZmuyZrOYhWcgn8XQCmfy8s7U1Z3u7Lw8OmoKsm+fGU2RkonqJQCSLvmsKtH0tLhrxFxJTY08cT8CUFFRUVtbK69fvA/oswZ/quSf+sTDh7bUosvk4fHneUmDGOIFKV8BBeJKyZ4cRnGHTSE29zWb2Ki8HOlY/AKwssM+IHdeKmrDOLWGTDIbaJCru4Md8n9VIt1KFcrFlbANMthFl1pXCy3yNm533G4YmW0IZzTMFubPbOQZSOFJSEmxGiAB0LZtpM3TgKMcZQH6+w31W/Z3XSz16wj6RdzjsVWLaoBETgLQQ494X15LFVUXuKBbqZ1TTDk4IUIS+xjP/lXTAJc4EQiAG/fK7d64v0Z+5Ptb9hczyiE7dIj6ehGcfGc5zosOhhg/uqXFKERZmXFS6+o+27dvCqZB2xNQzRPQ3m6GOES+IAY8znFpwGOrV4pKdrNbHUnxgcRAnWfnmZ3MgbVnoJBHcRPOYOx0Xd0XAwPY/PHBg6Sl4UF0KqqfnDQCJvUa6Ow0nCLC8IGsrKzjx4+npKTs0ngCKnjZgQMH8vPz8QkNOok0pT8PHhw4ceToTx194adeOL7juKjBo2SpnUjNxdV90e0Yk8aqru7dIxwmFFqp7uYQN/r7JWNK4UgDVJWie4mZRufrqded0l3bwAYehTRAA1vVVG9hyxd80TDccODDAxJ1ZmAWTkA60WDv3HwyoFtjaIpTvSCgggoegaV+mWoauQB28EdteoW4qoToGGBAXovKmE32x3wsJ0Y9S2GKzQ8rxo377KU83XBjcFMDJPlh/xg0oIkm9RSN/IhuRJTPPMPzz3P8uOHN6M83GsZXh6quFglqa/0z8eOleQHQVlYT9ckf9eGuLnXmMsrk/4rrDfsvgKhfpr40wog6uboQn8LsvD0LxczjmqV+zLbFcXjxRaamzIUthIjUDm3l5DBw9yHj4yau8QcFAaWlpcoEgI5QkJSUxGJ4CUZgeH4bBgOJzd27koHMUGZNeU1ded3h8sOW/SNvl8pbQ41IRJVzffa6odrBQYaHJVzrhf3t4I9Y9sIF6ZN8f7G/JFxbjXdvZCOLIYccfVtOeRFFknZJXcPDBj7ACoDZPrPExCxPAGQPW1psEKAWoq1CDebxxRd4o/9qQd7gT2I8VUVvz/CMtrqzs8w+5OE97ikakEbqOl/hlZU8e/xMunGjMTVja/oM9nOkrZbX7y6zUQYC4LKSuMtdEY1Ccjvu39DA0aNGA559Fj/YvNn88d69aiGeWnyxtACMjRkNEKNBFlnqKk92i0QWROJzmLPm5dibItj/duSwQTRs2IDjGLP/MeYT32PjWxtL/n0Jws9AI/wkC/GtRwVgRDY+PtzTM9LdPez25VVu31KxpaqialPq4hqrChFdGsETJiclZbJ1NM9LEYniGBGtRqhA5KoRPIVxZjRmKYj9v8E3pOi2dIThw3kB0PbHiQpLTPX1XjLg9uBtbyBI0uLNQ7DsLzO32Rv8yc9P5DiFwiCx/yijffR9l++qi0nOlR3ZwQ65MutolCQt7TGzyS5jkTvjQ/wDFgGS/LcJ//Wq+FTjlS202Ai7rs70lMOHn3D/fgFOYWwmYmBk4VCMjQN+Z9QMsDVwcKyxLJy3QYAnAB/Os387/jAwYARISmRELCMjSrDzWdRdWRD2zn6ECBzxBOAxDRgZGdb/a4eGS5iby922I3dLZV40bvZcL+ujichk8fa7/n6nt9dIr33eVKUuLIyBFu1Ylsn/tLTguqIz+xCwpWCfMOzvYQY+8CcAQmkpXjLgvfciB4JKKY188kffc9BQv7HduxM/Sq1qkVLZWTW3uHWDG9qqx/kRADdmVX8WTsJ/jUsA7AerAVYMVpf9Aw3wUVtJ7krXvtwTRQBttLXSap8qqqkxud9QKP6O0AZTRENyMtZgmOF++u9z33Pz/eISzDGPD+AMdPqfgyXuam/HDBAfKKe4WDzo8znfIfg+kXgeWCgAhRjzMA4jjA2/NjYyMibhkQBUVOSWluZg8TcfP9VDHk4wMckkQmam0af09Lie07961RFr68PICNPTRlykfKLNbdsk+8uTgYcPuXvXVF9rK6ARvJ3slMNr5Sp2nIZZ/MAKgLWRq1cjNeCLpg2W/U1kUl6+cPAnwaihRnlgOf6ifvUydTfpgW7uJjatrtf/i1CML4RCYnm1LjkE2noRgD6o1cnszkTkewMNcBP7LqAHPBDzdtHl4ooNKiqU8hUhxNwgre/RuHTTE6PpfNnZdtaxeogdw62nPoss/OMK4EUA3X6lqQ37CH5zM/aZdCN9VVX+J3oMwg+isL/w91gE6bLiseLiMZAJOZBrtsLNxSdj6+700WcnT8lVV3XFMjRsa+nCdxw7KdpOfJuask+XGopUNrunxwzklZUtQ07u36ezk9lZOfLyZ6uoqqaa+PEpvuA4kU8EtfS3lDglJW5JSU9J8+X9Nv0rXrPUb3NTa/WQShllqp9SSlVRI4yor+m2SrgWVpfL2mHLFtMM8vKorKSoyIu07E51De1cXfYPNMBdi5fByfUWxfTQY2eViWfUEhKB9HQ53WIfaY58ybOcVR5qjDGxntzJcsptLO8f/tlfjuH580YAPvmE9r5NPHfUPvFq6XUB2omCQRghxPIwNm9CrrHFIMdfLu0lLt3ghhxG9j7Pjh3qhDFyxFn45LxmHqRdvFg6c116l7LF8H9/P61X2l2RpSTh4UPpgVhSwuz3+Z++PpGvzVXYHGyCu4ZN7To2IfzDHyoTYC6jqaTpUvGlS8W9vXDMUL8r9lftRYGTkMH3IopUS/nkSwDU3dTpBhjwBGBdZHUOHTLhuJqBjaMsDh60O0UK2rmK7B9ogLtGbwNVixxmeIghQNQgXzM/P1FOiR1vamsTjwxPDv+AH8gzUpgsX1JOkwRAW9kKMsvEBGfPcu6c8f21vTFSzIsHOXaMo0YDSATGYHReAP4F/PNODFzuubgzzIj6Bxm8x70WWi5w4Vz6Ofaf4MgRt77eDGHHgHNwGj76YN/tM2/U91RWmvubkkI4bGjz+nVTIf3yltXP8/JMfasq/GBkhKEhmX2wJ5dcsdsadIr6evdLAQh3d6c2N1/pvVJyu6TlWklzc8mt6uptPgZ/7Cmc1WR/W0VZZMnsgKc63SijLMAo/jHqh/0zl9wROSQrDVg48UI748JF778B/Df0xAnAOOMPeSgDM9aXkWFdwISguhp10cFBpqfFx9MDZgL9da7beNnTgEoqNX66ne0ppBAHdBJNVzp92lCeIoC+gl28etD4OGrix4+TIERGAO4/ARdrEy7vzDI7yaRoVYNyrQWtP1c2VbLtxQ0KTXSFUqnYnsM7Lev8S8Mff+MbfV++d8fEeaEQdg6Ejfa+8x3mmpt1OxTvi1J9pfvGx42p4YAGiTPIkK1Jp7ADQZe7u/9qT89fLLxa8hdLejpKfmdGxuUDB4oPHNikb30kTtxVdnnSSZelkWZ7nGRexgK8hU/0wltLsv+PL8L3v41E4xTCp8Z8IGD/d+CNhArAFFOyaaZtKsja45iN9q/o2Bj53+gQr83MGMYpKKClBb1gp79fzq8sk0wJgMRAAqBguZZa+6IIYsXlyxoFwWrAVN1Bkb6I1ZgYNtHsPwfuc+A+YuFZfkECIPew5yd7/njJz/y85hpUVW2tqdm1b19qrCm4wT/J9RdKX3zx548de66hwYZ3jqe/jiPytPnwCSMI9++bf1dWsiTUaqyBhFmWSiprAbWc9v37L3V3X+rpyfje9y53Xu5r+mH6c0eL9+8p3r/3RFXVepicmkyyNUBxnrVY31PWC6c86o/O/hZrLgBv8QkyHwjY/9vQmNAIYI45F1fmPRdv7ckN8x0I80S8CMVY/DqeCHWKl14yA09lZXY4yNBQZyddXaNDQ4oGZEUUyf1vpbWbbgXOMb9NRQfW4T7/nKmtNXaqm5Gf0lISgctQHyEA7lEWgZM8s7G+OTROxif5P//fPy7cUlheXr4j27wy7TCHJYcsH8dzOFGrV51qVocq+/FhD2X7y80DUEZysXPNhoZ8CYDrMjdntmBbjYPDWiAc5vKdvZfvdF++3eP+i9Pf+M7xX5P8nd+4/3LxgWKZ96q49QM3usp8lyUQCocb//t3//t/58l4lnWDvfdgLzGgJRvOf53YPxUaEz0EZLuubMGj+UuEpu/AJFHwEhZ+BMAbyZU7KvffvvBAAiBXVBpgXzXXPWae9eukc5hhXV0aaTXUsHzI6ZLDOjaGEZvaWk6coKSEBGEL/Bv4hfk+7pzF/Qc8ihBzjeYKHz5kYKCv85/33bx59WJL1m52q/gT7sSLvBhDOuS4tSSx/yJZtpwcOwXCG9XxOx1arcZOTZAM6KZYYw3gTfjaf/v2qzv37Szt2l3a1TX5z85f/lOXi5OL7SRhtZm1XQXT8/ptNOBN71g2fiQEL74Nb4DD04BGYNeyNeAGtADnvzbs70BobXIAdtRH8fskk+Ewk5PGRAqP4BcWf8h4ZgV9j8xM9u0z9uCBqN+anHa7ZIr6dxtt6j/ppBdQUEGF/y4dmdCyNmWfdxb5JQ4FsAVKIAuGMXD+GO5dIlevEJdiJaq3l7t3uXqVz/OHT5/+ZIyxjc7GLLI8AfDPUn8b/jSkRp9Ua83qv67AmP/aDIUkGGHCajUyVhjOkkVtb7eve3O0VTOu3Vdb1VVV1rXP7epyytrM5ADXCMAxjvk/z2poQOS4v5quupuMGHDStqWXIuO4dS8Ay9SAG8YEtdwg67vqApBBhjV14NFRZCMjFBYuETeo9/+4HWZ0oRVOyTqVyH076hgo0/hDcbGxhgbDgurfN25QXi550OD9Pe5d5aodDlpsyliKTwFAAiBTH0woSqwGWAGwqFj4KWKhhJISQ83DwzQ1N+WRJ9nbyU4V3xc3RiCLlYd9YEBb0ZpajWyEEd25RK5PPDnpuf8mbDrqmvm++/btK+2alPegGjQPhjpqTMaqqFrD1fCHGLIP/9j5zzL1uDj4NB9eejqelqyO/OQPN75uz/w4aykA2WTbx/j66BscpL/fEO/27U96JreGmh/jx6aZjihJJ5wCGqOsWPcMfAhzy0zu2eUIjKvuugwN0dRk50b10rt45/AhAN80ApBiBCDRsOyv7XU/PCP2V4air4+bN2luxi7PqbDICoDFWg5rZGXJdGt0iQMM9NOvmyJ9In5ULSOrb+3OHSqprKfeWG09nRM2ghxvarKTA+w0hRChtaq0HnpUP6olQFqu7iYjBmz2LitzfT8xH389OgH7J0IA8sm3E3lucMOb3Tk9TXJyVA2opVZdfdadBYt7kWnik4u54idgBj5m+VBPOXIEXdm1axIAuVFyNhVQxyYAP5oCsnSsAKxRBJAO4376R34+RUXk5RmPsXfE0IccSSzWXAN0WZLnwkIJlCRZdKv4bJLJeJ8FKoJj+IFdz8eamN2yv2wTm9i3zyaQtL3Tf8dqgATgCEdYC6h+rHgPMgjoSuy8MOLG060B65/9Xdda5IsjEzrykwAB2MKWUkrLKVdMOjY+Zl/ucusWu3YtuHsRg44bXJs69tscn4FZjH0SG9fYZGVy8ty0GaWOkm/8Jk/EcyH4fwKwJv2gZGpqS2trSXv77YkJtmzh8OEl+od0yr6Ja2RkMkxYtvID6rFBXnVJCaWl0tXwVLiNNvtKwTrqiBmb4Rgc9TWhz77tRzY+zlHM4I9dVMfGjlYDjL3/vicA2lZQkXjVbKFFAZx915Z9rFndbTObE8CnT6cGOKwTqMPJ7LPOKdZWlv2dtReAJJKqqLIzreROacDh+nW2bjVdW5Tr3T2fIjYFISBKBGDt8zik2N6FZJKJASkQkq2RAPTJaS35vLWktVUacHt0VP6qhtDt9F4n2sCn5M6ag2ONdQKJUkUFlZWmrbS03OLWda5XU11GWQ45xIBkOGaNJeGt8+UN/lhjHlYArD28ccNbM0Cm9pNIsrVrn13jmiJsQKGzVMp7MjXQgPXL/mNjcrtQR52edhzvnXgJ8P0TKwCCqL+GGjkp8uO6u4euXDEdJTtbD8pbxfN7967DNTywCRqwINsGAfMacBED+xIICgt58mwd+8oB3YyZmSyyMsmUEQP2G+NvkGi0GqONLa1b5lq3XGjd8lFbaHY2LNd+505qa+3Ei532Eh+ba9Xba5eBQfGZWmA66awfVFfbl3koYOyb7WuiSSQr9n+e5/0MBPXTr5S+4kh57iqapX6OLi0Ara3e254XDP54cJxIDbg9dttLBhzmcMLIVn3KrrCts0vHxf672V1LrZRyxfnUBeep1wCH9YPOTrq76euzg7G5uYYSHWcF2d9ZLwKgTruHPTa/+h7vXbhAVpao3ziehw6p5N7lRi3NHbgG1+GPY0EFNBjzQN58HDBrjCti/+9/nxs32LaNhgYOHoy6TndLi6RC3diOn9qXasU0D2Cmvb19YmIiMzOzsrKSBOCKx/5mm9KaUt5aXjlWeYkqOYYqukom7RN7zePSYwua377N3btyQaiiWKW2mcP1gpISM1Bo5+5dvHiRi9lki/pd3EMcyiPvyWsQfc7nIkf54+OMP3/o+dCxkB/2n5gQ70cZ/Fm4ZoCnAWfORGaDFaastgY85KG8fumUyvgJn6hzqd0e5KCEai97iRMLeuS6hP9rdlhvUNtS51SAqe4HW7ao6chTTQj7J14ABLXLHnrkaavhfjb32enTYn9VgjxQ9XGRlGRgkcHkcNgubsiNeQGwOAAN8xaJIm8sSGhuviov7ld/1fRf+2rJ3bt1pse7+xdfmBc4NDXpfsgLVuxcSeVyOzDoDP1nzpy5fv366OhoXl7e3r17n3322VAoxKribY/9zVbQ9cv7U8glAVDJxFE5OSQlLfI2CsVhZ8+K5kzyW9CvVHDfk4ETFWvX1YleTSsZHlY7OM1pF1eE3kef/Nwqqh6TAX1rV/mX73+BC9IABXPJe5KTjiW9cOyFDcc2kOZz2pfigCiDP7DoQNBoW1tkMmC587AG/e3zFoWXwikj0kyziqk4wFstWRqwYjdxQY90wXn6RoQc1haTk6YBp6YaP99xTNz94IGhnXPnaG5Wy0lONrFuZSXl5cSCe95//XW9soiPCRMAReJqnRNMzDCzkY2fT37+3nszAwPcu4eyAhUVFBWZCCg9XWwlbRD1O6Oj9PS4nZ3GBTSZgx7uQi40RNgOHkepHQtqbp5tapprarqufizq15lU6XJ3y8p0G8zNcF3pj9l565a6u7hQ/6znmV3s2sGOGEZC5KF++OGHn376aV9fn96vMDQ0lJGRcfTo0UQIwAAexD52tE0E0dTf9OmnJuwZGzM+dEmJqV7XNf/s7JTeoVBMfzA4iHxGhWj6YTnlsJ5Gj9UmFCSqKagXue5Ua+v7vD/AwD3u3eCGdFrEJ4oX284xN8WUyLGXXpVd317hijIHodra5OP3ko51JR+9/2xu6ZKDP9b3jzL4swChUKQG3Jy66QmAiJjlIBf+DZF4AKcWvuNhmmm7AGQnndI55UX0T4m3TneMY9IAXe2qOteu+zRqwNphZoYf/AAF4xrgz8lRbxS1iZGMV2tpB7UwOcEarZUTHPvb8G7K/LD/tkdY/48kTADsQNCzPCslSCMtm+wmmi5fvqcuJ/UrLTXhT1YWaWlWACST6vWqKOf+fdrb70gnHM6bVd0p89z/aNVV0c+J5s2zzVs2NO9OY+zS6CX3gw90FJ1JsZa5DVYA5P7buWDygUdG1IU0enuAAzFE0PL6Ozo6rl279vHHH4OilrsKAvbs2bPqAnCehVAtiY366Zfc3mq9pVJK5kT3BQWmeq3wdXerBcr/MBUgV1rc0UDDPvatL/ffYts202dcl5QUNm8WN4vZW2lVrLOFLXnkKW7zBGCMMRVc5CgJnNK+/YfChw+fOXYs6fjx5NLSJDj2xKDcc/9VaQsGf6Jg61ZPA+TTRWaDl+uJ/y54BYv70V7cKQFQGSWB97kfJiz9s2M+dsFkbRPAqq7Lc0RFgHrohh6YA3Uw09N+4RfkfKn1SgAMtQ0MyCPTfhviHjnCgQPs3UuMOLUc9pexRgJg5wS8zMtZZBVSKGezhZY7I3cuXepQl7Prd4mhVEWua99YoIoyYrCJut1UbuMnRFViN7X4/RTzBDRR3VS9oWlD2qBRGnVIOUp32u7Q1mZOIKcyFDLnmJw0J5ieLqJoNwfFgHbB8RieNJ/9EtPT0xigNICGoLRnbm5uw4YNJBYiBXHBJJPS2s1svvbg2g8eTFy5Iv/CEz4bFBlJPsEucZxKLQ3QTWF9QmN3ipMzMkz0VlYmNRttbb0yqzJdCRGSe+4JwEMezjJLUpIR+9pa9Sr1rbEjR85UVCRDEiQT1TP3nvtsa/Mx+BNlIGikq8sOBFlTsMty8EOEsP1vNKSQoh4kr1/6V0WVAlaFrRJvfSZR+Aj+GYsjwE9Dj9UAWTjcHQ4PhsMY1xD7bivvOeeaGuNiyEuUZWURGyY/mfyE/4rsyQjBNpZE0mqHW/LXXuAF23ZrqGmjrZPOHnoGRwdHBcLqwA6OunQW6eVslounjiS1kMdnV4VdgqduQ7OxquYqT2nUSXQiOU0DEwMPJx5OM6ZTiOizqNHB1dt1JepCCgJiSv9KU7KLioqqq6vl9ff29ioDXFVVpT3+2L8i6mGNxQKVV+wvZlTp9Pkud/t6+oZ7xvqYBlTwYjbXU1RBhb6V/yjxe+LgT3L0L/x+k0x82LHDrltJVZX6jYIs7t+XiIVHR8MmPpgzXSs1m4wy+2dUVuondvkBeRZDcMYKgNl6pP6TkevP2+c+Cy6ZvdIV6aId/PH7mikJgER1drYFimktxoQCC11yHTw6Usz34SUeqk4jTbquhmqnHUgJ1Hp9phx+cqmT+8Ib8A4JgI8Ljv0YL63Sia0AeBowOSnr3TI59IIJMaen5REaLzQnh9JSBbcmOdfQIDGI4VLsdawwkuKcz+OfoZSotEPV4uVeeocYGmMsHCEAtqHLS5WHXkqpBEMfeDLC0GSMZnDRb1/kRSmHfc9BN92DDI4zPs20TqFOruNbhVCYv5vd8WUr6zTuLyWwSeD6+vq9foO6kyyGHPtFrFCJxBGqNI0U2xEhece24HIhLYOUUWYXQlBVxHCFaXDS308y4OSKzA1+8UW2bxdbm9xRdzeDg4yN2QEiEzmGQnak1SSUysrUvSJXH+2FM48LQKO3/ryoP+MSb16GSWzKSq6G/8UhpEm6GAUo1r+7DMVQQrNNCfibTZ7sfcl/X/zvbL+QfmeSmUuuuoMcKZaDRh8n94X/xh+AB98mBiT2gv/bon/34mqe2Hb7KasBU1M9h6b6qqZGRowAzMzgOEYAsrIM6VdWmoazlJfY6P864kdSTNM6HZYPB0caIJtgoo++YYbFUJ4AJJNsG7pIvIACfKJ53u7ioZJK2QgjVmZ0Ok8AdHzrSRE35PKnp6fX1taOj49v3rx5+/btehg05kaevRJ3N4ssBZeKbB7wwD5/ZV8XLAFQwfPIEzc5OLFdYVr0K3wbvhnxZcbKtlQxu2xykp4ehoYMeU9NiXaNAKSkGAHIzqagYNE38d2fjwN+z6MqlXSZH78MsjYsrEyyLBw7Znw51wWG4DKUQLEx18FZQktJ8SmREgA7rBQbTvo/uQ8UhyGEHyTggv0f4KWEnDgFymT7ptg3NTFhBGBiQgJg6D4UUlCKX3rgpP/riB9Jyx/XcYgP8vTlg8uIE90RArAA9hWJrCYKvwTLxhEfu+Kq3rhXLPkmj2Kjdvn7SYo+rd48YdkycRfO4CGEcJvQJZBdJk5ETuS/7gkA7MdDNMIMLVJ/LiuOkP+9sWNdXXAoyq6E1dSULC1Nhn/4KkICBMCHBjisHzTPj/+MEA0BAtwhAg/h8rxNsrKwA0GexZ5WC/AUY8oaTwmSWICwE37oPmQR5LF+cGPe979KgAB+cWne2llxDDyqAQQa8HXE9NMtABo+/piP+53+9d4Qm+YtQAD/eMYYf5UY4LJyyITfaiwGrMPTu+v8gr9hjP+QmLO+Zox/t77umH8BaKX1Ez65xCUceMg83k3szfeBN419dfC6Mf49FuuutjfCr5P5y4X9Rtk6LUckAgQIkMTzRMK+HP8aM/eBH8WC55/nq4YAAQIECATgJAuww9hXHAECBAgQCEBjwP5fTwQIECAQgEIeRSFfAwQIECBAgA18fRAgQIAAAQIBCBAgQIAAjuu6fE0QIECAAAGCCCBAgAABAmxwwL+9CP8Cenkczhrb47gOfwdOrNyRnZWwZ+DvQktMa8CdhN8G3yGR8FHyDfC6KRUXWZ9wlml74C/DVVYUw/Dv4UfAgZ3w5+AyfjAL/xveBAeK4Q/CR8SJhHVFZ40sOn4Rvg2pkAW/A74Hq3oTnAUWRAAJQ5UxKiGN9YJ0qJq3SHTzNOPgvB1gfcJleUgyxsaoHTpAAB9wWEsEApAKlZZt15Mm2UsK8Qh+BT6DMZ5CVEcIwFcFSdae6p4dIECQA6iytv6CEhYIgOxX4QtixzRcIrHIiWD/bNYz3PgFIAgFnnYE7n/sawLfvUtnJwMDTE7OL3D8IhRg0UjsePCAnh4GBzFrA4fNwe06fxkZ5ORQWEhx8XIHyz0UQyXfqWS0BO4nJVFezqFDJB7nztHRsWVmxggAWUW8jodGhFR4B9qhzWzZEykS34fXTj1arkz4BkLjp3AMA27BF3AV9rM0bt682dnZqcUstaJ9SkqKlrQsLS3Vcmb4QB99t7k9zTR47J/O1gYi8CyxYGBg4MGDB9pqfc3JyUmtsO84ji5Pa65lZWXl5+eXlJSkpqYSK9xovfLhQ9ra6O5mZITpaTW/jZmZSYWFSWVl5OX56OXuo60vGoYXDDnvhPqIhhDlALPw8zyKYniOaGhkRTDOeAcdPfQMMxwmPMdcCikZZOSRV0ppAQWsHFTrugNigqEhwwGCt4JuZSWx4tSiKYBJIpFFRGdsXKk74BA/1P7b29vVI9RP1R1c11Vf0LKDBQUF5eXl+pAoAdA9uXCBq1dpb6evj/FxXBdeiLfNSUhu3aK1lXv3zJ2XtEgAtNMKgPq5BCA31y70SlUVO3aoUcRw36vMj9+u4vz9lBTsgr0J1oDPPuOHP6S5uWp6upJDlXxzYdX9GFTCF/Ar0D6vAbshv8Xs5bVGODlftEz7G97CfEflfUos9dvtn+EJkNT2nD9//urVq2pbotqpqSm1Kq1mrBXtd+/effDgQTWvJ7UFht7n/c/5fJLJL6k/jYOv0mAJ//+n7jzAokizd38KUERUGhHMNJKlQR1QEAzj5GfdnHdvjk+8Oeecc8453/vf8E8zOzlgwKwgTZLUKCCSJEuy7s86Q03ZQFNd3Yzs2e9hR+jqrq4633ve857zfeU9AHR2dnZ0dPT09PT39w8NDY2Pj4cFAEIUj10jSvEMTgIVwUDiZc3N0tCAK0pfn4yN8aRJ3C9px46kvWVJB78vB0SHpLndv19vlYsYUGAFAIkUAFZGoD0R5hteEbuxEWSDNLRKa7d0szO8PlHVFFOfKgr081Q2nupaKqW7JA43orVVgkHp6IBhwgPBAA0Awk0G/QsLecI/JDA+AQCDac3a6O+8kvxjo9wBvLK5paWFedHX18c8nZmZefr0aXJyMkxoz549zNbCwkIeSM7UWOcAACeqrZXLl3l+NpPkwMCsb8onZobEaC0t3HPuPFOf3EL6+3cNDe3YOr5ly5OEhKeLiwmzsymTMztGMjIWuPPQdp70zXOUAwE5fNhDAGD4+QI7fmNmcZF/8T4aS74EI17i2nx46i9+kTPxdT0ZWWZfEcm2RpCxFAO6nzwJBIOBxgDPSV76VtvkV37guDnBYDC7qVoDAEKeVEkkA1tra2svX758584dkgC8B0KNb4G2oCo5weTk5Llz5yLA6025eUNufCQf9R0akYo3pOK0VKyg/f9TcWnQ7oGGhgYCEufT3d2Nuw8ODo6NjXFWdgBITU1NT0/fvXs3xCc3N7eoqCgQCBw7diyJlC7GJACvvnRJrl+H3+CHwE/ynJFIAEivStx/LOlAEtAvB4Wf8jvFfSoABBhrxIACRjSwZSPQbuLLum6uDd+/Ile40UEJkur1Su+IjCxsXkhgZj55mkb+Krt52mixFPdJX6VUEgkkBuPaX73KfQASuAMyPMzDuzeJyNbN83A/5j2TdXBQamokNzcuAcCOATu4kvG8A/ZNMGIl/nV1dbC0u3fvMinu37/PtJ2amiIDYLYyEfbt28csgK6RHFRVVREP1jMAcGe4P599tvVKQ7VUl0gJMZ/nU/NgcbiAeDDSbe45b3v3LmFud+e9nJyh/YWSeYpH5gPLPD1ZiHVPnkxNTEwND/c/fNjY82lGV1M+MEqugC9IZaVEowOAnn7xP0Pe8f3N5Jk6CCRfjunHhUL+iYN6GjyVfsXHwZ+CzC8NAP1TYkBjYyj4i1AwFDACRaap4o96GYGs6a4RDL7Z9DA7mOEfLCwkXQgwJIKRyN26cuXKZ599hj+dPXsWHkEM4HH2ZAP8CdgFcEkt33zzzRXVzFtyC1x4NnwdEH+gn0GiHgP1a71+/frt27fxdf6bDEBEoDl4OXx/06ZNeMLs7CyKUIdlTICCggL+48GDB8QJvH8nOaLnGMDH4YoXLsjFi5BP+GyOnPCJL3ExMXEocfPQ5qT6JGa7HAgLAK5SAXP9deD1QH+YPk+CuiAXrspVHgeSsDMBZlCxt2Lbtm0EAIgCYNTV1fWb3b8ZkhCBAWkINPD89GkwgPjLHQBjeoeShVl59IBY4sbU48edXV2dHzSTmIEZhoEigB7s8rEp62/e0D9N1jKc8eKFCxeYp0xJIJ6s9/DhwxB/rj/TFsIEeyM/YAogDZHBv/zyy0yWdQkAoC1zlLvEPDkhp8/JuSqpOiAHuOV7ZA/AKlEa8Z1kAkkETdxXX1+a11/8dYI8FJ9bC5IQAMi/QTcepQ+9hbGSG6ASDbe1DTd+GLqPUkSKCKc+fVpwB9cG7Opo7r6tcPwlBwBGjlRYiUgkRVOhxq9jcBB6/04wSABgsvEWX8B7p7wThLOSRDU2JWcX+/1fyc4ObNnCn/Miyiz4TX19PV711ltv4Tfw6O3btwOvfBDY+v777+NbBw4cYM5DMZY/Iwjo1yHgvg5e5tGQxBrxdRz9xo0bnICQAGVnHzp0CIKDJAXiEABgPYAOihDKFVQI6CdUEK6YBiqMnj59Gs3KcxqK+IMrgv5n5MxJOQmrhd8kSVKCJODhsF0ZEGHcjK725wwDxi8P+mOAPvreJblEGMANKisrcRJVnAEg0jKcp62tDWyCpRItgIIdsoOcYKtErUUgLdfXC5efGDDwJE1ePy0vvYRHKaVg8nODkIGCFy5ACgkKe/fKq6+uhvgcwvDpzw3aZZAqsLzIBh9iRmgMIBMlHQf9mRdQIv7JVCVF5vrDmbj++D+MLSUlBcZGohz/AIA0z9wAvHYtphdK4TE59oq8wvQQbwZ2K9uqq8t/dK3i7ALSXkmJoO2DzWhZy66ksbAA6Yf6kyrIvn0Pr1//qAEywG/xCHzBtQLAZFbw3fvwTj9wCiITWHCo9TbYi/Vx+wYSNQIxVWQtK1Y5qDuYbQaDBxuDp0c0BgSMHsM4b9QZ7e/A/Y2mpoL0YMlbhVkB/0wguzVQcTTy5YAywN1IKiHRpaWlJ0+eREsRy+AXo6Oj+ld+ArUEgDBZwEb/0fJDXwQAr8YHoUTh5ZcuXQLQOYGXXnqJrBbQAW7AdCKTHQDAenCHl5ElEACQjEhiSFwWFxeZFa+++irRIuokAHzp7sa3GIgYfBn4DYKGd1E7ciqw4aFfy/vN0oz6j8pHvb2mpgaWQFmIm4IKJyJccHyD688/4Z7IFOmSTkE4T/IAB4m68IMbCKGf6ru8dlzOnJFTp4Qqnc+n4iAlYOY4pcG7d+5kZwveWlYmVrjfYcO9/kfYPzci+m+x0L9GIhgaLPwMPnSVhEi4HmdOnTrFvNCiF65Ojs4sYAowX5gChAFuBEkwKtBx6prxDwBjY4RpaDu3mYnBnfaO/tTWrlyB/hMAApNXa15ByAFAuKPc4tUuoMmflLpnZxsZGQSJOaP2Yn1dIpkCoCVVVeLaVH5h9NsqEAHgy9J/NPzw0/V6sc4TJxr9/qA1JOjvv3U21P+X+jMzz2292PXhxe2Tt1871oM6GggEA4HsgC/bxzeMjF1oJvBoGER1dTUg6+z5ISTAMpjzgDKvIc1fLv3r6MhZjBn9cahh9XI+DofGfcGaEydOHDlypLiYfMaPry8rRY2TwRCWeDFsFIoEV6IGoA1C4FS08o85NGTQewYPQOSXg0BYmVlmo39cY0A4QBgb9Qm89Pzgr+3SToWfG0GVBVc57MiVuS8U4bngpAKU64nibeNtyMI90uMhAEAvoXfMD2ailnrJ7MU2KgAnT9IbwivkGSlJ7+/3DQ6mZ2auiPvOX255YehvrI6vNToiZ6QtpMLgO0AP9KNwotMyNezpwJVnnhIMIP7IQcxTAobdGUGjRLwDwPw8wM1IkjQaABji1ZCfSfaQ+ooeX0VLIthT1Tl0yKUjg1AmJC8hwZidfTr2/vXuWz40I5ICxKNoVaA73XdmFJePHVvXUrA2FzJSux849R8XtqDF4Kyst/mWfj+jhdH36wPTTxaebBrxf/X/+n/f+UBJIJAbQJET7E9bWcM5Wc2YsXgMKSSUAXKNr4SBLL7F7/krr6EUDL+2Gwxuy+3PA0DavS+kf8R3r4aLozXBH6n6cibKNMEayCY6g6xkgD54hDxFLky2CxUlBSYGaHHYdQ+rFmh/oHfHnJw00BlF0P13mjtJEx3z+KvWy2j1SIlXDFghw91I6I8NyzBNn/3Sj6qgsKLoH2Zcc03UYAyt460DMkDqMC7jaEHisMj5DzIv1x56yZD9VrPf8rmMFoT3M2u/970Jn28qMX16ekX0T97o60sU+k8xInVDoHASU1F4uLDa5oAEt5wMcVPgQ7we8sQkIi0mlYcelZeXxzkAgLg69BHBDPFmPT2ofcSAPW03Kt+Q6moivbb3msvlU9jHpExqmzkhJ1VSt2zeIt+Vvf9LTpwwR0eNhw8n79+9u0hOiEyB07guBX9Ow5/kNGsZYJ1LwfoRDP+sJh9a/nV3O65/Xd75OgvDHlx9cM8M3ssO3ssP9gz2VL5X/WQurfGdb83l7kkOFSQHJDlgZGa+LH/3vNVJVCarGIi5YBn+lGSZPG/oLfp7fRmvF81hjG6b/ps296du49VQoihFwHRQEkQEr8XLiQFucli4D3kxp0eIgv4wW4glIBGVA9cBAAPWfwUhEX5jzs8niLHJ3MSt2SSbvMOy2xgQIRK8eEPTp/ef2bctdZuyBFnFiAGEZFXeOIQDmbZ2AHATBvAvBjdBnY9B9V+WG4rQkyfcqbn09GfDp4i/WTaGmW5Wfp1aGjWRThxtDUBHgBUR/DkvL48kjIYIWckQS9vb20mImUQcwoE0UMQ/AECQGSgv3F0dnptaKflB/I4cmabMw0wPR39DpmRKe86gIRMyYQcAeo12Ze06mHUwtzY39+yWQMDs6jLa2tpbkA8RcJGQ4A5RqkDNodtfRi/QUpjJkeN8NEPcW0Aehx4He56VgIMI/v7g5pJgxZF/Har+Sdr75w//mZ82/u7Gnh4qAyjjhwKWpaSUyuoGs060zI4E8rwp6GMaBpR3QOts9B95yR8m/nirc0Jz8F1oC/o+Hkw1AqbjXsEEmHB0rQnDevgJY+INmQZMm5WE1edOtW8liDZ6DX1huO38IgHYL25tclIXNGk/Ow1rRnq6SbKa4plFRng1H4OQtbR+jc4INHKG12Bl6PB2rOvzNpyYz+dR5yFFJSeT5Qbiv/66ICFbA1DY+EZKhGwialVK/yWtRnZoRi0rc1YkNeRZ6BGzj0wXqYcMLMIs4AW8jESNNJqjOJY6meeW0KQVUzU+h9ybn1PSDy8Alz0S4bY2uokKEjoQrUFsfoah/1252yRNbdKGmDgog+AOVxCXIgBAK3Zn7vZn+r+dlVcsufn5eUxz0LQlFCJoUjchAHgpBWsAoEjL1FwH0+I5Y/+jTW7Lv04BaKsESx8Ge64GQ7Wjhcj87SUl5u7Ar3T+67kn21/5+mxGdnd20PDXhogBmaHp0tCuQCDHKJZVDT0HeQfKhrYDfSaFBH9REp0iO79HJlIhiNc7pf92//wX6G8dZXrCLz4CqoLLgt0iAs1hPcvhKMMwfk/OSwghfpAEKAMiEhAA1uzpvqQxQAyRK87X3BfGMvT/vtj2R9xpfvCc9nayHF0yrySK1cRGdrZZXCxHJX7GB+jqKcoYhAENAExYIIDMOBBAWI92VTSdPCTcrPWdmp7iTiEGyiqGSM1f8RYR4fUcCFWMKoLhe2A7Gg+1PZI5YibTmTJAhG1OGHPisP9o3aAdsqGM7imq6MqVBabE8oUaefmUtraq/bEVr6eW6JiGdMGhagLlSv9XM2QiXkMDKLOJAzmcy+g9AKyYqnHWDOThcWkFlBkeAwB5Db0WRVR64NzPIcYT40md1AExXLUWaenKGRwCkSnwJm27PD//s8eP/8Hwx29l7a7IOpSZmQdi7N2by9/5mtuu9U3SJwD9wTyXgjk33m49uz/5xKjKvx2gv47iYoJcoKenem8T05l2qZu5It9AmuaEzfNaGkj0Nx2a/kUg0JOT0yPCCKzOVdFPcBd8C6YAZYCJ27KJUmllEJg2VtIReNOwAsCOVlv6Z76a4t34CJgO3Q40+CMjoN5Q8oXLSJQG1nMghxMAlP7wtiQxsKdIAcAZA2yrlvsEgLA0Pl0rBe4DAKCv61so5XHbATVIrYZe4XLm5xvd3Y+HMqSa38QuOrQRnN8TNDQ+DNykv479E/juTBw6Z2iXgX/QIkHMwVwrUOzxkCVZ+2Rf/XQ9EjMXlsjKdV7WzzFHFOdWgjs7ZSfMhqSDMBAlIzD37OFkCY0ydGsIfBC+C58FQ1zJ5nTYJ/yWhf7GxtJ/gDI6aGullhUSRPsTFvTT2UScwyIEAPrcaMNjxa/KazT20Am9phzKy3ixdlVwLO8QHwnIJgf4kw74OI2ABACEGjhCVPs94Iv46O4pPIl5yy13UF1jQVedsPLw1q5bQ8hDh6sFsrRzJ/nhr8/OPhqt3TbcmPlgIDNzICMDVCQG5LJMlb/7UkcnuV58Z9QMXN9DKVg1ekgHczTu5V/rzVO7e9F/XJZ/BwB9xyBfOI+y87inpCQUCISoxdw0ZGmWQfZNf5rfH/DnBJpJEOzFw4zfvzpx1m4BBBN68PEw6AZ8n5+I8vwGMIVZK7bSdWrT/6dL3N8kYMRmeKoyHREhGhFsIDISvZH5cqwuFmM7I6U/vDnhTcLs8nMyBRUtqkHJ8sp01R+ePjXNZjfm5Yq5r3XIw78j8nfkxnFR+2rU7b50OOuaYpbNzDxNFrxs7y4EIJY1dkxOttUOwHGnquWpyMsxathBglgzPXUU1ZhfTE/YIAGAi0sCQlSAb+m8QGFhyrlFMkPohmJJFw3frPlQJ+EKQ9WdERpvofsQ6ZkMDNAB33Ill50holeyuEKkgGZhIeBvjHHmUDFQDxWLc47QZrNR9+Jj/cRluUwAYBwIjCn019S4EuQ038JEhDSdWUlThkS0HZbxSr0p2rsRtxrAbatb4m9zMzQGbN48MTdBAEAFii4AsJQMnv6MWi5yfy30N+1bSLsx0E8MuLi/de7Uq0Jn6JEjoAzXbHTT/ODszwZHBjPOTWZ9V1cATgisVBo5KZqSGeAsi8IYXIyoS8GzVilYB+x6nVb/zrkt/15zQL8pUinCOQUOHAicZ60WqP5z3RsIW/q/QMrj4PG/eZwY4GcnH+vA+ogBAOhHbIHpM2/pv6S/nrYz+j0QhSB0zGpmO3I8QScjJ+MD+UDp//Cxg6Loz8+Ybcwy+I6IUGOEvyjTidZAJaU/vAnozxvqO2sAiGCH5TDlpcfm4+mr09P/r29afuXvyPdJm8/8QW358QIrYC8NbnV1wp4poD/4xYImGtdIVBGACABM0JHe3k9bvv/00g8Sk4Ra81nPG/C2WyGNTwIxAwGcC8YIWyISkA3TV09UgEqjCIH+/InYQBBySWih8/R0UocbM8bqOuvo0+U6E1khBPZCMDIt3IYuXtaC0fqJZ9A+ywI6idqYtegBTJSnrG2qre2Q63+YWQ3UoGXBAiNXWTdWDDCETjnQX8fe4jGFfoZLejNjGTNR8MElk4jG7dCXsYSTA9XiXATOx9+IMBbiTs0Bt89GtIu/ECvhJhl7yVnA8eeajuulHoi5uv36XNUbdIbSG2TSmqmBQ9oeJT8aTBvMOhFW1lrAQ7SCpC2q+LonFYgAcGtdA4CWf13qP+9YCP5QRHFef+I8sp3/DMlfsfXoEoazVpxZSg+Q+HWs9RAryqeQBeQXujA//vhj6APeQyTAddDiWXLC6jBew01R9L+XPSsVZwX0p0hLDhKz8UEIx0pVtCahFMaDcSCH8yYEAN4TczMBAmaAln94zIx0Tsv/mxZoPy20nc9igPclzfS4ccmW0P/cORrYkTLIuZg7NLuQ4dO6MHbw4K/UvfMrn17/K7GUgq8wpkiphe06mCzwZ+YGkwG9iVQb+s8nfvwxpJrfA6OEfUiVuDYAnWofp0LzRfNo83sn3qPEgiptbwXB1UYwHPrNoZo9NUeMI2wNcEJOeG4QTz3SWtrfMjTUPjrKGu82vghuRngHDVZr8FuQBZPzM0THJlnRNn2Z+k+jNIL7Sv/T84cV+okBLlsUVVWbtUzIDi2LXADA7Fdi3BfeAVMVNJ57AcEj+BwGWAt1YkTntiQ1DKSGQq0miG2UfFl2SPm3sqzsW+Xl36qqylb01wBA7mAM0pVcmknYYIQRQIZ9AtFlnloKZuwduNOvZQAtBa9b+ZfTdxMAitB8lqA/37l7SNOPVY9ettlPkwRKmHr2c2YYkUMNBJmOe0ATCcXeDRRXQ09E+YH704nfk97zufizvRnp31yS/kVEsZvqMbxDU9RoDbmGT+Sn033FkzkPZ+bwnpibWUsWyAD0nTUFwTE89fwDvNBubXPjjeH+oD8xAGi2PxPuAxCr93MR5YP3xbP99gE51SosfKOTmozZmT/Rmwvl5yJQf/jgAzovCAP4YVQBAInsZXl5W8e2PR17Cu4X9Pyenv/15/8X9xqf0QCA0Py1P/u1Uz87lbsvt+RQyUtFL2WmeGk6IswgANxJuhM8Hmwba6v678H5U8Utl4Kic1tjABH0eaNVhGIhHaTK/b+9agD4rfJlGZVLcF8DQErOgEI/g5nv3uwePF1tZ7fhRTZ9GeZ8h3gHAM7JNBls+oFzMKLq/GBqkpySOjI1UlKIJnqYjBqjqMyd0jmSPnKm8Iyf/S6cDQCGAP3EgNHtg0A/VMaJNni4DoEv6IjS7HW5ui0EgwAQ9+5PO9UQF/amzf2X34ySZf9lW8FzCXGprP1hSOfnz59n6S8lPvt5AMgpugUQXVg2/V9ckv5RM1CEKRpT90NqJADQI0ShWHeQ3uT6+j+1jMPtHFZNPJkeq41MvKe+ebQrdgxHt763ttaeHu42VXRIDjcgn7orgOtAf4dVFslkg4yKjKCFiUcL7JYT5SylAR+Xb4dF2gH/APpJBZBeKUxDbqBSTCH35asENv5qaPC3tnaGQjQGfLJ3LzIdd5yrTaAl8frWz+5l75nwHxjLy5+QrinySoq3UT0UhRopoMl+c9r9kXUs6/T583I42fzjZut3Gp0xwNi/33webd+Rd9CiwaHvWKmCvIgAYJ8Sq6YvG58rP3LggUI/MSDaYpm5ZCpvqrkRQtXC3iF+AaC/H3/Cgchh90g5TQI+0yfRGPGDkchIFIZt4Dv7jLOdLNklvRzsAQajc65IBP15TVbWDK4bRv/RD1T8FxRD6rcMzJMKVN9dP60BgPDDu8VunJyu/g31sbWk+/4fuH9JPDYx2eYOOossExHdTscmZTb6Dx3dr7o/FeDLFy8i+KL8EjPQ2XEy+CCBRKMIC9Zd7s4fhviLSyaeTI8F9O135otEpa0YEeb319xvZy1gLLNE6+xAIUx81Y+tgPtQW9PI7cmO8yb8TAP9V6v1IzyT63FmpAKor2iwLgMA6Yzu/Y4LkNH4ExJICr9dVUVxyM4AyBrfffCACvCdW7eIdiYQQeg7exbty/1yM7plaP2g+Hct8dri6dO9lZUdZE6BObPYFBH2e3LGAJuczZgzU8YU3Si/Lr/+HVQJa7zA5h/muco+/Jzd2312SfeHA0RrSmWcbMYNlOvLMOc7eA4AvxK2K6DcE2p26JqJLS3lc0dLTehNPmpGtNU6hpmQwEk6+Rl3kUXgAP3BnQeBj7DandJ/hqJ/mPfyB7x6dMJqIdYKWJSmpWAGa3Sb7X7QkpJ4qv9zOfoRLuXRGnkx5gRNG/3bDs6w0T/oz5q9Omv7aPZdYNcR7U7jEPptWINOCAEOQOHXXnst1V34TF6y2SUDU7w924gDbdmUSgbvSSrjHf01CYjatMIl+CQnoWWuSGibBnzH4/n7Ebq9mRQ+n6bMzF8EWEiJyy1Muf80F7H3OxXt4vx8tqOhIERxiGAP8dcisG4H/awsfOUKz5YwqOcTwiFhfHfKOS4uIvVSbZghDMjJU7oHXB5y1s5RU6z/GWYbGYwjBmgtFcRgAB18mnaC4Lxfvn0kanMDoL/xDP1HM26cq0lT9C8t9fJkSHQbXYqvYo6aG+FITd9BLU4BQDuB6qequ7r2/OPiouwiSj0vyUsSpalEs7Bpk9ZriQHK/9hGHCLAYN4iKIc916b3am9/VT8L6o4sLRVxCuwMaMeEMh2vCx/s9vzm7puq2BAA4rn9Qxj93/DWYDR8Lv1vC9rSf6fV88f+tHQNsQfD0aNH6drUAEDnKFGBvTxVDmInH3FhduEX4NbWN4rS3nYz51i79Y33xFwGIcxYc9uG3xT5b66anLXIRRiSXds4DyGYRZZID0lM9ofWgFjNidFb9fx0uLoCtKk2NenzP3b5fOzNp7tRhu2xQTxgiwJ4gPZ0QQv41kxDMgB90J4R8euT9wclqN0fQqoE8a+qAuLxjDzZKXqsdXQb7+yIAXwEgAApZN8hPpxGcJDhhdj/UwATOgimWSuzWPCdc0feq64u51JRxPS234dWfeExWhDGlNlENl6jLwb3ORxjbnoOAIOyzHa2TX83UJj1s8yc/J1l/T7f6e3RVvt1JwmGtmsi3cAS7I5sfurOBM7yHbWBdl9799/s7vvzfZVb9A2cG+bpcyQTpSQXDHcW2j2Wgh8trQomsNCmGoMhuWoysX9ws7P8u/HtvnHf7vpfWJL+mevt778P0NP0TXsoWAAiAAd4GwuvSNq4a2+//bZuxEYxwE1Z2GcZ7ZsQSbIHAgn/weESpeH6HGgvftF+UE7AO/ovjwG/A9FhzeYNLXKJTmISHIbnz459eyElkzqUIqoG69J7cV0q2nwrvaHQ/xVvDYkg2zfRDkQqwKPc5ltbaeekMcnNk1aZaez4gpRPXEIp50BKJrb6SoMW9N8OA/eIRgZmmFYM6N3d22/2PzQe5u6xE60XYD+VBX5oP9JY0tgf2pFc5hs45puoyOCa53jb72Prktmdctia/RS8EmMuaJVeD/ccAL6//OEk35bxhl9rvrD7g86yTvg6SS5JTrTNegxokb3zH/+yF53zNyYwnkRzuq4+vT90/3rf9YbdDQNpA3/23LmG+U+ZY0wwEgncGHxCeKTd4t7WUpQ2ipPiUJ+9l4KXdJtYA4C+ibP8u+FNd2Gy0X/wyF5t+uQn/A6JnyUC+CJ7NoAINs0HcFFg6CNiTzdWonP7CAlu8NdejcyiM9aa6v4nWoeIdkc5jqUorRVp3hP/WbMUYUSLrylrirCi2qZz50SJ0WKPAZwTA7MZtDsxCyWLPEA7BWgK4KbLKkYMQAUiHeSycwe13sD0JsJLRCMDIIen1wBMEMR9GlUZDkNntpMA7N7t2/oVeBRG15n+UFZoNGGY5J+ZytEvxJLkB99RCJb5toW2f3az9v7Y2AEQSpU3T4nJdst0Bo1bxuxzs6SGV+pWvjssiyUA/CAM/fk3Wny6pD8eeGyMf8A5QrdNdJJodp3mcuAszPuhXl0TZvAeglBpZmQZzxad3+m6A4gAKExpJvPDRw/v9t29+qevHk87Xu579IFFqalLkWVC9ZqbrYeJtefKuQrKtmF6W6ylYOgPKRxkJMbyb7ej/LthzVhhr//WA1NSUaP0HwpJjxAUm/BMvg/C7nt+wlG6100jgHKIvMtl6EAG7wO4oPsRV4guNJXTYqQVaffGUQQeDtczIQvhbb2jv9d6gAK+Bi8YCqGAEe0OPHHeg1hXxjAwe8mMC9MMHTfWhzCDJpEZJS+wZTftyoAjRgYHJF8aeOCByAGybR9vsSJcEgM0AOjPe5A+w2gxjHvG044z7F/CXkcm8xZAekH2/STIsfV1PjM/mzamD7bf4IubwDfn9NprK5YmjIi3Trd/wEREM2PmnUQ0XsDLMBFhhuq6yFgCgJM98Q/9uYtGHWA6Y2brMJMN/Obz+Kri1kjVaEiAUfTfSOnrmyHLpGeMOcOic1aQs4Cwd6yXh3sQyoAYitrDI8NdfV1Vf7mqMquyfN+tu3dyttdCMBGCUFpBV6kfKR07e5w2OPJNz1vSh5eC5/zNdj9oIBDr3p/zzvLvi4f4yMY6jM8DQOpde8Mfsmvn6kQt0oQ9dcveM05XYPFKl837MEfd7VY3n9A93UBw90/14hCUBzYB1QDA4bwh2xV4vQzeYwAAqyNcD4pg9SJH1w39nVgs0bXJaS7DMJKStKXEbQ+iHquHRzTUKGQTRqTsxBSsgP+J2GHAMG7+E8NoNtJ7ftj5la88IvMnOYk1fHu3VxQxq2WUSEYNiKjWduOGQTzT3TNZCBKlMZU0MyaLBdl1yyzYfQRSr/tfkUZrxsaxsLH4PxRe90ln4NzKLCJHs+Ucib40SNr4Pn93dwsLU1DwaZKGObGCfMgYwuOa+5oB/fYt7alm6r7ZfW/JWywxr86vzi2bnx0b+6R5562PR5INYzotbRLFn2ZquD89A3iBw8zYVCBKwbEHAI0BlH9/WfSfB/LApv/z9oY/kHFH274uLUmwbMWeTu3FxMSdIStrIREWjwezoT/uC3mhwOCmh4GN5NiHgNoj8UNrkmQPvKdmAPEzV26OJgrGErk4cZ5RoBXhSCh0n4RLYrV+MqmISo6KrZp/qy7hLjjzfRizU8+M6jricoT1qLp3rAZ+LX6s2ZVJaQIkIWLaCQeXa7VrRQz4PAB0mfJfpel33mgy9h858kdLSy+WlJzZv39XnKK9d3KAOsIzRLnlOvqvX9cAwPDQUaKZMeksxS19NgAThNqbrGTspmVLr0QODtQnacc/AAD5OogCWlyKaopggCEkjXl/71ZLayuh22C3NzyNbafQfNKN9CIpGpXRxSeLcBWqpvyeDUkO5B6Q0wvMLbR+hC6YAhcXBUG3ujVJLOJhbGSoYL3vUX1fLKVgkhTrcMq/GlQ2fvkX8mKj/6Oy3WI1ffLT+YgYDM4+bxnNBmGL19W0/9L9cjA4DuUE/BvfpbmIdlJoDu9ALwBVx8hOTMbAU8D0WWBEAqRPniLJEwV0Q+n1sciNLaArGEsuypycpSGU/1t14dWEhf43iFq8WQxdQLzJG6s/BUub5DgNjOSbM3GHC6pfc3vAZXilPkGaOC0rGeRUNwSFrsIF+P5uIg3hhZ3FfOKj+DeBZsh5hkLUc+CIK8aAQv7XLmadKRflo2Kzt69j/1uXZo8aw2XGsJxhWVKM0B97DKCCUWlWThjPAsBHEx9NEgNAfx0Q32hMHwBAOoskzqJLElz6L4gHK84I2A95MNqp7qmuGziuwzOB24XFQRQJAQvtLWNIlEZ+Ak8Dx/s6O4PBJi4LOwzW1Jgiggp00Dz4wHhADkUqgH/ohrT2w4BIHUh1IBsEAIKBGdmbvSYBCtl9SxoOAcBz9ydv9ctC/230b9k/IRVvKP136sVoMkAz3TUwEa0HhEmQ6P4AAeKj1qDEtYHaYAdvSB8nGQC9pKQRMEpwBzrPTNBNKJ0t/+QKnAZTgl2Mrl27xgQgZtCLwt4VNKeiIMkLMtU4YSZArjbSkOQCu+FxA8J75Zpc75KbY9IWw0KwW1RgIZ+rPFywrY0gSZMctwdEEa2WutTW+A68GBwJhQAg1v3BK5EmwKDlGzqRhIFTxGNuDQjEPOVwN+uy9speHmLKBEF7RMujeZQryIH8DGOTBBnaUgtpBgVV6669XzXzgwu5/+8/XTP+lGH4cA7jjJxh97oXvh9cQAKaAQBin/R9Is4YwHBtTDQSWfyfi4+Ta2bMtGJ7LmcMgCdx8TUJRgjlNQRplmRybLwDwN8WWrX4VgzKHdrPo84UtUHQQiG4yZ33B3btGuay8Jik8nJutJASHjJXbY2mriKMNTL0vZaqesz6+SPPCwLqQ45VwdF8Te6+ij+p3f1+qdz47f+6fdXnAWBrvS39MwmdLAxJEWGR1BK6TbKJX0I0gFqFAAgILB4ajgijj7AQ10a/M23mIL5mFfg6O9NRzoJUKu6QJRB+yCrIEYEYSkTEBv4KLQL6ORmAiYnBgySJAfo0sRdl+lxqfIilSybgSys9lwi2FAhoumzofhH8+erVgrq6vKPp8kdF/qLnuD0uvi6ehiEJSc4GSkV/lnHRyM85aMc+0Ox+SxqwGFlVGzofdnVx07lNKDxAEveXkg8hWTeDwxNAH/YKBaf4phA1QTbks1wYnA9er3uOjnC50tO5SswgzpZACr8E4QwIH+GUi9bWBtel889vmmdPs9I2+c+IlBdf1eqBxgB0GHkh5hCuWCOlOyUzbrTcsNGfgnCUMHlY55Q+7Z0pwDWHe5EW6AJMTbwIvXAgbhAcCI2orKyMlJpEPH4BwPhiva4O6toAsQ7xYNxaxKzBwenHj69e/TQ5ecZq5TaIAVGeNmcD0hpEItyVE7WhX3/GWgq2+0HxaQ+rfxec5d+Na8w9m/7P2crPsmQfRZ6cVFvClWvoQwVwRBy0wTJcEIAgCY2Wg9MOxMIC/BvHJYGot4yUlk/kT7g7EK8BACUavwd3ECXQPTVZZuNScJ+2VGKAvEgjIwX6AEBoN5HM2hgafRMIA7yYLIbBf5PFsoDl4O3bVYf+4EzVr0iVeLbUf7d36wc7t9bW8rZ8JOm1gqagqPBP+DIxABWorIyBEs3Jud+OALenDZQ5xhsSlbnyJGpkXSRkCkb8hjhNAOaX7A6yyOytrsZ5CEUuV+SQ4h+RIyzpAjHZRGGcrj5yI65PMIj6JLwhzVTUBhDTSKc6OhKbm8tmisrN8sqWypOSeNRqb73SecUZA9CUXmwMSDQTK40vigGtziTgxIloWibTcWwyYwgWrTFkxvoEPZIw8gPmHf8kFSbxYrJwL5QAIZwyQ2PtbQ1H/7AAYH8fzwat5p1mZgYWFmprL8/OTo2PE+YNzpzchaUeLjaWNjo7mVZMJWBIvvY1gMLGfYaqwDGWgm8ol/cWAKD/G1//IZmz0X+gNJPZq2M1SoL/Ab64IyQd5yMtoPALK0GQoRKFC+KyAU+Vc1RL0B9qCd8nfsDuec+gZfg6/UV2ALD3edZFZ+S8iEh8LmkEUUpesAGzkGboDcBFf+oD+fBDwItzJWPGswE4HD2vs6OqqqOm5jevVKVuzdk67bl1rXzLlpFDWz6+I2+/ja8BmsQb8JrJBe4zN/gp3A4aUYjrTLqoLDeXA4FgggqxpK21lTIA4ZYbRCeYbgbHrad4g/pHaGGa8CnEgKhgjg0FEJbpCIJ7sSS4E47PxOZyUUhAC+LTuWIjI0n9/bnzh4rkdTSWo3K0oriiQBZ1fQM/67rqnDEAZvpiYwBB6IuCsDnR54wB0bQ449t4Oy0VUCsVgki1ycDQggjA/IlJx8UnJED88X8mIJtxScyWtGIhhSitA0mEEWPnLY7C3YVoDGzZ8uGNm0NDffgqfUFweYpAJAmkg3yIrf2aJvECx4YNwEt0mS0KJ06e+MYbZd3dxxwBID0+peDB+j5V863ClNvyr3XI/qHkjVX+Pb6G9N8sqSCFov9q6i28D4qBUIMaoNDM/Mc7QW1SgTfffBP2gRSDO4onI6vgTYjkEH94jVaGSS/QfBAfKAzg9KQCYBAMCJWJD0WGQnSC8uS547ZrTb6t+pIYDK0MAMRXyZPxYUoAQ2MXL5JAoc/gzZmbZgoKZo9YRZa8k6l3A6mpRup8pBrApgh/SClJSZlISZk7LXBn+D5ArKAJ8hB/EKTYiRo+zgkx3ZhUURrH6pNk8H/QaJ5Hh6L5MFFnZ5mQlIj4UihFZHDMW16gnyVRhmEgmywZ9YZ6AAuDe6eRg0ZmpEMfA47WnCEH91p0ijUBPMOHdIYXS7HYAYAzvPx02pBLdgwAa11dyfj/jbkzRxQ4aBzUGABgfjT20awzBnC5XBtzCvQnLQb3cXUSX2YE3AsyBGFirjElEYUgZ+g/xADmZjwCgLEyW6T8SxFYtmy3K8DeDe85exb3IpBM79p1ubEx9DZ9QRPop4R/ZpHPp08EIkbQg0ifCZOK+AMbYAUCzAZV0Oicyp8rKio0SkOho8eOHU1JORz/UrAOJkA03Z8brvz7fVluQQla6J96U76pHTnAUmSYwOFeffVVNBkAF3TW7aABZeCY30BDQGSJwfB1Crm8lf1cYkQGNB/kZupdBADyAD6O+UDyQQZA3kAS4H7Xwx9EFFT07zEbJA+n1dYP+4HAnPwYhIYaJ27BM/0RQYdytrO25k1508Mppyz9YUfVjq1JlcwWtDD4BxSJqQIEM610Tx4+DMWVYOD9ywBYxFe+CeIM/Au5yQ4AiP6EB3xGnzbjNfZXSRUFYfZ+YP70Sz+Nq1QcNQBANvVRw6wW4gWsQ3LmpNp1ynfkfC6JGAxp0BhA5HB587/n0WlSIjsMtQ3QH8mEMzHvm3J9XnZc12JAVCtMaWxDdoMVkYEB/VB+uL8GACYCUw9K5L3w674LiCUbOrQBlNsf++aTgmhLroeH+f29bQW9XV07Pr6/ZyvawmJaGt4VFgDwPQIAOXTWwD5aFLLxSwhIN32EZWWhlPRiiY8p+tOBGuoOTSmmM4WWlYLTlnXDaQDY1j2z8QMAa/puytab8o2bIrP2Rh0u9tLA4eDp6Dykn/YDYfR5AArEsRsEv9wybS4izDgDAHIQfq+V4XjEQbWt+sd4mT4Ckp9kj3gs3TG4Mf5MkQCQpMaJY2dJyaQxSc4V7Smn2L81hMa5PRXlzCCQWnQ3ZuYoM4uLo08B4yRivC8qXrNTG6k3X4ZJyGzUAAALJPbwQbwmNqOHksHmbloSmLW8kgDAJjHwfTJpNCLBzHBdkgvNWWk2cFHE0CEDZ8QgeKx587/n0WlS3DgMBWF+UucwOe8gV5JhEgbIzKLrLrMMjk/7A2k304HMWyVTpp69f+L6BgD28GeA/eAxg0xT4mFkjjAlBEeyZdBzvLd3fGCgDaIxOA7k85Bvg++akLCgK1MAqcJ0OZWp/RZgLLwjdOBAt0hIJF4BgHUsLEeAlfjmfXPdczD6FUvB31+5+zN988I3WdXMO2yg8u/zvPwJ4o/sA/oZD8WL7bdM1tkyLZP4WZmHv3g1XJWF7gzEGBgzIAxa4sI2hrHS5ZysCQTfDJ+G/GrF9iMGsxLxRwMAHBOAjqPB+ZinjPU0UiKGRGWkIAw1RwxgnCGtW/1KYl8XzP0diHwTVsbMk3JSbLtOAFga5RKtxbTDT+wBgEQGBYsCy0Pdy406V7wMtoL4EAgg65BmwvAJ6bgyAYA1R8R26BPezOzhlTAOnET7lPXG94O91hiAn0p8jOXHzM9SKV0ILQjhpbtv7QBA8hqqku4qYiTpqq5f35h2c2k0/X/2zjOuqXTb/98tVQIiIFEIwtBU0BksyH/G+Yin934O8++99zf/3st9dc+r++b23u89vdw+fYQpeKyoY4NANIAh5BAgkFD2/V122CcaxBDAwjzfWbMNO/t5kuDH9XvWWjvPYtMxyBXLHgX6Z6LA+YONnaYBRY/rfVjpWZR7NSCrnM1jEwA1Y1eeTq7t2vDL9Pdz+TKlpdTVablBeTnrR/5dsbFMsUUkokhTAkC6AJSWpi9tBsEJAnazYeityAiBf8kCsJdUPkEKQ+D/BH4I84RzJUUAth4Gw+K9GvAJniTG79UA79MjADXUNNHUSmuQ4JWzZykqkptWlC4BoLGRj32MjUITao0vy5jBZQ04DPlsNP5ledn7kGtkTzgjKd5/FsOjx2bzMSzA6SdTAIQ/RQM+yxOIZWOzEnL9r/LqaU6f5ez1kusTjfXJL+996Ut0dbl7ntiPY0OOF+GL8CVo3vA9ofI09bKVsAJR+B58d+m48Ij8wzeWrAS64FMYDAbDZkYAoprqk5wspLCKqtbJ1tD5UIzY4qkEtv0kyKoTBDSz0cylLPCfXTVEWOCR0YXsUWEwGIwAiDrqlJ1ppDFAIEx4hhkbmyeAO8uJoBBUPuKY+7kl+59sZQwGgxEA4cFzhCPOd7hXEQCbrYXBYDAYAXAppljGVsFgMBgM2/jgYDAYDAYjAAaDwWDIxSZDDAaDwWAiAIPBYDAYAbAet63CJPwqfCq7eTIZ8+mlF5jkoSzA78NXV3659b6P1cf/BfwrqMrw6lvw09Cx2kUrzlMN/xpezuqtr8o34SXIgb8J3yYD3oP/CM9k/OqF8HfhBxgMRgAMW26PgOqkZUb5sqViZf0q62cxy9+WwWAwAmDwyTJ3zWVQDhWQv5kyk6m+2EkzGAybKgAG60l8YYt1sxOqwQeVWQQBmeFdfomdbCyLj14ADAbzRTD1Zb148eKdO3cANahUJ271ZmIjGGd8lFEdo0RnmZ1n3sLKI6+IolJKnW2oCylkjXzjgUWAP035qLkNNLTRth6nfP48AwPMz+PCp6AEhy4E75DOAvQuT23VUbeHPcCtW9y+rYYLJBLk51Nejnpt1dbauCwu6iKGh3UR8bjT/cNp/7T6FqrfIYXqS1TfxAchnDbWxzi2gx0P+IDlt26VLy6Ww0hNjfrLprTATmGe+Xd59y53wfH+OjbDIZb4chYi+IekYzNv851FXHLgK7h0YTAYNl4A3nrrre7u7ps3bwLqP6nOZB//+Mdz5H3WQT/9t7g1xNAww2HCEoAZZlwB8OCRY5IA+PCpvWIzzbvYtS4BSNOAfPJPcUrT6iXICgliby+vv87cXIr3536P9I3VdoZlG9vUOehD4c+fPZt/+bIlOQmHkwLg9dLczLFjdHQgGBriwgWuXSMQIBJhdjbZ/2/PHhobefZZXcoD+MP7e0i9S/UrnE92wZQWnuQkaYRC+oDlr71WPj9fAXobUhm9pZWbDL/GazqC4/0/plcBMheAG9y4w50o0UUWt7O94hsVPnyS/7TWpLOL/GAbWORadAFGAAyGTRSAGzduaPkvDXjnnXcAtaLX8l9tYNWNnqzQOvEiF69w5QY3/PjvcCdEaIIJVwDcdqC72V1Djdbp+9l/kIOHOSxtWJ8AiCj8mdP1RQJTT33WAnD1KleucOYM16+73n9155uuAe812831wfpXuyd6e73nzqGpRketeFx9n/H5aGsjFiMvjyMlNzl9GglOXx9SiVDIEYBkA/KWFp2RbmiJ/vBfSEXFkgYUU/GdnPDkl/myNHieeckA9xIMSuTKL18uv3ixvLZWg3RmZQHQDAECL/NyZBdUf1mXpnYK+j1WQ33A3+O9S1waZDBCRAKg+M/7DW8NNbXUSp9kHjzAEEMhQhFGPFws4mvSCQwGw6YKgNb7agKutvRKBAGKA0ZGRtSwm6y4zvVees9x7hKXrnFtkEEgPz+/vLzc6/Hm5ubatp1IJKLR6K3xWwoRCilsokkPbnM7RKiDjvRQIOt3Is8iAdBRL8Ea6e+XAMgc778at1d9sjpUHeuOvfnmdE9PZcHZpiN4CyiYZXYkPvJ+//tvTkTz8uSxQzV573rfeiuvu/tA/rWaQ5SUOM3TFvz+SP+liDJHytORn09ZGQcOkMZCWmNfmdz0QvjSCCOOyeGuJABF0oB/8A/Kf/u3S4LBSZ2Jx5E4pSLx1nBpwBhjVD+nadHkmREn3k33m7x5hjP6G9EMkqJiip0OdHXU6W/HSZFZWH78ffT106+VwS52lVPOClxK/yErnk19ZDB8QAWgsLDQ4/HIQfv9fpAzqtCPOsnaUYqgm+53eEca0EcfsHfv3vr6ejUZ17TFxcV5eXkSAHW+lwCEQqFAIHDr1q2+SJ90YpRRLRUVJShZ4cXL+vha19e++cffvDp91REAHXPIIWNsW2v/pABA0ec+99kf/vAbZMV07/TwO9Pd3Z89dO5TinLkmLWwjRHTR9bjN8JvXL5MY+OVlvkLpb29JxquHTlCfT07dyIBCIXQG3j7bc6di6BIxOtFy+X9+7EsVkc+2nHTly45vlt2nwCEw/L+0gCKi8tFzRsVwf80qet0Rm8gFXcGhDOtjpnRR99ZzvbQc5rTcvTHOa6PP820ZnuFVyqo0N+O4gBH9RU7at0wyugn+aTO6w0/NNqZgR+SBccxAmAwAiBqa2sPHDigVb8cNKDMT2tr6zNyNGvkJjd76NFaTxrgx68m90eOHDl48KCKCpKBysrKkpISVwAUdoyOjkpyrl+/funSpQsXLmig3OICC7nkfoSPlFDCOoi1xn7Nf/wf9vYqEyXvL3uWZ9eU/HFsaIhfbG/9RryFbIm9F/uL3m+d/JkPPX/y+SMcabQaHQ8oscwnP0Kk1z8eCPQHJ6+3e/s6OzlxgoMHJcNIALTu372b+XkpgR4Po5BpcFCPpKusTmWlowGKGIYjw04EkLb8dyIAypcJBv06ky4ActaO6VLH+2fY1HOe+X76FQhe4EIrrZL2AxzQ8n+SSQV8fvwyXaDgoIwyIEJEz77Ii/pF6Xp9gExSbjPwg7V6f1kK/w+D4YMqAKWlpS+88IKyNHL9zppdjlvugLUQIfIjfqQbRd7mbT/+3bt3nzhxor29va2tTeoiOUkvKU9OTmr5f+XKlT179kgtVIU+s3hG63TnBqEP8SHWwUzrzMxAixJbrWM/CQLkXDIaO5P0/goCRsrLv9HSEh9chwD8vP2Rlzrk1DrprKEGG+GxPB10yCm/z/vnphtGRv79v7/m/+IXbS3/pQFu++S6OubmCATQO5HbR054dJSxMUcAMgkCZNHIZUcAxhhLTa/J9TsRQFtbuagor7gcTKqCJCc3FzeH43h/zUB1S3LazAgR0ij5eun6czynX4KsggqFegqAZH78AQJ6IzojtSiiSLO30NJOu4yVaVvpVFYYDEYAnCBAWRpVAgAt1ZWpZ40ocj/PeQX7/fRLUeT9Ozs7dTx27Fi663dQQHD48GHpTVlZmeRnYWGhp6fHWQx68frwNdOcvQC0SABaZwcGxt56yw0C5HPXtPzX7yPxYktcAnC9hexpL6J9Lx33JDRssFCmW95Qn/fllwfb2/0+Hw0N3EdNDQoCFBAgJiaIRqWcZIBbBuDyZdeDuwIQiSR9vdSuqqpyz56qam91QXxHMBh1ztfW3r/8lxN3RYUVOcx9TDE1yeQEE/vw6uM306yCPyCBr6MuSlQaIAEYOT+ix5q/kEIvXl0jtXjw7QBd3MtfQ5YtBoMRAP6cnD/MqfrlKsTfgy74PJmjFZwcZh99ivQBBRC6lUjeX0cehmoDJ0+enJ+fn5qaCofD165dk5YoKSwv0ESThUVWJFoTcwPMDbTaAwOe21fcIKCSSlZDJfHk2l9Hu6qqv6VlzmqZm2sle9rhODSRRhFFcnkFFMBveDxSREpL0ys0FBWxfTuS0YXZWRIJZJkg3XDy9Tt2jESTdeBDHEpZ/sv0vGNJ1+4IwPDw/QKgsXpzzoSaOTPPjHw6zHcxDwVQqM9LCjvYobycbOL8hHRikcUCCqSIueSyGl8jhQ5kmWIwGAF4jzSSp0ohDi8h0v9Zdax6y/8Nblzn+iKLyvYcOnRImZ/jx4+TGao9KFBQ/BFQLry//87cHU2lisIAA5IBsiMHu9W2B1oYGIjd/nMFAY4AnOJUhsv/iQk41mK3tJBose08sue/gM1KSN62sc0RuW3bkpaOZaHzOmLbSXPJrBQ8Gr3qFHKnmfbgcQsAsoMHlwRA4NPV7wbfd867aJQzluo6t/yboQDkuOdW3QqutKu0dF8pBoNh8wXgG6TxY/gLUukEMhSAGLEhhpxqHtDY2Lhv3z6VEyzLgsw9VbVKBSoINzQ0KAiQ69eEmjZ7ARBN0NoqAZBduZHMAskUXnA/NljAyEjKzT8qg8v7yy7sZ71YYPPIcTM2+jyOH5c10ihtc8q/09P3RAD605ouDganHA3QKTf/EyOW9P6yB9G8yglrybZhMBieNAEQEXj5wd5ffJ2VcZaH8hjzzCv7r3KCvkSWxU1EultUA1USkAAECGhCTZsgkU9+9i63pYGBv9IAWxow7wQBjgCsjFv7jceXxEPef58EALCeSg1wb9ksLh6ZGnEFwC3/6knHRDVuFui6KwDu8p+SkuTzVVVkw2oRgCvBBoNhswVgkAcQgSgFrJEw4RAhZ5cYr9er+3+0nGftaJRuB9IMBQUF8Xhcc44xpsmrqCJrapATl/fXDgz9ly5dJXlH0AEOkIbfnxSA99+HAwdsZ/lPipI9zRowcn3IWcsvshgMbnMiAGmcKwD607Gzw0kBSK0Au9kkssRZ/uvIBmtAx5J9HYPB8Bh2A51gQhYhAuzcuVO39Di3kGaBBmq4JnH2D9C0UaKsE2chr2NxsSoBMjn5OHHScGu/5OdrSNKeclzHPcusEwGoIOxEAFNTK0cAcxNFjgDcvTvuLP8jRFwhITsc7y8zGAxbSQBixKaZlgEej0cVXd3fSVYUL6FJAE2omWWsk4oKeX/H5Mvk/R0Z4F6uXUsu/wcGwPX+VVVbRABkRUXJL/QGhx3/nur9nU3rnBNLWSCWbPkLwB5PWgFgo1NADjYGg+FpEoAECceA/CWUwyErNNCZ4b5ps8RKCwIqK90gQBEGyyQSKbXfkpK05b/F08u2ba4GOAn90eDovTeA4uJcp3P3C4CrIpZFFpgisMGwVQXAxl5kUUc0+xJWtm4idbjmdKddL0VF9rIGyO9LABxLr/3K2zlqYevisjK2BO43wvTZwzPh8HB4eHgmGl1BAJzlvyw2XjgysjAyMjb247EQodQCwPojABMEGAxbRwCUOsghR0dgYYlFue6sSB2uOd1pNwAnAtCxttbNAjm7m0WjSQGQKUTY5Oy/9RjLABQWRu5GQqPahenH6d7f+Z27peDR0XHVAMKh8EJhXnoBIPsisMFg2EoCUECBY0B8Ce31RlbMLqEZUqfdqEyIqwFx4k4WSMfU2m8kkpL9LyraOg0pc3PdHM7E6MTdu9HR0eiD9nRwS8FjY5Oh0MREaMINIJAiw/qLwCYIMBi2jgB48BRT7Gzeqe0ctMVbNBolKzR2aglAc2pm2Yb52cbGpAbs23eNa04Q0B/qd5f/Tt8V55rUKbZMECCbvDs5Oqo9nydXjACEGwEEQy1jY1OTY5OkasX6U0AGw1bCCEAppTvZmdzONxIJh8NjY2Osnbm5OQ0cHx/XJEA55ZpTk7NB2KnV4Lw8JwjQl86WvL8Vi+Eu/22FC1sLdxXf/5XAr/961OdzBGCFmm4eeclS8LTvN8d+6lrXwIYKwDbABAGPC4Mhl42mkkov3t3s1rJaW/yrr4Cay8uba+t/1sLt27eDwaCGqwywne2aUzPvYtfGLoTdzSGGLly4Gb3ZP9B/69bta9eW4wNZUxNrpD6LJ+szncNlL6txglXJz0/m8Y9Xw88VFPycz2frp3TcUrCOVX9cxTM4AzWDiQDux2AwAlBFlfxFDTUePNOx6cHBQXWXVF/JtbYUVm8A9YcZGhoC9rLXcUPWRrsMVwBk/iG/f9Cv/+cXt+l81rXfLh5EkyyDMV/gYdRoRJbvIUX8amU+GLQspcGsmpqVV9o11Oxn/1f5KqIafKxj+X8A/heyLLB50jEYjADkkltHXT31jTRe5KJcv/Iq2tOtpqYm82+EqTH91atXtRmc/DHQQIPTKXDj918oK8MNAgLnA0u4yR/27s0iX/8SK9KMbEV+pDFr8P57ZVm8h3QBeKkaZDmwsHt36ge078sCfZyPH+UouY73l5VjMBiMAKyIXH8zzVo29tOvHM7Fixe1I5B2dFBPmEwSQcr8nDlz5vz58319fYAzlY4+fGwoNlggR+8IQPwf+odG/+Du9u/T+VlHALJbdx4jnRydzmDAoezmT6eah7FdebWkO4fAQ+/sqkb/kbRCVsZgMBgBqKCildYhhoIEu+k+e/astgXV13qVzT969OiuVfvHKmKQ91cvsN7eXpUBSilto+0QhzThJqUF5ApdDQjMz1NXl/T+Xi9bGjehA4FML3dGGAyGLUHuJm28qx5+o4yGCU8yeXHh4unTp+X9dUOn2ryoPYD2edY2n5Zlpd7yPzw8rGqBMj9a+7/33ntqDZ9Pfgcdxzh2mMM+fNibtgtnayuDg0Qit51b/g8dQg/Sh201XI+ewb6kVopeGAxbCBMBbLwGFFDQTvsUUwkSFtaF2QuvvfaabglVUVctYlQPUBygkoAyQrZty/tPTExIG1QxVvZfmR9d5ol6ni95/gQnpAGaig3E1YDUT67+5BUVTE+Tn09TEzt2APZW9v7CA39HZuquH3AMJgVkw5twio1jD3te5EVHDHaw4wIXVAxQhkedXqqqqrTVs3b6dAQgHo9Ho9FQKKScj1P1rf2vtUd6jrSfan+h8AVpAGlsfBwgj9/RsVnf1cqBv4FsdQ4t2f/lYXxpyX4Hg8GwUZgaQBz+KfwSG8de9n6YD5dQsotdPnzXuDYQG7i8hHZ50z7PrgDEYjHE59gTLhmdOlDfc7gtr+1E3tHOzo7c3Bw2Exsss/z9YGMwGAFIINtodrP7E3xC0UAddfvZP8hgkGCIUHQxOjM5M8+8s3uEpKKsu8z7htc3F/e98cb/7TmvL+fm5TXl5tLZufqq3AY+z4PJf/DTX4Dv8zC+kD6+BpnBYNhqGAHIhXk2lDzyVMhtoqmf/iGGRhgJE44SnWVWAmBh6QKP7Sm1SysTldUJv29u7n+88UZPT1NeHhIAHV944SHZmK4HvzZd2QQB9oPn9jmnDAbDVsEIwOKyAMyzOZRSeoQjsjHGxhmfZPInAmDnFVFUapVWnKgomXuHuTkSidhpq6dH3j9p7e1r/95Tvp7IJhFkP3juGudng8GwhTAC4Hj/OEvYNkksi41G9QDZyrn2fDhxQgLg2MS770oDnCBA1tbGgyjI9GwWFKT/YDAYthJGAOJLlgAWF5meJhZjdhaKCikspKCAR4bHo4yPqwFjZ8+6cYCU4ODBTa8G23zAMBgMJgK4eTMxNZUAxse5cYNgkEQCnvFSXs7OnZvodNMpK5MG6OUdG+nrkwa49YB9+9gwzJ0/BoPBCMDwcOLllxOBQAKYnOTmTS5cgPx8mpupq8Pn4xHj9bq5IHn9QDicmguqryczSuAfIdtAGuG/IDMYDFsEIwCz44noaOLPv5GYgOlpgkGorKSzjWPHlHbZLAGwH9a0RBpgWehBNNoPebK+pAbU1LAeDAaDwZDLKzBEYiiRCCTiTZU3pjsRh4upqmL/fo4epaODR4vFMs88Q1kZgQCxGLZ9DXIdGbhDZy579mAwGAyGrMnloxAhPhSPBw4n7lYjV2tZFBWhCKC+Xsv/x5xuLy1FtsxlRwAgF05BBevBYDAYTAqojETZc4m25xLRKDMzSAC2b6ekhCeS88sCoOMp/rKdO+BQIIgCOP5mupRGYQpQxSEFEZAAhPvcg44OKAClQGkXxoJb2BubAw539txp+v889OYL/GVqpCMVAAB3APltOh0J8wcKqeLtMwBhXgQAUD0A8v+UfMvrbwUAAAjAezk/VtzlL/EBAKooCnk8AAAtAIBoEAAAAAEAABAAAAABAAA8yVeyLNvtdpfLRSnV7/dns1mj0ZC4AQAByPPcObderw+HQ61WG4/H3vvVaiVxAwACsN/vt9utc26z2dTr9cVi0W63n0sCIGIgAN77JEmOx2NeOp1OYQ2HAiBu4BK42WwaY6y1tzV8CGs4FABxA98AhsPhZDK5Xq+9Xk9rPZ1OwzoajQRA3EAArLXL5dIYcz6flVKDwWA+n7daLQHwCMBjcOE8TVOtdbfbFQAAr4ECAPgnMACAAAAA7s0HoDFhsamH/bcAAAAASUVORK5CYII=",eT={thin:100,light:300,regular:400,normal:400,medium:500,bold:700,black:900};class tT{constructor(t){this._webGLHelper=t,this.fontRepository="https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/",this._fonts=new Sn([],JSON.stringify),this._metadataPromises=new Map,this._fontPromises=new Map,this._promises=[],this._defaultFontEntry={metrics:bh(tw),texture:t?this._createTextureNow($N):void 0}}async waitUntilReady(){await Promise.all(this._promises)}getFont(t,e="normal",r="regular"){if(Ce(r)&&(r=eT[r.toLowerCase()],!r))throw new Error("Unknown font weight: "+r);const i={family:t,style:e,weight:r};let s=this._fonts.get(i);return s||(s={metrics:void 0,texture:void 0},this._fonts.set(i,s),this._promises.push(this._loadFontEntry(s,i))),s}async _loadFontEntry(t,e){try{const r=await this._loadMetadata(e.family),i=rT(r,e),s=this.fontRepository+gw(e.family)+"/"+i.replace(/\.\w+/,""),o=this._createTexture(s+".png"),a=this._loadFont(s+".json");t.texture=await o,t.metrics=await a}catch{console.warn(`Cannot load font: "${e.family}". Using the embedded default font.`),t.metrics=this._defaultFontEntry.metrics,t.texture=this._defaultFontEntry.texture}}_loadFont(t){let e=this._fontPromises.get(t);return e||(e=fetch(t).then(r=>{if(!r.ok)throw new Error("Could not load font: "+r.status);return r}).then(r=>r.json()).then(r=>bh(r)),this._fontPromises.set(t,e)),e}_loadMetadata(t){const e=gw(t);let r=this._metadataPromises.get(e);if(!r){const i=this.fontRepository+e+"/METADATA.pb";r=fetch(i).then(s=>{if(!s.ok)throw new Error("Could not load font metadata. Response status: "+s.status+", url: "+i);return s}).then(s=>s.text()).then(s=>nT(s)).catch(s=>{console.warn(s.message)}),this._metadataPromises.set(e,r)}return r}getDefaultFont(){return this._defaultFontEntry}_createTexture(t){const e=this._webGLHelper.gl;return new Promise((r,i)=>{Ma(e,{src:t,min:e.LINEAR},(s,o,a)=>{s?i(s):r(o)})})}_createTextureNow(t){const e=this._webGLHelper.gl;let r;const i=new Promise((s,o)=>{r=Ma(e,{src:t,min:e.LINEAR},(a,l,c)=>{a?o(a):s(l)})});return this._promises.push(i),r}}function gw(n){return n.toLowerCase().replaceAll(/[^\w]/g,"")}function nT(n){const t=n.split(`
`),e=[];let r;for(const i of t)if(i.startsWith("fonts {")&&(r={name:void 0,style:void 0,weight:void 0,filename:void 0,post_script_name:void 0,full_name:void 0,copyright:void 0}),i.startsWith("}")&&(e.push(r),r=void 0),r){let s=i.match(/^\s*([A-Za-z_]+):[ ]?"(.*)"$/);if(s){const o=s[1];r[o]=s[2]}if(s=i.match(/^\s*([A-Za-z_]+):[ ]?(\d+)$/),s){const o=s[1];r[o]=+s[2]}}return e}function rT(n,t){let e,r=Number.POSITIVE_INFINITY;for(const i of n)if(t.family.localeCompare(i.name,void 0,{sensitivity:"accent"})==0&&t.style==i.style){const s=Math.abs(t.weight-i.weight);s<r&&(r=s,e=i)}return e==null?void 0:e.filename}function iT(n,t){const e=[];let r;for(const i of n.split(`
`))if(i.startsWith(">"))r={identifier:i.match(/>(\S+)/)[1],sequence:""},e.push(r);else if(r)r.sequence+=i.trim();else throw new Error("Invalid fasta file!");return e}const pw=new Map,sT={Organism:"Homo sapiens"};async function oT(n,t,e={}){const r=n.symbol,i={...sT,...e,GENE:r};let s=pw.get(r)??await lT(i);return s?(pw.set(r,s),Ie`
            <div class="title">
                <strong>${s.name}</strong>
                ${s.description}
            </div>
            <p class="summary">${s.summary}</p>
            <p class="source">Source: NCBI RefSeq Gene</p>
        `):null}async function aT(n){const t={mode:"cors"},e=new URL("https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi");e.search=new URLSearchParams({db:"gene",term:uT(n),sort:"relevance",retmax:"1",retmode:"json"}).toString();const i=(await fetch(e.toString(),t).then(s=>s.json())).esearchresult.idlist[0];if(i){const s=new URL("https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi");return s.search=new URLSearchParams({db:"gene",id:i,retmode:"json"}).toString(),(await fetch(s.toString(),t).then(l=>l.json())).result[i]}else return null}const cT=ql(aT,500);function lT(n){return cT(n)}function uT(n){return Object.entries(n).filter(([t,e])=>e&&e.length>0).map(([t,e])=>`("${e}"[${t}])`).join(" AND ")}const fT=Ze(".4~r"),AT=Ze(".4~e");function mw(n){return n==null?Ie` <span class="na">NA</span> `:Ce(n)?n.substring(0,30):Number.isInteger(n)?""+n:ft(n)?Math.abs(n)>Math.pow(10,8)||Math.abs(n)<Math.pow(10,-8)?AT(n):fT(n):Uo(n)?n?"True":"False":Xe(n)?Ie`${n.map((t,e)=>[mw(t),e<n.length-1?", ":ke])}`:"?"+typeof n+" "+n}async function hT(n,t,e){const r=(c,u)=>{var f;for(const[h,A]of Object.entries(t.encoders))if((f=A==null?void 0:A.dataAccessor)!=null&&f.fields.includes(c))switch(h){case"color":case"fill":case"stroke":return Ie`
                            <span
                                class="color-legend"
                                style=${`background-color: ${A(u)}`}
                            ></span>
                        `}return""},i=(c,u)=>{const f=c.filter(([h,A])=>!h.startsWith("_"));if(f.length!==0)return f.map(([h,A])=>A!==null&&typeof A=="object"&&!Array.isArray(A)?Ie`${i(Object.entries(A),(u||"")+h+".")}`:Ie`
                      <tr>
                          <th>${u}${h}</th>
                          <td>${mw(A)} ${r(h,n)}</td>
                      </tr>
                  `)},s=i(Object.entries(n));if(!s)return;const o=Ie`
        <table class="attributes">
            ${s}
        </table>
    `,a=t.unitView.getTitleText(),l=a?Ie`
              <div class="title">
                  <strong>${a}</strong>
              </div>
          `:"";return Ie`${l}${o}`}class rc extends Ky{constructor(t,e,r,i,s,o){super(t,e,r,i,s,o),this.spec=t}async initializeChildren(){}*[Symbol.iterator](){}visit(t){let e;try{e=t(this)}catch(r){throw r.view=this,r}if(e===tc)return e;if(e!==fi){t.beforeChildren&&t.beforeChildren(this);for(const r of this){const i=r.visit(t);if(i===tc)return i}t.afterChildren&&t.afterChildren(this),t.postOrder&&t.postOrder(this)}}findDescendantByPath(t){for(const e of this)if(e.name===t[0]){if(t.length==1)return e;if(e instanceof rc)return e.findDescendantByPath(t.slice(1))}}findChildByName(t){for(const e of this)if(e.name===t)return e}findDescendantByName(t){let e;return this.visit(r=>{if(r.name==t)return e=r,tc}),e}getDefaultResolution(t,e){return"shared"}}function dT(n){wR(n),xR(n)}function Cw(n){n.getDescendants().forEach(t=>t.configureViewOpacity())}class yw{constructor(t,e){this.container=t,this.options=e}async addChildSpec(t,e){var h,A;const{specs:r,insertAt:i}=this.options.getChildSpecs(),s=e??r.length,o=((A=(h=this.options).defaultName)==null?void 0:A.call(h,s,t))??"child"+r.length,a=await this.container.context.createOrImportView(t,this.container,this.container,o);i(s,t);const l=this.options.insertView(a,s);this.options.prepareView&&await this.options.prepareView(a,s,l),Cw(a);const c=d=>d.isConfiguredVisible(),{dataSources:u,graphicsPromises:f}=Fd(a,this.container.context.dataFlow,c);return await Md(a,u),await Bd(f),this.options.requestLayout!==!1&&(this.container.invalidateSizeCache(),this.container.context.requestLayoutReflow()),a}async removeChildAt(t){const{removeAt:e}=this.options.getChildSpecs();this.options.removeView(t),e(t),this.options.afterRemove&&await this.options.afterRemove(t),this.options.requestLayout!==!1&&(this.container.invalidateSizeCache(),this.container.context.requestLayoutReflow())}}class ws extends rc{constructor(e,r,i,s,o,a){super(e,r,i,s,o,{layersChildren:!0,...a});D(this,Xc);D(this,Vt,[]);this.spec=e,this.needsAxes={x:!0,y:!0}}async initializeChildren(){F(this,Vt,await Promise.all(this.spec.layer.map((e,r)=>this.context.createOrImportView(e,this,this,"grid"+r,i=>{if(!Od(i)&&!Ld(i))throw new mr("LayerView accepts only unit or layer specs as children!",this)}))))}async addChildSpec(e,r){return T(this,Xc,ag).call(this).addChildSpec(e,r)}async removeChildAt(e){await T(this,Xc,ag).call(this).removeChildAt(e)}get children(){return C(this,Vt).slice()}*[Symbol.iterator](){for(const e of C(this,Vt))yield e}render(e,r,i={}){if(super.render(e,r,i),!!this.isConfiguredVisible()){e.pushView(this,r);for(const s of C(this,Vt))s.render(e,r,i);e.popView(this)}}propagateInteractionEvent(e){this.handleInteractionEvent(void 0,e,!0);for(let r=C(this,Vt).length-1;r>=0;r--)if(C(this,Vt)[r].propagateInteractionEvent(e),e.stopped)return;this.handleInteractionEvent(void 0,e,!1)}}Vt=new WeakMap,Xc=new WeakSet,ag=function(){return new yw(this,{getChildSpecs:()=>({specs:this.spec.layer,insertAt:(e,r)=>{this.spec.layer.splice(e,0,r)},removeAt:e=>{this.spec.layer.splice(e,1)}}),insertView:(e,r)=>(e.layoutParent??(e.layoutParent=this),C(this,Vt).splice(r,0,e),e),removeView:e=>{const r=C(this,Vt)[e];if(!r)throw new Error("Child index out of range!");r.disposeSubtree(),C(this,Vt).splice(e,1)},defaultName:e=>"layer"+e})};class ww{constructor(t,e){this.n=t,this.maxCols=e??1/0}get nRows(){return this.maxCols==1/0?1:Math.ceil(this.n/this.maxCols)}get nCols(){return Math.min(this.n,this.maxCols)}get rowIndices(){const t=[],e=this.nCols,r=this.nRows;for(let i=0;i<r;i++){const s=[];t.push(s);for(let o=0;o<e;o++){const a=i*e+o;a<this.n&&s.push(a)}}return t}get colIndices(){const t=[],e=this.nCols,r=this.nRows;for(let i=0;i<e;i++){const s=[];t.push(s);for(let o=0;o<r;o++){const a=o*e+i;a<this.n&&s.push(a)}}return t}getCellIndex(t,e){let r=0;if(this.maxCols==1/0)r=e==0?t:void 0;else{if(t>=this.maxCols)return;r=e*this.nCols+t}return r<this.n?r:void 0}getCellCoords(t){if(!(t<0||t>=this.n))return[t%this.nCols,Math.floor(t/this.nCols)]}}function Ln(n){return()=>n}const tn=class tn{static create(t,e,r,i){return new tn(Ln(t),Ln(e),Ln(r),Ln(i))}_offset(t,e){const r=this["_"+t];if(e===0)return r;switch(typeof e){case"number":return()=>r()+e;case"function":return()=>r()+e();default:throw new Error("Not a number of function")}}_passThrough(t){return this._offset(t,0)}constructor(t,e,r,i){this._x=t,this._y=e,this._width=r,this._height=i}get x(){return this._x()}get y(){return this._y()}get width(){return this._width()}get height(){return this._height()}get x2(){return this._x()+this._width()}get y2(){return this._y()+this._height()}equals(t){return t?this===t||this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height:!1}modify(t){if(!Object.keys(t).length)return this;const e=r=>{const i=t[r];return typeof i=="number"?Ln(i):typeof i=="function"?i:this._passThrough(r)};return new tn(e("x"),e("y"),e("width"),e("height"))}translate(t,e){return t===0&&e===0?this:new tn(this._offset("x",t),this._offset("y",e),this._passThrough("width"),this._passThrough("height"))}translateBy(t){return this.translate(t.x,t.y)}expand(t,e=1){return t.left==0&&t.top==0&&t.right==0&&t.bottom==0?this:new tn(t.left?this._offset("x",-t.left*e):this._passThrough("x"),t.top?this._offset("y",-t.top*e):this._passThrough("y"),t.width?this._offset("width",t.width*e):this._passThrough("width"),t.height?this._offset("height",t.height*e):this._passThrough("height"))}shrink(t){return this.expand(t,-1)}intersect(t){return this===t||t==null?this:new tn(()=>Math.max(this.x,t.x),()=>Math.max(this.y,t.y),()=>Math.min(this.x2,t.x2)-Math.max(this.x,t.x),()=>Math.min(this.y2,t.y2)-Math.max(this.y,t.y))}union(t){return this===t||t==null?this:new tn(()=>Math.min(this.x,t.x),()=>Math.min(this.y,t.y),()=>Math.max(this.x2,t.x2)-Math.min(this.x,t.x),()=>Math.max(this.y2,t.y2)-Math.min(this.y,t.y))}isDefined(){return this.width>=0&&this.height>=0}flatten(){return new tn(Ln(this.x),Ln(this.y),Ln(this.width),Ln(this.height))}containsPoint(t,e){return t>=this.x&&t<this.x2&&e>=this.y&&e<this.y2}normalizePoint(t,e,r=!1){const i={x:(t-this.x)/this.width,y:(e-this.y)/this.height};return r&&(i.y=1-i.y),i}denormalizePoint(t,e,r=!1){return r&&(e=1-e),{x:this.x+t*this.width,y:this.y+e*this.height}}toString(){return`Rectangle: x: ${this.x}, y: ${this.y}, width: ${this.width}, height: ${this.height}`}toRoundedString(){return`Rectangle: x: ${Math.round(this.x)}, y: ${Math.round(this.y)}, width: ${Math.round(this.width)}, height: ${Math.round(this.height)}`}};j(tn,"ZERO",tn.create(0,0,0,0));let St=tn;const gT="chromosome_ticks_and_labels",pT={x:"width",y:"height"};function Nd(n){return n=="x"?"y":"x"}const Zu={x:["bottom","top"],y:["left","right"]},Td=Object.fromEntries(Object.entries(Zu).map(([n,t])=>t.map(e=>[e,n])).flat(1));function yr(n){return Td[n]}class xw extends ws{constructor(t,e,r,i,s,o){const a=e=="locus",l={...a?CT:Iw,...mT(e,t),...t};super(a?yT(l,e):Ew(l,e),r,i,s,`axis_${t.orient}`,{blockEncodingInheritance:!0,contributesToScaleDomain:!1,...o}),this.axisProps=l}getSize(){const t={px:this.getPerpendicularSize()},e={grow:1};return Td[this.axisProps.orient]=="x"?new Cr(e,t):new Cr(t,e)}getPerpendicularSize(){return Pd(this.axisProps)}isPickingSupported(){return!1}}function Pd(n){const t=yr(n.orient);let e=n.ticks&&n.tickSize||0;return n.labels&&(e+=n.labelPadding,t=="x"?e+=n.labelFontSize:e+=30),n.title&&(e+=n.titlePadding+n.titleFontSize),e=Math.min(n.maxExtent||1/0,Math.max(n.minExtent||0,e)),e}const Iw={values:null,minExtent:20,maxExtent:1/0,offset:0,domain:!0,domainWidth:1,domainColor:"gray",domainDash:null,domainDashOffset:0,domainCap:"square",ticks:!0,tickSize:5,tickWidth:1,tickColor:"gray",tickDash:null,tickDashOffset:0,tickCap:"square",tickCount:null,tickMinStep:null,labels:!0,labelAlign:"center",labelBaseline:"middle",labelPadding:4,labelFontSize:10,labelLimit:180,labelColor:"black",format:null,titleColor:"black",titleFont:"sans-serif",titleFontSize:10,titlePadding:3};function mT(n,t){const e=t.orient,r=n=="nominal"||n=="ordinal";let i="center",s="middle",o=t.labelAngle??((e=="top"||e=="bottom")&&r?-90:0);switch(e){case"left":i="right";break;case"right":i="left";break;case"top":case"bottom":Math.abs(o)>30?(i=o>0==(e=="bottom")?"left":"right",s="middle"):s=e=="top"?"alphabetic":"top";break}return{labelAlign:i,labelAngle:o,labelBaseline:s}}function Ew(n,t){const e={...n,extent:Pd(n)},r=yr(e.orient),i=Nd(r),s=e.orient=="bottom"||e.orient=="right"?1:-1,o=e.orient=="bottom"||e.orient=="left"?1:0,a=()=>({name:"domain",data:{values:[{}]},mark:{type:"rule",clip:!1,strokeDash:e.domainDash,strokeCap:e.domainCap,color:e.domainColor,[i]:o,size:e.domainWidth}}),l=()=>({name:"labels",mark:{type:"text",clip:!1,align:e.labelAlign,angle:e.labelAngle,baseline:e.labelBaseline,[i+"Offset"]:(e.tickSize+e.labelPadding)*s,[i]:o,size:e.labelFontSize,color:e.labelColor,minBufferSize:1500},encoding:{[r]:{field:"value",type:t},text:{field:"label"}}}),c=()=>({name:"ticks",mark:{type:"rule",clip:!1,strokeDash:e.tickDash,strokeCap:e.tickCap,color:e.tickColor,size:e.tickWidth,minBufferSize:300},encoding:{[i]:{value:o},[i+"2"]:{value:o-e.tickSize/e.extent*(o?1:-1)}}}),u=()=>({name:"title",data:{values:[{}]},mark:{type:"text",clip:!1,align:"center",baseline:e.orient=="bottom"?"bottom":"top",angle:[0,90,0,-90][["top","right","bottom","left"].indexOf(e.orient)],text:e.title,color:e.titleColor,[r]:.5,[i]:1-o}}),f=()=>{const A={name:"ticks_and_labels",encoding:{[r]:{field:"value",type:t}},layer:[]};return e.ticks&&A.layer.push(c()),e.labels&&A.layer.push(l()),A},h={resolve:{scale:{[r]:"forced"}},[pT[Nd(r)]]:e.extent,data:{lazy:{type:"axisTicks",channel:r,axis:n}},layer:[]};return e.domain&&h.layer.push(a()),(e.ticks||e.labels)&&h.layer.push(f()),e.title&&h.layer.push(u()),h}const CT={...Iw,chromTicks:!0,chromTickSize:18,chromTickWidth:1,chromTickColor:"#989898",chromTickDash:[4,2],chromTickDashOffset:1,chromLabels:!0,chromLabelFontSize:13,chromLabelFontWeight:"normal",chromLabelFontStyle:"normal",chromLabelColor:"black",chromLabelAlign:"left",chromLabelPadding:7};function yT(n,t){const e={...n,extent:Pd(n)},r=yr(e.orient),i=Nd(r),s=e.orient=="bottom"||e.orient=="left"?1:0,o=()=>({name:"chromosome_ticks",mark:{type:"rule",strokeDash:n.chromTickDash,strokeDashOffset:n.chromTickDashOffset,[i]:s,[i+"2"]:s-e.chromTickSize/e.extent*(s?1:-1),color:n.chromTickColor,size:e.chromTickWidth}}),a=()=>{let u;switch(e.orient){case"top":u={y:0,angle:0,paddingX:4,dy:-e.chromLabelPadding,viewportEdgeFadeWidthLeft:20,viewportEdgeFadeWidthRight:20,viewportEdgeFadeDistanceRight:-10,viewportEdgeFadeDistanceLeft:-20};break;case"bottom":u={y:1,angle:0,paddingX:4,dy:e.chromLabelPadding+e.chromLabelFontSize*.73,viewportEdgeFadeWidthLeft:20,viewportEdgeFadeWidthRight:20,viewportEdgeFadeDistanceRight:-10,viewportEdgeFadeDistanceLeft:-20};break;case"left":u={x:1,angle:-90,paddingY:4,dy:-e.chromLabelPadding,viewportEdgeFadeWidthBottom:20,viewportEdgeFadeWidthTop:20,viewportEdgeFadeDistanceBottom:-20,viewportEdgeFadeDistanceTop:-10};break;case"right":u={x:0,angle:90,align:"right",paddingY:4,dy:-e.chromLabelPadding};break;default:u={}}return{name:"chromosome_labels",mark:{type:"text",size:e.chromLabelFontSize,font:e.chromLabelFont,fontWeight:e.chromLabelFontWeight,fontStyle:e.chromLabelFontStyle,color:e.chromLabelColor,align:n.chromLabelAlign,baseline:"alphabetic",clip:!1,...u},encoding:{[r+"2"]:{field:"continuousEnd",type:t},text:{field:"name"}}}};let l;switch(e.orient){case"bottom":case"top":l={};break;case"left":l={labelAngle:-90,labelAlign:"center",labelPadding:6};break;case"right":l={labelAngle:90,labelAlign:"center",labelPadding:6};break;default:l={}}const c=Ew({...n,...l},t);if(n.chromTicks||n.chromLabels){const u={name:gT,data:{lazy:{type:"axisGenome",channel:yr(e.orient)}},encoding:{[r]:{field:"continuousStart",type:t,band:0}},layer:[]};if(n.chromTicks&&u.layer.push(o()),n.chromLabels){u.layer.push(a());let f;c.layer.filter(h=>h.name=="ticks_and_labels").forEach(h=>h.layer.filter(A=>A.name=="labels").forEach(A=>{f=A.mark})),f&&(e.orient=="top"||e.orient=="bottom"?(f.viewportEdgeFadeWidthLeft=30,f.viewportEdgeFadeDistanceLeft=40):(f.viewportEdgeFadeWidthBottom=30,f.viewportEdgeFadeDistanceBottom=40))}c.layer.push(u)}return c}class wT{constructor(t){D(this,Ri);D(this,Dr,0);D(this,kr,0);F(this,Ri,new Array(t))}push(t){C(this,Ri)[C(this,Dr)]=t,F(this,Dr,(C(this,Dr)+1)%this.size),F(this,kr,Math.min(C(this,kr)+1,this.size))}get(){const t=C(this,Ri);return C(this,kr)<this.size?t.slice(0,C(this,kr)):t.slice(C(this,Dr),this.size).concat(t.slice(0,C(this,Dr)))}get size(){return C(this,Ri).length}get length(){return C(this,kr)}}Ri=new WeakMap,Dr=new WeakMap,kr=new WeakMap;class bt{static fromMouseEvent(t){return new bt(t.clientX,t.clientY)}constructor(t,e){this.x=t,this.y=e}subtract(t){return new bt(this.x-t.x,this.y-t.y)}add(t){return new bt(this.x-t.x,this.y-t.y)}multiply(t){return new bt(this.x*t,this.y*t)}get length(){return Math.sqrt(this.x**2+this.y**2)}equals(t){return t?t===this||t.x===this.x&&t.y===this.y:!1}}let hi,bw=0;function Bw(){return performance.now()-bw<50}function xT(n){return function(...t){bw=performance.now(),n(...t)}}function IT(n,t,e,r,i){if(e=xT(e),n.type=="wheel"){n.uiEvent.preventDefault();const s=n.uiEvent,o=s.deltaMode?120:1;if(!s.deltaX&&!s.deltaY)return;hi==null||hi.stop();let{x:a,y:l}=n.point;if(r){const c=r.mark.encoders;c.x&&!c.x2&&!c.x.constant&&(a=+c.x(r.datum)*t.width+t.x),c.y&&!c.y2&&!c.y.constant&&(l=(1-+c.y(r.datum))*t.height+t.y)}Math.abs(s.deltaX)<Math.abs(s.deltaY)?e({x:a,y:l,xDelta:0,yDelta:0,zDelta:s.deltaY*o/300}):e({x:a,y:l,xDelta:-s.deltaX*o,yDelta:0,zDelta:0})}else if(n.type=="mousedown"&&n.mouseEvent.button===0){hi&&hi.stop();const s=new wT(30),o=n.mouseEvent;o.preventDefault();let a=bt.fromMouseEvent(o);const l=f=>{const h=bt.fromMouseEvent(f);s.push({point:h,timestamp:performance.now()});const A=h.subtract(a);e({x:a.x,y:a.y,xDelta:A.x,yDelta:A.y,zDelta:0}),a=h},c=()=>{const h=performance.now(),A=s.get().filter(I=>h-I.timestamp<160);if(A.length<5||!i||ET(A))return;const d=A.at(-1),g=A[0],m=d.point.subtract(g.point).multiply(1/(d.timestamp-g.timestamp));let p=a.x,w=a.y;hi=Rd(i,I=>{e({x:I.x,y:I.y,xDelta:p-I.x,yDelta:w-I.y,zDelta:0}),p=I.x,w=I.y},150,.5,{x:p,y:w}),hi({x:a.x-m.x*250,y:a.y-m.y*250})},u=()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",u),c()};document.addEventListener("mouseup",u,!1),document.addEventListener("mousemove",l,!1)}}function ET(n){const t=n[Math.floor(n.length/2)],e=t.point.subtract(n[0].point).multiply(t.timestamp-n[0].timestamp),r=n.at(-1).point.subtract(t.point).multiply(n.at(-1).timestamp-t.timestamp),i=e.length;return r.length/i<.4}class bT extends ws{constructor(t,e,r,i,s,o){const l={...e=="locus"?BT:vw,...t};super(DT(l,e),r,i,s,`axisGrid_${t.orient}`,{blockEncodingInheritance:!0,contributesToScaleDomain:!1,...o}),this.axisProps=l}getOrient(){return this.axisProps.orient}isPickingSupported(){return!1}}const vw={values:null,grid:!1,gridCap:"butt",gridColor:"lightgray",gridDash:null,gridOpacity:1,gridWidth:1,tickCount:null,tickMinStep:null},BT={...vw,chromGrid:!1,chromGridCap:"butt",chromGridColor:"gray",chromGridDash:[1,5],chromGridOpacity:1,chromGridWidth:1};function vT(n,t){const e=n,r=yr(e.orient);return{name:"grid_lines",data:{lazy:{type:"axisTicks",channel:r,axis:n}},mark:{type:"rule",strokeDash:e.gridDash,strokeCap:e.gridCap,color:e.gridColor,size:e.gridWidth,opacity:e.gridOpacity,minBufferSize:300},encoding:{[r]:{field:"value",type:t}}}}function QT(n,t){const e=n,r=yr(e.orient);return{name:"chromosome_lines",data:{lazy:{type:"axisGenome",channel:r}},mark:{type:"rule",strokeDash:e.chromGridDash,strokeCap:e.chromGridCap,color:e.chromGridColor,size:e.chromGridWidth,opacity:e.chromGridOpacity},encoding:{[r]:{field:"continuousStart",type:t,band:0}}}}function ST(n,t){const e=n,r=yr(e.orient);return{name:"chromosome_fill",data:{lazy:{type:"axisGenome",channel:r}},mark:{type:"rect"},encoding:{[r]:{field:"continuousStart",type:t,band:0},[r+"2"]:{field:"continuousEnd",band:0},fill:{field:"odd",type:"nominal",scale:{domain:[!1,!0],range:[e.chromGridFillEven??"white",e.chromGridFillOdd??"white"]}},opacity:{field:"odd",type:"nominal",scale:{type:"ordinal",domain:[!1,!0],range:[e.chromGridFillEven?1:0,e.chromGridFillOdd?1:0]}}}}}function DT(n,t){const e={...n},r=[];return e.chromGrid&&(e.chromGridFillOdd||e.chromGridFillEven)&&r.push(ST(e,t)),e.chromGrid&&e.chromGridOpacity>0&&r.push(QT(e,t)),e.grid&&e.gridOpacity>0&&r.push(vT(e,t)),{name:"grid_layers",configurableVisibility:!1,resolve:{scale:{[yr(n.orient)]:"forced",fill:"independent",opacity:"independent"}},layer:r}}const Qw={anchor:"middle",frame:"group",offset:10,orient:"top",align:void 0,angle:0,baseline:"alphabetic",dx:0,dy:0,color:void 0,font:void 0,fontSize:12,fontStyle:"normal",fontWeight:"normal"},kT={orient:"left",anchor:"middle",align:"right",baseline:"middle",angle:0,fontSize:12},FT={orient:"top",anchor:"start",align:"left",baseline:"top",offset:-10,dx:10,fontSize:12},MT={start:0,middle:.5,end:1},RT={start:"left",middle:"center",end:"right"};function NT(n){if(!n)return;const t=Ce(n)?{text:n}:n;if(!t.text||t.orient=="none")return;const e={"track-title":kT,overlay:FT}[t.style]??{},r={...Qw,...e,...t};let i={},s={x:0,y:0};const o=MT[r.anchor??"middle"];switch(r.orient){case"top":s={x:o,y:1},i={baseline:"alphabetic",angle:0};break;case"right":s={x:1,y:1-o},i={baseline:"alphabetic",angle:90};break;case"bottom":s={x:o,y:0},i={baseline:"top",angle:0};break;case"left":s={x:0,y:o},i={baseline:"alphabetic",angle:-90};break}const a={...Qw,...i,...e,...t},l={xOffset:0,yOffset:0};switch(r.orient){case"top":l.yOffset=-a.offset;break;case"right":l.xOffset=a.offset;break;case"bottom":l.yOffset=a.offset;break;case"left":l.xOffset=-a.offset;break}return{configurableVisibility:!1,data:{values:[{}]},mark:{type:"text",tooltip:null,clip:!1,...s,...l,text:a.text,align:a.align??RT[a.anchor],angle:a.angle,baseline:a.baseline,dx:a.dx,dy:a.dy,color:a.color,font:a.font,size:a.fontSize,fontStyle:a.fontStyle,fontWeight:a.fontWeight}}}class Sw extends Et{constructor(e,r,i={}){const s={scrollbarSize:8,scrollbarPadding:2,scrollbarMinLength:20};super({params:[{name:"scrollbarOpacity",value:1}],opacity:{expr:"scrollbarOpacity"},data:{values:[{}]},mark:{type:"rect",fill:"#b0b0b0",fillOpacity:.6,stroke:"white",strokeWidth:1,strokeOpacity:1,cornerRadius:5,clip:!1},configurableVisibility:!1},e.layoutParent.context,e.layoutParent,e.view,"scrollbar-"+r,{blockEncodingInheritance:!0});D(this,me);D(this,Fr);D(this,Zc,St.ZERO);D(this,kt,St.ZERO);D(this,wo,St.ZERO);j(this,"viewportOffset",0);D(this,xo);this.config=s,F(this,Fr,r),F(this,xo,i.onViewportOffsetChange);const o=this.config.scrollbarPadding,a=this.config.scrollbarSize;F(this,Zc,C(this,Fr)=="vertical"?new St(()=>C(this,kt).x+C(this,kt).width-a-o,()=>C(this,kt).y+o+this.scrollOffset,()=>a,()=>T(this,me,zf).call(this)):new St(()=>C(this,kt).x+o+this.scrollOffset,()=>C(this,kt).y+C(this,kt).height-a-o,()=>T(this,me,zf).call(this),()=>a)),T(this,me,lg).call(this,this.viewportOffset),this.addInteractionEventListener("mousedown",(l,c)=>{if(c.stopPropagation(),T(this,me,wl).call(this)<=0)return;const u=g=>r=="vertical"?g.clientY:g.clientX;c.mouseEvent.preventDefault();const f=this.scrollOffset,h=u(c.mouseEvent),A=g=>{const m=T(this,me,wl).call(this);if(m<=0)return;const p=ts(u(g)-h+f,0,m);this.interpolateViewportOffset({x:T(this,me,vb).call(this,p)})},d=()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",d)};document.addEventListener("mouseup",d,!1),document.addEventListener("mousemove",A,!1)})}get scrollOffset(){return T(this,me,Bb).call(this,this.viewportOffset)}setViewportOffset(e,{notify:r=!0,syncSmoother:i=!1}={}){this.viewportOffset=ts(e,0,T(this,me,Hf).call(this)),i&&T(this,me,lg).call(this,this.viewportOffset),r&&C(this,xo)&&C(this,xo).call(this,this.viewportOffset)}render(e,r,i){super.render(e,C(this,Zc),i)}updateScrollbar(e,r){F(this,kt,e.flatten()),F(this,wo,r),this.setViewportOffset(this.viewportOffset,{notify:!1,syncSmoother:!0})}}Fr=new WeakMap,Zc=new WeakMap,kt=new WeakMap,wo=new WeakMap,xo=new WeakMap,me=new WeakSet,bb=function(){const e=C(this,Fr)=="horizontal"?"width":"height",r=C(this,kt)[e],i=C(this,wo)[e];return i>0?Math.min(1,r/i):1},cg=function(){const e=C(this,Fr)=="horizontal"?"width":"height";return Math.max(0,C(this,kt)[e]-2*this.config.scrollbarPadding)},zf=function(){const e=T(this,me,cg).call(this),r=T(this,me,bb).call(this)*e,i=this.config.scrollbarMinLength;return Math.min(e,Math.max(i,r))},wl=function(){return Math.max(0,T(this,me,cg).call(this)-T(this,me,zf).call(this))},Bb=function(e){const r=T(this,me,Hf).call(this),i=T(this,me,wl).call(this);return r<=0||i<=0?0:e/r*i},vb=function(e){const r=T(this,me,Hf).call(this),i=T(this,me,wl).call(this);return r<=0||i<=0?0:e/i*r},Hf=function(){const e=C(this,Fr)=="horizontal"?"width":"height";return Math.max(0,C(this,wo)[e]-C(this,kt)[e])},lg=function(e){this.interpolateViewportOffset=Rd(this.context.animator,r=>{this.setViewportOffset(r.x,{notify:!0,syncSmoother:!1})},35,.4,{x:e})};class TT extends ws{constructor(e,r,i={}){const s=r(),o=Object.keys(s.intervals);if(Wr.every(u=>!o.includes(u)))throw new Error("SelectionRect requires at least one of the channels 'x' or 'y' to be present in the selection.");const a={name:"selectionRect",configurableVisibility:!1,resolve:{scale:{x:"forced",y:"forced"}},data:{values:Dw(r())},encoding:{},layer:[]};o.includes("x")&&(a.encoding.x={field:"_x",type:null,title:null},a.encoding.x2={field:"_x2"}),o.includes("y")&&(a.encoding.y={field:"_y",type:null,title:null},a.encoding.y2={field:"_y2"}),a.layer.push({name:"selectionRectRect",mark:{type:"rect",clip:!0,fill:"#808080",fillOpacity:.05,stroke:"black",strokeWidth:1,strokeOpacity:.2,...i}});const l=u=>{const f=e.view.getScaleResolution(u);return`format(datum._${u}2 - datum._${u}, '.3s')`+(f.type==="locus"?" + 'b'":"")},c=i.measure=="inside"?9:i.measure=="outside"?-9:0;o.includes("x")&&c!=0&&a.layer.push({name:"selectionRectTextX",mark:{type:"text",align:"center",paddingX:5,dy:c,tooltip:null},encoding:{text:{expr:l("x")},y:o.includes("y")?{field:"_y2",type:null,title:null}:{value:1},y2:null}}),o.includes("y")&&c!=0&&a.layer.push({name:"selectionRectTextY",mark:{type:"text",align:"center",paddingY:5,dy:c,tooltip:null,angle:-90},encoding:{text:{expr:l("y")},x2:null}});super(a,e.layoutParent.context,e.layoutParent,e.view,"selectionRect",{blockEncodingInheritance:!0,contributesToScaleDomain:!1});j(this,"_selectionExpr");j(this,"_selectionListener");this._selectionExpr=r,this._selectionListener=()=>{var h;const u=r(),f=(h=this.flowHandle)==null?void 0:h.dataSource;if(!f)throw new Error("Cannot find selection rect data source handle!");f.updateDynamicData(Dw(u))},r.addListener(this._selectionListener)}dispose(){this._selectionExpr.removeListener(this._selectionListener),super.dispose()}}function Dw(n){const t=n.intervals.x,e=n.intervals.y;return!t&&!e?[]:[{_x:t==null?void 0:t[0],_x2:t==null?void 0:t[1],_y:e==null?void 0:e[0],_y2:e==null?void 0:e[1]}]}class PT{constructor(t,e,r){D(this,Tf);if(this.layoutParent=e,this.view=t,this.serial=r,this.background=void 0,this.backgroundStroke=void 0,this.axes={},this.gridLines={},this.scrollbars={},this.selectionRect=void 0,this.title=void 0,this.coords=St.ZERO,t.needsAxes.x||t.needsAxes.y){const i=t.spec,s="view"in i?i==null?void 0:i.view:void 0,o=LT(s);o&&(this.background=new Et(o,e.context,e,t,"background"+r,{blockEncodingInheritance:!0}));const a=OT(s);a&&(this.backgroundStroke=new Et(a,e.context,e,t,"backgroundStroke"+r,{blockEncodingInheritance:!0}));const l=NT(t.spec.title);if(l){const c=new Et(l,e.context,e,t,"title"+r,{blockEncodingInheritance:!0});this.title=c}}t.spec.viewportWidth!=null&&(this.scrollbars.horizontal=new Sw(this,"horizontal")),t.spec.viewportHeight!=null&&(this.scrollbars.vertical=new Sw(this,"vertical")),T(this,Tf,Qb).call(this)}*getChildren(){this.background&&(yield this.background),this.backgroundStroke&&(yield this.backgroundStroke),this.title&&(yield this.title),yield*Object.values(this.axes),yield*Object.values(this.gridLines),yield this.view,yield*Object.values(this.scrollbars),this.selectionRect&&(yield this.selectionRect)}async createAxes(){this.disposeAxisViews();const{view:t,axes:e,gridLines:r}=this,i=(a,l)=>{const c=a.getAxisProps();if(c===null)return;const u=c?{...c}:{};if(!u.orient){for(const f of Zu[l])if(!e[f]){u.orient=f;break}if(!u.orient)throw new Error("No slots available for an axis! Perhaps a LayerView has more than two children?")}if(u.title??(u.title=a.getTitle()),!Zu[l].includes(u.orient))throw new Error(`Invalid axis orientation "${u.orient}" on channel "${l}"!`);return u},s=async(a,l,c)=>{const u=i(a,l);if(u){if(e[u.orient])throw new Error(`An axis with the orient "${u.orient}" already exists!`);const f=new xw(u,a.scaleResolution.type,this.layoutParent.context,this.layoutParent,c);e[u.orient]=f,await f.initializeChildren()}},o=async(a,l,c)=>{const u=i(a,l);if(u&&(u.grid||u.chromGrid)){const f=new bT(u,a.scaleResolution.type,this.layoutParent.context,this.layoutParent,c);r[u.orient]=f,await f.initializeChildren()}};for(const a of["x","y"])if(t.needsAxes[a]){const l=t.resolutions.axis[a];if(!l)continue;await s(l,a,t)}for(const a of["x","y"])if(t.needsAxes[a]&&t.getConfiguredOrDefaultResolution(a,"axis")!="excluded"){const l=t.getAxisResolution(a);if(!l)continue;await o(l,a,t)}if(t instanceof ws){for(const a of t)for(const[l,c]of Object.entries(a.resolutions.axis)){const u=c.getAxisProps();u&&u.orient&&await s(c,l,a)}for(const a of t)for(const[l,c]of Object.entries(a.resolutions.axis)){const u=c.getAxisProps();u&&!u.orient&&await s(c,l,a)}}[...Object.values(e),...Object.values(r)].forEach(a=>a.visit(l=>{l instanceof Et&&l.resolve("scale")}))}disposeAxisViews(){for(const t of Object.values(this.axes))t.disposeSubtree();for(const t of Object.values(this.gridLines))t.disposeSubtree();this.axes={},this.gridLines={}}getOverhang(){const t=e=>{const r=this.axes[e];return r?Math.max(r.getPerpendicularSize()+(r.axisProps.offset??0),0):0};return new ot(t("top"),t("right"),t("bottom"),t("left")).add(this.view.getOverhang())}getOverhangAndPadding(){return this.getOverhang().add(this.view.getPadding())}}Tf=new WeakSet,Qb=function(){const t=this.view,e=r=>{this.view.context.glHelper.canvas.style.cursor=r};for(const[r,i]of t.paramMediator.paramConfigs){if(!("select"in i))continue;const s=nu(i.select);if(!dm(s))continue;const o=s.encodings,a=Object.fromEntries(o.map(I=>{const y=this.view.getScaleResolution(I),b=y==null?void 0:y.getScale();if(!b||!Ke(b.type))throw new Error(`No continuous scale found for interval selection param "${r}" on channel "${I}"! Scale type is "${(b==null?void 0:b.type)??"none"}".`);return[I,y]}));if(this.selectionRect)throw new Error("Only one interval selection per container is currently allowed!");let l=!1,c=!1,u=!1,f=null;const h=(I,y)=>Object.fromEntries(o.map(b=>[b,[Math.min(I[b],y[b]),Math.max(I[b],y[b])]])),A=t.paramMediator.createExpression(r),d=t.paramMediator.getSetter(r);i.value&&d({type:"interval",intervals:i.value});const g=()=>{d(fm(o)),e(null)};this.selectionRect=new TT(this,A,s.mark),this.selectionRect.initializeChildren();const m=I=>{const y={x:0,y:0},b=t.coords.normalizePoint(I.x,I.y,!0);for(const B of o){const E=a[B].getScale(),Q=E.invert(B=="x"?b.x:b.y);y[B]=Q+(["index","locus"].includes(E.type)?.5:0)}return y},p=I=>{var Q,k,S,P;const{intervals:y}=I,b=(N,U,H)=>{const J=(le,de)=>de==null?null:a[le].getScale()(de),V=J("x",N)??H,$=J("y",U)??H;return t.coords.denormalizePoint(V,$,!0)},B=b((Q=y.x)==null?void 0:Q[0],(k=y.y)==null?void 0:k[0],0),E=b((S=y.x)==null?void 0:S[1],(P=y.y)==null?void 0:P[1],1);return St.create(B.x,B.y,E.x-B.x,E.y-B.y)};t.addInteractionEventListener("mousedown",(I,y)=>{if(y.mouseEvent.button!=0)return;if(f=l?p(A()):null,f)e("grabbing"),c=!0;else{const k=y.point;if(gm(A())&&(c=!0),y.mouseEvent.shiftKey)g(),u=!0;else if(gm(A())){const P=(N,U)=>{t.removeInteractionEventListener("mouseup",P);const H=U.point;k.subtract(H).length<2&&g()};t.addInteractionEventListener("mouseup",P);return}else return}y.stopPropagation();const b=y.point,B=bt.fromMouseEvent(y.mouseEvent).subtract(b),E=k=>{const S=bt.fromMouseEvent(k).subtract(B);let P;if(f){const N=S.subtract(b),U=f.translate(N.x,N.y);P=h(m(new bt(U.x,U.y)),m(new bt(U.x2,U.y2)))}else P=h(m(b),m(S));for(const N of o){const U=a[N],{zoomExtent:H,scale:J}=U,V=P[N];if(["index","locus"].includes(J.type)&&(V[0]=Math.ceil(V[0]),V[1]=Math.ceil(V[1])),f){const $=V[1]-V[0],le=H[0],de=H[1];V[0]<le&&(V[0]=le,V[1]=le+$),V[1]>de&&(V[1]=de,V[0]=de-$)}else V[0]=Math.max(H[0],V[0]),V[1]=Math.min(H[1],V[1]);V[1]=Math.min(H[1],V[1])}d({type:"interval",intervals:P})},Q=()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",Q),u=!1,f&&(e("move"),f=null)};document.addEventListener("mousemove",E),document.addEventListener("mouseup",Q)}),t.addInteractionEventListener("click",(I,y)=>{y.mouseEvent.button==0&&c&&(y.stopPropagation(),c=!1)},!0);const w=I=>FS(A(),m(I));t.addInteractionEventListener("dblclick",(I,y)=>{w(y.point)&&(g(),y.stopPropagation())},!0),t.addInteractionEventListener("mousemove",(I,y)=>{w(y.point)?u||(l=!0,f||e("move")):(l=!1,f||e(null))})}};function LT(n){if(n!=null&&n.fill||n!=null&&n.fillOpacity||n!=null&&n.shadowOpacity)return{configurableVisibility:!1,data:{values:[{}]},mark:{color:n.fill,opacity:n.fillOpacity??(n.fill?1:0),type:"rect",clip:!1,tooltip:null,minHeight:1,minOpacity:0,shadowBlur:n.shadowBlur,shadowColor:n.shadowColor,shadowOffsetX:n.shadowOffsetX,shadowOffsetY:n.shadowOffsetY,shadowOpacity:n.shadowOpacity}}}function OT(n){if(!(!n||!n.stroke||n.strokeWidth===0||n.strokeOpacity===0))return{configurableVisibility:!1,resolve:{scale:{x:"excluded",y:"excluded"},axis:{x:"excluded",y:"excluded"}},data:{values:[{x:0,y:0,x2:1,y2:0},{x:1,y:0,x2:1,y2:1},{x:1,y:1,x2:0,y2:1},{x:0,y:1,x2:0,y2:0}]},mark:{size:n.strokeWidth??1,color:n.stroke??"lightgray",strokeCap:"square",opacity:n.strokeOpacity??1,type:"rule",clip:!1,tooltip:null},encoding:{x:{field:"x",type:"quantitative",scale:null},y:{field:"y",type:"quantitative",scale:null},x2:{field:"x2"},y2:{field:"y2"}}}}class UT extends rc{constructor(e,r,i,s,o,a,l){super(e,r,i,s,o,l);D(this,ie);D(this,Io,1/0);D(this,Eo,10);D(this,ct,[]);D(this,Vn,{});D(this,$c,0);this.spec=e,F(this,Eo,e.spacing??10),F(this,Io,a),F(this,ct,[]),this.wrappingFacet=!1}appendChild(e){this.appendChildView(e)}appendChildView(e){return this.insertChildViewAt(e,C(this,ct).length)}insertChildViewAt(e,r){e.layoutParent??(e.layoutParent=this);const i=new PT(e,this,C(this,$c));return cb(this,$c)._++,C(this,ct).splice(r,0,i),i}removeChildView(e){const r=C(this,ct).findIndex(i=>i.view===e);if(r<0)throw new Error("Not my child view!");this.removeChildAt(r)}removeChildAt(e){const r=C(this,ct)[e];if(!r)throw new Error("Child index out of range!");T(this,ie,ug).call(this,r),C(this,ct).splice(e,1)}setChildren(e){for(const r of C(this,ct))T(this,ie,ug).call(this,r);F(this,ct,[]);for(const r of e)this.appendChild(r)}get children(){return C(this,ct).map(e=>e.view)}get childCount(){return C(this,ct).length}async createAxes(){await this.syncSharedAxes(),await Promise.all(C(this,ct).map(e=>e.createAxes()))}async syncSharedAxes(){for(const r of Object.values(C(this,Vn)))r.disposeSubtree();F(this,Vn,{});const e=[];for(const r of Wr){const i=this.resolutions.axis[r];if(!i)continue;const s=i.getAxisProps();if(!s)continue;const o={title:i.getTitle(),orient:Zu[r][0],...s},a=new xw(o,i.scaleResolution.type,this.context,this,this);e.push(a.initializeChildren()),C(this,Vn)[r]=a}await Promise.all(e)}*[Symbol.iterator](){for(const e of C(this,ct))yield*e.getChildren();for(const e of Object.values(C(this,Vn)))yield e}getOverhang(){return T(this,ie,Db).call(this).union(T(this,ie,_f).call(this))}getSize(){return this._cache("size",()=>new Cr(T(this,ie,Ag).call(this,"column"),T(this,ie,Ag).call(this,"row")).addPadding(T(this,ie,_f).call(this)))}render(e,r,i={}){if(super.render(e,r,i),!this.isConfiguredVisible())return;this.layoutParent||(r=r.shrink(this.getPadding())),r=r.shrink(T(this,ie,_f).call(this)),e.pushView(this,r);const s={devicePixelRatio:e.getDevicePixelRatio()},o=Vy(T(this,ie,fg).call(this,"column"),r.width,s),a=Vy(T(this,ie,fg).call(this,"row"),r.height,s),l=new ww(C(this,ie,Vi).length,C(this,Io)??1/0),c=u=>Math.round(u*devicePixelRatio)/devicePixelRatio;for(const[u,f]of C(this,ie,Vi).entries()){const{view:h,axes:A,gridLines:d,background:g,backgroundStroke:m,title:p,selectionRect:w}=f,[I,y]=l.getCellCoords(u),b=o[T(this,ie,hg).call(this,"column",I)],B=a[T(this,ie,hg).call(this,"row",y)],E=h.getViewportSize(),Q=h.getSize(),k=h.getOverhang(),S=b.location-k.left,P=B.location-k.top,N=(Le,Yt)=>(Le[Yt].grow?(Yt=="width"?b:B).size:Le[Yt].px)+k[Yt],U=N(E,"width"),H=N(E,"height"),J=N(Q,"width"),V=N(Q,"height"),$=f.scrollbars.horizontal,le=f.scrollbars.vertical,de=$?()=>c($.viewportOffset):()=>0,ge=le?()=>c(le.viewportOffset):()=>0,Me=new St(()=>r.x+S,()=>r.y+P,()=>U,()=>H),Bn=h.isScrollable(),vn=Bn?new St(()=>r.x+S-de(),()=>r.y+P-ge(),()=>J,()=>V):Me;f.coords=Me;const Mr=i.clipRect?Me.intersect(i.clipRect):Me;g==null||g.render(e,Mr,{...i,clipRect:void 0});for(const Le of Object.values(d))Le.render(e,Me,i);const Po=zT(h)||Bn;Po&&h.render(e,vn,{...i,clipRect:Mr}),m==null||m.render(e,Mr,{...i,clipRect:void 0});for(const[Le,Yt]of Object.entries(A)){const vt=Le=="left"||Le=="right"?"vertical":"horizontal",_=f.scrollbars[vt],ee=_?Me.modify(vt=="vertical"?{y:()=>vn.y,height:V}:{x:()=>vn.x,width:J}):Me,re=kw(ee,Le,Yt);let L=i.clipRect;_&&(L=re.intersect(L).intersect(_?Me.modify(vt=="vertical"?{x:-1e5,width:2e5}:{y:-1e5,height:2e5}):void 0)),Yt.render(e,re,{...i,clipRect:L})}for(const Le of Object.values(C(this,Vn))){const vt=Le.axisProps.orient;(vt=="left"&&I==0||vt=="right"&&I==l.nCols-1||vt=="top"&&y==0||vt=="bottom"&&y==l.nRows-1)&&Le.render(e,kw(Me.shrink(f.view.getOverhang()),vt,Le),i)}Po||h.render(e,vn,i),w==null||w.render(e,vn,i);for(const Le of Object.values(f.scrollbars))Le.updateScrollbar(Me,vn),Le.render(e,r,i);p==null||p.render(e,Me,i)}e.popView(this)}propagateInteractionEvent(e){if(this.handleInteractionEvent(void 0,e,!0),e.stopped)return;const r=C(this,ie,Vi).find(s=>s.coords.containsPoint(e.point.x,e.point.y));for(const s of Object.values((r==null?void 0:r.scrollbars)??{}))if(s.coords.containsPoint(e.point.x,e.point.y)&&(s.propagateInteractionEvent(e),e.stopped))return;const i=r==null?void 0:r.view;if(i){if(i.propagateInteractionEvent(e),e.stopped)return;(i instanceof Et||i instanceof ws)&&IT(e,r.coords,s=>T(this,ie,kb).call(this,r.coords,r.view,s),this.context.getCurrentHover(),this.context.animator)}e.stopped||this.handleInteractionEvent(void 0,e,!1)}getDefaultResolution(e,r){return"independent"}}Io=new WeakMap,Eo=new WeakMap,ct=new WeakMap,Vn=new WeakMap,$c=new WeakMap,ie=new WeakSet,Vi=function(){return C(this,ct).filter(e=>e.view.isConfiguredVisible())},Sb=function(){return new ww(C(this,ie,Vi).length,C(this,Io)??1/0)},ug=function(e){e.disposeAxisViews();for(const r of e.getChildren())r.disposeSubtree()},xl=function(e){const r=e=="column"?"width":"height",i=(s,o)=>s.map(a=>{const c=C(this,ie,Vi)[a].getOverhangAndPadding();return e=="column"?o?c.right:c.left:o?c.bottom:c.top}).reduce((a,l)=>Math.max(a,l),0);return this._cache(`size/directionSizes/${e}`,()=>C(this,ie,Sb)[e=="column"?"colIndices":"rowIndices"].map(s=>({axisBefore:i(s,0),axisAfter:i(s,1),view:AR(s.map(o=>C(this,ie,Vi)[o].view.getViewportSize()[r]))})))},fg=function(e){const r=T(this,ie,xl).call(this,e),i=[];i.push($a);for(const[s,o]of r.entries())s>0&&i.push({px:C(this,Eo),grow:0}),(s==0||this.wrappingFacet)&&i.push($a),i.push({px:o.axisBefore,grow:0}),i.push(o.view),i.push({px:o.axisAfter,grow:0}),(s==r.length-1||this.wrappingFacet)&&i.push($a);return i},Ag=function(e){let r=0,i=0;const s=e=="row"?this.spec.height:this.spec.width;if(s||s===0)return Jy(s);const o=T(this,ie,xl).call(this,e);for(const[a,l]of o.entries())a>0&&(i+=C(this,Eo)),(a==0||this.wrappingFacet)&&(i+=0),i+=l.axisBefore,i+=l.view.px??0,r+=l.view.grow??0,i+=l.axisAfter,(a==o.length-1||this.wrappingFacet)&&(i+=0);return{px:i,grow:r}},hg=function(e,r){return e=="row"&&this.wrappingFacet?1+6*r+2:2+4*r+1},Db=function(){const e=T(this,ie,xl).call(this,"column"),r=T(this,ie,xl).call(this,"row");return!e.length||!r.length?ot.zero():new ot(r.at(0).axisBefore,e.at(-1).axisAfter,r.at(-1).axisAfter,e.at(0).axisBefore)},_f=function(){const e=r=>{const i=Td[r],s=C(this,Vn)[i];return(s==null?void 0:s.axisProps.orient)!==r?0:Math.max(s.getPerpendicularSize()+(s.axisProps.offset??0),0)};return new ot(e("top"),e("right"),e("bottom"),e("left"))},kb=function(e,r,i){for(const[s,o]of Object.entries(GT(r))){if(o.size<=0)continue;const a=e.normalizePoint(i.x,i.y),l=e.normalizePoint(i.x+i.xDelta,i.y+i.yDelta),c={x:l.x-a.x,y:l.y-a.y};for(const u of o)u.zoom(2**i.zDelta,s=="y"?1-a[s]:a[s],s=="x"?c.x:-c.y)}this.context.animator.requestRender()};function GT(n){const t={x:new Set,y:new Set};return n.visit(e=>{for(const[r,i]of Object.entries(t)){const s=e.getScaleResolution(r);s&&s.isZoomable()&&i.add(s)}}),t}function zT(n){let t=!0;return n.visit(e=>{e instanceof Et&&t&&(t=e.mark.properties.clip===!0)}),t}function kw(n,t,e){const r=e.axisProps,i=e.getPerpendicularSize();if(t=="bottom")return n.translate(0,n.height+r.offset).modify({height:i});if(t=="top")return n.translate(0,-i-r.offset).modify({height:i});if(t=="left")return n.translate(-i-r.offset,0).modify({width:i});if(t=="right")return n.translate(n.width+r.offset,0).modify({width:i})}const U0=class U0 extends UT{constructor(e,r,i,s,o){super(e,r,i,s,o,$u(e)?e.columns:sc(e)?1:1/0);D(this,Ni);this.spec=e}async initializeChildren(){const e=this.spec,r=$u(e)?e.concat:sc(e)?e.vconcat:e.hconcat;this.setChildren(await Promise.all(r.map((i,s)=>this.context.createOrImportView(i,this,this,"grid"+s)))),await this.createAxes()}async addChildSpec(e,r){return T(this,Ni,dg).call(this).addChildSpec(e,r)}async removeChildAt(e){await T(this,Ni,dg).call(this).removeChildAt(e)}getDefaultResolution(e,r){return r=="axis"?"independent":sc(this.spec)&&e==="x"||Rw(this.spec)&&e==="y"?"shared":"independent"}};Ni=new WeakSet,Fb=function(){const e=this.spec;let r;return $u(e)?r=e.concat:sc(e)?r=e.vconcat:r=e.hconcat,{specs:r,insertAt:(i,s)=>{r.splice(i,0,s)},removeAt:i=>{r.splice(i,1)}}},dg=function(){return new yw(this,{getChildSpecs:T(this,Ni,Fb).bind(this),insertView:(e,r)=>this.insertChildViewAt(e,r),removeView:e=>lb(U0.prototype,this,"removeChildAt").call(this,e),prepareView:async(e,r,i)=>{await i.createAxes(),await this.syncSharedAxes()},afterRemove:async()=>{await this.syncSharedAxes()},defaultName:e=>"grid"+this.childCount})};let ic=U0;const Fw="viewRoot";class HT{constructor(t={}){D(this,bo,new Map);this.options={allowImport:!0,wrapRoot:!0,...t};const e=r=>(i,s,o,a,l)=>new r(i,s,o,a,i.name??l);this.addViewType(Od,e(ws)),this.addViewType(Ld,e(Et)),this.addViewType(sc,e(ic)),this.addViewType(Rw,e(ic)),this.addViewType($u,e(ic)),this.addViewType(YT,()=>{throw new Error("SampleView is not supported by the @genome-spy/core package. Use @genome-spy/app instead!")})}addViewType(t,e){C(this,bo).set(t,e)}createView(t,e,r,i,s){for(const[o,a]of C(this,bo))if(o(t))return a(t,e,r,i,s);throw new Error("Invalid spec, cannot figure out the view type from the properties: "+JSON.stringify([...Object.keys(t)]))}isViewSpec(t){const e=[...C(this,bo).keys()].filter(r=>r(t));if(e.length>1)throw new Error("Ambiguous spec. Cannot create a view!");return e.length==1}async createOrImportView(t,e,r,i,s,o){let a;if(VT(t)){let u;if("url"in t.import)if(this.options.allowImport)u=await IR(t,i.getBaseUrl(),e);else throw new mr("Importing views is not allowed!",r);else if("template"in t.import)u=Mw(t.import.template,i);else throw new Error("Invalid import: "+JSON.stringify(t));o==null||o(u),_T(u,t),a=u}else a=t;const l=u=>{var f;return(f=u==null?void 0:u.params)==null?void 0:f.some(h=>mm(h)&&nu(h.select).type=="interval")};!i&&this.options.wrapRoot&&(Ld(a)||Od(a)||l(a))&&s===Fw&&(a={name:"implicitRoot",vconcat:[a]});const c=this.createView(a,e,r,i,s);return c instanceof rc&&await c.initializeChildren(),c}}bo=new WeakMap;function Mw(n,t){var r,i;const e=(i=(r=t.spec)==null?void 0:r.templates)==null?void 0:i[n];if(e)return structuredClone(e);if(t.dataParent)return Mw(n,t.dataParent);throw new Error(`Cannot find template "${n}" in current view or its ancestors!`)}function _T(n,t){t.name!=null&&(n.name=t.name);const e=Xe(t.params)?t.params:et(t.params)?Object.entries(t.params).map(([r,i])=>({name:r,value:i})):[];if(e.length){n.params??(n.params=[]);for(const r of e){const i=n.params.findIndex(s=>s.name==r.name);i>=0&&(n.params[i]=r)}for(const r of e)n.params.some(i=>i.name==r.name)||n.params.push(r)}}function Ld(n){return"mark"in n&&(Ce(n.mark)||et(n.mark))}function Od(n){return"layer"in n&&et(n.layer)}function VT(n){return"import"in n}function sc(n){return"vconcat"in n&&Xe(n.vconcat)}function Rw(n){return"hconcat"in n&&Xe(n.hconcat)}function $u(n){return"concat"in n&&Xe(n.concat)}function YT(n){return"samples"in n&&et(n.samples)&&"spec"in n&&et(n.spec)}class JT{constructor(t,e){D(this,Bo);this.point=t,this.uiEvent=e,this.stopped=!1,this.target=void 0}stopPropagation(){this.stopped=!0}get type(){return this.uiEvent.type}get proxiedMouseEvent(){return C(this,Bo)||F(this,Bo,qT(this.mouseEvent)),C(this,Bo)}get mouseEvent(){if(this.uiEvent instanceof MouseEvent)return this.uiEvent;throw new Error("Not a MouseEvent!")}}Bo=new WeakMap;function qT(n){const t=r=>r===null||typeof r!="object"&&typeof r!="function",e={get(r,i,s){const o=Reflect.get(r,i,r);if(!t(o))throw new Error(`Access to non-primitive property "${String(i)}" is not allowed.`);return o},getPrototypeOf(){return null},ownKeys(r){return Reflect.ownKeys(r).filter(s=>t(r[s])).map(s=>typeof s=="symbol"?s:String(s))},getOwnPropertyDescriptor(r,i){const s=Reflect.getOwnPropertyDescriptor(r,i);if(s&&!("get"in s||"set"in s)&&t(s.value))return{value:s.value,writable:!!s.writable,enumerable:!!s.enumerable,configurable:!!s.configurable}},has(r,i){return i in r?t(r[i]):!1}};return new Proxy(n,e)}class KT{constructor(t,e){this.animator=t,this.disabled=!!e,this.maxDistance=500,this.callback=null,this.targetValue=0,this.lastValue=0,this.smoother=Rd(t,r=>{var s;const i=r.x-this.lastValue;this.lastValue=r.x,(s=this.callback)==null||s.call(this,i)},40,.1,{x:0})}cancel(){this.lastValue!==this.targetValue&&(this.targetValue=Ig([this.lastValue,this.targetValue],.3),this.smoother({x:this.targetValue}))}setMomentum(t,e){if(this.disabled){e(t);return}this.callback=e;const r=ts(this.targetValue+t-this.lastValue,-this.maxDistance,this.maxDistance);this.targetValue=this.lastValue+r,this.smoother({x:this.targetValue})}}function jT(n){const t={},e=["string","number","boolean"],r=["wheelDelta","wheelDeltaX","wheelDeltaY"];for(const i in n){const s=i;!r.includes(i)&&e.includes(typeof n[s])&&(t[s]=n[s])}return t}class WT{constructor({viewRoot:t,glHelper:e,tooltip:r,animator:i,emitEvent:s,tooltipHandlers:o,renderPickingFramebuffer:a,getDevicePixelRatio:l}){D(this,Pf);D(this,vo);D(this,Ti);D(this,gt);D(this,el);D(this,tl);D(this,nl);D(this,Qo);D(this,rl);D(this,_e);D(this,Pi);D(this,So);D(this,Yn);F(this,vo,t),F(this,Ti,e),F(this,gt,r),F(this,el,i),F(this,tl,s),F(this,nl,o),F(this,Qo,a),F(this,rl,l),F(this,_e,void 0),F(this,Pi,new KT(C(this,el))),F(this,So,void 0),F(this,Yn,!1)}getCurrentHover(){return C(this,_e)}registerMouseEvents(){const t=C(this,Ti).canvas;let e=performance.now(),r=!1;const i=s=>{var l;const o=performance.now(),a=o-e<200;if(s instanceof MouseEvent){const c=t.getBoundingClientRect(),u=new bt(s.clientX-c.left-t.clientLeft,s.clientY-c.top-t.clientTop);s.type=="mousemove"&&!a&&(C(this,gt).handleMouseMove(s),F(this,Yn,!1),s.buttons==0&&!Bw()&&(C(this,Qo).call(this),T(this,Pf,Mb).call(this,u.x,u.y)));const f=h=>{C(this,vo).propagateInteractionEvent(new JT(u,h)),C(this,Yn)||C(this,gt).clear()};if(s.type!="wheel"&&C(this,Pi).cancel(),(s.type=="mousedown"||s.type=="mouseup")&&!Bw())C(this,Qo).call(this);else if(s.type=="wheel"){e=o,F(this,Yn,!1);const h=s;if(Math.abs(h.deltaX)>Math.abs(h.deltaY))F(this,_e,null),C(this,Pi).cancel();else{const A=jT(h);C(this,Pi).setMomentum(h.deltaY*(h.deltaMode?80:1),d=>{const g=new WheelEvent("wheel",{...A,deltaMode:0,deltaX:0,deltaY:d});f(g)}),h.preventDefault();return}}if(s.type=="click"){if(r)return;const h=C(this,_e)?{type:s.type,viewPath:C(this,_e).mark.unitView.getLayoutAncestors().map(A=>A.name).reverse(),datum:C(this,_e).datum}:{type:s.type,viewPath:null,datum:null};C(this,tl).call(this,"click",h)}(s.type!="click"||((l=C(this,So))==null?void 0:l.subtract(bt.fromMouseEvent(s)).length)<3)&&f(s)}};["mousedown","mouseup","wheel","click","mousemove","gesturechange","contextmenu","dblclick"].forEach(s=>t.addEventListener(s,i)),t.addEventListener("mousedown",s=>{F(this,So,bt.fromMouseEvent(s)),C(this,gt).sticky?(C(this,gt).sticky=!1,C(this,gt).clear(),r=!0):r=!1;const o=()=>{document.addEventListener("mouseup",()=>C(this,gt).popEnabledState(),{once:!0}),C(this,gt).pushEnabledState(!1)};if(s.button==2||s.shiftKey||s.ctrlKey||s.metaKey)o();else if(C(this,gt).visible){const a=setTimeout(()=>{r=!0,C(this,gt).sticky=!0},400),l=()=>clearTimeout(a);document.addEventListener("mouseup",l,{once:!0}),document.addEventListener("mousemove",l,{once:!0})}}),t.addEventListener("dragstart",s=>s.stopPropagation()),t.addEventListener("mouseout",()=>{C(this,gt).clear(),F(this,_e,null)})}updateTooltip(t,e){if(!C(this,Yn)||!t)C(this,gt).updateWithDatum(t,e),F(this,Yn,!0);else throw new Error("Tooltip has already been updated! Duplicate event handler?")}}vo=new WeakMap,Ti=new WeakMap,gt=new WeakMap,el=new WeakMap,tl=new WeakMap,nl=new WeakMap,Qo=new WeakMap,rl=new WeakMap,_e=new WeakMap,Pi=new WeakMap,So=new WeakMap,Yn=new WeakMap,Pf=new WeakSet,Mb=function(t,e){var o;const r=C(this,rl).call(this),i=aF(C(this,Ti).gl,C(this,Ti)._pickingBufferInfo,t*r,e*r),s=i[0]|i[1]<<8|i[2]<<16|i[3]<<24;if(s==0){F(this,_e,null);return}if(s!==((o=C(this,_e))==null?void 0:o.uniqueId)&&F(this,_e,null),C(this,_e)||C(this,vo).visit(a=>{if(a instanceof Et){if(a.mark.isPickingParticipant()&&[...a.facetCoords.values()].some(l=>l.containsPoint(t,e))){const l=a.getCollector().findDatumByUniqueId(s);l&&F(this,_e,{mark:a.mark,datum:l,uniqueId:s})}if(C(this,_e))return tc}}),C(this,_e)){const a=C(this,_e).mark;this.updateTooltip(C(this,_e).datum,async l=>{if(!a.isPickingParticipant())return;const c=a.properties.tooltip;if(c!==null){const u=(c==null?void 0:c.handler)??"default",f=C(this,nl)[u];if(!f)throw new Error("No such tooltip handler: "+u);return f(l,a,c==null?void 0:c.params)}})}};class Nw{constructor(t){this.globalOptions=t}pushView(t,e){}popView(t){}renderMark(t,e){}getDevicePixelRatio(){return 1}}class Ud extends Nw{constructor(e,r){super(e);D(this,Lf);D(this,il,[0,0,0,0]);D(this,nn);D(this,sl,[]);D(this,Do);D(this,ol);D(this,al,new Set);D(this,cl);D(this,ko,1);D(this,ll,{width:0,height:0});if(F(this,ol,r.webGLHelper),F(this,Do,r.framebufferInfo),F(this,ko,r.devicePixelRatio),F(this,ll,r.canvasSize),r.clearColor){const i=Ar(r.clearColor).rgb();F(this,il,[i.r/255,i.g/255,i.b/255,i.opacity])}}getDevicePixelRatio(){return C(this,ko)}pushView(e,r){C(this,al).add(e),F(this,cl,r)}renderMark(e,r){if(this.globalOptions.picking&&!e.isPickingParticipant())return;const i=e.render(r);i&&C(this,sl).push({mark:e,callback:i,coords:C(this,cl),clipRect:r.clipRect})}render(){if(C(this,nn)||T(this,Lf,Rb).call(this),C(this,nn).length==0)return;const e=C(this,ol).gl,r=C(this,Do);r?(e.bindFramebuffer(e.FRAMEBUFFER,r.framebuffer),e.viewport(0,0,r.width,r.height)):e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.disable(e.SCISSOR_TEST),e.clearColor(...C(this,il)),e.clear(e.COLOR_BUFFER_BIT);for(const i of C(this,al))i.onBeforeRender();for(const i of C(this,nn))i();C(this,Do)&&e.bindFramebuffer(e.FRAMEBUFFER,null)}}il=new WeakMap,nn=new WeakMap,sl=new WeakMap,Do=new WeakMap,ol=new WeakMap,al=new WeakMap,cl=new WeakMap,ko=new WeakMap,ll=new WeakMap,Lf=new WeakSet,Rb=function(){F(this,nn,[]);let e=!0,r=!0;const i=a=>()=>{e&&a()},s=a=>()=>{e&&r&&a()},o=kl(C(this,sl).reverse(),a=>a.mark);for(const[a,l]of[...o.entries()].reverse()){if(!a.isReady())continue;C(this,nn).push(()=>{e=a.unitView.getEffectiveOpacity()>0}),C(this,nn).push(...a.prepareRender(this.globalOptions).map(u=>i(u)));let c;for(const u of l){const f=u.coords;f.equals(c)||C(this,nn).push(i(()=>{r=a.setViewport(C(this,ll),C(this,ko),f,u.clipRect)})),C(this,nn).push(s(u.callback)),c=u.coords}}};class XT extends Nw{constructor(...t){super({}),this.contexts=t}pushView(t,e){for(const r of this.contexts)r.pushView(t,e)}popView(t){for(const e of this.contexts)e.popView(t)}renderMark(t,e){for(const r of this.contexts)r.renderMark(t,e)}}class ZT{constructor({viewRoot:t,glHelper:e,getBackground:r,broadcast:i,onLayoutComputed:s}){D(this,ul);D(this,Li);D(this,fl);D(this,Fo);D(this,Al);D(this,Oi);D(this,Ui);D(this,Gi);F(this,ul,t),F(this,Li,e),F(this,fl,r),F(this,Fo,i),F(this,Al,s),F(this,Oi,void 0),F(this,Ui,void 0),F(this,Gi,!1)}computeLayout(){const t=C(this,ul);if(!t)return;C(this,Fo).call(this,"layout");const e=C(this,Li).getLogicalCanvasSize();if(isNaN(e.width)||isNaN(e.height)){console.log(`NaN in canvas size: ${e.width}x${e.height}. Skipping computeLayout().`);return}const r={webGLHelper:C(this,Li),canvasSize:e,devicePixelRatio:window.devicePixelRatio??1};F(this,Oi,new Ud({picking:!1},{...r,clearColor:C(this,fl).call(this)})),F(this,Ui,new Ud({picking:!0},{...r,framebufferInfo:C(this,Li)._pickingBufferInfo})),t.render(new XT(C(this,Oi),C(this,Ui)),St.create(0,0,e.width,e.height)),C(this,Al).call(this),C(this,Fo).call(this,"layoutComputed")}renderAll(){var t;(t=C(this,Oi))==null||t.render(),F(this,Gi,!0)}renderPickingFramebuffer(){C(this,Gi)&&(C(this,Ui).render(),F(this,Gi,!1))}}ul=new WeakMap,Li=new WeakMap,fl=new WeakMap,Fo=new WeakMap,Al=new WeakMap,Oi=new WeakMap,Ui=new WeakMap,Gi=new WeakMap;function $T(n){const t=o=>{throw new Error("ViewContext."+o+" is not configured.")},e={dataFlow:n.dataFlow??t("dataFlow"),glHelper:n.glHelper??t("glHelper"),animator:n.animator??t("animator"),genomeStore:n.genomeStore,fontManager:n.fontManager??t("fontManager"),createOrImportView:async function(o,a,l,c,u){const f=n.createOrImportViewWithContext;return f?f(e,o,a,l,c,u):Promise.reject(new Error("ViewContext.createOrImportView is not configured."))}},r=["requestLayoutReflow","updateTooltip","getNamedDataFromProvider","getCurrentHover","setDataLoadingStatus","addKeyboardListener","addBroadcastListener","removeBroadcastListener","highlightView","isViewConfiguredVisible","isViewSpec"],i=n,s=e;for(const o of r)s[o]=i[o]??(()=>t(o));return e}function e6({glHelper:n,viewRoot:t,logicalWidth:e,logicalHeight:r,devicePixelRatio:i,clearColor:s="white"}){e??(e=n.getLogicalCanvasSize().width),r??(r=n.getLogicalCanvasSize().height),i??(i=window.devicePixelRatio??1);const o=n.gl,a=Math.floor(e*i),l=Math.floor(r*i),c=FC(o,[{format:o.RGBA,type:o.UNSIGNED_BYTE,minMag:o.LINEAR,wrap:o.CLAMP_TO_EDGE}],a,l),u=new Ud({picking:!1},{webGLHelper:n,canvasSize:{width:e,height:r},devicePixelRatio:i,clearColor:s,framebufferInfo:c});return t.render(u,St.create(0,0,e,r)),u.render(),cF(o,c,"image/png")}BA("fasta",iT);class t6{constructor(t,e,r={}){D(this,Re);D(this,Mo,[]);D(this,zi);D(this,Ro);D(this,No);D(this,Hi);D(this,pt);D(this,hl,new rQ);D(this,_i,new Tp);D(this,To,new Tp);this.container=t,this.options=r,r.inputBindingContainer??(r.inputBindingContainer="default"),this.spec=e,this.viewFactory=new HT,this.namedDataProviders=[],this.animator=new XN(()=>this.renderAll()),this.genomeStore=void 0,this.viewVisibilityPredicate=i=>i.isVisibleInSpec(),this.tooltipHandlers={default:hT,refseqgene:oT,...r.tooltipHandlers??{}},this.viewRoot=void 0,F(this,No,new TS(t,r)),this.dpr=window.devicePixelRatio}registerNamedDataProvider(t){this.namedDataProviders.unshift(t)}getNamedDataFromProvider(t){for(const e of this.namedDataProviders){const r=e(t);if(r)return r}}updateNamedData(t,e){const r=this.viewRoot.context.dataFlow.findNamedDataSource(t);if(!r)throw new Error("No such named data source: "+t);r.dataSource.updateDynamicData(e),this.animator.requestRender()}addEventListener(t,e){C(this,_i).add(t,e)}removeEventListener(t,e){C(this,_i).remove(t,e)}broadcast(t,e){const r={type:t,payload:e};this.viewRoot.visit(i=>i.handleBroadcast(r)),C(this,To).emit(t,r)}destroy(){const t=C(this,Re,Vf);for(this.container.classList.remove("genome-spy"),t.classList.remove("loading"),C(this,hl).removeAll(),C(this,Mo).forEach(e=>e()),C(this,pt).finalize(),C(this,No).remove();this.container.firstChild;)this.container.firstChild.remove()}async launch(){var t,e;try{return T(this,Re,Pb).call(this),await T(this,Re,Lb).call(this),this.registerMouseEvents(),this.computeLayout(),this.animator.requestRender(),!0}catch(r){const i=`${r.view?`At "${r.view.getPathString()}": `:""}${r.toString()}`;return console.error(r.stack),((e=(t=this.options).onError)==null?void 0:e.call(t,r,this.container))||Zv(this.container,i),!1}finally{C(this,Re,Vf).classList.remove("loading"),window.setTimeout(()=>{this.loadingMessageElement.style.display="none"},2e3)}}async initializeVisibleViewData(){this.viewRoot&&(await JN(this.viewRoot,this.viewRoot.context.dataFlow,this.viewRoot.context.fontManager),this.viewRoot._invalidateCacheByPrefix("size","progeny"),C(this,pt).invalidateSize(),this.computeLayout(),this.animator.requestRender())}registerMouseEvents(){C(this,Hi).registerMouseEvents()}updateTooltip(t,e){C(this,Hi).updateTooltip(t,e)}exportCanvas(t,e,r,i="white"){const s=e6({glHelper:C(this,pt),viewRoot:this.viewRoot,logicalWidth:t,logicalHeight:e,devicePixelRatio:r,clearColor:i});return this.computeLayout(),this.renderAll(),s}getLogicalCanvasSize(){return C(this,pt).getLogicalCanvasSize()}computeLayout(){C(this,zi).computeLayout()}renderAll(){C(this,zi).renderAll()}renderPickingFramebuffer(){C(this,zi).renderPickingFramebuffer()}getSearchableViews(){const t=[];return this.viewRoot.visit(e=>{e instanceof Et&&e.getDataAccessor("search")&&t.push(e)}),t}getNamedScaleResolutions(){const t=new Map;return this.viewRoot.visit(e=>{for(const r of Object.values(e.resolutions.scale))r.name&&t.set(r.name,r)}),t}}Mo=new WeakMap,zi=new WeakMap,Ro=new WeakMap,No=new WeakMap,Hi=new WeakMap,pt=new WeakMap,hl=new WeakMap,_i=new WeakMap,To=new WeakMap,Re=new WeakSet,Vf=function(){return this.container.querySelector(".canvas-wrapper")},Nb=function(){C(this,No).initialize(this.viewRoot)},Tb=function(){const t=this.viewRoot.paramMediator.allocateSetter("devicePixelRatio",this.dpr),e=()=>{C(this,pt).invalidateSize(),this.dpr=window.devicePixelRatio,t(this.dpr),this.computeLayout(),this.renderAll()};if(this.viewRoot.getSize().isGrowing()){const s=new ResizeObserver(e);s.observe(this.container),C(this,Mo).push(()=>s.disconnect())}let r=null;const i=()=>{r!=null&&(r(),e());const s=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);s.addEventListener("change",i),r=()=>{s.removeEventListener("change",i)}};i(),r&&C(this,Mo).push(r)},Pb=function(){const{canvasWrapper:t,loadingMessageElement:e,loadingIndicatorsElement:r,tooltip:i}=Xv(this.container);F(this,pt,new iF(t,()=>this.viewRoot?ER(this.viewRoot):{width:void 0,height:void 0},{powerPreference:this.options.powerPreference??"default"})),this.loadingMessageElement=e,this.loadingIndicatorsElement=r,this.tooltip=i,F(this,Ro,new tQ(r))},Lb=async function(){await T(this,Re,Ob).call(this);const t=T(this,Re,Ub).call(this);await T(this,Re,Gb).call(this,t),await YN(this.viewRoot,t.dataFlow,t.fontManager,e=>this.broadcast("dataFlowBuilt",e)),T(this,Re,zb).call(this,t)},Ob=async function(){this.spec.genome&&(this.genomeStore=new ZN(this.spec.baseUrl),await this.genomeStore.initialize(this.spec.genome))},Ub=function(){return $T({dataFlow:new uw,glHelper:C(this,pt),animator:this.animator,genomeStore:this.genomeStore,fontManager:new tT(C(this,pt)),updateTooltip:this.updateTooltip.bind(this),getNamedDataFromProvider:this.getNamedDataFromProvider.bind(this),getCurrentHover:()=>C(this,Hi).getCurrentHover(),setDataLoadingStatus:(t,e,r)=>C(this,Ro).setDataLoadingStatus(t,e,r),addKeyboardListener:(t,e)=>{C(this,hl).add(t,e)},addBroadcastListener:(t,e)=>C(this,To).add(t,e),removeBroadcastListener:(t,e)=>C(this,To).remove(t,e),isViewConfiguredVisible:this.viewVisibilityPredicate,isViewSpec:t=>this.viewFactory.isViewSpec(t),createOrImportViewWithContext:(t,e,r,i,s,o)=>this.viewFactory.createOrImportView(e,t,r,i,s,o),highlightView:nQ(this.container)})},Gb=async function(t){const e=this.spec;e.datasets&&this.registerNamedDataProvider(r=>e.datasets[r]),this.viewRoot=await t.createOrImportView(e,null,null,Fw),C(this,Re,Vf).style.flexGrow=this.viewRoot.getSize().height.grow>0?"1":"0",T(this,Re,Nb).call(this),dT(this.viewRoot),Cw(this.viewRoot),C(this,pt).invalidateSize(),F(this,zi,new ZT({viewRoot:this.viewRoot,glHelper:C(this,pt),getBackground:()=>this.spec.background,broadcast:this.broadcast.bind(this),onLayoutComputed:()=>C(this,Ro).updateLayout()})),t.requestLayoutReflow=this.computeLayout.bind(this),T(this,Re,Tb).call(this)},zb=function(t){t.requestLayoutReflow=this.computeLayout.bind(this),this.viewRoot.visit(e=>Ju(e,"size")),C(this,pt).invalidateSize(),F(this,Hi,new WT({viewRoot:this.viewRoot,glHelper:C(this,pt),tooltip:this.tooltip,animator:this.animator,emitEvent:C(this,_i).emit.bind(C(this,_i)),tooltipHandlers:this.tooltipHandlers,renderPickingFramebuffer:this.renderPickingFramebuffer.bind(this),getDevicePixelRatio:()=>this.dpr}))};async function n6(n,t,e={}){let r;if(Ce(n)){if(r=document.querySelector(n),!r)throw new Error(`No such element: ${n}`)}else if(n instanceof HTMLElement)r=n;else throw new Error(`Invalid element: ${n}`);let i;try{const s=et(t)?t:await i6(t);if(s.baseUrl??(s.baseUrl=""),s.width??(s.width="container"),s.padding??(s.padding=10),r==document.body){const o=document.createElement("div");o.style.position="fixed",o.style.inset="0",o.style.overflow="hidden",r.appendChild(o),r=o}i=new t6(r,s,e),r6(i,e),await i.launch()}catch(s){r.innerText=s.toString(),console.error(s)}return{finalize(){for(i.destroy();r.firstChild;)r.firstChild.remove()},addEventListener(s,o){i.addEventListener(s,o)},removeEventListener(s,o){i.removeEventListener(s,o)},getScaleResolutionByName(s){return i.getNamedScaleResolutions().get(s)},updateNamedData:i.updateNamedData.bind(i),exportCanvas:i.exportCanvas.bind(i)}}function r6(n,t){t.namedDataProvider&&n.registerNamedDataProvider(t.namedDataProvider)}async function i6(n){let t;try{const e=await fetch(n);if(!e.ok)throw new Error(`${e.status} ${e.statusText}`);t=await e.json()}catch(e){throw new Error(`Could not load or parse configuration: ${n}, reason: ${e.message}`)}if(!t.baseUrl){const e=n.match(/^[^?#]*\//);t.baseUrl=e&&e[0]||"./"}return t}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const s6=n=>n.strings===void 0;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const oc=(n,t)=>{var r;const e=n._$AN;if(e===void 0)return!1;for(const i of e)(r=i._$AO)==null||r.call(i,t,!1),oc(i,t);return!0},ef=n=>{let t,e;do{if((t=n._$AM)===void 0)break;e=t._$AN,e.delete(n),n=t}while((e==null?void 0:e.size)===0)},Tw=n=>{for(let t;t=n._$AM;n=t){let e=t._$AN;if(e===void 0)t._$AN=e=new Set;else if(e.has(n))break;e.add(n),c6(t)}};function o6(n){this._$AN!==void 0?(ef(this),this._$AM=n,Tw(this)):this._$AM=n}function a6(n,t=!1,e=0){const r=this._$AH,i=this._$AN;if(i!==void 0&&i.size!==0)if(t)if(Array.isArray(r))for(let s=e;s<r.length;s++)oc(r[s],!1),ef(r[s]);else r!=null&&(oc(r,!1),ef(r));else oc(this,n)}const c6=n=>{n.type==Fp.CHILD&&(n._$AP??(n._$AP=a6),n._$AQ??(n._$AQ=o6))};class l6 extends Rp{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,e,r){super._$AT(t,e,r),Tw(this),this.isConnected=t._$AU}_$AO(t,e=!0){var r,i;t!==this.isConnected&&(this.isConnected=t,t?(r=this.reconnected)==null||r.call(this):(i=this.disconnected)==null||i.call(this)),e&&(oc(this,t),ef(this))}setValue(t){if(s6(this._$Ct))this._$Ct._$AI(t,this);else{const e=[...this._$Ct._$AH];e[this._$Ci]=t,this._$Ct._$AI(e,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const u6=()=>new f6;class f6{}const Gd=new WeakMap,A6=Mp(class extends l6{render(n){return ke}update(n,[t]){var r;const e=t!==this.G;return e&&this.G!==void 0&&this.rt(void 0),(e||this.lt!==this.ct)&&(this.G=t,this.ht=(r=n.options)==null?void 0:r.host,this.rt(this.ct=n.element)),ke}rt(n){if(this.isConnected||(n=void 0),typeof this.G=="function"){const t=this.ht??globalThis;let e=Gd.get(t);e===void 0&&(e=new WeakMap,Gd.set(t,e)),e.get(this.G)!==void 0&&this.G.call(this.ht,void 0),e.set(this.G,n),n!==void 0&&this.G.call(this.ht,n)}else this.G.value=n}get lt(){var n,t;return typeof this.G=="function"?(n=Gd.get(this.ht??globalThis))==null?void 0:n.get(this.G):(t=this.G)==null?void 0:t.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});function Pw(){const n=document.querySelector("meta[name='base_url']").getAttribute("content");return n||console.error('No <meta name="base_url" ...> found!'),n}async function h6(n,t){const r=`${Pw()}/data/`;try{t.baseUrl=t.baseUrl||r,await n6(n,t,{bare:!0})}catch(i){const s=document.createElement("pre");s.innerText=i.toString(),n.appendChild(s)}}class Lw extends jo{static get styles(){return AB`
            .show-spec {
                font-size: 70%;
                text-align: center;
            }

            .show-spec a {
                color: #3f51b5;
                text-decoration: none;
            }
        `}static get properties(){return{height:{type:String},specHidden:{type:Boolean}}}constructor(){super(),this.height=300,this.specHidden=!1,this.embedRef=u6()}render(){return Ie`
            <link rel="stylesheet" href=${Pw()+"/app/style.css"} />
            <div
                class="embed-container"
                style=${SA({height:this.height+"px"})}
                ${A6(this.embedRef)}
            ></div>
            ${this.specHidden?Ie`
                      <div class="show-spec">
                          <a
                              href="#"
                              @click=${t=>{this.specHidden=!1,t.preventDefault()}}
                              >Show specification</a
                          >
                      </div>
                  `:ke}

            <div
                class="embed-spec"
                style=${SA({display:this.specHidden?"none":"block"})}
            >
                <slot></slot>
            </div>
        `}firstUpdated(){var e;const t=(e=this.shadowRoot.querySelector("slot").assignedNodes().filter(r=>r instanceof HTMLElement)[0])==null?void 0:e.textContent;if(t){const r=new IntersectionObserver(i=>{i.forEach(s=>{if(s.isIntersecting){const o=s.target;h6(o,JSON.parse(t)),r.unobserve(o)}})});setTimeout(()=>r.observe(this.embedRef.value),80)}}}customElements.define("genome-spy-doc-embed",Lw);class d6{constructor(t){this.blob=t}async read(t,e=0){if(!t)return new Uint8Array(0);const r=e,i=r+t,s=this.blob.slice(r,i);return s.bytes?s.bytes():new Uint8Array(await s.arrayBuffer())}async readFile(t){const e=typeof t=="string"?t:t==null?void 0:t.encoding;if(e==="utf8")return this.blob.text();if(e)throw new Error(`unsupported encoding: ${e}`);return this.blob.bytes?this.blob.bytes():new Uint8Array(await this.blob.arrayBuffer())}async stat(){return{size:this.blob.size}}async close(){}}function g6(n){return(typeof n=="object"&&n!==null&&"message"in n?n.message:`${n}`).replace(/\.$/,"")}class pn{constructor(t,e={}){this.baseOverrides={},this.url=t;const r=e.fetch||globalThis.fetch.bind(globalThis);e.overrides&&(this.baseOverrides=e.overrides),this.fetchImplementation=r}async fetch(t,e){const r=s=>new Error(`${g6(s)} fetching ${t}`,{cause:s});let i;try{i=await this.fetchImplementation(t,e)}catch(s){if(`${s}`.includes("Failed to fetch")){console.warn(`generic-filehandle: refetching ${t} to attempt to work around chrome CORS header caching bug`);try{i=await this.fetchImplementation(t,{...e,cache:"reload"})}catch(o){throw r(o)}}else throw r(s)}return i}async read(t,e,r={}){if(t===0)return new Uint8Array(0);const{headers:i={},signal:s,overrides:o={}}=r;t<1/0?i.range=`bytes=${e}-${e+t-1}`:t===1/0&&e!==0&&(i.range=`bytes=${e}-`);const a=await this.fetch(this.url,{...this.baseOverrides,...o,headers:{...this.baseOverrides.headers,...o.headers,...i},method:"GET",redirect:"follow",mode:"cors",signal:s});if(!a.ok)throw new Error(`HTTP ${a.status} fetching ${this.url}`);if(a.status===200&&e===0||a.status===206){const l=a.headers.get("content-range"),c=/\/(\d+)$/.exec(l||"");c!=null&&c[1]&&(this._stat={size:parseInt(c[1],10)});const u=a.bytes?await a.bytes():new Uint8Array(await a.arrayBuffer());return u.byteLength<=t?u:u.subarray(0,t)}throw new Error(a.status===200?`${this.url} fetch returned status 200, expected 206`:`HTTP ${a.status} fetching ${this.url}`)}async readFile(t={}){let e,r;if(typeof t=="string")e=t,r={};else{e=t.encoding;const{encoding:l,...c}=t;r=c}const{headers:i={},signal:s,overrides:o={}}=r,a=await this.fetch(this.url,{...this.baseOverrides,...o,headers:{...this.baseOverrides.headers,...o.headers,...i},method:"GET",redirect:"follow",mode:"cors",signal:s});if(!a.ok)throw new Error(`HTTP ${a.status} fetching ${this.url}`);if(e==="utf8")return a.text();if(e)throw new Error(`unsupported encoding: ${e}`);return a.bytes?a.bytes():new Uint8Array(await a.arrayBuffer())}async stat(){if(!this._stat&&(await this.read(10,0),!this._stat))throw new Error(`unable to determine size of file at ${this.url}`);return this._stat}async close(){}}class at{readFile(){throw new Error("unimplemented")}read(){throw new Error("unimplemented")}close(){throw new Error("unimplemented")}}const ac=Object.freeze(Object.defineProperty({__proto__:null,BlobFile:d6,LocalFile:at,RemoteFile:pn},Symbol.toStringTag,{value:"Module"})),Ow=65536,p6=Ow*Ow;function zd(n,t=0){const e=n[t]|n[t+1]<<8|n[t+2]<<16|n[t+3]<<24;return((n[t+4]|n[t+5]<<8|n[t+6]<<16|n[t+7]<<24)>>>0)*p6+(e>>>0)}const tf=1;function Uw(n,t,e){const r=t[tf],i=e?e[tf]:1/0;return r<=n&&i>n?0:r<n?-1:1}class m6{constructor({filehandle:t}){j(this,"filehandle");j(this,"index");this.filehandle=t}_getIndex(){return this.index||(this.index=this._readIndex().catch(t=>{throw this.index=void 0,t})),this.index}async _readIndex(){const t=await this.filehandle.read(8,0),e=zd(t);if(!e)return[[0,0]];const r=new Array(e+1);r[0]=[0,0];const i=16*e;if(i>Number.MAX_SAFE_INTEGER)throw new TypeError("integer overflow");const s=await this.filehandle.read(i,8);for(let o=0;o<e;o+=1){const a=zd(s,o*16),l=zd(s,o*16+8);r[o+1]=[a,l]}return r}async getLastBlock(){return(await this._getIndex()).at(-1)}async getRelevantBlocksForRead(t,e){const r=e+t;if(t===0)return[];const i=await this._getIndex(),s=[];let o=0,a=i.length-1,l=Math.floor(i.length/2),c=Uw(e,i[l],i[l+1]);for(;c!==0;)c>0?a=l-1:c<0&&(o=l+1),l=Math.ceil((a-o)/2)+o,c=Uw(e,i[l],i[l+1]);s.push(i[l]);let u=l+1;for(;u<i.length&&(s.push(i[u]),!(i[u][tf]>=r));u+=1);return s[s.length-1][tf]<r&&s.push([]),s}}var Gw=0,Hd=2,nf=4,di=0,rf=1,C6=2,y6=-5;function w6(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function x6(n){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(var r in e)w6(e,r)&&(n[r]=e[r])}}return n}function zw(n,t){return n.length===t?n:n.subarray?n.subarray(0,t):(n.length=t,n)}var cc={arraySet:function(n,t,e,r,i){if(t.subarray&&n.subarray){n.set(t.subarray(e,e+r),i);return}for(var s=0;s<r;s++)n[i+s]=t[e+s]},flattenChunks:function(n){var t,e,r,i,s,o;for(r=0,t=0,e=n.length;t<e;t++)r+=n[t].length;for(o=new Uint8Array(r),i=0,t=0,e=n.length;t<e;t++)s=n[t],o.set(s,i),i+=s.length;return o},Buf8:function(n){return new Uint8Array(n)},Buf16:function(n){return new Uint16Array(n)},Buf32:function(n){return new Int32Array(n)}},lc={arraySet:function(n,t,e,r,i){for(var s=0;s<r;s++)n[i+s]=t[e+s]},flattenChunks:function(n){return[].concat.apply([],n)},Buf8:function(n){return new Array(n)},Buf16:function(n){return new Array(n)},Buf32:function(n){return new Array(n)}};let xs=()=>{const n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";return xs=()=>n,n},wr=(n,t,e,r,i)=>(wr=xs()?cc.arraySet:lc.arraySet,wr(n,t,e,r,i)),_d=n=>(_d=xs()?cc.flattenChunks:lc.flattenChunks,_d(n)),Is=n=>(Is=xs()?cc.Buf8:lc.Buf8,Is(n)),Es=n=>(Es=xs()?cc.Buf16:lc.Buf16,Es(n)),bs=n=>(bs=xs()?cc.Buf32:lc.Buf32,bs(n)),Hw=function(){let n=!0;try{String.fromCharCode.apply(null,[0])}catch{n=!1}return Hw=()=>n,n},_w=function(){let n=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}return _w=()=>n,n},Vd=function(n){for(var t=Is(256),e=0;e<256;e++)t[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;return t[254]=t[254]=1,Vd=r=>t[r],t[n]};function Vw(n){var t,e,r,i,s,o=n.length,a=0;for(i=0;i<o;i++)e=n.charCodeAt(i),(e&64512)===55296&&i+1<o&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(e=65536+(e-55296<<10)+(r-56320),i++)),a+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(a),s=0,i=0;s<a;i++)e=n.charCodeAt(i),(e&64512)===55296&&i+1<o&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(e=65536+(e-55296<<10)+(r-56320),i++)),e<128?t[s++]=e:e<2048?(t[s++]=192|e>>>6,t[s++]=128|e&63):e<65536?(t[s++]=224|e>>>12,t[s++]=128|e>>>6&63,t[s++]=128|e&63):(t[s++]=240|e>>>18,t[s++]=128|e>>>12&63,t[s++]=128|e>>>6&63,t[s++]=128|e&63);return t}function I6(n,t){if(t<65534&&(n.subarray&&_w()||!n.subarray&&Hw()))return String.fromCharCode.apply(null,zw(n,t));for(var e="",r=0;r<t;r++)e+=String.fromCharCode(n[r]);return e}function E6(n){for(var t=new Uint8Array(n.length),e=0,r=t.length;e<r;e++)t[e]=n.charCodeAt(e);return t}function b6(n,t){var e,r,i,s,o=t||n.length,a=new Array(o*2);for(r=0,e=0;e<o;){if(i=n[e++],i<128){a[r++]=i;continue}if(s=Vd(i),s>4){a[r++]=65533,e+=s-1;continue}for(i&=s===2?31:s===3?15:7;s>1&&e<o;)i=i<<6|n[e++]&63,s--;if(s>1){a[r++]=65533;continue}i<65536?a[r++]=i:(i-=65536,a[r++]=55296|i>>10&1023,a[r++]=56320|i&1023)}return I6(a,r)}function B6(n,t){var e;for(t=t||n.length,t>n.length&&(t=n.length),e=t-1;e>=0&&(n[e]&192)===128;)e--;return e<0||e===0?t:e+Vd(n[e])>t?e:t}function v6(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}function Yd(n,t,e,r){for(var i=n&65535|0,s=n>>>16&65535|0,o=0;e!==0;){o=e>2e3?2e3:e,e-=o;do i=i+t[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0}function Q6(){for(var n,t=[],e=0;e<256;e++){n=e;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;t[e]=n}return t}let Yw=function(){const n=Q6();return Yw=()=>n,n};function mn(n,t,e,r){var i=Yw(),s=r+e;n^=-1;for(var o=r;o<s;o++)n=n>>>8^i[(n^t[o])&255];return n^-1}var sf=30,S6=12;function D6(n,t){var e,r,i,s,o,a,l,c,u,f,h,A,d,g,m,p,w,I,y,b,B,E,Q,k,S;e=n.state,r=n.next_in,k=n.input,i=r+(n.avail_in-5),s=n.next_out,S=n.output,o=s-(t-n.avail_out),a=s+(n.avail_out-257),l=e.dmax,c=e.wsize,u=e.whave,f=e.wnext,h=e.window,A=e.hold,d=e.bits,g=e.lencode,m=e.distcode,p=(1<<e.lenbits)-1,w=(1<<e.distbits)-1;e:do{d<15&&(A+=k[r++]<<d,d+=8,A+=k[r++]<<d,d+=8),I=g[A&p];t:for(;;){if(y=I>>>24,A>>>=y,d-=y,y=I>>>16&255,y===0)S[s++]=I&65535;else if(y&16){b=I&65535,y&=15,y&&(d<y&&(A+=k[r++]<<d,d+=8),b+=A&(1<<y)-1,A>>>=y,d-=y),d<15&&(A+=k[r++]<<d,d+=8,A+=k[r++]<<d,d+=8),I=m[A&w];n:for(;;){if(y=I>>>24,A>>>=y,d-=y,y=I>>>16&255,y&16){if(B=I&65535,y&=15,d<y&&(A+=k[r++]<<d,d+=8,d<y&&(A+=k[r++]<<d,d+=8)),B+=A&(1<<y)-1,B>l){n.msg="invalid distance too far back",e.mode=sf;break e}if(A>>>=y,d-=y,y=s-o,B>y){if(y=B-y,y>u&&e.sane){n.msg="invalid distance too far back",e.mode=sf;break e}if(E=0,Q=h,f===0){if(E+=c-y,y<b){b-=y;do S[s++]=h[E++];while(--y);E=s-B,Q=S}}else if(f<y){if(E+=c+f-y,y-=f,y<b){b-=y;do S[s++]=h[E++];while(--y);if(E=0,f<b){y=f,b-=y;do S[s++]=h[E++];while(--y);E=s-B,Q=S}}}else if(E+=f-y,y<b){b-=y;do S[s++]=h[E++];while(--y);E=s-B,Q=S}for(;b>2;)S[s++]=Q[E++],S[s++]=Q[E++],S[s++]=Q[E++],b-=3;b&&(S[s++]=Q[E++],b>1&&(S[s++]=Q[E++]))}else{E=s-B;do S[s++]=S[E++],S[s++]=S[E++],S[s++]=S[E++],b-=3;while(b>2);b&&(S[s++]=S[E++],b>1&&(S[s++]=S[E++]))}}else if((y&64)===0){I=m[(I&65535)+(A&(1<<y)-1)];continue n}else{n.msg="invalid distance code",e.mode=sf;break e}break}}else if((y&64)===0){I=g[(I&65535)+(A&(1<<y)-1)];continue t}else if(y&32){e.mode=S6;break e}else{n.msg="invalid literal/length code",e.mode=sf;break e}break}}while(r<i&&s<a);b=d>>3,r-=b,d-=b<<3,A&=(1<<d)-1,n.next_in=r,n.next_out=s,n.avail_in=r<i?5+(i-r):5-(r-i),n.avail_out=s<a?257+(a-s):257-(s-a),e.hold=A,e.bits=d}var Bs=15,Jw=852,qw=592,Kw=0,Jd=1,jw=2,k6=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],F6=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],M6=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],R6=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function uc(n,t,e,r,i,s,o,a){var l=a.bits,c=0,u=0,f=0,h=0,A=0,d=0,g=0,m=0,p=0,w=0,I,y,b,B,E,Q=null,k=0,S,P=Es(Bs+1),N=Es(Bs+1),U=null,H=0,J,V,$;for(c=0;c<=Bs;c++)P[c]=0;for(u=0;u<r;u++)P[t[e+u]]++;for(A=l,h=Bs;h>=1&&P[h]===0;h--);if(A>h&&(A=h),h===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(f=1;f<h&&P[f]===0;f++);for(A<f&&(A=f),m=1,c=1;c<=Bs;c++)if(m<<=1,m-=P[c],m<0)return-1;if(m>0&&(n===Kw||h!==1))return-1;for(N[1]=0,c=1;c<Bs;c++)N[c+1]=N[c]+P[c];for(u=0;u<r;u++)t[e+u]!==0&&(o[N[t[e+u]]++]=u);if(n===Kw?(Q=U=o,S=19):n===Jd?(Q=k6,k-=257,U=F6,H-=257,S=256):(Q=M6,U=R6,S=-1),w=0,u=0,c=f,E=s,d=A,g=0,b=-1,p=1<<A,B=p-1,n===Jd&&p>Jw||n===jw&&p>qw)return 1;for(;;){J=c-g,o[u]<S?(V=0,$=o[u]):o[u]>S?(V=U[H+o[u]],$=Q[k+o[u]]):(V=96,$=0),I=1<<c-g,y=1<<d,f=y;do y-=I,i[E+(w>>g)+y]=J<<24|V<<16|$|0;while(y!==0);for(I=1<<c-1;w&I;)I>>=1;if(I!==0?(w&=I-1,w+=I):w=0,u++,--P[c]===0){if(c===h)break;c=t[e+o[u]]}if(c>A&&(w&B)!==b){for(g===0&&(g=A),E+=f,d=c-g,m=1<<d;d+g<h&&(m-=P[d+g],!(m<=0));)d++,m<<=1;if(p+=1<<d,n===Jd&&p>Jw||n===jw&&p>qw)return 1;b=w&B,i[b]=A<<24|d<<16|E-s|0}}return w!==0&&(i[E+w]=c-g<<24|64<<16|0),a.bits=A,0}var N6=0,Ww=1,Xw=2,Zw=4,gi=0,T6=1,P6=2,Lt=-2,$w=-3,ex=-4,L6=-5,tx=8,nx=1,rx=2,ix=3,sx=4,ox=5,ax=6,cx=7,lx=8,ux=9,fx=10,of=11,On=12,qd=13,Ax=14,Kd=15,hx=16,dx=17,gx=18,px=19,af=20,cf=21,mx=22,Cx=23,yx=24,wx=25,xx=26,jd=27,Ix=28,Ex=29,ve=30,bx=31,O6=32,U6=852,G6=592;function Bx(n){return(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24)}function z6(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=Es(320),this.work=Es(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function H6(n){var t;return!n||!n.state?Lt:(t=n.state,n.total_in=n.total_out=t.total=0,n.msg="",t.wrap&&(n.adler=t.wrap&1),t.mode=nx,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=bs(U6),t.distcode=t.distdyn=bs(G6),t.sane=1,t.back=-1,gi)}function _6(n){var t;return!n||!n.state?Lt:(t=n.state,t.wsize=0,t.whave=0,t.wnext=0,H6(n))}function V6(n,t){var e,r;return!n||!n.state||(r=n.state,t<0?(e=0,t=-t):(e=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?Lt:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=e,r.wbits=t,_6(n))}function Y6(n,t){var e,r;return n?(r=new z6,n.state=r,r.window=null,e=V6(n,t),e!==gi&&(n.state=null),e):Lt}var vx=!0,Wd,Xd;function J6(n){if(vx){var t;for(Wd=bs(512),Xd=bs(32),t=0;t<144;)n.lens[t++]=8;for(;t<256;)n.lens[t++]=9;for(;t<280;)n.lens[t++]=7;for(;t<288;)n.lens[t++]=8;for(uc(Ww,n.lens,0,288,Wd,0,n.work,{bits:9}),t=0;t<32;)n.lens[t++]=5;uc(Xw,n.lens,0,32,Xd,0,n.work,{bits:5}),vx=!1}n.lencode=Wd,n.lenbits=9,n.distcode=Xd,n.distbits=5}function Qx(n,t,e,r){var i,s=n.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=Is(s.wsize)),r>=s.wsize?(wr(s.window,t,e-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),wr(s.window,t,e-r,i,s.wnext),r-=i,r?(wr(s.window,t,e-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}function q6(n,t){var e,r,i,s,o,a,l,c,u,f,h,A,d,g,m=0,p,w,I,y,b,B,E,Q,k=Is(4),S,P,N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!n||!n.state||!n.output||!n.input&&n.avail_in!==0)return Lt;e=n.state,e.mode===On&&(e.mode=qd),o=n.next_out,i=n.output,l=n.avail_out,s=n.next_in,r=n.input,a=n.avail_in,c=e.hold,u=e.bits,f=a,h=l,Q=gi;e:for(;;)switch(e.mode){case nx:if(e.wrap===0){e.mode=qd;break}for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(e.wrap&2&&c===35615){e.check=0,k[0]=c&255,k[1]=c>>>8&255,e.check=mn(e.check,k,2,0),c=0,u=0,e.mode=rx;break}if(e.flags=0,e.head&&(e.head.done=!1),!(e.wrap&1)||(((c&255)<<8)+(c>>8))%31){n.msg="incorrect header check",e.mode=ve;break}if((c&15)!==tx){n.msg="unknown compression method",e.mode=ve;break}if(c>>>=4,u-=4,E=(c&15)+8,e.wbits===0)e.wbits=E;else if(E>e.wbits){n.msg="invalid window size",e.mode=ve;break}e.dmax=1<<E,n.adler=e.check=1,e.mode=c&512?fx:On,c=0,u=0;break;case rx:for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(e.flags=c,(e.flags&255)!==tx){n.msg="unknown compression method",e.mode=ve;break}if(e.flags&57344){n.msg="unknown header flags set",e.mode=ve;break}e.head&&(e.head.text=c>>8&1),e.flags&512&&(k[0]=c&255,k[1]=c>>>8&255,e.check=mn(e.check,k,2,0)),c=0,u=0,e.mode=ix;case ix:for(;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}e.head&&(e.head.time=c),e.flags&512&&(k[0]=c&255,k[1]=c>>>8&255,k[2]=c>>>16&255,k[3]=c>>>24&255,e.check=mn(e.check,k,4,0)),c=0,u=0,e.mode=sx;case sx:for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}e.head&&(e.head.xflags=c&255,e.head.os=c>>8),e.flags&512&&(k[0]=c&255,k[1]=c>>>8&255,e.check=mn(e.check,k,2,0)),c=0,u=0,e.mode=ox;case ox:if(e.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}e.length=c,e.head&&(e.head.extra_len=c),e.flags&512&&(k[0]=c&255,k[1]=c>>>8&255,e.check=mn(e.check,k,2,0)),c=0,u=0}else e.head&&(e.head.extra=null);e.mode=ax;case ax:if(e.flags&1024&&(A=e.length,A>a&&(A=a),A&&(e.head&&(E=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),wr(e.head.extra,r,s,A,E)),e.flags&512&&(e.check=mn(e.check,r,A,s)),a-=A,s+=A,e.length-=A),e.length))break e;e.length=0,e.mode=cx;case cx:if(e.flags&2048){if(a===0)break e;A=0;do E=r[s+A++],e.head&&E&&e.length<65536&&(e.head.name+=String.fromCharCode(E));while(E&&A<a);if(e.flags&512&&(e.check=mn(e.check,r,A,s)),a-=A,s+=A,E)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=lx;case lx:if(e.flags&4096){if(a===0)break e;A=0;do E=r[s+A++],e.head&&E&&e.length<65536&&(e.head.comment+=String.fromCharCode(E));while(E&&A<a);if(e.flags&512&&(e.check=mn(e.check,r,A,s)),a-=A,s+=A,E)break e}else e.head&&(e.head.comment=null);e.mode=ux;case ux:if(e.flags&512){for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(c!==(e.check&65535)){n.msg="header crc mismatch",e.mode=ve;break}c=0,u=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),n.adler=e.check=0,e.mode=On;break;case fx:for(;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.adler=e.check=Bx(c),c=0,u=0,e.mode=of;case of:if(e.havedict===0)return n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,e.hold=c,e.bits=u,P6;n.adler=e.check=1,e.mode=On;case On:case qd:if(e.last){c>>>=u&7,u-=u&7,e.mode=jd;break}for(;u<3;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}switch(e.last=c&1,c>>>=1,u-=1,c&3){case 0:e.mode=Ax;break;case 1:J6(e),e.mode=af;break;case 2:e.mode=dx;break;case 3:n.msg="invalid block type",e.mode=ve}c>>>=2,u-=2;break;case Ax:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){n.msg="invalid stored block lengths",e.mode=ve;break}e.length=c&65535,c=0,u=0,e.mode=Kd;case Kd:e.mode=hx;case hx:if(A=e.length,A){if(A>a&&(A=a),A>l&&(A=l),A===0)break e;wr(i,r,s,A,o),a-=A,s+=A,l-=A,o+=A,e.length-=A;break}e.mode=On;break;case dx:for(;u<14;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(e.nlen=(c&31)+257,c>>>=5,u-=5,e.ndist=(c&31)+1,c>>>=5,u-=5,e.ncode=(c&15)+4,c>>>=4,u-=4,e.nlen>286||e.ndist>30){n.msg="too many length or distance symbols",e.mode=ve;break}e.have=0,e.mode=gx;case gx:for(;e.have<e.ncode;){for(;u<3;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}e.lens[N[e.have++]]=c&7,c>>>=3,u-=3}for(;e.have<19;)e.lens[N[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,S={bits:e.lenbits},Q=uc(N6,e.lens,0,19,e.lencode,0,e.work,S),e.lenbits=S.bits,Q){n.msg="invalid code lengths set",e.mode=ve;break}e.have=0,e.mode=px;case px:for(;e.have<e.nlen+e.ndist;){for(;m=e.lencode[c&(1<<e.lenbits)-1],p=m>>>24,w=m>>>16&255,I=m&65535,!(p<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(I<16)c>>>=p,u-=p,e.lens[e.have++]=I;else{if(I===16){for(P=p+2;u<P;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(c>>>=p,u-=p,e.have===0){n.msg="invalid bit length repeat",e.mode=ve;break}E=e.lens[e.have-1],A=3+(c&3),c>>>=2,u-=2}else if(I===17){for(P=p+3;u<P;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=p,u-=p,E=0,A=3+(c&7),c>>>=3,u-=3}else{for(P=p+7;u<P;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=p,u-=p,E=0,A=11+(c&127),c>>>=7,u-=7}if(e.have+A>e.nlen+e.ndist){n.msg="invalid bit length repeat",e.mode=ve;break}for(;A--;)e.lens[e.have++]=E}}if(e.mode===ve)break;if(e.lens[256]===0){n.msg="invalid code -- missing end-of-block",e.mode=ve;break}if(e.lenbits=9,S={bits:e.lenbits},Q=uc(Ww,e.lens,0,e.nlen,e.lencode,0,e.work,S),e.lenbits=S.bits,Q){n.msg="invalid literal/lengths set",e.mode=ve;break}if(e.distbits=6,e.distcode=e.distdyn,S={bits:e.distbits},Q=uc(Xw,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,S),e.distbits=S.bits,Q){n.msg="invalid distances set",e.mode=ve;break}e.mode=af;case af:e.mode=cf;case cf:if(a>=6&&l>=258){n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,e.hold=c,e.bits=u,D6(n,h),o=n.next_out,i=n.output,l=n.avail_out,s=n.next_in,r=n.input,a=n.avail_in,c=e.hold,u=e.bits,e.mode===On&&(e.back=-1);break}for(e.back=0;m=e.lencode[c&(1<<e.lenbits)-1],p=m>>>24,w=m>>>16&255,I=m&65535,!(p<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(w&&(w&240)===0){for(y=p,b=w,B=I;m=e.lencode[B+((c&(1<<y+b)-1)>>y)],p=m>>>24,w=m>>>16&255,I=m&65535,!(y+p<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=y,u-=y,e.back+=y}if(c>>>=p,u-=p,e.back+=p,e.length=I,w===0){e.mode=xx;break}if(w&32){e.back=-1,e.mode=On;break}if(w&64){n.msg="invalid literal/length code",e.mode=ve;break}e.extra=w&15,e.mode=mx;case mx:if(e.extra){for(P=e.extra;u<P;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}e.length+=c&(1<<e.extra)-1,c>>>=e.extra,u-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=Cx;case Cx:for(;m=e.distcode[c&(1<<e.distbits)-1],p=m>>>24,w=m>>>16&255,I=m&65535,!(p<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if((w&240)===0){for(y=p,b=w,B=I;m=e.distcode[B+((c&(1<<y+b)-1)>>y)],p=m>>>24,w=m>>>16&255,I=m&65535,!(y+p<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=y,u-=y,e.back+=y}if(c>>>=p,u-=p,e.back+=p,w&64){n.msg="invalid distance code",e.mode=ve;break}e.offset=I,e.extra=w&15,e.mode=yx;case yx:if(e.extra){for(P=e.extra;u<P;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}e.offset+=c&(1<<e.extra)-1,c>>>=e.extra,u-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){n.msg="invalid distance too far back",e.mode=ve;break}e.mode=wx;case wx:if(l===0)break e;if(A=h-l,e.offset>A){if(A=e.offset-A,A>e.whave&&e.sane){n.msg="invalid distance too far back",e.mode=ve;break}A>e.wnext?(A-=e.wnext,d=e.wsize-A):d=e.wnext-A,A>e.length&&(A=e.length),g=e.window}else g=i,d=o-e.offset,A=e.length;A>l&&(A=l),l-=A,e.length-=A;do i[o++]=g[d++];while(--A);e.length===0&&(e.mode=cf);break;case xx:if(l===0)break e;i[o++]=e.length,l--,e.mode=cf;break;case jd:if(e.wrap){for(;u<32;){if(a===0)break e;a--,c|=r[s++]<<u,u+=8}if(h-=l,n.total_out+=h,e.total+=h,h&&(n.adler=e.check=e.flags?mn(e.check,i,h,o-h):Yd(e.check,i,h,o-h)),h=l,(e.flags?c:Bx(c))!==e.check){n.msg="incorrect data check",e.mode=ve;break}c=0,u=0}e.mode=Ix;case Ix:if(e.wrap&&e.flags){for(;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(c!==(e.total&4294967295)){n.msg="incorrect length check",e.mode=ve;break}c=0,u=0}e.mode=Ex;case Ex:Q=T6;break e;case ve:Q=$w;break e;case bx:return ex;case O6:default:return Lt}return n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,e.hold=c,e.bits=u,(e.wsize||h!==n.avail_out&&e.mode<ve&&(e.mode<jd||t!==Zw))&&Qx(n,n.output,n.next_out,h-n.avail_out),f-=n.avail_in,h-=n.avail_out,n.total_in+=f,n.total_out+=h,e.total+=h,e.wrap&&h&&(n.adler=e.check=e.flags?mn(e.check,i,h,n.next_out-h):Yd(e.check,i,h,n.next_out-h)),n.data_type=e.bits+(e.last?64:0)+(e.mode===On?128:0)+(e.mode===af||e.mode===Kd?256:0),(f===0&&h===0||t===Zw)&&Q===gi&&(Q=L6),Q}function K6(n){if(!n||!n.state)return Lt;var t=n.state;return t.window&&(t.window=null),n.state=null,gi}function j6(n,t){var e;return!n||!n.state||(e=n.state,(e.wrap&2)===0)?Lt:(e.head=t,t.done=!1,gi)}function Sx(n,t){var e=t.length,r,i,s;return!n||!n.state||(r=n.state,r.wrap!==0&&r.mode!==of)?Lt:r.mode===of&&(i=1,i=Yd(i,t,e,0),i!==r.check)?$w:(s=Qx(n,t,e,e),s?(r.mode=bx,ex):(r.havedict=1,gi))}const Zd={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function W6(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var $d=Object.prototype.toString;let Dx=class gg{constructor(t){if(!(this instanceof gg))return new gg(t);this.options=x6({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new W6,this.strm.avail_out=0;var r=Y6(this.strm,e.windowBits);if(r!==di)throw new Error(Zd[r]);if(this.header=new v6,j6(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Vw(e.dictionary):$d.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Sx(this.strm,e.dictionary),r!==di)))throw new Error(Zd[r])}push(t,e){var r=this.strm,i=this.options.chunkSize,s=this.options.dictionary,o,a,l,c,u,f,h=!1;if(this.ended)return!1;a=e===~~e?e:e===!0?nf:Gw,typeof t=="string"?r.input=E6(t):$d.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=Is(i),r.next_out=0,r.avail_out=i),o=q6(r,Gw),o===C6&&s&&(typeof s=="string"?f=Vw(s):$d.call(s)==="[object ArrayBuffer]"?f=new Uint8Array(s):f=s,o=Sx(this.strm,f)),o===y6&&h===!0&&(o=di,h=!1),o!==rf&&o!==di)return this.onEnd(o),this.ended=!0,!1;r.next_out&&(r.avail_out===0||o===rf||r.avail_in===0&&(a===nf||a===Hd))&&(this.options.to==="string"?(l=B6(r.output,r.next_out),c=r.next_out-l,u=b6(r.output,l),r.next_out=c,r.avail_out=i-c,c&&wr(r.output,r.output,l,c,0),this.onData(u)):this.onData(zw(r.output,r.next_out))),r.avail_in===0&&r.avail_out===0&&(h=!0)}while((r.avail_in>0||r.avail_out===0)&&o!==rf);return o===rf&&(a=nf),a===nf?(o=K6(this.strm),this.onEnd(o),this.ended=!0,o===di):(a===Hd&&(this.onEnd(di),r.avail_out=0),!0)}onData(t){this.chunks.push(t)}onEnd(t){t===di&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=_d(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg}};function X6(n,t){var e=new Dx(t);if(e.push(n,!0),e.err)throw e.msg||Zd[e.err];return e.result}function Z6(n,t){return t=t||{},t.raw=!0,X6(n,t)}function $6(n){let t=0;for(const e of n)t+=e.length;return t}function kx(n,t){const e=new Uint8Array(t??$6(n));let r=0;for(const i of n)e.set(i,r),r+=i.length;return e}async function e9(n){try{let t,e=0,r;const i=[];let s=0;do{const o=n.subarray(e);if(r=new Dx(void 0),{strm:t}=r,r.push(o,Hd),r.err)throw new Error(r.msg);e+=t.next_in;const a=r.result;i.push(a),s+=a.length}while(t.avail_in);return kx(i,s)}catch(t){throw/incorrect header check/.exec(`${t}`)?new Error("problem decompressing block: incorrect gzip header check"):t}}class Fx{constructor({filehandle:t,gziFilehandle:e}){j(this,"filehandle");j(this,"gzi");this.filehandle=t,this.gzi=new m6({filehandle:e})}async _readAndUncompressBlock(t,e){let r=e;r||(r=(await this.filehandle.stat()).size);const i=r-t,s=await this.filehandle.read(i,t);return e9(s)}async read(t,e){const r=await this.gzi.getRelevantBlocksForRead(t,e),i=[];for(let s=0;s<r.length-1;s+=1){const o=await this._readAndUncompressBlock(r[s][0],r[s+1][0]),[,a]=r[s],l=a>=e?0:e-a,c=Math.min(e+t,a+o.length)-a;l>=0&&l<o.length&&i.push(o.subarray(l,c))}return kx(i)}}function Mx(n,t){return n.offset+n.lineBytes*Math.floor(t/n.lineLength)+t%n.lineLength}async function t9(n,t={}){const e=new TextDecoder("utf8");return Object.fromEntries(e.decode(await n.readFile(t)).split(/\r?\n/).map(r=>r.trim()).filter(r=>!!r).map(r=>r.split("	")).map(r=>{var i;if((i=r[0])!=null&&i.startsWith(">"))throw new Error("found > in sequence name, might have supplied FASTA file for the FASTA index");return[r[0],{name:r[0],length:+r[1],start:0,end:+r[1],offset:+r[2],lineLength:+r[3],lineBytes:+r[4]}]}))}class Rx{constructor({fasta:t,fai:e,path:r,faiPath:i}){if(t)this.fasta=t;else if(r)this.fasta=new at(r);else throw new Error("Need to pass filehandle for fasta or path to localfile");if(e)this.fai=e;else if(i)this.fai=new at(i);else if(r)this.fai=new at(`${r}.fai`);else throw new Error("Need to pass filehandle for  or path to localfile")}async _getIndexes(t){return this.indexes||(this.indexes=t9(this.fai,t).catch(e=>{throw this.indexes=void 0,e})),this.indexes}async getSequenceNames(t){return Object.keys(await this._getIndexes(t))}async getSequenceSizes(t){const e={},r=await this._getIndexes(t);for(const i of Object.values(r))e[i.name]=i.length;return e}async getSequenceSize(t,e){var i;return(i=(await this._getIndexes(e))[t])==null?void 0:i.length}async hasReferenceSequence(t,e){return!!(await this._getIndexes(e))[t]}async getResiduesByName(t,e,r,i){const s=(await this._getIndexes(i))[t];return s?this._fetchFromIndexEntry(s,e,r,i):void 0}async getSequence(t,e,r,i){return this.getResiduesByName(t,e,r,i)}async _fetchFromIndexEntry(t,e=0,r,i){let s=r;if(e<0)throw new TypeError("regionStart cannot be less than 0");if((s===void 0||s>t.length)&&(s=t.length),e>=s)return"";const o=Mx(t,e),a=Mx(t,s)-o,c=new TextDecoder("utf8").decode(await this.fasta.read(a,o,i)).replace(/\s+/g,"");if(/[^\x20-\x7e]/.test(c.slice(0,1e3)))throw new Error("Non-ASCII characters detected in sequence. The file may be gzip compressed. Use BgzipIndexedFasta for bgzip files, or decompress the file.");return c}}class n9 extends Rx{constructor({fasta:t,path:e,fai:r,faiPath:i,gzi:s,gziPath:o}){super({fasta:t,path:e,fai:r,faiPath:i}),t&&s?this.fasta=new Fx({filehandle:t,gziFilehandle:s}):e&&o&&(this.fasta=new Fx({filehandle:new at(e),gziFilehandle:new at(o)}))}}function Nx(n){return n.split(">").filter(t=>/\S/.test(t)).map(t=>{const[e,...r]=t.split(`
`),[i,...s]=e.split(" "),o=r.join("").replace(/\s/g,"");return{id:i,description:s.join(" "),sequence:o}})}class r9{constructor({fasta:t,path:e}){if(t)this.fasta=t;else if(e)this.fasta=new at(e);else throw new Error("Need to pass fasta or path");this.data=this.fasta.readFile().then(r=>{const s=new TextDecoder("utf8").decode(r);return Nx(s)})}async fetch(t,e,r){const s=(await this.data).find(a=>a.id===t),o=r-e;if(!s)throw new Error(`no sequence with id ${t} exists`);return s.sequence.slice(e,o)}async getSequenceNames(){return(await this.data).map(e=>e.id)}}const i9=Object.freeze(Object.defineProperty({__proto__:null,BgzipIndexedFasta:n9,FetchableSmallFasta:r9,IndexedFasta:Rx,parseSmallFasta:Nx},Symbol.toStringTag,{value:"Module"})),Tx=BigInt(32);function s9(n,t,e){const r=+!!e,i=+!e;return BigInt(n.getInt32(t,e)*i+n.getInt32(t+4,e)*r)<<Tx|BigInt(n.getUint32(t,e)*r+n.getUint32(t+4,e)*i)}function o9(n,t,e){const r=n.getUint32(t,e),i=n.getUint32(t+4,e),s=+!!e,o=+!e;return BigInt(r*o+i*s)<<Tx|BigInt(r*s+i*o)}"getBigInt64"in DataView||(DataView.prototype.getBigInt64=function(n,t){return s9(this,n,t)}),"getBigUint64"in DataView||(DataView.prototype.getBigUint64=function(n,t){return o9(this,n,t)});var e0=function(n,t){return e0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},e0(n,t)};function t0(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e0(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function a9(n,t,e,r){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})}function Px(n,t){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){e.label=c[1];break}if(c[0]===6&&e.label<s[1]){e.label=s[1],s=c;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(c);break}s[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(n,e)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function fc(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function n0(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return s}function r0(n,t,e){if(e||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return n.concat(s||Array.prototype.slice.call(t))}function vs(n){return this instanceof vs?(this.v=n,this):new vs(n)}function c9(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(A){return function(d){return Promise.resolve(d).then(A,f)}}function a(A,d){r[A]&&(i[A]=function(g){return new Promise(function(m,p){s.push([A,g,m,p])>1||l(A,g)})},d&&(i[A]=d(i[A])))}function l(A,d){try{c(r[A](d))}catch(g){h(s[0][3],g)}}function c(A){A.value instanceof vs?Promise.resolve(A.value.v).then(u,f):h(s[0][2],A)}function u(A){l("next",A)}function f(A){l("throw",A)}function h(A,d){A(d),s.shift(),s.length&&l(s[0][0],s[0][1])}}function l9(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof fc=="function"?fc(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(s){e[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}typeof SuppressedError=="function"&&SuppressedError;function ze(n){return typeof n=="function"}function Lx(n){var t=function(r){Error.call(r),r.stack=new Error().stack},e=n(t);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var i0=Lx(function(n){return function(e){n(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function Ox(n,t){if(n){var e=n.indexOf(t);0<=e&&n.splice(e,1)}}var s0=(function(){function n(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var t,e,r,i,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=fc(o),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(g){t={error:g}}finally{try{l&&!l.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}else o.remove(this);var u=this.initialTeardown;if(ze(u))try{u()}catch(g){s=g instanceof i0?g.errors:[g]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var h=fc(f),A=h.next();!A.done;A=h.next()){var d=A.value;try{Gx(d)}catch(g){s=s??[],g instanceof i0?s=r0(r0([],n0(s)),n0(g.errors)):s.push(g)}}}catch(g){r={error:g}}finally{try{A&&!A.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}if(s)throw new i0(s)}},n.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)Gx(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}},n.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},n.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},n.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&Ox(e,t)},n.prototype.remove=function(t){var e=this._finalizers;e&&Ox(e,t),t instanceof n&&t._removeParent(this)},n.EMPTY=(function(){var t=new n;return t.closed=!0,t})(),n})();s0.EMPTY;function Ux(n){return n instanceof s0||n&&"closed"in n&&ze(n.remove)&&ze(n.add)&&ze(n.unsubscribe)}function Gx(n){ze(n)?n():n.unsubscribe()}var u9={Promise:void 0},f9={setTimeout:function(n,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];return setTimeout.apply(void 0,r0([n,t],n0(e)))},clearTimeout:function(n){return clearTimeout(n)},delegate:void 0};function zx(n){f9.setTimeout(function(){throw n})}function Hx(){}function A9(n){n()}var o0=(function(n){t0(t,n);function t(e){var r=n.call(this)||this;return r.isStopped=!1,e?(r.destination=e,Ux(e)&&e.add(r)):r.destination=g9,r}return t.create=function(e,r,i){return new lf(e,r,i)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t})(s0),h9=(function(){function n(t){this.partialObserver=t}return n.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(r){uf(r)}},n.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(r){uf(r)}else uf(t)},n.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){uf(e)}},n})(),lf=(function(n){t0(t,n);function t(e,r,i){var s=n.call(this)||this,o;return ze(e)||!e?o={next:e??void 0,error:r??void 0,complete:i??void 0}:o=e,s.destination=new h9(o),s}return t})(o0);function uf(n){zx(n)}function d9(n){throw n}var g9={closed:!0,next:Hx,error:d9,complete:Hx},a0=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function _x(n){return n}function p9(n){return n.length===0?_x:n.length===1?n[0]:function(e){return n.reduce(function(r,i){return i(r)},e)}}var Ot=(function(){function n(t){t&&(this._subscribe=t)}return n.prototype.lift=function(t){var e=new n;return e.source=this,e.operator=t,e},n.prototype.subscribe=function(t,e,r){var i=this,s=C9(t)?t:new lf(t,e,r);return A9(function(){var o=i,a=o.operator,l=o.source;s.add(a?a.call(s,l):l?i._subscribe(s):i._trySubscribe(s))}),s},n.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},n.prototype.forEach=function(t,e){var r=this;return e=Vx(e),new e(function(i,s){var o=new lf({next:function(a){try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});r.subscribe(o)})},n.prototype._subscribe=function(t){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(t)},n.prototype[a0]=function(){return this},n.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return p9(t)(this)},n.prototype.toPromise=function(t){var e=this;return t=Vx(t),new t(function(r,i){var s;e.subscribe(function(o){return s=o},function(o){return i(o)},function(){return r(s)})})},n.create=function(t){return new n(t)},n})();function Vx(n){var t;return(t=n??u9.Promise)!==null&&t!==void 0?t:Promise}function m9(n){return n&&ze(n.next)&&ze(n.error)&&ze(n.complete)}function C9(n){return n&&n instanceof o0||m9(n)&&Ux(n)}function y9(n){return ze(n==null?void 0:n.lift)}function Qs(n){return function(t){if(y9(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ac(n,t,e,r,i){return new w9(n,t,e,r,i)}var w9=(function(n){t0(t,n);function t(e,r,i,s,o,a){var l=n.call(this,e)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=r?function(c){try{r(c)}catch(u){e.error(u)}}:n.prototype._next,l._error=s?function(c){try{s(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:n.prototype._error,l._complete=i?function(){try{i()}catch(c){e.error(c)}finally{this.unsubscribe()}}:n.prototype._complete,l}return t.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;n.prototype.unsubscribe.call(this),!r&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},t})(o0),x9=new Ot(function(n){return n.complete()});function I9(n){return n&&ze(n.schedule)}function Yx(n){return n[n.length-1]}function E9(n){return I9(Yx(n))?n.pop():void 0}function b9(n,t){return typeof Yx(n)=="number"?n.pop():t}var Jx=(function(n){return n&&typeof n.length=="number"&&typeof n!="function"});function qx(n){return ze(n==null?void 0:n.then)}function Kx(n){return ze(n[a0])}function jx(n){return Symbol.asyncIterator&&ze(n==null?void 0:n[Symbol.asyncIterator])}function Wx(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function B9(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Xx=B9();function Zx(n){return ze(n==null?void 0:n[Xx])}function $x(n){return c9(this,arguments,function(){var e,r,i,s;return Px(this,function(o){switch(o.label){case 0:e=n.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,vs(e.read())];case 3:return r=o.sent(),i=r.value,s=r.done,s?[4,vs(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,vs(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function eI(n){return ze(n==null?void 0:n.getReader)}function Ss(n){if(n instanceof Ot)return n;if(n!=null){if(Kx(n))return v9(n);if(Jx(n))return Q9(n);if(qx(n))return S9(n);if(jx(n))return tI(n);if(Zx(n))return D9(n);if(eI(n))return k9(n)}throw Wx(n)}function v9(n){return new Ot(function(t){var e=n[a0]();if(ze(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Q9(n){return new Ot(function(t){for(var e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function S9(n){return new Ot(function(t){n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,zx)})}function D9(n){return new Ot(function(t){var e,r;try{for(var i=fc(n),s=i.next();!s.done;s=i.next()){var o=s.value;if(t.next(o),t.closed)return}}catch(a){e={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}t.complete()})}function tI(n){return new Ot(function(t){F9(n,t).catch(function(e){return t.error(e)})})}function k9(n){return tI($x(n))}function F9(n,t){var e,r,i,s;return a9(this,void 0,void 0,function(){var o,a;return Px(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),e=l9(n),l.label=1;case 1:return[4,e.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(o=r.value,t.next(o),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),i={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(s=e.return)?[4,s.call(e)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function pi(n,t,e,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=t.schedule(function(){e(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function nI(n,t){return t===void 0&&(t=0),Qs(function(e,r){e.subscribe(Ac(r,function(i){return pi(r,n,function(){return r.next(i)},t)},function(){return pi(r,n,function(){return r.complete()},t)},function(i){return pi(r,n,function(){return r.error(i)},t)}))})}function rI(n,t){return t===void 0&&(t=0),Qs(function(e,r){r.add(n.schedule(function(){return e.subscribe(r)},t))})}function M9(n,t){return Ss(n).pipe(rI(t),nI(t))}function R9(n,t){return Ss(n).pipe(rI(t),nI(t))}function N9(n,t){return new Ot(function(e){var r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}function T9(n,t){return new Ot(function(e){var r;return pi(e,t,function(){r=n[Xx](),pi(e,t,function(){var i,s,o;try{i=r.next(),s=i.value,o=i.done}catch(a){e.error(a);return}o?e.complete():e.next(s)},0,!0)}),function(){return ze(r==null?void 0:r.return)&&r.return()}})}function iI(n,t){if(!n)throw new Error("Iterable cannot be null");return new Ot(function(e){pi(e,t,function(){var r=n[Symbol.asyncIterator]();pi(e,t,function(){r.next().then(function(i){i.done?e.complete():e.next(i.value)})},0,!0)})})}function P9(n,t){return iI($x(n),t)}function L9(n,t){if(n!=null){if(Kx(n))return M9(n,t);if(Jx(n))return N9(n,t);if(qx(n))return R9(n,t);if(jx(n))return iI(n,t);if(Zx(n))return T9(n,t);if(eI(n))return P9(n,t)}throw Wx(n)}function O9(n,t){return t?L9(n,t):Ss(n)}var U9=Lx(function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}});function sI(n,t){return new Promise(function(e,r){var i=new lf({next:function(s){e(s),i.unsubscribe()},error:r,complete:function(){r(new U9)}});n.subscribe(i)})}function oI(n,t){return Qs(function(e,r){var i=0;e.subscribe(Ac(r,function(s){r.next(n.call(t,s,i++))}))})}function G9(n,t,e,r,i,s,o,a){var l=[],c=0,u=0,f=!1,h=function(){f&&!l.length&&!c&&t.complete()},A=function(g){return c<r?d(g):l.push(g)},d=function(g){c++;var m=!1;Ss(e(g,u++)).subscribe(Ac(t,function(p){t.next(p)},function(){m=!0},void 0,function(){if(m)try{c--;for(var p=function(){var w=l.shift();o||d(w)};l.length&&c<r;)p();h()}catch(w){t.error(w)}}))};return n.subscribe(Ac(t,A,function(){f=!0,h()})),function(){}}function aI(n,t,e){return e===void 0&&(e=1/0),ze(t)?aI(function(r,i){return oI(function(s,o){return t(r,s,i,o)})(Ss(n(r,i)))},e):(typeof t=="number"&&(e=t),Qs(function(r,i){return G9(r,i,n,e)}))}function z9(n){return n===void 0&&(n=1/0),aI(_x,n)}function H9(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=E9(n),r=b9(n,1/0),i=n;return i.length?i.length===1?Ss(i[0]):z9(r)(O9(i,e)):x9}function _9(n,t,e,r,i){return function(s,o){var a=e,l=t,c=0;s.subscribe(Ac(o,function(u){var f=c++;l=a?n(l,u,f):(a=!0,u)},(function(){a&&o.next(l),o.complete()})))}}function cI(n,t){return Qs(_9(n,t,arguments.length>=2,!1,!0))}var V9=function(n,t){return n.push(t),n};function Y9(){return Qs(function(n,t){cI(V9,[])(n).subscribe(t)})}class J9{}class q9{constructor(){this.signals=new Set,this.abortController=new AbortController}addSignal(t=new J9){if(this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(t),t.aborted?this.handleAborted(t):typeof t.addEventListener=="function"&&t.addEventListener("abort",()=>{this.handleAborted(t)})}handleAborted(t){this.signals.delete(t),this.signals.size===0&&this.abortController.abort()}get signal(){return this.abortController.signal}abort(){this.abortController.abort()}}class K9{constructor(){this.callbacks=new Set}addCallback(t=()=>{}){this.callbacks.add(t),this.currentMessage&&t(this.currentMessage)}callback(t){this.currentMessage=t;for(const e of this.callbacks)e(t)}}class Ds{constructor({fill:t,cache:e}){if(typeof t!="function")throw new TypeError("must pass a fill function");if(typeof e!="object")throw new TypeError("must pass a cache object");if(typeof e.get!="function"||typeof e.set!="function"||typeof e.delete!="function")throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=e,this.fillCallback=t}static isAbortException(t){return t.name==="AbortError"||t.code==="ERR_ABORTED"||t.message==="AbortError: aborted"||t.message==="Error: aborted"}evict(t,e){this.cache.get(t)===e&&this.cache.delete(t)}fill(t,e,r,i){const s=new q9,o=new K9;o.addCallback(i);const a={aborter:s,promise:this.fillCallback(e,s.signal,l=>{o.callback(l)}),settled:!1,statusReporter:o,get aborted(){return this.aborter.signal.aborted}};a.aborter.addSignal(r),a.aborter.signal.addEventListener("abort",()=>{a.settled||this.evict(t,a)}),a.promise.then(()=>{a.settled=!0},()=>{a.settled=!0,this.evict(t,a)}).catch(l=>{throw console.error(l),l}),this.cache.set(t,a)}static checkSinglePromise(t,e){function r(){if(e!=null&&e.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return t.then(i=>(r(),i),i=>{throw r(),i})}has(t){return this.cache.has(t)}get(t,e,r,i){if(!r&&e instanceof AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");const s=this.cache.get(t);return s?s.aborted&&!s.settled?(this.evict(t,s),this.get(t,e,r,i)):s.settled?s.promise:(s.aborter.addSignal(r),s.statusReporter.addCallback(i),Ds.checkSinglePromise(s.promise,r)):(this.fill(t,e,r,i),Ds.checkSinglePromise(this.cache.get(t).promise,r))}delete(t){const e=this.cache.get(t);e&&(e.settled||e.aborter.abort(),this.cache.delete(t))}clear(){const t=this.cache.keys();let e=0;for(let r=t.next();!r.done;r=t.next())this.delete(r.value),e+=1;return e}}function j9(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var c0,lI;function W9(){if(lI)return c0;lI=1;class n{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,r){this.cache.set(e,r),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const r=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,r),r}}set(e,r){return this.cache.has(e)?this.cache.set(e,r):this._set(e,r),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e))return this.oldCache.get(e)}delete(e){const r=this.cache.delete(e);return r&&this._size--,this.oldCache.delete(e)||r}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[r]=e;this.cache.has(r)||(yield e)}}get size(){let e=0;for(const r of this.oldCache.keys())this.cache.has(r)||e++;return this._size+e}}return c0=n,c0}var X9=W9();const uI=j9(X9);class ks{constructor(t){j(this,"ranges");this.ranges=t}get min(){return this.ranges[0].min}get max(){return this.ranges.at(-1).max}contains(t){for(const e of this.ranges)if(e.min<=t&&e.max>=t)return!0;return!1}isContiguous(){return this.ranges.length>1}getRanges(){return this.ranges.map(t=>new ks([{min:t.min,max:t.max}]))}toString(){return this.ranges.map(t=>`[${t.min}-${t.max}]`).join(",")}union(t){const e=[...this.getRanges(),...t.getRanges()].sort((s,o)=>s.min<o.min?-1:s.min>o.min?1:s.max<o.max?-1:o.max>s.max?1:0),r=[];let i=e[0];for(const s of e)s.min>i.max+1?(r.push(i),i=s):s.max>i.max&&(i=new ks([{min:i.min,max:s.max}]));return r.push(i),r.length===1?r[0]:new ks(r)}}function Z9(n){return Z6(n.subarray(2),void 0)}class $9 extends Error{constructor(e){super(e);j(this,"code");this.code="ERR_ABORTED"}}function e5(n){n.sort((i,s)=>i.offset-s.offset);const t=[];let e,r;for(const i of n)e&&r&&i.offset-r<=2e3?(e.length=e.length+i.length-r+i.offset,e.blocks.push(i)):t.push(e={blocks:[i],length:i.length,offset:i.offset}),r=e.offset+e.length;return t}function ff(n){if(n&&n.aborted)if(typeof DOMException>"u"){const t=new $9("aborted");throw t.code="ERR_ABORTED",t}else throw new DOMException("aborted","AbortError")}const l0=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function u0(n,t,e,r){return n<r&&t>=e}class fI{constructor(t,e,r,i,s){j(this,"bbi");j(this,"refsByName");j(this,"cirTreeOffset");j(this,"isCompressed");j(this,"blockType");j(this,"cirTreePromise");j(this,"featureCache",new Ds({cache:new uI({maxSize:1e3}),fill:async({length:t,offset:e},r)=>this.bbi.read(t,e,{signal:r})}));if(this.bbi=t,this.refsByName=e,this.cirTreeOffset=r,this.isCompressed=i,this.blockType=s,!(r>=0))throw new Error("invalid cirTreeOffset!")}async readWigData(t,e,r,i,s){try{const o=this.refsByName[t];o===void 0&&i.complete();const a={chrId:o,start:e,end:r};this.cirTreePromise||(this.cirTreePromise=this.bbi.read(48,this.cirTreeOffset,s));const l=await this.cirTreePromise,u=new DataView(l.buffer).getUint32(4,!0);let f=[],h=0;const A=(p,w,I)=>{try{const b=p.subarray(w),B=new DataView(b.buffer,b.byteOffset,b.length);let E=0;const Q=B.getUint8(E);E+=2;const k=B.getUint16(E,!0);if(E+=2,Q===1){const S=[];for(let P=0;P<k;P++){const N=B.getUint32(E,!0);E+=4;const U=B.getUint32(E,!0);E+=4;const H=B.getUint32(E,!0);E+=4;const J=B.getUint32(E,!0);E+=4;const V=Number(B.getBigUint64(E,!0));E+=8;const $=Number(B.getBigUint64(E,!0));E+=8,S.push({startChrom:N,startBase:U,endBase:J,endChrom:H,blockOffset:V,blockSize:$,offset:E})}f=f.concat(S.filter(P=>d(P)).map(P=>({offset:P.blockOffset,length:P.blockSize})))}else if(Q===0){const S=[];for(let N=0;N<k;N++){const U=B.getUint32(E,!0);E+=4;const H=B.getUint32(E,!0);E+=4;const J=B.getUint32(E,!0);E+=4;const V=B.getUint32(E,!0);E+=4;const $=Number(B.getBigUint64(E,!0));E+=8,S.push({startChrom:U,startBase:H,endChrom:J,endBase:V,blockOffset:$,offset:E})}const P=S.filter(N=>d(N)).map(N=>N.blockOffset);P.length>0&&m(P,I+1)}}catch(y){i.error(y)}},d=p=>{const{startChrom:w,startBase:I,endChrom:y,endBase:b}=p;return(w<o||w===o&&I<=r)&&(y>o||y===o&&b>=e)},g=async(p,w,I)=>{try{const y=w.max-w.min,b=w.min,B=await this.featureCache.get(`${y}_${b}`,{length:y,offset:b},s==null?void 0:s.signal);for(const E of p)w.contains(E)&&(A(B,E-b,I),h-=1,h===0&&this.readFeatures(i,f,{...s,request:a}).catch(Q=>{i.error(Q)}))}catch(y){i.error(y)}},m=(p,w)=>{try{h+=p.length;const I=4+u*32;let y=new ks([{min:p[0],max:p[0]+I}]);for(let b=1;b<p.length;b+=1){const B=new ks([{min:p[b],max:p[b]+I}]);y=y.union(B)}y.getRanges().map(b=>g(p,b,w))}catch(I){i.error(I)}};m([this.cirTreeOffset+48],1);return}catch(o){i.error(o)}}parseSummaryBlock(t,e,r){const i=[];let s=e;const o=new DataView(t.buffer,t.byteOffset,t.length);for(;s<t.byteLength;){const a=o.getUint32(s,!0);s+=4;const l=o.getUint32(s,!0);s+=4;const c=o.getUint32(s,!0);s+=4;const u=o.getUint32(s,!0);s+=4;const f=o.getFloat32(s,!0);s+=4;const h=o.getFloat32(s,!0);s+=4;const A=o.getFloat32(s,!0);s+=4,s+=4,(!r||a===r.chrId&&u0(l,c,r.start,r.end))&&i.push({start:l,end:c,maxScore:h,minScore:f,summary:!0,score:A/(u||1)})}return i}parseBigBedBlock(t,e,r,i){const s=[];let o=e;const a=t,l=new DataView(a.buffer,a.byteOffset,a.length);for(;o<t.byteLength;){const c=o,u=l.getUint32(o,!0);o+=4;const f=l.getInt32(o,!0);o+=4;const h=l.getInt32(o,!0);o+=4;let A=o;for(;A<t.length&&t[A]!==0;A++);const d=t.subarray(o,A),g=(l0==null?void 0:l0.decode(d))??d.toString();o=A+1,s.push({chromId:u,start:f,end:h,rest:g,uniqueId:`bb-${r+c}`})}return i?s.filter(c=>u0(c.start,c.end,i.start,i.end)):s}parseBigWigBlock(t,e,r){const i=t.subarray(e),s=new DataView(i.buffer,i.byteOffset,i.length);let o=0;o+=4;const a=s.getInt32(o,!0);o+=8;const l=s.getUint32(o,!0);o+=4;const c=s.getUint32(o,!0);o+=4;const u=s.getUint8(o);o+=2;const f=s.getUint16(o,!0);o+=2;const h=new Array(f);switch(u){case 1:{for(let A=0;A<f;A++){const d=s.getInt32(o,!0);o+=4;const g=s.getInt32(o,!0);o+=4;const m=s.getFloat32(o,!0);o+=4,h[A]={start:d,end:g,score:m}}break}case 2:{for(let A=0;A<f;A++){const d=s.getInt32(o,!0);o+=4;const g=s.getFloat32(o,!0);o+=4,h[A]={score:g,start:d,end:d+c}}break}case 3:{for(let A=0;A<f;A++){const d=s.getFloat32(o,!0);o+=4;const g=a+A*l;h[A]={score:d,start:g,end:g+c}}break}}return r?h.filter(A=>u0(A.start,A.end,r.start,r.end)):h}async readFeatures(t,e,r={}){try{const{blockType:i,isCompressed:s}=this,{signal:o,request:a}=r,l=e5(e);ff(o),await Promise.all(l.map(async c=>{ff(o);const{length:u,offset:f}=c,h=await this.featureCache.get(`${u}_${f}`,c,o);for(const A of c.blocks){ff(o);let d=h.subarray(A.offset-c.offset);switch(s&&(d=Z9(d)),ff(o),i){case"summary":{t.next(this.parseSummaryBlock(d,0,a));break}case"bigwig":{t.next(this.parseBigWigBlock(d,0,a));break}case"bigbed":{t.next(this.parseBigBedBlock(d,0,A.offset*256,a));break}default:console.warn(`Don't know what to do with ${i}`)}}})),t.complete()}catch(i){t.error(i)}}}const t5=-2003829722,AI=-2021002517;function Fs(n){return new DataView(n.buffer,n.byteOffset,n.length)}class hI{constructor(t){j(this,"bbi");j(this,"headerP");j(this,"renameRefSeqs");const{filehandle:e,renameRefSeqs:r=o=>o,path:i,url:s}=t;if(this.renameRefSeqs=r,e)this.bbi=e;else if(s)this.bbi=new pn(s);else if(i)this.bbi=new at(i);else throw new Error("no file given")}getHeader(t){return this.headerP||(this.headerP=this._getHeader(t).catch(e=>{throw this.headerP=void 0,e})),this.headerP}async _getHeader(t){const e=await this._getMainHeader(t),r=await this._readChromTree(e,t);return{...e,...r}}async _getMainHeader(t,e=2e3){const r=await this.bbi.read(e,0,t),i=Fs(r),s=i.getInt32(0,!0);if(s!==t5&&s!==AI)throw new Error("not a BigWig/BigBed file");let o=0;const a=i.getInt32(o,!0);o+=4;const l=i.getUint16(o,!0);o+=2;const c=i.getUint16(o,!0);o+=2;const u=Number(i.getBigUint64(o,!0));o+=8;const f=Number(i.getBigUint64(o,!0));o+=8;const h=Number(i.getBigUint64(o,!0));o+=8;const A=i.getUint16(o,!0);o+=2;const d=i.getUint16(o,!0);o+=2;const g=Number(i.getBigUint64(o,!0));o+=8;const m=Number(i.getBigUint64(o,!0));o+=8;const p=i.getUint32(o,!0);o+=4;const w=Number(i.getBigUint64(o,!0));o+=8;const I=[];for(let E=0;E<c;E++){const Q=i.getUint32(o,!0);o+=4;const k=i.getUint32(o,!0);o+=4;const S=Number(i.getBigUint64(o,!0));o+=8;const P=Number(i.getBigUint64(o,!0));o+=8,I.push({reductionLevel:Q,reserved:k,dataOffset:S,indexOffset:P})}const y=a===AI?"bigbed":"bigwig";if(g>e||m>e-40)return this._getMainHeader(t,e*2);let b;if(m){const E=r.subarray(m);let Q=0;const k=Fs(E),S=Number(k.getBigUint64(Q,!0));Q+=8;const P=k.getFloat64(Q,!0);Q+=8;const N=k.getFloat64(Q,!0);Q+=8;const U=k.getFloat64(Q,!0);Q+=8;const H=k.getFloat64(Q,!0);Q+=8,b={scoreMin:P,scoreMax:N,scoreSum:U,scoreSumSquares:H,basesCovered:S}}else throw new Error("no stats");const B=new TextDecoder("utf8");return{zoomLevels:I,magic:a,extHeaderOffset:w,numZoomLevels:c,fieldCount:A,totalSummary:b,definedFieldCount:d,uncompressBufSize:p,asOffset:g,chromTreeOffset:u,totalSummaryOffset:m,unzoomedDataOffset:f,unzoomedIndexOffset:h,fileType:y,version:l,autoSql:g?B.decode(r.subarray(g,r.indexOf(0,g))):""}}async _readChromTree(t,e){const r=[],i={},s=t.chromTreeOffset,o=Fs(await this.bbi.read(32,s,e));let a=0;a+=4,a+=4;const l=o.getUint32(a,!0);a+=4;const c=o.getUint32(a,!0);a+=4,a+=8;const u=new TextDecoder("utf8"),f=async h=>{const A=await this.bbi.read(4,h),d=Fs(A);let g=0;const m=d.getUint8(g);g+=1,g+=1;const p=d.getUint16(g,!0);if(g+=2,m){const w=await this.bbi.read(p*(l+c),h+g),I=Fs(w);g=0;for(let y=0;y<p;y++){const b=u.decode(w.subarray(g,g+l)).replaceAll("\0","");g+=l;const B=I.getUint32(g,!0);g+=4;const E=I.getUint32(g,!0);g+=4,i[this.renameRefSeqs(b)]=B,r[B]={name:b,id:B,length:E}}}else{const w=[],I=Fs(await this.bbi.read(p*(l+8),h+g));g=0;for(let y=0;y<p;y++){g+=l;const b=Number(I.getBigUint64(g,!0));g+=8,w.push(f(b))}await Promise.all(w)}};return await f(s+32),{refsByName:i,refsByNumber:r}}async getUnzoomedView(t){const{unzoomedIndexOffset:e,refsByName:r,uncompressBufSize:i,fileType:s}=await this.getHeader(t);return new fI(this.bbi,r,e,i>0,s)}async getFeatureStream(t,e,r,i){await this.getHeader(i);const s=this.renameRefSeqs(t);let o;const{basesPerSpan:a,scale:l}=i||{};return a?o=await this.getView(1/a,i):l?o=await this.getView(l,i):o=await this.getView(1,i),new Ot(c=>{o.readWigData(s,e,r,c,i).catch(u=>{c.error(u)})})}async getFeatures(t,e,r,i){const s=await this.getFeatureStream(t,e,r,i);return(await sI(s.pipe(Y9()))).flat()}}class n5 extends hI{async getView(t,e){const{zoomLevels:r,refsByName:i,uncompressBufSize:s}=await this.getHeader(e),o=1/t,a=r.length-1;for(let l=a;l>=0;l-=1){const c=r[l];if(c&&c.reductionLevel<=2*o)return new fI(this.bbi,i,c.indexOffset,s>0,"summary")}return this.getUnzoomedView(e)}}function r5(n){return n.filter(t=>!!t)}class i5 extends hI{constructor(){super(...arguments);j(this,"readIndicesCache",new Ds({cache:new uI({maxSize:1}),fill:(e,r)=>this._readIndices({...e,signal:r})}))}readIndices(e={}){const{signal:r,...i}=e;return this.readIndicesCache.get(JSON.stringify(i),e,r)}async getView(e,r){return this.getUnzoomedView(r)}async _readIndices(e){const{extHeaderOffset:r}=await this.getHeader(e),i=await this.bbi.read(64,r),s=new DataView(i.buffer,i.byteOffset,i.length);let o=0;o+=2;const a=s.getUint16(o,!0);o+=2;const l=Number(s.getBigUint64(o,!0));if(o+=8,a===0)return[];const c=20,u=c*a,f=await this.bbi.read(u,l),h=[];for(let A=0;A<a;A+=1){const d=f.subarray(A*c),g=new DataView(d.buffer,d.byteOffset,d.length);let m=0;const p=g.getInt16(m,!0);m+=2;const w=g.getInt16(m,!0);m+=2;const I=Number(g.getBigUint64(m,!0));m+=12;const y=g.getInt16(m,!0);h.push({type:p,fieldcount:w,offset:I,field:y})}return h}async searchExtraIndexBlocks(e,r={}){const i=await this.readIndices(r);if(i.length===0)return[];const s=new TextDecoder("utf8"),o=i.map(async a=>{const{offset:l,field:c}=a,u=await this.bbi.read(32,l,r),f=new DataView(u.buffer,u.byteOffset,u.length);let h=0;h+=4;const A=f.getInt32(h,!0);h+=4;const d=f.getInt32(h,!0);h+=4;const g=f.getInt32(h,!0);h+=4,h+=8;const m=async p=>{const w=p,I=4+A*(d+g),b=await this.bbi.read(I,w,r),B=new DataView(b.buffer,b.byteOffset,b.length);let E=0;const Q=B.getInt8(E);E+=2;const k=B.getInt16(E,!0);E+=2;const S=[];if(Q===0){const P=[];for(let U=0;U<k;U++){const H=s.decode(b.subarray(E,E+d)).replaceAll("\0","");E+=d;const J=Number(B.getBigUint64(E,!0));E+=8,P.push({key:H,offset:J})}let N=0;for(const{key:U,offset:H}of P){if(e.localeCompare(U)<0&&N)return m(N);N=H}return m(N)}else if(Q===1){for(let P=0;P<k;P++){const N=s.decode(b.subarray(E,E+d)).replaceAll("\0","");E+=d;const U=Number(B.getBigUint64(E,!0));E+=8;const H=B.getUint32(E,!0);E+=4;const J=B.getUint32(E,!0);E+=4,S.push({key:N,offset:U,length:H,reserved:J})}for(const P of S)if(P.key===e)return{...P,field:c};return}};return m(l+32)});return r5(await Promise.all(o))}async searchExtraIndex(e,r={}){const i=await this.searchExtraIndexBlocks(e,r);if(i.length===0)return[];const s=await this.getUnzoomedView(r),o=i.map(l=>new Ot(c=>{s.readFeatures(c,[l],r).catch(u=>{c.error(u)})}).pipe(cI((c,u)=>c.concat(u)),oI(c=>{for(const u of c)u.field=l.field;return c})));return(await sI(H9(...o))).filter(l=>{var c;return((c=l.rest)==null?void 0:c.split("	")[(l.field||0)-3])===e})}}const dI=Object.freeze(Object.defineProperty({__proto__:null,BigBed:i5,BigWig:n5},Symbol.toStringTag,{value:"Module"}));function s5(n,t){function e(){this.constructor=n}e.prototype=t.prototype,n.prototype=new e}function Ms(n,t,e,r){this.message=n,this.expected=t,this.found=e,this.location=r,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ms)}s5(Ms,Error),Ms.buildMessage=function(n,t){var e={literal:function(c){return'"'+i(c.text)+'"'},class:function(c){var u="",f;for(f=0;f<c.parts.length;f++)u+=c.parts[f]instanceof Array?s(c.parts[f][0])+"-"+s(c.parts[f][1]):s(c.parts[f]);return"["+(c.inverted?"^":"")+u+"]"},any:function(c){return"any character"},end:function(c){return"end of input"},other:function(c){return c.description}};function r(c){return c.charCodeAt(0).toString(16).toUpperCase()}function i(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+r(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+r(u)})}function s(c){return c.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+r(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+r(u)})}function o(c){return e[c.type](c)}function a(c){var u=new Array(c.length),f,h;for(f=0;f<c.length;f++)u[f]=o(c[f]);if(u.sort(),u.length>0){for(f=1,h=1;f<u.length;f++)u[f-1]!==u[f]&&(u[h]=u[f],h++);u.length=h}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}function l(c){return c?'"'+i(c)+'"':"end of input"}return"Expected "+a(n)+" but "+l(t)+" found."};function o5(n,t){t=t!==void 0?t:{};var e={},r={declaration:nb},i=nb,s="(",o=pe("(",!1),a=")",l=pe(")",!1),c=function(x,M,O,z){return{type:x,name:M,comment:O,fields:z}},u="simple",f=pe("simple",!1),h="object",A=pe("object",!1),d="table",g=pe("table",!1),m="auto",p=pe("auto",!1),w="primary",I=pe("primary",!1),y="index",b=pe("index",!1),B="unique",E=pe("unique",!1),Q=function(x,M){return M},k=function(x,M){return x.name&&M.unshift(x),M},S="#",P=pe("#",!1),N=";",U=pe(";",!1),H=function(x,M,O){return{type:x,name:M,comment:O}},J="[",V=pe("[",!1),$="]",le=pe("]",!1),de=function(x,M,O,z){return{type:x,size:M,name:O,comment:z}},ge=function(x,M,O,z){return{type:x,vals:M,name:O,comment:z}},Me=",",Bn=pe(",",!1),vn=function(x,M){return M.unshift(x),M},Mr="int",Po=pe("int",!1),Le="uint",Yt=pe("uint",!1),vt="short",_=pe("short",!1),ee="ushort",re=pe("ushort",!1),L="byte",lt=pe("byte",!1),he="ubyte",mt=pe("ubyte",!1),ut="float",Jn=pe("float",!1),dl="char",uL=pe("char",!1),OE="string",fL=pe("string",!1),UE="lstring",AL=pe("lstring",!1),GE="enum",hL=pe("enum",!1),zE="double",dL=pe("double",!1),HE="bigint",gL=pe("bigint",!1),_E="set",pL=pe("set",!1),mL=function(x,M){return x+" "+M},CL=/^[a-zA-Z_]/,yL=gl([["a","z"],["A","Z"],"_"],!1,!1),VE=/^[a-zA-Z0-9_]/,YE=gl([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),wL=function(x){return ZE()},JE=/^[^\n\r]/,qE=gl([`
`,"\r"],!0,!1),xL=function(x){return x.join("").replace(/^"/,"").replace(/"$/,"")},IL=$E("integer"),KE=/^[0-9]/,jE=gl([["0","9"]],!1,!1),EL=function(){return parseInt(ZE(),10)},bL=$E("whitespace"),WE=/^[ \t\n\r]/,XE=gl([" ","	",`
`,"\r"],!1,!1),v=0,Ct=0,Of=[{line:1,column:1}],Qn=0,G0=[],K=0,Uf;if("startRule"in t){if(!(t.startRule in r))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');i=r[t.startRule]}function ZE(){return n.substring(Ct,v)}function pe(x,M){return{type:"literal",text:x,ignoreCase:M}}function gl(x,M,O){return{type:"class",parts:x,inverted:M,ignoreCase:O}}function BL(){return{type:"end"}}function $E(x){return{type:"other",description:x}}function eb(x){var M=Of[x],O;if(M)return M;for(O=x-1;!Of[O];)O--;for(M=Of[O],M={line:M.line,column:M.column};O<x;)n.charCodeAt(O)===10?(M.line++,M.column=1):M.column++,O++;return Of[x]=M,M}function tb(x,M){var O=eb(x),z=eb(M);return{start:{offset:x,line:O.line,column:O.column},end:{offset:M,line:z.line,column:z.column}}}function W(x){v<Qn||(v>Qn&&(Qn=v,G0=[]),G0.push(x))}function vL(x,M,O){return new Ms(Ms.buildMessage(x,M),x,M,O)}function nb(){var x,M,O,z,q,xe,Se,Jt,Rr,qn,Nr,Kn,Tr,jn;return x=v,M=oe(),M!==e?(O=rb(),O!==e?(z=oe(),z!==e?(q=ib(),q!==e?(xe=oe(),xe!==e?(Se=Gf(),Se!==e?(Jt=oe(),Jt!==e?(n.charCodeAt(v)===40?(Rr=s,v++):(Rr=e,K===0&&W(o)),Rr!==e?(qn=oe(),qn!==e?(Nr=QL(),Nr!==e?(Kn=oe(),Kn!==e?(n.charCodeAt(v)===41?(Tr=a,v++):(Tr=e,K===0&&W(l)),Tr!==e?(jn=oe(),jn!==e?(Ct=x,M=c(O,q,Se,Nr),x=M):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e),x}function rb(){var x;return n.substr(v,6)===u?(x=u,v+=6):(x=e,K===0&&W(f)),x===e&&(n.substr(v,6)===h?(x=h,v+=6):(x=e,K===0&&W(A)),x===e&&(n.substr(v,5)===d?(x=d,v+=5):(x=e,K===0&&W(g)))),x}function ib(){var x,M,O,z;return x=rn(),x===e&&(x=v,M=rn(),M!==e?(O=sb(),O!==e?(M=[M,O],x=M):(v=x,x=e)):(v=x,x=e),x===e&&(x=v,M=rn(),M!==e?(n.substr(v,4)===m?(O=m,v+=4):(O=e,K===0&&W(p)),O!==e?(M=[M,O],x=M):(v=x,x=e)):(v=x,x=e),x===e&&(x=v,M=rn(),M!==e?(O=sb(),O!==e?(n.substr(v,4)===m?(z=m,v+=4):(z=e,K===0&&W(p)),z!==e?(M=[M,O,z],x=M):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)))),x}function sb(){var x;return n.substr(v,7)===w?(x=w,v+=7):(x=e,K===0&&W(I)),x===e&&(n.substr(v,5)===y?(x=y,v+=5):(x=e,K===0&&W(b)),x===e&&(n.substr(v,6)===B?(x=B,v+=6):(x=e,K===0&&W(E)))),x}function Gf(){var x;return x=ob(),x===e&&(x=oe()),x}function QL(){var x,M,O,z,q,xe,Se;if(x=v,M=z0(),M!==e)if(O=oe(),O!==e){for(z=[],q=v,xe=oe(),xe!==e?(Se=z0(),Se!==e?(Ct=q,xe=Q(M,Se),q=xe):(v=q,q=e)):(v=q,q=e);q!==e;)z.push(q),q=v,xe=oe(),xe!==e?(Se=z0(),Se!==e?(Ct=q,xe=Q(M,Se),q=xe):(v=q,q=e)):(v=q,q=e);z!==e?(q=oe(),q!==e?(Ct=x,M=k(M,z),x=M):(v=x,x=e)):(v=x,x=e)}else v=x,x=e;else v=x,x=e;return x}function SL(){var x;return n.charCodeAt(v)===35?(x=S,v++):(x=e,K===0&&W(P)),x}function DL(){var x,M,O,z,q;return x=v,M=oe(),M!==e?(O=SL(),O!==e?(z=ob(),z!==e?(q=oe(),q!==e?(M=[M,O,z,q],x=M):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e),x}function z0(){var x,M,O,z,q,xe,Se,Jt,Rr,qn,Nr,Kn,Tr,jn;return x=v,M=H0(),M!==e?(O=oe(),O!==e?(z=rn(),z!==e?(q=oe(),q!==e?(n.charCodeAt(v)===59?(xe=N,v++):(xe=e,K===0&&W(U)),xe!==e?(Se=oe(),Se!==e?(Jt=Gf(),Jt!==e?(Ct=x,M=H(M,z,Jt),x=M):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e),x===e&&(x=v,M=H0(),M!==e?(O=oe(),O!==e?(n.charCodeAt(v)===91?(z=J,v++):(z=e,K===0&&W(V)),z!==e?(q=oe(),q!==e?(xe=FL(),xe!==e?(Se=oe(),Se!==e?(n.charCodeAt(v)===93?(Jt=$,v++):(Jt=e,K===0&&W(le)),Jt!==e?(Rr=oe(),Rr!==e?(qn=rn(),qn!==e?(Nr=oe(),Nr!==e?(n.charCodeAt(v)===59?(Kn=N,v++):(Kn=e,K===0&&W(U)),Kn!==e?(Tr=oe(),Tr!==e?(jn=Gf(),jn!==e?(Ct=x,M=de(M,xe,qn,jn),x=M):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e),x===e&&(x=v,M=H0(),M!==e?(O=oe(),O!==e?(n.charCodeAt(v)===40?(z=s,v++):(z=e,K===0&&W(o)),z!==e?(q=oe(),q!==e?(xe=kL(),xe!==e?(Se=oe(),Se!==e?(n.charCodeAt(v)===41?(Jt=a,v++):(Jt=e,K===0&&W(l)),Jt!==e?(Rr=oe(),Rr!==e?(qn=rn(),qn!==e?(Nr=oe(),Nr!==e?(n.charCodeAt(v)===59?(Kn=N,v++):(Kn=e,K===0&&W(U)),Kn!==e?(Tr=oe(),Tr!==e?(jn=Gf(),jn!==e?(Ct=x,M=ge(M,xe,qn,jn),x=M):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e)):(v=x,x=e),x===e&&(x=DL()))),x}function kL(){var x,M,O,z,q,xe,Se;if(x=v,M=rn(),M!==e){for(O=[],z=v,n.charCodeAt(v)===44?(q=Me,v++):(q=e,K===0&&W(Bn)),q!==e?(xe=oe(),xe!==e?(Se=rn(),Se!==e?(Ct=z,q=Q(M,Se),z=q):(v=z,z=e)):(v=z,z=e)):(v=z,z=e);z!==e;)O.push(z),z=v,n.charCodeAt(v)===44?(q=Me,v++):(q=e,K===0&&W(Bn)),q!==e?(xe=oe(),xe!==e?(Se=rn(),Se!==e?(Ct=z,q=Q(M,Se),z=q):(v=z,z=e)):(v=z,z=e)):(v=z,z=e);O!==e?(Ct=x,M=vn(M,O),x=M):(v=x,x=e)}else v=x,x=e;return x}function H0(){var x,M,O,z;return n.substr(v,3)===Mr?(x=Mr,v+=3):(x=e,K===0&&W(Po)),x===e&&(n.substr(v,4)===Le?(x=Le,v+=4):(x=e,K===0&&W(Yt)),x===e&&(n.substr(v,5)===vt?(x=vt,v+=5):(x=e,K===0&&W(_)),x===e&&(n.substr(v,6)===ee?(x=ee,v+=6):(x=e,K===0&&W(re)),x===e&&(n.substr(v,4)===L?(x=L,v+=4):(x=e,K===0&&W(lt)),x===e&&(n.substr(v,5)===he?(x=he,v+=5):(x=e,K===0&&W(mt)),x===e&&(n.substr(v,5)===ut?(x=ut,v+=5):(x=e,K===0&&W(Jn)),x===e&&(n.substr(v,4)===dl?(x=dl,v+=4):(x=e,K===0&&W(uL)),x===e&&(n.substr(v,6)===OE?(x=OE,v+=6):(x=e,K===0&&W(fL)),x===e&&(n.substr(v,7)===UE?(x=UE,v+=7):(x=e,K===0&&W(AL)),x===e&&(n.substr(v,4)===GE?(x=GE,v+=4):(x=e,K===0&&W(hL)),x===e&&(n.substr(v,6)===zE?(x=zE,v+=6):(x=e,K===0&&W(dL)),x===e&&(n.substr(v,6)===HE?(x=HE,v+=6):(x=e,K===0&&W(gL)),x===e&&(n.substr(v,3)===_E?(x=_E,v+=3):(x=e,K===0&&W(pL)),x===e&&(x=v,M=rb(),M!==e?(O=oe(),O!==e?(z=ib(),z!==e?(Ct=x,M=mL(M,z),x=M):(v=x,x=e)):(v=x,x=e)):(v=x,x=e))))))))))))))),x}function FL(){var x;return x=ML(),x===e&&(x=rn()),x}function rn(){var x,M,O,z,q;if(x=v,M=v,CL.test(n.charAt(v))?(O=n.charAt(v),v++):(O=e,K===0&&W(yL)),O!==e){for(z=[],VE.test(n.charAt(v))?(q=n.charAt(v),v++):(q=e,K===0&&W(YE));q!==e;)z.push(q),VE.test(n.charAt(v))?(q=n.charAt(v),v++):(q=e,K===0&&W(YE));z!==e?(O=[O,z],M=O):(v=M,M=e)}else v=M,M=e;return M!==e&&(Ct=x,M=wL()),x=M,x}function ob(){var x,M,O;for(x=v,M=[],JE.test(n.charAt(v))?(O=n.charAt(v),v++):(O=e,K===0&&W(qE));O!==e;)M.push(O),JE.test(n.charAt(v))?(O=n.charAt(v),v++):(O=e,K===0&&W(qE));return M!==e&&(Ct=x,M=xL(M)),x=M,x}function ML(){var x,M,O,z;if(K++,x=v,M=oe(),M!==e){if(O=[],KE.test(n.charAt(v))?(z=n.charAt(v),v++):(z=e,K===0&&W(jE)),z!==e)for(;z!==e;)O.push(z),KE.test(n.charAt(v))?(z=n.charAt(v),v++):(z=e,K===0&&W(jE));else O=e;O!==e?(Ct=x,M=EL(),x=M):(v=x,x=e)}else v=x,x=e;return K--,x===e&&(M=e,K===0&&W(IL)),x}function oe(){var x,M;for(K++,x=[],WE.test(n.charAt(v))?(M=n.charAt(v),v++):(M=e,K===0&&W(XE));M!==e;)x.push(M),WE.test(n.charAt(v))?(M=n.charAt(v),v++):(M=e,K===0&&W(XE));return K--,x===e&&(M=e,K===0&&W(bL)),x}if(Uf=i(),Uf!==e&&v===n.length)return Uf;throw Uf!==e&&v<n.length&&W(BL()),vL(G0,Qn<n.length?n.charAt(Qn):null,Qn<n.length?tb(Qn,Qn+1):tb(Qn,Qn))}const gI={SyntaxError:Ms,parse:o5},f0=Object.fromEntries(Object.entries(Object.freeze(Object.defineProperty({__proto__:null,bigChain:`table bigChain
"bigChain pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint score;         "Score (0-1000)"
    char[1] strand;     "+ or - for strand"
    uint tSize;         "size of target sequence"
    string qName;       "name of query sequence"
    uint qSize;         "size of query sequence"
    uint qStart;        "start of alignment on query sequence"
    uint qEnd;          "end of alignment on query sequence"
    uint chainScore;    "score from chain"
    )`,bigGenePred:`table bigGenePred
"bigGenePred gene models"
   (
   string chrom;       "Reference sequence chromosome or scaffold"
   uint   chromStart;  "Start position in chromosome"
   uint   chromEnd;    "End position in chromosome"
   string name;        "Name or ID of item, ideally both human readable and unique"
   uint score;         "Score (0-1000)"
   char[1] strand;     "+ or - for strand"
   uint thickStart;    "Start of where display should be thick (start codon)"
   uint thickEnd;      "End of where display should be thick (stop codon)"
   uint reserved;       "RGB value (use R,G,B string in input file)"
   int blockCount;     "Number of blocks"
   int[blockCount] blockSizes; "Comma separated list of block sizes"
   int[blockCount] chromStarts; "Start positions relative to chromStart"
   string name2;       "Alternative/human readable name"
   string cdsStartStat; "Status of CDS start annotation (none, unknown, incomplete, or complete)"
   string cdsEndStat;   "Status of CDS end annotation (none, unknown, incomplete, or complete)"
   int[blockCount] exonFrames; "Exon frame {0,1,2}, or -1 if no frame for exon"
   string type;        "Transcript type"
   string geneName;    "Primary identifier for gene"
   string geneName2;   "Alternative/human readable gene name"
   string geneType;    "Gene type"
   )`,bigInteract:`table interact
"interaction between two regions"
    (
    string chrom;        "Chromosome (or contig, scaffold, etc.). For interchromosomal, use 2 records"
    uint chromStart;     "Start position of lower region. For interchromosomal, set to chromStart of this region"
    uint chromEnd;       "End position of upper region. For interchromosomal, set to chromEnd of this region"
    string name;         "Name of item, for display.  Usually 'sourceName/targetName/exp' or empty"
    uint score;          "Score (0-1000)"
    double value;        "Strength of interaction or other data value. Typically basis for score"
    string exp;          "Experiment name (metadata for filtering). Use . if not applicable"
    string color;        "Item color.  Specified as r,g,b or hexadecimal #RRGGBB or html color name, as in //www.w3.org/TR/css3-color/#html4. Use 0 and spectrum setting to shade by score"
    string sourceChrom;  "Chromosome of source region (directional) or lower region. For non-directional interchromosomal, chrom of this region."
    uint sourceStart;    "Start position in chromosome of source/lower/this region"
    uint sourceEnd;      "End position in chromosome of source/lower/this region"
    string sourceName;   "Identifier of source/lower/this region"
    string sourceStrand; "Orientation of source/lower/this region: + or -.  Use . if not applicable"
    string targetChrom;  "Chromosome of target region (directional) or upper region. For non-directional interchromosomal, chrom of other region"
    uint targetStart;    "Start position in chromosome of target/upper/this region"
    uint targetEnd;      "End position in chromosome of target/upper/this region"
    string targetName;   "Identifier of target/upper/this region"
    string targetStrand; "Orientation of target/upper/this region: + or -.  Use . if not applicable"

    )`,bigLink:`table bigLink
"bigLink pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint qStart;        "start of alignment on query sequence"
    )`,bigMaf:`table bedMaf
"Bed3 with MAF block"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start position in chromosome"
    uint   chromEnd;   "End position in chromosome"
    lstring mafBlock;   "MAF block"
    )`,bigNarrowPeak:`table bigNarrowPeak
"BED6+4 Peaks of signal enrichment based on pooled, normalized (interpreted) data."
(
    string chrom;        "Reference sequence chromosome or scaffold"
    uint   chromStart;   "Start position in chromosome"
    uint   chromEnd;     "End position in chromosome"
    string name;	 "Name given to a region (preferably unique). Use . if no name is assigned"
    uint   score;        "Indicates how dark the peak will be displayed in the browser (0-1000) "
    char[1]  strand;     "+ or - or . for unknown"
    float  signalValue;  "Measurement of average enrichment for the region"
    float  pValue;       "Statistical significance of signal value (-log10). Set to -1 if not used."
    float  qValue;       "Statistical significance with multiple-test correction applied (FDR -log10). Set to -1 if not used."
    int   peak;         "Point-source called for this peak; 0-based offset from chromStart. Set to -1 if no point-source called."
)`,bigPsl:`table bigPsl
"bigPsl pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint score;         "Score (0-1000)"
    char[1] strand;     "+ or - indicates whether the query aligns to the + or - strand on the reference"
    uint thickStart;    "Start of where display should be thick (start codon)"
    uint thickEnd;      "End of where display should be thick (stop codon)"
    uint reserved;       "RGB value (use R,G,B string in input file)"
    int blockCount;     "Number of blocks"
    int[blockCount] blockSizes; "Comma separated list of block sizes"
    int[blockCount] chromStarts; "Start positions relative to chromStart"

    uint    oChromStart;"Start position in other chromosome"
    uint    oChromEnd;  "End position in other chromosome"
    char[1] oStrand;    "+ or -, - means that psl was reversed into BED-compatible coordinates"
    uint    oChromSize; "Size of other chromosome."
    int[blockCount] oChromStarts; "Start positions relative to oChromStart or from oChromStart+oChromSize depending on strand"

    lstring  oSequence;  "Sequence on other chrom (or empty)"
    string   oCDS;       "CDS in NCBI format"

    uint    chromSize;"Size of target chromosome"

    uint match;        "Number of bases matched."
    uint misMatch; " Number of bases that don't match "
    uint repMatch; " Number of bases that match but are part of repeats "
    uint nCount;   " Number of 'N' bases "
    uint seqType;    "0=empty, 1=nucleotide, 2=amino_acid"
    )`,defaultBedSchema:`table defaultBedSchema
"BED12"
    (
    string chrom;      "The name of the chromosome (e.g. chr3, chrY, chr2_random) or scaffold (e.g. scaffold10671)."
    uint   chromStart; "The starting position of the feature in the chromosome or scaffold. The first base in a chromosome is numbered 0."
    uint   chromEnd;   "The ending position of the feature in the chromosome or scaffold. The chromEnd base is not included in the display of the feature. For example, the first 100 bases of a chromosome are defined as chromStart=0, chromEnd=100, and span the bases numbered 0-99."
    string   name;   "Defines the name of the BED line."
    float   score;   "Feature score, doesn't care about the 0-1000 limit as in bed"
    char   strand;   "Defines the strand. Either '.' (=no strand) or '+' or '-'"
    uint thickStart; "The starting position at which the feature is drawn thickly (for example, the start codon in gene displays). When there is no thick part, thickStart and thickEnd are usually set to the chromStart position."
    uint thickEnd; "The ending position at which the feature is drawn thickly (for example the stop codon in gene displays)."
    string itemRgb; "An RGB value of the form R,G,B (e.g. 255,0,0). "
    uint blockCount; " The number of blocks (exons) in the BED line."
    uint[blockCount] blockSizes; " A comma-separated list of the block sizes. The number of items in this list should correspond to blockCount."
    uint[blockCount] blockStarts; "A comma-separated list of block starts. All of the blockStart positions should be calculated relative to chromStart. The number of items in this list should correspond to blockCount."
    )`,mafFrames:`table mafFrames
"codon frame assignment for MAF components"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start range in chromosome"
    uint   chromEnd;   "End range in chromosome"
    string src;        "Name of sequence source in MAF"
    ubyte frame;       "frame (0,1,2) for first base(+) or last bast(-)"
    char[1] strand;    "+ or -"
    string name;       "Name of gene used to define frame"
    int    prevFramePos;  "target position of the previous base (in transcription direction) that continues this frame, or -1 if none, or frame not contiguous"
    int    nextFramePos;  "target position of the next base (in transcription direction) that continues this frame, or -1 if none, or frame not contiguous"
    ubyte  isExonStart;  "does this start the CDS portion of an exon?"
    ubyte  isExonEnd;    "does this end the CDS portion of an exon?"
    )`,mafSummary:`table mafSummary
"Positions and scores for alignment blocks"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start position in chromosome"
    uint   chromEnd;   "End position in chromosome"
    string src;        "Sequence name or database of alignment"
    float  score;      "Floating point score."
    char[1] leftStatus;  "Gap/break annotation for preceding block"
    char[1] rightStatus; "Gap/break annotation for following block"
    )`},Symbol.toStringTag,{value:"Module"}))).map(([n,t])=>[n,gI.parse(t.trim())]));function A0(n){const t=new Set(["uint","int","float","long"]);return{...n,fields:n.fields.map(e=>({...e,isArray:e.size&&e.type!=="char",arrayIsNumeric:e.size&&t.has(e.type),isNumeric:!e.size&&t.has(e.type)})).filter(e=>!!e.name)}}const a5={".":0,"-":-1,"+":1};function c5(n){var t;return n.length>=12&&!Number.isNaN(Number.parseInt(n[9],10))&&((t=n[10])==null?void 0:t.split(",").filter(e=>!!e).length)===Number.parseInt(n[9],10)}class l5{constructor(t={}){if(t.autoSql)this.autoSql=A0(gI.parse(t.autoSql));else if(t.type){if(!f0[t.type])throw new Error("Type not found");this.autoSql=A0(f0[t.type])}else this.autoSql=A0(f0.defaultBedSchema),this.attemptDefaultBed=!0}parseLine(t,e={}){const{autoSql:r}=this,{uniqueId:i}=e,s=Array.isArray(t)?t:t.split("	");let o={};if(!this.attemptDefaultBed||this.attemptDefaultBed&&c5(s))for(let a=0;a<r.fields.length;a++){const l=r.fields[a];let c=s[a];const{isNumeric:u,isArray:f,arrayIsNumeric:h,name:A}=l;if(c==null)break;if(c!=="."){if(u){const d=Number(c);c=Number.isNaN(d)?c:d}else f&&(c=c.split(","),c.at(-1)===""&&c.pop(),h&&(c=c.map(Number)));o[A]=c}}else{const a=["chrom","chromStart","chromEnd","name"];o=Object.fromEntries(s.map((l,c)=>[a[c]||"field"+c,l])),o.chromStart=+o.chromStart,o.chromEnd=+o.chromEnd,Number.isNaN(Number.parseFloat(o.field4))||(o.score=+o.field4,delete o.field4),(o.field5==="+"||o.field5==="-")&&(o.strand=o.field5,delete o.field5)}return i&&(o.uniqueId=i),o.strand=a5[o.strand]||0,o.chrom=decodeURIComponent(o.chrom),o}}const u5=Object.freeze(Object.defineProperty({__proto__:null,default:l5},Symbol.toStringTag,{value:"Module"}));var He=function(n,t,e,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,e):i?i.value=e:t.set(n,e),e},G=function(n,t,e,r){if(e==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?r:e==="a"?r.call(n):r?r.value:t.get(n)},ye,Bt,we,Fe,mi,hc,Ci,Af,$t,pI,h0,d0,g0,mI,hf;class dc extends Map{constructor(t={}){if(super(),ye.add(this),Bt.set(this,0),we.set(this,new Map),Fe.set(this,new Map),mi.set(this,void 0),hc.set(this,void 0),Ci.set(this,void 0),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof t.maxAge=="number"&&t.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");He(this,mi,t.maxSize,"f"),He(this,hc,t.maxAge||Number.POSITIVE_INFINITY,"f"),He(this,Ci,t.onEviction,"f")}get __oldCache(){return G(this,Fe,"f")}get(t){if(G(this,we,"f").has(t)){const e=G(this,we,"f").get(t);return G(this,ye,"m",h0).call(this,t,e)}if(G(this,Fe,"f").has(t)){const e=G(this,Fe,"f").get(t);if(!G(this,ye,"m",$t).call(this,t,e))return G(this,ye,"m",mI).call(this,t,e),e.value}}set(t,e,{maxAge:r=G(this,hc,"f")}={}){const i=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;return G(this,we,"f").has(t)?G(this,we,"f").set(t,{value:e,expiry:i}):G(this,ye,"m",g0).call(this,t,{value:e,expiry:i}),this}has(t){return G(this,we,"f").has(t)?!G(this,ye,"m",$t).call(this,t,G(this,we,"f").get(t)):G(this,Fe,"f").has(t)?!G(this,ye,"m",$t).call(this,t,G(this,Fe,"f").get(t)):!1}peek(t){if(G(this,we,"f").has(t))return G(this,ye,"m",d0).call(this,t,G(this,we,"f"));if(G(this,Fe,"f").has(t))return G(this,ye,"m",d0).call(this,t,G(this,Fe,"f"))}expiresIn(t){const e=G(this,we,"f").get(t)??G(this,Fe,"f").get(t);if(e)return e.expiry?e.expiry-Date.now():Number.POSITIVE_INFINITY}delete(t){var e;const r=G(this,we,"f").delete(t);return r&&He(this,Bt,(e=G(this,Bt,"f"),e--,e),"f"),G(this,Fe,"f").delete(t)||r}clear(){G(this,we,"f").clear(),G(this,Fe,"f").clear(),He(this,Bt,0,"f")}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");const e=[...G(this,ye,"m",hf).call(this)],r=e.length-t;r<0?(He(this,we,new Map(e),"f"),He(this,Fe,new Map,"f"),He(this,Bt,e.length,"f")):(r>0&&G(this,ye,"m",Af).call(this,e.slice(0,r)),He(this,Fe,new Map(e.slice(r)),"f"),He(this,we,new Map,"f"),He(this,Bt,0,"f")),He(this,mi,t,"f")}evict(t=1){const e=t;if(!e||e<=0)return;const r=[...G(this,ye,"m",hf).call(this)],i=Math.trunc(Math.min(e,Math.max(r.length-1,0)));i<=0||(G(this,ye,"m",Af).call(this,r.slice(0,i)),He(this,Fe,new Map(r.slice(i)),"f"),He(this,we,new Map,"f"),He(this,Bt,0,"f"))}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[(Bt=new WeakMap,we=new WeakMap,Fe=new WeakMap,mi=new WeakMap,hc=new WeakMap,Ci=new WeakMap,ye=new WeakSet,Af=function(e){if(typeof G(this,Ci,"f")=="function")for(const[r,i]of e)G(this,Ci,"f").call(this,r,i.value)},$t=function(e,r){return typeof r.expiry=="number"&&r.expiry<=Date.now()?(typeof G(this,Ci,"f")=="function"&&G(this,Ci,"f").call(this,e,r.value),this.delete(e)):!1},pI=function(e,r){if(!G(this,ye,"m",$t).call(this,e,r))return r.value},h0=function(e,r){return r.expiry?G(this,ye,"m",pI).call(this,e,r):r.value},d0=function(e,r){const i=r.get(e);return G(this,ye,"m",h0).call(this,e,i)},g0=function(e,r){var i;G(this,we,"f").set(e,r),He(this,Bt,(i=G(this,Bt,"f"),i++,i),"f"),G(this,Bt,"f")>=G(this,mi,"f")&&(He(this,Bt,0,"f"),G(this,ye,"m",Af).call(this,G(this,Fe,"f")),He(this,Fe,G(this,we,"f"),"f"),He(this,we,new Map,"f"))},mI=function(e,r){G(this,Fe,"f").delete(e),G(this,ye,"m",g0).call(this,e,r)},hf=function*(){for(const e of G(this,Fe,"f")){const[r,i]=e;G(this,we,"f").has(r)||G(this,ye,"m",$t).call(this,r,i)||(yield e)}for(const e of G(this,we,"f")){const[r,i]=e;G(this,ye,"m",$t).call(this,r,i)||(yield e)}},Symbol.iterator)](){for(const t of G(this,we,"f")){const[e,r]=t;G(this,ye,"m",$t).call(this,e,r)||(yield[e,r.value])}for(const t of G(this,Fe,"f")){const[e,r]=t;G(this,we,"f").has(e)||G(this,ye,"m",$t).call(this,e,r)||(yield[e,r.value])}}*entriesDescending(){let t=[...G(this,we,"f")];for(let e=t.length-1;e>=0;--e){const r=t[e],[i,s]=r;G(this,ye,"m",$t).call(this,i,s)||(yield[i,s.value])}t=[...G(this,Fe,"f")];for(let e=t.length-1;e>=0;--e){const r=t[e],[i,s]=r;G(this,we,"f").has(i)||G(this,ye,"m",$t).call(this,i,s)||(yield[i,s.value])}}*entriesAscending(){for(const[t,e]of G(this,ye,"m",hf).call(this))yield[t,e.value]}get size(){if(!G(this,Bt,"f"))return G(this,Fe,"f").size;let t=0;for(const e of G(this,Fe,"f").keys())G(this,we,"f").has(e)||t++;return Math.min(G(this,Bt,"f")+t,G(this,mi,"f"))}get maxSize(){return G(this,mi,"f")}get maxAge(){return G(this,hc,"f")}entries(){return this.entriesAscending()}forEach(t,e=this){for(const[r,i]of this.entriesAscending())t.call(e,i,r,this)}get[Symbol.toStringTag](){return"QuickLRU"}toString(){return`QuickLRU(${this.size}/${this.maxSize})`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}let CI=class{constructor(t,e,r,i){this.minv=t,this.maxv=e,this.bin=r,this._fetchedSize=i}toUniqueString(){return`${this.minv.toString()}..${this.maxv.toString()} (bin ${this.bin}, fetchedSize ${this.fetchedSize()})`}toString(){return this.toUniqueString()}compareTo(t){return this.minv.compareTo(t.minv)||this.maxv.compareTo(t.maxv)||this.bin-t.bin}fetchedSize(){return this._fetchedSize!==void 0?this._fetchedSize:this.maxv.blockPosition+65536-this.minv.blockPosition}};const yI=65536,f5=yI*yI;function A5(n,t=0){const e=n[t]|n[t+1]<<8|n[t+2]<<16|n[t+3]<<24;return((n[t+4]|n[t+5]<<8|n[t+6]<<16|n[t+7]<<24)>>>0)*f5+(e>>>0)}function h5(n={}){return"aborted"in n?{signal:n}:n}function p0(n,t){const e=n.length;if(e===0)return n;let r;if(t){const l=t.blockPosition,c=t.dataPosition;r=[];for(let u=0;u<e;u++){const f=n[u],h=f.maxv;(h.blockPosition-l||h.dataPosition-c)>0&&r.push(f)}if(r.length===0)return r}else r=n;r.sort((l,c)=>{const u=l.minv.blockPosition-c.minv.blockPosition;return u!==0?u:l.minv.dataPosition-c.minv.dataPosition});const i=[];let s=r[0];i.push(s);let o=s.minv.blockPosition,a=s.maxv.blockPosition;for(let l=1;l<r.length;l++){const c=r[l],u=c.minv.blockPosition,f=c.maxv.blockPosition;if(u-a<65e3&&f-o<5e6){const h=c.maxv,A=s.maxv;(f-a||h.dataPosition-A.dataPosition)>0&&(s.maxv=h,a=f)}else i.push(c),s=c,o=u,a=f}return i}function wI(n,t){return{lineCount:A5(n,t)}}function gc(n,t){return n?n.compareTo(t)>0?t:n:t}function d5(n,t=e=>e){let e=0,r=0;const i=[],s={};for(let o=0;o<n.length;o+=1)if(!n[o]){if(r<o){let a="";for(let l=r;l<o;l++)a+=String.fromCharCode(n[l]);a=t(a),i[e]=a,s[a]=e}r=o+1,e+=1}return{refNameToId:s,refIdToName:i}}function g5(n){let t=0;for(const i of n)t+=i.length;const e=new Uint8Array(t);let r=0;for(const i of n)e.set(i,r),r+=i.length;return e}function p5(n,t,e){return!!((n&t)!==t||n&e)}function m5(n,t){return t==="*"?n===void 0:`${n}`!=`${t}`}function C5(n){if(!n)return"";const{flagInclude:t=0,flagExclude:e=0,tagFilter:r}=n,i=r?`:${r.tag}=${r.value??"*"}`:"";return`:f${t}x${e}${i}`}let xI=class{constructor({filehandle:t,renameRefSeq:e=r=>r}){this.filehandle=t,this.renameRefSeq=e}async estimatedBytesForRegions(t,e){const r=await Promise.all(t.map(o=>this.blocksForRange(o.refId,o.start,o.end,e))),i=p0(r.flat());let s=0;for(const o of i)s+=o.fetchedSize();return s}},II=class{constructor(t,e){this.blockPosition=t,this.dataPosition=e}toString(){return`${this.blockPosition}:${this.dataPosition}`}compareTo(t){return this.blockPosition-t.blockPosition||this.dataPosition-t.dataPosition}};function xr(n,t=0,e=!1){if(e)throw new Error("big-endian virtual file offsets not implemented");return new II(n[t+7]*1099511627776+n[t+6]*4294967296+n[t+5]*16777216+n[t+4]*65536+n[t+3]*256+n[t+2],n[t+1]<<8|n[t])}const y5=21578050;function w5(n,t){return n-n%t}function x5(n,t){return n-n%t+t}function I5(n,t){return t-=1,[[0,0],[1+(n>>26),1+(t>>26)],[9+(n>>23),9+(t>>23)],[73+(n>>20),73+(t>>20)],[585+(n>>17),585+(t>>17)],[4681+(n>>14),4681+(t>>14)]]}class Rs extends xI{async lineCount(t,e){var i,s;return((s=(i=(await this.parse(e)).indices(t))==null?void 0:i.stats)==null?void 0:s.lineCount)||0}async _parse(t){const e=await this.filehandle.readFile(),r=new DataView(e.buffer);if(r.getUint32(0,!0)!==y5)throw new Error("Not a BAI file");const i=r.getInt32(4,!0),o=((1<<(5+1)*3)-1)/7;let a=8,l;const c=[];for(let h=0;h<i;h++){c.push(a);const A=r.getInt32(a,!0);a+=4;for(let m=0;m<A;m+=1){const p=r.getUint32(a,!0);if(a+=4,p===o+1)a+=4,a+=32;else{if(p>o+1)throw new Error("bai index contains too many bins, please use CSI");{const w=r.getInt32(a,!0);a+=4;for(let I=0;I<w;I++)a+=8,a+=8}}}const d=r.getInt32(a,!0);a+=4;const g=new Array(d);for(let m=0;m<d;m++){const p=xr(e,a);a+=8,l=gc(l,p),g[m]=p}}const u=new dc({maxSize:5});function f(h){let A=c[h];if(A===void 0)return;const d=r.getInt32(A,!0);let g;A+=4;const m={};for(let I=0;I<d;I+=1){const y=r.getUint32(A,!0);if(A+=4,y===o+1)A+=4,g=wI(e,A+16),A+=32;else{if(y>o+1)throw new Error("bai index contains too many bins, please use CSI");{const b=r.getInt32(A,!0);A+=4;const B=new Array(b);for(let E=0;E<b;E++){const Q=xr(e,A);A+=8;const k=xr(e,A);A+=8,l=gc(l,Q),B[E]=new CI(Q,k,y)}m[y]=B}}}const p=r.getInt32(A,!0);A+=4;const w=new Array(p);for(let I=0;I<p;I++){const y=xr(e,A);A+=8,l=gc(l,y),w[I]=y}return{binIndex:m,linearIndex:w,stats:g}}return{bai:!0,firstDataLine:l,maxBlockSize:65536,indices:h=>{if(!u.has(h)){const A=f(h);return A&&u.set(h,A),A}return u.get(h)},refCount:i}}async indexCov(t,e,r,i){const o=e!==void 0,l=(await this.parse(i)).indices(t);if(!l)return[];const{linearIndex:c,stats:u}=l;if(c.length===0)return[];const f=r===void 0?(c.length-1)*16384:x5(r,16384),h=e===void 0?0:w5(e,16384),A=o?new Array((f-h)/16384):new Array(c.length-1),d=c[c.length-1].blockPosition;if(f>(c.length-1)*16384)throw new Error("query outside of range of linear index");let g=c[h/16384].blockPosition;for(let m=h/16384,p=0;m<f/16384;m++,p++)A[p]={score:c[m+1].blockPosition-g,start:m*16384,end:m*16384+16384},g=c[m+1].blockPosition;return A.map(m=>({...m,score:m.score*((u==null?void 0:u.lineCount)||0)/d}))}async blocksForRange(t,e,r,i={}){e<0&&(e=0);const s=await this.parse(i);if(!s)return[];const o=s.indices(t);if(!o)return[];const a=I5(e,r),l=[],{binIndex:c}=o;for(const[d,g]of a)for(let m=d;m<=g;m++){const p=c[m];if(p)for(let w=0,I=p.length;w<I;w++)l.push(p[w])}const{linearIndex:u}=o,f=u.length,h=Math.min(e>>14,f-1),A=u[h];return p0(l,A)}async parse(t={}){return this.setupP||(this.setupP=this._parse(t).catch(e=>{throw this.setupP=void 0,e})),this.setupP}async hasRefSeq(t,e={}){var i;return!!((i=(await this.parse(e)).indices(t))!=null&&i.binIndex)}}var EI=0,bI=2,df=4,yi=0,gf=1,E5=2,b5=-5;function B5(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function v5(n){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(var r in e)B5(e,r)&&(n[r]=e[r])}}return n}function BI(n,t){return n.length===t?n:n.subarray?n.subarray(0,t):(n.length=t,n)}var pc={arraySet:function(n,t,e,r,i){if(t.subarray&&n.subarray){n.set(t.subarray(e,e+r),i);return}for(var s=0;s<r;s++)n[i+s]=t[e+s]},flattenChunks:function(n){var t,e,r,i,s,o;for(r=0,t=0,e=n.length;t<e;t++)r+=n[t].length;for(o=new Uint8Array(r),i=0,t=0,e=n.length;t<e;t++)s=n[t],o.set(s,i),i+=s.length;return o},Buf8:function(n){return new Uint8Array(n)},Buf16:function(n){return new Uint16Array(n)},Buf32:function(n){return new Int32Array(n)}},mc={arraySet:function(n,t,e,r,i){for(var s=0;s<r;s++)n[i+s]=t[e+s]},flattenChunks:function(n){return[].concat.apply([],n)},Buf8:function(n){return new Array(n)},Buf16:function(n){return new Array(n)},Buf32:function(n){return new Array(n)}};let Ns=()=>{const n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";return Ns=()=>n,n},Ir=(n,t,e,r,i)=>(Ir=Ns()?pc.arraySet:mc.arraySet,Ir(n,t,e,r,i)),m0=n=>(m0=Ns()?pc.flattenChunks:mc.flattenChunks,m0(n)),Ts=n=>(Ts=Ns()?pc.Buf8:mc.Buf8,Ts(n)),Ps=n=>(Ps=Ns()?pc.Buf16:mc.Buf16,Ps(n)),Ls=n=>(Ls=Ns()?pc.Buf32:mc.Buf32,Ls(n)),vI=function(){let n=!0;try{String.fromCharCode.apply(null,[0])}catch{n=!1}return vI=()=>n,n},QI=function(){let n=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}return QI=()=>n,n},C0=function(n){for(var t=Ts(256),e=0;e<256;e++)t[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;return t[254]=t[254]=1,C0=r=>t[r],t[n]};function SI(n){var t,e,r,i,s,o=n.length,a=0;for(i=0;i<o;i++)e=n.charCodeAt(i),(e&64512)===55296&&i+1<o&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(e=65536+(e-55296<<10)+(r-56320),i++)),a+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(a),s=0,i=0;s<a;i++)e=n.charCodeAt(i),(e&64512)===55296&&i+1<o&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(e=65536+(e-55296<<10)+(r-56320),i++)),e<128?t[s++]=e:e<2048?(t[s++]=192|e>>>6,t[s++]=128|e&63):e<65536?(t[s++]=224|e>>>12,t[s++]=128|e>>>6&63,t[s++]=128|e&63):(t[s++]=240|e>>>18,t[s++]=128|e>>>12&63,t[s++]=128|e>>>6&63,t[s++]=128|e&63);return t}function Q5(n,t){if(t<65534&&(n.subarray&&QI()||!n.subarray&&vI()))return String.fromCharCode.apply(null,BI(n,t));for(var e="",r=0;r<t;r++)e+=String.fromCharCode(n[r]);return e}function S5(n){for(var t=new Uint8Array(n.length),e=0,r=t.length;e<r;e++)t[e]=n.charCodeAt(e);return t}function D5(n,t){var e,r,i,s,o=t||n.length,a=new Array(o*2);for(r=0,e=0;e<o;){if(i=n[e++],i<128){a[r++]=i;continue}if(s=C0(i),s>4){a[r++]=65533,e+=s-1;continue}for(i&=s===2?31:s===3?15:7;s>1&&e<o;)i=i<<6|n[e++]&63,s--;if(s>1){a[r++]=65533;continue}i<65536?a[r++]=i:(i-=65536,a[r++]=55296|i>>10&1023,a[r++]=56320|i&1023)}return Q5(a,r)}function k5(n,t){var e;for(t=t||n.length,t>n.length&&(t=n.length),e=t-1;e>=0&&(n[e]&192)===128;)e--;return e<0||e===0?t:e+C0(n[e])>t?e:t}function F5(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}function y0(n,t,e,r){for(var i=n&65535|0,s=n>>>16&65535|0,o=0;e!==0;){o=e>2e3?2e3:e,e-=o;do i=i+t[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0}function M5(){for(var n,t=[],e=0;e<256;e++){n=e;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;t[e]=n}return t}let DI=function(){const n=M5();return DI=()=>n,n};function Cn(n,t,e,r){var i=DI(),s=r+e;n^=-1;for(var o=r;o<s;o++)n=n>>>8^i[(n^t[o])&255];return n^-1}var pf=30,R5=12;function N5(n,t){var e,r,i,s,o,a,l,c,u,f,h,A,d,g,m,p,w,I,y,b,B,E,Q,k,S;e=n.state,r=n.next_in,k=n.input,i=r+(n.avail_in-5),s=n.next_out,S=n.output,o=s-(t-n.avail_out),a=s+(n.avail_out-257),l=e.dmax,c=e.wsize,u=e.whave,f=e.wnext,h=e.window,A=e.hold,d=e.bits,g=e.lencode,m=e.distcode,p=(1<<e.lenbits)-1,w=(1<<e.distbits)-1;e:do{d<15&&(A+=k[r++]<<d,d+=8,A+=k[r++]<<d,d+=8),I=g[A&p];t:for(;;){if(y=I>>>24,A>>>=y,d-=y,y=I>>>16&255,y===0)S[s++]=I&65535;else if(y&16){b=I&65535,y&=15,y&&(d<y&&(A+=k[r++]<<d,d+=8),b+=A&(1<<y)-1,A>>>=y,d-=y),d<15&&(A+=k[r++]<<d,d+=8,A+=k[r++]<<d,d+=8),I=m[A&w];n:for(;;){if(y=I>>>24,A>>>=y,d-=y,y=I>>>16&255,y&16){if(B=I&65535,y&=15,d<y&&(A+=k[r++]<<d,d+=8,d<y&&(A+=k[r++]<<d,d+=8)),B+=A&(1<<y)-1,B>l){n.msg="invalid distance too far back",e.mode=pf;break e}if(A>>>=y,d-=y,y=s-o,B>y){if(y=B-y,y>u&&e.sane){n.msg="invalid distance too far back",e.mode=pf;break e}if(E=0,Q=h,f===0){if(E+=c-y,y<b){b-=y;do S[s++]=h[E++];while(--y);E=s-B,Q=S}}else if(f<y){if(E+=c+f-y,y-=f,y<b){b-=y;do S[s++]=h[E++];while(--y);if(E=0,f<b){y=f,b-=y;do S[s++]=h[E++];while(--y);E=s-B,Q=S}}}else if(E+=f-y,y<b){b-=y;do S[s++]=h[E++];while(--y);E=s-B,Q=S}for(;b>2;)S[s++]=Q[E++],S[s++]=Q[E++],S[s++]=Q[E++],b-=3;b&&(S[s++]=Q[E++],b>1&&(S[s++]=Q[E++]))}else{E=s-B;do S[s++]=S[E++],S[s++]=S[E++],S[s++]=S[E++],b-=3;while(b>2);b&&(S[s++]=S[E++],b>1&&(S[s++]=S[E++]))}}else if((y&64)===0){I=m[(I&65535)+(A&(1<<y)-1)];continue n}else{n.msg="invalid distance code",e.mode=pf;break e}break}}else if((y&64)===0){I=g[(I&65535)+(A&(1<<y)-1)];continue t}else if(y&32){e.mode=R5;break e}else{n.msg="invalid literal/length code",e.mode=pf;break e}break}}while(r<i&&s<a);b=d>>3,r-=b,d-=b<<3,A&=(1<<d)-1,n.next_in=r,n.next_out=s,n.avail_in=r<i?5+(i-r):5-(r-i),n.avail_out=s<a?257+(a-s):257-(s-a),e.hold=A,e.bits=d}var Os=15,kI=852,FI=592,MI=0,w0=1,RI=2,T5=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],P5=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],L5=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],O5=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function Cc(n,t,e,r,i,s,o,a){var l=a.bits,c=0,u=0,f=0,h=0,A=0,d=0,g=0,m=0,p=0,w=0,I,y,b,B,E,Q=null,k=0,S,P=Ps(Os+1),N=Ps(Os+1),U=null,H=0,J,V,$;for(c=0;c<=Os;c++)P[c]=0;for(u=0;u<r;u++)P[t[e+u]]++;for(A=l,h=Os;h>=1&&P[h]===0;h--);if(A>h&&(A=h),h===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(f=1;f<h&&P[f]===0;f++);for(A<f&&(A=f),m=1,c=1;c<=Os;c++)if(m<<=1,m-=P[c],m<0)return-1;if(m>0&&(n===MI||h!==1))return-1;for(N[1]=0,c=1;c<Os;c++)N[c+1]=N[c]+P[c];for(u=0;u<r;u++)t[e+u]!==0&&(o[N[t[e+u]]++]=u);if(n===MI?(Q=U=o,S=19):n===w0?(Q=T5,k-=257,U=P5,H-=257,S=256):(Q=L5,U=O5,S=-1),w=0,u=0,c=f,E=s,d=A,g=0,b=-1,p=1<<A,B=p-1,n===w0&&p>kI||n===RI&&p>FI)return 1;for(;;){J=c-g,o[u]<S?(V=0,$=o[u]):o[u]>S?(V=U[H+o[u]],$=Q[k+o[u]]):(V=96,$=0),I=1<<c-g,y=1<<d,f=y;do y-=I,i[E+(w>>g)+y]=J<<24|V<<16|$|0;while(y!==0);for(I=1<<c-1;w&I;)I>>=1;if(I!==0?(w&=I-1,w+=I):w=0,u++,--P[c]===0){if(c===h)break;c=t[e+o[u]]}if(c>A&&(w&B)!==b){for(g===0&&(g=A),E+=f,d=c-g,m=1<<d;d+g<h&&(m-=P[d+g],!(m<=0));)d++,m<<=1;if(p+=1<<d,n===w0&&p>kI||n===RI&&p>FI)return 1;b=w&B,i[b]=A<<24|d<<16|E-s|0}}return w!==0&&(i[E+w]=c-g<<24|64<<16|0),a.bits=A,0}var U5=0,NI=1,TI=2,PI=4,wi=0,G5=1,z5=2,Ut=-2,LI=-3,OI=-4,H5=-5,UI=8,GI=1,zI=2,HI=3,_I=4,VI=5,YI=6,JI=7,qI=8,KI=9,jI=10,mf=11,Un=12,x0=13,WI=14,I0=15,XI=16,ZI=17,$I=18,eE=19,Cf=20,yf=21,tE=22,nE=23,rE=24,iE=25,sE=26,E0=27,oE=28,aE=29,Qe=30,cE=31,_5=32,V5=852,Y5=592;function lE(n){return(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24)}function J5(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=Ps(320),this.work=Ps(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function q5(n){var t;return!n||!n.state?Ut:(t=n.state,n.total_in=n.total_out=t.total=0,n.msg="",t.wrap&&(n.adler=t.wrap&1),t.mode=GI,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=Ls(V5),t.distcode=t.distdyn=Ls(Y5),t.sane=1,t.back=-1,wi)}function K5(n){var t;return!n||!n.state?Ut:(t=n.state,t.wsize=0,t.whave=0,t.wnext=0,q5(n))}function j5(n,t){var e,r;return!n||!n.state||(r=n.state,t<0?(e=0,t=-t):(e=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?Ut:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=e,r.wbits=t,K5(n))}function W5(n,t){var e,r;return n?(r=new J5,n.state=r,r.window=null,e=j5(n,t),e!==wi&&(n.state=null),e):Ut}var uE=!0,b0,B0;function X5(n){if(uE){var t;for(b0=Ls(512),B0=Ls(32),t=0;t<144;)n.lens[t++]=8;for(;t<256;)n.lens[t++]=9;for(;t<280;)n.lens[t++]=7;for(;t<288;)n.lens[t++]=8;for(Cc(NI,n.lens,0,288,b0,0,n.work,{bits:9}),t=0;t<32;)n.lens[t++]=5;Cc(TI,n.lens,0,32,B0,0,n.work,{bits:5}),uE=!1}n.lencode=b0,n.lenbits=9,n.distcode=B0,n.distbits=5}function fE(n,t,e,r){var i,s=n.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=Ts(s.wsize)),r>=s.wsize?(Ir(s.window,t,e-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),Ir(s.window,t,e-r,i,s.wnext),r-=i,r?(Ir(s.window,t,e-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}function Z5(n,t){var e,r,i,s,o,a,l,c,u,f,h,A,d,g,m=0,p,w,I,y,b,B,E,Q,k=Ts(4),S,P,N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!n||!n.state||!n.output||!n.input&&n.avail_in!==0)return Ut;e=n.state,e.mode===Un&&(e.mode=x0),o=n.next_out,i=n.output,l=n.avail_out,s=n.next_in,r=n.input,a=n.avail_in,c=e.hold,u=e.bits,f=a,h=l,Q=wi;e:for(;;)switch(e.mode){case GI:if(e.wrap===0){e.mode=x0;break}for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(e.wrap&2&&c===35615){e.check=0,k[0]=c&255,k[1]=c>>>8&255,e.check=Cn(e.check,k,2,0),c=0,u=0,e.mode=zI;break}if(e.flags=0,e.head&&(e.head.done=!1),!(e.wrap&1)||(((c&255)<<8)+(c>>8))%31){n.msg="incorrect header check",e.mode=Qe;break}if((c&15)!==UI){n.msg="unknown compression method",e.mode=Qe;break}if(c>>>=4,u-=4,E=(c&15)+8,e.wbits===0)e.wbits=E;else if(E>e.wbits){n.msg="invalid window size",e.mode=Qe;break}e.dmax=1<<E,n.adler=e.check=1,e.mode=c&512?jI:Un,c=0,u=0;break;case zI:for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(e.flags=c,(e.flags&255)!==UI){n.msg="unknown compression method",e.mode=Qe;break}if(e.flags&57344){n.msg="unknown header flags set",e.mode=Qe;break}e.head&&(e.head.text=c>>8&1),e.flags&512&&(k[0]=c&255,k[1]=c>>>8&255,e.check=Cn(e.check,k,2,0)),c=0,u=0,e.mode=HI;case HI:for(;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}e.head&&(e.head.time=c),e.flags&512&&(k[0]=c&255,k[1]=c>>>8&255,k[2]=c>>>16&255,k[3]=c>>>24&255,e.check=Cn(e.check,k,4,0)),c=0,u=0,e.mode=_I;case _I:for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}e.head&&(e.head.xflags=c&255,e.head.os=c>>8),e.flags&512&&(k[0]=c&255,k[1]=c>>>8&255,e.check=Cn(e.check,k,2,0)),c=0,u=0,e.mode=VI;case VI:if(e.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}e.length=c,e.head&&(e.head.extra_len=c),e.flags&512&&(k[0]=c&255,k[1]=c>>>8&255,e.check=Cn(e.check,k,2,0)),c=0,u=0}else e.head&&(e.head.extra=null);e.mode=YI;case YI:if(e.flags&1024&&(A=e.length,A>a&&(A=a),A&&(e.head&&(E=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),Ir(e.head.extra,r,s,A,E)),e.flags&512&&(e.check=Cn(e.check,r,A,s)),a-=A,s+=A,e.length-=A),e.length))break e;e.length=0,e.mode=JI;case JI:if(e.flags&2048){if(a===0)break e;A=0;do E=r[s+A++],e.head&&E&&e.length<65536&&(e.head.name+=String.fromCharCode(E));while(E&&A<a);if(e.flags&512&&(e.check=Cn(e.check,r,A,s)),a-=A,s+=A,E)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=qI;case qI:if(e.flags&4096){if(a===0)break e;A=0;do E=r[s+A++],e.head&&E&&e.length<65536&&(e.head.comment+=String.fromCharCode(E));while(E&&A<a);if(e.flags&512&&(e.check=Cn(e.check,r,A,s)),a-=A,s+=A,E)break e}else e.head&&(e.head.comment=null);e.mode=KI;case KI:if(e.flags&512){for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(c!==(e.check&65535)){n.msg="header crc mismatch",e.mode=Qe;break}c=0,u=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),n.adler=e.check=0,e.mode=Un;break;case jI:for(;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.adler=e.check=lE(c),c=0,u=0,e.mode=mf;case mf:if(e.havedict===0)return n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,e.hold=c,e.bits=u,z5;n.adler=e.check=1,e.mode=Un;case Un:case x0:if(e.last){c>>>=u&7,u-=u&7,e.mode=E0;break}for(;u<3;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}switch(e.last=c&1,c>>>=1,u-=1,c&3){case 0:e.mode=WI;break;case 1:X5(e),e.mode=Cf;break;case 2:e.mode=ZI;break;case 3:n.msg="invalid block type",e.mode=Qe}c>>>=2,u-=2;break;case WI:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){n.msg="invalid stored block lengths",e.mode=Qe;break}e.length=c&65535,c=0,u=0,e.mode=I0;case I0:e.mode=XI;case XI:if(A=e.length,A){if(A>a&&(A=a),A>l&&(A=l),A===0)break e;Ir(i,r,s,A,o),a-=A,s+=A,l-=A,o+=A,e.length-=A;break}e.mode=Un;break;case ZI:for(;u<14;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(e.nlen=(c&31)+257,c>>>=5,u-=5,e.ndist=(c&31)+1,c>>>=5,u-=5,e.ncode=(c&15)+4,c>>>=4,u-=4,e.nlen>286||e.ndist>30){n.msg="too many length or distance symbols",e.mode=Qe;break}e.have=0,e.mode=$I;case $I:for(;e.have<e.ncode;){for(;u<3;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}e.lens[N[e.have++]]=c&7,c>>>=3,u-=3}for(;e.have<19;)e.lens[N[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,S={bits:e.lenbits},Q=Cc(U5,e.lens,0,19,e.lencode,0,e.work,S),e.lenbits=S.bits,Q){n.msg="invalid code lengths set",e.mode=Qe;break}e.have=0,e.mode=eE;case eE:for(;e.have<e.nlen+e.ndist;){for(;m=e.lencode[c&(1<<e.lenbits)-1],p=m>>>24,w=m>>>16&255,I=m&65535,!(p<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(I<16)c>>>=p,u-=p,e.lens[e.have++]=I;else{if(I===16){for(P=p+2;u<P;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(c>>>=p,u-=p,e.have===0){n.msg="invalid bit length repeat",e.mode=Qe;break}E=e.lens[e.have-1],A=3+(c&3),c>>>=2,u-=2}else if(I===17){for(P=p+3;u<P;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=p,u-=p,E=0,A=3+(c&7),c>>>=3,u-=3}else{for(P=p+7;u<P;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=p,u-=p,E=0,A=11+(c&127),c>>>=7,u-=7}if(e.have+A>e.nlen+e.ndist){n.msg="invalid bit length repeat",e.mode=Qe;break}for(;A--;)e.lens[e.have++]=E}}if(e.mode===Qe)break;if(e.lens[256]===0){n.msg="invalid code -- missing end-of-block",e.mode=Qe;break}if(e.lenbits=9,S={bits:e.lenbits},Q=Cc(NI,e.lens,0,e.nlen,e.lencode,0,e.work,S),e.lenbits=S.bits,Q){n.msg="invalid literal/lengths set",e.mode=Qe;break}if(e.distbits=6,e.distcode=e.distdyn,S={bits:e.distbits},Q=Cc(TI,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,S),e.distbits=S.bits,Q){n.msg="invalid distances set",e.mode=Qe;break}e.mode=Cf;case Cf:e.mode=yf;case yf:if(a>=6&&l>=258){n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,e.hold=c,e.bits=u,N5(n,h),o=n.next_out,i=n.output,l=n.avail_out,s=n.next_in,r=n.input,a=n.avail_in,c=e.hold,u=e.bits,e.mode===Un&&(e.back=-1);break}for(e.back=0;m=e.lencode[c&(1<<e.lenbits)-1],p=m>>>24,w=m>>>16&255,I=m&65535,!(p<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(w&&(w&240)===0){for(y=p,b=w,B=I;m=e.lencode[B+((c&(1<<y+b)-1)>>y)],p=m>>>24,w=m>>>16&255,I=m&65535,!(y+p<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=y,u-=y,e.back+=y}if(c>>>=p,u-=p,e.back+=p,e.length=I,w===0){e.mode=sE;break}if(w&32){e.back=-1,e.mode=Un;break}if(w&64){n.msg="invalid literal/length code",e.mode=Qe;break}e.extra=w&15,e.mode=tE;case tE:if(e.extra){for(P=e.extra;u<P;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}e.length+=c&(1<<e.extra)-1,c>>>=e.extra,u-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=nE;case nE:for(;m=e.distcode[c&(1<<e.distbits)-1],p=m>>>24,w=m>>>16&255,I=m&65535,!(p<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if((w&240)===0){for(y=p,b=w,B=I;m=e.distcode[B+((c&(1<<y+b)-1)>>y)],p=m>>>24,w=m>>>16&255,I=m&65535,!(y+p<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=y,u-=y,e.back+=y}if(c>>>=p,u-=p,e.back+=p,w&64){n.msg="invalid distance code",e.mode=Qe;break}e.offset=I,e.extra=w&15,e.mode=rE;case rE:if(e.extra){for(P=e.extra;u<P;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}e.offset+=c&(1<<e.extra)-1,c>>>=e.extra,u-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){n.msg="invalid distance too far back",e.mode=Qe;break}e.mode=iE;case iE:if(l===0)break e;if(A=h-l,e.offset>A){if(A=e.offset-A,A>e.whave&&e.sane){n.msg="invalid distance too far back",e.mode=Qe;break}A>e.wnext?(A-=e.wnext,d=e.wsize-A):d=e.wnext-A,A>e.length&&(A=e.length),g=e.window}else g=i,d=o-e.offset,A=e.length;A>l&&(A=l),l-=A,e.length-=A;do i[o++]=g[d++];while(--A);e.length===0&&(e.mode=yf);break;case sE:if(l===0)break e;i[o++]=e.length,l--,e.mode=yf;break;case E0:if(e.wrap){for(;u<32;){if(a===0)break e;a--,c|=r[s++]<<u,u+=8}if(h-=l,n.total_out+=h,e.total+=h,h&&(n.adler=e.check=e.flags?Cn(e.check,i,h,o-h):y0(e.check,i,h,o-h)),h=l,(e.flags?c:lE(c))!==e.check){n.msg="incorrect data check",e.mode=Qe;break}c=0,u=0}e.mode=oE;case oE:if(e.wrap&&e.flags){for(;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(c!==(e.total&4294967295)){n.msg="incorrect length check",e.mode=Qe;break}c=0,u=0}e.mode=aE;case aE:Q=G5;break e;case Qe:Q=LI;break e;case cE:return OI;case _5:default:return Ut}return n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,e.hold=c,e.bits=u,(e.wsize||h!==n.avail_out&&e.mode<Qe&&(e.mode<E0||t!==PI))&&fE(n,n.output,n.next_out,h-n.avail_out),f-=n.avail_in,h-=n.avail_out,n.total_in+=f,n.total_out+=h,e.total+=h,e.wrap&&h&&(n.adler=e.check=e.flags?Cn(e.check,i,h,n.next_out-h):y0(e.check,i,h,n.next_out-h)),n.data_type=e.bits+(e.last?64:0)+(e.mode===Un?128:0)+(e.mode===Cf||e.mode===I0?256:0),(f===0&&h===0||t===PI)&&Q===wi&&(Q=H5),Q}function $5(n){if(!n||!n.state)return Ut;var t=n.state;return t.window&&(t.window=null),n.state=null,wi}function eP(n,t){var e;return!n||!n.state||(e=n.state,(e.wrap&2)===0)?Ut:(e.head=t,t.done=!1,wi)}function AE(n,t){var e=t.length,r,i,s;return!n||!n.state||(r=n.state,r.wrap!==0&&r.mode!==mf)?Ut:r.mode===mf&&(i=1,i=y0(i,t,e,0),i!==r.check)?LI:(s=fE(n,t,e,e),s?(r.mode=cE,OI):(r.havedict=1,wi))}const v0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function tP(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Q0=Object.prototype.toString;class wf{constructor(t){if(!(this instanceof wf))return new wf(t);this.options=v5({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tP,this.strm.avail_out=0;var r=W5(this.strm,e.windowBits);if(r!==yi)throw new Error(v0[r]);if(this.header=new F5,eP(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=SI(e.dictionary):Q0.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=AE(this.strm,e.dictionary),r!==yi)))throw new Error(v0[r])}push(t,e){var r=this.strm,i=this.options.chunkSize,s=this.options.dictionary,o,a,l,c,u,f,h=!1;if(this.ended)return!1;a=e===~~e?e:e===!0?df:EI,typeof t=="string"?r.input=S5(t):Q0.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=Ts(i),r.next_out=0,r.avail_out=i),o=Z5(r,EI),o===E5&&s&&(typeof s=="string"?f=SI(s):Q0.call(s)==="[object ArrayBuffer]"?f=new Uint8Array(s):f=s,o=AE(this.strm,f)),o===b5&&h===!0&&(o=yi,h=!1),o!==gf&&o!==yi)return this.onEnd(o),this.ended=!0,!1;r.next_out&&(r.avail_out===0||o===gf||r.avail_in===0&&(a===df||a===bI))&&(this.options.to==="string"?(l=k5(r.output,r.next_out),c=r.next_out-l,u=D5(r.output,l),r.next_out=c,r.avail_out=i-c,c&&Ir(r.output,r.output,l,c,0),this.onData(u)):this.onData(BI(r.output,r.next_out))),r.avail_in===0&&r.avail_out===0&&(h=!0)}while((r.avail_in>0||r.avail_out===0)&&o!==gf);return o===gf&&(a=df),a===df?(o=$5(this.strm),this.onEnd(o),this.ended=!0,o===yi):(a===bI&&(this.onEnd(yi),r.avail_out=0),!0)}onData(t){this.chunks.push(t)}onEnd(t){t===yi&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=m0(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg}}function nP(n,t){var e=new wf(t);if(e.push(n,!0),e.err)throw e.msg||v0[e.err];return e.result}var rP=nP,xi={};xi.d=(n,t)=>{for(var e in t)xi.o(t,e)&&!xi.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})},xi.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),xi.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var S0={};xi.r(S0),xi.d(S0,{ChunkSliceResult:()=>Gs,DecompressResult:()=>zs,__wbg_Error_52673b7de5a0ca89:()=>AP,__wbg___wbindgen_throw_dd24417ed36fc46e:()=>hP,__wbg_set_wasm:()=>hE,decompress_all:()=>CE,decompress_block:()=>fP,decompress_chunk_slice:()=>yE});const iP="data:application/wasm;base64,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fGooAgAiAkF4cSIAaiEDAkACQCACQQFxDQAgAkECcUUNASABKAIAIgIgAGohAAJAIAEgAmsiAUEAKALAoEBHDQAgAygCBEEDcUEDRw0BQQAgADYCuKBAIAMgAygCBEF+cTYCBCABIABBAXI2AgQgAyAANgIADwsgASACEBALAkACQAJAAkACQAJAIAMoAgQiAkECcQ0AIANBACgCxKBARg0CIANBACgCwKBARg0DIAMgAkF4cSICEBAgASACIABqIgBBAXI2AgQgASAAaiAANgIAIAFBACgCwKBARw0BQQAgADYCuKBADwsgAyACQX5xNgIEIAEgAEEBcjYCBCABIABqIAA2AgALIABBgAJJDQIgASAAEBFBACEBQQBBACgC2KBAQX9qIgA2AtigQCAADQQCQEEAKAKgnkAiAEUNAEEAIQEDQCABQQFqIQEgACgCCCIADQALC0EAIAFB/x8gAUH/H0sbNgLYoEAPC0EAIAE2AsSgQEEAQQAoArygQCAAaiIANgK8oEAgASAAQQFyNgIEAkAgAUEAKALAoEBHDQBBAEEANgK4oEBBAEEANgLAoEALIABBACgC0KBAIgRNDQNBACgCxKBAIgBFDQNBACECQQAoArygQCIFQSlJDQJBmJ7AACEBA0ACQCABKAIAIgMgAEsNACAAIAMgASgCBGpJDQQLIAEoAgghAQwACwtBACABNgLAoEBBAEEAKAK4oEAgAGoiADYCuKBAIAEgAEEBcjYCBCABIABqIAA2AgAPCwJAAkBBACgCsKBAIgNBASAAQQN2dCICcQ0AQQAgAyACcjYCsKBAIABB+AFxQaiewABqIgAhAwwBCyAAQfgBcSIDQaiewABqIQAgA0GwnsAAaigCACEDCyAAIAE2AgggAyABNgIMIAEgADYCDCABIAM2AggPCwJAQQAoAqCeQCIBRQ0AQQAhAgNAIAJBAWohAiABKAIIIgENAAsLQQAgAkH/HyACQf8fSxs2AtigQCAFIARNDQBBAEF/NgLQoEALC44FAQd/AkACQCAAKAIIIgNBgICAwAFxRQ0AAkACQAJAAkACQCADQYCAgIABcUUNACAALwEOIgQNAUEAIQIMAgsCQCACQRBJDQAgASACEAYhBQwECwJAIAINAEEAIQJBACEFDAQLIAJBA3EhBgJAAkAgAkEETw0AQQAhBUEAIQcMAQsg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IgJBAWoiAzYCACADRQ0BIAAoAgBBf0YNAiAAKAIQIQAgASACNgIAIAAPCxBdCwALEF8AC1ABAX8CQCACIAAoAgAgACgCCCIDa00NACAAIAMgAkEBQQEQFyAAKAIIIQMLAkAgAkUNACAAKAIEIANqIAEgAvwKAAALIAAgAyACajYCCEEAC0wBAX8CQCAAKAIAIgBBDGooAgAiAUUNACAAQRBqKAIAIAFBARBXCwJAIABBf0YNACAAIAAoAgRBf2oiATYCBCABDQAgAEEcQQQQVwsLRQACQAJAIAFBCUkNACABIAAQDyEBDAELIAAQAiEBCwJAIAFFDQAgAUF8ai0AAEEDcUUNACAARQ0AIAFBACAA/AsACyABC1IBAn9BACEBQQBBACgC6KBAIgJBAWo2AuigQAJAIAJBAEgNAEEBIQFBAC0A5KBADQBBACAAOgDkoEBBAEEAKALgoEBBAWo2AuCgQEECIQELIAELRwECfyABKAIEIQIgASgCACEDEGsCQEEIQQQQWiIBDQBBBEEIEGEACyABIAI2AgQgASADNgIAIABB8JfAADYCBCAAIAE2AgALOAACQAJAIAAgAksNACABIAJLDQEgACABTQ0BIAAgASADECsACyAAIAIgAxAsAAsgASACIAMQLQALQQEBfyMAQSBrIgMkACADQQA2AhAgA0EBNgIEIANCBDcCCCADIAE2AhwgAyAANgIYIAMgA0EYajYCACADIAIQQQALOQACQCACQYCAxABGDQAgACACIAEoAhARBQBFDQBBAQ8LAkAgAw0AQQAPCyAAIAMgBCABKAIMEQcACzYBAX8jAEEgayIBJAAgAUEANgIYIAFBATYCDCABQaSZwAA2AgggAUIENwIQIAFBCGogABBBAAsnAAJAIAAgARBPRQ0AAkAgAEUNABBrIAAgARBaIgFFDQELIAEPCwALLAIBfwF+IwBBEGsiASQAIAApAgAhAiABIAA2AgwgASACNwIEIAFBBGoQZgALLQEBfyMAQRBrIgEkACABIAApAgA3AgggAUEIakH0lsAAIAAoAghBAUEAECEACyoBAX8jAEEQayIDJAAgAyACNgIMIAMgATYCCCADIAA2AgQgA0EEahBnAAsqAQF/IwBBEGsiAiQAIAJBATsBDCACIAE2AgggAiAANgIEIAJBBGoQPgALKQEBfwJAIAAoAgAiAUGAgICAeHJBgICAgHhGDQAgACgCBCABQQEQVwsLHgEBfwJAIAAoAgAiAkUNACABIAIgACgCBBBTDwsACyAAAkAgASgCAEUNACAAQfCXwAA2AgQgACABNgIADwsACxsBAX8QayAAQQRqQQQQWiIBIAA2AgAgAUEEagsjAQF/AkBBjIvAABAwIgANAEHAisAAQTpB/IrAABBAAAsgAAsXAAJAIAFBCUkNACABIAAQDw8LIAAQAgsfAAJAIABBgICAgHhyQYCAgIB4Rg0AIAEgAEEBEFcLCxwBAX8CQCAAKAIAIgFFDQAgACgCBCABQQEQVwsLFgACQCAARQ0AIAAgARBhAAsgAhA8AAsVACAAQXxqIgAgACgCAEEEakEEEFcLGgEBfyABIABBACgC3KBAIgJBAyACGxEEAAALHQAgAEEIakEAKQKYlkA3AgAgAEEAKQKQlkA3AgALHQAgAEEIakEAKQKolkA3AgAgAEEAKQKglkA3AgALFQAgAWlBAUYgAEGAgICAeCABa01xCxIAAkAgAUUNACAAIAEgAhBXCwsSACAAIAEgAiADIARBACAFEAMLFQACQCAARQ0AIAAgACgCqFoRAgALCxYAIAAoAgAgASACIAAoAgQoAgwRBwALDQAgACABIAIgAxAHDwsQACABIAAoAgAgACgCBBBTCxMAIABB8JfAADYCBCAAIAE2AgALCwAgACABIAIQLw8LCgAgACABEGoaAAsLACAAIwBqJAAjAAsJACAAIAEQRw8LCQAgACABEDYPCwkAIAAgARBMDwsMAEG4iMAAQRsQXgALCQAgACABEGMACw0AQdOIwABBzwAQXgALDAAgACABKQIANwMACwkAIAEgABBcAAsNACABQdicwABBGBAKCwgAIAAgARAACwgAIAAgARABCwkAIAAoAgAQUgsHACAAECMACwcAIAAQPwALCQAgAEEANgIACwUAQQAPCwUAEGwACwMADwsDAAALC4YdAgBBgIDAAAvwHC9ob21lL2NkaWVzaC8uY2FyZ28vcmVnaXN0cnkvc3JjL2luZGV4LmNyYXRlcy5pby0xOTQ5Y2Y4YzZiNWI1NTdmL3dhc20tYmluZGdlbi0wLjIuMTA2L3NyYy9jb252ZXJ0L3NsaWNlcy5ycwAvaG9tZS9jZGllc2gvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9pbmRleC5jcmF0ZXMuaW8tMTk0OWNmOGM2YjViNTU3Zi93YXNtLWJpbmRnZW4tMC4yLjEwNi9zcmMvZXh0ZXJucmVmLnJzAC9ob21lL2NkaWVzaC8ucnVzdHVwL3Rvb2xjaGFpbnMvc3RhYmxlLXg4Nl82NC11bmtub3duLWxpbnV4LWdudS9saWIvcnVzdGxpYi9zcmMvcnVzdC9saWJyYXJ5L2FsbG9jL3NyYy9zbGljZS5ycwAvaG9tZS9jZGllc2gvLnJ1c3R1cC90b29sY2hhaW5zL3N0YWJsZS14ODZfNjQtdW5rbm93bi1saW51eC1nbnUvbGliL3J1c3RsaWIvc3JjL3J1c3QvbGlicmFyeS9hbGxvYy9zcmMvcmF3X3ZlYy9tb2QucnMAL3J1c3RjL2VkNjFlN2Q3ZTI0MjQ5NGZiNzA1N2YyNjU3MzAwZDllNzdiYjRmY2IvbGlicmFyeS9hbGxvYy9zcmMvcmF3X3ZlYy9tb2QucnMAL3J1c3QvZGVwcy9kbG1hbGxvYy0wLjIuMTAvc3JjL2RsbWFsbG9jLnJzAGxpYnJhcnkvc3RkL3NyYy9hbGxvYy5ycwAvaG9tZS9jZGllc2gvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9pbmRleC5jcmF0ZXMuaW8tMTk0OWNmOGM2YjViNTU3Zi9saWJkZWZsYXRlci0xLjI1LjAvc3JjL2xpYi5ycwBFARAAdQAAACoCAAARAAAA1QAQAG8AAAC9AQAAHQAAAGF0dGVtcHRlZCB0byB0YWtlIG93bmVyc2hpcCBvZiBSdXN0IHZhbHVlIHdoaWxlIGl0IHdhcyBib3Jyb3dlZAClAhAACgAAAF0AAAAWAAAAaW52YWxpZCBiZ3pmIGhlYWRlcgClAhAACgAAACkAAAAJAAAApQIQAAoAAAAqAAAACQAAAKUCEAAKAAAAKwAAAAkAAAClAhAACgAAACwAAAAJAAAApQIQAAoAAAAwAAAAFgAAAGRlY29tcHJlc3Npb24gZmFpbGVkpQIQAAoAAAAvAAAAHgAAAKUCEAAKAAAApQAAACQAAAClAhAACgAAAKYAAAAkAAAApQIQAAoAAACnAAAAFgAAAKUCEAAKAAAAxQAAABQAAAClAhAACgAAAMYAAAAUAAAApQIQAAoAAADbAAAAGAAAAKUCEAAKAAAA3AAAABgAAAClAhAACgAAANMAAAAxAAAAAAAQAGwAAAAjAQAADgAAAG51bGwgcG9pbnRlciBwYXNzZWQgdG8gcnVzdHJlY3Vyc2l2ZSB1c2Ugb2YgYW4gb2JqZWN0IGRldGVjdGVkIHdoaWNoIHdvdWxkIGxlYWQgdG8gdW5zYWZlIGFsaWFzaW5nIGluIHJ1c3QAAG0AEABnAAAAfwAAABEAAABtABAAZwAAAIwAAAARAAAAbGliZGVmbGF0ZV9kZWZsYXRlX2RlY29tcHJlc3MgcmV0dXJuZWQgYW4gdW5rbm93biBlcnJvciB0eXBlOiB0aGlzIGlzIGFuIGludGVybmFsIGJ1ZyB0aGF0ICoqbXVzdCoqIGJlIGZpeGVkUAIQAF8AAAAMAQAAFQAAAGxpYmRlZmxhdGVfYWxsb2NfZGVjb21wcmVzc29yIHJldHVybmVkIE5VTEw6IG91dCBvZiBtZW1vcnkAAFACEABfAAAAnAAAABEAAAAMAAAAAQAAAAIAAAAAAAAAAAAAABAREgAIBwkGCgULBAwDDQIOAQ8AAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAAAAAAAEAAAACAAAAAwAAAAQAAQAFAAEABwACAAkAAgANAAMAEQADABkABAAhAAQAMQAFAEEABQBhAAYAgQAGAMEABwABAQcAgQEIAAECCAABAwkAAQQJAAEGCgABCAoAAQwLAAEQCwABGAwAASAMAAEwDQABQA0AAWANAAFgDQABYAAAAIAAAAGAAAACgAAAA4AAAASAAAAFgAAABoAAAAeAAAAIgAAACYAAAAqAAAALgAAADIAAAA2AAAAOgAAAD4AAABCAAAARgAAAEoAAABOAAAAUgAAAFYAAABaAAAAXgAAAGIAAABmAAAAagAAAG4AAAByAAAAdgAAAHoAAAB+AAAAggAAAIYAAACKAAAAjgAAAJIAAACWAAAAmgAAAJ4AAACiAAAApgAAAKoAAACuAAAAsgAAALYAAAC6AAAAvgAAAMIAAADGAAAAygAAAM4AAADSAAAA1gAAANoAAADeAAAA4gAAAOYAAADqAAAA7gAAAPIAAAD2AAAA+gAAAP4AAAECAAABBgAAAQoAAAEOAAABEgAAARYAAAEaAAABHgAAASIAAAEmAAABKgAAAS4AAAEyAAABNgAAAToAAAE+AAABQgAAAUYAAAFKAAABTgAAAVIAAAFWAAABWgAAAV4AAAFiAAABZgAAAWoAAAFuAAABcgAAAXYAAAF6AAABfgAAAYIAAAGGAAABigAAAY4AAAGSAAABlgAAAZoAAAGeAAABogAAAaYAAAGqAAABrgAAAbIAAAG2AAABugAAAb4AAAHCAAABxgAAAcoAAAHOAAAB0gAAAdYAAAHaAAAB3gAAAeIAAAHmAAAB6gAAAe4AAAHyAAAB9gAAAfoAAAH+AAACAgAAAgYAAAIKAAACDgAAAhIAAAIWAAACGgAAAh4AAAIiAAACJgAAAioAAAIuAAACMgAAAjYAAAI6AAACPgAAAkIAAAJGAAACSgAAAk4AAAJSAAACVgAAAloAAAJeAAACYgAAAmYAAAJqAAACbgAAAnIAAAJ2AAACegAAAn4AAAKCAAAChgAAAooAAAKOAAACkgAAApYAAAKaAAACngAAAqIAAAKmAAACqgAAAq4AAAKyAAACtgAAAroAAAK+AAACwgAAAsYAAALKAAACzgAAAtIAAALWAAAC2gAAAt4AAALiAAAC5gAAAuoAAALuAAAC8gAAAvYAAAL6AAAC/gAAAwIAAAMGAAADCgAAAw4AAAMSAAADFgAAAxoAAAMeAAADIgAAAyYAAAMqAAADLgAAAzIAAAM2AAADOgAAAz4AAANCAAADRgAAA0oAAANOAAADUgAAA1YAAANaAAADXgAAA2IAAANmAAADagAAA24AAANyAAADdgAAA3oAAAN+AAADggAAA4YAAAOKAAADjgAAA5IAAAOWAAADmgAAA54AAAOiAAADpgAAA6oAAAOuAAADsgAAA7YAAAO6AAADvgAAA8IAAAPGAAADygAAA84AAAPSAAAD1gAAA9oAAAPeAAAD4gAAA+YAAAPqAAAD7gAAA/IAAAP2AAAD+gAAA/4AAoAAAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgABAAsAAQANAAEADwABABEAAgATAAIAFwACABsAAgAfAAMAIwADACsAAwAzAAMAOwAEAEMABABTAAQAYwAEAHMABQCDAAUAowAFAMMABQDjAAAAAgEAAAIBAAACAW1dy9YsUOtjeEGmV3Ebi7nyfVy2Bv6hO/Xnf5Lkw1AabWVtb3J5IGFsbG9jYXRpb24gb2YgIGJ5dGVzIGZhaWxlZAAAMAsQABUAAABFCxAADQAAADcCEAAYAAAAZAEAAAkAAAAAAAAACAAAAAQAAAAFAAAABgAAAAcAAAAIAAAACQAAAAwAAAAEAAAACgAAAAsAAAAMAAAAAAAAAAgAAAAEAAAADQAAAA4AAAAPAAAAEAAAABEAAAAQAAAABAAAABIAAAATAAAAFAAAAAgAAAC7ARAAUAAAACoCAAARAAAAAAAAAAgAAAAEAAAAFQAAAGFzc2VydGlvbiBmYWlsZWQ6IHBzaXplID49IHNpemUgKyBtaW5fb3ZlcmhlYWQAAAwCEAAqAAAAsQQAAAkAAABhc3NlcnRpb24gZmFpbGVkOiBwc2l6ZSA8PSBzaXplICsgbWF4X292ZXJoZWFkAAAMAhAAKgAAALcEAAANAAAACQAAAAwAAAAEAAAAFgAAAGNhcGFjaXR5IG92ZXJmbG93AAAAkAwQABEAAAAwMDAxMDIwMzA0MDUwNjA3MDgwOTEwMTExMjEzMTQxNTE2MTcxODE5MjAyMTIyMjMyNDI1MjYyNzI4MjkzMDMxMzIzMzM0MzUzNjM3MzgzOTQwNDE0MjQzNDQ0NTQ2NDc0ODQ5NTA1MTUyNTM1NDU1NTY1NzU4NTk2MDYxNjI2MzY0NjU2NjY3Njg2OTcwNzE3MjczNzQ3NTc2Nzc3ODc5ODA4MTgyODM4NDg1ODY4Nzg4ODk5MDkxOTI5Mzk0OTU5Njk3OTg5OQEAAAAAAAAAcmFuZ2Ugc3RhcnQgaW5kZXggIG91dCBvZiByYW5nZSBmb3Igc2xpY2Ugb2YgbGVuZ3RoIHwNEAASAAAAjg0QACIAAAByYW5nZSBlbmQgaW5kZXggwA0QABAAAACODRAAIgAAAHNsaWNlIGluZGV4IHN0YXJ0cyBhdCAgYnV0IGVuZHMgYXQgAOANEAAWAAAA9g0QAA0AAABpbmRleCBvdXQgb2YgYm91bmRzOiB0aGUgbGVuIGlzICBidXQgdGhlIGluZGV4IGlzIAAAFA4QACAAAAA0DhAAEgAAAFJlZkNlbGwgYWxyZWFkeSBib3Jyb3dlZABB8JzAAAsEBAAAAAApBG5hbWUBIgFZH19fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIAPAlwcm9kdWNlcnMBDHByb2Nlc3NlZC1ieQIGd2FscnVzBjAuMjQuNAx3YXNtLWJpbmRnZW4HMC4yLjEwNg==";let ne;function hE(n){ne=n}function sP(n){yc===Gn.length&&Gn.push(Gn.length+1);const t=yc;return yc=Gn[t],Gn[t]=n,t}function oP(n){n<132||(Gn[n]=yc,yc=n)}function dE(n,t){return n=n>>>0,aP().subarray(n/4,n/4+t)}function D0(n,t){return n=n>>>0,k0().subarray(n/1,n/1+t)}let Us=null;function je(){return(Us===null||Us.buffer.detached===!0||Us.buffer.detached===void 0&&Us.buffer!==ne.memory.buffer)&&(Us=new DataView(ne.memory.buffer)),Us}function gE(n,t){return n=n>>>0,uP(n,t)}let xf=null;function aP(){return(xf===null||xf.byteLength===0)&&(xf=new Uint32Array(ne.memory.buffer)),xf}let If=null;function k0(){return(If===null||If.byteLength===0)&&(If=new Uint8Array(ne.memory.buffer)),If}function cP(n){return Gn[n]}let Gn=new Array(128).fill(void 0);Gn.push(void 0,null,!0,!1);let yc=Gn.length;function F0(n,t){const e=t(n.length*1,1)>>>0;return k0().set(n,e/1),bf=n.length,e}function M0(n){const t=cP(n);return oP(n),t}let Ef=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Ef.decode();const lP=2146435072;let R0=0;function uP(n,t){return R0+=t,R0>=lP&&(Ef=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),Ef.decode(),R0=t),Ef.decode(k0().subarray(n,n+t))}let bf=0;const pE=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>ne.__wbg_chunksliceresult_free(n>>>0,1)),mE=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>ne.__wbg_decompressresult_free(n>>>0,1));class Gs{static __wrap(t){t=t>>>0;const e=Object.create(Gs.prototype);return e.__wbg_ptr=t,pE.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,pE.unregister(this),t}free(){const t=this.__destroy_into_raw();ne.__wbg_chunksliceresult_free(t,0)}get cpositions(){try{const i=ne.__wbindgen_add_to_stack_pointer(-16);ne.chunksliceresult_cpositions(i,this.__wbg_ptr);var t=je().getInt32(i+0,!0),e=je().getInt32(i+4,!0),r=dE(t,e).slice();return ne.__wbindgen_export(t,e*4,4),r}finally{ne.__wbindgen_add_to_stack_pointer(16)}}get dpositions(){try{const i=ne.__wbindgen_add_to_stack_pointer(-16);ne.chunksliceresult_dpositions(i,this.__wbg_ptr);var t=je().getInt32(i+0,!0),e=je().getInt32(i+4,!0),r=dE(t,e).slice();return ne.__wbindgen_export(t,e*4,4),r}finally{ne.__wbindgen_add_to_stack_pointer(16)}}get buffer(){try{const i=ne.__wbindgen_add_to_stack_pointer(-16);ne.chunksliceresult_buffer(i,this.__wbg_ptr);var t=je().getInt32(i+0,!0),e=je().getInt32(i+4,!0),r=D0(t,e).slice();return ne.__wbindgen_export(t,e*1,1),r}finally{ne.__wbindgen_add_to_stack_pointer(16)}}}Symbol.dispose&&(Gs.prototype[Symbol.dispose]=Gs.prototype.free);class zs{static __wrap(t){t=t>>>0;const e=Object.create(zs.prototype);return e.__wbg_ptr=t,mE.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,mE.unregister(this),t}free(){const t=this.__destroy_into_raw();ne.__wbg_decompressresult_free(t,0)}get bytes_read(){return ne.decompressresult_bytes_read(this.__wbg_ptr)>>>0}get data(){try{const i=ne.__wbindgen_add_to_stack_pointer(-16);ne.decompressresult_data(i,this.__wbg_ptr);var t=je().getInt32(i+0,!0),e=je().getInt32(i+4,!0),r=D0(t,e).slice();return ne.__wbindgen_export(t,e*1,1),r}finally{ne.__wbindgen_add_to_stack_pointer(16)}}}Symbol.dispose&&(zs.prototype[Symbol.dispose]=zs.prototype.free);function CE(n){try{const o=ne.__wbindgen_add_to_stack_pointer(-16),a=F0(n,ne.__wbindgen_export2),l=bf;ne.decompress_all(o,a,l);var t=je().getInt32(o+0,!0),e=je().getInt32(o+4,!0),r=je().getInt32(o+8,!0),i=je().getInt32(o+12,!0);if(i)throw M0(r);var s=D0(t,e).slice();return ne.__wbindgen_export(t,e*1,1),s}finally{ne.__wbindgen_add_to_stack_pointer(16)}}function fP(n){try{const i=ne.__wbindgen_add_to_stack_pointer(-16),s=F0(n,ne.__wbindgen_export2),o=bf;ne.decompress_block(i,s,o);var t=je().getInt32(i+0,!0),e=je().getInt32(i+4,!0),r=je().getInt32(i+8,!0);if(r)throw M0(e);return zs.__wrap(t)}finally{ne.__wbindgen_add_to_stack_pointer(16)}}function yE(n,t,e,r,i){try{const l=ne.__wbindgen_add_to_stack_pointer(-16),c=F0(n,ne.__wbindgen_export2),u=bf;ne.decompress_chunk_slice(l,c,u,t,e,r,i);var s=je().getInt32(l+0,!0),o=je().getInt32(l+4,!0),a=je().getInt32(l+8,!0);if(a)throw M0(o);return Gs.__wrap(s)}finally{ne.__wbindgen_add_to_stack_pointer(16)}}function AP(n,t){const e=Error(gE(n,t));return sP(e)}function hP(n,t){throw new Error(gE(n,t))}let wc=null,N0=null;async function wE(){return wc||(N0||(N0=(async()=>{const t=await(await fetch(iP)).arrayBuffer(),{instance:e}=await WebAssembly.instantiate(t,{"./bgzf_wasm_bg.js":S0});return wc=e.exports,hE(wc),wc})()),N0)}async function dP(n){return await wE(),CE(n)}async function gP(n,t,e,r,i){await wE();const s=yE(n,t,e,r,i),o=s.buffer,a=[...s.cpositions],l=[...s.dpositions];return s.free(),{buffer:o,cpositions:a,dpositions:l}}function pP(n){return n.length>=2&&n[0]===31&&n[1]===139}async function mP(n){if(typeof DecompressionStream<"u"){const t=new DecompressionStream("gzip"),e=t.writable.getWriter(),r=e.write(n).then(()=>e.close()),i=[],s=t.readable.getReader();for(;;){const{done:c,value:u}=await s.read();if(c)break;i.push(u)}await r;const o=i.reduce((c,u)=>c+u.length,0),a=new Uint8Array(o);let l=0;for(const c of i)a.set(c,l),l+=c.length;return a}else return rP(n,void 0)}async function Hs(n){try{return await dP(n)}catch(t){if(/invalid bgzf header/.exec(`${t}`)){if(pP(n))return mP(n);throw new Error("problem decompressing block: not a valid bgzf or gzip block")}throw/invalid gzip header/.exec(`${t}`)?new Error("problem decompressing block: incorrect gzip header check"):t}}async function xE(n,t,e){try{const{minv:r,maxv:i}=t,s=await gP(n,r.blockPosition,r.dataPosition,i.blockPosition,i.dataPosition);return{buffer:s.buffer,cpositions:s.cpositions,dpositions:s.dpositions}}catch(r){throw/invalid gzip header/.exec(`${r}`)?new Error("problem decompressing block: incorrect gzip header check"):r}}let T0=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(T0=new Int32Array(T0));const CP=(n,t)=>{let e=-1;for(let r=0;r<n.length;r++)e=T0[(e^n[r])&255]^e>>>8;return e^-1},yP=21582659,wP=38359875;function xP(n,t){return n*2**t}function IE(n,t){return Math.floor(n/2**t)}let Bf=class extends xI{constructor(){super(...arguments),this.maxBinNumber=0,this.depth=0,this.minShift=0}async lineCount(t,e){var i,s;return((s=(i=(await this.parse(e)).indices(t))==null?void 0:i.stats)==null?void 0:s.lineCount)||0}async indexCov(){return[]}parseAuxData(t,e){const r=new DataView(t.buffer),i=r.getUint32(e,!0),s=i&65536?"zero-based-half-open":"1-based-closed",o={0:"generic",1:"SAM",2:"VCF"}[i&15];if(!o)throw new Error(`invalid Tabix preset format flags ${i}`);const a={ref:r.getInt32(e+4,!0),start:r.getInt32(e+8,!0),end:r.getInt32(e+12,!0)},l=r.getInt32(e+16,!0),c=l?String.fromCharCode(l):"",u=r.getInt32(e+20,!0),f=r.getInt32(e+24,!0);return{columnNumbers:a,coordinateType:s,metaValue:l,metaChar:c,skipLines:u,format:o,formatFlags:i,...d5(t.subarray(e+28,e+28+f),this.renameRefSeq)}}async _parse(t){const e=await this.filehandle.readFile(t),r=await Hs(e),i=new DataView(r.buffer);let s;const o=i.getUint32(0,!0);if(o===yP)s=1;else if(o===wP)s=2;else throw new Error(`Not a CSI file ${o}`);this.minShift=i.getInt32(4,!0),this.depth=i.getInt32(8,!0),this.maxBinNumber=((1<<(this.depth+1)*3)-1)/7;const a=this.maxBinNumber,l=i.getInt32(12,!0),c=l>=30?this.parseAuxData(r,16):void 0,u=i.getInt32(16+l,!0);let f=16+l+4,h;const A=[];for(let m=0;m<u;m++){A.push(f);const p=i.getInt32(f,!0);f+=4;for(let w=0;w<p;w++){const I=i.getUint32(f,!0);if(f+=4,I>this.maxBinNumber)f+=44;else{f+=8;const y=i.getInt32(f,!0);f+=4;for(let b=0;b<y;b+=1){const B=xr(r,f);f+=8,f+=8,h=gc(h,B)}}}}const d=new dc({maxSize:5});function g(m){let p=A[m];if(p===void 0)return;const w=i.getInt32(p,!0);p+=4;const I={};let y;for(let b=0;b<w;b++){const B=i.getUint32(p,!0);if(p+=4,B>a)y=wI(r,p+28),p+=44;else{h=gc(h,xr(r,p)),p+=8;const E=i.getInt32(p,!0);p+=4;const Q=new Array(E);for(let k=0;k<E;k+=1){const S=xr(r,p);p+=8;const P=xr(r,p);p+=8,Q[k]=new CI(S,P,B)}I[B]=Q}}return{binIndex:I,stats:y}}return{csiVersion:s,firstDataLine:h,indices:m=>{if(!d.has(m)){const p=g(m);return p&&d.set(m,p),p}return d.get(m)},refCount:u,csi:!0,maxBlockSize:65536,...c}}async blocksForRange(t,e,r,i={}){e<0&&(e=0);const o=(await this.parse(i)).indices(t);if(!o)return[];const a=this.reg2bins(e,r);if(a.length===0)return[];const l=[],{binIndex:c}=o;for(const[u,f]of a)for(let h=u;h<=f;h++){const A=c[h];if(A)for(let d=0,g=A.length;d<g;d++)l.push(A[d])}return p0(l,new II(0,0))}reg2bins(t,e){t-=1,t<1&&(t=1),e>2**50&&(e=2**34),e-=1;let r=0,i=0,s=this.minShift+this.depth*3;const o=[];for(;r<=this.depth;s-=3,i+=xP(1,r*3),r+=1){const a=i+IE(t,s),l=i+IE(e,s);if(l-a+o.length>this.maxBinNumber)throw new Error(`query ${t}-${e} is too large for current binning scheme (shift ${this.minShift}, depth ${this.depth}), try a smaller query or a coarser index binning scheme`);o.push([a,l])}return o}async parse(t={}){return this.setupP||(this.setupP=this._parse(t).catch(e=>{throw this.setupP=void 0,e})),this.setupP}async hasRefSeq(t,e={}){var i;return!!((i=(await this.parse(e)).indices(t))!=null&&i.binIndex)}};class IP{read(){throw new Error("never called")}stat(){throw new Error("never called")}readFile(){throw new Error("never called")}close(){throw new Error("never called")}}const EP=3,bP=4,Gt={BAM_FPAIRED:1,BAM_FPROPER_PAIR:2,BAM_FUNMAP:4,BAM_FMUNMAP:8,BAM_FREVERSE:16,BAM_FMREVERSE:32,BAM_FREAD1:64,BAM_FREAD2:128,BAM_FSECONDARY:256,BAM_FQCFAIL:512,BAM_FDUP:1024,BAM_FSUPPLEMENTARY:2048},xc="=ACMGRSVTWYHKDBN".split(""),BP=[77,73,68,78,83,72,80,61,88,63,63,63,63,63,63,63],EE=461;class bE{constructor(t){this.bytes=t.bytes,this.fileOffset=t.fileOffset,this._dataView=new DataView(this.bytes.byteArray.buffer)}get byteArray(){return this.bytes.byteArray}get flags(){return this._cachedFlags===void 0&&(this._cachedFlags=(this._dataView.getInt32(this.bytes.start+16,!0)&4294901760)>>16),this._cachedFlags}get ref_id(){return this._cachedRefId===void 0&&(this._cachedRefId=this._dataView.getInt32(this.bytes.start+4,!0)),this._cachedRefId}get start(){return this._cachedStart===void 0&&(this._cachedStart=this._dataView.getInt32(this.bytes.start+8,!0)),this._cachedStart}get end(){return this._cachedEnd===void 0&&(this._cachedEnd=this.start+this.length_on_ref),this._cachedEnd}get mq(){const t=(this.bin_mq_nl&65280)>>8;return t===255?void 0:t}get score(){return this.mq}get qual(){if(this.isSegmentUnmapped())return null;{const t=this.b0+this.read_name_length+this.num_cigar_bytes+this.num_seq_bytes;return this.byteArray.subarray(t,t+this.seq_length)}}get strand(){return this.isReverseComplemented()?-1:1}get b0(){return this.bytes.start+36}get tagsStart(){return this._cachedTagsStart===void 0&&(this._cachedTagsStart=this.b0+this.read_name_length+this.num_cigar_bytes+this.num_seq_bytes+this.seq_length),this._cachedTagsStart}get name(){const t=this.read_name_length-1,e=this.b0,r=this.byteArray,i=new Array(t);for(let s=0;s<t;s++)i[s]=r[e+s];return String.fromCharCode(...i)}get NUMERIC_MD(){if(this._cachedNUMERIC_MD===void 0){const t=this.getTagRaw("MD");this._cachedNUMERIC_MD=t instanceof Uint8Array?t:null}return this._cachedNUMERIC_MD===null?void 0:this._cachedNUMERIC_MD}get tags(){return this._cachedTags===void 0&&(this._cachedTags=this._computeTags()),this._cachedTags}getTag(t){return this._cachedTags!==void 0?this._cachedTags[t]:this._findTag(t,!1)}getTagRaw(t){return this._findTag(t,!0)}_findTag(t,e){const r=t.charCodeAt(0),i=t.charCodeAt(1);let s=this.tagsStart;const o=this.bytes.end,a=this.byteArray;for(;s<o;){const l=a[s],c=a[s+1],u=a[s+2];s+=3;const f=l===r&&c===i;switch(u){case 65:if(f)return String.fromCharCode(a[s]);s+=1;break;case 105:if(f)return this._dataView.getInt32(s,!0);s+=4;break;case 73:if(f)return this._dataView.getUint32(s,!0);s+=4;break;case 99:if(f)return this._dataView.getInt8(s);s+=1;break;case 67:if(f)return this._dataView.getUint8(s);s+=1;break;case 115:if(f)return this._dataView.getInt16(s,!0);s+=2;break;case 83:if(f)return this._dataView.getUint16(s,!0);s+=2;break;case 102:if(f)return this._dataView.getFloat32(s,!0);s+=4;break;case 90:case 72:{if(f){const h=s;for(;s<o&&a[s]!==0;)s++;if(e)return a.subarray(h,s);const A=[];for(let d=h;d<s;d++)A.push(String.fromCharCode(a[d]));return A.join("")}for(;s<=o&&a[s++]!==0;);break}case 66:{const h=a[s++],A=this._dataView.getInt32(s,!0);s+=4;const d=a.byteOffset+s;if(f)if(h===105){if(d%4===0)return new Int32Array(a.buffer,d,A);const g=new Array(A);for(let m=0;m<A;m++)g[m]=this._dataView.getInt32(s+m*4,!0);return g}else if(h===73){if(d%4===0)return new Uint32Array(a.buffer,d,A);const g=new Array(A);for(let m=0;m<A;m++)g[m]=this._dataView.getUint32(s+m*4,!0);return g}else if(h===115){if(d%2===0)return new Int16Array(a.buffer,d,A);const g=new Array(A);for(let m=0;m<A;m++)g[m]=this._dataView.getInt16(s+m*2,!0);return g}else if(h===83){if(d%2===0)return new Uint16Array(a.buffer,d,A);const g=new Array(A);for(let m=0;m<A;m++)g[m]=this._dataView.getUint16(s+m*2,!0);return g}else{if(h===99)return new Int8Array(a.buffer,d,A);if(h===67)return new Uint8Array(a.buffer,d,A);if(h===102){if(d%4===0)return new Float32Array(a.buffer,d,A);const g=new Array(A);for(let m=0;m<A;m++)g[m]=this._dataView.getFloat32(s+m*4,!0);return g}}h===105||h===73||h===102?s+=A<<2:h===115||h===83?s+=A<<1:(h===99||h===67)&&(s+=A);break}}}}_computeTags(){let t=this.tagsStart;const e=this.bytes.end,r=this.byteArray,i={};for(;t<e;){const s=String.fromCharCode(r[t],r[t+1]),o=r[t+2];switch(t+=3,o){case 65:i[s]=String.fromCharCode(r[t]),t+=1;break;case 105:i[s]=this._dataView.getInt32(t,!0),t+=4;break;case 73:i[s]=this._dataView.getUint32(t,!0),t+=4;break;case 99:i[s]=this._dataView.getInt8(t),t+=1;break;case 67:i[s]=this._dataView.getUint8(t),t+=1;break;case 115:i[s]=this._dataView.getInt16(t,!0),t+=2;break;case 83:i[s]=this._dataView.getUint16(t,!0),t+=2;break;case 102:i[s]=this._dataView.getFloat32(t,!0),t+=4;break;case 90:case 72:{const a=[];for(;t<=e;){const l=r[t++];if(l!==0)a.push(String.fromCharCode(l));else break}i[s]=a.join("");break}case 66:{const a=r[t++],l=this._dataView.getInt32(t,!0);t+=4;const c=r.byteOffset+t;if(a===105){if(c%4===0)i[s]=new Int32Array(r.buffer,c,l);else{const u=new Array(l);for(let f=0;f<l;f++)u[f]=this._dataView.getInt32(t+f*4,!0);i[s]=u}t+=l<<2}else if(a===73){if(c%4===0)i[s]=new Uint32Array(r.buffer,c,l);else{const u=new Array(l);for(let f=0;f<l;f++)u[f]=this._dataView.getUint32(t+f*4,!0);i[s]=u}t+=l<<2}else if(a===115){if(c%2===0)i[s]=new Int16Array(r.buffer,c,l);else{const u=new Array(l);for(let f=0;f<l;f++)u[f]=this._dataView.getInt16(t+f*2,!0);i[s]=u}t+=l<<1}else if(a===83){if(c%2===0)i[s]=new Uint16Array(r.buffer,c,l);else{const u=new Array(l);for(let f=0;f<l;f++)u[f]=this._dataView.getUint16(t+f*2,!0);i[s]=u}t+=l<<1}else if(a===99)i[s]=new Int8Array(r.buffer,c,l),t+=l;else if(a===67)i[s]=new Uint8Array(r.buffer,c,l),t+=l;else if(a===102){if(c%4===0)i[s]=new Float32Array(r.buffer,c,l);else{const u=new Array(l);for(let f=0;f<l;f++)u[f]=this._dataView.getFloat32(t+f*4,!0);i[s]=u}t+=l<<2}break}default:console.error("Unknown BAM tag type",o);break}}return i}isPaired(){return!!(this.flags&Gt.BAM_FPAIRED)}isProperlyPaired(){return!!(this.flags&Gt.BAM_FPROPER_PAIR)}isSegmentUnmapped(){return!!(this.flags&Gt.BAM_FUNMAP)}isMateUnmapped(){return!!(this.flags&Gt.BAM_FMUNMAP)}isReverseComplemented(){return!!(this.flags&Gt.BAM_FREVERSE)}isMateReverseComplemented(){return!!(this.flags&Gt.BAM_FMREVERSE)}isRead1(){return!!(this.flags&Gt.BAM_FREAD1)}isRead2(){return!!(this.flags&Gt.BAM_FREAD2)}isSecondary(){return!!(this.flags&Gt.BAM_FSECONDARY)}isFailedQc(){return!!(this.flags&Gt.BAM_FQCFAIL)}isDuplicate(){return!!(this.flags&Gt.BAM_FDUP)}isSupplementary(){return!!(this.flags&Gt.BAM_FSUPPLEMENTARY)}get cigarAndLength(){return this._cachedCigarAndLength===void 0&&(this._cachedCigarAndLength=this._computeCigarAndLength()),this._cachedCigarAndLength}_computeCigarAndLength(){if(this.isSegmentUnmapped())return{length_on_ref:0,NUMERIC_CIGAR:new Uint32Array(0)};const t=this.num_cigar_ops;let e=this.b0+this.read_name_length;const r=this._dataView.getInt32(e,!0),i=r>>4;if((r&15)===bP&&i===this.seq_length){e+=4;const u=this._dataView.getInt32(e,!0),f=u>>4;return(u&15)!==EP&&console.warn("CG tag with no N tag"),{NUMERIC_CIGAR:this.tags.CG,length_on_ref:f}}const o=this.byteArray.byteOffset+e;if(o%4===0&&t>50){const u=new Uint32Array(this.byteArray.buffer,o,t);let f=0;for(let h=0;h<t;++h){const A=u[h];f+=(A>>4)*(EE>>(A&15)&1)}return{NUMERIC_CIGAR:u,length_on_ref:f}}const l=new Array(t);let c=0;for(let u=0;u<t;++u){const f=this._dataView.getInt32(e+u*4,!0)|0;l[u]=f,c+=(f>>4)*(EE>>(f&15)&1)}return{NUMERIC_CIGAR:l,length_on_ref:c}}get length_on_ref(){return this.cigarAndLength.length_on_ref}get NUMERIC_CIGAR(){return this.cigarAndLength.NUMERIC_CIGAR}get CIGAR(){const t=this.NUMERIC_CIGAR;let e="";for(let r=0,i=t.length;r<i;r++){const s=t[r],o=s>>4,a=BP[s&15];e+=o+String.fromCharCode(a)}return e}get num_cigar_ops(){return this.flag_nc&65535}get num_cigar_bytes(){return this.num_cigar_ops<<2}get read_name_length(){return this.bin_mq_nl&255}get num_seq_bytes(){return this.seq_length+1>>1}get NUMERIC_SEQ(){const t=this.b0+this.read_name_length+this.num_cigar_bytes;return this.byteArray.subarray(t,t+this.num_seq_bytes)}get seq(){const t=this.NUMERIC_SEQ,e=this.seq_length,r=new Array(e);let i=0;const s=e>>1;for(let o=0;o<s;++o){const a=t[o];r[i++]=xc[(a&240)>>4],r[i++]=xc[a&15]}if(i<e){const o=t[s];r[i]=xc[(o&240)>>4]}return r.join("")}get pair_orientation(){if(!this.isSegmentUnmapped()&&!this.isMateUnmapped()&&this.ref_id===this.next_refid){const t=this.isReverseComplemented()?"R":"F",e=this.isMateReverseComplemented()?"R":"F";let r=" ",i=" ";return this.isRead1()?(r="1",i="2"):this.isRead2()&&(r="2",i="1"),this.template_length>0?`${t}${r}${e}${i}`:`${e}${i}${t}${r}`}}get bin_mq_nl(){return this._dataView.getInt32(this.bytes.start+12,!0)}get flag_nc(){return this._dataView.getInt32(this.bytes.start+16,!0)}get seq_length(){return this._dataView.getInt32(this.bytes.start+20,!0)}get next_refid(){return this._dataView.getInt32(this.bytes.start+24,!0)}get next_pos(){return this._dataView.getInt32(this.bytes.start+28,!0)}get template_length(){return this._dataView.getInt32(this.bytes.start+32,!0)}seqAt(t){if(t<this.seq_length){const e=t>>1,r=this.byteArray[this.b0+this.read_name_length+this.num_cigar_bytes+e];return t%2===0?xc[(r&240)>>4]:xc[r&15]}else return}toJSON(){const t={};for(const e of Object.keys(this))e.startsWith("_")||e==="bytes"||(t[e]=this[e]);return t}}function BE(n){const t=n.split(/\r?\n/),e=[];for(const r of t){const[i,...s]=r.split(/\t/);i&&e.push({tag:i.slice(1),data:s.map(o=>{const a=o.indexOf(":"),l=o.slice(0,a),c=o.slice(a+1);return{tag:l,value:c}})})}return e}const vE=21840194,vP=65536;class QE{constructor({bamFilehandle:t,bamPath:e,bamUrl:r,baiPath:i,baiFilehandle:s,baiUrl:o,csiPath:a,csiFilehandle:l,csiUrl:c,htsget:u,renameRefSeqs:f=A=>A,recordClass:h}){if(this.htsget=!1,this.chunkFeatureCache=new dc({maxSize:100}),this.renameRefSeq=f,this.RecordClass=h??bE,t)this.bam=t;else if(e)this.bam=new at(e);else if(r)this.bam=new pn(r);else if(u)this.htsget=!0,this.bam=new IP;else throw new Error("unable to initialize bam");if(l)this.index=new Bf({filehandle:l});else if(a)this.index=new Bf({filehandle:new at(a)});else if(c)this.index=new Bf({filehandle:new pn(c)});else if(s)this.index=new Rs({filehandle:s});else if(i)this.index=new Rs({filehandle:new at(i)});else if(o)this.index=new Rs({filehandle:new pn(o)});else if(e)this.index=new Rs({filehandle:new at(`${e}.bai`)});else if(r)this.index=new Rs({filehandle:new pn(`${r}.bai`)});else if(u)this.htsget=!0;else throw new Error("unable to infer index format")}async getHeaderPre(t){const e=h5(t);if(!this.index)return;const r=await this.index.parse(e),i=r.firstDataLine===void 0?await this.bam.readFile():await this.bam.read(r.firstDataLine.blockPosition+vP,0),s=await Hs(i),o=new DataView(s.buffer);if(o.getInt32(0,!0)!==vE)throw new Error("Not a BAM file");const a=o.getInt32(4,!0),l=new TextDecoder("utf8");this.header=l.decode(s.subarray(8,8+a));const{chrToIndex:c,indexToChr:u}=this._parseRefSeqs(s,a+8);return this.chrToIndex=c,this.indexToChr=u,BE(this.header)}getHeader(t){return this.headerP||(this.headerP=this.getHeaderPre(t).catch(e=>{throw this.headerP=void 0,e})),this.headerP}async getHeaderText(t={}){return await this.getHeader(t),this.header}_parseRefSeqs(t,e){const r=new DataView(t.buffer),i=r.getInt32(e,!0);let s=e+4;const o={},a=[],l=new TextDecoder("utf8");for(let c=0;c<i;c+=1){if(s+8>t.length)throw new Error(`Insufficient data for reference sequences: need more than ${t.length} bytes`);const u=r.getInt32(s,!0),f=this.renameRefSeq(l.decode(t.subarray(s+4,s+4+u-1))),h=r.getInt32(s+u+4,!0);o[f]=c,a.push({refName:f,length:h}),s=s+8+u}return{chrToIndex:o,indexToChr:a}}async getRecordsForRange(t,e,r,i){var a;await this.getHeader(i);const s=(a=this.chrToIndex)==null?void 0:a[t];if(s===void 0||!this.index)return[];const o=await this.index.blocksForRange(s,e-1,r,i);return this._fetchChunkFeaturesDirect(o,s,e,r,i)}chunkCacheKey(t,e){const{minv:r,maxv:i}=t;return`${r.blockPosition}:${r.dataPosition}-${i.blockPosition}:${i.dataPosition}${C5(e)}`}blocksOverlap(t,e,r,i){return t<=i&&e>=r}evictOverlappingChunks(t,e){for(const[r,i]of this.chunkFeatureCache)this.blocksOverlap(t,e,i.minBlock,i.maxBlock)&&this.chunkFeatureCache.delete(r)}async _fetchChunkFeaturesDirect(t,e,r,i,s={}){const{viewAsPairs:o,filterBy:a}=s,{flagInclude:l=0,flagExclude:c=0,tagFilter:u}=a||{},f=[];for(let h=0,A=t.length;h<A;h++){const d=t[h],g=this.chunkCacheKey(d,a),m=d.minv.blockPosition,p=d.maxv.blockPosition;let w;const I=this.chunkFeatureCache.get(g);if(I)w=I.features;else{this.evictOverlappingChunks(m,p);const{data:b,cpositions:B,dpositions:E}=await this._readChunk({chunk:d,opts:s}),Q=await this.readBamFeatures(b,B,E,d);if(a){w=[];for(let k=0,S=Q.length;k<S;k++){const P=Q[k];p5(P.flags,l,c)||u&&m5(P.tags[u.tag],u.value)||w.push(P)}}else w=Q;this.chunkFeatureCache.set(g,{minBlock:m,maxBlock:p,features:w})}let y=!1;for(let b=0,B=w.length;b<B;b++){const E=w[b];if(E.ref_id===e)if(E.start>=i){y=!0;break}else E.end>=r&&f.push(E)}if(y)break}if(o){const h=await this.fetchPairs(e,f,s);for(let A=0,d=h.length;A<d;A++)f.push(h[A])}return f}async fetchPairs(t,e,r){const{pairAcrossChr:i,maxInsertSize:s=2e5}=r,o={},a={};for(let h=0,A=e.length;h<A;h++){const d=e[h],g=d.name;o[g]=(o[g]||0)+1,a[d.fileOffset]=1}const l=[];for(let h=0,A=e.length;h<A;h++){const d=e[h],g=d.name;this.index&&o[g]===1&&(i||d.next_refid===t&&Math.abs(d.start-d.next_pos)<s)&&l.push(this.index.blocksForRange(d.next_refid,d.next_pos,d.next_pos+1,r))}const c=new Map,u=await Promise.all(l);for(let h=0,A=u.length;h<A;h++){const d=u[h];for(let g=0,m=d.length;g<m;g++){const p=d[g],w=p.toString();c.has(w)||c.set(w,p)}}return(await Promise.all([...c.values()].map(async h=>{const{data:A,cpositions:d,dpositions:g,chunk:m}=await this._readChunk({chunk:h,opts:r}),p=[],w=await this.readBamFeatures(A,d,g,m);for(let I=0,y=w.length;I<y;I++){const b=w[I];o[b.name]===1&&!a[b.fileOffset]&&p.push(b)}return p}))).flat()}async _readChunk({chunk:t,opts:e}){const r=await this.bam.read(t.fetchedSize(),t.minv.blockPosition,e),{buffer:i,cpositions:s,dpositions:o}=await xE(r,t);return{data:i,cpositions:s,dpositions:o,chunk:t}}async readBamFeatures(t,e,r,i){let s=0;const o=[];let a=0;const l=new DataView(t.buffer),c=r.length>0,u=e.length>0;for(;s+4<t.length;){const f=l.getInt32(s,!0),h=s+4+f-1;if(c){for(;s+i.minv.dataPosition>=r[a++];);a--}if(h<t.length){const A=new this.RecordClass({bytes:{byteArray:t,start:s,end:h},fileOffset:u?e[a]*256+(s-r[a])+i.minv.dataPosition+1:CP(t.subarray(s,h))>>>0});o.push(A)}s=h+1}return o}async hasRefSeq(t){var r,i;const e=(r=this.chrToIndex)==null?void 0:r[t];return e===void 0?!1:(i=this.index)==null?void 0:i.hasRefSeq(e)}async lineCount(t){var r;const e=(r=this.chrToIndex)==null?void 0:r[t];return e===void 0||!this.index?0:this.index.lineCount(e)}async indexCov(t,e,r){var s;if(!this.index)return[];await this.index.parse();const i=(s=this.chrToIndex)==null?void 0:s[t];return i===void 0?[]:this.index.indexCov(i,e,r)}async blocksForRange(t,e,r,i){var o;if(!this.index)return[];await this.index.parse();const s=(o=this.chrToIndex)==null?void 0:o[t];return s===void 0?[]:this.index.blocksForRange(s,e,r,i)}clearFeatureCache(){this.chunkFeatureCache.clear()}async estimatedBytesForRegions(t,e){if(!this.index)return 0;if(await this.getHeader(e),!this.chrToIndex)throw new Error("Header not yet parsed");return this.index.estimatedBytesForRegions(t.map(r=>{const i=this.chrToIndex[r.refName];if(i===void 0)throw new Error(`Unknown reference name: ${r.refName}`);return{refId:i,start:r.start,end:r.end}}),e)}}async function SE(n,t){const e=await Promise.all(n.map(async r=>{const{url:i,headers:s}=r;if(i.startsWith("data:")){const o=await fetch(i);if(!o.ok)throw new Error("failed to decode base64");const a=await o.arrayBuffer();return new Uint8Array(a)}else{const{referer:o,...a}=s,l=await fetch(i,{...t,headers:{...t==null?void 0:t.headers,...a}});if(!l.ok)throw new Error(`HTTP ${l.status} fetching ${i}: ${await l.text()}`);return new Uint8Array(await l.arrayBuffer())}}));return g5(await Promise.all(e.map(r=>Hs(r))))}class QP extends QE{constructor(t){super({htsget:!0,recordClass:t.recordClass}),this.baseUrl=t.baseUrl,this.trackId=t.trackId}async getRecordsForRange(t,e,r,i){var A;const o=`${`${this.baseUrl}/${this.trackId}`}?referenceName=${t}&start=${e}&end=${r}&format=BAM`,a=(A=this.chrToIndex)==null?void 0:A[t];if(a===void 0)return[];const l=await fetch(o,{...i});if(!l.ok)throw new Error(`HTTP ${l.status} fetching ${o}: ${await l.text()}`);const c=await l.json(),u=await SE(c.htsget.urls.slice(1),i),f=await this.readBamFeatures(u,[],[],{minv:{dataPosition:0,blockPosition:0},maxv:{dataPosition:0,blockPosition:0}}),h=[];for(let d=0,g=f.length;d<g;d++){const m=f[d];if(m.ref_id===a){if(m.start>=r)break;m.end>=e&&h.push(m)}}return h}async getHeader(t={}){const e=`${this.baseUrl}/${this.trackId}?referenceName=na&class=header`,r=await fetch(e,t);if(!r.ok)throw new Error(`HTTP ${r.status} fetching ${e}: ${await r.text()}`);const i=await r.json(),s=await SE(i.htsget.urls,t),o=new DataView(s.buffer);if(o.getInt32(0,!0)!==vE)throw new Error("Not a BAM file");const a=o.getInt32(4,!0),c=new TextDecoder("utf8").decode(s.subarray(8,8+a)),u=BE(c),f=[],h={},A=u.filter(d=>d.tag==="SQ");for(const[d,g]of A.entries()){let m="",p=0;for(const w of g.data)w.tag==="SN"?m=w.value:w.tag==="LN"&&(p=+w.value);h[m]=d,f[d]={refName:m,length:p}}return this.chrToIndex=h,this.indexToChr=f,u}}const SP=Object.freeze(Object.defineProperty({__proto__:null,BAI:Rs,BamFile:QE,BamRecord:bE,CSI:Bf,HtsgetFile:QP},Symbol.toStringTag,{value:"Module"}));class vf{constructor(t,e,r,i){this.minv=t,this.maxv=e,this.bin=r,this._fetchedSize=i}toUniqueString(){return`${this.minv}..${this.maxv} (bin ${this.bin}, fetchedSize ${this.fetchedSize()})`}toString(){return this.toUniqueString()}compareTo(t){return this.minv.compareTo(t.minv)||this.maxv.compareTo(t.maxv)||this.bin-t.bin}fetchedSize(){return this._fetchedSize!==void 0?this._fetchedSize:this.maxv.blockPosition+65536-this.minv.blockPosition}}class DE{constructor({filehandle:t,renameRefSeqs:e=r=>r}){this.filehandle=t,this.renameRefSeq=e}async getMetadata(t={}){const{indices:e,...r}=await this.parse(t);return r}_findFirstData(t,e){return t?t.compareTo(e)>0?e:t:e}async parse(t={}){return this.parseP||(this.parseP=this._parse(t).catch(e=>{throw this.parseP=void 0,e})),this.parseP}async hasRefSeq(t,e={}){var i;return!!((i=(await this.parse(e)).indices[t])!=null&&i.binIndex)}_parseNameBytes(t){let e=0,r=0;const i=[],s={},o=new TextDecoder("utf8");for(let a=0;a<t.length;a+=1)if(!t[a]){if(r<a){const l=this.renameRefSeq(o.decode(t.subarray(r,a)));i[e]=l,s[l]=e}r=a+1,e+=1}return{refNameToId:s,refIdToName:i}}}const kE=65536,DP=kE*kE;function FE(n,t=0){const e=n[t]|n[t+1]<<8|n[t+2]<<16|n[t+3]<<24;return((n[t+4]|n[t+5]<<8|n[t+6]<<16|n[t+7]<<24)>>>0)*DP+(e>>>0)}function kP(n,t){return t.minv.blockPosition-n.maxv.blockPosition<65e3&&t.maxv.blockPosition-n.minv.blockPosition<5e6}function ME(n,t){const e=[];let r;if(n.length===0)return n;n.sort(function(i,s){const o=i.minv.blockPosition-s.minv.blockPosition;return o===0?i.minv.dataPosition-s.minv.dataPosition:o});for(const i of n)(!t||i.maxv.compareTo(t)>0)&&(r===void 0?(e.push(i),r=i):kP(r,i)?i.maxv.compareTo(r.maxv)>0&&(r.maxv=i.maxv):(e.push(i),r=i));return e}class P0{constructor(t,e){this.blockPosition=t,this.dataPosition=e}toString(){return`${this.blockPosition}:${this.dataPosition}`}compareTo(t){return this.blockPosition-t.blockPosition||this.dataPosition-t.dataPosition}}function _s(n,t=0){return new P0(n[t+7]*1099511627776+n[t+6]*4294967296+n[t+5]*16777216+n[t+4]*65536+n[t+3]*256+n[t+2],n[t+1]<<8|n[t])}const FP=21582659,MP=38359875,RP={0:"generic",1:"SAM",2:"VCF"};function NP(n,t){return n*2**t}function RE(n,t){return Math.floor(n/2**t)}class Qf extends DE{constructor(t){super(t),this.maxBinNumber=0,this.depth=0,this.minShift=0}async lineCount(t,e={}){const r=await this.parse(e),i=r.refNameToId[t];if(i===void 0||!r.indices[i])return-1;const{stats:o}=r.indices[i];return o?o.lineCount:-1}indexCov(){throw new Error("CSI indexes do not support indexcov")}parseAuxData(t,e){const r=new DataView(t.buffer),i=r.getInt32(e,!0),s=i&65536?"zero-based-half-open":"1-based-closed",o=RP[i&15];if(!o)throw new Error(`invalid Tabix preset format flags ${i}`);const a={ref:r.getInt32(e+4,!0),start:r.getInt32(e+8,!0),end:r.getInt32(e+12,!0)},l=r.getInt32(e+16,!0),c=l?String.fromCharCode(l):void 0,u=r.getInt32(e+20,!0),f=r.getInt32(e+24,!0),{refIdToName:h,refNameToId:A}=this._parseNameBytes(t.subarray(e+28,e+28+f));return{refIdToName:h,refNameToId:A,skipLines:u,metaChar:c,columnNumbers:a,format:o,coordinateType:s}}async _parse(t={}){const e=await Hs(await this.filehandle.readFile(t)),r=new DataView(e.buffer);let i;if(r.getUint32(0,!0)===FP)i=1;else if(r.getUint32(0,!0)===MP)i=2;else throw new Error("Not a CSI file");this.minShift=r.getInt32(4,!0),this.depth=r.getInt32(8,!0),this.maxBinNumber=((1<<(this.depth+1)*3)-1)/7;const s=2**(this.minShift+this.depth*3),o=r.getInt32(12,!0),a=o&&o>=30?this.parseAuxData(e,16):{refIdToName:[],refNameToId:{},metaChar:void 0,columnNumbers:{ref:0,start:1,end:2},coordinateType:"zero-based-half-open",format:"generic"},l=r.getInt32(16+o,!0);let c,u=16+o+4;const f=new Array(l).fill(0).map(()=>{const h=r.getInt32(u,!0);u+=4;const A={};let d;for(let g=0;g<h;g+=1){const m=r.getUint32(u,!0);if(m>this.maxBinNumber)d=this.parsePseudoBin(e,u+4),u+=48;else{const p=_s(e,u+4);c=this._findFirstData(c,p);const w=r.getInt32(u+12,!0);u+=16;const I=new Array(w);for(let y=0;y<w;y+=1){const b=_s(e,u),B=_s(e,u+8);u+=16,I[y]=new vf(b,B,m)}A[m]=I}}return{binIndex:A,stats:d}});return{...a,csi:!0,refCount:l,maxBlockSize:65536,firstDataLine:c,csiVersion:i,indices:f,depth:this.depth,maxBinNumber:this.maxBinNumber,maxRefLength:s}}parsePseudoBin(t,e){return{lineCount:FE(t,e+28)}}async blocksForRange(t,e,r,i={}){e<0&&(e=0);const s=await this.parse(i),o=s.refNameToId[t];if(o===void 0)return[];const a=s.indices[o];if(!a)return[];const l=this.reg2bins(e,r),c=[];for(const[u,f]of l)for(let h=u;h<=f;h++)if(a.binIndex[h])for(const A of a.binIndex[h])c.push(new vf(A.minv,A.maxv,h));return ME(c,new P0(0,0))}reg2bins(t,e){t-=1,t<1&&(t=1),e>2**50&&(e=2**34),e-=1;let r=0,i=0,s=this.minShift+this.depth*3;const o=[];for(;r<=this.depth;s-=3,i+=NP(1,r*3),r+=1){const a=i+RE(t,s),l=i+RE(e,s);if(l-a+o.length>this.maxBinNumber)throw new Error(`query ${t}-${e} is too large for current binning scheme (shift ${this.minShift}, depth ${this.depth}), try a smaller query or a coarser index binning scheme`);o.push([a,l])}return o}}const TP=21578324,NE=14;function PP(n,t){return n+=1,t-=1,[[0,0],[1+(n>>26),1+(t>>26)],[9+(n>>23),9+(t>>23)],[73+(n>>20),73+(t>>20)],[585+(n>>17),585+(t>>17)],[4681+(n>>14),4681+(t>>14)]]}class Vs extends DE{async lineCount(t,e={}){var o;const r=await this.parse(e),i=r.refNameToId[t];return i===void 0||!r.indices[i]?-1:((o=r.indices[i].stats)==null?void 0:o.lineCount)??-1}async _parse(t={}){const e=await this.filehandle.readFile(t),r=await Hs(e),i=new DataView(r.buffer);if(i.getUint32(0,!0)!==TP)throw new Error("Not a TBI file");const o=i.getUint32(4,!0),a=i.getUint32(8,!0),l=a&65536?"zero-based-half-open":"1-based-closed",u={0:"generic",1:"SAM",2:"VCF"}[a&15];if(!u)throw new Error(`invalid Tabix preset format flags ${a}`);const f={ref:i.getInt32(12,!0),start:i.getInt32(16,!0),end:i.getInt32(20,!0)},h=i.getInt32(24,!0),A=5,d=((1<<(A+1)*3)-1)/7,g=2**(14+A*3),m=h?String.fromCharCode(h):void 0,p=i.getInt32(28,!0),w=i.getInt32(32,!0),{refNameToId:I,refIdToName:y}=this._parseNameBytes(r.slice(36,36+w));let b=36+w,B;return{indices:new Array(o).fill(0).map(()=>{const Q=i.getInt32(b,!0);b+=4;const k={};let S;for(let U=0;U<Q;U+=1){const H=i.getUint32(b,!0);if(b+=4,H>d+1)throw new Error("tabix index contains too many bins, please use a CSI index");if(H===d+1){const J=i.getInt32(b,!0);b+=4,J===2&&(S=this.parsePseudoBin(r,b)),b+=16*J}else{const J=i.getInt32(b,!0);b+=4;const V=new Array(J);for(let $=0;$<J;$+=1){const le=_s(r,b),de=_s(r,b+8);b+=16,B=this._findFirstData(B,le),V[$]=new vf(le,de,H)}k[H]=V}}const P=i.getInt32(b,!0);b+=4;const N=new Array(P);for(let U=0;U<P;U+=1)N[U]=_s(r,b),b+=8,B=this._findFirstData(B,N[U]);return{binIndex:k,linearIndex:N,stats:S}}),metaChar:m,maxBinNumber:d,maxRefLength:g,skipLines:p,firstDataLine:B,columnNumbers:f,coordinateType:l,format:u,refIdToName:y,refNameToId:I,maxBlockSize:65536}}parsePseudoBin(t,e){return{lineCount:FE(t,e+16)}}async blocksForRange(t,e,r,i={}){e<0&&(e=0);const s=await this.parse(i),o=s.refNameToId[t];if(o===void 0)return[];const a=s.indices[o];if(!a)return[];(a.linearIndex.length>0?a.linearIndex[e>>NE>=a.linearIndex.length?a.linearIndex.length-1:e>>NE]:new P0(0,0))||console.warn("querying outside of possible tabix range");const c=PP(e,r),u=[];for(const[g,m]of c)for(let p=g;p<=m;p++)if(a.binIndex[p])for(const w of a.binIndex[p])u.push(new vf(w.minv,w.maxv,p));const f=a.linearIndex.length;let h;const A=Math.min(e>>14,f-1),d=Math.min(r>>14,f-1);for(let g=A;g<=d;++g){const m=a.linearIndex[g];m&&(!h||m.compareTo(h)<0)&&(h=m)}return ME(u,h)}}class LP{constructor({path:t,filehandle:e,url:r,tbiPath:i,tbiUrl:s,tbiFilehandle:o,csiPath:a,csiUrl:l,csiFilehandle:c,renameRefSeqs:u,chunkCacheSize:f=5*2**20}){this.cache=new dc({maxSize:1e3});const h=u??(A=>A);if(e)this.filehandle=e;else if(t)this.filehandle=new at(t);else if(r)this.filehandle=new pn(r);else throw new TypeError("must provide either filehandle or path");if(o)this.index=new Vs({filehandle:o,renameRefSeqs:h});else if(c)this.index=new Qf({filehandle:c,renameRefSeqs:h});else if(i)this.index=new Vs({filehandle:new at(i),renameRefSeqs:h});else if(a)this.index=new Qf({filehandle:new at(a),renameRefSeqs:h});else if(t)this.index=new Vs({filehandle:new at(`${t}.tbi`),renameRefSeqs:h});else if(l)this.index=new Qf({filehandle:new pn(l)});else if(s)this.index=new Vs({filehandle:new pn(s)});else if(r)this.index=new Vs({filehandle:new pn(`${r}.tbi`)});else throw new TypeError("must provide one of tbiFilehandle, tbiPath, csiFilehandle, csiPath, tbiUrl, csiUrl");this.renameRefSeq=h,this.hasCustomRenameRefSeq=u!==void 0,this.chunkCache=new Ds({cache:new dc({maxSize:Math.floor(f/65536)}),fill:(A,d)=>this.readChunk(A,{signal:d})})}calculateFileOffset(t,e,r,i,s){return t[r]*256+(i-e[r])+s+1}async getLines(t,e,r,i){var I;let s,o={},a;typeof i=="function"?a=i:(o=i,a=i.lineCallback,s=i.signal);const l=await this.index.getMetadata(o),c=e??0,u=r??l.maxRefLength;if(!(c<=u))throw new TypeError("invalid start and end coordinates. start must be less than or equal to end");if(c===u)return;const f=await this.index.blocksForRange(t,c,u,o),h=new TextDecoder("utf8"),A=l.format==="VCF",d={ref:l.columnNumbers.ref||0,start:l.columnNumbers.start||0,end:A?8:l.columnNumbers.end||0},g=Math.max(d.ref,d.start,d.end),m=(I=l.metaChar)==null?void 0:I.charCodeAt(0),p=l.coordinateType==="1-based-closed"?-1:0,w=!this.hasCustomRenameRefSeq;for(const y of f){const{buffer:b,cpositions:B,dpositions:E}=await this.chunkCache.get(y.toString(),y,s);let Q=0,k=0;const S=h.decode(b);if(b.length==S.length)for(;Q<S.length;){const N=S.indexOf(`
`,Q);if(N===-1)break;const U=S.slice(Q,N);if(E){const J=Q+y.minv.dataPosition;for(;k<E.length&&J>=E[k];)k++}const H=this.checkLine(t,c,u,U,d.ref,d.start,d.end,g,m,p,A,w);if(H===null)return;H!==void 0&&a(U,this.calculateFileOffset(B,E,k,Q,y.minv.dataPosition),H.start,H.end),Q=N+1}else for(;Q<b.length;){const N=b.indexOf(10,Q);if(N===-1)break;const U=b.slice(Q,N),H=h.decode(U);if(E){const V=Q+y.minv.dataPosition;for(;k<E.length&&V>=E[k];)k++}const J=this.checkLine(t,c,u,H,d.ref,d.start,d.end,g,m,p,A,w);if(J===null)return;J!==void 0&&a(H,this.calculateFileOffset(B,E,k,Q,y.minv.dataPosition),J.start,J.end),Q=N+1}}}async getMetadata(t={}){return this.index.getMetadata(t)}async getHeaderBuffer(t={}){const{firstDataLine:e,metaChar:r,maxBlockSize:i}=await this.getMetadata(t),s=((e==null?void 0:e.blockPosition)||0)+i,o=await this.filehandle.read(s,0,t),a=await Hs(o);if(r){let l=-1;const c=10,u=r.charCodeAt(0);for(let f=0,h=a.length;f<h;f++){const A=a[f];if(f===l+1&&A!==u)break;A===c&&(l=f)}return a.subarray(0,l+1)}return a}async getHeader(t={}){const e=new TextDecoder("utf8"),r=await this.getHeaderBuffer(t);return e.decode(r)}async getReferenceSequenceNames(t={}){return(await this.getMetadata(t)).refIdToName}checkLine(t,e,r,i,s,o,a,l,c,u,f,h){if(c!==void 0&&i.charCodeAt(0)===c)return;if(i.length<500){const I=i.split("	"),y=I[s-1];if(!(h?y===t:this.renameRefSeq(y)===t))return;const B=+I[o-1]+u;if(B>=r)return null;let E;return a===0||a===o?E=B+1:f?E=this._getVcfEnd(B,I[3],I[a-1]):E=+I[a-1],E<=e?void 0:{start:B,end:E}}let A=-1;const d=[-1];for(let I=0;I<l;I++){const y=i.indexOf("	",A+1);if(y===-1){d.push(i.length);break}d.push(y),A=y}const g=i.slice(d[s-1]+1,d[s]);if(!(h?g===t:this.renameRefSeq(g)===t))return;const p=+i.slice(d[o-1]+1,d[o])+u;if(p>=r)return null;let w;if(a===0||a===o?w=p+1:f?w=this._getVcfEnd(p,i.slice(d[3]+1,d[4]),i.slice(d[a-1]+1,d[a])):w=+i.slice(d[a-1]+1,d[a]),!(w<=e))return{start:p,end:w}}_getVcfEnd(t,e,r){let i=t+e.length;if(r.includes("SVTYPE=TRA"))return t+1;if(r[0]!=="."){const o=r.indexOf("END=");if(o!==-1&&(o===0||r[o-1]===";")){const a=o+4;let l=r.indexOf(";",a);l===-1&&(l=r.length),i=Number.parseInt(r.slice(a,l),10)}}return i}async lineCount(t,e={}){return this.index.lineCount(t,e)}async readChunk(t,e={}){const r=await this.filehandle.read(t.fetchedSize(),t.minv.blockPosition,e);return xE(r,t,this.cache)}}const OP=Object.freeze(Object.defineProperty({__proto__:null,CSI:Qf,TBI:Vs,TabixIndexedFile:LP},Symbol.toStringTag,{value:"Module"})),UP=/%([0-9A-Fa-f]{2})/g,GP=/^\s*##\s*(\S+)\s*(.*)/,zP=/\r?\n$/,TE=/\s+/,PE=/\D/g;function Sf(n){return n.includes("%")?n.replaceAll(UP,(t,e)=>String.fromCharCode(parseInt(e,16))):n}function HP(n){if(!n.length||n===".")return{};const t={};let e=n;e.endsWith(`
`)&&(e=e.slice(0,e.endsWith(`\r
`)?-2:-1));for(const r of e.split(";")){const i=r.indexOf("=");if(i===-1)continue;const s=r.slice(i+1);if(!s.length)continue;const o=r.slice(0,i).trim();let a=t[o];a||(a=[],t[o]=a);for(const l of s.split(","))a.push(Sf(l.trim()))}return t}function _P(n){if(!n.length||n===".")return{};const t={};let e=n;e.endsWith(`
`)&&(e=e.slice(0,e.endsWith(`\r
`)?-2:-1));for(const r of e.split(";")){const i=r.indexOf("=");if(i===-1)continue;const s=r.slice(i+1);if(!s.length)continue;const o=r.slice(0,i).trim();let a=t[o];a||(a=[],t[o]=a);for(const l of s.split(","))a.push(l.trim())}return t}function VP(n){return L0(n.split("	"))}function We(n){return n==="."||n===""||n===void 0?null:n}function L0(n){const t=We(n[0]),e=We(n[1]),r=We(n[2]),i=We(n[3]),s=We(n[4]),o=We(n[5]),a=We(n[6]),l=We(n[7]),c=We(n[8]);return{seq_id:t?Sf(t):null,source:e?Sf(e):null,type:r?Sf(r):null,start:i===null?null:parseInt(i,10),end:s===null?null:parseInt(s,10),score:o===null?null:parseFloat(o),strand:a,phase:l,attributes:c===null?null:HP(c)}}function YP(n){const t=We(n[0]),e=We(n[1]),r=We(n[2]),i=We(n[3]),s=We(n[4]),o=We(n[5]),a=We(n[6]),l=We(n[7]),c=We(n[8]);return{seq_id:t,source:e,type:r,start:i===null?null:parseInt(i,10),end:s===null?null:parseInt(s,10),score:o===null?null:parseFloat(o),strand:a,phase:l,attributes:c===null?null:_P(c)}}function JP(n){var s,o;const t=GP.exec(n);if(!t)return null;const[,e]=t;let[,,r]=t;const i={directive:e};if(r.length&&(r=r.replace(zP,""),i.value=r),e==="sequence-region"){const a=r.split(TE,3);return{...i,seq_id:a[0],start:(s=a[1])==null?void 0:s.replaceAll(PE,""),end:(o=a[2])==null?void 0:o.replaceAll(PE,"")}}else if(e==="genome-build"){const[a,l]=r.split(TE,2);return{...i,source:a,buildName:l}}return i}const qP=/^\s*[^#\s>]/,KP=/^\s*(#+)(.*)/,jP=/^\s*$/,WP=/^\s*>/,XP=/\r?\n?$/g;class Df{constructor(t){j(this,"featureCallback");j(this,"endCallback");j(this,"commentCallback");j(this,"errorCallback");j(this,"disableDerivesFromReferences");j(this,"directiveCallback");j(this,"bufferSize");j(this,"eof",!1);j(this,"lineNumber",0);j(this,"_underConstructionTopLevel",[]);j(this,"_underConstructionById",{});j(this,"_completedReferences",{});j(this,"_underConstructionOrphans",{});const e=()=>{};this.featureCallback=t.featureCallback||e,this.endCallback=t.endCallback||e,this.commentCallback=t.commentCallback||e,this.errorCallback=t.errorCallback||e,this.directiveCallback=t.directiveCallback||e,this.disableDerivesFromReferences=t.disableDerivesFromReferences||!1,this.bufferSize=t.bufferSize===void 0?1/0:t.bufferSize}addLine(t){if(this.eof)return;if(this.lineNumber+=1,qP.test(t)){this._bufferLine(t);return}const e=KP.exec(t);if(e){const[,r]=e;let[,,i]=e;if(r.length===3)this._emitAllUnderConstructionFeatures();else if(r.length===2){const s=JP(t);s&&(s.directive==="FASTA"?(this._emitAllUnderConstructionFeatures(),this.eof=!0):this._emitItem(s))}else this._emitItem({comment:i.trimStart()})}else if(!jP.test(t))if(WP.test(t))this._emitAllUnderConstructionFeatures(),this.eof=!0;else{const r=t.replaceAll(XP,"");throw new Error(`GFF3 parse error.  Cannot parse '${r}'.`)}}addParsedFeatureLine(t){this.eof||(this.lineNumber+=1,this._bufferParsedLine(t))}finish(){this._emitAllUnderConstructionFeatures(),this.endCallback()}_emitItem(t){Array.isArray(t)?this.featureCallback(t):"directive"in t?this.directiveCallback(t):"comment"in t&&this.commentCallback(t)}_enforceBufferSizeLimit(t=0){const e=r=>{var i,s;r&&Array.isArray(r)&&((s=(i=r[0].attributes)==null?void 0:i.ID)!=null&&s[0])&&(r[0].attributes.ID.forEach(a=>{delete this._underConstructionById[a],delete this._completedReferences[a]}),r.forEach(a=>{a.child_features&&a.child_features.forEach(l=>{e(l)}),a.derived_features&&a.derived_features.forEach(l=>{e(l)})}))};for(;this._underConstructionTopLevel.length+t>this.bufferSize;){const r=this._underConstructionTopLevel.shift();r&&(this._emitItem(r),e(r))}}_emitAllUnderConstructionFeatures(){this._underConstructionTopLevel.forEach(this._emitItem.bind(this)),this._underConstructionTopLevel=[],this._underConstructionById={},this._completedReferences={};const t=Object.keys(this._underConstructionOrphans);if(t.length)throw new Error(`some features reference other features that do not exist in the file (or in the same '###' scope). ${t.join(",")}`)}_bufferLine(t){this._bufferParsedLine(VP(t))}_bufferParsedLine(t){var a,l,c;const e=t;e.child_features=[],e.derived_features=[];const r=((a=e.attributes)==null?void 0:a.ID)||[],i=((l=e.attributes)==null?void 0:l.Parent)||[],s=this.disableDerivesFromReferences?[]:((c=e.attributes)==null?void 0:c.Derives_from)||[];if(!r.length&&!i.length&&!s.length){this._emitItem([e]);return}let o;r.forEach(u=>{const f=this._underConstructionById[u];f?(f[f.length-1].type!==e.type&&this._parseError(`multi-line feature "${u}" has inconsistent types: "${e.type}", "${f[f.length-1].type}"`),f.push(e),o=f):(o=[e],this._enforceBufferSizeLimit(1),!i.length&&!s.length&&this._underConstructionTopLevel.push(o),this._underConstructionById[u]=o,this._resolveReferencesTo(o,u))}),this._resolveReferencesFrom(o||[e],{Parent:i,Derives_from:s},r)}_resolveReferencesTo(t,e){const r=this._underConstructionOrphans[e];if(r){for(const i of t)i.child_features.push(...r.Parent),i.derived_features.push(...r.Derives_from);delete this._underConstructionOrphans[e]}}_parseError(t){this.eof=!0,this.errorCallback(`${this.lineNumber}: ${t}`)}_resolveReferencesFrom(t,e,r){for(const i of e.Parent){const s=this._underConstructionById[i];if(s){let o=!1;for(const a of r){const l=`Parent,${i}`,c=this._completedReferences[a]||(this._completedReferences[a]={});c[l]&&(o=!0),c[l]=!0}if(!o)for(const a of s)a.child_features.push(t)}else{let o=this._underConstructionOrphans[i];o||(o={Parent:[],Derives_from:[]},this._underConstructionOrphans[i]=o),o.Parent.push(t)}}for(const i of e.Derives_from){const s=this._underConstructionById[i];if(s){let o=!1;for(const a of r){const l=`Derives_from,${i}`,c=this._completedReferences[a]||(this._completedReferences[a]={});c[l]&&(o=!0),c[l]=!0}if(!o)for(const a of s)a.derived_features.push(t)}else{let o=this._underConstructionOrphans[i];o||(o={Parent:[],Derives_from:[]},this._underConstructionOrphans[i]=o),o.Derives_from.push(t)}}}}function ZP(n){const t=[],e=new Df({featureCallback:r=>t.push(r),disableDerivesFromReferences:!0,errorCallback:r=>{throw new Error(r)}});for(const r of n.split(/\r?\n/))e.addLine(r);return e.finish(),t}function $P(n){const t=[],e=new Df({featureCallback:r=>t.push(r),disableDerivesFromReferences:!0,errorCallback:r=>{throw new Error(r)}});for(const r of n)e.addLine(r);return e.finish(),t}function eL(n){const t=[],e=new Df({featureCallback:r=>t.push(r),disableDerivesFromReferences:!0,errorCallback:r=>{throw new Error(r)}});for(const r of n){const i=L0(r.fields);r.lineHash!==void 0&&(i.attributes||(i.attributes={}),i.attributes._lineHash=[String(r.lineHash)]),e.addParsedFeatureLine(i)}return e.finish(),t}function tL(n,t){const e=[],r=new Df({featureCallback:s=>e.push(s),disableDerivesFromReferences:!0,errorCallback:s=>{throw new Error(s)}}),i=t?L0:YP;for(const s of n){const o=i(s.fields);s.lineHash!==void 0&&(o.attributes||(o.attributes={}),o.attributes._lineHash=[String(s.lineHash)]),r.addParsedFeatureLine(o)}return r.finish(),e}const nL=Object.freeze(Object.defineProperty({__proto__:null,parseArraySync:$P,parseRecordsSync:eL,parseRecordsSyncFast:tL,parseStringSync:ZP},Symbol.toStringTag,{value:"Module"}));function rL(n,t,e){const r=Object.create(null),i=e.length,s=t.length,o=9,a=58;let l=0;if(n==="GT"){for(let f=0;f<i;f++){const h=l;for(;l<s&&t.charCodeAt(l)!==o;)l++;r[e[f]]=t.slice(h,l),l++}return r}const c=n.indexOf("GT");if(c===-1)return r;if(c===0){for(let f=0;f<i;f++){const h=l;for(;l<s&&t.charCodeAt(l)!==a&&t.charCodeAt(l)!==o;)l++;for(r[e[f]]=t.slice(h,l);l<s&&t.charCodeAt(l)!==o;)l++;l++}return r}let u=0;for(let f=0;f<c;f++)n.charCodeAt(f)===a&&u++;for(let f=0;f<i;f++){const h=l;let A=l;for(;A<s&&t.charCodeAt(A)!==o;)A++;let d=0,g=h;for(let m=h;m<=A;m++)if(m===A||t.charCodeAt(m)===a){if(d===u){r[e[f]]=t.slice(g,m);break}d++,g=m+1}l=A+1}return r}function iL(n){const t=[],e=[];let r=!1,i=!1;const s=n.length;for(let o=0;o<s;o++){const a=n[o];a==='"'?(r=!r,e.push(a)):a==="["?(i=!0,e.push(a)):a==="]"?(i=!1,e.push(a)):a===","&&!r&&!i?(t.push(e.join("").trim()),e.length=0):e.push(a)}return e.length>0&&t.push(e.join("").trim()),t}function sL(n,t){const e=n.indexOf(t);return[n.slice(0,e),n.slice(e+1)]}function oL(n){const t=n.slice(1,-1),e=iL(t),r=[];for(let i=0;i<e.length;i++){const s=e[i],[o,a]=sL(s,"=");if(a&&a.startsWith("[")&&a.endsWith("]")){const l=a.slice(1,-1).split(",");for(let c=0;c<l.length;c++)l[c]=l[c].trim();r.push([o,l])}else a&&a.startsWith('"')&&a.endsWith('"')?r.push([o,a.slice(1,-1)]):r.push([o,a])}return Object.fromEntries(r)}const kf={InfoFields:{AA:{Number:1,Type:"String",Description:"Ancestral allele"},AC:{Number:"A",Type:"Integer",Description:"Allele count in genotypes, for each ALT allele, in the same order as listed"},AD:{Number:"R",Type:"Integer",Description:"Total read depth for each allele"},ADF:{Number:"R",Type:"Integer",Description:"Read depth for each allele on the forward strand"},ADR:{Number:"R",Type:"Integer",Description:"Read depth for each allele on the reverse strand"},AF:{Number:"A",Type:"Float",Description:"Allele frequency for each ALT allele in the same order as listed (estimated from primary data, not called genotypes)"},AN:{Number:1,Type:"Integer",Description:"Total number of alleles in called genotypes"},BQ:{Number:1,Type:"Float",Description:"RMS base quality"},CIGAR:{Number:1,Type:"Float",Description:"Cigar string describing how to align an alternate allele to the reference allele"},DB:{Number:0,Type:"Flag",Description:"dbSNP membership"},DP:{Number:1,Type:"Integer",Description:"combined depth across samples"},END:{Number:1,Type:"Integer",Description:"End position (for use with symbolic alleles)"},H2:{Number:0,Type:"Flag",Description:"HapMap2 membership"},H3:{Number:0,Type:"Flag",Description:"HapMap3 membership"},MQ:{Number:1,Type:null,Description:"RMS mapping quality"},MQ0:{Number:1,Type:"Integer",Description:"Number of MAPQ == 0 reads"},NS:{Number:1,Type:"Integer",Description:"Number of samples with data"},SB:{Number:4,Type:"Integer",Description:"Strand bias"},SOMATIC:{Number:0,Type:"Flag",Description:"Somatic mutation (for cancer genomics)"},VALIDATED:{Number:0,Type:"Flag",Description:"Validated by follow-up experiment"},"1000G":{Number:0,Type:"Flag",Description:"1000 Genomes membership"},IMPRECISE:{Number:0,Type:"Flag",Description:"Imprecise structural variation"},NOVEL:{Number:0,Type:"Flag",Description:"Indicates a novel structural variation"},SVTYPE:{Number:1,Type:"String",Description:"Type of structural variant"},SVLEN:{Number:null,Type:"Integer",Description:"Difference in length between REF and ALT alleles"},CIPOS:{Number:2,Type:"Integer",Description:"Confidence interval around POS for imprecise variants"},CIEND:{Number:2,Type:"Integer",Description:"Confidence interval around END for imprecise variants"},HOMLEN:{Type:"Integer",Description:"Length of base pair identical micro-homology at event breakpoints"},HOMSEQ:{Type:"String",Description:"Sequence of base pair identical micro-homology at event breakpoints"},BKPTID:{Type:"String",Description:"ID of the assembled alternate allele in the assembly file"},MEINFO:{Number:4,Type:"String",Description:"Mobile element info of the form NAME,START,END,POLARITY"},METRANS:{Number:4,Type:"String",Description:"Mobile element transduction info of the form CHR,START,END,POLARITY"},DGVID:{Number:1,Type:"String",Description:"ID of this element in Database of Genomic Variation"},DBVARID:{Number:1,Type:"String",Description:"ID of this element in DBVAR"},DBRIPID:{Number:1,Type:"String",Description:"ID of this element in DBRIP"},MATEID:{Number:null,Type:"String",Description:"ID of mate breakends"},PARID:{Number:1,Type:"String",Description:"ID of partner breakend"},EVENT:{Number:1,Type:"String",Description:"ID of event associated to breakend"},CILEN:{Number:2,Type:"Integer",Description:"Confidence interval around the inserted material between breakend"},DPADJ:{Type:"Integer",Description:"Read Depth of adjacency"},CN:{Number:1,Type:"Integer",Description:"Copy number of segment containing breakend"},CNADJ:{Number:null,Type:"Integer",Description:"Copy number of adjacency"},CICN:{Number:2,Type:"Integer",Description:"Confidence interval around copy number for the segment"},CICNADJ:{Number:null,Type:"Integer",Description:"Confidence interval around copy number for the adjacency"}},GenotypeFields:{AD:{Number:"R",Type:"Integer",Description:"Read depth for each allele"},ADF:{Number:"R",Type:"Integer",Description:"Read depth for each allele on the forward strand"},ADR:{Number:"R",Type:"Integer",Description:"Read depth for each allele on the reverse strand"},DP:{Number:1,Type:"Integer",Description:"Read depth"},EC:{Number:"A",Type:"Integer",Description:"Expected alternate allele counts"},FT:{Number:1,Type:"String",Description:'Filter indicating if this genotype was "called"'},GL:{Number:"G",Type:"Float",Description:"Genotype likelihoods"},GP:{Number:"G",Type:"Float",Description:"Genotype posterior probabilities"},GQ:{Number:1,Type:"Integer",Description:"Conditional genotype quality"},GT:{Number:1,Type:"String",Description:"Genotype"},HQ:{Number:2,Type:"Integer",Description:"Haplotype quality"},MQ:{Number:1,Type:"Integer",Description:"RMS mapping quality"},PL:{Number:"G",Type:"Integer",Description:"Phred-scaled genotype likelihoods rounded to the closest integer"},PQ:{Number:1,Type:"Integer",Description:"Phasing quality"},PS:{Number:1,Type:"Integer",Description:"Phase set"}},AltTypes:{DEL:{Description:"Deletion relative to the reference"},INS:{Description:"Insertion of novel sequence relative to the reference"},DUP:{Description:"Region of elevated copy number relative to the reference"},INV:{Description:"Inversion of reference sequence"},CNV:{Description:"Copy number variable region (may be both deletion and duplication)"},"DUP:TANDEM":{Description:"Tandem duplication"},"DEL:ME":{Description:"Deletion of mobile element relative to the reference"},"INS:ME":{Description:"Insertion of a mobile element relative to the reference"},NON_REF:{Description:"Represents any possible alternative allele at this location"},"*":{Description:"Represents any possible alternative allele at this location"}},FilterTypes:{PASS:{Description:"Passed all filters"}}};function aL(n){try{return decodeURIComponent(n)}catch{return n}}class cL{constructor({header:t="",strict:e=!0}){if(!t.length)throw new Error("empty header received");const r=t.split(/[\r\n]+/).filter(Boolean);if(!r.length)throw new Error("no non-empty header lines specified");this.strict=e,this.metadata={INFO:{...kf.InfoFields},FORMAT:{...kf.GenotypeFields},ALT:{...kf.AltTypes},FILTER:{...kf.FilterTypes}};let i;for(let l=0;l<r.length;l++){const c=r[l];if(c.startsWith("#"))c.startsWith("##")?this.parseMetadata(c):i=c;else throw new Error(`Bad line in header:
${c}`)}if(!i)throw new Error("No format line found in header");const s=i.trim().split("	"),o=s.slice(0,8),a=["#CHROM","POS","ID","REF","ALT","QUAL","FILTER","INFO"];if(s.length<8)throw new Error(`VCF header missing columns:
${i}`);if(o.length!==a.length||!o.every((l,c)=>l===a[c]))throw new Error(`VCF column headers not correct:
${i}`);this.samples=s.slice(9)}parseInfo(t){var a;const e={},r=t.includes("%"),i=t.split(";"),s=this.metadata.INFO,o=i.length;for(let l=0;l<o;l++){const c=i[l],u=c.indexOf("="),f=u===-1?c:c.slice(0,u),h=u===-1?void 0:c.slice(u+1),A=(a=s[f])==null?void 0:a.Type;if(A==="Flag")e[f]=!0;else if(!h)e[f]=!0;else{const d=A==="Integer"||A==="Float",g=h.split(","),m=g.length;if(r){const p=[];for(let w=0;w<m;w++){const I=g[w];if(I===".")p.push(void 0);else{const y=aL(I);p.push(d?Number(y):y)}}e[f]=p}else{const p=[];for(let w=0;w<m;w++){const I=g[w];I==="."?p.push(void 0):p.push(d?Number(I):I)}e[f]=p}}}return e}parseSamples(t,e){var i;const r={};if(t){const s=e.split("	"),o=t.split(":"),a=this.metadata.FORMAT,l=[];for(let f=0;f<o.length;f++){const h=(i=a[o[f]])==null?void 0:i.Type;l.push(h==="Integer"||h==="Float")}const c=o.length,u=this.samples.length;for(let f=0;f<u;f++){const h=this.samples[f],A={},d=s[f],g=d.length;let m=0,p=0;for(let w=0;w<=g;w++)if(w===g||d[w]===":"){const I=d.slice(m,w);if(I===""||I===".")A[o[p]]=void 0;else{const y=I.split(","),b=[];if(l[p])for(let B=0;B<y.length;B++){const E=y[B];b.push(E==="."?void 0:+E)}else for(let B=0;B<y.length;B++){const E=y[B];b.push(E==="."?void 0:E)}A[o[p]]=b}if(m=w+1,p+=1,p>=c)break}r[h]=A}}return r}parseMetadata(t){const e=/^##(.+?)=(.*)/.exec(t.trim());if(!e)throw new Error(`Line is not a valid metadata line: ${t}`);const[r,i]=e.slice(1,3),s=r;if(i!=null&&i.startsWith("<")){s in this.metadata||(this.metadata[s]={});const[o,a]=this.parseStructuredMetaVal(i);o?this.metadata[s][o]=a:this.metadata[s]=a}else this.metadata[s]=i}parseStructuredMetaVal(t){const e=oL(t),r=e.ID;return delete e.ID,"Number"in e&&(Number.isNaN(Number(e.Number))||(e.Number=Number(e.Number))),[r,e]}getMetadata(...t){let e=this.metadata;const r=t.length;for(let i=0;i<r;i++)if(e=e[t[i]],!e)return e;return e}parseLine(t){let e=0,r=0;for(;e<t.length&&r<9;)t[e]==="	"&&(r+=1),e+=1;const i=r===9?e-1:e,s=t.slice(0,i).split("	"),o=t.slice(i+1),[a,l,c,u,f,h,A]=s,d=a,g=+l,m=c==="."?void 0:c.split(";"),p=u,w=f==="."?void 0:f.split(","),I=h==="."?void 0:+h,y=A==="."?void 0:A.split(";"),b=s[8];if(this.strict&&!s[7])throw new Error("no INFO field specified, must contain at least a '.' (turn off strict mode to allow)");const B=s[7]===void 0||s[7]==="."?{}:this.parseInfo(s[7]);return{CHROM:d,POS:g,ALT:w,INFO:B,REF:p,FILTER:(y==null?void 0:y.length)===1&&y[0]==="PASS"?"PASS":y,ID:m,QUAL:I,FORMAT:b,SAMPLES:()=>this.parseSamples(s[8]??"",o),GENOTYPES:()=>rL(s[8]??"",o,this.samples)}}}const lL=Object.freeze(Object.defineProperty({__proto__:null,default:cL},Symbol.toStringTag,{value:"Module"}));se.GenomeSpyDocEmbed=Lw,Object.defineProperty(se,Symbol.toStringTag,{value:"Module"})}));
