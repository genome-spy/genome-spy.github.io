(function(re,$){typeof exports=="object"&&typeof module<"u"?$(exports):typeof define=="function"&&define.amd?define(["exports"],$):(re=typeof globalThis<"u"?globalThis:re||self,$(re.genomeSpyDocEmbed={}))})(this,function(re){"use strict";var MP=Object.defineProperty;var Ew=re=>{throw TypeError(re)};var RP=(re,$,Ee)=>$ in re?MP(re,$,{enumerable:!0,configurable:!0,writable:!0,value:Ee}):re[$]=Ee;var Y=(re,$,Ee)=>RP(re,typeof $!="symbol"?$+"":$,Ee),fd=(re,$,Ee)=>$.has(re)||Ew("Cannot "+Ee);var E=(re,$,Ee)=>(fd(re,$,"read from private field"),Ee?Ee.call(re):$.get(re)),R=(re,$,Ee)=>$.has(re)?Ew("Cannot add the same private member more than once"):$ instanceof WeakSet?$.add(re):$.set(re,Ee),G=(re,$,Ee,ri)=>(fd(re,$,"write to private field"),ri?ri.call(re,Ee):$.set(re,Ee),Ee),O=(re,$,Ee)=>(fd(re,$,"access private method"),Ee);var Cw=(re,$,Ee,ri)=>({set _(Nu){G(re,$,Nu,Ee)},get _(){return E(re,$,ri)}});var ew,mn,Ki,jr,Wr,Zi,ta,$e,Kn,Ji,na,$i,Dw,Iw,Qr,Ta,ra,Zn,qr,es,ts,ia,Pt,ns,Jn,hd,dd,rs,Du,Tw,is,ct,Yr,sa,q,pd,md,Sn,gd,Bw,kw,xd,yd,Mu,bd,ti,Fw,Pw,oa,wd,ss,os,as,aa,ca,cs,Kt,Ba,Ad,ua,us,Mw,Rw,gn,la,$n,Xr,ls,ht,vd,Sd,Ed,Ow,fa,Cd,Iu,Nw,fs,hs,ds,ha,ps,ms,da,Dd,pa,Id,Kr,gs,ma,ga,xs,xa,ya,xn,Zr,ba,Rt,wa,ys,Aa,va,Sa,bs,Ea,Tu,Lw,ws,yn,Jr,er,tr,As,Ca,nr,$r,Bu,zw,vs,Ss,et,ei,Es,ne,ni,Uw,Td,ka,Bd,kd,Fd,Gw,Ru,Hw,Cs,vt,Ou,Vw,_w,jw;function $(n,e,t){return n.fields=e||[],n.fname=t,n}function Ee(n){return n==null?null:n.fname}function ri(n){return n==null?null:n.fields}function Nu(n){return n.length===1?Ww(n[0]):Qw(n)}const Ww=n=>function(e){return e[n]},Qw=n=>{const e=n.length;return function(t){for(let r=0;r<e;++r)t=t[n[r]];return t}};function Ct(n){throw Error(n)}function qw(n){const e=[],t=n.length;let r=null,i=0,s="",o,a,c;n=n+"";function u(){e.push(s+n.substring(o,a)),s="",o=a+1}for(o=a=0;a<t;++a)if(c=n[a],c==="\\")s+=n.substring(o,a++),o=a;else if(c===r)u(),r=null,i=-1;else{if(r)continue;o===i&&c==='"'||o===i&&c==="'"?(o=a+1,r=c):c==="."&&!i?a>o?u():o=a+1:c==="["?(a>o&&u(),i=o=a+1):c==="]"&&(i||Ct("Access path missing open bracket: "+n),i>0&&u(),i=0,o=a+1)}return i&&Ct("Access path missing closing bracket: "+n),r&&Ct("Access path missing closing quote: "+n),a>o&&(a++,u()),e}function Fa(n,e,t){const r=qw(n);return n=r.length===1?r[0]:n,$((t&&t.get||Nu)(r),[n],e||n)}Fa("id");const Pa=$(n=>n,[],"identity");$(()=>0,[],"zero"),$(()=>1,[],"one"),$(()=>!0,[],"true"),$(()=>!1,[],"false"),[...Object.getOwnPropertyNames(Object.prototype).filter(n=>typeof Object.prototype[n]=="function")];var Ue=Array.isArray;function Ge(n){return n===Object(n)}function en(n){return n[n.length-1]}function Ma(n){return n==null||n===""?null:+n}const Pd=n=>e=>n*Math.exp(e),Md=n=>e=>Math.log(n*e),Yw=n=>e=>Math.sign(e)*Math.log1p(Math.abs(e/n)),Xw=n=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*n,Ra=n=>e=>e<0?-Math.pow(-e,n):Math.pow(e,n);function Lu(n,e,t,r){const i=t(n[0]),s=t(en(n)),o=(s-i)*e;return[r(i-o),r(s-o)]}function Kw(n,e){return Lu(n,e,Ma,Pa)}function Zw(n,e){var t=Math.sign(n[0]);return Lu(n,e,Md(t),Pd(t))}function Jw(n,e,t){return Lu(n,e,Ra(t),Ra(1/t))}function Oa(n,e,t,r,i){const s=r(n[0]),o=r(en(n)),a=e!=null?r(e):(s+o)/2;return[i(a+(s-a)*t),i(a+(o-a)*t)]}function Rd(n,e,t){return Oa(n,e,t,Ma,Pa)}function Od(n,e,t){const r=Math.sign(n[0]);return Oa(n,e,t,Md(r),Pd(r))}function zu(n,e,t,r){return Oa(n,e,t,Ra(r),Ra(1/r))}function $w(n,e,t,r){return Oa(n,e,t,Yw(r),Xw(r))}function Nd(n){return n!=null?Ue(n)?n:[n]:[]}function eA(n,e,t){let r=n[0],i=n[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=t-e?[e,t]:[r=Math.min(Math.max(r,e),t-s),r+s]}function Nt(n){return typeof n=="function"}const tA="descending";function Ld(n,e,t){t=t||{},e=Nd(e)||[];const r=[],i=[],s={},o=t.comparator||nA;return Nd(n).forEach((a,c)=>{a!=null&&(r.push(e[c]===tA?-1:1),i.push(a=Nt(a)?a:Fa(a,null,t)),(ri(a)||[]).forEach(u=>s[u]=1))}),i.length===0?null:$(o(i,r),Object.keys(s))}const zd=(n,e)=>(n<e||n==null)&&e!=null?-1:(n>e||e==null)&&n!=null?1:(e=e instanceof Date?+e:e,(n=n instanceof Date?+n:n)!==n&&e===e?-1:e!==e&&n===n?1:0),nA=(n,e)=>n.length===1?rA(n[0],e[0]):iA(n,e,n.length),rA=(n,e)=>function(t,r){return zd(n(t),n(r))*e},iA=(n,e,t)=>(e.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<t;)s=n[a],o=zd(s(r),s(i));return o*e[a]});function sA(n){for(let e,t,r=1,i=arguments.length;r<i;++r){e=arguments[r];for(t in e)n[t]=e[t]}return n}function Ud(n,e){return Object.hasOwn(n,e)}function Is(n){return typeof n=="boolean"}function oA(n){return Object.prototype.toString.call(n)==="[object Date]"}function aA(n){return n&&Nt(n[Symbol.iterator])}function Ke(n){return typeof n=="number"}function cA(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function me(n){return typeof n=="string"}function Gd(n,e){const t=n[0],r=en(n),i=+e;return i?i===1?r:t+i*(r-t):t}function Ts(n){return n&&en(n)-n[0]||0}function Uu(n){return Ue(n)?`[${n.map(e=>e===null?"null":Uu(e))}]`:Ge(n)||me(n)?JSON.stringify(n).replaceAll("\u2028","\\u2028").replaceAll("\u2029","\\u2029"):n}function uA(n){return n==null||n===""?null:!n||n==="false"||n==="0"?!1:!!n}const lA=n=>Ke(n)||oA(n)?n:Date.parse(n);function fA(n,e){return e=e||lA,n==null||n===""?null:e(n)}function hA(n){return n==null||n===""?null:n+""}function dA(n){const e={},t=n.length;for(let r=0;r<t;++r)e[n[r]]=!0;return e}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Na=globalThis,Gu=Na.ShadowRoot&&(Na.ShadyCSS===void 0||Na.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Hu=Symbol(),Hd=new WeakMap;let Vd=class{constructor(e,t,r){if(this._$cssResult$=!0,r!==Hu)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(Gu&&e===void 0){const r=t!==void 0&&t.length===1;r&&(e=Hd.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&Hd.set(t,e))}return e}toString(){return this.cssText}};const pA=n=>new Vd(typeof n=="string"?n:n+"",void 0,Hu),mA=(n,...e)=>{const t=n.length===1?n[0]:e.reduce((r,i,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+n[s+1],n[0]);return new Vd(t,n,Hu)},gA=(n,e)=>{if(Gu)n.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const t of e){const r=document.createElement("style"),i=Na.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=t.cssText,n.appendChild(r)}},_d=Gu?n=>n:n=>n instanceof CSSStyleSheet?(e=>{let t="";for(const r of e.cssRules)t+=r.cssText;return pA(t)})(n):n;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:xA,defineProperty:yA,getOwnPropertyDescriptor:bA,getOwnPropertyNames:wA,getOwnPropertySymbols:AA,getPrototypeOf:vA}=Object,En=globalThis,jd=En.trustedTypes,SA=jd?jd.emptyScript:"",Vu=En.reactiveElementPolyfillSupport,Bs=(n,e)=>n,_u={toAttribute(n,e){switch(e){case Boolean:n=n?SA:null;break;case Object:case Array:n=n==null?n:JSON.stringify(n)}return n},fromAttribute(n,e){let t=n;switch(e){case Boolean:t=n!==null;break;case Number:t=n===null?null:Number(n);break;case Object:case Array:try{t=JSON.parse(n)}catch{t=null}}return t}},Wd=(n,e)=>!xA(n,e),Qd={attribute:!0,type:String,converter:_u,reflect:!1,useDefault:!1,hasChanged:Wd};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),En.litPropertyMetadata??(En.litPropertyMetadata=new WeakMap);let ii=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=Qd){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const r=Symbol(),i=this.getPropertyDescriptor(e,r,t);i!==void 0&&yA(this.prototype,e,i)}}static getPropertyDescriptor(e,t,r){const{get:i,set:s}=bA(this.prototype,e)??{get(){return this[t]},set(o){this[t]=o}};return{get:i,set(o){const a=i==null?void 0:i.call(this);s==null||s.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Qd}static _$Ei(){if(this.hasOwnProperty(Bs("elementProperties")))return;const e=vA(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Bs("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Bs("properties"))){const t=this.properties,r=[...wA(t),...AA(t)];for(const i of r)this.createProperty(i,t[i])}const e=this[Symbol.metadata];if(e!==null){const t=litPropertyMetadata.get(e);if(t!==void 0)for(const[r,i]of t)this.elementProperties.set(r,i)}this._$Eh=new Map;for(const[t,r]of this.elementProperties){const i=this._$Eu(t,r);i!==void 0&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const i of r)t.unshift(_d(i))}else e!==void 0&&t.push(_d(e));return t}static _$Eu(e,t){const r=t.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(t=>t(this))}addController(e){var t;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((t=e.hostConnected)==null||t.call(e))}removeController(e){var t;(t=this._$EO)==null||t.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const r of t.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return gA(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(t=>{var r;return(r=t.hostConnected)==null?void 0:r.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(t=>{var r;return(r=t.hostDisconnected)==null?void 0:r.call(t)})}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$ET(e,t){var s;const r=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,r);if(i!==void 0&&r.reflect===!0){const o=(((s=r.converter)==null?void 0:s.toAttribute)!==void 0?r.converter:_u).toAttribute(t,r.type);this._$Em=e,o==null?this.removeAttribute(i):this.setAttribute(i,o),this._$Em=null}}_$AK(e,t){var s,o;const r=this.constructor,i=r._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const a=r.getPropertyOptions(i),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((s=a.converter)==null?void 0:s.fromAttribute)!==void 0?a.converter:_u;this._$Em=i,this[i]=c.fromAttribute(t,a.type)??((o=this._$Ej)==null?void 0:o.get(i))??null,this._$Em=null}}requestUpdate(e,t,r){var i;if(e!==void 0){const s=this.constructor,o=this[e];if(r??(r=s.getPropertyOptions(e)),!((r.hasChanged??Wd)(o,t)||r.useDefault&&r.reflect&&o===((i=this._$Ej)==null?void 0:i.get(e))&&!this.hasAttribute(s._$Eu(e,r))))return;this.C(e,t,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,t,{useDefault:r,reflect:i,wrapped:s},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??t??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(t=void 0),this._$AL.set(e,t)),i===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const i=this.constructor.elementProperties;if(i.size>0)for(const[s,o]of i){const{wrapped:a}=o,c=this[s];a!==!0||this._$AL.has(s)||c===void 0||this.C(s,void 0,o,c)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),(r=this._$EO)==null||r.forEach(i=>{var s;return(s=i.hostUpdate)==null?void 0:s.call(i)}),this.update(t)):this._$EM()}catch(i){throw e=!1,this._$EM(),i}e&&this._$AE(t)}willUpdate(e){}_$AE(e){var t;(t=this._$EO)==null||t.forEach(r=>{var i;return(i=r.hostUpdated)==null?void 0:i.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(t=>this._$ET(t,this[t]))),this._$EM()}updated(e){}firstUpdated(e){}};ii.elementStyles=[],ii.shadowRootOptions={mode:"open"},ii[Bs("elementProperties")]=new Map,ii[Bs("finalized")]=new Map,Vu==null||Vu({ReactiveElement:ii}),(En.reactiveElementVersions??(En.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ks=globalThis,La=ks.trustedTypes,qd=La?La.createPolicy("lit-html",{createHTML:n=>n}):void 0,Yd="$lit$",Cn=`lit$${Math.random().toFixed(9).slice(2)}$`,Xd="?"+Cn,EA=`<${Xd}>`,ar=document,Fs=()=>ar.createComment(""),Ps=n=>n===null||typeof n!="object"&&typeof n!="function",ju=Array.isArray,CA=n=>ju(n)||typeof(n==null?void 0:n[Symbol.iterator])=="function",Wu=`[ 	
\f\r]`,Ms=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Kd=/-->/g,Zd=/>/g,cr=RegExp(`>|${Wu}(?:([^\\s"'>=/]+)(${Wu}*=${Wu}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Jd=/'/g,$d=/"/g,e0=/^(?:script|style|textarea|title)$/i,DA=n=>(e,...t)=>({_$litType$:n,strings:e,values:t}),ge=DA(1),ur=Symbol.for("lit-noChange"),ve=Symbol.for("lit-nothing"),t0=new WeakMap,lr=ar.createTreeWalker(ar,129);function n0(n,e){if(!ju(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return qd!==void 0?qd.createHTML(e):e}const IA=(n,e)=>{const t=n.length-1,r=[];let i,s=e===2?"<svg>":e===3?"<math>":"",o=Ms;for(let a=0;a<t;a++){const c=n[a];let u,l,f=-1,d=0;for(;d<c.length&&(o.lastIndex=d,l=o.exec(c),l!==null);)d=o.lastIndex,o===Ms?l[1]==="!--"?o=Kd:l[1]!==void 0?o=Zd:l[2]!==void 0?(e0.test(l[2])&&(i=RegExp("</"+l[2],"g")),o=cr):l[3]!==void 0&&(o=cr):o===cr?l[0]===">"?(o=i??Ms,f=-1):l[1]===void 0?f=-2:(f=o.lastIndex-l[2].length,u=l[1],o=l[3]===void 0?cr:l[3]==='"'?$d:Jd):o===$d||o===Jd?o=cr:o===Kd||o===Zd?o=Ms:(o=cr,i=void 0);const h=o===cr&&n[a+1].startsWith("/>")?" ":"";s+=o===Ms?c+EA:f>=0?(r.push(u),c.slice(0,f)+Yd+c.slice(f)+Cn+h):c+Cn+(f===-2?a:h)}return[n0(n,s+(n[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class Rs{constructor({strings:e,_$litType$:t},r){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[u,l]=IA(e,t);if(this.el=Rs.createElement(u,r),lr.currentNode=this.el.content,t===2||t===3){const f=this.el.content.firstChild;f.replaceWith(...f.childNodes)}for(;(i=lr.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes())for(const f of i.getAttributeNames())if(f.endsWith(Yd)){const d=l[o++],h=i.getAttribute(f).split(Cn),p=/([.?@])?(.*)/.exec(d);c.push({type:1,index:s,name:p[2],strings:h,ctor:p[1]==="."?BA:p[1]==="?"?kA:p[1]==="@"?FA:za}),i.removeAttribute(f)}else f.startsWith(Cn)&&(c.push({type:6,index:s}),i.removeAttribute(f));if(e0.test(i.tagName)){const f=i.textContent.split(Cn),d=f.length-1;if(d>0){i.textContent=La?La.emptyScript:"";for(let h=0;h<d;h++)i.append(f[h],Fs()),lr.nextNode(),c.push({type:2,index:++s});i.append(f[d],Fs())}}}else if(i.nodeType===8)if(i.data===Xd)c.push({type:2,index:s});else{let f=-1;for(;(f=i.data.indexOf(Cn,f+1))!==-1;)c.push({type:7,index:s}),f+=Cn.length-1}s++}}static createElement(e,t){const r=ar.createElement("template");return r.innerHTML=e,r}}function si(n,e,t=n,r){var o,a;if(e===ur)return e;let i=r!==void 0?(o=t._$Co)==null?void 0:o[r]:t._$Cl;const s=Ps(e)?void 0:e._$litDirective$;return(i==null?void 0:i.constructor)!==s&&((a=i==null?void 0:i._$AO)==null||a.call(i,!1),s===void 0?i=void 0:(i=new s(n),i._$AT(n,t,r)),r!==void 0?(t._$Co??(t._$Co=[]))[r]=i:t._$Cl=i),i!==void 0&&(e=si(n,i._$AS(n,e.values),i,r)),e}class TA{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:r}=this._$AD,i=((e==null?void 0:e.creationScope)??ar).importNode(t,!0);lr.currentNode=i;let s=lr.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let u;c.type===2?u=new Os(s,s.nextSibling,this,e):c.type===1?u=new c.ctor(s,c.name,c.strings,this,e):c.type===6&&(u=new PA(s,this,e)),this._$AV.push(u),c=r[++a]}o!==(c==null?void 0:c.index)&&(s=lr.nextNode(),o++)}return lr.currentNode=ar,i}p(e){let t=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}}class Os{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,t,r,i){this.type=2,this._$AH=ve,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=i,this._$Cv=(i==null?void 0:i.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=si(this,e,t),Ps(e)?e===ve||e==null||e===""?(this._$AH!==ve&&this._$AR(),this._$AH=ve):e!==this._$AH&&e!==ur&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):CA(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==ve&&Ps(this._$AH)?this._$AA.nextSibling.data=e:this.T(ar.createTextNode(e)),this._$AH=e}$(e){var s;const{values:t,_$litType$:r}=e,i=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=Rs.createElement(n0(r.h,r.h[0]),this.options)),r);if(((s=this._$AH)==null?void 0:s._$AD)===i)this._$AH.p(t);else{const o=new TA(i,this),a=o.u(this.options);o.p(t),this.T(a),this._$AH=o}}_$AC(e){let t=t0.get(e.strings);return t===void 0&&t0.set(e.strings,t=new Rs(e)),t}k(e){ju(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let r,i=0;for(const s of e)i===t.length?t.push(r=new Os(this.O(Fs()),this.O(Fs()),this,this.options)):r=t[i],r._$AI(s),i++;i<t.length&&(this._$AR(r&&r._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,t);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var t;this._$AM===void 0&&(this._$Cv=e,(t=this._$AP)==null||t.call(this,e))}}class za{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,r,i,s){this.type=1,this._$AH=ve,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=ve}_$AI(e,t=this,r,i){const s=this.strings;let o=!1;if(s===void 0)e=si(this,e,t,0),o=!Ps(e)||e!==this._$AH&&e!==ur,o&&(this._$AH=e);else{const a=e;let c,u;for(e=s[0],c=0;c<s.length-1;c++)u=si(this,a[r+c],t,c),u===ur&&(u=this._$AH[c]),o||(o=!Ps(u)||u!==this._$AH[c]),u===ve?e=ve:e!==ve&&(e+=(u??"")+s[c+1]),this._$AH[c]=u}o&&!i&&this.j(e)}j(e){e===ve?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class BA extends za{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ve?void 0:e}}class kA extends za{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==ve)}}class FA extends za{constructor(e,t,r,i,s){super(e,t,r,i,s),this.type=5}_$AI(e,t=this){if((e=si(this,e,t,0)??ve)===ur)return;const r=this._$AH,i=e===ve&&r!==ve||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==ve&&(r===ve||i);i&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t;typeof this._$AH=="function"?this._$AH.call(((t=this.options)==null?void 0:t.host)??this.element,e):this._$AH.handleEvent(e)}}let PA=class{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){si(this,e)}};const Qu=ks.litHtmlPolyfillSupport;Qu==null||Qu(Rs,Os),(ks.litHtmlVersions??(ks.litHtmlVersions=[])).push("3.3.0");const Ns=(n,e,t)=>{const r=(t==null?void 0:t.renderBefore)??e;let i=r._$litPart$;if(i===void 0){const s=(t==null?void 0:t.renderBefore)??null;r._$litPart$=i=new Os(e.insertBefore(Fs(),s),s,void 0,t??{})}return i._$AI(n),i};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fr=globalThis;let Ls=class extends ii{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t;const e=super.createRenderRoot();return(t=this.renderOptions).renderBefore??(t.renderBefore=e.firstChild),e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Ns(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return ur}};Ls._$litElement$=!0,Ls.finalized=!0,(ew=fr.litElementHydrateSupport)==null||ew.call(fr,{LitElement:Ls});const qu=fr.litElementPolyfillSupport;qu==null||qu({LitElement:Ls}),(fr.litElementVersions??(fr.litElementVersions=[])).push("4.2.0");var r0={},Yu={},Xu=34,zs=10,Ku=13;function i0(n){return new Function("d","return {"+n.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function MA(n,e){var t=i0(n);return function(r,i){return e(t(r),i,n)}}function s0(n){var e=Object.create(null),t=[];return n.forEach(function(r){for(var i in r)i in e||t.push(e[i]=i)}),t}function rt(n,e){var t=n+"",r=t.length;return r<e?new Array(e-r+1).join(0)+t:t}function RA(n){return n<0?"-"+rt(-n,6):n>9999?"+"+rt(n,6):rt(n,4)}function OA(n){var e=n.getUTCHours(),t=n.getUTCMinutes(),r=n.getUTCSeconds(),i=n.getUTCMilliseconds();return isNaN(n)?"Invalid Date":RA(n.getUTCFullYear())+"-"+rt(n.getUTCMonth()+1,2)+"-"+rt(n.getUTCDate(),2)+(i?"T"+rt(e,2)+":"+rt(t,2)+":"+rt(r,2)+"."+rt(i,3)+"Z":r?"T"+rt(e,2)+":"+rt(t,2)+":"+rt(r,2)+"Z":t||e?"T"+rt(e,2)+":"+rt(t,2)+"Z":"")}function o0(n){var e=new RegExp('["'+n+`
\r]`),t=n.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,x){if(h)return h(g,x-1);p=g,h=d?MA(g,d):i0(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,x,b=p<=0,w=!1;f.charCodeAt(p-1)===zs&&--p,f.charCodeAt(p-1)===Ku&&--p;function A(){if(b)return Yu;if(w)return w=!1,r0;var C,v=m,T;if(f.charCodeAt(v)===Xu){for(;m++<p&&f.charCodeAt(m)!==Xu||f.charCodeAt(++m)===Xu;);return(C=m)>=p?b=!0:(T=f.charCodeAt(m++))===zs?w=!0:T===Ku&&(w=!0,f.charCodeAt(m)===zs&&++m),f.slice(v+1,C-1).replace(/""/g,'"')}for(;m<p;){if((T=f.charCodeAt(C=m++))===zs)w=!0;else if(T===Ku)w=!0,f.charCodeAt(m)===zs&&++m;else if(T!==t)continue;return f.slice(v,C)}return b=!0,f.slice(v,p)}for(;(x=A())!==Yu;){for(var S=[];x!==r0&&x!==Yu;)S.push(x),x=A();d&&(S=d(S,g++))==null||h.push(S)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return l(h[p])}).join(n)})}function o(f,d){return d==null&&(d=s0(f)),[d.map(l).join(n)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=s0(f)),s(f,d).join(`
`)}function c(f){return f.map(u).join(`
`)}function u(f){return f.map(l).join(n)}function l(f){return f==null?"":f instanceof Date?OA(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:c,formatRow:u,formatValue:l}}var NA=o0("	"),LA=NA.parseRows;function zA(n){return n}function UA(n){if(n==null)return zA;var e,t,r=n.scale[0],i=n.scale[1],s=n.translate[0],o=n.translate[1];return function(a,c){c||(e=t=0);var u=2,l=a.length,f=new Array(l);for(f[0]=(e+=a[0])*r+s,f[1]=(t+=a[1])*i+o;u<l;)f[u]=a[u],++u;return f}}function GA(n,e){for(var t,r=n.length,i=r-e;i<--r;)t=n[i],n[i++]=n[r],n[r]=t}function HA(n,e){return typeof e=="string"&&(e=n.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(t){return a0(n,t)})}:a0(n,e)}function a0(n,e){var t=e.id,r=e.bbox,i=e.properties==null?{}:e.properties,s=c0(n,e);return t==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:t,properties:i,geometry:s}:{type:"Feature",id:t,bbox:r,properties:i,geometry:s}}function c0(n,e){var t=UA(n.transform),r=n.arcs;function i(l,f){f.length&&f.pop();for(var d=r[l<0?~l:l],h=0,p=d.length;h<p;++h)f.push(t(d[h],h));l<0&&GA(f,p)}function s(l){return t(l)}function o(l){for(var f=[],d=0,h=l.length;d<h;++d)i(l[d],f);return f.length<2&&f.push(f[0]),f}function a(l){for(var f=o(l);f.length<4;)f.push(f[0]);return f}function c(l){return l.map(a)}function u(l){var f=l.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:l.geometries.map(u)};case"Point":d=s(l.coordinates);break;case"MultiPoint":d=l.coordinates.map(s);break;case"LineString":d=o(l.arcs);break;case"MultiLineString":d=l.arcs.map(o);break;case"Polygon":d=c(l.arcs);break;case"MultiPolygon":d=l.arcs.map(c);break;default:return null}return{type:f,coordinates:d}}return u(e)}function VA(n,e){var t={},r={},i={},s=[],o=-1;e.forEach(function(u,l){var f=n.arcs[u<0?~u:u],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=e[++o],e[o]=u,e[l]=d)}),e.forEach(function(u){var l=a(u),f=l[0],d=l[1],h,p;if(h=i[f])if(delete i[h.end],h.push(u),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(u),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=f]=i[h.end=d]=h});function a(u){var l=n.arcs[u<0?~u:u],f=l[0],d;return n.transform?(d=[0,0],l.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=l[l.length-1],u<0?[d,f]:[f,d]}function c(u,l){for(var f in u){var d=u[f];delete l[d.start],delete d.start,delete d.end,d.forEach(function(h){t[h<0?~h:h]=1}),s.push(d)}}return c(i,r),c(r,i),e.forEach(function(u){t[u<0?~u:u]||s.push([u])}),s}function _A(n){return c0(n,jA.apply(this,arguments))}function jA(n,e,t){var r,i,s;if(arguments.length>1)r=WA(n,e,t);else for(i=0,r=new Array(s=n.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:VA(n,r)}}function WA(n,e,t){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function c(f){f.forEach(a)}function u(f){f.forEach(c)}function l(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(l);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":c(f.arcs);break;case"MultiPolygon":u(f.arcs);break}}return l(e),i.forEach(t==null?function(f){r.push(f[0].i)}:function(f){t(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function hr(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function QA(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function dr(n){let e,t,r;n.length!==2?(e=hr,t=(a,c)=>hr(n(a),c),r=(a,c)=>n(a)-c):(e=n===hr||n===QA?n:qA,t=n,r=n);function i(a,c,u=0,l=a.length){if(u<l){if(e(c,c)!==0)return l;do{const f=u+l>>>1;t(a[f],c)<0?u=f+1:l=f}while(u<l)}return u}function s(a,c,u=0,l=a.length){if(u<l){if(e(c,c)!==0)return l;do{const f=u+l>>>1;t(a[f],c)<=0?u=f+1:l=f}while(u<l)}return u}function o(a,c,u=0,l=a.length){const f=i(a,c,u,l-1);return f>u&&r(a[f-1],c)>-r(a[f],c)?f-1:f}return{left:i,center:o,right:s}}function qA(){return 0}function u0(n){return n===null?NaN:+n}function*YA(n,e){if(e===void 0)for(let t of n)t!=null&&(t=+t)>=t&&(yield t);else{let t=-1;for(let r of n)(r=e(r,++t,n))!=null&&(r=+r)>=r&&(yield r)}}const l0=dr(hr),Dn=l0.right;l0.left,dr(u0).center;function XA(n,e){let t=0;if(e===void 0)for(let r of n)r!=null&&(r=+r)>=r&&++t;else{let r=-1;for(let i of n)(i=e(i,++r,n))!=null&&(i=+i)>=i&&++t}return t}function KA(n,e){let t=0,r,i=0,s=0;if(e===void 0)for(let o of n)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++t,s+=r*(o-i));else{let o=-1;for(let a of n)(a=e(a,++o,n))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++t,s+=r*(a-i))}if(t>1)return s/(t-1)}function ZA(n,e){let t,r;for(const i of n)i!=null&&(t===void 0?i>=i&&(t=r=i):(t>i&&(t=i),r<i&&(r=i)));return[t,r]}class tn extends Map{constructor(e,t=ev){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(f0(this,e))}has(e){return super.has(f0(this,e))}set(e,t){return super.set(JA(this,e),t)}delete(e){return super.delete($A(this,e))}}function f0({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function JA({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function $A({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function ev(n){return n!==null&&typeof n=="object"?n.valueOf():n}function Zu(n){return n}function Ua(n,...e){return h0(n,Zu,Zu,e)}function tv(n,...e){return h0(n,Array.from,Zu,e)}function h0(n,e,t,r){return function i(s,o){if(o>=r.length)return t(s);const a=new tn,c=r[o++];let u=-1;for(const l of s){const f=c(l,++u,s),d=a.get(f);d?d.push(l):a.set(f,[l])}for(const[l,f]of a)a.set(l,i(f,o));return e(a)}(n,0)}function nv(n=hr){if(n===hr)return d0;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const r=n(e,t);return r||r===0?r:(n(t,t)===0)-(n(e,e)===0)}}function d0(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}const rv=Math.sqrt(50),iv=Math.sqrt(10),sv=Math.sqrt(2);function Ga(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=rv?10:s>=iv?5:s>=sv?2:1;let a,c,u;return i<0?(u=Math.pow(10,-i)/o,a=Math.round(n*u),c=Math.round(e*u),a/u<n&&++a,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*o,a=Math.round(n/u),c=Math.round(e/u),a*u<n&&++a,c*u>e&&--c),c<a&&.5<=t&&t<2?Ga(n,e,t*2):[a,c,u]}function Ha(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,s,o]=r?Ga(e,n,t):Ga(n,e,t);if(!(s>=i))return[];const a=s-i+1,c=new Array(a);if(r)if(o<0)for(let u=0;u<a;++u)c[u]=(s-u)/-o;else for(let u=0;u<a;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)c[u]=(i+u)/-o;else for(let u=0;u<a;++u)c[u]=(i+u)*o;return c}function Ju(n,e,t){return e=+e,n=+n,t=+t,Ga(n,e,t)[2]}function pr(n,e,t){e=+e,n=+n,t=+t;const r=e<n,i=r?Ju(e,n,t):Ju(n,e,t);return(r?-1:1)*(i<0?1/-i:i)}function $u(n,e){let t;if(e===void 0)for(const r of n)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);else{let r=-1;for(let i of n)(i=e(i,++r,n))!=null&&(t<i||t===void 0&&i>=i)&&(t=i)}return t}function el(n,e){let t;if(e===void 0)for(const r of n)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);else{let r=-1;for(let i of n)(i=e(i,++r,n))!=null&&(t>i||t===void 0&&i>=i)&&(t=i)}return t}function p0(n,e,t=0,r=1/0,i){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),r=Math.floor(Math.min(n.length-1,r)),!(t<=e&&e<=r))return n;for(i=i===void 0?d0:nv(i);r>t;){if(r-t>600){const c=r-t+1,u=e-t+1,l=Math.log(c),f=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(t,Math.floor(e-u*f/c+d)),p=Math.min(r,Math.floor(e+(c-u)*f/c+d));p0(n,e,h,p,i)}const s=n[e];let o=t,a=r;for(Us(n,t,e),i(n[r],s)>0&&Us(n,t,r);o<a;){for(Us(n,o,a),++o,--a;i(n[o],s)<0;)++o;for(;i(n[a],s)>0;)--a}i(n[t],s)===0?Us(n,t,a):(++a,Us(n,a,r)),a<=e&&(t=a+1),e<=a&&(r=a-1)}return n}function Us(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function ov(n,e,t){if(n=Float64Array.from(YA(n,t)),!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return el(n);if(e>=1)return $u(n);var r,i=(r-1)*e,s=Math.floor(i),o=$u(p0(n,s).subarray(0,s+1)),a=el(n.subarray(s+1));return o+(a-o)*(i-s)}}function m0(n,e,t=u0){if(!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return+t(n[0],0,n);if(e>=1)return+t(n[r-1],r-1,n);var r,i=(r-1)*e,s=Math.floor(i),o=+t(n[s],s,n),a=+t(n[s+1],s+1,n);return o+(a-o)*(i-s)}}function av(n,e){let t=0,r=0;if(e===void 0)for(let i of n)i!=null&&(i=+i)>=i&&(++t,r+=i);else{let i=-1;for(let s of n)(s=e(s,++i,n))!=null&&(s=+s)>=s&&(++t,r+=s)}if(t)return r/t}function cv(n,e){return ov(n,.5,e)}function Gs(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,s=new Array(i);++r<i;)s[r]=n+r*t;return s}function Hs(n,e){let t=0;if(e===void 0)for(let r of n)(r=+r)&&(t+=r);else{let r=-1;for(let i of n)(i=+e(i,++r,n))&&(t+=i)}return t}function uv(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function Va(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function oi(n){return n=Va(Math.abs(n)),n?n[1]:NaN}function lv(n,e){return function(t,r){for(var i=t.length,s=[],o=0,a=n[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),s.push(t.substring(i-=a,i+a)),!((c+=a+1)>r));)a=n[o=(o+1)%n.length];return s.reverse().join(e)}}function fv(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var hv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ai(n){if(!(e=hv.exec(n)))throw new Error("invalid format: "+n);var e;return new tl({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ai.prototype=tl.prototype;function tl(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}tl.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dv(n){e:for(var e=n.length,t=1,r=-1,i;t<e;++t)switch(n[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+n[t])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var g0;function pv(n,e){var t=Va(n,e);if(!t)return n+"";var r=t[0],i=t[1],s=i-(g0=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Va(n,Math.max(0,e+s-1))[0]}function x0(n,e){var t=Va(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const y0={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:uv,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>x0(n*100,e),r:x0,s:pv,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function b0(n){return n}var w0=Array.prototype.map,A0=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function mv(n){var e=n.grouping===void 0||n.thousands===void 0?b0:lv(w0.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",s=n.numerals===void 0?b0:fv(w0.call(n.numerals,String)),o=n.percent===void 0?"%":n.percent+"",a=n.minus===void 0?"−":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function u(f){f=ai(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,x=f.width,b=f.comma,w=f.precision,A=f.trim,S=f.type;S==="n"?(b=!0,S="g"):y0[S]||(w===void 0&&(w=12),A=!0,S="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var C=m==="$"?t:m==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",v=m==="$"?r:/[%p]/.test(S)?o:"",T=y0[S],P=/[defgprs%]/.test(S);w=w===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function F(k){var L=C,U=v,j,Z,_;if(S==="c")U=T(k)+U,k="";else{k=+k;var ee=k<0||1/k<0;if(k=isNaN(k)?c:T(Math.abs(k),w),A&&(k=dv(k)),ee&&+k==0&&p!=="+"&&(ee=!1),L=(ee?p==="("?p:a:p==="-"||p==="("?"":p)+L,U=(S==="s"?A0[8+g0/3]:"")+U+(ee&&p==="("?")":""),P){for(j=-1,Z=k.length;++j<Z;)if(_=k.charCodeAt(j),48>_||_>57){U=(_===46?i+k.slice(j+1):k.slice(j))+U,k=k.slice(0,j);break}}}b&&!g&&(k=e(k,1/0));var ce=L.length+k.length+U.length,ie=ce<x?new Array(x-ce+1).join(d):"";switch(b&&g&&(k=e(ie+k,ie.length?x-U.length:1/0),ie=""),h){case"<":k=L+k+U+ie;break;case"=":k=L+ie+k+U;break;case"^":k=ie.slice(0,ce=ie.length>>1)+L+k+U+ie.slice(ce);break;default:k=ie+L+k+U;break}return s(k)}return F.toString=function(){return f+""},F}function l(f,d){var h=u((f=ai(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(oi(d)/3)))*3,m=Math.pow(10,-p),g=A0[8+p/3];return function(x){return h(m*x)+g}}return{format:u,formatPrefix:l}}var _a,Le,v0;gv({thousands:",",grouping:[3],currency:["$",""]});function gv(n){return _a=mv(n),Le=_a.format,v0=_a.formatPrefix,_a}function xv(n){return Math.max(0,-oi(Math.abs(n)))}function yv(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(oi(e)/3)))*3-oi(Math.abs(n)))}function bv(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,oi(e)-oi(n))+1}const nl=new Date,rl=new Date;function Ie(n,e,t,r){function i(s){return n(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(n(s=new Date(+s)),s),i.ceil=s=>(n(s=new Date(s-1)),e(s,1),n(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const c=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return c;let u;do c.push(u=new Date(+s)),e(s,a),n(s);while(u<s&&s<o);return c},i.filter=s=>Ie(o=>{if(o>=o)for(;n(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),t&&(i.count=(s,o)=>(nl.setTime(+s),rl.setTime(+o),n(nl),n(rl),Math.floor(t(nl,rl))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const ci=Ie(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);ci.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?Ie(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):ci),ci.range;const nn=1e3,dt=nn*60,rn=dt*60,sn=rn*24,il=sn*7,S0=sn*30,sl=sn*365,on=Ie(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*nn)},(n,e)=>(e-n)/nn,n=>n.getUTCSeconds());on.range;const ja=Ie(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*nn)},(n,e)=>{n.setTime(+n+e*dt)},(n,e)=>(e-n)/dt,n=>n.getMinutes());ja.range;const Wa=Ie(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*dt)},(n,e)=>(e-n)/dt,n=>n.getUTCMinutes());Wa.range;const Qa=Ie(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*nn-n.getMinutes()*dt)},(n,e)=>{n.setTime(+n+e*rn)},(n,e)=>(e-n)/rn,n=>n.getHours());Qa.range;const qa=Ie(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*rn)},(n,e)=>(e-n)/rn,n=>n.getUTCHours());qa.range;const In=Ie(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*dt)/sn,n=>n.getDate()-1);In.range;const mr=Ie(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/sn,n=>n.getUTCDate()-1);mr.range;const E0=Ie(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/sn,n=>Math.floor(n/sn));E0.range;function gr(n){return Ie(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*dt)/il)}const Vs=gr(0),Ya=gr(1),wv=gr(2),Av=gr(3),ui=gr(4),vv=gr(5),Sv=gr(6);Vs.range,Ya.range,wv.range,Av.range,ui.range,vv.range,Sv.range;function xr(n){return Ie(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/il)}const _s=xr(0),Xa=xr(1),Ev=xr(2),Cv=xr(3),li=xr(4),Dv=xr(5),Iv=xr(6);_s.range,Xa.range,Ev.range,Cv.range,li.range,Dv.range,Iv.range;const fi=Ie(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());fi.range;const hi=Ie(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());hi.range;const Lt=Ie(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());Lt.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Ie(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)}),Lt.range;const zt=Ie(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());zt.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Ie(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)}),zt.range;function C0(n,e,t,r,i,s){const o=[[on,1,nn],[on,5,5*nn],[on,15,15*nn],[on,30,30*nn],[s,1,dt],[s,5,5*dt],[s,15,15*dt],[s,30,30*dt],[i,1,rn],[i,3,3*rn],[i,6,6*rn],[i,12,12*rn],[r,1,sn],[r,2,2*sn],[t,1,il],[e,1,S0],[e,3,3*S0],[n,1,sl]];function a(u,l,f){const d=l<u;d&&([u,l]=[l,u]);const h=f&&typeof f.range=="function"?f:c(u,l,f),p=h?h.range(u,+l+1):[];return d?p.reverse():p}function c(u,l,f){const d=Math.abs(l-u)/f,h=dr(([,,g])=>g).right(o,d);if(h===o.length)return n.every(pr(u/sl,l/sl,f));if(h===0)return ci.every(Math.max(pr(u,l,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,c]}const[Tv,Bv]=C0(zt,hi,_s,E0,qa,Wa),[kv,Fv]=C0(Lt,fi,Vs,In,Qa,ja),js="year",Ws="quarter",Qs="month",qs="week",Ys="date",Ka="day",ol="dayofyear",Xs="hours",Ks="minutes",Zs="seconds",Za="milliseconds";[js,Ws,Qs,qs,Ys,Ka,ol,Xs,Ks,Zs,Za].reduce((n,e,t)=>(n[e]=1+t,n),{});const Pv={[js]:Lt,[Ws]:fi.every(3),[Qs]:fi,[qs]:Vs,[Ys]:In,[Ka]:In,[ol]:In,[Xs]:Qa,[Ks]:ja,[Zs]:on,[Za]:ci},Mv={[js]:zt,[Ws]:hi.every(3),[Qs]:hi,[qs]:_s,[Ys]:mr,[Ka]:mr,[ol]:mr,[Xs]:qa,[Ks]:Wa,[Zs]:on,[Za]:ci};function Rv(n){return Pv[n]}function Ov(n){return Mv[n]}function al(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function cl(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function Js(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function D0(n){var e=n.dateTime,t=n.date,r=n.time,i=n.periods,s=n.days,o=n.shortDays,a=n.months,c=n.shortMonths,u=$s(i),l=eo(i),f=$s(s),d=eo(s),h=$s(o),p=eo(o),m=$s(a),g=eo(a),x=$s(c),b=eo(c),w={a:ee,A:ce,b:ie,B:Ne,c:null,d:P0,e:P0,f:i2,g:p2,G:g2,H:t2,I:n2,j:r2,L:M0,m:s2,M:o2,p:Se,q:Zt,Q:U0,s:G0,S:a2,u:c2,U:u2,V:l2,w:f2,W:h2,x:null,X:null,y:d2,Y:m2,Z:x2,"%":z0},A={a:Jt,A:rr,b:Ds,B:De,c:null,d:O0,e:O0,f:A2,g:F2,G:M2,H:y2,I:b2,j:w2,L:N0,m:v2,M:S2,p:St,q:ut,Q:U0,s:G0,S:E2,u:C2,U:D2,V:I2,w:T2,W:B2,x:null,X:null,y:k2,Y:P2,Z:R2,"%":z0},S={a:F,A:k,b:L,B:U,c:j,d:k0,e:k0,f:Zv,g:B0,G:T0,H:F0,I:F0,j:qv,L:Kv,m:Qv,M:Yv,p:P,q:Wv,Q:$v,s:e2,S:Xv,u:Gv,U:Hv,V:Vv,w:Uv,W:_v,x:Z,X:_,y:B0,Y:T0,Z:jv,"%":Jv};w.x=C(t,w),w.X=C(r,w),w.c=C(e,w),A.x=C(t,A),A.X=C(r,A),A.c=C(e,A);function C(H,J){return function(te){var M=[],Ye=-1,he=0,tt=H.length,Xe,bn,Da;for(te instanceof Date||(te=new Date(+te));++Ye<tt;)H.charCodeAt(Ye)===37&&(M.push(H.slice(he,Ye)),(bn=I0[Xe=H.charAt(++Ye)])!=null?Xe=H.charAt(++Ye):bn=Xe==="e"?" ":"0",(Da=J[Xe])&&(Xe=Da(te,bn)),M.push(Xe),he=Ye+1);return M.push(H.slice(he,Ye)),M.join("")}}function v(H,J){return function(te){var M=Js(1900,void 0,1),Ye=T(M,H,te+="",0),he,tt;if(Ye!=te.length)return null;if("Q"in M)return new Date(M.Q);if("s"in M)return new Date(M.s*1e3+("L"in M?M.L:0));if(J&&!("Z"in M)&&(M.Z=0),"p"in M&&(M.H=M.H%12+M.p*12),M.m===void 0&&(M.m="q"in M?M.q:0),"V"in M){if(M.V<1||M.V>53)return null;"w"in M||(M.w=1),"Z"in M?(he=cl(Js(M.y,0,1)),tt=he.getUTCDay(),he=tt>4||tt===0?Xa.ceil(he):Xa(he),he=mr.offset(he,(M.V-1)*7),M.y=he.getUTCFullYear(),M.m=he.getUTCMonth(),M.d=he.getUTCDate()+(M.w+6)%7):(he=al(Js(M.y,0,1)),tt=he.getDay(),he=tt>4||tt===0?Ya.ceil(he):Ya(he),he=In.offset(he,(M.V-1)*7),M.y=he.getFullYear(),M.m=he.getMonth(),M.d=he.getDate()+(M.w+6)%7)}else("W"in M||"U"in M)&&("w"in M||(M.w="u"in M?M.u%7:"W"in M?1:0),tt="Z"in M?cl(Js(M.y,0,1)).getUTCDay():al(Js(M.y,0,1)).getDay(),M.m=0,M.d="W"in M?(M.w+6)%7+M.W*7-(tt+5)%7:M.w+M.U*7-(tt+6)%7);return"Z"in M?(M.H+=M.Z/100|0,M.M+=M.Z%100,cl(M)):al(M)}}function T(H,J,te,M){for(var Ye=0,he=J.length,tt=te.length,Xe,bn;Ye<he;){if(M>=tt)return-1;if(Xe=J.charCodeAt(Ye++),Xe===37){if(Xe=J.charAt(Ye++),bn=S[Xe in I0?J.charAt(Ye++):Xe],!bn||(M=bn(H,te,M))<0)return-1}else if(Xe!=te.charCodeAt(M++))return-1}return M}function P(H,J,te){var M=u.exec(J.slice(te));return M?(H.p=l.get(M[0].toLowerCase()),te+M[0].length):-1}function F(H,J,te){var M=h.exec(J.slice(te));return M?(H.w=p.get(M[0].toLowerCase()),te+M[0].length):-1}function k(H,J,te){var M=f.exec(J.slice(te));return M?(H.w=d.get(M[0].toLowerCase()),te+M[0].length):-1}function L(H,J,te){var M=x.exec(J.slice(te));return M?(H.m=b.get(M[0].toLowerCase()),te+M[0].length):-1}function U(H,J,te){var M=m.exec(J.slice(te));return M?(H.m=g.get(M[0].toLowerCase()),te+M[0].length):-1}function j(H,J,te){return T(H,e,J,te)}function Z(H,J,te){return T(H,t,J,te)}function _(H,J,te){return T(H,r,J,te)}function ee(H){return o[H.getDay()]}function ce(H){return s[H.getDay()]}function ie(H){return c[H.getMonth()]}function Ne(H){return a[H.getMonth()]}function Se(H){return i[+(H.getHours()>=12)]}function Zt(H){return 1+~~(H.getMonth()/3)}function Jt(H){return o[H.getUTCDay()]}function rr(H){return s[H.getUTCDay()]}function Ds(H){return c[H.getUTCMonth()]}function De(H){return a[H.getUTCMonth()]}function St(H){return i[+(H.getUTCHours()>=12)]}function ut(H){return 1+~~(H.getUTCMonth()/3)}return{format:function(H){var J=C(H+="",w);return J.toString=function(){return H},J},parse:function(H){var J=v(H+="",!1);return J.toString=function(){return H},J},utcFormat:function(H){var J=C(H+="",A);return J.toString=function(){return H},J},utcParse:function(H){var J=v(H+="",!0);return J.toString=function(){return H},J}}}var I0={"-":"",_:" ",0:"0"},Fe=/^\s*\d+/,Nv=/^%/,Lv=/[\\^$*+?|[\]().{}]/g;function oe(n,e,t){var r=n<0?"-":"",i=(r?-n:n)+"",s=i.length;return r+(s<t?new Array(t-s+1).join(e)+i:i)}function zv(n){return n.replace(Lv,"\\$&")}function $s(n){return new RegExp("^(?:"+n.map(zv).join("|")+")","i")}function eo(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function Uv(n,e,t){var r=Fe.exec(e.slice(t,t+1));return r?(n.w=+r[0],t+r[0].length):-1}function Gv(n,e,t){var r=Fe.exec(e.slice(t,t+1));return r?(n.u=+r[0],t+r[0].length):-1}function Hv(n,e,t){var r=Fe.exec(e.slice(t,t+2));return r?(n.U=+r[0],t+r[0].length):-1}function Vv(n,e,t){var r=Fe.exec(e.slice(t,t+2));return r?(n.V=+r[0],t+r[0].length):-1}function _v(n,e,t){var r=Fe.exec(e.slice(t,t+2));return r?(n.W=+r[0],t+r[0].length):-1}function T0(n,e,t){var r=Fe.exec(e.slice(t,t+4));return r?(n.y=+r[0],t+r[0].length):-1}function B0(n,e,t){var r=Fe.exec(e.slice(t,t+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function jv(n,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function Wv(n,e,t){var r=Fe.exec(e.slice(t,t+1));return r?(n.q=r[0]*3-3,t+r[0].length):-1}function Qv(n,e,t){var r=Fe.exec(e.slice(t,t+2));return r?(n.m=r[0]-1,t+r[0].length):-1}function k0(n,e,t){var r=Fe.exec(e.slice(t,t+2));return r?(n.d=+r[0],t+r[0].length):-1}function qv(n,e,t){var r=Fe.exec(e.slice(t,t+3));return r?(n.m=0,n.d=+r[0],t+r[0].length):-1}function F0(n,e,t){var r=Fe.exec(e.slice(t,t+2));return r?(n.H=+r[0],t+r[0].length):-1}function Yv(n,e,t){var r=Fe.exec(e.slice(t,t+2));return r?(n.M=+r[0],t+r[0].length):-1}function Xv(n,e,t){var r=Fe.exec(e.slice(t,t+2));return r?(n.S=+r[0],t+r[0].length):-1}function Kv(n,e,t){var r=Fe.exec(e.slice(t,t+3));return r?(n.L=+r[0],t+r[0].length):-1}function Zv(n,e,t){var r=Fe.exec(e.slice(t,t+6));return r?(n.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function Jv(n,e,t){var r=Nv.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function $v(n,e,t){var r=Fe.exec(e.slice(t));return r?(n.Q=+r[0],t+r[0].length):-1}function e2(n,e,t){var r=Fe.exec(e.slice(t));return r?(n.s=+r[0],t+r[0].length):-1}function P0(n,e){return oe(n.getDate(),e,2)}function t2(n,e){return oe(n.getHours(),e,2)}function n2(n,e){return oe(n.getHours()%12||12,e,2)}function r2(n,e){return oe(1+In.count(Lt(n),n),e,3)}function M0(n,e){return oe(n.getMilliseconds(),e,3)}function i2(n,e){return M0(n,e)+"000"}function s2(n,e){return oe(n.getMonth()+1,e,2)}function o2(n,e){return oe(n.getMinutes(),e,2)}function a2(n,e){return oe(n.getSeconds(),e,2)}function c2(n){var e=n.getDay();return e===0?7:e}function u2(n,e){return oe(Vs.count(Lt(n)-1,n),e,2)}function R0(n){var e=n.getDay();return e>=4||e===0?ui(n):ui.ceil(n)}function l2(n,e){return n=R0(n),oe(ui.count(Lt(n),n)+(Lt(n).getDay()===4),e,2)}function f2(n){return n.getDay()}function h2(n,e){return oe(Ya.count(Lt(n)-1,n),e,2)}function d2(n,e){return oe(n.getFullYear()%100,e,2)}function p2(n,e){return n=R0(n),oe(n.getFullYear()%100,e,2)}function m2(n,e){return oe(n.getFullYear()%1e4,e,4)}function g2(n,e){var t=n.getDay();return n=t>=4||t===0?ui(n):ui.ceil(n),oe(n.getFullYear()%1e4,e,4)}function x2(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+oe(e/60|0,"0",2)+oe(e%60,"0",2)}function O0(n,e){return oe(n.getUTCDate(),e,2)}function y2(n,e){return oe(n.getUTCHours(),e,2)}function b2(n,e){return oe(n.getUTCHours()%12||12,e,2)}function w2(n,e){return oe(1+mr.count(zt(n),n),e,3)}function N0(n,e){return oe(n.getUTCMilliseconds(),e,3)}function A2(n,e){return N0(n,e)+"000"}function v2(n,e){return oe(n.getUTCMonth()+1,e,2)}function S2(n,e){return oe(n.getUTCMinutes(),e,2)}function E2(n,e){return oe(n.getUTCSeconds(),e,2)}function C2(n){var e=n.getUTCDay();return e===0?7:e}function D2(n,e){return oe(_s.count(zt(n)-1,n),e,2)}function L0(n){var e=n.getUTCDay();return e>=4||e===0?li(n):li.ceil(n)}function I2(n,e){return n=L0(n),oe(li.count(zt(n),n)+(zt(n).getUTCDay()===4),e,2)}function T2(n){return n.getUTCDay()}function B2(n,e){return oe(Xa.count(zt(n)-1,n),e,2)}function k2(n,e){return oe(n.getUTCFullYear()%100,e,2)}function F2(n,e){return n=L0(n),oe(n.getUTCFullYear()%100,e,2)}function P2(n,e){return oe(n.getUTCFullYear()%1e4,e,4)}function M2(n,e){var t=n.getUTCDay();return n=t>=4||t===0?li(n):li.ceil(n),oe(n.getUTCFullYear()%1e4,e,4)}function R2(){return"+0000"}function z0(){return"%"}function U0(n){return+n}function G0(n){return Math.floor(+n/1e3)}var di,ul,H0,ll,V0;O2({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function O2(n){return di=D0(n),ul=di.format,H0=di.parse,ll=di.utcFormat,V0=di.utcParse,di}function Ja(n){const e={};return t=>e[t]||(e[t]=n(t))}function _0(n,e,t){t=t||{},Ge(t)||Ct(`Invalid time multi-format specifier: ${t}`);const r=e(Zs),i=e(Ks),s=e(Xs),o=e(Ys),a=e(qs),c=e(Qs),u=e(Ws),l=e(js),f=n(t[Za]||".%L"),d=n(t[Zs]||":%S"),h=n(t[Ks]||"%I:%M"),p=n(t[Xs]||"%I %p"),m=n(t[Ys]||t[Ka]||"%a %d"),g=n(t[qs]||"%b %d"),x=n(t[Qs]||"%B"),b=n(t[Ws]||"%B"),w=n(t[js]||"%Y");return A=>(r(A)<A?f:i(A)<A?d:s(A)<A?h:o(A)<A?p:c(A)<A?a(A)<A?m:g:l(A)<A?u(A)<A?x:b:w)(A)}function j0(n){const e=Ja(n.format),t=Ja(n.utcFormat);return{timeFormat:r=>me(r)?e(r):_0(e,Rv,r),utcFormat:r=>me(r)?t(r):_0(t,Ov,r),timeParse:Ja(n.parse),utcParse:Ja(n.utcParse)}}let fl;N2();function N2(){return fl=j0({format:ul,parse:H0,utcFormat:ll,utcParse:V0})}function L2(n){return j0(D0(n))}function z2(n){return arguments.length?fl=L2(n):fl}const U2=n=>n!=null&&n===n,G2=n=>n==="true"||n==="false"||n===!0||n===!1,H2=n=>!Number.isNaN(Date.parse(n)),W0=n=>!Number.isNaN(+n)&&!(n instanceof Date),V2=n=>W0(n)&&Number.isInteger(+n),Q0={boolean:uA,integer:Ma,number:Ma,date:fA,string:hA,unknown:Pa},$a=[G2,V2,W0,H2],_2=["boolean","integer","number","date"];function j2(n,e){if(!n||!n.length)return"unknown";const t=n.length,r=$a.length,i=$a.map((s,o)=>o+1);for(let s=0,o=0,a,c;s<t;++s)for(c=e?n[s][e]:n[s],a=0;a<r;++a)if(i[a]&&U2(c)&&!$a[a](c)&&(i[a]=0,++o,o===$a.length))return"string";return _2[i.reduce((s,o)=>s===0?o:s,0)-1]}function W2(n,e){return e.reduce((t,r)=>(t[r]=j2(n,r),t),{})}function q0(n){const e=function(t,r){const i={delimiter:n};return hl(t,r?sA(r,i):i)};return e.responseType="text",e}function hl(n,e){return e.header&&(n=e.header.map(Uu).join(e.delimiter)+`
`+n),o0(e.delimiter).parse(n+"")}hl.responseType="text";function Q2(n){return typeof Buffer=="function"&&Nt(Buffer.isBuffer)?Buffer.isBuffer(n):!1}function dl(n,e){const t=e&&e.property?Fa(e.property):Pa;return Ge(n)&&!Q2(n)?q2(t(n),e):t(JSON.parse(n))}dl.responseType="json";function q2(n,e){return!Ue(n)&&aA(n)&&(n=[...n]),e&&e.copy?JSON.parse(JSON.stringify(n)):n}const Y2={interior:(n,e)=>n!==e,exterior:(n,e)=>n===e};function Y0(n,e){let t,r,i,s;return n=dl(n,e),e&&e.feature?(t=HA,i=e.feature):e&&e.mesh?(t=_A,i=e.mesh,s=Y2[e.filter]):Ct("Missing TopoJSON feature or mesh parameter."),r=(r=n.objects[i])?t(n,r,s):Ct("Invalid TopoJSON object: "+i),r&&r.features||[r]}Y0.responseType="json";const pl={dsv:hl,csv:q0(","),tsv:q0("	"),json:dl,topojson:Y0};function ml(n,e){return arguments.length>1?(pl[n]=e,this):Ud(pl,n)?pl[n]:null}function gl(n,e,t,r){e=e||{};const i=ml(e.type||"json");return i||Ct("Unknown data format type: "+e.type),n=i(n,e),e.parse&&X2(n,e.parse,t,r),Ud(n,"columns")&&delete n.columns,n}function X2(n,e,t,r){if(!n.length)return;const i=z2();t=t||i.timeParse,r=r||i.utcParse;let s=n.columns||Object.keys(n[0]),o,a,c,u,l,f;e==="auto"&&(e=W2(n,s)),s=Object.keys(e);const d=s.map(h=>{const p=e[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:t)(g);if(!Q0[p])throw Error("Illegal format pattern: "+h+":"+p);return Q0[p]});for(c=0,l=n.length,f=s.length;c<l;++c)for(o=n[c],u=0;u<f;++u)a=s[u],o[a]=d[u](o[a])}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const X0={ATTRIBUTE:1,CHILD:2},K0=n=>(...e)=>({_$litDirective$:n,values:e});let Z0=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,r){this._$Ct=e,this._$AM=t,this._$Ci=r}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const J0="important",K2=" !"+J0,xl=K0(class extends Z0{constructor(n){var e;if(super(n),n.type!==X0.ATTRIBUTE||n.name!=="style"||((e=n.strings)==null?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(n){return Object.keys(n).reduce((e,t)=>{const r=n[t];return r==null?e:e+`${t=t.includes("-")?t:t.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(n,[e]){const{style:t}=n.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?t.removeProperty(r):t[r]=null);for(const r in e){const i=e[r];if(i!=null){this.ft.add(r);const s=typeof i=="string"&&i.endsWith(K2);r.includes("-")||s?t.setProperty(r,s?i.slice(0,-11):i,s?J0:""):t[r]=i}}return ur}}),Z2="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e.spinner_ajPY{transform-origin:center;animation:spinner_AtaB%20.75s%20infinite%20linear}@keyframes%20spinner_AtaB{100%25{transform:rotate(360deg)}}%3c/style%3e%3cpath%20d='M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z'%20opacity='.25'/%3e%3cpath%20d='M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z'%20class='spinner_ajPY'/%3e%3c/svg%3e",J2=`
:root {
--genome-spy-basic-spacing: 10px;
--genome-spy-font-family: system-ui, "Segoe UI", Roboto, Helvetica, Arial,
sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}

@keyframes genome-spy-blinker {
50% {
opacity: 0;
}
}

.genome-spy {
font-family: var(--genome-spy-font-family);

position: relative;

display: flex;
flex-direction: column;

.canvas-wrapper {
position: relative;
flex-grow: 1;
overflow: hidden;
}

canvas {
display: block;
transform: scale(1, 1);
opacity: 1;
transition:
transform 0.6s,
opacity 0.6s;

&:focus,
&:focus-visible {
outline: none;
}
}

.loading-message {
position: absolute;
inset: 0;
display: flex;

align-items: center;
justify-content: center;

.message {
color: #666;
opacity: 0;
transition: opacity 0.7s;
}
}

.loading {
> canvas {
transform: scale(0.95, 0.95);
opacity: 0;
}

> .loading-message .message {
opacity: 1;

.ellipsis {
animation: genome-spy-blinker 1s linear infinite;
}
}
}

.loading-indicators {
position: absolute;
inset: 0;

user-select: none;
pointer-events: none;

div {
position: absolute;
display: flex;
align-items: center;
justify-content: center;

> div {
font-size: 11px;
transition: opacity 0.2s;
background: white;
padding: 2px 5px;
display: flex;
border-radius: 3px;
gap: 0.5em;
opacity: 0;

&.loading {
opacity: 0.5;
}

&.error {
opacity: 0.8;
color: firebrick;
}

> * {
display: block;
}

img {
width: 1.5em;
height: 1.5em;
}
}
}
}

.tooltip {
position: absolute;

max-width: 450px;
overflow: hidden;

--background-color: #f6f6f6;
background: var(--background-color);
padding: var(--genome-spy-basic-spacing);

--font-size: 12px;
font-size: var(--font-size);

box-shadow: 0px 3px 15px 0px rgba(0, 0, 0, 0.21);

&:not(.sticky) {
pointer-events: none;
}

transition:
outline-color 0.3s ease-in-out,
box-shadow 0.3s ease-in-out;

outline: 0px solid transparent;
&.sticky {
outline: 2px solid black;
box-shadow: 0px 3px 18px 0px rgba(0, 0, 0, 0.3);
}

z-index: 100;

> :last-child {
margin-bottom: 0;
}

> .title {
padding-bottom: calc(var(--genome-spy-basic-spacing) / 2);
margin-bottom: calc(var(--genome-spy-basic-spacing) / 2);
border-bottom: 1px dashed var(--background-color);
border-bottom: 1px dashed
color-mix(in srgb, black 25%, var(--background-color));
}

.summary {
font-size: 12px;
}

table {
&:first-child {
margin-top: 0;
}

border-collapse: collapse;

th,
td {
padding: 2px 0.4em;
vertical-align: top;
font-size: var(--font-size);

&:first-child {
padding-left: 0;
}
}

th {
text-align: left;
font-weight: bold;
}
}

.color-legend {
display: inline-block;
width: 0.8em;
height: 0.8em;
margin-left: 0.4em;
box-shadow: 0px 0px 3px 1px white;
}

.attributes {
.hovered {
background-color: #e0e0e0;
}
}

.na {
color: #aaa;
font-style: italic;
font-size: 80%;
}
}

.gene-track-tooltip {
.summary {
font-size: 90%;
}
}

.message-box {
display: flex;
align-items: center;
justify-content: center;
position: absolute;
top: 0;
height: 100%;
width: 100%;

> div {
border: 1px solid red;
padding: 10px;
background: #fff0f0;
}
}
}

.gs-input-binding {
display: grid;
grid-template-columns: max-content max-content;
column-gap: 1em;
row-gap: 0.3em;
justify-items: start;

> select,
> input:not([type="checkbox"]) {
width: 100%;
}

input[type="range"] + span {
display: inline-block;
margin-left: 0.3em;
min-width: 2.2em;
font-variant-numeric: tabular-nums;
}

input[type="range"],
input[type="radio"] {
vertical-align: text-bottom;
}

.radio-group {
display: flex;
align-items: center;
}

.description {
max-width: 26em;
grid-column: 1 / -1;
color: #777;
font-size: 90%;
margin-top: -0.5em;
}
}

.gs-input-bindings {
flex-basis: content;
font-size: 14px;
padding: var(--genome-spy-basic-spacing);
}
`;function $2(n,e){var t=n.getBoundingClientRect();return[e.clientX-t.left-n.clientLeft,e.clientY-t.top-n.clientTop]}function ec(n,e){return n.length==e.length&&n.every((t,r)=>n[r]===e[r])}function He(n){return Array.isArray(n)?n:typeof n<"u"?[n]:[]}function to(n){return n[n.length-1]}class eS{constructor(e){R(this,mn,!1);R(this,Ki,!0);R(this,jr);R(this,Wr,0);R(this,Zi);R(this,ta,0);R(this,$e);R(this,Kn);R(this,Ji,[!0]);G(this,Kn,e),G(this,$e,document.createElement("div")),E(this,$e).className="tooltip",E(this,Kn).appendChild(E(this,$e)),this.clear()}set sticky(e){!e&&E(this,mn)&&this.clear(),G(this,mn,e),E(this,$e).classList.toggle("sticky",E(this,mn))}get sticky(){return E(this,mn)}set visible(e){e!=E(this,Ki)&&(E(this,$e).style.display=e?null:"none",G(this,Ki,e))}get visible(){return E(this,Ki)}get enabled(){return to(E(this,Ji))??!0}pushEnabledState(e){E(this,Ji).push(e),e||(this.visible=!1)}popEnabledState(){E(this,Ji).pop()}handleMouseMove(e){if(E(this,mn))return;this.mouseCoords=$2(E(this,Kn),e);const t=performance.now();!this.visible&&!this._isPenalty()&&t-E(this,ta)>500&&G(this,Wr,t+70),E(this,Zi)&&tS(this.mouseCoords,E(this,Zi))>20&&G(this,Wr,t+400),G(this,Zi,this.mouseCoords),this.visible&&this.updatePlacement(),G(this,ta,t)}updatePlacement(){const[t,r]=this.mouseCoords;let i=t+20;i>E(this,Kn).clientWidth-E(this,$e).offsetWidth&&(i=t-20-E(this,$e).offsetWidth),E(this,$e).style.left=i+"px",E(this,$e).style.top=Math.min(r+20,E(this,Kn).clientHeight-E(this,$e).offsetHeight)+"px"}setContent(e){if(!E(this,mn)){if(!e||!this.enabled||this._isPenalty()){this.visible&&(Ns("",E(this,$e)),this.visible=!1),G(this,jr,void 0);return}Ns(e,E(this,$e)),this.visible=!0,this.updatePlacement()}}clear(){G(this,jr,void 0),this.setContent(void 0)}updateWithDatum(e,t){e!==E(this,jr)&&(G(this,jr,e),t||(t=r=>Promise.resolve(ge` ${JSON.stringify(r)} `)),t(e).then(r=>this.setContent(r)).catch(r=>{if(r!=="debounced")throw r}))}_isPenalty(){return E(this,Wr)&&E(this,Wr)>performance.now()}}mn=new WeakMap,Ki=new WeakMap,jr=new WeakMap,Wr=new WeakMap,Zi=new WeakMap,ta=new WeakMap,$e=new WeakMap,Kn=new WeakMap,Ji=new WeakMap;function tS(n,e){let t=0;for(let r=0;r<n.length;r++)t+=(n[r]-e[r])**2;return Math.sqrt(t)}/* @license twgl.js 4.24.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */const yl=5120,no=5121,bl=5122,wl=5123,Al=5124,vl=5125,Sl=5126,nS=32819,rS=32820,iS=33635,sS=5131,oS=33640,aS=35899,cS=35902,uS=36269,lS=34042,$0={};{const n=$0;n[yl]=Int8Array,n[no]=Uint8Array,n[bl]=Int16Array,n[wl]=Uint16Array,n[Al]=Int32Array,n[vl]=Uint32Array,n[Sl]=Float32Array,n[nS]=Uint16Array,n[rS]=Uint16Array,n[iS]=Uint16Array,n[sS]=Uint16Array,n[oS]=Uint32Array,n[aS]=Uint32Array,n[cS]=Uint32Array,n[uS]=Uint32Array,n[lS]=Uint32Array}function El(n){if(n instanceof Int8Array)return yl;if(n instanceof Uint8Array||n instanceof Uint8ClampedArray)return no;if(n instanceof Int16Array)return bl;if(n instanceof Uint16Array)return wl;if(n instanceof Int32Array)return Al;if(n instanceof Uint32Array)return vl;if(n instanceof Float32Array)return Sl;throw new Error("unsupported typed array type")}function fS(n){if(n===Int8Array)return yl;if(n===Uint8Array||n===Uint8ClampedArray)return no;if(n===Int16Array)return bl;if(n===Uint16Array)return wl;if(n===Int32Array)return Al;if(n===Uint32Array)return vl;if(n===Float32Array)return Sl;throw new Error("unsupported typed array type")}function hS(n){const e=$0[n];if(!e)throw new Error("unknown gl type");return e}const tc=typeof SharedArrayBuffer<"u"?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};function dS(...n){console.error(...n)}function ep(...n){console.warn(...n)}function pS(n,e){return typeof WebGLBuffer<"u"&&e instanceof WebGLBuffer}function tp(n,e){return typeof WebGLRenderbuffer<"u"&&e instanceof WebGLRenderbuffer}function nc(n,e){return typeof WebGLTexture<"u"&&e instanceof WebGLTexture}function mS(n,e){return typeof WebGLSampler<"u"&&e instanceof WebGLSampler}const np=35044,Ut=34962,gS=34963,xS=34660,yS=5120,bS=5121,wS=5122,AS=5123,vS=5124,SS=5125,ES=5126,rp={attribPrefix:""};function ip(n,e,t,r,i){n.bindBuffer(e,t),n.bufferData(e,r,i||np)}function sp(n,e,t,r){if(pS(n,e))return e;t=t||Ut;const i=n.createBuffer();return ip(n,t,i,e,r),i}function op(n){return n==="indices"}function CS(n){return n instanceof Int8Array||n instanceof Uint8Array}function DS(n){return n===Int8Array||n===Uint8Array}function IS(n){return n.length?n:n.data}const TS=/coord|texture/i,BS=/color|colour/i;function ap(n,e){let t;if(TS.test(n)?t=2:BS.test(n)?t=4:t=3,e%t>0)throw new Error(`Can not guess numComponents for attribute '${n}'. Tried ${t} but ${e} values is not evenly divisible by ${t}. You should specify it.`);return t}function kS(n,e){return n.numComponents||n.size||ap(e,IS(n).length)}function Cl(n,e){if(tc(n))return n;if(tc(n.data))return n.data;Array.isArray(n)&&(n={data:n});let t=n.type;return t||(op(e)?t=Uint16Array:t=Float32Array),new t(n.data)}function FS(n,e){const t={};return Object.keys(e).forEach(function(r){if(!op(r)){const i=e[r],s=i.attrib||i.name||i.attribName||rp.attribPrefix+r;if(i.value){if(!Array.isArray(i.value)&&!tc(i.value))throw new Error("array.value is not array or typedarray");t[s]={value:i.value}}else{let o,a,c,u;if(i.buffer&&i.buffer instanceof WebGLBuffer)o=i.buffer,u=i.numComponents||i.size,a=i.type,c=i.normalize;else if(typeof i=="number"||typeof i.data=="number"){const l=i.data||i,f=i.type||Float32Array,d=l*f.BYTES_PER_ELEMENT;a=fS(f),c=i.normalize!==void 0?i.normalize:DS(f),u=i.numComponents||i.size||ap(r,l),o=n.createBuffer(),n.bindBuffer(Ut,o),n.bufferData(Ut,d,i.drawType||np)}else{const l=Cl(i,r);o=sp(n,l,void 0,i.drawType),a=El(l),c=i.normalize!==void 0?i.normalize:CS(l),u=kS(i,r)}t[s]={buffer:o,numComponents:u,type:a,normalize:c,stride:i.stride||0,offset:i.offset||0,divisor:i.divisor===void 0?void 0:i.divisor,drawType:i.drawType}}}}),n.bindBuffer(Ut,null),t}function PS(n,e,t,r){t=Cl(t),r!==void 0?(n.bindBuffer(Ut,e.buffer),n.bufferSubData(Ut,r,t)):ip(n,Ut,e.buffer,t,e.drawType)}function MS(n,e){return e===yS||e===bS?1:e===wS||e===AS?2:e===vS||e===SS||e===ES?4:0}const Dl=["position","positions","a_position"];function RS(n,e){let t,r;for(r=0;r<Dl.length&&(t=Dl[r],!(t in e||(t=rp.attribPrefix+t,t in e)));++r);r===Dl.length&&(t=Object.keys(e)[0]);const i=e[t];if(!i.buffer)return 1;n.bindBuffer(Ut,i.buffer);const s=n.getBufferParameter(Ut,xS);n.bindBuffer(Ut,null);const o=MS(n,i.type),a=s/o,c=i.numComponents||i.size,u=a/c;if(u%1!==0)throw new Error(`numComponents ${c} not correct for length ${length}`);return u}function OS(n,e,t){const r=FS(n,e),i=Object.assign({},t||{});i.attribs=Object.assign({},t?t.attribs:{},r);const s=e.indices;if(s){const o=Cl(s,"indices");i.indices=sp(n,o,gS),i.numElements=o.length,i.elementType=El(o)}else i.numElements||(i.numElements=RS(n,i.attribs));return i}function pi(n){return!!n.texStorage2D}const Il=function(){const n={},e={};function t(r){const i=r.constructor.name;if(!n[i]){for(const s in r)if(typeof r[s]=="number"){const o=e[r[s]];e[r[s]]=o?`${o} | ${s}`:s}n[i]=!0}}return function(i,s){return t(i),e[s]||(typeof s=="number"?`0x${s.toString(16)}`:s)}}(),Tn={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},mi=tc,cp=function(){let n;return function(){return n=n||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),n}}(),up=6406,Gt=6407,ye=6408,lp=6409,fp=6410,ro=6402,hp=34041,rc=33071,NS=9728,LS=9729,an=3553,cn=34067,Bn=32879,kn=35866,ic=34069,zS=34070,US=34071,GS=34072,HS=34073,VS=34074,Tl=10241,Bl=10240,sc=10242,oc=10243,dp=32882,_S=33082,jS=33083,WS=33084,QS=33085,kl=3317,pp=3314,mp=32878,gp=3316,xp=3315,yp=32877,qS=37443,YS=37441,XS=37440,KS=33321,ZS=36756,JS=33325,$S=33326,eE=33330,tE=33329,nE=33338,rE=33337,iE=33340,sE=33339,oE=33323,aE=36757,cE=33327,uE=33328,lE=33336,fE=33335,hE=33332,dE=33331,pE=33334,mE=33333,gE=32849,xE=35905,yE=36194,bE=36758,wE=35898,AE=35901,vE=34843,SE=34837,EE=36221,CE=36239,DE=36215,IE=36233,TE=36209,BE=36227,kE=32856,FE=35907,PE=36759,ME=32855,RE=32854,OE=32857,NE=34842,LE=34836,zE=36220,UE=36238,GE=36975,HE=36214,VE=36232,_E=36226,jE=36208,WE=33189,QE=33190,qE=36012,YE=36013,XE=35056,Fn=5120,be=5121,ac=5122,gi=5123,cc=5124,yr=5125,Ve=5126,bp=32819,wp=32820,Ap=33635,Dt=5131,io=36193,Fl=33640,KE=35899,ZE=35902,JE=36269,$E=34042,uc=33319,xi=33320,lc=6403,yi=36244,bi=36248,br=36249;let Pl;function fc(n){if(!Pl){const e={};e[up]={textureFormat:up,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[be,Dt,io,Ve]},e[lp]={textureFormat:lp,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[be,Dt,io,Ve]},e[fp]={textureFormat:fp,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[be,Dt,io,Ve]},e[Gt]={textureFormat:Gt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[be,Dt,io,Ve,Ap]},e[ye]={textureFormat:ye,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[be,Dt,io,Ve,bp,wp]},e[ro]={textureFormat:ro,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[yr,gi]},e[KS]={textureFormat:lc,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[be]},e[ZS]={textureFormat:lc,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[Fn]},e[JS]={textureFormat:lc,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[Ve,Dt]},e[$S]={textureFormat:lc,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[Ve]},e[eE]={textureFormat:yi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[be]},e[tE]={textureFormat:yi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Fn]},e[hE]={textureFormat:yi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[gi]},e[dE]={textureFormat:yi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[ac]},e[pE]={textureFormat:yi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[yr]},e[mE]={textureFormat:yi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[cc]},e[oE]={textureFormat:uc,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[be]},e[aE]={textureFormat:uc,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[Fn]},e[cE]={textureFormat:uc,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[Ve,Dt]},e[uE]={textureFormat:uc,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[Ve]},e[lE]={textureFormat:xi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[be]},e[fE]={textureFormat:xi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Fn]},e[nE]={textureFormat:xi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[gi]},e[rE]={textureFormat:xi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ac]},e[iE]={textureFormat:xi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[yr]},e[sE]={textureFormat:xi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[cc]},e[gE]={textureFormat:Gt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[be]},e[xE]={textureFormat:Gt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[be]},e[yE]={textureFormat:Gt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[be,Ap]},e[bE]={textureFormat:Gt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Fn]},e[wE]={textureFormat:Gt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Ve,Dt,KE]},e[AE]={textureFormat:Gt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Ve,Dt,ZE]},e[vE]={textureFormat:Gt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[Ve,Dt]},e[SE]={textureFormat:Gt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Ve]},e[EE]={textureFormat:bi,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[be]},e[CE]={textureFormat:bi,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Fn]},e[DE]={textureFormat:bi,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[gi]},e[IE]={textureFormat:bi,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[ac]},e[TE]={textureFormat:bi,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[yr]},e[BE]={textureFormat:bi,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[cc]},e[kE]={textureFormat:ye,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[be]},e[FE]={textureFormat:ye,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[be]},e[PE]={textureFormat:ye,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[Fn]},e[ME]={textureFormat:ye,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[be,wp,Fl]},e[RE]={textureFormat:ye,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[be,bp]},e[OE]={textureFormat:ye,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Fl]},e[NE]={textureFormat:ye,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[Ve,Dt]},e[LE]={textureFormat:ye,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[Ve]},e[zE]={textureFormat:br,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[be]},e[UE]={textureFormat:br,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Fn]},e[GE]={textureFormat:br,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Fl]},e[HE]={textureFormat:br,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[gi]},e[VE]={textureFormat:br,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[ac]},e[_E]={textureFormat:br,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[cc]},e[jE]={textureFormat:br,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[yr]},e[WE]={textureFormat:ro,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[gi,yr]},e[QE]={textureFormat:ro,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[yr]},e[qE]={textureFormat:ro,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ve]},e[XE]={textureFormat:hp,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[$E]},e[YE]={textureFormat:hp,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[JE]},Object.keys(e).forEach(function(t){const r=e[t];r.bytesPerElementMap={},r.bytesPerElement.forEach(function(i,s){const o=r.type[s];r.bytesPerElementMap[o]=i})}),Pl=e}return Pl[n]}function eC(n,e){const t=fc(n);if(!t)throw"unknown internal format";const r=t.bytesPerElementMap[e];if(r===void 0)throw"unknown internal format";return r}function wi(n){const e=fc(n);if(!e)throw"unknown internal format";return{format:e.textureFormat,type:e.type[0]}}function vp(n){return(n&n-1)===0}function tC(n,e,t,r){if(!pi(n))return vp(e)&&vp(t);const i=fc(r);if(!i)throw"unknown internal format";return i.colorRenderable&&i.textureFilterable}function nC(n){const e=fc(n);if(!e)throw"unknown internal format";return e.textureFilterable}function Sp(n,e,t){return mi(e)?El(e):t||be}function hc(n,e,t,r,i){if(i%1!==0)throw"can't guess dimensions";if(!t&&!r){const s=Math.sqrt(i/(e===cn?6:1));s%1===0?(t=s,r=s):(t=i,r=1)}else if(r){if(!t&&(t=i/r,t%1))throw"can't guess dimensions"}else if(r=i/t,r%1)throw"can't guess dimensions";return{width:t,height:r}}function Ai(n,e){e.colorspaceConversion!==void 0&&n.pixelStorei(qS,e.colorspaceConversion),e.premultiplyAlpha!==void 0&&n.pixelStorei(YS,e.premultiplyAlpha),e.flipY!==void 0&&n.pixelStorei(XS,e.flipY)}function Ep(n){n.pixelStorei(kl,4),pi(n)&&(n.pixelStorei(pp,0),n.pixelStorei(mp,0),n.pixelStorei(gp,0),n.pixelStorei(xp,0),n.pixelStorei(yp,0))}function rC(n,e,t,r){r.minMag&&(t.call(n,e,Tl,r.minMag),t.call(n,e,Bl,r.minMag)),r.min&&t.call(n,e,Tl,r.min),r.mag&&t.call(n,e,Bl,r.mag),r.wrap&&(t.call(n,e,sc,r.wrap),t.call(n,e,oc,r.wrap),(e===Bn||mS(n,e))&&t.call(n,e,dp,r.wrap)),r.wrapR&&t.call(n,e,dp,r.wrapR),r.wrapS&&t.call(n,e,sc,r.wrapS),r.wrapT&&t.call(n,e,oc,r.wrapT),r.minLod&&t.call(n,e,_S,r.minLod),r.maxLod&&t.call(n,e,jS,r.maxLod),r.baseLevel&&t.call(n,e,WS,r.baseLevel),r.maxLevel&&t.call(n,e,QS,r.maxLevel)}function Cp(n,e,t){const r=t.target||an;n.bindTexture(r,e),rC(n,r,n.texParameteri,t)}function iC(n){return n=n||Tn.textureColor,mi(n)?n:new Uint8Array([n[0]*255,n[1]*255,n[2]*255,n[3]*255])}function Ml(n,e,t,r,i,s){t=t||Tn.textureOptions,s=s||ye;const o=t.target||an;if(r=r||t.width,i=i||t.height,n.bindTexture(o,e),tC(n,r,i,s))n.generateMipmap(o);else{const a=nC(s)?LS:NS;n.texParameteri(o,Tl,a),n.texParameteri(o,Bl,a),n.texParameteri(o,sc,rc),n.texParameteri(o,oc,rc)}}function so(n){return n.auto===!0||n.auto===void 0&&n.level===void 0}function Rl(n,e){return e=e||{},e.cubeFaceOrder||[ic,zS,US,GS,HS,VS]}function Ol(n,e){const r=Rl(n,e).map(function(i,s){return{face:i,ndx:s}});return r.sort(function(i,s){return i.face-s.face}),r}function Dp(n,e,t,r){r=r||Tn.textureOptions;const i=r.target||an,s=r.level||0;let o=t.width,a=t.height;const c=r.internalFormat||r.format||ye,u=wi(c),l=r.format||u.format,f=r.type||u.type;if(Ai(n,r),n.bindTexture(i,e),i===cn){const d=t.width,h=t.height;let p,m;if(d/6===h)p=h,m=[0,0,1,0,2,0,3,0,4,0,5,0];else if(h/6===d)p=d,m=[0,0,0,1,0,2,0,3,0,4,0,5];else if(d/3===h/2)p=d/3,m=[0,0,1,0,2,0,0,1,1,1,2,1];else if(d/2===h/3)p=d/2,m=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(t.src?t.src:t.nodeName);const g=cp();g?(g.canvas.width=p,g.canvas.height=p,o=p,a=p,Ol(n,r).forEach(function(x){const b=m[x.ndx*2+0]*p,w=m[x.ndx*2+1]*p;g.drawImage(t,b,w,p,p,0,0,p,p),n.texImage2D(x.face,s,c,l,f,g.canvas)}),g.canvas.width=1,g.canvas.height=1):typeof createImageBitmap<"u"&&(o=p,a=p,Ol(n,r).forEach(function(x){const b=m[x.ndx*2+0]*p,w=m[x.ndx*2+1]*p;n.texImage2D(x.face,s,c,p,p,0,l,f,null),createImageBitmap(t,b,w,p,p,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(A){Ai(n,r),n.bindTexture(i,e),n.texImage2D(x.face,s,c,l,f,A),so(r)&&Ml(n,e,r,o,a,c)})}))}else if(i===Bn||i===kn){const d=Math.min(t.width,t.height),h=Math.max(t.width,t.height),p=h/d;if(p%1!==0)throw"can not compute 3D dimensions of element";const m=t.width===h?1:0,g=t.height===h?1:0;n.pixelStorei(kl,1),n.pixelStorei(pp,t.width),n.pixelStorei(mp,0),n.pixelStorei(yp,0),n.texImage3D(i,s,c,d,d,d,0,l,f,null);for(let x=0;x<p;++x){const b=x*d*m,w=x*d*g;n.pixelStorei(gp,b),n.pixelStorei(xp,w),n.texSubImage3D(i,s,0,0,x,d,d,1,l,f,t)}Ep(n)}else n.texImage2D(i,s,c,l,f,t);so(r)&&Ml(n,e,r,o,a,c),Cp(n,e,r)}function oo(){}function sC(n){if(typeof document<"u"){const e=document.createElement("a");return e.href=n,e.hostname===location.hostname&&e.port===location.port&&e.protocol===location.protocol}else{const e=new URL(location.href).origin;return new URL(n,location.href).origin===e}}function oC(n,e){return e===void 0&&!sC(n)?"anonymous":e}function aC(n,e,t){t=t||oo;let r;if(e=e!==void 0?e:Tn.crossOrigin,e=oC(n,e),typeof Image<"u"){r=new Image,e!==void 0&&(r.crossOrigin=e);const i=function(){r.removeEventListener("error",s),r.removeEventListener("load",o),r=null},s=function(){const c="couldn't load image: "+n;dS(c),t(c,r),i()},o=function(){t(null,r),i()};return r.addEventListener("error",s),r.addEventListener("load",o),r.src=n,r}else if(typeof ImageBitmap<"u"){let i,s;const o=function(){t(i,s)},a={};e&&(a.mode="cors"),fetch(n,a).then(function(c){if(!c.ok)throw c;return c.blob()}).then(function(c){return createImageBitmap(c,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(c){s=c,setTimeout(o)}).catch(function(c){i=c,setTimeout(o)}),r=null}return r}function Ip(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof ImageData<"u"&&n instanceof ImageData||typeof HTMLElement<"u"&&n instanceof HTMLElement}function Nl(n,e,t){return Ip(n)?(setTimeout(function(){t(null,n)}),n):aC(n,e,t)}function Ll(n,e,t){t=t||Tn.textureOptions;const r=t.target||an;if(n.bindTexture(r,e),t.color===!1)return;const i=iC(t.color);if(r===cn)for(let s=0;s<6;++s)n.texImage2D(ic+s,0,ye,1,1,0,ye,be,i);else r===Bn||r===kn?n.texImage3D(r,0,ye,1,1,1,0,ye,be,i):n.texImage2D(r,0,ye,1,1,0,ye,be,i)}function cC(n,e,t,r){return r=r||oo,t=t||Tn.textureOptions,Ll(n,e,t),t=Object.assign({},t),Nl(t.src,t.crossOrigin,function(s,o){s?r(s,e,o):(Dp(n,e,o,t),r(null,e,o))})}function uC(n,e,t,r){r=r||oo;const i=t.src;if(i.length!==6)throw"there must be 6 urls for a cubemap";const s=t.level||0,o=t.internalFormat||t.format||ye,a=wi(o),c=t.format||a.format,u=t.type||be,l=t.target||an;if(l!==cn)throw"target must be TEXTURE_CUBE_MAP";Ll(n,e,t),t=Object.assign({},t);let f=6;const d=[],h=Rl(n,t);let p;function m(g){return function(x,b){--f,x?d.push(x):b.width!==b.height?d.push("cubemap face img is not a square: "+b.src):(Ai(n,t),n.bindTexture(l,e),f===5?Rl().forEach(function(w){n.texImage2D(w,s,o,c,u,b)}):n.texImage2D(g,s,o,c,u,b),so(t)&&n.generateMipmap(l)),f===0&&r(d.length?d:void 0,e,p)}}p=i.map(function(g,x){return Nl(g,t.crossOrigin,m(h[x]))})}function lC(n,e,t,r){r=r||oo;const i=t.src,s=t.internalFormat||t.format||ye,o=wi(s),a=t.format||o.format,c=t.type||be,u=t.target||kn;if(u!==Bn&&u!==kn)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";Ll(n,e,t),t=Object.assign({},t);let l=i.length;const f=[];let d;const h=t.level||0;let p=t.width,m=t.height;const g=i.length;let x=!0;function b(w){return function(A,S){if(--l,A)f.push(A);else{if(Ai(n,t),n.bindTexture(u,e),x){x=!1,p=t.width||S.width,m=t.height||S.height,n.texImage3D(u,h,s,p,m,g,0,a,c,null);for(let C=0;C<g;++C)n.texSubImage3D(u,h,0,0,C,p,m,1,a,c,S)}else{let C=S,v;(S.width!==p||S.height!==m)&&(v=cp(),C=v.canvas,v.canvas.width=p,v.canvas.height=m,v.drawImage(S,0,0,p,m)),n.texSubImage3D(u,h,0,0,w,p,m,1,a,c,C),v&&C===v.canvas&&(v.canvas.width=0,v.canvas.height=0)}so(t)&&n.generateMipmap(u)}l===0&&r(f.length?f:void 0,e,d)}}d=i.map(function(w,A){return Nl(w,t.crossOrigin,b(A))})}function Tp(n,e,t,r){r=r||Tn.textureOptions;const i=r.target||an;n.bindTexture(i,e);let s=r.width,o=r.height,a=r.depth;const c=r.level||0,u=r.internalFormat||r.format||ye,l=wi(u),f=r.format||l.format,d=r.type||Sp(n,t,l.type);if(mi(t))t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));else{const g=hS(d);t=new g(t)}const h=eC(u,d),p=t.byteLength/h;if(p%1)throw"length wrong size for format: "+Il(n,f);let m;if(i===Bn||i===kn)if(!s&&!o&&!a){const g=Math.cbrt(p);if(g%1!==0)throw"can't guess cube size of array of numElements: "+p;s=g,o=g,a=g}else s&&(!o||!a)?(m=hc(n,i,o,a,p/s),o=m.width,a=m.height):o&&(!s||!a)?(m=hc(n,i,s,a,p/o),s=m.width,a=m.height):(m=hc(n,i,s,o,p/a),s=m.width,o=m.height);else m=hc(n,i,s,o,p),s=m.width,o=m.height;if(Ep(n),n.pixelStorei(kl,r.unpackAlignment||1),Ai(n,r),i===cn){const g=h/t.BYTES_PER_ELEMENT,x=p/6*g;Ol(n,r).forEach(b=>{const w=x*b.ndx,A=t.subarray(w,w+x);n.texImage2D(b.face,c,u,s,o,0,f,d,A)})}else i===Bn||i===kn?n.texImage3D(i,c,u,s,o,a,0,f,d,t):n.texImage2D(i,c,u,s,o,0,f,d,t);return{width:s,height:o,depth:a,type:d}}function fC(n,e,t){const r=t.target||an;n.bindTexture(r,e);const i=t.level||0,s=t.internalFormat||t.format||ye,o=wi(s),a=t.format||o.format,c=t.type||o.type;if(Ai(n,t),r===cn)for(let u=0;u<6;++u)n.texImage2D(ic+u,i,s,t.width,t.height,0,a,c,null);else r===Bn||r===kn?n.texImage3D(r,i,s,t.width,t.height,t.depth,0,a,c,null):n.texImage2D(r,i,s,t.width,t.height,0,a,c,null)}function ao(n,e,t){t=t||oo,e=e||Tn.textureOptions;const r=n.createTexture(),i=e.target||an;let s=e.width||1,o=e.height||1;const a=e.internalFormat||ye;n.bindTexture(i,r),i===cn&&(n.texParameteri(i,sc,rc),n.texParameteri(i,oc,rc));let c=e.src;if(c)if(typeof c=="function"&&(c=c(n,e)),typeof c=="string")cC(n,r,e,t);else if(mi(c)||Array.isArray(c)&&(typeof c[0]=="number"||Array.isArray(c[0])||mi(c[0]))){const u=Tp(n,r,c,e);s=u.width,o=u.height}else Array.isArray(c)&&(typeof c[0]=="string"||Ip(c[0]))?i===cn?uC(n,r,e,t):lC(n,r,e,t):(Dp(n,r,c,e),s=c.width,o=c.height);else fC(n,r,e);return so(e)&&Ml(n,r,e,s,o,a),Cp(n,r,e),r}function hC(n,e,t,r,i,s){r=r||t.width,i=i||t.height,s=s||t.depth;const o=t.target||an;n.bindTexture(o,e);const a=t.level||0,c=t.internalFormat||t.format||ye,u=wi(c),l=t.format||u.format;let f;const d=t.src;if(d&&(mi(d)||Array.isArray(d)&&typeof d[0]=="number")?f=t.type||Sp(n,d,u.type):f=t.type||u.type,o===cn)for(let h=0;h<6;++h)n.texImage2D(ic+h,a,c,r,i,0,l,f,null);else o===Bn||o===kn?n.texImage3D(o,a,c,r,i,s,0,l,f,null):n.texImage2D(o,a,c,r,i,0,l,f,null)}const dC=ep,dc=33984,pC=35048,pc=34962,mC=34963,zl=35345,Bp=35718,gC=35721,xC=35971,yC=35382,bC=35396,wC=35398,AC=35392,vC=35395,mc=5126,kp=35664,Fp=35665,Pp=35666,Ul=5124,Mp=35667,Rp=35668,Op=35669,Np=35670,Lp=35671,zp=35672,Up=35673,Gp=35674,Hp=35675,Vp=35676,SC=35678,EC=35680,CC=35679,DC=35682,IC=35685,TC=35686,BC=35687,kC=35688,FC=35689,PC=35690,MC=36289,RC=36292,OC=36293,Gl=5125,_p=36294,jp=36295,Wp=36296,NC=36298,LC=36299,zC=36300,UC=36303,GC=36306,HC=36307,VC=36308,_C=36311,gc=3553,xc=34067,Hl=32879,yc=35866,K={};function Qp(n,e){return K[e].bindPoint}function jC(n,e){return function(t){n.uniform1f(e,t)}}function WC(n,e){return function(t){n.uniform1fv(e,t)}}function QC(n,e){return function(t){n.uniform2fv(e,t)}}function qC(n,e){return function(t){n.uniform3fv(e,t)}}function YC(n,e){return function(t){n.uniform4fv(e,t)}}function qp(n,e){return function(t){n.uniform1i(e,t)}}function Yp(n,e){return function(t){n.uniform1iv(e,t)}}function Xp(n,e){return function(t){n.uniform2iv(e,t)}}function Kp(n,e){return function(t){n.uniform3iv(e,t)}}function Zp(n,e){return function(t){n.uniform4iv(e,t)}}function XC(n,e){return function(t){n.uniform1ui(e,t)}}function KC(n,e){return function(t){n.uniform1uiv(e,t)}}function ZC(n,e){return function(t){n.uniform2uiv(e,t)}}function JC(n,e){return function(t){n.uniform3uiv(e,t)}}function $C(n,e){return function(t){n.uniform4uiv(e,t)}}function e3(n,e){return function(t){n.uniformMatrix2fv(e,!1,t)}}function t3(n,e){return function(t){n.uniformMatrix3fv(e,!1,t)}}function n3(n,e){return function(t){n.uniformMatrix4fv(e,!1,t)}}function r3(n,e){return function(t){n.uniformMatrix2x3fv(e,!1,t)}}function i3(n,e){return function(t){n.uniformMatrix3x2fv(e,!1,t)}}function s3(n,e){return function(t){n.uniformMatrix2x4fv(e,!1,t)}}function o3(n,e){return function(t){n.uniformMatrix4x2fv(e,!1,t)}}function a3(n,e){return function(t){n.uniformMatrix3x4fv(e,!1,t)}}function c3(n,e){return function(t){n.uniformMatrix4x3fv(e,!1,t)}}function Ze(n,e,t,r){const i=Qp(n,e);return pi(n)?function(s){let o,a;nc(n,s)?(o=s,a=null):(o=s.texture,a=s.sampler),n.uniform1i(r,t),n.activeTexture(dc+t),n.bindTexture(i,o),n.bindSampler(t,a)}:function(s){n.uniform1i(r,t),n.activeTexture(dc+t),n.bindTexture(i,s)}}function Je(n,e,t,r,i){const s=Qp(n,e),o=new Int32Array(i);for(let a=0;a<i;++a)o[a]=t+a;return pi(n)?function(a){n.uniform1iv(r,o),a.forEach(function(c,u){n.activeTexture(dc+o[u]);let l,f;nc(n,c)?(l=c,f=null):(l=c.texture,f=c.sampler),n.bindSampler(t,f),n.bindTexture(s,l)})}:function(a){n.uniform1iv(r,o),a.forEach(function(c,u){n.activeTexture(dc+o[u]),n.bindTexture(s,c)})}}K[mc]={Type:Float32Array,size:4,setter:jC,arraySetter:WC},K[kp]={Type:Float32Array,size:8,setter:QC,cols:2},K[Fp]={Type:Float32Array,size:12,setter:qC,cols:3},K[Pp]={Type:Float32Array,size:16,setter:YC,cols:4},K[Ul]={Type:Int32Array,size:4,setter:qp,arraySetter:Yp},K[Mp]={Type:Int32Array,size:8,setter:Xp,cols:2},K[Rp]={Type:Int32Array,size:12,setter:Kp,cols:3},K[Op]={Type:Int32Array,size:16,setter:Zp,cols:4},K[Gl]={Type:Uint32Array,size:4,setter:XC,arraySetter:KC},K[_p]={Type:Uint32Array,size:8,setter:ZC,cols:2},K[jp]={Type:Uint32Array,size:12,setter:JC,cols:3},K[Wp]={Type:Uint32Array,size:16,setter:$C,cols:4},K[Np]={Type:Uint32Array,size:4,setter:qp,arraySetter:Yp},K[Lp]={Type:Uint32Array,size:8,setter:Xp,cols:2},K[zp]={Type:Uint32Array,size:12,setter:Kp,cols:3},K[Up]={Type:Uint32Array,size:16,setter:Zp,cols:4},K[Gp]={Type:Float32Array,size:32,setter:e3,rows:2,cols:2},K[Hp]={Type:Float32Array,size:48,setter:t3,rows:3,cols:3},K[Vp]={Type:Float32Array,size:64,setter:n3,rows:4,cols:4},K[IC]={Type:Float32Array,size:32,setter:r3,rows:2,cols:3},K[TC]={Type:Float32Array,size:32,setter:s3,rows:2,cols:4},K[BC]={Type:Float32Array,size:48,setter:i3,rows:3,cols:2},K[kC]={Type:Float32Array,size:48,setter:a3,rows:3,cols:4},K[FC]={Type:Float32Array,size:64,setter:o3,rows:4,cols:2},K[PC]={Type:Float32Array,size:64,setter:c3,rows:4,cols:3},K[SC]={Type:null,size:0,setter:Ze,arraySetter:Je,bindPoint:gc},K[EC]={Type:null,size:0,setter:Ze,arraySetter:Je,bindPoint:xc},K[CC]={Type:null,size:0,setter:Ze,arraySetter:Je,bindPoint:Hl},K[DC]={Type:null,size:0,setter:Ze,arraySetter:Je,bindPoint:gc},K[MC]={Type:null,size:0,setter:Ze,arraySetter:Je,bindPoint:yc},K[RC]={Type:null,size:0,setter:Ze,arraySetter:Je,bindPoint:yc},K[OC]={Type:null,size:0,setter:Ze,arraySetter:Je,bindPoint:xc},K[NC]={Type:null,size:0,setter:Ze,arraySetter:Je,bindPoint:gc},K[LC]={Type:null,size:0,setter:Ze,arraySetter:Je,bindPoint:Hl},K[zC]={Type:null,size:0,setter:Ze,arraySetter:Je,bindPoint:xc},K[UC]={Type:null,size:0,setter:Ze,arraySetter:Je,bindPoint:yc},K[GC]={Type:null,size:0,setter:Ze,arraySetter:Je,bindPoint:gc},K[HC]={Type:null,size:0,setter:Ze,arraySetter:Je,bindPoint:Hl},K[VC]={Type:null,size:0,setter:Ze,arraySetter:Je,bindPoint:xc},K[_C]={Type:null,size:0,setter:Ze,arraySetter:Je,bindPoint:yc};function bc(n,e){return function(t){if(t.value)switch(n.disableVertexAttribArray(e),t.value.length){case 4:n.vertexAttrib4fv(e,t.value);break;case 3:n.vertexAttrib3fv(e,t.value);break;case 2:n.vertexAttrib2fv(e,t.value);break;case 1:n.vertexAttrib1fv(e,t.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else n.bindBuffer(pc,t.buffer),n.enableVertexAttribArray(e),n.vertexAttribPointer(e,t.numComponents||t.size,t.type||mc,t.normalize||!1,t.stride||0,t.offset||0),t.divisor!==void 0&&n.vertexAttribDivisor(e,t.divisor)}}function Pn(n,e){return function(t){if(t.value)if(n.disableVertexAttribArray(e),t.value.length===4)n.vertexAttrib4iv(e,t.value);else throw new Error("The length of an integer constant value must be 4!");else n.bindBuffer(pc,t.buffer),n.enableVertexAttribArray(e),n.vertexAttribIPointer(e,t.numComponents||t.size,t.type||Ul,t.stride||0,t.offset||0),t.divisor!==void 0&&n.vertexAttribDivisor(e,t.divisor)}}function wc(n,e){return function(t){if(t.value)if(n.disableVertexAttribArray(e),t.value.length===4)n.vertexAttrib4uiv(e,t.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else n.bindBuffer(pc,t.buffer),n.enableVertexAttribArray(e),n.vertexAttribIPointer(e,t.numComponents||t.size,t.type||Gl,t.stride||0,t.offset||0),t.divisor!==void 0&&n.vertexAttribDivisor(e,t.divisor)}}function Vl(n,e,t){const r=t.size,i=t.count;return function(s){n.bindBuffer(pc,s.buffer);const o=s.size||s.numComponents||r,a=o/i,c=s.type||mc,l=K[c].size*o,f=s.normalize||!1,d=s.offset||0,h=l/i;for(let p=0;p<i;++p)n.enableVertexAttribArray(e+p),n.vertexAttribPointer(e+p,a,c,f,l,d+h*p),s.divisor!==void 0&&n.vertexAttribDivisor(e+p,s.divisor)}}const Ce={};Ce[mc]={size:4,setter:bc},Ce[kp]={size:8,setter:bc},Ce[Fp]={size:12,setter:bc},Ce[Pp]={size:16,setter:bc},Ce[Ul]={size:4,setter:Pn},Ce[Mp]={size:8,setter:Pn},Ce[Rp]={size:12,setter:Pn},Ce[Op]={size:16,setter:Pn},Ce[Gl]={size:4,setter:wc},Ce[_p]={size:8,setter:wc},Ce[jp]={size:12,setter:wc},Ce[Wp]={size:16,setter:wc},Ce[Np]={size:4,setter:Pn},Ce[Lp]={size:8,setter:Pn},Ce[zp]={size:12,setter:Pn},Ce[Up]={size:16,setter:Pn},Ce[Gp]={size:4,setter:Vl,count:2},Ce[Hp]={size:9,setter:Vl,count:3},Ce[Vp]={size:16,setter:Vl,count:4};function Jp(n){const e=n.name;return e.startsWith("gl_")||e.startsWith("webgl_")}const u3=/(\.|\[|]|\w+)/g,l3=n=>n>="0"&&n<="9";function $p(n,e,t,r){const i=n.split(u3).filter(a=>a!=="");let s=0,o="";for(;;){const a=i[s++];o+=a;const c=l3(a[0]),u=c?parseInt(a):a;if(c&&(o+=i[s++]),s===i.length){t[u]=e;break}else{const f=i[s++],d=f==="[",h=t[u]||(d?[]:{});t[u]=h,t=h,r[o]=r[o]||function(p){return function(m){im(p,m)}}(h),o+=f}}}function f3(n,e){let t=0;function r(a,c,u){const l=c.name.endsWith("[0]"),f=c.type,d=K[f];if(!d)throw new Error(`unknown type: 0x${f.toString(16)}`);let h;if(d.bindPoint){const p=t;t+=c.size,l?h=d.arraySetter(n,f,p,u,c.size):h=d.setter(n,f,p,u,c.size)}else d.arraySetter&&l?h=d.arraySetter(n,u):h=d.setter(n,u);return h.location=u,h}const i={},s={},o=n.getProgramParameter(e,Bp);for(let a=0;a<o;++a){const c=n.getActiveUniform(e,a);if(Jp(c))continue;let u=c.name;u.endsWith("[0]")&&(u=u.substr(0,u.length-3));const l=n.getUniformLocation(e,c.name);if(l){const f=r(e,c,l);i[u]=f,$p(u,f,s,i)}}return i}function h3(n,e){const t={},r=n.getProgramParameter(e,xC);for(let i=0;i<r;++i){const s=n.getTransformFeedbackVarying(e,i);t[s.name]={index:i,type:s.type,size:s.size}}return t}function d3(n,e){const t=n.getProgramParameter(e,Bp),r=[],i=[];for(let a=0;a<t;++a){i.push(a),r.push({});const c=n.getActiveUniform(e,a);r[a].name=c.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(a){const c=a[0],u=a[1];n.getActiveUniforms(e,i,n[c]).forEach(function(l,f){r[f][u]=l})});const s={},o=n.getProgramParameter(e,yC);for(let a=0;a<o;++a){const c=n.getActiveUniformBlockName(e,a),u={index:n.getUniformBlockIndex(e,c),usedByVertexShader:n.getActiveUniformBlockParameter(e,a,bC),usedByFragmentShader:n.getActiveUniformBlockParameter(e,a,wC),size:n.getActiveUniformBlockParameter(e,a,AC),uniformIndices:n.getActiveUniformBlockParameter(e,a,vC)};u.used=u.usedByVertexShader||u.usedByFragmentShader,s[c]=u}return{blockSpecs:s,uniformData:r}}const em=/\[\d+\]\.$/,p3=(n,e)=>((n+(e-1))/e|0)*e;function m3(n,e,t,r){if(e||t){r=r||1;const s=n.length/4;return function(o){let a=0,c=0;for(let u=0;u<s;++u){for(let l=0;l<r;++l)n[a++]=o[c++];a+=4-r}}}else return function(i){i.length?n.set(i):n[0]=i}}function g3(n,e,t,r){const i=t.blockSpecs,s=t.uniformData,o=i[r];if(!o)return dC("no uniform block object named:",r),{name:r,uniforms:{}};const a=new ArrayBuffer(o.size),c=n.createBuffer(),u=o.index;n.bindBuffer(zl,c),n.uniformBlockBinding(e,o.index,u);let l=r+".";em.test(l)&&(l=l.replace(em,"."));const f={},d={},h={};return o.uniformIndices.forEach(function(p){const m=s[p];let g=m.name;g.startsWith(l)&&(g=g.substr(l.length));const x=g.endsWith("[0]");x&&(g=g.substr(0,g.length-3));const b=K[m.type],w=b.Type,A=x?p3(b.size,16)*m.size:b.size*m.size,S=new w(a,m.offset,A/w.BYTES_PER_ELEMENT);f[g]=S;const C=m3(S,x,b.rows,b.cols);d[g]=C,$p(g,C,h,d)}),{name:r,array:a,asFloat:new Float32Array(a),buffer:c,uniforms:f,setters:d}}function tm(n,e,t){return g3(n,e.program,e.uniformBlockSpec,t)}function nm(n,e,t){const i=(e.uniformBlockSpec||e).blockSpecs[t.name];if(i){const s=i.index;return n.bindBufferRange(zl,s,t.buffer,t.offset||0,t.array.byteLength),!0}return!1}function rm(n,e,t){nm(n,e,t)&&n.bufferData(zl,t.array,pC)}function co(n,e){const t=n.setters;for(const r in e){const i=t[r];if(i){const s=e[r];i(s)}}}function im(n,e){for(const t in e){const r=n[t];typeof r=="function"?r(e[t]):im(n[t],e[t])}}function wr(n,...e){const t=n.uniformSetters||n,r=e.length;for(let i=0;i<r;++i){const s=e[i];if(Array.isArray(s)){const o=s.length;for(let a=0;a<o;++a)wr(t,s[a])}else for(const o in s){const a=t[o];a&&a(s[o])}}}function x3(n,e){const t={},r=n.getProgramParameter(e,gC);for(let i=0;i<r;++i){const s=n.getActiveAttrib(e,i);if(Jp(s))continue;const o=n.getAttribLocation(e,s.name),a=Ce[s.type],c=a.setter(n,o,a);c.location=o,t[s.name]=c}return t}function y3(n,e){for(const t in e){const r=n[t];r&&r(e[t])}}function Ar(n,e,t){t.vertexArrayObject?n.bindVertexArray(t.vertexArrayObject):(y3(e.attribSetters||e,t.attribs),t.indices&&n.bindBuffer(mC,t.indices))}function b3(n,e){const t=f3(n,e),r=x3(n,e),i={program:e,uniformSetters:t,attribSetters:r};return pi(n)&&(i.uniformBlockSpec=d3(n,e),i.transformFeedbackInfo=h3(n,e)),i}const w3=4,sm=5123;function Ac(n,e,t,r,i,s){t=t===void 0?w3:t;const o=e.indices,a=e.elementType,c=r===void 0?e.numElements:r;i=i===void 0?0:i,a||o?s!==void 0?n.drawElementsInstanced(t,c,a===void 0?sm:e.elementType,i,s):n.drawElements(t,c,a===void 0?sm:e.elementType,i):s!==void 0?n.drawArraysInstanced(t,i,c,s):n.drawArrays(t,i,c)}const A3=36160,vr=36161,v3=3553,S3=5121,E3=6402,C3=6408,D3=33190,I3=36012,T3=35056,B3=36013,k3=32854,F3=32855,P3=36194,om=33189,am=6401,cm=36168,_l=34041,jl=36064,vc=36096,um=36128,Wl=33306,Ql=33071,ql=9729,lm=[{format:C3,type:S3,min:ql,wrap:Ql},{format:_l}],It={};It[_l]=Wl,It[am]=um,It[cm]=um,It[E3]=vc,It[om]=vc,It[D3]=vc,It[I3]=vc,It[T3]=Wl,It[B3]=Wl;function M3(n,e){return It[n]||It[e]}const Mn={};Mn[k3]=!0,Mn[F3]=!0,Mn[P3]=!0,Mn[_l]=!0,Mn[om]=!0,Mn[am]=!0,Mn[cm]=!0;function R3(n){return Mn[n]}const O3=32;function N3(n){return n>=jl&&n<jl+O3}function fm(n,e,t,r){const i=A3,s=n.createFramebuffer();n.bindFramebuffer(i,s),t=t||n.drawingBufferWidth,r=r||n.drawingBufferHeight,e=e||lm;const o=[],a={framebuffer:s,attachments:[],width:t,height:r};return e.forEach(function(c,u){let l=c.attachment;const f=c.samples,d=c.format;let h=c.attachmentPoint||M3(d,c.internalFormat);if(h||(h=jl+u),N3(h)&&o.push(h),!l)if(f!==void 0||R3(d))l=n.createRenderbuffer(),n.bindRenderbuffer(vr,l),f>1?n.renderbufferStorageMultisample(vr,f,d,t,r):n.renderbufferStorage(vr,d,t,r);else{const p=Object.assign({},c);p.width=t,p.height=r,p.auto===void 0&&(p.auto=!1,p.min=p.min||p.minMag||ql,p.mag=p.mag||p.minMag||ql,p.wrapS=p.wrapS||p.wrap||Ql,p.wrapT=p.wrapT||p.wrap||Ql),l=ao(n,p)}if(tp(n,l))n.framebufferRenderbuffer(i,h,vr,l);else if(nc(n,l))c.layer!==void 0?n.framebufferTextureLayer(i,h,l,c.level||0,c.layer):n.framebufferTexture2D(i,h,c.target||v3,l,c.level||0);else throw new Error("unknown attachment type");a.attachments.push(l)}),n.drawBuffers&&n.drawBuffers(o),a}function L3(n,e,t,r,i){r=r||n.drawingBufferWidth,i=i||n.drawingBufferHeight,e.width=r,e.height=i,t=t||lm,t.forEach(function(s,o){const a=e.attachments[o],c=s.format,u=s.samples;if(u!==void 0||tp(n,a))n.bindRenderbuffer(vr,a),u>1?n.renderbufferStorageMultisample(vr,u,c,r,i):n.renderbufferStorage(vr,c,r,i);else if(nc(n,a))hC(n,a,s,r,i);else throw new Error("unknown attachment type")})}function z3(n,e,t){const r=n.createVertexArray();return n.bindVertexArray(r),e.length||(e=[e]),e.forEach(function(i){Ar(n,i,t)}),n.bindVertexArray(null),{numElements:t.numElements,elementType:t.elementType,vertexArrayObject:r}}const U3=/^(.*?)_/;function G3(n,e){Il(n,0);const t=n.getExtension(e);if(t){const r={},i=U3.exec(e)[1],s="_"+i;for(const o in t){const a=t[o],c=typeof a=="function",u=c?i:s;let l=o;o.endsWith(u)&&(l=o.substring(0,o.length-u.length)),n[l]!==void 0?!c&&n[l]!==a&&ep(l,n[l],a,o):c?n[l]=function(f){return function(){return f.apply(t,arguments)}}(a):(n[l]=a,r[l]=a)}r.constructor={name:t.constructor.name},Il(r,0)}return t}const hm=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function dm(n){for(let e=0;e<hm.length;++e)G3(n,hm[e])}function H3(n,e){const t=["webgl2","webgl","experimental-webgl"];let r=null;for(let i=0;i<t.length;++i)if(r=n.getContext(t[i],e),r){dm(r);break}return r}function V3(n,e){return H3(n,e)}const _3=`flat out lowp vec4 vFillColor;
flat out lowp vec4 vStrokeColor;
flat out float vHalfStrokeWidth;
flat out vec4 vCornerRadii;

#if defined(ROUNDED_CORNERS) || defined(STROKED) || defined(SHADOW)
/** Position for SDF-strokes */
out vec2 vPosInPixels;
#endif

/** Size of the rect in pixels */
flat out vec2 vHalfSizeInPixels;

/**
 * Adjusts the vertex position to ensure that the rectangle is at least \`minSpan\`
 * wide or high. Returns a value that reflects the amount of clamping and can be
 * used to adjust the opacity of the rectangle.
 *
 * pos: vertex position
 * frac: vertex position within the rectangle, [0, 1]
 * size: width or height of the rectangle
 * minSize: minimum width or height of the rectangle
 */
float clampMinSize(inout float pos, float frac, float size, float minSize) {
    if (minSize > 0.0 && size < minSize) {
        pos += (frac - 0.5) * (minSize - size);
        return size / minSize;
    }

    return 1.0;
}

void sort(inout float a, inout float b) {
    if (a > b) {
        float tmp = b;
        b = a;
        a = tmp;
    }
}

/**
 * The vertex position wrt the rectangle specified by (x, x2, y, y2).
 * [0, 0] = [x, y], [1, 1] = [x2, y2]. 
 * The x or y component may contain fractional values if the rectangle 
 * have been tessellated.
 */
vec2 getVertexPos() {
    int index = gl_VertexID % 6;
    return vec2(
        index == 0 || index == 1 || index == 3 ? 0.0 : 1.0,
        index == 0 || index == 1 || index == 2 ? 0.0 : 1.0
    );
    
}

void main(void) {
    vec2 frac = getVertexPos();

    vec2 normalizedMinSize = vec2(uMinWidth, uMinHeight) / uViewportSize;
    vec4 cornerRadii = vec4(
        uCornerRadiusTopRight,
        uCornerRadiusBottomRight,
        uCornerRadiusTopLeft,
        uCornerRadiusBottomLeft
    );

    float x = getScaled_x();
    float x2 = getScaled_x2();
    float y = getScaled_y();
    float y2 = getScaled_y2();

    sort(x, x2);
    sort(y, y2);

    // Clamp x to prevent precision artifacts when the scale is zoomed very close.
	// TODO: clamp y as well
	float clampMargin = 1.0;
    vec2 pos1 = vec2(clamp(x, 0.0 - clampMargin, 1.0 + clampMargin), y);
    vec2 pos2 = vec2(clamp(x2, 0.0 - clampMargin, 1.0 + clampMargin), y2);

    vec2 size = pos2 - pos1;

    if (size.x <= 0.0 || size.y <= 0.0) {
        // Early exit. May increase performance or not...
        gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
        return;
    }

    vec2 pos = pos1 + frac * size;

    size.y *= getSampleFacetHeight(pos);

    // Clamp to minimum size, optionally compensate with opacity
    float opaFactor = uViewOpacity * max(uMinOpacity,
        clampMinSize(pos.x, frac.x, size.x, normalizedMinSize.x) *
        clampMinSize(pos.y, frac.y, size.y, normalizedMinSize.y));

    size = max(size, normalizedMinSize);

    pos = applySampleFacet(pos);

#if defined(ROUNDED_CORNERS) || defined(STROKED) || defined(SHADOW)
    // Add an extra pixel to the stroke width to accommodate edge antialiasing
    float aaPadding = 1.0 / uDevicePixelRatio;

    // TODO: Only expand to the offset direction. Now high offsets result in
    // a large expansion in all directions.
    float shadowPadding = uShadowBlur + max(abs(uShadowOffsetX), abs(uShadowOffsetY));

    float strokeWidth = getScaled_strokeWidth();
    float strokeOpacity = getScaled_strokeOpacity() * opaFactor;

    vec2 centeredFrac = frac - 0.5;
    vec2 expand = centeredFrac * (strokeWidth + aaPadding + shadowPadding * 2.0) / uViewportSize;
    pos += expand;

    vec2 sizeInPixels = size * uViewportSize;
    vPosInPixels = (centeredFrac + expand / size) * sizeInPixels;

    vHalfSizeInPixels = sizeInPixels / 2.0;

    vCornerRadii = min(cornerRadii, min(vHalfSizeInPixels.x, vHalfSizeInPixels.y));
    vHalfStrokeWidth = strokeWidth / 2.0;
    vStrokeColor = vec4(getScaled_stroke() * strokeOpacity, strokeOpacity);
#endif

    gl_Position = unitToNdc(pos);

    float fillOpacity = getScaled_fillOpacity() * opaFactor;
    vFillColor = vec4(getScaled_fill() * fillOpacity, fillOpacity);

    setupPicking();
}
`,j3=`#if defined(ROUNDED_CORNERS) || defined(STROKED) || defined(SHADOW)
in vec2 vPosInPixels;
#endif

flat in vec2 vHalfSizeInPixels;

flat in lowp vec4 vFillColor;
flat in lowp vec4 vStrokeColor;
flat in float vHalfStrokeWidth;
flat in vec4 vCornerRadii;

out lowp vec4 fragColor;

// ----------------------------------------------------------------------------
// Shadow source: https://madebyevan.com/shaders/fast-rounded-rectangle-shadows/
// License: CC0 (http://creativecommons.org/publicdomain/zero/1.0/)

#ifdef SHADOW

// A standard gaussian function, used for weighting samples
float gaussian(float x, float sigma) {
  const float pi = 3.141592653589793;
  return exp(-(x * x) / (2.0 * sigma * sigma)) / (sqrt(2.0 * pi) * sigma);
}

// This approximates the error function, needed for the gaussian integral
vec2 erf(vec2 x) {
  vec2 s = sign(x), a = abs(x);
  x = 1.0 + (0.278393 + (0.230389 + 0.078108 * (a * a)) * a) * a;
  x *= x;
  return s - s / (x * x);
}

// Return the blurred mask along the x dimension
float roundedBoxShadowX(float x, float y, float sigma, float corner, vec2 halfSize) {
  float delta = min(halfSize.y - corner - abs(y), 0.0);
  float curved = halfSize.x - corner + sqrt(max(0.0, corner * corner - delta * delta));
  vec2 integral = 0.5 + 0.5 * erf((x + vec2(-curved, curved)) * (sqrt(0.5) / sigma));
  return integral.y - integral.x;
}

// Return the mask for the shadow of a box from lower to upper
float roundedBoxShadow(vec2 lower, vec2 upper, vec2 point, float sigma, float corner) {
  // Center everything to make the math easier
  vec2 center = (lower + upper) * 0.5;
  vec2 halfSize = (upper - lower) * 0.5;
  point -= center;

  // The signal is only non-zero in a limited range, so don't waste samples
  float low = point.y - halfSize.y;
  float high = point.y + halfSize.y;
  float start = clamp(-3.0 * sigma, low, high);
  float end = clamp(3.0 * sigma, low, high);

  // Accumulate samples (we can get away with surprisingly few samples)
  float step = (end - start) / 4.0;
  float y = start + step * 0.5;
  float value = 0.0;
  for (int i = 0; i < 4; i++) {
    value += roundedBoxShadowX(point.x, point.y - y, sigma, corner, halfSize) * gaussian(y, sigma) * step;
    y += step;
  }

  return value;
}

// ----------------------------------------------------------------------------

#endif

// Source: https://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
float sdRoundedBox(vec2 p, vec2 b, vec4 r) {
    r.xy = p.x > 0.0 ? r.xy : r.zw;
    r.x  = p.y > 0.0 ? r.x  : r.y;
    vec2 q = abs(p) - b + r.x;
    return min(max(q.x, q.y), 0.0) + length(max(q, 0.0)) - r.x;
}

// Not a true SDF. Makes the corners of strokes sharp and is faster.
float sdSharpBox(vec2 p, vec2 b) {
    vec2 q = abs(p) - b;
    return max(q.x, q.y);
}

float diagonalPattern(vec2 uv, float spacing) {
    // Using 1.5 to approximate sqrt(2.0) to reduce aliasing artifacts.
    float divisor = spacing * vHalfStrokeWidth * 2.0 * 1.5;
    return abs(mod(uv.x - uv.y, divisor) - 0.5 * divisor) / 1.5;
}

float verticalPattern(float x, float spacing) {
    float divisor = spacing * vHalfStrokeWidth * 2.0;
    return abs(mod(x, divisor)) / 2.0;
}

float circle(vec2 p, float r) {
    return length(p) - r;
}

float masonryCirclePattern(vec2 uv, float spacing, float radius) {
    float halfSpacing = 0.5 * spacing;

    float row = floor(uv.y / spacing);
    float shift = mod(row, 2.0) * halfSpacing;

    vec2 shifted = vec2(uv.x + shift, uv.y + halfSpacing);
    vec2 cell = mod(shifted + 0.5 * spacing, spacing) - halfSpacing;

    return abs(circle(cell, radius));
}

/**
 * Patterns:
 * 0  none
 * 1  diagonal (/)
 * 2  antiDiagonal (\\)
 * 3  cross (X)
 * 4  vertical (|)
 * 5  horizontal (-)
 * 6  grid (+)
 * 7  dots (.)
 * 8  rings (o)
 * 9  ringsLarge (O)
 */
float pattern() {
#ifdef STROKED
    int patternType = uHatchPattern;
    vec2 uv = vPosInPixels;
    float spacing = 4.0;

    switch (patternType) {
        case 1:
            return diagonalPattern(vec2(uv.x, -uv.y), spacing);
        case 2:
            return diagonalPattern(uv, spacing);
        case 3:
            return min(
                diagonalPattern(uv, spacing),
                diagonalPattern(vec2(uv.x, -uv.y), spacing)
            );
        case 4:
            return verticalPattern(uv.x, spacing);
        case 5:
            return verticalPattern(uv.y, spacing);
        case 6:
            return min(
                verticalPattern(uv.x, spacing),
                verticalPattern(uv.y, spacing)
            );
        case 7:
        case 8:
        case 9: {
            float spacing = vHalfStrokeWidth * 14.0;
            float radius = spacing * (
                patternType == 8 ? 0.2 :
                patternType == 9 ? 0.35 :
                0.07
            );
            return masonryCirclePattern(uv, spacing, radius);
        }
        default:
            break;
    }
#endif
    return 1.0 / 0.0; // Infinity
}

void main(void) {

#if defined(ROUNDED_CORNERS) || defined(STROKED) || defined(SHADOW)
#ifdef ROUNDED_CORNERS
    // Distance from rectangle's edge in pixels. Negative inside the rectangle.
    float d = sdRoundedBox(vPosInPixels, vHalfSizeInPixels, vCornerRadii);
#else
    float d = sdSharpBox(vPosInPixels, vHalfSizeInPixels);
#endif

    vec4 backgroundColor = vec4(0.0, 0.0, 0.0, 0.0);

#ifdef SHADOW
    float maxCornerRadius = max(vCornerRadii.x, max(vCornerRadii.y, max(vCornerRadii.z, vCornerRadii.w)));

    float shadow = 0.0;
    // Only calculate shadow for the region outside the stroke.
    if (d >= vHalfStrokeWidth - 1.0 && uShadowOpacity > 0.0) {
        shadow = roundedBoxShadow(
            -vHalfSizeInPixels - vHalfStrokeWidth,
            vHalfSizeInPixels + vHalfStrokeWidth,
            vPosInPixels - vec2(uShadowOffsetX, -uShadowOffsetY),
            max(uShadowBlur / 2.5, 0.25),
            maxCornerRadius + vHalfStrokeWidth
        ) * uShadowOpacity * uViewOpacity;
    }
    backgroundColor = vec4(uShadowColor * shadow, shadow);
#endif

    if (vHalfStrokeWidth > 0.0 && uHatchPattern > 0) {
        d = max(d, -pattern());
    }

    fragColor = distanceToColor(
        d,
        vFillColor,
        vStrokeColor,
        backgroundColor,
        vHalfStrokeWidth
    );

    if (uPickingEnabled) {
        if (d < vHalfStrokeWidth) {
            fragColor = vPickingColor;
        }
    } else if (fragColor.a == 0.0) {
        discard;
    }
#else
    // The trivial, non-decorated case
    fragColor = vFillColor;
    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
#endif
}
`,W3=`layout(std140) uniform Mark {
    /** Minimum size (width, height) of the displayed rectangle in pixels */
    uniform float uMinWidth;
    uniform float uMinHeight;

    /** Minimum opacity for the size clamping */
    uniform float uMinOpacity;

    uniform float uCornerRadiusTopRight;
    uniform float uCornerRadiusBottomRight;
    uniform float uCornerRadiusTopLeft;
    uniform float uCornerRadiusBottomLeft;

    uniform int uHatchPattern;

    uniform vec3 uShadowColor;
    uniform float uShadowOpacity;
    uniform float uShadowBlur;
    uniform float uShadowOffsetX;
    uniform float uShadowOffsetY;

#pragma markUniforms
};
`,pm=1e4;class Q3{constructor(e){R(this,$i);R(this,na,!1);this.size=e,this.arrays={},this.pushers=[],this.dataUpdaters=[],this.vertexCount=0}configure(){if(E(this,na))throw new Error("Already configured!");O(this,$i,Dw).call(this),O(this,$i,Iw).call(this),G(this,na,!0)}addConverter(e,t){const r=this.createUpdater(e,t.numComponents||1,t.targetArrayType??Float32Array,t.arrayReference),i=t.f;this.dataUpdaters.push(t.arrayReference?s=>r(i(s)):s=>r(i(s)))}createUpdater(e,t,r=Float32Array,i=void 0){if(!Ke(this.size))throw new Error("The number of vertices must be defined!");let s,o,a=0;const c=new r(this.size*t);if(this.arrays[e]={data:c,numComponents:t},t==1){let u=0;const l=f=>{u=+f};s=()=>{c[a++]=u},o=l}else{let u=i??[0];const l=i?f=>{}:f=>{u=f};switch(t){case 1:break;case 2:s=()=>{c[a++]=u[0],c[a++]=u[1]},o=l;break;case 3:s=()=>{c[a++]=u[0],c[a++]=u[1],c[a++]=u[2]},o=l;break;case 4:s=()=>{c[a++]=u[0],c[a++]=u[1],c[a++]=u[2],c[a++]=u[3]},o=l;break;default:throw new Error("Invalid numComponents: "+t)}}return this.pushers.push(s),o}pushAll(){throw new Error("Call configure() first!")}updateFromDatum(e){throw new Error("Call configure() first!")}pushFromDatum(e){this.updateFromDatum(e),this.pushAll()}}na=new WeakMap,$i=new WeakSet,Dw=function(){if(this.size>pm){const e=this.pushers.map((r,i)=>`const p${i} = that.pushers[${i}];`).join(`
`),t=this.pushers.map((r,i)=>`  p${i}();`).join(`
`);this.pushAll=new Function("that",`${e}
return function unrolledPushAll() {
${t}
  that.vertexCount++;
};`)(this)}else this.pushAll=()=>{for(let e=0;e<this.pushers.length;e++)this.pushers[e]();this.vertexCount++}},Iw=function(){if(this.size>pm){const e=this.dataUpdaters.map((r,i)=>`const u${i} = that.dataUpdaters[${i}];`).join(`
`),t=this.dataUpdaters.map((r,i)=>`  u${i}(datum);`).join(`
`);this.updateFromDatum=new Function("that","datum",`${e}
return function unrolledUpdateFromDatum(datum) {
${t}
};`)(this)}else this.updateFromDatum=e=>{for(let t=0;t<this.dataUpdaters.length;t++)this.dataUpdaters[t](e)}};const uo=5,Yl=127;function Xl(n){const e=[];for(let p=0;p<=Yl;p++)e.push(void 0);const t=new Map;for(const p of n.chars)p.id<=Yl?e[p.id]=p:t.set(p.id,p);const r=8722;t.has(r)||t.set(r,e[45]);function i(p){return(p<=Yl?e[p]:t.get(p))||e[63]}function s(p){return i(p.charCodeAt(0))}const o=n.common.base,a=s("x"),c=s("X"),u=s("q"),l=a.height-uo*2,f=c.height-uo*2,d=u.height-a.height+u.yoffset-a.yoffset;function h(p,m=1){let g=0;for(let x=0;x<p.length;x++)g+=i(p.charCodeAt(x)).xadvance;return g/o*m}return{measureWidth:h,getCharByCode:i,getChar:s,xHeight:l,capHeight:f,descent:d,common:n.common}}function vi(n,e=0,t=1){return Math.max(e,Math.min(t,n))}const mm=2**31-1,q3=-2147483648;function Y3(n,e,t,r=t){const i=new Array(n);i.fill(mm);let s=q3,o=-1/0,a=!1;const c=new Array(n);c.fill(0);const u=e[0],f=(e[1]-e[0])/n,d=(x,b)=>{const w=(x-u)/f,A=Math.floor(w);return vi(b&&A==w?A-1:A,0,n-1)};function h(x,b,w){if(a)return;if(b>s)s=b;else{a=!0;return}const A=t(x);if(A<o){a=!0;return}o=A;const S=d(A,!1);i[S]>b&&(i[S]=b),c[S]<w&&(c[S]=w)}function p(x,b,w){if(a)return;if(b>s)s=b;else{a=!0,console.debug("Items (vertices) are not ordered properly. Disabling binned index.");return}const A=t(x),S=r(x);if(A<o){a=!0;return}else if(S<A){a=!0;return}o=A;const C=d(A,!1),v=d(S,!0);for(let T=C;T<=v;T++)i[T]>b&&(i[T]=b),c[T]<w&&(c[T]=w)}const m=(x,b,w=[0,0])=>{const A=d(x,!1),S=d(b,!0),C=i[A],v=Math.max(c[S],C);return w[0]=C,w[1]=v,w},g=()=>{if(a)return;for(let b=1;b<c.length;b++)c[b]<c[b-1]&&(c[b]=c[b-1]);let x=!0;for(let b=i.length-1;b>0;b--)x&&i[b]==mm?(i[b]=c[b],x=!1):i[b-1]>i[b]&&(i[b-1]=i[b]);return m};return h.getIndex=g,p.getIndex=g,t==r?h:p}const Ht=1,Rn=2,Kl=4;class Zl{constructor(e){R(this,Qr);Y(this,"stats",{count:0,first:null});Y(this,"paramMediatorProvider",null);this.paramMediatorProvider=e,this.children=[],this.parent=void 0,this.completed=!1}get behavior(){return 0}get label(){return`(${this.constructor.name})`}reset(){this.completed=!1;for(const e of this.children)e.reset();this.stats.count=0,this.stats.first=null}initialize(){}setParent(e){this.parent=e}addChild(e){if(e.parent)throw new Error("Cannot add the child! It already has a parent.");return this.children.push(e),e.setParent(this),O(this,Qr,Ta).call(this),this}adopt(e){e.parent&&e.parent.removeChild(e),this.addChild(e)}adoptChildrenOf(e){for(const t of e.children)this.adopt(t)}insertAsParent(e){var t;if(this.isRoot())throw new Error("Cannot insert a new parent for a root node!");e.parent=this.parent,this.parent.children[this.parent.children.indexOf(this)]=e,O(t=this.parent,Qr,Ta).call(t),this.parent=void 0,e.addChild(this)}removeChild(e){const t=this.children.indexOf(e);if(t>-1)this.children.splice(t,1),e.parent=void 0,O(this,Qr,Ta).call(this);else throw new Error("Trying to remove an unknown child node!")}excise(){var e;if(this.isRoot())throw new Error("Cannot excise root node!");if(this.isTerminal())this.parent.removeChild(this);else if(this.children.length==1){const t=this.children[0];t.setParent(this.parent),this.parent.children[this.parent.children.indexOf(this)]=t,O(e=this.parent,Qr,Ta).call(e),this.setParent(void 0),this.children.length=0}else throw new Error("Cannot excise a node that has multiple children!")}isRoot(){return!this.parent}isBranching(){return this.children.length>1}isTerminal(){return this.children.length==0}visit(e){e(this);for(const t of this.children)t.visit(e);e.afterChildren&&e.afterChildren(this)}subtreeToString(e=0){const t=this.children.map(r=>r.subtreeToString(e+1)).join("");return`${" ".repeat(e*2)}* ${this.label}${"identifier"in this&&this.identifier?": "+this.identifier:""} 
${t}`}handle(e){this._propagate(e)}complete(){this.completed=!0;for(const e of this.children)e.complete()}beginBatch(e){for(const t of this.children)t.beginBatch(e)}get paramMediator(){if(this.paramMediatorProvider)return this.paramMediatorProvider.paramMediator;if(!this.parent)throw new Error("Cannot find paramMediator!");return this.parent.paramMediator}repropagate(){if(this.parent)this.parent.repropagate();else throw new Error("Cannot repropagate data, no FlowNode with stored data found!")}_propagate(e){}}Qr=new WeakSet,Ta=function(){this._propagate=Function("children","stats",Gs(this.children.length).map(e=>`const child${e} = children[${e}];`).join(`
`)+`return function propagate(datum) {
                    if (stats.count === 0) {
                        stats.first = structuredClone(datum);
                    }
                    stats.count++;
                ${Gs(this.children.length).map(e=>`child${e}.handle(datum);`).join(`
`)}
                };`)(this.children,this.stats)};function gm(n){return n.type=="file"}function X3(n){return n.type=="facet"}class Te extends Zl{constructor(t,r){super(r);R(this,ra);G(this,ra,t.type)}get label(){return E(this,ra)}}ra=new WeakMap;const pt="_uniqueId",xm=1e4,ym=[null];class Jl extends Te{get behavior(){return Rn}constructor(e){super(e),this.params=e,this.as=e.as??pt,this._blocks=[],this._usedBlocks=0,this._id=-1}initialize(){}reset(){super.reset(),this._usedBlocks=0,this._id=-1}handle(e){e[this.as]=this._nextId(),this._propagate(e)}_nextId(){return++this._id%xm==0&&(this._id=this._getBlock()*xm),this._id}_getBlock(){return this._usedBlocks<this._blocks.length?this._blocks[this._usedBlocks++]:this._reserveBlock()}_reserveBlock(){const e=ym.length;return ym[e]=this,this._blocks.push(e),this._usedBlocks++,e}}function Si(n,e,t){return n.fields=e||[],n.fname=t,n}function K3(n){return n.length===1?Z3(n[0]):J3(n)}const Z3=n=>function(e){return e[n]},J3=n=>{const e=n.length;return function(t){for(let r=0;r<e;++r)t=t[n[r]];return t}};function mt(n){throw Error(n)}function $3(n){const e=[],t=n.length;let r=null,i=0,s="",o,a,c;n=n+"";function u(){e.push(s+n.substring(o,a)),s="",o=a+1}for(o=a=0;a<t;++a)if(c=n[a],c==="\\")s+=n.substring(o,a++),o=a;else if(c===r)u(),r=null,i=-1;else{if(r)continue;o===i&&c==='"'||o===i&&c==="'"?(o=a+1,r=c):c==="."&&!i?a>o?u():o=a+1:c==="["?(a>o&&u(),i=o=a+1):c==="]"&&(i||mt("Access path missing open bracket: "+n),i>0&&u(),i=0,o=a+1)}return i&&mt("Access path missing closing bracket: "+n),r&&mt("Access path missing closing quote: "+n),a>o&&(a++,u()),e}function e4(n,e,t){const r=$3(n);return n=r.length===1?r[0]:n,Si(K3(r),[n],n)}e4("id"),Si(n=>n,[],"identity"),Si(()=>0,[],"zero"),Si(()=>1,[],"one"),Si(()=>!0,[],"true"),Si(()=>!1,[],"false");const t4=new Set([...Object.getOwnPropertyNames(Object.prototype).filter(n=>typeof Object.prototype[n]=="function"),"__proto__"]);function bm(n){return typeof n=="function"}function Sc(n,e){return Object.hasOwn(n,e)}function n4(n){return typeof n=="string"}function wm(n){const e={},t=n.length;for(let r=0;r<t;++r)e[n[r]]=!0;return e}const r4="RawCode",i4="Literal",s4="Property",o4="Identifier",a4="ArrayExpression",c4="BinaryExpression",u4="CallExpression",l4="ConditionalExpression",f4="LogicalExpression",h4="MemberExpression",d4="ObjectExpression",p4="UnaryExpression";function Tt(n){this.type=n}Tt.prototype.visit=function(n){let e,t,r;if(n(this))return 1;for(e=m4(this),t=0,r=e.length;t<r;++t)if(e[t].visit(n))return 1};function m4(n){switch(n.type){case a4:return n.elements;case c4:case f4:return[n.left,n.right];case u4:return[n.callee].concat(n.arguments);case l4:return[n.test,n.consequent,n.alternate];case h4:return[n.object,n.property];case d4:return n.properties;case s4:return[n.key,n.value];case p4:return[n.argument];case o4:case i4:case r4:default:return[]}}var Vt,V,B,_e,fe,Ec=1,lo=2,Sr=3,On=4,Cc=5,Er=6,it=7,fo=8,g4=9;Vt={},Vt[Ec]="Boolean",Vt[lo]="<end>",Vt[Sr]="Identifier",Vt[On]="Keyword",Vt[Cc]="Null",Vt[Er]="Numeric",Vt[it]="Punctuator",Vt[fo]="String",Vt[g4]="RegularExpression";var x4="ArrayExpression",y4="BinaryExpression",b4="CallExpression",w4="ConditionalExpression",Am="Identifier",A4="Literal",v4="LogicalExpression",S4="MemberExpression",E4="ObjectExpression",C4="Property",D4="UnaryExpression",Pe="Unexpected token %0",I4="Unexpected number",T4="Unexpected string",B4="Unexpected identifier",k4="Unexpected reserved word",F4="Unexpected end of input",$l="Invalid regular expression",ef="Invalid regular expression: missing /",vm="Octal literals are not allowed in strict mode.",P4="Duplicate data property in object literal not allowed in strict mode",ze="ILLEGAL",ho="Disabled.",M4=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),R4=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Dc(n,e){if(!n)throw new Error("ASSERT: "+e)}function un(n){return n>=48&&n<=57}function tf(n){return"0123456789abcdefABCDEF".includes(n)}function po(n){return"01234567".includes(n)}function O4(n){return n===32||n===9||n===11||n===12||n===160||n>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(n)}function mo(n){return n===10||n===13||n===8232||n===8233}function go(n){return n===36||n===95||n>=65&&n<=90||n>=97&&n<=122||n===92||n>=128&&M4.test(String.fromCharCode(n))}function Ic(n){return n===36||n===95||n>=65&&n<=90||n>=97&&n<=122||n>=48&&n<=57||n===92||n>=128&&R4.test(String.fromCharCode(n))}const N4={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Sm(){for(;B<_e;){const n=V.charCodeAt(B);if(O4(n)||mo(n))++B;else break}}function nf(n){var e,t,r,i=0;for(t=n==="u"?4:2,e=0;e<t;++e)B<_e&&tf(V[B])?(r=V[B++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):ae({},Pe,ze);return String.fromCharCode(i)}function L4(){var n,e,t,r;for(n=V[B],e=0,n==="}"&&ae({},Pe,ze);B<_e&&(n=V[B++],!!tf(n));)e=e*16+"0123456789abcdef".indexOf(n.toLowerCase());return(e>1114111||n!=="}")&&ae({},Pe,ze),e<=65535?String.fromCharCode(e):(t=(e-65536>>10)+55296,r=(e-65536&1023)+56320,String.fromCharCode(t,r))}function Em(){var n,e;for(n=V.charCodeAt(B++),e=String.fromCharCode(n),n===92&&(V.charCodeAt(B)!==117&&ae({},Pe,ze),++B,n=nf("u"),(!n||n==="\\"||!go(n.charCodeAt(0)))&&ae({},Pe,ze),e=n);B<_e&&(n=V.charCodeAt(B),!!Ic(n));)++B,e+=String.fromCharCode(n),n===92&&(e=e.substr(0,e.length-1),V.charCodeAt(B)!==117&&ae({},Pe,ze),++B,n=nf("u"),(!n||n==="\\"||!Ic(n.charCodeAt(0)))&&ae({},Pe,ze),e+=n);return e}function z4(){var n,e;for(n=B++;B<_e;){if(e=V.charCodeAt(B),e===92)return B=n,Em();if(Ic(e))++B;else break}return V.slice(n,B)}function U4(){var n,e,t;return n=B,e=V.charCodeAt(B)===92?Em():z4(),e.length===1?t=Sr:N4.hasOwnProperty(e)?t=On:e==="null"?t=Cc:e==="true"||e==="false"?t=Ec:t=Sr,{type:t,value:e,start:n,end:B}}function rf(){var n=B,e=V.charCodeAt(B),t,r=V[B],i,s,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++B,{type:it,value:String.fromCharCode(e),start:n,end:B};default:if(t=V.charCodeAt(B+1),t===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return B+=2,{type:it,value:String.fromCharCode(e)+String.fromCharCode(t),start:n,end:B};case 33:case 61:return B+=2,V.charCodeAt(B)===61&&++B,{type:it,value:V.slice(n,B),start:n,end:B}}}if(o=V.substr(B,4),o===">>>=")return B+=4,{type:it,value:o,start:n,end:B};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return B+=3,{type:it,value:s,start:n,end:B};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return B+=2,{type:it,value:i,start:n,end:B};if(i==="//"&&ae({},Pe,ze),"<>=!+-*%&|^/".includes(r))return++B,{type:it,value:r,start:n,end:B};ae({},Pe,ze)}function G4(n){let e="";for(;B<_e&&tf(V[B]);)e+=V[B++];return e.length===0&&ae({},Pe,ze),go(V.charCodeAt(B))&&ae({},Pe,ze),{type:Er,value:parseInt("0x"+e,16),start:n,end:B}}function H4(n){let e="0"+V[B++];for(;B<_e&&po(V[B]);)e+=V[B++];return(go(V.charCodeAt(B))||un(V.charCodeAt(B)))&&ae({},Pe,ze),{type:Er,value:parseInt(e,8),octal:!0,start:n,end:B}}function Cm(){var n,e,t;if(t=V[B],Dc(un(t.charCodeAt(0))||t===".","Numeric literal must start with a decimal digit or a decimal point"),e=B,n="",t!=="."){if(n=V[B++],t=V[B],n==="0"){if(t==="x"||t==="X")return++B,G4(e);if(po(t))return H4(e);t&&un(t.charCodeAt(0))&&ae({},Pe,ze)}for(;un(V.charCodeAt(B));)n+=V[B++];t=V[B]}if(t==="."){for(n+=V[B++];un(V.charCodeAt(B));)n+=V[B++];t=V[B]}if(t==="e"||t==="E")if(n+=V[B++],t=V[B],(t==="+"||t==="-")&&(n+=V[B++]),un(V.charCodeAt(B)))for(;un(V.charCodeAt(B));)n+=V[B++];else ae({},Pe,ze);return go(V.charCodeAt(B))&&ae({},Pe,ze),{type:Er,value:parseFloat(n),start:e,end:B}}function V4(){var n="",e,t,r,i,s=!1;for(e=V[B],Dc(e==="'"||e==='"',"String literal must starts with a quote"),t=B,++B;B<_e;)if(r=V[B++],r===e){e="";break}else if(r==="\\")if(r=V[B++],!r||!mo(r.charCodeAt(0)))switch(r){case"u":case"x":V[B]==="{"?(++B,n+=L4()):n+=nf(r);break;case"n":n+=`
`;break;case"r":n+="\r";break;case"t":n+="	";break;case"b":n+="\b";break;case"f":n+="\f";break;case"v":n+="\v";break;default:po(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),B<_e&&po(V[B])&&(s=!0,i=i*8+"01234567".indexOf(V[B++]),"0123".includes(r)&&B<_e&&po(V[B])&&(i=i*8+"01234567".indexOf(V[B++]))),n+=String.fromCharCode(i)):n+=r;break}else r==="\r"&&V[B]===`
`&&++B;else{if(mo(r.charCodeAt(0)))break;n+=r}return e!==""&&ae({},Pe,ze),{type:fo,value:n,octal:s,start:t,end:B}}function _4(n,e){let t=n;e.includes("u")&&(t=t.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";ae({},$l)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(t)}catch{ae({},$l)}try{return new RegExp(n,e)}catch{return null}}function j4(){var n,e,t,r,i;for(n=V[B],Dc(n==="/","Regular expression literal must start with a slash"),e=V[B++],t=!1,r=!1;B<_e;)if(n=V[B++],e+=n,n==="\\")n=V[B++],mo(n.charCodeAt(0))&&ae({},ef),e+=n;else if(mo(n.charCodeAt(0)))ae({},ef);else if(t)n==="]"&&(t=!1);else if(n==="/"){r=!0;break}else n==="["&&(t=!0);return r||ae({},ef),i=e.substr(1,e.length-2),{value:i,literal:e}}function W4(){var n,e,t;for(e="",t="";B<_e&&(n=V[B],!!Ic(n.charCodeAt(0)));)++B,n==="\\"&&B<_e?ae({},Pe,ze):(t+=n,e+=n);return t.search(/[^gimuy]/g)>=0&&ae({},$l,t),{value:t,literal:e}}function Q4(){var n,e,t,r;return fe=null,Sm(),n=B,e=j4(),t=W4(),r=_4(e.value,t.value),{literal:e.literal+t.literal,value:r,regex:{pattern:e.value,flags:t.value},start:n,end:B}}function q4(n){return n.type===Sr||n.type===On||n.type===Ec||n.type===Cc}function Dm(){if(Sm(),B>=_e)return{type:lo,start:B,end:B};const n=V.charCodeAt(B);return go(n)?U4():n===40||n===41||n===59?rf():n===39||n===34?V4():n===46?un(V.charCodeAt(B+1))?Cm():rf():un(n)?Cm():rf()}function st(){const n=fe;return B=n.end,fe=Dm(),B=n.end,n}function Im(){const n=B;fe=Dm(),B=n}function Y4(n){const e=new Tt(x4);return e.elements=n,e}function Tm(n,e,t){const r=new Tt(n==="||"||n==="&&"?v4:y4);return r.operator=n,r.left=e,r.right=t,r}function X4(n,e){const t=new Tt(b4);return t.callee=n,t.arguments=e,t}function K4(n,e,t){const r=new Tt(w4);return r.test=n,r.consequent=e,r.alternate=t,r}function sf(n){const e=new Tt(Am);return e.name=n,e}function xo(n){const e=new Tt(A4);return e.value=n.value,e.raw=V.slice(n.start,n.end),n.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=n.regex),e}function Bm(n,e,t){const r=new Tt(S4);return r.computed=n==="[",r.object=e,r.property=t,r.computed||(t.member=!0),r}function Z4(n){const e=new Tt(E4);return e.properties=n,e}function km(n,e,t){const r=new Tt(C4);return r.key=e,r.value=t,r.kind=n,r}function J4(n,e){const t=new Tt(D4);return t.operator=n,t.argument=e,t.prefix=!0,t}function ae(n,e){var t,r=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\d)/g,(s,o)=>(Dc(o<r.length,"Message reference must be in range"),r[o]));throw t=new Error(i),t.index=B,t.description=i,t}function Tc(n){n.type===lo&&ae(n,F4),n.type===Er&&ae(n,I4),n.type===fo&&ae(n,T4),n.type===Sr&&ae(n,B4),n.type===On&&ae(n,k4),ae(n,Pe,n.value)}function je(n){const e=st();(e.type!==it||e.value!==n)&&Tc(e)}function xe(n){return fe.type===it&&fe.value===n}function of(n){return fe.type===On&&fe.value===n}function $4(){const n=[];for(B=fe.start,je("[");!xe("]");)xe(",")?(st(),n.push(null)):(n.push(Cr()),xe("]")||je(","));return st(),Y4(n)}function Fm(){B=fe.start;const n=st();return n.type===fo||n.type===Er?(n.octal&&ae(n,vm),xo(n)):sf(n.value)}function e8(){var n,e,t,r;if(B=fe.start,n=fe,n.type===Sr)return t=Fm(),je(":"),r=Cr(),km("init",t,r);if(n.type===lo||n.type===it)Tc(n);else return e=Fm(),je(":"),r=Cr(),km("init",e,r)}function t8(){var n=[],e,t,r,i={},s=String;for(B=fe.start,je("{");!xe("}");)e=e8(),e.key.type===Am?t=e.key.name:t=s(e.key.value),r="$"+t,Object.prototype.hasOwnProperty.call(i,r)?ae({},P4):i[r]=!0,n.push(e),xe("}")||je(",");return je("}"),Z4(n)}function n8(){je("(");const n=af();return je(")"),n}const r8={if:1};function i8(){var n,e,t;if(xe("("))return n8();if(xe("["))return $4();if(xe("{"))return t8();if(n=fe.type,B=fe.start,n===Sr||r8[fe.value])t=sf(st().value);else if(n===fo||n===Er)fe.octal&&ae(fe,vm),t=xo(st());else{if(n===On)throw new Error(ho);n===Ec?(e=st(),e.value=e.value==="true",t=xo(e)):n===Cc?(e=st(),e.value=null,t=xo(e)):xe("/")||xe("/=")?(t=xo(Q4()),Im()):Tc(st())}return t}function s8(){const n=[];if(je("("),!xe(")"))for(;B<_e&&(n.push(Cr()),!xe(")"));)je(",");return je(")"),n}function o8(){B=fe.start;const n=st();return q4(n)||Tc(n),sf(n.value)}function a8(){return je("."),o8()}function c8(){je("[");const n=af();return je("]"),n}function u8(){var n,e,t;for(n=i8();;)if(xe("."))t=a8(),n=Bm(".",n,t);else if(xe("("))e=s8(),n=X4(n,e);else if(xe("["))t=c8(),n=Bm("[",n,t);else break;return n}function Pm(){const n=u8();if(fe.type===it&&(xe("++")||xe("--")))throw new Error(ho);return n}function Bc(){var n,e;if(fe.type!==it&&fe.type!==On)e=Pm();else{if(xe("++")||xe("--"))throw new Error(ho);if(xe("+")||xe("-")||xe("~")||xe("!"))n=st(),e=Bc(),e=J4(n.value,e);else{if(of("delete")||of("void")||of("typeof"))throw new Error(ho);e=Pm()}}return e}function Mm(n){let e=0;if(n.type!==it&&n.type!==On)return 0;switch(n.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function l8(){var n,e,t,r,i,s,o,a,c,u;if(n=fe,c=Bc(),r=fe,i=Mm(r),i===0)return c;for(r.prec=i,st(),e=[n,fe],o=Bc(),s=[c,r,o];(i=Mm(fe))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,c=s.pop(),e.pop(),t=Tm(a,c,o),s.push(t);r=st(),r.prec=i,s.push(r),e.push(fe),t=Bc(),s.push(t)}for(u=s.length-1,t=s[u],e.pop();u>1;)e.pop(),t=Tm(s[u-1].value,s[u-2],t),u-=2;return t}function Cr(){var n,e,t;return n=l8(),xe("?")&&(st(),e=Cr(),je(":"),t=Cr(),n=K4(n,e,t)),n}function af(){const n=Cr();if(xe(","))throw new Error(ho);return n}function Rm(n){V=n,B=0,_e=V.length,fe=null,Im();const e=af();if(fe.type!==lo)throw new Error("Unexpect token after expression.");return e}var f8={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Om(n){function e(o,a,c,u){let l=n(a[0]);return c&&(l=c+"("+l+")",c.lastIndexOf("new ",0)===0&&(l="("+l+")")),l+"."+o+(u<0?"":u===0?"()":"("+a.slice(1).map(n).join(",")+")")}function t(o,a,c){return u=>e(o,u,a,c)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&mt("Missing arguments to clamp function."),o.length>3&&mt("Too many arguments to clamp function.");const a=o.map(n);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:t("getDate",r,0),day:t("getDay",r,0),year:t("getFullYear",r,0),month:t("getMonth",r,0),hours:t("getHours",r,0),minutes:t("getMinutes",r,0),seconds:t("getSeconds",r,0),milliseconds:t("getMilliseconds",r,0),time:t("getTime",r,0),timezoneoffset:t("getTimezoneOffset",r,0),utcdate:t("getUTCDate",r,0),utcday:t("getUTCDay",r,0),utcyear:t("getUTCFullYear",r,0),utcmonth:t("getUTCMonth",r,0),utchours:t("getUTCHours",r,0),utcminutes:t("getUTCMinutes",r,0),utcseconds:t("getUTCSeconds",r,0),utcmilliseconds:t("getUTCMilliseconds",r,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",i,0),lower:t("toLowerCase",i,0),substring:t("substring",i),split:t("split",i),trim:t("trim",i,0),btoa:"btoa",atob:"atob",regexp:s,test:t("test",s),if:function(o){o.length<3&&mt("Missing arguments to if function."),o.length>3&&mt("Too many arguments to if function.");const a=o.map(n);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function h8(n){const e=n&&n.length-1;return e&&(n[0]==='"'&&n[e]==='"'||n[0]==="'"&&n[e]==="'")?n.slice(1,-1):n}function Nm(n){n=n||{};const e=n.allowed?wm(n.allowed):{},t=n.forbidden?wm(n.forbidden):{},r=n.constants||f8,i=(n.functions||Om)(f),s=n.globalvar,o=n.fieldvar,a=bm(s)?s:p=>`${s}["${p}"]`;[...Object.getOwnPropertyNames(Object.prototype).filter(p=>typeof Object.prototype[p]=="function")];let c={},u={},l=0;function f(p){if(n4(p))return p;const m=d[p.type];return m==null&&mt("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return l>0?m:Sc(t,m)?mt("Illegal identifier: "+m):Sc(r,m)?r[m]:Sc(e,m)?m:(c[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(l+=1);const x=f(p.property);return g===o&&(u[h8(x)]=1),m&&(l-=1),g+(m?"."+x:"["+x+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&mt("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,x=Sc(i,m)&&i[m];return x||mt("Unrecognized function: "+m),bm(x)?x(g):x+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>{for(const m of p.properties){const g=m.key.name;t4.has(g)&&mt("Illegal property: "+g)}return"{"+p.properties.map(f).join(",")+"}"},Property:p=>{l+=1;const m=f(p.key);return l-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(c),fields:Object.keys(u)};return c={},u={},m}return h.functions=i,h.constants=r,h}function Lm(n,e,t){return t=(t-n)/(e-n),t=Math.max(0,Math.min(1,t)),t*t*(3-2*t)}function d8(n,e,t){return vi((t-n)/(e-n),0,1)}const zm={clamp:vi,format(n,e){return Le(e)(n)},mapHasKey(n,e){return n.has(e)},isArray:Ue,isBoolean:Is,isDefined(n){return n!==void 0},isNumber:Ke,isObject:Ge,isRegExp:cA,isString:me,isValid(n){return n!=null&&n===n},lerp:Gd,linearstep:d8,replace(n,e,t){return String(n).replace(e,t)},smoothstep:Lm};function p8(n){const e=Om(n);for(const t in zm)e[t]=`this.${t}`;return e}const m8=Nm({forbidden:[],allowed:["datum","undefined"],globalvar:"globalObject",fieldvar:"datum",functions:p8});function g8(n,e={}){try{const t=Rm(n),r=m8(t),i=Function("datum","globalObject",`"use strict";
            try {
                return (${r.code});
            } catch (e) {
                throw new Error("Error evaluating expression: " + ${JSON.stringify(n)} + ", " + e.message, e);
            }`).bind(zm),s=o=>i(o,e);return s.fields=r.fields,s.globals=r.globals,s.code=r.code,s}catch(t){throw new Error(`Invalid expression: ${n}, ${t.message}`)}}const x8=Nm({forbidden:[],allowed:["event"],globalvar:"globalObject"});function Um(n){try{const e=Rm(n),t=x8(e);return Function("event","globalObject",`"use strict";
            try {
                return !!(${t.code});
            } catch (e) {
                throw new Error("Error evaluating expression: " + ${JSON.stringify(n)} + ", " + e.message, e);
            }`)}catch(e){throw new Error(`Invalid expression: ${n}, ${e.message}`)}}class y8{constructor(e){R(this,Zn);Y(this,"paramListeners");R(this,qr,new Map);R(this,es,new Map);R(this,ts,new Map);R(this,ia);G(this,ia,e??(()=>{})),G(this,Zn,new Map),this.paramListeners=new Map}registerParam(e){const t=e.name;if("value"in e&&"expr"in e)throw new Error(`The parameter "${t}" must not have both value and expr properties!`);let r;if(e.push=="outer"){const i=this.findMediatorForParam(t);if(!i)throw new Error(`Parameter "${t}" not found in outer scope!`);const s=i.paramConfigs.get(t);if("expr"in s||"select"in s)throw new Error(`The outer parameter "${t}" must not have expr or select properties!`);r=i.getSetter(t),E(this,qr).set(t,r)}else if("value"in e)r=this.allocateSetter(t,e.value);else if("expr"in e){const i=this.createExpression(e.expr),s=this.allocateSetter(t,i(null));i.addListener(()=>s(i(null))),r=o=>{}}else r=this.allocateSetter(t,null);if("select"in e){const i=Fc(e.select);if(Pc(i))r(i.toggle?uf():cf(null));else if(Wm(i)){if(!i.encodings)throw new Error(`Interval selection "${t}" must have encodings defined!`);r(Vm(i.encodings))}}return E(this,ts).set(t,e),r}allocateSetter(e,t,r=!1){if(yo(e),E(this,qr).has(e))throw new Error("Setter already allocated for parameter: "+e);const i=s=>{const o=E(this,Zn).get(e);if(s!==o){E(this,Zn).set(e,s);const a=this.paramListeners.get(e);if(a&&!r)for(const c of a)c()}};return i(t),E(this,qr).set(e,i),i}getSetter(e){const t=E(this,qr).get(e);if(!t)throw new Error("Setter not found for parameter: "+e);return t}getValue(e){return E(this,Zn).get(e)}findValue(e){const t=this.findMediatorForParam(e);return t==null?void 0:t.getValue(e)}get paramConfigs(){return E(this,ts)}findMediatorForParam(e){var t;return E(this,Zn).has(e)?this:(t=E(this,ia).call(this))==null?void 0:t.findMediatorForParam(e)}createExpression(e){if(E(this,es).has(e))return E(this,es).get(e);const t={},r=g8(e,t),i=new Map;for(const o of r.globals){const a=this.findMediatorForParam(o);if(!a)throw new Error(`Unknown variable "${o}" in expression: ${e}`);i.set(o,a),Object.defineProperty(t,o,{enumerable:!0,get(){return a.getValue(o)}})}const s=new Set;return r.addListener=o=>{for(const[a,c]of i){const u=c.paramListeners.get(a)??new Set;c.paramListeners.set(a,u),u.add(o),s.add(o)}},r.removeListener=o=>{var a;for(const[c,u]of i)(a=u.paramListeners.get(c))==null||a.delete(o);s.delete(o)},r.invalidate=()=>{var o;for(const[a,c]of i)for(const u of s)(o=c.paramListeners.get(a))==null||o.delete(u);s.clear()},r.identifier=()=>r.code,E(this,es).set(e,r),r}evaluateAndGet(e){return this.createExpression(e)()}hasPointSelections(){for(const e of E(this,ts).values())if(Gm(e)){const t=e.select;if(me(t)){if(t=="point")return!0}else if(t.type=="point")return!0}return!1}}Zn=new WeakMap,qr=new WeakMap,es=new WeakMap,ts=new WeakMap,ia=new WeakMap;function We(n){return typeof n=="object"&&n!=null&&"expr"in n&&me(n.expr)}function gt(n){if(We(n))throw new Error(`ExprRef ${JSON.stringify(n)} not allowed here. Expected a scalar value.`);return n}function b8(n){return("expr"in n||"bind"in n)&&!("select"in n)}function Gm(n){return!("expr"in n||"bind"in n)&&"select"in n}function kc(n,e,t){const r={...e},i=[],s=o=>{i.push(o),i.length===1&&queueMicrotask(()=>{t(i.slice()),i.length=0})};for(const[o,a]of Object.entries(e))if(We(a)){const c=n.createExpression(a.expr);t&&c.addListener(()=>s(o)),Object.defineProperty(r,o,{enumerable:!0,get(){return c()}})}else r[o]=a;return r}function yo(n){if(!/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(n))throw new Error(`Invalid parameter name: ${n}. Must be a valid JavaScript identifier.`);return n}function Hm(n){return Object.assign(()=>n,{addListener:()=>{},removeListener:()=>{},invalidate:()=>{},identifier:()=>"constant",fields:[],globals:[],code:JSON.stringify(n)})}function cf(n){return{type:"single",datum:n,uniqueId:n==null?void 0:n[pt]}}function uf(n){return n??(n=[]),{type:"multi",data:new Map(n.map(e=>[e[pt],e]))}}function Vm(n){return{type:"interval",intervals:Object.fromEntries(n.map(e=>[e,null]))}}function w8(n,{add:e,remove:t,toggle:r}){const i=n.data;for(const s of e??[])i.set(s[pt],s);for(const s of t??[])i.delete(s[pt]);for(const s of r??[]){const o=s[pt];i.has(o)?i.delete(o):i.set(o,s)}return{type:"multi",data:i}}function A8(n,e){const t=!!(n.empty??!0),r=yo(n.param),i=n.fields??{};if(jm(e))return`${r}.uniqueId == null ? ${t} : ${r}.uniqueId === datum[${JSON.stringify(pt)}]`;if(lf(e))return`${r}.data.size == 0 ? ${t} : mapHasKey(${r}.data, datum[${JSON.stringify(pt)}])`;if(_m(e)){const s=Object.keys(e.intervals),o=Object.keys(i).filter(hf);if(o.length===0)throw new Error("Filtering using interval selections requires at least one primary positional channel in the config! "+JSON.stringify(n));if(o.some(u=>!s.includes(u)))throw new Error(`Selection channels (${s.join(", ")}) do not match the fields: ${JSON.stringify(n)}!`);const a=u=>`datum[${JSON.stringify(u)}]`;return s.map(u=>{const l=pf(u),f=i[u],d=i[l]??i[u],h=`${r}.intervals.${u}[0] <= ${a(d)}`,p=`${a(f)} <= ${r}.intervals.${u}[1]`;return`(${r}.intervals.${u} ? (${h} && ${p}) : ${t})`}).join(" && ")}else throw new Error(`Unrecognized selection type : ${JSON.stringify(e)}`)}function _m(n){return n.type==="interval"}function jm(n){return n.type==="single"}function lf(n){return n.type==="multi"}function Fc(n){const e=typeof n=="string"?{type:n}:{...n};return e.on=e.on?qm(e.on):Pc(e)?{type:"click"}:void 0,e.clear=e.clear===!1?void 0:e.clear===!0||e.clear==null?{type:"dblclick"}:qm(e.clear),Pc(e)&&e.on.type==="click"&&(e.toggle=!0),e}function Pc(n){return n&&n.type=="point"}function Wm(n){return n&&n.type=="interval"}function Qm(n){return Object.values(n.intervals).some(e=>e&&e.length===2)}function v8(n,e){return Object.entries(n.intervals).every(([t,r])=>(t=="x"||t=="y")&&r&&r[0]<=e[t]&&r[1]>=e[t])}function qm(n){if(typeof n=="string"){const e=n.match(/^([a-zA-Z]+)(?:\[(.+)\])?$/);if(!e)throw new Error(`Invalid event type string: ${n}`);const[,t,r]=e,i={type:t};return r&&(i.filter=r),i}else return n}function ue(n,e=n){if(/^[A-Za-z0-9_]+$/.test(n)){const t=function(i){n in i||S8(i,n)},r=new Function("validator",`
                let validated = !validator;
                return function accessField(datum) {
                    if (!validated) {
                        validator(datum);
                        validated = true;
                    }
                    return datum[${JSON.stringify(n)}];
                }`)(t);return $(r,[n],e)}else return Fa(n)}function S8(n,e){throw new Error(`Invalid field "${e}". Available fields or properties: ${Object.keys(n).join(", ")}`)}function Ym(n,e,t){if(!n)return;function r(s){const o=s;return o.fields??(o.fields=[]),o.constant=o.fields.length===0,o.channelDef=e,o.channel=n,o.scaleChannel=((lt(e)&&e.resolutionChannel)??(Rc(n)&&n))||void 0,"param"in e?(o.predicate=Hm(!1),o.predicate.param=e.param,o.predicate.empty=e.empty??!0):(o.predicate=Hm(!0),o.predicate.empty=!1),o.asNumberAccessor=()=>o,o}function i(s){if(We(s)){const o=r(t.createExpression(s.expr));if(o.fields.length>0)throw new Error("Expression in DatumDef/ValueDef cannot access data fields: "+s.expr);return o}else{const o=s;return r(()=>o)}}if(Nn(e))try{return r(ue(e.field))}catch(s){throw new Error(`Invalid field definition: ${s.message}`)}else{if(wo(e))return r(t.createExpression(e.expr));if(bo(e))return i(e.datum);if(xt(e))return i(e.value);throw new Error(`Invalid channel definition: "${n}": ${JSON.stringify(e)}! The channel definition must contain one of the following properties: "field", "datum", "value" or "expr".`)}}function E8(n,e,t){const r=[];if(T8(e)||ff(e)){const i=Array.isArray(e.condition)?e.condition:[e.condition];for(const s of i)r.push(Ym(n,s,t))}if(r.push(Ym(n,e,t)),r.filter(i=>!i.constant).length>1)throw new Error("Only one accessor can be non-constant. Channel: "+n);return r}function C8(n,e){const t={},r=i=>{var s;return(s=n.getScaleResolution(i))==null?void 0:s.scale};for(const[i,s]of Object.entries(e))s&&(t[i]=D8(E8(i,s,n.paramMediator),r));return t}function D8(n,e){if(n.length===1)return Xm(n[0],e);const t=n.map(s=>s.predicate),r=n.map(s=>Xm(s,e));return Object.assign(s=>{for(let o=0;o<r.length;o++)if(t[o](s))return r[o](s)},{constant:!1,accessors:r.map(s=>s.accessors[0]),dataAccessor:r.map(s=>s.dataAccessor).find(s=>s),scale:r.map(s=>s.scale).find(s=>s),channelDef:n.at(-1).channelDef})}function Xm(n,e){const{channel:t,scaleChannel:r,channelDef:i}=n,s=n.scaleChannel?e(r):void 0;if(r&&!s)throw new Error(`Missing scale! "${t}": ${JSON.stringify(i)}`);return Object.assign(s?o=>s(n(o)):o=>n(o),{scale:s,constant:n.constant,accessors:[n],dataAccessor:n.constant?void 0:n,channelDef:i})}function xt(n){return n&&"value"in n}function Nn(n){return n&&"field"in n}function bo(n){return n&&"datum"in n}function lt(n){return Nn(n)||bo(n)||wo(n)||Zm(n)}function Km(n){if(ff(n)){const e=n.condition;if(!Array.isArray(e)&&lt(e))return e}else if(lt(n))return n}function I8(n,e){const t=n.mark.encoding[e];if(lt(t))return t;throw new Error("Not a channel def with scale!")}function Zm(n){return n&&"chrom"in n}function wo(n){return n&&"expr"in n}function T8(n){return(Nn(n)||bo(n))&&"condition"in n}function ff(n){return xt(n)&&"condition"in n}const Dr=["x","y"],B8=["x2","y2"],k8=[...Dr,...B8];function hf(n){return Dr.includes(n)}function Ao(n){return k8.includes(n)}const Jm={x:"x2",y:"y2"},$m=Object.fromEntries(Object.entries(Jm).map(n=>[n[1],n[0]]));function df(n){return n in $m}function pf(n){const e=Jm[n];if(e)return e;throw new Error(`${n} has no secondary channel!`)}function Ir(n){return $m[n]??n}function Ln(n){return["color","fill","stroke"].includes(Ir(n))}function Mc(n){return["shape"].includes(n)}function Rc(n){return["x","y","x2","y2","color","fill","stroke","opacity","fillOpacity","strokeOpacity","strokeWidth","size","shape","angle","dx","dy","sample"].includes(n)}function F8(n){switch(n){case"shape":return["circle","square","cross","diamond","triangle-up","triangle-right","triangle-down","triangle-left","tick-up","tick-right","tick-down","tick-left"]}}function eg(n){if(!Mc(n))throw new Error("Not a discrete channel: "+n);const e=new Map(F8(n).map((t,r)=>[t,r]));return t=>{const r=e.get(t);if(r!==void 0)return r;throw new Error(`Invalid value for "${n}" channel: ${t}`)}}function Ei(n,e,t){return n.fields=e||[],n.fname=t,n}function P8(n){return n.length===1?M8(n[0]):R8(n)}const M8=n=>function(e){return e[n]},R8=n=>{const e=n.length;return function(t){for(let r=0;r<e;++r)t=t[n[r]];return t}};function mf(n){throw Error(n)}function O8(n){const e=[],t=n.length;let r=null,i=0,s="",o,a,c;n=n+"";function u(){e.push(s+n.substring(o,a)),s="",o=a+1}for(o=a=0;a<t;++a)if(c=n[a],c==="\\")s+=n.substring(o,a++),o=a;else if(c===r)u(),r=null,i=-1;else{if(r)continue;o===i&&c==='"'||o===i&&c==="'"?(o=a+1,r=c):c==="."&&!i?a>o?u():o=a+1:c==="["?(a>o&&u(),i=o=a+1):c==="]"&&(i||mf("Access path missing open bracket: "+n),i>0&&u(),i=0,o=a+1)}return i&&mf("Access path missing closing bracket: "+n),r&&mf("Access path missing closing quote: "+n),a>o&&(a++,u()),e}function N8(n,e,t){const r=O8(n);return n=r.length===1?r[0]:n,Ei(P8(r),[n],n)}N8("id"),Ei(n=>n,[],"identity"),Ei(()=>0,[],"zero"),Ei(()=>1,[],"one"),Ei(()=>!0,[],"true"),Ei(()=>!1,[],"false"),[...Object.getOwnPropertyNames(Object.prototype).filter(n=>typeof Object.prototype[n]=="function")];var tg=Array.isArray;function ng(n){return n[n.length-1]}function L8(n){return n==null||n===""?null:+n}function z8(n){return n!=null?tg(n)?n:[n]:[]}function U8(n){const e={},t=n.length;for(let r=0;r<t;++r)e[n[r]]=!0;return e}function _t(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function zn(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const gf=Symbol("implicit");function xf(){var n=new tn,e=[],t=[],r=gf;function i(s){let o=n.get(s);if(o===void 0){if(r!==gf)return r;n.set(s,o=e.push(s)-1)}return t[o%t.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],n=new tn;for(const o of s)n.has(o)||n.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(t=Array.from(s),i):t.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return xf(e,t).unknown(r)},_t.apply(i,arguments),i}function Ci(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function vo(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function Un(){}var Tr=.7,Di=1/Tr,Ii="\\s*([+-]?\\d+)\\s*",So="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",G8=/^#([0-9a-f]{3,8})$/,H8=new RegExp(`^rgb\\(${Ii},${Ii},${Ii}\\)$`),V8=new RegExp(`^rgb\\(${jt},${jt},${jt}\\)$`),_8=new RegExp(`^rgba\\(${Ii},${Ii},${Ii},${So}\\)$`),j8=new RegExp(`^rgba\\(${jt},${jt},${jt},${So}\\)$`),W8=new RegExp(`^hsl\\(${So},${jt},${jt}\\)$`),Q8=new RegExp(`^hsla\\(${So},${jt},${jt},${So}\\)$`),rg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ci(Un,Gn,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:ig,formatHex:ig,formatHex8:q8,formatHsl:Y8,formatRgb:sg,toString:sg});function ig(){return this.rgb().formatHex()}function q8(){return this.rgb().formatHex8()}function Y8(){return lg(this).formatHsl()}function sg(){return this.rgb().formatRgb()}function Gn(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=G8.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?og(e):t===3?new Me(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Oc(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Oc(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=H8.exec(n))?new Me(e[1],e[2],e[3],1):(e=V8.exec(n))?new Me(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=_8.exec(n))?Oc(e[1],e[2],e[3],e[4]):(e=j8.exec(n))?Oc(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=W8.exec(n))?ug(e[1],e[2]/100,e[3]/100,1):(e=Q8.exec(n))?ug(e[1],e[2]/100,e[3]/100,e[4]):rg.hasOwnProperty(n)?og(rg[n]):n==="transparent"?new Me(NaN,NaN,NaN,0):null}function og(n){return new Me(n>>16&255,n>>8&255,n&255,1)}function Oc(n,e,t,r){return r<=0&&(n=e=t=NaN),new Me(n,e,t,r)}function yf(n){return n instanceof Un||(n=Gn(n)),n?(n=n.rgb(),new Me(n.r,n.g,n.b,n.opacity)):new Me}function Nc(n,e,t,r){return arguments.length===1?yf(n):new Me(n,e,t,r??1)}function Me(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}Ci(Me,Nc,vo(Un,{brighter(n){return n=n==null?Di:Math.pow(Di,n),new Me(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Tr:Math.pow(Tr,n),new Me(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Me(Br(this.r),Br(this.g),Br(this.b),Lc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ag,formatHex:ag,formatHex8:X8,formatRgb:cg,toString:cg}));function ag(){return`#${kr(this.r)}${kr(this.g)}${kr(this.b)}`}function X8(){return`#${kr(this.r)}${kr(this.g)}${kr(this.b)}${kr((isNaN(this.opacity)?1:this.opacity)*255)}`}function cg(){const n=Lc(this.opacity);return`${n===1?"rgb(":"rgba("}${Br(this.r)}, ${Br(this.g)}, ${Br(this.b)}${n===1?")":`, ${n})`}`}function Lc(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Br(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function kr(n){return n=Br(n),(n<16?"0":"")+n.toString(16)}function ug(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Bt(n,e,t,r)}function lg(n){if(n instanceof Bt)return new Bt(n.h,n.s,n.l,n.opacity);if(n instanceof Un||(n=Gn(n)),!n)return new Bt;if(n instanceof Bt)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),s=Math.max(e,t,r),o=NaN,a=s-i,c=(s+i)/2;return a?(e===s?o=(t-r)/a+(t<r)*6:t===s?o=(r-e)/a+2:o=(e-t)/a+4,a/=c<.5?s+i:2-s-i,o*=60):a=c>0&&c<1?0:o,new Bt(o,a,c,n.opacity)}function bf(n,e,t,r){return arguments.length===1?lg(n):new Bt(n,e,t,r??1)}function Bt(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Ci(Bt,bf,vo(Un,{brighter(n){return n=n==null?Di:Math.pow(Di,n),new Bt(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Tr:Math.pow(Tr,n),new Bt(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Me(wf(n>=240?n-240:n+120,i,r),wf(n,i,r),wf(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Bt(fg(this.h),zc(this.s),zc(this.l),Lc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Lc(this.opacity);return`${n===1?"hsl(":"hsla("}${fg(this.h)}, ${zc(this.s)*100}%, ${zc(this.l)*100}%${n===1?")":`, ${n})`}`}}));function fg(n){return n=(n||0)%360,n<0?n+360:n}function zc(n){return Math.max(0,Math.min(1,n||0))}function wf(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const hg=Math.PI/180,dg=180/Math.PI,Uc=18,pg=.96422,mg=1,gg=.82521,xg=4/29,Ti=6/29,yg=3*Ti*Ti,K8=Ti*Ti*Ti;function bg(n){if(n instanceof Wt)return new Wt(n.l,n.a,n.b,n.opacity);if(n instanceof ln)return wg(n);n instanceof Me||(n=yf(n));var e=Cf(n.r),t=Cf(n.g),r=Cf(n.b),i=vf((.2225045*e+.7168786*t+.0606169*r)/mg),s,o;return e===t&&t===r?s=o=i:(s=vf((.4360747*e+.3850649*t+.1430804*r)/pg),o=vf((.0139322*e+.0971045*t+.7141733*r)/gg)),new Wt(116*i-16,500*(s-i),200*(i-o),n.opacity)}function Af(n,e,t,r){return arguments.length===1?bg(n):new Wt(n,e,t,r??1)}function Wt(n,e,t,r){this.l=+n,this.a=+e,this.b=+t,this.opacity=+r}Ci(Wt,Af,vo(Un,{brighter(n){return new Wt(this.l+Uc*(n??1),this.a,this.b,this.opacity)},darker(n){return new Wt(this.l-Uc*(n??1),this.a,this.b,this.opacity)},rgb(){var n=(this.l+16)/116,e=isNaN(this.a)?n:n+this.a/500,t=isNaN(this.b)?n:n-this.b/200;return e=pg*Sf(e),n=mg*Sf(n),t=gg*Sf(t),new Me(Ef(3.1338561*e-1.6168667*n-.4906146*t),Ef(-.9787684*e+1.9161415*n+.033454*t),Ef(.0719453*e-.2289914*n+1.4052427*t),this.opacity)}}));function vf(n){return n>K8?Math.pow(n,1/3):n/yg+xg}function Sf(n){return n>Ti?n*n*n:yg*(n-xg)}function Ef(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function Cf(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Z8(n){if(n instanceof ln)return new ln(n.h,n.c,n.l,n.opacity);if(n instanceof Wt||(n=bg(n)),n.a===0&&n.b===0)return new ln(NaN,0<n.l&&n.l<100?0:NaN,n.l,n.opacity);var e=Math.atan2(n.b,n.a)*dg;return new ln(e<0?e+360:e,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity)}function Df(n,e,t,r){return arguments.length===1?Z8(n):new ln(n,e,t,r??1)}function ln(n,e,t,r){this.h=+n,this.c=+e,this.l=+t,this.opacity=+r}function wg(n){if(isNaN(n.h))return new Wt(n.l,0,0,n.opacity);var e=n.h*hg;return new Wt(n.l,Math.cos(e)*n.c,Math.sin(e)*n.c,n.opacity)}Ci(ln,Df,vo(Un,{brighter(n){return new ln(this.h,this.c,this.l+Uc*(n??1),this.opacity)},darker(n){return new ln(this.h,this.c,this.l-Uc*(n??1),this.opacity)},rgb(){return wg(this).rgb()}}));var Ag=-.14861,If=1.78277,Tf=-.29227,Gc=-.90649,Eo=1.97294,vg=Eo*Gc,Sg=Eo*If,Eg=If*Tf-Gc*Ag;function J8(n){if(n instanceof Fr)return new Fr(n.h,n.s,n.l,n.opacity);n instanceof Me||(n=yf(n));var e=n.r/255,t=n.g/255,r=n.b/255,i=(Eg*r+vg*e-Sg*t)/(Eg+vg-Sg),s=r-i,o=(Eo*(t-i)-Tf*s)/Gc,a=Math.sqrt(o*o+s*s)/(Eo*i*(1-i)),c=a?Math.atan2(o,s)*dg-120:NaN;return new Fr(c<0?c+360:c,a,i,n.opacity)}function Bf(n,e,t,r){return arguments.length===1?J8(n):new Fr(n,e,t,r??1)}function Fr(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Ci(Fr,Bf,vo(Un,{brighter(n){return n=n==null?Di:Math.pow(Di,n),new Fr(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Tr:Math.pow(Tr,n),new Fr(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=isNaN(this.h)?0:(this.h+120)*hg,e=+this.l,t=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(n),i=Math.sin(n);return new Me(255*(e+t*(Ag*r+If*i)),255*(e+t*(Tf*r+Gc*i)),255*(e+t*(Eo*r)),this.opacity)}}));function Cg(n,e,t,r,i){var s=n*n,o=s*n;return((1-3*n+3*s-o)*e+(4-6*s+3*o)*t+(1+3*n+3*s-3*o)*r+o*i)/6}function Dg(n){var e=n.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),i=n[r],s=n[r+1],o=r>0?n[r-1]:2*i-s,a=r<e-1?n[r+2]:2*s-i;return Cg((t-r/e)*e,o,i,s,a)}}function Ig(n){var e=n.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*e),i=n[(r+e-1)%e],s=n[r%e],o=n[(r+1)%e],a=n[(r+2)%e];return Cg((t-r/e)*e,i,s,o,a)}}const Hc=n=>()=>n;function Tg(n,e){return function(t){return n+t*e}}function $8(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function Vc(n,e){var t=e-n;return t?Tg(n,t>180||t<-180?t-360*Math.round(t/360):t):Hc(isNaN(n)?e:n)}function eD(n){return(n=+n)==1?Re:function(e,t){return t-e?$8(e,t,n):Hc(isNaN(e)?t:e)}}function Re(n,e){var t=e-n;return t?Tg(n,t):Hc(isNaN(n)?e:n)}const kf=function n(e){var t=eD(e);function r(i,s){var o=t((i=Nc(i)).r,(s=Nc(s)).r),a=t(i.g,s.g),c=t(i.b,s.b),u=Re(i.opacity,s.opacity);return function(l){return i.r=o(l),i.g=a(l),i.b=c(l),i.opacity=u(l),i+""}}return r.gamma=n,r}(1);function Bg(n){return function(e){var t=e.length,r=new Array(t),i=new Array(t),s=new Array(t),o,a;for(o=0;o<t;++o)a=Nc(e[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=n(r),i=n(i),s=n(s),a.opacity=1,function(c){return a.r=r(c),a.g=i(c),a.b=s(c),a+""}}}var tD=Bg(Dg),nD=Bg(Ig);function Ff(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(s){for(i=0;i<t;++i)r[i]=n[i]*(1-s)+e[i]*s;return r}}function kg(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function rD(n,e){return(kg(e)?Ff:Fg)(n,e)}function Fg(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),s=new Array(t),o;for(o=0;o<r;++o)i[o]=Hn(n[o],e[o]);for(;o<t;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Pg(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function kt(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function Mg(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=Hn(n[i],e[i]):r[i]=e[i];return function(s){for(i in t)r[i]=t[i](s);return r}}var Pf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mf=new RegExp(Pf.source,"g");function iD(n){return function(){return n}}function sD(n){return function(e){return n(e)+""}}function Rg(n,e){var t=Pf.lastIndex=Mf.lastIndex=0,r,i,s,o=-1,a=[],c=[];for(n=n+"",e=e+"";(r=Pf.exec(n))&&(i=Mf.exec(e));)(s=i.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,c.push({i:o,x:kt(r,i)})),t=Mf.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?sD(c[0].x):iD(e):(e=c.length,function(u){for(var l=0,f;l<e;++l)a[(f=c[l]).i]=f.x(u);return a.join("")})}function Hn(n,e){var t=typeof e,r;return e==null||t==="boolean"?Hc(e):(t==="number"?kt:t==="string"?(r=Gn(e))?(e=r,kf):Rg:e instanceof Gn?kf:e instanceof Date?Pg:kg(e)?Ff:Array.isArray(e)?Fg:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Mg:kt)(n,e)}function oD(n){var e=n.length;return function(t){return n[Math.max(0,Math.min(e-1,Math.floor(t*e)))]}}function aD(n,e){var t=Vc(+n,+e);return function(r){var i=t(r);return i-360*Math.floor(i/360)}}function Co(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}var Og=180/Math.PI,Rf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ng(n,e,t,r,i,s){var o,a,c;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(c=n*t+e*r)&&(t-=n*c,r-=e*c),(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a,c/=a),n*r<e*t&&(n=-n,e=-e,c=-c,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,n)*Og,skewX:Math.atan(c)*Og,scaleX:o,scaleY:a}}var _c;function cD(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?Rf:Ng(e.a,e.b,e.c,e.d,e.e,e.f)}function uD(n){return n==null||(_c||(_c=document.createElementNS("http://www.w3.org/2000/svg","g")),_c.setAttribute("transform",n),!(n=_c.transform.baseVal.consolidate()))?Rf:(n=n.matrix,Ng(n.a,n.b,n.c,n.d,n.e,n.f))}function Lg(n,e,t,r){function i(u){return u.length?u.pop()+" ":""}function s(u,l,f,d,h,p){if(u!==f||l!==d){var m=h.push("translate(",null,e,null,t);p.push({i:m-4,x:kt(u,f)},{i:m-2,x:kt(l,d)})}else(f||d)&&h.push("translate("+f+e+d+t)}function o(u,l,f,d){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:kt(u,l)})):l&&f.push(i(f)+"rotate("+l+r)}function a(u,l,f,d){u!==l?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:kt(u,l)}):l&&f.push(i(f)+"skewX("+l+r)}function c(u,l,f,d,h,p){if(u!==f||l!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:kt(u,f)},{i:m-2,x:kt(l,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(u,l){var f=[],d=[];return u=n(u),l=n(l),s(u.translateX,u.translateY,l.translateX,l.translateY,f,d),o(u.rotate,l.rotate,f,d),a(u.skewX,l.skewX,f,d),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,f,d),u=l=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var lD=Lg(cD,"px, ","px)","deg)"),fD=Lg(uD,", ",")",")"),hD=1e-12;function zg(n){return((n=Math.exp(n))+1/n)/2}function dD(n){return((n=Math.exp(n))-1/n)/2}function pD(n){return((n=Math.exp(2*n))-1)/(n+1)}const mD=function n(e,t,r){function i(s,o){var a=s[0],c=s[1],u=s[2],l=o[0],f=o[1],d=o[2],h=l-a,p=f-c,m=h*h+p*p,g,x;if(m<hD)x=Math.log(d/u)/e,g=function(v){return[a+v*h,c+v*p,u*Math.exp(e*v*x)]};else{var b=Math.sqrt(m),w=(d*d-u*u+r*m)/(2*u*t*b),A=(d*d-u*u-r*m)/(2*d*t*b),S=Math.log(Math.sqrt(w*w+1)-w),C=Math.log(Math.sqrt(A*A+1)-A);x=(C-S)/e,g=function(v){var T=v*x,P=zg(S),F=u/(t*b)*(P*pD(e*T+S)-dD(S));return[a+F*h,c+F*p,u*P/zg(e*T+S)]}}return g.duration=x*1e3*e/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,c=a*a;return n(o,a,c)},i}(Math.SQRT2,2,4);function Ug(n){return function(e,t){var r=n((e=bf(e)).h,(t=bf(t)).h),i=Re(e.s,t.s),s=Re(e.l,t.l),o=Re(e.opacity,t.opacity);return function(a){return e.h=r(a),e.s=i(a),e.l=s(a),e.opacity=o(a),e+""}}}const gD=Ug(Vc);var xD=Ug(Re);function yD(n,e){var t=Re((n=Af(n)).l,(e=Af(e)).l),r=Re(n.a,e.a),i=Re(n.b,e.b),s=Re(n.opacity,e.opacity);return function(o){return n.l=t(o),n.a=r(o),n.b=i(o),n.opacity=s(o),n+""}}function Gg(n){return function(e,t){var r=n((e=Df(e)).h,(t=Df(t)).h),i=Re(e.c,t.c),s=Re(e.l,t.l),o=Re(e.opacity,t.opacity);return function(a){return e.h=r(a),e.c=i(a),e.l=s(a),e.opacity=o(a),e+""}}}const bD=Gg(Vc);var wD=Gg(Re);function Hg(n){return function e(t){t=+t;function r(i,s){var o=n((i=Bf(i)).h,(s=Bf(s)).h),a=Re(i.s,s.s),c=Re(i.l,s.l),u=Re(i.opacity,s.opacity);return function(l){return i.h=o(l),i.s=a(l),i.l=c(Math.pow(l,t)),i.opacity=u(l),i+""}}return r.gamma=e,r}(1)}const AD=Hg(Vc);var vD=Hg(Re);function Of(n,e){e===void 0&&(e=n,n=Hn);for(var t=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);t<r;)s[t]=n(i,i=e[++t]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function SD(n,e){for(var t=new Array(e),r=0;r<e;++r)t[r]=n(r/(e-1));return t}const ED=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Hn,interpolateArray:rD,interpolateBasis:Dg,interpolateBasisClosed:Ig,interpolateCubehelix:AD,interpolateCubehelixLong:vD,interpolateDate:Pg,interpolateDiscrete:oD,interpolateHcl:bD,interpolateHclLong:wD,interpolateHsl:gD,interpolateHslLong:xD,interpolateHue:aD,interpolateLab:yD,interpolateNumber:kt,interpolateNumberArray:Ff,interpolateObject:Mg,interpolateRgb:kf,interpolateRgbBasis:tD,interpolateRgbBasisClosed:nD,interpolateRound:Co,interpolateString:Rg,interpolateTransformCss:lD,interpolateTransformSvg:fD,interpolateZoom:mD,piecewise:Of,quantize:SD},Symbol.toStringTag,{value:"Module"}));function CD(n){return function(){return n}}function Nf(n){return+n}var Vg=[0,1];function ot(n){return n}function Lf(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:CD(isNaN(e)?NaN:.5)}function DD(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function ID(n,e,t){var r=n[0],i=n[1],s=e[0],o=e[1];return i<r?(r=Lf(i,r),s=t(o,s)):(r=Lf(r,i),s=t(s,o)),function(a){return s(r(a))}}function TD(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Lf(n[o],n[o+1]),s[o]=t(e[o],e[o+1]);return function(a){var c=Dn(n,a,1,r)-1;return s[c](i[c](a))}}function Do(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function jc(){var n=Vg,e=Vg,t=Hn,r,i,s,o=ot,a,c,u;function l(){var d=Math.min(n.length,e.length);return o!==ot&&(o=DD(n[0],n[d-1])),a=d>2?TD:ID,c=u=null,f}function f(d){return d==null||isNaN(d=+d)?s:(c||(c=a(n.map(r),e,t)))(r(o(d)))}return f.invert=function(d){return o(i((u||(u=a(e,n.map(r),kt)))(d)))},f.domain=function(d){return arguments.length?(n=Array.from(d,Nf),l()):n.slice()},f.range=function(d){return arguments.length?(e=Array.from(d),l()):e.slice()},f.rangeRound=function(d){return e=Array.from(d),t=Co,l()},f.clamp=function(d){return arguments.length?(o=d?!0:ot,l()):o!==ot},f.interpolate=function(d){return arguments.length?(t=d,l()):t},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,l()}}function _g(){return jc()(ot,ot)}function jg(n,e,t,r){var i=pr(n,e,t),s;switch(r=ai(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(s=yv(i,o))&&(r.precision=s),v0(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=bv(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=xv(i))&&(r.precision=s-(r.type==="%")*2);break}}return Le(r)}function Pr(n){var e=n.domain;return n.ticks=function(t){var r=e();return Ha(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return jg(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],c,u,l=10;for(a<o&&(u=o,o=a,a=u,u=i,i=s,s=u);l-- >0;){if(u=Ju(o,a,t),u===c)return r[i]=o,r[s]=a,e(r);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;c=u}return n},n}function Wg(){var n=_g();return n.copy=function(){return Do(n,Wg())},_t.apply(n,arguments),Pr(n)}function Qg(n){var e;function t(r){return r==null||isNaN(r=+r)?e:r}return t.invert=t,t.domain=t.range=function(r){return arguments.length?(n=Array.from(r,Nf),t):n.slice()},t.unknown=function(r){return arguments.length?(e=r,t):e},t.copy=function(){return Qg(n).unknown(e)},n=arguments.length?Array.from(n,Nf):[0,1],Pr(t)}function qg(n,e){n=n.slice();var t=0,r=n.length-1,i=n[t],s=n[r],o;return s<i&&(o=t,t=r,r=o,o=i,i=s,s=o),n[t]=e.floor(i),n[r]=e.ceil(s),n}function Yg(n){return Math.log(n)}function Xg(n){return Math.exp(n)}function BD(n){return-Math.log(-n)}function kD(n){return-Math.exp(-n)}function FD(n){return isFinite(n)?+("1e"+n):n<0?0:n}function PD(n){return n===10?FD:n===Math.E?Math.exp:e=>Math.pow(n,e)}function MD(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function Kg(n){return(e,t)=>-n(-e,t)}function zf(n){const e=n(Yg,Xg),t=e.domain;let r=10,i,s;function o(){return i=MD(r),s=PD(r),t()[0]<0?(i=Kg(i),s=Kg(s),n(BD,kD)):n(Yg,Xg),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(t(a),o()):t()},e.ticks=a=>{const c=t();let u=c[0],l=c[c.length-1];const f=l<u;f&&([u,l]=[l,u]);let d=i(u),h=i(l),p,m;const g=a==null?10:+a;let x=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),u>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<u)){if(m>l)break;x.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<u)){if(m>l)break;x.push(m)}x.length*2<g&&(x=Ha(u,l,g))}else x=Ha(d,h,Math.min(h-d,g)).map(s);return f?x.reverse():x},e.tickFormat=(a,c)=>{if(a==null&&(a=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=ai(c)).precision==null&&(c.trim=!0),c=Le(c)),a===1/0)return c;const u=Math.max(1,r*a/e.ticks().length);return l=>{let f=l/s(Math.round(i(l)));return f*r<r-.5&&(f*=r),f<=u?c(l):""}},e.nice=()=>t(qg(t(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),e}function Uf(){const n=zf(jc()).domain([1,10]);return n.copy=()=>Do(n,Uf()).base(n.base()),_t.apply(n,arguments),n}function Zg(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function Jg(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function Gf(n){var e=1,t=n(Zg(e),Jg(e));return t.constant=function(r){return arguments.length?n(Zg(e=+r),Jg(e)):e},Pr(t)}function $g(){var n=Gf(jc());return n.copy=function(){return Do(n,$g()).constant(n.constant())},_t.apply(n,arguments)}function e1(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function RD(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function OD(n){return n<0?-n*n:n*n}function Hf(n){var e=n(ot,ot),t=1;function r(){return t===1?n(ot,ot):t===.5?n(RD,OD):n(e1(t),e1(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,r()):t},Pr(e)}function Vf(){var n=Hf(jc());return n.copy=function(){return Do(n,Vf()).exponent(n.exponent())},_t.apply(n,arguments),n}function ND(){return Vf.apply(null,arguments).exponent(.5)}function t1(){var n=[],e=[],t=[],r;function i(){var o=0,a=Math.max(1,e.length);for(t=new Array(a-1);++o<a;)t[o-1]=m0(n,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:e[Dn(t,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?t[a-1]:n[0],a<t.length?t[a]:n[n.length-1]]},s.domain=function(o){if(!arguments.length)return n.slice();n=[];for(let a of o)a!=null&&!isNaN(a=+a)&&n.push(a);return n.sort(hr),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return t.slice()},s.copy=function(){return t1().domain(n).range(e).unknown(r)},_t.apply(s,arguments)}function n1(){var n=0,e=1,t=1,r=[.5],i=[0,1],s;function o(c){return c!=null&&c<=c?i[Dn(r,c,0,t)]:s}function a(){var c=-1;for(r=new Array(t);++c<t;)r[c]=((c+1)*e-(c-t)*n)/(t+1);return o}return o.domain=function(c){return arguments.length?([n,e]=c,n=+n,e=+e,a()):[n,e]},o.range=function(c){return arguments.length?(t=(i=Array.from(c)).length-1,a()):i.slice()},o.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[n,r[0]]:u>=t?[r[t-1],e]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return n1().domain([n,e]).range(i).unknown(s)},_t.apply(Pr(o),arguments)}function r1(){var n=[.5],e=[0,1],t,r=1;function i(s){return s!=null&&s<=s?e[Dn(n,s,0,r)]:t}return i.domain=function(s){return arguments.length?(n=Array.from(s),r=Math.min(n.length,e.length-1),i):n.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(n.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[n[o-1],n[o]]},i.unknown=function(s){return arguments.length?(t=s,i):t},i.copy=function(){return r1().domain(n).range(e).unknown(t)},_t.apply(i,arguments)}function LD(n){return new Date(n)}function zD(n){return n instanceof Date?+n:+new Date(+n)}function _f(n,e,t,r,i,s,o,a,c,u){var l=_g(),f=l.invert,d=l.domain,h=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),x=u("%a %d"),b=u("%b %d"),w=u("%B"),A=u("%Y");function S(C){return(c(C)<C?h:a(C)<C?p:o(C)<C?m:s(C)<C?g:r(C)<C?i(C)<C?x:b:t(C)<C?w:A)(C)}return l.invert=function(C){return new Date(f(C))},l.domain=function(C){return arguments.length?d(Array.from(C,zD)):d().map(LD)},l.ticks=function(C){var v=d();return n(v[0],v[v.length-1],C??10)},l.tickFormat=function(C,v){return v==null?S:u(v)},l.nice=function(C){var v=d();return(!C||typeof C.range!="function")&&(C=e(v[0],v[v.length-1],C??10)),C?d(qg(v,C)):l},l.copy=function(){return Do(l,_f(n,e,t,r,i,s,o,a,c,u))},l}function UD(){return _t.apply(_f(kv,Fv,Lt,fi,Vs,In,Qa,ja,on,ul).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function GD(){return _t.apply(_f(Tv,Bv,zt,hi,_s,mr,qa,Wa,on,ll).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Wc(){var n=0,e=1,t,r,i,s,o=ot,a=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(i===0?.5:(f=(s(f)-t)*i,a?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([n,e]=f,t=s(n=+n),r=s(e=+e),i=t===r?0:1/(r-t),u):[n,e]},u.clamp=function(f){return arguments.length?(a=!!f,u):a},u.interpolator=function(f){return arguments.length?(o=f,u):o};function l(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),u):[o(0),o(1)]}}return u.range=l(Hn),u.rangeRound=l(Co),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,t=f(n),r=f(e),i=t===r?0:1/(r-t),u}}function Vn(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function jf(){var n=Pr(Wc()(ot));return n.copy=function(){return Vn(n,jf())},zn.apply(n,arguments)}function i1(){var n=zf(Wc()).domain([1,10]);return n.copy=function(){return Vn(n,i1()).base(n.base())},zn.apply(n,arguments)}function s1(){var n=Gf(Wc());return n.copy=function(){return Vn(n,s1()).constant(n.constant())},zn.apply(n,arguments)}function Wf(){var n=Hf(Wc());return n.copy=function(){return Vn(n,Wf()).exponent(n.exponent())},zn.apply(n,arguments)}function HD(){return Wf.apply(null,arguments).exponent(.5)}function Qc(){var n=0,e=.5,t=1,r=1,i,s,o,a,c,u=ot,l,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+l(m))-s)*(r*m<r*s?a:c),u(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([n,e,t]=m,i=l(n=+n),s=l(e=+e),o=l(t=+t),a=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),r=s<i?-1:1,h):[n,e,t]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(u=m,h):u};function p(m){return function(g){var x,b,w;return arguments.length?([x,b,w]=g,u=Of(m,[x,b,w]),h):[u(0),u(.5),u(1)]}}return h.range=p(Hn),h.rangeRound=p(Co),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return l=m,i=m(n),s=m(e),o=m(t),a=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function o1(){var n=Pr(Qc()(ot));return n.copy=function(){return Vn(n,o1())},zn.apply(n,arguments)}function a1(){var n=zf(Qc()).domain([.1,1,10]);return n.copy=function(){return Vn(n,a1()).base(n.base())},zn.apply(n,arguments)}function c1(){var n=Gf(Qc());return n.copy=function(){return Vn(n,c1()).constant(n.constant())},zn.apply(n,arguments)}function Qf(){var n=Hf(Qc());return n.copy=function(){return Vn(n,Qf()).exponent(n.exponent())},zn.apply(n,arguments)}function VD(){return Qf.apply(null,arguments).exponent(.5)}function Qt(n){for(var e=n.length/6|0,t=new Array(e),r=0;r<e;)t[r]="#"+n.slice(r*6,++r*6);return t}const _D=Qt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),jD=Qt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),WD=Qt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),QD=Qt("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),qD=Qt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),YD=Qt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),XD=Qt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),KD=Qt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),ZD=Qt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),JD=Qt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),$D="year",qf="quarter";[$D,qf,"month","week","date","day","dayofyear","hours","minutes","seconds","milliseconds"].reduce((n,e,t)=>(n[e]=1+t,n),{}),qf+"",fi.every(3),qf+"",hi.every(3);function Yf(n,e,t){const r=n-e+t*2;return n?r>0?r:1:0}const eI="identity",Bi="linear",_n="log",Io="pow",To="sqrt",qc="symlog",u1="time",l1="utc",qt="sequential",ki="diverging",Xf="quantile",f1="quantize",h1="threshold",Kf="ordinal",Zf="point",d1="band",Jf="bin-ordinal",Be="continuous",Bo="discrete",ko="discretizing",yt="interpolating",p1="temporal";function tI(n){return function(e){let t=e[0],r=e[1],i;return r<t&&(i=t,t=r,r=i),[n.invert(t),n.invert(r)]}}function nI(n){return function(e){const t=n.range();let r=e[0],i=e[1],s=-1,o,a,c,u;for(i<r&&(a=r,r=i,i=a),c=0,u=t.length;c<u;++c)t[c]>=r&&t[c]<=i&&(s<0&&(s=c),o=c);if(!(s<0))return r=n.invertExtent(t[s]),i=n.invertExtent(t[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function $f(){const n=xf().unknown(void 0),e=n.domain,t=n.range;let r=[0,1],i,s,o=!1,a=0,c=0,u=.5;delete n.unknown;function l(){const f=e().length,d=r[1]<r[0],h=r[1-d],p=Yf(f,a,c);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*u,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Gs(f).map(x=>m+i*x);return t(d?g.reverse():g)}return n.domain=function(f){return arguments.length?(e(f),l()):e()},n.range=function(f){return arguments.length?(r=[+f[0],+f[1]],l()):r.slice()},n.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,l()},n.bandwidth=function(){return s},n.step=function(){return i},n.round=function(f){return arguments.length?(o=!!f,l()):o},n.padding=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),a=c,l()):a},n.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),l()):a},n.paddingOuter=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),l()):c},n.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),l()):u},n.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?t().reverse():t(),p=h.length-1;let m=+f[0],g=+f[1],x,b,w;if(!(m!==m||g!==g)&&(g<m&&(w=m,m=g,g=w),!(g<h[0]||m>r[1-d])))return x=Math.max(0,Dn(h,m)-1),b=m===g?x:Dn(h,g)-1,m-h[x]>s+1e-10&&++x,d&&(w=x,x=p-b,b=p-w),x>b?void 0:e().slice(x,b+1)},n.invert=function(f){const d=n.invertRange([f,f]);return d&&d[0]},n.copy=function(){return $f().domain(e()).range(r).round(o).paddingInner(a).paddingOuter(c).align(u)},l()}function m1(n){const e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,n.copy=function(){return m1(e())},n}function rI(){return m1($f().paddingInner(1))}var iI=Array.prototype.map;function sI(n){return iI.call(n,L8)}const oI=Array.prototype.slice;function g1(){let n=[],e=[];function t(r){return r==null||r!==r?void 0:e[(Dn(n,r)-1)%e.length]}return t.domain=function(r){return arguments.length?(n=sI(r),t):n.slice()},t.range=function(r){return arguments.length?(e=oI.call(r),t):e.slice()},t.tickFormat=function(r,i){return jg(n[0],ng(n),r??10,i)},t.copy=function(){return g1().domain(t.domain()).range(t.range())},t}const Yc=new Map,aI=Symbol("vega_scale");function cI(n){return n[aI]=!0,n}function uI(n,e,t){const r=function(){const s=e();return s.invertRange||(s.invertRange=s.invert?tI(s):s.invertExtent?nI(s):void 0),s.type=n,cI(s)};return r.metadata=U8(z8(t)),r}function le(n,e,t){return arguments.length>1?(Yc.set(n,uI(n,e,t)),this):lI(n)?Yc.get(n):void 0}le(eI,Qg),le(Bi,Wg,Be),le(_n,Uf,[Be,_n]),le(Io,Vf,Be),le(To,ND,Be),le(qc,$g,Be),le(u1,UD,[Be,p1]),le(l1,GD,[Be,p1]),le(qt,jf,[Be,yt]),le(`${qt}-${Bi}`,jf,[Be,yt]),le(`${qt}-${_n}`,i1,[Be,yt,_n]),le(`${qt}-${Io}`,Wf,[Be,yt]),le(`${qt}-${To}`,HD,[Be,yt]),le(`${qt}-${qc}`,s1,[Be,yt]),le(`${ki}-${Bi}`,o1,[Be,yt]),le(`${ki}-${_n}`,a1,[Be,yt,_n]),le(`${ki}-${Io}`,Qf,[Be,yt]),le(`${ki}-${To}`,VD,[Be,yt]),le(`${ki}-${qc}`,c1,[Be,yt]),le(Xf,t1,[ko,Xf]),le(f1,n1,ko),le(h1,r1,ko),le(Jf,g1,[Bo,ko]),le(Kf,xf,Bo),le(d1,$f,Bo),le(Zf,rI,Bo);function lI(n){return Yc.has(n)}function Fo(n,e){const t=Yc.get(n);return t&&t.metadata[e]}function Oe(n){return Fo(n,Be)}function jn(n){return Fo(n,Bo)}function Mr(n){return Fo(n,ko)}function x1(n){return Fo(n,_n)}function Xc(n){return Fo(n,yt)}function fI(n,e){const t=e[0],r=ng(e)-t;return function(i){return n(t+i*r)}}function Kc(n,e,t){return Of(y1(e||"rgb",t),n)}function hI(n,e){const t=new Array(e),r=e+1;for(let i=0;i<e;)t[i]=n(++i/r);return t}function y1(n,e){const t=ED[dI(n)];return e!=null&&t&&t.gamma?t.gamma(e):t}function dI(n){return"interpolate"+n.toLowerCase().split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join("")}const pI={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},mI={accent:jD,category10:_D,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:WD,observable10:QD,paired:qD,pastel1:YD,pastel2:XD,set1:KD,set2:ZD,set3:JD,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function b1(n){if(tg(n))return n;const e=n.length/6|0,t=new Array(e);for(let r=0;r<e;)t[r]="#"+n.slice(r*6,++r*6);return t}function w1(n,e){for(const t in n)eh(t,e(n[t]))}const A1={};w1(mI,b1),w1(pI,n=>Kc(b1(n)));function eh(n,e){return n=n&&n.toLowerCase(),arguments.length>1?(A1[n]=e,this):A1[n]}function th(){const n=e=>e;return n.invert=e=>e,n.copy=th,n.invertRange=()=>{},n.type="null",n}class gI{constructor(e,t,r={}){this._container=e,this._sizeSource=t??(()=>({width:void 0,height:void 0})),this._shaderCache=new Map,this.rangeTextures=new WeakMap,this.selectionTextures=new WeakMap;const i=document.createElement("canvas");e.appendChild(i);const s=V3(i,{antialias:!0,depth:!1,premultipliedAlpha:!0,...r});if(!s)throw new Error("Unable to initialize WebGL. Your browser or machine may not support it.");if(!pi(s))throw new Error("Your web browser does not support WebGL 2.0. Chrome, Firefox, and Safari Tech Preview should work.");dm(s);const o=s.getExtension("WEBGL_provoking_vertex");o&&o.provokingVertexWEBGL(o.FIRST_VERTEX_CONVENTION_WEBGL),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),this.canvas=i,this.gl=s,this._pickingAttachmentOptions=[{format:s.RGBA,type:s.UNSIGNED_BYTE,minMag:s.LINEAR,wrap:s.CLAMP_TO_EDGE}],this._pickingBufferInfo=fm(s,this._pickingAttachmentOptions),s.bindFramebuffer(s.FRAMEBUFFER,null),this.adjustGl()}invalidateSize(){this._logicalCanvasSize=void 0,this.adjustGl()}compileShader(e,t){const r="#version 300 es",i="precision mediump float;";Ue(t)&&(t=t.join(`

`));const s=this.gl,o=t.replaceAll(/ {2,}|^\s*\/\/.*$/gm,"");let a=this._shaderCache.get(o);if(!a){const c=[r,i,t].join(`

`);a=s.createShader(e),s.shaderSource(a,c),s.compileShader(a),this._shaderCache.set(o,a)}return a}adjustGl(){const e=this.getLogicalCanvasSize();this.canvas.style.width=`${e.width}px`,this.canvas.style.height=`${e.height}px`;const t=this.getPhysicalCanvasSize(e);this.canvas.width=t.width,this.canvas.height=t.height,L3(this.gl,this._pickingBufferInfo,this._pickingAttachmentOptions)}finalize(){this.canvas.remove()}getPhysicalCanvasSize(e){const t=window.devicePixelRatio??1;return e=e||this.getLogicalCanvasSize(),{width:e.width*t,height:e.height*t}}getLogicalCanvasSize(){if(this._logicalCanvasSize)return this._logicalCanvasSize;const e=this._sizeSource(),t=window.getComputedStyle(this._container,null),r=e.width??this._container.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight),i=e.height??this._container.clientHeight-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom);return this._logicalCanvasSize={width:r,height:i},this._logicalCanvasSize}createRangeTexture(e,t=!1){const r=this.rangeTextures.get(e.scale);if(!t&&r)return;function i(o,a){return jn(a.type)?a.domain().length:a.type=="threshold"?a.domain().length+1:a.type=="quantize"||a.type=="quantile"?o??4:o}const s=e.channel;if(Ln(s)){const o=e.scale,a=o.props,c=o.range();let u;if(a.scheme)if(o.type=="threshold"&&c)u=nh(c,this.gl,o.domain().length,r);else{let l=me(a.scheme)?void 0:a.scheme.count;l=i(l,o),u=AI(a.scheme,this.gl,l,r)}else Xc(o.type)||Oe(o.type)&&c.length>1?u=vI(c,a.interpolate,this.gl,r):u=nh(c,this.gl,o.domain().length,r);this.rangeTextures.set(o,u)}else{const o=e.scale;if(o.type==="ordinal"||Mr(o.type)){const a=Mc(s)?eg(s):u=>u,c=o.range();this.rangeTextures.set(o,SI(c.map(a),this.gl,o.domain().length,r))}}}createSelectionTexture(e,t=!0){if(!lf(e))throw new Error("Not a multi-point selection, cannot create texture");const r=Array.from(e.data.keys()),i=r.length>0?r.sort((c,u)=>c-u):[0],s=this.selectionTextures.get(e),o=this.gl,a=Po(this.gl,{level:0,minMag:o.NEAREST,format:o.RED_INTEGER,internalFormat:o.R32UI,height:1,width:i.length},new Uint32Array(i),t?s:!1);this.selectionTextures.set(e,a)}}function xI(n,e="",t=0){const r=/ERROR:\s*\d+:(\d+)/gi,i=[...e.matchAll(r)],s=new Map(i.map((o,a)=>{const c=parseInt(o[1]),u=i[a+1],l=u?u.index:e.length,f=e.substring(o.index,l);return[c-1,f]}));return n.split(`
`).map((o,a)=>{const c=s.get(a);return`${a+1+t}: ${o}${c?`

^^^ ${c}`:""}`}).join(`
`)}function yI(n,e,t){const r=n.createProgram();n.attachShader(r,e),n.attachShader(r,t),n.linkProgram(r);function i(){let s,o;if(!n.getProgramParameter(r,n.LINK_STATUS)){s=n.getProgramInfoLog(r);for(const c of[e,t])n.getShaderParameter(c,n.COMPILE_STATUS)||(s=n.getShaderInfoLog(c),o=xI(n.getShaderSource(c),s,0)+`
Error compiling: ${s}`,n.deleteShader(c));n.deleteProgram(r)}if(s)return{message:s,detail:o}}return{program:r,getProgramErrors:i}}function Po(n,e,t,r){return r?Tp(n,r,t,e):r=ao(n,{...e,src:t}),r}function bI(n,e,t,r){const{height:i,framebuffer:s}=e,o=new Uint8Array(4);return n.bindFramebuffer(n.FRAMEBUFFER,s),n.readPixels(t,i-r-1,1,1,n.RGBA,n.UNSIGNED_BYTE,o),n.bindFramebuffer(n.FRAMEBUFFER,null),o}function wI(n,e,t="image/png"){const{width:r,height:i}=e,s=new Uint8Array(r*i*4);n.bindFramebuffer(n.FRAMEBUFFER,e.framebuffer),n.readPixels(0,0,r,i,n.RGBA,n.UNSIGNED_BYTE,s),n.bindFramebuffer(n.FRAMEBUFFER,null);const o=document.createElement("canvas");o.width=r,o.height=i;const a=o.getContext("2d"),c=a.createImageData(r,i);for(let u=0;u<i;u++){const l=(i-1-u)*r*4,f=u*r*4;c.data.set(s.subarray(l,l+r*4),f)}return a.putImageData(c,0,0),o.toDataURL(t)}function AI(n,e,t,r){const i=me(n)?n:n.name,s=!me(n)&&n.extent||[0,1];if(t===void 0&&!me(n)&&(t=n.count),i){const o=eh(i);if(Nt(o)){const a=v1(o,{extent:s,count:t});return Po(e,{minMag:e.LINEAR,format:e.RGB,height:1,wrap:e.CLAMP_TO_EDGE},a,r)}else{if(Ue(o))return nh(o,e);throw new Error("Unknown scheme: "+i)}}}function vI(n,e="rgb",t,r){const i=Kc(n,me(e)?e:e.type,me(e)?void 0:e.gamma),s=v1(i);return Po(t,{minMag:t.LINEAR,format:t.RGB,height:1,wrap:t.CLAMP_TO_EDGE},s,r)}function SI(n,e,t,r){const i=Math.max(n.length,t||0),s=new Float32Array(i);for(let o=0;o<i;o++)s[o]=n[o%n.length];return Po(e,{minMag:e.NEAREST,format:e.RED,internalFormat:e.R32F,height:1},s,r)}function nh(n,e,t,r){const i=S1(n,t);return Po(e,{minMag:e.NEAREST,format:e.RGB,height:1},i,r)}function v1(n,{extent:e=[0,1],reverse:t=!1,count:r=256}={}){const i=e[0],s=to(e)-i,o=Gs(r).map(a=>a/(r-1)).map(a=>i+a/s).map(n);return t&&o.reverse(),S1(o)}function S1(n,e){const t=Math.max(n.length,e||0),r=new Uint8Array(t*3);for(let i=0;i<t;i++){const s=n[i%n.length],o=Gn(s);if(!o)throw new Error(`Invalid color "${s}" in the scheme ${JSON.stringify(n)}!`);const a=o.rgb();r[i*3+0]=a.r,r[i*3+1]=a.g,r[i*3+2]=a.b}return r}function rh(n){const e=Gn(n).rgb();return[e.r,e.g,e.b].map(t=>t/255)}const EI="attr_",CI="uDomain_",DI="range_",II="accessor_",E1="scale_",TI="getScaled_",ih="uRangeTexture_",Zc="uParam_",Mo="checkSelection_",BI=3402823466e29;function kI(n){const e=n.match(/^(?:(\w+)-)?(\w+)$/);if(!e)throw new Error("Not a scale type: "+n);return{family:e[1]||"continuous",transform:e[2]}}function Ro(n,e){return`${II}${n}_${e}`}function FI(n,e,t){let r;if(Mc(n))r=Rr(eg(n)(t));else if(me(t))if(Ln(n))r=NI(t);else throw new Error(`String values are not supported on the "${n}" channel: ${t}`);else if(Is(t))r=Rr(t?1:0);else if(t===null)if(Ln(n))r=Rr([0,0,0]);else throw new Error(`null value is not supported on the "${n}" chanel.`);else r=Rr(t);const i=Ro(n,e),s=`
${r.type} ${i}() {
    // Constant value
    return ${r};
}`;return{channel:n,accessorGlsl:s,accessorFunctionName:i}}function PI(n,e){let t="float",r=c=>c;Ln(n)&&(t="vec3",r=c=>rh(c));const i=`u${HI(n)}_${e}`,s=`    // Dynamic value
    uniform ${t} ${i};`,o=Ro(n,e);let a=`
${t} ${o}() {
    // Dynamic value
    return ${i};
}`;return{channel:n,uniformName:i,uniformGlsl:s,accessorGlsl:a,accessorFunctionName:o,adjuster:r}}function C1(n,e,t,r=[n]){const{attributeType:i}=Fi(e,n),s=Pi(r),o=`in highp ${i} ${s};`,a=Ro(n,t),c=`
${i} ${a}() {
    return ${s};
}`;return{channel:n,attributeName:s,attributeGlsl:o,accessorGlsl:c,accessorFunctionName:a}}function MI(n,e,t){const{attributeType:r}=Fi(e,n),i=Pi(n),s=`    uniform highp ${r} ${i};`,o=Ro(n,t),a=`
${r} ${o}() {
    return ${i};
}`;return{channel:n,uniformName:i,uniformGlsl:s,accessorGlsl:a,accessorFunctionName:o}}function RI(n,e,t){e??(e=th());const r=Ir(n),i=CI+r,s=DI+r,{hp:o,attributeType:a}=Fi(e,n),c=e.domain?e.domain().length:void 0;let u;const l=[];l.push(""),l.push("/".repeat(70)),l.push(`// Channel: ${n}`),l.push("");const{transform:f}=kI(e.type),d=(v,...T)=>LI.apply(null,[v,"value",...T]);let h;switch(f){case"linear":h=d("scaleLinear","domain",s);break;case"log":h=d("scaleLog","domain",s,e.base());break;case"symlog":h=d("scaleSymlog","domain",s,e.constant());break;case"pow":case"sqrt":h=d("scalePow","domain",s,e.exponent());break;case"index":case"locus":h=d("scaleBandHp","domain",s,e.paddingInner(),e.paddingOuter(),e.align(),t.band??.5);break;case"point":case"band":h=d("scaleBand","domain",s,e.paddingInner(),e.paddingOuter(),e.align(),t.band??.5);break;case"ordinal":case"null":case"identity":h=d("scaleIdentity");break;case"threshold":break;default:throw new Error(`Unsupported scale type: ${e.type}! ${n}: ${JSON.stringify(t)}`)}const p=M1(e,n);let m;if(p&&n==r){const v=e.props.range??[];if(We(v)||v.some(We)){if(p.length<1||p.length>4)throw new Error(`A range with ExprRefs must have 1-4 elements, not ${p.length}! Range: ${JSON.stringify(p)}`);m=`    uniform ${I1(p.length)} ${s};`}else if(p.length&&p.every(Ke)){const T=B1(p);l.push(`const ${T.type} ${s} = ${T};`)}}const g=T1(n);let x;if(Ln(n)){const v=ih+r;if(n==r&&l.push(`uniform sampler2D ${v};`),Oe(e.type))x=`getInterpolatedColor(${v}, transformed)`;else if(jn(e.type)||Mr(e.type))x=`getDiscreteColor(${v}, int(transformed))`;else throw new Error("Problem with color scale!")}else if(e.type==="ordinal"||Mr(e.type)){const v=ih+r;n==r&&l.push(`uniform sampler2D ${v};`),x=`getDiscreteColor(${v}, int(transformed)).r`}const b=[],w=Oe(e.type)&&c>2,A=Mr(e.type)||w;if(b.push("int slot = 0;"),A){const v=i;b.push(w?`while (slot < ${v}.length() - 2 && value >= ${v}[slot + 1]) { slot++; }`:`while (slot < ${v}.length() && value >= ${v}[slot]) { slot++; }`)}const S=Oe(e.type)||Mr(e.type)||["band","point"].includes(e.type);if(h){const v=i;S&&(o?b.push(`vec3 domain = ${v};`):b.push(`vec2 domain = vec2(${v}[slot], ${v}[slot + 1]);`)),b.push(`float transformed = ${h};`),w&&b.push(`transformed = (float(slot) + transformed) / (float(${v}.length() - 1));`)}else b.push("float transformed = float(slot);");"clamp"in e&&e.clamp()&&b.push(`transformed = clampToRange(transformed, ${B1(p)});`),b.push(`return ${x??"transformed"};`),l.push(`
${g} ${E1}${n}(${a} value) {
${b.map(v=>`    ${v}
`).join("")}
}`);const C=l.join(`
`);if(S&&n==r){const v=Oe(e.type)||Mr(e.type)?c:2;u=o?`    highp vec3 ${i};`:`    mediump float ${i}[${v}];`}return{glsl:C,domainUniformName:i,domainUniform:u,rangeUniformName:s,rangeUniform:m}}function OI(n,e){const t=T1(n),r=[],i=[];for(let s=0;s<e.length;s++){const o=e[s],a=Ro(n,s),{param:c,empty:u}=o.predicate;r.push(c?`${Mo}${c}(${!!u})`:null),i.push(o.scaleChannel?`return ${E1}${n}(${a}());`:`return ${a}();`)}return`${t} ${TI}${n}() {
${VI(r,i)}
}

#define ${n}_DEFINED`}function D1(n){if(!Ke(n))throw new Error(`Not a number: ${n}`);if(n==1/0)return""+BI;if(n==-1/0)return""+-3402823466e29;{let e=`${n}`;return/^(-)?\d+$/.test(e)&&(e+=".0"),e}}function Rr(n){typeof n=="number"&&(n=[n]);const e=n.length;if(e<1||e>4)throw new Error("Invalid number of components: "+e);const t=I1(e),r=`${t}(${n.map(D1).join(", ")})`;return Object.assign(r,{type:t,numComponents:e})}function I1(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error("Invalid number of components: "+n)}}function T1(n){return Ln(n)?"vec3":n=="uniqueId"?"uint":"float"}function NI(n){return Rr(rh(n))}function B1(n){return Rr([n[0],to(n)])}function LI(n,...e){const t=[];for(const r of e)Ke(r)?t.push(D1(r)):Ue(r)?t.push(Rr(r)):t.push(r);return`${n}(${t.join(", ")})`}function Fi(n,e){var o;const t=n&&jn(n.type),r=n&&k1(n.type),i=r&&zI(n.domain()),s=i?{attributeType:"uvec2",arrayConstructor:Uint32Array}:r?{attributeType:"uint",arrayConstructor:Uint32Array}:t?{attributeType:"uint",arrayConstructor:Uint16Array}:e=="uniqueId"?{attributeType:"uint",arrayConstructor:Uint32Array}:{attributeType:"float",arrayConstructor:Float32Array};return Object.assign(s,{numComponents:+(((o=s.attributeType.match(/^vec([234])$/))==null?void 0:o[1])??1),discrete:t,hp:r,largeHp:i})}function k1(n){return n=="index"||n=="locus"}function zI(n){return n[1]>2**32}const sh=2**12;function F1(n,e=[]){const t=n%sh,r=(n-t)/sh;return e[0]=r,e[1]=t,e}function UI(n){const e=n%sh;return[n-e,e]}function GI(n){return[...UI(n[0]),n[1]-n[0]]}function P1(n){const e=new tn([],JSON.stringify);for(const[t,r]of Object.entries(n)){const i=r.channelDef;if(Nn(i)){const o=[i.field,r.scale?(Oe(r.scale.type)||Mr(r.scale.type))??!1:!1];e.set(o,[...e.get(o)??[],t])}}return e}function Pi(n){return EI+He(n).toSorted().join("_")}function HI(n){return n[0].toUpperCase()+n.slice(1)}const M1=(n,e)=>Xc(n.type)||Oe(n.type)&&Ln(e)?[0,1]:n.range?n.range():void 0;function VI(n,e){if(n.length!=e.length)throw new Error("Unequal array lengths");const t=n.length;if(t==0)return"";if(t==1&&n[0]==null)return e[0];const r=[];for(let i=0;i<t;i++){const s=n[i],o=i==0?`if (${s})`:s==null&&i==t-1?"else":`else if (${s})`;r.push(`    ${o} {
        ${e[i]}
    }`)}return r.join(`
`)}function _I(){let n=0,e,t=0;const r=new Map,i=s=>(s===e||(t=r.get(s),t===void 0&&(t=n++,r.set(s,t)),e=s),t);return i.addAll=s=>{for(const o of s)i(o)},i.invert=s=>{for(const o of r.entries())if(o[1]==s)return o[0]},i.domain=()=>[...r.keys()],i}class Oo{constructor({encoders:e,numVertices:t=void 0,attributes:r=[]}){this.encoders=e,this.variableEncoders=Object.fromEntries(Object.entries(e).filter(([s,o])=>r.includes(s)&&o&&!o.constant));const i=[...P1(e).entries()].filter(([s,o])=>s[1]&&o.length>1).map(([s,o])=>o);this.allocatedVertices=t,this.variableBuilder=new Q3(t);for(const[s,o]of Object.entries(this.variableEncoders)){const a=o.dataAccessor;if(!a)continue;const c=i.find(w=>w.find(A=>A==s));if(c&&s!=c[0])continue;const u=a.asNumberAccessor(),l=o.scale,{largeHp:f,arrayConstructor:d,discrete:h,numComponents:p}=Fi(l,s),m=[0,0];let g;l&&h&&"domain"in l&&(g=_I(),g.addAll(l.domain()));const x=g?w=>g(a(w)):f?w=>F1(u(w),m):u,b=Pi(c??s);this.variableBuilder.addConverter(b,{f:x,numComponents:p,arrayReference:f?m:void 0,targetArrayType:d})}this.lastOffset=0,this.rangeMap=new tn([],JSON.stringify)}registerBatch(e){var s;const t=this.lastOffset,r=this.variableBuilder.vertexCount,i=r-t;i&&this.rangeMap.set(e,{offset:t,count:i,xIndex:(s=this.xIndexer)==null?void 0:s.getIndex()}),this.lastOffset=r}addBatches(e){for(const[t,r]of e)this.addBatch(t,r)}addBatch(e,t,r=0,i=t.length){this.prepareXIndexer(t,r,i);for(let s=r;s<i;s++){const o=t[s];this.variableBuilder.pushFromDatum(o),this.addToXIndex(o)}this.registerBatch(e)}prepareXIndexer(e,t=0,r=t+e.length){var u;const i=()=>{this.addToXIndex=l=>{},this.xIndexer=void 0},s=(u=this.encoders.x)==null?void 0:u.channelDef;if(!("buildIndex"in s)||!s.buildIndex||!e.length||r-t<0){i();return}const o=l=>{var f;return l&&Oe((f=l.scale)==null?void 0:f.type)&&l},a=o(this.variableEncoders.x),c=o(this.variableEncoders.x2);if(a&&!a.constant&&(!c||!c.constant)){const l=a.dataAccessor.asNumberAccessor(),f=c?c.dataAccessor.asNumberAccessor():l,d=[l(e[t]),f(e[r-1])];if(d[1]>d[0]){this.xIndexer=Y3(50,d,l,f);let h=this.variableBuilder.vertexCount;this.addToXIndex=p=>{let m=this.variableBuilder.vertexCount;this.xIndexer(p,h,m),h=m}}else i()}else i()}addToXIndex(e){}toArrays(){return{arrays:this.variableBuilder.arrays,vertexCount:this.variableBuilder.vertexCount,allocatedVertices:this.allocatedVertices,rangeMap:this.rangeMap}}}class jI extends Oo{constructor({encoders:e,attributes:t,numItems:r}){super({encoders:e,attributes:t,numVertices:r*6}),this.variableBuilder.configure();const i=this.variableBuilder.pushAll;this.pushAllSixTimes=r>500?new Function("pushAll",`return function unrolledPushAllSixTimes() {
  pushAll(); pushAll(); pushAll(); pushAll(); pushAll(); pushAll();
};`)(i):function(){i(),i(),i(),i(),i(),i()}}addBatch(e,t,r=0,i=t.length){if(!(i<=r)){this.prepareXIndexer(t,r,i);for(let s=r;s<i;s++){const o=t[s];this.variableBuilder.updateFromDatum(o),this.pushAllSixTimes(),this.addToXIndex(o)}this.registerBatch(e)}}}class WI extends Oo{constructor({encoders:e,attributes:t,tessellationThreshold:r=1/0,visibleRange:i=[-1/0,1/0],numItems:s}){super({encoders:e,attributes:t,numVertices:r==1/0?s*6:void 0}),this.visibleRange=i,this.tessellationThreshold=r||1/0,this.updateSide=this.variableBuilder.createUpdater("side",1),this.updatePos=this.variableBuilder.createUpdater("pos",1),this.variableBuilder.configure()}addBatch(e,t,r=0,i=t.length){this.prepareXIndexer(t,r,i);for(let s=r;s<i;s++){const o=t[s];this.variableBuilder.updateFromDatum(o),this.updateSide(-.5),this.updatePos(0),this.variableBuilder.pushAll();const a=1;for(let c=0;c<=a;c++)this.updatePos(c/a),this.updateSide(-.5),this.variableBuilder.pushAll(),this.updateSide(.5),this.variableBuilder.pushAll();this.variableBuilder.pushAll(),this.addToXIndex(o)}this.registerBatch(e)}}class QI extends Oo{constructor({encoders:e,attributes:t,numItems:r=void 0}){super({encoders:e,attributes:t,numVertices:r}),this.variableBuilder.configure()}}class qI extends Oo{constructor({encoders:e,attributes:t,numItems:r=void 0}){super({encoders:e,attributes:t,numVertices:r}),this.variableBuilder.configure()}toArrays(){const e=this.variableBuilder.arrays;for(let t of Object.values(e))t.divisor=1;return super.toArrays()}}class YI extends Oo{constructor({encoders:e,attributes:t,fontMetrics:r,properties:i,numCharacters:s=void 0}){super({encoders:e,attributes:t,numVertices:s*6}),this.metadata=r,this.metrics=r,this.properties=i;const a=e.text.channelDef;this.numberFormat=!xt(a)&&"format"in a&&a.format?Le(a.format):c=>c,this.updateVertexCoord=this.variableBuilder.createUpdater("vertexCoord",2),this.updateTextureCoord=this.variableBuilder.createUpdater("textureCoord",2),this.updateWidth=this.variableBuilder.createUpdater("width",1),this.variableBuilder.configure()}addBatch(e,t,r=0,i=t.length){const s=this.properties.align||"left",o=this.properties.logoLetters??!1,a=this.metadata.common.base,c=this.metadata.common.scaleH;let u=-5;switch(this.properties.baseline){case"top":u+=this.metrics.capHeight;break;case"middle":u+=this.metrics.capHeight/2;break;case"bottom":u-=this.metrics.descent;break}const l=this.encoders.text,f=[0,0];this.updateVertexCoord(f);const d=[0,0];this.updateTextureCoord(d),this.prepareXIndexer(t,r,i);for(let h=r;h<i;h++){const p=t[h],m=this.numberFormat(l(p)),g=me(m)?m:m===null?"":""+m;if(g.length==0)continue;this.variableBuilder.updateFromDatum(p);const x=o?g.length:this.metrics.measureWidth(g);this.updateWidth(x);let b=s=="right"?-x:s=="center"?-x/2:0;if(!o){const C=this.metrics.getCharByCode(g.charCodeAt(0));b-=(C.width-C.xadvance)/a/2}let w=-.5,A=1,S=1;for(let C=0;C<g.length;C++){const v=this.metrics.getCharByCode(g.charCodeAt(C)),T=o?1:v.xadvance/a;if(v.id==32){b+=T;continue}o?(S=(v.width+uo*2)/v.width,b=-S/2,A=(v.height+uo*2)/v.height,w=-.5-uo/v.height):(A=v.height/a,w=-(v.height+v.yoffset+u)/a,S=v.width/a);const P=v.x,F=v.y;f[0]=b,f[1]=w+A,d[0]=P/c,d[1]=F/c,this.variableBuilder.pushAll(),f[0]=b+S,f[1]=w+A,d[0]=(P+v.width)/c,d[1]=F/c,this.variableBuilder.pushAll(),f[0]=b,f[1]=w,d[0]=P/c,d[1]=(F+v.height)/c,this.variableBuilder.pushAll(),f[0]=b+S,f[1]=w+A,d[0]=(P+v.width)/c,d[1]=F/c,this.variableBuilder.pushAll(),f[0]=b,f[1]=w,d[0]=P/c,d[1]=(F+v.height)/c,this.variableBuilder.pushAll(),f[0]=b+S,f[1]=w,d[0]=(P+v.width)/c,d[1]=(F+v.height)/c,this.variableBuilder.pushAll(),b+=T}this.addToXIndex(p)}this.registerBatch(e)}}const R1=`#define PI 3.141593

uniform View {
    /** Offset in "unit" units */
    mediump vec2 uViewOffset;
    mediump vec2 uViewScale;
    /** Size of the logical viewport in pixels, i.e., the view */
    mediump vec2 uViewportSize;
    lowp float uDevicePixelRatio;
    // TODO: Views with opacity less than 1.0 should be rendered into a texture
    // that is rendered with the specified opacity.
    lowp float uViewOpacity;
    bool uPickingEnabled;
};


/**
 * Maps a coordinate on the unit scale to a normalized device coordinate.
 * (0, 0) is at the bottom left corner.
 */
vec4 unitToNdc(vec2 coord) {
    return vec4((coord * uViewScale + uViewOffset) * 2.0 - 1.0, 0.0, 1.0);
}

vec4 unitToNdc(float x, float y) {
    return unitToNdc(vec2(x, y));
}

vec4 pixelsToNdc(vec2 coord) {
    return unitToNdc(coord / uViewportSize);
}

vec4 pixelsToNdc(float x, float y) {
    return pixelsToNdc(vec2(x, y));
}

float linearstep(float edge0, float edge1, float x) {
    return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
}

bool isEmptyBinarySearchTexture(highp usampler2D s) {
    // The minimum texture size is 1x1. Zero is a special value that indicates
    // an empty selection. Unique ids never start at zero.
    return textureSize(s, 0).x == 1 && texelFetch(s, ivec2(0, 0), 0).r == 0u;
}

bool binarySearchTexture(highp usampler2D s, uint value) {
    int texSize = textureSize(s, 0).x;

    if (texSize == 1 && texelFetch(s, ivec2(0, 0), 0).r == 0u) {
        return false;
    }

    int left = 0;
    int right = texSize - 1;

    while (left <= right) {
        int mid = left + (right - left) / 2;

        uint midValue = texelFetch(s, ivec2(mid, 0), 0).r;

        if (midValue == value) {
            return true;
        }

        if (midValue < value) {
            left = mid + 1;
        } else {
            right = mid - 1;
        }
    }

    return false;
}

/**
 * Calculates a gamma for antialiasing opacity based on the color.
 */
float getGammaForColor(vec3 rgb) {
    return mix(
        1.25,
        0.75,
        // RGB should be linearized but this is good enough for now
        smoothstep(0.0, 1.0, dot(rgb, vec3(0.299, 0.587, 0.114))));
}

// Fragment shader stuff ////////////////////////////////////////////////////////

// TODO: include the following only in fragment shaders

/**
 * Specialized linearstep for doing antialiasing
 */
float distanceToRatio(float d) {
	return clamp(d * uDevicePixelRatio + 0.5, 0.0, 1.0);
}

vec4 distanceToColor(float d, vec4 fill, vec4 stroke, vec4 background, float halfStrokeWidth) {
    if (halfStrokeWidth > 0.0) {
        // Distance to stroke's edge. Negative inside the stroke.
        float sd = abs(d) - halfStrokeWidth;
        return mix(
            stroke,
            d <= 0.0 ? fill : background,
            distanceToRatio(sd));
    } else {
        return mix(background, fill, distanceToRatio(-d));
    }
}
`,XI=`uniform highp float uZero;

// Utils ------------

vec3 getDiscreteColor(sampler2D s, int index) {
    return texelFetch(s, ivec2(index % textureSize(s, 0).x, 0), 0).rgb;
}

vec3 getInterpolatedColor(sampler2D s, float unitValue) {
    return texture(s, vec2(unitValue, 0.0)).rgb;
}

float clampToRange(float value, vec2 range) {
    return clamp(value, min(range[0], range[1]), max(range[0], range[1]));
}

// Scales ------------
// Based on d3 scales: https://github.com/d3/d3-scale

float scaleIdentity(float value) {
    return value;
}

float scaleIdentity(uint value) {
    return float(value);
}

float scaleLinear(float value, vec2 domain, vec2 range) {
    float domainSpan = domain[1] - domain[0];
    float rangeSpan = range[1] - range[0];
    return (value - domain[0]) / domainSpan * rangeSpan + range[0];
}

float scaleLog(float value, vec2 domain, vec2 range, float base) {
    // y = m log(x) + b 
    // TODO: Perf optimization: precalculate log domain in js.
    // TODO: Reversed domain, etc
    return scaleLinear(log(value) / log(base), log(domain) / log(base), range);
}

float symlog(float value, float constant) {
    // WARNING: emulating log1p with log(x + 1). Small numbers are likely to
    // have significant precision problems.
    return sign(value) * log(abs(value / constant) + 1.0);
}

float scaleSymlog(float value, vec2 domain, vec2 range, float constant) {
    return scaleLinear(
        symlog(value, constant),
        vec2(symlog(domain[0], constant), symlog(domain[1], constant)),
        range
    );
}

float scalePow(float value, vec2 domain, vec2 range, float exponent) {
    // y = mx^k + b
    // TODO: Perf optimization: precalculate pow domain in js.
    // TODO: Reversed domain, etc
    return scaleLinear(
        pow(abs(value), exponent) * sign(value),
        pow(abs(domain), vec2(exponent)) * sign(domain),
        range
    );
}

// TODO: scaleThreshold
// TODO: scaleQuantile (special case of threshold scale)

// TODO: domainExtent should be uint
float scaleBand(uint value, vec2 domainExtent, vec2 range,
                float paddingInner, float paddingOuter,
                float align, float band) {

    // TODO: reverse
    float start = range[0];
    float stop = range[1];
    float rangeSpan = stop - start;

    float n = domainExtent[1] - domainExtent[0];

    // This fix departs from Vega and d3: https://github.com/vega/vega/issues/3357#issuecomment-1063253596
    paddingInner = int(n) > 1 ? paddingInner : 0.0;

    // Adapted from: https://github.com/d3/d3-scale/blob/master/src/band.js
    float step = rangeSpan / max(1.0, n - paddingInner + paddingOuter * 2.0);
    start += (rangeSpan - step * (n - paddingInner)) * align;
    float bandwidth = step * (1.0 - paddingInner);

    return start + (float(value) - domainExtent[0]) * step + bandwidth * band;
}

const int lowBits = 12;
const float lowDivisor = pow(2.0, float(lowBits));
const uint lowMask = uint(lowDivisor - 1.0);

vec2 splitUint(uint value) {
    uint valueLo = value & lowMask;
    uint valueHi = value - valueLo;
    return vec2(float(valueHi), float(valueLo));
}

/**
 * High precision variant of scaleBand for index/locus scales
 */
float scaleBandHp(uint value, vec3 domainExtent, vec2 range,
                 float paddingInner, float paddingOuter,
                 float align, float band) {

    // TODO: reverse
    float start = range[0];
    float stop = range[1];
    float rangeSpan = stop - start;

    vec2 domainStart = domainExtent.xy;
    float n = domainExtent[2];

    // The following computation is identical for every vertex. Could be done on the JS side.
    float step = rangeSpan / max(1.0, n - paddingInner + paddingOuter * 2.0);
    start += (rangeSpan - step * (n - paddingInner)) * align;
    float bandwidth = step * (1.0 - paddingInner);

    // Split into to values with each having a reduced number of significant digits
    // to mitigate the lack of precision in float32 calculations.
    vec2 splitValue = splitUint(value);

    // Using max to prevent the shader compiler from wrecking the precision.
    // Othwewise the compiler could optimize the sum of the four terms into
    // some equivalent form that does premature rounding.
    float inf = 1.0 / uZero;
    float hi = max(splitValue[0] - domainStart[0], -inf);
    float lo = max(splitValue[1] - domainStart[1], -inf);

    return dot(vec4(start, hi, lo, bandwidth), vec4(1.0, step, step, band));
}

/**
 * High precision variant of scaleBand for index/locus scales for large
 * domains where 32bit uints are not sufficient to represent the domain.
 */
float scaleBandHp(uvec2 value, vec3 domainExtent, vec2 range,
                 float paddingInner, float paddingOuter,
                 float align, float band) {

    // TODO: reverse
    float start = range[0];
    float stop = range[1];
    float rangeSpan = stop - start;

    vec2 domainStart = domainExtent.xy;
    float n = domainExtent[2];

    // The following computation is identical for every vertex. Could be done on the JS side.
    float step = rangeSpan / max(1.0, n - paddingInner + paddingOuter * 2.0);
    start += (rangeSpan - step * (n - paddingInner)) * align;
    float bandwidth = step * (1.0 - paddingInner);

    // Split into to values with each having a reduced number of significant digits
    // to mitigate the lack of precision in float32 calculations.
    vec2 splitValue = vec2(float(value[0]) * lowDivisor, float(value[1]));

    // Using max to prevent the shader compiler from wrecking the precision.
    // Othwewise the compiler could optimize the sum of the four terms into
    // some equivalent form that does premature rounding.
    float inf = 1.0 / uZero;
    float hi = max(splitValue[0] - domainStart[0], -inf);
    float lo = max(splitValue[1] - domainStart[1], -inf);

    return dot(vec4(start, hi, lo, bandwidth), vec4(1.0, step, step, band));
}
`,KI=`
/**
 * Describes where a sample facet should be shown. Interpolating between the
 * current and target positions/heights allows for transitioning between facet
 * configurations.
 */
struct SampleFacetPosition {
    float pos;
    float height;
    float targetPos;
    float targetHeight;
};

/**
 * Trasition fraction [0, 1] between the current and target configurations.
 */
uniform float uTransitionOffset;


// ----------------------------------------------------------------------------

#if !defined(SAMPLE_FACET_UNIFORM) && !defined(SAMPLE_FACET_TEXTURE)

SampleFacetPosition getSampleFacetPos() {
    return SampleFacetPosition(0.0, 1.0, 0.0, 1.0);
}

#elif defined(SAMPLE_FACET_UNIFORM)

/**
 * Location and height of the band on the Y axis on a normalized [0, 1] scale.
 * Elements: curr pos, curr height, target pos, target height
 */
uniform vec4 uSampleFacet;

SampleFacetPosition getSampleFacetPos() {
    return SampleFacetPosition(
        1.0 - uSampleFacet.x - uSampleFacet.y,
        uSampleFacet.y,
        1.0 - uSampleFacet.z - uSampleFacet.w,
        uSampleFacet.w
    );
}

#elif defined(SAMPLE_FACET_TEXTURE)

uniform sampler2D uSampleFacetTexture;

SampleFacetPosition getSampleFacetPos() {
    vec4 texel = texelFetch(uSampleFacetTexture, ivec2(int(attr_facetIndex), 0), 0);
    return SampleFacetPosition(
        1.0 - texel.r - texel.g,
        texel.g,
        1.0 - texel.r - texel.g,
        texel.g);
}

#endif

// ----------------------------------------------------------------------------

bool isFacetedSamples(SampleFacetPosition facetPos) {
    return facetPos != SampleFacetPosition(0.0, 1.0, 0.0, 1.0);
}

bool isFacetedSamples() {
    return isFacetedSamples(getSampleFacetPos());
}

bool isInTransit() {
    return uTransitionOffset > 0.0;
}

float getTransitionFraction(float xPos) {
    return smoothstep(0.0, 0.7 + uTransitionOffset, (xPos - uTransitionOffset) * 2.0);
}

vec2 applySampleFacet(vec2 pos) {
    SampleFacetPosition facetPos = getSampleFacetPos();

    if (!isFacetedSamples(facetPos)) {
        return pos;
    } else if (isInTransit()) {
        vec2 interpolated = mix(
            vec2(facetPos.pos, facetPos.height),
            vec2(facetPos.targetPos, facetPos.targetHeight),
            getTransitionFraction(pos.x));
        return vec2(pos.x, interpolated[0] + pos.y * interpolated[1]);
    } else {
        return vec2(pos.x, facetPos.pos + pos.y * facetPos.height);
    }
}

float getSampleFacetHeight(vec2 pos) {
    SampleFacetPosition facetPos = getSampleFacetPos();

    if (!isFacetedSamples(facetPos)) {
        return 1.0;
    } else if (isInTransit()) {
        return mix(
            facetPos.height,
            facetPos.targetHeight,
            getTransitionFraction(pos.x));
    } else {
        return facetPos.height;
    }
}
`,ZI=`/*
 * Based on concepts presented at:
 * https://webglfundamentals.org/webgl/lessons/webgl-picking.html
 * https://deck.gl/docs/developer-guide/custom-layers/picking
 */

out highp vec4 vPickingColor;

/**
 * Passes the unique id to the fragment shader as a color if picking is enabled.
 * Returns true if picking is enabled.
 */
bool setupPicking() {
    if (uPickingEnabled) {
#ifdef uniqueId_DEFINED
        uint id = attr_uniqueId;
        vPickingColor = vec4(
            ivec4(id >> 0, id >> 8, id >> 16, id >> 24) & 0xFF
        ) / float(0xFF);
#else
        vPickingColor = vec4(1.0);
#endif
        return true;
    }
    return false;
}
`,JI=`in highp vec4 vPickingColor;
`,Jc=Symbol("cacheMap");function $c(n,e,t){let r=No(n).get(e);return r===void 0&&(r=t(e),No(n).set(e,r)),r}function oh(n,e){No(n).delete(e)}function eu(n,e){const t=No(n);for(const r of t.keys())r.startsWith(e)&&t.delete(r);No(n).delete(e)}function O1(n){n[Jc]=new Map}function No(n){return n[Jc]||O1(n),n[Jc]}function N1(...n){const e={get(t,r,i){for(const s of n){const a=s()[r];if(a!==void 0)return a}},has(t,r,i){for(const s of n){const o=s();if(r in o)return!0}return!1}};return new Proxy({},e)}function $I(n){return me(n)||Ke(n)||Is(n)}class Wn extends Error{constructor(e,t){super(e),this.name="ViewError",this.view=t}}const eT="SAMPLE_FACET_UNIFORM",L1="SAMPLE_FACET_TEXTURE",z1="uSelectionTexture_";class Lo{constructor(e){R(this,Pt,[]);R(this,ns,[]);this.unitView=e,this.encoders=void 0,this.bufferInfo=void 0,this.bytesPerElement=new Map,this.programInfo=void 0,this.vertexArrayInfo=void 0,this.viewUniformInfo=void 0,this.markUniformInfo=void 0,this.markUniformsAltered=!0,this.selectionTextureOps=[],this.rangeMap=new tT,this.defaultProperties={get clip(){return["x","y"].map(t=>e.getScaleResolution(t)).some(t=>(t==null?void 0:t.isZoomable())??!1)},xOffset:0,yOffset:0,minBufferSize:0},this.properties=N1(typeof this.unitView.spec.mark=="object"?()=>this.unitView.spec.mark:()=>({}),()=>this.defaultProperties)}augmentDefaultProperties(e){Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors(e))}get opaque(){return!1}get defaultHitTestMode(){return"intersects"}getAttributes(){throw new Error("Not implemented!")}getSupportedChannels(){return["sample","facetIndex","x","y","color","opacity","search","uniqueId"]}getDefaultEncoding(){const e={sample:void 0,uniqueId:void 0};return this.isPickingParticipant()&&(e.uniqueId={field:pt}),e}fixEncoding(e){return e}setupExprRefsNeedingGraphicsUpdate(e){const t=this.getSupportedChannels(),r={};for(const s of e){const o=this.properties[s];if(o&&We(o)){const a=this.unitView.paramMediator.createExpression(o.expr);a.addListener(()=>{this.updateGraphicsData(),this.unitView.context.animator.requestRender()}),t.includes(s)||Object.defineProperty(r,s,{get(){return a()}})}}const i=this.properties;this.properties=N1(()=>r,()=>i)}get encoding(){return $c(this,"encoding",()=>{var o;const e=this.getDefaultEncoding(),t=this.unitView.getEncoding(),r=a=>{const c=this.properties[a];return $I(c)||We(c)?{value:c}:void 0},i=Object.fromEntries(this.getSupportedChannels().map(a=>[a,r(a)]).filter(a=>xt(a[1]))),s=this.fixEncoding({...e,...i,...t});for(const a of Object.keys(s))this.getSupportedChannels().includes(a)||delete s[a];return s.x&&((o=s.x).buildIndex??(o.buildIndex=!0)),s})}getContext(){return this.unitView.context}getType(){return this.unitView.getMarkType()}initializeData(){}initializeEncoders(){this.encoders=C8(this.unitView,this.encoding)}async initializeGraphics(){}updateGraphicsData(){}getSampleFacetMode(){if(this.encoders.facetIndex)return L1;if(this.unitView.getLayoutAncestors().find(e=>"samples"in e.spec))return eT}createAndLinkShaders(e,t,r=[]){const i=this.getAttributes(),s=this.encoders,o=this.getSampleFacetMode();o&&r.push(`#define ${o}`);const a="// view: "+this.unitView.getPathString();let c=[];const u=new Set,l=P1(s),f=[],d=Object.values(s).flatMap(S=>S.accessors).map(S=>S.predicate).filter(S=>S.param),h=new Map;for(const S of d){const C=S.param,v=this.unitView.paramMediator,T=v.findValue(C);if(!T)throw new Error(`Cannot infer selection type as the parameter "${C}" has no value. Please ensure that the parameter is properly defined!`);const P=Pi("uniqueId");if(jm(T)){if(!h.has(C)){h.set(C,"single");const F=Zc+yo(C);f.push("    // Selection parameter"),f.push(`    uniform highp uint ${F};`),E(this,Pt).push(()=>{this.registerMarkUniformValue(F,{expr:C},k=>k.uniqueId??0)}),c.push(`bool ${Mo}${C}(bool empty) {
    return ${Zc}${C} == ${P} || (empty && ${Zc}${C} == 0u);
}`)}}else if(lf(T)){if(!h.has(C)){h.set(C,"multi");const F=z1+yo(C);c.push(`// Selection texture
uniform highp usampler2D ${F};`);const k=this.getContext().glHelper,L=k.selectionTextures;this.selectionTextureOps.push(()=>{const Z=v.getValue(C),_=L.get(Z);if(!_)throw new Error(`Bug: no selection texture found for "${C}"!`);wr(this.programInfo,{[F]:_})});const U=z1+C;c.push(`bool ${Mo}${C}(bool empty) {
   return binarySearchTexture(${U}, ${P}) || (empty && isEmptyBinarySearchTexture(${U}));
}`),k.createSelectionTexture(T);const j=v.createExpression(C);j.addListener(()=>{const Z=j(null);k.createSelectionTexture(Z),this.getContext().animator.requestRender()})}}else if(_m(T)&&!h.has(C)){h.set(C,"interval");const F=[],k=[];for(const L of Object.keys(T.intervals)){if(!["x","y"].includes(L))continue;const U=Zc+yo(C)+`_${L}`,{attributeType:j}=Fi(this.unitView.getScaleResolution(L).scale,L);f.push("    // Selection parameter"),f.push(`    uniform highp ${j}[2] ${U};`),E(this,Pt).push(()=>{this.registerMarkUniformValue(U,{expr:C},Ne=>Ne.intervals[L]??[1,0])});const Z=Ne=>{for(const[Se,Zt]of l.entries())if(Se[1]&&Zt.includes(Ne))return Pi(Zt);return Pi(Ne)},_=Z(L),ee=U+"[0]",ce=U+"[1]",ie=pf(L);if(this.encoding[ie]){const Ne=Z(ie),Se=this.defaultHitTestMode;if(Se=="endpoints")F.push(`((${ee} <= ${_} && ${_} <= ${ce}) || (${ee} <= ${Ne} && ${Ne} <= ${ce}))`);else if(Se=="encloses")F.push(`(${ee} <= ${_} && ${Ne} <= ${ce})`);else if(Se=="intersects")F.push(`(${ee} <= ${Ne} && ${_} <= ${ce})`);else throw new Wn(`Unsupported hit test mode "${Se}" for interval selection!`,this.unitView)}else F.push(`(${ee} <= ${_} && ${_} <= ${ce})`);k.push(`${ee} > ${ce}`)}c.push(`bool ${Mo}${C}(bool empty) {
    return ${F.join(" && ")} || (empty && (${k.join(" || ")}));
}`)}}const p=(S,C,v,T)=>{const P=C.channelDef;if(xt(P))if(We(P.value)){const{uniformName:F,uniformGlsl:k,accessorGlsl:L,adjuster:U}=PI(S,v);c.push(L),f.push(k),E(this,Pt).push(()=>{this.registerMarkUniformValue(F,P.value,U)})}else c.push(FI(S,v,P.value).accessorGlsl);else if(bo(P)){const{uniformName:F,uniformGlsl:k,accessorGlsl:L}=MI(S,T,v);f.push(k),c.push(L);const{largeHp:U,discrete:j}=Fi(T,S),Z=j&&"domain"in T?_=>T.domain().indexOf(_):U?F1:_=>+_;E(this,Pt).push(()=>{this.registerMarkUniformValue(F,P.datum,Z)})}else if(Nn(P)){const F=l.get([P.field,!0]),{attributeGlsl:k,accessorGlsl:L}=C1(S,T,v,F!=null&&F.includes(S)?F:void 0);u.add(k),c.push(L)}else if(wo(P)){const{attributeGlsl:F,accessorGlsl:k}=C1(S,T,v);u.add(F),c.push(k)}else throw new Wn(`Unsupported channel definition: ${JSON.stringify(P)}`,this.unitView)};for(const[S,C]of Object.entries(s)){if(!i.includes(S))continue;const{channelDef:v,accessors:T,scale:P}=C;for(let F=0;F<T.length;F++)p(S,T[F],F,P);if(P){const F=Km(v),k=F&&F.resolutionChannel||S,L=Rc(k)?this.unitView.getScaleResolution(k):null,{glsl:U,domainUniform:j,domainUniformName:Z,rangeUniform:_,rangeUniformName:ee}=RI(S,P,v);c.push(U),f.push(j),f.push(_),_&&E(this,Pt).push(()=>{const ce=this.createMarkUniformSetter(ee),ie=()=>ce(M1(P,S));L.addEventListener("range",ie),ie()}),j&&E(this,Pt).push(()=>{const ce=this.createMarkUniformSetter(Z),ie=()=>{const Ne=jn(P.type)?[0,P.domain().length]:P.domain();ce(k1(P.type)?GI(Ne):Ne)};L.addEventListener("domain",ie),ie()})}c.push(OI(S,T))}const m=[...h.keys()].map(S=>`${Mo}${S}(false)`);c.push(`bool isPointSelected() {
`+(this.encoders.uniqueId&&m.length>0?`    return ${m.join(" || ")};`:"    return false;")+`
}`);const g=`precision highp float;
precision highp int;`,x=S=>S.replace("#pragma markUniforms",f.join(`
`));r=r.map(x),e=x(e),t=x(t);const b=[g,a,...r,R1,XI,[...u].join(`
`),...c,KI,ZI,e],w=[g,a,...r,R1,JI,t],A=this.gl;this.programStatus=yI(A,this.glHelper.compileShader(A.VERTEX_SHADER,b),this.glHelper.compileShader(A.FRAGMENT_SHADER,w))}finalizeGraphicsInitialization(){const e=this.programStatus.getProgramErrors();if(e){e.detail&&console.warn(e.detail);const t=new Error("Cannot create shader program: "+e.message);throw t.view=this.unitView,t}this.programInfo=b3(this.gl,this.programStatus.program),delete this.programStatus,this.viewUniformInfo=tm(this.gl,this.programInfo,"View"),this.markUniformInfo=tm(this.gl,this.programInfo,"Mark"),this.gl.useProgram(this.programInfo.program),wr(this.programInfo,{uSampleFacet:[0,1,0,1],uTransitionOffset:0,uZero:0});for(const t of E(this,Pt))t();G(this,Pt,void 0)}createMarkUniformSetter(e){const t=this.markUniformInfo.setters[e];if(!t)throw new Error(`Uniform "${e}" not found int the Mark block!`);return r=>{t(r),this.markUniformsAltered=!0,this.unitView.context.animator.requestRender()}}registerMarkUniformValue(e,t,r=i=>i){const i=this.createMarkUniformSetter(e),s=o=>{if(o==null)throw new Error(`Trying to set null/undefined value for uniform: ${e}${We(t)?`Expr: ${t.expr}`:""}`);i(o)};if(We(t)){const o=this.unitView.paramMediator.createExpression(t.expr),a=()=>s(r(o(null)));o.addListener(a),E(this,ns).push({expr:o,listener:a}),a()}else s(r(t))}deleteGraphicsData(){const e=this.glHelper;if(!e){this.vertexArrayInfo=void 0,this.bufferInfo=void 0;return}const t=e.gl;if(this.vertexArrayInfo&&(this.gl.bindVertexArray(null),t.deleteVertexArray(this.vertexArrayInfo.vertexArrayObject),this.vertexArrayInfo=void 0),this.bufferInfo){for(let r=0;r<8;r++)t.disableVertexAttribArray(r);Object.values(this.bufferInfo.attribs).forEach(r=>this.gl.deleteBuffer(r.buffer)),this.bufferInfo.indices&&this.gl.deleteBuffer(this.bufferInfo.indices),this.bufferInfo=void 0}}dispose(){for(const{expr:e,listener:t}of E(this,ns))e.removeListener(t);E(this,ns).length=0,this.deleteGraphicsData()}updateBufferInfo(e){if(this.gl.bindVertexArray(null),this.bufferInfo&&e.vertexCount<=this.bufferInfo.allocatedVertices)for(const[t,r]of Object.entries(e.arrays))r.data&&PS(this.gl,this.bufferInfo.attribs[t],r.data,0);else{this.deleteGraphicsData(),this.bufferInfo=OS(this.gl,e.arrays,{numElements:e.vertexCount}),this.bufferInfo.allocatedVertices=e.allocatedVertices;for(const[t,r]of Object.entries(e.arrays))this.bytesPerElement.set(t,r.data.BYTES_PER_ELEMENT)}}get glHelper(){return this.getContext().glHelper}get gl(){return this.glHelper.gl}onBeforeSampleAnimation(){}onAfterSampleAnimation(){}isReady(){return this.bufferInfo&&this.programInfo}isPickingParticipant(){if(this.properties.tooltip===null&&!this.unitView.paramMediator.hasPointSelections())return!1;for(const e of this.unitView.getLayoutAncestors())if(!e.isPickingSupported())return!1;return!0}bindOrSetMarkUniformBlock(){this.markUniformsAltered?(rm(this.gl,this.programInfo,this.markUniformInfo),this.markUniformsAltered=!1):nm(this.gl,this.programInfo,this.markUniformInfo)}prepareRender(e){const t=this.glHelper,r=this.gl,i=[];i.push(()=>{this.vertexArrayInfo||(this.vertexArrayInfo=z3(this.gl,this.programInfo,this.bufferInfo)),r.useProgram(this.programInfo.program)});for(const[o,a]of Object.entries(this.encoders)){const c=t.rangeTextures.get(a.scale);c&&i.push(()=>wr(this.programInfo,{[ih+o]:c}))}i.push(...this.selectionTextureOps),this.getSampleFacetMode()==L1&&i.push(()=>{let o;for(const a of this.unitView.getLayoutAncestors())if(o=a.getSampleFacetTexture(),o)break;if(!o)throw new Error("No facet texture available. This is bug.");wr(this.programInfo,{uSampleFacetTexture:o})});const s=(e.picking??!1)&&this.isPickingParticipant();return i.push(()=>co(this.viewUniformInfo,{uViewOpacity:this.unitView.getEffectiveOpacity(),uPickingEnabled:s})),this.opaque||e.picking?i.push(()=>r.disable(r.BLEND)):i.push(()=>r.enable(r.BLEND)),i}prepareSampleFacetRendering(e){const t=e.sampleFacetRenderingOptions,r=this.programInfo.uniformSetters.uSampleFacet;if(t&&r){const i=t.locSize?t.locSize.location:0,s=t.locSize?t.locSize.size:1;if(i>1||i+s<0)return!1;const o=t.targetLocSize?t.targetLocSize.location:i,a=t.targetLocSize?t.targetLocSize.size:s;this.gl.uniform4f(r.location,i,s,o,a)}return!0}render(e){}createRenderCallback(e,t){var f;if(!this.bufferInfo)return()=>{};const r=this;let i;const s=(f=this.unitView.getScaleResolution("x"))==null?void 0:f.scale,o=s&&Oe(s.type),a=["index","locus"].includes(s==null?void 0:s.type)?-1:0,c=[0,0];i=d=>{if(o&&d.xIndex){const h=s.domain(),p=d.xIndex(h[0]+a,h[1],c),m=p[0],g=p[1]-m;g>0&&e(m,g)}else e(d.offset,d.count)};const u=this.rangeMap.get(void 0).count==0?t.facetId:void 0,l=this.rangeMap.get(u);return t.sampleFacetRenderingOptions?function(){l.count&&r.prepareSampleFacetRendering(t)&&i(l)}:function(){l.count&&i(l)}}setViewport(e,t,r,i){r=r.flatten();const s=this.gl,o=this.properties,a=.5,c=(o.xOffset??0)+a,u=(o.yOffset??0)+a;let l,f=r;if(o.clip!=="never"&&(o.clip||i)){let d=0,h=0,p;if(i){if(f=r.intersect(i).flatten(),!f.isDefined())return!1;p=[r.width/f.width,r.height/f.height],h=Math.max(0,r.y2-i.y2),d=Math.min(0,r.x-i.x)}else p=[1,1];const m=[f.x,e.height-f.y2,f.width,f.height].map(w=>w*t),g=m.map(w=>Math.floor(w)),x=m[0]-g[0],b=m[1]-g[1];s.viewport(...g),s.scissor(...g),s.enable(s.SCISSOR_TEST),l={uViewOffset:[(c+d+x/t)/f.width,-(u+h-b/t)/f.height],uViewScale:p}}else{if(!r.isDefined())return!1;s.viewport(0,0,e.width*t,e.height*t),s.disable(s.SCISSOR_TEST),l={uViewOffset:[(r.x+c)/e.width,(e.height-r.y-u-r.height)/e.height],uViewScale:[r.width/e.width,r.height/e.height]}}return co(this.viewUniformInfo,{...l,uViewportSize:[r.width,r.height],uDevicePixelRatio:t}),rm(this.gl,this.programInfo,this.viewUniformInfo),!0}findDatumAt(e,t){}}Pt=new WeakMap,ns=new WeakMap;class tT extends tn{constructor(){super([],JSON.stringify)}get(e){let t=super.get(e);return t===void 0&&(t={offset:0,count:0,xIndex:void 0},super.set(e,t)),t}migrateEntries(e){for(const[t,r]of this.entries())e.has(t)||(r.offset=0,r.count=0,r.xIndex=void 0);for(const[t,r]of e.entries())Object.assign(this.get(t),r)}}function ah(n,e){const t=pf(e);let r=n[e]&&{...n[e]},i=n[t]&&{...n[t]};if(!(xt(r)||xt(i))){if(r){if(!lt(n[e]))return;if(i){if(r.type!="quantitative"){const s=(1-(r.band||1))/2;r.band=s,i.band=-s}}else if(r.type=="quantitative")i={datum:0,contributesToScaleDomain:!1};else{i={...r};const s=(1-(r.band??1))/2;r.band=0+s,i.band=1-s}}else r={value:0},i={value:1};n[e]=r,n[t]=i}}function tu(n,e){const t=Km(n);t&&(t.resolutionChannel=e)}function U1(n,e){n.stroke||(e?n.stroke={value:null}:(n.stroke=structuredClone(n.color),tu(n.stroke,"color"))),xt(n.stroke)&&n.stroke.value===null&&(n.strokeWidth={value:0}),n.strokeOpacity||(n.strokeOpacity=structuredClone(n.opacity),tu(n.strokeOpacity,"opacity"))}function G1(n,e){xt(n.fill)&&n.fill.value===null?n.fillOpacity={value:0}:n.fill||(n.fill=structuredClone(n.color),tu(n.fill,"color"),!e&&!n.fillOpacity&&(n.fillOpacity={value:0})),n.fillOpacity||(e?(n.fillOpacity=structuredClone(n.opacity),tu(n.fillOpacity,"opacity")):n.fillOpacity={value:0})}const nT=["none","diagonal","antiDiagonal","cross","vertical","horizontal","grid","dots","rings","ringsLarge"];class rT extends Lo{constructor(t){super(t);R(this,Jn);this.augmentDefaultProperties({x2:void 0,y2:void 0,filled:!0,color:"#4c78a8",opacity:1,strokeWidth:3,cornerRadius:0,minWidth:.5,minHeight:.5,minOpacity:1})}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","fill","stroke","fillOpacity","strokeOpacity","strokeWidth"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","fill","stroke","fillOpacity","strokeOpacity","strokeWidth"]}get opaque(){return $c(this,"opaque",()=>!O(this,Jn,hd).call(this)&&!O(this,Jn,dd).call(this)&&!this.properties.shadowOpacity&&xt(this.encoding.fillOpacity)&&this.encoding.fillOpacity.value==1&&this.properties.minOpacity==1)&&this.unitView.getEffectiveOpacity()==1}fixEncoding(t){return ah(t,"x"),ah(t,"y"),U1(t,this.properties.filled),G1(t,this.properties.filled),delete t.color,delete t.opacity,t}onBeforeSampleAnimation(){}onAfterSampleAnimation(){}async initializeGraphics(){await super.initializeGraphics();const t=[];O(this,Jn,hd).call(this)&&t.push("ROUNDED_CORNERS"),O(this,Jn,dd).call(this)&&t.push("STROKED"),this.properties.shadowOpacity&&t.push("SHADOW"),this.createAndLinkShaders(_3,j3,[W3,...t.map(r=>"#define "+r)])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const t=this.properties;this.registerMarkUniformValue("uMinWidth",t.minWidth),this.registerMarkUniformValue("uMinHeight",t.minHeight),this.registerMarkUniformValue("uMinOpacity",t.minOpacity),this.registerMarkUniformValue("uCornerRadiusTopRight",t.cornerRadiusTopRight??t.cornerRadius??0),this.registerMarkUniformValue("uCornerRadiusBottomRight",t.cornerRadiusBottomRight??t.cornerRadius??0),this.registerMarkUniformValue("uCornerRadiusTopLeft",t.cornerRadiusTopLeft??t.cornerRadius??0),this.registerMarkUniformValue("uCornerRadiusBottomLeft",t.cornerRadiusBottomLeft??t.cornerRadius??0),this.registerMarkUniformValue("uHatchPattern",t.hatch,r=>Math.max(0,nT.indexOf(r??"none"))),this.registerMarkUniformValue("uShadowBlur",t.shadowBlur??0),this.registerMarkUniformValue("uShadowOpacity",t.shadowOpacity??0),this.registerMarkUniformValue("uShadowOffsetX",t.shadowOffsetX??0),this.registerMarkUniformValue("uShadowOffsetY",t.shadowOffsetY??0),this.registerMarkUniformValue("uShadowColor",t.shadowColor??"black",rh)}updateGraphicsData(){const t=this.unitView.getCollector();if(!t){console.debug("No collector");return}const r=t.getItemCount(),i=new jI({encoders:this.encoders,attributes:this.getAttributes(),numItems:r});i.addBatches(t.facetBatches);const s=i.toArrays();this.rangeMap.migrateEntries(s.rangeMap),this.updateBufferInfo(s)}prepareRender(t){const r=super.prepareRender(t);return r.push(()=>this.bindOrSetMarkUniformBlock()),r.push(()=>Ar(this.gl,this.programInfo,this.vertexArrayInfo)),r}render(t){const r=this.gl;return this.createRenderCallback((i,s)=>{Ac(r,this.vertexArrayInfo,r.TRIANGLE_STRIP,s,i)},t)}findDatumAt(t,r){t=He(t);const i=this.unitView.getCollector().facetBatches.get(t);if(!i)return;const s=this.encoders,o=s.x.scale.type;if(jn(o)){const a=s.x.dataAccessor;return i.find(c=>r==a(c))}else{const a=s.x.dataAccessor,c=s.x2.dataAccessor;return i.find(u=>r>=a(u)&&r<c(u))}}}Jn=new WeakSet,hd=function(){const t=this.properties;return t.cornerRadius||t.cornerRadiusBottomLeft||t.cornerRadiusBottomRight||t.cornerRadiusTopLeft||t.cornerRadiusTopRight},dd=function(){const t=this.encoding.strokeWidth;return!(xt(t)&&!t.value)||"condition"in t};const iT=`flat out float vRadius;
flat out float vRadiusWithPadding;
flat out lowp vec4 vFillColor;
flat out lowp vec4 vStrokeColor;
flat out lowp float vShape;
flat out lowp float vHalfStrokeWidth;
flat out mat2 vRotationMatrix;

// Copypaste from fragment shader
const float CIRCLE = 0.0;
const float SQUARE = 1.0;
const float CROSS = 2.0;
const float DIAMOND = 3.0;
const float TRIANGLE_UP = 4.0;
const float TRIANGLE_RIGHT = 5.0;
const float TRIANGLE_DOWN = 6.0;
const float TRIANGLE_LEFT = 7.0;
const float TICK_UP = 8.0;
const float TICK_RIGHT = 9.0;
const float TICK_DOWN = 10.0;
const float TICK_LEFT = 11.0;

float computeSemanticThresholdFactor() {
    // TODO: add smooth transition
    return getScaled_semanticScore() >= uSemanticThreshold ? 1.0 : 0.0;
}

// TODO: Move this into common.glsl or something
vec2 getDxDy() {
#if defined(dx_DEFINED) || defined(dy_DEFINED)
    return vec2(getScaled_dx(), getScaled_dy()) / uViewportSize;
#else
    return vec2(0.0, 0.0);
#endif
}

void main(void) {
    float shapeAngle = 0.0;

    // Selected points should always be visible
    float semanticThresholdFactor = isPointSelected()
        ? 1.0
        : computeSemanticThresholdFactor();

    if (semanticThresholdFactor <= 0.0) {
        gl_PointSize = 0.0;
        // Place the vertex outside the viewport. The default (0, 0) makes this super-slow
        // on Apple Silicon. Probably related to the tile-based GPU architecture.
        gl_Position = vec4(100.0, 0.0, 0.0, 0.0);
        // Exit early. MAY prevent some unnecessary calculations.
        return;
    }

    float size = getScaled_size();
    vec2 pos = vec2(getScaled_x(), getScaled_y()) + getDxDy();

    gl_Position = unitToNdc(applySampleFacet(pos));

    float strokeWidth = getScaled_strokeWidth();

    float diameter = sqrt(size) *
        uScaleFactor *
        semanticThresholdFactor;

    // Clamp minimum size and adjust opacity instead. Yields more pleasing result,
    // no flickering etc.
    float opacity = uViewOpacity;
	if (strokeWidth <= 0.0 || uInwardStroke) {
		float minDiameter = 1.0 / uDevicePixelRatio;
		if (diameter < minDiameter) {
			// We do some "cheap" gamma correction here. It breaks on dark background, though.
			// First we take a square of the size and then apply "gamma" of 1.5.
			opacity *= pow(diameter / minDiameter, 2.5);
			diameter = minDiameter;
		}
	}

	float fillOpa = getScaled_fillOpacity() * opacity;
	float strokeOpa = getScaled_strokeOpacity() * opacity;

    vShape = getScaled_shape();

	// Circle doesn't have sharp corners. Do some special optimizations to minimize the point size.
	bool circle = vShape == 0.0;

    if (vShape > TICK_UP && vShape <= TICK_LEFT) {
        shapeAngle = (vShape - TICK_UP) * 90.0;
        vShape = TICK_UP;
    } else if (vShape > TRIANGLE_UP && vShape <= TRIANGLE_LEFT) {
        shapeAngle = (vShape - TRIANGLE_UP) * 90.0;
        vShape = TRIANGLE_UP;
    }

	float angleInDegrees = getScaled_angle();
	float angle = -(shapeAngle + angleInDegrees) * PI / 180.0;
    float sinTheta = sin(angle);
    float cosTheta = cos(angle);
    vRotationMatrix = mat2(cosTheta, sinTheta, -sinTheta, cosTheta);

    // Not needed if we would draw rotated quads instead of gl.POINTS
	float roomForRotation = circle ? 1.0 : sin(mod(angle, PI / 2.0) + PI / 4.0) / sin(PI / 4.0);

	float aaPadding = 1.0 / uDevicePixelRatio;
	float rotationPadding = (diameter * roomForRotation) - diameter;
	// sqrt(3.0) ensures that the angles of equilateral triangles have enough room
	float strokePadding = uInwardStroke ? 0.0 : strokeWidth * (circle ? 1.0 : sqrt(3.0));
	float padding = rotationPadding + strokePadding + aaPadding;

    gl_PointSize = max(
        (diameter + padding),
        uPickingEnabled ? uMinPickingSize : 0.0
    ) * uDevicePixelRatio;

	vRadius = diameter / 2.0;
	vRadiusWithPadding = vRadius + padding / 2.0;

    vHalfStrokeWidth = strokeWidth / 2.0;

    vFillColor = vec4(getScaled_fill() * fillOpa, fillOpa);
    vStrokeColor = vec4(getScaled_stroke() * strokeOpa, strokeOpa);

    setupPicking();
}
`,sT=`const lowp vec4 white = vec4(1.0);
const lowp vec4 black = vec4(0.0, 0.0, 0.0, 1.0);

flat in float vRadius;
flat in float vRadiusWithPadding;

flat in lowp vec4 vFillColor;
flat in lowp vec4 vStrokeColor;
flat in lowp float vShape;
flat in lowp float vHalfStrokeWidth;

flat in mat2 vRotationMatrix;

out lowp vec4 fragColor;

// Copypaste from vertex shader
const float CIRCLE = 0.0;
const float SQUARE = 1.0;
const float CROSS = 2.0;
const float DIAMOND = 3.0;
const float TRIANGLE_UP = 4.0;
const float TICK_UP = 8.0;

// The distance functions are inspired by:
// http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
// However, these are not true distance functions, because the corners need to be sharp.

float circle(vec2 p, float r) {
    return length(p) - r;
}

float square(vec2 p, float r) {
    p = abs(p);
    return max(p.x, p.y) - r;
}

float tickUp(vec2 p, float r) {
    float halfR = r * 0.5;
    p.y += halfR;
    p = abs(p);
    return max(p.x - r * 0.15, p.y - halfR);
}

float equilateralTriangle(vec2 p, float r) {
    p.y = -p.y;
    float k = sqrt(3.0);
    float kr = k * r;
    p.y -= kr / 2.0;
    return max((abs(p.x) * k + p.y) / 2.0, -p.y - kr);
}

float crossShape(vec2 p, float r) {
    p = abs(p);

	vec2 b = vec2(0.4, 1.0) * r;
    vec2 v = abs(p) - b.xy;
    vec2 h = abs(p) - b.yx;
    return min(max(v.x, v.y), max(h.x, h.y));
}

float diamond(vec2 p, float r) {
    p = abs(p);
    return (max(abs(p.x - p.y), abs(p.x + p.y)) - r) / sqrt(2.0);
}

void main() {
    float d;

	/** Normalized point coord */
    vec2 p = vRotationMatrix * (2.0 * gl_PointCoord - 1.0) * vRadiusWithPadding;
	float r = vRadius;

    // We could also use textures here. Could even be faster, because we have plenty of branching here.
    if (vShape == CIRCLE) {
        d = circle(p, r);

    } else if (vShape == SQUARE) {
        d = square(p, r);

    } else if (vShape == CROSS) {
        d = crossShape(p, r);

    } else if (vShape == DIAMOND) {
        d = diamond(p, r);

    } else if (vShape == TRIANGLE_UP) {
        d = equilateralTriangle(p, r);

    } else if (vShape == TICK_UP) {
        d = tickUp(p, r);

    } else {
        d = 0.0;
    }

	if (!uPickingEnabled) {
		lowp vec4 fillColor = mix(vFillColor, white, -d * uGradientStrength / vRadius);

		fragColor = distanceToColor(
			d + (uInwardStroke ? vHalfStrokeWidth : 0.0),
			fillColor,
			vStrokeColor,
            vec4(0.0),
			vHalfStrokeWidth);

	} else if (d - vHalfStrokeWidth <= 0.0) {
        fragColor = vPickingColor;

	} else {
		discard;
    }
}

`,oT=`layout(std140) uniform Mark {
    /**
    * The stroke should only grow inwards, e.g, the diameter/outline is not affected by the stroke width.
    * Thus, a point that has a zero size has no visible stroke. This allows strokes to be used with
    * geometric zoom, etc.
    */
    uniform bool uInwardStroke;

    /** The minimum point size in pixels when rendering into the picking buffer */
    uniform float uMinPickingSize;

    /** Scale factor for geometric zoom */
    uniform mediump float uScaleFactor;

    uniform mediump float uZoomLevel;
    uniform highp float uSemanticThreshold;

    uniform mediump float uGradientStrength;

#pragma markUniforms
};
`;class H1 extends Te{constructor(e){super(e),this.params=e,this.k=e.size||500,this.reset()}reset(){super.reset(),this.reservoir=[],this.W=void 0,this.ingester=this._initialIngester}_initialIngester(e){this.reservoir.push(e),this.reservoir.length==this.k&&(this.W=Math.exp(Math.log(Math.random())/this.k),this.i=this.k,this.next=this.i,this.ingester=this._finalIngester,this._setNextStop())}_finalIngester(e){++this.i==this.next&&(this.reservoir[Math.floor(Math.random()*this.k)]=e,this.W*=Math.exp(Math.log(Math.random())/this.k),this._setNextStop())}_setNextStop(){this.next+=Math.floor(Math.log(Math.random())/Math.log(1-this.W))+1}handle(e){this.ingester(e)}complete(){for(const e of this.reservoir)this._propagate(e);super.complete()}}function aT(n,e,t){const r=new H1({type:"sample",size:n});for(const i of e)r.handle(t(i));return r.complete(),r.reservoir}const cT={};class uT extends Lo{constructor(t){super(t);R(this,Du);R(this,rs,()=>0);this.augmentDefaultProperties({x:.5,y:.5,color:"#4c78a8",filled:!0,opacity:1,size:100,semanticScore:0,shape:"circle",strokeWidth:2,fillGradientStrength:0,dx:0,dy:0,angle:0,sampleFacetPadding:.1,semanticZoomFraction:.02,minPickingSize:2});const r=this.properties.semanticZoomFraction;if(r!=null)if(We(r)){const i=this.unitView.paramMediator.createExpression(r.expr);i.addListener(()=>this.getContext().animator.requestRender()),G(this,rs,i)}else G(this,rs,()=>r);"geometricZoomBound"in this.properties&&console.warn('geometricZoomBound is deprecated. Use something like the following instead: "size": { "expr": "min(0.5 * pow(zoomLevel, 2), 200)" }.')}getAttributes(){return["uniqueId","facetIndex","x","y","size","semanticScore","shape","strokeWidth","dx","dy","fill","stroke","fillOpacity","strokeOpacity","angle"]}getSupportedChannels(){return[...super.getSupportedChannels(),"size","semanticScore","shape","strokeWidth","dx","dy","fill","stroke","fillOpacity","strokeOpacity","angle"]}getDefaultEncoding(){return{...super.getDefaultEncoding(),...cT}}fixEncoding(t){return U1(t,this.properties.filled),G1(t,this.properties.filled),delete t.color,delete t.opacity,t}initializeData(){var r,i;super.initializeData();const t=(i=(r=this.encoders.semanticScore)==null?void 0:r.dataAccessor)==null?void 0:i.asNumberAccessor();t&&(this.sampledSemanticScores=Float32Array.from(aT(1e4,this.unitView.getCollector().getData(),t)),this.sampledSemanticScores.sort((s,o)=>s-o))}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(iT,sT,[oT])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const t=this.properties;this.registerMarkUniformValue("uInwardStroke",t.inwardStroke,r=>!!r),this.registerMarkUniformValue("uGradientStrength",t.fillGradientStrength),this.registerMarkUniformValue("uMinPickingSize",t.minPickingSize)}updateGraphicsData(){const t=this.unitView.getCollector();if(!t){console.debug("No collector");return}const r=t.getItemCount(),i=new QI({encoders:this.encoders,attributes:this.getAttributes(),numItems:Math.max(r,this.properties.minBufferSize||0)});i.addBatches(t.facetBatches);const s=i.toArrays();this.rangeMap.migrateEntries(s.rangeMap),this.updateBufferInfo(s)}getSemanticThreshold(){if(this.sampledSemanticScores){const t=Math.max(0,1-E(this,rs).call(this)*this.unitView.getZoomLevel());if(t<=0)return-1/0;if(t>=1)return 1/0;{const r=this.sampledSemanticScores;return m0(r,t)}}else return-1}prepareRender(t){const r=super.prepareRender(t);return r.push(()=>{co(this.markUniformInfo,{uScaleFactor:O(this,Du,Tw).call(this),uSemanticThreshold:this.getSemanticThreshold()}),this.markUniformsAltered=!0}),r.push(()=>this.bindOrSetMarkUniformBlock()),r.push(()=>Ar(this.gl,this.programInfo,this.vertexArrayInfo)),r}render(t){const r=this.gl;return this.createRenderCallback((i,s)=>{s&&Ac(r,this.vertexArrayInfo,r.POINTS,s,i)},t)}}rs=new WeakMap,Du=new WeakSet,Tw=function(){const t=Math.pow(2,this.properties.geometricZoomBound||0);return Math.pow(Math.min(1,this.unitView.getZoomLevel()/t),1/3)};const lT=`// Line caps
const int BUTT = 0;
const int SQUARE = 1;
const int ROUND = 2;

/** Position along the rule */
in float pos;

/** Which side of the stroke: -0.5 or 0.5 */
in float side;

flat out vec4 vColor;

/** Stroke width */
flat out float vSize;

/** The distance from the line center to the direction of normal in pixels */
out float vNormalLengthInPixels;

/** Distances from the line endings. Used for rendering the round caps and dashes */
out highp vec2 vPosInPixels;


void main(void) {
    float pixelSize = 1.0 / uDevicePixelRatio;

    // Stroke width in pixels
    float size = getScaled_size();
    float opacity = getScaled_opacity() * uViewOpacity;

    // Avoid artifacts in very thin lines by clamping the size and adjusting opacity respectively
    if (size < pixelSize) {
        opacity *= size / pixelSize;
        size = pixelSize;
    }

    vec2 a = applySampleFacet(vec2(getScaled_x(), getScaled_y()));
    vec2 b = applySampleFacet(vec2(getScaled_x2(), getScaled_y2()));

    vec2 tangent = b - a;

    float offset = 0.0;
    float relativeDiff = 0.0;
    if (uMinLength > 0.0 || uStrokeCap != BUTT) {
        float len = length(tangent * uViewportSize);

        // Elongate to reach the minimum length.
        // The length difference in pixels
        float diff = max(0.0, uMinLength - len);

        // Add line caps
        if (uStrokeCap != BUTT) {
            diff += size;
        }

        relativeDiff = diff / len;
        offset = relativeDiff * (pos - 0.5);
    }

    // Apply caps and minimum length by spreading the vertices along the tangent
    vec2 p = pos < 1.0
        ? a + tangent * (pos + offset)
        : b + tangent * offset;

    // Add an extra pixel to stroke width to accommodate edge antialiasing
    float aaPadding = pixelSize;

    // Extrude
    vec2 normal = normalize(vec2(-tangent.y, tangent.x) / uViewportSize);
    p += normal * side * (size + aaPadding) / uViewportSize;

    gl_Position = unitToNdc(p);

    vColor = vec4(getScaled_color() * opacity, opacity);
    vSize = size;
    vNormalLengthInPixels = side * (size + aaPadding);

    // TODO: Here's a precision problem that breaks round caps when zoomed in enough
    vPosInPixels = vec2(pos, (1.0 - pos)) * (1.0 + relativeDiff) * length(tangent * uViewportSize) -
        vec2(uStrokeCap != BUTT ? size / 2.0 : 0.0);
    
    setupPicking();
}
`,fT=`// Line ending
const int BUTT = 0;
const int SQUARE = 1;
const int ROUND = 2;

uniform sampler2D uDashTexture;

flat in vec4 vColor;
flat in float vSize;

/** Position on the rule along its length in pixels */
in vec2 vPosInPixels;
in float vNormalLengthInPixels;

out lowp vec4 fragColor;

void main(void) {
    float dpr = uDevicePixelRatio;

    float distanceFromEnd = -min(vPosInPixels[0], vPosInPixels[1]);
    float distance; // from the rule centerline or end
    if (distanceFromEnd > 0.0 && uStrokeCap == ROUND) {
        // round cap
        distance = length(vec2(distanceFromEnd, vNormalLengthInPixels));
    } else {
        distance = abs(vNormalLengthInPixels);
    }

    // Use a signed distance field to implement edge antialiasing
    float opacity = clamp(((vSize / 2.0 - distance) * dpr), -0.5, 0.5) + 0.5;

    if (uDashTextureSize > 0.0) {
        float pos = (vPosInPixels[0] + uStrokeDashOffset) * dpr;
        float floored = floor(pos);
        vec2 texelPositions = (floored + vec2(0.5, 1.5)) / dpr / uDashTextureSize;
      
        // Do antialiasing
        opacity *= mix(
            texture(uDashTexture, vec2(texelPositions[0], 0)).r,
            texture(uDashTexture, vec2(texelPositions[1], 0)).r,
            clamp((pos - floored), 0.0, 1.0));
    }

    fragColor = vColor * opacity;

    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
}
`,hT=`layout(std140) uniform Mark {
    /** Minimum rule length in pixels */
    uniform mediump float uMinLength;

    uniform mediump float uDashTextureSize;
    uniform lowp int uStrokeCap;
    uniform mediump float uStrokeDashOffset;

#pragma markUniforms
};
`;class dT extends Lo{constructor(e){super(e),this.dashTextureSize=0,this.augmentDefaultProperties({x2:void 0,y2:void 0,size:1,color:"black",opacity:1,minLength:0,strokeDash:null,strokeDashOffset:0,strokeCap:"butt"})}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","size","color","opacity"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size"]}fixEncoding(e){if(!(e.x&&e.y&&e.x2&&e.y2))if(e.x&&e.x2&&!e.y)e.y={value:.5},e.y2=e.y;else if(e.y&&e.y2&&!e.x)e.x={value:.5},e.x2=e.x;else if(e.x&&!e.y)e.y={value:0},e.y2={value:1},e.x2=e.x;else if(e.y&&!e.x)e.x={value:0},e.x2={value:1},e.y2=e.y;else if(e.x&&e.y&&e.y2)e.x2=e.x;else if(e.y&&e.x&&e.x2)e.y2=e.y;else if(e.y&&e.x)if(!e.x2&&lt(e.y)&&e.y.type=="quantitative")e.x2=e.x,e.y2={datum:0};else if(!e.y2&&lt(e.x)&&e.x.type=="quantitative")e.y2=e.y,e.x2={datum:0};else throw new Error("A bug!");else throw new Error("At a minimum, either the x or y channel must be defined in the rule mark's encoding: "+JSON.stringify(e));return e}async initializeGraphics(){await super.initializeGraphics();const e=this.gl,t=pT(this.properties.strokeDash);this.dashTexture=ao(e,{level:0,mag:e.NEAREST,min:e.NEAREST,internalFormat:e.R8,format:e.RED,src:t,height:1}),this.dashTextureSize=t.length,this.createAndLinkShaders(lT,fT,[hT])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;this.registerMarkUniformValue("uMinLength",e.minLength),this.registerMarkUniformValue("uStrokeCap",e.strokeCap??"butt",t=>["butt","square","round"].indexOf(t)),co(this.markUniformInfo,{uDashTextureSize:+this.dashTextureSize}),this.markUniformsAltered=!0}updateGraphicsData(){const e=this.unitView.getCollector();if(!e){console.debug("No collector");return}const t=e.getItemCount(),r=new WI({encoders:this.encoders,attributes:this.getAttributes(),numItems:Math.max(t,this.properties.minBufferSize||0)});r.addBatches(e.facetBatches);const i=r.toArrays();this.rangeMap.migrateEntries(i.rangeMap),this.updateBufferInfo(i)}prepareRender(e){const t=super.prepareRender(e);return t.push(()=>this.bindOrSetMarkUniformBlock()),t.push(()=>wr(this.programInfo,{uDashTexture:this.dashTexture})),t.push(()=>Ar(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((r,i)=>Ac(t,this.vertexArrayInfo,t.TRIANGLE_STRIP,i,r),e)}}function pT(n){if(!n)return new Uint8Array(0);if(n.length==0||n.length%2||n.findIndex(s=>Math.round(s)!=s||s<1||s>1e3)>=0)throw new Error("Invalid stroke dash pattern: "+JSON.stringify(n));const e=n.reduce((s,o)=>s+o),t=new Uint8Array(e);let r=!0,i=0;for(let s of n){for(;s;)t[i++]=r&&255||0,s--;r=!r}return t}const mT=`flat out vec4 vColor;

/** Stroke width */
flat out float vSize;

/** The distance from the line center to the direction of normal in pixels */
out float vNormalLengthInPixels;

flat out float vGamma;

const int SHAPE_ARC = 0;
const int SHAPE_DOME = 1;
const int SHAPE_DIAGONAL = 2;
const int SHAPE_LINE = 3;
const int ORIENT_VERTICAL = 0;
const int ORIENT_HORIZONTAL = 1;

float distanceFromLine(vec2 pointOnLine1, vec2 pointOnLine2, vec2 point) {
    vec2 a = point - pointOnLine1;
    vec2 b = pointOnLine2 - pointOnLine1;
    vec2 proj = dot(a, b) / dot(b, b) * b;
    return length(a - proj);
}

bool isInsideViewport(vec2 point, float marginFactor) {
    vec2 margin = uViewportSize * vec2(marginFactor);
    return point.x >= -margin.x
        && point.x <= uViewportSize.x + margin.x
        && point.y >= -margin.y
        && point.y <= uViewportSize.y + margin.y;
}

void main(void) {
    float pixelSize = 1.0 / uDevicePixelRatio;
    float opacity = getScaled_opacity() * uViewOpacity;

    // The bezier's control points
    vec2 p1, p2, p3, p4;

    vec2 a = applySampleFacet(vec2(getScaled_x(), getScaled_y())) * uViewportSize;
    vec2 b = applySampleFacet(vec2(getScaled_x2(), getScaled_y2())) * uViewportSize;

    if (uShape <= SHAPE_DOME) {
        if (uShape == SHAPE_DOME) {
            vec2 height = vec2(0.0);
            if (uOrient == ORIENT_VERTICAL) {
                p1 = vec2(min(a.x, b.x), b.y);
                p4 = vec2(max(a.x, b.x), b.y);
                height = vec2(0.0, a.y - b.y);

                if (uClampApex) {
                    if (p4.x > 0.0) {
                        p1.x = max(p1.x, -p4.x);
                    }
                    if (p1.x < uViewportSize.x) {
                        p4.x = min(p4.x, 2.0 * uViewportSize.x - p1.x);
                    }
                }

            } else {
                p1 = vec2(b.x, min(a.y, b.y));
                p4 = vec2(b.x, max(a.y, b.y));
                height = vec2(a.x - b.x, 0.0);

                if (uClampApex) {
                    if (p4.y > 0.0) {
                        p1.y = max(p1.y, -p4.y);
                    }
                    if (p1.y < uViewportSize.y) {
                        p4.y = min(p4.y, 2.0 * uViewportSize.y - p1.y);
                    }
                }
            }

            vec2 controlOffset = height / 0.75;

            p2 = p1 + controlOffset;
            p3 = p4 + controlOffset;

        } if (uShape == SHAPE_ARC) {
            p1 = a;
            p4 = b;

            vec2 chordVector = p4 - p1;
            vec2 unitChordVector = normalize(chordVector);
            vec2 chordNormal = vec2(-unitChordVector.y, unitChordVector.x);
            float chordLength = length(chordVector);

            if (chordLength > uMaxChordLength) {
                if (isInsideViewport(p1, 2.0)) {
                    chordLength = uMaxChordLength;
                    p4 = p1 + unitChordVector * uMaxChordLength;
                } else if (isInsideViewport(p4, 2.0)) {
                    chordLength = uMaxChordLength;
                    p1 = p4 - unitChordVector * uMaxChordLength;
                }
            }

            float height = max(
                chordLength / 2.0 * uArcHeightFactor,
                uMinArcHeight
            );

            // This is a bit poor approximation of a circular arc, but it's probably enough for most purposes.
            // TODO: Consider a more sophisticated approach: https://stackoverflow.com/a/44829356/1547896
            vec2 controlOffset = chordNormal * height / 0.75;

            p2 = p1 + controlOffset;
            p3 = p4 + controlOffset;
        }

    } else if (uShape == SHAPE_DIAGONAL) {
        if (uOrient == ORIENT_VERTICAL) {
            p1 = a;
            p2 = vec2(a.x, (a.y + b.y) / 2.0);
            p3 = vec2(b.x, (a.y + b.y) / 2.0);
            p4 = b;
        } else {
            p1 = a;
            p2 = vec2((a.x + b.x) / 2.0, a.y);
            p3 = vec2((a.x + b.x) / 2.0, b.y);
            p4 = b;
        }
    } else if (uShape == SHAPE_LINE) {
        p1 = a;
        p2 = (a + b) / 2.0;
        p3 = p2;
        p4 = b;
    }

    vec2 strip = vec2(
        float(gl_VertexID / 2) / float(uSegmentBreaks),
        float(gl_VertexID % 2) - 0.5
    );

    // Make segments shorter near the endpoints to make the tightly bent attachment points smoother
    float t = smoothstep(0.0, 1.0, strip.x);

    // https://stackoverflow.com/a/31317254/1547896
    vec2 C1 = p4 - 3.0 * p3 + 3.0 * p2 - p1;
    vec2 C2 = 3.0 * p3 - 6.0 * p2 + 3.0 * p1;
    vec2 C3 = 3.0 * p2 - 3.0 * p1;
    vec2 C4 = p1;

    vec2 p;
    // Skip computation at endpoints to maintain precision
    if (t == 0.0) {
        p = p1;
    } else if (t == 1.0) {
        p = p4;
    } else {
        p = C1*t*t*t + C2*t*t + C3*t + C4;
    }

    vec2 tangent = normalize(3.0*C1*t*t + 2.0*C2*t + C3);
    vec2 normal = vec2(-tangent.y, tangent.x);

    float size = getScaled_size();

    // Avoid artifacts in very thin lines by clamping the size and adjusting opacity respectively
    if (size < pixelSize) {
        opacity *= size / pixelSize;
        size = pixelSize;
    }

    // Handle minimum picking size or add an extra pixel to the stroke width to accommodate edge antialiasing
    float paddedSize = uPickingEnabled
        ? max(size, uMinPickingSize)
        : size + pixelSize;

    vNormalLengthInPixels = strip.y * paddedSize;
    
    if (uShape == SHAPE_ARC &&
        uArcFadingDistance[0] > 0.0 &&
        uArcFadingDistance[1] > 0.0 &&
        (!uNoFadingOnPointSelection || !isPointSelected()))
    {
        float d = distanceFromLine(p1, p4, p);
        float distanceOpacity = smoothstep(uArcFadingDistance[1], uArcFadingDistance[0], d);    

        // Fade out
        opacity *= distanceOpacity;

        // Collapse fully transparent triangles to skip fragment processing 
        if (distanceOpacity <= 0.0) {
            vNormalLengthInPixels = 0.0;
        }
    }

    // Extrude
    p += normal * vNormalLengthInPixels;

    gl_Position = pixelsToNdc(p);

    vec3 color = getScaled_color();

    vColor = vec4(color * opacity, opacity);

    vGamma = getGammaForColor(color);

    vSize = paddedSize;

    setupPicking();
}
`,gT=`flat in vec4 vColor;
flat in float vSize;
in float vNormalLengthInPixels;
flat in float vGamma;

out lowp vec4 fragColor;

void main(void) {
    float dpr = uDevicePixelRatio;

    float distance = abs(vNormalLengthInPixels);
    float opacity = clamp(((vSize / 2.0 - distance) * dpr), 0.0, 1.0);

    opacity = pow(opacity, vGamma);

    fragColor = vColor * opacity;

    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
}
`,xT=`layout(std140) uniform Mark {
    uniform float uArcHeightFactor;

    /** Make very small arcs visible */
    uniform float uMinArcHeight;

    /** The minimum stroke width in pixels when rendering into the picking buffer */
    uniform float uMinPickingSize;

    uniform int uShape;
    uniform int uOrient;
    uniform bool uClampApex;

    // In pixels
    uniform float uMaxChordLength;
    // In pixels
    uniform vec2 uArcFadingDistance;
    uniform bool uNoFadingOnPointSelection;

    uniform int uSegmentBreaks;

#pragma markUniforms
};
`,yT=["arc","dome","diagonal","line"],bT=["vertical","horizontal"];class wT extends Lo{constructor(e){super(e),this.augmentDefaultProperties({x:0,x2:void 0,y:0,y2:void 0,size:1,color:"black",opacity:1,segments:101,arcHeightFactor:1,minArcHeight:1.5,minPickingSize:3,clampApex:!1,maxChordLength:5e4,arcFadingDistance:!1,noFadingOnPointSelection:!0,linkShape:"arc",orient:"vertical"}),this._baseInstanceExt=this.gl.getExtension("WEBGL_draw_instanced_base_vertex_base_instance")}get defaultHitTestMode(){return"endpoints"}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","size","color","opacity"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size"]}fixEncoding(e){return e.x2||(lt(e.x)?e.x2={datum:0}:e.x2=e.x),e.y2||(lt(e.y)?e.y2={datum:0}:e.y2=e.y),e}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(mT,gT,[xT])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;this.registerMarkUniformValue("uArcFadingDistance",e.arcFadingDistance,t=>t||[0,0]),this.registerMarkUniformValue("uArcHeightFactor",e.arcHeightFactor),this.registerMarkUniformValue("uMinArcHeight",e.minArcHeight),this.registerMarkUniformValue("uMinPickingSize",e.minPickingSize),this.registerMarkUniformValue("uShape",e.linkShape,t=>yT.indexOf(t)),this.registerMarkUniformValue("uOrient",e.orient,t=>bT.indexOf(t)),this.registerMarkUniformValue("uClampApex",e.clampApex,t=>!!t),this.registerMarkUniformValue("uMaxChordLength",e.maxChordLength),this.registerMarkUniformValue("uSegmentBreaks",e.segments,t=>t),this.registerMarkUniformValue("uNoFadingOnPointSelection",e.noFadingOnPointSelection,t=>!!t)}updateGraphicsData(){const e=this.unitView.getCollector();if(!e){console.debug("No collector");return}const t=e.getItemCount(),r=new qI({encoders:this.encoders,attributes:this.getAttributes(),numItems:t});r.addBatches(e.facetBatches);const i=r.toArrays();this.rangeMap.migrateEntries(i.rangeMap),this.arrays=Object.fromEntries(Object.entries(i.arrays).map(([s,o])=>[s,{...o,data:void 0}])),this.updateBufferInfo(i)}prepareRender(e){const t=super.prepareRender(e);return t.push(()=>this.bindOrSetMarkUniformBlock()),this._baseInstanceExt?t.push(()=>Ar(this.gl,this.programInfo,this.vertexArrayInfo)):t.push(()=>this.gl.bindVertexArray(null)),t}render(e){const t=this.gl,r=()=>(this.markUniformInfo.uniforms.uSegmentBreaks[0]+1)*2;return this._baseInstanceExt?this.createRenderCallback((i,s)=>{this._baseInstanceExt.drawArraysInstancedBaseInstanceWEBGL(t.TRIANGLE_STRIP,0,r(),s,i)},e):this.createRenderCallback((i,s)=>{for(const o of Object.entries(this.bufferInfo.attribs)){const[a,c]=o;c.buffer&&c.numComponents&&c.divisor&&(c.offset=i*this.arrays[a].numComponents*this.bytesPerElement.get(a))}Ar(t,this.programInfo,this.bufferInfo),t.drawArraysInstanced(t.TRIANGLE_STRIP,0,r(),s)},e)}}const AT=`in mediump vec2 vertexCoord;
in lowp vec2 textureCoord;

// Width of the text (all letters)
in float width;

out vec2 vTexCoord;
out float vEdgeFadeOpacity;
flat out vec4 vColor;
flat out float vSlope;
flat out float vGamma;

struct RangeResult {
    float pos;
    float scale;
};

float minValue(vec4 v) {
    return min(min(v.x, v.y), min(v.z, v.w));
}

float maxValue(vec4 v) {
    return max(max(v.x, v.y), max(v.z, v.w));
}

/**
 * All measures are in [0, 1]
 */
RangeResult positionInsideRange(float a, float b, float width, float padding,
                                int align, bool flush) {
    float span = b - a;
    float paddedWidth = width + 2.0 * padding;

    // Is the text clearly outside the viewport
    if (a > 1.0 || b < 0.0) {
        return RangeResult(0.0, 0.0);
    }

    // How much extra space we have for adjusting the position so that the
    // text stays inside the range.
    float extra = max(0.0, span - paddedWidth);

    float pos;

    // Align the text and try to keep it inside the range and the viewport
    if (align == 0) {
        float centre = a + b;

        if (flush) {
            float leftOver = max(0.0, paddedWidth - centre);
            centre += min(leftOver, extra);

            float rightOver = max(0.0, paddedWidth + centre - 2.0);
            centre -= min(rightOver, extra);
        }

        pos = centre / 2.0;

    } else if (align < 0) {
        float edge = a;

        if (flush) {
            float over = max(0.0, -edge);
            edge += min(over, extra);
        }

        pos = edge + padding;

    } else {
        float edge = b;

        if (flush) {
            float over = max(0.0, edge - 1.0);
            edge -= min(over, extra);
        }

		// TODO: If the text spans the whole viewport, try to keep it centered if possible.

        pos = edge - padding;
    }

    // How the text should be scaled to make it fit inside the range (if it didn't fit).
    float scale = clamp((span - padding) / paddedWidth, 0.0, 1.0);

    // TODO: Fix padding in scale factor. Padding should stay constant
    return RangeResult(pos, scale);
}

vec2 calculateRotatedDimensions(float width, mat2 rotationMatrix) {
    vec2 a = abs(rotationMatrix * vec2(width / 2.0, 0.5));
    vec2 b = abs(rotationMatrix * vec2(width / 2.0, -0.5));
    return vec2(max(a.x, b.x), max(a.y, b.y)) * 2.0;
}

/** Needed when using ranged text */
ivec2 fixAlignForAngle(ivec2 align, float angleInDegrees) {
    float a = mod(angleInDegrees + 45.0, 360.0);
    int x = align.x;
    int y = -align.y;

    // TODO: Optimize by avoiding branching
    if (a < 90.0) {
        return ivec2(x, y);
    } else if (a < 180.0) {
        return ivec2(y, -x);
    } else if (a < 270.0) {
        return ivec2(-x, y);
    } else {
        return ivec2(-y, x);
    }
}

void main(void) {
    float opacity = getScaled_opacity() * uViewOpacity;
    vec2 size = vec2(getScaled_size());
    float x = getScaled_x();
    float y = getScaled_y();

    float scale = 1.0;

	float angleInDegrees = getScaled_angle();
	float angle = -angleInDegrees * PI / 180.0;
	
    float sinTheta = sin(angle);
    float cosTheta = cos(angle);
    mat2 rotationMatrix = mat2(cosTheta, sinTheta, -sinTheta, cosTheta);

    vec2 flushSize = calculateRotatedDimensions(width, rotationMatrix);

#if defined(x2_DEFINED) || defined(y2_DEFINED)
    ivec2 align = fixAlignForAngle(uAlign, angleInDegrees);
#else
    ivec2 align = uAlign;
#endif

#ifdef x2_DEFINED
    float x2 = getScaled_x2();

    if (uLogoLetter) {
        size.x = (x2 - x) * uViewportSize.x;
        x += (x2 - x) / 2.0;

    } else {
        float x2 = getScaled_x2();
        RangeResult result = positionInsideRange(
            min(x, x2), max(x, x2),
            size.x * scale * flushSize.x / uViewportSize.x, uPaddingX / uViewportSize.x,
            align.x, uFlushX);
        
        x = result.pos;
        scale *= result.scale;
    }
#endif

    // Position of the text origo 
    vec2 pos = applySampleFacet(vec2(x, y));

#ifdef y2_DEFINED
    float y2 = getScaled_y2();
    vec2 pos2 = applySampleFacet(vec2(x, y2));

    if (uLogoLetter) {
        size.y = (pos2.y - pos.y) * uViewportSize.y;
        pos.y += (pos2.y - pos.y) / 2.0;

    } else {
        RangeResult result = positionInsideRange(
            min(pos.y, pos2.y), max(pos.y, pos2.y),
            size.y * scale * flushSize.y / uViewportSize.y, uPaddingY / uViewportSize.y,
            align.y, uFlushY);
        
        pos.y = result.pos;
        scale *= result.scale;
    }
#endif

    if (scale < 1.0) {
        if (uSqueeze) {
            vec2 scaleFadeExtent = vec2(3.0, 6.0) / size;

            if (scale  < scaleFadeExtent[0]) {
                gl_Position = vec4(0.0);
                return;
            }

            size *= scale;
            opacity *= linearstep(scaleFadeExtent[0], scaleFadeExtent[1], scale);

        } else if (scale < 1.0) {
            // Eliminate the text
            gl_Position = vec4(0.0);
            return;
        }
    }

    // Position of the character vertex in relation to the text origo
    vec2 charPos = rotationMatrix * (vertexCoord * size + uD);

    // Position of the character vertex inside the unit viewport
    vec2 unitPos = pos + charPos / uViewportSize;

    gl_Position = unitToNdc(unitPos);

    // Controls antialiasing of the SDF
    vSlope = max(1.0, min(size.x, size.y) / uSdfNumerator * uDevicePixelRatio);

    vec3 color = getScaled_color();

    // Premultiply alpha
    vColor = vec4(color * opacity, opacity);

    // Do something like gamma correction for text when the color is close to black or white.
    vGamma = getGammaForColor(color);

    vTexCoord = textureCoord;

    // Edge fading. The implementation is simplistic and fails with primitives that
    // span the whole viewport. However, it works just fine with reasonable font sizes.
    // x: top, y: right, z: bottom, w: left
    if (maxValue(uViewportEdgeFadeDistance) > -pow(10.0, 10.0)) { // -Infinity would be nice
        vEdgeFadeOpacity = minValue(
            ((vec4(1.0, 1.0, 0.0, 0.0) + vec4(-1.0, -1.0, 1.0, 1.0) * unitPos.yxyx) *
                uViewportSize.yxyx - uViewportEdgeFadeDistance) / uViewportEdgeFadeWidth);
    } else {
        vEdgeFadeOpacity = 1.0;
    }

    setupPicking();
}
`,vT=`uniform sampler2D uTexture;

in vec2 vTexCoord;
in float vEdgeFadeOpacity;
flat in vec4 vColor;
flat in float vSlope;
flat in float vGamma;

out lowp vec4 fragColor;

float median(float r, float g, float b) {
    return max(min(r, g), min(max(r, g), b));
}

float getDist(vec2 uv) {
    vec3 c = texture(uTexture, uv).rgb;
    return 1.0 - median(c.r, c.g, c.b);
}

/**
 * Calculates the super-sampled distance to the edge.
 * This is used to avoid aliasing when rendering small text,
 * as mip-mapping cannot be used here.
 * The distance is averaged over a grid of n x n samples.
 */
float getSuperDist(vec2 uv) {
    vec2 dx = dFdx(uv);
    vec2 dy = dFdy(uv);

    float n = 2.0;

    float sum = 0.0;
    for (float x = 0.5; x < n; x++){
        for (float y = 0.5; y < n; y++) {
            sum += getDist(
                uv +
                x / n * dx +
                y / n * dy
            ); 
        }
    }

    return sum / (n * n);
}

void main() {
    float sigDist = getSuperDist(vTexCoord);

    float slope = vSlope;
    if (uLogoLetter) {
        // Using screen-space derivatives for logo letters because skewed aspect ratios
        // result in blurry edges otherwise. However, use of screen-space derivatives
        // results in crappy looking text with regular letters text.
        slope = 0.7 / length(vec2(dFdy(sigDist), dFdx(sigDist)));
    }

    float opa = clamp((sigDist - 0.5) * slope + 0.5, 0.0, 1.0);
    opa *= clamp(vEdgeFadeOpacity, 0.0, 1.0);

    opa = pow(opa, vGamma);

    fragColor = vColor * opa;

    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
}
`,ST=`layout(std140) uniform Mark {
    uniform mediump float uSdfNumerator;

    uniform mediump vec2 uD; // dx & dy

    uniform mediump vec4 uViewportEdgeFadeWidth;
    uniform mediump vec4 uViewportEdgeFadeDistance;
        
    uniform bool uSqueeze;
    uniform bool uLogoLetter;

    // x: -1, 0, 1 = left, center, right
    // y: -1, 0, 1 = top, middle, bottom 
    uniform lowp ivec2 uAlign;

    uniform mediump float uPaddingX;
    uniform bool uFlushX;
    uniform mediump float uPaddingY;
    uniform bool uFlushY;

#pragma markUniforms
};
`,ET={left:-1,center:0,right:1},CT={top:-1,middle:0,bottom:1,alphabetic:1};class DT extends Lo{constructor(e){super(e),this.augmentDefaultProperties({x:.5,y:.5,x2:void 0,y2:void 0,text:"",size:11,color:"black",opacity:1,font:void 0,fontStyle:void 0,fontWeight:void 0,align:"center",baseline:"middle",dx:0,dy:0,angle:0,fitToBand:!1,squeeze:!0,paddingX:0,paddingY:0,flushX:!0,flushY:!0,logoLetters:!1,viewportEdgeFadeWidthTop:0,viewportEdgeFadeWidthRight:0,viewportEdgeFadeWidthBottom:0,viewportEdgeFadeWidthLeft:0,viewportEdgeFadeDistanceTop:-1/0,viewportEdgeFadeDistanceRight:-1/0,viewportEdgeFadeDistanceBottom:-1/0,viewportEdgeFadeDistanceLeft:-1/0}),this.font=this.properties.font?e.context.fontManager.getFont(this.properties.font,this.properties.fontStyle,this.properties.fontWeight):e.context.fontManager.getDefaultFont(),this.setupExprRefsNeedingGraphicsUpdate(["text","fitToBand","logoLetters"])}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","color","size","opacity","angle"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size","text","angle"]}fixEncoding(e){for(const t of Dr)this.properties.fitToBand&&ah(e,t);return e}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(AT,vT,[ST])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties,t=this.font.metrics.common.base*.35*(this.properties.logoLetters?.5:1);this.registerMarkUniformValue("uPaddingX",e.paddingX),this.registerMarkUniformValue("uPaddingY",e.paddingY),this.registerMarkUniformValue("uFlushX",e.flushX,r=>!!r),this.registerMarkUniformValue("uFlushY",e.flushY,r=>!!r),this.registerMarkUniformValue("uSqueeze",e.squeeze,r=>!!r),co(this.markUniformInfo,{uAlign:[ET[e.align],CT[e.baseline]],uD:[e.dx,-e.dy],uLogoLetter:!!e.logoLetters,uSdfNumerator:t,uViewportEdgeFadeWidth:[e.viewportEdgeFadeWidthTop,e.viewportEdgeFadeWidthRight,e.viewportEdgeFadeWidthBottom,e.viewportEdgeFadeWidthLeft],uViewportEdgeFadeDistance:[e.viewportEdgeFadeDistanceTop,e.viewportEdgeFadeDistanceRight,e.viewportEdgeFadeDistanceBottom,e.viewportEdgeFadeDistanceLeft]})}updateGraphicsData(){const e=this.unitView.getCollector();if(!e){console.debug("No collector");return}const t=e.getData(),r=this.encoding,i=this.encoders.text;let s=0;const o="format"in r.text?Le(r.text.format):u=>u;for(const u of t){const l=o(i(u)),f=me(l)?l:l===null?"":""+l;s+=f&&f.length||0}const a=new YI({encoders:this.encoders,attributes:this.getAttributes(),properties:this.properties,fontMetrics:this.font.metrics,numCharacters:Math.max(s,this.properties.minBufferSize||1024)});a.addBatches(e.facetBatches);const c=a.toArrays();this.rangeMap.migrateEntries(c.rangeMap),this.updateBufferInfo(c)}prepareRender(e){const t=super.prepareRender(e);return t.push(()=>{wr(this.programInfo,{uTexture:this.font.texture})}),t.push(()=>this.bindOrSetMarkUniformBlock()),t.push(()=>Ar(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((r,i)=>Ac(t,this.vertexArrayInfo,t.TRIANGLES,i,r),e)}}const V1=1;function ch(){let n=[0,1],e=[0,1],t=1,r=1,i=0,s=0,o=.5,a=0;const u=l=>(l+o-n[0])/t*r+e[0];return u.invert=l=>(l-e[0])/r*t+n[0]-o,u.domain=function(l){if(arguments.length){n=ZA(l),t=n[1]-n[0];const f=n[0]===0&&n[0]===0;if(t<V1&&!f){t=V1;const d=(n[0]+n[1])/2;n[0]=d-t/2,n[1]=d+t/2}return u}else return n.slice()},u.range=function(l){return arguments.length?(e=[...l],r=e[1]-e[0],u):e},u.numberingOffset=function(l){return arguments.length?(a=l,u):a},u.padding=function(l){return arguments.length?(s=l,i=Math.min(1,l),u):i},u.paddingInner=function(l){return arguments.length?(i=Math.min(1,l),u):i},u.paddingOuter=function(l){return arguments.length?(s=l,u):s},u.align=function(l){return arguments.length?(o=Math.max(0,Math.min(1,l)),u):o},u.step=()=>r/t,u.bandwidth=()=>u.step(),u.ticks=l=>{const f=u.align(),d=u.numberingOffset();return Ha(n[0]-f+d,n[1]-f+d,Math.min(l,Math.ceil(t))).filter(Number.isInteger).map(h=>h-a)},u.tickFormat=(l,f)=>{if(f)throw new Error("Index scale's tickFormat does not support a specifier!");const h=pr(n[0],n[1],Math.min(l,Math.ceil(t)))<1e5?Le(","):Le(".3s");return p=>h(p+a)},u.copy=()=>ch().domain(n).range(e).paddingInner(i).paddingOuter(s).numberingOffset(a),u}function IT(){const n=ch().numberingOffset(1);let e;n.genome=function(r){return arguments.length?(e=r,n):e},n.ticks=r=>{if(!e)return[];const i=n.domain(),s=n.numberingOffset(),[o,a]=[Math.max(i[0],0),Math.min(i[1],e.totalSize-1)].map(l=>e.toChromosome(l)),c=Math.max(1,pr(i[0],i[1],r)),u=[];for(let l=o.index;l<=a.index;l++){const f=e.chromosomes[l],d=Math.max(f.continuousStart+c,i[0]-(i[0]-f.continuousStart)%c),h=Math.min(f.continuousEnd-c/4,i[1]+1);for(let p=d;p<=h;p+=c){const m=p-s;m>=i[0]&&m<i[1]&&u.push(m)}}return u},n.tickFormat=(r,i)=>{if(!e)return;if(i)throw new Error("Locus scale's tickFormat does not support a specifier!");const s=n.domain(),o=s[1]-s[0],a=n.numberingOffset(),u=pr(s[0],s[1],Math.min(r,Math.ceil(o)))<1e6?Le(","):Le(".3s"),l=f=>f-e.toChromosome(f).continuousStart;return f=>u(l(f)+a)};const t=n.copy;return n.copy=()=>t().genome(e),n}function TT(n){return n.type=="locus"}function nu(n,e,t){if(t=t||[],n.some(o=>o===null)){if(n.every(o=>o===null))return null;throw console.warn(n),new Error("Cannot merge objects with nulls!")}const r={},i=(o,a)=>o===a||Mi(o)&&Mi(a)||Mi(o)&&a===!0||o===!0&&Ge(a)||Array.isArray(o)&&Array.isArray(a)&&o.length===a.length&&o.every((c,u)=>c===a[u]),s=o=>{for(let a in o){const c=o[a];if(!t.includes(a)&&c!==void 0)if(r[a]!==void 0&&!i(r[a],c))console.warn(`Conflicting property ${a} of ${e}: (${JSON.stringify(r[a])} and ${JSON.stringify(o[a])}). Using ${JSON.stringify(r[a])}.`);else{const u=r[a];if(Mi(u))Mi(c)&&(r[a]=nu([u,c],a));else if(Mi(c)){if(!(u===!0||u===void 0))throw new Error("Bug in merge! Target is: "+u);r[a]=nu([{},c],a)}else r[a]=c}}};for(const o of n)s(o);return r}function Mi(n){return Ge(n)&&!Array.isArray(n)}/*!
 * Adapted from vega-encode:
 * https://github.com/vega/vega/blob/master/packages/vega-encode/src/ticks.js
 *
 * Copyright (c) 2015-2018, University of Washington Interactive Data Lab
 * All rights reserved.
 *
 * BSD-3-Clause License: https://github.com/vega/vega-lite/blob/master/LICENSE
 */function _1(n,e,t){return Ke(e)&&t!=null&&(e=Math.min(e,~~(Ts(n.domain())/t)||1)),Ge(e)&&(e.step,e=e.interval),e}function j1(n,e,t){var r=n.range(),i=Math.floor(r[0]),s=Math.ceil(en(r));if(i>s&&(r=s,s=i,i=r),e=e.filter(function(a){return a=n(a),i<=a&&a<=s}),t>0&&e.length>1){for(var o=[e[0],en(e)];e.length>t&&e.length>=3;)e=e.filter(function(a,c){return!(c%2)});e.length<3&&(e=o)}return e}function BT(n,e){return n.bins?j1(n,kT(n.bins,e)):n.ticks?n.ticks(e):n.domain()}function kT(n,e){var t=n.length,r=~~(t/(e||t));return r<2?n.slice():n.filter(function(i,s){return!(s%r)})}function FT(n,e,t){var r=n.tickFormat?n.tickFormat(e,t):t?Le(t):String;if(x1(n.type)){var i=MT(t);r=n.bins?i:PT(r,i)}return r}function PT(n,e){return function(t){return n(t)?e(t):""}}function MT(n){var e=ai(n||",");if(e.precision==null){switch(e.precision=12,e.type){case"%":e.precision-=2;break;case"e":e.precision-=1;break}return RT(Le(e),Le(".1f")(1)[1])}else return Le(e)}function RT(n,e){return function(t){var r=n(t),i=r.indexOf(e),s,o;if(i<0)return r;for(s=OT(r,i),o=s<r.length?r.slice(s):"";--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function OT(n,e){var t=n.lastIndexOf("e"),r;if(t>0)return t;for(t=n.length;--t>e;)if(r=n.charCodeAt(t),r>=48&&r<=57)return t+1}/*!
 * Adapted from vega-encode:
 * https://github.com/vega/vega/blob/master/packages/vega-encode/src/Scale.js
 *
 * Copyright (c) 2015-2018, University of Washington Interactive Data Lab
 * All rights reserved.
 *
 * BSD-3-Clause License: https://github.com/vega/vega-lite/blob/master/LICENSE
 */const NT="locus",LT="index";var zT=5;function UT(n){const e=n.type;return!n.bins&&(e===Bi||e===Io||e===To)}function W1(n){return Oe(n)&&![qt,LT,NT].includes(n)}function Q1(n){return n||{warn:(e,...t)=>console.warn(e,...t)}}var GT=dA(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma","zoom","fp64","name"]);function q1(n,e,t){t=Q1(t);for(const r in n)if(!GT[r]){if(r==="padding"&&W1(e.type))continue;Nt(e[r])?e[r](n[r]):t.warn("Unsupported scale property: "+r)}YT(e,n,qT(e,n,jT(e,n,t)))}function HT(n,e){const t=VT(n),r=le(t);if(!r)throw new Error("Unknown scale type: "+t);const i=r();return!n.domain&&Oe(i.type)&&(n.domain=[0,0]),q1(n,i,e),i}function VT(n){var e=n.type,t="",r;return e===qt?qt+"-"+Bi:(_T(n)&&(r=n.rawDomain?n.rawDomain.length:n.domain?n.domain.length+ +(n.domainMid!=null):0,t=r===2?qt+"-":r===3?ki+"-":""),(t+e||Bi).toLowerCase())}function _T(n){const e=n.type;return Oe(e)&&e!==u1&&e!==l1&&(n.scheme||n.range&&n.range.length&&n.range.every(me))}function jT(n,e,t){if(!n.domain)return 0;t=Q1(t);var r=WT(n,e.domainRaw,t);if(r>-1)return r;var i=e.domain,s=n.type,o=e.zero||e.zero===void 0&&UT(n),a,c;return i?(W1(s)&&e.padding&&i[0]!==en(i)&&(i=QT(s,i,e.range,e.padding,e.exponent,e.constant)),(o||e.domainMin!=null||e.domainMax!=null||e.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),e.domainMin!=null&&(i[0]=e.domainMin),e.domainMax!=null&&(i[a]=e.domainMax),e.domainMid!=null&&(c=e.domainMid,(c<i[0]||c>i[a])&&t.warn("Scale domainMid exceeds domain min or max.",c),i.splice(a,0,c))),n.domain(Y1(s,i,t)),s===Kf&&n.unknown(e.domainImplicit?gf:void 0),e.nice&&n.nice&&n.nice(e.nice!==!0&&_1(n,e.nice)||null),i.length):0}function WT(n,e,t){return e?(n.domain(Y1(n.type,e,t)),e.length):-1}function QT(n,e,t,r,i,s){t??(t=[0,1]);var o=Math.abs(en(t)-t[0]),a=o/(o-2*r),c=n===_n?Od(e,null,a):n===To?zu(e,null,a,.5):n===Io?zu(e,null,a,i||1):n===qc?$w(e,null,a,s||1):Rd(e,null,a);return e=e.slice(),e[0]=c[0],e[e.length-1]=c[1],e}function Y1(n,e,t){if(x1(n)){var r=Math.abs(e.reduce(function(i,s){return i+(s<0?-1:s>0?1:0)},0));r!==e.length&&t.warn("Log scale domain includes zero: "+Uu(e))}return e}function qT(n,e,t){let r=e.bins;if(r&&!Ue(r)){const i=(r.start==null||r.stop==null)&&n.domain(),s=r.start==null?i[0]:r.start,o=r.stop==null?en(i):r.stop,a=r.step;a||Ct("Scale bins parameter missing step property."),r=Gs(s,o+a,a)}return r?n.bins=r:n.bins&&delete n.bins,n.type===Jf&&(r?!e.domain&&!e.domainRaw&&(n.domain(r),t=r.length):n.bins=n.domain()),t}function YT(n,e,t){var r=n.type,i=e.round||!1,s=e.range;if(e.rangeStep!=null)s=XT(r,e,t);else if(e.scheme&&(s=KT(r,e,t),Nt(s))){if(n.interpolator)return n.interpolator(s);Ct(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&Xc(r))return n.interpolator(Kc(uh(s,e.reverse),e.interpolate,e.interpolateGamma));s&&e.interpolate&&n.interpolate?n.interpolate(y1(e.interpolate,e.interpolateGamma)):Nt(n.round)?n.round(i):Nt(n.rangeRound)&&n.interpolate(i?Co:Hn),s&&n.range(uh(s,e.reverse))}function XT(n,e,t){n!==d1&&n!==Zf&&Ct("Only band and point scales support rangeStep.");var r=(e.paddingOuter!=null?e.paddingOuter:e.padding)||0,i=n===Zf?1:(e.paddingInner!=null?e.paddingInner:e.padding)||0;return[0,e.rangeStep*Yf(t,i,r)]}function KT(n,e,t){var r=e.schemeExtent,i,s;return Ue(e.scheme)?s=Kc(e.scheme,e.interpolate,e.interpolateGamma):(i=e.scheme.toLowerCase(),s=eh(i),s||Ct(`Unrecognized scheme name: ${e.scheme}`)),t=n===h1?t+1:n===Jf?t-1:n===Xf||n===f1?+e.schemeCount||zT:t,Xc(n)?X1(s,r,e.reverse):Nt(s)?hI(X1(s,r),t):n===Kf?s:s.slice(0,t)}function X1(n,e,t){return Nt(n)&&(e||t)?fI(n,uh(e||[0,1],t)):n}function uh(n,e){return e?n.slice().reverse():n}const K1=Le(",d");function ZT(n,e){return n.chrom+":"+K1(Math.floor(n.pos+1))+"-"+(n.chrom!=e.chrom?e.chrom+":":"")+K1(Math.ceil(e.pos))}const Z1={dm6:`chr3R	32079331
chr3L	28110227
chr2R	25286936
chrX	23542271
chr2L	23513712
chrY	3667352
chr4	1348131
chrM	19524`,hg18:`chr1	247249719
chr2	242951149
chr3	199501827
chr4	191273063
chr5	180857866
chr6	170899992
chr7	158821424
chr8	146274826
chr9	140273252
chr10	135374737
chr11	134452384
chr12	132349534
chr13	114142980
chr14	106368585
chr15	100338915
chr16	88827254
chr17	78774742
chr18	76117153
chr19	63811651
chr20	62435964
chr21	46944323
chr22	49691432
chrX	154913754
chrY	57772954
chrM	16571`,hg19:`chr1	249250621
chr2	243199373
chr3	198022430
chr4	191154276
chr5	180915260
chr6	171115067
chr7	159138663
chr8	146364022
chr9	141213431
chr10	135534747
chr11	135006516
chr12	133851895
chr13	115169878
chr14	107349540
chr15	102531392
chr16	90354753
chr17	81195210
chr18	78077248
chr19	59128983
chr20	63025520
chr21	48129895
chr22	51304566
chrX	155270560
chrY	59373566
chrM	16571`,hg38:`chr1	248956422
chr2	242193529
chr3	198295559
chr4	190214555
chr5	181538259
chr6	170805979
chr7	159345973
chr8	145138636
chr9	138394717
chr10	133797422
chr11	135086622
chr12	133275309
chr13	114364328
chr14	107043718
chr15	101991189
chr16	90338345
chr17	83257441
chr18	80373285
chr19	58617616
chr20	64444167
chr21	46709983
chr22	50818468
chrX	156040895
chrY	57227415
chrM	16569`,mm9:`chr1	197195432
chr2	181748087
chr3	159599783
chr4	155630120
chr5	152537259
chr6	149517037
chr7	152524553
chr8	131738871
chr9	124076172
chr10	129993255
chr11	121843856
chr12	121257530
chr13	120284312
chr14	125194864
chr15	103494974
chr16	98319150
chr17	95272651
chr18	90772031
chr19	61342430
chrX	166650296
chrY	15902555
chrM	16299`,mm10:`chr1	195471971
chr2	182113224
chr3	160039680
chr4	156508116
chr5	151834684
chr6	149736546
chr7	145441459
chr8	129401213
chr9	124595110
chr10	130694993
chr11	122082543
chr12	120129022
chr13	120421639
chr14	124902244
chr15	104043685
chr16	98207768
chr17	94987271
chr18	90702639
chr19	61431566
chrX	171031299
chrY	91744698
chrM	16299`};function JT(n){if(!(n in Z1))throw new Error(`Unknown assembly: ${n}`);return Z1[n].split(`
`).map(e=>{const t=e.split("	");return{name:t[0],size:parseInt(t[1])}})}const $T=/^([A-Za-z]+:)?\/\//;function Or(n,e){if(e&&$T.test(e))return e;const t=typeof n=="function"?n():n;if(!t)return e;if(!e)return t;if(/[#?]/.test(t))throw new Error(`Cannot append to a url with query or hash. Append: ${e}, base: ${t}`);return J1(t)+e}function J1(n){const e=n.replace(/[^/]*$/,"");return e===""?void 0:e.endsWith("://")?n+"/":e}class eB{constructor(e){if(this.config={name:"custom",...e},"baseUrl"in e)throw new Error("The `baseUrl` property in genome config has been removed in GenomeSpy v0.52.0. Use `url` instead. See https://genomespy.app/docs/genomic-data/genomic-coordinates/.");if(!lh(e))throw new Error("Not a genome configuration: "+JSON.stringify(e));if(this.chromosomes=[],this.cumulativeChromPositions=new Map,this.chromosomesByName=new Map,this.startByIndex=[],this.totalSize=0,ex(this.config))this.setChromSizes(this.config.contigs);else if(!fh(this.config)){const t=JT(this.config.name);if(t)this.setChromSizes(t);else throw new Error(`Unknown genome: ${this.config.name}. Please provide contigs or a URL. See https://genomespy.app/docs/genomic-data/genomic-coordinates/.`)}}get name(){return this.config.name}async load(e){if(fh(this.config))try{const t=Or(e,this.config.url),r=await fetch(t);if(!r.ok)throw new Error(`${r.status} ${r.statusText}`);this.setChromSizes(tB(await r.text()))}catch(t){throw new Error(`Could not load chrom sizes: ${this.config.url}. Reason: ${t.message}`)}}hasChrPrefix(){return this.chromosomes.some(e=>e.name.startsWith("chr"))}setChromSizes(e){let t=0;this.startByIndex=[0];for(let r=0;r<e.length;r++){this.startByIndex.push(t);const i=e[r].size,s={...e[r],continuousStart:t,continuousEnd:t+i,continuousInterval:[t,t+i],index:r,number:r+1,odd:!(r&1)};this.chromosomes.push(s);const o=s.name.replace(/^chr/i,"");for(const a of["chr"+o,"CHR"+o,"Chr"+o,s.number,""+s.number,o,s.name])this.cumulativeChromPositions.set(a,t),this.chromosomesByName.set(a,s);t+=s.size}this.totalSize=t}getExtent(){return[0,this.totalSize]}toContinuous(e,t){let r=this.cumulativeChromPositions.get(e);if(r===void 0)throw new Error("Unknown chromosome/contig: "+e);return r+ +t}toChromosome(e){if(e>this.totalSize)return;e=Math.floor(e);const t=Dn(this.startByIndex,e)-1;if(t>0&&t<=this.chromosomes.length)return this.chromosomes[t-1]}toChromosomal(e){const t=this.toChromosome(e);if(t)return{chrom:t.name,pos:Math.floor(e)-t.continuousStart}}getChromosome(e){return this.chromosomesByName.get(e)}formatInterval(e){return ZT(...this.toChromosomalInterval(e))}toChromosomalInterval(e){const t=this.toChromosomal(e[0]+.5),r=this.toChromosomal(e[1]-.5);return r.pos+=1,[t,r]}toContinuousInterval(e){var i;let[t,r]=e;return r||(r=t),[this.toContinuous(t.chrom,t.pos??0),this.toContinuous(r.chrom,r.pos??((i=this.chromosomesByName.get(r.chrom))==null?void 0:i.size))]}toDiscreteChromosomeIntervals(e){const t=e[0],r=e[1],i=[];if(t.chrom===r.chrom)i.push({chrom:t.chrom,startPos:t.pos,endPos:r.pos});else{const s=this.chromosomes.findIndex(a=>a.name===t.chrom),o=this.chromosomes.findIndex(a=>a.name===r.chrom);i.push({chrom:t.chrom,startPos:t.pos,endPos:this.chromosomes[s].size});for(let a=s+1;a<o;a++)i.push({chrom:this.chromosomes[a].name,startPos:0,endPos:this.chromosomes[a].size});i.push({chrom:r.chrom,startPos:0,endPos:r.pos})}return i}continuousToDiscreteChromosomeIntervals(e){return this.toDiscreteChromosomeIntervals([this.toChromosomal(e[0]),this.toChromosomal(e[1])])}parseInterval(e){const t=e.match(/^(chr[0-9A-Z]+)(?::([0-9,]+)(?:-(?:(chr[0-9A-Z]+):)?([0-9,]+))?)?$/);if(t){const r=t[1];if(t.slice(2).every(a=>a===void 0)){const a=this.getChromosome(r);return a?[a.continuousStart,a.continuousEnd]:void 0}const i=t[3]||r,s=parseInt(t[2].replace(/,/g,"")),o=t[4]!==void 0?parseInt(t[4].replace(/,/g,"")):s;return[this.toContinuous(r,s-1),this.toContinuous(i,o)]}}}function tB(n){return LA(n).map(([e,t])=>({name:e,size:parseInt(t)}))}function $1(n){return Ge(n)&&"chrom"in n}function nB(n){return n.every($1)}function lh(n){return Ge(n)&&("name"in n||fh(n)||ex(n))}function fh(n){return lh(n)&&"url"in n}function ex(n){return lh(n)&&"contigs"in n}class zo extends Array{constructor(){super(),this.type=void 0}extend(e){return this}extendAll(e){if(e instanceof zo&&e.type!=this.type)throw new Error(`Cannot combine different types of domains: ${this.type} and ${e.type}`);for(const t of e)this.extend(t);return this}extendAllWithAccessor(e,t){for(const r of e)this.extend(t(r));return this}}class hh extends zo{constructor(){super(),this.type="quantitative"}extend(e){return e==null||Number.isNaN(e)?this:(e=+e,this.length?e<this[0]?this[0]=e:e>this[1]&&(this[1]=e):(this.push(e),this.push(e)),this)}}class tx extends zo{constructor(){super(),this.type="ordinal",this.uniqueValues=new Set}extend(e){return e==null||Number.isNaN(e)?this:(this.uniqueValues.has(e)||(this.uniqueValues.add(e),this.push(e)),this)}}class nx extends tx{constructor(){super(),this.type="nominal"}}class rB extends zo{constructor(e){super();let t=0;for(let r=1;r<e.length;r++)t+=Math.sign(e[r]-e[r-1]);if(Math.abs(t)!=e.length-1)throw new Error("Piecewise domain must be strictly increasing or decreasing: "+JSON.stringify(e));e.forEach(r=>this.push(r))}extend(e){if(this.includes(e))return this;throw new Error("Piecewise domains are immutable and cannot be unioned!")}}const rx={quantitative:hh,index:hh,locus:hh,nominal:nx,ordinal:tx};function ix(n,e){if(n=="quantitative"&&iB(e)){const t=new rB(e);return t.type=n,t}else if(rx[n]){const t=new rx[n];return t.type=n,e&&t.extendAll(e),t}throw new Error("Unknown type: "+n)}function iB(n){return n&&n.length>0&&n.length!=2&&n.every(e=>typeof e=="number")}function sB(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}function oB(n,e,t){return n*Math.pow(e/n,t)}le("index",ch,["continuous"]),le("locus",IT,["continuous"]),le("null",th,[]);const sx="quantitative",ox="ordinal",ax="nominal",cx="locus",aB="index";class cB{constructor(e){R(this,q);R(this,is,{domain:new Set,range:new Set});R(this,ct);R(this,Yr);R(this,sa,new Set);this.channel=e,this.members=[],this.type=null,this.name=void 0}get zoomExtent(){return(E(this,ct)&&Oe(E(this,ct).type)&&O(this,q,Fw).call(this))??[-1/0,1/0]}addEventListener(e,t){E(this,is)[e].add(t)}removeEventListener(e,t){E(this,is)[e].delete(t)}addMember(e){var a;const{channel:t,channelDef:r}=e,i=r.type==null&&this.type;if(t!="sample"&&!r.type&&!df(t)&&!i)throw new Error(`The "type" property must be defined in channel definition: "${t}": ${JSON.stringify(r)}. Must be one of: "quantitative", "ordinal", "nominal", "locus", "index"`);const s=t=="sample"?"nominal":r.type,o=(a=r==null?void 0:r.scale)==null?void 0:a.name;if(o){if(this.name!==void 0&&o!=this.name)throw new Error(`Shared scales have conflicting names: "${o}" vs. "${this.name}"!`);this.name=o}if(!i){if(!this.type)this.type=s;else if(s!==this.type&&!df(t))throw new Error(`Can not use shared scale for different data types: ${this.type} vs. ${s}. Use "resolve: independent" for channel ${this.channel}`)}this.members.push(e)}removeMembersByView(e){const t=this.members.length;return this.members=this.members.filter(r=>r.view!==e),this.members.length!==t}getDataDomain(){return this.members.map(e=>{var t;return(t=e.dataDomainSource)==null?void 0:t.call(e,e.channel,this.type)}).filter(e=>!!e).reduce((e,t)=>e.extendAll(t))}reconfigure(){const e=E(this,ct);if(!e||e.type=="null")return;const t=O(this,q,Bw).call(this),r=e.domain(),i=O(this,q,xd).call(this,!0);if(q1({...i,range:void 0},e),e.props=i,O(this,q,yd).call(this),!E(this,Yr)&&Oe(e.type)){const o=e.domain();Ts(o)>0&&G(this,Yr,o)}if(!t){G(this,Yr,e.domain()),O(this,q,Sn).call(this,"domain");return}const s=e.domain();ec(s,r)||(this.isZoomable()?e.domain(r):O(this,q,ti).call(this)?(e.domain(r),this.zoomTo(s,500)):O(this,q,Sn).call(this,"domain"))}get scale(){if(E(this,ct))return E(this,ct);const e=O(this,q,xd).call(this),t=HT({...e,range:void 0});t.props=e,"unknown"in t&&t.unknown(null),G(this,ct,t),O(this,q,yd).call(this),TT(t)&&t.genome(this.getGenome());const r=t.range;if(r){const i=()=>O(this,q,Sn).call(this,"range");t.range=function(s){if(arguments.length)r(s),i();else return r()},i()}return t}getDomain(){return this.scale.domain()}getComplexDomain(){var e;return((e=this.getGenome())==null?void 0:e.toChromosomalInterval(this.getDomain()))??this.getDomain()}isZoomed(){return O(this,q,ti).call(this)&&ec(O(this,q,Mu).call(this),this.getDomain())}isZoomable(){return O(this,q,ti).call(this)&&!!this.scale.props.zoom}zoom(e,t,r){if(!O(this,q,ti).call(this))return!1;const i=this.scale,s=i.domain();let o=[...s],a=i.invert(t);switch(i.props.reverse&&(r=-r),"align"in i&&(a+=i.align()),i.type){case"linear":case"index":case"locus":o=Kw(o,r||0),o=Rd(o,a,e);break;case"log":o=Zw(o,r||0),o=Od(o,a,e);break;case"pow":case"sqrt":{const u=i;o=Jw(o,r||0,u.exponent()),o=zu(o,a,e,u.exponent());break}default:throw new Error("Zooming is not implemented for: "+i.type)}const c=this.zoomExtent;return o=eA(o,c[0],c[1]),[0,1].some(u=>o[u]!=s[u])?(i.domain(o),O(this,q,Sn).call(this,"domain"),!0):!1}async zoomTo(e,t=!1){if(Is(t)&&(t=t?700:0),!O(this,q,ti).call(this))throw new Error("Not a zoomable scale!");const r=this.fromComplexInterval(e),i=E(this,q,md).animator,s=this.scale,o=s.domain();if(t>0&&o.length==2){const a=o[1]-o[0],c=r[1]-r[0],u=o[0]+a/2,l=r[0]+c/2,f=o[0]==r[0],d=o[1]==r[1];await i.transition({duration:t,easingFunction:sB,onUpdate:h=>{const p=oB(a,c,h),m=a==c?h:(a-p)/(a-c),g=m*l+(1-m)*u,x=[f?o[0]:g-p/2,d?o[1]:g+p/2];s.domain(x),O(this,q,Sn).call(this,"domain")}}),s.domain(r),O(this,q,Sn).call(this,"domain")}else s.domain(r),i==null||i.requestRender(),O(this,q,Sn).call(this,"domain")}resetZoom(){if(!O(this,q,ti).call(this))throw new Error("Not a zoomable scale!");const e=this.getDomain(),t=O(this,q,Mu).call(this);return[0,1].some(r=>t[r]!=e[r])?(E(this,ct).domain(t),O(this,q,Sn).call(this,"domain"),!0):!1}getZoomLevel(){return this.isZoomable()?Ts(this.zoomExtent)/Ts(this.scale.domain()):1}getAxisLength(){if(this.channel!=="x"&&this.channel!=="y")throw new Error("Axis length is only defined for x and y channels!");const e=this.members.map(t=>{var r;return(r=t.view.coords)==null?void 0:r[this.channel==="x"?"width":"height"]}).filter(t=>t>0);return e.length?e.reduce((t,r)=>Math.min(t,r),1e4):0}getGenome(){var t;if(this.type!=="locus")return;const e=(t=E(this,q,md).genomeStore)==null?void 0:t.getGenome();if(!e)throw new Error("No genome has been defined!");return e}invertToComplex(e){const t=this.scale;if("invert"in t){const r=t.invert(e);return this.toComplex(r)}else throw new Error("The scale does not support inverting!")}toComplex(e){const t=this.getGenome();return t?t.toChromosomal(e):e}fromComplex(e){return $1(e)?this.getGenome().toContinuous(e.chrom,e.pos):e}fromComplexInterval(e){return this.type==="locus"&&nB(e)?this.getGenome().toContinuousInterval(e):e}}is=new WeakMap,ct=new WeakMap,Yr=new WeakMap,sa=new WeakMap,q=new WeakSet,pd=function(){return this.members[0].view},md=function(){return E(this,q,pd).context},Sn=function(e){for(const t of E(this,is)[e].values())t({type:e,scaleResolution:this})},gd=function(){return!!O(this,q,bd).call(this)},Bw=function(){const e=E(this,ct);if(!e)return!1;const t=e.domain();return Oe(e.type)?t.length>2||t.length==2&&(t[0]!==0||t[1]!==0):t.length>0},kw=function(){const e=this.members.map(t=>t.channelDef.scale).filter(t=>t!==void 0);return nu(e,"scale",["domain"])},xd=function(e=!1){const t=O(this,q,kw).call(this);if(t===null||t.type=="null")return{type:"null"};const r={...O(this,q,Pw).call(this,this.type),...t};r.type||(r.type=uB(this.channel,this.type));const i=O(this,q,Mu).call(this,e);return i&&i.length>0?r.domain=i:jn(r.type)&&(r.domain=new nx),!r.domain&&r.domainMid!==void 0&&(r.domain=[r.domainMin??0,r.domainMax??1]),this.channel=="y"&&jn(r.type)&&r.reverse==null&&(r.reverse=!0),r.range&&r.scheme&&delete r.scheme,!("zoom"in r)&&["index","locus"].includes(r.type)&&(r.zoom=!0),lB(r,this.channel),r},yd=function(){const e=E(this,ct).props,t=e.range;if(E(this,sa).forEach(i=>i.invalidate()),!t||!Ue(t))return;const r=(i,s)=>s?i.slice().reverse():i;if(t.some(We)){let i;const s=()=>{E(this,ct).range(r(i.map(o=>o()),e.reverse))};i=t.map(o=>{if(We(o)){const a=E(this,q,pd).paramMediator.createExpression(o.expr);return a.addListener(s),E(this,sa).add(a),()=>a(null)}else return()=>o}),s()}else E(this,ct).range(r(t,e.reverse))},Mu=function(e=!1){return O(this,q,bd).call(this)??(this.type==cx?this.getGenome().getExtent():e?this.getDataDomain():[])},bd=function(){const e=this.members.map(t=>t.channelDef).filter(t=>{var r;return(r=t.scale)==null?void 0:r.domain}).map(t=>ix(t.type,this.fromComplexInterval(t.scale.domain)));if(e.length>0)return e.reduce((t,r)=>t.extendAll(r))},ti=function(){const e=this.scale.type;return Oe(e)},Fw=function(){const e=this.scale.props,t=e.zoom;return fB(t)&&Ue(t.extent)?this.fromComplexInterval(t.extent):t&&e.type=="locus"?this.getGenome().getExtent():E(this,Yr)},Pw=function(e){const t=this.channel,r={};return O(this,q,gd).call(this)&&(r.zero=!1),Ao(t)?r.nice=!O(this,q,gd).call(this):Ln(t)?r.scheme=e==ax?"tableau10":e==ox?"blues":"viridis":Mc(t)?r.range=t=="shape"?["circle","square","triangle-up","cross","diamond"]:[]:t=="size"?r.range=[0,400]:t=="angle"&&(r.range=[0,360]),r};function uB(n,e){if(e==aB||e==cx){if(hf(n))return e;throw new Error(`${n} does not support ${e} data type. Only positional channels do.`)}const t={x:["band","band","linear"],y:["band","band","linear"],size:[void 0,"point","linear"],opacity:[void 0,"point","linear"],fillOpacity:[void 0,"point","linear"],strokeOpacity:[void 0,"point","linear"],color:["ordinal","ordinal","linear"],fill:["ordinal","ordinal","linear"],stroke:["ordinal","ordinal","linear"],strokeWidth:[void 0,void 0,"linear"],shape:["ordinal","ordinal",void 0],dx:[void 0,void 0,"null"],dy:[void 0,void 0,"null"],angle:[void 0,void 0,"linear"],sample:["null",void 0,void 0]},i=["sample"].includes(n)?"null":t[n]?t[n][[ax,ox,sx].indexOf(e)]:e==sx?"linear":"ordinal";if(i===void 0)throw new Error(`Channel "${n}" is not compatible with "${e}" data type. Use of a proper scale may be needed.`);return i}function lB(n,e){Ao(e)&&n.type!=="ordinal"&&(n.range=[0,1]),e=="opacity"&&Oe(n.type)&&(n.clamp=!0)}function fB(n){return Ge(n)}function ux(n){const e=new Set;function t(r){for(const i of Object.values(r.resolutions.scale))e.add(i)}for(const r of He(n)){r.visit(t);for(const i of r.getDataAncestors()){if(!i.options.contributesToScaleDomain)break;t(i)}}e.forEach(r=>r.reconfigure())}function dh(...n){for(const e of n)if(e!==void 0)return e}class hB{constructor(e){this.channel=e,this.members=[]}get scaleResolution(){var e;return(e=to(this.members))==null?void 0:e.view.getScaleResolution(this.channel)}addMember(e){const{view:t}=e,r=t.getScaleResolution(this.channel);if(!r)throw new Error("Cannot find a scale resolution!");if(this.scaleResolution&&r!==this.scaleResolution)throw new Error(`Shared axes must have a shared scale! Channel: ${this.channel}, existing views: [${this.members.map(i=>i.view.getPathString()).join(", ")}], new view: ${t.getPathString()}.`);this.members.push(e),oh(this,"axisProps")}removeMembersByView(e){const t=this.members.length;return this.members=this.members.filter(r=>r.view!==e),this.members.length!==t?(oh(this,"axisProps"),!0):!1}getAxisProps(){return $c(this,"axisProps",()=>{const e=this.members.map(t=>{const r=t.view.mark.encoding[t.channel];return"axis"in r&&r.axis});return e.length>0&&e.some(t=>t===null)?null:nu(e.filter(t=>t!==void 0),"axis",["title"])})}getTitle(){const e=s=>{var a;const o=I8(s.view,s.channel);if(!xt(o))return{member:s,explicitTitle:dh("axis"in o?(a=o.axis)==null?void 0:a.title:void 0,o.title),implicitTitle:dh(Nn(o)?o.field:void 0,wo(o)?o.expr:void 0)}},t=this.members.map(e),r=t.filter(s=>{var o;if(df(s.member.channel)&&!s.explicitTitle){const a=Ir(s.member.channel);return((o=t.find(c=>c.member.view==s.member.view&&c.member.channel==a))==null?void 0:o.explicitTitle)===void 0}return!0}),i=new Set(r.map(s=>dh(s.explicitTitle,s.implicitTitle)).filter(me));return i.size?[...i].join(", "):null}}function lx(n,e,{spacing:t,devicePixelRatio:r,offset:i,reverse:s}={}){t=t||0,i=i||0;let o=0,a=0;for(const p of n)o+=ru(p.px)+(ph(p)?0:t),a+=ru(p.grow);o-=t;const c=Math.max(0,e-o),u=r!==void 0?p=>Math.round(p*r)/r:p=>p,l=[],f=[],d=p=>{const m=l.length;if(!m)return;const g=(p?t:0)*(s?-1:1);h-=g;for(let x=0;x<m;x++)f.push({location:h+(x+1)/(m+1)*g,size:0});h+=g,l.length=0};let h=s?Math.max(e,o):0+i;if(n.length==1&&ph(n[0]))return[{location:h,size:0}];for(let p=0;p<n.length;p++){const m=n[p];if(ph(m))l.push(m);else{d(f.length>0);const g=ru(m.px)+(a?ru(m.grow)/a*c:0);s&&(h-=g),f.push({location:u(h),size:u(g)}),s?h-=t:h+=g+t}}return h+=s?t:-t,d(!1),f}function dB(n){let e=0,t=0;for(const r of n)e=Math.max(e,r.px??0),t=Math.max(t,r.grow??0);return{px:e,grow:t}}const ad=class ad{constructor(e,t){R(this,oa);this.width=e,this.height=t}addPadding(e){return O(this,oa,wd).call(this,e.width,e.height)}subtractPadding(e){return O(this,oa,wd).call(this,-e.width,-e.height)}isGrowing(){return!!(this.width.grow||this.height.grow)}};oa=new WeakSet,wd=function(e,t){return new ad({px:(this.width.px??0)+e,grow:this.width.grow},{px:(this.height.px??0)+t,grow:this.height.grow})};let Qn=ad;const Uo=Object.freeze({px:0,grow:0}),fx=new Qn(Uo,Uo);function ph(n){return!n.px&&!n.grow}function ru(n){return n||0}function pB(n){return n&&(Ke(n.px)||Ke(n.grow))}function hx(n){if(gx(n))throw new Error("parseSizeDef does not accept step-based sizes.");if(pB(n))return n;if(Ke(n))return{px:n,grow:0};if(n==="container")return{px:0,grow:1};if(!n)return{px:0,grow:1};throw new Error(`Invalid sizeDef: ${n}`)}class Qe{constructor(e,t,r,i){this.top=e||0,this.right=t||0,this.bottom=r||0,this.left=i||0}get width(){return this.left+this.right}get height(){return this.top+this.bottom}expand(e){return e<=0?this:new Qe(this.top+e,this.right+e,this.bottom+e,this.left+e)}add(e){return new Qe(this.top+e.top,this.right+e.right,this.bottom+e.bottom,this.left+e.left)}subtract(e){return new Qe(this.top-e.top,this.right-e.right,this.bottom-e.bottom,this.left-e.left)}union(e){return new Qe(Math.max(this.top,e.top),Math.max(this.right,e.right),Math.max(this.bottom,e.bottom),Math.max(this.left,e.left))}getHorizontal(){return new Qe(0,this.right,0,this.left)}getVertical(){return new Qe(this.top,0,this.bottom,0)}get horizontalTotal(){return this.left+this.right}get verticalTotal(){return this.top+this.bottom}static createFromConfig(e){return typeof e=="number"?this.createUniformPadding(e):e?this.createFromRecord(e):mh}static createFromRecord(e){return new Qe(e.top,e.right,e.bottom,e.left)}static zero(){return mh}static createUniformPadding(e){return new Qe(e,e,e,e)}}const mh=Qe.createUniformPadding(0);Object.freeze(mh);function Go(n,e){return!e||/^(data:|([A-Za-z]+:)?\/\/)/.test(n)||n.startsWith("/")?n:(e.endsWith("/")||(e+="/"),e+n)}function mB(n){if(!n)return n;if(/[?#]/.test(n))throw new Error(`Invalid base URL: ${n} - cannot contain query or hash.`);return n.endsWith("/")?n:n+"/"}const dx="VISIT_SKIP",Ho="VISIT_STOP",px=n=>n;class mx{constructor(e,t,r,i,s,o={}){R(this,Kt);R(this,ss,{});R(this,os,{});R(this,as,{});R(this,aa);R(this,ca);Y(this,"opacityFunction",px);R(this,cs,[]);Y(this,"facetCoords",new tn([],JSON.stringify));var a;if(!e)throw new Error("View spec must be defined!");if(this.context=t,this.layoutParent=r,this.dataParent=i,this.name=e.name||s,this.spec=e,this.resolutions={scale:{},axis:{}},O1(this),this.options={blockEncodingInheritance:!1,contributesToScaleDomain:!0,...o},this.flowHandle=void 0,this.needsAxes={x:!1,y:!1},this.paramMediator=new y8(()=>{var c;return(c=this.dataParent)==null?void 0:c.paramMediator}),e.params)for(const c of e.params)this.paramMediator.registerParam(c);if(!((a=this.layoutParent)!=null&&a.options.layeredChildren)){const c=u=>this.paramMediator.findMediatorForParam(u)?void 0:this.paramMediator.allocateSetter(u,0);G(this,ca,c("height")),G(this,aa,c("width"))}}get coords(){return this.facetCoords.values().next().value}getPadding(){return this._cache("size/padding",()=>Qe.createFromConfig(this.spec.padding))}getOverhang(){return Qe.zero()}isScrollable(){return this.spec.viewportWidth!=null||this.spec.viewportHeight!=null}getSize(){return this._cache("size/size",()=>this.isConfiguredVisible()?new Qn(O(this,Kt,Ba).call(this,"width"),O(this,Kt,Ba).call(this,"height")):fx)}getViewportSize(){if(!this.isScrollable())return this.getSize();if(!this.isConfiguredVisible())return fx;const e=this.getSize();return new Qn(O(this,Kt,Ba).call(this,"viewportWidth")??e.width,O(this,Kt,Ba).call(this,"viewportHeight")??e.height)}isConfiguredVisible(){return this.context.isViewConfiguredVisible(this)}isVisibleInSpec(){return this.spec.visible??!0}isVisible(){return this.getLayoutAncestors().every(e=>e.isConfiguredVisible())}getEffectiveOpacity(){var e;return this.opacityFunction(((e=this.layoutParent)==null?void 0:e.getEffectiveOpacity())??1)}getPathString(){return this.getLayoutAncestors().map(e=>e.name).reverse().join("/")}getLayoutAncestors(){return O(this,Kt,Ad).call(this,"layoutParent")}getDataAncestors(){return O(this,Kt,Ad).call(this,"dataParent")}handleBroadcast(e){for(const t of E(this,ss)[e.type]||[])t(e)}_addBroadcastHandler(e,t){let r=E(this,ss)[e];r||(r=[],E(this,ss)[e]=r),r.push(t)}handleInteractionEvent(e,t,r){const i=r?E(this,os):E(this,as);for(const s of i[t.type]||[])s(e,t)}addInteractionEventListener(e,t,r){const i=r?E(this,os):E(this,as);let s=i[e];s||(s=[],i[e]=s),s.push(t)}removeInteractionEventListener(e,t,r){const i=r?E(this,os):E(this,as);let s=i==null?void 0:i[e];if(s){const o=s.indexOf(t);o>=0&&s.splice(o,1)}}visit(e){try{const t=e(this);if(e.postOrder&&e.postOrder(this),t!==Ho)return t}catch(t){throw t.view=this,t}}getDescendants(){const e=[];return this.visit(t=>{e.push(t)}),e}dispose(){for(const t of E(this,cs))t();E(this,cs).length=0;const e=this.flowHandle;e!=null&&e.collector&&(this.context.dataFlow.pruneCollectorBranch(e.collector),this.context.dataFlow.removeCollector(e.collector)),e!=null&&e.dataSource&&e.dataSource.view===this&&!e.dataSource.identifier&&this.context.dataFlow.removeDataSource(e.dataSource),this.flowHandle=void 0}registerDisposer(e){E(this,cs).push(e)}disposeSubtree(){const e=()=>{};e.postOrder=t=>{t.dispose()},this.visit(e)}configureViewOpacity(){(!this.opacityFunction||this.opacityFunction===px)&&(this.opacityFunction=xB(this))}onBeforeRender(){}render(e,t,r={}){var i,s;r.firstFacet&&this.facetCoords.clear(),this.facetCoords.set(r.facetId,r.clipRect?t.intersect(r.clipRect):t),(i=E(this,aa))==null||i.call(this,t.width),(s=E(this,ca))==null||s.call(this,t.height)}getEncoding(){const e=this.dataParent&&!this.options.blockEncodingInheritance?this.dataParent.getEncoding():{},t=this.spec.encoding||{},r={...e,...t};for(const[i,s]of Object.entries(r))s===null&&delete r[i];return r}getFacetAccessor(e){if(this.layoutParent)return this.layoutParent.getFacetAccessor(this)}getFacetFields(e){var r;const t=this.getEncoding().sample;return Nn(t)?[t.field]:(r=this.layoutParent)==null?void 0:r.getFacetFields(this)}getSampleFacetTexture(){}getScaleResolution(e){const t=Ir(e);return this.getDataAncestors().map(r=>r.resolutions.scale[t]).find(r=>r)}getAxisResolution(e){const t=Ir(e);return this.getDataAncestors().map(r=>r.resolutions.axis[t]).find(r=>r)}getConfiguredResolution(e,t){var r,i;return(i=(r=this.spec.resolve)==null?void 0:r[t])==null?void 0:i[e]}getConfiguredOrDefaultResolution(e,t){return this.getConfiguredResolution(e,t)??this.getConfiguredResolution("default",t)??this.getDefaultResolution(e,t)}getDefaultResolution(e,t){return"independent"}getBaseUrl(){return Or(()=>{var e;return(e=this.dataParent)==null?void 0:e.getBaseUrl()},mB(this.spec.baseUrl))}isPickingSupported(){return!0}getTitleText(){const e=this.spec.title;if(e)return me(e)?e:We(e.text)?this.paramMediator.evaluateAndGet(e.text.expr):e.text}_cache(e,t){return $c(this,e,t)}_invalidateCacheByPrefix(e,t="self"){switch(t){case"self":eu(this,e);break;case"ancestors":for(const r of this.getLayoutAncestors())eu(r,e);break;case"progeny":this.visit(r=>eu(r,e));break}}invalidateSizeCache(){this._invalidateCacheByPrefix("size/","ancestors")}propagateInteractionEvent(e){}}ss=new WeakMap,os=new WeakMap,as=new WeakMap,aa=new WeakMap,ca=new WeakMap,cs=new WeakMap,Kt=new WeakSet,Ba=function(e){var i;let t=this.spec[e];const r=e=="viewportWidth"||e=="viewportHeight";if(gx(t)){if(r)throw new Wn(`Cannot use step-based size with "${e}"!`,this);const s=t.step,o=(i=this.getScaleResolution(e=="width"?"x":"y"))==null?void 0:i.scale;if(o){let a=0;if(jn(o.type))a=o.domain().length;else if(["locus","index"].includes(o.type)){const u=o.domain();a=to(u)-u[0]}else throw new Wn(`Cannot use step-based size with "${o.type}" scale!`,this);const c=o;return a=Yf(a,c.paddingInner(),c.paddingOuter()),{px:a*s,grow:0}}else throw new Wn("Cannot use 'step' size with missing scale!",this)}else return(t&&hx(t))??(r?void 0:{px:0,grow:1})},Ad=function(e){const t=[];let r=this;do t.push(r),r=r[e];while(r);return t};function gB(n){return"unitsPerPixel"in n}function xB(n){const e="opacity"in n.spec?n.spec.opacity:void 0;if(e!==void 0){if(Ke(e))return t=>t*e;if(gB(e)){const t=s=>{var a;const o=(a=n.getScaleResolution(s))==null?void 0:a.scale;if(["linear","index","locus"].includes(o==null?void 0:o.type))return o},r=e.channel?t(e.channel):t("x")??t("y");if(!r)throw new Wn("Cannot find a resolved quantitative scale for dynamic opacity!",n);const i=Uf().domain(e.unitsPerPixel).range(e.values).clamp(!0);return s=>{const a=Ts(r.domain())/1e3;return i(a)*s}}else if(We(e)){const t=n.paramMediator.createExpression(e.expr);return t.addListener(()=>n.context.animator.requestRender()),r=>t(null)*r}}return t=>t}const gx=n=>!!(n!=null&&n.step),yB={point:uT,rect:rT,rule:dT,link:wT,text:DT};class ft extends mx{constructor(t,r,i,s,o,a){super(t,r,i,s,o,a);R(this,us);R(this,ua);this.spec=t;const c=yB[this.getMarkType()];if(c)this.mark=new c(this);else throw new Error(`No such mark: ${this.getMarkType()}`);this.resolve(),G(this,ua,this.paramMediator.allocateSetter("zoomLevel",1));for(const u of["x","y"]){const l=this.getScaleResolution(u);if(l){const f=()=>{E(this,ua).call(this,Math.sqrt(this.getZoomLevel()))};l.addEventListener("domain",f),this.registerDisposer(()=>l.removeEventListener("domain",f))}}this.needsAxes={x:!0,y:!0},O(this,us,Mw).call(this)}render(t,r,i={}){super.render(t,r,i),this.isConfiguredVisible()&&(t.pushView(this,r),t.renderMark(this.mark,i),t.popView(this))}getMarkType(){return typeof this.spec.mark=="object"?this.spec.mark.type:this.spec.mark}getEncoding(){const t=super.getEncoding(),r=this.mark.getSupportedChannels();for(const i of Object.keys(t))r.includes(i)||delete t[i];return t}resolve(t){if(!t){this.resolve("scale"),this.resolve("axis");return}const r=this.mark.encoding;for(const[i,s]of Object.entries(r)){if(!s)continue;let o;if(lt(s))o=s;else if(ff(s)){const u=s.condition;if(!Array.isArray(u)&&lt(u))o=u;else continue}else continue;const a=Ir(o.resolutionChannel??i);if(!Rc(a)||t=="axis"&&!Ao(a))continue;let c=this;for(;(c.getConfiguredOrDefaultResolution(a,t)=="forced"||c.dataParent&&["shared","excluded","forced"].includes(c.dataParent.getConfiguredOrDefaultResolution(a,t)))&&c.getConfiguredOrDefaultResolution(a,t)!="excluded";)c=c.dataParent;if(t=="axis"&&Ao(i)&&hf(a))c.resolutions[t][a]||(c.resolutions[t][a]=new hB(a)),c.resolutions[t][a].addMember({view:this,channel:i,channelDef:o});else if(t=="scale"&&Rc(i)){if(!c.resolutions[t][a]){const l=new cB(a);c.resolutions[t][a]=l,l.addEventListener("range",f=>{var d;(d=this.context.glHelper)==null||d.createRangeTexture(f.scaleResolution,!0)})}const u=this.getLayoutAncestors().some(l=>!l.options.contributesToScaleDomain)||lt(o)&&o.contributesToScaleDomain===!1?void 0:this.extractDataDomain.bind(this);c.resolutions[t][a].addMember({view:this,channel:i,channelDef:o,dataDomainSource:u})}}}dispose(){super.dispose(),O(this,us,Rw).call(this),this.mark.dispose()}getDataAccessor(t){var i;const r=this.mark.encoders;if(r)return(i=r[t])==null?void 0:i.dataAccessor}getFacetAccessor(t){const r=this.getDataAccessor("sample");return r||super.getFacetAccessor(this)}getCollector(){var t;return(t=this.flowHandle)==null?void 0:t.collector}extractDataDomain(t,r){var s;let i=ix(r);return(((s=this.mark.encoders[t])==null?void 0:s.accessors)??[]).filter(o=>o.scaleChannel).forEach(o=>{if(o.constant)i.extend(o({}));else{const a=this.getCollector();a!=null&&a.completed&&a.visitData(c=>i.extend(o(c)))}}),i}getZoomLevel(){const t=r=>{var i;return((i=this.getScaleResolution(r))==null?void 0:i.getZoomLevel())??1};return Dr.map(t).reduce((r,i)=>r*i,1)}propagateInteractionEvent(t){this.handleInteractionEvent(void 0,t,!0),t.target=this,!t.stopped&&this.handleInteractionEvent(void 0,t,!1)}getDefaultResolution(t,r){return t=="x"?"shared":"independent"}}ua=new WeakMap,us=new WeakSet,Mw=function(){for(const[t,r]of this.paramMediator.paramConfigs){if(!("select"in r))continue;const i=Fc(r.select),s=i.on,o=i.clear;if(Pc(i)){let c=0;const u=this.paramMediator.getSetter(t),l=()=>{var p;const h=this.context.getCurrentHover();return((p=h==null?void 0:h.mark)==null?void 0:p.unitView)===this?h.datum:null},f=s.filter?Um(s.filter):()=>!0,d=(h,p)=>{if(!f(p.proxiedMouseEvent))return;const m=l(),g=m?m[pt]:0;let x;if(i.toggle)if(p.mouseEvent.shiftKey){if(m){const w=this.paramMediator.getValue(t);x=w8(w,{toggle:[m]})}}else x=uf(m?[m]:null);else g!=c&&(c=g,x=cf(m));x!==void 0&&u(x)};if(this.addInteractionEventListener(["mouseover","pointerover"].includes(s.type)?"mousemove":s.type,d),o){const h=o.filter?Um(o.filter):()=>!0,p=(m,g)=>{if(!h(g.proxiedMouseEvent))return;c=0;const x=i.toggle?uf():cf(null);u(x)};this.addInteractionEventListener(o.type,p)}}}},Rw=function(){for(const t of this.getDataAncestors()){for(const[r,i]of Object.entries(t.resolutions.scale))i&&i.removeMembersByView(this)&&i.members.length===0&&delete t.resolutions.scale[r];for(const[r,i]of Object.entries(t.resolutions.axis))i&&i.removeMembersByView(this)&&i.members.length===0&&delete t.resolutions.axis[r]}};function bB(n){const e=new Set;n.visit(t=>{for(const r of Object.values(t.resolutions.scale)){const i=r.name;if(i&&e.has(i))throw new Error(`The same scale name "${i}" occurs in multiple scale resolutions!`);e.add(i)}})}function wB(n){for(const e of Dr){const t=n.getScaleResolution(e);t&&!t.name&&t.isZoomable()&&(t.name=`${e}_at_root`)}}function AB(n,e=()=>!0){return Promise.allSettled(n).then(t=>{if(e())for(const r of t)"value"in r?r.value.finalizeGraphicsInitialization():"reason"in r&&console.error(r.reason)})}async function vB(n,e,t){const r=n.import;if(!("url"in r))throw new Error("Not an url import: "+JSON.stringify(r));const i=Or(e,r.url);let s;try{const o=await fetch(i);if(!o.ok)throw new Error(`${o.status} ${o.statusText}`);s=await o.json()}catch(o){throw new Error(`Could not load imported view spec: ${i}. Reason: ${o.message}`)}if(t.isViewSpec(s))return s.baseUrl=Or(J1(r.url),s.baseUrl),s;throw new Error(`The imported spec "${i}" is not a view spec: ${JSON.stringify(n)}`)}function SB(n){const e=n.getSize(),t=n.getPadding(),r=(i,s)=>i.grow>0?void 0:i.px+s;return{width:r(e.width,t.horizontalTotal),height:r(e.height,t.verticalTotal)}}function*gh(n,e=[]){for(const[t,r]of n.entries())if(r instanceof Map)for(const i of gh(r,[...e,t]))yield i;else yield[[...e,t],r]}const xx=2147483647,EB=yx([xx]);function yx(n){let e=0;for(let t=0,r=n.length;t<r;t++)e=Math.max(e,n[t]);return Math.floor(Math.log2(e)/4)+1}function CB(n){const e=yx(n);let t=Array.from({length:n.length},(s,o)=>o),r=new Array(n.length);const i=new Array(16);for(let s=0;s<e;s++){i.fill(0);const o=s*4,a=Math.pow(16,s),c=u=>{const l=n[t[u]];return s>=EB?l>xx?Math.floor(l/a)%16:0:l>>o&15};for(let u=0;u<n.length;u++)i[c(u)]++;for(let u=1;u<16;u++)i[u]+=i[u-1];for(let u=n.length-1;u>=0;u--)r[--i[c(u)]]=t[u];[t,r]=[r,t]}return t}class bx extends Zl{constructor(t){var r;super();R(this,ht);R(this,gn,[]);R(this,la,ue(pt));R(this,$n,[]);R(this,Xr);R(this,ls);this.params=t??{type:"collect"},this.observers=new Set,this.facetBatches=new tn([],JSON.stringify),G(this,ls,IB((r=this.params)==null?void 0:r.sort)),O(this,ht,vd).call(this)}get behavior(){return Kl}get label(){return"collect"}reset(){super.reset(),O(this,ht,vd).call(this)}handle(t){E(this,gn).push(t)}beginBatch(t){X3(t)&&(G(this,gn,[]),this.facetBatches.set(He(t.facetId),E(this,gn)))}complete(){var t;if(G(this,gn,[]),(t=this.params.groupby)!=null&&t.length){if(this.facetBatches.size>1)throw new Error("TODO: Support faceted data!");const r=this.facetBatches.get(void 0),i=this.params.groupby.map(o=>ue(o)),s=i.length>1?Ua(r,...i):DB(r,i[0]);this.facetBatches.clear();for(const[o,a]of gh(s))this.facetBatches.set(o,a)}if(E(this,ls))for(const r of this.facetBatches.values())r.sort(E(this,ls));O(this,ht,Ow).call(this),O(this,ht,Sd).call(this),super.complete();for(const r of this.observers)r(this)}observe(t){return this.observers.add(t),()=>{this.observers.delete(t)}}repropagate(){for(const t of this.children)t.reset();O(this,ht,Sd).call(this);for(const t of this.children)t.complete()}getData(){switch(O(this,ht,Ed).call(this),this.facetBatches.size){case 0:return[];case 1:return[...this.facetBatches.values()][0];default:{const t=this.facetBatches;return{[Symbol.iterator]:function*(){for(const i of t.values())yield*i}}}}}visitData(t){O(this,ht,Ed).call(this);for(const r of this.facetBatches.values())for(let i=0;i<r.length;i++)t(r[i])}getItemCount(){let t=0;for(const r of this.facetBatches.values())t+=r.length;return t}findDatumByUniqueId(t){if(!E(this,$n).length)return;const r=dr(c=>c.start).right,i=E(this,la),s=dr(c=>i(o(c))).left,o=c=>{const u=r(E(this,Xr),c),l=E(this,Xr)[u-1];return!l||c>=l.stop?void 0:this.facetBatches.get(l.facetId)[c-l.start]},a=s(E(this,$n),t);if(a>=0){const c=o(E(this,$n)[a]);if(c&&i(c)===t)return c}}}gn=new WeakMap,la=new WeakMap,$n=new WeakMap,Xr=new WeakMap,ls=new WeakMap,ht=new WeakSet,vd=function(){G(this,gn,[]),G(this,$n,[]),this.facetBatches.clear(),this.facetBatches.set(void 0,E(this,gn))},Sd=function(){if(this.children.length)for(const[t,r]of this.facetBatches.entries()){if(t){const i={type:"facet",facetId:t};for(const s of this.children)s.beginBatch(i)}for(let i=0,s=r.length;i<s;i++)this._propagate(r[i])}},Ed=function(){if(!this.completed)throw new Error("Data propagation is not completed! No data are available.")},Ow=function(){var o;G(this,Xr,[]);const t=(o=this.facetBatches.values().next().value)==null?void 0:o[0];if(t==null||!(pt in t))return;let r=0;const i=[],s=E(this,la);for(const[a,c]of this.facetBatches){E(this,Xr).push({start:r,stop:r+c.length,facetId:a}),r+=c.length;for(let u=0,l=c.length;u<l;u++)i.push(s(c[u]))}G(this,$n,CB(i))};function DB(n,e){const t=new Map;for(let r=0,i=n.length;r<i;r++){const s=n[r],o=e(s);let a=t.get(o);a||(a=[],t.set(o,a)),a.push(s)}return t}function IB(n){if(n!=null&&n.field){const e=He(n.field);if(e.length==1&&!e[0].includes(".")){const t=He(n.order)[0]??"ascending",r=JSON.stringify(e[0]);return new Function("a","b",`return a[${r}] ${t==="ascending"?"-":"+"} b[${r}];`)}return Ld(n.field,n.order)}}class iu{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(e,t){let r=this.length++;for(;r>0;){const i=r-1>>1,s=this.values[i];if(t>=s)break;this.ids[r]=this.ids[i],this.values[r]=s,r=i}this.ids[r]=e,this.values[r]=t}pop(){if(this.length===0)return;const e=this.ids[0];if(this.length--,this.length>0){const t=this.ids[0]=this.ids[this.length],r=this.values[0]=this.values[this.length],i=this.length>>1;let s=0;for(;s<i;){let o=(s<<1)+1;const a=o+1;let c=this.ids[o],u=this.values[o];const l=this.values[a];if(a<this.length&&l<u&&(o=a,c=this.ids[a],u=l),u>=r)break;this.ids[s]=c,this.values[s]=u,s=o}this.ids[s]=t,this.values[s]=r}return e}peek(){if(this.length!==0)return this.ids[0]}peekValue(){if(this.length!==0)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}class TB extends Te{get behavior(){return Ht}constructor(e){super(e),this.params=e,this.startAccessor=ue(e.start),this.endAccessor=ue(e.end),this.chromAccessor=e.chrom?ue(e.chrom):t=>{},this.weightAccessor=e.weight?ue(e.weight):t=>1,this.as={coverage:e.as??"coverage",start:e.asStart??e.start,end:e.asEnd??e.end,chrom:e.asChrom??e.chrom},this.createSegment=new Function("start","end","coverage","chrom","return {"+Object.entries(this.as).filter(([t,r])=>r).map(([t,r])=>`${JSON.stringify(r)}: ${t}`).join(", ")+"};"),this.ends=new iu}reset(){super.reset(),this.initialize()}initialize(){const e=this.as.coverage,t=this.as.end,r=this.as.chrom,i=this.startAccessor,s=this.endAccessor,o=this.chromAccessor,a=this.weightAccessor;let c,u,l,f=0,d=NaN;const h=this.ends;h.clear();const p=x=>{this._propagate(x),c=null},m=(x,b,w)=>{if(x==b)return;let A=!1;c&&(c[e]===w?(c[t]=b,A=!0):c[e]!=0&&p(c)),A||(c=this.createSegment(x,b,w,l))},g=()=>{let x=0;for(;(x=h.peekValue())!==void 0;)m(d,x,f),d=x,f-=h.pop();d=NaN,c&&p(c)};this.handle=x=>{const b=i(x);let w=0;for(;(w=h.peekValue())!==void 0&&w<b;)m(d,w,f),d=w,f-=h.pop();if(r){let S=o(x);S!==u&&(g(),l=S,u=l)}isNaN(d)||m(d,b,f),d=b;const A=a(x);f+=A,h.push(A,s(x))},this.complete=()=>{g(),super.complete()},this.beginBatch=x=>{g(),u=null,super.beginBatch(x)}}}function BB(n,e,t=s=>+s,r=0,i=n.length){const s=new iu,o=i-r;let a;for(a=0;a<e&&a<o;a++)s.push(a,t(n[r+a]));for(;a<o;a++){const l=t(n[r+a]);l>=s.peekValue()&&(s.push(a,l),s.pop())}const c=[];let u;for(;(u=s.pop())!==void 0;)c.push(n[r+u]);return c.reverse()}class kB{constructor(e,t=-1/0,r=1/0){this.maxSize=e,this.lowerLimit=t,this.upperLimit=r;const i=this.maxSize*2+1;this.lowerLimits=new Float64Array(i),this.upperLimits=new Float64Array(i),this.lowerChildren=new Int32Array(i),this.upperChildren=new Int32Array(i),this.reset()}reset(){this.lowerLimits.fill(0),this.upperLimits.fill(0),this.lowerChildren.fill(0),this.upperChildren.fill(0),this.n=1,this.lowerLimits[0]=this.lowerLimit,this.upperLimits[0]=this.upperLimit}_findSlot(e,t,r=0){if(e>=this.lowerLimits[r]&&t<=this.upperLimits[r]){const i=this.lowerChildren[r];if(i){const s=this._findSlot(e,t,i);return s>=0?s:this._findSlot(e,t,this.upperChildren[r])}else return r}else return-1}reserve(e,t){if(t-e<=0)throw new Error("Cannot reserve an empty or negative-size slot!");if(this.n+1>this.lowerLimits.length)return!1;const r=this._findSlot(e,t);if(r<0)return!1;const i=this.n++,s=this.n++;return this.lowerLimits[i]=this.lowerLimits[r],this.upperLimits[i]=e,this.lowerLimits[s]=t,this.upperLimits[s]=this.upperLimits[r],this.lowerChildren[r]=i,this.upperChildren[r]=s,!0}}class FB extends Te{get behavior(){return Kl}constructor(e,t){if(super(e),this.params=e,this._data=[],this.channel=e.channel??"x",!["x","y"].includes(this.channel))throw new Error("Invalid channel: "+this.channel);this.startPosAccessor=ue(this.params.pos),this.endPosAccessor=ue(this.params.pos2??this.params.pos),this.startPosBisector=dr(this.startPosAccessor),this.endPosBisector=dr(this.endPosAccessor),this.scoreAccessor=ue(this.params.score),this.widthAccessor=ue(this.params.width),this.laneAccessor=this.params.lane?ue(this.params.lane):i=>0,this.padding=this.params.padding??0,this.reservationMaps=new Map,this.resolution=t.getScaleResolution(this.channel);const r=()=>this._filterAndPropagate();this.schedule=()=>t.context.animator.requestTransition(r),this.resolution.addEventListener("domain",i=>this.schedule()),t._addBroadcastHandler("layoutComputed",()=>this.schedule())}complete(){const e=this.startPosAccessor;this._data.sort((t,r)=>e(t)-e(r));for(const t of new Set(this._data.map(this.laneAccessor)))this.reservationMaps.set(t,new kB(200));this.schedule(),super.complete()}_filterAndPropagate(){super.reset();const e=this.resolution.scale,t=this.resolution.getAxisLength();if(!t)return;for(const o of this.reservationMaps.values())o.reset();const r=e.domain(),s=BB(this._data,70,this.scoreAccessor,this.endPosBisector.left(this._data,r[0]),this.startPosBisector.right(this._data,r[1]));for(const o of s){let a=e(this.startPosAccessor(o))*t,c=e(this.endPosAccessor(o))*t;const u=c-a,l=this.widthAccessor(o)+this.padding*2;let f=(a+c)/2;const d=Math.max(0,(u-l)/2);if(d>0){const h=Math.max(0,l/2-f);f+=Math.min(h,d);const p=Math.max(0,l/2+f-t);f-=Math.min(p,d)}if(this.reservationMaps.get(this.laneAccessor(o)).reserve(f-l/2,f+l/2))if(this.params.asMidpoint){const h=Object.assign({},o);h[this.params.asMidpoint]=e.invert(f/t),this._propagate(h)}else this._propagate(o)}super.complete()}reset(){super.reset(),this._data=[],this.groups=new Map}handle(e){this._data.push(e)}}class PB extends Te{constructor(e,t){super(e,t),this.params=e,this.predicate=void 0}initialize(){let e="";if(MB(this.params))e=this.params.expr;else if(RB(this.params)){const t=this.paramMediator.findValue(this.params.param);if(!t)throw new Error(`Cannot initialize filter transform. Selection parameter "${this.params.param}" not found!`);e=A8(this.params,t)}else throw new Error("Invalid filter params: "+JSON.stringify(this.params));this.predicate=this.paramMediator.createExpression(e),this.predicate.addListener(()=>this.repropagate())}handle(e){this.predicate(e)&&this._propagate(e)}}function MB(n){return"expr"in n}function RB(n){return"param"in n}class OB extends Te{get behavior(){return Ht}constructor(e){super(e),this.params=e;const t=e.index;if(e.fields){const r=He(e.fields).map(s=>ue(s)),i=He(e.as||e.fields);if(r.length!==i.length)throw new Error(`Lengths of "fields" (${r.length}), and "as" (${i.length}) do not match!`);this.handle=s=>{const o=r.map((c,u)=>c(s)??[]),a=o[0].length;for(let c=0;c<a;c++){const u=Object.assign({},s);for(let l=0;l<r.length;l++)u[i[l]]=c<o[l].length?o[l][c]:null;t&&(u[t]=c),this._propagate(u)}}}else this.handle=r=>{for(let i=0;i<r.length;i++){const s=Object.assign({},r[i]);t&&(s[t]=i),this._propagate(s)}}}}const NB=48;function*LB(n,e=","){const t=e.charCodeAt(0);let r=0;for(let i=0;i<n.length;i++){const s=n.charCodeAt(i);s==t?(yield r,r=0):r=r*10+s-NB}yield r}class zB extends Te{get behavior(){return Ht}constructor(e){super(e);const t=ue(e.exons??"exons"),r=ue(e.start??"start"),[i,s]=e.as||["exonStart","exonEnd"];this.handle=o=>{let a=r(o),c=a,u=!0;const l=t(o);for(const f of LB(l)){if(u)c=a+f;else{a=c+f;const d=Object.assign({},o);d[i]=c,d[s]=a,this._propagate(d)}u=!u}}}}class UB extends Te{get behavior(){return Ht}constructor(e){super(e);const t=He(e.field).map(s=>ue(s)),r=He(e.separator),i=He(e.as||e.field);if(t.length!==r.length||t.length!==i.length)throw new Error(`Lengths of "separator" (${r.length}), "fields" (${t.length}), and "as" (${i.length}) do not match!`);this.handle=s=>{if(t.some(c=>!c(s)))return;const o=t.map((c,u)=>c(s).split(r[u]));GB(o,s);const a=o[0].length;for(let c=0;c<a;c++){const u=Object.assign({},s);for(let l=0;l<t.length;l++)u[i[l]]=o[l][c];this._propagate(u)}}}}function GB(n,e){const t=n.map(r=>r.length);if(!t.every(r=>r==t[0]))throw new Error("Mismatching number of elements in the fields to be split: "+JSON.stringify(e))}class HB extends Te{get behavior(){return Rn}constructor(e,t){super(e,t),this.params=e,this.as=e.as,this.fn=void 0}initialize(){this.fn=this.paramMediator.createExpression(this.params.expr),this.fn.addListener(()=>this.repropagate())}handle(e){e[this.as]=this.fn(e),this._propagate(e)}}class wx extends Te{get behavior(){return Rn}constructor(e,t){e={channel:"x",...e},super(e),this.params=e;const r=e.channel;if(!["x","y"].includes(r))throw new Error("Invalid channel: "+r);const i=t.getScaleResolution(r).getGenome();if(!i)throw new Error("LinearizeGenomicCoordinate transform requires a locus scale!");const s=ue(e.chrom),o=He(e.pos).map(p=>ue(p)),a=He(e.as);if(o.length!=a.length)throw new Error('The number of "pos" and "as" elements must be equal!');const c=He(e.offset);let u;if(c.length==0)u=new Array(o.length).fill(0);else if(c.length==1)u=new Array(o.length).fill(c[0]);else if(c.length==o.length)u=c;else throw new Error(`Invalid "offset" parameter: ${JSON.stringify(e.offset)}!`);const l=new Function("datum","chromOffset","posAccessors",a.map((p,m)=>`datum[${JSON.stringify(p)}] = chromOffset + +posAccessors[${m}](datum) - ${u[m]};`).join(`
`));let f,d=0;const h=p=>{if(p!==f){if(d=i.cumulativeChromPositions.get(p),d===void 0)return;f=p}return d};this.handle=p=>{const m=s(p),g=h(m);if(g===void 0)throw new Error(`Unknown chromosome/contig "${m}" in datum: ${JSON.stringify(p)}`);l(p,g,o),this._propagate(p)}}}const Ax={chars:JSON.parse('[{"id":87,"width":53,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":43.491,"chnl":15,"x":0,"y":0,"page":0},{"id":124,"width":17,"height":50,"xoffset":0,"yoffset":-32.193000000000005,"xadvance":10.521,"chnl":15,"x":0,"y":42,"page":0},{"id":40,"width":20,"height":49,"xoffset":0,"yoffset":-32.571000000000005,"xadvance":11.214,"chnl":15,"x":0,"y":94,"page":0},{"id":41,"width":19,"height":49,"xoffset":0,"yoffset":-32.571000000000005,"xadvance":11.214,"chnl":15,"x":0,"y":145,"page":0},{"id":36,"width":32,"height":49,"xoffset":0,"yoffset":-34.419000000000004,"xadvance":24.360000000000003,"chnl":15,"x":0,"y":196,"page":0},{"id":125,"width":21,"height":48,"xoffset":0,"yoffset":-32.193000000000005,"xadvance":12.642000000000001,"chnl":15,"x":0,"y":247,"page":0},{"id":91,"width":22,"height":48,"xoffset":0,"yoffset":-32.193000000000005,"xadvance":12.852,"chnl":15,"x":0,"y":297,"page":0},{"id":93,"width":19,"height":48,"xoffset":0,"yoffset":-32.193000000000005,"xadvance":12.852,"chnl":15,"x":0,"y":347,"page":0},{"id":123,"width":21,"height":48,"xoffset":0,"yoffset":-32.193000000000005,"xadvance":12.642000000000001,"chnl":15,"x":0,"y":397,"page":0},{"id":106,"width":19,"height":48,"xoffset":0,"yoffset":-30.639000000000003,"xadvance":10.08,"chnl":15,"x":0,"y":447,"page":0},{"id":81,"width":43,"height":47,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":33.621,"chnl":15,"x":21,"y":447,"page":0},{"id":77,"width":45,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":38.997,"chnl":15,"x":66,"y":447,"page":0},{"id":64,"width":43,"height":44,"xoffset":0,"yoffset":-28.539,"xadvance":35.133,"chnl":15,"x":23,"y":397,"page":0},{"id":92,"width":28,"height":43,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":18.984,"chnl":15,"x":68,"y":397,"page":0},{"id":47,"width":28,"height":43,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":18.984,"chnl":15,"x":98,"y":397,"page":0},{"id":109,"width":42,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":34.545,"chnl":15,"x":113,"y":447,"page":0},{"id":119,"width":42,"height":31,"xoffset":0,"yoffset":-21.315,"xadvance":32.991,"chnl":15,"x":157,"y":447,"page":0},{"id":42,"width":25,"height":42,"xoffset":0,"yoffset":-31.626,"xadvance":17.85,"chnl":15,"x":128,"y":397,"page":0},{"id":37,"width":42,"height":41,"xoffset":0,"yoffset":-30.387,"xadvance":33.663000000000004,"chnl":15,"x":155,"y":397,"page":0},{"id":79,"width":42,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":33.621,"chnl":15,"x":199,"y":397,"page":0},{"id":102,"width":24,"height":41,"xoffset":0,"yoffset":-30.534000000000002,"xadvance":14.721,"chnl":15,"x":243,"y":397,"page":0},{"id":100,"width":31,"height":41,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":23.520000000000003,"chnl":15,"x":269,"y":397,"page":0},{"id":98,"width":32,"height":41,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":23.520000000000003,"chnl":15,"x":302,"y":397,"page":0},{"id":56,"width":32,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":24.360000000000003,"chnl":15,"x":336,"y":397,"page":0},{"id":38,"width":40,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":29.904000000000003,"chnl":15,"x":370,"y":397,"page":0},{"id":108,"width":17,"height":41,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":9.912,"chnl":15,"x":412,"y":397,"page":0},{"id":107,"width":31,"height":41,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":21.336000000000002,"chnl":15,"x":431,"y":397,"page":0},{"id":48,"width":33,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":24.360000000000003,"chnl":15,"x":464,"y":397,"page":0},{"id":71,"width":38,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":30.681,"chnl":15,"x":21,"y":347,"page":0},{"id":83,"width":31,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":22.785,"chnl":15,"x":61,"y":347,"page":0},{"id":63,"width":27,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":18.795,"chnl":15,"x":94,"y":347,"page":0},{"id":105,"width":18,"height":41,"xoffset":0,"yoffset":-30.639000000000003,"xadvance":10.08,"chnl":15,"x":123,"y":347,"page":0},{"id":51,"width":32,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":24.360000000000003,"chnl":15,"x":143,"y":347,"page":0},{"id":104,"width":31,"height":41,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":23.436,"chnl":15,"x":177,"y":347,"page":0},{"id":67,"width":37,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":28.056,"chnl":15,"x":210,"y":347,"page":0},{"id":88,"width":37,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":27.258000000000003,"chnl":15,"x":249,"y":347,"page":0},{"id":68,"width":40,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":31.941000000000003,"chnl":15,"x":288,"y":347,"page":0},{"id":70,"width":32,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":23.751,"chnl":15,"x":330,"y":347,"page":0},{"id":34,"width":23,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":15.561000000000002,"chnl":15,"x":364,"y":347,"page":0},{"id":72,"width":38,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":32.067,"chnl":15,"x":389,"y":347,"page":0},{"id":73,"width":18,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":11.760000000000002,"chnl":15,"x":429,"y":347,"page":0},{"id":74,"width":24,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":17.745,"chnl":15,"x":449,"y":347,"page":0},{"id":75,"width":38,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":27.825000000000003,"chnl":15,"x":24,"y":297,"page":0},{"id":76,"width":31,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":21.567,"chnl":15,"x":475,"y":347,"page":0},{"id":66,"width":35,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":27.153000000000002,"chnl":15,"x":64,"y":297,"page":0},{"id":78,"width":38,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":32.067,"chnl":15,"x":101,"y":297,"page":0},{"id":33,"width":18,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":11.298,"chnl":15,"x":141,"y":297,"page":0},{"id":80,"width":34,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":25.221,"chnl":15,"x":161,"y":297,"page":0},{"id":65,"width":38,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":28.434,"chnl":15,"x":197,"y":297,"page":0},{"id":82,"width":36,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":26.313000000000002,"chnl":15,"x":237,"y":297,"page":0},{"id":35,"width":33,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":275,"y":297,"page":0},{"id":84,"width":34,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.801000000000002,"chnl":15,"x":310,"y":297,"page":0},{"id":85,"width":37,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":30.891000000000002,"chnl":15,"x":346,"y":297,"page":0},{"id":86,"width":38,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":28.434,"chnl":15,"x":385,"y":297,"page":0},{"id":39,"width":16,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":8.568000000000001,"chnl":15,"x":425,"y":297,"page":0},{"id":69,"width":32,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.255000000000003,"chnl":15,"x":443,"y":297,"page":0},{"id":89,"width":36,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":26.208000000000002,"chnl":15,"x":23,"y":247,"page":0},{"id":90,"width":34,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":25.284000000000002,"chnl":15,"x":477,"y":297,"page":0},{"id":49,"width":31,"height":40,"xoffset":0,"yoffset":-30.156000000000002,"xadvance":24.360000000000003,"chnl":15,"x":61,"y":247,"page":0},{"id":50,"width":32,"height":40,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":24.360000000000003,"chnl":15,"x":94,"y":247,"page":0},{"id":57,"width":32,"height":40,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":24.360000000000003,"chnl":15,"x":128,"y":247,"page":0},{"id":94,"width":32,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":162,"y":247,"page":0},{"id":96,"width":21,"height":40,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":16.8,"chnl":15,"x":196,"y":247,"page":0},{"id":55,"width":33,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":219,"y":247,"page":0},{"id":54,"width":33,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":254,"y":247,"page":0},{"id":53,"width":32,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":289,"y":247,"page":0},{"id":52,"width":33,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":323,"y":247,"page":0},{"id":103,"width":31,"height":39,"xoffset":0,"yoffset":-21.630000000000003,"xadvance":21.84,"chnl":15,"x":358,"y":247,"page":0},{"id":112,"width":32,"height":39,"xoffset":0,"yoffset":-21.651,"xadvance":23.541,"chnl":15,"x":391,"y":247,"page":0},{"id":113,"width":31,"height":39,"xoffset":0,"yoffset":-21.651,"xadvance":23.520000000000003,"chnl":15,"x":425,"y":247,"page":0},{"id":116,"width":25,"height":39,"xoffset":0,"yoffset":-28.182000000000002,"xadvance":15.057,"chnl":15,"x":458,"y":247,"page":0},{"id":121,"width":31,"height":38,"xoffset":0,"yoffset":-21.273,"xadvance":21.651,"chnl":15,"x":34,"y":196,"page":0},{"id":59,"width":18,"height":36,"xoffset":0,"yoffset":-20.706,"xadvance":10.983,"chnl":15,"x":485,"y":247,"page":0},{"id":43,"width":32,"height":34,"xoffset":0,"yoffset":-24.486,"xadvance":24.360000000000003,"chnl":15,"x":67,"y":196,"page":0},{"id":60,"width":30,"height":33,"xoffset":0,"yoffset":-23.331000000000003,"xadvance":24.360000000000003,"chnl":15,"x":101,"y":196,"page":0},{"id":62,"width":31,"height":33,"xoffset":0,"yoffset":-23.331000000000003,"xadvance":24.360000000000003,"chnl":15,"x":133,"y":196,"page":0},{"id":117,"width":30,"height":32,"xoffset":0,"yoffset":-21.273,"xadvance":23.415000000000003,"chnl":15,"x":166,"y":196,"page":0},{"id":99,"width":29,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":20.055,"chnl":15,"x":198,"y":196,"page":0},{"id":110,"width":31,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":23.436,"chnl":15,"x":229,"y":196,"page":0},{"id":111,"width":32,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":23.814,"chnl":15,"x":262,"y":196,"page":0},{"id":126,"width":32,"height":26,"xoffset":0,"yoffset":-16.128,"xadvance":24.360000000000003,"chnl":15,"x":201,"y":447,"page":0},{"id":101,"width":31,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":22.176000000000002,"chnl":15,"x":296,"y":196,"page":0},{"id":114,"width":25,"height":32,"xoffset":0,"yoffset":-21.651,"xadvance":15.288,"chnl":15,"x":329,"y":196,"page":0},{"id":115,"width":27,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":18.186,"chnl":15,"x":356,"y":196,"page":0},{"id":97,"width":28,"height":32,"xoffset":0,"yoffset":-21.651,"xadvance":20.874000000000002,"chnl":15,"x":385,"y":196,"page":0},{"id":118,"width":31,"height":31,"xoffset":0,"yoffset":-21.273,"xadvance":21.672,"chnl":15,"x":415,"y":196,"page":0},{"id":61,"width":31,"height":29,"xoffset":0,"yoffset":-19.089000000000002,"xadvance":24.360000000000003,"chnl":15,"x":448,"y":196,"page":0},{"id":120,"width":30,"height":31,"xoffset":0,"yoffset":-21.273,"xadvance":20.916,"chnl":15,"x":21,"y":145,"page":0},{"id":58,"width":18,"height":31,"xoffset":0,"yoffset":-20.706,"xadvance":10.5,"chnl":15,"x":53,"y":145,"page":0},{"id":122,"width":28,"height":31,"xoffset":0,"yoffset":-21.273,"xadvance":18.984,"chnl":15,"x":73,"y":145,"page":0},{"id":95,"width":28,"height":16,"xoffset":0,"yoffset":0,"xadvance":19.278000000000002,"chnl":15,"x":235,"y":447,"page":0},{"id":45,"width":23,"height":24,"xoffset":0,"yoffset":-14.175,"xadvance":15.603000000000002,"chnl":15,"x":481,"y":196,"page":0},{"id":44,"width":17,"height":21,"xoffset":0,"yoffset":-4.956,"xadvance":9.534,"chnl":15,"x":103,"y":145,"page":0},{"id":46,"width":18,"height":15,"xoffset":0,"yoffset":-4.956,"xadvance":9.912,"chnl":15,"x":0,"y":497,"page":0},{"id":32,"width":0,"height":0,"xoffset":0,"yoffset":0,"xadvance":10.752,"chnl":15,"x":20,"y":497,"page":0}]'),common:{lineHeight:50.400000000000006,base:41.454,scaleW:512,scaleH:512,pages:1,packed:0,alphaChnl:0,redChnl:0,greenChnl:0,blueChnl:0}};class VB extends Te{get behavior(){return Rn}constructor(e,t){super(e),this.params=e;const r=Xl(Ax),i=ue(e.field),s=e.as;let o=0;if(We(e.fontSize)){const a=t.paramMediator.createExpression(e.fontSize.expr);o=a(),a.addListener(()=>{o=a(),this.repropagate()})}else o=e.fontSize;this.handle=a=>{const c=i(a);c!==void 0?a[s]=r.measureWidth(c,o):a[s]=0,this._propagate(a)}}}const _B=65536;class jB extends Te{get behavior(){return Rn}constructor(e){super(e),this.params=e}reset(){super.reset(),this.initialize()}initialize(){const e=this.params,t=e.as||"lane",r=Ke(e.spacing)?e.spacing:1,i=ue(e.start),s=ue(e.end);if(!e.preference!=!e.preferredOrder)throw new Error('Must specify both "preference" and "preferredOrder"');if(e.preference){const o=new Float64Array(_B),a=ue(e.preference),c=e.preferredOrder;let u=1/0;this.handle=l=>{const f=i(l);f<u&&o.fill(-1/0),u=f;const d=c.indexOf(a(l));let h=-1;if(d>=0&&o[d]<f)h=d;else{const p=i(l);for(h=0;h<o.length&&!(o[h]<p);h++);if(h>=o.length)throw new Error("Out of lanes!")}o[h]=s(l)+r,l[t]=h,this._propagate(l)}}else{const o=new iu,a=new iu;let c=-1/0,u=0;this.handle=l=>{const f=i(l);for(;o.length&&(o.peekValue()<=f||f<c);){const h=o.pop();a.push(h,h)}c=f;let d=a.pop();d===void 0&&(d=u++),l[t]=d,this._propagate(l),o.push(d,s(l)+r)}}}}class WB extends Te{get behavior(){return Ht}constructor(e){if(super(e),this.params=e,e.as&&e.as.length!=e.fields.length)throw new Error('"fields" and "as" have unequal lengths!');const t=e.fields.map(i=>ue(i)),r=e.as?e.as:t.map(Ee);this.handle=i=>{const s={};for(let o=0;o<t.length;o++)s[r[o]]=t[o](i);this._propagate(s)}}}class QB extends Te{get behavior(){return Rn}constructor(e){super(e),this.params=e;const t=new RegExp(e.regex),r=typeof e.as=="string"?[e.as]:e.as,i=ue(e.field);this.handle=s=>{const o=i(s);if(me(o)){const a=o.match(t);if(a){if(a.length-1!=r.length)throw new Error('The number of RegEx groups and the length of "as" do not match!');for(let c=0;c<r.length;c++)s[r[c]]=a[c+1]}else if(e.skipInvalidInput)for(let c=0;c<r.length;c++)s[r[c]]=void 0;else throw new Error(`"${o}" does not match the given regex: ${t.toString()}`)}else if(!e.skipInvalidInput)throw new Error(`Trying to match a non-string field. Encountered type: ${typeof o}, field content: "${o}".`);this._propagate(s)}}}class qB extends Te{get behavior(){return Ht}constructor(e){super(e),this.params=e;const t=He(e.columnRegex).map(d=>new RegExp(d));for(const d of t)if(RegExp("|"+d.source).exec("").length-1!=1)throw new Error(`Regex ${d.toString()} must have exactly one capturing group!`);const r=He(e.asValue);if(t.length!=r.length)throw new Error('Lengths of "columnRegex" and "as" are not equal!');const i=e.skipRegex?new RegExp(e.skipRegex):void 0,s=e.asKey||"sample";let o,a,c;const u=d=>{var g;const h=Object.keys(d);for(const x of t)if(!h.some(b=>x.test(b)))throw new Error(`No columns matching the regex ${x.toString()} found in the data!`);const p=new Map;for(const[x,b]of t.entries())for(const w of h){const A=(g=b.exec(w))==null?void 0:g[1];if(A!==void 0){let S=p.get(A);S||(S=[],p.set(A,S)),S[x]=w}}o=[...p.entries()],a=h.filter(x=>!t.some(b=>b.test(x))&&!(i&&i.test(x)));const m=[...a.map(x=>JSON.stringify(x)+": datum["+JSON.stringify(x)+"]"),JSON.stringify(s)+": sampleId",...r.map((x,b)=>JSON.stringify(x)+`: datum[attrs[${b}]]`)];c=new Function("datum","sampleId","attrs",`return {
`+m.join(`,
`)+`
};`)},l=d=>{o||u(d);for(let h=0;h<o.length;h++){const[p,m]=o[h],g=c(d,p,m);this._propagate(g)}},f=d=>{u(d),l(d),this.handle=l};this.handle=f,this.beginBatch=d=>{gm(d)&&(this.handle=f),super.beginBatch(d)}}}class YB extends Te{get behavior(){return Rn}constructor(e){super(e),this.params=e,this.buffer=[]}reset(){this.buffer=[]}handle(e){this.buffer.push(e)}complete(){const e=this.params,t=e.as||["y0","y1"],r=e.sort?Ld(e.sort.field,e.sort.order):void 0,i=e.field?ue(e.field):()=>1,s=e.groupby.map(l=>ue(l)),o=tv(this.buffer,l=>s.map(f=>f(l)).join()).map(l=>l[1]);let a=l=>!0;if(e.baseField){const l=ue(e.baseField);a=f=>l(f)!==null}let c,u;switch(e.offset){case"normalize":c=(l,f)=>l/f,u=(l,f)=>Hs(l,f);break;case"center":c=(l,f)=>l-f/2,u=(l,f)=>Hs(l,f);break;case"information":{const l=Math.log2(e.cardinality??4);c=(f,d)=>f/d,u=(f,d)=>{const p=Hs(f,b=>+!a(b)),m=Hs(f,d),g=m-p;let x=0;for(let b=0;b<f.length;b++){const w=f[b];if(a(w)){const A=d(w)/g;x-=A*Math.log2(A)}}return g/(l-(x+0))*(g/m)}}break;default:c=(l,f)=>l,u=(l,f)=>1}for(const l of o){r&&l.sort(r);const f=u(l,i);let d=0;for(const h of l){const p=d+i(h);a(h)&&(h[t[0]]=c(d,f),h[t[1]]=c(p,f),this._propagate(h),d=p)}}super.complete()}}class XB extends Te{get behavior(){return Ht}constructor(e){super(e),this.params=e;const t=ue(e.field??"sequence"),[r,i]=e.as??["pos","sequence"];this.handle=s=>{const o=Object.assign({},s,{[i]:"",[r]:0}),a=t(s);for(let c=0;c<a.length;c++){const u=Object.assign({},o);u[r]=c,u[i]=a.charAt(c),this._propagate(u)}}}}const vx={count:n=>n.length,valid:XA,sum:Hs,min:el,max:$u,mean:av,median:cv,variance:KA};class KB extends Te{get behavior(){return Ht}constructor(e){if(super(e),this.params=e,this.buffer=[],this.ops=[],this.as=[],e.fields){if(e.fields.length!=e.ops.length)throw new Error("Fields and ops must have the same length!");if(e.as&&e.as.length!=e.ops.length)throw new Error('If "as" is defined, "fields" and "as" must have the same length!');e.fields.forEach((t,r)=>{const i=ue(t),s=vx[e.ops[r]];this.ops.push(o=>s(o,i)),this.as.push(e.as?e.as[r]:`${e.ops[r]}_${e.fields[r]}`)})}else this.ops.push(t=>vx.count(t)),this.as.push("count")}reset(){super.reset(),this.buffer=[]}handle(e){this.buffer.push(e)}complete(){const e=this.params,t=e==null?void 0:e.groupby;if((t==null?void 0:t.length)>0){const r=t.map(s=>ue(s)),i=Ua(this.buffer,...r);for(const[s,o]of gh(i)){const a={};for(let c=0;c<t.length;c++)a[t[c]]=s[c];this.ops.forEach((c,u)=>{a[this.as[u]]=c(o)}),this._propagate(a)}}else{const r={};this.ops.forEach((i,s)=>{r[this.as[s]]=i(this.buffer)}),this._propagate(r)}super.complete()}}const ZB={aggregate:KB,collect:bx,coverage:TB,filterScoredLabels:FB,filter:PB,flatten:OB,flattenCompressedExons:zB,flattenDelimited:UB,flattenSequence:XB,formula:HB,identifier:Jl,linearizeGenomicCoordinate:wx,measureText:VB,pileup:jB,project:WB,regexExtract:QB,regexFold:qB,sample:H1,stack:YB};function JB(n,e){const t=ZB[n.type];if(t)return new t(n,e);throw new Error("Unknown transform: "+n.type)}function Sx(n,e=[]){if(!Dx(n)&&!Cx(n))return;const t={...n.format};if(t.type??(t.type=Cx(n)&&ek(e)),t.parse??(t.parse="auto"),!t.type)throw new Error("Format for the data source was not defined and it could not be inferred: "+JSON.stringify(n));return t}function $B(n){var e;return((e=ml(n))==null?void 0:e.responseType)??"text"}function ek(n){var e;if(Array.isArray(n)&&(n=n[0]),n)return(e=n.match(/\.(csv|tsv|json)/))==null?void 0:e[1]}const Ex=n=>typeof n!="object"?tk:nk,tk=n=>({data:n}),nk=n=>n;function Cx(n){return"url"in n}class Nr extends Zl{constructor(t){super();Y(this,"view");this.view=t}get identifier(){}setLoadingStatus(t,r){this.view.context.setDataLoadingStatus(this.view,t,r)}get paramMediator(){return this.view.paramMediator}handle(t){throw new Error("Source does not handle incoming data!")}async load(){}repropagate(){this.load()}}function Dx(n){return"values"in n}class rk extends Nr{constructor(t,r){var i;super(r);R(this,fa);if(this.params=t,typeof t.values=="string"&&!((i=t==null?void 0:t.format)!=null&&i.type))throw new Error("Data format type (csv, dsv, ...) must be specified if a string is provided!")}get label(){return"inlineSource"}isTrivial(){const t=this.params.values,r=Array.isArray(t)?t[0]:t;return!!(r&&Object.keys(r).length==0&&r.constructor===Object)}updateDynamicData(t){O(this,fa,Cd).call(this,t)}loadSynchronously(){O(this,fa,Cd).call(this,this.params.values)}async load(){this.loadSynchronously()}}fa=new WeakSet,Cd=function(t){let r=[],i=s=>s;if(Array.isArray(t))t.length>0&&(r=t,i=Ex(t[0]));else if(typeof t=="object")r=[t];else if(typeof t=="string")r=gl(t,Sx(this.params));else throw new Error('"values" in data configuration is not an array, object, or a string!');this.reset(),this.beginBatch({type:"file"});for(const s of r)this._propagate(i(s));this.complete()};function ik(n){return"url"in n}class sk extends Nr{constructor(t,r){super(r);R(this,Iu);this.params=kc(r.paramMediator,t,()=>this.load()),this.baseUrl=r==null?void 0:r.getBaseUrl()}get identifier(){return JSON.stringify({params:this.params,baseUrl:this.baseUrl})}get label(){return"urlSource"}async load(){const t=gt(this.params.url),r=typeof t=="object"&&"urlsFromFile"in t?await O(this,Iu,Nw).call(this,t):(Array.isArray(t)?t:[t]).map(c=>Or(this.baseUrl,c)),i=Sx(this.params,r),s=$B(i.type);if(r.length===0||!r[0]){this.reset(),this.complete();return}const o=async c=>{try{const u=await fetch(c);if(!u.ok)throw new Error(`${u.status} ${u.statusText}`);return typeof u[s]=="function"?u[s]():u.text()}catch(u){throw new Error(`Could not load data: ${c}. Reason: ${u.message}`)}},a=(c,u)=>{try{const l=gl(c,i);this.beginBatch({type:"file",url:u});for(const f of l)this._propagate(f)}catch(l){throw new Error(`Cannot parse: ${u}: ${l.message}`)}};this.setLoadingStatus("loading"),this.reset();try{await Promise.all(r.map(c=>o(c).then(a))),this.setLoadingStatus("complete")}catch(c){this.setLoadingStatus("error",c.message)}this.complete()}}Iu=new WeakSet,Nw=async function(t){const r=Or(this.baseUrl,t.urlsFromFile),i=await fetch(r);if(!i.ok)throw new Error(`Cannot load "${r}": ${i.status} ${i.statusText}`);const s=await i.text();return gl(s,{type:t.type??"tsv"}).map(a=>typeof a=="string"?a:a.url).map(a=>Or(r,a))};function ok(n){return"sequence"in n}class ak extends Nr{constructor(e,t){if(super(t),this.sequence=kc(t.paramMediator,e.sequence,()=>this.loadSynchronously()),!("start"in this.sequence))throw new Error("'start' is missing from sequence parameters!");if(!("stop"in this.sequence))throw new Error("'stop' is missing from sequence parameters!")}get label(){return"sequenceSource"}loadSynchronously(){const e=gt(this.sequence.as)??"data",t=gt(this.sequence.start)??0,r=gt(this.sequence.step)??1,i=gt(this.sequence.stop);this.reset(),this.beginBatch({type:"file"});for(let s=t;s<i;s+=r)this._propagate({[e]:s});this.complete()}async load(){this.loadSynchronously()}}class xh extends Nr{constructor(t,r){super(t);Y(this,"initializedPromise",Promise.resolve());if(r){if(r!=="x"&&r!=="y")throw new Error(`Invalid channel specified for the lazy data source: ${r}. Must be either "x" or "y"`)}else throw new Error('No channel has been specified for the lazy data source. Must be either "x" or "y".');if(this.channel=r,this.scaleResolution=this.view.getScaleResolution(r),!this.scaleResolution){const s=[`The lazy data source cannot find a resolved scale for channel "${r}".`];throw this.view instanceof ft||s.push('Make sure the view has a "shared" scale resolution as it is not a unit view.'),new Error(s.join(" "))}const i=()=>{this.view.isVisible()&&this.onDomainChanged(this.scaleResolution.getDomain(),this.scaleResolution.getComplexDomain())};this.scaleResolution.addEventListener("domain",i),this.view.context.addBroadcastListener("layoutComputed",i)}get genome(){return this.scaleResolution.getGenome()}onDomainChanged(t,r){}requestRender(){this.view.context.animator.requestRender()}async load(){this.reset(),this.complete()}publishData(t){this.reset(),this.beginBatch({type:"file"});for(const r of t)for(const i of r)this._propagate(i);this.complete(),ux(this.view)}}class ck extends xh{constructor(t,r){const i={...t};super(r,i.channel);Y(this,"ticks",[]);this.params=t}get label(){return"axisTickSource"}async load(){this.ticks=null,this.onDomainChanged()}onDomainChanged(){const t=this.scaleResolution.scale,r=this.scaleResolution.getAxisLength(),i=this.params.axis,s=u=>25+60*Lm(100,700,u),o=Ke(i.tickCount)?i.tickCount:Math.round(r/s(r)),a=_1(t,o,i.tickMinStep),c=i.values?j1(t,i.values,a):BT(t,a);if(this.ticks==null||!ec(c,this.ticks)){this.ticks=c;const u=FT(t,o,i.format);this.publishData([c.map(l=>({value:l,label:u(l)}))])}}}class uk extends xh{constructor(e,t){super(t,e.channel)}get label(){return"axisGenomeSource"}async load(){this.publishData([this.genome.chromosomes])}}function su(n,e,t=!0){let r,i=o=>{};return function(...a){return new Promise((c,u)=>{const l=()=>{clearTimeout(r),i=f=>{},c(n(...a))};t&&i("debounced"),clearTimeout(r),i=u,r=window.setTimeout(l,typeof e=="function"?e():e)})}}class Vo extends xh{constructor(){super(...arguments);R(this,fs,new AbortController);R(this,hs,[0,0]);R(this,ds,[0,0]);R(this,ha,0);Y(this,"params")}setupDebouncing(t){const r=()=>gt(t.debounce),i=t.debounceMode;if(i=="domain")this.onDomainChanged=su(this.onDomainChanged.bind(this),r,!1);else if(i=="window")this.loadInterval=su(this.loadInterval.bind(this),r,!1);else throw new Error("Invalid debounceMode: "+i)}onDomainChanged(t){var i;G(this,ds,t);const r=gt((i=this.params)==null?void 0:i.windowSize)??-1;t[1]-t[0]>r||this.callIfWindowsChanged(t,r,async s=>{await this.initializedPromise,this.loadInterval(s)})}reloadLastDomain(){const t=E(this,ds);G(this,ds,[0,0]),G(this,hs,[0,0]),this.onDomainChanged(t)}async loadInterval(t){}async discretizeAndLoad(t,r){E(this,fs).abort(),this.setLoadingStatus("loading"),G(this,fs,new AbortController);const i=E(this,fs).signal,s=this.genome.continuousToDiscreteChromosomeIntervals(t);try{const o=await Promise.all(s.map(async a=>r(a,i)));if(!i.aborted)return this.setLoadingStatus("complete"),o}catch(o){if(!i.aborted)throw this.setLoadingStatus("error",o.message),o}}callIfWindowsChanged(t,r,i){const s=[Math.max(Math.floor(t[0]/r)*r,0),Math.min(Math.ceil(t[1]/r)*r,this.genome.totalSize)],o=E(this,hs);(r!==E(this,ha)||s[0]<o[0]||s[1]>o[1])&&(G(this,hs,s),G(this,ha,r),i(s))}}fs=new WeakMap,hs=new WeakMap,ds=new WeakMap,ha=new WeakMap;class lk extends Vo{constructor(e,t){const r={channel:"x",windowSize:7e3,debounce:200,debounceMode:"window",...e};if(super(t,r.channel),this.params=r,!this.params.url)throw new Error("No URL provided for IndexedFastaSource");this.setupDebouncing(this.params),this.initializedPromise=new Promise(i=>{Promise.all([Promise.resolve().then(()=>ZF),Promise.resolve().then(()=>Wo)]).then(([{IndexedFasta:s},{RemoteFile:o}])=>{const a=c=>new o(Go(c,this.view.getBaseUrl()));this.fasta=new s({fasta:a(this.params.url),fai:a(this.params.indexUrl??this.params.url+".fai")}),i()})})}get label(){return"bigWigSource"}async loadInterval(e){const t=await this.discretizeAndLoad(e,async(r,i)=>this.fasta.getSequence(r.chrom,r.startPos,r.endPos,{signal:i}).then(s=>{if(s!=null)return{chrom:r.chrom,start:r.startPos,sequence:s};console.log(`No sequence found for interval ${r.chrom}:${r.startPos}-${r.endPos}`)}));this.publishData([t.filter(r=>r!==void 0)])}}class fk extends Vo{constructor(t,r){const i={pixelsPerBin:2,channel:"x",debounce:200,debounceMode:"window",...t},s=kc(r.paramMediator,i,o=>{o.includes("url")?O(this,da,Dd).call(this).then(()=>this.reloadLastDomain()):o.includes("pixelsPerBin")&&this.reloadLastDomain()});super(r,s.channel);R(this,da);R(this,ps,[]);R(this,ms);if(this.params=s,!this.params.url)throw new Error("No URL provided for BigWigSource");this.setupDebouncing(this.params),O(this,da,Dd).call(this)}get label(){return"bigWigSource"}async onDomainChanged(t){await this.initializedPromise;const r=this.scaleResolution.getAxisLength()||700,i=hk(t,r,E(this,ps)),s=Math.max(i*r,5e3);this.callIfWindowsChanged(t,s,o=>this.loadInterval(o,i))}async loadInterval(t,r){const i=.5/r/gt(this.params.pixelsPerBin),s=await this.discretizeAndLoad(t,(o,a)=>E(this,ms).getFeatures(o.chrom,o.startPos,o.endPos,{scale:i,signal:a}).then(c=>c.map(u=>({chrom:o.chrom,start:u.start,end:u.end,score:u.score}))));s&&this.publishData(s)}}ps=new WeakMap,ms=new WeakMap,da=new WeakSet,Dd=function(){return this.initializedPromise=new Promise((t,r)=>{Promise.all([Promise.resolve().then(()=>kb),Promise.resolve().then(()=>Wo)]).then(([{BigWig:i},{RemoteFile:s}])=>{G(this,ms,new i({filehandle:new s(Go(gt(this.params.url),this.view.getBaseUrl()))})),this.setLoadingStatus("loading"),E(this,ms).getHeader().then(o=>{G(this,ps,o.zoomLevels.map(a=>a.reductionLevel).reverse()),E(this,ps).push(1),this.setLoadingStatus("complete"),t()}).catch(o=>{this.load(),this.setLoadingStatus("error",`${gt(this.params.url)}: ${o.message}`),r(o)})})}),this.initializedPromise};function hk(n,e,t){const r=(n[1]-n[0])/e;return t.find(i=>i<r)??t.at(-1)}class dk extends Vo{constructor(t,r){const i={channel:"x",windowSize:1e6,debounce:200,debounceMode:"window",...t},s=kc(r.paramMediator,i,o=>{o.includes("url")?O(this,pa,Id).call(this).then(()=>this.reloadLastDomain()):o.includes("windowSize")&&this.reloadLastDomain()});super(r,s.channel);R(this,pa);Y(this,"parser");Y(this,"bbi");Y(this,"parseLine");if(this.params=s,!this.params.url)throw new Error("No URL provided for BigBedSource");this.setupDebouncing(this.params),O(this,pa,Id).call(this)}get label(){return"bigBedSource"}async loadInterval(t){const r=await this.discretizeAndLoad(t,async(i,s)=>this.bbi.getFeatures(i.chrom,i.startPos,i.endPos,{signal:s}).then(o=>o.map(a=>this.parseLine(i.chrom,a))));r&&this.publishData(r)}}pa=new WeakSet,Id=function(){return this.initializedPromise=new Promise((t,r)=>{Promise.all([Promise.resolve().then(()=>r9),Promise.resolve().then(()=>kb),Promise.resolve().then(()=>Wo)]).then(([i,{BigBed:s},{RemoteFile:o}])=>{const a=i.default;this.bbi=new s({filehandle:new o(Go(gt(this.params.url),this.view.getBaseUrl()))}),this.setLoadingStatus("loading"),this.bbi.getHeader().then(async c=>{this.parser=new a({autoSql:c.autoSql});try{const u=pk(this.parser);this.parseLine=(l,f)=>u(l,f.start,f.end,f.rest)}catch{this.parseLine=(l,f)=>this.parser.parseLine(`${l}	${f.start}	${f.end}	${f.rest}`)}this.setLoadingStatus("complete"),t()}).catch(c=>{this.load(),this.setLoadingStatus("error",`${gt(this.params.url)}: ${c.message}`),r(c)})})}),this.initializedPromise};function pk(n){const e=n.autoSql.fields.filter(b=>b.type).slice(3);let t=0,r="",i=0,s={};const o="	",a=o.charCodeAt(0),c=48,u=45;function l(){let b=r.indexOf(o,t);b<0&&(b=i);const w=r.substring(t,b);return t=b+1,w}function f(){let b=0,w=r.charCodeAt(t),A=1;w===u&&(A=-1,t++,w=r.charCodeAt(t));do{if(w===a){t++;break}b=b*10+w-c,w=r.charCodeAt(++t)}while(t<i);return b*A}const d=e.map(b=>`${JSON.stringify(b.name)}: ${b.isNumeric?"0":"emptyString"}`),h=new Function(`
        const emptyString = "";
        return function makeTemplate(chrom, chromStart, chromEnd) {
            return {
                chrom,
                chromStart,
                chromEnd,
                ${d.join(`,
`)}
            }
        };`)(),p=e.map(b=>{const w=b.type,A=JSON.stringify(b.name);if(["ubyte","int","uint"].includes(w))return`d[${A}] = parseInt();`;if(b.isNumeric)return`d[${A}] = Number(parseString());`;if(["char","string","lstring"].includes(w))return`d[${A}] = parseString();`;throw new Error("Unsupported type: "+w)}),m=mk(p,50).map((b,w)=>Function("parseInt","parseString",`return function parseFieldChunk${w}(d) {
            ${b.join(`
`)}
        }`)(f,l));function g(b){r=b,i=b.length,t=0}function x(b,w,A,S){g(S),s=h(b,w,A);for(const C of m)C(s);return s}return x}function mk(n,e){return Array.from({length:Math.ceil(n.length/e)},(t,r)=>n.slice(r*e,r*e+e))}class gk extends Vo{constructor(t,r){const i={channel:"x",windowSize:2e4,debounce:200,debounceMode:"domain",...t};super(r,i.channel);R(this,Kr);Y(this,"chrPrefixFixer",t=>t);if(this.params=i,!this.params.url)throw new Error("No URL provided for BamSource");this.setupDebouncing(this.params),this.initializedPromise=new Promise(s=>{Promise.all([Promise.resolve().then(()=>T9),Promise.resolve().then(()=>Wo)]).then(([{BamFile:o},{RemoteFile:a}])=>{const c=u=>new a(Go(u,this.view.getBaseUrl()));G(this,Kr,new o({bamFilehandle:c(this.params.url),baiFilehandle:c(this.params.indexUrl??this.params.url+".bai")})),E(this,Kr).getHeader().then(u=>{var d,h;const l=this.genome.hasChrPrefix(),f=(h=(d=E(this,Kr).indexToChr)==null?void 0:d[0])==null?void 0:h.refName.startsWith("chr");l&&!f?this.chrPrefixFixer=p=>p.replace("chr",""):!l&&f&&(this.chrPrefixFixer=p=>"chr"+p),s()})})})}get label(){return"bamSource"}async loadInterval(t){const r=await this.discretizeAndLoad(t,async(i,s)=>E(this,Kr).getRecordsForRange(this.chrPrefixFixer(i.chrom),i.startPos,i.endPos,{signal:s}).then(o=>o.map(a=>({chrom:i.chrom,start:a.start,end:a.end,name:a.name,cigar:a.CIGAR,mapq:a.mq,strand:a.strand===1?"+":"-"}))));r&&this.publishData(r)}}Kr=new WeakMap;class Ix extends Vo{constructor(t,r){const i={channel:"x",windowSize:3e6,debounce:200,debounceMode:"domain",addChrPrefix:!1,...t};super(r,i.channel);R(this,gs);if(this.params=i,!this.params.url)throw new Error("No URL provided for TabixSource");this.setupDebouncing(this.params),this.initializedPromise=new Promise(s=>{Promise.all([Promise.resolve().then(()=>H9),Promise.resolve().then(()=>Wo)]).then(async([{TabixIndexedFile:o},{RemoteFile:a}])=>{const c=l=>new a(Go(l,this.view.getBaseUrl()));G(this,gs,new o({filehandle:c(this.params.url),tbiFilehandle:c(this.params.indexUrl??this.params.url+".tbi"),renameRefSeqs:this.params.addChrPrefix===!0?l=>"chr"+l:this.params.addChrPrefix?l=>this.params.addChrPrefix+l:void 0}));const u=await E(this,gs).getHeader();await this._handleHeader(u),s()})})}async loadInterval(t){await this.initializedPromise;const r=await this.discretizeAndLoad(t,async(i,s)=>{const o=[];return await E(this,gs).getLines(i.chrom,i.startPos,i.endPos,{lineCallback:a=>{o.push(a)},signal:s}),this._parseFeatures(o)});r&&this.publishData(r)}async _handleHeader(t){}_parseFeatures(t){return[]}}gs=new WeakMap;class xk extends Ix{constructor(){super(...arguments);R(this,ma)}get label(){return"gff3Source"}async _handleHeader(t){G(this,ma,await Promise.resolve().then(()=>nP))}_parseFeatures(t){var i;return(i=E(this,ma))==null?void 0:i.parseArraySync(t)}}ma=new WeakMap;class yk extends Ix{constructor(){super(...arguments);R(this,ga)}get label(){return"vcfSource"}async _handleHeader(t){const r=(await Promise.resolve().then(()=>uP)).default;G(this,ga,new r({header:t}))}_parseFeatures(t){return t.map(r=>{const i=E(this,ga).parseLine(r);return delete i.GENOTYPES,i.SAMPLES=i.SAMPLES(),i})}}ga=new WeakMap;function bk(n,e){if(Dx(n))return new rk(n,e);if(ik(n))return new sk(n,e);if(ok(n))return new ak(n,e);if(wk(n))return Bk(n.lazy,e);throw new Error("Cannot figure out the data source type: "+JSON.stringify(n))}function wk(n){return"lazy"in n}function Ak(n){return(n==null?void 0:n.type)=="axisTicks"}function vk(n){return(n==null?void 0:n.type)=="axisGenome"}function Sk(n){return(n==null?void 0:n.type)=="indexedFasta"}function Ek(n){return(n==null?void 0:n.type)=="bigwig"}function Ck(n){return(n==null?void 0:n.type)=="bigbed"}function Dk(n){return(n==null?void 0:n.type)=="bam"}function Ik(n){return(n==null?void 0:n.type)=="gff3"}function Tk(n){return(n==null?void 0:n.type)=="vcf"}function Bk(n,e){if(Ak(n))return new ck(n,e);if(vk(n))return new uk(n,e);if(Sk(n))return new lk(n,e);if(Ek(n))return new fk(n,e);if(Ck(n))return new dk(n,e);if(Dk(n))return new gk(n,e);if(Ik(n))return new xk(n,e);if(Tk(n))return new yk(n,e);throw new Error("Cannot figure out the data source type: "+JSON.stringify(n))}function kk(n){const e=Tx(n).filter(r=>typeof r=="string"),t=new Function("source","return { "+e.map(r=>JSON.stringify(r)).map(r=>`${r}: source[${r}]`).join(`,
`)+" };");return t.properties=e,t}function Tx(n){let e=[];do e=e.concat(Object.keys(n)),n=Object.getPrototypeOf(n);while(n&&n!==Object.prototype);return Array.from(new Set(e))}class ou extends Te{constructor(){super({type:"clone"});R(this,xs);R(this,xa,t=>t);const t=r=>{const i=Tx(r);(!E(this,xs)||!ec(i,E(this,xs)))&&(G(this,xs,i),G(this,xa,kk(r)));const s=E(this,xa);this.handle=o=>this._propagate(s(o)),this.handle(r)};this.handle=t,this.beginBatch=r=>{gm(r)&&(this.handle=t),super.beginBatch(r)}}get behavior(){return Ht}}xs=new WeakMap,xa=new WeakMap;function Fk(n){return"name"in n}class Bx extends Nr{constructor(t,r,i){super(r);R(this,ya);this.provider=i,this.params=t}get identifier(){return this.params.name}get label(){return"namedSource"}updateDynamicData(t){G(this,ya,t),this.loadSynchronously()}loadSynchronously(){const t=E(this,ya)??this.provider(this.params.name)??[];let r=i=>i;if(Array.isArray(t))t.length>0&&(r=Ex(t[0]));else throw new Error(`Named data "${this.params.name}" is not an array!`);this.reset(),this.beginBatch({type:"file"});for(const i of t)this._propagate(r(i));this.complete()}async load(){this.loadSynchronously()}}ya=new WeakMap;class kx{constructor(){R(this,xn);R(this,Zr);G(this,xn,new Set),G(this,Zr,new Set)}get dataSources(){return[...E(this,xn)]}get collectors(){return[...E(this,Zr)]}replaceDataSources(e){G(this,xn,new Set(e))}addDataSource(e){E(this,xn).add(e)}removeDataSource(e){E(this,xn).delete(e)}addCollector(e){E(this,Zr).add(e)}removeCollector(e){e.observers.clear(),E(this,Zr).delete(e)}pruneCollectorBranch(e){let t=e.parent;for(t&&t.removeChild(e);t&&t.children.length===0;){const r=t;t=r.parent,t?t.removeChild(r):r instanceof Nr&&this.removeDataSource(r)}}findNamedDataSource(e){let t;for(const r of E(this,xn).values())if(r instanceof Bx&&e==r.identifier){if(t&&t!==r)throw new Error(`Found multiple instances of named data: ${e}. Data flow optimization is broken (it's a bug).`);t=r}if(t)return{dataSource:t}}}xn=new WeakMap,Zr=new WeakMap;function Pk(n,e){const t=new Map,r=[];for(const i of n)t.set(i,{ref:i,children:[]});for(const i of t.values()){const s=t.get(e(i.ref));s?s.children.push(i):r.push(i)}return r}function Fx(n,e,t){var i,s;const r=(i=e.preOrder)==null?void 0:i.call(e,n);if(r)return r;for(const o of t(n)){const a=Fx(o,e,t);if(a==="stop")return a}return(s=e.postOrder)==null?void 0:s.call(e,n)}function Mk(n,e){return Fx(n,e,t=>t.children)}function Rk(n,e){const t=[],r=[];let i;const s=e??new kx,o=[];function a(h,p=()=>{}){if(!i)throw p()||new Error("Cannot append data flow node, no parent exist!");return i.addChild(h),i=h,t.push(h),h}function c(h,p){return a(h,()=>new Error("Cannot append a transform because no (inherited) data are available! "))}function u(h,p){for(const m of h){let g;try{g=JB(m,p)}catch(x){throw console.warn(x),new Error(`Cannot initialize "${m.type}" transform: ${x}`)}g.behavior&Rn&&c(new ou),c(g)}}function l(){return t.findLastIndex(h=>h instanceof Jl)>t.findLastIndex(h=>h instanceof Nr)}const f=h=>{var p,m;if(h.spec.data){const g=(p=h.flowHandle)==null?void 0:p.dataSource;g&&g.view===h&&!g.identifier&&s.removeDataSource(g);const x=Fk(h.spec.data)?new Bx(h.spec.data,h,h.context.getNamedDataFromProvider):bk(h.spec.data,h);i=x,t.push(x),s.addDataSource(x),h.flowHandle??(h.flowHandle={}),h.flowHandle.dataSource=x}if(h.spec.transform&&u(h.spec.transform,h),h instanceof ft){if(!i)throw new Error(`A unit view (${h.getPathString()}) has no (inherited) data source`);const g=Ok(h);if(g){o.push(g.rewrite);for(const w of g.transforms)c(w)}h.mark.isPickingParticipant()&&!l()&&(c(new ou),c(new Jl({type:"identifier"})));const x=new bx({type:"collect",groupby:h.getFacetFields(),sort:Nk(h,g==null?void 0:g.rewrittenEncoding)});a(x);const b=(m=h.flowHandle)==null?void 0:m.collector;b&&s.removeCollector(b),s.addCollector(x),h.flowHandle??(h.flowHandle={}),h.flowHandle.collector=x}},d=Pk(n.getDescendants(),h=>h.dataParent);for(const h of d)Mk(h,{preOrder:p=>{r.push({view:p.ref,nodeStackDepth:t.length}),f(p.ref)},postOrder:()=>{const{nodeStackDepth:p}=r.pop();t.length=p,i=t.at(-1)}});return o.forEach(h=>h()),s}function Ok(n){var s;const e=[],t={},r=[];for(const[o,a]of Object.entries(n.getEncoding())){const c=o;Ao(c)&&Zm(a)&&r.push({channel:c,chromPosDef:a})}const i=Ua(r,o=>Ir(o.channel),o=>o.chromPosDef.chrom);for(const[o,a]of i.entries())for(const[c,u]of a.entries()){const l=[],f=[],d=[];for(const{channel:h,chromPosDef:p}of u){const m=b=>b.replace(/[^A-Za-z0-9_]/g,""),g=["_linearized_",m(p.chrom),"_",m(p.pos)].join(""),x={...((s=n.spec.encoding)==null?void 0:s[h])??n.getEncoding()[h]??{},field:g};delete x.chrom,delete x.pos,!x.type&&p.type&&(x.type=p.type),t[h]=x,l.push(p.pos),d.push(p.offset??0),f.push(g)}e.push(new ou),e.push(new wx({type:"linearizeGenomicCoordinate",channel:o,chrom:c,pos:l,offset:d,as:f},n))}return e.length?{transforms:e,rewrittenEncoding:t,rewrite:()=>{n.spec.encoding={...n.spec.encoding,...t},oh(n.mark,"encoding")}}:void 0}function Nk(n,e){var r;const t={...n.getEncoding(),...e}.x;if(lt(t)&&(r=n.getScaleResolution("x"))!=null&&r.isZoomable()){if(Nn(t))return"buildIndex"in t&&t.buildIndex?{field:t.field}:null;if(!bo(t)){if(wo(t))throw new Error("A zoomable x channel must be mapped to a field.")}}}function Px(n,e=void 0){if(n.parent!==e)return!1;for(const t of n.children)if(!Px(t,n))return!1;return!0}function yh(n,e=!1){if(n.behavior&Kl&&(e=!0),n instanceof ou)if(e)e=!1;else{const t=n.children[0];n.excise(),t&&yh(t,e);return}n.behavior&Ht&&(e=!1);for(let t=0,r=n.children.length;t<r;t++)yh(n.children[t],e||r>1)}function Lk(n){const e=n.dataSources,t=new Map;for(const s of e)s.identifier&&!t.has(s.identifier)&&t.set(s.identifier,s);const r=new Set,i=new Map;for(const s of e)if(s.identifier){const o=t.get(s.identifier);o&&(o!==s&&o.adoptChildrenOf(s),r.add(o),i.set(s,o))}else r.add(s),i.set(s,s);return n.replaceDataSources(r),i}function zk(n){if(yh(n),!Px(n))throw new Error("Encountered a bug! There's a problem in the data flow structure.")}function Uk(n){const e=Lk(n);for(const t of n.dataSources)zk(t);return e}const bh=new WeakMap;function Gk(n){const e=bh.get(n);if(e)return e;const t=Promise.resolve().then(()=>n.load()).finally(()=>{bh.delete(n)});return bh.set(n,t),t}function Hk(n,e){for(const t of n.getDescendants()){const r=t.flowHandle;if(!r)continue;const i=r.dataSource;i&&(r.dataSource=e.get(i)??i)}}function Vk(n,e){const t=Rk(n,e),r=Uk(t);Hk(n,r);const i=n.getDescendants(),s=_k(i);for(const u of s)u.visit(l=>l.initialize());const o=i.filter(u=>u instanceof ft),a=[],c=!!n.context.glHelper;for(const u of o){const l=u.mark;l.initializeEncoders(),c&&a.push(l.initializeGraphics().then(()=>l));const f=d=>{if(l.initializeData(),c)try{l.updateGraphicsData()}catch(h){throw h.view=u,h}u.context.animator.requestRender()};u.registerDisposer(u.flowHandle.collector.observe(f))}return{dataFlow:t,unitViews:o,dataSources:s,graphicsPromises:a}}function _k(n){var r,i;const e=Array.isArray(n)?n:n.getDescendants(),t=new Set;for(const s of e){let o=s;for(;o&&!((r=o.flowHandle)!=null&&r.dataSource);)o=o.dataParent;(i=o==null?void 0:o.flowHandle)!=null&&i.dataSource&&t.add(o.flowHandle.dataSource)}return t}function jk(n){const e=new Set;return n.visit(t=>{var r;if((r=t.flowHandle)!=null&&r.dataSource)return e.add(t.flowHandle.dataSource),dx}),e}function Wk(n,e=jk(n)){return Promise.all(Array.from(e).map(t=>Gk(t))).then(t=>(ux(n),Qk(n),t))}function Qk(n){const e={type:"subtreeDataReady",payload:{subtreeRoot:n}};n.visit(t=>t.handleBroadcast(e))}function fn(n){return()=>n}const Mt=class Mt{static create(e,t,r,i){return new Mt(fn(e),fn(t),fn(r),fn(i))}_offset(e,t){const r=this["_"+e];if(t===0)return r;switch(typeof t){case"number":return()=>r()+t;case"function":return()=>r()+t();default:throw new Error("Not a number of function")}}_passThrough(e){return this._offset(e,0)}constructor(e,t,r,i){this._x=e,this._y=t,this._width=r,this._height=i}get x(){return this._x()}get y(){return this._y()}get width(){return this._width()}get height(){return this._height()}get x2(){return this._x()+this._width()}get y2(){return this._y()+this._height()}equals(e){return e?this===e||this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height:!1}modify(e){if(!Object.keys(e).length)return this;const t=r=>{const i=e[r];return typeof i=="number"?fn(i):typeof i=="function"?i:this._passThrough(r)};return new Mt(t("x"),t("y"),t("width"),t("height"))}translate(e,t){return e===0&&t===0?this:new Mt(this._offset("x",e),this._offset("y",t),this._passThrough("width"),this._passThrough("height"))}translateBy(e){return this.translate(e.x,e.y)}expand(e,t=1){return e.left==0&&e.top==0&&e.right==0&&e.bottom==0?this:new Mt(e.left?this._offset("x",-e.left*t):this._passThrough("x"),e.top?this._offset("y",-e.top*t):this._passThrough("y"),e.width?this._offset("width",e.width*t):this._passThrough("width"),e.height?this._offset("height",e.height*t):this._passThrough("height"))}shrink(e){return this.expand(e,-1)}intersect(e){return this===e||e==null?this:new Mt(()=>Math.max(this.x,e.x),()=>Math.max(this.y,e.y),()=>Math.min(this.x2,e.x2)-Math.max(this.x,e.x),()=>Math.min(this.y2,e.y2)-Math.max(this.y,e.y))}union(e){return this===e||e==null?this:new Mt(()=>Math.min(this.x,e.x),()=>Math.min(this.y,e.y),()=>Math.max(this.x2,e.x2)-Math.min(this.x,e.x),()=>Math.max(this.y2,e.y2)-Math.min(this.y,e.y))}isDefined(){return this.width>=0&&this.height>=0}flatten(){return new Mt(fn(this.x),fn(this.y),fn(this.width),fn(this.height))}containsPoint(e,t){return e>=this.x&&e<this.x2&&t>=this.y&&t<this.y2}normalizePoint(e,t,r=!1){const i={x:(e-this.x)/this.width,y:(t-this.y)/this.height};return r&&(i.y=1-i.y),i}denormalizePoint(e,t,r=!1){return r&&(t=1-t),{x:this.x+e*this.width,y:this.y+t*this.height}}toString(){return`Rectangle: x: ${this.x}, y: ${this.y}, width: ${this.width}, height: ${this.height}`}toRoundedString(){return`Rectangle: x: ${Math.round(this.x)}, y: ${Math.round(this.y)}, width: ${Math.round(this.width)}, height: ${Math.round(this.height)}`}};Y(Mt,"ZERO",Mt.create(0,0,0,0));let Ft=Mt;class Mx{constructor(e){this.globalOptions=e}pushView(e,t){}popView(e){}renderMark(e,t){}getDevicePixelRatio(){return 1}}class wh extends Mx{constructor(t,r){super(t);R(this,Tu);R(this,ba,[0,0,0,0]);R(this,Rt);R(this,wa,[]);R(this,ys);R(this,Aa);R(this,va,new Set);R(this,Sa);R(this,bs,1);R(this,Ea,{width:0,height:0});if(G(this,Aa,r.webGLHelper),G(this,ys,r.framebufferInfo),G(this,bs,r.devicePixelRatio),G(this,Ea,r.canvasSize),r.clearColor){const i=Gn(r.clearColor).rgb();G(this,ba,[i.r/255,i.g/255,i.b/255,i.opacity])}}getDevicePixelRatio(){return E(this,bs)}pushView(t,r){E(this,va).add(t),G(this,Sa,r)}renderMark(t,r){if(this.globalOptions.picking&&!t.isPickingParticipant())return;const i=t.render(r);i&&E(this,wa).push({mark:t,callback:i,coords:E(this,Sa),clipRect:r.clipRect})}render(){if(E(this,Rt)||O(this,Tu,Lw).call(this),E(this,Rt).length==0)return;const t=E(this,Aa).gl,r=E(this,ys);r?(t.bindFramebuffer(t.FRAMEBUFFER,r.framebuffer),t.viewport(0,0,r.width,r.height)):t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),t.disable(t.SCISSOR_TEST),t.clearColor(...E(this,ba)),t.clear(t.COLOR_BUFFER_BIT);for(const i of E(this,va))i.onBeforeRender();for(const i of E(this,Rt))i();E(this,ys)&&t.bindFramebuffer(t.FRAMEBUFFER,null)}}ba=new WeakMap,Rt=new WeakMap,wa=new WeakMap,ys=new WeakMap,Aa=new WeakMap,va=new WeakMap,Sa=new WeakMap,bs=new WeakMap,Ea=new WeakMap,Tu=new WeakSet,Lw=function(){G(this,Rt,[]);let t=!0,r=!0;const i=a=>()=>{t&&a()},s=a=>()=>{t&&r&&a()},o=Ua(E(this,wa).reverse(),a=>a.mark);for(const[a,c]of[...o.entries()].reverse()){if(!a.isReady())continue;E(this,Rt).push(()=>{t=a.unitView.getEffectiveOpacity()>0}),E(this,Rt).push(...a.prepareRender(this.globalOptions).map(l=>i(l)));let u;for(const l of c){const f=l.coords;f.equals(u)||E(this,Rt).push(i(()=>{r=a.setViewport(E(this,Ea),E(this,bs),f,l.clipRect)})),E(this,Rt).push(s(l.callback)),u=l.coords}}};class qk extends Mx{constructor(...e){super({}),this.contexts=e}pushView(e,t){for(const r of this.contexts)r.pushView(e,t)}popView(e){for(const t of this.contexts)t.popView(e)}renderMark(e,t){for(const r of this.contexts)r.renderMark(e,t)}}class Yk{constructor(e,t){R(this,ws);this.point=e,this.uiEvent=t,this.stopped=!1,this.target=void 0}stopPropagation(){this.stopped=!0}get type(){return this.uiEvent.type}get proxiedMouseEvent(){return E(this,ws)||G(this,ws,Xk(this.mouseEvent)),E(this,ws)}get mouseEvent(){if(this.uiEvent instanceof MouseEvent)return this.uiEvent;throw new Error("Not a MouseEvent!")}}ws=new WeakMap;function Xk(n){const e=r=>r===null||typeof r!="object"&&typeof r!="function",t={get(r,i,s){const o=Reflect.get(r,i,r);if(!e(o))throw new Error(`Access to non-primitive property "${String(i)}" is not allowed.`);return o},getPrototypeOf(){return null},ownKeys(r){return Reflect.ownKeys(r).filter(s=>e(r[s])).map(s=>typeof s=="symbol"?s:String(s))},getOwnPropertyDescriptor(r,i){const s=Reflect.getOwnPropertyDescriptor(r,i);if(s&&!("get"in s||"set"in s)&&e(s.value))return{value:s.value,writable:!!s.writable,enumerable:!!s.enumerable,configurable:!!s.configurable}},has(r,i){return i in r?e(r[i]):!1}};return new Proxy(n,t)}class at{static fromMouseEvent(e){return new at(e.clientX,e.clientY)}constructor(e,t){this.x=e,this.y=t}subtract(e){return new at(this.x-e.x,this.y-e.y)}add(e){return new at(this.x-e.x,this.y-e.y)}multiply(e){return new at(this.x*e,this.y*e)}get length(){return Math.sqrt(this.x**2+this.y**2)}equals(e){return e?e===this||e.x===this.x&&e.y===this.y:!1}}const Kk=n=>new Promise(e=>setTimeout(e,n));function Zk(n){const e=n.requestAnimationFrame||window.requestAnimationFrame,t=n.signal,r=()=>new Promise((i,s)=>{if(t!=null&&t.aborted)return s("aborted");const o=performance.now(),a=o+(n.duration||1e3),c=typeof n.from=="number"?n.from:0,u=typeof n.to=="number"?n.to:1,l=n.easingFunction||(m=>m),f=m=>(m-o)/(a-o),d=m=>m*(u-c)+c,h=m=>Math.max(0,Math.min(1,m)),p=m=>{t!=null&&t.aborted?s("aborted"):(n.onUpdate(d(l(h(f(m))))),m<a?e(p):(n.onUpdate(d(l(1))),i()))};e(p)});return n.delay?t!=null&&t.aborted?Promise.reject("aborted"):Kk(n.delay).then(r):r()}class Jk{constructor(e){this._renderCallback=e,this._renderRequested=!1,this._warn=!1,this.transitions=[]}requestTransition(e){this.cancelTransition(e),this.transitions.push(e),this.requestRender()}cancelTransition(e){const t=this.transitions.indexOf(e);t>=0&&this.transitions.splice(t,1)}requestRender(){this._renderRequested?this._warn&&console.warn("Render already requested!"):(this._renderRequested=!0,window.requestAnimationFrame(e=>{this._renderRequested=!1;const t=this.transitions;this.transitions=[];let r;for(;r=t.shift();)r(e);this._renderCallback(e)}))}transition(e){return Zk({requestAnimationFrame:t=>this.requestTransition(t),...e})}}function Ah(n,e,t,r,i){let s=0,o=!0,a=structuredClone(i),c=a;function u(d,h,p,m){return h+(d-h)*Math.pow(2,-p/m)}function l(d){if(o)return;const h=d-s;s=d;for(const m of Object.keys(c))a[m]=u(a[m],c[m],h,t);e(a);let p=-1/0;for(const m of Object.keys(c))p=Math.max(p,Math.abs(c[m]-a[m]));p<r?(a=c,e(a),o=!0,p!=0&&n.requestRender()):n.requestTransition(m=>l(m))}function f(d){c=d,o&&(o=!1,s=+document.timeline.currentTime,l(s))}return f.stop=()=>{o=!0},f}class $k{constructor(e){this.genomes=new Map,this.baseUrl=e}async initialize(e){const t=new eB(e);return this.genomes.set(t.name,t),Promise.all([...this.genomes.values()].map(r=>r.load(this.baseUrl)))}getGenome(e){if(!this.genomes.size)throw new Error("No genomes have been configured!");if(e){const t=this.genomes.get(e);if(!t)throw new Error(`No genome with the name ${e} has been configured!`);return t}else{if(this.genomes.size>1)throw new Error("Cannot pick a default genome! More than one have been configured!");return this.genomes.values().next().value}}}const e6="data:image/png;base64,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",t6={thin:100,light:300,regular:400,normal:400,medium:500,bold:700,black:900};class n6{constructor(e){this._webGLHelper=e,this.fontRepository="https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/",this._fonts=new tn([],JSON.stringify),this._metadataPromises=new Map,this._fontPromises=new Map,this._promises=[],this._defaultFontEntry={metrics:Xl(Ax),texture:e?this._createTextureNow(e6):void 0}}async waitUntilReady(){await Promise.all(this._promises)}getFont(e,t="normal",r="regular"){if(me(r)&&(r=t6[r.toLowerCase()],!r))throw new Error("Unknown font weight: "+r);const i={family:e,style:t,weight:r};let s=this._fonts.get(i);return s||(s={metrics:void 0,texture:void 0},this._fonts.set(i,s),this._promises.push(this._loadFontEntry(s,i))),s}async _loadFontEntry(e,t){try{const r=await this._loadMetadata(t.family),i=i6(r,t),s=this.fontRepository+Rx(t.family)+"/"+i.replace(/\.\w+/,""),o=this._createTexture(s+".png"),a=this._loadFont(s+".json");e.texture=await o,e.metrics=await a}catch{console.warn(`Cannot load font: "${t.family}". Using the embedded default font.`),e.metrics=this._defaultFontEntry.metrics,e.texture=this._defaultFontEntry.texture}}_loadFont(e){let t=this._fontPromises.get(e);return t||(t=fetch(e).then(r=>{if(!r.ok)throw new Error("Could not load font: "+r.status);return r}).then(r=>r.json()).then(r=>Xl(r)),this._fontPromises.set(e,t)),t}_loadMetadata(e){const t=Rx(e);let r=this._metadataPromises.get(t);if(!r){const i=this.fontRepository+t+"/METADATA.pb";r=fetch(i).then(s=>{if(!s.ok)throw new Error("Could not load font metadata. Response status: "+s.status+", url: "+i);return s}).then(s=>s.text()).then(s=>r6(s)).catch(s=>{console.warn(s.message)}),this._metadataPromises.set(t,r)}return r}getDefaultFont(){return this._defaultFontEntry}_createTexture(e){const t=this._webGLHelper.gl;return new Promise((r,i)=>{ao(t,{src:e,min:t.LINEAR},(s,o,a)=>{s?i(s):r(o)})})}_createTextureNow(e){const t=this._webGLHelper.gl;let r;const i=new Promise((s,o)=>{r=ao(t,{src:e,min:t.LINEAR},(a,c,u)=>{a?o(a):s(c)})});return this._promises.push(i),r}}function Rx(n){return n.toLowerCase().replaceAll(/[^\w]/g,"")}function r6(n){const e=n.split(`
`),t=[];let r;for(const i of e)if(i.startsWith("fonts {")&&(r={name:void 0,style:void 0,weight:void 0,filename:void 0,post_script_name:void 0,full_name:void 0,copyright:void 0}),i.startsWith("}")&&(t.push(r),r=void 0),r){let s=i.match(/^\s*([A-Za-z_]+):[ ]?"(.*)"$/);if(s){const o=s[1];r[o]=s[2]}if(s=i.match(/^\s*([A-Za-z_]+):[ ]?(\d+)$/),s){const o=s[1];r[o]=+s[2]}}return t}function i6(n,e){let t,r=Number.POSITIVE_INFINITY;for(const i of n)if(e.family.localeCompare(i.name,void 0,{sensitivity:"accent"})==0&&e.style==i.style){const s=Math.abs(e.weight-i.weight);s<r&&(r=s,t=i)}return t==null?void 0:t.filename}function s6(n,e){const t=[];let r;for(const i of n.split(`
`))if(i.startsWith(">"))r={identifier:i.match(/>(\S+)/)[1],sequence:""},t.push(r);else if(r)r.sequence+=i.trim();else throw new Error("Invalid fasta file!");return t}class o6{constructor(e,t){this.animator=e,this.disabled=!!t,this.maxDistance=500,this.callback=null,this.targetValue=0,this.lastValue=0,this.smoother=Ah(e,r=>{var s;const i=r.x-this.lastValue;this.lastValue=r.x,(s=this.callback)==null||s.call(this,i)},40,.1,{x:0})}cancel(){this.lastValue!==this.targetValue&&(this.targetValue=Gd([this.lastValue,this.targetValue],.3),this.smoother({x:this.targetValue}))}setMomentum(e,t){if(this.disabled){t(e);return}this.callback=t;const r=vi(this.targetValue+e-this.lastValue,-this.maxDistance,this.maxDistance);this.targetValue=this.lastValue+r,this.smoother({x:this.targetValue})}}function a6(n){const e={},t=["string","number","boolean"],r=["wheelDelta","wheelDeltaX","wheelDeltaY"];for(const i in n){const s=i;!r.includes(i)&&t.includes(typeof n[s])&&(e[s]=n[s])}return e}const Ox=new Map,c6={Organism:"Homo sapiens"};async function u6(n,e,t={}){const r=n.symbol,i={...c6,...t,GENE:r};let s=Ox.get(r)??await h6(i);return s?(Ox.set(r,s),ge`
            <div class="title">
                <strong>${s.name}</strong>
                ${s.description}
            </div>
            <p class="summary">${s.summary}</p>
            <p class="source">Source: NCBI RefSeq Gene</p>
        `):null}async function l6(n){const e={mode:"cors"},t=new URL("https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi");t.search=new URLSearchParams({db:"gene",term:d6(n),sort:"relevance",retmax:"1",retmode:"json"}).toString();const i=(await fetch(t.toString(),e).then(s=>s.json())).esearchresult.idlist[0];if(i){const s=new URL("https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi");return s.search=new URLSearchParams({db:"gene",id:i,retmode:"json"}).toString(),(await fetch(s.toString(),e).then(c=>c.json())).result[i]}else return null}const f6=su(l6,500);function h6(n){return f6(n)}function d6(n){return Object.entries(n).filter(([e,t])=>t&&t.length>0).map(([e,t])=>`("${t}"[${e}])`).join(" AND ")}const p6=Le(".4~r"),m6=Le(".4~e");function Nx(n){return n==null?ge` <span class="na">NA</span> `:me(n)?n.substring(0,30):Number.isInteger(n)?""+n:Ke(n)?Math.abs(n)>Math.pow(10,8)||Math.abs(n)<Math.pow(10,-8)?m6(n):p6(n):Is(n)?n?"True":"False":Ue(n)?ge`${n.map((e,t)=>[Nx(e),t<n.length-1?", ":ve])}`:"?"+typeof n+" "+n}async function g6(n,e,t){const r=(u,l)=>{var f;for(const[d,h]of Object.entries(e.encoders))if((f=h==null?void 0:h.dataAccessor)!=null&&f.fields.includes(u))switch(d){case"color":case"fill":case"stroke":return ge`
                            <span
                                class="color-legend"
                                style=${`background-color: ${h(l)}`}
                            ></span>
                        `}return""},i=(u,l)=>{const f=u.filter(([d,h])=>!d.startsWith("_"));if(f.length!==0)return f.map(([d,h])=>h!==null&&typeof h=="object"&&!Array.isArray(h)?ge`${i(Object.entries(h),(l||"")+d+".")}`:ge`
                      <tr>
                          <th>${l}${d}</th>
                          <td>${Nx(h)} ${r(d,n)}</td>
                      </tr>
                  `)},s=i(Object.entries(n));if(!s)return;const o=ge`
        <table class="attributes">
            ${s}
        </table>
    `,a=e.unitView.getTitleText(),c=a?ge`
              <div class="title">
                  <strong>${a}</strong>
              </div>
          `:"";return ge`${c}${o}`}class _o extends mx{constructor(e,t,r,i,s,o){super(e,t,r,i,s,o),this.spec=e}async initializeChildren(){}*[Symbol.iterator](){}replaceChild(e,t){throw new Error("Not implemented")}visit(e){let t;try{t=e(this)}catch(r){throw r.view=this,r}if(t===Ho)return t;if(t!==dx){e.beforeChildren&&e.beforeChildren(this);for(const r of this){const i=r.visit(e);if(i===Ho)return i}e.afterChildren&&e.afterChildren(this),e.postOrder&&e.postOrder(this)}}findDescendantByPath(e){for(const t of this)if(t.name===e[0]){if(e.length==1)return t;if(t instanceof _o)return t.findDescendantByPath(e.slice(1))}}findChildByName(e){for(const t of this)if(t.name===e)return t}findDescendantByName(e){let t;return this.visit(r=>{if(r.name==e)return t=r,Ho}),t}getDefaultResolution(e,t){return"shared"}}class Ri extends _o{constructor(t,r,i,s,o,a){super(t,r,i,s,o,{layersChildren:!0,...a});R(this,yn,[]);this.spec=t,this.needsAxes={x:!0,y:!0}}async initializeChildren(){G(this,yn,await Promise.all(this.spec.layer.map((t,r)=>this.context.createOrImportView(t,this,this,"grid"+r,i=>{if(!Ih(i)&&!Dh(i))throw new Wn("LayerView accepts only unit or layer specs as children!",this)}))))}get children(){return E(this,yn).slice()}*[Symbol.iterator](){for(const t of E(this,yn))yield t}render(t,r,i={}){if(super.render(t,r,i),!!this.isConfiguredVisible()){t.pushView(this,r);for(const s of E(this,yn))s.render(t,r,i);t.popView(this)}}propagateInteractionEvent(t){this.handleInteractionEvent(void 0,t,!0);for(let r=E(this,yn).length-1;r>=0;r--)if(E(this,yn)[r].propagateInteractionEvent(t),t.stopped)return;this.handleInteractionEvent(void 0,t,!1)}}yn=new WeakMap;class Lx{constructor(e,t){this.n=e,this.maxCols=t??1/0}get nRows(){return this.maxCols==1/0?1:Math.ceil(this.n/this.maxCols)}get nCols(){return Math.min(this.n,this.maxCols)}get rowIndices(){const e=[],t=this.nCols,r=this.nRows;for(let i=0;i<r;i++){const s=[];e.push(s);for(let o=0;o<t;o++){const a=i*t+o;a<this.n&&s.push(a)}}return e}get colIndices(){const e=[],t=this.nCols,r=this.nRows;for(let i=0;i<t;i++){const s=[];e.push(s);for(let o=0;o<r;o++){const a=o*t+i;a<this.n&&s.push(a)}}return e}getCellIndex(e,t){let r=0;if(this.maxCols==1/0)r=t==0?e:void 0;else{if(e>=this.maxCols)return;r=t*this.nCols+e}return r<this.n?r:void 0}getCellCoords(e){if(!(e<0||e>=this.n))return[e%this.nCols,Math.floor(e/this.nCols)]}}const x6="chromosome_ticks_and_labels",y6={x:"width",y:"height"};function vh(n){return n=="x"?"y":"x"}const au={x:["bottom","top"],y:["left","right"]},Sh=Object.fromEntries(Object.entries(au).map(([n,e])=>e.map(t=>[t,n])).flat(1));function qn(n){return Sh[n]}class zx extends Ri{constructor(e,t,r,i,s,o){const a=t=="locus",c={...a?w6:Ux,...b6(t,e),...e};super(a?A6(c,t):Gx(c,t),r,i,s,`axis_${e.orient}`,{blockEncodingInheritance:!0,contributesToScaleDomain:!1,...o}),this.axisProps=c}getSize(){const e={px:this.getPerpendicularSize()},t={grow:1};return Sh[this.axisProps.orient]=="x"?new Qn(t,e):new Qn(e,t)}getPerpendicularSize(){return Eh(this.axisProps)}isPickingSupported(){return!1}}function Eh(n){const e=qn(n.orient);let t=n.ticks&&n.tickSize||0;return n.labels&&(t+=n.labelPadding,e=="x"?t+=n.labelFontSize:t+=30),n.title&&(t+=n.titlePadding+n.titleFontSize),t=Math.min(n.maxExtent||1/0,Math.max(n.minExtent||0,t)),t}const Ux={values:null,minExtent:20,maxExtent:1/0,offset:0,domain:!0,domainWidth:1,domainColor:"gray",domainDash:null,domainDashOffset:0,domainCap:"square",ticks:!0,tickSize:5,tickWidth:1,tickColor:"gray",tickDash:null,tickDashOffset:0,tickCap:"square",tickCount:null,tickMinStep:null,labels:!0,labelAlign:"center",labelBaseline:"middle",labelPadding:4,labelFontSize:10,labelLimit:180,labelColor:"black",format:null,titleColor:"black",titleFont:"sans-serif",titleFontSize:10,titlePadding:3};function b6(n,e){const t=e.orient,r=n=="nominal"||n=="ordinal";let i="center",s="middle",o=e.labelAngle??((t=="top"||t=="bottom")&&r?-90:0);switch(t){case"left":i="right";break;case"right":i="left";break;case"top":case"bottom":Math.abs(o)>30?(i=o>0==(t=="bottom")?"left":"right",s="middle"):s=t=="top"?"alphabetic":"top";break}return{labelAlign:i,labelAngle:o,labelBaseline:s}}function Gx(n,e){const t={...n,extent:Eh(n)},r=qn(t.orient),i=vh(r),s=t.orient=="bottom"||t.orient=="right"?1:-1,o=t.orient=="bottom"||t.orient=="left"?1:0,a=()=>({name:"domain",data:{values:[{}]},mark:{type:"rule",clip:!1,strokeDash:t.domainDash,strokeCap:t.domainCap,color:t.domainColor,[i]:o,size:t.domainWidth}}),c=()=>({name:"labels",mark:{type:"text",clip:!1,align:t.labelAlign,angle:t.labelAngle,baseline:t.labelBaseline,[i+"Offset"]:(t.tickSize+t.labelPadding)*s,[i]:o,size:t.labelFontSize,color:t.labelColor,minBufferSize:1500},encoding:{[r]:{field:"value",type:e},text:{field:"label"}}}),u=()=>({name:"ticks",mark:{type:"rule",clip:!1,strokeDash:t.tickDash,strokeCap:t.tickCap,color:t.tickColor,size:t.tickWidth,minBufferSize:300},encoding:{[i]:{value:o},[i+"2"]:{value:o-t.tickSize/t.extent*(o?1:-1)}}}),l=()=>({name:"title",data:{values:[{}]},mark:{type:"text",clip:!1,align:"center",baseline:t.orient=="bottom"?"bottom":"top",angle:[0,90,0,-90][["top","right","bottom","left"].indexOf(t.orient)],text:t.title,color:t.titleColor,[r]:.5,[i]:1-o}}),f=()=>{const h={name:"ticks_and_labels",encoding:{[r]:{field:"value",type:e}},layer:[]};return t.ticks&&h.layer.push(u()),t.labels&&h.layer.push(c()),h},d={resolve:{scale:{[r]:"forced"}},[y6[vh(r)]]:t.extent,data:{lazy:{type:"axisTicks",channel:r,axis:n}},layer:[]};return t.domain&&d.layer.push(a()),(t.ticks||t.labels)&&d.layer.push(f()),t.title&&d.layer.push(l()),d}const w6={...Ux,chromTicks:!0,chromTickSize:18,chromTickWidth:1,chromTickColor:"#989898",chromTickDash:[4,2],chromTickDashOffset:1,chromLabels:!0,chromLabelFontSize:13,chromLabelFontWeight:"normal",chromLabelFontStyle:"normal",chromLabelColor:"black",chromLabelAlign:"left",chromLabelPadding:7};function A6(n,e){const t={...n,extent:Eh(n)},r=qn(t.orient),i=vh(r),s=t.orient=="bottom"||t.orient=="left"?1:0,o=()=>({name:"chromosome_ticks",mark:{type:"rule",strokeDash:n.chromTickDash,strokeDashOffset:n.chromTickDashOffset,[i]:s,[i+"2"]:s-t.chromTickSize/t.extent*(s?1:-1),color:n.chromTickColor,size:t.chromTickWidth}}),a=()=>{let l;switch(t.orient){case"top":l={y:0,angle:0,paddingX:4,dy:-t.chromLabelPadding,viewportEdgeFadeWidthLeft:20,viewportEdgeFadeWidthRight:20,viewportEdgeFadeDistanceRight:-10,viewportEdgeFadeDistanceLeft:-20};break;case"bottom":l={y:1,angle:0,paddingX:4,dy:t.chromLabelPadding+t.chromLabelFontSize*.73,viewportEdgeFadeWidthLeft:20,viewportEdgeFadeWidthRight:20,viewportEdgeFadeDistanceRight:-10,viewportEdgeFadeDistanceLeft:-20};break;case"left":l={x:1,angle:-90,paddingY:4,dy:-t.chromLabelPadding,viewportEdgeFadeWidthBottom:20,viewportEdgeFadeWidthTop:20,viewportEdgeFadeDistanceBottom:-20,viewportEdgeFadeDistanceTop:-10};break;case"right":l={x:0,angle:90,align:"right",paddingY:4,dy:-t.chromLabelPadding};break;default:l={}}return{name:"chromosome_labels",mark:{type:"text",size:t.chromLabelFontSize,font:t.chromLabelFont,fontWeight:t.chromLabelFontWeight,fontStyle:t.chromLabelFontStyle,color:t.chromLabelColor,align:n.chromLabelAlign,baseline:"alphabetic",clip:!1,...l},encoding:{[r+"2"]:{field:"continuousEnd",type:e},text:{field:"name"}}}};let c;switch(t.orient){case"bottom":case"top":c={};break;case"left":c={labelAngle:-90,labelAlign:"center",labelPadding:6};break;case"right":c={labelAngle:90,labelAlign:"center",labelPadding:6};break;default:c={}}const u=Gx({...n,...c},e);if(n.chromTicks||n.chromLabels){const l={name:x6,data:{lazy:{type:"axisGenome",channel:qn(t.orient)}},encoding:{[r]:{field:"continuousStart",type:e,band:0}},layer:[]};if(n.chromTicks&&l.layer.push(o()),n.chromLabels){l.layer.push(a());let f;u.layer.filter(d=>d.name=="ticks_and_labels").forEach(d=>d.layer.filter(h=>h.name=="labels").forEach(h=>{f=h.mark})),f&&(t.orient=="top"||t.orient=="bottom"?(f.viewportEdgeFadeWidthLeft=30,f.viewportEdgeFadeDistanceLeft=40):(f.viewportEdgeFadeWidthBottom=30,f.viewportEdgeFadeDistanceBottom=40))}u.layer.push(l)}return u}class v6{constructor(e){R(this,Jr);R(this,er,0);R(this,tr,0);G(this,Jr,new Array(e))}push(e){E(this,Jr)[E(this,er)]=e,G(this,er,(E(this,er)+1)%this.size),G(this,tr,Math.min(E(this,tr)+1,this.size))}get(){const e=E(this,Jr);return E(this,tr)<this.size?e.slice(0,E(this,tr)):e.slice(E(this,er),this.size).concat(e.slice(0,E(this,er)))}get size(){return E(this,Jr).length}get length(){return E(this,tr)}}Jr=new WeakMap,er=new WeakMap,tr=new WeakMap;let Lr,Hx=0;function Vx(){return performance.now()-Hx<50}function S6(n){return function(...e){Hx=performance.now(),n(...e)}}function E6(n,e,t,r,i){if(t=S6(t),n.type=="wheel"){n.uiEvent.preventDefault();const s=n.uiEvent,o=s.deltaMode?120:1;if(!s.deltaX&&!s.deltaY)return;Lr==null||Lr.stop();let{x:a,y:c}=n.point;if(r){const u=r.mark.encoders;u.x&&!u.x2&&!u.x.constant&&(a=+u.x(r.datum)*e.width+e.x),u.y&&!u.y2&&!u.y.constant&&(c=(1-+u.y(r.datum))*e.height+e.y)}Math.abs(s.deltaX)<Math.abs(s.deltaY)?t({x:a,y:c,xDelta:0,yDelta:0,zDelta:s.deltaY*o/300}):t({x:a,y:c,xDelta:-s.deltaX*o,yDelta:0,zDelta:0})}else if(n.type=="mousedown"&&n.mouseEvent.button===0){Lr&&Lr.stop();const s=new v6(30),o=n.mouseEvent;o.preventDefault();let a=at.fromMouseEvent(o);const c=f=>{const d=at.fromMouseEvent(f);s.push({point:d,timestamp:performance.now()});const h=d.subtract(a);t({x:a.x,y:a.y,xDelta:h.x,yDelta:h.y,zDelta:0}),a=d},u=()=>{const d=performance.now(),h=s.get().filter(w=>d-w.timestamp<160);if(h.length<5||!i||C6(h))return;const p=h.at(-1),m=h[0],g=p.point.subtract(m.point).multiply(1/(p.timestamp-m.timestamp));let x=a.x,b=a.y;Lr=Ah(i,w=>{t({x:w.x,y:w.y,xDelta:x-w.x,yDelta:b-w.y,zDelta:0}),x=w.x,b=w.y},150,.5,{x,y:b}),Lr({x:a.x-g.x*250,y:a.y-g.y*250})},l=()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",l),u()};document.addEventListener("mouseup",l,!1),document.addEventListener("mousemove",c,!1)}}function C6(n){const e=n[Math.floor(n.length/2)],t=e.point.subtract(n[0].point).multiply(e.timestamp-n[0].timestamp),r=n.at(-1).point.subtract(e.point).multiply(n.at(-1).timestamp-e.timestamp),i=t.length;return r.length/i<.4}class D6 extends Ri{constructor(e,t,r,i,s,o){const c={...t=="locus"?I6:_x,...e};super(F6(c,t),r,i,s,`axisGrid_${e.orient}`,{blockEncodingInheritance:!0,contributesToScaleDomain:!1,...o}),this.axisProps=c}getOrient(){return this.axisProps.orient}isPickingSupported(){return!1}}const _x={values:null,grid:!1,gridCap:"butt",gridColor:"lightgray",gridDash:null,gridOpacity:1,gridWidth:1,tickCount:null,tickMinStep:null},I6={..._x,chromGrid:!1,chromGridCap:"butt",chromGridColor:"gray",chromGridDash:[1,5],chromGridOpacity:1,chromGridWidth:1};function T6(n,e){const t=n,r=qn(t.orient);return{name:"grid_lines",data:{lazy:{type:"axisTicks",channel:r,axis:n}},mark:{type:"rule",strokeDash:t.gridDash,strokeCap:t.gridCap,color:t.gridColor,size:t.gridWidth,opacity:t.gridOpacity,minBufferSize:300},encoding:{[r]:{field:"value",type:e}}}}function B6(n,e){const t=n,r=qn(t.orient);return{name:"chromosome_lines",data:{lazy:{type:"axisGenome",channel:r}},mark:{type:"rule",strokeDash:t.chromGridDash,strokeCap:t.chromGridCap,color:t.chromGridColor,size:t.chromGridWidth,opacity:t.chromGridOpacity},encoding:{[r]:{field:"continuousStart",type:e,band:0}}}}function k6(n,e){const t=n,r=qn(t.orient);return{name:"chromosome_fill",data:{lazy:{type:"axisGenome",channel:r}},mark:{type:"rect"},encoding:{[r]:{field:"continuousStart",type:e,band:0},[r+"2"]:{field:"continuousEnd",band:0},fill:{field:"odd",type:"nominal",scale:{domain:[!1,!0],range:[t.chromGridFillEven??"white",t.chromGridFillOdd??"white"]}},opacity:{field:"odd",type:"nominal",scale:{type:"ordinal",domain:[!1,!0],range:[t.chromGridFillEven?1:0,t.chromGridFillOdd?1:0]}}}}}function F6(n,e){const t={...n},r=[];return t.chromGrid&&(t.chromGridFillOdd||t.chromGridFillEven)&&r.push(k6(t,e)),t.chromGrid&&t.chromGridOpacity>0&&r.push(B6(t,e)),t.grid&&t.gridOpacity>0&&r.push(T6(t,e)),{name:"grid_layers",configurableVisibility:!1,resolve:{scale:{[qn(n.orient)]:"forced",fill:"independent",opacity:"independent"}},layer:r}}const jx={anchor:"middle",frame:"group",offset:10,orient:"top",align:void 0,angle:0,baseline:"alphabetic",dx:0,dy:0,color:void 0,font:void 0,fontSize:12,fontStyle:"normal",fontWeight:"normal"},P6={orient:"left",anchor:"middle",align:"right",baseline:"middle",angle:0,fontSize:12},M6={orient:"top",anchor:"start",align:"left",baseline:"top",offset:-10,dx:10,fontSize:12},R6={start:0,middle:.5,end:1},O6={start:"left",middle:"center",end:"right"};function N6(n){if(!n)return;const e=me(n)?{text:n}:n;if(!e.text||e.orient=="none")return;const t={"track-title":P6,overlay:M6}[e.style]??{},r={...jx,...t,...e};let i={},s={x:0,y:0};const o=R6[r.anchor??"middle"];switch(r.orient){case"top":s={x:o,y:1},i={baseline:"alphabetic",angle:0};break;case"right":s={x:1,y:1-o},i={baseline:"alphabetic",angle:90};break;case"bottom":s={x:o,y:0},i={baseline:"top",angle:0};break;case"left":s={x:0,y:o},i={baseline:"alphabetic",angle:-90};break}const a={...jx,...i,...t,...e},c={xOffset:0,yOffset:0};switch(r.orient){case"top":c.yOffset=-a.offset;break;case"right":c.xOffset=a.offset;break;case"bottom":c.yOffset=a.offset;break;case"left":c.xOffset=-a.offset;break}return{configurableVisibility:!1,data:{values:[{}]},mark:{type:"text",tooltip:null,clip:!1,...s,...c,text:a.text,align:a.align??O6[a.anchor],angle:a.angle,baseline:a.baseline,dx:a.dx,dy:a.dy,color:a.color,font:a.font,size:a.fontSize,fontStyle:a.fontStyle,fontWeight:a.fontWeight}}}class Wx extends ft{constructor(t,r){const i={scrollbarSize:8,scrollbarPadding:2};super({data:{values:[{}]},mark:{type:"rect",fill:"#b0b0b0",fillOpacity:.6,stroke:"white",strokeWidth:1,strokeOpacity:1,cornerRadius:5,clip:!1},configurableVisibility:!1},t.layoutParent.context,t.layoutParent,t.view,"scrollbar-"+r,{blockEncodingInheritance:!0});R(this,As);R(this,Ca,Ft.ZERO);R(this,nr,0);R(this,$r,0);Y(this,"viewportOffset",0);this.config=i,G(this,As,r),this.interpolateViewportOffset=Ah(this.context.animator,s=>{this.viewportOffset=s.x},50,.4,{x:this.viewportOffset}),this.addInteractionEventListener("mousedown",(s,o)=>{if(o.stopPropagation(),E(this,nr)<=0)return;const a=d=>r=="vertical"?d.clientY:d.clientX;o.mouseEvent.preventDefault();const c=this.scrollOffset,u=a(o.mouseEvent),l=d=>{const h=vi(a(d)-u+c,0,E(this,nr));this.interpolateViewportOffset({x:h/E(this,nr)*E(this,$r)})},f=()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",f)};document.addEventListener("mouseup",f,!1),document.addEventListener("mousemove",l,!1)})}get scrollOffset(){return this.viewportOffset/E(this,$r)*E(this,nr)}render(t,r,i){super.render(t,E(this,Ca),i)}updateScrollbar(t,r){const i=this.config.scrollbarPadding,s=this.config.scrollbarSize,o=E(this,As)=="horizontal"?"width":"height",a=Math.min(1,t[o]/r[o]),c=t[o]-2*i,u=a*c;G(this,nr,c-u),G(this,$r,r[o]-t[o]),this.viewportOffset=vi(this.viewportOffset,0,E(this,$r)),G(this,Ca,E(this,As)=="vertical"?new Ft(()=>t.x+t.width-s-i,()=>t.y+i+this.scrollOffset,()=>s,()=>u):new Ft(()=>t.x+i+this.scrollOffset,()=>t.y+t.height-s-i,()=>u,()=>s))}}As=new WeakMap,Ca=new WeakMap,nr=new WeakMap,$r=new WeakMap;class L6 extends Ri{constructor(t,r,i={}){const s=r(),o=Object.keys(s.intervals);if(Dr.every(l=>!o.includes(l)))throw new Error("SelectionRect requires at least one of the channels 'x' or 'y' to be present in the selection.");const a={name:"selectionRect",configurableVisibility:!1,resolve:{scale:{x:"forced",y:"forced"}},data:{values:Qx(r())},encoding:{},layer:[]};o.includes("x")&&(a.encoding.x={field:"_x",type:null,title:null},a.encoding.x2={field:"_x2"}),o.includes("y")&&(a.encoding.y={field:"_y",type:null,title:null},a.encoding.y2={field:"_y2"}),a.layer.push({name:"selectionRectRect",mark:{type:"rect",clip:!0,fill:"#808080",fillOpacity:.05,stroke:"black",strokeWidth:1,strokeOpacity:.2,...i}});const c=l=>{const f=t.view.getScaleResolution(l);return`format(datum._${l}2 - datum._${l}, '.3s')`+(f.type==="locus"?" + 'b'":"")},u=i.measure=="inside"?9:i.measure=="outside"?-9:0;o.includes("x")&&u!=0&&a.layer.push({name:"selectionRectTextX",mark:{type:"text",align:"center",paddingX:5,dy:u,tooltip:null},encoding:{text:{expr:c("x")},y:o.includes("y")?{field:"_y2",type:null,title:null}:{value:1},y2:null}}),o.includes("y")&&u!=0&&a.layer.push({name:"selectionRectTextY",mark:{type:"text",align:"center",paddingY:5,dy:u,tooltip:null,angle:-90},encoding:{text:{expr:c("y")},x2:null}});super(a,t.layoutParent.context,t.layoutParent,t.view,"selectionRect",{blockEncodingInheritance:!0,contributesToScaleDomain:!1});Y(this,"_selectionExpr");Y(this,"_selectionListener");this._selectionExpr=r,this._selectionListener=()=>{var d;const l=r(),f=(d=this.flowHandle)==null?void 0:d.dataSource;if(!f)throw new Error("Cannot find selection rect data source handle!");f.updateDynamicData(Qx(l))},r.addListener(this._selectionListener)}dispose(){this._selectionExpr.removeListener(this._selectionListener),super.dispose()}}function Qx(n){const e=n.intervals.x,t=n.intervals.y;return!e&&!t?[]:[{_x:e==null?void 0:e[0],_x2:e==null?void 0:e[1],_y:t==null?void 0:t[0],_y2:t==null?void 0:t[1]}]}class qx{constructor(e,t,r){R(this,Bu);if(this.layoutParent=t,this.view=e,this.serial=r,this.background=void 0,this.backgroundStroke=void 0,this.axes={},this.gridLines={},this.scrollbars={},this.selectionRect=void 0,this.title=void 0,this.coords=Ft.ZERO,e.needsAxes.x||e.needsAxes.y){const i=e.spec,s="view"in i?i==null?void 0:i.view:void 0,o=z6(s);o&&(this.background=new ft(o,t.context,t,e,"background"+r,{blockEncodingInheritance:!0}));const a=U6(s);a&&(this.backgroundStroke=new ft(a,t.context,t,e,"backgroundStroke"+r,{blockEncodingInheritance:!0}));const c=N6(e.spec.title);if(c){const u=new ft(c,t.context,t,e,"title"+r,{blockEncodingInheritance:!0});this.title=u}}e.spec.viewportWidth!=null&&(this.scrollbars.horizontal=new Wx(this,"horizontal")),e.spec.viewportHeight!=null&&(this.scrollbars.vertical=new Wx(this,"vertical")),O(this,Bu,zw).call(this)}*getChildren(){this.background&&(yield this.background),this.backgroundStroke&&(yield this.backgroundStroke),this.title&&(yield this.title),yield*Object.values(this.axes),yield*Object.values(this.gridLines),yield this.view,yield*Object.values(this.scrollbars),this.selectionRect&&(yield this.selectionRect)}async createAxes(){const{view:e,axes:t,gridLines:r}=this,i=(a,c)=>{const u=a.getAxisProps();if(u===null)return;const l=u?{...u}:{};if(!l.orient){for(const f of au[c])if(!t[f]){l.orient=f;break}if(!l.orient)throw new Error("No slots available for an axis! Perhaps a LayerView has more than two children?")}if(l.title??(l.title=a.getTitle()),!au[c].includes(l.orient))throw new Error(`Invalid axis orientation "${l.orient}" on channel "${c}"!`);return l},s=async(a,c,u)=>{const l=i(a,c);if(l){if(t[l.orient])throw new Error(`An axis with the orient "${l.orient}" already exists!`);const f=new zx(l,a.scaleResolution.type,this.layoutParent.context,this.layoutParent,u);t[l.orient]=f,await f.initializeChildren()}},o=async(a,c,u)=>{const l=i(a,c);if(l&&(l.grid||l.chromGrid)){const f=new D6(l,a.scaleResolution.type,this.layoutParent.context,this.layoutParent,u);r[l.orient]=f,await f.initializeChildren()}};for(const a of["x","y"])if(e.needsAxes[a]){const c=e.resolutions.axis[a];if(!c)continue;await s(c,a,e)}for(const a of["x","y"])if(e.needsAxes[a]&&e.getConfiguredOrDefaultResolution(a,"axis")!="excluded"){const c=e.getAxisResolution(a);if(!c)continue;await o(c,a,e)}if(e instanceof Ri){for(const a of e)for(const[c,u]of Object.entries(a.resolutions.axis)){const l=u.getAxisProps();l&&l.orient&&await s(u,c,a)}for(const a of e)for(const[c,u]of Object.entries(a.resolutions.axis)){const l=u.getAxisProps();l&&!l.orient&&await s(u,c,a)}}[...Object.values(t),...Object.values(r)].forEach(a=>a.visit(c=>{c instanceof ft&&c.resolve("scale")}))}getOverhang(){const e=t=>{const r=this.axes[t];return r?Math.max(r.getPerpendicularSize()+(r.axisProps.offset??0),0):0};return new Qe(e("top"),e("right"),e("bottom"),e("left")).add(this.view.getOverhang())}getOverhangAndPadding(){return this.getOverhang().add(this.view.getPadding())}}Bu=new WeakSet,zw=function(){const e=this.view,t=r=>{this.view.context.glHelper.canvas.style.cursor=r};for(const[r,i]of e.paramMediator.paramConfigs){if(!("select"in i))continue;const s=Fc(i.select);if(!Wm(s))continue;const o=s.encodings,a=Object.fromEntries(o.map(w=>{const A=this.view.getScaleResolution(w),S=A==null?void 0:A.scale;if(!S||!Oe(S.type))throw new Error(`No continuous scale found for interval selection param "${r}" on channel "${w}"! Scale type is "${(S==null?void 0:S.type)??"none"}".`);return[w,A]}));if(this.selectionRect)throw new Error("Only one interval selection per container is currently allowed!");let c=!1,u=!1,l=!1,f=null;const d=(w,A)=>Object.fromEntries(o.map(S=>[S,[Math.min(w[S],A[S]),Math.max(w[S],A[S])]])),h=e.paramMediator.createExpression(r),p=e.paramMediator.getSetter(r);i.value&&p({type:"interval",intervals:i.value});const m=()=>{p(Vm(o)),t(null)};this.selectionRect=new L6(this,h,s.mark),this.selectionRect.initializeChildren();const g=w=>{const A={x:0,y:0},S=e.coords.normalizePoint(w.x,w.y,!0);for(const C of o){const v=a[C].scale,T=v.invert(C=="x"?S.x:S.y);A[C]=T+(["index","locus"].includes(v.type)?.5:0)}return A},x=w=>{var T,P,F,k;const{intervals:A}=w,S=(L,U,j)=>{const Z=(ce,ie)=>ie==null?null:a[ce].scale(ie),_=Z("x",L)??j,ee=Z("y",U)??j;return e.coords.denormalizePoint(_,ee,!0)},C=S((T=A.x)==null?void 0:T[0],(P=A.y)==null?void 0:P[0],0),v=S((F=A.x)==null?void 0:F[1],(k=A.y)==null?void 0:k[1],1);return Ft.create(C.x,C.y,v.x-C.x,v.y-C.y)};e.addInteractionEventListener("mousedown",(w,A)=>{if(A.mouseEvent.button!=0)return;if(f=c?x(h()):null,f)t("grabbing"),u=!0;else{const P=A.point;if(Qm(h())&&(u=!0),A.mouseEvent.shiftKey)m(),l=!0;else if(Qm(h())){const k=(L,U)=>{e.removeInteractionEventListener("mouseup",k);const j=U.point;P.subtract(j).length<2&&m()};e.addInteractionEventListener("mouseup",k);return}else return}A.stopPropagation();const S=A.point,C=at.fromMouseEvent(A.mouseEvent).subtract(S),v=P=>{const F=at.fromMouseEvent(P).subtract(C);let k;if(f){const L=F.subtract(S),U=f.translate(L.x,L.y);k=d(g(new at(U.x,U.y)),g(new at(U.x2,U.y2)))}else k=d(g(S),g(F));for(const L of o){const U=a[L],{zoomExtent:j,scale:Z}=U,_=k[L];if(["index","locus"].includes(Z.type)&&(_[0]=Math.ceil(_[0]),_[1]=Math.ceil(_[1])),f){const ee=_[1]-_[0],ce=j[0],ie=j[1];_[0]<ce&&(_[0]=ce,_[1]=ce+ee),_[1]>ie&&(_[1]=ie,_[0]=ie-ee)}else _[0]=Math.max(j[0],_[0]),_[1]=Math.min(j[1],_[1]);_[1]=Math.min(j[1],_[1])}p({type:"interval",intervals:k})},T=()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",T),l=!1,f&&(t("move"),f=null)};document.addEventListener("mousemove",v),document.addEventListener("mouseup",T)}),e.addInteractionEventListener("click",(w,A)=>{A.mouseEvent.button==0&&u&&(A.stopPropagation(),u=!1)},!0);const b=w=>v8(h(),g(w));e.addInteractionEventListener("dblclick",(w,A)=>{b(A.point)&&(m(),A.stopPropagation())},!0),e.addInteractionEventListener("mousemove",(w,A)=>{b(A.point)?l||(c=!0,f||t("move")):(c=!1,f||t(null))})}};function z6(n){if(n!=null&&n.fill||n!=null&&n.fillOpacity||n!=null&&n.shadowOpacity)return{configurableVisibility:!1,data:{values:[{}]},mark:{color:n.fill,opacity:n.fillOpacity??(n.fill?1:0),type:"rect",clip:!1,tooltip:null,minHeight:1,minOpacity:0,shadowBlur:n.shadowBlur,shadowColor:n.shadowColor,shadowOffsetX:n.shadowOffsetX,shadowOffsetY:n.shadowOffsetY,shadowOpacity:n.shadowOpacity}}}function U6(n){if(!(!n||!n.stroke||n.strokeWidth===0||n.strokeOpacity===0))return{configurableVisibility:!1,resolve:{scale:{x:"excluded",y:"excluded"},axis:{x:"excluded",y:"excluded"}},data:{values:[{x:0,y:0,x2:1,y2:0},{x:1,y:0,x2:1,y2:1},{x:1,y:1,x2:0,y2:1},{x:0,y:1,x2:0,y2:0}]},mark:{size:n.strokeWidth??1,color:n.stroke??"lightgray",strokeCap:"square",opacity:n.strokeOpacity??1,type:"rule",clip:!1,tooltip:null},encoding:{x:{field:"x",type:"quantitative",scale:null},y:{field:"y",type:"quantitative",scale:null},x2:{field:"x2"},y2:{field:"y2"}}}}class G6 extends _o{constructor(t,r,i,s,o,a,c){super(t,r,i,s,o,c);R(this,ne);R(this,vs,1/0);R(this,Ss,10);R(this,et,[]);R(this,ei,{});R(this,Es,0);this.spec=t,G(this,Ss,t.spacing??10),G(this,vs,a),G(this,et,[]),this.wrappingFacet=!1}appendChild(t){t.layoutParent??(t.layoutParent=this),E(this,et).push(new qx(t,this,E(this,Es))),Cw(this,Es)._++}setChildren(t){for(const r of E(this,et))O(this,ne,Td).call(this,r);G(this,et,[]);for(const r of t)this.appendChild(r)}replaceChild(t,r){const i=E(this,et).findIndex(s=>s.view==t);if(i>=0)O(this,ne,Td).call(this,E(this,et)[i]),E(this,et)[i]=new qx(r,this,E(this,Es));else throw new Error("Not my child view!")}get children(){return E(this,et).map(t=>t.view)}get childCount(){return E(this,et).length}async createAxes(){const t=[];for(const r of Dr){const i=this.resolutions.axis[r];if(i){const s=i.getAxisProps();if(s){const o={title:i.getTitle(),orient:au[r][0],...s},a=new zx(o,i.scaleResolution.type,this.context,this,this);t.push(a.initializeChildren()),E(this,ei)[r]=a}}}return Promise.all([...t,...E(this,et).map(r=>r.createAxes())])}*[Symbol.iterator](){for(const t of E(this,et))yield*t.getChildren();for(const t of Object.values(E(this,ei)))yield t}getOverhang(){return O(this,ne,Gw).call(this).union(O(this,ne,Ru).call(this))}getSize(){return this._cache("size",()=>new Qn(O(this,ne,kd).call(this,"column"),O(this,ne,kd).call(this,"row")).addPadding(O(this,ne,Ru).call(this)))}render(t,r,i={}){if(super.render(t,r,i),!this.isConfiguredVisible())return;this.layoutParent||(r=r.shrink(this.getPadding())),r=r.shrink(O(this,ne,Ru).call(this)),t.pushView(this,r);const s={devicePixelRatio:t.getDevicePixelRatio()},o=lx(O(this,ne,Bd).call(this,"column"),r.width,s),a=lx(O(this,ne,Bd).call(this,"row"),r.height,s),c=new Lx(E(this,ne,ni).length,E(this,vs)??1/0),u=l=>Math.round(l*devicePixelRatio)/devicePixelRatio;for(const[l,f]of E(this,ne,ni).entries()){const{view:d,axes:h,gridLines:p,background:m,backgroundStroke:g,title:x,selectionRect:b}=f,[w,A]=c.getCellCoords(l),S=o[O(this,ne,Fd).call(this,"column",w)],C=a[O(this,ne,Fd).call(this,"row",A)],v=d.getViewportSize(),T=d.getSize(),P=d.getOverhang(),F=S.location-P.left,k=C.location-P.top,L=(De,St)=>(De[St].grow?(St=="width"?S:C).size:De[St].px)+P[St],U=L(v,"width"),j=L(v,"height"),Z=L(T,"width"),_=L(T,"height"),ee=f.scrollbars.horizontal,ce=f.scrollbars.vertical,ie=ee?()=>u(ee.viewportOffset):()=>0,Ne=ce?()=>u(ce.viewportOffset):()=>0,Se=new Ft(()=>r.x+F,()=>r.y+k,()=>U,()=>j),Zt=d.isScrollable(),Jt=Zt?new Ft(()=>r.x+F-ie(),()=>r.y+k-Ne(),()=>Z,()=>_):Se;f.coords=Se;const rr=i.clipRect?Se.intersect(i.clipRect):Se;m==null||m.render(t,rr,{...i,clipRect:void 0});for(const De of Object.values(p))De.render(t,Se,i);const Ds=V6(d)||Zt;Ds&&d.render(t,Jt,{...i,clipRect:rr}),g==null||g.render(t,rr,{...i,clipRect:void 0});for(const[De,St]of Object.entries(h)){const ut=De=="left"||De=="right"?"vertical":"horizontal",H=f.scrollbars[ut],J=H?Se.modify(ut=="vertical"?{y:()=>Jt.y,height:_}:{x:()=>Jt.x,width:Z}):Se,te=Yx(J,De,St);let M=i.clipRect;H&&(M=te.intersect(M).intersect(H?Se.modify(ut=="vertical"?{x:-1e5,width:2e5}:{y:-1e5,height:2e5}):void 0)),St.render(t,te,{...i,clipRect:M})}for(const De of Object.values(E(this,ei))){const ut=De.axisProps.orient;(ut=="left"&&w==0||ut=="right"&&w==c.nCols-1||ut=="top"&&A==0||ut=="bottom"&&A==c.nRows-1)&&De.render(t,Yx(Se.shrink(f.view.getOverhang()),ut,De),i)}Ds||d.render(t,Jt,i),b==null||b.render(t,Jt,i);for(const De of Object.values(f.scrollbars))De.updateScrollbar(Se,Jt),De.render(t,r,i);x==null||x.render(t,Se,i)}t.popView(this)}propagateInteractionEvent(t){if(this.handleInteractionEvent(void 0,t,!0),t.stopped)return;const r=E(this,ne,ni).find(s=>s.coords.containsPoint(t.point.x,t.point.y));for(const s of Object.values((r==null?void 0:r.scrollbars)??{}))if(s.coords.containsPoint(t.point.x,t.point.y)&&(s.propagateInteractionEvent(t),t.stopped))return;const i=r==null?void 0:r.view;if(i){if(i.propagateInteractionEvent(t),t.stopped)return;(i instanceof ft||i instanceof Ri)&&E6(t,r.coords,s=>O(this,ne,Hw).call(this,r.coords,r.view,s),this.context.getCurrentHover(),this.context.animator)}t.stopped||this.handleInteractionEvent(void 0,t,!1)}getDefaultResolution(t,r){return"independent"}}vs=new WeakMap,Ss=new WeakMap,et=new WeakMap,ei=new WeakMap,Es=new WeakMap,ne=new WeakSet,ni=function(){return E(this,et).filter(t=>t.view.isConfiguredVisible())},Uw=function(){return new Lx(E(this,ne,ni).length,E(this,vs)??1/0)},Td=function(t){for(const r of t.getChildren())r.disposeSubtree()},ka=function(t){const r=t=="column"?"width":"height",i=(s,o)=>s.map(a=>{const u=E(this,ne,ni)[a].getOverhangAndPadding();return t=="column"?o?u.right:u.left:o?u.bottom:u.top}).reduce((a,c)=>Math.max(a,c),0);return this._cache(`size/directionSizes/${t}`,()=>E(this,ne,Uw)[t=="column"?"colIndices":"rowIndices"].map(s=>({axisBefore:i(s,0),axisAfter:i(s,1),view:dB(s.map(o=>E(this,ne,ni)[o].view.getViewportSize()[r]))})))},Bd=function(t){const r=O(this,ne,ka).call(this,t),i=[];i.push(Uo);for(const[s,o]of r.entries())s>0&&i.push({px:E(this,Ss),grow:0}),(s==0||this.wrappingFacet)&&i.push(Uo),i.push({px:o.axisBefore,grow:0}),i.push(o.view),i.push({px:o.axisAfter,grow:0}),(s==r.length-1||this.wrappingFacet)&&i.push(Uo);return i},kd=function(t){let r=0,i=0;const s=t=="row"?this.spec.height:this.spec.width;if(s||s===0)return hx(s);const o=O(this,ne,ka).call(this,t);for(const[a,c]of o.entries())a>0&&(i+=E(this,Ss)),(a==0||this.wrappingFacet)&&(i+=0),i+=c.axisBefore,i+=c.view.px??0,r+=c.view.grow??0,i+=c.axisAfter,(a==o.length-1||this.wrappingFacet)&&(i+=0);return{px:i,grow:r}},Fd=function(t,r){return t=="row"&&this.wrappingFacet?1+6*r+2:2+4*r+1},Gw=function(){const t=O(this,ne,ka).call(this,"column"),r=O(this,ne,ka).call(this,"row");return!t.length||!r.length?Qe.zero():new Qe(r.at(0).axisBefore,t.at(-1).axisAfter,r.at(-1).axisAfter,t.at(0).axisBefore)},Ru=function(){const t=r=>{const i=Sh[r],s=E(this,ei)[i];return(s==null?void 0:s.axisProps.orient)!==r?0:Math.max(s.getPerpendicularSize()+(s.axisProps.offset??0),0)};return new Qe(t("top"),t("right"),t("bottom"),t("left"))},Hw=function(t,r,i){for(const[s,o]of Object.entries(H6(r))){if(o.size<=0)continue;const a=t.normalizePoint(i.x,i.y),c=t.normalizePoint(i.x+i.xDelta,i.y+i.yDelta),u={x:c.x-a.x,y:c.y-a.y};for(const l of o)l.zoom(2**i.zDelta,s=="y"?1-a[s]:a[s],s=="x"?u.x:-u.y)}this.context.animator.requestRender()};function H6(n){const e={x:new Set,y:new Set};return n.visit(t=>{for(const[r,i]of Object.entries(e)){const s=t.getScaleResolution(r);s&&s.isZoomable()&&i.add(s)}}),e}function V6(n){let e=!0;return n.visit(t=>{t instanceof ft&&e&&(e=t.mark.properties.clip===!0)}),e}function Yx(n,e,t){const r=t.axisProps,i=t.getPerpendicularSize();if(e=="bottom")return n.translate(0,n.height+r.offset).modify({height:i});if(e=="top")return n.translate(0,-i-r.offset).modify({height:i});if(e=="left")return n.translate(-i-r.offset,0).modify({width:i});if(e=="right")return n.translate(n.width+r.offset,0).modify({width:i})}class Ch extends G6{constructor(e,t,r,i,s){super(e,t,r,i,s,Th(e)?e.columns:cu(e)?1:1/0),this.spec=e}async initializeChildren(){const e=this.spec,t=Th(e)?e.concat:cu(e)?e.vconcat:e.hconcat;this.setChildren(await Promise.all(t.map((r,i)=>this.context.createOrImportView(r,this,this,"grid"+i)))),await this.createAxes()}getDefaultResolution(e,t){return t=="axis"?"independent":cu(this.spec)&&e==="x"||Zx(this.spec)&&e==="y"?"shared":"independent"}}const Xx="viewRoot";class _6{constructor(e={}){R(this,Cs,new Map);this.options={allowImport:!0,wrapRoot:!0,...e};const t=r=>(i,s,o,a,c)=>new r(i,s,o,a,i.name??c);this.addViewType(Ih,t(Ri)),this.addViewType(Dh,t(ft)),this.addViewType(cu,t(Ch)),this.addViewType(Zx,t(Ch)),this.addViewType(Th,t(Ch)),this.addViewType(Q6,()=>{throw new Error("SampleView is not supported by the @genome-spy/core package. Use @genome-spy/app instead!")})}addViewType(e,t){E(this,Cs).set(e,t)}createView(e,t,r,i,s){for(const[o,a]of E(this,Cs))if(o(e))return a(e,t,r,i,s);throw new Error("Invalid spec, cannot figure out the view type from the properties: "+JSON.stringify([...Object.keys(e)]))}isViewSpec(e){const t=[...E(this,Cs).keys()].filter(r=>r(e));if(t.length>1)throw new Error("Ambiguous spec. Cannot create a view!");return t.length==1}async createOrImportView(e,t,r,i,s,o){let a;if(W6(e)){let l;if("url"in e.import)if(this.options.allowImport)l=await vB(e,i.getBaseUrl(),t);else throw new Wn("Importing views is not allowed!",r);else if("template"in e.import)l=Kx(e.import.template,i);else throw new Error("Invalid import: "+JSON.stringify(e));o==null||o(l),j6(l,e),a=l}else a=e;const c=l=>{var f;return(f=l==null?void 0:l.params)==null?void 0:f.some(d=>Gm(d)&&Fc(d.select).type=="interval")};!i&&this.options.wrapRoot&&(Dh(a)||Ih(a)||c(a))&&s===Xx&&(a={name:"implicitRoot",vconcat:[a]});const u=this.createView(a,t,r,i,s);return u instanceof _o&&await u.initializeChildren(),u}}Cs=new WeakMap;function Kx(n,e){var r,i;const t=(i=(r=e.spec)==null?void 0:r.templates)==null?void 0:i[n];if(t)return structuredClone(t);if(e.dataParent)return Kx(n,e.dataParent);throw new Error(`Cannot find template "${n}" in current view or its ancestors!`)}function j6(n,e){e.name!=null&&(n.name=e.name);const t=Ue(e.params)?e.params:Ge(e.params)?Object.entries(e.params).map(([r,i])=>({name:r,value:i})):[];if(t.length){n.params??(n.params=[]);for(const r of t){const i=n.params.findIndex(s=>s.name==r.name);i>=0&&(n.params[i]=r)}for(const r of t)n.params.some(i=>i.name==r.name)||n.params.push(r)}}function Dh(n){return"mark"in n&&(me(n.mark)||Ge(n.mark))}function Ih(n){return"layer"in n&&Ge(n.layer)}function W6(n){return"import"in n}function cu(n){return"vconcat"in n&&Ue(n.vconcat)}function Zx(n){return"hconcat"in n&&Ue(n.hconcat)}function Th(n){return"concat"in n&&Ue(n.concat)}function Q6(n){return"samples"in n&&Ge(n.samples)&&"spec"in n&&Ge(n.spec)}function q6(n){const e=Math.floor(Math.random()*16777215).toString(16),t=[];for(const r of n.paramConfigs.values()){if(!b8(r))continue;const i=r.bind;if(!i||!("input"in i))continue;const s=r.name,o=n.getSetter(s),a=n.getValue(s),c=i.name??s,u=i.debounce?su(o,i.debounce,!1):o,l=`${e}-param-${s}`;if(i.input=="range")t.push(ge`<label for=${l}>${c}</label>
                    <div>
                        <input
                            id=${l}
                            type="range"
                            min=${i.min??0}
                            max=${i.max??100}
                            step=${i.step??pr(i.min,i.max,100)}
                            .value=${a}
                            @input=${f=>{u(f.target.valueAsNumber),f.target.nextElementSibling.textContent=f.target.valueAsNumber}}
                        /><span>${a}</span>
                    </div>`);else if(i.input=="checkbox")t.push(ge`<label for=${l}>${c}</label>
                    <input
                        id=${l}
                        type="checkbox"
                        ?checked=${a}
                        @input=${f=>u(f.target.checked)}
                    />`);else if(i.input=="radio")t.push(ge`<span class="label">${c}</span>
                    <div class="radio-group">
                        ${i.options.map((f,d)=>{var h;return ge`<label>
                                    <input
                                        type="radio"
                                        name=${s}
                                        value=${f}
                                        .checked=${a==f}
                                        @input=${p=>u(p.target.value)}
                                    />${((h=i.labels)==null?void 0:h[d])??f}</label
                                >`})}
                    </div>`);else if(i.input=="select")t.push(ge`<label for=${l}>${c}</label>
                    <select
                        id=${l}
                        @input=${f=>u(f.target.value)}
                    >
                        ${i.options.map((f,d)=>{var h;return ge`<option
                                    value=${f}
                                    ?selected=${a==f}
                                >
                                    ${((h=i.labels)==null?void 0:h[d])??f}
                                </option>`})}
                    </select> `);else if(i.input=="text"||i.input=="number"||i.input=="color")t.push(ge`<label for=${l}>${c}</label>
                    <div>
                        <input
                            id=${l}
                            type=${i.input}
                            placeholder=${i.placeholder??""}
                            autocomplete=${i.autocomplete??"off"}
                            .value=${a}
                            @focus=${f=>f.target.select()}
                            @input=${f=>{u(i.input=="number"?f.target.valueAsNumber:f.target.value)}}
                        />
                    </div>`);else throw new Error("Unsupported input type: "+i.input);i.description&&t.push(ge`<div class="description">${i.description}</div>`)}return t}ml("fasta",s6);class Y6{constructor(e,t,r={}){R(this,vt);this.container=e,this.options=r,r.inputBindingContainer??(r.inputBindingContainer="default"),this._destructionCallbacks=[],this.spec=t,this.viewFactory=new _6,this.namedDataProviders=[],this.animator=new Jk(()=>this.renderAll()),this.genomeStore=void 0,this.viewVisibilityPredicate=i=>i.isVisibleInSpec(),this._renderingContext=void 0,this._pickingContext=void 0,this._dirtyPickingBuffer=!1,this._currentHover=void 0,this._wheelInertia=new o6(this.animator),this._keyboardListeners=new Map,this._eventListeners=new Map,this._extraBroadcastListeners=new Map,this.tooltipHandlers={default:g6,refseqgene:u6,...r.tooltipHandlers??{}},this.viewRoot=void 0,this._loadingViews=new Map,this._inputBindingContainer=void 0,this._mouseDownCoords=void 0,this.dpr=window.devicePixelRatio}registerNamedDataProvider(e){this.namedDataProviders.unshift(e)}getNamedDataFromProvider(e){for(const t of this.namedDataProviders){const r=t(e);if(r)return r}}updateNamedData(e,t){const r=this.viewRoot.context.dataFlow.findNamedDataSource(e);if(!r)throw new Error("No such named data source: "+e);r.dataSource.updateDynamicData(t),this.animator.requestRender()}broadcast(e,t){var i;const r={type:e,payload:t};this.viewRoot.visit(s=>s.handleBroadcast(r)),(i=this._extraBroadcastListeners.get(e))==null||i.forEach(s=>s(r))}_updateLoadingIndicators(){const e=[],t=()=>[...this._loadingViews.values()].some(r=>r.status=="loading"||r.status=="error");for(const[r,i]of this._loadingViews){const s=r.coords;if(s){const o={left:`${s.x}px`,top:`${s.y}px`,width:`${s.width}px`,height:`${s.height}px`};e.push(ge`<div style=${xl(o)}>
                        <div class=${i.status}>
                            ${i.status=="error"?ge`<span
                                      >Loading
                                      failed${i.detail?ge`: ${i.detail}`:ve}</span
                                  >`:ge`
                                      <img src="${Z2}" alt="" />
                                      <span>Loading...</span>
                                  `}
                        </div>
                    </div>`)}}t()?this.loadingIndicatorsElement.style.display="block":setTimeout(()=>{t()||(this.loadingIndicatorsElement.style.display="none")},3e3),Ns(e,this.loadingIndicatorsElement)}destroy(){var t;const e=E(this,vt,Ou);this.container.classList.remove("genome-spy"),e.classList.remove("loading");for(const[r,i]of this._keyboardListeners)for(const s of i)document.removeEventListener(r,s);for(this._destructionCallbacks.forEach(r=>r()),this._glHelper.finalize(),(t=this._inputBindingContainer)==null||t.remove();this.container.firstChild;)this.container.firstChild.remove()}async _prepareViewsAndData(){this.spec.genome&&(this.genomeStore=new $k(this.spec.baseUrl),await this.genomeStore.initialize(this.spec.genome));const e=this,t={dataFlow:new kx,glHelper:this._glHelper,animator:this.animator,genomeStore:this.genomeStore,fontManager:new n6(this._glHelper),requestLayoutReflow:()=>{},updateTooltip:this.updateTooltip.bind(this),getNamedDataFromProvider:this.getNamedDataFromProvider.bind(this),getCurrentHover:()=>this._currentHover,setDataLoadingStatus:(a,c,u)=>{this._loadingViews.set(a,{status:c,detail:u}),this._updateLoadingIndicators()},addKeyboardListener:(a,c)=>{document.addEventListener(a,c);let u=this._keyboardListeners.get(a);u||(u=[],this._keyboardListeners.set(a,u)),u.push(c)},addBroadcastListener(a,c){const u=e._extraBroadcastListeners;let l=u.get(a);l||(l=new Set,u.set(a,l)),l.add(c)},removeBroadcastListener(a,c){var l;(l=e._extraBroadcastListeners.get(a))==null||l.delete(c)},isViewConfiguredVisible:e.viewVisibilityPredicate,isViewSpec:a=>e.viewFactory.isViewSpec(a),createOrImportView:async function(a,c,u,l,f){return e.viewFactory.createOrImportView(a,t,c,u,l,f)},highlightView:a=>{var c;if((c=this.container.querySelector(".view-highlight"))==null||c.remove(),a){if(!a.isConfiguredVisible())return;const u=a.coords;if(u){const l=document.createElement("div");l.className="view-highlight",l.style.position="absolute",l.style.left=u.x+"px",l.style.top=u.y+"px",l.style.width=u.width+"px",l.style.height=u.height+"px",l.style.border="1px solid green",l.style.backgroundColor="rgba(0, 255, 0, 0.1)",l.style.pointerEvents="none",this.container.appendChild(l)}}}},r=this.spec;r.datasets&&this.registerNamedDataProvider(a=>r.datasets[a]),this.viewRoot=await t.createOrImportView(r,null,null,Xx),E(this,vt,Ou).style.flexGrow=this.viewRoot.getSize().height.grow>0?"1":"0",O(this,vt,Vw).call(this),bB(this.viewRoot),wB(this.viewRoot),this.viewRoot.getDescendants().forEach(a=>a.configureViewOpacity()),this._glHelper.invalidateSize(),O(this,vt,_w).call(this);const{dataFlow:s,graphicsPromises:o}=Vk(this.viewRoot,t.dataFlow);this.broadcast("dataFlowBuilt",s),await t.fontManager.waitUntilReady(),await Wk(this.viewRoot,new Set(s.dataSources)),await AB(o),t.requestLayoutReflow=this.computeLayout.bind(this),this.viewRoot.visit(a=>eu(a,"size")),this._glHelper.invalidateSize()}async launch(){try{return O(this,vt,jw).call(this),await this._prepareViewsAndData(),this.registerMouseEvents(),this.computeLayout(),this.animator.requestRender(),!0}catch(e){const t=`${e.view?`At "${e.view.getPathString()}": `:""}${e.toString()}`;return console.error(e.stack),X6(this.container,t),!1}finally{E(this,vt,Ou).classList.remove("loading"),window.setTimeout(()=>{this.loadingMessageElement.style.display="none"},2e3)}}registerMouseEvents(){const e=this._glHelper.canvas;let t=performance.now(),r=!1;const i=s=>{var c,u;const o=performance.now(),a=o-t<200;if(s instanceof MouseEvent){const l=e.getBoundingClientRect(),f=new at(s.clientX-l.left-e.clientLeft,s.clientY-l.top-e.clientTop);s.type=="mousemove"&&!a&&(this.tooltip.handleMouseMove(s),this._tooltipUpdateRequested=!1,s.buttons==0&&!Vx()&&(this.renderPickingFramebuffer(),this._handlePicking(f.x,f.y)));const d=h=>{this.viewRoot.propagateInteractionEvent(new Yk(f,h)),this._tooltipUpdateRequested||this.tooltip.clear()};if(s.type!="wheel"&&this._wheelInertia.cancel(),(s.type=="mousedown"||s.type=="mouseup")&&!Vx())this.renderPickingFramebuffer();else if(s.type=="wheel"){t=o,this._tooltipUpdateRequested=!1;const h=s;if(Math.abs(h.deltaX)>Math.abs(h.deltaY))this._currentHover=null,this._wheelInertia.cancel();else{const p=a6(h);this._wheelInertia.setMomentum(h.deltaY*(h.deltaMode?80:1),m=>{const g=new WheelEvent("wheel",{...p,deltaMode:0,deltaX:0,deltaY:m});d(g)}),h.preventDefault();return}}if(s.type=="click"){if(r)return;const h=this._currentHover?{type:s.type,viewPath:this._currentHover.mark.unitView.getLayoutAncestors().map(p=>p.name).reverse(),datum:this._currentHover.datum}:{type:s.type,viewPath:null,datum:null};(c=this._eventListeners.get("click"))==null||c.forEach(p=>p(h))}(s.type!="click"||((u=this._mouseDownCoords)==null?void 0:u.subtract(at.fromMouseEvent(s)).length)<3)&&d(s)}};["mousedown","mouseup","wheel","click","mousemove","gesturechange","contextmenu","dblclick"].forEach(s=>e.addEventListener(s,i)),e.addEventListener("mousedown",s=>{this._mouseDownCoords=at.fromMouseEvent(s),this.tooltip.sticky?(this.tooltip.sticky=!1,this.tooltip.clear(),r=!0):r=!1;const o=()=>{document.addEventListener("mouseup",()=>this.tooltip.popEnabledState(),{once:!0}),this.tooltip.pushEnabledState(!1)};if(s.button==2||s.shiftKey||s.ctrlKey||s.metaKey)o();else if(this.tooltip.visible){const a=setTimeout(()=>{r=!0,this.tooltip.sticky=!0},400),c=()=>clearTimeout(a);document.addEventListener("mouseup",c,{once:!0}),document.addEventListener("mousemove",c,{once:!0})}}),e.addEventListener("dragstart",s=>s.stopPropagation()),e.addEventListener("mouseout",()=>{this.tooltip.clear(),this._currentHover=null})}_handlePicking(e,t){var o;const r=this.dpr,i=bI(this._glHelper.gl,this._glHelper._pickingBufferInfo,e*r,t*r),s=i[0]|i[1]<<8|i[2]<<16|i[3]<<24;if(s==0){this._currentHover=null;return}if(s!==((o=this._currentHover)==null?void 0:o.uniqueId)&&(this._currentHover=null),this._currentHover||this.viewRoot.visit(a=>{if(a instanceof ft){if(a.mark.isPickingParticipant()&&[...a.facetCoords.values()].some(c=>c.containsPoint(e,t))){const c=a.getCollector().findDatumByUniqueId(s);c&&(this._currentHover={mark:a.mark,datum:c,uniqueId:s})}if(this._currentHover)return Ho}}),this._currentHover){const a=this._currentHover.mark;this.updateTooltip(this._currentHover.datum,async c=>{if(!a.isPickingParticipant())return;const u=a.properties.tooltip;if(u!==null){const l=(u==null?void 0:u.handler)??"default",f=this.tooltipHandlers[l];if(!f)throw new Error("No such tooltip handler: "+l);return f(c,a,u==null?void 0:u.params)}})}}updateTooltip(e,t){if(!this._tooltipUpdateRequested||!e)this.tooltip.updateWithDatum(e,t),this._tooltipUpdateRequested=!0;else throw new Error("Tooltip has already been updated! Duplicate event handler?")}exportCanvas(e,t,r,i="white"){const s=this._glHelper;e??(e=s.getLogicalCanvasSize().width),t??(t=s.getLogicalCanvasSize().height),r??(r=window.devicePixelRatio??1);const o=s.gl,a=Math.floor(e*r),c=Math.floor(t*r),u=fm(o,[{format:o.RGBA,type:o.UNSIGNED_BYTE,minMag:o.LINEAR,wrap:o.CLAMP_TO_EDGE}],a,c),l=new wh({picking:!1},{webGLHelper:this._glHelper,canvasSize:{width:e,height:t},devicePixelRatio:r,clearColor:i,framebufferInfo:u});this.viewRoot.render(l,Ft.create(0,0,e,t)),l.render();const f=wI(o,u,"image/png");return this.computeLayout(),this.renderAll(),f}computeLayout(){const e=this.viewRoot;if(!e)return;this.broadcast("layout");const t=this._glHelper.getLogicalCanvasSize();if(isNaN(t.width)||isNaN(t.height)){console.log(`NaN in canvas size: ${t.width}x${t.height}. Skipping computeLayout().`);return}const r={webGLHelper:this._glHelper,canvasSize:t,devicePixelRatio:window.devicePixelRatio??1};this._renderingContext=new wh({picking:!1},{...r,clearColor:this.spec.background}),this._pickingContext=new wh({picking:!0},{...r,framebufferInfo:this._glHelper._pickingBufferInfo}),e.render(new qk(this._renderingContext,this._pickingContext),Ft.create(0,0,t.width,t.height)),this._updateLoadingIndicators(),this.broadcast("layoutComputed")}renderAll(){var e;(e=this._renderingContext)==null||e.render(),this._dirtyPickingBuffer=!0}renderPickingFramebuffer(){this._dirtyPickingBuffer&&(this._pickingContext.render(),this._dirtyPickingBuffer=!1)}getSearchableViews(){const e=[];return this.viewRoot.visit(t=>{t instanceof ft&&t.getDataAccessor("search")&&e.push(t)}),e}getNamedScaleResolutions(){const e=new Map;return this.viewRoot.visit(t=>{for(const r of Object.values(t.resolutions.scale))r.name&&e.set(r.name,r)}),e}}vt=new WeakSet,Ou=function(){return this.container.querySelector(".canvas-wrapper")},Vw=function(){const e=[];this.viewRoot.visit(r=>{const i=r.paramMediator;e.push(...q6(i))});const t=this.options.inputBindingContainer;if(!(!t||t=="none"||!e.length)){if(this._inputBindingContainer=uu("div",{className:"gs-input-bindings"}),t=="default")this.container.appendChild(this._inputBindingContainer);else if(t instanceof HTMLElement)t.appendChild(this._inputBindingContainer);else throw new Error("Invalid inputBindingContainer");e.length&&Ns(ge`<div class="gs-input-binding">${e}</div>`,this._inputBindingContainer)}},_w=function(){const e=this.viewRoot.paramMediator.allocateSetter("devicePixelRatio",this.dpr),t=()=>{this._glHelper.invalidateSize(),this.dpr=window.devicePixelRatio,e(this.dpr),this.computeLayout(),this.renderAll()};if(this.viewRoot.getSize().isGrowing()){const s=new ResizeObserver(t);s.observe(this.container),this._destructionCallbacks.push(()=>s.disconnect())}let r=null;const i=()=>{r!=null&&(r(),t());const s=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);s.addEventListener("change",i),r=()=>{s.removeEventListener("change",i)}};i(),r&&this._destructionCallbacks.push(r)},jw=function(){this.container.classList.add("genome-spy");const e=document.createElement("style");e.innerHTML=J2,this.container.appendChild(e);const t=uu("div",{class:"canvas-wrapper"});this.container.appendChild(t),t.classList.add("loading"),this._glHelper=new gI(t,()=>this.viewRoot?SB(this.viewRoot):{width:void 0,height:void 0},{powerPreference:this.options.powerPreference??"default"}),this.loadingMessageElement=uu("div",{class:"loading-message",innerHTML:'<div class="message">Loading<span class="ellipsis">...</span></div>'}),t.appendChild(this.loadingMessageElement),this.loadingIndicatorsElement=uu("div",{class:"loading-indicators"}),t.appendChild(this.loadingIndicatorsElement),this.tooltip=new eS(this.container),this.loadingMessageElement.querySelector(".message").addEventListener("transitionend",()=>{this.loadingMessageElement.style.display="none"})};function X6(n,e){const t=document.createElement("div");t.className="message-box";const r=document.createElement("div");r.textContent=e,t.appendChild(r),n.appendChild(t)}function uu(n,e){const t=document.createElement(n);for(const[r,i]of Object.entries(e))["innerHTML","innerText","className"].includes(r)&&(t[r]=i),t.setAttribute(r,i);return t}async function K6(n,e,t={}){let r;if(me(n)){if(r=document.querySelector(n),!r)throw new Error(`No such element: ${n}`)}else if(n instanceof HTMLElement)r=n;else throw new Error(`Invalid element: ${n}`);let i;try{const s=Ge(e)?e:await J6(e);if(s.baseUrl??(s.baseUrl=""),s.width??(s.width="container"),s.padding??(s.padding=10),r==document.body){const o=document.createElement("div");o.style.position="fixed",o.style.inset="0",o.style.overflow="hidden",r.appendChild(o),r=o}i=new Y6(r,s,t),Z6(i,t),await i.launch()}catch(s){r.innerText=s.toString(),console.error(s)}return{finalize(){for(i.destroy();r.firstChild;)r.firstChild.remove()},addEventListener(s,o){const a=i._eventListeners;let c=a.get(s);c||(c=new Set,a.set(s,c)),c.add(o)},removeEventListener(s,o){var c;(c=i._eventListeners.get(s))==null||c.delete(o)},getScaleResolutionByName(s){return i.getNamedScaleResolutions().get(s)},updateNamedData:i.updateNamedData.bind(i),exportCanvas:i.exportCanvas.bind(i)}}function Z6(n,e){e.namedDataProvider&&n.registerNamedDataProvider(e.namedDataProvider)}async function J6(n){let e;try{const t=await fetch(n);if(!t.ok)throw new Error(`${t.status} ${t.statusText}`);e=await t.json()}catch(t){throw new Error(`Could not load or parse configuration: ${n}, reason: ${t.message}`)}if(!e.baseUrl){const t=n.match(/^[^?#]*\//);e.baseUrl=t&&t[0]||"./"}return e}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const $6=n=>n.strings===void 0;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const jo=(n,e)=>{var r;const t=n._$AN;if(t===void 0)return!1;for(const i of t)(r=i._$AO)==null||r.call(i,e,!1),jo(i,e);return!0},lu=n=>{let e,t;do{if((e=n._$AM)===void 0)break;t=e._$AN,t.delete(n),n=e}while((t==null?void 0:t.size)===0)},Jx=n=>{for(let e;e=n._$AM;n=e){let t=e._$AN;if(t===void 0)e._$AN=t=new Set;else if(t.has(n))break;t.add(n),nF(e)}};function eF(n){this._$AN!==void 0?(lu(this),this._$AM=n,Jx(this)):this._$AM=n}function tF(n,e=!1,t=0){const r=this._$AH,i=this._$AN;if(i!==void 0&&i.size!==0)if(e)if(Array.isArray(r))for(let s=t;s<r.length;s++)jo(r[s],!1),lu(r[s]);else r!=null&&(jo(r,!1),lu(r));else jo(this,n)}const nF=n=>{n.type==X0.CHILD&&(n._$AP??(n._$AP=tF),n._$AQ??(n._$AQ=eF))};class rF extends Z0{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,r){super._$AT(e,t,r),Jx(this),this.isConnected=e._$AU}_$AO(e,t=!0){var r,i;e!==this.isConnected&&(this.isConnected=e,e?(r=this.reconnected)==null||r.call(this):(i=this.disconnected)==null||i.call(this)),t&&(jo(this,e),lu(this))}setValue(e){if($6(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const iF=()=>new sF;class sF{}const Bh=new WeakMap,oF=K0(class extends rF{render(n){return ve}update(n,[e]){var r;const t=e!==this.G;return t&&this.G!==void 0&&this.rt(void 0),(t||this.lt!==this.ct)&&(this.G=e,this.ht=(r=n.options)==null?void 0:r.host,this.rt(this.ct=n.element)),ve}rt(n){if(this.isConnected||(n=void 0),typeof this.G=="function"){const e=this.ht??globalThis;let t=Bh.get(e);t===void 0&&(t=new WeakMap,Bh.set(e,t)),t.get(this.G)!==void 0&&this.G.call(this.ht,void 0),t.set(this.G,n),n!==void 0&&this.G.call(this.ht,n)}else this.G.value=n}get lt(){var n,e;return typeof this.G=="function"?(n=Bh.get(this.ht??globalThis))==null?void 0:n.get(this.G):(e=this.G)==null?void 0:e.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});function $x(){const n=document.querySelector("meta[name='base_url']").getAttribute("content");return n||console.error('No <meta name="base_url" ...> found!'),n}async function aF(n,e){const r=`${$x()}/data/`;try{e.baseUrl=e.baseUrl||r,await K6(n,e,{bare:!0})}catch(i){const s=document.createElement("pre");s.innerText=i.toString(),n.appendChild(s)}}class ey extends Ls{static get styles(){return mA`
            .show-spec {
                font-size: 70%;
                text-align: center;
            }

            .show-spec a {
                color: #3f51b5;
                text-decoration: none;
            }
        `}static get properties(){return{height:{type:String},specHidden:{type:Boolean}}}constructor(){super(),this.height=300,this.specHidden=!1,this.embedRef=iF()}render(){return ge`
            <link rel="stylesheet" href=${$x()+"/app/style.css"} />
            <div
                class="embed-container"
                style=${xl({height:this.height+"px"})}
                ${oF(this.embedRef)}
            ></div>
            ${this.specHidden?ge`
                      <div class="show-spec">
                          <a
                              href="#"
                              @click=${e=>{this.specHidden=!1,e.preventDefault()}}
                              >Show specification</a
                          >
                      </div>
                  `:ve}

            <div
                class="embed-spec"
                style=${xl({display:this.specHidden?"none":"block"})}
            >
                <slot></slot>
            </div>
        `}firstUpdated(){var t;const e=(t=this.shadowRoot.querySelector("slot").assignedNodes().filter(r=>r instanceof HTMLElement)[0])==null?void 0:t.textContent;if(e){const r=new IntersectionObserver(i=>{i.forEach(s=>{if(s.isIntersecting){const o=s.target;aF(o,JSON.parse(e)),r.unobserve(o)}})});setTimeout(()=>r.observe(this.embedRef.value),80)}}}customElements.define("genome-spy-doc-embed",ey);class cF{constructor(e){this.blob=e,this.size=e.size}async read(e,t=0){if(!e)return new Uint8Array(0);const r=t,i=r+e;return new Uint8Array(await this.blob.slice(r,i).arrayBuffer())}async readFile(e){const t=typeof e=="string"?e:e==null?void 0:e.encoding;if(t==="utf8")return this.blob.text();if(t)throw new Error(`unsupported encoding: ${t}`);return new Uint8Array(await this.blob.arrayBuffer())}async stat(){return{size:this.size}}async close(){}}function ty(n){return(typeof n=="object"&&n!==null&&"message"in n?n.message:`${n}`).replace(/\.$/,"")}class Yt{constructor(e,t={}){this.baseOverrides={},this.url=e;const r=t.fetch||globalThis.fetch.bind(globalThis);t.overrides&&(this.baseOverrides=t.overrides),this.fetchImplementation=r}async fetch(e,t){let r;try{r=await this.fetchImplementation(e,t)}catch(i){if(`${i}`.includes("Failed to fetch")){console.warn(`generic-filehandle: refetching ${e} to attempt to work around chrome CORS header caching bug`);try{r=await this.fetchImplementation(e,{...t,cache:"reload"})}catch(s){throw new Error(`${ty(s)} fetching ${e}`,{cause:s})}}else throw new Error(`${ty(i)} fetching ${e}`,{cause:i})}return r}async read(e,t,r={}){const{headers:i={},signal:s,overrides:o={}}=r;e<1/0?i.range=`bytes=${t}-${t+e}`:e===1/0&&t!==0&&(i.range=`bytes=${t}-`);const a=await this.fetch(this.url,{...this.baseOverrides,...o,headers:{...i,...o.headers,...this.baseOverrides.headers},method:"GET",redirect:"follow",mode:"cors",signal:s});if(!a.ok)throw new Error(`HTTP ${a.status} fetching ${this.url}`);if(a.status===200&&t===0||a.status===206){const c=await a.arrayBuffer(),u=a.headers.get("content-range"),l=/\/(\d+)$/.exec(u||"");return l!=null&&l[1]&&(this._stat={size:parseInt(l[1],10)}),new Uint8Array(c.slice(0,e))}throw a.status===200?new Error(`${this.url} fetch returned status 200, expected 206`):new Error(`HTTP ${a.status} fetching ${this.url}`)}async readFile(e={}){let t,r;typeof e=="string"?(t=e,r={}):(t=e.encoding,r=e,delete r.encoding);const{headers:i={},signal:s,overrides:o={}}=r,a=await this.fetch(this.url,{headers:i,method:"GET",redirect:"follow",mode:"cors",signal:s,...this.baseOverrides,...o});if(a.status!==200)throw new Error(`HTTP ${a.status} fetching ${this.url}`);if(t==="utf8")return a.text();if(t)throw new Error(`unsupported encoding: ${t}`);return new Uint8Array(await a.arrayBuffer())}async stat(){if(!this._stat&&(await this.read(10,0),!this._stat))throw new Error(`unable to determine size of file at ${this.url}`);return this._stat}async close(){}}class qe{readFile(){throw new Error("unimplemented")}read(){throw new Error("unimplemented")}close(){throw new Error("unimplemented")}}const Wo=Object.freeze(Object.defineProperty({__proto__:null,BlobFile:cF,LocalFile:qe,RemoteFile:Yt},Symbol.toStringTag,{value:"Module"})),ny=65536,uF=ny*ny;function kh(n,e=0){const t=n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24;return((n[e+4]|n[e+5]<<8|n[e+6]<<16|n[e+7]<<24)>>>0)*uF+(t>>>0)}const fu=1;function ry(n,e,t){const r=e[fu],i=t?t[fu]:1/0;return r<=n&&i>n?0:r<n?-1:1}class lF{constructor({filehandle:e}){Y(this,"filehandle");Y(this,"index");this.filehandle=e}_getIndex(){return this.index||(this.index=this._readIndex().catch(e=>{throw this.index=void 0,e})),this.index}async _readIndex(){const e=await this.filehandle.read(8,0),t=kh(e);if(!t)return[[0,0]];const r=new Array(t+1);r[0]=[0,0];const i=8*2*t;if(i>Number.MAX_SAFE_INTEGER)throw new TypeError("integer overflow");const s=await this.filehandle.read(i,8);for(let o=0;o<t;o+=1){const a=kh(s,o*16),c=kh(s,o*16+8);r[o+1]=[a,c]}return r}async getLastBlock(){return(await this._getIndex()).at(-1)}async getRelevantBlocksForRead(e,t){const r=t+e;if(e===0)return[];const i=await this._getIndex(),s=[];let o=0,a=i.length-1,c=Math.floor(i.length/2),u=ry(t,i[c],i[c+1]);for(;u!==0;)u>0?a=c-1:u<0&&(o=c+1),c=Math.ceil((a-o)/2)+o,u=ry(t,i[c],i[c+1]);s.push(i[c]);let l=c+1;for(;l<i.length&&(s.push(i[l]),!(i[l][fu]>=r));l+=1);return s[s.length-1][fu]<r&&s.push([]),s}}var iy=0,zr=2,hu=4,Ur=0,du=1,fF=2,hF=-5;function dF(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function pF(n){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(var r in t)dF(t,r)&&(n[r]=t[r])}}return n}function sy(n,e){return n.length===e?n:n.subarray?n.subarray(0,e):(n.length=e,n)}var Qo={arraySet:function(n,e,t,r,i){if(e.subarray&&n.subarray){n.set(e.subarray(t,t+r),i);return}for(var s=0;s<r;s++)n[i+s]=e[t+s]},flattenChunks:function(n){var e,t,r,i,s,o;for(r=0,e=0,t=n.length;e<t;e++)r+=n[e].length;for(o=new Uint8Array(r),i=0,e=0,t=n.length;e<t;e++)s=n[e],o.set(s,i),i+=s.length;return o},Buf8:function(n){return new Uint8Array(n)},Buf16:function(n){return new Uint16Array(n)},Buf32:function(n){return new Int32Array(n)}},qo={arraySet:function(n,e,t,r,i){for(var s=0;s<r;s++)n[i+s]=e[t+s]},flattenChunks:function(n){return[].concat.apply([],n)},Buf8:function(n){return new Array(n)},Buf16:function(n){return new Array(n)},Buf32:function(n){return new Array(n)}};let Oi=()=>{const n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";return Oi=()=>n,n},Yn=(n,e,t,r,i)=>(Yn=Oi()?Qo.arraySet:qo.arraySet,Yn(n,e,t,r,i)),Fh=n=>(Fh=Oi()?Qo.flattenChunks:qo.flattenChunks,Fh(n)),Ni=n=>(Ni=Oi()?Qo.Buf8:qo.Buf8,Ni(n)),Li=n=>(Li=Oi()?Qo.Buf16:qo.Buf16,Li(n)),zi=n=>(zi=Oi()?Qo.Buf32:qo.Buf32,zi(n)),oy=function(){let n=!0;try{String.fromCharCode.apply(null,[0])}catch{n=!1}return oy=()=>n,n},ay=function(){let n=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}return ay=()=>n,n},Ph=function(n){for(var e=Ni(256),t=0;t<256;t++)e[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;return e[254]=e[254]=1,Ph=r=>e[r],e[n]};function cy(n){var e,t,r,i,s,o=n.length,a=0;for(i=0;i<o;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<o&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),s=0,i=0;s<a;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<o&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e}function mF(n,e){if(e<65534&&(n.subarray&&ay()||!n.subarray&&oy()))return String.fromCharCode.apply(null,sy(n,e));for(var t="",r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t}function gF(n){for(var e=new Uint8Array(n.length),t=0,r=e.length;t<r;t++)e[t]=n.charCodeAt(t);return e}function xF(n,e){var t,r,i,s,o=e||n.length,a=new Array(o*2);for(r=0,t=0;t<o;){if(i=n[t++],i<128){a[r++]=i;continue}if(s=Ph(i),s>4){a[r++]=65533,t+=s-1;continue}for(i&=s===2?31:s===3?15:7;s>1&&t<o;)i=i<<6|n[t++]&63,s--;if(s>1){a[r++]=65533;continue}i<65536?a[r++]=i:(i-=65536,a[r++]=55296|i>>10&1023,a[r++]=56320|i&1023)}return mF(a,r)}function yF(n,e){var t;for(e=e||n.length,e>n.length&&(e=n.length),t=e-1;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+Ph(n[t])>e?t:e}function bF(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}function Mh(n,e,t,r){for(var i=n&65535|0,s=n>>>16&65535|0,o=0;t!==0;){o=t>2e3?2e3:t,t-=o;do i=i+e[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0}function wF(){for(var n,e=[],t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e}let uy=function(){const n=wF();return uy=()=>n,n};function Xt(n,e,t,r){var i=uy(),s=r+t;n^=-1;for(var o=r;o<s;o++)n=n>>>8^i[(n^e[o])&255];return n^-1}var pu=30,AF=12;function vF(n,e){var t,r,i,s,o,a,c,u,l,f,d,h,p,m,g,x,b,w,A,S,C,v,T,P,F;t=n.state,r=n.next_in,P=n.input,i=r+(n.avail_in-5),s=n.next_out,F=n.output,o=s-(e-n.avail_out),a=s+(n.avail_out-257),c=t.dmax,u=t.wsize,l=t.whave,f=t.wnext,d=t.window,h=t.hold,p=t.bits,m=t.lencode,g=t.distcode,x=(1<<t.lenbits)-1,b=(1<<t.distbits)-1;e:do{p<15&&(h+=P[r++]<<p,p+=8,h+=P[r++]<<p,p+=8),w=m[h&x];t:for(;;){if(A=w>>>24,h>>>=A,p-=A,A=w>>>16&255,A===0)F[s++]=w&65535;else if(A&16){S=w&65535,A&=15,A&&(p<A&&(h+=P[r++]<<p,p+=8),S+=h&(1<<A)-1,h>>>=A,p-=A),p<15&&(h+=P[r++]<<p,p+=8,h+=P[r++]<<p,p+=8),w=g[h&b];n:for(;;){if(A=w>>>24,h>>>=A,p-=A,A=w>>>16&255,A&16){if(C=w&65535,A&=15,p<A&&(h+=P[r++]<<p,p+=8,p<A&&(h+=P[r++]<<p,p+=8)),C+=h&(1<<A)-1,C>c){n.msg="invalid distance too far back",t.mode=pu;break e}if(h>>>=A,p-=A,A=s-o,C>A){if(A=C-A,A>l&&t.sane){n.msg="invalid distance too far back",t.mode=pu;break e}if(v=0,T=d,f===0){if(v+=u-A,A<S){S-=A;do F[s++]=d[v++];while(--A);v=s-C,T=F}}else if(f<A){if(v+=u+f-A,A-=f,A<S){S-=A;do F[s++]=d[v++];while(--A);if(v=0,f<S){A=f,S-=A;do F[s++]=d[v++];while(--A);v=s-C,T=F}}}else if(v+=f-A,A<S){S-=A;do F[s++]=d[v++];while(--A);v=s-C,T=F}for(;S>2;)F[s++]=T[v++],F[s++]=T[v++],F[s++]=T[v++],S-=3;S&&(F[s++]=T[v++],S>1&&(F[s++]=T[v++]))}else{v=s-C;do F[s++]=F[v++],F[s++]=F[v++],F[s++]=F[v++],S-=3;while(S>2);S&&(F[s++]=F[v++],S>1&&(F[s++]=F[v++]))}}else if(A&64){n.msg="invalid distance code",t.mode=pu;break e}else{w=g[(w&65535)+(h&(1<<A)-1)];continue n}break}}else if(A&64)if(A&32){t.mode=AF;break e}else{n.msg="invalid literal/length code",t.mode=pu;break e}else{w=m[(w&65535)+(h&(1<<A)-1)];continue t}break}}while(r<i&&s<a);S=p>>3,r-=S,p-=S<<3,h&=(1<<p)-1,n.next_in=r,n.next_out=s,n.avail_in=r<i?5+(i-r):5-(r-i),n.avail_out=s<a?257+(a-s):257-(s-a),t.hold=h,t.bits=p}var Ui=15,ly=852,fy=592,hy=0,Rh=1,dy=2,SF=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],EF=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],CF=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],DF=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function Yo(n,e,t,r,i,s,o,a){var c=a.bits,u=0,l=0,f=0,d=0,h=0,p=0,m=0,g=0,x=0,b=0,w,A,S,C,v,T=null,P=0,F,k=Li(Ui+1),L=Li(Ui+1),U=null,j=0,Z,_,ee;for(u=0;u<=Ui;u++)k[u]=0;for(l=0;l<r;l++)k[e[t+l]]++;for(h=c,d=Ui;d>=1&&k[d]===0;d--);if(h>d&&(h=d),d===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(f=1;f<d&&k[f]===0;f++);for(h<f&&(h=f),g=1,u=1;u<=Ui;u++)if(g<<=1,g-=k[u],g<0)return-1;if(g>0&&(n===hy||d!==1))return-1;for(L[1]=0,u=1;u<Ui;u++)L[u+1]=L[u]+k[u];for(l=0;l<r;l++)e[t+l]!==0&&(o[L[e[t+l]]++]=l);if(n===hy?(T=U=o,F=19):n===Rh?(T=SF,P-=257,U=EF,j-=257,F=256):(T=CF,U=DF,F=-1),b=0,l=0,u=f,v=s,p=h,m=0,S=-1,x=1<<h,C=x-1,n===Rh&&x>ly||n===dy&&x>fy)return 1;for(;;){Z=u-m,o[l]<F?(_=0,ee=o[l]):o[l]>F?(_=U[j+o[l]],ee=T[P+o[l]]):(_=96,ee=0),w=1<<u-m,A=1<<p,f=A;do A-=w,i[v+(b>>m)+A]=Z<<24|_<<16|ee|0;while(A!==0);for(w=1<<u-1;b&w;)w>>=1;if(w!==0?(b&=w-1,b+=w):b=0,l++,--k[u]===0){if(u===d)break;u=e[t+o[l]]}if(u>h&&(b&C)!==S){for(m===0&&(m=h),v+=f,p=u-m,g=1<<p;p+m<d&&(g-=k[p+m],!(g<=0));)p++,g<<=1;if(x+=1<<p,n===Rh&&x>ly||n===dy&&x>fy)return 1;S=b&C,i[S]=h<<24|p<<16|v-s|0}}return b!==0&&(i[v+b]=u-m<<24|64<<16|0),a.bits=h,0}var IF=0,py=1,my=2,gy=4,Gr=0,TF=1,BF=2,bt=-2,xy=-3,yy=-4,kF=-5,by=8,wy=1,Ay=2,vy=3,Sy=4,Ey=5,Cy=6,Dy=7,Iy=8,Ty=9,By=10,mu=11,hn=12,Oh=13,ky=14,Nh=15,Fy=16,Py=17,My=18,Ry=19,gu=20,xu=21,Oy=22,Ny=23,Ly=24,zy=25,Uy=26,Lh=27,Gy=28,Hy=29,we=30,Vy=31,FF=32,PF=852,MF=592;function _y(n){return(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24)}function RF(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=Li(320),this.work=Li(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function OF(n){var e;return!n||!n.state?bt:(e=n.state,n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=wy,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=zi(PF),e.distcode=e.distdyn=zi(MF),e.sane=1,e.back=-1,Gr)}function NF(n){var e;return!n||!n.state?bt:(e=n.state,e.wsize=0,e.whave=0,e.wnext=0,OF(n))}function LF(n,e){var t,r;return!n||!n.state||(r=n.state,e<0?(t=0,e=-e):(t=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?bt:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,NF(n))}function zF(n,e){var t,r;return n?(r=new RF,n.state=r,r.window=null,t=LF(n,e),t!==Gr&&(n.state=null),t):bt}var jy=!0,zh,Uh;function UF(n){if(jy){var e;for(zh=zi(512),Uh=zi(32),e=0;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(Yo(py,n.lens,0,288,zh,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;Yo(my,n.lens,0,32,Uh,0,n.work,{bits:5}),jy=!1}n.lencode=zh,n.lenbits=9,n.distcode=Uh,n.distbits=5}function Wy(n,e,t,r){var i,s=n.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=Ni(s.wsize)),r>=s.wsize?(Yn(s.window,e,t-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),Yn(s.window,e,t-r,i,s.wnext),r-=i,r?(Yn(s.window,e,t-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}function GF(n,e){var t,r,i,s,o,a,c,u,l,f,d,h,p,m,g=0,x,b,w,A,S,C,v,T,P=Ni(4),F,k,L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!n||!n.state||!n.output||!n.input&&n.avail_in!==0)return bt;t=n.state,t.mode===hn&&(t.mode=Oh),o=n.next_out,i=n.output,c=n.avail_out,s=n.next_in,r=n.input,a=n.avail_in,u=t.hold,l=t.bits,f=a,d=c,T=Gr;e:for(;;)switch(t.mode){case wy:if(t.wrap===0){t.mode=Oh;break}for(;l<16;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}if(t.wrap&2&&u===35615){t.check=0,P[0]=u&255,P[1]=u>>>8&255,t.check=Xt(t.check,P,2,0),u=0,l=0,t.mode=Ay;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((u&255)<<8)+(u>>8))%31){n.msg="incorrect header check",t.mode=we;break}if((u&15)!==by){n.msg="unknown compression method",t.mode=we;break}if(u>>>=4,l-=4,v=(u&15)+8,t.wbits===0)t.wbits=v;else if(v>t.wbits){n.msg="invalid window size",t.mode=we;break}t.dmax=1<<v,n.adler=t.check=1,t.mode=u&512?By:hn,u=0,l=0;break;case Ay:for(;l<16;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}if(t.flags=u,(t.flags&255)!==by){n.msg="unknown compression method",t.mode=we;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=we;break}t.head&&(t.head.text=u>>8&1),t.flags&512&&(P[0]=u&255,P[1]=u>>>8&255,t.check=Xt(t.check,P,2,0)),u=0,l=0,t.mode=vy;case vy:for(;l<32;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}t.head&&(t.head.time=u),t.flags&512&&(P[0]=u&255,P[1]=u>>>8&255,P[2]=u>>>16&255,P[3]=u>>>24&255,t.check=Xt(t.check,P,4,0)),u=0,l=0,t.mode=Sy;case Sy:for(;l<16;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}t.head&&(t.head.xflags=u&255,t.head.os=u>>8),t.flags&512&&(P[0]=u&255,P[1]=u>>>8&255,t.check=Xt(t.check,P,2,0)),u=0,l=0,t.mode=Ey;case Ey:if(t.flags&1024){for(;l<16;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}t.length=u,t.head&&(t.head.extra_len=u),t.flags&512&&(P[0]=u&255,P[1]=u>>>8&255,t.check=Xt(t.check,P,2,0)),u=0,l=0}else t.head&&(t.head.extra=null);t.mode=Cy;case Cy:if(t.flags&1024&&(h=t.length,h>a&&(h=a),h&&(t.head&&(v=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),Yn(t.head.extra,r,s,h,v)),t.flags&512&&(t.check=Xt(t.check,r,h,s)),a-=h,s+=h,t.length-=h),t.length))break e;t.length=0,t.mode=Dy;case Dy:if(t.flags&2048){if(a===0)break e;h=0;do v=r[s+h++],t.head&&v&&t.length<65536&&(t.head.name+=String.fromCharCode(v));while(v&&h<a);if(t.flags&512&&(t.check=Xt(t.check,r,h,s)),a-=h,s+=h,v)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Iy;case Iy:if(t.flags&4096){if(a===0)break e;h=0;do v=r[s+h++],t.head&&v&&t.length<65536&&(t.head.comment+=String.fromCharCode(v));while(v&&h<a);if(t.flags&512&&(t.check=Xt(t.check,r,h,s)),a-=h,s+=h,v)break e}else t.head&&(t.head.comment=null);t.mode=Ty;case Ty:if(t.flags&512){for(;l<16;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}if(u!==(t.check&65535)){n.msg="header crc mismatch",t.mode=we;break}u=0,l=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=hn;break;case By:for(;l<32;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}n.adler=t.check=_y(u),u=0,l=0,t.mode=mu;case mu:if(t.havedict===0)return n.next_out=o,n.avail_out=c,n.next_in=s,n.avail_in=a,t.hold=u,t.bits=l,BF;n.adler=t.check=1,t.mode=hn;case hn:case Oh:if(t.last){u>>>=l&7,l-=l&7,t.mode=Lh;break}for(;l<3;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}switch(t.last=u&1,u>>>=1,l-=1,u&3){case 0:t.mode=ky;break;case 1:UF(t),t.mode=gu;break;case 2:t.mode=Py;break;case 3:n.msg="invalid block type",t.mode=we}u>>>=2,l-=2;break;case ky:for(u>>>=l&7,l-=l&7;l<32;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}if((u&65535)!==(u>>>16^65535)){n.msg="invalid stored block lengths",t.mode=we;break}t.length=u&65535,u=0,l=0,t.mode=Nh;case Nh:t.mode=Fy;case Fy:if(h=t.length,h){if(h>a&&(h=a),h>c&&(h=c),h===0)break e;Yn(i,r,s,h,o),a-=h,s+=h,c-=h,o+=h,t.length-=h;break}t.mode=hn;break;case Py:for(;l<14;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}if(t.nlen=(u&31)+257,u>>>=5,l-=5,t.ndist=(u&31)+1,u>>>=5,l-=5,t.ncode=(u&15)+4,u>>>=4,l-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=we;break}t.have=0,t.mode=My;case My:for(;t.have<t.ncode;){for(;l<3;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}t.lens[L[t.have++]]=u&7,u>>>=3,l-=3}for(;t.have<19;)t.lens[L[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,F={bits:t.lenbits},T=Yo(IF,t.lens,0,19,t.lencode,0,t.work,F),t.lenbits=F.bits,T){n.msg="invalid code lengths set",t.mode=we;break}t.have=0,t.mode=Ry;case Ry:for(;t.have<t.nlen+t.ndist;){for(;g=t.lencode[u&(1<<t.lenbits)-1],x=g>>>24,b=g>>>16&255,w=g&65535,!(x<=l);){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}if(w<16)u>>>=x,l-=x,t.lens[t.have++]=w;else{if(w===16){for(k=x+2;l<k;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}if(u>>>=x,l-=x,t.have===0){n.msg="invalid bit length repeat",t.mode=we;break}v=t.lens[t.have-1],h=3+(u&3),u>>>=2,l-=2}else if(w===17){for(k=x+3;l<k;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}u>>>=x,l-=x,v=0,h=3+(u&7),u>>>=3,l-=3}else{for(k=x+7;l<k;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}u>>>=x,l-=x,v=0,h=11+(u&127),u>>>=7,l-=7}if(t.have+h>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=we;break}for(;h--;)t.lens[t.have++]=v}}if(t.mode===we)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=we;break}if(t.lenbits=9,F={bits:t.lenbits},T=Yo(py,t.lens,0,t.nlen,t.lencode,0,t.work,F),t.lenbits=F.bits,T){n.msg="invalid literal/lengths set",t.mode=we;break}if(t.distbits=6,t.distcode=t.distdyn,F={bits:t.distbits},T=Yo(my,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,F),t.distbits=F.bits,T){n.msg="invalid distances set",t.mode=we;break}t.mode=gu;case gu:t.mode=xu;case xu:if(a>=6&&c>=258){n.next_out=o,n.avail_out=c,n.next_in=s,n.avail_in=a,t.hold=u,t.bits=l,vF(n,d),o=n.next_out,i=n.output,c=n.avail_out,s=n.next_in,r=n.input,a=n.avail_in,u=t.hold,l=t.bits,t.mode===hn&&(t.back=-1);break}for(t.back=0;g=t.lencode[u&(1<<t.lenbits)-1],x=g>>>24,b=g>>>16&255,w=g&65535,!(x<=l);){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}if(b&&!(b&240)){for(A=x,S=b,C=w;g=t.lencode[C+((u&(1<<A+S)-1)>>A)],x=g>>>24,b=g>>>16&255,w=g&65535,!(A+x<=l);){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}u>>>=A,l-=A,t.back+=A}if(u>>>=x,l-=x,t.back+=x,t.length=w,b===0){t.mode=Uy;break}if(b&32){t.back=-1,t.mode=hn;break}if(b&64){n.msg="invalid literal/length code",t.mode=we;break}t.extra=b&15,t.mode=Oy;case Oy:if(t.extra){for(k=t.extra;l<k;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}t.length+=u&(1<<t.extra)-1,u>>>=t.extra,l-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Ny;case Ny:for(;g=t.distcode[u&(1<<t.distbits)-1],x=g>>>24,b=g>>>16&255,w=g&65535,!(x<=l);){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}if(!(b&240)){for(A=x,S=b,C=w;g=t.distcode[C+((u&(1<<A+S)-1)>>A)],x=g>>>24,b=g>>>16&255,w=g&65535,!(A+x<=l);){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}u>>>=A,l-=A,t.back+=A}if(u>>>=x,l-=x,t.back+=x,b&64){n.msg="invalid distance code",t.mode=we;break}t.offset=w,t.extra=b&15,t.mode=Ly;case Ly:if(t.extra){for(k=t.extra;l<k;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}t.offset+=u&(1<<t.extra)-1,u>>>=t.extra,l-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=we;break}t.mode=zy;case zy:if(c===0)break e;if(h=d-c,t.offset>h){if(h=t.offset-h,h>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=we;break}h>t.wnext?(h-=t.wnext,p=t.wsize-h):p=t.wnext-h,h>t.length&&(h=t.length),m=t.window}else m=i,p=o-t.offset,h=t.length;h>c&&(h=c),c-=h,t.length-=h;do i[o++]=m[p++];while(--h);t.length===0&&(t.mode=xu);break;case Uy:if(c===0)break e;i[o++]=t.length,c--,t.mode=xu;break;case Lh:if(t.wrap){for(;l<32;){if(a===0)break e;a--,u|=r[s++]<<l,l+=8}if(d-=c,n.total_out+=d,t.total+=d,d&&(n.adler=t.check=t.flags?Xt(t.check,i,d,o-d):Mh(t.check,i,d,o-d)),d=c,(t.flags?u:_y(u))!==t.check){n.msg="incorrect data check",t.mode=we;break}u=0,l=0}t.mode=Gy;case Gy:if(t.wrap&&t.flags){for(;l<32;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}if(u!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=we;break}u=0,l=0}t.mode=Hy;case Hy:T=TF;break e;case we:T=xy;break e;case Vy:return yy;case FF:default:return bt}return n.next_out=o,n.avail_out=c,n.next_in=s,n.avail_in=a,t.hold=u,t.bits=l,(t.wsize||d!==n.avail_out&&t.mode<we&&(t.mode<Lh||e!==gy))&&Wy(n,n.output,n.next_out,d-n.avail_out),f-=n.avail_in,d-=n.avail_out,n.total_in+=f,n.total_out+=d,t.total+=d,t.wrap&&d&&(n.adler=t.check=t.flags?Xt(t.check,i,d,n.next_out-d):Mh(t.check,i,d,n.next_out-d)),n.data_type=t.bits+(t.last?64:0)+(t.mode===hn?128:0)+(t.mode===gu||t.mode===Nh?256:0),(f===0&&d===0||e===gy)&&T===Gr&&(T=kF),T}function HF(n){if(!n||!n.state)return bt;var e=n.state;return e.window&&(e.window=null),n.state=null,Gr}function VF(n,e){var t;return!n||!n.state||(t=n.state,!(t.wrap&2))?bt:(t.head=e,e.done=!1,Gr)}function Qy(n,e){var t=e.length,r,i,s;return!n||!n.state||(r=n.state,r.wrap!==0&&r.mode!==mu)?bt:r.mode===mu&&(i=1,i=Mh(i,e,t,0),i!==r.check)?xy:(s=Wy(n,e,t,t),s?(r.mode=Vy,yy):(r.havedict=1,Gr))}const Gh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function _F(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Hh=Object.prototype.toString;class dn{constructor(e){if(!(this instanceof dn))return new dn(e);this.options=pF({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _F,this.strm.avail_out=0;var r=zF(this.strm,t.windowBits);if(r!==Ur)throw new Error(Gh[r]);if(this.header=new bF,VF(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=cy(t.dictionary):Hh.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Qy(this.strm,t.dictionary),r!==Ur)))throw new Error(Gh[r])}push(e,t){var r=this.strm,i=this.options.chunkSize,s=this.options.dictionary,o,a,c,u,l,f,d=!1;if(this.ended)return!1;a=t===~~t?t:t===!0?hu:iy,typeof e=="string"?r.input=gF(e):Hh.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=Ni(i),r.next_out=0,r.avail_out=i),o=GF(r,iy),o===fF&&s&&(typeof s=="string"?f=cy(s):Hh.call(s)==="[object ArrayBuffer]"?f=new Uint8Array(s):f=s,o=Qy(this.strm,f)),o===hF&&d===!0&&(o=Ur,d=!1),o!==du&&o!==Ur)return this.onEnd(o),this.ended=!0,!1;r.next_out&&(r.avail_out===0||o===du||r.avail_in===0&&(a===hu||a===zr))&&(this.options.to==="string"?(c=yF(r.output,r.next_out),u=r.next_out-c,l=xF(r.output,c),r.next_out=u,r.avail_out=i-u,u&&Yn(r.output,r.output,c,u,0),this.onData(l)):this.onData(sy(r.output,r.next_out))),r.avail_in===0&&r.avail_out===0&&(d=!0)}while((r.avail_in>0||r.avail_out===0)&&o!==du);return o===du&&(a=hu),a===hu?(o=HF(this.strm),this.onEnd(o),this.ended=!0,o===Ur):(a===zr&&(this.onEnd(Ur),r.avail_out=0),!0)}onData(e){this.chunks.push(e)}onEnd(e){e===Ur&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Fh(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg}}function jF(n,e){var t=new dn(e);if(t.push(n,!0),t.err)throw t.msg||Gh[t.err];return t.result}function WF(n,e){return e=e||{},e.raw=!0,jF(n,e)}function QF(n){let e=0;for(const t of n)e+=t.length;return e}function qy(n,e){const t=new Uint8Array(e??QF(n));let r=0;for(const i of n)t.set(i,r),r+=i.length;return t}async function qF(n){try{let e,t=0,r;const i=[];let s=0;do{const o=n.subarray(t);if(r=new dn(void 0),{strm:e}=r,r.push(o,zr),r.err)throw new Error(r.msg);t+=e.next_in;const a=r.result;i.push(a),s+=a.length}while(e.avail_in);return qy(i,s)}catch(e){throw/incorrect header check/.exec(`${e}`)?new Error("problem decompressing block: incorrect gzip header check"):e}}class Yy{constructor({filehandle:e,gziFilehandle:t}){Y(this,"filehandle");Y(this,"gzi");this.filehandle=e,this.gzi=new lF({filehandle:t})}async _readAndUncompressBlock(e,t){let r=t;r||(r=(await this.filehandle.stat()).size);const i=r-e,s=await this.filehandle.read(i,e);return qF(s)}async read(e,t){const r=await this.gzi.getRelevantBlocksForRead(e,t),i=[];for(let s=0;s<r.length-1;s+=1){const o=await this._readAndUncompressBlock(r[s][0],r[s+1][0]),[,a]=r[s],c=a>=t?0:t-a,u=Math.min(t+e,a+o.length)-a;c>=0&&c<o.length&&i.push(o.subarray(c,u))}return qy(i)}}function Xy(n,e){return n.offset+n.lineBytes*Math.floor(e/n.lineLength)+e%n.lineLength}async function YF(n,e={}){const t=new TextDecoder("utf8");return Object.fromEntries(t.decode(await n.readFile(e)).split(/\r?\n/).map(r=>r.trim()).filter(r=>!!r).map(r=>r.split("	")).map(r=>{var i;if((i=r[0])!=null&&i.startsWith(">"))throw new Error("found > in sequence name, might have supplied FASTA file for the FASTA index");return[r[0],{name:r[0],length:+r[1],start:0,end:+r[1],offset:+r[2],lineLength:+r[3],lineBytes:+r[4]}]}))}class Ky{constructor({fasta:e,fai:t,path:r,faiPath:i}){if(e)this.fasta=e;else if(r)this.fasta=new qe(r);else throw new Error("Need to pass filehandle for fasta or path to localfile");if(t)this.fai=t;else if(i)this.fai=new qe(i);else if(r)this.fai=new qe(`${r}.fai`);else throw new Error("Need to pass filehandle for  or path to localfile")}async _getIndexes(e){return this.indexes||(this.indexes=YF(this.fai,e).catch(t=>{throw this.indexes=void 0,t})),this.indexes}async getSequenceNames(e){return Object.keys(await this._getIndexes(e))}async getSequenceSizes(e){const t={},r=await this._getIndexes(e);for(const i of Object.values(r))t[i.name]=i.length;return t}async getSequenceSize(e,t){var i;return(i=(await this._getIndexes(t))[e])==null?void 0:i.length}async hasReferenceSequence(e,t){return!!(await this._getIndexes(t))[e]}async getResiduesByName(e,t,r,i){const s=(await this._getIndexes(i))[e];return s?this._fetchFromIndexEntry(s,t,r,i):void 0}async getSequence(e,t,r,i){return this.getResiduesByName(e,t,r,i)}async _fetchFromIndexEntry(e,t=0,r,i){let s=r;if(t<0)throw new TypeError("regionStart cannot be less than 0");if((s===void 0||s>e.length)&&(s=e.length),t>=s)return"";const o=Xy(e,t),a=Xy(e,s)-o;return new TextDecoder("utf8").decode(await this.fasta.read(a,o,i)).replace(/\s+/g,"")}}class XF extends Ky{constructor({fasta:e,path:t,fai:r,faiPath:i,gzi:s,gziPath:o}){super({fasta:e,path:t,fai:r,faiPath:i}),e&&s?this.fasta=new Yy({filehandle:e,gziFilehandle:s}):t&&o&&(this.fasta=new Yy({filehandle:new qe(t),gziFilehandle:new qe(o)}))}}function Zy(n){return n.split(">").filter(e=>/\S/.test(e)).map(e=>{const[t,...r]=e.split(`
`),[i,...s]=t.split(" "),o=r.join("").replace(/\s/g,"");return{id:i,description:s.join(" "),sequence:o}})}class KF{constructor({fasta:e,path:t}){if(e)this.fasta=e;else if(t)this.fasta=new qe(t);else throw new Error("Need to pass fasta or path");this.data=this.fasta.readFile().then(r=>{const s=new TextDecoder("utf8").decode(r);return Zy(s)})}async fetch(e,t,r){const s=(await this.data).find(a=>a.id===e),o=r-t;if(!s)throw new Error(`no sequence with id ${e} exists`);return s.sequence.slice(t,o)}async getSequenceNames(){return(await this.data).map(t=>t.id)}}const ZF=Object.freeze(Object.defineProperty({__proto__:null,BgzipIndexedFasta:XF,FetchableSmallFasta:KF,IndexedFasta:Ky,parseSmallFasta:Zy},Symbol.toStringTag,{value:"Module"})),Jy=BigInt(32);function JF(n,e,t){const r=+!!t,i=+!t;return BigInt(n.getInt32(e,t)*i+n.getInt32(e+4,t)*r)<<Jy|BigInt(n.getUint32(e,t)*r+n.getUint32(e+4,t)*i)}function $F(n,e,t){const r=n.getUint32(e,t),i=n.getUint32(e+4,t),s=+!!t,o=+!t;return BigInt(r*o+i*s)<<Jy|BigInt(r*s+i*o)}"getBigInt64"in DataView||(DataView.prototype.getBigInt64=function(n,e){return JF(this,n,e)}),"getBigUint64"in DataView||(DataView.prototype.getBigUint64=function(n,e){return $F(this,n,e)});var Vh=function(n,e){return Vh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Vh(n,e)};function _h(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Vh(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function e5(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(f){o(f)}}function c(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function $y(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(l){u=[6,l],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Xo(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function jh(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function Wh(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}function Gi(n){return this instanceof Gi?(this.v=n,this):new Gi(n)}function t5(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,x){s.push([h,m,g,x])>1||c(h,m)})},p&&(i[h]=p(i[h])))}function c(h,p){try{u(r[h](p))}catch(m){d(s[0][3],m)}}function u(h){h.value instanceof Gi?Promise.resolve(h.value.v).then(l,f):d(s[0][2],h)}function l(h){c("next",h)}function f(h){c("throw",h)}function d(h,p){h(p),s.shift(),s.length&&c(s[0][0],s[0][1])}}function n5(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Xo=="function"?Xo(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}typeof SuppressedError=="function"&&SuppressedError;function ke(n){return typeof n=="function"}function eb(n){var e=function(r){Error.call(r),r.stack=new Error().stack},t=n(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Qh=eb(function(n){return function(t){n(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function tb(n,e){if(n){var t=n.indexOf(e);0<=t&&n.splice(t,1)}}var qh=function(){function n(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var e,t,r,i,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=Xo(o),c=a.next();!c.done;c=a.next()){var u=c.value;u.remove(this)}}catch(m){e={error:m}}finally{try{c&&!c.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var l=this.initialTeardown;if(ke(l))try{l()}catch(m){s=m instanceof Qh?m.errors:[m]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var d=Xo(f),h=d.next();!h.done;h=d.next()){var p=h.value;try{rb(p)}catch(m){s=s??[],m instanceof Qh?s=Wh(Wh([],jh(s)),jh(m.errors)):s.push(m)}}}catch(m){r={error:m}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}}if(s)throw new Qh(s)}},n.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)rb(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},n.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},n.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},n.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&tb(t,e)},n.prototype.remove=function(e){var t=this._finalizers;t&&tb(t,e),e instanceof n&&e._removeParent(this)},n.EMPTY=function(){var e=new n;return e.closed=!0,e}(),n}();qh.EMPTY;function nb(n){return n instanceof qh||n&&"closed"in n&&ke(n.remove)&&ke(n.add)&&ke(n.unsubscribe)}function rb(n){ke(n)?n():n.unsubscribe()}var r5={Promise:void 0},i5={setTimeout:function(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return setTimeout.apply(void 0,Wh([n,e],jh(t)))},clearTimeout:function(n){return clearTimeout(n)},delegate:void 0};function ib(n){i5.setTimeout(function(){throw n})}function sb(){}function s5(n){n()}var Yh=function(n){_h(e,n);function e(t){var r=n.call(this)||this;return r.isStopped=!1,t?(r.destination=t,nb(t)&&t.add(r)):r.destination=c5,r}return e.create=function(t,r,i){return new yu(t,r,i)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(qh),o5=function(){function n(e){this.partialObserver=e}return n.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(r){bu(r)}},n.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(r){bu(r)}else bu(e)},n.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){bu(t)}},n}(),yu=function(n){_h(e,n);function e(t,r,i){var s=n.call(this)||this,o;return ke(t)||!t?o={next:t??void 0,error:r??void 0,complete:i??void 0}:o=t,s.destination=new o5(o),s}return e}(Yh);function bu(n){ib(n)}function a5(n){throw n}var c5={closed:!0,next:sb,error:a5,complete:sb},Xh=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ob(n){return n}function u5(n){return n.length===0?ob:n.length===1?n[0]:function(t){return n.reduce(function(r,i){return i(r)},t)}}var wt=function(){function n(e){e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,r){var i=this,s=f5(e)?e:new yu(e,t,r);return s5(function(){var o=i,a=o.operator,c=o.source;s.add(a?a.call(s,c):c?i._subscribe(s):i._trySubscribe(s))}),s},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},n.prototype.forEach=function(e,t){var r=this;return t=ab(t),new t(function(i,s){var o=new yu({next:function(a){try{e(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});r.subscribe(o)})},n.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},n.prototype[Xh]=function(){return this},n.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u5(e)(this)},n.prototype.toPromise=function(e){var t=this;return e=ab(e),new e(function(r,i){var s;t.subscribe(function(o){return s=o},function(o){return i(o)},function(){return r(s)})})},n.create=function(e){return new n(e)},n}();function ab(n){var e;return(e=n??r5.Promise)!==null&&e!==void 0?e:Promise}function l5(n){return n&&ke(n.next)&&ke(n.error)&&ke(n.complete)}function f5(n){return n&&n instanceof Yh||l5(n)&&nb(n)}function h5(n){return ke(n==null?void 0:n.lift)}function Hi(n){return function(e){if(h5(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ko(n,e,t,r,i){return new d5(n,e,t,r,i)}var d5=function(n){_h(e,n);function e(t,r,i,s,o,a){var c=n.call(this,t)||this;return c.onFinalize=o,c.shouldUnsubscribe=a,c._next=r?function(u){try{r(u)}catch(l){t.error(l)}}:n.prototype._next,c._error=s?function(u){try{s(u)}catch(l){t.error(l)}finally{this.unsubscribe()}}:n.prototype._error,c._complete=i?function(){try{i()}catch(u){t.error(u)}finally{this.unsubscribe()}}:n.prototype._complete,c}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;n.prototype.unsubscribe.call(this),!r&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(Yh),p5=new wt(function(n){return n.complete()});function m5(n){return n&&ke(n.schedule)}function cb(n){return n[n.length-1]}function g5(n){return m5(cb(n))?n.pop():void 0}function x5(n,e){return typeof cb(n)=="number"?n.pop():e}var ub=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function lb(n){return ke(n==null?void 0:n.then)}function fb(n){return ke(n[Xh])}function hb(n){return Symbol.asyncIterator&&ke(n==null?void 0:n[Symbol.asyncIterator])}function db(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function y5(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var pb=y5();function mb(n){return ke(n==null?void 0:n[pb])}function gb(n){return t5(this,arguments,function(){var t,r,i,s;return $y(this,function(o){switch(o.label){case 0:t=n.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Gi(t.read())];case 3:return r=o.sent(),i=r.value,s=r.done,s?[4,Gi(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Gi(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function xb(n){return ke(n==null?void 0:n.getReader)}function Vi(n){if(n instanceof wt)return n;if(n!=null){if(fb(n))return b5(n);if(ub(n))return w5(n);if(lb(n))return A5(n);if(hb(n))return yb(n);if(mb(n))return v5(n);if(xb(n))return S5(n)}throw db(n)}function b5(n){return new wt(function(e){var t=n[Xh]();if(ke(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function w5(n){return new wt(function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function A5(n){return new wt(function(e){n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,ib)})}function v5(n){return new wt(function(e){var t,r;try{for(var i=Xo(n),s=i.next();!s.done;s=i.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(a){t={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}e.complete()})}function yb(n){return new wt(function(e){E5(n,e).catch(function(t){return e.error(t)})})}function S5(n){return yb(gb(n))}function E5(n,e){var t,r,i,s;return e5(this,void 0,void 0,function(){var o,a;return $y(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),t=n5(n),c.label=1;case 1:return[4,t.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(o=r.value,e.next(o),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(s=t.return)?[4,s.call(t)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Hr(n,e,t,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function bb(n,e){return e===void 0&&(e=0),Hi(function(t,r){t.subscribe(Ko(r,function(i){return Hr(r,n,function(){return r.next(i)},e)},function(){return Hr(r,n,function(){return r.complete()},e)},function(i){return Hr(r,n,function(){return r.error(i)},e)}))})}function wb(n,e){return e===void 0&&(e=0),Hi(function(t,r){r.add(n.schedule(function(){return t.subscribe(r)},e))})}function C5(n,e){return Vi(n).pipe(wb(e),bb(e))}function D5(n,e){return Vi(n).pipe(wb(e),bb(e))}function I5(n,e){return new wt(function(t){var r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function T5(n,e){return new wt(function(t){var r;return Hr(t,e,function(){r=n[pb](),Hr(t,e,function(){var i,s,o;try{i=r.next(),s=i.value,o=i.done}catch(a){t.error(a);return}o?t.complete():t.next(s)},0,!0)}),function(){return ke(r==null?void 0:r.return)&&r.return()}})}function Ab(n,e){if(!n)throw new Error("Iterable cannot be null");return new wt(function(t){Hr(t,e,function(){var r=n[Symbol.asyncIterator]();Hr(t,e,function(){r.next().then(function(i){i.done?t.complete():t.next(i.value)})},0,!0)})})}function B5(n,e){return Ab(gb(n),e)}function k5(n,e){if(n!=null){if(fb(n))return C5(n,e);if(ub(n))return I5(n,e);if(lb(n))return D5(n,e);if(hb(n))return Ab(n,e);if(mb(n))return T5(n,e);if(xb(n))return B5(n,e)}throw db(n)}function F5(n,e){return e?k5(n,e):Vi(n)}var P5=eb(function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}});function vb(n,e){return new Promise(function(t,r){var i=new yu({next:function(s){t(s),i.unsubscribe()},error:r,complete:function(){r(new P5)}});n.subscribe(i)})}function Sb(n,e){return Hi(function(t,r){var i=0;t.subscribe(Ko(r,function(s){r.next(n.call(e,s,i++))}))})}function M5(n,e,t,r,i,s,o,a){var c=[],u=0,l=0,f=!1,d=function(){f&&!c.length&&!u&&e.complete()},h=function(m){return u<r?p(m):c.push(m)},p=function(m){u++;var g=!1;Vi(t(m,l++)).subscribe(Ko(e,function(x){e.next(x)},function(){g=!0},void 0,function(){if(g)try{u--;for(var x=function(){var b=c.shift();o||p(b)};c.length&&u<r;)x();d()}catch(b){e.error(b)}}))};return n.subscribe(Ko(e,h,function(){f=!0,d()})),function(){}}function Eb(n,e,t){return t===void 0&&(t=1/0),ke(e)?Eb(function(r,i){return Sb(function(s,o){return e(r,s,i,o)})(Vi(n(r,i)))},t):(typeof e=="number"&&(t=e),Hi(function(r,i){return M5(r,i,n,t)}))}function R5(n){return n===void 0&&(n=1/0),Eb(ob,n)}function O5(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=g5(n),r=x5(n,1/0),i=n;return i.length?i.length===1?Vi(i[0]):R5(r)(F5(i,t)):p5}function N5(n,e,t,r,i){return function(s,o){var a=t,c=e,u=0;s.subscribe(Ko(o,function(l){var f=u++;c=a?n(c,l,f):(a=!0,l)},function(){a&&o.next(c),o.complete()}))}}function Cb(n,e){return Hi(N5(n,e,arguments.length>=2,!1,!0))}var L5=function(n,e){return n.push(e),n};function z5(){return Hi(function(n,e){Cb(L5,[])(n).subscribe(e)})}class U5{}class G5{constructor(){this.signals=new Set,this.abortController=new AbortController}addSignal(e=new U5){if(this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(e),e.aborted?this.handleAborted(e):typeof e.addEventListener=="function"&&e.addEventListener("abort",()=>{this.handleAborted(e)})}handleAborted(e){this.signals.delete(e),this.signals.size===0&&this.abortController.abort()}get signal(){return this.abortController.signal}abort(){this.abortController.abort()}}class H5{constructor(){this.callbacks=new Set}addCallback(e=()=>{}){this.callbacks.add(e),this.currentMessage&&e(this.currentMessage)}callback(e){this.currentMessage=e;for(const t of this.callbacks)t(e)}}class _i{constructor({fill:e,cache:t}){if(typeof e!="function")throw new TypeError("must pass a fill function");if(typeof t!="object")throw new TypeError("must pass a cache object");if(typeof t.get!="function"||typeof t.set!="function"||typeof t.delete!="function")throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=t,this.fillCallback=e}static isAbortException(e){return e.name==="AbortError"||e.code==="ERR_ABORTED"||e.message==="AbortError: aborted"||e.message==="Error: aborted"}evict(e,t){this.cache.get(e)===t&&this.cache.delete(e)}fill(e,t,r,i){const s=new G5,o=new H5;o.addCallback(i);const a={aborter:s,promise:this.fillCallback(t,s.signal,c=>{o.callback(c)}),settled:!1,statusReporter:o,get aborted(){return this.aborter.signal.aborted}};a.aborter.addSignal(r),a.aborter.signal.addEventListener("abort",()=>{a.settled||this.evict(e,a)}),a.promise.then(()=>{a.settled=!0},()=>{a.settled=!0,this.evict(e,a)}).catch(c=>{throw console.error(c),c}),this.cache.set(e,a)}static checkSinglePromise(e,t){function r(){if(t!=null&&t.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return e.then(i=>(r(),i),i=>{throw r(),i})}has(e){return this.cache.has(e)}get(e,t,r,i){if(!r&&t instanceof AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");const s=this.cache.get(e);return s?s.aborted&&!s.settled?(this.evict(e,s),this.get(e,t,r,i)):s.settled?s.promise:(s.aborter.addSignal(r),s.statusReporter.addCallback(i),_i.checkSinglePromise(s.promise,r)):(this.fill(e,t,r,i),_i.checkSinglePromise(this.cache.get(e).promise,r))}delete(e){const t=this.cache.get(e);t&&(t.settled||t.aborter.abort(),this.cache.delete(e))}clear(){const e=this.cache.keys();let t=0;for(let r=e.next();!r.done;r=e.next())this.delete(r.value),t+=1;return t}}function V5(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Kh,Db;function _5(){if(Db)return Kh;Db=1;class n{constructor(t={}){if(!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(t,r){this.cache.set(t,r),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t)){const r=this.oldCache.get(t);return this.oldCache.delete(t),this._set(t,r),r}}set(t,r){return this.cache.has(t)?this.cache.set(t,r):this._set(t,r),this}has(t){return this.cache.has(t)||this.oldCache.has(t)}peek(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t))return this.oldCache.get(t)}delete(t){const r=this.cache.delete(t);return r&&this._size--,this.oldCache.delete(t)||r}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache)yield t;for(const t of this.oldCache){const[r]=t;this.cache.has(r)||(yield t)}}get size(){let t=0;for(const r of this.oldCache.keys())this.cache.has(r)||t++;return this._size+t}}return Kh=n,Kh}var j5=_5();const Vr=V5(j5);class ji{constructor(e){Y(this,"ranges");this.ranges=e}get min(){return this.ranges[0].min}get max(){return this.ranges.at(-1).max}contains(e){for(const t of this.ranges)if(t.min<=e&&t.max>=e)return!0;return!1}isContiguous(){return this.ranges.length>1}getRanges(){return this.ranges.map(e=>new ji([{min:e.min,max:e.max}]))}toString(){return this.ranges.map(e=>`[${e.min}-${e.max}]`).join(",")}union(e){const t=[...this.getRanges(),...e.getRanges()].sort((s,o)=>s.min<o.min?-1:s.min>o.min?1:s.max<o.max?-1:o.max>s.max?1:0),r=[];let i=t[0];for(const s of t)s.min>i.max+1?(r.push(i),i=s):s.max>i.max&&(i=new ji([{min:i.min,max:s.max}]));return r.push(i),r.length===1?r[0]:new ji(r)}}function W5(n){return WF(n.subarray(2),void 0)}let Q5=class extends Error{constructor(t){super(t);Y(this,"code");this.code="ERR_ABORTED"}};function q5(n){n.sort((i,s)=>i.offset-s.offset);const e=[];let t,r;for(const i of n)t&&r&&i.offset-r<=2e3?(t.length=t.length+i.length-r+i.offset,t.blocks.push(i)):e.push(t={blocks:[i],length:i.length,offset:i.offset}),r=t.offset+t.length;return e}function wu(n){if(n&&n.aborted)if(typeof DOMException>"u"){const e=new Q5("aborted");throw e.code="ERR_ABORTED",e}else throw new DOMException("aborted","AbortError")}const Zh=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Jh(n,e,t,r){return n<r&&e>=t}class Ib{constructor(e,t,r,i,s){Y(this,"bbi");Y(this,"refsByName");Y(this,"cirTreeOffset");Y(this,"isCompressed");Y(this,"blockType");Y(this,"cirTreePromise");Y(this,"featureCache",new _i({cache:new Vr({maxSize:1e3}),fill:async({length:e,offset:t},r)=>this.bbi.read(e,t,{signal:r})}));if(this.bbi=e,this.refsByName=t,this.cirTreeOffset=r,this.isCompressed=i,this.blockType=s,!(r>=0))throw new Error("invalid cirTreeOffset!")}async readWigData(e,t,r,i,s){try{const o=this.refsByName[e];o===void 0&&i.complete();const a={chrId:o,start:t,end:r};this.cirTreePromise||(this.cirTreePromise=this.bbi.read(48,this.cirTreeOffset,s));const c=await this.cirTreePromise,l=new DataView(c.buffer).getUint32(4,!0);let f=[],d=0;const h=(x,b,w)=>{try{const S=x.subarray(b),C=new DataView(S.buffer,S.byteOffset,S.length);let v=0;const T=C.getUint8(v);v+=2;const P=C.getUint16(v,!0);if(v+=2,T===1){const F=[];for(let k=0;k<P;k++){const L=C.getUint32(v,!0);v+=4;const U=C.getUint32(v,!0);v+=4;const j=C.getUint32(v,!0);v+=4;const Z=C.getUint32(v,!0);v+=4;const _=Number(C.getBigUint64(v,!0));v+=8;const ee=Number(C.getBigUint64(v,!0));v+=8,F.push({startChrom:L,startBase:U,endBase:Z,endChrom:j,blockOffset:_,blockSize:ee,offset:v})}f=f.concat(F.filter(k=>p(k)).map(k=>({offset:k.blockOffset,length:k.blockSize})))}else if(T===0){const F=[];for(let L=0;L<P;L++){const U=C.getUint32(v,!0);v+=4;const j=C.getUint32(v,!0);v+=4;const Z=C.getUint32(v,!0);v+=4;const _=C.getUint32(v,!0);v+=4;const ee=Number(C.getBigUint64(v,!0));v+=8,F.push({startChrom:U,startBase:j,endChrom:Z,endBase:_,blockOffset:ee,offset:v})}const k=F.filter(L=>p(L)).map(L=>L.blockOffset);k.length>0&&g(k,w+1)}}catch(A){i.error(A)}},p=x=>{const{startChrom:b,startBase:w,endChrom:A,endBase:S}=x;return(b<o||b===o&&w<=r)&&(A>o||A===o&&S>=t)},m=async(x,b,w)=>{try{const A=b.max-b.min,S=b.min,C=await this.featureCache.get(`${A}_${S}`,{length:A,offset:S},s==null?void 0:s.signal);for(const v of x)b.contains(v)&&(h(C,v-S,w),d-=1,d===0&&this.readFeatures(i,f,{...s,request:a}).catch(T=>{i.error(T)}))}catch(A){i.error(A)}},g=(x,b)=>{try{d+=x.length;const w=4+l*32;let A=new ji([{min:x[0],max:x[0]+w}]);for(let S=1;S<x.length;S+=1){const C=new ji([{min:x[S],max:x[S]+w}]);A=A.union(C)}A.getRanges().map(S=>m(x,S,b))}catch(w){i.error(w)}};g([this.cirTreeOffset+48],1);return}catch(o){i.error(o)}}parseSummaryBlock(e,t,r){const i=[];let s=t;const o=new DataView(e.buffer,e.byteOffset,e.length);for(;s<e.byteLength;){const a=o.getUint32(s,!0);s+=4;const c=o.getUint32(s,!0);s+=4;const u=o.getUint32(s,!0);s+=4;const l=o.getUint32(s,!0);s+=4;const f=o.getFloat32(s,!0);s+=4;const d=o.getFloat32(s,!0);s+=4;const h=o.getFloat32(s,!0);s+=4,s+=4,(!r||a===r.chrId&&Jh(c,u,r.start,r.end))&&i.push({start:c,end:u,maxScore:d,minScore:f,summary:!0,score:h/(l||1)})}return i}parseBigBedBlock(e,t,r,i){const s=[];let o=t;const a=e,c=new DataView(a.buffer,a.byteOffset,a.length);for(;o<e.byteLength;){const u=o,l=c.getUint32(o,!0);o+=4;const f=c.getInt32(o,!0);o+=4;const d=c.getInt32(o,!0);o+=4;let h=o;for(;h<e.length&&e[h]!==0;h++);const p=e.subarray(o,h),m=(Zh==null?void 0:Zh.decode(p))??p.toString();o=h+1,s.push({chromId:l,start:f,end:d,rest:m,uniqueId:`bb-${r+u}`})}return i?s.filter(u=>Jh(u.start,u.end,i.start,i.end)):s}parseBigWigBlock(e,t,r){const i=e.subarray(t),s=new DataView(i.buffer,i.byteOffset,i.length);let o=0;o+=4;const a=s.getInt32(o,!0);o+=8;const c=s.getUint32(o,!0);o+=4;const u=s.getUint32(o,!0);o+=4;const l=s.getUint8(o);o+=2;const f=s.getUint16(o,!0);o+=2;const d=new Array(f);switch(l){case 1:{for(let h=0;h<f;h++){const p=s.getInt32(o,!0);o+=4;const m=s.getInt32(o,!0);o+=4;const g=s.getFloat32(o,!0);o+=4,d[h]={start:p,end:m,score:g}}break}case 2:{for(let h=0;h<f;h++){const p=s.getInt32(o,!0);o+=4;const m=s.getFloat32(o,!0);o+=4,d[h]={score:m,start:p,end:p+u}}break}case 3:{for(let h=0;h<f;h++){const p=s.getFloat32(o,!0);o+=4;const m=a+h*c;d[h]={score:p,start:m,end:m+u}}break}}return r?d.filter(h=>Jh(h.start,h.end,r.start,r.end)):d}async readFeatures(e,t,r={}){try{const{blockType:i,isCompressed:s}=this,{signal:o,request:a}=r,c=q5(t);wu(o),await Promise.all(c.map(async u=>{wu(o);const{length:l,offset:f}=u,d=await this.featureCache.get(`${l}_${f}`,u,o);for(const h of u.blocks){wu(o);let p=d.subarray(h.offset-u.offset);switch(s&&(p=W5(p)),wu(o),i){case"summary":{e.next(this.parseSummaryBlock(p,0,a));break}case"bigwig":{e.next(this.parseBigWigBlock(p,0,a));break}case"bigbed":{e.next(this.parseBigBedBlock(p,0,h.offset*256,a));break}default:console.warn(`Don't know what to do with ${i}`)}}})),e.complete()}catch(i){e.error(i)}}}const Y5=-2003829722,Tb=-2021002517;function Wi(n){return new DataView(n.buffer,n.byteOffset,n.length)}class Bb{constructor(e){Y(this,"bbi");Y(this,"headerP");Y(this,"renameRefSeqs");const{filehandle:t,renameRefSeqs:r=o=>o,path:i,url:s}=e;if(this.renameRefSeqs=r,t)this.bbi=t;else if(s)this.bbi=new Yt(s);else if(i)this.bbi=new qe(i);else throw new Error("no file given")}getHeader(e){return this.headerP||(this.headerP=this._getHeader(e).catch(t=>{throw this.headerP=void 0,t})),this.headerP}async _getHeader(e){const t=await this._getMainHeader(e),r=await this._readChromTree(t,e);return{...t,...r}}async _getMainHeader(e,t=2e3){const r=await this.bbi.read(t,0,e),i=Wi(r),s=i.getInt32(0,!0);if(s!==Y5&&s!==Tb)throw new Error("not a BigWig/BigBed file");let o=0;const a=i.getInt32(o,!0);o+=4;const c=i.getUint16(o,!0);o+=2;const u=i.getUint16(o,!0);o+=2;const l=Number(i.getBigUint64(o,!0));o+=8;const f=Number(i.getBigUint64(o,!0));o+=8;const d=Number(i.getBigUint64(o,!0));o+=8;const h=i.getUint16(o,!0);o+=2;const p=i.getUint16(o,!0);o+=2;const m=Number(i.getBigUint64(o,!0));o+=8;const g=Number(i.getBigUint64(o,!0));o+=8;const x=i.getUint32(o,!0);o+=4;const b=Number(i.getBigUint64(o,!0));o+=8;const w=[];for(let v=0;v<u;v++){const T=i.getUint32(o,!0);o+=4;const P=i.getUint32(o,!0);o+=4;const F=Number(i.getBigUint64(o,!0));o+=8;const k=Number(i.getBigUint64(o,!0));o+=8,w.push({reductionLevel:T,reserved:P,dataOffset:F,indexOffset:k})}const A=a===Tb?"bigbed":"bigwig";if(m>t||g>t-8*5)return this._getMainHeader(e,t*2);let S;if(g){const v=r.subarray(g);let T=0;const P=Wi(v),F=Number(P.getBigUint64(T,!0));T+=8;const k=P.getFloat64(T,!0);T+=8;const L=P.getFloat64(T,!0);T+=8;const U=P.getFloat64(T,!0);T+=8;const j=P.getFloat64(T,!0);T+=8,S={scoreMin:k,scoreMax:L,scoreSum:U,scoreSumSquares:j,basesCovered:F}}else throw new Error("no stats");const C=new TextDecoder("utf8");return{zoomLevels:w,magic:a,extHeaderOffset:b,numZoomLevels:u,fieldCount:h,totalSummary:S,definedFieldCount:p,uncompressBufSize:x,asOffset:m,chromTreeOffset:l,totalSummaryOffset:g,unzoomedDataOffset:f,unzoomedIndexOffset:d,fileType:A,version:c,autoSql:m?C.decode(r.subarray(m,r.indexOf(0,m))):""}}async _readChromTree(e,t){const r=[],i={},s=e.chromTreeOffset,o=Wi(await this.bbi.read(32,s,t));let a=0;a+=4,a+=4;const c=o.getUint32(a,!0);a+=4;const u=o.getUint32(a,!0);a+=4,a+=8;const l=new TextDecoder("utf8"),f=async d=>{const h=await this.bbi.read(4,d),p=Wi(h);let m=0;const g=p.getUint8(m);m+=1,m+=1;const x=p.getUint16(m,!0);if(m+=2,g){const b=await this.bbi.read(x*(c+u),d+m),w=Wi(b);m=0;for(let A=0;A<x;A++){const S=l.decode(b.subarray(m,m+c)).replaceAll("\0","");m+=c;const C=w.getUint32(m,!0);m+=4;const v=w.getUint32(m,!0);m+=4,i[this.renameRefSeqs(S)]=C,r[C]={name:S,id:C,length:v}}}else{const b=[],w=Wi(await this.bbi.read(x*(c+8),d+m));m=0;for(let A=0;A<x;A++){m+=c;const S=Number(w.getBigUint64(m,!0));m+=8,b.push(f(S))}await Promise.all(b)}};return await f(s+32),{refsByName:i,refsByNumber:r}}async getUnzoomedView(e){const{unzoomedIndexOffset:t,refsByName:r,uncompressBufSize:i,fileType:s}=await this.getHeader(e);return new Ib(this.bbi,r,t,i>0,s)}async getFeatureStream(e,t,r,i){await this.getHeader(i);const s=this.renameRefSeqs(e);let o;const{basesPerSpan:a,scale:c}=i||{};return a?o=await this.getView(1/a,i):c?o=await this.getView(c,i):o=await this.getView(1,i),new wt(u=>{o.readWigData(s,t,r,u,i).catch(l=>{u.error(l)})})}async getFeatures(e,t,r,i){const s=await this.getFeatureStream(e,t,r,i);return(await vb(s.pipe(z5()))).flat()}}class X5 extends Bb{async getView(e,t){const{zoomLevels:r,refsByName:i,uncompressBufSize:s}=await this.getHeader(t),o=1/e,a=r.length-1;for(let c=a;c>=0;c-=1){const u=r[c];if(u&&u.reductionLevel<=2*o)return new Ib(this.bbi,i,u.indexOffset,s>0,"summary")}return this.getUnzoomedView(t)}}function K5(n){return n.filter(e=>!!e)}class Z5 extends Bb{constructor(){super(...arguments);Y(this,"readIndicesCache",new _i({cache:new Vr({maxSize:1}),fill:(t,r)=>this._readIndices({...t,signal:r})}))}readIndices(t={}){const{signal:r,...i}=t;return this.readIndicesCache.get(JSON.stringify(i),t,r)}async getView(t,r){return this.getUnzoomedView(r)}async _readIndices(t){const{extHeaderOffset:r}=await this.getHeader(t),i=await this.bbi.read(64,r),s=new DataView(i.buffer,i.byteOffset,i.length);let o=0;o+=2;const a=s.getUint16(o,!0);o+=2;const c=Number(s.getBigUint64(o,!0));if(o+=8,a===0)return[];const u=20,l=u*a,f=await this.bbi.read(l,c),d=[];for(let h=0;h<a;h+=1){const p=f.subarray(h*u),m=new DataView(p.buffer,p.byteOffset,p.length);let g=0;const x=m.getInt16(g,!0);g+=2;const b=m.getInt16(g,!0);g+=2;const w=Number(m.getBigUint64(g,!0));g+=12;const A=m.getInt16(g,!0);d.push({type:x,fieldcount:b,offset:w,field:A})}return d}async searchExtraIndexBlocks(t,r={}){const i=await this.readIndices(r);if(i.length===0)return[];const s=new TextDecoder("utf8"),o=i.map(async a=>{const{offset:c,field:u}=a,l=await this.bbi.read(32,c,r),f=new DataView(l.buffer,l.byteOffset,l.length);let d=0;d+=4;const h=f.getInt32(d,!0);d+=4;const p=f.getInt32(d,!0);d+=4;const m=f.getInt32(d,!0);d+=4,d+=8;const g=async x=>{const b=x,w=4+h*(p+m),S=await this.bbi.read(w,b,r),C=new DataView(S.buffer,S.byteOffset,S.length);let v=0;const T=C.getInt8(v);v+=2;const P=C.getInt16(v,!0);v+=2;const F=[];if(T===0){const k=[];for(let U=0;U<P;U++){const j=s.decode(S.subarray(v,v+p)).replaceAll("\0","");v+=p;const Z=Number(C.getBigUint64(v,!0));v+=8,k.push({key:j,offset:Z})}let L=0;for(const{key:U,offset:j}of k){if(t.localeCompare(U)<0&&L)return g(L);L=j}return g(L)}else if(T===1){for(let k=0;k<P;k++){const L=s.decode(S.subarray(v,v+p)).replaceAll("\0","");v+=p;const U=Number(C.getBigUint64(v,!0));v+=8;const j=C.getUint32(v,!0);v+=4;const Z=C.getUint32(v,!0);v+=4,F.push({key:L,offset:U,length:j,reserved:Z})}for(const k of F)if(k.key===t)return{...k,field:u};return}};return g(c+32)});return K5(await Promise.all(o))}async searchExtraIndex(t,r={}){const i=await this.searchExtraIndexBlocks(t,r);if(i.length===0)return[];const s=await this.getUnzoomedView(r),o=i.map(c=>new wt(u=>{s.readFeatures(u,[c],r).catch(l=>{u.error(l)})}).pipe(Cb((u,l)=>u.concat(l)),Sb(u=>{for(const l of u)l.field=c.field;return u})));return(await vb(O5(...o))).filter(c=>{var u;return((u=c.rest)==null?void 0:u.split("	")[(c.field||0)-3])===t})}}const kb=Object.freeze(Object.defineProperty({__proto__:null,BigBed:Z5,BigWig:X5},Symbol.toStringTag,{value:"Module"}));function J5(n,e){function t(){this.constructor=n}t.prototype=e.prototype,n.prototype=new t}function Qi(n,e,t,r){this.message=n,this.expected=e,this.found=t,this.location=r,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Qi)}J5(Qi,Error),Qi.buildMessage=function(n,e){var t={literal:function(u){return'"'+i(u.text)+'"'},class:function(u){var l="",f;for(f=0;f<u.parts.length;f++)l+=u.parts[f]instanceof Array?s(u.parts[f][0])+"-"+s(u.parts[f][1]):s(u.parts[f]);return"["+(u.inverted?"^":"")+l+"]"},any:function(u){return"any character"},end:function(u){return"end of input"},other:function(u){return u.description}};function r(u){return u.charCodeAt(0).toString(16).toUpperCase()}function i(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(l){return"\\x0"+r(l)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(l){return"\\x"+r(l)})}function s(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(l){return"\\x0"+r(l)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(l){return"\\x"+r(l)})}function o(u){return t[u.type](u)}function a(u){var l=new Array(u.length),f,d;for(f=0;f<u.length;f++)l[f]=o(u[f]);if(l.sort(),l.length>0){for(f=1,d=1;f<l.length;f++)l[f-1]!==l[f]&&(l[d]=l[f],d++);l.length=d}switch(l.length){case 1:return l[0];case 2:return l[0]+" or "+l[1];default:return l.slice(0,-1).join(", ")+", or "+l[l.length-1]}}function c(u){return u?'"'+i(u)+'"':"end of input"}return"Expected "+a(n)+" but "+c(e)+" found."};function $5(n,e){e=e!==void 0?e:{};var t={},r={declaration:bw},i=bw,s="(",o=de("(",!1),a=")",c=de(")",!1),u=function(y,I,N,z){return{type:y,name:I,comment:N,fields:z}},l="simple",f=de("simple",!1),d="object",h=de("object",!1),p="table",m=de("table",!1),g="auto",x=de("auto",!1),b="primary",w=de("primary",!1),A="index",S=de("index",!1),C="unique",v=de("unique",!1),T=function(y,I){return I},P=function(y,I){return y.name&&I.unshift(y),I},F="#",k=de("#",!1),L=";",U=de(";",!1),j=function(y,I,N){return{type:y,name:I,comment:N}},Z="[",_=de("[",!1),ee="]",ce=de("]",!1),ie=function(y,I,N,z){return{type:y,size:I,name:N,comment:z}},Ne=function(y,I,N,z){return{type:y,vals:I,name:N,comment:z}},Se=",",Zt=de(",",!1),Jt=function(y,I){return I.unshift(y),I},rr="int",Ds=de("int",!1),De="uint",St=de("uint",!1),ut="short",H=de("short",!1),J="ushort",te=de("ushort",!1),M="byte",Ye=de("byte",!1),he="ubyte",tt=de("ubyte",!1),Xe="float",bn=de("float",!1),Da="char",lP=de("char",!1),tw="string",fP=de("string",!1),nw="lstring",hP=de("lstring",!1),rw="enum",dP=de("enum",!1),iw="double",pP=de("double",!1),sw="bigint",mP=de("bigint",!1),ow="set",gP=de("set",!1),xP=function(y,I){return y+" "+I},yP=/^[a-zA-Z_]/,bP=Ia([["a","z"],["A","Z"],"_"],!1,!1),aw=/^[a-zA-Z0-9_]/,cw=Ia([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),wP=function(y){return mw()},uw=/^[^\n\r]/,lw=Ia([`
`,"\r"],!0,!1),AP=function(y){return y.join("").replace(/^"/,"").replace(/"$/,"")},vP=gw("integer"),fw=/^[0-9]/,hw=Ia([["0","9"]],!1,!1),SP=function(){return parseInt(mw(),10)},EP=gw("whitespace"),dw=/^[ \t\n\r]/,pw=Ia([" ","	",`
`,"\r"],!1,!1),D=0,nt=0,ku=[{line:1,column:1}],$t=0,cd=[],Q=0,Fu;if("startRule"in e){if(!(e.startRule in r))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');i=r[e.startRule]}function mw(){return n.substring(nt,D)}function de(y,I){return{type:"literal",text:y,ignoreCase:I}}function Ia(y,I,N){return{type:"class",parts:y,inverted:I,ignoreCase:N}}function CP(){return{type:"end"}}function gw(y){return{type:"other",description:y}}function xw(y){var I=ku[y],N;if(I)return I;for(N=y-1;!ku[N];)N--;for(I=ku[N],I={line:I.line,column:I.column};N<y;)n.charCodeAt(N)===10?(I.line++,I.column=1):I.column++,N++;return ku[y]=I,I}function yw(y,I){var N=xw(y),z=xw(I);return{start:{offset:y,line:N.line,column:N.column},end:{offset:I,line:z.line,column:z.column}}}function X(y){D<$t||(D>$t&&($t=D,cd=[]),cd.push(y))}function DP(y,I,N){return new Qi(Qi.buildMessage(y,I),y,I,N)}function bw(){var y,I,N,z,W,pe,Ae,Et,ir,wn,sr,An,or,vn;return y=D,I=se(),I!==t?(N=ww(),N!==t?(z=se(),z!==t?(W=Aw(),W!==t?(pe=se(),pe!==t?(Ae=Pu(),Ae!==t?(Et=se(),Et!==t?(n.charCodeAt(D)===40?(ir=s,D++):(ir=t,Q===0&&X(o)),ir!==t?(wn=se(),wn!==t?(sr=IP(),sr!==t?(An=se(),An!==t?(n.charCodeAt(D)===41?(or=a,D++):(or=t,Q===0&&X(c)),or!==t?(vn=se(),vn!==t?(nt=y,I=u(N,W,Ae,sr),y=I):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t),y}function ww(){var y;return n.substr(D,6)===l?(y=l,D+=6):(y=t,Q===0&&X(f)),y===t&&(n.substr(D,6)===d?(y=d,D+=6):(y=t,Q===0&&X(h)),y===t&&(n.substr(D,5)===p?(y=p,D+=5):(y=t,Q===0&&X(m)))),y}function Aw(){var y,I,N,z;return y=Ot(),y===t&&(y=D,I=Ot(),I!==t?(N=vw(),N!==t?(I=[I,N],y=I):(D=y,y=t)):(D=y,y=t),y===t&&(y=D,I=Ot(),I!==t?(n.substr(D,4)===g?(N=g,D+=4):(N=t,Q===0&&X(x)),N!==t?(I=[I,N],y=I):(D=y,y=t)):(D=y,y=t),y===t&&(y=D,I=Ot(),I!==t?(N=vw(),N!==t?(n.substr(D,4)===g?(z=g,D+=4):(z=t,Q===0&&X(x)),z!==t?(I=[I,N,z],y=I):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)))),y}function vw(){var y;return n.substr(D,7)===b?(y=b,D+=7):(y=t,Q===0&&X(w)),y===t&&(n.substr(D,5)===A?(y=A,D+=5):(y=t,Q===0&&X(S)),y===t&&(n.substr(D,6)===C?(y=C,D+=6):(y=t,Q===0&&X(v)))),y}function Pu(){var y;return y=Sw(),y===t&&(y=se()),y}function IP(){var y,I,N,z,W,pe,Ae;if(y=D,I=ud(),I!==t)if(N=se(),N!==t){for(z=[],W=D,pe=se(),pe!==t?(Ae=ud(),Ae!==t?(nt=W,pe=T(I,Ae),W=pe):(D=W,W=t)):(D=W,W=t);W!==t;)z.push(W),W=D,pe=se(),pe!==t?(Ae=ud(),Ae!==t?(nt=W,pe=T(I,Ae),W=pe):(D=W,W=t)):(D=W,W=t);z!==t?(W=se(),W!==t?(nt=y,I=P(I,z),y=I):(D=y,y=t)):(D=y,y=t)}else D=y,y=t;else D=y,y=t;return y}function TP(){var y;return n.charCodeAt(D)===35?(y=F,D++):(y=t,Q===0&&X(k)),y}function BP(){var y,I,N,z,W;return y=D,I=se(),I!==t?(N=TP(),N!==t?(z=Sw(),z!==t?(W=se(),W!==t?(I=[I,N,z,W],y=I):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t),y}function ud(){var y,I,N,z,W,pe,Ae,Et,ir,wn,sr,An,or,vn;return y=D,I=ld(),I!==t?(N=se(),N!==t?(z=Ot(),z!==t?(W=se(),W!==t?(n.charCodeAt(D)===59?(pe=L,D++):(pe=t,Q===0&&X(U)),pe!==t?(Ae=se(),Ae!==t?(Et=Pu(),Et!==t?(nt=y,I=j(I,z,Et),y=I):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t),y===t&&(y=D,I=ld(),I!==t?(N=se(),N!==t?(n.charCodeAt(D)===91?(z=Z,D++):(z=t,Q===0&&X(_)),z!==t?(W=se(),W!==t?(pe=FP(),pe!==t?(Ae=se(),Ae!==t?(n.charCodeAt(D)===93?(Et=ee,D++):(Et=t,Q===0&&X(ce)),Et!==t?(ir=se(),ir!==t?(wn=Ot(),wn!==t?(sr=se(),sr!==t?(n.charCodeAt(D)===59?(An=L,D++):(An=t,Q===0&&X(U)),An!==t?(or=se(),or!==t?(vn=Pu(),vn!==t?(nt=y,I=ie(I,pe,wn,vn),y=I):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t),y===t&&(y=D,I=ld(),I!==t?(N=se(),N!==t?(n.charCodeAt(D)===40?(z=s,D++):(z=t,Q===0&&X(o)),z!==t?(W=se(),W!==t?(pe=kP(),pe!==t?(Ae=se(),Ae!==t?(n.charCodeAt(D)===41?(Et=a,D++):(Et=t,Q===0&&X(c)),Et!==t?(ir=se(),ir!==t?(wn=Ot(),wn!==t?(sr=se(),sr!==t?(n.charCodeAt(D)===59?(An=L,D++):(An=t,Q===0&&X(U)),An!==t?(or=se(),or!==t?(vn=Pu(),vn!==t?(nt=y,I=Ne(I,pe,wn,vn),y=I):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t)):(D=y,y=t),y===t&&(y=BP()))),y}function kP(){var y,I,N,z,W,pe,Ae;if(y=D,I=Ot(),I!==t){for(N=[],z=D,n.charCodeAt(D)===44?(W=Se,D++):(W=t,Q===0&&X(Zt)),W!==t?(pe=se(),pe!==t?(Ae=Ot(),Ae!==t?(nt=z,W=T(I,Ae),z=W):(D=z,z=t)):(D=z,z=t)):(D=z,z=t);z!==t;)N.push(z),z=D,n.charCodeAt(D)===44?(W=Se,D++):(W=t,Q===0&&X(Zt)),W!==t?(pe=se(),pe!==t?(Ae=Ot(),Ae!==t?(nt=z,W=T(I,Ae),z=W):(D=z,z=t)):(D=z,z=t)):(D=z,z=t);N!==t?(nt=y,I=Jt(I,N),y=I):(D=y,y=t)}else D=y,y=t;return y}function ld(){var y,I,N,z;return n.substr(D,3)===rr?(y=rr,D+=3):(y=t,Q===0&&X(Ds)),y===t&&(n.substr(D,4)===De?(y=De,D+=4):(y=t,Q===0&&X(St)),y===t&&(n.substr(D,5)===ut?(y=ut,D+=5):(y=t,Q===0&&X(H)),y===t&&(n.substr(D,6)===J?(y=J,D+=6):(y=t,Q===0&&X(te)),y===t&&(n.substr(D,4)===M?(y=M,D+=4):(y=t,Q===0&&X(Ye)),y===t&&(n.substr(D,5)===he?(y=he,D+=5):(y=t,Q===0&&X(tt)),y===t&&(n.substr(D,5)===Xe?(y=Xe,D+=5):(y=t,Q===0&&X(bn)),y===t&&(n.substr(D,4)===Da?(y=Da,D+=4):(y=t,Q===0&&X(lP)),y===t&&(n.substr(D,6)===tw?(y=tw,D+=6):(y=t,Q===0&&X(fP)),y===t&&(n.substr(D,7)===nw?(y=nw,D+=7):(y=t,Q===0&&X(hP)),y===t&&(n.substr(D,4)===rw?(y=rw,D+=4):(y=t,Q===0&&X(dP)),y===t&&(n.substr(D,6)===iw?(y=iw,D+=6):(y=t,Q===0&&X(pP)),y===t&&(n.substr(D,6)===sw?(y=sw,D+=6):(y=t,Q===0&&X(mP)),y===t&&(n.substr(D,3)===ow?(y=ow,D+=3):(y=t,Q===0&&X(gP)),y===t&&(y=D,I=ww(),I!==t?(N=se(),N!==t?(z=Aw(),z!==t?(nt=y,I=xP(I,z),y=I):(D=y,y=t)):(D=y,y=t)):(D=y,y=t))))))))))))))),y}function FP(){var y;return y=PP(),y===t&&(y=Ot()),y}function Ot(){var y,I,N,z,W;if(y=D,I=D,yP.test(n.charAt(D))?(N=n.charAt(D),D++):(N=t,Q===0&&X(bP)),N!==t){for(z=[],aw.test(n.charAt(D))?(W=n.charAt(D),D++):(W=t,Q===0&&X(cw));W!==t;)z.push(W),aw.test(n.charAt(D))?(W=n.charAt(D),D++):(W=t,Q===0&&X(cw));z!==t?(N=[N,z],I=N):(D=I,I=t)}else D=I,I=t;return I!==t&&(nt=y,I=wP()),y=I,y}function Sw(){var y,I,N;for(y=D,I=[],uw.test(n.charAt(D))?(N=n.charAt(D),D++):(N=t,Q===0&&X(lw));N!==t;)I.push(N),uw.test(n.charAt(D))?(N=n.charAt(D),D++):(N=t,Q===0&&X(lw));return I!==t&&(nt=y,I=AP(I)),y=I,y}function PP(){var y,I,N,z;if(Q++,y=D,I=se(),I!==t){if(N=[],fw.test(n.charAt(D))?(z=n.charAt(D),D++):(z=t,Q===0&&X(hw)),z!==t)for(;z!==t;)N.push(z),fw.test(n.charAt(D))?(z=n.charAt(D),D++):(z=t,Q===0&&X(hw));else N=t;N!==t?(nt=y,I=SP(),y=I):(D=y,y=t)}else D=y,y=t;return Q--,y===t&&(I=t,Q===0&&X(vP)),y}function se(){var y,I;for(Q++,y=[],dw.test(n.charAt(D))?(I=n.charAt(D),D++):(I=t,Q===0&&X(pw));I!==t;)y.push(I),dw.test(n.charAt(D))?(I=n.charAt(D),D++):(I=t,Q===0&&X(pw));return Q--,y===t&&(I=t,Q===0&&X(EP)),y}if(Fu=i(),Fu!==t&&D===n.length)return Fu;throw Fu!==t&&D<n.length&&X(CP()),DP(cd,$t<n.length?n.charAt($t):null,$t<n.length?yw($t,$t+1):yw($t,$t))}const Fb={SyntaxError:Qi,parse:$5},$h=Object.fromEntries(Object.entries(Object.freeze(Object.defineProperty({__proto__:null,bigChain:`table bigChain
"bigChain pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint score;         "Score (0-1000)"
    char[1] strand;     "+ or - for strand"
    uint tSize;         "size of target sequence"
    string qName;       "name of query sequence"
    uint qSize;         "size of query sequence"
    uint qStart;        "start of alignment on query sequence"
    uint qEnd;          "end of alignment on query sequence"
    uint chainScore;    "score from chain"
    )`,bigGenePred:`table bigGenePred
"bigGenePred gene models"
   (
   string chrom;       "Reference sequence chromosome or scaffold"
   uint   chromStart;  "Start position in chromosome"
   uint   chromEnd;    "End position in chromosome"
   string name;        "Name or ID of item, ideally both human readable and unique"
   uint score;         "Score (0-1000)"
   char[1] strand;     "+ or - for strand"
   uint thickStart;    "Start of where display should be thick (start codon)"
   uint thickEnd;      "End of where display should be thick (stop codon)"
   uint reserved;       "RGB value (use R,G,B string in input file)"
   int blockCount;     "Number of blocks"
   int[blockCount] blockSizes; "Comma separated list of block sizes"
   int[blockCount] chromStarts; "Start positions relative to chromStart"
   string name2;       "Alternative/human readable name"
   string cdsStartStat; "Status of CDS start annotation (none, unknown, incomplete, or complete)"
   string cdsEndStat;   "Status of CDS end annotation (none, unknown, incomplete, or complete)"
   int[blockCount] exonFrames; "Exon frame {0,1,2}, or -1 if no frame for exon"
   string type;        "Transcript type"
   string geneName;    "Primary identifier for gene"
   string geneName2;   "Alternative/human readable gene name"
   string geneType;    "Gene type"
   )`,bigInteract:`table interact
"interaction between two regions"
    (
    string chrom;        "Chromosome (or contig, scaffold, etc.). For interchromosomal, use 2 records"
    uint chromStart;     "Start position of lower region. For interchromosomal, set to chromStart of this region"
    uint chromEnd;       "End position of upper region. For interchromosomal, set to chromEnd of this region"
    string name;         "Name of item, for display.  Usually 'sourceName/targetName/exp' or empty"
    uint score;          "Score (0-1000)"
    double value;        "Strength of interaction or other data value. Typically basis for score"
    string exp;          "Experiment name (metadata for filtering). Use . if not applicable"
    string color;        "Item color.  Specified as r,g,b or hexadecimal #RRGGBB or html color name, as in //www.w3.org/TR/css3-color/#html4. Use 0 and spectrum setting to shade by score"
    string sourceChrom;  "Chromosome of source region (directional) or lower region. For non-directional interchromosomal, chrom of this region."
    uint sourceStart;    "Start position in chromosome of source/lower/this region"
    uint sourceEnd;      "End position in chromosome of source/lower/this region"
    string sourceName;   "Identifier of source/lower/this region"
    string sourceStrand; "Orientation of source/lower/this region: + or -.  Use . if not applicable"
    string targetChrom;  "Chromosome of target region (directional) or upper region. For non-directional interchromosomal, chrom of other region"
    uint targetStart;    "Start position in chromosome of target/upper/this region"
    uint targetEnd;      "End position in chromosome of target/upper/this region"
    string targetName;   "Identifier of target/upper/this region"
    string targetStrand; "Orientation of target/upper/this region: + or -.  Use . if not applicable"

    )`,bigLink:`table bigLink
"bigLink pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint qStart;        "start of alignment on query sequence"
    )`,bigMaf:`table bedMaf
"Bed3 with MAF block"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start position in chromosome"
    uint   chromEnd;   "End position in chromosome"
    lstring mafBlock;   "MAF block"
    )`,bigNarrowPeak:`table bigNarrowPeak
"BED6+4 Peaks of signal enrichment based on pooled, normalized (interpreted) data."
(
    string chrom;        "Reference sequence chromosome or scaffold"
    uint   chromStart;   "Start position in chromosome"
    uint   chromEnd;     "End position in chromosome"
    string name;	 "Name given to a region (preferably unique). Use . if no name is assigned"
    uint   score;        "Indicates how dark the peak will be displayed in the browser (0-1000) "
    char[1]  strand;     "+ or - or . for unknown"
    float  signalValue;  "Measurement of average enrichment for the region"
    float  pValue;       "Statistical significance of signal value (-log10). Set to -1 if not used."
    float  qValue;       "Statistical significance with multiple-test correction applied (FDR -log10). Set to -1 if not used."
    int   peak;         "Point-source called for this peak; 0-based offset from chromStart. Set to -1 if no point-source called."
)`,bigPsl:`table bigPsl
"bigPsl pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint score;         "Score (0-1000)"
    char[1] strand;     "+ or - indicates whether the query aligns to the + or - strand on the reference"
    uint thickStart;    "Start of where display should be thick (start codon)"
    uint thickEnd;      "End of where display should be thick (stop codon)"
    uint reserved;       "RGB value (use R,G,B string in input file)"
    int blockCount;     "Number of blocks"
    int[blockCount] blockSizes; "Comma separated list of block sizes"
    int[blockCount] chromStarts; "Start positions relative to chromStart"

    uint    oChromStart;"Start position in other chromosome"
    uint    oChromEnd;  "End position in other chromosome"
    char[1] oStrand;    "+ or -, - means that psl was reversed into BED-compatible coordinates"
    uint    oChromSize; "Size of other chromosome."
    int[blockCount] oChromStarts; "Start positions relative to oChromStart or from oChromStart+oChromSize depending on strand"

    lstring  oSequence;  "Sequence on other chrom (or empty)"
    string   oCDS;       "CDS in NCBI format"

    uint    chromSize;"Size of target chromosome"

    uint match;        "Number of bases matched."
    uint misMatch; " Number of bases that don't match "
    uint repMatch; " Number of bases that match but are part of repeats "
    uint nCount;   " Number of 'N' bases "
    uint seqType;    "0=empty, 1=nucleotide, 2=amino_acid"
    )`,defaultBedSchema:`table defaultBedSchema
"BED12"
    (
    string chrom;      "The name of the chromosome (e.g. chr3, chrY, chr2_random) or scaffold (e.g. scaffold10671)."
    uint   chromStart; "The starting position of the feature in the chromosome or scaffold. The first base in a chromosome is numbered 0."
    uint   chromEnd;   "The ending position of the feature in the chromosome or scaffold. The chromEnd base is not included in the display of the feature. For example, the first 100 bases of a chromosome are defined as chromStart=0, chromEnd=100, and span the bases numbered 0-99."
    string   name;   "Defines the name of the BED line."
    float   score;   "Feature score, doesn't care about the 0-1000 limit as in bed"
    char   strand;   "Defines the strand. Either '.' (=no strand) or '+' or '-'"
    uint thickStart; "The starting position at which the feature is drawn thickly (for example, the start codon in gene displays). When there is no thick part, thickStart and thickEnd are usually set to the chromStart position."
    uint thickEnd; "The ending position at which the feature is drawn thickly (for example the stop codon in gene displays)."
    string itemRgb; "An RGB value of the form R,G,B (e.g. 255,0,0). "
    uint blockCount; " The number of blocks (exons) in the BED line."
    uint[blockCount] blockSizes; " A comma-separated list of the block sizes. The number of items in this list should correspond to blockCount."
    uint[blockCount] blockStarts; "A comma-separated list of block starts. All of the blockStart positions should be calculated relative to chromStart. The number of items in this list should correspond to blockCount."
    )`,mafFrames:`table mafFrames
"codon frame assignment for MAF components"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start range in chromosome"
    uint   chromEnd;   "End range in chromosome"
    string src;        "Name of sequence source in MAF"
    ubyte frame;       "frame (0,1,2) for first base(+) or last bast(-)"
    char[1] strand;    "+ or -"
    string name;       "Name of gene used to define frame"
    int    prevFramePos;  "target position of the previous base (in transcription direction) that continues this frame, or -1 if none, or frame not contiguous"
    int    nextFramePos;  "target position of the next base (in transcription direction) that continues this frame, or -1 if none, or frame not contiguous"
    ubyte  isExonStart;  "does this start the CDS portion of an exon?"
    ubyte  isExonEnd;    "does this end the CDS portion of an exon?"
    )`,mafSummary:`table mafSummary
"Positions and scores for alignment blocks"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start position in chromosome"
    uint   chromEnd;   "End position in chromosome"
    string src;        "Sequence name or database of alignment"
    float  score;      "Floating point score."
    char[1] leftStatus;  "Gap/break annotation for preceding block"
    char[1] rightStatus; "Gap/break annotation for following block"
    )`},Symbol.toStringTag,{value:"Module"}))).map(([n,e])=>[n,Fb.parse(e.trim())]));function ed(n){const e=new Set(["uint","int","float","long"]);return{...n,fields:n.fields.map(t=>({...t,isArray:t.size&&t.type!=="char",arrayIsNumeric:t.size&&e.has(t.type),isNumeric:!t.size&&e.has(t.type)})).filter(t=>!!t.name)}}const e9={".":0,"-":-1,"+":1};function t9(n){var e;return n.length>=12&&!Number.isNaN(Number.parseInt(n[9],10))&&((e=n[10])==null?void 0:e.split(",").filter(t=>!!t).length)===Number.parseInt(n[9],10)}class n9{constructor(e={}){if(e.autoSql)this.autoSql=ed(Fb.parse(e.autoSql));else if(e.type){if(!$h[e.type])throw new Error("Type not found");this.autoSql=ed($h[e.type])}else this.autoSql=ed($h.defaultBedSchema),this.attemptDefaultBed=!0}parseLine(e,t={}){const{autoSql:r}=this,{uniqueId:i}=t,s=Array.isArray(e)?e:e.split("	");let o={};if(!this.attemptDefaultBed||this.attemptDefaultBed&&t9(s))for(let a=0;a<r.fields.length;a++){const c=r.fields[a];let u=s[a];const{isNumeric:l,isArray:f,arrayIsNumeric:d,name:h}=c;if(u==null)break;if(u!=="."){if(l){const p=Number(u);u=Number.isNaN(p)?u:p}else f&&(u=u.split(","),u.at(-1)===""&&u.pop(),d&&(u=u.map(Number)));o[h]=u}}else{const a=["chrom","chromStart","chromEnd","name"];o=Object.fromEntries(s.map((c,u)=>[a[u]||"field"+u,c])),o.chromStart=+o.chromStart,o.chromEnd=+o.chromEnd,Number.isNaN(Number.parseFloat(o.field4))||(o.score=+o.field4,delete o.field4),(o.field5==="+"||o.field5==="-")&&(o.strand=o.field5,delete o.field5)}return i&&(o.uniqueId=i),o.strand=e9[o.strand]||0,o.chrom=decodeURIComponent(o.chrom),o}}const r9=Object.freeze(Object.defineProperty({__proto__:null,default:n9},Symbol.toStringTag,{value:"Module"}));let td=class{constructor(e,t,r,i){this.minv=e,this.maxv=t,this.bin=r,this._fetchedSize=i}toUniqueString(){return`${this.minv.toString()}..${this.maxv.toString()} (bin ${this.bin}, fetchedSize ${this.fetchedSize()})`}toString(){return this.toUniqueString()}compareTo(e){return this.minv.compareTo(e.minv)||this.maxv.compareTo(e.maxv)||this.bin-e.bin}fetchedSize(){return this._fetchedSize!==void 0?this._fetchedSize:this.maxv.blockPosition+65536-this.minv.blockPosition}},Pb=class{constructor({filehandle:e,renameRefSeq:t=r=>r}){this.filehandle=e,this.renameRefSeq=t}};const Mb=65536,i9=Mb*Mb;function s9(n,e=0){const t=n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24;return((n[e+4]|n[e+5]<<8|n[e+6]<<16|n[e+7]<<24)>>>0)*i9+(t>>>0)}function o9(n,e){return e.minv.blockPosition-n.maxv.blockPosition<65e3&&e.maxv.blockPosition-n.minv.blockPosition<5e6}function a9(n={}){return"aborted"in n?{signal:n}:n}function Rb(n,e){const t=[];let r;if(n.length===0)return n;n.sort((i,s)=>{const o=i.minv.blockPosition-s.minv.blockPosition;return o===0?i.minv.dataPosition-s.minv.dataPosition:o});for(const i of n)(!e||i.maxv.compareTo(e)>0)&&(r===void 0?(t.push(i),r=i):o9(r,i)?i.maxv.compareTo(r.maxv)>0&&(r.maxv=i.maxv):(t.push(i),r=i));return t}function Ob(n,e){return{lineCount:s9(n,e)}}function Zo(n,e){return n?n.compareTo(e)>0?e:n:e}function c9(n,e=t=>t){let t=0,r=0;const i=[],s={};for(let o=0;o<n.length;o+=1)if(!n[o]){if(r<o){let a="";for(let c=r;c<o;c++)a+=String.fromCharCode(n[c]);a=e(a),i[t]=a,s[a]=t}r=o+1,t+=1}return{refNameToId:s,refIdToName:i}}function u9(n){let e=0;for(const i of n)e+=i.length;const t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return t}async function l9(n){const e=[];for await(const t of n)for(const r of t)e.push(r);return e}let Nb=class{constructor(e,t){this.blockPosition=e,this.dataPosition=t}toString(){return`${this.blockPosition}:${this.dataPosition}`}compareTo(e){return this.blockPosition-e.blockPosition||this.dataPosition-e.dataPosition}};function Xn(n,e=0,t=!1){if(t)throw new Error("big-endian virtual file offsets not implemented");return new Nb(n[e+7]*1099511627776+n[e+6]*4294967296+n[e+5]*16777216+n[e+4]*65536+n[e+3]*256+n[e+2],n[e+1]<<8|n[e])}const f9=21578050;function h9(n,e){return n-n%e}function d9(n,e){return n-n%e+e}function p9(n,e){return e-=1,[[0,0],[1+(n>>26),1+(e>>26)],[9+(n>>23),9+(e>>23)],[73+(n>>20),73+(e>>20)],[585+(n>>17),585+(e>>17)],[4681+(n>>14),4681+(e>>14)]]}class qi extends Pb{async lineCount(e,t){var i,s;return((s=(i=(await this.parse(t)).indices(e))==null?void 0:i.stats)==null?void 0:s.lineCount)||0}async _parse(e){const t=await this.filehandle.readFile(),r=new DataView(t.buffer);if(r.getUint32(0,!0)!==f9)throw new Error("Not a BAI file");const i=r.getInt32(4,!0),o=((1<<(5+1)*3)-1)/7;let a=8,c;const u=[];for(let d=0;d<i;d++){u.push(a);const h=r.getInt32(a,!0);a+=4;for(let g=0;g<h;g+=1){const x=r.getUint32(a,!0);if(a+=4,x===o+1)a+=4,a+=32;else{if(x>o+1)throw new Error("bai index contains too many bins, please use CSI");{const b=r.getInt32(a,!0);a+=4;for(let w=0;w<b;w++)a+=8,a+=8}}}const p=r.getInt32(a,!0);a+=4;const m=new Array(p);for(let g=0;g<p;g++){const x=Xn(t,a);a+=8,c=Zo(c,x),m[g]=x}}const l=new Vr({maxSize:5});function f(d){let h=u[d];if(h===void 0)return;const p=r.getInt32(h,!0);let m;h+=4;const g={};for(let w=0;w<p;w+=1){const A=r.getUint32(h,!0);if(h+=4,A===o+1)h+=4,m=Ob(t,h+16),h+=32;else{if(A>o+1)throw new Error("bai index contains too many bins, please use CSI");{const S=r.getInt32(h,!0);h+=4;const C=new Array(S);for(let v=0;v<S;v++){const T=Xn(t,h);h+=8;const P=Xn(t,h);h+=8,c=Zo(c,T),C[v]=new td(T,P,A)}g[A]=C}}}const x=r.getInt32(h,!0);h+=4;const b=new Array(x);for(let w=0;w<x;w++){const A=Xn(t,h);h+=8,c=Zo(c,A),b[w]=A}return{binIndex:g,linearIndex:b,stats:m}}return{bai:!0,firstDataLine:c,maxBlockSize:65536,indices:d=>{if(!l.has(d)){const h=f(d);return h&&l.set(d,h),h}return l.get(d)},refCount:i}}async indexCov(e,t,r,i){const o=t!==void 0,c=(await this.parse(i)).indices(e);if(!c)return[];const{linearIndex:u=[],stats:l}=c;if(u.length===0)return[];const f=r===void 0?(u.length-1)*16384:d9(r,16384),d=t===void 0?0:h9(t,16384),h=o?new Array((f-d)/16384):new Array(u.length-1),p=u[u.length-1].blockPosition;if(f>(u.length-1)*16384)throw new Error("query outside of range of linear index");let m=u[d/16384].blockPosition;for(let g=d/16384,x=0;g<f/16384;g++,x++)h[x]={score:u[g+1].blockPosition-m,start:g*16384,end:g*16384+16384},m=u[g+1].blockPosition;return h.map(g=>({...g,score:g.score*((l==null?void 0:l.lineCount)||0)/p}))}async blocksForRange(e,t,r,i={}){t<0&&(t=0);const s=await this.parse(i);if(!s)return[];const o=s.indices(e);if(!o)return[];const a=p9(t,r),c=[];for(const[h,p]of a)for(let m=h;m<=p;m++)if(o.binIndex[m]){const g=o.binIndex[m];for(const x of g)c.push(new td(x.minv,x.maxv,m))}const u=o.linearIndex.length;let l;const f=Math.min(t>>14,u-1),d=Math.min(r>>14,u-1);for(let h=f;h<=d;++h){const p=o.linearIndex[h];p&&(!l||p.compareTo(l)<0)&&(l=p)}return Rb(c,l)}async parse(e={}){return this.setupP||(this.setupP=this._parse(e).catch(t=>{throw this.setupP=void 0,t})),this.setupP}async hasRefSeq(e,t={}){var i;return!!((i=(await this.parse(t)).indices(e))!=null&&i.binIndex)}}function m9(n){let e=0;for(const t of n)e+=t.length;return e}function Lb(n,e){const t=new Uint8Array(e??m9(n));let r=0;for(const i of n)t.set(i,r),r+=i.length;return t}async function nd(n){try{let e,t=0,r;const i=[];let s=0;do{const o=n.subarray(t);if(r=new dn(void 0),{strm:e}=r,r.push(o,zr),r.err)throw new Error(r.msg);t+=e.next_in;const a=r.result;i.push(a),s+=a.length}while(e.avail_in);return Lb(i,s)}catch(e){throw/incorrect header check/.exec(`${e}`)?new Error("problem decompressing block: incorrect gzip header check"):e}}async function g9(n,e,t){try{let r;const{minv:i,maxv:s}=e;let o=i.blockPosition,a=i.dataPosition;const c=[],u=[],l=[];let f=0,d=!1,h=0;do{const p=n.subarray(o-i.blockPosition),m=o.toString();let g,x;const b=t==null?void 0:t.get(m);if(b)g=b.buffer,x=b.nextIn,d=!0;else{const S=new dn(void 0);if({strm:r}=S,S.push(p,zr),S.err)throw new Error(S.msg);g=S.result,x=r.next_in,d=!1,t==null||t.set(m,{buffer:g,nextIn:x})}c.push(g);let w=g.length;u.push(o),l.push(a),c.length===1&&i.dataPosition&&(c[0]=c[0].subarray(i.dataPosition),w=c[0].length);const A=o;if(o+=x,a+=w,A>=s.blockPosition){c[f]=c[f].subarray(0,s.blockPosition===i.blockPosition?s.dataPosition-i.dataPosition+1:s.dataPosition+1),h+=c[f].length,u.push(o),l.push(a);break}h+=w,f++}while(d?o<n.length+i.blockPosition:r.avail_in);return{buffer:Lb(c,h),cpositions:u,dpositions:l}}catch(r){throw/incorrect header check/.exec(`${r}`)?new Error("problem decompressing block: incorrect gzip header check"):r}}let rd=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(rd=new Int32Array(rd));const x9=(n,e)=>{let t=-1;for(let r=0;r<n.length;r++)t=rd[(t^n[r])&255]^t>>>8;return t^-1},y9=21582659,b9=38359875;function w9(n,e){return n*2**e}function zb(n,e){return Math.floor(n/2**e)}let Au=class extends Pb{constructor(){super(...arguments),this.maxBinNumber=0,this.depth=0,this.minShift=0}async lineCount(e,t){var i,s;return((s=(i=(await this.parse(t)).indices(e))==null?void 0:i.stats)==null?void 0:s.lineCount)||0}async indexCov(){return[]}parseAuxData(e,t){const r=new DataView(e.buffer),i=r.getUint32(t,!0),s=i&65536?"zero-based-half-open":"1-based-closed",o={0:"generic",1:"SAM",2:"VCF"}[i&15];if(!o)throw new Error(`invalid Tabix preset format flags ${i}`);const a={ref:r.getInt32(t+4,!0),start:r.getInt32(t+8,!0),end:r.getInt32(t+12,!0)},c=r.getInt32(t+16,!0),u=c?String.fromCharCode(c):"",l=r.getInt32(t+20,!0),f=r.getInt32(t+24,!0);return{columnNumbers:a,coordinateType:s,metaValue:c,metaChar:u,skipLines:l,format:o,formatFlags:i,...c9(e.subarray(t+28,t+28+f),this.renameRefSeq)}}async _parse(e){const t=await this.filehandle.readFile(e),r=await nd(t),i=new DataView(r.buffer);let s;const o=i.getUint32(0,!0);if(o===y9)s=1;else if(o===b9)s=2;else throw new Error(`Not a CSI file ${o}`);this.minShift=i.getInt32(4,!0),this.depth=i.getInt32(8,!0),this.maxBinNumber=((1<<(this.depth+1)*3)-1)/7;const a=this.maxBinNumber,c=i.getInt32(12,!0),u=c>=30?this.parseAuxData(r,16):void 0,l=i.getInt32(16+c,!0);let f=16+c+4,d;const h=[];for(let g=0;g<l;g++){h.push(f);const x=i.getInt32(f,!0);f+=4;for(let b=0;b<x;b++){const w=i.getUint32(f,!0);if(f+=4,w>this.maxBinNumber)f+=44;else{f+=8;const A=i.getInt32(f,!0);f+=4;for(let S=0;S<A;S+=1){const C=Xn(r,f);f+=8,f+=8,d=Zo(d,C)}}}}const p=new Vr({maxSize:5});function m(g){let x=h[g];if(x===void 0)return;const b=i.getInt32(x,!0);x+=4;const w={};let A;for(let S=0;S<b;S++){const C=i.getUint32(x,!0);if(x+=4,C>a)A=Ob(r,x+28),x+=44;else{d=Zo(d,Xn(r,x)),x+=8;const v=i.getInt32(x,!0);x+=4;const T=new Array(v);for(let P=0;P<v;P+=1){const F=Xn(r,x);x+=8;const k=Xn(r,x);x+=8,T[P]=new td(F,k,C)}w[C]=T}}return{binIndex:w,stats:A}}return{csiVersion:s,firstDataLine:d,indices:g=>{if(!p.has(g)){const x=m(g);return x&&p.set(g,x),x}return p.get(g)},refCount:l,csi:!0,maxBlockSize:65536,...u}}async blocksForRange(e,t,r,i={}){t<0&&(t=0);const o=(await this.parse(i)).indices(e);if(!o)return[];const a=this.reg2bins(t,r);if(a.length===0)return[];const c=[];for(const[u,l]of a)for(let f=u;f<=l;f++)if(o.binIndex[f]){const d=o.binIndex[f];for(const h of d)c.push(h)}return Rb(c,new Nb(0,0))}reg2bins(e,t){e-=1,e<1&&(e=1),t>2**50&&(t=2**34),t-=1;let r=0,i=0,s=this.minShift+this.depth*3;const o=[];for(;r<=this.depth;s-=3,i+=w9(1,r*3),r+=1){const a=i+zb(e,s),c=i+zb(t,s);if(c-a+o.length>this.maxBinNumber)throw new Error(`query ${e}-${t} is too large for current binning scheme (shift ${this.minShift}, depth ${this.depth}), try a smaller query or a coarser index binning scheme`);o.push([a,c])}return o}async parse(e={}){return this.setupP||(this.setupP=this._parse(e).catch(t=>{throw this.setupP=void 0,t})),this.setupP}async hasRefSeq(e,t={}){var i;return!!((i=(await this.parse(t)).indices(e))!=null&&i.binIndex)}};class A9{read(){throw new Error("never called")}stat(){throw new Error("never called")}readFile(){throw new Error("never called")}close(){throw new Error("never called")}}const At={BAM_FPAIRED:1,BAM_FPROPER_PAIR:2,BAM_FUNMAP:4,BAM_FMUNMAP:8,BAM_FREVERSE:16,BAM_FMREVERSE:32,BAM_FREAD1:64,BAM_FREAD2:128,BAM_FSECONDARY:256,BAM_FQCFAIL:512,BAM_FDUP:1024,BAM_FSUPPLEMENTARY:2048},Jo="=ACMGRSVTWYHKDBN".split(""),v9=[77,73,68,78,83,72,80,61,88,63,63,63,63,63,63,63],S9=1,E9=3,Ub=4,C9=1<<S9|1<<Ub|1<<5;class _r{constructor(e){this.bytes=e.bytes,this.fileOffset=e.fileOffset,this._dataView=new DataView(this.bytes.byteArray.buffer)}get byteArray(){return this.bytes.byteArray}get flags(){return(this._dataView.getInt32(this.bytes.start+16,!0)&4294901760)>>16}get ref_id(){return this._dataView.getInt32(this.bytes.start+4,!0)}get start(){return this._dataView.getInt32(this.bytes.start+8,!0)}get end(){return this.start+this.length_on_ref}get id(){return this.fileOffset}get mq(){const e=(this.bin_mq_nl&65280)>>8;return e===255?void 0:e}get score(){return this.mq}get qual(){if(this.isSegmentUnmapped())return;const e=this.b0+this.read_name_length+this.num_cigar_bytes+this.num_seq_bytes;return this.byteArray.subarray(e,e+this.seq_length)}get strand(){return this.isReverseComplemented()?-1:1}get b0(){return this.bytes.start+36}get name(){let e="";for(let t=0;t<this.read_name_length-1;t++)e+=String.fromCharCode(this.byteArray[this.b0+t]);return e}get tags(){let e=this.b0+this.read_name_length+this.num_cigar_bytes+this.num_seq_bytes+this.seq_length;const t=this.bytes.end,r={};for(;e<t;){const i=String.fromCharCode(this.byteArray[e])+String.fromCharCode(this.byteArray[e+1]),s=String.fromCharCode(this.byteArray[e+2]);switch(e+=3,s){case"A":r[i]=String.fromCharCode(this.byteArray[e]),e+=1;break;case"i":r[i]=this._dataView.getInt32(e,!0),e+=4;break;case"I":r[i]=this._dataView.getUint32(e,!0),e+=4;break;case"c":r[i]=this._dataView.getInt8(e),e+=1;break;case"C":r[i]=this._dataView.getUint8(e),e+=1;break;case"s":r[i]=this._dataView.getInt16(e,!0),e+=2;break;case"S":r[i]=this._dataView.getUint16(e,!0),e+=2;break;case"f":r[i]=this._dataView.getFloat32(e,!0),e+=4;break;case"Z":case"H":{const o=[];for(;e<=t;){const a=this.byteArray[e++];if(a!==0)o.push(String.fromCharCode(a));else break}r[i]=o.join("");break}case"B":{const o=this.byteArray[e++],a=String.fromCharCode(o),c=this._dataView.getInt32(e,!0);e+=4;const u=this.byteArray.byteOffset+e;if(a==="i"){if(u%4===0)r[i]=new Int32Array(this.byteArray.buffer,u,c);else{const l=this.byteArray.slice(e,e+(c<<2));r[i]=new Int32Array(l.buffer,l.byteOffset,c)}e+=c<<2}else if(a==="I"){if(u%4===0)r[i]=new Uint32Array(this.byteArray.buffer,u,c);else{const l=this.byteArray.slice(e,e+(c<<2));r[i]=new Uint32Array(l.buffer,l.byteOffset,c)}e+=c<<2}else if(a==="s"){if(u%2===0)r[i]=new Int16Array(this.byteArray.buffer,u,c);else{const l=this.byteArray.slice(e,e+(c<<1));r[i]=new Int16Array(l.buffer,l.byteOffset,c)}e+=c<<1}else if(a==="S"){if(u%2===0)r[i]=new Uint16Array(this.byteArray.buffer,u,c);else{const l=this.byteArray.slice(e,e+(c<<1));r[i]=new Uint16Array(l.buffer,l.byteOffset,c)}e+=c<<1}else if(a==="c")r[i]=new Int8Array(this.byteArray.buffer,u,c),e+=c;else if(a==="C")r[i]=new Uint8Array(this.byteArray.buffer,u,c),e+=c;else if(a==="f"){if(u%4===0)r[i]=new Float32Array(this.byteArray.buffer,u,c);else{const l=this.byteArray.slice(e,e+(c<<2));r[i]=new Float32Array(l.buffer,l.byteOffset,c)}e+=c<<2}break}default:console.error("Unknown BAM tag type",s);break}}return r}isPaired(){return!!(this.flags&At.BAM_FPAIRED)}isProperlyPaired(){return!!(this.flags&At.BAM_FPROPER_PAIR)}isSegmentUnmapped(){return!!(this.flags&At.BAM_FUNMAP)}isMateUnmapped(){return!!(this.flags&At.BAM_FMUNMAP)}isReverseComplemented(){return!!(this.flags&At.BAM_FREVERSE)}isMateReverseComplemented(){return!!(this.flags&At.BAM_FMREVERSE)}isRead1(){return!!(this.flags&At.BAM_FREAD1)}isRead2(){return!!(this.flags&At.BAM_FREAD2)}isSecondary(){return!!(this.flags&At.BAM_FSECONDARY)}isFailedQc(){return!!(this.flags&At.BAM_FQCFAIL)}isDuplicate(){return!!(this.flags&At.BAM_FDUP)}isSupplementary(){return!!(this.flags&At.BAM_FSUPPLEMENTARY)}get cigarAndLength(){if(this.isSegmentUnmapped())return{length_on_ref:0,NUMERIC_CIGAR:new Uint32Array(0)};const e=this.num_cigar_ops;let t=this.b0+this.read_name_length;const r=this._dataView.getInt32(t,!0),i=r>>4;if((r&15)===Ub&&i===this.seq_length){t+=4;const o=this._dataView.getInt32(t,!0),a=o>>4;return(o&15)!==E9&&console.warn("CG tag with no N tag"),{NUMERIC_CIGAR:this.tags.CG,length_on_ref:a}}else{const o=this.byteArray.byteOffset+t,a=o%4===0?new Uint32Array(this.byteArray.buffer,o,e):new Uint32Array(this.byteArray.slice(t,t+(e<<2)).buffer,0,e);let c=0;for(let u=0;u<e;++u){const l=a[u];1<<(l&15)&C9||(c+=l>>4)}return{NUMERIC_CIGAR:a,length_on_ref:c}}}get length_on_ref(){return this.cigarAndLength.length_on_ref}get NUMERIC_CIGAR(){return this.cigarAndLength.NUMERIC_CIGAR}get CIGAR(){const e=this.NUMERIC_CIGAR;let t="";for(let r=0,i=e.length;r<i;r++){const s=e[r],o=s>>4,a=v9[s&15];t+=o+String.fromCharCode(a)}return t}get num_cigar_ops(){return this.flag_nc&65535}get num_cigar_bytes(){return this.num_cigar_ops<<2}get read_name_length(){return this.bin_mq_nl&255}get num_seq_bytes(){return this.seq_length+1>>1}get NUMERIC_SEQ(){const e=this.b0+this.read_name_length+this.num_cigar_bytes,t=this.byteArray.subarray(e,e+this.num_seq_bytes);return new Uint8Array(t.buffer,t.byteOffset,this.num_seq_bytes)}get seq(){const e=this.NUMERIC_SEQ,t=this.seq_length,r=new Array(t);let i=0;const s=t>>1;for(let o=0;o<s;++o){const a=e[o];r[i++]=Jo[(a&240)>>4],r[i++]=Jo[a&15]}if(i<t){const o=e[s];r[i]=Jo[(o&240)>>4]}return r.join("")}get pair_orientation(){if(!this.isSegmentUnmapped()&&!this.isMateUnmapped()&&this.ref_id===this.next_refid){const e=this.isReverseComplemented()?"R":"F",t=this.isMateReverseComplemented()?"R":"F";let r=" ",i=" ";this.isRead1()?(r="1",i="2"):this.isRead2()&&(r="2",i="1");const s=[];return this.template_length>0?(s[0]=e,s[1]=r,s[2]=t,s[3]=i):(s[2]=e,s[3]=r,s[0]=t,s[1]=i),s.join("")}}get bin_mq_nl(){return this._dataView.getInt32(this.bytes.start+12,!0)}get flag_nc(){return this._dataView.getInt32(this.bytes.start+16,!0)}get seq_length(){return this._dataView.getInt32(this.bytes.start+20,!0)}get next_refid(){return this._dataView.getInt32(this.bytes.start+24,!0)}get next_pos(){return this._dataView.getInt32(this.bytes.start+28,!0)}get template_length(){return this._dataView.getInt32(this.bytes.start+32,!0)}seqAt(e){if(e<this.seq_length){const t=e>>1,r=this.byteArray[this.b0+this.read_name_length+this.num_cigar_bytes+t];return e%2===0?Jo[(r&240)>>4]:Jo[r&15]}else return}toJSON(){const e={};for(const t of Object.keys(this))t.startsWith("_")||t==="bytes"||(e[t]=this[t]);return e}}function $o(n,e){const t=Object.getOwnPropertyDescriptor(n.prototype,e);if(!t)throw new Error("OH NO, NO PROPERTY DESCRIPTOR");const r=t.get;if(!r)throw new Error("OH NO, NOT A GETTER");Object.defineProperty(n.prototype,e,{get(){const i=r.call(this);return Object.defineProperty(this,e,{value:i}),i}})}$o(_r,"tags"),$o(_r,"cigarAndLength"),$o(_r,"seq"),$o(_r,"qual"),$o(_r,"end");function Gb(n){const e=n.split(/\r?\n/),t=[];for(const r of e){const[i,...s]=r.split(/\t/);i&&t.push({tag:i.slice(1),data:s.map(o=>{const a=o.indexOf(":"),c=o.slice(0,a),u=o.slice(a+1);return{tag:c,value:u}})})}return t}const Hb=21840194,D9=65536;class Vb{constructor({bamFilehandle:e,bamPath:t,bamUrl:r,baiPath:i,baiFilehandle:s,baiUrl:o,csiPath:a,csiFilehandle:c,csiUrl:u,htsget:l,renameRefSeqs:f=d=>d}){if(this.htsget=!1,this.cache=new Vr({maxSize:1e3}),this.renameRefSeq=f,e)this.bam=e;else if(t)this.bam=new qe(t);else if(r)this.bam=new Yt(r);else if(l)this.htsget=!0,this.bam=new A9;else throw new Error("unable to initialize bam");if(c)this.index=new Au({filehandle:c});else if(a)this.index=new Au({filehandle:new qe(a)});else if(u)this.index=new Au({filehandle:new Yt(u)});else if(s)this.index=new qi({filehandle:s});else if(i)this.index=new qi({filehandle:new qe(i)});else if(o)this.index=new qi({filehandle:new Yt(o)});else if(t)this.index=new qi({filehandle:new qe(`${t}.bai`)});else if(r)this.index=new qi({filehandle:new Yt(`${r}.bai`)});else if(l)this.htsget=!0;else throw new Error("unable to infer index format")}async getHeaderPre(e){const t=a9(e);if(!this.index)return;const r=await this.index.parse(t),i=r.firstDataLine===void 0?await this.bam.readFile():await this.bam.read(r.firstDataLine.blockPosition+D9,0),s=await nd(i),o=new DataView(s.buffer);if(o.getInt32(0,!0)!==Hb)throw new Error("Not a BAM file");const a=o.getInt32(4,!0),c=new TextDecoder("utf8");this.header=c.decode(s.subarray(8,8+a));const{chrToIndex:u,indexToChr:l}=this._parseRefSeqs(s,a+8);return this.chrToIndex=u,this.indexToChr=l,Gb(this.header)}getHeader(e){return this.headerP||(this.headerP=this.getHeaderPre(e).catch(t=>{throw this.headerP=void 0,t})),this.headerP}async getHeaderText(e={}){return await this.getHeader(e),this.header}_parseRefSeqs(e,t){const r=new DataView(e.buffer),i=r.getInt32(t,!0);let s=t+4;const o={},a=[],c=new TextDecoder("utf8");for(let u=0;u<i;u+=1){if(s+8>e.length)throw new Error(`Insufficient data for reference sequences: need more than ${e.length} bytes`);const l=r.getInt32(s,!0),f=this.renameRefSeq(c.decode(e.subarray(s+4,s+4+l-1))),d=r.getInt32(s+l+4,!0);o[f]=u,a.push({refName:f,length:d}),s=s+8+l}return{chrToIndex:o,indexToChr:a}}async getRecordsForRange(e,t,r,i){return l9(this.streamRecordsForRange(e,t,r,i))}async*streamRecordsForRange(e,t,r,i){var a;await this.getHeader(i);const s=(a=this.chrToIndex)==null?void 0:a[e];if(s===void 0||!this.index)return;const o=await this.index.blocksForRange(s,t-1,r,i);yield*this._fetchChunkFeatures(o,s,t,r,i)}async*_fetchChunkFeatures(e,t,r,i,s={}){const{viewAsPairs:o}=s,a=[];let c=!1;for(const u of e){const{data:l,cpositions:f,dpositions:d}=await this._readChunk({chunk:u,opts:s}),h=await this.readBamFeatures(l,f,d,u,t,r,i),p=[];for(const m of h)if(m.ref_id===t)if(m.start>=i){c=!0;break}else m.end>=r&&p.push(m);if(a.push(p),yield p,c)break}o&&(yield this.fetchPairs(t,a,s))}async fetchPairs(e,t,r){const{pairAcrossChr:i,maxInsertSize:s=2e5}=r,o={},a={};for(const d of t){const h={};for(const p of d){const m=p.name,g=p.id;h[m]||(h[m]=0),h[m]++,a[g]=1}for(const[p,m]of Object.entries(h))m===1&&(o[p]=!0)}const c=[];for(const d of t)for(const h of d){const p=h.name,m=h.start,g=h.next_pos,x=h.next_refid;this.index&&o[p]&&(i||x===e&&Math.abs(m-g)<s)&&c.push(this.index.blocksForRange(x,g,g+1,r))}const u=new Map,l=await Promise.all(c);for(const d of l.flat())u.has(d.toString())||u.set(d.toString(),d);return(await Promise.all([...u.values()].map(async d=>{const{data:h,cpositions:p,dpositions:m,chunk:g}=await this._readChunk({chunk:d,opts:r}),x=[];for(const b of await this.readBamFeatures(h,p,m,g))o[b.name]&&!a[b.id]&&x.push(b);return x}))).flat()}async _readChunk({chunk:e,opts:t}){const r=await this.bam.read(e.fetchedSize(),e.minv.blockPosition,t),{buffer:i,cpositions:s,dpositions:o}=await g9(r,e,this.cache);return{data:i,cpositions:s,dpositions:o,chunk:e}}async readBamFeatures(e,t,r,i,s,o,a){let c=0;const u=[];let l=0;const f=new DataView(e.buffer),d=r.length>0,h=t.length>0,p=s!==void 0&&o!==void 0&&a!==void 0;for(;c+4<e.length;){const m=f.getInt32(c,!0),g=c+4+m-1;if(d){for(;c+i.minv.dataPosition>=r[l++];);l--}if(g<e.length){if(p&&c+12<e.length&&!this._shouldIncludeFeature(f,c,s,a)){c=g+1;continue}const x=new _r({bytes:{byteArray:e,start:c,end:g},fileOffset:h?t[l]*256+(c-r[l])+i.minv.dataPosition+1:x9(e.subarray(c,g))>>>0});u.push(x)}c=g+1}return u}_shouldIncludeFeature(e,t,r,i){const s=e.getInt32(t+4,!0),o=e.getInt32(t+8,!0);return s===r&&o<i}async hasRefSeq(e){var r,i;const t=(r=this.chrToIndex)==null?void 0:r[e];return t===void 0?!1:(i=this.index)==null?void 0:i.hasRefSeq(t)}async lineCount(e){var r;const t=(r=this.chrToIndex)==null?void 0:r[e];return t===void 0||!this.index?0:this.index.lineCount(t)}async indexCov(e,t,r){var s;if(!this.index)return[];await this.index.parse();const i=(s=this.chrToIndex)==null?void 0:s[e];return i===void 0?[]:this.index.indexCov(i,t,r)}async blocksForRange(e,t,r,i){var o;if(!this.index)return[];await this.index.parse();const s=(o=this.chrToIndex)==null?void 0:o[e];return s===void 0?[]:this.index.blocksForRange(s,t,r,i)}}async function _b(n,e){const t=await Promise.all(n.map(async r=>{const{url:i,headers:s}=r;if(i.startsWith("data:")){const o=await fetch(i);if(!o.ok)throw new Error("failed to decode base64");const a=await o.arrayBuffer();return new Uint8Array(a)}else{const{referer:o,...a}=s,c=await fetch(i,{...e,headers:{...e==null?void 0:e.headers,...a}});if(!c.ok)throw new Error(`HTTP ${c.status} fetching ${i}: ${await c.text()}`);return new Uint8Array(await c.arrayBuffer())}}));return u9(await Promise.all(t.map(r=>nd(r))))}class I9 extends Vb{constructor(e){super({htsget:!0}),this.baseUrl=e.baseUrl,this.trackId=e.trackId}async*streamRecordsForRange(e,t,r,i){var c;const o=`${`${this.baseUrl}/${this.trackId}`}?referenceName=${e}&start=${t}&end=${r}&format=BAM`,a=(c=this.chrToIndex)==null?void 0:c[e];if(a===void 0)yield[];else{const u=await fetch(o,{...i});if(!u.ok)throw new Error(`HTTP ${u.status} fetching ${o}: ${await u.text()}`);const l=await u.json(),f=await _b(l.htsget.urls.slice(1),i);yield*this._fetchChunkFeatures([{buffer:f,_fetchedSize:void 0,bin:0,compareTo(){return 0},toUniqueString(){return`${e}_${t}_${r}`},fetchedSize(){return 0},minv:{dataPosition:0,blockPosition:0,compareTo:()=>0},maxv:{dataPosition:Number.MAX_SAFE_INTEGER,blockPosition:0,compareTo:()=>0},toString(){return`${e}_${t}_${r}`}}],a,t,r,i)}}async _readChunk({chunk:e}){if(!e.buffer)throw new Error("expected chunk.buffer in htsget");return{data:e.buffer,cpositions:[],dpositions:[],chunk:e}}async getHeader(e={}){const t=`${this.baseUrl}/${this.trackId}?referenceName=na&class=header`,r=await fetch(t,e);if(!r.ok)throw new Error(`HTTP ${r.status} fetching ${t}: ${await r.text()}`);const i=await r.json(),s=await _b(i.htsget.urls,e),o=new DataView(s.buffer);if(o.getInt32(0,!0)!==Hb)throw new Error("Not a BAM file");const a=o.getInt32(4,!0),u=new TextDecoder("utf8").decode(s.subarray(8,8+a)),l=Gb(u),f=[],d={},h=l.filter(p=>p.tag==="SQ");for(const[p,m]of h.entries()){let g="",x=0;for(const b of m.data)b.tag==="SN"?g=b.value:b.tag==="LN"&&(x=+b.value);d[g]=p,f[p]={refName:g,length:x}}return this.chrToIndex=d,this.indexToChr=f,l}}const T9=Object.freeze(Object.defineProperty({__proto__:null,BAI:qi,BamFile:Vb,BamRecord:_r,CSI:Au,HtsgetFile:I9},Symbol.toStringTag,{value:"Module"}));function B9(n){let e=0;for(const t of n)e+=t.length;return e}function jb(n,e){const t=new Uint8Array(e??B9(n));let r=0;for(const i of n)t.set(i,r),r+=i.length;return t}async function id(n){try{let e,t=0,r;const i=[];let s=0;do{const o=n.subarray(t);if(r=new dn(void 0),{strm:e}=r,r.push(o,zr),r.err)throw new Error(r.msg);t+=e.next_in;const a=r.result;i.push(a),s+=a.length}while(e.avail_in);return jb(i,s)}catch(e){throw/incorrect header check/.exec(`${e}`)?new Error("problem decompressing block: incorrect gzip header check"):e}}async function k9(n,e,t){try{let r;const{minv:i,maxv:s}=e;let o=i.blockPosition,a=i.dataPosition;const c=[],u=[],l=[];let f=0,d=!1,h=0;do{const p=n.subarray(o-i.blockPosition),m=o.toString();let g,x;const b=t==null?void 0:t.get(m);if(b)g=b.buffer,x=b.nextIn,d=!0;else{const S=new dn(void 0);if({strm:r}=S,S.push(p,zr),S.err)throw new Error(S.msg);g=S.result,x=r.next_in,d=!1,t==null||t.set(m,{buffer:g,nextIn:x})}c.push(g);let w=g.length;u.push(o),l.push(a),c.length===1&&i.dataPosition&&(c[0]=c[0].subarray(i.dataPosition),w=c[0].length);const A=o;if(o+=x,a+=w,A>=s.blockPosition){c[f]=c[f].subarray(0,s.blockPosition===i.blockPosition?s.dataPosition-i.dataPosition+1:s.dataPosition+1),h+=c[f].length,u.push(o),l.push(a);break}h+=w,f++}while(d?o<n.length+i.blockPosition:r.avail_in);return{buffer:jb(c,h),cpositions:u,dpositions:l}}catch(r){throw/incorrect header check/.exec(`${r}`)?new Error("problem decompressing block: incorrect gzip header check"):r}}class vu{constructor(e,t,r,i){this.minv=e,this.maxv=t,this.bin=r,this._fetchedSize=i}toUniqueString(){return`${this.minv}..${this.maxv} (bin ${this.bin}, fetchedSize ${this.fetchedSize()})`}toString(){return this.toUniqueString()}compareTo(e){return this.minv.compareTo(e.minv)||this.maxv.compareTo(e.maxv)||this.bin-e.bin}fetchedSize(){return this._fetchedSize!==void 0?this._fetchedSize:this.maxv.blockPosition+65536-this.minv.blockPosition}}class Wb{constructor({filehandle:e,renameRefSeqs:t=r=>r}){this.filehandle=e,this.renameRefSeq=t}async getMetadata(e={}){const{indices:t,...r}=await this.parse(e);return r}_findFirstData(e,t){return e?e.compareTo(t)>0?t:e:t}async parse(e={}){return this.parseP||(this.parseP=this._parse(e).catch(t=>{throw this.parseP=void 0,t})),this.parseP}async hasRefSeq(e,t={}){var i;return!!((i=(await this.parse(t)).indices[e])!=null&&i.binIndex)}_parseNameBytes(e){let t=0,r=0;const i=[],s={},o=new TextDecoder("utf8");for(let a=0;a<e.length;a+=1)if(!e[a]){if(r<a){const c=this.renameRefSeq(o.decode(e.subarray(r,a)));i[t]=c,s[c]=t}r=a+1,t+=1}return{refNameToId:s,refIdToName:i}}}const Qb=65536,F9=Qb*Qb;function qb(n,e=0){const t=n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24;return((n[e+4]|n[e+5]<<8|n[e+6]<<16|n[e+7]<<24)>>>0)*F9+(t>>>0)}class P9 extends Error{}function ea(n){if(n&&n.aborted)if(typeof DOMException>"u"){const e=new P9("aborted");throw e.code="ERR_ABORTED",e}else throw new DOMException("aborted","AbortError")}function M9(n,e){return e.minv.blockPosition-n.maxv.blockPosition<65e3&&e.maxv.blockPosition-n.minv.blockPosition<5e6}function Yb(n,e){const t=[];let r;if(n.length===0)return n;n.sort(function(i,s){const o=i.minv.blockPosition-s.minv.blockPosition;return o===0?i.minv.dataPosition-s.minv.dataPosition:o});for(const i of n)(!e||i.maxv.compareTo(e)>0)&&(r===void 0?(t.push(i),r=i):M9(r,i)?i.maxv.compareTo(r.maxv)>0&&(r.maxv=i.maxv):(t.push(i),r=i));return t}class sd{constructor(e,t){this.blockPosition=e,this.dataPosition=t}toString(){return`${this.blockPosition}:${this.dataPosition}`}compareTo(e){return this.blockPosition-e.blockPosition||this.dataPosition-e.dataPosition}}function Yi(n,e=0){return new sd(n[e+7]*1099511627776+n[e+6]*4294967296+n[e+5]*16777216+n[e+4]*65536+n[e+3]*256+n[e+2],n[e+1]<<8|n[e])}const R9=21582659,O9=38359875,N9={0:"generic",1:"SAM",2:"VCF"};function L9(n,e){return n*2**e}function Xb(n,e){return Math.floor(n/2**e)}class Su extends Wb{constructor(e){super(e),this.maxBinNumber=0,this.depth=0,this.minShift=0}async lineCount(e,t={}){const r=await this.parse(t),i=r.refNameToId[e];if(i===void 0||!r.indices[i])return-1;const{stats:o}=r.indices[i];return o?o.lineCount:-1}indexCov(){throw new Error("CSI indexes do not support indexcov")}parseAuxData(e,t){const r=new DataView(e.buffer),i=r.getInt32(t,!0),s=i&65536?"zero-based-half-open":"1-based-closed",o=N9[i&15];if(!o)throw new Error(`invalid Tabix preset format flags ${i}`);const a={ref:r.getInt32(t+4,!0),start:r.getInt32(t+8,!0),end:r.getInt32(t+12,!0)},c=r.getInt32(t+16,!0),u=c?String.fromCharCode(c):void 0,l=r.getInt32(t+20,!0),f=r.getInt32(t+24,!0),{refIdToName:d,refNameToId:h}=this._parseNameBytes(e.subarray(t+28,t+28+f));return{refIdToName:d,refNameToId:h,skipLines:l,metaChar:u,columnNumbers:a,format:o,coordinateType:s}}async _parse(e={}){const t=await id(await this.filehandle.readFile(e)),r=new DataView(t.buffer);let i;if(r.getUint32(0,!0)===R9)i=1;else if(r.getUint32(0,!0)===O9)i=2;else throw new Error("Not a CSI file");this.minShift=r.getInt32(4,!0),this.depth=r.getInt32(8,!0),this.maxBinNumber=((1<<(this.depth+1)*3)-1)/7;const s=2**(this.minShift+this.depth*3),o=r.getInt32(12,!0),a=o&&o>=30?this.parseAuxData(t,16):{refIdToName:[],refNameToId:{},metaChar:void 0,columnNumbers:{ref:0,start:1,end:2},coordinateType:"zero-based-half-open",format:"generic"},c=r.getInt32(16+o,!0);let u,l=16+o+4;const f=new Array(c).fill(0).map(()=>{const d=r.getInt32(l,!0);l+=4;const h={};let p;for(let m=0;m<d;m+=1){const g=r.getUint32(l,!0);if(g>this.maxBinNumber)p=this.parsePseudoBin(t,l+4),l+=48;else{const x=Yi(t,l+4);u=this._findFirstData(u,x);const b=r.getInt32(l+12,!0);l+=16;const w=new Array(b);for(let A=0;A<b;A+=1){const S=Yi(t,l),C=Yi(t,l+8);l+=16,w[A]=new vu(S,C,g)}h[g]=w}}return{binIndex:h,stats:p}});return{...a,csi:!0,refCount:c,maxBlockSize:65536,firstDataLine:u,csiVersion:i,indices:f,depth:this.depth,maxBinNumber:this.maxBinNumber,maxRefLength:s}}parsePseudoBin(e,t){return{lineCount:qb(e,t+28)}}async blocksForRange(e,t,r,i={}){t<0&&(t=0);const s=await this.parse(i),o=s.refNameToId[e];if(o===void 0)return[];const a=s.indices[o];if(!a)return[];const c=this.reg2bins(t,r),u=[];for(const[l,f]of c)for(let d=l;d<=f;d++)if(a.binIndex[d])for(const h of a.binIndex[d])u.push(new vu(h.minv,h.maxv,d));return Yb(u,new sd(0,0))}reg2bins(e,t){e-=1,e<1&&(e=1),t>2**50&&(t=2**34),t-=1;let r=0,i=0,s=this.minShift+this.depth*3;const o=[];for(;r<=this.depth;s-=3,i+=L9(1,r*3),r+=1){const a=i+Xb(e,s),c=i+Xb(t,s);if(c-a+o.length>this.maxBinNumber)throw new Error(`query ${e}-${t} is too large for current binning scheme (shift ${this.minShift}, depth ${this.depth}), try a smaller query or a coarser index binning scheme`);o.push([a,c])}return o}}const z9=21578324,Kb=14;function U9(n,e){return n+=1,e-=1,[[0,0],[1+(n>>26),1+(e>>26)],[9+(n>>23),9+(e>>23)],[73+(n>>20),73+(e>>20)],[585+(n>>17),585+(e>>17)],[4681+(n>>14),4681+(e>>14)]]}class Xi extends Wb{async lineCount(e,t={}){var o;const r=await this.parse(t),i=r.refNameToId[e];return i===void 0||!r.indices[i]?-1:((o=r.indices[i].stats)==null?void 0:o.lineCount)??-1}async _parse(e={}){const t=await this.filehandle.readFile(e),r=await id(t);ea(e.signal);const i=new DataView(r.buffer);if(i.getUint32(0,!0)!==z9)throw new Error("Not a TBI file");const o=i.getUint32(4,!0),a=i.getUint32(8,!0),c=a&65536?"zero-based-half-open":"1-based-closed",l={0:"generic",1:"SAM",2:"VCF"}[a&15];if(!l)throw new Error(`invalid Tabix preset format flags ${a}`);const f={ref:i.getInt32(12,!0),start:i.getInt32(16,!0),end:i.getInt32(20,!0)},d=i.getInt32(24,!0),h=5,p=((1<<(h+1)*3)-1)/7,m=2**(14+h*3),g=d?String.fromCharCode(d):void 0,x=i.getInt32(28,!0),b=i.getInt32(32,!0),{refNameToId:w,refIdToName:A}=this._parseNameBytes(r.slice(36,36+b));let S=36+b,C;return{indices:new Array(o).fill(0).map(()=>{const T=i.getInt32(S,!0);S+=4;const P={};let F;for(let U=0;U<T;U+=1){const j=i.getUint32(S,!0);if(S+=4,j>p+1)throw new Error("tabix index contains too many bins, please use a CSI index");if(j===p+1){const Z=i.getInt32(S,!0);S+=4,Z===2&&(F=this.parsePseudoBin(r,S)),S+=16*Z}else{const Z=i.getInt32(S,!0);S+=4;const _=new Array(Z);for(let ee=0;ee<Z;ee+=1){const ce=Yi(r,S),ie=Yi(r,S+8);S+=16,C=this._findFirstData(C,ce),_[ee]=new vu(ce,ie,j)}P[j]=_}}const k=i.getInt32(S,!0);S+=4;const L=new Array(k);for(let U=0;U<k;U+=1)L[U]=Yi(r,S),S+=8,C=this._findFirstData(C,L[U]);return{binIndex:P,linearIndex:L,stats:F}}),metaChar:g,maxBinNumber:p,maxRefLength:m,skipLines:x,firstDataLine:C,columnNumbers:f,coordinateType:c,format:l,refIdToName:A,refNameToId:w,maxBlockSize:65536}}parsePseudoBin(e,t){return{lineCount:qb(e,t+16)}}async blocksForRange(e,t,r,i={}){t<0&&(t=0);const s=await this.parse(i),o=s.refNameToId[e];if(o===void 0)return[];const a=s.indices[o];if(!a)return[];(a.linearIndex.length>0?a.linearIndex[t>>Kb>=a.linearIndex.length?a.linearIndex.length-1:t>>Kb]:new sd(0,0))||console.warn("querying outside of possible tabix range");const u=U9(t,r),l=[];for(const[m,g]of u)for(let x=m;x<=g;x++)if(a.binIndex[x])for(const b of a.binIndex[x])l.push(new vu(b.minv,b.maxv,x));const f=a.linearIndex.length;let d;const h=Math.min(t>>14,f-1),p=Math.min(r>>14,f-1);for(let m=h;m<=p;++m){const g=a.linearIndex[m];g&&(!d||g.compareTo(d)<0)&&(d=g)}return Yb(l,d)}}class G9{constructor({path:e,filehandle:t,url:r,tbiPath:i,tbiUrl:s,tbiFilehandle:o,csiPath:a,csiUrl:c,csiFilehandle:u,renameRefSeqs:l=d=>d,chunkCacheSize:f=5*2**20}){if(this.cache=new Vr({maxSize:1e3}),t)this.filehandle=t;else if(e)this.filehandle=new qe(e);else if(r)this.filehandle=new Yt(r);else throw new TypeError("must provide either filehandle or path");if(o)this.index=new Xi({filehandle:o,renameRefSeqs:l});else if(u)this.index=new Su({filehandle:u,renameRefSeqs:l});else if(i)this.index=new Xi({filehandle:new qe(i),renameRefSeqs:l});else if(a)this.index=new Su({filehandle:new qe(a),renameRefSeqs:l});else if(e)this.index=new Xi({filehandle:new qe(`${e}.tbi`),renameRefSeqs:l});else if(c)this.index=new Su({filehandle:new Yt(c)});else if(s)this.index=new Xi({filehandle:new Yt(s)});else if(r)this.index=new Xi({filehandle:new Yt(`${r}.tbi`)});else throw new TypeError("must provide one of tbiFilehandle, tbiPath, csiFilehandle, csiPath, tbiUrl, csiUrl");this.renameRefSeq=l,this.chunkCache=new _i({cache:new Vr({maxSize:Math.floor(f/65536)}),fill:(d,h)=>this.readChunk(d,{signal:h})})}calculateFileOffset(e,t,r,i,s){return e[r]*256+(i-t[r])+s+1}async getLines(e,t,r,i){let s,o={},a;typeof i=="function"?a=i:(o=i,a=i.lineCallback,s=i.signal);const c=await this.index.getMetadata(o);ea(s);const u=t??0,l=r??c.maxRefLength;if(!(u<=l))throw new TypeError("invalid start and end coordinates. start must be less than or equal to end");if(u===l)return;const f=await this.index.blocksForRange(e,u,l,o);ea(s);const d=new TextDecoder("utf8");for(const h of f){const{buffer:p,cpositions:m,dpositions:g}=await this.chunkCache.get(h.toString(),h,s);ea(s);let x=0,b=0;const w=d.decode(p);if(p.length==w.length)for(;x<w.length;){const S=w.indexOf(`
`,x);if(S===-1)break;const C=w.slice(x,S);if(g){const P=x+h.minv.dataPosition;for(;b<g.length&&P>=g[b];)b++}const{startCoordinate:v,overlaps:T}=this.checkLine(c,e,u,l,C);if(T)a(C,this.calculateFileOffset(m,g,b,x,h.minv.dataPosition));else if(v!==void 0&&v>=l)return;x=S+1}else for(;x<p.length;){const S=p.indexOf(10,x);if(S===-1)break;const C=p.slice(x,S),v=d.decode(C);if(g){const F=x+h.minv.dataPosition;for(;b<g.length&&F>=g[b];)b++}const{startCoordinate:T,overlaps:P}=this.checkLine(c,e,u,l,v);if(P)a(v,this.calculateFileOffset(m,g,b,x,h.minv.dataPosition));else if(T!==void 0&&T>=l)return;x=S+1}}}async getMetadata(e={}){return this.index.getMetadata(e)}async getHeaderBuffer(e={}){const{firstDataLine:t,metaChar:r,maxBlockSize:i}=await this.getMetadata(e);ea(e.signal);const s=((t==null?void 0:t.blockPosition)||0)+i,o=await this.filehandle.read(s,0,e),a=await id(o);if(r){let c=-1;const u=10,l=r.charCodeAt(0);for(let f=0,d=a.length;f<d;f++){const h=a[f];if(f===c+1&&h!==l)break;h===u&&(c=f)}return a.subarray(0,c+1)}return a}async getHeader(e={}){const t=new TextDecoder("utf8"),r=await this.getHeaderBuffer(e);return t.decode(r)}async getReferenceSequenceNames(e={}){return(await this.getMetadata(e)).refIdToName}checkLine(e,t,r,i,s){const{columnNumbers:o,metaChar:a,coordinateType:c,format:u}=e;if(a&&s.startsWith(a))return{overlaps:!1};let{ref:l,start:f,end:d}=o;l||(l=0),f||(f=0),d||(d=0),u==="VCF"&&(d=8);const h=Math.max(l,f,d);let p=1,m=0,g="",x=-1/0;const b=s.length;for(let w=0;w<b+1;w++)if(s[w]==="	"||w===b){if(p===l){if(this.renameRefSeq(s.slice(m,w))!==t)return{overlaps:!1}}else if(p===f){if(x=Number.parseInt(s.slice(m,w),10),c==="1-based-closed"&&(x-=1),x>=i)return{startCoordinate:x,overlaps:!1};if((d===0||d===f)&&x+1<=r)return{startCoordinate:x,overlaps:!1}}else if(u==="VCF"&&p===4)g=s.slice(m,w);else if(p===d&&(u==="VCF"?this._getVcfEnd(x,g,s.slice(m,w)):Number.parseInt(s.slice(m,w),10))<=r)return{overlaps:!1};if(p===h)break;m=w+1,p+=1}return{startCoordinate:x,overlaps:!0}}_getVcfEnd(e,t,r){let i=e+t.length;const s=r.includes("SVTYPE=TRA");if(r[0]!=="."&&!s){const a=/(?:^|;)END=([^;]+)/.exec(r);a&&(i=Number.parseInt(a[1],10))}else if(s)return e+1;return i}async lineCount(e,t={}){return this.index.lineCount(e,t)}async readChunk(e,t={}){const r=await this.filehandle.read(e.fetchedSize(),e.minv.blockPosition,t);return k9(r,e,this.cache)}}const H9=Object.freeze(Object.defineProperty({__proto__:null,CSI:Su,TBI:Xi,TabixIndexedFile:G9},Symbol.toStringTag,{value:"Module"})),V9=/%([0-9A-Fa-f]{2})/g,_9=/^\s*##\s*(\S+)\s*(.*)/,j9=/\r?\n$/,Zb=/\s+/,Jb=/\D/g;function Eu(n){return n.includes("%")?n.replaceAll(V9,(e,t)=>String.fromCharCode(parseInt(t,16))):n}function W9(n){if(!n.length||n===".")return{};const e={};let t=n;t.endsWith(`
`)&&(t=t.slice(0,t.endsWith(`\r
`)?-2:-1));for(const r of t.split(";")){const i=r.indexOf("=");if(i===-1)continue;const s=r.slice(i+1);if(!s.length)continue;const o=r.slice(0,i).trim();let a=e[o];a||(a=[],e[o]=a);for(const c of s.split(","))a.push(Eu(c.trim()))}return e}function Q9(n){return $b(n.split("	"))}function pn(n){return n==="."||n===""||n===void 0?null:n}function $b(n){const e=pn(n[0]),t=pn(n[1]),r=pn(n[2]),i=pn(n[3]),s=pn(n[4]),o=pn(n[5]),a=pn(n[6]),c=pn(n[7]),u=pn(n[8]);return{seq_id:e?Eu(e):null,source:t?Eu(t):null,type:r?Eu(r):null,start:i===null?null:parseInt(i,10),end:s===null?null:parseInt(s,10),score:o===null?null:parseFloat(o),strand:a,phase:c,attributes:u===null?null:W9(u)}}function q9(n){var s,o;const e=_9.exec(n);if(!e)return null;const[,t]=e;let[,,r]=e;const i={directive:t};if(r.length&&(r=r.replace(j9,""),i.value=r),t==="sequence-region"){const a=r.split(Zb,3);return{...i,seq_id:a[0],start:(s=a[1])==null?void 0:s.replaceAll(Jb,""),end:(o=a[2])==null?void 0:o.replaceAll(Jb,"")}}else if(t==="genome-build"){const[a,c]=r.split(Zb,2);return{...i,source:a,buildName:c}}return i}const Y9=/^\s*[^#\s>]/,X9=/^\s*(#+)(.*)/,K9=/^\s*$/,Z9=/^\s*>/,J9=/\r?\n?$/g;class od{constructor(e){Y(this,"featureCallback");Y(this,"endCallback");Y(this,"commentCallback");Y(this,"errorCallback");Y(this,"disableDerivesFromReferences");Y(this,"directiveCallback");Y(this,"bufferSize");Y(this,"eof",!1);Y(this,"lineNumber",0);Y(this,"_underConstructionTopLevel",[]);Y(this,"_underConstructionById",{});Y(this,"_completedReferences",{});Y(this,"_underConstructionOrphans",{});const t=()=>{};this.featureCallback=e.featureCallback||t,this.endCallback=e.endCallback||t,this.commentCallback=e.commentCallback||t,this.errorCallback=e.errorCallback||t,this.directiveCallback=e.directiveCallback||t,this.disableDerivesFromReferences=e.disableDerivesFromReferences||!1,this.bufferSize=e.bufferSize===void 0?1/0:e.bufferSize}addLine(e){if(this.eof)return;if(this.lineNumber+=1,Y9.test(e)){this._bufferLine(e);return}const t=X9.exec(e);if(t){const[,r]=t;let[,,i]=t;if(r.length===3)this._emitAllUnderConstructionFeatures();else if(r.length===2){const s=q9(e);s&&(s.directive==="FASTA"?(this._emitAllUnderConstructionFeatures(),this.eof=!0):this._emitItem(s))}else this._emitItem({comment:i.trimStart()})}else if(!K9.test(e))if(Z9.test(e))this._emitAllUnderConstructionFeatures(),this.eof=!0;else{const r=e.replaceAll(J9,"");throw new Error(`GFF3 parse error.  Cannot parse '${r}'.`)}}addParsedFeatureLine(e){this.eof||(this.lineNumber+=1,this._bufferParsedLine(e))}finish(){this._emitAllUnderConstructionFeatures(),this.endCallback()}_emitItem(e){Array.isArray(e)?this.featureCallback(e):"directive"in e?this.directiveCallback(e):"comment"in e&&this.commentCallback(e)}_enforceBufferSizeLimit(e=0){const t=r=>{var i,s;r&&Array.isArray(r)&&((s=(i=r[0].attributes)==null?void 0:i.ID)!=null&&s[0])&&(r[0].attributes.ID.forEach(a=>{delete this._underConstructionById[a],delete this._completedReferences[a]}),r.forEach(a=>{a.child_features&&a.child_features.forEach(c=>{t(c)}),a.derived_features&&a.derived_features.forEach(c=>{t(c)})}))};for(;this._underConstructionTopLevel.length+e>this.bufferSize;){const r=this._underConstructionTopLevel.shift();r&&(this._emitItem(r),t(r))}}_emitAllUnderConstructionFeatures(){this._underConstructionTopLevel.forEach(this._emitItem.bind(this)),this._underConstructionTopLevel=[],this._underConstructionById={},this._completedReferences={};const e=Object.keys(this._underConstructionOrphans);if(e.length)throw new Error(`some features reference other features that do not exist in the file (or in the same '###' scope). ${e.join(",")}`)}_bufferLine(e){this._bufferParsedLine(Q9(e))}_bufferParsedLine(e){var a,c,u;const t=e;t.child_features=[],t.derived_features=[];const r=((a=t.attributes)==null?void 0:a.ID)||[],i=((c=t.attributes)==null?void 0:c.Parent)||[],s=this.disableDerivesFromReferences?[]:((u=t.attributes)==null?void 0:u.Derives_from)||[];if(!r.length&&!i.length&&!s.length){this._emitItem([t]);return}let o;r.forEach(l=>{const f=this._underConstructionById[l];f?(f[f.length-1].type!==t.type&&this._parseError(`multi-line feature "${l}" has inconsistent types: "${t.type}", "${f[f.length-1].type}"`),f.push(t),o=f):(o=[t],this._enforceBufferSizeLimit(1),!i.length&&!s.length&&this._underConstructionTopLevel.push(o),this._underConstructionById[l]=o,this._resolveReferencesTo(o,l))}),this._resolveReferencesFrom(o||[t],{Parent:i,Derives_from:s},r)}_resolveReferencesTo(e,t){const r=this._underConstructionOrphans[t];if(r){for(const i of e)i.child_features.push(...r.Parent),i.derived_features.push(...r.Derives_from);delete this._underConstructionOrphans[t]}}_parseError(e){this.eof=!0,this.errorCallback(`${this.lineNumber}: ${e}`)}_resolveReferencesFrom(e,t,r){for(const i of t.Parent){const s=this._underConstructionById[i];if(s){let o=!1;for(const a of r){const c=`Parent,${i}`,u=this._completedReferences[a]||(this._completedReferences[a]={});u[c]&&(o=!0),u[c]=!0}if(!o)for(const a of s)a.child_features.push(e)}else{let o=this._underConstructionOrphans[i];o||(o={Parent:[],Derives_from:[]},this._underConstructionOrphans[i]=o),o.Parent.push(e)}}for(const i of t.Derives_from){const s=this._underConstructionById[i];if(s){let o=!1;for(const a of r){const c=`Derives_from,${i}`,u=this._completedReferences[a]||(this._completedReferences[a]={});u[c]&&(o=!0),u[c]=!0}if(!o)for(const a of s)a.derived_features.push(e)}else{let o=this._underConstructionOrphans[i];o||(o={Parent:[],Derives_from:[]},this._underConstructionOrphans[i]=o),o.Derives_from.push(e)}}}}function $9(n){const e=[],t=new od({featureCallback:r=>e.push(r),disableDerivesFromReferences:!0,errorCallback:r=>{throw new Error(r)}});for(const r of n.split(/\r?\n/))t.addLine(r);return t.finish(),e}function eP(n){const e=[],t=new od({featureCallback:r=>e.push(r),disableDerivesFromReferences:!0,errorCallback:r=>{throw new Error(r)}});for(const r of n)t.addLine(r);return t.finish(),e}function tP(n){const e=[],t=new od({featureCallback:r=>e.push(r),disableDerivesFromReferences:!0,errorCallback:r=>{throw new Error(r)}});for(const r of n){const i=$b(r.fields);r.lineHash!==void 0&&(i.attributes||(i.attributes={}),i.attributes._lineHash=[String(r.lineHash)]),t.addParsedFeatureLine(i)}return t.finish(),e}const nP=Object.freeze(Object.defineProperty({__proto__:null,parseArraySync:eP,parseRecordsSync:tP,parseStringSync:$9},Symbol.toStringTag,{value:"Module"}));function rP(n,e,t){const r=Object.create(null),i=t.length,s=e.length,o=9,a=58;let c=0;if(n==="GT"){for(let f=0;f<i;f++){const d=c;for(;c<s&&e.charCodeAt(c)!==o;)c++;r[t[f]]=e.slice(d,c),c++}return r}const u=n.indexOf("GT");if(u===-1)return r;if(u===0){for(let f=0;f<i;f++){const d=c;for(;c<s&&e.charCodeAt(c)!==a&&e.charCodeAt(c)!==o;)c++;for(r[t[f]]=e.slice(d,c);c<s&&e.charCodeAt(c)!==o;)c++;c++}return r}let l=0;for(let f=0;f<u;f++)n.charCodeAt(f)===a&&l++;for(let f=0;f<i;f++){const d=c;let h=c;for(;h<s&&e.charCodeAt(h)!==o;)h++;let p=0,m=d;for(let g=d;g<=h;g++)if(g===h||e.charCodeAt(g)===a){if(p===l){r[t[f]]=e.slice(m,g);break}p++,m=g+1}c=h+1}return r}function iP(n){const e=[],t=[];let r=!1,i=!1;const s=n.length;for(let o=0;o<s;o++){const a=n[o];a==='"'?(r=!r,t.push(a)):a==="["?(i=!0,t.push(a)):a==="]"?(i=!1,t.push(a)):a===","&&!r&&!i?(e.push(t.join("").trim()),t.length=0):t.push(a)}return t.length>0&&e.push(t.join("").trim()),e}function sP(n,e){const t=n.indexOf(e);return[n.slice(0,t),n.slice(t+1)]}function oP(n){const e=n.slice(1,-1),t=iP(e),r=[];for(let i=0;i<t.length;i++){const s=t[i],[o,a]=sP(s,"=");if(a&&a.startsWith("[")&&a.endsWith("]")){const c=a.slice(1,-1).split(",");for(let u=0;u<c.length;u++)c[u]=c[u].trim();r.push([o,c])}else a&&a.startsWith('"')&&a.endsWith('"')?r.push([o,a.slice(1,-1)]):r.push([o,a])}return Object.fromEntries(r)}const Cu={InfoFields:{AA:{Number:1,Type:"String",Description:"Ancestral allele"},AC:{Number:"A",Type:"Integer",Description:"Allele count in genotypes, for each ALT allele, in the same order as listed"},AD:{Number:"R",Type:"Integer",Description:"Total read depth for each allele"},ADF:{Number:"R",Type:"Integer",Description:"Read depth for each allele on the forward strand"},ADR:{Number:"R",Type:"Integer",Description:"Read depth for each allele on the reverse strand"},AF:{Number:"A",Type:"Float",Description:"Allele frequency for each ALT allele in the same order as listed (estimated from primary data, not called genotypes)"},AN:{Number:1,Type:"Integer",Description:"Total number of alleles in called genotypes"},BQ:{Number:1,Type:"Float",Description:"RMS base quality"},CIGAR:{Number:1,Type:"Float",Description:"Cigar string describing how to align an alternate allele to the reference allele"},DB:{Number:0,Type:"Flag",Description:"dbSNP membership"},DP:{Number:1,Type:"Integer",Description:"combined depth across samples"},END:{Number:1,Type:"Integer",Description:"End position (for use with symbolic alleles)"},H2:{Number:0,Type:"Flag",Description:"HapMap2 membership"},H3:{Number:0,Type:"Flag",Description:"HapMap3 membership"},MQ:{Number:1,Type:null,Description:"RMS mapping quality"},MQ0:{Number:1,Type:"Integer",Description:"Number of MAPQ == 0 reads"},NS:{Number:1,Type:"Integer",Description:"Number of samples with data"},SB:{Number:4,Type:"Integer",Description:"Strand bias"},SOMATIC:{Number:0,Type:"Flag",Description:"Somatic mutation (for cancer genomics)"},VALIDATED:{Number:0,Type:"Flag",Description:"Validated by follow-up experiment"},"1000G":{Number:0,Type:"Flag",Description:"1000 Genomes membership"},IMPRECISE:{Number:0,Type:"Flag",Description:"Imprecise structural variation"},NOVEL:{Number:0,Type:"Flag",Description:"Indicates a novel structural variation"},SVTYPE:{Number:1,Type:"String",Description:"Type of structural variant"},SVLEN:{Number:null,Type:"Integer",Description:"Difference in length between REF and ALT alleles"},CIPOS:{Number:2,Type:"Integer",Description:"Confidence interval around POS for imprecise variants"},CIEND:{Number:2,Type:"Integer",Description:"Confidence interval around END for imprecise variants"},HOMLEN:{Type:"Integer",Description:"Length of base pair identical micro-homology at event breakpoints"},HOMSEQ:{Type:"String",Description:"Sequence of base pair identical micro-homology at event breakpoints"},BKPTID:{Type:"String",Description:"ID of the assembled alternate allele in the assembly file"},MEINFO:{Number:4,Type:"String",Description:"Mobile element info of the form NAME,START,END,POLARITY"},METRANS:{Number:4,Type:"String",Description:"Mobile element transduction info of the form CHR,START,END,POLARITY"},DGVID:{Number:1,Type:"String",Description:"ID of this element in Database of Genomic Variation"},DBVARID:{Number:1,Type:"String",Description:"ID of this element in DBVAR"},DBRIPID:{Number:1,Type:"String",Description:"ID of this element in DBRIP"},MATEID:{Number:null,Type:"String",Description:"ID of mate breakends"},PARID:{Number:1,Type:"String",Description:"ID of partner breakend"},EVENT:{Number:1,Type:"String",Description:"ID of event associated to breakend"},CILEN:{Number:2,Type:"Integer",Description:"Confidence interval around the inserted material between breakend"},DPADJ:{Type:"Integer",Description:"Read Depth of adjacency"},CN:{Number:1,Type:"Integer",Description:"Copy number of segment containing breakend"},CNADJ:{Number:null,Type:"Integer",Description:"Copy number of adjacency"},CICN:{Number:2,Type:"Integer",Description:"Confidence interval around copy number for the segment"},CICNADJ:{Number:null,Type:"Integer",Description:"Confidence interval around copy number for the adjacency"}},GenotypeFields:{AD:{Number:"R",Type:"Integer",Description:"Read depth for each allele"},ADF:{Number:"R",Type:"Integer",Description:"Read depth for each allele on the forward strand"},ADR:{Number:"R",Type:"Integer",Description:"Read depth for each allele on the reverse strand"},DP:{Number:1,Type:"Integer",Description:"Read depth"},EC:{Number:"A",Type:"Integer",Description:"Expected alternate allele counts"},FT:{Number:1,Type:"String",Description:'Filter indicating if this genotype was "called"'},GL:{Number:"G",Type:"Float",Description:"Genotype likelihoods"},GP:{Number:"G",Type:"Float",Description:"Genotype posterior probabilities"},GQ:{Number:1,Type:"Integer",Description:"Conditional genotype quality"},GT:{Number:1,Type:"String",Description:"Genotype"},HQ:{Number:2,Type:"Integer",Description:"Haplotype quality"},MQ:{Number:1,Type:"Integer",Description:"RMS mapping quality"},PL:{Number:"G",Type:"Integer",Description:"Phred-scaled genotype likelihoods rounded to the closest integer"},PQ:{Number:1,Type:"Integer",Description:"Phasing quality"},PS:{Number:1,Type:"Integer",Description:"Phase set"}},AltTypes:{DEL:{Description:"Deletion relative to the reference"},INS:{Description:"Insertion of novel sequence relative to the reference"},DUP:{Description:"Region of elevated copy number relative to the reference"},INV:{Description:"Inversion of reference sequence"},CNV:{Description:"Copy number variable region (may be both deletion and duplication)"},"DUP:TANDEM":{Description:"Tandem duplication"},"DEL:ME":{Description:"Deletion of mobile element relative to the reference"},"INS:ME":{Description:"Insertion of a mobile element relative to the reference"},NON_REF:{Description:"Represents any possible alternative allele at this location"},"*":{Description:"Represents any possible alternative allele at this location"}},FilterTypes:{PASS:{Description:"Passed all filters"}}};function aP(n){try{return decodeURIComponent(n)}catch{return n}}class cP{constructor({header:e="",strict:t=!0}){if(!e.length)throw new Error("empty header received");const r=e.split(/[\r\n]+/).filter(Boolean);if(!r.length)throw new Error("no non-empty header lines specified");this.strict=t,this.metadata={INFO:{...Cu.InfoFields},FORMAT:{...Cu.GenotypeFields},ALT:{...Cu.AltTypes},FILTER:{...Cu.FilterTypes}};let i;for(let c=0;c<r.length;c++){const u=r[c];if(u.startsWith("#"))u.startsWith("##")?this.parseMetadata(u):i=u;else throw new Error(`Bad line in header:
${u}`)}if(!i)throw new Error("No format line found in header");const s=i.trim().split("	"),o=s.slice(0,8),a=["#CHROM","POS","ID","REF","ALT","QUAL","FILTER","INFO"];if(s.length<8)throw new Error(`VCF header missing columns:
${i}`);if(o.length!==a.length||!o.every((c,u)=>c===a[u]))throw new Error(`VCF column headers not correct:
${i}`);this.samples=s.slice(9)}parseInfo(e){var a;const t={},r=e.includes("%"),i=e.split(";"),s=this.metadata.INFO,o=i.length;for(let c=0;c<o;c++){const u=i[c],l=u.indexOf("="),f=l===-1?u:u.slice(0,l),d=l===-1?void 0:u.slice(l+1),h=(a=s[f])==null?void 0:a.Type;if(h==="Flag")t[f]=!0;else if(!d)t[f]=!0;else{const p=h==="Integer"||h==="Float",m=d.split(","),g=m.length;if(r){const x=[];for(let b=0;b<g;b++){const w=m[b];if(w===".")x.push(void 0);else{const A=aP(w);x.push(p?Number(A):A)}}t[f]=x}else{const x=[];for(let b=0;b<g;b++){const w=m[b];w==="."?x.push(void 0):x.push(p?Number(w):w)}t[f]=x}}}return t}parseSamples(e,t){var i;const r={};if(e){const s=t.split("	"),o=e.split(":"),a=this.metadata.FORMAT,c=[];for(let f=0;f<o.length;f++){const d=(i=a[o[f]])==null?void 0:i.Type;c.push(d==="Integer"||d==="Float")}const u=o.length,l=this.samples.length;for(let f=0;f<l;f++){const d=this.samples[f],h={},p=s[f],m=p.length;let g=0,x=0;for(let b=0;b<=m;b++)if(b===m||p[b]===":"){const w=p.slice(g,b);if(w===""||w===".")h[o[x]]=void 0;else{const A=w.split(","),S=[];if(c[x])for(let C=0;C<A.length;C++){const v=A[C];S.push(v==="."?void 0:+v)}else for(let C=0;C<A.length;C++){const v=A[C];S.push(v==="."?void 0:v)}h[o[x]]=S}if(g=b+1,x+=1,x>=u)break}r[d]=h}}return r}parseMetadata(e){const t=/^##(.+?)=(.*)/.exec(e.trim());if(!t)throw new Error(`Line is not a valid metadata line: ${e}`);const[r,i]=t.slice(1,3),s=r;if(i!=null&&i.startsWith("<")){s in this.metadata||(this.metadata[s]={});const[o,a]=this.parseStructuredMetaVal(i);o?this.metadata[s][o]=a:this.metadata[s]=a}else this.metadata[s]=i}parseStructuredMetaVal(e){const t=oP(e),r=t.ID;return delete t.ID,"Number"in t&&(Number.isNaN(Number(t.Number))||(t.Number=Number(t.Number))),[r,t]}getMetadata(...e){let t=this.metadata;const r=e.length;for(let i=0;i<r;i++)if(t=t[e[i]],!t)return t;return t}parseLine(e){let t=0,r=0;for(;t<e.length&&r<9;)e[t]==="	"&&(r+=1),t+=1;const i=r===9?t-1:t,s=e.slice(0,i).split("	"),o=e.slice(i+1),[a,c,u,l,f,d,h]=s,p=a,m=+c,g=u==="."?void 0:u.split(";"),x=l,b=f==="."?void 0:f.split(","),w=d==="."?void 0:+d,A=h==="."?void 0:h.split(";"),S=s[8];if(this.strict&&!s[7])throw new Error("no INFO field specified, must contain at least a '.' (turn off strict mode to allow)");const C=s[7]===void 0||s[7]==="."?{}:this.parseInfo(s[7]);return{CHROM:p,POS:m,ALT:b,INFO:C,REF:x,FILTER:(A==null?void 0:A.length)===1&&A[0]==="PASS"?"PASS":A,ID:g,QUAL:w,FORMAT:S,SAMPLES:()=>this.parseSamples(s[8]??"",o),GENOTYPES:()=>rP(s[8]??"",o,this.samples)}}}const uP=Object.freeze(Object.defineProperty({__proto__:null,default:cP},Symbol.toStringTag,{value:"Module"}));re.GenomeSpyDocEmbed=ey,Object.defineProperty(re,Symbol.toStringTag,{value:"Module"})});
