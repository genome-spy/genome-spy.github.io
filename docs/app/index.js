(function(xe,ve){typeof exports=="object"&&typeof module<"u"?ve(exports):typeof define=="function"&&define.amd?define(["exports"],ve):(xe=typeof globalThis<"u"?globalThis:xe||self,ve(xe.genomeSpyDocEmbed={}))})(this,function(xe){"use strict";var ZU=Object.defineProperty;var YU=(xe,ve,ke)=>ve in xe?ZU(xe,ve,{enumerable:!0,configurable:!0,writable:!0,value:ke}):xe[ve]=ke;var Fn=(xe,ve,ke)=>(YU(xe,typeof ve!="symbol"?ve+"":ve,ke),ke),am=(xe,ve,ke)=>{if(!ve.has(xe))throw TypeError("Cannot "+ke)};var W=(xe,ve,ke)=>(am(xe,ve,"read from private field"),ke?ke.call(xe):ve.get(xe)),ee=(xe,ve,ke)=>{if(ve.has(xe))throw TypeError("Cannot add the same private member more than once");ve instanceof WeakSet?ve.add(xe):ve.set(xe,ke)},He=(xe,ve,ke,So)=>(am(xe,ve,"write to private field"),So?So.call(xe,ke):ve.set(xe,ke),ke);var qS=(xe,ve,ke,So)=>({set _(vf){He(xe,ve,vf,ke)},get _(){return W(xe,ve,So)}}),J=(xe,ve,ke)=>(am(xe,ve,"access private method"),ke);var br,Yl,Yc,WS,Qc,ZS,Ql,sm,Xl,lm,Kl,fm,Fa,Jl,ef,yo,wf,tf,um,yr,Ra,Kt,nf,Xc,YS,In,Cr,rf,cm,Kc,QS,Jc,XS,of,hm,af,dm,Ma,lh,wr,Eo,sf,pm,eh,KS,nm,QU,lf,gm,Pa,ff,uf,Oa,La,wo,cf,hf,df,xr,Na,za,Jt,xo,Ua,vr,_o,th,JS,vo,xf,pf,mm,gf,bm,mf,ym,nh,e3,Ga,fh,rh,t3,Ha,Va,Ao,bf,gi,ih,n3,DS;function ve(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function ke(e,t,n){return e.fields=t||[],e.fname=n,e}function So(e){return e==null?null:e.fname}function vf(e){return e==null?null:e.fields}function r3(e){return e.length===1?i3(e[0]):o3(e)}const i3=e=>function(t){return t[e]},o3=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Qe(e){throw Error(e)}function a3(e){const t=[],n=e.length;let r=null,i=0,o="",a,s,f;e=e+"";function l(){t.push(o+e.substring(a,s)),o="",a=s+1}for(a=s=0;s<n;++s)if(f=e[s],f==="\\")o+=e.substring(a,s),o+=e.substring(++s,++s),a=s;else if(f===r)l(),r=null,i=-1;else{if(r)continue;a===i&&f==='"'||a===i&&f==="'"?(a=s+1,r=f):f==="."&&!i?s>a?l():a=s+1:f==="["?(s>a&&l(),i=a=s+1):f==="]"&&(i||Qe("Access path missing open bracket: "+e),i>0&&l(),i=0,a=s+1)}return i&&Qe("Access path missing closing bracket: "+e),r&&Qe("Access path missing closing quote: "+e),s>a&&(s++,l()),t}function Af(e,t,n){const r=a3(e);return e=r.length===1?r[0]:e,ke((n&&n.get||r3)(r),[e],t||e)}Af("id");const Ef=ke(e=>e,[],"identity");ke(()=>0,[],"zero"),ke(()=>1,[],"one"),ke(()=>!0,[],"true"),ke(()=>!1,[],"false");var Ct=Array.isArray;function Rt(e){return e===Object(e)}function yn(e){return e[e.length-1]}function ja(e){return e==null||e===""?null:+e}const wm=e=>t=>e*Math.exp(t),xm=e=>t=>Math.log(e*t),s3=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),l3=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,_f=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function uh(e,t,n,r){const i=n(e[0]),o=n(yn(e)),a=(o-i)*t;return[r(i-a),r(o-a)]}function f3(e,t){return uh(e,t,ja,Ef)}function u3(e,t){var n=Math.sign(e[0]);return uh(e,t,xm(n),wm(n))}function c3(e,t,n){return uh(e,t,_f(n),_f(1/n))}function Sf(e,t,n,r,i){const o=r(e[0]),a=r(yn(e)),s=t!=null?r(t):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function vm(e,t,n){return Sf(e,t,n,ja,Ef)}function Am(e,t,n){const r=Math.sign(e[0]);return Sf(e,t,n,xm(r),wm(r))}function ch(e,t,n,r){return Sf(e,t,n,_f(r),_f(1/r))}function h3(e,t,n,r){return Sf(e,t,n,s3(r),l3(r))}function hh(e){return e!=null?Ct(e)?e:[e]:[]}function d3(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function Mt(e){return typeof e=="function"}const p3="descending";function Em(e,t,n){n=n||{},t=hh(t)||[];const r=[],i=[],o={},a=n.comparator||g3;return hh(e).forEach((s,f)=>{s!=null&&(r.push(t[f]===p3?-1:1),i.push(s=Mt(s)?s:Af(s,null,n)),(vf(s)||[]).forEach(l=>o[l]=1))}),i.length===0?null:ke(a(i,r),Object.keys(o))}const _m=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),g3=(e,t)=>e.length===1?m3(e[0],t[0]):b3(e,t,e.length),m3=(e,t)=>function(n,r){return _m(e(n),e(r))*t},b3=(e,t,n)=>(t.push(0),function(r,i){let o,a=0,s=-1;for(;a===0&&++s<n;)o=e[s],a=_m(o(r),o(i));return a*t[s]});function y3(e){return Mt(e)?e:()=>e}function dh(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}const w3=Object.prototype.hasOwnProperty;function Ei(e,t){return w3.call(e,t)}function $a(e){return typeof e=="boolean"}function x3(e){return Object.prototype.toString.call(e)==="[object Date]"}function v3(e){return e&&Mt(e[Symbol.iterator])}function kt(e){return typeof e=="number"}function A3(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Pe(e){return typeof e=="string"}function Sm(e,t){const n=e[0],r=yn(e),i=+t;return i?i===1?r:n+i*(r-n):n}function Cf(e){return e&&yn(e)-e[0]||0}function kf(e){return Ct(e)?"["+e.map(kf)+"]":Rt(e)||Pe(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function E3(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const _3=e=>kt(e)||x3(e)?e:Date.parse(e);function S3(e,t){return t=t||_3,e==null||e===""?null:t(e)}function C3(e){return e==null||e===""?null:e+""}function Tf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}var Cm={},ph={},gh=34,qa=10,mh=13;function km(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function k3(e,t){var n=km(e);return function(r,i){return t(n(r),i,e)}}function Tm(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Pt(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function T3(e){return e<0?"-"+Pt(-e,6):e>9999?"+"+Pt(e,6):Pt(e,4)}function I3(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":T3(e.getUTCFullYear())+"-"+Pt(e.getUTCMonth()+1,2)+"-"+Pt(e.getUTCDate(),2)+(i?"T"+Pt(t,2)+":"+Pt(n,2)+":"+Pt(r,2)+"."+Pt(i,3)+"Z":r?"T"+Pt(t,2)+":"+Pt(n,2)+":"+Pt(r,2)+"Z":n||t?"T"+Pt(t,2)+":"+Pt(n,2)+"Z":"")}function Im(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(c,h){var d,p,m=i(c,function(y,w){if(d)return d(y,w-1);p=y,d=h?k3(y,h):km(y)});return m.columns=p||[],m}function i(c,h){var d=[],p=c.length,m=0,y=0,w,A=p<=0,S=!1;c.charCodeAt(p-1)===qa&&--p,c.charCodeAt(p-1)===mh&&--p;function _(){if(A)return ph;if(S)return S=!1,Cm;var I,B=m,F;if(c.charCodeAt(B)===gh){for(;m++<p&&c.charCodeAt(m)!==gh||c.charCodeAt(++m)===gh;);return(I=m)>=p?A=!0:(F=c.charCodeAt(m++))===qa?S=!0:F===mh&&(S=!0,c.charCodeAt(m)===qa&&++m),c.slice(B+1,I-1).replace(/""/g,'"')}for(;m<p;){if((F=c.charCodeAt(I=m++))===qa)S=!0;else if(F===mh)S=!0,c.charCodeAt(m)===qa&&++m;else if(F!==n)continue;return c.slice(B,I)}return A=!0,c.slice(B,p)}for(;(w=_())!==ph;){for(var T=[];w!==Cm&&w!==ph;)T.push(w),w=_();h&&(T=h(T,y++))==null||d.push(T)}return d}function o(c,h){return c.map(function(d){return h.map(function(p){return u(d[p])}).join(e)})}function a(c,h){return h==null&&(h=Tm(c)),[h.map(u).join(e)].concat(o(c,h)).join(`
`)}function s(c,h){return h==null&&(h=Tm(c)),o(c,h).join(`
`)}function f(c){return c.map(l).join(`
`)}function l(c){return c.map(u).join(e)}function u(c){return c==null?"":c instanceof Date?I3(c):t.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:f,formatRow:l,formatValue:u}}var B3=Im("	"),D3=B3.parseRows;function F3(e){return e}function R3(e){if(e==null)return F3;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(s,f){f||(t=n=0);var l=2,u=s.length,c=new Array(u);for(c[0]=(t+=s[0])*r+o,c[1]=(n+=s[1])*i+a;l<u;)c[l]=s[l],++l;return c}}function M3(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function P3(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Bm(e,n)})}:Bm(e,t)}function Bm(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=Dm(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function Dm(e,t){var n=R3(e.transform),r=e.arcs;function i(u,c){c.length&&c.pop();for(var h=r[u<0?~u:u],d=0,p=h.length;d<p;++d)c.push(n(h[d],d));u<0&&M3(c,p)}function o(u){return n(u)}function a(u){for(var c=[],h=0,d=u.length;h<d;++h)i(u[h],c);return c.length<2&&c.push(c[0]),c}function s(u){for(var c=a(u);c.length<4;)c.push(c[0]);return c}function f(u){return u.map(s)}function l(u){var c=u.type,h;switch(c){case"GeometryCollection":return{type:c,geometries:u.geometries.map(l)};case"Point":h=o(u.coordinates);break;case"MultiPoint":h=u.coordinates.map(o);break;case"LineString":h=a(u.arcs);break;case"MultiLineString":h=u.arcs.map(a);break;case"Polygon":h=f(u.arcs);break;case"MultiPolygon":h=u.arcs.map(f);break;default:return null}return{type:c,coordinates:h}}return l(t)}function O3(e,t){var n={},r={},i={},o=[],a=-1;t.forEach(function(l,u){var c=e.arcs[l<0?~l:l],h;c.length<3&&!c[1][0]&&!c[1][1]&&(h=t[++a],t[a]=l,t[u]=h)}),t.forEach(function(l){var u=s(l),c=u[0],h=u[1],d,p;if(d=i[c])if(delete i[d.end],d.push(l),d.end=h,p=r[h]){delete r[p.start];var m=p===d?d:d.concat(p);r[m.start=d.start]=i[m.end=p.end]=m}else r[d.start]=i[d.end]=d;else if(d=r[h])if(delete r[d.start],d.unshift(l),d.start=c,p=i[c]){delete i[p.end];var y=p===d?d:p.concat(d);r[y.start=p.start]=i[y.end=d.end]=y}else r[d.start]=i[d.end]=d;else d=[l],r[d.start=c]=i[d.end=h]=d});function s(l){var u=e.arcs[l<0?~l:l],c=u[0],h;return e.transform?(h=[0,0],u.forEach(function(d){h[0]+=d[0],h[1]+=d[1]})):h=u[u.length-1],l<0?[h,c]:[c,h]}function f(l,u){for(var c in l){var h=l[c];delete u[h.start],delete h.start,delete h.end,h.forEach(function(d){n[d<0?~d:d]=1}),o.push(h)}}return f(i,r),f(r,i),t.forEach(function(l){n[l<0?~l:l]||o.push([l])}),o}function L3(e){return Dm(e,N3.apply(this,arguments))}function N3(e,t,n){var r,i,o;if(arguments.length>1)r=z3(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:O3(e,r)}}function z3(e,t,n){var r=[],i=[],o;function a(c){var h=c<0?~c:c;(i[h]||(i[h]=[])).push({i:c,g:o})}function s(c){c.forEach(a)}function f(c){c.forEach(s)}function l(c){c.forEach(f)}function u(c){switch(o=c,c.type){case"GeometryCollection":c.geometries.forEach(u);break;case"LineString":s(c.arcs);break;case"MultiLineString":case"Polygon":f(c.arcs);break;case"MultiPolygon":l(c.arcs);break}}return u(t),i.forEach(n==null?function(c){r.push(c[0].i)}:function(c){n(c[0].g,c[c.length-1].g)&&r.push(c[0].i)}),r}function Wa(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function U3(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function If(e){let t,n,r;e.length!==2?(t=Wa,n=(s,f)=>Wa(e(s),f),r=(s,f)=>e(s)-f):(t=e===Wa||e===U3?e:G3,n=e,r=e);function i(s,f,l=0,u=s.length){if(l<u){if(t(f,f)!==0)return u;do{const c=l+u>>>1;n(s[c],f)<0?l=c+1:u=c}while(l<u)}return l}function o(s,f,l=0,u=s.length){if(l<u){if(t(f,f)!==0)return u;do{const c=l+u>>>1;n(s[c],f)<=0?l=c+1:u=c}while(l<u)}return l}function a(s,f,l=0,u=s.length){const c=i(s,f,l,u-1);return c>l&&r(s[c-1],f)>-r(s[c],f)?c-1:c}return{left:i,center:a,right:o}}function G3(){return 0}function Fm(e){return e===null?NaN:+e}const Rm=If(Wa),kr=Rm.right;Rm.left,If(Fm).center;function H3(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class Tr extends Map{constructor(t,n=$3){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Mm(this,t))}has(t){return super.has(Mm(this,t))}set(t,n){return super.set(V3(this,t),n)}delete(t){return super.delete(j3(this,t))}}function Mm({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function V3({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function j3({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function $3(e){return e!==null&&typeof e=="object"?e.valueOf():e}function bh(e){return e}function Bf(e,...t){return Pm(e,bh,bh,t)}function q3(e,...t){return Pm(e,Array.from,bh,t)}function Pm(e,t,n,r){return function i(o,a){if(a>=r.length)return n(o);const s=new Tr,f=r[a++];let l=-1;for(const u of o){const c=f(u,++l,o),h=s.get(c);h?h.push(u):s.set(c,[u])}for(const[u,c]of s)s.set(u,i(c,a));return t(s)}(e,0)}var yh=Math.sqrt(50),wh=Math.sqrt(10),xh=Math.sqrt(2);function Df(e,t,n){var r,i=-1,o,a,s;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(o=e,e=t,t=o),(s=Om(e,t,n))===0||!isFinite(s))return[];if(s>0){let f=Math.round(e/s),l=Math.round(t/s);for(f*s<e&&++f,l*s>t&&--l,a=new Array(o=l-f+1);++i<o;)a[i]=(f+i)*s}else{s=-s;let f=Math.round(e*s),l=Math.round(t*s);for(f/s<e&&++f,l/s>t&&--l,a=new Array(o=l-f+1);++i<o;)a[i]=(f+i)/s}return r&&a.reverse(),a}function Om(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=yh?10:o>=wh?5:o>=xh?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=yh?10:o>=wh?5:o>=xh?2:1)}function Ir(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=yh?i*=10:o>=wh?i*=5:o>=xh&&(i*=2),t<e?-i:i}function Lm(e,t,n=Fm){if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),s=+n(e[o+1],o+1,e);return a+(s-a)*(i-o)}}function Za(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function Ff(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function W3(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Rf(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Co(e){return e=Rf(Math.abs(e)),e?e[1]:NaN}function Z3(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],f=0;i>0&&s>0&&(f+s+1>r&&(s=Math.max(1,r-f)),o.push(n.substring(i-=s,i+s)),!((f+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function Y3(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Q3=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Br(e){if(!(t=Q3.exec(e)))throw new Error("invalid format: "+e);var t;return new vh({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Br.prototype=vh.prototype;function vh(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}vh.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function X3(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Nm;function K3(e,t){var n=Rf(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(Nm=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Rf(e,Math.max(0,t+o-1))[0]}function zm(e,t){var n=Rf(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Um={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:W3,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>zm(e*100,t),r:zm,s:K3,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Gm(e){return e}var Hm=Array.prototype.map,Vm=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function J3(e){var t=e.grouping===void 0||e.thousands===void 0?Gm:Z3(Hm.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?Gm:Y3(Hm.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function l(c){c=Br(c);var h=c.fill,d=c.align,p=c.sign,m=c.symbol,y=c.zero,w=c.width,A=c.comma,S=c.precision,_=c.trim,T=c.type;T==="n"?(A=!0,T="g"):Um[T]||(S===void 0&&(S=12),_=!0,T="g"),(y||h==="0"&&d==="=")&&(y=!0,h="0",d="=");var I=m==="$"?n:m==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",B=m==="$"?r:/[%p]/.test(T)?a:"",F=Um[T],M=/[defgprs%]/.test(T);S=S===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function G(N){var re=I,se=B,te,pe,Xe;if(T==="c")se=F(N)+se,N="";else{N=+N;var De=N<0||1/N<0;if(N=isNaN(N)?f:F(Math.abs(N),S),_&&(N=X3(N)),De&&+N==0&&p!=="+"&&(De=!1),re=(De?p==="("?p:s:p==="-"||p==="("?"":p)+re,se=(T==="s"?Vm[8+Nm/3]:"")+se+(De&&p==="("?")":""),M){for(te=-1,pe=N.length;++te<pe;)if(Xe=N.charCodeAt(te),48>Xe||Xe>57){se=(Xe===46?i+N.slice(te+1):N.slice(te))+se,N=N.slice(0,te);break}}}A&&!y&&(N=t(N,1/0));var Je=re.length+N.length+se.length,We=Je<w?new Array(w-Je+1).join(h):"";switch(A&&y&&(N=t(We+N,We.length?w-se.length:1/0),We=""),d){case"<":N=re+N+se+We;break;case"=":N=re+We+N+se;break;case"^":N=We.slice(0,Je=We.length>>1)+re+N+se+We.slice(Je);break;default:N=We+re+N+se;break}return o(N)}return G.toString=function(){return c+""},G}function u(c,h){var d=l((c=Br(c),c.type="f",c)),p=Math.max(-8,Math.min(8,Math.floor(Co(h)/3)))*3,m=Math.pow(10,-p),y=Vm[8+p/3];return function(w){return d(m*w)+y}}return{format:l,formatPrefix:u}}var Mf,mt,Ah;eC({thousands:",",grouping:[3],currency:["$",""]});function eC(e){return Mf=J3(e),mt=Mf.format,Ah=Mf.formatPrefix,Mf}function jm(e){return Math.max(0,-Co(Math.abs(e)))}function $m(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Co(t)/3)))*3-Co(Math.abs(e)))}function qm(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Co(t)-Co(e))+1}var Eh=new Date,_h=new Date;function lt(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=function(o){return e(o=new Date(+o)),o},i.ceil=function(o){return e(o=new Date(o-1)),t(o,1),e(o),o},i.round=function(o){var a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=function(o,a){return t(o=new Date(+o),a==null?1:Math.floor(a)),o},i.range=function(o,a,s){var f=[],l;if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return f;do f.push(l=new Date(+o)),t(o,s),e(o);while(l<o&&o<a);return f},i.filter=function(o){return lt(function(a){if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},function(a,s){if(a>=a)if(s<0)for(;++s<=0;)for(;t(a,-1),!o(a););else for(;--s>=0;)for(;t(a,1),!o(a););})},n&&(i.count=function(o,a){return Eh.setTime(+o),_h.setTime(+a),e(Eh),e(_h),Math.floor(n(Eh,_h))},i.every=function(o){return o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?function(a){return r(a)%o===0}:function(a){return i.count(0,a)%o===0}):i}),i}var Pf=lt(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});Pf.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?lt(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):Pf};const Sh=Pf;Pf.range;const tr=1e3,en=tr*60,nr=en*60,_i=nr*24,Ch=_i*7,Wm=_i*30,kh=_i*365;var Zm=lt(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*tr)},function(e,t){return(t-e)/tr},function(e){return e.getUTCSeconds()});const Dr=Zm;Zm.range;var Ym=lt(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*tr)},function(e,t){e.setTime(+e+t*en)},function(e,t){return(t-e)/en},function(e){return e.getMinutes()});const Th=Ym;Ym.range;var Qm=lt(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*tr-e.getMinutes()*en)},function(e,t){e.setTime(+e+t*nr)},function(e,t){return(t-e)/nr},function(e){return e.getHours()});const Ih=Qm;Qm.range;var Xm=lt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*en)/_i,e=>e.getDate()-1);const Si=Xm;Xm.range;function Ci(e){return lt(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n*7)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*en)/Ch})}var Ya=Ci(0),Of=Ci(1),tC=Ci(2),nC=Ci(3),ko=Ci(4),rC=Ci(5),iC=Ci(6);Ya.range,Of.range,tC.range,nC.range,ko.range,rC.range,iC.range;var Qa=lt(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});Qa.range;var Bh=lt(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});Bh.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:lt(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)})};const Fr=Bh;Bh.range;var Km=lt(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*en)},function(e,t){return(t-e)/en},function(e){return e.getUTCMinutes()});const Dh=Km;Km.range;var Jm=lt(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*nr)},function(e,t){return(t-e)/nr},function(e){return e.getUTCHours()});const Fh=Jm;Jm.range;var e1=lt(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/_i},function(e){return e.getUTCDate()-1});const ki=e1;e1.range;function Ti(e){return lt(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n*7)},function(t,n){return(n-t)/Ch})}var Xa=Ti(0),Lf=Ti(1),oC=Ti(2),aC=Ti(3),To=Ti(4),sC=Ti(5),lC=Ti(6);Xa.range,Lf.range,oC.range,aC.range,To.range,sC.range,lC.range;var Ka=lt(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()});Ka.range;var Rh=lt(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});Rh.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:lt(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})};const Rr=Rh;Rh.range;function t1(e,t,n,r,i,o){const a=[[Dr,1,tr],[Dr,5,5*tr],[Dr,15,15*tr],[Dr,30,30*tr],[o,1,en],[o,5,5*en],[o,15,15*en],[o,30,30*en],[i,1,nr],[i,3,3*nr],[i,6,6*nr],[i,12,12*nr],[r,1,_i],[r,2,2*_i],[n,1,Ch],[t,1,Wm],[t,3,3*Wm],[e,1,kh]];function s(l,u,c){const h=u<l;h&&([l,u]=[u,l]);const d=c&&typeof c.range=="function"?c:f(l,u,c),p=d?d.range(l,+u+1):[];return h?p.reverse():p}function f(l,u,c){const h=Math.abs(u-l)/c,d=If(([,,y])=>y).right(a,h);if(d===a.length)return e.every(Ir(l/kh,u/kh,c));if(d===0)return Sh.every(Math.max(Ir(l,u,c),1));const[p,m]=a[h/a[d-1][2]<a[d][2]/h?d-1:d];return p.every(m)}return[s,f]}const[fC,uC]=t1(Rr,Ka,Xa,ki,Fh,Dh),[cC,hC]=t1(Fr,Qa,Ya,Si,Ih,Th),Ja="year",es="quarter",ts="month",ns="week",rs="date",Nf="day",Mh="dayofyear",is="hours",os="minutes",as="seconds",zf="milliseconds";[Ja,es,ts,ns,rs,Nf,Mh,is,os,as,zf].reduce((e,t,n)=>(e[t]=1+n,e),{});const dC={[Ja]:Fr,[es]:Qa.every(3),[ts]:Qa,[ns]:Ya,[rs]:Si,[Nf]:Si,[Mh]:Si,[is]:Ih,[os]:Th,[as]:Dr,[zf]:Sh},pC={[Ja]:Rr,[es]:Ka.every(3),[ts]:Ka,[ns]:Xa,[rs]:ki,[Nf]:ki,[Mh]:ki,[is]:Fh,[os]:Dh,[as]:Dr,[zf]:Sh};function gC(e){return dC[e]}function mC(e){return pC[e]}function Ph(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Oh(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ss(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function n1(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,f=e.shortMonths,l=ls(i),u=fs(i),c=ls(o),h=fs(o),d=ls(a),p=fs(a),m=ls(s),y=fs(s),w=ls(f),A=fs(f),S={a:De,A:Je,b:We,B:et,c:null,d:l1,e:l1,f:zC,g:YC,G:XC,H:OC,I:LC,j:NC,L:f1,m:UC,M:GC,p:_e,q:Se,Q:g1,s:m1,S:HC,u:VC,U:jC,V:$C,w:qC,W:WC,x:null,X:null,y:ZC,Y:QC,Z:KC,"%":p1},_={a:gt,A:jt,b:Ne,B:O,c:null,d:c1,e:c1,f:n8,g:h8,G:p8,H:JC,I:e8,j:t8,L:h1,m:r8,M:i8,p:P,q:$,Q:g1,s:m1,S:o8,u:a8,U:s8,V:l8,w:f8,W:u8,x:null,X:null,y:c8,Y:d8,Z:g8,"%":p1},T={a:G,A:N,b:re,B:se,c:te,d:a1,e:a1,f:FC,g:o1,G:i1,H:s1,I:s1,j:TC,L:DC,m:kC,M:IC,p:M,q:CC,Q:MC,s:PC,S:BC,u:vC,U:AC,V:EC,w:xC,W:_C,x:pe,X:Xe,y:o1,Y:i1,Z:SC,"%":RC};S.x=I(n,S),S.X=I(r,S),S.c=I(t,S),_.x=I(n,_),_.X=I(r,_),_.c=I(t,_);function I(V,Z){return function(C){var v=[],H=-1,q=0,fe=V.length,ne,ue,$t;for(C instanceof Date||(C=new Date(+C));++H<fe;)V.charCodeAt(H)===37&&(v.push(V.slice(q,H)),(ue=r1[ne=V.charAt(++H)])!=null?ne=V.charAt(++H):ue=ne==="e"?" ":"0",($t=Z[ne])&&(ne=$t(C,ue)),v.push(ne),q=H+1);return v.push(V.slice(q,H)),v.join("")}}function B(V,Z){return function(C){var v=ss(1900,void 0,1),H=F(v,V,C+="",0),q,fe;if(H!=C.length)return null;if("Q"in v)return new Date(v.Q);if("s"in v)return new Date(v.s*1e3+("L"in v?v.L:0));if(Z&&!("Z"in v)&&(v.Z=0),"p"in v&&(v.H=v.H%12+v.p*12),v.m===void 0&&(v.m="q"in v?v.q:0),"V"in v){if(v.V<1||v.V>53)return null;"w"in v||(v.w=1),"Z"in v?(q=Oh(ss(v.y,0,1)),fe=q.getUTCDay(),q=fe>4||fe===0?Lf.ceil(q):Lf(q),q=ki.offset(q,(v.V-1)*7),v.y=q.getUTCFullYear(),v.m=q.getUTCMonth(),v.d=q.getUTCDate()+(v.w+6)%7):(q=Ph(ss(v.y,0,1)),fe=q.getDay(),q=fe>4||fe===0?Of.ceil(q):Of(q),q=Si.offset(q,(v.V-1)*7),v.y=q.getFullYear(),v.m=q.getMonth(),v.d=q.getDate()+(v.w+6)%7)}else("W"in v||"U"in v)&&("w"in v||(v.w="u"in v?v.u%7:"W"in v?1:0),fe="Z"in v?Oh(ss(v.y,0,1)).getUTCDay():Ph(ss(v.y,0,1)).getDay(),v.m=0,v.d="W"in v?(v.w+6)%7+v.W*7-(fe+5)%7:v.w+v.U*7-(fe+6)%7);return"Z"in v?(v.H+=v.Z/100|0,v.M+=v.Z%100,Oh(v)):Ph(v)}}function F(V,Z,C,v){for(var H=0,q=Z.length,fe=C.length,ne,ue;H<q;){if(v>=fe)return-1;if(ne=Z.charCodeAt(H++),ne===37){if(ne=Z.charAt(H++),ue=T[ne in r1?Z.charAt(H++):ne],!ue||(v=ue(V,C,v))<0)return-1}else if(ne!=C.charCodeAt(v++))return-1}return v}function M(V,Z,C){var v=l.exec(Z.slice(C));return v?(V.p=u.get(v[0].toLowerCase()),C+v[0].length):-1}function G(V,Z,C){var v=d.exec(Z.slice(C));return v?(V.w=p.get(v[0].toLowerCase()),C+v[0].length):-1}function N(V,Z,C){var v=c.exec(Z.slice(C));return v?(V.w=h.get(v[0].toLowerCase()),C+v[0].length):-1}function re(V,Z,C){var v=w.exec(Z.slice(C));return v?(V.m=A.get(v[0].toLowerCase()),C+v[0].length):-1}function se(V,Z,C){var v=m.exec(Z.slice(C));return v?(V.m=y.get(v[0].toLowerCase()),C+v[0].length):-1}function te(V,Z,C){return F(V,t,Z,C)}function pe(V,Z,C){return F(V,n,Z,C)}function Xe(V,Z,C){return F(V,r,Z,C)}function De(V){return a[V.getDay()]}function Je(V){return o[V.getDay()]}function We(V){return f[V.getMonth()]}function et(V){return s[V.getMonth()]}function _e(V){return i[+(V.getHours()>=12)]}function Se(V){return 1+~~(V.getMonth()/3)}function gt(V){return a[V.getUTCDay()]}function jt(V){return o[V.getUTCDay()]}function Ne(V){return f[V.getUTCMonth()]}function O(V){return s[V.getUTCMonth()]}function P(V){return i[+(V.getUTCHours()>=12)]}function $(V){return 1+~~(V.getUTCMonth()/3)}return{format:function(V){var Z=I(V+="",S);return Z.toString=function(){return V},Z},parse:function(V){var Z=B(V+="",!1);return Z.toString=function(){return V},Z},utcFormat:function(V){var Z=I(V+="",_);return Z.toString=function(){return V},Z},utcParse:function(V){var Z=B(V+="",!0);return Z.toString=function(){return V},Z}}}var r1={"-":"",_:" ",0:"0"},ft=/^\s*\d+/,bC=/^%/,yC=/[\\^$*+?|[\]().{}]/g;function be(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function wC(e){return e.replace(yC,"\\$&")}function ls(e){return new RegExp("^(?:"+e.map(wC).join("|")+")","i")}function fs(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function xC(e,t,n){var r=ft.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function vC(e,t,n){var r=ft.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function AC(e,t,n){var r=ft.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function EC(e,t,n){var r=ft.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function _C(e,t,n){var r=ft.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function i1(e,t,n){var r=ft.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function o1(e,t,n){var r=ft.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function SC(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function CC(e,t,n){var r=ft.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function kC(e,t,n){var r=ft.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function a1(e,t,n){var r=ft.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function TC(e,t,n){var r=ft.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function s1(e,t,n){var r=ft.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function IC(e,t,n){var r=ft.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function BC(e,t,n){var r=ft.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function DC(e,t,n){var r=ft.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function FC(e,t,n){var r=ft.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function RC(e,t,n){var r=bC.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function MC(e,t,n){var r=ft.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function PC(e,t,n){var r=ft.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function l1(e,t){return be(e.getDate(),t,2)}function OC(e,t){return be(e.getHours(),t,2)}function LC(e,t){return be(e.getHours()%12||12,t,2)}function NC(e,t){return be(1+Si.count(Fr(e),e),t,3)}function f1(e,t){return be(e.getMilliseconds(),t,3)}function zC(e,t){return f1(e,t)+"000"}function UC(e,t){return be(e.getMonth()+1,t,2)}function GC(e,t){return be(e.getMinutes(),t,2)}function HC(e,t){return be(e.getSeconds(),t,2)}function VC(e){var t=e.getDay();return t===0?7:t}function jC(e,t){return be(Ya.count(Fr(e)-1,e),t,2)}function u1(e){var t=e.getDay();return t>=4||t===0?ko(e):ko.ceil(e)}function $C(e,t){return e=u1(e),be(ko.count(Fr(e),e)+(Fr(e).getDay()===4),t,2)}function qC(e){return e.getDay()}function WC(e,t){return be(Of.count(Fr(e)-1,e),t,2)}function ZC(e,t){return be(e.getFullYear()%100,t,2)}function YC(e,t){return e=u1(e),be(e.getFullYear()%100,t,2)}function QC(e,t){return be(e.getFullYear()%1e4,t,4)}function XC(e,t){var n=e.getDay();return e=n>=4||n===0?ko(e):ko.ceil(e),be(e.getFullYear()%1e4,t,4)}function KC(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+be(t/60|0,"0",2)+be(t%60,"0",2)}function c1(e,t){return be(e.getUTCDate(),t,2)}function JC(e,t){return be(e.getUTCHours(),t,2)}function e8(e,t){return be(e.getUTCHours()%12||12,t,2)}function t8(e,t){return be(1+ki.count(Rr(e),e),t,3)}function h1(e,t){return be(e.getUTCMilliseconds(),t,3)}function n8(e,t){return h1(e,t)+"000"}function r8(e,t){return be(e.getUTCMonth()+1,t,2)}function i8(e,t){return be(e.getUTCMinutes(),t,2)}function o8(e,t){return be(e.getUTCSeconds(),t,2)}function a8(e){var t=e.getUTCDay();return t===0?7:t}function s8(e,t){return be(Xa.count(Rr(e)-1,e),t,2)}function d1(e){var t=e.getUTCDay();return t>=4||t===0?To(e):To.ceil(e)}function l8(e,t){return e=d1(e),be(To.count(Rr(e),e)+(Rr(e).getUTCDay()===4),t,2)}function f8(e){return e.getUTCDay()}function u8(e,t){return be(Lf.count(Rr(e)-1,e),t,2)}function c8(e,t){return be(e.getUTCFullYear()%100,t,2)}function h8(e,t){return e=d1(e),be(e.getUTCFullYear()%100,t,2)}function d8(e,t){return be(e.getUTCFullYear()%1e4,t,4)}function p8(e,t){var n=e.getUTCDay();return e=n>=4||n===0?To(e):To.ceil(e),be(e.getUTCFullYear()%1e4,t,4)}function g8(){return"+0000"}function p1(){return"%"}function g1(e){return+e}function m1(e){return Math.floor(+e/1e3)}var Io,Lh,b1,Nh,y1;m8({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function m8(e){return Io=n1(e),Lh=Io.format,b1=Io.parse,Nh=Io.utcFormat,y1=Io.utcParse,Io}function us(e){const t={};return n=>t[n]||(t[n]=e(n))}function b8(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=y8(r,i);const a=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+a}}function y8(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function w8(e){const t=us(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Br(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return b8(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,a){a=Br(a??",f");const s=Ir(r,i,o),f=Math.max(Math.abs(r),Math.abs(i));let l;if(a.precision==null)switch(a.type){case"s":return isNaN(l=$m(s,f))||(a.precision=l),n(a,f);case"":case"e":case"g":case"p":case"r":{isNaN(l=qm(s,f))||(a.precision=l-(a.type==="e"));break}case"f":case"%":{isNaN(l=jm(s))||(a.precision=l-(a.type==="%")*2);break}}return t(a)}}}x8();function x8(){return w8({format:mt,formatPrefix:Ah})}function w1(e,t,n){n=n||{},Rt(n)||Qe("Invalid time multi-format specifier: ".concat(n));const r=t(as),i=t(os),o=t(is),a=t(rs),s=t(ns),f=t(ts),l=t(es),u=t(Ja),c=e(n[zf]||".%L"),h=e(n[as]||":%S"),d=e(n[os]||"%I:%M"),p=e(n[is]||"%I %p"),m=e(n[rs]||n[Nf]||"%a %d"),y=e(n[ns]||"%b %d"),w=e(n[ts]||"%B"),A=e(n[es]||"%B"),S=e(n[Ja]||"%Y");return _=>(r(_)<_?c:i(_)<_?h:o(_)<_?d:a(_)<_?p:f(_)<_?s(_)<_?m:y:u(_)<_?l(_)<_?w:A:S)(_)}function x1(e){const t=us(e.format),n=us(e.utcFormat);return{timeFormat:r=>Pe(r)?t(r):w1(t,gC,r),utcFormat:r=>Pe(r)?n(r):w1(n,mC,r),timeParse:us(e.parse),utcParse:us(e.utcParse)}}let zh;v8();function v8(){return zh=x1({format:Lh,parse:b1,utcFormat:Nh,utcParse:y1})}function A8(e){return x1(n1(e))}function E8(e){return arguments.length?zh=A8(e):zh}const _8=/^(data:|([A-Za-z]+:)?\/\/)/,S8=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,C8=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,v1="file://";function k8(e,t){return n=>({options:n||{},sanitize:I8,load:T8,fileAccess:!!t,file:B8(t),http:F8(e)})}async function T8(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function I8(e,t){t=dh({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,a;const s=S8.test(e.replace(C8,""));(e==null||typeof e!="string"||!s)&&Qe("Sanitize failure, invalid URI: "+kf(e));const f=_8.test(e);return(a=t.baseURL)&&!f&&(!e.startsWith("/")&&!a.endsWith("/")&&(e="/"+e),e=a+e),o=(i=e.startsWith(v1))||t.mode==="file"||t.mode!=="http"&&!f&&n,i?e=e.slice(v1.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function B8(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):D8}async function D8(){Qe("No file system access.")}function F8(e){return e?async function(t,n){const r=dh({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?Mt(o[i])?o[i]():o.text():Qe(o.status+""+o.statusText)}:R8}async function R8(){Qe("No HTTP fetch method available.")}const M8=e=>e!=null&&e===e,P8=e=>e==="true"||e==="false"||e===!0||e===!1,O8=e=>!Number.isNaN(Date.parse(e)),A1=e=>!Number.isNaN(+e)&&!(e instanceof Date),L8=e=>A1(e)&&Number.isInteger(+e),E1={boolean:E3,integer:ja,number:ja,date:S3,string:C3,unknown:Ef},Uf=[P8,L8,A1,O8],N8=["boolean","integer","number","date"];function z8(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=Uf.length,i=Uf.map((o,a)=>a+1);for(let o=0,a=0,s,f;o<n;++o)for(f=t?e[o][t]:e[o],s=0;s<r;++s)if(i[s]&&M8(f)&&!Uf[s](f)&&(i[s]=0,++a,a===Uf.length))return"string";return N8[i.reduce((o,a)=>o===0?a:o,0)-1]}function U8(e,t){return t.reduce((n,r)=>(n[r]=z8(e,r),n),{})}function _1(e){const t=function(n,r){const i={delimiter:e};return Uh(n,r?dh(r,i):i)};return t.responseType="text",t}function Uh(e,t){return t.header&&(e=t.header.map(kf).join(t.delimiter)+`
`+e),Im(t.delimiter).parse(e+"")}Uh.responseType="text";function G8(e){return typeof Buffer=="function"&&Mt(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function Gh(e,t){const n=t&&t.property?Af(t.property):Ef;return Rt(e)&&!G8(e)?H8(n(e),t):n(JSON.parse(e))}Gh.responseType="json";function H8(e,t){return!Ct(e)&&v3(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const V8={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function S1(e,t){let n,r,i,o;return e=Gh(e,t),t&&t.feature?(n=P3,i=t.feature):t&&t.mesh?(n=L3,i=t.mesh,o=V8[t.filter]):Qe("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):Qe("Invalid TopoJSON object: "+i),r&&r.features||[r]}S1.responseType="json";const Hh={dsv:Uh,csv:_1(","),tsv:_1("	"),json:Gh,topojson:S1};function C1(e,t){return arguments.length>1?(Hh[e]=t,this):Ei(Hh,e)?Hh[e]:null}function k1(e,t,n,r){t=t||{};const i=C1(t.type||"json");return i||Qe("Unknown data format type: "+t.type),e=i(e,t),t.parse&&j8(e,t.parse,n,r),Ei(e,"columns")&&delete e.columns,e}function j8(e,t,n,r){if(!e.length)return;const i=E8();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),a,s,f,l,u,c;t==="auto"&&(t=U8(e,o)),o=Object.keys(t);const h=o.map(d=>{const p=t[d];let m,y;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),y=m[1],(y[0]==="'"&&y[y.length-1]==="'"||y[0]==='"'&&y[y.length-1]==='"')&&(y=y.slice(1,-1)),(m[0]==="utc"?r:n)(y);if(!E1[p])throw Error("Illegal format pattern: "+d+":"+p);return E1[p]});for(f=0,u=e.length,c=o.length;f<u;++f)for(a=e[f],l=0;l<c;++l)s=o[l],a[s]=h[l](a[s])}const Gf=k8(typeof fetch<"u"&&fetch,null);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const cs=globalThis,Hf=cs.trustedTypes,T1=Hf?Hf.createPolicy("lit-html",{createHTML:e=>e}):void 0,I1="$lit$",Mr=`lit$${(Math.random()+"").slice(9)}$`,B1="?"+Mr,$8=`<${B1}>`,Ii=document,hs=()=>Ii.createComment(""),ds=e=>e===null||typeof e!="object"&&typeof e!="function",D1=Array.isArray,q8=e=>D1(e)||typeof(e==null?void 0:e[Symbol.iterator])=="function",Vh=`[ 	
\f\r]`,ps=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,F1=/-->/g,R1=/>/g,Bi=RegExp(`>|${Vh}(?:([^\\s"'>=/]+)(${Vh}*=${Vh}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),M1=/'/g,P1=/"/g,O1=/^(?:script|style|textarea|title)$/i,W8=e=>(t,...n)=>({_$litType$:e,strings:t,values:n}),rt=W8(1),Di=Symbol.for("lit-noChange"),Ke=Symbol.for("lit-nothing"),L1=new WeakMap,Fi=Ii.createTreeWalker(Ii,129);function N1(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return T1!==void 0?T1.createHTML(t):t}const Z8=(e,t)=>{const n=e.length-1,r=[];let i,o=t===2?"<svg>":"",a=ps;for(let s=0;s<n;s++){const f=e[s];let l,u,c=-1,h=0;for(;h<f.length&&(a.lastIndex=h,u=a.exec(f),u!==null);)h=a.lastIndex,a===ps?u[1]==="!--"?a=F1:u[1]!==void 0?a=R1:u[2]!==void 0?(O1.test(u[2])&&(i=RegExp("</"+u[2],"g")),a=Bi):u[3]!==void 0&&(a=Bi):a===Bi?u[0]===">"?(a=i??ps,c=-1):u[1]===void 0?c=-2:(c=a.lastIndex-u[2].length,l=u[1],a=u[3]===void 0?Bi:u[3]==='"'?P1:M1):a===P1||a===M1?a=Bi:a===F1||a===R1?a=ps:(a=Bi,i=void 0);const d=a===Bi&&e[s+1].startsWith("/>")?" ":"";o+=a===ps?f+$8:c>=0?(r.push(l),f.slice(0,c)+I1+f.slice(c)+Mr+d):f+Mr+(c===-2?s:d)}return[N1(e,o+(e[n]||"<?>")+(t===2?"</svg>":"")),r]};class gs{constructor({strings:t,_$litType$:n},r){let i;this.parts=[];let o=0,a=0;const s=t.length-1,f=this.parts,[l,u]=Z8(t,n);if(this.el=gs.createElement(l,r),Fi.currentNode=this.el.content,n===2){const c=this.el.content.firstChild;c.replaceWith(...c.childNodes)}for(;(i=Fi.nextNode())!==null&&f.length<s;){if(i.nodeType===1){if(i.hasAttributes())for(const c of i.getAttributeNames())if(c.endsWith(I1)){const h=u[a++],d=i.getAttribute(c).split(Mr),p=/([.?@])?(.*)/.exec(h);f.push({type:1,index:o,name:p[2],strings:d,ctor:p[1]==="."?Q8:p[1]==="?"?X8:p[1]==="@"?K8:Vf}),i.removeAttribute(c)}else c.startsWith(Mr)&&(f.push({type:6,index:o}),i.removeAttribute(c));if(O1.test(i.tagName)){const c=i.textContent.split(Mr),h=c.length-1;if(h>0){i.textContent=Hf?Hf.emptyScript:"";for(let d=0;d<h;d++)i.append(c[d],hs()),Fi.nextNode(),f.push({type:2,index:++o});i.append(c[h],hs())}}}else if(i.nodeType===8)if(i.data===B1)f.push({type:2,index:o});else{let c=-1;for(;(c=i.data.indexOf(Mr,c+1))!==-1;)f.push({type:7,index:o}),c+=Mr.length-1}o++}}static createElement(t,n){const r=Ii.createElement("template");return r.innerHTML=t,r}}function Bo(e,t,n=e,r){var a,s;if(t===Di)return t;let i=r!==void 0?(a=n._$Co)==null?void 0:a[r]:n._$Cl;const o=ds(t)?void 0:t._$litDirective$;return(i==null?void 0:i.constructor)!==o&&((s=i==null?void 0:i._$AO)==null||s.call(i,!1),o===void 0?i=void 0:(i=new o(e),i._$AT(e,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=i:n._$Cl=i),i!==void 0&&(t=Bo(e,i._$AS(e,t.values),i,r)),t}let Y8=class{constructor(t,n){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:n},parts:r}=this._$AD,i=((t==null?void 0:t.creationScope)??Ii).importNode(n,!0);Fi.currentNode=i;let o=Fi.nextNode(),a=0,s=0,f=r[0];for(;f!==void 0;){if(a===f.index){let l;f.type===2?l=new ms(o,o.nextSibling,this,t):f.type===1?l=new f.ctor(o,f.name,f.strings,this,t):f.type===6&&(l=new J8(o,this,t)),this._$AV.push(l),f=r[++s]}a!==(f==null?void 0:f.index)&&(o=Fi.nextNode(),a++)}return Fi.currentNode=Ii,i}p(t){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(t,r,n),n+=r.strings.length-2):r._$AI(t[n])),n++}};class ms{get _$AU(){var t;return((t=this._$AM)==null?void 0:t._$AU)??this._$Cv}constructor(t,n,r,i){this.type=2,this._$AH=Ke,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=r,this.options=i,this._$Cv=(i==null?void 0:i.isConnected)??!0}get parentNode(){let t=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=n.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,n=this){t=Bo(this,t,n),ds(t)?t===Ke||t==null||t===""?(this._$AH!==Ke&&this._$AR(),this._$AH=Ke):t!==this._$AH&&t!==Di&&this._(t):t._$litType$!==void 0?this.g(t):t.nodeType!==void 0?this.$(t):q8(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==Ke&&ds(this._$AH)?this._$AA.nextSibling.data=t:this.$(Ii.createTextNode(t)),this._$AH=t}g(t){var o;const{values:n,_$litType$:r}=t,i=typeof r=="number"?this._$AC(t):(r.el===void 0&&(r.el=gs.createElement(N1(r.h,r.h[0]),this.options)),r);if(((o=this._$AH)==null?void 0:o._$AD)===i)this._$AH.p(n);else{const a=new Y8(i,this),s=a.u(this.options);a.p(n),this.$(s),this._$AH=a}}_$AC(t){let n=L1.get(t.strings);return n===void 0&&L1.set(t.strings,n=new gs(t)),n}T(t){D1(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,i=0;for(const o of t)i===n.length?n.push(r=new ms(this.k(hs()),this.k(hs()),this,this.options)):r=n[i],r._$AI(o),i++;i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}_$AR(t=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var n;this._$AM===void 0&&(this._$Cv=t,(n=this._$AP)==null||n.call(this,t))}}let Vf=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,n,r,i,o){this.type=1,this._$AH=Ke,this._$AN=void 0,this.element=t,this.name=n,this._$AM=i,this.options=o,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Ke}_$AI(t,n=this,r,i){const o=this.strings;let a=!1;if(o===void 0)t=Bo(this,t,n,0),a=!ds(t)||t!==this._$AH&&t!==Di,a&&(this._$AH=t);else{const s=t;let f,l;for(t=o[0],f=0;f<o.length-1;f++)l=Bo(this,s[r+f],n,f),l===Di&&(l=this._$AH[f]),a||(a=!ds(l)||l!==this._$AH[f]),l===Ke?t=Ke:t!==Ke&&(t+=(l??"")+o[f+1]),this._$AH[f]=l}a&&!i&&this.O(t)}O(t){t===Ke?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}};class Q8 extends Vf{constructor(){super(...arguments),this.type=3}O(t){this.element[this.name]=t===Ke?void 0:t}}class X8 extends Vf{constructor(){super(...arguments),this.type=4}O(t){this.element.toggleAttribute(this.name,!!t&&t!==Ke)}}class K8 extends Vf{constructor(t,n,r,i,o){super(t,n,r,i,o),this.type=5}_$AI(t,n=this){if((t=Bo(this,t,n,0)??Ke)===Di)return;const r=this._$AH,i=t===Ke&&r!==Ke||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,o=t!==Ke&&(r===Ke||i);i&&this.element.removeEventListener(this.name,this,r),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,t):this._$AH.handleEvent(t)}}class J8{constructor(t,n,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){Bo(this,t)}}const jh=cs.litHtmlPolyfillSupport;jh==null||jh(gs,ms),(cs.litHtmlVersions??(cs.litHtmlVersions=[])).push("3.1.0");const bs=(e,t,n)=>{const r=(n==null?void 0:n.renderBefore)??t;let i=r._$litPart$;if(i===void 0){const o=(n==null?void 0:n.renderBefore)??null;r._$litPart$=i=new ms(t.insertBefore(hs(),o),o,void 0,n??{})}return i._$AI(e),i};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const z1={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},U1=e=>(...t)=>({_$litDirective$:e,values:t});let G1=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,n,r){this._$Ct=t,this._$AM=n,this._$Ci=r}_$AS(t,n){return this.update(t,n)}update(t,n){return this.render(...n)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const H1="important",e4=" !"+H1,$h=U1(class extends G1{constructor(e){var t;if(super(e),e.type!==z1.ATTRIBUTE||e.name!=="style"||((t=e.strings)==null?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r==null?t:t+`${n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(e,[t]){const{style:n}=e.element;if(this.ut===void 0)return this.ut=new Set(Object.keys(t)),this.render(t);for(const r of this.ut)t[r]==null&&(this.ut.delete(r),r.includes("-")?n.removeProperty(r):n[r]=null);for(const r in t){const i=t[r];if(i!=null){this.ut.add(r);const o=typeof i=="string"&&i.endsWith(e4);r.includes("-")||o?n.setProperty(r,o?i.slice(0,-11):i,o?H1:""):n[r]=i}}return Di}}),t4="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e.spinner_ajPY{transform-origin:center;animation:spinner_AtaB%20.75s%20infinite%20linear}@keyframes%20spinner_AtaB{100%25{transform:rotate(360deg)}}%3c/style%3e%3cpath%20d='M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z'%20opacity='.25'/%3e%3cpath%20d='M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z'%20class='spinner_ajPY'/%3e%3c/svg%3e",n4=`.genome-spy {
  font-family: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  position: relative;
}
.genome-spy canvas {
  transform: scale(1, 1);
  opacity: 1;
  transition: transform 0.6s, opacity 0.6s;
}
.genome-spy .loading-message {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}
.genome-spy .loading-message .message {
  color: #666;
  opacity: 0;
  transition: opacity 0.7s;
}
.genome-spy.loading canvas {
  transform: scale(0.95, 0.95);
  opacity: 0;
}
.genome-spy.loading .loading-message .message {
  opacity: 1;
}
.genome-spy.loading .ellipsis {
  animation: blinker 1s linear infinite;
}
@keyframes blinker {
  50% {
    opacity: 0;
  }
}
.genome-spy .loading-indicators {
  position: absolute;
  inset: 0;
  user-select: none;
  pointer-events: none;
}
.genome-spy .loading-indicators div {
  position: absolute;
  display: flex;
  align-items: center;
  justify-content: center;
}
.genome-spy .loading-indicators div > div {
  font-size: 11px;
  transition: opacity 0.2s;
  background: white;
  padding: 2px 5px;
  display: flex;
  border-radius: 3px;
  gap: 0.5em;
  opacity: 0;
}
.genome-spy .loading-indicators div > div.loading {
  opacity: 0.5;
}
.genome-spy .loading-indicators div > div > * {
  display: block;
}
.genome-spy .loading-indicators div > div img {
  width: 1.5em;
  height: 1.5em;
}
.genome-spy .tooltip {
  position: absolute;
  max-width: 450px;
  overflow: hidden;
  background: #f6f6f6;
  padding: 10px;
  font-size: 13px;
  box-shadow: 0px 3px 15px 0px rgba(0, 0, 0, 0.21);
  pointer-events: none;
  z-index: 100;
}
.genome-spy .tooltip > :last-child {
  margin-bottom: 0;
}
.genome-spy .tooltip > .title {
  padding-bottom: 5px;
  margin-bottom: 5px;
  border-bottom: 1px dashed #b6b6b6;
}
.genome-spy .tooltip .summary {
  font-size: 12px;
}
.genome-spy .tooltip table {
  border-collapse: collapse;
}
.genome-spy .tooltip table:first-child {
  margin-top: 0;
}
.genome-spy .tooltip table th,
.genome-spy .tooltip table td {
  padding: 2px 0.4em;
  vertical-align: top;
}
.genome-spy .tooltip table th:first-child,
.genome-spy .tooltip table td:first-child {
  padding-left: 0;
}
.genome-spy .tooltip table th {
  text-align: left;
  font-weight: bold;
}
.genome-spy .tooltip .color-legend {
  display: inline-block;
  width: 0.8em;
  height: 0.8em;
  margin-left: 0.4em;
  box-shadow: 0px 0px 3px 1px white;
}
.genome-spy .tooltip .attributes .hovered {
  background-color: #e0e0e0;
}
.genome-spy .tooltip .na {
  color: #aaa;
  font-style: italic;
  font-size: 80%;
}
.genome-spy .gene-track-tooltip .summary {
  font-size: 90%;
}
.genome-spy .message-box {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: 0;
  height: 100%;
  width: 100%;
}
.genome-spy .message-box > div {
  border: 1px solid red;
  padding: 10px;
  background: #fff0f0;
}`;function r4(e,t){var n=e.getBoundingClientRect();return[t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop]}function qh(e,t){return e.length==t.length&&e.every((n,r)=>e[r]===t[r])}function Ot(e){return Array.isArray(e)?e:typeof e<"u"?[e]:[]}function ys(e){return e[e.length-1]}class i4{constructor(t){this.container=t,this.element=document.createElement("div"),this.element.className="tooltip",this._visible=!0,this.container.appendChild(this.element),this._previousTooltipDatum=void 0,this.enabledStack=[!0],this._penaltyUntil=0,this._lastCoords=void 0,this._previousMove=0,this.clear()}set visible(t){t!=this._visible&&(this.element.style.display=t?null:"none",this._visible=t)}get visible(){return this._visible}get enabled(){return ys(this.enabledStack)??!0}pushEnabledState(t){this.enabledStack.push(t),t||(this.visible=!1)}popEnabledState(){this.enabledStack.pop()}handleMouseMove(t){this.mouseCoords=r4(this.container,t);const n=performance.now();!this.visible&&!this._isPenalty()&&n-this._previousMove>500&&(this._penaltyUntil=n+70),this._lastCoords&&o4(this.mouseCoords,this._lastCoords)>20&&(this._penaltyUntil=n+400),this._lastCoords=this.mouseCoords,this.visible&&this.updatePlacement(),this._previousMove=n}updatePlacement(){const[n,r]=this.mouseCoords;let i=n+20;i>this.container.clientWidth-this.element.offsetWidth&&(i=n-20-this.element.offsetWidth),this.element.style.left=i+"px",this.element.style.top=Math.min(r+20,this.container.clientHeight-this.element.offsetHeight)+"px"}setContent(t){if(!t||!this.enabled||this._isPenalty()){this.visible&&(bs("",this.element),this.visible=!1),this._previousTooltipDatum=void 0;return}bs(t,this.element),this.visible=!0,this.updatePlacement()}clear(){this._previousTooltipDatum=void 0,this.setContent(void 0)}updateWithDatum(t,n){t!==this._previousTooltipDatum&&(this._previousTooltipDatum=t,n||(n=r=>Promise.resolve(rt` ${JSON.stringify(r)} `)),n(t).then(r=>this.setContent(r)).catch(r=>{if(r!=="debounced")throw r}))}_isPenalty(){return this._penaltyUntil&&this._penaltyUntil>performance.now()}}function o4(e,t){let n=0;for(let r=0;r<e.length;r++)n+=(e[r]-t[r])**2;return Math.sqrt(n)}const a4="RawCode",s4="Literal",l4="Property",f4="Identifier",u4="ArrayExpression",c4="BinaryExpression",h4="CallExpression",d4="ConditionalExpression",p4="LogicalExpression",g4="MemberExpression",m4="ObjectExpression",b4="UnaryExpression";function wn(e){this.type=e}wn.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=y4(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function y4(e){switch(e.type){case u4:return e.elements;case c4:case p4:return[e.left,e.right];case h4:return[e.callee].concat(e.arguments);case d4:return[e.test,e.consequent,e.alternate];case g4:return[e.object,e.property];case m4:return e.properties;case l4:return[e.key,e.value];case b4:return[e.argument];case f4:case s4:case a4:default:return[]}}var Mn,K,U,vt,Te,jf=1,ws=2,Ri=3,Pr=4,$f=5,Mi=6,Lt=7,xs=8,w4=9;Mn={},Mn[jf]="Boolean",Mn[ws]="<end>",Mn[Ri]="Identifier",Mn[Pr]="Keyword",Mn[$f]="Null",Mn[Mi]="Numeric",Mn[Lt]="Punctuator",Mn[xs]="String",Mn[w4]="RegularExpression";var x4="ArrayExpression",v4="BinaryExpression",A4="CallExpression",E4="ConditionalExpression",V1="Identifier",_4="Literal",S4="LogicalExpression",C4="MemberExpression",k4="ObjectExpression",T4="Property",I4="UnaryExpression",ut="Unexpected token %0",B4="Unexpected number",D4="Unexpected string",F4="Unexpected identifier",R4="Unexpected reserved word",M4="Unexpected end of input",Wh="Invalid regular expression",Zh="Invalid regular expression: missing /",j1="Octal literals are not allowed in strict mode.",P4="Duplicate data property in object literal not allowed in strict mode",bt="ILLEGAL",vs="Disabled.",O4=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),L4=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function qf(e,t){if(!e)throw new Error("ASSERT: "+t)}function rr(e){return e>=48&&e<=57}function Yh(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function As(e){return"01234567".indexOf(e)>=0}function N4(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function Es(e){return e===10||e===13||e===8232||e===8233}function _s(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&O4.test(String.fromCharCode(e))}function Wf(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&L4.test(String.fromCharCode(e))}const z4={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function $1(){for(;U<vt;){const e=K.charCodeAt(U);if(N4(e)||Es(e))++U;else break}}function Qh(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)U<vt&&Yh(K[U])?(r=K[U++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):ye({},ut,bt);return String.fromCharCode(i)}function U4(){var e,t,n,r;for(e=K[U],t=0,e==="}"&&ye({},ut,bt);U<vt&&(e=K[U++],!!Yh(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ye({},ut,bt),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function q1(){var e,t;for(e=K.charCodeAt(U++),t=String.fromCharCode(e),e===92&&(K.charCodeAt(U)!==117&&ye({},ut,bt),++U,e=Qh("u"),(!e||e==="\\"||!_s(e.charCodeAt(0)))&&ye({},ut,bt),t=e);U<vt&&(e=K.charCodeAt(U),!!Wf(e));)++U,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),K.charCodeAt(U)!==117&&ye({},ut,bt),++U,e=Qh("u"),(!e||e==="\\"||!Wf(e.charCodeAt(0)))&&ye({},ut,bt),t+=e);return t}function G4(){var e,t;for(e=U++;U<vt;){if(t=K.charCodeAt(U),t===92)return U=e,q1();if(Wf(t))++U;else break}return K.slice(e,U)}function H4(){var e,t,n;return e=U,t=K.charCodeAt(U)===92?q1():G4(),t.length===1?n=Ri:z4.hasOwnProperty(t)?n=Pr:t==="null"?n=$f:t==="true"||t==="false"?n=jf:n=Ri,{type:n,value:t,start:e,end:U}}function Xh(){var e=U,t=K.charCodeAt(U),n,r=K[U],i,o,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++U,{type:Lt,value:String.fromCharCode(t),start:e,end:U};default:if(n=K.charCodeAt(U+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return U+=2,{type:Lt,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:U};case 33:case 61:return U+=2,K.charCodeAt(U)===61&&++U,{type:Lt,value:K.slice(e,U),start:e,end:U}}}if(a=K.substr(U,4),a===">>>=")return U+=4,{type:Lt,value:a,start:e,end:U};if(o=a.substr(0,3),o===">>>"||o==="<<="||o===">>=")return U+=3,{type:Lt,value:o,start:e,end:U};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return U+=2,{type:Lt,value:i,start:e,end:U};if(i==="//"&&ye({},ut,bt),"<>=!+-*%&|^/".indexOf(r)>=0)return++U,{type:Lt,value:r,start:e,end:U};ye({},ut,bt)}function V4(e){let t="";for(;U<vt&&Yh(K[U]);)t+=K[U++];return t.length===0&&ye({},ut,bt),_s(K.charCodeAt(U))&&ye({},ut,bt),{type:Mi,value:parseInt("0x"+t,16),start:e,end:U}}function j4(e){let t="0"+K[U++];for(;U<vt&&As(K[U]);)t+=K[U++];return(_s(K.charCodeAt(U))||rr(K.charCodeAt(U)))&&ye({},ut,bt),{type:Mi,value:parseInt(t,8),octal:!0,start:e,end:U}}function W1(){var e,t,n;if(n=K[U],qf(rr(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=U,e="",n!=="."){if(e=K[U++],n=K[U],e==="0"){if(n==="x"||n==="X")return++U,V4(t);if(As(n))return j4(t);n&&rr(n.charCodeAt(0))&&ye({},ut,bt)}for(;rr(K.charCodeAt(U));)e+=K[U++];n=K[U]}if(n==="."){for(e+=K[U++];rr(K.charCodeAt(U));)e+=K[U++];n=K[U]}if(n==="e"||n==="E")if(e+=K[U++],n=K[U],(n==="+"||n==="-")&&(e+=K[U++]),rr(K.charCodeAt(U)))for(;rr(K.charCodeAt(U));)e+=K[U++];else ye({},ut,bt);return _s(K.charCodeAt(U))&&ye({},ut,bt),{type:Mi,value:parseFloat(e),start:t,end:U}}function $4(){var e="",t,n,r,i,o=!1;for(t=K[U],qf(t==="'"||t==='"',"String literal must starts with a quote"),n=U,++U;U<vt;)if(r=K[U++],r===t){t="";break}else if(r==="\\")if(r=K[U++],!r||!Es(r.charCodeAt(0)))switch(r){case"u":case"x":K[U]==="{"?(++U,e+=U4()):e+=Qh(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:As(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),U<vt&&As(K[U])&&(o=!0,i=i*8+"01234567".indexOf(K[U++]),"0123".indexOf(r)>=0&&U<vt&&As(K[U])&&(i=i*8+"01234567".indexOf(K[U++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&K[U]===`
`&&++U;else{if(Es(r.charCodeAt(0)))break;e+=r}return t!==""&&ye({},ut,bt),{type:xs,value:e,octal:o,start:n,end:U}}function q4(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";ye({},Wh)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ye({},Wh)}try{return new RegExp(e,t)}catch{return null}}function W4(){var e,t,n,r,i;for(e=K[U],qf(e==="/","Regular expression literal must start with a slash"),t=K[U++],n=!1,r=!1;U<vt;)if(e=K[U++],t+=e,e==="\\")e=K[U++],Es(e.charCodeAt(0))&&ye({},Zh),t+=e;else if(Es(e.charCodeAt(0)))ye({},Zh);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||ye({},Zh),i=t.substr(1,t.length-2),{value:i,literal:t}}function Z4(){var e,t,n;for(t="",n="";U<vt&&(e=K[U],!!Wf(e.charCodeAt(0)));)++U,e==="\\"&&U<vt?ye({},ut,bt):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ye({},Wh,n),{value:n,literal:t}}function Y4(){var e,t,n,r;return Te=null,$1(),e=U,t=W4(),n=Z4(),r=q4(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:U}}function Q4(e){return e.type===Ri||e.type===Pr||e.type===jf||e.type===$f}function Z1(){if($1(),U>=vt)return{type:ws,start:U,end:U};const e=K.charCodeAt(U);return _s(e)?H4():e===40||e===41||e===59?Xh():e===39||e===34?$4():e===46?rr(K.charCodeAt(U+1))?W1():Xh():rr(e)?W1():Xh()}function Nt(){const e=Te;return U=e.end,Te=Z1(),U=e.end,e}function Y1(){const e=U;Te=Z1(),U=e}function X4(e){const t=new wn(x4);return t.elements=e,t}function Q1(e,t,n){const r=new wn(e==="||"||e==="&&"?S4:v4);return r.operator=e,r.left=t,r.right=n,r}function K4(e,t){const n=new wn(A4);return n.callee=e,n.arguments=t,n}function J4(e,t,n){const r=new wn(E4);return r.test=e,r.consequent=t,r.alternate=n,r}function Kh(e){const t=new wn(V1);return t.name=e,t}function Ss(e){const t=new wn(_4);return t.value=e.value,t.raw=K.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function X1(e,t,n){const r=new wn(C4);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function ek(e){const t=new wn(k4);return t.properties=e,t}function K1(e,t,n){const r=new wn(T4);return r.key=t,r.value=n,r.kind=e,r}function tk(e,t){const n=new wn(I4);return n.operator=e,n.argument=t,n.prefix=!0,n}function ye(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,a)=>(qf(a<r.length,"Message reference must be in range"),r[a]));throw n=new Error(i),n.index=U,n.description=i,n}function Zf(e){e.type===ws&&ye(e,M4),e.type===Mi&&ye(e,B4),e.type===xs&&ye(e,D4),e.type===Ri&&ye(e,F4),e.type===Pr&&ye(e,R4),ye(e,ut,e.value)}function At(e){const t=Nt();(t.type!==Lt||t.value!==e)&&Zf(t)}function Ue(e){return Te.type===Lt&&Te.value===e}function Jh(e){return Te.type===Pr&&Te.value===e}function nk(){const e=[];for(U=Te.start,At("[");!Ue("]");)Ue(",")?(Nt(),e.push(null)):(e.push(Pi()),Ue("]")||At(","));return Nt(),X4(e)}function J1(){U=Te.start;const e=Nt();return e.type===xs||e.type===Mi?(e.octal&&ye(e,j1),Ss(e)):Kh(e.value)}function rk(){var e,t,n,r;if(U=Te.start,e=Te,e.type===Ri)return n=J1(),At(":"),r=Pi(),K1("init",n,r);if(e.type===ws||e.type===Lt)Zf(e);else return t=J1(),At(":"),r=Pi(),K1("init",t,r)}function ik(){var e=[],t,n,r,i={},o=String;for(U=Te.start,At("{");!Ue("}");)t=rk(),t.key.type===V1?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?ye({},P4):i[r]=!0,e.push(t),Ue("}")||At(",");return At("}"),ek(e)}function ok(){At("(");const e=ed();return At(")"),e}const ak={if:1};function sk(){var e,t,n;if(Ue("("))return ok();if(Ue("["))return nk();if(Ue("{"))return ik();if(e=Te.type,U=Te.start,e===Ri||ak[Te.value])n=Kh(Nt().value);else if(e===xs||e===Mi)Te.octal&&ye(Te,j1),n=Ss(Nt());else{if(e===Pr)throw new Error(vs);e===jf?(t=Nt(),t.value=t.value==="true",n=Ss(t)):e===$f?(t=Nt(),t.value=null,n=Ss(t)):Ue("/")||Ue("/=")?(n=Ss(Y4()),Y1()):Zf(Nt())}return n}function lk(){const e=[];if(At("("),!Ue(")"))for(;U<vt&&(e.push(Pi()),!Ue(")"));)At(",");return At(")"),e}function fk(){U=Te.start;const e=Nt();return Q4(e)||Zf(e),Kh(e.value)}function uk(){return At("."),fk()}function ck(){At("[");const e=ed();return At("]"),e}function hk(){var e,t,n;for(e=sk();;)if(Ue("."))n=uk(),e=X1(".",e,n);else if(Ue("("))t=lk(),e=K4(e,t);else if(Ue("["))n=ck(),e=X1("[",e,n);else break;return e}function eb(){const e=hk();if(Te.type===Lt&&(Ue("++")||Ue("--")))throw new Error(vs);return e}function Yf(){var e,t;if(Te.type!==Lt&&Te.type!==Pr)t=eb();else{if(Ue("++")||Ue("--"))throw new Error(vs);if(Ue("+")||Ue("-")||Ue("~")||Ue("!"))e=Nt(),t=Yf(),t=tk(e.value,t);else{if(Jh("delete")||Jh("void")||Jh("typeof"))throw new Error(vs);t=eb()}}return t}function tb(e){let t=0;if(e.type!==Lt&&e.type!==Pr)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function dk(){var e,t,n,r,i,o,a,s,f,l;if(e=Te,f=Yf(),r=Te,i=tb(r),i===0)return f;for(r.prec=i,Nt(),t=[e,Te],a=Yf(),o=[f,r,a];(i=tb(Te))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,f=o.pop(),t.pop(),n=Q1(s,f,a),o.push(n);r=Nt(),r.prec=i,o.push(r),t.push(Te),n=Yf(),o.push(n)}for(l=o.length-1,n=o[l],t.pop();l>1;)t.pop(),n=Q1(o[l-1].value,o[l-2],n),l-=2;return n}function Pi(){var e,t,n;return e=dk(),Ue("?")&&(Nt(),t=Pi(),At(":"),n=Pi(),e=J4(e,t,n)),e}function ed(){const e=Pi();if(Ue(","))throw new Error(vs);return e}function pk(e){K=e,U=0,vt=K.length,Te=null,Y1();const t=ed();if(Te.type!==ws)throw new Error("Unexpect token after expression.");return t}var gk={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function nb(e){function t(a,s,f,l){let u=e(s[0]);return f&&(u=f+"("+u+")",f.lastIndexOf("new ",0)===0&&(u="("+u+")")),u+"."+a+(l<0?"":l===0?"()":"("+s.slice(1).map(e).join(",")+")")}function n(a,s,f){return l=>t(a,l,s,f)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&Qe("Missing arguments to clamp function."),a.length>3&&Qe("Too many arguments to clamp function.");const s=a.map(e);return"Math.max("+s[1]+", Math.min("+s[2]+","+s[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(a){a.length<3&&Qe("Missing arguments to if function."),a.length>3&&Qe("Too many arguments to if function.");const s=a.map(e);return"("+s[0]+"?"+s[1]+":"+s[2]+")"}}}function mk(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function bk(e){e=e||{};const t=e.allowed?Tf(e.allowed):{},n=e.forbidden?Tf(e.forbidden):{},r=e.constants||gk,i=(e.functions||nb)(c),o=e.globalvar,a=e.fieldvar,s=Mt(o)?o:p=>`${o}["${p}"]`;let f={},l={},u=0;function c(p){if(Pe(p))return p;const m=h[p.type];return m==null&&Qe("Unsupported type: "+p.type),m(p)}const h={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return u>0?m:Ei(n,m)?Qe("Illegal identifier: "+m):Ei(r,m)?r[m]:Ei(t,m)?m:(f[m]=1,s(m))},MemberExpression:p=>{const m=!p.computed,y=c(p.object);m&&(u+=1);const w=c(p.property);return y===a&&(l[mk(w)]=1),m&&(u-=1),y+(m?"."+w:"["+w+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Qe("Illegal callee type: "+p.callee.type);const m=p.callee.name,y=p.arguments,w=Ei(i,m)&&i[m];return w||Qe("Unrecognized function: "+m),Mt(w)?w(y):w+"("+y.map(c).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(c).join(",")+"]",BinaryExpression:p=>"("+c(p.left)+" "+p.operator+" "+c(p.right)+")",UnaryExpression:p=>"("+p.operator+c(p.argument)+")",ConditionalExpression:p=>"("+c(p.test)+"?"+c(p.consequent)+":"+c(p.alternate)+")",LogicalExpression:p=>"("+c(p.left)+p.operator+c(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(c).join(",")+"}",Property:p=>{u+=1;const m=c(p.key);return u-=1,m+":"+c(p.value)}};function d(p){const m={code:c(p),globals:Object.keys(f),fields:Object.keys(l)};return f={},l={},m}return d.functions=i,d.constants=r,d}function rb(e,t,n){return n=(n-e)/(t-e),n=Math.max(0,Math.min(1,n)),n*n*(3-2*n)}function Cs(e,t=0,n=1){return Math.max(t,Math.min(n,e))}function yk(e,t,n){return Cs((n-e)/(t-e),0,1)}const ib={clamp:Cs,isArray:Ct,isBoolean:$a,isDefined(e){return e!==void 0},isNumber:kt,isObject:Rt,isRegExp:A3,isString:Pe,isValid(e){return e!=null&&e===e},lerp:Sm,linearstep:yk,smoothstep:rb};function wk(e){const t=nb(e);for(const n in ib)t[n]=`this.${n}`;return t}const xk=bk({forbidden:[],allowed:["datum"],globalvar:"globalObject",fieldvar:"datum",functions:wk});function Qf(e,t={}){try{const n=pk(e),r=xk(n),i=Function("datum","globalObject",`"use strict"; return (${r.code});`).bind(ib),o=a=>i(a,t);return o.fields=r.fields,o.globals=r.globals,o.code=r.code,o}catch(n){throw new Error(`Invalid expression: ${e}, ${n.message}`)}}function Pn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Or(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const td=Symbol("implicit");function nd(){var e=new Tr,t=[],n=[],r=td;function i(o){let a=e.get(o);if(a===void 0){if(r!==td)return r;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Tr;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return nd(t,n).unknown(r)},Pn.apply(i,arguments),i}function Do(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ks(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Lr(){}var Oi=.7,Fo=1/Oi,Ro="\\s*([+-]?\\d+)\\s*",Ts="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",On="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vk=/^#([0-9a-f]{3,8})$/,Ak=new RegExp(`^rgb\\(${Ro},${Ro},${Ro}\\)$`),Ek=new RegExp(`^rgb\\(${On},${On},${On}\\)$`),_k=new RegExp(`^rgba\\(${Ro},${Ro},${Ro},${Ts}\\)$`),Sk=new RegExp(`^rgba\\(${On},${On},${On},${Ts}\\)$`),Ck=new RegExp(`^hsl\\(${Ts},${On},${On}\\)$`),kk=new RegExp(`^hsla\\(${Ts},${On},${On},${Ts}\\)$`),ob={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Do(Lr,Nr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ab,formatHex:ab,formatHex8:Tk,formatHsl:Ik,formatRgb:sb,toString:sb});function ab(){return this.rgb().formatHex()}function Tk(){return this.rgb().formatHex8()}function Ik(){return hb(this).formatHsl()}function sb(){return this.rgb().formatRgb()}function Nr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=vk.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?lb(t):n===3?new ct(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Xf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Xf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ak.exec(e))?new ct(t[1],t[2],t[3],1):(t=Ek.exec(e))?new ct(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_k.exec(e))?Xf(t[1],t[2],t[3],t[4]):(t=Sk.exec(e))?Xf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ck.exec(e))?cb(t[1],t[2]/100,t[3]/100,1):(t=kk.exec(e))?cb(t[1],t[2]/100,t[3]/100,t[4]):ob.hasOwnProperty(e)?lb(ob[e]):e==="transparent"?new ct(NaN,NaN,NaN,0):null}function lb(e){return new ct(e>>16&255,e>>8&255,e&255,1)}function Xf(e,t,n,r){return r<=0&&(e=t=n=NaN),new ct(e,t,n,r)}function rd(e){return e instanceof Lr||(e=Nr(e)),e?(e=e.rgb(),new ct(e.r,e.g,e.b,e.opacity)):new ct}function Kf(e,t,n,r){return arguments.length===1?rd(e):new ct(e,t,n,r??1)}function ct(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Do(ct,Kf,ks(Lr,{brighter(e){return e=e==null?Fo:Math.pow(Fo,e),new ct(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Oi:Math.pow(Oi,e),new ct(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ct(Li(this.r),Li(this.g),Li(this.b),Jf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fb,formatHex:fb,formatHex8:Bk,formatRgb:ub,toString:ub}));function fb(){return`#${Ni(this.r)}${Ni(this.g)}${Ni(this.b)}`}function Bk(){return`#${Ni(this.r)}${Ni(this.g)}${Ni(this.b)}${Ni((isNaN(this.opacity)?1:this.opacity)*255)}`}function ub(){const e=Jf(this.opacity);return`${e===1?"rgb(":"rgba("}${Li(this.r)}, ${Li(this.g)}, ${Li(this.b)}${e===1?")":`, ${e})`}`}function Jf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Li(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ni(e){return e=Li(e),(e<16?"0":"")+e.toString(16)}function cb(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new xn(e,t,n,r)}function hb(e){if(e instanceof xn)return new xn(e.h,e.s,e.l,e.opacity);if(e instanceof Lr||(e=Nr(e)),!e)return new xn;if(e instanceof xn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,f=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=f<.5?o+i:2-o-i,a*=60):s=f>0&&f<1?0:a,new xn(a,s,f,e.opacity)}function id(e,t,n,r){return arguments.length===1?hb(e):new xn(e,t,n,r??1)}function xn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Do(xn,id,ks(Lr,{brighter(e){return e=e==null?Fo:Math.pow(Fo,e),new xn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Oi:Math.pow(Oi,e),new xn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ct(od(e>=240?e-240:e+120,i,r),od(e,i,r),od(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new xn(db(this.h),eu(this.s),eu(this.l),Jf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Jf(this.opacity);return`${e===1?"hsl(":"hsla("}${db(this.h)}, ${eu(this.s)*100}%, ${eu(this.l)*100}%${e===1?")":`, ${e})`}`}}));function db(e){return e=(e||0)%360,e<0?e+360:e}function eu(e){return Math.max(0,Math.min(1,e||0))}function od(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const pb=Math.PI/180,gb=180/Math.PI,tu=18,mb=.96422,bb=1,yb=.82521,wb=4/29,Mo=6/29,xb=3*Mo*Mo,Dk=Mo*Mo*Mo;function vb(e){if(e instanceof Ln)return new Ln(e.l,e.a,e.b,e.opacity);if(e instanceof ir)return Ab(e);e instanceof ct||(e=rd(e));var t=ud(e.r),n=ud(e.g),r=ud(e.b),i=sd((.2225045*t+.7168786*n+.0606169*r)/bb),o,a;return t===n&&n===r?o=a=i:(o=sd((.4360747*t+.3850649*n+.1430804*r)/mb),a=sd((.0139322*t+.0971045*n+.7141733*r)/yb)),new Ln(116*i-16,500*(o-i),200*(i-a),e.opacity)}function ad(e,t,n,r){return arguments.length===1?vb(e):new Ln(e,t,n,r??1)}function Ln(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Do(Ln,ad,ks(Lr,{brighter(e){return new Ln(this.l+tu*(e??1),this.a,this.b,this.opacity)},darker(e){return new Ln(this.l-tu*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=mb*ld(t),e=bb*ld(e),n=yb*ld(n),new ct(fd(3.1338561*t-1.6168667*e-.4906146*n),fd(-.9787684*t+1.9161415*e+.033454*n),fd(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function sd(e){return e>Dk?Math.pow(e,1/3):e/xb+wb}function ld(e){return e>Mo?e*e*e:xb*(e-wb)}function fd(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function ud(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Fk(e){if(e instanceof ir)return new ir(e.h,e.c,e.l,e.opacity);if(e instanceof Ln||(e=vb(e)),e.a===0&&e.b===0)return new ir(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*gb;return new ir(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function cd(e,t,n,r){return arguments.length===1?Fk(e):new ir(e,t,n,r??1)}function ir(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Ab(e){if(isNaN(e.h))return new Ln(e.l,0,0,e.opacity);var t=e.h*pb;return new Ln(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Do(ir,cd,ks(Lr,{brighter(e){return new ir(this.h,this.c,this.l+tu*(e??1),this.opacity)},darker(e){return new ir(this.h,this.c,this.l-tu*(e??1),this.opacity)},rgb(){return Ab(this).rgb()}}));var Eb=-.14861,hd=1.78277,dd=-.29227,nu=-.90649,Is=1.97294,_b=Is*nu,Sb=Is*hd,Cb=hd*dd-nu*Eb;function Rk(e){if(e instanceof zi)return new zi(e.h,e.s,e.l,e.opacity);e instanceof ct||(e=rd(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Cb*r+_b*t-Sb*n)/(Cb+_b-Sb),o=r-i,a=(Is*(n-i)-dd*o)/nu,s=Math.sqrt(a*a+o*o)/(Is*i*(1-i)),f=s?Math.atan2(a,o)*gb-120:NaN;return new zi(f<0?f+360:f,s,i,e.opacity)}function pd(e,t,n,r){return arguments.length===1?Rk(e):new zi(e,t,n,r??1)}function zi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Do(zi,pd,ks(Lr,{brighter(e){return e=e==null?Fo:Math.pow(Fo,e),new zi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Oi:Math.pow(Oi,e),new zi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*pb,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new ct(255*(t+n*(Eb*r+hd*i)),255*(t+n*(dd*r+nu*i)),255*(t+n*(Is*r)),this.opacity)}}));function kb(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function Tb(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return kb((n-r/t)*t,a,i,o,s)}}function Ib(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return kb((n-r/t)*t,i,o,a,s)}}const ru=e=>()=>e;function Bb(e,t){return function(n){return e+n*t}}function Mk(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function iu(e,t){var n=t-e;return n?Bb(e,n>180||n<-180?n-360*Math.round(n/360):n):ru(isNaN(e)?t:e)}function Pk(e){return(e=+e)==1?ht:function(t,n){return n-t?Mk(t,n,e):ru(isNaN(t)?n:t)}}function ht(e,t){var n=t-e;return n?Bb(e,n):ru(isNaN(e)?t:e)}const gd=function e(t){var n=Pk(t);function r(i,o){var a=n((i=Kf(i)).r,(o=Kf(o)).r),s=n(i.g,o.g),f=n(i.b,o.b),l=ht(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=f(u),i.opacity=l(u),i+""}}return r.gamma=e,r}(1);function Db(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),a,s;for(a=0;a<n;++a)s=Kf(t[a]),r[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return r=e(r),i=e(i),o=e(o),s.opacity=1,function(f){return s.r=r(f),s.g=i(f),s.b=o(f),s+""}}}var Ok=Db(Tb),Lk=Db(Ib);function md(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function Fb(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Nk(e,t){return(Fb(t)?md:Rb)(e,t)}function Rb(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=zr(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function Mb(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function vn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Pb(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=zr(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var bd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yd=new RegExp(bd.source,"g");function zk(e){return function(){return e}}function Uk(e){return function(t){return e(t)+""}}function Ob(e,t){var n=bd.lastIndex=yd.lastIndex=0,r,i,o,a=-1,s=[],f=[];for(e=e+"",t=t+"";(r=bd.exec(e))&&(i=yd.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,f.push({i:a,x:vn(r,i)})),n=yd.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?f[0]?Uk(f[0].x):zk(t):(t=f.length,function(l){for(var u=0,c;u<t;++u)s[(c=f[u]).i]=c.x(l);return s.join("")})}function zr(e,t){var n=typeof t,r;return t==null||n==="boolean"?ru(t):(n==="number"?vn:n==="string"?(r=Nr(t))?(t=r,gd):Ob:t instanceof Nr?gd:t instanceof Date?Mb:Fb(t)?md:Array.isArray(t)?Rb:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Pb:vn)(e,t)}function Gk(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Hk(e,t){var n=iu(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Bs(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Lb=180/Math.PI,wd={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Nb(e,t,n,r,i,o){var a,s,f;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(f=e*n+t*r)&&(n-=e*f,r-=t*f),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,f/=s),e*r<t*n&&(e=-e,t=-t,f=-f,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Lb,skewX:Math.atan(f)*Lb,scaleX:a,scaleY:s}}var ou;function Vk(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?wd:Nb(t.a,t.b,t.c,t.d,t.e,t.f)}function jk(e){return e==null||(ou||(ou=document.createElementNS("http://www.w3.org/2000/svg","g")),ou.setAttribute("transform",e),!(e=ou.transform.baseVal.consolidate()))?wd:(e=e.matrix,Nb(e.a,e.b,e.c,e.d,e.e,e.f))}function zb(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,c,h,d,p){if(l!==c||u!==h){var m=d.push("translate(",null,t,null,n);p.push({i:m-4,x:vn(l,c)},{i:m-2,x:vn(u,h)})}else(c||h)&&d.push("translate("+c+t+h+n)}function a(l,u,c,h){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),h.push({i:c.push(i(c)+"rotate(",null,r)-2,x:vn(l,u)})):u&&c.push(i(c)+"rotate("+u+r)}function s(l,u,c,h){l!==u?h.push({i:c.push(i(c)+"skewX(",null,r)-2,x:vn(l,u)}):u&&c.push(i(c)+"skewX("+u+r)}function f(l,u,c,h,d,p){if(l!==c||u!==h){var m=d.push(i(d)+"scale(",null,",",null,")");p.push({i:m-4,x:vn(l,c)},{i:m-2,x:vn(u,h)})}else(c!==1||h!==1)&&d.push(i(d)+"scale("+c+","+h+")")}return function(l,u){var c=[],h=[];return l=e(l),u=e(u),o(l.translateX,l.translateY,u.translateX,u.translateY,c,h),a(l.rotate,u.rotate,c,h),s(l.skewX,u.skewX,c,h),f(l.scaleX,l.scaleY,u.scaleX,u.scaleY,c,h),l=u=null,function(d){for(var p=-1,m=h.length,y;++p<m;)c[(y=h[p]).i]=y.x(d);return c.join("")}}}var $k=zb(Vk,"px, ","px)","deg)"),qk=zb(jk,", ",")",")"),Wk=1e-12;function Ub(e){return((e=Math.exp(e))+1/e)/2}function Zk(e){return((e=Math.exp(e))-1/e)/2}function Yk(e){return((e=Math.exp(2*e))-1)/(e+1)}const Qk=function e(t,n,r){function i(o,a){var s=o[0],f=o[1],l=o[2],u=a[0],c=a[1],h=a[2],d=u-s,p=c-f,m=d*d+p*p,y,w;if(m<Wk)w=Math.log(h/l)/t,y=function(B){return[s+B*d,f+B*p,l*Math.exp(t*B*w)]};else{var A=Math.sqrt(m),S=(h*h-l*l+r*m)/(2*l*n*A),_=(h*h-l*l-r*m)/(2*h*n*A),T=Math.log(Math.sqrt(S*S+1)-S),I=Math.log(Math.sqrt(_*_+1)-_);w=(I-T)/t,y=function(B){var F=B*w,M=Ub(T),G=l/(n*A)*(M*Yk(t*F+T)-Zk(T));return[s+G*d,f+G*p,l*M/Ub(t*F+T)]}}return y.duration=w*1e3*t/Math.SQRT2,y}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,f=s*s;return e(a,s,f)},i}(Math.SQRT2,2,4);function Gb(e){return function(t,n){var r=e((t=id(t)).h,(n=id(n)).h),i=ht(t.s,n.s),o=ht(t.l,n.l),a=ht(t.opacity,n.opacity);return function(s){return t.h=r(s),t.s=i(s),t.l=o(s),t.opacity=a(s),t+""}}}const Xk=Gb(iu);var Kk=Gb(ht);function Jk(e,t){var n=ht((e=ad(e)).l,(t=ad(t)).l),r=ht(e.a,t.a),i=ht(e.b,t.b),o=ht(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=r(a),e.b=i(a),e.opacity=o(a),e+""}}function Hb(e){return function(t,n){var r=e((t=cd(t)).h,(n=cd(n)).h),i=ht(t.c,n.c),o=ht(t.l,n.l),a=ht(t.opacity,n.opacity);return function(s){return t.h=r(s),t.c=i(s),t.l=o(s),t.opacity=a(s),t+""}}}const eT=Hb(iu);var tT=Hb(ht);function Vb(e){return function t(n){n=+n;function r(i,o){var a=e((i=pd(i)).h,(o=pd(o)).h),s=ht(i.s,o.s),f=ht(i.l,o.l),l=ht(i.opacity,o.opacity);return function(u){return i.h=a(u),i.s=s(u),i.l=f(Math.pow(u,n)),i.opacity=l(u),i+""}}return r.gamma=t,r}(1)}const nT=Vb(iu);var rT=Vb(ht);function xd(e,t){t===void 0&&(t=e,e=zr);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function iT(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const oT=Object.freeze(Object.defineProperty({__proto__:null,interpolate:zr,interpolateArray:Nk,interpolateBasis:Tb,interpolateBasisClosed:Ib,interpolateCubehelix:nT,interpolateCubehelixLong:rT,interpolateDate:Mb,interpolateDiscrete:Gk,interpolateHcl:eT,interpolateHclLong:tT,interpolateHsl:Xk,interpolateHslLong:Kk,interpolateHue:Hk,interpolateLab:Jk,interpolateNumber:vn,interpolateNumberArray:md,interpolateObject:Pb,interpolateRgb:gd,interpolateRgbBasis:Ok,interpolateRgbBasisClosed:Lk,interpolateRound:Bs,interpolateString:Ob,interpolateTransformCss:$k,interpolateTransformSvg:qk,interpolateZoom:Qk,piecewise:xd,quantize:iT},Symbol.toStringTag,{value:"Module"}));function aT(e){return function(){return e}}function vd(e){return+e}var jb=[0,1];function zt(e){return e}function Ad(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:aT(isNaN(t)?NaN:.5)}function sT(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function lT(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=Ad(i,r),o=n(a,o)):(r=Ad(r,i),o=n(o,a)),function(s){return o(r(s))}}function fT(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Ad(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(s){var f=kr(e,s,1,r)-1;return o[f](i[f](s))}}function Ds(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function au(){var e=jb,t=jb,n=zr,r,i,o,a=zt,s,f,l;function u(){var h=Math.min(e.length,t.length);return a!==zt&&(a=sT(e[0],e[h-1])),s=h>2?fT:lT,f=l=null,c}function c(h){return h==null||isNaN(h=+h)?o:(f||(f=s(e.map(r),t,n)))(r(a(h)))}return c.invert=function(h){return a(i((l||(l=s(t,e.map(r),vn)))(h)))},c.domain=function(h){return arguments.length?(e=Array.from(h,vd),u()):e.slice()},c.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},c.rangeRound=function(h){return t=Array.from(h),n=Bs,u()},c.clamp=function(h){return arguments.length?(a=h?!0:zt,u()):a!==zt},c.interpolate=function(h){return arguments.length?(n=h,u()):n},c.unknown=function(h){return arguments.length?(o=h,c):o},function(h,d){return r=h,i=d,u()}}function $b(){return au()(zt,zt)}function qb(e,t,n,r){var i=Ir(e,t,n),o;switch(r=Br(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=$m(i,a))&&(r.precision=o),Ah(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=qm(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=jm(i))&&(r.precision=o-(r.type==="%")*2);break}}return mt(r)}function Ui(e){var t=e.domain;return e.ticks=function(n){var r=t();return Df(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return qb(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],s=r[o],f,l,u=10;for(s<a&&(l=a,a=s,s=l,l=i,i=o,o=l);u-- >0;){if(l=Om(a,s,n),l===f)return r[i]=a,r[o]=s,t(r);if(l>0)a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l;else if(l<0)a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l;else break;f=l}return e},e}function Wb(){var e=$b();return e.copy=function(){return Ds(e,Wb())},Pn.apply(e,arguments),Ui(e)}function Zb(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,vd),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Zb(e).unknown(t)},e=arguments.length?Array.from(e,vd):[0,1],Ui(n)}function Yb(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function Qb(e){return Math.log(e)}function Xb(e){return Math.exp(e)}function uT(e){return-Math.log(-e)}function cT(e){return-Math.exp(-e)}function hT(e){return isFinite(e)?+("1e"+e):e<0?0:e}function dT(e){return e===10?hT:e===Math.E?Math.exp:t=>Math.pow(e,t)}function pT(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Kb(e){return(t,n)=>-e(-t,n)}function Ed(e){const t=e(Qb,Xb),n=t.domain;let r=10,i,o;function a(){return i=pT(r),o=dT(r),n()[0]<0?(i=Kb(i),o=Kb(o),e(uT,cT)):e(Qb,Xb),t}return t.base=function(s){return arguments.length?(r=+s,a()):r},t.domain=function(s){return arguments.length?(n(s),a()):n()},t.ticks=s=>{const f=n();let l=f[0],u=f[f.length-1];const c=u<l;c&&([l,u]=[u,l]);let h=i(l),d=i(u),p,m;const y=s==null?10:+s;let w=[];if(!(r%1)&&d-h<y){if(h=Math.floor(h),d=Math.ceil(d),l>0){for(;h<=d;++h)for(p=1;p<r;++p)if(m=h<0?p/o(-h):p*o(h),!(m<l)){if(m>u)break;w.push(m)}}else for(;h<=d;++h)for(p=r-1;p>=1;--p)if(m=h>0?p/o(-h):p*o(h),!(m<l)){if(m>u)break;w.push(m)}w.length*2<y&&(w=Df(l,u,y))}else w=Df(h,d,Math.min(d-h,y)).map(o);return c?w.reverse():w},t.tickFormat=(s,f)=>{if(s==null&&(s=10),f==null&&(f=r===10?"s":","),typeof f!="function"&&(!(r%1)&&(f=Br(f)).precision==null&&(f.trim=!0),f=mt(f)),s===1/0)return f;const l=Math.max(1,r*s/t.ticks().length);return u=>{let c=u/o(Math.round(i(u)));return c*r<r-.5&&(c*=r),c<=l?f(u):""}},t.nice=()=>n(Yb(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),t}function _d(){const e=Ed(au()).domain([1,10]);return e.copy=()=>Ds(e,_d()).base(e.base()),Pn.apply(e,arguments),e}function Jb(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ey(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Sd(e){var t=1,n=e(Jb(t),ey(t));return n.constant=function(r){return arguments.length?e(Jb(t=+r),ey(t)):t},Ui(n)}function ty(){var e=Sd(au());return e.copy=function(){return Ds(e,ty()).constant(e.constant())},Pn.apply(e,arguments)}function ny(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function gT(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function mT(e){return e<0?-e*e:e*e}function Cd(e){var t=e(zt,zt),n=1;function r(){return n===1?e(zt,zt):n===.5?e(gT,mT):e(ny(n),ny(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Ui(t)}function kd(){var e=Cd(au());return e.copy=function(){return Ds(e,kd()).exponent(e.exponent())},Pn.apply(e,arguments),e}function bT(){return kd.apply(null,arguments).exponent(.5)}function ry(){var e=[],t=[],n=[],r;function i(){var a=0,s=Math.max(1,t.length);for(n=new Array(s-1);++a<s;)n[a-1]=Lm(e,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:t[kr(n,a)]}return o.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Wa),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return ry().domain(e).range(t).unknown(r)},Pn.apply(o,arguments)}function iy(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function a(f){return f!=null&&f<=f?i[kr(r,f,0,n)]:o}function s(){var f=-1;for(r=new Array(n);++f<n;)r[f]=((f+1)*t-(f-n)*e)/(n+1);return a}return a.domain=function(f){return arguments.length?([e,t]=f,e=+e,t=+t,s()):[e,t]},a.range=function(f){return arguments.length?(n=(i=Array.from(f)).length-1,s()):i.slice()},a.invertExtent=function(f){var l=i.indexOf(f);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},a.unknown=function(f){return arguments.length&&(o=f),a},a.thresholds=function(){return r.slice()},a.copy=function(){return iy().domain([e,t]).range(i).unknown(o)},Pn.apply(Ui(a),arguments)}function oy(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[kr(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return oy().domain(e).range(t).unknown(n)},Pn.apply(i,arguments)}function yT(e){return new Date(e)}function wT(e){return e instanceof Date?+e:+new Date(+e)}function Td(e,t,n,r,i,o,a,s,f,l){var u=$b(),c=u.invert,h=u.domain,d=l(".%L"),p=l(":%S"),m=l("%I:%M"),y=l("%I %p"),w=l("%a %d"),A=l("%b %d"),S=l("%B"),_=l("%Y");function T(I){return(f(I)<I?d:s(I)<I?p:a(I)<I?m:o(I)<I?y:r(I)<I?i(I)<I?w:A:n(I)<I?S:_)(I)}return u.invert=function(I){return new Date(c(I))},u.domain=function(I){return arguments.length?h(Array.from(I,wT)):h().map(yT)},u.ticks=function(I){var B=h();return e(B[0],B[B.length-1],I??10)},u.tickFormat=function(I,B){return B==null?T:l(B)},u.nice=function(I){var B=h();return(!I||typeof I.range!="function")&&(I=t(B[0],B[B.length-1],I??10)),I?h(Yb(B,I)):u},u.copy=function(){return Ds(u,Td(e,t,n,r,i,o,a,s,f,l))},u}function xT(){return Pn.apply(Td(cC,hC,Fr,Qa,Ya,Si,Ih,Th,Dr,Lh).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function vT(){return Pn.apply(Td(fC,uC,Rr,Ka,Xa,ki,Fh,Dh,Dr,Nh).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function su(){var e=0,t=1,n,r,i,o,a=zt,s=!1,f;function l(c){return c==null||isNaN(c=+c)?f:a(i===0?.5:(c=(o(c)-n)*i,s?Math.max(0,Math.min(1,c)):c))}l.domain=function(c){return arguments.length?([e,t]=c,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(c){return arguments.length?(s=!!c,l):s},l.interpolator=function(c){return arguments.length?(a=c,l):a};function u(c){return function(h){var d,p;return arguments.length?([d,p]=h,a=c(d,p),l):[a(0),a(1)]}}return l.range=u(zr),l.rangeRound=u(Bs),l.unknown=function(c){return arguments.length?(f=c,l):f},function(c){return o=c,n=c(e),r=c(t),i=n===r?0:1/(r-n),l}}function Ur(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Id(){var e=Ui(su()(zt));return e.copy=function(){return Ur(e,Id())},Or.apply(e,arguments)}function ay(){var e=Ed(su()).domain([1,10]);return e.copy=function(){return Ur(e,ay()).base(e.base())},Or.apply(e,arguments)}function sy(){var e=Sd(su());return e.copy=function(){return Ur(e,sy()).constant(e.constant())},Or.apply(e,arguments)}function Bd(){var e=Cd(su());return e.copy=function(){return Ur(e,Bd()).exponent(e.exponent())},Or.apply(e,arguments)}function AT(){return Bd.apply(null,arguments).exponent(.5)}function lu(){var e=0,t=.5,n=1,r=1,i,o,a,s,f,l=zt,u,c=!1,h;function d(m){return isNaN(m=+m)?h:(m=.5+((m=+u(m))-o)*(r*m<r*o?s:f),l(c?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([e,t,n]=m,i=u(e=+e),o=u(t=+t),a=u(n=+n),s=i===o?0:.5/(o-i),f=o===a?0:.5/(a-o),r=o<i?-1:1,d):[e,t,n]},d.clamp=function(m){return arguments.length?(c=!!m,d):c},d.interpolator=function(m){return arguments.length?(l=m,d):l};function p(m){return function(y){var w,A,S;return arguments.length?([w,A,S]=y,l=xd(m,[w,A,S]),d):[l(0),l(.5),l(1)]}}return d.range=p(zr),d.rangeRound=p(Bs),d.unknown=function(m){return arguments.length?(h=m,d):h},function(m){return u=m,i=m(e),o=m(t),a=m(n),s=i===o?0:.5/(o-i),f=o===a?0:.5/(a-o),r=o<i?-1:1,d}}function ly(){var e=Ui(lu()(zt));return e.copy=function(){return Ur(e,ly())},Or.apply(e,arguments)}function fy(){var e=Ed(lu()).domain([.1,1,10]);return e.copy=function(){return Ur(e,fy()).base(e.base())},Or.apply(e,arguments)}function uy(){var e=Sd(lu());return e.copy=function(){return Ur(e,uy()).constant(e.constant())},Or.apply(e,arguments)}function Dd(){var e=Cd(lu());return e.copy=function(){return Ur(e,Dd()).exponent(e.exponent())},Or.apply(e,arguments)}function ET(){return Dd.apply(null,arguments).exponent(.5)}function Fd(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const _T="identity",Po="linear",Gr="log",Fs="pow",Rs="sqrt",fu="symlog",cy="time",hy="utc",Nn="sequential",Oo="diverging",Rd="quantile",dy="quantize",py="threshold",Md="ordinal",Pd="point",gy="band",Od="bin-ordinal",ot="continuous",Ms="discrete",Ps="discretizing",tn="interpolating",my="temporal";function ST(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function CT(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,a,s,f,l;for(i<r&&(s=r,r=i,i=s),f=0,l=n.length;f<l;++f)n[f]>=r&&n[f]<=i&&(o<0&&(o=f),a=f);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function Ld(){const e=nd().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,a=!1,s=0,f=0,l=.5;delete e.unknown;function u(){const c=t().length,h=r[1]<r[0],d=r[1-h],p=Fd(c,s,f);let m=r[h-0];i=(d-m)/(p||1),a&&(i=Math.floor(i)),m+=(d-m-i*(c-s))*l,o=i*(1-s),a&&(m=Math.round(m),o=Math.round(o));const y=Za(c).map(w=>m+i*w);return n(h?y.reverse():y)}return e.domain=function(c){return arguments.length?(t(c),u()):t()},e.range=function(c){return arguments.length?(r=[+c[0],+c[1]],u()):r.slice()},e.rangeRound=function(c){return r=[+c[0],+c[1]],a=!0,u()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(c){return arguments.length?(a=!!c,u()):a},e.padding=function(c){return arguments.length?(f=Math.max(0,Math.min(1,c)),s=f,u()):s},e.paddingInner=function(c){return arguments.length?(s=Math.max(0,Math.min(1,c)),u()):s},e.paddingOuter=function(c){return arguments.length?(f=Math.max(0,Math.min(1,c)),u()):f},e.align=function(c){return arguments.length?(l=Math.max(0,Math.min(1,c)),u()):l},e.invertRange=function(c){if(c[0]==null||c[1]==null)return;const h=r[1]<r[0],d=h?n().reverse():n(),p=d.length-1;let m=+c[0],y=+c[1],w,A,S;if(!(m!==m||y!==y)&&(y<m&&(S=m,m=y,y=S),!(y<d[0]||m>r[1-h])))return w=Math.max(0,kr(d,m)-1),A=m===y?w:kr(d,y)-1,m-d[w]>o+1e-10&&++w,h&&(S=w,w=p-A,A=p-S),w>A?void 0:t().slice(w,A+1)},e.invert=function(c){const h=e.invertRange([c,c]);return h&&h[0]},e.copy=function(){return Ld().domain(t()).range(r).round(a).paddingInner(s).paddingOuter(f).align(l)},u()}function by(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return by(t())},e}function kT(){return by(Ld().paddingInner(1))}var TT=Array.prototype.map;function IT(e){return TT.call(e,ja)}const BT=Array.prototype.slice;function yy(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(kr(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=IT(r),n):e.slice()},n.range=function(r){return arguments.length?(t=BT.call(r),n):t.slice()},n.tickFormat=function(r,i){return qb(e[0],yn(e),r??10,i)},n.copy=function(){return yy().domain(n.domain()).range(n.range())},n}const uu={};function DT(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?ST(o):o.invertExtent?CT(o):void 0),o.type=e,o};return r.metadata=Tf(hh(n)),r}function Ee(e,t,n){return arguments.length>1?(uu[e]=DT(e,t,n),this):FT(e)?uu[e]:void 0}Ee(_T,Zb),Ee(Po,Wb,ot),Ee(Gr,_d,[ot,Gr]),Ee(Fs,kd,ot),Ee(Rs,bT,ot),Ee(fu,ty,ot),Ee(cy,xT,[ot,my]),Ee(hy,vT,[ot,my]),Ee(Nn,Id,[ot,tn]),Ee("".concat(Nn,"-").concat(Po),Id,[ot,tn]),Ee("".concat(Nn,"-").concat(Gr),ay,[ot,tn,Gr]),Ee("".concat(Nn,"-").concat(Fs),Bd,[ot,tn]),Ee("".concat(Nn,"-").concat(Rs),AT,[ot,tn]),Ee("".concat(Nn,"-").concat(fu),sy,[ot,tn]),Ee("".concat(Oo,"-").concat(Po),ly,[ot,tn]),Ee("".concat(Oo,"-").concat(Gr),fy,[ot,tn,Gr]),Ee("".concat(Oo,"-").concat(Fs),Dd,[ot,tn]),Ee("".concat(Oo,"-").concat(Rs),ET,[ot,tn]),Ee("".concat(Oo,"-").concat(fu),uy,[ot,tn]),Ee(Rd,ry,[Ps,Rd]),Ee(dy,iy,Ps),Ee(py,oy,Ps),Ee(Od,yy,[Ms,Ps]),Ee(Md,nd,Ms),Ee(gy,Ld,Ms),Ee(Pd,kT,Ms);function FT(e){return Ei(uu,e)}function Os(e,t){const n=uu[e];return n&&n.metadata[t]}function yt(e){return Os(e,ot)}function zn(e){return Os(e,Ms)}function Gi(e){return Os(e,Ps)}function wy(e){return Os(e,Gr)}function cu(e){return Os(e,tn)}function RT(e,t){const n=t[0],r=yn(t)-n;return function(i){return e(n+i*r)}}function hu(e,t,n){return xd(xy(t||"rgb",n),e)}function MT(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function xy(e,t){const n=oT[PT(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function PT(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const OT={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},LT={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function vy(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function Ay(e,t){for(const n in e)Nd(n,t(e[n]))}const Ey={};Ay(LT,vy),Ay(OT,e=>hu(vy(e)));function Nd(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Ey[e]=t,this):Ey[e]}function NT(){let e=0,t,n=0;const r=new Map,i=o=>(o===t||(n=r.get(o),n===void 0&&(n=e++,r.set(o,n)),t=o),n);return i.addAll=o=>{for(const a of o)i(a)},i.invert=o=>{for(const a of r.entries())if(a[1]==o)return a[0]},i.domain=()=>[...r.keys()],i}function du(){const e=t=>t;return e.invert=t=>t,e.copy=du,e.invertRange=()=>{},e.type="null",e}/* @license twgl.js 4.22.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */const zd=5120,Ls=5121,Ud=5122,Gd=5123,Hd=5124,Vd=5125,jd=5126,zT=32819,UT=32820,GT=33635,HT=5131,VT=33640,jT=35899,$T=35902,qT=36269,WT=34042,_y={};{const e=_y;e[zd]=Int8Array,e[Ls]=Uint8Array,e[Ud]=Int16Array,e[Gd]=Uint16Array,e[Hd]=Int32Array,e[Vd]=Uint32Array,e[jd]=Float32Array,e[zT]=Uint16Array,e[UT]=Uint16Array,e[GT]=Uint16Array,e[HT]=Uint16Array,e[VT]=Uint32Array,e[jT]=Uint32Array,e[$T]=Uint32Array,e[qT]=Uint32Array,e[WT]=Uint32Array}function $d(e){if(e instanceof Int8Array)return zd;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return Ls;if(e instanceof Int16Array)return Ud;if(e instanceof Uint16Array)return Gd;if(e instanceof Int32Array)return Hd;if(e instanceof Uint32Array)return Vd;if(e instanceof Float32Array)return jd;throw new Error("unsupported typed array type")}function ZT(e){if(e===Int8Array)return zd;if(e===Uint8Array||e===Uint8ClampedArray)return Ls;if(e===Int16Array)return Ud;if(e===Uint16Array)return Gd;if(e===Int32Array)return Hd;if(e===Uint32Array)return Vd;if(e===Float32Array)return jd;throw new Error("unsupported typed array type")}function YT(e){const t=_y[e];if(!t)throw new Error("unknown gl type");return t}const pu=typeof SharedArrayBuffer<"u"?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function QT(...e){console.error(...e)}function Sy(...e){console.warn(...e)}function XT(e,t){return typeof WebGLBuffer<"u"&&t instanceof WebGLBuffer}function Cy(e,t){return typeof WebGLRenderbuffer<"u"&&t instanceof WebGLRenderbuffer}function gu(e,t){return typeof WebGLTexture<"u"&&t instanceof WebGLTexture}function KT(e,t){return typeof WebGLSampler<"u"&&t instanceof WebGLSampler}const ky=35044,Un=34962,JT=34963,e6=34660,t6=5120,n6=5121,r6=5122,i6=5123,o6=5124,a6=5125,s6=5126,Ty={attribPrefix:""};function Iy(e,t,n,r,i){e.bindBuffer(t,n),e.bufferData(t,r,i||ky)}function By(e,t,n,r){if(XT(e,t))return t;n=n||Un;const i=e.createBuffer();return Iy(e,n,i,t,r),i}function Dy(e){return e==="indices"}function l6(e){return e instanceof Int8Array||e instanceof Uint8Array}function f6(e){return e===Int8Array||e===Uint8Array}function u6(e){return e.length?e:e.data}const c6=/coord|texture/i,h6=/color|colour/i;function Fy(e,t){let n;if(c6.test(e)?n=2:h6.test(e)?n=4:n=3,t%n>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${n} but ${t} values is not evenly divisible by ${n}. You should specify it.`);return n}function d6(e,t){return e.numComponents||e.size||Fy(t,u6(e).length)}function qd(e,t){if(pu(e))return e;if(pu(e.data))return e.data;Array.isArray(e)&&(e={data:e});let n=e.type;return n||(Dy(t)?n=Uint16Array:n=Float32Array),new n(e.data)}function p6(e,t){const n={};return Object.keys(t).forEach(function(r){if(!Dy(r)){const i=t[r],o=i.attrib||i.name||i.attribName||Ty.attribPrefix+r;if(i.value){if(!Array.isArray(i.value)&&!pu(i.value))throw new Error("array.value is not array or typedarray");n[o]={value:i.value}}else{let a,s,f,l;if(i.buffer&&i.buffer instanceof WebGLBuffer)a=i.buffer,l=i.numComponents||i.size,s=i.type,f=i.normalize;else if(typeof i=="number"||typeof i.data=="number"){const u=i.data||i,c=i.type||Float32Array,h=u*c.BYTES_PER_ELEMENT;s=ZT(c),f=i.normalize!==void 0?i.normalize:f6(c),l=i.numComponents||i.size||Fy(r,u),a=e.createBuffer(),e.bindBuffer(Un,a),e.bufferData(Un,h,i.drawType||ky)}else{const u=qd(i,r);a=By(e,u,void 0,i.drawType),s=$d(u),f=i.normalize!==void 0?i.normalize:l6(u),l=d6(i,r)}n[o]={buffer:a,numComponents:l,type:s,normalize:f,stride:i.stride||0,offset:i.offset||0,divisor:i.divisor===void 0?void 0:i.divisor,drawType:i.drawType}}}}),e.bindBuffer(Un,null),n}function g6(e,t,n,r){n=qd(n),r!==void 0?(e.bindBuffer(Un,t.buffer),e.bufferSubData(Un,r,n)):Iy(e,Un,t.buffer,n,t.drawType)}function m6(e,t){return t===t6||t===n6?1:t===r6||t===i6?2:t===o6||t===a6||t===s6?4:0}const Wd=["position","positions","a_position"];function b6(e,t){let n,r;for(r=0;r<Wd.length&&(n=Wd[r],!(n in t||(n=Ty.attribPrefix+n,n in t)));++r);r===Wd.length&&(n=Object.keys(t)[0]);const i=t[n];e.bindBuffer(Un,i.buffer);const o=e.getBufferParameter(Un,e6);e.bindBuffer(Un,null);const a=m6(e,i.type),s=o/a,f=i.numComponents||i.size,l=s/f;if(l%1!==0)throw new Error(`numComponents ${f} not correct for length ${length}`);return l}function y6(e,t,n){const r=p6(e,t),i=Object.assign({},n||{});i.attribs=Object.assign({},n?n.attribs:{},r);const o=t.indices;if(o){const a=qd(o,"indices");i.indices=By(e,a,JT),i.numElements=a.length,i.elementType=$d(a)}else i.numElements||(i.numElements=b6(e,i.attribs));return i}function Lo(e){return!!e.texStorage2D}const Zd=function(){const e={},t={};function n(r){const i=r.constructor.name;if(!e[i]){for(const o in r)if(typeof r[o]=="number"){const a=t[r[o]];t[r[o]]=a?`${a} | ${o}`:o}e[i]=!0}}return function(i,o){return n(i),t[o]||(typeof o=="number"?`0x${o.toString(16)}`:o)}}(),Hr={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},No=pu,Ry=function(){let e;return function(){return e=e||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}}(),My=6406,Gn=6407,Ve=6408,Py=6409,Oy=6410,Ns=6402,Ly=34041,mu=33071,w6=9728,x6=9729,or=3553,ar=34067,Vr=32879,jr=35866,bu=34069,v6=34070,A6=34071,E6=34072,_6=34073,S6=34074,Yd=10241,Qd=10240,yu=10242,wu=10243,Ny=32882,C6=33082,k6=33083,T6=33084,I6=33085,Xd=3317,zy=3314,Uy=32878,Gy=3316,Hy=3315,Vy=32877,B6=37443,D6=37441,F6=37440,R6=33321,M6=36756,P6=33325,O6=33326,L6=33330,N6=33329,z6=33338,U6=33337,G6=33340,H6=33339,V6=33323,j6=36757,$6=33327,q6=33328,W6=33336,Z6=33335,Y6=33332,Q6=33331,X6=33334,K6=33333,J6=32849,eI=35905,tI=36194,nI=36758,rI=35898,iI=35901,oI=34843,aI=34837,sI=36221,lI=36239,fI=36215,uI=36233,cI=36209,hI=36227,dI=32856,pI=35907,gI=36759,mI=32855,bI=32854,yI=32857,wI=34842,xI=34836,vI=36220,AI=36238,EI=36975,_I=36214,SI=36232,CI=36226,kI=36208,TI=33189,II=33190,BI=36012,DI=36013,FI=35056,$r=5120,je=5121,xu=5122,zo=5123,vu=5124,Hi=5125,Et=5126,jy=32819,$y=32820,qy=33635,An=5131,zs=36193,Kd=33640,RI=35899,MI=35902,PI=36269,OI=34042,Au=33319,Uo=33320,Eu=6403,Go=36244,Ho=36248,Vi=36249;let Jd;function _u(e){if(!Jd){const t={};t[My]={textureFormat:My,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[je,An,zs,Et]},t[Py]={textureFormat:Py,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[je,An,zs,Et]},t[Oy]={textureFormat:Oy,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[je,An,zs,Et]},t[Gn]={textureFormat:Gn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[je,An,zs,Et,qy]},t[Ve]={textureFormat:Ve,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[je,An,zs,Et,jy,$y]},t[Ns]={textureFormat:Ns,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Hi,zo]},t[R6]={textureFormat:Eu,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[je]},t[M6]={textureFormat:Eu,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[$r]},t[P6]={textureFormat:Eu,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[Et,An]},t[O6]={textureFormat:Eu,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[Et]},t[L6]={textureFormat:Go,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[je]},t[N6]={textureFormat:Go,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[$r]},t[Y6]={textureFormat:Go,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[zo]},t[Q6]={textureFormat:Go,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[xu]},t[X6]={textureFormat:Go,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Hi]},t[K6]={textureFormat:Go,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[vu]},t[V6]={textureFormat:Au,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[je]},t[j6]={textureFormat:Au,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[$r]},t[$6]={textureFormat:Au,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[Et,An]},t[q6]={textureFormat:Au,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[Et]},t[W6]={textureFormat:Uo,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[je]},t[Z6]={textureFormat:Uo,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[$r]},t[z6]={textureFormat:Uo,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[zo]},t[U6]={textureFormat:Uo,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[xu]},t[G6]={textureFormat:Uo,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Hi]},t[H6]={textureFormat:Uo,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[vu]},t[J6]={textureFormat:Gn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[je]},t[eI]={textureFormat:Gn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[je]},t[tI]={textureFormat:Gn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[je,qy]},t[nI]={textureFormat:Gn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[$r]},t[rI]={textureFormat:Gn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Et,An,RI]},t[iI]={textureFormat:Gn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Et,An,MI]},t[oI]={textureFormat:Gn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[Et,An]},t[aI]={textureFormat:Gn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Et]},t[sI]={textureFormat:Ho,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[je]},t[lI]={textureFormat:Ho,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[$r]},t[fI]={textureFormat:Ho,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[zo]},t[uI]={textureFormat:Ho,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[xu]},t[cI]={textureFormat:Ho,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Hi]},t[hI]={textureFormat:Ho,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[vu]},t[dI]={textureFormat:Ve,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[je]},t[pI]={textureFormat:Ve,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[je]},t[gI]={textureFormat:Ve,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[$r]},t[mI]={textureFormat:Ve,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[je,$y,Kd]},t[bI]={textureFormat:Ve,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[je,jy]},t[yI]={textureFormat:Ve,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Kd]},t[wI]={textureFormat:Ve,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[Et,An]},t[xI]={textureFormat:Ve,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[Et]},t[vI]={textureFormat:Vi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[je]},t[AI]={textureFormat:Vi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[$r]},t[EI]={textureFormat:Vi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Kd]},t[_I]={textureFormat:Vi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[zo]},t[SI]={textureFormat:Vi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[xu]},t[CI]={textureFormat:Vi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[vu]},t[kI]={textureFormat:Vi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Hi]},t[TI]={textureFormat:Ns,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[zo,Hi]},t[II]={textureFormat:Ns,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Hi]},t[BI]={textureFormat:Ns,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Et]},t[FI]={textureFormat:Ly,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[OI]},t[DI]={textureFormat:Ly,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[PI]},Object.keys(t).forEach(function(n){const r=t[n];r.bytesPerElementMap={},r.bytesPerElement.forEach(function(i,o){const a=r.type[o];r.bytesPerElementMap[a]=i})}),Jd=t}return Jd[e]}function LI(e,t){const n=_u(e);if(!n)throw"unknown internal format";const r=n.bytesPerElementMap[t];if(r===void 0)throw"unknown internal format";return r}function Vo(e){const t=_u(e);if(!t)throw"unknown internal format";return{format:t.textureFormat,type:t.type[0]}}function Wy(e){return(e&e-1)===0}function NI(e,t,n,r){if(!Lo(e))return Wy(t)&&Wy(n);const i=_u(r);if(!i)throw"unknown internal format";return i.colorRenderable&&i.textureFilterable}function zI(e){const t=_u(e);if(!t)throw"unknown internal format";return t.textureFilterable}function Zy(e,t,n){return No(t)?$d(t):n||je}function Su(e,t,n,r,i){if(i%1!==0)throw"can't guess dimensions";if(!n&&!r){const o=Math.sqrt(i/(t===ar?6:1));o%1===0?(n=o,r=o):(n=i,r=1)}else if(r){if(!n&&(n=i/r,n%1))throw"can't guess dimensions"}else if(r=i/n,r%1)throw"can't guess dimensions";return{width:n,height:r}}function jo(e,t){t.colorspaceConversion!==void 0&&e.pixelStorei(B6,t.colorspaceConversion),t.premultiplyAlpha!==void 0&&e.pixelStorei(D6,t.premultiplyAlpha),t.flipY!==void 0&&e.pixelStorei(F6,t.flipY)}function Yy(e){e.pixelStorei(Xd,4),Lo(e)&&(e.pixelStorei(zy,0),e.pixelStorei(Uy,0),e.pixelStorei(Gy,0),e.pixelStorei(Hy,0),e.pixelStorei(Vy,0))}function UI(e,t,n,r){r.minMag&&(n.call(e,t,Yd,r.minMag),n.call(e,t,Qd,r.minMag)),r.min&&n.call(e,t,Yd,r.min),r.mag&&n.call(e,t,Qd,r.mag),r.wrap&&(n.call(e,t,yu,r.wrap),n.call(e,t,wu,r.wrap),(t===Vr||KT(e,t))&&n.call(e,t,Ny,r.wrap)),r.wrapR&&n.call(e,t,Ny,r.wrapR),r.wrapS&&n.call(e,t,yu,r.wrapS),r.wrapT&&n.call(e,t,wu,r.wrapT),r.minLod&&n.call(e,t,C6,r.minLod),r.maxLod&&n.call(e,t,k6,r.maxLod),r.baseLevel&&n.call(e,t,T6,r.baseLevel),r.maxLevel&&n.call(e,t,I6,r.maxLevel)}function Qy(e,t,n){const r=n.target||or;e.bindTexture(r,t),UI(e,r,e.texParameteri,n)}function GI(e){return e=e||Hr.textureColor,No(e)?e:new Uint8Array([e[0]*255,e[1]*255,e[2]*255,e[3]*255])}function e0(e,t,n,r,i,o){n=n||Hr.textureOptions,o=o||Ve;const a=n.target||or;if(r=r||n.width,i=i||n.height,e.bindTexture(a,t),NI(e,r,i,o))e.generateMipmap(a);else{const s=zI(o)?x6:w6;e.texParameteri(a,Yd,s),e.texParameteri(a,Qd,s),e.texParameteri(a,yu,mu),e.texParameteri(a,wu,mu)}}function Us(e){return e.auto===!0||e.auto===void 0&&e.level===void 0}function t0(e,t){return t=t||{},t.cubeFaceOrder||[bu,v6,A6,E6,_6,S6]}function n0(e,t){const r=t0(e,t).map(function(i,o){return{face:i,ndx:o}});return r.sort(function(i,o){return i.face-o.face}),r}function Xy(e,t,n,r){r=r||Hr.textureOptions;const i=r.target||or,o=r.level||0;let a=n.width,s=n.height;const f=r.internalFormat||r.format||Ve,l=Vo(f),u=r.format||l.format,c=r.type||l.type;if(jo(e,r),e.bindTexture(i,t),i===ar){const h=n.width,d=n.height;let p,m;if(h/6===d)p=d,m=[0,0,1,0,2,0,3,0,4,0,5,0];else if(d/6===h)p=h,m=[0,0,0,1,0,2,0,3,0,4,0,5];else if(h/3===d/2)p=h/3,m=[0,0,1,0,2,0,0,1,1,1,2,1];else if(h/2===d/3)p=h/2,m=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(n.src?n.src:n.nodeName);const y=Ry();y?(y.canvas.width=p,y.canvas.height=p,a=p,s=p,n0(e,r).forEach(function(w){const A=m[w.ndx*2+0]*p,S=m[w.ndx*2+1]*p;y.drawImage(n,A,S,p,p,0,0,p,p),e.texImage2D(w.face,o,f,u,c,y.canvas)}),y.canvas.width=1,y.canvas.height=1):typeof createImageBitmap<"u"&&(a=p,s=p,n0(e,r).forEach(function(w){const A=m[w.ndx*2+0]*p,S=m[w.ndx*2+1]*p;e.texImage2D(w.face,o,f,p,p,0,u,c,null),createImageBitmap(n,A,S,p,p,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(_){jo(e,r),e.bindTexture(i,t),e.texImage2D(w.face,o,f,u,c,_),Us(r)&&e0(e,t,r,a,s,f)})}))}else if(i===Vr||i===jr){const h=Math.min(n.width,n.height),d=Math.max(n.width,n.height),p=d/h;if(p%1!==0)throw"can not compute 3D dimensions of element";const m=n.width===d?1:0,y=n.height===d?1:0;e.pixelStorei(Xd,1),e.pixelStorei(zy,n.width),e.pixelStorei(Uy,0),e.pixelStorei(Vy,0),e.texImage3D(i,o,f,h,h,h,0,u,c,null);for(let w=0;w<p;++w){const A=w*h*m,S=w*h*y;e.pixelStorei(Gy,A),e.pixelStorei(Hy,S),e.texSubImage3D(i,o,0,0,w,h,h,1,u,c,n)}Yy(e)}else e.texImage2D(i,o,f,u,c,n);Us(r)&&e0(e,t,r,a,s,f),Qy(e,t,r)}function Gs(){}function HI(e){if(typeof document<"u"){const t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}else{const t=new URL(location.href).origin;return new URL(e,location.href).origin===t}}function VI(e,t){return t===void 0&&!HI(e)?"anonymous":t}function jI(e,t,n){n=n||Gs;let r;if(t=t!==void 0?t:Hr.crossOrigin,t=VI(e,t),typeof Image<"u"){r=new Image,t!==void 0&&(r.crossOrigin=t);const i=function(){r.removeEventListener("error",o),r.removeEventListener("load",a),r=null},o=function(){const f="couldn't load image: "+e;QT(f),n(f,r),i()},a=function(){n(null,r),i()};return r.addEventListener("error",o),r.addEventListener("load",a),r.src=e,r}else if(typeof ImageBitmap<"u"){let i,o;const a=function(){n(i,o)},s={};t&&(s.mode="cors"),fetch(e,s).then(function(f){if(!f.ok)throw f;return f.blob()}).then(function(f){return createImageBitmap(f,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(f){o=f,setTimeout(a)}).catch(function(f){i=f,setTimeout(a)}),r=null}return r}function Ky(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof ImageData<"u"&&e instanceof ImageData||typeof HTMLElement<"u"&&e instanceof HTMLElement}function r0(e,t,n){return Ky(e)?(setTimeout(function(){n(null,e)}),e):jI(e,t,n)}function i0(e,t,n){n=n||Hr.textureOptions;const r=n.target||or;if(e.bindTexture(r,t),n.color===!1)return;const i=GI(n.color);if(r===ar)for(let o=0;o<6;++o)e.texImage2D(bu+o,0,Ve,1,1,0,Ve,je,i);else r===Vr||r===jr?e.texImage3D(r,0,Ve,1,1,1,0,Ve,je,i):e.texImage2D(r,0,Ve,1,1,0,Ve,je,i)}function $I(e,t,n,r){return r=r||Gs,n=n||Hr.textureOptions,i0(e,t,n),n=Object.assign({},n),r0(n.src,n.crossOrigin,function(o,a){o?r(o,t,a):(Xy(e,t,a,n),r(null,t,a))})}function qI(e,t,n,r){r=r||Gs;const i=n.src;if(i.length!==6)throw"there must be 6 urls for a cubemap";const o=n.level||0,a=n.internalFormat||n.format||Ve,s=Vo(a),f=n.format||s.format,l=n.type||je,u=n.target||or;if(u!==ar)throw"target must be TEXTURE_CUBE_MAP";i0(e,t,n),n=Object.assign({},n);let c=6;const h=[],d=t0(e,n);let p;function m(y){return function(w,A){--c,w?h.push(w):A.width!==A.height?h.push("cubemap face img is not a square: "+A.src):(jo(e,n),e.bindTexture(u,t),c===5?t0().forEach(function(S){e.texImage2D(S,o,a,f,l,A)}):e.texImage2D(y,o,a,f,l,A),Us(n)&&e.generateMipmap(u)),c===0&&r(h.length?h:void 0,t,p)}}p=i.map(function(y,w){return r0(y,n.crossOrigin,m(d[w]))})}function WI(e,t,n,r){r=r||Gs;const i=n.src,o=n.internalFormat||n.format||Ve,a=Vo(o),s=n.format||a.format,f=n.type||je,l=n.target||jr;if(l!==Vr&&l!==jr)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";i0(e,t,n),n=Object.assign({},n);let u=i.length;const c=[];let h;const d=n.level||0;let p=n.width,m=n.height;const y=i.length;let w=!0;function A(S){return function(_,T){if(--u,_)c.push(_);else{if(jo(e,n),e.bindTexture(l,t),w){w=!1,p=n.width||T.width,m=n.height||T.height,e.texImage3D(l,d,o,p,m,y,0,s,f,null);for(let I=0;I<y;++I)e.texSubImage3D(l,d,0,0,I,p,m,1,s,f,T)}else{let I=T,B;(T.width!==p||T.height!==m)&&(B=Ry(),I=B.canvas,B.canvas.width=p,B.canvas.height=m,B.drawImage(T,0,0,p,m)),e.texSubImage3D(l,d,0,0,S,p,m,1,s,f,I),B&&I===B.canvas&&(B.canvas.width=0,B.canvas.height=0)}Us(n)&&e.generateMipmap(l)}u===0&&r(c.length?c:void 0,t,h)}}h=i.map(function(S,_){return r0(S,n.crossOrigin,A(_))})}function Jy(e,t,n,r){r=r||Hr.textureOptions;const i=r.target||or;e.bindTexture(i,t);let o=r.width,a=r.height,s=r.depth;const f=r.level||0,l=r.internalFormat||r.format||Ve,u=Vo(l),c=r.format||u.format,h=r.type||Zy(e,n,u.type);if(No(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{const y=YT(h);n=new y(n)}const d=LI(l,h),p=n.byteLength/d;if(p%1)throw"length wrong size for format: "+Zd(e,c);let m;if(i===Vr||i===jr)if(!o&&!a&&!s){const y=Math.cbrt(p);if(y%1!==0)throw"can't guess cube size of array of numElements: "+p;o=y,a=y,s=y}else o&&(!a||!s)?(m=Su(e,i,a,s,p/o),a=m.width,s=m.height):a&&(!o||!s)?(m=Su(e,i,o,s,p/a),o=m.width,s=m.height):(m=Su(e,i,o,a,p/s),o=m.width,a=m.height);else m=Su(e,i,o,a,p),o=m.width,a=m.height;if(Yy(e),e.pixelStorei(Xd,r.unpackAlignment||1),jo(e,r),i===ar){const y=d/n.BYTES_PER_ELEMENT,w=p/6*y;n0(e,r).forEach(A=>{const S=w*A.ndx,_=n.subarray(S,S+w);e.texImage2D(A.face,f,l,o,a,0,c,h,_)})}else i===Vr||i===jr?e.texImage3D(i,f,l,o,a,s,0,c,h,n):e.texImage2D(i,f,l,o,a,0,c,h,n);return{width:o,height:a,depth:s,type:h}}function ZI(e,t,n){const r=n.target||or;e.bindTexture(r,t);const i=n.level||0,o=n.internalFormat||n.format||Ve,a=Vo(o),s=n.format||a.format,f=n.type||a.type;if(jo(e,n),r===ar)for(let l=0;l<6;++l)e.texImage2D(bu+l,i,o,n.width,n.height,0,s,f,null);else r===Vr||r===jr?e.texImage3D(r,i,o,n.width,n.height,n.depth,0,s,f,null):e.texImage2D(r,i,o,n.width,n.height,0,s,f,null)}function Hs(e,t,n){n=n||Gs,t=t||Hr.textureOptions;const r=e.createTexture(),i=t.target||or;let o=t.width||1,a=t.height||1;const s=t.internalFormat||Ve;e.bindTexture(i,r),i===ar&&(e.texParameteri(i,yu,mu),e.texParameteri(i,wu,mu));let f=t.src;if(f)if(typeof f=="function"&&(f=f(e,t)),typeof f=="string")$I(e,r,t,n);else if(No(f)||Array.isArray(f)&&(typeof f[0]=="number"||Array.isArray(f[0])||No(f[0]))){const l=Jy(e,r,f,t);o=l.width,a=l.height}else Array.isArray(f)&&(typeof f[0]=="string"||Ky(f[0]))?i===ar?qI(e,r,t,n):WI(e,r,t,n):(Xy(e,r,f,t),o=f.width,a=f.height);else ZI(e,r,t);return Us(t)&&e0(e,r,t,o,a,s),Qy(e,r,t),r}function YI(e,t,n,r,i,o){r=r||n.width,i=i||n.height,o=o||n.depth;const a=n.target||or;e.bindTexture(a,t);const s=n.level||0,f=n.internalFormat||n.format||Ve,l=Vo(f),u=n.format||l.format;let c;const h=n.src;if(h&&(No(h)||Array.isArray(h)&&typeof h[0]=="number")?c=n.type||Zy(e,h,l.type):c=n.type||l.type,a===ar)for(let d=0;d<6;++d)e.texImage2D(bu+d,s,f,r,i,0,u,c,null);else a===Vr||a===jr?e.texImage3D(a,s,f,r,i,o,0,u,c,null):e.texImage2D(a,s,f,r,i,0,u,c,null)}const QI=Sy,Cu=33984,XI=35048,ku=34962,KI=34963,o0=35345,ew=35718,JI=35721,eB=35971,tB=35382,nB=35396,rB=35398,iB=35392,oB=35395,Tu=5126,tw=35664,nw=35665,rw=35666,a0=5124,iw=35667,ow=35668,aw=35669,sw=35670,lw=35671,fw=35672,uw=35673,cw=35674,hw=35675,dw=35676,aB=35678,sB=35680,lB=35679,fB=35682,uB=35685,cB=35686,hB=35687,dB=35688,pB=35689,gB=35690,mB=36289,bB=36292,yB=36293,s0=5125,pw=36294,gw=36295,mw=36296,wB=36298,xB=36299,vB=36300,AB=36303,EB=36306,_B=36307,SB=36308,CB=36311,Iu=3553,Bu=34067,l0=32879,Du=35866,le={};function bw(e,t){return le[t].bindPoint}function kB(e,t){return function(n){e.uniform1f(t,n)}}function TB(e,t){return function(n){e.uniform1fv(t,n)}}function IB(e,t){return function(n){e.uniform2fv(t,n)}}function BB(e,t){return function(n){e.uniform3fv(t,n)}}function DB(e,t){return function(n){e.uniform4fv(t,n)}}function yw(e,t){return function(n){e.uniform1i(t,n)}}function ww(e,t){return function(n){e.uniform1iv(t,n)}}function xw(e,t){return function(n){e.uniform2iv(t,n)}}function vw(e,t){return function(n){e.uniform3iv(t,n)}}function Aw(e,t){return function(n){e.uniform4iv(t,n)}}function FB(e,t){return function(n){e.uniform1ui(t,n)}}function RB(e,t){return function(n){e.uniform1uiv(t,n)}}function MB(e,t){return function(n){e.uniform2uiv(t,n)}}function PB(e,t){return function(n){e.uniform3uiv(t,n)}}function OB(e,t){return function(n){e.uniform4uiv(t,n)}}function LB(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}}function NB(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}}function zB(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}}function UB(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}}function GB(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}}function HB(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}}function VB(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}}function jB(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}}function $B(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}}function Tt(e,t,n,r){const i=bw(e,t);return Lo(e)?function(o){let a,s;gu(e,o)?(a=o,s=null):(a=o.texture,s=o.sampler),e.uniform1i(r,n),e.activeTexture(Cu+n),e.bindTexture(i,a),e.bindSampler(n,s)}:function(o){e.uniform1i(r,n),e.activeTexture(Cu+n),e.bindTexture(i,o)}}function It(e,t,n,r,i){const o=bw(e,t),a=new Int32Array(i);for(let s=0;s<i;++s)a[s]=n+s;return Lo(e)?function(s){e.uniform1iv(r,a),s.forEach(function(f,l){e.activeTexture(Cu+a[l]);let u,c;gu(e,f)?(u=f,c=null):(u=f.texture,c=f.sampler),e.bindSampler(n,c),e.bindTexture(o,u)})}:function(s){e.uniform1iv(r,a),s.forEach(function(f,l){e.activeTexture(Cu+a[l]),e.bindTexture(o,f)})}}le[Tu]={Type:Float32Array,size:4,setter:kB,arraySetter:TB},le[tw]={Type:Float32Array,size:8,setter:IB,cols:2},le[nw]={Type:Float32Array,size:12,setter:BB,cols:3},le[rw]={Type:Float32Array,size:16,setter:DB,cols:4},le[a0]={Type:Int32Array,size:4,setter:yw,arraySetter:ww},le[iw]={Type:Int32Array,size:8,setter:xw,cols:2},le[ow]={Type:Int32Array,size:12,setter:vw,cols:3},le[aw]={Type:Int32Array,size:16,setter:Aw,cols:4},le[s0]={Type:Uint32Array,size:4,setter:FB,arraySetter:RB},le[pw]={Type:Uint32Array,size:8,setter:MB,cols:2},le[gw]={Type:Uint32Array,size:12,setter:PB,cols:3},le[mw]={Type:Uint32Array,size:16,setter:OB,cols:4},le[sw]={Type:Uint32Array,size:4,setter:yw,arraySetter:ww},le[lw]={Type:Uint32Array,size:8,setter:xw,cols:2},le[fw]={Type:Uint32Array,size:12,setter:vw,cols:3},le[uw]={Type:Uint32Array,size:16,setter:Aw,cols:4},le[cw]={Type:Float32Array,size:32,setter:LB,rows:2,cols:2},le[hw]={Type:Float32Array,size:48,setter:NB,rows:3,cols:3},le[dw]={Type:Float32Array,size:64,setter:zB,rows:4,cols:4},le[uB]={Type:Float32Array,size:32,setter:UB,rows:2,cols:3},le[cB]={Type:Float32Array,size:32,setter:HB,rows:2,cols:4},le[hB]={Type:Float32Array,size:48,setter:GB,rows:3,cols:2},le[dB]={Type:Float32Array,size:48,setter:jB,rows:3,cols:4},le[pB]={Type:Float32Array,size:64,setter:VB,rows:4,cols:2},le[gB]={Type:Float32Array,size:64,setter:$B,rows:4,cols:3},le[aB]={Type:null,size:0,setter:Tt,arraySetter:It,bindPoint:Iu},le[sB]={Type:null,size:0,setter:Tt,arraySetter:It,bindPoint:Bu},le[lB]={Type:null,size:0,setter:Tt,arraySetter:It,bindPoint:l0},le[fB]={Type:null,size:0,setter:Tt,arraySetter:It,bindPoint:Iu},le[mB]={Type:null,size:0,setter:Tt,arraySetter:It,bindPoint:Du},le[bB]={Type:null,size:0,setter:Tt,arraySetter:It,bindPoint:Du},le[yB]={Type:null,size:0,setter:Tt,arraySetter:It,bindPoint:Bu},le[wB]={Type:null,size:0,setter:Tt,arraySetter:It,bindPoint:Iu},le[xB]={Type:null,size:0,setter:Tt,arraySetter:It,bindPoint:l0},le[vB]={Type:null,size:0,setter:Tt,arraySetter:It,bindPoint:Bu},le[AB]={Type:null,size:0,setter:Tt,arraySetter:It,bindPoint:Du},le[EB]={Type:null,size:0,setter:Tt,arraySetter:It,bindPoint:Iu},le[_B]={Type:null,size:0,setter:Tt,arraySetter:It,bindPoint:l0},le[SB]={Type:null,size:0,setter:Tt,arraySetter:It,bindPoint:Bu},le[CB]={Type:null,size:0,setter:Tt,arraySetter:It,bindPoint:Du};function Fu(e,t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(ku,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||Tu,n.normalize||!1,n.stride||0,n.offset||0),n.divisor!==void 0&&e.vertexAttribDivisor(t,n.divisor)}}function qr(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4iv(t,n.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(ku,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||a0,n.stride||0,n.offset||0),n.divisor!==void 0&&e.vertexAttribDivisor(t,n.divisor)}}function Ru(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4uiv(t,n.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(ku,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||s0,n.stride||0,n.offset||0),n.divisor!==void 0&&e.vertexAttribDivisor(t,n.divisor)}}function f0(e,t,n){const r=n.size,i=n.count;return function(o){e.bindBuffer(ku,o.buffer);const a=o.size||o.numComponents||r,s=a/i,f=o.type||Tu,u=le[f].size*a,c=o.normalize||!1,h=o.offset||0,d=u/i;for(let p=0;p<i;++p)e.enableVertexAttribArray(t+p),e.vertexAttribPointer(t+p,s,f,c,u,h+d*p),o.divisor!==void 0&&e.vertexAttribDivisor(t+p,o.divisor)}}const it={};it[Tu]={size:4,setter:Fu},it[tw]={size:8,setter:Fu},it[nw]={size:12,setter:Fu},it[rw]={size:16,setter:Fu},it[a0]={size:4,setter:qr},it[iw]={size:8,setter:qr},it[ow]={size:12,setter:qr},it[aw]={size:16,setter:qr},it[s0]={size:4,setter:Ru},it[pw]={size:8,setter:Ru},it[gw]={size:12,setter:Ru},it[mw]={size:16,setter:Ru},it[sw]={size:4,setter:qr},it[lw]={size:8,setter:qr},it[fw]={size:12,setter:qr},it[uw]={size:16,setter:qr},it[cw]={size:4,setter:f0,count:2},it[hw]={size:9,setter:f0,count:3},it[dw]={size:16,setter:f0,count:4};function Ew(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const qB=/(\.|\[|]|\w+)/g,WB=e=>e>="0"&&e<="9";function _w(e,t,n,r){const i=e.split(qB).filter(s=>s!=="");let o=0,a="";for(;;){const s=i[o++];a+=s;const f=WB(s[0]),l=f?parseInt(s):s;if(f&&(a+=i[o++]),o===i.length){n[l]=t;break}else{const c=i[o++],h=c==="[",d=n[l]||(h?[]:{});n[l]=d,n=d,r[a]=r[a]||function(p){return function(m){Iw(p,m)}}(d),a+=c}}}function ZB(e,t){let n=0;function r(s,f,l){const u=f.name.endsWith("[0]"),c=f.type,h=le[c];if(!h)throw new Error(`unknown type: 0x${c.toString(16)}`);let d;if(h.bindPoint){const p=n;n+=f.size,u?d=h.arraySetter(e,c,p,l,f.size):d=h.setter(e,c,p,l,f.size)}else h.arraySetter&&u?d=h.arraySetter(e,l):d=h.setter(e,l);return d.location=l,d}const i={},o={},a=e.getProgramParameter(t,ew);for(let s=0;s<a;++s){const f=e.getActiveUniform(t,s);if(Ew(f))continue;let l=f.name;l.endsWith("[0]")&&(l=l.substr(0,l.length-3));const u=e.getUniformLocation(t,f.name);if(u){const c=r(t,f,u);i[l]=c,_w(l,c,o,i)}}return i}function YB(e,t){const n={},r=e.getProgramParameter(t,eB);for(let i=0;i<r;++i){const o=e.getTransformFeedbackVarying(t,i);n[o.name]={index:i,type:o.type,size:o.size}}return n}function QB(e,t){const n=e.getProgramParameter(t,ew),r=[],i=[];for(let s=0;s<n;++s){i.push(s),r.push({});const f=e.getActiveUniform(t,s);r[s].name=f.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(s){const f=s[0],l=s[1];e.getActiveUniforms(t,i,e[f]).forEach(function(u,c){r[c][l]=u})});const o={},a=e.getProgramParameter(t,tB);for(let s=0;s<a;++s){const f=e.getActiveUniformBlockName(t,s),l={index:e.getUniformBlockIndex(t,f),usedByVertexShader:e.getActiveUniformBlockParameter(t,s,nB),usedByFragmentShader:e.getActiveUniformBlockParameter(t,s,rB),size:e.getActiveUniformBlockParameter(t,s,iB),uniformIndices:e.getActiveUniformBlockParameter(t,s,oB)};l.used=l.usedByVertexShader||l.usedByFragmentShader,o[f]=l}return{blockSpecs:o,uniformData:r}}const Sw=/\[\d+\]\.$/,XB=(e,t)=>((e+(t-1))/t|0)*t;function KB(e,t,n,r){if(t||n){r=r||1;const o=e.length/4;return function(a){let s=0,f=0;for(let l=0;l<o;++l){for(let u=0;u<r;++u)e[s++]=a[f++];s+=4-r}}}else return function(i){i.length?e.set(i):e[0]=i}}function JB(e,t,n,r){const i=n.blockSpecs,o=n.uniformData,a=i[r];if(!a)return QI("no uniform block object named:",r),{name:r,uniforms:{}};const s=new ArrayBuffer(a.size),f=e.createBuffer(),l=a.index;e.bindBuffer(o0,f),e.uniformBlockBinding(t,a.index,l);let u=r+".";Sw.test(u)&&(u=u.replace(Sw,"."));const c={},h={},d={};return a.uniformIndices.forEach(function(p){const m=o[p];let y=m.name;y.startsWith(u)&&(y=y.substr(u.length));const w=y.endsWith("[0]");w&&(y=y.substr(0,y.length-3));const A=le[m.type],S=A.Type,_=w?XB(A.size,16)*m.size:A.size*m.size,T=new S(s,m.offset,_/S.BYTES_PER_ELEMENT);c[y]=T;const I=KB(T,w,A.rows,A.cols);h[y]=I,_w(y,I,d,h)}),{name:r,array:s,asFloat:new Float32Array(s),buffer:f,uniforms:c,setters:h}}function Cw(e,t,n){return JB(e,t.program,t.uniformBlockSpec,n)}function kw(e,t,n){const i=(t.uniformBlockSpec||t).blockSpecs[n.name];if(i){const o=i.index;return e.bindBufferRange(o0,o,n.buffer,n.offset||0,n.array.byteLength),!0}return!1}function Tw(e,t,n){kw(e,t,n)&&e.bufferData(o0,n.array,XI)}function $o(e,t){const n=e.setters;for(const r in t){const i=n[r];if(i){const o=t[r];i(o)}}}function Iw(e,t){for(const n in t){const r=e[n];typeof r=="function"?r(t[n]):Iw(e[n],t[n])}}function qo(e,...t){const n=e.uniformSetters||e,r=t.length;for(let i=0;i<r;++i){const o=t[i];if(Array.isArray(o)){const a=o.length;for(let s=0;s<a;++s)qo(n,o[s])}else for(const a in o){const s=n[a];s&&s(o[a])}}}function eD(e,t){const n={},r=e.getProgramParameter(t,JI);for(let i=0;i<r;++i){const o=e.getActiveAttrib(t,i);if(Ew(o))continue;const a=e.getAttribLocation(t,o.name),s=it[o.type],f=s.setter(e,a,s);f.location=a,n[o.name]=f}return n}function tD(e,t){for(const n in t){const r=e[n];r&&r(t[n])}}function ji(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):(tD(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer(KI,n.indices))}function nD(e,t){const n=ZB(e,t),r=eD(e,t),i={program:t,uniformSetters:n,attribSetters:r};return Lo(e)&&(i.uniformBlockSpec=QB(e,t),i.transformFeedbackInfo=YB(e,t)),i}const rD=4,Bw=5123;function Mu(e,t,n,r,i,o){n=n===void 0?rD:n;const a=t.indices,s=t.elementType,f=r===void 0?t.numElements:r;i=i===void 0?0:i,s||a?o!==void 0?e.drawElementsInstanced(n,f,s===void 0?Bw:t.elementType,i,o):e.drawElements(n,f,s===void 0?Bw:t.elementType,i):o!==void 0?e.drawArraysInstanced(n,i,f,o):e.drawArrays(n,i,f)}const iD=36160,$i=36161,oD=3553,aD=5121,sD=6402,lD=6408,fD=33190,uD=36012,cD=35056,hD=36013,dD=32854,pD=32855,gD=36194,Dw=33189,Fw=6401,Rw=36168,u0=34041,mD=36064,Pu=36096,Mw=36128,c0=33306,h0=33071,d0=9729,Pw=[{format:lD,type:aD,min:d0,wrap:h0},{format:u0}],En={};En[u0]=c0,En[Fw]=Mw,En[Rw]=Mw,En[sD]=Pu,En[Dw]=Pu,En[fD]=Pu,En[uD]=Pu,En[cD]=c0,En[hD]=c0;function bD(e,t){return En[e]||En[t]}const Wr={};Wr[dD]=!0,Wr[pD]=!0,Wr[gD]=!0,Wr[u0]=!0,Wr[Dw]=!0,Wr[Fw]=!0,Wr[Rw]=!0;function yD(e){return Wr[e]}function wD(e,t,n,r){const i=iD,o=e.createFramebuffer();e.bindFramebuffer(i,o),n=n||e.drawingBufferWidth,r=r||e.drawingBufferHeight,t=t||Pw;let a=0;const s={framebuffer:o,attachments:[],width:n,height:r};return t.forEach(function(f){let l=f.attachment;const u=f.samples,c=f.format;let h=f.attachmentPoint||bD(c,f.internalFormat);if(h||(h=mD+a++),!l)if(u!==void 0||yD(c))l=e.createRenderbuffer(),e.bindRenderbuffer($i,l),u>1?e.renderbufferStorageMultisample($i,u,c,n,r):e.renderbufferStorage($i,c,n,r);else{const d=Object.assign({},f);d.width=n,d.height=r,d.auto===void 0&&(d.auto=!1,d.min=d.min||d.minMag||d0,d.mag=d.mag||d.minMag||d0,d.wrapS=d.wrapS||d.wrap||h0,d.wrapT=d.wrapT||d.wrap||h0),l=Hs(e,d)}if(Cy(e,l))e.framebufferRenderbuffer(i,h,$i,l);else if(gu(e,l))f.layer!==void 0?e.framebufferTextureLayer(i,h,l,f.level||0,f.layer):e.framebufferTexture2D(i,h,f.target||oD,l,f.level||0);else throw new Error("unknown attachment type");s.attachments.push(l)}),s}function xD(e,t,n,r,i){r=r||e.drawingBufferWidth,i=i||e.drawingBufferHeight,t.width=r,t.height=i,n=n||Pw,n.forEach(function(o,a){const s=t.attachments[a],f=o.format,l=o.samples;if(l!==void 0||Cy(e,s))e.bindRenderbuffer($i,s),l>1?e.renderbufferStorageMultisample($i,l,f,r,i):e.renderbufferStorage($i,f,r,i);else if(gu(e,s))YI(e,s,o,r,i);else throw new Error("unknown attachment type")})}function vD(e,t,n){const r=e.createVertexArray();return e.bindVertexArray(r),t.length||(t=[t]),t.forEach(function(i){ji(e,i,n)}),e.bindVertexArray(null),{numElements:n.numElements,elementType:n.elementType,vertexArrayObject:r}}const AD=/^(.*?)_/;function ED(e,t){Zd(e,0);const n=e.getExtension(t);if(n){const r={},i=AD.exec(t)[1],o="_"+i;for(const a in n){const s=n[a],f=typeof s=="function",l=f?i:o;let u=a;a.endsWith(l)&&(u=a.substring(0,a.length-l.length)),e[u]!==void 0?!f&&e[u]!==s&&Sy(u,e[u],s,a):f?e[u]=function(c){return function(){return c.apply(n,arguments)}}(s):(e[u]=s,r[u]=s)}r.constructor={name:n.constructor.name},Zd(r,0)}return n}const Ow=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function Lw(e){for(let t=0;t<Ow.length;++t)ED(e,Ow[t])}function _D(e,t){const n=["webgl2","webgl","experimental-webgl"];let r=null;for(let i=0;i<n.length;++i)if(r=e.getContext(n[i],t),r){Lw(r);break}return r}function SD(e,t){return _D(e,t)}const Nw="attr_",CD="uDomain_",kD="range_",zw="scale_",p0="getScaled_",g0="uRangeTexture_",Uw=3402823466e29;function TD(e){const t=e.match(/^(?:(\w+)-)?(\w+)$/);if(!t)throw new Error("Not a scale type: "+e);return{family:t[1]||"continuous",transform:t[2]}}function ID(e,t){let n;if(Hu(e))n=qi(rx(e)(t));else if(Pe(t))if(Zr(e))n=FD(t);else throw new Error(`String values are not supported on the "${e}" channel: ${t}`);else if($a(t))n=qi(t?1:0);else if(t===null)if(Zr(e))n=qi([0,0,0]);else throw new Error(`null value is not supported on the "${e}" chanel.`);else n=qi(t);return`
#define ${e}_DEFINED
${n.type} ${p0}${e}() {
    // Constant value
    return ${n};
}`}function BD(e){let t="float",n=a=>a;Zr(e)&&(t="vec3",n=a=>Vw(a));const r=`u${OD(e)}`,i=`    // Dynamic value
    uniform ${t} ${r};`;let o=`
#define ${e}_DEFINED
${t} ${p0}${e}() {
    // Dynamic value
    return ${r};
}`;return{channel:e,uniformName:r,uniformGlsl:i,scaleGlsl:o,adjuster:n}}function DD(e,t,n,r=[e]){if(nn(n))throw new Error(`Cannot create scale for "value": ${JSON.stringify(n)}`);const i=t?t.scale:du(),o=Yi(e),a=Nw+Ww(r),s=CD+o,f=kD+o,l=zn(i.type),u=Ou(i.type),h=u&&m0(i.domain())?"uvec2":u||l?"uint":"float",d=i.domain?i.domain().length:void 0;let p;const m=[];m.push(""),m.push("/".repeat(70)),m.push(`// Channel: ${e}`),m.push(""),m.push(`#define ${e}_DEFINED`);const{transform:y}=TD(i.type),w=(te,...pe)=>RD.apply(null,[te,"value",...pe]);let A;switch(y){case"linear":A=w("scaleLinear","domain",f);break;case"log":A=w("scaleLog","domain",f,i.base());break;case"symlog":A=w("scaleSymlog","domain",f,i.constant());break;case"pow":case"sqrt":A=w("scalePow","domain",f,i.exponent());break;case"index":case"locus":A=w("scaleBandHp","domain",f,i.paddingInner(),i.paddingOuter(),i.align(),n.band??.5);break;case"point":case"band":A=w("scaleBand","domain",f,i.paddingInner(),i.paddingOuter(),i.align(),n.band??.5);break;case"ordinal":case"null":case"identity":A=w("scaleIdentity");break;case"threshold":break;default:throw new Error(`Unsupported scale type: ${i.type}! ${e}: ${JSON.stringify(n)}`)}const S=Zw(i,e);let _;if(S&&e==o){const te=i.props.range??[];if(sr(te)||te.some(sr)){if(S.length<1||S.length>4)throw new Error(`A range with ExprRefs must have 1-4 elements, not ${S.length}! Range: ${JSON.stringify(S)}`);_=`    uniform ${Hw(S.length)} ${f};`}else if(S.length&&S.every(kt)){const pe=jw(S);m.push(`const ${pe.type} ${f} = ${pe};`)}}const T=Zr(e)?"vec3":"float";let I;if(Zr(e)){const te=g0+o;if(e==o&&m.push(`uniform sampler2D ${te};`),yt(i.type))I=`getInterpolatedColor(${te}, transformed)`;else if(zn(i.type)||Gi(i.type))I=`getDiscreteColor(${te}, int(transformed))`;else throw new Error("Problem with color scale!")}else if(i.type==="ordinal"||Gi(i.type)){const te=g0+o;e==o&&m.push(`uniform sampler2D ${te};`),I=`getDiscreteColor(${te}, int(transformed)).r`}const[B,F]=$s(n)?[void 0,`    uniform highp ${h} ${a};`]:[`in highp ${h} ${a};`,void 0],M=[],G=yt(i.type)&&d>2,N=Gi(i.type)||G;if(M.push("int slot = 0;"),N){const te=s;M.push(G?`while (slot < ${te}.length() - 2 && value >= ${te}[slot + 1]) { slot++; }`:`while (slot < ${te}.length() && value >= ${te}[slot]) { slot++; }`)}const re=yt(i.type)||Gi(i.type)||["band","point"].includes(i.type);if(A){const te=s;re&&(u?M.push(`vec3 domain = ${te};`):M.push(`vec2 domain = vec2(${te}[slot], ${te}[slot + 1]);`)),M.push(`float transformed = ${A};`),G&&M.push(`transformed = (float(slot) + transformed) / (float(${te}.length() - 1));`)}else M.push("float transformed = float(slot);");"clamp"in i&&i.clamp()&&M.push(`transformed = clampToRange(transformed, ${jw(S)});`),M.push(`return ${I??"transformed"};`),m.push(`
${T} ${zw}${e}(${h} value) {
${M.map(te=>`    ${te}
`).join("")}
}`),m.push(`
${T} ${p0}${e}() {
    return ${zw}${e}(${a});
}`);const se=m.join(`
`);if(re&&e==o){const te=yt(i.type)||Gi(i.type)?d:2;p=u?`    highp vec3 ${s};`:`    mediump float ${s}[${te}];`}return{attributeName:a,attributeGlsl:B,markUniformGlsl:F,glsl:se,domainUniformName:s,domainUniform:p,rangeName:f,rangeUniform:_}}function Gw(e){if(!kt(e))throw new Error(`Not a number: ${e}`);if(e==1/0)return""+Uw;if(e==-1/0)return""+-Uw;{let t=`${e}`;return/^(-)?\d+$/.test(t)&&(t+=".0"),t}}function qi(e){typeof e=="number"&&(e=[e]);const t=e.length;if(t<1||t>4)throw new Error("Invalid number of components: "+t);const n=Hw(t),r=`${n}(${e.map(Gw).join(", ")})`;return Object.assign(r,{type:n,numComponents:t})}function Hw(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error("Invalid number of components: "+e)}}function Vw(e){const t=Nr(e).rgb();return[t.r,t.g,t.b].map(n=>n/255)}function FD(e){return qi(Vw(e))}function jw(e){return qi([e[0],ys(e)])}function RD(e,...t){const n=[];for(const r of t)kt(r)?n.push(Gw(r)):Ct(r)?n.push(qi(r)):n.push(r);return`${e}(${n.join(", ")})`}function Ou(e){return e=="index"||e=="locus"}function m0(e){return e[1]>2**32}const b0=2**12;function $w(e,t=[]){const n=e%b0,r=(e-n)/b0;return t[0]=r,t[1]=n,t}function MD(e){const t=e%b0;return[e-t,t]}function PD(e){return[...MD(e[0]),e[1]-e[0]]}function qw(e){const t=new Tr([],JSON.stringify);for(const[n,r]of Object.entries(e)){const i=r.channelDef;if(Zi(i)){const a=[i.field,r.scale?(yt(r.scale.type)||Gi(r.scale.type))??!1:!1];t.set(a,[...t.get(a)??[],n])}}return t}function Ww(e){return Ot(e).join("_")}function OD(e){return e[0].toUpperCase()+e.slice(1)}const Zw=(e,t)=>cu(e.type)||yt(e.type)&&Zr(t)?[0,1]:e.range?e.range():void 0,Yw=`#define PI 3.141593

uniform View {
    /** Offset in "unit" units */
    mediump vec2 uViewOffset;
    mediump vec2 uViewScale;
    /** Size of the logical viewport in pixels, i.e., the view */
    mediump vec2 uViewportSize;
    lowp float uDevicePixelRatio;
    // TODO: Views with opacity less than 1.0 should be rendered into a texture
    // that is rendered with the specified opacity.
    lowp float uViewOpacity;
    bool uPickingEnabled;
};


/**
 * Maps a coordinate on the unit scale to a normalized device coordinate.
 * (0, 0) is at the bottom left corner.
 */
vec4 unitToNdc(vec2 coord) {
    return vec4((coord * uViewScale + uViewOffset) * 2.0 - 1.0, 0.0, 1.0);
}

vec4 unitToNdc(float x, float y) {
    return unitToNdc(vec2(x, y));
}

vec4 pixelsToNdc(vec2 coord) {
    return unitToNdc(coord / uViewportSize);
}

vec4 pixelsToNdc(float x, float y) {
    return pixelsToNdc(vec2(x, y));
}

float linearstep(float edge0, float edge1, float x) {
    return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
}

// Fragment shader stuff ////////////////////////////////////////////////////////

// TODO: include the following only in fragment shaders

/**
 * Specialized linearstep for doing antialiasing
 */
float distanceToRatio(float d) {
	return clamp(d * uDevicePixelRatio + 0.5, 0.0, 1.0);
}

vec4 distanceToColor(float d, vec4 fill, vec4 stroke, float halfStrokeWidth) {
    if (halfStrokeWidth > 0.0) {
        // Distance to stroke's edge. Negative inside the stroke.
        float sd = abs(d) - halfStrokeWidth;
        return mix(
            stroke,
            d <= 0.0 ? fill : vec4(0.0),
            distanceToRatio(sd));
    } else {
        return fill * distanceToRatio(-d);
    }
}
`,LD=`uniform highp float uZero;

// Utils ------------

vec3 getDiscreteColor(sampler2D s, int index) {
    return texelFetch(s, ivec2(index % textureSize(s, 0).x, 0), 0).rgb;
}

vec3 getInterpolatedColor(sampler2D s, float unitValue) {
    return texture(s, vec2(unitValue, 0.0)).rgb;
}

float clampToRange(float value, vec2 range) {
    return clamp(value, min(range[0], range[1]), max(range[0], range[1]));
}

// Scales ------------
// Based on d3 scales: https://github.com/d3/d3-scale

float scaleIdentity(float value) {
    return value;
}

float scaleIdentity(uint value) {
    return float(value);
}

float scaleLinear(float value, vec2 domain, vec2 range) {
    float domainSpan = domain[1] - domain[0];
    float rangeSpan = range[1] - range[0];
    return (value - domain[0]) / domainSpan * rangeSpan + range[0];
}

float scaleLog(float value, vec2 domain, vec2 range, float base) {
    // y = m log(x) + b 
    // TODO: Perf optimization: precalculate log domain in js.
    // TODO: Reversed domain, etc
    return scaleLinear(log(value) / log(base), log(domain) / log(base), range);
}

float symlog(float value, float constant) {
    // WARNING: emulating log1p with log(x + 1). Small numbers are likely to
    // have significant precision problems.
    return sign(value) * log(abs(value / constant) + 1.0);
}

float scaleSymlog(float value, vec2 domain, vec2 range, float constant) {
    return scaleLinear(
        symlog(value, constant),
        vec2(symlog(domain[0], constant), symlog(domain[1], constant)),
        range
    );
}

float scalePow(float value, vec2 domain, vec2 range, float exponent) {
    // y = mx^k + b
    // TODO: Perf optimization: precalculate pow domain in js.
    // TODO: Reversed domain, etc
    return scaleLinear(
        pow(abs(value), exponent) * sign(value),
        pow(abs(domain), vec2(exponent)) * sign(domain),
        range
    );
}

// TODO: scaleThreshold
// TODO: scaleQuantile (special case of threshold scale)

// TODO: domainExtent should be uint
float scaleBand(uint value, vec2 domainExtent, vec2 range,
                float paddingInner, float paddingOuter,
                float align, float band) {

    // TODO: reverse
    float start = range[0];
    float stop = range[1];
    float rangeSpan = stop - start;

    float n = domainExtent[1] - domainExtent[0];

    // This fix departs from Vega and d3: https://github.com/vega/vega/issues/3357#issuecomment-1063253596
    paddingInner = int(n) > 1 ? paddingInner : 0.0;

    // Adapted from: https://github.com/d3/d3-scale/blob/master/src/band.js
    float step = rangeSpan / max(1.0, n - paddingInner + paddingOuter * 2.0);
    start += (rangeSpan - step * (n - paddingInner)) * align;
    float bandwidth = step * (1.0 - paddingInner);

    return start + (float(value) - domainExtent[0]) * step + bandwidth * band;
}

const int lowBits = 12;
const float lowDivisor = pow(2.0, float(lowBits));
const uint lowMask = uint(lowDivisor - 1.0);

vec2 splitUint(uint value) {
    uint valueLo = value & lowMask;
    uint valueHi = value - valueLo;
    return vec2(float(valueHi), float(valueLo));
}

/**
 * High precision variant of scaleBand for index/locus scales
 */
float scaleBandHp(uint value, vec3 domainExtent, vec2 range,
                 float paddingInner, float paddingOuter,
                 float align, float band) {

    // TODO: reverse
    float start = range[0];
    float stop = range[1];
    float rangeSpan = stop - start;

    vec2 domainStart = domainExtent.xy;
    float n = domainExtent[2];

    // The following computation is identical for every vertex. Could be done on the JS side.
    float step = rangeSpan / max(1.0, n - paddingInner + paddingOuter * 2.0);
    start += (rangeSpan - step * (n - paddingInner)) * align;
    float bandwidth = step * (1.0 - paddingInner);

    // Split into to values with each having a reduced number of significant digits
    // to mitigate the lack of precision in float32 calculations.
    vec2 splitValue = splitUint(value);

    // Using max to prevent the shader compiler from wrecking the precision.
    // Othwewise the compiler could optimize the sum of the four terms into
    // some equivalent form that does premature rounding.
    float inf = 1.0 / uZero;
    float hi = max(splitValue[0] - domainStart[0], -inf);
    float lo = max(splitValue[1] - domainStart[1], -inf);

    return dot(vec4(start, hi, lo, bandwidth), vec4(1.0, step, step, band));
}

/**
 * High precision variant of scaleBand for index/locus scales for large
 * domains where 32bit uints are not sufficient to represent the domain.
 */
float scaleBandHp(uvec2 value, vec3 domainExtent, vec2 range,
                 float paddingInner, float paddingOuter,
                 float align, float band) {

    // TODO: reverse
    float start = range[0];
    float stop = range[1];
    float rangeSpan = stop - start;

    vec2 domainStart = domainExtent.xy;
    float n = domainExtent[2];

    // The following computation is identical for every vertex. Could be done on the JS side.
    float step = rangeSpan / max(1.0, n - paddingInner + paddingOuter * 2.0);
    start += (rangeSpan - step * (n - paddingInner)) * align;
    float bandwidth = step * (1.0 - paddingInner);

    // Split into to values with each having a reduced number of significant digits
    // to mitigate the lack of precision in float32 calculations.
    vec2 splitValue = vec2(float(value[0]) * lowDivisor, float(value[1]));

    // Using max to prevent the shader compiler from wrecking the precision.
    // Othwewise the compiler could optimize the sum of the four terms into
    // some equivalent form that does premature rounding.
    float inf = 1.0 / uZero;
    float hi = max(splitValue[0] - domainStart[0], -inf);
    float lo = max(splitValue[1] - domainStart[1], -inf);

    return dot(vec4(start, hi, lo, bandwidth), vec4(1.0, step, step, band));
}
`,ND=`
/**
 * Describes where a sample facet should be shown. Interpolating between the
 * current and target positions/heights allows for transitioning between facet
 * configurations.
 */
struct SampleFacetPosition {
    float pos;
    float height;
    float targetPos;
    float targetHeight;
};

/**
 * Trasition fraction [0, 1] between the current and target configurations.
 */
uniform float uTransitionOffset;


// ----------------------------------------------------------------------------

#if !defined(SAMPLE_FACET_UNIFORM) && !defined(SAMPLE_FACET_TEXTURE)

SampleFacetPosition getSampleFacetPos() {
    return SampleFacetPosition(0.0, 1.0, 0.0, 1.0);
}

#elif defined(SAMPLE_FACET_UNIFORM)

/**
 * Location and height of the band on the Y axis on a normalized [0, 1] scale.
 * Elements: curr pos, curr height, target pos, target height
 */
uniform vec4 uSampleFacet;

SampleFacetPosition getSampleFacetPos() {
    return SampleFacetPosition(
        1.0 - uSampleFacet.x - uSampleFacet.y,
        uSampleFacet.y,
        1.0 - uSampleFacet.z - uSampleFacet.w,
        uSampleFacet.w
    );
}

#elif defined(SAMPLE_FACET_TEXTURE)

uniform sampler2D uSampleFacetTexture;

SampleFacetPosition getSampleFacetPos() {
    vec4 texel = texelFetch(uSampleFacetTexture, ivec2(int(attr_facetIndex), 0), 0);
    return SampleFacetPosition(
        1.0 - texel.r - texel.g,
        texel.g,
        1.0 - texel.r - texel.g,
        texel.g);
}

#endif

// ----------------------------------------------------------------------------

bool isFacetedSamples(SampleFacetPosition facetPos) {
    return facetPos != SampleFacetPosition(0.0, 1.0, 0.0, 1.0);
}

bool isFacetedSamples() {
    return isFacetedSamples(getSampleFacetPos());
}

bool isInTransit() {
    return uTransitionOffset > 0.0;
}

float getTransitionFraction(float xPos) {
    return smoothstep(0.0, 0.7 + uTransitionOffset, (xPos - uTransitionOffset) * 2.0);
}

vec2 applySampleFacet(vec2 pos) {
    SampleFacetPosition facetPos = getSampleFacetPos();

    if (!isFacetedSamples(facetPos)) {
        return pos;
    } else if (isInTransit()) {
        vec2 interpolated = mix(
            vec2(facetPos.pos, facetPos.height),
            vec2(facetPos.targetPos, facetPos.targetHeight),
            getTransitionFraction(pos.x));
        return vec2(pos.x, interpolated[0] + pos.y * interpolated[1]);
    } else {
        return vec2(pos.x, facetPos.pos + pos.y * facetPos.height);
    }
}

float getSampleFacetHeight(vec2 pos) {
    SampleFacetPosition facetPos = getSampleFacetPos();

    if (!isFacetedSamples(facetPos)) {
        return 1.0;
    } else if (isInTransit()) {
        return mix(
            facetPos.height,
            facetPos.targetHeight,
            getTransitionFraction(pos.x));
    } else {
        return facetPos.height;
    }
}
`,zD=`/*
 * Based on concepts presented at:
 * https://webglfundamentals.org/webgl/lessons/webgl-picking.html
 * https://deck.gl/docs/developer-guide/custom-layers/picking
 */

out highp vec4 vPickingColor;

/**
 * Passes the unique id to the fragment shader as a color if picking is enabled.
 * Returns true if picking is enabled.
 */
bool setupPicking() {
    if (uPickingEnabled) {
#ifdef uniqueId_DEFINED
        int id = int(getScaled_uniqueId());
        // TODO: Take the sign bit into account
        vPickingColor = vec4(
            ivec4(id >> 0, id >> 8, id >> 16, 0xFF) & 0xFF
        ) / float(0xFF);
#else
        vPickingColor = vec4(1.0);
#endif
        return true;
    }
    return false;
}
`,UD=`in highp vec4 vPickingColor;
`,Lu=Symbol("cacheMap");function Nu(e,t,n){let r=Vs(e).get(t);return r===void 0&&(r=n(t),Vs(e).set(t,r)),r}function GD(e,t){Vs(e).delete(t)}function zu(e,t){const n=Vs(e);for(const r of n.keys())r.startsWith(t)&&n.delete(r);Vs(e).delete(t)}function Qw(e){e[Lu]=new Map}function Vs(e){return e[Lu]||Qw(e),e[Lu]}function HD(e,t,n,r){const i=Pe(e)?e:e.name,o=!Pe(e)&&e.extent||[0,1];if(n===void 0&&!Pe(e)&&(n=e.count),i){const a=Nd(i);if(Mt(a)){const s=Xw(a,{extent:o,count:n});return Uu(t,{minMag:t.LINEAR,format:t.RGB,height:1,wrap:t.CLAMP_TO_EDGE},s,r)}else{if(Ct(a))return y0(a,t);throw new Error("Unknown scheme: "+i)}}}function VD(e,t="rgb",n,r){const i=hu(e,Pe(t)?t:t.type,Pe(t)?void 0:t.gamma),o=Xw(i);return Uu(n,{minMag:n.LINEAR,format:n.RGB,height:1,wrap:n.CLAMP_TO_EDGE},o,r)}function jD(e,t,n,r){const i=Math.max(e.length,n||0),o=new Float32Array(i);for(let a=0;a<i;a++)o[a]=e[a%e.length];return Uu(t,{minMag:t.NEAREST,format:t.RED,internalFormat:t.R32F,height:1},o,r)}function y0(e,t,n,r){const i=Kw(e,n);return Uu(t,{minMag:t.NEAREST,format:t.RGB,height:1},i,r)}function Xw(e,{extent:t=[0,1],reverse:n=!1,count:r=256}={}){const i=t[0],o=ys(t)-i,a=Za(r).map(s=>s/(r-1)).map(s=>i+s/o).map(e);return n&&a.reverse(),Kw(a)}function Kw(e,t){const n=Math.max(e.length,t||0),r=new Uint8Array(n*3);for(let i=0;i<n;i++){const o=Nr(e[i%e.length]).rgb();r[i*3+0]=o.r,r[i*3+1]=o.g,r[i*3+2]=o.b}return r}class $D{constructor(t,n,r){this._container=t,this._sizeSource=n??(()=>({width:void 0,height:void 0})),this._shaderCache=new Map,this.rangeTextures=new WeakMap;const i=document.createElement("canvas");t.appendChild(i);const o=SD(i,{antialias:!0,depth:!1,premultipliedAlpha:!0});if(!o)throw new Error("Unable to initialize WebGL. Your browser or machine may not support it.");if(!Lo(o))throw new Error("Your web browser does not support WebGL 2.0. Chrome, Firefox, and Safari Tech Preview should work.");if(Lw(o),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),this.canvas=i,this.gl=o,this._pickingAttachmentOptions=[{format:o.RGBA,type:o.UNSIGNED_BYTE,minMag:o.LINEAR,wrap:o.CLAMP_TO_EDGE}],this._pickingBufferInfo=wD(o,this._pickingAttachmentOptions),o.bindFramebuffer(o.FRAMEBUFFER,null),this.adjustGl(),this._updateDpr(),this._clearColor=[0,0,0,0],r){const a=Nr(r).rgb();this._clearColor=[a.r/255,a.g/255,a.b/255,a.opacity]}}invalidateSize(){this._logicalCanvasSize=void 0,this._updateDpr(),this.adjustGl()}_updateDpr(){this.dpr=window.devicePixelRatio}compileShader(t,n){const r="#version 300 es",i="precision mediump float;";Ct(n)&&(n=n.join(`

`));const o=this.gl,a=n.replaceAll(/ {2,}|^\s*\/\/.*$/gm,"");let s=this._shaderCache.get(a);if(!s){const f=[r,i,n].join(`

`);s=o.createShader(t),o.shaderSource(s,f),o.compileShader(s),this._shaderCache.set(a,s)}return s}adjustGl(){const t=this.getLogicalCanvasSize();this.canvas.style.width=`${t.width}px`,this.canvas.style.height=`${t.height}px`;const n=this.getPhysicalCanvasSize(t);this.canvas.width=n.width,this.canvas.height=n.height,xD(this.gl,this._pickingBufferInfo,this._pickingAttachmentOptions)}finalize(){this.canvas.remove()}getPhysicalCanvasSize(t){return t=t||this.getLogicalCanvasSize(),{width:t.width*this.dpr,height:t.height*this.dpr}}getLogicalCanvasSize(){if(this._logicalCanvasSize)return this._logicalCanvasSize;const t=this._sizeSource(),n=window.getComputedStyle(this._container,null),r=t.width??this._container.clientWidth-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight),i=t.height??this._container.clientHeight-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom);return this._logicalCanvasSize={width:r,height:i},this._logicalCanvasSize}readPickingPixel(t,n){const r=this.gl;t*=this.dpr,n*=this.dpr;const i=this.getPhysicalCanvasSize().height,o=new Uint8Array(4);return r.bindFramebuffer(r.FRAMEBUFFER,this._pickingBufferInfo.framebuffer),r.readPixels(t,i-n-1,1,1,r.RGBA,r.UNSIGNED_BYTE,o),r.bindFramebuffer(r.FRAMEBUFFER,null),o}clearAll(){const t=this.gl,{width:n,height:r}=this.getPhysicalCanvasSize();t.viewport(0,0,n,r),t.disable(t.SCISSOR_TEST),t.clearColor(...this._clearColor),t.clear(t.COLOR_BUFFER_BIT)}createRangeTexture(t,n=!1){const r=this.rangeTextures.get(t);if(!n&&r)return;function i(a,s){return zn(s.type)?s.domain().length:s.type=="threshold"?s.domain().length+1:s.type=="quantize"||s.type=="quantile"?a??4:a}const o=t.channel;if(Zr(o)){const a=t.scale,s=a.props,f=a.range();let l;if(s.scheme)if(a.type=="threshold"&&f)l=y0(f,this.gl,a.domain().length,r);else{let u=Pe(s.scheme)?void 0:s.scheme.count;u=i(u,a),l=HD(s.scheme,this.gl,u,r)}else cu(a.type)||yt(a.type)&&f.length>1?l=VD(f,s.interpolate,this.gl,r):l=y0(f,this.gl,a.domain().length,r);this.rangeTextures.set(t,l)}else{const a=t.scale;if(a.type==="ordinal"||Gi(a.type)){const s=Hu(o)?rx(o):l=>l,f=a.range();this.rangeTextures.set(t,jD(f.map(s),this.gl,a.domain().length,r))}}}}function qD(e,t="",n=0){const r=/ERROR:\s*\d+:(\d+)/gi,i=[...t.matchAll(r)],o=new Map(i.map((a,s)=>{const f=parseInt(a[1]),l=i[s+1],u=l?l.index:t.length,c=t.substring(a.index,u);return[f-1,c]}));return e.split(`
`).map((a,s)=>{const f=o.get(s);return`${s+1+n}: ${a}${f?`

^^^ ${f}`:""}`}).join(`
`)}function WD(e,t,n){const r=e.createProgram();e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r);function i(){let o,a;if(!e.getProgramParameter(r,e.LINK_STATUS)){o=e.getProgramInfoLog(r);for(const f of[t,n])e.getShaderParameter(f,e.COMPILE_STATUS)||(o=e.getShaderInfoLog(f),a=qD(e.getShaderSource(f),o,0)+`
Error compiling: ${o}`,e.deleteShader(f));e.deleteProgram(r)}if(o)return{message:o,detail:a}}return{program:r,getProgramErrors:i}}function Uu(e,t,n,r){return r?Jy(e,r,n,t):r=Hs(e,{...t,src:n}),r}function ZD(...e){const t={get(n,r,i){for(const o of e){const s=o()[r];if(s!==void 0)return s}},has(n,r,i){for(const o of e){const a=o();if(r in a)return!0}return!1}};return new Proxy({},t)}function YD(e){return Pe(e)||kt(e)||$a(e)}class Wi extends Error{constructor(t,n){super(t),this.name="ViewError",this.view=n}}const QD="SAMPLE_FACET_UNIFORM",Jw="SAMPLE_FACET_TEXTURE";class js{constructor(t){ee(this,br,[]);this.unitView=t,this.encoders=void 0,this.bufferInfo=void 0,this.programInfo=void 0,this.vertexArrayInfo=void 0,this.domainUniformInfo=void 0,this.viewUniformInfo=void 0,this.markUniformInfo=void 0,this.markUniformsAltered=!0,this.rangeMap=new XD,this.defaultProperties={get clip(){return["x","y"].map(n=>t.getScaleResolution(n)).some(n=>(n==null?void 0:n.isZoomable())??!1)},xOffset:0,yOffset:0,minBufferSize:0},this.properties=ZD(typeof this.unitView.spec.mark=="object"?()=>this.unitView.spec.mark:()=>({}),()=>this.defaultProperties)}get opaque(){return!1}getAttributes(){throw new Error("Not implemented!")}getSupportedChannels(){return["sample","facetIndex","x","y","color","opacity","search","uniqueId"]}getDefaultEncoding(){const t={sample:void 0,uniqueId:void 0};return this.isPickingParticipant()&&(t.uniqueId={field:"_uniqueId"}),t}fixEncoding(t){return t}get encoding(){return Nu(this,"encoding",()=>{var a;const t=this.getDefaultEncoding(),n=this.unitView.getEncoding(),r=s=>{const f=this.properties[s];return YD(f)||sr(f)?{value:f}:void 0},i=Object.fromEntries(this.getSupportedChannels().map(s=>[s,r(s)]).filter(s=>nn(s[1]))),o=this.fixEncoding({...t,...i,...n});for(const s of Object.keys(o))this.getSupportedChannels().includes(s)||delete o[s];return o.x&&((a=o.x).buildIndex??(a.buildIndex=!0)),o})}getContext(){return this.unitView.context}getType(){return this.unitView.getMarkType()}initializeData(){}initializeEncoders(){this.encoders=KD(this)}async initializeGraphics(){}updateGraphicsData(){}getSampleFacetMode(){if(this.encoders.facetIndex)return Jw;if(this.unitView.getLayoutAncestors().find(t=>"samples"in t.spec))return QD}createAndLinkShaders(t,n,r=[]){const i=this.getAttributes(),o="// view: "+this.unitView.getPathString();let a=[];const s=new Set,f=qw(this.encoders),l=this.getSampleFacetMode();l&&r.push(`#define ${l}`);const u=[];for(const y of i){let w;if(y in this.encoding)w=y;else continue;const A=this.encoding[w];if(A)if(nn(A))if(sr(A.value)){const{uniformName:S,uniformGlsl:_,scaleGlsl:T,adjuster:I}=BD(w);a.push(T),u.push(_),W(this,br).push(()=>{this.registerMarkUniformValue(S,A.value,I)})}else a.push(ID(w,A.value));else{const S=Wt(A)&&A.resolutionChannel||w,_=Zo(S)?this.unitView.getScaleResolution(S):null,T=Zi(A)?f.get([A.field,!0]):[w],I=DD(w,_,A,T!=null&&T.includes(w)?T:[w]);if(a.push(I.glsl),u.push(I.domainUniform),u.push(I.rangeUniform),s.add(I.attributeGlsl),I.rangeUniform&&W(this,br).push(()=>{const B=this.createMarkUniformSetter(I.rangeName),F=()=>B(Zw(_.scale,w));_.addEventListener("range",F),F()}),I.markUniformGlsl){if(!$s(A))throw new Error("Bug!");const B=this.encoders[w],F=B.indexer,G=Ou(B.scale.type)&&m0(B.scale.domain()),N=F||(G?$w:re=>+re);u.push(I.markUniformGlsl),W(this,br).push(()=>{this.registerMarkUniformValue(I.attributeName,A.datum,N)})}I.domainUniform&&W(this,br).push(()=>{const B=this.createMarkUniformSetter(I.domainUniformName),F=_.scale,M=()=>{const G=zn(F.type)?[0,F.domain().length]:F.domain();B(Ou(F.type)?PD(G):G)};_.addEventListener("domain",M),M()})}}const c=`precision highp float;
precision highp int;`,h=y=>y.replace("#pragma markUniforms",u.join(`
`));r=r.map(h),t=h(t),n=h(n);const d=[c,o,...r,Yw,LD,[...s].join(`
`),...a,ND,zD,t],p=[c,o,...r,Yw,UD,n],m=this.gl;this.programStatus=WD(m,this.glHelper.compileShader(m.VERTEX_SHADER,d),this.glHelper.compileShader(m.FRAGMENT_SHADER,p))}finalizeGraphicsInitialization(){const t=this.programStatus.getProgramErrors();if(t){t.detail&&console.warn(t.detail);const n=new Error("Cannot create shader program: "+t.message);throw n.view=this.unitView,n}this.programInfo=nD(this.gl,this.programStatus.program),delete this.programStatus,this.viewUniformInfo=Cw(this.gl,this.programInfo,"View"),this.markUniformInfo=Cw(this.gl,this.programInfo,"Mark"),this.gl.useProgram(this.programInfo.program),qo(this.programInfo,{uSampleFacet:[0,1,0,1],uTransitionOffset:0,uZero:0});for(const n of W(this,br))n();He(this,br,void 0)}createMarkUniformSetter(t){const n=this.markUniformInfo.setters[t];if(!n)throw new Error(`Uniform "${t}" not found int the Mark block!`);return r=>{n(r),this.markUniformsAltered=!0,this.unitView.context.animator.requestRender()}}registerMarkUniformValue(t,n,r=i=>i){const i=this.createMarkUniformSetter(t);if(sr(n)){const o=this.unitView.context.paramBroker.createExpression(n.expr),a=()=>i(r(o(null)));o.addListener(a),a()}else i(r(n))}deleteGraphicsData(){if(this.bufferInfo){const t=this.gl;for(let n=0;n<8;n++)t.disableVertexAttribArray(n);Object.values(this.bufferInfo.attribs).forEach(n=>this.gl.deleteBuffer(n.buffer)),this.bufferInfo.indices&&this.gl.deleteBuffer(this.bufferInfo.indices),this.bufferInfo=void 0}}updateBufferInfo(t){if(this.gl.bindVertexArray(null),this.bufferInfo&&t.vertexCount<=this.bufferInfo.allocatedVertices)for(const[n,r]of Object.entries(t.arrays))r.data&&g6(this.gl,this.bufferInfo.attribs[n],r.data,0);else this.deleteGraphicsData(),this.bufferInfo=y6(this.gl,t.arrays,{numElements:t.vertexCount}),this.bufferInfo.allocatedVertices=t.allocatedVertices,this.vertexArrayInfo=void 0}get glHelper(){return this.getContext().glHelper}get gl(){return this.glHelper.gl}onBeforeSampleAnimation(){}onAfterSampleAnimation(){}isReady(){return this.bufferInfo&&this.programInfo}isPickingParticipant(){if(this.properties.tooltip===null)return!1;for(const t of this.unitView.getLayoutAncestors())if(!t.isPickingSupported())return!1;return!0}bindOrSetMarkUniformBlock(){this.markUniformsAltered?(Tw(this.gl,this.programInfo,this.markUniformInfo),this.markUniformsAltered=!1):kw(this.gl,this.programInfo,this.markUniformInfo)}prepareRender(t){const n=this.glHelper,r=this.gl,i=[];i.push(()=>{this.vertexArrayInfo||(this.vertexArrayInfo=vD(this.gl,this.programInfo,this.bufferInfo)),r.useProgram(this.programInfo.program)});for(const[a,s]of Object.entries(this.encoding))if(Wt(s)){const f=Wt(s)&&s.resolutionChannel||a;if(Zo(f)){const l=this.unitView.getScaleResolution(f),u=n.rangeTextures.get(l);u&&i.push(()=>qo(this.programInfo,{[g0+a]:u}))}}this.getSampleFacetMode()==Jw&&i.push(()=>{let a;for(const s of this.unitView.getLayoutAncestors())if(a=s.getSampleFacetTexture(),a)break;if(!a)throw new Error("No facet texture available. This is bug.");qo(this.programInfo,{uSampleFacetTexture:a})});const o=(t.picking??!1)&&this.isPickingParticipant();return i.push(()=>$o(this.viewUniformInfo,{uViewOpacity:this.unitView.getEffectiveOpacity(),uPickingEnabled:o})),this.opaque||t.picking?i.push(()=>r.disable(r.BLEND)):i.push(()=>r.enable(r.BLEND)),i}prepareSampleFacetRendering(t){const n=t.sampleFacetRenderingOptions,r=this.programInfo.uniformSetters.uSampleFacet;if(n&&r){const i=n.locSize?n.locSize.location:0,o=n.locSize?n.locSize.size:1;if(i>1||i+o<0)return!1;const a=n.targetLocSize?n.targetLocSize.location:i,s=n.targetLocSize?n.targetLocSize.size:o;this.gl.uniform4f(r.location,i,o,a,s)}return!0}render(t){}createRenderCallback(t,n){var c;if(!this.bufferInfo)throw new Wi(`${this.getType()} mark has no data. This is bug.`,this.unitView);const r=this;let i;const o=(c=this.unitView.getScaleResolution("x"))==null?void 0:c.scale,a=o&&yt(o.type),s=["index","locus"].includes(o==null?void 0:o.type)?-1:0,f=[0,0];i=h=>{if(a&&h.xIndex){const d=o.domain(),p=h.xIndex(d[0]+s,d[1],f),m=p[0],y=p[1]-m;y>0&&t(m,y)}else t(h.offset,h.count)};const l=this.rangeMap.get(void 0).count==0?n.facetId:void 0,u=this.rangeMap.get(l);return n.sampleFacetRenderingOptions?function(){u.count&&r.prepareSampleFacetRendering(n)&&i(u)}:function(){u.count&&i(u)}}setViewport(t,n){t=t.flatten();const r=this.unitView.context.devicePixelRatio,i=this.gl,o=this.properties,a=this.glHelper.getLogicalCanvasSize(),s=.5,f=(o.xOffset??0)+s,l=(o.yOffset??0)+s;let u,c=t;if(o.clip!=="never"&&(o.clip||n)){let h=0,d=0,p;if(n){if(c=t.intersect(n).flatten(),!c.isDefined())return!1;p=[t.width/c.width,t.height/c.height],d=Math.max(0,t.y2-n.y2),h=Math.min(0,t.x-n.x)}else p=[1,1];const m=[c.x,a.height-c.y2,c.width,c.height].map(S=>S*r),y=m.map(S=>Math.round(S)),[w,A]=m.map((S,_)=>S-y[_]);i.viewport(...y),i.scissor(...y),i.enable(i.SCISSOR_TEST),u={uViewOffset:[(f+h+w/r)/c.width,-(l+d-A/r)/c.height],uViewScale:p}}else{if(!t.isDefined())return!1;i.viewport(0,0,a.width*r,a.height*r),i.disable(i.SCISSOR_TEST),u={uViewOffset:[(t.x+f)/a.width,(a.height-t.y-l-t.height)/a.height],uViewScale:[t.width/a.width,t.height/a.height]}}return $o(this.viewUniformInfo,{...u,uViewportSize:[t.width,t.height],uDevicePixelRatio:r}),Tw(this.gl,this.programInfo,this.viewUniformInfo),!0}findDatumAt(t,n){}}br=new WeakMap;class XD extends Tr{constructor(){super([],JSON.stringify)}get(t){let n=super.get(t);return n===void 0&&(n={offset:0,count:0,xIndex:void 0},super.set(t,n)),n}migrateEntries(t){for(const[n,r]of t.entries())Object.assign(this.get(n),r)}}function sr(e){return typeof e=="object"&&e!=null&&"expr"in e&&Pe(e.expr)}function KD(e,t){const n={};t||(t=e.encoding);for(const[r,i]of Object.entries(t)){if(!i)continue;const o=((Wt(i)&&i.resolutionChannel)??(Zo(r)&&r))||void 0,a=e.unitView.getScaleResolution(o);n[r]=JD(t[r],a==null?void 0:a.scale,e.unitView.getAccessor(r),r)}return n}function JD(e,t,n,r){let i;if(nn(e))if(sr(e.value))i=o=>{},i.constant=!0,i.constantValue=!1,i.accessor=n;else{const o=e.value;i=a=>o,i.constant=!0,i.constantValue=!0,i.accessor=void 0}else if(n)if(r=="text")i=o=>{},i.accessor=n,i.constant=n.constant;else{if(!t)if(!Zo(r))t=du();else throw new Error(`Missing scale! "${r}": ${JSON.stringify(e)}`);if(i=o=>t(n(o)),zn(t.type)){const o=NT();o.addAll(t.domain()),i.indexer=o}i.constant=n.constant,i.accessor=n,i.scale=t}else throw new Error(`Missing value or accessor (field, expr, datum) on channel "${r}": ${JSON.stringify(e)}`);return i.invert=t?o=>t.invert(o):o=>{throw new Error("No scale available, cannot invert: "+JSON.stringify(e))},i.channelDef=e,i.applyMetadata=o=>{for(const a in i)a in i&&(o[a]=i[a]);return o},i}function nn(e){return e&&"value"in e}function Zi(e){return e&&"field"in e}function $s(e){return e&&"datum"in e}function Wt(e){return Zi(e)||$s(e)||Gu(e)||ex(e)}function w0(e,t){const n=e.mark.encoding[t];if(Wt(n))return n;throw new Error("Not a channel def with scale!")}function ex(e){return e&&"chrom"in e}function Gu(e){return e&&"expr"in e}const Wo=["x","y"],eF=["x2","y2"],tF=[...Wo,...eF];function tx(e){return Wo.includes(e)}function qs(e){return tF.includes(e)}const x0={x:"x2",y:"y2"},nx=Object.fromEntries(Object.entries(x0).map(e=>[e[1],e[0]]));function Ws(e){return e in nx}function nF(e){const t=x0[e];if(t)return t;throw new Error(`${e} has no secondary channel!`)}function Yi(e){return nx[e]??e}function Zr(e){return["color","fill","stroke"].includes(Yi(e))}function Hu(e){return["shape","squeeze"].includes(e)}function Zo(e){return["x","y","x2","y2","color","fill","stroke","opacity","fillOpacity","strokeOpacity","strokeWidth","size","shape","angle","dx","dy","sample"].includes(e)}function rF(e){switch(e){case"shape":return["circle","square","cross","diamond","triangle-up","triangle-right","triangle-down","triangle-left","tick-up","tick-right","tick-down","tick-left"]}}function rx(e){if(!Hu(e))throw new Error("Not a discrete channel: "+e);const t=new Map(rF(e).map((n,r)=>[n,r]));return n=>{const r=t.get(n);if(r!==void 0)return r;throw new Error(`Invalid value for "${e}" channel: ${n}`)}}function Re(e,t=e){if(/^[A-Za-z0-9_]+$/.test(e)){const n=new Function("datum",`return datum[${JSON.stringify(e)}]`);return ke(n,[e],t)}else return Af(e)}class iF{constructor(){this.accessorCreators=[],this.register(t=>{if(Zi(t))try{const n=Re(t.field);return n.constant=!1,n.fields=vf(n),n}catch(n){throw new Error(`Invalid field definition: ${n.message}`)}}),this.register(t=>Gu(t)?oF(t.expr):void 0),this.register(t=>{if($s(t)){const r=y3(t.datum);return r.constant=!0,r.fields=[],r}})}register(t){this.accessorCreators.push(t)}createAccessor(t){for(const n of this.accessorCreators){const r=n(t);if(r)return r}}}function oF(e){const n=Qf(e);return n.constant=n.fields.length==0,n}const aF=`out lowp vec4 vFillColor;
out lowp vec4 vStrokeColor;
out float vHalfStrokeWidth;
out vec4 vCornerRadii;

#if defined(ROUNDED_CORNERS) || defined(STROKED)
/** Position for SDF-strokes */
out vec2 vPosInPixels;
#endif

/** Size of the rect in pixels */
out vec2 vHalfSizeInPixels;

/**
 * Clamps the minimumSize and returns an opacity that reflects the amount of clamping.
 */
float clampMinSize(inout float pos, float frac, float size, float minSize) {
    if (minSize > 0.0 && abs(size) < minSize) {
        pos += (frac - 0.5) * (minSize * sign(size) - size);
        return abs(size) / minSize;
    }

    return 1.0;
}

void sort(inout float a, inout float b) {
    if (a > b) {
        float tmp = b;
        b = a;
        a = tmp;
    }
}

/**
 * The vertex position wrt the rectangle specified by (x, x2, y, y2).
 * [0, 0] = [x, y], [1, 1] = [x2, y2]. 
 * The x or y component may contain fractional values if the rectangle 
 * have been tessellated.
 */
vec2 getVertexPos() {
    int index = gl_VertexID % 6;
    return vec2(
        index == 0 || index == 1 || index == 3 ? 0.0 : 1.0,
        index == 0 || index == 1 || index == 2 ? 0.0 : 1.0
    );
    
}

void main(void) {
    vec2 frac = getVertexPos();

    vec2 normalizedMinSize = vec2(uMinWidth, uMinHeight) / uViewportSize;
    vec4 cornerRadii = vec4(
        uCornerRadiusTopRight,
        uCornerRadiusBottomRight,
        uCornerRadiusBottomLeft,
        uCornerRadiusTopLeft
    );

    float x = getScaled_x();
    float x2 = getScaled_x2();
    float y = getScaled_y();
    float y2 = getScaled_y2();

    sort(x, x2);
    sort(y, y2);

    // Clamp x to prevent precision artifacts when the scale is zoomed very close.
	// TODO: clamp y as well
	float clampMargin = 1.0;
    vec2 pos1 = vec2(clamp(x, 0.0 - clampMargin, 1.0 + clampMargin), y);
    vec2 pos2 = vec2(clamp(x2, 0.0 - clampMargin, 1.0 + clampMargin), y2);

    vec2 size = pos2 - pos1;

    if (size.x <= 0.0 || size.y <= 0.0) {
        // Early exit. May increase performance or not...
        gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
        return;
    }

    vec2 pos = pos1 + frac * size;

    size.y *= getSampleFacetHeight(pos);

    // Clamp to minimum size, optionally compensate with opacity
    float opaFactor = uViewOpacity * max(uMinOpacity,
        clampMinSize(pos.x, frac.x, size.x, normalizedMinSize.x) *
        clampMinSize(pos.y, frac.y, size.y, normalizedMinSize.y));

    pos = applySampleFacet(pos);

#if defined(ROUNDED_CORNERS) || defined(STROKED)
    // Add an extra pixel to stroke width to accommodate edge antialiasing
    float aaPadding = 1.0 / uDevicePixelRatio;
    float strokeWidth = getScaled_strokeWidth();
    float strokeOpacity = getScaled_strokeOpacity() * opaFactor;

    vec2 centeredFrac = frac - 0.5;
    vec2 expand = centeredFrac * (strokeWidth + aaPadding) / uViewportSize;
    pos += expand;

    vec2 sizeInPixels = size * uViewportSize;
    vPosInPixels = (centeredFrac + expand / size) * sizeInPixels;

    vHalfSizeInPixels = sizeInPixels / 2.0;

    vCornerRadii = min(cornerRadii, min(vHalfSizeInPixels.x, vHalfSizeInPixels.y));
    vHalfStrokeWidth = strokeWidth / 2.0;
    vStrokeColor = vec4(getScaled_stroke() * strokeOpacity, strokeOpacity);
#endif

    gl_Position = unitToNdc(pos);

    float fillOpacity = getScaled_fillOpacity() * opaFactor;
    vFillColor = vec4(getScaled_fill() * fillOpacity, fillOpacity);

    setupPicking();
}
`,sF=`#if defined(ROUNDED_CORNERS) || defined(STROKED)
in vec2 vPosInPixels;
#endif

in vec2 vHalfSizeInPixels;

in lowp vec4 vFillColor;
in lowp vec4 vStrokeColor;
in float vHalfStrokeWidth;
in vec4 vCornerRadii;

out lowp vec4 fragColor;

// Source: https://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
float sdRoundedBox(vec2 p, vec2 b, vec4 r) {
    r.xy = p.x > 0.0 ? r.xy : r.zw;
    r.x  = p.y > 0.0 ? r.x  : r.y;
    vec2 q = abs(p) - b + r.x;
    return min(max(q.x, q.y), 0.0) + length(max(q, 0.0)) - r.x;
}

// Not a true SDF. Makes the corners of strokes sharp and is faster.
float sdSharpBox(vec2 p, vec2 b) {
    vec2 q = abs(p) - b;
    return max(q.x, q.y);
}

void main(void) {

#if defined(ROUNDED_CORNERS) || defined(STROKED)
#ifdef ROUNDED_CORNERS
    // Distance from rectangle's edge in pixels. Negative inside the rectangle.
    float d = sdRoundedBox(vPosInPixels, vHalfSizeInPixels, vCornerRadii);
#else
    float d = sdSharpBox(vPosInPixels, vHalfSizeInPixels);
#endif

    fragColor = distanceToColor(d, vFillColor, vStrokeColor, vHalfStrokeWidth);

    if (fragColor.a == 0.0) {
        discard;
    }
#else
    // The trivial, non-decorated case
    fragColor = vFillColor;
#endif

    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
}
`,lF=`layout(std140) uniform Mark {
    /** Minimum size (width, height) of the displayed rectangle in pixels */
    uniform float uMinWidth;
    uniform float uMinHeight;

    /** Minimum opacity for the size clamping */
    uniform float uMinOpacity;

    uniform float uCornerRadiusTopRight;
    uniform float uCornerRadiusBottomRight;
    uniform float uCornerRadiusTopLeft;
    uniform float uCornerRadiusBottomLeft;

#pragma markUniforms
};
`,ix=1e4;class fF{constructor(t){ee(this,Yc);ee(this,Qc);ee(this,Yl,!1);this.size=t,this.arrays={},this.pushers=[],this.dataUpdaters=[],this.vertexCount=0}configure(){if(W(this,Yl))throw new Error("Already configured!");J(this,Yc,WS).call(this),J(this,Qc,ZS).call(this),He(this,Yl,!0)}addConverter(t,n){const r=this.createUpdater(Nw+t,n.numComponents||1,n.targetArrayType??Float32Array,n.arrayReference),i=n.f;this.dataUpdaters.push(n.arrayReference?o=>r(i(o)):o=>r(i(o)))}createUpdater(t,n,r=Float32Array,i=void 0){if(!kt(this.size))throw new Error("The number of vertices must be defined!");let o,a,s=0;const f=new r(this.size*n);if(this.arrays[t]={data:f,numComponents:n},n==1){let l=0;const u=c=>{l=+c};o=()=>{f[s++]=l},a=u}else{let l=i??[0];const u=i?c=>{}:c=>{l=c};switch(n){case 1:break;case 2:o=()=>{f[s++]=l[0],f[s++]=l[1]},a=u;break;case 3:o=()=>{f[s++]=l[0],f[s++]=l[1],f[s++]=l[2]},a=u;break;case 4:o=()=>{f[s++]=l[0],f[s++]=l[1],f[s++]=l[2],f[s++]=l[3]},a=u;break;default:throw new Error("Invalid numComponents: "+n)}}return this.pushers.push(o),a}pushAll(){throw new Error("Call configure() first!")}updateFromDatum(t){throw new Error("Call configure() first!")}pushFromDatum(t){this.updateFromDatum(t),this.pushAll()}}Yl=new WeakMap,Yc=new WeakSet,WS=function(){if(this.size>ix){const t=this.pushers.map((r,i)=>`const p${i} = that.pushers[${i}];`).join(`
`),n=this.pushers.map((r,i)=>`  p${i}();`).join(`
`);this.pushAll=new Function("that",`${t}
return function unrolledPushAll() {
${n}
  that.vertexCount++;
};`)(this)}else this.pushAll=()=>{for(let t=0;t<this.pushers.length;t++)this.pushers[t]();this.vertexCount++}},Qc=new WeakSet,ZS=function(){if(this.size>ix){const t=this.dataUpdaters.map((r,i)=>`const u${i} = that.dataUpdaters[${i}];`).join(`
`),n=this.dataUpdaters.map((r,i)=>`  u${i}(datum);`).join(`
`);this.updateFromDatum=new Function("that","datum",`${t}
return function unrolledUpdateFromDatum(datum) {
${n}
};`)(this)}else this.updateFromDatum=t=>{for(let n=0;n<this.dataUpdaters.length;n++)this.dataUpdaters[n](t)}};const Yo=5,v0=127;function A0(e){const t=[];for(let p=0;p<=v0;p++)t.push(void 0);const n=new Map;for(const p of e.chars)p.id<=v0?t[p.id]=p:n.set(p.id,p);const r=8722;n.has(r)||n.set(r,t["-".charCodeAt(0)]);function i(p){return(p<=v0?t[p]:n.get(p))||t[63]}function o(p){return i(p.charCodeAt(0))}const a=e.common.base,s=o("x"),f=o("X"),l=o("q"),u=s.height-Yo*2,c=f.height-Yo*2,h=l.height-s.height+l.yoffset-s.yoffset;function d(p,m=1){let y=0;for(let w=0;w<p.length;w++)y+=i(p.charCodeAt(w)).xadvance;return y/a*m}return{measureWidth:d,getCharByCode:i,getChar:o,xHeight:u,capHeight:c,descent:h,common:e.common}}const ox=2**31-1,uF=-(2**31);function cF(e,t,n,r=n){const i=new Array(e);i.fill(ox);let o=uF,a=-1/0,s=!1;const f=new Array(e);f.fill(0);const l=t[0],c=(t[1]-t[0])/e,h=(w,A)=>{const S=(w-l)/c,_=Math.floor(S);return Cs(A&&_==S?_-1:_,0,e-1)};function d(w,A,S){if(s)return;if(A>o)o=A;else{s=!0,console.debug("Items are not ordered properly. Disabling binned index.");return}const _=n(w);if(_<a){s=!0,console.debug("Items are not ordered properly. Disabling binned index.");return}a=_;const T=h(_,!1);i[T]>A&&(i[T]=A),f[T]<S&&(f[T]=S)}function p(w,A,S){if(s)return;if(A>o)o=A;else{s=!0,console.debug("Items (vertices) are not ordered properly. Disabling binned index.");return}const _=n(w),T=r(w);if(_<a){s=!0,console.debug("Items are not ordered properly. Disabling binned index.");return}else if(T<_){s=!0,console.debug("End index is less than start index. Disabling binned index. Datum: ",w);return}a=_;const I=h(_,!1),B=h(T,!0);for(let F=I;F<=B;F++)i[F]>A&&(i[F]=A),f[F]<S&&(f[F]=S)}const m=(w,A,S=[0,0])=>{const _=h(w,!1),T=h(A,!0),I=i[_],B=Math.max(f[T],I);return S[0]=I,S[1]=B,S},y=()=>{if(s)return;for(let A=1;A<f.length;A++)f[A]<f[A-1]&&(f[A]=f[A-1]);let w=!0;for(let A=i.length-1;A>0;A--)w&&i[A]==ox?(i[A]=f[A],w=!1):i[A-1]>i[A]&&(i[A-1]=i[A]);return m};return d.getIndex=y,p.getIndex=y,n==r?d:p}class Zs{constructor({encoders:t,numVertices:n=void 0,attributes:r=[]}){this.encoders=t,this.variableEncoders=Object.fromEntries(Object.entries(t).filter(([o,a])=>r.includes(o)&&a&&a.scale&&!a.constant));const i=[...qw(t).entries()].filter(([o,a])=>o[1]&&a.length>1).map(([o,a])=>a);this.allocatedVertices=n,this.variableBuilder=new fF(n);for(const[o,a]of Object.entries(this.variableEncoders)){const s=i.find(m=>m.find(y=>y==o));if(s&&o!=s[0])continue;const f=a.accessor,l=Ou(a.scale.type),u=l&&m0(a.scale.domain()),c=[0,0],h=a.indexer,d=h?m=>h(f(m)):u?m=>$w(f(m),c):f,p=s?Ww(s):o;this.variableBuilder.addConverter(p,{f:d,numComponents:u?2:1,arrayReference:u?c:void 0,targetArrayType:zn(a.scale.type)?Uint16Array:l?Uint32Array:Float32Array})}this.lastOffset=0,this.rangeMap=new Tr([],JSON.stringify)}registerBatch(t){var o;const n=this.lastOffset,r=this.variableBuilder.vertexCount,i=r-n;i&&this.rangeMap.set(t,{offset:n,count:i,xIndex:(o=this.xIndexer)==null?void 0:o.getIndex()}),this.lastOffset=r}addBatches(t){for(const[n,r]of t)this.addBatch(n,r)}addBatch(t,n,r=0,i=n.length){this.prepareXIndexer(n,r,i);for(let o=r;o<i;o++){const a=n[o];this.variableBuilder.pushFromDatum(a),this.addToXIndex(a)}this.registerBatch(t)}prepareXIndexer(t,n=0,r=n+t.length){var l;const i=()=>{this.addToXIndex=u=>{},this.xIndexer=void 0},o=(l=this.encoders.x)==null?void 0:l.channelDef;if(!("buildIndex"in o)||!o.buildIndex||!t.length||r-n<0){i();return}const a=u=>{var c;return u&&yt((c=u.scale)==null?void 0:c.type)&&u},s=a(this.variableEncoders.x),f=a(this.variableEncoders.x2);if(s){const u=s.accessor,c=f?f.accessor:u,h=[u(t[n]),c(t[r-1])];if(h[1]>h[0]){this.xIndexer=cF(50,h,u,c);let d=this.variableBuilder.vertexCount;this.addToXIndex=p=>{let m=this.variableBuilder.vertexCount;this.xIndexer(p,d,m),d=m}}else i()}else i()}addToXIndex(t){}toArrays(){return{arrays:this.variableBuilder.arrays,vertexCount:this.variableBuilder.vertexCount,allocatedVertices:this.allocatedVertices,rangeMap:this.rangeMap}}}class hF extends Zs{constructor({encoders:t,attributes:n,numItems:r}){super({encoders:t,attributes:n,numVertices:r*6}),this.variableBuilder.configure();const i=this.variableBuilder.pushAll;this.pushAllSixTimes=r>500?new Function("pushAll",`return function unrolledPushAllSixTimes() {
  pushAll(); pushAll(); pushAll(); pushAll(); pushAll(); pushAll();
};`)(i):function(){i(),i(),i(),i(),i(),i()}}addBatch(t,n,r=0,i=n.length){if(!(i<=r)){this.prepareXIndexer(n,r,i);for(let o=r;o<i;o++){const a=n[o];this.variableBuilder.updateFromDatum(a),this.pushAllSixTimes(),this.addToXIndex(a)}this.registerBatch(t)}}}class dF extends Zs{constructor({encoders:t,attributes:n,tessellationThreshold:r=1/0,visibleRange:i=[-1/0,1/0],numItems:o}){super({encoders:t,attributes:n,numVertices:r==1/0?o*6:void 0}),this.visibleRange=i,this.tessellationThreshold=r||1/0,this.updateSide=this.variableBuilder.createUpdater("side",1),this.updatePos=this.variableBuilder.createUpdater("pos",1),this.variableBuilder.configure()}addBatch(t,n,r=0,i=n.length){this.prepareXIndexer(n,r,i);for(let o=r;o<i;o++){const a=n[o];this.variableBuilder.updateFromDatum(a),this.updateSide(-.5),this.updatePos(0),this.variableBuilder.pushAll();const s=1;for(let f=0;f<=s;f++)this.updatePos(f/s),this.updateSide(-.5),this.variableBuilder.pushAll(),this.updateSide(.5),this.variableBuilder.pushAll();this.variableBuilder.pushAll(),this.addToXIndex(a)}this.registerBatch(t)}}class pF extends Zs{constructor({encoders:t,attributes:n,numItems:r=void 0}){super({encoders:t,attributes:n,numVertices:r}),this.variableBuilder.configure()}}class gF extends Zs{constructor({encoders:t,attributes:n,numItems:r=void 0}){super({encoders:t,attributes:n,numVertices:r}),this.variableBuilder.configure()}toArrays(){const t=this.variableBuilder.arrays;for(let n of Object.values(t))n.divisor=1;return super.toArrays()}}class mF extends Zs{constructor({encoders:t,attributes:n,fontMetrics:r,properties:i,numCharacters:o=void 0}){super({encoders:t,attributes:n,numVertices:o*6}),this.metadata=r,this.metrics=r,this.properties=i;const s=t.text.channelDef;this.numberFormat=!nn(s)&&"format"in s&&s.format?mt(s.format):f=>f,this.updateVertexCoord=this.variableBuilder.createUpdater("vertexCoord",2),this.updateTextureCoord=this.variableBuilder.createUpdater("textureCoord",2),this.updateWidth=this.variableBuilder.createUpdater("width",1),this.variableBuilder.configure()}addBatch(t,n,r=0,i=n.length){const o=this.properties.align||"left",a=this.properties.logoLetters??!1,s=this.metadata.common.base,f=this.metadata.common.scaleH;let l=-Yo;switch(this.properties.baseline){case"top":l+=this.metrics.capHeight;break;case"middle":l+=this.metrics.capHeight/2;break;case"bottom":l-=this.metrics.descent;break}const u=this.encoders.text.accessor||this.encoders.text,c=[0,0];this.updateVertexCoord(c);const h=[0,0];this.updateTextureCoord(h),this.prepareXIndexer(n,r,i);for(let d=r;d<i;d++){const p=n[d],m=this.numberFormat(u(p)),y=Pe(m)?m:m===null?"":""+m;if(y.length==0)continue;this.variableBuilder.updateFromDatum(p);const w=a?y.length:this.metrics.measureWidth(y);this.updateWidth(w);let A=o=="right"?-w:o=="center"?-w/2:0;if(!a){const I=this.metrics.getCharByCode(y.charCodeAt(0));A-=(I.width-I.xadvance)/s/2}let S=-.5,_=1,T=1;for(let I=0;I<y.length;I++){const B=this.metrics.getCharByCode(y.charCodeAt(I)),F=a?1:B.xadvance/s;if(B.id==32){A+=F;continue}a?(T=(B.width+Yo*2)/B.width,A=-T/2,_=(B.height+Yo*2)/B.height,S=-.5-Yo/B.height):(_=B.height/s,S=-(B.height+B.yoffset+l)/s,T=B.width/s);const M=B.x,G=B.y;c[0]=A,c[1]=S+_,h[0]=M/f,h[1]=G/f,this.variableBuilder.pushAll(),c[0]=A+T,c[1]=S+_,h[0]=(M+B.width)/f,h[1]=G/f,this.variableBuilder.pushAll(),c[0]=A,c[1]=S,h[0]=M/f,h[1]=(G+B.height)/f,this.variableBuilder.pushAll(),c[0]=A+T,c[1]=S+_,h[0]=(M+B.width)/f,h[1]=G/f,this.variableBuilder.pushAll(),c[0]=A,c[1]=S,h[0]=M/f,h[1]=(G+B.height)/f,this.variableBuilder.pushAll(),c[0]=A+T,c[1]=S,h[0]=(M+B.width)/f,h[1]=(G+B.height)/f,this.variableBuilder.pushAll(),A+=F}this.addToXIndex(p)}this.registerBatch(t)}}function E0(e,t){const n=nF(t);let r=e[t]&&{...e[t]},i=e[n]&&{...e[n]};if(!(nn(r)||nn(i))){if(r){if(!Wt(e[t]))return;if(i){if(r.type!="quantitative"){const o=(1-(r.band||1))/2;r.band=o,i.band=-o}}else if(r.type=="quantitative")i={datum:0};else{i={...r};const o=(1-(r.band??1))/2;r.band=0+o,i.band=1-o}}else r={value:0},i={value:1};e[t]=r,e[n]=i}}function ax(e,t){e.stroke||(t?e.stroke={value:null}:e.stroke={resolutionChannel:"color",...e.color}),nn(e.stroke)&&e.stroke.value===null&&(e.strokeWidth={value:0}),e.strokeOpacity||(e.strokeOpacity={resolutionChannel:"opacity",...e.opacity})}function sx(e,t){nn(e.fill)&&e.fill.value===null?e.fillOpacity={value:0}:e.fill||(e.fill={resolutionChannel:"color",...e.color},!t&&!e.fillOpacity&&(e.fillOpacity={value:0})),e.fillOpacity||(t?e.fillOpacity={resolutionChannel:"opacity",...e.opacity}:e.fillOpacity={value:0})}class bF extends js{constructor(n){super(n);ee(this,Ql);ee(this,Xl);Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x2:void 0,y2:void 0,filled:!0,color:"#4c78a8",opacity:1,strokeWidth:3,cornerRadius:0,minWidth:.5,minHeight:.5,minOpacity:1,tessellationZoomThreshold:10,tessellationTiles:35}))}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","fill","stroke","fillOpacity","strokeOpacity","strokeWidth"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","fill","stroke","fillOpacity","strokeOpacity","strokeWidth"]}get opaque(){return Nu(this,"opaque",()=>!J(this,Ql,sm).call(this)&&!J(this,Xl,lm).call(this)&&nn(this.encoding.fillOpacity)&&this.encoding.fillOpacity.value==1&&this.properties.minOpacity==1)&&this.unitView.getEffectiveOpacity()==1}fixEncoding(n){return E0(n,"x"),E0(n,"y"),ax(n,this.properties.filled),sx(n,this.properties.filled),delete n.color,delete n.opacity,n}onBeforeSampleAnimation(){}onAfterSampleAnimation(){}async initializeGraphics(){await super.initializeGraphics();const n=[];J(this,Ql,sm).call(this)&&n.push("ROUNDED_CORNERS"),J(this,Xl,lm).call(this)&&n.push("STROKED"),this.createAndLinkShaders(aF,sF,[lF,...n.map(r=>"#define "+r)])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const n=this.properties;this.registerMarkUniformValue("uMinWidth",n.minWidth),this.registerMarkUniformValue("uMinHeight",n.minHeight),this.registerMarkUniformValue("uMinOpacity",n.minOpacity),this.registerMarkUniformValue("uCornerRadiusTopRight",n.cornerRadiusTopRight??n.cornerRadius??0),this.registerMarkUniformValue("uCornerRadiusBottomRight",n.cornerRadiusBottomRight??n.cornerRadius??0),this.registerMarkUniformValue("uCornerRadiusTopLeft",n.cornerRadiusTopLeft??n.cornerRadius??0),this.registerMarkUniformValue("uCornerRadiusBottomLeft",n.cornerRadiusBottomLeft??n.cornerRadius??0)}updateGraphicsData(){const n=this.unitView.getCollector(),r=n.getItemCount(),i=new hF({encoders:this.encoders,attributes:this.getAttributes(),numItems:r});i.addBatches(n.facetBatches);const o=i.toArrays();this.rangeMap.migrateEntries(o.rangeMap),this.updateBufferInfo(o)}prepareRender(n){const r=super.prepareRender(n);return r.push(()=>this.bindOrSetMarkUniformBlock()),r.push(()=>ji(this.gl,this.programInfo,this.vertexArrayInfo)),r}render(n){const r=this.gl;return this.createRenderCallback((i,o)=>{Mu(r,this.vertexArrayInfo,r.TRIANGLE_STRIP,o,i)},n)}findDatumAt(n,r){n=Ot(n);const i=this.unitView.getCollector().facetBatches.get(n);if(!i)return;const o=this.encoders,a=o.x.scale.type;if(zn(a)){const s=o.x.accessor;return i.find(f=>r==s(f))}else{const s=o.x.accessor,f=o.x2.accessor;return i.find(l=>r>=s(l)&&r<f(l))}}}Ql=new WeakSet,sm=function(){const n=this.properties;return n.cornerRadius||n.cornerRadiusBottomLeft||n.cornerRadiusBottomRight||n.cornerRadiusTopLeft||n.cornerRadiusTopRight},Xl=new WeakSet,lm=function(){const n=this.encoding.strokeWidth;return!(nn(n)&&!n.value)};const yF=`out float vRadius;
out float vRadiusWithPadding;
out lowp vec4 vFillColor;
out lowp vec4 vStrokeColor;
out lowp float vShape;
out lowp float vHalfStrokeWidth;
out mat2 vRotationMatrix;

// Copypaste from fragment shader
const float CIRCLE = 0.0;
const float SQUARE = 1.0;
const float CROSS = 2.0;
const float DIAMOND = 3.0;
const float TRIANGLE_UP = 4.0;
const float TRIANGLE_RIGHT = 5.0;
const float TRIANGLE_DOWN = 6.0;
const float TRIANGLE_LEFT = 7.0;
const float TICK_UP = 8.0;
const float TICK_RIGHT = 9.0;
const float TICK_DOWN = 10.0;
const float TICK_LEFT = 11.0;

float computeSemanticThresholdFactor() {
    // TODO: add smooth transition
    return getScaled_semanticScore() >= uSemanticThreshold ? 1.0 : 0.0;
}

/**
 * Computes a scaling factor for the points in a sample-faceted view.
 */
float getDownscaleFactor(vec2 pos) {
    if (!isFacetedSamples()) {
        return 1.0;
    }

    float sampleFacetHeight = getSampleFacetHeight(pos);
    float maxPointDiameter = sqrt(uMaxPointSize);

    float factor = sampleFacetHeight *
        uViewportSize.y *
        uMaxRelativePointDiameter;

    return clamp(0.0, maxPointDiameter, factor) / maxPointDiameter;
}

// TODO: Move this into common.glsl or something
vec2 getDxDy() {
#if defined(dx_DEFINED) || defined(dy_DEFINED)
    return vec2(getScaled_dx(), getScaled_dy()) / uViewportSize;
#else
    return vec2(0.0, 0.0);
#endif
}

void main(void) {
    float shapeAngle = 0.0;

    float semanticThresholdFactor = computeSemanticThresholdFactor();
    if (semanticThresholdFactor <= 0.0) {
        gl_PointSize = 0.0;
        // Place the vertex outside the viewport. The default (0, 0) makes this super-slow
        // on Apple Silicon. Probably related to the tile-based GPU architecture.
        gl_Position = vec4(100.0, 0.0, 0.0, 0.0);
        // Exit early. MAY prevent some unnecessary calculations.
        return;
    }

    float size = getScaled_size();
    vec2 pos = vec2(getScaled_x(), getScaled_y()) + getDxDy();

    gl_Position = unitToNdc(applySampleFacet(pos));

    float strokeWidth = getScaled_strokeWidth();

    float diameter = sqrt(size) *
        uScaleFactor *
        semanticThresholdFactor *
        getDownscaleFactor(pos);

    // Clamp minimum size and adjust opacity instead. Yields more pleasing result,
    // no flickering etc.
    float opacity = uViewOpacity;
	if (strokeWidth <= 0.0 || uInwardStroke) {
		float minDiameter = 1.0 / uDevicePixelRatio;
		if (diameter < minDiameter) {
			// We do some "cheap" gamma correction here. It breaks on dark background, though.
			// First we take a square of the size and then apply "gamma" of 1.5.
			opacity *= pow(diameter / minDiameter, 2.5);
			diameter = minDiameter;
		}
	}

	float fillOpa = getScaled_fillOpacity() * opacity;
	float strokeOpa = getScaled_strokeOpacity() * opacity;

    vShape = getScaled_shape();

	// Circle doesn't have sharp corners. Do some special optimizations to minimize the point size.
	bool circle = vShape == 0.0;

    if (vShape > TICK_UP && vShape <= TICK_LEFT) {
        shapeAngle = (vShape - TICK_UP) * 90.0;
        vShape = TICK_UP;
    } else if (vShape > TRIANGLE_UP && vShape <= TRIANGLE_LEFT) {
        shapeAngle = (vShape - TRIANGLE_UP) * 90.0;
        vShape = TRIANGLE_UP;
    }

	float angleInDegrees = getScaled_angle();
	float angle = -(shapeAngle + angleInDegrees) * PI / 180.0;
    float sinTheta = sin(angle);
    float cosTheta = cos(angle);
    vRotationMatrix = mat2(cosTheta, sinTheta, -sinTheta, cosTheta);

    // Not needed if we would draw rotated quads instead of gl.POINTS
	float roomForRotation = circle ? 1.0 : sin(mod(angle, PI / 2.0) + PI / 4.0) / sin(PI / 4.0);

	float aaPadding = 1.0 / uDevicePixelRatio;
	float rotationPadding = (diameter * roomForRotation) - diameter;
	// sqrt(3.0) ensures that the angles of equilateral triangles have enough room
	float strokePadding = uInwardStroke ? 0.0 : strokeWidth * (circle ? 1.0 : sqrt(3.0));
	float padding = rotationPadding + strokePadding + aaPadding;
    gl_PointSize = (diameter + padding) * uDevicePixelRatio;

	vRadius = diameter / 2.0;
	vRadiusWithPadding = vRadius + padding / 2.0;

    vHalfStrokeWidth = strokeWidth / 2.0;

    vFillColor = vec4(getScaled_fill() * fillOpa, fillOpa);
    vStrokeColor = vec4(getScaled_stroke() * strokeOpa, strokeOpa);

    setupPicking();
}
`,wF=`const lowp vec4 white = vec4(1.0);
const lowp vec4 black = vec4(0.0, 0.0, 0.0, 1.0);

in float vRadius;
in float vRadiusWithPadding;

in lowp vec4 vFillColor;
in lowp vec4 vStrokeColor;
in lowp float vShape;
in lowp float vHalfStrokeWidth;

in mat2 vRotationMatrix;

out lowp vec4 fragColor;

// Copypaste from vertex shader
const float CIRCLE = 0.0;
const float SQUARE = 1.0;
const float CROSS = 2.0;
const float DIAMOND = 3.0;
const float TRIANGLE_UP = 4.0;
const float TICK_UP = 8.0;

// The distance functions are inspired by:
// http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
// However, these are not true distance functions, because the corners need to be sharp.

float circle(vec2 p, float r) {
    return length(p) - r;
}

float square(vec2 p, float r) {
    p = abs(p);
    return max(p.x, p.y) - r;
}

float tickUp(vec2 p, float r) {
    float halfR = r * 0.5;
    p.y += halfR;
    p = abs(p);
    return max(p.x - r * 0.15, p.y - halfR);
}

float equilateralTriangle(vec2 p, float r) {
    p.y = -p.y;
    float k = sqrt(3.0);
    float kr = k * r;
    p.y -= kr / 2.0;
    return max((abs(p.x) * k + p.y) / 2.0, -p.y - kr);
}

float crossShape(vec2 p, float r) {
    p = abs(p);

	vec2 b = vec2(0.4, 1.0) * r;
    vec2 v = abs(p) - b.xy;
    vec2 h = abs(p) - b.yx;
    return min(max(v.x, v.y), max(h.x, h.y));
}

float diamond(vec2 p, float r) {
    p = abs(p);
    return (max(abs(p.x - p.y), abs(p.x + p.y)) - r) / sqrt(2.0);
}

void main() {
    float d;

	/** Normalized point coord */
    vec2 p = vRotationMatrix * (2.0 * gl_PointCoord - 1.0) * vRadiusWithPadding;
	float r = vRadius;

    // We could also use textures here. Could even be faster, because we have plenty of branching here.
    if (vShape == CIRCLE) {
        d = circle(p, r);

    } else if (vShape == SQUARE) {
        d = square(p, r);

    } else if (vShape == CROSS) {
        d = crossShape(p, r);

    } else if (vShape == DIAMOND) {
        d = diamond(p, r);

    } else if (vShape == TRIANGLE_UP) {
        d = equilateralTriangle(p, r);

    } else if (vShape == TICK_UP) {
        d = tickUp(p, r);

    } else {
        d = 0.0;
    }

	if (!uPickingEnabled) {
		lowp vec4 fillColor = mix(vFillColor, white, -d * uGradientStrength / vRadius);

		fragColor = distanceToColor(
			d + (uInwardStroke ? vHalfStrokeWidth : 0.0),
			fillColor,
			vStrokeColor,
			vHalfStrokeWidth);

	} else if (d - vHalfStrokeWidth <= 0.0) {
        fragColor = vPickingColor;

	} else {
		discard;
    }
}

`,xF=`layout(std140) uniform Mark {
    /**
    * The stroke should only grow inwards, e.g, the diameter/outline is not affected by the stroke width.
    * Thus, a point that has a zero size has no visible stroke. This allows strokes to be used with
    * geometric zoom, etc.
    */
    uniform bool uInwardStroke;

    /** Maximum size of the largest point as the fraction of the height of the (faceted) view */
    uniform lowp float uMaxRelativePointDiameter;

    /** Scale factor for geometric zoom */
    uniform mediump float uScaleFactor;

    /** The size of the largest point in the data */
    uniform mediump float uMaxPointSize;

    uniform mediump float uZoomLevel;
    uniform highp float uSemanticThreshold;

    uniform mediump float uGradientStrength;

#pragma markUniforms
};
`,Hn=1,Yr=2,_0=4,vF={};class tt{get behavior(){return 0}constructor(){this.children=[],this.parent=void 0,this.completed=!1}reset(){this.completed=!1;for(const t of this.children)t.reset()}initialize(){}_updatePropagator(){this._propagate=Function("children",Za(this.children.length).map(t=>`const child${t} = children[${t}];`).join(`
`)+`return function propagate(datum) {${Za(this.children.length).map(t=>`child${t}.handle(datum);`).join(`
`)}}`)(this.children)}setParent(t){this.parent=t}addChild(t){if(t.parent)throw new Error("Cannot add the child! It already has a parent.");return this.children.push(t),t.setParent(this),this._updatePropagator(),this}adopt(t){t.parent&&t.parent.removeChild(t),this.addChild(t)}adoptChildrenOf(t){for(const n of t.children)this.adopt(n)}insertAsParent(t){if(this.isRoot())throw new Error("Cannot insert a new parent for a root node!");t.parent=this.parent,this.parent.children[this.parent.children.indexOf(this)]=t,this.parent._updatePropagator(),this.parent=void 0,t.addChild(this)}removeChild(t){const n=this.children.indexOf(t);if(n>-1)this.children.splice(n,1),t.parent=void 0,this._updatePropagator();else throw new Error("Trying to remove an unknown child node!")}excise(){if(this.isRoot())throw new Error("Cannot excise root node!");if(this.isTerminal())this.parent.removeChild(this);else if(this.children.length==1){const t=this.children[0];t.setParent(this.parent),this.parent.children[this.parent.children.indexOf(this)]=t,this.parent._updatePropagator(),this.setParent(void 0),this.children.length=0}else throw new Error("Cannot excise a node that has multiple children!")}isRoot(){return!this.parent}isBranching(){return this.children.length>1}isTerminal(){return this.children.length==0}visit(t){t(this);for(const n of this.children)n.visit(t);t.afterChildren&&t.afterChildren(this)}subtreeToString(t=0){const n=this.children.map(r=>r.subtreeToString(t+1)).join("");return`${" ".repeat(t*2)}* ${this.constructor.name}${("identifier"in this&&this.identifier?": "+this.identifier:"")??""} 
${n}`}getGlobalObject(){return this.parent?this.parent.getGlobalObject():vF}handle(t){this._propagate(t)}complete(){this.completed=!0;for(const t of this.children)t.complete()}beginBatch(t){for(const n of this.children)n.beginBatch(t)}_propagate(t){}}function lx(e){return e.type=="file"}function AF(e){return e.type=="facet"}class fx extends tt{constructor(t){super(),this.k=t.size||500,this.reset()}reset(){super.reset(),this.reservoir=[],this.W=void 0,this.ingester=this._initialIngester}_initialIngester(t){this.reservoir.push(t),this.reservoir.length==this.k&&(this.W=Math.exp(Math.log(Math.random())/this.k),this.i=this.k,this.next=this.i,this.ingester=this._finalIngester,this._setNextStop())}_finalIngester(t){++this.i==this.next&&(this.reservoir[Math.floor(Math.random()*this.k)]=t,this.W*=Math.exp(Math.log(Math.random())/this.k),this._setNextStop())}_setNextStop(){this.next+=Math.floor(Math.log(Math.random())/Math.log(1-this.W))+1}handle(t){this.ingester(t)}complete(){for(const t of this.reservoir)this._propagate(t);super.complete()}}function EF(e,t,n){const r=new fx({type:"sample",size:e});for(const i of t)r.handle(n(i));return r.complete(),r.reservoir}const _F={};class SF extends js{constructor(t){super(t),Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x:.5,y:.5,color:"#4c78a8",filled:!0,opacity:1,size:100,semanticScore:0,shape:"circle",strokeWidth:2,fillGradientStrength:0,dx:0,dy:0,angle:0,sampleFacetPadding:.1,semanticZoomFraction:.02}))}getAttributes(){return["inwardStroke","uniqueId","facetIndex","x","y","size","semanticScore","shape","strokeWidth","gradientStrength","dx","dy","fill","stroke","fillOpacity","strokeOpacity","angle"]}getSupportedChannels(){return[...super.getSupportedChannels(),"size","semanticScore","shape","strokeWidth","dx","dy","fill","stroke","fillOpacity","strokeOpacity","angle"]}getDefaultEncoding(){return{...super.getDefaultEncoding(),..._F}}fixEncoding(t){return ax(t,this.properties.filled),sx(t,this.properties.filled),delete t.color,delete t.opacity,t}initializeData(){super.initializeData();const t=this.unitView.getAccessor("semanticScore");t&&(this.sampledSemanticScores=Float32Array.from(EF(1e4,this.unitView.getCollector().getData(),t)),this.sampledSemanticScores.sort((n,r)=>n-r))}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(yF,wF,[xF])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const t=this.properties;$o(this.markUniformInfo,{uInwardStroke:!!t.inwardStroke,uGradientStrength:+t.fillGradientStrength,uMaxRelativePointDiameter:1-2*t.sampleFacetPadding})}updateGraphicsData(){const t=this.unitView.getCollector(),n=t.getItemCount(),r=new pF({encoders:this.encoders,attributes:this.getAttributes(),numItems:Math.max(n,this.properties.minBufferSize||0)});r.addBatches(t.facetBatches);const i=r.toArrays();this.rangeMap.migrateEntries(i.rangeMap),this.updateBufferInfo(i)}_getGeometricScaleFactor(){const t=Math.pow(2,this.properties.geometricZoomBound||0);return Math.pow(Math.min(1,this.unitView.getZoomLevel()/t),1/3)}_getMaxPointSize(){const t=this.encoders.size;return t.constant?t(null):t.scale.range().reduce((n,r)=>Math.max(n,r))}getSemanticThreshold(){if(this.sampledSemanticScores){const t=Math.max(0,1-this.properties.semanticZoomFraction*this.unitView.getZoomLevel());if(t<=0)return-1/0;if(t>=1)return 1/0;{const n=this.sampledSemanticScores;return Lm(n,t)}}else return-1}prepareRender(t){const n=super.prepareRender(t);return n.push(()=>{$o(this.markUniformInfo,{uMaxPointSize:this._getMaxPointSize(),uScaleFactor:this._getGeometricScaleFactor(),uSemanticThreshold:this.getSemanticThreshold()}),this.markUniformsAltered=!0}),n.push(()=>this.bindOrSetMarkUniformBlock()),n.push(()=>ji(this.gl,this.programInfo,this.vertexArrayInfo)),n}render(t){const n=this.gl;return this.createRenderCallback((r,i)=>{i&&Mu(n,this.vertexArrayInfo,n.POINTS,i,r)},t)}}const CF=`// Line caps
const int BUTT = 0;
const int SQUARE = 1;
const int ROUND = 2;

/** Position along the rule */
in float pos;

/** Which side of the stroke: -0.5 or 0.5 */
in float side;

out vec4 vColor;

/** Stroke width */
out float vSize;

/** The distance from the line center to the direction of normal in pixels */
out float vNormalLengthInPixels;

/** Distances from the line endings. Used for rendering the round caps and dashes */
out highp vec2 vPosInPixels;


void main(void) {
    float pixelSize = 1.0 / uDevicePixelRatio;

    // Stroke width in pixels
    float size = getScaled_size();
    float opacity = getScaled_opacity() * uViewOpacity;

    // Avoid artifacts in very thin lines by clamping the size and adjusting opacity respectively
    if (size < pixelSize) {
        opacity *= size / pixelSize;
        size = pixelSize;
    }

    vec2 a = applySampleFacet(vec2(getScaled_x(), getScaled_y()));
    vec2 b = applySampleFacet(vec2(getScaled_x2(), getScaled_y2()));

    vec2 tangent = b - a;

    float offset = 0.0;
    float relativeDiff = 0.0;
    if (uMinLength > 0.0 || uStrokeCap != BUTT) {
        float len = length(tangent * uViewportSize);

        // Elongate to reach the minimum length.
        // The length difference in pixels
        float diff = max(0.0, uMinLength - len);

        // Add line caps
        if (uStrokeCap != BUTT) {
            diff += size;
        }

        relativeDiff = diff / len;
        offset = relativeDiff * (pos - 0.5);
    }

    // Apply caps and minimum length by spreading the vertices along the tangent
    vec2 p = pos < 1.0
        ? a + tangent * (pos + offset)
        : b + tangent * offset;

    // Add an extra pixel to stroke width to accommodate edge antialiasing
    float aaPadding = pixelSize;

    // Extrude
    vec2 normal = normalize(vec2(-tangent.y, tangent.x) / uViewportSize);
    p += normal * side * (size + aaPadding) / uViewportSize;

    gl_Position = unitToNdc(p);

    vColor = vec4(getScaled_color() * opacity, opacity);
    vSize = size;
    vNormalLengthInPixels = side * (size + aaPadding);

    // TODO: Here's a precision problem that breaks round caps when zoomed in enough
    vPosInPixels = vec2(pos, (1.0 - pos)) * (1.0 + relativeDiff) * length(tangent * uViewportSize) -
        vec2(uStrokeCap != BUTT ? size / 2.0 : 0.0);
    
    setupPicking();
}
`,kF=`// Line ending
const int BUTT = 0;
const int SQUARE = 1;
const int ROUND = 2;

uniform sampler2D uDashTexture;

in vec4 vColor;
in float vSize;

/** Position on the rule along its length in pixels */
in vec2 vPosInPixels;
in float vNormalLengthInPixels;

out lowp vec4 fragColor;

void main(void) {
    float dpr = uDevicePixelRatio;

    float distanceFromEnd = -min(vPosInPixels[0], vPosInPixels[1]);
    float distance; // from the rule centerline or end
    if (distanceFromEnd > 0.0 && uStrokeCap == ROUND) {
        // round cap
        distance = length(vec2(distanceFromEnd, vNormalLengthInPixels));
    } else {
        distance = abs(vNormalLengthInPixels);
    }

    // Use a signed distance field to implement edge antialiasing
    float opacity = clamp(((vSize / 2.0 - distance) * dpr), -0.5, 0.5) + 0.5;

    if (uDashTextureSize > 0.0) {
        float pos = (vPosInPixels[0] + uStrokeDashOffset) * dpr;
        float floored = floor(pos);
        vec2 texelPositions = (floored + vec2(0.5, 1.5)) / dpr / uDashTextureSize;
      
        // Do antialiasing
        opacity *= mix(
            texture(uDashTexture, vec2(texelPositions[0], 0)).r,
            texture(uDashTexture, vec2(texelPositions[1], 0)).r,
            clamp((pos - floored), 0.0, 1.0));
    }

    fragColor = vColor * opacity;

    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
}
`,TF=`layout(std140) uniform Mark {
    /** Minimum rule length in pixels */
    uniform mediump float uMinLength;

    uniform mediump float uDashTextureSize;
    uniform lowp int uStrokeCap;
    uniform mediump float uStrokeDashOffset;

#pragma markUniforms
};
`;class IF extends js{constructor(t){super(t),this.dashTextureSize=0,Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x2:void 0,y2:void 0,size:1,color:"black",opacity:1,minLength:0,strokeDash:null,strokeDashOffset:0,strokeCap:"butt"}))}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","size","color","opacity"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size"]}fixEncoding(t){if(!(t.x&&t.y&&t.x2&&t.y2))if(t.x&&t.x2&&!t.y)t.y={value:.5},t.y2=t.y;else if(t.y&&t.y2&&!t.x)t.x={value:.5},t.x2=t.x;else if(t.x&&!t.y)t.y={value:0},t.y2={value:1},t.x2=t.x;else if(t.y&&!t.x)t.x={value:0},t.x2={value:1},t.y2=t.y;else if(t.x&&t.y&&t.y2)t.x2=t.x;else if(t.y&&t.x&&t.x2)t.y2=t.y;else if(t.y&&t.x)if(!t.x2&&Wt(t.y)&&t.y.type=="quantitative")t.x2=t.x,t.y2={datum:0};else if(!t.y2&&Wt(t.x)&&t.x.type=="quantitative")t.y2=t.y,t.x2={datum:0};else throw new Error("A bug!");else throw new Error("Invalid x and y encodings for rule mark: "+JSON.stringify(t));return t}async initializeGraphics(){if(await super.initializeGraphics(),this.properties.strokeDash){const t=this.gl,n=BF(this.properties.strokeDash);this.dashTexture=Hs(t,{mag:t.NEAREST,min:t.NEAREST,internalFormat:t.R8,format:t.RED,src:n,height:1}),this.dashTextureSize=n.length}this.createAndLinkShaders(CF,kF,[TF])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const t=this.properties;this.registerMarkUniformValue("uMinLength",t.minLength),this.registerMarkUniformValue("uStrokeCap",t.strokeCap??"butt",n=>["butt","square","round"].indexOf(n)),$o(this.markUniformInfo,{uDashTextureSize:+this.dashTextureSize}),this.markUniformsAltered=!0}updateGraphicsData(){const t=this.unitView.getCollector(),n=t.getItemCount(),r=new dF({encoders:this.encoders,attributes:this.getAttributes(),numItems:Math.max(n,this.properties.minBufferSize||0)});r.addBatches(t.facetBatches);const i=r.toArrays();this.rangeMap.migrateEntries(i.rangeMap),this.updateBufferInfo(i)}prepareRender(t){const n=super.prepareRender(t);return n.push(()=>this.bindOrSetMarkUniformBlock()),this.dashTexture&&n.push(()=>qo(this.programInfo,{uDashTexture:this.dashTexture})),n.push(()=>ji(this.gl,this.programInfo,this.vertexArrayInfo)),n}render(t){const n=this.gl;return this.createRenderCallback((r,i)=>Mu(n,this.vertexArrayInfo,n.TRIANGLE_STRIP,i,r),t)}}function BF(e){if(e.length==0||e.length%2||e.findIndex(o=>Math.round(o)!=o||o<1||o>1e3)>=0)throw new Error("Invalid stroke dash pattern: "+JSON.stringify(e));const t=e.reduce((o,a)=>o+a),n=new Uint8Array(t);let r=!0,i=0;for(let o of e){for(;o;)n[i++]=r&&255||0,o--;r=!r}return n}const DF=`in vec2 strip;

out vec4 vColor;

/** Stroke width */
out float vSize;

/** The distance from the line center to the direction of normal in pixels */
out float vNormalLengthInPixels;

const int SHAPE_ARC = 0;
const int SHAPE_DOME = 1;
const int SHAPE_DIAGONAL = 2;
const int SHAPE_LINE = 3;
const int ORIENT_VERTICAL = 0;
const int ORIENT_HORIZONTAL = 1;

float distanceFromLine(vec2 pointOnLine1, vec2 pointOnLine2, vec2 point) {
    vec2 a = point - pointOnLine1;
    vec2 b = pointOnLine2 - pointOnLine1;
    vec2 proj = dot(a, b) / dot(b, b) * b;
    return length(a - proj);
}

bool isInsideViewport(vec2 point, float marginFactor) {
    vec2 margin = uViewportSize * vec2(marginFactor);
    return point.x >= -margin.x
        && point.x <= uViewportSize.x + margin.x
        && point.y >= -margin.y
        && point.y <= uViewportSize.y + margin.y;
}

void main(void) {
    float pixelSize = 1.0 / uDevicePixelRatio;
    float opacity = getScaled_opacity() * uViewOpacity;

    // The bezier's control points
    vec2 p1, p2, p3, p4;

    vec2 a = applySampleFacet(vec2(getScaled_x(), getScaled_y())) * uViewportSize;
    vec2 b = applySampleFacet(vec2(getScaled_x2(), getScaled_y2())) * uViewportSize;

    if (uShape <= SHAPE_DOME) {
        if (uShape == SHAPE_DOME) {
            vec2 height = vec2(0.0);
            if (uOrient == ORIENT_VERTICAL) {
                p1 = vec2(min(a.x, b.x), b.y);
                p4 = vec2(max(a.x, b.x), b.y);
                height = vec2(0.0, a.y - b.y);

                if (uClampApex) {
                    if (p4.x > 0.0) {
                        p1.x = max(p1.x, -p4.x);
                    }
                    if (p1.x < uViewportSize.x) {
                        p4.x = min(p4.x, 2.0 * uViewportSize.x - p1.x);
                    }
                }

            } else {
                p1 = vec2(b.x, min(a.y, b.y));
                p4 = vec2(b.x, max(a.y, b.y));
                height = vec2(a.x - b.x, 0.0);

                if (uClampApex) {
                    if (p4.y > 0.0) {
                        p1.y = max(p1.y, -p4.y);
                    }
                    if (p1.y < uViewportSize.y) {
                        p4.y = min(p4.y, 2.0 * uViewportSize.y - p1.y);
                    }
                }
            }

            vec2 controlOffset = height / 0.75;

            p2 = p1 + controlOffset;
            p3 = p4 + controlOffset;

        } if (uShape == SHAPE_ARC) {
            p1 = a;
            p4 = b;

            vec2 chordVector = p4 - p1;
            vec2 unitChordVector = normalize(chordVector);
            vec2 chordNormal = vec2(-unitChordVector.y, unitChordVector.x);
            float chordLength = length(chordVector);

            if (chordLength > uMaxChordLength) {
                if (isInsideViewport(p1, 2.0)) {
                    chordLength = uMaxChordLength;
                    p4 = p1 + unitChordVector * uMaxChordLength;
                } else if (isInsideViewport(p4, 2.0)) {
                    chordLength = uMaxChordLength;
                    p1 = p4 - unitChordVector * uMaxChordLength;
                }
            }

            float height = max(
                chordLength / 2.0 * uArcHeightFactor,
                uMinArcHeight
            );

            // This is a bit poor approximation of a circular arc, but it's probably enough for most purposes.
            // TODO: Consider a more sophisticated approach: https://stackoverflow.com/a/44829356/1547896
            vec2 controlOffset = chordNormal * height / 0.75;

            p2 = p1 + controlOffset;
            p3 = p4 + controlOffset;
        }

    } else if (uShape == SHAPE_DIAGONAL) {
        if (uOrient == ORIENT_VERTICAL) {
            p1 = a;
            p2 = vec2(a.x, (a.y + b.y) / 2.0);
            p3 = vec2(b.x, (a.y + b.y) / 2.0);
            p4 = b;
        } else {
            p1 = a;
            p2 = vec2((a.x + b.x) / 2.0, a.y);
            p3 = vec2((a.x + b.x) / 2.0, b.y);
            p4 = b;
        }
    } else if (uShape == SHAPE_LINE) {
        p1 = a;
        p2 = (a + b) / 2.0;
        p3 = p2;
        p4 = b;
    }

    // Make segments shorter near the endpoints to make the tightly bent attachment points smoother
    float t = smoothstep(0.0, 1.0, strip.x);

    // https://stackoverflow.com/a/31317254/1547896
    vec2 C1 = p4 - 3.0 * p3 + 3.0 * p2 - p1;
    vec2 C2 = 3.0 * p3 - 6.0 * p2 + 3.0 * p1;
    vec2 C3 = 3.0 * p2 - 3.0 * p1;
    vec2 C4 = p1;

    vec2 p;
    // Skip computation at endpoints to maintain precision
    if (t == 0.0) {
        p = p1;
    } else if (t == 1.0) {
        p = p4;
    } else {
        p = C1*t*t*t + C2*t*t + C3*t + C4;
    }

    vec2 tangent = normalize(3.0*C1*t*t + 2.0*C2*t + C3);
    vec2 normal = vec2(-tangent.y, tangent.x);

    float size = getScaled_size();

    // Avoid artifacts in very thin lines by clamping the size and adjusting opacity respectively
    if (size < pixelSize) {
        opacity *= size / pixelSize;
        size = pixelSize;
    }

    // Handle minimum picking size or add an extra pixel to the stroke width to accommodate edge antialiasing
    float paddedSize = uPickingEnabled
        ? max(size, uMinPickingSize)
        : size + pixelSize;

    vNormalLengthInPixels = strip.y * paddedSize;
    
    if (uShape == SHAPE_ARC && uArcFadingDistance[0] > 0.0 && uArcFadingDistance[1] > 0.0) {
        float d = distanceFromLine(p1, p4, p);
        float distanceOpacity = smoothstep(uArcFadingDistance[1], uArcFadingDistance[0], d);    

        // Fade out
        opacity *= distanceOpacity;

        // Collapse fully transparent triangles to skip fragment processing 
        if (distanceOpacity <= 0.0) {
            vNormalLengthInPixels = 0.0;
        }
    }

    // Extrude
    p += normal * vNormalLengthInPixels;

    gl_Position = pixelsToNdc(p);

    vec3 color = getScaled_color();

    vColor = vec4(color * opacity, opacity);

    vSize = paddedSize;

    setupPicking();
}
`,FF=`in vec4 vColor;
in float vSize;
in float vNormalLengthInPixels;

out lowp vec4 fragColor;

void main(void) {
    float dpr = uDevicePixelRatio;

    float distance = abs(vNormalLengthInPixels);
    float opacity = clamp(((vSize / 2.0 - distance) * dpr), 0.0, 1.0);

    fragColor = vColor * opacity;

    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
}
`,RF=`layout(std140) uniform Mark {
    uniform float uArcHeightFactor;

    /** Make very small arcs visible */
    uniform float uMinArcHeight;

    /** The minimum stroke width in pixels when rendering into the picking buffer */
    uniform float uMinPickingSize;

    uniform int uShape;
    uniform int uOrient;
    uniform bool uClampApex;

    // In pixels
    uniform float uMaxChordLength;
    // In pixels
    uniform vec2 uArcFadingDistance;

#pragma markUniforms
};
`,MF=["arc","dome","diagonal","line"],PF=["vertical","horizontal"];class OF extends js{constructor(t){super(t),Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x:0,x2:void 0,y:0,y2:void 0,size:1,color:"black",opacity:1,segments:101,arcHeightFactor:1,minArcHeight:1.5,minPickingSize:3,clampApex:!1,maxChordLength:5e4,arcFadingDistance:!1,linkShape:"arc",orient:"vertical"})),this._baseInstanceExt=this.gl.getExtension("WEBGL_draw_instanced_base_vertex_base_instance")}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","size","height","color","opacity"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size"]}fixEncoding(t){return t.x2||(Wt(t.x)?t.x2={datum:0}:t.x2=t.x),t.y2||(Wt(t.y)?t.y2={datum:0}:t.y2=t.y),t}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(DF,FF,[RF])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const t=this.properties;this.registerMarkUniformValue("uArcFadingDistance",t.arcFadingDistance,n=>n||[0,0]),this.registerMarkUniformValue("uArcHeightFactor",t.arcHeightFactor),this.registerMarkUniformValue("uMinArcHeight",t.minArcHeight),this.registerMarkUniformValue("uMinPickingSize",t.minPickingSize),this.registerMarkUniformValue("uShape",t.linkShape,n=>MF.indexOf(n)),this.registerMarkUniformValue("uOrient",t.orient,n=>PF.indexOf(n)),this.registerMarkUniformValue("uClampApex",t.clampApex,n=>!!n),this.registerMarkUniformValue("uMaxChordLength",t.maxChordLength)}updateGraphicsData(){const t=this.unitView.getCollector(),n=t.getItemCount(),r=new gF({encoders:this.encoders,attributes:this.getAttributes(),numItems:n});r.addBatches(t.facetBatches);const i=r.toArrays();i.arrays.strip={data:LF(this.properties.segments),numComponents:2},this.rangeMap.migrateEntries(i.rangeMap),this.arrays=Object.fromEntries(Object.entries(i.arrays).map(([o,a])=>[o,{...a,data:void 0}])),this.updateBufferInfo(i)}prepareRender(t){const n=super.prepareRender(t);return n.push(()=>this.bindOrSetMarkUniformBlock()),this._baseInstanceExt?n.push(()=>ji(this.gl,this.programInfo,this.vertexArrayInfo)):n.push(()=>this.gl.bindVertexArray(null)),n}render(t){const n=this.gl,r=(this.properties.segments+1)*2;return this._baseInstanceExt?this.createRenderCallback((i,o)=>{this._baseInstanceExt.drawArraysInstancedBaseInstanceWEBGL(n.TRIANGLE_STRIP,0,r,o,i)},t):this.createRenderCallback((i,o)=>{for(const a of Object.entries(this.bufferInfo.attribs)){const[s,f]=a;f.buffer&&f.numComponents&&f.divisor&&(f.offset=i*this.arrays[s].numComponents*4)}ji(n,this.programInfo,this.bufferInfo),n.drawArraysInstanced(n.TRIANGLE_STRIP,0,r,o)},t)}}function LF(e){let t=0;const n=[];for(;t<=e;t++)n.push(t/e,.5),n.push(t/e,-.5);return new Float32Array(n)}const NF=`in mediump vec2 vertexCoord;
in lowp vec2 textureCoord;

// Width of the text (all letters)
in float width;

out vec2 vTexCoord;
out vec4 vColor;
out float vSlope;
out float vEdgeFadeOpacity;

struct RangeResult {
    float pos;
    float scale;
};

float minValue(vec4 v) {
    return min(min(v.x, v.y), min(v.z, v.w));
}

float maxValue(vec4 v) {
    return max(max(v.x, v.y), max(v.z, v.w));
}

/**
 * All measures are in [0, 1]
 */
RangeResult positionInsideRange(float a, float b, float width, float padding,
                                int align, bool flush) {
    float span = b - a;
    float paddedWidth = width + 2.0 * padding;

    // Is the text clearly outside the viewport
    if (a > 1.0 || b < 0.0) {
        return RangeResult(0.0, 0.0);
    }

    // How much extra space we have for adjusting the position so that the
    // text stays inside the range.
    float extra = max(0.0, span - paddedWidth);

    float pos;

    // Align the text and try to keep it inside the range and the viewport
    if (align == 0) {
        float centre = a + b;

        if (flush) {
            float leftOver = max(0.0, paddedWidth - centre);
            centre += min(leftOver, extra);

            float rightOver = max(0.0, paddedWidth + centre - 2.0);
            centre -= min(rightOver, extra);
        }

        pos = centre / 2.0;

    } else if (align < 0) {
        float edge = a;

        if (flush) {
            float over = max(0.0, -edge);
            edge += min(over, extra);
        }

        pos = edge + padding;

    } else {
        float edge = b;

        if (flush) {
            float over = max(0.0, edge - 1.0);
            edge -= min(over, extra);
        }

		// TODO: If the text spans the whole viewport, try to keep it centered if possible.

        pos = edge - padding;
    }

    // How the text should be scaled to make it fit inside the range (if it didn't fit).
    float scale = clamp((span - padding) / paddedWidth, 0.0, 1.0);

    // TODO: Fix padding in scale factor. Padding should stay constant
    return RangeResult(pos, scale);
}

vec2 calculateRotatedDimensions(float width, mat2 rotationMatrix) {
    vec2 a = abs(rotationMatrix * vec2(width / 2.0, 0.5));
    vec2 b = abs(rotationMatrix * vec2(width / 2.0, -0.5));
    return vec2(max(a.x, b.x), max(a.y, b.y)) * 2.0;
}

/** Needed when using ranged text */
ivec2 fixAlignForAngle(ivec2 align, float angleInDegrees) {
    float a = mod(angleInDegrees + 45.0, 360.0);
    int x = align.x;
    int y = -align.y;

    // TODO: Optimize by avoiding branching
    if (a < 90.0) {
        return ivec2(x, y);
    } else if (a < 180.0) {
        return ivec2(y, -x);
    } else if (a < 270.0) {
        return ivec2(-x, y);
    } else {
        return ivec2(-y, x);
    }
}

void main(void) {
    float opacity = getScaled_opacity() * uViewOpacity;
    vec2 size = vec2(getScaled_size());
    float x = getScaled_x();
    float y = getScaled_y();

    float scale = 1.0;

	float angleInDegrees = getScaled_angle();
	float angle = -angleInDegrees * PI / 180.0;
	
    float sinTheta = sin(angle);
    float cosTheta = cos(angle);
    mat2 rotationMatrix = mat2(cosTheta, sinTheta, -sinTheta, cosTheta);

    vec2 flushSize = calculateRotatedDimensions(width, rotationMatrix);

#if defined(x2_DEFINED) || defined(y2_DEFINED)
    ivec2 align = fixAlignForAngle(uAlign, angleInDegrees);
#else
    ivec2 align = uAlign;
#endif

#ifdef x2_DEFINED
    float x2 = getScaled_x2();

    if (uLogoLetter) {
        size.x = (x2 - x) * uViewportSize.x;
        x += (x2 - x) / 2.0;

    } else {
        float x2 = getScaled_x2();
        RangeResult result = positionInsideRange(
            min(x, x2), max(x, x2),
            size.x * scale * flushSize.x / uViewportSize.x, uPaddingX / uViewportSize.x,
            align.x, uFlushX);
        
        x = result.pos;
        scale *= result.scale;
    }
#endif

    // Position of the text origo 
    vec2 pos = applySampleFacet(vec2(x, y));

#ifdef y2_DEFINED
    float y2 = getScaled_y2();
    vec2 pos2 = applySampleFacet(vec2(x, y2));

    if (uLogoLetter) {
        size.y = (pos2.y - pos.y) * uViewportSize.y;
        pos.y += (pos2.y - pos.y) / 2.0;

    } else {
        RangeResult result = positionInsideRange(
            min(pos.y, pos2.y), max(pos.y, pos2.y),
            size.y * scale * flushSize.y / uViewportSize.y, uPaddingY / uViewportSize.y,
            align.y, uFlushY);
        
        pos.y = result.pos;
        scale *= result.scale;
    }
#endif

    if (scale < 1.0) {
        if (uSqueeze) {
            vec2 scaleFadeExtent = vec2(3.0, 6.0) / size;

            if (scale  < scaleFadeExtent[0]) {
                gl_Position = vec4(0.0);
                return;
            }

            size *= scale;
            opacity *= linearstep(scaleFadeExtent[0], scaleFadeExtent[1], scale);

        } else if (scale < 1.0) {
            // Eliminate the text
            gl_Position = vec4(0.0);
            return;
        }
    }

    // Position of the character vertex in relation to the text origo
    vec2 charPos = rotationMatrix * (vertexCoord * size + uD);

    // Position of the character vertex inside the unit viewport
    vec2 unitPos = pos + charPos / uViewportSize;

    gl_Position = unitToNdc(unitPos);

    // Controls antialiasing of the SDF
    vSlope = max(1.0, min(size.x, size.y) / uSdfNumerator);

    vColor = vec4(getScaled_color() * opacity, opacity);

    vTexCoord = textureCoord;

    // Edge fading. The implementation is simplistic and fails with primitives that
    // span the whole viewport. However, it works just fine with reasonable font sizes.
    // x: top, y: right, z: bottom, w: left
    if (maxValue(uViewportEdgeFadeDistance) > -pow(10.0, 10.0)) { // -Infinity would be nice
        vEdgeFadeOpacity = minValue(
            ((vec4(1.0, 1.0, 0.0, 0.0) + vec4(-1.0, -1.0, 1.0, 1.0) * unitPos.yxyx) *
                uViewportSize.yxyx - uViewportEdgeFadeDistance) / uViewportEdgeFadeWidth);
    } else {
        vEdgeFadeOpacity = 1.0;
    }

    setupPicking();
}
`,zF=`uniform sampler2D uTexture;

in vec2 vTexCoord;
in float vEdgeFadeOpacity;
in vec4 vColor;
in float vSlope;

out lowp vec4 fragColor;

float median(float r, float g, float b) {
    return max(min(r, g), min(max(r, g), b));
}

void main() {
    // TODO: Really small text should fall back to normal (non-SDF) texture that can be mip-mapped.
    // Currently small text has severe aliasing artifacts.

    vec3 c = texture(uTexture, vTexCoord).rgb;

    float sigDist = 1.0 - median(c.r, c.g, c.b);

    // Using screen-space derivatives for logo letters because skewed aspect ratios
    // result in blurry edges otherwise. However, use of screen-space derivatives
    // results in crappy looking text with regular letters text.
    float slope = uLogoLetter
        ? 0.7 / length(vec2(dFdy(sigDist), dFdx(sigDist)))
        : vSlope;

    float opa = clamp((sigDist - 0.5) * slope + 0.5, 0.0, 1.0);

    // Raise to the power of 2.2 to do some cheap gamma correction
    opa *= pow(clamp(vEdgeFadeOpacity, 0.0, 1.0), 2.2);

    fragColor = vColor * opa;

    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
}
`,UF=`layout(std140) uniform Mark {
    uniform mediump float uSdfNumerator;

    uniform mediump vec2 uD; // dx & dy

    uniform mediump vec4 uViewportEdgeFadeWidth;
    uniform mediump vec4 uViewportEdgeFadeDistance;
        
    uniform bool uSqueeze;
    uniform bool uLogoLetter;

    // x: -1, 0, 1 = left, center, right
    // y: -1, 0, 1 = top, middle, bottom 
    uniform lowp ivec2 uAlign;

    uniform mediump float uPaddingX;
    uniform bool uFlushX;
    uniform mediump float uPaddingY;
    uniform bool uFlushY;

#pragma markUniforms
};
`,GF={left:-1,center:0,right:1},HF={top:-1,middle:0,bottom:1,alphabetic:1};class VF extends js{constructor(t){super(t),Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x:.5,y:.5,x2:void 0,y2:void 0,text:"",size:11,color:"black",opacity:1,font:void 0,fontStyle:void 0,fontWeight:void 0,align:"center",baseline:"middle",dx:0,dy:0,angle:0,fitToBand:!1,squeeze:!0,paddingX:0,paddingY:0,flushX:!0,flushY:!0,logoLetters:!1,viewportEdgeFadeWidthTop:0,viewportEdgeFadeWidthRight:0,viewportEdgeFadeWidthBottom:0,viewportEdgeFadeWidthLeft:0,viewportEdgeFadeDistanceTop:-1/0,viewportEdgeFadeDistanceRight:-1/0,viewportEdgeFadeDistanceBottom:-1/0,viewportEdgeFadeDistanceLeft:-1/0})),this.font=this.properties.font?t.context.fontManager.getFont(this.properties.font,this.properties.fontStyle,this.properties.fontWeight):t.context.fontManager.getDefaultFont()}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","color","size","opacity","angle"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size","text","angle"]}fixEncoding(t){for(const n of Wo)this.properties.fitToBand&&E0(t,n);return t}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(NF,zF,[UF])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const t=this.properties;this.registerMarkUniformValue("uSdfNumerator",{expr:"devicePixelRatio"},n=>{let r=.35;return this.properties.logoLetters&&(r/=2),this.font.metrics.common.base/(n/r)}),$o(this.markUniformInfo,{uPaddingX:t.paddingX,uPaddingY:t.paddingY,uFlushX:!!t.flushX,uFlushY:!!t.flushY,uAlign:[GF[t.align],HF[t.baseline]],uD:[t.dx,-t.dy],uLogoLetter:!!t.logoLetters,uSqueeze:!!t.squeeze,uViewportEdgeFadeWidth:[t.viewportEdgeFadeWidthTop,t.viewportEdgeFadeWidthRight,t.viewportEdgeFadeWidthBottom,t.viewportEdgeFadeWidthLeft],uViewportEdgeFadeDistance:[t.viewportEdgeFadeDistanceTop,t.viewportEdgeFadeDistanceRight,t.viewportEdgeFadeDistanceBottom,t.viewportEdgeFadeDistanceLeft]})}updateGraphicsData(){const t=this.unitView.getCollector(),n=t.getData(),r=this.encoding,i=this.encoders.text.accessor||this.encoders.text;let o=0;const a="format"in r.text?mt(r.text.format):l=>l;for(const l of n){const u=a(i(l)),c=Pe(u)?u:u===null?"":""+u;o+=c&&c.length||0}const s=new mF({encoders:this.encoders,attributes:this.getAttributes(),properties:this.properties,fontMetrics:this.font.metrics,numCharacters:Math.max(o,this.properties.minBufferSize||0)});s.addBatches(t.facetBatches);const f=s.toArrays();this.rangeMap.migrateEntries(f.rangeMap),this.updateBufferInfo(f)}prepareRender(t){const n=super.prepareRender(t);return n.push(()=>{qo(this.programInfo,{uTexture:this.font.texture})}),n.push(()=>this.bindOrSetMarkUniformBlock()),n.push(()=>ji(this.gl,this.programInfo,this.vertexArrayInfo)),n}render(t){const n=this.gl;return this.createRenderCallback((r,i)=>Mu(n,this.vertexArrayInfo,n.TRIANGLES,i,r),t)}}function ux(e,t,{spacing:n,devicePixelRatio:r,offset:i,reverse:o}={}){n=n||0,i=i||0;let a=0,s=0;for(const p of e)a+=Vu(p.px)+(S0(p)?0:n),s+=Vu(p.grow);a-=n;const f=Math.max(0,t-a),l=r!==void 0?p=>Math.round(p*r)/r:p=>p,u=[],c=[],h=p=>{const m=u.length;if(!m)return;const y=(p?n:0)*(o?-1:1);d-=y;for(let w=0;w<m;w++)c.push({location:d+(w+1)/(m+1)*y,size:0});d+=y,u.length=0};let d=o?Math.max(t,a):0+i;if(e.length==1&&S0(e[0]))return[{location:d,size:0}];for(let p=0;p<e.length;p++){const m=e[p];if(S0(m))u.push(m);else{h(c.length>0);const y=Vu(m.px)+(s?Vu(m.grow)/s*f:0);o&&(d-=y),c.push({location:l(d),size:l(y)}),o?d-=n:d+=y+n}}return d+=o?n:-n,h(!1),c}function jF(e){let t=0,n=0;for(const r of e)t=Math.max(t,r.px??0),n=Math.max(n,r.grow??0);return{px:t,grow:n}}const tm=class tm{constructor(t,n){ee(this,Kl);this.width=t,this.height=n}addPadding(t){return J(this,Kl,fm).call(this,t.width,t.height)}subtractPadding(t){return J(this,Kl,fm).call(this,-t.width,-t.height)}};Kl=new WeakSet,fm=function(t,n){return new tm({px:(this.width.px??0)+t,grow:this.width.grow},{px:(this.height.px??0)+n,grow:this.height.grow})};let Qr=tm;const Ys=Object.freeze({px:0,grow:0}),cx=new Qr(Ys,Ys);function S0(e){return!e.px&&!e.grow}function Vu(e){return e||0}function $F(e){return e&&(kt(e.px)||kt(e.grow))}function hx(e){if(px(e))throw new Error("parseSizeDef does not accept step-based sizes.");if($F(e))return e;if(kt(e))return{px:e,grow:0};if(e==="container")return{px:0,grow:1};if(!e)return{px:0,grow:1};throw new Error(`Invalid sizeDef: ${e}`)}class _t{constructor(t,n,r,i){this.top=t||0,this.right=n||0,this.bottom=r||0,this.left=i||0}get width(){return this.left+this.right}get height(){return this.top+this.bottom}expand(t){return t<=0?this:new _t(this.top+t,this.right+t,this.bottom+t,this.left+t)}add(t){return new _t(this.top+t.top,this.right+t.right,this.bottom+t.bottom,this.left+t.left)}subtract(t){return new _t(this.top-t.top,this.right-t.right,this.bottom-t.bottom,this.left-t.left)}union(t){return new _t(Math.max(this.top,t.top),Math.max(this.right,t.right),Math.max(this.bottom,t.bottom),Math.max(this.left,t.left))}getHorizontal(){return new _t(0,this.right,0,this.left)}getVertical(){return new _t(this.top,0,this.bottom,0)}get horizontalTotal(){return this.left+this.right}get verticalTotal(){return this.top+this.bottom}static createFromConfig(t){return typeof t=="number"?this.createUniformPadding(t):t?this.createFromRecord(t):C0}static createFromRecord(t){return new _t(t.top,t.right,t.bottom,t.left)}static zero(){return C0}static createUniformPadding(t){return new _t(t,t,t,t)}}const C0=_t.createUniformPadding(0);Object.freeze(C0);const qF=/^([A-Za-z]+:)?\/\//;function WF(e,t){if(t&&qF.test(t))return t;const n=e();return n&&t?n.endsWith("/")?n+t:n+"/"+t:n??t}const ZF="VISIT_SKIP",Qs="VISIT_STOP",dx=e=>e;class YF{constructor(t,n,r,i,o,a={}){ee(this,yo);ee(this,tf);ee(this,Fa,{});ee(this,Jl,{});ee(this,ef,{});Fn(this,"opacityFunction",dx);Fn(this,"coords");if(!t)throw new Error("View spec must be defined!");this.context=n,this.layoutParent=r,this.dataParent=i,this.name=t.name||o,this.spec=t,this.resolutions={scale:{},axis:{}},Qw(this),this.options={blockEncodingInheritance:!1,contributesToScaleDomain:!0,...a},this.needsAxes={x:!1,y:!1}}getPadding(){return this._cache("size/padding",()=>_t.createFromConfig(this.spec.padding))}getOverhang(){return _t.zero()}isScrollable(){return this.spec.viewportWidth!=null||this.spec.viewportHeight!=null}getSize(){return this._cache("size/size",()=>this.isConfiguredVisible()?new Qr(J(this,yo,wf).call(this,"width"),J(this,yo,wf).call(this,"height")):cx)}getViewportSize(){if(!this.isScrollable())return this.getSize();if(!this.isConfiguredVisible())return cx;const t=this.getSize();return new Qr(J(this,yo,wf).call(this,"viewportWidth")??t.width,J(this,yo,wf).call(this,"viewportHeight")??t.height)}isConfiguredVisible(){return this.context.isViewConfiguredVisible(this)}isVisibleInSpec(){return this.spec.visible??!0}isVisible(){return this.getLayoutAncestors().every(t=>t.isConfiguredVisible())}getEffectiveOpacity(){var t;return this.opacityFunction(((t=this.layoutParent)==null?void 0:t.getEffectiveOpacity())??1)}getPathString(){return this.getLayoutAncestors().map(t=>t.name).reverse().join("/")}getLayoutAncestors(){return J(this,tf,um).call(this,"layoutParent")}getDataAncestors(){return J(this,tf,um).call(this,"dataParent")}handleBroadcast(t){for(const n of W(this,Fa)[t.type]||[])n(t)}_addBroadcastHandler(t,n){let r=W(this,Fa)[t];r||(r=[],W(this,Fa)[t]=r),r.push(n)}handleInteractionEvent(t,n,r){const i=r?W(this,Jl):W(this,ef);for(const o of i[n.type]||[])o(t,n)}addInteractionEventListener(t,n,r){const i=r?W(this,Jl):W(this,ef);let o=i[t];o||(o=[],i[t]=o),o.push(n)}visit(t){try{const n=t(this);if(t.postOrder&&t.postOrder(this),n!==Qs)return n}catch(n){throw n.view=this,n}}getDescendants(){const t=[];return this.visit(n=>{t.push(n)}),t}configureViewOpacity(){(!this.opacityFunction||this.opacityFunction===dx)&&(this.opacityFunction=XF(this))}onBeforeRender(){}render(t,n,r={}){this.coords=r.clipRect?n.intersect(r.clipRect):n}getEncoding(){const t=this.dataParent&&!this.options.blockEncodingInheritance?this.dataParent.getEncoding():{},n=this.spec.encoding||{},r={...t,...n};for(const[i,o]of Object.entries(r))o===null&&delete r[i];return r}getFacetAccessor(t){if(this.layoutParent)return this.layoutParent.getFacetAccessor(this)}getFacetFields(t){var r;const n=this.getEncoding().sample;return Zi(n)?[n.field]:(r=this.layoutParent)==null?void 0:r.getFacetFields(this)}getSampleFacetTexture(){}getScaleResolution(t){const n=Yi(t);return this.getDataAncestors().map(r=>r.resolutions.scale[n]).find(r=>r)}getAxisResolution(t){const n=Yi(t);return this.getDataAncestors().map(r=>r.resolutions.axis[n]).find(r=>r)}getConfiguredResolution(t,n){var r,i;return(i=(r=this.spec.resolve)==null?void 0:r[n])==null?void 0:i[t]}getConfiguredOrDefaultResolution(t,n){return this.getConfiguredResolution(t,n)??this.getConfiguredResolution("default",n)??this.getDefaultResolution(t,n)}getDefaultResolution(t,n){return"independent"}getBaseUrl(){return WF(()=>{var t;return(t=this.dataParent)==null?void 0:t.getBaseUrl()},this.spec.baseUrl)}isPickingSupported(){return!0}getTitleText(){const t=this.spec.title;if(t)return Pe(t)?t:t.text}_cache(t,n){return Nu(this,t,n)}_invalidateCacheByPrefix(t,n="self"){switch(n){case"self":zu(this,t);break;case"ancestors":for(const r of this.getLayoutAncestors())zu(r,t);break;case"progeny":this.visit(r=>zu(r,t));break}}invalidateSizeCache(){this._invalidateCacheByPrefix("size/","ancestors")}propagateInteractionEvent(t){}}Fa=new WeakMap,Jl=new WeakMap,ef=new WeakMap,yo=new WeakSet,wf=function(t){var i;let n=this.spec[t];const r=t=="viewportWidth"||t=="viewportHeight";if(px(n)){if(r)throw new Wi(`Cannot use step-based size with "${t}"!`,this);const o=n.step,a=(i=this.getScaleResolution(t=="width"?"x":"y"))==null?void 0:i.scale;if(a){let s=0;if(zn(a.type))s=a.domain().length;else if(["locus","index"].includes(a.type)){const l=a.domain();s=ys(l)-l[0]}else throw new Wi(`Cannot use step-based size with "${a.type}" scale!`,this);const f=a;return s=Fd(s,f.paddingInner(),f.paddingOuter()),{px:s*o,grow:0}}else throw new Wi("Cannot use 'step' size with missing scale!",this)}else return(n&&hx(n))??(r?void 0:{px:0,grow:1})},tf=new WeakSet,um=function(t){const n=[];let r=this;do n.push(r),r=r[t];while(r);return n};function QF(e){return"unitsPerPixel"in e}function XF(e){const t=e.spec.opacity;if(t!==void 0){if(kt(t))return n=>n*t;if(QF(t)){const n=o=>{var s;const a=(s=e.getScaleResolution(o))==null?void 0:s.scale;if(["linear","index","locus"].includes(a==null?void 0:a.type))return a},r=t.channel?n(t.channel):n("x")??n("y");if(!r)throw new Wi("Cannot find a resolved quantitative scale for dynamic opacity!",e);const i=_d().domain(t.unitsPerPixel).range(t.values).clamp(!0);return o=>{const s=Cf(r.domain())/1e3;return i(s)*o}}else if(sr(t)){const n=e.context.paramBroker.createExpression(t.expr);return r=>n(null)*r}}return n=>n}const px=e=>!!(e!=null&&e.step);class Qi extends YF{constructor(t,n,r,i,o,a){super(t,n,r,i,o,a),this.spec=t}async initializeChildren(){}*[Symbol.iterator](){}replaceChild(t,n){throw new Error("Not implemented")}visit(t){let n;try{n=t(this)}catch(r){throw r.view=this,r}if(n===Qs)return n;if(n!==ZF){t.beforeChildren&&t.beforeChildren(this);for(const r of this){const i=r.visit(t);if(i===Qs)return i}t.afterChildren&&t.afterChildren(this),t.postOrder&&t.postOrder(this)}}findDescendantByPath(t){for(const n of this)if(n.name===t[0]){if(t.length==1)return n;if(n instanceof Qi)return n.findDescendantByPath(t.slice(1))}}findChildByName(t){for(const n of this)if(n.name===t)return n}findDescendantByName(t){let n;return this.visit(r=>{if(r.name==t)return n=r,Qs}),n}getDefaultResolution(t,n){return"shared"}}const gx=1;function k0(){let e=[0,1],t=[0,1],n=1,r=1,i=0,o=0,a=.5,s=0;const l=u=>(u+a-e[0])/n*r+t[0];return l.invert=u=>(u-t[0])/r*n+e[0]-a,l.domain=function(u){if(arguments.length){e=H3(u),n=e[1]-e[0];const c=e[0]===0&&e[0]===0;if(n<gx&&!c){n=gx;const h=(e[0]+e[1])/2;e[0]=h-n/2,e[1]=h+n/2}return l}else return e.slice()},l.range=function(u){return arguments.length?(t=[...u],r=t[1]-t[0],l):t},l.numberingOffset=function(u){return arguments.length?(s=u,l):s},l.padding=function(u){return arguments.length?(o=u,i=Math.min(1,u),l):i},l.paddingInner=function(u){return arguments.length?(i=Math.min(1,u),l):i},l.paddingOuter=function(u){return arguments.length?(o=u,l):o},l.align=function(u){return arguments.length?(a=Math.max(0,Math.min(1,u)),l):a},l.step=()=>r/n,l.bandwidth=()=>l.step(),l.ticks=u=>{const c=l.align(),h=l.numberingOffset();return Df(e[0]-c+h,e[1]-c+h,Math.min(u,Math.ceil(n))).filter(Number.isInteger).map(d=>d-s)},l.tickFormat=(u,c)=>{if(c)throw new Error("Index scale's tickFormat does not support a specifier!");const d=Ir(e[0],e[1],Math.min(u,Math.ceil(n)))<1e5?mt(","):mt(".3s");return p=>d(p+s)},l.copy=()=>k0().domain(e).range(t).paddingInner(i).paddingOuter(o).numberingOffset(s),l}function KF(){const e=k0().numberingOffset(1);let t;e.genome=function(r){return arguments.length?(t=r,e):t},e.ticks=r=>{if(!t)return[];const i=e.domain(),o=e.numberingOffset(),[a,s]=[Math.max(i[0],0),Math.min(i[1],t.totalSize-1)].map(u=>t.toChromosome(u)),f=Math.max(1,Ir(i[0],i[1],r)),l=[];for(let u=a.index;u<=s.index;u++){const c=t.chromosomes[u],h=Math.max(c.continuousStart+f,i[0]-(i[0]-c.continuousStart)%f),d=Math.min(c.continuousEnd-f/4,i[1]+1);for(let p=h;p<=d;p+=f){const m=p-o;m>=i[0]&&m<i[1]&&l.push(m)}}return l},e.tickFormat=(r,i)=>{if(!t)return;if(i)throw new Error("Locus scale's tickFormat does not support a specifier!");const o=e.domain(),a=o[1]-o[0],s=e.numberingOffset(),l=Ir(o[0],o[1],Math.min(r,Math.ceil(a)))<1e6?mt(","):mt(".3s"),u=c=>c-t.toChromosome(c).continuousStart;return c=>l(u(c)+s)};const n=e.copy;return e.copy=()=>n().genome(t),e}function JF(e){return e.type=="locus"}function ju(e,t,n){if(n=n||[],e.some(a=>a===null)){if(e.every(a=>a===null))return null;throw console.warn(e),new Error("Cannot merge objects with nulls!")}const r={},i=(a,s)=>a===s||Qo(a)&&Qo(s)||Qo(a)&&s===!0||a===!0&&Rt(s),o=a=>{for(let s in a){const f=a[s];if(!n.includes(s)&&f!==void 0)if(r[s]!==void 0&&!i(r[s],f))console.warn(`Conflicting property ${s} of ${t}: (${JSON.stringify(r[s])} and ${JSON.stringify(a[s])}). Using ${JSON.stringify(r[s])}.`);else{const l=r[s];if(Qo(l))Qo(f)&&(r[s]=ju([l,f],s));else if(Qo(f)){if(!(l===!0||l===void 0))throw new Error("Bug in merge! Target is: "+l);r[s]=ju([{},f],s)}else r[s]=f}}};for(const a of e)o(a);return r}function Qo(e){return Rt(e)&&!Array.isArray(e)}/*!
 * Adapted from vega-encode:
 * https://github.com/vega/vega/blob/master/packages/vega-encode/src/ticks.js
 *
 * Copyright (c) 2015-2018, University of Washington Interactive Data Lab
 * All rights reserved.
 *
 * BSD-3-Clause License: https://github.com/vega/vega-lite/blob/master/LICENSE
 */function mx(e,t,n){return kt(t)&&n!=null&&(t=Math.min(t,~~(Cf(e.domain())/n)||1)),Rt(t)&&(t.step,t=t.interval),t}function bx(e,t,n){var r=e.range(),i=Math.floor(r[0]),o=Math.ceil(yn(r));if(i>o&&(r=o,o=i,i=r),t=t.filter(function(s){return s=e(s),i<=s&&s<=o}),n>0&&t.length>1){for(var a=[t[0],yn(t)];t.length>n&&t.length>=3;)t=t.filter(function(s,f){return!(f%2)});t.length<3&&(t=a)}return t}function eR(e,t){return e.bins?bx(e,tR(e.bins,t)):e.ticks?e.ticks(t):e.domain()}function tR(e,t){var n=e.length,r=~~(n/(t||n));return r<2?e.slice():e.filter(function(i,o){return!(o%r)})}function nR(e,t,n){var r=e.tickFormat?e.tickFormat(t,n):n?mt(n):String;if(wy(e.type)){var i=iR(n);r=e.bins?i:rR(r,i)}return r}function rR(e,t){return function(n){return e(n)?t(n):""}}function iR(e){var t=Br(e||",");if(t.precision==null){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1;break}return oR(mt(t),mt(".1f")(1)[1])}else return mt(t)}function oR(e,t){return function(n){var r=e(n),i=r.indexOf(t),o,a;if(i<0)return r;for(o=aR(r,i),a=o<r.length?r.slice(o):"";--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+a}}function aR(e,t){var n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}/*!
 * Adapted from vega-encode:
 * https://github.com/vega/vega/blob/master/packages/vega-encode/src/Scale.js
 *
 * Copyright (c) 2015-2018, University of Washington Interactive Data Lab
 * All rights reserved.
 *
 * BSD-3-Clause License: https://github.com/vega/vega-lite/blob/master/LICENSE
 */const sR="locus",lR="index";var fR=5;function uR(e){const t=e.type;return!e.bins&&(t===Po||t===Fs||t===Rs)}function yx(e){return yt(e)&&![Nn,lR,sR].includes(e)}function wx(e){return e||{warn:(t,...n)=>console.warn(t,...n)}}var cR=Tf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma","zoom","fp64","name"]);function xx(e,t,n){n=wx(n);for(const r in e)if(!cR[r]){if(r==="padding"&&yx(t.type))continue;Mt(t[r])?t[r](e[r]):n.warn("Unsupported scale property: "+r)}wR(t,e,yR(t,e,gR(t,e,n)))}function hR(e,t){const n=dR(e),r=Ee(n);if(!r)throw new Error("Unknown scale type: "+n);const i=r();return!e.domain&&yt(i.type)&&(e.domain=[0,0]),xx(e,i,t),i}function dR(e){var t=e.type,n="",r;return t===Nn?Nn+"-"+Po:(pR(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Nn+"-":r===3?Oo+"-":""),(n+t||Po).toLowerCase())}function pR(e){const t=e.type;return yt(t)&&t!==cy&&t!==hy&&(e.scheme||e.range&&e.range.length&&e.range.every(Pe))}function gR(e,t,n){if(!e.domain)return 0;n=wx(n);var r=mR(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,a=t.zero||t.zero===void 0&&uR(e),s,f;return i?(yx(o)&&t.padding&&i[0]!==yn(i)&&(i=bR(o,i,t.range,t.padding,t.exponent,t.constant)),(a||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(s=(i=i.slice()).length-1||1,a&&(i[0]>0&&(i[0]=0),i[s]<0&&(i[s]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[s]=t.domainMax),t.domainMid!=null&&(f=t.domainMid,(f<i[0]||f>i[s])&&n.warn("Scale domainMid exceeds domain min or max.",f),i.splice(s,0,f))),e.domain(vx(o,i,n)),o===Md&&e.unknown(t.domainImplicit?td:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&mx(e,t.nice)||null),i.length):0}function mR(e,t,n){return t?(e.domain(vx(e.type,t,n)),t.length):-1}function bR(e,t,n,r,i,o){var a=Math.abs(yn(n)-n[0]),s=a/(a-2*r),f=e===Gr?Am(t,null,s):e===Rs?ch(t,null,s,.5):e===Fs?ch(t,null,s,i||1):e===fu?h3(t,null,s,o||1):vm(t,null,s);return t=t.slice(),t[0]=f[0],t[t.length-1]=f[1],t}function vx(e,t,n){if(wy(e)){var r=Math.abs(t.reduce(function(i,o){return i+(o<0?-1:o>0?1:0)},0));r!==t.length&&n.warn("Log scale domain includes zero: "+kf(t))}return t}function yR(e,t,n){let r=t.bins;if(r&&!Ct(r)){const i=(r.start==null||r.stop==null)&&e.domain(),o=r.start==null?i[0]:r.start,a=r.stop==null?yn(i):r.stop,s=r.step;s||Qe("Scale bins parameter missing step property."),r=Za(o,a+s,s)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Od&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function wR(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=xR(r,t,n);else if(t.scheme&&(o=vR(r,t,n),Mt(o))){if(e.interpolator)return e.interpolator(o);Qe(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&cu(r))return e.interpolator(hu(T0(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(xy(t.interpolate,t.interpolateGamma)):Mt(e.round)?e.round(i):Mt(e.rangeRound)&&e.interpolate(i?Bs:zr),o&&e.range(T0(o,t.reverse))}function xR(e,t,n){e!==gy&&e!==Pd&&Qe("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===Pd?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Fd(n,i,r)]}function vR(e,t,n){var r=t.schemeExtent,i,o;return Ct(t.scheme)?o=hu(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=Nd(i),o||Qe(`Unrecognized scheme name: ${t.scheme}`)),n=e===py?n+1:e===Od?n-1:e===Rd||e===dy?+t.schemeCount||fR:n,cu(e)?Ax(o,r,t.reverse):Mt(o)?MT(Ax(o,r),n):e===Md?o:o.slice(0,n)}function Ax(e,t,n){return Mt(e)&&(t||n)?RT(e,T0(t||[0,1],n)):e}function T0(e,t){return t?e.slice().reverse():e}const Ex=mt(",d");function AR(e,t){return e.chrom+":"+Ex(Math.floor(e.pos+1))+"-"+(e.chrom!=t.chrom?t.chrom+":":"")+Ex(Math.ceil(t.pos))}const ER="https://genomespy.app/data/genomes/";class _R{constructor(t){if(this.config=t,!this.config.contigs&&typeof this.config.name!="string")throw new Error("No name has been defined for the genome assembly!");this.chromosomes=[],this.cumulativeChromPositions=new Map,this.chromosomesByName=new Map,this.startByIndex=[],this.totalSize=0,this.config.contigs&&this.setChromSizes(this.config.contigs)}get name(){return this.config.name}async load(t){if(!this.config.contigs){this.config.baseUrl?this.baseUrl=/^http(s)?/.test(this.config.baseUrl)?this.config.baseUrl:t+"/"+this.config.baseUrl:this.baseUrl=ER;try{this.setChromSizes(SR(await Gf({baseURL:this.baseUrl}).load(`${this.config.name}/${this.name}.chrom.sizes`)))}catch(n){throw new Error(`Could not load chrom sizes: ${n.message}`)}}}hasChrPrefix(){return this.chromosomes.some(t=>t.name.startsWith("chr"))}setChromSizes(t){let n=0;this.startByIndex=[0];for(let r=0;r<t.length;r++){this.startByIndex.push(n);const i=t[r].size,o={...t[r],continuousStart:n,continuousEnd:n+i,continuousInterval:[n,n+i],index:r,number:r+1,odd:!(r&1)};this.chromosomes.push(o);const a=o.name.replace(/^chr/i,"");for(const s of["chr"+a,"CHR"+a,"Chr"+a,o.number,""+o.number,a,o.name])this.cumulativeChromPositions.set(s,n),this.chromosomesByName.set(s,o);n+=o.size}this.totalSize=n}getExtent(){return[0,this.totalSize]}toContinuous(t,n){let r=this.cumulativeChromPositions.get(t);if(r===void 0)throw new Error("Unknown chromosome/contig: "+t);return r+ +n}toChromosome(t){if(t>this.totalSize)return;t=Math.floor(t);const n=kr(this.startByIndex,t)-1;if(n>0&&n<=this.chromosomes.length)return this.chromosomes[n-1]}toChromosomal(t){const n=this.toChromosome(t);if(n)return{chrom:n.name,pos:Math.floor(t)-n.continuousStart}}getChromosome(t){return this.chromosomesByName.get(t)}formatInterval(t){return AR(...this.toChromosomalInterval(t))}toChromosomalInterval(t){const n=this.toChromosomal(t[0]+.5),r=this.toChromosomal(t[1]-.5);return r.pos+=1,[n,r]}toContinuousInterval(t){var i;let[n,r]=t;return r||(r=n),[this.toContinuous(n.chrom,n.pos??0),this.toContinuous(r.chrom,r.pos??((i=this.chromosomesByName.get(r.chrom))==null?void 0:i.size))]}toDiscreteChromosomeIntervals(t){const n=t[0],r=t[1],i=[];if(n.chrom===r.chrom)i.push({chrom:n.chrom,startPos:n.pos,endPos:r.pos});else{const o=this.chromosomes.findIndex(s=>s.name===n.chrom),a=this.chromosomes.findIndex(s=>s.name===r.chrom);i.push({chrom:n.chrom,startPos:n.pos,endPos:this.chromosomes[o].size});for(let s=o+1;s<a;s++)i.push({chrom:this.chromosomes[s].name,startPos:0,endPos:this.chromosomes[s].size});i.push({chrom:r.chrom,startPos:0,endPos:r.pos})}return i}continuousToDiscreteChromosomeIntervals(t){return this.toDiscreteChromosomeIntervals([this.toChromosomal(t[0]),this.toChromosomal(t[1])])}parseInterval(t){const n=t.match(/^(chr[0-9A-Z]+)(?::([0-9,]+)(?:-(?:(chr[0-9A-Z]+):)?([0-9,]+))?)?$/);if(n){const r=n[1];if(n.slice(2).every(s=>s===void 0)){const s=this.getChromosome(r);return s?[s.continuousStart,s.continuousEnd]:void 0}const i=n[3]||r,o=parseInt(n[2].replace(/,/g,"")),a=n[4]!==void 0?parseInt(n[4].replace(/,/g,"")):o;return[this.toContinuous(r,o-1),this.toContinuous(i,a)]}}}function SR(e){return D3(e).filter(t=>/^chr[0-9A-Z]+$/.test(t[0])).map(([t,n])=>({name:t,size:parseInt(n)}))}function _x(e){return Rt(e)&&"chrom"in e}function CR(e){return e.every(_x)}class Xs extends Array{constructor(){super(),this.type=void 0}extend(t){return this}extendAll(t){if(t instanceof Xs&&t.type!=this.type)throw new Error(`Cannot combine different types of domains: ${this.type} and ${t.type}`);for(const n of t)this.extend(n);return this}extendAllWithAccessor(t,n){for(const r of t)this.extend(n(r));return this}}class I0 extends Xs{constructor(){super(),this.type="quantitative"}extend(t){return t==null||Number.isNaN(t)?this:(t=+t,this.length?t<this[0]?this[0]=t:t>this[1]&&(this[1]=t):(this.push(t),this.push(t)),this)}}class Sx extends Xs{constructor(){super(),this.type="ordinal",this.uniqueValues=new Set}extend(t){return t==null||Number.isNaN(t)?this:(this.uniqueValues.has(t)||(this.uniqueValues.add(t),this.push(t)),this)}}class Cx extends Sx{constructor(){super(),this.type="nominal"}}class kR extends Xs{constructor(t){super();let n=0;for(let r=1;r<t.length;r++)n+=Math.sign(t[r]-t[r-1]);if(Math.abs(n)!=t.length-1)throw new Error("Piecewise domain must be strictly increasing or decreasing: "+JSON.stringify(t));t.forEach(r=>this.push(r))}extend(t){if(this.includes(t))return this;throw new Error("Piecewise domains are immutable and cannot be unioned!")}}const kx={quantitative:I0,index:I0,locus:I0,nominal:Cx,ordinal:Sx};function Tx(e,t){if(e=="quantitative"&&TR(t)){const n=new kR(t);return n.type=e,n}else if(kx[e]){const n=new kx[e];return n.type=e,t&&n.extendAll(t),n}throw new Error("Unknown type: "+e)}function TR(e){return e&&e.length>0&&e.length!=2&&e.every(t=>typeof t=="number")}function IR(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}function BR(e,t,n){return e*Math.pow(t/e,n)}Ee("index",k0,["continuous"]),Ee("locus",KF,["continuous"]),Ee("null",du,[]);const Ix="quantitative",Bx="ordinal",Dx="nominal",Fx="locus",DR="index";class FR{constructor(t){ee(this,Xc);ee(this,In);ee(this,rf);ee(this,Kc);ee(this,Jc);ee(this,of);ee(this,af);ee(this,Ma);ee(this,wr);ee(this,sf);ee(this,eh);ee(this,nm);ee(this,lf);ee(this,yr,void 0);ee(this,Ra,{domain:new Set,range:new Set});ee(this,Kt,void 0);ee(this,nf,new Set);this.channel=t,this.members=[],this.type=null,this.name=void 0}addEventListener(t,n){W(this,Ra)[t].add(n)}removeEventListener(t,n){W(this,Ra)[t].delete(n)}pushUnitView(t,n){var a;const r=w0(t,n),i=r.type,o=(a=r==null?void 0:r.scale)==null?void 0:a.name;if(o){if(this.name!==void 0&&o!=this.name)throw new Error(`Shared scales have conflicting names: "${o}" vs. "${this.name}"!`);this.name=o}if(!this.type)this.type=i;else if(i!==this.type&&!Ws(n))throw new Error(`Can not use shared scale for different data types: ${this.type} vs. ${i}. Use "resolve: independent" for channel ${this.channel}`);this.members.push({view:t,channel:n})}getConfiguredDomain(){return J(this,lf,gm).call(this,t=>Ws(t.channel)?void 0:t.view.getConfiguredDomain(t.channel))}getDataDomain(){return J(this,lf,gm).call(this,t=>Ws(t.channel)?void 0:t.view.extractDataDomain(t.channel))}reconfigure(){const t=W(this,Kt);if(!t||t.type=="null")return;const n=J(this,Kc,QS).call(this),r=t.domain(),i=J(this,of,hm).call(this);if(xx({...i,range:void 0},t),t.props=i,J(this,af,dm).call(this),yt(t.type)&&He(this,yr,J(this,sf,pm).call(this)),!n){J(this,In,Cr).call(this,"domain");return}const o=t.domain();qh(o,r)||(this.isZoomable()?t.domain(r):J(this,wr,Eo).call(this)?(t.domain(r),this.zoomTo(o,500)):J(this,In,Cr).call(this,"domain"))}get scale(){if(W(this,Kt))return W(this,Kt);const t=J(this,of,hm).call(this),n=hR({...t,range:void 0});n.props=t,He(this,Kt,n),J(this,af,dm).call(this),JF(n)&&n.genome(this.getGenome()),yt(n.type)&&He(this,yr,J(this,sf,pm).call(this));const r=n.range;if(r){const i=()=>J(this,In,Cr).call(this,"range");n.range=function(o){if(arguments.length)r(o),i();else return r()},i()}return n}getDomain(){return this.scale.domain()}getComplexDomain(){var t;return((t=this.getGenome())==null?void 0:t.toChromosomalInterval(this.getDomain()))??this.getDomain()}isZoomed(){return J(this,wr,Eo).call(this)&&qh(J(this,Ma,lh).call(this),this.getDomain())}isZoomable(){return J(this,wr,Eo).call(this)&&!!this.scale.props.zoom}zoom(t,n,r){if(!J(this,wr,Eo).call(this))return!1;const i=this.scale,o=i.domain();let a=[...o],s=i.invert(n);switch(i.props.reverse&&(r=-r),"align"in i&&(s+=i.align()),i.type){case"linear":case"index":case"locus":a=f3(a,r||0),a=vm(a,s,t);break;case"log":a=u3(a,r||0),a=Am(a,s,t);break;case"pow":case"sqrt":{const f=i;a=c3(a,r||0,f.exponent()),a=ch(a,s,t,f.exponent());break}default:throw new Error("Zooming is not implemented for: "+i.type)}return W(this,yr)&&(a=d3(a,W(this,yr)[0],W(this,yr)[1])),[0,1].some(f=>a[f]!=o[f])?(i.domain(a),J(this,In,Cr).call(this,"domain"),!0):!1}async zoomTo(t,n=!1){var s;if($a(n)&&(n=n?700:0),!J(this,wr,Eo).call(this))throw new Error("Not a zoomable scale!");const r=this.fromComplexInterval(t),i=(s=this.members[0])==null?void 0:s.view.context.animator,o=this.scale,a=o.domain();if(n>0&&a.length==2){const f=a[1]-a[0],l=a[0]+f/2,u=r[1]-r[0],c=r[0]+u/2;await i.transition({duration:n,easingFunction:IR,onUpdate:h=>{const d=BR(f,u,h),p=(f-d)/(f-u),m=p*c+(1-p)*l;o.domain([m-d/2,m+d/2]),J(this,In,Cr).call(this,"domain")}}),o.domain(r),J(this,In,Cr).call(this,"domain")}else o.domain(r),i==null||i.requestRender(),J(this,In,Cr).call(this,"domain")}resetZoom(){if(!J(this,wr,Eo).call(this))throw new Error("Not a zoomable scale!");const t=this.getDomain(),n=J(this,Ma,lh).call(this);return[0,1].some(r=>n[r]!=t[r])?(W(this,Kt).domain(n),J(this,In,Cr).call(this,"domain"),!0):!1}getZoomLevel(){return this.isZoomable()?Cf(W(this,yr))/Cf(this.scale.domain()):1}getGenome(){var n;if(this.type!=="locus")return;const t=(n=this.members[0].view.context.genomeStore)==null?void 0:n.getGenome();if(!t)throw new Error("No genome has been defined!");return t}invertToComplex(t){const n=this.scale;if("invert"in n){const r=n.invert(t);return this.toComplex(r)}else throw new Error("The scale does not support inverting!")}toComplex(t){const n=this.getGenome();return n?n.toChromosomal(t):t}fromComplex(t){return _x(t)?this.getGenome().toContinuous(t.chrom,t.pos):t}fromComplexInterval(t){return this.type==="locus"&&CR(t)?this.getGenome().toContinuousInterval(t):t}}yr=new WeakMap,Ra=new WeakMap,Kt=new WeakMap,nf=new WeakMap,Xc=new WeakSet,YS=function(){return this.members[0].view.context},In=new WeakSet,Cr=function(t){for(const n of W(this,Ra)[t].values())n({type:t,scaleResolution:this})},rf=new WeakSet,cm=function(){return!!this.getConfiguredDomain()},Kc=new WeakSet,QS=function(){const t=W(this,Kt);if(!t)return!1;const n=t.domain();return yt(t.type)?n.length>2||n.length==2&&(n[0]!==0||n[1]!==0):n.length>0},Jc=new WeakSet,XS=function(){const t=this.members.map(n=>w0(n.view,n.channel).scale).filter(n=>n!==void 0);return ju(t,"scale",["domain"])},of=new WeakSet,hm=function(){const t=J(this,Jc,XS).call(this);if(t===null||t.type=="null")return{type:"null"};const n={...J(this,eh,KS).call(this,this.type),...t};n.type||(n.type=RR(this.channel,this.type));const r=J(this,Ma,lh).call(this);return r&&r.length>0?n.domain=r:zn(n.type)&&(n.domain=new Cx),!n.domain&&n.domainMid!==void 0&&(n.domain=[n.domainMin??0,n.domainMax??1]),this.channel=="y"&&zn(n.type)&&n.reverse==null&&(n.reverse=!0),n.range&&n.scheme&&delete n.scheme,!("zoom"in n)&&["index","locus"].includes(n.type)&&(n.zoom=!0),MR(n,this.channel),n},af=new WeakSet,dm=function(){const t=W(this,Kt).props,n=t.range;if(W(this,nf).forEach(i=>i.invalidate()),!n||!Ct(n))return;const r=(i,o)=>o?i.slice().reverse():i;if(n.some(sr)){let i;const o=()=>{W(this,Kt).range(r(i.map(a=>a()),t.reverse))};i=n.map(a=>{if(sr(a)){const s=W(this,Xc,YS).paramBroker.createExpression(a.expr);return s.addListener(o),W(this,nf).add(s),()=>s(null)}else return()=>a}),o()}else W(this,Kt).range(r(n,t.reverse))},Ma=new WeakSet,lh=function(){return this.getConfiguredDomain()??(this.type==Fx?this.getGenome().getExtent():this.getDataDomain())},wr=new WeakSet,Eo=function(){const t=this.scale.type;return yt(t)},sf=new WeakSet,pm=function(){const t=this.scale.props,n=t.zoom;if(PR(n)&&Ct(n.extent))return this.fromComplexInterval(n.extent);if(n)return t.type=="locus"?this.getGenome().getExtent():W(this,Kt).domain()},eh=new WeakSet,KS=function(t){const n=this.channel,r={};return J(this,rf,cm).call(this)&&(r.zero=!1),qs(n)?r.nice=!J(this,rf,cm).call(this):Zr(n)?r.scheme=t==Dx?"tableau10":t==Bx?"blues":"viridis":Hu(n)?r.range=n=="shape"?["circle","square","triangle-up","cross","diamond"]:[]:n=="size"?r.range=[0,400]:n=="angle"&&(r.range=[0,360]),r},nm=new WeakSet,QU=function(){return this.members.map(t=>t.view.getPathString()).join(", ")},lf=new WeakSet,gm=function(t){const n=this.members.filter(r=>!r.view.getLayoutAncestors().some(i=>!i.options.contributesToScaleDomain)).map(t).filter(r=>!!r);if(n.length)return n.reduce((r,i)=>r.extendAll(i))};function RR(e,t){if(t==DR||t==Fx){if(tx(e))return t;throw new Error(`${e} does not support ${t} data type. Only positional channels do.`)}const n={x:["band","band","linear"],y:["band","band","linear"],size:[void 0,"point","linear"],opacity:[void 0,"point","linear"],fillOpacity:[void 0,"point","linear"],strokeOpacity:[void 0,"point","linear"],color:["ordinal","ordinal","linear"],fill:["ordinal","ordinal","linear"],stroke:["ordinal","ordinal","linear"],strokeWidth:[void 0,void 0,"linear"],shape:["ordinal","ordinal",void 0],dx:[void 0,void 0,"null"],dy:[void 0,void 0,"null"],angle:[void 0,void 0,"linear"]},i=["sample"].includes(e)?"null":n[e]?n[e][[Dx,Bx,Ix].indexOf(t)]:t==Ix?"linear":"ordinal";if(i===void 0)throw new Error(`Channel "${e}" is not compatible with "${t}" data type. Use of a proper scale may be needed.`);return i}function MR(e,t){qs(t)&&e.type!=="ordinal"&&(e.range=[0,1]),t=="opacity"&&yt(e.type)&&(e.clamp=!0)}function PR(e){return Rt(e)}function B0(e){const t=new Set;function n(r){for(const i of Object.values(r.resolutions.scale))t.add(i)}for(const r of Ot(e)){r.visit(n);for(const i of r.getDataAncestors()){if(!i.options.contributesToScaleDomain)break;n(i)}}t.forEach(r=>r.reconfigure())}function D0(...e){for(const t of e)if(t!==void 0)return t}class OR{constructor(t){this.channel=t,this.members=[]}get scaleResolution(){var t;return(t=ys(this.members))==null?void 0:t.view.getScaleResolution(this.channel)}pushUnitView(t,n){const r=t.getScaleResolution(this.channel);if(!r)throw new Error("Cannot find a scale resolution!");if(this.scaleResolution&&r!==this.scaleResolution)throw new Error("Shared axes must have a shared scale!");this.members.push({view:t,channel:n})}getAxisProps(){return Nu(this,"axisProps",()=>{const t=this.members.map(n=>{const r=n.view.mark.encoding[n.channel];return"axis"in r&&r.axis});return t.length>0&&t.some(n=>n===null)?null:ju(t.filter(n=>n!==void 0),"axis",["title"])})}getTitle(){const t=o=>{var s;const a=w0(o.view,o.channel);if(!nn(a))return{member:o,explicitTitle:D0("axis"in a?(s=a.axis)==null?void 0:s.title:void 0,a.title),implicitTitle:D0(Zi(a)?a.field:void 0,Gu(a)?a.expr:void 0)}},n=this.members.map(t),r=n.filter(o=>{var a;if(Ws(o.member.channel)&&!o.explicitTitle){const s=Yi(o.member.channel);return((a=n.find(f=>f.member.view==o.member.view&&f.member.channel==s))==null?void 0:a.explicitTitle)===void 0}return!0}),i=new Set(r.map(o=>D0(o.explicitTitle,o.implicitTitle)).filter(Pe));return i.size?[...i].join(", "):null}}const LR={point:SF,rect:bF,rule:IF,link:OF,text:VF};class Zt extends Qi{constructor(t,n,r,i,o,a){super(t,n,r,i,o,a),this.spec=t;const s=LR[this.getMarkType()];if(s)this.mark=new s(this);else throw new Error(`No such mark: ${this.getMarkType()}`);this.resolve(),this.needsAxes={x:!0,y:!0}}render(t,n,r={}){super.render(t,n,r),this.isConfiguredVisible()&&(t.pushView(this,n),t.renderMark(this.mark,r),t.popView(this))}getMarkType(){return typeof this.spec.mark=="object"?this.spec.mark.type:this.spec.mark}resolve(t){t||(this.resolve("scale"),this.resolve("axis"));const n=this.mark.encoding;for(const[r,i]of Object.entries(n)){if(!Wt(i))continue;const o=Yi(i.resolutionChannel??r);if(!Zo(o)||t=="axis"&&!qs(o))continue;let a=this;for(;(a.getConfiguredOrDefaultResolution(o,t)=="forced"||a.dataParent instanceof Qi&&["shared","excluded","forced"].includes(a.dataParent.getConfiguredOrDefaultResolution(o,t)))&&a.getConfiguredOrDefaultResolution(o,t)!="excluded";)a=a.dataParent;if(t=="axis"&&qs(r)&&tx(o))a.resolutions[t][o]||(a.resolutions[t][o]=new OR(o)),a.resolutions[t][o].pushUnitView(this,r);else if(t=="scale"&&Zo(r)){if(!a.resolutions[t][o]){const s=new FR(o);a.resolutions[t][o]=s,s.addEventListener("range",f=>{var l;(l=this.context.glHelper)==null||l.createRangeTexture(f.scaleResolution,!0)})}a.resolutions[t][o].pushUnitView(this,r)}}}getAccessor(t){return this._cache("accessor/"+t,()=>{const n=this.mark.encoding;if(n&&n[t])return this.context.accessorFactory.createAccessor(n[t])})}getFacetAccessor(t){const n=this.getAccessor("sample");return n||super.getFacetAccessor(this)}getCollector(){return this.context.dataFlow.findCollectorByKey(this)}_validateDomainQuery(t){if(Ws(t))throw new Error(`getDomain(${t}), must only be called for primary channels!`);const n=this.mark.encoding[t];if(!Wt(n))throw new Error("The channel has no scale, cannot get domain!");return n}getConfiguredDomain(t){const n=this._validateDomainQuery(t),r=n&&n.scale&&n.scale.domain;if(r){const i=this.getScaleResolution(n.resolutionChannel??t);return Tx(n.type??"nominal",i.fromComplexInterval(r))}}extractDataDomain(t){const r=this._validateDomainQuery(t).type??"nominal",i=s=>{let f;const l=this.mark.encoding[s];if(l){const u=this.context.accessorFactory.createAccessor(l);if(u)if(f=Tx(r),u.constant)f.extend(u({}));else{const c=this.getCollector();c!=null&&c.completed&&c.visitData(h=>f.extend(u(h)))}}return f};let o=i(t);const a=x0[t];if(a){const s=i(a);s&&o.extendAll(s)}return o}getZoomLevel(){const t=n=>{var r;return((r=this.getScaleResolution(n))==null?void 0:r.getZoomLevel())??1};return Wo.map(t).reduce((n,r)=>n*r,1)}propagateInteractionEvent(t){this.handleInteractionEvent(void 0,t,!0),t.target=this,!t.stopped&&this.handleInteractionEvent(void 0,t,!1)}getDefaultResolution(t,n){return t=="x"?"shared":"independent"}}function*F0(e,t=[]){for(const[n,r]of e.entries())if(r instanceof Map)for(const i of F0(r,[...t,n]))yield i;else yield[[...t,n],r]}class Rx extends tt{get behavior(){return _0}constructor(t){super(),this.params=t??{type:"collect"},this.observers=[],this.facetBatches=void 0,this._init()}_init(){this._data=[],this.facetBatches=new Tr([],JSON.stringify),this.facetBatches.set(void 0,this._data)}reset(){super.reset(),this._init()}handle(t){this._data.push(t)}beginBatch(t){AF(t)&&(this._data=[],this.facetBatches.set(Ot(t.facetId),this._data))}complete(){var i,o;const t=(i=this.params)==null?void 0:i.sort,n=t?Em(t.field,t.order):void 0,r=a=>{n&&a.sort(n)};if((o=this.params.groupby)!=null&&o.length){if(this.facetBatches.size>1)throw new Error("TODO: Support faceted data!");const a=this.params.groupby.map(f=>Re(f)),s=a.length>1?Bf(this._data,...a):NR(this._data,a[0]);this.facetBatches.clear();for(const[f,l]of F0(s))this.facetBatches.set(f,l)}for(const a of this.facetBatches.values())r(a);if(this.children.length)for(const[a,s]of this.facetBatches.entries()){if(a){const f={type:"facet",facetId:a};for(const l of this.children)l.beginBatch(f)}for(const f of s)this._propagate(f)}super.complete();for(const a of this.observers)a(this)}getData(){switch(this._checkStatus(),this.facetBatches.size){case 0:return[];case 1:return[...this.facetBatches.values()][0];default:{const t=this.facetBatches;return{[Symbol.iterator]:function*(){for(const r of t.values())for(let i=0;i<r.length;i++)yield r[i]}}}}}visitData(t){this._checkStatus();for(const n of this.facetBatches.values())for(let r=0;r<n.length;r++)t(n[r])}getItemCount(){let t=0;for(const n of this.facetBatches.values())t+=n.length;return t}_checkStatus(){if(!this.completed)throw new Error("Data propagation is not completed! No data are available.")}}function NR(e,t){const n=new Map;for(let r=0,i=e.length;r<i;r++){const o=e[r],a=t(o);let s=n.get(a);s||(s=[],n.set(a,s)),s.push(o)}return n}class $u{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(t,n){let r=this.length++;for(;r>0;){const i=r-1>>1,o=this.values[i];if(n>=o)break;this.ids[r]=this.ids[i],this.values[r]=o,r=i}this.ids[r]=t,this.values[r]=n}pop(){if(this.length===0)return;const t=this.ids[0];if(this.length--,this.length>0){const n=this.ids[0]=this.ids[this.length],r=this.values[0]=this.values[this.length],i=this.length>>1;let o=0;for(;o<i;){let a=(o<<1)+1;const s=a+1;let f=this.ids[a],l=this.values[a];const u=this.values[s];if(s<this.length&&u<l&&(a=s,f=this.ids[s],l=u),l>=r)break;this.ids[o]=f,this.values[o]=l,o=a}this.ids[o]=n,this.values[o]=r}return t}peek(){if(this.length!==0)return this.ids[0]}peekValue(){if(this.length!==0)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}class zR extends tt{get behavior(){return Hn}constructor(t){super(),this.params=t,this.startAccessor=Re(t.start),this.endAccessor=Re(t.end),this.chromAccessor=t.chrom?Re(t.chrom):n=>{},this.weightAccessor=t.weight?Re(t.weight):n=>1,this.as={coverage:t.as||"coverage",start:t.asStart||t.start,end:t.asEnd||t.end,chrom:t.asChrom||t.chrom},this.createSegment=new Function("start","end","coverage","chrom","return {"+Object.entries(this.as).filter(([n,r])=>r).map(([n,r])=>`${JSON.stringify(r)}: ${n}`).join(", ")+"};"),this.ends=new $u}reset(){super.reset(),this.initialize()}initialize(){const t=this.as.coverage,n=this.as.end,r=this.as.chrom,i=this.startAccessor,o=this.endAccessor,a=this.chromAccessor,s=this.weightAccessor;let f,l,u,c=0,h;const d=this.ends;d.clear();const p=(y,w,A)=>{if(y==w)return;let S=!1;f&&(f[t]===A?(f[n]=w,S=!0):f[t]!=0&&this._propagate(f)),S||(f=this.createSegment(y,w,A,u))},m=()=>{let y=0;for(;(y=d.peekValue())!==void 0;)p(h,y,c),h=y,c-=d.pop();h=void 0,f&&(this._propagate(f),f=void 0)};this.handle=y=>{const w=i(y);let A=0;for(;(A=d.peekValue())!==void 0&&A<w;)p(h,A,c),h=A,c-=d.pop();if(r){let _=a(y);_!==l&&(m(),u=_,l=u)}h!==void 0&&p(h,w,c),h=w;const S=s(y);c+=S,d.push(S,o(y))},this.complete=()=>{m(),super.complete()},this.beginBatch=y=>{m(),l=void 0,super.beginBatch(y)}}}function UR(e,t,n=0,r=e.length){const i=new $u,o=r-n;let a;for(a=0;a<t&&a<o;a++)i.push(a,e[n+a]);for(;a<o;a++){const l=e[n+a];l>=i.peekValue()&&(i.push(a,l),i.pop())}const s=[];let f;for(;(f=i.pop())!==void 0;)s.push(n+f);return s.reverse()}class GR{constructor(t,n=-1/0,r=1/0){this.maxSize=t,this.lowerLimit=n,this.upperLimit=r;const i=this.maxSize*2+1;this.lowerLimits=new Float64Array(i),this.upperLimits=new Float64Array(i),this.lowerChildren=new Int32Array(i),this.upperChildren=new Int32Array(i),this.reset()}reset(){this.lowerLimits.fill(0),this.upperLimits.fill(0),this.lowerChildren.fill(0),this.upperChildren.fill(0),this.n=1,this.lowerLimits[0]=this.lowerLimit,this.upperLimits[0]=this.upperLimit}_findSlot(t,n,r=0){if(t>=this.lowerLimits[r]&&n<=this.upperLimits[r]){const i=this.lowerChildren[r];if(i){const o=this._findSlot(t,n,i);return o>=0?o:this._findSlot(t,n,this.upperChildren[r])}else return r}else return-1}reserve(t,n){if(n-t<=0)throw new Error("Cannot reserve an empty or negative-size slot!");if(this.n+1>this.lowerLimits.length)return!1;const r=this._findSlot(t,n);if(r<0)return!1;const i=this.n++,o=this.n++;return this.lowerLimits[i]=this.lowerLimits[r],this.upperLimits[i]=t,this.lowerLimits[o]=n,this.upperLimits[o]=this.upperLimits[r],this.lowerChildren[r]=i,this.upperChildren[r]=o,!0}}class HR extends tt{get behavior(){return _0}constructor(t,n){if(super(),this.params=t,this._data=[],this.channel=t.channel??"x",!["x","y"].includes(this.channel))throw new Error("Invalid channel: "+this.channel);this.posAccessor=Re(this.params.pos),this.posBisector=If(this.posAccessor),this.scoreAccessor=Re(this.params.score),this.widthAccessor=Re(this.params.width),this.laneAccessor=this.params.lane?Re(this.params.lane):i=>0,this.padding=this.params.padding??0,this.reservationMaps=new Map,this.resolution=n.getScaleResolution(this.channel);const r=()=>this._filterAndPropagate();this.schedule=()=>n.context.animator.requestTransition(r),this.resolution.addEventListener("domain",i=>this.schedule()),n._addBroadcastHandler("layoutComputed",()=>this.schedule())}complete(){const t=this.posAccessor;this._data.sort((n,r)=>t(n)-t(r)),this._scores=this._data.map(this.scoreAccessor);for(const n of new Set(this._data.map(this.laneAccessor)))this.reservationMaps.set(n,new GR(200));this.schedule(),super.complete()}_filterAndPropagate(){var a;super.reset();const t=this.resolution.scale,n=(a=this.resolution.members[0].view.coords)==null?void 0:a[this.channel=="x"?"width":"height"];if(!n)return;for(const s of this.reservationMaps.values())s.reset();const r=t.domain(),i=70,o=UR(this._scores,i,this.posBisector.left(this._data,r[0]),this.posBisector.right(this._data,r[1]));for(const s of o){const f=this._data[s],l=t(this.posAccessor(f))*n,u=this.widthAccessor(f)/2+this.padding;this.reservationMaps.get(this.laneAccessor(f)).reserve(l-u,l+u)&&this._propagate(f)}super.complete()}reset(){super.reset(),this._data=[],this.groups=new Map}handle(t){this._data.push(t)}}class VR extends tt{constructor(t){super(),this.params=t,this.predicate=void 0}initialize(){this.predicate=Qf(this.params.expr,this.getGlobalObject())}handle(t){this.predicate(t)&&this._propagate(t)}}class jR extends tt{get behavior(){return Hn}constructor(t){super();const n=t.index;if(t.fields){const r=Ot(t.fields).map(o=>Re(o)),i=Ot(t.as||t.fields);if(r.length!==i.length)throw new Error(`Lengths of "fields" (${r.length}), and "as" (${i.length}) do not match!`);this.handle=o=>{const a=r.map((f,l)=>f(o)??[]),s=a[0].length;for(let f=0;f<s;f++){const l=Object.assign({},o);for(let u=0;u<r.length;u++)l[i[u]]=f<a[u].length?a[u][f]:null;n&&(l[n]=f),this._propagate(l)}}}else this.handle=r=>{for(let i=0;i<r.length;i++){const o=Object.assign({},r[i]);n&&(o[n]=i),this._propagate(o)}}}}const $R="0".charCodeAt(0);function*qR(e,t=","){const n=t.charCodeAt(0);let r=0;for(let i=0;i<e.length;i++){const o=e.charCodeAt(i);o==n?(yield r,r=0):r=r*10+o-$R}yield r}class WR extends tt{get behavior(){return Hn}constructor(t){super();const n=Re(t.exons??"exons"),r=Re(t.start??"start"),[i,o]=t.as||["exonStart","exonEnd"];this.handle=a=>{let s=r(a),f=s,l=!0;const u=n(a);for(const c of qR(u)){if(l)f=s+c;else{s=f+c;const h=Object.assign({},a);h[i]=f,h[o]=s,this._propagate(h)}l=!l}}}}class ZR extends tt{get behavior(){return Hn}constructor(t){super();const n=Ot(t.field).map(o=>Re(o)),r=Ot(t.separator),i=Ot(t.as||t.field);if(n.length!==r.length||n.length!==i.length)throw new Error(`Lengths of "separator" (${r.length}), "fields" (${n.length}), and "as" (${i.length}) do not match!`);this.handle=o=>{if(n.some(f=>!f(o)))return;const a=n.map((f,l)=>f(o).split(r[l]));YR(a,o);const s=a[0].length;for(let f=0;f<s;f++){const l=Object.assign({},o);for(let u=0;u<n.length;u++)l[i[u]]=a[u][f];this._propagate(l)}}}}function YR(e,t){const n=e.map(r=>r.length);if(!n.every(r=>r==n[0]))throw new Error("Mismatching number of elements in the fields to be split: "+JSON.stringify(t))}class QR extends tt{get behavior(){return Yr}constructor(t){super(),this.params=t,this.as=t.as,this.fn=void 0}initialize(){this.fn=Qf(this.params.expr,this.getGlobalObject())}handle(t){t[this.as]=this.fn(t),this._propagate(t)}}class Mx extends tt{get behavior(){return Yr}constructor(t,n){super();const r=t.channel??"x";if(!["x","y"].includes(r))throw new Error("Invalid channel: "+r);const i=n.getScaleResolution(r).getGenome();if(!i)throw new Error("LinearizeGenomicCoordinate transform requires a locus scale!");const o=Re(t.chrom),a=Ot(t.pos).map(p=>Re(p)),s=Ot(t.as);if(a.length!=s.length)throw new Error('The number of "pos" and "as" elements must be equal!');const f=Ot(t.offset);let l;if(f.length==0)l=new Array(a.length).fill(0);else if(f.length==1)l=new Array(a.length).fill(f[0]);else if(f.length==a.length)l=f;else throw new Error(`Invalid "offset" parameter: ${JSON.stringify(t.offset)}!`);const u=new Function("datum","chromOffset","posAccessors",s.map((p,m)=>`datum[${JSON.stringify(p)}] = chromOffset + +posAccessors[${m}](datum) - ${l[m]};`).join(`
`));let c,h=0;const d=p=>{if(p!==c){if(h=i.cumulativeChromPositions.get(p),h===void 0)throw new Error("Unknown chromosome/contig: "+p);c=p}return h};this.handle=p=>{u(p,d(o(p)),a),this._propagate(p)}}}const Px={pages:["Lato-Regular.png"],chars:[{id:87,width:53,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:43.491,chnl:15,x:0,y:0,page:0},{id:124,width:17,height:50,xoffset:0,yoffset:-32.193000000000005,xadvance:10.521,chnl:15,x:0,y:42,page:0},{id:40,width:20,height:49,xoffset:0,yoffset:-32.571000000000005,xadvance:11.214,chnl:15,x:0,y:94,page:0},{id:41,width:19,height:49,xoffset:0,yoffset:-32.571000000000005,xadvance:11.214,chnl:15,x:0,y:145,page:0},{id:36,width:32,height:49,xoffset:0,yoffset:-34.419000000000004,xadvance:24.360000000000003,chnl:15,x:0,y:196,page:0},{id:125,width:21,height:48,xoffset:0,yoffset:-32.193000000000005,xadvance:12.642000000000001,chnl:15,x:0,y:247,page:0},{id:91,width:22,height:48,xoffset:0,yoffset:-32.193000000000005,xadvance:12.852,chnl:15,x:0,y:297,page:0},{id:93,width:19,height:48,xoffset:0,yoffset:-32.193000000000005,xadvance:12.852,chnl:15,x:0,y:347,page:0},{id:123,width:21,height:48,xoffset:0,yoffset:-32.193000000000005,xadvance:12.642000000000001,chnl:15,x:0,y:397,page:0},{id:106,width:19,height:48,xoffset:0,yoffset:-30.639000000000003,xadvance:10.08,chnl:15,x:0,y:447,page:0},{id:81,width:43,height:47,xoffset:0,yoffset:-30.429000000000002,xadvance:33.621,chnl:15,x:21,y:447,page:0},{id:77,width:45,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:38.997,chnl:15,x:66,y:447,page:0},{id:64,width:43,height:44,xoffset:0,yoffset:-28.539,xadvance:35.133,chnl:15,x:23,y:397,page:0},{id:92,width:28,height:43,xoffset:0,yoffset:-30.933000000000003,xadvance:18.984,chnl:15,x:68,y:397,page:0},{id:47,width:28,height:43,xoffset:0,yoffset:-30.933000000000003,xadvance:18.984,chnl:15,x:98,y:397,page:0},{id:109,width:42,height:32,xoffset:0,yoffset:-21.609,xadvance:34.545,chnl:15,x:113,y:447,page:0},{id:119,width:42,height:31,xoffset:0,yoffset:-21.315,xadvance:32.991,chnl:15,x:157,y:447,page:0},{id:42,width:25,height:42,xoffset:0,yoffset:-31.626,xadvance:17.85,chnl:15,x:128,y:397,page:0},{id:37,width:42,height:41,xoffset:0,yoffset:-30.387,xadvance:33.663000000000004,chnl:15,x:155,y:397,page:0},{id:79,width:42,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:33.621,chnl:15,x:199,y:397,page:0},{id:102,width:24,height:41,xoffset:0,yoffset:-30.534000000000002,xadvance:14.721,chnl:15,x:243,y:397,page:0},{id:100,width:31,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:23.520000000000003,chnl:15,x:269,y:397,page:0},{id:98,width:32,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:23.520000000000003,chnl:15,x:302,y:397,page:0},{id:56,width:32,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:336,y:397,page:0},{id:38,width:40,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:29.904000000000003,chnl:15,x:370,y:397,page:0},{id:108,width:17,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:9.912,chnl:15,x:412,y:397,page:0},{id:107,width:31,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:21.336000000000002,chnl:15,x:431,y:397,page:0},{id:48,width:33,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:464,y:397,page:0},{id:71,width:38,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:30.681,chnl:15,x:21,y:347,page:0},{id:83,width:31,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:22.785,chnl:15,x:61,y:347,page:0},{id:63,width:27,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:18.795,chnl:15,x:94,y:347,page:0},{id:105,width:18,height:41,xoffset:0,yoffset:-30.639000000000003,xadvance:10.08,chnl:15,x:123,y:347,page:0},{id:51,width:32,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:143,y:347,page:0},{id:104,width:31,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:23.436,chnl:15,x:177,y:347,page:0},{id:67,width:37,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:28.056,chnl:15,x:210,y:347,page:0},{id:88,width:37,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:27.258000000000003,chnl:15,x:249,y:347,page:0},{id:68,width:40,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:31.941000000000003,chnl:15,x:288,y:347,page:0},{id:70,width:32,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:23.751,chnl:15,x:330,y:347,page:0},{id:34,width:23,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:15.561000000000002,chnl:15,x:364,y:347,page:0},{id:72,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:32.067,chnl:15,x:389,y:347,page:0},{id:73,width:18,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:11.760000000000002,chnl:15,x:429,y:347,page:0},{id:74,width:24,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:17.745,chnl:15,x:449,y:347,page:0},{id:75,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:27.825000000000003,chnl:15,x:24,y:297,page:0},{id:76,width:31,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:21.567,chnl:15,x:475,y:347,page:0},{id:66,width:35,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:27.153000000000002,chnl:15,x:64,y:297,page:0},{id:78,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:32.067,chnl:15,x:101,y:297,page:0},{id:33,width:18,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:11.298,chnl:15,x:141,y:297,page:0},{id:80,width:34,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:25.221,chnl:15,x:161,y:297,page:0},{id:65,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:28.434,chnl:15,x:197,y:297,page:0},{id:82,width:36,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:26.313000000000002,chnl:15,x:237,y:297,page:0},{id:35,width:33,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:275,y:297,page:0},{id:84,width:34,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.801000000000002,chnl:15,x:310,y:297,page:0},{id:85,width:37,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:30.891000000000002,chnl:15,x:346,y:297,page:0},{id:86,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:28.434,chnl:15,x:385,y:297,page:0},{id:39,width:16,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:8.568000000000001,chnl:15,x:425,y:297,page:0},{id:69,width:32,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.255000000000003,chnl:15,x:443,y:297,page:0},{id:89,width:36,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:26.208000000000002,chnl:15,x:23,y:247,page:0},{id:90,width:34,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:25.284000000000002,chnl:15,x:477,y:297,page:0},{id:49,width:31,height:40,xoffset:0,yoffset:-30.156000000000002,xadvance:24.360000000000003,chnl:15,x:61,y:247,page:0},{id:50,width:32,height:40,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:94,y:247,page:0},{id:57,width:32,height:40,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:128,y:247,page:0},{id:94,width:32,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:162,y:247,page:0},{id:96,width:21,height:40,xoffset:0,yoffset:-30.429000000000002,xadvance:16.8,chnl:15,x:196,y:247,page:0},{id:55,width:33,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:219,y:247,page:0},{id:54,width:33,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:254,y:247,page:0},{id:53,width:32,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:289,y:247,page:0},{id:52,width:33,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:323,y:247,page:0},{id:103,width:31,height:39,xoffset:0,yoffset:-21.630000000000003,xadvance:21.84,chnl:15,x:358,y:247,page:0},{id:112,width:32,height:39,xoffset:0,yoffset:-21.651,xadvance:23.541,chnl:15,x:391,y:247,page:0},{id:113,width:31,height:39,xoffset:0,yoffset:-21.651,xadvance:23.520000000000003,chnl:15,x:425,y:247,page:0},{id:116,width:25,height:39,xoffset:0,yoffset:-28.182000000000002,xadvance:15.057,chnl:15,x:458,y:247,page:0},{id:121,width:31,height:38,xoffset:0,yoffset:-21.273,xadvance:21.651,chnl:15,x:34,y:196,page:0},{id:59,width:18,height:36,xoffset:0,yoffset:-20.706,xadvance:10.983,chnl:15,x:485,y:247,page:0},{id:43,width:32,height:34,xoffset:0,yoffset:-24.486,xadvance:24.360000000000003,chnl:15,x:67,y:196,page:0},{id:60,width:30,height:33,xoffset:0,yoffset:-23.331000000000003,xadvance:24.360000000000003,chnl:15,x:101,y:196,page:0},{id:62,width:31,height:33,xoffset:0,yoffset:-23.331000000000003,xadvance:24.360000000000003,chnl:15,x:133,y:196,page:0},{id:117,width:30,height:32,xoffset:0,yoffset:-21.273,xadvance:23.415000000000003,chnl:15,x:166,y:196,page:0},{id:99,width:29,height:32,xoffset:0,yoffset:-21.609,xadvance:20.055,chnl:15,x:198,y:196,page:0},{id:110,width:31,height:32,xoffset:0,yoffset:-21.609,xadvance:23.436,chnl:15,x:229,y:196,page:0},{id:111,width:32,height:32,xoffset:0,yoffset:-21.609,xadvance:23.814,chnl:15,x:262,y:196,page:0},{id:126,width:32,height:26,xoffset:0,yoffset:-16.128,xadvance:24.360000000000003,chnl:15,x:201,y:447,page:0},{id:101,width:31,height:32,xoffset:0,yoffset:-21.609,xadvance:22.176000000000002,chnl:15,x:296,y:196,page:0},{id:114,width:25,height:32,xoffset:0,yoffset:-21.651,xadvance:15.288,chnl:15,x:329,y:196,page:0},{id:115,width:27,height:32,xoffset:0,yoffset:-21.609,xadvance:18.186,chnl:15,x:356,y:196,page:0},{id:97,width:28,height:32,xoffset:0,yoffset:-21.651,xadvance:20.874000000000002,chnl:15,x:385,y:196,page:0},{id:118,width:31,height:31,xoffset:0,yoffset:-21.273,xadvance:21.672,chnl:15,x:415,y:196,page:0},{id:61,width:31,height:29,xoffset:0,yoffset:-19.089000000000002,xadvance:24.360000000000003,chnl:15,x:448,y:196,page:0},{id:120,width:30,height:31,xoffset:0,yoffset:-21.273,xadvance:20.916,chnl:15,x:21,y:145,page:0},{id:58,width:18,height:31,xoffset:0,yoffset:-20.706,xadvance:10.5,chnl:15,x:53,y:145,page:0},{id:122,width:28,height:31,xoffset:0,yoffset:-21.273,xadvance:18.984,chnl:15,x:73,y:145,page:0},{id:95,width:28,height:16,xoffset:0,yoffset:0,xadvance:19.278000000000002,chnl:15,x:235,y:447,page:0},{id:45,width:23,height:24,xoffset:0,yoffset:-14.175,xadvance:15.603000000000002,chnl:15,x:481,y:196,page:0},{id:44,width:17,height:21,xoffset:0,yoffset:-4.956,xadvance:9.534,chnl:15,x:103,y:145,page:0},{id:46,width:18,height:15,xoffset:0,yoffset:-4.956,xadvance:9.912,chnl:15,x:0,y:497,page:0},{id:32,width:0,height:0,xoffset:0,yoffset:0,xadvance:10.752,chnl:15,x:20,y:497,page:0}],info:{face:"Lato Regular",size:42,bold:0,italic:0,charset:[" ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~"],unicode:1,stretchH:100,smooth:1,aa:1,padding:[0,0,0,0],spacing:[2,2]},common:{lineHeight:50.400000000000006,base:41.454,scaleW:512,scaleH:512,pages:1,packed:0,alphaChnl:0,redChnl:0,greenChnl:0,blueChnl:0},kernings:[]};class XR extends tt{get behavior(){return Yr}constructor(t){super();const n=A0(Px),r=Re(t.field),i=t.as,o=t.fontSize;this.handle=a=>{const s=r(a);s!==void 0?a[i]=n.measureWidth(s,o):a[i]=0,this._propagate(a)}}}const KR=65536;class JR extends tt{get behavior(){return Yr}constructor(t){super(),this.params=t}reset(){super.reset(),this.initialize()}initialize(){const t=this.params,n=t.as||"lane",r=kt(t.spacing)?t.spacing:1,i=Re(t.start),o=Re(t.end);if(!t.preference!=!t.preferredOrder)throw new Error('Must specify both "preference" and "preferredOrder"');if(t.preference){const a=new Float64Array(KR),s=Re(t.preference),f=t.preferredOrder;let l=1/0;this.handle=u=>{const c=i(u);c<l&&a.fill(-1/0),l=c;const h=f.indexOf(s(u));let d=-1;if(h>=0&&a[h]<c)d=h;else{const p=i(u);for(d=0;d<a.length&&!(a[d]<p);d++);if(d>=a.length)throw new Error("Out of lanes!")}a[d]=o(u)+r,u[n]=d,this._propagate(u)}}else{const a=new $u,s=new $u;let f=-1/0,l=0;this.handle=u=>{const c=i(u);for(;a.length&&(a.peekValue()<=c||c<f);){const d=a.pop();s.push(d,d)}f=c;let h=s.pop();h===void 0&&(h=l++),u[n]=h,this._propagate(u),a.push(h,o(u)+r)}}}}class e5 extends tt{get behavior(){return Hn}constructor(t){if(super(),t.as&&t.as.length!=t.fields.length)throw new Error('"fields" and "as" have unequal lengths!');const n=t.fields.map(i=>Re(i)),r=t.as?t.as:n.map(So);this.handle=i=>{const o={};for(let a=0;a<n.length;a++)o[r[a]]=n[a](i);this._propagate(o)}}}class t5 extends tt{get behavior(){return Yr}constructor(t){super();const n=new RegExp(t.regex),r=typeof t.as=="string"?[t.as]:t.as,i=Re(t.field);this.handle=o=>{const a=i(o);if(Pe(a)){const s=a.match(n);if(s){if(s.length-1!=r.length)throw new Error('The number of RegEx groups and the length of "as" do not match!');for(let f=0;f<r.length;f++)o[r[f]]=s[f+1]}else if(t.skipInvalidInput)for(let f=0;f<r.length;f++)o[r[f]]=void 0;else throw new Error(`"${a}" does not match the given regex: ${n.toString()}`)}else if(!t.skipInvalidInput)throw new Error(`Trying to match a non-string field. Encountered type: ${typeof a}, field content: "${a}".`);this._propagate(o)}}}class n5 extends tt{get behavior(){return Hn}constructor(t){super();const n=Ot(t.columnRegex).map(h=>new RegExp(h)),r=Ot(t.asValue);if(n.length!=r.length)throw new Error('Lengths of "columnRegex" and "as" are not equal!');const i=t.skipRegex?new RegExp(t.skipRegex):void 0,o=t.asKey||"sample";let a,s,f;const l=h=>{var y;const d=Object.keys(h);for(const w of n)if(!d.some(A=>w.test(A)))throw new Error(`No columns matching the regex ${w.toString()} found in the data!`);const p=new Map;for(const[w,A]of n.entries())for(const S of d){const _=(y=A.exec(S))==null?void 0:y[1];if(_!==void 0){let T=p.get(_);T||(T=[],p.set(_,T)),T[w]=S}}a=[...p.entries()],s=d.filter(w=>!n.some(A=>A.test(w))&&!(i&&i.test(w)));const m=[...s.map(w=>JSON.stringify(w)+": datum["+JSON.stringify(w)+"]"),JSON.stringify(o)+": sampleId",...r.map((w,A)=>JSON.stringify(w)+`: datum[attrs[${A}]]`)];f=new Function("datum","sampleId","attrs",`return {
`+m.join(`,
`)+`
};`)},u=h=>{a||l(h);for(let d=0;d<a.length;d++){const[p,m]=a[d],y=f(h,p,m);this._propagate(y)}},c=h=>{l(h),u(h),this.handle=u};this.handle=c,this.beginBatch=h=>{lx(h)&&(this.handle=c),super.beginBatch(h)}}}class r5 extends tt{get behavior(){return Yr}constructor(t){super(),this.params=t,this.buffer=[]}reset(){this.buffer=[]}handle(t){this.buffer.push(t)}complete(){const t=this.params,n=t.as||["y0","y1"],r=t.sort?Em(t.sort.field,t.sort.order):void 0,i=t.field?Re(t.field):()=>1,o=t.groupby.map(u=>Re(u)),a=q3(this.buffer,u=>o.map(c=>c(u)).join()).map(u=>u[1]);let s=u=>!0;if(t.baseField){const u=Re(t.baseField);s=c=>u(c)!==null}let f,l;switch(t.offset){case"normalize":f=(u,c)=>u/c,l=(u,c)=>Ff(u,c);break;case"center":f=(u,c)=>u-c/2,l=(u,c)=>Ff(u,c);break;case"information":{const u=Math.log2(t.cardinality??4);f=(c,h)=>c/h,l=(c,h)=>{const p=Ff(c,A=>+!s(A)),m=Ff(c,h),y=m-p;let w=0;for(let A=0;A<c.length;A++){const S=c[A];if(s(S)){const _=h(S)/y;w-=_*Math.log2(_)}}return y/(u-(w+0))*(y/m)}}break;default:f=(u,c)=>u,l=(u,c)=>1}for(const u of a){r&&u.sort(r);const c=l(u,i);let h=0;for(const d of u){const p=h+i(d);s(d)&&(d[n[0]]=f(h,c),d[n[1]]=f(p,c),this._propagate(d),h=p)}}super.complete()}}class i5 extends tt{get behavior(){return Hn}constructor(t){super();const n=Re(t.field??"sequence"),[r,i]=t.as??["pos","sequence"];this.handle=o=>{const a=Object.assign({},o,{[i]:"",[r]:0}),s=n(o);for(let f=0;f<s.length;f++){const l=Object.assign({},a);l[r]=f,l[i]=s.charAt(f),this._propagate(l)}}}}class o5 extends tt{get behavior(){return Hn}constructor(t){super(),this.params=t,this.buffer=[]}reset(){this.buffer=[]}handle(t){this.buffer.push(t)}complete(){const n=this.params.groupby,r=n.map(o=>Re(o)),i=Bf(this.buffer,...r);for(const[o,a]of F0(i)){const s={count:a.length};for(let f=0;f<n.length;f++)s[n[f]]=o[f];this._propagate(s)}super.complete()}}const a5="_uniqueId",Ox=1e4,Lx=[null];class Nx extends tt{get behavior(){return Yr}constructor(t){super(),this.params=t,this.as=t.as??a5,this._blocks=[],this._usedBlocks=0,this._id=-1}initialize(){}reset(){super.reset(),this._usedBlocks=0,this._id=-1}handle(t){t[this.as]=this._nextId(),this._propagate(t)}_nextId(){return++this._id%Ox==0&&(this._id=this._getBlock()*Ox),this._id}_getBlock(){return this._usedBlocks<this._blocks.length?this._blocks[this._usedBlocks++]:this._reserveBlock()}_reserveBlock(){const t=Lx.length;return Lx[t]=this,this._blocks.push(t),this._usedBlocks++,t}}const s5={aggregate:o5,collect:Rx,coverage:zR,filterScoredLabels:HR,filter:VR,flatten:jR,flattenCompressedExons:WR,flattenDelimited:ZR,flattenSequence:i5,formula:QR,identifier:Nx,linearizeGenomicCoordinate:Mx,measureText:XR,pileup:JR,project:e5,regexExtract:t5,regexFold:n5,sample:fx,stack:r5};function l5(e,t){const n=s5[e.type];if(n)return new n(e,t);throw new Error("Unknown transform: "+e.type)}function zx(e){if(!Hx(e)&&!Gx(e))return;const t={...e.format};if(t.type??(t.type=Gx(e)&&f5(e.url)),t.parse??(t.parse="auto"),!t.type)throw new Error("Format for the data source was not defined and it could not be inferred: "+JSON.stringify(e));return t}function f5(e){var t;if(Array.isArray(e)&&(e=e[0]),e)return(t=e.match(/\.(csv|tsv|json)/))==null?void 0:t[1]}const Ux=e=>typeof e!="object"?u5:c5,u5=e=>({data:e}),c5=e=>e;function Gx(e){return"url"in e}class Ks extends tt{get identifier(){}handle(t){throw new Error("Source does not handle incoming data!")}async load(){}}function Hx(e){return"values"in e}class h5 extends Ks{constructor(t,n){var r;if(super(),this.params=t,typeof t.values=="string"&&!((r=t==null?void 0:t.format)!=null&&r.type))throw new Error("Data format type (csv, dsv, ...) must be specified if a string is provided!")}loadSynchronously(){const t=this.params.values;let n=[],r=i=>i;if(Array.isArray(t))t.length>0&&(n=t,r=Ux(t[0]));else if(typeof t=="object")n=[t];else if(typeof t=="string")n=k1(t,zx(this.params));else throw new Error('"values" in data configuration is not an array, object, or a string!');this.reset(),this.beginBatch({type:"file"});for(const i of n)this._propagate(r(i));this.complete()}async load(){this.loadSynchronously()}}function d5(e){return"url"in e}class p5 extends Ks{constructor(t,n){super(),this.params=t,this.baseUrl=n==null?void 0:n.getBaseUrl()}get identifier(){return JSON.stringify({params:this.params,baseUrl:this.baseUrl})}async load(){const t=this.params.url,n=Array.isArray(t)?t:[t],r=async o=>Gf({baseURL:this.baseUrl}).load(o).catch(a=>{throw new Error(`Cannot fetch: ${this.baseUrl}${o}: ${a.message}`)}),i=(o,a)=>{try{const s=k1(o,zx(this.params));this.beginBatch({type:"file",url:a});for(const f of s)this._propagate(f)}catch(s){throw new Error(`Cannot parse: ${a}: ${s.message}`)}};this.reset(),await Promise.all(n.map(o=>r(o).then(i))),this.complete()}}function g5(e){return"sequence"in e}class m5 extends Ks{constructor(t,n){if(super(),this.sequence=t.sequence,!("start"in this.sequence))throw new Error("'start' is missing from sequence parameters!");if(!("stop"in this.sequence))throw new Error("'stop' is missing from sequence parameters!")}loadSynchronously(){const t=this.sequence.as||"data",n=this.sequence.step||1,r=this.sequence.stop;this.reset(),this.beginBatch({type:"file"});for(let i=this.sequence.start;i<r;i+=n)this._propagate({[t]:i});this.complete()}async load(){this.loadSynchronously()}}class R0 extends Ks{constructor(n,r){super();Fn(this,"initializedPromise",Promise.resolve());if(this.view=n,r){if(r!=="x"&&r!=="y")throw new Error(`Invalid channel specified for the lazy data source: ${r}. Must be either "x" or "y"`)}else throw new Error('No channel has been specified for the lazy data source. Must be either "x" or "y".');if(this.channel=r,this.scaleResolution=this.view.getScaleResolution(r),!this.scaleResolution){const o=[`The lazy data source cannot find a resolved scale for channel "${r}".`];throw this.view instanceof Zt||o.push('Make sure the view has a "shared" scale resolution as it is not a unit view.'),new Error(o.join(" "))}const i=()=>{this.view.isVisible()&&this.onDomainChanged(this.scaleResolution.getDomain(),this.scaleResolution.getComplexDomain())};this.scaleResolution.addEventListener("domain",i),this.view.context.addBroadcastListener("layoutComputed",i)}getAxisLength(){const n=this.scaleResolution.members.map(r=>{var i;return(i=r.view.coords)==null?void 0:i[this.channel==="x"?"width":"height"]}).filter(r=>r>0);return n.length?n.reduce((r,i)=>Math.min(r,i),1e4):0}get genome(){return this.scaleResolution.getGenome()}onDomainChanged(n,r){}setLoadingStatus(n){this.view.context.setDataLoadingStatus(this.view,n)}requestRender(){this.view.context.animator.requestRender()}async load(){this.reset(),this.complete()}publishData(n){this.reset(),this.beginBatch({type:"file"});for(const r of n)for(const i of r)this._propagate(i);this.complete(),B0(this.view),this.requestRender()}}class b5 extends R0{constructor(n,r){const i={axis:{},...n};super(r,i.channel);Fn(this,"ticks",[]);this.params=n}onDomainChanged(){const n=this.scaleResolution.scale,r=this.params.axis,i=this.getAxisLength(),o=l=>25+60*rb(100,700,l),a=kt(r.tickCount)?r.tickCount:Math.round(i/o(i)),s=mx(n,a,r.tickMinStep),f=r.values?bx(n,r.values,s):eR(n,s);if(!qh(f,this.ticks)){this.ticks=f;const l=nR(n,a,r.format);this.publishData([f.map(u=>({value:u,label:l(u)}))])}}}class y5 extends R0{constructor(t,n){super(n,t.channel)}async load(){this.publishData([this.genome.chromosomes])}}function Js(e,t){return!t||/^(data:|([A-Za-z]+:)?\/\/)/.test(e)||e.startsWith("/")?e:(t.endsWith("/")||(t+="/"),t+e)}function qu(e,t,n=!0){let r,i=a=>{};return function(...s){return new Promise((f,l)=>{const u=()=>{clearTimeout(r),i=c=>{},f(e(...s))};n&&i("debounced"),clearTimeout(r),i=l,r=window.setTimeout(u,t)})}}class el extends R0{constructor(){super(...arguments);ee(this,Pa,new AbortController);ee(this,ff,[0,0]);ee(this,uf,0);Fn(this,"params")}setupDebouncing(n){n.debounce>0&&(n.debounceMode=="domain"?this.onDomainChanged=qu(this.onDomainChanged.bind(this),n.debounce,!1):n.debounceMode=="window"&&(this.loadInterval=qu(this.loadInterval.bind(this),n.debounce,!1)))}onDomainChanged(n){var i;const r=((i=this.params)==null?void 0:i.windowSize)??-1;n[1]-n[0]>r||this.callIfWindowsChanged(n,r,async o=>{await this.initializedPromise,this.loadInterval(o)})}async loadInterval(n){}async discretizeAndLoad(n,r){W(this,Pa).abort(),this.setLoadingStatus(!0),He(this,Pa,new AbortController);const i=W(this,Pa).signal,o=this.genome.continuousToDiscreteChromosomeIntervals(n);try{const a=await Promise.all(o.map(async s=>r(s,i)));if(!i.aborted)return this.setLoadingStatus(!1),a}catch(a){if(!i.aborted)throw this.setLoadingStatus(!1),a}}callIfWindowsChanged(n,r,i){const o=[Math.max(Math.floor(n[0]/r)*r,0),Math.min(Math.ceil(n[1]/r)*r,this.genome.totalSize)],a=W(this,ff);(r!==W(this,uf)||o[0]<a[0]||o[1]>a[1])&&(He(this,ff,o),He(this,uf,r),i(o))}}Pa=new WeakMap,ff=new WeakMap,uf=new WeakMap;class w5 extends el{constructor(t,n){const r={channel:"x",windowSize:7e3,debounce:200,debounceMode:"window",...t};if(super(n,r.channel),this.params=r,!this.params.url)throw new Error("No URL provided for IndexedFastaSource");this.setupDebouncing(this.params),this.initializedPromise=new Promise(i=>{Promise.all([Promise.resolve().then(()=>wv),Promise.resolve().then(()=>CL),Promise.resolve().then(()=>al)]).then(([{Buffer:o},{IndexedFasta:a},{RemoteFile:s}])=>{typeof window<"u"&&(window.Buffer??(window.Buffer=o));const f=l=>new s(Js(l,this.view.getBaseUrl()));this.fasta=new a({fasta:f(this.params.url),fai:f(this.params.indexUrl??this.params.url+".fai")}),i()})})}async loadInterval(t){const n=await this.discretizeAndLoad(t,async(r,i)=>this.fasta.getSequence(r.chrom,r.startPos,r.endPos,{signal:i}).then(o=>({chrom:r.chrom,start:r.startPos,sequence:o})));n&&this.publishData([n])}}class x5 extends el{constructor(n,r){const i={pixelsPerBin:2,channel:"x",debounce:200,debounceMode:"window",...n};super(r,i.channel);ee(this,Oa,[]);ee(this,La,void 0);if(this.params=i,!this.params.url)throw new Error("No URL provided for BigWigSource");this.setupDebouncing(this.params),this.initializedPromise=new Promise(o=>{Promise.all([Promise.resolve().then(()=>b_),Promise.resolve().then(()=>al)]).then(([{BigWig:a},{RemoteFile:s}])=>{He(this,La,new a({filehandle:new s(Js(this.params.url,this.view.getBaseUrl()))})),W(this,La).getHeader().then(f=>{He(this,Oa,f.zoomLevels.map(l=>l.reductionLevel).reverse()),W(this,Oa).push(1),o()})})})}async onDomainChanged(n){await this.initializedPromise;const r=this.getAxisLength()||700,i=v5(n,r,W(this,Oa)),o=Math.max(i*r,5e3);this.callIfWindowsChanged(n,o,a=>this.loadInterval(a,i))}async loadInterval(n,r){const i=.5/r/this.params.pixelsPerBin,o=await this.discretizeAndLoad(n,(a,s)=>W(this,La).getFeatures(a.chrom,a.startPos,a.endPos,{scale:i,signal:s}).then(f=>f.map(l=>({chrom:a.chrom,start:l.start,end:l.end,score:l.score}))));o&&this.publishData(o)}}Oa=new WeakMap,La=new WeakMap;function v5(e,t,n){const r=(e[1]-e[0])/t;return n.find(i=>i<r)??n.at(-1)}class A5 extends el{constructor(n,r){const i={channel:"x",windowSize:1e6,debounce:200,debounceMode:"window",...n};super(r,i.channel);Fn(this,"parser");Fn(this,"bbi");Fn(this,"parseLine");if(this.params=i,!this.params.url)throw new Error("No URL provided for BigBedSource");this.setupDebouncing(this.params),this.initializedPromise=new Promise(o=>{Promise.all([Promise.resolve().then(()=>vz),Promise.resolve().then(()=>b_),Promise.resolve().then(()=>al)]).then(([a,{BigBed:s},{RemoteFile:f}])=>{const l=a.default;this.bbi=new s({filehandle:new f(Js(this.params.url,this.view.getBaseUrl()))}),this.bbi.getHeader().then(async u=>{this.parser=new l({autoSql:u.autoSql});try{const c=E5(this.parser);this.parseLine=(h,d)=>c(h,d.start,d.end,d.rest)}catch{this.parseLine=(h,d)=>this.parser.parseLine(`${h}	${d.start}	${d.end}	${d.rest}`)}o()})})})}async loadInterval(n){const r=await this.discretizeAndLoad(n,async(i,o)=>this.bbi.getFeatures(i.chrom,i.startPos,i.endPos,{signal:o}).then(a=>a.map(s=>this.parseLine(i.chrom,s))));r&&this.publishData(r)}}function E5(e){const t=e.autoSql.fields.filter(A=>A.type).slice(3);let n=0,r="",i=0,o={};const a="	",s=a.charCodeAt(0),f="0".charCodeAt(0),l="-".charCodeAt(0);function u(){let A=r.indexOf(a,n);A<0&&(A=i);const S=r.substring(n,A);return n=A+1,S}function c(){let A=0,S=r.charCodeAt(n),_=1;S===l&&(_=-1,n++,S=r.charCodeAt(n));do{if(S===s){n++;break}A=A*10+S-f,S=r.charCodeAt(++n)}while(n<i);return A*_}const h=t.map(A=>`${JSON.stringify(A.name)}: ${A.isNumeric?"0":"emptyString"}`),d=new Function(`
        const emptyString = "";
        return function makeTemplate(chrom, chromStart, chromEnd) {
            return {
                chrom,
                chromStart,
                chromEnd,
                ${h.join(`,
`)}
            }
        };`)(),p=t.map(A=>{const S=A.type,_=JSON.stringify(A.name);if(["ubyte","int","uint"].includes(S))return`d[${_}] = parseInt();`;if(A.isNumeric)return`d[${_}] = Number(parseString());`;if(["char","string","lstring"].includes(S))return`d[${_}] = parseString();`;throw new Error("Unsupported type: "+S)}),m=_5(p,50).map((A,S)=>Function("parseInt","parseString",`return function parseFieldChunk${S}(d) {
            ${A.join(`
`)}
        }`)(c,u));function y(A){r=A,i=A.length,n=0}function w(A,S,_,T){y(T),o=d(A,S,_);for(const I of m)I(o);return o}return w}function _5(e,t){return Array.from({length:Math.ceil(e.length/t)},(n,r)=>e.slice(r*t,r*t+t))}class S5 extends el{constructor(n,r){const i={channel:"x",windowSize:2e4,debounce:200,debounceMode:"domain",...n};super(r,i.channel);ee(this,wo,void 0);Fn(this,"chrPrefixFixer",n=>n);if(this.params=i,!this.params.url)throw new Error("No URL provided for BamSource");this.setupDebouncing(this.params),this.initializedPromise=new Promise(o=>{Promise.all([Promise.resolve().then(()=>Gz),Promise.resolve().then(()=>al)]).then(([{BamFile:a},{RemoteFile:s}])=>{const f=l=>new s(Js(l,this.view.getBaseUrl()));He(this,wo,new a({bamFilehandle:f(this.params.url),baiFilehandle:f(this.params.indexUrl??this.params.url+".bai")})),W(this,wo).getHeader().then(l=>{var h,d;const u=this.genome.hasChrPrefix(),c=(d=(h=W(this,wo).indexToChr)==null?void 0:h[0])==null?void 0:d.refName.startsWith("chr");u&&!c?this.chrPrefixFixer=p=>p.replace("chr",""):!u&&c&&(this.chrPrefixFixer=p=>"chr"+p),o()})})})}async loadInterval(n){const r=await this.discretizeAndLoad(n,async(i,o)=>W(this,wo).getRecordsForRange(this.chrPrefixFixer(i.chrom),i.startPos,i.endPos,{signal:o}).then(a=>a.map(s=>({chrom:i.chrom,start:s.get("start"),end:s.get("end"),name:s.get("name"),MD:s.get("MD"),cigar:s.get("cigar"),mapq:s.get("mq"),strand:s.get("strand")===1?"+":"-"}))));r&&this.publishData(r)}}wo=new WeakMap;class C5 extends el{constructor(n,r){const i={channel:"x",windowSize:3e6,debounce:200,debounceMode:"domain",...n};super(r,i.channel);ee(this,cf,void 0);if(this.params=i,!this.params.url)throw new Error("No URL provided for TabixSource");this.setupDebouncing(this.params),this.initializedPromise=new Promise(o=>{Promise.all([Promise.resolve().then(()=>wv),Promise.resolve().then(()=>Xz),Promise.resolve().then(()=>al)]).then(([{Buffer:a},{TabixIndexedFile:s},{RemoteFile:f}])=>{typeof window<"u"&&(window.Buffer??(window.Buffer=a));const l=u=>new f(Js(u,this.view.getBaseUrl()));He(this,cf,new s({filehandle:l(this.params.url),tbiFilehandle:l(this.params.indexUrl??this.params.url+".tbi")})),o()})})}async loadInterval(n){const r=await this.discretizeAndLoad(n,async(i,o)=>{const a=[];return await W(this,cf).getLines(i.chrom,i.startPos,i.endPos,{lineCallback:s=>{a.push(s)},signal:o}),this._parseFeatures(a)});r&&this.publishData(r)}_parseFeatures(n){return[]}}cf=new WeakMap;class k5 extends C5{constructor(n,r){super(n,r);ee(this,hf,void 0);Promise.resolve().then(()=>PU).then(i=>{He(this,hf,i.default)})}_parseFeatures(n){var i;return(i=W(this,hf))==null?void 0:i.parseStringSync(n.join(`
`),{parseSequences:!1})}}hf=new WeakMap;function T5(e,t){if(Hx(e))return new h5(e,t);if(d5(e))return new p5(e,t);if(g5(e))return new m5(e,t);if(I5(e))return L5(e.lazy,t);throw new Error("Cannot figure out the data source type: "+JSON.stringify(e))}function I5(e){return"lazy"in e}function B5(e){return(e==null?void 0:e.type)=="axisTicks"}function D5(e){return(e==null?void 0:e.type)=="axisGenome"}function F5(e){return(e==null?void 0:e.type)=="indexedFasta"}function R5(e){return(e==null?void 0:e.type)=="bigwig"}function M5(e){return(e==null?void 0:e.type)=="bigbed"}function P5(e){return(e==null?void 0:e.type)=="bam"}function O5(e){return(e==null?void 0:e.type)=="gff3"}function L5(e,t){if(B5(e))return new b5(e,t);if(D5(e))return new y5(e,t);if(F5(e))return new w5(e,t);if(R5(e))return new x5(e,t);if(M5(e))return new A5(e,t);if(P5(e))return new S5(e,t);if(O5(e))return new k5(e,t);throw new Error("Cannot figure out the data source type: "+JSON.stringify(e))}function N5(e){const t=Object.keys(e).filter(r=>typeof r=="string"),n=new Function("source","return { "+t.map(r=>JSON.stringify(r)).map(r=>`${r}: source[${r}]`).join(`,
`)+" };");return n.properties=t,n}class Wu extends tt{get behavior(){return Hn}constructor(){super();const t=n=>{const r=N5(n);this.handle=i=>this._propagate(r(i)),this.handle(n)};this.handle=t,this.beginBatch=n=>{lx(n)&&(this.handle=t),super.beginBatch(n)}}}function z5(e){return"name"in e}class Vx extends Ks{constructor(n,r,i){super();ee(this,df,void 0);this.provider=i,this.params=n}get identifier(){return this.params.name}updateDynamicData(n){He(this,df,n),this.loadSynchronously()}loadSynchronously(){const n=W(this,df)??this.provider(this.params.name)??[];let r=i=>i;if(Array.isArray(n))n.length>0&&(r=Ux(n[0]));else throw new Error(`Named data "${this.params.name}" is not an array!`);this.reset(),this.beginBatch({type:"file"});for(const i of n)this._propagate(r(i));this.complete()}async load(){this.loadSynchronously()}}df=new WeakMap;class jx{constructor(){this._dataSourcesByHost=new Map,this._collectorsByHost=new Map,this._observers=new Map}get dataSources(){return[...new Set(this._dataSourcesByHost.values()).values()]}get collectors(){return[...this._collectorsByHost.values()]}addObserver(t,n){let r=this._observers.get(n);r||(r=[],this._observers.set(n,r)),r.push(t)}_relayObserverCallback(t,n){const r=this._observers.get(n);if(r)for(const i of r)i(t)}addDataSource(t,n){this._dataSourcesByHost.set(n,t)}findDataSourceByKey(t){return this._dataSourcesByHost.get(t)}findNamedDataSource(t){let n,r=[];for(const[i,o]of this._dataSourcesByHost.entries())if(o instanceof Vx&&t==o.identifier){if(n&&n!==o)throw new Error(`Found multiple instances of named data: ${t}. Data flow optimization is broken (it's a bug).`);n=o,r.push(i)}if(n)return{dataSource:n,hosts:r}}addCollector(t,n){this._collectorsByHost.set(n,t),t.observers.push(r=>this._relayObserverCallback(r,n))}findCollectorByKey(t){return this._collectorsByHost.get(t)}initialize(){for(const t of this.dataSources)t.visit(n=>n.initialize())}}function U5(e,t){const n=new Map,r=[];for(const i of e)n.set(i,{ref:i,children:[]});for(const i of n.values()){const o=n.get(t(i.ref));o?o.children.push(i):r.push(i)}return r}function $x(e,t,n){var i,o;const r=(i=t.preOrder)==null?void 0:i.call(t,e);if(r)return r;for(const a of n(e)){const s=$x(a,t,n);if(s==="stop")return s}return(o=t.postOrder)==null?void 0:o.call(t,e)}function G5(e,t){return $x(e,t,n=>n.children)}function H5(e,t){const n=[];let r;const i=t??new jx,o=[];function a(c,h=()=>{}){if(!r)throw h()||new Error("Cannot append data flow node, no parent exist!");return r.addChild(c),r=c,c}function s(c,h){return a(c,()=>new Error(`Cannot append a transform because no (inherited) data are available! ${h?JSON.stringify(h):""}`))}function f(c,h){for(const d of c){let p;try{p=l5(d,h)}catch(m){throw console.warn(m),new Error(`Cannot initialize "${d.type}" transform: ${m}`)}p.behavior&Yr&&s(new Wu),s(p)}}const l=c=>{if(n.push(r),c.spec.data){const h=z5(c.spec.data)?new Vx(c.spec.data,c,c.context.getNamedDataFromProvider):T5(c.spec.data,c);r=h,i.addDataSource(h,c)}if(c.spec.transform&&f(c.spec.transform,c),c instanceof Zt){if(!r)throw new Error(`A unit view (${c.getPathString()}) has no (inherited) data source`);const h=V5(c);if(h){o.push(h.rewrite);for(const p of h.transforms)s(p)}c.mark.isPickingParticipant()&&(s(new Wu),s(new Nx({type:"identifier"})));const d=new Rx({type:"collect",groupby:c.getFacetFields(),sort:j5(c,h==null?void 0:h.rewrittenEncoding)});a(d),i.addCollector(d,c)}},u=U5(e.getDescendants(),c=>c.dataParent);for(const c of u)G5(c,{preOrder:h=>l(h.ref),postOrder:()=>{r=n.pop()}});return o.forEach(c=>c()),i}function V5(e){var o;const t=[],n={},r=[];for(const[a,s]of Object.entries(e.getEncoding())){const f=a;qs(f)&&ex(s)&&r.push({channel:f,chromPosDef:s})}const i=Bf(r,a=>Yi(a.channel),a=>a.chromPosDef.chrom);for(const[a,s]of i.entries())for(const[f,l]of s.entries()){const u=[],c=[],h=[];for(const{channel:d,chromPosDef:p}of l){const m=A=>A.replace(/[^A-Za-z0-9_]/g,""),y=["_linearized_",m(p.chrom),"_",m(p.pos)].join(""),w={...((o=e.spec.encoding)==null?void 0:o[d])??e.getEncoding()[d]??{},field:y};delete w.chrom,delete w.pos,!w.type&&p.type&&(w.type=p.type),n[d]=w,u.push(p.pos),h.push(p.offset??0),c.push(y)}t.push(new Wu),t.push(new Mx({type:"linearizeGenomicCoordinate",channel:a,chrom:f,pos:u,offset:h,as:c},e))}return t.length?{transforms:t,rewrittenEncoding:n,rewrite:()=>{e.spec.encoding={...e.spec.encoding,...n},GD(e.mark,"encoding")}}:void 0}function j5(e,t){var r;const n={...e.getEncoding(),...t}.x;if(Wt(n)&&(r=e.getScaleResolution("x"))!=null&&r.isZoomable()){if(Zi(n))return"buildIndex"in n&&n.buildIndex?{field:n.field}:null;if(!$s(n)){if(Gu(n))throw new Error("A zoomable x channel must be mapped to a field.")}}}function qx(e,t=void 0){if(e.parent!==t)return!1;for(const n of e.children)if(!qx(n,e))return!1;return!0}function M0(e,t=!1){if(e.behavior&_0&&(t=!0),e instanceof Wu)if(t)t=!1;else{const n=e.children[0];e.excise(),n&&M0(n,t);return}e.behavior&Hn&&(t=!1);for(let n=0,r=e.children.length;n<r;n++)M0(e.children[n],t||r>1)}function $5(e){const t=[...e._dataSourcesByHost.entries()],n=new Map;for(const r of t){const i=r[1];i.identifier&&!n.has(i.identifier)&&n.set(i.identifier,i)}e._dataSourcesByHost.clear();for(let[r,i]of t){const o=n.get(i.identifier);o&&(o.adoptChildrenOf(i),i=o),e.addDataSource(i,r)}}function q5(e){if(M0(e),!qx(e))throw new Error("Encountered a bug! There's a problem in the data flow structure.")}function W5(e){for(const t of e.dataSources)q5(t);$5(e)}function Z5(e){const t=new Set;e.visit(n=>{for(const r of Object.values(n.resolutions.scale)){const i=r.name;if(i&&t.has(i))throw new Error(`The same scale name "${i}" occurs in multiple scale resolutions!`);t.add(i)}})}function Y5(e){for(const t of Wo){const n=e.getScaleResolution(t);n&&!n.name&&n.isZoomable()&&(n.name=`${t}_at_root`)}}async function Q5(e,t,n){var a;if(!e.import.url)throw new Error("Cannot import, not an import spec: "+JSON.stringify(e));const r=Gf({baseURL:t}),i=e.import.url,o=JSON.parse(await r.load(i).catch(s=>{throw new Error(`Could not load imported view spec: ${i} 
Reason: ${s.message}`)}));if(n.isViewSpec(o))return o.baseUrl=(a=i.match(/^[^?#]*\//))==null?void 0:a[0],o;throw new Error(`The imported spec "${i}" is not a view spec: ${JSON.stringify(e)}`)}function X5(e){const t=e.getSize().addPadding(e.getOverhang()),n=r=>r.grow>0?void 0:r.px;return{width:n(t.width),height:n(t.height)}}function lr(e){return()=>e}const Bn=class Bn{static create(t,n,r,i){return new Bn(lr(t),lr(n),lr(r),lr(i))}_offset(t,n){const r=this["_"+t];if(n===0)return r;switch(typeof n){case"number":return()=>r()+n;case"function":return()=>r()+n();default:throw new Error("Not a number of function")}}_passThrough(t){return this._offset(t,0)}constructor(t,n,r,i){this._x=t,this._y=n,this._width=r,this._height=i}get x(){return this._x()}get y(){return this._y()}get width(){return this._width()}get height(){return this._height()}get x2(){return this._x()+this._width()}get y2(){return this._y()+this._height()}equals(t){return t?this===t||this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height:!1}modify(t){if(!Object.keys(t).length)return this;const n=r=>{const i=t[r];return typeof i=="number"?lr(i):typeof i=="function"?i:this._passThrough(r)};return new Bn(n("x"),n("y"),n("width"),n("height"))}translate(t,n){return t===0&&n===0?this:new Bn(this._offset("x",t),this._offset("y",n),this._passThrough("width"),this._passThrough("height"))}translateBy(t){return this.translate(t.x,t.y)}expand(t,n=1){return t.left==0&&t.top==0&&t.right==0&&t.bottom==0?this:new Bn(t.left?this._offset("x",-t.left*n):this._passThrough("x"),t.top?this._offset("y",-t.top*n):this._passThrough("y"),t.width?this._offset("width",t.width*n):this._passThrough("width"),t.height?this._offset("height",t.height*n):this._passThrough("height"))}shrink(t){return this.expand(t,-1)}intersect(t){return this===t||t==null?this:new Bn(()=>Math.max(this.x,t.x),()=>Math.max(this.y,t.y),()=>Math.min(this.x2,t.x2)-Math.max(this.x,t.x),()=>Math.min(this.y2,t.y2)-Math.max(this.y,t.y))}union(t){return this===t||t==null?this:new Bn(()=>Math.min(this.x,t.x),()=>Math.min(this.y,t.y),()=>Math.max(this.x2,t.x2)-Math.min(this.x,t.x),()=>Math.max(this.y2,t.y2)-Math.min(this.y,t.y))}isDefined(){return this.width>=0&&this.height>=0}flatten(){return new Bn(lr(this.x),lr(this.y),lr(this.width),lr(this.height))}containsPoint(t,n){return t>=this.x&&t<this.x2&&n>=this.y&&n<this.y2}normalizePoint(t,n){return{x:(t-this.x)/this.width,y:(n-this.y)/this.height}}toString(){return`Rectangle: x: ${this.x}, y: ${this.y}, width: ${this.width}, height: ${this.height}`}toRoundedString(){return`Rectangle: x: ${Math.round(this.x)}, y: ${Math.round(this.y)}, width: ${Math.round(this.width)}, height: ${Math.round(this.height)}`}};Fn(Bn,"ZERO",Bn.create(0,0,0,0));let fr=Bn;class Wx{constructor(t){this.globalOptions=t}pushView(t,n){}popView(t){}renderMark(t,n){}}class Zx extends Wx{constructor(t,n){super(t),this.webGLHelper=n,this.buffer=[],this.coords=void 0,this.views=new Set}pushView(t,n){this.views.add(t),this.coords=n}renderMark(t,n){if(this.globalOptions.picking&&!t.isPickingParticipant())return;const r=t.render(n);r&&this.buffer.push({mark:t,callback:r,coords:this.coords,clipRect:n.clipRect})}render(){if(this.batch||this._buildBatch(),this.batch.length==0)return;const t=this.webGLHelper.gl,n=this.globalOptions.picking;t.bindFramebuffer(t.FRAMEBUFFER,n?this.webGLHelper._pickingBufferInfo.framebuffer:null),this.webGLHelper.clearAll();for(const r of this.views)r.onBeforeRender();for(const r of this.batch)r();n&&t.bindFramebuffer(t.FRAMEBUFFER,null)}_buildBatch(){this.batch=[];let t=!0,n=!0;const r=a=>()=>{t&&a()},i=a=>()=>{t&&n&&a()},o=Bf(this.buffer.reverse(),a=>a.mark);for(const[a,s]of[...o.entries()].reverse()){if(!a.isReady())continue;this.batch.push(()=>{t=a.unitView.getEffectiveOpacity()>0}),this.batch.push(...a.prepareRender(this.globalOptions).map(l=>r(l)));let f;for(const l of s){const u=l.coords;u.equals(f)||this.batch.push(r(()=>{n=a.setViewport(u,l.clipRect)})),this.batch.push(i(l.callback)),f=l.coords}}}}class K5 extends Wx{constructor(...t){super({}),this.contexts=t}pushView(t,n){for(const r of this.contexts)r.pushView(t,n)}popView(t){for(const n of this.contexts)n.popView(t)}renderMark(t,n){for(const r of this.contexts)r.renderMark(t,n)}}class J5{constructor(t,n){this.point=t,this.uiEvent=n,this.stopped=!1,this.target=void 0}stopPropagation(){this.stopped=!0}get type(){return this.uiEvent.type}}class eM{constructor(t,n){this.x=t,this.y=n}equals(t){return t?t===this||t.x===this.x&&t.y===this.y:!1}}const tM=e=>new Promise(t=>setTimeout(t,e));function nM(e){const t=e.requestAnimationFrame||window.requestAnimationFrame,n=e.signal,r=()=>new Promise((i,o)=>{if(n!=null&&n.aborted)return o("aborted");const a=performance.now(),s=a+(e.duration||1e3),f=typeof e.from=="number"?e.from:0,l=typeof e.to=="number"?e.to:1,u=e.easingFunction||(m=>m),c=m=>(m-a)/(s-a),h=m=>m*(l-f)+f,d=m=>Math.max(0,Math.min(1,m)),p=m=>{n!=null&&n.aborted?o("aborted"):(e.onUpdate(h(u(d(c(m))))),m<s?t(p):(e.onUpdate(h(u(1))),i()))};t(p)});return e.delay?n!=null&&n.aborted?Promise.reject("aborted"):tM(e.delay).then(r):r()}class rM{constructor(t){this._renderCallback=t,this._renderRequested=!1,this._warn=!1,this.transitions=[]}requestTransition(t){this.cancelTransition(t),this.transitions.push(t),this.requestRender()}cancelTransition(t){const n=this.transitions.indexOf(t);n>=0&&this.transitions.splice(n,1)}requestRender(){this._renderRequested?this._warn&&console.warn("Render already requested!"):(this._renderRequested=!0,window.requestAnimationFrame(t=>{this._renderRequested=!1;const n=this.transitions;this.transitions=[];let r;for(;r=n.shift();)r(t);this._renderCallback(t)}))}transition(t){return nM({requestAnimationFrame:n=>this.requestTransition(n),...t})}}class iM{constructor(t){this.genomes=new Map,this.baseUrl=t}async initialize(t){const n=new _R(t);return this.genomes.set(n.name,n),Promise.all([...this.genomes.values()].map(r=>r.load(this.baseUrl)))}getGenome(t){if(!this.genomes.size)throw new Error("No genomes have been configured!");if(t){const n=this.genomes.get(t);if(!n)throw new Error(`No genome with the name ${t} has been configured!`);return n}else{if(this.genomes.size>1)throw new Error("Cannot pick a default genome! More than one have been configured!");return this.genomes.values().next().value}}}const oM="data:image/png;base64,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",aM={thin:100,light:300,regular:400,normal:400,medium:500,bold:700,black:900};class sM{constructor(t){this._webGLHelper=t,this.fontRepository="https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/",this._fonts=new Tr([],JSON.stringify),this._metadataPromises=new Map,this._fontPromises=new Map,this._promises=[],this._defaultFontEntry={metrics:A0(Px),texture:t?this._createTextureNow(oM):void 0}}async waitUntilReady(){await Promise.all(this._promises)}getFont(t,n="normal",r="regular"){if(Pe(r)&&(r=aM[r.toLowerCase()],!r))throw new Error("Unknown font weight: "+r);const i={family:t,style:n,weight:r};let o=this._fonts.get(i);return o||(o={metrics:void 0,texture:void 0},this._fonts.set(i,o),this._promises.push(this._loadFontEntry(o,i))),o}async _loadFontEntry(t,n){try{const r=await this._loadMetadata(n.family),i=fM(r,n),o=this.fontRepository+Yx(n.family)+"/"+i.replace(/\.\w+/,""),a=this._createTexture(o+".png"),s=this._loadFont(o+".json");t.texture=await a,t.metrics=await s}catch(r){console.log("Cannot load font. Using default.",r),t.metrics=this._defaultFontEntry.metrics,t.texture=this._defaultFontEntry.texture}}_loadFont(t){let n=this._fontPromises.get(t);return n||(n=fetch(t).then(r=>{if(!r.ok)throw new Error("Could not load font: "+r.status);return r}).then(r=>r.json()).then(r=>A0(r)),this._fontPromises.set(t,n)),n}_loadMetadata(t){const n=Yx(t);let r=this._metadataPromises.get(n);return r||(r=fetch(this.fontRepository+n+"/METADATA.pb").then(i=>{if(!i.ok)throw new Error("Could not load font metadata: "+i.status);return i}).then(i=>i.text()).then(i=>lM(i)).catch(i=>{console.warn(i)}),this._metadataPromises.set(n,r)),r}getDefaultFont(){return this._defaultFontEntry}_createTexture(t){const n=this._webGLHelper.gl;return new Promise((r,i)=>{Hs(n,{src:t,min:n.LINEAR},(o,a,s)=>{o?i(o):r(a)})})}_createTextureNow(t){const n=this._webGLHelper.gl;let r;const i=new Promise((o,a)=>{r=Hs(n,{src:t,min:n.LINEAR},(s,f,l)=>{s?a(s):o(f)})});return this._promises.push(i),r}}function Yx(e){return e.toLowerCase().replaceAll(/[^\w]/g,"")}function lM(e){const t=e.split(`
`),n=[];let r;for(const i of t)if(i.startsWith("fonts {")&&(r={name:void 0,style:void 0,weight:void 0,filename:void 0,post_script_name:void 0,full_name:void 0,copyright:void 0}),i.startsWith("}")&&(n.push(r),r=void 0),r){let o=i.match(/^\s*([A-Za-z_]+):[ ]?"(.*)"$/);if(o){const a=o[1];r[a]=o[2]}if(o=i.match(/^\s*([A-Za-z_]+):[ ]?(\d+)$/),o){const a=o[1];r[a]=+o[2]}}return n}function fM(e,t){let n,r=Number.POSITIVE_INFINITY;for(const i of e)if(t.family.localeCompare(i.name,void 0,{sensitivity:"accent"})==0&&t.style==i.style){const o=Math.abs(t.weight-i.weight);o<r&&(r=o,n=i)}return n==null?void 0:n.filename}function uM(e,t){const n=[];let r;for(const i of e.split(`
`))if(i.startsWith(">"))r={identifier:i.match(/>(\S+)/)[1],sequence:""},n.push(r);else if(r)r.sequence+=i.trim();else throw new Error("Invalid fasta file!");return n}class cM{constructor(t,n){this.animator=t,this.disabled=!!n,this.damping=.015,this.acceleration=.3,this.accelerationThreshold=100,this.lowerLimit=.5,this.loop=!1,this.momentum=0,this.timestamp=0,this.callback=null,this._transitionCallback=this.animate.bind(this),this.clear()}clear(){this.momentum=0,this.timestamp=null,this.loop=null,this.callback=null}cancel(){this.loop&&(this.animator.cancelTransition(this._transitionCallback),this.clear())}setMomentum(t,n){if(this.disabled){n(t);return}t*this.momentum<0?this.momentum=0:Math.abs(t)>this.accelerationThreshold?this.momentum=Sm([this.momentum,t],this.acceleration):this.momentum=t,this.callback=n,this.loop||this.animate()}animate(t){this.callback(this.momentum);const n=t-this.timestamp||0;this.timestamp=t;const r=Math.abs(this.momentum);this.momentum=Math.sign(this.momentum)*Math.max(0,r-((r*this.damping)**1.5+.04)*n),Math.abs(this.momentum)>this.lowerLimit?(this.loop=!0,this.animator.requestTransition(this._transitionCallback)):this.clear()}}function hM(e){const t={},n=["string","number","boolean"],r=["wheelDelta","wheelDeltaX","wheelDeltaY"];for(const i in e){const o=i;!r.includes(i)&&n.includes(typeof e[o])&&(t[o]=e[o])}return t}const Qx=new Map;async function dM(e,t,n){const r=e.symbol;let i=Qx.get(r)??await mM(e.symbol);return i?(Qx.set(r,i),rt`
            <div class="title">
                <strong>${i.name}</strong>
                ${i.description}
            </div>
            <p class="summary">${i.summary}</p>
            <p class="source">Source: NCBI RefSeq Gene</p>
        `):null}async function pM(e){console.log("Searching: "+e);const t={mode:"cors"},r=(await fetch(`https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=gene&term=${e}[GENE]&sort=relevance&retmode=json`,t).then(i=>i.json())).esearchresult.idlist[0];return r?(await fetch(`https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=gene&id=${r}&retmode=json`,t).then(a=>a.json())).result[r]:null}const gM=qu(pM,500);function mM(e){return gM(e)}const bM=mt(".4~r"),yM=mt(".4~e");function Xx(e){return e==null?rt` <span class="na">NA</span> `:Pe(e)?e.substring(0,30):Number.isInteger(e)?""+e:kt(e)?Math.abs(e)>Math.pow(10,8)||Math.abs(e)<Math.pow(10,-8)?yM(e):bM(e):$a(e)?e?"True":"False":Ct(e)?rt`${e.map((t,n)=>[Xx(t),n<e.length-1?", ":Ke])}`:"?"+typeof e+" "+e}async function wM(e,t,n){const r=(f,l)=>{var u;for(const[c,h]of Object.entries(t.encoders))if((u=h==null?void 0:h.accessor)!=null&&u.fields.includes(f))switch(c){case"color":case"fill":case"stroke":return rt`
                            <span
                                class="color-legend"
                                style=${`background-color: ${h(l)}`}
                            ></span>
                        `}return""},i=Object.entries(e).filter(([f,l])=>!f.startsWith("_"));if(i.length===0)return;const o=rt`
        <table class="attributes">
            ${i.map(([f,l])=>rt`
                    <tr>
                        <th>${f}</th>
                        <td>${Xx(l)} ${r(f,e)}</td>
                    </tr>
                `)}
        </table>
    `,a=t.unitView.getTitleText(),s=a?rt`
              <div class="title">
                  <strong>${a}</strong>
              </div>
          `:"";return rt`${s}${o}`}class tl extends Qi{constructor(n,r,i,o,a,s){super(n,r,i,o,a,s);ee(this,xr,[]);this.spec=n,this.needsAxes={x:!0,y:!0}}async initializeChildren(){He(this,xr,await Promise.all(this.spec.layer.map((n,r)=>this.context.createOrImportView(n,this,this,"grid"+r,i=>{if(!U0(i)&&!z0(i))throw new Wi("LayerView accepts only unit or layer specs as children!",this)}))))}get children(){return W(this,xr).slice()}*[Symbol.iterator](){for(const n of W(this,xr))yield n}render(n,r,i={}){if(super.render(n,r,i),!!this.isConfiguredVisible()){n.pushView(this,r);for(const o of W(this,xr))o.render(n,r,i);n.popView(this)}}propagateInteractionEvent(n){this.handleInteractionEvent(void 0,n,!0);for(let r=W(this,xr).length-1;r>=0;r--)if(W(this,xr)[r].propagateInteractionEvent(n),n.stopped)return;this.handleInteractionEvent(void 0,n,!1)}}xr=new WeakMap;class Kx{constructor(t,n){this.n=t,this.maxCols=n??1/0}get nRows(){return this.maxCols==1/0?1:Math.ceil(this.n/this.maxCols)}get nCols(){return Math.min(this.n,this.maxCols)}get rowIndices(){const t=[],n=this.nCols,r=this.nRows;for(let i=0;i<r;i++){const o=[];t.push(o);for(let a=0;a<n;a++){const s=i*n+a;s<this.n&&o.push(s)}}return t}get colIndices(){const t=[],n=this.nCols,r=this.nRows;for(let i=0;i<n;i++){const o=[];t.push(o);for(let a=0;a<r;a++){const s=a*n+i;s<this.n&&o.push(s)}}return t}getCellIndex(t,n){let r=0;if(this.maxCols==1/0)r=n==0?t:void 0;else{if(t>=this.maxCols)return;r=n*this.nCols+t}return r<this.n?r:void 0}getCellCoords(t){if(!(t<0||t>=this.n))return[t%this.nCols,Math.floor(t/this.nCols)]}}const xM="chromosome_ticks_and_labels",vM={x:"width",y:"height"};function P0(e){return e=="x"?"y":"x"}const Zu={x:["bottom","top"],y:["left","right"]},O0=Object.fromEntries(Object.entries(Zu).map(([e,t])=>t.map(n=>[n,e])).flat(1));function Xr(e){return O0[e]}class Jx extends tl{constructor(t,n,r,i,o,a){const s=n=="locus",f={...s?EM:ev,...AM(n,t),...t};super(s?_M(f,n):tv(f,n),r,i,o,`axis_${t.orient}`,{blockEncodingInheritance:!0,contributesToScaleDomain:!1,...a}),this.axisProps=f}getSize(){const t={px:this.getPerpendicularSize()},n={grow:1};return O0[this.axisProps.orient]=="x"?new Qr(n,t):new Qr(t,n)}getPerpendicularSize(){return L0(this.axisProps)}isPickingSupported(){return!1}}function L0(e){const t=Xr(e.orient);let n=e.ticks&&e.tickSize||0;return e.labels&&(n+=e.labelPadding,t=="x"?n+=e.labelFontSize:n+=30),e.title&&(n+=e.titlePadding+e.titleFontSize),n=Math.min(e.maxExtent||1/0,Math.max(e.minExtent||0,n)),n}const ev={values:null,minExtent:20,maxExtent:1/0,offset:0,domain:!0,domainWidth:1,domainColor:"gray",domainDash:null,domainDashOffset:0,domainCap:"square",ticks:!0,tickSize:5,tickWidth:1,tickColor:"gray",tickDash:null,tickDashOffset:0,tickCap:"square",tickCount:null,tickMinStep:null,labels:!0,labelAlign:"center",labelBaseline:"middle",labelPadding:4,labelFontSize:10,labelLimit:180,labelColor:"black",format:null,titleColor:"black",titleFont:"sans-serif",titleFontSize:10,titlePadding:3};function AM(e,t){const n=t.orient,r=e=="nominal"||e=="ordinal";let i="center",o="middle",a=t.labelAngle??((n=="top"||n=="bottom")&&r?-90:0);switch(n){case"left":i="right";break;case"right":i="left";break;case"top":case"bottom":Math.abs(a)>30?(i=a>0==(n=="bottom")?"left":"right",o="middle"):o=n=="top"?"alphabetic":"top";break}return{labelAlign:i,labelAngle:a,labelBaseline:o}}function tv(e,t){const n={...e,extent:L0(e)},r=Xr(n.orient),i=P0(r),o=n.orient=="bottom"||n.orient=="right"?1:-1,a=n.orient=="bottom"||n.orient=="left"?1:0,s=()=>({name:"domain",data:{values:[0]},mark:{type:"rule",clip:!1,strokeDash:n.domainDash,strokeCap:n.domainCap,color:n.domainColor,[i]:a,size:n.domainWidth}}),f=()=>({name:"labels",mark:{type:"text",clip:!1,align:n.labelAlign,angle:n.labelAngle,baseline:n.labelBaseline,[i+"Offset"]:(n.tickSize+n.labelPadding)*o,[i]:a,size:n.labelFontSize,color:n.labelColor,minBufferSize:1500},encoding:{[r]:{field:"value",type:t},text:{field:"label"}}}),l=()=>({name:"ticks",mark:{type:"rule",clip:!1,strokeDash:n.tickDash,strokeCap:n.tickCap,color:n.tickColor,size:n.tickWidth,minBufferSize:300},encoding:{[i]:{value:a},[i+"2"]:{value:a-n.tickSize/n.extent*(a?1:-1)}}}),u=()=>({name:"title",data:{values:[0]},mark:{type:"text",clip:!1,align:"center",baseline:n.orient=="bottom"?"bottom":"top",angle:[0,90,0,-90][["top","right","bottom","left"].indexOf(n.orient)],text:n.title,color:n.titleColor,[r]:.5,[i]:1-a}}),c=()=>{const d={name:"ticks_and_labels",encoding:{[r]:{field:"value",type:t}},layer:[]};return n.ticks&&d.layer.push(l()),n.labels&&d.layer.push(f()),d},h={resolve:{scale:{[r]:"forced"}},[vM[P0(r)]]:n.extent,data:{lazy:{type:"axisTicks",channel:r,axis:e}},layer:[]};return n.domain&&h.layer.push(s()),(n.ticks||n.labels)&&h.layer.push(c()),n.title&&h.layer.push(u()),h}const EM={...ev,chromTicks:!0,chromTickSize:18,chromTickWidth:1,chromTickColor:"#989898",chromTickDash:[4,2],chromTickDashOffset:1,chromLabels:!0,chromLabelFontSize:13,chromLabelFontWeight:"normal",chromLabelFontStyle:"normal",chromLabelColor:"black",chromLabelAlign:"left",chromLabelPadding:7};function _M(e,t){const n={...e,extent:L0(e)},r=Xr(n.orient),i=P0(r),o=n.orient=="bottom"||n.orient=="left"?1:0,a=()=>({name:"chromosome_ticks",mark:{type:"rule",strokeDash:e.chromTickDash,strokeDashOffset:e.chromTickDashOffset,[i]:o,[i+"2"]:o-n.chromTickSize/n.extent*(o?1:-1),color:e.chromTickColor,size:n.chromTickWidth}}),s=()=>{let u;switch(n.orient){case"top":u={y:0,angle:0,paddingX:4,dy:-n.chromLabelPadding,viewportEdgeFadeWidthLeft:20,viewportEdgeFadeWidthRight:20,viewportEdgeFadeDistanceRight:-10,viewportEdgeFadeDistanceLeft:-20};break;case"bottom":u={y:1,angle:0,paddingX:4,dy:n.chromLabelPadding+n.chromLabelFontSize*.73,viewportEdgeFadeWidthLeft:20,viewportEdgeFadeWidthRight:20,viewportEdgeFadeDistanceRight:-10,viewportEdgeFadeDistanceLeft:-20};break;case"left":u={x:1,angle:-90,paddingY:4,dy:-n.chromLabelPadding,viewportEdgeFadeWidthBottom:20,viewportEdgeFadeWidthTop:20,viewportEdgeFadeDistanceBottom:-20,viewportEdgeFadeDistanceTop:-10};break;case"right":u={x:0,angle:90,align:"right",paddingY:4,dy:-n.chromLabelPadding};break;default:u={}}return{name:"chromosome_labels",mark:{type:"text",size:n.chromLabelFontSize,font:n.chromLabelFont,fontWeight:n.chromLabelFontWeight,fontStyle:n.chromLabelFontStyle,color:n.chromLabelColor,align:e.chromLabelAlign,baseline:"alphabetic",clip:!1,...u},encoding:{[r+"2"]:{field:"continuousEnd",type:t},text:{field:"name"}}}};let f;switch(n.orient){case"bottom":case"top":f={};break;case"left":f={labelAngle:-90,labelAlign:"center",labelPadding:6};break;case"right":f={labelAngle:90,labelAlign:"center",labelPadding:6};break;default:f={}}const l=tv({...e,...f},t);if(e.chromTicks||e.chromLabels){const u={name:xM,data:{lazy:{type:"axisGenome",channel:Xr(n.orient)}},encoding:{[r]:{field:"continuousStart",type:t,band:0}},layer:[]};if(e.chromTicks&&u.layer.push(a()),e.chromLabels){u.layer.push(s());let c;l.layer.filter(h=>h.name=="ticks_and_labels").forEach(h=>h.layer.filter(d=>d.name=="labels").forEach(d=>{c=d.mark})),c&&(n.orient=="top"||n.orient=="bottom"?(c.viewportEdgeFadeWidthLeft=30,c.viewportEdgeFadeDistanceLeft=40):(c.viewportEdgeFadeWidthBottom=30,c.viewportEdgeFadeDistanceBottom=40))}l.layer.push(u)}return l}class SM extends tl{constructor(t,n,r,i,o,a){const f={...n=="locus"?CM:nv,...t};super(BM(f,n),r,i,o,`axisGrid_${t.orient}`,{blockEncodingInheritance:!0,contributesToScaleDomain:!1,...a}),this.axisProps=f}getOrient(){return this.axisProps.orient}isPickingSupported(){return!1}}const nv={values:null,grid:!1,gridCap:"butt",gridColor:"lightgray",gridDash:null,gridOpacity:1,gridWidth:1,tickCount:null,tickMinStep:null},CM={...nv,chromGrid:!1,chromGridCap:"butt",chromGridColor:"gray",chromGridDash:[1,5],chromGridOpacity:1,chromGridWidth:1};function kM(e,t){const n=e,r=Xr(n.orient);return{name:"grid_lines",data:{lazy:{type:"axisTicks",channel:r,axis:e}},mark:{type:"rule",strokeDash:n.gridDash,strokeCap:n.gridCap,color:n.gridColor,size:n.gridWidth,opacity:n.gridOpacity,minBufferSize:300},encoding:{[r]:{field:"value",type:t}}}}function TM(e,t){const n=e,r=Xr(n.orient);return{name:"chromosome_lines",data:{lazy:{type:"axisGenome",channel:r}},mark:{type:"rule",strokeDash:n.chromGridDash,strokeCap:n.chromGridCap,color:n.chromGridColor,size:n.chromGridWidth,opacity:n.chromGridOpacity},encoding:{[r]:{field:"continuousStart",type:t,band:0}}}}function IM(e,t){const n=e,r=Xr(n.orient);return{name:"chromosome_fill",data:{lazy:{type:"axisGenome",channel:r}},mark:{type:"rect"},encoding:{[r]:{field:"continuousStart",type:t,band:0},[r+"2"]:{field:"continuousEnd",band:0},fill:{field:"odd",type:"nominal",scale:{domain:[!1,!0],range:[n.chromGridFillEven??"white",n.chromGridFillOdd??"white"]}},opacity:{field:"odd",type:"nominal",scale:{type:"ordinal",domain:[!1,!0],range:[n.chromGridFillEven?1:0,n.chromGridFillOdd?1:0]}}}}}function BM(e,t){const n={...e},r=[];return n.chromGrid&&(n.chromGridFillOdd||n.chromGridFillEven)&&r.push(IM(n,t)),n.chromGrid&&n.chromGridOpacity>0&&r.push(TM(n,t)),n.grid&&n.gridOpacity>0&&r.push(kM(n,t)),{name:"grid_layers",configurableVisibility:!1,resolve:{scale:{[Xr(e.orient)]:"forced",fill:"independent",opacity:"independent"}},layer:r}}const rv={anchor:"middle",frame:"group",offset:10,orient:"top",align:void 0,angle:0,baseline:"alphabetic",dx:0,dy:0,color:void 0,font:void 0,fontSize:12,fontStyle:"normal",fontWeight:"normal"},DM={orient:"left",anchor:"middle",align:"right",baseline:"middle",angle:0,fontSize:12},FM={orient:"top",anchor:"start",align:"left",baseline:"top",offset:-10,dx:10,fontSize:12},RM={start:0,middle:.5,end:1},MM={start:"left",middle:"center",end:"right"};function PM(e){if(!e)return;const t=Pe(e)?{text:e}:e;if(!t.text||t.orient=="none")return;const n={"track-title":DM,overlay:FM}[t.style]??{},r={...rv,...n,...t};let i={},o={x:0,y:0};const a=RM[r.anchor??"middle"];switch(r.orient){case"top":o={x:a,y:1},i={baseline:"alphabetic",angle:0};break;case"right":o={x:1,y:1-a},i={baseline:"alphabetic",angle:90};break;case"bottom":o={x:a,y:0},i={baseline:"top",angle:0};break;case"left":o={x:0,y:a},i={baseline:"alphabetic",angle:-90};break}const s={...rv,...i,...n,...t},f={xOffset:0,yOffset:0};switch(r.orient){case"top":f.yOffset=-s.offset;break;case"right":f.xOffset=s.offset;break;case"bottom":f.yOffset=s.offset;break;case"left":f.xOffset=-s.offset;break}return{configurableVisibility:!1,data:{values:[{}]},mark:{type:"text",tooltip:null,clip:!1,...o,...f,text:s.text,align:s.align??MM[s.anchor],angle:s.angle,baseline:s.baseline,dx:s.dx,dy:s.dy,color:s.color,font:s.font,size:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight}}}function OM(e,t,n,r){if(e.type=="wheel"){e.uiEvent.preventDefault();const i=e.uiEvent,o=i.deltaMode?120:1;let{x:a,y:s}=e.point;if(r){const f=r.mark.encoders;f.x&&!f.x2&&!f.x.constantValue&&(a=+f.x(r.datum)*t.width+t.x),f.y&&!f.y2&&!f.y.constantValue&&(s=(1-+f.y(r.datum))*t.height+t.y)}Math.abs(i.deltaX)<Math.abs(i.deltaY)?n({x:a,y:s,xDelta:0,yDelta:0,zDelta:i.deltaY*o/300}):n({x:a,y:s,xDelta:-i.deltaX*o,yDelta:0,zDelta:0})}else if(e.type=="mousedown"&&e.uiEvent.button===0){const i=e.uiEvent;i.preventDefault();let o=i;const a=f=>{n({x:o.clientX,y:o.clientY,xDelta:f.clientX-o.clientX,yDelta:f.clientY-o.clientY,zDelta:0}),o=f},s=f=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",s)};document.addEventListener("mouseup",s,!1),document.addEventListener("mousemove",a,!1)}}class LM extends Qi{constructor(n,r,i,o,a,s,f){super(n,r,i,o,a,f);ee(this,vr);ee(this,th);ee(this,vo);ee(this,pf);ee(this,gf);ee(this,mf);ee(this,nh);ee(this,Ga);ee(this,rh);ee(this,Na,1/0);ee(this,za,10);ee(this,Jt,[]);ee(this,xo,{});ee(this,Ua,0);this.spec=n,He(this,za,n.spacing??10),He(this,Na,s),He(this,Jt,[]),this.wrappingFacet=!1}appendChild(n){n.layoutParent??(n.layoutParent=this),W(this,Jt).push(new ov(n,this,W(this,Ua))),qS(this,Ua)._++}setChildren(n){He(this,Jt,[]);for(const r of n)this.appendChild(r)}replaceChild(n,r){const i=W(this,Jt).findIndex(o=>o.view==n);if(i>=0)W(this,Jt)[i]=new ov(r,this,W(this,Ua));else throw new Error("Not my child view!")}get children(){return W(this,Jt).map(n=>n.view)}get childCount(){return W(this,Jt).length}async createAxes(){const n=[];for(const r of Wo){const i=this.resolutions.axis[r];if(i){const o=i.getAxisProps();if(o){const a={title:i.getTitle(),orient:Zu[r][0],...o},s=new Jx(a,i.scaleResolution.type,this.context,this,this);n.push(s.initializeChildren()),W(this,xo)[r]=s}}}return Promise.all([...n,...W(this,Jt).map(r=>r.createAxes())])}*[Symbol.iterator](){for(const n of W(this,Jt))yield*n.getChildren();for(const n of Object.values(W(this,xo)))yield n}getOverhang(){return J(this,nh,e3).call(this).union(J(this,Ga,fh).call(this))}getSize(){return this._cache("size",()=>new Qr(J(this,gf,bm).call(this,"column"),J(this,gf,bm).call(this,"row")).addPadding(J(this,Ga,fh).call(this)))}render(n,r,i={}){if(super.render(n,r,i),!this.isConfiguredVisible())return;this.layoutParent||(r=r.shrink(this.getPadding())),r=r.shrink(J(this,Ga,fh).call(this)),n.pushView(this,r);const o={devicePixelRatio:this.context.devicePixelRatio},a=ux(J(this,pf,mm).call(this,"column"),r.width,o),s=ux(J(this,pf,mm).call(this,"row"),r.height,o),f=new Kx(W(this,vr,_o).length,W(this,Na)??1/0),l=u=>Math.round(u*devicePixelRatio)/devicePixelRatio;for(const[u,c]of W(this,vr,_o).entries()){const{view:h,axes:d,gridLines:p,background:m,backgroundStroke:y,title:w}=c,[A,S]=f.getCellCoords(u),_=a[J(this,mf,ym).call(this,"column",A)],T=s[J(this,mf,ym).call(this,"row",S)],I=h.getViewportSize(),B=h.getSize(),F=h.getOverhang(),M=_.location-F.left,G=T.location-F.top,N=(Ne,O)=>(Ne[O].grow?(O=="width"?_:T).size:Ne[O].px)+F[O],re=N(I,"width"),se=N(I,"height"),te=N(B,"width"),pe=N(B,"height"),Xe=c.scrollbars.horizontal,De=c.scrollbars.vertical,Je=Xe?()=>l(Xe.viewportOffset):()=>0,We=De?()=>l(De.viewportOffset):()=>0,et=new fr(()=>r.x+M,()=>r.y+G,()=>re,()=>se),_e=h.isScrollable(),Se=_e?new fr(()=>r.x+M-Je(),()=>r.y+G-We(),()=>te,()=>pe):et;c.coords=et;const gt=i.clipRect?et.intersect(i.clipRect):et;m==null||m.render(n,gt,{...i,clipRect:void 0});for(const Ne of Object.values(p))Ne.render(n,et,i);const jt=GM(h)||_e;jt&&h.render(n,Se,{...i,clipRect:gt}),y==null||y.render(n,gt,{...i,clipRect:void 0});for(const[Ne,O]of Object.entries(d)){const P=Ne=="left"||Ne=="right"?"vertical":"horizontal",$=c.scrollbars[P],V=$?et.modify(P=="vertical"?{y:()=>Se.y,height:pe}:{x:()=>Se.x,width:te}):et,Z=iv(V,Ne,O);let C=i.clipRect;$&&(C=Z.intersect(C).intersect($?et.modify(P=="vertical"?{x:-1e5,width:2e5}:{y:-1e5,height:2e5}):void 0)),O.render(n,Z,{...i,clipRect:C})}for(const Ne of Object.values(W(this,xo))){const P=Ne.axisProps.orient;(P=="left"&&A==0||P=="right"&&A==f.nCols-1||P=="top"&&S==0||P=="bottom"&&S==f.nRows-1)&&Ne.render(n,iv(et.shrink(c.view.getOverhang()),P,Ne),i)}jt||h.render(n,Se,i);for(const Ne of Object.values(c.scrollbars))Ne.updateScrollbar(et,Se),Ne.render(n,r,i);w==null||w.render(n,et,i)}n.popView(this)}propagateInteractionEvent(n){if(this.handleInteractionEvent(void 0,n,!0),n.stopped)return;const r=W(this,vr,_o).find(o=>o.coords.containsPoint(n.point.x,n.point.y));for(const o of Object.values((r==null?void 0:r.scrollbars)??{}))if(o.coords.containsPoint(n.point.x,n.point.y)&&(o.propagateInteractionEvent(n),n.stopped))return;const i=r==null?void 0:r.view;i&&(i.propagateInteractionEvent(n),(i instanceof Zt||i instanceof tl)&&OM(n,r.coords,o=>J(this,rh,t3).call(this,r.coords,r.view,o),this.context.getCurrentHover())),!n.stopped&&this.handleInteractionEvent(void 0,n,!1)}getDefaultResolution(n,r){return"independent"}}Na=new WeakMap,za=new WeakMap,Jt=new WeakMap,xo=new WeakMap,Ua=new WeakMap,vr=new WeakSet,_o=function(){return W(this,Jt).filter(n=>n.view.isConfiguredVisible())},th=new WeakSet,JS=function(){return new Kx(W(this,vr,_o).length,W(this,Na)??1/0)},vo=new WeakSet,xf=function(n){const r=n=="column"?"width":"height",i=(o,a)=>o.map(s=>{const l=W(this,vr,_o)[s].getOverhangAndPadding();return n=="column"?a?l.right:l.left:a?l.bottom:l.top}).reduce((s,f)=>Math.max(s,f),0);return this._cache(`size/directionSizes/${n}`,()=>W(this,th,JS)[n=="column"?"colIndices":"rowIndices"].map(o=>({axisBefore:i(o,0),axisAfter:i(o,1),view:jF(o.map(a=>W(this,vr,_o)[a].view.getViewportSize()[r]))})))},pf=new WeakSet,mm=function(n){const r=J(this,vo,xf).call(this,n),i=[];i.push(Ys);for(const[o,a]of r.entries())o>0&&i.push({px:W(this,za),grow:0}),(o==0||this.wrappingFacet)&&i.push(Ys),i.push({px:a.axisBefore,grow:0}),i.push(a.view),i.push({px:a.axisAfter,grow:0}),(o==r.length-1||this.wrappingFacet)&&i.push(Ys);return i},gf=new WeakSet,bm=function(n){let r=0,i=0;const o=n=="row"?this.spec.height:this.spec.width;if(o||o===0)return hx(o);const a=J(this,vo,xf).call(this,n);for(const[s,f]of a.entries())s>0&&(i+=W(this,za)),(s==0||this.wrappingFacet)&&(i+=0),i+=f.axisBefore,i+=f.view.px??0,r+=f.view.grow??0,i+=f.axisAfter,(s==a.length-1||this.wrappingFacet)&&(i+=0);return{px:i,grow:r}},mf=new WeakSet,ym=function(n,r){return n=="row"&&this.wrappingFacet?1+6*r+2:2+4*r+1},nh=new WeakSet,e3=function(){const n=J(this,vo,xf).call(this,"column"),r=J(this,vo,xf).call(this,"row");return!n.length||!r.length?_t.zero():new _t(r.at(0).axisBefore,n.at(-1).axisAfter,r.at(-1).axisAfter,n.at(0).axisBefore)},Ga=new WeakSet,fh=function(){const n=r=>{const i=O0[r],o=W(this,xo)[i];return(o==null?void 0:o.axisProps.orient)!==r?0:Math.max(o.getPerpendicularSize()+o.axisProps.offset,0)};return new _t(n("top"),n("right"),n("bottom"),n("left"))},rh=new WeakSet,t3=function(n,r,i){for(const[o,a]of Object.entries(UM(r))){if(a.size<=0)continue;const s=n.normalizePoint(i.x,i.y),f=n.normalizePoint(i.x+i.xDelta,i.y+i.yDelta),l={x:f.x-s.x,y:f.y-s.y};for(const u of a)u.zoom(2**i.zDelta,o=="y"?1-s[o]:s[o],o=="x"?l.x:-l.y)}this.context.animator.requestRender()};function NM(e){if(!(!e||!e.fill||e.fillOpacity===0))return{configurableVisibility:!1,data:{values:[{}]},mark:{color:e.fill,opacity:e.fillOpacity??1,type:"rect",clip:!1,tooltip:null,minHeight:1,minOpacity:0}}}function zM(e){if(!(!e||!e.stroke||e.strokeWidth===0||e.strokeOpacity===0))return{configurableVisibility:!1,resolve:{scale:{x:"excluded",y:"excluded"},axis:{x:"excluded",y:"excluded"}},data:{values:[{x:0,y:0,x2:1,y2:0},{x:1,y:0,x2:1,y2:1},{x:1,y:1,x2:0,y2:1},{x:0,y:1,x2:0,y2:0}]},mark:{size:e.strokeWidth??1,color:e.stroke??"lightgray",strokeCap:"square",strokeOpacity:e.strokeOpacity??1,type:"rule",clip:!1,tooltip:null},encoding:{x:{field:"x",type:"quantitative",scale:null},y:{field:"y",type:"quantitative",scale:null},x2:{field:"x2"},y2:{field:"y2"}}}}function UM(e){const t={x:new Set,y:new Set};return e.visit(n=>{for(const[r,i]of Object.entries(t)){const o=n.getScaleResolution(r);o&&o.isZoomable()&&i.add(o)}}),t}function GM(e){let t=!0;return e.visit(n=>{n instanceof Zt&&t&&(t=n.mark.properties.clip===!0)}),t}function iv(e,t,n){const r=n.axisProps,i=n.getPerpendicularSize();if(t=="bottom")return e.translate(0,e.height+r.offset).modify({height:i});if(t=="top")return e.translate(0,-i-r.offset).modify({height:i});if(t=="left")return e.translate(-i-r.offset,0).modify({width:i});if(t=="right")return e.translate(e.width+r.offset,0).modify({width:i})}class ov{constructor(t,n,r){if(this.layoutParent=n,this.view=t,this.serial=r,this.background=void 0,this.backgroundStroke=void 0,this.axes={},this.gridLines={},this.scrollbars={},this.title=void 0,this.coords=fr.ZERO,t.needsAxes.x||t.needsAxes.y){const i=t.spec,o="view"in i?i==null?void 0:i.view:void 0,a=NM(o);a&&(this.background=new Zt(a,n.context,n,t,"background"+r,{blockEncodingInheritance:!0}));const s=zM(o);s&&(this.backgroundStroke=new Zt(s,n.context,n,t,"backgroundStroke"+r,{blockEncodingInheritance:!0}));const f=PM(t.spec.title);if(f){const l=new Zt(f,n.context,n,t,"title"+r,{blockEncodingInheritance:!0});this.title=l}}t.spec.viewportWidth!=null&&(this.scrollbars.horizontal=new av(this,"horizontal")),t.spec.viewportHeight!=null&&(this.scrollbars.vertical=new av(this,"vertical"))}*getChildren(){this.background&&(yield this.background),this.backgroundStroke&&(yield this.backgroundStroke),this.title&&(yield this.title),yield*Object.values(this.axes),yield*Object.values(this.gridLines),yield this.view,yield*Object.values(this.scrollbars)}async createAxes(){const{view:t,axes:n,gridLines:r}=this,i=(s,f)=>{const l=s.getAxisProps();if(l===null)return;const u=l?{...l}:{};if(!u.orient){for(const c of Zu[f])if(!n[c]){u.orient=c;break}if(!u.orient)throw new Error("No slots available for an axis! Perhaps a LayerView has more than two children?")}if(u.title??(u.title=s.getTitle()),!Zu[f].includes(u.orient))throw new Error(`Invalid axis orientation "${u.orient}" on channel "${f}"!`);return u},o=async(s,f,l)=>{const u=i(s,f);if(u){if(n[u.orient])throw new Error(`An axis with the orient "${u.orient}" already exists!`);const c=new Jx(u,s.scaleResolution.type,this.layoutParent.context,this.layoutParent,l);n[u.orient]=c,await c.initializeChildren()}},a=async(s,f,l)=>{const u=i(s,f);if(u&&(u.grid||u.chromGrid)){const c=new SM(u,s.scaleResolution.type,this.layoutParent.context,this.layoutParent,l);r[u.orient]=c,await c.initializeChildren()}};for(const s of["x","y"])if(t.needsAxes[s]){const f=t.resolutions.axis[s];if(!f)continue;await o(f,s,t)}for(const s of["x","y"])if(t.needsAxes[s]){const f=t.getAxisResolution(s);if(!f)continue;await a(f,s,t)}if(t instanceof tl){for(const s of t)for(const[f,l]of Object.entries(s.resolutions.axis)){const u=l.getAxisProps();u&&u.orient&&await o(l,f,s)}for(const s of t)for(const[f,l]of Object.entries(s.resolutions.axis)){const u=l.getAxisProps();u&&!u.orient&&await o(l,f,s)}}[...Object.values(n),...Object.values(r)].forEach(s=>s.visit(f=>{f instanceof Zt&&f.resolve("scale")}))}getOverhang(){const t=n=>{const r=this.axes[n];return r?Math.max(r.getPerpendicularSize()+r.axisProps.offset,0):0};return new _t(t("top"),t("right"),t("bottom"),t("left")).add(this.view.getOverhang())}getOverhangAndPadding(){return this.getOverhang().add(this.view.getPadding())}}class av extends Zt{constructor(t,n){const r={scrollbarSize:8,scrollbarPadding:2};super({data:{values:[{}]},mark:{type:"rect",fill:"#b0b0b0",fillOpacity:.6,stroke:"white",strokeWidth:1,strokeOpacity:1,cornerRadius:5,clip:!1},configurableVisibility:!1},t.layoutParent.context,t.layoutParent,t.view,"scrollbar-"+n,{blockEncodingInheritance:!0}),this.config=r,this.scrollDirection=n,this.viewportOffset=0,this.maxScrollOffset=0,this.scrollbarCoords=fr.ZERO,this.addInteractionEventListener("mousedown",(i,o)=>{if(o.stopPropagation(),this.maxScrollOffset<=0)return;const a=h=>n=="vertical"?h.clientY:h.clientX,s=o.uiEvent;s.preventDefault();const f=this.getScrollOffset(),l=a(s),u=h=>{const d=Cs(a(h)-l+f,0,this.maxScrollOffset);this.viewportOffset=d/this.maxScrollOffset*this.maxViewportOffset,this.context.animator.requestRender()},c=()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",c)};document.addEventListener("mouseup",c,!1),document.addEventListener("mousemove",u,!1)})}getScrollOffset(){return this.viewportOffset/this.maxViewportOffset*this.maxScrollOffset}render(t,n,r){super.render(t,this.scrollbarCoords,r)}updateScrollbar(t,n){const r=this.config.scrollbarPadding,i=this.config.scrollbarSize,o=this.scrollDirection=="horizontal"?"width":"height",a=Math.min(1,t[o]/n[o]),s=t[o]-2*r,f=a*s;this.maxScrollOffset=s-f,this.maxViewportOffset=n[o]-t[o],this.viewportOffset=Cs(this.viewportOffset,0,this.maxViewportOffset),this.scrollbarCoords=this.scrollDirection=="vertical"?new fr(()=>t.x+t.width-i-r,()=>t.y+r+this.getScrollOffset(),()=>i,()=>f):new fr(()=>t.x+r+this.getScrollOffset(),()=>t.y+t.height-i-r,()=>f,()=>i)}}class N0 extends LM{constructor(t,n,r,i,o){super(t,n,r,i,o,G0(t)?t.columns:Yu(t)?1:1/0),this.spec=t}async initializeChildren(){const t=this.spec,n=G0(t)?t.concat:Yu(t)?t.vconcat:t.hconcat;this.setChildren(await Promise.all(n.map((r,i)=>this.context.createOrImportView(r,this,this,"grid"+i)))),await this.createAxes()}getDefaultResolution(t,n){return n=="axis"?"independent":Yu(this.spec)&&t==="x"||lv(this.spec)&&t==="y"?"shared":"independent"}}const sv="viewRoot";class HM{constructor(t={}){ee(this,Ha,new Map);this.options={allowImport:!0,wrapRoot:!0,...t};const n=r=>(i,o,a,s,f)=>new r(i,o,a,s,i.name??f);this.addViewType(U0,n(tl)),this.addViewType(z0,n(Zt)),this.addViewType(Yu,n(N0)),this.addViewType(lv,n(N0)),this.addViewType(G0,n(N0)),this.addViewType(jM,()=>{throw new Error("SampleView is not supported by the @genome-spy/core package. Use @genome-spy/app instead!")})}addViewType(t,n){W(this,Ha).set(t,n)}createView(t,n,r,i,o){for(const[a,s]of W(this,Ha))if(a(t))return s(t,n,r,i,o);throw new Error("Invalid spec, cannot figure out the view type from the properties: "+JSON.stringify([...Object.keys(t)]))}isViewSpec(t){const n=[...W(this,Ha).keys()].filter(r=>r(t));if(n.length>1)throw new Error("Ambiguous spec. Cannot create a view!");return n.length==1}async createOrImportView(t,n,r,i,o,a){let s;if(VM(t))if(this.options.allowImport)s=await Q5(t,i.getBaseUrl(),n),a&&a(s);else throw new Wi("Importing views is not allowed!",r);else s=t;!i&&this.options.wrapRoot&&(z0(s)||U0(s))&&o===sv&&(s={name:"implicitRoot",vconcat:[s]});const f=this.createView(s,n,r,i,o);return f instanceof Qi&&await f.initializeChildren(),f}}Ha=new WeakMap;function z0(e){return"mark"in e&&(Pe(e.mark)||Rt(e.mark))}function U0(e){return"layer"in e&&Rt(e.layer)}function VM(e){return"import"in e}function Yu(e){return"vconcat"in e&&Ct(e.vconcat)}function lv(e){return"hconcat"in e&&Ct(e.hconcat)}function G0(e){return"concat"in e&&Ct(e.concat)}function jM(e){return"samples"in e&&Rt(e.samples)&&"spec"in e&&Rt(e.spec)}class $M{constructor(){ee(this,Va,void 0);ee(this,Ao,void 0);ee(this,bf,void 0);ee(this,gi,void 0);He(this,Va,new Map),He(this,Ao,new Set),He(this,gi,new Map),He(this,bf,new Proxy(W(this,Va),{get(t,n){return Pe(n)?t.get(n):void 0}}))}allocateSetter(t){if(W(this,Ao).has(t))throw new Error("Setter already allocated for parameter: "+t);return W(this,Ao).add(t),n=>{W(this,Va).set(t,n);const r=W(this,gi).get(t);if(r)for(const i of r)i()}}createExpression(t){const n=Qf(t,W(this,bf));for(const i of n.globals)if(!W(this,Ao).has(i))throw new Error(`Unknown variable "${i}" in expression: ${t}`);const r=new Set;return n.addListener=i=>{for(const o of n.globals){const a=W(this,gi).get(o)??new Set;W(this,gi).set(o,a),a.add(i),r.add(i)}},n.invalidate=()=>{for(const i of n.globals){const o=W(this,gi).get(i);for(const a of r)o.delete(a)}},n}}Va=new WeakMap,Ao=new WeakMap,bf=new WeakMap,gi=new WeakMap,C1("fasta",uM);class qM{constructor(t,n,r={}){ee(this,ih);this.container=t,this._destructionCallbacks=[];const i=document.createElement("style");i.innerHTML=n4,t.appendChild(i),this.spec=n,this.accessorFactory=new iF,this.viewFactory=new HM,this.namedDataProviders=[],this.animator=new rM(()=>this.renderAll()),this.genomeStore=void 0,this.viewVisibilityPredicate=o=>o.isVisibleInSpec(),this._renderingContext=void 0,this._pickingContext=void 0,this._dirtyPickingBuffer=!1,this._currentHover=void 0,this._wheelInertia=new cM(this.animator),this._keyboardListeners=new Map,this._eventListeners=new Map,this._extraBroadcastListeners=new Map,this.tooltipHandlers={default:wM,refseqgene:dM,...r.tooltipHandlers??{}},this.viewRoot=void 0,this._paramBroker=new $M,J(this,ih,n3).call(this),this._loadingViews=new Map}registerNamedDataProvider(t){this.namedDataProviders.unshift(t)}getNamedDataFromProvider(t){for(const n of this.namedDataProviders){const r=n(t);if(r)return r}}updateNamedData(t,n){const r=this.viewRoot.context.dataFlow.findNamedDataSource(t);if(!r)throw new Error("No such named data source: "+t);r.dataSource.updateDynamicData(n),B0(r.hosts),this.animator.requestRender()}broadcast(t,n){var i;const r={type:t,payload:n};this.viewRoot.visit(o=>o.handleBroadcast(r)),(i=this._extraBroadcastListeners.get(t))==null||i.forEach(o=>o(r))}_updateLoadingIndicators(){const t=[],n=()=>[...this._loadingViews.values()].some(r=>r);for(const[r,i]of this._loadingViews){const o=r.coords;if(o){const a={left:`${o.x}px`,top:`${o.y}px`,width:`${o.width}px`,height:`${o.height}px`};t.push(rt`<div style=${$h(a)}>
                        <div class=${i?"loading":""}>
                            <img src="${t4}" alt="" />
                            <span>Loading...</span>
                        </div>
                    </div>`)}}n()?this.loadingIndicatorsElement.style.display="block":setTimeout(()=>{n()||(this.loadingIndicatorsElement.style.display="none")},3e3),bs(t,this.loadingIndicatorsElement)}_prepareContainer(){this.container.classList.add("genome-spy"),this.container.classList.add("loading"),this._glHelper=new $D(this.container,()=>this.viewRoot?X5(this.viewRoot):{width:void 0,height:void 0},this.spec.background);const t=()=>{this._glHelper.invalidateSize(),r(window.devicePixelRatio),this.computeLayout(),this.renderAll()},n=new ResizeObserver(t);n.observe(this.container),this._destructionCallbacks.push(()=>n.disconnect());const r=this._paramBroker.allocateSetter("devicePixelRatio");r(window.devicePixelRatio);let i=null;const o=()=>{i!=null&&(i(),t());const a=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);a.addEventListener("change",o),i=()=>{a.removeEventListener("change",o)}};o(),i&&this._destructionCallbacks.push(i),this.loadingMessageElement=document.createElement("div"),this.loadingMessageElement.className="loading-message",this.loadingMessageElement.innerHTML='<div class="message">Loading<span class="ellipsis">...</span></div>',this.container.appendChild(this.loadingMessageElement),this.loadingIndicatorsElement=document.createElement("div"),this.loadingIndicatorsElement.className="loading-indicators",this.container.appendChild(this.loadingIndicatorsElement),this.tooltip=new i4(this.container),this.loadingMessageElement.querySelector(".message").addEventListener("transitionend",()=>{this.loadingMessageElement.style.display="none"})}destroy(){this.container.classList.remove("genome-spy"),this.container.classList.remove("loading");for(const[t,n]of this._keyboardListeners)for(const r of n)document.removeEventListener(t,r);for(this._destructionCallbacks.forEach(t=>t()),this._glHelper.finalize();this.container.firstChild;)this.container.firstChild.remove()}async _prepareViewsAndData(){this.spec.genome&&(this.genomeStore=new iM(this.spec.baseUrl),await this.genomeStore.initialize(this.spec.genome));const t=this,n={dataFlow:new jx,accessorFactory:this.accessorFactory,glHelper:this._glHelper,animator:this.animator,genomeStore:this.genomeStore,fontManager:new sM(this._glHelper),get devicePixelRatio(){return t._glHelper.dpr},paramBroker:this._paramBroker,requestLayoutReflow:()=>{},updateTooltip:this.updateTooltip.bind(this),getNamedDataFromProvider:this.getNamedDataFromProvider.bind(this),getCurrentHover:()=>this._currentHover,setDataLoadingStatus:(f,l)=>{this._loadingViews.set(f,l),this._updateLoadingIndicators()},addKeyboardListener:(f,l)=>{document.addEventListener(f,l);let u=this._keyboardListeners.get(f);u||(u=[],this._keyboardListeners.set(f,u)),u.push(l)},addBroadcastListener(f,l){const u=t._extraBroadcastListeners;let c=u.get(f);c||(c=new Set,u.set(f,c)),c.add(l)},removeBroadcastListener(f,l){var c;(c=t._extraBroadcastListeners.get(f))==null||c.delete(l)},isViewConfiguredVisible:t.viewVisibilityPredicate,isViewSpec:f=>t.viewFactory.isViewSpec(f),createView:function(f,l,u,c){return t.viewFactory.createView(f,n,l,u,c)},createOrImportView:async function(f,l,u,c,h){return t.viewFactory.createOrImportView(f,n,l,u,c,h)}},r=this.spec;r.datasets&&this.registerNamedDataProvider(f=>r.datasets[f]),this.viewRoot=await n.createOrImportView(r,null,null,sv),Z5(this.viewRoot),Y5(this.viewRoot);const i=this.viewRoot.getDescendants();i.forEach(f=>f.configureViewOpacity()),this._glHelper.invalidateSize();const o=i.filter(f=>f instanceof Zt),a=H5(this.viewRoot,n.dataFlow);W5(a),this.broadcast("dataFlowBuilt",a),o.forEach(f=>f.mark.initializeEncoders());const s=Promise.all(o.map(f=>f.mark.initializeGraphics()));for(const f of o)a.addObserver(l=>{f.mark.initializeData(),f.mark.updateGraphicsData()},f);await n.fontManager.waitUntilReady(),a.initialize(),await Promise.all(a.dataSources.map(f=>f.load())),B0(this.viewRoot),this.broadcast("dataLoaded"),await s;for(const f of o)f.mark.finalizeGraphicsInitialization();n.requestLayoutReflow=this.computeLayout.bind(this),this.viewRoot.visit(f=>zu(f,"size")),this._glHelper.invalidateSize()}async launch(){try{return this._prepareContainer(),await this._prepareViewsAndData(),this.registerMouseEvents(),this.computeLayout(),this.animator.requestRender(),!0}catch(t){const n=`${t.view?`At "${t.view.getPathString()}": `:""}${t.toString()}`;return console.error(t.stack),WM(this.container,n),!1}finally{this.container.classList.remove("loading"),window.setTimeout(()=>{this.loadingMessageElement.style.display="none"},2e3)}}registerMouseEvents(){const t=this._glHelper.canvas,n=r=>{var i;if(r instanceof MouseEvent){r.type=="mousemove"&&(this.tooltip.handleMouseMove(r),this._tooltipUpdateRequested=!1,r.buttons==0&&this.renderPickingFramebuffer());const o=t.getBoundingClientRect(),a=new eM(r.clientX-o.left-t.clientLeft,r.clientY-o.top-t.clientTop),s=f=>{this.viewRoot.propagateInteractionEvent(new J5(a,f)),this._tooltipUpdateRequested||this.tooltip.clear()};if(r.type!="wheel"&&this._wheelInertia.cancel(),r.type=="mousemove")this._handlePicking(a.x,a.y);else if(r.type=="mousedown"||r.type=="mouseup")this.renderPickingFramebuffer();else if(r.type=="wheel"){this._tooltipUpdateRequested=!1;const f=r;if(Math.abs(f.deltaX)>Math.abs(f.deltaY))this._currentHover=null,this._wheelInertia.cancel();else{const l=hM(f);this._wheelInertia.setMomentum(f.deltaY*(f.deltaMode?80:1),u=>{const c=new WheelEvent("wheel",{...l,deltaMode:0,deltaX:0,deltaY:u});s(c)}),f.preventDefault();return}}if(r.type=="click"){const f=this._currentHover?{type:r.type,viewPath:this._currentHover.mark.unitView.getLayoutAncestors().map(l=>l.name).reverse(),datum:this._currentHover.datum}:{type:r.type,viewPath:null,datum:null};(i=this._eventListeners.get("click"))==null||i.forEach(l=>l(f))}s(r)}};["mousedown","mouseup","wheel","click","mousemove","gesturechange","contextmenu"].forEach(r=>t.addEventListener(r,n)),t.addEventListener("mousedown",()=>{document.addEventListener("mouseup",()=>this.tooltip.popEnabledState(),{once:!0}),this.tooltip.pushEnabledState(!1)}),t.addEventListener("dragstart",r=>r.stopPropagation())}_handlePicking(t,n){var o;const r=this._glHelper.readPickingPixel(t,n),i=r[0]|r[1]<<8|r[2]<<16;if(i==0){this._currentHover=null;return}if(i!==((o=this._currentHover)==null?void 0:o.uniqueId)&&(this._currentHover=null),this._currentHover||this.viewRoot.visit(a=>{if(a instanceof Zt){if(a.mark.isPickingParticipant()){const s=a.mark.encoders.uniqueId.accessor;a.getCollector().visitData(f=>{s(f)==i&&(this._currentHover={mark:a.mark,datum:f,uniqueId:i})})}if(this._currentHover)return Qs}}),this._currentHover){const a=this._currentHover.mark;this.updateTooltip(this._currentHover.datum,async s=>{if(!a.isPickingParticipant())return;const f=a.properties.tooltip;if(f!==null){const l=(f==null?void 0:f.handler)??"default",u=this.tooltipHandlers[l];if(!u)throw new Error("No such tooltip handler: "+l);return u(s,a,f==null?void 0:f.params)}})}}updateTooltip(t,n){if(!this._tooltipUpdateRequested||!t)this.tooltip.updateWithDatum(t,n),this._tooltipUpdateRequested=!0;else throw new Error("Tooltip has already been updated! Duplicate event handler?")}computeLayout(){const t=this.viewRoot;if(!t)return;this.broadcast("layout");const n=this._glHelper.getLogicalCanvasSize();if(isNaN(n.width)||isNaN(n.height)){console.log(`NaN in canvas size: ${n.width}x${n.height}. Skipping computeLayout().`);return}this._renderingContext=new Zx({picking:!1},this._glHelper),this._pickingContext=new Zx({picking:!0},this._glHelper),t.render(new K5(this._renderingContext,this._pickingContext),fr.create(0,0,n.width,n.height)),this.broadcast("layoutComputed")}renderAll(){var t;(t=this._renderingContext)==null||t.render(),this._dirtyPickingBuffer=!0}renderPickingFramebuffer(){this._dirtyPickingBuffer&&(this._pickingContext.render(),this._dirtyPickingBuffer=!1)}getSearchableViews(){const t=[];return this.viewRoot.visit(n=>{n instanceof Zt&&n.getAccessor("search")&&t.push(n)}),t}getNamedScaleResolutions(){const t=new Map;return this.viewRoot.visit(n=>{for(const r of Object.values(n.resolutions.scale))r.name&&t.set(r.name,r)}),t}}ih=new WeakSet,n3=function(){const t=[];for(const n of this.spec.params??[]){const{name:r,value:i,bind:o}=n,a=this._paramBroker.allocateSetter(r);if(i!=null&&a(i),o&&"input"in o){const s=o.debounce?qu(a,o.debounce,!1):a;if(o.input=="range")t.push(rt`<label
                            >${o.name??r}
                            <input
                                type="range"
                                min=${o.min??0}
                                max=${o.max??100}
                                step=${o.step??Ir(o.min,o.max,100)}
                                .value=${i}
                                @input=${f=>s(f.target.valueAsNumber)}
                        /></label>`);else if(o.input=="checkbox")t.push(rt`<label
                            >${o.name??r}
                            <input
                                type="checkbox"
                                ?checked=${i}
                                @input=${f=>s(f.target.checked)}
                        /></label>`);else if(o.input=="radio")t.push(rt`<span class="label">${o.name??r}</span>
                            ${o.options.map((f,l)=>{var u;return rt`<label>
                                    <input
                                        type="radio"
                                        name=${r}
                                        value=${f}
                                        .checked=${i==f}
                                        @input=${c=>s(c.target.value)}
                                    />${((u=o.labels)==null?void 0:u[l])??f}</label
                                >`})}`);else if(o.input=="select")t.push(rt`<label
                            >${o.name??r}
                            <select
                                @input=${f=>s(f.target.value)}
                            >
                                ${o.options.map((f,l)=>{var u;return rt`<option
                                        value=${f}
                                        ?selected=${i==f}
                                    >
                                        ${((u=o.labels)==null?void 0:u[l])??f}
                                    </option>`})}
                            </select></label
                        >`);else throw new Error("Unsupported input type: "+o.input)}}if(t.length){const n=document.createElement("div");this.container.appendChild(n),n.style="position: absolute; bottom: 10px; right: 10px; background: rgba(255, 255, 255, 0.8); padding: 10px; z-index: 1; border: 1px solid lightgray",bs(rt`${t.map(r=>rt`<div>${r}</div>`)}`,n)}};function WM(e,t){const n=document.createElement("div");n.className="message-box";const r=document.createElement("div");r.textContent=t,n.appendChild(r),e.appendChild(n)}async function ZM(e,t,n={}){let r;if(Pe(e)){if(r=document.querySelector(e),!r)throw new Error(`No such element: ${e}`)}else if(e instanceof HTMLElement)r=e;else throw new Error(`Invalid element: ${e}`);let i;try{const o=Rt(t)?t:await QM(t);if(o.baseUrl??(o.baseUrl=""),o.width??(o.width="container"),o.padding??(o.padding=10),r==document.body){const a=document.createElement("div");a.style.position="fixed",a.style.inset="0",a.style.overflow="hidden",r.appendChild(a),r=a}i=new qM(r,o,n),YM(i,n),await i.launch()}catch(o){r.innerText=o.toString(),console.error(o)}return{finalize(){for(i.destroy();r.firstChild;)r.firstChild.remove()},addEventListener(o,a){const s=i._eventListeners;let f=s.get(o);f||(f=new Set,s.set(o,f)),f.add(a)},removeEventListener(o,a){var f;(f=i._eventListeners.get(o))==null||f.delete(a)},getScaleResolutionByName(o){return i.getNamedScaleResolutions().get(o)},updateNamedData:i.updateNamedData.bind(i)}}function YM(e,t){t.namedDataProvider&&e.registerNamedDataProvider(t.namedDataProvider)}async function QM(e){let t;try{t=JSON.parse(await Gf().load(e))}catch(n){throw new Error(`Could not load or parse configuration: ${e}, reason: ${n.message}`)}if(!t.baseUrl){const n=e.match(/^[^?#]*\//);t.baseUrl=n&&n[0]||"./"}return t}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Qu=globalThis,H0=Qu.ShadowRoot&&(Qu.ShadyCSS===void 0||Qu.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,V0=Symbol(),fv=new WeakMap;let uv=class{constructor(t,n,r){if(this._$cssResult$=!0,r!==V0)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=n}get styleSheet(){let t=this.o;const n=this.t;if(H0&&t===void 0){const r=n!==void 0&&n.length===1;r&&(t=fv.get(n)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),r&&fv.set(n,t))}return t}toString(){return this.cssText}};const XM=e=>new uv(typeof e=="string"?e:e+"",void 0,V0),KM=(e,...t)=>{const n=e.length===1?e[0]:t.reduce((r,i,o)=>r+(a=>{if(a._$cssResult$===!0)return a.cssText;if(typeof a=="number")return a;throw Error("Value passed to 'css' function must be a 'css' function result: "+a+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+e[o+1],e[0]);return new uv(n,e,V0)},JM=(e,t)=>{if(H0)e.adoptedStyleSheets=t.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of t){const r=document.createElement("style"),i=Qu.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=n.cssText,e.appendChild(r)}},cv=H0?e=>e:e=>e instanceof CSSStyleSheet?(t=>{let n="";for(const r of t.cssRules)n+=r.cssText;return XM(n)})(e):e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:eP,defineProperty:tP,getOwnPropertyDescriptor:nP,getOwnPropertyNames:rP,getOwnPropertySymbols:iP,getPrototypeOf:oP}=Object,Kr=globalThis,hv=Kr.trustedTypes,aP=hv?hv.emptyScript:"",j0=Kr.reactiveElementPolyfillSupport,nl=(e,t)=>e,$0={toAttribute(e,t){switch(t){case Boolean:e=e?aP:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=e!==null;break;case Number:n=e===null?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch{n=null}}return n}},dv=(e,t)=>!eP(e,t),pv={attribute:!0,type:String,converter:$0,reflect:!1,hasChanged:dv};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Kr.litPropertyMetadata??(Kr.litPropertyMetadata=new WeakMap);class Xo extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??(this.l=[])).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,n=pv){if(n.state&&(n.attribute=!1),this._$Ei(),this.elementProperties.set(t,n),!n.noAccessor){const r=Symbol(),i=this.getPropertyDescriptor(t,r,n);i!==void 0&&tP(this.prototype,t,i)}}static getPropertyDescriptor(t,n,r){const{get:i,set:o}=nP(this.prototype,t)??{get(){return this[n]},set(a){this[n]=a}};return{get(){return i==null?void 0:i.call(this)},set(a){const s=i==null?void 0:i.call(this);o.call(this,a),this.requestUpdate(t,s,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??pv}static _$Ei(){if(this.hasOwnProperty(nl("elementProperties")))return;const t=oP(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(nl("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(nl("properties"))){const n=this.properties,r=[...rP(n),...iP(n)];for(const i of r)this.createProperty(i,n[i])}const t=this[Symbol.metadata];if(t!==null){const n=litPropertyMetadata.get(t);if(n!==void 0)for(const[r,i]of n)this.elementProperties.set(r,i)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const i=this._$Eu(n,r);i!==void 0&&this._$Eh.set(i,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const n=[];if(Array.isArray(t)){const r=new Set(t.flat(1/0).reverse());for(const i of r)n.unshift(cv(i))}else t!==void 0&&n.push(cv(t));return n}static _$Eu(t,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$Eg=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$ES(),this.requestUpdate(),(t=this.constructor.l)==null||t.forEach(n=>n(this))}addController(t){var n;(this._$E_??(this._$E_=new Set)).add(t),this.renderRoot!==void 0&&this.isConnected&&((n=t.hostConnected)==null||n.call(t))}removeController(t){var n;(n=this._$E_)==null||n.delete(t)}_$ES(){const t=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(t.set(r,this[r]),delete this[r]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return JM(t,this.constructor.elementStyles),t}connectedCallback(){var t;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$E_)==null||t.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$E_)==null||t.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(t,n,r){this._$AK(t,r)}_$EO(t,n){var o;const r=this.constructor.elementProperties.get(t),i=this.constructor._$Eu(t,r);if(i!==void 0&&r.reflect===!0){const a=(((o=r.converter)==null?void 0:o.toAttribute)!==void 0?r.converter:$0).toAttribute(n,r.type);this._$Em=t,a==null?this.removeAttribute(i):this.setAttribute(i,a),this._$Em=null}}_$AK(t,n){var o;const r=this.constructor,i=r._$Eh.get(t);if(i!==void 0&&this._$Em!==i){const a=r.getPropertyOptions(i),s=typeof a.converter=="function"?{fromAttribute:a.converter}:((o=a.converter)==null?void 0:o.fromAttribute)!==void 0?a.converter:$0;this._$Em=i,this[i]=s.fromAttribute(n,a.type),this._$Em=null}}requestUpdate(t,n,r,i=!1,o){if(t!==void 0){if(r??(r=this.constructor.getPropertyOptions(t)),!(r.hasChanged??dv)(i?o:this[t],n))return;this.C(t,n,r)}this.isUpdatePending===!1&&(this._$Eg=this._$EP())}C(t,n,r){this._$AL.has(t)||this._$AL.set(t,n),r.reflect===!0&&this._$Em!==t&&(this._$Ej??(this._$Ej=new Set)).add(t)}async _$EP(){this.isUpdatePending=!0;try{await this._$Eg}catch(n){Promise.reject(n)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[o,a]of this._$Ep)this[o]=a;this._$Ep=void 0}const i=this.constructor.elementProperties;if(i.size>0)for(const[o,a]of i)a.wrapped!==!0||this._$AL.has(o)||this[o]===void 0||this.C(o,this[o],a)}let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),(r=this._$E_)==null||r.forEach(i=>{var o;return(o=i.hostUpdate)==null?void 0:o.call(i)}),this.update(n)):this._$ET()}catch(i){throw t=!1,this._$ET(),i}t&&this._$AE(n)}willUpdate(t){}_$AE(t){var n;(n=this._$E_)==null||n.forEach(r=>{var i;return(i=r.hostUpdated)==null?void 0:i.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$ET(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Eg}shouldUpdate(t){return!0}update(t){this._$Ej&&(this._$Ej=this._$Ej.forEach(n=>this._$EO(n,this[n]))),this._$ET()}updated(t){}firstUpdated(t){}}Xo.elementStyles=[],Xo.shadowRootOptions={mode:"open"},Xo[nl("elementProperties")]=new Map,Xo[nl("finalized")]=new Map,j0==null||j0({ReactiveElement:Xo}),(Kr.reactiveElementVersions??(Kr.reactiveElementVersions=[])).push("2.0.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let rl=class extends Xo{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const t=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=t.firstChild),t}update(t){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=bs(n,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)==null||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)==null||t.setConnected(!1)}render(){return Di}};rl._$litElement$=!0,rl.finalized=!0,(DS=globalThis.litElementHydrateSupport)==null||DS.call(globalThis,{LitElement:rl});const q0=globalThis.litElementPolyfillSupport;q0==null||q0({LitElement:rl}),(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.0.2");/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const sP=e=>e.strings===void 0;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const il=(e,t)=>{var r;const n=e._$AN;if(n===void 0)return!1;for(const i of n)(r=i._$AO)==null||r.call(i,t,!1),il(i,t);return!0},Xu=e=>{let t,n;do{if((t=e._$AM)===void 0)break;n=t._$AN,n.delete(e),e=t}while((n==null?void 0:n.size)===0)},gv=e=>{for(let t;t=e._$AM;e=t){let n=t._$AN;if(n===void 0)t._$AN=n=new Set;else if(n.has(e))break;n.add(e),uP(t)}};function lP(e){this._$AN!==void 0?(Xu(this),this._$AM=e,gv(this)):this._$AM=e}function fP(e,t=!1,n=0){const r=this._$AH,i=this._$AN;if(i!==void 0&&i.size!==0)if(t)if(Array.isArray(r))for(let o=n;o<r.length;o++)il(r[o],!1),Xu(r[o]);else r!=null&&(il(r,!1),Xu(r));else il(this,e)}const uP=e=>{e.type==z1.CHILD&&(e._$AP??(e._$AP=fP),e._$AQ??(e._$AQ=lP))};class cP extends G1{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,n,r){super._$AT(t,n,r),gv(this),this.isConnected=t._$AU}_$AO(t,n=!0){var r,i;t!==this.isConnected&&(this.isConnected=t,t?(r=this.reconnected)==null||r.call(this):(i=this.disconnected)==null||i.call(this)),n&&(il(this,t),Xu(this))}setValue(t){if(sP(this._$Ct))this._$Ct._$AI(t,this);else{const n=[...this._$Ct._$AH];n[this._$Ci]=t,this._$Ct._$AI(n,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const hP=()=>new dP;class dP{}const W0=new WeakMap,pP=U1(class extends cP{render(e){return Ke}update(e,[t]){var r;const n=t!==this.G;return n&&this.G!==void 0&&this.ot(void 0),(n||this.rt!==this.lt)&&(this.G=t,this.ct=(r=e.options)==null?void 0:r.host,this.ot(this.lt=e.element)),Ke}ot(e){if(typeof this.G=="function"){const t=this.ct??globalThis;let n=W0.get(t);n===void 0&&(n=new WeakMap,W0.set(t,n)),n.get(this.G)!==void 0&&this.G.call(this.ct,void 0),n.set(this.G,e),e!==void 0&&this.G.call(this.ct,e)}else this.G.value=e}get rt(){var e,t;return typeof this.G=="function"?(e=W0.get(this.ct??globalThis))==null?void 0:e.get(this.G):(t=this.G)==null?void 0:t.value}disconnected(){this.rt===this.lt&&this.ot(void 0)}reconnected(){this.ot(this.lt)}});function mv(){const e=document.querySelector("meta[name='base_url']").getAttribute("content");return e||console.error('No <meta name="base_url" ...> found!'),e}async function gP(e,t){const r=`${mv()}/data/`;try{t.baseUrl=t.baseUrl||r,await ZM(e,t,{bare:!0})}catch(i){const o=document.createElement("pre");o.innerText=i.toString(),e.appendChild(o)}}class bv extends rl{static get styles(){return KM`
            .show-spec {
                font-size: 70%;
                text-align: center;
            }

            .show-spec a {
                color: #3f51b5;
                text-decoration: none;
            }
        `}static get properties(){return{height:{type:String},specHidden:{type:Boolean}}}constructor(){super(),this.height=300,this.specHidden=!1,this.embedRef=hP()}render(){return rt`
            <link rel="stylesheet" href=${mv()+"/app/style.css"} />
            <div
                class="embed-container"
                style=${$h({height:this.height+"px"})}
                ${pP(this.embedRef)}
            ></div>
            ${this.specHidden?rt`
                      <div class="show-spec">
                          <a
                              href="#"
                              @click=${t=>{this.specHidden=!1,t.preventDefault()}}
                              >Show specification</a
                          >
                      </div>
                  `:Ke}

            <div
                class="embed-spec"
                style=${$h({display:this.specHidden?"none":"block"})}
            >
                <slot></slot>
            </div>
        `}firstUpdated(){var n;const t=(n=this.shadowRoot.querySelector("slot").assignedNodes().filter(r=>r instanceof HTMLElement)[0])==null?void 0:n.textContent;if(t){const r=new IntersectionObserver(i=>{i.forEach(o=>{if(o.isIntersecting){const a=o.target;gP(a,JSON.parse(t)),r.unobserve(a)}})});setTimeout(()=>r.observe(this.embedRef.value),80)}}}customElements.define("genome-spy-doc-embed",bv);var rn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ol(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function mP(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var ge={},Ku={};Ku.byteLength=wP,Ku.toByteArray=vP,Ku.fromByteArray=_P;for(var Vn=[],on=[],bP=typeof Uint8Array<"u"?Uint8Array:Array,Z0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ko=0,yP=Z0.length;Ko<yP;++Ko)Vn[Ko]=Z0[Ko],on[Z0.charCodeAt(Ko)]=Ko;on["-".charCodeAt(0)]=62,on["_".charCodeAt(0)]=63;function yv(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function wP(e){var t=yv(e),n=t[0],r=t[1];return(n+r)*3/4-r}function xP(e,t,n){return(t+n)*3/4-n}function vP(e){var t,n=yv(e),r=n[0],i=n[1],o=new bP(xP(e,r,i)),a=0,s=i>0?r-4:r,f;for(f=0;f<s;f+=4)t=on[e.charCodeAt(f)]<<18|on[e.charCodeAt(f+1)]<<12|on[e.charCodeAt(f+2)]<<6|on[e.charCodeAt(f+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=t&255;return i===2&&(t=on[e.charCodeAt(f)]<<2|on[e.charCodeAt(f+1)]>>4,o[a++]=t&255),i===1&&(t=on[e.charCodeAt(f)]<<10|on[e.charCodeAt(f+1)]<<4|on[e.charCodeAt(f+2)]>>2,o[a++]=t>>8&255,o[a++]=t&255),o}function AP(e){return Vn[e>>18&63]+Vn[e>>12&63]+Vn[e>>6&63]+Vn[e&63]}function EP(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),i.push(AP(r));return i.join("")}function _P(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(EP(e,a,a+o>s?s:a+o));return r===1?(t=e[n-1],i.push(Vn[t>>2]+Vn[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],i.push(Vn[t>>10]+Vn[t>>4&63]+Vn[t<<2&63]+"=")),i.join("")}var Y0={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Y0.read=function(e,t,n,r,i){var o,a,s=i*8-r-1,f=(1<<s)-1,l=f>>1,u=-7,c=n?i-1:0,h=n?-1:1,d=e[t+c];for(c+=h,o=d&(1<<-u)-1,d>>=-u,u+=s;u>0;o=o*256+e[t+c],c+=h,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=a*256+e[t+c],c+=h,u-=8);if(o===0)o=1-l;else{if(o===f)return a?NaN:(d?-1:1)*(1/0);a=a+Math.pow(2,r),o=o-l}return(d?-1:1)*a*Math.pow(2,o-r)},Y0.write=function(e,t,n,r,i,o){var a,s,f,l=o*8-i-1,u=(1<<l)-1,c=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,m=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-a))<1&&(a--,f*=2),a+c>=1?t+=h/f:t+=h*Math.pow(2,1-c),t*f>=2&&(a++,f/=2),a+c>=u?(s=0,a=u):a+c>=1?(s=(t*f-1)*Math.pow(2,i),a=a+c):(s=t*Math.pow(2,c-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=s&255,d+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+d]=a&255,d+=p,a/=256,l-=8);e[n+d-p]|=m*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Ku,n=Y0,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=A,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=o(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const x=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(x,g),x.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function a(x){if(x>i)throw new RangeError('The value "'+x+'" is invalid for option "size"');const g=new Uint8Array(x);return Object.setPrototypeOf(g,s.prototype),g}function s(x,g,b){if(typeof x=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(x)}return f(x,g,b)}s.poolSize=8192;function f(x,g,b){if(typeof x=="string")return h(x,g);if(ArrayBuffer.isView(x))return p(x);if(x==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x);if(St(x,ArrayBuffer)||x&&St(x.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(St(x,SharedArrayBuffer)||x&&St(x.buffer,SharedArrayBuffer)))return m(x,g,b);if(typeof x=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=x.valueOf&&x.valueOf();if(k!=null&&k!==x)return s.from(k,g,b);const R=y(x);if(R)return R;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof x[Symbol.toPrimitive]=="function")return s.from(x[Symbol.toPrimitive]("string"),g,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x)}s.from=function(x,g,b){return f(x,g,b)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function l(x){if(typeof x!="number")throw new TypeError('"size" argument must be of type number');if(x<0)throw new RangeError('The value "'+x+'" is invalid for option "size"')}function u(x,g,b){return l(x),x<=0?a(x):g!==void 0?typeof b=="string"?a(x).fill(g,b):a(x).fill(g):a(x)}s.alloc=function(x,g,b){return u(x,g,b)};function c(x){return l(x),a(x<0?0:w(x)|0)}s.allocUnsafe=function(x){return c(x)},s.allocUnsafeSlow=function(x){return c(x)};function h(x,g){if((typeof g!="string"||g==="")&&(g="utf8"),!s.isEncoding(g))throw new TypeError("Unknown encoding: "+g);const b=S(x,g)|0;let k=a(b);const R=k.write(x,g);return R!==b&&(k=k.slice(0,R)),k}function d(x){const g=x.length<0?0:w(x.length)|0,b=a(g);for(let k=0;k<g;k+=1)b[k]=x[k]&255;return b}function p(x){if(St(x,Uint8Array)){const g=new Uint8Array(x);return m(g.buffer,g.byteOffset,g.byteLength)}return d(x)}function m(x,g,b){if(g<0||x.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(x.byteLength<g+(b||0))throw new RangeError('"length" is outside of buffer bounds');let k;return g===void 0&&b===void 0?k=new Uint8Array(x):b===void 0?k=new Uint8Array(x,g):k=new Uint8Array(x,g,b),Object.setPrototypeOf(k,s.prototype),k}function y(x){if(s.isBuffer(x)){const g=w(x.length)|0,b=a(g);return b.length===0||x.copy(b,0,0,g),b}if(x.length!==void 0)return typeof x.length!="number"||Ar(x.length)?a(0):d(x);if(x.type==="Buffer"&&Array.isArray(x.data))return d(x.data)}function w(x){if(x>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return x|0}function A(x){return+x!=x&&(x=0),s.alloc(+x)}s.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==s.prototype},s.compare=function(g,b){if(St(g,Uint8Array)&&(g=s.from(g,g.offset,g.byteLength)),St(b,Uint8Array)&&(b=s.from(b,b.offset,b.byteLength)),!s.isBuffer(g)||!s.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===b)return 0;let k=g.length,R=b.length;for(let L=0,j=Math.min(k,R);L<j;++L)if(g[L]!==b[L]){k=g[L],R=b[L];break}return k<R?-1:R<k?1:0},s.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(g,b){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return s.alloc(0);let k;if(b===void 0)for(b=0,k=0;k<g.length;++k)b+=g[k].length;const R=s.allocUnsafe(b);let L=0;for(k=0;k<g.length;++k){let j=g[k];if(St(j,Uint8Array))L+j.length>R.length?(s.isBuffer(j)||(j=s.from(j)),j.copy(R,L)):Uint8Array.prototype.set.call(R,j,L);else if(s.isBuffer(j))j.copy(R,L);else throw new TypeError('"list" argument must be an Array of Buffers');L+=j.length}return R};function S(x,g){if(s.isBuffer(x))return x.length;if(ArrayBuffer.isView(x)||St(x,ArrayBuffer))return x.byteLength;if(typeof x!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof x);const b=x.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&b===0)return 0;let R=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return ue(x).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b*2;case"hex":return b>>>1;case"base64":return bi(x).length;default:if(R)return k?-1:ue(x).length;g=(""+g).toLowerCase(),R=!0}}s.byteLength=S;function _(x,g,b){let k=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((b===void 0||b>this.length)&&(b=this.length),b<=0)||(b>>>=0,g>>>=0,b<=g))return"";for(x||(x="utf8");;)switch(x){case"hex":return We(this,g,b);case"utf8":case"utf-8":return te(this,g,b);case"ascii":return De(this,g,b);case"latin1":case"binary":return Je(this,g,b);case"base64":return se(this,g,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return et(this,g,b);default:if(k)throw new TypeError("Unknown encoding: "+x);x=(x+"").toLowerCase(),k=!0}}s.prototype._isBuffer=!0;function T(x,g,b){const k=x[g];x[g]=x[b],x[b]=k}s.prototype.swap16=function(){const g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<g;b+=2)T(this,b,b+1);return this},s.prototype.swap32=function(){const g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<g;b+=4)T(this,b,b+3),T(this,b+1,b+2);return this},s.prototype.swap64=function(){const g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<g;b+=8)T(this,b,b+7),T(this,b+1,b+6),T(this,b+2,b+5),T(this,b+3,b+4);return this},s.prototype.toString=function(){const g=this.length;return g===0?"":arguments.length===0?te(this,0,g):_.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(g){if(!s.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:s.compare(this,g)===0},s.prototype.inspect=function(){let g="";const b=e.INSPECT_MAX_BYTES;return g=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(g+=" ... "),"<Buffer "+g+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(g,b,k,R,L){if(St(g,Uint8Array)&&(g=s.from(g,g.offset,g.byteLength)),!s.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(b===void 0&&(b=0),k===void 0&&(k=g?g.length:0),R===void 0&&(R=0),L===void 0&&(L=this.length),b<0||k>g.length||R<0||L>this.length)throw new RangeError("out of range index");if(R>=L&&b>=k)return 0;if(R>=L)return-1;if(b>=k)return 1;if(b>>>=0,k>>>=0,R>>>=0,L>>>=0,this===g)return 0;let j=L-R,ce=k-b;const Ge=Math.min(j,ce),Me=this.slice(R,L),Ze=g.slice(b,k);for(let Ce=0;Ce<Ge;++Ce)if(Me[Ce]!==Ze[Ce]){j=Me[Ce],ce=Ze[Ce];break}return j<ce?-1:ce<j?1:0};function I(x,g,b,k,R){if(x.length===0)return-1;if(typeof b=="string"?(k=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b=+b,Ar(b)&&(b=R?0:x.length-1),b<0&&(b=x.length+b),b>=x.length){if(R)return-1;b=x.length-1}else if(b<0)if(R)b=0;else return-1;if(typeof g=="string"&&(g=s.from(g,k)),s.isBuffer(g))return g.length===0?-1:B(x,g,b,k,R);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?R?Uint8Array.prototype.indexOf.call(x,g,b):Uint8Array.prototype.lastIndexOf.call(x,g,b):B(x,[g],b,k,R);throw new TypeError("val must be string, number or Buffer")}function B(x,g,b,k,R){let L=1,j=x.length,ce=g.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(x.length<2||g.length<2)return-1;L=2,j/=2,ce/=2,b/=2}function Ge(Ze,Ce){return L===1?Ze[Ce]:Ze.readUInt16BE(Ce*L)}let Me;if(R){let Ze=-1;for(Me=b;Me<j;Me++)if(Ge(x,Me)===Ge(g,Ze===-1?0:Me-Ze)){if(Ze===-1&&(Ze=Me),Me-Ze+1===ce)return Ze*L}else Ze!==-1&&(Me-=Me-Ze),Ze=-1}else for(b+ce>j&&(b=j-ce),Me=b;Me>=0;Me--){let Ze=!0;for(let Ce=0;Ce<ce;Ce++)if(Ge(x,Me+Ce)!==Ge(g,Ce)){Ze=!1;break}if(Ze)return Me}return-1}s.prototype.includes=function(g,b,k){return this.indexOf(g,b,k)!==-1},s.prototype.indexOf=function(g,b,k){return I(this,g,b,k,!0)},s.prototype.lastIndexOf=function(g,b,k){return I(this,g,b,k,!1)};function F(x,g,b,k){b=Number(b)||0;const R=x.length-b;k?(k=Number(k),k>R&&(k=R)):k=R;const L=g.length;k>L/2&&(k=L/2);let j;for(j=0;j<k;++j){const ce=parseInt(g.substr(j*2,2),16);if(Ar(ce))return j;x[b+j]=ce}return j}function M(x,g,b,k){return yi(ue(g,x.length-b),x,b,k)}function G(x,g,b,k){return yi($t(g),x,b,k)}function N(x,g,b,k){return yi(bi(g),x,b,k)}function re(x,g,b,k){return yi(mi(g,x.length-b),x,b,k)}s.prototype.write=function(g,b,k,R){if(b===void 0)R="utf8",k=this.length,b=0;else if(k===void 0&&typeof b=="string")R=b,k=this.length,b=0;else if(isFinite(b))b=b>>>0,isFinite(k)?(k=k>>>0,R===void 0&&(R="utf8")):(R=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const L=this.length-b;if((k===void 0||k>L)&&(k=L),g.length>0&&(k<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");R||(R="utf8");let j=!1;for(;;)switch(R){case"hex":return F(this,g,b,k);case"utf8":case"utf-8":return M(this,g,b,k);case"ascii":case"latin1":case"binary":return G(this,g,b,k);case"base64":return N(this,g,b,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,g,b,k);default:if(j)throw new TypeError("Unknown encoding: "+R);R=(""+R).toLowerCase(),j=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function se(x,g,b){return g===0&&b===x.length?t.fromByteArray(x):t.fromByteArray(x.slice(g,b))}function te(x,g,b){b=Math.min(x.length,b);const k=[];let R=g;for(;R<b;){const L=x[R];let j=null,ce=L>239?4:L>223?3:L>191?2:1;if(R+ce<=b){let Ge,Me,Ze,Ce;switch(ce){case 1:L<128&&(j=L);break;case 2:Ge=x[R+1],(Ge&192)===128&&(Ce=(L&31)<<6|Ge&63,Ce>127&&(j=Ce));break;case 3:Ge=x[R+1],Me=x[R+2],(Ge&192)===128&&(Me&192)===128&&(Ce=(L&15)<<12|(Ge&63)<<6|Me&63,Ce>2047&&(Ce<55296||Ce>57343)&&(j=Ce));break;case 4:Ge=x[R+1],Me=x[R+2],Ze=x[R+3],(Ge&192)===128&&(Me&192)===128&&(Ze&192)===128&&(Ce=(L&15)<<18|(Ge&63)<<12|(Me&63)<<6|Ze&63,Ce>65535&&Ce<1114112&&(j=Ce))}}j===null?(j=65533,ce=1):j>65535&&(j-=65536,k.push(j>>>10&1023|55296),j=56320|j&1023),k.push(j),R+=ce}return Xe(k)}const pe=4096;function Xe(x){const g=x.length;if(g<=pe)return String.fromCharCode.apply(String,x);let b="",k=0;for(;k<g;)b+=String.fromCharCode.apply(String,x.slice(k,k+=pe));return b}function De(x,g,b){let k="";b=Math.min(x.length,b);for(let R=g;R<b;++R)k+=String.fromCharCode(x[R]&127);return k}function Je(x,g,b){let k="";b=Math.min(x.length,b);for(let R=g;R<b;++R)k+=String.fromCharCode(x[R]);return k}function We(x,g,b){const k=x.length;(!g||g<0)&&(g=0),(!b||b<0||b>k)&&(b=k);let R="";for(let L=g;L<b;++L)R+=wi[x[L]];return R}function et(x,g,b){const k=x.slice(g,b);let R="";for(let L=0;L<k.length-1;L+=2)R+=String.fromCharCode(k[L]+k[L+1]*256);return R}s.prototype.slice=function(g,b){const k=this.length;g=~~g,b=b===void 0?k:~~b,g<0?(g+=k,g<0&&(g=0)):g>k&&(g=k),b<0?(b+=k,b<0&&(b=0)):b>k&&(b=k),b<g&&(b=g);const R=this.subarray(g,b);return Object.setPrototypeOf(R,s.prototype),R};function _e(x,g,b){if(x%1!==0||x<0)throw new RangeError("offset is not uint");if(x+g>b)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(g,b,k){g=g>>>0,b=b>>>0,k||_e(g,b,this.length);let R=this[g],L=1,j=0;for(;++j<b&&(L*=256);)R+=this[g+j]*L;return R},s.prototype.readUintBE=s.prototype.readUIntBE=function(g,b,k){g=g>>>0,b=b>>>0,k||_e(g,b,this.length);let R=this[g+--b],L=1;for(;b>0&&(L*=256);)R+=this[g+--b]*L;return R},s.prototype.readUint8=s.prototype.readUInt8=function(g,b){return g=g>>>0,b||_e(g,1,this.length),this[g]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(g,b){return g=g>>>0,b||_e(g,2,this.length),this[g]|this[g+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(g,b){return g=g>>>0,b||_e(g,2,this.length),this[g]<<8|this[g+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(g,b){return g=g>>>0,b||_e(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(g,b){return g=g>>>0,b||_e(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},s.prototype.readBigUInt64LE=qt(function(g){g=g>>>0,H(g,"offset");const b=this[g],k=this[g+7];(b===void 0||k===void 0)&&q(g,this.length-8);const R=b+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,L=this[++g]+this[++g]*2**8+this[++g]*2**16+k*2**24;return BigInt(R)+(BigInt(L)<<BigInt(32))}),s.prototype.readBigUInt64BE=qt(function(g){g=g>>>0,H(g,"offset");const b=this[g],k=this[g+7];(b===void 0||k===void 0)&&q(g,this.length-8);const R=b*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],L=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+k;return(BigInt(R)<<BigInt(32))+BigInt(L)}),s.prototype.readIntLE=function(g,b,k){g=g>>>0,b=b>>>0,k||_e(g,b,this.length);let R=this[g],L=1,j=0;for(;++j<b&&(L*=256);)R+=this[g+j]*L;return L*=128,R>=L&&(R-=Math.pow(2,8*b)),R},s.prototype.readIntBE=function(g,b,k){g=g>>>0,b=b>>>0,k||_e(g,b,this.length);let R=b,L=1,j=this[g+--R];for(;R>0&&(L*=256);)j+=this[g+--R]*L;return L*=128,j>=L&&(j-=Math.pow(2,8*b)),j},s.prototype.readInt8=function(g,b){return g=g>>>0,b||_e(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},s.prototype.readInt16LE=function(g,b){g=g>>>0,b||_e(g,2,this.length);const k=this[g]|this[g+1]<<8;return k&32768?k|4294901760:k},s.prototype.readInt16BE=function(g,b){g=g>>>0,b||_e(g,2,this.length);const k=this[g+1]|this[g]<<8;return k&32768?k|4294901760:k},s.prototype.readInt32LE=function(g,b){return g=g>>>0,b||_e(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},s.prototype.readInt32BE=function(g,b){return g=g>>>0,b||_e(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},s.prototype.readBigInt64LE=qt(function(g){g=g>>>0,H(g,"offset");const b=this[g],k=this[g+7];(b===void 0||k===void 0)&&q(g,this.length-8);const R=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(k<<24);return(BigInt(R)<<BigInt(32))+BigInt(b+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),s.prototype.readBigInt64BE=qt(function(g){g=g>>>0,H(g,"offset");const b=this[g],k=this[g+7];(b===void 0||k===void 0)&&q(g,this.length-8);const R=(b<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(R)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+k)}),s.prototype.readFloatLE=function(g,b){return g=g>>>0,b||_e(g,4,this.length),n.read(this,g,!0,23,4)},s.prototype.readFloatBE=function(g,b){return g=g>>>0,b||_e(g,4,this.length),n.read(this,g,!1,23,4)},s.prototype.readDoubleLE=function(g,b){return g=g>>>0,b||_e(g,8,this.length),n.read(this,g,!0,52,8)},s.prototype.readDoubleBE=function(g,b){return g=g>>>0,b||_e(g,8,this.length),n.read(this,g,!1,52,8)};function Se(x,g,b,k,R,L){if(!s.isBuffer(x))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>R||g<L)throw new RangeError('"value" argument is out of bounds');if(b+k>x.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(g,b,k,R){if(g=+g,b=b>>>0,k=k>>>0,!R){const ce=Math.pow(2,8*k)-1;Se(this,g,b,k,ce,0)}let L=1,j=0;for(this[b]=g&255;++j<k&&(L*=256);)this[b+j]=g/L&255;return b+k},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(g,b,k,R){if(g=+g,b=b>>>0,k=k>>>0,!R){const ce=Math.pow(2,8*k)-1;Se(this,g,b,k,ce,0)}let L=k-1,j=1;for(this[b+L]=g&255;--L>=0&&(j*=256);)this[b+L]=g/j&255;return b+k},s.prototype.writeUint8=s.prototype.writeUInt8=function(g,b,k){return g=+g,b=b>>>0,k||Se(this,g,b,1,255,0),this[b]=g&255,b+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(g,b,k){return g=+g,b=b>>>0,k||Se(this,g,b,2,65535,0),this[b]=g&255,this[b+1]=g>>>8,b+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(g,b,k){return g=+g,b=b>>>0,k||Se(this,g,b,2,65535,0),this[b]=g>>>8,this[b+1]=g&255,b+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(g,b,k){return g=+g,b=b>>>0,k||Se(this,g,b,4,4294967295,0),this[b+3]=g>>>24,this[b+2]=g>>>16,this[b+1]=g>>>8,this[b]=g&255,b+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(g,b,k){return g=+g,b=b>>>0,k||Se(this,g,b,4,4294967295,0),this[b]=g>>>24,this[b+1]=g>>>16,this[b+2]=g>>>8,this[b+3]=g&255,b+4};function gt(x,g,b,k,R){v(g,k,R,x,b,7);let L=Number(g&BigInt(4294967295));x[b++]=L,L=L>>8,x[b++]=L,L=L>>8,x[b++]=L,L=L>>8,x[b++]=L;let j=Number(g>>BigInt(32)&BigInt(4294967295));return x[b++]=j,j=j>>8,x[b++]=j,j=j>>8,x[b++]=j,j=j>>8,x[b++]=j,b}function jt(x,g,b,k,R){v(g,k,R,x,b,7);let L=Number(g&BigInt(4294967295));x[b+7]=L,L=L>>8,x[b+6]=L,L=L>>8,x[b+5]=L,L=L>>8,x[b+4]=L;let j=Number(g>>BigInt(32)&BigInt(4294967295));return x[b+3]=j,j=j>>8,x[b+2]=j,j=j>>8,x[b+1]=j,j=j>>8,x[b]=j,b+8}s.prototype.writeBigUInt64LE=qt(function(g,b=0){return gt(this,g,b,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=qt(function(g,b=0){return jt(this,g,b,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(g,b,k,R){if(g=+g,b=b>>>0,!R){const Ge=Math.pow(2,8*k-1);Se(this,g,b,k,Ge-1,-Ge)}let L=0,j=1,ce=0;for(this[b]=g&255;++L<k&&(j*=256);)g<0&&ce===0&&this[b+L-1]!==0&&(ce=1),this[b+L]=(g/j>>0)-ce&255;return b+k},s.prototype.writeIntBE=function(g,b,k,R){if(g=+g,b=b>>>0,!R){const Ge=Math.pow(2,8*k-1);Se(this,g,b,k,Ge-1,-Ge)}let L=k-1,j=1,ce=0;for(this[b+L]=g&255;--L>=0&&(j*=256);)g<0&&ce===0&&this[b+L+1]!==0&&(ce=1),this[b+L]=(g/j>>0)-ce&255;return b+k},s.prototype.writeInt8=function(g,b,k){return g=+g,b=b>>>0,k||Se(this,g,b,1,127,-128),g<0&&(g=255+g+1),this[b]=g&255,b+1},s.prototype.writeInt16LE=function(g,b,k){return g=+g,b=b>>>0,k||Se(this,g,b,2,32767,-32768),this[b]=g&255,this[b+1]=g>>>8,b+2},s.prototype.writeInt16BE=function(g,b,k){return g=+g,b=b>>>0,k||Se(this,g,b,2,32767,-32768),this[b]=g>>>8,this[b+1]=g&255,b+2},s.prototype.writeInt32LE=function(g,b,k){return g=+g,b=b>>>0,k||Se(this,g,b,4,2147483647,-2147483648),this[b]=g&255,this[b+1]=g>>>8,this[b+2]=g>>>16,this[b+3]=g>>>24,b+4},s.prototype.writeInt32BE=function(g,b,k){return g=+g,b=b>>>0,k||Se(this,g,b,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[b]=g>>>24,this[b+1]=g>>>16,this[b+2]=g>>>8,this[b+3]=g&255,b+4},s.prototype.writeBigInt64LE=qt(function(g,b=0){return gt(this,g,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=qt(function(g,b=0){return jt(this,g,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ne(x,g,b,k,R,L){if(b+k>x.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function O(x,g,b,k,R){return g=+g,b=b>>>0,R||Ne(x,g,b,4),n.write(x,g,b,k,23,4),b+4}s.prototype.writeFloatLE=function(g,b,k){return O(this,g,b,!0,k)},s.prototype.writeFloatBE=function(g,b,k){return O(this,g,b,!1,k)};function P(x,g,b,k,R){return g=+g,b=b>>>0,R||Ne(x,g,b,8),n.write(x,g,b,k,52,8),b+8}s.prototype.writeDoubleLE=function(g,b,k){return P(this,g,b,!0,k)},s.prototype.writeDoubleBE=function(g,b,k){return P(this,g,b,!1,k)},s.prototype.copy=function(g,b,k,R){if(!s.isBuffer(g))throw new TypeError("argument should be a Buffer");if(k||(k=0),!R&&R!==0&&(R=this.length),b>=g.length&&(b=g.length),b||(b=0),R>0&&R<k&&(R=k),R===k||g.length===0||this.length===0)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("sourceEnd out of bounds");R>this.length&&(R=this.length),g.length-b<R-k&&(R=g.length-b+k);const L=R-k;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(b,k,R):Uint8Array.prototype.set.call(g,this.subarray(k,R),b),L},s.prototype.fill=function(g,b,k,R){if(typeof g=="string"){if(typeof b=="string"?(R=b,b=0,k=this.length):typeof k=="string"&&(R=k,k=this.length),R!==void 0&&typeof R!="string")throw new TypeError("encoding must be a string");if(typeof R=="string"&&!s.isEncoding(R))throw new TypeError("Unknown encoding: "+R);if(g.length===1){const j=g.charCodeAt(0);(R==="utf8"&&j<128||R==="latin1")&&(g=j)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(b<0||this.length<b||this.length<k)throw new RangeError("Out of range index");if(k<=b)return this;b=b>>>0,k=k===void 0?this.length:k>>>0,g||(g=0);let L;if(typeof g=="number")for(L=b;L<k;++L)this[L]=g;else{const j=s.isBuffer(g)?g:s.from(g,R),ce=j.length;if(ce===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(L=0;L<k-b;++L)this[L+b]=j[L%ce]}return this};const $={};function V(x,g,b){$[x]=class extends b{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${x}]`,this.stack,delete this.name}get code(){return x}set code(R){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:R,writable:!0})}toString(){return`${this.name} [${x}]: ${this.message}`}}}V("ERR_BUFFER_OUT_OF_BOUNDS",function(x){return x?`${x} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),V("ERR_INVALID_ARG_TYPE",function(x,g){return`The "${x}" argument must be of type number. Received type ${typeof g}`},TypeError),V("ERR_OUT_OF_RANGE",function(x,g,b){let k=`The value of "${x}" is out of range.`,R=b;return Number.isInteger(b)&&Math.abs(b)>2**32?R=Z(String(b)):typeof b=="bigint"&&(R=String(b),(b>BigInt(2)**BigInt(32)||b<-(BigInt(2)**BigInt(32)))&&(R=Z(R)),R+="n"),k+=` It must be ${g}. Received ${R}`,k},RangeError);function Z(x){let g="",b=x.length;const k=x[0]==="-"?1:0;for(;b>=k+4;b-=3)g=`_${x.slice(b-3,b)}${g}`;return`${x.slice(0,b)}${g}`}function C(x,g,b){H(g,"offset"),(x[g]===void 0||x[g+b]===void 0)&&q(g,x.length-(b+1))}function v(x,g,b,k,R,L){if(x>b||x<g){const j=typeof g=="bigint"?"n":"";let ce;throw L>3?g===0||g===BigInt(0)?ce=`>= 0${j} and < 2${j} ** ${(L+1)*8}${j}`:ce=`>= -(2${j} ** ${(L+1)*8-1}${j}) and < 2 ** ${(L+1)*8-1}${j}`:ce=`>= ${g}${j} and <= ${b}${j}`,new $.ERR_OUT_OF_RANGE("value",ce,x)}C(k,R,L)}function H(x,g){if(typeof x!="number")throw new $.ERR_INVALID_ARG_TYPE(g,"number",x)}function q(x,g,b){throw Math.floor(x)!==x?(H(x,b),new $.ERR_OUT_OF_RANGE(b||"offset","an integer",x)):g<0?new $.ERR_BUFFER_OUT_OF_BOUNDS:new $.ERR_OUT_OF_RANGE(b||"offset",`>= ${b?1:0} and <= ${g}`,x)}const fe=/[^+/0-9A-Za-z-_]/g;function ne(x){if(x=x.split("=")[0],x=x.trim().replace(fe,""),x.length<2)return"";for(;x.length%4!==0;)x=x+"=";return x}function ue(x,g){g=g||1/0;let b;const k=x.length;let R=null;const L=[];for(let j=0;j<k;++j){if(b=x.charCodeAt(j),b>55295&&b<57344){if(!R){if(b>56319){(g-=3)>-1&&L.push(239,191,189);continue}else if(j+1===k){(g-=3)>-1&&L.push(239,191,189);continue}R=b;continue}if(b<56320){(g-=3)>-1&&L.push(239,191,189),R=b;continue}b=(R-55296<<10|b-56320)+65536}else R&&(g-=3)>-1&&L.push(239,191,189);if(R=null,b<128){if((g-=1)<0)break;L.push(b)}else if(b<2048){if((g-=2)<0)break;L.push(b>>6|192,b&63|128)}else if(b<65536){if((g-=3)<0)break;L.push(b>>12|224,b>>6&63|128,b&63|128)}else if(b<1114112){if((g-=4)<0)break;L.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw new Error("Invalid code point")}return L}function $t(x){const g=[];for(let b=0;b<x.length;++b)g.push(x.charCodeAt(b)&255);return g}function mi(x,g){let b,k,R;const L=[];for(let j=0;j<x.length&&!((g-=2)<0);++j)b=x.charCodeAt(j),k=b>>8,R=b%256,L.push(R),L.push(k);return L}function bi(x){return t.toByteArray(ne(x))}function yi(x,g,b,k){let R;for(R=0;R<k&&!(R+b>=g.length||R>=x.length);++R)g[R+b]=x[R];return R}function St(x,g){return x instanceof g||x!=null&&x.constructor!=null&&x.constructor.name!=null&&x.constructor.name===g.name}function Ar(x){return x!==x}const wi=function(){const x="0123456789abcdef",g=new Array(256);for(let b=0;b<16;++b){const k=b*16;for(let R=0;R<16;++R)g[k+R]=x[b]+x[R]}return g}();function qt(x){return typeof BigInt>"u"?Jn:x}function Jn(){throw new Error("BigInt not supported")}})(ge);const wv=ve({__proto__:null,default:ol(ge)},[ge]),dt={},SP=Object.freeze(Object.defineProperty({__proto__:null,default:dt},Symbol.toStringTag,{value:"Module"})),Q0=typeof window<"u"?window:typeof self<"u"?self:{fetch:void 0};class Xi{async getBufferFromResponse(t){if(typeof t.buffer=="function")return t.buffer();if(typeof t.arrayBuffer=="function"){const n=await t.arrayBuffer();return ge.Buffer.from(n)}else throw new TypeError("invalid HTTP response object, has no buffer method, and no arrayBuffer method")}constructor(t,n={}){this.baseOverrides={},this.url=t;const r=n.fetch||Q0.fetch&&Q0.fetch.bind(Q0);if(!r)throw new TypeError("no fetch function supplied, and none found in global environment");n.overrides&&(this.baseOverrides=n.overrides),this.fetchImplementation=r}async fetch(t,n){let r;try{r=await this.fetchImplementation(t,n)}catch(i){if(`${i}`.includes("Failed to fetch"))console.warn(`generic-filehandle: refetching ${t} to attempt to work around chrome CORS header caching bug`),r=await this.fetchImplementation(t,{...n,cache:"reload"});else throw i}return r}async read(t,n=0,r,i=0,o={}){const{headers:a={},signal:s,overrides:f={}}=o;r<1/0?a.range=`bytes=${i}-${i+r}`:r===1/0&&i!==0&&(a.range=`bytes=${i}-`);const l={...this.baseOverrides,...f,headers:{...a,...f.headers,...this.baseOverrides.headers},method:"GET",redirect:"follow",mode:"cors",signal:s},u=await this.fetch(this.url,l);if(!u.ok)throw new Error(`HTTP ${u.status} ${u.statusText} ${this.url}`);if(u.status===200&&i===0||u.status===206){const c=await this.getBufferFromResponse(u),h=c.copy(t,n,0,Math.min(r,c.length)),d=u.headers.get("content-range"),p=/\/(\d+)$/.exec(d||"");return p&&p[1]&&(this._stat={size:parseInt(p[1],10)}),{bytesRead:h,buffer:t}}throw u.status===200?new Error("${this.url} fetch returned status 200, expected 206"):new Error(`HTTP ${u.status} fetching ${this.url}`)}async readFile(t={}){let n,r;typeof t=="string"?(n=t,r={}):(n=t.encoding,r=t,delete r.encoding);const{headers:i={},signal:o,overrides:a={}}=r,s={headers:i,method:"GET",redirect:"follow",mode:"cors",signal:o,...this.baseOverrides,...a},f=await this.fetch(this.url,s);if(!f)throw new Error("generic-filehandle failed to fetch");if(f.status!==200)throw Object.assign(new Error(`HTTP ${f.status} fetching ${this.url}`),{status:f.status});if(n==="utf8")return f.text();if(n)throw new Error(`unsupported encoding: ${n}`);return this.getBufferFromResponse(f)}async stat(){if(!this._stat){const t=ge.Buffer.allocUnsafe(10);if(await this.read(t,0,10,0),!this._stat)throw new Error(`unable to determine size of file at ${this.url}`)}return this._stat}async close(){}}function xv(e){const t=new FileReader;return new Promise((n,r)=>{t.onerror=()=>{t.abort(),r(new Error("problem reading blob"))},t.onabort=()=>{r(new Error("blob reading was aborted"))},t.onload=()=>{t.result&&typeof t.result!="string"?n(t.result):r(new Error("unknown error reading blob"))},t.readAsArrayBuffer(e)})}function CP(e){const t=new FileReader;return new Promise((n,r)=>{t.onerror=()=>{t.abort(),r(new Error("problem reading blob"))},t.onabort=()=>{r(new Error("blob reading was aborted"))},t.onload=()=>{t.result&&typeof t.result=="string"?n(t.result):r(new Error("unknown error reading blob"))},t.readAsText(e)})}class kP{constructor(t){this.blob=t,this.size=t.size}async read(t,n=0,r,i=0){if(!r)return{bytesRead:0,buffer:t};const o=i,a=o+r,s=await xv(this.blob.slice(o,a)),f=ge.Buffer.from(s);return{bytesRead:f.copy(t,n),buffer:f}}async readFile(t){let n;if(typeof t=="string"?n=t:n=t&&t.encoding,n==="utf8")return CP(this.blob);if(n)throw new Error(`unsupported encoding: ${n}`);const r=await xv(this.blob);return ge.Buffer.from(r)}async stat(){return{size:this.size}}async close(){}}function vv(e,t={}){return new Xi(e,t)}function TP(e,t,n,r={}){if(n!==void 0)return n;if(e!==void 0)return vv(e,r);if(t!==void 0)return new dt(t,r);throw new Error("no url, path, or filehandle provided, cannot open")}const al=Object.freeze(Object.defineProperty({__proto__:null,BlobFile:kP,LocalFile:dt,RemoteFile:Xi,fromUrl:vv,open:TP},Symbol.toStringTag,{value:"Module"}));var ur={};(function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(o,a){return Object.prototype.hasOwnProperty.call(o,a)}e.assign=function(o){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var s=a.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var f in s)n(s,f)&&(o[f]=s[f])}}return o},e.shrinkBuf=function(o,a){return o.length===a?o:o.subarray?o.subarray(0,a):(o.length=a,o)};var r={arraySet:function(o,a,s,f,l){if(a.subarray&&o.subarray){o.set(a.subarray(s,s+f),l);return}for(var u=0;u<f;u++)o[l+u]=a[s+u]},flattenChunks:function(o){var a,s,f,l,u,c;for(f=0,a=0,s=o.length;a<s;a++)f+=o[a].length;for(c=new Uint8Array(f),l=0,a=0,s=o.length;a<s;a++)u=o[a],c.set(u,l),l+=u.length;return c}},i={arraySet:function(o,a,s,f,l){for(var u=0;u<f;u++)o[l+u]=a[s+u]},flattenChunks:function(o){return[].concat.apply([],o)}};e.setTyped=function(o){o?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(t)})(ur);var sl={},jn={},Jo={},IP=ur,BP=4,Av=0,Ev=1,DP=2;function ea(e){for(var t=e.length;--t>=0;)e[t]=0}var FP=0,_v=1,RP=2,MP=3,PP=258,X0=29,ll=256,fl=ll+1+X0,ta=30,K0=19,Sv=2*fl+1,Ki=15,J0=16,OP=7,ep=256,Cv=16,kv=17,Tv=18,tp=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Ju=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],LP=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Iv=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],NP=512,cr=new Array((fl+2)*2);ea(cr);var ul=new Array(ta*2);ea(ul);var cl=new Array(NP);ea(cl);var hl=new Array(PP-MP+1);ea(hl);var np=new Array(X0);ea(np);var ec=new Array(ta);ea(ec);function rp(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}var Bv,Dv,Fv;function ip(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function Rv(e){return e<256?cl[e]:cl[256+(e>>>7)]}function dl(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function Ut(e,t,n){e.bi_valid>J0-n?(e.bi_buf|=t<<e.bi_valid&65535,dl(e,e.bi_buf),e.bi_buf=t>>J0-e.bi_valid,e.bi_valid+=n-J0):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function $n(e,t,n){Ut(e,n[t*2],n[t*2+1])}function Mv(e,t){var n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1}function zP(e){e.bi_valid===16?(dl(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function UP(e,t){var n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,f=t.stat_desc.max_length,l,u,c,h,d,p,m=0;for(h=0;h<=Ki;h++)e.bl_count[h]=0;for(n[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<Sv;l++)u=e.heap[l],h=n[n[u*2+1]*2+1]+1,h>f&&(h=f,m++),n[u*2+1]=h,!(u>r)&&(e.bl_count[h]++,d=0,u>=s&&(d=a[u-s]),p=n[u*2],e.opt_len+=p*(h+d),o&&(e.static_len+=p*(i[u*2+1]+d)));if(m!==0){do{for(h=f-1;e.bl_count[h]===0;)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[f]--,m-=2}while(m>0);for(h=f;h!==0;h--)for(u=e.bl_count[h];u!==0;)c=e.heap[--l],!(c>r)&&(n[c*2+1]!==h&&(e.opt_len+=(h-n[c*2+1])*n[c*2],n[c*2+1]=h),u--)}}function Pv(e,t,n){var r=new Array(Ki+1),i=0,o,a;for(o=1;o<=Ki;o++)r[o]=i=i+n[o-1]<<1;for(a=0;a<=t;a++){var s=e[a*2+1];s!==0&&(e[a*2]=Mv(r[s]++,s))}}function GP(){var e,t,n,r,i,o=new Array(Ki+1);for(n=0,r=0;r<X0-1;r++)for(np[r]=n,e=0;e<1<<tp[r];e++)hl[n++]=r;for(hl[n-1]=r,i=0,r=0;r<16;r++)for(ec[r]=i,e=0;e<1<<Ju[r];e++)cl[i++]=r;for(i>>=7;r<ta;r++)for(ec[r]=i<<7,e=0;e<1<<Ju[r]-7;e++)cl[256+i++]=r;for(t=0;t<=Ki;t++)o[t]=0;for(e=0;e<=143;)cr[e*2+1]=8,e++,o[8]++;for(;e<=255;)cr[e*2+1]=9,e++,o[9]++;for(;e<=279;)cr[e*2+1]=7,e++,o[7]++;for(;e<=287;)cr[e*2+1]=8,e++,o[8]++;for(Pv(cr,fl+1,o),e=0;e<ta;e++)ul[e*2+1]=5,ul[e*2]=Mv(e,5);Bv=new rp(cr,tp,ll+1,fl,Ki),Dv=new rp(ul,Ju,0,ta,Ki),Fv=new rp(new Array(0),LP,0,K0,OP)}function Ov(e){var t;for(t=0;t<fl;t++)e.dyn_ltree[t*2]=0;for(t=0;t<ta;t++)e.dyn_dtree[t*2]=0;for(t=0;t<K0;t++)e.bl_tree[t*2]=0;e.dyn_ltree[ep*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Lv(e){e.bi_valid>8?dl(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function HP(e,t,n,r){Lv(e),r&&(dl(e,n),dl(e,~n)),IP.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function Nv(e,t,n,r){var i=t*2,o=n*2;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function op(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&Nv(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Nv(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function zv(e,t,n){var r,i,o=0,a,s;if(e.last_lit!==0)do r=e.pending_buf[e.d_buf+o*2]<<8|e.pending_buf[e.d_buf+o*2+1],i=e.pending_buf[e.l_buf+o],o++,r===0?$n(e,i,t):(a=hl[i],$n(e,a+ll+1,t),s=tp[a],s!==0&&(i-=np[a],Ut(e,i,s)),r--,a=Rv(r),$n(e,a,n),s=Ju[a],s!==0&&(r-=ec[a],Ut(e,r,s)));while(o<e.last_lit);$n(e,ep,t)}function ap(e,t){var n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems,a,s,f=-1,l;for(e.heap_len=0,e.heap_max=Sv,a=0;a<o;a++)n[a*2]!==0?(e.heap[++e.heap_len]=f=a,e.depth[a]=0):n[a*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=f<2?++f:0,n[l*2]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=r[l*2+1]);for(t.max_code=f,a=e.heap_len>>1;a>=1;a--)op(e,n,a);l=o;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],op(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=s,n[l*2]=n[a*2]+n[s*2],e.depth[l]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1,n[a*2+1]=n[s*2+1]=l,e.heap[1]=l++,op(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],UP(e,t),Pv(n,f,e.bl_count)}function Uv(e,t,n){var r,i=-1,o,a=t[0*2+1],s=0,f=7,l=4;for(a===0&&(f=138,l=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)o=a,a=t[(r+1)*2+1],!(++s<f&&o===a)&&(s<l?e.bl_tree[o*2]+=s:o!==0?(o!==i&&e.bl_tree[o*2]++,e.bl_tree[Cv*2]++):s<=10?e.bl_tree[kv*2]++:e.bl_tree[Tv*2]++,s=0,i=o,a===0?(f=138,l=3):o===a?(f=6,l=3):(f=7,l=4))}function Gv(e,t,n){var r,i=-1,o,a=t[0*2+1],s=0,f=7,l=4;for(a===0&&(f=138,l=3),r=0;r<=n;r++)if(o=a,a=t[(r+1)*2+1],!(++s<f&&o===a)){if(s<l)do $n(e,o,e.bl_tree);while(--s!==0);else o!==0?(o!==i&&($n(e,o,e.bl_tree),s--),$n(e,Cv,e.bl_tree),Ut(e,s-3,2)):s<=10?($n(e,kv,e.bl_tree),Ut(e,s-3,3)):($n(e,Tv,e.bl_tree),Ut(e,s-11,7));s=0,i=o,a===0?(f=138,l=3):o===a?(f=6,l=3):(f=7,l=4)}}function VP(e){var t;for(Uv(e,e.dyn_ltree,e.l_desc.max_code),Uv(e,e.dyn_dtree,e.d_desc.max_code),ap(e,e.bl_desc),t=K0-1;t>=3&&e.bl_tree[Iv[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function jP(e,t,n,r){var i;for(Ut(e,t-257,5),Ut(e,n-1,5),Ut(e,r-4,4),i=0;i<r;i++)Ut(e,e.bl_tree[Iv[i]*2+1],3);Gv(e,e.dyn_ltree,t-1),Gv(e,e.dyn_dtree,n-1)}function $P(e){var t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return Av;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Ev;for(n=32;n<ll;n++)if(e.dyn_ltree[n*2]!==0)return Ev;return Av}var Hv=!1;function qP(e){Hv||(GP(),Hv=!0),e.l_desc=new ip(e.dyn_ltree,Bv),e.d_desc=new ip(e.dyn_dtree,Dv),e.bl_desc=new ip(e.bl_tree,Fv),e.bi_buf=0,e.bi_valid=0,Ov(e)}function Vv(e,t,n,r){Ut(e,(FP<<1)+(r?1:0),3),HP(e,t,n,!0)}function WP(e){Ut(e,_v<<1,3),$n(e,ep,cr),zP(e)}function ZP(e,t,n,r){var i,o,a=0;e.level>0?(e.strm.data_type===DP&&(e.strm.data_type=$P(e)),ap(e,e.l_desc),ap(e,e.d_desc),a=VP(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&t!==-1?Vv(e,t,n,r):e.strategy===BP||o===i?(Ut(e,(_v<<1)+(r?1:0),3),zv(e,cr,ul)):(Ut(e,(RP<<1)+(r?1:0),3),jP(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),zv(e,e.dyn_ltree,e.dyn_dtree)),Ov(e),r&&Lv(e)}function YP(e,t,n){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(hl[n]+ll+1)*2]++,e.dyn_dtree[Rv(t)*2]++),e.last_lit===e.lit_bufsize-1}Jo._tr_init=qP,Jo._tr_stored_block=Vv,Jo._tr_flush_block=ZP,Jo._tr_tally=YP,Jo._tr_align=WP;function QP(e,t,n,r){for(var i=e&65535|0,o=e>>>16&65535|0,a=0;n!==0;){a=n>2e3?2e3:n,n-=a;do i=i+t[r++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0}var jv=QP;function XP(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t}var KP=XP();function JP(e,t,n,r){var i=KP,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^i[(e^t[a])&255];return e^-1}var $v=JP,sp={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Bt=ur,an=Jo,qv=jv,Jr=$v,eO=sp,Ji=0,tO=1,nO=3,ei=4,Wv=5,qn=0,Zv=1,sn=-2,rO=-3,lp=-5,iO=-1,oO=1,tc=2,aO=3,sO=4,lO=0,fO=2,nc=8,uO=9,cO=15,hO=8,dO=29,pO=256,fp=pO+1+dO,gO=30,mO=19,bO=2*fp+1,yO=15,he=3,ti=258,_n=ti+he+1,wO=32,rc=42,up=69,ic=73,oc=91,ac=103,eo=113,pl=666,at=1,gl=2,to=3,na=4,xO=3;function ni(e,t){return e.msg=eO[t],t}function Yv(e){return(e<<1)-(e>4?9:0)}function ri(e){for(var t=e.length;--t>=0;)e[t]=0}function ii(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(Bt.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))}function wt(e,t){an._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ii(e.strm)}function we(e,t){e.pending_buf[e.pending++]=t}function ml(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function vO(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,Bt.arraySet(t,e.input,e.next_in,i,n),e.state.wrap===1?e.adler=qv(e.adler,t,i,n):e.state.wrap===2&&(e.adler=Jr(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function Qv(e,t){var n=e.max_chain_length,r=e.strstart,i,o,a=e.prev_length,s=e.nice_match,f=e.strstart>e.w_size-_n?e.strstart-(e.w_size-_n):0,l=e.window,u=e.w_mask,c=e.prev,h=e.strstart+ti,d=l[r+a-1],p=l[r+a];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do if(i=t,!(l[i+a]!==p||l[i+a-1]!==d||l[i]!==l[r]||l[++i]!==l[r+1])){r+=2,i++;do;while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<h);if(o=ti-(h-r),r=h-ti,o>a){if(e.match_start=t,a=o,o>=s)break;d=l[r+a-1],p=l[r+a]}}while((t=c[t&u])>f&&--n!==0);return a<=e.lookahead?a:e.lookahead}function no(e){var t=e.w_size,n,r,i,o,a;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-_n)){Bt.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,r=e.hash_size,n=r;do i=e.head[--n],e.head[n]=i>=t?i-t:0;while(--r);r=t,n=r;do i=e.prev[--n],e.prev[n]=i>=t?i-t:0;while(--r);o+=t}if(e.strm.avail_in===0)break;if(r=vO(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=r,e.lookahead+e.insert>=he)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+he-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<he)););}while(e.lookahead<_n&&e.strm.avail_in!==0)}function AO(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(no(e),e.lookahead===0&&t===Ji)return at;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((e.strstart===0||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,wt(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-_n&&(wt(e,!1),e.strm.avail_out===0))return at}return e.insert=0,t===ei?(wt(e,!0),e.strm.avail_out===0?to:na):(e.strstart>e.block_start&&(wt(e,!1),e.strm.avail_out===0),at)}function cp(e,t){for(var n,r;;){if(e.lookahead<_n){if(no(e),e.lookahead<_n&&t===Ji)return at;if(e.lookahead===0)break}if(n=0,e.lookahead>=he&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+he-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-_n&&(e.match_length=Qv(e,n)),e.match_length>=he)if(r=an._tr_tally(e,e.strstart-e.match_start,e.match_length-he),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=he){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+he-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=an._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(wt(e,!1),e.strm.avail_out===0))return at}return e.insert=e.strstart<he-1?e.strstart:he-1,t===ei?(wt(e,!0),e.strm.avail_out===0?to:na):e.last_lit&&(wt(e,!1),e.strm.avail_out===0)?at:gl}function ra(e,t){for(var n,r,i;;){if(e.lookahead<_n){if(no(e),e.lookahead<_n&&t===Ji)return at;if(e.lookahead===0)break}if(n=0,e.lookahead>=he&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+he-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=he-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-_n&&(e.match_length=Qv(e,n),e.match_length<=5&&(e.strategy===oO||e.match_length===he&&e.strstart-e.match_start>4096)&&(e.match_length=he-1)),e.prev_length>=he&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-he,r=an._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-he),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+he-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=he-1,e.strstart++,r&&(wt(e,!1),e.strm.avail_out===0))return at}else if(e.match_available){if(r=an._tr_tally(e,0,e.window[e.strstart-1]),r&&wt(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return at}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=an._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<he-1?e.strstart:he-1,t===ei?(wt(e,!0),e.strm.avail_out===0?to:na):e.last_lit&&(wt(e,!1),e.strm.avail_out===0)?at:gl}function EO(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=ti){if(no(e),e.lookahead<=ti&&t===Ji)return at;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=he&&e.strstart>0&&(i=e.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){o=e.strstart+ti;do;while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=ti-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=he?(n=an._tr_tally(e,1,e.match_length-he),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=an._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(wt(e,!1),e.strm.avail_out===0))return at}return e.insert=0,t===ei?(wt(e,!0),e.strm.avail_out===0?to:na):e.last_lit&&(wt(e,!1),e.strm.avail_out===0)?at:gl}function _O(e,t){for(var n;;){if(e.lookahead===0&&(no(e),e.lookahead===0)){if(t===Ji)return at;break}if(e.match_length=0,n=an._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(wt(e,!1),e.strm.avail_out===0))return at}return e.insert=0,t===ei?(wt(e,!0),e.strm.avail_out===0?to:na):e.last_lit&&(wt(e,!1),e.strm.avail_out===0)?at:gl}function Wn(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}var ia;ia=[new Wn(0,0,0,0,AO),new Wn(4,4,8,4,cp),new Wn(4,5,16,8,cp),new Wn(4,6,32,32,cp),new Wn(4,4,16,16,ra),new Wn(8,16,32,32,ra),new Wn(8,16,128,128,ra),new Wn(8,32,128,256,ra),new Wn(32,128,258,1024,ra),new Wn(32,258,258,4096,ra)];function SO(e){e.window_size=2*e.w_size,ri(e.head),e.max_lazy_match=ia[e.level].max_lazy,e.good_match=ia[e.level].good_length,e.nice_match=ia[e.level].nice_length,e.max_chain_length=ia[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=he-1,e.match_available=0,e.ins_h=0}function CO(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=nc,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Bt.Buf16(bO*2),this.dyn_dtree=new Bt.Buf16((2*gO+1)*2),this.bl_tree=new Bt.Buf16((2*mO+1)*2),ri(this.dyn_ltree),ri(this.dyn_dtree),ri(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Bt.Buf16(yO+1),this.heap=new Bt.Buf16(2*fp+1),ri(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Bt.Buf16(2*fp+1),ri(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Xv(e){var t;return!e||!e.state?ni(e,sn):(e.total_in=e.total_out=0,e.data_type=fO,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?rc:eo,e.adler=t.wrap===2?0:1,t.last_flush=Ji,an._tr_init(t),qn)}function Kv(e){var t=Xv(e);return t===qn&&SO(e.state),t}function kO(e,t){return!e||!e.state||e.state.wrap!==2?sn:(e.state.gzhead=t,qn)}function Jv(e,t,n,r,i,o){if(!e)return sn;var a=1;if(t===iO&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>uO||n!==nc||r<8||r>15||t<0||t>9||o<0||o>sO)return ni(e,sn);r===8&&(r=9);var s=new CO;return e.state=s,s.strm=e,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+he-1)/he),s.window=new Bt.Buf8(s.w_size*2),s.head=new Bt.Buf16(s.hash_size),s.prev=new Bt.Buf16(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Bt.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=(1+2)*s.lit_bufsize,s.level=t,s.strategy=o,s.method=n,Kv(e)}function TO(e,t){return Jv(e,t,nc,cO,hO,lO)}function IO(e,t){var n,r,i,o;if(!e||!e.state||t>Wv||t<0)return e?ni(e,sn):sn;if(r=e.state,!e.output||!e.input&&e.avail_in!==0||r.status===pl&&t!==ei)return ni(e,e.avail_out===0?lp:sn);if(r.strm=e,n=r.last_flush,r.last_flush=t,r.status===rc)if(r.wrap===2)e.adler=0,we(r,31),we(r,139),we(r,8),r.gzhead?(we(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),we(r,r.gzhead.time&255),we(r,r.gzhead.time>>8&255),we(r,r.gzhead.time>>16&255),we(r,r.gzhead.time>>24&255),we(r,r.level===9?2:r.strategy>=tc||r.level<2?4:0),we(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(we(r,r.gzhead.extra.length&255),we(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Jr(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=up):(we(r,0),we(r,0),we(r,0),we(r,0),we(r,0),we(r,r.level===9?2:r.strategy>=tc||r.level<2?4:0),we(r,xO),r.status=eo);else{var a=nc+(r.w_bits-8<<4)<<8,s=-1;r.strategy>=tc||r.level<2?s=0:r.level<6?s=1:r.level===6?s=2:s=3,a|=s<<6,r.strstart!==0&&(a|=wO),a+=31-a%31,r.status=eo,ml(r,a),r.strstart!==0&&(ml(r,e.adler>>>16),ml(r,e.adler&65535)),e.adler=1}if(r.status===up)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=Jr(e.adler,r.pending_buf,r.pending-i,i)),ii(e),i=r.pending,r.pending===r.pending_buf_size));)we(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(e.adler=Jr(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=ic)}else r.status=ic;if(r.status===ic)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=Jr(e.adler,r.pending_buf,r.pending-i,i)),ii(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}r.gzindex<r.gzhead.name.length?o=r.gzhead.name.charCodeAt(r.gzindex++)&255:o=0,we(r,o)}while(o!==0);r.gzhead.hcrc&&r.pending>i&&(e.adler=Jr(e.adler,r.pending_buf,r.pending-i,i)),o===0&&(r.gzindex=0,r.status=oc)}else r.status=oc;if(r.status===oc)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=Jr(e.adler,r.pending_buf,r.pending-i,i)),ii(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}r.gzindex<r.gzhead.comment.length?o=r.gzhead.comment.charCodeAt(r.gzindex++)&255:o=0,we(r,o)}while(o!==0);r.gzhead.hcrc&&r.pending>i&&(e.adler=Jr(e.adler,r.pending_buf,r.pending-i,i)),o===0&&(r.status=ac)}else r.status=ac;if(r.status===ac&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&ii(e),r.pending+2<=r.pending_buf_size&&(we(r,e.adler&255),we(r,e.adler>>8&255),e.adler=0,r.status=eo)):r.status=eo),r.pending!==0){if(ii(e),e.avail_out===0)return r.last_flush=-1,qn}else if(e.avail_in===0&&Yv(t)<=Yv(n)&&t!==ei)return ni(e,lp);if(r.status===pl&&e.avail_in!==0)return ni(e,lp);if(e.avail_in!==0||r.lookahead!==0||t!==Ji&&r.status!==pl){var f=r.strategy===tc?_O(r,t):r.strategy===aO?EO(r,t):ia[r.level].func(r,t);if((f===to||f===na)&&(r.status=pl),f===at||f===to)return e.avail_out===0&&(r.last_flush=-1),qn;if(f===gl&&(t===tO?an._tr_align(r):t!==Wv&&(an._tr_stored_block(r,0,0,!1),t===nO&&(ri(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),ii(e),e.avail_out===0))return r.last_flush=-1,qn}return t!==ei?qn:r.wrap<=0?Zv:(r.wrap===2?(we(r,e.adler&255),we(r,e.adler>>8&255),we(r,e.adler>>16&255),we(r,e.adler>>24&255),we(r,e.total_in&255),we(r,e.total_in>>8&255),we(r,e.total_in>>16&255),we(r,e.total_in>>24&255)):(ml(r,e.adler>>>16),ml(r,e.adler&65535)),ii(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?qn:Zv)}function BO(e){var t;return!e||!e.state?sn:(t=e.state.status,t!==rc&&t!==up&&t!==ic&&t!==oc&&t!==ac&&t!==eo&&t!==pl?ni(e,sn):(e.state=null,t===eo?ni(e,rO):qn))}function DO(e,t){var n=t.length,r,i,o,a,s,f,l,u;if(!e||!e.state||(r=e.state,a=r.wrap,a===2||a===1&&r.status!==rc||r.lookahead))return sn;for(a===1&&(e.adler=qv(e.adler,t,n,0)),r.wrap=0,n>=r.w_size&&(a===0&&(ri(r.head),r.strstart=0,r.block_start=0,r.insert=0),u=new Bt.Buf8(r.w_size),Bt.arraySet(u,t,n-r.w_size,r.w_size,0),t=u,n=r.w_size),s=e.avail_in,f=e.next_in,l=e.input,e.avail_in=n,e.next_in=0,e.input=t,no(r);r.lookahead>=he;){i=r.strstart,o=r.lookahead-(he-1);do r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+he-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++;while(--o);r.strstart=i,r.lookahead=he-1,no(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=he-1,r.match_available=0,e.next_in=f,e.input=l,e.avail_in=s,r.wrap=a,qn}jn.deflateInit=TO,jn.deflateInit2=Jv,jn.deflateReset=Kv,jn.deflateResetKeep=Xv,jn.deflateSetHeader=kO,jn.deflate=IO,jn.deflateEnd=BO,jn.deflateSetDictionary=DO,jn.deflateInfo="pako deflate (from Nodeca project)";var ro={},sc=ur,eA=!0,tA=!0;try{String.fromCharCode.apply(null,[0])}catch{eA=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{tA=!1}for(var bl=new sc.Buf8(256),oi=0;oi<256;oi++)bl[oi]=oi>=252?6:oi>=248?5:oi>=240?4:oi>=224?3:oi>=192?2:1;bl[254]=bl[254]=1,ro.string2buf=function(e){var t,n,r,i,o,a=e.length,s=0;for(i=0;i<a;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new sc.Buf8(s),o=0,i=0;o<s;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|n&63):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|n&63):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|n&63);return t};function nA(e,t){if(t<65534&&(e.subarray&&tA||!e.subarray&&eA))return String.fromCharCode.apply(null,sc.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}ro.buf2binstring=function(e){return nA(e,e.length)},ro.binstring2buf=function(e){for(var t=new sc.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},ro.buf2string=function(e,t){var n,r,i,o,a=t||e.length,s=new Array(a*2);for(r=0,n=0;n<a;){if(i=e[n++],i<128){s[r++]=i;continue}if(o=bl[i],o>4){s[r++]=65533,n+=o-1;continue}for(i&=o===2?31:o===3?15:7;o>1&&n<a;)i=i<<6|e[n++]&63,o--;if(o>1){s[r++]=65533;continue}i<65536?s[r++]=i:(i-=65536,s[r++]=55296|i>>10&1023,s[r++]=56320|i&1023)}return nA(s,r)},ro.utf8border=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+bl[e[n]]>t?n:t};function FO(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var rA=FO,yl=jn,wl=ur,hp=ro,dp=sp,RO=rA,iA=Object.prototype.toString,MO=0,pp=4,oa=0,oA=1,aA=2,PO=-1,OO=0,LO=8;function io(e){if(!(this instanceof io))return new io(e);this.options=wl.assign({level:PO,method:LO,chunkSize:16384,windowBits:15,memLevel:8,strategy:OO,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new RO,this.strm.avail_out=0;var n=yl.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==oa)throw new Error(dp[n]);if(t.header&&yl.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(typeof t.dictionary=="string"?r=hp.string2buf(t.dictionary):iA.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=yl.deflateSetDictionary(this.strm,r),n!==oa)throw new Error(dp[n]);this._dict_set=!0}}io.prototype.push=function(e,t){var n=this.strm,r=this.options.chunkSize,i,o;if(this.ended)return!1;o=t===~~t?t:t===!0?pp:MO,typeof e=="string"?n.input=hp.string2buf(e):iA.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new wl.Buf8(r),n.next_out=0,n.avail_out=r),i=yl.deflate(n,o),i!==oA&&i!==oa)return this.onEnd(i),this.ended=!0,!1;(n.avail_out===0||n.avail_in===0&&(o===pp||o===aA))&&(this.options.to==="string"?this.onData(hp.buf2binstring(wl.shrinkBuf(n.output,n.next_out))):this.onData(wl.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||n.avail_out===0)&&i!==oA);return o===pp?(i=yl.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===oa):(o===aA&&(this.onEnd(oa),n.avail_out=0),!0)},io.prototype.onData=function(e){this.chunks.push(e)},io.prototype.onEnd=function(e){e===oa&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=wl.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function gp(e,t){var n=new io(t);if(n.push(e,!0),n.err)throw n.msg||dp[n.err];return n.result}function NO(e,t){return t=t||{},t.raw=!0,gp(e,t)}function zO(e,t){return t=t||{},t.gzip=!0,gp(e,t)}sl.Deflate=io,sl.deflate=gp,sl.deflateRaw=NO,sl.gzip=zO;var xl={},Sn={},lc=30,UO=12,GO=function(t,n){var r,i,o,a,s,f,l,u,c,h,d,p,m,y,w,A,S,_,T,I,B,F,M,G,N;r=t.state,i=t.next_in,G=t.input,o=i+(t.avail_in-5),a=t.next_out,N=t.output,s=a-(n-t.avail_out),f=a+(t.avail_out-257),l=r.dmax,u=r.wsize,c=r.whave,h=r.wnext,d=r.window,p=r.hold,m=r.bits,y=r.lencode,w=r.distcode,A=(1<<r.lenbits)-1,S=(1<<r.distbits)-1;e:do{m<15&&(p+=G[i++]<<m,m+=8,p+=G[i++]<<m,m+=8),_=y[p&A];t:for(;;){if(T=_>>>24,p>>>=T,m-=T,T=_>>>16&255,T===0)N[a++]=_&65535;else if(T&16){I=_&65535,T&=15,T&&(m<T&&(p+=G[i++]<<m,m+=8),I+=p&(1<<T)-1,p>>>=T,m-=T),m<15&&(p+=G[i++]<<m,m+=8,p+=G[i++]<<m,m+=8),_=w[p&S];n:for(;;){if(T=_>>>24,p>>>=T,m-=T,T=_>>>16&255,T&16){if(B=_&65535,T&=15,m<T&&(p+=G[i++]<<m,m+=8,m<T&&(p+=G[i++]<<m,m+=8)),B+=p&(1<<T)-1,B>l){t.msg="invalid distance too far back",r.mode=lc;break e}if(p>>>=T,m-=T,T=a-s,B>T){if(T=B-T,T>c&&r.sane){t.msg="invalid distance too far back",r.mode=lc;break e}if(F=0,M=d,h===0){if(F+=u-T,T<I){I-=T;do N[a++]=d[F++];while(--T);F=a-B,M=N}}else if(h<T){if(F+=u+h-T,T-=h,T<I){I-=T;do N[a++]=d[F++];while(--T);if(F=0,h<I){T=h,I-=T;do N[a++]=d[F++];while(--T);F=a-B,M=N}}}else if(F+=h-T,T<I){I-=T;do N[a++]=d[F++];while(--T);F=a-B,M=N}for(;I>2;)N[a++]=M[F++],N[a++]=M[F++],N[a++]=M[F++],I-=3;I&&(N[a++]=M[F++],I>1&&(N[a++]=M[F++]))}else{F=a-B;do N[a++]=N[F++],N[a++]=N[F++],N[a++]=N[F++],I-=3;while(I>2);I&&(N[a++]=N[F++],I>1&&(N[a++]=N[F++]))}}else if(T&64){t.msg="invalid distance code",r.mode=lc;break e}else{_=w[(_&65535)+(p&(1<<T)-1)];continue n}break}}else if(T&64)if(T&32){r.mode=UO;break e}else{t.msg="invalid literal/length code",r.mode=lc;break e}else{_=y[(_&65535)+(p&(1<<T)-1)];continue t}break}}while(i<o&&a<f);I=m>>3,i-=I,m-=I<<3,p&=(1<<m)-1,t.next_in=i,t.next_out=a,t.avail_in=i<o?5+(o-i):5-(i-o),t.avail_out=a<f?257+(f-a):257-(a-f),r.hold=p,r.bits=m},sA=ur,aa=15,lA=852,fA=592,uA=0,mp=1,cA=2,HO=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],VO=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],jO=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],$O=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],qO=function(t,n,r,i,o,a,s,f){var l=f.bits,u=0,c=0,h=0,d=0,p=0,m=0,y=0,w=0,A=0,S=0,_,T,I,B,F,M=null,G=0,N,re=new sA.Buf16(aa+1),se=new sA.Buf16(aa+1),te=null,pe=0,Xe,De,Je;for(u=0;u<=aa;u++)re[u]=0;for(c=0;c<i;c++)re[n[r+c]]++;for(p=l,d=aa;d>=1&&re[d]===0;d--);if(p>d&&(p=d),d===0)return o[a++]=1<<24|64<<16|0,o[a++]=1<<24|64<<16|0,f.bits=1,0;for(h=1;h<d&&re[h]===0;h++);for(p<h&&(p=h),w=1,u=1;u<=aa;u++)if(w<<=1,w-=re[u],w<0)return-1;if(w>0&&(t===uA||d!==1))return-1;for(se[1]=0,u=1;u<aa;u++)se[u+1]=se[u]+re[u];for(c=0;c<i;c++)n[r+c]!==0&&(s[se[n[r+c]]++]=c);if(t===uA?(M=te=s,N=19):t===mp?(M=HO,G-=257,te=VO,pe-=257,N=256):(M=jO,te=$O,N=-1),S=0,c=0,u=h,F=a,m=p,y=0,I=-1,A=1<<p,B=A-1,t===mp&&A>lA||t===cA&&A>fA)return 1;for(;;){Xe=u-y,s[c]<N?(De=0,Je=s[c]):s[c]>N?(De=te[pe+s[c]],Je=M[G+s[c]]):(De=32+64,Je=0),_=1<<u-y,T=1<<m,h=T;do T-=_,o[F+(S>>y)+T]=Xe<<24|De<<16|Je|0;while(T!==0);for(_=1<<u-1;S&_;)_>>=1;if(_!==0?(S&=_-1,S+=_):S=0,c++,--re[u]===0){if(u===d)break;u=n[r+s[c]]}if(u>p&&(S&B)!==I){for(y===0&&(y=p),F+=h,m=u-y,w=1<<m;m+y<d&&(w-=re[m+y],!(w<=0));)m++,w<<=1;if(A+=1<<m,t===mp&&A>lA||t===cA&&A>fA)return 1;I=S&B,o[I]=p<<24|m<<16|F-a|0}}return S!==0&&(o[F+S]=u-y<<24|64<<16|0),f.bits=p,0},Yt=ur,bp=jv,Zn=$v,WO=GO,vl=qO,ZO=0,hA=1,dA=2,pA=4,YO=5,fc=6,oo=0,QO=1,XO=2,ln=-2,gA=-3,mA=-4,KO=-5,bA=8,yA=1,wA=2,xA=3,vA=4,AA=5,EA=6,_A=7,SA=8,CA=9,kA=10,uc=11,hr=12,yp=13,TA=14,wp=15,IA=16,BA=17,DA=18,FA=19,cc=20,hc=21,RA=22,MA=23,PA=24,OA=25,LA=26,xp=27,NA=28,zA=29,$e=30,UA=31,JO=32,eL=852,tL=592,nL=15,rL=nL;function GA(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function iL(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Yt.Buf16(320),this.work=new Yt.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function HA(e){var t;return!e||!e.state?ln:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=yA,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Yt.Buf32(eL),t.distcode=t.distdyn=new Yt.Buf32(tL),t.sane=1,t.back=-1,oo)}function VA(e){var t;return!e||!e.state?ln:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,HA(e))}function jA(e,t){var n,r;return!e||!e.state||(r=e.state,t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?ln:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,VA(e))}function $A(e,t){var n,r;return e?(r=new iL,e.state=r,r.window=null,n=jA(e,t),n!==oo&&(e.state=null),n):ln}function oL(e){return $A(e,rL)}var qA=!0,vp,Ap;function aL(e){if(qA){var t;for(vp=new Yt.Buf32(512),Ap=new Yt.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(vl(hA,e.lens,0,288,vp,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;vl(dA,e.lens,0,32,Ap,0,e.work,{bits:5}),qA=!1}e.lencode=vp,e.lenbits=9,e.distcode=Ap,e.distbits=5}function WA(e,t,n,r){var i,o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Yt.Buf8(o.wsize)),r>=o.wsize?(Yt.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),Yt.arraySet(o.window,t,n-r,i,o.wnext),r-=i,r?(Yt.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function sL(e,t){var n,r,i,o,a,s,f,l,u,c,h,d,p,m,y=0,w,A,S,_,T,I,B,F,M=new Yt.Buf8(4),G,N,re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return ln;n=e.state,n.mode===hr&&(n.mode=yp),a=e.next_out,i=e.output,f=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,l=n.hold,u=n.bits,c=s,h=f,F=oo;e:for(;;)switch(n.mode){case yA:if(n.wrap===0){n.mode=yp;break}for(;u<16;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(n.wrap&2&&l===35615){n.check=0,M[0]=l&255,M[1]=l>>>8&255,n.check=Zn(n.check,M,2,0),l=0,u=0,n.mode=wA;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=$e;break}if((l&15)!==bA){e.msg="unknown compression method",n.mode=$e;break}if(l>>>=4,u-=4,B=(l&15)+8,n.wbits===0)n.wbits=B;else if(B>n.wbits){e.msg="invalid window size",n.mode=$e;break}n.dmax=1<<B,e.adler=n.check=1,n.mode=l&512?kA:hr,l=0,u=0;break;case wA:for(;u<16;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(n.flags=l,(n.flags&255)!==bA){e.msg="unknown compression method",n.mode=$e;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=$e;break}n.head&&(n.head.text=l>>8&1),n.flags&512&&(M[0]=l&255,M[1]=l>>>8&255,n.check=Zn(n.check,M,2,0)),l=0,u=0,n.mode=xA;case xA:for(;u<32;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}n.head&&(n.head.time=l),n.flags&512&&(M[0]=l&255,M[1]=l>>>8&255,M[2]=l>>>16&255,M[3]=l>>>24&255,n.check=Zn(n.check,M,4,0)),l=0,u=0,n.mode=vA;case vA:for(;u<16;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}n.head&&(n.head.xflags=l&255,n.head.os=l>>8),n.flags&512&&(M[0]=l&255,M[1]=l>>>8&255,n.check=Zn(n.check,M,2,0)),l=0,u=0,n.mode=AA;case AA:if(n.flags&1024){for(;u<16;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),n.flags&512&&(M[0]=l&255,M[1]=l>>>8&255,n.check=Zn(n.check,M,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=EA;case EA:if(n.flags&1024&&(d=n.length,d>s&&(d=s),d&&(n.head&&(B=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Yt.arraySet(n.head.extra,r,o,d,B)),n.flags&512&&(n.check=Zn(n.check,r,d,o)),s-=d,o+=d,n.length-=d),n.length))break e;n.length=0,n.mode=_A;case _A:if(n.flags&2048){if(s===0)break e;d=0;do B=r[o+d++],n.head&&B&&n.length<65536&&(n.head.name+=String.fromCharCode(B));while(B&&d<s);if(n.flags&512&&(n.check=Zn(n.check,r,d,o)),s-=d,o+=d,B)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=SA;case SA:if(n.flags&4096){if(s===0)break e;d=0;do B=r[o+d++],n.head&&B&&n.length<65536&&(n.head.comment+=String.fromCharCode(B));while(B&&d<s);if(n.flags&512&&(n.check=Zn(n.check,r,d,o)),s-=d,o+=d,B)break e}else n.head&&(n.head.comment=null);n.mode=CA;case CA:if(n.flags&512){for(;u<16;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(l!==(n.check&65535)){e.msg="header crc mismatch",n.mode=$e;break}l=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=hr;break;case kA:for(;u<32;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}e.adler=n.check=GA(l),l=0,u=0,n.mode=uc;case uc:if(n.havedict===0)return e.next_out=a,e.avail_out=f,e.next_in=o,e.avail_in=s,n.hold=l,n.bits=u,XO;e.adler=n.check=1,n.mode=hr;case hr:if(t===YO||t===fc)break e;case yp:if(n.last){l>>>=u&7,u-=u&7,n.mode=xp;break}for(;u<3;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}switch(n.last=l&1,l>>>=1,u-=1,l&3){case 0:n.mode=TA;break;case 1:if(aL(n),n.mode=cc,t===fc){l>>>=2,u-=2;break e}break;case 2:n.mode=BA;break;case 3:e.msg="invalid block type",n.mode=$e}l>>>=2,u-=2;break;case TA:for(l>>>=u&7,u-=u&7;u<32;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=$e;break}if(n.length=l&65535,l=0,u=0,n.mode=wp,t===fc)break e;case wp:n.mode=IA;case IA:if(d=n.length,d){if(d>s&&(d=s),d>f&&(d=f),d===0)break e;Yt.arraySet(i,r,o,d,a),s-=d,o+=d,f-=d,a+=d,n.length-=d;break}n.mode=hr;break;case BA:for(;u<14;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(n.nlen=(l&31)+257,l>>>=5,u-=5,n.ndist=(l&31)+1,l>>>=5,u-=5,n.ncode=(l&15)+4,l>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=$e;break}n.have=0,n.mode=DA;case DA:for(;n.have<n.ncode;){for(;u<3;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}n.lens[re[n.have++]]=l&7,l>>>=3,u-=3}for(;n.have<19;)n.lens[re[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,G={bits:n.lenbits},F=vl(ZO,n.lens,0,19,n.lencode,0,n.work,G),n.lenbits=G.bits,F){e.msg="invalid code lengths set",n.mode=$e;break}n.have=0,n.mode=FA;case FA:for(;n.have<n.nlen+n.ndist;){for(;y=n.lencode[l&(1<<n.lenbits)-1],w=y>>>24,A=y>>>16&255,S=y&65535,!(w<=u);){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(S<16)l>>>=w,u-=w,n.lens[n.have++]=S;else{if(S===16){for(N=w+2;u<N;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(l>>>=w,u-=w,n.have===0){e.msg="invalid bit length repeat",n.mode=$e;break}B=n.lens[n.have-1],d=3+(l&3),l>>>=2,u-=2}else if(S===17){for(N=w+3;u<N;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}l>>>=w,u-=w,B=0,d=3+(l&7),l>>>=3,u-=3}else{for(N=w+7;u<N;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}l>>>=w,u-=w,B=0,d=11+(l&127),l>>>=7,u-=7}if(n.have+d>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=$e;break}for(;d--;)n.lens[n.have++]=B}}if(n.mode===$e)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=$e;break}if(n.lenbits=9,G={bits:n.lenbits},F=vl(hA,n.lens,0,n.nlen,n.lencode,0,n.work,G),n.lenbits=G.bits,F){e.msg="invalid literal/lengths set",n.mode=$e;break}if(n.distbits=6,n.distcode=n.distdyn,G={bits:n.distbits},F=vl(dA,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,G),n.distbits=G.bits,F){e.msg="invalid distances set",n.mode=$e;break}if(n.mode=cc,t===fc)break e;case cc:n.mode=hc;case hc:if(s>=6&&f>=258){e.next_out=a,e.avail_out=f,e.next_in=o,e.avail_in=s,n.hold=l,n.bits=u,WO(e,h),a=e.next_out,i=e.output,f=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,l=n.hold,u=n.bits,n.mode===hr&&(n.back=-1);break}for(n.back=0;y=n.lencode[l&(1<<n.lenbits)-1],w=y>>>24,A=y>>>16&255,S=y&65535,!(w<=u);){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(A&&!(A&240)){for(_=w,T=A,I=S;y=n.lencode[I+((l&(1<<_+T)-1)>>_)],w=y>>>24,A=y>>>16&255,S=y&65535,!(_+w<=u);){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}l>>>=_,u-=_,n.back+=_}if(l>>>=w,u-=w,n.back+=w,n.length=S,A===0){n.mode=LA;break}if(A&32){n.back=-1,n.mode=hr;break}if(A&64){e.msg="invalid literal/length code",n.mode=$e;break}n.extra=A&15,n.mode=RA;case RA:if(n.extra){for(N=n.extra;u<N;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=MA;case MA:for(;y=n.distcode[l&(1<<n.distbits)-1],w=y>>>24,A=y>>>16&255,S=y&65535,!(w<=u);){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(!(A&240)){for(_=w,T=A,I=S;y=n.distcode[I+((l&(1<<_+T)-1)>>_)],w=y>>>24,A=y>>>16&255,S=y&65535,!(_+w<=u);){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}l>>>=_,u-=_,n.back+=_}if(l>>>=w,u-=w,n.back+=w,A&64){e.msg="invalid distance code",n.mode=$e;break}n.offset=S,n.extra=A&15,n.mode=PA;case PA:if(n.extra){for(N=n.extra;u<N;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=$e;break}n.mode=OA;case OA:if(f===0)break e;if(d=h-f,n.offset>d){if(d=n.offset-d,d>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=$e;break}d>n.wnext?(d-=n.wnext,p=n.wsize-d):p=n.wnext-d,d>n.length&&(d=n.length),m=n.window}else m=i,p=a-n.offset,d=n.length;d>f&&(d=f),f-=d,n.length-=d;do i[a++]=m[p++];while(--d);n.length===0&&(n.mode=hc);break;case LA:if(f===0)break e;i[a++]=n.length,f--,n.mode=hc;break;case xp:if(n.wrap){for(;u<32;){if(s===0)break e;s--,l|=r[o++]<<u,u+=8}if(h-=f,e.total_out+=h,n.total+=h,h&&(e.adler=n.check=n.flags?Zn(n.check,i,h,a-h):bp(n.check,i,h,a-h)),h=f,(n.flags?l:GA(l))!==n.check){e.msg="incorrect data check",n.mode=$e;break}l=0,u=0}n.mode=NA;case NA:if(n.wrap&&n.flags){for(;u<32;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(l!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=$e;break}l=0,u=0}n.mode=zA;case zA:F=QO;break e;case $e:F=gA;break e;case UA:return mA;case JO:default:return ln}return e.next_out=a,e.avail_out=f,e.next_in=o,e.avail_in=s,n.hold=l,n.bits=u,(n.wsize||h!==e.avail_out&&n.mode<$e&&(n.mode<xp||t!==pA))&&WA(e,e.output,e.next_out,h-e.avail_out),c-=e.avail_in,h-=e.avail_out,e.total_in+=c,e.total_out+=h,n.total+=h,n.wrap&&h&&(e.adler=n.check=n.flags?Zn(n.check,i,h,e.next_out-h):bp(n.check,i,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===hr?128:0)+(n.mode===cc||n.mode===wp?256:0),(c===0&&h===0||t===pA)&&F===oo&&(F=KO),F}function lL(e){if(!e||!e.state)return ln;var t=e.state;return t.window&&(t.window=null),e.state=null,oo}function fL(e,t){var n;return!e||!e.state||(n=e.state,!(n.wrap&2))?ln:(n.head=t,t.done=!1,oo)}function uL(e,t){var n=t.length,r,i,o;return!e||!e.state||(r=e.state,r.wrap!==0&&r.mode!==uc)?ln:r.mode===uc&&(i=1,i=bp(i,t,n,0),i!==r.check)?gA:(o=WA(e,t,n,n),o?(r.mode=UA,mA):(r.havedict=1,oo))}Sn.inflateReset=VA,Sn.inflateReset2=jA,Sn.inflateResetKeep=HA,Sn.inflateInit=oL,Sn.inflateInit2=$A,Sn.inflate=sL,Sn.inflateEnd=lL,Sn.inflateGetHeader=fL,Sn.inflateSetDictionary=uL,Sn.inflateInfo="pako inflate (from Nodeca project)";var ZA={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function cL(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var hL=cL,sa=Sn,Al=ur,dc=ro,nt=ZA,Ep=sp,dL=rA,pL=hL,YA=Object.prototype.toString;function ao(e){if(!(this instanceof ao))return new ao(e);this.options=Al.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new dL,this.strm.avail_out=0;var n=sa.inflateInit2(this.strm,t.windowBits);if(n!==nt.Z_OK)throw new Error(Ep[n]);if(this.header=new pL,sa.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=dc.string2buf(t.dictionary):YA.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=sa.inflateSetDictionary(this.strm,t.dictionary),n!==nt.Z_OK)))throw new Error(Ep[n])}ao.prototype.push=function(e,t){var n=this.strm,r=this.options.chunkSize,i=this.options.dictionary,o,a,s,f,l,u=!1;if(this.ended)return!1;a=t===~~t?t:t===!0?nt.Z_FINISH:nt.Z_NO_FLUSH,typeof e=="string"?n.input=dc.binstring2buf(e):YA.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new Al.Buf8(r),n.next_out=0,n.avail_out=r),o=sa.inflate(n,nt.Z_NO_FLUSH),o===nt.Z_NEED_DICT&&i&&(o=sa.inflateSetDictionary(this.strm,i)),o===nt.Z_BUF_ERROR&&u===!0&&(o=nt.Z_OK,u=!1),o!==nt.Z_STREAM_END&&o!==nt.Z_OK)return this.onEnd(o),this.ended=!0,!1;n.next_out&&(n.avail_out===0||o===nt.Z_STREAM_END||n.avail_in===0&&(a===nt.Z_FINISH||a===nt.Z_SYNC_FLUSH))&&(this.options.to==="string"?(s=dc.utf8border(n.output,n.next_out),f=n.next_out-s,l=dc.buf2string(n.output,s),n.next_out=f,n.avail_out=r-f,f&&Al.arraySet(n.output,n.output,s,f,0),this.onData(l)):this.onData(Al.shrinkBuf(n.output,n.next_out))),n.avail_in===0&&n.avail_out===0&&(u=!0)}while((n.avail_in>0||n.avail_out===0)&&o!==nt.Z_STREAM_END);return o===nt.Z_STREAM_END&&(a=nt.Z_FINISH),a===nt.Z_FINISH?(o=sa.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===nt.Z_OK):(a===nt.Z_SYNC_FLUSH&&(this.onEnd(nt.Z_OK),n.avail_out=0),!0)},ao.prototype.onData=function(e){this.chunks.push(e)},ao.prototype.onEnd=function(e){e===nt.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Al.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function _p(e,t){var n=new ao(t);if(n.push(e,!0),n.err)throw n.msg||Ep[n.err];return n.result}function gL(e,t){return t=t||{},t.raw=!0,_p(e,t)}xl.Inflate=ao,xl.inflate=_p,xl.inflateRaw=gL,xl.ungzip=_p;var mL=ur.assign,bL=sl,yL=xl,wL=ZA,QA={};mL(QA,bL,yL,wL);var pc=QA;async function ai(e){try{let t,n=0,r=0;const i=[];let o=0,a;do{const f=e.subarray(n);if(a=new pc.Inflate,{strm:t}=a,a.push(f,pc.Z_SYNC_FLUSH),a.err)throw new Error(a.msg);n+=t.next_in,i[r]=a.result,o+=i[r].length,r+=1}while(t.avail_in);const s=new Uint8Array(o);for(let f=0,l=0;f<i.length;f++)s.set(i[f],l),l+=i[f].length;return ge.Buffer.from(s)}catch(t){throw`${t}`.match(/incorrect header check/)?new Error("problem decompressing block: incorrect gzip header check"):t}}async function XA(e,t){try{let n;const{minv:r,maxv:i}=t;let o=r.blockPosition,a=r.dataPosition;const s=[],f=[],l=[];let u=0,c=0;do{const p=e.subarray(o-r.blockPosition),m=new pc.Inflate;if({strm:n}=m,m.push(p,pc.Z_SYNC_FLUSH),m.err)throw new Error(m.msg);const y=m.result;s.push(y);let w=y.length;f.push(o),l.push(a),s.length===1&&r.dataPosition&&(s[0]=s[0].subarray(r.dataPosition),w=s[0].length);const A=o;if(o+=n.next_in,a+=w,A>=i.blockPosition){s[c]=s[c].subarray(0,i.blockPosition===r.blockPosition?i.dataPosition-r.dataPosition+1:i.dataPosition+1),f.push(o),l.push(a),u+=s[c].length;break}u+=s[c].length,c++}while(n.avail_in);const h=new Uint8Array(u);for(let p=0,m=0;p<s.length;p++)h.set(s[p],m),m+=s[p].length;return{buffer:ge.Buffer.from(h),cpositions:f,dpositions:l}}catch(n){throw`${n}`.match(/incorrect header check/)?new Error("problem decompressing block: incorrect gzip header check"):n}}var xL=Oe,fn=null;try{fn=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Oe(e,t,n){this.low=e|0,this.high=t|0,this.unsigned=!!n}Oe.prototype.__isLong__,Object.defineProperty(Oe.prototype,"__isLong__",{value:!0});function Gt(e){return(e&&e.__isLong__)===!0}Oe.isLong=Gt;var KA={},JA={};function so(e,t){var n,r,i;return t?(e>>>=0,(i=0<=e&&e<256)&&(r=JA[e],r)?r:(n=Le(e,(e|0)<0?-1:0,!0),i&&(JA[e]=n),n)):(e|=0,(i=-128<=e&&e<128)&&(r=KA[e],r)?r:(n=Le(e,e<0?-1:0,!1),i&&(KA[e]=n),n))}Oe.fromInt=so;function un(e,t){if(isNaN(e))return t?lo:cn;if(t){if(e<0)return lo;if(e>=t2)return a2}else{if(e<=-n2)return Ht;if(e+1>=n2)return o2}return e<0?un(-e,t).neg():Le(e%la|0,e/la|0,t)}Oe.fromNumber=un;function Le(e,t,n){return new Oe(e,t,n)}Oe.fromBits=Le;var gc=Math.pow;function Sp(e,t,n){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return cn;if(typeof t=="number"?(n=t,t=!1):t=!!t,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return Sp(e.substring(1),t,n).neg();for(var i=un(gc(n,8)),o=cn,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),f=parseInt(e.substring(a,a+s),n);if(s<8){var l=un(gc(n,s));o=o.mul(l).add(un(f))}else o=o.mul(i),o=o.add(un(f))}return o.unsigned=t,o}Oe.fromString=Sp;function Cn(e,t){return typeof e=="number"?un(e,t):typeof e=="string"?Sp(e,t):Le(e.low,e.high,typeof t=="boolean"?t:e.unsigned)}Oe.fromValue=Cn;var e2=65536,vL=1<<24,la=e2*e2,t2=la*la,n2=t2/2,r2=so(vL),cn=so(0);Oe.ZERO=cn;var lo=so(0,!0);Oe.UZERO=lo;var fa=so(1);Oe.ONE=fa;var i2=so(1,!0);Oe.UONE=i2;var Cp=so(-1);Oe.NEG_ONE=Cp;var o2=Le(-1,2147483647,!1);Oe.MAX_VALUE=o2;var a2=Le(-1,-1,!0);Oe.MAX_UNSIGNED_VALUE=a2;var Ht=Le(0,-2147483648,!1);Oe.MIN_VALUE=Ht;var Y=Oe.prototype;Y.toInt=function(){return this.unsigned?this.low>>>0:this.low},Y.toNumber=function(){return this.unsigned?(this.high>>>0)*la+(this.low>>>0):this.high*la+(this.low>>>0)},Y.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Ht)){var n=un(t),r=this.div(n),i=r.mul(n).sub(this);return r.toString(t)+i.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var o=un(gc(t,6),this.unsigned),a=this,s="";;){var f=a.div(o),l=a.sub(f.mul(o)).toInt()>>>0,u=l.toString(t);if(a=f,a.isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},Y.getHighBits=function(){return this.high},Y.getHighBitsUnsigned=function(){return this.high>>>0},Y.getLowBits=function(){return this.low},Y.getLowBitsUnsigned=function(){return this.low>>>0},Y.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ht)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,n=31;n>0&&!(t&1<<n);n--);return this.high!=0?n+33:n+1},Y.isZero=function(){return this.high===0&&this.low===0},Y.eqz=Y.isZero,Y.isNegative=function(){return!this.unsigned&&this.high<0},Y.isPositive=function(){return this.unsigned||this.high>=0},Y.isOdd=function(){return(this.low&1)===1},Y.isEven=function(){return(this.low&1)===0},Y.equals=function(t){return Gt(t)||(t=Cn(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low},Y.eq=Y.equals,Y.notEquals=function(t){return!this.eq(t)},Y.neq=Y.notEquals,Y.ne=Y.notEquals,Y.lessThan=function(t){return this.comp(t)<0},Y.lt=Y.lessThan,Y.lessThanOrEqual=function(t){return this.comp(t)<=0},Y.lte=Y.lessThanOrEqual,Y.le=Y.lessThanOrEqual,Y.greaterThan=function(t){return this.comp(t)>0},Y.gt=Y.greaterThan,Y.greaterThanOrEqual=function(t){return this.comp(t)>=0},Y.gte=Y.greaterThanOrEqual,Y.ge=Y.greaterThanOrEqual,Y.compare=function(t){if(Gt(t)||(t=Cn(t)),this.eq(t))return 0;var n=this.isNegative(),r=t.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},Y.comp=Y.compare,Y.negate=function(){return!this.unsigned&&this.eq(Ht)?Ht:this.not().add(fa)},Y.neg=Y.negate,Y.add=function(t){Gt(t)||(t=Cn(t));var n=this.high>>>16,r=this.high&65535,i=this.low>>>16,o=this.low&65535,a=t.high>>>16,s=t.high&65535,f=t.low>>>16,l=t.low&65535,u=0,c=0,h=0,d=0;return d+=o+l,h+=d>>>16,d&=65535,h+=i+f,c+=h>>>16,h&=65535,c+=r+s,u+=c>>>16,c&=65535,u+=n+a,u&=65535,Le(h<<16|d,u<<16|c,this.unsigned)},Y.subtract=function(t){return Gt(t)||(t=Cn(t)),this.add(t.neg())},Y.sub=Y.subtract,Y.multiply=function(t){if(this.isZero())return cn;if(Gt(t)||(t=Cn(t)),fn){var n=fn.mul(this.low,this.high,t.low,t.high);return Le(n,fn.get_high(),this.unsigned)}if(t.isZero())return cn;if(this.eq(Ht))return t.isOdd()?Ht:cn;if(t.eq(Ht))return this.isOdd()?Ht:cn;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(r2)&&t.lt(r2))return un(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,o=this.low>>>16,a=this.low&65535,s=t.high>>>16,f=t.high&65535,l=t.low>>>16,u=t.low&65535,c=0,h=0,d=0,p=0;return p+=a*u,d+=p>>>16,p&=65535,d+=o*u,h+=d>>>16,d&=65535,d+=a*l,h+=d>>>16,d&=65535,h+=i*u,c+=h>>>16,h&=65535,h+=o*l,c+=h>>>16,h&=65535,h+=a*f,c+=h>>>16,h&=65535,c+=r*u+i*l+o*f+a*s,c&=65535,Le(d<<16|p,c<<16|h,this.unsigned)},Y.mul=Y.multiply,Y.divide=function(t){if(Gt(t)||(t=Cn(t)),t.isZero())throw Error("division by zero");if(fn){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var n=(this.unsigned?fn.div_u:fn.div_s)(this.low,this.high,t.low,t.high);return Le(n,fn.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?lo:cn;var r,i,o;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return lo;if(t.gt(this.shru(1)))return i2;o=lo}else{if(this.eq(Ht)){if(t.eq(fa)||t.eq(Cp))return Ht;if(t.eq(Ht))return fa;var a=this.shr(1);return r=a.div(t).shl(1),r.eq(cn)?t.isNegative()?fa:Cp:(i=this.sub(t.mul(r)),o=r.add(i.div(t)),o)}else if(t.eq(Ht))return this.unsigned?lo:cn;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=cn}for(i=this;i.gte(t);){r=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(r)/Math.LN2),f=s<=48?1:gc(2,s-48),l=un(r),u=l.mul(t);u.isNegative()||u.gt(i);)r-=f,l=un(r,this.unsigned),u=l.mul(t);l.isZero()&&(l=fa),o=o.add(l),i=i.sub(u)}return o},Y.div=Y.divide,Y.modulo=function(t){if(Gt(t)||(t=Cn(t)),fn){var n=(this.unsigned?fn.rem_u:fn.rem_s)(this.low,this.high,t.low,t.high);return Le(n,fn.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},Y.mod=Y.modulo,Y.rem=Y.modulo,Y.not=function(){return Le(~this.low,~this.high,this.unsigned)},Y.and=function(t){return Gt(t)||(t=Cn(t)),Le(this.low&t.low,this.high&t.high,this.unsigned)},Y.or=function(t){return Gt(t)||(t=Cn(t)),Le(this.low|t.low,this.high|t.high,this.unsigned)},Y.xor=function(t){return Gt(t)||(t=Cn(t)),Le(this.low^t.low,this.high^t.high,this.unsigned)},Y.shiftLeft=function(t){return Gt(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Le(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Le(0,this.low<<t-32,this.unsigned)},Y.shl=Y.shiftLeft,Y.shiftRight=function(t){return Gt(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Le(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Le(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},Y.shr=Y.shiftRight,Y.shiftRightUnsigned=function(t){if(Gt(t)&&(t=t.toInt()),t&=63,t===0)return this;var n=this.high;if(t<32){var r=this.low;return Le(r>>>t|n<<32-t,n>>>t,this.unsigned)}else return t===32?Le(n,0,this.unsigned):Le(n>>>t-32,0,this.unsigned)},Y.shru=Y.shiftRightUnsigned,Y.shr_u=Y.shiftRightUnsigned,Y.toSigned=function(){return this.unsigned?Le(this.low,this.high,!1):this},Y.toUnsigned=function(){return this.unsigned?this:Le(this.low,this.high,!0)},Y.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},Y.toBytesLE=function(){var t=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]},Y.toBytesBE=function(){var t=this.high,n=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,n>>>24,n>>>16&255,n>>>8&255,n&255]},Oe.fromBytes=function(t,n,r){return r?Oe.fromBytesLE(t,n):Oe.fromBytesBE(t,n)},Oe.fromBytesLE=function(t,n){return new Oe(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,n)},Oe.fromBytesBE=function(t,n){return new Oe(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],n)};const mc=ol(xL),bc=1;class AL{constructor({filehandle:t,path:n}){if(t)this.filehandle=t;else if(n)this.filehandle=new dt(n);else throw new TypeError("either filehandle or path must be defined")}_readLongWithOverflow(t,n=0,r=!0){const i=mc.fromBytesLE(t.slice(n,n+8),r);if(i.greaterThan(Number.MAX_SAFE_INTEGER)||i.lessThan(Number.MIN_SAFE_INTEGER))throw new TypeError("integer overflow");return i.toNumber()}_getIndex(){return this.index||(this.index=this._readIndex()),this.index}async _readIndex(){let t=ge.Buffer.allocUnsafe(8);await this.filehandle.read(t,0,8,0);const n=this._readLongWithOverflow(t,0,!0);if(!n)return[[0,0]];const r=new Array(n+1);r[0]=[0,0];const i=8*2*n;if(i>Number.MAX_SAFE_INTEGER)throw new TypeError("integer overflow");t=ge.Buffer.allocUnsafe(i),await this.filehandle.read(t,0,i,8);for(let o=0;o<n;o+=1){const a=this._readLongWithOverflow(t,o*16),s=this._readLongWithOverflow(t,o*16+8);r[o+1]=[a,s]}return r}async getLastBlock(){const t=await this._getIndex();if(t.length)return t[t.length-1]}async getRelevantBlocksForRead(t,n){const r=n+t;if(t===0)return[];const i=await this._getIndex(),o=[],a=(h,d)=>{const p=h[bc],m=d?d[bc]:1/0;return p<=n&&m>n?0:p<n?-1:1};let s=0,f=i.length-1,l=Math.floor(i.length/2),u=a(i[l],i[l+1]);for(;u!==0;)u>0?f=l-1:u<0&&(s=l+1),l=Math.ceil((f-s)/2)+s,u=a(i[l],i[l+1]);o.push(i[l]);let c=l+1;for(;c<i.length&&(o.push(i[c]),!(i[c][bc]>=r));c+=1);return o[o.length-1][bc]<r&&o.push([]),o}}class s2{constructor({filehandle:t,path:n,gziFilehandle:r,gziPath:i}){if(t)this.filehandle=t;else if(n)this.filehandle=new dt(n);else throw new TypeError("either filehandle or path must be defined");if(!r&&!i&&!n)throw new TypeError("either gziFilehandle or gziPath must be defined");this.gzi=new AL({filehandle:r,path:!r&&!i&&n?i:`${n}.gzi`})}async stat(){const t=await this.filehandle.stat();return Object.assign(t,{size:await this.getUncompressedFileSize(),blocks:void 0,blksize:void 0})}async getUncompressedFileSize(){const[,t]=await this.gzi.getLastBlock(),{size:n}=await this.filehandle.stat(),r=ge.Buffer.allocUnsafe(4),{bytesRead:i}=await this.filehandle.read(r,0,4,n-28-4);if(i!==4)throw new Error("read error");const o=r.readUInt32LE(0);return t+o}async _readAndUncompressBlock(t,[n],[r]){let i=r;i||(i=(await this.filehandle.stat()).size);const o=i-n;return await this.filehandle.read(t,0,o,n),await ai(t.slice(0,o))}async read(t,n,r,i){const o=await this.gzi.getRelevantBlocksForRead(r,i),a=ge.Buffer.allocUnsafe(32768*2);let s=n,f=0;for(let l=0;l<o.length-1;l+=1){const u=await this._readAndUncompressBlock(a,o[l],o[l+1]),[,c]=o[l],h=c>=i?0:i-c,d=Math.min(i+r,c+u.length)-c;h>=0&&h<u.length&&(u.copy(t,s,h,d),s+=d-h,f+=d-h)}return{bytesRead:f,buffer:t}}}function l2(e,t){return e.offset+e.lineBytes*Math.floor(t/e.lineLength)+t%e.lineLength}async function EL(e,t){const n=await e.readFile(t);if(!(n&&n.length))throw new Error("No data read from FASTA index (FAI) file");let r=0,i;const o=n.toString("utf8").split(/\r?\n/).filter(a=>/\S/.test(a)).map(a=>a.split("	")).filter(a=>a[0]!=="").map(a=>((!i||i.name!==a[0])&&(i={name:a[0],id:r},r+=1),{id:i.id,name:a[0],length:+a[1],start:0,end:+a[1],offset:+a[2],lineLength:+a[3],lineBytes:+a[4]}));return{name:Object.fromEntries(o.map(a=>[a.name,a])),id:Object.fromEntries(o.map(a=>[a.id,a]))}}class f2{constructor({fasta:t,fai:n,path:r,faiPath:i,chunkSizeLimit:o=1e6}){if(t)this.fasta=t;else if(r)this.fasta=new dt(r);else throw new Error("Need to pass filehandle for fasta or path to localfile");if(n)this.fai=n;else if(i)this.fai=new dt(i);else if(r)this.fai=new dt(`${r}.fai`);else throw new Error("Need to pass filehandle for  or path to localfile");this.chunkSizeLimit=o}async _getIndexes(t){return this.indexes||(this.indexes=EL(this.fai,t)),this.indexes}async getSequenceNames(t){return Object.keys((await this._getIndexes(t)).name)}async getSequenceSizes(t){const n={},r=await this._getIndexes(t),i=Object.values(r.id);for(let o=0;o<i.length;o+=1)n[i[o].name]=i[o].length;return n}async getSequenceSize(t,n){var r;return(r=(await this._getIndexes(n)).name[t])===null||r===void 0?void 0:r.length}async hasReferenceSequence(t,n){return!!(await this._getIndexes(n)).name[t]}async getResiduesById(t,n,r,i){const o=(await this._getIndexes(i)).id[t];if(o)return this._fetchFromIndexEntry(o,n,r,i)}async getResiduesByName(t,n,r,i){const o=(await this._getIndexes(i)).name[t];if(o)return this._fetchFromIndexEntry(o,n,r,i)}async getSequence(t,n,r,i){return this.getResiduesByName(t,n,r,i)}async _fetchFromIndexEntry(t,n=0,r,i){let o=r;if(n<0)throw new TypeError("regionStart cannot be less than 0");if((o===void 0||o>t.length)&&(o=t.length),n>=o)return"";const a=l2(t,n),s=l2(t,o)-a;if(s>this.chunkSizeLimit)throw new Error(`data size of ${s.toLocaleString()} bytes exceeded chunk size limit of ${this.chunkSizeLimit.toLocaleString()} bytes`);const f=Buffer.allocUnsafe(s);return await this.fasta.read(f,0,s,a,i),f.toString("utf8").replace(/\s+/g,"")}}class _L extends f2{constructor({fasta:t,path:n,fai:r,faiPath:i,gzi:o,gziPath:a,chunkSizeLimit:s}){super({fasta:t,path:n,fai:r,faiPath:i,chunkSizeLimit:s}),t&&o?this.fasta=new s2({filehandle:t,gziFilehandle:o}):n&&a&&(this.fasta=new s2({path:n,gziPath:a}))}}function u2(e){return e.split(">").filter(t=>/\S/.test(t)).map(t=>{const[n,...r]=t.split(`
`),[i,...o]=n.split(" "),a=r.join("").replace(/\s/g,"");return{id:i,description:o.join(" "),sequence:a}})}class SL{constructor({fasta:t,path:n}){if(t)this.fasta=t;else if(n)this.fasta=new dt(n);else throw new Error("Need to pass fasta or path");this.data=this.fasta.readFile().then(r=>{const i=r.toString("utf8");return u2(i)})}async fetch(t,n,r){const o=(await this.data).find(s=>s.id===t),a=r-n;if(!o)throw new Error(`no sequence with id ${t} exists`);return o.sequence.substr(n,a)}async getSequenceNames(){return(await this.data).map(n=>n.id)}}const CL=Object.freeze(Object.defineProperty({__proto__:null,BgzipIndexedFasta:_L,FetchableSmallFasta:SL,IndexedFasta:f2,parseSmallFasta:u2},Symbol.toStringTag,{value:"Module"})),yc=BigInt(32);function kL(e,t,n){const r=+!!n,i=+!n;return BigInt(e.getInt32(t,n)*i+e.getInt32(t+4,n)*r)<<yc|BigInt(e.getUint32(t,n)*r+e.getUint32(t+4,n)*i)}function TL(e,t,n){const r=e.getUint32(t,n),i=e.getUint32(t+4,n),o=+!!n,a=+!n;return BigInt(r*a+i*o)<<yc|BigInt(r*o+i*a)}function IL(e,t,n,r){const i=Number(n>>yc),o=Number(n&BigInt(4294967295));r?(e.setInt32(t+4,i,r),e.setUint32(t,o,r)):(e.setInt32(t,i,r),e.setUint32(t+4,o,r))}function BL(e,t,n,r){const i=Number(n>>yc),o=Number(n&BigInt(4294967295));r?(e.setUint32(t+4,i,r),e.setUint32(t,o,r)):(e.setUint32(t,i,r),e.setUint32(t+4,o,r))}"getBigInt64"in DataView||(DataView.prototype.getBigInt64=function(e,t){return kL(this,e,t)}),"getBigUint64"in DataView||(DataView.prototype.getBigUint64=function(e,t){return TL(this,e,t)}),"setBigInt64"in DataView||(DataView.prototype.setBigInt64=function(e,t,n){IL(this,e,t,n)}),"setBigUint64"in DataView||(DataView.prototype.setBigUint64=function(e,t,n){BL(this,e,t,n)});class DL{constructor(t,n){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references=new Map,this.imports=[],this.reverseImports=new Map,this.useContextVariables=!1,this.importPath=t,this.useContextVariables=n}generateVariable(t){const n=[...this.scopes[this.scopes.length-1]];return t&&n.push(t),n.join(".")}generateOption(t){switch(typeof t){case"number":return t.toString();case"string":return this.generateVariable(t);case"function":return`${this.addImport(t)}.call(${this.generateVariable()}, vars)`}}generateError(t){this.pushCode(`throw new Error(${t});`)}generateTmpVariable(){return"$tmp"+this.tmpVariableCount++}pushCode(t){this.code+=t+`
`}pushPath(t){t&&this.scopes[this.scopes.length-1].push(t)}popPath(t){t&&this.scopes[this.scopes.length-1].pop()}pushScope(t){this.scopes.push([t])}popScope(){this.scopes.pop()}addImport(t){if(!this.importPath)return`(${t})`;let n=this.reverseImports.get(t);return n||(n=this.imports.push(t)-1,this.reverseImports.set(t,n)),`${this.importPath}[${n}]`}addReference(t){this.references.has(t)||this.references.set(t,{resolved:!1,requested:!1})}markResolved(t){const n=this.references.get(t);n&&(n.resolved=!0)}markRequested(t){t.forEach(n=>{const r=this.references.get(n);r&&(r.requested=!0)})}getUnresolvedReferences(){return Array.from(this.references).filter(([t,n])=>!n.resolved&&!n.requested).map(([t,n])=>t)}}const kn=new Map,fo="___parser_",Tn={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},wc={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},xc={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1};let Ie=class Rn{constructor(){this.varName="",this.type="",this.options={},this.endian="be",this.useContextVariables=!1}static start(){return new Rn}primitiveGenerateN(t,n){const r=wc[t],i=xc[t];n.pushCode(`${n.generateVariable(this.varName)} = dataView.get${r}(offset, ${i});`),n.pushCode(`offset += ${Tn[t]};`)}primitiveN(t,n,r){return this.setNextParser(t,n,r)}useThisEndian(t){return t+this.endian.toLowerCase()}uint8(t,n={}){return this.primitiveN("uint8",t,n)}uint16(t,n={}){return this.primitiveN(this.useThisEndian("uint16"),t,n)}uint16le(t,n={}){return this.primitiveN("uint16le",t,n)}uint16be(t,n={}){return this.primitiveN("uint16be",t,n)}uint32(t,n={}){return this.primitiveN(this.useThisEndian("uint32"),t,n)}uint32le(t,n={}){return this.primitiveN("uint32le",t,n)}uint32be(t,n={}){return this.primitiveN("uint32be",t,n)}int8(t,n={}){return this.primitiveN("int8",t,n)}int16(t,n={}){return this.primitiveN(this.useThisEndian("int16"),t,n)}int16le(t,n={}){return this.primitiveN("int16le",t,n)}int16be(t,n={}){return this.primitiveN("int16be",t,n)}int32(t,n={}){return this.primitiveN(this.useThisEndian("int32"),t,n)}int32le(t,n={}){return this.primitiveN("int32le",t,n)}int32be(t,n={}){return this.primitiveN("int32be",t,n)}bigIntVersionCheck(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported on this runtime")}int64(t,n={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),t,n)}int64be(t,n={}){return this.bigIntVersionCheck(),this.primitiveN("int64be",t,n)}int64le(t,n={}){return this.bigIntVersionCheck(),this.primitiveN("int64le",t,n)}uint64(t,n={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),t,n)}uint64be(t,n={}){return this.bigIntVersionCheck(),this.primitiveN("uint64be",t,n)}uint64le(t,n={}){return this.bigIntVersionCheck(),this.primitiveN("uint64le",t,n)}floatle(t,n={}){return this.primitiveN("floatle",t,n)}floatbe(t,n={}){return this.primitiveN("floatbe",t,n)}doublele(t,n={}){return this.primitiveN("doublele",t,n)}doublebe(t,n={}){return this.primitiveN("doublebe",t,n)}bitN(t,n,r){return r.length=t,this.setNextParser("bit",n,r)}bit1(t,n={}){return this.bitN(1,t,n)}bit2(t,n={}){return this.bitN(2,t,n)}bit3(t,n={}){return this.bitN(3,t,n)}bit4(t,n={}){return this.bitN(4,t,n)}bit5(t,n={}){return this.bitN(5,t,n)}bit6(t,n={}){return this.bitN(6,t,n)}bit7(t,n={}){return this.bitN(7,t,n)}bit8(t,n={}){return this.bitN(8,t,n)}bit9(t,n={}){return this.bitN(9,t,n)}bit10(t,n={}){return this.bitN(10,t,n)}bit11(t,n={}){return this.bitN(11,t,n)}bit12(t,n={}){return this.bitN(12,t,n)}bit13(t,n={}){return this.bitN(13,t,n)}bit14(t,n={}){return this.bitN(14,t,n)}bit15(t,n={}){return this.bitN(15,t,n)}bit16(t,n={}){return this.bitN(16,t,n)}bit17(t,n={}){return this.bitN(17,t,n)}bit18(t,n={}){return this.bitN(18,t,n)}bit19(t,n={}){return this.bitN(19,t,n)}bit20(t,n={}){return this.bitN(20,t,n)}bit21(t,n={}){return this.bitN(21,t,n)}bit22(t,n={}){return this.bitN(22,t,n)}bit23(t,n={}){return this.bitN(23,t,n)}bit24(t,n={}){return this.bitN(24,t,n)}bit25(t,n={}){return this.bitN(25,t,n)}bit26(t,n={}){return this.bitN(26,t,n)}bit27(t,n={}){return this.bitN(27,t,n)}bit28(t,n={}){return this.bitN(28,t,n)}bit29(t,n={}){return this.bitN(29,t,n)}bit30(t,n={}){return this.bitN(30,t,n)}bit31(t,n={}){return this.bitN(31,t,n)}bit32(t,n={}){return this.bitN(32,t,n)}namely(t){return kn.set(t,this),this.alias=t,this}skip(t,n={}){return this.seek(t,n)}seek(t,n={}){if(n.assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:t})}string(t,n){if(!n.zeroTerminated&&!n.length&&!n.greedy)throw new Error("One of length, zeroTerminated, or greedy must be defined for string.");if((n.zeroTerminated||n.length)&&n.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(n.stripNull&&!(n.length||n.greedy))throw new Error("length or greedy must be defined if stripNull is enabled.");return n.encoding=n.encoding||"utf8",this.setNextParser("string",t,n)}buffer(t,n){if(!n.length&&!n.readUntil)throw new Error("length or readUntil must be defined for buffer.");return this.setNextParser("buffer",t,n)}wrapped(t,n){if(typeof n!="object"&&typeof t=="object"&&(n=t,t=""),!n||!n.wrapper||!n.type)throw new Error("Both wrapper and type must be defined for wrapped.");if(!n.length&&!n.readUntil)throw new Error("length or readUntil must be defined for wrapped.");return this.setNextParser("wrapper",t,n)}array(t,n){if(!n.readUntil&&!n.length&&!n.lengthInBytes)throw new Error("One of readUntil, length and lengthInBytes must be defined for array.");if(!n.type)throw new Error("type is required for array.");if(typeof n.type=="string"&&!kn.has(n.type)&&!(n.type in Tn))throw new Error(`Array element type "${n.type}" is unkown.`);return this.setNextParser("array",t,n)}choice(t,n){if(typeof n!="object"&&typeof t=="object"&&(n=t,t=""),!n)throw new Error("tag and choices are are required for choice.");if(!n.tag)throw new Error("tag is requird for choice.");if(!n.choices)throw new Error("choices is required for choice.");for(const r in n.choices){const i=parseInt(r,10),o=n.choices[i];if(isNaN(i))throw new Error(`Choice key "${r}" is not a number.`);if(typeof o=="string"&&!kn.has(o)&&!(o in Tn))throw new Error(`Choice type "${o}" is unkown.`)}return this.setNextParser("choice",t,n)}nest(t,n){if(typeof n!="object"&&typeof t=="object"&&(n=t,t=""),!n||!n.type)throw new Error("type is required for nest.");if(!(n.type instanceof Rn)&&!kn.has(n.type))throw new Error("type must be a known parser name or a Parser object.");if(!(n.type instanceof Rn)&&!t)throw new Error("type must be a Parser object if the variable name is omitted.");return this.setNextParser("nest",t,n)}pointer(t,n){if(!n.offset)throw new Error("offset is required for pointer.");if(!n.type)throw new Error("type is required for pointer.");if(typeof n.type=="string"&&!(n.type in Tn)&&!kn.has(n.type))throw new Error(`Pointer type "${n.type}" is unkown.`);return this.setNextParser("pointer",t,n)}saveOffset(t,n={}){return this.setNextParser("saveOffset",t,n)}endianness(t){switch(t.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error('endianness must be one of "little" or "big"')}return this}endianess(t){return this.endianness(t)}useContextVars(t=!0){return this.useContextVariables=t,this}create(t){if(!(t instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=t,this}getContext(t){const n=new DL(t,this.useContextVariables);return n.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(n),n.pushCode(`return ${fo+this.alias}(0).result;`)):this.addRawCode(n),n}getCode(){const t="imports";return this.getContext(t).code}addRawCode(t){t.pushCode("var offset = 0;"),t.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),t.pushCode("vars.$parent = null;"),t.pushCode("vars.$root = vars;"),this.generate(t),this.resolveReferences(t),t.pushCode("delete vars.$parent;"),t.pushCode("delete vars.$root;"),t.pushCode("return vars;")}addAliasedCode(t){return t.pushCode(`function ${fo+this.alias}(offset, context) {`),t.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),t.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),t.pushCode("vars = Object.assign(vars, ctx);"),this.generate(t),t.markResolved(this.alias),this.resolveReferences(t),t.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),t.pushCode("return { offset: offset, result: vars };"),t.pushCode("}"),t}resolveReferences(t){const n=t.getUnresolvedReferences();t.markRequested(n),n.forEach(r=>{var i;(i=kn.get(r))===null||i===void 0||i.addAliasedCode(t)})}compile(){const t="imports",n=this.getContext(t);this.compiled=new Function(t,"TextDecoder",`return function (buffer, constructorFn) { ${n.code} };`)(n.imports,TextDecoder)}sizeOf(){let t=NaN;if(Object.keys(Tn).indexOf(this.type)>=0)t=Tn[this.type];else if(this.type==="string"&&typeof this.options.length=="number")t=this.options.length;else if(this.type==="buffer"&&typeof this.options.length=="number")t=this.options.length;else if(this.type==="array"&&typeof this.options.length=="number"){let n=NaN;typeof this.options.type=="string"?n=Tn[this.options.type]:this.options.type instanceof Rn&&(n=this.options.type.sizeOf()),t=this.options.length*n}else this.type==="seek"?t=this.options.length:this.type==="nest"?t=this.options.type.sizeOf():this.type||(t=0);return this.next&&(t+=this.next.sizeOf()),t}parse(t){return this.compiled||this.compile(),this.compiled(t,this.constructorFn)}setNextParser(t,n,r){const i=new Rn;return i.type=t,i.varName=n,i.options=r,i.endian=this.endian,this.head?this.head.next=i:this.next=i,this.head=i,this}generate(t){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,t);break;case"bit":this.generateBit(t);break;case"string":this.generateString(t);break;case"buffer":this.generateBuffer(t);break;case"seek":this.generateSeek(t);break;case"nest":this.generateNest(t);break;case"array":this.generateArray(t);break;case"choice":this.generateChoice(t);break;case"pointer":this.generatePointer(t);break;case"saveOffset":this.generateSaveOffset(t);break;case"wrapper":this.generateWrapper(t);break}this.type!=="bit"&&this.generateAssert(t)}const n=t.generateVariable(this.varName);return this.options.formatter&&this.type!=="bit"&&this.generateFormatter(t,n,this.options.formatter),this.generateNext(t)}generateAssert(t){if(!this.options.assert)return;const n=t.generateVariable(this.varName);switch(typeof this.options.assert){case"function":{const r=t.addImport(this.options.assert);t.pushCode(`if (!${r}.call(vars, ${n})) {`)}break;case"number":t.pushCode(`if (${this.options.assert} !== ${n}) {`);break;case"string":t.pushCode(`if (${JSON.stringify(this.options.assert)} !== ${n}) {`);break;default:throw new Error("assert option must be a string, number or a function.")}t.generateError(`"Assertion error: ${n} is " + ${JSON.stringify(this.options.assert.toString())}`),t.pushCode("}")}generateNext(t){return this.next&&(t=this.next.generate(t)),t}generateBit(t){const n=JSON.parse(JSON.stringify(this));if(n.options=this.options,n.generateAssert=this.generateAssert.bind(this),n.generateFormatter=this.generateFormatter.bind(this),n.varName=t.generateVariable(n.varName),t.bitFields.push(n),!this.next||this.next&&["bit","nest"].indexOf(this.next.type)<0){const r=t.generateTmpVariable();t.pushCode(`var ${r} = 0;`);const i=(u=0)=>{let c=0;for(let h=u;h<t.bitFields.length;h++){const d=t.bitFields[h].options.length;if(c+d>32)break;c+=d}return c},o=u=>(u<=8?(t.pushCode(`${r} = dataView.getUint8(offset);`),u=8):u<=16?(t.pushCode(`${r} = dataView.getUint16(offset);`),u=16):u<=24?(t.pushCode(`${r} = (dataView.getUint16(offset) << 8) | dataView.getUint8(offset + 2);`),u=24):(t.pushCode(`${r} = dataView.getUint32(offset);`),u=32),t.pushCode(`offset += ${u/8};`),u);let a=0;const s=this.endian==="be";let f=0,l=0;t.bitFields.forEach((u,c)=>{let h=u.options.length;if(h>l){if(l){const m=-1>>>32-l;t.pushCode(`${u.varName} = (${r} & 0x${m.toString(16)}) << ${h-l};`),h-=l}a=0,l=f=o(i(c)-l)}const d=s?f-a-h:a,p=-1>>>32-h;t.pushCode(`${u.varName} ${h<u.options.length?"|=":"="} ${r} >> ${d} & 0x${p.toString(16)};`),u.options.length===32&&t.pushCode(`${u.varName} >>>= 0`),u.options.assert&&u.generateAssert(t),u.options.formatter&&u.generateFormatter(t,u.varName,u.options.formatter),a+=h,l-=h}),t.bitFields=[]}}generateSeek(t){const n=t.generateOption(this.options.length);t.pushCode(`offset += ${n};`)}generateString(t){const n=t.generateVariable(this.varName),r=t.generateTmpVariable(),i=this.options.encoding,o=i.toLowerCase()==="hex",a='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){const s=this.options.length;t.pushCode(`var ${r} = offset;`),t.pushCode(`while(dataView.getUint8(offset++) !== 0 && offset - ${r} < ${s});`);const f=`offset - ${r} < ${s} ? offset - 1 : offset`;t.pushCode(o?`${n} = Array.from(buffer.subarray(${r}, ${f}), ${a}).join('');`:`${n} = new TextDecoder('${i}').decode(buffer.subarray(${r}, ${f}));`)}else if(this.options.length){const s=t.generateOption(this.options.length);t.pushCode(o?`${n} = Array.from(buffer.subarray(offset, offset + ${s}), ${a}).join('');`:`${n} = new TextDecoder('${i}').decode(buffer.subarray(offset, offset + ${s}));`),t.pushCode(`offset += ${s};`)}else this.options.zeroTerminated?(t.pushCode(`var ${r} = offset;`),t.pushCode("while(dataView.getUint8(offset++) !== 0);"),t.pushCode(o?`${n} = Array.from(buffer.subarray(${r}, offset - 1), ${a}).join('');`:`${n} = new TextDecoder('${i}').decode(buffer.subarray(${r}, offset - 1));`)):this.options.greedy&&(t.pushCode(`var ${r} = offset;`),t.pushCode("while(buffer.length > offset++);"),t.pushCode(o?`${n} = Array.from(buffer.subarray(${r}, offset), ${a}).join('');`:`${n} = new TextDecoder('${i}').decode(buffer.subarray(${r}, offset));`));this.options.stripNull&&t.pushCode(`${n} = ${n}.replace(/\\x00+$/g, '')`)}generateBuffer(t){const n=t.generateVariable(this.varName);if(typeof this.options.readUntil=="function"){const r=this.options.readUntil,i=t.generateTmpVariable(),o=t.generateTmpVariable();t.pushCode(`var ${i} = offset;`),t.pushCode(`var ${o} = 0;`),t.pushCode("while (offset < buffer.length) {"),t.pushCode(`${o} = dataView.getUint8(offset);`);const a=t.addImport(r);t.pushCode(`if (${a}.call(${t.generateVariable()}, ${o}, buffer.subarray(offset))) break;`),t.pushCode("offset += 1;"),t.pushCode("}"),t.pushCode(`${n} = buffer.subarray(${i}, offset);`)}else if(this.options.readUntil==="eof")t.pushCode(`${n} = buffer.subarray(offset);`);else{const r=t.generateOption(this.options.length);t.pushCode(`${n} = buffer.subarray(offset, offset + ${r});`),t.pushCode(`offset += ${r};`)}this.options.clone&&t.pushCode(`${n} = buffer.constructor.from(${n});`)}generateArray(t){const n=t.generateOption(this.options.length),r=t.generateOption(this.options.lengthInBytes),i=this.options.type,o=t.generateTmpVariable(),a=t.generateVariable(this.varName),s=t.generateTmpVariable(),f=this.options.key,l=typeof f=="string";if(l?t.pushCode(`${a} = {};`):t.pushCode(`${a} = [];`),typeof this.options.readUntil=="function"?t.pushCode("do {"):this.options.readUntil==="eof"?t.pushCode(`for (var ${o} = 0; offset < buffer.length; ${o}++) {`):r!==void 0?t.pushCode(`for (var ${o} = offset + ${r}; offset < ${o}; ) {`):t.pushCode(`for (var ${o} = ${n}; ${o} > 0; ${o}--) {`),typeof i=="string")if(kn.get(i)){const u=t.generateTmpVariable();if(t.pushCode(`var ${u} = ${fo+i}(offset, {`),t.useContextVariables){const c=t.generateVariable();t.pushCode(`$parent: ${c},`),t.pushCode(`$root: ${c}.$root,`),!this.options.readUntil&&r===void 0&&t.pushCode(`$index: ${n} - ${o},`)}t.pushCode("});"),t.pushCode(`var ${s} = ${u}.result; offset = ${u}.offset;`),i!==this.alias&&t.addReference(i)}else{const u=wc[i],c=xc[i];t.pushCode(`var ${s} = dataView.get${u}(offset, ${c});`),t.pushCode(`offset += ${Tn[i]};`)}else if(i instanceof Rn){t.pushCode(`var ${s} = {};`);const u=t.generateVariable();t.pushScope(s),t.useContextVariables&&(t.pushCode(`${s}.$parent = ${u};`),t.pushCode(`${s}.$root = ${u}.$root;`),!this.options.readUntil&&r===void 0&&t.pushCode(`${s}.$index = ${n} - ${o};`)),i.generate(t),t.useContextVariables&&(t.pushCode(`delete ${s}.$parent;`),t.pushCode(`delete ${s}.$root;`),t.pushCode(`delete ${s}.$index;`)),t.popScope()}if(l?t.pushCode(`${a}[${s}.${f}] = ${s};`):t.pushCode(`${a}.push(${s});`),t.pushCode("}"),typeof this.options.readUntil=="function"){const u=this.options.readUntil,c=t.addImport(u);t.pushCode(`while (!${c}.call(${t.generateVariable()}, ${s}, buffer.subarray(offset)));`)}}generateChoiceCase(t,n,r){if(typeof r=="string"){const i=t.generateVariable(this.varName);if(kn.has(r)){const o=t.generateTmpVariable();t.pushCode(`var ${o} = ${fo+r}(offset, {`),t.useContextVariables&&(t.pushCode(`$parent: ${i}.$parent,`),t.pushCode(`$root: ${i}.$root,`)),t.pushCode("});"),t.pushCode(`${i} = ${o}.result; offset = ${o}.offset;`),r!==this.alias&&t.addReference(r)}else{const o=wc[r],a=xc[r];t.pushCode(`${i} = dataView.get${o}(offset, ${a});`),t.pushCode(`offset += ${Tn[r]}`)}}else r instanceof Rn&&(t.pushPath(n),r.generate(t),t.popPath(n))}generateChoice(t){const n=t.generateOption(this.options.tag),r=t.generateVariable(this.varName);if(this.varName&&(t.pushCode(`${r} = {};`),t.useContextVariables)){const i=t.generateVariable();t.pushCode(`${r}.$parent = ${i};`),t.pushCode(`${r}.$root = ${i}.$root;`)}t.pushCode(`switch(${n}) {`);for(const i in this.options.choices){const o=parseInt(i,10),a=this.options.choices[o];t.pushCode(`case ${o}:`),this.generateChoiceCase(t,this.varName,a),t.pushCode("break;")}t.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(t,this.varName,this.options.defaultChoice):t.generateError(`"Met undefined tag value " + ${n} + " at choice"`),t.pushCode("}"),this.varName&&t.useContextVariables&&(t.pushCode(`delete ${r}.$parent;`),t.pushCode(`delete ${r}.$root;`))}generateNest(t){const n=t.generateVariable(this.varName);if(this.options.type instanceof Rn){if(this.varName&&(t.pushCode(`${n} = {};`),t.useContextVariables)){const r=t.generateVariable();t.pushCode(`${n}.$parent = ${r};`),t.pushCode(`${n}.$root = ${r}.$root;`)}t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName),this.varName&&t.useContextVariables&&t.useContextVariables&&(t.pushCode(`delete ${n}.$parent;`),t.pushCode(`delete ${n}.$root;`))}else if(kn.has(this.options.type)){const r=t.generateTmpVariable();if(t.pushCode(`var ${r} = ${fo+this.options.type}(offset, {`),t.useContextVariables){const i=t.generateVariable();t.pushCode(`$parent: ${i},`),t.pushCode(`$root: ${i}.$root,`)}t.pushCode("});"),t.pushCode(`${n} = ${r}.result; offset = ${r}.offset;`),this.options.type!==this.alias&&t.addReference(this.options.type)}}generateWrapper(t){const n=t.generateVariable(this.varName),r=t.generateTmpVariable();if(typeof this.options.readUntil=="function"){const f=this.options.readUntil,l=t.generateTmpVariable(),u=t.generateTmpVariable();t.pushCode(`var ${l} = offset;`),t.pushCode(`var ${u} = 0;`),t.pushCode("while (offset < buffer.length) {"),t.pushCode(`${u} = dataView.getUint8(offset);`);const c=t.addImport(f);t.pushCode(`if (${c}.call(${t.generateVariable()}, ${u}, buffer.subarray(offset))) break;`),t.pushCode("offset += 1;"),t.pushCode("}"),t.pushCode(`${r} = buffer.subarray(${l}, offset);`)}else if(this.options.readUntil==="eof")t.pushCode(`${r} = buffer.subarray(offset);`);else{const f=t.generateOption(this.options.length);t.pushCode(`${r} = buffer.subarray(offset, offset + ${f});`),t.pushCode(`offset += ${f};`)}this.options.clone&&t.pushCode(`${r} = buffer.constructor.from(${r});`);const i=t.generateTmpVariable(),o=t.generateTmpVariable(),a=t.generateTmpVariable(),s=t.addImport(this.options.wrapper);if(t.pushCode(`${r} = ${s}.call(this, ${r}).subarray(0);`),t.pushCode(`var ${i} = buffer;`),t.pushCode(`var ${o} = offset;`),t.pushCode(`var ${a} = dataView;`),t.pushCode(`buffer = ${r};`),t.pushCode("offset = 0;"),t.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof Rn)this.varName&&t.pushCode(`${n} = {};`),t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName);else if(kn.has(this.options.type)){const f=t.generateTmpVariable();t.pushCode(`var ${f} = ${fo+this.options.type}(0);`),t.pushCode(`${n} = ${f}.result;`),this.options.type!==this.alias&&t.addReference(this.options.type)}t.pushCode(`buffer = ${i};`),t.pushCode(`dataView = ${a};`),t.pushCode(`offset = ${o};`)}generateFormatter(t,n,r){if(typeof r=="function"){const i=t.addImport(r);t.pushCode(`${n} = ${i}.call(${t.generateVariable()}, ${n});`)}}generatePointer(t){const n=this.options.type,r=t.generateOption(this.options.offset),i=t.generateTmpVariable(),o=t.generateVariable(this.varName);if(t.pushCode(`var ${i} = offset;`),t.pushCode(`offset = ${r};`),this.options.type instanceof Rn){if(t.pushCode(`${o} = {};`),t.useContextVariables){const a=t.generateVariable();t.pushCode(`${o}.$parent = ${a};`),t.pushCode(`${o}.$root = ${a}.$root;`)}t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName),t.useContextVariables&&(t.pushCode(`delete ${o}.$parent;`),t.pushCode(`delete ${o}.$root;`))}else if(kn.has(this.options.type)){const a=t.generateTmpVariable();if(t.pushCode(`var ${a} = ${fo+this.options.type}(offset, {`),t.useContextVariables){const s=t.generateVariable();t.pushCode(`$parent: ${s},`),t.pushCode(`$root: ${s}.$root,`)}t.pushCode("});"),t.pushCode(`${o} = ${a}.result; offset = ${a}.offset;`),this.options.type!==this.alias&&t.addReference(this.options.type)}else if(Object.keys(Tn).indexOf(this.options.type)>=0){const a=wc[n],s=xc[n];t.pushCode(`${o} = dataView.get${a}(offset, ${s});`),t.pushCode(`offset += ${Tn[n]};`)}t.pushCode(`offset = ${i};`)}generateSaveOffset(t){const n=t.generateVariable(this.varName);t.pushCode(`${n} = offset`)}};var c2={},kp={},uo={},El={};Object.defineProperty(El,"__esModule",{value:!0});function Tp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ip(e,t,n){return t&&h2(e.prototype,t),n&&h2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function FL(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bp(e,t)}function ua(e){return ua=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ua(e)}function Bp(e,t){return Bp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Bp(e,t)}function RL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _l(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ML(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _l(e)}function PL(e){var t=RL();return function(){var r=ua(e),i;if(t){var o=ua(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return ML(this,i)}}function OL(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=ua(e),e!==null););return e}function vc(){return typeof Reflect<"u"&&Reflect.get?vc=Reflect.get.bind():vc=function(t,n,r){var i=OL(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(arguments.length<3?t:r):o.value}},vc.apply(this,arguments)}var d2=function(){function e(){Tp(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return Ip(e,[{key:"addEventListener",value:function(n,r,i){n in this.listeners||(this.listeners[n]=[]),this.listeners[n].push({callback:r,options:i})}},{key:"removeEventListener",value:function(n,r){if(n in this.listeners){for(var i=this.listeners[n],o=0,a=i.length;o<a;o++)if(i[o].callback===r){i.splice(o,1);return}}}},{key:"dispatchEvent",value:function(n){if(n.type in this.listeners){for(var r=this.listeners[n.type],i=r.slice(),o=0,a=i.length;o<a;o++){var s=i[o];try{s.callback.call(this,n)}catch(f){Promise.resolve().then(function(){throw f})}s.options&&s.options.once&&this.removeEventListener(n.type,s.callback)}return!n.defaultPrevented}}}]),e}(),Dp=function(e){FL(n,e);var t=PL(n);function n(){var r;return Tp(this,n),r=t.call(this),r.listeners||d2.call(_l(r)),Object.defineProperty(_l(r),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(_l(r),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(_l(r),"reason",{value:void 0,writable:!0,configurable:!0}),r}return Ip(n,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(i){i.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,i)),vc(ua(n.prototype),"dispatchEvent",this).call(this,i)}}]),n}(d2),p2=function(){function e(){Tp(this,e),Object.defineProperty(this,"signal",{value:new Dp,writable:!0,configurable:!0})}return Ip(e,[{key:"abort",value:function(n){var r;try{r=new Event("abort")}catch{typeof document<"u"?document.createEvent?(r=document.createEvent("Event"),r.initEvent("abort",!1,!1)):(r=document.createEventObject(),r.type="abort"):r={type:"abort",bubbles:!1,cancelable:!1}}var i=n;if(i===void 0)if(typeof document>"u")i=new Error("This operation was aborted"),i.name="AbortError";else try{i=new DOMException("signal is aborted without reason")}catch{i=new Error("This operation was aborted"),i.name="AbortError"}this.signal.reason=i,this.signal.dispatchEvent(r)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();typeof Symbol<"u"&&Symbol.toStringTag&&(p2.prototype[Symbol.toStringTag]="AbortController",Dp.prototype[Symbol.toStringTag]="AbortSignal");function LL(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof e.Request=="function"&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}function NL(e){typeof e=="function"&&(e={fetch:e});var t=e,n=t.fetch,r=t.Request,i=r===void 0?n.Request:r,o=t.AbortController,a=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,s=a===void 0?!1:a;if(!LL({fetch:n,Request:i,AbortController:o,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:s}))return{fetch:n,Request:f};var f=i;(f&&!f.prototype.hasOwnProperty("signal")||s)&&(f=function(h,d){var p;d&&d.signal&&(p=d.signal,delete d.signal);var m=new i(h,d);return p&&Object.defineProperty(m,"signal",{writable:!1,enumerable:!1,configurable:!0,value:p}),m},f.prototype=i.prototype);var l=n,u=function(h,d){var p=f&&f.prototype.isPrototypeOf(h)?h.signal:d?d.signal:void 0;if(p){var m;try{m=new DOMException("Aborted","AbortError")}catch{m=new Error("Aborted"),m.name="AbortError"}if(p.aborted)return Promise.reject(m);var y=new Promise(function(w,A){p.addEventListener("abort",function(){return A(m)},{once:!0})});return d&&d.signal&&delete d.signal,Promise.race([y,l(h,d)])}return l(h,d)};return{fetch:u,Request:f}}El.AbortController=p2,El.AbortSignal=Dp,El.abortableFetch=NL,Object.defineProperty(uo,"__esModule",{value:!0}),uo.AbortSignal=uo.AbortController=void 0;const g2=El;var Ac=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof rn<"u")return rn;throw new Error("unable to locate global object")};let zL=typeof Ac().AbortController>"u"?g2.AbortController:Ac().AbortController;uo.AbortController=zL;let UL=typeof Ac().AbortController>"u"?g2.AbortSignal:Ac().AbortSignal;uo.AbortSignal=UL;var Fp={};Object.defineProperty(Fp,"__esModule",{value:!0});const GL=uo;class HL{}class VL{constructor(){this.signals=new Set,this.abortController=new GL.AbortController}addSignal(t=new HL){if(this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(t),t.aborted?this.handleAborted(t):typeof t.addEventListener=="function"&&t.addEventListener("abort",()=>{this.handleAborted(t)})}handleAborted(t){this.signals.delete(t),this.signals.size===0&&this.abortController.abort()}get signal(){return this.abortController.signal}abort(){this.abortController.abort()}}Fp.default=VL;var Rp={};Object.defineProperty(Rp,"__esModule",{value:!0});class jL{constructor(){this.callbacks=new Set}addCallback(t=()=>{}){this.callbacks.add(t),t(this.currentMessage)}callback(t){this.currentMessage=t,this.callbacks.forEach(n=>{n(t)})}}Rp.default=jL;var m2=rn&&rn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kp,"__esModule",{value:!0});const $L=uo,qL=m2(Fp),WL=m2(Rp);class Ec{constructor({fill:t,cache:n}){if(typeof t!="function")throw new TypeError("must pass a fill function");if(typeof n!="object")throw new TypeError("must pass a cache object");if(typeof n.get!="function"||typeof n.set!="function"||typeof n.delete!="function")throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=n,this.fillCallback=t}static isAbortException(t){return t.name==="AbortError"||t.code==="ERR_ABORTED"||t.message==="AbortError: aborted"||t.message==="Error: aborted"}evict(t,n){this.cache.get(t)===n&&this.cache.delete(t)}fill(t,n,r,i){const o=new qL.default,a=new WL.default;a.addCallback(i);const s={aborter:o,promise:this.fillCallback(n,o.signal,f=>{a.callback(f)}),settled:!1,statusReporter:a,get aborted(){return this.aborter.signal.aborted}};s.aborter.addSignal(r),s.aborter.signal.addEventListener("abort",()=>{s.settled||this.evict(t,s)}),s.promise.then(()=>{s.settled=!0},()=>{s.settled=!0,this.evict(t,s)}).catch(f=>{throw console.error(f),f}),this.cache.set(t,s)}static checkSinglePromise(t,n){function r(){if(n&&n.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return t.then(i=>(r(),i),i=>{throw r(),i})}has(t){return this.cache.has(t)}get(t,n,r,i){if(!r&&n instanceof $L.AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");const o=this.cache.get(t);return o?o.aborted&&!o.settled?(this.evict(t,o),this.get(t,n,r,i)):o.settled?o.promise:(o.aborter.addSignal(r),o.statusReporter.addCallback(i),Ec.checkSinglePromise(o.promise,r)):(this.fill(t,n,r,i),Ec.checkSinglePromise(this.cache.get(t).promise,r))}delete(t){const n=this.cache.get(t);n&&(n.settled||n.aborter.abort(),this.cache.delete(t))}clear(){const t=this.cache.keys();let n=0;for(let r=t.next();!r.done;r=t.next())this.delete(r.value),n+=1;return n}}kp.default=Ec;var ZL=rn&&rn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(c2,"__esModule",{value:!0});const YL=ZL(kp);var _c=c2.default=YL.default;class QL{constructor(t={}){if(!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(t,n){this.cache.set(t,n),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t)){const n=this.oldCache.get(t);return this.oldCache.delete(t),this._set(t,n),n}}set(t,n){return this.cache.has(t)?this.cache.set(t,n):this._set(t,n),this}has(t){return this.cache.has(t)||this.oldCache.has(t)}peek(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t))return this.oldCache.get(t)}delete(t){const n=this.cache.delete(t);return n&&this._size--,this.oldCache.delete(t)||n}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache)yield t;for(const t of this.oldCache){const[n]=t;this.cache.has(n)||(yield t)}}get size(){let t=0;for(const n of this.oldCache.keys())this.cache.has(n)||t++;return this._size+t}}var XL=QL;const Sc=ol(XL);class si{constructor(t,n){this.ranges=arguments.length===2?[{min:t,max:n}]:0 in t?Object.assign({},t):[t]}min(){return this.ranges[0].min}max(){return this.ranges[this.ranges.length-1].max}contains(t){for(let n=0;n<this.ranges.length;n+=1){const r=this.ranges[n];if(r.min<=t&&r.max>=t)return!0}return!1}isContiguous(){return this.ranges.length>1}getRanges(){return this.ranges.map(t=>new si(t.min,t.max))}toString(){return this.ranges.map(t=>`[${t.min}-${t.max}]`).join(",")}union(t){const n=this.getRanges().concat(t.getRanges()).sort(this.rangeOrder),r=[];let i=n[0];for(let o=1;o<n.length;o+=1){const a=n[o];a.min()>i.max()+1?(r.push(i),i=a):a.max()>i.max()&&(i=new si(i.min(),a.max()))}return r.push(i),r.length===1?r[0]:new si(r)}intersection(t){let n=this,r=t;const i=this.ranges(),o=r.ranges(),a=i.length,s=o.length;let f=0,l=0;const u=[];for(;f<a&&l<s;){n=i[f],r=o[l];const c=Math.max(n.min(),r.min()),h=Math.min(n.max(),r.max());h>=c&&u.push(new si(c,h)),n.max()>r.max()?l+=1:f+=1}if(u.length===0)throw new Error("found range of length 0");return u.length===1?u[0]:new si(u)}coverage(){let t=0;const n=this.ranges();for(const r of n)t+=r.max()-r.min()+1;return t}rangeOrder(t,n){let r=t,i=n;return arguments.length<2&&(i=r,r=this),r.min()<i.min()?-1:r.min()>i.min()?1:r.max()<i.max()?-1:i.max()>r.max()?1:0}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const KL=4,b2=0,y2=1,JL=2;function ca(e){let t=e.length;for(;--t>=0;)e[t]=0}const eN=0,w2=1,tN=2,nN=3,rN=258,Mp=29,Sl=256,Cl=Sl+1+Mp,ha=30,Pp=19,x2=2*Cl+1,co=15,Op=16,iN=7,Lp=256,v2=16,A2=17,E2=18,Np=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Cc=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),oN=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),_2=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),aN=512,dr=new Array((Cl+2)*2);ca(dr);const kl=new Array(ha*2);ca(kl);const Tl=new Array(aN);ca(Tl);const Il=new Array(rN-nN+1);ca(Il);const zp=new Array(Mp);ca(zp);const kc=new Array(ha);ca(kc);function Up(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let S2,C2,k2;function Gp(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const T2=e=>e<256?Tl[e]:Tl[256+(e>>>7)],Bl=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},Vt=(e,t,n)=>{e.bi_valid>Op-n?(e.bi_buf|=t<<e.bi_valid&65535,Bl(e,e.bi_buf),e.bi_buf=t>>Op-e.bi_valid,e.bi_valid+=n-Op):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Yn=(e,t,n)=>{Vt(e,n[t*2],n[t*2+1])},I2=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},sN=e=>{e.bi_valid===16?(Bl(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},lN=(e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,f=t.stat_desc.max_length;let l,u,c,h,d,p,m=0;for(h=0;h<=co;h++)e.bl_count[h]=0;for(n[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<x2;l++)u=e.heap[l],h=n[n[u*2+1]*2+1]+1,h>f&&(h=f,m++),n[u*2+1]=h,!(u>r)&&(e.bl_count[h]++,d=0,u>=s&&(d=a[u-s]),p=n[u*2],e.opt_len+=p*(h+d),o&&(e.static_len+=p*(i[u*2+1]+d)));if(m!==0){do{for(h=f-1;e.bl_count[h]===0;)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[f]--,m-=2}while(m>0);for(h=f;h!==0;h--)for(u=e.bl_count[h];u!==0;)c=e.heap[--l],!(c>r)&&(n[c*2+1]!==h&&(e.opt_len+=(h-n[c*2+1])*n[c*2],n[c*2+1]=h),u--)}},B2=(e,t,n)=>{const r=new Array(co+1);let i=0,o,a;for(o=1;o<=co;o++)i=i+n[o-1]<<1,r[o]=i;for(a=0;a<=t;a++){let s=e[a*2+1];s!==0&&(e[a*2]=I2(r[s]++,s))}},fN=()=>{let e,t,n,r,i;const o=new Array(co+1);for(n=0,r=0;r<Mp-1;r++)for(zp[r]=n,e=0;e<1<<Np[r];e++)Il[n++]=r;for(Il[n-1]=r,i=0,r=0;r<16;r++)for(kc[r]=i,e=0;e<1<<Cc[r];e++)Tl[i++]=r;for(i>>=7;r<ha;r++)for(kc[r]=i<<7,e=0;e<1<<Cc[r]-7;e++)Tl[256+i++]=r;for(t=0;t<=co;t++)o[t]=0;for(e=0;e<=143;)dr[e*2+1]=8,e++,o[8]++;for(;e<=255;)dr[e*2+1]=9,e++,o[9]++;for(;e<=279;)dr[e*2+1]=7,e++,o[7]++;for(;e<=287;)dr[e*2+1]=8,e++,o[8]++;for(B2(dr,Cl+1,o),e=0;e<ha;e++)kl[e*2+1]=5,kl[e*2]=I2(e,5);S2=new Up(dr,Np,Sl+1,Cl,co),C2=new Up(kl,Cc,0,ha,co),k2=new Up(new Array(0),oN,0,Pp,iN)},D2=e=>{let t;for(t=0;t<Cl;t++)e.dyn_ltree[t*2]=0;for(t=0;t<ha;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Pp;t++)e.bl_tree[t*2]=0;e.dyn_ltree[Lp*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},F2=e=>{e.bi_valid>8?Bl(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},R2=(e,t,n,r)=>{const i=t*2,o=n*2;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]},Hp=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&R2(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!R2(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},M2=(e,t,n)=>{let r,i,o=0,a,s;if(e.sym_next!==0)do r=e.pending_buf[e.sym_buf+o++]&255,r+=(e.pending_buf[e.sym_buf+o++]&255)<<8,i=e.pending_buf[e.sym_buf+o++],r===0?Yn(e,i,t):(a=Il[i],Yn(e,a+Sl+1,t),s=Np[a],s!==0&&(i-=zp[a],Vt(e,i,s)),r--,a=T2(r),Yn(e,a,n),s=Cc[a],s!==0&&(r-=kc[a],Vt(e,r,s)));while(o<e.sym_next);Yn(e,Lp,t)},Vp=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems;let a,s,f=-1,l;for(e.heap_len=0,e.heap_max=x2,a=0;a<o;a++)n[a*2]!==0?(e.heap[++e.heap_len]=f=a,e.depth[a]=0):n[a*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=f<2?++f:0,n[l*2]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=r[l*2+1]);for(t.max_code=f,a=e.heap_len>>1;a>=1;a--)Hp(e,n,a);l=o;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Hp(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=s,n[l*2]=n[a*2]+n[s*2],e.depth[l]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1,n[a*2+1]=n[s*2+1]=l,e.heap[1]=l++,Hp(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],lN(e,t),B2(n,f,e.bl_count)},P2=(e,t,n)=>{let r,i=-1,o,a=t[0*2+1],s=0,f=7,l=4;for(a===0&&(f=138,l=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)o=a,a=t[(r+1)*2+1],!(++s<f&&o===a)&&(s<l?e.bl_tree[o*2]+=s:o!==0?(o!==i&&e.bl_tree[o*2]++,e.bl_tree[v2*2]++):s<=10?e.bl_tree[A2*2]++:e.bl_tree[E2*2]++,s=0,i=o,a===0?(f=138,l=3):o===a?(f=6,l=3):(f=7,l=4))},O2=(e,t,n)=>{let r,i=-1,o,a=t[0*2+1],s=0,f=7,l=4;for(a===0&&(f=138,l=3),r=0;r<=n;r++)if(o=a,a=t[(r+1)*2+1],!(++s<f&&o===a)){if(s<l)do Yn(e,o,e.bl_tree);while(--s!==0);else o!==0?(o!==i&&(Yn(e,o,e.bl_tree),s--),Yn(e,v2,e.bl_tree),Vt(e,s-3,2)):s<=10?(Yn(e,A2,e.bl_tree),Vt(e,s-3,3)):(Yn(e,E2,e.bl_tree),Vt(e,s-11,7));s=0,i=o,a===0?(f=138,l=3):o===a?(f=6,l=3):(f=7,l=4)}},uN=e=>{let t;for(P2(e,e.dyn_ltree,e.l_desc.max_code),P2(e,e.dyn_dtree,e.d_desc.max_code),Vp(e,e.bl_desc),t=Pp-1;t>=3&&e.bl_tree[_2[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},cN=(e,t,n,r)=>{let i;for(Vt(e,t-257,5),Vt(e,n-1,5),Vt(e,r-4,4),i=0;i<r;i++)Vt(e,e.bl_tree[_2[i]*2+1],3);O2(e,e.dyn_ltree,t-1),O2(e,e.dyn_dtree,n-1)},hN=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return b2;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return y2;for(n=32;n<Sl;n++)if(e.dyn_ltree[n*2]!==0)return y2;return b2};let L2=!1;const dN=e=>{L2||(fN(),L2=!0),e.l_desc=new Gp(e.dyn_ltree,S2),e.d_desc=new Gp(e.dyn_dtree,C2),e.bl_desc=new Gp(e.bl_tree,k2),e.bi_buf=0,e.bi_valid=0,D2(e)},N2=(e,t,n,r)=>{Vt(e,(eN<<1)+(r?1:0),3),F2(e),Bl(e,n),Bl(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},pN=e=>{Vt(e,w2<<1,3),Yn(e,Lp,dr),sN(e)},gN=(e,t,n,r)=>{let i,o,a=0;e.level>0?(e.strm.data_type===JL&&(e.strm.data_type=hN(e)),Vp(e,e.l_desc),Vp(e,e.d_desc),a=uN(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&t!==-1?N2(e,t,n,r):e.strategy===KL||o===i?(Vt(e,(w2<<1)+(r?1:0),3),M2(e,dr,kl)):(Vt(e,(tN<<1)+(r?1:0),3),cN(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),M2(e,e.dyn_ltree,e.dyn_dtree)),D2(e),r&&F2(e)},mN=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(Il[n]+Sl+1)*2]++,e.dyn_dtree[T2(t)*2]++),e.sym_next===e.sym_end);var bN=dN,yN=N2,wN=gN,xN=mN,vN=pN,AN={_tr_init:bN,_tr_stored_block:yN,_tr_flush_block:wN,_tr_tally:xN,_tr_align:vN},Dl=(e,t,n,r)=>{let i=e&65535|0,o=e>>>16&65535|0,a=0;for(;n!==0;){a=n>2e3?2e3:n,n-=a;do i=i+t[r++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0};const EN=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},_N=new Uint32Array(EN());var pt=(e,t,n,r)=>{const i=_N,o=r+n;e^=-1;for(let a=r;a<o;a++)e=e>>>8^i[(e^t[a])&255];return e^-1},da={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Fl={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:SN,_tr_stored_block:jp,_tr_flush_block:CN,_tr_tally:li,_tr_align:kN}=AN,{Z_NO_FLUSH:fi,Z_PARTIAL_FLUSH:TN,Z_FULL_FLUSH:IN,Z_FINISH:hn,Z_BLOCK:z2,Z_OK:xt,Z_STREAM_END:U2,Z_STREAM_ERROR:Qn,Z_DATA_ERROR:BN,Z_BUF_ERROR:$p,Z_DEFAULT_COMPRESSION:DN,Z_FILTERED:FN,Z_HUFFMAN_ONLY:Tc,Z_RLE:RN,Z_FIXED:MN,Z_DEFAULT_STRATEGY:PN,Z_UNKNOWN:ON,Z_DEFLATED:Ic}=Fl,LN=9,NN=15,zN=8,UN=29,qp=256+1+UN,GN=30,HN=19,VN=2*qp+1,jN=15,de=3,ui=258,Xn=ui+de+1,$N=32,pa=42,Wp=57,Zp=69,Yp=73,Qp=91,Xp=103,ho=113,Rl=666,Dt=1,ga=2,po=3,ma=4,qN=3,go=(e,t)=>(e.msg=da[t],t),G2=e=>e*2-(e>4?9:0),ci=e=>{let t=e.length;for(;--t>=0;)e[t]=0},WN=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do n=e.head[--r],e.head[r]=n>=i?n-i:0;while(--t);t=i,r=t;do n=e.prev[--r],e.prev[r]=n>=i?n-i:0;while(--t)};let hi=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const Qt=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},Xt=(e,t)=>{CN(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Qt(e.strm)},Ae=(e,t)=>{e.pending_buf[e.pending++]=t},Ml=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},Kp=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),e.state.wrap===1?e.adler=Dl(e.adler,t,i,n):e.state.wrap===2&&(e.adler=pt(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},H2=(e,t)=>{let n=e.max_chain_length,r=e.strstart,i,o,a=e.prev_length,s=e.nice_match;const f=e.strstart>e.w_size-Xn?e.strstart-(e.w_size-Xn):0,l=e.window,u=e.w_mask,c=e.prev,h=e.strstart+ui;let d=l[r+a-1],p=l[r+a];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do if(i=t,!(l[i+a]!==p||l[i+a-1]!==d||l[i]!==l[r]||l[++i]!==l[r+1])){r+=2,i++;do;while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<h);if(o=ui-(h-r),r=h-ui,o>a){if(e.match_start=t,a=o,o>=s)break;d=l[r+a-1],p=l[r+a]}}while((t=c[t&u])>f&&--n!==0);return a<=e.lookahead?a:e.lookahead},ba=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Xn)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),WN(e),r+=t),e.strm.avail_in===0)break;if(n=Kp(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=de)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=hi(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=hi(e,e.ins_h,e.window[i+de-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<de)););}while(e.lookahead<Xn&&e.strm.avail_in!==0)},V2=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,i,o,a=0,s=e.strm.avail_in;do{if(r=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o||(o=e.strm.avail_out-o,i=e.strstart-e.block_start,r>i+e.strm.avail_in&&(r=i+e.strm.avail_in),r>o&&(r=o),r<n&&(r===0&&t!==hn||t===fi||r!==i+e.strm.avail_in)))break;a=t===hn&&r===i+e.strm.avail_in?1:0,jp(e,0,0,a),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,Qt(e.strm),i&&(i>r&&(i=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,r-=i),r&&(Kp(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(a===0);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?ma:t!==fi&&t!==hn&&e.strm.avail_in===0&&e.strstart===e.block_start?ga:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(Kp(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,n=o>e.w_size?e.w_size:o,i=e.strstart-e.block_start,(i>=n||(i||t===hn)&&t!==fi&&e.strm.avail_in===0&&i<=o)&&(r=i>o?o:i,a=t===hn&&e.strm.avail_in===0&&r===i?1:0,jp(e,e.block_start,r,a),e.block_start+=r,Qt(e.strm)),a?po:Dt)},Jp=(e,t)=>{let n,r;for(;;){if(e.lookahead<Xn){if(ba(e),e.lookahead<Xn&&t===fi)return Dt;if(e.lookahead===0)break}if(n=0,e.lookahead>=de&&(e.ins_h=hi(e,e.ins_h,e.window[e.strstart+de-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-Xn&&(e.match_length=H2(e,n)),e.match_length>=de)if(r=li(e,e.strstart-e.match_start,e.match_length-de),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=de){e.match_length--;do e.strstart++,e.ins_h=hi(e,e.ins_h,e.window[e.strstart+de-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=hi(e,e.ins_h,e.window[e.strstart+1]);else r=li(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Xt(e,!1),e.strm.avail_out===0))return Dt}return e.insert=e.strstart<de-1?e.strstart:de-1,t===hn?(Xt(e,!0),e.strm.avail_out===0?po:ma):e.sym_next&&(Xt(e,!1),e.strm.avail_out===0)?Dt:ga},ya=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<Xn){if(ba(e),e.lookahead<Xn&&t===fi)return Dt;if(e.lookahead===0)break}if(n=0,e.lookahead>=de&&(e.ins_h=hi(e,e.ins_h,e.window[e.strstart+de-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=de-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Xn&&(e.match_length=H2(e,n),e.match_length<=5&&(e.strategy===FN||e.match_length===de&&e.strstart-e.match_start>4096)&&(e.match_length=de-1)),e.prev_length>=de&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-de,r=li(e,e.strstart-1-e.prev_match,e.prev_length-de),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=hi(e,e.ins_h,e.window[e.strstart+de-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=de-1,e.strstart++,r&&(Xt(e,!1),e.strm.avail_out===0))return Dt}else if(e.match_available){if(r=li(e,0,e.window[e.strstart-1]),r&&Xt(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Dt}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=li(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<de-1?e.strstart:de-1,t===hn?(Xt(e,!0),e.strm.avail_out===0?po:ma):e.sym_next&&(Xt(e,!1),e.strm.avail_out===0)?Dt:ga},ZN=(e,t)=>{let n,r,i,o;const a=e.window;for(;;){if(e.lookahead<=ui){if(ba(e),e.lookahead<=ui&&t===fi)return Dt;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=de&&e.strstart>0&&(i=e.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){o=e.strstart+ui;do;while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=ui-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=de?(n=li(e,1,e.match_length-de),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=li(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Xt(e,!1),e.strm.avail_out===0))return Dt}return e.insert=0,t===hn?(Xt(e,!0),e.strm.avail_out===0?po:ma):e.sym_next&&(Xt(e,!1),e.strm.avail_out===0)?Dt:ga},YN=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(ba(e),e.lookahead===0)){if(t===fi)return Dt;break}if(e.match_length=0,n=li(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Xt(e,!1),e.strm.avail_out===0))return Dt}return e.insert=0,t===hn?(Xt(e,!0),e.strm.avail_out===0?po:ma):e.sym_next&&(Xt(e,!1),e.strm.avail_out===0)?Dt:ga};function Kn(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const Pl=[new Kn(0,0,0,0,V2),new Kn(4,4,8,4,Jp),new Kn(4,5,16,8,Jp),new Kn(4,6,32,32,Jp),new Kn(4,4,16,16,ya),new Kn(8,16,32,32,ya),new Kn(8,16,128,128,ya),new Kn(8,32,128,256,ya),new Kn(32,128,258,1024,ya),new Kn(32,258,258,4096,ya)],QN=e=>{e.window_size=2*e.w_size,ci(e.head),e.max_lazy_match=Pl[e.level].max_lazy,e.good_match=Pl[e.level].good_length,e.nice_match=Pl[e.level].nice_length,e.max_chain_length=Pl[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=de-1,e.match_available=0,e.ins_h=0};function XN(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ic,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(VN*2),this.dyn_dtree=new Uint16Array((2*GN+1)*2),this.bl_tree=new Uint16Array((2*HN+1)*2),ci(this.dyn_ltree),ci(this.dyn_dtree),ci(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(jN+1),this.heap=new Uint16Array(2*qp+1),ci(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*qp+1),ci(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ol=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==pa&&t.status!==Wp&&t.status!==Zp&&t.status!==Yp&&t.status!==Qp&&t.status!==Xp&&t.status!==ho&&t.status!==Rl?1:0},j2=e=>{if(Ol(e))return go(e,Qn);e.total_in=e.total_out=0,e.data_type=ON;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?Wp:t.wrap?pa:ho,e.adler=t.wrap===2?0:1,t.last_flush=-2,SN(t),xt},$2=e=>{const t=j2(e);return t===xt&&QN(e.state),t},KN=(e,t)=>Ol(e)||e.state.wrap!==2?Qn:(e.state.gzhead=t,xt),q2=(e,t,n,r,i,o)=>{if(!e)return Qn;let a=1;if(t===DN&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>LN||n!==Ic||r<8||r>15||t<0||t>9||o<0||o>MN||r===8&&a!==1)return go(e,Qn);r===8&&(r=9);const s=new XN;return e.state=s,s.strm=e,s.status=pa,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+de-1)/de),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=t,s.strategy=o,s.method=n,$2(e)},JN=(e,t)=>q2(e,t,Ic,NN,zN,PN),e9=(e,t)=>{if(Ol(e)||t>z2||t<0)return e?go(e,Qn):Qn;const n=e.state;if(!e.output||e.avail_in!==0&&!e.input||n.status===Rl&&t!==hn)return go(e,e.avail_out===0?$p:Qn);const r=n.last_flush;if(n.last_flush=t,n.pending!==0){if(Qt(e),e.avail_out===0)return n.last_flush=-1,xt}else if(e.avail_in===0&&G2(t)<=G2(r)&&t!==hn)return go(e,$p);if(n.status===Rl&&e.avail_in!==0)return go(e,$p);if(n.status===pa&&n.wrap===0&&(n.status=ho),n.status===pa){let i=Ic+(n.w_bits-8<<4)<<8,o=-1;if(n.strategy>=Tc||n.level<2?o=0:n.level<6?o=1:n.level===6?o=2:o=3,i|=o<<6,n.strstart!==0&&(i|=$N),i+=31-i%31,Ml(n,i),n.strstart!==0&&(Ml(n,e.adler>>>16),Ml(n,e.adler&65535)),e.adler=1,n.status=ho,Qt(e),n.pending!==0)return n.last_flush=-1,xt}if(n.status===Wp){if(e.adler=0,Ae(n,31),Ae(n,139),Ae(n,8),n.gzhead)Ae(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Ae(n,n.gzhead.time&255),Ae(n,n.gzhead.time>>8&255),Ae(n,n.gzhead.time>>16&255),Ae(n,n.gzhead.time>>24&255),Ae(n,n.level===9?2:n.strategy>=Tc||n.level<2?4:0),Ae(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(Ae(n,n.gzhead.extra.length&255),Ae(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=pt(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=Zp;else if(Ae(n,0),Ae(n,0),Ae(n,0),Ae(n,0),Ae(n,0),Ae(n,n.level===9?2:n.strategy>=Tc||n.level<2?4:0),Ae(n,qN),n.status=ho,Qt(e),n.pending!==0)return n.last_flush=-1,xt}if(n.status===Zp){if(n.gzhead.extra){let i=n.pending,o=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+o>n.pending_buf_size;){let s=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>i&&(e.adler=pt(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex+=s,Qt(e),n.pending!==0)return n.last_flush=-1,xt;i=0,o-=s}let a=new Uint8Array(n.gzhead.extra);n.pending_buf.set(a.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending+=o,n.gzhead.hcrc&&n.pending>i&&(e.adler=pt(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=Yp}if(n.status===Yp){if(n.gzhead.name){let i=n.pending,o;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=pt(e.adler,n.pending_buf,n.pending-i,i)),Qt(e),n.pending!==0)return n.last_flush=-1,xt;i=0}n.gzindex<n.gzhead.name.length?o=n.gzhead.name.charCodeAt(n.gzindex++)&255:o=0,Ae(n,o)}while(o!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=pt(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=Qp}if(n.status===Qp){if(n.gzhead.comment){let i=n.pending,o;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=pt(e.adler,n.pending_buf,n.pending-i,i)),Qt(e),n.pending!==0)return n.last_flush=-1,xt;i=0}n.gzindex<n.gzhead.comment.length?o=n.gzhead.comment.charCodeAt(n.gzindex++)&255:o=0,Ae(n,o)}while(o!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=pt(e.adler,n.pending_buf,n.pending-i,i))}n.status=Xp}if(n.status===Xp){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Qt(e),n.pending!==0))return n.last_flush=-1,xt;Ae(n,e.adler&255),Ae(n,e.adler>>8&255),e.adler=0}if(n.status=ho,Qt(e),n.pending!==0)return n.last_flush=-1,xt}if(e.avail_in!==0||n.lookahead!==0||t!==fi&&n.status!==Rl){let i=n.level===0?V2(n,t):n.strategy===Tc?YN(n,t):n.strategy===RN?ZN(n,t):Pl[n.level].func(n,t);if((i===po||i===ma)&&(n.status=Rl),i===Dt||i===po)return e.avail_out===0&&(n.last_flush=-1),xt;if(i===ga&&(t===TN?kN(n):t!==z2&&(jp(n,0,0,!1),t===IN&&(ci(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Qt(e),e.avail_out===0))return n.last_flush=-1,xt}return t!==hn?xt:n.wrap<=0?U2:(n.wrap===2?(Ae(n,e.adler&255),Ae(n,e.adler>>8&255),Ae(n,e.adler>>16&255),Ae(n,e.adler>>24&255),Ae(n,e.total_in&255),Ae(n,e.total_in>>8&255),Ae(n,e.total_in>>16&255),Ae(n,e.total_in>>24&255)):(Ml(n,e.adler>>>16),Ml(n,e.adler&65535)),Qt(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?xt:U2)},t9=e=>{if(Ol(e))return Qn;const t=e.state.status;return e.state=null,t===ho?go(e,BN):xt},n9=(e,t)=>{let n=t.length;if(Ol(e))return Qn;const r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==pa||r.lookahead)return Qn;if(i===1&&(e.adler=Dl(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){i===0&&(ci(r.head),r.strstart=0,r.block_start=0,r.insert=0);let f=new Uint8Array(r.w_size);f.set(t.subarray(n-r.w_size,n),0),t=f,n=r.w_size}const o=e.avail_in,a=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,ba(r);r.lookahead>=de;){let f=r.strstart,l=r.lookahead-(de-1);do r.ins_h=hi(r,r.ins_h,r.window[f+de-1]),r.prev[f&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=f,f++;while(--l);r.strstart=f,r.lookahead=de-1,ba(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=de-1,r.match_available=0,e.next_in=a,e.input=s,e.avail_in=o,r.wrap=i,xt};var r9=JN,i9=q2,o9=$2,a9=j2,s9=KN,l9=e9,f9=t9,u9=n9,c9="pako deflate (from Nodeca project)",Ll={deflateInit:r9,deflateInit2:i9,deflateReset:o9,deflateResetKeep:a9,deflateSetHeader:s9,deflate:l9,deflateEnd:f9,deflateSetDictionary:u9,deflateInfo:c9};const h9=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var d9=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)h9(n,r)&&(e[r]=n[r])}}return e},p9=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,o=e.length;r<o;r++){let a=e[r];n.set(a,i),i+=a.length}return n},Bc={assign:d9,flattenChunks:p9};let W2=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{W2=!1}const Nl=new Uint8Array(256);for(let e=0;e<256;e++)Nl[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Nl[254]=Nl[254]=1;var g9=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,i,o,a=e.length,s=0;for(i=0;i<a;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|n&63):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|n&63):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|n&63);return t};const m9=(e,t)=>{if(t<65534&&e.subarray&&W2)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var b9=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,i;const o=new Array(n*2);for(i=0,r=0;r<n;){let a=e[r++];if(a<128){o[i++]=a;continue}let s=Nl[a];if(s>4){o[i++]=65533,r+=s-1;continue}for(a&=s===2?31:s===3?15:7;s>1&&r<n;)a=a<<6|e[r++]&63,s--;if(s>1){o[i++]=65533;continue}a<65536?o[i++]=a:(a-=65536,o[i++]=55296|a>>10&1023,o[i++]=56320|a&1023)}return m9(o,i)},y9=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+Nl[e[n]]>t?n:t},zl={string2buf:g9,buf2string:b9,utf8border:y9};function w9(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Z2=w9;const Y2=Object.prototype.toString,{Z_NO_FLUSH:x9,Z_SYNC_FLUSH:v9,Z_FULL_FLUSH:A9,Z_FINISH:E9,Z_OK:Dc,Z_STREAM_END:_9,Z_DEFAULT_COMPRESSION:S9,Z_DEFAULT_STRATEGY:C9,Z_DEFLATED:k9}=Fl;function eg(e){this.options=Bc.assign({level:S9,method:k9,chunkSize:16384,windowBits:15,memLevel:8,strategy:C9},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Z2,this.strm.avail_out=0;let n=Ll.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Dc)throw new Error(da[n]);if(t.header&&Ll.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=zl.string2buf(t.dictionary):Y2.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=Ll.deflateSetDictionary(this.strm,r),n!==Dc)throw new Error(da[n]);this._dict_set=!0}}eg.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,o;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?E9:x9,typeof e=="string"?n.input=zl.string2buf(e):Y2.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(o===v9||o===A9)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(i=Ll.deflate(n,o),i===_9)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Ll.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Dc;if(n.avail_out===0){this.onData(n.output);continue}if(o>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0},eg.prototype.onData=function(e){this.chunks.push(e)},eg.prototype.onEnd=function(e){e===Dc&&(this.result=Bc.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};const Fc=16209,T9=16191;var I9=function(t,n){let r,i,o,a,s,f,l,u,c,h,d,p,m,y,w,A,S,_,T,I,B,F,M,G;const N=t.state;r=t.next_in,M=t.input,i=r+(t.avail_in-5),o=t.next_out,G=t.output,a=o-(n-t.avail_out),s=o+(t.avail_out-257),f=N.dmax,l=N.wsize,u=N.whave,c=N.wnext,h=N.window,d=N.hold,p=N.bits,m=N.lencode,y=N.distcode,w=(1<<N.lenbits)-1,A=(1<<N.distbits)-1;e:do{p<15&&(d+=M[r++]<<p,p+=8,d+=M[r++]<<p,p+=8),S=m[d&w];t:for(;;){if(_=S>>>24,d>>>=_,p-=_,_=S>>>16&255,_===0)G[o++]=S&65535;else if(_&16){T=S&65535,_&=15,_&&(p<_&&(d+=M[r++]<<p,p+=8),T+=d&(1<<_)-1,d>>>=_,p-=_),p<15&&(d+=M[r++]<<p,p+=8,d+=M[r++]<<p,p+=8),S=y[d&A];n:for(;;){if(_=S>>>24,d>>>=_,p-=_,_=S>>>16&255,_&16){if(I=S&65535,_&=15,p<_&&(d+=M[r++]<<p,p+=8,p<_&&(d+=M[r++]<<p,p+=8)),I+=d&(1<<_)-1,I>f){t.msg="invalid distance too far back",N.mode=Fc;break e}if(d>>>=_,p-=_,_=o-a,I>_){if(_=I-_,_>u&&N.sane){t.msg="invalid distance too far back",N.mode=Fc;break e}if(B=0,F=h,c===0){if(B+=l-_,_<T){T-=_;do G[o++]=h[B++];while(--_);B=o-I,F=G}}else if(c<_){if(B+=l+c-_,_-=c,_<T){T-=_;do G[o++]=h[B++];while(--_);if(B=0,c<T){_=c,T-=_;do G[o++]=h[B++];while(--_);B=o-I,F=G}}}else if(B+=c-_,_<T){T-=_;do G[o++]=h[B++];while(--_);B=o-I,F=G}for(;T>2;)G[o++]=F[B++],G[o++]=F[B++],G[o++]=F[B++],T-=3;T&&(G[o++]=F[B++],T>1&&(G[o++]=F[B++]))}else{B=o-I;do G[o++]=G[B++],G[o++]=G[B++],G[o++]=G[B++],T-=3;while(T>2);T&&(G[o++]=G[B++],T>1&&(G[o++]=G[B++]))}}else if(_&64){t.msg="invalid distance code",N.mode=Fc;break e}else{S=y[(S&65535)+(d&(1<<_)-1)];continue n}break}}else if(_&64)if(_&32){N.mode=T9;break e}else{t.msg="invalid literal/length code",N.mode=Fc;break e}else{S=m[(S&65535)+(d&(1<<_)-1)];continue t}break}}while(r<i&&o<s);T=p>>3,r-=T,p-=T<<3,d&=(1<<p)-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=o<s?257+(s-o):257-(o-s),N.hold=d,N.bits=p};const wa=15,Q2=852,X2=592,K2=0,tg=1,J2=2,B9=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),D9=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),F9=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),R9=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Ul=(e,t,n,r,i,o,a,s)=>{const f=s.bits;let l=0,u=0,c=0,h=0,d=0,p=0,m=0,y=0,w=0,A=0,S,_,T,I,B,F=null,M;const G=new Uint16Array(wa+1),N=new Uint16Array(wa+1);let re=null,se,te,pe;for(l=0;l<=wa;l++)G[l]=0;for(u=0;u<r;u++)G[t[n+u]]++;for(d=f,h=wa;h>=1&&G[h]===0;h--);if(d>h&&(d=h),h===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,s.bits=1,0;for(c=1;c<h&&G[c]===0;c++);for(d<c&&(d=c),y=1,l=1;l<=wa;l++)if(y<<=1,y-=G[l],y<0)return-1;if(y>0&&(e===K2||h!==1))return-1;for(N[1]=0,l=1;l<wa;l++)N[l+1]=N[l]+G[l];for(u=0;u<r;u++)t[n+u]!==0&&(a[N[t[n+u]]++]=u);if(e===K2?(F=re=a,M=20):e===tg?(F=B9,re=D9,M=257):(F=F9,re=R9,M=0),A=0,u=0,l=c,B=o,p=d,m=0,T=-1,w=1<<d,I=w-1,e===tg&&w>Q2||e===J2&&w>X2)return 1;for(;;){se=l-m,a[u]+1<M?(te=0,pe=a[u]):a[u]>=M?(te=re[a[u]-M],pe=F[a[u]-M]):(te=32+64,pe=0),S=1<<l-m,_=1<<p,c=_;do _-=S,i[B+(A>>m)+_]=se<<24|te<<16|pe|0;while(_!==0);for(S=1<<l-1;A&S;)S>>=1;if(S!==0?(A&=S-1,A+=S):A=0,u++,--G[l]===0){if(l===h)break;l=t[n+a[u]]}if(l>d&&(A&I)!==T){for(m===0&&(m=d),B+=c,p=l-m,y=1<<p;p+m<h&&(y-=G[p+m],!(y<=0));)p++,y<<=1;if(w+=1<<p,e===tg&&w>Q2||e===J2&&w>X2)return 1;T=A&I,i[T]=d<<24|p<<16|B-o|0}}return A!==0&&(i[B+A]=l-m<<24|64<<16|0),s.bits=d,0};const M9=0,eE=1,tE=2,{Z_FINISH:nE,Z_BLOCK:P9,Z_TREES:Rc,Z_OK:mo,Z_STREAM_END:O9,Z_NEED_DICT:L9,Z_STREAM_ERROR:dn,Z_DATA_ERROR:rE,Z_MEM_ERROR:iE,Z_BUF_ERROR:N9,Z_DEFLATED:oE}=Fl,Mc=16180,aE=16181,sE=16182,lE=16183,fE=16184,uE=16185,cE=16186,hE=16187,dE=16188,pE=16189,Pc=16190,pr=16191,ng=16192,gE=16193,rg=16194,mE=16195,bE=16196,yE=16197,wE=16198,Oc=16199,Lc=16200,xE=16201,vE=16202,AE=16203,EE=16204,_E=16205,ig=16206,SE=16207,CE=16208,qe=16209,kE=16210,TE=16211,z9=852,U9=592,G9=15,IE=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function H9(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const bo=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Mc||t.mode>TE?1:0},BE=e=>{if(bo(e))return dn;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Mc,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(z9),t.distcode=t.distdyn=new Int32Array(U9),t.sane=1,t.back=-1,mo},DE=e=>{if(bo(e))return dn;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,BE(e)},FE=(e,t)=>{let n;if(bo(e))return dn;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?dn:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,DE(e))},RE=(e,t)=>{if(!e)return dn;const n=new H9;e.state=n,n.strm=e,n.window=null,n.mode=Mc;const r=FE(e,t);return r!==mo&&(e.state=null),r},V9=e=>RE(e,G9);let ME=!0,og,ag;const j9=e=>{if(ME){og=new Int32Array(512),ag=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Ul(eE,e.lens,0,288,og,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Ul(tE,e.lens,0,32,ag,0,e.work,{bits:5}),ME=!1}e.lencode=og,e.lenbits=9,e.distcode=ag,e.distbits=5},PE=(e,t,n,r)=>{let i;const o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(t.subarray(n-r,n-r+i),o.wnext),r-=i,r?(o.window.set(t.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},$9=(e,t)=>{let n,r,i,o,a,s,f,l,u,c,h,d,p,m,y=0,w,A,S,_,T,I,B,F;const M=new Uint8Array(4);let G,N;const re=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(bo(e)||!e.output||!e.input&&e.avail_in!==0)return dn;n=e.state,n.mode===pr&&(n.mode=ng),a=e.next_out,i=e.output,f=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,l=n.hold,u=n.bits,c=s,h=f,F=mo;e:for(;;)switch(n.mode){case Mc:if(n.wrap===0){n.mode=ng;break}for(;u<16;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(n.wrap&2&&l===35615){n.wbits===0&&(n.wbits=15),n.check=0,M[0]=l&255,M[1]=l>>>8&255,n.check=pt(n.check,M,2,0),l=0,u=0,n.mode=aE;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=qe;break}if((l&15)!==oE){e.msg="unknown compression method",n.mode=qe;break}if(l>>>=4,u-=4,B=(l&15)+8,n.wbits===0&&(n.wbits=B),B>15||B>n.wbits){e.msg="invalid window size",n.mode=qe;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=l&512?pE:pr,l=0,u=0;break;case aE:for(;u<16;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(n.flags=l,(n.flags&255)!==oE){e.msg="unknown compression method",n.mode=qe;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=qe;break}n.head&&(n.head.text=l>>8&1),n.flags&512&&n.wrap&4&&(M[0]=l&255,M[1]=l>>>8&255,n.check=pt(n.check,M,2,0)),l=0,u=0,n.mode=sE;case sE:for(;u<32;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}n.head&&(n.head.time=l),n.flags&512&&n.wrap&4&&(M[0]=l&255,M[1]=l>>>8&255,M[2]=l>>>16&255,M[3]=l>>>24&255,n.check=pt(n.check,M,4,0)),l=0,u=0,n.mode=lE;case lE:for(;u<16;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}n.head&&(n.head.xflags=l&255,n.head.os=l>>8),n.flags&512&&n.wrap&4&&(M[0]=l&255,M[1]=l>>>8&255,n.check=pt(n.check,M,2,0)),l=0,u=0,n.mode=fE;case fE:if(n.flags&1024){for(;u<16;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),n.flags&512&&n.wrap&4&&(M[0]=l&255,M[1]=l>>>8&255,n.check=pt(n.check,M,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=uE;case uE:if(n.flags&1024&&(d=n.length,d>s&&(d=s),d&&(n.head&&(B=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(o,o+d),B)),n.flags&512&&n.wrap&4&&(n.check=pt(n.check,r,d,o)),s-=d,o+=d,n.length-=d),n.length))break e;n.length=0,n.mode=cE;case cE:if(n.flags&2048){if(s===0)break e;d=0;do B=r[o+d++],n.head&&B&&n.length<65536&&(n.head.name+=String.fromCharCode(B));while(B&&d<s);if(n.flags&512&&n.wrap&4&&(n.check=pt(n.check,r,d,o)),s-=d,o+=d,B)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=hE;case hE:if(n.flags&4096){if(s===0)break e;d=0;do B=r[o+d++],n.head&&B&&n.length<65536&&(n.head.comment+=String.fromCharCode(B));while(B&&d<s);if(n.flags&512&&n.wrap&4&&(n.check=pt(n.check,r,d,o)),s-=d,o+=d,B)break e}else n.head&&(n.head.comment=null);n.mode=dE;case dE:if(n.flags&512){for(;u<16;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(n.wrap&4&&l!==(n.check&65535)){e.msg="header crc mismatch",n.mode=qe;break}l=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=pr;break;case pE:for(;u<32;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}e.adler=n.check=IE(l),l=0,u=0,n.mode=Pc;case Pc:if(n.havedict===0)return e.next_out=a,e.avail_out=f,e.next_in=o,e.avail_in=s,n.hold=l,n.bits=u,L9;e.adler=n.check=1,n.mode=pr;case pr:if(t===P9||t===Rc)break e;case ng:if(n.last){l>>>=u&7,u-=u&7,n.mode=ig;break}for(;u<3;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}switch(n.last=l&1,l>>>=1,u-=1,l&3){case 0:n.mode=gE;break;case 1:if(j9(n),n.mode=Oc,t===Rc){l>>>=2,u-=2;break e}break;case 2:n.mode=bE;break;case 3:e.msg="invalid block type",n.mode=qe}l>>>=2,u-=2;break;case gE:for(l>>>=u&7,u-=u&7;u<32;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=qe;break}if(n.length=l&65535,l=0,u=0,n.mode=rg,t===Rc)break e;case rg:n.mode=mE;case mE:if(d=n.length,d){if(d>s&&(d=s),d>f&&(d=f),d===0)break e;i.set(r.subarray(o,o+d),a),s-=d,o+=d,f-=d,a+=d,n.length-=d;break}n.mode=pr;break;case bE:for(;u<14;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(n.nlen=(l&31)+257,l>>>=5,u-=5,n.ndist=(l&31)+1,l>>>=5,u-=5,n.ncode=(l&15)+4,l>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=qe;break}n.have=0,n.mode=yE;case yE:for(;n.have<n.ncode;){for(;u<3;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}n.lens[re[n.have++]]=l&7,l>>>=3,u-=3}for(;n.have<19;)n.lens[re[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,G={bits:n.lenbits},F=Ul(M9,n.lens,0,19,n.lencode,0,n.work,G),n.lenbits=G.bits,F){e.msg="invalid code lengths set",n.mode=qe;break}n.have=0,n.mode=wE;case wE:for(;n.have<n.nlen+n.ndist;){for(;y=n.lencode[l&(1<<n.lenbits)-1],w=y>>>24,A=y>>>16&255,S=y&65535,!(w<=u);){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(S<16)l>>>=w,u-=w,n.lens[n.have++]=S;else{if(S===16){for(N=w+2;u<N;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(l>>>=w,u-=w,n.have===0){e.msg="invalid bit length repeat",n.mode=qe;break}B=n.lens[n.have-1],d=3+(l&3),l>>>=2,u-=2}else if(S===17){for(N=w+3;u<N;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}l>>>=w,u-=w,B=0,d=3+(l&7),l>>>=3,u-=3}else{for(N=w+7;u<N;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}l>>>=w,u-=w,B=0,d=11+(l&127),l>>>=7,u-=7}if(n.have+d>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=qe;break}for(;d--;)n.lens[n.have++]=B}}if(n.mode===qe)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=qe;break}if(n.lenbits=9,G={bits:n.lenbits},F=Ul(eE,n.lens,0,n.nlen,n.lencode,0,n.work,G),n.lenbits=G.bits,F){e.msg="invalid literal/lengths set",n.mode=qe;break}if(n.distbits=6,n.distcode=n.distdyn,G={bits:n.distbits},F=Ul(tE,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,G),n.distbits=G.bits,F){e.msg="invalid distances set",n.mode=qe;break}if(n.mode=Oc,t===Rc)break e;case Oc:n.mode=Lc;case Lc:if(s>=6&&f>=258){e.next_out=a,e.avail_out=f,e.next_in=o,e.avail_in=s,n.hold=l,n.bits=u,I9(e,h),a=e.next_out,i=e.output,f=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,l=n.hold,u=n.bits,n.mode===pr&&(n.back=-1);break}for(n.back=0;y=n.lencode[l&(1<<n.lenbits)-1],w=y>>>24,A=y>>>16&255,S=y&65535,!(w<=u);){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(A&&!(A&240)){for(_=w,T=A,I=S;y=n.lencode[I+((l&(1<<_+T)-1)>>_)],w=y>>>24,A=y>>>16&255,S=y&65535,!(_+w<=u);){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}l>>>=_,u-=_,n.back+=_}if(l>>>=w,u-=w,n.back+=w,n.length=S,A===0){n.mode=_E;break}if(A&32){n.back=-1,n.mode=pr;break}if(A&64){e.msg="invalid literal/length code",n.mode=qe;break}n.extra=A&15,n.mode=xE;case xE:if(n.extra){for(N=n.extra;u<N;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=vE;case vE:for(;y=n.distcode[l&(1<<n.distbits)-1],w=y>>>24,A=y>>>16&255,S=y&65535,!(w<=u);){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(!(A&240)){for(_=w,T=A,I=S;y=n.distcode[I+((l&(1<<_+T)-1)>>_)],w=y>>>24,A=y>>>16&255,S=y&65535,!(_+w<=u);){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}l>>>=_,u-=_,n.back+=_}if(l>>>=w,u-=w,n.back+=w,A&64){e.msg="invalid distance code",n.mode=qe;break}n.offset=S,n.extra=A&15,n.mode=AE;case AE:if(n.extra){for(N=n.extra;u<N;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=qe;break}n.mode=EE;case EE:if(f===0)break e;if(d=h-f,n.offset>d){if(d=n.offset-d,d>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=qe;break}d>n.wnext?(d-=n.wnext,p=n.wsize-d):p=n.wnext-d,d>n.length&&(d=n.length),m=n.window}else m=i,p=a-n.offset,d=n.length;d>f&&(d=f),f-=d,n.length-=d;do i[a++]=m[p++];while(--d);n.length===0&&(n.mode=Lc);break;case _E:if(f===0)break e;i[a++]=n.length,f--,n.mode=Lc;break;case ig:if(n.wrap){for(;u<32;){if(s===0)break e;s--,l|=r[o++]<<u,u+=8}if(h-=f,e.total_out+=h,n.total+=h,n.wrap&4&&h&&(e.adler=n.check=n.flags?pt(n.check,i,h,a-h):Dl(n.check,i,h,a-h)),h=f,n.wrap&4&&(n.flags?l:IE(l))!==n.check){e.msg="incorrect data check",n.mode=qe;break}l=0,u=0}n.mode=SE;case SE:if(n.wrap&&n.flags){for(;u<32;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(n.wrap&4&&l!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=qe;break}l=0,u=0}n.mode=CE;case CE:F=O9;break e;case qe:F=rE;break e;case kE:return iE;case TE:default:return dn}return e.next_out=a,e.avail_out=f,e.next_in=o,e.avail_in=s,n.hold=l,n.bits=u,(n.wsize||h!==e.avail_out&&n.mode<qe&&(n.mode<ig||t!==nE))&&PE(e,e.output,e.next_out,h-e.avail_out),c-=e.avail_in,h-=e.avail_out,e.total_in+=c,e.total_out+=h,n.total+=h,n.wrap&4&&h&&(e.adler=n.check=n.flags?pt(n.check,i,h,e.next_out-h):Dl(n.check,i,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===pr?128:0)+(n.mode===Oc||n.mode===rg?256:0),(c===0&&h===0||t===nE)&&F===mo&&(F=N9),F},q9=e=>{if(bo(e))return dn;let t=e.state;return t.window&&(t.window=null),e.state=null,mo},W9=(e,t)=>{if(bo(e))return dn;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,mo):dn},Z9=(e,t)=>{const n=t.length;let r,i,o;return bo(e)||(r=e.state,r.wrap!==0&&r.mode!==Pc)?dn:r.mode===Pc&&(i=1,i=Dl(i,t,n,0),i!==r.check)?rE:(o=PE(e,t,n,n),o?(r.mode=kE,iE):(r.havedict=1,mo))};var Y9=DE,Q9=FE,X9=BE,K9=V9,J9=RE,e7=$9,t7=q9,n7=W9,r7=Z9,i7="pako inflate (from Nodeca project)",gr={inflateReset:Y9,inflateReset2:Q9,inflateResetKeep:X9,inflateInit:K9,inflateInit2:J9,inflate:e7,inflateEnd:t7,inflateGetHeader:n7,inflateSetDictionary:r7,inflateInfo:i7};function o7(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var a7=o7;const OE=Object.prototype.toString,{Z_NO_FLUSH:s7,Z_FINISH:l7,Z_OK:Gl,Z_STREAM_END:sg,Z_NEED_DICT:lg,Z_STREAM_ERROR:f7,Z_DATA_ERROR:LE,Z_MEM_ERROR:u7}=Fl;function Hl(e){this.options=Bc.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Z2,this.strm.avail_out=0;let n=gr.inflateInit2(this.strm,t.windowBits);if(n!==Gl)throw new Error(da[n]);if(this.header=new a7,gr.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=zl.string2buf(t.dictionary):OE.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=gr.inflateSetDictionary(this.strm,t.dictionary),n!==Gl)))throw new Error(da[n])}Hl.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let o,a,s;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?l7:s7,OE.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),o=gr.inflate(n,a),o===lg&&i&&(o=gr.inflateSetDictionary(n,i),o===Gl?o=gr.inflate(n,a):o===LE&&(o=lg));n.avail_in>0&&o===sg&&n.state.wrap>0&&e[n.next_in]!==0;)gr.inflateReset(n),o=gr.inflate(n,a);switch(o){case f7:case LE:case lg:case u7:return this.onEnd(o),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(n.avail_out===0||o===sg))if(this.options.to==="string"){let f=zl.utf8border(n.output,n.next_out),l=n.next_out-f,u=zl.buf2string(n.output,f);n.next_out=l,n.avail_out=r-l,l&&n.output.set(n.output.subarray(f,f+l),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(o===Gl&&s===0)){if(o===sg)return o=gr.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(n.avail_in===0)break}}return!0},Hl.prototype.onData=function(e){this.chunks.push(e)},Hl.prototype.onEnd=function(e){e===Gl&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Bc.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function fg(e,t){const n=new Hl(t);if(n.push(e),n.err)throw n.msg||da[n.err];return n.result}function c7(e,t){return t=t||{},t.raw=!0,fg(e,t)}var h7=Hl,d7=fg,p7=c7,g7=fg,m7=Fl,b7={Inflate:h7,inflate:d7,inflateRaw:p7,ungzip:g7,constants:m7};const{Inflate:cG,inflate:hG,inflateRaw:y7,ungzip:dG}=b7;var w7=y7;function x7(e){return w7(e.subarray(2))}let v7=class extends Error{constructor(t){super(t),this.code="ERR_ABORTED"}};function A7(e){e.sort((i,o)=>Number(i.offset)-Number(o.offset));const t=[];let n,r;for(const i of e)n&&r&&Number(i.offset)-r<=2e3?(n.length=BigInt(Number(n.length)+Number(i.length)-r+Number(i.offset)),n.blocks.push(i)):t.push(n={blocks:[i],length:i.length,offset:i.offset}),r=Number(n.offset)+Number(n.length);return t}function Nc(e){if(e&&e.aborted)if(typeof DOMException>"u"){const t=new v7("aborted");throw t.code="ERR_ABORTED",t}else throw new DOMException("aborted","AbortError")}const E7=1,_7=2,S7=3;function ug(e,t,n,r){return e<r&&t>=n}function C7(e){const t=e?"big":"little",n=new Ie().endianess(t).uint32("chromId").uint32("start").uint32("end").uint32("validCnt").floatle("minScore").floatle("maxScore").floatle("sumData").floatle("sumSqData").saveOffset("offset"),r=new Ie().endianess(t).uint8("isLeaf").skip(1).uint16("cnt").choice({tag:"isLeaf",choices:{1:new Ie().endianess(t).array("blocksToFetch",{length:"cnt",type:new Ie().endianess(t).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").uint64("blockSize").saveOffset("offset")}),0:new Ie().array("recurOffsets",{length:"cnt",type:new Ie().endianess(t).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").saveOffset("offset")})}}),i=new Ie().endianess(t).uint32("chromId").int32("start").int32("end").string("rest",{zeroTerminated:!0}).saveOffset("offset");return{bigWigParser:new Ie().endianess(t).skip(4).int32("blockStart").skip(4).uint32("itemStep").uint32("itemSpan").uint8("blockType").skip(1).uint16("itemCount").choice({tag:"blockType",choices:{[S7]:new Ie().array("items",{length:"itemCount",type:new Ie().floatle("score")}),[_7]:new Ie().array("items",{length:"itemCount",type:new Ie().endianess(t).int32("start").floatle("score")}),[E7]:new Ie().array("items",{length:"itemCount",type:new Ie().endianess(t).int32("start").int32("end").floatle("score")})}}),bigBedParser:i,summaryParser:n,leafParser:r}}class NE{constructor(t,n,r,i,o,a){if(this.bbi=t,this.refsByName=n,this.cirTreeOffset=r,this.isBigEndian=i,this.isCompressed=o,this.blockType=a,this.featureCache=new _c({cache:new Sc({maxSize:1e3}),fill:async(f,l)=>{const u=Number(f.length),c=Number(f.offset),{buffer:h}=await this.bbi.read(ge.Buffer.alloc(u),0,u,c,{signal:l});return h}}),!(r>=0))throw new Error("invalid cirTreeOffset!");const s=C7(i);this.leafParser=s.leafParser,this.bigBedParser=s.bigBedParser}async readWigData(t,n,r,i,o){try{const{refsByName:a,bbi:s,cirTreeOffset:f,isBigEndian:l}=this,u=a[t];u===void 0&&i.complete();const c={chrId:u,start:n,end:r};this.cirTreePromise||(this.cirTreePromise=s.read(ge.Buffer.alloc(48),0,48,Number(f),o));const{buffer:h}=await this.cirTreePromise,d=l?h.readUInt32BE(4):h.readUInt32LE(4);let p=[],m=0;const y=(_,T,I)=>{try{const B=_.subarray(T),F=this.leafParser.parse(B);if(F.blocksToFetch&&(p=p.concat(F.blocksToFetch.filter(M=>w(M)).map(M=>({offset:M.blockOffset,length:M.blockSize})))),F.recurOffsets){const M=F.recurOffsets.filter(G=>w(G)).map(G=>Number(G.blockOffset));M.length>0&&S(M,I+1)}}catch(B){i.error(B)}},w=_=>{const{startChrom:T,startBase:I,endChrom:B,endBase:F}=_;return(T<u||T===u&&I<=r)&&(B>u||B===u&&F>=n)},A=async(_,T,I)=>{try{const B=T.max()-T.min(),F=T.min(),M=await this.featureCache.get(`${B}_${F}`,{length:B,offset:F},o==null?void 0:o.signal);for(const G of _)T.contains(G)&&(y(M,G-F,I),m-=1,m===0&&this.readFeatures(i,p,{...o,request:c}))}catch(B){i.error(B)}},S=(_,T)=>{try{m+=_.length;const I=4+Number(d)*32;let B=new si(_[0],_[0]+I);for(let F=1;F<_.length;F+=1){const M=new si(_[F],_[F]+I);B=B.union(M)}B.getRanges().map(F=>A(_,F,T))}catch(I){i.error(I)}};return S([Number(f)+48],1)}catch(a){i.error(a)}}parseSummaryBlock(t,n,r){const i=[];let o=n;const a=new DataView(t.buffer,t.byteOffset,t.length);for(;o<t.byteLength;){const s=a.getUint32(o,!0);o+=4;const f=a.getUint32(o,!0);o+=4;const l=a.getUint32(o,!0);o+=4;const u=a.getUint32(o,!0);o+=4;const c=a.getFloat32(o,!0);o+=4;const h=a.getFloat32(o,!0);o+=4;const d=a.getFloat32(o,!0);o+=4,o+=4,(!r||s===r.chrId&&ug(f,l,r.start,r.end))&&i.push({start:f,end:l,maxScore:h,minScore:c,summary:!0,score:d/(u||1)})}return i}parseBigBedBlock(t,n,r,i){const o=[];let a=n;for(;a<t.byteLength;){const s=this.bigBedParser.parse(t.subarray(a));s.uniqueId=`bb-${r+a}`,o.push(s),a+=s.offset}return i?o.filter(s=>ug(s.start,s.end,i.start,i.end)):o}parseBigWigBlock(t,n,r){const i=t.subarray(n),o=new DataView(i.buffer,i.byteOffset,i.length);let a=0;a+=4;const s=o.getInt32(a,!0);a+=8;const f=o.getUint32(a,!0);a+=4;const l=o.getUint32(a,!0);a+=4;const u=o.getUint8(a);a+=2;const c=o.getUint16(a,!0);a+=2;const h=new Array(c);switch(u){case 1:{for(let d=0;d<c;d++){const p=o.getInt32(a,!0);a+=4;const m=o.getInt32(a,!0);a+=4;const y=o.getFloat32(a,!0);a+=4,h[d]={start:p,end:m,score:y}}break}case 2:{for(let d=0;d<c;d++){const p=o.getInt32(a,!0);a+=4;const m=o.getFloat32(a,!0);a+=4,h[d]={score:m,start:p,end:p+l}}break}case 3:{for(let d=0;d<c;d++){const p=o.getFloat32(a,!0);a+=4;const m=s+d*f;h[d]={score:p,start:m,end:m+l}}break}}return r?h.filter(d=>ug(d.start,d.end,r.start,r.end)):h}async readFeatures(t,n,r={}){try{const{blockType:i,isCompressed:o}=this,{signal:a,request:s}=r,f=A7(n);Nc(a),await Promise.all(f.map(async l=>{Nc(a);const{length:u,offset:c}=l,h=await this.featureCache.get(`${u}_${c}`,l,a);for(const d of l.blocks){Nc(a);let p=Number(d.offset)-Number(l.offset),m=h;switch(o&&(m=x7(h.subarray(p)),p=0),Nc(a),i){case"summary":{t.next(this.parseSummaryBlock(m,p,s));break}case"bigwig":{t.next(this.parseBigWigBlock(m,p,s));break}case"bigbed":{t.next(this.parseBigBedBlock(m,p,Number(d.offset)*256,s));break}default:console.warn(`Don't know what to do with ${i}`)}}})),t.complete()}catch(i){t.error(i)}}}var cg=function(e,t){return cg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},cg(e,t)};function hg(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");cg(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function k7(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(c){a(c)}}function f(u){try{l(r.throw(u))}catch(c){a(c)}}function l(u){u.done?o(u.value):i(u.value).then(s,f)}l((r=r.apply(e,t||[])).next())})}function zE(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return f([l,u])}}function f(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(n=0)),n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(u){l=[6,u],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Vl(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function dg(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function pg(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function xa(e){return this instanceof xa?(this.v=e,this):new xa(e)}function T7(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(h){r[h]&&(i[h]=function(d){return new Promise(function(p,m){o.push([h,d,p,m])>1||s(h,d)})})}function s(h,d){try{f(r[h](d))}catch(p){c(o[0][3],p)}}function f(h){h.value instanceof xa?Promise.resolve(h.value.v).then(l,u):c(o[0][2],h)}function l(h){s("next",h)}function u(h){s("throw",h)}function c(h,d){h(d),o.shift(),o.length&&s(o[0][0],o[0][1])}}function I7(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Vl=="function"?Vl(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(a){return new Promise(function(s,f){a=e[o](a),i(s,f,a.done,a.value)})}}function i(o,a,s,f){Promise.resolve(f).then(function(l){o({value:l,done:s})},a)}}typeof SuppressedError=="function"&&SuppressedError;function st(e){return typeof e=="function"}function UE(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var gg=UE(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function GE(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var mg=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=Vl(a),f=s.next();!f.done;f=s.next()){var l=f.value;l.remove(this)}}catch(m){t={error:m}}finally{try{f&&!f.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}else a.remove(this);var u=this.initialTeardown;if(st(u))try{u()}catch(m){o=m instanceof gg?m.errors:[m]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var h=Vl(c),d=h.next();!d.done;d=h.next()){var p=d.value;try{VE(p)}catch(m){o=o??[],m instanceof gg?o=pg(pg([],dg(o)),dg(m.errors)):o.push(m)}}}catch(m){r={error:m}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}if(o)throw new gg(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)VE(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&GE(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&GE(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();mg.EMPTY;function HE(e){return e instanceof mg||e&&"closed"in e&&st(e.remove)&&st(e.add)&&st(e.unsubscribe)}function VE(e){st(e)?e():e.unsubscribe()}var jE={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},$E={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,pg([e,t],dg(n)))},clearTimeout:function(e){var t=$E.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function qE(e){$E.setTimeout(function(){throw e})}function WE(){}function B7(e){e()}var bg=function(e){hg(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,HE(n)&&n.add(r)):r.destination=M7,r}return t.create=function(n,r,i){return new zc(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(mg),D7=Function.prototype.bind;function yg(e,t){return D7.call(e,t)}var F7=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){Uc(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){Uc(r)}else Uc(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){Uc(n)}},e}(),zc=function(e){hg(t,e);function t(n,r,i){var o=e.call(this)||this,a;if(st(n)||!n)a={next:n??void 0,error:r??void 0,complete:i??void 0};else{var s;o&&jE.useDeprecatedNextContext?(s=Object.create(n),s.unsubscribe=function(){return o.unsubscribe()},a={next:n.next&&yg(n.next,s),error:n.error&&yg(n.error,s),complete:n.complete&&yg(n.complete,s)}):a=n}return o.destination=new F7(a),o}return t}(bg);function Uc(e){qE(e)}function R7(e){throw e}var M7={closed:!0,next:WE,error:R7,complete:WE},wg=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ZE(e){return e}function P7(e){return e.length===0?ZE:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var pn=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,o=L7(t)?t:new zc(t,n,r);return B7(function(){var a=i,s=a.operator,f=a.source;o.add(s?s.call(o,f):f?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=YE(n),new n(function(i,o){var a=new zc({next:function(s){try{t(s)}catch(f){o(f),a.unsubscribe()}},error:o,complete:i});r.subscribe(a)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[wg]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return P7(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=YE(t),new t(function(r,i){var o;n.subscribe(function(a){return o=a},function(a){return i(a)},function(){return r(o)})})},e.create=function(t){return new e(t)},e}();function YE(e){var t;return(t=e??jE.Promise)!==null&&t!==void 0?t:Promise}function O7(e){return e&&st(e.next)&&st(e.error)&&st(e.complete)}function L7(e){return e&&e instanceof bg||O7(e)&&HE(e)}function N7(e){return st(e==null?void 0:e.lift)}function va(e){return function(t){if(N7(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function jl(e,t,n,r,i){return new z7(e,t,n,r,i)}var z7=function(e){hg(t,e);function t(n,r,i,o,a,s){var f=e.call(this,n)||this;return f.onFinalize=a,f.shouldUnsubscribe=s,f._next=r?function(l){try{r(l)}catch(u){n.error(u)}}:e.prototype._next,f._error=o?function(l){try{o(l)}catch(u){n.error(u)}finally{this.unsubscribe()}}:e.prototype._error,f._complete=i?function(){try{i()}catch(l){n.error(l)}finally{this.unsubscribe()}}:e.prototype._complete,f}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(bg),U7=new pn(function(e){return e.complete()});function G7(e){return e&&st(e.schedule)}function QE(e){return e[e.length-1]}function H7(e){return G7(QE(e))?e.pop():void 0}function V7(e,t){return typeof QE(e)=="number"?e.pop():t}var XE=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function KE(e){return st(e==null?void 0:e.then)}function JE(e){return st(e[wg])}function e_(e){return Symbol.asyncIterator&&st(e==null?void 0:e[Symbol.asyncIterator])}function t_(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function j7(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var n_=j7();function r_(e){return st(e==null?void 0:e[n_])}function i_(e){return T7(this,arguments,function(){var n,r,i,o;return zE(this,function(a){switch(a.label){case 0:n=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,xa(n.read())];case 3:return r=a.sent(),i=r.value,o=r.done,o?[4,xa(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,xa(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function o_(e){return st(e==null?void 0:e.getReader)}function Aa(e){if(e instanceof pn)return e;if(e!=null){if(JE(e))return $7(e);if(XE(e))return q7(e);if(KE(e))return W7(e);if(e_(e))return a_(e);if(r_(e))return Z7(e);if(o_(e))return Y7(e)}throw t_(e)}function $7(e){return new pn(function(t){var n=e[wg]();if(st(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function q7(e){return new pn(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function W7(e){return new pn(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,qE)})}function Z7(e){return new pn(function(t){var n,r;try{for(var i=Vl(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(t.next(a),t.closed)return}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function a_(e){return new pn(function(t){Q7(e,t).catch(function(n){return t.error(n)})})}function Y7(e){return a_(i_(e))}function Q7(e,t){var n,r,i,o;return k7(this,void 0,void 0,function(){var a,s;return zE(this,function(f){switch(f.label){case 0:f.trys.push([0,5,6,11]),n=I7(e),f.label=1;case 1:return[4,n.next()];case 2:if(r=f.sent(),!!r.done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];f.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=f.sent(),i={error:s},[3,11];case 6:return f.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:f.sent(),f.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function di(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function s_(e,t){return t===void 0&&(t=0),va(function(n,r){n.subscribe(jl(r,function(i){return di(r,e,function(){return r.next(i)},t)},function(){return di(r,e,function(){return r.complete()},t)},function(i){return di(r,e,function(){return r.error(i)},t)}))})}function l_(e,t){return t===void 0&&(t=0),va(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function X7(e,t){return Aa(e).pipe(l_(t),s_(t))}function K7(e,t){return Aa(e).pipe(l_(t),s_(t))}function J7(e,t){return new pn(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function ez(e,t){return new pn(function(n){var r;return di(n,t,function(){r=e[n_](),di(n,t,function(){var i,o,a;try{i=r.next(),o=i.value,a=i.done}catch(s){n.error(s);return}a?n.complete():n.next(o)},0,!0)}),function(){return st(r==null?void 0:r.return)&&r.return()}})}function f_(e,t){if(!e)throw new Error("Iterable cannot be null");return new pn(function(n){di(n,t,function(){var r=e[Symbol.asyncIterator]();di(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function tz(e,t){return f_(i_(e),t)}function nz(e,t){if(e!=null){if(JE(e))return X7(e,t);if(XE(e))return J7(e,t);if(KE(e))return K7(e,t);if(e_(e))return f_(e,t);if(r_(e))return ez(e,t);if(o_(e))return tz(e,t)}throw t_(e)}function rz(e,t){return t?nz(e,t):Aa(e)}var iz=UE(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function u_(e,t){var n=typeof t=="object";return new Promise(function(r,i){var o=new zc({next:function(a){r(a),o.unsubscribe()},error:i,complete:function(){n?r(t.defaultValue):i(new iz)}});e.subscribe(o)})}function c_(e,t){return va(function(n,r){var i=0;n.subscribe(jl(r,function(o){r.next(e.call(t,o,i++))}))})}function oz(e,t,n,r,i,o,a,s){var f=[],l=0,u=0,c=!1,h=function(){c&&!f.length&&!l&&t.complete()},d=function(m){return l<r?p(m):f.push(m)},p=function(m){o&&t.next(m),l++;var y=!1;Aa(n(m,u++)).subscribe(jl(t,function(w){i==null||i(w),o?d(w):t.next(w)},function(){y=!0},void 0,function(){if(y)try{l--;for(var w=function(){var A=f.shift();a?di(t,a,function(){return p(A)}):p(A)};f.length&&l<r;)w();h()}catch(A){t.error(A)}}))};return e.subscribe(jl(t,d,function(){c=!0,h()})),function(){s==null||s()}}function h_(e,t,n){return n===void 0&&(n=1/0),st(t)?h_(function(r,i){return c_(function(o,a){return t(r,o,i,a)})(Aa(e(r,i)))},n):(typeof t=="number"&&(n=t),va(function(r,i){return oz(r,i,e,n)}))}function az(e){return e===void 0&&(e=1/0),h_(ZE,e)}function sz(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=H7(e),r=V7(e,1/0),i=e;return i.length?i.length===1?Aa(i[0]):az(r)(rz(i,n)):U7}function lz(e,t,n,r,i){return function(o,a){var s=n,f=t,l=0;o.subscribe(jl(a,function(u){var c=l++;f=s?e(f,u,c):(s=!0,u),r&&a.next(f)},i&&function(){s&&a.next(f),a.complete()}))}}function d_(e,t){return va(lz(e,t,arguments.length>=2,!1,!0))}var fz=function(e,t){return e.push(t),e};function uz(){return va(function(e,t){d_(fz,[])(e).subscribe(t)})}const p_=-2003829722,xg=-2021002517;function cz(e){return new TextDecoder().decode(e)}function g_(e){const t=e?"big":"little",n=new Ie().endianess(t).int32("magic").uint16("version").uint16("numZoomLevels").uint64("chromTreeOffset").uint64("unzoomedDataOffset").uint64("unzoomedIndexOffset").uint16("fieldCount").uint16("definedFieldCount").uint64("asOffset").uint64("totalSummaryOffset").uint32("uncompressBufSize").uint64("extHeaderOffset").array("zoomLevels",{length:"numZoomLevels",type:new Ie().endianess(t).uint32("reductionLevel").uint32("reserved").uint64("dataOffset").uint64("indexOffset")}),r=new Ie().endianess(t).uint64("basesCovered").doublele("scoreMin").doublele("scoreMax").doublele("scoreSum").doublele("scoreSumSquares"),i=new Ie().endianess(t).uint32("magic").uint32("blockSize").uint32("keySize").uint32("valSize").uint64("itemCount"),o=new Ie().endianess(t).uint8("isLeafNode").skip(1).uint16("cnt").saveOffset("offset");return{chromTreeParser:i,totalSummaryParser:r,headerParser:n,isLeafNode:o}}class m_{getHeader(t){return this.headerP||(this.headerP=this._getHeader(t).catch(n=>{throw this.headerP=void 0,n})),this.headerP}constructor(t){const{filehandle:n,renameRefSeqs:r=a=>a,path:i,url:o}=t;if(this.renameRefSeqs=r,n)this.bbi=n;else if(o)this.bbi=new Xi(o);else if(i)this.bbi=new dt(i);else throw new Error("no file given")}async _getHeader(t){const n=await this._getMainHeader(t),r=await this._readChromTree(n,t);return{...n,...r}}async _getMainHeader(t,n=2e3){const{buffer:r}=await this.bbi.read(ge.Buffer.alloc(n),0,n,0,t),i=this._isBigEndian(r),o=g_(i),a=o.headerParser.parse(r),{magic:s,asOffset:f,totalSummaryOffset:l}=a;if(a.fileType=s===xg?"bigbed":"bigwig",f>n||l>n)return this._getMainHeader(t,n*2);if(f){const u=Number(a.asOffset);a.autoSql=cz(r.subarray(u,r.indexOf(0,u)))}if(a.totalSummaryOffset>n-8*5)return this._getMainHeader(t,n*2);if(a.totalSummaryOffset){const u=r.subarray(Number(a.totalSummaryOffset)),c=o.totalSummaryParser.parse(u);a.totalSummary={...c,basesCovered:Number(c.basesCovered)}}return{...a,isBigEndian:i}}_isBigEndian(t){let n=t.readInt32LE(0);if(n===p_||n===xg)return!1;if(n=t.readInt32BE(0),n===p_||n===xg)return!0;throw new Error("not a BigWig/BigBed file")}async _readChromTree(t,n){const r=t.isBigEndian,i=r?"big":"little",o=[],a={};let s=Number(t.unzoomedDataOffset);const f=Number(t.chromTreeOffset);for(;s%4!==0;)s+=1;const l=s-f,{buffer:u}=await this.bbi.read(ge.Buffer.alloc(l),0,l,Number(f),n),c=g_(r),{keySize:h}=c.chromTreeParser.parse(u),d=new Ie().endianess(i).string("key",{stripNull:!0,length:h}).uint32("refId").uint32("refSize").saveOffset("offset"),p=new Ie().endianess(i).skip(h).uint64("childOffset").saveOffset("offset"),m=32,y=async w=>{let A=w;if(A>=u.length)throw new Error("reading beyond end of buffer");const S=c.isLeafNode.parse(u.subarray(A)),{isLeafNode:_,cnt:T}=S;if(A+=S.offset,_)for(let I=0;I<T;I+=1){const B=d.parse(u.subarray(A));A+=B.offset;const{key:F,refId:M,refSize:G}=B,N={name:F,id:M,length:G};a[this.renameRefSeqs(F)]=M,o[M]=N}else{const I=[];for(let B=0;B<T;B+=1){const F=p.parse(u.subarray(A)),{childOffset:M}=F;A+=F.offset,I.push(y(Number(M)-Number(f)))}await Promise.all(I)}};return await y(m),{refsByName:a,refsByNumber:o}}async getUnzoomedView(t){const{unzoomedIndexOffset:n,refsByName:r,uncompressBufSize:i,isBigEndian:o,fileType:a}=await this.getHeader(t);return new NE(this.bbi,r,n,o,i>0,a)}async getFeatureStream(t,n,r,i){await this.getHeader(i);const o=this.renameRefSeqs(t);let a;const{basesPerSpan:s,scale:f}=i||{};return s?a=await this.getView(1/s,i):f?a=await this.getView(f,i):a=await this.getView(1,i),new pn(l=>{a.readWigData(o,n,r,l,i)})}async getFeatures(t,n,r,i){const o=await this.getFeatureStream(t,n,r,i);return(await u_(o.pipe(uz()))).flat()}}class hz extends m_{async getView(t,n){const{zoomLevels:r,refsByName:i,fileSize:o,isBigEndian:a,uncompressBufSize:s}=await this.getHeader(n),f=1/t;let l=r.length;o||(l-=1);for(let u=l;u>=0;u-=1){const c=r[u];if(c&&c.reductionLevel<=2*f){const h=Number(c.indexOffset);return new NE(this.bbi,i,h,a,s>0,"summary")}}return this.getUnzoomedView(n)}}function dz(e){return e.filter(t=>!!t)}class pz extends m_{constructor(){super(...arguments),this.readIndicesCache=new _c({cache:new Sc({maxSize:1}),fill:(t,n)=>this._readIndices({...t,signal:n})})}readIndices(t={}){const{signal:n,...r}=t;return this.readIndicesCache.get(JSON.stringify(r),t,n)}async getView(t,n){return this.getUnzoomedView(n)}async _readIndices(t){const{extHeaderOffset:n,isBigEndian:r}=await this.getHeader(t),{buffer:i}=await this.bbi.read(ge.Buffer.alloc(64),0,64,Number(n)),o=r?"big":"little",a=new Ie().endianess(o).uint16("size").uint16("count").uint64("offset").parse(i),{count:s,offset:f}=a;if(s===0)return[];const l=20,u=l*s,{buffer:c}=await this.bbi.read(ge.Buffer.alloc(u),0,u,Number(f)),h=new Ie().endianess(o).int16("type").int16("fieldcount").uint64("offset").skip(4).int16("field"),d=[];for(let p=0;p<s;p+=1)d.push(h.parse(c.subarray(p*l)));return d}async searchExtraIndexBlocks(t,n={}){const{isBigEndian:r}=await this.getHeader(n),i=await this.readIndices(n);if(i.length===0)return[];const o=i.map(async a=>{const{offset:s,field:f}=a,{buffer:l}=await this.bbi.read(ge.Buffer.alloc(32),0,32,Number(s),n),u=r?"big":"little",c=new Ie().endianess(u).int32("magic").int32("blockSize").int32("keySize").int32("valSize").uint64("itemCount"),{blockSize:h,keySize:d,valSize:p}=c.parse(l),m=new Ie().endianess(u).int8("nodeType").skip(1).int16("cnt").choice({tag:"nodeType",choices:{0:new Ie().array("leafkeys",{length:"cnt",type:new Ie().endianess(u).string("key",{length:d,stripNull:!0}).uint64("offset")}),1:new Ie().array("keys",{length:"cnt",type:new Ie().endianess(u).string("key",{length:d,stripNull:!0}).uint64("offset").uint32("length").uint32("reserved")})}}),y=async A=>{const S=Number(A),_=4+h*(d+p),{buffer:T}=await this.bbi.read(ge.Buffer.alloc(_),0,_,S,n),I=m.parse(T);if(I.leafkeys){let B;for(let F=0;F<I.leafkeys.length;F+=1){const{key:M}=I.leafkeys[F];if(t.localeCompare(M)<0&&B)return y(B);B=I.leafkeys[F].offset}return y(B)}for(let B=0;B<I.keys.length;B+=1)if(I.keys[B].key===t)return{...I.keys[B],field:f}},w=32;return y(Number(s)+w)});return dz(await Promise.all(o))}async searchExtraIndex(t,n={}){const r=await this.searchExtraIndexBlocks(t,n);if(r.length===0)return[];const i=await this.getUnzoomedView(n),o=r.map(s=>new pn(f=>{i.readFeatures(f,[s],n)}).pipe(d_((f,l)=>f.concat(l)),c_(f=>{for(const l of f)l.field=s.field;return f})));return(await u_(sz(...o))).filter(s=>{var f;return((f=s.rest)===null||f===void 0?void 0:f.split("	")[(s.field||0)-3])===t})}}const b_=Object.freeze(Object.defineProperty({__proto__:null,BigBed:pz,BigWig:hz},Symbol.toStringTag,{value:"Module"}));function gz(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function Ea(e,t,n,r){this.message=e,this.expected=t,this.found=n,this.location=r,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ea)}gz(Ea,Error),Ea.buildMessage=function(e,t){var n={literal:function(l){return'"'+i(l.text)+'"'},class:function(l){var u="",c;for(c=0;c<l.parts.length;c++)u+=l.parts[c]instanceof Array?o(l.parts[c][0])+"-"+o(l.parts[c][1]):o(l.parts[c]);return"["+(l.inverted?"^":"")+u+"]"},any:function(l){return"any character"},end:function(l){return"end of input"},other:function(l){return l.description}};function r(l){return l.charCodeAt(0).toString(16).toUpperCase()}function i(l){return l.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+r(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+r(u)})}function o(l){return l.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+r(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+r(u)})}function a(l){return n[l.type](l)}function s(l){var u=new Array(l.length),c,h;for(c=0;c<l.length;c++)u[c]=a(l[c]);if(u.sort(),u.length>0){for(c=1,h=1;c<u.length;c++)u[c-1]!==u[c]&&(u[h]=u[c],h++);u.length=h}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}function f(l){return l?'"'+i(l)+'"':"end of input"}return"Expected "+s(e)+" but "+f(t)+" found."};function mz(e,t){t=t!==void 0?t:{};var n={},r={declaration:GS},i=GS,o="(",a=Fe("(",!1),s=")",f=Fe(")",!1),l=function(E,z,Q,X){return{type:E,name:z,comment:Q,fields:X}},u="simple",c=Fe("simple",!1),h="object",d=Fe("object",!1),p="table",m=Fe("table",!1),y="auto",w=Fe("auto",!1),A="primary",S=Fe("primary",!1),_="index",T=Fe("index",!1),I="unique",B=Fe("unique",!1),F=function(E,z){return z},M=function(E,z){return E.name&&z.unshift(E),z},G="#",N=Fe("#",!1),re=";",se=Fe(";",!1),te=function(E,z,Q){return{type:E,name:z,comment:Q}},pe="[",Xe=Fe("[",!1),De="]",Je=Fe("]",!1),We=function(E,z,Q,X){return{type:E,size:z,name:Q,comment:X}},et=function(E,z,Q,X){return{type:E,vals:z,name:Q,comment:X}},_e=",",Se=Fe(",",!1),gt=function(E,z){return z.unshift(E),z},jt="int",Ne=Fe("int",!1),O="uint",P=Fe("uint",!1),$="short",V=Fe("short",!1),Z="ushort",C=Fe("ushort",!1),v="byte",H=Fe("byte",!1),q="ubyte",fe=Fe("ubyte",!1),ne="float",ue=Fe("float",!1),$t="char",mi=Fe("char",!1),bi="string",yi=Fe("string",!1),St="lstring",Ar=Fe("lstring",!1),wi="enum",qt=Fe("enum",!1),Jn="double",x=Fe("double",!1),g="bigint",b=Fe("bigint",!1),k="set",R=Fe("set",!1),L=function(E,z){return E+" "+z},j=/^[a-zA-Z_]/,ce=yf([["a","z"],["A","Z"],"_"],!1,!1),Ge=/^[a-zA-Z0-9_]/,Me=yf([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),Ze=function(E){return LS()},Ce=/^[^\n\r]/,FS=yf([`
`,"\r"],!0,!1),OU=function(E){return E.join("").replace(/^"/,"").replace(/"$/,"")},LU=NS("integer"),RS=/^[0-9]/,MS=yf([["0","9"]],!1,!1),NU=function(){return parseInt(LS(),10)},zU=NS("whitespace"),PS=/^[ \t\n\r]/,OS=yf([" ","	",`
`,"\r"],!1,!1),D=0,Ft=0,oh=[{line:1,column:1}],er=0,rm=[],oe=0,ah;if("startRule"in t){if(!(t.startRule in r))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');i=r[t.startRule]}function LS(){return e.substring(Ft,D)}function Fe(E,z){return{type:"literal",text:E,ignoreCase:z}}function yf(E,z,Q){return{type:"class",parts:E,inverted:z,ignoreCase:Q}}function UU(){return{type:"end"}}function NS(E){return{type:"other",description:E}}function zS(E){var z=oh[E],Q;if(z)return z;for(Q=E-1;!oh[Q];)Q--;for(z=oh[Q],z={line:z.line,column:z.column};Q<E;)e.charCodeAt(Q)===10?(z.line++,z.column=1):z.column++,Q++;return oh[E]=z,z}function US(E,z){var Q=zS(E),X=zS(z);return{start:{offset:E,line:Q.line,column:Q.column},end:{offset:z,line:X.line,column:X.column}}}function ae(E){D<er||(D>er&&(er=D,rm=[]),rm.push(E))}function GU(E,z,Q){return new Ea(Ea.buildMessage(E,z),E,z,Q)}function GS(){var E,z,Q,X,ie,ze,Ye,bn,xi,Er,vi,_r,Ai,Sr;return E=D,z=me(),z!==n?(Q=HS(),Q!==n?(X=me(),X!==n?(ie=VS(),ie!==n?(ze=me(),ze!==n?(Ye=sh(),Ye!==n?(bn=me(),bn!==n?(e.charCodeAt(D)===40?(xi=o,D++):(xi=n,oe===0&&ae(a)),xi!==n?(Er=me(),Er!==n?(vi=HU(),vi!==n?(_r=me(),_r!==n?(e.charCodeAt(D)===41?(Ai=s,D++):(Ai=n,oe===0&&ae(f)),Ai!==n?(Sr=me(),Sr!==n?(Ft=E,z=l(Q,ie,Ye,vi),E=z):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n),E}function HS(){var E;return e.substr(D,6)===u?(E=u,D+=6):(E=n,oe===0&&ae(c)),E===n&&(e.substr(D,6)===h?(E=h,D+=6):(E=n,oe===0&&ae(d)),E===n&&(e.substr(D,5)===p?(E=p,D+=5):(E=n,oe===0&&ae(m)))),E}function VS(){var E,z,Q,X;return E=Dn(),E===n&&(E=D,z=Dn(),z!==n?(Q=jS(),Q!==n?(z=[z,Q],E=z):(D=E,E=n)):(D=E,E=n),E===n&&(E=D,z=Dn(),z!==n?(e.substr(D,4)===y?(Q=y,D+=4):(Q=n,oe===0&&ae(w)),Q!==n?(z=[z,Q],E=z):(D=E,E=n)):(D=E,E=n),E===n&&(E=D,z=Dn(),z!==n?(Q=jS(),Q!==n?(e.substr(D,4)===y?(X=y,D+=4):(X=n,oe===0&&ae(w)),X!==n?(z=[z,Q,X],E=z):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)))),E}function jS(){var E;return e.substr(D,7)===A?(E=A,D+=7):(E=n,oe===0&&ae(S)),E===n&&(e.substr(D,5)===_?(E=_,D+=5):(E=n,oe===0&&ae(T)),E===n&&(e.substr(D,6)===I?(E=I,D+=6):(E=n,oe===0&&ae(B)))),E}function sh(){var E;return E=$S(),E===n&&(E=me()),E}function HU(){var E,z,Q,X,ie,ze,Ye;if(E=D,z=im(),z!==n)if(Q=me(),Q!==n){for(X=[],ie=D,ze=me(),ze!==n?(Ye=im(),Ye!==n?(Ft=ie,ze=F(z,Ye),ie=ze):(D=ie,ie=n)):(D=ie,ie=n);ie!==n;)X.push(ie),ie=D,ze=me(),ze!==n?(Ye=im(),Ye!==n?(Ft=ie,ze=F(z,Ye),ie=ze):(D=ie,ie=n)):(D=ie,ie=n);X!==n?(ie=me(),ie!==n?(Ft=E,z=M(z,X),E=z):(D=E,E=n)):(D=E,E=n)}else D=E,E=n;else D=E,E=n;return E}function VU(){var E;return e.charCodeAt(D)===35?(E=G,D++):(E=n,oe===0&&ae(N)),E}function jU(){var E,z,Q,X,ie;return E=D,z=me(),z!==n?(Q=VU(),Q!==n?(X=$S(),X!==n?(ie=me(),ie!==n?(z=[z,Q,X,ie],E=z):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n),E}function im(){var E,z,Q,X,ie,ze,Ye,bn,xi,Er,vi,_r,Ai,Sr;return E=D,z=om(),z!==n?(Q=me(),Q!==n?(X=Dn(),X!==n?(ie=me(),ie!==n?(e.charCodeAt(D)===59?(ze=re,D++):(ze=n,oe===0&&ae(se)),ze!==n?(Ye=me(),Ye!==n?(bn=sh(),bn!==n?(Ft=E,z=te(z,X,bn),E=z):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n),E===n&&(E=D,z=om(),z!==n?(Q=me(),Q!==n?(e.charCodeAt(D)===91?(X=pe,D++):(X=n,oe===0&&ae(Xe)),X!==n?(ie=me(),ie!==n?(ze=qU(),ze!==n?(Ye=me(),Ye!==n?(e.charCodeAt(D)===93?(bn=De,D++):(bn=n,oe===0&&ae(Je)),bn!==n?(xi=me(),xi!==n?(Er=Dn(),Er!==n?(vi=me(),vi!==n?(e.charCodeAt(D)===59?(_r=re,D++):(_r=n,oe===0&&ae(se)),_r!==n?(Ai=me(),Ai!==n?(Sr=sh(),Sr!==n?(Ft=E,z=We(z,ze,Er,Sr),E=z):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n),E===n&&(E=D,z=om(),z!==n?(Q=me(),Q!==n?(e.charCodeAt(D)===40?(X=o,D++):(X=n,oe===0&&ae(a)),X!==n?(ie=me(),ie!==n?(ze=$U(),ze!==n?(Ye=me(),Ye!==n?(e.charCodeAt(D)===41?(bn=s,D++):(bn=n,oe===0&&ae(f)),bn!==n?(xi=me(),xi!==n?(Er=Dn(),Er!==n?(vi=me(),vi!==n?(e.charCodeAt(D)===59?(_r=re,D++):(_r=n,oe===0&&ae(se)),_r!==n?(Ai=me(),Ai!==n?(Sr=sh(),Sr!==n?(Ft=E,z=et(z,ze,Er,Sr),E=z):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n)):(D=E,E=n),E===n&&(E=jU()))),E}function $U(){var E,z,Q,X,ie,ze,Ye;if(E=D,z=Dn(),z!==n){for(Q=[],X=D,e.charCodeAt(D)===44?(ie=_e,D++):(ie=n,oe===0&&ae(Se)),ie!==n?(ze=me(),ze!==n?(Ye=Dn(),Ye!==n?(Ft=X,ie=F(z,Ye),X=ie):(D=X,X=n)):(D=X,X=n)):(D=X,X=n);X!==n;)Q.push(X),X=D,e.charCodeAt(D)===44?(ie=_e,D++):(ie=n,oe===0&&ae(Se)),ie!==n?(ze=me(),ze!==n?(Ye=Dn(),Ye!==n?(Ft=X,ie=F(z,Ye),X=ie):(D=X,X=n)):(D=X,X=n)):(D=X,X=n);Q!==n?(Ft=E,z=gt(z,Q),E=z):(D=E,E=n)}else D=E,E=n;return E}function om(){var E,z,Q,X;return e.substr(D,3)===jt?(E=jt,D+=3):(E=n,oe===0&&ae(Ne)),E===n&&(e.substr(D,4)===O?(E=O,D+=4):(E=n,oe===0&&ae(P)),E===n&&(e.substr(D,5)===$?(E=$,D+=5):(E=n,oe===0&&ae(V)),E===n&&(e.substr(D,6)===Z?(E=Z,D+=6):(E=n,oe===0&&ae(C)),E===n&&(e.substr(D,4)===v?(E=v,D+=4):(E=n,oe===0&&ae(H)),E===n&&(e.substr(D,5)===q?(E=q,D+=5):(E=n,oe===0&&ae(fe)),E===n&&(e.substr(D,5)===ne?(E=ne,D+=5):(E=n,oe===0&&ae(ue)),E===n&&(e.substr(D,4)===$t?(E=$t,D+=4):(E=n,oe===0&&ae(mi)),E===n&&(e.substr(D,6)===bi?(E=bi,D+=6):(E=n,oe===0&&ae(yi)),E===n&&(e.substr(D,7)===St?(E=St,D+=7):(E=n,oe===0&&ae(Ar)),E===n&&(e.substr(D,4)===wi?(E=wi,D+=4):(E=n,oe===0&&ae(qt)),E===n&&(e.substr(D,6)===Jn?(E=Jn,D+=6):(E=n,oe===0&&ae(x)),E===n&&(e.substr(D,6)===g?(E=g,D+=6):(E=n,oe===0&&ae(b)),E===n&&(e.substr(D,3)===k?(E=k,D+=3):(E=n,oe===0&&ae(R)),E===n&&(E=D,z=HS(),z!==n?(Q=me(),Q!==n?(X=VS(),X!==n?(Ft=E,z=L(z,X),E=z):(D=E,E=n)):(D=E,E=n)):(D=E,E=n))))))))))))))),E}function qU(){var E;return E=WU(),E===n&&(E=Dn()),E}function Dn(){var E,z,Q,X,ie;if(E=D,z=D,j.test(e.charAt(D))?(Q=e.charAt(D),D++):(Q=n,oe===0&&ae(ce)),Q!==n){for(X=[],Ge.test(e.charAt(D))?(ie=e.charAt(D),D++):(ie=n,oe===0&&ae(Me));ie!==n;)X.push(ie),Ge.test(e.charAt(D))?(ie=e.charAt(D),D++):(ie=n,oe===0&&ae(Me));X!==n?(Q=[Q,X],z=Q):(D=z,z=n)}else D=z,z=n;return z!==n&&(Ft=E,z=Ze()),E=z,E}function $S(){var E,z,Q;for(E=D,z=[],Ce.test(e.charAt(D))?(Q=e.charAt(D),D++):(Q=n,oe===0&&ae(FS));Q!==n;)z.push(Q),Ce.test(e.charAt(D))?(Q=e.charAt(D),D++):(Q=n,oe===0&&ae(FS));return z!==n&&(Ft=E,z=OU(z)),E=z,E}function WU(){var E,z,Q,X;if(oe++,E=D,z=me(),z!==n){if(Q=[],RS.test(e.charAt(D))?(X=e.charAt(D),D++):(X=n,oe===0&&ae(MS)),X!==n)for(;X!==n;)Q.push(X),RS.test(e.charAt(D))?(X=e.charAt(D),D++):(X=n,oe===0&&ae(MS));else Q=n;Q!==n?(Ft=E,z=NU(),E=z):(D=E,E=n)}else D=E,E=n;return oe--,E===n&&(z=n,oe===0&&ae(LU)),E}function me(){var E,z;for(oe++,E=[],PS.test(e.charAt(D))?(z=e.charAt(D),D++):(z=n,oe===0&&ae(OS));z!==n;)E.push(z),PS.test(e.charAt(D))?(z=e.charAt(D),D++):(z=n,oe===0&&ae(OS));return oe--,E===n&&(z=n,oe===0&&ae(zU)),E}if(ah=i(),ah!==n&&D===e.length)return ah;throw ah!==n&&D<e.length&&ae(UU()),GU(rm,er<e.length?e.charAt(er):null,er<e.length?US(er,er+1):US(er,er))}var y_={SyntaxError:Ea,parse:mz};const bz=ol(y_),vg=Object.fromEntries(Object.entries(Object.freeze(Object.defineProperty({__proto__:null,bigChain:`table bigChain
"bigChain pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint score;         "Score (0-1000)"
    char[1] strand;     "+ or - for strand"
    uint tSize;         "size of target sequence"
    string qName;       "name of query sequence"
    uint qSize;         "size of query sequence"
    uint qStart;        "start of alignment on query sequence"
    uint qEnd;          "end of alignment on query sequence"
    uint chainScore;    "score from chain"
    )`,bigGenePred:`table bigGenePred
"bigGenePred gene models"
   (
   string chrom;       "Reference sequence chromosome or scaffold"
   uint   chromStart;  "Start position in chromosome"
   uint   chromEnd;    "End position in chromosome"
   string name;        "Name or ID of item, ideally both human readable and unique"
   uint score;         "Score (0-1000)"
   char[1] strand;     "+ or - for strand"
   uint thickStart;    "Start of where display should be thick (start codon)"
   uint thickEnd;      "End of where display should be thick (stop codon)"
   uint reserved;       "RGB value (use R,G,B string in input file)"
   int blockCount;     "Number of blocks"
   int[blockCount] blockSizes; "Comma separated list of block sizes"
   int[blockCount] chromStarts; "Start positions relative to chromStart"
   string name2;       "Alternative/human readable name"
   string cdsStartStat; "Status of CDS start annotation (none, unknown, incomplete, or complete)"
   string cdsEndStat;   "Status of CDS end annotation (none, unknown, incomplete, or complete)"
   int[blockCount] exonFrames; "Exon frame {0,1,2}, or -1 if no frame for exon"
   string type;        "Transcript type"
   string geneName;    "Primary identifier for gene"
   string geneName2;   "Alternative/human readable gene name"
   string geneType;    "Gene type"
   )`,bigInteract:`table interact
"interaction between two regions"
    (
    string chrom;        "Chromosome (or contig, scaffold, etc.). For interchromosomal, use 2 records"
    uint chromStart;     "Start position of lower region. For interchromosomal, set to chromStart of this region"
    uint chromEnd;       "End position of upper region. For interchromosomal, set to chromEnd of this region"
    string name;         "Name of item, for display.  Usually 'sourceName/targetName/exp' or empty"
    uint score;          "Score (0-1000)"
    double value;        "Strength of interaction or other data value. Typically basis for score"
    string exp;          "Experiment name (metadata for filtering). Use . if not applicable"
    string color;        "Item color.  Specified as r,g,b or hexadecimal #RRGGBB or html color name, as in //www.w3.org/TR/css3-color/#html4. Use 0 and spectrum setting to shade by score"
    string sourceChrom;  "Chromosome of source region (directional) or lower region. For non-directional interchromosomal, chrom of this region."
    uint sourceStart;    "Start position in chromosome of source/lower/this region"
    uint sourceEnd;      "End position in chromosome of source/lower/this region"
    string sourceName;   "Identifier of source/lower/this region"
    string sourceStrand; "Orientation of source/lower/this region: + or -.  Use . if not applicable"
    string targetChrom;  "Chromosome of target region (directional) or upper region. For non-directional interchromosomal, chrom of other region"
    uint targetStart;    "Start position in chromosome of target/upper/this region"
    uint targetEnd;      "End position in chromosome of target/upper/this region"
    string targetName;   "Identifier of target/upper/this region"
    string targetStrand; "Orientation of target/upper/this region: + or -.  Use . if not applicable"

    )`,bigLink:`table bigLink
"bigLink pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint qStart;        "start of alignment on query sequence"
    )`,bigMaf:`table bedMaf
"Bed3 with MAF block"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start position in chromosome"
    uint   chromEnd;   "End position in chromosome"
    lstring mafBlock;   "MAF block"
    )`,bigNarrowPeak:`table bigNarrowPeak
"BED6+4 Peaks of signal enrichment based on pooled, normalized (interpreted) data."
(
    string chrom;        "Reference sequence chromosome or scaffold"
    uint   chromStart;   "Start position in chromosome"
    uint   chromEnd;     "End position in chromosome"
    string name;	 "Name given to a region (preferably unique). Use . if no name is assigned"
    uint   score;        "Indicates how dark the peak will be displayed in the browser (0-1000) "
    char[1]  strand;     "+ or - or . for unknown"
    float  signalValue;  "Measurement of average enrichment for the region"
    float  pValue;       "Statistical significance of signal value (-log10). Set to -1 if not used."
    float  qValue;       "Statistical significance with multiple-test correction applied (FDR -log10). Set to -1 if not used."
    int   peak;         "Point-source called for this peak; 0-based offset from chromStart. Set to -1 if no point-source called."
)`,bigPsl:`table bigPsl
"bigPsl pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint score;         "Score (0-1000)"
    char[1] strand;     "+ or - indicates whether the query aligns to the + or - strand on the reference"
    uint thickStart;    "Start of where display should be thick (start codon)"
    uint thickEnd;      "End of where display should be thick (stop codon)"
    uint reserved;       "RGB value (use R,G,B string in input file)"
    int blockCount;     "Number of blocks"
    int[blockCount] blockSizes; "Comma separated list of block sizes"
    int[blockCount] chromStarts; "Start positions relative to chromStart"

    uint    oChromStart;"Start position in other chromosome"
    uint    oChromEnd;  "End position in other chromosome"
    char[1] oStrand;    "+ or -, - means that psl was reversed into BED-compatible coordinates"
    uint    oChromSize; "Size of other chromosome."
    int[blockCount] oChromStarts; "Start positions relative to oChromStart or from oChromStart+oChromSize depending on strand"

    lstring  oSequence;  "Sequence on other chrom (or empty)"
    string   oCDS;       "CDS in NCBI format"

    uint    chromSize;"Size of target chromosome"

    uint match;        "Number of bases matched."
    uint misMatch; " Number of bases that don't match "
    uint repMatch; " Number of bases that match but are part of repeats "
    uint nCount;   " Number of 'N' bases "
    uint seqType;    "0=empty, 1=nucleotide, 2=amino_acid"
    )`,defaultBedSchema:`table defaultBedSchema
"BED12"
    (
    string chrom;      "The name of the chromosome (e.g. chr3, chrY, chr2_random) or scaffold (e.g. scaffold10671)."
    uint   chromStart; "The starting position of the feature in the chromosome or scaffold. The first base in a chromosome is numbered 0."
    uint   chromEnd;   "The ending position of the feature in the chromosome or scaffold. The chromEnd base is not included in the display of the feature. For example, the first 100 bases of a chromosome are defined as chromStart=0, chromEnd=100, and span the bases numbered 0-99."
    string   name;   "Defines the name of the BED line."
    float   score;   "Feature score, doesn't care about the 0-1000 limit as in bed"
    char   strand;   "Defines the strand. Either '.' (=no strand) or '+' or '-'"
    uint thickStart; "The starting position at which the feature is drawn thickly (for example, the start codon in gene displays). When there is no thick part, thickStart and thickEnd are usually set to the chromStart position."
    uint thickEnd; "The ending position at which the feature is drawn thickly (for example the stop codon in gene displays)."
    string itemRgb; "An RGB value of the form R,G,B (e.g. 255,0,0). "
    uint blockCount; " The number of blocks (exons) in the BED line."
    uint[blockCount] blockSizes; " A comma-separated list of the block sizes. The number of items in this list should correspond to blockCount."
    uint[blockCount] blockStarts; "A comma-separated list of block starts. All of the blockStart positions should be calculated relative to chromStart. The number of items in this list should correspond to blockCount."
    )`,mafFrames:`table mafFrames
"codon frame assignment for MAF components"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start range in chromosome"
    uint   chromEnd;   "End range in chromosome"
    string src;        "Name of sequence source in MAF"
    ubyte frame;       "frame (0,1,2) for first base(+) or last bast(-)"
    char[1] strand;    "+ or -"
    string name;       "Name of gene used to define frame"
    int    prevFramePos;  "target position of the previous base (in transcription direction) that continues this frame, or -1 if none, or frame not contiguous"
    int    nextFramePos;  "target position of the next base (in transcription direction) that continues this frame, or -1 if none, or frame not contiguous"
    ubyte  isExonStart;  "does this start the CDS portion of an exon?"
    ubyte  isExonEnd;    "does this end the CDS portion of an exon?"
    )`,mafSummary:`table mafSummary
"Positions and scores for alignment blocks"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start position in chromosome"
    uint   chromEnd;   "End position in chromosome"
    string src;        "Sequence name or database of alignment"
    float  score;      "Floating point score."
    char[1] leftStatus;  "Gap/break annotation for preceding block"
    char[1] rightStatus; "Gap/break annotation for following block"
    )`},Symbol.toStringTag,{value:"Module"}))).map(([e,t])=>[e,y_.parse(t.trim())]));function Ag(e){const t=["uint","int","float","long"];return{...e,fields:e.fields.map(n=>({...n,isArray:n.size&&n.type!=="char",arrayIsNumeric:n.size&&t.includes(n.type),isNumeric:!n.size&&t.includes(n.type)}))}}const yz={".":0,"-":-1,"+":1};function wz(e){var t;return e.length>=12&&!Number.isNaN(parseInt(e[9],10))&&((t=e[10])===null||t===void 0?void 0:t.split(",").filter(n=>!!n).length)===parseInt(e[9],10)}class xz{constructor(t={}){if(t.autoSql)this.autoSql=Ag(bz.parse(t.autoSql));else if(t.type){if(!vg[t.type])throw new Error("Type not found");this.autoSql=Ag(vg[t.type])}else this.autoSql=Ag(vg.defaultBedSchema),this.attemptDefaultBed=!0}parseLine(t,n={}){const{autoSql:r}=this,{uniqueId:i}=n,o=Array.isArray(t)?t:t.split("	");let a={};if(!this.attemptDefaultBed||this.attemptDefaultBed&&wz(o))for(let s=0;s<r.fields.length;s++){const f=r.fields[s];let l=o[s];const{isNumeric:u,isArray:c,arrayIsNumeric:h,name:d}=f;if(l==null)break;if(l!=="."){if(u){const p=Number(l);l=Number.isNaN(p)?l:p}else c&&(l=l.split(","),l[l.length-1]===""&&l.pop(),h&&(l=l.map(p=>Number(p))));a[d]=l}}else{const s=["chrom","chromStart","chromEnd","name"];a=Object.fromEntries(o.map((f,l)=>[s[l]||"field"+l,f])),a.chromStart=+a.chromStart,a.chromEnd=+a.chromEnd,Number.isNaN(Number.parseFloat(a.field4))||(a.score=+a.field4,delete a.field4),(a.field5==="+"||a.field5==="-")&&(a.strand=a.field5,delete a.field5)}return i&&(a.uniqueId=i),a.strand=yz[a.strand]||0,a.chrom=decodeURIComponent(a.chrom),a}}const vz=Object.freeze(Object.defineProperty({__proto__:null,default:xz},Symbol.toStringTag,{value:"Module"}));let w_=class{constructor(t,n){this.blockPosition=t,this.dataPosition=n}toString(){return`${this.blockPosition}:${this.dataPosition}`}compareTo(t){return this.blockPosition-t.blockPosition||this.dataPosition-t.dataPosition}static min(...t){let n,r=0;for(;!n;r+=1)n=t[r];for(;r<t.length;r+=1)n.compareTo(t[r])>0&&(n=t[r]);return n}};function _a(e,t=0,n=!1){if(n)throw new Error("big-endian virtual file offsets not implemented");return new w_(e[t+7]*1099511627776+e[t+6]*4294967296+e[t+5]*16777216+e[t+4]*65536+e[t+3]*256+e[t+2],e[t+1]<<8|e[t])}let x_=class{constructor(t,n,r,i){this.minv=t,this.maxv=n,this.bin=r,this._fetchedSize=i}toUniqueString(){return`${this.minv}..${this.maxv} (bin ${this.bin}, fetchedSize ${this.fetchedSize()})`}toString(){return this.toUniqueString()}compareTo(t){return this.minv.compareTo(t.minv)||this.maxv.compareTo(t.maxv)||this.bin-t.bin}fetchedSize(){return this._fetchedSize!==void 0?this._fetchedSize:this.maxv.blockPosition+65536-this.minv.blockPosition}};function Az(e){return new Promise(t=>setTimeout(t,e))}function Ez(e){if(e.greaterThan(Number.MAX_SAFE_INTEGER)||e.lessThan(Number.MIN_SAFE_INTEGER))throw new Error("integer overflow");return e.toNumber()}function _z(e){if(e&&e.aborted)if(typeof DOMException>"u"){const t=new Error("aborted");throw t.code="ERR_ABORTED",t}else throw new DOMException("aborted","AbortError")}function Sz(e,t){return t.minv.blockPosition-e.maxv.blockPosition<65e3&&t.maxv.blockPosition-e.minv.blockPosition<5e6}function Cz(e={}){return"aborted"in e?{signal:e}:e}function v_(e,t){const n=[];let r;if(e.length===0)return e;e.sort((i,o)=>{const a=i.minv.blockPosition-o.minv.blockPosition;return a===0?i.minv.dataPosition-o.minv.dataPosition:a});for(const i of e)(!t||i.maxv.compareTo(t)>0)&&(r===void 0?(n.push(i),r=i):Sz(r,i)?i.maxv.compareTo(r.maxv)>0&&(r.maxv=i.maxv):(n.push(i),r=i));return n}function A_(e,t){return{lineCount:Ez(mc.fromBytesLE(Array.prototype.slice.call(e,t,t+8),!0))}}function Gc(e,t){return e?e.compareTo(t)>0?t:e:t}function kz(e,t=n=>n){let n=0,r=0;const i=[],o={};for(let a=0;a<e.length;a+=1)if(!e[a]){if(r<a){let s=e.toString("utf8",r,a);s=t(s),i[n]=s,o[s]=n}r=a+1,n+=1}return{refNameToId:o,refIdToName:i}}let E_=class{constructor({filehandle:t,renameRefSeq:n=r=>r}){this.filehandle=t,this.renameRefSeq=n}};const Tz=21578050;function Iz(e,t){return e-e%t}function Bz(e,t){return e-e%t+t}function Dz(e,t){return t-=1,[[0,0],[1+(e>>26),1+(t>>26)],[9+(e>>23),9+(t>>23)],[73+(e>>20),73+(t>>20)],[585+(e>>17),585+(t>>17)],[4681+(e>>14),4681+(t>>14)]]}class Sa extends E_{async lineCount(t,n){var r,i;return((i=(r=(await this.parse(n)).indices[t])===null||r===void 0?void 0:r.stats)===null||i===void 0?void 0:i.lineCount)||0}async _parse(t){const n=await this.filehandle.readFile(t);if(n.readUInt32LE(0)!==Tz)throw new Error("Not a BAI file");const r=n.readInt32LE(4),o=((1<<(5+1)*3)-1)/7;let a=8,s;const f=new Array(r);for(let l=0;l<r;l++){const u=n.readInt32LE(a);let c;a+=4;const h={};for(let m=0;m<u;m+=1){const y=n.readUInt32LE(a);if(a+=4,y===o+1)a+=4,c=A_(n,a+16),a+=32;else{if(y>o+1)throw new Error("bai index contains too many bins, please use CSI");{const w=n.readInt32LE(a);a+=4;const A=new Array(w);for(let S=0;S<w;S++){const _=_a(n,a);a+=8;const T=_a(n,a);a+=8,s=Gc(s,_),A[S]=new x_(_,T,y)}h[y]=A}}}const d=n.readInt32LE(a);a+=4;const p=new Array(d);for(let m=0;m<d;m++){const y=_a(n,a);a+=8,s=Gc(s,y),p[m]=y}f[l]={binIndex:h,linearIndex:p,stats:c}}return{bai:!0,firstDataLine:s,maxBlockSize:65536,indices:f,refCount:r}}async indexCov(t,n,r,i={}){const a=n!==void 0,f=(await this.parse(i)).indices[t];if(!f)return[];const{linearIndex:l=[],stats:u}=f;if(l.length===0)return[];const c=r===void 0?(l.length-1)*16384:Bz(r,16384),h=n===void 0?0:Iz(n,16384),d=a?new Array((c-h)/16384):new Array(l.length-1),p=l[l.length-1].blockPosition;if(c>(l.length-1)*16384)throw new Error("query outside of range of linear index");let m=l[h/16384].blockPosition;for(let y=h/16384,w=0;y<c/16384;y++,w++)d[w]={score:l[y+1].blockPosition-m,start:y*16384,end:y*16384+16384},m=l[y+1].blockPosition;return d.map(y=>({...y,score:y.score*((u==null?void 0:u.lineCount)||0)/p}))}async blocksForRange(t,n,r,i={}){n<0&&(n=0);const o=await this.parse(i);if(!o)return[];const a=o.indices[t];if(!a)return[];const s=Dz(n,r),f=[];for(const[d,p]of s)for(let m=d;m<=p;m++)if(a.binIndex[m]){const y=a.binIndex[m];for(const w of y)f.push(w)}const l=a.linearIndex.length;let u;const c=Math.min(n>>14,l-1),h=Math.min(r>>14,l-1);for(let d=c;d<=h;++d){const p=a.linearIndex[d];p&&(!u||p.compareTo(u)<0)&&(u=p)}return v_(f,u)}async parse(t={}){return this.setupP||(this.setupP=this._parse(t).catch(n=>{throw this.setupP=void 0,n})),this.setupP}async hasRefSeq(t,n={}){var r;return!!(!((r=(await this.parse(n)).indices[t])===null||r===void 0)&&r.binIndex)}}var pi=ge.Buffer,Eg=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(Eg=new Int32Array(Eg));function __(e){if(pi.isBuffer(e))return e;var t=typeof pi.alloc=="function"&&typeof pi.from=="function";if(typeof e=="number")return t?pi.alloc(e):new pi(e);if(typeof e=="string")return t?pi.from(e):new pi(e);throw new Error("input must be buffer, number, or string, received "+typeof e)}function Fz(e){var t=__(4);return t.writeInt32BE(e,0),t}function _g(e,t){e=__(e),pi.isBuffer(t)&&(t=t.readUInt32BE(0));for(var n=~~t^-1,r=0;r<e.length;r++)n=Eg[(n^e[r])&255]^n>>>8;return n^-1}function Sg(){return Fz(_g.apply(null,arguments))}Sg.signed=function(){return _g.apply(null,arguments)},Sg.unsigned=function(){return _g.apply(null,arguments)>>>0};var Rz=Sg;const Mz=ol(Rz),Pz=21582659,Oz=38359875;function Lz(e,t){return e*2**t}function S_(e,t){return Math.floor(e/2**t)}let Hc=class extends E_{constructor(){super(...arguments),this.maxBinNumber=0,this.depth=0,this.minShift=0}async lineCount(t,n){var r,i;return((i=(r=(await this.parse(n)).indices[t])===null||r===void 0?void 0:r.stats)===null||i===void 0?void 0:i.lineCount)||0}async indexCov(){return[]}parseAuxData(t,n){const r=t.readInt32LE(n),i=r&65536?"zero-based-half-open":"1-based-closed",o={0:"generic",1:"SAM",2:"VCF"}[r&15];if(!o)throw new Error(`invalid Tabix preset format flags ${r}`);const a={ref:t.readInt32LE(n+4),start:t.readInt32LE(n+8),end:t.readInt32LE(n+12)},s=t.readInt32LE(n+16),f=s?String.fromCharCode(s):"",l=t.readInt32LE(n+20),u=t.readInt32LE(n+24);return{columnNumbers:a,coordinateType:i,metaValue:s,metaChar:f,skipLines:l,format:o,formatFlags:r,...kz(t.subarray(n+28,n+28+u),this.renameRefSeq)}}async _parse(t){const n=await this.filehandle.readFile(t),r=await ai(n);let i;if(r.readUInt32LE(0)===Pz)i=1;else if(r.readUInt32LE(0)===Oz)i=2;else throw new Error("Not a CSI file");this.minShift=r.readInt32LE(4),this.depth=r.readInt32LE(8),this.maxBinNumber=((1<<(this.depth+1)*3)-1)/7;const o=r.readInt32LE(12),a=o>=30?this.parseAuxData(r,16):void 0,s=r.readInt32LE(16+o);let f=16+o+4,l;const u=new Array(s);for(let c=0;c<s;c++){const h=r.readInt32LE(f);f+=4;const d={};let p;for(let m=0;m<h;m++){const y=r.readUInt32LE(f);if(f+=4,y>this.maxBinNumber)p=A_(r,f+28),f+=28+16;else{l=Gc(l,_a(r,f)),f+=8;const w=r.readInt32LE(f);f+=4;const A=new Array(w);for(let S=0;S<w;S+=1){const _=_a(r,f);f+=8;const T=_a(r,f);f+=8,l=Gc(l,_),A[S]=new x_(_,T,y)}d[y]=A}}u[c]={binIndex:d,stats:p}}return{csiVersion:i,firstDataLine:l,indices:u,refCount:s,csi:!0,maxBlockSize:65536,...a}}async blocksForRange(t,n,r,i={}){n<0&&(n=0);const o=await this.parse(i),a=o==null?void 0:o.indices[t];if(!a)return[];const s=this.reg2bins(n,r);if(s.length===0)return[];const f=[];for(const[l,u]of s)for(let c=l;c<=u;c++)if(a.binIndex[c]){const h=a.binIndex[c];for(const d of h)f.push(d)}return v_(f,new w_(0,0))}reg2bins(t,n){t-=1,t<1&&(t=1),n>2**50&&(n=2**34),n-=1;let r=0,i=0,o=this.minShift+this.depth*3;const a=[];for(;r<=this.depth;o-=3,i+=Lz(1,r*3),r+=1){const s=i+S_(t,o),f=i+S_(n,o);if(f-s+a.length>this.maxBinNumber)throw new Error(`query ${t}-${n} is too large for current binning scheme (shift ${this.minShift}, depth ${this.depth}), try a smaller query or a coarser index binning scheme`);a.push([s,f])}return a}async parse(t={}){return this.setupP||(this.setupP=this._parse(t).catch(n=>{throw this.setupP=void 0,n})),this.setupP}async hasRefSeq(t,n={}){var r;return!!(!((r=(await this.parse(n)).indices[t])===null||r===void 0)&&r.binIndex)}};const gn={BAM_FPAIRED:1,BAM_FPROPER_PAIR:2,BAM_FUNMAP:4,BAM_FMUNMAP:8,BAM_FREVERSE:16,BAM_FMREVERSE:32,BAM_FREAD1:64,BAM_FREAD2:128,BAM_FSECONDARY:256,BAM_FQCFAIL:512,BAM_FDUP:1024,BAM_FSUPPLEMENTARY:2048},C_="=ACMGRSVTWYHKDBN".split(""),$l="MIDNSHP=X???????".split("");class k_{constructor(t){this.data={},this._tagList=[],this._allTagsParsed=!1;const{bytes:n,fileOffset:r}=t,{byteArray:i,start:o}=n;this.data={},this.bytes=n,this._id=r,this._refID=i.readInt32LE(o+4),this.data.start=i.readInt32LE(o+8),this.flags=(i.readInt32LE(o+16)&4294901760)>>16}get(t){return this[t]?this.data[t]?this.data[t]:(this.data[t]=this[t](),this.data[t]):this._get(t.toLowerCase())}end(){return this.get("start")+this.get("length_on_ref")}seq_id(){return this._refID}_get(t){return t in this.data?this.data[t]:(this.data[t]=this._parseTag(t),this.data[t])}_tags(){this._parseAllTags();let t=["seq"];this.isSegmentUnmapped()||t.push("start","end","strand","score","qual","MQ","CIGAR","length_on_ref","template_length"),this.isPaired()&&t.push("next_segment_position","pair_orientation"),t=t.concat(this._tagList||[]);for(const r of Object.keys(this.data))r[0]!=="_"&&r!=="next_seq_id"&&t.push(r);const n={};return t.filter(r=>{if(r in this.data&&this.data[r]===void 0||r==="CG"||r==="cg")return!1;const i=r.toLowerCase(),o=n[i];return n[i]=!0,!o})}parent(){}children(){return this.get("subfeatures")}id(){return this._id}mq(){const t=(this.get("_bin_mq_nl")&65280)>>8;return t===255?void 0:t}score(){return this.get("mq")}qual(){var t;return(t=this.qualRaw())===null||t===void 0?void 0:t.join(" ")}qualRaw(){if(this.isSegmentUnmapped())return;const{start:t,byteArray:n}=this.bytes,r=t+36+this.get("_l_read_name")+this.get("_n_cigar_op")*4+this.get("_seq_bytes"),i=this.get("seq_length");return n.subarray(r,r+i)}strand(){return this.isReverseComplemented()?-1:1}multi_segment_next_segment_strand(){if(!this.isMateUnmapped())return this.isMateReverseComplemented()?-1:1}name(){return this.get("_read_name")}_read_name(){const t=this.get("_l_read_name"),{byteArray:n,start:r}=this.bytes;return n.toString("ascii",r+36,r+36+t-1)}_parseTag(t){if(this._allTagsParsed)return;const{byteArray:n,start:r}=this.bytes;let i=this._tagOffset||r+36+this.get("_l_read_name")+this.get("_n_cigar_op")*4+this.get("_seq_bytes")+this.get("seq_length");const o=this.bytes.end;let a;for(;i<o&&a!==t;){const s=String.fromCharCode(n[i],n[i+1]);a=s.toLowerCase();const f=String.fromCharCode(n[i+2]);i+=3;let l;switch(f){case"A":{l=String.fromCharCode(n[i]),i+=1;break}case"i":{l=n.readInt32LE(i),i+=4;break}case"I":{l=n.readUInt32LE(i),i+=4;break}case"c":{l=n.readInt8(i),i+=1;break}case"C":{l=n.readUInt8(i),i+=1;break}case"s":{l=n.readInt16LE(i),i+=2;break}case"S":{l=n.readUInt16LE(i),i+=2;break}case"f":{l=n.readFloatLE(i),i+=4;break}case"Z":case"H":{for(l="";i<=o;){const u=n[i++];if(u===0)break;l+=String.fromCharCode(u)}break}case"B":{l="";const u=n[i++],c=String.fromCharCode(u),h=n.readInt32LE(i);if(i+=4,c==="i")if(s==="CG")for(let d=0;d<h;d++){const p=n.readInt32LE(i),m=p>>4,y=$l[p&15];l+=m+y,i+=4}else for(let d=0;d<h;d++)l+=n.readInt32LE(i),d+1<h&&(l+=","),i+=4;if(c==="I")if(s==="CG")for(let d=0;d<h;d++){const p=n.readUInt32LE(i),m=p>>4,y=$l[p&15];l+=m+y,i+=4}else for(let d=0;d<h;d++)l+=n.readUInt32LE(i),d+1<h&&(l+=","),i+=4;if(c==="s")for(let d=0;d<h;d++)l+=n.readInt16LE(i),d+1<h&&(l+=","),i+=2;if(c==="S")for(let d=0;d<h;d++)l+=n.readUInt16LE(i),d+1<h&&(l+=","),i+=2;if(c==="c")for(let d=0;d<h;d++)l+=n.readInt8(i),d+1<h&&(l+=","),i+=1;if(c==="C")for(let d=0;d<h;d++)l+=n.readUInt8(i),d+1<h&&(l+=","),i+=1;if(c==="f")for(let d=0;d<h;d++)l+=n.readFloatLE(i),d+1<h&&(l+=","),i+=4;break}default:console.warn(`Unknown BAM tag type '${f}', tags may be incomplete`),l=void 0,i=o}if(this._tagOffset=i,this._tagList.push(s),a===t)return l;this.data[a]=l}this._allTagsParsed=!0}_parseAllTags(){this._parseTag("")}_parseCigar(t){return t.match(/\d+\D/g).map(n=>[n.match(/\D/)[0].toUpperCase(),Number.parseInt(n,10)])}isPaired(){return!!(this.flags&gn.BAM_FPAIRED)}isProperlyPaired(){return!!(this.flags&gn.BAM_FPROPER_PAIR)}isSegmentUnmapped(){return!!(this.flags&gn.BAM_FUNMAP)}isMateUnmapped(){return!!(this.flags&gn.BAM_FMUNMAP)}isReverseComplemented(){return!!(this.flags&gn.BAM_FREVERSE)}isMateReverseComplemented(){return!!(this.flags&gn.BAM_FMREVERSE)}isRead1(){return!!(this.flags&gn.BAM_FREAD1)}isRead2(){return!!(this.flags&gn.BAM_FREAD2)}isSecondary(){return!!(this.flags&gn.BAM_FSECONDARY)}isFailedQc(){return!!(this.flags&gn.BAM_FQCFAIL)}isDuplicate(){return!!(this.flags&gn.BAM_FDUP)}isSupplementary(){return!!(this.flags&gn.BAM_FSUPPLEMENTARY)}cigar(){if(this.isSegmentUnmapped())return;const{byteArray:t,start:n}=this.bytes,r=this.get("_n_cigar_op");let i=n+36+this.get("_l_read_name");const o=this.get("seq_length");let a="",s=0,f=t.readInt32LE(i),l=f>>4,u=$l[f&15];if(u==="S"&&l===o)return i+=4,f=t.readInt32LE(i),l=f>>4,u=$l[f&15],u!=="N"&&console.warn("CG tag with no N tag"),this.data.length_on_ref=l,this.get("CG");for(let c=0;c<r;++c)f=t.readInt32LE(i),l=f>>4,u=$l[f&15],a+=l+u,u!=="H"&&u!=="S"&&u!=="I"&&(s+=l),i+=4;return this.data.length_on_ref=s,a}_flags(){}length_on_ref(){return this.data.length_on_ref?this.data.length_on_ref:(this.get("cigar"),this.data.length_on_ref)}_n_cigar_op(){return this.get("_flag_nc")&65535}_l_read_name(){return this.get("_bin_mq_nl")&255}_seq_bytes(){return this.get("seq_length")+1>>1}getReadBases(){return this.seq()}seq(){const{byteArray:t,start:n}=this.bytes,r=n+36+this.get("_l_read_name")+this.get("_n_cigar_op")*4,i=this.get("_seq_bytes"),o=this.get("seq_length");let a="",s=0;for(let f=0;f<i;++f){const l=t[r+f];a+=C_[(l&240)>>4],s++,s<o&&(a+=C_[l&15],s++)}return a}getPairOrientation(){if(!this.isSegmentUnmapped()&&!this.isMateUnmapped()&&this._refID===this._next_refid()){const t=this.isReverseComplemented()?"R":"F",n=this.isMateReverseComplemented()?"R":"F";let r=" ",i=" ";this.isRead1()?(r="1",i="2"):this.isRead2()&&(r="2",i="1");const o=[];return this.template_length()>0?(o[0]=t,o[1]=r,o[2]=n,o[3]=i):(o[2]=t,o[3]=r,o[0]=n,o[1]=i),o.join("")}return""}_bin_mq_nl(){return this.bytes.byteArray.readInt32LE(this.bytes.start+12)}_flag_nc(){return this.bytes.byteArray.readInt32LE(this.bytes.start+16)}seq_length(){return this.bytes.byteArray.readInt32LE(this.bytes.start+20)}_next_refid(){return this.bytes.byteArray.readInt32LE(this.bytes.start+24)}_next_pos(){return this.bytes.byteArray.readInt32LE(this.bytes.start+28)}template_length(){return this.bytes.byteArray.readInt32LE(this.bytes.start+32)}toJSON(){const t={};for(const n of Object.keys(this))n.charAt(0)==="_"||n==="bytes"||(t[n]=this[n]);return t}}function T_(e){const t=e.split(/\r?\n/),n=[];for(const r of t){const[i,...o]=r.split(/\t/);i&&n.push({tag:i.slice(1),data:o.map(a=>{const[s,f]=a.split(":",2);return{tag:s,value:f}})})}return n}const I_=21840194,B_=65536;async function Nz(e){let t=[];for await(const n of e)t=t.concat(n);return t}class zz{read(){throw new Error("never called")}stat(){throw new Error("never called")}readFile(){throw new Error("never called")}close(){throw new Error("never called")}}class D_{constructor({bamFilehandle:t,bamPath:n,bamUrl:r,baiPath:i,baiFilehandle:o,baiUrl:a,csiPath:s,csiFilehandle:f,csiUrl:l,htsget:u,yieldThreadTime:c=100,renameRefSeqs:h=d=>d}){if(this.htsget=!1,this.featureCache=new _c({cache:new Sc({maxSize:50}),fill:async(d,p)=>{const{chunk:m,opts:y}=d,{data:w,cpositions:A,dpositions:S}=await this._readChunk({chunk:m,opts:{...y,signal:p}});return this.readBamFeatures(w,A,S,m)}}),this.renameRefSeq=h,t)this.bam=t;else if(n)this.bam=new dt(n);else if(r)this.bam=new Xi(r);else if(u)this.htsget=!0,this.bam=new zz;else throw new Error("unable to initialize bam");if(f)this.index=new Hc({filehandle:f});else if(s)this.index=new Hc({filehandle:new dt(s)});else if(l)this.index=new Hc({filehandle:new Xi(l)});else if(o)this.index=new Sa({filehandle:o});else if(i)this.index=new Sa({filehandle:new dt(i)});else if(a)this.index=new Sa({filehandle:new Xi(a)});else if(n)this.index=new Sa({filehandle:new dt(`${n}.bai`)});else if(r)this.index=new Sa({filehandle:new Xi(`${r}.bai`)});else if(u)this.htsget=!0;else throw new Error("unable to infer index format");this.yieldThreadTime=c}async getHeaderPre(t){const n=Cz(t);if(!this.index)return;const r=await this.index.parse(n),i=r.firstDataLine?r.firstDataLine.blockPosition+65535:void 0;let o;if(i){const u=i+B_,c=await this.bam.read(ge.Buffer.alloc(u),0,u,0,n);if(!c.bytesRead)throw new Error("Error reading header");o=c.buffer.subarray(0,Math.min(c.bytesRead,i))}else o=await this.bam.readFile(n);const a=await ai(o);if(a.readInt32LE(0)!==I_)throw new Error("Not a BAM file");const s=a.readInt32LE(4);this.header=a.toString("utf8",8,8+s);const{chrToIndex:f,indexToChr:l}=await this._readRefSeqs(s+8,65535,n);return this.chrToIndex=f,this.indexToChr=l,T_(this.header)}getHeader(t){return this.headerP||(this.headerP=this.getHeaderPre(t).catch(n=>{throw this.headerP=void 0,n})),this.headerP}async getHeaderText(t={}){return await this.getHeader(t),this.header}async _readRefSeqs(t,n,r){if(t>n)return this._readRefSeqs(t,n*2,r);const i=n+B_,{bytesRead:o,buffer:a}=await this.bam.read(ge.Buffer.alloc(i),0,n,0,r);if(!o)throw new Error("Error reading refseqs from header");const s=await ai(a.subarray(0,Math.min(o,n))),f=s.readInt32LE(t);let l=t+4;const u={},c=[];for(let h=0;h<f;h+=1){const d=s.readInt32LE(l),p=this.renameRefSeq(s.toString("utf8",l+4,l+4+d-1)),m=s.readInt32LE(l+d+4);if(u[p]=h,c.push({refName:p,length:m}),l=l+8+d,l>s.length)return console.warn(`BAM header is very big.  Re-fetching ${n} bytes.`),this._readRefSeqs(t,n*2,r)}return{chrToIndex:u,indexToChr:c}}async getRecordsForRange(t,n,r,i){return Nz(this.streamRecordsForRange(t,n,r,i))}async*streamRecordsForRange(t,n,r,i){var o;await this.getHeader(i);const a=(o=this.chrToIndex)===null||o===void 0?void 0:o[t];if(a===void 0||!this.index)yield[];else{const s=await this.index.blocksForRange(a,n-1,r,i);yield*this._fetchChunkFeatures(s,a,n,r,i)}}async*_fetchChunkFeatures(t,n,r,i,o={}){const{viewAsPairs:a}=o,s=[];let f=!1;for(const l of t){const u=await this.featureCache.get(l.toString(),{chunk:l,opts:o},o.signal),c=[];for(const h of u)if(h.seq_id()===n)if(h.get("start")>=i){f=!0;break}else h.get("end")>=r&&c.push(h);if(s.push(c),yield c,f)break}_z(o.signal),a&&(yield this.fetchPairs(n,s,o))}async fetchPairs(t,n,r){const{pairAcrossChr:i,maxInsertSize:o=2e5}=r,a={},s={};n.map(h=>{const d={};for(const p of h){const m=p.name(),y=p.id();d[m]||(d[m]=0),d[m]++,s[y]=1}for(const[p,m]of Object.entries(d))m===1&&(a[p]=!0)});const f=[];n.map(h=>{for(const d of h){const p=d.name(),m=d.get("start"),y=d._next_pos(),w=d._next_refid();this.index&&a[p]&&(i||w===t&&Math.abs(m-y)<o)&&f.push(this.index.blocksForRange(w,y,y+1,r))}});const l=new Map,u=await Promise.all(f);for(const h of u.flat())l.has(h.toString())||l.set(h.toString(),h);return(await Promise.all([...l.values()].map(async h=>{const{data:d,cpositions:p,dpositions:m,chunk:y}=await this._readChunk({chunk:h,opts:r}),w=[];for(const A of await this.readBamFeatures(d,p,m,y))a[A.get("name")]&&!s[A.id()]&&w.push(A);return w}))).flat()}async _readRegion(t,n,r={}){const{bytesRead:i,buffer:o}=await this.bam.read(ge.Buffer.alloc(n),0,n,t,r);return o.subarray(0,Math.min(i,n))}async _readChunk({chunk:t,opts:n}){const r=await this._readRegion(t.minv.blockPosition,t.fetchedSize(),n),{buffer:i,cpositions:o,dpositions:a}=await XA(r,t);return{data:i,cpositions:o,dpositions:a,chunk:t}}async readBamFeatures(t,n,r,i){let o=0;const a=[];let s=0,f=+Date.now();for(;o+4<t.length;){const l=t.readInt32LE(o),u=o+4+l-1;if(r){for(;o+i.minv.dataPosition>=r[s++];);s--}if(u<t.length){const c=new k_({bytes:{byteArray:t,start:o,end:u},fileOffset:n.length>0?n[s]*256+(o-r[s])+i.minv.dataPosition+1:Mz.signed(t.slice(o,u))});a.push(c),this.yieldThreadTime&&+Date.now()-f>this.yieldThreadTime&&(await Az(1),f=+Date.now())}o=u+1}return a}async hasRefSeq(t){var n,r;const i=(n=this.chrToIndex)===null||n===void 0?void 0:n[t];return i===void 0?!1:(r=this.index)===null||r===void 0?void 0:r.hasRefSeq(i)}async lineCount(t){var n;const r=(n=this.chrToIndex)===null||n===void 0?void 0:n[t];return r===void 0||!this.index?0:this.index.lineCount(r)}async indexCov(t,n,r){var i;if(!this.index)return[];await this.index.parse();const o=(i=this.chrToIndex)===null||i===void 0?void 0:i[t];return o===void 0?[]:this.index.indexCov(o,n,r)}async blocksForRange(t,n,r,i){var o;if(!this.index)return[];await this.index.parse();const a=(o=this.chrToIndex)===null||o===void 0?void 0:o[t];return a===void 0?[]:this.index.blocksForRange(a,n,r,i)}}async function F_(e,t){const n=await Promise.all(e.map(async r=>{const{url:i,headers:o}=r;if(i.startsWith("data:"))return ge.Buffer.from(i.split(",")[1],"base64");{const{referer:a,...s}=o,f=await fetch(i,{...t,headers:{...t==null?void 0:t.headers,...s}});if(!f.ok)throw new Error(`HTTP ${f.status} fetching ${i}: ${await f.text()}`);return ge.Buffer.from(await f.arrayBuffer())}}));return ge.Buffer.concat(await Promise.all(n.map(r=>ai(r))))}class Uz extends D_{constructor(t){super({htsget:!0}),this.baseUrl=t.baseUrl,this.trackId=t.trackId}async*streamRecordsForRange(t,n,r,i){var o;const s=`${`${this.baseUrl}/${this.trackId}`}?referenceName=${t}&start=${n}&end=${r}&format=BAM`,f=(o=this.chrToIndex)===null||o===void 0?void 0:o[t];if(f===void 0)yield[];else{const l=await fetch(s,{...i});if(!l.ok)throw new Error(`HTTP ${l.status} fetching ${s}: ${await l.text()}`);const u=await l.json(),c=await F_(u.htsget.urls.slice(1),i);yield*this._fetchChunkFeatures([{buffer:c,_fetchedSize:void 0,bin:0,compareTo(){return 0},toUniqueString(){return`${t}_${n}_${r}`},fetchedSize(){return 0},minv:{dataPosition:0,blockPosition:0,compareTo:()=>0},maxv:{dataPosition:Number.MAX_SAFE_INTEGER,blockPosition:0,compareTo:()=>0},toString(){return`${t}_${n}_${r}`}}],f,n,r,i)}}async _readChunk({chunk:t}){if(!t.buffer)throw new Error("expected chunk.buffer in htsget");return{data:t.buffer,cpositions:[],dpositions:[],chunk:t}}async getHeader(t={}){const n=`${this.baseUrl}/${this.trackId}?referenceName=na&class=header`,r=await fetch(n,t);if(!r.ok)throw new Error(`HTTP ${r.status} fetching ${n}: ${await r.text()}`);const i=await r.json(),o=await F_(i.htsget.urls,t);if(o.readInt32LE(0)!==I_)throw new Error("Not a BAM file");const a=o.readInt32LE(4),s=o.toString("utf8",8,8+a),f=T_(s),l=[],u={},c=f.filter(h=>h.tag==="SQ");for(const[h,d]of c.entries()){let p="",m=0;for(const y of d.data)y.tag==="SN"?p=y.value:y.tag==="LN"&&(m=+y.value);u[p]=h,l[h]={refName:p,length:m}}return this.chrToIndex=u,this.indexToChr=l,f}}const Gz=Object.freeze(Object.defineProperty({__proto__:null,BAI:Sa,BamFile:D_,BamRecord:k_,CSI:Hc,HtsgetFile:Uz},Symbol.toStringTag,{value:"Module"}));function R_(e){if(e.greaterThan(Number.MAX_SAFE_INTEGER)||e.lessThan(Number.MIN_SAFE_INTEGER))throw new Error("integer overflow");return e.toNumber()}class Hz extends Error{}function Ca(e){if(e&&e.aborted){if(typeof DOMException<"u")throw new DOMException("aborted","AbortError");{const t=new Hz("aborted");throw t.code="ERR_ABORTED",t}}}function Vz(e,t){return t.minv.blockPosition-e.maxv.blockPosition<65e3&&t.maxv.blockPosition-e.minv.blockPosition<5e6}function M_(e,t){const n=[];let r=null;return e.length===0?e:(e.sort(function(i,o){const a=i.minv.blockPosition-o.minv.blockPosition;return a!==0?a:i.minv.dataPosition-o.minv.dataPosition}),e.forEach(i=>{(!t||i.maxv.compareTo(t)>0)&&(r===null?(n.push(i),r=i):Vz(r,i)?i.maxv.compareTo(r.maxv)>0&&(r.maxv=i.maxv):(n.push(i),r=i))}),n)}class Cg{constructor(t,n){this.blockPosition=t,this.dataPosition=n}toString(){return`${this.blockPosition}:${this.dataPosition}`}compareTo(t){return this.blockPosition-t.blockPosition||this.dataPosition-t.dataPosition}static min(...t){let n,r=0;for(;!n;r+=1)n=t[r];for(;r<t.length;r+=1)n.compareTo(t[r])>0&&(n=t[r]);return n}}function ka(e,t=0,n=!1){if(n)throw new Error("big-endian virtual file offsets not implemented");return new Cg(e[t+7]*1099511627776+e[t+6]*4294967296+e[t+5]*16777216+e[t+4]*65536+e[t+3]*256+e[t+2],e[t+1]<<8|e[t])}class Vc{constructor(t,n,r,i=void 0){this.minv=t,this.maxv=n,this.bin=r,this._fetchedSize=i}toUniqueString(){return`${this.minv}..${this.maxv} (bin ${this.bin}, fetchedSize ${this.fetchedSize()})`}toString(){return this.toUniqueString()}compareTo(t){return this.minv.compareTo(t.minv)||this.maxv.compareTo(t.maxv)||this.bin-t.bin}fetchedSize(){return this._fetchedSize!==void 0?this._fetchedSize:this.maxv.blockPosition+65536-this.minv.blockPosition}}class P_{constructor({filehandle:t,renameRefSeqs:n=r=>r}){this.filehandle=t,this.renameRefSeq=n}async getMetadata(t={}){const{indices:n,...r}=await this.parse(t);return r}_findFirstData(t,n){return t?t.compareTo(n)>0?n:t:n}async parse(t={}){return this.parseP||(this.parseP=this._parse(t).catch(n=>{throw this.parseP=void 0,n})),this.parseP}async hasRefSeq(t,n={}){var r;return!!(!((r=(await this.parse(n)).indices[t])===null||r===void 0)&&r.binIndex)}}const jz=21578324,O_=14;function $z(e,t){return e+=1,t-=1,[[0,0],[1+(e>>26),1+(t>>26)],[9+(e>>23),9+(t>>23)],[73+(e>>20),73+(t>>20)],[585+(e>>17),585+(t>>17)],[4681+(e>>14),4681+(t>>14)]]}class jc extends P_{async lineCount(t,n={}){const r=await this.parse(n);if(!r)return-1;const i=r.refNameToId[t];if(!r.indices[i])return-1;const{stats:a}=r.indices[i];return a?a.lineCount:-1}async _parse(t={}){const n=await this.filehandle.readFile(t),r=await ai(n);if(Ca(t.signal),r.readUInt32LE(0)!==jz)throw new Error("Not a TBI file");const i=r.readInt32LE(4),o=r.readInt32LE(8),a=o&65536?"zero-based-half-open":"1-based-closed",f={0:"generic",1:"SAM",2:"VCF"}[o&15];if(!f)throw new Error(`invalid Tabix preset format flags ${o}`);const l={ref:r.readInt32LE(12),start:r.readInt32LE(16),end:r.readInt32LE(20)},u=r.readInt32LE(24),c=5,h=((1<<(c+1)*3)-1)/7,d=2**(14+c*3),p=u?String.fromCharCode(u):null,m=r.readInt32LE(28),y=r.readInt32LE(32),{refNameToId:w,refIdToName:A}=this._parseNameBytes(r.slice(36,36+y));let S=36+y,_;return{indices:new Array(i).fill(0).map(()=>{const I=r.readInt32LE(S);S+=4;const B={};let F;for(let N=0;N<I;N+=1){const re=r.readUInt32LE(S);if(S+=4,re>h+1)throw new Error("tabix index contains too many bins, please use a CSI index");if(re===h+1){const se=r.readInt32LE(S);S+=4,se===2&&(F=this.parsePseudoBin(r,S)),S+=16*se}else{const se=r.readInt32LE(S);S+=4;const te=new Array(se);for(let pe=0;pe<se;pe+=1){const Xe=ka(r,S),De=ka(r,S+8);S+=16,_=this._findFirstData(_,Xe),te[pe]=new Vc(Xe,De,re)}B[re]=te}}const M=r.readInt32LE(S);S+=4;const G=new Array(M);for(let N=0;N<M;N+=1)G[N]=ka(r,S),S+=8,_=this._findFirstData(_,G[N]);return{binIndex:B,linearIndex:G,stats:F}}),metaChar:p,maxBinNumber:h,maxRefLength:d,skipLines:m,firstDataLine:_,columnNumbers:l,coordinateType:a,format:f,refIdToName:A,refNameToId:w,maxBlockSize:65536}}parsePseudoBin(t,n){return{lineCount:R_(mc.fromBytesLE(t.slice(n+16,n+24),!0))}}_parseNameBytes(t){let n=0,r=0;const i=[],o={};for(let a=0;a<t.length;a+=1)if(!t[a]){if(r<a){let s=t.toString("utf8",r,a);s=this.renameRefSeq(s),i[n]=s,o[s]=n}r=a+1,n+=1}return{refNameToId:o,refIdToName:i}}async blocksForRange(t,n,r,i={}){n<0&&(n=0);const o=await this.parse(i);if(!o)return[];const a=o.refNameToId[t],s=o.indices[a];if(!s)return[];(s.linearIndex.length?s.linearIndex[n>>O_>=s.linearIndex.length?s.linearIndex.length-1:n>>O_]:new Cg(0,0))||console.warn("querying outside of possible tabix range");const l=$z(n,r),u=[];for(const[m,y]of l)for(let w=m;w<=y;w++)if(s.binIndex[w])for(const A of s.binIndex[w])u.push(new Vc(A.minv,A.maxv,w));const c=s.linearIndex.length;let h=null;const d=Math.min(n>>14,c-1),p=Math.min(r>>14,c-1);for(let m=d;m<=p;++m){const y=s.linearIndex[m];y&&(!h||y.compareTo(h)<0)&&(h=y)}return M_(u,h)}}const qz=21582659,Wz=38359875;function Zz(e,t){return e*2**t}function L_(e,t){return Math.floor(e/2**t)}class kg extends P_{constructor(t){super(t),this.maxBinNumber=0,this.depth=0,this.minShift=0}async lineCount(t,n={}){const r=await this.parse(n);if(!r)return-1;const i=r.refNameToId[t];if(!r.indices[i])return-1;const{stats:a}=r.indices[i];return a?a.lineCount:-1}indexCov(){throw new Error("CSI indexes do not support indexcov")}parseAuxData(t,n){const r=t.readInt32LE(n),i=r&65536?"zero-based-half-open":"1-based-closed",o={0:"generic",1:"SAM",2:"VCF"}[r&15];if(!o)throw new Error(`invalid Tabix preset format flags ${r}`);const a={ref:t.readInt32LE(n+4),start:t.readInt32LE(n+8),end:t.readInt32LE(n+12)},s=t.readInt32LE(n+16),f=s?String.fromCharCode(s):null,l=t.readInt32LE(n+20),u=t.readInt32LE(n+24),{refIdToName:c,refNameToId:h}=this._parseNameBytes(t.slice(n+28,n+28+u));return{refIdToName:c,refNameToId:h,skipLines:l,metaChar:f,columnNumbers:a,format:o,coordinateType:i}}_parseNameBytes(t){let n=0,r=0;const i=[],o={};for(let a=0;a<t.length;a+=1)if(!t[a]){if(r<a){let s=t.toString("utf8",r,a);s=this.renameRefSeq(s),i[n]=s,o[s]=n}r=a+1,n+=1}return{refNameToId:o,refIdToName:i}}async _parse(t={}){const n=await ai(await this.filehandle.readFile(t));let r;if(n.readUInt32LE(0)===qz)r=1;else if(n.readUInt32LE(0)===Wz)r=2;else throw new Error("Not a CSI file");this.minShift=n.readInt32LE(4),this.depth=n.readInt32LE(8),this.maxBinNumber=((1<<(this.depth+1)*3)-1)/7;const i=2**(this.minShift+this.depth*3),o=n.readInt32LE(12),a=o&&o>=30?this.parseAuxData(n,16):{refIdToName:[],refNameToId:{},metaChar:null,columnNumbers:{ref:0,start:1,end:2},coordinateType:"zero-based-half-open",format:"generic"},s=n.readInt32LE(16+o);let f,l=16+o+4;const u=new Array(s).fill(0).map(()=>{const c=n.readInt32LE(l);l+=4;const h={};let d;for(let p=0;p<c;p+=1){const m=n.readUInt32LE(l);if(m>this.maxBinNumber)d=this.parsePseudoBin(n,l+4),l+=4+8+4+16+16;else{const y=ka(n,l+4);f=this._findFirstData(f,y);const w=n.readInt32LE(l+12);l+=16;const A=new Array(w);for(let S=0;S<w;S+=1){const _=ka(n,l),T=ka(n,l+8);l+=16,A[S]=new Vc(_,T,m)}h[m]=A}}return{binIndex:h,stats:d}});return{...a,csi:!0,refCount:s,maxBlockSize:65536,firstDataLine:f,csiVersion:r,indices:u,depth:this.depth,maxBinNumber:this.maxBinNumber,maxRefLength:i}}parsePseudoBin(t,n){return{lineCount:R_(mc.fromBytesLE(t.slice(n+28,n+36),!0))}}async blocksForRange(t,n,r,i={}){n<0&&(n=0);const o=await this.parse(i);if(!o)return[];const a=o.refNameToId[t],s=o.indices[a];if(!s)return[];const f=this.reg2bins(n,r),l=[];for(const[u,c]of f)for(let h=u;h<=c;h++)if(s.binIndex[h])for(const d of s.binIndex[h])l.push(new Vc(d.minv,d.maxv,h));return M_(l,new Cg(0,0))}reg2bins(t,n){t-=1,t<1&&(t=1),n>2**50&&(n=2**34),n-=1;let r=0,i=0,o=this.minShift+this.depth*3;const a=[];for(;r<=this.depth;o-=3,i+=Zz(1,r*3),r+=1){const s=i+L_(t,o),f=i+L_(n,o);if(f-s+a.length>this.maxBinNumber)throw new Error(`query ${t}-${n} is too large for current binning scheme (shift ${this.minShift}, depth ${this.depth}), try a smaller query or a coarser index binning scheme`);a.push([s,f])}return a}}const Tg=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Yz(e){return new Promise(t=>setTimeout(t,e))}class Qz{constructor({path:t,filehandle:n,tbiPath:r,tbiFilehandle:i,csiPath:o,csiFilehandle:a,yieldTime:s=500,chunkSizeLimit:f=5e7,renameRefSeqs:l=c=>c,chunkCacheSize:u=5*2**20}){if(n)this.filehandle=n;else if(t)this.filehandle=new dt(t);else throw new TypeError("must provide either filehandle or path");if(i)this.index=new jc({filehandle:i,renameRefSeqs:l});else if(a)this.index=new kg({filehandle:a,renameRefSeqs:l});else if(r)this.index=new jc({filehandle:new dt(r),renameRefSeqs:l});else if(o)this.index=new kg({filehandle:new dt(o),renameRefSeqs:l});else if(t)this.index=new jc({filehandle:new dt(`${t}.tbi`),renameRefSeqs:l});else throw new TypeError("must provide one of tbiFilehandle, tbiPath, csiFilehandle, or csiPath");this.chunkSizeLimit=f,this.renameRefSeq=l,this.yieldTime=s,this.chunkCache=new _c({cache:new Sc({maxSize:Math.floor(u/65536)}),fill:(c,h)=>this.readChunk(c,{signal:h})})}async getLines(t,n,r,i){var o;let a,s={},f;if(i===void 0)throw new TypeError("line callback must be provided");if(typeof i=="function"?f=i:(s=i,f=i.lineCallback,a=i.signal),t===void 0)throw new TypeError("must provide a reference sequence name");if(!f)throw new TypeError("line callback must be provided");const l=await this.index.getMetadata(s);Ca(a);const u=n??0,c=r??l.maxRefLength;if(!(u<=c))throw new TypeError("invalid start and end coordinates. start must be less than or equal to end");if(u===c)return;const h=await this.index.blocksForRange(t,u,c,s);Ca(a);for(const p of h){const m=p.fetchedSize();if(m>this.chunkSizeLimit)throw new Error(`Too much data. Chunk size ${m.toLocaleString()} bytes exceeds chunkSizeLimit of ${this.chunkSizeLimit.toLocaleString()}.`)}let d=Date.now();for(const p of h){let m;const{buffer:y,cpositions:w,dpositions:A}=await this.chunkCache.get(p.toString(),p,a);Ca(a);let S=0,_=0;for(;S<y.length;){const T=y.indexOf(`
`,S);if(T===-1)break;const I=y.slice(S,T),B=(o=Tg==null?void 0:Tg.decode(I))!==null&&o!==void 0?o:I.toString();if(A){for(;S+p.minv.dataPosition>=A[_++];);_--}const{startCoordinate:F,overlaps:M}=this.checkLine(l,t,u,c,B);if(m!==void 0&&F!==void 0&&m>F)throw new Error(`Lines not sorted by start coordinate (${m} > ${F}), this file is not usable with Tabix.`);if(m=F,M)f(B.trim(),w[_]*256+(S-A[_])+p.minv.dataPosition+1);else if(F!==void 0&&F>=c)return;this.yieldTime&&d-Date.now()>this.yieldTime&&(d=Date.now(),Ca(a),await Yz(1)),S=T+1}}}async getMetadata(t={}){return this.index.getMetadata(t)}async getHeaderBuffer(t={}){const{firstDataLine:n,metaChar:r,maxBlockSize:i}=await this.getMetadata(t);Ca(t.signal);const o=((n==null?void 0:n.blockPosition)||0)+i,a=await this._readRegion(0,o,t),s=await ai(a);if(r){let f=-1;const l=`
`.charCodeAt(0),u=r.charCodeAt(0);for(let c=0;c<s.length&&!(c===f+1&&s[c]!==u);c+=1)s[c]===l&&(f=c);return s.slice(0,f+1)}return s}async getHeader(t={}){return(await this.getHeaderBuffer(t)).toString("utf8")}async getReferenceSequenceNames(t={}){return(await this.getMetadata(t)).refIdToName}checkLine(t,n,r,i,o){const{columnNumbers:a,metaChar:s,coordinateType:f,format:l}=t;if(s&&o.startsWith(s))return{overlaps:!1};let{ref:u,start:c,end:h}=a;u||(u=0),c||(c=0),h||(h=0),l==="VCF"&&(h=8);const d=Math.max(u,c,h);let p=1,m=0,y="",w=-1/0;for(let A=0;A<o.length+1;A+=1)if(o[A]==="	"||A===o.length){if(p===u){if(this.renameRefSeq(o.slice(m,A))!==n)return{overlaps:!1}}else if(p===c){if(w=parseInt(o.slice(m,A),10),f==="1-based-closed"&&(w-=1),w>=i)return{startCoordinate:w,overlaps:!1};if((h===0||h===c)&&w+1<=r)return{startCoordinate:w,overlaps:!1}}else if(l==="VCF"&&p===4)y=o.slice(m,A);else if(p===h&&(l==="VCF"?this._getVcfEnd(w,y,o.slice(m,A)):parseInt(o.slice(m,A),10))<=r)return{overlaps:!1};if(m=A+1,p+=1,p>d)break}return{startCoordinate:w,overlaps:!0}}_getVcfEnd(t,n,r){let i=t+n.length;const o=r.includes("SVTYPE=TRA");if(r[0]!=="."&&!o){let a=";";for(let s=0;s<r.length;s+=1){if(a===";"&&r.slice(s,s+4)==="END="){let f=r.indexOf(";",s);f===-1&&(f=r.length),i=parseInt(r.slice(s+4,f),10);break}a=r[s]}}else if(o)return t+1;return i}async lineCount(t,n={}){return this.index.lineCount(t,n)}async _readRegion(t,n,r={}){const i=ge.Buffer.alloc(n),{bytesRead:o,buffer:a}=await this.filehandle.read(i,0,n,t,r);return a.slice(0,o)}async readChunk(t,n={}){const r=await this._readRegion(t.minv.blockPosition,t.fetchedSize(),n);return XA(r,t)}}const Xz=Object.freeze(Object.defineProperty({__proto__:null,CSI:kg,TBI:jc,TabixIndexedFile:Qz},Symbol.toStringTag,{value:"Module"}));var Ig={exports:{}},Ta=typeof Reflect=="object"?Reflect:null,N_=Ta&&typeof Ta.apply=="function"?Ta.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},$c;Ta&&typeof Ta.ownKeys=="function"?$c=Ta.ownKeys:Object.getOwnPropertySymbols?$c=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:$c=function(t){return Object.getOwnPropertyNames(t)};function Kz(e){console&&console.warn&&console.warn(e)}var z_=Number.isNaN||function(t){return t!==t};function Be(){Be.init.call(this)}Ig.exports=Be,Ig.exports.once=nU,Be.EventEmitter=Be,Be.prototype._events=void 0,Be.prototype._eventsCount=0,Be.prototype._maxListeners=void 0;var U_=10;function qc(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Be,"defaultMaxListeners",{enumerable:!0,get:function(){return U_},set:function(e){if(typeof e!="number"||e<0||z_(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");U_=e}}),Be.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Be.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||z_(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function G_(e){return e._maxListeners===void 0?Be.defaultMaxListeners:e._maxListeners}Be.prototype.getMaxListeners=function(){return G_(this)},Be.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=t==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var f=o[t];if(f===void 0)return!1;if(typeof f=="function")N_(f,this,n);else for(var l=f.length,u=q_(f,l),r=0;r<l;++r)N_(u[r],this,n);return!0};function H_(e,t,n,r){var i,o,a;if(qc(n),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),a===void 0)a=o[t]=n,++e._eventsCount;else if(typeof a=="function"?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),i=G_(e),i>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,Kz(s)}return e}Be.prototype.addListener=function(t,n){return H_(this,t,n,!1)},Be.prototype.on=Be.prototype.addListener,Be.prototype.prependListener=function(t,n){return H_(this,t,n,!0)};function Jz(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function V_(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=Jz.bind(r);return i.listener=n,r.wrapFn=i,i}Be.prototype.once=function(t,n){return qc(n),this.on(t,V_(this,t,n)),this},Be.prototype.prependOnceListener=function(t,n){return qc(n),this.prependListener(t,V_(this,t,n)),this},Be.prototype.removeListener=function(t,n){var r,i,o,a,s;if(qc(n),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===n||r[a].listener===n){s=r[a].listener,o=a;break}if(o<0)return this;o===0?r.shift():eU(r,o),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,s||n)}return this},Be.prototype.off=Be.prototype.removeListener,Be.prototype.removeAllListeners=function(t){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var o=Object.keys(r),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function j_(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?tU(i):q_(i,i.length)}Be.prototype.listeners=function(t){return j_(this,t,!0)},Be.prototype.rawListeners=function(t){return j_(this,t,!1)},Be.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):$_.call(e,t)},Be.prototype.listenerCount=$_;function $_(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Be.prototype.eventNames=function(){return this._eventsCount>0?$c(this._events):[]};function q_(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function eU(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function tU(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function nU(e,t){return new Promise(function(n,r){function i(a){e.removeListener(t,o),r(a)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}W_(e,t,o,{once:!0}),t!=="error"&&rU(e,i,{once:!0})})}function rU(e,t,n){typeof e.on=="function"&&W_(e,"error",t,n)}function W_(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Bg=Ig.exports,Dg={exports:{}};typeof Object.create=="function"?Dg.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Dg.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}};var Ia=Dg.exports,Fg,Z_;function Y_(){return Z_||(Z_=1,Fg=Bg.EventEmitter),Fg}const Q_=mP(SP);var Rg,X_;function iU(){if(X_)return Rg;X_=1;function e(p,m){var y=Object.keys(p);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(p);m&&(w=w.filter(function(A){return Object.getOwnPropertyDescriptor(p,A).enumerable})),y.push.apply(y,w)}return y}function t(p){for(var m=1;m<arguments.length;m++){var y=arguments[m]!=null?arguments[m]:{};m%2?e(Object(y),!0).forEach(function(w){n(p,w,y[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(y)):e(Object(y)).forEach(function(w){Object.defineProperty(p,w,Object.getOwnPropertyDescriptor(y,w))})}return p}function n(p,m,y){return m=a(m),m in p?Object.defineProperty(p,m,{value:y,enumerable:!0,configurable:!0,writable:!0}):p[m]=y,p}function r(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function i(p,m){for(var y=0;y<m.length;y++){var w=m[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(p,a(w.key),w)}}function o(p,m,y){return m&&i(p.prototype,m),y&&i(p,y),Object.defineProperty(p,"prototype",{writable:!1}),p}function a(p){var m=s(p,"string");return typeof m=="symbol"?m:String(m)}function s(p,m){if(typeof p!="object"||p===null)return p;var y=p[Symbol.toPrimitive];if(y!==void 0){var w=y.call(p,m||"default");if(typeof w!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(p)}var f=ge,l=f.Buffer,u=Q_,c=u.inspect,h=c&&c.custom||"inspect";function d(p,m,y){l.prototype.copy.call(p,m,y)}return Rg=function(){function p(){r(this,p),this.head=null,this.tail=null,this.length=0}return o(p,[{key:"push",value:function(y){var w={data:y,next:null};this.length>0?this.tail.next=w:this.head=w,this.tail=w,++this.length}},{key:"unshift",value:function(y){var w={data:y,next:this.head};this.length===0&&(this.tail=w),this.head=w,++this.length}},{key:"shift",value:function(){if(this.length!==0){var y=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,y}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(y){if(this.length===0)return"";for(var w=this.head,A=""+w.data;w=w.next;)A+=y+w.data;return A}},{key:"concat",value:function(y){if(this.length===0)return l.alloc(0);for(var w=l.allocUnsafe(y>>>0),A=this.head,S=0;A;)d(A.data,w,S),S+=A.data.length,A=A.next;return w}},{key:"consume",value:function(y,w){var A;return y<this.head.data.length?(A=this.head.data.slice(0,y),this.head.data=this.head.data.slice(y)):y===this.head.data.length?A=this.shift():A=w?this._getString(y):this._getBuffer(y),A}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(y){var w=this.head,A=1,S=w.data;for(y-=S.length;w=w.next;){var _=w.data,T=y>_.length?_.length:y;if(T===_.length?S+=_:S+=_.slice(0,y),y-=T,y===0){T===_.length?(++A,w.next?this.head=w.next:this.head=this.tail=null):(this.head=w,w.data=_.slice(T));break}++A}return this.length-=A,S}},{key:"_getBuffer",value:function(y){var w=l.allocUnsafe(y),A=this.head,S=1;for(A.data.copy(w),y-=A.data.length;A=A.next;){var _=A.data,T=y>_.length?_.length:y;if(_.copy(w,w.length-y,0,T),y-=T,y===0){T===_.length?(++S,A.next?this.head=A.next:this.head=this.tail=null):(this.head=A,A.data=_.slice(T));break}++S}return this.length-=S,w}},{key:h,value:function(y,w){return c(this,t(t({},w),{},{depth:0,customInspect:!1}))}}]),p}(),Rg}var Mg,K_;function J_(){if(K_)return Mg;K_=1;function e(a,s){var f=this,l=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return l||u?(s?s(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(i,this,a)):process.nextTick(i,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(c){!s&&c?f._writableState?f._writableState.errorEmitted?process.nextTick(n,f):(f._writableState.errorEmitted=!0,process.nextTick(t,f,c)):process.nextTick(t,f,c):s?(process.nextTick(n,f),s(c)):process.nextTick(n,f)}),this)}function t(a,s){i(a,s),n(a)}function n(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||a.emit("close")}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(a,s){a.emit("error",s)}function o(a,s){var f=a._readableState,l=a._writableState;f&&f.autoDestroy||l&&l.autoDestroy?a.destroy(s):a.emit("error",s)}return Mg={destroy:e,undestroy:r,errorOrDestroy:o},Mg}var Pg={},eS;function Ba(){if(eS)return Pg;eS=1;function e(s,f){s.prototype=Object.create(f.prototype),s.prototype.constructor=s,s.__proto__=f}var t={};function n(s,f,l){l||(l=Error);function u(h,d,p){return typeof f=="string"?f:f(h,d,p)}var c=function(h){e(d,h);function d(p,m,y){return h.call(this,u(p,m,y))||this}return d}(l);c.prototype.name=l.name,c.prototype.code=s,t[s]=c}function r(s,f){if(Array.isArray(s)){var l=s.length;return s=s.map(function(u){return String(u)}),l>2?"one of ".concat(f," ").concat(s.slice(0,l-1).join(", "),", or ")+s[l-1]:l===2?"one of ".concat(f," ").concat(s[0]," or ").concat(s[1]):"of ".concat(f," ").concat(s[0])}else return"of ".concat(f," ").concat(String(s))}function i(s,f,l){return s.substr(!l||l<0?0:+l,f.length)===f}function o(s,f,l){return(l===void 0||l>s.length)&&(l=s.length),s.substring(l-f.length,l)===f}function a(s,f,l){return typeof l!="number"&&(l=0),l+f.length>s.length?!1:s.indexOf(f,l)!==-1}return n("ERR_INVALID_OPT_VALUE",function(s,f){return'The value "'+f+'" is invalid for option "'+s+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(s,f,l){var u;typeof f=="string"&&i(f,"not ")?(u="must not be",f=f.replace(/^not /,"")):u="must be";var c;if(o(s," argument"))c="The ".concat(s," ").concat(u," ").concat(r(f,"type"));else{var h=a(s,".")?"property":"argument";c='The "'.concat(s,'" ').concat(h," ").concat(u," ").concat(r(f,"type"))}return c+=". Received type ".concat(typeof l),c},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(s){return"The "+s+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(s){return"Cannot call "+s+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(s){return"Unknown encoding: "+s},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Pg.codes=t,Pg}var Og,tS;function nS(){if(tS)return Og;tS=1;var e=Ba().codes.ERR_INVALID_OPT_VALUE;function t(r,i,o){return r.highWaterMark!=null?r.highWaterMark:i?r[o]:null}function n(r,i,o,a){var s=t(i,a,o);if(s!=null){if(!(isFinite(s)&&Math.floor(s)===s)||s<0){var f=a?o:"highWaterMark";throw new e(f,s)}return Math.floor(s)}return r.objectMode?16:16*1024}return Og={getHighWaterMark:n},Og}var Lg,rS;function oU(){if(rS)return Lg;rS=1,Lg=e;function e(n,r){if(t("noDeprecation"))return n;var i=!1;function o(){if(!i){if(t("throwDeprecation"))throw new Error(r);t("traceDeprecation")?console.trace(r):console.warn(r),i=!0}return n.apply(this,arguments)}return o}function t(n){try{if(!rn.localStorage)return!1}catch{return!1}var r=rn.localStorage[n];return r==null?!1:String(r).toLowerCase()==="true"}return Lg}var Ng,iS;function oS(){if(iS)return Ng;iS=1,Ng=F;function e(O){var P=this;this.next=null,this.entry=null,this.finish=function(){Ne(P,O)}}var t;F.WritableState=I;var n={deprecate:oU()},r=Y_(),i=ge.Buffer,o=(typeof rn<"u"?rn:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function a(O){return i.from(O)}function s(O){return i.isBuffer(O)||O instanceof o}var f=J_(),l=nS(),u=l.getHighWaterMark,c=Ba().codes,h=c.ERR_INVALID_ARG_TYPE,d=c.ERR_METHOD_NOT_IMPLEMENTED,p=c.ERR_MULTIPLE_CALLBACK,m=c.ERR_STREAM_CANNOT_PIPE,y=c.ERR_STREAM_DESTROYED,w=c.ERR_STREAM_NULL_VALUES,A=c.ERR_STREAM_WRITE_AFTER_END,S=c.ERR_UNKNOWN_ENCODING,_=f.errorOrDestroy;Ia(F,r);function T(){}function I(O,P,$){t=t||Da(),O=O||{},typeof $!="boolean"&&($=P instanceof t),this.objectMode=!!O.objectMode,$&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=u(this,O,"writableHighWaterMark",$),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var V=O.decodeStrings===!1;this.decodeStrings=!V,this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Z){Xe(P,Z)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}I.prototype.getBuffer=function(){for(var P=this.bufferedRequest,$=[];P;)$.push(P),P=P.next;return $},function(){try{Object.defineProperty(I.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var B;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(B=Function.prototype[Symbol.hasInstance],Object.defineProperty(F,Symbol.hasInstance,{value:function(P){return B.call(this,P)?!0:this!==F?!1:P&&P._writableState instanceof I}})):B=function(P){return P instanceof this};function F(O){t=t||Da();var P=this instanceof t;if(!P&&!B.call(F,this))return new F(O);this._writableState=new I(O,this,P),this.writable=!0,O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final)),r.call(this)}F.prototype.pipe=function(){_(this,new m)};function M(O,P){var $=new A;_(O,$),process.nextTick(P,$)}function G(O,P,$,V){var Z;return $===null?Z=new w:typeof $!="string"&&!P.objectMode&&(Z=new h("chunk",["string","Buffer"],$)),Z?(_(O,Z),process.nextTick(V,Z),!1):!0}F.prototype.write=function(O,P,$){var V=this._writableState,Z=!1,C=!V.objectMode&&s(O);return C&&!i.isBuffer(O)&&(O=a(O)),typeof P=="function"&&($=P,P=null),C?P="buffer":P||(P=V.defaultEncoding),typeof $!="function"&&($=T),V.ending?M(this,$):(C||G(this,V,O,$))&&(V.pendingcb++,Z=re(this,V,C,O,P,$)),Z},F.prototype.cork=function(){this._writableState.corked++},F.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,!O.writing&&!O.corked&&!O.bufferProcessing&&O.bufferedRequest&&We(this,O))},F.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())>-1))throw new S(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(F.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function N(O,P,$){return!O.objectMode&&O.decodeStrings!==!1&&typeof P=="string"&&(P=i.from(P,$)),P}Object.defineProperty(F.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function re(O,P,$,V,Z,C){if(!$){var v=N(P,V,Z);V!==v&&($=!0,Z="buffer",V=v)}var H=P.objectMode?1:V.length;P.length+=H;var q=P.length<P.highWaterMark;if(q||(P.needDrain=!0),P.writing||P.corked){var fe=P.lastBufferedRequest;P.lastBufferedRequest={chunk:V,encoding:Z,isBuf:$,callback:C,next:null},fe?fe.next=P.lastBufferedRequest:P.bufferedRequest=P.lastBufferedRequest,P.bufferedRequestCount+=1}else se(O,P,!1,H,V,Z,C);return q}function se(O,P,$,V,Z,C,v){P.writelen=V,P.writecb=v,P.writing=!0,P.sync=!0,P.destroyed?P.onwrite(new y("write")):$?O._writev(Z,P.onwrite):O._write(Z,C,P.onwrite),P.sync=!1}function te(O,P,$,V,Z){--P.pendingcb,$?(process.nextTick(Z,V),process.nextTick(gt,O,P),O._writableState.errorEmitted=!0,_(O,V)):(Z(V),O._writableState.errorEmitted=!0,_(O,V),gt(O,P))}function pe(O){O.writing=!1,O.writecb=null,O.length-=O.writelen,O.writelen=0}function Xe(O,P){var $=O._writableState,V=$.sync,Z=$.writecb;if(typeof Z!="function")throw new p;if(pe($),P)te(O,$,V,P,Z);else{var C=et($)||O.destroyed;!C&&!$.corked&&!$.bufferProcessing&&$.bufferedRequest&&We(O,$),V?process.nextTick(De,O,$,C,Z):De(O,$,C,Z)}}function De(O,P,$,V){$||Je(O,P),P.pendingcb--,V(),gt(O,P)}function Je(O,P){P.length===0&&P.needDrain&&(P.needDrain=!1,O.emit("drain"))}function We(O,P){P.bufferProcessing=!0;var $=P.bufferedRequest;if(O._writev&&$&&$.next){var V=P.bufferedRequestCount,Z=new Array(V),C=P.corkedRequestsFree;C.entry=$;for(var v=0,H=!0;$;)Z[v]=$,$.isBuf||(H=!1),$=$.next,v+=1;Z.allBuffers=H,se(O,P,!0,P.length,Z,"",C.finish),P.pendingcb++,P.lastBufferedRequest=null,C.next?(P.corkedRequestsFree=C.next,C.next=null):P.corkedRequestsFree=new e(P),P.bufferedRequestCount=0}else{for(;$;){var q=$.chunk,fe=$.encoding,ne=$.callback,ue=P.objectMode?1:q.length;if(se(O,P,!1,ue,q,fe,ne),$=$.next,P.bufferedRequestCount--,P.writing)break}$===null&&(P.lastBufferedRequest=null)}P.bufferedRequest=$,P.bufferProcessing=!1}F.prototype._write=function(O,P,$){$(new d("_write()"))},F.prototype._writev=null,F.prototype.end=function(O,P,$){var V=this._writableState;return typeof O=="function"?($=O,O=null,P=null):typeof P=="function"&&($=P,P=null),O!=null&&this.write(O,P),V.corked&&(V.corked=1,this.uncork()),V.ending||jt(this,V,$),this},Object.defineProperty(F.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function et(O){return O.ending&&O.length===0&&O.bufferedRequest===null&&!O.finished&&!O.writing}function _e(O,P){O._final(function($){P.pendingcb--,$&&_(O,$),P.prefinished=!0,O.emit("prefinish"),gt(O,P)})}function Se(O,P){!P.prefinished&&!P.finalCalled&&(typeof O._final=="function"&&!P.destroyed?(P.pendingcb++,P.finalCalled=!0,process.nextTick(_e,O,P)):(P.prefinished=!0,O.emit("prefinish")))}function gt(O,P){var $=et(P);if($&&(Se(O,P),P.pendingcb===0&&(P.finished=!0,O.emit("finish"),P.autoDestroy))){var V=O._readableState;(!V||V.autoDestroy&&V.endEmitted)&&O.destroy()}return $}function jt(O,P,$){P.ending=!0,gt(O,P),$&&(P.finished?process.nextTick($):O.once("finish",$)),P.ended=!0,O.writable=!1}function Ne(O,P,$){var V=O.entry;for(O.entry=null;V;){var Z=V.callback;P.pendingcb--,Z($),V=V.next}P.corkedRequestsFree.next=O}return Object.defineProperty(F.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),F.prototype.destroy=f.destroy,F.prototype._undestroy=f.undestroy,F.prototype._destroy=function(O,P){P(O)},Ng}var zg,aS;function Da(){if(aS)return zg;aS=1;var e=Object.keys||function(l){var u=[];for(var c in l)u.push(c);return u};zg=a;var t=hS(),n=oS();Ia(a,t);for(var r=e(n.prototype),i=0;i<r.length;i++){var o=r[i];a.prototype[o]||(a.prototype[o]=n.prototype[o])}function a(l){if(!(this instanceof a))return new a(l);t.call(this,l),n.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",s)))}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function s(){this._writableState.ended||process.nextTick(f,this)}function f(l){l.end()}return Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(u){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=u,this._writableState.destroyed=u)}}),zg}var Ug={},Gg={exports:{}};(function(e,t){var n=ge,r=n.Buffer;function i(a,s){for(var f in a)s[f]=a[f]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=o);function o(a,s,f){return r(a,s,f)}i(r,o),o.from=function(a,s,f){if(typeof a=="number")throw new TypeError("Argument must not be a number");return r(a,s,f)},o.alloc=function(a,s,f){if(typeof a!="number")throw new TypeError("Argument must be a number");var l=r(a);return s!==void 0?typeof f=="string"?l.fill(s,f):l.fill(s):l.fill(0),l},o.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r(a)},o.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(a)}})(Gg,Gg.exports);var aU=Gg.exports,Hg=aU.Buffer,sS=Hg.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function sU(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function lU(e){var t=sU(e);if(typeof t!="string"&&(Hg.isEncoding===sS||!sS(e)))throw new Error("Unknown encoding: "+e);return t||e}var fU=Ug.StringDecoder=ql;function ql(e){this.encoding=lU(e);var t;switch(this.encoding){case"utf16le":this.text=gU,this.end=mU,t=4;break;case"utf8":this.fillLast=hU,t=4;break;case"base64":this.text=bU,this.end=yU,t=3;break;default:this.write=wU,this.end=xU;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Hg.allocUnsafe(t)}ql.prototype.write=function(e){if(e.length===0)return"";var t,n;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},ql.prototype.end=pU,ql.prototype.text=dU,ql.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function Vg(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function uU(e,t,n){var r=t.length-1;if(r<n)return 0;var i=Vg(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||i===-2?0:(i=Vg(t[r]),i>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||i===-2?0:(i=Vg(t[r]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function cU(e,t,n){if((t[0]&192)!==128)return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"�"}}function hU(e){var t=this.lastTotal-this.lastNeed,n=cU(this,e);if(n!==void 0)return n;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function dU(e,t){var n=uU(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function pU(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t}function gU(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function mU(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function bU(e,t){var n=(e.length-t)%3;return n===0?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,n===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function yU(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function wU(e){return e.toString(this.encoding)}function xU(e){return e&&e.length?this.write(e):""}var jg,lS;function $g(){if(lS)return jg;lS=1;var e=Ba().codes.ERR_STREAM_PREMATURE_CLOSE;function t(o){var a=!1;return function(){if(!a){a=!0;for(var s=arguments.length,f=new Array(s),l=0;l<s;l++)f[l]=arguments[l];o.apply(this,f)}}}function n(){}function r(o){return o.setHeader&&typeof o.abort=="function"}function i(o,a,s){if(typeof a=="function")return i(o,null,a);a||(a={}),s=t(s||n);var f=a.readable||a.readable!==!1&&o.readable,l=a.writable||a.writable!==!1&&o.writable,u=function(){o.writable||h()},c=o._writableState&&o._writableState.finished,h=function(){l=!1,c=!0,f||s.call(o)},d=o._readableState&&o._readableState.endEmitted,p=function(){f=!1,d=!0,l||s.call(o)},m=function(S){s.call(o,S)},y=function(){var S;if(f&&!d)return(!o._readableState||!o._readableState.ended)&&(S=new e),s.call(o,S);if(l&&!c)return(!o._writableState||!o._writableState.ended)&&(S=new e),s.call(o,S)},w=function(){o.req.on("finish",h)};return r(o)?(o.on("complete",h),o.on("abort",y),o.req?w():o.on("request",w)):l&&!o._writableState&&(o.on("end",u),o.on("close",u)),o.on("end",p),o.on("finish",h),a.error!==!1&&o.on("error",m),o.on("close",y),function(){o.removeListener("complete",h),o.removeListener("abort",y),o.removeListener("request",w),o.req&&o.req.removeListener("finish",h),o.removeListener("end",u),o.removeListener("close",u),o.removeListener("finish",h),o.removeListener("end",p),o.removeListener("error",m),o.removeListener("close",y)}}return jg=i,jg}var qg,fS;function vU(){if(fS)return qg;fS=1;var e;function t(S,_,T){return _=n(_),_ in S?Object.defineProperty(S,_,{value:T,enumerable:!0,configurable:!0,writable:!0}):S[_]=T,S}function n(S){var _=r(S,"string");return typeof _=="symbol"?_:String(_)}function r(S,_){if(typeof S!="object"||S===null)return S;var T=S[Symbol.toPrimitive];if(T!==void 0){var I=T.call(S,_||"default");if(typeof I!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(S)}var i=$g(),o=Symbol("lastResolve"),a=Symbol("lastReject"),s=Symbol("error"),f=Symbol("ended"),l=Symbol("lastPromise"),u=Symbol("handlePromise"),c=Symbol("stream");function h(S,_){return{value:S,done:_}}function d(S){var _=S[o];if(_!==null){var T=S[c].read();T!==null&&(S[l]=null,S[o]=null,S[a]=null,_(h(T,!1)))}}function p(S){process.nextTick(d,S)}function m(S,_){return function(T,I){S.then(function(){if(_[f]){T(h(void 0,!0));return}_[u](T,I)},I)}}var y=Object.getPrototypeOf(function(){}),w=Object.setPrototypeOf((e={get stream(){return this[c]},next:function(){var _=this,T=this[s];if(T!==null)return Promise.reject(T);if(this[f])return Promise.resolve(h(void 0,!0));if(this[c].destroyed)return new Promise(function(M,G){process.nextTick(function(){_[s]?G(_[s]):M(h(void 0,!0))})});var I=this[l],B;if(I)B=new Promise(m(I,this));else{var F=this[c].read();if(F!==null)return Promise.resolve(h(F,!1));B=new Promise(this[u])}return this[l]=B,B}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var _=this;return new Promise(function(T,I){_[c].destroy(null,function(B){if(B){I(B);return}T(h(void 0,!0))})})}),e),y),A=function(_){var T,I=Object.create(w,(T={},t(T,c,{value:_,writable:!0}),t(T,o,{value:null,writable:!0}),t(T,a,{value:null,writable:!0}),t(T,s,{value:null,writable:!0}),t(T,f,{value:_._readableState.endEmitted,writable:!0}),t(T,u,{value:function(F,M){var G=I[c].read();G?(I[l]=null,I[o]=null,I[a]=null,F(h(G,!1))):(I[o]=F,I[a]=M)},writable:!0}),T));return I[l]=null,i(_,function(B){if(B&&B.code!=="ERR_STREAM_PREMATURE_CLOSE"){var F=I[a];F!==null&&(I[l]=null,I[o]=null,I[a]=null,F(B)),I[s]=B;return}var M=I[o];M!==null&&(I[l]=null,I[o]=null,I[a]=null,M(h(void 0,!0))),I[f]=!0}),_.on("readable",p.bind(null,I)),I};return qg=A,qg}var Wg,uS;function AU(){return uS||(uS=1,Wg=function(){throw new Error("Readable.from is not available in the browser")}),Wg}var Zg,cS;function hS(){if(cS)return Zg;cS=1,Zg=M;var e;M.ReadableState=F,Bg.EventEmitter;var t=function(v,H){return v.listeners(H).length},n=Y_(),r=ge.Buffer,i=(typeof rn<"u"?rn:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(C){return r.from(C)}function a(C){return r.isBuffer(C)||C instanceof i}var s=Q_,f;s&&s.debuglog?f=s.debuglog("stream"):f=function(){};var l=iU(),u=J_(),c=nS(),h=c.getHighWaterMark,d=Ba().codes,p=d.ERR_INVALID_ARG_TYPE,m=d.ERR_STREAM_PUSH_AFTER_EOF,y=d.ERR_METHOD_NOT_IMPLEMENTED,w=d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,A,S,_;Ia(M,n);var T=u.errorOrDestroy,I=["error","close","destroy","pause","resume"];function B(C,v,H){if(typeof C.prependListener=="function")return C.prependListener(v,H);!C._events||!C._events[v]?C.on(v,H):Array.isArray(C._events[v])?C._events[v].unshift(H):C._events[v]=[H,C._events[v]]}function F(C,v,H){e=e||Da(),C=C||{},typeof H!="boolean"&&(H=v instanceof e),this.objectMode=!!C.objectMode,H&&(this.objectMode=this.objectMode||!!C.readableObjectMode),this.highWaterMark=h(this,C,"readableHighWaterMark",H),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=C.emitClose!==!1,this.autoDestroy=!!C.autoDestroy,this.destroyed=!1,this.defaultEncoding=C.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,C.encoding&&(A||(A=Ug.StringDecoder),this.decoder=new A(C.encoding),this.encoding=C.encoding)}function M(C){if(e=e||Da(),!(this instanceof M))return new M(C);var v=this instanceof e;this._readableState=new F(C,this,v),this.readable=!0,C&&(typeof C.read=="function"&&(this._read=C.read),typeof C.destroy=="function"&&(this._destroy=C.destroy)),n.call(this)}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(v){this._readableState&&(this._readableState.destroyed=v)}}),M.prototype.destroy=u.destroy,M.prototype._undestroy=u.undestroy,M.prototype._destroy=function(C,v){v(C)},M.prototype.push=function(C,v){var H=this._readableState,q;return H.objectMode?q=!0:typeof C=="string"&&(v=v||H.defaultEncoding,v!==H.encoding&&(C=r.from(C,v),v=""),q=!0),G(this,C,v,!1,q)},M.prototype.unshift=function(C){return G(this,C,null,!0,!1)};function G(C,v,H,q,fe){f("readableAddChunk",v);var ne=C._readableState;if(v===null)ne.reading=!1,Xe(C,ne);else{var ue;if(fe||(ue=re(ne,v)),ue)T(C,ue);else if(ne.objectMode||v&&v.length>0)if(typeof v!="string"&&!ne.objectMode&&Object.getPrototypeOf(v)!==r.prototype&&(v=o(v)),q)ne.endEmitted?T(C,new w):N(C,ne,v,!0);else if(ne.ended)T(C,new m);else{if(ne.destroyed)return!1;ne.reading=!1,ne.decoder&&!H?(v=ne.decoder.write(v),ne.objectMode||v.length!==0?N(C,ne,v,!1):We(C,ne)):N(C,ne,v,!1)}else q||(ne.reading=!1,We(C,ne))}return!ne.ended&&(ne.length<ne.highWaterMark||ne.length===0)}function N(C,v,H,q){v.flowing&&v.length===0&&!v.sync?(v.awaitDrain=0,C.emit("data",H)):(v.length+=v.objectMode?1:H.length,q?v.buffer.unshift(H):v.buffer.push(H),v.needReadable&&De(C)),We(C,v)}function re(C,v){var H;return!a(v)&&typeof v!="string"&&v!==void 0&&!C.objectMode&&(H=new p("chunk",["string","Buffer","Uint8Array"],v)),H}M.prototype.isPaused=function(){return this._readableState.flowing===!1},M.prototype.setEncoding=function(C){A||(A=Ug.StringDecoder);var v=new A(C);this._readableState.decoder=v,this._readableState.encoding=this._readableState.decoder.encoding;for(var H=this._readableState.buffer.head,q="";H!==null;)q+=v.write(H.data),H=H.next;return this._readableState.buffer.clear(),q!==""&&this._readableState.buffer.push(q),this._readableState.length=q.length,this};var se=1073741824;function te(C){return C>=se?C=se:(C--,C|=C>>>1,C|=C>>>2,C|=C>>>4,C|=C>>>8,C|=C>>>16,C++),C}function pe(C,v){return C<=0||v.length===0&&v.ended?0:v.objectMode?1:C!==C?v.flowing&&v.length?v.buffer.head.data.length:v.length:(C>v.highWaterMark&&(v.highWaterMark=te(C)),C<=v.length?C:v.ended?v.length:(v.needReadable=!0,0))}M.prototype.read=function(C){f("read",C),C=parseInt(C,10);var v=this._readableState,H=C;if(C!==0&&(v.emittedReadable=!1),C===0&&v.needReadable&&((v.highWaterMark!==0?v.length>=v.highWaterMark:v.length>0)||v.ended))return f("read: emitReadable",v.length,v.ended),v.length===0&&v.ended?$(this):De(this),null;if(C=pe(C,v),C===0&&v.ended)return v.length===0&&$(this),null;var q=v.needReadable;f("need readable",q),(v.length===0||v.length-C<v.highWaterMark)&&(q=!0,f("length less than watermark",q)),v.ended||v.reading?(q=!1,f("reading or ended",q)):q&&(f("do read"),v.reading=!0,v.sync=!0,v.length===0&&(v.needReadable=!0),this._read(v.highWaterMark),v.sync=!1,v.reading||(C=pe(H,v)));var fe;return C>0?fe=P(C,v):fe=null,fe===null?(v.needReadable=v.length<=v.highWaterMark,C=0):(v.length-=C,v.awaitDrain=0),v.length===0&&(v.ended||(v.needReadable=!0),H!==C&&v.ended&&$(this)),fe!==null&&this.emit("data",fe),fe};function Xe(C,v){if(f("onEofChunk"),!v.ended){if(v.decoder){var H=v.decoder.end();H&&H.length&&(v.buffer.push(H),v.length+=v.objectMode?1:H.length)}v.ended=!0,v.sync?De(C):(v.needReadable=!1,v.emittedReadable||(v.emittedReadable=!0,Je(C)))}}function De(C){var v=C._readableState;f("emitReadable",v.needReadable,v.emittedReadable),v.needReadable=!1,v.emittedReadable||(f("emitReadable",v.flowing),v.emittedReadable=!0,process.nextTick(Je,C))}function Je(C){var v=C._readableState;f("emitReadable_",v.destroyed,v.length,v.ended),!v.destroyed&&(v.length||v.ended)&&(C.emit("readable"),v.emittedReadable=!1),v.needReadable=!v.flowing&&!v.ended&&v.length<=v.highWaterMark,O(C)}function We(C,v){v.readingMore||(v.readingMore=!0,process.nextTick(et,C,v))}function et(C,v){for(;!v.reading&&!v.ended&&(v.length<v.highWaterMark||v.flowing&&v.length===0);){var H=v.length;if(f("maybeReadMore read 0"),C.read(0),H===v.length)break}v.readingMore=!1}M.prototype._read=function(C){T(this,new y("_read()"))},M.prototype.pipe=function(C,v){var H=this,q=this._readableState;switch(q.pipesCount){case 0:q.pipes=C;break;case 1:q.pipes=[q.pipes,C];break;default:q.pipes.push(C);break}q.pipesCount+=1,f("pipe count=%d opts=%j",q.pipesCount,v);var fe=(!v||v.end!==!1)&&C!==process.stdout&&C!==process.stderr,ne=fe?$t:Jn;q.endEmitted?process.nextTick(ne):H.once("end",ne),C.on("unpipe",ue);function ue(x,g){f("onunpipe"),x===H&&g&&g.hasUnpiped===!1&&(g.hasUnpiped=!0,yi())}function $t(){f("onend"),C.end()}var mi=_e(H);C.on("drain",mi);var bi=!1;function yi(){f("cleanup"),C.removeListener("close",wi),C.removeListener("finish",qt),C.removeListener("drain",mi),C.removeListener("error",Ar),C.removeListener("unpipe",ue),H.removeListener("end",$t),H.removeListener("end",Jn),H.removeListener("data",St),bi=!0,q.awaitDrain&&(!C._writableState||C._writableState.needDrain)&&mi()}H.on("data",St);function St(x){f("ondata");var g=C.write(x);f("dest.write",g),g===!1&&((q.pipesCount===1&&q.pipes===C||q.pipesCount>1&&Z(q.pipes,C)!==-1)&&!bi&&(f("false write response, pause",q.awaitDrain),q.awaitDrain++),H.pause())}function Ar(x){f("onerror",x),Jn(),C.removeListener("error",Ar),t(C,"error")===0&&T(C,x)}B(C,"error",Ar);function wi(){C.removeListener("finish",qt),Jn()}C.once("close",wi);function qt(){f("onfinish"),C.removeListener("close",wi),Jn()}C.once("finish",qt);function Jn(){f("unpipe"),H.unpipe(C)}return C.emit("pipe",H),q.flowing||(f("pipe resume"),H.resume()),C};function _e(C){return function(){var H=C._readableState;f("pipeOnDrain",H.awaitDrain),H.awaitDrain&&H.awaitDrain--,H.awaitDrain===0&&t(C,"data")&&(H.flowing=!0,O(C))}}M.prototype.unpipe=function(C){var v=this._readableState,H={hasUnpiped:!1};if(v.pipesCount===0)return this;if(v.pipesCount===1)return C&&C!==v.pipes?this:(C||(C=v.pipes),v.pipes=null,v.pipesCount=0,v.flowing=!1,C&&C.emit("unpipe",this,H),this);if(!C){var q=v.pipes,fe=v.pipesCount;v.pipes=null,v.pipesCount=0,v.flowing=!1;for(var ne=0;ne<fe;ne++)q[ne].emit("unpipe",this,{hasUnpiped:!1});return this}var ue=Z(v.pipes,C);return ue===-1?this:(v.pipes.splice(ue,1),v.pipesCount-=1,v.pipesCount===1&&(v.pipes=v.pipes[0]),C.emit("unpipe",this,H),this)},M.prototype.on=function(C,v){var H=n.prototype.on.call(this,C,v),q=this._readableState;return C==="data"?(q.readableListening=this.listenerCount("readable")>0,q.flowing!==!1&&this.resume()):C==="readable"&&!q.endEmitted&&!q.readableListening&&(q.readableListening=q.needReadable=!0,q.flowing=!1,q.emittedReadable=!1,f("on readable",q.length,q.reading),q.length?De(this):q.reading||process.nextTick(gt,this)),H},M.prototype.addListener=M.prototype.on,M.prototype.removeListener=function(C,v){var H=n.prototype.removeListener.call(this,C,v);return C==="readable"&&process.nextTick(Se,this),H},M.prototype.removeAllListeners=function(C){var v=n.prototype.removeAllListeners.apply(this,arguments);return(C==="readable"||C===void 0)&&process.nextTick(Se,this),v};function Se(C){var v=C._readableState;v.readableListening=C.listenerCount("readable")>0,v.resumeScheduled&&!v.paused?v.flowing=!0:C.listenerCount("data")>0&&C.resume()}function gt(C){f("readable nexttick read 0"),C.read(0)}M.prototype.resume=function(){var C=this._readableState;return C.flowing||(f("resume"),C.flowing=!C.readableListening,jt(this,C)),C.paused=!1,this};function jt(C,v){v.resumeScheduled||(v.resumeScheduled=!0,process.nextTick(Ne,C,v))}function Ne(C,v){f("resume",v.reading),v.reading||C.read(0),v.resumeScheduled=!1,C.emit("resume"),O(C),v.flowing&&!v.reading&&C.read(0)}M.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function O(C){var v=C._readableState;for(f("flow",v.flowing);v.flowing&&C.read()!==null;);}M.prototype.wrap=function(C){var v=this,H=this._readableState,q=!1;C.on("end",function(){if(f("wrapped end"),H.decoder&&!H.ended){var ue=H.decoder.end();ue&&ue.length&&v.push(ue)}v.push(null)}),C.on("data",function(ue){if(f("wrapped data"),H.decoder&&(ue=H.decoder.write(ue)),!(H.objectMode&&ue==null)&&!(!H.objectMode&&(!ue||!ue.length))){var $t=v.push(ue);$t||(q=!0,C.pause())}});for(var fe in C)this[fe]===void 0&&typeof C[fe]=="function"&&(this[fe]=function($t){return function(){return C[$t].apply(C,arguments)}}(fe));for(var ne=0;ne<I.length;ne++)C.on(I[ne],this.emit.bind(this,I[ne]));return this._read=function(ue){f("wrapped _read",ue),q&&(q=!1,C.resume())},this},typeof Symbol=="function"&&(M.prototype[Symbol.asyncIterator]=function(){return S===void 0&&(S=vU()),S(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(v){this._readableState&&(this._readableState.flowing=v)}}),M._fromList=P,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function P(C,v){if(v.length===0)return null;var H;return v.objectMode?H=v.buffer.shift():!C||C>=v.length?(v.decoder?H=v.buffer.join(""):v.buffer.length===1?H=v.buffer.first():H=v.buffer.concat(v.length),v.buffer.clear()):H=v.buffer.consume(C,v.decoder),H}function $(C){var v=C._readableState;f("endReadable",v.endEmitted),v.endEmitted||(v.ended=!0,process.nextTick(V,v,C))}function V(C,v){if(f("endReadableNT",C.endEmitted,C.length),!C.endEmitted&&C.length===0&&(C.endEmitted=!0,v.readable=!1,v.emit("end"),C.autoDestroy)){var H=v._writableState;(!H||H.autoDestroy&&H.finished)&&v.destroy()}}typeof Symbol=="function"&&(M.from=function(C,v){return _===void 0&&(_=AU()),_(M,C,v)});function Z(C,v){for(var H=0,q=C.length;H<q;H++)if(C[H]===v)return H;return-1}return Zg}var Yg,dS;function pS(){if(dS)return Yg;dS=1,Yg=s;var e=Ba().codes,t=e.ERR_METHOD_NOT_IMPLEMENTED,n=e.ERR_MULTIPLE_CALLBACK,r=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=e.ERR_TRANSFORM_WITH_LENGTH_0,o=Da();Ia(s,o);function a(u,c){var h=this._transformState;h.transforming=!1;var d=h.writecb;if(d===null)return this.emit("error",new n);h.writechunk=null,h.writecb=null,c!=null&&this.push(c),d(u);var p=this._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}function s(u){if(!(this instanceof s))return new s(u);o.call(this,u),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",f)}function f(){var u=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(c,h){l(u,c,h)}):l(this,null,null)}s.prototype.push=function(u,c){return this._transformState.needTransform=!1,o.prototype.push.call(this,u,c)},s.prototype._transform=function(u,c,h){h(new t("_transform()"))},s.prototype._write=function(u,c,h){var d=this._transformState;if(d.writecb=h,d.writechunk=u,d.writeencoding=c,!d.transforming){var p=this._readableState;(d.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}},s.prototype._read=function(u){var c=this._transformState;c.writechunk!==null&&!c.transforming?(c.transforming=!0,this._transform(c.writechunk,c.writeencoding,c.afterTransform)):c.needTransform=!0},s.prototype._destroy=function(u,c){o.prototype._destroy.call(this,u,function(h){c(h)})};function l(u,c,h){if(c)return u.emit("error",c);if(h!=null&&u.push(h),u._writableState.length)throw new i;if(u._transformState.transforming)throw new r;return u.push(null)}return Yg}var Qg,gS;function EU(){if(gS)return Qg;gS=1,Qg=t;var e=pS();Ia(t,e);function t(n){if(!(this instanceof t))return new t(n);e.call(this,n)}return t.prototype._transform=function(n,r,i){i(null,n)},Qg}var Xg,mS;function _U(){if(mS)return Xg;mS=1;var e;function t(h){var d=!1;return function(){d||(d=!0,h.apply(void 0,arguments))}}var n=Ba().codes,r=n.ERR_MISSING_ARGS,i=n.ERR_STREAM_DESTROYED;function o(h){if(h)throw h}function a(h){return h.setHeader&&typeof h.abort=="function"}function s(h,d,p,m){m=t(m);var y=!1;h.on("close",function(){y=!0}),e===void 0&&(e=$g()),e(h,{readable:d,writable:p},function(A){if(A)return m(A);y=!0,m()});var w=!1;return function(A){if(!y&&!w){if(w=!0,a(h))return h.abort();if(typeof h.destroy=="function")return h.destroy();m(A||new i("pipe"))}}}function f(h){h()}function l(h,d){return h.pipe(d)}function u(h){return!h.length||typeof h[h.length-1]!="function"?o:h.pop()}function c(){for(var h=arguments.length,d=new Array(h),p=0;p<h;p++)d[p]=arguments[p];var m=u(d);if(Array.isArray(d[0])&&(d=d[0]),d.length<2)throw new r("streams");var y,w=d.map(function(A,S){var _=S<d.length-1,T=S>0;return s(A,_,T,function(I){y||(y=I),I&&w.forEach(f),!_&&(w.forEach(f),m(y))})});return d.reduce(l)}return Xg=c,Xg}var bS=mn,Kg=Bg.EventEmitter,SU=Ia;SU(mn,Kg),mn.Readable=hS(),mn.Writable=oS(),mn.Duplex=Da(),mn.Transform=pS(),mn.PassThrough=EU(),mn.finished=$g(),mn.pipeline=_U(),mn.Stream=mn;function mn(){Kg.call(this)}mn.prototype.pipe=function(e,t){var n=this;function r(u){e.writable&&e.write(u)===!1&&n.pause&&n.pause()}n.on("data",r);function i(){n.readable&&n.resume&&n.resume()}e.on("drain",i),!e._isStdio&&(!t||t.end!==!1)&&(n.on("end",a),n.on("close",s));var o=!1;function a(){o||(o=!0,e.end())}function s(){o||(o=!0,typeof e.destroy=="function"&&e.destroy())}function f(u){if(l(),Kg.listenerCount(this,"error")===0)throw u}n.on("error",f),e.on("error",f);function l(){n.removeListener("data",r),e.removeListener("drain",i),n.removeListener("end",a),n.removeListener("close",s),n.removeListener("error",f),e.removeListener("error",f),n.removeListener("end",l),n.removeListener("close",l),e.removeListener("close",l)}return n.on("end",l),n.on("close",l),e.on("close",l),e.emit("pipe",n),e};function Wl(e){return e.replace(/%([0-9A-Fa-f]{2})/g,(t,n)=>String.fromCharCode(parseInt(n,16)))}function yS(e,t){return String(t).replace(e,n=>`%${n.charCodeAt(0).toString(16).toUpperCase().padStart(2,"0")}`)}function Zl(e){return yS(/[\n;\r\t=%&,\x00-\x1f\x7f-\xff]/g,e)}function mr(e){return yS(/[\n\r\t%\x00-\x1f\x7f-\xff]/g,e)}function wS(e){if(!(e&&e.length)||e===".")return{};const t={};return e.replace(/\r?\n$/,"").split(";").forEach(n=>{const r=n.split("=",2);if(!(r[1]&&r[1].length))return;r[0]=r[0].trim();let i=t[r[0].trim()];i||(i=[],t[r[0]]=i),i.push(...r[1].split(",").map(o=>o.trim()).map(Wl))}),t}function xS(e){const t=e.split("	").map(r=>r==="."||r===""?null:r);return{seq_id:t[0]&&Wl(t[0]),source:t[1]&&Wl(t[1]),type:t[2]&&Wl(t[2]),start:t[3]===null?null:parseInt(t[3],10),end:t[4]===null?null:parseInt(t[4],10),score:t[5]===null?null:parseFloat(t[5]),strand:t[6],phase:t[7],attributes:t[8]===null?null:wS(t[8])}}function vS(e){const t=/^\s*##\s*(\S+)\s*(.*)/.exec(e);if(!t)return null;const[,n]=t;let[,,r]=t;const i={directive:n};if(r.length&&(r=r.replace(/\r?\n$/,""),i.value=r),n==="sequence-region"){const o=r.split(/\s+/,3);return{...i,seq_id:o[0],start:o[1]&&o[1].replace(/\D/g,""),end:o[2]&&o[2].replace(/\D/g,"")}}else if(n==="genome-build"){const[o,a]=r.split(/\s+/,2);return{...i,source:o,buildName:a}}return i}function AS(e){const t=[];return Object.entries(e).forEach(([n,r])=>{if(!r)return;let i;r.hasOwnProperty("toString")?i=Zl(r.toString()):Array.isArray(r)?i=r.map(Zl).join(","):i=Zl(r),t.push(`${Zl(n)}=${i}`)}),t.length?t.join(";"):"."}function CU(e,t){const n=e.attributes===null||e.attributes===void 0?".":AS(e.attributes),i=`${[e.seq_id===null?".":mr(e.seq_id),e.source===null?".":mr(e.source),e.type===null?".":mr(e.type),e.start===null?".":mr(e.start),e.end===null?".":mr(e.end),e.score===null?".":mr(e.score),e.strand===null?".":mr(e.strand),e.phase===null?".":mr(e.phase),n].join("	")}
`;return t[i]?"":(t[i]=!0,i)}function Wc(e,t){if(Array.isArray(e))return e.map(r=>Wc(r,t)).join("");const n=[CU(e,t)];return kU(e)&&n.push(...e.child_features.map(r=>Wc(r,t)),...e.derived_features.map(r=>Wc(r,t))),n.join("")}function ES(e){return Wc(e,{})}function _S(e){let t=`##${e.directive}`;return e.value&&(t+=` ${e.value}`),t+=`
`,t}function SS(e){return`# ${e.comment}
`}function Jg(e){return`>${e.id}${e.description?` ${e.description}`:""}
${e.sequence}
`}function Zc(e){function t(n){return"attributes"in n?ES(n):"directive"in n?_S(n):"sequence"in n?Jg(n):"comment"in n?SS(n):`# (invalid item found during format)
`}return Array.isArray(e)?e.map(t):t(e)}function kU(e){return e.child_features!==void 0&&e.derived_features!==void 0}const TU=Object.freeze(Object.defineProperty({__proto__:null,escape:Zl,escapeColumn:mr,formatAttributes:AS,formatComment:SS,formatDirective:_S,formatFeature:ES,formatItem:Zc,formatSequence:Jg,parseAttributes:wS,parseDirective:vS,parseFeature:xS,unescape:Wl},Symbol.toStringTag,{value:"Module"})),CS={Parent:"child_features",Derives_from:"derived_features"};class kS{constructor(t){this.seqCallback=t,this.currentSequence=void 0}addLine(t){const n=/^>\s*(\S+)\s*(.*)/.exec(t);n?(this._flush(),this.currentSequence={id:n[1],sequence:""},n[2]&&(this.currentSequence.description=n[2].trim())):this.currentSequence&&/\S/.test(t)&&(this.currentSequence.sequence+=t.replace(/\s/g,""))}_flush(){this.currentSequence&&this.seqCallback(this.currentSequence)}finish(){this._flush()}}class TS{constructor(t){this.fastaParser=void 0,this.eof=!1,this.lineNumber=0,this._underConstructionTopLevel=[],this._underConstructionById={},this._completedReferences={},this._underConstructionOrphans={};const n=()=>{};this.featureCallback=t.featureCallback||n,this.endCallback=t.endCallback||n,this.commentCallback=t.commentCallback||n,this.errorCallback=t.errorCallback||n,this.directiveCallback=t.directiveCallback||n,this.sequenceCallback=t.sequenceCallback||n,this.disableDerivesFromReferences=t.disableDerivesFromReferences||!1,this.bufferSize=t.bufferSize===void 0?1e3:t.bufferSize}addLine(t){if(this.fastaParser){this.fastaParser.addLine(t);return}if(this.eof)return;if(this.lineNumber+=1,/^\s*[^#\s>]/.test(t)){this._bufferLine(t);return}const n=/^\s*(#+)(.*)/.exec(t);if(n){const[,r]=n;let[,,i]=n;if(r.length===3)this._emitAllUnderConstructionFeatures();else if(r.length===2){const o=vS(t);o&&(o.directive==="FASTA"?(this._emitAllUnderConstructionFeatures(),this.eof=!0,this.fastaParser=new kS(this.sequenceCallback)):this._emitItem(o))}else i=i.replace(/\s*/,""),this._emitItem({comment:i})}else if(!/^\s*$/.test(t))if(/^\s*>/.test(t))this._emitAllUnderConstructionFeatures(),this.eof=!0,this.fastaParser=new kS(this.sequenceCallback),this.fastaParser.addLine(t);else{const r=t.replace(/\r?\n?$/g,"");throw new Error(`GFF3 parse error.  Cannot parse '${r}'.`)}}finish(){this._emitAllUnderConstructionFeatures(),this.fastaParser&&this.fastaParser.finish(),this.endCallback()}_emitItem(t){Array.isArray(t)?this.featureCallback(t):"directive"in t?this.directiveCallback(t):"comment"in t&&this.commentCallback(t)}_enforceBufferSizeLimit(t=0){const n=r=>{r&&Array.isArray(r)&&r[0].attributes&&r[0].attributes.ID&&r[0].attributes.ID[0]&&(r[0].attributes.ID.forEach(o=>{delete this._underConstructionById[o],delete this._completedReferences[o]}),r.forEach(o=>{o.child_features&&o.child_features.forEach(a=>n(a)),o.derived_features&&o.derived_features.forEach(a=>n(a))}))};for(;this._underConstructionTopLevel.length+t>this.bufferSize;){const r=this._underConstructionTopLevel.shift();r&&(this._emitItem(r),n(r))}}_emitAllUnderConstructionFeatures(){if(this._underConstructionTopLevel.forEach(this._emitItem.bind(this)),this._underConstructionTopLevel=[],this._underConstructionById={},this._completedReferences={},Array.from(Object.values(this._underConstructionOrphans)).length)throw new Error(`some features reference other features that do not exist in the file (or in the same '###' scope). ${Object.keys(this._underConstructionOrphans)}`)}_bufferLine(t){var n,r,i;const a={...xS(t),child_features:[],derived_features:[]},s=((n=a.attributes)===null||n===void 0?void 0:n.ID)||[],f=((r=a.attributes)===null||r===void 0?void 0:r.Parent)||[],l=this.disableDerivesFromReferences?[]:((i=a.attributes)===null||i===void 0?void 0:i.Derives_from)||[];if(!s.length&&!f.length&&!l.length){this._emitItem([a]);return}let u;s.forEach(c=>{const h=this._underConstructionById[c];h?(h[h.length-1].type!==a.type&&this._parseError(`multi-line feature "${c}" has inconsistent types: "${a.type}", "${h[h.length-1].type}"`),h.push(a),u=h):(u=[a],this._enforceBufferSizeLimit(1),!f.length&&!l.length&&this._underConstructionTopLevel.push(u),this._underConstructionById[c]=u,this._resolveReferencesTo(u,c))}),this._resolveReferencesFrom(u||[a],{Parent:f,Derives_from:l},s)}_resolveReferencesTo(t,n){const r=this._underConstructionOrphans[n];r&&(t.forEach(i=>{i.child_features.push(...r.Parent)}),t.forEach(i=>{i.derived_features.push(...r.Derives_from)}),delete this._underConstructionOrphans[n])}_parseError(t){this.eof=!0,this.errorCallback(`${this.lineNumber}: ${t}`)}_resolveReferencesFrom(t,n,r){function i(o,a,s){let f=o[a];f||(f={},o[a]=f);const l=f[s]||!1;return f[s]=!0,l}n.Parent.forEach(o=>{const a=this._underConstructionById[o];if(a){const s=CS.Parent;r.filter(f=>i(this._completedReferences,f,`Parent,${o}`)).length||a.forEach(f=>{f[s].push(t)})}else{let s=this._underConstructionOrphans[o];s||(s={Parent:[],Derives_from:[]},this._underConstructionOrphans[o]=s),s.Parent.push(t)}}),n.Derives_from.forEach(o=>{const a=this._underConstructionById[o];if(a){const s=CS.Derives_from;r.filter(f=>i(this._completedReferences,f,`Derives_from,${o}`)).length||a.forEach(f=>{f[s].push(t)})}else{let s=this._underConstructionOrphans[o];s||(s={Parent:[],Derives_from:[]},this._underConstructionOrphans[o]=s),s.Derives_from.push(t)}})}}function em(e){process&&process.nextTick?process.nextTick(e):e()}function IS(e){const t={encoding:"utf8",parseFeatures:!0,parseDirectives:!1,parseSequences:!0,parseComments:!1,bufferSize:1e3,disableDerivesFromReferences:!1,...e};return e.parseAll&&(t.parseFeatures=!0,t.parseDirectives=!0,t.parseComments=!0,t.parseSequences=!0),t}class IU extends bS.Transform{constructor(t={}){super({objectMode:!0}),this.textBuffer="";const n=IS(t);this.encoding=t.encoding||"utf8",this.decoder=new fU;const r=this.push.bind(this);this.parser=new TS({featureCallback:n.parseFeatures?r:void 0,directiveCallback:n.parseDirectives?r:void 0,commentCallback:n.parseComments?r:void 0,sequenceCallback:n.parseSequences?r:void 0,errorCallback:i=>this.emit("error",i),bufferSize:n.bufferSize,disableDerivesFromReferences:n.disableDerivesFromReferences})}_addLine(t){t&&this.parser.addLine(t)}_nextText(t){const n=(this.textBuffer+t).split(/\r?\n/);this.textBuffer=n.pop()||"",n.forEach(r=>this._addLine(r))}_transform(t,n,r){this._nextText(this.decoder.write(t)),em(r)}_flush(t){this.decoder.end&&this._nextText(this.decoder.end()),this.textBuffer!=null&&this._addLine(this.textBuffer),this.parser.finish(),em(t)}}function BU(e={}){return new IU(e)}function DU(e,t={}){if(!e)return[];const n=IS(t),r=[],i=r.push.bind(r),o=new TS({featureCallback:n.parseFeatures?i:void 0,directiveCallback:n.parseDirectives?i:void 0,commentCallback:n.parseComments?i:void 0,sequenceCallback:n.parseSequences?i:void 0,disableDerivesFromReferences:n.disableDerivesFromReferences||!1,bufferSize:1/0,errorCallback:a=>{throw a}});return e.split(/\r?\n/).forEach(o.addLine.bind(o)),o.finish(),r}function FU(e){const t=[],n=[];e.forEach(i=>{"sequence"in i?n.push(i):t.push(i)});let r=t.map(Zc).join("");return n.length&&(r+=`##FASTA
`,r+=n.map(Jg).join("")),r}class BS extends bS.Transform{constructor(t={}){super(Object.assign(t,{objectMode:!0})),this.linesSinceLastSyncMark=0,this.haveWeEmittedData=!1,this.fastaMode=!1,this.minLinesBetweenSyncMarks=t.minSyncLines||100,this.insertVersionDirective=t.insertVersionDirective||!1}_transform(t,n,r){let i;if(!this.haveWeEmittedData&&this.insertVersionDirective){const o=Array.isArray(t)?t[0]:t;"directive"in o&&o.directive!=="gff-version"&&this.push(`##gff-version 3
`)}if("sequence"in t&&!this.fastaMode&&(this.push(`##FASTA
`),this.fastaMode=!0),Array.isArray(t)?i=t.map(Zc).join(""):i=Zc(t),this.push(i),this.linesSinceLastSyncMark>=this.minLinesBetweenSyncMarks)this.push(`###
`),this.linesSinceLastSyncMark=0;else{let o=0;for(let a=0;a<i.length;a+=1)i[a]===`
`&&(o+=1);this.linesSinceLastSyncMark+=o}this.haveWeEmittedData=!0,em(r)}}function RU(e={}){return new BS(e)}function MU(e,t,n={}){const r={insertVersionDirective:!0,...n};return new Promise((i,o)=>{e.pipe(new BS(r)).on("end",()=>i(null)).on("error",o).pipe(t)})}const PU=Object.freeze(Object.defineProperty({__proto__:null,default:{parseStream:BU,parseStringSync:DU,formatSync:FU,formatStream:RU,formatFile:MU,util:TU}},Symbol.toStringTag,{value:"Module"}));xe.GenomeSpyDocEmbed=bv,Object.defineProperty(xe,Symbol.toStringTag,{value:"Module"})});
