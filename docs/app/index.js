(function(Si,ft){typeof exports=="object"&&typeof module<"u"?ft(exports):typeof define=="function"&&define.amd?define(["exports"],ft):(Si=typeof globalThis<"u"?globalThis:Si||self,ft(Si.genomeSpyDocEmbed={}))})(this,(function(Si){"use strict";function ft(n,e,t){return n.fields=e||[],n.fname=t,n}function hx(n){return n==null?null:n.fname}function dx(n){return n==null?null:n.fields}function gx(n){return n.length===1?px(n[0]):mx(n)}const px=n=>function(e){return e[n]},mx=n=>{const e=n.length;return function(t){for(let i=0;i<e;++i)t=t[n[i]];return t}};function Ee(n){throw Error(n)}function wx(n){const e=[],t=n.length;let i=null,r=0,s="",o,a,l;n=n+"";function c(){e.push(s+n.substring(o,a)),s="",o=a+1}for(o=a=0;a<t;++a)if(l=n[a],l==="\\")s+=n.substring(o,a++),o=a;else if(l===i)c(),i=null,r=-1;else{if(i)continue;o===r&&l==='"'||o===r&&l==="'"?(o=a+1,i=l):l==="."&&!r?a>o?c():o=a+1:l==="["?(a>o&&c(),r=o=a+1):l==="]"&&(r||Ee("Access path missing open bracket: "+n),r>0&&c(),r=0,o=a+1)}return r&&Ee("Access path missing closing bracket: "+n),i&&Ee("Access path missing closing quote: "+n),a>o&&(a++,c()),e}function Co(n,e,t){const i=wx(n);return n=i.length===1?i[0]:n,ft((t&&t.get||gx)(i),[n],e||n)}Co("id");const xo=ft(n=>n,[],"identity");ft(()=>0,[],"zero"),ft(()=>1,[],"one"),ft(()=>!0,[],"true"),ft(()=>!1,[],"false");const yx=new Set([...Object.getOwnPropertyNames(Object.prototype).filter(n=>typeof Object.prototype[n]=="function"),"__proto__"]);var xe=Array.isArray;function ze(n){return n===Object(n)}function bt(n){return n[n.length-1]}function Nr(n){return n==null||n===""?null:+n}const GA=n=>e=>n*Math.exp(e),zA=n=>e=>Math.log(n*e),Cx=n=>e=>Math.sign(e)*Math.log1p(Math.abs(e/n)),xx=n=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*n,bo=n=>e=>e<0?-Math.pow(-e,n):Math.pow(e,n);function Pc(n,e,t,i){const r=t(n[0]),s=t(bt(n)),o=(s-r)*e;return[i(r-o),i(s-o)]}function bx(n,e){return Pc(n,e,Nr,xo)}function Ex(n,e){var t=Math.sign(n[0]);return Pc(n,e,zA(t),GA(t))}function Ix(n,e,t){return Pc(n,e,bo(t),bo(1/t))}function Eo(n,e,t,i,r){const s=i(n[0]),o=i(bt(n)),a=e!=null?i(e):(s+o)/2;return[r(a+(s-a)*t),r(a+(o-a)*t)]}function HA(n,e,t){return Eo(n,e,t,Nr,xo)}function _A(n,e,t){const i=Math.sign(n[0]);return Eo(n,e,t,zA(i),GA(i))}function Lc(n,e,t,i){return Eo(n,e,t,bo(i),bo(1/i))}function Bx(n,e,t,i){return Eo(n,e,t,Cx(i),xx(i))}function Oc(n){return n!=null?xe(n)?n:[n]:[]}function vx(n,e,t){let i=n[0],r=n[1],s;return r<i&&(s=r,r=i,i=s),s=r-i,s>=t-e?[e,t]:[i=Math.min(Math.max(i,e),t-s),i+s]}function At(n){return typeof n=="function"}const Sx="descending";function VA(n,e,t){t=t||{},e=Oc(e)||[];const i=[],r=[],s={},o=t.comparator||Qx;return Oc(n).forEach((a,l)=>{a!=null&&(i.push(e[l]===Sx?-1:1),r.push(a=At(a)?a:Co(a,null,t)),(dx(a)||[]).forEach(c=>s[c]=1))}),r.length===0?null:ft(o(r,i),Object.keys(s))}const YA=(n,e)=>(n<e||n==null)&&e!=null?-1:(n>e||e==null)&&n!=null?1:(e=e instanceof Date?+e:e,(n=n instanceof Date?+n:n)!==n&&e===e?-1:e!==e&&n===n?1:0),Qx=(n,e)=>n.length===1?Dx(n[0],e[0]):kx(n,e,n.length),Dx=(n,e)=>function(t,i){return YA(n(t),n(i))*e},kx=(n,e,t)=>(e.push(0),function(i,r){let s,o=0,a=-1;for(;o===0&&++a<t;)s=n[a],o=YA(s(i),s(r));return o*e[a]});function Fx(n){for(let e,t,i=1,r=arguments.length;i<r;++i){e=arguments[i];for(t in e)n[t]=e[t]}return n}function Qi(n,e){return Object.hasOwn(n,e)}function Tr(n){return typeof n=="boolean"}function Rx(n){return Object.prototype.toString.call(n)==="[object Date]"}function Mx(n){return n&&At(n[Symbol.iterator])}function Ye(n){return typeof n=="number"}function Nx(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function le(n){return typeof n=="string"}function JA(n,e){const t=n[0],i=bt(n),r=+e;return r?r===1?i:t+r*(i-t):t}function Pr(n){return n&&bt(n)-n[0]||0}function Uc(n){return xe(n)?`[${n.map(e=>e===null?"null":Uc(e))}]`:ze(n)||le(n)?JSON.stringify(n).replaceAll("\u2028","\\u2028").replaceAll("\u2029","\\u2029"):n}function Tx(n){return n==null||n===""?null:!n||n==="false"||n==="0"?!1:!!n}const Px=n=>Ye(n)||Rx(n)?n:Date.parse(n);function Lx(n,e){return e=e||Px,n==null||n===""?null:e(n)}function Ox(n){return n==null||n===""?null:n+""}function Io(n){const e={},t=n.length;for(let i=0;i<t;++i)e[n[i]]=!0;return e}const Bo=globalThis,Gc=Bo.ShadowRoot&&(Bo.ShadyCSS===void 0||Bo.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,zc=Symbol(),KA=new WeakMap;let qA=class{constructor(e,t,i){if(this._$cssResult$=!0,i!==zc)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(Gc&&e===void 0){const i=t!==void 0&&t.length===1;i&&(e=KA.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&KA.set(t,e))}return e}toString(){return this.cssText}};const Ux=n=>new qA(typeof n=="string"?n:n+"",void 0,zc),Gx=(n,...e)=>{const t=n.length===1?n[0]:e.reduce((i,r,s)=>i+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+n[s+1],n[0]);return new qA(t,n,zc)},zx=(n,e)=>{if(Gc)n.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const t of e){const i=document.createElement("style"),r=Bo.litNonce;r!==void 0&&i.setAttribute("nonce",r),i.textContent=t.cssText,n.appendChild(i)}},jA=Gc?n=>n:n=>n instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return Ux(t)})(n):n;const{is:Hx,defineProperty:_x,getOwnPropertyDescriptor:Vx,getOwnPropertyNames:Yx,getOwnPropertySymbols:Jx,getPrototypeOf:Kx}=Object,vo=globalThis,WA=vo.trustedTypes,qx=WA?WA.emptyScript:"",jx=vo.reactiveElementPolyfillSupport,Lr=(n,e)=>n,Hc={toAttribute(n,e){switch(e){case Boolean:n=n?qx:null;break;case Object:case Array:n=n==null?n:JSON.stringify(n)}return n},fromAttribute(n,e){let t=n;switch(e){case Boolean:t=n!==null;break;case Number:t=n===null?null:Number(n);break;case Object:case Array:try{t=JSON.parse(n)}catch{t=null}}return t}},XA=(n,e)=>!Hx(n,e),ZA={attribute:!0,type:String,converter:Hc,reflect:!1,useDefault:!1,hasChanged:XA};Symbol.metadata??=Symbol("metadata"),vo.litPropertyMetadata??=new WeakMap;let Di=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=ZA){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const i=Symbol(),r=this.getPropertyDescriptor(e,i,t);r!==void 0&&_x(this.prototype,e,r)}}static getPropertyDescriptor(e,t,i){const{get:r,set:s}=Vx(this.prototype,e)??{get(){return this[t]},set(o){this[t]=o}};return{get:r,set(o){const a=r?.call(this);s?.call(this,o),this.requestUpdate(e,a,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??ZA}static _$Ei(){if(this.hasOwnProperty(Lr("elementProperties")))return;const e=Kx(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Lr("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Lr("properties"))){const t=this.properties,i=[...Yx(t),...Jx(t)];for(const r of i)this.createProperty(r,t[r])}const e=this[Symbol.metadata];if(e!==null){const t=litPropertyMetadata.get(e);if(t!==void 0)for(const[i,r]of t)this.elementProperties.set(i,r)}this._$Eh=new Map;for(const[t,i]of this.elementProperties){const r=this._$Eu(t,i);r!==void 0&&this._$Eh.set(r,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const r of i)t.unshift(jA(r))}else e!==void 0&&t.push(jA(e));return t}static _$Eu(e,t){const i=t.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const i of t.keys())this.hasOwnProperty(i)&&(e.set(i,this[i]),delete this[i]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return zx(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$ET(e,t){const i=this.constructor.elementProperties.get(e),r=this.constructor._$Eu(e,i);if(r!==void 0&&i.reflect===!0){const s=(i.converter?.toAttribute!==void 0?i.converter:Hc).toAttribute(t,i.type);this._$Em=e,s==null?this.removeAttribute(r):this.setAttribute(r,s),this._$Em=null}}_$AK(e,t){const i=this.constructor,r=i._$Eh.get(e);if(r!==void 0&&this._$Em!==r){const s=i.getPropertyOptions(r),o=typeof s.converter=="function"?{fromAttribute:s.converter}:s.converter?.fromAttribute!==void 0?s.converter:Hc;this._$Em=r;const a=o.fromAttribute(t,s.type);this[r]=a??this._$Ej?.get(r)??a,this._$Em=null}}requestUpdate(e,t,i,r=!1,s){if(e!==void 0){const o=this.constructor;if(r===!1&&(s=this[e]),i??=o.getPropertyOptions(e),!((i.hasChanged??XA)(s,t)||i.useDefault&&i.reflect&&s===this._$Ej?.get(e)&&!this.hasAttribute(o._$Eu(e,i))))return;this.C(e,t,i)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,t,{useDefault:i,reflect:r,wrapped:s},o){i&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,o??t??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||i||(t=void 0),this._$AL.set(e,t)),r===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[r,s]of this._$Ep)this[r]=s;this._$Ep=void 0}const i=this.constructor.elementProperties;if(i.size>0)for(const[r,s]of i){const{wrapped:o}=s,a=this[r];o!==!0||this._$AL.has(r)||a===void 0||this.C(r,void 0,s,a)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach(i=>i.hostUpdate?.()),this.update(t)):this._$EM()}catch(i){throw e=!1,this._$EM(),i}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(t=>this._$ET(t,this[t])),this._$EM()}updated(e){}firstUpdated(e){}};Di.elementStyles=[],Di.shadowRootOptions={mode:"open"},Di[Lr("elementProperties")]=new Map,Di[Lr("finalized")]=new Map,jx?.({ReactiveElement:Di}),(vo.reactiveElementVersions??=[]).push("2.1.2");const _c=globalThis,$A=n=>n,So=_c.trustedTypes,eh=So?So.createPolicy("lit-html",{createHTML:n=>n}):void 0,th="$lit$",gn=`lit$${Math.random().toFixed(9).slice(2)}$`,nh="?"+gn,Wx=`<${nh}>`,_n=document,Or=()=>_n.createComment(""),Ur=n=>n===null||typeof n!="object"&&typeof n!="function",Vc=Array.isArray,Xx=n=>Vc(n)||typeof n?.[Symbol.iterator]=="function",Yc=`[ 	
\f\r]`,Gr=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,ih=/-->/g,rh=/>/g,Vn=RegExp(`>|${Yc}(?:([^\\s"'>=/]+)(${Yc}*=${Yc}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),sh=/'/g,oh=/"/g,ah=/^(?:script|style|textarea|title)$/i,Zx=n=>(e,...t)=>({_$litType$:n,strings:e,values:t}),oe=Zx(1),Yn=Symbol.for("lit-noChange"),de=Symbol.for("lit-nothing"),ch=new WeakMap,Jn=_n.createTreeWalker(_n,129);function lh(n,e){if(!Vc(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return eh!==void 0?eh.createHTML(e):e}const $x=(n,e)=>{const t=n.length-1,i=[];let r,s=e===2?"<svg>":e===3?"<math>":"",o=Gr;for(let a=0;a<t;a++){const l=n[a];let c,u,f=-1,h=0;for(;h<l.length&&(o.lastIndex=h,u=o.exec(l),u!==null);)h=o.lastIndex,o===Gr?u[1]==="!--"?o=ih:u[1]!==void 0?o=rh:u[2]!==void 0?(ah.test(u[2])&&(r=RegExp("</"+u[2],"g")),o=Vn):u[3]!==void 0&&(o=Vn):o===Vn?u[0]===">"?(o=r??Gr,f=-1):u[1]===void 0?f=-2:(f=o.lastIndex-u[2].length,c=u[1],o=u[3]===void 0?Vn:u[3]==='"'?oh:sh):o===oh||o===sh?o=Vn:o===ih||o===rh?o=Gr:(o=Vn,r=void 0);const A=o===Vn&&n[a+1].startsWith("/>")?" ":"";s+=o===Gr?l+Wx:f>=0?(i.push(c),l.slice(0,f)+th+l.slice(f)+gn+A):l+gn+(f===-2?a:A)}return[lh(n,s+(n[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),i]};class zr{constructor({strings:e,_$litType$:t},i){let r;this.parts=[];let s=0,o=0;const a=e.length-1,l=this.parts,[c,u]=$x(e,t);if(this.el=zr.createElement(c,i),Jn.currentNode=this.el.content,t===2||t===3){const f=this.el.content.firstChild;f.replaceWith(...f.childNodes)}for(;(r=Jn.nextNode())!==null&&l.length<a;){if(r.nodeType===1){if(r.hasAttributes())for(const f of r.getAttributeNames())if(f.endsWith(th)){const h=u[o++],A=r.getAttribute(f).split(gn),d=/([.?@])?(.*)/.exec(h);l.push({type:1,index:s,name:d[2],strings:A,ctor:d[1]==="."?tb:d[1]==="?"?nb:d[1]==="@"?ib:Qo}),r.removeAttribute(f)}else f.startsWith(gn)&&(l.push({type:6,index:s}),r.removeAttribute(f));if(ah.test(r.tagName)){const f=r.textContent.split(gn),h=f.length-1;if(h>0){r.textContent=So?So.emptyScript:"";for(let A=0;A<h;A++)r.append(f[A],Or()),Jn.nextNode(),l.push({type:2,index:++s});r.append(f[h],Or())}}}else if(r.nodeType===8)if(r.data===nh)l.push({type:2,index:s});else{let f=-1;for(;(f=r.data.indexOf(gn,f+1))!==-1;)l.push({type:7,index:s}),f+=gn.length-1}s++}}static createElement(e,t){const i=_n.createElement("template");return i.innerHTML=e,i}}function ki(n,e,t=n,i){if(e===Yn)return e;let r=i!==void 0?t._$Co?.[i]:t._$Cl;const s=Ur(e)?void 0:e._$litDirective$;return r?.constructor!==s&&(r?._$AO?.(!1),s===void 0?r=void 0:(r=new s(n),r._$AT(n,t,i)),i!==void 0?(t._$Co??=[])[i]=r:t._$Cl=r),r!==void 0&&(e=ki(n,r._$AS(n,e.values),r,i)),e}class eb{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:i}=this._$AD,r=(e?.creationScope??_n).importNode(t,!0);Jn.currentNode=r;let s=Jn.nextNode(),o=0,a=0,l=i[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new Hr(s,s.nextSibling,this,e):l.type===1?c=new l.ctor(s,l.name,l.strings,this,e):l.type===6&&(c=new rb(s,this,e)),this._$AV.push(c),l=i[++a]}o!==l?.index&&(s=Jn.nextNode(),o++)}return Jn.currentNode=_n,r}p(e){let t=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class Hr{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,i,r){this.type=2,this._$AH=de,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=r,this._$Cv=r?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&e?.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=ki(this,e,t),Ur(e)?e===de||e==null||e===""?(this._$AH!==de&&this._$AR(),this._$AH=de):e!==this._$AH&&e!==Yn&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Xx(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==de&&Ur(this._$AH)?this._$AA.nextSibling.data=e:this.T(_n.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:i}=e,r=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=zr.createElement(lh(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===r)this._$AH.p(t);else{const s=new eb(r,this),o=s.u(this.options);s.p(t),this.T(o),this._$AH=s}}_$AC(e){let t=ch.get(e.strings);return t===void 0&&ch.set(e.strings,t=new zr(e)),t}k(e){Vc(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,r=0;for(const s of e)r===t.length?t.push(i=new Hr(this.O(Or()),this.O(Or()),this,this.options)):i=t[r],i._$AI(s),r++;r<t.length&&(this._$AR(i&&i._$AB.nextSibling,r),t.length=r)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e!==this._$AB;){const i=$A(e).nextSibling;$A(e).remove(),e=i}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}class Qo{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,i,r,s){this.type=1,this._$AH=de,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=s,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=de}_$AI(e,t=this,i,r){const s=this.strings;let o=!1;if(s===void 0)e=ki(this,e,t,0),o=!Ur(e)||e!==this._$AH&&e!==Yn,o&&(this._$AH=e);else{const a=e;let l,c;for(e=s[0],l=0;l<s.length-1;l++)c=ki(this,a[i+l],t,l),c===Yn&&(c=this._$AH[l]),o||=!Ur(c)||c!==this._$AH[l],c===de?e=de:e!==de&&(e+=(c??"")+s[l+1]),this._$AH[l]=c}o&&!r&&this.j(e)}j(e){e===de?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class tb extends Qo{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===de?void 0:e}}class nb extends Qo{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==de)}}let ib=class extends Qo{constructor(e,t,i,r,s){super(e,t,i,r,s),this.type=5}_$AI(e,t=this){if((e=ki(this,e,t,0)??de)===Yn)return;const i=this._$AH,r=e===de&&i!==de||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,s=e!==de&&(i===de||r);r&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}};class rb{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){ki(this,e)}}const sb=_c.litHtmlPolyfillSupport;sb?.(zr,Hr),(_c.litHtmlVersions??=[]).push("3.3.2");const _r=(n,e,t)=>{const i=t?.renderBefore??e;let r=i._$litPart$;if(r===void 0){const s=t?.renderBefore??null;i._$litPart$=r=new Hr(e.insertBefore(Or(),s),s,void 0,t??{})}return r._$AI(n),r};const Jc=globalThis;let Vr=class extends Di{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=_r(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Yn}};Vr._$litElement$=!0,Vr.finalized=!0,Jc.litElementHydrateSupport?.({LitElement:Vr});const ob=Jc.litElementPolyfillSupport;ob?.({LitElement:Vr}),(Jc.litElementVersions??=[]).push("4.2.2");var uh={},Kc={},qc=34,Yr=10,jc=13;function fh(n){return new Function("d","return {"+n.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function ab(n,e){var t=fh(n);return function(i,r){return e(t(i),r,n)}}function Ah(n){var e=Object.create(null),t=[];return n.forEach(function(i){for(var r in i)r in e||t.push(e[r]=r)}),t}function rt(n,e){var t=n+"",i=t.length;return i<e?new Array(e-i+1).join(0)+t:t}function cb(n){return n<0?"-"+rt(-n,6):n>9999?"+"+rt(n,6):rt(n,4)}function lb(n){var e=n.getUTCHours(),t=n.getUTCMinutes(),i=n.getUTCSeconds(),r=n.getUTCMilliseconds();return isNaN(n)?"Invalid Date":cb(n.getUTCFullYear())+"-"+rt(n.getUTCMonth()+1,2)+"-"+rt(n.getUTCDate(),2)+(r?"T"+rt(e,2)+":"+rt(t,2)+":"+rt(i,2)+"."+rt(r,3)+"Z":i?"T"+rt(e,2)+":"+rt(t,2)+":"+rt(i,2)+"Z":t||e?"T"+rt(e,2)+":"+rt(t,2)+"Z":"")}function hh(n){var e=new RegExp('["'+n+`
\r]`),t=n.charCodeAt(0);function i(f,h){var A,d,g=r(f,function(p,m){if(A)return A(p,m-1);d=p,A=h?ab(p,h):fh(p)});return g.columns=d||[],g}function r(f,h){var A=[],d=f.length,g=0,p=0,m,y=d<=0,C=!1;f.charCodeAt(d-1)===Yr&&--d,f.charCodeAt(d-1)===jc&&--d;function w(){if(y)return Kc;if(C)return C=!1,uh;var I,b=g,S;if(f.charCodeAt(b)===qc){for(;g++<d&&f.charCodeAt(g)!==qc||f.charCodeAt(++g)===qc;);return(I=g)>=d?y=!0:(S=f.charCodeAt(g++))===Yr?C=!0:S===jc&&(C=!0,f.charCodeAt(g)===Yr&&++g),f.slice(b+1,I-1).replace(/""/g,'"')}for(;g<d;){if((S=f.charCodeAt(I=g++))===Yr)C=!0;else if(S===jc)C=!0,f.charCodeAt(g)===Yr&&++g;else if(S!==t)continue;return f.slice(b,I)}return y=!0,f.slice(b,d)}for(;(m=w())!==Kc;){for(var E=[];m!==uh&&m!==Kc;)E.push(m),m=w();h&&(E=h(E,p++))==null||A.push(E)}return A}function s(f,h){return f.map(function(A){return h.map(function(d){return u(A[d])}).join(n)})}function o(f,h){return h==null&&(h=Ah(f)),[h.map(u).join(n)].concat(s(f,h)).join(`
`)}function a(f,h){return h==null&&(h=Ah(f)),s(f,h).join(`
`)}function l(f){return f.map(c).join(`
`)}function c(f){return f.map(u).join(n)}function u(f){return f==null?"":f instanceof Date?lb(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:i,parseRows:r,format:o,formatBody:a,formatRows:l,formatRow:c,formatValue:u}}var ub=hh("	"),fb=ub.parseRows;function Ab(n){return n}function hb(n){if(n==null)return Ab;var e,t,i=n.scale[0],r=n.scale[1],s=n.translate[0],o=n.translate[1];return function(a,l){l||(e=t=0);var c=2,u=a.length,f=new Array(u);for(f[0]=(e+=a[0])*i+s,f[1]=(t+=a[1])*r+o;c<u;)f[c]=a[c],++c;return f}}function db(n,e){for(var t,i=n.length,r=i-e;r<--i;)t=n[r],n[r++]=n[i],n[i]=t}function gb(n,e){return typeof e=="string"&&(e=n.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(t){return dh(n,t)})}:dh(n,e)}function dh(n,e){var t=e.id,i=e.bbox,r=e.properties==null?{}:e.properties,s=gh(n,e);return t==null&&i==null?{type:"Feature",properties:r,geometry:s}:i==null?{type:"Feature",id:t,properties:r,geometry:s}:{type:"Feature",id:t,bbox:i,properties:r,geometry:s}}function gh(n,e){var t=hb(n.transform),i=n.arcs;function r(u,f){f.length&&f.pop();for(var h=i[u<0?~u:u],A=0,d=h.length;A<d;++A)f.push(t(h[A],A));u<0&&db(f,d)}function s(u){return t(u)}function o(u){for(var f=[],h=0,A=u.length;h<A;++h)r(u[h],f);return f.length<2&&f.push(f[0]),f}function a(u){for(var f=o(u);f.length<4;)f.push(f[0]);return f}function l(u){return u.map(a)}function c(u){var f=u.type,h;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(c)};case"Point":h=s(u.coordinates);break;case"MultiPoint":h=u.coordinates.map(s);break;case"LineString":h=o(u.arcs);break;case"MultiLineString":h=u.arcs.map(o);break;case"Polygon":h=l(u.arcs);break;case"MultiPolygon":h=u.arcs.map(l);break;default:return null}return{type:f,coordinates:h}}return c(e)}function pb(n,e){var t={},i={},r={},s=[],o=-1;e.forEach(function(c,u){var f=n.arcs[c<0?~c:c],h;f.length<3&&!f[1][0]&&!f[1][1]&&(h=e[++o],e[o]=c,e[u]=h)}),e.forEach(function(c){var u=a(c),f=u[0],h=u[1],A,d;if(A=r[f])if(delete r[A.end],A.push(c),A.end=h,d=i[h]){delete i[d.start];var g=d===A?A:A.concat(d);i[g.start=A.start]=r[g.end=d.end]=g}else i[A.start]=r[A.end]=A;else if(A=i[h])if(delete i[A.start],A.unshift(c),A.start=f,d=r[f]){delete r[d.end];var p=d===A?A:d.concat(A);i[p.start=d.start]=r[p.end=A.end]=p}else i[A.start]=r[A.end]=A;else A=[c],i[A.start=f]=r[A.end=h]=A});function a(c){var u=n.arcs[c<0?~c:c],f=u[0],h;return n.transform?(h=[0,0],u.forEach(function(A){h[0]+=A[0],h[1]+=A[1]})):h=u[u.length-1],c<0?[h,f]:[f,h]}function l(c,u){for(var f in c){var h=c[f];delete u[h.start],delete h.start,delete h.end,h.forEach(function(A){t[A<0?~A:A]=1}),s.push(h)}}return l(r,i),l(i,r),e.forEach(function(c){t[c<0?~c:c]||s.push([c])}),s}function mb(n){return gh(n,wb.apply(this,arguments))}function wb(n,e,t){var i,r,s;if(arguments.length>1)i=yb(n,e,t);else for(r=0,i=new Array(s=n.arcs.length);r<s;++r)i[r]=r;return{type:"MultiLineString",arcs:pb(n,i)}}function yb(n,e,t){var i=[],r=[],s;function o(f){var h=f<0?~f:f;(r[h]||(r[h]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function l(f){f.forEach(a)}function c(f){f.forEach(l)}function u(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(u);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":l(f.arcs);break;case"MultiPolygon":c(f.arcs);break}}return u(e),r.forEach(t==null?function(f){i.push(f[0].i)}:function(f){t(f[0].g,f[f.length-1].g)&&i.push(f[0].i)}),i}function Kn(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Cb(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function qn(n){let e,t,i;n.length!==2?(e=Kn,t=(a,l)=>Kn(n(a),l),i=(a,l)=>n(a)-l):(e=n===Kn||n===Cb?n:xb,t=n,i=n);function r(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;t(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;t(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){const f=r(a,l,c,u-1);return f>c&&i(a[f-1],l)>-i(a[f],l)?f-1:f}return{left:r,center:o,right:s}}function xb(){return 0}function ph(n){return n===null?NaN:+n}function*bb(n,e){if(e===void 0)for(let t of n)t!=null&&(t=+t)>=t&&(yield t);else{let t=-1;for(let i of n)(i=e(i,++t,n))!=null&&(i=+i)>=i&&(yield i)}}const mh=qn(Kn),pn=mh.right;mh.left,qn(ph).center;function Eb(n,e){let t=0;if(e===void 0)for(let i of n)i!=null&&(i=+i)>=i&&++t;else{let i=-1;for(let r of n)(r=e(r,++i,n))!=null&&(r=+r)>=r&&++t}return t}function Ib(n,e){let t=0,i,r=0,s=0;if(e===void 0)for(let o of n)o!=null&&(o=+o)>=o&&(i=o-r,r+=i/++t,s+=i*(o-r));else{let o=-1;for(let a of n)(a=e(a,++o,n))!=null&&(a=+a)>=a&&(i=a-r,r+=i/++t,s+=i*(a-r))}if(t>1)return s/(t-1)}function Bb(n,e){let t,i;for(const r of n)r!=null&&(t===void 0?r>=r&&(t=i=r):(t>r&&(t=r),i<r&&(i=r)));return[t,i]}class Kt extends Map{constructor(e,t=Qb){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(wh(this,e))}has(e){return super.has(wh(this,e))}set(e,t){return super.set(vb(this,e),t)}delete(e){return super.delete(Sb(this,e))}}function wh({_intern:n,_key:e},t){const i=e(t);return n.has(i)?n.get(i):t}function vb({_intern:n,_key:e},t){const i=e(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function Sb({_intern:n,_key:e},t){const i=e(t);return n.has(i)&&(t=n.get(i),n.delete(i)),t}function Qb(n){return n!==null&&typeof n=="object"?n.valueOf():n}function Wc(n){return n}function Do(n,...e){return yh(n,Wc,Wc,e)}function Db(n,...e){return yh(n,Array.from,Wc,e)}function yh(n,e,t,i){return(function r(s,o){if(o>=i.length)return t(s);const a=new Kt,l=i[o++];let c=-1;for(const u of s){const f=l(u,++c,s),h=a.get(f);h?h.push(u):a.set(f,[u])}for(const[u,f]of a)a.set(u,r(f,o));return e(a)})(n,0)}function kb(n=Kn){if(n===Kn)return Ch;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const i=n(e,t);return i||i===0?i:(n(t,t)===0)-(n(e,e)===0)}}function Ch(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}const Fb=Math.sqrt(50),Rb=Math.sqrt(10),Mb=Math.sqrt(2);function ko(n,e,t){const i=(e-n)/Math.max(0,t),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),o=s>=Fb?10:s>=Rb?5:s>=Mb?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/o,a=Math.round(n*c),l=Math.round(e*c),a/c<n&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,r)*o,a=Math.round(n/c),l=Math.round(e/c),a*c<n&&++a,l*c>e&&--l),l<a&&.5<=t&&t<2?ko(n,e,t*2):[a,l,c]}function Fo(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const i=e<n,[r,s,o]=i?ko(e,n,t):ko(n,e,t);if(!(s>=r))return[];const a=s-r+1,l=new Array(a);if(i)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(r+c)/-o;else for(let c=0;c<a;++c)l[c]=(r+c)*o;return l}function Xc(n,e,t){return e=+e,n=+n,t=+t,ko(n,e,t)[2]}function jn(n,e,t){e=+e,n=+n,t=+t;const i=e<n,r=i?Xc(e,n,t):Xc(n,e,t);return(i?-1:1)*(r<0?1/-r:r)}function Zc(n,e){let t;if(e===void 0)for(const i of n)i!=null&&(t<i||t===void 0&&i>=i)&&(t=i);else{let i=-1;for(let r of n)(r=e(r,++i,n))!=null&&(t<r||t===void 0&&r>=r)&&(t=r)}return t}function $c(n,e){let t;if(e===void 0)for(const i of n)i!=null&&(t>i||t===void 0&&i>=i)&&(t=i);else{let i=-1;for(let r of n)(r=e(r,++i,n))!=null&&(t>r||t===void 0&&r>=r)&&(t=r)}return t}function xh(n,e,t=0,i=1/0,r){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),i=Math.floor(Math.min(n.length-1,i)),!(t<=e&&e<=i))return n;for(r=r===void 0?Ch:kb(r);i>t;){if(i-t>600){const l=i-t+1,c=e-t+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),A=Math.max(t,Math.floor(e-c*f/l+h)),d=Math.min(i,Math.floor(e+(l-c)*f/l+h));xh(n,e,A,d,r)}const s=n[e];let o=t,a=i;for(Jr(n,t,e),r(n[i],s)>0&&Jr(n,t,i);o<a;){for(Jr(n,o,a),++o,--a;r(n[o],s)<0;)++o;for(;r(n[a],s)>0;)--a}r(n[t],s)===0?Jr(n,t,a):(++a,Jr(n,a,i)),a<=e&&(t=a+1),e<=a&&(i=a-1)}return n}function Jr(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}function Nb(n,e,t){if(n=Float64Array.from(bb(n,t)),!(!(i=n.length)||isNaN(e=+e))){if(e<=0||i<2)return $c(n);if(e>=1)return Zc(n);var i,r=(i-1)*e,s=Math.floor(r),o=Zc(xh(n,s).subarray(0,s+1)),a=$c(n.subarray(s+1));return o+(a-o)*(r-s)}}function bh(n,e,t=ph){if(!(!(i=n.length)||isNaN(e=+e))){if(e<=0||i<2)return+t(n[0],0,n);if(e>=1)return+t(n[i-1],i-1,n);var i,r=(i-1)*e,s=Math.floor(r),o=+t(n[s],s,n),a=+t(n[s+1],s+1,n);return o+(a-o)*(r-s)}}function Tb(n,e){let t=0,i=0;if(e===void 0)for(let r of n)r!=null&&(r=+r)>=r&&(++t,i+=r);else{let r=-1;for(let s of n)(s=e(s,++r,n))!=null&&(s=+s)>=s&&(++t,i+=s)}if(t)return i/t}function Pb(n,e){return Nb(n,.5,e)}function Kr(n,e,t){n=+n,e=+e,t=(r=arguments.length)<2?(e=n,n=0,1):r<3?1:+t;for(var i=-1,r=Math.max(0,Math.ceil((e-n)/t))|0,s=new Array(r);++i<r;)s[i]=n+i*t;return s}function qr(n,e){let t=0;if(e===void 0)for(let i of n)(i=+i)&&(t+=i);else{let i=-1;for(let r of n)(r=+e(r,++i,n))&&(t+=r)}return t}function Lb(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function Ro(n,e){if(!isFinite(n)||n===0)return null;var t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"),i=n.slice(0,t);return[i.length>1?i[0]+i.slice(2):i,+n.slice(t+1)]}function Fi(n){return n=Ro(Math.abs(n)),n?n[1]:NaN}function Ob(n,e){return function(t,i){for(var r=t.length,s=[],o=0,a=n[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),s.push(t.substring(r-=a,r+a)),!((l+=a+1)>i));)a=n[o=(o+1)%n.length];return s.reverse().join(e)}}function Ub(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var Gb=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ri(n){if(!(e=Gb.exec(n)))throw new Error("invalid format: "+n);var e;return new el({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ri.prototype=el.prototype;function el(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}el.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function zb(n){e:for(var e=n.length,t=1,i=-1,r;t<e;++t)switch(n[t]){case".":i=r=t;break;case"0":i===0&&(i=t),r=t;break;default:if(!+n[t])break e;i>0&&(i=0);break}return i>0?n.slice(0,i)+n.slice(r+1):n}var Mo;function Hb(n,e){var t=Ro(n,e);if(!t)return Mo=void 0,n.toPrecision(e);var i=t[0],r=t[1],s=r-(Mo=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Ro(n,Math.max(0,e+s-1))[0]}function Eh(n,e){var t=Ro(n,e);if(!t)return n+"";var i=t[0],r=t[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const Ih={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:Lb,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>Eh(n*100,e),r:Eh,s:Hb,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function Bh(n){return n}var vh=Array.prototype.map,Sh=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function _b(n){var e=n.grouping===void 0||n.thousands===void 0?Bh:Ob(vh.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",i=n.currency===void 0?"":n.currency[1]+"",r=n.decimal===void 0?".":n.decimal+"",s=n.numerals===void 0?Bh:Ub(vh.call(n.numerals,String)),o=n.percent===void 0?"%":n.percent+"",a=n.minus===void 0?"−":n.minus+"",l=n.nan===void 0?"NaN":n.nan+"";function c(f,h){f=Ri(f);var A=f.fill,d=f.align,g=f.sign,p=f.symbol,m=f.zero,y=f.width,C=f.comma,w=f.precision,E=f.trim,I=f.type;I==="n"?(C=!0,I="g"):Ih[I]||(w===void 0&&(w=12),E=!0,I="g"),(m||A==="0"&&d==="=")&&(m=!0,A="0",d="=");var b=(h&&h.prefix!==void 0?h.prefix:"")+(p==="$"?t:p==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():""),S=(p==="$"?i:/[%p]/.test(I)?o:"")+(h&&h.suffix!==void 0?h.suffix:""),Q=Ih[I],v=/[defgprs%]/.test(I);w=w===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function F(R){var N=b,O=S,H,G,V;if(I==="c")O=Q(R)+O,R="";else{R=+R;var te=R<0||1/R<0;if(R=isNaN(R)?l:Q(Math.abs(R),w),E&&(R=zb(R)),te&&+R==0&&g!=="+"&&(te=!1),N=(te?g==="("?g:a:g==="-"||g==="("?"":g)+N,O=(I==="s"&&!isNaN(R)&&Mo!==void 0?Sh[8+Mo/3]:"")+O+(te&&g==="("?")":""),v){for(H=-1,G=R.length;++H<G;)if(V=R.charCodeAt(H),48>V||V>57){O=(V===46?r+R.slice(H+1):R.slice(H))+O,R=R.slice(0,H);break}}}C&&!m&&(R=e(R,1/0));var ae=N.length+R.length+O.length,ne=ae<y?new Array(y-ae+1).join(A):"";switch(C&&m&&(R=e(ne+R,ne.length?y-O.length:1/0),ne=""),d){case"<":R=N+R+O+ne;break;case"=":R=N+ne+R+O;break;case"^":R=ne.slice(0,ae=ne.length>>1)+N+R+O+ne.slice(ae);break;default:R=ne+N+R+O;break}return s(R)}return F.toString=function(){return f+""},F}function u(f,h){var A=Math.max(-8,Math.min(8,Math.floor(Fi(h)/3)))*3,d=Math.pow(10,-A),g=c((f=Ri(f),f.type="f",f),{suffix:Sh[8+A/3]});return function(p){return g(d*p)}}return{format:c,formatPrefix:u}}var No,He,Qh;Vb({thousands:",",grouping:[3],currency:["$",""]});function Vb(n){return No=_b(n),He=No.format,Qh=No.formatPrefix,No}function Yb(n){return Math.max(0,-Fi(Math.abs(n)))}function Jb(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Fi(e)/3)))*3-Fi(Math.abs(n)))}function Kb(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,Fi(e)-Fi(n))+1}const tl=new Date,nl=new Date;function Se(n,e,t,i){function r(s){return n(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(n(s=new Date(+s)),s),r.ceil=s=>(n(s=new Date(s-1)),e(s,1),n(s),s),r.round=s=>{const o=r(s),a=r.ceil(s);return s-o<a-s?o:a},r.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),r.range=(s,o,a)=>{const l=[];if(s=r.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),e(s,a),n(s);while(c<s&&s<o);return l},r.filter=s=>Se(o=>{if(o>=o)for(;n(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),t&&(r.count=(s,o)=>(tl.setTime(+s),nl.setTime(+o),n(tl),n(nl),Math.floor(t(tl,nl))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?o=>i(o)%s===0:o=>r.count(0,o)%s===0):r)),r}const Mi=Se(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);Mi.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?Se(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):Mi),Mi.range;const qt=1e3,ht=qt*60,jt=ht*60,Wt=jt*24,il=Wt*7,Dh=Wt*30,rl=Wt*365,Xt=Se(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*qt)},(n,e)=>(e-n)/qt,n=>n.getUTCSeconds());Xt.range;const To=Se(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*qt)},(n,e)=>{n.setTime(+n+e*ht)},(n,e)=>(e-n)/ht,n=>n.getMinutes());To.range;const Po=Se(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*ht)},(n,e)=>(e-n)/ht,n=>n.getUTCMinutes());Po.range;const Lo=Se(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*qt-n.getMinutes()*ht)},(n,e)=>{n.setTime(+n+e*jt)},(n,e)=>(e-n)/jt,n=>n.getHours());Lo.range;const Oo=Se(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*jt)},(n,e)=>(e-n)/jt,n=>n.getUTCHours());Oo.range;const mn=Se(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*ht)/Wt,n=>n.getDate()-1);mn.range;const Wn=Se(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Wt,n=>n.getUTCDate()-1);Wn.range;const kh=Se(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Wt,n=>Math.floor(n/Wt));kh.range;function Xn(n){return Se(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ht)/il)}const jr=Xn(0),Uo=Xn(1),qb=Xn(2),jb=Xn(3),Ni=Xn(4),Wb=Xn(5),Xb=Xn(6);jr.range,Uo.range,qb.range,jb.range,Ni.range,Wb.range,Xb.range;function Zn(n){return Se(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/il)}const Wr=Zn(0),Go=Zn(1),Zb=Zn(2),$b=Zn(3),Ti=Zn(4),eE=Zn(5),tE=Zn(6);Wr.range,Go.range,Zb.range,$b.range,Ti.range,eE.range,tE.range;const Xr=Se(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());Xr.range;const Zr=Se(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());Zr.range;const kt=Se(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());kt.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Se(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)}),kt.range;const Ft=Se(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());Ft.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Se(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)}),Ft.range;function Fh(n,e,t,i,r,s){const o=[[Xt,1,qt],[Xt,5,5*qt],[Xt,15,15*qt],[Xt,30,30*qt],[s,1,ht],[s,5,5*ht],[s,15,15*ht],[s,30,30*ht],[r,1,jt],[r,3,3*jt],[r,6,6*jt],[r,12,12*jt],[i,1,Wt],[i,2,2*Wt],[t,1,il],[e,1,Dh],[e,3,3*Dh],[n,1,rl]];function a(c,u,f){const h=u<c;h&&([c,u]=[u,c]);const A=f&&typeof f.range=="function"?f:l(c,u,f),d=A?A.range(c,+u+1):[];return h?d.reverse():d}function l(c,u,f){const h=Math.abs(u-c)/f,A=qn(([,,p])=>p).right(o,h);if(A===o.length)return n.every(jn(c/rl,u/rl,f));if(A===0)return Mi.every(Math.max(jn(c,u,f),1));const[d,g]=o[h/o[A-1][2]<o[A][2]/h?A-1:A];return d.every(g)}return[a,l]}const[nE,iE]=Fh(Ft,Zr,Wr,kh,Oo,Po),[rE,sE]=Fh(kt,Xr,jr,mn,Lo,To),$r="year",es="quarter",ts="month",ns="week",is="date",zo="day",sl="dayofyear",rs="hours",ss="minutes",os="seconds",Ho="milliseconds";[$r,es,ts,ns,is,zo,sl,rs,ss,os,Ho].reduce((n,e,t)=>(n[e]=1+t,n),{});const oE={[$r]:kt,[es]:Xr.every(3),[ts]:Xr,[ns]:jr,[is]:mn,[zo]:mn,[sl]:mn,[rs]:Lo,[ss]:To,[os]:Xt,[Ho]:Mi},aE={[$r]:Ft,[es]:Zr.every(3),[ts]:Zr,[ns]:Wr,[is]:Wn,[zo]:Wn,[sl]:Wn,[rs]:Oo,[ss]:Po,[os]:Xt,[Ho]:Mi};function cE(n){return oE[n]}function lE(n){return aE[n]}function ol(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function al(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function as(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function Rh(n){var e=n.dateTime,t=n.date,i=n.time,r=n.periods,s=n.days,o=n.shortDays,a=n.months,l=n.shortMonths,c=cs(r),u=ls(r),f=cs(s),h=ls(s),A=cs(o),d=ls(o),g=cs(a),p=ls(a),m=cs(l),y=ls(l),C={a:V,A:te,b:ae,B:ne,c:null,d:Oh,e:Oh,f:RE,g:HE,G:VE,H:DE,I:kE,j:FE,L:Uh,m:ME,M:NE,p:Ge,q:Yt,Q:Yh,s:Jh,S:TE,u:PE,U:LE,V:OE,w:UE,W:GE,x:null,X:null,y:zE,Y:_E,Z:YE,"%":Vh},w={a:po,A:Rr,b:un,B:vi,c:null,d:zh,e:zh,f:jE,g:sI,G:aI,H:JE,I:KE,j:qE,L:Hh,m:WE,M:XE,p:mo,q:Mr,Q:Yh,s:Jh,S:ZE,u:$E,U:eI,V:tI,w:nI,W:iI,x:null,X:null,y:rI,Y:oI,Z:cI,"%":Vh},E={a:v,A:F,b:R,B:N,c:O,d:Ph,e:Ph,f:BE,g:Th,G:Nh,H:Lh,I:Lh,j:xE,L:IE,m:CE,M:bE,p:Q,q:yE,Q:SE,s:QE,S:EE,u:dE,U:gE,V:pE,w:hE,W:mE,x:H,X:G,y:Th,Y:Nh,Z:wE,"%":vE};C.x=I(t,C),C.X=I(i,C),C.c=I(e,C),w.x=I(t,w),w.X=I(i,w),w.c=I(e,w);function I(U,q){return function(W){var M=[],Xe=-1,se=0,nt=U.length,Ze,fn,wo;for(W instanceof Date||(W=new Date(+W));++Xe<nt;)U.charCodeAt(Xe)===37&&(M.push(U.slice(se,Xe)),(fn=Mh[Ze=U.charAt(++Xe)])!=null?Ze=U.charAt(++Xe):fn=Ze==="e"?" ":"0",(wo=q[Ze])&&(Ze=wo(W,fn)),M.push(Ze),se=Xe+1);return M.push(U.slice(se,Xe)),M.join("")}}function b(U,q){return function(W){var M=as(1900,void 0,1),Xe=S(M,U,W+="",0),se,nt;if(Xe!=W.length)return null;if("Q"in M)return new Date(M.Q);if("s"in M)return new Date(M.s*1e3+("L"in M?M.L:0));if(q&&!("Z"in M)&&(M.Z=0),"p"in M&&(M.H=M.H%12+M.p*12),M.m===void 0&&(M.m="q"in M?M.q:0),"V"in M){if(M.V<1||M.V>53)return null;"w"in M||(M.w=1),"Z"in M?(se=al(as(M.y,0,1)),nt=se.getUTCDay(),se=nt>4||nt===0?Go.ceil(se):Go(se),se=Wn.offset(se,(M.V-1)*7),M.y=se.getUTCFullYear(),M.m=se.getUTCMonth(),M.d=se.getUTCDate()+(M.w+6)%7):(se=ol(as(M.y,0,1)),nt=se.getDay(),se=nt>4||nt===0?Uo.ceil(se):Uo(se),se=mn.offset(se,(M.V-1)*7),M.y=se.getFullYear(),M.m=se.getMonth(),M.d=se.getDate()+(M.w+6)%7)}else("W"in M||"U"in M)&&("w"in M||(M.w="u"in M?M.u%7:"W"in M?1:0),nt="Z"in M?al(as(M.y,0,1)).getUTCDay():ol(as(M.y,0,1)).getDay(),M.m=0,M.d="W"in M?(M.w+6)%7+M.W*7-(nt+5)%7:M.w+M.U*7-(nt+6)%7);return"Z"in M?(M.H+=M.Z/100|0,M.M+=M.Z%100,al(M)):ol(M)}}function S(U,q,W,M){for(var Xe=0,se=q.length,nt=W.length,Ze,fn;Xe<se;){if(M>=nt)return-1;if(Ze=q.charCodeAt(Xe++),Ze===37){if(Ze=q.charAt(Xe++),fn=E[Ze in Mh?q.charAt(Xe++):Ze],!fn||(M=fn(U,W,M))<0)return-1}else if(Ze!=W.charCodeAt(M++))return-1}return M}function Q(U,q,W){var M=c.exec(q.slice(W));return M?(U.p=u.get(M[0].toLowerCase()),W+M[0].length):-1}function v(U,q,W){var M=A.exec(q.slice(W));return M?(U.w=d.get(M[0].toLowerCase()),W+M[0].length):-1}function F(U,q,W){var M=f.exec(q.slice(W));return M?(U.w=h.get(M[0].toLowerCase()),W+M[0].length):-1}function R(U,q,W){var M=m.exec(q.slice(W));return M?(U.m=y.get(M[0].toLowerCase()),W+M[0].length):-1}function N(U,q,W){var M=g.exec(q.slice(W));return M?(U.m=p.get(M[0].toLowerCase()),W+M[0].length):-1}function O(U,q,W){return S(U,e,q,W)}function H(U,q,W){return S(U,t,q,W)}function G(U,q,W){return S(U,i,q,W)}function V(U){return o[U.getDay()]}function te(U){return s[U.getDay()]}function ae(U){return l[U.getMonth()]}function ne(U){return a[U.getMonth()]}function Ge(U){return r[+(U.getHours()>=12)]}function Yt(U){return 1+~~(U.getMonth()/3)}function po(U){return o[U.getUTCDay()]}function Rr(U){return s[U.getUTCDay()]}function un(U){return l[U.getUTCMonth()]}function vi(U){return a[U.getUTCMonth()]}function mo(U){return r[+(U.getUTCHours()>=12)]}function Mr(U){return 1+~~(U.getUTCMonth()/3)}return{format:function(U){var q=I(U+="",C);return q.toString=function(){return U},q},parse:function(U){var q=b(U+="",!1);return q.toString=function(){return U},q},utcFormat:function(U){var q=I(U+="",w);return q.toString=function(){return U},q},utcParse:function(U){var q=b(U+="",!0);return q.toString=function(){return U},q}}}var Mh={"-":"",_:" ",0:"0"},Re=/^\s*\d+/,uE=/^%/,fE=/[\\^$*+?|[\]().{}]/g;function Z(n,e,t){var i=n<0?"-":"",r=(i?-n:n)+"",s=r.length;return i+(s<t?new Array(t-s+1).join(e)+r:r)}function AE(n){return n.replace(fE,"\\$&")}function cs(n){return new RegExp("^(?:"+n.map(AE).join("|")+")","i")}function ls(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function hE(n,e,t){var i=Re.exec(e.slice(t,t+1));return i?(n.w=+i[0],t+i[0].length):-1}function dE(n,e,t){var i=Re.exec(e.slice(t,t+1));return i?(n.u=+i[0],t+i[0].length):-1}function gE(n,e,t){var i=Re.exec(e.slice(t,t+2));return i?(n.U=+i[0],t+i[0].length):-1}function pE(n,e,t){var i=Re.exec(e.slice(t,t+2));return i?(n.V=+i[0],t+i[0].length):-1}function mE(n,e,t){var i=Re.exec(e.slice(t,t+2));return i?(n.W=+i[0],t+i[0].length):-1}function Nh(n,e,t){var i=Re.exec(e.slice(t,t+4));return i?(n.y=+i[0],t+i[0].length):-1}function Th(n,e,t){var i=Re.exec(e.slice(t,t+2));return i?(n.y=+i[0]+(+i[0]>68?1900:2e3),t+i[0].length):-1}function wE(n,e,t){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return i?(n.Z=i[1]?0:-(i[2]+(i[3]||"00")),t+i[0].length):-1}function yE(n,e,t){var i=Re.exec(e.slice(t,t+1));return i?(n.q=i[0]*3-3,t+i[0].length):-1}function CE(n,e,t){var i=Re.exec(e.slice(t,t+2));return i?(n.m=i[0]-1,t+i[0].length):-1}function Ph(n,e,t){var i=Re.exec(e.slice(t,t+2));return i?(n.d=+i[0],t+i[0].length):-1}function xE(n,e,t){var i=Re.exec(e.slice(t,t+3));return i?(n.m=0,n.d=+i[0],t+i[0].length):-1}function Lh(n,e,t){var i=Re.exec(e.slice(t,t+2));return i?(n.H=+i[0],t+i[0].length):-1}function bE(n,e,t){var i=Re.exec(e.slice(t,t+2));return i?(n.M=+i[0],t+i[0].length):-1}function EE(n,e,t){var i=Re.exec(e.slice(t,t+2));return i?(n.S=+i[0],t+i[0].length):-1}function IE(n,e,t){var i=Re.exec(e.slice(t,t+3));return i?(n.L=+i[0],t+i[0].length):-1}function BE(n,e,t){var i=Re.exec(e.slice(t,t+6));return i?(n.L=Math.floor(i[0]/1e3),t+i[0].length):-1}function vE(n,e,t){var i=uE.exec(e.slice(t,t+1));return i?t+i[0].length:-1}function SE(n,e,t){var i=Re.exec(e.slice(t));return i?(n.Q=+i[0],t+i[0].length):-1}function QE(n,e,t){var i=Re.exec(e.slice(t));return i?(n.s=+i[0],t+i[0].length):-1}function Oh(n,e){return Z(n.getDate(),e,2)}function DE(n,e){return Z(n.getHours(),e,2)}function kE(n,e){return Z(n.getHours()%12||12,e,2)}function FE(n,e){return Z(1+mn.count(kt(n),n),e,3)}function Uh(n,e){return Z(n.getMilliseconds(),e,3)}function RE(n,e){return Uh(n,e)+"000"}function ME(n,e){return Z(n.getMonth()+1,e,2)}function NE(n,e){return Z(n.getMinutes(),e,2)}function TE(n,e){return Z(n.getSeconds(),e,2)}function PE(n){var e=n.getDay();return e===0?7:e}function LE(n,e){return Z(jr.count(kt(n)-1,n),e,2)}function Gh(n){var e=n.getDay();return e>=4||e===0?Ni(n):Ni.ceil(n)}function OE(n,e){return n=Gh(n),Z(Ni.count(kt(n),n)+(kt(n).getDay()===4),e,2)}function UE(n){return n.getDay()}function GE(n,e){return Z(Uo.count(kt(n)-1,n),e,2)}function zE(n,e){return Z(n.getFullYear()%100,e,2)}function HE(n,e){return n=Gh(n),Z(n.getFullYear()%100,e,2)}function _E(n,e){return Z(n.getFullYear()%1e4,e,4)}function VE(n,e){var t=n.getDay();return n=t>=4||t===0?Ni(n):Ni.ceil(n),Z(n.getFullYear()%1e4,e,4)}function YE(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Z(e/60|0,"0",2)+Z(e%60,"0",2)}function zh(n,e){return Z(n.getUTCDate(),e,2)}function JE(n,e){return Z(n.getUTCHours(),e,2)}function KE(n,e){return Z(n.getUTCHours()%12||12,e,2)}function qE(n,e){return Z(1+Wn.count(Ft(n),n),e,3)}function Hh(n,e){return Z(n.getUTCMilliseconds(),e,3)}function jE(n,e){return Hh(n,e)+"000"}function WE(n,e){return Z(n.getUTCMonth()+1,e,2)}function XE(n,e){return Z(n.getUTCMinutes(),e,2)}function ZE(n,e){return Z(n.getUTCSeconds(),e,2)}function $E(n){var e=n.getUTCDay();return e===0?7:e}function eI(n,e){return Z(Wr.count(Ft(n)-1,n),e,2)}function _h(n){var e=n.getUTCDay();return e>=4||e===0?Ti(n):Ti.ceil(n)}function tI(n,e){return n=_h(n),Z(Ti.count(Ft(n),n)+(Ft(n).getUTCDay()===4),e,2)}function nI(n){return n.getUTCDay()}function iI(n,e){return Z(Go.count(Ft(n)-1,n),e,2)}function rI(n,e){return Z(n.getUTCFullYear()%100,e,2)}function sI(n,e){return n=_h(n),Z(n.getUTCFullYear()%100,e,2)}function oI(n,e){return Z(n.getUTCFullYear()%1e4,e,4)}function aI(n,e){var t=n.getUTCDay();return n=t>=4||t===0?Ti(n):Ti.ceil(n),Z(n.getUTCFullYear()%1e4,e,4)}function cI(){return"+0000"}function Vh(){return"%"}function Yh(n){return+n}function Jh(n){return Math.floor(+n/1e3)}var Pi,cl,Kh,ll,qh;lI({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function lI(n){return Pi=Rh(n),cl=Pi.format,Kh=Pi.parse,ll=Pi.utcFormat,qh=Pi.utcParse,Pi}function _o(n){const e={};return t=>e[t]||(e[t]=n(t))}function jh(n,e,t){t=t||{},ze(t)||Ee(`Invalid time multi-format specifier: ${t}`);const i=e(os),r=e(ss),s=e(rs),o=e(is),a=e(ns),l=e(ts),c=e(es),u=e($r),f=n(t[Ho]||".%L"),h=n(t[os]||":%S"),A=n(t[ss]||"%I:%M"),d=n(t[rs]||"%I %p"),g=n(t[is]||t[zo]||"%a %d"),p=n(t[ns]||"%b %d"),m=n(t[ts]||"%B"),y=n(t[es]||"%B"),C=n(t[$r]||"%Y");return w=>(i(w)<w?f:r(w)<w?h:s(w)<w?A:o(w)<w?d:l(w)<w?a(w)<w?g:p:u(w)<w?c(w)<w?m:y:C)(w)}function Wh(n){const e=_o(n.format),t=_o(n.utcFormat);return{timeFormat:i=>le(i)?e(i):jh(e,cE,i),utcFormat:i=>le(i)?t(i):jh(t,lE,i),timeParse:_o(n.parse),utcParse:_o(n.utcParse)}}let ul;uI();function uI(){return ul=Wh({format:cl,parse:Kh,utcFormat:ll,utcParse:qh})}function fI(n){return Wh(Rh(n))}function AI(n){return arguments.length?ul=fI(n):ul}const hI=n=>n!=null&&n===n,dI=n=>n==="true"||n==="false"||n===!0||n===!1,gI=n=>!Number.isNaN(Date.parse(n)),Xh=n=>!Number.isNaN(+n)&&!(n instanceof Date),pI=n=>Xh(n)&&Number.isInteger(+n),Zh={boolean:Tx,integer:Nr,number:Nr,date:Lx,string:Ox,unknown:xo},Vo=[dI,pI,Xh,gI],mI=["boolean","integer","number","date"];function wI(n,e){if(!n||!n.length)return"unknown";const t=n.length,i=Vo.length,r=Vo.map((s,o)=>o+1);for(let s=0,o=0,a,l;s<t;++s)for(l=e?n[s][e]:n[s],a=0;a<i;++a)if(r[a]&&hI(l)&&!Vo[a](l)&&(r[a]=0,++o,o===Vo.length))return"string";return mI[r.reduce((s,o)=>s===0?o:s,0)-1]}function yI(n,e){return e.reduce((t,i)=>(t[i]=wI(n,i),t),{})}function $h(n){const e=function(t,i){const r={delimiter:n};return fl(t,i?Fx(i,r):r)};return e.responseType="text",e}function fl(n,e){return e.header&&(n=e.header.map(Uc).join(e.delimiter)+`
`+n),hh(e.delimiter).parse(n+"")}fl.responseType="text";function CI(n){return typeof Buffer=="function"&&At(Buffer.isBuffer)?Buffer.isBuffer(n):!1}function Al(n,e){const t=e&&e.property?Co(e.property):xo;return ze(n)&&!CI(n)?xI(t(n),e):t(JSON.parse(n))}Al.responseType="json";function xI(n,e){return!xe(n)&&Mx(n)&&(n=[...n]),e&&e.copy?JSON.parse(JSON.stringify(n)):n}const bI={interior:(n,e)=>n!==e,exterior:(n,e)=>n===e};function ed(n,e){let t,i,r,s;return n=Al(n,e),e&&e.feature?(t=gb,r=e.feature):e&&e.mesh?(t=mb,r=e.mesh,s=bI[e.filter]):Ee("Missing TopoJSON feature or mesh parameter."),i=(i=n.objects[r])?t(n,i,s):Ee("Invalid TopoJSON object: "+r),i&&i.features||[i]}ed.responseType="json";const hl={dsv:fl,csv:$h(","),tsv:$h("	"),json:Al,topojson:ed};function dl(n,e){return arguments.length>1?(hl[n]=e,this):Qi(hl,n)?hl[n]:null}function gl(n,e,t,i){e=e||{};const r=dl(e.type||"json");return r||Ee("Unknown data format type: "+e.type),n=r(n,e),e.parse&&EI(n,e.parse,t,i),Qi(n,"columns")&&delete n.columns,n}function EI(n,e,t,i){if(!n.length)return;const r=AI();t=t||r.timeParse,i=i||r.utcParse;let s=n.columns||Object.keys(n[0]),o,a,l,c,u,f;e==="auto"&&(e=yI(n,s)),s=Object.keys(e);const h=s.map(A=>{const d=e[A];let g,p;if(d&&(d.startsWith("date:")||d.startsWith("utc:")))return g=d.split(/:(.+)?/,2),p=g[1],(p[0]==="'"&&p[p.length-1]==="'"||p[0]==='"'&&p[p.length-1]==='"')&&(p=p.slice(1,-1)),(g[0]==="utc"?i:t)(p);if(!Zh[d])throw Error("Illegal format pattern: "+A+":"+d);return Zh[d]});for(l=0,u=n.length,f=s.length;l<u;++l)for(o=n[l],c=0;c<f;++c)a=s[c],o[a]=h[c](o[a])}const II=`
:root {
--genome-spy-basic-spacing: 10px;
--genome-spy-font-family: system-ui, "Segoe UI", Roboto, Helvetica, Arial,
sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}

.genome-spy {
font-family: var(--genome-spy-font-family);

position: relative;

display: flex;
flex-direction: column;

.canvas-wrapper {
position: relative;
flex-grow: 1;
overflow: hidden;
}

canvas {
display: block;
transform: scale(1, 1);
opacity: 1;
transition:
transform 0.6s,
opacity 0.6s;

&:focus,
&:focus-visible {
outline: none;
}
}

.loading {
> canvas {
transform: scale(0.95, 0.95);
opacity: 0;
}
}

.loading-indicators {
position: absolute;
inset: 0;

user-select: none;
pointer-events: none;

div {
position: absolute;
display: flex;
align-items: center;
justify-content: center;

> div {
font-size: 11px;
transition: opacity 0.2s;
background: white;
padding: 2px 5px;
display: flex;
border-radius: 3px;
gap: 0.5em;
opacity: 0;

&.loading {
opacity: 0.5;
}

&.error {
opacity: 0.8;
color: firebrick;
}

> * {
display: block;
}

img {
width: 1.5em;
height: 1.5em;
}
}
}
}

.tooltip {
position: absolute;

max-width: 450px;
overflow: hidden;

--background-color: #f6f6f6;
background: var(--background-color);
padding: var(--genome-spy-basic-spacing);

--font-size: 12px;
font-size: var(--font-size);

box-shadow: 0px 3px 15px 0px rgba(0, 0, 0, 0.21);

&:not(.sticky) {
pointer-events: none;
}

transition:
outline-color 0.3s ease-in-out,
box-shadow 0.3s ease-in-out;

outline: 0px solid transparent;
&.sticky {
outline: 2px solid black;
box-shadow: 0px 3px 18px 0px rgba(0, 0, 0, 0.3);
}

z-index: 100;

> :last-child {
margin-bottom: 0;
}

> .title {
padding-bottom: calc(var(--genome-spy-basic-spacing) / 2);
margin-bottom: calc(var(--genome-spy-basic-spacing) / 2);
border-bottom: 1px dashed var(--background-color);
border-bottom: 1px dashed
color-mix(in srgb, black 25%, var(--background-color));
}

.summary {
font-size: 12px;
}

table {
&:first-child {
margin-top: 0;
}

border-collapse: collapse;

th,
td {
padding: 2px 0.4em;
vertical-align: top;
font-size: var(--font-size);

&:first-child {
padding-left: 0;
}
}

th {
text-align: left;
font-weight: bold;
}
}

.color-legend {
display: inline-block;
width: 0.8em;
height: 0.8em;
margin-left: 0.4em;
box-shadow: 0px 0px 3px 1px white;
}

.attributes {
.hovered {
background-color: #e0e0e0;
}
}

.na {
color: #aaa;
font-style: italic;
font-size: 80%;
}
}

.gene-track-tooltip {
.summary {
font-size: 90%;
}
}

.message-box {
display: flex;
align-items: center;
justify-content: center;
position: absolute;
top: 0;
height: 100%;
width: 100%;

> div {
border: 1px solid red;
padding: 10px;
background: #fff0f0;
}
}
}

.gs-input-binding {
display: grid;
grid-template-columns: max-content max-content;
column-gap: 1em;
row-gap: 0.3em;
justify-items: start;

> select,
> input:not([type="checkbox"]) {
width: 100%;
}

input[type="range"] + span {
display: inline-block;
margin-left: 0.3em;
min-width: 2.2em;
font-variant-numeric: tabular-nums;
}

input[type="range"],
input[type="radio"] {
vertical-align: text-bottom;
}

.radio-group {
display: flex;
align-items: center;
}

.description {
max-width: 26em;
grid-column: 1 / -1;
color: #777;
font-size: 90%;
margin-top: -0.5em;
}
}

.gs-input-bindings {
flex-basis: content;
font-size: 14px;
padding: var(--genome-spy-basic-spacing);
}
`;function BI(n,e){var t=n.getBoundingClientRect();return[e.clientX-t.left-n.clientLeft,e.clientY-t.top-n.clientTop]}function Li(n,e){return n.length==e.length&&n.every((t,i)=>n[i]===e[i])}function Me(n){return Array.isArray(n)?n:typeof n<"u"?[n]:[]}function Yo(n){return n[n.length-1]}class vI{#e=!1;#t=!0;#n=void 0;#i=0;#s=void 0;#o=0;#r;#a;#c=[!0];constructor(e){this.#a=e,this.#r=document.createElement("div"),this.#r.className="tooltip",this.#a.appendChild(this.#r),this.clear()}set sticky(e){!e&&this.#e&&this.clear(),this.#e=e,this.#r.classList.toggle("sticky",this.#e)}get sticky(){return this.#e}set visible(e){e!=this.#t&&(this.#r.style.display=e?null:"none",this.#t=e)}get visible(){return this.#t}get enabled(){return Yo(this.#c)??!0}pushEnabledState(e){this.#c.push(e),e||(this.visible=!1)}popEnabledState(){this.#c.pop()}handleMouseMove(e){if(this.#e)return;this.mouseCoords=BI(this.#a,e);const t=performance.now();!this.visible&&!this._isPenalty()&&t-this.#o>500&&(this.#i=t+70),this.#s&&SI(this.mouseCoords,this.#s)>20&&(this.#i=t+400),this.#s=this.mouseCoords,this.visible&&this.updatePlacement(),this.#o=t}updatePlacement(){const[t,i]=this.mouseCoords;let r=t+20;r>this.#a.clientWidth-this.#r.offsetWidth&&(r=t-20-this.#r.offsetWidth),this.#r.style.left=r+"px",this.#r.style.top=Math.min(i+20,this.#a.clientHeight-this.#r.offsetHeight)+"px"}setContent(e){if(!this.#e){if(!e||!this.enabled||this._isPenalty()){this.visible&&(_r("",this.#r),this.visible=!1),this.#n=void 0;return}_r(e,this.#r),this.visible=!0,this.updatePlacement()}}clear(){this.#n=void 0,this.setContent(void 0)}updateWithDatum(e,t){if(e!==this.#n){this.#n=e,t||(t=r=>Promise.resolve(oe` ${JSON.stringify(r)} `));const i=e;t(e).then(r=>{this.#n===i&&this.setContent(r)}).catch(r=>{if(r!=="debounced")throw r})}}_isPenalty(){return this.#i&&this.#i>performance.now()}}function SI(n,e){let t=0;for(let i=0;i<n.length;i++)t+=(n[i]-e[i])**2;return Math.sqrt(t)}function QI(n){n.classList.add("genome-spy");const e=document.createElement("style");e.innerHTML=II,n.appendChild(e);const t=td("div",{class:"canvas-wrapper"});n.appendChild(t),t.classList.add("loading");const i=td("div",{class:"loading-indicators"}),r=new vI(n);return{canvasWrapper:t,loadingIndicatorsElement:i,tooltip:r,styleElement:e}}function DI(n,e){const t=document.createElement("div");t.className="message-box";const i=document.createElement("div");i.textContent=e,t.appendChild(i),n.appendChild(t)}function td(n,e){const t=document.createElement(n);for(const[i,r]of Object.entries(e))["innerHTML","innerText","className"].includes(i)&&(t[i]=r),t.setAttribute(i,r);return t}const nd={ATTRIBUTE:1,CHILD:2},id=n=>(...e)=>({_$litDirective$:n,values:e});let rd=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,i){this._$Ct=e,this._$AM=t,this._$Ci=i}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};const sd="important",kI=" !"+sd,Jo=id(class extends rd{constructor(n){if(super(n),n.type!==nd.ATTRIBUTE||n.name!=="style"||n.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(n){return Object.keys(n).reduce((e,t)=>{const i=n[t];return i==null?e:e+`${t=t.includes("-")?t:t.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${i};`},"")}update(n,[e]){const{style:t}=n.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const i of this.ft)e[i]==null&&(this.ft.delete(i),i.includes("-")?t.removeProperty(i):t[i]=null);for(const i in e){const r=e[i];if(r!=null){this.ft.add(i);const s=typeof r=="string"&&r.endsWith(kI);i.includes("-")||s?t.setProperty(i,s?r.slice(0,-11):r,s?sd:""):t[i]=r}}return Yn}}),od="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e.spinner_ajPY{transform-origin:center;animation:spinner_AtaB%20.75s%20infinite%20linear}@keyframes%20spinner_AtaB{100%25{transform:rotate(360deg)}}%3c/style%3e%3cpath%20d='M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z'%20opacity='.25'/%3e%3cpath%20d='M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z'%20class='spinner_ajPY'/%3e%3c/svg%3e";class FI{#e;#t;#n=null;constructor(e,t){this.#e=e,this.#t=t,this.#n=this.#t.subscribe(()=>this.updateLayout()),this.updateLayout()}destroy(){this.#n&&(this.#n(),this.#n=null)}updateLayout(){const e=[],t=()=>{for(const[,s]of this.#t.entries())if(s.status=="loading"||s.status=="error")return!0;return!1};let i,r=!1;for(const[s,o]of this.#t.entries()){const a=o.status=="loading"||o.status=="error",l=s.coords;if(!l&&a&&!i&&(i=o),l){a&&(r=!0);const c={left:`${l.x}px`,top:`${l.y}px`,width:`${l.width}px`,height:`${l.height}px`};e.push(oe`<div style=${Jo(c)}>
                        <div class=${o.status}>
                            ${o.status=="error"?oe`<span
                                      >Loading
                                      failed${o.detail?oe`: ${o.detail}`:de}</span
                                  >`:oe`
                                      <img src="${od}" alt="" />
                                      <span>Loading...</span>
                                  `}
                        </div>
                    </div>`)}}if(i&&!r){const s={left:"0px",top:"0px",width:"100%",height:"100%"};e.push(oe`<div style=${Jo(s)}>
                    <div class=${i.status}>
                        ${i.status=="error"?oe`<span
                                  >Loading
                                  failed${i.detail?oe`: ${i.detail}`:de}</span
                              >`:oe`
                                  <img src="${od}" alt="" />
                                  <span>Loading...</span>
                              `}
                    </div>
                </div>`)}t()?this.#e.style.display="block":setTimeout(()=>{t()||(this.#e.style.display="none")},3e3),_r(e,this.#e)}}class ad{#e=new Map;#t=new Set;set(e,t,i){if(!e)throw new Error("LoadingStatusRegistry.set requires a view.");this.#e.set(e,{status:t,detail:i});const r={view:e,status:t,detail:i};for(const s of this.#t)s(r)}delete(e){const t=this.#e.get(e);if(!t)return;this.#e.delete(e);const i={view:e,status:t.status,detail:t.detail};for(const r of this.#t)r(i)}get(e){return this.#e.get(e)}entries(){return this.#e.entries()}subscribe(e){return this.#t.add(e),()=>{this.#t.delete(e)}}}function RI(n){return e=>{if(n.querySelector(".view-highlight")?.remove(),e){if(!e.isVisible())return;const t=e.coords;if(t){const i=document.createElement("div");i.className="view-highlight",i.style.position="absolute",i.style.left=t.x+"px",i.style.top=t.y+"px",i.style.width=t.width+"px",i.style.height=t.height+"px",i.style.border="1px solid green",i.style.backgroundColor="rgba(0, 255, 0, 0.05)",i.style.pointerEvents="none",n.appendChild(i)}}}}class MI{#e;constructor(){this.#e=new Map}add(e,t){document.addEventListener(e,t);let i=this.#e.get(e);i||(i=[],this.#e.set(e,i)),i.push(t)}removeAll(){for(const[e,t]of this.#e)for(const i of t)document.removeEventListener(e,i);this.#e.clear()}}class cd{#e;constructor(){this.#e=new Map}add(e,t){let i=this.#e.get(e);i||(i=new Set,this.#e.set(e,i)),i.add(t)}remove(e,t){this.#e.get(e)?.delete(t)}emit(e,t){this.#e.get(e)?.forEach(i=>i(t))}}function Ko(n,e,t=!0){let i,r=o=>{};return function(...a){return new Promise((l,c)=>{const u=()=>{clearTimeout(i),r=f=>{},l(n(...a))};t&&r("debounced"),clearTimeout(i),r=c,i=window.setTimeout(u,typeof e=="function"?e():e)})}}const Rt=1,wn=2,pl=4;class ml{stats={count:0,first:null};#e=!1;#t=!1;#n=[];paramRuntimeProvider=null;get behavior(){return 0}get label(){return`(${this.constructor.name})`}constructor(e){this.paramRuntimeProvider=e,this.children=[],this.parent=void 0,this.completed=!1}get disposed(){return this.#t}reset(){this.completed=!1;for(const e of this.children)e.reset();this.stats.count=0,this.stats.first=null}initialize(){}initializeOnce(){this.#e||(this.initialize(),this.#e=!0)}#i(){this._propagate=Function("children","stats",Kr(this.children.length).map(e=>`const child${e} = children[${e}];`).join(`
`)+`return function propagate(datum) {
                    if (stats.count === 0) {
                        stats.first = structuredClone(datum);
                    }
                    stats.count++;
                ${Kr(this.children.length).map(e=>`child${e}.handle(datum);`).join(`
`)}
                };`)(this.children,this.stats)}setParent(e){this.parent=e}addChild(e){if(e.parent)throw new Error("Cannot add the child! It already has a parent.");return this.children.push(e),e.setParent(this),this.#i(),this}adopt(e){e.parent&&e.parent.removeChild(e),this.addChild(e)}adoptChildrenOf(e){for(const t of e.children)this.adopt(t)}insertAsParent(e){if(this.isRoot())throw new Error("Cannot insert a new parent for a root node!");e.parent=this.parent,this.parent.children[this.parent.children.indexOf(this)]=e,this.parent.#i(),this.parent=void 0,e.addChild(this)}removeChild(e){const t=this.children.indexOf(e);if(t>-1)this.children.splice(t,1),e.parent=void 0,this.#i();else throw new Error("Trying to remove an unknown child node!")}excise(){if(this.isRoot())throw new Error("Cannot excise root node!");if(this.isTerminal())this.parent.removeChild(this);else if(this.children.length==1){const e=this.children[0];e.setParent(this.parent),this.parent.children[this.parent.children.indexOf(this)]=e,this.parent.#i(),this.setParent(void 0),this.children.length=0}else throw new Error("Cannot excise a node that has multiple children!")}isRoot(){return!this.parent}isBranching(){return this.children.length>1}isTerminal(){return this.children.length==0}visit(e){e(this);for(const t of this.children)t.visit(e);e.afterChildren&&e.afterChildren(this)}subtreeToString(e=0){const t=this.children.map(i=>i.subtreeToString(e+1)).join("");return`${" ".repeat(e*2)}* ${this.label}${"identifier"in this&&this.identifier?": "+this.identifier:""} 
${t}`}handle(e){this._propagate(e)}complete(){this.completed=!0;for(const e of this.children)e.complete()}registerDisposer(e){this.#t?e():this.#n.push(e)}dispose(){if(!this.#t){this.#t=!0;for(const e of this.#n)e();this.#n.length=0}}disposeSubtree(){const e=()=>{};e.afterChildren=t=>{t.dispose()},this.visit(e)}beginBatch(e){for(const t of this.children)t.beginBatch(e)}get paramRuntime(){if(this.paramRuntimeProvider&&this.paramRuntimeProvider.paramRuntime)return this.paramRuntimeProvider.paramRuntime;if(!this.parent)throw new Error("Cannot find paramRuntime!");return this.parent.paramRuntime}repropagate(){if(this.parent)this.parent.repropagate();else throw new Error("Cannot repropagate data, no FlowNode with stored data found!")}_propagate(e){}}function ld(n){return n.type=="file"}function NI(n){return n.type=="facet"}class Qe extends ml{#e;constructor(e,t){super(t),this.#e=e.type}get label(){return this.#e}}const dt="_uniqueId",ud=1e4,fd=[null];class wl extends Qe{get behavior(){return wn}constructor(e){super(e),this.params=e,this.as=e.as??dt,this._blocks=[],this._usedBlocks=0,this._id=-1}initialize(){}reset(){super.reset(),this._usedBlocks=0,this._id=-1}handle(e){e[this.as]=this._nextId(),this._propagate(e)}_nextId(){return++this._id%ud==0&&(this._id=this._getBlock()*ud),this._id}_getBlock(){return this._usedBlocks<this._blocks.length?this._blocks[this._usedBlocks++]:this._reserveBlock()}_reserveBlock(){const e=fd.length;return fd[e]=this,this._blocks.push(e),this._usedBlocks++,e}}function $(n,e=n){if(/^[A-Za-z0-9_]+$/.test(n)){const t=function(r){n in r||TI(r,n)},i=new Function("validator",`
                let validated = !validator;
                return function accessField(datum) {
                    if (!validated) {
                        validator(datum);
                        validated = true;
                    }
                    return datum[${JSON.stringify(n)}];
                }`)(t);return ft(i,[n],e)}else return Co(n)}function TI(n,e){throw new Error(`Invalid field "${e}". Available fields or properties: ${Object.keys(n).join(", ")}`)}function Ad(n,e,t){if(!n)return;function i(s){const o=s;return o.fields??=[],o.constant=o.fields.length===0,o.channelDef=e,o.channel=n,o.sourceKey=LI(e),o.scaleChannel=((gt(e)&&e.resolutionChannel)??(jo(n)&&n))||void 0,o.scaleChannel!==void 0&&(o.domainKeyBase=dd({scaleChannel:o.scaleChannel,source:yl(e)}).domainKeyBase),"param"in e?(o.predicate=Fd(!1),o.predicate.param=e.param,o.predicate.empty=e.empty??!0):(o.predicate=Fd(!0),o.predicate.empty=!1),o.equals=a=>a?o===a||o.sourceKey!==void 0&&o.sourceKey===a.sourceKey:!1,o.asNumberAccessor=()=>o,o}function r(s){if(be(s)){const o=i(t.createExpression(s.expr));if(o.fields.length>0)throw new Error("Expression in DatumDef/ValueDef cannot access data fields: "+s.expr);return o}else{const o=s;return i(()=>o)}}if(Zt(e))try{return i($(e.field))}catch(s){throw new Error(`Invalid field definition: ${s.message}`)}else{if(Ui(e))return i(t.createExpression(e.expr));if(Oi(e))return r(e.datum);if(ut(e))return r(e.value);throw new Error(`Invalid channel definition: "${n}": ${JSON.stringify(e)}! The channel definition must contain one of the following properties: "field", "datum", "value" or "expr".`)}}function PI(n,e,t){const i=[];if(HI(e)||Cl(e)){const r=Array.isArray(e.condition)?e.condition:[e.condition];for(const s of r)i.push(Ad(n,s,t))}if(i.push(Ad(n,e,t)),i.filter(r=>!r.constant).length>1)throw new Error("Only one accessor can be non-constant. Channel: "+n);return i}function hd(n){return n.scaleChannel!==void 0}function yl(n){if(Zt(n))return{kind:"field",value:n.field};if(Ui(n))return{kind:"expr",value:n.expr};if(Oi(n))return{kind:"datum",value:n.datum};if(ut(n))return{kind:"value",value:n.value};throw new Error("Cannot derive a domain key from channel definition: "+JSON.stringify(n))}function LI(n){const e=yl(n);return e.kind==="datum"||e.kind==="value"?"constant|"+md(e.value):e.kind+"|"+pd(e)}function dd({scaleChannel:n,source:e,type:t}){if(!n)throw new Error("Cannot build a domain key without a scale channel.");const i=n+"|"+e.kind+"|"+pd(e),r=t?t+"|"+i:void 0;return{domainKeyBase:i,domainKey:r}}function gd(n,e){const{domainKey:t,domainKeyBase:i}=dd({scaleChannel:n.scaleChannel,source:yl(n.channelDef),type:e});if(!t)throw new Error("Cannot finalize a domain key without a resolved type.");return n.domainKeyBase=i,n.domainKey=t,t}function pd(n){switch(n.kind){case"field":case"expr":return n.value;case"datum":case"value":return md(n.value);default:throw new Error("Unknown domain key source.")}}function md(n){return be(n)?"expr:"+n.expr:n===void 0?"undefined":JSON.stringify(n)}function OI(n,e){const t={},i=r=>n.getScaleResolution(r)?.getScale();for(const[r,s]of Object.entries(e)){if(!s)continue;const o=r;if(UI(o))continue;const a=s;t[o]=GI(PI(o,a,n.paramRuntime),i)}return t}function UI(n){return n==="key"||n==="search"}function GI(n,e){if(n.length===1)return wd(n[0],e);const t=n.map(s=>s.predicate),i=n.map(s=>wd(s,e));return Object.assign(s=>{for(let o=0;o<i.length;o++)if(t[o](s))return i[o](s)},{constant:!1,accessors:i.map(s=>s.accessors[0]),dataAccessor:i.map(s=>s.dataAccessor).find(s=>s),scale:i.map(s=>s.scale).find(s=>s),channelDef:n.at(-1).channelDef})}function wd(n,e){const{channel:t,scaleChannel:i,channelDef:r}=n,s=n.scaleChannel?e(i):void 0;if(i&&!s)throw new Error(`Missing scale! "${t}": ${JSON.stringify(r)}`);return Object.assign(s?o=>s(n(o)):o=>n(o),{scale:s,constant:n.constant,accessors:[n],dataAccessor:n.constant?void 0:n,channelDef:r})}function ut(n){return n&&"value"in n}function Zt(n){return n&&"field"in n}function Oi(n){return n&&"datum"in n}function gt(n){return Zt(n)||Oi(n)||Ui(n)||Cd(n)}function yd(n){if(Cl(n)){const e=n.condition;if(!Array.isArray(e)&&gt(e))return e}else if(gt(n))return n}function zI(n,e){const t=n.mark.encoding[e];if(!Array.isArray(t)&&gt(t))return t;throw new Error("Not a channel def with scale!")}function Cd(n){return n&&"chrom"in n}function Ui(n){return n&&"expr"in n}function HI(n){return(Zt(n)||Oi(n))&&"condition"in n}function Cl(n){return ut(n)&&"condition"in n}const $n=["x","y"],_I=["x2","y2"],VI=[...$n,..._I];function xl(n){return $n.includes(n)}function us(n){return VI.includes(n)}const xd={x:"x2",y:"y2"},bd=Object.fromEntries(Object.entries(xd).map(n=>[n[1],n[0]]));function bl(n){return n in bd}function El(n){const e=xd[n];if(e)return e;throw new Error(`${n} has no secondary channel!`)}function yn(n){return bd[n]??n}function Cn(n){return["color","fill","stroke"].includes(yn(n))}function qo(n){return["shape"].includes(n)}function jo(n){return["x","y","x2","y2","color","fill","stroke","opacity","fillOpacity","strokeOpacity","strokeWidth","size","shape","angle","dx","dy","sample"].includes(n)}function YI(n){if(n==="shape")return["circle","square","cross","diamond","triangle-up","triangle-right","triangle-down","triangle-left","tick-up","tick-right","tick-down","tick-left"]}function Ed(n){if(!qo(n))throw new Error("Not a discrete channel: "+n);const e=new Map(YI(n).map((t,i)=>[t,i]));return t=>{const i=e.get(t);if(i!==void 0)return i;throw new Error(`Invalid value for "${n}" channel: ${t}`)}}function Il(n){return{type:"single",datum:n,uniqueId:n?.[dt]}}function Bl(n){return n??=[],{type:"multi",data:new Map(n.map(e=>[e[dt],e]))}}function Id(n){return{type:"interval",intervals:Object.fromEntries(n.map(e=>[e,null]))}}function JI(n,{add:e,remove:t,toggle:i}){const r=n.data;for(const s of e??[])r.set(s[dt],s);for(const s of t??[])r.delete(s[dt]);for(const s of i??[]){const o=s[dt];r.has(o)?r.delete(o):r.set(o,s)}return{type:"multi",data:r}}function KI(n,e){const t=!!(n.empty??!0),i=Mt(n.param),r=n.fields??{};if(vd(e))return`${i}.uniqueId == null ? ${t} : ${i}.uniqueId === datum[${JSON.stringify(dt)}]`;if(vl(e))return`${i}.data.size == 0 ? ${t} : mapHasKey(${i}.data, datum[${JSON.stringify(dt)}])`;if(Bd(e)){const s=Object.keys(e.intervals),o=Object.keys(r).filter(xl);if(o.length===0)throw new Error("Filtering using interval selections requires at least one primary positional channel in the config! "+JSON.stringify(n));if(o.some(c=>!s.includes(c)))throw new Error(`Selection channels (${s.join(", ")}) do not match the fields: ${JSON.stringify(n)}!`);const a=c=>`datum[${JSON.stringify(c)}]`;return s.map(c=>{const u=El(c),f=r[c],h=r[u]??r[c],A=`${i}.intervals.${c}[0] <= ${a(h)}`,d=`${a(f)} <= ${i}.intervals.${c}[1]`;return`(${i}.intervals.${c} ? (${A} && ${d}) : ${t})`}).join(" && ")}else throw new Error(`Unrecognized selection type : ${JSON.stringify(e)}`)}function Bd(n){return n.type==="interval"}function vd(n){return n.type==="single"}function vl(n){return n.type==="multi"}function Wo(n){const e=typeof n=="string"?{type:n}:{...n};return e.on=e.on?Dd(e.on):Xo(e)?{type:"click"}:void 0,e.clear=e.clear===!1?void 0:e.clear===!0||e.clear==null?{type:"dblclick"}:Dd(e.clear),Xo(e)&&e.on.type==="click"&&(e.toggle=!0),e}function Xo(n){return n&&n.type=="point"}function Sd(n){return n&&n.type=="interval"}function Qd(n){return Object.values(n.intervals).some(e=>e&&e.length===2)}function qI(n,e){return Object.entries(n.intervals).every(([t,i])=>(t=="x"||t=="y")&&i&&i[0]<=e[t]&&i[1]>=e[t])}function Dd(n){if(typeof n=="string"){const e=n.match(/^([a-zA-Z]+)(?:\[(.+)\])?$/);if(!e)throw new Error(`Invalid event type string: ${n}`);const[,t,i]=e,r={type:t};return i&&(r.filter=i),r}else return n}function be(n){return typeof n=="object"&&n!=null&&"expr"in n&&le(n.expr)}function Ie(n){if(be(n))throw new Error("ExprRef "+JSON.stringify(n)+" not allowed here. Expected a scalar value.");return n}function kd(n){return("expr"in n||"bind"in n)&&!("select"in n)}function Sl(n){return!("expr"in n||"bind"in n)&&"select"in n}function Mt(n){if(!/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(n))throw new Error("Invalid parameter name: "+n+". Must be a valid JavaScript identifier.");return n}function Ql(n,e,t){if("select"in n){const i=Wo(n.select);if(Xo(i))return i.toggle?Bl():Il(null);if(Sd(i)){if(!i.encodings)throw new Error('Interval selection "'+n.name+'" must have encodings defined!');return Id(i.encodings)}throw new Error('Unknown selection config for parameter "'+n.name+'".')}if("expr"in n){const i=e?.createExpression(n.expr);if(!i)throw new Error('Cannot evaluate expression for parameter "'+n.name+'".');return i(null)}return"value"in n?n.value:null}function fs(n,e,t,i,r={}){const s={...e},o=new Set;let a=!1,l=!1;const c=r.batchMode??"microtask";i?.(()=>{l=!0,o.clear(),a=!1});const f=()=>{if(l)return;if(!t||o.size===0){a=!1;return}const A=new Set(o);o.clear(),a=!1,t(A)},h=A=>{l||(o.add(A),a||(a=!0,queueMicrotask(()=>{l||(c=="whenPropagated"&&n.whenPropagated?n.whenPropagated().then(f).catch(()=>{f()}):f())})))};for(const[A,d]of Object.entries(e))if(be(d))if(t){const g=()=>h(A),p=n.watchExpression?n.watchExpression(d.expr,g,{scopeOwned:!i,registerDisposer:i}):n.createExpression(d.expr);if(!n.watchExpression){const m=p.subscribe(g);i?.(m)}Object.defineProperty(s,A,{enumerable:!0,get(){return p()}})}else{const g=n.createExpression(d.expr);Object.defineProperty(s,A,{enumerable:!0,get(){return g()}})}else s[A]=d;return s}function Fd(n){return Object.assign(()=>n,{subscribe:()=>()=>{},invalidate:()=>{},identifier:()=>"constant",fields:[],globals:[],code:JSON.stringify(n)})}function jI(n){const e=Math.floor(Math.random()*16777215).toString(16),t=[];for(const i of n.paramConfigs.values()){if(!kd(i))continue;const r=i.bind;if(!r||!("input"in r))continue;const s=i.name,o=f=>{n.setValue(s,f)},a=n.getValue(s),l=r.name??s,c=r.debounce?Ko(o,r.debounce,!1):o,u=`${e}-param-${s}`;if(r.input=="range")t.push(oe`<label for=${u}>${l}</label>
                    <div>
                        <input
                            id=${u}
                            type="range"
                            min=${r.min??0}
                            max=${r.max??100}
                            step=${r.step??jn(r.min,r.max,100)}
                            .value=${a}
                            @input=${f=>{c(f.target.valueAsNumber),f.target.nextElementSibling.textContent=f.target.valueAsNumber}}
                        /><span>${a}</span>
                    </div>`);else if(r.input=="checkbox")t.push(oe`<label for=${u}>${l}</label>
                    <input
                        id=${u}
                        type="checkbox"
                        ?checked=${a}
                        @input=${f=>c(f.target.checked)}
                    />`);else if(r.input=="radio")t.push(oe`<span class="label">${l}</span>
                    <div class="radio-group">
                        ${r.options.map((f,h)=>oe`<label>
                                    <input
                                        type="radio"
                                        name=${s}
                                        value=${f}
                                        .checked=${a==f}
                                        @input=${A=>c(A.target.value)}
                                    />${r.labels?.[h]??f}</label
                                >`)}
                    </div>`);else if(r.input=="select")t.push(oe`<label for=${u}>${l}</label>
                    <select
                        id=${u}
                        @input=${f=>c(f.target.value)}
                    >
                        ${r.options.map((f,h)=>oe`<option
                                    value=${f}
                                    ?selected=${a==f}
                                >
                                    ${r.labels?.[h]??f}
                                </option>`)}
                    </select> `);else if(r.input=="text"||r.input=="number"||r.input=="color")t.push(oe`<label for=${u}>${l}</label>
                    <div>
                        <input
                            id=${u}
                            type=${r.input}
                            placeholder=${r.placeholder??""}
                            autocomplete=${r.autocomplete??"off"}
                            .value=${a}
                            @focus=${f=>f.target.select()}
                            @input=${f=>{c(r.input=="number"?f.target.valueAsNumber:f.target.value)}}
                        />
                    </div>`);else throw new Error("Unsupported input type: "+r.input);r.description&&t.push(oe`<div class="description">${r.description}</div>`)}return t}class WI{#e;#t;#n;constructor(e,t){this.#e=e,this.#t=t,this.#n=void 0}initialize(e){const t=[];e.visit(r=>{const s=r.paramRuntime;t.push(...jI(s))});const i=this.#t.inputBindingContainer;if(!(!i||i=="none"||!t.length)){if(this.#n=document.createElement("div"),this.#n.className="gs-input-bindings",i=="default")this.#e.appendChild(this.#n);else if(i instanceof HTMLElement)i.appendChild(this.#n);else throw new Error("Invalid inputBindingContainer");t.length&&_r(oe`<div class="gs-input-binding">${t}</div>`,this.#n)}}remove(){this.#n?.remove()}}const Dl=5120,As=5121,kl=5122,Fl=5123,Rl=5124,Ml=5125,Nl=5126,XI=32819,ZI=32820,$I=33635,eB=5131,tB=33640,nB=35899,iB=35902,rB=36269,sB=34042,Rd={};{const n=Rd;n[Dl]=Int8Array,n[As]=Uint8Array,n[kl]=Int16Array,n[Fl]=Uint16Array,n[Rl]=Int32Array,n[Ml]=Uint32Array,n[Nl]=Float32Array,n[XI]=Uint16Array,n[ZI]=Uint16Array,n[$I]=Uint16Array,n[eB]=Uint16Array,n[tB]=Uint32Array,n[nB]=Uint32Array,n[iB]=Uint32Array,n[rB]=Uint32Array,n[sB]=Uint32Array}function Tl(n){if(n instanceof Int8Array)return Dl;if(n instanceof Uint8Array||n instanceof Uint8ClampedArray)return As;if(n instanceof Int16Array)return kl;if(n instanceof Uint16Array)return Fl;if(n instanceof Int32Array)return Rl;if(n instanceof Uint32Array)return Ml;if(n instanceof Float32Array)return Nl;throw new Error("unsupported typed array type")}function oB(n){if(n===Int8Array)return Dl;if(n===Uint8Array||n===Uint8ClampedArray)return As;if(n===Int16Array)return kl;if(n===Uint16Array)return Fl;if(n===Int32Array)return Rl;if(n===Uint32Array)return Ml;if(n===Float32Array)return Nl;throw new Error("unsupported typed array type")}function aB(n){const e=Rd[n];if(!e)throw new Error("unknown gl type");return e}const Zo=typeof SharedArrayBuffer<"u"?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};function cB(...n){console.error(...n)}function Md(...n){console.warn(...n)}function lB(n,e){return typeof WebGLBuffer<"u"&&e instanceof WebGLBuffer}function Nd(n,e){return typeof WebGLRenderbuffer<"u"&&e instanceof WebGLRenderbuffer}function $o(n,e){return typeof WebGLTexture<"u"&&e instanceof WebGLTexture}function uB(n,e){return typeof WebGLSampler<"u"&&e instanceof WebGLSampler}const Td=35044,Nt=34962,fB=34963,AB=34660,hB=5120,dB=5121,gB=5122,pB=5123,mB=5124,wB=5125,yB=5126,Pd={attribPrefix:""};function Ld(n,e,t,i,r){n.bindBuffer(e,t),n.bufferData(e,i,r||Td)}function Od(n,e,t,i){if(lB(n,e))return e;t=t||Nt;const r=n.createBuffer();return Ld(n,t,r,e,i),r}function Ud(n){return n==="indices"}function CB(n){return n instanceof Int8Array||n instanceof Uint8Array}function xB(n){return n===Int8Array||n===Uint8Array}function bB(n){return n.length?n:n.data}const EB=/coord|texture/i,IB=/color|colour/i;function Gd(n,e){let t;if(EB.test(n)?t=2:IB.test(n)?t=4:t=3,e%t>0)throw new Error(`Can not guess numComponents for attribute '${n}'. Tried ${t} but ${e} values is not evenly divisible by ${t}. You should specify it.`);return t}function BB(n,e){return n.numComponents||n.size||Gd(e,bB(n).length)}function Pl(n,e){if(Zo(n))return n;if(Zo(n.data))return n.data;Array.isArray(n)&&(n={data:n});let t=n.type;return t||(Ud(e)?t=Uint16Array:t=Float32Array),new t(n.data)}function vB(n,e){const t={};return Object.keys(e).forEach(function(i){if(!Ud(i)){const r=e[i],s=r.attrib||r.name||r.attribName||Pd.attribPrefix+i;if(r.value){if(!Array.isArray(r.value)&&!Zo(r.value))throw new Error("array.value is not array or typedarray");t[s]={value:r.value}}else{let o,a,l,c;if(r.buffer&&r.buffer instanceof WebGLBuffer)o=r.buffer,c=r.numComponents||r.size,a=r.type,l=r.normalize;else if(typeof r=="number"||typeof r.data=="number"){const u=r.data||r,f=r.type||Float32Array,h=u*f.BYTES_PER_ELEMENT;a=oB(f),l=r.normalize!==void 0?r.normalize:xB(f),c=r.numComponents||r.size||Gd(i,u),o=n.createBuffer(),n.bindBuffer(Nt,o),n.bufferData(Nt,h,r.drawType||Td)}else{const u=Pl(r,i);o=Od(n,u,void 0,r.drawType),a=Tl(u),l=r.normalize!==void 0?r.normalize:CB(u),c=BB(r,i)}t[s]={buffer:o,numComponents:c,type:a,normalize:l,stride:r.stride||0,offset:r.offset||0,divisor:r.divisor===void 0?void 0:r.divisor,drawType:r.drawType}}}}),n.bindBuffer(Nt,null),t}function SB(n,e,t,i){t=Pl(t),i!==void 0?(n.bindBuffer(Nt,e.buffer),n.bufferSubData(Nt,i,t)):Ld(n,Nt,e.buffer,t,e.drawType)}function QB(n,e){return e===hB||e===dB?1:e===gB||e===pB?2:e===mB||e===wB||e===yB?4:0}const Ll=["position","positions","a_position"];function DB(n,e){let t,i;for(i=0;i<Ll.length&&(t=Ll[i],!(t in e||(t=Pd.attribPrefix+t,t in e)));++i);i===Ll.length&&(t=Object.keys(e)[0]);const r=e[t];if(!r.buffer)return 1;n.bindBuffer(Nt,r.buffer);const s=n.getBufferParameter(Nt,AB);n.bindBuffer(Nt,null);const o=QB(n,r.type),a=s/o,l=r.numComponents||r.size,c=a/l;if(c%1!==0)throw new Error(`numComponents ${l} not correct for length ${length}`);return c}function kB(n,e,t){const i=vB(n,e),r=Object.assign({},t||{});r.attribs=Object.assign({},t?t.attribs:{},i);const s=e.indices;if(s){const o=Pl(s,"indices");r.indices=Od(n,o,fB),r.numElements=o.length,r.elementType=Tl(o)}else r.numElements||(r.numElements=DB(n,r.attribs));return r}function Gi(n){return!!n.texStorage2D}const Ol=(function(){const n={},e={};function t(i){const r=i.constructor.name;if(!n[r]){for(const s in i)if(typeof i[s]=="number"){const o=e[i[s]];e[i[s]]=o?`${o} | ${s}`:s}n[r]=!0}}return function(r,s){return t(r),e[s]||(typeof s=="number"?`0x${s.toString(16)}`:s)}})(),xn={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},zi=Zo,zd=(function(){let n;return function(){return n=n||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),n}})(),Hd=6406,Tt=6407,ge=6408,_d=6409,Vd=6410,hs=6402,Yd=34041,ea=33071,FB=9728,RB=9729,$t=3553,en=34067,bn=32879,En=35866,ta=34069,MB=34070,NB=34071,TB=34072,PB=34073,LB=34074,Ul=10241,Gl=10240,na=10242,ia=10243,Jd=32882,OB=33082,UB=33083,GB=33084,zB=33085,zl=3317,Kd=3314,qd=32878,jd=3316,Wd=3315,Xd=32877,HB=37443,_B=37441,VB=37440,YB=33321,JB=36756,KB=33325,qB=33326,jB=33330,WB=33329,XB=33338,ZB=33337,$B=33340,ev=33339,tv=33323,nv=36757,iv=33327,rv=33328,sv=33336,ov=33335,av=33332,cv=33331,lv=33334,uv=33333,fv=32849,Av=35905,hv=36194,dv=36758,gv=35898,pv=35901,mv=34843,wv=34837,yv=36221,Cv=36239,xv=36215,bv=36233,Ev=36209,Iv=36227,Bv=32856,vv=35907,Sv=36759,Qv=32855,Dv=32854,kv=32857,Fv=34842,Rv=34836,Mv=36220,Nv=36238,Tv=36975,Pv=36214,Lv=36232,Ov=36226,Uv=36208,Gv=33189,zv=33190,Hv=36012,_v=36013,Vv=35056,In=5120,pe=5121,ra=5122,Hi=5123,sa=5124,ei=5125,Je=5126,Zd=32819,$d=32820,e0=33635,Et=5131,ds=36193,Hl=33640,Yv=35899,Jv=35902,Kv=36269,qv=34042,oa=33319,_i=33320,aa=6403,Vi=36244,Yi=36248,ti=36249;let _l;function ca(n){if(!_l){const e={};e[Hd]={textureFormat:Hd,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[pe,Et,ds,Je]},e[_d]={textureFormat:_d,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[pe,Et,ds,Je]},e[Vd]={textureFormat:Vd,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[pe,Et,ds,Je]},e[Tt]={textureFormat:Tt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[pe,Et,ds,Je,e0]},e[ge]={textureFormat:ge,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[pe,Et,ds,Je,Zd,$d]},e[hs]={textureFormat:hs,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[ei,Hi]},e[YB]={textureFormat:aa,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[pe]},e[JB]={textureFormat:aa,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[In]},e[KB]={textureFormat:aa,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[Je,Et]},e[qB]={textureFormat:aa,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[Je]},e[jB]={textureFormat:Vi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[pe]},e[WB]={textureFormat:Vi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[In]},e[av]={textureFormat:Vi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Hi]},e[cv]={textureFormat:Vi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[ra]},e[lv]={textureFormat:Vi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ei]},e[uv]={textureFormat:Vi,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[sa]},e[tv]={textureFormat:oa,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[pe]},e[nv]={textureFormat:oa,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[In]},e[iv]={textureFormat:oa,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[Je,Et]},e[rv]={textureFormat:oa,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[Je]},e[sv]={textureFormat:_i,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[pe]},e[ov]={textureFormat:_i,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[In]},e[XB]={textureFormat:_i,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Hi]},e[ZB]={textureFormat:_i,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ra]},e[$B]={textureFormat:_i,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[ei]},e[ev]={textureFormat:_i,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[sa]},e[fv]={textureFormat:Tt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[pe]},e[Av]={textureFormat:Tt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[pe]},e[hv]={textureFormat:Tt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[pe,e0]},e[dv]={textureFormat:Tt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[In]},e[gv]={textureFormat:Tt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Je,Et,Yv]},e[pv]={textureFormat:Tt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Je,Et,Jv]},e[mv]={textureFormat:Tt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[Je,Et]},e[wv]={textureFormat:Tt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Je]},e[yv]={textureFormat:Yi,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[pe]},e[Cv]={textureFormat:Yi,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[In]},e[xv]={textureFormat:Yi,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Hi]},e[bv]={textureFormat:Yi,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[ra]},e[Ev]={textureFormat:Yi,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[ei]},e[Iv]={textureFormat:Yi,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[sa]},e[Bv]={textureFormat:ge,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[pe]},e[vv]={textureFormat:ge,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[pe]},e[Sv]={textureFormat:ge,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[In]},e[Qv]={textureFormat:ge,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[pe,$d,Hl]},e[Dv]={textureFormat:ge,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[pe,Zd]},e[kv]={textureFormat:ge,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Hl]},e[Fv]={textureFormat:ge,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[Je,Et]},e[Rv]={textureFormat:ge,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[Je]},e[Mv]={textureFormat:ti,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[pe]},e[Nv]={textureFormat:ti,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[In]},e[Tv]={textureFormat:ti,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Hl]},e[Pv]={textureFormat:ti,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Hi]},e[Lv]={textureFormat:ti,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[ra]},e[Ov]={textureFormat:ti,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[sa]},e[Uv]={textureFormat:ti,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[ei]},e[Gv]={textureFormat:hs,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Hi,ei]},e[zv]={textureFormat:hs,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ei]},e[Hv]={textureFormat:hs,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Je]},e[Vv]={textureFormat:Yd,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[qv]},e[_v]={textureFormat:Yd,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Kv]},Object.keys(e).forEach(function(t){const i=e[t];i.bytesPerElementMap={},i.bytesPerElement.forEach(function(r,s){const o=i.type[s];i.bytesPerElementMap[o]=r})}),_l=e}return _l[n]}function jv(n,e){const t=ca(n);if(!t)throw"unknown internal format";const i=t.bytesPerElementMap[e];if(i===void 0)throw"unknown internal format";return i}function Ji(n){const e=ca(n);if(!e)throw"unknown internal format";return{format:e.textureFormat,type:e.type[0]}}function t0(n){return(n&n-1)===0}function Wv(n,e,t,i){if(!Gi(n))return t0(e)&&t0(t);const r=ca(i);if(!r)throw"unknown internal format";return r.colorRenderable&&r.textureFilterable}function Xv(n){const e=ca(n);if(!e)throw"unknown internal format";return e.textureFilterable}function n0(n,e,t){return zi(e)?Tl(e):t||pe}function la(n,e,t,i,r){if(r%1!==0)throw"can't guess dimensions";if(!t&&!i){const s=Math.sqrt(r/(e===en?6:1));s%1===0?(t=s,i=s):(t=r,i=1)}else if(i){if(!t&&(t=r/i,t%1))throw"can't guess dimensions"}else if(i=r/t,i%1)throw"can't guess dimensions";return{width:t,height:i}}function Ki(n,e){e.colorspaceConversion!==void 0&&n.pixelStorei(HB,e.colorspaceConversion),e.premultiplyAlpha!==void 0&&n.pixelStorei(_B,e.premultiplyAlpha),e.flipY!==void 0&&n.pixelStorei(VB,e.flipY)}function i0(n){n.pixelStorei(zl,4),Gi(n)&&(n.pixelStorei(Kd,0),n.pixelStorei(qd,0),n.pixelStorei(jd,0),n.pixelStorei(Wd,0),n.pixelStorei(Xd,0))}function Zv(n,e,t,i){i.minMag&&(t.call(n,e,Ul,i.minMag),t.call(n,e,Gl,i.minMag)),i.min&&t.call(n,e,Ul,i.min),i.mag&&t.call(n,e,Gl,i.mag),i.wrap&&(t.call(n,e,na,i.wrap),t.call(n,e,ia,i.wrap),(e===bn||uB(n,e))&&t.call(n,e,Jd,i.wrap)),i.wrapR&&t.call(n,e,Jd,i.wrapR),i.wrapS&&t.call(n,e,na,i.wrapS),i.wrapT&&t.call(n,e,ia,i.wrapT),i.minLod&&t.call(n,e,OB,i.minLod),i.maxLod&&t.call(n,e,UB,i.maxLod),i.baseLevel&&t.call(n,e,GB,i.baseLevel),i.maxLevel&&t.call(n,e,zB,i.maxLevel)}function r0(n,e,t){const i=t.target||$t;n.bindTexture(i,e),Zv(n,i,n.texParameteri,t)}function $v(n){return n=n||xn.textureColor,zi(n)?n:new Uint8Array([n[0]*255,n[1]*255,n[2]*255,n[3]*255])}function Vl(n,e,t,i,r,s){t=t||xn.textureOptions,s=s||ge;const o=t.target||$t;if(i=i||t.width,r=r||t.height,n.bindTexture(o,e),Wv(n,i,r,s))n.generateMipmap(o);else{const a=Xv(s)?RB:FB;n.texParameteri(o,Ul,a),n.texParameteri(o,Gl,a),n.texParameteri(o,na,ea),n.texParameteri(o,ia,ea)}}function gs(n){return n.auto===!0||n.auto===void 0&&n.level===void 0}function Yl(n,e){return e=e||{},e.cubeFaceOrder||[ta,MB,NB,TB,PB,LB]}function Jl(n,e){const i=Yl(n,e).map(function(r,s){return{face:r,ndx:s}});return i.sort(function(r,s){return r.face-s.face}),i}function s0(n,e,t,i){i=i||xn.textureOptions;const r=i.target||$t,s=i.level||0;let o=t.width,a=t.height;const l=i.internalFormat||i.format||ge,c=Ji(l),u=i.format||c.format,f=i.type||c.type;if(Ki(n,i),n.bindTexture(r,e),r===en){const h=t.width,A=t.height;let d,g;if(h/6===A)d=A,g=[0,0,1,0,2,0,3,0,4,0,5,0];else if(A/6===h)d=h,g=[0,0,0,1,0,2,0,3,0,4,0,5];else if(h/3===A/2)d=h/3,g=[0,0,1,0,2,0,0,1,1,1,2,1];else if(h/2===A/3)d=h/2,g=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(t.src?t.src:t.nodeName);const p=zd();p?(p.canvas.width=d,p.canvas.height=d,o=d,a=d,Jl(n,i).forEach(function(m){const y=g[m.ndx*2+0]*d,C=g[m.ndx*2+1]*d;p.drawImage(t,y,C,d,d,0,0,d,d),n.texImage2D(m.face,s,l,u,f,p.canvas)}),p.canvas.width=1,p.canvas.height=1):typeof createImageBitmap<"u"&&(o=d,a=d,Jl(n,i).forEach(function(m){const y=g[m.ndx*2+0]*d,C=g[m.ndx*2+1]*d;n.texImage2D(m.face,s,l,d,d,0,u,f,null),createImageBitmap(t,y,C,d,d,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(w){Ki(n,i),n.bindTexture(r,e),n.texImage2D(m.face,s,l,u,f,w),gs(i)&&Vl(n,e,i,o,a,l)})}))}else if(r===bn||r===En){const h=Math.min(t.width,t.height),A=Math.max(t.width,t.height),d=A/h;if(d%1!==0)throw"can not compute 3D dimensions of element";const g=t.width===A?1:0,p=t.height===A?1:0;n.pixelStorei(zl,1),n.pixelStorei(Kd,t.width),n.pixelStorei(qd,0),n.pixelStorei(Xd,0),n.texImage3D(r,s,l,h,h,h,0,u,f,null);for(let m=0;m<d;++m){const y=m*h*g,C=m*h*p;n.pixelStorei(jd,y),n.pixelStorei(Wd,C),n.texSubImage3D(r,s,0,0,m,h,h,1,u,f,t)}i0(n)}else n.texImage2D(r,s,l,u,f,t);gs(i)&&Vl(n,e,i,o,a,l),r0(n,e,i)}function ps(){}function e2(n){if(typeof document<"u"){const e=document.createElement("a");return e.href=n,e.hostname===location.hostname&&e.port===location.port&&e.protocol===location.protocol}else{const e=new URL(location.href).origin;return new URL(n,location.href).origin===e}}function t2(n,e){return e===void 0&&!e2(n)?"anonymous":e}function n2(n,e,t){t=t||ps;let i;if(e=e!==void 0?e:xn.crossOrigin,e=t2(n,e),typeof Image<"u"){i=new Image,e!==void 0&&(i.crossOrigin=e);const r=function(){i.removeEventListener("error",s),i.removeEventListener("load",o),i=null},s=function(){const l="couldn't load image: "+n;cB(l),t(l,i),r()},o=function(){t(null,i),r()};return i.addEventListener("error",s),i.addEventListener("load",o),i.src=n,i}else if(typeof ImageBitmap<"u"){let r,s;const o=function(){t(r,s)},a={};e&&(a.mode="cors"),fetch(n,a).then(function(l){if(!l.ok)throw l;return l.blob()}).then(function(l){return createImageBitmap(l,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(l){s=l,setTimeout(o)}).catch(function(l){r=l,setTimeout(o)}),i=null}return i}function o0(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof ImageData<"u"&&n instanceof ImageData||typeof HTMLElement<"u"&&n instanceof HTMLElement}function Kl(n,e,t){return o0(n)?(setTimeout(function(){t(null,n)}),n):n2(n,e,t)}function ql(n,e,t){t=t||xn.textureOptions;const i=t.target||$t;if(n.bindTexture(i,e),t.color===!1)return;const r=$v(t.color);if(i===en)for(let s=0;s<6;++s)n.texImage2D(ta+s,0,ge,1,1,0,ge,pe,r);else i===bn||i===En?n.texImage3D(i,0,ge,1,1,1,0,ge,pe,r):n.texImage2D(i,0,ge,1,1,0,ge,pe,r)}function i2(n,e,t,i){return i=i||ps,t=t||xn.textureOptions,ql(n,e,t),t=Object.assign({},t),Kl(t.src,t.crossOrigin,function(s,o){s?i(s,e,o):(s0(n,e,o,t),i(null,e,o))})}function r2(n,e,t,i){i=i||ps;const r=t.src;if(r.length!==6)throw"there must be 6 urls for a cubemap";const s=t.level||0,o=t.internalFormat||t.format||ge,a=Ji(o),l=t.format||a.format,c=t.type||pe,u=t.target||$t;if(u!==en)throw"target must be TEXTURE_CUBE_MAP";ql(n,e,t),t=Object.assign({},t);let f=6;const h=[],A=Yl(n,t);let d;function g(p){return function(m,y){--f,m?h.push(m):y.width!==y.height?h.push("cubemap face img is not a square: "+y.src):(Ki(n,t),n.bindTexture(u,e),f===5?Yl().forEach(function(C){n.texImage2D(C,s,o,l,c,y)}):n.texImage2D(p,s,o,l,c,y),gs(t)&&n.generateMipmap(u)),f===0&&i(h.length?h:void 0,e,d)}}d=r.map(function(p,m){return Kl(p,t.crossOrigin,g(A[m]))})}function s2(n,e,t,i){i=i||ps;const r=t.src,s=t.internalFormat||t.format||ge,o=Ji(s),a=t.format||o.format,l=t.type||pe,c=t.target||En;if(c!==bn&&c!==En)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";ql(n,e,t),t=Object.assign({},t);let u=r.length;const f=[];let h;const A=t.level||0;let d=t.width,g=t.height;const p=r.length;let m=!0;function y(C){return function(w,E){if(--u,w)f.push(w);else{if(Ki(n,t),n.bindTexture(c,e),m){m=!1,d=t.width||E.width,g=t.height||E.height,n.texImage3D(c,A,s,d,g,p,0,a,l,null);for(let I=0;I<p;++I)n.texSubImage3D(c,A,0,0,I,d,g,1,a,l,E)}else{let I=E,b;(E.width!==d||E.height!==g)&&(b=zd(),I=b.canvas,b.canvas.width=d,b.canvas.height=g,b.drawImage(E,0,0,d,g)),n.texSubImage3D(c,A,0,0,C,d,g,1,a,l,I),b&&I===b.canvas&&(b.canvas.width=0,b.canvas.height=0)}gs(t)&&n.generateMipmap(c)}u===0&&i(f.length?f:void 0,e,h)}}h=r.map(function(C,w){return Kl(C,t.crossOrigin,y(w))})}function a0(n,e,t,i){i=i||xn.textureOptions;const r=i.target||$t;n.bindTexture(r,e);let s=i.width,o=i.height,a=i.depth;const l=i.level||0,c=i.internalFormat||i.format||ge,u=Ji(c),f=i.format||u.format,h=i.type||n0(n,t,u.type);if(zi(t))t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));else{const p=aB(h);t=new p(t)}const A=jv(c,h),d=t.byteLength/A;if(d%1)throw"length wrong size for format: "+Ol(n,f);let g;if(r===bn||r===En)if(!s&&!o&&!a){const p=Math.cbrt(d);if(p%1!==0)throw"can't guess cube size of array of numElements: "+d;s=p,o=p,a=p}else s&&(!o||!a)?(g=la(n,r,o,a,d/s),o=g.width,a=g.height):o&&(!s||!a)?(g=la(n,r,s,a,d/o),s=g.width,a=g.height):(g=la(n,r,s,o,d/a),s=g.width,o=g.height);else g=la(n,r,s,o,d),s=g.width,o=g.height;if(i0(n),n.pixelStorei(zl,i.unpackAlignment||1),Ki(n,i),r===en){const p=A/t.BYTES_PER_ELEMENT,m=d/6*p;Jl(n,i).forEach(y=>{const C=m*y.ndx,w=t.subarray(C,C+m);n.texImage2D(y.face,l,c,s,o,0,f,h,w)})}else r===bn||r===En?n.texImage3D(r,l,c,s,o,a,0,f,h,t):n.texImage2D(r,l,c,s,o,0,f,h,t);return{width:s,height:o,depth:a,type:h}}function o2(n,e,t){const i=t.target||$t;n.bindTexture(i,e);const r=t.level||0,s=t.internalFormat||t.format||ge,o=Ji(s),a=t.format||o.format,l=t.type||o.type;if(Ki(n,t),i===en)for(let c=0;c<6;++c)n.texImage2D(ta+c,r,s,t.width,t.height,0,a,l,null);else i===bn||i===En?n.texImage3D(i,r,s,t.width,t.height,t.depth,0,a,l,null):n.texImage2D(i,r,s,t.width,t.height,0,a,l,null)}function ms(n,e,t){t=t||ps,e=e||xn.textureOptions;const i=n.createTexture(),r=e.target||$t;let s=e.width||1,o=e.height||1;const a=e.internalFormat||ge;n.bindTexture(r,i),r===en&&(n.texParameteri(r,na,ea),n.texParameteri(r,ia,ea));let l=e.src;if(l)if(typeof l=="function"&&(l=l(n,e)),typeof l=="string")i2(n,i,e,t);else if(zi(l)||Array.isArray(l)&&(typeof l[0]=="number"||Array.isArray(l[0])||zi(l[0]))){const c=a0(n,i,l,e);s=c.width,o=c.height}else Array.isArray(l)&&(typeof l[0]=="string"||o0(l[0]))?r===en?r2(n,i,e,t):s2(n,i,e,t):(s0(n,i,l,e),s=l.width,o=l.height);else o2(n,i,e);return gs(e)&&Vl(n,i,e,s,o,a),r0(n,i,e),i}function a2(n,e,t,i,r,s){i=i||t.width,r=r||t.height,s=s||t.depth;const o=t.target||$t;n.bindTexture(o,e);const a=t.level||0,l=t.internalFormat||t.format||ge,c=Ji(l),u=t.format||c.format;let f;const h=t.src;if(h&&(zi(h)||Array.isArray(h)&&typeof h[0]=="number")?f=t.type||n0(n,h,c.type):f=t.type||c.type,o===en)for(let A=0;A<6;++A)n.texImage2D(ta+A,a,l,i,r,0,u,f,null);else o===bn||o===En?n.texImage3D(o,a,l,i,r,s,0,u,f,null):n.texImage2D(o,a,l,i,r,0,u,f,null)}const c2=Md,ua=33984,l2=35048,fa=34962,u2=34963,jl=35345,c0=35718,f2=35721,A2=35971,h2=35382,d2=35396,g2=35398,p2=35392,m2=35395,Aa=5126,l0=35664,u0=35665,f0=35666,Wl=5124,A0=35667,h0=35668,d0=35669,g0=35670,p0=35671,m0=35672,w0=35673,y0=35674,C0=35675,x0=35676,w2=35678,y2=35680,C2=35679,x2=35682,b2=35685,E2=35686,I2=35687,B2=35688,v2=35689,S2=35690,Q2=36289,D2=36292,k2=36293,Xl=5125,b0=36294,E0=36295,I0=36296,F2=36298,R2=36299,M2=36300,N2=36303,T2=36306,P2=36307,L2=36308,O2=36311,ha=3553,da=34067,Zl=32879,ga=35866,K={};function B0(n,e){return K[e].bindPoint}function U2(n,e){return function(t){n.uniform1f(e,t)}}function G2(n,e){return function(t){n.uniform1fv(e,t)}}function z2(n,e){return function(t){n.uniform2fv(e,t)}}function H2(n,e){return function(t){n.uniform3fv(e,t)}}function _2(n,e){return function(t){n.uniform4fv(e,t)}}function v0(n,e){return function(t){n.uniform1i(e,t)}}function S0(n,e){return function(t){n.uniform1iv(e,t)}}function Q0(n,e){return function(t){n.uniform2iv(e,t)}}function D0(n,e){return function(t){n.uniform3iv(e,t)}}function k0(n,e){return function(t){n.uniform4iv(e,t)}}function V2(n,e){return function(t){n.uniform1ui(e,t)}}function Y2(n,e){return function(t){n.uniform1uiv(e,t)}}function J2(n,e){return function(t){n.uniform2uiv(e,t)}}function K2(n,e){return function(t){n.uniform3uiv(e,t)}}function q2(n,e){return function(t){n.uniform4uiv(e,t)}}function j2(n,e){return function(t){n.uniformMatrix2fv(e,!1,t)}}function W2(n,e){return function(t){n.uniformMatrix3fv(e,!1,t)}}function X2(n,e){return function(t){n.uniformMatrix4fv(e,!1,t)}}function Z2(n,e){return function(t){n.uniformMatrix2x3fv(e,!1,t)}}function $2(n,e){return function(t){n.uniformMatrix3x2fv(e,!1,t)}}function eS(n,e){return function(t){n.uniformMatrix2x4fv(e,!1,t)}}function tS(n,e){return function(t){n.uniformMatrix4x2fv(e,!1,t)}}function nS(n,e){return function(t){n.uniformMatrix3x4fv(e,!1,t)}}function iS(n,e){return function(t){n.uniformMatrix4x3fv(e,!1,t)}}function $e(n,e,t,i){const r=B0(n,e);return Gi(n)?function(s){let o,a;$o(n,s)?(o=s,a=null):(o=s.texture,a=s.sampler),n.uniform1i(i,t),n.activeTexture(ua+t),n.bindTexture(r,o),n.bindSampler(t,a)}:function(s){n.uniform1i(i,t),n.activeTexture(ua+t),n.bindTexture(r,s)}}function et(n,e,t,i,r){const s=B0(n,e),o=new Int32Array(r);for(let a=0;a<r;++a)o[a]=t+a;return Gi(n)?function(a){n.uniform1iv(i,o),a.forEach(function(l,c){n.activeTexture(ua+o[c]);let u,f;$o(n,l)?(u=l,f=null):(u=l.texture,f=l.sampler),n.bindSampler(t,f),n.bindTexture(s,u)})}:function(a){n.uniform1iv(i,o),a.forEach(function(l,c){n.activeTexture(ua+o[c]),n.bindTexture(s,l)})}}K[Aa]={Type:Float32Array,size:4,setter:U2,arraySetter:G2},K[l0]={Type:Float32Array,size:8,setter:z2,cols:2},K[u0]={Type:Float32Array,size:12,setter:H2,cols:3},K[f0]={Type:Float32Array,size:16,setter:_2,cols:4},K[Wl]={Type:Int32Array,size:4,setter:v0,arraySetter:S0},K[A0]={Type:Int32Array,size:8,setter:Q0,cols:2},K[h0]={Type:Int32Array,size:12,setter:D0,cols:3},K[d0]={Type:Int32Array,size:16,setter:k0,cols:4},K[Xl]={Type:Uint32Array,size:4,setter:V2,arraySetter:Y2},K[b0]={Type:Uint32Array,size:8,setter:J2,cols:2},K[E0]={Type:Uint32Array,size:12,setter:K2,cols:3},K[I0]={Type:Uint32Array,size:16,setter:q2,cols:4},K[g0]={Type:Uint32Array,size:4,setter:v0,arraySetter:S0},K[p0]={Type:Uint32Array,size:8,setter:Q0,cols:2},K[m0]={Type:Uint32Array,size:12,setter:D0,cols:3},K[w0]={Type:Uint32Array,size:16,setter:k0,cols:4},K[y0]={Type:Float32Array,size:32,setter:j2,rows:2,cols:2},K[C0]={Type:Float32Array,size:48,setter:W2,rows:3,cols:3},K[x0]={Type:Float32Array,size:64,setter:X2,rows:4,cols:4},K[b2]={Type:Float32Array,size:32,setter:Z2,rows:2,cols:3},K[E2]={Type:Float32Array,size:32,setter:eS,rows:2,cols:4},K[I2]={Type:Float32Array,size:48,setter:$2,rows:3,cols:2},K[B2]={Type:Float32Array,size:48,setter:nS,rows:3,cols:4},K[v2]={Type:Float32Array,size:64,setter:tS,rows:4,cols:2},K[S2]={Type:Float32Array,size:64,setter:iS,rows:4,cols:3},K[w2]={Type:null,size:0,setter:$e,arraySetter:et,bindPoint:ha},K[y2]={Type:null,size:0,setter:$e,arraySetter:et,bindPoint:da},K[C2]={Type:null,size:0,setter:$e,arraySetter:et,bindPoint:Zl},K[x2]={Type:null,size:0,setter:$e,arraySetter:et,bindPoint:ha},K[Q2]={Type:null,size:0,setter:$e,arraySetter:et,bindPoint:ga},K[D2]={Type:null,size:0,setter:$e,arraySetter:et,bindPoint:ga},K[k2]={Type:null,size:0,setter:$e,arraySetter:et,bindPoint:da},K[F2]={Type:null,size:0,setter:$e,arraySetter:et,bindPoint:ha},K[R2]={Type:null,size:0,setter:$e,arraySetter:et,bindPoint:Zl},K[M2]={Type:null,size:0,setter:$e,arraySetter:et,bindPoint:da},K[N2]={Type:null,size:0,setter:$e,arraySetter:et,bindPoint:ga},K[T2]={Type:null,size:0,setter:$e,arraySetter:et,bindPoint:ha},K[P2]={Type:null,size:0,setter:$e,arraySetter:et,bindPoint:Zl},K[L2]={Type:null,size:0,setter:$e,arraySetter:et,bindPoint:da},K[O2]={Type:null,size:0,setter:$e,arraySetter:et,bindPoint:ga};function pa(n,e){return function(t){if(t.value)switch(n.disableVertexAttribArray(e),t.value.length){case 4:n.vertexAttrib4fv(e,t.value);break;case 3:n.vertexAttrib3fv(e,t.value);break;case 2:n.vertexAttrib2fv(e,t.value);break;case 1:n.vertexAttrib1fv(e,t.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else n.bindBuffer(fa,t.buffer),n.enableVertexAttribArray(e),n.vertexAttribPointer(e,t.numComponents||t.size,t.type||Aa,t.normalize||!1,t.stride||0,t.offset||0),t.divisor!==void 0&&n.vertexAttribDivisor(e,t.divisor)}}function Bn(n,e){return function(t){if(t.value)if(n.disableVertexAttribArray(e),t.value.length===4)n.vertexAttrib4iv(e,t.value);else throw new Error("The length of an integer constant value must be 4!");else n.bindBuffer(fa,t.buffer),n.enableVertexAttribArray(e),n.vertexAttribIPointer(e,t.numComponents||t.size,t.type||Wl,t.stride||0,t.offset||0),t.divisor!==void 0&&n.vertexAttribDivisor(e,t.divisor)}}function ma(n,e){return function(t){if(t.value)if(n.disableVertexAttribArray(e),t.value.length===4)n.vertexAttrib4uiv(e,t.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else n.bindBuffer(fa,t.buffer),n.enableVertexAttribArray(e),n.vertexAttribIPointer(e,t.numComponents||t.size,t.type||Xl,t.stride||0,t.offset||0),t.divisor!==void 0&&n.vertexAttribDivisor(e,t.divisor)}}function $l(n,e,t){const i=t.size,r=t.count;return function(s){n.bindBuffer(fa,s.buffer);const o=s.size||s.numComponents||i,a=o/r,l=s.type||Aa,u=K[l].size*o,f=s.normalize||!1,h=s.offset||0,A=u/r;for(let d=0;d<r;++d)n.enableVertexAttribArray(e+d),n.vertexAttribPointer(e+d,a,l,f,u,h+A*d),s.divisor!==void 0&&n.vertexAttribDivisor(e+d,s.divisor)}}const Be={};Be[Aa]={size:4,setter:pa},Be[l0]={size:8,setter:pa},Be[u0]={size:12,setter:pa},Be[f0]={size:16,setter:pa},Be[Wl]={size:4,setter:Bn},Be[A0]={size:8,setter:Bn},Be[h0]={size:12,setter:Bn},Be[d0]={size:16,setter:Bn},Be[Xl]={size:4,setter:ma},Be[b0]={size:8,setter:ma},Be[E0]={size:12,setter:ma},Be[I0]={size:16,setter:ma},Be[g0]={size:4,setter:Bn},Be[p0]={size:8,setter:Bn},Be[m0]={size:12,setter:Bn},Be[w0]={size:16,setter:Bn},Be[y0]={size:4,setter:$l,count:2},Be[C0]={size:9,setter:$l,count:3},Be[x0]={size:16,setter:$l,count:4};function F0(n){const e=n.name;return e.startsWith("gl_")||e.startsWith("webgl_")}const rS=/(\.|\[|]|\w+)/g,sS=n=>n>="0"&&n<="9";function R0(n,e,t,i){const r=n.split(rS).filter(a=>a!=="");let s=0,o="";for(;;){const a=r[s++];o+=a;const l=sS(a[0]),c=l?parseInt(a):a;if(l&&(o+=r[s++]),s===r.length){t[c]=e;break}else{const f=r[s++],h=f==="[",A=t[c]||(h?[]:{});t[c]=A,t=A,i[o]=i[o]||(function(d){return function(g){L0(d,g)}})(A),o+=f}}}function oS(n,e){let t=0;function i(a,l,c){const u=l.name.endsWith("[0]"),f=l.type,h=K[f];if(!h)throw new Error(`unknown type: 0x${f.toString(16)}`);let A;if(h.bindPoint){const d=t;t+=l.size,u?A=h.arraySetter(n,f,d,c,l.size):A=h.setter(n,f,d,c,l.size)}else h.arraySetter&&u?A=h.arraySetter(n,c):A=h.setter(n,c);return A.location=c,A}const r={},s={},o=n.getProgramParameter(e,c0);for(let a=0;a<o;++a){const l=n.getActiveUniform(e,a);if(F0(l))continue;let c=l.name;c.endsWith("[0]")&&(c=c.substr(0,c.length-3));const u=n.getUniformLocation(e,l.name);if(u){const f=i(e,l,u);r[c]=f,R0(c,f,s,r)}}return r}function aS(n,e){const t={},i=n.getProgramParameter(e,A2);for(let r=0;r<i;++r){const s=n.getTransformFeedbackVarying(e,r);t[s.name]={index:r,type:s.type,size:s.size}}return t}function cS(n,e){const t=n.getProgramParameter(e,c0),i=[],r=[];for(let a=0;a<t;++a){r.push(a),i.push({});const l=n.getActiveUniform(e,a);i[a].name=l.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(a){const l=a[0],c=a[1];n.getActiveUniforms(e,r,n[l]).forEach(function(u,f){i[f][c]=u})});const s={},o=n.getProgramParameter(e,h2);for(let a=0;a<o;++a){const l=n.getActiveUniformBlockName(e,a),c={index:n.getUniformBlockIndex(e,l),usedByVertexShader:n.getActiveUniformBlockParameter(e,a,d2),usedByFragmentShader:n.getActiveUniformBlockParameter(e,a,g2),size:n.getActiveUniformBlockParameter(e,a,p2),uniformIndices:n.getActiveUniformBlockParameter(e,a,m2)};c.used=c.usedByVertexShader||c.usedByFragmentShader,s[l]=c}return{blockSpecs:s,uniformData:i}}const M0=/\[\d+\]\.$/,lS=(n,e)=>((n+(e-1))/e|0)*e;function uS(n,e,t,i){if(e||t){i=i||1;const s=n.length/4;return function(o){let a=0,l=0;for(let c=0;c<s;++c){for(let u=0;u<i;++u)n[a++]=o[l++];a+=4-i}}}else return function(r){r.length?n.set(r):n[0]=r}}function fS(n,e,t,i){const r=t.blockSpecs,s=t.uniformData,o=r[i];if(!o)return c2("no uniform block object named:",i),{name:i,uniforms:{}};const a=new ArrayBuffer(o.size),l=n.createBuffer(),c=o.index;n.bindBuffer(jl,l),n.uniformBlockBinding(e,o.index,c);let u=i+".";M0.test(u)&&(u=u.replace(M0,"."));const f={},h={},A={};return o.uniformIndices.forEach(function(d){const g=s[d];let p=g.name;p.startsWith(u)&&(p=p.substr(u.length));const m=p.endsWith("[0]");m&&(p=p.substr(0,p.length-3));const y=K[g.type],C=y.Type,w=m?lS(y.size,16)*g.size:y.size*g.size,E=new C(a,g.offset,w/C.BYTES_PER_ELEMENT);f[p]=E;const I=uS(E,m,y.rows,y.cols);h[p]=I,R0(p,I,A,h)}),{name:i,array:a,asFloat:new Float32Array(a),buffer:l,uniforms:f,setters:h}}function N0(n,e,t){return fS(n,e.program,e.uniformBlockSpec,t)}function T0(n,e,t){const r=(e.uniformBlockSpec||e).blockSpecs[t.name];if(r){const s=r.index;return n.bindBufferRange(jl,s,t.buffer,t.offset||0,t.array.byteLength),!0}return!1}function P0(n,e,t){T0(n,e,t)&&n.bufferData(jl,t.array,l2)}function ws(n,e){const t=n.setters;for(const i in e){const r=t[i];if(r){const s=e[i];r(s)}}}function L0(n,e){for(const t in e){const i=n[t];typeof i=="function"?i(e[t]):L0(n[t],e[t])}}function ni(n,...e){const t=n.uniformSetters||n,i=e.length;for(let r=0;r<i;++r){const s=e[r];if(Array.isArray(s)){const o=s.length;for(let a=0;a<o;++a)ni(t,s[a])}else for(const o in s){const a=t[o];a&&a(s[o])}}}function AS(n,e){const t={},i=n.getProgramParameter(e,f2);for(let r=0;r<i;++r){const s=n.getActiveAttrib(e,r);if(F0(s))continue;const o=n.getAttribLocation(e,s.name),a=Be[s.type],l=a.setter(n,o,a);l.location=o,t[s.name]=l}return t}function hS(n,e){for(const t in e){const i=n[t];i&&i(e[t])}}function ii(n,e,t){t.vertexArrayObject?n.bindVertexArray(t.vertexArrayObject):(hS(e.attribSetters||e,t.attribs),t.indices&&n.bindBuffer(u2,t.indices))}function dS(n,e){const t=oS(n,e),i=AS(n,e),r={program:e,uniformSetters:t,attribSetters:i};return Gi(n)&&(r.uniformBlockSpec=cS(n,e),r.transformFeedbackInfo=aS(n,e)),r}const gS=4,O0=5123;function wa(n,e,t,i,r,s){t=t===void 0?gS:t;const o=e.indices,a=e.elementType,l=i===void 0?e.numElements:i;r=r===void 0?0:r,a||o?s!==void 0?n.drawElementsInstanced(t,l,a===void 0?O0:e.elementType,r,s):n.drawElements(t,l,a===void 0?O0:e.elementType,r):s!==void 0?n.drawArraysInstanced(t,r,l,s):n.drawArrays(t,r,l)}const pS=36160,ri=36161,mS=3553,wS=5121,yS=6402,CS=6408,xS=33190,bS=36012,ES=35056,IS=36013,BS=32854,vS=32855,SS=36194,U0=33189,G0=6401,z0=36168,eu=34041,tu=36064,ya=36096,H0=36128,nu=33306,iu=33071,ru=9729,_0=[{format:CS,type:wS,min:ru,wrap:iu},{format:eu}],It={};It[eu]=nu,It[G0]=H0,It[z0]=H0,It[yS]=ya,It[U0]=ya,It[xS]=ya,It[bS]=ya,It[ES]=nu,It[IS]=nu;function QS(n,e){return It[n]||It[e]}const vn={};vn[BS]=!0,vn[vS]=!0,vn[SS]=!0,vn[eu]=!0,vn[U0]=!0,vn[G0]=!0,vn[z0]=!0;function DS(n){return vn[n]}const kS=32;function FS(n){return n>=tu&&n<tu+kS}function V0(n,e,t,i){const r=pS,s=n.createFramebuffer();n.bindFramebuffer(r,s),t=t||n.drawingBufferWidth,i=i||n.drawingBufferHeight,e=e||_0;const o=[],a={framebuffer:s,attachments:[],width:t,height:i};return e.forEach(function(l,c){let u=l.attachment;const f=l.samples,h=l.format;let A=l.attachmentPoint||QS(h,l.internalFormat);if(A||(A=tu+c),FS(A)&&o.push(A),!u)if(f!==void 0||DS(h))u=n.createRenderbuffer(),n.bindRenderbuffer(ri,u),f>1?n.renderbufferStorageMultisample(ri,f,h,t,i):n.renderbufferStorage(ri,h,t,i);else{const d=Object.assign({},l);d.width=t,d.height=i,d.auto===void 0&&(d.auto=!1,d.min=d.min||d.minMag||ru,d.mag=d.mag||d.minMag||ru,d.wrapS=d.wrapS||d.wrap||iu,d.wrapT=d.wrapT||d.wrap||iu),u=ms(n,d)}if(Nd(n,u))n.framebufferRenderbuffer(r,A,ri,u);else if($o(n,u))l.layer!==void 0?n.framebufferTextureLayer(r,A,u,l.level||0,l.layer):n.framebufferTexture2D(r,A,l.target||mS,u,l.level||0);else throw new Error("unknown attachment type");a.attachments.push(u)}),n.drawBuffers&&n.drawBuffers(o),a}function RS(n,e,t,i,r){i=i||n.drawingBufferWidth,r=r||n.drawingBufferHeight,e.width=i,e.height=r,t=t||_0,t.forEach(function(s,o){const a=e.attachments[o],l=s.format,c=s.samples;if(c!==void 0||Nd(n,a))n.bindRenderbuffer(ri,a),c>1?n.renderbufferStorageMultisample(ri,c,l,i,r):n.renderbufferStorage(ri,l,i,r);else if($o(n,a))a2(n,a,s,i,r);else throw new Error("unknown attachment type")})}function MS(n,e,t){const i=n.createVertexArray();return n.bindVertexArray(i),e.length||(e=[e]),e.forEach(function(r){ii(n,r,t)}),n.bindVertexArray(null),{numElements:t.numElements,elementType:t.elementType,vertexArrayObject:i}}const NS=/^(.*?)_/;function TS(n,e){Ol(n,0);const t=n.getExtension(e);if(t){const i={},r=NS.exec(e)[1],s="_"+r;for(const o in t){const a=t[o],l=typeof a=="function",c=l?r:s;let u=o;o.endsWith(c)&&(u=o.substring(0,o.length-c.length)),n[u]!==void 0?!l&&n[u]!==a&&Md(u,n[u],a,o):l?n[u]=(function(f){return function(){return f.apply(t,arguments)}})(a):(n[u]=a,i[u]=a)}i.constructor={name:t.constructor.name},Ol(i,0)}return t}const Y0=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function J0(n){for(let e=0;e<Y0.length;++e)TS(n,Y0[e])}function PS(n,e){const t=["webgl2","webgl","experimental-webgl"];let i=null;for(let r=0;r<t.length;++r)if(i=n.getContext(t[r],e),i){J0(i);break}return i}function LS(n,e){return PS(n,e)}const OS=`flat out lowp vec4 vFillColor;
flat out lowp vec4 vStrokeColor;
flat out float vHalfStrokeWidth;
flat out vec4 vCornerRadii;

#if defined(ROUNDED_CORNERS) || defined(STROKED) || defined(SHADOW)
/** Position for SDF-strokes */
out vec2 vPosInPixels;
#endif

/** Size of the rect in pixels */
flat out vec2 vHalfSizeInPixels;

/**
 * Adjusts the vertex position to ensure that the rectangle is at least \`minSpan\`
 * wide or high. Returns a value that reflects the amount of clamping and can be
 * used to adjust the opacity of the rectangle.
 *
 * pos: vertex position
 * frac: vertex position within the rectangle, [0, 1]
 * size: width or height of the rectangle
 * minSize: minimum width or height of the rectangle
 */
float clampMinSize(inout float pos, float frac, float size, float minSize) {
    if (minSize > 0.0 && size < minSize) {
        pos += (frac - 0.5) * (minSize - size);
        return size / minSize;
    }

    return 1.0;
}

void sort(inout float a, inout float b) {
    if (a > b) {
        float tmp = b;
        b = a;
        a = tmp;
    }
}

/**
 * The vertex position wrt the rectangle specified by (x, x2, y, y2).
 * [0, 0] = [x, y], [1, 1] = [x2, y2]. 
 * The x or y component may contain fractional values if the rectangle 
 * have been tessellated.
 */
vec2 getVertexPos() {
    int index = gl_VertexID % 6;
    return vec2(
        index == 0 || index == 1 || index == 3 ? 0.0 : 1.0,
        index == 0 || index == 1 || index == 2 ? 0.0 : 1.0
    );
    
}

void main(void) {
    vec2 frac = getVertexPos();

    vec2 normalizedMinSize = vec2(uMinWidth, uMinHeight) / uViewportSize;
    vec4 cornerRadii = vec4(
        uCornerRadiusTopRight,
        uCornerRadiusBottomRight,
        uCornerRadiusTopLeft,
        uCornerRadiusBottomLeft
    );

    float x = getScaled_x();
    float x2 = getScaled_x2();
    float y = getScaled_y();
    float y2 = getScaled_y2();

    sort(x, x2);
    sort(y, y2);

    // Clamp x to prevent precision artifacts when the scale is zoomed very close.
	// TODO: clamp y as well
	float clampMargin = 1.0;
    vec2 pos1 = vec2(clamp(x, 0.0 - clampMargin, 1.0 + clampMargin), y);
    vec2 pos2 = vec2(clamp(x2, 0.0 - clampMargin, 1.0 + clampMargin), y2);

    vec2 size = pos2 - pos1;

    if (size.x <= 0.0 || size.y <= 0.0) {
        // Early exit. May increase performance or not...
        gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
        return;
    }

    vec2 pos = pos1 + frac * size;

    size.y *= getSampleFacetHeight(pos);

    // Clamp to minimum size, optionally compensate with opacity
    float opaFactor = uViewOpacity * max(uMinOpacity,
        clampMinSize(pos.x, frac.x, size.x, normalizedMinSize.x) *
        clampMinSize(pos.y, frac.y, size.y, normalizedMinSize.y));

    size = max(size, normalizedMinSize);

    pos = applySampleFacet(pos);

#if defined(ROUNDED_CORNERS) || defined(STROKED) || defined(SHADOW)
    // Add an extra pixel to the stroke width to accommodate edge antialiasing
    float aaPadding = 1.0 / uDevicePixelRatio;

    // TODO: Only expand to the offset direction. Now high offsets result in
    // a large expansion in all directions.
    float shadowPadding = uShadowBlur + max(abs(uShadowOffsetX), abs(uShadowOffsetY));

    float strokeWidth = getScaled_strokeWidth();
    float strokeOpacity = getScaled_strokeOpacity() * opaFactor;

    vec2 centeredFrac = frac - 0.5;
    vec2 expand = centeredFrac * (strokeWidth + aaPadding + shadowPadding * 2.0) / uViewportSize;
    pos += expand;

    vec2 sizeInPixels = size * uViewportSize;
    vPosInPixels = (centeredFrac + expand / size) * sizeInPixels;

    vHalfSizeInPixels = sizeInPixels / 2.0;

    vCornerRadii = min(cornerRadii, min(vHalfSizeInPixels.x, vHalfSizeInPixels.y));
    vHalfStrokeWidth = strokeWidth / 2.0;
    vStrokeColor = vec4(getScaled_stroke() * strokeOpacity, strokeOpacity);
#endif

    gl_Position = unitToNdc(pos);

    float fillOpacity = getScaled_fillOpacity() * opaFactor;
    vFillColor = vec4(getScaled_fill() * fillOpacity, fillOpacity);

    setupPicking();
}
`,US=`#if defined(ROUNDED_CORNERS) || defined(STROKED) || defined(SHADOW)
in vec2 vPosInPixels;
#endif

flat in vec2 vHalfSizeInPixels;

flat in lowp vec4 vFillColor;
flat in lowp vec4 vStrokeColor;
flat in float vHalfStrokeWidth;
flat in vec4 vCornerRadii;

out lowp vec4 fragColor;

// ----------------------------------------------------------------------------
// Shadow source: https://madebyevan.com/shaders/fast-rounded-rectangle-shadows/
// License: CC0 (http://creativecommons.org/publicdomain/zero/1.0/)

#ifdef SHADOW

// A standard gaussian function, used for weighting samples
float gaussian(float x, float sigma) {
  const float pi = 3.141592653589793;
  return exp(-(x * x) / (2.0 * sigma * sigma)) / (sqrt(2.0 * pi) * sigma);
}

// This approximates the error function, needed for the gaussian integral
vec2 erf(vec2 x) {
  vec2 s = sign(x), a = abs(x);
  x = 1.0 + (0.278393 + (0.230389 + 0.078108 * (a * a)) * a) * a;
  x *= x;
  return s - s / (x * x);
}

// Return the blurred mask along the x dimension
float roundedBoxShadowX(float x, float y, float sigma, float corner, vec2 halfSize) {
  float delta = min(halfSize.y - corner - abs(y), 0.0);
  float curved = halfSize.x - corner + sqrt(max(0.0, corner * corner - delta * delta));
  vec2 integral = 0.5 + 0.5 * erf((x + vec2(-curved, curved)) * (sqrt(0.5) / sigma));
  return integral.y - integral.x;
}

// Return the mask for the shadow of a box from lower to upper
float roundedBoxShadow(vec2 lower, vec2 upper, vec2 point, float sigma, float corner) {
  // Center everything to make the math easier
  vec2 center = (lower + upper) * 0.5;
  vec2 halfSize = (upper - lower) * 0.5;
  point -= center;

  // The signal is only non-zero in a limited range, so don't waste samples
  float low = point.y - halfSize.y;
  float high = point.y + halfSize.y;
  float start = clamp(-3.0 * sigma, low, high);
  float end = clamp(3.0 * sigma, low, high);

  // Accumulate samples (we can get away with surprisingly few samples)
  float step = (end - start) / 4.0;
  float y = start + step * 0.5;
  float value = 0.0;
  for (int i = 0; i < 4; i++) {
    value += roundedBoxShadowX(point.x, point.y - y, sigma, corner, halfSize) * gaussian(y, sigma) * step;
    y += step;
  }

  return value;
}

// ----------------------------------------------------------------------------

#endif

// Source: https://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
float sdRoundedBox(vec2 p, vec2 b, vec4 r) {
    r.xy = p.x > 0.0 ? r.xy : r.zw;
    r.x  = p.y > 0.0 ? r.x  : r.y;
    vec2 q = abs(p) - b + r.x;
    return min(max(q.x, q.y), 0.0) + length(max(q, 0.0)) - r.x;
}

// Not a true SDF. Makes the corners of strokes sharp and is faster.
float sdSharpBox(vec2 p, vec2 b) {
    vec2 q = abs(p) - b;
    return max(q.x, q.y);
}

float diagonalPattern(vec2 uv, float spacing) {
    // Using 1.5 to approximate sqrt(2.0) to reduce aliasing artifacts.
    float divisor = spacing * vHalfStrokeWidth * 2.0 * 1.5;
    return abs(mod(uv.x - uv.y, divisor) - 0.5 * divisor) / 1.5;
}

float verticalPattern(float x, float spacing) {
    float divisor = spacing * vHalfStrokeWidth * 2.0;
    return abs(mod(x, divisor)) / 2.0;
}

float circle(vec2 p, float r) {
    return length(p) - r;
}

float masonryCirclePattern(vec2 uv, float spacing, float radius) {
    float halfSpacing = 0.5 * spacing;

    float row = floor(uv.y / spacing);
    float shift = mod(row, 2.0) * halfSpacing;

    vec2 shifted = vec2(uv.x + shift, uv.y + halfSpacing);
    vec2 cell = mod(shifted + 0.5 * spacing, spacing) - halfSpacing;

    return abs(circle(cell, radius));
}

/**
 * Patterns:
 * 0  none
 * 1  diagonal (/)
 * 2  antiDiagonal (\\)
 * 3  cross (X)
 * 4  vertical (|)
 * 5  horizontal (-)
 * 6  grid (+)
 * 7  dots (.)
 * 8  rings (o)
 * 9  ringsLarge (O)
 */
float pattern() {
#ifdef STROKED
    int patternType = uHatchPattern;
    vec2 uv = vPosInPixels;
    float spacing = 4.0;

    switch (patternType) {
        case 1:
            return diagonalPattern(vec2(uv.x, -uv.y), spacing);
        case 2:
            return diagonalPattern(uv, spacing);
        case 3:
            return min(
                diagonalPattern(uv, spacing),
                diagonalPattern(vec2(uv.x, -uv.y), spacing)
            );
        case 4:
            return verticalPattern(uv.x, spacing);
        case 5:
            return verticalPattern(uv.y, spacing);
        case 6:
            return min(
                verticalPattern(uv.x, spacing),
                verticalPattern(uv.y, spacing)
            );
        case 7:
        case 8:
        case 9: {
            float spacing = vHalfStrokeWidth * 14.0;
            float radius = spacing * (
                patternType == 8 ? 0.2 :
                patternType == 9 ? 0.35 :
                0.07
            );
            return masonryCirclePattern(uv, spacing, radius);
        }
        default:
            break;
    }
#endif
    return 1.0 / 0.0; // Infinity
}

void main(void) {

#if defined(ROUNDED_CORNERS) || defined(STROKED) || defined(SHADOW)
#ifdef ROUNDED_CORNERS
    // Distance from rectangle's edge in pixels. Negative inside the rectangle.
    float d = sdRoundedBox(vPosInPixels, vHalfSizeInPixels, vCornerRadii);
#else
    float d = sdSharpBox(vPosInPixels, vHalfSizeInPixels);
#endif

    vec4 backgroundColor = vec4(0.0, 0.0, 0.0, 0.0);

#ifdef SHADOW
    float maxCornerRadius = max(vCornerRadii.x, max(vCornerRadii.y, max(vCornerRadii.z, vCornerRadii.w)));

    float shadow = 0.0;
    // Only calculate shadow for the region outside the stroke.
    if (d >= vHalfStrokeWidth - 1.0 && uShadowOpacity > 0.0) {
        shadow = roundedBoxShadow(
            -vHalfSizeInPixels - vHalfStrokeWidth,
            vHalfSizeInPixels + vHalfStrokeWidth,
            vPosInPixels - vec2(uShadowOffsetX, -uShadowOffsetY),
            max(uShadowBlur / 2.5, 0.25),
            maxCornerRadius + vHalfStrokeWidth
        ) * uShadowOpacity * uViewOpacity;
    }
    backgroundColor = vec4(uShadowColor * shadow, shadow);
#endif

    if (vHalfStrokeWidth > 0.0 && uHatchPattern > 0) {
        d = max(d, -pattern());
    }

    fragColor = distanceToColor(
        d,
        vFillColor,
        vStrokeColor,
        backgroundColor,
        vHalfStrokeWidth
    );

    if (uPickingEnabled) {
        if (d < vHalfStrokeWidth) {
            fragColor = vPickingColor;
        }
    } else if (fragColor.a == 0.0) {
        discard;
    }
#else
    // The trivial, non-decorated case
    fragColor = vFillColor;
    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
#endif
}
`,GS=`layout(std140) uniform Mark {
    /** Minimum size (width, height) of the displayed rectangle in pixels */
    uniform float uMinWidth;
    uniform float uMinHeight;

    /** Minimum opacity for the size clamping */
    uniform float uMinOpacity;

    uniform float uCornerRadiusTopRight;
    uniform float uCornerRadiusBottomRight;
    uniform float uCornerRadiusTopLeft;
    uniform float uCornerRadiusBottomLeft;

    uniform int uHatchPattern;

    uniform vec3 uShadowColor;
    uniform float uShadowOpacity;
    uniform float uShadowBlur;
    uniform float uShadowOffsetX;
    uniform float uShadowOffsetY;

#pragma markUniforms
};
`,K0=1e4;class zS{#e=!1;constructor(e){this.size=e,this.arrays={},this.pushers=[],this.dataUpdaters=[],this.vertexCount=0}configure(){if(this.#e)throw new Error("Already configured!");this.#t(),this.#n(),this.#e=!0}addConverter(e,t){const i=this.createUpdater(e,t.numComponents||1,t.targetArrayType??Float32Array,t.arrayReference),r=t.f;this.dataUpdaters.push(t.arrayReference?s=>i(r(s)):s=>i(r(s)))}createUpdater(e,t,i=Float32Array,r=void 0){if(!Ye(this.size))throw new Error("The number of vertices must be defined!");let s,o,a=0;const l=new i(this.size*t);if(this.arrays[e]={data:l,numComponents:t},t==1){let c=0;const u=f=>{c=+f};s=()=>{l[a++]=c},o=u}else{let c=r??[0];const u=r?f=>{}:f=>{c=f};switch(t){case 1:break;case 2:s=()=>{l[a++]=c[0],l[a++]=c[1]},o=u;break;case 3:s=()=>{l[a++]=c[0],l[a++]=c[1],l[a++]=c[2]},o=u;break;case 4:s=()=>{l[a++]=c[0],l[a++]=c[1],l[a++]=c[2],l[a++]=c[3]},o=u;break;default:throw new Error("Invalid numComponents: "+t)}}return this.pushers.push(s),o}pushAll(){throw new Error("Call configure() first!")}updateFromDatum(e){throw new Error("Call configure() first!")}#t(){if(this.size>K0){const e=this.pushers.map((i,r)=>`const p${r} = that.pushers[${r}];`).join(`
`),t=this.pushers.map((i,r)=>`  p${r}();`).join(`
`);this.pushAll=new Function("that",`${e}
return function unrolledPushAll() {
${t}
  that.vertexCount++;
};`)(this)}else this.pushAll=()=>{for(let e=0;e<this.pushers.length;e++)this.pushers[e]();this.vertexCount++}}#n(){if(this.size>K0){const e=this.dataUpdaters.map((i,r)=>`const u${r} = that.dataUpdaters[${r}];`).join(`
`),t=this.dataUpdaters.map((i,r)=>`  u${r}(datum);`).join(`
`);this.updateFromDatum=new Function("that","datum",`${e}
return function unrolledUpdateFromDatum(datum) {
${t}
};`)(this)}else this.updateFromDatum=e=>{for(let t=0;t<this.dataUpdaters.length;t++)this.dataUpdaters[t](e)}}pushFromDatum(e){this.updateFromDatum(e),this.pushAll()}}const qi=5,su=127;function ou(n){const e=[];for(let d=0;d<=su;d++)e.push(void 0);const t=new Map;for(const d of n.chars)d.id<=su?e[d.id]=d:t.set(d.id,d);const i=8722;t.has(i)||t.set(i,e[45]);function r(d){return(d<=su?e[d]:t.get(d))||e[63]}function s(d){return r(d.charCodeAt(0))}const o=n.common.base,a=s("x"),l=s("X"),c=s("q"),u=a.height-qi*2,f=l.height-qi*2,h=c.height-a.height+c.yoffset-a.yoffset;function A(d,g=1){let p=0;for(let m=0;m<d.length;m++)p+=r(d.charCodeAt(m)).xadvance;return p/o*g}return{measureWidth:A,getCharByCode:r,getChar:s,xHeight:u,capHeight:f,descent:h,common:n.common}}function ji(n,e=0,t=1){return Math.max(e,Math.min(t,n))}const q0=2**31-1,HS=-2147483648;function _S(n,e,t,i=t){const r=new Array(n);r.fill(q0);let s=HS,o=-1/0,a=!1;const l=new Array(n);l.fill(0);const c=e[0],f=(e[1]-e[0])/n,h=(m,y)=>{const C=(m-c)/f,w=Math.floor(C);return ji(y&&w==C?w-1:w,0,n-1)};function A(m,y,C){if(a)return;if(y>s)s=y;else{a=!0;return}const w=t(m);if(w<o){a=!0;return}o=w;const E=h(w,!1);r[E]>y&&(r[E]=y),l[E]<C&&(l[E]=C)}function d(m,y,C){if(a)return;if(y>s)s=y;else{a=!0,console.debug("Items (vertices) are not ordered properly. Disabling binned index.");return}const w=t(m),E=i(m);if(w<o){a=!0;return}else if(E<w){a=!0;return}o=w;const I=h(w,!1),b=h(E,!0);for(let S=I;S<=b;S++)r[S]>y&&(r[S]=y),l[S]<C&&(l[S]=C)}const g=(m,y,C=[0,0])=>{const w=h(m,!1),E=h(y,!0),I=r[w],b=Math.max(l[E],I);return C[0]=I,C[1]=b,C},p=()=>{if(a)return;for(let y=1;y<l.length;y++)l[y]<l[y-1]&&(l[y]=l[y-1]);let m=!0;for(let y=r.length-1;y>0;y--)m&&r[y]==q0?(r[y]=l[y],m=!1):r[y-1]>r[y]&&(r[y-1]=r[y]);return g};return A.getIndex=p,d.getIndex=p,t==i?A:d}function Pt(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function Sn(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Ca=Symbol("implicit");function au(){var n=new Kt,e=[],t=[],i=Ca;function r(s){let o=n.get(s);if(o===void 0){if(i!==Ca)return i;n.set(s,o=e.push(s)-1)}return t[o%t.length]}return r.domain=function(s){if(!arguments.length)return e.slice();e=[],n=new Kt;for(const o of s)n.has(o)||n.set(o,e.push(o)-1);return r},r.range=function(s){return arguments.length?(t=Array.from(s),r):t.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return au(e,t).unknown(i)},Pt.apply(r,arguments),r}function Wi(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function ys(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function Qn(){}var si=.7,Xi=1/si,Zi="\\s*([+-]?\\d+)\\s*",Cs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Lt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",VS=/^#([0-9a-f]{3,8})$/,YS=new RegExp(`^rgb\\(${Zi},${Zi},${Zi}\\)$`),JS=new RegExp(`^rgb\\(${Lt},${Lt},${Lt}\\)$`),KS=new RegExp(`^rgba\\(${Zi},${Zi},${Zi},${Cs}\\)$`),qS=new RegExp(`^rgba\\(${Lt},${Lt},${Lt},${Cs}\\)$`),jS=new RegExp(`^hsl\\(${Cs},${Lt},${Lt}\\)$`),WS=new RegExp(`^hsla\\(${Cs},${Lt},${Lt},${Cs}\\)$`),j0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wi(Qn,Dn,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:W0,formatHex:W0,formatHex8:XS,formatHsl:ZS,formatRgb:X0,toString:X0});function W0(){return this.rgb().formatHex()}function XS(){return this.rgb().formatHex8()}function ZS(){return ng(this).formatHsl()}function X0(){return this.rgb().formatRgb()}function Dn(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=VS.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?Z0(e):t===3?new Ne(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?xa(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?xa(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=YS.exec(n))?new Ne(e[1],e[2],e[3],1):(e=JS.exec(n))?new Ne(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=KS.exec(n))?xa(e[1],e[2],e[3],e[4]):(e=qS.exec(n))?xa(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=jS.exec(n))?tg(e[1],e[2]/100,e[3]/100,1):(e=WS.exec(n))?tg(e[1],e[2]/100,e[3]/100,e[4]):j0.hasOwnProperty(n)?Z0(j0[n]):n==="transparent"?new Ne(NaN,NaN,NaN,0):null}function Z0(n){return new Ne(n>>16&255,n>>8&255,n&255,1)}function xa(n,e,t,i){return i<=0&&(n=e=t=NaN),new Ne(n,e,t,i)}function cu(n){return n instanceof Qn||(n=Dn(n)),n?(n=n.rgb(),new Ne(n.r,n.g,n.b,n.opacity)):new Ne}function ba(n,e,t,i){return arguments.length===1?cu(n):new Ne(n,e,t,i??1)}function Ne(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}Wi(Ne,ba,ys(Qn,{brighter(n){return n=n==null?Xi:Math.pow(Xi,n),new Ne(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?si:Math.pow(si,n),new Ne(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Ne(oi(this.r),oi(this.g),oi(this.b),Ea(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$0,formatHex:$0,formatHex8:$S,formatRgb:eg,toString:eg}));function $0(){return`#${ai(this.r)}${ai(this.g)}${ai(this.b)}`}function $S(){return`#${ai(this.r)}${ai(this.g)}${ai(this.b)}${ai((isNaN(this.opacity)?1:this.opacity)*255)}`}function eg(){const n=Ea(this.opacity);return`${n===1?"rgb(":"rgba("}${oi(this.r)}, ${oi(this.g)}, ${oi(this.b)}${n===1?")":`, ${n})`}`}function Ea(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function oi(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function ai(n){return n=oi(n),(n<16?"0":"")+n.toString(16)}function tg(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Bt(n,e,t,i)}function ng(n){if(n instanceof Bt)return new Bt(n.h,n.s,n.l,n.opacity);if(n instanceof Qn||(n=Dn(n)),!n)return new Bt;if(n instanceof Bt)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,a=s-r,l=(s+r)/2;return a?(e===s?o=(t-i)/a+(t<i)*6:t===s?o=(i-e)/a+2:o=(e-t)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new Bt(o,a,l,n.opacity)}function lu(n,e,t,i){return arguments.length===1?ng(n):new Bt(n,e,t,i??1)}function Bt(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}Wi(Bt,lu,ys(Qn,{brighter(n){return n=n==null?Xi:Math.pow(Xi,n),new Bt(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?si:Math.pow(si,n),new Bt(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new Ne(uu(n>=240?n-240:n+120,r,i),uu(n,r,i),uu(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new Bt(ig(this.h),Ia(this.s),Ia(this.l),Ea(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Ea(this.opacity);return`${n===1?"hsl(":"hsla("}${ig(this.h)}, ${Ia(this.s)*100}%, ${Ia(this.l)*100}%${n===1?")":`, ${n})`}`}}));function ig(n){return n=(n||0)%360,n<0?n+360:n}function Ia(n){return Math.max(0,Math.min(1,n||0))}function uu(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const rg=Math.PI/180,sg=180/Math.PI,Ba=18,og=.96422,ag=1,cg=.82521,lg=4/29,$i=6/29,ug=3*$i*$i,eQ=$i*$i*$i;function fg(n){if(n instanceof Ot)return new Ot(n.l,n.a,n.b,n.opacity);if(n instanceof tn)return Ag(n);n instanceof Ne||(n=cu(n));var e=gu(n.r),t=gu(n.g),i=gu(n.b),r=Au((.2225045*e+.7168786*t+.0606169*i)/ag),s,o;return e===t&&t===i?s=o=r:(s=Au((.4360747*e+.3850649*t+.1430804*i)/og),o=Au((.0139322*e+.0971045*t+.7141733*i)/cg)),new Ot(116*r-16,500*(s-r),200*(r-o),n.opacity)}function fu(n,e,t,i){return arguments.length===1?fg(n):new Ot(n,e,t,i??1)}function Ot(n,e,t,i){this.l=+n,this.a=+e,this.b=+t,this.opacity=+i}Wi(Ot,fu,ys(Qn,{brighter(n){return new Ot(this.l+Ba*(n??1),this.a,this.b,this.opacity)},darker(n){return new Ot(this.l-Ba*(n??1),this.a,this.b,this.opacity)},rgb(){var n=(this.l+16)/116,e=isNaN(this.a)?n:n+this.a/500,t=isNaN(this.b)?n:n-this.b/200;return e=og*hu(e),n=ag*hu(n),t=cg*hu(t),new Ne(du(3.1338561*e-1.6168667*n-.4906146*t),du(-.9787684*e+1.9161415*n+.033454*t),du(.0719453*e-.2289914*n+1.4052427*t),this.opacity)}}));function Au(n){return n>eQ?Math.pow(n,1/3):n/ug+lg}function hu(n){return n>$i?n*n*n:ug*(n-lg)}function du(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function gu(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function tQ(n){if(n instanceof tn)return new tn(n.h,n.c,n.l,n.opacity);if(n instanceof Ot||(n=fg(n)),n.a===0&&n.b===0)return new tn(NaN,0<n.l&&n.l<100?0:NaN,n.l,n.opacity);var e=Math.atan2(n.b,n.a)*sg;return new tn(e<0?e+360:e,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity)}function pu(n,e,t,i){return arguments.length===1?tQ(n):new tn(n,e,t,i??1)}function tn(n,e,t,i){this.h=+n,this.c=+e,this.l=+t,this.opacity=+i}function Ag(n){if(isNaN(n.h))return new Ot(n.l,0,0,n.opacity);var e=n.h*rg;return new Ot(n.l,Math.cos(e)*n.c,Math.sin(e)*n.c,n.opacity)}Wi(tn,pu,ys(Qn,{brighter(n){return new tn(this.h,this.c,this.l+Ba*(n??1),this.opacity)},darker(n){return new tn(this.h,this.c,this.l-Ba*(n??1),this.opacity)},rgb(){return Ag(this).rgb()}}));var hg=-.14861,mu=1.78277,wu=-.29227,va=-.90649,xs=1.97294,dg=xs*va,gg=xs*mu,pg=mu*wu-va*hg;function nQ(n){if(n instanceof ci)return new ci(n.h,n.s,n.l,n.opacity);n instanceof Ne||(n=cu(n));var e=n.r/255,t=n.g/255,i=n.b/255,r=(pg*i+dg*e-gg*t)/(pg+dg-gg),s=i-r,o=(xs*(t-r)-wu*s)/va,a=Math.sqrt(o*o+s*s)/(xs*r*(1-r)),l=a?Math.atan2(o,s)*sg-120:NaN;return new ci(l<0?l+360:l,a,r,n.opacity)}function yu(n,e,t,i){return arguments.length===1?nQ(n):new ci(n,e,t,i??1)}function ci(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}Wi(ci,yu,ys(Qn,{brighter(n){return n=n==null?Xi:Math.pow(Xi,n),new ci(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?si:Math.pow(si,n),new ci(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=isNaN(this.h)?0:(this.h+120)*rg,e=+this.l,t=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(n),r=Math.sin(n);return new Ne(255*(e+t*(hg*i+mu*r)),255*(e+t*(wu*i+va*r)),255*(e+t*(xs*i)),this.opacity)}}));function mg(n,e,t,i,r){var s=n*n,o=s*n;return((1-3*n+3*s-o)*e+(4-6*s+3*o)*t+(1+3*n+3*s-3*o)*i+o*r)/6}function wg(n){var e=n.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),r=n[i],s=n[i+1],o=i>0?n[i-1]:2*r-s,a=i<e-1?n[i+2]:2*s-r;return mg((t-i/e)*e,o,r,s,a)}}function yg(n){var e=n.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*e),r=n[(i+e-1)%e],s=n[i%e],o=n[(i+1)%e],a=n[(i+2)%e];return mg((t-i/e)*e,r,s,o,a)}}const Sa=n=>()=>n;function Cg(n,e){return function(t){return n+t*e}}function iQ(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function Qa(n,e){var t=e-n;return t?Cg(n,t>180||t<-180?t-360*Math.round(t/360):t):Sa(isNaN(n)?e:n)}function rQ(n){return(n=+n)==1?Te:function(e,t){return t-e?iQ(e,t,n):Sa(isNaN(e)?t:e)}}function Te(n,e){var t=e-n;return t?Cg(n,t):Sa(isNaN(n)?e:n)}const Cu=(function n(e){var t=rQ(e);function i(r,s){var o=t((r=ba(r)).r,(s=ba(s)).r),a=t(r.g,s.g),l=t(r.b,s.b),c=Te(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=n,i})(1);function xg(n){return function(e){var t=e.length,i=new Array(t),r=new Array(t),s=new Array(t),o,a;for(o=0;o<t;++o)a=ba(e[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=n(i),r=n(r),s=n(s),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=s(l),a+""}}}var sQ=xg(wg),oQ=xg(yg);function xu(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,i=e.slice(),r;return function(s){for(r=0;r<t;++r)i[r]=n[r]*(1-s)+e[r]*s;return i}}function bg(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function aQ(n,e){return(bg(e)?xu:Eg)(n,e)}function Eg(n,e){var t=e?e.length:0,i=n?Math.min(t,n.length):0,r=new Array(i),s=new Array(t),o;for(o=0;o<i;++o)r[o]=kn(n[o],e[o]);for(;o<t;++o)s[o]=e[o];return function(a){for(o=0;o<i;++o)s[o]=r[o](a);return s}}function Ig(n,e){var t=new Date;return n=+n,e=+e,function(i){return t.setTime(n*(1-i)+e*i),t}}function vt(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function Bg(n,e){var t={},i={},r;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in n?t[r]=kn(n[r],e[r]):i[r]=e[r];return function(s){for(r in t)i[r]=t[r](s);return i}}var bu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Eu=new RegExp(bu.source,"g");function cQ(n){return function(){return n}}function lQ(n){return function(e){return n(e)+""}}function vg(n,e){var t=bu.lastIndex=Eu.lastIndex=0,i,r,s,o=-1,a=[],l=[];for(n=n+"",e=e+"";(i=bu.exec(n))&&(r=Eu.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:vt(i,r)})),t=Eu.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?lQ(l[0].x):cQ(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function kn(n,e){var t=typeof e,i;return e==null||t==="boolean"?Sa(e):(t==="number"?vt:t==="string"?(i=Dn(e))?(e=i,Cu):vg:e instanceof Dn?Cu:e instanceof Date?Ig:bg(e)?xu:Array.isArray(e)?Eg:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Bg:vt)(n,e)}function uQ(n){var e=n.length;return function(t){return n[Math.max(0,Math.min(e-1,Math.floor(t*e)))]}}function fQ(n,e){var t=Qa(+n,+e);return function(i){var r=t(i);return r-360*Math.floor(r/360)}}function bs(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}var Sg=180/Math.PI,Iu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qg(n,e,t,i,r,s){var o,a,l;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(l=n*t+e*i)&&(t-=n*l,i-=e*l),(a=Math.sqrt(t*t+i*i))&&(t/=a,i/=a,l/=a),n*i<e*t&&(n=-n,e=-e,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,n)*Sg,skewX:Math.atan(l)*Sg,scaleX:o,scaleY:a}}var Da;function AQ(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?Iu:Qg(e.a,e.b,e.c,e.d,e.e,e.f)}function hQ(n){return n==null||(Da||(Da=document.createElementNS("http://www.w3.org/2000/svg","g")),Da.setAttribute("transform",n),!(n=Da.transform.baseVal.consolidate()))?Iu:(n=n.matrix,Qg(n.a,n.b,n.c,n.d,n.e,n.f))}function Dg(n,e,t,i){function r(c){return c.length?c.pop()+" ":""}function s(c,u,f,h,A,d){if(c!==f||u!==h){var g=A.push("translate(",null,e,null,t);d.push({i:g-4,x:vt(c,f)},{i:g-2,x:vt(u,h)})}else(f||h)&&A.push("translate("+f+e+h+t)}function o(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(r(f)+"rotate(",null,i)-2,x:vt(c,u)})):u&&f.push(r(f)+"rotate("+u+i)}function a(c,u,f,h){c!==u?h.push({i:f.push(r(f)+"skewX(",null,i)-2,x:vt(c,u)}):u&&f.push(r(f)+"skewX("+u+i)}function l(c,u,f,h,A,d){if(c!==f||u!==h){var g=A.push(r(A)+"scale(",null,",",null,")");d.push({i:g-4,x:vt(c,f)},{i:g-2,x:vt(u,h)})}else(f!==1||h!==1)&&A.push(r(A)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=n(c),u=n(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,h),o(c.rotate,u.rotate,f,h),a(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(A){for(var d=-1,g=h.length,p;++d<g;)f[(p=h[d]).i]=p.x(A);return f.join("")}}}var dQ=Dg(AQ,"px, ","px)","deg)"),gQ=Dg(hQ,", ",")",")"),pQ=1e-12;function kg(n){return((n=Math.exp(n))+1/n)/2}function mQ(n){return((n=Math.exp(n))-1/n)/2}function wQ(n){return((n=Math.exp(2*n))-1)/(n+1)}const yQ=(function n(e,t,i){function r(s,o){var a=s[0],l=s[1],c=s[2],u=o[0],f=o[1],h=o[2],A=u-a,d=f-l,g=A*A+d*d,p,m;if(g<pQ)m=Math.log(h/c)/e,p=function(b){return[a+b*A,l+b*d,c*Math.exp(e*b*m)]};else{var y=Math.sqrt(g),C=(h*h-c*c+i*g)/(2*c*t*y),w=(h*h-c*c-i*g)/(2*h*t*y),E=Math.log(Math.sqrt(C*C+1)-C),I=Math.log(Math.sqrt(w*w+1)-w);m=(I-E)/e,p=function(b){var S=b*m,Q=kg(E),v=c/(t*y)*(Q*wQ(e*S+E)-mQ(E));return[a+v*A,l+v*d,c*Q/kg(e*S+E)]}}return p.duration=m*1e3*e/Math.SQRT2,p}return r.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return n(o,a,l)},r})(Math.SQRT2,2,4);function Fg(n){return function(e,t){var i=n((e=lu(e)).h,(t=lu(t)).h),r=Te(e.s,t.s),s=Te(e.l,t.l),o=Te(e.opacity,t.opacity);return function(a){return e.h=i(a),e.s=r(a),e.l=s(a),e.opacity=o(a),e+""}}}const CQ=Fg(Qa);var xQ=Fg(Te);function bQ(n,e){var t=Te((n=fu(n)).l,(e=fu(e)).l),i=Te(n.a,e.a),r=Te(n.b,e.b),s=Te(n.opacity,e.opacity);return function(o){return n.l=t(o),n.a=i(o),n.b=r(o),n.opacity=s(o),n+""}}function Rg(n){return function(e,t){var i=n((e=pu(e)).h,(t=pu(t)).h),r=Te(e.c,t.c),s=Te(e.l,t.l),o=Te(e.opacity,t.opacity);return function(a){return e.h=i(a),e.c=r(a),e.l=s(a),e.opacity=o(a),e+""}}}const EQ=Rg(Qa);var IQ=Rg(Te);function Mg(n){return(function e(t){t=+t;function i(r,s){var o=n((r=yu(r)).h,(s=yu(s)).h),a=Te(r.s,s.s),l=Te(r.l,s.l),c=Te(r.opacity,s.opacity);return function(u){return r.h=o(u),r.s=a(u),r.l=l(Math.pow(u,t)),r.opacity=c(u),r+""}}return i.gamma=e,i})(1)}const BQ=Mg(Qa);var vQ=Mg(Te);function Bu(n,e){e===void 0&&(e=n,n=kn);for(var t=0,i=e.length-1,r=e[0],s=new Array(i<0?0:i);t<i;)s[t]=n(r,r=e[++t]);return function(o){var a=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return s[a](o-a)}}function SQ(n,e){for(var t=new Array(e),i=0;i<e;++i)t[i]=n(i/(e-1));return t}const QQ=Object.freeze(Object.defineProperty({__proto__:null,interpolate:kn,interpolateArray:aQ,interpolateBasis:wg,interpolateBasisClosed:yg,interpolateCubehelix:BQ,interpolateCubehelixLong:vQ,interpolateDate:Ig,interpolateDiscrete:uQ,interpolateHcl:EQ,interpolateHclLong:IQ,interpolateHsl:CQ,interpolateHslLong:xQ,interpolateHue:fQ,interpolateLab:bQ,interpolateNumber:vt,interpolateNumberArray:xu,interpolateObject:Bg,interpolateRgb:Cu,interpolateRgbBasis:sQ,interpolateRgbBasisClosed:oQ,interpolateRound:bs,interpolateString:vg,interpolateTransformCss:dQ,interpolateTransformSvg:gQ,interpolateZoom:yQ,piecewise:Bu,quantize:SQ},Symbol.toStringTag,{value:"Module"}));function DQ(n){return function(){return n}}function vu(n){return+n}var Ng=[0,1];function st(n){return n}function Su(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:DQ(isNaN(e)?NaN:.5)}function kQ(n,e){var t;return n>e&&(t=n,n=e,e=t),function(i){return Math.max(n,Math.min(e,i))}}function FQ(n,e,t){var i=n[0],r=n[1],s=e[0],o=e[1];return r<i?(i=Su(r,i),s=t(o,s)):(i=Su(i,r),s=t(s,o)),function(a){return s(i(a))}}function RQ(n,e,t){var i=Math.min(n.length,e.length)-1,r=new Array(i),s=new Array(i),o=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=Su(n[o],n[o+1]),s[o]=t(e[o],e[o+1]);return function(a){var l=pn(n,a,1,i)-1;return s[l](r[l](a))}}function Es(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function ka(){var n=Ng,e=Ng,t=kn,i,r,s,o=st,a,l,c;function u(){var h=Math.min(n.length,e.length);return o!==st&&(o=kQ(n[0],n[h-1])),a=h>2?RQ:FQ,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=a(n.map(i),e,t)))(i(o(h)))}return f.invert=function(h){return o(r((c||(c=a(e,n.map(i),vt)))(h)))},f.domain=function(h){return arguments.length?(n=Array.from(h,vu),u()):n.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),t=bs,u()},f.clamp=function(h){return arguments.length?(o=h?!0:st,u()):o!==st},f.interpolate=function(h){return arguments.length?(t=h,u()):t},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,A){return i=h,r=A,u()}}function Tg(){return ka()(st,st)}function Pg(n,e,t,i){var r=jn(n,e,t),s;switch(i=Ri(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(n),Math.abs(e));return i.precision==null&&!isNaN(s=Jb(r,o))&&(i.precision=s),Qh(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=Kb(r,Math.max(Math.abs(n),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=Yb(r))&&(i.precision=s-(i.type==="%")*2);break}}return He(i)}function li(n){var e=n.domain;return n.ticks=function(t){var i=e();return Fo(i[0],i[i.length-1],t??10)},n.tickFormat=function(t,i){var r=e();return Pg(r[0],r[r.length-1],t??10,i)},n.nice=function(t){t==null&&(t=10);var i=e(),r=0,s=i.length-1,o=i[r],a=i[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=r,r=s,s=c);u-- >0;){if(c=Xc(o,a,t),c===l)return i[r]=o,i[s]=a,e(i);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return n},n}function Lg(){var n=Tg();return n.copy=function(){return Es(n,Lg())},Pt.apply(n,arguments),li(n)}function Og(n){var e;function t(i){return i==null||isNaN(i=+i)?e:i}return t.invert=t,t.domain=t.range=function(i){return arguments.length?(n=Array.from(i,vu),t):n.slice()},t.unknown=function(i){return arguments.length?(e=i,t):e},t.copy=function(){return Og(n).unknown(e)},n=arguments.length?Array.from(n,vu):[0,1],li(t)}function Ug(n,e){n=n.slice();var t=0,i=n.length-1,r=n[t],s=n[i],o;return s<r&&(o=t,t=i,i=o,o=r,r=s,s=o),n[t]=e.floor(r),n[i]=e.ceil(s),n}function Gg(n){return Math.log(n)}function zg(n){return Math.exp(n)}function MQ(n){return-Math.log(-n)}function NQ(n){return-Math.exp(-n)}function TQ(n){return isFinite(n)?+("1e"+n):n<0?0:n}function PQ(n){return n===10?TQ:n===Math.E?Math.exp:e=>Math.pow(n,e)}function LQ(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function Hg(n){return(e,t)=>-n(-e,t)}function Qu(n){const e=n(Gg,zg),t=e.domain;let i=10,r,s;function o(){return r=LQ(i),s=PQ(i),t()[0]<0?(r=Hg(r),s=Hg(s),n(MQ,NQ)):n(Gg,zg),e}return e.base=function(a){return arguments.length?(i=+a,o()):i},e.domain=function(a){return arguments.length?(t(a),o()):t()},e.ticks=a=>{const l=t();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let h=r(c),A=r(u),d,g;const p=a==null?10:+a;let m=[];if(!(i%1)&&A-h<p){if(h=Math.floor(h),A=Math.ceil(A),c>0){for(;h<=A;++h)for(d=1;d<i;++d)if(g=h<0?d/s(-h):d*s(h),!(g<c)){if(g>u)break;m.push(g)}}else for(;h<=A;++h)for(d=i-1;d>=1;--d)if(g=h>0?d/s(-h):d*s(h),!(g<c)){if(g>u)break;m.push(g)}m.length*2<p&&(m=Fo(c,u,p))}else m=Fo(h,A,Math.min(A-h,p)).map(s);return f?m.reverse():m},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=Ri(l)).precision==null&&(l.trim=!0),l=He(l)),a===1/0)return l;const c=Math.max(1,i*a/e.ticks().length);return u=>{let f=u/s(Math.round(r(u)));return f*i<i-.5&&(f*=i),f<=c?l(u):""}},e.nice=()=>t(Ug(t(),{floor:a=>s(Math.floor(r(a))),ceil:a=>s(Math.ceil(r(a)))})),e}function Du(){const n=Qu(ka()).domain([1,10]);return n.copy=()=>Es(n,Du()).base(n.base()),Pt.apply(n,arguments),n}function _g(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function Vg(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function ku(n){var e=1,t=n(_g(e),Vg(e));return t.constant=function(i){return arguments.length?n(_g(e=+i),Vg(e)):e},li(t)}function Yg(){var n=ku(ka());return n.copy=function(){return Es(n,Yg()).constant(n.constant())},Pt.apply(n,arguments)}function Jg(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function OQ(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function UQ(n){return n<0?-n*n:n*n}function Fu(n){var e=n(st,st),t=1;function i(){return t===1?n(st,st):t===.5?n(OQ,UQ):n(Jg(t),Jg(1/t))}return e.exponent=function(r){return arguments.length?(t=+r,i()):t},li(e)}function Ru(){var n=Fu(ka());return n.copy=function(){return Es(n,Ru()).exponent(n.exponent())},Pt.apply(n,arguments),n}function GQ(){return Ru.apply(null,arguments).exponent(.5)}function Kg(){var n=[],e=[],t=[],i;function r(){var o=0,a=Math.max(1,e.length);for(t=new Array(a-1);++o<a;)t[o-1]=bh(n,o/a);return s}function s(o){return o==null||isNaN(o=+o)?i:e[pn(t,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?t[a-1]:n[0],a<t.length?t[a]:n[n.length-1]]},s.domain=function(o){if(!arguments.length)return n.slice();n=[];for(let a of o)a!=null&&!isNaN(a=+a)&&n.push(a);return n.sort(Kn),r()},s.range=function(o){return arguments.length?(e=Array.from(o),r()):e.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.quantiles=function(){return t.slice()},s.copy=function(){return Kg().domain(n).range(e).unknown(i)},Pt.apply(s,arguments)}function qg(){var n=0,e=1,t=1,i=[.5],r=[0,1],s;function o(l){return l!=null&&l<=l?r[pn(i,l,0,t)]:s}function a(){var l=-1;for(i=new Array(t);++l<t;)i[l]=((l+1)*e-(l-t)*n)/(t+1);return o}return o.domain=function(l){return arguments.length?([n,e]=l,n=+n,e=+e,a()):[n,e]},o.range=function(l){return arguments.length?(t=(r=Array.from(l)).length-1,a()):r.slice()},o.invertExtent=function(l){var c=r.indexOf(l);return c<0?[NaN,NaN]:c<1?[n,i[0]]:c>=t?[i[t-1],e]:[i[c-1],i[c]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return i.slice()},o.copy=function(){return qg().domain([n,e]).range(r).unknown(s)},Pt.apply(li(o),arguments)}function jg(){var n=[.5],e=[0,1],t,i=1;function r(s){return s!=null&&s<=s?e[pn(n,s,0,i)]:t}return r.domain=function(s){return arguments.length?(n=Array.from(s),i=Math.min(n.length,e.length-1),r):n.slice()},r.range=function(s){return arguments.length?(e=Array.from(s),i=Math.min(n.length,e.length-1),r):e.slice()},r.invertExtent=function(s){var o=e.indexOf(s);return[n[o-1],n[o]]},r.unknown=function(s){return arguments.length?(t=s,r):t},r.copy=function(){return jg().domain(n).range(e).unknown(t)},Pt.apply(r,arguments)}function zQ(n){return new Date(n)}function HQ(n){return n instanceof Date?+n:+new Date(+n)}function Mu(n,e,t,i,r,s,o,a,l,c){var u=Tg(),f=u.invert,h=u.domain,A=c(".%L"),d=c(":%S"),g=c("%I:%M"),p=c("%I %p"),m=c("%a %d"),y=c("%b %d"),C=c("%B"),w=c("%Y");function E(I){return(l(I)<I?A:a(I)<I?d:o(I)<I?g:s(I)<I?p:i(I)<I?r(I)<I?m:y:t(I)<I?C:w)(I)}return u.invert=function(I){return new Date(f(I))},u.domain=function(I){return arguments.length?h(Array.from(I,HQ)):h().map(zQ)},u.ticks=function(I){var b=h();return n(b[0],b[b.length-1],I??10)},u.tickFormat=function(I,b){return b==null?E:c(b)},u.nice=function(I){var b=h();return(!I||typeof I.range!="function")&&(I=e(b[0],b[b.length-1],I??10)),I?h(Ug(b,I)):u},u.copy=function(){return Es(u,Mu(n,e,t,i,r,s,o,a,l,c))},u}function _Q(){return Pt.apply(Mu(rE,sE,kt,Xr,jr,mn,Lo,To,Xt,cl).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function VQ(){return Pt.apply(Mu(nE,iE,Ft,Zr,Wr,Wn,Oo,Po,Xt,ll).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Fa(){var n=0,e=1,t,i,r,s,o=st,a=!1,l;function c(f){return f==null||isNaN(f=+f)?l:o(r===0?.5:(f=(s(f)-t)*r,a?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([n,e]=f,t=s(n=+n),i=s(e=+e),r=t===i?0:1/(i-t),c):[n,e]},c.clamp=function(f){return arguments.length?(a=!!f,c):a},c.interpolator=function(f){return arguments.length?(o=f,c):o};function u(f){return function(h){var A,d;return arguments.length?([A,d]=h,o=f(A,d),c):[o(0),o(1)]}}return c.range=u(kn),c.rangeRound=u(bs),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return s=f,t=f(n),i=f(e),r=t===i?0:1/(i-t),c}}function Fn(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function Nu(){var n=li(Fa()(st));return n.copy=function(){return Fn(n,Nu())},Sn.apply(n,arguments)}function Wg(){var n=Qu(Fa()).domain([1,10]);return n.copy=function(){return Fn(n,Wg()).base(n.base())},Sn.apply(n,arguments)}function Xg(){var n=ku(Fa());return n.copy=function(){return Fn(n,Xg()).constant(n.constant())},Sn.apply(n,arguments)}function Tu(){var n=Fu(Fa());return n.copy=function(){return Fn(n,Tu()).exponent(n.exponent())},Sn.apply(n,arguments)}function YQ(){return Tu.apply(null,arguments).exponent(.5)}function Ra(){var n=0,e=.5,t=1,i=1,r,s,o,a,l,c=st,u,f=!1,h;function A(g){return isNaN(g=+g)?h:(g=.5+((g=+u(g))-s)*(i*g<i*s?a:l),c(f?Math.max(0,Math.min(1,g)):g))}A.domain=function(g){return arguments.length?([n,e,t]=g,r=u(n=+n),s=u(e=+e),o=u(t=+t),a=r===s?0:.5/(s-r),l=s===o?0:.5/(o-s),i=s<r?-1:1,A):[n,e,t]},A.clamp=function(g){return arguments.length?(f=!!g,A):f},A.interpolator=function(g){return arguments.length?(c=g,A):c};function d(g){return function(p){var m,y,C;return arguments.length?([m,y,C]=p,c=Bu(g,[m,y,C]),A):[c(0),c(.5),c(1)]}}return A.range=d(kn),A.rangeRound=d(bs),A.unknown=function(g){return arguments.length?(h=g,A):h},function(g){return u=g,r=g(n),s=g(e),o=g(t),a=r===s?0:.5/(s-r),l=s===o?0:.5/(o-s),i=s<r?-1:1,A}}function Zg(){var n=li(Ra()(st));return n.copy=function(){return Fn(n,Zg())},Sn.apply(n,arguments)}function $g(){var n=Qu(Ra()).domain([.1,1,10]);return n.copy=function(){return Fn(n,$g()).base(n.base())},Sn.apply(n,arguments)}function ep(){var n=ku(Ra());return n.copy=function(){return Fn(n,ep()).constant(n.constant())},Sn.apply(n,arguments)}function Pu(){var n=Fu(Ra());return n.copy=function(){return Fn(n,Pu()).exponent(n.exponent())},Sn.apply(n,arguments)}function JQ(){return Pu.apply(null,arguments).exponent(.5)}function Ut(n){for(var e=n.length/6|0,t=new Array(e),i=0;i<e;)t[i]="#"+n.slice(i*6,++i*6);return t}const KQ=Ut("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),qQ=Ut("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),jQ=Ut("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),WQ=Ut("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),XQ=Ut("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),ZQ=Ut("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),$Q=Ut("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),eD=Ut("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),tD=Ut("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),nD=Ut("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function Lu(n,e,t){const i=n-e+t*2;return n?i>0?i:1:0}const iD="identity",er="linear",Rn="log",Is="pow",Bs="sqrt",Ma="symlog",tp="time",np="utc",Gt="sequential",tr="diverging",Ou="quantile",ip="quantize",rp="threshold",vs="ordinal",Uu="point",sp="band",Gu="bin-ordinal",De="continuous",Ss="discrete",Qs="discretizing",pt="interpolating",op="temporal";function rD(n){return function(e){let t=e[0],i=e[1],r;return i<t&&(r=t,t=i,i=r),[n.invert(t),n.invert(i)]}}function sD(n){return function(e){const t=n.range();let i=e[0],r=e[1],s=-1,o,a,l,c;for(r<i&&(a=i,i=r,r=a),l=0,c=t.length;l<c;++l)t[l]>=i&&t[l]<=r&&(s<0&&(s=l),o=l);if(!(s<0))return i=n.invertExtent(t[s]),r=n.invertExtent(t[o]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function zu(){const n=au().unknown(void 0),e=n.domain,t=n.range;let i=[0,1],r,s,o=!1,a=0,l=0,c=.5;delete n.unknown;function u(){const f=e().length,h=i[1]<i[0],A=i[1-h],d=Lu(f,a,l);let g=i[h-0];r=(A-g)/(d||1),o&&(r=Math.floor(r)),g+=(A-g-r*(f-a))*c,s=r*(1-a),o&&(g=Math.round(g),s=Math.round(s));const p=Kr(f).map(m=>g+r*m);return t(h?p.reverse():p)}return n.domain=function(f){return arguments.length?(e(f),u()):e()},n.range=function(f){return arguments.length?(i=[+f[0],+f[1]],u()):i.slice()},n.rangeRound=function(f){return i=[+f[0],+f[1]],o=!0,u()},n.bandwidth=function(){return s},n.step=function(){return r},n.round=function(f){return arguments.length?(o=!!f,u()):o},n.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),a=l,u()):a},n.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),u()):a},n.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),u()):l},n.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),u()):c},n.invertRange=function(f){if(f[0]==null||f[1]==null)return;const h=i[1]<i[0],A=h?t().reverse():t(),d=A.length-1;let g=+f[0],p=+f[1],m,y,C;if(!(g!==g||p!==p)&&(p<g&&(C=g,g=p,p=C),!(p<A[0]||g>i[1-h])))return m=Math.max(0,pn(A,g)-1),y=g===p?m:pn(A,p)-1,g-A[m]>s+1e-10&&++m,h&&(C=m,m=d-y,y=d-C),m>y?void 0:e().slice(m,y+1)},n.invert=function(f){const h=n.invertRange([f,f]);return h&&h[0]},n.copy=function(){return zu().domain(e()).range(i).round(o).paddingInner(a).paddingOuter(l).align(c)},u()}function ap(n){const e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,n.copy=function(){return ap(e())},n}function oD(){return ap(zu().paddingInner(1))}var aD=Array.prototype.map;function cD(n){return aD.call(n,Nr)}const lD=Array.prototype.slice;function cp(){let n=[],e=[];function t(i){return i==null||i!==i?void 0:e[(pn(n,i)-1)%e.length]}return t.domain=function(i){return arguments.length?(n=cD(i),t):n.slice()},t.range=function(i){return arguments.length?(e=lD.call(i),t):e.slice()},t.tickFormat=function(i,r){return Pg(n[0],bt(n),i??10,r)},t.copy=function(){return cp().domain(t.domain()).range(t.range())},t}const Na=new Map,uD=Symbol("vega_scale");function fD(n){return n[uD]=!0,n}function AD(n,e,t){const i=function(){const s=e();return s.invertRange||(s.invertRange=s.invert?rD(s):s.invertExtent?sD(s):void 0),s.type=n,fD(s)};return i.metadata=Io(Oc(t)),i}function ie(n,e,t){return arguments.length>1?(Na.set(n,AD(n,e,t)),this):hD(n)?Na.get(n):void 0}ie(iD,Og),ie(er,Lg,De),ie(Rn,Du,[De,Rn]),ie(Is,Ru,De),ie(Bs,GQ,De),ie(Ma,Yg,De),ie(tp,_Q,[De,op]),ie(np,VQ,[De,op]),ie(Gt,Nu,[De,pt]),ie(`${Gt}-${er}`,Nu,[De,pt]),ie(`${Gt}-${Rn}`,Wg,[De,pt,Rn]),ie(`${Gt}-${Is}`,Tu,[De,pt]),ie(`${Gt}-${Bs}`,YQ,[De,pt]),ie(`${Gt}-${Ma}`,Xg,[De,pt]),ie(`${tr}-${er}`,Zg,[De,pt]),ie(`${tr}-${Rn}`,$g,[De,pt,Rn]),ie(`${tr}-${Is}`,Pu,[De,pt]),ie(`${tr}-${Bs}`,JQ,[De,pt]),ie(`${tr}-${Ma}`,ep,[De,pt]),ie(Ou,Kg,[Qs,Ou]),ie(ip,qg,Qs),ie(rp,jg,Qs),ie(Gu,cp,[Ss,Qs]),ie(vs,au,Ss),ie(sp,zu,Ss),ie(Uu,oD,Ss);function hD(n){return Na.has(n)}function Ds(n,e){const t=Na.get(n);return t&&t.metadata[e]}function Pe(n){return Ds(n,De)}function nn(n){return Ds(n,Ss)}function ui(n){return Ds(n,Qs)}function lp(n){return Ds(n,Rn)}function Ta(n){return Ds(n,pt)}function dD(n,e){const t=e[0],i=bt(e)-t;return function(r){return n(t+r*i)}}function Pa(n,e,t){return Bu(up(e||"rgb",t),n)}function gD(n,e){const t=new Array(e),i=e+1;for(let r=0;r<e;)t[r]=n(++r/i);return t}function up(n,e){const t=QQ[pD(n)];return e!=null&&t&&t.gamma?t.gamma(e):t}function pD(n){return"interpolate"+n.toLowerCase().split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join("")}const mD={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},wD={accent:qQ,category10:KQ,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:jQ,observable10:WQ,paired:XQ,pastel1:ZQ,pastel2:$Q,set1:eD,set2:tD,set3:nD,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function fp(n){if(xe(n))return n;const e=n.length/6|0,t=new Array(e);for(let i=0;i<e;)t[i]="#"+n.slice(i*6,++i*6);return t}function Ap(n,e){for(const t in n)Hu(t,e(n[t]))}const hp={};Ap(wD,fp),Ap(mD,n=>Pa(fp(n)));function Hu(n,e){return n=n&&n.toLowerCase(),arguments.length>1?(hp[n]=e,this):hp[n]}function _u(){const n=e=>e;return n.invert=e=>e,n.copy=_u,n.invertRange=()=>{},n.type="null",n}class yD{constructor(e,t,i={}){this._container=e,this._sizeSource=t??(()=>({width:void 0,height:void 0})),this._shaderCache=new Map,this.rangeTextures=new WeakMap,this.selectionTextures=new WeakMap;const r=document.createElement("canvas");e.appendChild(r);const s=LS(r,{antialias:!0,depth:!1,premultipliedAlpha:!0,...i});if(!s)throw new Error("Unable to initialize WebGL. Your browser or machine may not support it.");if(!Gi(s))throw new Error("Your web browser does not support WebGL 2.0. Chrome, Firefox, and Safari Tech Preview should work.");J0(s);const o=s.getExtension("WEBGL_provoking_vertex");o&&o.provokingVertexWEBGL(o.FIRST_VERTEX_CONVENTION_WEBGL),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),this.canvas=r,this.gl=s,this._pickingAttachmentOptions=[{format:s.RGBA,type:s.UNSIGNED_BYTE,minMag:s.LINEAR,wrap:s.CLAMP_TO_EDGE}],this._pickingBufferInfo=V0(s,this._pickingAttachmentOptions),s.bindFramebuffer(s.FRAMEBUFFER,null),this.adjustGl()}invalidateSize(){this._logicalCanvasSize=void 0,this.adjustGl()}compileShader(e,t){const i="#version 300 es",r="precision mediump float;";xe(t)&&(t=t.join(`

`));const s=this.gl,o=t.replaceAll(/ {2,}|^\s*\/\/.*$/gm,"");let a=this._shaderCache.get(o);if(!a){const l=[i,r,t].join(`

`);a=s.createShader(e),s.shaderSource(a,l),s.compileShader(a),this._shaderCache.set(o,a)}return a}adjustGl(){const e=this.getLogicalCanvasSize();this.canvas.style.width=`${e.width}px`,this.canvas.style.height=`${e.height}px`;const t=this.getPhysicalCanvasSize(e);this.canvas.width=t.width,this.canvas.height=t.height,RS(this.gl,this._pickingBufferInfo,this._pickingAttachmentOptions)}finalize(){this.canvas.remove()}getPhysicalCanvasSize(e){const t=window.devicePixelRatio??1;return e=e||this.getLogicalCanvasSize(),{width:e.width*t,height:e.height*t}}getLogicalCanvasSize(){if(this._logicalCanvasSize)return this._logicalCanvasSize;const e=this._sizeSource(),t=window.getComputedStyle(this._container,null),i=e.width??this._container.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight),r=e.height??this._container.clientHeight-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom);return this._logicalCanvasSize={width:i,height:r},this._logicalCanvasSize}createRangeTexture(e,t=!1){const i=this.rangeTextures.get(e.getScale());if(!t&&i)return;function r(o,a){return nn(a.type)?a.domain().length:a.type=="threshold"?a.domain().length+1:a.type=="quantize"||a.type=="quantile"?o??4:o}const s=e.channel;if(Cn(s)){const o=e.getScale(),a=o.props,l=o.range();let c;if(a.scheme)if(o.type=="threshold"&&l)c=Vu(l,this.gl,o.domain().length,i);else{let u=le(a.scheme)?void 0:a.scheme.count;u=r(u,o),c=ID(a.scheme,this.gl,u,i,!!a.reverse)}else Ta(o.type)||Pe(o.type)&&l.length>1?c=BD(l,a.interpolate,this.gl,i):c=Vu(l,this.gl,o.domain().length,i);this.rangeTextures.set(o,c)}else{const o=e.getScale();if(o.type==="ordinal"||ui(o.type)){const a=qo(s)?Ed(s):c=>c,l=o.range();this.rangeTextures.set(o,vD(l.map(a),this.gl,o.domain().length,i))}}}createSelectionTexture(e,t=!0){if(!vl(e))throw new Error("Not a multi-point selection, cannot create texture");const i=Array.from(e.data.keys()),r=i.length>0?i.sort((l,c)=>l-c):[0],s=this.selectionTextures.get(e),o=this.gl,a=ks(this.gl,{level:0,minMag:o.NEAREST,format:o.RED_INTEGER,internalFormat:o.R32UI,height:1,width:r.length},new Uint32Array(r),t?s:!1);this.selectionTextures.set(e,a)}}function CD(n,e="",t=0){const i=/ERROR:\s*\d+:(\d+)/gi,r=[...e.matchAll(i)],s=new Map(r.map((o,a)=>{const l=parseInt(o[1]),c=r[a+1],u=c?c.index:e.length,f=e.substring(o.index,u);return[l-1,f]}));return n.split(`
`).map((o,a)=>{const l=s.get(a);return`${a+1+t}: ${o}${l?`

^^^ ${l}`:""}`}).join(`
`)}function xD(n,e,t){const i=n.createProgram();n.attachShader(i,e),n.attachShader(i,t),n.linkProgram(i);function r(){let s,o;if(!n.getProgramParameter(i,n.LINK_STATUS)){s=n.getProgramInfoLog(i);for(const l of[e,t])n.getShaderParameter(l,n.COMPILE_STATUS)||(s=n.getShaderInfoLog(l),o=CD(n.getShaderSource(l),s,0)+`
Error compiling: ${s}`,n.deleteShader(l));n.deleteProgram(i)}if(s)return{message:s,detail:o}}return{program:i,getProgramErrors:r}}function ks(n,e,t,i){return i?a0(n,i,t,e):i=ms(n,{...e,src:t}),i}function bD(n,e,t,i){const{height:r,framebuffer:s}=e,o=new Uint8Array(4);return n.bindFramebuffer(n.FRAMEBUFFER,s),n.readPixels(t,r-i-1,1,1,n.RGBA,n.UNSIGNED_BYTE,o),n.bindFramebuffer(n.FRAMEBUFFER,null),o}function ED(n,e,t="image/png"){const{width:i,height:r}=e,s=new Uint8Array(i*r*4);n.bindFramebuffer(n.FRAMEBUFFER,e.framebuffer),n.readPixels(0,0,i,r,n.RGBA,n.UNSIGNED_BYTE,s),n.bindFramebuffer(n.FRAMEBUFFER,null);const o=document.createElement("canvas");o.width=i,o.height=r;const a=o.getContext("2d"),l=a.createImageData(i,r);for(let c=0;c<r;c++){const u=(r-1-c)*i*4,f=c*i*4;l.data.set(s.subarray(u,u+i*4),f)}return a.putImageData(l,0,0),o.toDataURL(t)}function ID(n,e,t,i,r=!1){const s=le(n)?n:n.name,o=!le(n)&&n.extent||[0,1];if(t===void 0&&!le(n)&&(t=n.count),s){const a=Hu(s);if(At(a)){const l=dp(a,{extent:o,count:t,reverse:r});return ks(e,{minMag:e.LINEAR,format:e.RGB,height:1,wrap:e.CLAMP_TO_EDGE},l,i)}else{if(xe(a))return Vu(r?Array.from(a).reverse():a,e,t,i);throw new Error("Unknown scheme: "+s)}}}function BD(n,e="rgb",t,i){const r=Pa(n,le(e)?e:e.type,le(e)?void 0:e.gamma),s=dp(r);return ks(t,{minMag:t.LINEAR,format:t.RGB,height:1,wrap:t.CLAMP_TO_EDGE},s,i)}function vD(n,e,t,i){const r=Math.max(n.length,t||0),s=new Float32Array(r);for(let o=0;o<r;o++)s[o]=n[o%n.length];return ks(e,{minMag:e.NEAREST,format:e.RED,internalFormat:e.R32F,height:1},s,i)}function Vu(n,e,t,i){const r=gp(n,t);return ks(e,{minMag:e.NEAREST,format:e.RGB,height:1},r,i)}function dp(n,{extent:e=[0,1],reverse:t=!1,count:i=256}={}){const r=e[0],s=Yo(e)-r,o=Kr(i).map(a=>a/(i-1)).map(a=>r+a/s).map(n);return t&&o.reverse(),gp(o)}function gp(n,e){const t=Math.max(n.length,e||0),i=new Uint8Array(t*3);for(let r=0;r<t;r++){const s=n[r%n.length],o=Dn(s);if(!o)throw new Error(`Invalid color "${s}" in the scheme ${JSON.stringify(n)}!`);const a=o.rgb();i[r*3+0]=a.r,i[r*3+1]=a.g,i[r*3+2]=a.b}return i}function Yu(n){const e=Dn(n).rgb();return[e.r,e.g,e.b].map(t=>t/255)}const SD="attr_",QD="uDomain_",DD="range_",kD="accessor_",pp="scale_",FD="getScaled_",Ju="uRangeTexture_",La="uParam_",Fs="checkSelection_",mp=3402823466e29;function RD(n){const e=n.match(/^(?:(\w+)-)?(\w+)$/);if(!e)throw new Error("Not a scale type: "+n);return{family:e[1]||"continuous",transform:e[2]}}function Rs(n,e){return`${kD}${n}_${e}`}function MD(n,e,t){let i;if(qo(n))i=fi(Ed(n)(t));else if(le(t))if(Cn(n))i=OD(t);else throw new Error(`String values are not supported on the "${n}" channel: ${t}`);else if(Tr(t))i=fi(t?1:0);else if(t===null)if(Cn(n))i=fi([0,0,0]);else throw new Error(`null value is not supported on the "${n}" chanel.`);else i=fi(t);const r=Rs(n,e),s=`
${i.type} ${r}() {
    // Constant value
    return ${i};
}`;return{channel:n,accessorGlsl:s,accessorFunctionName:r}}function ND(n,e){let t="float",i=l=>l;Cn(n)&&(t="vec3",i=l=>Yu(l));const r=`u${_D(n)}_${e}`,s=`    // Dynamic value
    uniform ${t} ${r};`,o=Rs(n,e);let a=`
${t} ${o}() {
    // Dynamic value
    return ${r};
}`;return{channel:n,uniformName:r,uniformGlsl:s,accessorGlsl:a,accessorFunctionName:o,adjuster:i}}function wp(n,e,t,i=[n]){const{attributeType:r}=nr(e,n),s=ir(i),o=`in highp ${r} ${s};`,a=Rs(n,t),l=`
${r} ${a}() {
    return ${s};
}`;return{channel:n,attributeName:s,attributeGlsl:o,accessorGlsl:l,accessorFunctionName:a}}function TD(n,e,t){const{attributeType:i}=nr(e,n),r=ir(n),s=`    uniform highp ${i} ${r};`,o=Rs(n,t),a=`
${i} ${o}() {
    return ${r};
}`;return{channel:n,uniformName:r,uniformGlsl:s,accessorGlsl:a,accessorFunctionName:o}}function PD(n,e,t){e??=_u();const i=yn(n),r=QD+i,s=DD+i,{hp:o,attributeType:a}=nr(e,n),l=e.domain?e.domain().length:void 0;let c;const u=[];u.push(""),u.push("/".repeat(70)),u.push(`// Channel: ${n}`),u.push("");const{transform:f}=RD(e.type),h=(b,...S)=>UD.apply(null,[b,"value",...S]);let A;switch(f){case"linear":A=h("scaleLinear","domain",s);break;case"log":A=h("scaleLog","domain",s,e.base());break;case"symlog":A=h("scaleSymlog","domain",s,e.constant());break;case"pow":case"sqrt":A=h("scalePow","domain",s,e.exponent());break;case"index":case"locus":A=h("scaleBandHp","domain",s,e.paddingInner(),e.paddingOuter(),e.align(),t.band??.5);break;case"point":case"band":A=h("scaleBand","domain",s,e.paddingInner(),e.paddingOuter(),e.align(),t.band??.5);break;case"ordinal":case"null":case"identity":A=h("scaleIdentity");break;case"threshold":break;default:throw new Error(`Unsupported scale type: ${e.type}! ${n}: ${JSON.stringify(t)}`)}const d=vp(e,n);let g;if(d&&n==i){const b=e.props.range??[];if(be(b)||b.some(be)){if(d.length<1||d.length>4)throw new Error(`A range with ExprRefs must have 1-4 elements, not ${d.length}! Range: ${JSON.stringify(d)}`);g=`    uniform ${Cp(d.length)} ${s};`}else if(d.length&&d.every(Ye)){const S=bp(d);u.push(`const ${S.type} ${s} = ${S};`)}}const p=xp(n);let m;if(Cn(n)){const b=Ju+i;if(n==i&&u.push(`uniform sampler2D ${b};`),Pe(e.type))m=`getInterpolatedColor(${b}, transformed)`;else if(nn(e.type)||ui(e.type))m=`getDiscreteColor(${b}, int(transformed))`;else throw new Error("Problem with color scale!")}else if(e.type==="ordinal"||ui(e.type)){const b=Ju+i;n==i&&u.push(`uniform sampler2D ${b};`),m=`getDiscreteColor(${b}, int(transformed)).r`}const y=[],C=Pe(e.type)&&l>2,w=ui(e.type)||C;if(y.push("int slot = 0;"),w){const b=r;y.push(C?`while (slot < ${b}.length() - 2 && value >= ${b}[slot + 1]) { slot++; }`:`while (slot < ${b}.length() && value >= ${b}[slot]) { slot++; }`)}const E=Pe(e.type)||ui(e.type)||["band","point"].includes(e.type);if(A){const b=r;E&&(o?y.push(`vec3 domain = ${b};`):y.push(`vec2 domain = vec2(${b}[slot], ${b}[slot + 1]);`)),y.push(`float transformed = ${A};`),C&&y.push(`transformed = (float(slot) + transformed) / (float(${b}.length() - 1));`)}else y.push("float transformed = float(slot);");"clamp"in e&&e.clamp()&&y.push(`transformed = clampToRange(transformed, ${bp(d)});`),y.push(`return ${m??"transformed"};`),u.push(`
${p} ${pp}${n}(${a} value) {
${y.map(b=>`    ${b}
`).join("")}
}`);const I=u.join(`
`);if(E&&n==i){const b=Pe(e.type)||ui(e.type)?l:2;c=o?`    highp vec3 ${r};`:`    mediump float ${r}[${b}];`}return{glsl:I,domainUniformName:r,domainUniform:c,rangeUniformName:s,rangeUniform:g}}function LD(n,e){const t=xp(n),i=[],r=[];for(let s=0;s<e.length;s++){const o=e[s],a=Rs(n,s),{param:l,empty:c}=o.predicate;i.push(l?`${Fs}${l}(${!!c})`:null),r.push(o.scaleChannel?`return ${pp}${n}(${a}());`:`return ${a}();`)}return`${t} ${FD}${n}() {
${VD(i,r)}
}

#define ${n}_DEFINED`}function yp(n){if(!Ye(n))throw new Error(`Not a number: ${n}`);if(n==1/0)return""+mp;if(n==-1/0)return""+-mp;{let e=`${n}`;return/^(-)?\d+$/.test(e)&&(e+=".0"),e}}function fi(n){typeof n=="number"&&(n=[n]);const e=n.length;if(e<1||e>4)throw new Error("Invalid number of components: "+e);const t=Cp(e),i=`${t}(${n.map(yp).join(", ")})`;return Object.assign(i,{type:t,numComponents:e})}function Cp(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error("Invalid number of components: "+n)}}function xp(n){return Cn(n)?"vec3":n=="uniqueId"?"uint":"float"}function OD(n){return fi(Yu(n))}function bp(n){return fi([n[0],Yo(n)])}function UD(n,...e){const t=[];for(const i of e)Ye(i)?t.push(yp(i)):xe(i)?t.push(fi(i)):t.push(i);return`${n}(${t.join(", ")})`}function nr(n,e){const t=n&&nn(n.type),i=n&&Ep(n.type),r=i&&GD(n.domain()),s=r?{attributeType:"uvec2",arrayConstructor:Uint32Array}:i?{attributeType:"uint",arrayConstructor:Uint32Array}:t?{attributeType:"uint",arrayConstructor:Uint16Array}:e=="uniqueId"?{attributeType:"uint",arrayConstructor:Uint32Array}:{attributeType:"float",arrayConstructor:Float32Array};return Object.assign(s,{numComponents:+(s.attributeType.match(/^vec([234])$/)?.[1]??1),discrete:t,hp:i,largeHp:r})}function Ep(n){return n=="index"||n=="locus"}function GD(n){return n[1]>2**32}const Ku=2**12;function Ip(n,e=[]){const t=n%Ku,i=(n-t)/Ku;return e[0]=i,e[1]=t,e}function zD(n){const e=n%Ku;return[n-e,e]}function HD(n){return[...zD(n[0]),n[1]-n[0]]}function Bp(n){const e=new Kt([],JSON.stringify);for(const[t,i]of Object.entries(n)){const r=i.channelDef;if(Zt(r)){const o=[r.field,i.scale?(Pe(i.scale.type)||ui(i.scale.type))??!1:!1];e.set(o,[...e.get(o)??[],t])}}return e}function ir(n){return SD+Me(n).toSorted().join("_")}function _D(n){return n[0].toUpperCase()+n.slice(1)}const vp=(n,e)=>Ta(n.type)||Pe(n.type)&&Cn(e)?[0,1]:n.range?n.range():void 0;function VD(n,e){if(n.length!=e.length)throw new Error("Unequal array lengths");const t=n.length;if(t==0)return"";if(t==1&&n[0]==null)return e[0];const i=[];for(let r=0;r<t;r++){const s=n[r],o=r==0?`if (${s})`:s==null&&r==t-1?"else":`else if (${s})`;i.push(`    ${o} {
        ${e[r]}
    }`)}return i.join(`
`)}function Sp(){let n=0,e,t=0;const i=new Map,r=s=>(s===e||(t=i.get(s),t===void 0&&(t=n++,i.set(s,t)),e=s),t);return r.addAll=s=>{for(const o of s)r(o)},r.invert=s=>{for(const o of i.entries())if(o[1]==s)return o[0]},r.domain=()=>[...i.keys()],r}class Ms{constructor({encoders:e,numVertices:t=void 0,attributes:i=[]}){this.encoders=e,this.variableEncoders=Object.fromEntries(Object.entries(e).filter(([s,o])=>i.includes(s)&&o&&!o.constant));const r=[...Bp(e).entries()].filter(([s,o])=>s[1]&&o.length>1).map(([s,o])=>o);this.allocatedVertices=t,this.variableBuilder=new zS(t);for(const[s,o]of Object.entries(this.variableEncoders)){const a=o.dataAccessor;if(!a)continue;const l=r.find(C=>C.find(w=>w==s));if(l&&s!=l[0])continue;const c=a.asNumberAccessor(),u=o.scale,{largeHp:f,arrayConstructor:h,discrete:A,numComponents:d}=nr(u,s),g=[0,0];let p;if(u&&A)if("props"in u&&u.props.domainIndexer)p=u.props.domainIndexer;else if("domain"in u)p=Sp(),p.addAll(u.domain());else throw new Error("Missing domain indexer for discrete scale.");const m=p?C=>p(a(C)):f?C=>Ip(c(C),g):c,y=ir(l??s);this.variableBuilder.addConverter(y,{f:m,numComponents:d,arrayReference:f?g:void 0,targetArrayType:h})}this.lastOffset=0,this.rangeMap=new Kt([],JSON.stringify)}registerBatch(e){const t=this.lastOffset,i=this.variableBuilder.vertexCount,r=i-t;r&&this.rangeMap.set(e,{offset:t,count:r,xIndex:this.xIndexer?.getIndex()}),this.lastOffset=i}addBatches(e){for(const[t,i]of e)this.addBatch(t,i)}addBatch(e,t,i=0,r=t.length){this.prepareXIndexer(t,i,r);for(let s=i;s<r;s++){const o=t[s];this.variableBuilder.pushFromDatum(o),this.addToXIndex(o)}this.registerBatch(e)}prepareXIndexer(e,t=0,i=t+e.length){const r=()=>{this.addToXIndex=c=>{},this.xIndexer=void 0},s=this.encoders.x?.channelDef;if(!("buildIndex"in s)||!s.buildIndex||!e.length||i-t<0){r();return}const o=c=>c&&Pe(c.scale?.type)&&c,a=o(this.variableEncoders.x),l=o(this.variableEncoders.x2);if(a&&!a.constant&&(!l||!l.constant)){const c=a.dataAccessor.asNumberAccessor(),u=l?l.dataAccessor.asNumberAccessor():c,f=[c(e[t]),u(e[i-1])];if(f[1]>f[0]){this.xIndexer=_S(50,f,c,u);let h=this.variableBuilder.vertexCount;this.addToXIndex=A=>{let d=this.variableBuilder.vertexCount;this.xIndexer(A,h,d),h=d}}else r()}else r()}addToXIndex(e){}toArrays(){return{arrays:this.variableBuilder.arrays,vertexCount:this.variableBuilder.vertexCount,allocatedVertices:this.allocatedVertices,rangeMap:this.rangeMap}}}class YD extends Ms{constructor({encoders:e,attributes:t,numItems:i}){super({encoders:e,attributes:t,numVertices:i*6}),this.variableBuilder.configure();const r=this.variableBuilder.pushAll;this.pushAllSixTimes=i>500?new Function("pushAll",`return function unrolledPushAllSixTimes() {
  pushAll(); pushAll(); pushAll(); pushAll(); pushAll(); pushAll();
};`)(r):function(){r(),r(),r(),r(),r(),r()}}addBatch(e,t,i=0,r=t.length){if(!(r<=i)){this.prepareXIndexer(t,i,r);for(let s=i;s<r;s++){const o=t[s];this.variableBuilder.updateFromDatum(o),this.pushAllSixTimes(),this.addToXIndex(o)}this.registerBatch(e)}}}class JD extends Ms{constructor({encoders:e,attributes:t,tessellationThreshold:i=1/0,visibleRange:r=[-1/0,1/0],numItems:s}){super({encoders:e,attributes:t,numVertices:i==1/0?s*6:void 0}),this.visibleRange=r,this.tessellationThreshold=i||1/0,this.updateSide=this.variableBuilder.createUpdater("side",1),this.updatePos=this.variableBuilder.createUpdater("pos",1),this.variableBuilder.configure()}addBatch(e,t,i=0,r=t.length){this.prepareXIndexer(t,i,r);for(let s=i;s<r;s++){const o=t[s];this.variableBuilder.updateFromDatum(o),this.updateSide(-.5),this.updatePos(0),this.variableBuilder.pushAll();const a=1;for(let l=0;l<=a;l++)this.updatePos(l/a),this.updateSide(-.5),this.variableBuilder.pushAll(),this.updateSide(.5),this.variableBuilder.pushAll();this.variableBuilder.pushAll(),this.addToXIndex(o)}this.registerBatch(e)}}class KD extends Ms{constructor({encoders:e,attributes:t,numItems:i=void 0}){super({encoders:e,attributes:t,numVertices:i}),this.variableBuilder.configure()}}class qD extends Ms{constructor({encoders:e,attributes:t,numItems:i=void 0}){super({encoders:e,attributes:t,numVertices:i}),this.variableBuilder.configure()}toArrays(){const e=this.variableBuilder.arrays;for(let t of Object.values(e))t.divisor=1;return super.toArrays()}}class jD extends Ms{constructor({encoders:e,attributes:t,fontMetrics:i,properties:r,numCharacters:s=void 0}){super({encoders:e,attributes:t,numVertices:s*6}),this.metadata=i,this.metrics=i,this.properties=r;const a=e.text.channelDef;this.numberFormat=!ut(a)&&"format"in a&&a.format?He(a.format):l=>l,this.updateVertexCoord=this.variableBuilder.createUpdater("vertexCoord",2),this.updateTextureCoord=this.variableBuilder.createUpdater("textureCoord",2),this.updateWidth=this.variableBuilder.createUpdater("width",1),this.variableBuilder.configure()}addBatch(e,t,i=0,r=t.length){const s=this.properties.align||"left",o=this.properties.logoLetters??!1,a=this.metadata.common.base,l=this.metadata.common.scaleH;let c=-qi;switch(this.properties.baseline){case"top":c+=this.metrics.capHeight;break;case"middle":c+=this.metrics.capHeight/2;break;case"bottom":c-=this.metrics.descent;break}const u=this.encoders.text,f=[0,0];this.updateVertexCoord(f);const h=[0,0];this.updateTextureCoord(h),this.prepareXIndexer(t,i,r);for(let A=i;A<r;A++){const d=t[A],g=this.numberFormat(u(d)),p=le(g)?g:g===null?"":""+g;if(p.length==0)continue;this.variableBuilder.updateFromDatum(d);const m=o?p.length:this.metrics.measureWidth(p);this.updateWidth(m);let y=s=="right"?-m:s=="center"?-m/2:0;if(!o){const I=this.metrics.getCharByCode(p.charCodeAt(0));y-=(I.width-I.xadvance)/a/2}let C=-.5,w=1,E=1;for(let I=0;I<p.length;I++){const b=this.metrics.getCharByCode(p.charCodeAt(I)),S=o?1:b.xadvance/a;if(b.id==32){y+=S;continue}o?(E=(b.width+qi*2)/b.width,y=-E/2,w=(b.height+qi*2)/b.height,C=-.5-qi/b.height):(w=b.height/a,C=-(b.height+b.yoffset+c)/a,E=b.width/a);const Q=b.x,v=b.y;f[0]=y,f[1]=C+w,h[0]=Q/l,h[1]=v/l,this.variableBuilder.pushAll(),f[0]=y+E,f[1]=C+w,h[0]=(Q+b.width)/l,h[1]=v/l,this.variableBuilder.pushAll(),f[0]=y,f[1]=C,h[0]=Q/l,h[1]=(v+b.height)/l,this.variableBuilder.pushAll(),f[0]=y+E,f[1]=C+w,h[0]=(Q+b.width)/l,h[1]=v/l,this.variableBuilder.pushAll(),f[0]=y,f[1]=C,h[0]=Q/l,h[1]=(v+b.height)/l,this.variableBuilder.pushAll(),f[0]=y+E,f[1]=C,h[0]=(Q+b.width)/l,h[1]=(v+b.height)/l,this.variableBuilder.pushAll(),y+=S}this.addToXIndex(d)}this.registerBatch(e)}}const Qp=`#define PI 3.141593

uniform View {
    /** Offset in "unit" units */
    mediump vec2 uViewOffset;
    mediump vec2 uViewScale;
    /** Size of the logical viewport in pixels, i.e., the view */
    mediump vec2 uViewportSize;
    lowp float uDevicePixelRatio;
    // TODO: Views with opacity less than 1.0 should be rendered into a texture
    // that is rendered with the specified opacity.
    lowp float uViewOpacity;
    bool uPickingEnabled;
};


/**
 * Maps a coordinate on the unit scale to a normalized device coordinate.
 * (0, 0) is at the bottom left corner.
 */
vec4 unitToNdc(vec2 coord) {
    return vec4((coord * uViewScale + uViewOffset) * 2.0 - 1.0, 0.0, 1.0);
}

vec4 unitToNdc(float x, float y) {
    return unitToNdc(vec2(x, y));
}

vec4 pixelsToNdc(vec2 coord) {
    return unitToNdc(coord / uViewportSize);
}

vec4 pixelsToNdc(float x, float y) {
    return pixelsToNdc(vec2(x, y));
}

float linearstep(float edge0, float edge1, float x) {
    return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
}

bool isEmptyBinarySearchTexture(highp usampler2D s) {
    // The minimum texture size is 1x1. Zero is a special value that indicates
    // an empty selection. Unique ids never start at zero.
    return textureSize(s, 0).x == 1 && texelFetch(s, ivec2(0, 0), 0).r == 0u;
}

bool binarySearchTexture(highp usampler2D s, uint value) {
    int texSize = textureSize(s, 0).x;

    if (texSize == 1 && texelFetch(s, ivec2(0, 0), 0).r == 0u) {
        return false;
    }

    int left = 0;
    int right = texSize - 1;

    while (left <= right) {
        int mid = left + (right - left) / 2;

        uint midValue = texelFetch(s, ivec2(mid, 0), 0).r;

        if (midValue == value) {
            return true;
        }

        if (midValue < value) {
            left = mid + 1;
        } else {
            right = mid - 1;
        }
    }

    return false;
}

/**
 * Calculates a gamma for antialiasing opacity based on the color.
 */
float getGammaForColor(vec3 rgb) {
    return mix(
        1.25,
        0.75,
        // RGB should be linearized but this is good enough for now
        smoothstep(0.0, 1.0, dot(rgb, vec3(0.299, 0.587, 0.114))));
}

// Fragment shader stuff ////////////////////////////////////////////////////////

// TODO: include the following only in fragment shaders

/**
 * Specialized linearstep for doing antialiasing
 */
float distanceToRatio(float d) {
	return clamp(d * uDevicePixelRatio + 0.5, 0.0, 1.0);
}

vec4 distanceToColor(float d, vec4 fill, vec4 stroke, vec4 background, float halfStrokeWidth) {
    if (halfStrokeWidth > 0.0) {
        // Distance to stroke's edge. Negative inside the stroke.
        float sd = abs(d) - halfStrokeWidth;
        return mix(
            stroke,
            d <= 0.0 ? fill : background,
            distanceToRatio(sd));
    } else {
        return mix(background, fill, distanceToRatio(-d));
    }
}
`,WD=`uniform highp float uZero;

// Utils ------------

vec3 getDiscreteColor(sampler2D s, int index) {
    return texelFetch(s, ivec2(index % textureSize(s, 0).x, 0), 0).rgb;
}

vec3 getInterpolatedColor(sampler2D s, float unitValue) {
    return texture(s, vec2(unitValue, 0.0)).rgb;
}

float clampToRange(float value, vec2 range) {
    return clamp(value, min(range[0], range[1]), max(range[0], range[1]));
}

// Scales ------------
// Based on d3 scales: https://github.com/d3/d3-scale

float scaleIdentity(float value) {
    return value;
}

float scaleIdentity(uint value) {
    return float(value);
}

float scaleLinear(float value, vec2 domain, vec2 range) {
    float domainSpan = domain[1] - domain[0];
    float rangeSpan = range[1] - range[0];
    return (value - domain[0]) / domainSpan * rangeSpan + range[0];
}

float scaleLog(float value, vec2 domain, vec2 range, float base) {
    // y = m log(x) + b 
    // TODO: Perf optimization: precalculate log domain in js.
    // TODO: Reversed domain, etc
    return scaleLinear(log(value) / log(base), log(domain) / log(base), range);
}

float symlog(float value, float constant) {
    // WARNING: emulating log1p with log(x + 1). Small numbers are likely to
    // have significant precision problems.
    return sign(value) * log(abs(value / constant) + 1.0);
}

float scaleSymlog(float value, vec2 domain, vec2 range, float constant) {
    return scaleLinear(
        symlog(value, constant),
        vec2(symlog(domain[0], constant), symlog(domain[1], constant)),
        range
    );
}

float scalePow(float value, vec2 domain, vec2 range, float exponent) {
    // y = mx^k + b
    // TODO: Perf optimization: precalculate pow domain in js.
    // TODO: Reversed domain, etc
    return scaleLinear(
        pow(abs(value), exponent) * sign(value),
        pow(abs(domain), vec2(exponent)) * sign(domain),
        range
    );
}

// TODO: scaleThreshold
// TODO: scaleQuantile (special case of threshold scale)

// TODO: domainExtent should be uint
float scaleBand(uint value, vec2 domainExtent, vec2 range,
                float paddingInner, float paddingOuter,
                float align, float band) {

    // TODO: reverse
    float start = range[0];
    float stop = range[1];
    float rangeSpan = stop - start;

    float n = domainExtent[1] - domainExtent[0];

    // This fix departs from Vega and d3: https://github.com/vega/vega/issues/3357#issuecomment-1063253596
    paddingInner = int(n) > 1 ? paddingInner : 0.0;

    // Adapted from: https://github.com/d3/d3-scale/blob/master/src/band.js
    float step = rangeSpan / max(1.0, n - paddingInner + paddingOuter * 2.0);
    start += (rangeSpan - step * (n - paddingInner)) * align;
    float bandwidth = step * (1.0 - paddingInner);

    return start + (float(value) - domainExtent[0]) * step + bandwidth * band;
}

const int lowBits = 12;
const float lowDivisor = pow(2.0, float(lowBits));
const uint lowMask = uint(lowDivisor - 1.0);

vec2 splitUint(uint value) {
    uint valueLo = value & lowMask;
    uint valueHi = value - valueLo;
    return vec2(float(valueHi), float(valueLo));
}

/**
 * High precision variant of scaleBand for index/locus scales
 */
float scaleBandHp(uint value, vec3 domainExtent, vec2 range,
                 float paddingInner, float paddingOuter,
                 float align, float band) {

    // TODO: reverse
    float start = range[0];
    float stop = range[1];
    float rangeSpan = stop - start;

    vec2 domainStart = domainExtent.xy;
    float n = domainExtent[2];

    // The following computation is identical for every vertex. Could be done on the JS side.
    float step = rangeSpan / max(1.0, n - paddingInner + paddingOuter * 2.0);
    start += (rangeSpan - step * (n - paddingInner)) * align;
    float bandwidth = step * (1.0 - paddingInner);

    // Split into to values with each having a reduced number of significant digits
    // to mitigate the lack of precision in float32 calculations.
    vec2 splitValue = splitUint(value);

    // Using max to prevent the shader compiler from wrecking the precision.
    // Othwewise the compiler could optimize the sum of the four terms into
    // some equivalent form that does premature rounding.
    float inf = 1.0 / uZero;
    float hi = max(splitValue[0] - domainStart[0], -inf);
    float lo = max(splitValue[1] - domainStart[1], -inf);

    return dot(vec4(start, hi, lo, bandwidth), vec4(1.0, step, step, band));
}

/**
 * High precision variant of scaleBand for index/locus scales for large
 * domains where 32bit uints are not sufficient to represent the domain.
 */
float scaleBandHp(uvec2 value, vec3 domainExtent, vec2 range,
                 float paddingInner, float paddingOuter,
                 float align, float band) {

    // TODO: reverse
    float start = range[0];
    float stop = range[1];
    float rangeSpan = stop - start;

    vec2 domainStart = domainExtent.xy;
    float n = domainExtent[2];

    // The following computation is identical for every vertex. Could be done on the JS side.
    float step = rangeSpan / max(1.0, n - paddingInner + paddingOuter * 2.0);
    start += (rangeSpan - step * (n - paddingInner)) * align;
    float bandwidth = step * (1.0 - paddingInner);

    // Split into to values with each having a reduced number of significant digits
    // to mitigate the lack of precision in float32 calculations.
    vec2 splitValue = vec2(float(value[0]) * lowDivisor, float(value[1]));

    // Using max to prevent the shader compiler from wrecking the precision.
    // Othwewise the compiler could optimize the sum of the four terms into
    // some equivalent form that does premature rounding.
    float inf = 1.0 / uZero;
    float hi = max(splitValue[0] - domainStart[0], -inf);
    float lo = max(splitValue[1] - domainStart[1], -inf);

    return dot(vec4(start, hi, lo, bandwidth), vec4(1.0, step, step, band));
}
`,XD=`
/**
 * Describes where a sample facet should be shown. Interpolating between the
 * current and target positions/heights allows for transitioning between facet
 * configurations.
 */
struct SampleFacetPosition {
    float pos;
    float height;
    float targetPos;
    float targetHeight;
};

/**
 * Trasition fraction [0, 1] between the current and target configurations.
 */
uniform float uTransitionOffset;


// ----------------------------------------------------------------------------

#if !defined(SAMPLE_FACET_UNIFORM) && !defined(SAMPLE_FACET_TEXTURE)

SampleFacetPosition getSampleFacetPos() {
    return SampleFacetPosition(0.0, 1.0, 0.0, 1.0);
}

#elif defined(SAMPLE_FACET_UNIFORM)

/**
 * Location and height of the band on the Y axis on a normalized [0, 1] scale.
 * Elements: curr pos, curr height, target pos, target height
 */
uniform vec4 uSampleFacet;

SampleFacetPosition getSampleFacetPos() {
    return SampleFacetPosition(
        1.0 - uSampleFacet.x - uSampleFacet.y,
        uSampleFacet.y,
        1.0 - uSampleFacet.z - uSampleFacet.w,
        uSampleFacet.w
    );
}

#elif defined(SAMPLE_FACET_TEXTURE)

uniform sampler2D uSampleFacetTexture;

SampleFacetPosition getSampleFacetPos() {
    vec4 texel = texelFetch(uSampleFacetTexture, ivec2(int(attr_facetIndex), 0), 0);
    return SampleFacetPosition(
        1.0 - texel.r - texel.g,
        texel.g,
        1.0 - texel.r - texel.g,
        texel.g);
}

#endif

// ----------------------------------------------------------------------------

bool isFacetedSamples(SampleFacetPosition facetPos) {
    return facetPos != SampleFacetPosition(0.0, 1.0, 0.0, 1.0);
}

bool isFacetedSamples() {
    return isFacetedSamples(getSampleFacetPos());
}

bool isInTransit() {
    return uTransitionOffset > 0.0;
}

float getTransitionFraction(float xPos) {
    return smoothstep(0.0, 0.7 + uTransitionOffset, (xPos - uTransitionOffset) * 2.0);
}

vec2 applySampleFacet(vec2 pos) {
    SampleFacetPosition facetPos = getSampleFacetPos();

    if (!isFacetedSamples(facetPos)) {
        return pos;
    } else if (isInTransit()) {
        vec2 interpolated = mix(
            vec2(facetPos.pos, facetPos.height),
            vec2(facetPos.targetPos, facetPos.targetHeight),
            getTransitionFraction(pos.x));
        return vec2(pos.x, interpolated[0] + pos.y * interpolated[1]);
    } else {
        return vec2(pos.x, facetPos.pos + pos.y * facetPos.height);
    }
}

float getSampleFacetHeight(vec2 pos) {
    SampleFacetPosition facetPos = getSampleFacetPos();

    if (!isFacetedSamples(facetPos)) {
        return 1.0;
    } else if (isInTransit()) {
        return mix(
            facetPos.height,
            facetPos.targetHeight,
            getTransitionFraction(pos.x));
    } else {
        return facetPos.height;
    }
}
`,ZD=`/*
 * Based on concepts presented at:
 * https://webglfundamentals.org/webgl/lessons/webgl-picking.html
 * https://deck.gl/docs/developer-guide/custom-layers/picking
 */

out highp vec4 vPickingColor;

/**
 * Passes the unique id to the fragment shader as a color if picking is enabled.
 * Returns true if picking is enabled.
 */
bool setupPicking() {
    if (uPickingEnabled) {
#ifdef uniqueId_DEFINED
        uint id = attr_uniqueId;
        vPickingColor = vec4(
            ivec4(id >> 0, id >> 8, id >> 16, id >> 24) & 0xFF
        ) / float(0xFF);
#else
        vPickingColor = vec4(1.0);
#endif
        return true;
    }
    return false;
}
`,$D=`in highp vec4 vPickingColor;
`,Oa=Symbol("cacheMap");function Ua(n,e,t){let i=Ts(n).get(e);return i===void 0&&(i=t(e),Ts(n).set(e,i)),i}function qu(n,e){Ts(n).delete(e)}function Ns(n,e){const t=Ts(n);for(const i of t.keys())i.startsWith(e)&&t.delete(i);Ts(n).delete(e)}function Dp(n){n[Oa]=new Map}function Ts(n){return n[Oa]||Dp(n),n[Oa]}function kp(...n){const e={get(t,i,r){for(const s of n){const a=s()[i];if(a!==void 0)return a}},has(t,i,r){for(const s of n){const o=s();if(i in o)return!0}return!1}};return new Proxy({},e)}function e3(n){return le(n)||Ye(n)||Tr(n)}class _e extends Error{constructor(e,t){super(e),this.name="ViewError",this.view=t}}const t3="SAMPLE_FACET_UNIFORM",Fp="SAMPLE_FACET_TEXTURE",Rp="uSelectionTexture_";class Ps{#e=[];constructor(e){this.unitView=e,this.encoders=void 0,this.bufferInfo=void 0,this.bytesPerElement=new Map,this.programInfo=void 0,this.vertexArrayInfo=void 0,this.viewUniformInfo=void 0,this.markUniformInfo=void 0,this.markUniformsAltered=!0,this.selectionTextureOps=[],this.rangeMap=new n3,this.defaultProperties={get clip(){return["x","y"].map(t=>e.getScaleResolution(t)).some(t=>t?.isZoomable()??!1)},xOffset:0,yOffset:0,minBufferSize:0},this.properties=kp(typeof this.unitView.spec.mark=="object"?()=>this.unitView.spec.mark:()=>({}),()=>this.defaultProperties)}augmentDefaultProperties(e){Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors(e))}get opaque(){return!1}get defaultHitTestMode(){return"intersects"}getAttributes(){throw new Error("Not implemented!")}getSupportedChannels(){return["sample","facetIndex","x","y","color","opacity","search","uniqueId"]}getDefaultEncoding(){const e={sample:void 0,uniqueId:void 0};return this.isPickingParticipant()&&(e.uniqueId={field:dt}),e}fixEncoding(e){return e}setupExprRefsNeedingGraphicsUpdate(e){const t=this.getSupportedChannels(),i={};for(const s of e){const o=this.properties[s];if(o&&be(o)){const a=this.unitView.paramRuntime.watchExpression(o.expr,()=>{this.updateGraphicsData(),this.unitView.context.animator.requestRender()});t.includes(s)||Object.defineProperty(i,s,{get(){return a()}})}}const r=this.properties;this.properties=kp(()=>i,()=>r)}get encoding(){return Ua(this,"encoding",()=>{const e=this.getDefaultEncoding(),t=this.unitView.getEncoding(),i=o=>{const a=this.properties[o];return e3(a)||be(a)?{value:a}:void 0},r=Object.fromEntries(this.getSupportedChannels().map(o=>[o,i(o)]).filter(o=>ut(o[1]))),s=this.fixEncoding({...e,...r,...t});for(const o of Object.keys(s))this.getSupportedChannels().includes(o)||delete s[o];return s.x&&(s.x.buildIndex??=!0),s})}getContext(){return this.unitView.context}getType(){return this.unitView.getMarkType()}initializeData(){}initializeEncoders(){this.encoders=OI(this.unitView,this.encoding)}async initializeGraphics(){}updateGraphicsData(){}getSampleFacetMode(){if(this.encoders.facetIndex)return Fp;if(this.unitView.getLayoutAncestors().find(e=>"samples"in e.spec))return t3}createAndLinkShaders(e,t,i=[]){const r=this.getAttributes(),s=this.encoders,o=this.getSampleFacetMode();o&&i.push(`#define ${o}`);const a="// view: "+this.unitView.getPathString();let l=[];const c=new Set,u=Bp(s),f=[],h=Object.values(s).flatMap(E=>E.accessors).map(E=>E.predicate).filter(E=>E.param),A=new Map;for(const E of h){const I=E.param,b=this.unitView.paramRuntime,S=b.findValue(I);if(!S)throw new Error(`Cannot infer selection type as the parameter "${I}" has no value. Please ensure that the parameter is properly defined!`);const Q=ir("uniqueId");if(vd(S)){if(!A.has(I)){A.set(I,"single");const v=La+Mt(I);f.push("    // Selection parameter"),f.push(`    uniform highp uint ${v};`),this.#e.push(()=>{this.registerMarkUniformValue(v,{expr:I},F=>F.uniqueId??0)}),l.push(`bool ${Fs}${I}(bool empty) {
    return ${La}${I} == ${Q} || (empty && ${La}${I} == 0u);
}`)}}else if(vl(S)){if(!A.has(I)){A.set(I,"multi");const v=Rp+Mt(I);l.push(`// Selection texture
uniform highp usampler2D ${v};`);const F=this.getContext().glHelper,R=F.selectionTextures;this.selectionTextureOps.push(()=>{const O=b.getValue(I),H=R.get(O);if(!H)throw new Error(`Bug: no selection texture found for "${I}"!`);ni(this.programInfo,{[v]:H})});const N=Rp+I;l.push(`bool ${Fs}${I}(bool empty) {
   return binarySearchTexture(${N}, ${Q}) || (empty && isEmptyBinarySearchTexture(${N}));
}`),F.createSelectionTexture(S),b.watchExpression(I,()=>{const O=b.getValue(I);F.createSelectionTexture(O),this.getContext().animator.requestRender()})}}else if(Bd(S)&&!A.has(I)){A.set(I,"interval");const v=[],F=[];for(const R of Object.keys(S.intervals)){if(!["x","y"].includes(R))continue;const N=La+Mt(I)+`_${R}`,{attributeType:O}=nr(this.unitView.getScaleResolution(R).getScale(),R);f.push("    // Selection parameter"),f.push(`    uniform highp ${O}[2] ${N};`),this.#e.push(()=>{this.registerMarkUniformValue(N,{expr:I},ne=>ne.intervals[R]??[1,0])});const H=ne=>{for(const[Ge,Yt]of u.entries())if(Ge[1]&&Yt.includes(ne))return ir(Yt);return ir(ne)},G=H(R),V=N+"[0]",te=N+"[1]",ae=El(R);if(this.encoding[ae]){const ne=H(ae),Ge=this.defaultHitTestMode;if(Ge=="endpoints")v.push(`((${V} <= ${G} && ${G} <= ${te}) || (${V} <= ${ne} && ${ne} <= ${te}))`);else if(Ge=="encloses")v.push(`(${V} <= ${G} && ${ne} <= ${te})`);else if(Ge=="intersects")v.push(`(${V} <= ${ne} && ${G} <= ${te})`);else throw new _e(`Unsupported hit test mode "${Ge}" for interval selection!`,this.unitView)}else v.push(`(${V} <= ${G} && ${G} <= ${te})`);F.push(`${V} > ${te}`)}l.push(`bool ${Fs}${I}(bool empty) {
    return ${v.join(" && ")} || (empty && (${F.join(" || ")}));
}`)}}const d=(E,I,b,S)=>{const Q=I.channelDef;if(ut(Q))if(be(Q.value)){const{uniformName:v,uniformGlsl:F,accessorGlsl:R,adjuster:N}=ND(E,b);l.push(R),f.push(F),this.#e.push(()=>{this.registerMarkUniformValue(v,Q.value,N)})}else l.push(MD(E,b,Q.value).accessorGlsl);else if(Oi(Q)){const{uniformName:v,uniformGlsl:F,accessorGlsl:R}=TD(E,S,b);f.push(F),l.push(R);const{largeHp:N,discrete:O}=nr(S,E),H=O&&"domain"in S?G=>S.domain().indexOf(G):N?Ip:G=>+G;this.#e.push(()=>{this.registerMarkUniformValue(v,Q.datum,H)})}else if(Zt(Q)){const v=u.get([Q.field,!0]),{attributeGlsl:F,accessorGlsl:R}=wp(E,S,b,v?.includes(E)?v:void 0);c.add(F),l.push(R)}else if(Ui(Q)){const{attributeGlsl:v,accessorGlsl:F}=wp(E,S,b);c.add(v),l.push(F)}else throw new _e(`Unsupported channel definition: ${JSON.stringify(Q)}`,this.unitView)};for(const[E,I]of Object.entries(s)){if(!r.includes(E))continue;const{channelDef:b,accessors:S,scale:Q}=I;for(let v=0;v<S.length;v++)d(E,S[v],v,Q);if(Q){const v=yd(b),F=v&&v.resolutionChannel||E,R=jo(F)?this.unitView.getScaleResolution(F):null,{glsl:N,domainUniform:O,domainUniformName:H,rangeUniform:G,rangeUniformName:V}=PD(E,Q,b);l.push(N),f.push(O),f.push(G),G&&this.#e.push(()=>{const te=this.createMarkUniformSetter(V),ae=()=>te(vp(Q,E));R.addEventListener("range",ae),ae()}),O&&this.#e.push(()=>{const te=this.createMarkUniformSetter(H),ae=()=>{const ne=nn(Q.type)?[0,Q.domain().length]:Q.domain();te(Ep(Q.type)?HD(ne):ne)};R.addEventListener("domain",ae),ae()})}l.push(LD(E,S))}const g=[...A.keys()].map(E=>`${Fs}${E}(false)`);l.push(`bool isPointSelected() {
`+(this.encoders.uniqueId&&g.length>0?`    return ${g.join(" || ")};`:"    return false;")+`
}`);const p=`precision highp float;
precision highp int;`,m=E=>E.replace("#pragma markUniforms",f.join(`
`));i=i.map(m),e=m(e),t=m(t);const y=[p,a,...i,Qp,WD,[...c].join(`
`),...l,XD,ZD,e],C=[p,a,...i,Qp,$D,t],w=this.gl;this.programStatus=xD(w,this.glHelper.compileShader(w.VERTEX_SHADER,y),this.glHelper.compileShader(w.FRAGMENT_SHADER,C))}finalizeGraphicsInitialization(){if(this.programInfo)return;if(!this.programStatus)throw new Error("No program status found! "+this.unitView.getPathString());const e=this.programStatus.getProgramErrors();if(e){e.detail&&console.warn(e.detail);const t=new Error("Cannot create shader program: "+e.message);throw t.view=this.unitView,t}this.programInfo=dS(this.gl,this.programStatus.program),delete this.programStatus,this.viewUniformInfo=N0(this.gl,this.programInfo,"View"),this.markUniformInfo=N0(this.gl,this.programInfo,"Mark"),this.gl.useProgram(this.programInfo.program),ni(this.programInfo,{uSampleFacet:[0,1,0,1],uTransitionOffset:0,uZero:0});for(const t of this.#e)t();this.#e=void 0}createMarkUniformSetter(e){const t=this.markUniformInfo.setters[e];if(!t)throw new Error(`Uniform "${e}" not found int the Mark block!`);return i=>{t(i),this.markUniformsAltered=!0,this.unitView.context.animator.requestRender()}}registerMarkUniformValue(e,t,i=r=>r){const r=this.createMarkUniformSetter(e),s=o=>{if(o==null)throw new Error(`Trying to set null/undefined value for uniform: ${e}${be(t)?`Expr: ${t.expr}`:""}`);r(o)};if(be(t)){let o;const a=()=>s(i(o(null)));o=this.unitView.paramRuntime.watchExpression(t.expr,a),a()}else s(i(t))}deleteGraphicsData(){const e=this.glHelper;if(!e){this.vertexArrayInfo=void 0,this.bufferInfo=void 0;return}const t=e.gl;if(this.vertexArrayInfo&&(this.gl.bindVertexArray(null),t.deleteVertexArray(this.vertexArrayInfo.vertexArrayObject),this.vertexArrayInfo=void 0),this.bufferInfo){for(let i=0;i<8;i++)t.disableVertexAttribArray(i);Object.values(this.bufferInfo.attribs).forEach(i=>this.gl.deleteBuffer(i.buffer)),this.bufferInfo.indices&&this.gl.deleteBuffer(this.bufferInfo.indices),this.bufferInfo=void 0}}dispose(){this.deleteGraphicsData()}updateBufferInfo(e){if(this.gl.bindVertexArray(null),this.bufferInfo&&e.vertexCount<=this.bufferInfo.allocatedVertices)for(const[t,i]of Object.entries(e.arrays))i.data&&SB(this.gl,this.bufferInfo.attribs[t],i.data,0);else{this.deleteGraphicsData(),this.bufferInfo=kB(this.gl,e.arrays,{numElements:e.vertexCount}),this.bufferInfo.allocatedVertices=e.allocatedVertices;for(const[t,i]of Object.entries(e.arrays))this.bytesPerElement.set(t,i.data.BYTES_PER_ELEMENT)}}get glHelper(){return this.getContext().glHelper}get gl(){return this.glHelper.gl}isReady(){return this.bufferInfo&&this.programInfo}isPickingParticipant(){if(this.properties.tooltip===null&&!this.unitView.paramRuntime.hasPointSelections())return!1;for(const e of this.unitView.getLayoutAncestors())if(!e.isPickingSupported())return!1;return!0}bindOrSetMarkUniformBlock(){this.markUniformsAltered?(P0(this.gl,this.programInfo,this.markUniformInfo),this.markUniformsAltered=!1):T0(this.gl,this.programInfo,this.markUniformInfo)}prepareRender(e){const t=this.glHelper,i=this.gl,r=[];r.push(()=>{this.vertexArrayInfo||(this.vertexArrayInfo=MS(this.gl,this.programInfo,this.bufferInfo)),i.useProgram(this.programInfo.program)});for(const[o,a]of Object.entries(this.encoders)){const l=t.rangeTextures.get(a.scale);l&&r.push(()=>ni(this.programInfo,{[Ju+o]:l}))}r.push(...this.selectionTextureOps),this.getSampleFacetMode()==Fp&&r.push(()=>{let o;for(const a of this.unitView.getLayoutAncestors())if(o=a.getSampleFacetTexture(),o)break;if(!o)throw new Error("No facet texture available. This is bug.");ni(this.programInfo,{uSampleFacetTexture:o})});const s=(e.picking??!1)&&this.isPickingParticipant();return r.push(()=>ws(this.viewUniformInfo,{uViewOpacity:this.unitView.getEffectiveOpacity(),uPickingEnabled:s})),this.opaque||e.picking?r.push(()=>i.disable(i.BLEND)):r.push(()=>i.enable(i.BLEND)),r}prepareSampleFacetRendering(e){const t=e.sampleFacetRenderingOptions,i=this.programInfo.uniformSetters.uSampleFacet;if(t&&i){const r=t.pixelToUnit,s=t.locSize.location*r,o=t.locSize.size*r;if(s>1||s+o<0)return!1;this.gl.uniform4f(i.location,s,o,s,o)}return!0}render(e){}createRenderCallback(e,t){if(!this.bufferInfo)return()=>{};const i=this;let r;const s=this.unitView.getScaleResolution("x")?.getScale(),o=s&&Pe(s.type),a=["index","locus"].includes(s?.type)?-1:0,l=[0,0];r=f=>{if(o&&f.xIndex){const h=s.domain(),A=f.xIndex(h[0]+a,h[1],l),d=A[0],g=A[1]-d;g>0&&e(d,g)}else e(f.offset,f.count)};const c=this.rangeMap.get(void 0).count==0?t.facetId:void 0,u=this.rangeMap.get(c);return t.sampleFacetRenderingOptions?function(){u.count&&i.prepareSampleFacetRendering(t)&&r(u)}:function(){u.count&&r(u)}}setViewport(e,t,i,r){i=i.flatten();const s=this.gl,o=this.properties,a=.5,l=(o.xOffset??0)+a,c=(o.yOffset??0)+a;let u,f=i;if(o.clip!=="never"&&(o.clip||r)){let h=0,A=0,d;if(r){if(f=i.intersect(r).flatten(),!f.isDefined())return!1;d=[i.width/f.width,i.height/f.height],A=Math.max(0,i.y2-r.y2),h=Math.min(0,i.x-r.x)}else d=[1,1];const g=[f.x,e.height-f.y2,f.width,f.height].map(C=>C*t),p=g.map(C=>Math.floor(C)),m=g[0]-p[0],y=g[1]-p[1];s.viewport(...p),s.scissor(...p),s.enable(s.SCISSOR_TEST),u={uViewOffset:[(l+h+m/t)/f.width,-(c+A-y/t)/f.height],uViewScale:d}}else{if(!i.isDefined())return!1;s.viewport(0,0,e.width*t,e.height*t),s.disable(s.SCISSOR_TEST),u={uViewOffset:[(i.x+l)/e.width,(e.height-i.y-c-i.height)/e.height],uViewScale:[i.width/e.width,i.height/e.height]}}return ws(this.viewUniformInfo,{...u,uViewportSize:[i.width,i.height],uDevicePixelRatio:t}),P0(this.gl,this.programInfo,this.viewUniformInfo),!0}findDatumAt(e,t){}}class n3 extends Kt{constructor(){super([],JSON.stringify)}get(e){let t=super.get(e);return t===void 0&&(t={offset:0,count:0,xIndex:void 0},super.set(e,t)),t}migrateEntries(e){for(const[t,i]of this.entries())e.has(t)||(i.offset=0,i.count=0,i.xIndex=void 0);for(const[t,i]of e.entries())Object.assign(this.get(t),i)}}function ju(n,e){const t=El(e);let i=n[e]&&{...n[e]},r=n[t]&&{...n[t]};if(!(ut(i)||ut(r))){if(i){if(!gt(n[e]))return;if(r){if(i.type!="quantitative"){const s=(1-(i.band||1))/2;i.band=s,r.band=-s}}else if(i.type=="quantitative")r={datum:0,domainInert:!0};else{r={...i};const s=(1-(i.band??1))/2;i.band=0+s,r.band=1-s}}else i={value:0},r={value:1};n[e]=i,n[t]=r}}function Ga(n,e){const t=yd(n);t&&(t.resolutionChannel=e)}function Mp(n,e){n.stroke||(e?n.stroke={value:null}:(n.stroke=structuredClone(n.color),Ga(n.stroke,"color"))),ut(n.stroke)&&n.stroke.value===null&&(n.strokeWidth={value:0}),n.strokeOpacity||(n.strokeOpacity=structuredClone(n.opacity),Ga(n.strokeOpacity,"opacity"))}function Np(n,e){ut(n.fill)&&n.fill.value===null?n.fillOpacity={value:0}:n.fill||(n.fill=structuredClone(n.color),Ga(n.fill,"color"),!e&&!n.fillOpacity&&(n.fillOpacity={value:0})),n.fillOpacity||(e?(n.fillOpacity=structuredClone(n.opacity),Ga(n.fillOpacity,"opacity")):n.fillOpacity={value:0})}const i3=["none","diagonal","antiDiagonal","cross","vertical","horizontal","grid","dots","rings","ringsLarge"];class r3 extends Ps{constructor(e){super(e),this.augmentDefaultProperties({x2:void 0,y2:void 0,filled:!0,color:"#4c78a8",opacity:1,strokeWidth:3,cornerRadius:0,minWidth:.5,minHeight:.5,minOpacity:1})}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","fill","stroke","fillOpacity","strokeOpacity","strokeWidth"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","fill","stroke","fillOpacity","strokeOpacity","strokeWidth"]}get opaque(){return Ua(this,"opaque",()=>!this.#e()&&!this.#t()&&!this.properties.shadowOpacity&&ut(this.encoding.fillOpacity)&&this.encoding.fillOpacity.value==1&&this.properties.minOpacity==1)&&this.unitView.getEffectiveOpacity()==1}fixEncoding(e){return ju(e,"x"),ju(e,"y"),Mp(e,this.properties.filled),Np(e,this.properties.filled),delete e.color,delete e.opacity,e}#e(){const e=this.properties;return e.cornerRadius||e.cornerRadiusBottomLeft||e.cornerRadiusBottomRight||e.cornerRadiusTopLeft||e.cornerRadiusTopRight}#t(){const e=this.encoding.strokeWidth;return!(ut(e)&&!e.value)||"condition"in e}async initializeGraphics(){await super.initializeGraphics();const e=[];this.#e()&&e.push("ROUNDED_CORNERS"),this.#t()&&e.push("STROKED"),this.properties.shadowOpacity&&e.push("SHADOW"),this.createAndLinkShaders(OS,US,[GS,...e.map(t=>"#define "+t)])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;this.registerMarkUniformValue("uMinWidth",e.minWidth),this.registerMarkUniformValue("uMinHeight",e.minHeight),this.registerMarkUniformValue("uMinOpacity",e.minOpacity),this.registerMarkUniformValue("uCornerRadiusTopRight",e.cornerRadiusTopRight??e.cornerRadius??0),this.registerMarkUniformValue("uCornerRadiusBottomRight",e.cornerRadiusBottomRight??e.cornerRadius??0),this.registerMarkUniformValue("uCornerRadiusTopLeft",e.cornerRadiusTopLeft??e.cornerRadius??0),this.registerMarkUniformValue("uCornerRadiusBottomLeft",e.cornerRadiusBottomLeft??e.cornerRadius??0),this.registerMarkUniformValue("uHatchPattern",e.hatch,t=>Math.max(0,i3.indexOf(t??"none"))),this.registerMarkUniformValue("uShadowBlur",e.shadowBlur??0),this.registerMarkUniformValue("uShadowOpacity",e.shadowOpacity??0),this.registerMarkUniformValue("uShadowOffsetX",e.shadowOffsetX??0),this.registerMarkUniformValue("uShadowOffsetY",e.shadowOffsetY??0),this.registerMarkUniformValue("uShadowColor",e.shadowColor??"black",Yu)}updateGraphicsData(){const e=this.unitView.getCollector();if(!e){console.debug("No collector");return}const t=e.getItemCount(),i=new YD({encoders:this.encoders,attributes:this.getAttributes(),numItems:t});i.addBatches(e.facetBatches);const r=i.toArrays();this.rangeMap.migrateEntries(r.rangeMap),this.updateBufferInfo(r)}prepareRender(e){const t=super.prepareRender(e);return t.push(()=>this.bindOrSetMarkUniformBlock()),t.push(()=>ii(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((i,r)=>{wa(t,this.vertexArrayInfo,t.TRIANGLE_STRIP,r,i)},e)}findDatumAt(e,t){e=Me(e);const i=this.unitView.getCollector().facetBatches.get(e);if(!i)return;const r=this.encoders,s=r.x.scale.type;if(nn(s)){const o=r.x.dataAccessor;return i.find(a=>t==o(a))}else{const o=r.x.dataAccessor,a=r.x2.dataAccessor;return i.find(l=>t>=o(l)&&t<a(l))}}}const s3=`flat out float vRadius;
flat out float vRadiusWithPadding;
flat out lowp vec4 vFillColor;
flat out lowp vec4 vStrokeColor;
flat out lowp float vShape;
flat out lowp float vHalfStrokeWidth;
flat out mat2 vRotationMatrix;

// Copypaste from fragment shader
const float CIRCLE = 0.0;
const float SQUARE = 1.0;
const float CROSS = 2.0;
const float DIAMOND = 3.0;
const float TRIANGLE_UP = 4.0;
const float TRIANGLE_RIGHT = 5.0;
const float TRIANGLE_DOWN = 6.0;
const float TRIANGLE_LEFT = 7.0;
const float TICK_UP = 8.0;
const float TICK_RIGHT = 9.0;
const float TICK_DOWN = 10.0;
const float TICK_LEFT = 11.0;

float computeSemanticThresholdFactor() {
    // TODO: add smooth transition
    return getScaled_semanticScore() >= uSemanticThreshold ? 1.0 : 0.0;
}

// TODO: Move this into common.glsl or something
vec2 getDxDy() {
#if defined(dx_DEFINED) || defined(dy_DEFINED)
    return vec2(getScaled_dx(), getScaled_dy()) / uViewportSize;
#else
    return vec2(0.0, 0.0);
#endif
}

void main(void) {
    float shapeAngle = 0.0;

    // Selected points should always be visible
    float semanticThresholdFactor = isPointSelected()
        ? 1.0
        : computeSemanticThresholdFactor();

    if (semanticThresholdFactor <= 0.0) {
        gl_PointSize = 0.0;
        // Place the vertex outside the viewport. The default (0, 0) makes this super-slow
        // on Apple Silicon. Probably related to the tile-based GPU architecture.
        gl_Position = vec4(100.0, 0.0, 0.0, 0.0);
        // Exit early. MAY prevent some unnecessary calculations.
        return;
    }

    float size = getScaled_size();
    vec2 pos = vec2(getScaled_x(), getScaled_y()) + getDxDy();

    gl_Position = unitToNdc(applySampleFacet(pos));

    float strokeWidth = getScaled_strokeWidth();

    float diameter = sqrt(size) *
        uScaleFactor *
        semanticThresholdFactor;

    // Clamp minimum size and adjust opacity instead. Yields more pleasing result,
    // no flickering etc.
    float opacity = uViewOpacity;
	if (strokeWidth <= 0.0 || uInwardStroke) {
		float minDiameter = 1.0 / uDevicePixelRatio;
		if (diameter < minDiameter) {
			// We do some "cheap" gamma correction here. It breaks on dark background, though.
			// First we take a square of the size and then apply "gamma" of 1.5.
			opacity *= pow(diameter / minDiameter, 2.5);
			diameter = minDiameter;
		}
	}

	float fillOpa = getScaled_fillOpacity() * opacity;
	float strokeOpa = getScaled_strokeOpacity() * opacity;

    vShape = getScaled_shape();

	// Circle doesn't have sharp corners. Do some special optimizations to minimize the point size.
	bool circle = vShape == 0.0;

    if (vShape > TICK_UP && vShape <= TICK_LEFT) {
        shapeAngle = (vShape - TICK_UP) * 90.0;
        vShape = TICK_UP;
    } else if (vShape > TRIANGLE_UP && vShape <= TRIANGLE_LEFT) {
        shapeAngle = (vShape - TRIANGLE_UP) * 90.0;
        vShape = TRIANGLE_UP;
    }

	float angleInDegrees = getScaled_angle();
	float angle = -(shapeAngle + angleInDegrees) * PI / 180.0;
    float sinTheta = sin(angle);
    float cosTheta = cos(angle);
    vRotationMatrix = mat2(cosTheta, sinTheta, -sinTheta, cosTheta);

    // Not needed if we would draw rotated quads instead of gl.POINTS
	float roomForRotation = circle ? 1.0 : sin(mod(angle, PI / 2.0) + PI / 4.0) / sin(PI / 4.0);

	float aaPadding = 1.0 / uDevicePixelRatio;
	float rotationPadding = (diameter * roomForRotation) - diameter;
	// sqrt(3.0) ensures that the angles of equilateral triangles have enough room
	float strokePadding = uInwardStroke ? 0.0 : strokeWidth * (circle ? 1.0 : sqrt(3.0));
	float padding = rotationPadding + strokePadding + aaPadding;

    gl_PointSize = max(
        (diameter + padding),
        uPickingEnabled ? uMinPickingSize : 0.0
    ) * uDevicePixelRatio;

	vRadius = diameter / 2.0;
	vRadiusWithPadding = vRadius + padding / 2.0;

    vHalfStrokeWidth = strokeWidth / 2.0;

    vFillColor = vec4(getScaled_fill() * fillOpa, fillOpa);
    vStrokeColor = vec4(getScaled_stroke() * strokeOpa, strokeOpa);

    setupPicking();
}
`,o3=`const lowp vec4 white = vec4(1.0);
const lowp vec4 black = vec4(0.0, 0.0, 0.0, 1.0);

flat in float vRadius;
flat in float vRadiusWithPadding;

flat in lowp vec4 vFillColor;
flat in lowp vec4 vStrokeColor;
flat in lowp float vShape;
flat in lowp float vHalfStrokeWidth;

flat in mat2 vRotationMatrix;

out lowp vec4 fragColor;

// Copypaste from vertex shader
const float CIRCLE = 0.0;
const float SQUARE = 1.0;
const float CROSS = 2.0;
const float DIAMOND = 3.0;
const float TRIANGLE_UP = 4.0;
const float TICK_UP = 8.0;

// The distance functions are inspired by:
// http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
// However, these are not true distance functions, because the corners need to be sharp.

float circle(vec2 p, float r) {
    return length(p) - r;
}

float square(vec2 p, float r) {
    p = abs(p);
    return max(p.x, p.y) - r;
}

float tickUp(vec2 p, float r) {
    float halfR = r * 0.5;
    p.y += halfR;
    p = abs(p);
    return max(p.x - r * 0.15, p.y - halfR);
}

float equilateralTriangle(vec2 p, float r) {
    p.y = -p.y;
    float k = sqrt(3.0);
    float kr = k * r;
    p.y -= kr / 2.0;
    return max((abs(p.x) * k + p.y) / 2.0, -p.y - kr);
}

float crossShape(vec2 p, float r) {
    p = abs(p);

	vec2 b = vec2(0.4, 1.0) * r;
    vec2 v = abs(p) - b.xy;
    vec2 h = abs(p) - b.yx;
    return min(max(v.x, v.y), max(h.x, h.y));
}

float diamond(vec2 p, float r) {
    p = abs(p);
    return (max(abs(p.x - p.y), abs(p.x + p.y)) - r) / sqrt(2.0);
}

void main() {
    float d;

	/** Normalized point coord */
    vec2 p = vRotationMatrix * (2.0 * gl_PointCoord - 1.0) * vRadiusWithPadding;
	float r = vRadius;

    // We could also use textures here. Could even be faster, because we have plenty of branching here.
    if (vShape == CIRCLE) {
        d = circle(p, r);

    } else if (vShape == SQUARE) {
        d = square(p, r);

    } else if (vShape == CROSS) {
        d = crossShape(p, r);

    } else if (vShape == DIAMOND) {
        d = diamond(p, r);

    } else if (vShape == TRIANGLE_UP) {
        d = equilateralTriangle(p, r);

    } else if (vShape == TICK_UP) {
        d = tickUp(p, r);

    } else {
        d = 0.0;
    }

	if (!uPickingEnabled) {
		lowp vec4 fillColor = mix(vFillColor, white, -d * uGradientStrength / vRadius);

		fragColor = distanceToColor(
			d + (uInwardStroke ? vHalfStrokeWidth : 0.0),
			fillColor,
			vStrokeColor,
            vec4(0.0),
			vHalfStrokeWidth);

	} else if (d - vHalfStrokeWidth <= 0.0) {
        fragColor = vPickingColor;

	} else {
		discard;
    }
}

`,a3=`layout(std140) uniform Mark {
    /**
    * The stroke should only grow inwards, e.g, the diameter/outline is not affected by the stroke width.
    * Thus, a point that has a zero size has no visible stroke. This allows strokes to be used with
    * geometric zoom, etc.
    */
    uniform bool uInwardStroke;

    /** The minimum point size in pixels when rendering into the picking buffer */
    uniform float uMinPickingSize;

    /** Scale factor for geometric zoom */
    uniform mediump float uScaleFactor;

    uniform mediump float uZoomLevel;
    uniform highp float uSemanticThreshold;

    uniform mediump float uGradientStrength;

#pragma markUniforms
};
`;class Tp extends Qe{constructor(e){super(e),this.params=e,this.k=e.size||500,this.reset()}reset(){super.reset(),this.reservoir=[],this.W=void 0,this.ingester=this._initialIngester}_initialIngester(e){this.reservoir.push(e),this.reservoir.length==this.k&&(this.W=Math.exp(Math.log(Math.random())/this.k),this.i=this.k,this.next=this.i,this.ingester=this._finalIngester,this._setNextStop())}_finalIngester(e){++this.i==this.next&&(this.reservoir[Math.floor(Math.random()*this.k)]=e,this.W*=Math.exp(Math.log(Math.random())/this.k),this._setNextStop())}_setNextStop(){this.next+=Math.floor(Math.log(Math.random())/Math.log(1-this.W))+1}handle(e){this.ingester(e)}complete(){for(const e of this.reservoir)this._propagate(e);super.complete()}}function c3(n,e,t){const i=new Tp({type:"sample",size:n});for(const r of e)i.handle(t(r));return i.complete(),i.reservoir}const l3={};class u3 extends Ps{#e=()=>0;constructor(e){super(e),this.augmentDefaultProperties({x:.5,y:.5,color:"#4c78a8",filled:!0,opacity:1,size:100,semanticScore:0,shape:"circle",strokeWidth:2,fillGradientStrength:0,dx:0,dy:0,angle:0,sampleFacetPadding:.1,semanticZoomFraction:.02,minPickingSize:2});const t=this.properties.semanticZoomFraction;if(t!=null)if(be(t)){const i=this.unitView.paramRuntime.watchExpression(t.expr,()=>this.getContext().animator.requestRender());this.#e=i}else this.#e=()=>t;"geometricZoomBound"in this.properties&&console.warn('geometricZoomBound is deprecated. Use something like the following instead: "size": { "expr": "min(0.5 * pow(zoomLevel, 2), 200)" }.')}getAttributes(){return["uniqueId","facetIndex","x","y","size","semanticScore","shape","strokeWidth","dx","dy","fill","stroke","fillOpacity","strokeOpacity","angle"]}getSupportedChannels(){return[...super.getSupportedChannels(),"size","semanticScore","shape","strokeWidth","dx","dy","fill","stroke","fillOpacity","strokeOpacity","angle"]}getDefaultEncoding(){return{...super.getDefaultEncoding(),...l3}}fixEncoding(e){return Mp(e,this.properties.filled),Np(e,this.properties.filled),delete e.color,delete e.opacity,e}initializeData(){super.initializeData();const e=this.encoders.semanticScore?.dataAccessor?.asNumberAccessor();e&&(this.sampledSemanticScores=Float32Array.from(c3(1e4,this.unitView.getCollector().getData(),e)),this.sampledSemanticScores.sort((t,i)=>t-i))}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(s3,o3,[a3])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;this.registerMarkUniformValue("uInwardStroke",e.inwardStroke,t=>!!t),this.registerMarkUniformValue("uGradientStrength",e.fillGradientStrength),this.registerMarkUniformValue("uMinPickingSize",e.minPickingSize)}updateGraphicsData(){const e=this.unitView.getCollector();if(!e){console.debug("No collector");return}const t=e.getItemCount(),i=new KD({encoders:this.encoders,attributes:this.getAttributes(),numItems:Math.max(t,this.properties.minBufferSize||0)});i.addBatches(e.facetBatches);const r=i.toArrays();this.rangeMap.migrateEntries(r.rangeMap),this.updateBufferInfo(r)}#t(){const e=Math.pow(2,this.properties.geometricZoomBound||0);return Math.pow(Math.min(1,this.unitView.getZoomLevel()/e),1/3)}getSemanticThreshold(){if(this.sampledSemanticScores){const e=Math.max(0,1-this.#e()*this.unitView.getZoomLevel());if(e<=0)return-1/0;if(e>=1)return 1/0;{const t=this.sampledSemanticScores;return bh(t,e)}}else return-1}prepareRender(e){const t=super.prepareRender(e);return t.push(()=>{ws(this.markUniformInfo,{uScaleFactor:this.#t(),uSemanticThreshold:this.getSemanticThreshold()}),this.markUniformsAltered=!0}),t.push(()=>this.bindOrSetMarkUniformBlock()),t.push(()=>ii(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((i,r)=>{r&&wa(t,this.vertexArrayInfo,t.POINTS,r,i)},e)}}const f3=`// Line caps
const int BUTT = 0;
const int SQUARE = 1;
const int ROUND = 2;

/** Position along the rule */
in float pos;

/** Which side of the stroke: -0.5 or 0.5 */
in float side;

flat out vec4 vColor;

/** Stroke width */
flat out float vSize;

/** The distance from the line center to the direction of normal in pixels */
out float vNormalLengthInPixels;

/** Distances from the line endings. Used for rendering the round caps and dashes */
out highp vec2 vPosInPixels;


void main(void) {
    float pixelSize = 1.0 / uDevicePixelRatio;

    // Stroke width in pixels
    float size = getScaled_size();
    float opacity = getScaled_opacity() * uViewOpacity;

    // Avoid artifacts in very thin lines by clamping the size and adjusting opacity respectively
    if (size < pixelSize) {
        opacity *= size / pixelSize;
        size = pixelSize;
    }

    vec2 a = applySampleFacet(vec2(getScaled_x(), getScaled_y()));
    vec2 b = applySampleFacet(vec2(getScaled_x2(), getScaled_y2()));

    vec2 tangent = b - a;

    float offset = 0.0;
    float relativeDiff = 0.0;
    if (uMinLength > 0.0 || uStrokeCap != BUTT) {
        float len = length(tangent * uViewportSize);

        // Elongate to reach the minimum length.
        // The length difference in pixels
        float diff = max(0.0, uMinLength - len);

        // Add line caps
        if (uStrokeCap != BUTT) {
            diff += size;
        }

        relativeDiff = diff / len;
        offset = relativeDiff * (pos - 0.5);
    }

    // Apply caps and minimum length by spreading the vertices along the tangent
    vec2 p = pos < 1.0
        ? a + tangent * (pos + offset)
        : b + tangent * offset;

    // Add an extra pixel to stroke width to accommodate edge antialiasing
    float aaPadding = pixelSize;

    // Extrude
    vec2 normal = normalize(vec2(-tangent.y, tangent.x) / uViewportSize);
    p += normal * side * (size + aaPadding) / uViewportSize;

    gl_Position = unitToNdc(p);

    vColor = vec4(getScaled_color() * opacity, opacity);
    vSize = size;
    vNormalLengthInPixels = side * (size + aaPadding);

    // TODO: Here's a precision problem that breaks round caps when zoomed in enough
    vPosInPixels = vec2(pos, (1.0 - pos)) * (1.0 + relativeDiff) * length(tangent * uViewportSize) -
        vec2(uStrokeCap != BUTT ? size / 2.0 : 0.0);
    
    setupPicking();
}
`,A3=`// Line ending
const int BUTT = 0;
const int SQUARE = 1;
const int ROUND = 2;

uniform sampler2D uDashTexture;

flat in vec4 vColor;
flat in float vSize;

/** Position on the rule along its length in pixels */
in vec2 vPosInPixels;
in float vNormalLengthInPixels;

out lowp vec4 fragColor;

void main(void) {
    float dpr = uDevicePixelRatio;

    float distanceFromEnd = -min(vPosInPixels[0], vPosInPixels[1]);
    float distance; // from the rule centerline or end
    if (distanceFromEnd > 0.0 && uStrokeCap == ROUND) {
        // round cap
        distance = length(vec2(distanceFromEnd, vNormalLengthInPixels));
    } else {
        distance = abs(vNormalLengthInPixels);
    }

    // Use a signed distance field to implement edge antialiasing
    float opacity = clamp(((vSize / 2.0 - distance) * dpr), -0.5, 0.5) + 0.5;

    if (uDashTextureSize > 0.0) {
        float pos = (vPosInPixels[0] + uStrokeDashOffset) * dpr;
        float floored = floor(pos);
        vec2 texelPositions = (floored + vec2(0.5, 1.5)) / dpr / uDashTextureSize;
      
        // Do antialiasing
        opacity *= mix(
            texture(uDashTexture, vec2(texelPositions[0], 0)).r,
            texture(uDashTexture, vec2(texelPositions[1], 0)).r,
            clamp((pos - floored), 0.0, 1.0));
    }

    fragColor = vColor * opacity;

    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
}
`,h3=`layout(std140) uniform Mark {
    /** Minimum rule length in pixels */
    uniform mediump float uMinLength;

    uniform mediump float uDashTextureSize;
    uniform lowp int uStrokeCap;
    uniform mediump float uStrokeDashOffset;

#pragma markUniforms
};
`;class d3 extends Ps{constructor(e){super(e),this.dashTextureSize=0,this.augmentDefaultProperties({x2:void 0,y2:void 0,size:1,color:"black",opacity:1,minLength:0,strokeDash:null,strokeDashOffset:0,strokeCap:"butt"})}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","size","color","opacity"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size"]}fixEncoding(e){if(!(e.x&&e.y&&e.x2&&e.y2))if(e.x&&e.x2&&!e.y)e.y={value:.5},e.y2=e.y;else if(e.y&&e.y2&&!e.x)e.x={value:.5},e.x2=e.x;else if(e.x&&!e.y)e.y={value:0},e.y2={value:1},e.x2=e.x;else if(e.y&&!e.x)e.x={value:0},e.x2={value:1},e.y2=e.y;else if(e.x&&e.y&&e.y2)e.x2=e.x;else if(e.y&&e.x&&e.x2)e.y2=e.y;else if(e.y&&e.x)if(!e.x2&&gt(e.y)&&e.y.type=="quantitative")e.x2=e.x,e.y2={datum:0};else if(!e.y2&&gt(e.x)&&e.x.type=="quantitative")e.y2=e.y,e.x2={datum:0};else throw new Error("A bug!");else throw new Error("At a minimum, either the x or y channel must be defined in the rule mark's encoding: "+JSON.stringify(e));return e}async initializeGraphics(){await super.initializeGraphics();const e=this.gl,t=g3(this.properties.strokeDash);this.dashTexture=ms(e,{level:0,mag:e.NEAREST,min:e.NEAREST,internalFormat:e.R8,format:e.RED,src:t,height:1}),this.dashTextureSize=t.length,this.createAndLinkShaders(f3,A3,[h3])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;this.registerMarkUniformValue("uMinLength",e.minLength),this.registerMarkUniformValue("uStrokeCap",e.strokeCap??"butt",t=>["butt","square","round"].indexOf(t)),ws(this.markUniformInfo,{uDashTextureSize:+this.dashTextureSize}),this.markUniformsAltered=!0}updateGraphicsData(){const e=this.unitView.getCollector();if(!e){console.debug("No collector");return}const t=e.getItemCount(),i=new JD({encoders:this.encoders,attributes:this.getAttributes(),numItems:Math.max(t,this.properties.minBufferSize||0)});i.addBatches(e.facetBatches);const r=i.toArrays();this.rangeMap.migrateEntries(r.rangeMap),this.updateBufferInfo(r)}prepareRender(e){const t=super.prepareRender(e);return t.push(()=>this.bindOrSetMarkUniformBlock()),t.push(()=>ni(this.programInfo,{uDashTexture:this.dashTexture})),t.push(()=>ii(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((i,r)=>wa(t,this.vertexArrayInfo,t.TRIANGLE_STRIP,r,i),e)}}function g3(n){if(!n)return new Uint8Array(0);if(n.length==0||n.length%2||n.findIndex(s=>Math.round(s)!=s||s<1||s>1e3)>=0)throw new Error("Invalid stroke dash pattern: "+JSON.stringify(n));const e=n.reduce((s,o)=>s+o),t=new Uint8Array(e);let i=!0,r=0;for(let s of n){for(;s;)t[r++]=i&&255||0,s--;i=!i}return t}const p3=`flat out vec4 vColor;

/** Stroke width */
flat out float vSize;

/** The distance from the line center to the direction of normal in pixels */
out float vNormalLengthInPixels;

flat out float vGamma;

const int SHAPE_ARC = 0;
const int SHAPE_DOME = 1;
const int SHAPE_DIAGONAL = 2;
const int SHAPE_LINE = 3;
const int ORIENT_VERTICAL = 0;
const int ORIENT_HORIZONTAL = 1;

float distanceFromLine(vec2 pointOnLine1, vec2 pointOnLine2, vec2 point) {
    vec2 a = point - pointOnLine1;
    vec2 b = pointOnLine2 - pointOnLine1;
    vec2 proj = dot(a, b) / dot(b, b) * b;
    return length(a - proj);
}

bool isInsideViewport(vec2 point, float marginFactor) {
    vec2 margin = uViewportSize * vec2(marginFactor);
    return point.x >= -margin.x
        && point.x <= uViewportSize.x + margin.x
        && point.y >= -margin.y
        && point.y <= uViewportSize.y + margin.y;
}

void main(void) {
    float pixelSize = 1.0 / uDevicePixelRatio;
    float opacity = getScaled_opacity() * uViewOpacity;

    // The bezier's control points
    vec2 p1, p2, p3, p4;

    vec2 a = applySampleFacet(vec2(getScaled_x(), getScaled_y())) * uViewportSize;
    vec2 b = applySampleFacet(vec2(getScaled_x2(), getScaled_y2())) * uViewportSize;

    if (uShape <= SHAPE_DOME) {
        if (uShape == SHAPE_DOME) {
            vec2 height = vec2(0.0);
            if (uOrient == ORIENT_VERTICAL) {
                p1 = vec2(min(a.x, b.x), b.y);
                p4 = vec2(max(a.x, b.x), b.y);
                height = vec2(0.0, a.y - b.y);

                if (uClampApex) {
                    if (p4.x > 0.0) {
                        p1.x = max(p1.x, -p4.x);
                    }
                    if (p1.x < uViewportSize.x) {
                        p4.x = min(p4.x, 2.0 * uViewportSize.x - p1.x);
                    }
                }

            } else {
                p1 = vec2(b.x, min(a.y, b.y));
                p4 = vec2(b.x, max(a.y, b.y));
                height = vec2(a.x - b.x, 0.0);

                if (uClampApex) {
                    if (p4.y > 0.0) {
                        p1.y = max(p1.y, -p4.y);
                    }
                    if (p1.y < uViewportSize.y) {
                        p4.y = min(p4.y, 2.0 * uViewportSize.y - p1.y);
                    }
                }
            }

            vec2 controlOffset = height / 0.75;

            p2 = p1 + controlOffset;
            p3 = p4 + controlOffset;

        } if (uShape == SHAPE_ARC) {
            p1 = a;
            p4 = b;

            vec2 chordVector = p4 - p1;
            vec2 unitChordVector = normalize(chordVector);
            vec2 chordNormal = vec2(-unitChordVector.y, unitChordVector.x);
            float chordLength = length(chordVector);

            if (chordLength > uMaxChordLength) {
                if (isInsideViewport(p1, 2.0)) {
                    chordLength = uMaxChordLength;
                    p4 = p1 + unitChordVector * uMaxChordLength;
                } else if (isInsideViewport(p4, 2.0)) {
                    chordLength = uMaxChordLength;
                    p1 = p4 - unitChordVector * uMaxChordLength;
                }
            }

            float height = max(
                chordLength / 2.0 * uArcHeightFactor,
                uMinArcHeight
            );

            // This is a bit poor approximation of a circular arc, but it's probably enough for most purposes.
            // TODO: Consider a more sophisticated approach: https://stackoverflow.com/a/44829356/1547896
            vec2 controlOffset = chordNormal * height / 0.75;

            p2 = p1 + controlOffset;
            p3 = p4 + controlOffset;
        }

    } else if (uShape == SHAPE_DIAGONAL) {
        if (uOrient == ORIENT_VERTICAL) {
            p1 = a;
            p2 = vec2(a.x, (a.y + b.y) / 2.0);
            p3 = vec2(b.x, (a.y + b.y) / 2.0);
            p4 = b;
        } else {
            p1 = a;
            p2 = vec2((a.x + b.x) / 2.0, a.y);
            p3 = vec2((a.x + b.x) / 2.0, b.y);
            p4 = b;
        }
    } else if (uShape == SHAPE_LINE) {
        p1 = a;
        p2 = (a + b) / 2.0;
        p3 = p2;
        p4 = b;
    }

    vec2 strip = vec2(
        float(gl_VertexID / 2) / float(uSegmentBreaks),
        float(gl_VertexID % 2) - 0.5
    );

    // Make segments shorter near the endpoints to make the tightly bent attachment points smoother
    float t = smoothstep(0.0, 1.0, strip.x);

    // https://stackoverflow.com/a/31317254/1547896
    vec2 C1 = p4 - 3.0 * p3 + 3.0 * p2 - p1;
    vec2 C2 = 3.0 * p3 - 6.0 * p2 + 3.0 * p1;
    vec2 C3 = 3.0 * p2 - 3.0 * p1;
    vec2 C4 = p1;

    vec2 p;
    // Skip computation at endpoints to maintain precision
    if (t == 0.0) {
        p = p1;
    } else if (t == 1.0) {
        p = p4;
    } else {
        p = C1*t*t*t + C2*t*t + C3*t + C4;
    }

    vec2 tangent = normalize(3.0*C1*t*t + 2.0*C2*t + C3);
    vec2 normal = vec2(-tangent.y, tangent.x);

    float size = getScaled_size();

    // Avoid artifacts in very thin lines by clamping the size and adjusting opacity respectively
    if (size < pixelSize) {
        opacity *= size / pixelSize;
        size = pixelSize;
    }

    // Handle minimum picking size or add an extra pixel to the stroke width to accommodate edge antialiasing
    float paddedSize = uPickingEnabled
        ? max(size, uMinPickingSize)
        : size + pixelSize;

    vNormalLengthInPixels = strip.y * paddedSize;
    
    if (uShape == SHAPE_ARC &&
        uArcFadingDistance[0] > 0.0 &&
        uArcFadingDistance[1] > 0.0 &&
        (!uNoFadingOnPointSelection || !isPointSelected()))
    {
        float d = distanceFromLine(p1, p4, p);
        float distanceOpacity = smoothstep(uArcFadingDistance[1], uArcFadingDistance[0], d);    

        // Fade out
        opacity *= distanceOpacity;

        // Collapse fully transparent triangles to skip fragment processing 
        if (distanceOpacity <= 0.0) {
            vNormalLengthInPixels = 0.0;
        }
    }

    // Extrude
    p += normal * vNormalLengthInPixels;

    gl_Position = pixelsToNdc(p);

    vec3 color = getScaled_color();

    vColor = vec4(color * opacity, opacity);

    vGamma = getGammaForColor(color);

    vSize = paddedSize;

    setupPicking();
}
`,m3=`flat in vec4 vColor;
flat in float vSize;
in float vNormalLengthInPixels;
flat in float vGamma;

out lowp vec4 fragColor;

void main(void) {
    float dpr = uDevicePixelRatio;

    float distance = abs(vNormalLengthInPixels);
    float opacity = clamp(((vSize / 2.0 - distance) * dpr), 0.0, 1.0);

    opacity = pow(opacity, vGamma);

    fragColor = vColor * opacity;

    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
}
`,w3=`layout(std140) uniform Mark {
    uniform float uArcHeightFactor;

    /** Make very small arcs visible */
    uniform float uMinArcHeight;

    /** The minimum stroke width in pixels when rendering into the picking buffer */
    uniform float uMinPickingSize;

    uniform int uShape;
    uniform int uOrient;
    uniform bool uClampApex;

    // In pixels
    uniform float uMaxChordLength;
    // In pixels
    uniform vec2 uArcFadingDistance;
    uniform bool uNoFadingOnPointSelection;

    uniform int uSegmentBreaks;

#pragma markUniforms
};
`,y3=["arc","dome","diagonal","line"],C3=["vertical","horizontal"];class x3 extends Ps{constructor(e){super(e),this.augmentDefaultProperties({x:0,x2:void 0,y:0,y2:void 0,size:1,color:"black",opacity:1,segments:101,arcHeightFactor:1,minArcHeight:1.5,minPickingSize:3,clampApex:!1,maxChordLength:5e4,arcFadingDistance:!1,noFadingOnPointSelection:!0,linkShape:"arc",orient:"vertical"}),this._baseInstanceExt=this.gl.getExtension("WEBGL_draw_instanced_base_vertex_base_instance")}get defaultHitTestMode(){return"endpoints"}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","size","color","opacity"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size"]}fixEncoding(e){return e.x2||(gt(e.x)?e.x2={datum:0}:e.x2=e.x),e.y2||(gt(e.y)?e.y2={datum:0}:e.y2=e.y),e}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(p3,m3,[w3])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;this.registerMarkUniformValue("uArcFadingDistance",e.arcFadingDistance,t=>t||[0,0]),this.registerMarkUniformValue("uArcHeightFactor",e.arcHeightFactor),this.registerMarkUniformValue("uMinArcHeight",e.minArcHeight),this.registerMarkUniformValue("uMinPickingSize",e.minPickingSize),this.registerMarkUniformValue("uShape",e.linkShape,t=>y3.indexOf(t)),this.registerMarkUniformValue("uOrient",e.orient,t=>C3.indexOf(t)),this.registerMarkUniformValue("uClampApex",e.clampApex,t=>!!t),this.registerMarkUniformValue("uMaxChordLength",e.maxChordLength),this.registerMarkUniformValue("uSegmentBreaks",e.segments,t=>t),this.registerMarkUniformValue("uNoFadingOnPointSelection",e.noFadingOnPointSelection,t=>!!t)}updateGraphicsData(){const e=this.unitView.getCollector();if(!e){console.debug("No collector");return}const t=e.getItemCount(),i=new qD({encoders:this.encoders,attributes:this.getAttributes(),numItems:t});i.addBatches(e.facetBatches);const r=i.toArrays();this.rangeMap.migrateEntries(r.rangeMap),this.arrays=Object.fromEntries(Object.entries(r.arrays).map(([s,o])=>[s,{...o,data:void 0}])),this.updateBufferInfo(r)}prepareRender(e){const t=super.prepareRender(e);return t.push(()=>this.bindOrSetMarkUniformBlock()),this._baseInstanceExt?t.push(()=>ii(this.gl,this.programInfo,this.vertexArrayInfo)):t.push(()=>this.gl.bindVertexArray(null)),t}render(e){const t=this.gl,i=()=>(this.markUniformInfo.uniforms.uSegmentBreaks[0]+1)*2;return this._baseInstanceExt?this.createRenderCallback((r,s)=>{this._baseInstanceExt.drawArraysInstancedBaseInstanceWEBGL(t.TRIANGLE_STRIP,0,i(),s,r)},e):this.createRenderCallback((r,s)=>{for(const o of Object.entries(this.bufferInfo.attribs)){const[a,l]=o;l.buffer&&l.numComponents&&l.divisor&&(l.offset=r*this.arrays[a].numComponents*this.bytesPerElement.get(a))}ii(t,this.programInfo,this.bufferInfo),t.drawArraysInstanced(t.TRIANGLE_STRIP,0,i(),s)},e)}}const b3=`in mediump vec2 vertexCoord;
in lowp vec2 textureCoord;

// Width of the text (all letters)
in float width;

out vec2 vTexCoord;
out float vEdgeFadeOpacity;
flat out vec4 vColor;
flat out float vSlope;
flat out float vGamma;

struct RangeResult {
    float pos;
    float scale;
};

float minValue(vec4 v) {
    return min(min(v.x, v.y), min(v.z, v.w));
}

float maxValue(vec4 v) {
    return max(max(v.x, v.y), max(v.z, v.w));
}

/**
 * All measures are in [0, 1]
 */
RangeResult positionInsideRange(float a, float b, float width, float padding,
                                int align, bool flush) {
    float span = b - a;
    float paddedWidth = width + 2.0 * padding;

    // Is the text clearly outside the viewport
    if (a > 1.0 || b < 0.0) {
        return RangeResult(0.0, 0.0);
    }

    // How much extra space we have for adjusting the position so that the
    // text stays inside the range.
    float extra = max(0.0, span - paddedWidth);

    float pos;

    // Align the text and try to keep it inside the range and the viewport
    if (align == 0) {
        float centre = a + b;

        if (flush) {
            float leftOver = max(0.0, paddedWidth - centre);
            centre += min(leftOver, extra);

            float rightOver = max(0.0, paddedWidth + centre - 2.0);
            centre -= min(rightOver, extra);
        }

        pos = centre / 2.0;

    } else if (align < 0) {
        float edge = a;

        if (flush) {
            float over = max(0.0, -edge);
            edge += min(over, extra);
        }

        pos = edge + padding;

    } else {
        float edge = b;

        if (flush) {
            float over = max(0.0, edge - 1.0);
            edge -= min(over, extra);
        }

		// TODO: If the text spans the whole viewport, try to keep it centered if possible.

        pos = edge - padding;
    }

    // How the text should be scaled to make it fit inside the range (if it didn't fit).
    float scale = clamp((span - padding) / paddedWidth, 0.0, 1.0);

    // TODO: Fix padding in scale factor. Padding should stay constant
    return RangeResult(pos, scale);
}

vec2 calculateRotatedDimensions(float width, mat2 rotationMatrix) {
    vec2 a = abs(rotationMatrix * vec2(width / 2.0, 0.5));
    vec2 b = abs(rotationMatrix * vec2(width / 2.0, -0.5));
    return vec2(max(a.x, b.x), max(a.y, b.y)) * 2.0;
}

/** Needed when using ranged text */
ivec2 fixAlignForAngle(ivec2 align, float angleInDegrees) {
    float a = mod(angleInDegrees + 45.0, 360.0);
    int x = align.x;
    int y = -align.y;

    // TODO: Optimize by avoiding branching
    if (a < 90.0) {
        return ivec2(x, y);
    } else if (a < 180.0) {
        return ivec2(y, -x);
    } else if (a < 270.0) {
        return ivec2(-x, y);
    } else {
        return ivec2(-y, x);
    }
}

void main(void) {
    float opacity = getScaled_opacity() * uViewOpacity;
    vec2 size = vec2(getScaled_size());
    float x = getScaled_x();
    float y = getScaled_y();

    float scale = 1.0;

	float angleInDegrees = getScaled_angle();
	float angle = -angleInDegrees * PI / 180.0;
	
    float sinTheta = sin(angle);
    float cosTheta = cos(angle);
    mat2 rotationMatrix = mat2(cosTheta, sinTheta, -sinTheta, cosTheta);

    vec2 flushSize = calculateRotatedDimensions(width, rotationMatrix);

#if defined(x2_DEFINED) || defined(y2_DEFINED)
    ivec2 align = fixAlignForAngle(uAlign, angleInDegrees);
#else
    ivec2 align = uAlign;
#endif

#ifdef x2_DEFINED
    float x2 = getScaled_x2();

    if (uLogoLetter) {
        size.x = (x2 - x) * uViewportSize.x;
        x += (x2 - x) / 2.0;

    } else {
        float x2 = getScaled_x2();
        RangeResult result = positionInsideRange(
            min(x, x2), max(x, x2),
            size.x * scale * flushSize.x / uViewportSize.x, uPaddingX / uViewportSize.x,
            align.x, uFlushX);
        
        x = result.pos;
        scale *= result.scale;
    }
#endif

    // Position of the text origo 
    vec2 pos = applySampleFacet(vec2(x, y));

#ifdef y2_DEFINED
    float y2 = getScaled_y2();
    vec2 pos2 = applySampleFacet(vec2(x, y2));

    if (uLogoLetter) {
        size.y = (pos2.y - pos.y) * uViewportSize.y;
        pos.y += (pos2.y - pos.y) / 2.0;

    } else {
        RangeResult result = positionInsideRange(
            min(pos.y, pos2.y), max(pos.y, pos2.y),
            size.y * scale * flushSize.y / uViewportSize.y, uPaddingY / uViewportSize.y,
            align.y, uFlushY);
        
        pos.y = result.pos;
        scale *= result.scale;
    }
#endif

    if (scale < 1.0) {
        if (uSqueeze) {
            vec2 scaleFadeExtent = vec2(3.0, 6.0) / size;

            if (scale  < scaleFadeExtent[0]) {
                gl_Position = vec4(0.0);
                return;
            }

            size *= scale;
            opacity *= linearstep(scaleFadeExtent[0], scaleFadeExtent[1], scale);

        } else if (scale < 1.0) {
            // Eliminate the text
            gl_Position = vec4(0.0);
            return;
        }
    }

    // Position of the character vertex in relation to the text origo
    vec2 charPos = rotationMatrix * (vertexCoord * size + uD);

    // Position of the character vertex inside the unit viewport
    vec2 unitPos = pos + charPos / uViewportSize;

    gl_Position = unitToNdc(unitPos);

    // Controls antialiasing of the SDF
    vSlope = max(1.0, min(size.x, size.y) / uSdfNumerator * uDevicePixelRatio);

    vec3 color = getScaled_color();

    // Premultiply alpha
    vColor = vec4(color * opacity, opacity);

    // Do something like gamma correction for text when the color is close to black or white.
    vGamma = getGammaForColor(color);

    vTexCoord = textureCoord;

    // Edge fading. The implementation is simplistic and fails with primitives that
    // span the whole viewport. However, it works just fine with reasonable font sizes.
    // x: top, y: right, z: bottom, w: left
    if (maxValue(uViewportEdgeFadeDistance) > -pow(10.0, 10.0)) { // -Infinity would be nice
        vEdgeFadeOpacity = minValue(
            ((vec4(1.0, 1.0, 0.0, 0.0) + vec4(-1.0, -1.0, 1.0, 1.0) * unitPos.yxyx) *
                uViewportSize.yxyx - uViewportEdgeFadeDistance) / uViewportEdgeFadeWidth);
    } else {
        vEdgeFadeOpacity = 1.0;
    }

    setupPicking();
}
`,E3=`uniform sampler2D uTexture;

in vec2 vTexCoord;
in float vEdgeFadeOpacity;
flat in vec4 vColor;
flat in float vSlope;
flat in float vGamma;

out lowp vec4 fragColor;

float median(float r, float g, float b) {
    return max(min(r, g), min(max(r, g), b));
}

float getDist(vec2 uv) {
    vec3 c = texture(uTexture, uv).rgb;
    return 1.0 - median(c.r, c.g, c.b);
}

/**
 * Calculates the super-sampled distance to the edge.
 * This is used to avoid aliasing when rendering small text,
 * as mip-mapping cannot be used here.
 * The distance is averaged over a grid of n x n samples.
 */
float getSuperDist(vec2 uv) {
    vec2 dx = dFdx(uv);
    vec2 dy = dFdy(uv);

    float n = 2.0;

    float sum = 0.0;
    for (float x = 0.5; x < n; x++){
        for (float y = 0.5; y < n; y++) {
            sum += getDist(
                uv +
                x / n * dx +
                y / n * dy
            ); 
        }
    }

    return sum / (n * n);
}

void main() {
    float sigDist = getSuperDist(vTexCoord);

    float slope = vSlope;
    if (uLogoLetter) {
        // Using screen-space derivatives for logo letters because skewed aspect ratios
        // result in blurry edges otherwise. However, use of screen-space derivatives
        // results in crappy looking text with regular letters text.
        slope = 0.7 / length(vec2(dFdy(sigDist), dFdx(sigDist)));
    }

    float opa = clamp((sigDist - 0.5) * slope + 0.5, 0.0, 1.0);
    opa *= clamp(vEdgeFadeOpacity, 0.0, 1.0);

    opa = pow(opa, vGamma);

    fragColor = vColor * opa;

    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
}
`,I3=`layout(std140) uniform Mark {
    uniform mediump float uSdfNumerator;

    uniform mediump vec2 uD; // dx & dy

    uniform mediump vec4 uViewportEdgeFadeWidth;
    uniform mediump vec4 uViewportEdgeFadeDistance;
        
    uniform bool uSqueeze;
    uniform bool uLogoLetter;

    // x: -1, 0, 1 = left, center, right
    // y: -1, 0, 1 = top, middle, bottom 
    uniform lowp ivec2 uAlign;

    uniform mediump float uPaddingX;
    uniform bool uFlushX;
    uniform mediump float uPaddingY;
    uniform bool uFlushY;

#pragma markUniforms
};
`,B3={left:-1,center:0,right:1},v3={top:-1,middle:0,bottom:1,alphabetic:1};class S3 extends Ps{constructor(e){super(e),this.augmentDefaultProperties({x:.5,y:.5,x2:void 0,y2:void 0,text:"",size:11,color:"black",opacity:1,font:void 0,fontStyle:void 0,fontWeight:void 0,align:"center",baseline:"middle",dx:0,dy:0,angle:0,fitToBand:!1,squeeze:!0,paddingX:0,paddingY:0,flushX:!0,flushY:!0,logoLetters:!1,viewportEdgeFadeWidthTop:0,viewportEdgeFadeWidthRight:0,viewportEdgeFadeWidthBottom:0,viewportEdgeFadeWidthLeft:0,viewportEdgeFadeDistanceTop:-1/0,viewportEdgeFadeDistanceRight:-1/0,viewportEdgeFadeDistanceBottom:-1/0,viewportEdgeFadeDistanceLeft:-1/0}),this.font=this.properties.font?e.context.fontManager.getFont(this.properties.font,this.properties.fontStyle,this.properties.fontWeight):e.context.fontManager.getDefaultFont(),this.setupExprRefsNeedingGraphicsUpdate(["text","fitToBand","logoLetters"])}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","color","size","opacity","angle"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size","text","angle"]}fixEncoding(e){for(const t of $n)this.properties.fitToBand&&ju(e,t);return e}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(b3,E3,[I3])}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties,t=this.font.metrics.common.base*.35*(this.properties.logoLetters?.5:1);this.registerMarkUniformValue("uPaddingX",e.paddingX),this.registerMarkUniformValue("uPaddingY",e.paddingY),this.registerMarkUniformValue("uFlushX",e.flushX,i=>!!i),this.registerMarkUniformValue("uFlushY",e.flushY,i=>!!i),this.registerMarkUniformValue("uSqueeze",e.squeeze,i=>!!i),ws(this.markUniformInfo,{uAlign:[B3[e.align],v3[e.baseline]],uD:[e.dx,-e.dy],uLogoLetter:!!e.logoLetters,uSdfNumerator:t,uViewportEdgeFadeWidth:[e.viewportEdgeFadeWidthTop,e.viewportEdgeFadeWidthRight,e.viewportEdgeFadeWidthBottom,e.viewportEdgeFadeWidthLeft],uViewportEdgeFadeDistance:[e.viewportEdgeFadeDistanceTop,e.viewportEdgeFadeDistanceRight,e.viewportEdgeFadeDistanceBottom,e.viewportEdgeFadeDistanceLeft]})}updateGraphicsData(){const e=this.unitView.getCollector();if(!e){console.debug("No collector");return}const t=e.getData(),i=this.encoding,r=this.encoders.text;let s=0;const o="format"in i.text?He(i.text.format):c=>c;for(const c of t){const u=o(r(c)),f=le(u)?u:u===null?"":""+u;s+=f&&f.length||0}const a=new jD({encoders:this.encoders,attributes:this.getAttributes(),properties:this.properties,fontMetrics:this.font.metrics,numCharacters:Math.max(s,this.properties.minBufferSize||1024)});a.addBatches(e.facetBatches);const l=a.toArrays();this.rangeMap.migrateEntries(l.rangeMap),this.updateBufferInfo(l)}prepareRender(e){const t=super.prepareRender(e);return t.push(()=>{ni(this.programInfo,{uTexture:this.font.texture})}),t.push(()=>this.bindOrSetMarkUniformBlock()),t.push(()=>ii(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((i,r)=>wa(t,this.vertexArrayInfo,t.TRIANGLES,r,i),e)}}const Pp=1;function Wu(){let n=[0,1],e=[0,1],t=1,i=1,r=0,s=0,o=.5,a=0;const c=u=>(u+o-n[0])/t*i+e[0];return c.invert=u=>(u-e[0])/i*t+n[0]-o,c.domain=function(u){if(arguments.length){n=Bb(u),t=n[1]-n[0];const f=n[0]===0&&n[0]===0;if(t<Pp&&!f){t=Pp;const h=(n[0]+n[1])/2;n[0]=h-t/2,n[1]=h+t/2}return c}else return n.slice()},c.range=function(u){return arguments.length?(e=[...u],i=e[1]-e[0],c):e},c.numberingOffset=function(u){return arguments.length?(a=u,c):a},c.padding=function(u){return arguments.length?(s=u,r=Math.min(1,u),c):r},c.paddingInner=function(u){return arguments.length?(r=Math.min(1,u),c):r},c.paddingOuter=function(u){return arguments.length?(s=u,c):s},c.align=function(u){return arguments.length?(o=Math.max(0,Math.min(1,u)),c):o},c.step=()=>i/t,c.bandwidth=()=>c.step(),c.ticks=u=>{const f=c.align(),h=c.numberingOffset();return Fo(n[0]-f+h,n[1]-f+h,Math.min(u,Math.ceil(t))).filter(Number.isInteger).map(A=>A-a)},c.tickFormat=(u,f)=>{if(f)throw new Error("Index scale's tickFormat does not support a specifier!");const A=jn(n[0],n[1],Math.min(u,Math.ceil(t)))<1e5?He(","):He(".3s");return d=>A(d+a)},c.copy=()=>Wu().domain(n).range(e).paddingInner(r).paddingOuter(s).numberingOffset(a),c}const Xu=He(",d");function Q3(n){return n.chrom+":"+Xu(Math.floor(n.pos+1))}function D3(n,e){return n.chrom+":"+Xu(Math.floor(n.pos+1))+"-"+(n.chrom!=e.chrom?e.chrom+":":"")+Xu(Math.ceil(e.pos))}const Lp={dm6:`chr3R	32079331
chr3L	28110227
chr2R	25286936
chrX	23542271
chr2L	23513712
chrY	3667352
chr4	1348131
chrM	19524`,hg18:`chr1	247249719
chr2	242951149
chr3	199501827
chr4	191273063
chr5	180857866
chr6	170899992
chr7	158821424
chr8	146274826
chr9	140273252
chr10	135374737
chr11	134452384
chr12	132349534
chr13	114142980
chr14	106368585
chr15	100338915
chr16	88827254
chr17	78774742
chr18	76117153
chr19	63811651
chr20	62435964
chr21	46944323
chr22	49691432
chrX	154913754
chrY	57772954
chrM	16571`,hg19:`chr1	249250621
chr2	243199373
chr3	198022430
chr4	191154276
chr5	180915260
chr6	171115067
chr7	159138663
chr8	146364022
chr9	141213431
chr10	135534747
chr11	135006516
chr12	133851895
chr13	115169878
chr14	107349540
chr15	102531392
chr16	90354753
chr17	81195210
chr18	78077248
chr19	59128983
chr20	63025520
chr21	48129895
chr22	51304566
chrX	155270560
chrY	59373566
chrM	16571`,hg38:`chr1	248956422
chr2	242193529
chr3	198295559
chr4	190214555
chr5	181538259
chr6	170805979
chr7	159345973
chr8	145138636
chr9	138394717
chr10	133797422
chr11	135086622
chr12	133275309
chr13	114364328
chr14	107043718
chr15	101991189
chr16	90338345
chr17	83257441
chr18	80373285
chr19	58617616
chr20	64444167
chr21	46709983
chr22	50818468
chrX	156040895
chrY	57227415
chrM	16569`,mm9:`chr1	197195432
chr2	181748087
chr3	159599783
chr4	155630120
chr5	152537259
chr6	149517037
chr7	152524553
chr8	131738871
chr9	124076172
chr10	129993255
chr11	121843856
chr12	121257530
chr13	120284312
chr14	125194864
chr15	103494974
chr16	98319150
chr17	95272651
chr18	90772031
chr19	61342430
chrX	166650296
chrY	15902555
chrM	16299`,mm10:`chr1	195471971
chr2	182113224
chr3	160039680
chr4	156508116
chr5	151834684
chr6	149736546
chr7	145441459
chr8	129401213
chr9	124595110
chr10	130694993
chr11	122082543
chr12	120129022
chr13	120421639
chr14	124902244
chr15	104043685
chr16	98207768
chr17	94987271
chr18	90702639
chr19	61431566
chrX	171031299
chrY	91744698
chrM	16299`};function k3(n){if(!(n in Lp))throw new Error(`Unknown assembly: ${n}`);return Lp[n].split(`
`).map(e=>{const t=e.split("	");return{name:t[0],size:parseInt(t[1])}})}const F3=/^([A-Za-z]+:)?\/\//;function Ai(n,e){if(e&&F3.test(e))return e;const t=typeof n=="function"?n():n;if(!t)return e;if(!e)return t;if(/[#?]/.test(t))throw new Error(`Cannot append to a url with query or hash. Append: ${e}, base: ${t}`);return Op(t)+e}function Op(n){const e=n.replace(/[^/]*$/,"");return e===""?void 0:e.endsWith("://")?n+"/":e}class R3{constructor(e){if(this.config={name:"custom",...e},"baseUrl"in e)throw new Error("The `baseUrl` property in genome config has been removed in GenomeSpy v0.52.0. Use `url` instead. See https://genomespy.app/docs/genomic-data/genomic-coordinates/.");if(!Zu(e))throw new Error("Not a genome configuration: "+JSON.stringify(e));if(this.chromosomes=[],this.cumulativeChromPositions=new Map,this.chromosomesByName=new Map,this.startByIndex=[],this.totalSize=0,Gp(this.config))this.setChromSizes(this.config.contigs);else if(!$u(this.config)){const t=k3(this.config.name);if(t)this.setChromSizes(t);else throw new Error(`Unknown genome: ${this.config.name}. Please provide contigs or a URL. See https://genomespy.app/docs/genomic-data/genomic-coordinates/.`)}}get name(){return this.config.name}async load(e){if($u(this.config))try{const t=Ai(e,this.config.url),i=await fetch(t);if(!i.ok)throw new Error(`${i.status} ${i.statusText}`);this.setChromSizes(M3(await i.text()))}catch(t){throw new Error(`Could not load chrom sizes: ${this.config.url}. Reason: ${t.message}`)}}hasChrPrefix(){return this.chromosomes.some(e=>e.name.startsWith("chr"))}setChromSizes(e){let t=0;this.startByIndex=[0];for(let i=0;i<e.length;i++){this.startByIndex.push(t);const r=e[i].size,s={...e[i],continuousStart:t,continuousEnd:t+r,continuousInterval:[t,t+r],index:i,number:i+1,odd:!(i&1)};this.chromosomes.push(s);const o=s.name.replace(/^chr/i,"");for(const a of["chr"+o,"CHR"+o,"Chr"+o,s.number,""+s.number,o,s.name])this.cumulativeChromPositions.set(a,t),this.chromosomesByName.set(a,s);t+=s.size}this.totalSize=t}getExtent(){return[0,this.totalSize]}toContinuous(e,t){let i=this.cumulativeChromPositions.get(e);if(i===void 0)throw new Error("Unknown chromosome/contig: "+e);return i+ +t}toChromosome(e){if(e>this.totalSize)return;e=Math.floor(e);const t=pn(this.startByIndex,e)-1;if(t>0&&t<=this.chromosomes.length)return this.chromosomes[t-1]}toChromosomal(e){const t=this.toChromosome(e);if(t)return{chrom:t.name,pos:Math.floor(e)-t.continuousStart}}getChromosome(e){return this.chromosomesByName.get(e)}formatInterval(e){return D3(...this.toChromosomalInterval(e))}formatLocus(e){const t=this.toChromosomal(e);if(t)return Q3(t)}toChromosomalInterval(e){const t=this.toChromosomal(e[0]+.5),i=this.toChromosomal(e[1]-.5);return i.pos+=1,[t,i]}toContinuousInterval(e){let[t,i]=e;return i||(i=t),[this.toContinuous(t.chrom,t.pos??0),this.toContinuous(i.chrom,i.pos??this.chromosomesByName.get(i.chrom)?.size)]}toDiscreteChromosomeIntervals(e){const t=e[0],i=e[1],r=[];if(t.chrom===i.chrom)r.push({chrom:t.chrom,startPos:t.pos,endPos:i.pos});else{const s=this.chromosomes.findIndex(a=>a.name===t.chrom),o=this.chromosomes.findIndex(a=>a.name===i.chrom);r.push({chrom:t.chrom,startPos:t.pos,endPos:this.chromosomes[s].size});for(let a=s+1;a<o;a++)r.push({chrom:this.chromosomes[a].name,startPos:0,endPos:this.chromosomes[a].size});r.push({chrom:i.chrom,startPos:0,endPos:i.pos})}return r}continuousToDiscreteChromosomeIntervals(e){return this.toDiscreteChromosomeIntervals([this.toChromosomal(e[0]),this.toChromosomal(e[1])])}parseInterval(e){const t=e.match(/^(chr[0-9A-Z]+)(?::([0-9,]+)(?:-(?:(chr[0-9A-Z]+):)?([0-9,]+))?)?$/);if(t){const i=t[1];if(t.slice(2).every(a=>a===void 0)){const a=this.getChromosome(i);return a?[a.continuousStart,a.continuousEnd]:void 0}const r=t[3]||i,s=parseInt(t[2].replace(/,/g,"")),o=t[4]!==void 0?parseInt(t[4].replace(/,/g,"")):s;return[this.toContinuous(i,s-1),this.toContinuous(r,o)]}}}function M3(n){return fb(n).map(([e,t])=>({name:e,size:parseInt(t)}))}function Up(n){return ze(n)&&"chrom"in n}function N3(n){return n.every(Up)}function Zu(n){return ze(n)&&("name"in n||$u(n)||Gp(n))}function $u(n){return Zu(n)&&"url"in n}function Gp(n){return Zu(n)&&"contigs"in n}function T3(){const n=Wu().numberingOffset(1);let e;n.genome=function(i){return arguments.length?(e=i,n):e},n.ticks=i=>{if(!e)return[];const r=n.domain(),s=n.numberingOffset(),[o,a]=[Math.max(r[0],0),Math.min(r[1],e.totalSize-1)].map(u=>e.toChromosome(u)),l=Math.max(1,jn(r[0],r[1],i)),c=[];for(let u=o.index;u<=a.index;u++){const f=e.chromosomes[u],h=Math.max(f.continuousStart+l,r[0]-(r[0]-f.continuousStart)%l),A=Math.min(f.continuousEnd-l/4,r[1]+1);for(let d=h;d<=A;d+=l){const g=d-s;g>=r[0]&&g<r[1]&&c.push(g)}}return c},n.tickFormat=(i,r)=>{if(!e)return;if(r)throw new Error("Locus scale's tickFormat does not support a specifier!");const s=n.domain(),o=s[1]-s[0],a=n.numberingOffset(),c=jn(s[0],s[1],Math.min(i,Math.ceil(o)))<1e6?He(","):He(".3s"),u=f=>f-e.toChromosome(f).continuousStart;return f=>c(u(f)+a)};const t=n.copy;return n.copy=()=>{const i=t();let r=e;return i.genome=function(s){return arguments.length?(r=s,i):r},i.genome(e)},n}function P3(n){return n.type=="locus"}function L3(n,e){const t=Ls(n);return t?t.toChromosomal(e):e}function O3(n,e){const t=Ls(n);return t&&Up(e)?t.toContinuous(e.chrom,e.pos):e}function U3(n,e){const t=Ls(n);return t&&N3(e)?t.toContinuousInterval(e):e}function G3(n,e){const t=Ls(n);return t?t.toChromosomalInterval(e):e}function z3(n){const e=Ls(n);if(!e)throw new Error("No genome has been defined!");return e.getExtent()}function Ls(n){if(n&&"toChromosomal"in n)return n;if(n&&"genome"in n)return n.genome()}function zp(n,e,t){return Ye(e)&&t!=null&&(e=Math.min(e,~~(Pr(n.domain())/t)||1)),ze(e)&&(e.step,e=e.interval),e}function Hp(n,e,t){var i=n.range(),r=Math.floor(i[0]),s=Math.ceil(bt(i));if(r>s&&(i=s,s=r,r=i),e=e.filter(function(a){return a=n(a),r<=a&&a<=s}),t>0&&e.length>1){for(var o=[e[0],bt(e)];e.length>t&&e.length>=3;)e=e.filter(function(a,l){return!(l%2)});e.length<3&&(e=o)}return e}function H3(n,e){return n.bins?Hp(n,_3(n.bins,e)):n.ticks?n.ticks(e):n.domain()}function _3(n,e){var t=n.length,i=~~(t/(e||t));return i<2?n.slice():n.filter(function(r,s){return!(s%i)})}function V3(n,e,t){var i=n.tickFormat?n.tickFormat(e,t):t?He(t):String;if(lp(n.type)){var r=J3(t);i=n.bins?r:Y3(i,r)}return i}function Y3(n,e){return function(t){return n(t)?e(t):""}}function J3(n){var e=Ri(n||",");if(e.precision==null){switch(e.precision=12,e.type){case"%":e.precision-=2;break;case"e":e.precision-=1;break}return K3(He(e),He(".1f")(1)[1])}else return He(e)}function K3(n,e){return function(t){var i=n(t),r=i.indexOf(e),s,o;if(r<0)return i;for(s=q3(i,r),o=s<i.length?i.slice(s):"";--s>r;)if(i[s]!=="0"){++s;break}return i.slice(0,s)+o}}function q3(n,e){var t=n.lastIndexOf("e"),i;if(t>0)return t;for(t=n.length;--t>e;)if(i=n.charCodeAt(t),i>=48&&i<=57)return t+1}const j3="locus",W3="index";var X3=5;function Z3(n){const e=n.type;return!n.bins&&(e===er||e===Is||e===Bs)}function _p(n){return Pe(n)&&![Gt,W3,j3].includes(n)}function Vp(n){return n||{warn:(e,...t)=>console.warn(e,...t)}}var $3=Io(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma","zoom","fp64","name"]);function Yp(n,e,t){t=Vp(t);for(const r in n)if(!$3[r]){if(r==="padding"&&_p(e.type))continue;At(e[r])?e[r](n[r]):t.warn("Unsupported scale property: "+r)}const i=Jp(e,n,t);i.domain&&e.domain(i.domain),i.applyOrdinalUnknown&&e.unknown(i.ordinalUnknown),ak(e,n,ok(e,n,i.count))}function ek(n,e){const t=tk(n),i=ie(t);if(!i)throw new Error("Unknown scale type: "+t);const r=i();return!n.domain&&Pe(r.type)&&(n.domain=[0,0]),Yp(n,r,e),r}function tk(n){var e=n.type,t="",i;return e===Gt?Gt+"-"+er:(nk(n)&&(i=n.rawDomain?n.rawDomain.length:n.domain?n.domain.length+ +(n.domainMid!=null):0,t=i===2?Gt+"-":i===3?tr+"-":""),(t+e||er).toLowerCase())}function nk(n){const e=n.type;return Pe(e)&&e!==tp&&e!==np&&(n.scheme||n.range&&n.range.length&&n.range.every(le))}function ik(n){if(!n.copy)return n;const e=n.copy();return e.type==null&&n.type!=null&&(e.type=n.type),e}function Jp(n,e,t){if(!n.domain)return{domain:null,count:0,ordinalUnknown:void 0,applyOrdinalUnknown:!1};t=Vp(t);const i=ik(n);var r=rk(i,e.domainRaw,t);if(r>-1)return{domain:i.domain(),count:r,ordinalUnknown:i.type===vs&&e.domainImplicit?Ca:void 0,applyOrdinalUnknown:!1};var s=e.domain,o=i.type,a=e.zero||e.zero===void 0&&Z3(i),l,c;return s?(_p(o)&&e.padding&&s[0]!==bt(s)&&(s=sk(o,s,e.range,e.padding,e.exponent,e.constant)),(a||e.domainMin!=null||e.domainMax!=null||e.domainMid!=null)&&(l=(s=s.slice()).length-1||1,a&&(s[0]>0&&(s[0]=0),s[l]<0&&(s[l]=0)),e.domainMin!=null&&(s[0]=e.domainMin),e.domainMax!=null&&(s[l]=e.domainMax),e.domainMid!=null&&(c=e.domainMid,(c<s[0]||c>s[l])&&t.warn("Scale domainMid exceeds domain min or max.",c),s.splice(l,0,c))),i.domain(Kp(o,s,t)),e.nice&&i.nice&&i.nice(e.nice!==!0&&zp(i,e.nice)||null),{domain:i.domain(),count:s.length,ordinalUnknown:o===vs&&e.domainImplicit?Ca:void 0,applyOrdinalUnknown:o===vs}):{domain:null,count:0,ordinalUnknown:void 0,applyOrdinalUnknown:!1}}function rk(n,e,t){return e?(n.domain(Kp(n.type,e,t)),e.length):-1}function sk(n,e,t,i,r,s){t??=[0,1];var o=Math.abs(bt(t)-t[0]),a=o/(o-2*i),l=n===Rn?_A(e,null,a):n===Bs?Lc(e,null,a,.5):n===Is?Lc(e,null,a,r||1):n===Ma?Bx(e,null,a,s||1):HA(e,null,a);return e=e.slice(),e[0]=l[0],e[e.length-1]=l[1],e}function Kp(n,e,t){if(lp(n)){var i=Math.abs(e.reduce(function(r,s){return r+(s<0?-1:s>0?1:0)},0));i!==e.length&&t.warn("Log scale domain includes zero: "+Uc(e))}return e}function ok(n,e,t){let i=e.bins;if(i&&!xe(i)){const r=(i.start==null||i.stop==null)&&n.domain(),s=i.start==null?r[0]:i.start,o=i.stop==null?bt(r):i.stop,a=i.step;a||Ee("Scale bins parameter missing step property."),i=Kr(s,o+a,a)}return i?n.bins=i:n.bins&&delete n.bins,n.type===Gu&&(i?!e.domain&&!e.domainRaw&&(n.domain(i),t=i.length):n.bins=n.domain()),t}function ak(n,e,t){var i=n.type,r=e.round||!1,s=e.range;if(e.rangeStep!=null)s=ck(i,e,t);else if(e.scheme&&(s=lk(i,e,t),At(s))){if(n.interpolator)return n.interpolator(s);Ee(`Scale type ${i} does not support interpolating color schemes.`)}if(s&&Ta(i))return n.interpolator(Pa(ef(s,e.reverse),e.interpolate,e.interpolateGamma));s&&e.interpolate&&n.interpolate?n.interpolate(up(e.interpolate,e.interpolateGamma)):At(n.round)?n.round(r):At(n.rangeRound)&&n.interpolate(r?bs:kn),s&&n.range(ef(s,e.reverse))}function ck(n,e,t){n!==sp&&n!==Uu&&Ee("Only band and point scales support rangeStep.");var i=(e.paddingOuter!=null?e.paddingOuter:e.padding)||0,r=n===Uu?1:(e.paddingInner!=null?e.paddingInner:e.padding)||0;return[0,e.rangeStep*Lu(t,r,i)]}function lk(n,e,t){var i=e.schemeExtent,r,s;return xe(e.scheme)?s=Pa(e.scheme,e.interpolate,e.interpolateGamma):(r=e.scheme.toLowerCase(),s=Hu(r),s||Ee(`Unrecognized scheme name: ${e.scheme}`)),t=n===rp?t+1:n===Gu?t-1:n===Ou||n===ip?+e.schemeCount||X3:t,Ta(n)?qp(s,i,e.reverse):At(s)?gD(qp(s,i),t):n===vs?s:s.slice(0,t)}function qp(n,e,t){return At(n)&&(e||t)?dD(n,ef(e||[0,1],t)):n}function ef(n,e){return e?n.slice().reverse():n}class uk{#e;#t=new Set;#n;#i;#s;#o;#r=0;constructor({getParamRuntime:e,onRangeChange:t,onDomainChange:i,getGenomeStore:r}){this.#n=e,this.#i=t,this.#s=i,this.#o=r}get scale(){return this.#e}getLocusGenome(){const t=this.#o?.()?.getGenome();if(!t)throw new Error("No genome has been defined!");return t}createScale(e){const t=ek({...this.#c(e),range:void 0});return t.props=e,"unknown"in t&&t.unknown(null),this.#e=t,this.#a(e),this.#l(),this.#u(),this.#e}#a(e){const t=this.#e;if(!t||!P3(t))return;const r=this.#o?.()?.getGenome(e.assembly);if(!r)throw new Error("No genome has been defined!");t.genome(r)}reconfigureScale(e){const t=this.#e;!t||t.type=="null"||(Yp({...this.#c(e),range:void 0},t),t.props=e,this.#l())}withDomainNotificationsSuppressed(e){this.#r+=1;try{e()}finally{this.#r-=1}}#c(e){const t=e,{assembly:i,domainIndexer:r,...s}=t;return s}#l(){const e=this.#e;if(!e)return;const t=e.props;this.#t.forEach(s=>s.invalidate()),this.#t.clear();const i=Ak({range:t.range,reverse:t.reverse,createExpression:s=>this.#n().createExpression(s),registerExpr:s=>this.#t.add(s)});if(!i)return;if("values"in i){e.range(i.values);return}const r=()=>e.range(i.evaluate());i.setup(r),r()}#u(){const e=this.#e;if(!e)return;const t=e.range,i=e.domain,r=()=>this.#i?.();fk(e,{onRangeChange:r,onDomainChange:()=>{this.#r>0||this.#s?.()},range:t,domain:i}),r()}dispose(){this.#t.forEach(e=>e.invalidate()),this.#t.clear()}}function fk(n,{onRangeChange:e,onDomainChange:t,range:i,domain:r}){typeof i=="function"&&(n.range=(function(s){if(arguments.length)i(s),e?.();else return i()})),typeof r=="function"&&(n.domain=(function(s){if(arguments.length)r(s),t?.();else return r()}))}function Ak({range:n,reverse:e,createExpression:t,registerExpr:i}){if(!n||!xe(n))return null;const r=(s,o)=>o?s.slice().reverse():s;if(n.some(be)){let s;return{dynamic:!0,evaluate:()=>r(s.map(l=>l()),e),setup:l=>{s=n.map(c=>{if(be(c)){const u=t(c.expr);return u.subscribe(l),i(u),()=>u(null)}return()=>c})}}}return{dynamic:!1,values:r(n,e)}}function za(n,e,t){if(t=t||[],n.some(o=>o===null)){if(n.every(o=>o===null))return null;throw console.warn(n),new Error("Cannot merge objects with nulls!")}const i={},r=(o,a)=>o===a||rr(o)&&rr(a)||rr(o)&&a===!0||o===!0&&ze(a)||Array.isArray(o)&&Array.isArray(a)&&o.length===a.length&&o.every((l,c)=>l===a[c]),s=o=>{for(let a in o){const l=o[a];if(!t.includes(a)&&l!==void 0)if(i[a]!==void 0&&!r(i[a],l))console.warn(`Conflicting property ${a} of ${e}: (${JSON.stringify(i[a])} and ${JSON.stringify(o[a])}). Using ${JSON.stringify(i[a])}.`);else{const c=i[a];if(rr(c))rr(l)&&(i[a]=za([c,l],a));else if(rr(l)){if(!(c===!0||c===void 0))throw new Error("Bug in merge! Target is: "+c);i[a]=za([{},l],a)}else i[a]=l}}};for(const o of n)s(o);return i}function rr(n){return ze(n)&&!Array.isArray(n)}const jp="quantitative",Wp="ordinal",Xp="nominal",Os="locus",Zp="index";function hk(n,e,t){const i={};return t&&(i.zero=!1),us(n)?i.nice=!t:Cn(n)?i.scheme=e==Xp?"tableau10":e==Wp?"blues":"viridis":qo(n)?i.range=n=="shape"?["circle","square","triangle-up","cross","diamond"]:[]:n=="size"?i.range=[0,400]:n=="angle"&&(i.range=[0,360]),i}function dk(n,e){if(e==Zp||e==Os){if(xl(n))return e;throw new Error(n+" does not support "+e+" data type. Only positional channels do.")}const t={x:["band","band","linear"],y:["band","band","linear"],size:[void 0,"point","linear"],opacity:[void 0,"point","linear"],fillOpacity:[void 0,"point","linear"],strokeOpacity:[void 0,"point","linear"],color:["ordinal","ordinal","linear"],fill:["ordinal","ordinal","linear"],stroke:["ordinal","ordinal","linear"],strokeWidth:[void 0,void 0,"linear"],shape:["ordinal","ordinal",void 0],dx:[void 0,void 0,"null"],dy:[void 0,void 0,"null"],angle:[void 0,void 0,"linear"],sample:["null",void 0,void 0]},r=["sample"].includes(n)?"null":t[n]?t[n][[Xp,Wp,jp].indexOf(e)]:e==jp?"linear":"ordinal";if(r===void 0)throw new Error('Channel "'+n+'" is not compatible with "'+e+'" data type. Use of a proper scale may be needed.');return r}function gk(n,e){us(e)&&n.type!=="ordinal"&&(n.range=[0,1]),e=="opacity"&&Pe(n.type)&&(n.clamp=!0)}function pk({channel:n,dataType:e,members:t,isExplicitDomain:i}){const r=Array.from(t).map(a=>a.channelDef.scale).filter(a=>a!==void 0),s=za(r,"scale",["domain"]);if(s===null||s.type=="null")return{type:"null"};const o={...hk(n,e,i),...s};return o.type||(o.type=dk(n,e)),n=="y"&&nn(o.type)&&o.reverse==null&&(o.reverse=!0),o.range&&o.scheme&&delete o.scheme,!("zoom"in o)&&[Zp,Os].includes(o.type)&&(o.zoom=!0),gk(o,n),o}class Us extends Array{constructor(){super(),this.type=void 0}extend(e){return this}extendAll(e){if(e instanceof Us&&e.type!=this.type)throw new Error(`Cannot combine different types of domains: ${this.type} and ${e.type}`);for(const t of e)this.extend(t);return this}extendAllWithAccessor(e,t){for(const i of e)this.extend(t(i));return this}}class tf extends Us{constructor(){super(),this.type="quantitative"}extend(e){return e==null||Number.isNaN(e)?this:(e=+e,this.length?e<this[0]?this[0]=e:e>this[1]&&(this[1]=e):(this.push(e),this.push(e)),this)}}class $p extends Us{constructor(){super(),this.type="ordinal",this.uniqueValues=new Set}extend(e){return e==null||Number.isNaN(e)?this:(this.uniqueValues.has(e)||(this.uniqueValues.add(e),this.push(e)),this)}}class nf extends $p{constructor(){super(),this.type="nominal"}}class mk extends Us{constructor(e){super();let t=0;for(let i=1;i<e.length;i++)t+=Math.sign(e[i]-e[i-1]);if(Math.abs(t)!=e.length-1)throw new Error("Piecewise domain must be strictly increasing or decreasing: "+JSON.stringify(e));e.forEach(i=>this.push(i))}extend(e){if(this.includes(e))return this;throw new Error("Piecewise domains are immutable and cannot be unioned!")}}const em={quantitative:tf,index:tf,locus:tf,nominal:nf,ordinal:$p};function Ha(n,e){if(n=="quantitative"&&wk(e)){const t=new mk(e);return t.type=n,t}else if(em[n]){const t=new em[n];return t.type=n,e&&t.extendAll(e),t}throw new Error("Unknown type: "+n)}function wk(n){return n&&n.length>0&&n.length!=2&&n.every(e=>typeof e=="number")}class yk{#e;#t;#n;#i;#s;#o;#r;#a=!0;#c=new WeakMap;constructor({getMembers:e,getDataMembers:t,getType:i,getLocusExtent:r,fromComplexInterval:s}){this.#e=e,this.#t=t??e,this.#n=i,this.#i=r,this.#s=s}get initialDomainSnapshot(){return this.#o}hasConfiguredDomain(){return!!this.getConfiguredDomain()}invalidateConfiguredDomain(){this.#a=!0}getConfiguredOrDefaultDomain(e=!1){return this.getConfiguredDomain()??bk(this.#n(),this.#i,e?this.getDataDomain():void 0)}getConfiguredDomain(){if(!this.#a)return this.#r;const e=Ck(this.#e(),this.#s);return this.#r=e,this.#a=!1,e}getDataDomain(){return xk(this.#t(),this.#n,e=>this.#l(e))}captureInitialDomain(e,t){if(!this.#o&&Pe(e.type)){const i=e.domain();Pr(i)>0&&(this.#o=i)}return t?!1:(this.#o=e.domain(),!0)}#l(e){const t=this.#c.get(e);if(t)return t;const i=e.view.mark.encoders;if(!i)return[];const r=i[e.channel];if(!r)return[];const s=r.accessors??[];if(s.length===0)return[];const o=s.filter(hd).filter(a=>!a.channelDef.domainInert);return this.#c.set(e,o),o}}function Ck(n,e){const t=Array.from(n).filter(i=>i.contributesToDomain).map(i=>i.channelDef).filter(i=>i.scale?.domain).map(i=>Ha(i.type,e(i.scale.domain)));if(t.length>0)return t.reduce((i,r)=>i.extendAll(r))}function xk(n,e,t){const i=e(),r=new Map;for(const o of n){if(!o.contributesToDomain)continue;const a=t(o);if(a.length===0)continue;const l=o.view.getCollector();for(const c of a){const u=gd(c,i),f=l??null;let h=r.get(f);if(h||(h=new Map,r.set(f,h)),h.has(u))continue;let A;if(l)A=l.getDomain(u,i,c);else if(c.constant)A=Ha(i),A.extend(c({}));else continue;h.set(u,A)}}if(r.size===0)return;const s=Ha(i);for(const o of r.values())for(const a of o.values())s.extendAll(a);return s}function bk(n,e,t){return n==Os?e():t??[]}function Ek(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}function Ik(n,e,t){return n*Math.pow(e/n,t)}const Bk=n=>new Promise(e=>setTimeout(e,n));function vk(){return{canceled:!1}}function Sk(n){const e=n.requestAnimationFrame||window.requestAnimationFrame,t=n.signal,i=n.cancelToken,r=()=>new Promise((s,o)=>{if(i?.canceled)return s();if(t?.aborted)return o("aborted");const a=performance.now(),l=a+(n.duration||1e3),c=typeof n.from=="number"?n.from:0,u=typeof n.to=="number"?n.to:1,f=n.easingFunction||(p=>p),h=p=>(p-a)/(l-a),A=p=>p*(u-c)+c,d=p=>Math.max(0,Math.min(1,p)),g=p=>{if(i?.canceled){s();return}t?.aborted?o("aborted"):(n.onUpdate(A(f(d(h(p))))),p<l?e(g):(n.onUpdate(A(f(1))),s()))};e(g)});return n.delay?i?.canceled?Promise.resolve():t?.aborted?Promise.reject("aborted"):Bk(n.delay).then(r):r()}class Qk{#e;#t;#n;#i;#s;#o;#r=null;constructor({getScale:e,getAnimator:t,getInitialDomainSnapshot:i,getResetDomain:r,fromComplexInterval:s,getGenomeExtent:o}){this.#e=e,this.#t=t,this.#n=i,this.#i=r,this.#s=s,this.#o=o}getZoomExtent(){const e=this.#e(),t=e.props.zoom;return Dk(e,t,this.#s,this.#o,this.#n)}isZoomable(){return this.isZoomingSupported()&&!!this.#e().props.zoom}isZoomingSupported(){const e=this.#e().type;return Pe(e)&&!nn(e)}getDomainChangeAction(e,t){return Li(t,e)?"none":this.isZoomable()?"restore":this.isZoomingSupported()?"animate":"notify"}isZoomed(){return this.isZoomingSupported()&&Li(this.#i(),this.#e().domain())}zoom(e,t,i){if(!this.isZoomingSupported())return!1;const r=this.#e(),s=r.domain();let o=kk(r,s,e,t,i);const a=this.getZoomExtent();return o=vx(o,a[0],a[1]),[0,1].some(l=>o[l]!=s[l])?(r.domain(o),!0):!1}async zoomTo(e,t=!1){if(Tr(t)&&(t=t?700:0),!this.isZoomingSupported())throw new Error("Not a zoomable scale!");const i=this.#s(e),r=this.#t(),s=this.#e(),o=s.domain();if(t>0&&o.length==2){const a=o[1]-o[0],l=i[1]-i[0],c=o[0]+a/2,u=i[0]+l/2,f=o[0]==i[0],h=o[1]==i[1];this.#a();const A=vk();this.#r=A,await r.transition({duration:t,easingFunction:Ek,cancelToken:A,onUpdate:d=>{const g=Ik(a,l,d),p=a==l?d:(a-g)/(a-l),m=p*u+(1-p)*c,y=[f?o[0]:m-g/2,h?o[1]:m+g/2];s.domain(y)}}),this.#r===A&&(this.#r=null),s.domain(i)}else this.#a(),s.domain(i),r?.requestRender()}#a(){this.#r&&(this.#r.canceled=!0,this.#r=null)}resetZoom(){if(!this.isZoomingSupported())throw new Error("Not a zoomable scale!");const e=this.#e(),t=e.domain(),i=this.#i();return[0,1].some(r=>i[r]!=t[r])?(e.domain(i),!0):!1}getZoomLevel(){return this.isZoomable()?Pr(this.getZoomExtent())/Pr(this.#e().domain()):1}}function Dk(n,e,t,i,r){return Fk(e)&&xe(e.extent)?t(e.extent):e&&n.props.type=="locus"?i():r()}function kk(n,e,t,i,r){let s=[...e],o=n.invert(i);switch(n.props.reverse&&(r=-r),"align"in n&&(o+=n.align()),n.type){case"linear":case"index":case"locus":s=bx(s,r||0),s=HA(s,o,t);break;case"log":s=Ex(s,r||0),s=_A(s,o,t);break;case"pow":case"sqrt":{const a=n;s=Ix(s,r||0,a.exponent()),s=Lc(s,o,t,a.exponent());break}default:throw new Error("Zooming is not implemented for: "+n.type)}return s}function Fk(n){return ze(n)}ie("index",Wu,["continuous"]),ie("locus",T3,["continuous"]),ie("null",_u,[]);class Rk{#e=new Set;#t=new Set;#n={domain:new Set,range:new Set};#i;#s;#o;#r;#a=!1;constructor(e){this.channel=e,this.type=null,this.name=void 0,this.#s=new yk({getMembers:()=>this.#l(),getDataMembers:()=>this.#l(this.#t),getType:()=>this.type,getLocusExtent:()=>this.#f(),fromComplexInterval:this.fromComplexInterval.bind(this)}),this.#i=new uk({getParamRuntime:()=>this.#c.paramRuntime,onRangeChange:()=>this.#h("range"),onDomainChange:()=>this.#h("domain"),getGenomeStore:()=>this.#u.genomeStore}),this.#o=new Qk({getScale:()=>this.getScale(),getAnimator:()=>this.#u.animator,getInitialDomainSnapshot:()=>this.#s.initialDomainSnapshot,getResetDomain:()=>this.#s.getConfiguredOrDefaultDomain(),fromComplexInterval:this.fromComplexInterval.bind(this),getGenomeExtent:()=>this.#f()})}get#c(){const e=this.#e.values().next().value;if(!e)throw new Error("ScaleResolution has no members!");return e.view}#l(e=this.#e){const t=new Set;for(const i of e){const r=i.view;r.isConfiguredVisible()&&(!r.isDataInitialized()&&!i.channelDef?.scale?.domain||t.add(i))}return t}get#u(){return this.#c.context}get zoomExtent(){return(this.#i.scale&&Pe(this.#i.scale.type)&&this.#o.getZoomExtent())??[-1/0,1/0]}#f(){return z3(this.#A())}#A(){if(this.type===Os)return this.#i.scale??this.#i.getLocusGenome()}addEventListener(e,t){this.#n[e].add(t)}removeEventListener(e,t){this.#n[e].delete(t)}#h(e){for(const t of this.#n[e].values())t({type:e,scaleResolution:this})}#d(e){const{channel:t,channelDef:i}=e,r=i.type==null&&this.type;if(t!="sample"&&!i.type&&!bl(t)&&!r)throw new Error(`The "type" property must be defined in channel definition: "${t}": ${JSON.stringify(i)}. Must be one of: "quantitative", "ordinal", "nominal", "locus", "index"`);const s=t=="sample"?"nominal":i.type,o=i?.scale?.name;if(o){if(this.name!==void 0&&o!=this.name)throw new Error(`Shared scales have conflicting names: "${o}" vs. "${this.name}"!`);this.name=o}if(!r){if(!this.type)this.type=s;else if(s!==this.type&&!bl(t))throw new Error(`Can not use shared scale for different data types: ${this.type} vs. ${s}. Use "resolve: independent" for channel ${this.channel}`)}this.#e.add(e),e.contributesToDomain&&this.#t.add(e),this.#s.invalidateConfiguredDomain()}registerMember(e){return this.#d(e),()=>{const t=this.#e.delete(e);return t&&(this.#t.delete(e),this.#s.invalidateConfiguredDomain()),t&&this.#e.size===0}}dispose(){this.#n.domain.clear(),this.#n.range.clear(),this.#i.dispose()}#g(){for(const e of this.#e)if(e.view.hasRendered())return!0;return!1}registerCollectorSubscriptions(e,t){const i=new Set;for(const o of t)o.channelDef.domainInert||i.add(gd(o,this.type));if(i.size===0)return()=>{};const r=()=>{this.reconfigureDomain()},s=[];for(const o of i)s.push(e.subscribeDomainChanges(o,r));return()=>{for(const o of s)o()}}#p(){return this.#s.hasConfiguredDomain()}#w(){const e=this.#i.scale;if(!e)return!1;const t=e.domain();return Pe(e.type)?t.length>2||t.length==2&&(t[0]!==0||t[1]!==0):t.length>0}#y(){return pk({channel:this.channel,dataType:this.type,members:this.#e,isExplicitDomain:this.#p()})}#m(e=!1){const t=this.#y();if(t===null||t.type=="null")return{type:"null"};const i=this.#s.getConfiguredOrDefaultDomain(e);if(nn(t.type)){const r=this.#p(),s=this.#C(r);if(i!=null){if(r&&s.domain().length>0&&!Li(s.domain(),i))return this.#r=void 0,this.#m(e);s.addAll(i);const o=new Set(i),a=s.domain().filter(l=>o.has(l));t.domain=a.length>0?a:new nf}else{const o=s.domain();t.domain=o.length>0?o:new nf}t.domainIndexer=s}else i&&i.length>0&&(t.domain=i);return!t.domain&&t.domainMid!==void 0&&(t.domain=[t.domainMin??0,t.domainMax??1]),t}#C(e){return(!this.#r||this.#a!==e)&&(this.#r=Sp(),this.#a=e),this.#r}reconfigure(){this.#s.invalidateConfiguredDomain();const e=this.#x(!0);e&&(this.#b(e,(t,i)=>this.#i.reconfigureScale(i)),this.#E(e))}reconfigureDomain(){const e=this.#x(!0,!0);if(!e)return;const{domainConfig:t,targetDomain:i}=e,r=i!=null&&Li(i,e.scale.domain());i!=null&&!r&&this.#b(e,s=>{s.domain(i),t.applyOrdinalUnknown&&s.unknown(t.ordinalUnknown)}),this.#E(e)}#x(e,t=!1){const i=this.#i.scale;if(!i||i.type=="null")return;const r={scale:i,props:this.#m(e),previousDomain:i.domain(),domainWasInitialized:this.#w()};if(t){const s=Jp(i,r.props);return{...r,domainConfig:s,targetDomain:s.domain}}return r}#b(e,t){this.#i.withDomainNotificationsSuppressed(()=>{t(e.scale,e.props)})}#E(e){const{scale:t,previousDomain:i,domainWasInitialized:r}=e;if(this.#s.captureInitialDomain(t,r)){this.#h("domain");return}const s=t.domain(),o=this.#o.getDomainChangeAction(i,s);o==="restore"?this.#i.withDomainNotificationsSuppressed(()=>{t.domain(i)}):o==="animate"?this.#g()?(this.#i.withDomainNotificationsSuppressed(()=>{t.domain(i)}),this.zoomTo(s,500)):this.#h("domain"):o==="notify"&&this.#h("domain")}get scale(){if(this.#i.scale)return this.#i.scale;throw new Error("ScaleResolution.scale accessed before initialization. Call initializeScale().")}getScale(){return this.#i.scale??this.initializeScale()}initializeScale(){if(this.#i.scale)return this.#i.scale;const e=this.#m();return this.#i.createScale(e)}getDomain(){return this.getScale().domain()}getDataDomain(){return this.#s.getDataDomain()}getComplexDomain(){return G3(this.#A(),this.getDomain())}isZoomed(){return this.#o.isZoomed()}isZoomable(){return this.#o.isZoomable()}zoom(e,t,i){return this.#o.zoom(e,t,i)}async zoomTo(e,t=!1){return this.#o.zoomTo(e,t)}resetZoom(){return this.#o.resetZoom()}getZoomLevel(){return this.#o.getZoomLevel()}getAxisLength(){if(this.channel!=="x"&&this.channel!=="y")throw new Error("Axis length is only defined for x and y channels!");const e=Array.from(this.#e).map(t=>t.view.coords?.[this.channel==="x"?"width":"height"]).filter(t=>t>0);return e.length?e.reduce((t,i)=>Math.min(t,i),1e4):0}invertToComplex(e){const t=this.getScale();if("invert"in t){const i=t.invert(e);return this.toComplex(i)}else throw new Error("The scale does not support inverting!")}toComplex(e){return L3(this.#A(),e)}fromComplex(e){return O3(this.#A(),e)}fromComplexInterval(e){return this.type==Os?U3(this.#A(),e):e}}function rf(...n){for(const e of n)if(e!==void 0)return e}class Mk{#e=new Set;constructor(e){this.channel=e}get scaleResolution(){return this.#e.values().next().value?.view.getScaleResolution(this.channel)}#t(e){const{view:t}=e,i=t.getScaleResolution(this.channel);if(!i)throw new Error("Cannot find a scale resolution!");if(this.scaleResolution&&i!==this.scaleResolution)throw new Error(`Shared axes must have a shared scale! Channel: ${this.channel}, existing views: [${Array.from(this.#e).map(r=>r.view.getPathString()).join(", ")}], new view: ${t.getPathString()}.`);this.#e.add(e),qu(this,"axisProps")}registerMember(e){return this.#t(e),()=>this.removeMember(e)&&this.#e.size===0}removeMember(e){const t=this.#e.delete(e);return t&&qu(this,"axisProps"),t}getAxisProps(){return Ua(this,"axisProps",()=>{const e=Array.from(this.#e).map(t=>{const i=t.view.mark.encoding[t.channel];return"axis"in i&&i.axis});return e.length>0&&e.some(t=>t===null)?null:za(e.filter(t=>t!==void 0),"axis",["title"])})}getTitle(){const e=o=>{const a=zI(o.view,o.channel);if(!ut(a))return{member:o,axisTitle:"axis"in a?a.axis?.title:void 0,explicitTitle:rf("axis"in a?a.axis?.title:void 0,a.title),implicitTitle:rf(Zt(a)?a.field:void 0,Ui(a)?a.expr:void 0)}},t=Array.from(this.#e).map(e),i=t.map(o=>o.axisTitle).find(o=>o!==void 0);if(i!==void 0)return i;const r=t.filter(o=>{if(bl(o.member.channel)&&!o.explicitTitle){const a=yn(o.member.channel);return t.find(l=>l.member.view==o.member.view&&l.member.channel==a)?.explicitTitle===void 0}return!0}),s=new Set(r.map(o=>rf(o.explicitTitle,o.implicitTitle)).filter(le));return s.size?[...s].join(", "):null}}function tm(n,e,{spacing:t,devicePixelRatio:i,offset:r,reverse:s}={}){t=t||0,r=r||0;let o=0,a=0;for(const d of n)o+=_a(d.px)+(sf(d)?0:t),a+=_a(d.grow);o-=t;const l=Math.max(0,e-o),c=i!==void 0?d=>Math.round(d*i)/i:d=>d,u=[],f=[],h=d=>{const g=u.length;if(!g)return;const p=(d?t:0)*(s?-1:1);A-=p;for(let m=0;m<g;m++)f.push({location:A+(m+1)/(g+1)*p,size:0});A+=p,u.length=0};let A=s?Math.max(e,o):0+r;if(n.length==1&&sf(n[0]))return[{location:A,size:0}];for(let d=0;d<n.length;d++){const g=n[d];if(sf(g))u.push(g);else{h(f.length>0);const p=_a(g.px)+(a?_a(g.grow)/a*l:0);s&&(A-=p),f.push({location:c(A),size:c(p)}),s?A-=t:A+=p+t}}return A+=s?t:-t,h(!1),f}function Nk(n){let e=0,t=0;for(const i of n)e=Math.max(e,i.px??0),t=Math.max(t,i.grow??0);return{px:e,grow:t}}class Mn{constructor(e,t){this.width=e,this.height=t}addPadding(e){return this.#e(e.width,e.height)}subtractPadding(e){return this.#e(-e.width,-e.height)}#e(e,t){return new Mn({px:(this.width.px??0)+e,grow:this.width.grow},{px:(this.height.px??0)+t,grow:this.height.grow})}isGrowing(){return!!(this.width.grow||this.height.grow)}}const Gs=Object.freeze({px:0,grow:0}),nm=new Mn(Gs,Gs);function sf(n){return!n.px&&!n.grow}function _a(n){return n||0}function Tk(n){return n&&(Ye(n.px)||Ye(n.grow))}function im(n){if(gf(n))throw new Error("parseSizeDef does not accept step-based sizes.");if(Tk(n))return n;if(Ye(n))return{px:n,grow:0};if(n==="container")return{px:0,grow:1};if(!n)return{px:0,grow:1};throw new Error(`Invalid sizeDef: ${n}`)}class Ke{constructor(e,t,i,r){this.top=e||0,this.right=t||0,this.bottom=i||0,this.left=r||0}get width(){return this.left+this.right}get height(){return this.top+this.bottom}expand(e){return e<=0?this:new Ke(this.top+e,this.right+e,this.bottom+e,this.left+e)}add(e){return new Ke(this.top+e.top,this.right+e.right,this.bottom+e.bottom,this.left+e.left)}subtract(e){return new Ke(this.top-e.top,this.right-e.right,this.bottom-e.bottom,this.left-e.left)}union(e){return new Ke(Math.max(this.top,e.top),Math.max(this.right,e.right),Math.max(this.bottom,e.bottom),Math.max(this.left,e.left))}getHorizontal(){return new Ke(0,this.right,0,this.left)}getVertical(){return new Ke(this.top,0,this.bottom,0)}get horizontalTotal(){return this.left+this.right}get verticalTotal(){return this.top+this.bottom}static createFromConfig(e){return typeof e=="number"?this.createUniformPadding(e):e?this.createFromRecord(e):of}static createFromRecord(e){return new Ke(e.top,e.right,e.bottom,e.left)}static zero(){return of}static createUniformPadding(e){return new Ke(e,e,e,e)}}const of=Ke.createUniformPadding(0);Object.freeze(of);class sr{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(e,t){let i=this.length++;for(;i>0;){const r=i-1>>1,s=this.values[r];if(t>=s)break;this.ids[i]=this.ids[r],this.values[i]=s,i=r}this.ids[i]=e,this.values[i]=t}pop(){if(this.length===0)return;const e=this.ids,t=this.values,i=e[0],r=--this.length;if(r>0){const s=e[r],o=t[r];let a=0;const l=r>>1;for(;a<l;){const c=(a<<1)+1,u=c+1,f=c+(+(u<r)&+(t[u]<t[c]));if(t[f]>=o)break;e[a]=e[f],t[a]=t[f],a=f}e[a]=s,t[a]=o}return i}peek(){return this.length>0?this.ids[0]:void 0}peekValue(){return this.length>0?this.values[0]:void 0}shrink(){this.ids.length=this.values.length=this.length}}const rm=Symbol("runtimeNode"),sm=1e6;function Pk(n){return n?(e,t)=>{n.addDisposer(e,t)}:()=>{}}function om(n,e){const t={id:n.id,name:n.name,kind:n.kind,get(){return n.value},subscribe(i){return n.listeners.add(i),()=>{n.listeners.delete(i)}}};return Object.defineProperty(t,rm,{enumerable:!1,configurable:!1,writable:!1,value:n}),e?Object.assign(t,{set(i){e(i)}}):t}function am(n){const e=n[rm];if(!e)throw new Error("ParamRef is not bound to this graph runtime. Expected runtime-created ref.");return e}function cm(n){for(const e of n)e()}class Lk{#e=1;#t=1;#n=0;#i=!1;#s=!1;#o=new Set;#r=new Set;#a=new sr;#c=new sr;#l=new Set;#u;constructor(e={}){this.#u=Pk(e.lifecycleRegistry)}createWritable(e,t,i,r,s={}){const o="n"+this.#e++,a=s.notify??!0,l={id:o,name:t,kind:i,value:r,rank:0,disposed:!1,listeners:new Set,subscribe(u){return l.listeners.add(u),()=>{l.listeners.delete(u)}}},c=u=>{if(l.disposed)throw new Error('Cannot set disposed parameter "'+t+'" ('+o+").");u!==l.value&&(l.value=u,a&&(cm(l.listeners),this.#d()))};return this.#u(e,()=>{l.disposed=!0,l.listeners.clear()}),om(l,c)}computed(e,t,i,r){const o=i.map(am).reduce((h,A)=>Math.max(h,A.rank),0),l={id:"n"+this.#e++,name:t,kind:"derived",rank:o+1,value:r(),disposed:!1,listeners:new Set,fn:r,subscribe(h){return l.listeners.add(h),()=>{l.listeners.delete(h)}}},c=()=>{l.disposed||this.#f(l)},u=i.map(h=>h.subscribe(c)),f=()=>{l.disposed||(l.disposed=!0,u.forEach(h=>h()),l.listeners.clear(),this.#o.delete(l))};return this.#u(e,f),om(l)}effect(e,t,i){const s=t.map(am).reduce((f,h)=>Math.max(f,h.rank),0),a={id:"n"+this.#e++,rank:s+1,disposed:!1,fn:i},l=()=>{a.disposed||this.#A(a)},c=t.map(f=>f.subscribe(l)),u=()=>{a.disposed||(a.disposed=!0,c.forEach(f=>f()),this.#r.delete(a))};return this.#u(e,u),u}runInTransaction(e){this.#n+=1;try{return e()}finally{this.#n-=1,this.#n===0&&this.#d()}}flushNow(){if(!(this.#n>0||this.#s)){this.#i=!1,this.#s=!0;try{let e=!0;for(;e;){for(e=!1;this.#a.length>0;){e=!0;const t=this.#a.pop();if(this.#o.delete(t),t.disposed)continue;const i=t.value,r=t.fn();r!==i&&(t.value=r,cm(t.listeners))}for(;this.#c.length>0;){e=!0;const t=this.#c.pop();this.#r.delete(t),!t.disposed&&t.fn()}}}finally{this.#s=!1,this.#p()}}}whenPropagated(e={}){if(this.#g())return Promise.resolve();const{signal:t,timeoutMs:i}=e;return t?.aborted?Promise.reject(new Error("whenPropagated aborted")):new Promise((r,s)=>{const o={resolve:r,reject:s};t&&(o.abortHandler=()=>{this.#l.delete(o),s(new Error("whenPropagated aborted"))},t.addEventListener("abort",o.abortHandler,{once:!0})),i!=null&&(o.timeoutId=setTimeout(()=>{this.#l.delete(o),o.abortHandler&&t?.removeEventListener("abort",o.abortHandler),s(new Error("whenPropagated timeout after "+i+" ms"))},i)),this.#l.add(o)})}#f(e){this.#o.has(e)||(this.#o.add(e),this.#a.push(e,this.#h(e.rank)),this.#d())}#A(e){this.#r.has(e)||(this.#r.add(e),this.#c.push(e,this.#h(e.rank)),this.#d())}#h(e){const t=this.#t%sm;return this.#t+=1,e*sm+t}#d(){this.#n>0||this.#i||this.#s||(this.#i=!0,queueMicrotask(()=>{this.flushNow()}))}#g(){return this.#n===0&&!this.#i&&!this.#s&&this.#a.length===0&&this.#c.length===0&&this.#o.size===0&&this.#r.size===0}#p(){if(this.#g()){for(const e of this.#l)e.timeoutId&&clearTimeout(e.timeoutId),e.resolve();this.#l.clear()}}}class Ok{#e=1;#t=new Map;createOwner(e,t){const i=e+":"+t+":"+this.#e++;return this.#t.set(i,new Set),i}addDisposer(e,t){const i=this.#t.get(e);if(!i)throw new Error("Unknown owner: "+e);i.add(t)}disposeOwner(e){const t=this.#t.get(e);if(t){for(const i of t)i();t.clear(),this.#t.delete(e)}}}class Uk{#e=1;#t=new Map;createRootScope(e){const t="scope:"+this.#e++;return this.#t.set(t,{params:new Map,ownerId:e}),t}createChildScope(e,t){if(!this.#t.has(t))throw new Error("Unknown parent scope: "+t);const i="scope:"+this.#e++;return this.#t.set(i,{parentScope:t,params:new Map,ownerId:e}),i}getOwnerId(e){const t=this.#t.get(e);if(!t)throw new Error("Unknown scope: "+e);return t.ownerId}clearScope(e){const t=this.#t.get(e);if(!t)throw new Error("Unknown scope: "+e);t.params.clear()}register(e,t,i){Mt(t);const r=this.#t.get(e);if(!r)throw new Error("Unknown scope: "+e);if(r.params.has(t))throw new Error('Parameter "'+t+'" already exists in scope '+e);return r.params.set(t,i),i}resolve(e,t){Mt(t);let i=e;for(;i;){const r=this.#t.get(i);if(!r)throw new Error("Unknown scope: "+i);const s=r.params.get(t);if(s)return s;i=r.parentScope}}}const Gk="RawCode",zk="Literal",Hk="Property",_k="Identifier",Vk="ArrayExpression",Yk="BinaryExpression",Jk="CallExpression",Kk="ConditionalExpression",qk="LogicalExpression",jk="MemberExpression",Wk="ObjectExpression",Xk="UnaryExpression";function St(n){this.type=n}St.prototype.visit=function(n){let e,t,i;if(n(this))return 1;for(e=Zk(this),t=0,i=e.length;t<i;++t)if(e[t].visit(n))return 1};function Zk(n){switch(n.type){case Vk:return n.elements;case Yk:case qk:return[n.left,n.right];case Jk:return[n.callee].concat(n.arguments);case Kk:return[n.test,n.consequent,n.alternate];case jk:return[n.object,n.property];case Wk:return n.properties;case Hk:return[n.key,n.value];case Xk:return[n.argument];case _k:case zk:case Gk:default:return[]}}var zt,z,k,qe,re,Va=1,zs=2,hi=3,Nn=4,Ya=5,di=6,ot=7,Hs=8,$k=9;zt={},zt[Va]="Boolean",zt[zs]="<end>",zt[hi]="Identifier",zt[Nn]="Keyword",zt[Ya]="Null",zt[di]="Numeric",zt[ot]="Punctuator",zt[Hs]="String",zt[$k]="RegularExpression";var eF="ArrayExpression",tF="BinaryExpression",nF="CallExpression",iF="ConditionalExpression",lm="Identifier",rF="Literal",sF="LogicalExpression",oF="MemberExpression",aF="ObjectExpression",cF="Property",lF="UnaryExpression",Le="Unexpected token %0",uF="Unexpected number",fF="Unexpected string",AF="Unexpected identifier",hF="Unexpected reserved word",dF="Unexpected end of input",af="Invalid regular expression",cf="Invalid regular expression: missing /",um="Octal literals are not allowed in strict mode.",gF="Duplicate data property in object literal not allowed in strict mode",Ve="ILLEGAL",_s="Disabled.",pF=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),mF=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Ja(n,e){if(!n)throw new Error("ASSERT: "+e)}function rn(n){return n>=48&&n<=57}function lf(n){return"0123456789abcdefABCDEF".includes(n)}function Vs(n){return"01234567".includes(n)}function wF(n){return n===32||n===9||n===11||n===12||n===160||n>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(n)}function Ys(n){return n===10||n===13||n===8232||n===8233}function Js(n){return n===36||n===95||n>=65&&n<=90||n>=97&&n<=122||n===92||n>=128&&pF.test(String.fromCharCode(n))}function Ka(n){return n===36||n===95||n>=65&&n<=90||n>=97&&n<=122||n>=48&&n<=57||n===92||n>=128&&mF.test(String.fromCharCode(n))}const yF={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function fm(){for(;k<qe;){const n=z.charCodeAt(k);if(wF(n)||Ys(n))++k;else break}}function uf(n){var e,t,i,r=0;for(t=n==="u"?4:2,e=0;e<t;++e)k<qe&&lf(z[k])?(i=z[k++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):ee({},Le,Ve);return String.fromCharCode(r)}function CF(){var n,e,t,i;for(n=z[k],e=0,n==="}"&&ee({},Le,Ve);k<qe&&(n=z[k++],!!lf(n));)e=e*16+"0123456789abcdef".indexOf(n.toLowerCase());return(e>1114111||n!=="}")&&ee({},Le,Ve),e<=65535?String.fromCharCode(e):(t=(e-65536>>10)+55296,i=(e-65536&1023)+56320,String.fromCharCode(t,i))}function Am(){var n,e;for(n=z.charCodeAt(k++),e=String.fromCharCode(n),n===92&&(z.charCodeAt(k)!==117&&ee({},Le,Ve),++k,n=uf("u"),(!n||n==="\\"||!Js(n.charCodeAt(0)))&&ee({},Le,Ve),e=n);k<qe&&(n=z.charCodeAt(k),!!Ka(n));)++k,e+=String.fromCharCode(n),n===92&&(e=e.substr(0,e.length-1),z.charCodeAt(k)!==117&&ee({},Le,Ve),++k,n=uf("u"),(!n||n==="\\"||!Ka(n.charCodeAt(0)))&&ee({},Le,Ve),e+=n);return e}function xF(){var n,e;for(n=k++;k<qe;){if(e=z.charCodeAt(k),e===92)return k=n,Am();if(Ka(e))++k;else break}return z.slice(n,k)}function bF(){var n,e,t;return n=k,e=z.charCodeAt(k)===92?Am():xF(),e.length===1?t=hi:yF.hasOwnProperty(e)?t=Nn:e==="null"?t=Ya:e==="true"||e==="false"?t=Va:t=hi,{type:t,value:e,start:n,end:k}}function ff(){var n=k,e=z.charCodeAt(k),t,i=z[k],r,s,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++k,{type:ot,value:String.fromCharCode(e),start:n,end:k};default:if(t=z.charCodeAt(k+1),t===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return k+=2,{type:ot,value:String.fromCharCode(e)+String.fromCharCode(t),start:n,end:k};case 33:case 61:return k+=2,z.charCodeAt(k)===61&&++k,{type:ot,value:z.slice(n,k),start:n,end:k}}}if(o=z.substr(k,4),o===">>>=")return k+=4,{type:ot,value:o,start:n,end:k};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return k+=3,{type:ot,value:s,start:n,end:k};if(r=s.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return k+=2,{type:ot,value:r,start:n,end:k};if(r==="//"&&ee({},Le,Ve),"<>=!+-*%&|^/".includes(i))return++k,{type:ot,value:i,start:n,end:k};ee({},Le,Ve)}function EF(n){let e="";for(;k<qe&&lf(z[k]);)e+=z[k++];return e.length===0&&ee({},Le,Ve),Js(z.charCodeAt(k))&&ee({},Le,Ve),{type:di,value:parseInt("0x"+e,16),start:n,end:k}}function IF(n){let e="0"+z[k++];for(;k<qe&&Vs(z[k]);)e+=z[k++];return(Js(z.charCodeAt(k))||rn(z.charCodeAt(k)))&&ee({},Le,Ve),{type:di,value:parseInt(e,8),octal:!0,start:n,end:k}}function hm(){var n,e,t;if(t=z[k],Ja(rn(t.charCodeAt(0))||t===".","Numeric literal must start with a decimal digit or a decimal point"),e=k,n="",t!=="."){if(n=z[k++],t=z[k],n==="0"){if(t==="x"||t==="X")return++k,EF(e);if(Vs(t))return IF(e);t&&rn(t.charCodeAt(0))&&ee({},Le,Ve)}for(;rn(z.charCodeAt(k));)n+=z[k++];t=z[k]}if(t==="."){for(n+=z[k++];rn(z.charCodeAt(k));)n+=z[k++];t=z[k]}if(t==="e"||t==="E")if(n+=z[k++],t=z[k],(t==="+"||t==="-")&&(n+=z[k++]),rn(z.charCodeAt(k)))for(;rn(z.charCodeAt(k));)n+=z[k++];else ee({},Le,Ve);return Js(z.charCodeAt(k))&&ee({},Le,Ve),{type:di,value:parseFloat(n),start:e,end:k}}function BF(){var n="",e,t,i,r,s=!1;for(e=z[k],Ja(e==="'"||e==='"',"String literal must starts with a quote"),t=k,++k;k<qe;)if(i=z[k++],i===e){e="";break}else if(i==="\\")if(i=z[k++],!i||!Ys(i.charCodeAt(0)))switch(i){case"u":case"x":z[k]==="{"?(++k,n+=CF()):n+=uf(i);break;case"n":n+=`
`;break;case"r":n+="\r";break;case"t":n+="	";break;case"b":n+="\b";break;case"f":n+="\f";break;case"v":n+="\v";break;default:Vs(i)?(r="01234567".indexOf(i),r!==0&&(s=!0),k<qe&&Vs(z[k])&&(s=!0,r=r*8+"01234567".indexOf(z[k++]),"0123".includes(i)&&k<qe&&Vs(z[k])&&(r=r*8+"01234567".indexOf(z[k++]))),n+=String.fromCharCode(r)):n+=i;break}else i==="\r"&&z[k]===`
`&&++k;else{if(Ys(i.charCodeAt(0)))break;n+=i}return e!==""&&ee({},Le,Ve),{type:Hs,value:n,octal:s,start:t,end:k}}function vF(n,e){let t=n;e.includes("u")&&(t=t.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";ee({},af)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(t)}catch{ee({},af)}try{return new RegExp(n,e)}catch{return null}}function SF(){var n,e,t,i,r;for(n=z[k],Ja(n==="/","Regular expression literal must start with a slash"),e=z[k++],t=!1,i=!1;k<qe;)if(n=z[k++],e+=n,n==="\\")n=z[k++],Ys(n.charCodeAt(0))&&ee({},cf),e+=n;else if(Ys(n.charCodeAt(0)))ee({},cf);else if(t)n==="]"&&(t=!1);else if(n==="/"){i=!0;break}else n==="["&&(t=!0);return i||ee({},cf),r=e.substr(1,e.length-2),{value:r,literal:e}}function QF(){var n,e,t;for(e="",t="";k<qe&&(n=z[k],!!Ka(n.charCodeAt(0)));)++k,n==="\\"&&k<qe?ee({},Le,Ve):(t+=n,e+=n);return t.search(/[^gimuy]/g)>=0&&ee({},af,t),{value:t,literal:e}}function DF(){var n,e,t,i;return re=null,fm(),n=k,e=SF(),t=QF(),i=vF(e.value,t.value),{literal:e.literal+t.literal,value:i,regex:{pattern:e.value,flags:t.value},start:n,end:k}}function kF(n){return n.type===hi||n.type===Nn||n.type===Va||n.type===Ya}function dm(){if(fm(),k>=qe)return{type:zs,start:k,end:k};const n=z.charCodeAt(k);return Js(n)?bF():n===40||n===41||n===59?ff():n===39||n===34?BF():n===46?rn(z.charCodeAt(k+1))?hm():ff():rn(n)?hm():ff()}function at(){const n=re;return k=n.end,re=dm(),k=n.end,n}function gm(){const n=k;re=dm(),k=n}function FF(n){const e=new St(eF);return e.elements=n,e}function pm(n,e,t){const i=new St(n==="||"||n==="&&"?sF:tF);return i.operator=n,i.left=e,i.right=t,i}function RF(n,e){const t=new St(nF);return t.callee=n,t.arguments=e,t}function MF(n,e,t){const i=new St(iF);return i.test=n,i.consequent=e,i.alternate=t,i}function Af(n){const e=new St(lm);return e.name=n,e}function Ks(n){const e=new St(rF);return e.value=n.value,e.raw=z.slice(n.start,n.end),n.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=n.regex),e}function mm(n,e,t){const i=new St(oF);return i.computed=n==="[",i.object=e,i.property=t,i.computed||(t.member=!0),i}function NF(n){const e=new St(aF);return e.properties=n,e}function wm(n,e,t){const i=new St(cF);return i.key=e,i.value=t,i.kind=n,i}function TF(n,e){const t=new St(lF);return t.operator=n,t.argument=e,t.prefix=!0,t}function ee(n,e){var t,i=Array.prototype.slice.call(arguments,2),r=e.replace(/%(\d)/g,(s,o)=>(Ja(o<i.length,"Message reference must be in range"),i[o]));throw t=new Error(r),t.index=k,t.description=r,t}function qa(n){n.type===zs&&ee(n,dF),n.type===di&&ee(n,uF),n.type===Hs&&ee(n,fF),n.type===hi&&ee(n,AF),n.type===Nn&&ee(n,hF),ee(n,Le,n.value)}function je(n){const e=at();(e.type!==ot||e.value!==n)&&qa(e)}function he(n){return re.type===ot&&re.value===n}function hf(n){return re.type===Nn&&re.value===n}function PF(){const n=[];for(k=re.start,je("[");!he("]");)he(",")?(at(),n.push(null)):(n.push(gi()),he("]")||je(","));return at(),FF(n)}function ym(){k=re.start;const n=at();return n.type===Hs||n.type===di?(n.octal&&ee(n,um),Ks(n)):Af(n.value)}function LF(){var n,e,t,i;if(k=re.start,n=re,n.type===hi)return t=ym(),je(":"),i=gi(),wm("init",t,i);if(n.type===zs||n.type===ot)qa(n);else return e=ym(),je(":"),i=gi(),wm("init",e,i)}function OF(){var n=[],e,t,i,r={},s=String;for(k=re.start,je("{");!he("}");)e=LF(),e.key.type===lm?t=e.key.name:t=s(e.key.value),i="$"+t,Object.prototype.hasOwnProperty.call(r,i)?ee({},gF):r[i]=!0,n.push(e),he("}")||je(",");return je("}"),NF(n)}function UF(){je("(");const n=df();return je(")"),n}const GF={if:1};function zF(){var n,e,t;if(he("("))return UF();if(he("["))return PF();if(he("{"))return OF();if(n=re.type,k=re.start,n===hi||GF[re.value])t=Af(at().value);else if(n===Hs||n===di)re.octal&&ee(re,um),t=Ks(at());else{if(n===Nn)throw new Error(_s);n===Va?(e=at(),e.value=e.value==="true",t=Ks(e)):n===Ya?(e=at(),e.value=null,t=Ks(e)):he("/")||he("/=")?(t=Ks(DF()),gm()):qa(at())}return t}function HF(){const n=[];if(je("("),!he(")"))for(;k<qe&&(n.push(gi()),!he(")"));)je(",");return je(")"),n}function _F(){k=re.start;const n=at();return kF(n)||qa(n),Af(n.value)}function VF(){return je("."),_F()}function YF(){je("[");const n=df();return je("]"),n}function JF(){var n,e,t;for(n=zF();;)if(he("."))t=VF(),n=mm(".",n,t);else if(he("("))e=HF(),n=RF(n,e);else if(he("["))t=YF(),n=mm("[",n,t);else break;return n}function Cm(){const n=JF();if(re.type===ot&&(he("++")||he("--")))throw new Error(_s);return n}function ja(){var n,e;if(re.type!==ot&&re.type!==Nn)e=Cm();else{if(he("++")||he("--"))throw new Error(_s);if(he("+")||he("-")||he("~")||he("!"))n=at(),e=ja(),e=TF(n.value,e);else{if(hf("delete")||hf("void")||hf("typeof"))throw new Error(_s);e=Cm()}}return e}function xm(n){let e=0;if(n.type!==ot&&n.type!==Nn)return 0;switch(n.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function KF(){var n,e,t,i,r,s,o,a,l,c;if(n=re,l=ja(),i=re,r=xm(i),r===0)return l;for(i.prec=r,at(),e=[n,re],o=ja(),s=[l,i,o];(r=xm(re))>0;){for(;s.length>2&&r<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),e.pop(),t=pm(a,l,o),s.push(t);i=at(),i.prec=r,s.push(i),e.push(re),t=ja(),s.push(t)}for(c=s.length-1,t=s[c],e.pop();c>1;)e.pop(),t=pm(s[c-1].value,s[c-2],t),c-=2;return t}function gi(){var n,e,t;return n=KF(),he("?")&&(at(),e=gi(),je(":"),t=gi(),n=MF(n,e,t)),n}function df(){const n=gi();if(he(","))throw new Error(_s);return n}function bm(n){z=n,k=0,qe=z.length,re=null,gm();const e=df();if(re.type!==zs)throw new Error("Unexpect token after expression.");return e}var qF={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Em(n){function e(o,a,l,c){let u=n(a[0]);return l&&(u=l+"("+u+")",l.lastIndexOf("new ",0)===0&&(u="("+u+")")),u+"."+o+(c<0?"":c===0?"()":"("+a.slice(1).map(n).join(",")+")")}function t(o,a,l){return c=>e(o,c,a,l)}const i="new Date",r="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Ee("Missing arguments to clamp function."),o.length>3&&Ee("Too many arguments to clamp function.");const a=o.map(n);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:t("getDate",i,0),day:t("getDay",i,0),year:t("getFullYear",i,0),month:t("getMonth",i,0),hours:t("getHours",i,0),minutes:t("getMinutes",i,0),seconds:t("getSeconds",i,0),milliseconds:t("getMilliseconds",i,0),time:t("getTime",i,0),timezoneoffset:t("getTimezoneOffset",i,0),utcdate:t("getUTCDate",i,0),utcday:t("getUTCDay",i,0),utcyear:t("getUTCFullYear",i,0),utcmonth:t("getUTCMonth",i,0),utchours:t("getUTCHours",i,0),utcminutes:t("getUTCMinutes",i,0),utcseconds:t("getUTCSeconds",i,0),utcmilliseconds:t("getUTCMilliseconds",i,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",r,0),lower:t("toLowerCase",r,0),substring:t("substring",r),split:t("split",r),trim:t("trim",r,0),btoa:"btoa",atob:"atob",regexp:s,test:t("test",s),if:function(o){o.length<3&&Ee("Missing arguments to if function."),o.length>3&&Ee("Too many arguments to if function.");const a=o.map(n);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function jF(n){const e=n&&n.length-1;return e&&(n[0]==='"'&&n[e]==='"'||n[0]==="'"&&n[e]==="'")?n.slice(1,-1):n}function Im(n){n=n||{};const e=n.allowed?Io(n.allowed):{},t=n.forbidden?Io(n.forbidden):{},i=n.constants||qF,r=(n.functions||Em)(f),s=n.globalvar,o=n.fieldvar,a=At(s)?s:d=>`${s}["${d}"]`;[...Object.getOwnPropertyNames(Object.prototype).filter(d=>typeof Object.prototype[d]=="function")];let l={},c={},u=0;function f(d){if(le(d))return d;const g=h[d.type];return g==null&&Ee("Unsupported type: "+d.type),g(d)}const h={Literal:d=>d.raw,Identifier:d=>{const g=d.name;return u>0?g:Qi(t,g)?Ee("Illegal identifier: "+g):Qi(i,g)?i[g]:Qi(e,g)?g:(l[g]=1,a(g))},MemberExpression:d=>{const g=!d.computed,p=f(d.object);g&&(u+=1);const m=f(d.property);return p===o&&(c[jF(m)]=1),g&&(u-=1),p+(g?"."+m:"["+m+"]")},CallExpression:d=>{d.callee.type!=="Identifier"&&Ee("Illegal callee type: "+d.callee.type);const g=d.callee.name,p=d.arguments,m=Qi(r,g)&&r[g];return m||Ee("Unrecognized function: "+g),At(m)?m(p):m+"("+p.map(f).join(",")+")"},ArrayExpression:d=>"["+d.elements.map(f).join(",")+"]",BinaryExpression:d=>"("+f(d.left)+" "+d.operator+" "+f(d.right)+")",UnaryExpression:d=>"("+d.operator+f(d.argument)+")",ConditionalExpression:d=>"("+f(d.test)+"?"+f(d.consequent)+":"+f(d.alternate)+")",LogicalExpression:d=>"("+f(d.left)+d.operator+f(d.right)+")",ObjectExpression:d=>{for(const g of d.properties){const p=g.key.name;yx.has(p)&&Ee("Illegal property: "+p)}return"{"+d.properties.map(f).join(",")+"}"},Property:d=>{u+=1;const g=f(d.key);return u-=1,g+":"+f(d.value)}};function A(d){const g={code:f(d),globals:Object.keys(l),fields:Object.keys(c)};return l={},c={},g}return A.functions=r,A.constants=i,A}function Bm(n,e,t){return t=(t-n)/(e-n),t=Math.max(0,Math.min(1,t)),t*t*(3-2*t)}function WF(n,e,t){return ji((t-n)/(e-n),0,1)}const vm={clamp:ji,format(n,e){return He(e)(n)},mapHasKey(n,e){return n.has(e)},isArray:xe,isBoolean:Tr,isDefined(n){return n!==void 0},isNumber:Ye,isObject:ze,isRegExp:Nx,isString:le,isValid(n){return n!=null&&n===n},lerp:JA,linearstep:WF,replace(n,e,t){return String(n).replace(e,t)},smoothstep:Bm};function XF(n){const e=Em(n);for(const t in vm)e[t]=`this.${t}`;return e}const ZF=Im({forbidden:[],allowed:["datum","undefined"],globalvar:"globalObject",fieldvar:"datum",functions:XF});function $F(n,e={}){try{const t=bm(n),i=ZF(t),r=Function("datum","globalObject",`"use strict";
            try {
                return (${i.code});
            } catch (e) {
                throw new Error("Error evaluating expression: " + ${JSON.stringify(n)} + ", " + e.message, e);
            }`).bind(vm),s=o=>r(o,e);return s.fields=i.fields,s.globals=i.globals,s.code=i.code,s}catch(t){throw new Error(`Invalid expression: ${n}, ${t.message}`)}}const e4=Im({forbidden:[],allowed:["event"],globalvar:"globalObject"});function Sm(n){try{const e=bm(n),t=e4(e);return Function("event","globalObject",`"use strict";
            try {
                return !!(${t.code});
            } catch (e) {
                throw new Error("Error evaluating expression: " + ${JSON.stringify(n)} + ", " + e.message, e);
            }`)}catch(e){throw new Error(`Invalid expression: ${n}, ${e.message}`)}}function t4(n,e={}){return $F(n,e)}function Qm(n,e){const t={},i=t4(n,t),r=new Map;for(const o of i.globals){if(r.has(o))continue;const a=e(o);if(!a)throw new Error('Unknown variable "'+o+'" in expression: '+n);r.set(o,a),Object.defineProperty(t,o,{enumerable:!0,get(){return a.get()}})}const s=new Set;return i.subscribe=o=>{const a=[];for(const u of r.values())a.push(u.subscribe(o));let l=!0;const c=()=>{l&&(l=!1,s.delete(c),a.forEach(u=>u()))};return s.add(c),c},i.invalidate=()=>{for(const o of s)o();s.clear()},i.identifier=()=>i.code+"|"+Array.from(r.values()).map(o=>o.id).join(","),{expression:i,dependencies:Array.from(r.values())}}class n4{#e=new Ok;#t=new Lk({lifecycleRegistry:this.#e});#n=new Uk;createScope(e){const t=this.#e.createOwner("scope",e??"root");return e?this.#n.createChildScope(t,e):this.#n.createRootScope(t)}disposeScope(e){const t=this.#n.getOwnerId(e);this.#e.disposeOwner(t),this.#n.clearScope(e)}addScopeDisposer(e,t){const i=this.#n.getOwnerId(e);this.#e.addDisposer(i,t)}registerBase(e,t,i,r){const s=this.#n.getOwnerId(e),o=this.#t.createWritable(s,t,"base",i,r);return this.#n.register(e,t,o)}registerSelection(e,t,i,r){const s=this.#n.getOwnerId(e),o=this.#t.createWritable(s,t,"selection",i,r);return this.#n.register(e,t,o)}registerDerived(e,t,i){const{expression:r,dependencies:s}=Qm(i,l=>this.resolve(e,l)),o=this.#n.getOwnerId(e),a=this.#t.computed(o,t,s,()=>r(null));return this.#n.register(e,t,a)}createExpression(e,t){const{expression:i}=Qm(t,r=>this.resolve(e,r));return i}resolve(e,t){return this.#n.resolve(e,t)}runInTransaction(e){return this.#t.runInTransaction(e)}flushNow(){this.#t.flushNow()}whenPropagated(e){return this.#t.whenPropagated(e)}}class i4{#e;#t;#n=new Map;#i=new Map;#s=new Map;#o;#r=!1;constructor(e){this.#o=e??(()=>{});const t=this.#o();t?(this.#e=t.#e,this.#t=this.#e.createScope(t.#t)):(this.#e=new n4,this.#t=this.#e.createScope())}registerParam(e){const t=e.name;if(Mt(t),this.#s.has(t))throw new Error('Parameter "'+t+'" already registered in this scope.');if("value"in e&&"expr"in e)throw new Error(`The parameter "${t}" must not have both value and expr properties!`);let i,r;if(e.push=="outer"){const s=this.findRuntimeForParam(t);if(!s)throw new Error(`Parameter "${t}" not found in outer scope!`);const o=s.paramConfigs.get(t);if(!o)throw new Error(`Outer parameter "${t}" exists as a value but has no registered config.`);if("expr"in o||"select"in o)throw new Error(`The outer parameter "${t}" must not have expr or select properties!`);i=a=>{s.setValue(t,a)},this.#n.set(t,i)}else if("value"in e)r=Ql(e,this),i=this.#a(t,r);else if("expr"in e){const s=this.#e.registerDerived(this.#t,t,e.expr);this.#i.set(t,s),i=()=>{throw new Error('Cannot set derived parameter "'+t+'".')}}else r=Ql(e,this),i=this.#a(t,r);if("select"in e){if(r??=Ql(e,this),!this.#n.has(t)){const s=this.#e.registerSelection(this.#t,t,r);this.#i.set(t,s),this.#n.set(t,o=>{s.set(o),this.#e.flushNow()}),i=this.#n.get(t)}i(r)}return this.#s.set(t,e),i}allocateSetter(e,t,i=!1){if(Mt(e),this.#n.has(e))throw new Error("Setter already allocated for parameter: "+e);const r=this.#e.registerBase(this.#t,e,t,{notify:!i});this.#i.set(e,r);const s=o=>{r.set(o),this.#e.flushNow()};return this.#n.set(e,s),s}setValue(e,t){Mt(e);const i=this.#n.get(e);if(!i)throw new Error("Writable parameter not found in this scope: "+e);i(t)}getValue(e){return this.#i.get(e)?.get()}subscribe(e,t){Mt(e);const i=this.findRuntimeForParam(e);if(!i)throw new Error("Parameter not found: "+e);const r=i.#i.get(e);if(!r)throw new Error("Parameter found without local reference: "+e);return r.subscribe(t)}findValue(e){return this.findRuntimeForParam(e)?.getValue(e)}get paramConfigs(){return this.#s}findRuntimeForParam(e){return this.#i.has(e)?this:this.#o()?.findRuntimeForParam(e)}createExpression(e){return this.#e.createExpression(this.#t,e)}watchExpression(e,t,i={}){const r=this.createExpression(e),s=r.subscribe(t);return(i.scopeOwned??!0)&&this.#e.addScopeDisposer(this.#t,s),i.registerDisposer?.(s),r}#a(e,t){const i=this.#e.registerBase(this.#t,e,t);this.#i.set(e,i);const r=s=>{i.set(s),this.#e.flushNow()};return this.#n.set(e,r),r}evaluateAndGet(e){return this.createExpression(e)()}runInTransaction(e){return this.#e.runInTransaction(e)}flushNow(){this.#e.flushNow()}whenPropagated(e){return this.#e.whenPropagated(e)}dispose(){this.#r||(this.#r=!0,this.#e.disposeScope(this.#t),this.#n.clear(),this.#i.clear(),this.#s.clear())}hasPointSelections(){for(const e of this.#s.values())if(Sl(e)){const t=e.select;if(le(t)){if(t=="point")return!0}else if(t.type=="point")return!0}return!1}}function qs(n,e){return!e||/^(data:|([A-Za-z]+:)?\/\/)/.test(n)||n.startsWith("/")?n:(e.endsWith("/")||(e+="/"),e+n)}function r4(n){if(!n)return n;if(/[?#]/.test(n))throw new Error(`Invalid base URL: ${n} - cannot contain query or hash.`);return n.endsWith("/")?n:n+"/"}const Tn="VISIT_SKIP",or="VISIT_STOP",Dm=n=>n;class km{spec;#e;#t={};#n={};#i={};#s;#o;#r=!1;opacityFunction=Dm;#a=[];#c="none";facetCoords=new Kt([],JSON.stringify);constructor(e,t,i,r,s,o={}){if(!e)throw new Error("View spec must be defined!");if(this.context=t,this.layoutParent=i,this.dataParent=r,this.#e=s,this.spec=e,this.resolutions={scale:{},axis:{}},Dp(this),this.options={blockEncodingInheritance:!1,...o},this.flowHandle=void 0,this.needsAxes={x:!1,y:!1},this.paramRuntime=new i4(()=>this.dataParent?.paramRuntime),e.params)for(const a of e.params)this.paramRuntime.registerParam(a);if(!this.layoutParent?.options.layeredChildren){const a=l=>this.paramRuntime.findRuntimeForParam(l)?void 0:this.paramRuntime.allocateSetter(l,0);this.#o=a("height"),this.#s=a("width")}}get name(){return this.spec.name??this.#e}get explicitName(){return this.spec.name}get defaultName(){return this.#e}get coords(){return this.facetCoords.values().next().value}getPadding(){return this._cache("size/padding",()=>Ke.createFromConfig(this.spec.padding))}getOverhang(){return Ke.zero()}isScrollable(){return this.spec.viewportWidth!=null||this.spec.viewportHeight!=null}getSize(){return this._cache("size/size",()=>this.isConfiguredVisible()?new Mn(this.#l("width"),this.#l("height")):nm)}getViewportSize(){if(!this.isScrollable())return this.getSize();if(!this.isConfiguredVisible())return nm;const e=this.getSize();return new Mn(this.#l("viewportWidth")??e.width,this.#l("viewportHeight")??e.height)}#l(e){let t=this.spec[e];const i=gf(t),r=e=="viewportWidth"||e=="viewportHeight";if(i){if(r)throw new _e(`Cannot use step-based size with "${e}"!`,this);const s=t.step,o=this.getScaleResolution(e=="width"?"x":"y")?.getScale();if(o){let a=0;if(nn(o.type))a=o.domain().length;else if(["locus","index"].includes(o.type)){const c=o.domain();a=Yo(c)-c[0]}else throw new _e(`Cannot use step-based size with "${o.type}" scale!`,this);const l=o;return a=Lu(a,l.paddingInner(),l.paddingOuter()),{px:a*s,grow:0}}else throw new _e(`Cannot use step-based size with "${e}"!`,this)}else return(t&&im(t))??(r?void 0:{px:0,grow:1})}registerStepSizeInvalidation(){this.#u("width","x"),this.#u("height","y")}#u(e,t){const i=this.spec[e];if(!gf(i))return;const r=this.getScaleResolution(t);if(!r)throw new _e("Cannot use 'step' size without a scale!",this);const s=()=>this.invalidateSizeCache();r.addEventListener("domain",s),this.registerDisposer(()=>r.removeEventListener("domain",s))}isConfiguredVisible(){return this.context.isViewConfiguredVisible(this)}isVisibleInSpec(){return this.spec.visible??!0}isVisible(){return this.getLayoutAncestors().every(e=>e.isConfiguredVisible())}isDomainInert(){if(this.spec.domainInert)return!0;const e=this.dataParent;return e?e.isDomainInert():!1}getDataInitializationState(){return this.#c}_setDataInitializationState(e){this.#c=e}isDataInitialized(){return this.#c==="ready"}getEffectiveOpacity(){return this.opacityFunction(this.layoutParent?.getEffectiveOpacity()??1)}getPathString(){return this.getLayoutAncestors().map(e=>e.name).reverse().join("/")}#f(e){const t=[];let i=this;do t.push(i),i=i[e];while(i);return t}getLayoutAncestors(){return this.#f("layoutParent")}getDataAncestors(){return this.#f("dataParent")}handleBroadcast(e){for(const t of this.#t[e.type]||[])t(e)}_addBroadcastHandler(e,t){let i=this.#t[e];return i||(i=[],this.#t[e]=i),i.push(t),()=>{const r=this.#t[e];if(!r)return;const s=r.indexOf(t);s>=0&&r.splice(s,1)}}handleInteractionEvent(e,t,i){const r=i?this.#n:this.#i;for(const s of r[t.type]||[])s(e,t)}addInteractionEventListener(e,t,i){const r=i?this.#n:this.#i;let s=r[e];s||(s=[],r[e]=s),s.push(t)}removeInteractionEventListener(e,t,i){let s=(i?this.#n:this.#i)?.[e];if(s){const o=s.indexOf(t);o>=0&&s.splice(o,1)}}visit(e){try{const t=e(this);if(e.postOrder&&e.postOrder(this),t!==or)return t}catch(t){throw t.view=this,t}}getDescendants(){const e=[];return this.visit(t=>{e.push(t)}),e}dispose(){for(const t of this.#a)t();this.#a.length=0;const e=this.flowHandle;e?.collector&&(this.context.dataFlow.pruneCollectorBranch(e.collector),this.context.dataFlow.removeCollector(e.collector)),e?.dataSource&&e.dataSource.view===this&&!e.dataSource.identifier&&this.context.dataFlow.removeDataSource(e.dataSource),this.paramRuntime.dispose(),this.context.dataFlow.loadingStatusRegistry.delete(this),this.flowHandle=void 0}registerDisposer(e){this.#a.push(e)}disposeSubtree(){const e=()=>{};e.postOrder=t=>{t.dispose()},this.visit(e)}configureViewOpacity(){(!this.opacityFunction||this.opacityFunction===Dm)&&(this.opacityFunction=o4(this))}onBeforeRender(){this.#r||(this.#r=!0)}hasRendered(){return this.#r}render(e,t,i={}){i.firstFacet&&this.facetCoords.clear(),this.facetCoords.set(i.facetId,i.clipRect?t.intersect(i.clipRect):t),this.#s?.(t.width),this.#o?.(t.height)}getEncoding(){const e=this.dataParent&&!this.options.blockEncodingInheritance?this.dataParent.getEncoding():{},t=this.spec.encoding||{},i={...e,...t};for(const[r,s]of Object.entries(i))s===null&&delete i[r];return i}getFacetAccessor(e){if(this.layoutParent)return this.layoutParent.getFacetAccessor(this)}getFacetFields(e){const t=this.getEncoding().sample;return Zt(t)?[t.field]:this.layoutParent?.getFacetFields(this)}getSampleFacetTexture(){}getScaleResolution(e){const t=yn(e);return this.getDataAncestors().map(i=>i.resolutions.scale[t]).find(i=>i)}getAxisResolution(e){const t=yn(e);return this.getDataAncestors().map(i=>i.resolutions.axis[t]).find(i=>i)}getConfiguredResolution(e,t){return this.spec.resolve?.[t]?.[e]}getConfiguredOrDefaultResolution(e,t){return this.getConfiguredResolution(e,t)??this.getConfiguredResolution("default",t)??this.getDefaultResolution(e,t)}getDefaultResolution(e,t){return"independent"}getBaseUrl(){return Ai(()=>this.dataParent?.getBaseUrl(),r4(this.spec.baseUrl))}isPickingSupported(){return!0}getTitleText(){const e=this.spec.title;if(e)return le(e)?e:be(e.text)?this.paramRuntime.evaluateAndGet(e.text.expr):e.text}_cache(e,t){return Ua(this,e,t)}_invalidateCacheByPrefix(e,t="self"){switch(t){case"self":Ns(this,e);break;case"ancestors":for(const i of this.getLayoutAncestors())Ns(i,e);break;case"progeny":this.visit(i=>Ns(i,e));break}}invalidateSizeCache(){Ns(this,"size"),this._invalidateCacheByPrefix("size","ancestors")}propagateInteractionEvent(e){}}function s4(n){return"unitsPerPixel"in n}function o4(n){const e="opacity"in n.spec?n.spec.opacity:void 0;if(e!==void 0){if(Ye(e))return t=>t*e;if(s4(e)){const t=c=>{const u=n.getScaleResolution(c),f=u?.getScale();if(["linear","index","locus"].includes(f?.type))return{scale:f,scaleResolution:u}},i=Fm(e.values,"opacity.values",n);if(!xe(e.unitsPerPixel))throw new _e('"opacity.unitsPerPixel" must be an array.',n);let r=()=>1,s=[];const o=()=>{const c=Fm(s.map(h=>h()),"opacity.unitsPerPixel",n),u=a4(c,i,n),f=Du().domain(u.unitsPerPixel).range(u.values).clamp(!0);r=h=>f(h)};s=e.unitsPerPixel.map(c=>{if(be(c)){const u=n.paramRuntime.watchExpression(c.expr,()=>{o(),n.context.animator.requestRender()});return()=>u(null)}else return()=>c}),o();const a=c=>{const f=c.scaleResolution.getAxisLength()||1e3;return Pr(c.scale.domain())/f};let l;if(e.channel==="auto"){const c=t("x"),u=t("y");if(c&&u)l=()=>(a(c)+a(u))/2;else if(c)l=()=>a(c);else if(u)l=()=>a(u);else throw new _e("Cannot find a resolved quantitative x or y scale for dynamic opacity!",n)}else{const c=e.channel?t(e.channel):t("x")??t("y");if(!c)throw new _e("Cannot find a resolved quantitative scale for dynamic opacity!",n);l=()=>a(c)}return c=>r(l())*c}else if(be(e)){const t=n.paramRuntime.watchExpression(e.expr,()=>n.context.animator.requestRender());return i=>t(null)*i}}return t=>t}function a4(n,e,t){if(!n.length)throw new _e('"opacity.unitsPerPixel" must contain at least one stop.',t);if(n.length!==e.length)throw new _e('"opacity.unitsPerPixel" and "opacity.values" must have the same length.',t);n.forEach((o,a)=>{if(o<=0)throw new _e("Invalid opacity.unitsPerPixel value at index "+a+". Stop values must be positive.",t)});const i=n.map((o,a)=>({stop:o,value:e[a]}));i.sort((o,a)=>a.stop-o.stop);const r=i.map(o=>o.stop),s=i.map(o=>o.value);for(let o=1;o<n.length;o++)if(r[o-1]<=r[o])throw new _e('"opacity.unitsPerPixel" must be strictly decreasing.',t);return{unitsPerPixel:r,values:s}}function Fm(n,e,t){if(!xe(n))throw new _e('"'+e+'" must evaluate to an array.',t);return n.map((i,r)=>{if(!Ye(i)||!Number.isFinite(i))throw new _e("Invalid "+e+" value at index "+r+". Expected a finite number.",t);return i})}const gf=n=>!!n?.step;function c4(n){return l4(n?.search,"search")}function l4(n,e){if(!n)return;const t=Array.isArray(n)?n:[n];if(t.length===0)throw new Error("The "+e+" channel array must not be empty.");const i=[];for(const r of t){if(!r||typeof r!="object"||!("field"in r))throw new Error("The "+e+" channel must be a field definition or an array of field definitions.");const s=r.field;if(typeof s!="string")throw new Error("The "+e+" channel field definition must include a string field name.");i.push(s)}return i}const u4={point:u3,rect:r3,rule:d3,link:x3,text:S3};class tt extends km{#e;#t=!1;#n=null;constructor(e,t,i,r,s,o){super(e,t,i,r,s,o),this.spec=e;const a=u4[this.getMarkType()];if(a)this.mark=new a(this);else throw new Error(`No such mark: ${this.getMarkType()}`);this.resolve(),this.#e=this.paramRuntime.allocateSetter("zoomLevel",1);for(const l of["x","y"]){const c=this.getScaleResolution(l);if(c){const u=()=>{this.#e(Math.sqrt(this.getZoomLevel()))};c.addEventListener("domain",u),this.registerDisposer(()=>c.removeEventListener("domain",u))}}this.needsAxes={x:!0,y:!0},this.#i()}#i(){for(const[e,t]of this.paramRuntime.paramConfigs){if(!("select"in t))continue;const i=Wo(t.select),r=i.on,s=i.clear;if(Xo(i)){let a=0;const l=h=>{this.paramRuntime.setValue(e,h)},c=()=>{const h=this.context.getCurrentHover();return h?.mark?.unitView===this?h.datum:null},u=r.filter?Sm(r.filter):()=>!0,f=(h,A)=>{if(!u(A.proxiedMouseEvent))return;const d=c(),g=d?d[dt]:0;let p;if(i.toggle)if(A.mouseEvent.shiftKey){if(d){const y=this.paramRuntime.getValue(e);p=JI(y,{toggle:[d]})}}else p=Bl(d?[d]:null);else g!=a&&(a=g,p=Il(d));p!==void 0&&l(p)};if(this.addInteractionEventListener(["mouseover","pointerover"].includes(r.type)?"mousemove":r.type,f),s){const h=s.filter?Sm(s.filter):()=>!0,A=(d,g)=>{if(!h(g.proxiedMouseEvent))return;a=0;const p=i.toggle?Bl():Il(null);l(p)};this.addInteractionEventListener(s.type,A)}}}}render(e,t,i={}){super.render(e,t,i),this.isConfiguredVisible()&&(e.pushView(this,t),e.renderMark(this.mark,i),e.popView(this))}getMarkType(){return typeof this.spec.mark=="object"?this.spec.mark.type:this.spec.mark}getEncoding(){const e=super.getEncoding(),t=this.mark.getSupportedChannels();for(const i of Object.keys(e))i!=="key"&&(t.includes(i)||delete e[i]);return e}resolve(e){if(!e){this.resolve("scale"),this.resolve("axis");return}const t=this.mark.encoding;for(const[i,r]of Object.entries(t)){if(!r||Array.isArray(r))continue;let s;if(gt(r))s=r;else if(Cl(r)){const l=r.condition;if(!Array.isArray(l)&&gt(l))s=l;else continue}else continue;const o=yn(s.resolutionChannel??i);if(!jo(o)||e=="axis"&&!us(o))continue;let a=this;for(;(a.getConfiguredOrDefaultResolution(o,e)=="forced"||a.dataParent&&["shared","excluded","forced"].includes(a.dataParent.getConfiguredOrDefaultResolution(o,e)))&&a.getConfiguredOrDefaultResolution(o,e)!="excluded";)a=a.dataParent;if(e=="axis"&&us(i)&&xl(o)){a.resolutions[e][o]||(a.resolutions[e][o]=new Mk(o));const l=a.resolutions[e][o],c=l.registerMember({view:this,channel:i,channelDef:s});this.registerDisposer(()=>{c()&&a.resolutions[e][o]===l&&delete a.resolutions[e][o]})}else if(e=="scale"&&jo(i)){if(!a.resolutions[e][o]){const f=new Rk(o);a.resolutions[e][o]=f;const h=A=>{this.context.glHelper?.createRangeTexture(A.scaleResolution,!0)};f.addEventListener("range",h),f.addEventListener("domain",h),this.registerDisposer(()=>{f.removeEventListener("range",h),f.removeEventListener("domain",h)})}const l=!this.isDomainInert(),c=a.resolutions[e][o],u=c.registerMember({view:this,channel:i,channelDef:s,contributesToDomain:l});this.registerDisposer(()=>{u()&&a.resolutions[e][o]===c&&(c.dispose(),delete a.resolutions[e][o])})}}}dispose(){super.dispose(),this.mark.dispose()}getDataAccessor(e){const t=this.mark.encoders;if(t)return t[e]?.dataAccessor}getSearchAccessors(){if(!this.#n){const e=c4(this.getEncoding())??[];this.#n=e.map(t=>$(t))}return this.#n}getFacetAccessor(e){const t=this.getDataAccessor("sample");return t||super.getFacetAccessor(this)}getCollector(){return this.flowHandle?.collector}registerDomainSubscriptions(){if(this.#t||this.isDomainInert())return;const e=this.getCollector();if(!e)return;const t=this.mark.encoders;if(!t)throw new Error("Encoders are not initialized!");this.#t=!0;const i=new Map;for(const r of Object.values(t)){if(!r)continue;const s=r.accessors??[];if(s.length!==0)for(const o of s){if(!hd(o)||o.channelDef.domainInert)continue;const a=this.getScaleResolution(o.scaleChannel);if(!a)throw new Error("Missing scale resolution for channel: "+o.scaleChannel);let l=i.get(a);l||(l=new Set,i.set(a,l)),l.add(o)}}for(const[r,s]of i){if(s.size===0)continue;const o=r.registerCollectorSubscriptions(e,s);this.registerDisposer(o)}}getZoomLevel(){const e=t=>this.getScaleResolution(t)?.getZoomLevel()??1;return $n.map(e).reduce((t,i)=>t*i,1)}propagateInteractionEvent(e){this.handleInteractionEvent(void 0,e,!0),e.target=this,!e.stopped&&this.handleInteractionEvent(void 0,e,!1)}getDefaultResolution(e,t){return e=="x"?"shared":"independent"}}class pf extends Error{constructor(e,t){super(t),this.kind=e}}async function Rm(n,e={}){let t;try{t=await fetch(n,{signal:e.signal})}catch(i){throw new pf("network",String(i))}if(!t.ok)throw new pf("http",String(t.status)+" "+t.statusText);try{return await t.json()}catch(i){throw new pf("json",String(i))}}function f4(n){const e=new Set;n.visit(t=>{for(const i of Object.values(t.resolutions.scale)){const r=i.name;if(r&&e.has(r))throw new Error(`The same scale name "${r}" occurs in multiple scale resolutions!`);e.add(r)}})}function A4(n){for(const e of $n){const t=n.getScaleResolution(e);t&&!t.name&&t.isZoomable()&&(t.name=`${e}_at_root`)}}function mf(n,e=()=>!0){return Promise.allSettled(n).then(t=>{if(e())for(const i of t)"value"in i?i.value.finalizeGraphicsInitialization():"reason"in i&&console.error(i.reason)})}async function h4(n,e,t){const i=n.import;if(!("url"in i))throw new Error("Not an url import: "+JSON.stringify(i));const r=Ai(e,i.url);let s;try{s=await Rm(r)}catch(o){throw new Error(`Could not load imported view spec: ${r}. Reason: ${o.message}`)}if(t.isViewSpec(s))return s.baseUrl=Ai(Op(i.url),s.baseUrl),s;throw new Error(`The imported spec "${r}" is not a view spec: ${JSON.stringify(n)}`)}function d4(n){const e=n.getSize(),t=n.getPadding(),i=(r,s)=>r.grow>0?void 0:r.px+s;return{width:i(e.width,t.horizontalTotal),height:i(e.height,t.verticalTotal)}}function*wf(n,e=[]){for(const[t,i]of n.entries())if(i instanceof Map)for(const r of wf(i,[...e,t]))yield r;else yield[[...e,t],i]}const Mm=2147483647,g4=Nm([Mm]);function Nm(n){let e=0;for(let t=0,i=n.length;t<i;t++)e=Math.max(e,n[t]);return Math.floor(Math.log2(e)/4)+1}function p4(n){const e=Nm(n);let t=Array.from({length:n.length},(s,o)=>o),i=new Array(n.length);const r=new Array(16);for(let s=0;s<e;s++){r.fill(0);const o=s*4,a=Math.pow(16,s),l=c=>{const u=n[t[c]];return s>=g4?u>Mm?Math.floor(u/a)%16:0:u>>o&15};for(let c=0;c<n.length;c++)r[l(c)]++;for(let c=1;c<16;c++)r[c]+=r[c-1];for(let c=n.length-1;c>=0;c--)i[--r[l(c)]]=t[c];[t,i]=[i,t]}return t}const Wa="|",yf="\\";class m4{#e=null;#t=null;#n=!1;invalidate(){this.#e=null,this.#t=null,this.#n=!1}findDatum(e,t,i){if(!e||e.length===0)return;const r=e.join(", ");if(e.length!==t.length)throw new Error(`Key tuple length ${t.length} does not match fields [${r}]`);(!this.#e||!this.#s(e))&&this.#i(e,i);const s=this.#t;let o;if(this.#n){let a="";for(let l=0;l<t.length;l++){l>0&&(a+=Wa);const c=s[l],u=Xa(t[l],c);a+=Tm(u)}o=a}else{const a=s[0];o=Xa(t[0],a)}return this.#e.get(o)}#i(e,t){const i=e.map(a=>$(a)),r=new Map,s=e.join(", "),o=e.length!==1;if(o)for(const a of t)for(let l=0,c=a.length;l<c;l++){const u=a[l];let f="";for(let A=0;A<i.length;A++){A>0&&(f+=Wa);const d=e[A],g=Xa(i[A](u),d);f+=Tm(g)}if(r.get(f)!==void 0){const A=i.map(d=>d(u));throw new Error(`Duplicate key detected for fields [${s}]: ${JSON.stringify(A)}`)}r.set(f,u)}else{const a=i[0],l=e[0];for(const c of t)for(let u=0,f=c.length;u<f;u++){const h=c[u],A=Xa(a(h),l);if(r.get(A)!==void 0)throw new Error(`Duplicate key detected for fields [${s}]: ${JSON.stringify(A)}`);r.set(A,h)}}this.#e=r,this.#t=[...e],this.#n=o}#s(e){if(!this.#t||this.#t.length!==e.length)return!1;for(let t=0;t<e.length;t++)if(this.#t[t]!==e[t])return!1;return!0}}function Xa(n,e){if(n===void 0)throw new Error(`Key field "${e}" is undefined. Ensure all key fields are present in the data.`);if(n===null)throw new Error(`Key field "${e}" is null. Ensure all key fields are present in the data.`);if(typeof n!="string"&&typeof n!="number"&&typeof n!="boolean")throw new Error(`Key field "${e}" must be a scalar value (string, number, or boolean).`);return n}function w4(n){if(!(n.indexOf(yf)!==-1||n.indexOf(Wa)!==-1))return n;let t="";for(let i=0;i<n.length;i++){const r=n[i];(r===yf||r===Wa)&&(t+=yf),t+=r}return t}function Tm(n){return typeof n=="string"?w4(n):String(n)}class Pm extends ml{#e=[];#t=$(dt);#n=[];#i=new m4;#s;#o;#r=new y4;get behavior(){return pl}get label(){return"collect"}constructor(e){super(),this.params=e??{type:"collect"},this.observers=new Set,this.facetBatches=new Kt([],JSON.stringify),this.#o=x4(this.params?.sort),this.#a()}#a(){this.#e=[],this.#n=[],this.#i.invalidate(),this.facetBatches.clear(),this.facetBatches.set(void 0,this.#e)}reset(){super.reset(),this.#a()}handle(e){this.#e.push(e)}beginBatch(e){this.#i.invalidate(),NI(e)&&(this.#e=[],this.facetBatches.set(Me(e.facetId),this.#e))}complete(){if(this.#e=[],this.params.groupby?.length){if(this.facetBatches.size>1)throw new Error("TODO: Support faceted data!");const e=this.facetBatches.get(void 0),t=this.params.groupby.map(r=>$(r)),i=t.length>1?Do(e,...t):C4(e,t[0]);this.facetBatches.clear();for(const[r,s]of wf(i))this.facetBatches.set(r,s)}if(this.#o)for(const e of this.facetBatches.values())e.sort(this.#o);this.#f(),this.#c(),super.complete(),this.#u();for(const e of this.observers)e(this)}observe(e){return this.observers.add(e),()=>{this.observers.delete(e)}}#c(){if(this.children.length)for(const[e,t]of this.facetBatches.entries()){if(e){const i={type:"facet",facetId:e};for(const r of this.children)r.beginBatch(i)}for(let i=0,r=t.length;i<r;i++)this._propagate(t[i])}}repropagate(){for(const e of this.children)e.reset();this.#c();for(const e of this.children)e.complete();this.#u()}getDomain(e,t,i){return this.#r.getDomain(e,()=>{const r=Ha(t);if(i.constant)r.extend(i({}));else if(this.completed)for(const s of this.facetBatches.values())for(let o=0,a=s.length;o<a;o++)r.extend(i(s[o]));return r})}subscribeDomainChanges(e,t){return this.#r.subscribe(e,t)}getData(){switch(this.#l(),this.facetBatches.size){case 0:return[];case 1:return[...this.facetBatches.values()][0];default:{const e=this.facetBatches;return{[Symbol.iterator]:function*(){for(const i of e.values())yield*i}}}}}visitData(e){this.#l();for(const t of this.facetBatches.values())for(let i=0;i<t.length;i++)e(t[i])}getItemCount(){let e=0;for(const t of this.facetBatches.values())e+=t.length;return e}#l(){if(!this.completed)throw new Error("Data propagation is not completed! No data are available.")}#u(){this.#r.hasCachedDomains()&&this.#r.clear(),this.#r.notify()}#f(){this.#s=[];const e=this.facetBatches.values().next().value?.[0];if(e==null||!(dt in e))return;let t=0;const i=[],r=this.#t;for(const[s,o]of this.facetBatches){this.#s.push({start:t,stop:t+o.length,facetId:s}),t+=o.length;for(let a=0,l=o.length;a<l;a++)i.push(r(o[a]))}this.#n=p4(i)}findDatumByUniqueId(e){if(!this.#n.length)return;const t=qn(a=>a.start).right,i=this.#t,r=qn(a=>i(s(a))).left,s=a=>{const l=t(this.#s,a),c=this.#s[l-1];return!c||a>=c.stop?void 0:this.facetBatches.get(c.facetId)[a-c.start]},o=r(this.#n,e);if(o>=0){const a=s(this.#n[o]);if(a&&i(a)===e)return a}}findDatumByKey(e,t){return this.#l(),this.#i.findDatum(e,t,this.facetBatches.values())}}class y4{#e=new Map;#t=new Map;hasCachedDomains(){return this.#e.size>0}clear(){this.#e.clear()}getDomain(e,t){const i=this.#e.get(e);if(i)return i;{const r=t();return this.#e.set(e,r),r}}subscribe(e,t){let i=this.#t.get(e);return i||(i=new Set,this.#t.set(e,i)),i.add(t),()=>{const r=this.#t.get(e);r&&(r.delete(t),r.size===0&&this.#t.delete(e))}}notify(){if(this.#t.size===0)return;const e=new Set;for(const t of this.#t.values())for(const i of t)e.add(i);for(const t of e)t()}}function C4(n,e){const t=new Map;for(let i=0,r=n.length;i<r;i++){const s=n[i],o=e(s);let a=t.get(o);a||(a=[],t.set(o,a)),a.push(s)}return t}function x4(n){if(n?.field){const e=Me(n.field);if(e.length==1&&!e[0].includes(".")){const t=Me(n.order)[0]??"ascending",i=JSON.stringify(e[0]);return new Function("a","b",`return a[${i}] ${t==="ascending"?"-":"+"} b[${i}];`)}return VA(n.field,n.order)}}class b4 extends Qe{get behavior(){return Rt}constructor(e){super(e),this.params=e,this.startAccessor=$(e.start),this.endAccessor=$(e.end),this.chromAccessor=e.chrom?$(e.chrom):t=>{},this.weightAccessor=e.weight?$(e.weight):t=>1,this.as={coverage:e.as??"coverage",start:e.asStart??e.start,end:e.asEnd??e.end,chrom:e.asChrom??e.chrom},this.createSegment=new Function("start","end","coverage","chrom","return {"+Object.entries(this.as).filter(([t,i])=>i).map(([t,i])=>`${JSON.stringify(i)}: ${t}`).join(", ")+"};"),this.ends=new sr}reset(){super.reset(),this.initialize()}initialize(){const e=this.as.coverage,t=this.as.end,i=this.as.chrom,r=this.startAccessor,s=this.endAccessor,o=this.chromAccessor,a=this.weightAccessor;let l,c,u,f=0,h=NaN;const A=this.ends;A.clear();const d=m=>{this._propagate(m),l=null},g=(m,y,C)=>{if(m==y)return;let w=!1;l&&(l[e]===C?(l[t]=y,w=!0):l[e]!=0&&d(l)),w||(l=this.createSegment(m,y,C,u))},p=()=>{let m=0;for(;(m=A.peekValue())!==void 0;)g(h,m,f),h=m,f-=A.pop();h=NaN,l&&d(l)};this.handle=m=>{const y=r(m);let C=0;for(;(C=A.peekValue())!==void 0&&C<y;)g(h,C,f),h=C,f-=A.pop();if(i){let E=o(m);E!==c&&(p(),u=E,c=u)}isNaN(h)||g(h,y,f),h=y;const w=a(m);f+=w,A.push(w,s(m))},this.complete=()=>{p(),super.complete()},this.beginBatch=m=>{p(),c=null,super.beginBatch(m)}}}function E4(n,e,t=s=>+s,i=0,r=n.length){const s=new sr,o=r-i;let a;for(a=0;a<e&&a<o;a++)s.push(a,t(n[i+a]));for(;a<o;a++){const u=t(n[i+a]);u>=s.peekValue()&&(s.push(a,u),s.pop())}const l=[];let c;for(;(c=s.pop())!==void 0;)l.push(n[i+c]);return l.reverse()}class I4{constructor(e,t=-1/0,i=1/0){this.maxSize=e,this.lowerLimit=t,this.upperLimit=i;const r=this.maxSize*2+1;this.lowerLimits=new Float64Array(r),this.upperLimits=new Float64Array(r),this.lowerChildren=new Int32Array(r),this.upperChildren=new Int32Array(r),this.reset()}reset(){this.lowerLimits.fill(0),this.upperLimits.fill(0),this.lowerChildren.fill(0),this.upperChildren.fill(0),this.n=1,this.lowerLimits[0]=this.lowerLimit,this.upperLimits[0]=this.upperLimit}_findSlot(e,t,i=0){if(e>=this.lowerLimits[i]&&t<=this.upperLimits[i]){const r=this.lowerChildren[i];if(r){const s=this._findSlot(e,t,r);return s>=0?s:this._findSlot(e,t,this.upperChildren[i])}else return i}else return-1}reserve(e,t){if(t-e<=0)throw new Error("Cannot reserve an empty or negative-size slot!");if(this.n+1>this.lowerLimits.length)return!1;const i=this._findSlot(e,t);if(i<0)return!1;const r=this.n++,s=this.n++;return this.lowerLimits[r]=this.lowerLimits[i],this.upperLimits[r]=e,this.lowerLimits[s]=t,this.upperLimits[s]=this.upperLimits[i],this.lowerChildren[i]=r,this.upperChildren[i]=s,!0}}class B4 extends Qe{get behavior(){return pl}constructor(e,t){if(super(e),this.params=e,this._data=[],this.channel=e.channel??"x",!["x","y"].includes(this.channel))throw new Error("Invalid channel: "+this.channel);this.startPosAccessor=$(this.params.pos),this.endPosAccessor=$(this.params.pos2??this.params.pos),this.startPosBisector=qn(this.startPosAccessor),this.endPosBisector=qn(this.endPosAccessor),this.scoreAccessor=$(this.params.score),this.widthAccessor=$(this.params.width),this.laneAccessor=this.params.lane?$(this.params.lane):o=>0,this.padding=this.params.padding??0,this.reservationMaps=new Map,this.resolution=t.getScaleResolution(this.channel);const i=()=>this._filterAndPropagate();this.schedule=()=>t.context.animator.requestTransition(i);const r=()=>this.schedule();this.resolution.addEventListener("domain",r),this.registerDisposer(()=>this.resolution.removeEventListener("domain",r));const s=t._addBroadcastHandler("layoutComputed",()=>this.schedule());this.registerDisposer(s)}complete(){const e=this.startPosAccessor;this._data.sort((t,i)=>e(t)-e(i));for(const t of new Set(this._data.map(this.laneAccessor)))this.reservationMaps.set(t,new I4(200));this.schedule(),super.complete()}_filterAndPropagate(){super.reset();const e=this.resolution.getScale(),t=this.resolution.getAxisLength();if(!t)return;for(const o of this.reservationMaps.values())o.reset();const i=e.domain(),s=E4(this._data,70,this.scoreAccessor,this.endPosBisector.left(this._data,i[0]),this.startPosBisector.right(this._data,i[1]));for(const o of s){let a=e(this.startPosAccessor(o))*t,l=e(this.endPosAccessor(o))*t;const c=l-a,u=this.widthAccessor(o)+this.padding*2;let f=(a+l)/2;const h=Math.max(0,(c-u)/2);if(h>0){const A=Math.max(0,u/2-f);f+=Math.min(A,h);const d=Math.max(0,u/2+f-t);f-=Math.min(d,h)}if(this.reservationMaps.get(this.laneAccessor(o)).reserve(f-u/2,f+u/2))if(this.params.asMidpoint){const A=Object.assign({},o);A[this.params.asMidpoint]=e.invert(f/t),this._propagate(A)}else this._propagate(o)}super.complete()}reset(){super.reset(),this._data=[],this.groups=new Map}handle(e){this._data.push(e)}}class v4 extends Qe{constructor(e,t){super(e,t),this.params=e,this.predicate=void 0}initialize(){let e="";if(S4(this.params))e=this.params.expr;else if(Q4(this.params)){const t=this.paramRuntime.findValue(this.params.param);if(!t)throw new Error(`Cannot initialize filter transform. Selection parameter "${this.params.param}" not found!`);e=KI(this.params,t)}else throw new Error("Invalid filter params: "+JSON.stringify(this.params));this.predicate=this.paramRuntime.watchExpression(e,()=>this.repropagate(),{scopeOwned:!1,registerDisposer:t=>this.registerDisposer(t)})}handle(e){this.predicate(e)&&this._propagate(e)}}function S4(n){return"expr"in n}function Q4(n){return"param"in n}class D4 extends Qe{get behavior(){return Rt}constructor(e){super(e),this.params=e;const t=e.index;if(e.fields){const i=Me(e.fields).map(s=>$(s)),r=Me(e.as||e.fields);if(i.length!==r.length)throw new Error(`Lengths of "fields" (${i.length}), and "as" (${r.length}) do not match!`);this.handle=s=>{const o=i.map((l,c)=>l(s)??[]),a=o[0].length;for(let l=0;l<a;l++){const c=Object.assign({},s);for(let u=0;u<i.length;u++)c[r[u]]=l<o[u].length?o[u][l]:null;t&&(c[t]=l),this._propagate(c)}}}else this.handle=i=>{for(let r=0;r<i.length;r++){const s=Object.assign({},i[r]);t&&(s[t]=r),this._propagate(s)}}}}const k4=48;function*F4(n,e=","){const t=e.charCodeAt(0);let i=0;for(let r=0;r<n.length;r++){const s=n.charCodeAt(r);s==t?(yield i,i=0):i=i*10+s-k4}yield i}class R4 extends Qe{get behavior(){return Rt}constructor(e){super(e);const t=$(e.exons??"exons"),i=$(e.start??"start"),[r,s]=e.as||["exonStart","exonEnd"];this.handle=o=>{let a=i(o),l=a,c=!0;const u=t(o);for(const f of F4(u)){if(c)l=a+f;else{a=l+f;const h=Object.assign({},o);h[r]=l,h[s]=a,this._propagate(h)}c=!c}}}}class M4 extends Qe{get behavior(){return Rt}constructor(e){super(e);const t=Me(e.field).map(s=>$(s)),i=Me(e.separator),r=Me(e.as||e.field);if(t.length!==i.length||t.length!==r.length)throw new Error(`Lengths of "separator" (${i.length}), "fields" (${t.length}), and "as" (${r.length}) do not match!`);this.handle=s=>{if(t.some(l=>!l(s)))return;const o=t.map((l,c)=>l(s).split(i[c]));N4(o,s);const a=o[0].length;for(let l=0;l<a;l++){const c=Object.assign({},s);for(let u=0;u<t.length;u++)c[r[u]]=o[u][l];this._propagate(c)}}}}function N4(n,e){const t=n.map(i=>i.length);if(!t.every(i=>i==t[0]))throw new Error("Mismatching number of elements in the fields to be split: "+JSON.stringify(e))}class T4 extends Qe{get behavior(){return wn}constructor(e,t){super(e,t),this.params=e,this.as=e.as,this.fn=void 0}initialize(){this.fn=this.paramRuntime.watchExpression(this.params.expr,()=>this.repropagate(),{scopeOwned:!1,registerDisposer:e=>this.registerDisposer(e)})}handle(e){e[this.as]=this.fn(e),this._propagate(e)}}class Lm extends Qe{get behavior(){return wn}constructor(e,t){e={channel:"x",...e},super(e),this.params=e;const i=e.channel;if(!["x","y"].includes(i))throw new Error("Invalid channel: "+i);const r=t.getScaleResolution(i).getScale(),s="genome"in r?r.genome():void 0;if(!s)throw new Error("LinearizeGenomicCoordinate transform requires a locus scale!");const o=$(e.chrom),a=Me(e.pos).map(g=>$(g)),l=Me(e.as);if(a.length!=l.length)throw new Error('The number of "pos" and "as" elements must be equal!');const c=Me(e.offset);let u;if(c.length==0)u=new Array(a.length).fill(0);else if(c.length==1)u=new Array(a.length).fill(c[0]);else if(c.length==a.length)u=c;else throw new Error(`Invalid "offset" parameter: ${JSON.stringify(e.offset)}!`);const f=new Function("datum","chromOffset","posAccessors",l.map((g,p)=>`datum[${JSON.stringify(g)}] = chromOffset + +posAccessors[${p}](datum) - ${u[p]};`).join(`
`));let h,A=0;const d=g=>{if(g!==h){if(A=s.cumulativeChromPositions.get(g),A===void 0)return;h=g}return A};this.handle=g=>{const p=o(g),m=d(p);if(m===void 0)throw new Error(`Unknown chromosome/contig "${p}" in datum: ${JSON.stringify(g)}`);f(g,m,a),this._propagate(g)}}}const Om={chars:JSON.parse('[{"id":87,"width":53,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":43.491,"chnl":15,"x":0,"y":0,"page":0},{"id":124,"width":17,"height":50,"xoffset":0,"yoffset":-32.193000000000005,"xadvance":10.521,"chnl":15,"x":0,"y":42,"page":0},{"id":40,"width":20,"height":49,"xoffset":0,"yoffset":-32.571000000000005,"xadvance":11.214,"chnl":15,"x":0,"y":94,"page":0},{"id":41,"width":19,"height":49,"xoffset":0,"yoffset":-32.571000000000005,"xadvance":11.214,"chnl":15,"x":0,"y":145,"page":0},{"id":36,"width":32,"height":49,"xoffset":0,"yoffset":-34.419000000000004,"xadvance":24.360000000000003,"chnl":15,"x":0,"y":196,"page":0},{"id":125,"width":21,"height":48,"xoffset":0,"yoffset":-32.193000000000005,"xadvance":12.642000000000001,"chnl":15,"x":0,"y":247,"page":0},{"id":91,"width":22,"height":48,"xoffset":0,"yoffset":-32.193000000000005,"xadvance":12.852,"chnl":15,"x":0,"y":297,"page":0},{"id":93,"width":19,"height":48,"xoffset":0,"yoffset":-32.193000000000005,"xadvance":12.852,"chnl":15,"x":0,"y":347,"page":0},{"id":123,"width":21,"height":48,"xoffset":0,"yoffset":-32.193000000000005,"xadvance":12.642000000000001,"chnl":15,"x":0,"y":397,"page":0},{"id":106,"width":19,"height":48,"xoffset":0,"yoffset":-30.639000000000003,"xadvance":10.08,"chnl":15,"x":0,"y":447,"page":0},{"id":81,"width":43,"height":47,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":33.621,"chnl":15,"x":21,"y":447,"page":0},{"id":77,"width":45,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":38.997,"chnl":15,"x":66,"y":447,"page":0},{"id":64,"width":43,"height":44,"xoffset":0,"yoffset":-28.539,"xadvance":35.133,"chnl":15,"x":23,"y":397,"page":0},{"id":92,"width":28,"height":43,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":18.984,"chnl":15,"x":68,"y":397,"page":0},{"id":47,"width":28,"height":43,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":18.984,"chnl":15,"x":98,"y":397,"page":0},{"id":109,"width":42,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":34.545,"chnl":15,"x":113,"y":447,"page":0},{"id":119,"width":42,"height":31,"xoffset":0,"yoffset":-21.315,"xadvance":32.991,"chnl":15,"x":157,"y":447,"page":0},{"id":42,"width":25,"height":42,"xoffset":0,"yoffset":-31.626,"xadvance":17.85,"chnl":15,"x":128,"y":397,"page":0},{"id":37,"width":42,"height":41,"xoffset":0,"yoffset":-30.387,"xadvance":33.663000000000004,"chnl":15,"x":155,"y":397,"page":0},{"id":79,"width":42,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":33.621,"chnl":15,"x":199,"y":397,"page":0},{"id":102,"width":24,"height":41,"xoffset":0,"yoffset":-30.534000000000002,"xadvance":14.721,"chnl":15,"x":243,"y":397,"page":0},{"id":100,"width":31,"height":41,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":23.520000000000003,"chnl":15,"x":269,"y":397,"page":0},{"id":98,"width":32,"height":41,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":23.520000000000003,"chnl":15,"x":302,"y":397,"page":0},{"id":56,"width":32,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":24.360000000000003,"chnl":15,"x":336,"y":397,"page":0},{"id":38,"width":40,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":29.904000000000003,"chnl":15,"x":370,"y":397,"page":0},{"id":108,"width":17,"height":41,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":9.912,"chnl":15,"x":412,"y":397,"page":0},{"id":107,"width":31,"height":41,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":21.336000000000002,"chnl":15,"x":431,"y":397,"page":0},{"id":48,"width":33,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":24.360000000000003,"chnl":15,"x":464,"y":397,"page":0},{"id":71,"width":38,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":30.681,"chnl":15,"x":21,"y":347,"page":0},{"id":83,"width":31,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":22.785,"chnl":15,"x":61,"y":347,"page":0},{"id":63,"width":27,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":18.795,"chnl":15,"x":94,"y":347,"page":0},{"id":105,"width":18,"height":41,"xoffset":0,"yoffset":-30.639000000000003,"xadvance":10.08,"chnl":15,"x":123,"y":347,"page":0},{"id":51,"width":32,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":24.360000000000003,"chnl":15,"x":143,"y":347,"page":0},{"id":104,"width":31,"height":41,"xoffset":0,"yoffset":-30.933000000000003,"xadvance":23.436,"chnl":15,"x":177,"y":347,"page":0},{"id":67,"width":37,"height":41,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":28.056,"chnl":15,"x":210,"y":347,"page":0},{"id":88,"width":37,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":27.258000000000003,"chnl":15,"x":249,"y":347,"page":0},{"id":68,"width":40,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":31.941000000000003,"chnl":15,"x":288,"y":347,"page":0},{"id":70,"width":32,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":23.751,"chnl":15,"x":330,"y":347,"page":0},{"id":34,"width":23,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":15.561000000000002,"chnl":15,"x":364,"y":347,"page":0},{"id":72,"width":38,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":32.067,"chnl":15,"x":389,"y":347,"page":0},{"id":73,"width":18,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":11.760000000000002,"chnl":15,"x":429,"y":347,"page":0},{"id":74,"width":24,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":17.745,"chnl":15,"x":449,"y":347,"page":0},{"id":75,"width":38,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":27.825000000000003,"chnl":15,"x":24,"y":297,"page":0},{"id":76,"width":31,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":21.567,"chnl":15,"x":475,"y":347,"page":0},{"id":66,"width":35,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":27.153000000000002,"chnl":15,"x":64,"y":297,"page":0},{"id":78,"width":38,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":32.067,"chnl":15,"x":101,"y":297,"page":0},{"id":33,"width":18,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":11.298,"chnl":15,"x":141,"y":297,"page":0},{"id":80,"width":34,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":25.221,"chnl":15,"x":161,"y":297,"page":0},{"id":65,"width":38,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":28.434,"chnl":15,"x":197,"y":297,"page":0},{"id":82,"width":36,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":26.313000000000002,"chnl":15,"x":237,"y":297,"page":0},{"id":35,"width":33,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":275,"y":297,"page":0},{"id":84,"width":34,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.801000000000002,"chnl":15,"x":310,"y":297,"page":0},{"id":85,"width":37,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":30.891000000000002,"chnl":15,"x":346,"y":297,"page":0},{"id":86,"width":38,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":28.434,"chnl":15,"x":385,"y":297,"page":0},{"id":39,"width":16,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":8.568000000000001,"chnl":15,"x":425,"y":297,"page":0},{"id":69,"width":32,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.255000000000003,"chnl":15,"x":443,"y":297,"page":0},{"id":89,"width":36,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":26.208000000000002,"chnl":15,"x":23,"y":247,"page":0},{"id":90,"width":34,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":25.284000000000002,"chnl":15,"x":477,"y":297,"page":0},{"id":49,"width":31,"height":40,"xoffset":0,"yoffset":-30.156000000000002,"xadvance":24.360000000000003,"chnl":15,"x":61,"y":247,"page":0},{"id":50,"width":32,"height":40,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":24.360000000000003,"chnl":15,"x":94,"y":247,"page":0},{"id":57,"width":32,"height":40,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":24.360000000000003,"chnl":15,"x":128,"y":247,"page":0},{"id":94,"width":32,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":162,"y":247,"page":0},{"id":96,"width":21,"height":40,"xoffset":0,"yoffset":-30.429000000000002,"xadvance":16.8,"chnl":15,"x":196,"y":247,"page":0},{"id":55,"width":33,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":219,"y":247,"page":0},{"id":54,"width":33,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":254,"y":247,"page":0},{"id":53,"width":32,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":289,"y":247,"page":0},{"id":52,"width":33,"height":40,"xoffset":0,"yoffset":-30.093000000000004,"xadvance":24.360000000000003,"chnl":15,"x":323,"y":247,"page":0},{"id":103,"width":31,"height":39,"xoffset":0,"yoffset":-21.630000000000003,"xadvance":21.84,"chnl":15,"x":358,"y":247,"page":0},{"id":112,"width":32,"height":39,"xoffset":0,"yoffset":-21.651,"xadvance":23.541,"chnl":15,"x":391,"y":247,"page":0},{"id":113,"width":31,"height":39,"xoffset":0,"yoffset":-21.651,"xadvance":23.520000000000003,"chnl":15,"x":425,"y":247,"page":0},{"id":116,"width":25,"height":39,"xoffset":0,"yoffset":-28.182000000000002,"xadvance":15.057,"chnl":15,"x":458,"y":247,"page":0},{"id":121,"width":31,"height":38,"xoffset":0,"yoffset":-21.273,"xadvance":21.651,"chnl":15,"x":34,"y":196,"page":0},{"id":59,"width":18,"height":36,"xoffset":0,"yoffset":-20.706,"xadvance":10.983,"chnl":15,"x":485,"y":247,"page":0},{"id":43,"width":32,"height":34,"xoffset":0,"yoffset":-24.486,"xadvance":24.360000000000003,"chnl":15,"x":67,"y":196,"page":0},{"id":60,"width":30,"height":33,"xoffset":0,"yoffset":-23.331000000000003,"xadvance":24.360000000000003,"chnl":15,"x":101,"y":196,"page":0},{"id":62,"width":31,"height":33,"xoffset":0,"yoffset":-23.331000000000003,"xadvance":24.360000000000003,"chnl":15,"x":133,"y":196,"page":0},{"id":117,"width":30,"height":32,"xoffset":0,"yoffset":-21.273,"xadvance":23.415000000000003,"chnl":15,"x":166,"y":196,"page":0},{"id":99,"width":29,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":20.055,"chnl":15,"x":198,"y":196,"page":0},{"id":110,"width":31,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":23.436,"chnl":15,"x":229,"y":196,"page":0},{"id":111,"width":32,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":23.814,"chnl":15,"x":262,"y":196,"page":0},{"id":126,"width":32,"height":26,"xoffset":0,"yoffset":-16.128,"xadvance":24.360000000000003,"chnl":15,"x":201,"y":447,"page":0},{"id":101,"width":31,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":22.176000000000002,"chnl":15,"x":296,"y":196,"page":0},{"id":114,"width":25,"height":32,"xoffset":0,"yoffset":-21.651,"xadvance":15.288,"chnl":15,"x":329,"y":196,"page":0},{"id":115,"width":27,"height":32,"xoffset":0,"yoffset":-21.609,"xadvance":18.186,"chnl":15,"x":356,"y":196,"page":0},{"id":97,"width":28,"height":32,"xoffset":0,"yoffset":-21.651,"xadvance":20.874000000000002,"chnl":15,"x":385,"y":196,"page":0},{"id":118,"width":31,"height":31,"xoffset":0,"yoffset":-21.273,"xadvance":21.672,"chnl":15,"x":415,"y":196,"page":0},{"id":61,"width":31,"height":29,"xoffset":0,"yoffset":-19.089000000000002,"xadvance":24.360000000000003,"chnl":15,"x":448,"y":196,"page":0},{"id":120,"width":30,"height":31,"xoffset":0,"yoffset":-21.273,"xadvance":20.916,"chnl":15,"x":21,"y":145,"page":0},{"id":58,"width":18,"height":31,"xoffset":0,"yoffset":-20.706,"xadvance":10.5,"chnl":15,"x":53,"y":145,"page":0},{"id":122,"width":28,"height":31,"xoffset":0,"yoffset":-21.273,"xadvance":18.984,"chnl":15,"x":73,"y":145,"page":0},{"id":95,"width":28,"height":16,"xoffset":0,"yoffset":0,"xadvance":19.278000000000002,"chnl":15,"x":235,"y":447,"page":0},{"id":45,"width":23,"height":24,"xoffset":0,"yoffset":-14.175,"xadvance":15.603000000000002,"chnl":15,"x":481,"y":196,"page":0},{"id":44,"width":17,"height":21,"xoffset":0,"yoffset":-4.956,"xadvance":9.534,"chnl":15,"x":103,"y":145,"page":0},{"id":46,"width":18,"height":15,"xoffset":0,"yoffset":-4.956,"xadvance":9.912,"chnl":15,"x":0,"y":497,"page":0},{"id":32,"width":0,"height":0,"xoffset":0,"yoffset":0,"xadvance":10.752,"chnl":15,"x":20,"y":497,"page":0}]'),common:{lineHeight:50.400000000000006,base:41.454,scaleW:512,scaleH:512,pages:1,packed:0,alphaChnl:0,redChnl:0,greenChnl:0,blueChnl:0}};class P4 extends Qe{get behavior(){return wn}constructor(e,t){super(e,t),this.params=e;const i=ou(Om),r=$(e.field),s=e.as;let o=0;if(be(e.fontSize)){const a=t.paramRuntime.watchExpression(e.fontSize.expr,()=>{o=a(),this.repropagate()},{scopeOwned:!1,registerDisposer:l=>this.registerDisposer(l)});o=a()}else o=e.fontSize;this.handle=a=>{const l=r(a);l!==void 0?a[s]=i.measureWidth(l,o):a[s]=0,this._propagate(a)}}}const L4=65536;class O4 extends Qe{get behavior(){return wn}constructor(e){super(e),this.params=e}reset(){super.reset(),this.initialize()}initialize(){const e=this.params,t=e.as||"lane",i=Ye(e.spacing)?e.spacing:1,r=$(e.start),s=$(e.end);if(!e.preference!=!e.preferredOrder)throw new Error('Must specify both "preference" and "preferredOrder"');if(e.preference){const o=new Float64Array(L4),a=$(e.preference),l=e.preferredOrder;let c=1/0;this.handle=u=>{const f=r(u);f<c&&o.fill(-1/0),c=f;const h=l.indexOf(a(u));let A=-1;if(h>=0&&o[h]<f)A=h;else{const d=r(u);for(A=0;A<o.length&&!(o[A]<d);A++);if(A>=o.length)throw new Error("Out of lanes!")}o[A]=s(u)+i,u[t]=A,this._propagate(u)}}else{const o=new sr,a=new sr;let l=-1/0,c=0;this.handle=u=>{const f=r(u);for(;o.length&&(o.peekValue()<=f||f<l);){const A=o.pop();a.push(A,A)}l=f;let h=a.pop();h===void 0&&(h=c++),u[t]=h,this._propagate(u),o.push(h,s(u)+i)}}}}class U4 extends Qe{get behavior(){return Rt}constructor(e){if(super(e),this.params=e,e.as&&e.as.length!=e.fields.length)throw new Error('"fields" and "as" have unequal lengths!');const t=e.fields.map(r=>$(r)),i=e.as?e.as:t.map(hx);this.handle=r=>{const s={};for(let o=0;o<t.length;o++)s[i[o]]=t[o](r);this._propagate(s)}}}class G4 extends Qe{get behavior(){return wn}constructor(e){super(e),this.params=e;const t=new RegExp(e.regex),i=typeof e.as=="string"?[e.as]:e.as,r=$(e.field);this.handle=s=>{const o=r(s);if(le(o)){const a=o.match(t);if(a){if(a.length-1!=i.length)throw new Error('The number of RegEx groups and the length of "as" do not match!');for(let l=0;l<i.length;l++)s[i[l]]=a[l+1]}else if(e.skipInvalidInput)for(let l=0;l<i.length;l++)s[i[l]]=void 0;else throw new Error(`"${o}" does not match the given regex: ${t.toString()}`)}else if(!e.skipInvalidInput)throw new Error(`Trying to match a non-string field. Encountered type: ${typeof o}, field content: "${o}".`);this._propagate(s)}}}class z4 extends Qe{get behavior(){return Rt}constructor(e){super(e),this.params=e;const t=Me(e.columnRegex).map(h=>new RegExp(h));for(const h of t)if(RegExp("|"+h.source).exec("").length-1!=1)throw new Error(`Regex ${h.toString()} must have exactly one capturing group!`);const i=Me(e.asValue);if(t.length!=i.length)throw new Error('Lengths of "columnRegex" and "as" are not equal!');const r=e.skipRegex?new RegExp(e.skipRegex):void 0,s=e.asKey||"sample";let o,a,l;const c=h=>{const A=Object.keys(h);for(const p of t)if(!A.some(m=>p.test(m)))throw new Error(`No columns matching the regex ${p.toString()} found in the data!`);const d=new Map;for(const[p,m]of t.entries())for(const y of A){const C=m.exec(y)?.[1];if(C!==void 0){let w=d.get(C);w||(w=[],d.set(C,w)),w[p]=y}}o=[...d.entries()],a=A.filter(p=>!t.some(m=>m.test(p))&&!(r&&r.test(p)));const g=[...a.map(p=>JSON.stringify(p)+": datum["+JSON.stringify(p)+"]"),JSON.stringify(s)+": sampleId",...i.map((p,m)=>JSON.stringify(p)+`: datum[attrs[${m}]]`)];l=new Function("datum","sampleId","attrs",`return {
`+g.join(`,
`)+`
};`)},u=h=>{o||c(h);for(let A=0;A<o.length;A++){const[d,g]=o[A],p=l(h,d,g);this._propagate(p)}},f=h=>{c(h),u(h),this.handle=u};this.handle=f,this.beginBatch=h=>{ld(h)&&(this.handle=f),super.beginBatch(h)}}}class H4 extends Qe{get behavior(){return wn}constructor(e){super(e),this.params=e,this.buffer=[]}reset(){super.reset(),this.buffer=[]}handle(e){this.buffer.push(e)}complete(){const e=this.params,t=e.as||["y0","y1"],i=e.sort?VA(e.sort.field,e.sort.order):void 0,r=e.field?$(e.field):()=>1,s=e.groupby.map(u=>$(u)),o=Db(this.buffer,u=>s.map(f=>f(u)).join()).map(u=>u[1]);let a=u=>!0;if(e.baseField){const u=$(e.baseField);a=f=>u(f)!==null}let l,c;switch(e.offset){case"normalize":l=(u,f)=>u/f,c=(u,f)=>qr(u,f);break;case"center":l=(u,f)=>u-f/2,c=(u,f)=>qr(u,f);break;case"information":{const u=Math.log2(e.cardinality??4);l=(f,h)=>f/h,c=(f,h)=>{const d=qr(f,y=>+!a(y)),g=qr(f,h),p=g-d;let m=0;for(let y=0;y<f.length;y++){const C=f[y];if(a(C)){const w=h(C)/p;m-=w*Math.log2(w)}}return p/(u-(m+0))*(p/g)}}break;default:l=(u,f)=>u,c=(u,f)=>1}for(const u of o){i&&u.sort(i);const f=c(u,r);let h=0;for(const A of u){const d=h+r(A);a(A)&&(A[t[0]]=l(h,f),A[t[1]]=l(d,f),this._propagate(A),h=d)}}super.complete()}}class _4 extends Qe{get behavior(){return Rt}constructor(e){super(e),this.params=e;const t=$(e.field??"sequence"),[i,r]=e.as??["pos","sequence"];this.handle=s=>{const o=Object.assign({},s,{[r]:"",[i]:0}),a=t(s);for(let l=0;l<a.length;l++){const c=Object.assign({},o);c[i]=l,c[r]=a.charAt(l),this._propagate(c)}}}}const Um={count:n=>n.length,valid:Eb,sum:qr,min:$c,max:Zc,mean:Tb,median:Pb,variance:Ib};class V4 extends Qe{get behavior(){return Rt}constructor(e){if(super(e),this.params=e,this.buffer=[],this.ops=[],this.as=[],e.fields){if(e.fields.length!=e.ops.length)throw new Error("Fields and ops must have the same length!");if(e.as&&e.as.length!=e.ops.length)throw new Error('If "as" is defined, "fields" and "as" must have the same length!');e.fields.forEach((t,i)=>{const r=$(t),s=Um[e.ops[i]];this.ops.push(o=>s(o,r)),this.as.push(e.as?e.as[i]:`${e.ops[i]}_${e.fields[i]}`)})}else this.ops.push(t=>Um.count(t)),this.as.push("count")}reset(){super.reset(),this.buffer=[]}handle(e){this.buffer.push(e)}complete(){const t=this.params?.groupby;if(t?.length>0){const i=t.map(s=>$(s)),r=Do(this.buffer,...i);for(const[s,o]of wf(r)){const a={};for(let l=0;l<t.length;l++)a[t[l]]=s[l];this.ops.forEach((l,c)=>{a[this.as[c]]=l(o)}),this._propagate(a)}}else{const i={};this.ops.forEach((r,s)=>{i[this.as[s]]=r(this.buffer)}),this._propagate(i)}super.complete()}}const Y4={aggregate:V4,collect:Pm,coverage:b4,filterScoredLabels:B4,filter:v4,flatten:D4,flattenCompressedExons:R4,flattenDelimited:M4,flattenSequence:_4,formula:T4,identifier:wl,linearizeGenomicCoordinate:Lm,measureText:P4,pileup:O4,project:U4,regexExtract:G4,regexFold:z4,sample:Tp,stack:H4};function J4(n,e){const t=Y4[n.type];if(t)return new t(n,e);throw new Error("Unknown transform: "+n.type)}function Gm(n,e=[]){if(!_m(n)&&!Hm(n))return;const t={...n.format};if(t.type??=Hm(n)&&q4(e),t.parse??="auto",!t.type)throw new Error("Format for the data source was not defined and it could not be inferred: "+JSON.stringify(n));return t}function K4(n){return dl(n)?.responseType??"text"}function q4(n){if(Array.isArray(n)&&(n=n[0]),n)return n.match(/\.(csv|tsv|json)/)?.[1]}const zm=n=>typeof n!="object"?j4:W4,j4=n=>({data:n}),W4=n=>n;function Hm(n){return"url"in n}class pi extends ml{view;constructor(e){super(),this.view=e}get identifier(){}setLoadingStatus(e,t){this.view.context.dataFlow.loadingStatusRegistry.set(this.view,e,t)}get paramRuntime(){return this.view.paramRuntime}handle(e){throw new Error("Source does not handle incoming data!")}async load(){}repropagate(){this.load()}}function _m(n){return"values"in n}class X4 extends pi{constructor(e,t){if(super(t),this.params=e,typeof e.values=="string"&&!e?.format?.type)throw new Error("Data format type (csv, dsv, ...) must be specified if a string is provided!")}get label(){return"inlineSource"}isTrivial(){const e=this.params.values,t=Array.isArray(e)?e[0]:e;return!!(t&&Object.keys(t).length==0&&t.constructor===Object)}updateDynamicData(e){this.#e(e)}loadSynchronously(){this.#e(this.params.values)}#e(e){let t=[],i=r=>r;if(Array.isArray(e))e.length>0&&(t=e,i=zm(e[0]));else if(typeof e=="object")t=[e];else if(typeof e=="string")t=gl(e,Gm(this.params));else throw new Error('"values" in data configuration is not an array, object, or a string!');this.reset(),this.beginBatch({type:"file"});for(const r of t)this._propagate(i(r));this.complete()}async load(){this.loadSynchronously()}}function Z4(n){return"url"in n}class $4 extends pi{constructor(e,t){super(t),this.params=fs(t.paramRuntime,e,()=>this.load(),i=>this.registerDisposer(i),{batchMode:"whenPropagated"}),this.baseUrl=t?.getBaseUrl()}get identifier(){return JSON.stringify({params:this.params,baseUrl:this.baseUrl})}get label(){return"urlSource"}async#e(e){const t=Ai(this.baseUrl,e.urlsFromFile),i=await fetch(t);if(!i.ok)throw new Error(`Cannot load "${t}": ${i.status} ${i.statusText}`);const r=await i.text();return gl(r,{type:e.type??"tsv"}).map(o=>typeof o=="string"?o:o.url).map(o=>Ai(t,o))}async load(){const e=Ie(this.params.url),t=typeof e=="object"&&"urlsFromFile"in e?await this.#e(e):(Array.isArray(e)?e:[e]).map(a=>Ai(this.baseUrl,a)),i=Gm(this.params,t),r=K4(i.type);if(t.length===0||!t[0]){this.reset(),this.complete();return}const s=async a=>{try{const l=await fetch(a);if(!l.ok)throw new Error(`${l.status} ${l.statusText}`);return typeof l[r]=="function"?l[r]():l.text()}catch(l){throw new Error(`Could not load data: ${a}. Reason: ${l.message}`)}},o=(a,l)=>{try{const c=gl(a,i);this.beginBatch({type:"file",url:l});for(const u of c)this._propagate(u)}catch(c){throw new Error(`Cannot parse: ${l}: ${c.message}`)}};this.setLoadingStatus("loading"),this.reset();try{await Promise.all(t.map(a=>s(a).then(o))),this.setLoadingStatus("complete")}catch(a){this.setLoadingStatus("error",a.message)}this.complete()}}function e8(n){return"sequence"in n}class t8 extends pi{constructor(e,t){if(super(t),this.sequence=fs(t.paramRuntime,e.sequence,()=>this.loadSynchronously(),i=>this.registerDisposer(i),{batchMode:"whenPropagated"}),!("start"in this.sequence))throw new Error("'start' is missing from sequence parameters!");if(!("stop"in this.sequence))throw new Error("'stop' is missing from sequence parameters!")}get label(){return"sequenceSource"}loadSynchronously(){const e=Ie(this.sequence.as)??"data",t=Ie(this.sequence.start)??0,i=Ie(this.sequence.step)??1,r=Ie(this.sequence.stop);this.reset(),this.beginBatch({type:"file"});for(let s=t;s<r;s+=i)this._propagate({[e]:s});this.complete()}async load(){this.loadSynchronously()}}class Cf extends pi{initializedPromise=Promise.resolve();_lastLoadedDomain;constructor(e,t){if(super(e),t){if(t!=="x"&&t!=="y")throw new Error(`Invalid channel specified for the lazy data source: ${t}. Must be either "x" or "y"`)}else throw new Error('No channel has been specified for the lazy data source. Must be either "x" or "y".');if(this.channel=t,this.scaleResolution=this.view.getScaleResolution(t),!this.scaleResolution){const r=[`The lazy data source cannot find a resolved scale for channel "${t}".`];throw this.view instanceof tt||r.push('Make sure the view has a "shared" scale resolution as it is not a unit view.'),new Error(r.join(" "))}const i=()=>{this.view.isVisible()&&this.onDomainChanged(this.scaleResolution.getDomain(),this.scaleResolution.getComplexDomain())};this.scaleResolution.addEventListener("domain",i),this.view.context.addBroadcastListener("layoutComputed",i)}get genome(){const e=this.scaleResolution.getScale();if("genome"in e){const t=e.genome();if(t)return t}throw new Error("No genome has been defined!")}onDomainChanged(e,t){}requestRender(){this.view.context.animator.requestRender()}async load(){this.reset(),this.complete()}publishData(e){this._lastLoadedDomain=Array.from(this.scaleResolution.getDomain()),this.reset(),this.beginBatch({type:"file"});for(const t of e)for(const i of t)this._propagate(i);this.complete()}isDataReadyForDomain(e){const t=e[this.channel];if(!t||!this._lastLoadedDomain)return!1;const[i,r]=t[0]<=t[1]?t:[t[1],t[0]],[s,o]=this._lastLoadedDomain[0]<=this._lastLoadedDomain[1]?this._lastLoadedDomain:[this._lastLoadedDomain[1],this._lastLoadedDomain[0]];return i>=s&&r<=o}}class n8 extends Cf{ticks=[];constructor(e,t){const i={...e};super(t,i.channel),this.params=e}get label(){return"axisTickSource"}async load(){this.ticks=null,this.onDomainChanged()}onDomainChanged(){const e=this.scaleResolution.getScale(),t=this.scaleResolution.getAxisLength(),i=this.params.axis,r=l=>25+60*Bm(100,700,l),s=Ye(i.tickCount)?i.tickCount:Math.round(t/r(t)),o=zp(e,s,i.tickMinStep),a=i.values?Hp(e,i.values,o):H3(e,o);if(this.ticks==null||!Li(a,this.ticks)){this.ticks=a;const l=V3(e,s,i.format);this.publishData([a.map(c=>({value:c,label:l(c)}))])}}}class i8 extends Cf{constructor(e,t){super(t,e.channel)}get label(){return"axisGenomeSource"}async load(){this.publishData([this.genome.chromosomes])}}class js extends Cf{#e=new AbortController;#t=[0,0];#n=[0,0];#i=0;params;setupDebouncing(e){const t=()=>Ie(e.debounce),i=e.debounceMode;if(i=="domain")this.onDomainChanged=Ko(this.onDomainChanged.bind(this),t,!1);else if(i=="window")this.loadInterval=Ko(this.loadInterval.bind(this),t,!1);else throw new Error("Invalid debounceMode: "+i)}onDomainChanged(e){this.#n=e;const t=Ie(this.params?.windowSize)??-1;e[1]-e[0]>t||this.callIfWindowsChanged(e,t,async i=>{await this.initializedPromise,this.loadInterval(i)})}reloadLastDomain(){const e=this.#n;this.#n=[0,0],this.#t=[0,0],this._lastLoadedDomain=void 0,this.onDomainChanged(e)}async loadInterval(e){}publishData(e){const t=this._lastLoadedDomain;super.publishData(e),t&&(this._lastLoadedDomain=t)}async discretizeAndLoad(e,t){this.#e.abort(),this.setLoadingStatus("loading"),this.#e=new AbortController;const i=this.#e.signal,r=this.genome.continuousToDiscreteChromosomeIntervals(e);try{const s=await Promise.all(r.map(async o=>t(o,i)));if(!i.aborted)return this.setLoadingStatus("complete"),this._lastLoadedDomain=Array.from(e),s}catch(s){if(!i.aborted)throw this.setLoadingStatus("error",s.message),s}}callIfWindowsChanged(e,t,i){const r=[Math.max(Math.floor(e[0]/t)*t,0),Math.min(Math.ceil(e[1]/t)*t,this.genome.totalSize)],s=this.#t;(t!==this.#i||r[0]<s[0]||r[1]>s[1])&&(this.#t=r,this.#i=t,i(r))}}class r8 extends js{constructor(e,t){const i={channel:"x",windowSize:7e3,debounce:200,debounceMode:"window",...e};if(super(t,i.channel),this.params=i,!this.params.url)throw new Error("No URL provided for IndexedFastaSource");this.setupDebouncing(this.params),this.initializedPromise=new Promise(r=>{Promise.all([Promise.resolve().then(()=>QN),Promise.resolve().then(()=>eo)]).then(([{IndexedFasta:s},{RemoteFile:o}])=>{const a=l=>new o(qs(l,this.view.getBaseUrl()));this.fasta=new s({fasta:a(this.params.url),fai:a(this.params.indexUrl??this.params.url+".fai")}),r()})})}get label(){return"bigWigSource"}async loadInterval(e){const t=await this.discretizeAndLoad(e,async(i,r)=>this.fasta.getSequence(i.chrom,i.startPos,i.endPos,{signal:r}).then(s=>{if(s!=null)return{chrom:i.chrom,start:i.startPos,sequence:s};console.log(`No sequence found for interval ${i.chrom}:${i.startPos}-${i.endPos}`)}));this.publishData([t.filter(i=>i!==void 0)])}}class s8 extends js{#e=[];#t;constructor(e,t){const i={pixelsPerBin:2,channel:"x",debounce:200,debounceMode:"window",...e},r=Ie(i.channel);if(super(t,r),this.params=fs(t.paramRuntime,i,s=>{s.has("url")?this.#n().then(()=>this.reloadLastDomain()):s.has("pixelsPerBin")&&this.reloadLastDomain()},s=>this.registerDisposer(s),{batchMode:"whenPropagated"}),!this.params.url)throw new Error("No URL provided for BigWigSource");this.setupDebouncing(this.params),this.#n()}get label(){return"bigWigSource"}#n(){return this.initializedPromise=new Promise((e,t)=>{Promise.all([Promise.resolve().then(()=>xC),Promise.resolve().then(()=>eo)]).then(([{BigWig:i},{RemoteFile:r}])=>{this.#t=new i({filehandle:new r(qs(Ie(this.params.url),this.view.getBaseUrl()))}),this.setLoadingStatus("loading"),this.#t.getHeader().then(s=>{this.#e=s.zoomLevels.map(o=>o.reductionLevel).reverse(),this.#e.push(1),this.setLoadingStatus("complete"),e()}).catch(s=>{this.load(),this.setLoadingStatus("error",`${Ie(this.params.url)}: ${s.message}`),t(s)})})}),this.initializedPromise}async onDomainChanged(e){await this.initializedPromise;const t=this.scaleResolution.getAxisLength()||700,i=o8(e,t,this.#e),r=Math.max(i*t,5e3);this.callIfWindowsChanged(e,r,s=>this.loadInterval(s,i))}async loadInterval(e,t){const i=.5/t/Ie(this.params.pixelsPerBin),r=await this.discretizeAndLoad(e,(s,o)=>this.#t.getFeatures(s.chrom,s.startPos,s.endPos,{scale:i,signal:o}).then(a=>a.map(l=>({chrom:s.chrom,start:l.start,end:l.end,score:l.score}))));r&&this.publishData(r)}}function o8(n,e,t){const i=(n[1]-n[0])/e;return t.find(r=>r<i)??t.at(-1)}class a8 extends js{parser;bbi;parseLine;constructor(e,t){const i={channel:"x",windowSize:1e6,debounce:200,debounceMode:"window",...e},r=Ie(i.channel);if(super(t,r),this.params=fs(t.paramRuntime,i,s=>{s.has("url")?this.#e().then(()=>this.reloadLastDomain()):s.has("windowSize")&&this.reloadLastDomain()},s=>this.registerDisposer(s),{batchMode:"whenPropagated"}),!this.params.url)throw new Error("No URL provided for BigBedSource");this.setupDebouncing(this.params),this.#e()}get label(){return"bigBedSource"}#e(){return this.initializedPromise=new Promise((e,t)=>{Promise.all([Promise.resolve().then(()=>TT),Promise.resolve().then(()=>xC),Promise.resolve().then(()=>eo)]).then(([i,{BigBed:r},{RemoteFile:s}])=>{const o=i.default;this.bbi=new r({filehandle:new s(qs(Ie(this.params.url),this.view.getBaseUrl()))}),this.setLoadingStatus("loading"),this.bbi.getHeader().then(async a=>{this.parser=new o({autoSql:a.autoSql});try{const l=c8(this.parser);this.parseLine=(c,u)=>l(c,u.start,u.end,u.rest)}catch{this.parseLine=(c,u)=>this.parser.parseLine(`${c}	${u.start}	${u.end}	${u.rest}`)}this.setLoadingStatus("complete"),e()}).catch(a=>{this.load(),this.setLoadingStatus("error",`${Ie(this.params.url)}: ${a.message}`),t(a)})})}),this.initializedPromise}async loadInterval(e){const t=await this.discretizeAndLoad(e,async(i,r)=>this.bbi.getFeatures(i.chrom,i.startPos,i.endPos,{signal:r}).then(s=>s.map(o=>this.parseLine(i.chrom,o))));t&&this.publishData(t)}}function c8(n){const e=n.autoSql.fields.filter(y=>y.type).slice(3);let t=0,i="",r=0,s={};const o="	",a=o.charCodeAt(0),l=48,c=45;function u(){let y=i.indexOf(o,t);y<0&&(y=r);const C=i.substring(t,y);return t=y+1,C}function f(){let y=0,C=i.charCodeAt(t),w=1;C===c&&(w=-1,t++,C=i.charCodeAt(t));do{if(C===a){t++;break}y=y*10+C-l,C=i.charCodeAt(++t)}while(t<r);return y*w}const h=e.map(y=>`${JSON.stringify(y.name)}: ${y.isNumeric?"0":"emptyString"}`),A=new Function(`
        const emptyString = "";
        return function makeTemplate(chrom, chromStart, chromEnd) {
            return {
                chrom,
                chromStart,
                chromEnd,
                ${h.join(`,
`)}
            }
        };`)(),d=e.map(y=>{const C=y.type,w=JSON.stringify(y.name);if(["ubyte","int","uint"].includes(C))return`d[${w}] = parseInt();`;if(y.isNumeric)return`d[${w}] = Number(parseString());`;if(["char","string","lstring"].includes(C))return`d[${w}] = parseString();`;throw new Error("Unsupported type: "+C)}),g=l8(d,50).map((y,C)=>Function("parseInt","parseString",`return function parseFieldChunk${C}(d) {
            ${y.join(`
`)}
        }`)(f,u));function p(y){i=y,r=y.length,t=0}function m(y,C,w,E){p(E),s=A(y,C,w);for(const I of g)I(s);return s}return m}function l8(n,e){return Array.from({length:Math.ceil(n.length/e)},(t,i)=>n.slice(i*e,i*e+e))}class u8 extends js{#e;chrPrefixFixer=e=>e;constructor(e,t){const i={channel:"x",windowSize:2e4,debounce:200,debounceMode:"domain",...e};if(super(t,i.channel),this.params=i,!this.params.url)throw new Error("No URL provided for BamSource");this.setupDebouncing(this.params),this.initializedPromise=new Promise(r=>{Promise.all([Promise.resolve().then(()=>$6),Promise.resolve().then(()=>eo)]).then(([{BamFile:s},{RemoteFile:o}])=>{const a=l=>new o(qs(l,this.view.getBaseUrl()));this.#e=new s({bamFilehandle:a(this.params.url),baiFilehandle:a(this.params.indexUrl??this.params.url+".bai")}),this.#e.getHeader().then(l=>{const c=this.genome.hasChrPrefix(),u=this.#e.indexToChr?.[0]?.refName.startsWith("chr");c&&!u?this.chrPrefixFixer=f=>f.replace("chr",""):!c&&u&&(this.chrPrefixFixer=f=>"chr"+f),r()})})})}get label(){return"bamSource"}async loadInterval(e){const t=await this.discretizeAndLoad(e,async(i,r)=>this.#e.getRecordsForRange(this.chrPrefixFixer(i.chrom),i.startPos,i.endPos,{signal:r}).then(s=>s.map(o=>({chrom:i.chrom,start:o.start,end:o.end,name:o.name,cigar:o.CIGAR,mapq:o.mq,strand:o.strand===1?"+":"-"}))));t&&this.publishData(t)}}class Vm extends js{#e;constructor(e,t){const i={channel:"x",windowSize:3e6,debounce:200,debounceMode:"domain",addChrPrefix:!1,...e},r=Ie(i.channel);if(super(t,r),this.params=fs(t.paramRuntime,i,s=>{s.has("url")||s.has("indexUrl")||s.has("addChrPrefix")?this.#t().then(()=>this.reloadLastDomain()):s.has("windowSize")&&this.reloadLastDomain()},s=>this.registerDisposer(s),{batchMode:"whenPropagated"}),!Ie(this.params.url))throw new Error("No URL provided for TabixSource");this.setupDebouncing(this.params),this.#t()}#t(){return this.initializedPromise=new Promise((e,t)=>{Promise.all([Promise.resolve().then(()=>l9),Promise.resolve().then(()=>eo)]).then(async([{TabixIndexedFile:i},{RemoteFile:r}])=>{const s=c=>new r(qs(c,this.view.getBaseUrl())),o=Ie(this.params.url),a=Ie(this.params.indexUrl)??o+".tbi",l=Ie(this.params.addChrPrefix);this.#e=new i({filehandle:s(o),tbiFilehandle:s(a),renameRefSeqs:l===!0?c=>"chr"+c:l?c=>l+c:void 0});try{this.setLoadingStatus("loading");const c=await this.#e.getHeader();await this._handleHeader(c),this.setLoadingStatus("complete"),e()}catch(c){this.load(),this.setLoadingStatus("error",`${Ie(this.params.url)}: ${c.message}`),t(c)}})}),this.initializedPromise}async loadInterval(e){await this.initializedPromise;const t=await this.discretizeAndLoad(e,async(i,r)=>{const s=[];return await this.#e.getLines(i.chrom,i.startPos,i.endPos,{lineCallback:o=>{s.push(o)},signal:r}),this._parseFeatures(s)});t&&this.publishData(t)}async _handleHeader(e){}_parseFeatures(e){return[]}}class f8 extends Vm{#e;get label(){return"gff3Source"}async _handleHeader(e){this.#e=await Promise.resolve().then(()=>S9)}_parseFeatures(e){return this.#e?.parseArraySync(e)}}class A8 extends Vm{#e;get label(){return"vcfSource"}async _handleHeader(e){const t=(await Promise.resolve().then(()=>N9)).default;this.#e=new t({header:e})}_parseFeatures(e){return e.map(t=>{const i=this.#e.parseLine(t);return delete i.GENOTYPES,i.SAMPLES=i.SAMPLES(),i})}}const h8=[];function d8(n,e){if(_m(n))return new X4(n,e);if(Z4(n))return new $4(n,e);if(e8(n))return new t8(n,e);if(g8(n))return B8(n.lazy,e);throw new Error("Cannot figure out the data source type: "+JSON.stringify(n))}function g8(n){return"lazy"in n}function p8(n){return n?.type=="axisTicks"}function m8(n){return n?.type=="axisGenome"}function w8(n){return n?.type=="indexedFasta"}function y8(n){return n?.type=="bigwig"}function C8(n){return n?.type=="bigbed"}function x8(n){return n?.type=="bam"}function b8(n){return n?.type=="gff3"}function E8(n){return n?.type=="vcf"}const I8=[{guard:p8,Source:n8},{guard:m8,Source:i8},{guard:w8,Source:r8},{guard:y8,Source:s8},{guard:C8,Source:a8},{guard:x8,Source:u8},{guard:b8,Source:f8},{guard:E8,Source:A8}];function B8(n,e){for(const t of h8)if(t.guard(n))return new t.Source(n,e);for(const t of I8)if(t.guard(n))return new t.Source(n,e);throw new Error("Cannot figure out the data source type: "+JSON.stringify(n))}function v8(n){const e=Ym(n).filter(i=>typeof i=="string"),t=new Function("source","return { "+e.map(i=>JSON.stringify(i)).map(i=>`${i}: source[${i}]`).join(`,
`)+" };");return t.properties=e,t}function Ym(n){let e=[];do e=e.concat(Object.keys(n)),n=Object.getPrototypeOf(n);while(n&&n!==Object.prototype);return Array.from(new Set(e))}class Za extends Qe{get behavior(){return Rt}#e;#t=e=>e;constructor(){super({type:"clone"});const e=t=>{const i=Ym(t);(!this.#e||!Li(i,this.#e))&&(this.#e=i,this.#t=v8(t));const r=this.#t;this.handle=s=>this._propagate(r(s)),this.handle(t)};this.handle=e,this.beginBatch=t=>{ld(t)&&(this.handle=e),super.beginBatch(t)}}}function S8(n){return"name"in n}class Jm extends pi{#e;constructor(e,t,i){super(t),this.provider=i,this.params=e}get identifier(){return this.params.name}get label(){return"namedSource"}updateDynamicData(e){this.#e=e,this.loadSynchronously()}loadSynchronously(){const e=this.#e??this.provider(this.params.name)??[];let t=i=>i;if(Array.isArray(e))e.length>0&&(t=zm(e[0]));else throw new Error(`Named data "${this.params.name}" is not an array!`);this.reset(),this.beginBatch({type:"file"});for(const i of e)this._propagate(t(i));this.complete()}async load(){this.loadSynchronously()}}class Km{#e;#t;loadingStatusRegistry;constructor(){this.#e=new Set,this.#t=new Set,this.loadingStatusRegistry=new ad}get dataSources(){return[...this.#e]}get collectors(){return[...this.#t]}replaceDataSources(e){this.#e=new Set(e)}addDataSource(e){this.#e.add(e)}removeDataSource(e){e.disposeSubtree(),this.#e.delete(e)}addCollector(e){this.#t.add(e)}removeCollector(e){e.parent&&e.parent.removeChild(e),e.disposeSubtree(),e.observers.clear(),this.#t.delete(e)}pruneCollectorBranch(e){let t=e.parent;for(t&&t.removeChild(e),e.disposeSubtree();t&&t.children.length===0;){const i=t;t=i.parent,t?(t.removeChild(i),i.dispose()):i instanceof pi?this.removeDataSource(i):i.dispose()}}findNamedDataSource(e){let t;for(const i of this.#e.values())if(i instanceof Jm&&e==i.identifier){if(t&&t!==i)throw new Error(`Found multiple instances of named data: ${e}. Data flow optimization is broken (it's a bug).`);t=i}if(t)return{dataSource:t}}}function Q8(n,e){const t=new Map,i=[];for(const r of n)t.set(r,{ref:r,children:[]});for(const r of t.values()){const s=t.get(e(r.ref));s?s.children.push(r):i.push(r)}return i}function qm(n,e,t){const i=e.preOrder?.(n);if(i)return i;for(const r of t(n)){const s=qm(r,e,t);if(s==="stop")return s}return e.postOrder?.(n)}function D8(n,e){return qm(n,e,t=>t.children)}function k8(n,e,t,i){const r=[],s=[];let o;const a=e??new Km,l=[],c=i??(()=>!0);function u(m,y=()=>{}){if(!o)throw y()||new Error("Cannot append data flow node, no parent exist!");return o.addChild(m),o=m,r.push(m),m}function f(m,y){return u(m,()=>new Error("Cannot append a transform because no (inherited) data are available! "))}function h(m,y){for(const C of m){let w;try{w=J4(C,y)}catch(E){throw console.warn(E),new Error(`Cannot initialize "${C.type}" transform: ${E}`)}w.behavior&wn&&f(new Za),f(w)}}function A(){return r.findLastIndex(m=>m instanceof wl)>r.findLastIndex(m=>m instanceof pi)}const d=m=>{if(!c(m)){const y=m.flowHandle?.node;if(y){y!==o&&(o=y,r.push(y));return}if(m.spec.data||m.spec.transform||m instanceof tt)throw new Error("Cannot reuse missing flow nodes for "+m.getPathString());return}if(m.spec.data){const y=m.flowHandle?.dataSource;y&&y.view===m&&!y.identifier&&a.removeDataSource(y);const C=S8(m.spec.data)?new Jm(m.spec.data,m,m.context.getNamedDataFromProvider):d8(m.spec.data,m);o=C,r.push(C),a.addDataSource(C),m.flowHandle??={},m.flowHandle.dataSource=C}if(m.spec.transform&&h(m.spec.transform,m),m instanceof tt){if(!o)throw new Error(`A unit view (${m.getPathString()}) has no (inherited) data source`);const y=R8(m);if(y){l.push(y.rewrite);for(const E of y.transforms)f(E)}m.mark.isPickingParticipant()&&!A()&&(f(new Za),f(new wl({type:"identifier"})));const C=new Pm({type:"collect",groupby:m.getFacetFields(),sort:M8(m,y?.rewrittenEncoding)});u(C);const w=m.flowHandle?.collector;w&&a.removeCollector(w),a.addCollector(C),m.flowHandle??={},m.flowHandle.collector=C}o&&(m.flowHandle??={},m.flowHandle.node=o)},g=F8(n,t),p=Q8(g,m=>m.dataParent);for(const m of p)D8(m,{preOrder:y=>{s.push({view:y.ref,nodeStackDepth:r.length}),d(y.ref)},postOrder:()=>{const{nodeStackDepth:y}=s.pop();r.length=y,o=r.at(-1)}});return l.forEach(m=>m()),a}function F8(n,e){if(!e)return n.getDescendants();const t=[];return n.visit(i=>{if(!e(i))return Tn;t.push(i)}),t}function R8(n){const e=[],t={},i=n.mark.encoding,r=n.getEncoding(),s=[];for(const[a,l]of Object.entries(i)){const c=a;yn(c)!==c&&!(c in r)||us(c)&&!Array.isArray(l)&&Cd(l)&&s.push({channel:c,chromPosDef:l})}const o=Do(s,a=>yn(a.channel),a=>a.chromPosDef.chrom);for(const[a,l]of o.entries())for(const[c,u]of l.entries()){const f=[],h=[],A=[];for(const{channel:d,chromPosDef:g}of u){const p=C=>C.replace(/[^A-Za-z0-9_]/g,""),m=["_linearized_",p(g.chrom),"_",p(g.pos)].join(""),y={...n.spec.encoding?.[d]??r[d]??i[d]??{},field:m};delete y.chrom,delete y.pos,!y.type&&g.type&&(y.type=g.type),t[d]=y,f.push(g.pos),A.push(g.offset??0),h.push(m)}e.push(new Za),e.push(new Lm({type:"linearizeGenomicCoordinate",channel:a,chrom:c,pos:f,offset:A,as:h},n))}return e.length?{transforms:e,rewrittenEncoding:t,rewrite:()=>{n.spec.encoding={...n.spec.encoding,...t},qu(n.mark,"encoding")}}:void 0}function M8(n,e){const t={...n.getEncoding(),...e}.x;if(gt(t)&&n.getScaleResolution("x")?.isZoomable()){if(Zt(t))return"buildIndex"in t&&t.buildIndex?{field:t.field}:null;if(!Oi(t)){if(Ui(t))throw new Error("A zoomable x channel must be mapped to a field.")}}}function jm(n,e=void 0){if(n.parent!==e)return!1;for(const t of n.children)if(!jm(t,n))return!1;return!0}function xf(n,e=!1){if(n.behavior&pl&&(e=!0),n instanceof Za)if(e)e=!1;else{const t=n.children[0];n.excise(),t&&xf(t,e);return}n.behavior&Rt&&(e=!1);for(let t=0,i=n.children.length;t<i;t++)xf(n.children[t],e||i>1)}function N8(n){const e=n.dataSources,t=new Map;for(const s of e)s.identifier&&!t.has(s.identifier)&&t.set(s.identifier,s);const i=new Set,r=new Map;for(const s of e)if(s.identifier){const o=t.get(s.identifier);o&&(o!==s&&o.adoptChildrenOf(s),i.add(o),r.set(s,o))}else i.add(s),r.set(s,s);return n.replaceDataSources(i),r}function T8(n){if(xf(n),!jm(n))throw new Error("Encountered a bug! There's a problem in the data flow structure.")}function P8(n){const e=N8(n);for(const t of n.dataSources)T8(t);return e}const bf=new WeakMap,Ef=new WeakMap;function Wm(n,e){const t=bf.get(n);if(t){if(!e?.queueReload)return t;const r=Ef.get(n);if(r)return r;const s=t.catch(()=>{}).then(()=>Wm(n)).finally(()=>{Ef.delete(n)});return Ef.set(n,s),s}const i=Promise.resolve().then(()=>n.load()).finally(()=>{bf.delete(n)});return bf.set(n,i),i}function L8(n,e){for(const t of n.getDescendants()){const i=t.flowHandle;if(!i)continue;const r=i.dataSource;r&&(i.dataSource=e.get(r)??r)}}function If(n,e,t,i){const r=i??(()=>!0),o=Xm(n,t).filter(r);if(o.length===0)return{dataFlow:e,unitViews:[],dataSources:new Set,graphicsPromises:[]};const a=new Set(o);for(const A of o)A._setDataInitializationState("pending");let l;try{l=k8(n,e,t,d=>a.has(d));const A=P8(l);L8(n,A)}catch(A){for(const d of o)d._setDataInitializationState("none");throw A}const c=O8(o);for(const A of c)A.visit(d=>d.initializeOnce());const u=o.filter(A=>A instanceof tt),f=[],h=!!n.context.glHelper;for(const A of u){const d=A.mark;d.initializeEncoders(),A.registerDomainSubscriptions(),h&&f.push(d.initializeGraphics().then(()=>d));const g=p=>{if(d.initializeData(),h)try{d.updateGraphicsData()}catch(m){throw m.view=A,m}A.context.animator.requestRender()};A.registerDisposer(A.flowHandle.collector.observe(g))}for(const A of o)A._setDataInitializationState("ready");return{dataFlow:l,unitViews:u,dataSources:c,graphicsPromises:f}}function O8(n,e){const t=Array.isArray(n)?n:Xm(n,e),i=new Set;for(const r of t){let s=r;for(;s&&!s.flowHandle?.dataSource;)s=s.dataParent;s?.flowHandle?.dataSource&&i.add(s.flowHandle.dataSource)}return i}function U8(n,e){const t=new Set;return n.visit(i=>{if(e&&!e(i))return Tn;if(i.flowHandle?.dataSource)return t.add(i.flowHandle.dataSource),Tn}),t}function Bf(n,e,t,i){return e||(e=U8(n,t)),Promise.all(Array.from(e).map(r=>Wm(r,i))).then(r=>(G8(n),r))}function Xm(n,e){const t=[];return e?(n.visit(i=>{if(!e(i))return Tn;t.push(i)}),t):n.getDescendants()}function G8(n){const e={type:"subtreeDataReady",payload:{subtreeRoot:n}};n.visit(t=>t.handleBroadcast(e))}async function z8(n,e,t,i){const r=a=>a.isConfiguredVisible(),{dataFlow:s,graphicsPromises:o}=If(n,e,r);return i(s),await t.waitUntilReady(),await Bf(n,new Set(s.dataSources),r),await mf(o),s}async function H8(n,e,t){const i=h=>h.isConfiguredVisible(),s=_8(n,i).filter(h=>h.getDataInitializationState()==="none");if(s.length===0)return e;const o=new Set(s),a=h=>o.has(h),l=new Set,c=[];for(const h of s){if(h.spec.data){c.push(h);continue}const A=Y8(h);A?l.add(A):c.push(h)}const{dataFlow:u,graphicsPromises:f}=If(n,e,i,a);await t.waitUntilReady();for(const h of l)h.repropagate();if(c.length){const h=V8(c);await Promise.all(Array.from(h.entries()).map(([A,d])=>Bf(A,d,void 0,{queueReload:!0})))}return await mf(f),u}function _8(n,e){const t=[];return n.visit(i=>{if(!e(i))return Tn;t.push(i)}),t}function V8(n){const e=new Map;for(const t of n){let i=t;for(;i&&!i.flowHandle?.dataSource;)i=i.dataParent;if(!i?.flowHandle?.dataSource){if(t.spec.data)throw new Error("No data source found for view "+t.getPathString());continue}let r=e.get(i);r||(r=new Set,e.set(i,r)),r.add(i.flowHandle.dataSource)}return e}function Y8(n){let e=n.dataParent;for(;e;){const t=e.flowHandle?.collector;if(t)return t.completed?t:void 0;e=e.dataParent}}class J8{constructor(e){this._renderCallback=e,this._renderRequested=!1,this._warn=!1,this.transitions=[]}requestTransition(e){this.cancelTransition(e),this.transitions.push(e),this.requestRender()}cancelTransition(e){const t=this.transitions.indexOf(e);t>=0&&this.transitions.splice(t,1)}requestRender(){this._renderRequested?this._warn&&console.warn("Render already requested!"):(this._renderRequested=!0,window.requestAnimationFrame(e=>{this._renderRequested=!1;const t=this.transitions;this.transitions=[];let i;for(;i=t.shift();)i(e);this._renderCallback(e)}))}transition(e){return Sk({requestAnimationFrame:t=>this.requestTransition(t),...e})}}function vf(n,e,t,i,r){let s=0,o=!0,a=structuredClone(r),l=a;function c(h,A,d,g){return A+(h-A)*Math.pow(2,-d/g)}function u(h){if(o)return;const A=h-s;s=h;for(const g of Object.keys(l))a[g]=c(a[g],l[g],A,t);e(a);let d=-1/0;for(const g of Object.keys(l))d=Math.max(d,Math.abs(l[g]-a[g]));d<i?(a=l,e(a),o=!0,d!=0&&n.requestRender()):n.requestTransition(g=>u(g))}function f(h){l=h,o&&(o=!1,s=+document.timeline.currentTime,u(s))}return f.stop=()=>{o=!0},f}class K8{constructor(e){this.genomes=new Map,this.baseUrl=e}async initialize(e){const t=new R3(e);return this.genomes.set(t.name,t),Promise.all([...this.genomes.values()].map(i=>i.load(this.baseUrl)))}getGenome(e){if(!this.genomes.size)throw new Error("No genomes have been configured!");if(e){const t=this.genomes.get(e);if(!t)throw new Error(`No genome with the name ${e} has been configured!`);return t}else{if(this.genomes.size>1)throw new Error("Cannot pick a default genome! More than one have been configured!");return this.genomes.values().next().value}}}const q8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAIAAAB7GkOtAAEFzklEQVR4AezcRXjr2BnG8b8SQ+gJOiA5d1NmZuZVuU133Zf3++6XxW27Ku7LzIzDrMgByxQGaxwfWVFGMly088z7e76Zi5bu6nvP+Y4sKwgC2n4KP4QfgEcvAVdZGHfuM++Fj8HHwUZERO6aMTocsMGhl4C7bbrzr7C5N0REFAC30nct7qwhdH8REQXAfKf7FrjTLPpJ7EPuMhERycB36XD+hX0/DuzSlsnw3OfyilcwAA/vn/yzQQMoUHg9r59hhn7Oz/njH9ncJAiAXNj9P2qTxdhARETufgDYNs4fsH/Cv2jL53nzm1lcZH2dngKCP/Gnn/LTEiXg+Tw/Q+btvJ1+/vlPfvYz/v1vEwA26w4fs8lm4R4GgIiIAmB5GdvGnmbuh9Rq8MIXcuMGpVJ6AFhEXNwneOI//OfnSz8fL49/jI+9lJcecjjJJD15Ho8+yo9/TKUCb7J5vY1tcw+JiOgMILYJcDpNuFQKq5+neMrFbRXLnI+fu7im6KlSCS9fqXDBccLb31siIgqARBOu1SiV8DzKZbpr0nRxWxnQqs8tv51lol/2Xf63qlS6euOpKYZIREQ7ANOHTYdu1SDL/wMOlguFlxW+Hf8dujMX9ryrNx4KEREFgGXd9BQoWu97S0vLbU36T4EOD6NwGf78R0REAZBoxWaJ3qqDA9Kcx3p9YXW1sLLSCoBM5jIV+i7/gwCWl8Nbzs0xLCIiCgDbDiub7b8JMF3exT3kMOM4a3bLmuNczoX22ScpPluK33KIREQUALmc2QS0KjGqT3BxzWKf2VmKhl0sEhD0ngKZS5ZKOgAQERmVAEg05KhVBwFXnXJ62eWLRYoGrRofv8yGHsv/gwOYmwtvtryMiIgMLQCSxwCHh92mQNGg/4gjEwCTxRZMRdOhPfbSl/86/hURGbUAmJ4eaAoULf/N/OeibDsKgPhf0AOgIiLXIQASbTn+la3ICSfRSS+xru84YY2NpU+BqtXwYr4PU1PaAYiIjFoAxNpy9NKGajV5/HvMcTwApqYuf2X+govboJG+/I82GiIiMiIBsLAQdualpStfCIg/AJqc/9DWewqUfABUy38RkREKgPjpbKJtc8xxdAIc7/dXAyBlCnR8HIuSbFYHACIioxgA6e+EODqKr+tPOU0GQHwKtMmm2SvUqcdzpNmM3SCXQ0RERicAVlbCFj07C81m/CjYrP1T5z/pUyArnALFJ0k6/hURGdEASL4XyNQRR2b5n5z/9JsCRdfQA6AiIqMdAClTIM+Ljn/POEsGQHIK5BF+ZGurZpb/+/uxS09PIyIiIxgApiYnYX/fjIDcrc7x79xc6vyn27NArY/qBXAiItcjAMbGnrkJOLzo4rH3/6yvR8v/vlMgz3tKb4AQEbkWAZBo1Ftb3vb25s6mi3vOeXyRn2S+5GuqRMk9cLd2Wp9u7O5CoRBedH4eEREZzQCIdgCZDJTLZd/f8Xe2m9u95z/JKdB2dXunsuP7uzr+FRG5HgGQz8fadbPpV6t+zW9VvLv3DQDLotwol+vlet2/HvMfEREFQLxdW1Cp16v1amWx0jMArOitotHf8hu+v+c3Gj5zc+HllpcREZFRDoD4AzvVWq1Sq1zOf9bW6CkKgPLr/Uqj0njkA/HLiYjIsGQYwMxMuAlYW+Oz//8/X/4/L3lJcvlvQdBrChR896vf1QHAdSIi2gEkm/Yg85/kFOjC5KQOAERERkEGPjT4McC6w/rfYQ6KS93nPx9K3QS8ulVPgdMJE8tCRESGGgAbDGBhAcdhw4YlWIUiqcv/b8Gn2UgNgI0iWGB3MkBERIYdAJ9iMO8Je3e7iu1Klbjg9HS7+5syV3AsRERk2AGQZzB52/TudhVhjVSpF8ybT0X5kUNERIZrjMGtJpb/gyuaCiPk+hARUQAYzq0GwMzVEZCIiAybFQQBIiLyrN4BiIiIAqAK34T3wxp8CX7N0+zZAQYCQRzF4bfMAQroCKETRMfYvWRHqFt0kI4wkaaQDQQ7+33mDPPz9wBwAQAgAAAIAAALU3KeWwEu+dglp7yNATqEADT35Np+/zGNAHQOEIDWgFsyBQAbAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAH8iAAAIAAACAIAAACAAAAgAAAIAgAAAULLPD9v0CYCSKXOO6RYAJaPff40ASg75tnm+5QLACAyAAAAgAAAMtdasBAAuAADKkJcHO3eZ3Uh2wFH8GtRkZmb2kXrCWUNWHGbmxAwyW2RmtpXSyOrwfJ9X93f+ghW8K6xZSP3LRvgvf4bvw/fgl7wq8iUlSaqlYgn2P62SgWYqcjBXWSAkyQBUXMCv/ysDST73d5j7/P6csEiSAajYgcy/LzWX7Z3rZQ5WkCSFGICKJ/jrp/cBh4f7f/9xam4q9ffUe94jSQo2ABWH8BPIzM9n5uYyf9/KHGe+zbd76UWSFG4AKtLp1YWF/dLOjjiqp94AxIAkA/D8zNISi4vXCwtn1L/hTTTCJ0n+EWx1lZWVaIn9wgwz0aaYInCSZACKRdbXWVtjdXWSySmmppnuppvASZIB2NxkY4N0mkJhnPFok0wSPkkyAFtbpW1ujjASbYyxDjoInCQZgNNTdnfZ2WFvb4ihYYajIUkKPwCZTGn7+3XU9dM/wMAgg4RPkgxAPk8uRzbbQ08vvX30VVNN4CTJANzfc3BAoRCtm+7yCJ8kGYCjo9dBO+0ddHTSSfgkyQCcnXF6yslJE01ttEXzGnDxIMkAXFxwfh6tmeZoLbQgKRZkAK6uymugIVojjUiKBRmA29vSbm4+8KGOumhIkmIRgLu70u7v3/O+PCRJ4Qfg8fF1kCDhJaAlKTYBeH7m5aV0D7XU1lATDUlS+AEoFl9XQhVV0ZAkhR+AqqrSqquBIsUXXqIhSQo/ALW1pdXUAE88lYckKRYBSCR484aqqgceykOSFH4AIu/elXfL7Q030ZAkxSIAHz6UVld3xdU119E9kqRYBKC+noaGaJdcXnARDUlSLALQ1FRac/MZZ6ecnnCCJCkWAWhpobU12jXXxxxHO+ccSVL4AWhvL62jg0TigIPykCSFH4Dqarq6SuvuLlDIkcuSRZIUfgAiPT309tLXlyWbIRPNH4NKUjwC0NdHfz8DA0+Jqj32dtndYQdJUvgB+PCBwUGGhhgZ2WFnm+1oSJLCD0BkZITR0Wh58ptspknbgHiQZAD6+hgfZ2KC4eE06XXW11hDkhR+ACITE0xOMj29xdYqqyuspEkjSbEXgwAMDzMzU9rU1DLLUQCiEiBJCkItX2x2lu3tod3d5P5d63XrW94iKQ5kAJp6elKpVDKTSWbbkr9Nfo2vETxJMgDJ8j5+TGXzyVxyND/KFpKkkAPQD0lIlQPw7l3qs+8k8glylHaHJCnAANR/OvcrTzqAkQQfeQ3AHwiNJBmAmX8596NN8C8+g1xlewRCkgxAz3+98H/Hv6v7lwbk4ZEvNUlSVbFYRJLkH8FiQpL0D/buAqqtNd/7+DcUSQrBQ4TgGg6NNEyZqZ13pvJed3dZet3d71123WXZdR13OX7OSIVOE6BKC6USCMGC9oS2+z6bTUIoFkrP9Ib+P+u3Uk+C/X/7efZOycHEanzwy/Aq643CS/Cn8MPQBQWk6YU/htNg2jTrmDZJDnwV/Cn087TNwz/B14Ips9TBL8I5duwe/AUcA9Nq/o8TQshVQL3gTMaDIQF9azPKWl6IwdhywuxOIJlOstZ0MkIIkT0FkN4BLihhcO3ov8Im/DAGseVEeFK1cDBZAFksnowQQmRVAYxAL7iYck71Hy9Ln/4zbK7C6IBkHrBzFggkUyoFIIQQz+KVwL30O/v7nH19rnf1NTf3wTCbej9JHoi9SSzKGPRgcOI8ylEUE2g8JhxmYABNS9v8cQd4TwvLvp2thMPh4eHhRCJRWVnZ0dFRVVW11bMzzMOn2Lk6OISy7dOKRLhy5cHUVDw/P15XN+PzIYQQWVQAceJfevClvl41/Qf6XAV91dUPLRYyKQDF72fsc3pi00ZpBAlasfrwsYYJuHWLM2d4/XUePgRaqQpwOkAgkMmkPXPmzJtvvnn58uXFxcWampqxsbETJ05UVFRsUwBP0gF1y2H7Ahgf54031DObHh2dtlimOztZWqKri2whhJACGGDgLd46c+dMX99CzO2mtpaurkwLoLiYQIBYjLHPqhooX7TkkefE6cBhx06ahQVCIT3nzjE4VaaP/oMHCQQwm9nO1NSUGv2qA954443p6Wmv15ubm+t2uw8fPszjPsJ68+Rt3QGvwImlJZRaqCNDg4P09vLaa/H+/nh5eXxxEaeTjg727ycrCCGkAAoosGBZYCHW309dHfX1NDRQUUGGmpqW1wFjxGKTX/ximLADhxPnKU6RJhRayeAgvC9AYDk1NWRgZmZmYmLi7t27k5OTwMDAgN/vV02AYbvD9dIt1hYaXISX4FTsP15+qVqrLqGkkEIysbDAzAyjo3FNi09MxCMRxseZnpYCyBpCSAG00OLBM8jgzbmbsStXaGykuZnDh8lcIKAKwMilG5ecOI1FwAEOsOzmzdUCwOslEFhJZgoKCvbv319SUsIytftfVFRksVi2LoBtpr+G7hb0xLjwMhcufFlr76LLi7eRRjJhtVJeTk3N9NTUtM2maoDsIoSQAjBjbqf9Bjeucz129TwtLQwM0N6uT7cMmc3GRpCesbHwzMoiQKWSytnZ1el/v8xJILn5kzGHw9HS0hIMBvPy8hYWFurq6jo7OxsaGmC9byJNof7rdTRWxOP0vKRGv4pjMu8UXUGCKhYsmS59vF4WF+NtbfEy0/TgJIWF2XT4L4SQAlBaaW2hpZnmy4nLUzduoDI4mGkBGGprjY0gldgbb4QJG4uAE5xITf/he7nGWV89Nhs7cejQoZycnKampkQiYbPZVAHU19fzBDRW9fSo0W+6cKHg5t2TnDSmfzXVZKi0lBdfnKiqmpy8MW39UOLf7Nhs+m9mESGEFEAeeU00NdLYQMPUzesMDenx+cjLI2Ppi4C+K31GATivO0OhDqMAjAN/PR4PO1RaWnry5MmpqamlpSX18/z8/N1O/y9/WY1+lhPkPcb076STHamqGqgaHGLobnCUr+uipobsIoSQAlDqqVepo+7i3EVteJjbt7lzh8bGHczVffvw+03GyYBYLDwediaczj5VAI5QiCV3g7H5o6nbJBM7U1ZWxhPTSDGpektOf4/WHiRohB0aNA320nul8sr1/++hrY2mJrKOEEL+N9ASSmqoceOuppq7d/Xcu8d2ND1pnE413zW//77fHyUajoTDw+Fr13rvThfNqd9fDlbrun/+DvskaBhMKtPTqenvmMw3Rn8XXfvZzxZMjydqip7hTE9uT+jg3H2fj85OSkrIOkIIKQBFjX4VFy599I+M6HnwgHW0tKxnXORzMRD4XZ8v3BgOR8PRaPg3Dx4MGZs/DQ1b3OHTVwg/lD7Adcnpr2/9p6a/C9dOn9YII5fyLvUcuT7Y3U1XF14vQgiRjVtAyuoLuJaWiEaNnRycTnZoqCkQahxTsQyM1X506LW8Xw4H/r8jUG4PlDfzDJhYs/W/UgA9PUEOd9Gl8gIvkKKRIVepy9ftm+vOzTl8+ILqgOwlhJACsGK1YVMpoSQ+Po7KxMROC2B+nlCoIhQKhEK/0fhXFY7PePI/E1G/sh+02/PsDhxFFD2b0a8MDaWmvwdPV/K6TwwaO+CiqrvqePfxfd1VOd3dORbLebKWEEIKQKmgQqWc8vjkJFNTKlvOVY11QiEjnqGhoZPek46I93ok4vyhL4S0kB27ylGOZnp/O2dic9PTqenvnDJ3pV/1r5Hyd/DtUMmWmqFbj6PbceyQIweMnCVrCSGkAMooK6VUhfh14nFmZnY0bwcGCIW4eFG/7aCj09tZH/E6IhFGRsKmsAOHscXUQgtfecnpbx6MBJNX/bs0F2neC9/BdrzQnUwnVXAMcpL5EtlJCCEFUEyxFasK8/PMzel59IicHDKgyiIUWknR2xV+/P58f8DrNc4nJyKR0P2VRYADhxUrOxePx43XAeTm5rITxta/8cqvIEf06a8F07f+Tej+H9v1XXdaGjFUru2AL5CFhBBSAIUUGkFZWFhJURHbW53+d+5wAr9f8/vxO+rr8XqJRFTunDsXYqUDjnGMnZidne3p6RkcHEwkElVVVZ2dnW1tbWRoaCg1/TvoCGorV/6wI4Vrp7+DdOXrOuARWUUIIQVgwaJixozy9ttGMimAq1dXC+AABwIE/Ph9+ACjAIyE765uBLXSSsbOnj376quv9vb2Liws1NfXT05OWiyW2tpatjU9TU+PMf2dk2Zj9KuYMe/s9WhzbK0UvlZPdhJCSAHkkptPvooJk7a0hJHtTE6ubv1XPLD78RvBUFi40gEjI0sjnwk9XN0IKqaYDESj0YGBgQsXLrz00kuapjU1NVmt1paWlkwKwBj9Kub/iATPnlw+99vq5DYqm47+JqgkpRshxN4nBaDsY5+KaoKlhw9RefQo882fkYjpNH7j8N+GjZSWFqMA1O3dixfDhI0OOM5xMnD//v25ubmpqSk1/YGRkZGZmRm1FGBbly+nLvwPvv9IF21BbndsNfqVpuUgBfDcEUIKwIRJBUXTkrdbuXRptQACyWP/tPOrST6fUQAqoWjIWAGoZLIRVFRUVFZW5nK5SkpK4vF4c3OzzWZTP89k7cCtW/T1AV3vvxNEBRNbaIQmHvPHPBeEEFIAj3ikoqGRk4PJpOdxx0mKxVZ2fhZDHIdmmo0CYL3S0pWNoGj0wcJCiFl78oRwCSVsqaKioqOjY3x8vLi4eHFx0e12BwKB1tZWtnhmBk3T35q2Jdq4yO2L8EdwfOsCeG4JIaQAHvDACPv2Gdniu26FQkyHOKQSXbmKNEiwjDI21NHB+DgWCw8f3oMw2BmzE3qRF9nO4cOHLRZLe3t7IpGorKz0eDxqEZDRN4Ts1COE2IaQAkiQMIKSn29kszEbDeMN6aEPgxnzNofzx4/j8RjnFUJgB4eeaBt2thNYpmmayWTCsG0BvKBHCLE9IQWwwMIiiyooZvNKHmdHGcUeAiM7kjxyf2h0QDKlZGSL6a/YN/+1EEKIHDY3x5zKPPPk5LB/vx6LhfUewcXk9J/giUUgvJwQz5QQQsgKYIYZI1itKpu+BCyUzGV2Z3UR4IB2nhEhhJACmGRyiikVSkspKdGzoYPL+VUypPGsvG85f48QQmxNtoDGGZ9gYpJJystXIoTY84QUwDjjY4ypLLCAzaanogIhxJ4npABGGBllVIWiIhwOqqqorEQIsecJKYC73L3HvQgRqqtxOnG5EELseUIKYJTR29y+w50YMWpqVPQaEELseUIKYIihW9xSwWajvp66OimAvU8IIQUQJ36Tm4MMqhqgqYmGBr0DhBB7npACuMa161wfYOB+qZnmZhW9BoQQe5uQAhhn/CpXjQ6gvZ22NlpbsVgQQuxtQgpgmGFVAFe4Mu+w0tGBx6PXgBBCiD0nd92vc61Y22lf6rRffeEFvQPMZoQQe56QAvDhS5BwdDjc3v6aAwf6PZ4RhBB7nZACMLyr7F01vhq3113j9dZAH/TDIkKIvU5IAeDD4XU4fI4aOzXghhroh+sIIfYwIQXQBl7wgZd2cCcLwGiCfhhDCLH3CCmAYvAlk4NSBO82pn/aUqAPEggh9hIhBeBLHv67SFe9nJq0JugnuwkhhDBpmoYQQgh5IVgaIYQQUgCmjXIY/gzukrke+C3wg2mzZPK4Rk7BX8Ntnoj6Z38C74Zq+Bn4ArtzAX4FmsCUWerhF+EcG/hx+Ev4LAyzVlR/ezme8WPkwnfDh8lEDP4W3gsm6ITfhStsYhT+Kvk0fPAHG1wcZnraqYDvYnMP4b/gW1P/4ImfzPNg03eWKS1e+H24yjv1kX0P/N7az/8p+Hf4Xih9Sg+RbgD+GI7tfuyY4TvhP2CerX0GfhSsO3zOJ+EfYIrtDcMfwaHN7+o74P1PswA0NpCHkcw1QSN69rE7juQd1bIXzKx+NXwCPZ9Ev30ZvV7FQT3iK8eMkXeEGw5Ap367qgw6wKPfPn31yVif1h0V7uHLQDOXb4TNGIe6Q2s/zKkOGGAXjLtoIOvNw1W4podDxtpEzw0Y0G/1tOnB9RxP/6CejGmIXb6zLO9kAaSmv4U1OvRZwS39llGepjxoSKaXXUjdC89hAWjrVkp5WxWACQrAt9HoblLZTQFYocHoALLY4iLXrnHNz7VkB/wuKUMqRg3oMWog2gZ27DxP6iG4ixWACfGEKwCLyjs5/Vt4XAF0ZFYAuzh230UBOJN34XwuCyC9A85zfphhLV8jj2/Me6wCvj31hefTk/L+1BWljZ+lcQZ3an+juJiuLioq2FyceA89k0ymHf43UNCVesiNvX/TMwBnSeOCI2zo28egiqcskdBHv8rVWq6BUQCzrHdjNUYNfLKNNpVKKslIxu+XGLzOWp3gSXtHvD91CuCt9S8cpzX1gcjU6CiRCBMTzM+ztERODmYzJSU4HNTVkZcHFCdHfxDKSDmzflf7/OrEN9VR58CBMjvL8DDRqPqJ/hC5uRQVYbfrnzlWK7szPj5+7969iYmJ2dnZJXXnUFBQYLVabTab2+0uUW/IU6Ge/L17q++lffvYv5/yclwu3G629b/sfQdYFGnW9SmBJgoNKJIzggKCIKLojDppZ76dmY3On3POOeecc845rRu+71t3djbNrI6ZIAgiUTI0OTTdQHdD/ef1LmUrdFMdGNedPs996oEOVV1vOOfe+4Zqxs6yaoNAFTnPwfIg1FWGh9WFNjZgscQdOhRXWhrH9wLCzAzGxiC/1uN5+muzspCXByBV2F/Z7qgAhrzMgDotG8ziIpxOSGtJTMShQ8jPR0aGmaaeDhR+jMJ5FBija/x6Y6P6hb4xh7lWtK5gxUtDqoEKo7X7JpmPADuCxBtP2/tlX5cYAe5hb1ze8WeIKSAdE9rEXdz9FJ9SAC5b2FrghW8Y7J8niwp2I53iYhT/KorvbgsAa5Ed/rXX4Bud6PwxfjyIQRwQAfglnmWvW8P3LuOLAD7wqwHZu39f3cm/Um+FE5ub29Tfg94F9OYr6l+Cf/Q+jQOc/bjaj/4KVFAGUpEaugD40IBKoMq7LOQru2nACW+Vv2yS1B4+RH8/ezV5VLGzIQCpqYraSkpw7BjNSP6U7PXjh7e57gAOnMGZ9/T3LO0PtUePMDiIqSksL4sA0NVQ5y8rQ02N2uY2KJD0u7q6BgYGRkdHZ2dnKQAbGxuaplEAyPtHjhwpKCg4evRoVVVVIkkqaHiX0uwsVldFAIT4yKfqLqqqeDuB1vPgtgbwZPX1eP99WDqacf8+r6Uuur7OO4nLzIyraow98XVZELo3WInt7WzVSnEpA/y1IgD8tXTs+GtZp5WVVfn5wv5+/BcjCOBRB9SvYn8ZGnrOXRAtJwnwtLwNEsieRVBYiMIOFN7eFoCKCvXzTp+Gb3Sg44f44RjGkMDvR6PwS+osgG8BCF0DXofArwAYrd4E+4dXAACn7lzRVvpi+o7HtHsVu+4ddEcbS8p8CQCtC12/ioUF4L33VIcnF7Bl7wYq8BCGBjDwK/gVd3EBit5X36dnYRLkL82HBvhgfx3hh/C+lwA0YR4msQU8gsQBN1kONEMGkpEctAD40IBKmt+vGBpwQllA4I03N6OjA2RnupxknJWVGDegwZ1ggZDF0aPkkRNzc/VnztTFxNTtqE5fveEeUKqXFtmLlu9cO9zaigcP0NeH8XFtYUEXAbBaVXhByiCV8BXKQGAgHfU3Nzd3dHT09PQMDQ1NT08vLy9vbm7qum6xWKxWa1ZWVnFx8fHjxycnJxsbG7MNgg6xlPhrLRZsbdGHIPGRhlSXobadOcOYMMB6Fg2g36Xn5GDp/t2M69e1O3fQ2cmyYmYyPi4hvvhy/Hg8pgAbVA3n7CGJuHED9+6hq0u1TZstcWXD4rFsRm3akzQ9I4NlTrYtHh+vbmiorq2thj8UAMdEAFZXH7ISqSvd3eq0/G2GEFIARMt57xQGvnjhAjVgbwGgkdR/BUvuRH5eyVVtrSrY3TCPeeY52NG+i++i8Liw/y574/8AvnAA30/GajDs77seTWvA5f0aBHbB5dJdriSXxcJGv3vK1WD/UuwCegZ0CEQGlABQ3mmPH/sSAHk8PT/khlu+pqJ4c/itUKXn0APPB18Mn/svXgzN0ICZeAQON9ClZEAFATSRAWoAlSDxpZiXwBu/fh23bqGlhe5tNrKLUJGBjAQkQIfT4Zx2TA+PDk0ODuZOT9fZ7XVud/3581HP989x+ADfyF7NdnzqcNz8acadO8XD9/PyFtOaVE93uehgeAYH56Za58hQ6v/4eOoNkyABsf/169dv3brV0tLCIIDkTk//0KFD8fHxFACn0zkzM/P48eNHjx6NjY0tLCwwMrhw4QIlIWD2v3ZNlRLpj8THSOWVV+jukHoU+y8vq5iABcjj0pJytC0Wn91hGH6YIzOTxdC30dys8VrXr6csbCYiFUhdX1+P646Lm4qDDZiCshPAKewOXVdaRQH49FP+4DJPUSkaWaexiKUuUh0nlice93cuDg1Vzc5WOzerPalRpwpA+A8C5ueHbt0aunvX2dZGIU+YWGS3z0R9EpKiEOXcck4tTfUs9ayTGFggBAMCaqE/UDVYTmIMeByK/fl1HhlL+aYdagAA45vmmVYLH3/gLeyKVL7zmY0BkKolCnOvrrqI/+qy/OiqxZKIjjS6JGxNBsFmP91NzifI4aIBdBrWhf15rK7e9dmTpH4xJhNZB/wa/cRABwN1UxrgFchcQOjgfXnzPs06tUbKPoqjWcgKzHmXaPrEifXY2I6+voHR74kA8EiTsYF4xOPnFnTfSFu3b5NrWJn1qD+Jk/zNLAf2agCrWJ3EJO+ly9Z16JPoeldaPXIOw4Lz4MEkHLcdzptLjuvX34y/efw9nS2FTkVsLBMbpH02NvIqo4IJUpX40eYFgEl/+v5k/2vXrg0ODp4+ffrkyZNlZWWZmZkJKo9MN3SVXj8jg9bW1rt3766trR04cIBZoLfeeovZoQCGRuhK81dSA1ZW8MYbOHkSpaXMdLNrUADYAdmo+LPVZ27eVPfGvBm5nO8GiA2Fzo3u9uzm5qqFU3nIk4pgwE1/Im4xToWDU9t2yreoM3Rgzd69ywo9h3NVqMpBDpuiB54FLIxilK20d7C32lFa7a4u2CzAJtAIP8iYxfEbg0M3W4ZvfdzS3Hzcc7QK58pQlotcdhkKAJsKeZlXue68bmfskpLCaIC0sNd4gKpwMQZXW6R+mg8B2MSmvE0NYGnL13Y//+V9Zn8fSew0efmzEAC2ue5u+j8Shbnsdhex6YqJuxLznSSyEkufvMwoj7Ge5sX+KfAFCrZoAI2+oAOGBtDf2cH+IsVsTCg+JxFAqHPeNB/vhHHuCBvPs9SfMm4n7wtT8w/x3GEeLLJz59jbmSHh2Ry9vW2UgbEBkQGaIQMWWBB+6CGWC6uZ3Y7My1omU1zAhbM4ewIn8pEfhzgA61gnWXSjm/08ai2q7kYd7wUC0xpAAXDcufPXs2+91aAzwcPiIDdaLCQ7XlY1VZdLJVSWWWCDg6qOFhdVkZoAXf729nb6/mT/hoYGuvZnz56trq7mkG8cfXPA4XCMjIzk5+dTD9g/Hjx4IGPCOTk5dXV1MAlqFJMe5FP2tbfeUpmNs2dVrt9qNWYQqM5IyqMYfPQRi1Qy7EGks1yufper19Xd/frEa6dwqhSlVlh16MtY1qDxXxC92wLwF3yFXeMsWTbIdKSzWl/BK01oYg0CkDpl/+1BTzWq82x5VderFPuLNfleaXgTx24eG7o5NHJvJAUJbCQ1qOGgEDmY414UAP5CthM2G2rVp85PeXWVEBsd3UsAWIqGBpBvxiUI2DX5TMIR4yVQeALynV3xBV+v/SdlAePfmdGYVHntsxCAvj42R0ZhJDJJR7pWVtxs4B6PJf7Kr0lOth06pFEhqaJsB7W1NQ0NNVFRNdib20jjYmQGcfF3FQBJ/tCY9fOd/zEXBPhgMx1hxfi4wftiySOLivFxwVsAVN4jUOTn0ygALG0aq2alt7e5t7d/QrE/zVsG2E/CxvyhY2aGIsWMNr1FzmStRe1pnKYGHMZhbIP9mcXCO6RXAKByvRI3QASkARv/em3sUuWFV/7q2bOv0HXeBsc1lX+ytqa6PPmTHMsEOhszO78ZAWBuh/kfevednZ3M/NTW1jK/f/HixVSv79LZZ+o/OTmZKRQODnOImJpRWFjINFFlZaWpIGBignXKUuJPZKjH3qSmqZw/D29Qzfi6283fxG7Bz1PJ2DEDFwCK4sDG6OBf6c95A+dexatkWJ+rFG/AJ5aW6CCyJA+hjMEcG56wv1GnPC21ZA5zVJf4uXhc3xYAD3Bux4rQSbK/soM3D9a01Gxgg84+2wMFIBOZRlOkDHCof1abZYNnSn+F5Sa1aQJeAqC8NNGAnQJguP9qwpjxHdP4CG9fAb4B2AMhqNcVrf+eD7BjdkcyfLyw3wIgSVuG7a2t5Gm2cSZh3IWF7vj4xNH45ssrhy8vHaqf4lsSHxyZnz+xulpz7twJEwEp1drgcw6nSRBAGSfHeY/DCPurmiiuheR/LJYwerR6GKeOsxU+O9KbNDSr6BjnvKk/xHy9lJoIAI/Ug6Xe3juUgcmnMmAMEePnBOPK21I1CfDX84fRJfRmf2/K4FsQrD9LPa9hT5wBzh7G+WqcOLlLZdNXZkCgOrsw18qKMhNgTp/ePfP7zPUXFRXJJB/F/jvAgIAywDlC/Fh3dzcHivlFfr20tNTMZVQpsRdI0plKz/Hq3cCmRJ3gxdgxlWzYbIYbax4D9q/8OLHh3W+/W/9KPWk6mC6g6zIuzSNzJh541rCGHYhBDLUBgkVANMADdbzk3Ugg7K8q/T7YgDlKRA1gO9nphdC/ydKzOB86TUtbWR6G1KbHo4b6/aKgQJL5KhyclzEAGQr2+iJpR9x/hqQorBb29znR6Ns+JADOYOnk0lMJ+OoLXAdAF6O5mXlGagB5mblIOlFkZ1damivhkeVfnHvNsgLLwoQ+MaANPHr8aGbmxyfsjhpX/Ak9K+18JeLNUhmNzCApIB55iZ2BGAeOTbj/Wz5e8IFNIA9be330gNef/srK4H2h/gHbUdWDG71zPirHGi6QUGjbMkCb7+u7SRmYUuzvPVOIn8MLx/S0TPzXoDF1SzefdQkzEA0wLQBnoeyED8GnM8d0vTgnWF+nDwyXy1wAM2Oz2Tjxn2l9RgBkefK7b4op4Ac49ksB4KgAv8iv7xSAsV1bEUuJhH74MD0t5OQg3Qk4oe24lWQoArNalU+2sMBEFhnQWwDysDeYpqdzzZZJ9g8y26dpqjSTkmgTqxN96LuN29QAnpZxwAFf/WVFNOBZARjdpn4eOyBI1pPhG3SkeAtxehw0sCrFyOMmgwBW4HyLHYYGlJTsdP99DP+anKLzPcCJgHERghcuAHQxjKQtLl1CUxPDUlKw6/CUK7HD8u9+v8Uy8K5ljiXVp/cVaoXdq90112tObJ2oRCUkZo/fuyaMoeDp7SwQryJTPN1wG8O/Qv08+gjYfUwQ/D5g3z0LJMiGfGdM2W56/ZrXOjAfO5LNAz0Y68WHvXikNODUXzloTS/MPHymOK/46CHF+7SDOLgfGRfyvmHrfX3D5eVkqbn5+T+8cLV/QGTAXY7S8he7aNrtJj2RpGhpirfS6dNJ3t+8BpjEnwZ0v3x14IAy8V7FTPx899LSEmf18JiWlkbHPz09nZM+fYe2GfwAPymLBhYXF/nFvRur0wkpJYeD7K/IPe0B8ACaj2xmLC1WuaX8PL9LPfPCn8DeSEbeYeTnoIBMGvyIT2amLEpYu3//Jm4y6c9Z8+RLOu80iv3uSuCA0gCPd3oTyn7dnmkSFXKsremkes2jHdg8oG1pJmrT51CwW1JAXgKwhS1j/g/FXD7qb5nqd+EbVxMD04BLPzcrgdkW6YzTm2R6p7paLZfgeNSZM8yIufAtl+aKOeWKiclJseS8hxMckOEUguM4XugurLlRA4E5DTCmA01P60YQIAJgDP/aYUdx047hX3Na/JE/DTjD7/hlf4FvAXACo4Yld43GPx79+jffsXJuYEZGQVHB0fLC5PJCHDqI/cRGwdG+jbLejb4B9+NJi23u4MJU0p+MH4hPQGY8QEuAsswXuOkFGYo8BXDkg3RjREL7oQFSxWEE53c6ngAAB3iZ60+iz+sbMvmHnyQ4NYhf5BmwA38Sz6Bxfd0oJeXXJ32CPwDcAzQfYekPobC8rMKFzU1aoAIA5AnvhjTqL+vRGLt4PDOdnd/H9xkHMMIzBIB/k0F3yXyuKw0wB413abNRTRUtra6ynLSNDd0jSaQtBAjvrD4ZblQiAAZSQjtC/TwuYxmFtXtn/y/DF74ugvJSbgUh0ej4OEWV96+82Lo6lhwbGtnfBZfFsmWxaDExugaNLn+BXsAxGTp3ye5k3IBpDRBWl7lAWPGaD0rvxhj+lTleyhgU+8PH2A2Wj2AxOqCRXfuHUNzvxOX/9vF/+29YAmCFNy7ADBKAk0ApUFaF0hiU0hX/X9/u+ST9WlpWlsa+QQXt62PpMRskEXrYN5Xg6Xt7edR6e8v7+spHR+3Rs9Vvud6qiFJjABVIKQdywjkcrAUTAdBcLkkHW2ChIVCsA3gxGuB5AtnvIWYb8AvjY6R+fpHgpPgopjF94y4ZXAycHnvg8oOCywUoK4BP/Aco8ENEfHxQA2M/Af6wtI7gNcBqpXfIMlK0mpvL/jo4OjroHGRyRtx/SfeRIupQ93zez7P3Nk7kA5rsBDE7qwTAbldCycXXbverm5uXgiJYbwGAsSDAEADRAJkzFLQAfA0GXkYBYDFTdhmQxsWxIEheEgSR+tmbeVSdWJn0NdCno0HgftZfexO+QZ5/OhLQ3m43pgPZKqzy1wQmUHxe8j9BTJeN3fmqDoxKtNBx9YMx4N2rwLmQRn8P1uNUCRT7M+FO+93zvT3zPb29VzfZvkj9chQZYDHukfzRTJKqUL/3MX4+t0KR/rsyx5RHdr+ft/mgenDkXB3CpK/wIbjH52maUWKm8lOeDzybqN7EMbNlLVQVzKStvDDUNvsmQ5bMTNX2SaNk68nJtampgcnJgZWBFKTQ/WcvZhyvQWN2yOTGfeT6tjaVHGbvGR3lKemUpi5a0u3JybwceanroOVK1P1vRCEIUKoksX/kCKaNuUC1tQvaorj/PBruv1SKT/wSduJtAC+1AIgzQmH3Tq6JAIgGbAuAj7birQFvmh0KZmV7toOA4YpUkWKkpJie/Xl5J/tf9pli71ACQO7/b/HUgNCJzQprIxpLvWSgzN3b09XT23cVO2UgLS0Eh3QX6o+Zy6reJn05eve0F6wBMTE0aStsOeJABLyXYwOAF6MB4stL0l9CAddeQ8fubTAdxC/y6+L+7+EKiQEbX9tgMn0NJUCtmbLWQ9psWzdf23nAmK8pfa+/ruZwk6qZNpiaImGr0ezBweXu7ubF5iUsUdzSkEaPhBN49mT/hQW1Eu7uXTqFaixyNKFCdf+abHqiMvStx8U9ZI1EDyGqH98JKQiYvrtkzAcdLloU9n9m3fAvNKL9d1rGWqo2pqdZo0zFiADQkrwFwLcGmEFqqqEBpLMpsr/z8eOh8bShXBn+PSbuv/o9e+CNPf7XvfcB6gAxKR+KB86FrgEEk2BNaHpGBly9PZ09A5QByQXJUZSAdx4IOPzV0/M8+2uzGce2SZ/2WU37uQ2chUnExzN3zk4ry33pCa5gJaAyxWllLwoJCir1L6u9Vp8AvsFsj5H657IAGQ8wtdKbUTQTKZpm1+wr+gpz0Lum3nSEF5qc1YzCXISq+AH4QFYWjRkhcgU1gGLABkrS4DTC/ul+WSUwjvECFGAvtLbiyf4UuNdu4UoITkFkl6HfTqWhAOgsKGYmLBNQAuBz6Nj8UPD6kxTQFmfsPhEAmvE2L/e5FAA2xJQUcVQp43TOqb2sWlcO1EZAmuuJOtD0sHgjJSWGAKi03+jw8MiofTh3eD3a81Qcwg1t356ykoEMmrcM9Gz09Hb2DvVffRoKUN0uXlQdxjQ+/lgFxQb1b86kG/6+8QeCAt1TmkS6koqmnw6faAfuBBYBWK1UOx4XlxbnMT+DGQccptZDWKCov0HZi0J0dDRn/qQ9wcITcFsI7vTALYB8zRnlB/gxADIdKNWM0rP009QkKQ7qzs3MzWgzNt3GiY0MCkLh/fDGSxcAC5R1+89l5eQoq6lBZ6di6sVFepCzmGUcQPk3s2iEzfvBA7UpBk7XUgCUVVczy/RsOUxgFbgWtK4/JfmeXuX+c+3eiH1h5OCIkt7CeiP7/7kUAJY1q7CgQA3Okm+Yd9N1hgKuo0ddhS7XATUGwBFgskZYIHsA06jxrP+Jyclx2xrnkxnsr9QorNB8tHwJAsICujw0QwZ47Fnv6X3QOyoy4HZTGkwLAGlF1cMPfqAqZGPaupP6Q1n6y04qbjrBLsoOwL66a/ksoFuxv7IMmAcFUVrU0hJ9wFGMcmyvGtV+NhyUgWJhf3WswwsEN3nmvH5u6kBa59R+LuziCq/jPjaUZiJhfHx8ii4wwK9wsyBODDV5Gdno3z0zwyIa0ob60FetV/tpxMwUyYRaHAdeAy5BHa2h9glfDt1FIBbKLEC7GeGvq5N1tpS3LQLKTGy7BBYeUzKQxXsVFZyDLhGk/ty8gJvALQQLLwHo0cEVG1NTk9Pz4wfHKcPyBgnw8yoADLJIUlVVsNnUPn/NzbINoaukxFVgdV1xWX75lsUyAk8OHaRwTHAXnteoAWvj67bZ2anZ9cm5SRS/bW74N7Dra+aD4JCRi1zaMzKw1tO7NDjBvhDIiKKu06gaB/Omn6d+cmXIWQ7lo7PZM/Cbtk9zyI7JN47dZSLTKB+P7ulARzOa7+HmCG4DM0Cm+UE3WYJJ+RrEYA96mAfgMk4KJJ4FL92GNuaIuDqprqZO2J/HEN3a0GSdLJTH5V3c55k7fXIvoN7eXi4EI61zuu9O9n/48CH3jeCyYfr+/Bi/yK+b3OpDlsaQkPqd/d3opiOdoqXsOpI/hakudNlgY0m+mv8qJEvWCFj3MUFUAli2LdZ4okZ3N5xOVjE1fud2EzS2WjJ/EpISkGBmv0KXS31pfV1FpkpFYmOF/Z8Bs3B3pnBLD0UAZG9JGmWXHhY38JiZnZsunUZhuZH9/7wKAMEIjlrMqmU1tLfLriPuoiJ3Xp4rlxHAty2DOfhODiueDVc5dyFBBEDnMa9L+3Nzc7Y5B2pz8CX1KusnLOyvmWvqEgSEF+ylNC8Z6JWnQNoCYWmgPNeb+sO6/WdmJouZNUmK9pCgKVqyOY8VVgAMCEa0EVLSfdy3nX/72IXZ0b88ij8RgAvNcEe5ckND8w8ftqOdp+Wo4AmcYLGQGljqvARVpxOdLWiZxvRq8WpKQ0rJ6RLF/vF4sSDRc/sHuvzMEty/f5/PA2BWhwO83OSHi36Z5dd1fWVlhe/yLXlgAHfa5H5Bx44d446hatqoGaSk0OuSodS5u3db0cqSoctchSpqQApSGOTR5WcuRbbYfIiHAxg4n34+qTGp7nSdEoCcfU8Q5QEWL7vd2uphanJ+XlXuiRP8/cp3NNj//n15losExMyLcpAMMDUczqhUtr9WLDQ+Tp4x+ijPqTNDRK+Uu9TcHADCEASsPJgTrFo28KUiefXzLQCshHPnFPvLbqsDA2yXGwMDroGB2fh4S/Z3LP0q00fvSJEb57xXVobC1AcOiAYsFhf/1z/Z/N2i+9/iNujhcf8dgRD69rrCiwg/JJ9FAVCG3jJAZGB2rx4BlAMVPH5xm/pJDQgrWNKsQ5LPxAQeLj20wEJGpo8pa5jpkk9isj+6X2/sPNf0tYGmRJxFYGDzGB+Xx0V1jnRq0Oywc7SNvMDBANIcx4eZ9GPSg/KwlrVG9reetvJ4KONQOPgrVHDjT2Z1uLKX2f+2tjZN07jZPff8YXaIY7wUAA788gMMDvguX6+vrz916lRNTQ13DYJ58MOTk+J4dXd2slgWsch0mWweTsmkR72ABabR+CJ1eiZlJq4xThVUY0pJeQk+ExwxckHT07GdndQAB+lYJoAyGmC+i9Th8VAV6DWSpulTVKKSzgSd6jSkmZkVInthMOdJ2lGjtPHxJBmlCS4XE9G8Fh/3VtHefqb81x7+V55Hv/t66AKQ3bH6V+cVjJcYDn++BUBckjfeYI2SHmQ9hnt83DU1FT81ZXn82DI4yIqhAMhe0HwXDQ3sKFAIeih4oLh4kE/cG4q1hmf497/62TzP9xsp+Oky/hX2BdtBAI8rpYAhA7sh2qB+2mko6qcniH0AuxwduNlZtW63pYV+/n2yM1NAZGcdugMOe870iROL9fX66cbvTjUlxiXFrZ9AYMMAbB5OJ9WVF3jw6AGTGAwp6BUyjiHT8RI22MhrK8dycLKp5cwJ6+mKlJJDb6hSePHg0764CzTZn9TPlcDc6ZNbAzG9w2Fe7wfCcGyAue5XXnmF7N/U1MSvqAmg5iEPKWT6Q9P4N3cfnXBMSCmxIigALriWsUwxZu1sHS1F9aWWU3XWM8dT6kqsQPpnVhoyINzZZekaT+hce/BobXjiQ5AQGEJyKNtiUQKwtESXkfNHKu353LyTm0VTBswl3FSnP3ZM+SJMpvFsbJcMUakrsq2IZWKiZrn/1KlHjY3fXDybihDAUxqE/6c4K/wq8OabL4P7XwD8Kdo+C4BMEJE5WFR4sv/EhKttyn1lyvKVSVaDzPSiMfdJ547dm548fb0gZxkkOg6UDB4oHogqHkTsUWF/hDzQ/Dt9LdarUvZCoEFT8zXhKQNKlaFsl/IqN9ifxxglAGnYT9TXK+aJiaEYUO7Z6RbX1xddioiQq7ZuVfFBbS08pxKSEpNOBzExk16CrtOPk0G22ZGR2dkhOLrU0KDFQodLXTj/ouwu0F5fb62uTgGswBl4owg+UASz7xQFGSQVkf3p73OXf+7zzEmD8gQYeSYwnwpAkaioqOBQATM/3DKaD43hJxEoGFW/+qo8sIxur314+IHNxgwc1PY3miq95GRVUDnV8vDkoZqaloYGKSiKZZTZZV55CA0JPbjQeSG+Mz6tO40JQ675Gm0enWu+tmr1eGJiojc3E+1ahjujEOfZ1OtQdxZnj+CIyS3m6IswCiLbMxrgqMriL/d5Dh1iJi3F48k6tFJSsnq8kbQUH9eQlpqfmufvXl41HwSkPwQytv9nxunzgWiTjgl7P8314yXXnank5C9ZvvqBZaxBqQIlurOT0RpDe8kXMeG7+7YH2h6jwmrzsuKBgZKB1X4X3i8OPf/zwy/6WB9MVNP8fxl/AJh5a1+LPrpS2F8dvVEmpO91PJyGzwLM+dGBY/tnOMdQWzzRhATWpzysV6cnMIhCOnRsDQgC9OusVsVx5eX0J3gNiQmU7CQlkfL4lrh/bEUtgPAaj8f2WnpfSjO1QlB0NUiQ9zm0y0Hd8vJyzgWSh8LLujB5KDxHhvlMGNkv2kj9B6MBZD4eWdysCbpWKyvgVQgKAJWSBcUUCeuJH8jOvr9dULTGPZbGC4qUhYJVoBPRndFNnU1MT9FTY+jGAXympxxLjk1scriCQ77M+JOdGe9Wo9ok+xubNlME2SL4B1Niy8tuj2eKxclbJ7vwRTZF5hoGkrM4WUDGFYJ+NK4kON4uUpqIbCmbInxuEK0YptfsHBiXy+pypVomK2O+HBMz9j6GRiTrx5lC7M/yfCLZ9ybQBShuuAcxOHB4YPB3DqJcUb8yOjshwCd75yszgwzsO2KBE8+Q1zvPUn8mPluQe+VR24zgxemkM0pVYMcTlKDksHZ4DWvBz72gMdk9NYXFRaacRADoZPAyjPR5NEimZVsAeMzyzWplynZHK1Dv9ZUKZSGBa7vOnDnD4V+6/0wZM/VvCIDxCDBGA6EvP2PGTMZk6Awr74pX0TQJlaQ+vOdGS0FJWVX4Z7/Q2Z/oVIYuYAqyXpZZKRtsi1h0wikCwMweM/4yGTq4hDC/ydY4PQ27HR6POAmKWuidUwEJBhZxWpwd9lAEgKguVAZaNo+0g58nATgHbAGaqRmbbrfGdmjhJKBEi6XCgop3lJ/C5u5wsD8zccD2yhoLYnxOsT8GeKQTgeJGw/3/nCABBt7dZv8cvCAwjcc+RvMVsiUjmRbqrCPaXpgAjDjgPQjq8Syi5CXfMN63qL/CA3I9gwDsNyiKdKdo/rFDLKVk0YgdiFKvhogxEQBlBmT7z3CvwaafoMwP9opETYUdRwoBbwFIwOdPADaBxwD8rzon+1MDYOFWQJrFoltAMF23vEzqp+/PdB1jVXor6kMBxr9kfzFFPOL+0wH4POJd7/AkgofeAuAbEYx7ieW72Ddsebn/63hB0MPOgt4CEA68rQz/6aUSAB6HfY7cCvuLbe8EaoG+PYPEaqVTZOwip4b1AgETiOL+M4pE8asiAPic4ueT/XW8OIhvG8Ge6PoMBKBrWwAG8AsFQwA+Z25nNMq9BIDHMZ8U4HKJBuzY1d1rx1CRhiDcf0kBqeRm8TPDvxFE4FIaEMGLF0vM70z+vFBfREPYkA78dnwOEQ3imJcAfApMQBblk+0LtIID+gFjD3ojAlAaoFsgWFxUmR+7HSkpNIYCu+ygXeUndB2X5M8okpGYJe6/OkMoiGBzP915/ecpWIgCfq2yvWEBfgPtcxtSGUUVLNL3qQD1F1WIEURDUOUVB1xX64Bu47YTTo7B1KP+MA4DpH6dg8CUgURYRANAzM4az+xRxM3JCbvOff7Av/s/P4AmGX9Ugz6lpXi5UK8Mf3ef11/+QWURRBBBBOEWAOKECACmNqfaP22/PnPdBhttXpvnloQVqHC5LNQAJoIsUCPAPKrZgi0taqegnh7qg5q6VVDA0WDz07FmMDOIzAFcHjQmoGRnIzFx//Psf0JZBBFEEEFEAAQ4CX1L79js6Njq6LjZ0TPTs4CFaUyPYrQPfTmunCfrAOos/RbLA4s2+zGGhtDZqfbtfvAAdXVqDXBFxe7T+yp8uf8ZyiLBXAQRRBDBC18J3FGvdWyld6Cgx1KDVk/nQCcHAx5rj7lT5xH3kWRXssv16yxXHlrW2jA/rzI/8nSS6mo0NlID1KxQ01gCBoEBdYwggggiiOCFCoAN6KA1NDx4suxaVt0t9PXdmrzVoXUcKjh08DcddLkSYq64Y9buqKWiNpvK+F+4gNpaJQBnzwb0mEOD/TfwWSOCCCKIIAJN13Vs4wfb1g1gdJTpHZXcHxigp69PTzcvLn7D6fxva2uXLZYP4uIuyLY/+flqpSIjALr/TP68dIgggggiiEQAD8T9F/YnyOwczi0r05non5jAzIyLezI5HJb1b1ssX46JjZVdCRkiyK6EkYmbLyUiiCCCiADMKOoXDfCCpumyFQmzPXNzrrFl1xWn5TtXLd9MtMR+RXYljHj9LzciiCCCiAB0bNv8rsssrFaa+zF+thPcBYsFCUAlXlpEEEEEEURwAEDnNvt3+Vxkp9FcLo0LwX62ExwseJkRQQQRRBBB9JyR/d+d/eugcBKAy6UsweW1E9xLiwgiiCCCCKKN5M/sLuz/d409HLa2FPvX0DZRjvJMZELDS68BEUQQQQQRAeh8nv0Hn9vAgezf4FZGkP0TkADgZdeACCKIIIKIAOz0/UvwLOJcKHEBNC+8vBoQQQQRRBDBgQ5g2szWqm5gVwEgNLyUiCCCCCKICADMOPEuwK0MiGhABBFEEMEvzFYQn09EEEEEEUTWAUQQQQQRRBARALQAfwYoAjRT5oUfAX8cOBbo12DuC9nA7wC+CTiggFd3ntIkaoC/CfTBBLR9ts/gGsHDiWBxD/gHwLvAwTD91uvAHwKOBHX/2cAfAW7ue+2+ppoVbiMofAj8diB5r2sUAX8aaMY+oVj1fbSGu1v4Pksc8JuAXzX7iNP/C3zN92lfCOSXHAX+AtARdGF9AFx50ZvBhY4qYAwYV4ZVhBtV25ZorE+bB7r3ZzpSBMPAgirkoHDaa8rANXX8hUc90CCGwOEBVoBlwI4XiG7sByLQTYrVyy8AWUC1Yn8lA3cQVhxTp1ZWAcBbAGjTCAQTiMAMepQAoARIQVA4C7i8NOAXGmWK93GKx+C607IyrOAFYgpoRQT7pwGE9osuAEYQYMQB4UGS4f4/53MtKAHAjwCPySBgALiLCPbEgJcANAadWRQNkFDgNn5RccTL909DUFgRQwgIKQZeV+yPFoQf+xib6y+Bf/9ShALRz6efWoAheScaiYlqx/+CAqT5bdvGKeKB6n6Mt3sLQApS6lB3CIdgDhsbuHsX09PYRjWtCNWnkOn9fPnK7Qhg4VlW14BvYDd0deHOIyM0qQGOwg8uwxw2NzE6CpsNS0tYW+O/UmyqwLKykJOD8ICnHhtThbK8rApI1+H1yDajdsxUkRn0XEXvmirbEmWXTNXd5R3XiKMGrMB1Da51uMTDhAYtDWlsD1ZYzf/U68A0QkQ2cM5E7ZrA48fo78fKirR3of5TKC/ECVPFshPL7VjuxzJMopBX9NlcDYr5Bkyj5QZaprwjgGKgPpRuMYKRKUwtYnENa5vYjEZ0EpLYinKRexiHYQLNuw8CtG17FwfykS+nwvo6hoZUD2SNuFyIikJSEjIyFGulpiJ0sLqnprC4qC5ExMXxtKpjFxYC6EGPHXYIYFG8so2GvTRgZgbNzXA6jbINgYbAJtk/MDCwurqanJx89OjRoqKiYAXA0AAyGSkmMxMlJaiuxsmTptilrExR1dj3MTaChyDykMdG8A7egTm0tuKTT/BQfZfItaLqHVRVoWpnqRhZINoAnuKDnQXHkr5zB8rcSMIJqaiQBeDRI/T0qObHFrKwoOpSBIAtkMzMRsKSq6xEXh6Ch8eDzk709WF4mJcRnVECYLEgOdl4IpsqoZSUsAgA70jZPREA3kHWeZwPRgAI/sKzZ6kBytw2PABRhCK2hzfxpumfGroGZLFRmKtdE3Tw8cdoa8PcHIT9UdWA108I+wcnAGSulU+xYjPF/jRTzfUDk/fKjsYe13pTCUCW1A+Kg+4WpP4udA1gYAIT85h3wsm6jkFMkpaU8aOMAhQUohyoAp6l5je8//RTYoOiAVGIakDDe3gvpmeQjp3S48lJxdEiAGx1ZK3SUtUpyFpBY2REdT2enITG7s1+R8THIz1dqcvx49212T849ANKHRRinmtjDXvFAb29bEo8t8+C/YYdOGiyz/Z88sknHR0dCwsLhw4dqquru3TpUgn7bpACACT3osIVPTObskAHs6KCaqUczzNnTHVZqsX4OJR9nx7rJVzKQhYVuxKV2AsTE6pFdnTgww95QYpG9SuoJvvHIQ47kPSsBizu+ntcLqF+GiMLNpQTqrOGCDkrew6bnzwxE/PzcDiUAIhuigtSXq7u6PRpVSTBgCxz7x7a29HdjcFBnktdRgQgNlYxPqOM4mIcO0Zt4GUoBiEKAOWG7M+m2fMp5mzRJXiXGkBjDSK4KINKqDTAJTLAs7+BN47gCJ3BYzgW0E+9BswEyf6XERZQfVnldCZ+/GMqQS1qSf1kolM4FVLwxahO2fcAZ1DsH/zFSZuK/Wk3sD4l7E8LEg/x8DZu38d9+g9Ugtn42fjk+KioKJfLpS/qWVeyilGcicfAGPAbYOCLAEwJgKEBRXoR3cql2y2HWRfsHXTESNbkaFIGBcBqpc+lWMtmU07ZuXMIAqR+9vD793ly+l4kQPY7ht009m1xc+cWGh6ff3xVv4qjMTvb2N/fKxe0uqoa1Ecfwf72Lp/Af5ZTmhWAlpaWH//4x6Ojo8XFxZubm5mZmeYFwBuq9PjFy5dZmJ7x8fn29vn2H40x/GHsozozdXVPMGtE7SUp0m7eZLOg8lMAeGQkuKc/QiOrsirJ+2JlKIMPFHhpwE927VrC+yIA9BHCAdLvjRv49FOeWLUQNrNsZJch6yAOMjhd96zPL86PLo729q4NDZHDWXhslvQYAmf/69dZgGhpwYMHMQ4Hw7oj9fWJiYmapq2trc3Ozo4MDq5SG0ZHeWuqyC5eDDHrRPYXy/lb9X/wO1n/82qPbwEwjexs0QCxrsddZH8xlhhM48gRmvn0cBvwCa1ztRsWi5LlkCFkSSP7k8tI/WKxiEXQYK2trNBIVdXVZIKvK/ORH2Oqj6KfkBC2tKLcDdtX4p8r/X3fzP7o+lgI08aGb+HWNVy7i7vzqfNVVVVnC85arVYRgLm5ucetjz8c/DAJo8A//rcH0n4v86S0HdL57+Rsfi+VgQzHDYfjxrXDt28rsmBTYj2QmlmYlAH2OqoCO4XdDk1TV6mtRUAg6bN7s5PT/aLjxfOfOqXYj+7/1hZPq/r8T35iX1+3H7DPvjbrQLbZwZa4pxpAf1Fsl+b7TgDsz7TP4uLi1NQU2R9g23w8OTnJUGB9fT2OpB2oAJDh2cKoTtROeoIsPYdjoZ8xL51NvkczA/L2+LjYzIiKCikAtDM44599WJsUAEZdzBFXo1oEAH7hHQS0wws2m0H9tIzkf13/3pXvf/f7YeEBnlg0IHYj+RLqK1BBlyQFKQxOGfbOYGYQg+1oZ2KO3Yzkw6iUfgObEMyPLdC7uXWLGsAOSuqvvXSprKwsOzv74MGDFACn02mz2Zj1Y9z3iD9IREZyTwwOggLPIe4/j2eys7Kys28fvvsbZ3+mAaw+BA0mTN1uEQCb61rX+M80oAlNMAEWHeWTR9PsPwDc68TdT/7y9/DaaxRFJR0hoq3NEACmsw32598IBcL+y8tRfz3qOFIqkQLabgOGQmUM9uh9hgXkfbHpq2lvXqmvdwx8hODBPt6GNkYAi6mLzD+cPn2azTU9PT0mJoZMxLb68OHD5NvJzFSc/g2nexNrf5KUVEdXhpoWeNWstq067jhWb7SoJvveeygqUmkZEYDpadWCeVdMI7DjS8cj9/BC5h0vo4fThSX119erWD4zk8xIAWBl8XXPo0f227ft8QWORAfM43+olQ+E06k7HBppluczoBvjOG/DNNjdY+Pj4w8+gd1uT01N5TBAQkICXw8mAhCPzQjfGaRQAvs/GqOiMmLkzSsnZE9YLEYQQHu49VAEgEGAL1+SekPqFyOE+qkBZkaNZEaQ2CgUGLV5Z34KCuYbG6/Mn3HhzwK/D6FgdpbRIR1/xc9k/4u4SFWrQQ1dwnSkUwAo6kyA8j6oB1vYGhwfpDsi4wHmBYBKSC9GOig70quvvsoeVVlZWVBQkJKScuDAAdb0+Pg4O1VaWhqdrC5+nvUiQwLMe4bm/sfMZeXm5ubk51qLinrCIgAyOORyiQx0XruWM9MpGmDmtIzmyX1Op8l5IesP8eD7aL2He3P/LkcNkPDSVKAQwOZksL8FFoP9WekIDZL/oQakfMD6SzmDlHzfk0bogDK3oWmhzzNh+zJuCK866uscR+ucDxAsRjFKj6cXvY/x+NVq1VZfe+01ZqLZMrdlboW5aYYCVILey73lieXDiV+oSyzVk5O1wKvG0exw3Ot20LF64w3U1Sl2Zsu3WKgHinDYOfm3w8HkrGIT5kj5BxOkJsGQWno4T8XQ4ZVXVBKppoY9i6eVmyEnOnJyVuPjV7/1U/wDIGBJFt9faUDoc5ooscz21NTUuN3u+fn5jIwM/s1X6CaGOg2UHZSyR3GllmwsLFANePOmBABguRtxwFpHh5EI8iUABvszm12IQiP/AxNIezYOcDCCM9j/wYOKCr2xcfrUGfeVM27UIkRQDvv6VCNht72Ak2R/0QAN2vaPSWM0wCiV7D+HOYbGvb2bpLCREeVJmFJll4tBEONQ/niKeX19fVNTEzWg1Cv8YiIo8wmio6MdDsf09PQsy45ETReRoxzseAGCzojh/lehpLC4sKCkgNQ52Nvbs6w0QAyhoLJSgoCN6OgutzsXP9MA5s2wB0h8ZqcEPkDfIzxiUxrRRnDpEgWAFipHG2S5uNiAc8L+tSE3JmETseSK5BRdaUB5SBMHJ4FsMyNtxg1VrtfVNdfVr6+fZKwKDUFhHvOMeun30BXNz8/nLBQ2Wrop2AabMVlpaGgoLy/v0ZcfTelTs5idxwX6TEFMkl//I7aN1x0uVi7ZubERBuihUwyokyxSMg95n92V4i2OPH/PniDL8Vu9vYqJSHzsSlSOV19VaW2vm1E+1sGDKky3j2PxMQLC+8CvigDQVBXroe6qyZs75fF4cnJy6BfSQSwvLz9p2guM3ktelFFrN9h1xYMzDRkNliCgd6GX7C9WjnI8i5kZSf2rI51o8f1pvLhZ/9IQgLa2T7cdf1I1y+HMGTaSraUzm5vlm9AQyBDwBVmjuX10M17jDZHKORmEGWneCEeUG9FosL8B+obsD2QiEtyIa4SBKUOH+XmJrkx0UF5jaIh0U1pXd+zYsdraWrL/bgqdy7fGWLy9vbO8ZX6Lv29yknwZtPtvWcrgfZUnlJeWF1CH2B967oZJAAhpl/n5g5ubXUAunJQBxk/hmhC+hjX6oX1aH4/IUe6/RABhSf2TTdgmDfcfut8NcXWz6iLGAf1kJNN8n8UMSaRiLzCQMlL/cbbCerolm/V1ntuax1OEGAQFFrsTThJaUlISuZ5ZCLL/jpHBwxwSYJoCgENzOHXnOtaDXCtVb8WpEkX9tJ0gx7CzMLBgA2BXokdpsymKoTO7J4SvqBns6nRh2XjotZD9d6L0MFY0LELZiMlSWnduM79z1el4AgC3Ibi9c1XVQXjjLHyAzv7Zs2c57sLMMKuA3mHYFoJR5MToVNJMqaj3oJUxGHDtmvdo8HOzeoT6afRDa7Z9/6IAJyTUbW7O37mj7O7d7jt3DkyMnWkS9lfH7+QjcHz9WQFYmZtbnplZmZ5ejltbyUQmyZ3Bii8HlgpBBycVqSMYsdtVtbPvmQKFgnLBhgvQxyfLc2QfPsC36FVlcYSG4Lfm5ujFBCoADO0M9/8kysmatOiKIrI/bbS/v2fhZxrA0Y4waAAN6ARyty09TGuByPu9Wi+PC1jA0XC4/+3thgCw3f6M/fWGeMT7/jnBRAApqEjRUhgEhLYIKg64CrwL3xDqp032JL+J+jrmUPTcVIQEdgExfRvYAe+31Ie1A5quBVmE9cpwyu+8AyaFSNwycW5xkU3clABQJ6gWdKEI9qncXH/JwzpgEfgz/lJAbYBDGZzyBz50YMapOTmG8QTOPwZc8cH+NJgTAIEMA4R5JfD6uhpZoanAKi5OGRBcEDD5+LExGuw9c25wUNhf5VXImHSyxBAYVi1Rd+qK784P3pmPvTPvmqu6JOyv8+gRCddCFQBieXm5bmmlBMvUQ7J/tu+I2wILLRrRMr1SdNRsOsZu59XoRrFGGdPRdYIPMOjmB/gx/rHGb/G7DkfQ7n/i6hFhfxWlxUepgFqCgFtPgwAJy0LHgpcGXAyZ+sWvJPWLkQJCd/8ZURnsn6pbhfp5pLSHbSKORADr6ylQ7M8jQoUVIKv8E1+TG0n9ck9NivrrGAGUwGOu1H2664lI5IQu/vgZ+8zS0hLn/OycgsLsP6emsPvI4lB+PlFLDFI1/wXUYF68nzKwsjhVQEWwU0i/MOkKUS3oQiUl0X9Vo3b+KfUN+MeVZ9hf/r7mwLDj1zucX1BBgLC/2kbzA//sT/xjhIIgBEDKjabrSl9YoDwGpNhUehkNljjgoetpECCju0wpGVM/CSP1T8cZAWAOuEPLyrpTX39nYcHBtkflFvefVTmF4JBJ8ybmhNWVL68ur6yusNfSi2Gex8/vdMHlhtsDjwyKSzLN5BQgKgaNAkCokTS/iNoGXC75YqDTTQ33v2Gb/SlvACgAEgRM9fcbo8FKm8MEEYAcdURpaOwPDX3oE1vCEo7Whur+2+0G+0fNLzXoaso/zc+kZA2BRQUy/EvjRNJkPZm0mIAEeltSg5o0moADjFTA6iu9YWSzKlwnSP00RgDAPVNF7vvFDC1D1vp0bXQNDw9zWjojV6ahmY7Ydqxn7t+/z0lxnKqYgxwOkvHzvN/gd4nIhj8Y3qq3D2smO+ZwKL5jB+RwAhMp8vtN1rcPATDYf1PTyIf8bfpXy64D35jGlQMY/+q3L2+evnwaNM1LAD4zRJsITxWBiaKyUAJukQUFRhxgb2szggAuEAOM1D/fBMklKPdfNp8Tu1tZyWUQnDVI/WamQX9KnhpCRlL2Ki0b5pyJRSySiVh+AAuP0um7Oe1gdI660Diws7GxwSn/HN+P8aEejKnpR/AzhLqANLKg3P+UdTWqQSNxGlPMngYBs4+MIEDxVDigP5sIiguW+gk6Kjvdf1roqX/ee4N+RrH/akP9ag7cY6wgEgTdTA2mUA7YgGU/+Z/+lJR7KclL8bB/i2GBRreI9WixGGvK2Yk0s7piVRqAV4Hrz007MVL/MdO5Qv00UXottF13jugqcKTfZtNsnJfMMQB2Qg5NceaPTAPlLPXu7u579+6N94+z43MNIGeUB7dTkKlvsfuIBRJ9GzOVjcFPWijsTww+O2GTxKTzV0mK7AYUvv1t/J8o4Ks+Bv1ftABIhKoITEwB84Hue2VMCWUQMPN0Sqh1odiY/GOBxXD/tQDKoc+gfmOrEA7d0/YFq2Im2pLiibEpTE1jmqKZlRXIOgB+QeKt2VlGzQyoGT4z0e8jSzHC3kUPa1Pclvj4gNYB2GxP3f+m7ey/kILACALmGATYfhYEkDgQJox5aUBDoOyvwYDB/mywOHoyVPZ/8MAQgOOu4w0PGxpGGhpmRmDvIk1oFADWUXq6oubi4j3rlZ3btm1TPO4cAf5WSspCUsriNxl2aPRDDQFgG2Aim92FiazKSmOlt18xSBUN8JX6H+2NfxOK+uv1ekbh4dpzjSP5c5hb19ctvZbrvddn/sYM5yhTCThLjU4MFy0ODg4udi/KlDle3XcgFSYN0HVlhKbJ0dQKT29oGi28e7vpHP2qqVEXuolt/DpcBiAaAPy8CYAk0LwF4N8icPCLxv4QH38so8G0tEdFDx9qZH+m3eq3ff9A5pt3bFM/j492lvYLFAC61GTNIQw54DhRwnwUO69p15zMwm7PMavBQbpRnDzHmJpDwTsn9nLWV2dnJ6cAcfkfiNRUyX4G4f4f8mQa2f/nnSkJApQAtBtBAFsDwgIfAmDS8RewkTLzIwJAsQ0x+0/dRUeHmgne1pY1kHHqw1OnurMahr6XNDWlka9dLtnvSaiZF2KzJaOaEQDF/t62suKUCOCbhSkL30xZXNRWVrTNLRLPFrZkXqNqBkVFqKjgyKRsKrIXDcZva0Ai4DDkzEj9N6rMjzJWdLjYX2Y/n184H9Mck9aZlt+XP544/iDzgeN/OjajNmNcMcn2ZOZ8mtB0HMd56bM4G4YOqvtdX00RpREWi2RgzUTeYt5p2DDu76kbWfHnGnEU5PIvJAiIlov6z4khN4ktnm7p6yHMATfWhXFWCedHliyUHOo/2ttbzrHfDGQEMvFfYFA/bRj+oYWJ/e3qiC34B12hTnR2o5t8RDY+dowsYXYNtczuVMxC1/LRI/pNpHiG0vSkOM2Lc+mwDSZb+dadO3eYXeXfIEgWDDT4GXOgHBvu/6vb7L9zUpORBVpmImjiZ0FAIxrDqKqiAc9CN1+bQv3UACoBjtaJAJhy+nytkurspAZYZmfrfvjFuvbEUw++Vz84yJH2Y9HRTMdxJJMuLYMARc1s2NPTqp9wTroPnNqOm23P2fIyberI8szQzJX5wz9G8ZeRRLqiALjgojJMOaco7etU95ER2eyMRKbEgNg7C0RzAKrPGdmsMvdxet9iXsXpn17N7UnmdGbdaH7rxq1/3tKSmvrb33t7xl497/zTzs18tRkch3wZbTD1z4qp0Cv2fTtocpYxG0Jyr2ZmRjJ09h45oDGt6h+fAq+E/HvDt132FvDNbdPNXT1aPrBrYxARdbmUiqrSoYUAIwigsa/2P+5fHuReBuW8hPj+ZH81D9osfrrN/tPh3i9cD8X9Z9dlqM0tsR7gAZXg4knmo6hsAaxFZ2mTc+n+s6C4M+rdu3c5wMsJSBQDLvPjIu+trS36/hMTE319fWT/27dvy9Q3zv6kePjYBbfKl/s/3KPe88r+74CmkXQoACoISJ0pwc80QO2CECb0PCMAekBazhyKCIDh/ivfn8egIKooY1Mu4Hu/53vDlZU/LSv7Wm0tZ1sxo+1yubj1CpdhM/Dqp1RMTKhIeWuLxKEGiX0jXRkqgTVh/9VVm7YydX7FVvrlFVv2EduRNFvaQdvB2LFYCgBHLTmAxK7Cm2JbeszCp1dL9pf13juq2EcWaJw0aKT+tZkj5H1x/2P1WHM94D8BH5hUTY2XuXHjfNTtxsarr702E1235Dzg3NK3mIxPRCJbi+kdpUzMAuqFvwBGFt0sLMhkdImMzfQ7cXNVHtVul+wcQwGfyyq7gJZQqF/bVQN04B0EA2re8tracmLickKCHkwKaIcSyORe3j7bN41lEYoqM2EqgwHa2NiU3jw8Nrw+yvyGTQ0f2auqkqoqURmII/+JYn+s7P1DtCDYP3gB4HYo3ISgGc0d6GDGj72N7lZNTeBiabOp9ufx2FtafvSjH5FxuA8EN1fhdE8KgKz+/TcTEx81NFh/rfWjP/zhFlmPtFxUZHInX8YMJLq0XlweAJGJTHH/dy8DyUGvrzvd7h6gBCOUAdkmOoyJoODCOIP96fXhaH2o7j91l2zb1yeL7M+dO8dllsePH2fhc9cNvsKMNhfcMy/HDZr4CuWZWzYxV8PEHTXYzGZ88UARLWkFX1mx2ZZttt+wYsvJtGWm29IpABabBf8PHnjmMc8UIjOl9Ip06ENjQwxKlMCXqDVQewkAzeqd+h/qi3lTpv3odSRi35kM79p/2+SeZJoEGiy3jo64JpJtQmpqYY5LaeK+oBVIA1KBDB8L6RkwUZjZgyiZ9AlkTYAJUCpk9idvhyrCM/A8u2+yO25HK5Rlhsz+OzTg+8B/DnR/SnqB/f3LDsdycvLysWOs6hDHAHRATXOQOQh0eTAzQ85gaVIeg/a3ZV3YL4+PX8kZv/9nx91jY5vnS6ovv2M2+aM/FwG49oP9QxEAbohIAaDdxd3jx9U8VKZtT50KfGsGTeOXqbiyCetWf//DJzv/kP25x5Ou68709Jmioh++9VZHnaOjoWOLQyqs9fJyn4nvHX7ceg/e6AFoCmCQngO/5MWtRgsL6QcoARDDVNh8OmA6qAwe3WRj9iczYOL7KwsODocsBIUaUyHNNnIHDu7DwRmNjL3gBeoxX6EecPLVA6bYmTJiFfDqAezGukzLzFzJzPwKEIcVr4GCs4j+o9FHcETWEpL9F7HI5KmHMsdaJrvV1flNalslAqBeGKn/U4r6VeaHHc1fNltHENA9HtKuGr52Oll+bW0aNzkg5SYm8mey8fNIY1vmK4xhyMb8W/N1MrMCYLXjgmNnbocixNwp1Yj+E3sE64WRsVktYpGzFVHIx9TuZ2wG9JIoukbi3qh+pfr37qNlFDbgIAKEFuZcECv4pz9Fc/MScfgwE5SKpUlAIQ4CFxbqLMDaWjhuakNs4snJmJpSgRJeB9KCebhGUpIxI6j/j/yIWfLT75yWjR+EfczDBPsHQ/2hCAA3oLiJmzTKQP7R9aYm7oJMGieBB3VFlvalS3RJ2HzloTNs0Gsu11pUlP5kBPIn+fltR6faT9ycKJrBF77AgqWT7tvzrYA3BlDRA/QCwwEkpoRY3YChAeGi/6A123D/HXAY7j+7a7AqNK3KeXKSOldYWMhtNrivGTWAurtzEw4qMeMwTsFias7R3886Ug3bIZRk/lGQHRAkK8NRwA3YgD8KAWfL2GDjEDxDgcG1Qf429SPn5pQr5hMJQOroqLW1NaG11UlyKHKXGckf+EDu801SA74Ac5ANb/Un06K03glmzru7NbbcHQJAAqAAkGPJLWyt/BKCQec0rO2IT2Y18SxKdBUpgcVCT4A8SAmiJJMEZfyNMVMAw28UjOJieQIHT6LESuZBMDJgu1pZUcLA12Wz3vz30POPgT8SrsZtaMBvD3TFYlcXd6hettuXjxxZYrHyrkMXADIXm8z6+nJS0t3h4anpD/+OanYxbyOUpysxm9w7hoxxxIxnux9VIb0KBaSufaFsLXynMgRg0if7f4pPb+AGBeBI2Qo3EKRRA/LzQ5Ao9hgKCJsv29zMDBuf7nbjyRzE1vT0lpwbrYWtbVobowyqNNNMbLhmb7dHDMHBEABaPl4YFrBgCAB9tzDM/ZdVoOQRgBke7sPKHVgN9t+5uQ13PeP0ds7Q5TQtGPs9mRWAZWU7EQPkefvkyEUuE3TMoQ9iEEtLsnzMrwDAbif7pz4x59b/S6//RFF/Curuwfht2i6t8RPRJXzy3BD2QQguwSfYShdPnhzc2PjWo0e/t7W1RYtf+3SNzCkCwD8sFhKyKht5oiKDJWrZ+fNBbdT9r4/gWjZ9XlUU9PQZnPHUHo8qHHmMF/NyLCIOy7Nf0DFiWZkEU3n8ZbJ3I/md5+GvZ6vgmBCFS9Mo8HQRZD9ItUlc3xmAFlbXJtDQiCrIeyczkP2BZe5Us7jIv2X0ItStIJIrx6wJtw/ldjomRvS/P++JSeI3QkY1MA6MVeER/6IlvshHNush64dif1K/WHrpIps1jQJA6g49OiHTMJw2appuyGD0SAt+rCJ7rZWulOyuw7Zu3m2GuP/jwU9L6HnxAgAj+bOGNRw9Far7T6ytydQ3LsAmv3OHpXwKuG9wvSs/xpEAmTQd4D4cZp8Er3ZNQKJafGesa3W54BcjrakdLVbOx+nrm3jrSn0q6lqUyb1ou9b0e8BHV2AHrsCAseXO3gLQ5aloT/H0FqaOaGVfP3TIUXbEWep0lbrc75KZlK1jnVHaHOa6YYuN5SCXKiry9i/9EgJGE+DKwKceXL0KVhAjD7pK5DvqAVWFLYJqc+ECA3DlGzHvFeiiJXkIMMuZ0dMPf8iUIJNCssqSzYMyz8sp9q9pQl8jkBoK+4cONnh5NvhabS23KlvOyWGSAGIhRgCsMI5nXiu6dqfoTt9Zy+q7775OuolByMgEqoDf/kPgTwHlCDOuARfMaoAOA8NAIYKAsL+4/9biBfH9KQD0JIKmft1XTVss85jnqF4r6GS1LCa6hPppZtcZu0N1/wWDz8QBLwAsh/C6/yKxYvT6OduKOxlQCfyu2EuMfwKZM+dz5vhvAW4D/XgGunr4l8mt1jRoNACm1jS1I5VTMVtTLa1WAG1X6toUkdcCmg9iOiSPKcEVYf+3gTlhf5o3/jV2x/376uFI9+5VPXz4/mD1+V95553V48VrpWuuIpdH97g1twsuCgAf5DJzbab/p/3N15pbWpbYYEknDG7J4YGhBvAAUReZQmK6n346+VqVv8ySYlKIfY8KU1/PGDzguYskd8oGJZYqQsdrcFDFdszvaZo8I50np0goXZlvBLIBDSjbd+ov2GuS/dzcUmLikt2+lNmOx2rjgTAsBHuMx91aN+mmLWca77/PYUB126q5hyUIUHgT0BF+/AHgX+2tAToM/IMgHxzLwV7D908pWiDvi5GITNxZwOKwiU1x/FkpQxhC7Tlx/5n8Cdj9tyEkvGgBMNifzIKjDcL+yusJAWQQMf0JONsKfqFvQ/LgPt2uC4AFiAG6fdCC7o80GN9wVihN6InEpMwXRoBWWFutFICszay38Bbm2gDa3wP/3rX93QauPMQV9B/HZbR/wNECYxagppnYQFOjAHDs6/r1WNu5d9n6L7EDcM8D6OR9SiLdf5euBGAFK5OuyXZXO5zgxDby6sKC8tqDQT2QVCN0rLz+lRVKrzyPm96ALJ1TXhFfCQI8gwy/FRQwFyQP4pZHsjHdRNVSJ6+qwZWkz8jxLwWa4A8shzfftJWVzTl/ZeH3L+LLauJTaAKggZjF7BSmhjGMjBwORaoRFR7Dg3jsMzKAGX8aoMPA6eDZXxx/HpMLDfbniJGZtFIw0ifUL+sMFN8Z7r9JrIXH/ReMemlABT5TsGUaAsA+GR73HzC2AHOOj3OAl09b5XZM0b5JhHMuuCCDHwMgq414Bp8CINYeMEvwZhewsIQlQNbk+/bvVoBWZYmtidVz1bIqxZz30f3X0B1zGUAtUAbpMaS80lJey/8vJv3SP2aS3Barxnb1qioZftSgxSKW5t3OqxqrNmY2+AA77hW6ubnOtI0e9EZA5UD+F+WJ7bDbKQBUX1mhTZpSpRQKmNZ77TXVoiYmVHixvi77uDHdxJOrSyyHzu/mUAE0KfOP5bSo3rS+x7GPx75YSv0zH1VF+2mLlG6J3YxR/HDO8/A9GrX/4wHmr2bK9z9YIJkfnceKihBcAc2fS8hkN6lfDFYreV/cf/aygN3/OYQBL04AjOw/2yd7qXn33+w0cIBrfbkFE6d7cjoQfIB7W/IB3NyISYZqyA67L9Eq2Wb/GHXEPZgHb5AemOwrBYuFvh4v5GtimbA/WoB+sGWwUOiAm2F/JQAw3KCTsjerTgVITt6zKTscpF9FkohTo73+W6PL5eJCCq6mprKyCVNcKJrBQ+b50PYJubnK9gfGVkMSJDHCo1hKaKtDr5AuVbXN/uf81QOzlkwMPMCD7lM9y8e/QA+UTTFAAdB2fS9ajOoqA82hRzqhf18PyFHYc0xYAxqCZH9x/xPy5kn94vvT9Qn4xjRTL85gxmB/O+w4eUnc/wAaqD2c7r9gSjQAnylYFPvi/gMyB5xFSmbhLnuc38lJPhwK3vX52pz5w3e5xbHah4NeIX2unByfjmeelwDQbgFbaEYz74V7JBzH8SQk+aD01i50UeoYBKD0uOwqtXsK6L6ifmWtT7fpN9+LxoEiq/F6ivlZFLJLAKkY8wuw2bhzeHpGhmW3VAFXs7e3t7PcuMNVXJyHt8KSllxFcEHAi4YWinLJnChpzyMY4VCiFdZpTLO6xfmurq1+yv6F/q7JhsSvt5S1tDNFLxOfTCPaz10kIIHGZrQgWwLZ7T8BLuNlh47QwIFxw/ePz517Qv1uWlElnL6bRxzifD/81tT2EmJ0BtWYj+H+AwG7/0sIG16EABjsz05isL+5bK8JMiMtlZTQhxpub+fOxlx6zdVefJ6t90IwPniP+0C0trY2NzerVWCAqfnmR4CLT0OBttttH69//AiPClBAH78c5YUo9N5izwYb32WNy6pyJCfTv+AP83mV1m3bCrgHaL6I1YQGsGBkU9TBwSW0t38rMTF9eTmdq9YPH+YgOXcx4VAKd4Q29s9guVEGTp0iTakyS0oKjX71l4z6jQwTyy0rSy0160Qn652JPpKtLGzMRGbWqay8pjxrk1Wxfy78YxnLk2WTM03ZW41qrz82lfDsBkqvhFPQaFhZpHwrA37vz4sG3AziHePtWdrz9Zhj6Ow5v+wvjj8tLuf2+fM3z59fSDlvb61yt/ptHixMEnYxihE4DPZnW2HDMeZ9BrDhwWL43X/BnDrlZwe6SEb+h8kQ8xt/mgUZlp1yfBxzc9zmgQMATPEz1ZOdnc3N4DgpiEt/mfPhHm1MZHODezqzaGhgdZDP9l5wlCrjARixjLRZ2qgBP1r5UQlKKADUszzkMRqgo6BDd8BBARjEIGucTW7V4sLpV9VVTpygz+xPAOYDY3/NBLHqfjmvoEAJ0+SkPG244w85HF8bHk7PyUlLT+dMKkMAuIMeU2qPFbpOn3adOcNi894i5SWSAQ0hg1EcGwsdOaYP+/tXPsJHD/GQKaBVrDqtk1VVJztP5+Y25b5y7hVkYk8crz2+2Lh4oNF5oKnpflFR2LaDpi6JYXlYtkYytrXS8cLxDfiCB/i2D4fmDwM//cbsLl/OFV3zLwDMshm+f0zW3z937ttZ56bvnpu3V9tdcPlvGFnI4hyRIASgG92GAAAg74v7TyIIxv1fRdjR8yLcfw88hvuvBqjCBRlcWVjA2trGnTsff/wxaYtZiyNHjtCfFQHgQxooCXRmlxgZNzbKfHOzu68kYfWCq80y3GaZa0v0LN63tgy1kOiLUMR8cypSRQCccNIlHMUogwCVz62/yKvwWv5mtbcAAwGwv2aeWPfiWFL5+joTQapJcn/HT+4MaFo6n2PKCbJUUAoA8/7M/2xtzeTnb3LiP7WSpcUbslh8FZLA9HsHATv2Hwd3/oKkYKebUfyWljhuRTGgs7Hlco2wNHLSmE1ki+6src091piHQ7mAX0KPAhqR25j7SuMrBxpdBwoLDwCt4RKAZCSLUdyNh5dyKPiFhl8GrsAPPMB3nmnJ/xQCzB6+csUv+xP/zPe8WAbjZP85zL079duHzjfcPT8zVzPn0BzYC1/BV9awRtpSYyqmMYlJg/35dfH9xd8MlKTF9gPL+Iwwhann5/7L5j/hBfM5Gxtq1gej366u7icjAdwKlP4sh0XJZcxmbLEH0/WtqFDzzZnOaGpSymEObRZL24ULbfHxA/wKswA9PYt8WMr4gzZPG9OtFlhk6uc61tWQclEdfw/ZglchZfpb5tZqlv21cPvXdBI5ZYY6xfzZ8LCKBrhf3urqPEtxa4s/mZwhz7aRZBFviJGMv1u57PNKvt/77cB/xn7it++8dk4I6RCWA9mfZcI4wFjGwBaRnc23PJWVnTExuQAtzydLH1TsL5bdmP1KBg5ADM1hEQAmf5i4oD19fJ3dLgKww79+DwHibYSIGvhFvQeYhYGPgIPqojU4DLOohcAYaudIvVrNCFUxV8EG58Z/VjsvohbBw/d36QYK9beicwpHYMlTvC/uf6AQ938dLwF8N6Xtp77oW/giGyZpUVEw+03YwUKWSd8MqIeGwE07l5a4167iM4uFwiBzDSWMN78Kj3gItIkxaOD55Wlfwppzc5x56nC5ZMYhyYAiZzwObO90iW7q3fd9FfBJZbvjfSj86h4TaClP1OKxMZaWiqAYHRkCEBuryuzQIeodRWLvmT8fYDdYfb3h1cnfxv7go53XzpWXQkBBAU22/RUBoEyyzkUah4EuQDTg5O5DSo1eloRM4BUYGoC7oQsAUxYJSIhHfCxiN1ifTidtD802hy8geJi5Yr2ykPFByOcO/ipG6v9hK7K65UN0GEg69ARTU4MRANpLgcs+g6FejPahhiZLosiMKv28T+DJc3MVpclGTBL+6jq7KeleNn/+/+y9B1wU2bru/S8FGhAkJ4liAAOimJ0czz5p9rlnNt64z3dzzjnnnHPO+Y4n3JmTdpysM86YYVRMgAhKjgJNqu9Zs37UbYWWohsanKlnv7umraaraq1a63ned721akkezNY3uj32h2kQF1qfWacwNNDfL9a060GqdPa1mboGOYQihhV57uG/QeNy2d/C/vjbS69lJwMV4nEBUJ0lJcXhHW5cHXKP9YqyVu5yiouNRV8rr9xsKSASWx9l/w1YFD6qAZ/EKQDek6BSAvskaPQlAU7GXpcrLQANshXJ5TTGz/6xl+MKt86x5TyN57DARowxPjbRAjM8HTgZrQR5LZxsAdcbRhW1rCrS0uxCpTb29QTAvtJsudMOZiLY/wERsDKgniW32S4I7PnMHu+vBPuH4aS/DhM/7GhGfAgwFLFe6ks+n2HMh28as4hbAOy7UVxcOyUgeqMP4RshVgSZPr+IHdt5FBsW7Fr5s1jchXNst3N6pp62RK1/+G8f96CFUAvcYC1gc2HxwWP/L1gAT91XHK6PfhdivSJA83wEINvBKmAD0THIYD/9QwxNMGEnoHvu51OPGtYtRuAcWPbvIYDBDaw9rbgdIQABAiwHTdBsbHWQxALYVOc441e5ep3r7bTz5VIPFBWZD6uMAN58fst3ATqgBWM3n9pI3lL/eRgjgXDX/3H9YyP8OmPrBFnw22U+6mp9w3FxH0u1neb0AAOTTHbQcZ7zH2z8yH3hBb1tjh//cerq/JRv/SNAgAABAiRFe/B8mmmzFl3pOHtesfNc7LPnXxUECBAgQCAAz7MQd5hpS04hcw9btrB9O/X1Zhai4/DVQYAAAQIEAnCSBagwtnGjyfraBRB27OCrhgABAgQIBKBxMfYX7OoKoRBfTQQIECBAIACFPIpCAgQIECDA1wAbCBAgQIAAgQAECBAgQICvDxzXdQkQIECAAEEEECBAgAABvt4CMAz/Hn4EnEetBv48XMEvRuE/wjfAgTT4/+CXiAbHh5XDt+E/wG3fJ145i/N00dEB/xCOgQOvwL+GfnxhAv4L/AQ4UA9/HW7gIeYaSjTG4H/AX/XfrtZhGR1/9jr8G+/ufg5/CrYtp8W0w9+HIz7OtB/+BtyIcnGvwb+DIXyiCf4i1IIDu+EvQTP+8Dn8SagCBw7A34q+atl78Idhawxd0fFnb2CIo48n4R78IzgOIfhN8A4eVoluDsPfhTaWQBj+O7wRB3mFDHPyzlMdARTA8XnbRoCvyote2ozRru3TW0bXn7OVDTnGDBiEIWMGAaqssTqomD96PgGeSgHYDMfhmDF2E+Crwv7MU7+1u1/hV6R57L8BmIUhGJQlpMTrH1vnKTonwfKy/hEIQMo89R+HBlYHAX6RNcA96/5726eujP6Z1rJ/NkIE+7sE8DTA2kojK6oABEg6FTUJ8D2ioAb2LVjUKspxRuE7RCANfgJY8HOHR9HWRksLIyMYeCM/Bcd58dHfwSkfZ10MGzaQnExaGllZ5OVRUkJ6OkvAx+mSkqiuXnQBVwfcKAfogE95BC9DnlfKaCeeWCSlUg87gWi/9V9FDk4yyWmkbWZzHnkllGSQ4b96/KL9NG1dHvvLXq83d8Q//De/hdjAhhRSVMYssmwZ9TluDXCIgJrwxYv09GDZnwM5bKeRU4O3GLzIkJ1yrxazf7+vSm2Hz+K/LA+vQfaSvalpwXpCu2AvPvH5AlU/ANu9k0aetWqYqu9RBZdh1lsv8ciRGN5H0ELLda5PMRUhLNvZeGCpst6DT/BACN7w05tsQ4sDh6FqkTrxEIZ3iBcLSkSjJwC+NWAn1PjrgQvrJg0a/SyKePcuH3zA2bP09WF9f6qP8eIxji34XYxd3xMAkb5de7W01HTD2tonLGXn63QpKRw/rharQ/k9wAINeBnw1exgHH4ZD/ug3tdvF1bRz0QVAJFjAQWllG5lay21IsoVE4CxMaP07W/TBrNou7eNmnb27cM//Dc/fmZxAUgn3StjNdUqo/7pK+/rLk2258/z/e9z6xaQzSs55OS8BUgABhk6z+AdTCt87rnHVoZ1o1aqpwHx4zX/vSlSA3YZs4hBAw4Yg0XJTj2xqoiqt6nq4DYG7NmjvmQ0YDnoo+8MZz7iozHGcKzv/2NUVfkrq6cBKXDSR2+KXwMOweFodbKiGhCyR/clAJ4G7Nv3a+EkvOkJwPJ7/gh8NxVO+omau7v55BM+/ZT33+f69f3sF/Uf57gslVS/J/bOSlQ4jiHrTZsM4xcWUlHBjh20t3P4sFECixhOV1amHq2mrMPaHu3/AHfhLLy8zBN7GrBPtrzfelWUGjUCEDlmk11IYQUV29neSmsDDbvZvTICIPa3Nv05kNdOZrv5l38B8N/8SI0aAWxiU2QZdUEHOagPvjRAcKNqQDhMVxfXrvH22477LcP+8/7FqaEhpAGDP4TaExw6xPR0xI+XKlwbfE58eHW59XgFWmJhf4vPoB32w4Enn1Usbewyt3+I8c6Skti1SwH1soIA3cE73DnHuSaaqNpK1Td1UFW+77J2wAVojI0ClolDMr9nmYxjDNPTM/9rAv816yebeM9r0yLKlV+71MFTnGFRvzWx/y52ifetWacsBrySmsrJZ2jEPi7pYdadnQxPDoWHHgw8uHNn6NIldu826jMxYYLyykpiw717nDuHFYBXX0Unf8xptPW4rvAKqfDMwuWgw4SHGe6h5zM+u8hFucaddGrPNNP11BM/pLeytraa/1jz5s9t/5u//MtWDu7eVTNb2QLCYmWcYWaSySGGHvDgNrcvcUlNTp+N5whWA+IIBQzFW3Nz5tlfbQvm5rD7JQN4X0U9zAFfu1w4D6fgraGL2a1Q/zTO8tF9txqQn09f37htHsZqavAH3VO1KutZeJJiLFE4Ia062AiyN+Lo6yf87Y0CF8bg+/A9bbvP3L6t0Daf/M1s9i0AkXqxG08DcnJWUABcIjE5aXx/a5cuacBBYz7W5J0RKxoRSuHEY9H5LLMTTKgb3uNeCy0XJi9cuDA1NkZSkumMW7YYRz42NDdbATD27LOsf0RWUaQAWHK8z/1b3LrCFflTAwyI/eU1q3CVVBIPJJW2b/f2FhTUFBQU3N28+cW2EdvlV1AA/jUWi5RRbWCccbUBCdtNbkoALnBBCufiKiwooCCLrFg1wAXHY3lL8dq6WGFwBwcd7Z8LpZGbq/1kZrpPvj8R+DVP6knD8JayDvxN4M2nUQO2brUmAcC2EMmAfwGw1C8NGGVUdZt4AWgEquEgXjOI8TAL8PKyOPUiXOjn4ve5ffsG+Qrc5bTtZKdfAXB5FDvjLE/UMzjMw/P9z57dwhbP96+gIm52W0QDbOfvp1/N5TKX00l/l3dv3JC8qbUo7jRNLga8/o3Xf9j4w3O/d9YKgJSgrs5HRi4B8F1FkQIgxu+g4ypX88jToKqI8nM+zyW3lNI4BcBz7hzXKTpbVFhYWFBY2N46Yrt8vU0Fr1TpomiA2sBDHqoNiC+aadYde5/3FQrIUVILlNN0hCNAzBoglrcaQMGX7D8/CmFVQVvttOYyj/8D34KNUUvwU0uw/yngz3o/ego1wGPsy5eZ6uqy7cTE5kVF+ECk+++JSeJ7k38N8CkALy3Lnb42woXvIUfgwoUyeJ2GAxyQBqhV+xIAd+nzOCv7wJx1/K2Jayz1y/ffwQ7iQx7eyXIXErBYTFF/JpkiArGbQgG1Hfmm9+/HKADT4UOHwsNn7509t9cKgNmWlz/KE2ukAf6ryEMZZfvYV0JJMsnSy1/hV8SPqqVaaiUM5ZQTE2z61/ZtNcqSYv2vJHXLltlbt+xu2b59Kx1jLlZGuflim73stVGm6FpN8AY3lOdQAQ9z2MGJWQPk6Q8NGQ1gZ2QCAMv+ngB4wsBvW8j+wnbmUblECc8v9qPtC3loPSMjA08D5JB5iSI/AtBHn3X/de9ISkq8+y+ULvgUU92XEoEQlPpv5b294n3L/s70dMM8+6sj+5oH4OIH7gr2Sl2r5/5vmkr2Rn7qqEvAE9tppO1hj/wEebVgAk/roMWGsBGAQzXhGrksSgZYGx31X4PrEWo9ysaL9LexDVDv6qKrm258I3r6d7qCirLSstLSUsrKSE/3Rn0TOQEqREhcL9JXARULyhtQ6cQmAwzEms5ichLL8qNjjijeNUNAXgRgtQHL/makQqiALNkKZdQcnlo8ytueRxAOsxQWH/3fvBmf2LhRJuWwps+x139iuru74MCua9nfEfvfv6/OZdlfWxZDUvyPPMfbWK9e9Xz/pJHx4/PP/BziECsEJ/qTGp4bmEuuHfANh03XnZrCdWNYBVk/PFQ5PXxoemjIHWpxur1kwEsvrU4NrmoVRUACqWigmGJFAJYZRWLxp39TSVUbrUyqrKyooLJS1n/tWuyp4Dg6nDSghJJ88tUSFOuMMSYZ0Ic88lgOJp1JPV8AjAxaT38sN6fioWX/jZMIc3hDQGO5uQ9NEJCN85A9sBljbAKDTbGzz9ON0lJL3cbp7+4eV2vwkwqeYca6/7IY079paY/bSvamyH3Oajk4ov4vfX+amuTKeOyvRuZLANwETzK/fdvz/RW5HOc5z/1PJMElkyzplwGOYz5pK4sBc3Pls7OHDs2qgw/9kB+eOzfpJQMaGha5FvvJWfcaYAUyk0zAMuMEE/GnfyupEevLUrWxZgSAOFPBLrFAPV4ykEKKTQ/I5phjOfiYj1Wwaaaxw0nGdPez3zIs3wlv2f3Thv1FL5u+3D9LutlPlrVXPeb/Lcssp7PUHXXBecpSwRKAiCBAAuDD/R9hxKbyjJWXJ14ABMfPQPpncAT4uyvVxJ27d637bww89n/CQHpSwgclXDx0dhret+5/hxlvFe9b919cvBpnjdZdRhn1GC03V2Rto8aYsfcQEgBjp+dOawjISwZUV/vIq6xLDUgiydNI0aK1ONO/gHH/qdSW4mJsEFBU1N7ebb/fv183InEuyRRT8iJlgFUCeQb4xk1uypE5zemwE8aFIasBSi/knMppIrsJwYFb2P3P52h/D7mnsNgse9MW2BMA/3B83NGnNBU80dWl1rBkKthz/2NP/4ZChvTT08nI0DYeAXCffJMqoRFjBn8y/qM7wPi4N/Qv7qmhxhv9JzqS1oz9+/ocO+FLduuWEhTeYz+KXBL8Mqw73Omks4ceMBxdVhZ9VqY/Fi3hkNEAd2jYGW4eaPZmBsgkMLBOZcAlKqSOYcIywDKjLJ70ryyffOv22+yLPloNmO3utn/if1KYywqgjz4xs/EfQffKRjxEwwJu0W/VhC5zuRWoNt//BFyaYWCAb/3bgT/xb+eH0l7jt8HPwrXkpG+9ff3n3qbVHi3riFqJLIa75fhQ9acrCEhL8zRAMWHE86BRBKCffhsB3OWueDz29O+WLeYRwLw864usLPvHDh9hn8f+otM88jz2DxEiOpLWhv3FApb6pQHNzRIrb+Qnh5xEsv8009e4pkcbr3JVo9tqMHV11NaybVuctZKqHMYQQ8MMa3vnzj1PAF55RY607ZRrLwP+K+o+93vpteP+YqnNbM4gIy73f2rKsr/3mK/+ZU3tuL192v6VBCAxuM51NQDRh+5XCSU24SEB8P+gtpRjBGeERluZb4vluxj6Oer/wJVs9g1CNgafaj+zg/xsLrk5vParUAMO2Pno8bC/fw14jacAkQLgJY28WcHRHv9/5JebNrFcyHOTb/PwISUlsvXM/g4RuH7dsr/Zgsf+1rVaQgAShe97/2V01Dl/3rD/+fOVbqU38qMqX/E8V/OiHx1D/WOMPeCB3P8rXJEcFe0a0N0/etQ9cMCEgHFC9CENsAIgu3hxbD4ZoFOsmEvrOAv/sfLsP8poCy2ttHbQAeg2FVJYQAExYN6338AGkb01LDZt8oKA/lu34kwF+8ccc3ICNNv5Epf0AdjN7u1sl7MO+BeAYbKHaRyen4Y52MzQVWYmTmQ3vpnDkez5Yg7SK/ZXk9jGNu3UV1jHXC1jxw784LMovcG3Bnwf/h3rHcXFlsaNU97V9dALAti5k0cxy+yKzf4V+4sF4sCZhR+dqOR7xP9s398ki3K8vj6P/QmHRf2W/f1M109K4POIpxDeATtcdedO+tmzO365ft+Vfcdrjh8PHdcdW41o/xQWn8se8/2VzJRXe3fz3f4t/31nVW5t7WYNOh854qMb+utttdQOu8NDjhEAzTCKTAbU1BA/NmywtuAfK+37K6l0jnPNNPfQk056NdVibfnI8aV/t1r3P3J6uqjfaoDCWPV0/6ngW/jHLSwcptwpue0qoHx/OQFnOdtJp2RbnaeOuhpqeAIOEYkRGDZ6z4xl+Q6GPsZkgMnOOWRSvXDIphks+8szMF+hr+oheRmDM3/cB/v70IDfAUNPTSpYAoDnOkgAorn/upuP6MYawCOc95Zk/0b/L4EIPfFgHvt3dpZT7uV+8YEkN5E18w7eM9L1k5OlP/ZrS//vjoqKmrIDDcXP1pC1SmddhP1d3Jn8mfGS8f6S/l9X8sef3/Kz5eV527eW7K2sLDHNayMrBDsQZDv8xdGLX2qANaeoyCU+JCVZW/CPZaJ1wUdvprQEUo6/xsc0SiYfGdjP/j3sETmKuONJ/1rfX/EfEXDLyx2rATk5bW2D/lPBp/CJJpnXk6Y+nRrdPdqzuUfccZ3rYcLP8Zx9GGG5TyEPz5v7yFQvJ8fOASPHyxOoMWibRZbdn0zyMp4TrPTB/r41IPupSgWPRU8FP+7+W9FYI7yF8C6/B2NdLIpkaCQa/tGyBj489lcdpZHmsX8uSyQbEz4E1DAJDVjMzl7u77/8K/8nP/9sbe2OsbEcBV4vv2zpa4WxyW4Woo/M0czNPZu/0/7vfzG7qrSgYItchm3bTAqooYHSUlYCG9loNcBaa0dr5KviQqH4Dr4R1VtKCo6Dq//oH7IYm6zwhSxyYGSCiX7673HvBjfEj4DI8ShHrYMcT/pX9Gfcf7dCWx6F++UQkGRg9tKg/1TwW/jBFVlkZ5o+Pj32v8b6d/dn7c7amrRVYzIa/FHnOcIR23/8o3yIP/Kz/JHfjoVlf20rsM/5W7LFsr8sx9sfU1jmxBedPi1Qo/Y0oLkZr/1ECoCaqHX/Tfo3Pd1Qv/3BGqF/G40XshuzeQOcKLe3cqXmdnR0eLlfwGP/nez02aqSEvuOjO1wwAoAnZ189lnf6aMff+yKtTT8K3vmmWXViYsPnPTeZrcAM+GZ8e7x/u7+v0qHCO5W0ecmulSdDg+7L7xgnyCOv5/luXmHnP+XEG5qGvQSwipv/D1EJiGZtJ9ky8epBezvCYB9UyZQTrnIUe6/BEAOsnyNuNK/bq2NAJyFzdsGBtKAS5fsL/wIwCWWQGolJ89OnD0Lf5yWGnBdw8O9va//yut5bXn57flbDm+pKq6qoWYve2N5wGnMGM/A6ci5vk69a1g+MgKwQUAO3v5lt2oHi6+FBkQKgNeEIlPB9tHPx0f/U1PX9NVaDbDN/7BejHd5YsJjfzUrkb6X+/VB/WsjAPMaMDPjNjc7GzYwOcl5R93SCoD0+8CBlT/twlWM7J2ZYcamAZQHrqAio/vMpe6PGBiQPjm6moICrxm5xAW5lp4A/IAfnDvn2lGgrCx3717igS7Q2qT3afm4YTdR3pWv9lRCiXrVDnbI8dc/de3xpH8JUzlVaWcATC2kpU05Ng8crqgI3b1rf7QCqeCTwNG/T+VP2JPNzXH/PmfPnv+VN3e35RU+yKuZKX711YrMzHT84QqP4mELY2EeggOjdq4vMxPJ2VcMy98l++6jQ0AapND+MDlXsPfRmR/ZdnxNX/naaEDkjK6OjsdTwbPMLv78D6ypAMSrAQ4+4LH/zZsKWD32Fwv4jyWT1uolSeJ7KZi18atXpQFif5l2686uIKoiP0aBgkeRmvSgn/6OL74wQ85lZSYXLHpeof5ykIPeE0GfT34emRAuww+qowlAWhq5xtKQ6d+xcSO/BpKJgIPjLZZSRFE55ZIxWfyzf8veKhP7h6j8VfLsqRbQUqXVgP929+5fnvf5tGMluuURqARcabxu9Oxs//f/ykcfdYbDZGSQm4sCP584tXCAa+z/MmZpHoYwGeA/n625XpeQWUyBYX+1BLH/fXJOWSnFyczkxRc5ciSBb3pwYpv678ZxQie+VLAEAFF/ZCrYc/9VpY+8QWINsSfi0+rNvWhpWfS5zzLKolH/H4WTcGxtBGAhiebnu8eOORKAyUlZ7507VgNsHCD6FRLm64iPppnuoquFlg46uHXL+JxdXVYA4j+zbQKRCeEbD254yYDsg2T4Y+mFMKqZxsk0MJZGcnLs3MhPQXJkd/WWSyykMN75GV6/hcpTlR0YW8Bp3j+noZKcCrFyW9uYj1SwD9Qt+CSxHBigX6KfeuFCODfXlQDI6upiFoBBxn6A8Br8WhhE7P8uOfB7oQUL/gUMAl+Q8wV/BX4DBpw4sfR5nQT0yuiTwLW179tRT5HhD/aP9St7HGvxpIKHOzuxDaKnh8LChe6/hGK9zadfeQ3o7/fYX+SpgVnL/voQbbJYWZS0c9JaVo1o/tgxFcDGAe3t9z/7zAqA2ebkkLCXwdmHUoopzicf742gw8OsKDazOXJ22PXrPVlZTna2GQ560T9LLxCAxnTwLCb8yIKPK4yxMS9yT0/fdGnTJf7XJfgr0d94lo19q/0tZq/iIxUcSyNwa2sddSTZwMDMmTN6eWJeHlYDSkvdJd3mFh7F7Cxzc+wtc/dyEX72ND87Q1L5/W9x9k3K6ikDOrWfn/+56Q19yXkv0vYtyl6lzIEi7HsHEsH7MYQCqaTKD1AsaF8DJaEbYQR/GGXUvlYPML4KabIYHnaI1ACvQQwUJln3X1syM22YYMd/vuIa4LH/vXty+R957tNdXvtJWuOq2bHDCoC2WgT46tVBbyBIr88MhRLn6CSRFCJk3wpn3uY4NcXMjGxln0yqoMJqwHwyYMpmg7M2cIAno4HFsCstgv3T1uuAcET6t6L6Nx6vhE/haPS26UI3vA2VD7j6q+/4TAXHUM6GBgmAtZ6WlvPnDfvn5cmcZY+lVVYqp+/W1wODsssMNf3FHX90RzY/nkO6Pe0XMPiAgZ8lZ7I9548fzsZSFZnGbHyzHpFFlswmflRTffT10CO/Xp1lSfbXX+rv1doB+/yz3KA4nwf1mlPb/qS2lAWj/zYIXp8asPh8vr8JjbADn7h0ybK/PkibPfbXwyYxeA9JrCGsKtbVWQHQVhqg12d6CeHnn1+5E/mIVSeZnGJqllk7IdB7rH4FR4GEfezzgoAzs2e+TAYkZR3fmJ2UtDW2FMcfN2Zwfr0mBT0fnl8RTx4xT4BGd4pcDIqgUvYOxcX/6cGDWFLBPsrppqU5ERpw/XqfBMDash/Q2rbNLSmx76wffNc+BfS7c04eMY978k0MGGhm8Jr215U0lZhHgHgVcrHsb7brFKqPQgqLKMokU5zeQYc49za3a6ld8hVb+stOOu0b13UEbWOIACBybUe1o4e2Rd29m9K+fcHzP+sE7tJh1xGE/dC4vFzawuc+3QM11MQWOyatC208ciQyDohMCB88iB/E/3YO+zI40QAgSjb+WEYGq4PIV0Rc7XfOnevLygplp6RkQw5x4OC6fDCks9NL/xYW/tiXT3jyoyU+AuOKa9hJYQ8etPtIBcc+DulpwPe/f+GC6w0E7dq1vAZmW62dAqZt0nRado55BCgDbx0Ya527c3fnuHYSQA6W/Y2tX5RSWkGF+LWJJlH/da7rswj9CZmhbrqbaW6h5Ra3AP29jqDjxD8rWM1APNjd2Xm/M6Nze6e6UuRa8uub/Z0oO2U+IHr02H9gYAc7Gtyoz306+ELSmj8PZhlAyQArALLJTz+NfDBU/XDl4RAJ9f7LXL7JTRtO2teBUli4OnKHeCIyIXz7dkpWVkp2YSgbXoENy3lMo6+v78aNG8PDw+np6dXV1eXl5YnXAN/uv/eiB389R39q7dKltrawj1RwrKiv94KAyfOCHQgy26KiZfd0bwpYNiU5To6IHgMePsR+NTm+IXISgAs/aYMA1i+2YmbJ7WSn2Pw+9y9xSRJpl1ErppgFuMc9zRs/xzl1KzvrTb/VEXSc+CcE6L7Q1dVz/37Pg5zume715/4vl/1907XH/jduqF15T/6kkRb9NOsuAojCbSkpkQnhgcuXI+OAePy+URjDYizy7PaRhjHG1KBF/Re5eJ7zIhn7ICrV1fasK6kBEd5uCSURCeGSCxceZr/8zWzIgiO+b+GDBw/ef//9ixcv9vb2bt68ua6u7vnnn9+xY8eKNFJ3pdO/yckepUfJjrkLEtxmSrBRjNmbNyUiPlLBMY7MRSYDutrarAbIXnuNpKTlOXmieBsE5Ni5vk42Lp4wDAxg2V/asMG1Wm/Zn3TWL/LJ381u3QF1ljOcUU8R+08zrfoSs8uvzyIriSTtUZO2a2tLJM5yVhGDfX3IXvbWUmszyfFrABdm+nt7+76Eide96GA9oA/6wW580bKDkIdFHlFw44aX+6WPhv4Gy/7lpEP/cqg/L/Jj0jqaFJKVFRkHdLS0RMYBMcd2p7DotR9x8OBNBBNFXeWqmixiqcOHjZ+5Zw8FBauaEtrFLu8VER/wwbvvvv0uy8O1a9c+++yzd99999atWyUlJWNjWmEwd9u2bRs2bFh5jY4//bvNuv9ORobvJyTm14nk5k17GCsAK39DRCIRGtDcPOoNBB096l80I8d52GmJfj4CGBhw7H7r+8u8Kv6f8APWO5S76qZbbVUOmrwlyYA+y9NXx7HvzZYAqEPZl+tp9P8LvrjBDeAoRxUoiK10hJWaFZx0mf/TLxhQtRu7V81+HcDSTBec8s/+rzseLf9uFsPAgMf+Ysj6U/WG/ck6wFmM4eAT+z0BsCdLSkQO0L9nXFQUGQe0tNy17C97+eUY1+c5FYX9rQCMM25fdzPGGMXFZjTgyBHT6UUHq4/Ip0IVLLNMyP25d+/elStXXNeVBlRWVnZ3dw8NDUkGVly44hr/keG5/8tZ4q6sDPubvDx1dT+p4NjLtm2bupk1JaIiB4J27PAf0WPdfxsBWHtMGEofewuQg/CqyzpHGmmi8jBh+1nekl1Co4IKxQcZZFgBGGVUHpVuuT5vZrN9sdIJTmi7gQ3xu4ieBnzrSv/rL/ZP1U3zzXU2/nPKY39/zCz29xBNAK5f59Ilw/4dHaUvlx44ldfAhQNcWOaATz3sBxYKwNprQKTKe3GAthcu9NpRIJmmSsaAX9Vx/uuv8l+jv1J582YKSigtNRQgx//AASMAycmrUtRHXd1kkiMTwuo2y3x1eXIoFNLgj3IAjuOkpaWlpKQkRRuzSHwoEDFnJyfHSwAss615QUB/f+ypYH+IDALGmpqsBngy4Ace+yfNpFpPX8z42Fd7yLZfPXXvZiii6HmeTyVVF7+FLXLwdTc0fCrjUaiAGpGxL1ZqoEHKoZ+s7Auib9/u/N4/7fRe/WZUdX0g/G74Xf47Mj846PhayUPtpqvLyAB0vtv5n5EtF2VQv4o5gJ8kOlLs175RW2sjAEDbs7Dpoo0D5J2v6InF/qmpZGSYAaaSEtOMamp09kSVE/t4nI0DJplcboxcUVGxe/duufxdXV3y+pUD2Lp1q/TA/0X7v+I34J3lNgPrsae2aa9q2mZV/BOe46WCdV/27pVCt80fcmREqh3/bbGlihDljRutBugEOulduNBD7nmbDPDVFCzFpwzyDTZKtXRzI5ebzcrScZxULwLwU8UxNKm9slXUgFd5tZBCla6W2g46euiRB6PuOstsEklppKlo+oMKKrazXeOc9dRrPx7iK2J5OZbwf7IAeqGKhLv//nuTDzgyx+85XmXFkRSnF+L9phFiePW1wX+Dby8YBJYbPjtLWRnh8DSchXTY1GLiAPnoHuI6sRUA9Uv7Fhi7KHl0xHu66OPd6ifqP3nkSQPwC1tJB8bHx/Py8gYHBzdt2lRTU3No8cWMGuO7Yu9GGXzbZ/XY9G+drN26OKpd0bhPOJFhv7Iy0unJyVlohzZsJmBFb4uHwkITgKpJSAPgIuRC3gPJwMInkhsXFYDiQRqH2MCGUkojlmRS2VUCRkdzwLD/Rjb6rOJGloM9skSMBanRyv3vpLOX3hFG1HTnmFOhFB9kkSXlU/GrqdZn/Hcq35mA56tANgdbZVmJFQD/vckvFmpAY0LYX0iKfczX8fGqmhT7RUwQl8kdm54GhsDEAZAuC7M1tEInlgD4GOpZuXKGIcRiqKNuD3ummV5ms3GeffZZ8f7o6GhqaqrWM/B70bHfGVsGH9WT3M63LF1PeS6wz7bmLIwId+60LaFt3vaxas1v2zaZndIlnIdcKwNhqkJLnHPPoDEGsW9SIgJlZdafycE+/u+7ik8m3vf3AfkrMvuKw1FGIwUgk8xlTvdd3k3aUSWbFwD7IUFY+d6EI/NxjldZJSTFmPdzoqxZ5muvb1gPHYMuLw7AWGHsJ44Jq386+YyhmI5T8CWWe9Gh1a6ekCXqdl/xo++W0D9/0LtQ4eu2xBSVRejVEFyA3Hnb/ORaHYQhGCQaQiHL/jK/COEboTV7UUT8rcY/QhmQAAFIWG9yfNBpKHEC4KNfOqwJbs4LgLYvQQYB1i06wQpAzwq/Cd0bBYIKEoTbNgLAbF8iOgbnbeYJxbLsn008CLBVNi8Am3mK4bC2SCIKBqLs0MQW+aqrNiV4CVyeFwBtXybAukWbJWr/SST/3cGLLEYS1/cjBoJgH1GwlPsPDmRjLId4EGALVMGs2T71cGRreHLXZSGGhzl16l+fOsUPfkBjIydf4qcxcNjClhd44ZExPpenDgECBAgQIIno+N1YL7sX3vLcs+d4roqqOup4mhEgQIAAAZKe50mYeXaO++/yTzD2PLBzhhkXl6ccAQIECBAg6STR8QZfVQQIECBAgKTGryX7BwgQIECApEIWQxZfbQQIECBAgA18fRAgQIAAAQIBCBAgQIAAjuu6fF0RIECAAEEEECBAgAABAgE4DX8YtoDzqL0J/wfmeBxOAi0Z3lit06bAT8N/hB6w6IP/Dr8R8lboFPHDWV2Liln43/AmOFAMfxA+Wt8FibR9ROAm/At4A0IxVIfjw47An4cPeTJGMU3tG6vTSiC+s0cv62H4u9DG0rgH/wiOQwh+E7yDQQf8Q8zOVPi2dsZ0wcv7rcV34LdBJjjwCvxr6E/EiRfiV+G3RlzIv4GBZV9HGvx/8EtfxwhgH9SxSqiZt0KwyIc675xPJwKUwAEisAP2z9vKo3L+0AeIDS5rCZcAwasg1isKoc7YaiAUIQCRqIPOebtFvAjgJJZkUqBBtnBZ7G6M9UAbK4e0eeqXZQbsHyAQgJV3/2Wr6v7nL4iPIjVggqcJwVtvGxYVgE3zGtCj7QreVEv9+2EbMeBt1hJv8/VEgKRTiyQBuoiCN2EDHhpZPsYYe8CDAQZGGBlnfJrpOebsWijppGeRlU9+CSUppBCJXfPsv4dlYHCQe/fo62N0lKkpu4w6GRnk5FBczPz6Wamwc94WojxCA84yj+lp7t7lwQOGhpicZG6OlBQ2b6aoiIoKc4plYmJi4sqVK52dnYAW9tLqvlrikZhhr03FHx9nZoaNG0lPJztbpfa3eN6CRjELP8+jKIbniIbGlWZ/3cTubgYGzK1Uhc/O4jimzlVLKldBAaWlppgR2A4HrAAsLFU17P+Ennt0wydYqAXuY18VVfjDZ5/R3h55tv2k7OdHDpD6SB2cijqo+x0fqulsZGMaaZlk5pJbRJG2+ISPs8f2cvbDRNZRY5Sz3INPHo2x34AO+HTBzhiqy/vlApxqXDQDMMqjeBnyHm2qp3ycdeF5G72f+k8CjBGBVyA38nD+L4U0+AmWi8ZoAuBDA96MbyXPDjpuc1vb+9zvo2+YYQnAFFMurhWATWzKJruAgi1sUT/czvY8e5cyoQ5rfiGaaGri5k3TR0UcIyN4ApCZSV6eYX+7BPy2bZ77nxc99uict3tgjnzjBq2t3L8vShJ5GwGwa36XlFBdze7d1NezHHz00UenT5++desW6Iq2aY3fV199NVlXu1zcvs21a9y5Q1cX/f08fIgnALbU9vK2b/fJG1E0oPhJd/+tFaV+1YkKZSXNarkq3BMAK+fS3fJyVZy5oampQM489R+ATYuWav9+0zC6v0d3H3cQcsiROyL/I4Ol9fv6dT75hNOnwWAz7Of1AzKd3UdvXtCnfxPRYJdZ38xm9YUSSsopr6ZaXQN/8H92nzgEh4GlBMDTgAULJnoaELK/XX512V9GgXl3PUtowMsLCuBPebzz+hIAHxrwChYxiGCa/eNVEgAoaKEA4T/DKfjlK1d+mtghum+i6RrXbnGrjbYuunrpHWLoIQ8jBUAdT52wkEK18q1sraFmL3v3s3/Dvg1Y9i/BF+T1nz3LpUtcvWqoUDQtPz0cRhBNSwDkMJaViQTFLOn792sl9Zq0tBqiIt3TgIGBznPnXHtkEZNOZEnWdc2Rc3ONH7pzp9k/PMxzz+H4IUDp1E25/9KATz/91HXdI0eOpKWlVVZW7hZTLwuffsr581jl6+igt5exMSsAxlNWqcWSujx9NTjI4cPL5A1PA4qiLoDqrqjjL8a/fNnomYrT1kZnpxEAVWykAOhuqtqlu5WV7NhhpKKuTh88378yWqnS0owG9PTQ/V16vqeKOsIRudgi2ROcWDKwVBOQffyxaVy8YKjfHK2iwndVWozAdwkBTxIALzKWY1RJ5Q527GJXHXX6J9Hh/+z+cUi2vLN0wAVoXLDzIjTGdsGGhWMos8e7Ly/nV95ZLfv7/6kPDXgZYrwUUuHkquUA5EyJd/LzXRi31/IpXGmEv0BMuMGNc5xTf2mmWZ/vcMfFBeOPlmSaLrxhg7rz3OTkxMjIxI3hXv2NWrx8HIULnXT2VvYeqTuSU5fDPvxAPVLutOman3/OlSviffXqPLbJjXJwJsOTg+HBzj6J0TV5cfIra/r6tKR6zTPP5GRlER07oPP+/c4zZzrPnr1y/ryOnE+fOCevxjCJAoCRkXBn5/1b5+4byRkYMLSrL0SyPjA0NNTT09Pa2qqBIEBxwIMHDxQEsCycOcOHHxoNuHhR5ZKOKsYRcYhBwrPhgZGBeyP3RsSPMgnD5KRRhYYGVhDuijr+ukG6gypLc7PulDTVjtLkkptOUTLJc+5cOBweDY8O9KnJ3CAnx7j/7e1qAPUDAw1Hj1oBeBKqqmwcIJMzf5nLYn9r8j+IDsv+0ibD/rt26SDGDhwgJjxDCA4RBdNMjzE2wMBFLsrkG+1kp7yoBzw4xKE97CE+nCAEB7EIECSBjV+cnu7Kc7T4xBu1Owk1LBMi/dOcPsvZ85y/whUwbmh1tXGU9UHemyJmx5EAIOobHjbU1NlJa+v4lcEr7bT3JPUM7Rsarxs/UXeiKKWIJaEDXbggEpQGyBEupliO0ja2iQ0lKg7OBBN99N3l7k1uXuu4ltE9WDOSWTO1s2YOnoEcoqOjLuVM5+SZzq4znZfPydeUSm7dKrlUbRkBEF23tYkXxMMDYXGxPG59J4koLGQJqBJSNeKfm5vbpkMYaczLyMgIhUL4x9WrGpMWi6ngqcPhgzwjJ7GCCtGlBGCSSZW6lVZxXHNHs6nrpCSys20iZB2yv+6dkXDdx3PnTNFAZREpl1KaR56GCo0AMBcmPMyw+Fs39NbgrTH9fWdnaV9fw+how9TUgRMnjMg9GZ4A9PSEb96M1IBUUqPVtGV/bXWrLPXLvHP5xz/Bw1Y4zAK4uBKAUUb76e+kU87Tda530KHP2iNh0LcSH2LCP8JDNYEGBALgwfVIYdx3YiiK7y/2/5APz3BGPktKiukme/YYiamoMMSYlRUpAIZD1RM7OuQCq5uJBIaH976XVPcwvy5cVD0Nx6F86aHZ5mZ1Tf1YZKGlKw9zuJZafbYDu+OMq7urIykE0M7BqcGaj2pqZmuyZrOYhWcgn8XQCmfy8s7U1Z3u7Lw8OmoKsm+fGU2RkonqJQCSLvmsKtH0tLhrxFxJTY08cT8CUFFRUVtbK69fvA/oswZ/quSf+sTDh7bUosvk4fHneUmDGOIFKV8BBeJKyZ4cRnGHTSE29zWb2Ki8HOlY/AKwssM+IHdeKmrDOLWGTDIbaJCru4Md8n9VIt1KFcrFlbANMthFl1pXCy3yNm533G4YmW0IZzTMFubPbOQZSOFJSEmxGiAB0LZtpM3TgKMcZQH6+w31W/Z3XSz16wj6RdzjsVWLaoBETgLQQ494X15LFVUXuKBbqZ1TTDk4IUIS+xjP/lXTAJc4EQiAG/fK7d64v0Z+5Ptb9hczyiE7dIj6ehGcfGc5zosOhhg/uqXFKERZmXFS6+o+27dvCqZB2xNQzRPQ3m6GOES+IAY8znFpwGOrV4pKdrNbHUnxgcRAnWfnmZ3MgbVnoJBHcRPOYOx0Xd0XAwPY/PHBg6Sl4UF0KqqfnDQCJvUa6Ow0nCLC8IGsrKzjx4+npKTs0ngCKnjZgQMH8vPz8QkNOok0pT8PHhw4ceToTx194adeOL7juKjBo2SpnUjNxdV90e0Yk8aqru7dIxwmFFqp7uYQN/r7JWNK4UgDVJWie4mZRufrqded0l3bwAYehTRAA1vVVG9hyxd80TDccODDAxJ1ZmAWTkA60WDv3HwyoFtjaIpTvSCgggoegaV+mWoauQB28EdteoW4qoToGGBAXovKmE32x3wsJ0Y9S2GKzQ8rxo377KU83XBjcFMDJPlh/xg0oIkm9RSN/IhuRJTPPMPzz3P8uOHN6M83GsZXh6quFglqa/0z8eOleQHQVlYT9ckf9eGuLnXmMsrk/4rrDfsvgKhfpr40wog6uboQn8LsvD0LxczjmqV+zLbFcXjxRaamzIUthIjUDm3l5DBw9yHj4yau8QcFAaWlpcoEgI5QkJSUxGJ4CUZgeH4bBgOJzd27koHMUGZNeU1ded3h8sOW/SNvl8pbQ41IRJVzffa6odrBQYaHJVzrhf3t4I9Y9sIF6ZN8f7G/JFxbjXdvZCOLIYccfVtOeRFFknZJXcPDBj7ACoDZPrPExCxPAGQPW1psEKAWoq1CDebxxRd4o/9qQd7gT2I8VUVvz/CMtrqzs8w+5OE97ikakEbqOl/hlZU8e/xMunGjMTVja/oM9nOkrZbX7y6zUQYC4LKSuMtdEY1Ccjvu39DA0aNGA559Fj/YvNn88d69aiGeWnyxtACMjRkNEKNBFlnqKk92i0QWROJzmLPm5dibItj/duSwQTRs2IDjGLP/MeYT32PjWxtL/n0Jws9AI/wkC/GtRwVgRDY+PtzTM9LdPez25VVu31KxpaqialPq4hqrChFdGsETJiclZbJ1NM9LEYniGBGtRqhA5KoRPIVxZjRmKYj9v8E3pOi2dIThw3kB0PbHiQpLTPX1XjLg9uBtbyBI0uLNQ7DsLzO32Rv8yc9P5DiFwiCx/yijffR9l++qi0nOlR3ZwQ65MutolCQt7TGzyS5jkTvjQ/wDFgGS/LcJ//Wq+FTjlS202Ai7rs70lMOHn3D/fgFOYWwmYmBk4VCMjQN+Z9QMsDVwcKyxLJy3QYAnAB/Os387/jAwYARISmRELCMjSrDzWdRdWRD2zn6ECBzxBOAxDRgZGdb/a4eGS5iby922I3dLZV40bvZcL+ujichk8fa7/n6nt9dIr33eVKUuLIyBFu1Ylsn/tLTguqIz+xCwpWCfMOzvYQY+8CcAQmkpXjLgvfciB4JKKY188kffc9BQv7HduxM/Sq1qkVLZWTW3uHWDG9qqx/kRADdmVX8WTsJ/jUsA7AerAVYMVpf9Aw3wUVtJ7krXvtwTRQBttLXSap8qqqkxud9QKP6O0AZTRENyMtZgmOF++u9z33Pz/eISzDGPD+AMdPqfgyXuam/HDBAfKKe4WDzo8znfIfg+kXgeWCgAhRjzMA4jjA2/NjYyMibhkQBUVOSWluZg8TcfP9VDHk4wMckkQmam0af09Lie07961RFr68PICNPTRlykfKLNbdsk+8uTgYcPuXvXVF9rK6ARvJ3slMNr5Sp2nIZZ/MAKgLWRq1cjNeCLpg2W/U1kUl6+cPAnwaihRnlgOf6ifvUydTfpgW7uJjatrtf/i1CML4RCYnm1LjkE2noRgD6o1cnszkTkewMNcBP7LqAHPBDzdtHl4ooNKiqU8hUhxNwgre/RuHTTE6PpfNnZdtaxeogdw62nPoss/OMK4EUA3X6lqQ37CH5zM/aZdCN9VVX+J3oMwg+isL/w91gE6bLiseLiMZAJOZBrtsLNxSdj6+700WcnT8lVV3XFMjRsa+nCdxw7KdpOfJuask+XGopUNrunxwzklZUtQ07u36ezk9lZOfLyZ6uoqqaa+PEpvuA4kU8EtfS3lDglJW5JSU9J8+X9Nv0rXrPUb3NTa/WQShllqp9SSlVRI4yor+m2SrgWVpfL2mHLFtMM8vKorKSoyIu07E51De1cXfYPNMBdi5fByfUWxfTQY2eViWfUEhKB9HQ53WIfaY58ybOcVR5qjDGxntzJcsptLO8f/tlfjuH580YAPvmE9r5NPHfUPvFq6XUB2omCQRghxPIwNm9CrrHFIMdfLu0lLt3ghhxG9j7Pjh3qhDFyxFn45LxmHqRdvFg6c116l7LF8H9/P61X2l2RpSTh4UPpgVhSwuz3+Z++PpGvzVXYHGyCu4ZN7To2IfzDHyoTYC6jqaTpUvGlS8W9vXDMUL8r9lftRYGTkMH3IopUS/nkSwDU3dTpBhjwBGBdZHUOHTLhuJqBjaMsDh60O0UK2rmK7B9ogLtGbwNVixxmeIghQNQgXzM/P1FOiR1vamsTjwxPDv+AH8gzUpgsX1JOkwRAW9kKMsvEBGfPcu6c8f21vTFSzIsHOXaMo0YDSATGYHReAP4F/PNODFzuubgzzIj6Bxm8x70WWi5w4Vz6Ofaf4MgRt77eDGHHgHNwGj76YN/tM2/U91RWmvubkkI4bGjz+nVTIf3yltXP8/JMfasq/GBkhKEhmX2wJ5dcsdsadIr6evdLAQh3d6c2N1/pvVJyu6TlWklzc8mt6uptPgZ/7Cmc1WR/W0VZZMnsgKc63SijLMAo/jHqh/0zl9wROSQrDVg48UI748JF778B/Df0xAnAOOMPeSgDM9aXkWFdwISguhp10cFBpqfFx9MDZgL9da7beNnTgEoqNX66ne0ppBAHdBJNVzp92lCeIoC+gl28etD4OGrix4+TIERGAO4/ARdrEy7vzDI7yaRoVYNyrQWtP1c2VbLtxQ0KTXSFUqnYnsM7Lev8S8Mff+MbfV++d8fEeaEQdg6Ejfa+8x3mmpt1OxTvi1J9pfvGx42p4YAGiTPIkK1Jp7ADQZe7u/9qT89fLLxa8hdLejpKfmdGxuUDB4oPHNikb30kTtxVdnnSSZelkWZ7nGRexgK8hU/0wltLsv+PL8L3v41E4xTCp8Z8IGD/d+CNhArAFFOyaaZtKsja45iN9q/o2Bj53+gQr83MGMYpKKClBb1gp79fzq8sk0wJgMRAAqBguZZa+6IIYsXlyxoFwWrAVN1Bkb6I1ZgYNtHsPwfuc+A+YuFZfkECIPew5yd7/njJz/y85hpUVW2tqdm1b19qrCm4wT/J9RdKX3zx548de66hwYZ3jqe/jiPytPnwCSMI9++bf1dWsiTUaqyBhFmWSiprAbWc9v37L3V3X+rpyfje9y53Xu5r+mH6c0eL9+8p3r/3RFXVepicmkyyNUBxnrVY31PWC6c86o/O/hZrLgBv8QkyHwjY/9vQmNAIYI45F1fmPRdv7ckN8x0I80S8CMVY/DqeCHWKl14yA09lZXY4yNBQZyddXaNDQ4oGZEUUyf1vpbWbbgXOMb9NRQfW4T7/nKmtNXaqm5Gf0lISgctQHyEA7lEWgZM8s7G+OTROxif5P//fPy7cUlheXr4j27wy7TCHJYcsH8dzOFGrV51qVocq+/FhD2X7y80DUEZysXPNhoZ8CYDrMjdntmBbjYPDWiAc5vKdvZfvdF++3eP+i9Pf+M7xX5P8nd+4/3LxgWKZ96q49QM3usp8lyUQCocb//t3//t/58l4lnWDvfdgLzGgJRvOf53YPxUaEz0EZLuubMGj+UuEpu/AJFHwEhZ+BMAbyZU7KvffvvBAAiBXVBpgXzXXPWae9eukc5hhXV0aaTXUsHzI6ZLDOjaGEZvaWk6coKSEBGEL/Bv4hfk+7pzF/Qc8ihBzjeYKHz5kYKCv85/33bx59WJL1m52q/gT7sSLvBhDOuS4tSSx/yJZtpwcOwXCG9XxOx1arcZOTZAM6KZYYw3gTfjaf/v2qzv37Szt2l3a1TX5z85f/lOXi5OL7SRhtZm1XQXT8/ptNOBN71g2fiQEL74Nb4DD04BGYNeyNeAGtADnvzbs70BobXIAdtRH8fskk+Ewk5PGRAqP4BcWf8h4ZgV9j8xM9u0z9uCBqN+anHa7ZIr6dxtt6j/ppBdQUEGF/y4dmdCyNmWfdxb5JQ4FsAVKIAuGMXD+GO5dIlevEJdiJaq3l7t3uXqVz/OHT5/+ZIyxjc7GLLI8AfDPUn8b/jSkRp9Ua83qv67AmP/aDIUkGGHCajUyVhjOkkVtb7eve3O0VTOu3Vdb1VVV1rXP7epyytrM5ADXCMAxjvk/z2poQOS4v5quupuMGHDStqWXIuO4dS8Ay9SAG8YEtdwg67vqApBBhjV14NFRZCMjFBYuETeo9/+4HWZ0oRVOyTqVyH076hgo0/hDcbGxhgbDgurfN25QXi550OD9Pe5d5aodDlpsyliKTwFAAiBTH0woSqwGWAGwqFj4KWKhhJISQ83DwzQ1N+WRJ9nbyU4V3xc3RiCLlYd9YEBb0ZpajWyEEd25RK5PPDnpuf8mbDrqmvm++/btK+2alPegGjQPhjpqTMaqqFrD1fCHGLIP/9j5zzL1uDj4NB9eejqelqyO/OQPN75uz/w4aykA2WTbx/j66BscpL/fEO/27U96JreGmh/jx6aZjihJJ5wCGqOsWPcMfAhzy0zu2eUIjKvuugwN0dRk50b10rt45/AhAN80ApBiBCDRsOyv7XU/PCP2V4air4+bN2luxi7PqbDICoDFWg5rZGXJdGt0iQMM9NOvmyJ9In5ULSOrb+3OHSqprKfeWG09nRM2ghxvarKTA+w0hRChtaq0HnpUP6olQFqu7iYjBmz2LitzfT8xH389OgH7J0IA8sm3E3lucMOb3Tk9TXJyVA2opVZdfdadBYt7kWnik4u54idgBj5m+VBPOXIEXdm1axIAuVFyNhVQxyYAP5oCsnSsAKxRBJAO4376R34+RUXk5RmPsXfE0IccSSzWXAN0WZLnwkIJlCRZdKv4bJLJeJ8FKoJj+IFdz8eamN2yv2wTm9i3zyaQtL3Tf8dqgATgCEdYC6h+rHgPMgjoSuy8MOLG060B65/9Xdda5IsjEzrykwAB2MKWUkrLKVdMOjY+Zl/ucusWu3YtuHsRg44bXJs69tscn4FZjH0SG9fYZGVy8ty0GaWOkm/8Jk/EcyH4fwKwJv2gZGpqS2trSXv77YkJtmzh8OEl+od0yr6Ja2RkMkxYtvID6rFBXnVJCaWl0tXwVLiNNvtKwTrqiBmb4Rgc9TWhz77tRzY+zlHM4I9dVMfGjlYDjL3/vicA2lZQkXjVbKFFAZx915Z9rFndbTObE8CnT6cGOKwTqMPJ7LPOKdZWlv2dtReAJJKqqLIzreROacDh+nW2bjVdW5Tr3T2fIjYFISBKBGDt8zik2N6FZJKJASkQkq2RAPTJaS35vLWktVUacHt0VP6qhtDt9F4n2sCn5M6ag2ONdQKJUkUFlZWmrbS03OLWda5XU11GWQ45xIBkOGaNJeGt8+UN/lhjHlYArD28ccNbM0Cm9pNIsrVrn13jmiJsQKGzVMp7MjXQgPXL/mNjcrtQR52edhzvnXgJ8P0TKwCCqL+GGjkp8uO6u4euXDEdJTtbD8pbxfN7967DNTywCRqwINsGAfMacBED+xIICgt58mwd+8oB3YyZmSyyMsmUEQP2G+NvkGi0GqONLa1b5lq3XGjd8lFbaHY2LNd+505qa+3Ei532Eh+ba9Xba5eBQfGZWmA66awfVFfbl3koYOyb7WuiSSQr9n+e5/0MBPXTr5S+4kh57iqapX6OLi0Ara3e254XDP54cJxIDbg9dttLBhzmcMLIVn3KrrCts0vHxf672V1LrZRyxfnUBeep1wCH9YPOTrq76euzg7G5uYYSHWcF2d9ZLwKgTruHPTa/+h7vXbhAVpao3ziehw6p5N7lRi3NHbgG1+GPY0EFNBjzQN58HDBrjCti/+9/nxs32LaNhgYOHoy6TndLi6RC3diOn9qXasU0D2Cmvb19YmIiMzOzsrKSBOCKx/5mm9KaUt5aXjlWeYkqOYYqukom7RN7zePSYwua377N3btyQaiiWKW2mcP1gpISM1Bo5+5dvHiRi9lki/pd3EMcyiPvyWsQfc7nIkf54+OMP3/o+dCxkB/2n5gQ70cZ/Fm4ZoCnAWfORGaDFaastgY85KG8fumUyvgJn6hzqd0e5KCEai97iRMLeuS6hP9rdlhvUNtS51SAqe4HW7ao6chTTQj7J14ABLXLHnrkaavhfjb32enTYn9VgjxQ9XGRlGRgkcHkcNgubsiNeQGwOAAN8xaJIm8sSGhuviov7ld/1fRf+2rJ3bt1pse7+xdfmBc4NDXpfsgLVuxcSeVyOzDoDP1nzpy5fv366OhoXl7e3r17n3322VAoxKribY/9zVbQ9cv7U8glAVDJxFE5OSQlLfI2CsVhZ8+K5kzyW9CvVHDfk4ETFWvX1YleTSsZHlY7OM1pF1eE3kef/Nwqqh6TAX1rV/mX73+BC9IABXPJe5KTjiW9cOyFDcc2kOZz2pfigCiDP7DoQNBoW1tkMmC587AG/e3zFoWXwikj0kyziqk4wFstWRqwYjdxQY90wXn6RoQc1haTk6YBp6YaP99xTNz94IGhnXPnaG5Wy0lONrFuZSXl5cSCe95//XW9soiPCRMAReJqnRNMzDCzkY2fT37+3nszAwPcu4eyAhUVFBWZCCg9XWwlbRD1O6Oj9PS4nZ3GBTSZgx7uQi40RNgOHkepHQtqbp5tapprarqufizq15lU6XJ3y8p0G8zNcF3pj9l565a6u7hQ/6znmV3s2sGOGEZC5KF++OGHn376aV9fn96vMDQ0lJGRcfTo0UQIwAAexD52tE0E0dTf9OmnJuwZGzM+dEmJqV7XNf/s7JTeoVBMfzA4iHxGhWj6YTnlsJ5Gj9UmFCSqKagXue5Ua+v7vD/AwD3u3eCGdFrEJ4oX284xN8WUyLGXXpVd317hijIHodra5OP3ko51JR+9/2xu6ZKDP9b3jzL4swChUKQG3Jy66QmAiJjlIBf+DZF4AKcWvuNhmmm7AGQnndI55UX0T4m3TneMY9IAXe2qOteu+zRqwNphZoYf/AAF4xrgz8lRbxS1iZGMV2tpB7UwOcEarZUTHPvb8G7K/LD/tkdY/48kTADsQNCzPCslSCMtm+wmmi5fvqcuJ/UrLTXhT1YWaWlWACST6vWqKOf+fdrb70gnHM6bVd0p89z/aNVV0c+J5s2zzVs2NO9OY+zS6CX3gw90FJ1JsZa5DVYA5P7buWDygUdG1IU0enuAAzFE0PL6Ozo6rl279vHHH4OilrsKAvbs2bPqAnCehVAtiY366Zfc3mq9pVJK5kT3BQWmeq3wdXerBcr/MBUgV1rc0UDDPvatL/ffYts202dcl5QUNm8WN4vZW2lVrLOFLXnkKW7zBGCMMRVc5CgJnNK+/YfChw+fOXYs6fjx5NLSJDj2xKDcc/9VaQsGf6Jg61ZPA+TTRWaDl+uJ/y54BYv70V7cKQFQGSWB97kfJiz9s2M+dsFkbRPAqq7Lc0RFgHrohh6YA3Uw09N+4RfkfKn1SgAMtQ0MyCPTfhviHjnCgQPs3UuMOLUc9pexRgJg5wS8zMtZZBVSKGezhZY7I3cuXepQl7Prd4mhVEWua99YoIoyYrCJut1UbuMnRFViN7X4/RTzBDRR3VS9oWlD2qBRGnVIOUp32u7Q1mZOIKcyFDLnmJw0J5ieLqJoNwfFgHbB8RieNJ/9EtPT0xigNICGoLRnbm5uw4YNJBYiBXHBJJPS2s1svvbg2g8eTFy5Iv/CEz4bFBlJPsEucZxKLQ3QTWF9QmN3ipMzMkz0VlYmNRttbb0yqzJdCRGSe+4JwEMezjJLUpIR+9pa9Sr1rbEjR85UVCRDEiQT1TP3nvtsa/Mx+BNlIGikq8sOBFlTsMty8EOEsP1vNKSQoh4kr1/6V0WVAlaFrRJvfSZR+Aj+GYsjwE9Dj9UAWTjcHQ4PhsMY1xD7bivvOeeaGuNiyEuUZWURGyY/mfyE/4rsyQjBNpZE0mqHW/LXXuAF23ZrqGmjrZPOHnoGRwdHBcLqwA6OunQW6eVslounjiS1kMdnV4VdgqduQ7OxquYqT2nUSXQiOU0DEwMPJx5OM6ZTiOizqNHB1dt1JepCCgJiSv9KU7KLioqqq6vl9ff29ioDXFVVpT3+2L8i6mGNxQKVV+wvZlTp9Pkud/t6+oZ7xvqYBlTwYjbXU1RBhb6V/yjxe+LgT3L0L/x+k0x82LHDrltJVZX6jYIs7t+XiIVHR8MmPpgzXSs1m4wy+2dUVuondvkBeRZDcMYKgNl6pP6TkevP2+c+Cy6ZvdIV6aId/PH7mikJgER1drYFimktxoQCC11yHTw6Usz34SUeqk4jTbquhmqnHUgJ1Hp9phx+cqmT+8Ib8A4JgI8Ljv0YL63Sia0AeBowOSnr3TI59IIJMaen5REaLzQnh9JSBbcmOdfQIDGI4VLsdawwkuKcz+OfoZSotEPV4uVeeocYGmMsHCEAtqHLS5WHXkqpBEMfeDLC0GSMZnDRb1/kRSmHfc9BN92DDI4zPs20TqFOruNbhVCYv5vd8WUr6zTuLyWwSeD6+vq9foO6kyyGHPtFrFCJxBGqNI0U2xEhece24HIhLYOUUWYXQlBVxHCFaXDS308y4OSKzA1+8UW2bxdbm9xRdzeDg4yN2QEiEzmGQnak1SSUysrUvSJXH+2FM48LQKO3/ryoP+MSb16GSWzKSq6G/8UhpEm6GAUo1r+7DMVQQrNNCfibTZ7sfcl/X/zvbL+QfmeSmUuuuoMcKZaDRh8n94X/xh+AB98mBiT2gv/bon/34mqe2Hb7KasBU1M9h6b6qqZGRowAzMzgOEYAsrIM6VdWmoazlJfY6P864kdSTNM6HZYPB0caIJtgoo++YYbFUJ4AJJNsG7pIvIACfKJ53u7ioZJK2QgjVmZ0Ok8AdHzrSRE35PKnp6fX1taOj49v3rx5+/btehg05kaevRJ3N4ssBZeKbB7wwD5/ZV8XLAFQwfPIEzc5OLFdYVr0K3wbvhnxZcbKtlQxu2xykp4ehoYMeU9NiXaNAKSkGAHIzqagYNE38d2fjwN+z6MqlXSZH78MsjYsrEyyLBw7Znw51wWG4DKUQLEx18FZQktJ8SmREgA7rBQbTvo/uQ8UhyGEHyTggv0f4KWEnDgFymT7ptg3NTFhBGBiQgJg6D4UUlCKX3rgpP/riB9Jyx/XcYgP8vTlg8uIE90RArAA9hWJrCYKvwTLxhEfu+Kq3rhXLPkmj2Kjdvn7SYo+rd48YdkycRfO4CGEcJvQJZBdJk5ETuS/7gkA7MdDNMIMLVJ/LiuOkP+9sWNdXXAoyq6E1dSULC1Nhn/4KkICBMCHBjisHzTPj/+MEA0BAtwhAg/h8rxNsrKwA0GexZ5WC/AUY8oaTwmSWICwE37oPmQR5LF+cGPe979KgAB+cWne2llxDDyqAQQa8HXE9NMtABo+/piP+53+9d4Qm+YtQAD/eMYYf5UY4LJyyITfaiwGrMPTu+v8gr9hjP+QmLO+Zox/t77umH8BaKX1Ez65xCUceMg83k3szfeBN419dfC6Mf49FuuutjfCr5P5y4X9Rtk6LUckAgQIkMTzRMK+HP8aM/eBH8WC55/nq4YAAQIECATgJAuww9hXHAECBAgQCEBjwP5fTwQIECAQgEIeRSFfAwQIECBAgA18fRAgQIAAAQIBCBAgQIAAjuu6fE0QIECAAAGCCCBAgAABAmxwwL+9CP8Cenkczhrb47gOfwdOrNyRnZWwZ+DvQktMa8CdhN8G3yGR8FHyDfC6KRUXWZ9wlml74C/DVVYUw/Dv4UfAgZ3w5+AyfjAL/xveBAeK4Q/CR8SJhHVFZ40sOn4Rvg2pkAW/A74Hq3oTnAUWRAAJQ5UxKiGN9YJ0qJq3SHTzNOPgvB1gfcJleUgyxsaoHTpAAB9wWEsEApAKlZZt15Mm2UsK8Qh+BT6DMZ5CVEcIwFcFSdae6p4dIECQA6iytv6CEhYIgOxX4QtixzRcIrHIiWD/bNYz3PgFIAgFnnYE7n/sawLfvUtnJwMDTE7OL3D8IhRg0UjsePCAnh4GBzFrA4fNwe06fxkZ5ORQWEhx8XIHyz0UQyXfqWS0BO4nJVFezqFDJB7nztHRsWVmxggAWUW8jodGhFR4B9qhzWzZEykS34fXTj1arkz4BkLjp3AMA27BF3AV9rM0bt682dnZqcUstaJ9SkqKlrQsLS3Vcmb4QB99t7k9zTR47J/O1gYi8CyxYGBg4MGDB9pqfc3JyUmtsO84ji5Pa65lZWXl5+eXlJSkpqYSK9xovfLhQ9ra6O5mZITpaTW/jZmZSYWFSWVl5OX56OXuo60vGoYXDDnvhPqIhhDlALPw8zyKYniOaGhkRTDOeAcdPfQMMxwmPMdcCikZZOSRV0ppAQWsHFTrugNigqEhwwGCt4JuZSWx4tSiKYBJIpFFRGdsXKk74BA/1P7b29vVI9RP1R1c11Vf0LKDBQUF5eXl+pAoAdA9uXCBq1dpb6evj/FxXBdeiLfNSUhu3aK1lXv3zJ2XtEgAtNMKgPq5BCA31y70SlUVO3aoUcRw36vMj9+u4vz9lBTsgr0J1oDPPuOHP6S5uWp6upJDlXxzYdX9GFTCF/Ar0D6vAbshv8Xs5bVGODlftEz7G97CfEflfUos9dvtn+EJkNT2nD9//urVq2pbotqpqSm1Kq1mrBXtd+/effDgQTWvJ7UFht7n/c/5fJLJL6k/jYOv0mAJ//+n7jzAokizd38KUERUGhHMNJKlQR1QEAzj5GfdnHdvjk+8Oeecc8453/vf8E8zOzlgwKwgTZLUKCCSJEuy7s86Q03ZQFNd3Yzs2e9hR+jqrq4633ve857zfeU9AHR2dnZ0dPT09PT39w8NDY2Pj4cFAEIUj10jSvEMTgIVwUDiZc3N0tCAK0pfn4yN8aRJ3C9px46kvWVJB78vB0SHpLndv19vlYsYUGAFAIkUAFZGoD0R5hteEbuxEWSDNLRKa7d0szO8PlHVFFOfKgr081Q2nupaKqW7JA43orVVgkHp6IBhwgPBAA0Awk0G/QsLecI/JDA+AQCDac3a6O+8kvxjo9wBvLK5paWFedHX18c8nZmZefr0aXJyMkxoz549zNbCwkIeSM7UWOcAACeqrZXLl3l+NpPkwMCsb8onZobEaC0t3HPuPFOf3EL6+3cNDe3YOr5ly5OEhKeLiwmzsymTMztGMjIWuPPQdp70zXOUAwE5fNhDAGD4+QI7fmNmcZF/8T4aS74EI17i2nx46i9+kTPxdT0ZWWZfEcm2RpCxFAO6nzwJBIOBxgDPSV76VtvkV37guDnBYDC7qVoDAEKeVEkkA1tra2svX758584dkgC8B0KNb4G2oCo5weTk5Llz5yLA6025eUNufCQf9R0akYo3pOK0VKyg/f9TcWnQ7oGGhgYCEufT3d2Nuw8ODo6NjXFWdgBITU1NT0/fvXs3xCc3N7eoqCgQCBw7diyJlC7GJACvvnRJrl+H3+CHwE/ynJFIAEivStx/LOlAEtAvB4Wf8jvFfSoABBhrxIACRjSwZSPQbuLLum6uDd+/Ile40UEJkur1Su+IjCxsXkhgZj55mkb+Krt52mixFPdJX6VUEgkkBuPaX73KfQASuAMyPMzDuzeJyNbN83A/5j2TdXBQamokNzcuAcCOATu4kvG8A/ZNMGIl/nV1dbC0u3fvMinu37/PtJ2amiIDYLYyEfbt28csgK6RHFRVVREP1jMAcGe4P599tvVKQ7VUl0gJMZ/nU/NgcbiAeDDSbe45b3v3LmFud+e9nJyh/YWSeYpH5gPLPD1ZiHVPnkxNTEwND/c/fNjY82lGV1M+MEqugC9IZaVEowOAnn7xP0Pe8f3N5Jk6CCRfjunHhUL+iYN6GjyVfsXHwZ+CzC8NAP1TYkBjYyj4i1AwFDACRaap4o96GYGs6a4RDL7Z9DA7mOEfLCwkXQgwJIKRyN26cuXKZ599hj+dPXsWHkEM4HH2ZAP8CdgFcEkt33zzzRXVzFtyC1x4NnwdEH+gn0GiHgP1a71+/frt27fxdf6bDEBEoDl4OXx/06ZNeMLs7CyKUIdlTICCggL+48GDB8QJvH8nOaLnGMDH4YoXLsjFi5BP+GyOnPCJL3ExMXEocfPQ5qT6JGa7HAgLAK5SAXP9deD1QH+YPk+CuiAXrspVHgeSsDMBZlCxt2Lbtm0EAIgCYNTV1fWb3b8ZkhCBAWkINPD89GkwgPjLHQBjeoeShVl59IBY4sbU48edXV2dHzSTmIEZhoEigB7s8rEp62/e0D9N1jKc8eKFCxeYp0xJIJ6s9/DhwxB/rj/TFsIEeyM/YAogDZHBv/zyy0yWdQkAoC1zlLvEPDkhp8/JuSqpOiAHuOV7ZA/AKlEa8Z1kAkkETdxXX1+a11/8dYI8FJ9bC5IQAMi/QTcepQ+9hbGSG6ASDbe1DTd+GLqPUkSKCKc+fVpwB9cG7Opo7r6tcPwlBwBGjlRYiUgkRVOhxq9jcBB6/04wSABgsvEWX8B7p7wThLOSRDU2JWcX+/1fyc4ObNnCn/Miyiz4TX19PV711ltv4Tfw6O3btwOvfBDY+v777+NbBw4cYM5DMZY/Iwjo1yHgvg5e5tGQxBrxdRz9xo0bnICQAGVnHzp0CIKDJAXiEABgPYAOihDKFVQI6CdUEK6YBiqMnj59Gs3KcxqK+IMrgv5n5MxJOQmrhd8kSVKCJODhsF0ZEGHcjK725wwDxi8P+mOAPvreJblEGMANKisrcRJVnAEg0jKcp62tDWyCpRItgIIdsoOcYKtErUUgLdfXC5efGDDwJE1ePy0vvYRHKaVg8nODkIGCFy5ACgkKe/fKq6+uhvgcwvDpzw3aZZAqsLzIBh9iRmgMIBMlHQf9mRdQIv7JVCVF5vrDmbj++D+MLSUlBcZGohz/AIA0z9wAvHYtphdK4TE59oq8wvQQbwZ2K9uqq8t/dK3i7ALSXkmJoO2DzWhZy66ksbAA6Yf6kyrIvn0Pr1//qAEywG/xCHzBtQLAZFbw3fvwTj9wCiITWHCo9TbYi/Vx+wYSNQIxVWQtK1Y5qDuYbQaDBxuDp0c0BgSMHsM4b9QZ7e/A/Y2mpoL0YMlbhVkB/0wguzVQcTTy5YAywN1IKiHRpaWlJ0+eREsRy+AXo6Oj+ld+ArUEgDBZwEb/0fJDXwQAr8YHoUTh5ZcuXQLQOYGXXnqJrBbQAW7AdCKTHQDAenCHl5ElEACQjEhiSFwWFxeZFa+++irRIuokAHzp7sa3GIgYfBn4DYKGd1E7ciqw4aFfy/vN0oz6j8pHvb2mpgaWQFmIm4IKJyJccHyD688/4Z7IFOmSTkE4T/IAB4m68IMbCKGf6ru8dlzOnJFTp4Qqnc+n4iAlYOY4pcG7d+5kZwveWlYmVrjfYcO9/kfYPzci+m+x0L9GIhgaLPwMPnSVhEi4HmdOnTrFvNCiF65Ojs4sYAowX5gChAFuBEkwKtBx6prxDwBjY4RpaDu3mYnBnfaO/tTWrlyB/hMAApNXa15ByAFAuKPc4tUuoMmflLpnZxsZGQSJOaP2Yn1dIpkCoCVVVeLaVH5h9NsqEAHgy9J/NPzw0/V6sc4TJxr9/qA1JOjvv3U21P+X+jMzz2292PXhxe2Tt1871oM6GggEA4HsgC/bxzeMjF1oJvBoGER1dTUg6+z5ISTAMpjzgDKvIc1fLv3r6MhZjBn9cahh9XI+DofGfcGaEydOHDlypLiYfMaPry8rRY2TwRCWeDFsFIoEV6IGoA1C4FS08o85NGTQewYPQOSXg0BYmVlmo39cY0A4QBgb9Qm89Pzgr+3SToWfG0GVBVc57MiVuS8U4bngpAKU64nibeNtyMI90uMhAEAvoXfMD2ailnrJ7MU2KgAnT9IbwivkGSlJ7+/3DQ6mZ2auiPvOX255YehvrI6vNToiZ6QtpMLgO0AP9KNwotMyNezpwJVnnhIMIP7IQcxTAobdGUGjRLwDwPw8wM1IkjQaABji1ZCfSfaQ+ooeX0VLIthT1Tl0yKUjg1AmJC8hwZidfTr2/vXuWz40I5ICxKNoVaA73XdmFJePHVvXUrA2FzJSux849R8XtqDF4Kyst/mWfj+jhdH36wPTTxaebBrxf/X/+n/f+UBJIJAbQJET7E9bWcM5Wc2YsXgMKSSUAXKNr4SBLL7F7/krr6EUDL+2Gwxuy+3PA0DavS+kf8R3r4aLozXBH6n6cibKNMEayCY6g6xkgD54hDxFLky2CxUlBSYGaHHYdQ+rFmh/oHfHnJw00BlF0P13mjtJEx3z+KvWy2j1SIlXDFghw91I6I8NyzBNn/3Sj6qgsKLoH2Zcc03UYAyt460DMkDqMC7jaEHisMj5DzIv1x56yZD9VrPf8rmMFoT3M2u/970Jn28qMX16ekX0T97o60sU+k8xInVDoHASU1F4uLDa5oAEt5wMcVPgQ7we8sQkIi0mlYcelZeXxzkAgLg69BHBDPFmPT2ofcSAPW03Kt+Q6moivbb3msvlU9jHpExqmzkhJ1VSt2zeIt+Vvf9LTpwwR0eNhw8n79+9u0hOiEyB07guBX9Ow5/kNGsZYJ1LwfoRDP+sJh9a/nV3O65/Xd75OgvDHlx9cM8M3ssO3ssP9gz2VL5X/WQurfGdb83l7kkOFSQHJDlgZGa+LH/3vNVJVCarGIi5YBn+lGSZPG/oLfp7fRmvF81hjG6b/ps296du49VQoihFwHRQEkQEr8XLiQFucli4D3kxp0eIgv4wW4glIBGVA9cBAAPWfwUhEX5jzs8niLHJ3MSt2SSbvMOy2xgQIRK8eEPTp/ef2bctdZuyBFnFiAGEZFXeOIQDmbZ2AHATBvAvBjdBnY9B9V+WG4rQkyfcqbn09GfDp4i/WTaGmW5Wfp1aGjWRThxtDUBHgBUR/DkvL48kjIYIWckQS9vb20mImUQcwoE0UMQ/AECQGSgv3F0dnptaKflB/I4cmabMw0wPR39DpmRKe86gIRMyYQcAeo12Ze06mHUwtzY39+yWQMDs6jLa2tpbkA8RcJGQ4A5RqkDNodtfRi/QUpjJkeN8NEPcW0Aehx4He56VgIMI/v7g5pJgxZF/Har+Sdr75w//mZ82/u7Gnh4qAyjjhwKWpaSUyuoGs060zI4E8rwp6GMaBpR3QOts9B95yR8m/nirc0Jz8F1oC/o+Hkw1AqbjXsEEmHB0rQnDevgJY+INmQZMm5WE1edOtW8liDZ6DX1huO38IgHYL25tclIXNGk/Ow1rRnq6SbKa4plFRng1H4OQtbR+jc4INHKG12Bl6PB2rOvzNpyYz+dR5yFFJSeT5Qbiv/66ICFbA1DY+EZKhGwialVK/yWtRnZoRi0rc1YkNeRZ6BGzj0wXqYcMLMIs4AW8jESNNJqjOJY6meeW0KQVUzU+h9ybn1PSDy8Alz0S4bY2uokKEjoQrUFsfoah/1252yRNbdKGmDgog+AOVxCXIgBAK3Zn7vZn+r+dlVcsufn5eUxz0LQlFCJoUjchAHgpBWsAoEjL1FwH0+I5Y/+jTW7Lv04BaKsESx8Ge64GQ7Wjhcj87SUl5u7Ar3T+67kn21/5+mxGdnd20PDXhogBmaHp0tCuQCDHKJZVDT0HeQfKhrYDfSaFBH9REp0iO79HJlIhiNc7pf92//wX6G8dZXrCLz4CqoLLgt0iAs1hPcvhKMMwfk/OSwghfpAEKAMiEhAA1uzpvqQxQAyRK87X3BfGMvT/vtj2R9xpfvCc9nayHF0yrySK1cRGdrZZXCxHJX7GB+jqKcoYhAENAExYIIDMOBBAWI92VTSdPCTcrPWdmp7iTiEGyiqGSM1f8RYR4fUcCFWMKoLhe2A7Gg+1PZI5YibTmTJAhG1OGHPisP9o3aAdsqGM7imq6MqVBabE8oUaefmUtraq/bEVr6eW6JiGdMGhagLlSv9XM2QiXkMDKLOJAzmcy+g9AKyYqnHWDOThcWkFlBkeAwB5Db0WRVR64NzPIcYT40md1AExXLUWaenKGRwCkSnwJm27PD//s8eP/8Hwx29l7a7IOpSZmQdi7N2by9/5mtuu9U3SJwD9wTyXgjk33m49uz/5xKjKvx2gv47iYoJcoKenem8T05l2qZu5It9AmuaEzfNaGkj0Nx2a/kUg0JOT0yPCCKzOVdFPcBd8C6YAZYCJ27KJUmllEJg2VtIReNOwAsCOVlv6Z76a4t34CJgO3Q40+CMjoN5Q8oXLSJQG1nMghxMAlP7wtiQxsKdIAcAZA2yrlvsEgLA0Pl0rBe4DAKCv61so5XHbATVIrYZe4XLm5xvd3Y+HMqSa38QuOrQRnN8TNDQ+DNykv479E/juTBw6Z2iXgX/QIkHMwVwrUOzxkCVZ+2Rf/XQ9EjMXlsjKdV7WzzFHFOdWgjs7ZSfMhqSDMBAlIzD37OFkCY0ydGsIfBC+C58FQ1zJ5nTYJ/yWhf7GxtJ/gDI6aGullhUSRPsTFvTT2UScwyIEAPrcaMNjxa/KazT20Am9phzKy3ixdlVwLO8QHwnIJgf4kw74OI2ABACEGjhCVPs94Iv46O4pPIl5yy13UF1jQVedsPLw1q5bQ8hDh6sFsrRzJ/nhr8/OPhqt3TbcmPlgIDNzICMDVCQG5LJMlb/7UkcnuV58Z9QMXN9DKVg1ekgHczTu5V/rzVO7e9F/XJZ/BwB9xyBfOI+y87inpCQUCISoxdw0ZGmWQfZNf5rfH/DnBJpJEOzFw4zfvzpx1m4BBBN68PEw6AZ8n5+I8vwGMIVZK7bSdWrT/6dL3N8kYMRmeKoyHREhGhFsIDISvZH5cqwuFmM7I6U/vDnhTcLs8nMyBRUtqkHJ8sp01R+ePjXNZjfm5Yq5r3XIw78j8nfkxnFR+2rU7b50OOuaYpbNzDxNFrxs7y4EIJY1dkxOttUOwHGnquWpyMsxathBglgzPXUU1ZhfTE/YIAGAi0sCQlSAb+m8QGFhyrlFMkPohmJJFw3frPlQJ+EKQ9WdERpvofsQ6ZkMDNAB33Ill50holeyuEKkgGZhIeBvjHHmUDFQDxWLc47QZrNR9+Jj/cRluUwAYBwIjCn019S4EuQ038JEhDSdWUlThkS0HZbxSr0p2rsRtxrAbatb4m9zMzQGbN48MTdBAEAFii4AsJQMnv6MWi5yfy30N+1bSLsx0E8MuLi/de7Uq0Jn6JEjoAzXbHTT/ODszwZHBjPOTWZ9V1cATgisVBo5KZqSGeAsi8IYXIyoS8GzVilYB+x6nVb/zrkt/15zQL8pUinCOQUOHAicZ60WqP5z3RsIW/q/QMrj4PG/eZwY4GcnH+vA+ogBAOhHbIHpM2/pv6S/nrYz+j0QhSB0zGpmO3I8QScjJ+MD+UDp//Cxg6Loz8+Ybcwy+I6IUGOEvyjTidZAJaU/vAnozxvqO2sAiGCH5TDlpcfm4+mr09P/r29afuXvyPdJm8/8QW358QIrYC8NbnV1wp4poD/4xYImGtdIVBGACABM0JHe3k9bvv/00g8Sk4Ra81nPG/C2WyGNTwIxAwGcC8YIWyISkA3TV09UgEqjCIH+/InYQBBySWih8/R0UocbM8bqOuvo0+U6E1khBPZCMDIt3IYuXtaC0fqJZ9A+ywI6idqYtegBTJSnrG2qre2Q63+YWQ3UoGXBAiNXWTdWDDCETjnQX8fe4jGFfoZLejNjGTNR8MElk4jG7dCXsYSTA9XiXATOx9+IMBbiTs0Bt89GtIu/ECvhJhl7yVnA8eeajuulHoi5uv36XNUbdIbSG2TSmqmBQ9oeJT8aTBvMOhFW1lrAQ7SCpC2q+LonFYgAcGtdA4CWf13qP+9YCP5QRHFef+I8sp3/DMlfsfXoEoazVpxZSg+Q+HWs9RAryqeQBeQXujA//vhj6APeQyTAddDiWXLC6jBew01R9L+XPSsVZwX0p0hLDhKz8UEIx0pVtCahFMaDcSCH8yYEAN4TczMBAmaAln94zIx0Tsv/mxZoPy20nc9igPclzfS4ccmW0P/cORrYkTLIuZg7NLuQ4dO6MHbw4K/UvfMrn17/K7GUgq8wpkiphe06mCzwZ+YGkwG9iVQb+s8nfvwxpJrfA6OEfUiVuDYAnWofp0LzRfNo83sn3qPEgiptbwXB1UYwHPrNoZo9NUeMI2wNcEJOeG4QTz3SWtrfMjTUPjrKGu82vghuRngHDVZr8FuQBZPzM0THJlnRNn2Z+k+jNIL7Sv/T84cV+okBLlsUVVWbtUzIDi2LXADA7Fdi3BfeAVMVNJ57AcEj+BwGWAt1YkTntiQ1DKSGQq0miG2UfFl2SPm3sqzsW+Xl36qqylb01wBA7mAM0pVcmknYYIQRQIZ9AtFlnloKZuwduNOvZQAtBa9b+ZfTdxMAitB8lqA/37l7SNOPVY9ettlPkwRKmHr2c2YYkUMNBJmOe0ATCcXeDRRXQ09E+YH704nfk97zufizvRnp31yS/kVEsZvqMbxDU9RoDbmGT+Sn033FkzkPZ+bwnpibWUsWyAD0nTUFwTE89fwDvNBubXPjjeH+oD8xAGi2PxPuAxCr93MR5YP3xbP99gE51SosfKOTmozZmT/Rmwvl5yJQf/jgAzovCAP4YVQBAInsZXl5W8e2PR17Cu4X9Pyenv/15/8X9xqf0QCA0Py1P/u1Uz87lbsvt+RQyUtFL2WmeGk6IswgANxJuhM8Hmwba6v678H5U8Utl4Kic1tjABH0eaNVhGIhHaTK/b+9agD4rfJlGZVLcF8DQErOgEI/g5nv3uwePF1tZ7fhRTZ9GeZ8h3gHAM7JNBls+oFzMKLq/GBqkpySOjI1UlKIJnqYjBqjqMyd0jmSPnKm8Iyf/S6cDQCGAP3EgNHtg0A/VMaJNni4DoEv6IjS7HW5ui0EgwAQ9+5PO9UQF/amzf2X34ySZf9lW8FzCXGprP1hSOfnz59n6S8lPvt5AMgpugUQXVg2/V9ckv5RM1CEKRpT90NqJADQI0ShWHeQ3uT6+j+1jMPtHFZNPJkeq41MvKe+ebQrdgxHt763ttaeHu42VXRIDjcgn7orgOtAf4dVFslkg4yKjKCFiUcL7JYT5SylAR+Xb4dF2gH/APpJBZBeKUxDbqBSTCH35asENv5qaPC3tnaGQjQGfLJ3LzIdd5yrTaAl8frWz+5l75nwHxjLy5+QrinySoq3UT0UhRopoMl+c9r9kXUs6/T583I42fzjZut3Gp0xwNi/33webd+Rd9CiwaHvWKmCvIgAYJ8Sq6YvG58rP3LggUI/MSDaYpm5ZCpvqrkRQtXC3iF+AaC/H3/Cgchh90g5TQI+0yfRGPGDkchIFIZt4Dv7jLOdLNklvRzsAQajc65IBP15TVbWDK4bRv/RD1T8FxRD6rcMzJMKVN9dP60BgPDDu8VunJyu/g31sbWk+/4fuH9JPDYx2eYOOossExHdTscmZTb6Dx3dr7o/FeDLFy8i+KL8EjPQ2XEy+CCBRKMIC9Zd7s4fhviLSyaeTI8F9O135otEpa0YEeb319xvZy1gLLNE6+xAIUx81Y+tgPtQW9PI7cmO8yb8TAP9V6v1IzyT63FmpAKor2iwLgMA6Yzu/Y4LkNH4ExJICr9dVUVxyM4AyBrfffCACvCdW7eIdiYQQeg7exbty/1yM7plaP2g+Hct8dri6dO9lZUdZE6BObPYFBH2e3LGAJuczZgzU8YU3Si/Lr/+HVQJa7zA5h/muco+/Jzd2312SfeHA0RrSmWcbMYNlOvLMOc7eA4AvxK2K6DcE2p26JqJLS3lc0dLTehNPmpGtNU6hpmQwEk6+Rl3kUXgAP3BnQeBj7DandJ/hqJ/mPfyB7x6dMJqIdYKWJSmpWAGa3Sb7X7QkpJ4qv9zOfoRLuXRGnkx5gRNG/3bDs6w0T/oz5q9Omv7aPZdYNcR7U7jEPptWINOCAEOQOHXXnst1V34TF6y2SUDU7w924gDbdmUSgbvSSrjHf01CYjatMIl+CQnoWWuSGibBnzH4/n7Ebq9mRQ+n6bMzF8EWEiJyy1Muf80F7H3OxXt4vx8tqOhIERxiGAP8dcisG4H/awsfOUKz5YwqOcTwiFhfHfKOS4uIvVSbZghDMjJU7oHXB5y1s5RU6z/GWYbGYwjBmgtFcRgAB18mnaC4Lxfvn0kanMDoL/xDP1HM26cq0lT9C8t9fJkSHQbXYqvYo6aG+FITd9BLU4BQDuB6qequ7r2/OPiouwiSj0vyUsSpalEs7Bpk9ZriQHK/9hGHCLAYN4iKIc916b3am9/VT8L6o4sLRVxCuwMaMeEMh2vCx/s9vzm7puq2BAA4rn9Qxj93/DWYDR8Lv1vC9rSf6fV88f+tHQNsQfD0aNH6drUAEDnKFGBvTxVDmInH3FhduEX4NbWN4rS3nYz51i79Y33xFwGIcxYc9uG3xT5b66anLXIRRiSXds4DyGYRZZID0lM9ofWgFjNidFb9fx0uLoCtKk2NenzP3b5fOzNp7tRhu2xQTxgiwJ4gPZ0QQv41kxDMgB90J4R8euT9wclqN0fQqoE8a+qAuLxjDzZKXqsdXQb7+yIAXwEgAApZN8hPpxGcJDhhdj/UwATOgimWSuzWPCdc0feq64u51JRxPS234dWfeExWhDGlNlENl6jLwb3ORxjbnoOAIOyzHa2TX83UJj1s8yc/J1l/T7f6e3RVvt1JwmGtmsi3cAS7I5sfurOBM7yHbWBdl9799/s7vvzfZVb9A2cG+bpcyQTpSQXDHcW2j2Wgh8trQomsNCmGoMhuWoysX9ws7P8u/HtvnHf7vpfWJL+mevt778P0NP0TXsoWAAiAAd4GwuvSNq4a2+//bZuxEYxwE1Z2GcZ7ZsQSbIHAgn/weESpeH6HGgvftF+UE7AO/ovjwG/A9FhzeYNLXKJTmISHIbnz459eyElkzqUIqoG69J7cV0q2nwrvaHQ/xVvDYkg2zfRDkQqwKPc5ltbaeekMcnNk1aZaez4gpRPXEIp50BKJrb6SoMW9N8OA/eIRgZmmFYM6N3d22/2PzQe5u6xE60XYD+VBX5oP9JY0tgf2pFc5hs45puoyOCa53jb72Prktmdctia/RS8EmMuaJVeD/ccAL6//OEk35bxhl9rvrD7g86yTvg6SS5JTrTNegxokb3zH/+yF53zNyYwnkRzuq4+vT90/3rf9YbdDQNpA3/23LmG+U+ZY0wwEgncGHxCeKTd4t7WUpQ2ipPiUJ+9l4KXdJtYA4C+ibP8u+FNd2Gy0X/wyF5t+uQn/A6JnyUC+CJ7NoAINs0HcFFg6CNiTzdWonP7CAlu8NdejcyiM9aa6v4nWoeIdkc5jqUorRVp3hP/WbMUYUSLrylrirCi2qZz50SJ0WKPAZwTA7MZtDsxCyWLPEA7BWgK4KbLKkYMQAUiHeSycwe13sD0JsJLRCMDIIen1wBMEMR9GlUZDkNntpMA7N7t2/oVeBRG15n+UFZoNGGY5J+ZytEvxJLkB99RCJb5toW2f3az9v7Y2AEQSpU3T4nJdst0Bo1bxuxzs6SGV+pWvjssiyUA/CAM/fk3Wny6pD8eeGyMf8A5QrdNdJJodp3mcuAszPuhXl0TZvAeglBpZmQZzxad3+m6A4gAKExpJvPDRw/v9t29+qevHk87Xu579IFFqalLkWVC9ZqbrYeJtefKuQrKtmF6W6ylYOgPKRxkJMbyb7ej/LthzVhhr//WA1NSUaP0HwpJjxAUm/BMvg/C7nt+wlG6100jgHKIvMtl6EAG7wO4oPsRV4guNJXTYqQVaffGUQQeDtczIQvhbb2jv9d6gAK+Bi8YCqGAEe0OPHHeg1hXxjAwe8mMC9MMHTfWhzCDJpEZJS+wZTftyoAjRgYHJF8aeOCByAGybR9vsSJcEgM0AOjPe5A+w2gxjHvG044z7F/CXkcm8xZAekH2/STIsfV1PjM/mzamD7bf4IubwDfn9NprK5YmjIi3Trd/wEREM2PmnUQ0XsDLMBFhhuq6yFgCgJM98Q/9uYtGHWA6Y2brMJMN/Obz+Kri1kjVaEiAUfTfSOnrmyHLpGeMOcOic1aQs4Cwd6yXh3sQyoAYitrDI8NdfV1Vf7mqMquyfN+tu3dyttdCMBGCUFpBV6kfKR07e5w2OPJNz1vSh5eC5/zNdj9oIBDr3p/zzvLvi4f4yMY6jM8DQOpde8Mfsmvn6kQt0oQ9dcveM05XYPFKl837MEfd7VY3n9A93UBw90/14hCUBzYB1QDA4bwh2xV4vQzeYwAAqyNcD4pg9SJH1w39nVgs0bXJaS7DMJKStKXEbQ+iHquHRzTUKGQTRqTsxBSsgP+J2GHAMG7+E8NoNtJ7ftj5la88IvMnOYk1fHu3VxQxq2WUSEYNiKjWduOGQTzT3TNZCBKlMZU0MyaLBdl1yyzYfQRSr/tfkUZrxsaxsLH4PxRe90ln4NzKLCJHs+Ucib40SNr4Pn93dwsLU1DwaZKGObGCfMgYwuOa+5oB/fYt7alm6r7ZfW/JWywxr86vzi2bnx0b+6R5562PR5INYzotbRLFn2ZquD89A3iBw8zYVCBKwbEHAI0BlH9/WfSfB/LApv/z9oY/kHFH274uLUmwbMWeTu3FxMSdIStrIREWjwezoT/uC3mhwOCmh4GN5NiHgNoj8UNrkmQPvKdmAPEzV26OJgrGErk4cZ5RoBXhSCh0n4RLYrV+MqmISo6KrZp/qy7hLjjzfRizU8+M6jricoT1qLp3rAZ+LX6s2ZVJaQIkIWLaCQeXa7VrRQz4PAB0mfJfpel33mgy9h858kdLSy+WlJzZv39XnKK9d3KAOsIzRLnlOvqvX9cAwPDQUaKZMeksxS19NgAThNqbrGTspmVLr0QODtQnacc/AAD5OogCWlyKaopggCEkjXl/71ZLayuh22C3NzyNbafQfNKN9CIpGpXRxSeLcBWqpvyeDUkO5B6Q0wvMLbR+hC6YAhcXBUG3ujVJLOJhbGSoYL3vUX1fLKVgkhTrcMq/GlQ2fvkX8mKj/6Oy3WI1ffLT+YgYDM4+bxnNBmGL19W0/9L9cjA4DuUE/BvfpbmIdlJoDu9ALwBVx8hOTMbAU8D0WWBEAqRPniLJEwV0Q+n1sciNLaArGEsuypycpSGU/1t14dWEhf43iFq8WQxdQLzJG6s/BUub5DgNjOSbM3GHC6pfc3vAZXilPkGaOC0rGeRUNwSFrsIF+P5uIg3hhZ3FfOKj+DeBZsh5hkLUc+CIK8aAQv7XLmadKRflo2Kzt69j/1uXZo8aw2XGsJxhWVKM0B97DKCCUWlWThjPAsBHEx9NEgNAfx0Q32hMHwBAOoskzqJLElz6L4gHK84I2A95MNqp7qmuGziuwzOB24XFQRQJAQvtLWNIlEZ+Ak8Dx/s6O4PBJi4LOwzW1Jgiggp00Dz4wHhADkUqgH/ohrT2w4BIHUh1IBsEAIKBGdmbvSYBCtl9SxoOAcBz9ydv9ctC/230b9k/IRVvKP136sVoMkAz3TUwEa0HhEmQ6P4AAeKj1qDEtYHaYAdvSB8nGQC9pKQRMEpwBzrPTNBNKJ0t/+QKnAZTgl2Mrl27xgQgZtCLwt4VNKeiIMkLMtU4YSZArjbSkOQCu+FxA8J75Zpc75KbY9IWw0KwW1RgIZ+rPFywrY0gSZMctwdEEa2WutTW+A68GBwJhQAg1v3BK5EmwKDlGzqRhIFTxGNuDQjEPOVwN+uy9speHmLKBEF7RMujeZQryIH8DGOTBBnaUgtpBgVV6669XzXzgwu5/+8/XTP+lGH4cA7jjJxh97oXvh9cQAKaAQBin/R9Is4YwHBtTDQSWfyfi4+Ta2bMtGJ7LmcMgCdx8TUJRgjlNQRplmRybLwDwN8WWrX4VgzKHdrPo84UtUHQQiG4yZ33B3btGuay8Jik8nJutJASHjJXbY2mriKMNTL0vZaqesz6+SPPCwLqQ45VwdF8Te6+ij+p3f1+qdz47f+6fdXnAWBrvS39MwmdLAxJEWGR1BK6TbKJX0I0gFqFAAgILB4ajgijj7AQ10a/M23mIL5mFfg6O9NRzoJUKu6QJRB+yCrIEYEYSkTEBv4KLQL6ORmAiYnBgySJAfo0sRdl+lxqfIilSybgSys9lwi2FAhoumzofhH8+erVgrq6vKPp8kdF/qLnuD0uvi6ehiEJSc4GSkV/lnHRyM85aMc+0Ox+SxqwGFlVGzofdnVx07lNKDxAEveXkg8hWTeDwxNAH/YKBaf4phA1QTbks1wYnA9er3uOjnC50tO5SswgzpZACr8E4QwIH+GUi9bWBtel889vmmdPs9I2+c+IlBdf1eqBxgB0GHkh5hCuWCOlOyUzbrTcsNGfgnCUMHlY55Q+7Z0pwDWHe5EW6AJMTbwIvXAgbhAcCI2orKyMlJpEPH4BwPhiva4O6toAsQ7xYNxaxKzBwenHj69e/TQ5ecZq5TaIAVGeNmcD0hpEItyVE7WhX3/GWgq2+0HxaQ+rfxec5d+Na8w9m/7P2crPsmQfRZ6cVFvClWvoQwVwRBy0wTJcEIAgCY2Wg9MOxMIC/BvHJYGot4yUlk/kT7g7EK8BACUavwd3ECXQPTVZZuNScJ+2VGKAvEgjIwX6AEBoN5HM2hgafRMIA7yYLIbBf5PFsoDl4O3bVYf+4EzVr0iVeLbUf7d36wc7t9bW8rZ8JOm1gqagqPBP+DIxABWorIyBEs3Jud+OALenDZQ5xhsSlbnyJGpkXSRkCkb8hjhNAOaX7A6yyOytrsZ5CEUuV+SQ4h+RIyzpAjHZRGGcrj5yI65PMIj6JLwhzVTUBhDTSKc6OhKbm8tmisrN8sqWypOSeNRqb73SecUZA9CUXmwMSDQTK40vigGtziTgxIloWibTcWwyYwgWrTFkxvoEPZIw8gPmHf8kFSbxYrJwL5QAIZwyQ2PtbQ1H/7AAYH8fzwat5p1mZgYWFmprL8/OTo2PE+YNzpzchaUeLjaWNjo7mVZMJWBIvvY1gMLGfYaqwDGWgm8ol/cWAKD/G1//IZmz0X+gNJPZq2M1SoL/Ab64IyQd5yMtoPALK0GQoRKFC+KyAU+Vc1RL0B9qCd8nfsDuec+gZfg6/UV2ALD3edZFZ+S8iEh8LmkEUUpesAGzkGboDcBFf+oD+fBDwItzJWPGswE4HD2vs6OqqqOm5jevVKVuzdk67bl1rXzLlpFDWz6+I2+/ja8BmsQb8JrJBe4zN/gp3A4aUYjrTLqoLDeXA4FgggqxpK21lTIA4ZYbRCeYbgbHrad4g/pHaGGa8CnEgKhgjg0FEJbpCIJ7sSS4E47PxOZyUUhAC+LTuWIjI0n9/bnzh4rkdTSWo3K0oriiQBZ1fQM/67rqnDEAZvpiYwBB6IuCsDnR54wB0bQ449t4Oy0VUCsVgki1ycDQggjA/IlJx8UnJED88X8mIJtxScyWtGIhhSitA0mEEWPnLY7C3YVoDGzZ8uGNm0NDffgqfUFweYpAJAmkg3yIrf2aJvECx4YNwEt0mS0KJ06e+MYbZd3dxxwBID0+peDB+j5V863ClNvyr3XI/qHkjVX+Pb6G9N8sqSCFov9q6i28D4qBUIMaoNDM/Mc7QW1SgTfffBP2gRSDO4onI6vgTYjkEH94jVaGSS/QfBAfKAzg9KQCYBAMCJWJD0WGQnSC8uS547ZrTb6t+pIYDK0MAMRXyZPxYUoAQ2MXL5JAoc/gzZmbZgoKZo9YRZa8k6l3A6mpRup8pBrApgh/SClJSZlISZk7LXBn+D5ArKAJ8hB/EKTYiRo+zgkx3ZhUURrH6pNk8H/QaJ5Hh6L5MFFnZ5mQlIj4UihFZHDMW16gnyVRhmEgmywZ9YZ6AAuDe6eRg0ZmpEMfA47WnCEH91p0ijUBPMOHdIYXS7HYAYAzvPx02pBLdgwAa11dyfj/jbkzRxQ4aBzUGABgfjT20awzBnC5XBtzCvQnLQb3cXUSX2YE3AsyBGFirjElEYUgZ+g/xADmZjwCgLEyW6T8SxFYtmy3K8DeDe85exb3IpBM79p1ubEx9DZ9QRPop4R/ZpHPp08EIkbQg0ifCZOK+AMbYAUCzAZV0Oicyp8rKio0SkOho8eOHU1JORz/UrAOJkA03Z8brvz7fVluQQla6J96U76pHTnAUmSYwOFeffVVNBkAF3TW7aABZeCY30BDQGSJwfB1Crm8lf1cYkQGNB/kZupdBADyAD6O+UDyQQZA3kAS4H7Xwx9EFFT07zEbJA+n1dYP+4HAnPwYhIYaJ27BM/0RQYdytrO25k1508Mppyz9YUfVjq1JlcwWtDD4BxSJqQIEM610Tx4+DMWVYOD9ywBYxFe+CeIM/Au5yQ4AiP6EB3xGnzbjNfZXSRUFYfZ+YP70Sz+Nq1QcNQBANvVRw6wW4gWsQ3LmpNp1ynfkfC6JGAxp0BhA5HB587/n0WlSIjsMtQ3QH8mEMzHvm3J9XnZc12JAVCtMaWxDdoMVkYEB/VB+uL8GACYCUw9K5L3w674LiCUbOrQBlNsf++aTgmhLroeH+f29bQW9XV07Pr6/ZyvawmJaGt4VFgDwPQIAOXTWwD5aFLLxSwhIN32EZWWhlPRiiY8p+tOBGuoOTSmmM4WWlYLTlnXDaQDY1j2z8QMAa/puytab8o2bIrP2Rh0u9tLA4eDp6Dykn/YDYfR5AArEsRsEv9wybS4izDgDAHIQfq+V4XjEQbWt+sd4mT4Ckp9kj3gs3TG4Mf5MkQCQpMaJY2dJyaQxSc4V7Smn2L81hMa5PRXlzCCQWnQ3ZuYoM4uLo08B4yRivC8qXrNTG6k3X4ZJyGzUAAALJPbwQbwmNqOHksHmbloSmLW8kgDAJjHwfTJpNCLBzHBdkgvNWWk2cFHE0CEDZ8QgeKx587/n0WlS3DgMBWF+UucwOe8gV5JhEgbIzKLrLrMMjk/7A2k304HMWyVTpp69f+L6BgD28GeA/eAxg0xT4mFkjjAlBEeyZdBzvLd3fGCgDaIxOA7k85Bvg++akLCgK1MAqcJ0OZWp/RZgLLwjdOBAt0hIJF4BgHUsLEeAlfjmfXPdczD6FUvB31+5+zN988I3WdXMO2yg8u/zvPwJ4o/sA/oZD8WL7bdM1tkyLZP4WZmHv3g1XJWF7gzEGBgzIAxa4sI2hrHS5ZysCQTfDJ+G/GrF9iMGsxLxRwMAHBOAjqPB+ZinjPU0UiKGRGWkIAw1RwxgnCGtW/1KYl8XzP0diHwTVsbMk3JSbLtOAFga5RKtxbTDT+wBgEQGBYsCy0Pdy406V7wMtoL4EAgg65BmwvAJ6bgyAYA1R8R26BPezOzhlTAOnET7lPXG94O91hiAn0p8jOXHzM9SKV0ILQjhpbtv7QBA8hqqku4qYiTpqq5f35h2c2k0/X/2zjOuqXTb/98tVQIiIFEIwtBU0BksyH/G+Yin934O8++99zf/3st9dc+r++b23u89vdw+fYQpeKyoY4NANIAh5BAgkFD2/V122CcaxBDAwjzfWbMNO/t5kuDH9XvWWjvPYtMxyBXLHgX6Z6LA+YONnaYBRY/rfVjpWZR7NSCrnM1jEwA1Y1eeTq7t2vDL9Pdz+TKlpdTVablBeTnrR/5dsbFMsUUkokhTAkC6AJSWpi9tBsEJAnazYeityAiBf8kCsJdUPkEKQ+D/BH4I84RzJUUAth4Gw+K9GvAJniTG79UA79MjADXUNNHUSmuQ4JWzZykqkptWlC4BoLGRj32MjUITao0vy5jBZQ04DPlsNP5ledn7kGtkTzgjKd5/FsOjx2bzMSzA6SdTAIQ/RQM+yxOIZWOzEnL9r/LqaU6f5ez1kusTjfXJL+996Ut0dbl7ntiPY0OOF+GL8CVo3vA9ofI09bKVsAJR+B58d+m48Ij8wzeWrAS64FMYDAbDZkYAoprqk5wspLCKqtbJ1tD5UIzY4qkEtv0kyKoTBDSz0cylLPCfXTVEWOCR0YXsUWEwGIwAiDrqlJ1ppDFAIEx4hhkbmyeAO8uJoBBUPuKY+7kl+59sZQwGgxEA4cFzhCPOd7hXEQCbrYXBYDAYAXAppljGVsFgMBgM2/jgYDAYDAYjAAaDwWDIxSZDDAaDwWAiAIPBYDAYAbAet63CJPwqfCq7eTIZ8+mlF5jkoSzA78NXV3659b6P1cf/BfwrqMrw6lvw09Cx2kUrzlMN/xpezuqtr8o34SXIgb8J3yYD3oP/CM9k/OqF8HfhBxgMRgAMW26PgOqkZUb5sqViZf0q62cxy9+WwWAwAmDwyTJ3zWVQDhWQv5kyk6m+2EkzGAybKgAG60l8YYt1sxOqwQeVWQQBmeFdfomdbCyLj14ADAbzRTD1Zb148eKdO3cANahUJ271ZmIjGGd8lFEdo0RnmZ1n3sLKI6+IolJKnW2oCylkjXzjgUWAP035qLkNNLTRth6nfP48AwPMz+PCp6AEhy4E75DOAvQuT23VUbeHPcCtW9y+rYYLJBLk51Nejnpt1dbauCwu6iKGh3UR8bjT/cNp/7T6FqrfIYXqS1TfxAchnDbWxzi2gx0P+IDlt26VLy6Ww0hNjfrLprTATmGe+Xd59y53wfH+OjbDIZb4chYi+IekYzNv851FXHLgK7h0YTAYNl4A3nrrre7u7ps3bwLqP6nOZB//+Mdz5H3WQT/9t7g1xNAww2HCEoAZZlwB8OCRY5IA+PCpvWIzzbvYtS4BSNOAfPJPcUrT6iXICgliby+vv87cXIr3536P9I3VdoZlG9vUOehD4c+fPZt/+bIlOQmHkwLg9dLczLFjdHQgGBriwgWuXSMQIBJhdjbZ/2/PHhobefZZXcoD+MP7e0i9S/UrnE92wZQWnuQkaYRC+oDlr71WPj9fAXobUhm9pZWbDL/GazqC4/0/plcBMheAG9y4w50o0UUWt7O94hsVPnyS/7TWpLOL/GAbWORadAFGAAyGTRSAGzduaPkvDXjnnXcAtaLX8l9tYNWNnqzQOvEiF69w5QY3/PjvcCdEaIIJVwDcdqC72V1Djdbp+9l/kIOHOSxtWJ8AiCj8mdP1RQJTT33WAnD1KleucOYM16+73n9155uuAe812831wfpXuyd6e73nzqGpRketeFx9n/H5aGsjFiMvjyMlNzl9GglOXx9SiVDIEYBkA/KWFp2RbmiJ/vBfSEXFkgYUU/GdnPDkl/myNHieeckA9xIMSuTKL18uv3ixvLZWg3RmZQHQDAECL/NyZBdUf1mXpnYK+j1WQ33A3+O9S1waZDBCRAKg+M/7DW8NNbXUSp9kHjzAEEMhQhFGPFws4mvSCQwGw6YKgNb7agKutvRKBAGKA0ZGRtSwm6y4zvVees9x7hKXrnFtkEEgPz+/vLzc6/Hm5ubatp1IJKLR6K3xWwoRCilsokkPbnM7RKiDjvRQIOt3Is8iAdBRL8Ea6e+XAMgc778at1d9sjpUHeuOvfnmdE9PZcHZpiN4CyiYZXYkPvJ+//tvTkTz8uSxQzV573rfeiuvu/tA/rWaQ5SUOM3TFvz+SP+liDJHytORn09ZGQcOkMZCWmNfmdz0QvjSCCOOyeGuJABF0oB/8A/Kf/u3S4LBSZ2Jx5E4pSLx1nBpwBhjVD+nadHkmREn3k33m7x5hjP6G9EMkqJiip0OdHXU6W/HSZFZWH78ffT106+VwS52lVPOClxK/yErnk19ZDB8QAWgsLDQ4/HIQfv9fpAzqtCPOsnaUYqgm+53eEca0EcfsHfv3vr6ejUZ17TFxcV5eXkSAHW+lwCEQqFAIHDr1q2+SJ90YpRRLRUVJShZ4cXL+vha19e++cffvDp91REAHXPIIWNsW2v/pABA0ec+99kf/vAbZMV07/TwO9Pd3Z89dO5TinLkmLWwjRHTR9bjN8JvXL5MY+OVlvkLpb29JxquHTlCfT07dyIBCIXQG3j7bc6di6BIxOtFy+X9+7EsVkc+2nHTly45vlt2nwCEw/L+0gCKi8tFzRsVwf80qet0Rm8gFXcGhDOtjpnRR99ZzvbQc5rTcvTHOa6PP820ZnuFVyqo0N+O4gBH9RU7at0wyugn+aTO6w0/NNqZgR+SBccxAmAwAiBqa2sPHDigVb8cNKDMT2tr6zNyNGvkJjd76NFaTxrgx68m90eOHDl48KCKCpKBysrKkpISVwAUdoyOjkpyrl+/funSpQsXLmig3OICC7nkfoSPlFDCOoi1xn7Nf/wf9vYqEyXvL3uWZ9eU/HFsaIhfbG/9RryFbIm9F/uL3m+d/JkPPX/y+SMcabQaHQ8oscwnP0Kk1z8eCPQHJ6+3e/s6OzlxgoMHJcNIALTu372b+XkpgR4Po5BpcFCPpKusTmWlowGKGIYjw04EkLb8dyIAypcJBv06ky4ActaO6VLH+2fY1HOe+X76FQhe4EIrrZL2AxzQ8n+SSQV8fvwyXaDgoIwyIEJEz77Ii/pF6Xp9gExSbjPwg7V6f1kK/w+D4YMqAKWlpS+88IKyNHL9zppdjlvugLUQIfIjfqQbRd7mbT/+3bt3nzhxor29va2tTeoiOUkvKU9OTmr5f+XKlT179kgtVIU+s3hG63TnBqEP8SHWwUzrzMxAixJbrWM/CQLkXDIaO5P0/goCRsrLv9HSEh9chwD8vP2Rlzrk1DrprKEGG+GxPB10yCm/z/vnphtGRv79v7/m/+IXbS3/pQFu++S6OubmCATQO5HbR054dJSxMUcAMgkCZNHIZUcAxhhLTa/J9TsRQFtbuagor7gcTKqCJCc3FzeH43h/zUB1S3LazAgR0ij5eun6czynX4KsggqFegqAZH78AQJ6IzojtSiiSLO30NJOu4yVaVvpVFYYDEYAnCBAWRpVAgAt1ZWpZ40ocj/PeQX7/fRLUeT9Ozs7dTx27Fi663dQQHD48GHpTVlZmeRnYWGhp6fHWQx68frwNdOcvQC0SABaZwcGxt56yw0C5HPXtPzX7yPxYktcAnC9hexpL6J9Lx33JDRssFCmW95Qn/fllwfb2/0+Hw0N3EdNDQoCFBAgJiaIRqWcZIBbBuDyZdeDuwIQiSR9vdSuqqpyz56qam91QXxHMBh1ztfW3r/8lxN3RYUVOcx9TDE1yeQEE/vw6uM306yCPyCBr6MuSlQaIAEYOT+ix5q/kEIvXl0jtXjw7QBd3MtfQ5YtBoMRAP6cnD/MqfrlKsTfgy74PJmjFZwcZh99ivQBBRC6lUjeX0cehmoDJ0+enJ+fn5qaCofD165dk5YoKSwv0ESThUVWJFoTcwPMDbTaAwOe21fcIKCSSlZDJfHk2l9Hu6qqv6VlzmqZm2sle9rhODSRRhFFcnkFFMBveDxSREpL0ys0FBWxfTuS0YXZWRIJZJkg3XDy9Tt2jESTdeBDHEpZ/sv0vGNJ1+4IwPDw/QKgsXpzzoSaOTPPjHw6zHcxDwVQqM9LCjvYobycbOL8hHRikcUCCqSIueSyGl8jhQ5kmWIwGAF4jzSSp0ohDi8h0v9Zdax6y/8Nblzn+iKLyvYcOnRImZ/jx4+TGao9KFBQ/BFQLry//87cHU2lisIAA5IBsiMHu9W2B1oYGIjd/nMFAY4AnOJUhsv/iQk41mK3tJBose08sue/gM1KSN62sc0RuW3bkpaOZaHzOmLbSXPJrBQ8Gr3qFHKnmfbgcQsAsoMHlwRA4NPV7wbfd867aJQzluo6t/yboQDkuOdW3QqutKu0dF8pBoNh8wXgG6TxY/gLUukEMhSAGLEhhpxqHtDY2Lhv3z6VEyzLgsw9VbVKBSoINzQ0KAiQ69eEmjZ7ARBN0NoqAZBduZHMAskUXnA/NljAyEjKzT8qg8v7yy7sZ71YYPPIcTM2+jyOH5c10ihtc8q/09P3RAD605ouDganHA3QKTf/EyOW9P6yB9G8yglrybZhMBieNAEQEXj5wd5ffJ2VcZaH8hjzzCv7r3KCvkSWxU1EultUA1USkAAECGhCTZsgkU9+9i63pYGBv9IAWxow7wQBjgCsjFv7jceXxEPef58EALCeSg1wb9ksLh6ZGnEFwC3/6knHRDVuFui6KwDu8p+SkuTzVVVkw2oRgCvBBoNhswVgkAcQgSgFrJEw4RAhZ5cYr9er+3+0nGftaJRuB9IMBQUF8Xhcc44xpsmrqCJrapATl/fXDgz9ly5dJXlH0AEOkIbfnxSA99+HAwdsZ/lPipI9zRowcn3IWcsvshgMbnMiAGmcKwD607Gzw0kBSK0Au9kkssRZ/uvIBmtAx5J9HYPB8Bh2A51gQhYhAuzcuVO39Di3kGaBBmq4JnH2D9C0UaKsE2chr2NxsSoBMjn5OHHScGu/5OdrSNKeclzHPcusEwGoIOxEAFNTK0cAcxNFjgDcvTvuLP8jRFwhITsc7y8zGAxbSQBixKaZlgEej0cVXd3fSVYUL6FJAE2omWWsk4oKeX/H5Mvk/R0Z4F6uXUsu/wcGwPX+VVVbRABkRUXJL/QGhx3/nur9nU3rnBNLWSCWbPkLwB5PWgFgo1NADjYGg+FpEoAECceA/CWUwyErNNCZ4b5ps8RKCwIqK90gQBEGyyQSKbXfkpK05b/F08u2ba4GOAn90eDovTeA4uJcp3P3C4CrIpZFFpgisMGwVQXAxl5kUUc0+xJWtm4idbjmdKddL0VF9rIGyO9LABxLr/3K2zlqYevisjK2BO43wvTZwzPh8HB4eHgmGl1BAJzlvyw2XjgysjAyMjb247EQodQCwPojABMEGAxbRwCUOsghR0dgYYlFue6sSB2uOd1pNwAnAtCxttbNAjm7m0WjSQGQKUTY5Oy/9RjLABQWRu5GQqPahenH6d7f+Z27peDR0XHVAMKh8EJhXnoBIPsisMFg2EoCUECBY0B8Ce31RlbMLqEZUqfdqEyIqwFx4k4WSMfU2m8kkpL9LyraOg0pc3PdHM7E6MTdu9HR0eiD9nRwS8FjY5Oh0MREaMINIJAiw/qLwCYIMBi2jgB48BRT7Gzeqe0ctMVbNBolKzR2aglAc2pm2Yb52cbGpAbs23eNa04Q0B/qd5f/Tt8V55rUKbZMECCbvDs5Oqo9nydXjACEGwEEQy1jY1OTY5OkasX6U0AGw1bCCEAppTvZmdzONxIJh8NjY2Osnbm5OQ0cHx/XJEA55ZpTk7NB2KnV4Lw8JwjQl86WvL8Vi+Eu/22FC1sLdxXf/5XAr/961OdzBGCFmm4eeclS8LTvN8d+6lrXwIYKwDbABAGPC4Mhl42mkkov3t3s1rJaW/yrr4Cay8uba+t/1sLt27eDwaCGqwywne2aUzPvYtfGLoTdzSGGLly4Gb3ZP9B/69bta9eW4wNZUxNrpD6LJ+szncNlL6txglXJz0/m8Y9Xw88VFPycz2frp3TcUrCOVX9cxTM4AzWDiQDux2AwAlBFlfxFDTUePNOx6cHBQXWXVF/JtbYUVm8A9YcZGhoC9rLXcUPWRrsMVwBk/iG/f9Cv/+cXt+l81rXfLh5EkyyDMV/gYdRoRJbvIUX8amU+GLQspcGsmpqVV9o11Oxn/1f5KqIafKxj+X8A/heyLLB50jEYjADkkltHXT31jTRe5KJcv/Iq2tOtpqYm82+EqTH91atXtRmc/DHQQIPTKXDj918oK8MNAgLnA0u4yR/27s0iX/8SK9KMbEV+pDFr8P57ZVm8h3QBeKkaZDmwsHt36ge078sCfZyPH+UouY73l5VjMBiMAKyIXH8zzVo29tOvHM7Fixe1I5B2dFBPmEwSQcr8nDlz5vz58319fYAzlY4+fGwoNlggR+8IQPwf+odG/+Du9u/T+VlHALJbdx4jnRydzmDAoezmT6eah7FdebWkO4fAQ+/sqkb/kbRCVsZgMBgBqKCildYhhoIEu+k+e/astgXV13qVzT969OiuVfvHKmKQ91cvsN7eXpUBSilto+0QhzThJqUF5ApdDQjMz1NXl/T+Xi9bGjehA4FML3dGGAyGLUHuJm28qx5+o4yGCU8yeXHh4unTp+X9dUOn2ryoPYD2edY2n5Zlpd7yPzw8rGqBMj9a+7/33ntqDZ9Pfgcdxzh2mMM+fNibtgtnayuDg0Qit51b/g8dQg/Sh201XI+ewb6kVopeGAxbCBMBbLwGFFDQTvsUUwkSFtaF2QuvvfaabglVUVctYlQPUBygkoAyQrZty/tPTExIG1QxVvZfmR9d5ol6ni95/gQnpAGaig3E1YDUT67+5BUVTE+Tn09TEzt2APZW9v7CA39HZuquH3AMJgVkw5twio1jD3te5EVHDHaw4wIXVAxQhkedXqqqqrTVs3b6dAQgHo9Ho9FQKKScj1P1rf2vtUd6jrSfan+h8AVpAGlsfBwgj9/RsVnf1cqBv4FsdQ4t2f/lYXxpyX4Hg8GwUZgaQBz+KfwSG8de9n6YD5dQsotdPnzXuDYQG7i8hHZ50z7PrgDEYjHE59gTLhmdOlDfc7gtr+1E3tHOzo7c3Bw2Exsss/z9YGMwGAFIINtodrP7E3xC0UAddfvZP8hgkGCIUHQxOjM5M8+8s3uEpKKsu8z7htc3F/e98cb/7TmvL+fm5TXl5tLZufqq3AY+z4PJf/DTX4Dv8zC+kD6+BpnBYNhqGAHIhXk2lDzyVMhtoqmf/iGGRhgJE44SnWVWAmBh6QKP7Sm1SysTldUJv29u7n+88UZPT1NeHhIAHV944SHZmK4HvzZd2QQB9oPn9jmnDAbDVsEIwOKyAMyzOZRSeoQjsjHGxhmfZPInAmDnFVFUapVWnKgomXuHuTkSidhpq6dH3j9p7e1r/95Tvp7IJhFkP3juGudng8GwhTAC4Hj/OEvYNkksi41G9QDZyrn2fDhxQgLg2MS770oDnCBA1tbGgyjI9GwWFKT/YDAYthJGAOJLlgAWF5meJhZjdhaKCikspKCAR4bHo4yPqwFjZ8+6cYCU4ODBTa8G23zAMBgMJgK4eTMxNZUAxse5cYNgkEQCnvFSXs7OnZvodNMpK5MG6OUdG+nrkwa49YB9+9gwzJ0/BoPBCMDwcOLllxOBQAKYnOTmTS5cgPx8mpupq8Pn4xHj9bq5IHn9QDicmguqryczSuAfIdtAGuG/IDMYDFsEIwCz44noaOLPv5GYgOlpgkGorKSzjWPHlHbZLAGwH9a0RBpgWehBNNoPebK+pAbU1LAeDAaDwZDLKzBEYiiRCCTiTZU3pjsRh4upqmL/fo4epaODR4vFMs88Q1kZgQCxGLZ9DXIdGbhDZy579mAwGAyGrMnloxAhPhSPBw4n7lYjV2tZFBWhCKC+Xsv/x5xuLy1FtsxlRwAgF05BBevBYDAYTAqojETZc4m25xLRKDMzSAC2b6ekhCeS88sCoOMp/rKdO+BQIIgCOP5mupRGYQpQxSEFEZAAhPvcg44OKAClQGkXxoJb2BubAw539txp+v889OYL/GVqpCMVAAB3APltOh0J8wcKqeLtMwBhXgQAUD0A8v+UfMvrbwUAAAjAezk/VtzlL/EBAKooCnk8AAAtAIBoEAAAAAEAABAAAAABAAA8yVeyLNvtdpfLRSnV7/dns1mj0ZC4AQAByPPcObderw+HQ61WG4/H3vvVaiVxAwACsN/vt9utc26z2dTr9cVi0W63n0sCIGIgAN77JEmOx2NeOp1OYQ2HAiBu4BK42WwaY6y1tzV8CGs4FABxA98AhsPhZDK5Xq+9Xk9rPZ1OwzoajQRA3EAArLXL5dIYcz6flVKDwWA+n7daLQHwCMBjcOE8TVOtdbfbFQAAr4ECAPgnMACAAAAA7s0HoDFhsamH/bcAAAAASUVORK5CYII=",j8={thin:100,light:300,regular:400,normal:400,medium:500,bold:700,black:900};class W8{constructor(e){this._webGLHelper=e,this.fontRepository="https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/",this._fonts=new Kt([],JSON.stringify),this._metadataPromises=new Map,this._fontPromises=new Map,this._promises=[],this._defaultFontEntry={metrics:ou(Om),texture:e?this._createTextureNow(q8):void 0}}async waitUntilReady(){await Promise.all(this._promises)}getFont(e,t="normal",i="regular"){if(le(i)&&(i=j8[i.toLowerCase()],!i))throw new Error("Unknown font weight: "+i);const r={family:e,style:t,weight:i};let s=this._fonts.get(r);return s||(s={metrics:void 0,texture:void 0},this._fonts.set(r,s),this._promises.push(this._loadFontEntry(s,r))),s}async _loadFontEntry(e,t){try{const i=await this._loadMetadata(t.family),r=Z8(i,t),s=this.fontRepository+Zm(t.family)+"/"+r.replace(/\.\w+/,""),o=this._createTexture(s+".png"),a=this._loadFont(s+".json");e.texture=await o,e.metrics=await a}catch{console.warn(`Cannot load font: "${t.family}". Using the embedded default font.`),e.metrics=this._defaultFontEntry.metrics,e.texture=this._defaultFontEntry.texture}}_loadFont(e){let t=this._fontPromises.get(e);return t||(t=fetch(e).then(i=>{if(!i.ok)throw new Error("Could not load font: "+i.status);return i}).then(i=>i.json()).then(i=>ou(i)),this._fontPromises.set(e,t)),t}_loadMetadata(e){const t=Zm(e);let i=this._metadataPromises.get(t);if(!i){const r=this.fontRepository+t+"/METADATA.pb";i=fetch(r).then(s=>{if(!s.ok)throw new Error("Could not load font metadata. Response status: "+s.status+", url: "+r);return s}).then(s=>s.text()).then(s=>X8(s)).catch(s=>{console.warn(s.message)}),this._metadataPromises.set(t,i)}return i}getDefaultFont(){return this._defaultFontEntry}_createTexture(e){const t=this._webGLHelper.gl;return new Promise((i,r)=>{ms(t,{src:e,min:t.LINEAR},(s,o,a)=>{s?r(s):i(o)})})}_createTextureNow(e){const t=this._webGLHelper.gl;let i;const r=new Promise((s,o)=>{i=ms(t,{src:e,min:t.LINEAR},(a,l,c)=>{a?o(a):s(l)})});return this._promises.push(r),i}}function Zm(n){return n.toLowerCase().replaceAll(/[^\w]/g,"")}function X8(n){const e=n.split(`
`),t=[];let i;for(const r of e)if(r.startsWith("fonts {")&&(i={name:void 0,style:void 0,weight:void 0,filename:void 0,post_script_name:void 0,full_name:void 0,copyright:void 0}),r.startsWith("}")&&(t.push(i),i=void 0),i){let s=r.match(/^\s*([A-Za-z_]+):[ ]?"(.*)"$/);if(s){const o=s[1];i[o]=s[2]}if(s=r.match(/^\s*([A-Za-z_]+):[ ]?(\d+)$/),s){const o=s[1];i[o]=+s[2]}}return t}function Z8(n,e){let t,i=Number.POSITIVE_INFINITY;for(const r of n)if(e.family.localeCompare(r.name,void 0,{sensitivity:"accent"})==0&&e.style==r.style){const s=Math.abs(e.weight-r.weight);s<i&&(i=s,t=r)}return t?.filename}function $8(n,e){const t=[];let i;for(const r of n.split(`
`))if(r.startsWith(">"))i={identifier:r.match(/>(\S+)/)[1],sequence:""},t.push(i);else if(i)i.sequence+=r.trim();else throw new Error("Invalid fasta file!");return t}const $m=new Map,eR={Organism:"Homo sapiens"};async function tR(n,e,t={}){const i=n.symbol,r={...eR,GENE:i};for(const[o,a]of Object.entries(t))typeof a=="string"&&(r[o]=a);let s=$m.get(i)??await rR(r);return s?($m.set(i,s),oe`
            <div class="title">
                <strong>${s.name}</strong>
                ${s.description}
            </div>
            <p class="summary">${s.summary}</p>
            <p class="source">Source: NCBI RefSeq Gene</p>
        `):null}async function nR(n){const e={mode:"cors"},t=new URL("https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi");t.search=new URLSearchParams({db:"gene",term:sR(n),sort:"relevance",retmax:"1",retmode:"json"}).toString();const r=(await fetch(t.toString(),e).then(s=>s.json())).esearchresult.idlist[0];if(r){const s=new URL("https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi");return s.search=new URLSearchParams({db:"gene",id:r,retmode:"json"}).toString(),(await fetch(s.toString(),e).then(l=>l.json())).result[r]}else return null}const iR=Ko(nR,500);function rR(n){return iR(n)}function sR(n){return Object.entries(n).filter(([e,t])=>t&&t.length>0).map(([e,t])=>`("${t}"[${e}])`).join(" AND ")}const oR=He(".4~r"),aR=He(".4~e");function ew(n){return n==null?oe` <span class="na">NA</span> `:le(n)?n.substring(0,30):Number.isInteger(n)?""+n:Ye(n)?Math.abs(n)>Math.pow(10,8)||Math.abs(n)<Math.pow(10,-8)?aR(n):oR(n):Tr(n)?n?"True":"False":xe(n)?oe`${n.map((e,t)=>[ew(e),t<n.length-1?", ":de])}`:"?"+typeof n+" "+n}function tw(n){const e=[];return nw(Object.entries(n),e),e}function nw(n,e,t){for(const[i,r]of n)i.startsWith("_")||(r!==null&&typeof r=="object"&&!Array.isArray(r)?nw(Object.entries(r),e,(t||"")+i+"."):e.push({key:(t||"")+i,value:r}))}const cR={x:"x2",y:"y2"},lR=new Set(["auto","locus","interval","endpoints","disabled"]),iw=new WeakMap;function rw(n,e,t){const i=uR(e),r=ow("x",n,e,i,fw(t,"x")),s=ow("y",n,e,i,fw(t,"y")),o=r.rows.length>0&&s.rows.length>0,a=[...o?sw("x",r.rows):r.rows,...o?sw("y",s.rows):s.rows],l=new Set;for(const c of[r,s])for(const u of c.usedLinearizedFields){const f=i.get(u);if(!f||f.ambiguous)continue;pR(n,u,f,e)&&(l.add(f.chrom),l.add(f.pos))}return{hiddenRowKeys:[...l],genomicRows:a,flattenDatumRows:()=>tw(n),formatGenomicLocus:(c,u)=>$a(e,c,u),formatGenomicInterval:(c,u)=>uw(e,c,u)}}function uR(n){const e=iw.get(n);if(e)return e;const t=dR(n);return iw.set(n,t),t}function sw(n,e){const t=n.toUpperCase()+" ";return e.map(i=>({key:t+i.key,value:i.value}))}function ow(n,e,t,i,r){const s=new Set;if(r==="disabled")return{rows:[],usedLinearizedFields:s};const o=lw(t,n,e);if(!o)return{rows:[],usedLinearizedFields:s};o.field&&s.add(o.field);const a=lw(t,cR[n],e);a?.field&&s.add(a.field);const l=r==="auto"?fR(o,a,i):r;if(l==="endpoints"&&a){const[c,u]=AR(o,a,i);return{rows:[{key:"Endpoint 1",value:$a(t,n,c.value)??String(c.value)},{key:"Endpoint 2",value:$a(t,n,u.value)??String(u.value)}],usedLinearizedFields:s}}return l==="interval"&&a?{rows:[{key:"Interval",value:uw(t,n,[o.value,a.value])??o.value+" - "+a.value}],usedLinearizedFields:s}:{rows:[{key:"Coordinate",value:$a(t,n,o.value)??String(o.value)}],usedLinearizedFields:s}}function fR(n,e,t){if(!e)return"locus";const i=aw(n.field,t),r=aw(e.field,t);return i&&r&&i!==r?"endpoints":"interval"}function aw(n,e){const t=n?e.get(n):void 0;return t&&!t.ambiguous?t.groupId:void 0}function AR(n,e,t){const i=cw(n.field,t),r=cw(e.field,t);return i===2&&r!==2?[e,n]:r===1&&i!==1?[e,n]:i===2&&r===1?[e,n]:[n,e]}function cw(n,e){const t=n?e.get(n):void 0,i=[t?.pos,t?.chrom,n];let r;for(const s of i){const o=hR(s);if(o!==void 0){if(r===void 0)r=o;else if(r!==o)return}}return r}function hR(n){if(!n)return;const e=n.toLowerCase(),t=e.match(/(?:^|[^0-9])(1|2)$/);if(t)return t[1]==="1"?1:2;const i=e.match(/(?:^|[_-])(first|second)(?:[_-]|$)/);if(i)return i[1]==="first"?1:2}function lw(n,e,t){const i=n.encoders?.[e];if(i?.scale?.type!=="locus")return;const r=i.dataAccessor;if(!r)return;const s=+r(t);if(Number.isFinite(s))return{value:s,field:r.fields?.length===1?r.fields[0]:void 0}}function dR(n){const e=new Map;let t=0,r=n.unitView?.getCollector?.()?.parent;for(;r;){const s=r.params;if(s?.type==="linearizeGenomicCoordinate"){const o=Me(s.as),a=Me(s.pos),l=gR(s.offset,a.length),c="g"+t++,u=s.channel==="y"?"y":"x";for(let f=0;f<o.length;f++){if(f>=a.length)continue;const h=e.get(o[f]);h?h.ambiguous=!0:e.set(o[f],{groupId:c,chrom:s.chrom,pos:a[f],offset:l[f],channel:u,ambiguous:!1})}}r=r.parent}return e}function gR(n,e){const t=Me(n);return t.length===0?new Array(e).fill(0):t.length===1?new Array(e).fill(t[0]):t.length===e?t:new Array(e).fill(0)}function $a(n,e,t){return Sf(n,e)?.formatLocus(t)}function uw(n,e,t){return Sf(n,e)?.formatInterval(t)}function Sf(n,e){const t=n.encoders?.[e]?.scale;return t?.type==="locus"&&"genome"in t?t.genome():void 0}function fw(n,e){const t=n?.genomicCoordinates?.[e],i=typeof t=="string"?t:t?.mode??"auto";if(!lR.has(i))throw new Error('Unknown genomic coordinate display mode: "'+i+'"');return i}function pR(n,e,t,i){const r=Sf(i,t.channel);if(!r)return!1;const s=n[t.chrom],o=n[t.pos],a=n[e];if(s===void 0||o===void 0||a===void 0)return!1;const l=+o,c=+a;if(!Number.isFinite(l)||!Number.isFinite(c))return!1;let u;try{u=r.toContinuous(s,l-t.offset)}catch{return!1}return Math.abs(u-c)<1e-6}async function mR(n,e,t,i){const r=(g,p)=>{for(const[m,y]of Object.entries(e.encoders))if(y?.dataAccessor?.fields.includes(g))switch(m){case"color":case"fill":case"stroke":return oe`
                            <span
                                class="color-legend"
                                style=${`background-color: ${y(p)}`}
                            ></span>
                        `}return""},s=i??rw(n,e,t),o=s.flattenDatumRows?s.flattenDatumRows():tw(n),a=s.genomicRows??[],l=new Set(s.hiddenRowKeys??[]),c=o.filter(g=>!l.has(g.key)),u=[...a,...c];if(!u.length)return;const f=u.map(g=>{const p=ew(g.value),m=r(g.key,n);return oe`
            <tr>
                <th>${g.key}</th>
                <td>${p} ${m}</td>
            </tr>
        `}),h=oe`
        <table class="attributes">
            ${f}
        </table>
    `,A=e.unitView.getTitleText(),d=A?oe`
              <div class="title">
                  <strong>${A}</strong>
              </div>
          `:"";return oe`${d}${h}`}class Ws extends km{#e=new Map;constructor(e,t,i,r,s,o){super(e,t,i,r,s,o),this.spec=e}async initializeChildren(){}getNextAutoName(e){const t=this.#e.get(e)??0;return this.#e.set(e,t+1),e+t}*[Symbol.iterator](){}visit(e){let t;try{t=e(this)}catch(i){throw i.view=this,i}if(t===or)return t;if(t!==Tn){e.beforeChildren&&e.beforeChildren(this);for(const i of this){const r=i.visit(e);if(r===or)return r}e.afterChildren&&e.afterChildren(this),e.postOrder&&e.postOrder(this)}}findDescendantByPath(e){let t=this;for(let i=0;i<e.length;i++){if(!(t instanceof Ws))return;const r=t.#t(e[i]);if(!r)return;if(i===e.length-1)return r;t=r}}#t(e){for(const t of this)if(t.name===e)return t}findDescendantByName(e){let t;return this.visit(i=>{if(i.name==e)return t=i,or}),t}getDefaultResolution(e,t){return"shared"}}function wR(n){f4(n),A4(n)}function Aw(n){n.getDescendants().forEach(e=>e.configureViewOpacity())}class hw{constructor(e,t){this.container=e,this.options=t}async addChildSpec(e,t){const{specs:i,insertAt:r}=this.options.getChildSpecs(),s=t??i.length,o=this.options.defaultName?.(s,e)??this.container.getNextAutoName("child"),a=await this.container.context.createOrImportView(e,this.container,this.container,o);r(s,e);const l=this.options.insertView(a,s);this.options.prepareView&&await this.options.prepareView(a,s,l),Aw(a);const c=h=>h.isConfiguredVisible(),{dataSources:u,graphicsPromises:f}=If(a,this.container.context.dataFlow,c);return await Bf(a,u),await mf(f),this.options.requestLayout!==!1&&(this.container.invalidateSizeCache(),this.container.context.requestLayoutReflow()),a}async removeChildAt(e){const{removeAt:t}=this.options.getChildSpecs();this.options.removeView(e),t(e),this.options.afterRemove&&await this.options.afterRemove(e),this.options.requestLayout!==!1&&(this.container.invalidateSizeCache(),this.container.context.requestLayoutReflow())}}const dw=.5;function Qf(n){return"multiscale"in n&&xe(n.multiscale)}function yR(n){if(!n.multiscale.length)throw new Error('"multiscale" must contain at least one child view.');const e=CR(n.stops,n.multiscale.length),t=n.multiscale.map((r,s)=>n.multiscale.length===1?r:{opacity:xR(s,n.multiscale.length,e),layer:[r]}),i={...n};return delete i.multiscale,delete i.stops,{...i,layer:t}}function CR(n,e){let t="unitsPerPixel",i,r="auto",s=dw;if(xe(n))i=gw(n,e,"stops");else if(ze(n))t=n.metric??"unitsPerPixel",i=gw(n.values,e,"stops.values"),r=n.channel??"auto",s=n.fade??dw;else throw new Error('"stops" must be an array or an object with "values".');if(t!=="unitsPerPixel")throw new Error('Only "unitsPerPixel" is supported for "stops.metric" in multiscale.');if(!["x","y","auto"].includes(r))throw new Error('"stops.channel" must be one of "x", "y", or "auto".');if(!Number.isFinite(s)||s<0||s>.5)throw new Error('"stops.fade" must be a finite number in range [0, 0.5].');if(i.forEach((o,a)=>{if(!be(o)&&(!Number.isFinite(o)||o<=0))throw new Error("Invalid stop value at index "+a+". Stop values must be positive finite numbers.")}),!i.some(be)){const o=i;for(let a=1;a<o.length;a++)if(o[a-1]<=o[a])throw new Error('"stops.values" must be strictly decreasing for "unitsPerPixel".');for(let a=0;a<o.length-1;a++){const l=o[a]*(1-s),c=o[a+1]*(1+s);if(l<=c)throw new Error("Adjacent transitions overlap. Reduce fade or increase stop spacing.")}}return{metric:t,values:i,channel:r,fade:s}}function gw(n,e,t){if(!xe(n))throw new Error('"'+t+'" must be an array of numbers or ExprRefs.');const i=e-1;if(n.length!==i)throw new Error("Invalid stop count for multiscale. Expected "+i+", got "+n.length+".");for(const r of n)if(!be(r)&&!Number.isFinite(r))throw new Error('"'+t+'" must contain only numbers or ExprRefs.');return n}function xR(n,e,t){let i,r;const s=t.values.map(o=>({hi:pw(o,1+t.fade),lo:pw(o,1-t.fade)}));if(n===0)i=[s[0].hi,s[0].lo];else if(n===e-1){const o=s.at(-1);i=[o.hi,o.lo]}else{const o=s[n-1],a=s[n];i=[o.hi,o.lo,a.hi,a.lo]}return n===0?r=[1,0]:n===e-1?r=[0,1]:r=[0,1,1,0],{channel:t.channel,unitsPerPixel:i,values:r}}function pw(n,e){return be(n)?{expr:"("+n.expr+") * "+e}:n*e}function Df(n){return"mark"in n&&(le(n.mark)||ze(n.mark))}function kf(n){return"layer"in n&&ze(n.layer)}function mw(n){return"import"in n}function Xs(n){return"vconcat"in n&&xe(n.vconcat)}function ww(n){return"hconcat"in n&&xe(n.hconcat)}function ec(n){return"concat"in n&&xe(n.concat)}class mi extends Ws{#e=[];constructor(e,t,i,r,s,o){super(e,t,i,r,s,{layersChildren:!0,...o}),this.spec=e,this.needsAxes={x:!0,y:!0}}async initializeChildren(){this.#e=await Promise.all(this.spec.layer.map(e=>this.context.createOrImportView(e,this,this,this.getNextAutoName("layer"),t=>{if(!kf(t)&&!Df(t)&&!Qf(t))throw new _e("LayerView accepts only unit, layer, or multiscale specs as children!",this)})))}async addChildSpec(e,t){return this.#t().addChildSpec(e,t)}async removeChildAt(e){await this.#t().removeChildAt(e)}#t(){return new hw(this,{getChildSpecs:()=>({specs:this.spec.layer,insertAt:(e,t)=>{this.spec.layer.splice(e,0,t)},removeAt:e=>{this.spec.layer.splice(e,1)}}),insertView:(e,t)=>(e.layoutParent??=this,this.#e.splice(t,0,e),e),removeView:e=>{const t=this.#e[e];if(!t)throw new Error("Child index out of range!");t.disposeSubtree(),this.#e.splice(e,1)},defaultName:()=>this.getNextAutoName("layer")})}get children(){return this.#e.slice()}*[Symbol.iterator](){for(const e of this.#e)yield e}render(e,t,i={}){if(super.render(e,t,i),!!this.isConfiguredVisible()){e.pushView(this,t);for(const r of this.#e)r.render(e,t,i);e.popView(this)}}propagateInteractionEvent(e){this.handleInteractionEvent(void 0,e,!0);for(let t=this.#e.length-1;t>=0;t--)if(this.#e[t].propagateInteractionEvent(e),e.stopped)return;this.handleInteractionEvent(void 0,e,!1)}}class yw{constructor(e,t){this.n=e,this.maxCols=t??1/0}get nRows(){return this.maxCols==1/0?1:Math.ceil(this.n/this.maxCols)}get nCols(){return Math.min(this.n,this.maxCols)}get rowIndices(){const e=[],t=this.nCols,i=this.nRows;for(let r=0;r<i;r++){const s=[];e.push(s);for(let o=0;o<t;o++){const a=r*t+o;a<this.n&&s.push(a)}}return e}get colIndices(){const e=[],t=this.nCols,i=this.nRows;for(let r=0;r<t;r++){const s=[];e.push(s);for(let o=0;o<i;o++){const a=o*t+r;a<this.n&&s.push(a)}}return e}getCellIndex(e,t){let i=0;if(this.maxCols==1/0)i=t==0?e:void 0;else{if(e>=this.maxCols)return;i=t*this.nCols+e}return i<this.n?i:void 0}getCellCoords(e){if(!(e<0||e>=this.n))return[e%this.nCols,Math.floor(e/this.nCols)]}}function sn(n){return()=>n}class ve{static create(e,t,i,r){return new ve(sn(e),sn(t),sn(i),sn(r))}static ZERO=ve.create(0,0,0,0);_offset(e,t){const i=this["_"+e];if(t===0)return i;switch(typeof t){case"number":return()=>i()+t;case"function":return()=>i()+t();default:throw new Error("Not a number of function")}}_passThrough(e){return this._offset(e,0)}constructor(e,t,i,r){this._x=e,this._y=t,this._width=i,this._height=r}get x(){return this._x()}get y(){return this._y()}get width(){return this._width()}get height(){return this._height()}get x2(){return this._x()+this._width()}get y2(){return this._y()+this._height()}equals(e){return e?this===e||this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height:!1}modify(e){if(!Object.keys(e).length)return this;const t=i=>{const r=e[i];return typeof r=="number"?sn(r):typeof r=="function"?r:this._passThrough(i)};return new ve(t("x"),t("y"),t("width"),t("height"))}translate(e,t){return e===0&&t===0?this:new ve(this._offset("x",e),this._offset("y",t),this._passThrough("width"),this._passThrough("height"))}translateBy(e){return this.translate(e.x,e.y)}expand(e,t=1){return e.left==0&&e.top==0&&e.right==0&&e.bottom==0?this:new ve(e.left?this._offset("x",-e.left*t):this._passThrough("x"),e.top?this._offset("y",-e.top*t):this._passThrough("y"),e.width?this._offset("width",e.width*t):this._passThrough("width"),e.height?this._offset("height",e.height*t):this._passThrough("height"))}shrink(e){return this.expand(e,-1)}intersect(e){return this===e||e==null?this:new ve(()=>Math.max(this.x,e.x),()=>Math.max(this.y,e.y),()=>Math.min(this.x2,e.x2)-Math.max(this.x,e.x),()=>Math.min(this.y2,e.y2)-Math.max(this.y,e.y))}union(e){return this===e||e==null?this:new ve(()=>Math.min(this.x,e.x),()=>Math.min(this.y,e.y),()=>Math.max(this.x2,e.x2)-Math.min(this.x,e.x),()=>Math.max(this.y2,e.y2)-Math.min(this.y,e.y))}isDefined(){return this.width>=0&&this.height>=0}flatten(){return new ve(sn(this.x),sn(this.y),sn(this.width),sn(this.height))}containsPoint(e,t){return e>=this.x&&e<this.x2&&t>=this.y&&t<this.y2}normalizePoint(e,t,i=!1){const r={x:(e-this.x)/this.width,y:(t-this.y)/this.height};return i&&(r.y=1-r.y),r}denormalizePoint(e,t,i=!1){return i&&(t=1-t),{x:this.x+e*this.width,y:this.y+t*this.height}}toString(){return`Rectangle: x: ${this.x}, y: ${this.y}, width: ${this.width}, height: ${this.height}`}toRoundedString(){return`Rectangle: x: ${Math.round(this.x)}, y: ${Math.round(this.y)}, width: ${Math.round(this.width)}, height: ${Math.round(this.height)}`}}const ar=new WeakMap,Ff=new WeakMap;function bR(n,e){if(e!==null&&typeof e!="string")throw new Error("Import scope name must be a string or null.");ar.set(n,{name:e})}function on(n,e={}){const i=e.skipSubtree??!1?"excludeSubtree":"exclude";Ff.set(n,i)}function Rf(n){const e=n.getDataAncestors(),t=[];for(let i=e.length-1;i>=0;i-=1){const r=ar.get(e[i]);r&&typeof r.name=="string"&&t.push(r.name)}return t}function ER(n){const e=[];for(const t of IR(n)){const i=BR(t);vR(n,i,e),SR(n,i,e)}return e}function Cw(n){return n.persist===!1?!1:Sl(n)?!0:kd(n)?!!n.bind:!1}function IR(n){const e=new Set([n]);return n.visit(t=>{const i=ar.get(t);i&&typeof i.name=="string"&&e.add(t)}),Array.from(e)}function BR(n){return Rf(n)}function xw(n){return n.length?"import scope ["+n.join(" / ")+"]":"import scope (root)"}function vR(n,e,t){const i=new Map;bw(n,e,r=>{for(const[s,o]of r.paramRuntime.paramConfigs){if(!Cw(o))continue;const a=i.get(s);a?a.push(r):i.set(s,[r])}});for(const[r,s]of i){if(s.length<=1)continue;const o=s.map(a=>a.getPathString()).join(", ");t.push({message:'Bookmarkable parameter "'+r+'" is not unique within '+xw(e)+". Found in: "+o+".",scope:e})}}function SR(n,e,t){const i=QR(n,e);if(!i.length)return;const r=i.filter(o=>DR(o));if(r.length<=1)return;const s=new Map;for(const o of r){const a=ar.get(o),l=a?a.name:void 0;typeof l!="string"||!l.length||s.set(l,(s.get(l)??0)+1)}for(const[o,a]of s)a>1&&t.push({message:'Import instance name "'+o+'" is used multiple times for addressable instances in '+xw(e)+".",scope:e})}function QR(n,e){const t=[];return bw(n,e,i=>{if(Rf(i).length!==e.length+1)return;const s=ar.get(i);!s||typeof s.name!="string"||t.push(i)},{includeNamedImportRoots:!0}),t}function DR(n){let e=!1;return n.visit(t=>{const i=Ff.get(t);if(i==="excludeSubtree")return Tn;if(i!=="exclude"){for(const r of t.paramRuntime.paramConfigs.values())if(Cw(r))return e=!0,or}}),e}function bw(n,e,t,i={}){const r=i.includeNamedImportRoots??!1;n.visit(s=>{const o=ar.get(s),a=Ff.get(s);if(a==="excludeSubtree")return Tn;if(a!=="exclude"&&kR(s,e,o,r))return t(s)})}function kR(n,e,t,i){const r=Rf(n);return FR(r,e)?!0:!i||!t||typeof t.name!="string"||r.length!==e.length+1?!1:Ew(e,r)}function FR(n,e){return n.length!==e.length?!1:Ew(n,e)}function Ew(n,e){if(n.length>e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}const RR="chromosome_ticks_and_labels",MR={x:"width",y:"height"};function Mf(n){return n=="x"?"y":"x"}const tc={x:["bottom","top"],y:["left","right"]},Nf=Object.fromEntries(Object.entries(tc).map(([n,e])=>e.map(t=>[t,n])).flat(1));function Pn(n){return Nf[n]}class Iw extends mi{constructor(e,t,i,r,s,o){const a=t=="locus",l={...a?TR:Bw,...NR(t,e),...e};super(a?PR(l,t):vw(l,t),i,r,s,`axis_${e.orient}`,{blockEncodingInheritance:!0,...o}),this.axisProps=l,on(this,{skipSubtree:!0})}getSize(){const e={px:this.getPerpendicularSize()},t={grow:1};return Nf[this.axisProps.orient]=="x"?new Mn(t,e):new Mn(e,t)}getPerpendicularSize(){return Tf(this.axisProps)}isPickingSupported(){return!1}}function Tf(n){const e=Pn(n.orient);let t=n.ticks&&n.tickSize||0;return n.labels&&(t+=n.labelPadding,e=="x"?t+=n.labelFontSize:t+=30),n.title&&(t+=n.titlePadding+n.titleFontSize),t=Math.min(n.maxExtent||1/0,Math.max(n.minExtent||0,t)),t}const Bw={values:null,minExtent:20,maxExtent:1/0,offset:0,domain:!0,domainWidth:1,domainColor:"gray",domainDash:null,domainDashOffset:0,domainCap:"square",ticks:!0,tickSize:5,tickWidth:1,tickColor:"gray",tickDash:null,tickDashOffset:0,tickCap:"square",tickCount:null,tickMinStep:null,labels:!0,labelAlign:"center",labelBaseline:"middle",labelPadding:4,labelFontSize:10,labelLimit:180,labelColor:"black",format:null,titleColor:"black",titleFont:"sans-serif",titleFontSize:10,titlePadding:3};function NR(n,e){const t=e.orient,i=n=="nominal"||n=="ordinal";let r="center",s="middle",o=e.labelAngle??((t=="top"||t=="bottom")&&i?-90:0);switch(t){case"left":r="right";break;case"right":r="left";break;case"top":case"bottom":Math.abs(o)>30?(r=o>0==(t=="bottom")?"left":"right",s="middle"):s=t=="top"?"alphabetic":"top";break}return{labelAlign:r,labelAngle:o,labelBaseline:s}}function vw(n,e){const t={...n,extent:Tf(n)},i=Pn(t.orient),r=Mf(i),s=t.orient=="bottom"||t.orient=="right"?1:-1,o=t.orient=="bottom"||t.orient=="left"?1:0,a=()=>({field:"value",type:e}),l=()=>({name:"domain",data:{values:[{}]},mark:{type:"rule",clip:!1,strokeDash:t.domainDash,strokeCap:t.domainCap,color:t.domainColor,[r]:o,size:t.domainWidth}}),c=()=>({name:"labels",mark:{type:"text",clip:!1,align:t.labelAlign,angle:t.labelAngle,baseline:t.labelBaseline,[r+"Offset"]:(t.tickSize+t.labelPadding)*s,[r]:o,size:t.labelFontSize,color:t.labelColor,minBufferSize:1500},encoding:{[i]:a(),text:{field:"label"}}}),u=()=>({name:"ticks",mark:{type:"rule",clip:!1,strokeDash:t.tickDash,strokeCap:t.tickCap,color:t.tickColor,size:t.tickWidth,minBufferSize:300},encoding:{[r]:{value:o},[r+"2"]:{value:o-t.tickSize/t.extent*(o?1:-1)}}}),f=()=>({name:"title",data:{values:[{}]},mark:{type:"text",clip:!1,align:"center",baseline:t.orient=="bottom"?"bottom":"top",angle:[0,90,0,-90][["top","right","bottom","left"].indexOf(t.orient)],text:t.title,color:t.titleColor,[i]:.5,[r]:1-o}}),h=()=>{const d={name:"ticks_and_labels",encoding:{[i]:a()},layer:[]};return t.ticks&&d.layer.push(u()),t.labels&&d.layer.push(c()),d},A={resolve:{scale:{[i]:"forced"}},domainInert:!0,[MR[Mf(i)]]:t.extent,data:{lazy:{type:"axisTicks",channel:i,axis:n}},layer:[]};return t.domain&&A.layer.push(l()),(t.ticks||t.labels)&&A.layer.push(h()),t.title&&A.layer.push(f()),A}const TR={...Bw,chromTicks:!0,chromTickSize:18,chromTickWidth:1,chromTickColor:"#989898",chromTickDash:[4,2],chromTickDashOffset:1,chromLabels:!0,chromLabelFontSize:13,chromLabelFontWeight:"normal",chromLabelFontStyle:"normal",chromLabelColor:"black",chromLabelAlign:"left",chromLabelPadding:7};function PR(n,e){const t={...n,extent:Tf(n)},i=Pn(t.orient),r=Mf(i),s=t.orient=="bottom"||t.orient=="left"?1:0,o=()=>({name:"chromosome_ticks",mark:{type:"rule",strokeDash:n.chromTickDash,strokeDashOffset:n.chromTickDashOffset,[r]:s,[r+"2"]:s-t.chromTickSize/t.extent*(s?1:-1),color:n.chromTickColor,size:t.chromTickWidth}}),a=()=>{let u;switch(t.orient){case"top":u={y:0,angle:0,paddingX:4,dy:-t.chromLabelPadding,viewportEdgeFadeWidthLeft:20,viewportEdgeFadeWidthRight:20,viewportEdgeFadeDistanceRight:-10,viewportEdgeFadeDistanceLeft:-20};break;case"bottom":u={y:1,angle:0,paddingX:4,dy:t.chromLabelPadding+t.chromLabelFontSize*.73,viewportEdgeFadeWidthLeft:20,viewportEdgeFadeWidthRight:20,viewportEdgeFadeDistanceRight:-10,viewportEdgeFadeDistanceLeft:-20};break;case"left":u={x:1,angle:-90,paddingY:4,dy:-t.chromLabelPadding,viewportEdgeFadeWidthBottom:20,viewportEdgeFadeWidthTop:20,viewportEdgeFadeDistanceBottom:-20,viewportEdgeFadeDistanceTop:-10};break;case"right":u={x:0,angle:90,align:"right",paddingY:4,dy:-t.chromLabelPadding};break;default:u={}}return{name:"chromosome_labels",mark:{type:"text",size:t.chromLabelFontSize,font:t.chromLabelFont,fontWeight:t.chromLabelFontWeight,fontStyle:t.chromLabelFontStyle,color:t.chromLabelColor,align:n.chromLabelAlign,baseline:"alphabetic",clip:!1,...u},encoding:{[i+"2"]:{field:"continuousEnd",type:e},text:{field:"name"}}}};let l;switch(t.orient){case"bottom":case"top":l={};break;case"left":l={labelAngle:-90,labelAlign:"center",labelPadding:6};break;case"right":l={labelAngle:90,labelAlign:"center",labelPadding:6};break;default:l={}}const c=vw({...n,...l},e);if(n.chromTicks||n.chromLabels){const u={name:RR,data:{lazy:{type:"axisGenome",channel:Pn(t.orient)}},encoding:{[i]:{field:"continuousStart",type:e,band:0}},layer:[]};if(n.chromTicks&&u.layer.push(o()),n.chromLabels){u.layer.push(a());let f;c.layer.filter(h=>h.name=="ticks_and_labels").forEach(h=>h.layer.filter(A=>A.name=="labels").forEach(A=>{f=A.mark})),f&&(t.orient=="top"||t.orient=="bottom"?(f.viewportEdgeFadeWidthLeft=30,f.viewportEdgeFadeDistanceLeft=40):(f.viewportEdgeFadeWidthBottom=30,f.viewportEdgeFadeDistanceBottom=40))}c.layer.push(u)}return c}class LR{#e;#t=0;#n=0;constructor(e){this.#e=new Array(e)}push(e){this.#e[this.#t]=e,this.#t=(this.#t+1)%this.size,this.#n=Math.min(this.#n+1,this.size)}get(){const e=this.#e;return this.#n<this.size?e.slice(0,this.#n):e.slice(this.#t,this.size).concat(e.slice(0,this.#t))}get size(){return this.#e.length}get length(){return this.#n}}class ct{static fromMouseEvent(e){return new ct(e.clientX,e.clientY)}constructor(e,t){this.x=e,this.y=t}subtract(e){return new ct(this.x-e.x,this.y-e.y)}add(e){return new ct(this.x-e.x,this.y-e.y)}multiply(e){return new ct(this.x*e,this.y*e)}get length(){return Math.sqrt(this.x**2+this.y**2)}equals(e){return e?e===this||e.x===this.x&&e.y===this.y:!1}}let Zs,Sw=0;function Qw(){Sw=performance.now()}function Dw(){return performance.now()-Sw<50}function OR(n){return function(...e){Qw(),n(...e)}}function UR(n,e,t,i,r){if(t=OR(t),n.type=="wheel"){n.uiEvent.preventDefault();const s=n.uiEvent,o=s.deltaMode?120:1;if(!s.deltaX&&!s.deltaY)return;Zs?.stop();let{x:a,y:l}=n.point;if(i){const c=i.mark.encoders;c.x&&!c.x2&&!c.x.constant&&(a=+c.x(i.datum)*e.width+e.x),c.y&&!c.y2&&!c.y.constant&&(l=(1-+c.y(i.datum))*e.height+e.y)}Math.abs(s.deltaX)<Math.abs(s.deltaY)?t({x:a,y:l,xDelta:0,yDelta:0,zDelta:s.deltaY*o/300}):t({x:a,y:l,xDelta:-s.deltaX*o,yDelta:0,zDelta:0})}else if(n.type=="mousedown"&&n.mouseEvent.button===0){Zs&&Zs.stop();const s=new LR(30),o=n.mouseEvent;o.preventDefault();let a=ct.fromMouseEvent(o);const l=f=>{const h=ct.fromMouseEvent(f);s.push({point:h,timestamp:performance.now()});const A=h.subtract(a);t({x:a.x,y:a.y,xDelta:A.x,yDelta:A.y,zDelta:0}),a=h},c=()=>{const h=performance.now(),A=s.get().filter(C=>h-C.timestamp<160);if(A.length<5||!r||GR(A))return;const d=A.at(-1),g=A[0],p=d.point.subtract(g.point).multiply(1/(d.timestamp-g.timestamp));let m=a.x,y=a.y;Zs=vf(r,C=>{t({x:C.x,y:C.y,xDelta:m-C.x,yDelta:y-C.y,zDelta:0}),m=C.x,y=C.y},150,.5,{x:m,y}),Zs({x:a.x-p.x*250,y:a.y-p.y*250})},u=()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",u),c()};document.addEventListener("mouseup",u,!1),document.addEventListener("mousemove",l,!1)}}function GR(n){const e=n[Math.floor(n.length/2)],t=e.point.subtract(n[0].point).multiply(e.timestamp-n[0].timestamp),i=n.at(-1).point.subtract(e.point).multiply(n.at(-1).timestamp-e.timestamp),r=t.length;return i.length/r<.4}class zR extends mi{constructor(e,t,i,r,s,o){const l={...t=="locus"?HR:kw,...e};super(JR(l,t),i,r,s,`axisGrid_${e.orient}`,{blockEncodingInheritance:!0,...o}),this.axisProps=l,on(this,{skipSubtree:!0})}getOrient(){return this.axisProps.orient}isPickingSupported(){return!1}}const kw={values:null,grid:!1,gridCap:"butt",gridColor:"lightgray",gridDash:null,gridOpacity:1,gridWidth:1,tickCount:null,tickMinStep:null},HR={...kw,chromGrid:!1,chromGridCap:"butt",chromGridColor:"gray",chromGridDash:[1,5],chromGridOpacity:1,chromGridWidth:1};function _R(n,e){const t=n,i=Pn(t.orient);return{name:"grid_lines",data:{lazy:{type:"axisTicks",channel:i,axis:n}},mark:{type:"rule",strokeDash:t.gridDash,strokeCap:t.gridCap,color:t.gridColor,size:t.gridWidth,opacity:t.gridOpacity,minBufferSize:300},encoding:{[i]:{field:"value",type:e}}}}function VR(n,e){const t=n,i=Pn(t.orient);return{name:"chromosome_lines",data:{lazy:{type:"axisGenome",channel:i}},mark:{type:"rule",strokeDash:t.chromGridDash,strokeCap:t.chromGridCap,color:t.chromGridColor,size:t.chromGridWidth,opacity:t.chromGridOpacity},encoding:{[i]:{field:"continuousStart",type:e,band:0}}}}function YR(n,e){const t=n,i=Pn(t.orient);return{name:"chromosome_fill",data:{lazy:{type:"axisGenome",channel:i}},mark:{type:"rect"},encoding:{[i]:{field:"continuousStart",type:e,band:0},[i+"2"]:{field:"continuousEnd",band:0},fill:{field:"odd",type:"nominal",scale:{domain:[!1,!0],range:[t.chromGridFillEven??"white",t.chromGridFillOdd??"white"]}},opacity:{field:"odd",type:"nominal",scale:{type:"ordinal",domain:[!1,!0],range:[t.chromGridFillEven?1:0,t.chromGridFillOdd?1:0]}}}}}function JR(n,e){const t={...n},i=[];return t.chromGrid&&(t.chromGridFillOdd||t.chromGridFillEven)&&i.push(YR(t,e)),t.chromGrid&&t.chromGridOpacity>0&&i.push(VR(t,e)),t.grid&&t.gridOpacity>0&&i.push(_R(t,e)),{name:"grid_layers",resolve:{scale:{[Pn(n.orient)]:"forced",fill:"independent",opacity:"independent"}},domainInert:!0,layer:i}}const Fw={anchor:"middle",frame:"group",offset:10,orient:"top",align:void 0,angle:0,baseline:"alphabetic",dx:0,dy:0,color:void 0,font:void 0,fontSize:12,fontStyle:"normal",fontWeight:"normal"},KR={orient:"left",anchor:"middle",align:"right",baseline:"middle",angle:0,fontSize:12},qR={orient:"top",anchor:"start",align:"left",baseline:"top",offset:-10,dx:10,fontSize:12},jR={start:0,middle:.5,end:1},WR={start:"left",middle:"center",end:"right"};function XR(n){if(!n)return;const e=le(n)?{text:n}:n;if(!e.text||e.orient=="none")return;const t={"track-title":KR,overlay:qR}[e.style]??{},i={...Fw,...t,...e};let r={},s={x:0,y:0};const o=jR[i.anchor??"middle"];switch(i.orient){case"top":s={x:o,y:1},r={baseline:"alphabetic",angle:0};break;case"right":s={x:1,y:1-o},r={baseline:"alphabetic",angle:90};break;case"bottom":s={x:o,y:0},r={baseline:"top",angle:0};break;case"left":s={x:0,y:o},r={baseline:"alphabetic",angle:-90};break}const a={...Fw,...r,...t,...e},l={xOffset:0,yOffset:0};switch(i.orient){case"top":l.yOffset=-a.offset;break;case"right":l.xOffset=a.offset;break;case"bottom":l.yOffset=a.offset;break;case"left":l.xOffset=-a.offset;break}return{data:{values:[{}]},mark:{type:"text",tooltip:null,clip:!1,...s,...l,text:a.text,align:a.align??WR[a.anchor],angle:a.angle,baseline:a.baseline,dx:a.dx,dy:a.dy,color:a.color,font:a.font,size:a.fontSize,fontStyle:a.fontStyle,fontWeight:a.fontWeight}}}class Rw extends tt{#e;#t=ve.ZERO;#n=ve.ZERO;#i=ve.ZERO;viewportOffset=0;#s;constructor(e,t,i={}){const r={scrollbarSize:8,scrollbarPadding:2,scrollbarMinLength:20};super({params:[{name:"scrollbarOpacity",value:1}],opacity:{expr:"scrollbarOpacity"},data:{values:[{}]},mark:{type:"rect",fill:"#b0b0b0",fillOpacity:.6,stroke:"white",strokeWidth:1,strokeOpacity:1,cornerRadius:5,clip:!1}},e.layoutParent.context,e.layoutParent,e.view,"scrollbar-"+t,{blockEncodingInheritance:!0}),on(this,{skipSubtree:!0}),this.config=r,this.#e=t,this.#s=i.onViewportOffsetChange;const s=this.config.scrollbarPadding,o=this.config.scrollbarSize;this.#t=this.#e=="vertical"?new ve(()=>this.#n.x+this.#n.width-o-s,()=>this.#n.y+s+this.scrollOffset,()=>o,()=>this.#a()):new ve(()=>this.#n.x+s+this.scrollOffset,()=>this.#n.y+this.#n.height-o-s,()=>this.#a(),()=>o),this.#A(this.viewportOffset),this.addInteractionEventListener("mousedown",(a,l)=>{if(l.stopPropagation(),this.#c()<=0)return;const c=d=>t=="vertical"?d.clientY:d.clientX;l.mouseEvent.preventDefault();const u=this.scrollOffset,f=c(l.mouseEvent),h=d=>{const g=this.#c();if(g<=0)return;const p=ji(c(d)-f+u,0,g);this.interpolateViewportOffset({x:this.#u(p)})},A=()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",A)};document.addEventListener("mouseup",A,!1),document.addEventListener("mousemove",h,!1)})}get scrollOffset(){return this.#l(this.viewportOffset)}setViewportOffset(e,{notify:t=!0,syncSmoother:i=!1}={}){this.viewportOffset=ji(e,0,this.#f()),i&&this.#A(this.viewportOffset),t&&this.#s&&this.#s(this.viewportOffset)}#o(){const e=this.#e=="horizontal"?"width":"height",t=this.#n[e],i=this.#i[e];return i>0?Math.min(1,t/i):1}#r(){const e=this.#e=="horizontal"?"width":"height";return Math.max(0,this.#n[e]-2*this.config.scrollbarPadding)}#a(){const e=this.#r(),t=this.#o()*e,i=this.config.scrollbarMinLength;return Math.min(e,Math.max(i,t))}#c(){return Math.max(0,this.#r()-this.#a())}#l(e){const t=this.#f(),i=this.#c();return t<=0||i<=0?0:e/t*i}#u(e){const t=this.#f(),i=this.#c();return t<=0||i<=0?0:e/i*t}#f(){const e=this.#e=="horizontal"?"width":"height";return Math.max(0,this.#i[e]-this.#n[e])}render(e,t,i){super.render(e,this.#t,i)}updateScrollbar(e,t){this.#n=e.flatten(),this.#i=t,this.setViewportOffset(this.viewportOffset,{notify:!1,syncSmoother:!0})}#A(e){this.interpolateViewportOffset=vf(this.context.animator,t=>{this.setViewportOffset(t.x,{notify:!0,syncSmoother:!1})},35,.4,{x:e})}}class ZR extends mi{constructor(e,t,i={}){const r=t(),s=Object.keys(r.intervals);if($n.every(u=>!s.includes(u)))throw new Error("SelectionRect requires at least one of the channels 'x' or 'y' to be present in the selection.");const o={name:"selectionRect",domainInert:!0,resolve:{scale:{x:"forced",y:"forced"}},data:{values:Mw(t())},encoding:{},layer:[]};s.includes("x")&&(o.encoding.x={field:"_x",type:null,title:null},o.encoding.x2={field:"_x2"}),s.includes("y")&&(o.encoding.y={field:"_y",type:null,title:null},o.encoding.y2={field:"_y2"}),o.layer.push({name:"selectionRectRect",mark:{type:"rect",clip:!0,fill:"#808080",fillOpacity:.05,stroke:"black",strokeWidth:1,strokeOpacity:.2,...i}});const a=u=>{const f=e.view.getScaleResolution(u);return`format(datum._${u}2 - datum._${u}, '.3s')`+(f.type==="locus"?" + 'b'":"")},l=i.measure=="inside"?9:i.measure=="outside"?-9:0;s.includes("x")&&l!=0&&o.layer.push({name:"selectionRectTextX",mark:{type:"text",align:"center",paddingX:5,dy:l,tooltip:null},encoding:{text:{expr:a("x")},y:s.includes("y")?{field:"_y2",type:null,title:null}:{value:1},y2:null}}),s.includes("y")&&l!=0&&o.layer.push({name:"selectionRectTextY",mark:{type:"text",align:"center",paddingY:5,dy:l,tooltip:null,angle:-90},encoding:{text:{expr:a("y")},x2:null}}),super(o,e.layoutParent.context,e.layoutParent,e.view,"selectionRect",{blockEncodingInheritance:!0}),on(this,{skipSubtree:!0});const c=()=>{const u=t(),f=this.flowHandle?.dataSource;if(!f)throw new Error("Cannot find selection rect data source handle!");f.updateDynamicData(Mw(u))};this.registerDisposer(t.subscribe(c))}}function Mw(n){const e=n.intervals.x,t=n.intervals.y;return!e&&!t?[]:[{_x:e?.[0],_x2:e?.[1],_y:t?.[0],_y2:t?.[1]}]}class $R{constructor(e,t,i){if(this.layoutParent=t,this.view=e,this.serial=i,this.background=void 0,this.backgroundStroke=void 0,this.axes={},this.gridLines={},this.scrollbars={},this.selectionRect=void 0,this.title=void 0,this.coords=ve.ZERO,e.needsAxes.x||e.needsAxes.y){const r=e.spec,s="view"in r?r?.view:void 0,o=eM(s);o&&(this.background=new tt(o,t.context,t,e,"background"+i,{blockEncodingInheritance:!0}),on(this.background,{skipSubtree:!0}));const a=tM(s);a&&(this.backgroundStroke=new tt(a,t.context,t,e,"backgroundStroke"+i,{blockEncodingInheritance:!0}),on(this.backgroundStroke,{skipSubtree:!0}));const l=XR(e.spec.title);if(l){const c=new tt(l,t.context,t,e,"title"+i,{blockEncodingInheritance:!0});this.title=c,on(this.title,{skipSubtree:!0})}}e.spec.viewportWidth!=null&&(this.scrollbars.horizontal=new Rw(this,"horizontal")),e.spec.viewportHeight!=null&&(this.scrollbars.vertical=new Rw(this,"vertical")),this.#e()}#e(){const e=this.view,t=i=>{this.view.context.glHelper.canvas.style.cursor=i};for(const[i,r]of e.paramRuntime.paramConfigs){if(!("select"in r))continue;const s=Wo(r.select);if(!Sd(s))continue;const o=s.encodings,a=Object.fromEntries(o.map(C=>{const w=this.view.getScaleResolution(C),E=w?.getScale();if(!E||!Pe(E.type))throw new Error(`No continuous scale found for interval selection param "${i}" on channel "${C}"! Scale type is "${E?.type??"none"}".`);return[C,w]}));if(this.selectionRect)throw new Error("Only one interval selection per container is currently allowed!");let l=!1,c=!1,u=!1,f=null;const h=(C,w)=>Object.fromEntries(o.map(E=>[E,[Math.min(C[E],w[E]),Math.max(C[E],w[E])]])),A=e.paramRuntime.createExpression(i),d=C=>{e.paramRuntime.setValue(i,C)};r.value&&d({type:"interval",intervals:r.value});const g=()=>{d(Id(o)),t(null)};this.selectionRect=new ZR(this,A,s.mark),this.selectionRect.initializeChildren();const p=C=>{const w={x:0,y:0},E=e.coords.normalizePoint(C.x,C.y,!0);for(const I of o){const b=a[I].getScale(),S=b.invert(I=="x"?E.x:E.y);w[I]=S+(["index","locus"].includes(b.type)?.5:0)}return w},m=C=>{const{intervals:w}=C,E=(S,Q,v)=>{const F=(O,H)=>H==null?null:a[O].getScale()(H),R=F("x",S)??v,N=F("y",Q)??v;return e.coords.denormalizePoint(R,N,!0)},I=E(w.x?.[0],w.y?.[0],0),b=E(w.x?.[1],w.y?.[1],1);return ve.create(I.x,I.y,b.x-I.x,b.y-I.y)};e.addInteractionEventListener("mousedown",(C,w)=>{if(w.mouseEvent.button!=0)return;if(f=l?m(A()):null,f)t("grabbing"),c=!0;else{const Q=w.point;if(Qd(A())&&(c=!0),w.mouseEvent.shiftKey)g(),u=!0;else if(Qd(A())){const F=(R,N)=>{e.removeInteractionEventListener("mouseup",F);const O=N.point;Q.subtract(O).length<2&&g()};e.addInteractionEventListener("mouseup",F);return}else return}w.stopPropagation();const E=w.point,I=ct.fromMouseEvent(w.mouseEvent).subtract(E),b=Q=>{const v=ct.fromMouseEvent(Q).subtract(I);let F;if(f){const R=v.subtract(E),N=f.translate(R.x,R.y);F=h(p(new ct(N.x,N.y)),p(new ct(N.x2,N.y2)))}else F=h(p(E),p(v));for(const R of o){const N=a[R],{zoomExtent:O,scale:H}=N,G=F[R];if(["index","locus"].includes(H.type)&&(G[0]=Math.ceil(G[0]),G[1]=Math.ceil(G[1])),f){const V=G[1]-G[0],te=O[0],ae=O[1];G[0]<te&&(G[0]=te,G[1]=te+V),G[1]>ae&&(G[1]=ae,G[0]=ae-V)}else G[0]=Math.max(O[0],G[0]),G[1]=Math.min(O[1],G[1]);G[1]=Math.min(O[1],G[1])}d({type:"interval",intervals:F})},S=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",S),u=!1,f&&(t("move"),f=null)};document.addEventListener("mousemove",b),document.addEventListener("mouseup",S)}),e.addInteractionEventListener("click",(C,w)=>{w.mouseEvent.button==0&&c&&(w.stopPropagation(),c=!1)},!0);const y=C=>qI(A(),p(C));e.addInteractionEventListener("dblclick",(C,w)=>{y(w.point)&&(g(),w.stopPropagation())},!0),e.addInteractionEventListener("mousemove",(C,w)=>{y(w.point)?u||(l=!0,f||t("move")):(l=!1,f||t(null))})}}*getChildren(){this.background&&(yield this.background),this.backgroundStroke&&(yield this.backgroundStroke),this.title&&(yield this.title),yield*Object.values(this.axes),yield*Object.values(this.gridLines),yield this.view,yield*Object.values(this.scrollbars),this.selectionRect&&(yield this.selectionRect)}async createAxes(){this.disposeAxisViews();const{view:e,axes:t,gridLines:i}=this,r=(a,l)=>{const c=a.getAxisProps();if(c===null)return;const u=c?{...c}:{};if(!u.orient){for(const f of tc[l])if(!t[f]){u.orient=f;break}if(!u.orient)throw new Error("No slots available for an axis! Perhaps a LayerView has more than two children?")}if(u.title??=a.getTitle(),!tc[l].includes(u.orient))throw new Error(`Invalid axis orientation "${u.orient}" on channel "${l}"!`);return u},s=async(a,l,c)=>{const u=r(a,l);if(u){if(t[u.orient])throw new Error(`An axis with the orient "${u.orient}" already exists!`);const f=new Iw(u,a.scaleResolution.type,this.layoutParent.context,this.layoutParent,c);t[u.orient]=f,await f.initializeChildren()}},o=async(a,l,c)=>{const u=r(a,l);if(u&&(u.grid||u.chromGrid)){const f=new zR(u,a.scaleResolution.type,this.layoutParent.context,this.layoutParent,c);i[u.orient]=f,await f.initializeChildren()}};for(const a of["x","y"])if(e.needsAxes[a]){const l=e.resolutions.axis[a];if(!l)continue;await s(l,a,e)}for(const a of["x","y"])if(e.needsAxes[a]&&e.getConfiguredOrDefaultResolution(a,"axis")!="excluded"){const l=e.getAxisResolution(a);if(!l)continue;await o(l,a,e)}if(e instanceof mi){for(const a of e)for(const[l,c]of Object.entries(a.resolutions.axis)){const u=c.getAxisProps();u&&u.orient&&await s(c,l,a)}for(const a of e)for(const[l,c]of Object.entries(a.resolutions.axis)){const u=c.getAxisProps();u&&!u.orient&&await s(c,l,a)}}[...Object.values(t),...Object.values(i)].forEach(a=>a.visit(l=>{l instanceof tt&&l.resolve("scale")}))}disposeAxisViews(){for(const e of Object.values(this.axes))e.disposeSubtree();for(const e of Object.values(this.gridLines))e.disposeSubtree();this.axes={},this.gridLines={}}getOverhang(){const e=t=>{const i=this.axes[t];return i?Math.max(i.getPerpendicularSize()+(i.axisProps.offset??0),0):0};return new Ke(e("top"),e("right"),e("bottom"),e("left")).add(this.view.getOverhang())}getOverhangAndPadding(){return this.getOverhang().add(this.view.getPadding())}}function eM(n){if(n?.fill||n?.fillOpacity||n?.shadowOpacity)return{data:{values:[{}]},mark:{color:n.fill,opacity:n.fillOpacity??(n.fill?1:0),type:"rect",clip:!1,tooltip:null,minHeight:1,minOpacity:0,shadowBlur:n.shadowBlur,shadowColor:n.shadowColor,shadowOffsetX:n.shadowOffsetX,shadowOffsetY:n.shadowOffsetY,shadowOpacity:n.shadowOpacity}}}function tM(n){if(!(!n||!n.stroke||n.strokeWidth===0||n.strokeOpacity===0))return{resolve:{scale:{x:"excluded",y:"excluded"},axis:{x:"excluded",y:"excluded"}},data:{values:[{x:0,y:0,x2:1,y2:0},{x:1,y:0,x2:1,y2:1},{x:1,y:1,x2:0,y2:1},{x:0,y:1,x2:0,y2:0}]},mark:{size:n.strokeWidth??1,color:n.stroke??"lightgray",strokeCap:"square",opacity:n.strokeOpacity??1,type:"rule",clip:!1,tooltip:null},encoding:{x:{field:"x",type:"quantitative",scale:null},y:{field:"y",type:"quantitative",scale:null},x2:{field:"x2"},y2:{field:"y2"}}}}const nM={pan:{baseSpeed:1,maxExtraSpeed:3,pressHalfLifeMs:30,releaseHalfLifeMs:100,holdGrowthHalfLifeMs:800,stopVelocity:.01},zoom:{baseSpeed:3,maxExtraSpeed:15,pressHalfLifeMs:10,releaseHalfLifeMs:100,holdGrowthHalfLifeMs:600,stopVelocity:.01}};class iM{#e;#t;#n;#i;#s;constructor(e=nM){this.#i=e.pan,this.#s=e.zoom,this.#e={KeyW:!1,KeyA:!1,KeyS:!1,KeyD:!1},this.#t={velocity:0,holdMs:0,direction:0},this.#n={velocity:0,holdMs:0,direction:0}}isNavigationKey(e){return e==="KeyW"||e==="KeyA"||e==="KeyS"||e==="KeyD"}handleKeyDown(e){return this.#o(e,!0)}handleKeyUp(e){return this.#o(e,!1)}reset(){this.#e.KeyW=!1,this.#e.KeyA=!1,this.#e.KeyS=!1,this.#e.KeyD=!1,this.#t.velocity=0,this.#t.holdMs=0,this.#t.direction=0,this.#n.velocity=0,this.#n.holdMs=0,this.#n.direction=0}step(e){if(e<=0)return{panDelta:0,zoomDelta:0,active:this.isActive()};{const t=Nw(this.#e.KeyD,this.#e.KeyA),i=Nw(this.#e.KeyW,this.#e.KeyS),r=Tw(this.#t,t,e,this.#i),s=Tw(this.#n,i,e,this.#s),o=e/1e3;return{panDelta:r*o,zoomDelta:s*o,active:this.isActive()}}}isActive(){return this.#e.KeyW||this.#e.KeyA||this.#e.KeyS||this.#e.KeyD?!0:this.#t.velocity!==0||this.#n.velocity!==0}#o(e,t){if(this.isNavigationKey(e)){const i=e;return this.#e[i]===t?!1:(this.#e[i]=t,!0)}else return!1}}function Nw(n,e){return n===e?0:e?1:-1}function Tw(n,e,t,i){if(e!==0){n.direction!==e&&(n.holdMs=0),n.holdMs+=t;const r=i.maxExtraSpeed*(1-Math.pow(2,-n.holdMs/i.holdGrowthHalfLifeMs)),s=e*(i.baseSpeed+r);n.velocity=Pw(n.velocity,s,t,i.pressHalfLifeMs)}else n.holdMs=0,n.velocity=Pw(n.velocity,0,t,i.releaseHalfLifeMs),Math.abs(n.velocity)<i.stopVelocity&&(n.velocity=0);return n.direction=e,n.velocity}function Pw(n,e,t,i){return e+(n-e)*Math.pow(2,-t/i)}function Lw(n){const e={x:new Set,y:new Set};return n.visit(t=>{for(const[i,r]of Object.entries(e)){const s=t.getScaleResolution(i);s&&s.isZoomable()&&r.add(s)}}),e}function Pf(n){const e=Lw(n).x;if(e.size===1){const t=e.values().next().value,i=n.getScaleResolution("x");return!i||i!==t?void 0:t}}class rM{#e;#t;#n=.5;#i=new iM;#s=!1;#o=0;#r=e=>{if(!this.#s)return;const t=Pf(this.#t);if(!t){this.#i.reset(),this.#s=!1,this.#o=0;return}const i=Math.max(0,e-this.#o);this.#o=e;const r=this.#i.step(i);(r.panDelta!==0||r.zoomDelta!==0)&&t.zoom(2**r.zoomDelta,this.#n,r.panDelta)&&(Qw(),this.#e.animator.requestRender()),r.active?this.#e.animator.requestTransition(this.#r):(this.#s=!1,this.#o=0)};constructor({context:e,viewRoot:t}){this.#e=e,this.#t=t,this.#a()}handlePointerEvent(e,t){if(e){const i=e.view;if(typeof i.getKeyboardZoomAnchorX=="function"){const r=i.getKeyboardZoomAnchorX(t.point);Number.isFinite(r)&&(this.#n=Math.max(0,Math.min(1,r)))}else{const r=e.coords.normalizePoint(t.point.x,t.point.y);this.#n=r.x}}else return}#a(){const e=this.#e.addKeyboardListener;typeof e=="function"&&(e("keydown",t=>{sM(t)||!this.#i.isNavigationKey(t.code)||!Pf(this.#t)||!this.#i.handleKeyDown(t.code)||(t.preventDefault(),this.#c())}),e("keyup",t=>{!this.#i.isNavigationKey(t.code)||!this.#i.handleKeyUp(t.code)||!Pf(this.#t)||(t.preventDefault(),this.#c())}))}#c(){this.#s||(this.#s=!0,this.#o=performance.now(),this.#e.animator.requestTransition(this.#r))}}function sM(n){return!!(n.altKey||n.ctrlKey||n.metaKey||oM(n.target))}function oM(n){if(!n||typeof n!="object")return!1;const e=n;if(e.isContentEditable)return!0;if(typeof e.nodeName=="string"){const t=e.nodeName.toLowerCase();return t==="input"||t==="textarea"||t==="select"}return!1}const nc=Object.freeze({size:1,color:"#ccc",opacity:1,strokeDash:[4,4],strokeCap:"butt"});class aM{#e;#t;#n;#i=[];#s=[];#o={x:[0,0],y:[0,0]};constructor({direction:e,props:t,context:i,layoutParent:r,dataParent:s,getName:o}){this.#e=e,this.#t=t.includePlotMargin??!0;const a={...t};delete a.includePlotMargin,this.#n=this.#c(a,i,r,s,o)}get view(){return this.#n}update(e,t,i,r,s,o){this.#r(e,t,r,s),this.#a(i,o)}render(e,t,i){this.#n.render(e,t,i)}#r(e,t,i,r){if(this.#s.length=0,t<2)return;const s=this.#e==="vertical"?"column":"row",o=r?3:2;for(let a=1;a<t;a++){const c=i(s,a)-o,u=e[c],f=u?u.location:0,h=u?u.size:0;this.#s.push(f+h/2)}}#a(e,t){const i=this.#t?0:t.left,r=this.#t?e.width:e.width-t.right,s=this.#t?0:t.bottom,o=this.#t?e.height:e.height-t.top;this.#i.length=this.#s.length;for(let u=0;u<this.#s.length;u++){const f=this.#s[u],h=this.#i[u]??{};if(this.#e==="vertical")h.x=f,h.x2=f,h.y=s,h.y2=o;else{const A=e.height-f;h.x=i,h.x2=r,h.y=A,h.y2=A}this.#i[u]=h}const a=this.#n.flowHandle?.dataSource;if(!a)return;a.updateDynamicData(this.#i),this.#o.x[1]=e.width,this.#o.y[1]=e.height;const l=this.#n.getScaleResolution("x")?.getScale();l&&l.domain(this.#o.x);const c=this.#n.getScaleResolution("y")?.getScale();c&&c.domain(this.#o.y)}#c(e,t,i,r,s){const o=lM(e),a=this.#e==="horizontal"?s("separatorHorizontal"):s("separatorVertical"),l=new tt(o,t,i,r,a,{blockEncodingInheritance:!0});return on(l,{skipSubtree:!0}),l}}function cM(n){if(!n)return null;const e=n===!0?{...nc}:{...nc,...n};return e.strokeDash===nc.strokeDash&&(e.strokeDash=nc.strokeDash.slice()),e}function lM(n){return{domainInert:!0,data:{values:[]},resolve:{scale:{x:"excluded",y:"excluded"},axis:{x:"excluded",y:"excluded"}},mark:{...n,type:"rule",clip:n.clip??!1,tooltip:null},encoding:{x:{field:"x",type:"quantitative",scale:{nice:!1,zero:!1}},y:{field:"y",type:"quantitative",scale:{nice:!1,zero:!1}},x2:{field:"x2"},y2:{field:"y2"}}}}class uM extends Ws{#e=1/0;#t=10;#n=[];#i={};#s=0;#o={};#r=null;constructor(e,t,i,r,s,o,a){super(e,t,i,r,s,a),this.spec=e,this.#t=e.spacing??10,this.#e=o,this.#n=[],this.wrappingFacet=!1;const l=cM(e.separator);if(l)for(const c of AM(e))this.#o[c]=new aM({direction:c,props:l,context:this.context,layoutParent:this,dataParent:this,getName:u=>this.getNextAutoName(u)});this.layoutParent||(this.#r=new rM({context:this.context,viewRoot:this}))}appendChild(e){this.appendChildView(e)}appendChildView(e){return this.insertChildViewAt(e,this.#n.length)}insertChildViewAt(e,t){e.layoutParent??=this;const i=new $R(e,this,this.#s);return this.#s++,this.#n.splice(t,0,i),this.invalidateSizeCache(),i}removeChildView(e){const t=this.#n.findIndex(i=>i.view===e);if(t<0)throw new Error("Not my child view!");this.removeChildAt(t)}removeChildAt(e){const t=this.#n[e];if(!t)throw new Error("Child index out of range!");this.#l(t),this.#n.splice(e,1),this.invalidateSizeCache()}get#a(){return this.#n.filter(e=>e.view.isConfiguredVisible())}get#c(){return new yw(this.#a.length,this.#e??1/0)}setChildren(e){for(const t of this.#n)this.#l(t);this.#n=[];for(const t of e)this.appendChild(t);this.invalidateSizeCache()}#l(e){e.disposeAxisViews();for(const t of e.getChildren())t.disposeSubtree()}get children(){return this.#n.map(e=>e.view)}get childCount(){return this.#n.length}async createAxes(){await this.syncSharedAxes(),await Promise.all(this.#n.map(e=>e.createAxes()))}async syncSharedAxes(){for(const t of Object.values(this.#i))t.disposeSubtree();this.#i={};const e=[];for(const t of $n){const i=this.resolutions.axis[t];if(!i)continue;const r=i.getAxisProps();if(!r)continue;const s={title:i.getTitle(),orient:tc[t][0],...r},o=new Iw(s,i.scaleResolution.type,this.context,this,this);e.push(o.initializeChildren()),this.#i[t]=o}await Promise.all(e)}*[Symbol.iterator](){for(const e of this.#n)yield*e.getChildren();for(const e of Object.values(this.#o))yield e.view;for(const e of Object.values(this.#i))yield e}#u(e){const t=e=="column"?"width":"height",i=(r,s)=>r.map(o=>{const l=this.#a[o].getOverhangAndPadding();return e=="column"?s?l.right:l.left:s?l.bottom:l.top}).reduce((o,a)=>Math.max(o,a),0);return this._cache(`size/directionSizes/${e}`,()=>this.#c[e=="column"?"colIndices":"rowIndices"].map(r=>({axisBefore:i(r,0),axisAfter:i(r,1),view:Nk(r.map(s=>this.#a[s].view.getViewportSize()[t]))})))}#f(e){const t=this.#u(e),i=[];i.push(Gs);for(const[r,s]of t.entries())r>0&&i.push({px:this.#t,grow:0}),(r==0||this.wrappingFacet)&&i.push(Gs),i.push({px:s.axisBefore,grow:0}),i.push(s.view),i.push({px:s.axisAfter,grow:0}),(r==t.length-1||this.wrappingFacet)&&i.push(Gs);return i}#A(e){let t=0,i=0;const r=e=="row"?this.spec.height:this.spec.width;if(r||r===0)return im(r);const s=this.#u(e);for(const[o,a]of s.entries())o>0&&(i+=this.#t),(o==0||this.wrappingFacet)&&(i+=0),i+=a.axisBefore,i+=a.view.px??0,t+=a.view.grow??0,i+=a.axisAfter,(o==s.length-1||this.wrappingFacet)&&(i+=0);return{px:i,grow:t}}#h(e,t){return e=="row"&&this.wrappingFacet?1+6*t+2:2+4*t+1}getOverhang(){return this.#d().union(this.#g())}#d(){const e=this.#u("column"),t=this.#u("row");return!e.length||!t.length?Ke.zero():new Ke(t.at(0).axisBefore,e.at(-1).axisAfter,t.at(-1).axisAfter,e.at(0).axisBefore)}#g(){const e=t=>{const i=Nf[t],r=this.#i[i];return r?.axisProps.orient!==t?0:Math.max(r.getPerpendicularSize()+(r.axisProps.offset??0),0)};return new Ke(e("top"),e("right"),e("bottom"),e("left"))}getSize(){return this._cache("size",()=>new Mn(this.#A("column"),this.#A("row")).addPadding(this.#g()))}render(e,t,i={}){if(super.render(e,t,i),!this.isConfiguredVisible())return;this.layoutParent||(t=t.shrink(this.getPadding())),t=t.shrink(this.#g()),e.pushView(this,t);const r=e.getDevicePixelRatio(),s={devicePixelRatio:r},o=tm(this.#f("column"),t.width,s),a=tm(this.#f("row"),t.height,s),l=new yw(this.#a.length,this.#e??1/0),c=d=>Math.round(d*r)/r,u=[];for(const[d,g]of this.#a.entries()){const{view:p,axes:m,gridLines:y,background:C,backgroundStroke:w,title:E,selectionRect:I}=g,[b,S]=l.getCellCoords(d),Q=o[this.#h("column",b)],v=a[this.#h("row",S)],F=p.getViewportSize(),R=p.getSize(),N=p.getOverhang(),O=Q.location-N.left,H=v.location-N.top,G=(U,q)=>(U[q].grow?(q=="width"?Q:v).size:U[q].px)+N[q],V=G(F,"width"),te=G(F,"height"),ae=G(R,"width"),ne=G(R,"height"),Ge=g.scrollbars.horizontal,Yt=g.scrollbars.vertical,po=Ge?()=>c(Ge.viewportOffset):()=>0,Rr=Yt?()=>c(Yt.viewportOffset):()=>0,un=new ve(()=>t.x+O,()=>t.y+H,()=>V,()=>te),vi=p.isScrollable(),mo=vi?new ve(()=>t.x+O-po(),()=>t.y+H-Rr(),()=>ae,()=>ne):un;g.coords=un;const Mr=i.clipRect?un.intersect(i.clipRect):un;u.push({col:b,row:S,view:p,axes:m,gridLines:y,background:C,backgroundStroke:w,title:E,selectionRect:I,viewportCoords:un,viewCoords:mo,clippedChildCoords:Mr,viewWidth:ae,viewHeight:ne,scrollable:vi,gridChild:g})}for(const d of u)d.background?.render(e,d.clippedChildCoords,{...i,clipRect:void 0});const f=this.#d(),h=this.#o.vertical;h&&(h.update(o,l.nCols,t,(d,g)=>this.#h(d,g),this.wrappingFacet,f),h.render(e,t,i));const A=this.#o.horizontal;A&&(A.update(a,l.nRows,t,(d,g)=>this.#h(d,g),this.wrappingFacet,f),A.render(e,t,i));for(const d of u){const{view:g,axes:p,gridLines:m,backgroundStroke:y,title:C,selectionRect:w,viewportCoords:E,viewCoords:I,clippedChildCoords:b,viewWidth:S,viewHeight:Q,scrollable:v,gridChild:F,col:R,row:N}=d;for(const H of Object.values(m))H.render(e,E,i);const O=fM(g)||v;O&&g.render(e,I,{...i,clipRect:b}),y?.render(e,b,{...i,clipRect:void 0});for(const[H,G]of Object.entries(p)){const V=H=="left"||H=="right"?"vertical":"horizontal",te=F.scrollbars[V],ae=te?E.modify(V=="vertical"?{y:()=>I.y,height:Q}:{x:()=>I.x,width:S}):E,ne=Ow(ae,H,G);let Ge=i.clipRect;te&&(Ge=ne.intersect(Ge).intersect(te?E.modify(V=="vertical"?{x:-1e5,width:2e5}:{y:-1e5,height:2e5}):void 0)),G.render(e,ne,{...i,clipRect:Ge})}for(const H of Object.values(this.#i)){const V=H.axisProps.orient;(V=="left"&&R==0||V=="right"&&R==l.nCols-1||V=="top"&&N==0||V=="bottom"&&N==l.nRows-1)&&H.render(e,Ow(E.shrink(F.view.getOverhang()),V,H),i)}O||g.render(e,I,i),w?.render(e,I,i);for(const H of Object.values(F.scrollbars))H.updateScrollbar(E,I),H.render(e,t,i);C?.render(e,E,i)}e.popView(this)}propagateInteractionEvent(e){if(this.handleInteractionEvent(void 0,e,!0),e.stopped)return;const t=this.#a.find(r=>r.coords.containsPoint(e.point.x,e.point.y));this.#r?.handlePointerEvent(t,e);for(const r of Object.values(t?.scrollbars??{}))if(r.coords.containsPoint(e.point.x,e.point.y)&&(r.propagateInteractionEvent(e),e.stopped))return;const i=t?.view;if(i){if(i.propagateInteractionEvent(e),e.stopped)return;(i instanceof tt||i instanceof mi)&&UR(e,t.coords,r=>this.#p(t.coords,t.view,r),this.context.getCurrentHover(),this.context.animator)}e.stopped||this.handleInteractionEvent(void 0,e,!1)}#p(e,t,i){for(const[r,s]of Object.entries(Lw(t))){if(s.size<=0)continue;const o=e.normalizePoint(i.x,i.y),a=e.normalizePoint(i.x+i.xDelta,i.y+i.yDelta),l={x:a.x-o.x,y:a.y-o.y};for(const c of s)c.zoom(2**i.zDelta,r=="y"?1-o[r]:o[r],r=="x"?l.x:-l.y)}this.context.animator.requestRender()}getDefaultResolution(e,t){return"independent"}}function fM(n){let e=!0;return n.visit(t=>{t instanceof tt&&(e&&=t.mark.properties.clip===!0)}),e}function AM(n){return"vconcat"in n?["horizontal"]:"hconcat"in n?["vertical"]:["horizontal","vertical"]}function Ow(n,e,t){const i=t.axisProps,r=t.getPerpendicularSize();if(e=="bottom")return n.translate(0,n.height+i.offset).modify({height:r});if(e=="top")return n.translate(0,-r-i.offset).modify({height:r});if(e=="left")return n.translate(-r-i.offset,0).modify({width:r});if(e=="right")return n.translate(n.width+i.offset,0).modify({width:r})}class Lf extends uM{constructor(e,t,i,r,s){super(e,t,i,r,s,ec(e)?e.columns:Xs(e)?1:1/0),this.spec=e}async initializeChildren(){const e=this.spec,t=ec(e)?e.concat:Xs(e)?e.vconcat:e.hconcat;this.setChildren(await Promise.all(t.map(i=>this.context.createOrImportView(i,this,this,this.getNextAutoName("grid"))))),await this.createAxes()}async addChildSpec(e,t){return this.#t().addChildSpec(e,t)}async removeChildAt(e){await this.#t().removeChildAt(e)}getDefaultResolution(e,t){return t=="axis"?"independent":Xs(this.spec)&&e==="x"||ww(this.spec)&&e==="y"?"shared":"independent"}#e(){const e=this.spec;let t;return ec(e)?t=e.concat:Xs(e)?t=e.vconcat:t=e.hconcat,{specs:t,insertAt:(i,r)=>{t.splice(i,0,r)},removeAt:i=>{t.splice(i,1)}}}#t(){return new hw(this,{getChildSpecs:this.#e.bind(this),insertView:(e,t)=>this.insertChildViewAt(e,t),removeView:e=>super.removeChildAt(e),prepareView:async(e,t,i)=>{await i.createAxes(),await this.syncSharedAxes()},afterRemove:async()=>{await this.syncSharedAxes()},defaultName:()=>this.getNextAutoName("grid")})}}const Uw="viewRoot";class hM{#e=new Map;constructor(e={}){this.options={allowImport:!0,wrapRoot:!0,...e};const t=i=>(r,s,o,a,l)=>new i(r,s,o,a,l);this.addViewType(kf,t(mi)),this.addViewType(Qf,((i,r,s,o,a)=>new mi(yR(i),r,s,o,a))),this.addViewType(Df,t(tt)),this.addViewType(Xs,t(Lf)),this.addViewType(ww,t(Lf)),this.addViewType(ec,t(Lf))}addViewType(e,t){this.#e.set(e,t)}createView(e,t,i,r,s){for(const[o,a]of this.#e)if(o(e))return a(e,t,i,r,s);throw gM(e)?new Error("SampleView is not supported by the @genome-spy/core package. Use @genome-spy/app instead!"):new Error("Invalid spec, cannot figure out the view type from the properties: "+JSON.stringify([...Object.keys(e)]))}isViewSpec(e){const t=[...this.#e.keys()].filter(i=>i(e));if(t.length>1)throw new Error("Ambiguous spec. Cannot create a view!");return t.length==1}async createOrImportView(e,t,i,r,s,o){let a;const l=mw(e)?e.name??null:void 0;if(mw(e)){let h;if("url"in e.import)if(this.options.allowImport)h=await h4(e,r.getBaseUrl(),t);else throw new _e("Importing views is not allowed!",i);else if("template"in e.import)h=Gw(e.import.template,r);else throw new Error("Invalid import: "+JSON.stringify(e));o?.(h),dM(h,e),a=h}else a=e;const c=h=>h?.params?.some(A=>Sl(A)&&Wo(A.select).type=="interval");let u=!1;!r&&this.options.wrapRoot&&(Df(a)||kf(a)||Qf(a)||c(a))&&s===Uw&&(a={name:"implicitRoot",vconcat:[a]},u=!0);const f=this.createView(a,t,i,r,s);return l!==void 0&&bR(f,l),u&&on(f),f instanceof Ws&&await f.initializeChildren(),f.registerStepSizeInvalidation(),f}}function Gw(n,e){const t=e.spec?.templates?.[n];if(t)return structuredClone(t);if(e.dataParent)return Gw(n,e.dataParent);throw new Error(`Cannot find template "${n}" in current view or its ancestors!`)}function dM(n,e){e.name!=null&&(n.name=e.name),e.visible!=null&&(n.visible=e.visible);const t=xe(e.params)?e.params:ze(e.params)?Object.entries(e.params).map(([i,r])=>({name:i,value:r})):[];if(t.length){n.params??=[];for(const i of t){const r=n.params.findIndex(s=>s.name==i.name);r>=0&&(n.params[r]=i)}for(const i of t)n.params.some(r=>r.name==i.name)||n.params.push(i)}}function gM(n){return"samples"in n&&ze(n.samples)&&"spec"in n&&ze(n.spec)}class pM{#e;constructor(e,t){this.point=e,this.uiEvent=t,this.stopped=!1,this.target=void 0}stopPropagation(){this.stopped=!0}get type(){return this.uiEvent.type}get proxiedMouseEvent(){return this.#e||(this.#e=mM(this.mouseEvent)),this.#e}get mouseEvent(){if(this.uiEvent instanceof MouseEvent)return this.uiEvent;throw new Error("Not a MouseEvent!")}}function mM(n){const e=i=>i===null||typeof i!="object"&&typeof i!="function",t={get(i,r,s){const o=Reflect.get(i,r,i);if(!e(o))throw new Error(`Access to non-primitive property "${String(r)}" is not allowed.`);return o},getPrototypeOf(){return null},ownKeys(i){return Reflect.ownKeys(i).filter(s=>e(i[s])).map(s=>typeof s=="symbol"?s:String(s))},getOwnPropertyDescriptor(i,r){const s=Reflect.getOwnPropertyDescriptor(i,r);if(s&&!("get"in s||"set"in s)&&e(s.value))return{value:s.value,writable:!!s.writable,enumerable:!!s.enumerable,configurable:!!s.configurable}},has(i,r){return r in i?e(i[r]):!1}};return new Proxy(n,t)}class wM{constructor(e,t){this.animator=e,this.disabled=!!t,this.maxDistance=500,this.callback=null,this.targetValue=0,this.lastValue=0,this.smoother=vf(e,i=>{const r=i.x-this.lastValue;this.lastValue=i.x,this.callback?.(r)},40,.1,{x:0})}cancel(){this.lastValue!==this.targetValue&&(this.targetValue=JA([this.lastValue,this.targetValue],.3),this.smoother({x:this.targetValue}))}setMomentum(e,t){if(this.disabled){t(e);return}this.callback=t;const i=ji(this.targetValue+e-this.lastValue,-this.maxDistance,this.maxDistance);this.targetValue=this.lastValue+i,this.smoother({x:this.targetValue})}}function yM(n){const e={},t=["string","number","boolean"],i=["wheelDelta","wheelDeltaX","wheelDeltaY"];for(const r in n){const s=r;!i.includes(r)&&t.includes(typeof n[s])&&(e[s]=n[s])}return e}class CM{#e;#t;#n;#i;#s;#o;#r;#a;#c;#l;#u;#f;constructor({viewRoot:e,glHelper:t,tooltip:i,animator:r,emitEvent:s,tooltipHandlers:o,renderPickingFramebuffer:a,getDevicePixelRatio:l}){this.#e=e,this.#t=t,this.#n=i,this.#i=r,this.#s=s,this.#o=o,this.#r=a,this.#a=l,this.#c=void 0,this.#l=new wM(this.#i),this.#u=void 0,this.#f=!1}getCurrentHover(){return this.#c}registerMouseEvents(){const e=this.#t.canvas;let t=performance.now(),i=!1;const r=s=>{const o=performance.now(),a=o-t<200;if(s instanceof MouseEvent){const l=e.getBoundingClientRect(),c=new ct(s.clientX-l.left-e.clientLeft,s.clientY-l.top-e.clientTop);s.type=="mousemove"&&!a&&(this.#n.handleMouseMove(s),this.#f=!1,s.buttons==0&&!Dw()&&(this.#r(),this.#A(c.x,c.y)));const u=f=>{this.#e.propagateInteractionEvent(new pM(c,f)),this.#f||this.#n.clear()};if(s.type!="wheel"&&this.#l.cancel(),(s.type=="mousedown"||s.type=="mouseup")&&!Dw())this.#r();else if(s.type=="wheel"){t=o,this.#f=!1;const f=s;if(Math.abs(f.deltaX)>Math.abs(f.deltaY))this.#c=null,this.#l.cancel();else{const h=yM(f);this.#l.setMomentum(f.deltaY*(f.deltaMode?80:1),A=>{const d=new WheelEvent("wheel",{...h,deltaMode:0,deltaX:0,deltaY:A});u(d)}),f.preventDefault();return}}if(s.type=="click"){if(i)return;const f=this.#c?{type:s.type,viewPath:this.#c.mark.unitView.getLayoutAncestors().map(h=>h.name).reverse(),datum:this.#c.datum}:{type:s.type,viewPath:null,datum:null};this.#s("click",f)}(s.type!="click"||this.#u?.subtract(ct.fromMouseEvent(s)).length<3)&&u(s)}};["mousedown","mouseup","wheel","click","mousemove","gesturechange","contextmenu","dblclick"].forEach(s=>e.addEventListener(s,r)),e.addEventListener("mousedown",s=>{this.#u=ct.fromMouseEvent(s),this.#n.sticky?(this.#n.sticky=!1,this.#n.clear(),i=!0):i=!1;const o=()=>{document.addEventListener("mouseup",()=>this.#n.popEnabledState(),{once:!0}),this.#n.pushEnabledState(!1)};if(s.button==2||s.shiftKey||s.ctrlKey||s.metaKey)o();else if(this.#n.visible){const a=setTimeout(()=>{i=!0,this.#n.sticky=!0},400),l=()=>clearTimeout(a);document.addEventListener("mouseup",l,{once:!0}),document.addEventListener("mousemove",l,{once:!0})}}),e.addEventListener("dragstart",s=>s.stopPropagation()),e.addEventListener("mouseout",()=>{this.#n.clear(),this.#c=null})}#A(e,t){const i=this.#a(),r=bD(this.#t.gl,this.#t._pickingBufferInfo,e*i,t*i),s=r[0]|r[1]<<8|r[2]<<16|r[3]<<24;if(s==0){this.#c=null;return}if(s!==this.#c?.uniqueId&&(this.#c=null),this.#c||this.#e.visit(o=>{if(o instanceof tt){if(o.mark.isPickingParticipant()&&[...o.facetCoords.values()].some(a=>a.containsPoint(e,t))){const a=o.getCollector().findDatumByUniqueId(s);a&&(this.#c={mark:o.mark,datum:a,uniqueId:s})}if(this.#c)return or}}),this.#c){const o=this.#c.mark;this.updateTooltip(this.#c.datum,async a=>{if(!o.isPickingParticipant())return;const l=o.properties.tooltip;if(l!==null){const c=l?.handler??"default",u=this.#o[c];if(!u)throw new Error("No such tooltip handler: "+c);const f=rw(a,o,l?.params);return u(a,o,l?.params,f)}})}}updateTooltip(e,t){if(!this.#f||!e)this.#n.updateWithDatum(e,t),this.#f=!0;else throw new Error("Tooltip has already been updated! Duplicate event handler?")}}class zw{constructor(e){this.globalOptions=e}pushView(e,t){}popView(e){}renderMark(e,t){}getDevicePixelRatio(){return 1}}class Of extends zw{#e=[0,0,0,0];#t;#n=[];#i;#s;#o=new Set;#r=void 0;#a=1;#c={width:0,height:0};constructor(e,t){if(super(e),this.#s=t.webGLHelper,this.#i=t.framebufferInfo,this.#a=t.devicePixelRatio,this.#c=t.canvasSize,t.clearColor){const i=Dn(t.clearColor).rgb();this.#e=[i.r/255,i.g/255,i.b/255,i.opacity]}}getDevicePixelRatio(){return this.#a}pushView(e,t){this.#o.add(e),this.#r=t}renderMark(e,t){if(this.globalOptions.picking&&!e.isPickingParticipant())return;const i=e.render(t);i&&this.#n.push({mark:e,callback:i,coords:this.#r,clipRect:t.clipRect})}render(){if(this.#t||this.#l(),this.#t.length==0)return;const e=this.#s.gl,t=this.#i;t?(e.bindFramebuffer(e.FRAMEBUFFER,t.framebuffer),e.viewport(0,0,t.width,t.height)):e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.disable(e.SCISSOR_TEST),e.clearColor(...this.#e),e.clear(e.COLOR_BUFFER_BIT);for(const i of this.#o)i.onBeforeRender();for(const i of this.#t)i();this.#i&&e.bindFramebuffer(e.FRAMEBUFFER,null)}#l(){this.#t=[];let e=!0,t=!0;const i=o=>()=>{e&&o()},r=o=>()=>{e&&t&&o()},s=Do(this.#n.reverse(),o=>o.mark);for(const[o,a]of[...s.entries()].reverse()){if(!o.isReady())continue;this.#t.push(()=>{e=o.unitView.getEffectiveOpacity()>0}),this.#t.push(...o.prepareRender(this.globalOptions).map(c=>i(c)));let l;for(const c of a){const u=c.coords;u.equals(l)||this.#t.push(i(()=>{t=o.setViewport(this.#c,this.#a,u,c.clipRect)})),this.#t.push(r(c.callback)),l=c.coords}}}}class xM extends zw{constructor(...e){super({}),this.contexts=e}pushView(e,t){for(const i of this.contexts)i.pushView(e,t)}popView(e){for(const t of this.contexts)t.popView(e)}renderMark(e,t){for(const i of this.contexts)i.renderMark(e,t)}}class bM{#e;#t;#n;#i;#s;#o;#r;#a;constructor({viewRoot:e,glHelper:t,getBackground:i,broadcast:r,onLayoutComputed:s}){this.#e=e,this.#t=t,this.#n=i,this.#i=r,this.#s=s,this.#o=void 0,this.#r=void 0,this.#a=!1}computeLayout(){const e=this.#e;if(!e)return;this.#i("layout");const t=this.#t.getLogicalCanvasSize();if(isNaN(t.width)||isNaN(t.height)){console.log(`NaN in canvas size: ${t.width}x${t.height}. Skipping computeLayout().`);return}const i={webGLHelper:this.#t,canvasSize:t,devicePixelRatio:window.devicePixelRatio??1};this.#o=new Of({picking:!1},{...i,clearColor:this.#n()}),this.#r=new Of({picking:!0},{...i,framebufferInfo:this.#t._pickingBufferInfo}),e.render(new xM(this.#o,this.#r),ve.create(0,0,t.width,t.height)),this.#s(),this.#i("layoutComputed")}renderAll(){this.#o?.render(),this.#a=!0}renderPickingFramebuffer(){this.#a&&(this.#r.render(),this.#a=!1)}}function EM(n){const e=o=>{throw new Error("ViewContext."+o+" is not configured.")},t={dataFlow:n.dataFlow??e("dataFlow"),glHelper:n.glHelper??e("glHelper"),animator:n.animator??e("animator"),genomeStore:n.genomeStore,fontManager:n.fontManager??e("fontManager"),createOrImportView:async function(o,a,l,c,u){const f=n.createOrImportViewWithContext;return f?f(t,o,a,l,c,u):Promise.reject(new Error("ViewContext.createOrImportView is not configured."))}},i=["requestLayoutReflow","updateTooltip","getNamedDataFromProvider","getCurrentHover","addKeyboardListener","addBroadcastListener","removeBroadcastListener","highlightView","isViewConfiguredVisible","isViewSpec"],r=n,s=t;for(const o of i)s[o]=r[o]??(()=>e(o));return t}function IM({glHelper:n,viewRoot:e,logicalWidth:t,logicalHeight:i,devicePixelRatio:r,clearColor:s="white"}){t??=n.getLogicalCanvasSize().width,i??=n.getLogicalCanvasSize().height,r??=window.devicePixelRatio??1;const o=n.gl,a=Math.floor(t*r),l=Math.floor(i*r),c=V0(o,[{format:o.RGBA,type:o.UNSIGNED_BYTE,minMag:o.LINEAR,wrap:o.CLAMP_TO_EDGE}],a,l),u=new Of({picking:!1},{webGLHelper:n,canvasSize:{width:t,height:i},devicePixelRatio:r,clearColor:s,framebufferInfo:c});return e.render(u,ve.create(0,0,t,i)),u.render(),ED(o,c,"image/png")}dl("fasta",$8);class BM{#e=[];#t;#n;#i;#s;#o;#r;#a=new MI;#c=new cd;#l=new cd;constructor(e,t,i={}){this.container=e,this.options=i,i.inputBindingContainer??="default",this.spec=t,this.viewFactory=new hM,this.namedDataProviders=[],this.animator=new J8(()=>this.renderAll()),this.genomeStore=void 0,this.viewVisibilityPredicate=r=>r.isVisibleInSpec(),this.tooltipHandlers={default:mR,refseqgene:tR,...i.tooltipHandlers??{}},this.viewRoot=void 0,this.#s=new WI(e,i),this.dpr=window.devicePixelRatio}get#u(){return this.container.querySelector(".canvas-wrapper")}#f(){this.#s.initialize(this.viewRoot)}registerNamedDataProvider(e){this.namedDataProviders.unshift(e)}getNamedDataFromProvider(e){for(const t of this.namedDataProviders){const i=t(e);if(i)return i}}updateNamedData(e,t){const i=this.viewRoot.context.dataFlow.findNamedDataSource(e);if(!i)throw new Error("No such named data source: "+e);i.dataSource.updateDynamicData(t),this.animator.requestRender()}addEventListener(e,t){this.#c.add(e,t)}removeEventListener(e,t){this.#c.remove(e,t)}broadcast(e,t){const i={type:e,payload:t};this.viewRoot.visit(r=>r.handleBroadcast(i)),this.#l.emit(e,i)}#A(){const e=this.viewRoot.paramRuntime.allocateSetter("devicePixelRatio",this.dpr),t=()=>{this.#r.invalidateSize(),this.dpr=window.devicePixelRatio,e(this.dpr),this.computeLayout(),this.renderAll()};if(this.viewRoot.getSize().isGrowing()){const s=new ResizeObserver(t);s.observe(this.container),this.#e.push(()=>s.disconnect())}let i=null;const r=()=>{i!=null&&(i(),t());const s=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);s.addEventListener("change",r),i=()=>{s.removeEventListener("change",r)}};r(),i&&this.#e.push(i)}#h(){const{canvasWrapper:e,loadingIndicatorsElement:t,tooltip:i}=QI(this.container);this.#r=new yD(e,()=>this.viewRoot?d4(this.viewRoot):{width:void 0,height:void 0},{powerPreference:this.options.powerPreference??"default"}),e.appendChild(t),this.tooltip=i,this.#i=new ad,this.#n=new FI(t,this.#i)}destroy(){const e=this.#u;for(this.container.classList.remove("genome-spy"),e.classList.remove("loading"),this.#a.removeAll(),this.#e.forEach(t=>t()),this.#r.finalize(),this.#s.remove(),this.#n.destroy();this.container.firstChild;)this.container.firstChild.remove()}async#d(){await this.#g();const e=this.#p();await this.#y(e),await z8(this.viewRoot,e.dataFlow,e.fontManager,t=>this.broadcast("dataFlowBuilt",t)),this.#C(e)}async#g(){this.spec.genome&&(this.genomeStore=new K8(this.spec.baseUrl),await this.genomeStore.initialize(this.spec.genome))}#p(){const e=new Km;return e.loadingStatusRegistry=this.#i,EM({dataFlow:e,glHelper:this.#r,animator:this.animator,genomeStore:this.genomeStore,fontManager:new W8(this.#r),updateTooltip:this.updateTooltip.bind(this),getNamedDataFromProvider:this.getNamedDataFromProvider.bind(this),getCurrentHover:()=>this.#o.getCurrentHover(),addKeyboardListener:(t,i)=>{this.#a.add(t,r=>{this.#w(t,r)&&i(r)})},addBroadcastListener:(t,i)=>this.#l.add(t,i),removeBroadcastListener:(t,i)=>this.#l.remove(t,i),isViewConfiguredVisible:this.viewVisibilityPredicate,isViewSpec:t=>this.viewFactory.isViewSpec(t),createOrImportViewWithContext:(t,i,r,s,o,a)=>this.viewFactory.createOrImportView(i,t,r,s,o,a),highlightView:RI(this.container)})}#w(e,t){if(e==="keyup")return!0;const i=document.activeElement;return i&&i!==document.body?this.container.contains(i):this.container.matches(":hover")}async#y(e){const t=this.spec;t.datasets&&this.registerNamedDataProvider(i=>t.datasets[i]),this.viewRoot=await e.createOrImportView(t,null,null,Uw),this.#i.set(this.viewRoot,"loading"),this.#u.style.flexGrow=this.viewRoot.getSize().height.grow>0?"1":"0",this.#f(),wR(this.viewRoot),Aw(this.viewRoot),this.#m(),this.#r.invalidateSize(),this.#t=new bM({viewRoot:this.viewRoot,glHelper:this.#r,getBackground:()=>this.spec.background,broadcast:this.broadcast.bind(this),onLayoutComputed:()=>this.#n.updateLayout()}),e.requestLayoutReflow=this.computeLayout.bind(this),this.#A()}#m(){const e=ER(this.viewRoot);if(e.length)for(const t of e)console.warn("Selector constraints warning:",t.message)}#C(e){e.requestLayoutReflow=this.computeLayout.bind(this),this.viewRoot.visit(t=>Ns(t,"size")),this.#r.invalidateSize(),this.#o=new CM({viewRoot:this.viewRoot,glHelper:this.#r,tooltip:this.tooltip,animator:this.animator,emitEvent:this.#c.emit.bind(this.#c),tooltipHandlers:this.tooltipHandlers,renderPickingFramebuffer:this.renderPickingFramebuffer.bind(this),getDevicePixelRatio:()=>this.dpr})}async launch(){let e=!1;try{return this.#h(),await this.#d(),this.registerMouseEvents(),this.computeLayout(),this.animator.requestRender(),e=!0,!0}catch(t){const i=`${t.view?`At "${t.view.getPathString()}": `:""}${t.toString()}`;return console.error(t.stack),this.options.onError?.(t,this.container)||DI(this.container,i),this.viewRoot&&this.#i.set(this.viewRoot,"error",i),!1}finally{this.#u.classList.remove("loading"),e&&this.viewRoot&&this.#i.set(this.viewRoot,"complete")}}async initializeVisibleViewData(){this.viewRoot&&(await H8(this.viewRoot,this.viewRoot.context.dataFlow,this.viewRoot.context.fontManager),this.viewRoot._invalidateCacheByPrefix("size","progeny"),this.#r.invalidateSize(),this.computeLayout(),this.animator.requestRender())}registerMouseEvents(){this.#o.registerMouseEvents()}updateTooltip(e,t){this.#o.updateTooltip(e,t)}exportCanvas(e,t,i,r="white"){const s=IM({glHelper:this.#r,viewRoot:this.viewRoot,logicalWidth:e,logicalHeight:t,devicePixelRatio:i,clearColor:r});return this.computeLayout(),this.renderAll(),s}getLogicalCanvasSize(){return this.#r.getLogicalCanvasSize()}computeLayout(){this.#t.computeLayout()}renderAll(){this.#t.renderAll()}renderPickingFramebuffer(){this.#t.renderPickingFramebuffer()}getSearchableViews(){const e=[];return this.viewRoot.visit(t=>{t instanceof tt&&t.getSearchAccessors().length>0&&e.push(t)}),e}getNamedScaleResolutions(){const e=new Map;return this.viewRoot.visit(t=>{for(const i of Object.values(t.resolutions.scale))i.name&&e.set(i.name,i)}),e}}async function vM(n,e,t={}){let i;if(le(n)){if(i=document.querySelector(n),!i)throw new Error(`No such element: ${n}`)}else if(n instanceof HTMLElement)i=n;else throw new Error(`Invalid element: ${n}`);let r;try{const s=ze(e)?e:await QM(e);if(s.baseUrl??="",s.width??="container",s.padding??=10,i==document.body){const o=document.createElement("div");o.style.position="fixed",o.style.inset="0",o.style.overflow="hidden",i.appendChild(o),i=o}r=new BM(i,s,t),SM(r,t),await r.launch()}catch(s){i.innerText=s.toString(),console.error(s)}return{finalize(){for(r.destroy();i.firstChild;)i.firstChild.remove()},addEventListener(s,o){r.addEventListener(s,o)},removeEventListener(s,o){r.removeEventListener(s,o)},getScaleResolutionByName(s){return r.getNamedScaleResolutions().get(s)},updateNamedData:r.updateNamedData.bind(r),exportCanvas:r.exportCanvas.bind(r)}}function SM(n,e){e.namedDataProvider&&n.registerNamedDataProvider(e.namedDataProvider)}async function QM(n){let e;try{e=await Rm(n)}catch(t){throw new Error(`Could not load or parse configuration: ${n}, reason: ${t.message}`)}if(!e.baseUrl){const t=n.match(/^[^?#]*\//);e.baseUrl=t&&t[0]||"./"}return e}const DM=n=>n.strings===void 0;const $s=(n,e)=>{const t=n._$AN;if(t===void 0)return!1;for(const i of t)i._$AO?.(e,!1),$s(i,e);return!0},ic=n=>{let e,t;do{if((e=n._$AM)===void 0)break;t=e._$AN,t.delete(n),n=e}while(t?.size===0)},Hw=n=>{for(let e;e=n._$AM;n=e){let t=e._$AN;if(t===void 0)e._$AN=t=new Set;else if(t.has(n))break;t.add(n),RM(e)}};function kM(n){this._$AN!==void 0?(ic(this),this._$AM=n,Hw(this)):this._$AM=n}function FM(n,e=!1,t=0){const i=this._$AH,r=this._$AN;if(r!==void 0&&r.size!==0)if(e)if(Array.isArray(i))for(let s=t;s<i.length;s++)$s(i[s],!1),ic(i[s]);else i!=null&&($s(i,!1),ic(i));else $s(this,n)}const RM=n=>{n.type==nd.CHILD&&(n._$AP??=FM,n._$AQ??=kM)};class MM extends rd{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,i){super._$AT(e,t,i),Hw(this),this.isConnected=e._$AU}_$AO(e,t=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),t&&($s(this,e),ic(this))}setValue(e){if(DM(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}const NM=()=>new TM;class TM{}const Uf=new WeakMap,PM=id(class extends MM{render(n){return de}update(n,[e]){const t=e!==this.G;return t&&this.G!==void 0&&this.rt(void 0),(t||this.lt!==this.ct)&&(this.G=e,this.ht=n.options?.host,this.rt(this.ct=n.element)),de}rt(n){if(this.isConnected||(n=void 0),typeof this.G=="function"){const e=this.ht??globalThis;let t=Uf.get(e);t===void 0&&(t=new WeakMap,Uf.set(e,t)),t.get(this.G)!==void 0&&this.G.call(this.ht,void 0),t.set(this.G,n),n!==void 0&&this.G.call(this.ht,n)}else this.G.value=n}get lt(){return typeof this.G=="function"?Uf.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});function _w(){const n=document.querySelector("meta[name='base_url']").getAttribute("content");return n||console.error('No <meta name="base_url" ...> found!'),n}async function LM(n,e){const i=`${_w()}/data/`;try{e.baseUrl=e.baseUrl||i,await vM(n,e,{bare:!0})}catch(r){const s=document.createElement("pre");s.innerText=r.toString(),n.appendChild(s)}}class Vw extends Vr{static get styles(){return Gx`
            .show-spec {
                font-size: 70%;
                text-align: center;
            }

            .show-spec a {
                color: #3f51b5;
                text-decoration: none;
            }
        `}static get properties(){return{height:{type:String},specHidden:{type:Boolean}}}constructor(){super(),this.height=300,this.specHidden=!1,this.embedRef=NM()}render(){return oe`
            <link rel="stylesheet" href=${_w()+"/app/style.css"} />
            <div
                class="embed-container"
                style=${Jo({height:this.height+"px"})}
                ${PM(this.embedRef)}
            ></div>
            ${this.specHidden?oe`
                      <div class="show-spec">
                          <a
                              href="#"
                              @click=${e=>{this.specHidden=!1,e.preventDefault()}}
                              >Show specification</a
                          >
                      </div>
                  `:de}

            <div
                class="embed-spec"
                style=${Jo({display:this.specHidden?"none":"block"})}
            >
                <slot></slot>
            </div>
        `}firstUpdated(){const e=this.shadowRoot.querySelector("slot").assignedNodes().filter(t=>t instanceof HTMLElement)[0]?.textContent;if(e){const t=new IntersectionObserver(i=>{i.forEach(r=>{if(r.isIntersecting){const s=r.target;LM(s,JSON.parse(e)),t.unobserve(s)}})});setTimeout(()=>t.observe(this.embedRef.value),80)}}}customElements.define("genome-spy-doc-embed",Vw);class OM{constructor(e){this.blob=e}async read(e,t=0){if(!e)return new Uint8Array(0);const i=t,r=i+e,s=this.blob.slice(i,r);return s.bytes?s.bytes():new Uint8Array(await s.arrayBuffer())}async readFile(e){const t=typeof e=="string"?e:e?.encoding;if(t==="utf8")return this.blob.text();if(t)throw new Error(`unsupported encoding: ${t}`);return this.blob.bytes?this.blob.bytes():new Uint8Array(await this.blob.arrayBuffer())}async stat(){return{size:this.blob.size}}async close(){}}function UM(n){return(typeof n=="object"&&n!==null&&"message"in n?n.message:`${n}`).replace(/\.$/,"")}class Ht{constructor(e,t={}){this.baseOverrides={},this.url=e;const i=t.fetch||globalThis.fetch.bind(globalThis);t.overrides&&(this.baseOverrides=t.overrides),this.fetchImplementation=i}async fetch(e,t){const i=s=>new Error(`${UM(s)} fetching ${e}`,{cause:s});let r;try{r=await this.fetchImplementation(e,t)}catch(s){if(`${s}`.includes("Failed to fetch")){console.warn(`generic-filehandle: refetching ${e} to attempt to work around chrome CORS header caching bug`);try{r=await this.fetchImplementation(e,{...t,cache:"reload"})}catch(o){throw i(o)}}else throw i(s)}return r}async read(e,t,i={}){if(e===0)return new Uint8Array(0);const{headers:r={},signal:s,overrides:o={}}=i;e<1/0?r.range=`bytes=${t}-${t+e-1}`:e===1/0&&t!==0&&(r.range=`bytes=${t}-`);const a=await this.fetch(this.url,{...this.baseOverrides,...o,headers:{...this.baseOverrides.headers,...o.headers,...r},method:"GET",redirect:"follow",mode:"cors",signal:s});if(!a.ok)throw new Error(`HTTP ${a.status} fetching ${this.url}`);if(a.status===200&&t===0||a.status===206){const l=a.headers.get("content-range"),c=/\/(\d+)$/.exec(l||"");c?.[1]&&(this._stat={size:parseInt(c[1],10)});const u=a.bytes?await a.bytes():new Uint8Array(await a.arrayBuffer());return u.byteLength<=e?u:u.subarray(0,e)}throw new Error(a.status===200?`${this.url} fetch returned status 200, expected 206`:`HTTP ${a.status} fetching ${this.url}`)}async readFile(e={}){let t,i;if(typeof e=="string")t=e,i={};else{t=e.encoding;const{encoding:l,...c}=e;i=c}const{headers:r={},signal:s,overrides:o={}}=i,a=await this.fetch(this.url,{...this.baseOverrides,...o,headers:{...this.baseOverrides.headers,...o.headers,...r},method:"GET",redirect:"follow",mode:"cors",signal:s});if(!a.ok)throw new Error(`HTTP ${a.status} fetching ${this.url}`);if(t==="utf8")return a.text();if(t)throw new Error(`unsupported encoding: ${t}`);return a.bytes?a.bytes():new Uint8Array(await a.arrayBuffer())}async stat(){if(!this._stat&&(await this.read(10,0),!this._stat))throw new Error(`unable to determine size of file at ${this.url}`);return this._stat}async close(){}}class We{readFile(){throw new Error("unimplemented")}read(){throw new Error("unimplemented")}close(){throw new Error("unimplemented")}}const eo=Object.freeze(Object.defineProperty({__proto__:null,BlobFile:OM,LocalFile:We,RemoteFile:Ht},Symbol.toStringTag,{value:"Module"})),Yw=65536,GM=Yw*Yw;function Gf(n,e=0){const t=n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24;return((n[e+4]|n[e+5]<<8|n[e+6]<<16|n[e+7]<<24)>>>0)*GM+(t>>>0)}const rc=1;function Jw(n,e,t){const i=e[rc],r=t?t[rc]:1/0;return i<=n&&r>n?0:i<n?-1:1}class zM{filehandle;index;constructor({filehandle:e}){this.filehandle=e}_getIndex(){return this.index||(this.index=this._readIndex().catch(e=>{throw this.index=void 0,e})),this.index}async _readIndex(){const e=await this.filehandle.read(8,0),t=Gf(e);if(!t)return[[0,0]];const i=new Array(t+1);i[0]=[0,0];const r=16*t;if(r>Number.MAX_SAFE_INTEGER)throw new TypeError("integer overflow");const s=await this.filehandle.read(r,8);for(let o=0;o<t;o+=1){const a=Gf(s,o*16),l=Gf(s,o*16+8);i[o+1]=[a,l]}return i}async getLastBlock(){return(await this._getIndex()).at(-1)}async getRelevantBlocksForRead(e,t){const i=t+e;if(e===0)return[];const r=await this._getIndex(),s=[];let o=0,a=r.length-1,l=Math.floor(r.length/2),c=Jw(t,r[l],r[l+1]);for(;c!==0;)c>0?a=l-1:c<0&&(o=l+1),l=Math.ceil((a-o)/2)+o,c=Jw(t,r[l],r[l+1]);s.push(r[l]);let u=l+1;for(;u<r.length&&(s.push(r[u]),!(r[u][rc]>=i));u+=1);return s[s.length-1][rc]<i&&s.push([]),s}}var Kw=0,zf=2,sc=4,wi=0,oc=1,HM=2,_M=-5;function VM(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function YM(n){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(var i in t)VM(t,i)&&(n[i]=t[i])}}return n}function qw(n,e){return n.length===e?n:n.subarray?n.subarray(0,e):(n.length=e,n)}var to={arraySet:function(n,e,t,i,r){if(e.subarray&&n.subarray){n.set(e.subarray(t,t+i),r);return}for(var s=0;s<i;s++)n[r+s]=e[t+s]},flattenChunks:function(n){var e,t,i,r,s,o;for(i=0,e=0,t=n.length;e<t;e++)i+=n[e].length;for(o=new Uint8Array(i),r=0,e=0,t=n.length;e<t;e++)s=n[e],o.set(s,r),r+=s.length;return o},Buf8:function(n){return new Uint8Array(n)},Buf16:function(n){return new Uint16Array(n)},Buf32:function(n){return new Int32Array(n)}},no={arraySet:function(n,e,t,i,r){for(var s=0;s<i;s++)n[r+s]=e[t+s]},flattenChunks:function(n){return[].concat.apply([],n)},Buf8:function(n){return new Array(n)},Buf16:function(n){return new Array(n)},Buf32:function(n){return new Array(n)}};let cr=()=>{const n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";return cr=()=>n,n},Ln=(n,e,t,i,r)=>(Ln=cr()?to.arraySet:no.arraySet,Ln(n,e,t,i,r)),Hf=n=>(Hf=cr()?to.flattenChunks:no.flattenChunks,Hf(n)),lr=n=>(lr=cr()?to.Buf8:no.Buf8,lr(n)),ur=n=>(ur=cr()?to.Buf16:no.Buf16,ur(n)),fr=n=>(fr=cr()?to.Buf32:no.Buf32,fr(n)),jw=function(){let n=!0;try{String.fromCharCode.apply(null,[0])}catch{n=!1}return jw=()=>n,n},Ww=function(){let n=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}return Ww=()=>n,n},_f=function(n){for(var e=lr(256),t=0;t<256;t++)e[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;return e[254]=e[254]=1,_f=i=>e[i],e[n]};function Xw(n){var e,t,i,r,s,o=n.length,a=0;for(r=0;r<o;r++)t=n.charCodeAt(r),(t&64512)===55296&&r+1<o&&(i=n.charCodeAt(r+1),(i&64512)===56320&&(t=65536+(t-55296<<10)+(i-56320),r++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),s=0,r=0;s<a;r++)t=n.charCodeAt(r),(t&64512)===55296&&r+1<o&&(i=n.charCodeAt(r+1),(i&64512)===56320&&(t=65536+(t-55296<<10)+(i-56320),r++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e}function JM(n,e){if(e<65534&&(n.subarray&&Ww()||!n.subarray&&jw()))return String.fromCharCode.apply(null,qw(n,e));for(var t="",i=0;i<e;i++)t+=String.fromCharCode(n[i]);return t}function KM(n){for(var e=new Uint8Array(n.length),t=0,i=e.length;t<i;t++)e[t]=n.charCodeAt(t);return e}function qM(n,e){var t,i,r,s,o=e||n.length,a=new Array(o*2);for(i=0,t=0;t<o;){if(r=n[t++],r<128){a[i++]=r;continue}if(s=_f(r),s>4){a[i++]=65533,t+=s-1;continue}for(r&=s===2?31:s===3?15:7;s>1&&t<o;)r=r<<6|n[t++]&63,s--;if(s>1){a[i++]=65533;continue}r<65536?a[i++]=r:(r-=65536,a[i++]=55296|r>>10&1023,a[i++]=56320|r&1023)}return JM(a,i)}function jM(n,e){var t;for(e=e||n.length,e>n.length&&(e=n.length),t=e-1;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+_f(n[t])>e?t:e}function WM(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}function Vf(n,e,t,i){for(var r=n&65535|0,s=n>>>16&65535|0,o=0;t!==0;){o=t>2e3?2e3:t,t-=o;do r=r+e[i++]|0,s=s+r|0;while(--o);r%=65521,s%=65521}return r|s<<16|0}function XM(){for(var n,e=[],t=0;t<256;t++){n=t;for(var i=0;i<8;i++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e}let Zw=function(){const n=XM();return Zw=()=>n,n};function _t(n,e,t,i){var r=Zw(),s=i+t;n^=-1;for(var o=i;o<s;o++)n=n>>>8^r[(n^e[o])&255];return n^-1}var ac=30,ZM=12;function $M(n,e){var t,i,r,s,o,a,l,c,u,f,h,A,d,g,p,m,y,C,w,E,I,b,S,Q,v;t=n.state,i=n.next_in,Q=n.input,r=i+(n.avail_in-5),s=n.next_out,v=n.output,o=s-(e-n.avail_out),a=s+(n.avail_out-257),l=t.dmax,c=t.wsize,u=t.whave,f=t.wnext,h=t.window,A=t.hold,d=t.bits,g=t.lencode,p=t.distcode,m=(1<<t.lenbits)-1,y=(1<<t.distbits)-1;e:do{d<15&&(A+=Q[i++]<<d,d+=8,A+=Q[i++]<<d,d+=8),C=g[A&m];t:for(;;){if(w=C>>>24,A>>>=w,d-=w,w=C>>>16&255,w===0)v[s++]=C&65535;else if(w&16){E=C&65535,w&=15,w&&(d<w&&(A+=Q[i++]<<d,d+=8),E+=A&(1<<w)-1,A>>>=w,d-=w),d<15&&(A+=Q[i++]<<d,d+=8,A+=Q[i++]<<d,d+=8),C=p[A&y];n:for(;;){if(w=C>>>24,A>>>=w,d-=w,w=C>>>16&255,w&16){if(I=C&65535,w&=15,d<w&&(A+=Q[i++]<<d,d+=8,d<w&&(A+=Q[i++]<<d,d+=8)),I+=A&(1<<w)-1,I>l){n.msg="invalid distance too far back",t.mode=ac;break e}if(A>>>=w,d-=w,w=s-o,I>w){if(w=I-w,w>u&&t.sane){n.msg="invalid distance too far back",t.mode=ac;break e}if(b=0,S=h,f===0){if(b+=c-w,w<E){E-=w;do v[s++]=h[b++];while(--w);b=s-I,S=v}}else if(f<w){if(b+=c+f-w,w-=f,w<E){E-=w;do v[s++]=h[b++];while(--w);if(b=0,f<E){w=f,E-=w;do v[s++]=h[b++];while(--w);b=s-I,S=v}}}else if(b+=f-w,w<E){E-=w;do v[s++]=h[b++];while(--w);b=s-I,S=v}for(;E>2;)v[s++]=S[b++],v[s++]=S[b++],v[s++]=S[b++],E-=3;E&&(v[s++]=S[b++],E>1&&(v[s++]=S[b++]))}else{b=s-I;do v[s++]=v[b++],v[s++]=v[b++],v[s++]=v[b++],E-=3;while(E>2);E&&(v[s++]=v[b++],E>1&&(v[s++]=v[b++]))}}else if((w&64)===0){C=p[(C&65535)+(A&(1<<w)-1)];continue n}else{n.msg="invalid distance code",t.mode=ac;break e}break}}else if((w&64)===0){C=g[(C&65535)+(A&(1<<w)-1)];continue t}else if(w&32){t.mode=ZM;break e}else{n.msg="invalid literal/length code",t.mode=ac;break e}break}}while(i<r&&s<a);E=d>>3,i-=E,d-=E<<3,A&=(1<<d)-1,n.next_in=i,n.next_out=s,n.avail_in=i<r?5+(r-i):5-(i-r),n.avail_out=s<a?257+(a-s):257-(s-a),t.hold=A,t.bits=d}var Ar=15,$w=852,ey=592,ty=0,Yf=1,ny=2,eN=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],tN=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],nN=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],iN=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function io(n,e,t,i,r,s,o,a){var l=a.bits,c=0,u=0,f=0,h=0,A=0,d=0,g=0,p=0,m=0,y=0,C,w,E,I,b,S=null,Q=0,v,F=ur(Ar+1),R=ur(Ar+1),N=null,O=0,H,G,V;for(c=0;c<=Ar;c++)F[c]=0;for(u=0;u<i;u++)F[e[t+u]]++;for(A=l,h=Ar;h>=1&&F[h]===0;h--);if(A>h&&(A=h),h===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,a.bits=1,0;for(f=1;f<h&&F[f]===0;f++);for(A<f&&(A=f),p=1,c=1;c<=Ar;c++)if(p<<=1,p-=F[c],p<0)return-1;if(p>0&&(n===ty||h!==1))return-1;for(R[1]=0,c=1;c<Ar;c++)R[c+1]=R[c]+F[c];for(u=0;u<i;u++)e[t+u]!==0&&(o[R[e[t+u]]++]=u);if(n===ty?(S=N=o,v=19):n===Yf?(S=eN,Q-=257,N=tN,O-=257,v=256):(S=nN,N=iN,v=-1),y=0,u=0,c=f,b=s,d=A,g=0,E=-1,m=1<<A,I=m-1,n===Yf&&m>$w||n===ny&&m>ey)return 1;for(;;){H=c-g,o[u]<v?(G=0,V=o[u]):o[u]>v?(G=N[O+o[u]],V=S[Q+o[u]]):(G=96,V=0),C=1<<c-g,w=1<<d,f=w;do w-=C,r[b+(y>>g)+w]=H<<24|G<<16|V|0;while(w!==0);for(C=1<<c-1;y&C;)C>>=1;if(C!==0?(y&=C-1,y+=C):y=0,u++,--F[c]===0){if(c===h)break;c=e[t+o[u]]}if(c>A&&(y&I)!==E){for(g===0&&(g=A),b+=f,d=c-g,p=1<<d;d+g<h&&(p-=F[d+g],!(p<=0));)d++,p<<=1;if(m+=1<<d,n===Yf&&m>$w||n===ny&&m>ey)return 1;E=y&I,r[E]=A<<24|d<<16|b-s|0}}return y!==0&&(r[b+y]=c-g<<24|64<<16|0),a.bits=A,0}var rN=0,iy=1,ry=2,sy=4,yi=0,sN=1,oN=2,mt=-2,oy=-3,ay=-4,aN=-5,cy=8,ly=1,uy=2,fy=3,Ay=4,hy=5,dy=6,gy=7,py=8,my=9,wy=10,cc=11,an=12,Jf=13,yy=14,Kf=15,Cy=16,xy=17,by=18,Ey=19,lc=20,uc=21,Iy=22,By=23,vy=24,Sy=25,Qy=26,qf=27,Dy=28,ky=29,me=30,Fy=31,cN=32,lN=852,uN=592;function Ry(n){return(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24)}function fN(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=ur(320),this.work=ur(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function AN(n){var e;return!n||!n.state?mt:(e=n.state,n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=ly,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=fr(lN),e.distcode=e.distdyn=fr(uN),e.sane=1,e.back=-1,yi)}function hN(n){var e;return!n||!n.state?mt:(e=n.state,e.wsize=0,e.whave=0,e.wnext=0,AN(n))}function dN(n,e){var t,i;return!n||!n.state||(i=n.state,e<0?(t=0,e=-e):(t=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?mt:(i.window!==null&&i.wbits!==e&&(i.window=null),i.wrap=t,i.wbits=e,hN(n))}function gN(n,e){var t,i;return n?(i=new fN,n.state=i,i.window=null,t=dN(n,e),t!==yi&&(n.state=null),t):mt}var My=!0,jf,Wf;function pN(n){if(My){var e;for(jf=fr(512),Wf=fr(32),e=0;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(io(iy,n.lens,0,288,jf,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;io(ry,n.lens,0,32,Wf,0,n.work,{bits:5}),My=!1}n.lencode=jf,n.lenbits=9,n.distcode=Wf,n.distbits=5}function Ny(n,e,t,i){var r,s=n.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=lr(s.wsize)),i>=s.wsize?(Ln(s.window,e,t-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),Ln(s.window,e,t-i,r,s.wnext),i-=r,i?(Ln(s.window,e,t-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0}function mN(n,e){var t,i,r,s,o,a,l,c,u,f,h,A,d,g,p=0,m,y,C,w,E,I,b,S,Q=lr(4),v,F,R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!n||!n.state||!n.output||!n.input&&n.avail_in!==0)return mt;t=n.state,t.mode===an&&(t.mode=Jf),o=n.next_out,r=n.output,l=n.avail_out,s=n.next_in,i=n.input,a=n.avail_in,c=t.hold,u=t.bits,f=a,h=l,S=yi;e:for(;;)switch(t.mode){case ly:if(t.wrap===0){t.mode=Jf;break}for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(t.wrap&2&&c===35615){t.check=0,Q[0]=c&255,Q[1]=c>>>8&255,t.check=_t(t.check,Q,2,0),c=0,u=0,t.mode=uy;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((c&255)<<8)+(c>>8))%31){n.msg="incorrect header check",t.mode=me;break}if((c&15)!==cy){n.msg="unknown compression method",t.mode=me;break}if(c>>>=4,u-=4,b=(c&15)+8,t.wbits===0)t.wbits=b;else if(b>t.wbits){n.msg="invalid window size",t.mode=me;break}t.dmax=1<<b,n.adler=t.check=1,t.mode=c&512?wy:an,c=0,u=0;break;case uy:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(t.flags=c,(t.flags&255)!==cy){n.msg="unknown compression method",t.mode=me;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=me;break}t.head&&(t.head.text=c>>8&1),t.flags&512&&(Q[0]=c&255,Q[1]=c>>>8&255,t.check=_t(t.check,Q,2,0)),c=0,u=0,t.mode=fy;case fy:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.head&&(t.head.time=c),t.flags&512&&(Q[0]=c&255,Q[1]=c>>>8&255,Q[2]=c>>>16&255,Q[3]=c>>>24&255,t.check=_t(t.check,Q,4,0)),c=0,u=0,t.mode=Ay;case Ay:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.head&&(t.head.xflags=c&255,t.head.os=c>>8),t.flags&512&&(Q[0]=c&255,Q[1]=c>>>8&255,t.check=_t(t.check,Q,2,0)),c=0,u=0,t.mode=hy;case hy:if(t.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.length=c,t.head&&(t.head.extra_len=c),t.flags&512&&(Q[0]=c&255,Q[1]=c>>>8&255,t.check=_t(t.check,Q,2,0)),c=0,u=0}else t.head&&(t.head.extra=null);t.mode=dy;case dy:if(t.flags&1024&&(A=t.length,A>a&&(A=a),A&&(t.head&&(b=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),Ln(t.head.extra,i,s,A,b)),t.flags&512&&(t.check=_t(t.check,i,A,s)),a-=A,s+=A,t.length-=A),t.length))break e;t.length=0,t.mode=gy;case gy:if(t.flags&2048){if(a===0)break e;A=0;do b=i[s+A++],t.head&&b&&t.length<65536&&(t.head.name+=String.fromCharCode(b));while(b&&A<a);if(t.flags&512&&(t.check=_t(t.check,i,A,s)),a-=A,s+=A,b)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=py;case py:if(t.flags&4096){if(a===0)break e;A=0;do b=i[s+A++],t.head&&b&&t.length<65536&&(t.head.comment+=String.fromCharCode(b));while(b&&A<a);if(t.flags&512&&(t.check=_t(t.check,i,A,s)),a-=A,s+=A,b)break e}else t.head&&(t.head.comment=null);t.mode=my;case my:if(t.flags&512){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(t.check&65535)){n.msg="header crc mismatch",t.mode=me;break}c=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=an;break;case wy:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.adler=t.check=Ry(c),c=0,u=0,t.mode=cc;case cc:if(t.havedict===0)return n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,t.hold=c,t.bits=u,oN;n.adler=t.check=1,t.mode=an;case an:case Jf:if(t.last){c>>>=u&7,u-=u&7,t.mode=qf;break}for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}switch(t.last=c&1,c>>>=1,u-=1,c&3){case 0:t.mode=yy;break;case 1:pN(t),t.mode=lc;break;case 2:t.mode=xy;break;case 3:n.msg="invalid block type",t.mode=me}c>>>=2,u-=2;break;case yy:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){n.msg="invalid stored block lengths",t.mode=me;break}t.length=c&65535,c=0,u=0,t.mode=Kf;case Kf:t.mode=Cy;case Cy:if(A=t.length,A){if(A>a&&(A=a),A>l&&(A=l),A===0)break e;Ln(r,i,s,A,o),a-=A,s+=A,l-=A,o+=A,t.length-=A;break}t.mode=an;break;case xy:for(;u<14;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(t.nlen=(c&31)+257,c>>>=5,u-=5,t.ndist=(c&31)+1,c>>>=5,u-=5,t.ncode=(c&15)+4,c>>>=4,u-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=me;break}t.have=0,t.mode=by;case by:for(;t.have<t.ncode;){for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.lens[R[t.have++]]=c&7,c>>>=3,u-=3}for(;t.have<19;)t.lens[R[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,v={bits:t.lenbits},S=io(rN,t.lens,0,19,t.lencode,0,t.work,v),t.lenbits=v.bits,S){n.msg="invalid code lengths set",t.mode=me;break}t.have=0,t.mode=Ey;case Ey:for(;t.have<t.nlen+t.ndist;){for(;p=t.lencode[c&(1<<t.lenbits)-1],m=p>>>24,y=p>>>16&255,C=p&65535,!(m<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(C<16)c>>>=m,u-=m,t.lens[t.have++]=C;else{if(C===16){for(F=m+2;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c>>>=m,u-=m,t.have===0){n.msg="invalid bit length repeat",t.mode=me;break}b=t.lens[t.have-1],A=3+(c&3),c>>>=2,u-=2}else if(C===17){for(F=m+3;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=m,u-=m,b=0,A=3+(c&7),c>>>=3,u-=3}else{for(F=m+7;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=m,u-=m,b=0,A=11+(c&127),c>>>=7,u-=7}if(t.have+A>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=me;break}for(;A--;)t.lens[t.have++]=b}}if(t.mode===me)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=me;break}if(t.lenbits=9,v={bits:t.lenbits},S=io(iy,t.lens,0,t.nlen,t.lencode,0,t.work,v),t.lenbits=v.bits,S){n.msg="invalid literal/lengths set",t.mode=me;break}if(t.distbits=6,t.distcode=t.distdyn,v={bits:t.distbits},S=io(ry,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,v),t.distbits=v.bits,S){n.msg="invalid distances set",t.mode=me;break}t.mode=lc;case lc:t.mode=uc;case uc:if(a>=6&&l>=258){n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,t.hold=c,t.bits=u,$M(n,h),o=n.next_out,r=n.output,l=n.avail_out,s=n.next_in,i=n.input,a=n.avail_in,c=t.hold,u=t.bits,t.mode===an&&(t.back=-1);break}for(t.back=0;p=t.lencode[c&(1<<t.lenbits)-1],m=p>>>24,y=p>>>16&255,C=p&65535,!(m<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(y&&(y&240)===0){for(w=m,E=y,I=C;p=t.lencode[I+((c&(1<<w+E)-1)>>w)],m=p>>>24,y=p>>>16&255,C=p&65535,!(w+m<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=w,u-=w,t.back+=w}if(c>>>=m,u-=m,t.back+=m,t.length=C,y===0){t.mode=Qy;break}if(y&32){t.back=-1,t.mode=an;break}if(y&64){n.msg="invalid literal/length code",t.mode=me;break}t.extra=y&15,t.mode=Iy;case Iy:if(t.extra){for(F=t.extra;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.length+=c&(1<<t.extra)-1,c>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=By;case By:for(;p=t.distcode[c&(1<<t.distbits)-1],m=p>>>24,y=p>>>16&255,C=p&65535,!(m<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((y&240)===0){for(w=m,E=y,I=C;p=t.distcode[I+((c&(1<<w+E)-1)>>w)],m=p>>>24,y=p>>>16&255,C=p&65535,!(w+m<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=w,u-=w,t.back+=w}if(c>>>=m,u-=m,t.back+=m,y&64){n.msg="invalid distance code",t.mode=me;break}t.offset=C,t.extra=y&15,t.mode=vy;case vy:if(t.extra){for(F=t.extra;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.offset+=c&(1<<t.extra)-1,c>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=me;break}t.mode=Sy;case Sy:if(l===0)break e;if(A=h-l,t.offset>A){if(A=t.offset-A,A>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=me;break}A>t.wnext?(A-=t.wnext,d=t.wsize-A):d=t.wnext-A,A>t.length&&(A=t.length),g=t.window}else g=r,d=o-t.offset,A=t.length;A>l&&(A=l),l-=A,t.length-=A;do r[o++]=g[d++];while(--A);t.length===0&&(t.mode=uc);break;case Qy:if(l===0)break e;r[o++]=t.length,l--,t.mode=uc;break;case qf:if(t.wrap){for(;u<32;){if(a===0)break e;a--,c|=i[s++]<<u,u+=8}if(h-=l,n.total_out+=h,t.total+=h,h&&(n.adler=t.check=t.flags?_t(t.check,r,h,o-h):Vf(t.check,r,h,o-h)),h=l,(t.flags?c:Ry(c))!==t.check){n.msg="incorrect data check",t.mode=me;break}c=0,u=0}t.mode=Dy;case Dy:if(t.wrap&&t.flags){for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=me;break}c=0,u=0}t.mode=ky;case ky:S=sN;break e;case me:S=oy;break e;case Fy:return ay;case cN:default:return mt}return n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,t.hold=c,t.bits=u,(t.wsize||h!==n.avail_out&&t.mode<me&&(t.mode<qf||e!==sy))&&Ny(n,n.output,n.next_out,h-n.avail_out),f-=n.avail_in,h-=n.avail_out,n.total_in+=f,n.total_out+=h,t.total+=h,t.wrap&&h&&(n.adler=t.check=t.flags?_t(t.check,r,h,n.next_out-h):Vf(t.check,r,h,n.next_out-h)),n.data_type=t.bits+(t.last?64:0)+(t.mode===an?128:0)+(t.mode===lc||t.mode===Kf?256:0),(f===0&&h===0||e===sy)&&S===yi&&(S=aN),S}function wN(n){if(!n||!n.state)return mt;var e=n.state;return e.window&&(e.window=null),n.state=null,yi}function yN(n,e){var t;return!n||!n.state||(t=n.state,(t.wrap&2)===0)?mt:(t.head=e,e.done=!1,yi)}function Ty(n,e){var t=e.length,i,r,s;return!n||!n.state||(i=n.state,i.wrap!==0&&i.mode!==cc)?mt:i.mode===cc&&(r=1,r=Vf(r,e,t,0),r!==i.check)?oy:(s=Ny(n,e,t,t),s?(i.mode=Fy,ay):(i.havedict=1,yi))}const Xf={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function CN(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Zf=Object.prototype.toString;let Py=class UA{constructor(e){if(!(this instanceof UA))return new UA(e);this.options=YM({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new CN,this.strm.avail_out=0;var i=gN(this.strm,t.windowBits);if(i!==wi)throw new Error(Xf[i]);if(this.header=new WM,yN(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Xw(t.dictionary):Zf.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(i=Ty(this.strm,t.dictionary),i!==wi)))throw new Error(Xf[i])}push(e,t){var i=this.strm,r=this.options.chunkSize,s=this.options.dictionary,o,a,l,c,u,f,h=!1;if(this.ended)return!1;a=t===~~t?t:t===!0?sc:Kw,typeof e=="string"?i.input=KM(e):Zf.call(e)==="[object ArrayBuffer]"?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(i.avail_out===0&&(i.output=lr(r),i.next_out=0,i.avail_out=r),o=mN(i,Kw),o===HM&&s&&(typeof s=="string"?f=Xw(s):Zf.call(s)==="[object ArrayBuffer]"?f=new Uint8Array(s):f=s,o=Ty(this.strm,f)),o===_M&&h===!0&&(o=wi,h=!1),o!==oc&&o!==wi)return this.onEnd(o),this.ended=!0,!1;i.next_out&&(i.avail_out===0||o===oc||i.avail_in===0&&(a===sc||a===zf))&&(this.options.to==="string"?(l=jM(i.output,i.next_out),c=i.next_out-l,u=qM(i.output,l),i.next_out=c,i.avail_out=r-c,c&&Ln(i.output,i.output,l,c,0),this.onData(u)):this.onData(qw(i.output,i.next_out))),i.avail_in===0&&i.avail_out===0&&(h=!0)}while((i.avail_in>0||i.avail_out===0)&&o!==oc);return o===oc&&(a=sc),a===sc?(o=wN(this.strm),this.onEnd(o),this.ended=!0,o===wi):(a===zf&&(this.onEnd(wi),i.avail_out=0),!0)}onData(e){this.chunks.push(e)}onEnd(e){e===wi&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Hf(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg}};function xN(n,e){var t=new Py(e);if(t.push(n,!0),t.err)throw t.msg||Xf[t.err];return t.result}function bN(n,e){return e=e||{},e.raw=!0,xN(n,e)}function EN(n){let e=0;for(const t of n)e+=t.length;return e}function Ly(n,e){const t=new Uint8Array(e??EN(n));let i=0;for(const r of n)t.set(r,i),i+=r.length;return t}async function IN(n){try{let e,t=0,i;const r=[];let s=0;do{const o=n.subarray(t);if(i=new Py(void 0),{strm:e}=i,i.push(o,zf),i.err)throw new Error(i.msg);t+=e.next_in;const a=i.result;r.push(a),s+=a.length}while(e.avail_in);return Ly(r,s)}catch(e){throw/incorrect header check/.exec(`${e}`)?new Error("problem decompressing block: incorrect gzip header check"):e}}class Oy{filehandle;gzi;constructor({filehandle:e,gziFilehandle:t}){this.filehandle=e,this.gzi=new zM({filehandle:t})}async _readAndUncompressBlock(e,t){let i=t;i||(i=(await this.filehandle.stat()).size);const r=i-e,s=await this.filehandle.read(r,e);return IN(s)}async read(e,t){const i=await this.gzi.getRelevantBlocksForRead(e,t),r=[];for(let s=0;s<i.length-1;s+=1){const o=await this._readAndUncompressBlock(i[s][0],i[s+1][0]),[,a]=i[s],l=a>=t?0:t-a,c=Math.min(t+e,a+o.length)-a;l>=0&&l<o.length&&r.push(o.subarray(l,c))}return Ly(r)}}function Uy(n,e){return n.offset+n.lineBytes*Math.floor(e/n.lineLength)+e%n.lineLength}async function BN(n,e={}){const t=new TextDecoder("utf8");return Object.fromEntries(t.decode(await n.readFile(e)).split(/\r?\n/).map(i=>i.trim()).filter(i=>!!i).map(i=>i.split("	")).map(i=>{if(i[0]?.startsWith(">"))throw new Error("found > in sequence name, might have supplied FASTA file for the FASTA index");return[i[0],{name:i[0],length:+i[1],start:0,end:+i[1],offset:+i[2],lineLength:+i[3],lineBytes:+i[4]}]}))}class Gy{constructor({fasta:e,fai:t,path:i,faiPath:r}){if(e)this.fasta=e;else if(i)this.fasta=new We(i);else throw new Error("Need to pass filehandle for fasta or path to localfile");if(t)this.fai=t;else if(r)this.fai=new We(r);else if(i)this.fai=new We(`${i}.fai`);else throw new Error("Need to pass filehandle for  or path to localfile")}async _getIndexes(e){return this.indexes||(this.indexes=BN(this.fai,e).catch(t=>{throw this.indexes=void 0,t})),this.indexes}async getSequenceNames(e){return Object.keys(await this._getIndexes(e))}async getSequenceSizes(e){const t={},i=await this._getIndexes(e);for(const r of Object.values(i))t[r.name]=r.length;return t}async getSequenceSize(e,t){return(await this._getIndexes(t))[e]?.length}async hasReferenceSequence(e,t){return!!(await this._getIndexes(t))[e]}async getResiduesByName(e,t,i,r){const s=(await this._getIndexes(r))[e];return s?this._fetchFromIndexEntry(s,t,i,r):void 0}async getSequence(e,t,i,r){return this.getResiduesByName(e,t,i,r)}async _fetchFromIndexEntry(e,t=0,i,r){let s=i;if(t<0)throw new TypeError("regionStart cannot be less than 0");if((s===void 0||s>e.length)&&(s=e.length),t>=s)return"";const o=Uy(e,t),a=Uy(e,s)-o,c=new TextDecoder("utf8").decode(await this.fasta.read(a,o,r)).replace(/\s+/g,"");if(/[^\x20-\x7e]/.test(c.slice(0,1e3)))throw new Error("Non-ASCII characters detected in sequence. The file may be gzip compressed. Use BgzipIndexedFasta for bgzip files, or decompress the file.");return c}}class vN extends Gy{constructor({fasta:e,path:t,fai:i,faiPath:r,gzi:s,gziPath:o}){super({fasta:e,path:t,fai:i,faiPath:r}),e&&s?this.fasta=new Oy({filehandle:e,gziFilehandle:s}):t&&o&&(this.fasta=new Oy({filehandle:new We(t),gziFilehandle:new We(o)}))}}function zy(n){return n.split(">").filter(e=>/\S/.test(e)).map(e=>{const[t,...i]=e.split(`
`),[r,...s]=t.split(" "),o=i.join("").replace(/\s/g,"");return{id:r,description:s.join(" "),sequence:o}})}class SN{constructor({fasta:e,path:t}){if(e)this.fasta=e;else if(t)this.fasta=new We(t);else throw new Error("Need to pass fasta or path");this.data=this.fasta.readFile().then(i=>{const s=new TextDecoder("utf8").decode(i);return zy(s)})}async fetch(e,t,i){const s=(await this.data).find(a=>a.id===e),o=i-t;if(!s)throw new Error(`no sequence with id ${e} exists`);return s.sequence.slice(t,o)}async getSequenceNames(){return(await this.data).map(t=>t.id)}}const QN=Object.freeze(Object.defineProperty({__proto__:null,BgzipIndexedFasta:vN,FetchableSmallFasta:SN,IndexedFasta:Gy,parseSmallFasta:zy},Symbol.toStringTag,{value:"Module"})),Hy=BigInt(32);function DN(n,e,t){const i=+!!t,r=+!t;return BigInt(n.getInt32(e,t)*r+n.getInt32(e+4,t)*i)<<Hy|BigInt(n.getUint32(e,t)*i+n.getUint32(e+4,t)*r)}function kN(n,e,t){const i=n.getUint32(e,t),r=n.getUint32(e+4,t),s=+!!t,o=+!t;return BigInt(i*o+r*s)<<Hy|BigInt(i*s+r*o)}"getBigInt64"in DataView||(DataView.prototype.getBigInt64=function(n,e){return DN(this,n,e)}),"getBigUint64"in DataView||(DataView.prototype.getBigUint64=function(n,e){return kN(this,n,e)});var $f=function(n,e){return $f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])},$f(n,e)};function eA(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");$f(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function FN(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(f){o(f)}}function l(u){try{c(i.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}function _y(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(i=1,r&&(s=c[0]&2?r.return:c[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,c[1])).done)return s;switch(r=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(u){c=[6,u],r=0}finally{i=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function ro(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function tA(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return s}function nA(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return n.concat(s||Array.prototype.slice.call(e))}function hr(n){return this instanceof hr?(this.v=n,this):new hr(n)}function RN(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(A){return function(d){return Promise.resolve(d).then(A,f)}}function a(A,d){i[A]&&(r[A]=function(g){return new Promise(function(p,m){s.push([A,g,p,m])>1||l(A,g)})},d&&(r[A]=d(r[A])))}function l(A,d){try{c(i[A](d))}catch(g){h(s[0][3],g)}}function c(A){A.value instanceof hr?Promise.resolve(A.value.v).then(u,f):h(s[0][2],A)}function u(A){l("next",A)}function f(A){l("throw",A)}function h(A,d){A(d),s.shift(),s.length&&l(s[0][0],s[0][1])}}function MN(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ro=="function"?ro(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),r(a,l,o.done,o.value)})}}function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}typeof SuppressedError=="function"&&SuppressedError;function ke(n){return typeof n=="function"}function Vy(n){var e=function(i){Error.call(i),i.stack=new Error().stack},t=n(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var iA=Vy(function(n){return function(t){n(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(i,r){return r+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function Yy(n,e){if(n){var t=n.indexOf(e);0<=t&&n.splice(t,1)}}var rA=(function(){function n(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var e,t,i,r,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=ro(o),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(g){e={error:g}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var u=this.initialTeardown;if(ke(u))try{u()}catch(g){s=g instanceof iA?g.errors:[g]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var h=ro(f),A=h.next();!A.done;A=h.next()){var d=A.value;try{Ky(d)}catch(g){s=s??[],g instanceof iA?s=nA(nA([],tA(s)),tA(g.errors)):s.push(g)}}}catch(g){i={error:g}}finally{try{A&&!A.done&&(r=h.return)&&r.call(h)}finally{if(i)throw i.error}}}if(s)throw new iA(s)}},n.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)Ky(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},n.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},n.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},n.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Yy(t,e)},n.prototype.remove=function(e){var t=this._finalizers;t&&Yy(t,e),e instanceof n&&e._removeParent(this)},n.EMPTY=(function(){var e=new n;return e.closed=!0,e})(),n})();rA.EMPTY;function Jy(n){return n instanceof rA||n&&"closed"in n&&ke(n.remove)&&ke(n.add)&&ke(n.unsubscribe)}function Ky(n){ke(n)?n():n.unsubscribe()}var NN={Promise:void 0},TN={setTimeout:function(n,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return setTimeout.apply(void 0,nA([n,e],tA(t)))},clearTimeout:function(n){return clearTimeout(n)},delegate:void 0};function qy(n){TN.setTimeout(function(){throw n})}function jy(){}function PN(n){n()}var sA=(function(n){eA(e,n);function e(t){var i=n.call(this)||this;return i.isStopped=!1,t?(i.destination=t,Jy(t)&&t.add(i)):i.destination=UN,i}return e.create=function(t,i,r){return new fc(t,i,r)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e})(rA),LN=(function(){function n(e){this.partialObserver=e}return n.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(i){Ac(i)}},n.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(i){Ac(i)}else Ac(e)},n.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){Ac(t)}},n})(),fc=(function(n){eA(e,n);function e(t,i,r){var s=n.call(this)||this,o;return ke(t)||!t?o={next:t??void 0,error:i??void 0,complete:r??void 0}:o=t,s.destination=new LN(o),s}return e})(sA);function Ac(n){qy(n)}function ON(n){throw n}var UN={closed:!0,next:jy,error:ON,complete:jy},oA=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function Wy(n){return n}function GN(n){return n.length===0?Wy:n.length===1?n[0]:function(t){return n.reduce(function(i,r){return r(i)},t)}}var wt=(function(){function n(e){e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,i){var r=this,s=HN(e)?e:new fc(e,t,i);return PN(function(){var o=r,a=o.operator,l=o.source;s.add(a?a.call(s,l):l?r._subscribe(s):r._trySubscribe(s))}),s},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},n.prototype.forEach=function(e,t){var i=this;return t=Xy(t),new t(function(r,s){var o=new fc({next:function(a){try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});i.subscribe(o)})},n.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},n.prototype[oA]=function(){return this},n.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return GN(e)(this)},n.prototype.toPromise=function(e){var t=this;return e=Xy(e),new e(function(i,r){var s;t.subscribe(function(o){return s=o},function(o){return r(o)},function(){return i(s)})})},n.create=function(e){return new n(e)},n})();function Xy(n){var e;return(e=n??NN.Promise)!==null&&e!==void 0?e:Promise}function zN(n){return n&&ke(n.next)&&ke(n.error)&&ke(n.complete)}function HN(n){return n&&n instanceof sA||zN(n)&&Jy(n)}function _N(n){return ke(n?.lift)}function dr(n){return function(e){if(_N(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function so(n,e,t,i,r){return new VN(n,e,t,i,r)}var VN=(function(n){eA(e,n);function e(t,i,r,s,o,a){var l=n.call(this,t)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=i?function(c){try{i(c)}catch(u){t.error(u)}}:n.prototype._next,l._error=s?function(c){try{s(c)}catch(u){t.error(u)}finally{this.unsubscribe()}}:n.prototype._error,l._complete=r?function(){try{r()}catch(c){t.error(c)}finally{this.unsubscribe()}}:n.prototype._complete,l}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;n.prototype.unsubscribe.call(this),!i&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e})(sA),YN=new wt(function(n){return n.complete()});function JN(n){return n&&ke(n.schedule)}function Zy(n){return n[n.length-1]}function KN(n){return JN(Zy(n))?n.pop():void 0}function qN(n,e){return typeof Zy(n)=="number"?n.pop():e}var $y=(function(n){return n&&typeof n.length=="number"&&typeof n!="function"});function eC(n){return ke(n?.then)}function tC(n){return ke(n[oA])}function nC(n){return Symbol.asyncIterator&&ke(n?.[Symbol.asyncIterator])}function iC(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function jN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var rC=jN();function sC(n){return ke(n?.[rC])}function oC(n){return RN(this,arguments,function(){var t,i,r,s;return _y(this,function(o){switch(o.label){case 0:t=n.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,hr(t.read())];case 3:return i=o.sent(),r=i.value,s=i.done,s?[4,hr(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,hr(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function aC(n){return ke(n?.getReader)}function gr(n){if(n instanceof wt)return n;if(n!=null){if(tC(n))return WN(n);if($y(n))return XN(n);if(eC(n))return ZN(n);if(nC(n))return cC(n);if(sC(n))return $N(n);if(aC(n))return eT(n)}throw iC(n)}function WN(n){return new wt(function(e){var t=n[oA]();if(ke(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function XN(n){return new wt(function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function ZN(n){return new wt(function(e){n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,qy)})}function $N(n){return new wt(function(e){var t,i;try{for(var r=ro(n),s=r.next();!s.done;s=r.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(a){t={error:a}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}e.complete()})}function cC(n){return new wt(function(e){tT(n,e).catch(function(t){return e.error(t)})})}function eT(n){return cC(oC(n))}function tT(n,e){var t,i,r,s;return FN(this,void 0,void 0,function(){var o,a;return _y(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),t=MN(n),l.label=1;case 1:return[4,t.next()];case 2:if(i=l.sent(),!!i.done)return[3,4];if(o=i.value,e.next(o),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),r={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),i&&!i.done&&(s=t.return)?[4,s.call(t)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Ci(n,e,t,i,r){i===void 0&&(i=0),r===void 0&&(r=!1);var s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function lC(n,e){return e===void 0&&(e=0),dr(function(t,i){t.subscribe(so(i,function(r){return Ci(i,n,function(){return i.next(r)},e)},function(){return Ci(i,n,function(){return i.complete()},e)},function(r){return Ci(i,n,function(){return i.error(r)},e)}))})}function uC(n,e){return e===void 0&&(e=0),dr(function(t,i){i.add(n.schedule(function(){return t.subscribe(i)},e))})}function nT(n,e){return gr(n).pipe(uC(e),lC(e))}function iT(n,e){return gr(n).pipe(uC(e),lC(e))}function rT(n,e){return new wt(function(t){var i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function sT(n,e){return new wt(function(t){var i;return Ci(t,e,function(){i=n[rC](),Ci(t,e,function(){var r,s,o;try{r=i.next(),s=r.value,o=r.done}catch(a){t.error(a);return}o?t.complete():t.next(s)},0,!0)}),function(){return ke(i?.return)&&i.return()}})}function fC(n,e){if(!n)throw new Error("Iterable cannot be null");return new wt(function(t){Ci(t,e,function(){var i=n[Symbol.asyncIterator]();Ci(t,e,function(){i.next().then(function(r){r.done?t.complete():t.next(r.value)})},0,!0)})})}function oT(n,e){return fC(oC(n),e)}function aT(n,e){if(n!=null){if(tC(n))return nT(n,e);if($y(n))return rT(n,e);if(eC(n))return iT(n,e);if(nC(n))return fC(n,e);if(sC(n))return sT(n,e);if(aC(n))return oT(n,e)}throw iC(n)}function cT(n,e){return e?aT(n,e):gr(n)}var lT=Vy(function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}});function AC(n,e){return new Promise(function(t,i){var r=new fc({next:function(s){t(s),r.unsubscribe()},error:i,complete:function(){i(new lT)}});n.subscribe(r)})}function hC(n,e){return dr(function(t,i){var r=0;t.subscribe(so(i,function(s){i.next(n.call(e,s,r++))}))})}function uT(n,e,t,i,r,s,o,a){var l=[],c=0,u=0,f=!1,h=function(){f&&!l.length&&!c&&e.complete()},A=function(g){return c<i?d(g):l.push(g)},d=function(g){c++;var p=!1;gr(t(g,u++)).subscribe(so(e,function(m){e.next(m)},function(){p=!0},void 0,function(){if(p)try{c--;for(var m=function(){var y=l.shift();o||d(y)};l.length&&c<i;)m();h()}catch(y){e.error(y)}}))};return n.subscribe(so(e,A,function(){f=!0,h()})),function(){}}function dC(n,e,t){return t===void 0&&(t=1/0),ke(e)?dC(function(i,r){return hC(function(s,o){return e(i,s,r,o)})(gr(n(i,r)))},t):(typeof e=="number"&&(t=e),dr(function(i,r){return uT(i,r,n,t)}))}function fT(n){return n===void 0&&(n=1/0),dC(Wy,n)}function AT(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=KN(n),i=qN(n,1/0),r=n;return r.length?r.length===1?gr(r[0]):fT(i)(cT(r,t)):YN}function hT(n,e,t,i,r){return function(s,o){var a=t,l=e,c=0;s.subscribe(so(o,function(u){var f=c++;l=a?n(l,u,f):(a=!0,u)},(function(){a&&o.next(l),o.complete()})))}}function gC(n,e){return dr(hT(n,e,arguments.length>=2,!1,!0))}var dT=function(n,e){return n.push(e),n};function gT(){return dr(function(n,e){gC(dT,[])(n).subscribe(e)})}class pT{}class mT{constructor(){this.signals=new Set,this.abortController=new AbortController}addSignal(e=new pT){if(this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(e),e.aborted?this.handleAborted(e):typeof e.addEventListener=="function"&&e.addEventListener("abort",()=>{this.handleAborted(e)})}handleAborted(e){this.signals.delete(e),this.signals.size===0&&this.abortController.abort()}get signal(){return this.abortController.signal}abort(){this.abortController.abort()}}class wT{constructor(){this.callbacks=new Set}addCallback(e=()=>{}){this.callbacks.add(e),this.currentMessage&&e(this.currentMessage)}callback(e){this.currentMessage=e;for(const t of this.callbacks)t(e)}}class pr{constructor({fill:e,cache:t}){if(typeof e!="function")throw new TypeError("must pass a fill function");if(typeof t!="object")throw new TypeError("must pass a cache object");if(typeof t.get!="function"||typeof t.set!="function"||typeof t.delete!="function")throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=t,this.fillCallback=e}static isAbortException(e){return e.name==="AbortError"||e.code==="ERR_ABORTED"||e.message==="AbortError: aborted"||e.message==="Error: aborted"}evict(e,t){this.cache.get(e)===t&&this.cache.delete(e)}fill(e,t,i,r){const s=new mT,o=new wT;o.addCallback(r);const a={aborter:s,promise:this.fillCallback(t,s.signal,l=>{o.callback(l)}),settled:!1,statusReporter:o,get aborted(){return this.aborter.signal.aborted}};a.aborter.addSignal(i),a.aborter.signal.addEventListener("abort",()=>{a.settled||this.evict(e,a)}),a.promise.then(()=>{a.settled=!0},()=>{a.settled=!0,this.evict(e,a)}).catch(l=>{throw console.error(l),l}),this.cache.set(e,a)}static checkSinglePromise(e,t){function i(){if(t?.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return e.then(r=>(i(),r),r=>{throw i(),r})}has(e){return this.cache.has(e)}get(e,t,i,r){if(!i&&t instanceof AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");const s=this.cache.get(e);return s?s.aborted&&!s.settled?(this.evict(e,s),this.get(e,t,i,r)):s.settled?s.promise:(s.aborter.addSignal(i),s.statusReporter.addCallback(r),pr.checkSinglePromise(s.promise,i)):(this.fill(e,t,i,r),pr.checkSinglePromise(this.cache.get(e).promise,i))}delete(e){const t=this.cache.get(e);t&&(t.settled||t.aborter.abort(),this.cache.delete(e))}clear(){const e=this.cache.keys();let t=0;for(let i=e.next();!i.done;i=e.next())this.delete(i.value),t+=1;return t}}function yT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var aA,pC;function CT(){if(pC)return aA;pC=1;class n{constructor(t={}){if(!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(t,i){this.cache.set(t,i),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t)){const i=this.oldCache.get(t);return this.oldCache.delete(t),this._set(t,i),i}}set(t,i){return this.cache.has(t)?this.cache.set(t,i):this._set(t,i),this}has(t){return this.cache.has(t)||this.oldCache.has(t)}peek(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t))return this.oldCache.get(t)}delete(t){const i=this.cache.delete(t);return i&&this._size--,this.oldCache.delete(t)||i}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache)yield t;for(const t of this.oldCache){const[i]=t;this.cache.has(i)||(yield t)}}get size(){let t=0;for(const i of this.oldCache.keys())this.cache.has(i)||t++;return this._size+t}}return aA=n,aA}var xT=CT();const mC=yT(xT);class mr{ranges;constructor(e){this.ranges=e}get min(){return this.ranges[0].min}get max(){return this.ranges.at(-1).max}contains(e){for(const t of this.ranges)if(t.min<=e&&t.max>=e)return!0;return!1}isContiguous(){return this.ranges.length>1}getRanges(){return this.ranges.map(e=>new mr([{min:e.min,max:e.max}]))}toString(){return this.ranges.map(e=>`[${e.min}-${e.max}]`).join(",")}union(e){const t=[...this.getRanges(),...e.getRanges()].sort((s,o)=>s.min<o.min?-1:s.min>o.min?1:s.max<o.max?-1:o.max>s.max?1:0),i=[];let r=t[0];for(const s of t)s.min>r.max+1?(i.push(r),r=s):s.max>r.max&&(r=new mr([{min:r.min,max:s.max}]));return i.push(r),i.length===1?i[0]:new mr(i)}}function bT(n){return bN(n.subarray(2),void 0)}class ET extends Error{code;constructor(e){super(e),this.code="ERR_ABORTED"}}function IT(n){n.sort((r,s)=>r.offset-s.offset);const e=[];let t,i;for(const r of n)t&&i&&r.offset-i<=2e3?(t.length=t.length+r.length-i+r.offset,t.blocks.push(r)):e.push(t={blocks:[r],length:r.length,offset:r.offset}),i=t.offset+t.length;return e}function hc(n){if(n&&n.aborted)if(typeof DOMException>"u"){const e=new ET("aborted");throw e.code="ERR_ABORTED",e}else throw new DOMException("aborted","AbortError")}const BT=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function cA(n,e,t,i){return n<i&&e>=t}class wC{bbi;refsByName;cirTreeOffset;isCompressed;blockType;cirTreePromise;featureCache=new pr({cache:new mC({maxSize:1e3}),fill:async({length:e,offset:t},i)=>this.bbi.read(e,t,{signal:i})});constructor(e,t,i,r,s){if(this.bbi=e,this.refsByName=t,this.cirTreeOffset=i,this.isCompressed=r,this.blockType=s,!(i>=0))throw new Error("invalid cirTreeOffset!")}async readWigData(e,t,i,r,s){try{const o=this.refsByName[e];o===void 0&&r.complete();const a={chrId:o,start:t,end:i};this.cirTreePromise||(this.cirTreePromise=this.bbi.read(48,this.cirTreeOffset,s));const l=await this.cirTreePromise,u=new DataView(l.buffer).getUint32(4,!0);let f=[],h=0;const A=(m,y,C)=>{try{const E=m.subarray(y),I=new DataView(E.buffer,E.byteOffset,E.length);let b=0;const S=I.getUint8(b);b+=2;const Q=I.getUint16(b,!0);if(b+=2,S===1){const v=[];for(let F=0;F<Q;F++){const R=I.getUint32(b,!0);b+=4;const N=I.getUint32(b,!0);b+=4;const O=I.getUint32(b,!0);b+=4;const H=I.getUint32(b,!0);b+=4;const G=Number(I.getBigUint64(b,!0));b+=8;const V=Number(I.getBigUint64(b,!0));b+=8,v.push({startChrom:R,startBase:N,endBase:H,endChrom:O,blockOffset:G,blockSize:V,offset:b})}f=f.concat(v.filter(F=>d(F)).map(F=>({offset:F.blockOffset,length:F.blockSize})))}else if(S===0){const v=[];for(let R=0;R<Q;R++){const N=I.getUint32(b,!0);b+=4;const O=I.getUint32(b,!0);b+=4;const H=I.getUint32(b,!0);b+=4;const G=I.getUint32(b,!0);b+=4;const V=Number(I.getBigUint64(b,!0));b+=8,v.push({startChrom:N,startBase:O,endChrom:H,endBase:G,blockOffset:V,offset:b})}const F=v.filter(R=>d(R)).map(R=>R.blockOffset);F.length>0&&p(F,C+1)}}catch(w){r.error(w)}},d=m=>{const{startChrom:y,startBase:C,endChrom:w,endBase:E}=m;return(y<o||y===o&&C<=i)&&(w>o||w===o&&E>=t)},g=async(m,y,C)=>{try{const w=y.max-y.min,E=y.min,I=await this.featureCache.get(`${w}_${E}`,{length:w,offset:E},s?.signal);for(const b of m)y.contains(b)&&(A(I,b-E,C),h-=1,h===0&&this.readFeatures(r,f,{...s,request:a}).catch(S=>{r.error(S)}))}catch(w){r.error(w)}},p=(m,y)=>{try{h+=m.length;const C=4+u*32;let w=new mr([{min:m[0],max:m[0]+C}]);for(let E=1;E<m.length;E+=1){const I=new mr([{min:m[E],max:m[E]+C}]);w=w.union(I)}w.getRanges().map(E=>g(m,E,y))}catch(C){r.error(C)}};p([this.cirTreeOffset+48],1);return}catch(o){r.error(o)}}parseSummaryBlock(e,t,i){const r=[];let s=t;const o=new DataView(e.buffer,e.byteOffset,e.length);for(;s<e.byteLength;){const a=o.getUint32(s,!0);s+=4;const l=o.getUint32(s,!0);s+=4;const c=o.getUint32(s,!0);s+=4;const u=o.getUint32(s,!0);s+=4;const f=o.getFloat32(s,!0);s+=4;const h=o.getFloat32(s,!0);s+=4;const A=o.getFloat32(s,!0);s+=4,s+=4,(!i||a===i.chrId&&cA(l,c,i.start,i.end))&&r.push({start:l,end:c,maxScore:h,minScore:f,summary:!0,score:A/(u||1)})}return r}parseBigBedBlock(e,t,i,r){const s=[];let o=t;const a=e,l=new DataView(a.buffer,a.byteOffset,a.length);for(;o<e.byteLength;){const c=o,u=l.getUint32(o,!0);o+=4;const f=l.getInt32(o,!0);o+=4;const h=l.getInt32(o,!0);o+=4;let A=o;for(;A<e.length&&e[A]!==0;A++);const d=e.subarray(o,A),g=BT?.decode(d)??d.toString();o=A+1,s.push({chromId:u,start:f,end:h,rest:g,uniqueId:`bb-${i+c}`})}return r?s.filter(c=>cA(c.start,c.end,r.start,r.end)):s}parseBigWigBlock(e,t,i){const r=e.subarray(t),s=new DataView(r.buffer,r.byteOffset,r.length);let o=0;o+=4;const a=s.getInt32(o,!0);o+=8;const l=s.getUint32(o,!0);o+=4;const c=s.getUint32(o,!0);o+=4;const u=s.getUint8(o);o+=2;const f=s.getUint16(o,!0);o+=2;const h=new Array(f);switch(u){case 1:{for(let A=0;A<f;A++){const d=s.getInt32(o,!0);o+=4;const g=s.getInt32(o,!0);o+=4;const p=s.getFloat32(o,!0);o+=4,h[A]={start:d,end:g,score:p}}break}case 2:{for(let A=0;A<f;A++){const d=s.getInt32(o,!0);o+=4;const g=s.getFloat32(o,!0);o+=4,h[A]={score:g,start:d,end:d+c}}break}case 3:{for(let A=0;A<f;A++){const d=s.getFloat32(o,!0);o+=4;const g=a+A*l;h[A]={score:d,start:g,end:g+c}}break}}return i?h.filter(A=>cA(A.start,A.end,i.start,i.end)):h}async readFeatures(e,t,i={}){try{const{blockType:r,isCompressed:s}=this,{signal:o,request:a}=i,l=IT(t);hc(o),await Promise.all(l.map(async c=>{hc(o);const{length:u,offset:f}=c,h=await this.featureCache.get(`${u}_${f}`,c,o);for(const A of c.blocks){hc(o);let d=h.subarray(A.offset-c.offset);switch(s&&(d=bT(d)),hc(o),r){case"summary":{e.next(this.parseSummaryBlock(d,0,a));break}case"bigwig":{e.next(this.parseBigWigBlock(d,0,a));break}case"bigbed":{e.next(this.parseBigBedBlock(d,0,A.offset*256,a));break}default:console.warn(`Don't know what to do with ${r}`)}}})),e.complete()}catch(r){e.error(r)}}}const vT=-2003829722,yC=-2021002517;function wr(n){return new DataView(n.buffer,n.byteOffset,n.length)}class CC{bbi;headerP;renameRefSeqs;getHeader(e){return this.headerP||(this.headerP=this._getHeader(e).catch(t=>{throw this.headerP=void 0,t})),this.headerP}constructor(e){const{filehandle:t,renameRefSeqs:i=o=>o,path:r,url:s}=e;if(this.renameRefSeqs=i,t)this.bbi=t;else if(s)this.bbi=new Ht(s);else if(r)this.bbi=new We(r);else throw new Error("no file given")}async _getHeader(e){const t=await this._getMainHeader(e),i=await this._readChromTree(t,e);return{...t,...i}}async _getMainHeader(e,t=2e3){const i=await this.bbi.read(t,0,e),r=wr(i),s=r.getInt32(0,!0);if(s!==vT&&s!==yC)throw new Error("not a BigWig/BigBed file");let o=0;const a=r.getInt32(o,!0);o+=4;const l=r.getUint16(o,!0);o+=2;const c=r.getUint16(o,!0);o+=2;const u=Number(r.getBigUint64(o,!0));o+=8;const f=Number(r.getBigUint64(o,!0));o+=8;const h=Number(r.getBigUint64(o,!0));o+=8;const A=r.getUint16(o,!0);o+=2;const d=r.getUint16(o,!0);o+=2;const g=Number(r.getBigUint64(o,!0));o+=8;const p=Number(r.getBigUint64(o,!0));o+=8;const m=r.getUint32(o,!0);o+=4;const y=Number(r.getBigUint64(o,!0));o+=8;const C=[];for(let b=0;b<c;b++){const S=r.getUint32(o,!0);o+=4;const Q=r.getUint32(o,!0);o+=4;const v=Number(r.getBigUint64(o,!0));o+=8;const F=Number(r.getBigUint64(o,!0));o+=8,C.push({reductionLevel:S,reserved:Q,dataOffset:v,indexOffset:F})}const w=a===yC?"bigbed":"bigwig";if(g>t||p>t-40)return this._getMainHeader(e,t*2);let E;if(p){const b=i.subarray(p);let S=0;const Q=wr(b),v=Number(Q.getBigUint64(S,!0));S+=8;const F=Q.getFloat64(S,!0);S+=8;const R=Q.getFloat64(S,!0);S+=8;const N=Q.getFloat64(S,!0);S+=8;const O=Q.getFloat64(S,!0);S+=8,E={scoreMin:F,scoreMax:R,scoreSum:N,scoreSumSquares:O,basesCovered:v}}else throw new Error("no stats");const I=new TextDecoder("utf8");return{zoomLevels:C,magic:a,extHeaderOffset:y,numZoomLevels:c,fieldCount:A,totalSummary:E,definedFieldCount:d,uncompressBufSize:m,asOffset:g,chromTreeOffset:u,totalSummaryOffset:p,unzoomedDataOffset:f,unzoomedIndexOffset:h,fileType:w,version:l,autoSql:g?I.decode(i.subarray(g,i.indexOf(0,g))):""}}async _readChromTree(e,t){const i=[],r={},s=e.chromTreeOffset,o=wr(await this.bbi.read(32,s,t));let a=0;a+=4,a+=4;const l=o.getUint32(a,!0);a+=4;const c=o.getUint32(a,!0);a+=4,a+=8;const u=new TextDecoder("utf8"),f=async h=>{const A=await this.bbi.read(4,h),d=wr(A);let g=0;const p=d.getUint8(g);g+=1,g+=1;const m=d.getUint16(g,!0);if(g+=2,p){const y=await this.bbi.read(m*(l+c),h+g),C=wr(y);g=0;for(let w=0;w<m;w++){const E=u.decode(y.subarray(g,g+l)).replaceAll("\0","");g+=l;const I=C.getUint32(g,!0);g+=4;const b=C.getUint32(g,!0);g+=4,r[this.renameRefSeqs(E)]=I,i[I]={name:E,id:I,length:b}}}else{const y=[],C=wr(await this.bbi.read(m*(l+8),h+g));g=0;for(let w=0;w<m;w++){g+=l;const E=Number(C.getBigUint64(g,!0));g+=8,y.push(f(E))}await Promise.all(y)}};return await f(s+32),{refsByName:r,refsByNumber:i}}async getUnzoomedView(e){const{unzoomedIndexOffset:t,refsByName:i,uncompressBufSize:r,fileType:s}=await this.getHeader(e);return new wC(this.bbi,i,t,r>0,s)}async getFeatureStream(e,t,i,r){await this.getHeader(r);const s=this.renameRefSeqs(e);let o;const{basesPerSpan:a,scale:l}=r||{};return a?o=await this.getView(1/a,r):l?o=await this.getView(l,r):o=await this.getView(1,r),new wt(c=>{o.readWigData(s,t,i,c,r).catch(u=>{c.error(u)})})}async getFeatures(e,t,i,r){const s=await this.getFeatureStream(e,t,i,r);return(await AC(s.pipe(gT()))).flat()}}class ST extends CC{async getView(e,t){const{zoomLevels:i,refsByName:r,uncompressBufSize:s}=await this.getHeader(t),o=1/e,a=i.length-1;for(let l=a;l>=0;l-=1){const c=i[l];if(c&&c.reductionLevel<=2*o)return new wC(this.bbi,r,c.indexOffset,s>0,"summary")}return this.getUnzoomedView(t)}}function QT(n){return n.filter(e=>!!e)}class DT extends CC{readIndicesCache=new pr({cache:new mC({maxSize:1}),fill:(e,t)=>this._readIndices({...e,signal:t})});readIndices(e={}){const{signal:t,...i}=e;return this.readIndicesCache.get(JSON.stringify(i),e,t)}async getView(e,t){return this.getUnzoomedView(t)}async _readIndices(e){const{extHeaderOffset:t}=await this.getHeader(e),i=await this.bbi.read(64,t),r=new DataView(i.buffer,i.byteOffset,i.length);let s=0;s+=2;const o=r.getUint16(s,!0);s+=2;const a=Number(r.getBigUint64(s,!0));if(s+=8,o===0)return[];const l=20,c=l*o,u=await this.bbi.read(c,a),f=[];for(let h=0;h<o;h+=1){const A=u.subarray(h*l),d=new DataView(A.buffer,A.byteOffset,A.length);let g=0;const p=d.getInt16(g,!0);g+=2;const m=d.getInt16(g,!0);g+=2;const y=Number(d.getBigUint64(g,!0));g+=12;const C=d.getInt16(g,!0);f.push({type:p,fieldcount:m,offset:y,field:C})}return f}async searchExtraIndexBlocks(e,t={}){const i=await this.readIndices(t);if(i.length===0)return[];const r=new TextDecoder("utf8"),s=i.map(async o=>{const{offset:a,field:l}=o,c=await this.bbi.read(32,a,t),u=new DataView(c.buffer,c.byteOffset,c.length);let f=0;f+=4;const h=u.getInt32(f,!0);f+=4;const A=u.getInt32(f,!0);f+=4;const d=u.getInt32(f,!0);f+=4,f+=8;const g=async p=>{const m=p,y=4+h*(A+d),w=await this.bbi.read(y,m,t),E=new DataView(w.buffer,w.byteOffset,w.length);let I=0;const b=E.getInt8(I);I+=2;const S=E.getInt16(I,!0);I+=2;const Q=[];if(b===0){const v=[];for(let R=0;R<S;R++){const N=r.decode(w.subarray(I,I+A)).replaceAll("\0","");I+=A;const O=Number(E.getBigUint64(I,!0));I+=8,v.push({key:N,offset:O})}let F=0;for(const{key:R,offset:N}of v){if(e.localeCompare(R)<0&&F)return g(F);F=N}return g(F)}else if(b===1){for(let v=0;v<S;v++){const F=r.decode(w.subarray(I,I+A)).replaceAll("\0","");I+=A;const R=Number(E.getBigUint64(I,!0));I+=8;const N=E.getUint32(I,!0);I+=4;const O=E.getUint32(I,!0);I+=4,Q.push({key:F,offset:R,length:N,reserved:O})}for(const v of Q)if(v.key===e)return{...v,field:l};return}};return g(a+32)});return QT(await Promise.all(s))}async searchExtraIndex(e,t={}){const i=await this.searchExtraIndexBlocks(e,t);if(i.length===0)return[];const r=await this.getUnzoomedView(t),s=i.map(a=>new wt(l=>{r.readFeatures(l,[a],t).catch(c=>{l.error(c)})}).pipe(gC((l,c)=>l.concat(c)),hC(l=>{for(const c of l)c.field=a.field;return l})));return(await AC(AT(...s))).filter(a=>a.rest?.split("	")[(a.field||0)-3]===e)}}const xC=Object.freeze(Object.defineProperty({__proto__:null,BigBed:DT,BigWig:ST},Symbol.toStringTag,{value:"Module"}));function kT(n,e){function t(){this.constructor=n}t.prototype=e.prototype,n.prototype=new t}function yr(n,e,t,i){this.message=n,this.expected=e,this.found=t,this.location=i,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,yr)}kT(yr,Error),yr.buildMessage=function(n,e){var t={literal:function(c){return'"'+r(c.text)+'"'},class:function(c){var u="",f;for(f=0;f<c.parts.length;f++)u+=c.parts[f]instanceof Array?s(c.parts[f][0])+"-"+s(c.parts[f][1]):s(c.parts[f]);return"["+(c.inverted?"^":"")+u+"]"},any:function(c){return"any character"},end:function(c){return"end of input"},other:function(c){return c.description}};function i(c){return c.charCodeAt(0).toString(16).toUpperCase()}function r(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+i(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+i(u)})}function s(c){return c.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+i(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+i(u)})}function o(c){return t[c.type](c)}function a(c){var u=new Array(c.length),f,h;for(f=0;f<c.length;f++)u[f]=o(c[f]);if(u.sort(),u.length>0){for(f=1,h=1;f<u.length;f++)u[f-1]!==u[f]&&(u[h]=u[f],h++);u.length=h}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}function l(c){return c?'"'+r(c)+'"':"end of input"}return"Expected "+a(n)+" but "+l(e)+" found."};function FT(n,e){e=e!==void 0?e:{};var t={},i={declaration:cx},r=cx,s="(",o=ce("(",!1),a=")",l=ce(")",!1),c=function(x,D,T,L){return{type:x,name:D,comment:T,fields:L}},u="simple",f=ce("simple",!1),h="object",A=ce("object",!1),d="table",g=ce("table",!1),p="auto",m=ce("auto",!1),y="primary",C=ce("primary",!1),w="index",E=ce("index",!1),I="unique",b=ce("unique",!1),S=function(x,D){return D},Q=function(x,D){return x.name&&D.unshift(x),D},v="#",F=ce("#",!1),R=";",N=ce(";",!1),O=function(x,D,T){return{type:x,name:D,comment:T}},H="[",G=ce("[",!1),V="]",te=ce("]",!1),ae=function(x,D,T,L){return{type:x,size:D,name:T,comment:L}},ne=function(x,D,T,L){return{type:x,vals:D,name:T,comment:L}},Ge=",",Yt=ce(",",!1),po=function(x,D){return D.unshift(x),D},Rr="int",un=ce("int",!1),vi="uint",mo=ce("uint",!1),Mr="short",U=ce("short",!1),q="ushort",W=ce("ushort",!1),M="byte",Xe=ce("byte",!1),se="ubyte",nt=ce("ubyte",!1),Ze="float",fn=ce("float",!1),wo="char",T9=ce("char",!1),V1="string",P9=ce("string",!1),Y1="lstring",L9=ce("lstring",!1),J1="enum",O9=ce("enum",!1),K1="double",U9=ce("double",!1),q1="bigint",G9=ce("bigint",!1),j1="set",z9=ce("set",!1),H9=function(x,D){return x+" "+D},_9=/^[a-zA-Z_]/,V9=yo([["a","z"],["A","Z"],"_"],!1,!1),W1=/^[a-zA-Z0-9_]/,X1=yo([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),Y9=function(x){return rx()},Z1=/^[^\n\r]/,$1=yo([`
`,"\r"],!0,!1),J9=function(x){return x.join("").replace(/^"/,"").replace(/"$/,"")},K9=sx("integer"),ex=/^[0-9]/,tx=yo([["0","9"]],!1,!1),q9=function(){return parseInt(rx(),10)},j9=sx("whitespace"),nx=/^[ \t\n\r]/,ix=yo([" ","	",`
`,"\r"],!1,!1),B=0,it=0,Mc=[{line:1,column:1}],Jt=0,PA=[],Y=0,Nc;if("startRule"in e){if(!(e.startRule in i))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');r=i[e.startRule]}function rx(){return n.substring(it,B)}function ce(x,D){return{type:"literal",text:x,ignoreCase:D}}function yo(x,D,T){return{type:"class",parts:x,inverted:D,ignoreCase:T}}function W9(){return{type:"end"}}function sx(x){return{type:"other",description:x}}function ox(x){var D=Mc[x],T;if(D)return D;for(T=x-1;!Mc[T];)T--;for(D=Mc[T],D={line:D.line,column:D.column};T<x;)n.charCodeAt(T)===10?(D.line++,D.column=1):D.column++,T++;return Mc[x]=D,D}function ax(x,D){var T=ox(x),L=ox(D);return{start:{offset:x,line:T.line,column:T.column},end:{offset:D,line:L.line,column:L.column}}}function J(x){B<Jt||(B>Jt&&(Jt=B,PA=[]),PA.push(x))}function X9(x,D,T){return new yr(yr.buildMessage(x,D),x,D,T)}function cx(){var x,D,T,L,_,Ae,ye,xt,Gn,An,zn,hn,Hn,dn;return x=B,D=X(),D!==t?(T=lx(),T!==t?(L=X(),L!==t?(_=ux(),_!==t?(Ae=X(),Ae!==t?(ye=Tc(),ye!==t?(xt=X(),xt!==t?(n.charCodeAt(B)===40?(Gn=s,B++):(Gn=t,Y===0&&J(o)),Gn!==t?(An=X(),An!==t?(zn=Z9(),zn!==t?(hn=X(),hn!==t?(n.charCodeAt(B)===41?(Hn=a,B++):(Hn=t,Y===0&&J(l)),Hn!==t?(dn=X(),dn!==t?(it=x,D=c(T,_,ye,zn),x=D):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t),x}function lx(){var x;return n.substr(B,6)===u?(x=u,B+=6):(x=t,Y===0&&J(f)),x===t&&(n.substr(B,6)===h?(x=h,B+=6):(x=t,Y===0&&J(A)),x===t&&(n.substr(B,5)===d?(x=d,B+=5):(x=t,Y===0&&J(g)))),x}function ux(){var x,D,T,L;return x=Dt(),x===t&&(x=B,D=Dt(),D!==t?(T=fx(),T!==t?(D=[D,T],x=D):(B=x,x=t)):(B=x,x=t),x===t&&(x=B,D=Dt(),D!==t?(n.substr(B,4)===p?(T=p,B+=4):(T=t,Y===0&&J(m)),T!==t?(D=[D,T],x=D):(B=x,x=t)):(B=x,x=t),x===t&&(x=B,D=Dt(),D!==t?(T=fx(),T!==t?(n.substr(B,4)===p?(L=p,B+=4):(L=t,Y===0&&J(m)),L!==t?(D=[D,T,L],x=D):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)))),x}function fx(){var x;return n.substr(B,7)===y?(x=y,B+=7):(x=t,Y===0&&J(C)),x===t&&(n.substr(B,5)===w?(x=w,B+=5):(x=t,Y===0&&J(E)),x===t&&(n.substr(B,6)===I?(x=I,B+=6):(x=t,Y===0&&J(b)))),x}function Tc(){var x;return x=Ax(),x===t&&(x=X()),x}function Z9(){var x,D,T,L,_,Ae,ye;if(x=B,D=LA(),D!==t)if(T=X(),T!==t){for(L=[],_=B,Ae=X(),Ae!==t?(ye=LA(),ye!==t?(it=_,Ae=S(D,ye),_=Ae):(B=_,_=t)):(B=_,_=t);_!==t;)L.push(_),_=B,Ae=X(),Ae!==t?(ye=LA(),ye!==t?(it=_,Ae=S(D,ye),_=Ae):(B=_,_=t)):(B=_,_=t);L!==t?(_=X(),_!==t?(it=x,D=Q(D,L),x=D):(B=x,x=t)):(B=x,x=t)}else B=x,x=t;else B=x,x=t;return x}function $9(){var x;return n.charCodeAt(B)===35?(x=v,B++):(x=t,Y===0&&J(F)),x}function e5(){var x,D,T,L,_;return x=B,D=X(),D!==t?(T=$9(),T!==t?(L=Ax(),L!==t?(_=X(),_!==t?(D=[D,T,L,_],x=D):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t),x}function LA(){var x,D,T,L,_,Ae,ye,xt,Gn,An,zn,hn,Hn,dn;return x=B,D=OA(),D!==t?(T=X(),T!==t?(L=Dt(),L!==t?(_=X(),_!==t?(n.charCodeAt(B)===59?(Ae=R,B++):(Ae=t,Y===0&&J(N)),Ae!==t?(ye=X(),ye!==t?(xt=Tc(),xt!==t?(it=x,D=O(D,L,xt),x=D):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t),x===t&&(x=B,D=OA(),D!==t?(T=X(),T!==t?(n.charCodeAt(B)===91?(L=H,B++):(L=t,Y===0&&J(G)),L!==t?(_=X(),_!==t?(Ae=n5(),Ae!==t?(ye=X(),ye!==t?(n.charCodeAt(B)===93?(xt=V,B++):(xt=t,Y===0&&J(te)),xt!==t?(Gn=X(),Gn!==t?(An=Dt(),An!==t?(zn=X(),zn!==t?(n.charCodeAt(B)===59?(hn=R,B++):(hn=t,Y===0&&J(N)),hn!==t?(Hn=X(),Hn!==t?(dn=Tc(),dn!==t?(it=x,D=ae(D,Ae,An,dn),x=D):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t),x===t&&(x=B,D=OA(),D!==t?(T=X(),T!==t?(n.charCodeAt(B)===40?(L=s,B++):(L=t,Y===0&&J(o)),L!==t?(_=X(),_!==t?(Ae=t5(),Ae!==t?(ye=X(),ye!==t?(n.charCodeAt(B)===41?(xt=a,B++):(xt=t,Y===0&&J(l)),xt!==t?(Gn=X(),Gn!==t?(An=Dt(),An!==t?(zn=X(),zn!==t?(n.charCodeAt(B)===59?(hn=R,B++):(hn=t,Y===0&&J(N)),hn!==t?(Hn=X(),Hn!==t?(dn=Tc(),dn!==t?(it=x,D=ne(D,Ae,An,dn),x=D):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t)):(B=x,x=t),x===t&&(x=e5()))),x}function t5(){var x,D,T,L,_,Ae,ye;if(x=B,D=Dt(),D!==t){for(T=[],L=B,n.charCodeAt(B)===44?(_=Ge,B++):(_=t,Y===0&&J(Yt)),_!==t?(Ae=X(),Ae!==t?(ye=Dt(),ye!==t?(it=L,_=S(D,ye),L=_):(B=L,L=t)):(B=L,L=t)):(B=L,L=t);L!==t;)T.push(L),L=B,n.charCodeAt(B)===44?(_=Ge,B++):(_=t,Y===0&&J(Yt)),_!==t?(Ae=X(),Ae!==t?(ye=Dt(),ye!==t?(it=L,_=S(D,ye),L=_):(B=L,L=t)):(B=L,L=t)):(B=L,L=t);T!==t?(it=x,D=po(D,T),x=D):(B=x,x=t)}else B=x,x=t;return x}function OA(){var x,D,T,L;return n.substr(B,3)===Rr?(x=Rr,B+=3):(x=t,Y===0&&J(un)),x===t&&(n.substr(B,4)===vi?(x=vi,B+=4):(x=t,Y===0&&J(mo)),x===t&&(n.substr(B,5)===Mr?(x=Mr,B+=5):(x=t,Y===0&&J(U)),x===t&&(n.substr(B,6)===q?(x=q,B+=6):(x=t,Y===0&&J(W)),x===t&&(n.substr(B,4)===M?(x=M,B+=4):(x=t,Y===0&&J(Xe)),x===t&&(n.substr(B,5)===se?(x=se,B+=5):(x=t,Y===0&&J(nt)),x===t&&(n.substr(B,5)===Ze?(x=Ze,B+=5):(x=t,Y===0&&J(fn)),x===t&&(n.substr(B,4)===wo?(x=wo,B+=4):(x=t,Y===0&&J(T9)),x===t&&(n.substr(B,6)===V1?(x=V1,B+=6):(x=t,Y===0&&J(P9)),x===t&&(n.substr(B,7)===Y1?(x=Y1,B+=7):(x=t,Y===0&&J(L9)),x===t&&(n.substr(B,4)===J1?(x=J1,B+=4):(x=t,Y===0&&J(O9)),x===t&&(n.substr(B,6)===K1?(x=K1,B+=6):(x=t,Y===0&&J(U9)),x===t&&(n.substr(B,6)===q1?(x=q1,B+=6):(x=t,Y===0&&J(G9)),x===t&&(n.substr(B,3)===j1?(x=j1,B+=3):(x=t,Y===0&&J(z9)),x===t&&(x=B,D=lx(),D!==t?(T=X(),T!==t?(L=ux(),L!==t?(it=x,D=H9(D,L),x=D):(B=x,x=t)):(B=x,x=t)):(B=x,x=t))))))))))))))),x}function n5(){var x;return x=i5(),x===t&&(x=Dt()),x}function Dt(){var x,D,T,L,_;if(x=B,D=B,_9.test(n.charAt(B))?(T=n.charAt(B),B++):(T=t,Y===0&&J(V9)),T!==t){for(L=[],W1.test(n.charAt(B))?(_=n.charAt(B),B++):(_=t,Y===0&&J(X1));_!==t;)L.push(_),W1.test(n.charAt(B))?(_=n.charAt(B),B++):(_=t,Y===0&&J(X1));L!==t?(T=[T,L],D=T):(B=D,D=t)}else B=D,D=t;return D!==t&&(it=x,D=Y9()),x=D,x}function Ax(){var x,D,T;for(x=B,D=[],Z1.test(n.charAt(B))?(T=n.charAt(B),B++):(T=t,Y===0&&J($1));T!==t;)D.push(T),Z1.test(n.charAt(B))?(T=n.charAt(B),B++):(T=t,Y===0&&J($1));return D!==t&&(it=x,D=J9(D)),x=D,x}function i5(){var x,D,T,L;if(Y++,x=B,D=X(),D!==t){if(T=[],ex.test(n.charAt(B))?(L=n.charAt(B),B++):(L=t,Y===0&&J(tx)),L!==t)for(;L!==t;)T.push(L),ex.test(n.charAt(B))?(L=n.charAt(B),B++):(L=t,Y===0&&J(tx));else T=t;T!==t?(it=x,D=q9(),x=D):(B=x,x=t)}else B=x,x=t;return Y--,x===t&&(D=t,Y===0&&J(K9)),x}function X(){var x,D;for(Y++,x=[],nx.test(n.charAt(B))?(D=n.charAt(B),B++):(D=t,Y===0&&J(ix));D!==t;)x.push(D),nx.test(n.charAt(B))?(D=n.charAt(B),B++):(D=t,Y===0&&J(ix));return Y--,x===t&&(D=t,Y===0&&J(j9)),x}if(Nc=r(),Nc!==t&&B===n.length)return Nc;throw Nc!==t&&B<n.length&&J(W9()),X9(PA,Jt<n.length?n.charAt(Jt):null,Jt<n.length?ax(Jt,Jt+1):ax(Jt,Jt))}const bC={SyntaxError:yr,parse:FT},lA=Object.fromEntries(Object.entries(Object.freeze(Object.defineProperty({__proto__:null,bigChain:`table bigChain
"bigChain pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint score;         "Score (0-1000)"
    char[1] strand;     "+ or - for strand"
    uint tSize;         "size of target sequence"
    string qName;       "name of query sequence"
    uint qSize;         "size of query sequence"
    uint qStart;        "start of alignment on query sequence"
    uint qEnd;          "end of alignment on query sequence"
    uint chainScore;    "score from chain"
    )`,bigGenePred:`table bigGenePred
"bigGenePred gene models"
   (
   string chrom;       "Reference sequence chromosome or scaffold"
   uint   chromStart;  "Start position in chromosome"
   uint   chromEnd;    "End position in chromosome"
   string name;        "Name or ID of item, ideally both human readable and unique"
   uint score;         "Score (0-1000)"
   char[1] strand;     "+ or - for strand"
   uint thickStart;    "Start of where display should be thick (start codon)"
   uint thickEnd;      "End of where display should be thick (stop codon)"
   uint reserved;       "RGB value (use R,G,B string in input file)"
   int blockCount;     "Number of blocks"
   int[blockCount] blockSizes; "Comma separated list of block sizes"
   int[blockCount] chromStarts; "Start positions relative to chromStart"
   string name2;       "Alternative/human readable name"
   string cdsStartStat; "Status of CDS start annotation (none, unknown, incomplete, or complete)"
   string cdsEndStat;   "Status of CDS end annotation (none, unknown, incomplete, or complete)"
   int[blockCount] exonFrames; "Exon frame {0,1,2}, or -1 if no frame for exon"
   string type;        "Transcript type"
   string geneName;    "Primary identifier for gene"
   string geneName2;   "Alternative/human readable gene name"
   string geneType;    "Gene type"
   )`,bigInteract:`table interact
"interaction between two regions"
    (
    string chrom;        "Chromosome (or contig, scaffold, etc.). For interchromosomal, use 2 records"
    uint chromStart;     "Start position of lower region. For interchromosomal, set to chromStart of this region"
    uint chromEnd;       "End position of upper region. For interchromosomal, set to chromEnd of this region"
    string name;         "Name of item, for display.  Usually 'sourceName/targetName/exp' or empty"
    uint score;          "Score (0-1000)"
    double value;        "Strength of interaction or other data value. Typically basis for score"
    string exp;          "Experiment name (metadata for filtering). Use . if not applicable"
    string color;        "Item color.  Specified as r,g,b or hexadecimal #RRGGBB or html color name, as in //www.w3.org/TR/css3-color/#html4. Use 0 and spectrum setting to shade by score"
    string sourceChrom;  "Chromosome of source region (directional) or lower region. For non-directional interchromosomal, chrom of this region."
    uint sourceStart;    "Start position in chromosome of source/lower/this region"
    uint sourceEnd;      "End position in chromosome of source/lower/this region"
    string sourceName;   "Identifier of source/lower/this region"
    string sourceStrand; "Orientation of source/lower/this region: + or -.  Use . if not applicable"
    string targetChrom;  "Chromosome of target region (directional) or upper region. For non-directional interchromosomal, chrom of other region"
    uint targetStart;    "Start position in chromosome of target/upper/this region"
    uint targetEnd;      "End position in chromosome of target/upper/this region"
    string targetName;   "Identifier of target/upper/this region"
    string targetStrand; "Orientation of target/upper/this region: + or -.  Use . if not applicable"

    )`,bigLink:`table bigLink
"bigLink pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint qStart;        "start of alignment on query sequence"
    )`,bigMaf:`table bedMaf
"Bed3 with MAF block"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start position in chromosome"
    uint   chromEnd;   "End position in chromosome"
    lstring mafBlock;   "MAF block"
    )`,bigNarrowPeak:`table bigNarrowPeak
"BED6+4 Peaks of signal enrichment based on pooled, normalized (interpreted) data."
(
    string chrom;        "Reference sequence chromosome or scaffold"
    uint   chromStart;   "Start position in chromosome"
    uint   chromEnd;     "End position in chromosome"
    string name;	 "Name given to a region (preferably unique). Use . if no name is assigned"
    uint   score;        "Indicates how dark the peak will be displayed in the browser (0-1000) "
    char[1]  strand;     "+ or - or . for unknown"
    float  signalValue;  "Measurement of average enrichment for the region"
    float  pValue;       "Statistical significance of signal value (-log10). Set to -1 if not used."
    float  qValue;       "Statistical significance with multiple-test correction applied (FDR -log10). Set to -1 if not used."
    int   peak;         "Point-source called for this peak; 0-based offset from chromStart. Set to -1 if no point-source called."
)`,bigPsl:`table bigPsl
"bigPsl pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint score;         "Score (0-1000)"
    char[1] strand;     "+ or - indicates whether the query aligns to the + or - strand on the reference"
    uint thickStart;    "Start of where display should be thick (start codon)"
    uint thickEnd;      "End of where display should be thick (stop codon)"
    uint reserved;       "RGB value (use R,G,B string in input file)"
    int blockCount;     "Number of blocks"
    int[blockCount] blockSizes; "Comma separated list of block sizes"
    int[blockCount] chromStarts; "Start positions relative to chromStart"

    uint    oChromStart;"Start position in other chromosome"
    uint    oChromEnd;  "End position in other chromosome"
    char[1] oStrand;    "+ or -, - means that psl was reversed into BED-compatible coordinates"
    uint    oChromSize; "Size of other chromosome."
    int[blockCount] oChromStarts; "Start positions relative to oChromStart or from oChromStart+oChromSize depending on strand"

    lstring  oSequence;  "Sequence on other chrom (or empty)"
    string   oCDS;       "CDS in NCBI format"

    uint    chromSize;"Size of target chromosome"

    uint match;        "Number of bases matched."
    uint misMatch; " Number of bases that don't match "
    uint repMatch; " Number of bases that match but are part of repeats "
    uint nCount;   " Number of 'N' bases "
    uint seqType;    "0=empty, 1=nucleotide, 2=amino_acid"
    )`,defaultBedSchema:`table defaultBedSchema
"BED12"
    (
    string chrom;      "The name of the chromosome (e.g. chr3, chrY, chr2_random) or scaffold (e.g. scaffold10671)."
    uint   chromStart; "The starting position of the feature in the chromosome or scaffold. The first base in a chromosome is numbered 0."
    uint   chromEnd;   "The ending position of the feature in the chromosome or scaffold. The chromEnd base is not included in the display of the feature. For example, the first 100 bases of a chromosome are defined as chromStart=0, chromEnd=100, and span the bases numbered 0-99."
    string   name;   "Defines the name of the BED line."
    float   score;   "Feature score, doesn't care about the 0-1000 limit as in bed"
    char   strand;   "Defines the strand. Either '.' (=no strand) or '+' or '-'"
    uint thickStart; "The starting position at which the feature is drawn thickly (for example, the start codon in gene displays). When there is no thick part, thickStart and thickEnd are usually set to the chromStart position."
    uint thickEnd; "The ending position at which the feature is drawn thickly (for example the stop codon in gene displays)."
    string itemRgb; "An RGB value of the form R,G,B (e.g. 255,0,0). "
    uint blockCount; " The number of blocks (exons) in the BED line."
    uint[blockCount] blockSizes; " A comma-separated list of the block sizes. The number of items in this list should correspond to blockCount."
    uint[blockCount] blockStarts; "A comma-separated list of block starts. All of the blockStart positions should be calculated relative to chromStart. The number of items in this list should correspond to blockCount."
    )`,mafFrames:`table mafFrames
"codon frame assignment for MAF components"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start range in chromosome"
    uint   chromEnd;   "End range in chromosome"
    string src;        "Name of sequence source in MAF"
    ubyte frame;       "frame (0,1,2) for first base(+) or last bast(-)"
    char[1] strand;    "+ or -"
    string name;       "Name of gene used to define frame"
    int    prevFramePos;  "target position of the previous base (in transcription direction) that continues this frame, or -1 if none, or frame not contiguous"
    int    nextFramePos;  "target position of the next base (in transcription direction) that continues this frame, or -1 if none, or frame not contiguous"
    ubyte  isExonStart;  "does this start the CDS portion of an exon?"
    ubyte  isExonEnd;    "does this end the CDS portion of an exon?"
    )`,mafSummary:`table mafSummary
"Positions and scores for alignment blocks"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start position in chromosome"
    uint   chromEnd;   "End position in chromosome"
    string src;        "Sequence name or database of alignment"
    float  score;      "Floating point score."
    char[1] leftStatus;  "Gap/break annotation for preceding block"
    char[1] rightStatus; "Gap/break annotation for following block"
    )`},Symbol.toStringTag,{value:"Module"}))).map(([n,e])=>[n,bC.parse(e.trim())]));function uA(n){const e=new Set(["uint","int","float","long"]);return{...n,fields:n.fields.map(t=>({...t,isArray:t.size&&t.type!=="char",arrayIsNumeric:t.size&&e.has(t.type),isNumeric:!t.size&&e.has(t.type)})).filter(t=>!!t.name)}}const RT={".":0,"-":-1,"+":1};function MT(n){return n.length>=12&&!Number.isNaN(Number.parseInt(n[9],10))&&n[10]?.split(",").filter(e=>!!e).length===Number.parseInt(n[9],10)}class NT{constructor(e={}){if(e.autoSql)this.autoSql=uA(bC.parse(e.autoSql));else if(e.type){if(!lA[e.type])throw new Error("Type not found");this.autoSql=uA(lA[e.type])}else this.autoSql=uA(lA.defaultBedSchema),this.attemptDefaultBed=!0}parseLine(e,t={}){const{autoSql:i}=this,{uniqueId:r}=t,s=Array.isArray(e)?e:e.split("	");let o={};if(!this.attemptDefaultBed||this.attemptDefaultBed&&MT(s))for(let a=0;a<i.fields.length;a++){const l=i.fields[a];let c=s[a];const{isNumeric:u,isArray:f,arrayIsNumeric:h,name:A}=l;if(c==null)break;if(c!=="."){if(u){const d=Number(c);c=Number.isNaN(d)?c:d}else f&&(c=c.split(","),c.at(-1)===""&&c.pop(),h&&(c=c.map(Number)));o[A]=c}}else{const a=["chrom","chromStart","chromEnd","name"];o=Object.fromEntries(s.map((l,c)=>[a[c]||"field"+c,l])),o.chromStart=+o.chromStart,o.chromEnd=+o.chromEnd,Number.isNaN(Number.parseFloat(o.field4))||(o.score=+o.field4,delete o.field4),(o.field5==="+"||o.field5==="-")&&(o.strand=o.field5,delete o.field5)}return r&&(o.uniqueId=r),o.strand=RT[o.strand]||0,o.chrom=decodeURIComponent(o.chrom),o}}const TT=Object.freeze(Object.defineProperty({__proto__:null,default:NT},Symbol.toStringTag,{value:"Module"}));var Fe=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},P=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},ue,lt,fe,Ce,xi,oo,bi,dc,Qt,EC,fA,AA,hA,IC,gc;class ao extends Map{constructor(e={}){if(super(),ue.add(this),lt.set(this,0),fe.set(this,new Map),Ce.set(this,new Map),xi.set(this,void 0),oo.set(this,void 0),bi.set(this,void 0),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");Fe(this,xi,e.maxSize,"f"),Fe(this,oo,e.maxAge||Number.POSITIVE_INFINITY,"f"),Fe(this,bi,e.onEviction,"f")}get __oldCache(){return P(this,Ce,"f")}get(e){if(P(this,fe,"f").has(e)){const t=P(this,fe,"f").get(e);return P(this,ue,"m",fA).call(this,e,t)}if(P(this,Ce,"f").has(e)){const t=P(this,Ce,"f").get(e);if(!P(this,ue,"m",Qt).call(this,e,t))return P(this,ue,"m",IC).call(this,e,t),t.value}}set(e,t,{maxAge:i=P(this,oo,"f")}={}){const r=typeof i=="number"&&i!==Number.POSITIVE_INFINITY?Date.now()+i:void 0;return P(this,fe,"f").has(e)?P(this,fe,"f").set(e,{value:t,expiry:r}):P(this,ue,"m",hA).call(this,e,{value:t,expiry:r}),this}has(e){return P(this,fe,"f").has(e)?!P(this,ue,"m",Qt).call(this,e,P(this,fe,"f").get(e)):P(this,Ce,"f").has(e)?!P(this,ue,"m",Qt).call(this,e,P(this,Ce,"f").get(e)):!1}peek(e){if(P(this,fe,"f").has(e))return P(this,ue,"m",AA).call(this,e,P(this,fe,"f"));if(P(this,Ce,"f").has(e))return P(this,ue,"m",AA).call(this,e,P(this,Ce,"f"))}expiresIn(e){const t=P(this,fe,"f").get(e)??P(this,Ce,"f").get(e);if(t)return t.expiry?t.expiry-Date.now():Number.POSITIVE_INFINITY}delete(e){var t;const i=P(this,fe,"f").delete(e);return i&&Fe(this,lt,(t=P(this,lt,"f"),t--,t),"f"),P(this,Ce,"f").delete(e)||i}clear(){P(this,fe,"f").clear(),P(this,Ce,"f").clear(),Fe(this,lt,0,"f")}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...P(this,ue,"m",gc).call(this)],i=t.length-e;i<0?(Fe(this,fe,new Map(t),"f"),Fe(this,Ce,new Map,"f"),Fe(this,lt,t.length,"f")):(i>0&&P(this,ue,"m",dc).call(this,t.slice(0,i)),Fe(this,Ce,new Map(t.slice(i)),"f"),Fe(this,fe,new Map,"f"),Fe(this,lt,0,"f")),Fe(this,xi,e,"f")}evict(e=1){const t=e;if(!t||t<=0)return;const i=[...P(this,ue,"m",gc).call(this)],r=Math.trunc(Math.min(t,Math.max(i.length-1,0)));r<=0||(P(this,ue,"m",dc).call(this,i.slice(0,r)),Fe(this,Ce,new Map(i.slice(r)),"f"),Fe(this,fe,new Map,"f"),Fe(this,lt,0,"f"))}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[(lt=new WeakMap,fe=new WeakMap,Ce=new WeakMap,xi=new WeakMap,oo=new WeakMap,bi=new WeakMap,ue=new WeakSet,dc=function(t){if(typeof P(this,bi,"f")=="function")for(const[i,r]of t)P(this,bi,"f").call(this,i,r.value)},Qt=function(t,i){return typeof i.expiry=="number"&&i.expiry<=Date.now()?(typeof P(this,bi,"f")=="function"&&P(this,bi,"f").call(this,t,i.value),this.delete(t)):!1},EC=function(t,i){if(!P(this,ue,"m",Qt).call(this,t,i))return i.value},fA=function(t,i){return i.expiry?P(this,ue,"m",EC).call(this,t,i):i.value},AA=function(t,i){const r=i.get(t);return P(this,ue,"m",fA).call(this,t,r)},hA=function(t,i){var r;P(this,fe,"f").set(t,i),Fe(this,lt,(r=P(this,lt,"f"),r++,r),"f"),P(this,lt,"f")>=P(this,xi,"f")&&(Fe(this,lt,0,"f"),P(this,ue,"m",dc).call(this,P(this,Ce,"f")),Fe(this,Ce,P(this,fe,"f"),"f"),Fe(this,fe,new Map,"f"))},IC=function(t,i){P(this,Ce,"f").delete(t),P(this,ue,"m",hA).call(this,t,i)},gc=function*(){for(const t of P(this,Ce,"f")){const[i,r]=t;P(this,fe,"f").has(i)||P(this,ue,"m",Qt).call(this,i,r)||(yield t)}for(const t of P(this,fe,"f")){const[i,r]=t;P(this,ue,"m",Qt).call(this,i,r)||(yield t)}},Symbol.iterator)](){for(const e of P(this,fe,"f")){const[t,i]=e;P(this,ue,"m",Qt).call(this,t,i)||(yield[t,i.value])}for(const e of P(this,Ce,"f")){const[t,i]=e;P(this,fe,"f").has(t)||P(this,ue,"m",Qt).call(this,t,i)||(yield[t,i.value])}}*entriesDescending(){let e=[...P(this,fe,"f")];for(let t=e.length-1;t>=0;--t){const i=e[t],[r,s]=i;P(this,ue,"m",Qt).call(this,r,s)||(yield[r,s.value])}e=[...P(this,Ce,"f")];for(let t=e.length-1;t>=0;--t){const i=e[t],[r,s]=i;P(this,fe,"f").has(r)||P(this,ue,"m",Qt).call(this,r,s)||(yield[r,s.value])}}*entriesAscending(){for(const[e,t]of P(this,ue,"m",gc).call(this))yield[e,t.value]}get size(){if(!P(this,lt,"f"))return P(this,Ce,"f").size;let e=0;for(const t of P(this,Ce,"f").keys())P(this,fe,"f").has(t)||e++;return Math.min(P(this,lt,"f")+e,P(this,xi,"f"))}get maxSize(){return P(this,xi,"f")}get maxAge(){return P(this,oo,"f")}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[i,r]of this.entriesAscending())e.call(t,r,i,this)}get[Symbol.toStringTag](){return"QuickLRU"}toString(){return`QuickLRU(${this.size}/${this.maxSize})`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}let BC=class{constructor(e,t,i,r){this.minv=e,this.maxv=t,this.bin=i,this._fetchedSize=r}toUniqueString(){return`${this.minv.toString()}..${this.maxv.toString()} (bin ${this.bin}, fetchedSize ${this.fetchedSize()})`}toString(){return this.toUniqueString()}compareTo(e){return this.minv.compareTo(e.minv)||this.maxv.compareTo(e.maxv)||this.bin-e.bin}fetchedSize(){return this._fetchedSize!==void 0?this._fetchedSize:this.maxv.blockPosition+65536-this.minv.blockPosition}};const vC=65536,PT=vC*vC;function LT(n,e=0){const t=n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24;return((n[e+4]|n[e+5]<<8|n[e+6]<<16|n[e+7]<<24)>>>0)*PT+(t>>>0)}function OT(n={}){return"aborted"in n?{signal:n}:n}function dA(n,e){const t=n.length;if(t===0)return n;let i;if(e){const l=e.blockPosition,c=e.dataPosition;i=[];for(let u=0;u<t;u++){const f=n[u],h=f.maxv;(h.blockPosition-l||h.dataPosition-c)>0&&i.push(f)}if(i.length===0)return i}else i=n;i.sort((l,c)=>{const u=l.minv.blockPosition-c.minv.blockPosition;return u!==0?u:l.minv.dataPosition-c.minv.dataPosition});const r=[];let s=i[0];r.push(s);let o=s.minv.blockPosition,a=s.maxv.blockPosition;for(let l=1;l<i.length;l++){const c=i[l],u=c.minv.blockPosition,f=c.maxv.blockPosition;if(u-a<65e3&&f-o<5e6){const h=c.maxv,A=s.maxv;(f-a||h.dataPosition-A.dataPosition)>0&&(s.maxv=h,a=f)}else r.push(c),s=c,o=u,a=f}return r}function SC(n,e){return{lineCount:LT(n,e)}}function co(n,e){return n?n.compareTo(e)>0?e:n:e}function UT(n,e=t=>t){let t=0,i=0;const r=[],s={};for(let o=0;o<n.length;o+=1)if(!n[o]){if(i<o){let a="";for(let l=i;l<o;l++)a+=String.fromCharCode(n[l]);a=e(a),r[t]=a,s[a]=t}i=o+1,t+=1}return{refNameToId:s,refIdToName:r}}function GT(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let i=0;for(const r of n)t.set(r,i),i+=r.length;return t}function zT(n,e,t){return!!((n&e)!==e||n&t)}function HT(n,e){return e==="*"?n===void 0:`${n}`!=`${e}`}function _T(n){if(!n)return"";const{flagInclude:e=0,flagExclude:t=0,tagFilter:i}=n,r=i?`:${i.tag}=${i.value??"*"}`:"";return`:f${e}x${t}${r}`}let QC=class{constructor({filehandle:e,renameRefSeq:t=i=>i}){this.filehandle=e,this.renameRefSeq=t}async estimatedBytesForRegions(e,t){const i=await Promise.all(e.map(o=>this.blocksForRange(o.refId,o.start,o.end,t))),r=dA(i.flat());let s=0;for(const o of r)s+=o.fetchedSize();return s}},DC=class{constructor(e,t){this.blockPosition=e,this.dataPosition=t}toString(){return`${this.blockPosition}:${this.dataPosition}`}compareTo(e){return this.blockPosition-e.blockPosition||this.dataPosition-e.dataPosition}};function On(n,e=0,t=!1){if(t)throw new Error("big-endian virtual file offsets not implemented");return new DC(n[e+7]*1099511627776+n[e+6]*4294967296+n[e+5]*16777216+n[e+4]*65536+n[e+3]*256+n[e+2],n[e+1]<<8|n[e])}const VT=21578050;function YT(n,e){return n-n%e}function JT(n,e){return n-n%e+e}function KT(n,e){return e-=1,[[0,0],[1+(n>>26),1+(e>>26)],[9+(n>>23),9+(e>>23)],[73+(n>>20),73+(e>>20)],[585+(n>>17),585+(e>>17)],[4681+(n>>14),4681+(e>>14)]]}class Cr extends QC{async lineCount(e,t){return(await this.parse(t)).indices(e)?.stats?.lineCount||0}async _parse(e){const t=await this.filehandle.readFile(),i=new DataView(t.buffer);if(i.getUint32(0,!0)!==VT)throw new Error("Not a BAI file");const r=i.getInt32(4,!0),o=((1<<(5+1)*3)-1)/7;let a=8,l;const c=[];for(let h=0;h<r;h++){c.push(a);const A=i.getInt32(a,!0);a+=4;for(let p=0;p<A;p+=1){const m=i.getUint32(a,!0);if(a+=4,m===o+1)a+=4,a+=32;else{if(m>o+1)throw new Error("bai index contains too many bins, please use CSI");{const y=i.getInt32(a,!0);a+=4;for(let C=0;C<y;C++)a+=8,a+=8}}}const d=i.getInt32(a,!0);a+=4;const g=new Array(d);for(let p=0;p<d;p++){const m=On(t,a);a+=8,l=co(l,m),g[p]=m}}const u=new ao({maxSize:5});function f(h){let A=c[h];if(A===void 0)return;const d=i.getInt32(A,!0);let g;A+=4;const p={};for(let C=0;C<d;C+=1){const w=i.getUint32(A,!0);if(A+=4,w===o+1)A+=4,g=SC(t,A+16),A+=32;else{if(w>o+1)throw new Error("bai index contains too many bins, please use CSI");{const E=i.getInt32(A,!0);A+=4;const I=new Array(E);for(let b=0;b<E;b++){const S=On(t,A);A+=8;const Q=On(t,A);A+=8,l=co(l,S),I[b]=new BC(S,Q,w)}p[w]=I}}}const m=i.getInt32(A,!0);A+=4;const y=new Array(m);for(let C=0;C<m;C++){const w=On(t,A);A+=8,l=co(l,w),y[C]=w}return{binIndex:p,linearIndex:y,stats:g}}return{bai:!0,firstDataLine:l,maxBlockSize:65536,indices:h=>{if(!u.has(h)){const A=f(h);return A&&u.set(h,A),A}return u.get(h)},refCount:r}}async indexCov(e,t,i,r){const o=t!==void 0,l=(await this.parse(r)).indices(e);if(!l)return[];const{linearIndex:c,stats:u}=l;if(c.length===0)return[];const f=i===void 0?(c.length-1)*16384:JT(i,16384),h=t===void 0?0:YT(t,16384),A=o?new Array((f-h)/16384):new Array(c.length-1),d=c[c.length-1].blockPosition;if(f>(c.length-1)*16384)throw new Error("query outside of range of linear index");let g=c[h/16384].blockPosition;for(let p=h/16384,m=0;p<f/16384;p++,m++)A[m]={score:c[p+1].blockPosition-g,start:p*16384,end:p*16384+16384},g=c[p+1].blockPosition;return A.map(p=>({...p,score:p.score*(u?.lineCount||0)/d}))}async blocksForRange(e,t,i,r={}){t<0&&(t=0);const s=await this.parse(r);if(!s)return[];const o=s.indices(e);if(!o)return[];const a=KT(t,i),l=[],{binIndex:c}=o;for(const[d,g]of a)for(let p=d;p<=g;p++){const m=c[p];if(m)for(let y=0,C=m.length;y<C;y++)l.push(m[y])}const{linearIndex:u}=o,f=u.length,h=Math.min(t>>14,f-1),A=u[h];return dA(l,A)}async parse(e={}){return this.setupP||(this.setupP=this._parse(e).catch(t=>{throw this.setupP=void 0,t})),this.setupP}async hasRefSeq(e,t={}){return!!(await this.parse(t)).indices(e)?.binIndex}}var kC=0,FC=2,pc=4,Ei=0,mc=1,qT=2,jT=-5;function WT(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function XT(n){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(var i in t)WT(t,i)&&(n[i]=t[i])}}return n}function RC(n,e){return n.length===e?n:n.subarray?n.subarray(0,e):(n.length=e,n)}var lo={arraySet:function(n,e,t,i,r){if(e.subarray&&n.subarray){n.set(e.subarray(t,t+i),r);return}for(var s=0;s<i;s++)n[r+s]=e[t+s]},flattenChunks:function(n){var e,t,i,r,s,o;for(i=0,e=0,t=n.length;e<t;e++)i+=n[e].length;for(o=new Uint8Array(i),r=0,e=0,t=n.length;e<t;e++)s=n[e],o.set(s,r),r+=s.length;return o},Buf8:function(n){return new Uint8Array(n)},Buf16:function(n){return new Uint16Array(n)},Buf32:function(n){return new Int32Array(n)}},uo={arraySet:function(n,e,t,i,r){for(var s=0;s<i;s++)n[r+s]=e[t+s]},flattenChunks:function(n){return[].concat.apply([],n)},Buf8:function(n){return new Array(n)},Buf16:function(n){return new Array(n)},Buf32:function(n){return new Array(n)}};let xr=()=>{const n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";return xr=()=>n,n},Un=(n,e,t,i,r)=>(Un=xr()?lo.arraySet:uo.arraySet,Un(n,e,t,i,r)),gA=n=>(gA=xr()?lo.flattenChunks:uo.flattenChunks,gA(n)),br=n=>(br=xr()?lo.Buf8:uo.Buf8,br(n)),Er=n=>(Er=xr()?lo.Buf16:uo.Buf16,Er(n)),Ir=n=>(Ir=xr()?lo.Buf32:uo.Buf32,Ir(n)),MC=function(){let n=!0;try{String.fromCharCode.apply(null,[0])}catch{n=!1}return MC=()=>n,n},NC=function(){let n=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}return NC=()=>n,n},pA=function(n){for(var e=br(256),t=0;t<256;t++)e[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;return e[254]=e[254]=1,pA=i=>e[i],e[n]};function TC(n){var e,t,i,r,s,o=n.length,a=0;for(r=0;r<o;r++)t=n.charCodeAt(r),(t&64512)===55296&&r+1<o&&(i=n.charCodeAt(r+1),(i&64512)===56320&&(t=65536+(t-55296<<10)+(i-56320),r++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),s=0,r=0;s<a;r++)t=n.charCodeAt(r),(t&64512)===55296&&r+1<o&&(i=n.charCodeAt(r+1),(i&64512)===56320&&(t=65536+(t-55296<<10)+(i-56320),r++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e}function ZT(n,e){if(e<65534&&(n.subarray&&NC()||!n.subarray&&MC()))return String.fromCharCode.apply(null,RC(n,e));for(var t="",i=0;i<e;i++)t+=String.fromCharCode(n[i]);return t}function $T(n){for(var e=new Uint8Array(n.length),t=0,i=e.length;t<i;t++)e[t]=n.charCodeAt(t);return e}function e6(n,e){var t,i,r,s,o=e||n.length,a=new Array(o*2);for(i=0,t=0;t<o;){if(r=n[t++],r<128){a[i++]=r;continue}if(s=pA(r),s>4){a[i++]=65533,t+=s-1;continue}for(r&=s===2?31:s===3?15:7;s>1&&t<o;)r=r<<6|n[t++]&63,s--;if(s>1){a[i++]=65533;continue}r<65536?a[i++]=r:(r-=65536,a[i++]=55296|r>>10&1023,a[i++]=56320|r&1023)}return ZT(a,i)}function t6(n,e){var t;for(e=e||n.length,e>n.length&&(e=n.length),t=e-1;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+pA(n[t])>e?t:e}function n6(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}function mA(n,e,t,i){for(var r=n&65535|0,s=n>>>16&65535|0,o=0;t!==0;){o=t>2e3?2e3:t,t-=o;do r=r+e[i++]|0,s=s+r|0;while(--o);r%=65521,s%=65521}return r|s<<16|0}function i6(){for(var n,e=[],t=0;t<256;t++){n=t;for(var i=0;i<8;i++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e}let PC=function(){const n=i6();return PC=()=>n,n};function Vt(n,e,t,i){var r=PC(),s=i+t;n^=-1;for(var o=i;o<s;o++)n=n>>>8^r[(n^e[o])&255];return n^-1}var wc=30,r6=12;function s6(n,e){var t,i,r,s,o,a,l,c,u,f,h,A,d,g,p,m,y,C,w,E,I,b,S,Q,v;t=n.state,i=n.next_in,Q=n.input,r=i+(n.avail_in-5),s=n.next_out,v=n.output,o=s-(e-n.avail_out),a=s+(n.avail_out-257),l=t.dmax,c=t.wsize,u=t.whave,f=t.wnext,h=t.window,A=t.hold,d=t.bits,g=t.lencode,p=t.distcode,m=(1<<t.lenbits)-1,y=(1<<t.distbits)-1;e:do{d<15&&(A+=Q[i++]<<d,d+=8,A+=Q[i++]<<d,d+=8),C=g[A&m];t:for(;;){if(w=C>>>24,A>>>=w,d-=w,w=C>>>16&255,w===0)v[s++]=C&65535;else if(w&16){E=C&65535,w&=15,w&&(d<w&&(A+=Q[i++]<<d,d+=8),E+=A&(1<<w)-1,A>>>=w,d-=w),d<15&&(A+=Q[i++]<<d,d+=8,A+=Q[i++]<<d,d+=8),C=p[A&y];n:for(;;){if(w=C>>>24,A>>>=w,d-=w,w=C>>>16&255,w&16){if(I=C&65535,w&=15,d<w&&(A+=Q[i++]<<d,d+=8,d<w&&(A+=Q[i++]<<d,d+=8)),I+=A&(1<<w)-1,I>l){n.msg="invalid distance too far back",t.mode=wc;break e}if(A>>>=w,d-=w,w=s-o,I>w){if(w=I-w,w>u&&t.sane){n.msg="invalid distance too far back",t.mode=wc;break e}if(b=0,S=h,f===0){if(b+=c-w,w<E){E-=w;do v[s++]=h[b++];while(--w);b=s-I,S=v}}else if(f<w){if(b+=c+f-w,w-=f,w<E){E-=w;do v[s++]=h[b++];while(--w);if(b=0,f<E){w=f,E-=w;do v[s++]=h[b++];while(--w);b=s-I,S=v}}}else if(b+=f-w,w<E){E-=w;do v[s++]=h[b++];while(--w);b=s-I,S=v}for(;E>2;)v[s++]=S[b++],v[s++]=S[b++],v[s++]=S[b++],E-=3;E&&(v[s++]=S[b++],E>1&&(v[s++]=S[b++]))}else{b=s-I;do v[s++]=v[b++],v[s++]=v[b++],v[s++]=v[b++],E-=3;while(E>2);E&&(v[s++]=v[b++],E>1&&(v[s++]=v[b++]))}}else if((w&64)===0){C=p[(C&65535)+(A&(1<<w)-1)];continue n}else{n.msg="invalid distance code",t.mode=wc;break e}break}}else if((w&64)===0){C=g[(C&65535)+(A&(1<<w)-1)];continue t}else if(w&32){t.mode=r6;break e}else{n.msg="invalid literal/length code",t.mode=wc;break e}break}}while(i<r&&s<a);E=d>>3,i-=E,d-=E<<3,A&=(1<<d)-1,n.next_in=i,n.next_out=s,n.avail_in=i<r?5+(r-i):5-(i-r),n.avail_out=s<a?257+(a-s):257-(s-a),t.hold=A,t.bits=d}var Br=15,LC=852,OC=592,UC=0,wA=1,GC=2,o6=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a6=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c6=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l6=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function fo(n,e,t,i,r,s,o,a){var l=a.bits,c=0,u=0,f=0,h=0,A=0,d=0,g=0,p=0,m=0,y=0,C,w,E,I,b,S=null,Q=0,v,F=Er(Br+1),R=Er(Br+1),N=null,O=0,H,G,V;for(c=0;c<=Br;c++)F[c]=0;for(u=0;u<i;u++)F[e[t+u]]++;for(A=l,h=Br;h>=1&&F[h]===0;h--);if(A>h&&(A=h),h===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,a.bits=1,0;for(f=1;f<h&&F[f]===0;f++);for(A<f&&(A=f),p=1,c=1;c<=Br;c++)if(p<<=1,p-=F[c],p<0)return-1;if(p>0&&(n===UC||h!==1))return-1;for(R[1]=0,c=1;c<Br;c++)R[c+1]=R[c]+F[c];for(u=0;u<i;u++)e[t+u]!==0&&(o[R[e[t+u]]++]=u);if(n===UC?(S=N=o,v=19):n===wA?(S=o6,Q-=257,N=a6,O-=257,v=256):(S=c6,N=l6,v=-1),y=0,u=0,c=f,b=s,d=A,g=0,E=-1,m=1<<A,I=m-1,n===wA&&m>LC||n===GC&&m>OC)return 1;for(;;){H=c-g,o[u]<v?(G=0,V=o[u]):o[u]>v?(G=N[O+o[u]],V=S[Q+o[u]]):(G=96,V=0),C=1<<c-g,w=1<<d,f=w;do w-=C,r[b+(y>>g)+w]=H<<24|G<<16|V|0;while(w!==0);for(C=1<<c-1;y&C;)C>>=1;if(C!==0?(y&=C-1,y+=C):y=0,u++,--F[c]===0){if(c===h)break;c=e[t+o[u]]}if(c>A&&(y&I)!==E){for(g===0&&(g=A),b+=f,d=c-g,p=1<<d;d+g<h&&(p-=F[d+g],!(p<=0));)d++,p<<=1;if(m+=1<<d,n===wA&&m>LC||n===GC&&m>OC)return 1;E=y&I,r[E]=A<<24|d<<16|b-s|0}}return y!==0&&(r[b+y]=c-g<<24|64<<16|0),a.bits=A,0}var u6=0,zC=1,HC=2,_C=4,Ii=0,f6=1,A6=2,yt=-2,VC=-3,YC=-4,h6=-5,JC=8,KC=1,qC=2,jC=3,WC=4,XC=5,ZC=6,$C=7,e1=8,t1=9,n1=10,yc=11,cn=12,yA=13,i1=14,CA=15,r1=16,s1=17,o1=18,a1=19,Cc=20,xc=21,c1=22,l1=23,u1=24,f1=25,A1=26,xA=27,h1=28,d1=29,we=30,g1=31,d6=32,g6=852,p6=592;function p1(n){return(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24)}function m6(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=Er(320),this.work=Er(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w6(n){var e;return!n||!n.state?yt:(e=n.state,n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=KC,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=Ir(g6),e.distcode=e.distdyn=Ir(p6),e.sane=1,e.back=-1,Ii)}function y6(n){var e;return!n||!n.state?yt:(e=n.state,e.wsize=0,e.whave=0,e.wnext=0,w6(n))}function C6(n,e){var t,i;return!n||!n.state||(i=n.state,e<0?(t=0,e=-e):(t=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?yt:(i.window!==null&&i.wbits!==e&&(i.window=null),i.wrap=t,i.wbits=e,y6(n))}function x6(n,e){var t,i;return n?(i=new m6,n.state=i,i.window=null,t=C6(n,e),t!==Ii&&(n.state=null),t):yt}var m1=!0,bA,EA;function b6(n){if(m1){var e;for(bA=Ir(512),EA=Ir(32),e=0;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(fo(zC,n.lens,0,288,bA,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;fo(HC,n.lens,0,32,EA,0,n.work,{bits:5}),m1=!1}n.lencode=bA,n.lenbits=9,n.distcode=EA,n.distbits=5}function w1(n,e,t,i){var r,s=n.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=br(s.wsize)),i>=s.wsize?(Un(s.window,e,t-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),Un(s.window,e,t-i,r,s.wnext),i-=r,i?(Un(s.window,e,t-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0}function E6(n,e){var t,i,r,s,o,a,l,c,u,f,h,A,d,g,p=0,m,y,C,w,E,I,b,S,Q=br(4),v,F,R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!n||!n.state||!n.output||!n.input&&n.avail_in!==0)return yt;t=n.state,t.mode===cn&&(t.mode=yA),o=n.next_out,r=n.output,l=n.avail_out,s=n.next_in,i=n.input,a=n.avail_in,c=t.hold,u=t.bits,f=a,h=l,S=Ii;e:for(;;)switch(t.mode){case KC:if(t.wrap===0){t.mode=yA;break}for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(t.wrap&2&&c===35615){t.check=0,Q[0]=c&255,Q[1]=c>>>8&255,t.check=Vt(t.check,Q,2,0),c=0,u=0,t.mode=qC;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((c&255)<<8)+(c>>8))%31){n.msg="incorrect header check",t.mode=we;break}if((c&15)!==JC){n.msg="unknown compression method",t.mode=we;break}if(c>>>=4,u-=4,b=(c&15)+8,t.wbits===0)t.wbits=b;else if(b>t.wbits){n.msg="invalid window size",t.mode=we;break}t.dmax=1<<b,n.adler=t.check=1,t.mode=c&512?n1:cn,c=0,u=0;break;case qC:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(t.flags=c,(t.flags&255)!==JC){n.msg="unknown compression method",t.mode=we;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=we;break}t.head&&(t.head.text=c>>8&1),t.flags&512&&(Q[0]=c&255,Q[1]=c>>>8&255,t.check=Vt(t.check,Q,2,0)),c=0,u=0,t.mode=jC;case jC:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.head&&(t.head.time=c),t.flags&512&&(Q[0]=c&255,Q[1]=c>>>8&255,Q[2]=c>>>16&255,Q[3]=c>>>24&255,t.check=Vt(t.check,Q,4,0)),c=0,u=0,t.mode=WC;case WC:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.head&&(t.head.xflags=c&255,t.head.os=c>>8),t.flags&512&&(Q[0]=c&255,Q[1]=c>>>8&255,t.check=Vt(t.check,Q,2,0)),c=0,u=0,t.mode=XC;case XC:if(t.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.length=c,t.head&&(t.head.extra_len=c),t.flags&512&&(Q[0]=c&255,Q[1]=c>>>8&255,t.check=Vt(t.check,Q,2,0)),c=0,u=0}else t.head&&(t.head.extra=null);t.mode=ZC;case ZC:if(t.flags&1024&&(A=t.length,A>a&&(A=a),A&&(t.head&&(b=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),Un(t.head.extra,i,s,A,b)),t.flags&512&&(t.check=Vt(t.check,i,A,s)),a-=A,s+=A,t.length-=A),t.length))break e;t.length=0,t.mode=$C;case $C:if(t.flags&2048){if(a===0)break e;A=0;do b=i[s+A++],t.head&&b&&t.length<65536&&(t.head.name+=String.fromCharCode(b));while(b&&A<a);if(t.flags&512&&(t.check=Vt(t.check,i,A,s)),a-=A,s+=A,b)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=e1;case e1:if(t.flags&4096){if(a===0)break e;A=0;do b=i[s+A++],t.head&&b&&t.length<65536&&(t.head.comment+=String.fromCharCode(b));while(b&&A<a);if(t.flags&512&&(t.check=Vt(t.check,i,A,s)),a-=A,s+=A,b)break e}else t.head&&(t.head.comment=null);t.mode=t1;case t1:if(t.flags&512){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(t.check&65535)){n.msg="header crc mismatch",t.mode=we;break}c=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=cn;break;case n1:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.adler=t.check=p1(c),c=0,u=0,t.mode=yc;case yc:if(t.havedict===0)return n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,t.hold=c,t.bits=u,A6;n.adler=t.check=1,t.mode=cn;case cn:case yA:if(t.last){c>>>=u&7,u-=u&7,t.mode=xA;break}for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}switch(t.last=c&1,c>>>=1,u-=1,c&3){case 0:t.mode=i1;break;case 1:b6(t),t.mode=Cc;break;case 2:t.mode=s1;break;case 3:n.msg="invalid block type",t.mode=we}c>>>=2,u-=2;break;case i1:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){n.msg="invalid stored block lengths",t.mode=we;break}t.length=c&65535,c=0,u=0,t.mode=CA;case CA:t.mode=r1;case r1:if(A=t.length,A){if(A>a&&(A=a),A>l&&(A=l),A===0)break e;Un(r,i,s,A,o),a-=A,s+=A,l-=A,o+=A,t.length-=A;break}t.mode=cn;break;case s1:for(;u<14;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(t.nlen=(c&31)+257,c>>>=5,u-=5,t.ndist=(c&31)+1,c>>>=5,u-=5,t.ncode=(c&15)+4,c>>>=4,u-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=we;break}t.have=0,t.mode=o1;case o1:for(;t.have<t.ncode;){for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.lens[R[t.have++]]=c&7,c>>>=3,u-=3}for(;t.have<19;)t.lens[R[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,v={bits:t.lenbits},S=fo(u6,t.lens,0,19,t.lencode,0,t.work,v),t.lenbits=v.bits,S){n.msg="invalid code lengths set",t.mode=we;break}t.have=0,t.mode=a1;case a1:for(;t.have<t.nlen+t.ndist;){for(;p=t.lencode[c&(1<<t.lenbits)-1],m=p>>>24,y=p>>>16&255,C=p&65535,!(m<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(C<16)c>>>=m,u-=m,t.lens[t.have++]=C;else{if(C===16){for(F=m+2;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c>>>=m,u-=m,t.have===0){n.msg="invalid bit length repeat",t.mode=we;break}b=t.lens[t.have-1],A=3+(c&3),c>>>=2,u-=2}else if(C===17){for(F=m+3;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=m,u-=m,b=0,A=3+(c&7),c>>>=3,u-=3}else{for(F=m+7;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=m,u-=m,b=0,A=11+(c&127),c>>>=7,u-=7}if(t.have+A>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=we;break}for(;A--;)t.lens[t.have++]=b}}if(t.mode===we)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=we;break}if(t.lenbits=9,v={bits:t.lenbits},S=fo(zC,t.lens,0,t.nlen,t.lencode,0,t.work,v),t.lenbits=v.bits,S){n.msg="invalid literal/lengths set",t.mode=we;break}if(t.distbits=6,t.distcode=t.distdyn,v={bits:t.distbits},S=fo(HC,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,v),t.distbits=v.bits,S){n.msg="invalid distances set",t.mode=we;break}t.mode=Cc;case Cc:t.mode=xc;case xc:if(a>=6&&l>=258){n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,t.hold=c,t.bits=u,s6(n,h),o=n.next_out,r=n.output,l=n.avail_out,s=n.next_in,i=n.input,a=n.avail_in,c=t.hold,u=t.bits,t.mode===cn&&(t.back=-1);break}for(t.back=0;p=t.lencode[c&(1<<t.lenbits)-1],m=p>>>24,y=p>>>16&255,C=p&65535,!(m<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(y&&(y&240)===0){for(w=m,E=y,I=C;p=t.lencode[I+((c&(1<<w+E)-1)>>w)],m=p>>>24,y=p>>>16&255,C=p&65535,!(w+m<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=w,u-=w,t.back+=w}if(c>>>=m,u-=m,t.back+=m,t.length=C,y===0){t.mode=A1;break}if(y&32){t.back=-1,t.mode=cn;break}if(y&64){n.msg="invalid literal/length code",t.mode=we;break}t.extra=y&15,t.mode=c1;case c1:if(t.extra){for(F=t.extra;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.length+=c&(1<<t.extra)-1,c>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=l1;case l1:for(;p=t.distcode[c&(1<<t.distbits)-1],m=p>>>24,y=p>>>16&255,C=p&65535,!(m<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((y&240)===0){for(w=m,E=y,I=C;p=t.distcode[I+((c&(1<<w+E)-1)>>w)],m=p>>>24,y=p>>>16&255,C=p&65535,!(w+m<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=w,u-=w,t.back+=w}if(c>>>=m,u-=m,t.back+=m,y&64){n.msg="invalid distance code",t.mode=we;break}t.offset=C,t.extra=y&15,t.mode=u1;case u1:if(t.extra){for(F=t.extra;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.offset+=c&(1<<t.extra)-1,c>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=we;break}t.mode=f1;case f1:if(l===0)break e;if(A=h-l,t.offset>A){if(A=t.offset-A,A>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=we;break}A>t.wnext?(A-=t.wnext,d=t.wsize-A):d=t.wnext-A,A>t.length&&(A=t.length),g=t.window}else g=r,d=o-t.offset,A=t.length;A>l&&(A=l),l-=A,t.length-=A;do r[o++]=g[d++];while(--A);t.length===0&&(t.mode=xc);break;case A1:if(l===0)break e;r[o++]=t.length,l--,t.mode=xc;break;case xA:if(t.wrap){for(;u<32;){if(a===0)break e;a--,c|=i[s++]<<u,u+=8}if(h-=l,n.total_out+=h,t.total+=h,h&&(n.adler=t.check=t.flags?Vt(t.check,r,h,o-h):mA(t.check,r,h,o-h)),h=l,(t.flags?c:p1(c))!==t.check){n.msg="incorrect data check",t.mode=we;break}c=0,u=0}t.mode=h1;case h1:if(t.wrap&&t.flags){for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=we;break}c=0,u=0}t.mode=d1;case d1:S=f6;break e;case we:S=VC;break e;case g1:return YC;case d6:default:return yt}return n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,t.hold=c,t.bits=u,(t.wsize||h!==n.avail_out&&t.mode<we&&(t.mode<xA||e!==_C))&&w1(n,n.output,n.next_out,h-n.avail_out),f-=n.avail_in,h-=n.avail_out,n.total_in+=f,n.total_out+=h,t.total+=h,t.wrap&&h&&(n.adler=t.check=t.flags?Vt(t.check,r,h,n.next_out-h):mA(t.check,r,h,n.next_out-h)),n.data_type=t.bits+(t.last?64:0)+(t.mode===cn?128:0)+(t.mode===Cc||t.mode===CA?256:0),(f===0&&h===0||e===_C)&&S===Ii&&(S=h6),S}function I6(n){if(!n||!n.state)return yt;var e=n.state;return e.window&&(e.window=null),n.state=null,Ii}function B6(n,e){var t;return!n||!n.state||(t=n.state,(t.wrap&2)===0)?yt:(t.head=e,e.done=!1,Ii)}function y1(n,e){var t=e.length,i,r,s;return!n||!n.state||(i=n.state,i.wrap!==0&&i.mode!==yc)?yt:i.mode===yc&&(r=1,r=mA(r,e,t,0),r!==i.check)?VC:(s=w1(n,e,t,t),s?(i.mode=g1,YC):(i.havedict=1,Ii))}const IA={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function v6(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var BA=Object.prototype.toString;class bc{constructor(e){if(!(this instanceof bc))return new bc(e);this.options=XT({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v6,this.strm.avail_out=0;var i=x6(this.strm,t.windowBits);if(i!==Ei)throw new Error(IA[i]);if(this.header=new n6,B6(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=TC(t.dictionary):BA.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(i=y1(this.strm,t.dictionary),i!==Ei)))throw new Error(IA[i])}push(e,t){var i=this.strm,r=this.options.chunkSize,s=this.options.dictionary,o,a,l,c,u,f,h=!1;if(this.ended)return!1;a=t===~~t?t:t===!0?pc:kC,typeof e=="string"?i.input=$T(e):BA.call(e)==="[object ArrayBuffer]"?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(i.avail_out===0&&(i.output=br(r),i.next_out=0,i.avail_out=r),o=E6(i,kC),o===qT&&s&&(typeof s=="string"?f=TC(s):BA.call(s)==="[object ArrayBuffer]"?f=new Uint8Array(s):f=s,o=y1(this.strm,f)),o===jT&&h===!0&&(o=Ei,h=!1),o!==mc&&o!==Ei)return this.onEnd(o),this.ended=!0,!1;i.next_out&&(i.avail_out===0||o===mc||i.avail_in===0&&(a===pc||a===FC))&&(this.options.to==="string"?(l=t6(i.output,i.next_out),c=i.next_out-l,u=e6(i.output,l),i.next_out=c,i.avail_out=r-c,c&&Un(i.output,i.output,l,c,0),this.onData(u)):this.onData(RC(i.output,i.next_out))),i.avail_in===0&&i.avail_out===0&&(h=!0)}while((i.avail_in>0||i.avail_out===0)&&o!==mc);return o===mc&&(a=pc),a===pc?(o=I6(this.strm),this.onEnd(o),this.ended=!0,o===Ei):(a===FC&&(this.onEnd(Ei),i.avail_out=0),!0)}onData(e){this.chunks.push(e)}onEnd(e){e===Ei&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=gA(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg}}function S6(n,e){var t=new bc(e);if(t.push(n,!0),t.err)throw t.msg||IA[t.err];return t.result}var Q6=S6,Bi={};Bi.d=(n,e)=>{for(var t in e)Bi.o(e,t)&&!Bi.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},Bi.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),Bi.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var vA={};Bi.r(vA),Bi.d(vA,{ChunkSliceResult:()=>Sr,DecompressResult:()=>Qr,__wbg_Error_52673b7de5a0ca89:()=>L6,__wbg___wbindgen_throw_dd24417ed36fc46e:()=>O6,__wbg_set_wasm:()=>C1,decompress_all:()=>B1,decompress_block:()=>P6,decompress_chunk_slice:()=>v1});const D6="data:application/wasm;base64,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fGooAgAiAkF4cSIAaiEDAkACQCACQQFxDQAgAkECcUUNASABKAIAIgIgAGohAAJAIAEgAmsiAUEAKALAoEBHDQAgAygCBEEDcUEDRw0BQQAgADYCuKBAIAMgAygCBEF+cTYCBCABIABBAXI2AgQgAyAANgIADwsgASACEBALAkACQAJAAkACQAJAIAMoAgQiAkECcQ0AIANBACgCxKBARg0CIANBACgCwKBARg0DIAMgAkF4cSICEBAgASACIABqIgBBAXI2AgQgASAAaiAANgIAIAFBACgCwKBARw0BQQAgADYCuKBADwsgAyACQX5xNgIEIAEgAEEBcjYCBCABIABqIAA2AgALIABBgAJJDQIgASAAEBFBACEBQQBBACgC2KBAQX9qIgA2AtigQCAADQQCQEEAKAKgnkAiAEUNAEEAIQEDQCABQQFqIQEgACgCCCIADQALC0EAIAFB/x8gAUH/H0sbNgLYoEAPC0EAIAE2AsSgQEEAQQAoArygQCAAaiIANgK8oEAgASAAQQFyNgIEAkAgAUEAKALAoEBHDQBBAEEANgK4oEBBAEEANgLAoEALIABBACgC0KBAIgRNDQNBACgCxKBAIgBFDQNBACECQQAoArygQCIFQSlJDQJBmJ7AACEBA0ACQCABKAIAIgMgAEsNACAAIAMgASgCBGpJDQQLIAEoAgghAQwACwtBACABNgLAoEBBAEEAKAK4oEAgAGoiADYCuKBAIAEgAEEBcjYCBCABIABqIAA2AgAPCwJAAkBBACgCsKBAIgNBASAAQQN2dCICcQ0AQQAgAyACcjYCsKBAIABB+AFxQaiewABqIgAhAwwBCyAAQfgBcSIDQaiewABqIQAgA0GwnsAAaigCACEDCyAAIAE2AgggAyABNgIMIAEgADYCDCABIAM2AggPCwJAQQAoAqCeQCIBRQ0AQQAhAgNAIAJBAWohAiABKAIIIgENAAsLQQAgAkH/HyACQf8fSxs2AtigQCAFIARNDQBBAEF/NgLQoEALC44FAQd/AkACQCAAKAIIIgNBgICAwAFxRQ0AAkACQAJAAkACQCADQYCAgIABcUUNACAALwEOIgQNAUEAIQIMAgsCQCACQRBJDQAgASACEAYhBQwECwJAIAINAEEAIQJBACEFDAQLIAJBA3EhBgJAAkAgAkEETw0AQQAhBUEAIQcMAQsg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IgJBAWoiAzYCACADRQ0BIAAoAgBBf0YNAiAAKAIQIQAgASACNgIAIAAPCxBdCwALEF8AC1ABAX8CQCACIAAoAgAgACgCCCIDa00NACAAIAMgAkEBQQEQFyAAKAIIIQMLAkAgAkUNACAAKAIEIANqIAEgAvwKAAALIAAgAyACajYCCEEAC0wBAX8CQCAAKAIAIgBBDGooAgAiAUUNACAAQRBqKAIAIAFBARBXCwJAIABBf0YNACAAIAAoAgRBf2oiATYCBCABDQAgAEEcQQQQVwsLRQACQAJAIAFBCUkNACABIAAQDyEBDAELIAAQAiEBCwJAIAFFDQAgAUF8ai0AAEEDcUUNACAARQ0AIAFBACAA/AsACyABC1IBAn9BACEBQQBBACgC6KBAIgJBAWo2AuigQAJAIAJBAEgNAEEBIQFBAC0A5KBADQBBACAAOgDkoEBBAEEAKALgoEBBAWo2AuCgQEECIQELIAELRwECfyABKAIEIQIgASgCACEDEGsCQEEIQQQQWiIBDQBBBEEIEGEACyABIAI2AgQgASADNgIAIABB8JfAADYCBCAAIAE2AgALOAACQAJAIAAgAksNACABIAJLDQEgACABTQ0BIAAgASADECsACyAAIAIgAxAsAAsgASACIAMQLQALQQEBfyMAQSBrIgMkACADQQA2AhAgA0EBNgIEIANCBDcCCCADIAE2AhwgAyAANgIYIAMgA0EYajYCACADIAIQQQALOQACQCACQYCAxABGDQAgACACIAEoAhARBQBFDQBBAQ8LAkAgAw0AQQAPCyAAIAMgBCABKAIMEQcACzYBAX8jAEEgayIBJAAgAUEANgIYIAFBATYCDCABQaSZwAA2AgggAUIENwIQIAFBCGogABBBAAsnAAJAIAAgARBPRQ0AAkAgAEUNABBrIAAgARBaIgFFDQELIAEPCwALLAIBfwF+IwBBEGsiASQAIAApAgAhAiABIAA2AgwgASACNwIEIAFBBGoQZgALLQEBfyMAQRBrIgEkACABIAApAgA3AgggAUEIakH0lsAAIAAoAghBAUEAECEACyoBAX8jAEEQayIDJAAgAyACNgIMIAMgATYCCCADIAA2AgQgA0EEahBnAAsqAQF/IwBBEGsiAiQAIAJBATsBDCACIAE2AgggAiAANgIEIAJBBGoQPgALKQEBfwJAIAAoAgAiAUGAgICAeHJBgICAgHhGDQAgACgCBCABQQEQVwsLHgEBfwJAIAAoAgAiAkUNACABIAIgACgCBBBTDwsACyAAAkAgASgCAEUNACAAQfCXwAA2AgQgACABNgIADwsACxsBAX8QayAAQQRqQQQQWiIBIAA2AgAgAUEEagsjAQF/AkBBjIvAABAwIgANAEHAisAAQTpB/IrAABBAAAsgAAsXAAJAIAFBCUkNACABIAAQDw8LIAAQAgsfAAJAIABBgICAgHhyQYCAgIB4Rg0AIAEgAEEBEFcLCxwBAX8CQCAAKAIAIgFFDQAgACgCBCABQQEQVwsLFgACQCAARQ0AIAAgARBhAAsgAhA8AAsVACAAQXxqIgAgACgCAEEEakEEEFcLGgEBfyABIABBACgC3KBAIgJBAyACGxEEAAALHQAgAEEIakEAKQKYlkA3AgAgAEEAKQKQlkA3AgALHQAgAEEIakEAKQKolkA3AgAgAEEAKQKglkA3AgALFQAgAWlBAUYgAEGAgICAeCABa01xCxIAAkAgAUUNACAAIAEgAhBXCwsSACAAIAEgAiADIARBACAFEAMLFQACQCAARQ0AIAAgACgCqFoRAgALCxYAIAAoAgAgASACIAAoAgQoAgwRBwALDQAgACABIAIgAxAHDwsQACABIAAoAgAgACgCBBBTCxMAIABB8JfAADYCBCAAIAE2AgALCwAgACABIAIQLw8LCgAgACABEGoaAAsLACAAIwBqJAAjAAsJACAAIAEQRw8LCQAgACABEDYPCwkAIAAgARBMDwsMAEG4iMAAQRsQXgALCQAgACABEGMACw0AQdOIwABBzwAQXgALDAAgACABKQIANwMACwkAIAEgABBcAAsNACABQdicwABBGBAKCwgAIAAgARAACwgAIAAgARABCwkAIAAoAgAQUgsHACAAECMACwcAIAAQPwALCQAgAEEANgIACwUAQQAPCwUAEGwACwMADwsDAAALC4YdAgBBgIDAAAvwHC9ob21lL2NkaWVzaC8uY2FyZ28vcmVnaXN0cnkvc3JjL2luZGV4LmNyYXRlcy5pby0xOTQ5Y2Y4YzZiNWI1NTdmL3dhc20tYmluZGdlbi0wLjIuMTA2L3NyYy9jb252ZXJ0L3NsaWNlcy5ycwAvaG9tZS9jZGllc2gvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9pbmRleC5jcmF0ZXMuaW8tMTk0OWNmOGM2YjViNTU3Zi93YXNtLWJpbmRnZW4tMC4yLjEwNi9zcmMvZXh0ZXJucmVmLnJzAC9ob21lL2NkaWVzaC8ucnVzdHVwL3Rvb2xjaGFpbnMvc3RhYmxlLXg4Nl82NC11bmtub3duLWxpbnV4LWdudS9saWIvcnVzdGxpYi9zcmMvcnVzdC9saWJyYXJ5L2FsbG9jL3NyYy9zbGljZS5ycwAvaG9tZS9jZGllc2gvLnJ1c3R1cC90b29sY2hhaW5zL3N0YWJsZS14ODZfNjQtdW5rbm93bi1saW51eC1nbnUvbGliL3J1c3RsaWIvc3JjL3J1c3QvbGlicmFyeS9hbGxvYy9zcmMvcmF3X3ZlYy9tb2QucnMAL3J1c3RjL2VkNjFlN2Q3ZTI0MjQ5NGZiNzA1N2YyNjU3MzAwZDllNzdiYjRmY2IvbGlicmFyeS9hbGxvYy9zcmMvcmF3X3ZlYy9tb2QucnMAL3J1c3QvZGVwcy9kbG1hbGxvYy0wLjIuMTAvc3JjL2RsbWFsbG9jLnJzAGxpYnJhcnkvc3RkL3NyYy9hbGxvYy5ycwAvaG9tZS9jZGllc2gvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9pbmRleC5jcmF0ZXMuaW8tMTk0OWNmOGM2YjViNTU3Zi9saWJkZWZsYXRlci0xLjI1LjAvc3JjL2xpYi5ycwBFARAAdQAAACoCAAARAAAA1QAQAG8AAAC9AQAAHQAAAGF0dGVtcHRlZCB0byB0YWtlIG93bmVyc2hpcCBvZiBSdXN0IHZhbHVlIHdoaWxlIGl0IHdhcyBib3Jyb3dlZAClAhAACgAAAF0AAAAWAAAAaW52YWxpZCBiZ3pmIGhlYWRlcgClAhAACgAAACkAAAAJAAAApQIQAAoAAAAqAAAACQAAAKUCEAAKAAAAKwAAAAkAAAClAhAACgAAACwAAAAJAAAApQIQAAoAAAAwAAAAFgAAAGRlY29tcHJlc3Npb24gZmFpbGVkpQIQAAoAAAAvAAAAHgAAAKUCEAAKAAAApQAAACQAAAClAhAACgAAAKYAAAAkAAAApQIQAAoAAACnAAAAFgAAAKUCEAAKAAAAxQAAABQAAAClAhAACgAAAMYAAAAUAAAApQIQAAoAAADbAAAAGAAAAKUCEAAKAAAA3AAAABgAAAClAhAACgAAANMAAAAxAAAAAAAQAGwAAAAjAQAADgAAAG51bGwgcG9pbnRlciBwYXNzZWQgdG8gcnVzdHJlY3Vyc2l2ZSB1c2Ugb2YgYW4gb2JqZWN0IGRldGVjdGVkIHdoaWNoIHdvdWxkIGxlYWQgdG8gdW5zYWZlIGFsaWFzaW5nIGluIHJ1c3QAAG0AEABnAAAAfwAAABEAAABtABAAZwAAAIwAAAARAAAAbGliZGVmbGF0ZV9kZWZsYXRlX2RlY29tcHJlc3MgcmV0dXJuZWQgYW4gdW5rbm93biBlcnJvciB0eXBlOiB0aGlzIGlzIGFuIGludGVybmFsIGJ1ZyB0aGF0ICoqbXVzdCoqIGJlIGZpeGVkUAIQAF8AAAAMAQAAFQAAAGxpYmRlZmxhdGVfYWxsb2NfZGVjb21wcmVzc29yIHJldHVybmVkIE5VTEw6IG91dCBvZiBtZW1vcnkAAFACEABfAAAAnAAAABEAAAAMAAAAAQAAAAIAAAAAAAAAAAAAABAREgAIBwkGCgULBAwDDQIOAQ8AAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAAAAAAAEAAAACAAAAAwAAAAQAAQAFAAEABwACAAkAAgANAAMAEQADABkABAAhAAQAMQAFAEEABQBhAAYAgQAGAMEABwABAQcAgQEIAAECCAABAwkAAQQJAAEGCgABCAoAAQwLAAEQCwABGAwAASAMAAEwDQABQA0AAWANAAFgDQABYAAAAIAAAAGAAAACgAAAA4AAAASAAAAFgAAABoAAAAeAAAAIgAAACYAAAAqAAAALgAAADIAAAA2AAAAOgAAAD4AAABCAAAARgAAAEoAAABOAAAAUgAAAFYAAABaAAAAXgAAAGIAAABmAAAAagAAAG4AAAByAAAAdgAAAHoAAAB+AAAAggAAAIYAAACKAAAAjgAAAJIAAACWAAAAmgAAAJ4AAACiAAAApgAAAKoAAACuAAAAsgAAALYAAAC6AAAAvgAAAMIAAADGAAAAygAAAM4AAADSAAAA1gAAANoAAADeAAAA4gAAAOYAAADqAAAA7gAAAPIAAAD2AAAA+gAAAP4AAAECAAABBgAAAQoAAAEOAAABEgAAARYAAAEaAAABHgAAASIAAAEmAAABKgAAAS4AAAEyAAABNgAAAToAAAE+AAABQgAAAUYAAAFKAAABTgAAAVIAAAFWAAABWgAAAV4AAAFiAAABZgAAAWoAAAFuAAABcgAAAXYAAAF6AAABfgAAAYIAAAGGAAABigAAAY4AAAGSAAABlgAAAZoAAAGeAAABogAAAaYAAAGqAAABrgAAAbIAAAG2AAABugAAAb4AAAHCAAABxgAAAcoAAAHOAAAB0gAAAdYAAAHaAAAB3gAAAeIAAAHmAAAB6gAAAe4AAAHyAAAB9gAAAfoAAAH+AAACAgAAAgYAAAIKAAACDgAAAhIAAAIWAAACGgAAAh4AAAIiAAACJgAAAioAAAIuAAACMgAAAjYAAAI6AAACPgAAAkIAAAJGAAACSgAAAk4AAAJSAAACVgAAAloAAAJeAAACYgAAAmYAAAJqAAACbgAAAnIAAAJ2AAACegAAAn4AAAKCAAAChgAAAooAAAKOAAACkgAAApYAAAKaAAACngAAAqIAAAKmAAACqgAAAq4AAAKyAAACtgAAAroAAAK+AAACwgAAAsYAAALKAAACzgAAAtIAAALWAAAC2gAAAt4AAALiAAAC5gAAAuoAAALuAAAC8gAAAvYAAAL6AAAC/gAAAwIAAAMGAAADCgAAAw4AAAMSAAADFgAAAxoAAAMeAAADIgAAAyYAAAMqAAADLgAAAzIAAAM2AAADOgAAAz4AAANCAAADRgAAA0oAAANOAAADUgAAA1YAAANaAAADXgAAA2IAAANmAAADagAAA24AAANyAAADdgAAA3oAAAN+AAADggAAA4YAAAOKAAADjgAAA5IAAAOWAAADmgAAA54AAAOiAAADpgAAA6oAAAOuAAADsgAAA7YAAAO6AAADvgAAA8IAAAPGAAADygAAA84AAAPSAAAD1gAAA9oAAAPeAAAD4gAAA+YAAAPqAAAD7gAAA/IAAAP2AAAD+gAAA/4AAoAAAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgABAAsAAQANAAEADwABABEAAgATAAIAFwACABsAAgAfAAMAIwADACsAAwAzAAMAOwAEAEMABABTAAQAYwAEAHMABQCDAAUAowAFAMMABQDjAAAAAgEAAAIBAAACAW1dy9YsUOtjeEGmV3Ebi7nyfVy2Bv6hO/Xnf5Lkw1AabWVtb3J5IGFsbG9jYXRpb24gb2YgIGJ5dGVzIGZhaWxlZAAAMAsQABUAAABFCxAADQAAADcCEAAYAAAAZAEAAAkAAAAAAAAACAAAAAQAAAAFAAAABgAAAAcAAAAIAAAACQAAAAwAAAAEAAAACgAAAAsAAAAMAAAAAAAAAAgAAAAEAAAADQAAAA4AAAAPAAAAEAAAABEAAAAQAAAABAAAABIAAAATAAAAFAAAAAgAAAC7ARAAUAAAACoCAAARAAAAAAAAAAgAAAAEAAAAFQAAAGFzc2VydGlvbiBmYWlsZWQ6IHBzaXplID49IHNpemUgKyBtaW5fb3ZlcmhlYWQAAAwCEAAqAAAAsQQAAAkAAABhc3NlcnRpb24gZmFpbGVkOiBwc2l6ZSA8PSBzaXplICsgbWF4X292ZXJoZWFkAAAMAhAAKgAAALcEAAANAAAACQAAAAwAAAAEAAAAFgAAAGNhcGFjaXR5IG92ZXJmbG93AAAAkAwQABEAAAAwMDAxMDIwMzA0MDUwNjA3MDgwOTEwMTExMjEzMTQxNTE2MTcxODE5MjAyMTIyMjMyNDI1MjYyNzI4MjkzMDMxMzIzMzM0MzUzNjM3MzgzOTQwNDE0MjQzNDQ0NTQ2NDc0ODQ5NTA1MTUyNTM1NDU1NTY1NzU4NTk2MDYxNjI2MzY0NjU2NjY3Njg2OTcwNzE3MjczNzQ3NTc2Nzc3ODc5ODA4MTgyODM4NDg1ODY4Nzg4ODk5MDkxOTI5Mzk0OTU5Njk3OTg5OQEAAAAAAAAAcmFuZ2Ugc3RhcnQgaW5kZXggIG91dCBvZiByYW5nZSBmb3Igc2xpY2Ugb2YgbGVuZ3RoIHwNEAASAAAAjg0QACIAAAByYW5nZSBlbmQgaW5kZXggwA0QABAAAACODRAAIgAAAHNsaWNlIGluZGV4IHN0YXJ0cyBhdCAgYnV0IGVuZHMgYXQgAOANEAAWAAAA9g0QAA0AAABpbmRleCBvdXQgb2YgYm91bmRzOiB0aGUgbGVuIGlzICBidXQgdGhlIGluZGV4IGlzIAAAFA4QACAAAAA0DhAAEgAAAFJlZkNlbGwgYWxyZWFkeSBib3Jyb3dlZABB8JzAAAsEBAAAAAApBG5hbWUBIgFZH19fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIAPAlwcm9kdWNlcnMBDHByb2Nlc3NlZC1ieQIGd2FscnVzBjAuMjQuNAx3YXNtLWJpbmRnZW4HMC4yLjEwNg==";let j;function C1(n){j=n}function k6(n){Ao===ln.length&&ln.push(ln.length+1);const e=Ao;return Ao=ln[e],ln[e]=n,e}function F6(n){n<132||(ln[n]=Ao,Ao=n)}function x1(n,e){return n=n>>>0,R6().subarray(n/4,n/4+e)}function SA(n,e){return n=n>>>0,QA().subarray(n/1,n/1+e)}let vr=null;function Oe(){return(vr===null||vr.buffer.detached===!0||vr.buffer.detached===void 0&&vr.buffer!==j.memory.buffer)&&(vr=new DataView(j.memory.buffer)),vr}function b1(n,e){return n=n>>>0,T6(n,e)}let Ec=null;function R6(){return(Ec===null||Ec.byteLength===0)&&(Ec=new Uint32Array(j.memory.buffer)),Ec}let Ic=null;function QA(){return(Ic===null||Ic.byteLength===0)&&(Ic=new Uint8Array(j.memory.buffer)),Ic}function M6(n){return ln[n]}let ln=new Array(128).fill(void 0);ln.push(void 0,null,!0,!1);let Ao=ln.length;function DA(n,e){const t=e(n.length*1,1)>>>0;return QA().set(n,t/1),vc=n.length,t}function kA(n){const e=M6(n);return F6(n),e}let Bc=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Bc.decode();const N6=2146435072;let FA=0;function T6(n,e){return FA+=e,FA>=N6&&(Bc=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),Bc.decode(),FA=e),Bc.decode(QA().subarray(n,n+e))}let vc=0;const E1=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>j.__wbg_chunksliceresult_free(n>>>0,1)),I1=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>j.__wbg_decompressresult_free(n>>>0,1));class Sr{static __wrap(e){e=e>>>0;const t=Object.create(Sr.prototype);return t.__wbg_ptr=e,E1.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,E1.unregister(this),e}free(){const e=this.__destroy_into_raw();j.__wbg_chunksliceresult_free(e,0)}get cpositions(){try{const r=j.__wbindgen_add_to_stack_pointer(-16);j.chunksliceresult_cpositions(r,this.__wbg_ptr);var e=Oe().getInt32(r+0,!0),t=Oe().getInt32(r+4,!0),i=x1(e,t).slice();return j.__wbindgen_export(e,t*4,4),i}finally{j.__wbindgen_add_to_stack_pointer(16)}}get dpositions(){try{const r=j.__wbindgen_add_to_stack_pointer(-16);j.chunksliceresult_dpositions(r,this.__wbg_ptr);var e=Oe().getInt32(r+0,!0),t=Oe().getInt32(r+4,!0),i=x1(e,t).slice();return j.__wbindgen_export(e,t*4,4),i}finally{j.__wbindgen_add_to_stack_pointer(16)}}get buffer(){try{const r=j.__wbindgen_add_to_stack_pointer(-16);j.chunksliceresult_buffer(r,this.__wbg_ptr);var e=Oe().getInt32(r+0,!0),t=Oe().getInt32(r+4,!0),i=SA(e,t).slice();return j.__wbindgen_export(e,t*1,1),i}finally{j.__wbindgen_add_to_stack_pointer(16)}}}Symbol.dispose&&(Sr.prototype[Symbol.dispose]=Sr.prototype.free);class Qr{static __wrap(e){e=e>>>0;const t=Object.create(Qr.prototype);return t.__wbg_ptr=e,I1.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,I1.unregister(this),e}free(){const e=this.__destroy_into_raw();j.__wbg_decompressresult_free(e,0)}get bytes_read(){return j.decompressresult_bytes_read(this.__wbg_ptr)>>>0}get data(){try{const r=j.__wbindgen_add_to_stack_pointer(-16);j.decompressresult_data(r,this.__wbg_ptr);var e=Oe().getInt32(r+0,!0),t=Oe().getInt32(r+4,!0),i=SA(e,t).slice();return j.__wbindgen_export(e,t*1,1),i}finally{j.__wbindgen_add_to_stack_pointer(16)}}}Symbol.dispose&&(Qr.prototype[Symbol.dispose]=Qr.prototype.free);function B1(n){try{const o=j.__wbindgen_add_to_stack_pointer(-16),a=DA(n,j.__wbindgen_export2),l=vc;j.decompress_all(o,a,l);var e=Oe().getInt32(o+0,!0),t=Oe().getInt32(o+4,!0),i=Oe().getInt32(o+8,!0),r=Oe().getInt32(o+12,!0);if(r)throw kA(i);var s=SA(e,t).slice();return j.__wbindgen_export(e,t*1,1),s}finally{j.__wbindgen_add_to_stack_pointer(16)}}function P6(n){try{const r=j.__wbindgen_add_to_stack_pointer(-16),s=DA(n,j.__wbindgen_export2),o=vc;j.decompress_block(r,s,o);var e=Oe().getInt32(r+0,!0),t=Oe().getInt32(r+4,!0),i=Oe().getInt32(r+8,!0);if(i)throw kA(t);return Qr.__wrap(e)}finally{j.__wbindgen_add_to_stack_pointer(16)}}function v1(n,e,t,i,r){try{const l=j.__wbindgen_add_to_stack_pointer(-16),c=DA(n,j.__wbindgen_export2),u=vc;j.decompress_chunk_slice(l,c,u,e,t,i,r);var s=Oe().getInt32(l+0,!0),o=Oe().getInt32(l+4,!0),a=Oe().getInt32(l+8,!0);if(a)throw kA(o);return Sr.__wrap(s)}finally{j.__wbindgen_add_to_stack_pointer(16)}}function L6(n,e){const t=Error(b1(n,e));return k6(t)}function O6(n,e){throw new Error(b1(n,e))}let ho=null,RA=null;async function S1(){return ho||(RA||(RA=(async()=>{const e=await(await fetch(D6)).arrayBuffer(),{instance:t}=await WebAssembly.instantiate(e,{"./bgzf_wasm_bg.js":vA});return ho=t.exports,C1(ho),ho})()),RA)}async function U6(n){return await S1(),B1(n)}async function G6(n,e,t,i,r){await S1();const s=v1(n,e,t,i,r),o=s.buffer,a=[...s.cpositions],l=[...s.dpositions];return s.free(),{buffer:o,cpositions:a,dpositions:l}}function z6(n){return n.length>=2&&n[0]===31&&n[1]===139}async function H6(n){if(typeof DecompressionStream<"u"){const e=new DecompressionStream("gzip"),t=e.writable.getWriter(),i=t.write(n).then(()=>t.close()),r=[],s=e.readable.getReader();for(;;){const{done:c,value:u}=await s.read();if(c)break;r.push(u)}await i;const o=r.reduce((c,u)=>c+u.length,0),a=new Uint8Array(o);let l=0;for(const c of r)a.set(c,l),l+=c.length;return a}else return Q6(n,void 0)}async function Dr(n){try{return await U6(n)}catch(e){if(/invalid bgzf header/.exec(`${e}`)){if(z6(n))return H6(n);throw new Error("problem decompressing block: not a valid bgzf or gzip block")}throw/invalid gzip header/.exec(`${e}`)?new Error("problem decompressing block: incorrect gzip header check"):e}}async function Q1(n,e,t){try{const{minv:i,maxv:r}=e,s=await G6(n,i.blockPosition,i.dataPosition,r.blockPosition,r.dataPosition);return{buffer:s.buffer,cpositions:s.cpositions,dpositions:s.dpositions}}catch(i){throw/invalid gzip header/.exec(`${i}`)?new Error("problem decompressing block: incorrect gzip header check"):i}}let MA=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(MA=new Int32Array(MA));const _6=(n,e)=>{let t=-1;for(let i=0;i<n.length;i++)t=MA[(t^n[i])&255]^t>>>8;return t^-1},V6=21582659,Y6=38359875;function J6(n,e){return n*2**e}function D1(n,e){return Math.floor(n/2**e)}let Sc=class extends QC{constructor(){super(...arguments),this.maxBinNumber=0,this.depth=0,this.minShift=0}async lineCount(e,t){return(await this.parse(t)).indices(e)?.stats?.lineCount||0}async indexCov(){return[]}parseAuxData(e,t){const i=new DataView(e.buffer),r=i.getUint32(t,!0),s=r&65536?"zero-based-half-open":"1-based-closed",o={0:"generic",1:"SAM",2:"VCF"}[r&15];if(!o)throw new Error(`invalid Tabix preset format flags ${r}`);const a={ref:i.getInt32(t+4,!0),start:i.getInt32(t+8,!0),end:i.getInt32(t+12,!0)},l=i.getInt32(t+16,!0),c=l?String.fromCharCode(l):"",u=i.getInt32(t+20,!0),f=i.getInt32(t+24,!0);return{columnNumbers:a,coordinateType:s,metaValue:l,metaChar:c,skipLines:u,format:o,formatFlags:r,...UT(e.subarray(t+28,t+28+f),this.renameRefSeq)}}async _parse(e){const t=await this.filehandle.readFile(e),i=await Dr(t),r=new DataView(i.buffer);let s;const o=r.getUint32(0,!0);if(o===V6)s=1;else if(o===Y6)s=2;else throw new Error(`Not a CSI file ${o}`);this.minShift=r.getInt32(4,!0),this.depth=r.getInt32(8,!0),this.maxBinNumber=((1<<(this.depth+1)*3)-1)/7;const a=this.maxBinNumber,l=r.getInt32(12,!0),c=l>=30?this.parseAuxData(i,16):void 0,u=r.getInt32(16+l,!0);let f=16+l+4,h;const A=[];for(let p=0;p<u;p++){A.push(f);const m=r.getInt32(f,!0);f+=4;for(let y=0;y<m;y++){const C=r.getUint32(f,!0);if(f+=4,C>this.maxBinNumber)f+=44;else{f+=8;const w=r.getInt32(f,!0);f+=4;for(let E=0;E<w;E+=1){const I=On(i,f);f+=8,f+=8,h=co(h,I)}}}}const d=new ao({maxSize:5});function g(p){let m=A[p];if(m===void 0)return;const y=r.getInt32(m,!0);m+=4;const C={};let w;for(let E=0;E<y;E++){const I=r.getUint32(m,!0);if(m+=4,I>a)w=SC(i,m+28),m+=44;else{h=co(h,On(i,m)),m+=8;const b=r.getInt32(m,!0);m+=4;const S=new Array(b);for(let Q=0;Q<b;Q+=1){const v=On(i,m);m+=8;const F=On(i,m);m+=8,S[Q]=new BC(v,F,I)}C[I]=S}}return{binIndex:C,stats:w}}return{csiVersion:s,firstDataLine:h,indices:p=>{if(!d.has(p)){const m=g(p);return m&&d.set(p,m),m}return d.get(p)},refCount:u,csi:!0,maxBlockSize:65536,...c}}async blocksForRange(e,t,i,r={}){t<0&&(t=0);const o=(await this.parse(r)).indices(e);if(!o)return[];const a=this.reg2bins(t,i);if(a.length===0)return[];const l=[],{binIndex:c}=o;for(const[u,f]of a)for(let h=u;h<=f;h++){const A=c[h];if(A)for(let d=0,g=A.length;d<g;d++)l.push(A[d])}return dA(l,new DC(0,0))}reg2bins(e,t){e-=1,e<1&&(e=1),t>2**50&&(t=2**34),t-=1;let i=0,r=0,s=this.minShift+this.depth*3;const o=[];for(;i<=this.depth;s-=3,r+=J6(1,i*3),i+=1){const a=r+D1(e,s),l=r+D1(t,s);if(l-a+o.length>this.maxBinNumber)throw new Error(`query ${e}-${t} is too large for current binning scheme (shift ${this.minShift}, depth ${this.depth}), try a smaller query or a coarser index binning scheme`);o.push([a,l])}return o}async parse(e={}){return this.setupP||(this.setupP=this._parse(e).catch(t=>{throw this.setupP=void 0,t})),this.setupP}async hasRefSeq(e,t={}){return!!(await this.parse(t)).indices(e)?.binIndex}};class K6{read(){throw new Error("never called")}stat(){throw new Error("never called")}readFile(){throw new Error("never called")}close(){throw new Error("never called")}}const q6=3,j6=4,Ct={BAM_FPAIRED:1,BAM_FPROPER_PAIR:2,BAM_FUNMAP:4,BAM_FMUNMAP:8,BAM_FREVERSE:16,BAM_FMREVERSE:32,BAM_FREAD1:64,BAM_FREAD2:128,BAM_FSECONDARY:256,BAM_FQCFAIL:512,BAM_FDUP:1024,BAM_FSUPPLEMENTARY:2048},go="=ACMGRSVTWYHKDBN".split(""),W6=[77,73,68,78,83,72,80,61,88,63,63,63,63,63,63,63],k1=461;class F1{constructor(e){this.bytes=e.bytes,this.fileOffset=e.fileOffset,this._dataView=new DataView(this.bytes.byteArray.buffer)}get byteArray(){return this.bytes.byteArray}get flags(){return this._cachedFlags===void 0&&(this._cachedFlags=(this._dataView.getInt32(this.bytes.start+16,!0)&4294901760)>>16),this._cachedFlags}get ref_id(){return this._cachedRefId===void 0&&(this._cachedRefId=this._dataView.getInt32(this.bytes.start+4,!0)),this._cachedRefId}get start(){return this._cachedStart===void 0&&(this._cachedStart=this._dataView.getInt32(this.bytes.start+8,!0)),this._cachedStart}get end(){return this._cachedEnd===void 0&&(this._cachedEnd=this.start+this.length_on_ref),this._cachedEnd}get mq(){const e=(this.bin_mq_nl&65280)>>8;return e===255?void 0:e}get score(){return this.mq}get qual(){if(this.isSegmentUnmapped())return null;{const e=this.b0+this.read_name_length+this.num_cigar_bytes+this.num_seq_bytes;return this.byteArray.subarray(e,e+this.seq_length)}}get strand(){return this.isReverseComplemented()?-1:1}get b0(){return this.bytes.start+36}get tagsStart(){return this._cachedTagsStart===void 0&&(this._cachedTagsStart=this.b0+this.read_name_length+this.num_cigar_bytes+this.num_seq_bytes+this.seq_length),this._cachedTagsStart}get name(){const e=this.read_name_length-1,t=this.b0,i=this.byteArray,r=new Array(e);for(let s=0;s<e;s++)r[s]=i[t+s];return String.fromCharCode(...r)}get NUMERIC_MD(){if(this._cachedNUMERIC_MD===void 0){const e=this.getTagRaw("MD");this._cachedNUMERIC_MD=e instanceof Uint8Array?e:null}return this._cachedNUMERIC_MD===null?void 0:this._cachedNUMERIC_MD}get tags(){return this._cachedTags===void 0&&(this._cachedTags=this._computeTags()),this._cachedTags}getTag(e){return this._cachedTags!==void 0?this._cachedTags[e]:this._findTag(e,!1)}getTagRaw(e){return this._findTag(e,!0)}_findTag(e,t){const i=e.charCodeAt(0),r=e.charCodeAt(1);let s=this.tagsStart;const o=this.bytes.end,a=this.byteArray;for(;s<o;){const l=a[s],c=a[s+1],u=a[s+2];s+=3;const f=l===i&&c===r;switch(u){case 65:if(f)return String.fromCharCode(a[s]);s+=1;break;case 105:if(f)return this._dataView.getInt32(s,!0);s+=4;break;case 73:if(f)return this._dataView.getUint32(s,!0);s+=4;break;case 99:if(f)return this._dataView.getInt8(s);s+=1;break;case 67:if(f)return this._dataView.getUint8(s);s+=1;break;case 115:if(f)return this._dataView.getInt16(s,!0);s+=2;break;case 83:if(f)return this._dataView.getUint16(s,!0);s+=2;break;case 102:if(f)return this._dataView.getFloat32(s,!0);s+=4;break;case 90:case 72:{if(f){const h=s;for(;s<o&&a[s]!==0;)s++;if(t)return a.subarray(h,s);const A=[];for(let d=h;d<s;d++)A.push(String.fromCharCode(a[d]));return A.join("")}for(;s<=o&&a[s++]!==0;);break}case 66:{const h=a[s++],A=this._dataView.getInt32(s,!0);s+=4;const d=a.byteOffset+s;if(f)if(h===105){if(d%4===0)return new Int32Array(a.buffer,d,A);const g=new Array(A);for(let p=0;p<A;p++)g[p]=this._dataView.getInt32(s+p*4,!0);return g}else if(h===73){if(d%4===0)return new Uint32Array(a.buffer,d,A);const g=new Array(A);for(let p=0;p<A;p++)g[p]=this._dataView.getUint32(s+p*4,!0);return g}else if(h===115){if(d%2===0)return new Int16Array(a.buffer,d,A);const g=new Array(A);for(let p=0;p<A;p++)g[p]=this._dataView.getInt16(s+p*2,!0);return g}else if(h===83){if(d%2===0)return new Uint16Array(a.buffer,d,A);const g=new Array(A);for(let p=0;p<A;p++)g[p]=this._dataView.getUint16(s+p*2,!0);return g}else{if(h===99)return new Int8Array(a.buffer,d,A);if(h===67)return new Uint8Array(a.buffer,d,A);if(h===102){if(d%4===0)return new Float32Array(a.buffer,d,A);const g=new Array(A);for(let p=0;p<A;p++)g[p]=this._dataView.getFloat32(s+p*4,!0);return g}}h===105||h===73||h===102?s+=A<<2:h===115||h===83?s+=A<<1:(h===99||h===67)&&(s+=A);break}}}}_computeTags(){let e=this.tagsStart;const t=this.bytes.end,i=this.byteArray,r={};for(;e<t;){const s=String.fromCharCode(i[e],i[e+1]),o=i[e+2];switch(e+=3,o){case 65:r[s]=String.fromCharCode(i[e]),e+=1;break;case 105:r[s]=this._dataView.getInt32(e,!0),e+=4;break;case 73:r[s]=this._dataView.getUint32(e,!0),e+=4;break;case 99:r[s]=this._dataView.getInt8(e),e+=1;break;case 67:r[s]=this._dataView.getUint8(e),e+=1;break;case 115:r[s]=this._dataView.getInt16(e,!0),e+=2;break;case 83:r[s]=this._dataView.getUint16(e,!0),e+=2;break;case 102:r[s]=this._dataView.getFloat32(e,!0),e+=4;break;case 90:case 72:{const a=[];for(;e<=t;){const l=i[e++];if(l!==0)a.push(String.fromCharCode(l));else break}r[s]=a.join("");break}case 66:{const a=i[e++],l=this._dataView.getInt32(e,!0);e+=4;const c=i.byteOffset+e;if(a===105){if(c%4===0)r[s]=new Int32Array(i.buffer,c,l);else{const u=new Array(l);for(let f=0;f<l;f++)u[f]=this._dataView.getInt32(e+f*4,!0);r[s]=u}e+=l<<2}else if(a===73){if(c%4===0)r[s]=new Uint32Array(i.buffer,c,l);else{const u=new Array(l);for(let f=0;f<l;f++)u[f]=this._dataView.getUint32(e+f*4,!0);r[s]=u}e+=l<<2}else if(a===115){if(c%2===0)r[s]=new Int16Array(i.buffer,c,l);else{const u=new Array(l);for(let f=0;f<l;f++)u[f]=this._dataView.getInt16(e+f*2,!0);r[s]=u}e+=l<<1}else if(a===83){if(c%2===0)r[s]=new Uint16Array(i.buffer,c,l);else{const u=new Array(l);for(let f=0;f<l;f++)u[f]=this._dataView.getUint16(e+f*2,!0);r[s]=u}e+=l<<1}else if(a===99)r[s]=new Int8Array(i.buffer,c,l),e+=l;else if(a===67)r[s]=new Uint8Array(i.buffer,c,l),e+=l;else if(a===102){if(c%4===0)r[s]=new Float32Array(i.buffer,c,l);else{const u=new Array(l);for(let f=0;f<l;f++)u[f]=this._dataView.getFloat32(e+f*4,!0);r[s]=u}e+=l<<2}break}default:console.error("Unknown BAM tag type",o);break}}return r}isPaired(){return!!(this.flags&Ct.BAM_FPAIRED)}isProperlyPaired(){return!!(this.flags&Ct.BAM_FPROPER_PAIR)}isSegmentUnmapped(){return!!(this.flags&Ct.BAM_FUNMAP)}isMateUnmapped(){return!!(this.flags&Ct.BAM_FMUNMAP)}isReverseComplemented(){return!!(this.flags&Ct.BAM_FREVERSE)}isMateReverseComplemented(){return!!(this.flags&Ct.BAM_FMREVERSE)}isRead1(){return!!(this.flags&Ct.BAM_FREAD1)}isRead2(){return!!(this.flags&Ct.BAM_FREAD2)}isSecondary(){return!!(this.flags&Ct.BAM_FSECONDARY)}isFailedQc(){return!!(this.flags&Ct.BAM_FQCFAIL)}isDuplicate(){return!!(this.flags&Ct.BAM_FDUP)}isSupplementary(){return!!(this.flags&Ct.BAM_FSUPPLEMENTARY)}get cigarAndLength(){return this._cachedCigarAndLength===void 0&&(this._cachedCigarAndLength=this._computeCigarAndLength()),this._cachedCigarAndLength}_computeCigarAndLength(){if(this.isSegmentUnmapped())return{length_on_ref:0,NUMERIC_CIGAR:new Uint32Array(0)};const e=this.num_cigar_ops;let t=this.b0+this.read_name_length;const i=this._dataView.getInt32(t,!0),r=i>>4;if((i&15)===j6&&r===this.seq_length){t+=4;const u=this._dataView.getInt32(t,!0),f=u>>4;return(u&15)!==q6&&console.warn("CG tag with no N tag"),{NUMERIC_CIGAR:this.tags.CG,length_on_ref:f}}const o=this.byteArray.byteOffset+t;if(o%4===0&&e>50){const u=new Uint32Array(this.byteArray.buffer,o,e);let f=0;for(let h=0;h<e;++h){const A=u[h];f+=(A>>4)*(k1>>(A&15)&1)}return{NUMERIC_CIGAR:u,length_on_ref:f}}const l=new Array(e);let c=0;for(let u=0;u<e;++u){const f=this._dataView.getInt32(t+u*4,!0)|0;l[u]=f,c+=(f>>4)*(k1>>(f&15)&1)}return{NUMERIC_CIGAR:l,length_on_ref:c}}get length_on_ref(){return this.cigarAndLength.length_on_ref}get NUMERIC_CIGAR(){return this.cigarAndLength.NUMERIC_CIGAR}get CIGAR(){const e=this.NUMERIC_CIGAR;let t="";for(let i=0,r=e.length;i<r;i++){const s=e[i],o=s>>4,a=W6[s&15];t+=o+String.fromCharCode(a)}return t}get num_cigar_ops(){return this.flag_nc&65535}get num_cigar_bytes(){return this.num_cigar_ops<<2}get read_name_length(){return this.bin_mq_nl&255}get num_seq_bytes(){return this.seq_length+1>>1}get NUMERIC_SEQ(){const e=this.b0+this.read_name_length+this.num_cigar_bytes;return this.byteArray.subarray(e,e+this.num_seq_bytes)}get seq(){const e=this.NUMERIC_SEQ,t=this.seq_length,i=new Array(t);let r=0;const s=t>>1;for(let o=0;o<s;++o){const a=e[o];i[r++]=go[(a&240)>>4],i[r++]=go[a&15]}if(r<t){const o=e[s];i[r]=go[(o&240)>>4]}return i.join("")}get pair_orientation(){if(!this.isSegmentUnmapped()&&!this.isMateUnmapped()&&this.ref_id===this.next_refid){const e=this.isReverseComplemented()?"R":"F",t=this.isMateReverseComplemented()?"R":"F";let i=" ",r=" ";return this.isRead1()?(i="1",r="2"):this.isRead2()&&(i="2",r="1"),this.template_length>0?`${e}${i}${t}${r}`:`${t}${r}${e}${i}`}}get bin_mq_nl(){return this._dataView.getInt32(this.bytes.start+12,!0)}get flag_nc(){return this._dataView.getInt32(this.bytes.start+16,!0)}get seq_length(){return this._dataView.getInt32(this.bytes.start+20,!0)}get next_refid(){return this._dataView.getInt32(this.bytes.start+24,!0)}get next_pos(){return this._dataView.getInt32(this.bytes.start+28,!0)}get template_length(){return this._dataView.getInt32(this.bytes.start+32,!0)}seqAt(e){if(e<this.seq_length){const t=e>>1,i=this.byteArray[this.b0+this.read_name_length+this.num_cigar_bytes+t];return e%2===0?go[(i&240)>>4]:go[i&15]}else return}toJSON(){const e={};for(const t of Object.keys(this))t.startsWith("_")||t==="bytes"||(e[t]=this[t]);return e}}function R1(n){const e=n.split(/\r?\n/),t=[];for(const i of e){const[r,...s]=i.split(/\t/);r&&t.push({tag:r.slice(1),data:s.map(o=>{const a=o.indexOf(":"),l=o.slice(0,a),c=o.slice(a+1);return{tag:l,value:c}})})}return t}const M1=21840194,X6=65536;class N1{constructor({bamFilehandle:e,bamPath:t,bamUrl:i,baiPath:r,baiFilehandle:s,baiUrl:o,csiPath:a,csiFilehandle:l,csiUrl:c,htsget:u,renameRefSeqs:f=A=>A,recordClass:h}){if(this.htsget=!1,this.chunkFeatureCache=new ao({maxSize:100}),this.renameRefSeq=f,this.RecordClass=h??F1,e)this.bam=e;else if(t)this.bam=new We(t);else if(i)this.bam=new Ht(i);else if(u)this.htsget=!0,this.bam=new K6;else throw new Error("unable to initialize bam");if(l)this.index=new Sc({filehandle:l});else if(a)this.index=new Sc({filehandle:new We(a)});else if(c)this.index=new Sc({filehandle:new Ht(c)});else if(s)this.index=new Cr({filehandle:s});else if(r)this.index=new Cr({filehandle:new We(r)});else if(o)this.index=new Cr({filehandle:new Ht(o)});else if(t)this.index=new Cr({filehandle:new We(`${t}.bai`)});else if(i)this.index=new Cr({filehandle:new Ht(`${i}.bai`)});else if(u)this.htsget=!0;else throw new Error("unable to infer index format")}async getHeaderPre(e){const t=OT(e);if(!this.index)return;const i=await this.index.parse(t),r=i.firstDataLine===void 0?await this.bam.readFile():await this.bam.read(i.firstDataLine.blockPosition+X6,0),s=await Dr(r),o=new DataView(s.buffer);if(o.getInt32(0,!0)!==M1)throw new Error("Not a BAM file");const a=o.getInt32(4,!0),l=new TextDecoder("utf8");this.header=l.decode(s.subarray(8,8+a));const{chrToIndex:c,indexToChr:u}=this._parseRefSeqs(s,a+8);return this.chrToIndex=c,this.indexToChr=u,R1(this.header)}getHeader(e){return this.headerP||(this.headerP=this.getHeaderPre(e).catch(t=>{throw this.headerP=void 0,t})),this.headerP}async getHeaderText(e={}){return await this.getHeader(e),this.header}_parseRefSeqs(e,t){const i=new DataView(e.buffer),r=i.getInt32(t,!0);let s=t+4;const o={},a=[],l=new TextDecoder("utf8");for(let c=0;c<r;c+=1){if(s+8>e.length)throw new Error(`Insufficient data for reference sequences: need more than ${e.length} bytes`);const u=i.getInt32(s,!0),f=this.renameRefSeq(l.decode(e.subarray(s+4,s+4+u-1))),h=i.getInt32(s+u+4,!0);o[f]=c,a.push({refName:f,length:h}),s=s+8+u}return{chrToIndex:o,indexToChr:a}}async getRecordsForRange(e,t,i,r){await this.getHeader(r);const s=this.chrToIndex?.[e];if(s===void 0||!this.index)return[];const o=await this.index.blocksForRange(s,t-1,i,r);return this._fetchChunkFeaturesDirect(o,s,t,i,r)}chunkCacheKey(e,t){const{minv:i,maxv:r}=e;return`${i.blockPosition}:${i.dataPosition}-${r.blockPosition}:${r.dataPosition}${_T(t)}`}blocksOverlap(e,t,i,r){return e<=r&&t>=i}evictOverlappingChunks(e,t){for(const[i,r]of this.chunkFeatureCache)this.blocksOverlap(e,t,r.minBlock,r.maxBlock)&&this.chunkFeatureCache.delete(i)}async _fetchChunkFeaturesDirect(e,t,i,r,s={}){const{viewAsPairs:o,filterBy:a}=s,{flagInclude:l=0,flagExclude:c=0,tagFilter:u}=a||{},f=[];for(let h=0,A=e.length;h<A;h++){const d=e[h],g=this.chunkCacheKey(d,a),p=d.minv.blockPosition,m=d.maxv.blockPosition;let y;const C=this.chunkFeatureCache.get(g);if(C)y=C.features;else{this.evictOverlappingChunks(p,m);const{data:E,cpositions:I,dpositions:b}=await this._readChunk({chunk:d,opts:s}),S=await this.readBamFeatures(E,I,b,d);if(a){y=[];for(let Q=0,v=S.length;Q<v;Q++){const F=S[Q];zT(F.flags,l,c)||u&&HT(F.tags[u.tag],u.value)||y.push(F)}}else y=S;this.chunkFeatureCache.set(g,{minBlock:p,maxBlock:m,features:y})}let w=!1;for(let E=0,I=y.length;E<I;E++){const b=y[E];if(b.ref_id===t)if(b.start>=r){w=!0;break}else b.end>=i&&f.push(b)}if(w)break}if(o){const h=await this.fetchPairs(t,f,s);for(let A=0,d=h.length;A<d;A++)f.push(h[A])}return f}async fetchPairs(e,t,i){const{pairAcrossChr:r,maxInsertSize:s=2e5}=i,o={},a={};for(let h=0,A=t.length;h<A;h++){const d=t[h],g=d.name;o[g]=(o[g]||0)+1,a[d.fileOffset]=1}const l=[];for(let h=0,A=t.length;h<A;h++){const d=t[h],g=d.name;this.index&&o[g]===1&&(r||d.next_refid===e&&Math.abs(d.start-d.next_pos)<s)&&l.push(this.index.blocksForRange(d.next_refid,d.next_pos,d.next_pos+1,i))}const c=new Map,u=await Promise.all(l);for(let h=0,A=u.length;h<A;h++){const d=u[h];for(let g=0,p=d.length;g<p;g++){const m=d[g],y=m.toString();c.has(y)||c.set(y,m)}}return(await Promise.all([...c.values()].map(async h=>{const{data:A,cpositions:d,dpositions:g,chunk:p}=await this._readChunk({chunk:h,opts:i}),m=[],y=await this.readBamFeatures(A,d,g,p);for(let C=0,w=y.length;C<w;C++){const E=y[C];o[E.name]===1&&!a[E.fileOffset]&&m.push(E)}return m}))).flat()}async _readChunk({chunk:e,opts:t}){const i=await this.bam.read(e.fetchedSize(),e.minv.blockPosition,t),{buffer:r,cpositions:s,dpositions:o}=await Q1(i,e);return{data:r,cpositions:s,dpositions:o,chunk:e}}async readBamFeatures(e,t,i,r){let s=0;const o=[];let a=0;const l=new DataView(e.buffer),c=i.length>0,u=t.length>0;for(;s+4<e.length;){const f=l.getInt32(s,!0),h=s+4+f-1;if(c){for(;s+r.minv.dataPosition>=i[a++];);a--}if(h<e.length){const A=new this.RecordClass({bytes:{byteArray:e,start:s,end:h},fileOffset:u?t[a]*256+(s-i[a])+r.minv.dataPosition+1:_6(e.subarray(s,h))>>>0});o.push(A)}s=h+1}return o}async hasRefSeq(e){const t=this.chrToIndex?.[e];return t===void 0?!1:this.index?.hasRefSeq(t)}async lineCount(e){const t=this.chrToIndex?.[e];return t===void 0||!this.index?0:this.index.lineCount(t)}async indexCov(e,t,i){if(!this.index)return[];await this.index.parse();const r=this.chrToIndex?.[e];return r===void 0?[]:this.index.indexCov(r,t,i)}async blocksForRange(e,t,i,r){if(!this.index)return[];await this.index.parse();const s=this.chrToIndex?.[e];return s===void 0?[]:this.index.blocksForRange(s,t,i,r)}clearFeatureCache(){this.chunkFeatureCache.clear()}async estimatedBytesForRegions(e,t){if(!this.index)return 0;if(await this.getHeader(t),!this.chrToIndex)throw new Error("Header not yet parsed");return this.index.estimatedBytesForRegions(e.map(i=>{const r=this.chrToIndex[i.refName];if(r===void 0)throw new Error(`Unknown reference name: ${i.refName}`);return{refId:r,start:i.start,end:i.end}}),t)}}async function T1(n,e){const t=await Promise.all(n.map(async i=>{const{url:r,headers:s}=i;if(r.startsWith("data:")){const o=await fetch(r);if(!o.ok)throw new Error("failed to decode base64");const a=await o.arrayBuffer();return new Uint8Array(a)}else{const{referer:o,...a}=s,l=await fetch(r,{...e,headers:{...e?.headers,...a}});if(!l.ok)throw new Error(`HTTP ${l.status} fetching ${r}: ${await l.text()}`);return new Uint8Array(await l.arrayBuffer())}}));return GT(await Promise.all(t.map(i=>Dr(i))))}class Z6 extends N1{constructor(e){super({htsget:!0,recordClass:e.recordClass}),this.baseUrl=e.baseUrl,this.trackId=e.trackId}async getRecordsForRange(e,t,i,r){const o=`${`${this.baseUrl}/${this.trackId}`}?referenceName=${e}&start=${t}&end=${i}&format=BAM`,a=this.chrToIndex?.[e];if(a===void 0)return[];const l=await fetch(o,{...r});if(!l.ok)throw new Error(`HTTP ${l.status} fetching ${o}: ${await l.text()}`);const c=await l.json(),u=await T1(c.htsget.urls.slice(1),r),f=await this.readBamFeatures(u,[],[],{minv:{dataPosition:0,blockPosition:0},maxv:{dataPosition:0,blockPosition:0}}),h=[];for(let A=0,d=f.length;A<d;A++){const g=f[A];if(g.ref_id===a){if(g.start>=i)break;g.end>=t&&h.push(g)}}return h}async getHeader(e={}){const t=`${this.baseUrl}/${this.trackId}?referenceName=na&class=header`,i=await fetch(t,e);if(!i.ok)throw new Error(`HTTP ${i.status} fetching ${t}: ${await i.text()}`);const r=await i.json(),s=await T1(r.htsget.urls,e),o=new DataView(s.buffer);if(o.getInt32(0,!0)!==M1)throw new Error("Not a BAM file");const a=o.getInt32(4,!0),c=new TextDecoder("utf8").decode(s.subarray(8,8+a)),u=R1(c),f=[],h={},A=u.filter(d=>d.tag==="SQ");for(const[d,g]of A.entries()){let p="",m=0;for(const y of g.data)y.tag==="SN"?p=y.value:y.tag==="LN"&&(m=+y.value);h[p]=d,f[d]={refName:p,length:m}}return this.chrToIndex=h,this.indexToChr=f,u}}const $6=Object.freeze(Object.defineProperty({__proto__:null,BAI:Cr,BamFile:N1,BamRecord:F1,CSI:Sc,HtsgetFile:Z6},Symbol.toStringTag,{value:"Module"}));class Qc{constructor(e,t,i,r){this.minv=e,this.maxv=t,this.bin=i,this._fetchedSize=r}toUniqueString(){return`${this.minv}..${this.maxv} (bin ${this.bin}, fetchedSize ${this.fetchedSize()})`}toString(){return this.toUniqueString()}compareTo(e){return this.minv.compareTo(e.minv)||this.maxv.compareTo(e.maxv)||this.bin-e.bin}fetchedSize(){return this._fetchedSize!==void 0?this._fetchedSize:this.maxv.blockPosition+65536-this.minv.blockPosition}}class P1{constructor({filehandle:e,renameRefSeqs:t=i=>i}){this.filehandle=e,this.renameRefSeq=t}async getMetadata(e={}){const{indices:t,...i}=await this.parse(e);return i}_findFirstData(e,t){return e?e.compareTo(t)>0?t:e:t}async parse(e={}){return this.parseP||(this.parseP=this._parse(e).catch(t=>{throw this.parseP=void 0,t})),this.parseP}async hasRefSeq(e,t={}){return!!(await this.parse(t)).indices[e]?.binIndex}_parseNameBytes(e){let t=0,i=0;const r=[],s={},o=new TextDecoder("utf8");for(let a=0;a<e.length;a+=1)if(!e[a]){if(i<a){const l=this.renameRefSeq(o.decode(e.subarray(i,a)));r[t]=l,s[l]=t}i=a+1,t+=1}return{refNameToId:s,refIdToName:r}}}const L1=65536,e9=L1*L1;function O1(n,e=0){const t=n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24;return((n[e+4]|n[e+5]<<8|n[e+6]<<16|n[e+7]<<24)>>>0)*e9+(t>>>0)}function t9(n,e){return e.minv.blockPosition-n.maxv.blockPosition<65e3&&e.maxv.blockPosition-n.minv.blockPosition<5e6}function U1(n,e){const t=[];let i;if(n.length===0)return n;n.sort(function(r,s){const o=r.minv.blockPosition-s.minv.blockPosition;return o===0?r.minv.dataPosition-s.minv.dataPosition:o});for(const r of n)(!e||r.maxv.compareTo(e)>0)&&(i===void 0?(t.push(r),i=r):t9(i,r)?r.maxv.compareTo(i.maxv)>0&&(i.maxv=r.maxv):(t.push(r),i=r));return t}class NA{constructor(e,t){this.blockPosition=e,this.dataPosition=t}toString(){return`${this.blockPosition}:${this.dataPosition}`}compareTo(e){return this.blockPosition-e.blockPosition||this.dataPosition-e.dataPosition}}function kr(n,e=0){return new NA(n[e+7]*1099511627776+n[e+6]*4294967296+n[e+5]*16777216+n[e+4]*65536+n[e+3]*256+n[e+2],n[e+1]<<8|n[e])}const n9=21582659,i9=38359875,r9={0:"generic",1:"SAM",2:"VCF"};function s9(n,e){return n*2**e}function G1(n,e){return Math.floor(n/2**e)}class Dc extends P1{constructor(e){super(e),this.maxBinNumber=0,this.depth=0,this.minShift=0}async lineCount(e,t={}){const i=await this.parse(t),r=i.refNameToId[e];if(r===void 0||!i.indices[r])return-1;const{stats:o}=i.indices[r];return o?o.lineCount:-1}indexCov(){throw new Error("CSI indexes do not support indexcov")}parseAuxData(e,t){const i=new DataView(e.buffer),r=i.getInt32(t,!0),s=r&65536?"zero-based-half-open":"1-based-closed",o=r9[r&15];if(!o)throw new Error(`invalid Tabix preset format flags ${r}`);const a={ref:i.getInt32(t+4,!0),start:i.getInt32(t+8,!0),end:i.getInt32(t+12,!0)},l=i.getInt32(t+16,!0),c=l?String.fromCharCode(l):void 0,u=i.getInt32(t+20,!0),f=i.getInt32(t+24,!0),{refIdToName:h,refNameToId:A}=this._parseNameBytes(e.subarray(t+28,t+28+f));return{refIdToName:h,refNameToId:A,skipLines:u,metaChar:c,columnNumbers:a,format:o,coordinateType:s}}async _parse(e={}){const t=await Dr(await this.filehandle.readFile(e)),i=new DataView(t.buffer);let r;if(i.getUint32(0,!0)===n9)r=1;else if(i.getUint32(0,!0)===i9)r=2;else throw new Error("Not a CSI file");this.minShift=i.getInt32(4,!0),this.depth=i.getInt32(8,!0),this.maxBinNumber=((1<<(this.depth+1)*3)-1)/7;const s=2**(this.minShift+this.depth*3),o=i.getInt32(12,!0),a=o&&o>=30?this.parseAuxData(t,16):{refIdToName:[],refNameToId:{},metaChar:void 0,columnNumbers:{ref:0,start:1,end:2},coordinateType:"zero-based-half-open",format:"generic"},l=i.getInt32(16+o,!0);let c,u=16+o+4;const f=new Array(l).fill(0).map(()=>{const h=i.getInt32(u,!0);u+=4;const A={};let d;for(let g=0;g<h;g+=1){const p=i.getUint32(u,!0);if(p>this.maxBinNumber)d=this.parsePseudoBin(t,u+4),u+=48;else{const m=kr(t,u+4);c=this._findFirstData(c,m);const y=i.getInt32(u+12,!0);u+=16;const C=new Array(y);for(let w=0;w<y;w+=1){const E=kr(t,u),I=kr(t,u+8);u+=16,C[w]=new Qc(E,I,p)}A[p]=C}}return{binIndex:A,stats:d}});return{...a,csi:!0,refCount:l,maxBlockSize:65536,firstDataLine:c,csiVersion:r,indices:f,depth:this.depth,maxBinNumber:this.maxBinNumber,maxRefLength:s}}parsePseudoBin(e,t){return{lineCount:O1(e,t+28)}}async blocksForRange(e,t,i,r={}){t<0&&(t=0);const s=await this.parse(r),o=s.refNameToId[e];if(o===void 0)return[];const a=s.indices[o];if(!a)return[];const l=this.reg2bins(t,i),c=[];for(const[u,f]of l)for(let h=u;h<=f;h++)if(a.binIndex[h])for(const A of a.binIndex[h])c.push(new Qc(A.minv,A.maxv,h));return U1(c,new NA(0,0))}reg2bins(e,t){e-=1,e<1&&(e=1),t>2**50&&(t=2**34),t-=1;let i=0,r=0,s=this.minShift+this.depth*3;const o=[];for(;i<=this.depth;s-=3,r+=s9(1,i*3),i+=1){const a=r+G1(e,s),l=r+G1(t,s);if(l-a+o.length>this.maxBinNumber)throw new Error(`query ${e}-${t} is too large for current binning scheme (shift ${this.minShift}, depth ${this.depth}), try a smaller query or a coarser index binning scheme`);o.push([a,l])}return o}}const o9=21578324,z1=14;function a9(n,e){return n+=1,e-=1,[[0,0],[1+(n>>26),1+(e>>26)],[9+(n>>23),9+(e>>23)],[73+(n>>20),73+(e>>20)],[585+(n>>17),585+(e>>17)],[4681+(n>>14),4681+(e>>14)]]}class Fr extends P1{async lineCount(e,t={}){const i=await this.parse(t),r=i.refNameToId[e];return r===void 0||!i.indices[r]?-1:i.indices[r].stats?.lineCount??-1}async _parse(e={}){const t=await this.filehandle.readFile(e),i=await Dr(t),r=new DataView(i.buffer);if(r.getUint32(0,!0)!==o9)throw new Error("Not a TBI file");const o=r.getUint32(4,!0),a=r.getUint32(8,!0),l=a&65536?"zero-based-half-open":"1-based-closed",u={0:"generic",1:"SAM",2:"VCF"}[a&15];if(!u)throw new Error(`invalid Tabix preset format flags ${a}`);const f={ref:r.getInt32(12,!0),start:r.getInt32(16,!0),end:r.getInt32(20,!0)},h=r.getInt32(24,!0),A=5,d=((1<<(A+1)*3)-1)/7,g=2**(14+A*3),p=h?String.fromCharCode(h):void 0,m=r.getInt32(28,!0),y=r.getInt32(32,!0),{refNameToId:C,refIdToName:w}=this._parseNameBytes(i.slice(36,36+y));let E=36+y,I;return{indices:new Array(o).fill(0).map(()=>{const S=r.getInt32(E,!0);E+=4;const Q={};let v;for(let N=0;N<S;N+=1){const O=r.getUint32(E,!0);if(E+=4,O>d+1)throw new Error("tabix index contains too many bins, please use a CSI index");if(O===d+1){const H=r.getInt32(E,!0);E+=4,H===2&&(v=this.parsePseudoBin(i,E)),E+=16*H}else{const H=r.getInt32(E,!0);E+=4;const G=new Array(H);for(let V=0;V<H;V+=1){const te=kr(i,E),ae=kr(i,E+8);E+=16,I=this._findFirstData(I,te),G[V]=new Qc(te,ae,O)}Q[O]=G}}const F=r.getInt32(E,!0);E+=4;const R=new Array(F);for(let N=0;N<F;N+=1)R[N]=kr(i,E),E+=8,I=this._findFirstData(I,R[N]);return{binIndex:Q,linearIndex:R,stats:v}}),metaChar:p,maxBinNumber:d,maxRefLength:g,skipLines:m,firstDataLine:I,columnNumbers:f,coordinateType:l,format:u,refIdToName:w,refNameToId:C,maxBlockSize:65536}}parsePseudoBin(e,t){return{lineCount:O1(e,t+16)}}async blocksForRange(e,t,i,r={}){t<0&&(t=0);const s=await this.parse(r),o=s.refNameToId[e];if(o===void 0)return[];const a=s.indices[o];if(!a)return[];(a.linearIndex.length>0?a.linearIndex[t>>z1>=a.linearIndex.length?a.linearIndex.length-1:t>>z1]:new NA(0,0))||console.warn("querying outside of possible tabix range");const c=a9(t,i),u=[];for(const[g,p]of c)for(let m=g;m<=p;m++)if(a.binIndex[m])for(const y of a.binIndex[m])u.push(new Qc(y.minv,y.maxv,m));const f=a.linearIndex.length;let h;const A=Math.min(t>>14,f-1),d=Math.min(i>>14,f-1);for(let g=A;g<=d;++g){const p=a.linearIndex[g];p&&(!h||p.compareTo(h)<0)&&(h=p)}return U1(u,h)}}class c9{constructor({path:e,filehandle:t,url:i,tbiPath:r,tbiUrl:s,tbiFilehandle:o,csiPath:a,csiUrl:l,csiFilehandle:c,renameRefSeqs:u,chunkCacheSize:f=5*2**20}){this.cache=new ao({maxSize:1e3});const h=u??(A=>A);if(t)this.filehandle=t;else if(e)this.filehandle=new We(e);else if(i)this.filehandle=new Ht(i);else throw new TypeError("must provide either filehandle or path");if(o)this.index=new Fr({filehandle:o,renameRefSeqs:h});else if(c)this.index=new Dc({filehandle:c,renameRefSeqs:h});else if(r)this.index=new Fr({filehandle:new We(r),renameRefSeqs:h});else if(a)this.index=new Dc({filehandle:new We(a),renameRefSeqs:h});else if(e)this.index=new Fr({filehandle:new We(`${e}.tbi`),renameRefSeqs:h});else if(l)this.index=new Dc({filehandle:new Ht(l)});else if(s)this.index=new Fr({filehandle:new Ht(s)});else if(i)this.index=new Fr({filehandle:new Ht(`${i}.tbi`)});else throw new TypeError("must provide one of tbiFilehandle, tbiPath, csiFilehandle, csiPath, tbiUrl, csiUrl");this.renameRefSeq=h,this.hasCustomRenameRefSeq=u!==void 0,this.chunkCache=new pr({cache:new ao({maxSize:Math.floor(f/65536)}),fill:(A,d)=>this.readChunk(A,{signal:d})})}calculateFileOffset(e,t,i,r,s){return e[i]*256+(r-t[i])+s+1}async getLines(e,t,i,r){let s,o={},a;typeof r=="function"?a=r:(o=r,a=r.lineCallback,s=r.signal);const l=await this.index.getMetadata(o),c=t??0,u=i??l.maxRefLength;if(!(c<=u))throw new TypeError("invalid start and end coordinates. start must be less than or equal to end");if(c===u)return;const f=await this.index.blocksForRange(e,c,u,o),h=new TextDecoder("utf8"),A=l.format==="VCF",d={ref:l.columnNumbers.ref||0,start:l.columnNumbers.start||0,end:A?8:l.columnNumbers.end||0},g=Math.max(d.ref,d.start,d.end),p=l.metaChar?.charCodeAt(0),m=l.coordinateType==="1-based-closed"?-1:0,y=!this.hasCustomRenameRefSeq;for(const C of f){const{buffer:w,cpositions:E,dpositions:I}=await this.chunkCache.get(C.toString(),C,s);let b=0,S=0;const Q=h.decode(w);if(w.length==Q.length)for(;b<Q.length;){const F=Q.indexOf(`
`,b);if(F===-1)break;const R=Q.slice(b,F);if(I){const O=b+C.minv.dataPosition;for(;S<I.length&&O>=I[S];)S++}const N=this.checkLine(e,c,u,R,d.ref,d.start,d.end,g,p,m,A,y);if(N===null)return;N!==void 0&&a(R,this.calculateFileOffset(E,I,S,b,C.minv.dataPosition),N.start,N.end),b=F+1}else for(;b<w.length;){const F=w.indexOf(10,b);if(F===-1)break;const R=w.slice(b,F),N=h.decode(R);if(I){const H=b+C.minv.dataPosition;for(;S<I.length&&H>=I[S];)S++}const O=this.checkLine(e,c,u,N,d.ref,d.start,d.end,g,p,m,A,y);if(O===null)return;O!==void 0&&a(N,this.calculateFileOffset(E,I,S,b,C.minv.dataPosition),O.start,O.end),b=F+1}}}async getMetadata(e={}){return this.index.getMetadata(e)}async getHeaderBuffer(e={}){const{firstDataLine:t,metaChar:i,maxBlockSize:r}=await this.getMetadata(e),s=(t?.blockPosition||0)+r,o=await this.filehandle.read(s,0,e),a=await Dr(o);if(i){let l=-1;const c=10,u=i.charCodeAt(0);for(let f=0,h=a.length;f<h;f++){const A=a[f];if(f===l+1&&A!==u)break;A===c&&(l=f)}return a.subarray(0,l+1)}return a}async getHeader(e={}){const t=new TextDecoder("utf8"),i=await this.getHeaderBuffer(e);return t.decode(i)}async getReferenceSequenceNames(e={}){return(await this.getMetadata(e)).refIdToName}checkLine(e,t,i,r,s,o,a,l,c,u,f,h){if(c!==void 0&&r.charCodeAt(0)===c)return;if(r.length<500){const C=r.split("	"),w=C[s-1];if(!(h?w===e:this.renameRefSeq(w)===e))return;const I=+C[o-1]+u;if(I>=i)return null;let b;return a===0||a===o?b=I+1:f?b=this._getVcfEnd(I,C[3],C[a-1]):b=+C[a-1],b<=t?void 0:{start:I,end:b}}let A=-1;const d=[-1];for(let C=0;C<l;C++){const w=r.indexOf("	",A+1);if(w===-1){d.push(r.length);break}d.push(w),A=w}const g=r.slice(d[s-1]+1,d[s]);if(!(h?g===e:this.renameRefSeq(g)===e))return;const m=+r.slice(d[o-1]+1,d[o])+u;if(m>=i)return null;let y;if(a===0||a===o?y=m+1:f?y=this._getVcfEnd(m,r.slice(d[3]+1,d[4]),r.slice(d[a-1]+1,d[a])):y=+r.slice(d[a-1]+1,d[a]),!(y<=t))return{start:m,end:y}}_getVcfEnd(e,t,i){let r=e+t.length;if(i.includes("SVTYPE=TRA"))return e+1;if(i[0]!=="."){const o=i.indexOf("END=");if(o!==-1&&(o===0||i[o-1]===";")){const a=o+4;let l=i.indexOf(";",a);l===-1&&(l=i.length),r=Number.parseInt(i.slice(a,l),10)}}return r}async lineCount(e,t={}){return this.index.lineCount(e,t)}async readChunk(e,t={}){const i=await this.filehandle.read(e.fetchedSize(),e.minv.blockPosition,t);return Q1(i,e,this.cache)}}const l9=Object.freeze(Object.defineProperty({__proto__:null,CSI:Dc,TBI:Fr,TabixIndexedFile:c9},Symbol.toStringTag,{value:"Module"})),u9=/%([0-9A-Fa-f]{2})/g,f9=/^\s*##\s*(\S+)\s*(.*)/,A9=/\r?\n$/,H1=/\s+/,_1=/\D/g;function kc(n){return n.includes("%")?n.replaceAll(u9,(e,t)=>String.fromCharCode(parseInt(t,16))):n}function h9(n){if(!n.length||n===".")return{};const e={};let t=n;t.endsWith(`
`)&&(t=t.slice(0,t.endsWith(`\r
`)?-2:-1));for(const i of t.split(";")){const r=i.indexOf("=");if(r===-1)continue;const s=i.slice(r+1);if(!s.length)continue;const o=i.slice(0,r).trim();let a=e[o];a||(a=[],e[o]=a);for(const l of s.split(","))a.push(kc(l.trim()))}return e}function d9(n){if(!n.length||n===".")return{};const e={};let t=n;t.endsWith(`
`)&&(t=t.slice(0,t.endsWith(`\r
`)?-2:-1));for(const i of t.split(";")){const r=i.indexOf("=");if(r===-1)continue;const s=i.slice(r+1);if(!s.length)continue;const o=i.slice(0,r).trim();let a=e[o];a||(a=[],e[o]=a);for(const l of s.split(","))a.push(l.trim())}return e}function g9(n){return TA(n.split("	"))}function Ue(n){return n==="."||n===""||n===void 0?null:n}function TA(n){const e=Ue(n[0]),t=Ue(n[1]),i=Ue(n[2]),r=Ue(n[3]),s=Ue(n[4]),o=Ue(n[5]),a=Ue(n[6]),l=Ue(n[7]),c=Ue(n[8]);return{seq_id:e?kc(e):null,source:t?kc(t):null,type:i?kc(i):null,start:r===null?null:parseInt(r,10),end:s===null?null:parseInt(s,10),score:o===null?null:parseFloat(o),strand:a,phase:l,attributes:c===null?null:h9(c)}}function p9(n){const e=Ue(n[0]),t=Ue(n[1]),i=Ue(n[2]),r=Ue(n[3]),s=Ue(n[4]),o=Ue(n[5]),a=Ue(n[6]),l=Ue(n[7]),c=Ue(n[8]);return{seq_id:e,source:t,type:i,start:r===null?null:parseInt(r,10),end:s===null?null:parseInt(s,10),score:o===null?null:parseFloat(o),strand:a,phase:l,attributes:c===null?null:d9(c)}}function m9(n){const e=f9.exec(n);if(!e)return null;const[,t]=e;let[,,i]=e;const r={directive:t};if(i.length&&(i=i.replace(A9,""),r.value=i),t==="sequence-region"){const s=i.split(H1,3);return{...r,seq_id:s[0],start:s[1]?.replaceAll(_1,""),end:s[2]?.replaceAll(_1,"")}}else if(t==="genome-build"){const[s,o]=i.split(H1,2);return{...r,source:s,buildName:o}}return r}const w9=/^\s*[^#\s>]/,y9=/^\s*(#+)(.*)/,C9=/^\s*$/,x9=/^\s*>/,b9=/\r?\n?$/g;class Fc{featureCallback;endCallback;commentCallback;errorCallback;disableDerivesFromReferences;directiveCallback;bufferSize;eof=!1;lineNumber=0;_underConstructionTopLevel=[];_underConstructionById={};_completedReferences={};_underConstructionOrphans={};constructor(e){const t=()=>{};this.featureCallback=e.featureCallback||t,this.endCallback=e.endCallback||t,this.commentCallback=e.commentCallback||t,this.errorCallback=e.errorCallback||t,this.directiveCallback=e.directiveCallback||t,this.disableDerivesFromReferences=e.disableDerivesFromReferences||!1,this.bufferSize=e.bufferSize===void 0?1/0:e.bufferSize}addLine(e){if(this.eof)return;if(this.lineNumber+=1,w9.test(e)){this._bufferLine(e);return}const t=y9.exec(e);if(t){const[,i]=t;let[,,r]=t;if(i.length===3)this._emitAllUnderConstructionFeatures();else if(i.length===2){const s=m9(e);s&&(s.directive==="FASTA"?(this._emitAllUnderConstructionFeatures(),this.eof=!0):this._emitItem(s))}else this._emitItem({comment:r.trimStart()})}else if(!C9.test(e))if(x9.test(e))this._emitAllUnderConstructionFeatures(),this.eof=!0;else{const i=e.replaceAll(b9,"");throw new Error(`GFF3 parse error.  Cannot parse '${i}'.`)}}addParsedFeatureLine(e){this.eof||(this.lineNumber+=1,this._bufferParsedLine(e))}finish(){this._emitAllUnderConstructionFeatures(),this.endCallback()}_emitItem(e){Array.isArray(e)?this.featureCallback(e):"directive"in e?this.directiveCallback(e):"comment"in e&&this.commentCallback(e)}_enforceBufferSizeLimit(e=0){const t=i=>{i&&Array.isArray(i)&&i[0].attributes?.ID?.[0]&&(i[0].attributes.ID.forEach(s=>{delete this._underConstructionById[s],delete this._completedReferences[s]}),i.forEach(s=>{s.child_features&&s.child_features.forEach(o=>{t(o)}),s.derived_features&&s.derived_features.forEach(o=>{t(o)})}))};for(;this._underConstructionTopLevel.length+e>this.bufferSize;){const i=this._underConstructionTopLevel.shift();i&&(this._emitItem(i),t(i))}}_emitAllUnderConstructionFeatures(){this._underConstructionTopLevel.forEach(this._emitItem.bind(this)),this._underConstructionTopLevel=[],this._underConstructionById={},this._completedReferences={};const e=Object.keys(this._underConstructionOrphans);if(e.length)throw new Error(`some features reference other features that do not exist in the file (or in the same '###' scope). ${e.join(",")}`)}_bufferLine(e){this._bufferParsedLine(g9(e))}_bufferParsedLine(e){const t=e;t.child_features=[],t.derived_features=[];const i=t.attributes?.ID||[],r=t.attributes?.Parent||[],s=this.disableDerivesFromReferences?[]:t.attributes?.Derives_from||[];if(!i.length&&!r.length&&!s.length){this._emitItem([t]);return}let o;i.forEach(a=>{const l=this._underConstructionById[a];l?(l[l.length-1].type!==t.type&&this._parseError(`multi-line feature "${a}" has inconsistent types: "${t.type}", "${l[l.length-1].type}"`),l.push(t),o=l):(o=[t],this._enforceBufferSizeLimit(1),!r.length&&!s.length&&this._underConstructionTopLevel.push(o),this._underConstructionById[a]=o,this._resolveReferencesTo(o,a))}),this._resolveReferencesFrom(o||[t],{Parent:r,Derives_from:s},i)}_resolveReferencesTo(e,t){const i=this._underConstructionOrphans[t];if(i){for(const r of e)r.child_features.push(...i.Parent),r.derived_features.push(...i.Derives_from);delete this._underConstructionOrphans[t]}}_parseError(e){this.eof=!0,this.errorCallback(`${this.lineNumber}: ${e}`)}_resolveReferencesFrom(e,t,i){for(const r of t.Parent){const s=this._underConstructionById[r];if(s){let o=!1;for(const a of i){const l=`Parent,${r}`,c=this._completedReferences[a]||(this._completedReferences[a]={});c[l]&&(o=!0),c[l]=!0}if(!o)for(const a of s)a.child_features.push(e)}else{let o=this._underConstructionOrphans[r];o||(o={Parent:[],Derives_from:[]},this._underConstructionOrphans[r]=o),o.Parent.push(e)}}for(const r of t.Derives_from){const s=this._underConstructionById[r];if(s){let o=!1;for(const a of i){const l=`Derives_from,${r}`,c=this._completedReferences[a]||(this._completedReferences[a]={});c[l]&&(o=!0),c[l]=!0}if(!o)for(const a of s)a.derived_features.push(e)}else{let o=this._underConstructionOrphans[r];o||(o={Parent:[],Derives_from:[]},this._underConstructionOrphans[r]=o),o.Derives_from.push(e)}}}}function E9(n){const e=[],t=new Fc({featureCallback:i=>e.push(i),disableDerivesFromReferences:!0,errorCallback:i=>{throw new Error(i)}});for(const i of n.split(/\r?\n/))t.addLine(i);return t.finish(),e}function I9(n){const e=[],t=new Fc({featureCallback:i=>e.push(i),disableDerivesFromReferences:!0,errorCallback:i=>{throw new Error(i)}});for(const i of n)t.addLine(i);return t.finish(),e}function B9(n){const e=[],t=new Fc({featureCallback:i=>e.push(i),disableDerivesFromReferences:!0,errorCallback:i=>{throw new Error(i)}});for(const i of n){const r=TA(i.fields);i.lineHash!==void 0&&(r.attributes||(r.attributes={}),r.attributes._lineHash=[String(i.lineHash)]),t.addParsedFeatureLine(r)}return t.finish(),e}function v9(n,e){const t=[],i=new Fc({featureCallback:s=>t.push(s),disableDerivesFromReferences:!0,errorCallback:s=>{throw new Error(s)}}),r=e?TA:p9;for(const s of n){const o=r(s.fields);s.lineHash!==void 0&&(o.attributes||(o.attributes={}),o.attributes._lineHash=[String(s.lineHash)]),i.addParsedFeatureLine(o)}return i.finish(),t}const S9=Object.freeze(Object.defineProperty({__proto__:null,parseArraySync:I9,parseRecordsSync:B9,parseRecordsSyncFast:v9,parseStringSync:E9},Symbol.toStringTag,{value:"Module"}));function Q9(n,e,t){const i=Object.create(null),r=t.length,s=e.length,o=9,a=58;let l=0;if(n==="GT"){for(let f=0;f<r;f++){const h=l;for(;l<s&&e.charCodeAt(l)!==o;)l++;i[t[f]]=e.slice(h,l),l++}return i}const c=n.indexOf("GT");if(c===-1)return i;if(c===0){for(let f=0;f<r;f++){const h=l;for(;l<s&&e.charCodeAt(l)!==a&&e.charCodeAt(l)!==o;)l++;for(i[t[f]]=e.slice(h,l);l<s&&e.charCodeAt(l)!==o;)l++;l++}return i}let u=0;for(let f=0;f<c;f++)n.charCodeAt(f)===a&&u++;for(let f=0;f<r;f++){const h=l;let A=l;for(;A<s&&e.charCodeAt(A)!==o;)A++;let d=0,g=h;for(let p=h;p<=A;p++)if(p===A||e.charCodeAt(p)===a){if(d===u){i[t[f]]=e.slice(g,p);break}d++,g=p+1}l=A+1}return i}function D9(n){const e=[],t=[];let i=!1,r=!1;const s=n.length;for(let o=0;o<s;o++){const a=n[o];a==='"'?(i=!i,t.push(a)):a==="["?(r=!0,t.push(a)):a==="]"?(r=!1,t.push(a)):a===","&&!i&&!r?(e.push(t.join("").trim()),t.length=0):t.push(a)}return t.length>0&&e.push(t.join("").trim()),e}function k9(n,e){const t=n.indexOf(e);return[n.slice(0,t),n.slice(t+1)]}function F9(n){const e=n.slice(1,-1),t=D9(e),i=[];for(let r=0;r<t.length;r++){const s=t[r],[o,a]=k9(s,"=");if(a&&a.startsWith("[")&&a.endsWith("]")){const l=a.slice(1,-1).split(",");for(let c=0;c<l.length;c++)l[c]=l[c].trim();i.push([o,l])}else a&&a.startsWith('"')&&a.endsWith('"')?i.push([o,a.slice(1,-1)]):i.push([o,a])}return Object.fromEntries(i)}const Rc={InfoFields:{AA:{Number:1,Type:"String",Description:"Ancestral allele"},AC:{Number:"A",Type:"Integer",Description:"Allele count in genotypes, for each ALT allele, in the same order as listed"},AD:{Number:"R",Type:"Integer",Description:"Total read depth for each allele"},ADF:{Number:"R",Type:"Integer",Description:"Read depth for each allele on the forward strand"},ADR:{Number:"R",Type:"Integer",Description:"Read depth for each allele on the reverse strand"},AF:{Number:"A",Type:"Float",Description:"Allele frequency for each ALT allele in the same order as listed (estimated from primary data, not called genotypes)"},AN:{Number:1,Type:"Integer",Description:"Total number of alleles in called genotypes"},BQ:{Number:1,Type:"Float",Description:"RMS base quality"},CIGAR:{Number:1,Type:"Float",Description:"Cigar string describing how to align an alternate allele to the reference allele"},DB:{Number:0,Type:"Flag",Description:"dbSNP membership"},DP:{Number:1,Type:"Integer",Description:"combined depth across samples"},END:{Number:1,Type:"Integer",Description:"End position (for use with symbolic alleles)"},H2:{Number:0,Type:"Flag",Description:"HapMap2 membership"},H3:{Number:0,Type:"Flag",Description:"HapMap3 membership"},MQ:{Number:1,Type:null,Description:"RMS mapping quality"},MQ0:{Number:1,Type:"Integer",Description:"Number of MAPQ == 0 reads"},NS:{Number:1,Type:"Integer",Description:"Number of samples with data"},SB:{Number:4,Type:"Integer",Description:"Strand bias"},SOMATIC:{Number:0,Type:"Flag",Description:"Somatic mutation (for cancer genomics)"},VALIDATED:{Number:0,Type:"Flag",Description:"Validated by follow-up experiment"},"1000G":{Number:0,Type:"Flag",Description:"1000 Genomes membership"},IMPRECISE:{Number:0,Type:"Flag",Description:"Imprecise structural variation"},NOVEL:{Number:0,Type:"Flag",Description:"Indicates a novel structural variation"},SVTYPE:{Number:1,Type:"String",Description:"Type of structural variant"},SVLEN:{Number:null,Type:"Integer",Description:"Difference in length between REF and ALT alleles"},CIPOS:{Number:2,Type:"Integer",Description:"Confidence interval around POS for imprecise variants"},CIEND:{Number:2,Type:"Integer",Description:"Confidence interval around END for imprecise variants"},HOMLEN:{Type:"Integer",Description:"Length of base pair identical micro-homology at event breakpoints"},HOMSEQ:{Type:"String",Description:"Sequence of base pair identical micro-homology at event breakpoints"},BKPTID:{Type:"String",Description:"ID of the assembled alternate allele in the assembly file"},MEINFO:{Number:4,Type:"String",Description:"Mobile element info of the form NAME,START,END,POLARITY"},METRANS:{Number:4,Type:"String",Description:"Mobile element transduction info of the form CHR,START,END,POLARITY"},DGVID:{Number:1,Type:"String",Description:"ID of this element in Database of Genomic Variation"},DBVARID:{Number:1,Type:"String",Description:"ID of this element in DBVAR"},DBRIPID:{Number:1,Type:"String",Description:"ID of this element in DBRIP"},MATEID:{Number:null,Type:"String",Description:"ID of mate breakends"},PARID:{Number:1,Type:"String",Description:"ID of partner breakend"},EVENT:{Number:1,Type:"String",Description:"ID of event associated to breakend"},CILEN:{Number:2,Type:"Integer",Description:"Confidence interval around the inserted material between breakend"},DPADJ:{Type:"Integer",Description:"Read Depth of adjacency"},CN:{Number:1,Type:"Integer",Description:"Copy number of segment containing breakend"},CNADJ:{Number:null,Type:"Integer",Description:"Copy number of adjacency"},CICN:{Number:2,Type:"Integer",Description:"Confidence interval around copy number for the segment"},CICNADJ:{Number:null,Type:"Integer",Description:"Confidence interval around copy number for the adjacency"}},GenotypeFields:{AD:{Number:"R",Type:"Integer",Description:"Read depth for each allele"},ADF:{Number:"R",Type:"Integer",Description:"Read depth for each allele on the forward strand"},ADR:{Number:"R",Type:"Integer",Description:"Read depth for each allele on the reverse strand"},DP:{Number:1,Type:"Integer",Description:"Read depth"},EC:{Number:"A",Type:"Integer",Description:"Expected alternate allele counts"},FT:{Number:1,Type:"String",Description:'Filter indicating if this genotype was "called"'},GL:{Number:"G",Type:"Float",Description:"Genotype likelihoods"},GP:{Number:"G",Type:"Float",Description:"Genotype posterior probabilities"},GQ:{Number:1,Type:"Integer",Description:"Conditional genotype quality"},GT:{Number:1,Type:"String",Description:"Genotype"},HQ:{Number:2,Type:"Integer",Description:"Haplotype quality"},MQ:{Number:1,Type:"Integer",Description:"RMS mapping quality"},PL:{Number:"G",Type:"Integer",Description:"Phred-scaled genotype likelihoods rounded to the closest integer"},PQ:{Number:1,Type:"Integer",Description:"Phasing quality"},PS:{Number:1,Type:"Integer",Description:"Phase set"}},AltTypes:{DEL:{Description:"Deletion relative to the reference"},INS:{Description:"Insertion of novel sequence relative to the reference"},DUP:{Description:"Region of elevated copy number relative to the reference"},INV:{Description:"Inversion of reference sequence"},CNV:{Description:"Copy number variable region (may be both deletion and duplication)"},"DUP:TANDEM":{Description:"Tandem duplication"},"DEL:ME":{Description:"Deletion of mobile element relative to the reference"},"INS:ME":{Description:"Insertion of a mobile element relative to the reference"},NON_REF:{Description:"Represents any possible alternative allele at this location"},"*":{Description:"Represents any possible alternative allele at this location"}},FilterTypes:{PASS:{Description:"Passed all filters"}}};function R9(n){try{return decodeURIComponent(n)}catch{return n}}class M9{constructor({header:e="",strict:t=!0}){if(!e.length)throw new Error("empty header received");const i=e.split(/[\r\n]+/).filter(Boolean);if(!i.length)throw new Error("no non-empty header lines specified");this.strict=t,this.metadata={INFO:{...Rc.InfoFields},FORMAT:{...Rc.GenotypeFields},ALT:{...Rc.AltTypes},FILTER:{...Rc.FilterTypes}};let r;for(let l=0;l<i.length;l++){const c=i[l];if(c.startsWith("#"))c.startsWith("##")?this.parseMetadata(c):r=c;else throw new Error(`Bad line in header:
${c}`)}if(!r)throw new Error("No format line found in header");const s=r.trim().split("	"),o=s.slice(0,8),a=["#CHROM","POS","ID","REF","ALT","QUAL","FILTER","INFO"];if(s.length<8)throw new Error(`VCF header missing columns:
${r}`);if(o.length!==a.length||!o.every((l,c)=>l===a[c]))throw new Error(`VCF column headers not correct:
${r}`);this.samples=s.slice(9)}parseInfo(e){const t={},i=e.includes("%"),r=e.split(";"),s=this.metadata.INFO,o=r.length;for(let a=0;a<o;a++){const l=r[a],c=l.indexOf("="),u=c===-1?l:l.slice(0,c),f=c===-1?void 0:l.slice(c+1),h=s[u]?.Type;if(h==="Flag")t[u]=!0;else if(!f)t[u]=!0;else{const A=h==="Integer"||h==="Float",d=f.split(","),g=d.length;if(i){const p=[];for(let m=0;m<g;m++){const y=d[m];if(y===".")p.push(void 0);else{const C=R9(y);p.push(A?Number(C):C)}}t[u]=p}else{const p=[];for(let m=0;m<g;m++){const y=d[m];y==="."?p.push(void 0):p.push(A?Number(y):y)}t[u]=p}}}return t}parseSamples(e,t){const i={};if(e){const r=t.split("	"),s=e.split(":"),o=this.metadata.FORMAT,a=[];for(let u=0;u<s.length;u++){const f=o[s[u]]?.Type;a.push(f==="Integer"||f==="Float")}const l=s.length,c=this.samples.length;for(let u=0;u<c;u++){const f=this.samples[u],h={},A=r[u],d=A.length;let g=0,p=0;for(let m=0;m<=d;m++)if(m===d||A[m]===":"){const y=A.slice(g,m);if(y===""||y===".")h[s[p]]=void 0;else{const C=y.split(","),w=[];if(a[p])for(let E=0;E<C.length;E++){const I=C[E];w.push(I==="."?void 0:+I)}else for(let E=0;E<C.length;E++){const I=C[E];w.push(I==="."?void 0:I)}h[s[p]]=w}if(g=m+1,p+=1,p>=l)break}i[f]=h}}return i}parseMetadata(e){const t=/^##(.+?)=(.*)/.exec(e.trim());if(!t)throw new Error(`Line is not a valid metadata line: ${e}`);const[i,r]=t.slice(1,3),s=i;if(r?.startsWith("<")){s in this.metadata||(this.metadata[s]={});const[o,a]=this.parseStructuredMetaVal(r);o?this.metadata[s][o]=a:this.metadata[s]=a}else this.metadata[s]=r}parseStructuredMetaVal(e){const t=F9(e),i=t.ID;return delete t.ID,"Number"in t&&(Number.isNaN(Number(t.Number))||(t.Number=Number(t.Number))),[i,t]}getMetadata(...e){let t=this.metadata;const i=e.length;for(let r=0;r<i;r++)if(t=t[e[r]],!t)return t;return t}parseLine(e){let t=0,i=0;for(;t<e.length&&i<9;)e[t]==="	"&&(i+=1),t+=1;const r=i===9?t-1:t,s=e.slice(0,r).split("	"),o=e.slice(r+1),[a,l,c,u,f,h,A]=s,d=a,g=+l,p=c==="."?void 0:c.split(";"),m=u,y=f==="."?void 0:f.split(","),C=h==="."?void 0:+h,w=A==="."?void 0:A.split(";"),E=s[8];if(this.strict&&!s[7])throw new Error("no INFO field specified, must contain at least a '.' (turn off strict mode to allow)");const I=s[7]===void 0||s[7]==="."?{}:this.parseInfo(s[7]);return{CHROM:d,POS:g,ALT:y,INFO:I,REF:m,FILTER:w?.length===1&&w[0]==="PASS"?"PASS":w,ID:p,QUAL:C,FORMAT:E,SAMPLES:()=>this.parseSamples(s[8]??"",o),GENOTYPES:()=>Q9(s[8]??"",o,this.samples)}}}const N9=Object.freeze(Object.defineProperty({__proto__:null,default:M9},Symbol.toStringTag,{value:"Module"}));Si.GenomeSpyDocEmbed=Vw,Object.defineProperty(Si,Symbol.toStringTag,{value:"Module"})}));
