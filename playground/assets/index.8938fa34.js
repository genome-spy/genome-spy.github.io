var SU=Object.defineProperty,xU=Object.defineProperties;var DU=Object.getOwnPropertyDescriptors;var KM=Object.getOwnPropertySymbols;var LU=Object.prototype.hasOwnProperty,kU=Object.prototype.propertyIsEnumerable;var ES=(n,e,t)=>e in n?SU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ae=(n,e)=>{for(var t in e||(e={}))LU.call(e,t)&&ES(n,t,e[t]);if(KM)for(var t of KM(e))kU.call(e,t)&&ES(n,t,e[t]);return n},as=(n,e)=>xU(n,DU(e));var id=(n,e,t)=>(ES(n,typeof e!="symbol"?e+"":e,t),t),IS=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var oi=(n,e,t)=>(IS(n,e,"read from private field"),t?t.call(n):e.get(n)),qn=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Jg=(n,e,t,i)=>(IS(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),GM=(n,e,t,i)=>({set _(s){Jg(n,e,s,t)},get _(){return oi(n,e,i)}}),gn=(n,e,t)=>(IS(n,e,"access private method"),t);const EU=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}};EU();/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const YT=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Q5=Symbol(),YM=new Map;class IU{constructor(e,t){if(this._$cssResult$=!0,t!==Q5)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){let e=YM.get(this.cssText);return YT&&e===void 0&&(YM.set(this.cssText,e=new CSSStyleSheet),e.replaceSync(this.cssText)),e}toString(){return this.cssText}}const TU=n=>new IU(typeof n=="string"?n:n+"",Q5),NU=(n,e)=>{YT?n.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet):e.forEach(t=>{const i=document.createElement("style"),s=window.litNonce;s!==void 0&&i.setAttribute("nonce",s),i.textContent=t.cssText,n.appendChild(i)})},ZM=YT?n=>n:n=>n instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return TU(t)})(n):n;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var TS;const XM=window.trustedTypes,AU=XM?XM.emptyScript:"",QM=window.reactiveElementPolyfillSupport,uL={toAttribute(n,e){switch(e){case Boolean:n=n?AU:null;break;case Object:case Array:n=n==null?n:JSON.stringify(n)}return n},fromAttribute(n,e){let t=n;switch(e){case Boolean:t=n!==null;break;case Number:t=n===null?null:Number(n);break;case Object:case Array:try{t=JSON.parse(n)}catch{t=null}}return t}},J5=(n,e)=>e!==n&&(e==e||n==n),NS={attribute:!0,type:String,converter:uL,reflect:!1,hasChanged:J5};class Dd extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(e){var t;(t=this.l)!==null&&t!==void 0||(this.l=[]),this.l.push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((t,i)=>{const s=this._$Eh(i,t);s!==void 0&&(this._$Eu.set(s,i),e.push(s))}),e}static createProperty(e,t=NS){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const i=typeof e=="symbol"?Symbol():"__"+e,s=this.getPropertyDescriptor(e,i,t);s!==void 0&&Object.defineProperty(this.prototype,e,s)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(s){const r=this[e];this[t]=s,this.requestUpdate(e,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||NS}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const t=this.properties,i=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const s of i)this.createProperty(s,t[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const s of i)t.unshift(ZM(s))}else e!==void 0&&t.push(ZM(e));return t}static _$Eh(e,t){const i=t.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}o(){var e;this._$Ep=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Em(),this.requestUpdate(),(e=this.constructor.l)===null||e===void 0||e.forEach(t=>t(this))}addController(e){var t,i;((t=this._$Eg)!==null&&t!==void 0?t:this._$Eg=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)===null||i===void 0||i.call(e))}removeController(e){var t;(t=this._$Eg)===null||t===void 0||t.splice(this._$Eg.indexOf(e)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach((e,t)=>{this.hasOwnProperty(t)&&(this._$Et.set(t,this[t]),delete this[t])})}createRenderRoot(){var e;const t=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return NU(t,this.constructor.elementStyles),t}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$Eg)===null||e===void 0||e.forEach(t=>{var i;return(i=t.hostConnected)===null||i===void 0?void 0:i.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$Eg)===null||e===void 0||e.forEach(t=>{var i;return(i=t.hostDisconnected)===null||i===void 0?void 0:i.call(t)})}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$ES(e,t,i=NS){var s,r;const o=this.constructor._$Eh(e,i);if(o!==void 0&&i.reflect===!0){const a=((r=(s=i.converter)===null||s===void 0?void 0:s.toAttribute)!==null&&r!==void 0?r:uL.toAttribute)(t,i.type);this._$Ei=e,a==null?this.removeAttribute(o):this.setAttribute(o,a),this._$Ei=null}}_$AK(e,t){var i,s,r;const o=this.constructor,a=o._$Eu.get(e);if(a!==void 0&&this._$Ei!==a){const l=o.getPropertyOptions(a),c=l.converter,h=(r=(s=(i=c)===null||i===void 0?void 0:i.fromAttribute)!==null&&s!==void 0?s:typeof c=="function"?c:null)!==null&&r!==void 0?r:uL.fromAttribute;this._$Ei=a,this[a]=h(t,l.type),this._$Ei=null}}requestUpdate(e,t,i){let s=!0;e!==void 0&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||J5)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),i.reflect===!0&&this._$Ei!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,i))):s=!1),!this.isUpdatePending&&s&&(this._$Ep=this._$E_())}async _$E_(){this.isUpdatePending=!0;try{await this._$Ep}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach((s,r)=>this[r]=s),this._$Et=void 0);let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),(e=this._$Eg)===null||e===void 0||e.forEach(s=>{var r;return(r=s.hostUpdate)===null||r===void 0?void 0:r.call(s)}),this.update(i)):this._$EU()}catch(s){throw t=!1,this._$EU(),s}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;(t=this._$Eg)===null||t===void 0||t.forEach(i=>{var s;return(s=i.hostUpdated)===null||s===void 0?void 0:s.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((t,i)=>this._$ES(i,this[i],t)),this._$EC=void 0),this._$EU()}updated(e){}firstUpdated(e){}}Dd.finalized=!0,Dd.elementProperties=new Map,Dd.elementStyles=[],Dd.shadowRootOptions={mode:"open"},QM==null||QM({ReactiveElement:Dd}),((TS=globalThis.reactiveElementVersions)!==null&&TS!==void 0?TS:globalThis.reactiveElementVersions=[]).push("1.3.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var AS;const xf=globalThis.trustedTypes,JM=xf?xf.createPolicy("lit-html",{createHTML:n=>n}):void 0,Al=`lit$${(Math.random()+"").slice(9)}$`,eB="?"+Al,MU=`<${eB}>`,Df=document,Im=(n="")=>Df.createComment(n),Tm=n=>n===null||typeof n!="object"&&typeof n!="function",tB=Array.isArray,RU=n=>{var e;return tB(n)||typeof((e=n)===null||e===void 0?void 0:e[Symbol.iterator])=="function"},ep=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,eR=/-->/g,tR=/>/g,Wc=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,iR=/'/g,nR=/"/g,iB=/^(?:script|style|textarea|title)$/i,OU=n=>(e,...t)=>({_$litType$:n,strings:e,values:t}),Ti=OU(1),Lf=Symbol.for("lit-noChange"),Ai=Symbol.for("lit-nothing"),sR=new WeakMap,cw=(n,e,t)=>{var i,s;const r=(i=t==null?void 0:t.renderBefore)!==null&&i!==void 0?i:e;let o=r._$litPart$;if(o===void 0){const a=(s=t==null?void 0:t.renderBefore)!==null&&s!==void 0?s:null;r._$litPart$=o=new c0(e.insertBefore(Im(),a),a,void 0,t!=null?t:{})}return o._$AI(n),o},Gd=Df.createTreeWalker(Df,129,null,!1),FU=(n,e)=>{const t=n.length-1,i=[];let s,r=e===2?"<svg>":"",o=ep;for(let l=0;l<t;l++){const c=n[l];let h,u,d=-1,f=0;for(;f<c.length&&(o.lastIndex=f,u=o.exec(c),u!==null);)f=o.lastIndex,o===ep?u[1]==="!--"?o=eR:u[1]!==void 0?o=tR:u[2]!==void 0?(iB.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Wc):u[3]!==void 0&&(o=Wc):o===Wc?u[0]===">"?(o=s!=null?s:ep,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,h=u[1],o=u[3]===void 0?Wc:u[3]==='"'?nR:iR):o===nR||o===iR?o=Wc:o===eR||o===tR?o=ep:(o=Wc,s=void 0);const g=o===Wc&&n[l+1].startsWith("/>")?" ":"";r+=o===ep?c+MU:d>=0?(i.push(h),c.slice(0,d)+"$lit$"+c.slice(d)+Al+g):c+Al+(d===-2?(i.push(void 0),l):g)}const a=r+(n[t]||"<?>")+(e===2?"</svg>":"");if(!Array.isArray(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return[JM!==void 0?JM.createHTML(a):a,i]};class Nm{constructor({strings:e,_$litType$:t},i){let s;this.parts=[];let r=0,o=0;const a=e.length-1,l=this.parts,[c,h]=FU(e,t);if(this.el=Nm.createElement(c,i),Gd.currentNode=this.el.content,t===2){const u=this.el.content,d=u.firstChild;d.remove(),u.append(...d.childNodes)}for(;(s=Gd.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes()){const u=[];for(const d of s.getAttributeNames())if(d.endsWith("$lit$")||d.startsWith(Al)){const f=h[o++];if(u.push(d),f!==void 0){const g=s.getAttribute(f.toLowerCase()+"$lit$").split(Al),p=/([.?@])?(.*)/.exec(f);l.push({type:1,index:r,name:p[2],strings:g,ctor:p[1]==="."?BU:p[1]==="?"?WU:p[1]==="@"?zU:gy})}else l.push({type:6,index:r})}for(const d of u)s.removeAttribute(d)}if(iB.test(s.tagName)){const u=s.textContent.split(Al),d=u.length-1;if(d>0){s.textContent=xf?xf.emptyScript:"";for(let f=0;f<d;f++)s.append(u[f],Im()),Gd.nextNode(),l.push({type:2,index:++r});s.append(u[d],Im())}}}else if(s.nodeType===8)if(s.data===eB)l.push({type:2,index:r});else{let u=-1;for(;(u=s.data.indexOf(Al,u+1))!==-1;)l.push({type:7,index:r}),u+=Al.length-1}r++}}static createElement(e,t){const i=Df.createElement("template");return i.innerHTML=e,i}}function kf(n,e,t=n,i){var s,r,o,a;if(e===Lf)return e;let l=i!==void 0?(s=t._$Cl)===null||s===void 0?void 0:s[i]:t._$Cu;const c=Tm(e)?void 0:e._$litDirective$;return(l==null?void 0:l.constructor)!==c&&((r=l==null?void 0:l._$AO)===null||r===void 0||r.call(l,!1),c===void 0?l=void 0:(l=new c(n),l._$AT(n,t,i)),i!==void 0?((o=(a=t)._$Cl)!==null&&o!==void 0?o:a._$Cl=[])[i]=l:t._$Cu=l),l!==void 0&&(e=kf(n,l._$AS(n,e.values),l,i)),e}class PU{constructor(e,t){this.v=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(e){var t;const{el:{content:i},parts:s}=this._$AD,r=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:Df).importNode(i,!0);Gd.currentNode=r;let o=Gd.nextNode(),a=0,l=0,c=s[0];for(;c!==void 0;){if(a===c.index){let h;c.type===2?h=new c0(o,o.nextSibling,this,e):c.type===1?h=new c.ctor(o,c.name,c.strings,this,e):c.type===6&&(h=new HU(o,this,e)),this.v.push(h),c=s[++l]}a!==(c==null?void 0:c.index)&&(o=Gd.nextNode(),a++)}return r}m(e){let t=0;for(const i of this.v)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class c0{constructor(e,t,i,s){var r;this.type=2,this._$AH=Ai,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=s,this._$Cg=(r=s==null?void 0:s.isConnected)===null||r===void 0||r}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cg}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&e.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=kf(this,e,t),Tm(e)?e===Ai||e==null||e===""?(this._$AH!==Ai&&this._$AR(),this._$AH=Ai):e!==this._$AH&&e!==Lf&&this.$(e):e._$litType$!==void 0?this.T(e):e.nodeType!==void 0?this.k(e):RU(e)?this.S(e):this.$(e)}M(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}k(e){this._$AH!==e&&(this._$AR(),this._$AH=this.M(e))}$(e){this._$AH!==Ai&&Tm(this._$AH)?this._$AA.nextSibling.data=e:this.k(Df.createTextNode(e)),this._$AH=e}T(e){var t;const{values:i,_$litType$:s}=e,r=typeof s=="number"?this._$AC(e):(s.el===void 0&&(s.el=Nm.createElement(s.h,this.options)),s);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===r)this._$AH.m(i);else{const o=new PU(r,this),a=o.p(this.options);o.m(i),this.k(a),this._$AH=o}}_$AC(e){let t=sR.get(e.strings);return t===void 0&&sR.set(e.strings,t=new Nm(e)),t}S(e){tB(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,s=0;for(const r of e)s===t.length?t.push(i=new c0(this.M(Im()),this.M(Im()),this,this.options)):i=t[s],i._$AI(r),s++;s<t.length&&(this._$AR(i&&i._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,t);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var t;this._$AM===void 0&&(this._$Cg=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}}class gy{constructor(e,t,i,s,r){this.type=1,this._$AH=Ai,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=r,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=Ai}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,i,s){const r=this.strings;let o=!1;if(r===void 0)e=kf(this,e,t,0),o=!Tm(e)||e!==this._$AH&&e!==Lf,o&&(this._$AH=e);else{const a=e;let l,c;for(e=r[0],l=0;l<r.length-1;l++)c=kf(this,a[i+l],t,l),c===Lf&&(c=this._$AH[l]),o||(o=!Tm(c)||c!==this._$AH[l]),c===Ai?e=Ai:e!==Ai&&(e+=(c!=null?c:"")+r[l+1]),this._$AH[l]=c}o&&!s&&this.C(e)}C(e){e===Ai?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e!=null?e:"")}}class BU extends gy{constructor(){super(...arguments),this.type=3}C(e){this.element[this.name]=e===Ai?void 0:e}}const VU=xf?xf.emptyScript:"";class WU extends gy{constructor(){super(...arguments),this.type=4}C(e){e&&e!==Ai?this.element.setAttribute(this.name,VU):this.element.removeAttribute(this.name)}}class zU extends gy{constructor(e,t,i,s,r){super(e,t,i,s,r),this.type=5}_$AI(e,t=this){var i;if((e=(i=kf(this,e,t,0))!==null&&i!==void 0?i:Ai)===Lf)return;const s=this._$AH,r=e===Ai&&s!==Ai||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,o=e!==Ai&&(s===Ai||r);r&&this.element.removeEventListener(this.name,this,s),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;typeof this._$AH=="function"?this._$AH.call((i=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&i!==void 0?i:this.element,e):this._$AH.handleEvent(e)}}class HU{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){kf(this,e)}}const rR=window.litHtmlPolyfillSupport;rR==null||rR(Nm,c0),((AS=globalThis.litHtmlVersions)!==null&&AS!==void 0?AS:globalThis.litHtmlVersions=[]).push("2.2.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var MS,RS;class Yd extends Dd{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var e,t;const i=super.createRenderRoot();return(e=(t=this.renderOptions).renderBefore)!==null&&e!==void 0||(t.renderBefore=i.firstChild),i}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Dt=cw(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!1)}render(){return Lf}}Yd.finalized=!0,Yd._$litElement$=!0,(MS=globalThis.litElementHydrateSupport)===null||MS===void 0||MS.call(globalThis,{LitElement:Yd});const oR=globalThis.litElementPolyfillSupport;oR==null||oR({LitElement:Yd});((RS=globalThis.litElementVersions)!==null&&RS!==void 0?RS:globalThis.litElementVersions=[]).push("3.2.0");/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const $U=n=>n.strings===void 0;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const UU={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},jU=n=>(...e)=>({_$litDirective$:n,values:e});class qU{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,i){this._$Ct=e,this._$AM=t,this._$Ci=i}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const zp=(n,e)=>{var t,i;const s=n._$AN;if(s===void 0)return!1;for(const r of s)(i=(t=r)._$AO)===null||i===void 0||i.call(t,e,!1),zp(r,e);return!0},hw=n=>{let e,t;do{if((e=n._$AM)===void 0)break;t=e._$AN,t.delete(n),n=e}while((t==null?void 0:t.size)===0)},nB=n=>{for(let e;e=n._$AM;n=e){let t=e._$AN;if(t===void 0)e._$AN=t=new Set;else if(t.has(n))break;t.add(n),YU(e)}};function KU(n){this._$AN!==void 0?(hw(this),this._$AM=n,nB(this)):this._$AM=n}function GU(n,e=!1,t=0){const i=this._$AH,s=this._$AN;if(s!==void 0&&s.size!==0)if(e)if(Array.isArray(i))for(let r=t;r<i.length;r++)zp(i[r],!1),hw(i[r]);else i!=null&&(zp(i,!1),hw(i));else zp(this,n)}const YU=n=>{var e,t,i,s;n.type==UU.CHILD&&((e=(i=n)._$AP)!==null&&e!==void 0||(i._$AP=GU),(t=(s=n)._$AQ)!==null&&t!==void 0||(s._$AQ=KU))};class ZU extends qU{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,i){super._$AT(e,t,i),nB(this),this.isConnected=e._$AU}_$AO(e,t=!0){var i,s;e!==this.isConnected&&(this.isConnected=e,e?(i=this.reconnected)===null||i===void 0||i.call(this):(s=this.disconnected)===null||s===void 0||s.call(this)),t&&(zp(this,e),hw(this))}setValue(e){if($U(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const sB=()=>new XU;class XU{}const OS=new WeakMap,aR=jU(class extends ZU{render(n){return Ai}update(n,[e]){var t;const i=e!==this.U;return i&&this.U!==void 0&&this.ot(void 0),(i||this.rt!==this.lt)&&(this.U=e,this.ht=(t=n.options)===null||t===void 0?void 0:t.host,this.ot(this.lt=n.element)),Ai}ot(n){var e;if(typeof this.U=="function"){const t=(e=this.ht)!==null&&e!==void 0?e:globalThis;let i=OS.get(t);i===void 0&&(i=new WeakMap,OS.set(t,i)),i.get(this.U)!==void 0&&this.U.call(this.ht,void 0),i.set(this.U,n),n!==void 0&&this.U.call(this.ht,n)}else this.U.value=n}get rt(){var n,e,t;return typeof this.U=="function"?(e=OS.get((n=this.ht)!==null&&n!==void 0?n:globalThis))===null||e===void 0?void 0:e.get(this.U):(t=this.U)===null||t===void 0?void 0:t.value}disconnected(){this.rt===this.lt&&this.ot(void 0)}reconnected(){this.ot(this.lt)}});/*!
 * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function lR(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function be(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lR(Object(t),!0).forEach(function(i){ej(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):lR(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function uw(n){return uw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uw(n)}function QU(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function cR(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function JU(n,e,t){return e&&cR(n.prototype,e),t&&cR(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function ej(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZT(n,e){return ij(n)||sj(n,e)||rB(n,e)||oj()}function py(n){return tj(n)||nj(n)||rB(n)||rj()}function tj(n){if(Array.isArray(n))return dL(n)}function ij(n){if(Array.isArray(n))return n}function nj(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function sj(n,e){var t=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],s=!0,r=!1,o,a;try{for(t=t.call(n);!(s=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));s=!0);}catch(l){r=!0,a=l}finally{try{!s&&t.return!=null&&t.return()}finally{if(r)throw a}}return i}}function rB(n,e){if(!!n){if(typeof n=="string")return dL(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return dL(n,e)}}function dL(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function rj(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hR=function(){},XT={},oB={},aB=null,lB={mark:hR,measure:hR};try{typeof window!="undefined"&&(XT=window),typeof document!="undefined"&&(oB=document),typeof MutationObserver!="undefined"&&(aB=MutationObserver),typeof performance!="undefined"&&(lB=performance)}catch{}var aj=XT.navigator||{},uR=aj.userAgent,dR=uR===void 0?"":uR,tc=XT,ii=oB,fR=aB,cb=lB;tc.document;var hl=!!ii.documentElement&&!!ii.head&&typeof ii.addEventListener=="function"&&typeof ii.createElement=="function",cB=~dR.indexOf("MSIE")||~dR.indexOf("Trident/"),tl="___FONT_AWESOME___",fL=16,hB="fa",uB="svg-inline--fa",Kh="data-fa-i2svg",gL="data-fa-pseudo-element",lj="data-fa-pseudo-element-pending",QT="data-prefix",JT="data-icon",gR="fontawesome-i2svg",cj="async",hj=["HTML","HEAD","STYLE","SCRIPT"],dB=function(){try{return!0}catch{return!1}}(),eN={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},dw={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},fB={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},uj={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},dj=/fa[srltdbk\-\ ]/,gB="fa-layers-text",fj=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,gj={"900":"fas","400":"far",normal:"far","300":"fal","100":"fat"},pB=[1,2,3,4,5,6,7,8,9,10],pj=pB.concat([11,12,13,14,15,16,17,18,19,20]),mj=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],uh={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},_j=[].concat(py(Object.keys(dw)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",uh.GROUP,uh.SWAP_OPACITY,uh.PRIMARY,uh.SECONDARY]).concat(pB.map(function(n){return"".concat(n,"x")})).concat(pj.map(function(n){return"w-".concat(n)})),mB=tc.FontAwesomeConfig||{};function bj(n){var e=ii.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}function vj(n){return n===""?!0:n==="false"?!1:n==="true"?!0:n}if(ii&&typeof ii.querySelector=="function"){var wj=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];wj.forEach(function(n){var e=ZT(n,2),t=e[0],i=e[1],s=vj(bj(t));s!=null&&(mB[i]=s)})}var Cj={familyPrefix:hB,styleDefault:"solid",replacementClass:uB,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},Hp=be(be({},Cj),mB);Hp.autoReplaceSvg||(Hp.observeMutations=!1);var Te={};Object.keys(Hp).forEach(function(n){Object.defineProperty(Te,n,{enumerable:!0,set:function(t){Hp[n]=t,Cv.forEach(function(i){return i(Te)})},get:function(){return Hp[n]}})});tc.FontAwesomeConfig=Te;var Cv=[];function yj(n){return Cv.push(n),function(){Cv.splice(Cv.indexOf(n),1)}}var ml=fL,zo={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Sj(n){if(!(!n||!hl)){var e=ii.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=ii.head.childNodes,i=null,s=t.length-1;s>-1;s--){var r=t[s],o=(r.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=r)}return ii.head.insertBefore(e,i),n}}var xj="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Am(){for(var n=12,e="";n-- >0;)e+=xj[Math.random()*62|0];return e}function fg(n){for(var e=[],t=(n||[]).length>>>0;t--;)e[t]=n[t];return e}function tN(n){return n.classList?fg(n.classList):(n.getAttribute("class")||"").split(" ").filter(function(e){return e})}function _B(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Dj(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(_B(n[t]),'" ')},"").trim()}function my(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t].trim(),";")},"")}function iN(n){return n.size!==zo.size||n.x!==zo.x||n.y!==zo.y||n.rotate!==zo.rotate||n.flipX||n.flipY}function Lj(n){var e=n.transform,t=n.containerWidth,i=n.iconWidth,s={transform:"translate(".concat(t/2," 256)")},r="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(r," ").concat(o," ").concat(a)},c={transform:"translate(".concat(i/2*-1," -256)")};return{outer:s,inner:l,path:c}}function kj(n){var e=n.transform,t=n.width,i=t===void 0?fL:t,s=n.height,r=s===void 0?fL:s,o=n.startCentered,a=o===void 0?!1:o,l="";return a&&cB?l+="translate(".concat(e.x/ml-i/2,"em, ").concat(e.y/ml-r/2,"em) "):a?l+="translate(calc(-50% + ".concat(e.x/ml,"em), calc(-50% + ").concat(e.y/ml,"em)) "):l+="translate(".concat(e.x/ml,"em, ").concat(e.y/ml,"em) "),l+="scale(".concat(e.size/ml*(e.flipX?-1:1),", ").concat(e.size/ml*(e.flipY?-1:1),") "),l+="rotate(".concat(e.rotate,"deg) "),l}var Ej=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function bB(){var n=hB,e=uB,t=Te.familyPrefix,i=Te.replacementClass,s=Ej;if(t!==n||i!==e){var r=new RegExp("\\.".concat(n,"\\-"),"g"),o=new RegExp("\\--".concat(n,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");s=s.replace(r,".".concat(t,"-")).replace(o,"--".concat(t,"-")).replace(a,".".concat(i))}return s}var pR=!1;function FS(){Te.autoAddCss&&!pR&&(Sj(bB()),pR=!0)}var Ij={mixout:function(){return{dom:{css:bB,insertCss:FS}}},hooks:function(){return{beforeDOMElementCreation:function(){FS()},beforeI2svg:function(){FS()}}}},il=tc||{};il[tl]||(il[tl]={});il[tl].styles||(il[tl].styles={});il[tl].hooks||(il[tl].hooks={});il[tl].shims||(il[tl].shims=[]);var $r=il[tl],vB=[],Tj=function n(){ii.removeEventListener("DOMContentLoaded",n),fw=1,vB.map(function(e){return e()})},fw=!1;hl&&(fw=(ii.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ii.readyState),fw||ii.addEventListener("DOMContentLoaded",Tj));function Nj(n){!hl||(fw?setTimeout(n,0):vB.push(n))}function h0(n){var e=n.tag,t=n.attributes,i=t===void 0?{}:t,s=n.children,r=s===void 0?[]:s;return typeof n=="string"?_B(n):"<".concat(e," ").concat(Dj(i),">").concat(r.map(h0).join(""),"</").concat(e,">")}function mR(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}var Aj=function(e,t){return function(i,s,r,o){return e.call(t,i,s,r,o)}},PS=function(e,t,i,s){var r=Object.keys(e),o=r.length,a=s!==void 0?Aj(t,s):t,l,c,h;for(i===void 0?(l=1,h=e[r[0]]):(l=0,h=i);l<o;l++)c=r[l],h=a(h,e[c],c,e);return h};function Mj(n){for(var e=[],t=0,i=n.length;t<i;){var s=n.charCodeAt(t++);if(s>=55296&&s<=56319&&t<i){var r=n.charCodeAt(t++);(r&64512)==56320?e.push(((s&1023)<<10)+(r&1023)+65536):(e.push(s),t--)}else e.push(s)}return e}function pL(n){var e=Mj(n);return e.length===1?e[0].toString(16):null}function Rj(n,e){var t=n.length,i=n.charCodeAt(e),s;return i>=55296&&i<=56319&&t>e+1&&(s=n.charCodeAt(e+1),s>=56320&&s<=57343)?(i-55296)*1024+s-56320+65536:i}function _R(n){return Object.keys(n).reduce(function(e,t){var i=n[t],s=!!i.icon;return s?e[i.iconName]=i.icon:e[t]=i,e},{})}function mL(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=t.skipHooks,s=i===void 0?!1:i,r=_R(e);typeof $r.hooks.addPack=="function"&&!s?$r.hooks.addPack(n,_R(e)):$r.styles[n]=be(be({},$r.styles[n]||{}),r),n==="fas"&&mL("fa",e)}var $p=$r.styles,Oj=$r.shims,Fj=Object.values(fB),nN=null,wB={},CB={},yB={},SB={},xB={},Pj=Object.keys(eN);function Bj(n){return~_j.indexOf(n)}function Vj(n,e){var t=e.split("-"),i=t[0],s=t.slice(1).join("-");return i===n&&s!==""&&!Bj(s)?s:null}var DB=function(){var e=function(r){return PS($p,function(o,a,l){return o[l]=PS(a,r,{}),o},{})};wB=e(function(s,r,o){if(r[3]&&(s[r[3]]=o),r[2]){var a=r[2].filter(function(l){return typeof l=="number"});a.forEach(function(l){s[l.toString(16)]=o})}return s}),CB=e(function(s,r,o){if(s[o]=o,r[2]){var a=r[2].filter(function(l){return typeof l=="string"});a.forEach(function(l){s[l]=o})}return s}),xB=e(function(s,r,o){var a=r[2];return s[o]=o,a.forEach(function(l){s[l]=o}),s});var t="far"in $p||Te.autoFetchSvg,i=PS(Oj,function(s,r){var o=r[0],a=r[1],l=r[2];return a==="far"&&!t&&(a="fas"),typeof o=="string"&&(s.names[o]={prefix:a,iconName:l}),typeof o=="number"&&(s.unicodes[o.toString(16)]={prefix:a,iconName:l}),s},{names:{},unicodes:{}});yB=i.names,SB=i.unicodes,nN=_y(Te.styleDefault)};yj(function(n){nN=_y(n.styleDefault)});DB();function sN(n,e){return(wB[n]||{})[e]}function Wj(n,e){return(CB[n]||{})[e]}function Md(n,e){return(xB[n]||{})[e]}function LB(n){return yB[n]||{prefix:null,iconName:null}}function zj(n){var e=SB[n],t=sN("fas",n);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}function ic(){return nN}var rN=function(){return{prefix:null,iconName:null,rest:[]}};function _y(n){var e=eN[n],t=dw[n]||dw[e],i=n in $r.styles?n:null;return t||i||null}function by(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.skipLookups,i=t===void 0?!1:t,s=null,r=n.reduce(function(o,a){var l=Vj(Te.familyPrefix,a);if($p[a]?(a=Fj.includes(a)?uj[a]:a,s=a,o.prefix=a):Pj.indexOf(a)>-1?(s=a,o.prefix=_y(a)):l?o.iconName=l:a!==Te.replacementClass&&o.rest.push(a),!i&&o.prefix&&o.iconName){var c=s==="fa"?LB(o.iconName):{},h=Md(o.prefix,o.iconName);c.prefix&&(s=null),o.iconName=c.iconName||h||o.iconName,o.prefix=c.prefix||o.prefix,o.prefix==="far"&&!$p.far&&$p.fas&&!Te.autoFetchSvg&&(o.prefix="fas")}return o},rN());return(r.prefix==="fa"||s==="fa")&&(r.prefix=ic()||"fas"),r}var Hj=function(){function n(){QU(this,n),this.definitions={}}return JU(n,[{key:"add",value:function(){for(var t=this,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];var o=s.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){t.definitions[a]=be(be({},t.definitions[a]||{}),o[a]),mL(a,o[a]);var l=fB[a];l&&mL(l,o[a]),DB()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,i){var s=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(s).map(function(r){var o=s[r],a=o.prefix,l=o.iconName,c=o.icon,h=c[2];t[a]||(t[a]={}),h.length>0&&h.forEach(function(u){typeof u=="string"&&(t[a][u]=c)}),t[a][l]=c}),t}}]),n}(),bR=[],Rd={},Zd={},$j=Object.keys(Zd);function Uj(n,e){var t=e.mixoutsTo;return bR=n,Rd={},Object.keys(Zd).forEach(function(i){$j.indexOf(i)===-1&&delete Zd[i]}),bR.forEach(function(i){var s=i.mixout?i.mixout():{};if(Object.keys(s).forEach(function(o){typeof s[o]=="function"&&(t[o]=s[o]),uw(s[o])==="object"&&Object.keys(s[o]).forEach(function(a){t[o]||(t[o]={}),t[o][a]=s[o][a]})}),i.hooks){var r=i.hooks();Object.keys(r).forEach(function(o){Rd[o]||(Rd[o]=[]),Rd[o].push(r[o])})}i.provides&&i.provides(Zd)}),t}function _L(n,e){for(var t=arguments.length,i=new Array(t>2?t-2:0),s=2;s<t;s++)i[s-2]=arguments[s];var r=Rd[n]||[];return r.forEach(function(o){e=o.apply(null,[e].concat(i))}),e}function Gh(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var s=Rd[n]||[];s.forEach(function(r){r.apply(null,t)})}function nl(){var n=arguments[0],e=Array.prototype.slice.call(arguments,1);return Zd[n]?Zd[n].apply(null,e):void 0}function bL(n){n.prefix==="fa"&&(n.prefix="fas");var e=n.iconName,t=n.prefix||ic();if(!!e)return e=Md(t,e)||e,mR(kB.definitions,t,e)||mR($r.styles,t,e)}var kB=new Hj,jj=function(){Te.autoReplaceSvg=!1,Te.observeMutations=!1,Gh("noAuto")},qj={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return hl?(Gh("beforeI2svg",e),nl("pseudoElements2svg",e),nl("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.autoReplaceSvgRoot;Te.autoReplaceSvg===!1&&(Te.autoReplaceSvg=!0),Te.observeMutations=!0,Nj(function(){Gj({autoReplaceSvgRoot:t}),Gh("watch",e)})}},Kj={icon:function(e){if(e===null)return null;if(uw(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Md(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var t=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],i=_y(e[0]);return{prefix:i,iconName:Md(i,t)||t}}if(typeof e=="string"&&(e.indexOf("".concat(Te.familyPrefix,"-"))>-1||e.match(dj))){var s=by(e.split(" "),{skipLookups:!0});return{prefix:s.prefix||ic(),iconName:Md(s.prefix,s.iconName)||s.iconName}}if(typeof e=="string"){var r=ic();return{prefix:r,iconName:Md(r,e)||e}}}},qs={noAuto:jj,config:Te,dom:qj,parse:Kj,library:kB,findIconDefinition:bL,toHtml:h0},Gj=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.autoReplaceSvgRoot,i=t===void 0?ii:t;(Object.keys($r.styles).length>0||Te.autoFetchSvg)&&hl&&Te.autoReplaceSvg&&qs.dom.i2svg({node:i})};function vy(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(i){return h0(i)})}}),Object.defineProperty(n,"node",{get:function(){if(!!hl){var i=ii.createElement("div");return i.innerHTML=n.html,i.children}}}),n}function Yj(n){var e=n.children,t=n.main,i=n.mask,s=n.attributes,r=n.styles,o=n.transform;if(iN(o)&&t.found&&!i.found){var a=t.width,l=t.height,c={x:a/l/2,y:.5};s.style=my(be(be({},r),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:s,children:e}]}function Zj(n){var e=n.prefix,t=n.iconName,i=n.children,s=n.attributes,r=n.symbol,o=r===!0?"".concat(e,"-").concat(Te.familyPrefix,"-").concat(t):r;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:be(be({},s),{},{id:o}),children:i}]}]}function oN(n){var e=n.icons,t=e.main,i=e.mask,s=n.prefix,r=n.iconName,o=n.transform,a=n.symbol,l=n.title,c=n.maskId,h=n.titleId,u=n.extra,d=n.watchable,f=d===void 0?!1:d,g=i.found?i:t,p=g.width,_=g.height,v=s==="fak",b=[Te.replacementClass,r?"".concat(Te.familyPrefix,"-").concat(r):""].filter(function(k){return u.classes.indexOf(k)===-1}).filter(function(k){return k!==""||!!k}).concat(u.classes).join(" "),w={children:[],attributes:be(be({},u.attributes),{},{"data-prefix":s,"data-icon":r,class:b,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(p," ").concat(_)})},C=v&&!~u.classes.indexOf("fa-fw")?{width:"".concat(p/_*16*.0625,"em")}:{};f&&(w.attributes[Kh]=""),l&&(w.children.push({tag:"title",attributes:{id:w.attributes["aria-labelledby"]||"title-".concat(h||Am())},children:[l]}),delete w.attributes.title);var y=be(be({},w),{},{prefix:s,iconName:r,main:t,mask:i,maskId:c,transform:o,symbol:a,styles:be(be({},C),u.styles)}),D=i.found&&t.found?nl("generateAbstractMask",y)||{children:[],attributes:{}}:nl("generateAbstractIcon",y)||{children:[],attributes:{}},S=D.children,x=D.attributes;return y.children=S,y.attributes=x,a?Zj(y):Yj(y)}function vR(n){var e=n.content,t=n.width,i=n.height,s=n.transform,r=n.title,o=n.extra,a=n.watchable,l=a===void 0?!1:a,c=be(be(be({},o.attributes),r?{title:r}:{}),{},{class:o.classes.join(" ")});l&&(c[Kh]="");var h=be({},o.styles);iN(s)&&(h.transform=kj({transform:s,startCentered:!0,width:t,height:i}),h["-webkit-transform"]=h.transform);var u=my(h);u.length>0&&(c.style=u);var d=[];return d.push({tag:"span",attributes:c,children:[e]}),r&&d.push({tag:"span",attributes:{class:"sr-only"},children:[r]}),d}function Xj(n){var e=n.content,t=n.title,i=n.extra,s=be(be(be({},i.attributes),t?{title:t}:{}),{},{class:i.classes.join(" ")}),r=my(i.styles);r.length>0&&(s.style=r);var o=[];return o.push({tag:"span",attributes:s,children:[e]}),t&&o.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),o}var BS=$r.styles;function vL(n){var e=n[0],t=n[1],i=n.slice(4),s=ZT(i,1),r=s[0],o=null;return Array.isArray(r)?o={tag:"g",attributes:{class:"".concat(Te.familyPrefix,"-").concat(uh.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Te.familyPrefix,"-").concat(uh.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Te.familyPrefix,"-").concat(uh.PRIMARY),fill:"currentColor",d:r[1]}}]}:o={tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:e,height:t,icon:o}}var Qj={found:!1,width:512,height:512};function Jj(n,e){!dB&&!Te.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(e,'" is missing.'))}function wL(n,e){var t=e;return e==="fa"&&Te.styleDefault!==null&&(e=ic()),new Promise(function(i,s){if(nl("missingIconAbstract"),t==="fa"){var r=LB(n)||{};n=r.iconName||n,e=r.prefix||e}if(n&&e&&BS[e]&&BS[e][n]){var o=BS[e][n];return i(vL(o))}Jj(n,e),i(be(be({},Qj),{},{icon:Te.showMissingIcons&&n?nl("missingIconAbstract")||{}:{}}))})}var wR=function(){},CL=Te.measurePerformance&&cb&&cb.mark&&cb.measure?cb:{mark:wR,measure:wR},Dp='FA "6.1.1"',eq=function(e){return CL.mark("".concat(Dp," ").concat(e," begins")),function(){return EB(e)}},EB=function(e){CL.mark("".concat(Dp," ").concat(e," ends")),CL.measure("".concat(Dp," ").concat(e),"".concat(Dp," ").concat(e," begins"),"".concat(Dp," ").concat(e," ends"))},aN={begin:eq,end:EB},yv=function(){};function CR(n){var e=n.getAttribute?n.getAttribute(Kh):null;return typeof e=="string"}function tq(n){var e=n.getAttribute?n.getAttribute(QT):null,t=n.getAttribute?n.getAttribute(JT):null;return e&&t}function iq(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(Te.replacementClass)}function nq(){if(Te.autoReplaceSvg===!0)return Sv.replace;var n=Sv[Te.autoReplaceSvg];return n||Sv.replace}function sq(n){return ii.createElementNS("http://www.w3.org/2000/svg",n)}function rq(n){return ii.createElement(n)}function IB(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.ceFn,i=t===void 0?n.tag==="svg"?sq:rq:t;if(typeof n=="string")return ii.createTextNode(n);var s=i(n.tag);Object.keys(n.attributes||[]).forEach(function(o){s.setAttribute(o,n.attributes[o])});var r=n.children||[];return r.forEach(function(o){s.appendChild(IB(o,{ceFn:i}))}),s}function oq(n){var e=" ".concat(n.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var Sv={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(s){t.parentNode.insertBefore(IB(s),t)}),t.getAttribute(Kh)===null&&Te.keepOriginalSource){var i=ii.createComment(oq(t));t.parentNode.replaceChild(i,t)}else t.remove()},nest:function(e){var t=e[0],i=e[1];if(~tN(t).indexOf(Te.replacementClass))return Sv.replace(e);var s=new RegExp("".concat(Te.familyPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var r=i[0].attributes.class.split(" ").reduce(function(a,l){return l===Te.replacementClass||l.match(s)?a.toSvg.push(l):a.toNode.push(l),a},{toNode:[],toSvg:[]});i[0].attributes.class=r.toSvg.join(" "),r.toNode.length===0?t.removeAttribute("class"):t.setAttribute("class",r.toNode.join(" "))}var o=i.map(function(a){return h0(a)}).join(`
`);t.setAttribute(Kh,""),t.innerHTML=o}};function yR(n){n()}function TB(n,e){var t=typeof e=="function"?e:yv;if(n.length===0)t();else{var i=yR;Te.mutateApproach===cj&&(i=tc.requestAnimationFrame||yR),i(function(){var s=nq(),r=aN.begin("mutate");n.map(s),r(),t()})}}var lN=!1;function NB(){lN=!0}function yL(){lN=!1}var gw=null;function SR(n){if(!!fR&&!!Te.observeMutations){var e=n.treeCallback,t=e===void 0?yv:e,i=n.nodeCallback,s=i===void 0?yv:i,r=n.pseudoElementsCallback,o=r===void 0?yv:r,a=n.observeMutationsRoot,l=a===void 0?ii:a;gw=new fR(function(c){if(!lN){var h=ic();fg(c).forEach(function(u){if(u.type==="childList"&&u.addedNodes.length>0&&!CR(u.addedNodes[0])&&(Te.searchPseudoElements&&o(u.target),t(u.target)),u.type==="attributes"&&u.target.parentNode&&Te.searchPseudoElements&&o(u.target.parentNode),u.type==="attributes"&&CR(u.target)&&~mj.indexOf(u.attributeName))if(u.attributeName==="class"&&tq(u.target)){var d=by(tN(u.target)),f=d.prefix,g=d.iconName;u.target.setAttribute(QT,f||h),g&&u.target.setAttribute(JT,g)}else iq(u.target)&&s(u.target)})}}),hl&&gw.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function aq(){!gw||gw.disconnect()}function lq(n){var e=n.getAttribute("style"),t=[];return e&&(t=e.split(";").reduce(function(i,s){var r=s.split(":"),o=r[0],a=r.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),t}function cq(n){var e=n.getAttribute("data-prefix"),t=n.getAttribute("data-icon"),i=n.innerText!==void 0?n.innerText.trim():"",s=by(tN(n));return s.prefix||(s.prefix=ic()),e&&t&&(s.prefix=e,s.iconName=t),s.iconName&&s.prefix||s.prefix&&i.length>0&&(s.iconName=Wj(s.prefix,n.innerText)||sN(s.prefix,pL(n.innerText))),s}function hq(n){var e=fg(n.attributes).reduce(function(s,r){return s.name!=="class"&&s.name!=="style"&&(s[r.name]=r.value),s},{}),t=n.getAttribute("title"),i=n.getAttribute("data-fa-title-id");return Te.autoA11y&&(t?e["aria-labelledby"]="".concat(Te.replacementClass,"-title-").concat(i||Am()):(e["aria-hidden"]="true",e.focusable="false")),e}function uq(){return{iconName:null,title:null,titleId:null,prefix:null,transform:zo,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function xR(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},t=cq(n),i=t.iconName,s=t.prefix,r=t.rest,o=hq(n),a=_L("parseNodeAttributes",{},n),l=e.styleParser?lq(n):[];return be({iconName:i,title:n.getAttribute("title"),titleId:n.getAttribute("data-fa-title-id"),prefix:s,transform:zo,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:l,attributes:o}},a)}var dq=$r.styles;function AB(n){var e=Te.autoReplaceSvg==="nest"?xR(n,{styleParser:!1}):xR(n);return~e.extra.classes.indexOf(gB)?nl("generateLayersText",n,e):nl("generateSvgReplacementMutation",n,e)}function DR(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!hl)return Promise.resolve();var t=ii.documentElement.classList,i=function(u){return t.add("".concat(gR,"-").concat(u))},s=function(u){return t.remove("".concat(gR,"-").concat(u))},r=Te.autoFetchSvg?Object.keys(eN):Object.keys(dq),o=[".".concat(gB,":not([").concat(Kh,"])")].concat(r.map(function(h){return".".concat(h,":not([").concat(Kh,"])")})).join(", ");if(o.length===0)return Promise.resolve();var a=[];try{a=fg(n.querySelectorAll(o))}catch{}if(a.length>0)i("pending"),s("complete");else return Promise.resolve();var l=aN.begin("onTree"),c=a.reduce(function(h,u){try{var d=AB(u);d&&h.push(d)}catch(f){dB||f.name==="MissingIcon"&&console.error(f)}return h},[]);return new Promise(function(h,u){Promise.all(c).then(function(d){TB(d,function(){i("active"),i("complete"),s("pending"),typeof e=="function"&&e(),l(),h()})}).catch(function(d){l(),u(d)})})}function fq(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;AB(n).then(function(t){t&&TB([t],e)})}function gq(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=(e||{}).icon?e:bL(e||{}),s=t.mask;return s&&(s=(s||{}).icon?s:bL(s||{})),n(i,be(be({},t),{},{mask:s}))}}var pq=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.transform,s=i===void 0?zo:i,r=t.symbol,o=r===void 0?!1:r,a=t.mask,l=a===void 0?null:a,c=t.maskId,h=c===void 0?null:c,u=t.title,d=u===void 0?null:u,f=t.titleId,g=f===void 0?null:f,p=t.classes,_=p===void 0?[]:p,v=t.attributes,b=v===void 0?{}:v,w=t.styles,C=w===void 0?{}:w;if(!!e){var y=e.prefix,D=e.iconName,S=e.icon;return vy(be({type:"icon"},e),function(){return Gh("beforeDOMElementCreation",{iconDefinition:e,params:t}),Te.autoA11y&&(d?b["aria-labelledby"]="".concat(Te.replacementClass,"-title-").concat(g||Am()):(b["aria-hidden"]="true",b.focusable="false")),oN({icons:{main:vL(S),mask:l?vL(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:y,iconName:D,transform:be(be({},zo),s),symbol:o,title:d,maskId:h,titleId:g,extra:{attributes:b,styles:C,classes:_}})})}},mq={mixout:function(){return{icon:gq(pq)}},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=DR,t.nodeCallback=fq,t}}},provides:function(e){e.i2svg=function(t){var i=t.node,s=i===void 0?ii:i,r=t.callback,o=r===void 0?function(){}:r;return DR(s,o)},e.generateSvgReplacementMutation=function(t,i){var s=i.iconName,r=i.title,o=i.titleId,a=i.prefix,l=i.transform,c=i.symbol,h=i.mask,u=i.maskId,d=i.extra;return new Promise(function(f,g){Promise.all([wL(s,a),h.iconName?wL(h.iconName,h.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(p){var _=ZT(p,2),v=_[0],b=_[1];f([t,oN({icons:{main:v,mask:b},prefix:a,iconName:s,transform:l,symbol:c,maskId:u,title:r,titleId:o,extra:d,watchable:!0})])}).catch(g)})},e.generateAbstractIcon=function(t){var i=t.children,s=t.attributes,r=t.main,o=t.transform,a=t.styles,l=my(a);l.length>0&&(s.style=l);var c;return iN(o)&&(c=nl("generateAbstractTransformGrouping",{main:r,transform:o,containerWidth:r.width,iconWidth:r.width})),i.push(c||r.icon),{children:i,attributes:s}}}},_q={mixout:function(){return{layer:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.classes,r=s===void 0?[]:s;return vy({type:"layer"},function(){Gh("beforeDOMElementCreation",{assembler:t,params:i});var o=[];return t(function(a){Array.isArray(a)?a.map(function(l){o=o.concat(l.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(Te.familyPrefix,"-layers")].concat(py(r)).join(" ")},children:o}]})}}}},bq={mixout:function(){return{counter:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.title,r=s===void 0?null:s,o=i.classes,a=o===void 0?[]:o,l=i.attributes,c=l===void 0?{}:l,h=i.styles,u=h===void 0?{}:h;return vy({type:"counter",content:t},function(){return Gh("beforeDOMElementCreation",{content:t,params:i}),Xj({content:t.toString(),title:r,extra:{attributes:c,styles:u,classes:["".concat(Te.familyPrefix,"-layers-counter")].concat(py(a))}})})}}}},vq={mixout:function(){return{text:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.transform,r=s===void 0?zo:s,o=i.title,a=o===void 0?null:o,l=i.classes,c=l===void 0?[]:l,h=i.attributes,u=h===void 0?{}:h,d=i.styles,f=d===void 0?{}:d;return vy({type:"text",content:t},function(){return Gh("beforeDOMElementCreation",{content:t,params:i}),vR({content:t,transform:be(be({},zo),r),title:a,extra:{attributes:u,styles:f,classes:["".concat(Te.familyPrefix,"-layers-text")].concat(py(c))}})})}}},provides:function(e){e.generateLayersText=function(t,i){var s=i.title,r=i.transform,o=i.extra,a=null,l=null;if(cB){var c=parseInt(getComputedStyle(t).fontSize,10),h=t.getBoundingClientRect();a=h.width/c,l=h.height/c}return Te.autoA11y&&!s&&(o.attributes["aria-hidden"]="true"),Promise.resolve([t,vR({content:t.innerHTML,width:a,height:l,transform:r,title:s,extra:o,watchable:!0})])}}},wq=new RegExp('"',"ug"),LR=[1105920,1112319];function Cq(n){var e=n.replace(wq,""),t=Rj(e,0),i=t>=LR[0]&&t<=LR[1],s=e.length===2?e[0]===e[1]:!1;return{value:pL(s?e[0]:e),isSecondary:i||s}}function kR(n,e){var t="".concat(lj).concat(e.replace(":","-"));return new Promise(function(i,s){if(n.getAttribute(t)!==null)return i();var r=fg(n.children),o=r.filter(function(D){return D.getAttribute(gL)===e})[0],a=tc.getComputedStyle(n,e),l=a.getPropertyValue("font-family").match(fj),c=a.getPropertyValue("font-weight"),h=a.getPropertyValue("content");if(o&&!l)return n.removeChild(o),i();if(l&&h!=="none"&&h!==""){var u=a.getPropertyValue("content"),d=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?dw[l[2].toLowerCase()]:gj[c],f=Cq(u),g=f.value,p=f.isSecondary,_=l[0].startsWith("FontAwesome"),v=sN(d,g),b=v;if(_){var w=zj(g);w.iconName&&w.prefix&&(v=w.iconName,d=w.prefix)}if(v&&!p&&(!o||o.getAttribute(QT)!==d||o.getAttribute(JT)!==b)){n.setAttribute(t,b),o&&n.removeChild(o);var C=uq(),y=C.extra;y.attributes[gL]=e,wL(v,d).then(function(D){var S=oN(be(be({},C),{},{icons:{main:D,mask:rN()},prefix:d,iconName:b,extra:y,watchable:!0})),x=ii.createElement("svg");e==="::before"?n.insertBefore(x,n.firstChild):n.appendChild(x),x.outerHTML=S.map(function(k){return h0(k)}).join(`
`),n.removeAttribute(t),i()}).catch(s)}else i()}else i()})}function yq(n){return Promise.all([kR(n,"::before"),kR(n,"::after")])}function Sq(n){return n.parentNode!==document.head&&!~hj.indexOf(n.tagName.toUpperCase())&&!n.getAttribute(gL)&&(!n.parentNode||n.parentNode.tagName!=="svg")}function ER(n){if(!!hl)return new Promise(function(e,t){var i=fg(n.querySelectorAll("*")).filter(Sq).map(yq),s=aN.begin("searchPseudoElements");NB(),Promise.all(i).then(function(){s(),yL(),e()}).catch(function(){s(),yL(),t()})})}var xq={hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=ER,t}}},provides:function(e){e.pseudoElements2svg=function(t){var i=t.node,s=i===void 0?ii:i;Te.searchPseudoElements&&ER(s)}}},IR=!1,Dq={mixout:function(){return{dom:{unwatch:function(){NB(),IR=!0}}}},hooks:function(){return{bootstrap:function(){SR(_L("mutationObserverCallbacks",{}))},noAuto:function(){aq()},watch:function(t){var i=t.observeMutationsRoot;IR?yL():SR(_L("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},TR=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(i,s){var r=s.toLowerCase().split("-"),o=r[0],a=r.slice(1).join("-");if(o&&a==="h")return i.flipX=!0,i;if(o&&a==="v")return i.flipY=!0,i;if(a=parseFloat(a),isNaN(a))return i;switch(o){case"grow":i.size=i.size+a;break;case"shrink":i.size=i.size-a;break;case"left":i.x=i.x-a;break;case"right":i.x=i.x+a;break;case"up":i.y=i.y-a;break;case"down":i.y=i.y+a;break;case"rotate":i.rotate=i.rotate+a;break}return i},t)},Lq={mixout:function(){return{parse:{transform:function(t){return TR(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,i){var s=i.getAttribute("data-fa-transform");return s&&(t.transform=TR(s)),t}}},provides:function(e){e.generateAbstractTransformGrouping=function(t){var i=t.main,s=t.transform,r=t.containerWidth,o=t.iconWidth,a={transform:"translate(".concat(r/2," 256)")},l="translate(".concat(s.x*32,", ").concat(s.y*32,") "),c="scale(".concat(s.size/16*(s.flipX?-1:1),", ").concat(s.size/16*(s.flipY?-1:1),") "),h="rotate(".concat(s.rotate," 0 0)"),u={transform:"".concat(l," ").concat(c," ").concat(h)},d={transform:"translate(".concat(o/2*-1," -256)")},f={outer:a,inner:u,path:d};return{tag:"g",attributes:be({},f.outer),children:[{tag:"g",attributes:be({},f.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:be(be({},i.icon.attributes),f.path)}]}]}}}},VS={x:0,y:0,width:"100%",height:"100%"};function NR(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}function kq(n){return n.tag==="g"?n.children:[n]}var Eq={hooks:function(){return{parseNodeAttributes:function(t,i){var s=i.getAttribute("data-fa-mask"),r=s?by(s.split(" ").map(function(o){return o.trim()})):rN();return r.prefix||(r.prefix=ic()),t.mask=r,t.maskId=i.getAttribute("data-fa-mask-id"),t}}},provides:function(e){e.generateAbstractMask=function(t){var i=t.children,s=t.attributes,r=t.main,o=t.mask,a=t.maskId,l=t.transform,c=r.width,h=r.icon,u=o.width,d=o.icon,f=Lj({transform:l,containerWidth:u,iconWidth:c}),g={tag:"rect",attributes:be(be({},VS),{},{fill:"white"})},p=h.children?{children:h.children.map(NR)}:{},_={tag:"g",attributes:be({},f.inner),children:[NR(be({tag:h.tag,attributes:be(be({},h.attributes),f.path)},p))]},v={tag:"g",attributes:be({},f.outer),children:[_]},b="mask-".concat(a||Am()),w="clip-".concat(a||Am()),C={tag:"mask",attributes:be(be({},VS),{},{id:b,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[g,v]},y={tag:"defs",children:[{tag:"clipPath",attributes:{id:w},children:kq(d)},C]};return i.push(y,{tag:"rect",attributes:be({fill:"currentColor","clip-path":"url(#".concat(w,")"),mask:"url(#".concat(b,")")},VS)}),{children:i,attributes:s}}}},Iq={provides:function(e){var t=!1;tc.matchMedia&&(t=tc.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var i=[],s={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:be(be({},s),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=be(be({},r),{},{attributeName:"opacity"}),a={tag:"circle",attributes:be(be({},s),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:be(be({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:be(be({},o),{},{values:"1;0;1;1;0;1;"})}),i.push(a),i.push({tag:"path",attributes:be(be({},s),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:be(be({},o),{},{values:"1;0;0;0;0;1;"})}]}),t||i.push({tag:"path",attributes:be(be({},s),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:be(be({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},Tq={hooks:function(){return{parseNodeAttributes:function(t,i){var s=i.getAttribute("data-fa-symbol"),r=s===null?!1:s===""?!0:s;return t.symbol=r,t}}}},Nq=[Ij,mq,_q,bq,vq,xq,Dq,Lq,Eq,Iq,Tq];Uj(Nq,{mixoutsTo:qs});qs.noAuto;qs.config;qs.library;qs.dom;qs.parse;qs.findIconDefinition;qs.toHtml;var AR=qs.icon;qs.layer;qs.text;qs.counter;/*!
 * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var Aq={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 400c-18 0-32-14-32-32s13.1-32 32-32c17.1 0 32 14 32 32S273.1 400 256 400zM325.1 258L280 286V288c0 13-11 24-24 24S232 301 232 288V272c0-8 4-16 12-21l57-34C308 213 312 206 312 198C312 186 301.1 176 289.1 176h-51.1C225.1 176 216 186 216 198c0 13-11 24-24 24s-24-11-24-24C168 159 199 128 237.1 128h51.1C329 128 360 159 360 198C360 222 347 245 325.1 258z"]},Mq=Aq,Rq={prefix:"fas",iconName:"table-columns",icon:[512,512,["columns"],"f0db","M0 96C0 60.65 28.65 32 64 32H448C483.3 32 512 60.65 512 96V416C512 451.3 483.3 480 448 480H64C28.65 480 0 451.3 0 416V96zM64 416H224V160H64V416zM448 160H288V416H448V160z"]},Oq=Rq;function xc(n,e,t){return n.fields=e||[],n.fname=t,n}function Fq(n){return n==null?null:n.fname}function MB(n){return n==null?null:n.fields}function Pq(n){return n.length===1?Bq(n[0]):Vq(n)}const Bq=n=>function(e){return e[n]},Vq=n=>{const e=n.length;return function(t){for(let i=0;i<e;++i)t=t[n[i]];return t}};function fi(n){throw Error(n)}function Wq(n){const e=[],t=n.length;let i=null,s=0,r="",o,a,l;n=n+"";function c(){e.push(r+n.substring(o,a)),r="",o=a+1}for(o=a=0;a<t;++a)if(l=n[a],l==="\\")r+=n.substring(o,a),r+=n.substring(++a,++a),o=a;else if(l===i)c(),i=null,s=-1;else{if(i)continue;o===s&&l==='"'||o===s&&l==="'"?(o=a+1,i=l):l==="."&&!s?a>o?c():o=a+1:l==="["?(a>o&&c(),s=o=a+1):l==="]"&&(s||fi("Access path missing open bracket: "+n),s>0&&c(),s=0,o=a+1)}return s&&fi("Access path missing closing bracket: "+n),i&&fi("Access path missing closing quote: "+n),a>o&&(a++,c()),e}function wy(n,e,t){const i=Wq(n);return n=i.length===1?i[0]:n,xc((t&&t.get||Pq)(i),[n],e||n)}wy("id");const Cy=xc(n=>n,[],"identity");xc(()=>0,[],"zero");xc(()=>1,[],"one");xc(()=>!0,[],"true");xc(()=>!1,[],"false");var Dr=Array.isArray;function uo(n){return n===Object(n)}function to(n){return n[n.length-1]}function Mm(n){return n==null||n===""?null:+n}const RB=n=>e=>n*Math.exp(e),OB=n=>e=>Math.log(n*e),zq=n=>e=>Math.sign(e)*Math.log1p(Math.abs(e/n)),Hq=n=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*n,pw=n=>e=>e<0?-Math.pow(-e,n):Math.pow(e,n);function cN(n,e,t,i){const s=t(n[0]),r=t(to(n)),o=(r-s)*e;return[i(s-o),i(r-o)]}function $q(n,e){return cN(n,e,Mm,Cy)}function Uq(n,e){var t=Math.sign(n[0]);return cN(n,e,OB(t),RB(t))}function jq(n,e,t){return cN(n,e,pw(t),pw(1/t))}function yy(n,e,t,i,s){const r=i(n[0]),o=i(to(n)),a=e!=null?i(e):(r+o)/2;return[s(a+(r-a)*t),s(a+(o-a)*t)]}function FB(n,e,t){return yy(n,e,t,Mm,Cy)}function PB(n,e,t){const i=Math.sign(n[0]);return yy(n,e,t,OB(i),RB(i))}function SL(n,e,t,i){return yy(n,e,t,pw(i),pw(1/i))}function qq(n,e,t,i){return yy(n,e,t,zq(i),Hq(i))}function xL(n){return n!=null?Dr(n)?n:[n]:[]}function Kq(n,e,t){let i=n[0],s=n[1],r;return s<i&&(r=s,s=i,i=r),r=s-i,r>=t-e?[e,t]:[i=Math.min(Math.max(i,e),t-r),i+r]}function Cs(n){return typeof n=="function"}const Gq="descending";function BB(n,e,t){t=t||{},e=xL(e)||[];const i=[],s=[],r={},o=t.comparator||Yq;return xL(n).forEach((a,l)=>{a!=null&&(i.push(e[l]===Gq?-1:1),s.push(a=Cs(a)?a:wy(a,null,t)),(MB(a)||[]).forEach(c=>r[c]=1))}),s.length===0?null:xc(o(s,i),Object.keys(r))}const VB=(n,e)=>(n<e||n==null)&&e!=null?-1:(n>e||e==null)&&n!=null?1:(e=e instanceof Date?+e:e,(n=n instanceof Date?+n:n)!==n&&e===e?-1:e!==e&&n===n?1:0),Yq=(n,e)=>n.length===1?Zq(n[0],e[0]):Xq(n,e,n.length),Zq=(n,e)=>function(t,i){return VB(n(t),n(i))*e},Xq=(n,e,t)=>(e.push(0),function(i,s){let r,o=0,a=-1;for(;o===0&&++a<t;)r=n[a],o=VB(r(i),r(s));return o*e[a]});function Qq(n){return Cs(n)?n:()=>n}function hN(n){for(let e,t,i=1,s=arguments.length;i<s;++i){e=arguments[i];for(t in e)n[t]=e[t]}return n}const Jq=Object.prototype.hasOwnProperty;function dh(n,e){return Jq.call(n,e)}function Sy(n){return typeof n=="boolean"}function eK(n){return Object.prototype.toString.call(n)==="[object Date]"}function tK(n){return n&&Cs(n[Symbol.iterator])}function ys(n){return typeof n=="number"}function pi(n){return typeof n=="string"}function iK(n,e){const t=n[0],i=to(n),s=+e;return s?s===1?i:t+s*(i-t):t}function mw(n){return n&&to(n)-n[0]||0}function xy(n){return Dr(n)?"["+n.map(xy)+"]":uo(n)||pi(n)?JSON.stringify(n).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):n}function nK(n){return n==null||n===""?null:!n||n==="false"||n==="0"?!1:!!n}const sK=n=>ys(n)||eK(n)?n:Date.parse(n);function rK(n,e){return e=e||sK,n==null||n===""?null:e(n)}function oK(n){return n==null||n===""?null:n+""}function _w(n){const e={},t=n.length;for(let i=0;i<t;++i)e[n[i]]=!0;return e}var MR={},WS={},zS=34,tp=10,HS=13;function WB(n){return new Function("d","return {"+n.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function aK(n,e){var t=WB(n);return function(i,s){return e(t(i),s,n)}}function RR(n){var e=Object.create(null),t=[];return n.forEach(function(i){for(var s in i)s in e||t.push(e[s]=s)}),t}function hs(n,e){var t=n+"",i=t.length;return i<e?new Array(e-i+1).join(0)+t:t}function lK(n){return n<0?"-"+hs(-n,6):n>9999?"+"+hs(n,6):hs(n,4)}function cK(n){var e=n.getUTCHours(),t=n.getUTCMinutes(),i=n.getUTCSeconds(),s=n.getUTCMilliseconds();return isNaN(n)?"Invalid Date":lK(n.getUTCFullYear())+"-"+hs(n.getUTCMonth()+1,2)+"-"+hs(n.getUTCDate(),2)+(s?"T"+hs(e,2)+":"+hs(t,2)+":"+hs(i,2)+"."+hs(s,3)+"Z":i?"T"+hs(e,2)+":"+hs(t,2)+":"+hs(i,2)+"Z":t||e?"T"+hs(e,2)+":"+hs(t,2)+"Z":"")}function zB(n){var e=new RegExp('["'+n+`
\r]`),t=n.charCodeAt(0);function i(u,d){var f,g,p=s(u,function(_,v){if(f)return f(_,v-1);g=_,f=d?aK(_,d):WB(_)});return p.columns=g||[],p}function s(u,d){var f=[],g=u.length,p=0,_=0,v,b=g<=0,w=!1;u.charCodeAt(g-1)===tp&&--g,u.charCodeAt(g-1)===HS&&--g;function C(){if(b)return WS;if(w)return w=!1,MR;var D,S=p,x;if(u.charCodeAt(S)===zS){for(;p++<g&&u.charCodeAt(p)!==zS||u.charCodeAt(++p)===zS;);return(D=p)>=g?b=!0:(x=u.charCodeAt(p++))===tp?w=!0:x===HS&&(w=!0,u.charCodeAt(p)===tp&&++p),u.slice(S+1,D-1).replace(/""/g,'"')}for(;p<g;){if((x=u.charCodeAt(D=p++))===tp)w=!0;else if(x===HS)w=!0,u.charCodeAt(p)===tp&&++p;else if(x!==t)continue;return u.slice(S,D)}return b=!0,u.slice(S,g)}for(;(v=C())!==WS;){for(var y=[];v!==MR&&v!==WS;)y.push(v),v=C();d&&(y=d(y,_++))==null||f.push(y)}return f}function r(u,d){return u.map(function(f){return d.map(function(g){return h(f[g])}).join(n)})}function o(u,d){return d==null&&(d=RR(u)),[d.map(h).join(n)].concat(r(u,d)).join(`
`)}function a(u,d){return d==null&&(d=RR(u)),r(u,d).join(`
`)}function l(u){return u.map(c).join(`
`)}function c(u){return u.map(h).join(n)}function h(u){return u==null?"":u instanceof Date?cK(u):e.test(u+="")?'"'+u.replace(/"/g,'""')+'"':u}return{parse:i,parseRows:s,format:o,formatBody:a,formatRows:l,formatRow:c,formatValue:h}}var hK=zB("	"),uK=hK.parseRows;function dK(n){return n}function fK(n){if(n==null)return dK;var e,t,i=n.scale[0],s=n.scale[1],r=n.translate[0],o=n.translate[1];return function(a,l){l||(e=t=0);var c=2,h=a.length,u=new Array(h);for(u[0]=(e+=a[0])*i+r,u[1]=(t+=a[1])*s+o;c<h;)u[c]=a[c],++c;return u}}function gK(n,e){for(var t,i=n.length,s=i-e;s<--i;)t=n[s],n[s++]=n[i],n[i]=t}function pK(n,e){return typeof e=="string"&&(e=n.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(t){return OR(n,t)})}:OR(n,e)}function OR(n,e){var t=e.id,i=e.bbox,s=e.properties==null?{}:e.properties,r=HB(n,e);return t==null&&i==null?{type:"Feature",properties:s,geometry:r}:i==null?{type:"Feature",id:t,properties:s,geometry:r}:{type:"Feature",id:t,bbox:i,properties:s,geometry:r}}function HB(n,e){var t=fK(n.transform),i=n.arcs;function s(h,u){u.length&&u.pop();for(var d=i[h<0?~h:h],f=0,g=d.length;f<g;++f)u.push(t(d[f],f));h<0&&gK(u,g)}function r(h){return t(h)}function o(h){for(var u=[],d=0,f=h.length;d<f;++d)s(h[d],u);return u.length<2&&u.push(u[0]),u}function a(h){for(var u=o(h);u.length<4;)u.push(u[0]);return u}function l(h){return h.map(a)}function c(h){var u=h.type,d;switch(u){case"GeometryCollection":return{type:u,geometries:h.geometries.map(c)};case"Point":d=r(h.coordinates);break;case"MultiPoint":d=h.coordinates.map(r);break;case"LineString":d=o(h.arcs);break;case"MultiLineString":d=h.arcs.map(o);break;case"Polygon":d=l(h.arcs);break;case"MultiPolygon":d=h.arcs.map(l);break;default:return null}return{type:u,coordinates:d}}return c(e)}function mK(n,e){var t={},i={},s={},r=[],o=-1;e.forEach(function(c,h){var u=n.arcs[c<0?~c:c],d;u.length<3&&!u[1][0]&&!u[1][1]&&(d=e[++o],e[o]=c,e[h]=d)}),e.forEach(function(c){var h=a(c),u=h[0],d=h[1],f,g;if(f=s[u])if(delete s[f.end],f.push(c),f.end=d,g=i[d]){delete i[g.start];var p=g===f?f:f.concat(g);i[p.start=f.start]=s[p.end=g.end]=p}else i[f.start]=s[f.end]=f;else if(f=i[d])if(delete i[f.start],f.unshift(c),f.start=u,g=s[u]){delete s[g.end];var _=g===f?f:g.concat(f);i[_.start=g.start]=s[_.end=f.end]=_}else i[f.start]=s[f.end]=f;else f=[c],i[f.start=u]=s[f.end=d]=f});function a(c){var h=n.arcs[c<0?~c:c],u=h[0],d;return n.transform?(d=[0,0],h.forEach(function(f){d[0]+=f[0],d[1]+=f[1]})):d=h[h.length-1],c<0?[d,u]:[u,d]}function l(c,h){for(var u in c){var d=c[u];delete h[d.start],delete d.start,delete d.end,d.forEach(function(f){t[f<0?~f:f]=1}),r.push(d)}}return l(s,i),l(i,s),e.forEach(function(c){t[c<0?~c:c]||r.push([c])}),r}function _K(n){return HB(n,bK.apply(this,arguments))}function bK(n,e,t){var i,s,r;if(arguments.length>1)i=vK(n,e,t);else for(s=0,i=new Array(r=n.arcs.length);s<r;++s)i[s]=s;return{type:"MultiLineString",arcs:mK(n,i)}}function vK(n,e,t){var i=[],s=[],r;function o(u){var d=u<0?~u:u;(s[d]||(s[d]=[])).push({i:u,g:r})}function a(u){u.forEach(o)}function l(u){u.forEach(a)}function c(u){u.forEach(l)}function h(u){switch(r=u,u.type){case"GeometryCollection":u.geometries.forEach(h);break;case"LineString":a(u.arcs);break;case"MultiLineString":case"Polygon":l(u.arcs);break;case"MultiPolygon":c(u.arcs);break}}return h(e),s.forEach(t==null?function(u){i.push(u[0].i)}:function(u){t(u[0].g,u[u.length-1].g)&&i.push(u[0].i)}),i}function Up(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function wK(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function Dy(n){let e,t,i;n.length!==2?(e=Up,t=(a,l)=>Up(n(a),l),i=(a,l)=>n(a)-l):(e=n===Up||n===wK?n:CK,t=n,i=n);function s(a,l,c=0,h=a.length){if(c<h){if(e(l,l)!==0)return h;do{const u=c+h>>>1;t(a[u],l)<0?c=u+1:h=u}while(c<h)}return c}function r(a,l,c=0,h=a.length){if(c<h){if(e(l,l)!==0)return h;do{const u=c+h>>>1;t(a[u],l)<=0?c=u+1:h=u}while(c<h)}return c}function o(a,l,c=0,h=a.length){const u=s(a,l,c,h-1);return u>c&&i(a[u-1],l)>-i(a[u],l)?u-1:u}return{left:s,center:o,right:r}}function CK(){return 0}function $B(n){return n===null?NaN:+n}const UB=Dy(Up),DL=UB.right;UB.left;Dy($B).center;var gg=DL;function yK(n,e){let t,i;if(e===void 0)for(const s of n)s!=null&&(t===void 0?s>=s&&(t=i=s):(t>s&&(t=s),i<s&&(i=s)));else{let s=-1;for(let r of n)(r=e(r,++s,n))!=null&&(t===void 0?r>=r&&(t=i=r):(t>r&&(t=r),i<r&&(i=r)))}return[t,i]}class Yh extends Map{constructor(e,t=DK){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[i,s]of e)this.set(i,s)}get(e){return super.get(FR(this,e))}has(e){return super.has(FR(this,e))}set(e,t){return super.set(SK(this,e),t)}delete(e){return super.delete(xK(this,e))}}function FR({_intern:n,_key:e},t){const i=e(t);return n.has(i)?n.get(i):t}function SK({_intern:n,_key:e},t){const i=e(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function xK({_intern:n,_key:e},t){const i=e(t);return n.has(i)&&(t=n.get(i),n.delete(i)),t}function DK(n){return n!==null&&typeof n=="object"?n.valueOf():n}function LL(n){return n}function Ly(n,...e){return jB(n,LL,LL,e)}function LK(n,...e){return jB(n,Array.from,LL,e)}function jB(n,e,t,i){return function s(r,o){if(o>=i.length)return t(r);const a=new Yh,l=i[o++];let c=-1;for(const h of r){const u=l(h,++c,r),d=a.get(u);d?d.push(h):a.set(u,[h])}for(const[h,u]of a)a.set(h,s(u,o));return e(a)}(n,0)}var kL=Math.sqrt(50),EL=Math.sqrt(10),IL=Math.sqrt(2);function bw(n,e,t){var i,s=-1,r,o,a;if(e=+e,n=+n,t=+t,n===e&&t>0)return[n];if((i=e<n)&&(r=n,n=e,e=r),(a=qB(n,e,t))===0||!isFinite(a))return[];if(a>0){let l=Math.round(n/a),c=Math.round(e/a);for(l*a<n&&++l,c*a>e&&--c,o=new Array(r=c-l+1);++s<r;)o[s]=(l+s)*a}else{a=-a;let l=Math.round(n*a),c=Math.round(e*a);for(l/a<n&&++l,c/a>e&&--c,o=new Array(r=c-l+1);++s<r;)o[s]=(l+s)/a}return i&&o.reverse(),o}function qB(n,e,t){var i=(e-n)/Math.max(0,t),s=Math.floor(Math.log(i)/Math.LN10),r=i/Math.pow(10,s);return s>=0?(r>=kL?10:r>=EL?5:r>=IL?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(r>=kL?10:r>=EL?5:r>=IL?2:1)}function Zh(n,e,t){var i=Math.abs(e-n)/Math.max(0,t),s=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),r=i/s;return r>=kL?s*=10:r>=EL?s*=5:r>=IL&&(s*=2),e<n?-s:s}function KB(n,e,t=$B){if(!!(i=n.length)){if((e=+e)<=0||i<2)return+t(n[0],0,n);if(e>=1)return+t(n[i-1],i-1,n);var i,s=(i-1)*e,r=Math.floor(s),o=+t(n[r],r,n),a=+t(n[r+1],r+1,n);return o+(a-o)*(s-r)}}function Rm(n,e,t){n=+n,e=+e,t=(s=arguments.length)<2?(e=n,n=0,1):s<3?1:+t;for(var i=-1,s=Math.max(0,Math.ceil((e-n)/t))|0,r=new Array(s);++i<s;)r[i]=n+i*t;return r}function hb(n,e){let t=0;if(e===void 0)for(let i of n)(i=+i)&&(t+=i);else{let i=-1;for(let s of n)(s=+e(s,++i,n))&&(t+=s)}return t}function kK(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function vw(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,i=n.slice(0,t);return[i.length>1?i[0]+i.slice(2):i,+n.slice(t+1)]}function Ef(n){return n=vw(Math.abs(n)),n?n[1]:NaN}function EK(n,e){return function(t,i){for(var s=t.length,r=[],o=0,a=n[0],l=0;s>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),r.push(t.substring(s-=a,s+a)),!((l+=a+1)>i));)a=n[o=(o+1)%n.length];return r.reverse().join(e)}}function IK(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var TK=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nc(n){if(!(e=TK.exec(n)))throw new Error("invalid format: "+n);var e;return new uN({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}nc.prototype=uN.prototype;function uN(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}uN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function NK(n){e:for(var e=n.length,t=1,i=-1,s;t<e;++t)switch(n[t]){case".":i=s=t;break;case"0":i===0&&(i=t),s=t;break;default:if(!+n[t])break e;i>0&&(i=0);break}return i>0?n.slice(0,i)+n.slice(s+1):n}var GB;function AK(n,e){var t=vw(n,e);if(!t)return n+"";var i=t[0],s=t[1],r=s-(GB=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=i.length;return r===o?i:r>o?i+new Array(r-o+1).join("0"):r>0?i.slice(0,r)+"."+i.slice(r):"0."+new Array(1-r).join("0")+vw(n,Math.max(0,e+r-1))[0]}function PR(n,e){var t=vw(n,e);if(!t)return n+"";var i=t[0],s=t[1];return s<0?"0."+new Array(-s).join("0")+i:i.length>s+1?i.slice(0,s+1)+"."+i.slice(s+1):i+new Array(s-i.length+2).join("0")}var BR={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:kK,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>PR(n*100,e),r:PR,s:AK,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function VR(n){return n}var WR=Array.prototype.map,zR=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function MK(n){var e=n.grouping===void 0||n.thousands===void 0?VR:EK(WR.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",i=n.currency===void 0?"":n.currency[1]+"",s=n.decimal===void 0?".":n.decimal+"",r=n.numerals===void 0?VR:IK(WR.call(n.numerals,String)),o=n.percent===void 0?"%":n.percent+"",a=n.minus===void 0?"\u2212":n.minus+"",l=n.nan===void 0?"NaN":n.nan+"";function c(u){u=nc(u);var d=u.fill,f=u.align,g=u.sign,p=u.symbol,_=u.zero,v=u.width,b=u.comma,w=u.precision,C=u.trim,y=u.type;y==="n"?(b=!0,y="g"):BR[y]||(w===void 0&&(w=12),C=!0,y="g"),(_||d==="0"&&f==="=")&&(_=!0,d="0",f="=");var D=p==="$"?t:p==="#"&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",S=p==="$"?i:/[%p]/.test(y)?o:"",x=BR[y],k=/[defgprs%]/.test(y);w=w===void 0?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function F(A){var z=D,H=S,te,ie,ae;if(y==="c")H=x(A)+H,A="";else{A=+A;var _e=A<0||1/A<0;if(A=isNaN(A)?l:x(Math.abs(A),w),C&&(A=NK(A)),_e&&+A==0&&g!=="+"&&(_e=!1),z=(_e?g==="("?g:a:g==="-"||g==="("?"":g)+z,H=(y==="s"?zR[8+GB/3]:"")+H+(_e&&g==="("?")":""),k){for(te=-1,ie=A.length;++te<ie;)if(ae=A.charCodeAt(te),48>ae||ae>57){H=(ae===46?s+A.slice(te+1):A.slice(te))+H,A=A.slice(0,te);break}}}b&&!_&&(A=e(A,1/0));var me=z.length+A.length+H.length,fe=me<v?new Array(v-me+1).join(d):"";switch(b&&_&&(A=e(fe+A,fe.length?v-H.length:1/0),fe=""),f){case"<":A=z+A+H+fe;break;case"=":A=z+fe+A+H;break;case"^":A=fe.slice(0,me=fe.length>>1)+z+A+H+fe.slice(me);break;default:A=fe+z+A+H;break}return r(A)}return F.toString=function(){return u+""},F}function h(u,d){var f=c((u=nc(u),u.type="f",u)),g=Math.max(-8,Math.min(8,Math.floor(Ef(d)/3)))*3,p=Math.pow(10,-g),_=zR[8+g/3];return function(v){return f(p*v)+_}}return{format:c,formatPrefix:h}}var ub,wn,dN;RK({thousands:",",grouping:[3],currency:["$",""]});function RK(n){return ub=MK(n),wn=ub.format,dN=ub.formatPrefix,ub}function YB(n){return Math.max(0,-Ef(Math.abs(n)))}function ZB(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ef(e)/3)))*3-Ef(Math.abs(n)))}function XB(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,Ef(e)-Ef(n))+1}var $S=new Date,US=new Date;function cn(n,e,t,i){function s(r){return n(r=arguments.length===0?new Date:new Date(+r)),r}return s.floor=function(r){return n(r=new Date(+r)),r},s.ceil=function(r){return n(r=new Date(r-1)),e(r,1),n(r),r},s.round=function(r){var o=s(r),a=s.ceil(r);return r-o<a-r?o:a},s.offset=function(r,o){return e(r=new Date(+r),o==null?1:Math.floor(o)),r},s.range=function(r,o,a){var l=[],c;if(r=s.ceil(r),a=a==null?1:Math.floor(a),!(r<o)||!(a>0))return l;do l.push(c=new Date(+r)),e(r,a),n(r);while(c<r&&r<o);return l},s.filter=function(r){return cn(function(o){if(o>=o)for(;n(o),!r(o);)o.setTime(o-1)},function(o,a){if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!r(o););else for(;--a>=0;)for(;e(o,1),!r(o););})},t&&(s.count=function(r,o){return $S.setTime(+r),US.setTime(+o),n($S),n(US),Math.floor(t($S,US))},s.every=function(r){return r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?s.filter(i?function(o){return i(o)%r===0}:function(o){return s.count(0,o)%r===0}):s}),s}var TL=cn(function(){},function(n,e){n.setTime(+n+e)},function(n,e){return e-n});TL.every=function(n){return n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?cn(function(e){e.setTime(Math.floor(e/n)*n)},function(e,t){e.setTime(+e+t*n)},function(e,t){return(t-e)/n}):TL};var fN=TL;const Ua=1e3,_r=Ua*60,ja=_r*60,Xh=ja*24,gN=Xh*7,HR=Xh*30,jS=Xh*365;var OK=cn(function(n){n.setTime(n-n.getMilliseconds())},function(n,e){n.setTime(+n+e*Ua)},function(n,e){return(e-n)/Ua},function(n){return n.getUTCSeconds()}),Vl=OK,FK=cn(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*Ua)},function(n,e){n.setTime(+n+e*_r)},function(n,e){return(e-n)/_r},function(n){return n.getMinutes()}),pN=FK,PK=cn(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*Ua-n.getMinutes()*_r)},function(n,e){n.setTime(+n+e*ja)},function(n,e){return(e-n)/ja},function(n){return n.getHours()}),mN=PK,BK=cn(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*_r)/Xh,n=>n.getDate()-1),Eh=BK;function ku(n){return cn(function(e){e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*_r)/gN})}var ky=ku(0),NL=ku(1);ku(2);ku(3);var Om=ku(4);ku(5);ku(6);var VK=cn(function(n){n.setDate(1),n.setHours(0,0,0,0)},function(n,e){n.setMonth(n.getMonth()+e)},function(n,e){return e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12},function(n){return n.getMonth()}),ww=VK,QB=cn(function(n){n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,e){n.setFullYear(n.getFullYear()+e)},function(n,e){return e.getFullYear()-n.getFullYear()},function(n){return n.getFullYear()});QB.every=function(n){return!isFinite(n=Math.floor(n))||!(n>0)?null:cn(function(e){e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*n)})};var sc=QB,WK=cn(function(n){n.setUTCSeconds(0,0)},function(n,e){n.setTime(+n+e*_r)},function(n,e){return(e-n)/_r},function(n){return n.getUTCMinutes()}),_N=WK,zK=cn(function(n){n.setUTCMinutes(0,0,0)},function(n,e){n.setTime(+n+e*ja)},function(n,e){return(e-n)/ja},function(n){return n.getUTCHours()}),bN=zK,HK=cn(function(n){n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCDate(n.getUTCDate()+e)},function(n,e){return(e-n)/Xh},function(n){return n.getUTCDate()-1}),Ih=HK;function Eu(n){return cn(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/gN})}var Ey=Eu(0),AL=Eu(1);Eu(2);Eu(3);var Fm=Eu(4);Eu(5);Eu(6);var $K=cn(function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCMonth(n.getUTCMonth()+e)},function(n,e){return e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12},function(n){return n.getUTCMonth()}),Cw=$K,JB=cn(function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e)},function(n,e){return e.getUTCFullYear()-n.getUTCFullYear()},function(n){return n.getUTCFullYear()});JB.every=function(n){return!isFinite(n=Math.floor(n))||!(n>0)?null:cn(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*n)})};var rc=JB;function e8(n,e,t,i,s,r){const o=[[Vl,1,Ua],[Vl,5,5*Ua],[Vl,15,15*Ua],[Vl,30,30*Ua],[r,1,_r],[r,5,5*_r],[r,15,15*_r],[r,30,30*_r],[s,1,ja],[s,3,3*ja],[s,6,6*ja],[s,12,12*ja],[i,1,Xh],[i,2,2*Xh],[t,1,gN],[e,1,HR],[e,3,3*HR],[n,1,jS]];function a(c,h,u){const d=h<c;d&&([c,h]=[h,c]);const f=u&&typeof u.range=="function"?u:l(c,h,u),g=f?f.range(c,+h+1):[];return d?g.reverse():g}function l(c,h,u){const d=Math.abs(h-c)/u,f=Dy(([,,_])=>_).right(o,d);if(f===o.length)return n.every(Zh(c/jS,h/jS,u));if(f===0)return fN.every(Math.max(Zh(c,h,u),1));const[g,p]=o[d/o[f-1][2]<o[f][2]/d?f-1:f];return g.every(p)}return[a,l]}const[UK,jK]=e8(rc,Cw,Ey,Ih,bN,_N),[qK,KK]=e8(sc,ww,ky,Eh,mN,pN),Pm="year",Bm="quarter",Vm="month",Wm="week",zm="date",Iy="day",vN="dayofyear",Hm="hours",$m="minutes",Um="seconds",Ty="milliseconds",GK=[Pm,Bm,Vm,Wm,zm,Iy,vN,Hm,$m,Um,Ty];GK.reduce((n,e,t)=>(n[e]=1+t,n),{});const YK={[Pm]:sc,[Bm]:ww.every(3),[Vm]:ww,[Wm]:ky,[zm]:Eh,[Iy]:Eh,[vN]:Eh,[Hm]:mN,[$m]:pN,[Um]:Vl,[Ty]:fN},ZK={[Pm]:rc,[Bm]:Cw.every(3),[Vm]:Cw,[Wm]:Ey,[zm]:Ih,[Iy]:Ih,[vN]:Ih,[Hm]:bN,[$m]:_N,[Um]:Vl,[Ty]:fN};function XK(n){return YK[n]}function QK(n){return ZK[n]}function qS(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function KS(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function ip(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function t8(n){var e=n.dateTime,t=n.date,i=n.time,s=n.periods,r=n.days,o=n.shortDays,a=n.months,l=n.shortMonths,c=np(s),h=sp(s),u=np(r),d=sp(r),f=np(o),g=sp(o),p=np(a),_=sp(a),v=np(l),b=sp(l),w={a:_e,A:me,b:fe,B:Dt,c:null,d:GR,e:GR,f:CG,g:NG,G:MG,H:bG,I:vG,j:wG,L:i8,m:yG,M:SG,p:ct,q:mt,Q:XR,s:QR,S:xG,u:DG,U:LG,V:kG,w:EG,W:IG,x:null,X:null,y:TG,Y:AG,Z:RG,"%":ZR},C={a:Et,A:tt,b:dn,B:Qs,c:null,d:YR,e:YR,f:BG,g:GG,G:ZG,H:OG,I:FG,j:PG,L:s8,m:VG,M:WG,p:Ir,q:Es,Q:XR,s:QR,S:zG,u:HG,U:$G,V:UG,w:jG,W:qG,x:null,X:null,y:KG,Y:YG,Z:XG,"%":ZR},y={a:F,A,b:z,B:H,c:te,d:qR,e:qR,f:gG,g:jR,G:UR,H:KR,I:KR,j:hG,L:fG,m:cG,M:uG,p:k,q:lG,Q:mG,s:_G,S:dG,u:nG,U:sG,V:rG,w:iG,W:oG,x:ie,X:ae,y:jR,Y:UR,Z:aG,"%":pG};w.x=D(t,w),w.X=D(i,w),w.c=D(e,w),C.x=D(t,C),C.X=D(i,C),C.c=D(e,C);function D(re,We){return function(ce){var U=[],Li=-1,wt=0,_i=re.length,di,Dn,vo;for(ce instanceof Date||(ce=new Date(+ce));++Li<_i;)re.charCodeAt(Li)===37&&(U.push(re.slice(wt,Li)),(Dn=$R[di=re.charAt(++Li)])!=null?di=re.charAt(++Li):Dn=di==="e"?" ":"0",(vo=We[di])&&(di=vo(ce,Dn)),U.push(di),wt=Li+1);return U.push(re.slice(wt,Li)),U.join("")}}function S(re,We){return function(ce){var U=ip(1900,void 0,1),Li=x(U,re,ce+="",0),wt,_i;if(Li!=ce.length)return null;if("Q"in U)return new Date(U.Q);if("s"in U)return new Date(U.s*1e3+("L"in U?U.L:0));if(We&&!("Z"in U)&&(U.Z=0),"p"in U&&(U.H=U.H%12+U.p*12),U.m===void 0&&(U.m="q"in U?U.q:0),"V"in U){if(U.V<1||U.V>53)return null;"w"in U||(U.w=1),"Z"in U?(wt=KS(ip(U.y,0,1)),_i=wt.getUTCDay(),wt=_i>4||_i===0?AL.ceil(wt):AL(wt),wt=Ih.offset(wt,(U.V-1)*7),U.y=wt.getUTCFullYear(),U.m=wt.getUTCMonth(),U.d=wt.getUTCDate()+(U.w+6)%7):(wt=qS(ip(U.y,0,1)),_i=wt.getDay(),wt=_i>4||_i===0?NL.ceil(wt):NL(wt),wt=Eh.offset(wt,(U.V-1)*7),U.y=wt.getFullYear(),U.m=wt.getMonth(),U.d=wt.getDate()+(U.w+6)%7)}else("W"in U||"U"in U)&&("w"in U||(U.w="u"in U?U.u%7:"W"in U?1:0),_i="Z"in U?KS(ip(U.y,0,1)).getUTCDay():qS(ip(U.y,0,1)).getDay(),U.m=0,U.d="W"in U?(U.w+6)%7+U.W*7-(_i+5)%7:U.w+U.U*7-(_i+6)%7);return"Z"in U?(U.H+=U.Z/100|0,U.M+=U.Z%100,KS(U)):qS(U)}}function x(re,We,ce,U){for(var Li=0,wt=We.length,_i=ce.length,di,Dn;Li<wt;){if(U>=_i)return-1;if(di=We.charCodeAt(Li++),di===37){if(di=We.charAt(Li++),Dn=y[di in $R?We.charAt(Li++):di],!Dn||(U=Dn(re,ce,U))<0)return-1}else if(di!=ce.charCodeAt(U++))return-1}return U}function k(re,We,ce){var U=c.exec(We.slice(ce));return U?(re.p=h.get(U[0].toLowerCase()),ce+U[0].length):-1}function F(re,We,ce){var U=f.exec(We.slice(ce));return U?(re.w=g.get(U[0].toLowerCase()),ce+U[0].length):-1}function A(re,We,ce){var U=u.exec(We.slice(ce));return U?(re.w=d.get(U[0].toLowerCase()),ce+U[0].length):-1}function z(re,We,ce){var U=v.exec(We.slice(ce));return U?(re.m=b.get(U[0].toLowerCase()),ce+U[0].length):-1}function H(re,We,ce){var U=p.exec(We.slice(ce));return U?(re.m=_.get(U[0].toLowerCase()),ce+U[0].length):-1}function te(re,We,ce){return x(re,e,We,ce)}function ie(re,We,ce){return x(re,t,We,ce)}function ae(re,We,ce){return x(re,i,We,ce)}function _e(re){return o[re.getDay()]}function me(re){return r[re.getDay()]}function fe(re){return l[re.getMonth()]}function Dt(re){return a[re.getMonth()]}function ct(re){return s[+(re.getHours()>=12)]}function mt(re){return 1+~~(re.getMonth()/3)}function Et(re){return o[re.getUTCDay()]}function tt(re){return r[re.getUTCDay()]}function dn(re){return l[re.getUTCMonth()]}function Qs(re){return a[re.getUTCMonth()]}function Ir(re){return s[+(re.getUTCHours()>=12)]}function Es(re){return 1+~~(re.getUTCMonth()/3)}return{format:function(re){var We=D(re+="",w);return We.toString=function(){return re},We},parse:function(re){var We=S(re+="",!1);return We.toString=function(){return re},We},utcFormat:function(re){var We=D(re+="",C);return We.toString=function(){return re},We},utcParse:function(re){var We=S(re+="",!0);return We.toString=function(){return re},We}}}var $R={"-":"",_:" ","0":"0"},hn=/^\s*\d+/,JK=/^%/,eG=/[\\^$*+?|[\]().{}]/g;function xt(n,e,t){var i=n<0?"-":"",s=(i?-n:n)+"",r=s.length;return i+(r<t?new Array(t-r+1).join(e)+s:s)}function tG(n){return n.replace(eG,"\\$&")}function np(n){return new RegExp("^(?:"+n.map(tG).join("|")+")","i")}function sp(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function iG(n,e,t){var i=hn.exec(e.slice(t,t+1));return i?(n.w=+i[0],t+i[0].length):-1}function nG(n,e,t){var i=hn.exec(e.slice(t,t+1));return i?(n.u=+i[0],t+i[0].length):-1}function sG(n,e,t){var i=hn.exec(e.slice(t,t+2));return i?(n.U=+i[0],t+i[0].length):-1}function rG(n,e,t){var i=hn.exec(e.slice(t,t+2));return i?(n.V=+i[0],t+i[0].length):-1}function oG(n,e,t){var i=hn.exec(e.slice(t,t+2));return i?(n.W=+i[0],t+i[0].length):-1}function UR(n,e,t){var i=hn.exec(e.slice(t,t+4));return i?(n.y=+i[0],t+i[0].length):-1}function jR(n,e,t){var i=hn.exec(e.slice(t,t+2));return i?(n.y=+i[0]+(+i[0]>68?1900:2e3),t+i[0].length):-1}function aG(n,e,t){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return i?(n.Z=i[1]?0:-(i[2]+(i[3]||"00")),t+i[0].length):-1}function lG(n,e,t){var i=hn.exec(e.slice(t,t+1));return i?(n.q=i[0]*3-3,t+i[0].length):-1}function cG(n,e,t){var i=hn.exec(e.slice(t,t+2));return i?(n.m=i[0]-1,t+i[0].length):-1}function qR(n,e,t){var i=hn.exec(e.slice(t,t+2));return i?(n.d=+i[0],t+i[0].length):-1}function hG(n,e,t){var i=hn.exec(e.slice(t,t+3));return i?(n.m=0,n.d=+i[0],t+i[0].length):-1}function KR(n,e,t){var i=hn.exec(e.slice(t,t+2));return i?(n.H=+i[0],t+i[0].length):-1}function uG(n,e,t){var i=hn.exec(e.slice(t,t+2));return i?(n.M=+i[0],t+i[0].length):-1}function dG(n,e,t){var i=hn.exec(e.slice(t,t+2));return i?(n.S=+i[0],t+i[0].length):-1}function fG(n,e,t){var i=hn.exec(e.slice(t,t+3));return i?(n.L=+i[0],t+i[0].length):-1}function gG(n,e,t){var i=hn.exec(e.slice(t,t+6));return i?(n.L=Math.floor(i[0]/1e3),t+i[0].length):-1}function pG(n,e,t){var i=JK.exec(e.slice(t,t+1));return i?t+i[0].length:-1}function mG(n,e,t){var i=hn.exec(e.slice(t));return i?(n.Q=+i[0],t+i[0].length):-1}function _G(n,e,t){var i=hn.exec(e.slice(t));return i?(n.s=+i[0],t+i[0].length):-1}function GR(n,e){return xt(n.getDate(),e,2)}function bG(n,e){return xt(n.getHours(),e,2)}function vG(n,e){return xt(n.getHours()%12||12,e,2)}function wG(n,e){return xt(1+Eh.count(sc(n),n),e,3)}function i8(n,e){return xt(n.getMilliseconds(),e,3)}function CG(n,e){return i8(n,e)+"000"}function yG(n,e){return xt(n.getMonth()+1,e,2)}function SG(n,e){return xt(n.getMinutes(),e,2)}function xG(n,e){return xt(n.getSeconds(),e,2)}function DG(n){var e=n.getDay();return e===0?7:e}function LG(n,e){return xt(ky.count(sc(n)-1,n),e,2)}function n8(n){var e=n.getDay();return e>=4||e===0?Om(n):Om.ceil(n)}function kG(n,e){return n=n8(n),xt(Om.count(sc(n),n)+(sc(n).getDay()===4),e,2)}function EG(n){return n.getDay()}function IG(n,e){return xt(NL.count(sc(n)-1,n),e,2)}function TG(n,e){return xt(n.getFullYear()%100,e,2)}function NG(n,e){return n=n8(n),xt(n.getFullYear()%100,e,2)}function AG(n,e){return xt(n.getFullYear()%1e4,e,4)}function MG(n,e){var t=n.getDay();return n=t>=4||t===0?Om(n):Om.ceil(n),xt(n.getFullYear()%1e4,e,4)}function RG(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+xt(e/60|0,"0",2)+xt(e%60,"0",2)}function YR(n,e){return xt(n.getUTCDate(),e,2)}function OG(n,e){return xt(n.getUTCHours(),e,2)}function FG(n,e){return xt(n.getUTCHours()%12||12,e,2)}function PG(n,e){return xt(1+Ih.count(rc(n),n),e,3)}function s8(n,e){return xt(n.getUTCMilliseconds(),e,3)}function BG(n,e){return s8(n,e)+"000"}function VG(n,e){return xt(n.getUTCMonth()+1,e,2)}function WG(n,e){return xt(n.getUTCMinutes(),e,2)}function zG(n,e){return xt(n.getUTCSeconds(),e,2)}function HG(n){var e=n.getUTCDay();return e===0?7:e}function $G(n,e){return xt(Ey.count(rc(n)-1,n),e,2)}function r8(n){var e=n.getUTCDay();return e>=4||e===0?Fm(n):Fm.ceil(n)}function UG(n,e){return n=r8(n),xt(Fm.count(rc(n),n)+(rc(n).getUTCDay()===4),e,2)}function jG(n){return n.getUTCDay()}function qG(n,e){return xt(AL.count(rc(n)-1,n),e,2)}function KG(n,e){return xt(n.getUTCFullYear()%100,e,2)}function GG(n,e){return n=r8(n),xt(n.getUTCFullYear()%100,e,2)}function YG(n,e){return xt(n.getUTCFullYear()%1e4,e,4)}function ZG(n,e){var t=n.getUTCDay();return n=t>=4||t===0?Fm(n):Fm.ceil(n),xt(n.getUTCFullYear()%1e4,e,4)}function XG(){return"+0000"}function ZR(){return"%"}function XR(n){return+n}function QR(n){return Math.floor(+n/1e3)}var nd,wN,o8,CN,a8;QG({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function QG(n){return nd=t8(n),wN=nd.format,o8=nd.parse,CN=nd.utcFormat,a8=nd.utcParse,nd}function Lp(n){const e={};return t=>e[t]||(e[t]=n(t))}function JG(n,e){return t=>{const i=n(t),s=i.indexOf(e);if(s<0)return i;let r=eY(i,s);const o=r<i.length?i.slice(r):"";for(;--r>s;)if(i[r]!=="0"){++r;break}return i.slice(0,r)+o}}function eY(n,e){let t=n.lastIndexOf("e"),i;if(t>0)return t;for(t=n.length;--t>e;)if(i=n.charCodeAt(t),i>=48&&i<=57)return t+1}function tY(n){const e=Lp(n.format),t=n.formatPrefix;return{format:e,formatPrefix:t,formatFloat(i){const s=nc(i||",");if(s.precision==null){switch(s.precision=12,s.type){case"%":s.precision-=2;break;case"e":s.precision-=1;break}return JG(e(s),e(".1f")(1)[1])}else return e(s)},formatSpan(i,s,r,o){o=nc(o==null?",f":o);const a=Zh(i,s,r),l=Math.max(Math.abs(i),Math.abs(s));let c;if(o.precision==null)switch(o.type){case"s":return isNaN(c=ZB(a,l))||(o.precision=c),t(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(c=XB(a,l))||(o.precision=c-(o.type==="e"));break}case"f":case"%":{isNaN(c=YB(a))||(o.precision=c-(o.type==="%")*2);break}}return e(o)}}}iY();function iY(){return tY({format:wn,formatPrefix:dN})}function JR(n,e,t){t=t||{},uo(t)||fi("Invalid time multi-format specifier: ".concat(t));const i=e(Um),s=e($m),r=e(Hm),o=e(zm),a=e(Wm),l=e(Vm),c=e(Bm),h=e(Pm),u=n(t[Ty]||".%L"),d=n(t[Um]||":%S"),f=n(t[$m]||"%I:%M"),g=n(t[Hm]||"%I %p"),p=n(t[zm]||t[Iy]||"%a %d"),_=n(t[Wm]||"%b %d"),v=n(t[Vm]||"%B"),b=n(t[Bm]||"%B"),w=n(t[Pm]||"%Y");return C=>(i(C)<C?u:s(C)<C?d:r(C)<C?f:o(C)<C?g:l(C)<C?a(C)<C?p:_:h(C)<C?c(C)<C?v:b:w)(C)}function l8(n){const e=Lp(n.format),t=Lp(n.utcFormat);return{timeFormat:i=>pi(i)?e(i):JR(e,XK,i),utcFormat:i=>pi(i)?t(i):JR(t,QK,i),timeParse:Lp(n.parse),utcParse:Lp(n.utcParse)}}let ML;nY();function nY(){return ML=l8({format:wN,parse:o8,utcFormat:CN,utcParse:a8})}function sY(n){return l8(t8(n))}function rY(n){return arguments.length?ML=sY(n):ML}const oY=/^(data:|([A-Za-z]+:)?\/\/)/,aY=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,lY=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,eO="file://";function cY(n,e){return t=>({options:t||{},sanitize:uY,load:hY,fileAccess:!!e,file:dY(e),http:gY(n)})}async function hY(n,e){const t=await this.sanitize(n,e),i=t.href;return t.localFile?this.file(i):this.http(i,e)}async function uY(n,e){e=hN({},this.options,e);const t=this.fileAccess,i={href:null};let s,r,o;const a=aY.test(n.replace(lY,""));(n==null||typeof n!="string"||!a)&&fi("Sanitize failure, invalid URI: "+xy(n));const l=oY.test(n);return(o=e.baseURL)&&!l&&(!n.startsWith("/")&&!o.endsWith("/")&&(n="/"+n),n=o+n),r=(s=n.startsWith(eO))||e.mode==="file"||e.mode!=="http"&&!l&&t,s?n=n.slice(eO.length):n.startsWith("//")&&(e.defaultProtocol==="file"?(n=n.slice(2),r=!0):n=(e.defaultProtocol||"http")+":"+n),Object.defineProperty(i,"localFile",{value:!!r}),i.href=n,e.target&&(i.target=e.target+""),e.rel&&(i.rel=e.rel+""),e.context==="image"&&e.crossOrigin&&(i.crossOrigin=e.crossOrigin+""),i}function dY(n){return n?e=>new Promise((t,i)=>{n.readFile(e,(s,r)=>{s?i(s):t(r)})}):fY}async function fY(){fi("No file system access.")}function gY(n){return n?async function(e,t){const i=hN({},this.options.http,t),s=t&&t.response,r=await n(e,i);return r.ok?Cs(r[s])?r[s]():r.text():fi(r.status+""+r.statusText)}:pY}async function pY(){fi("No HTTP fetch method available.")}const mY=n=>n!=null&&n===n,_Y=n=>n==="true"||n==="false"||n===!0||n===!1,bY=n=>!Number.isNaN(Date.parse(n)),c8=n=>!Number.isNaN(+n)&&!(n instanceof Date),vY=n=>c8(n)&&Number.isInteger(+n),tO={boolean:nK,integer:Mm,number:Mm,date:rK,string:oK,unknown:Cy},db=[_Y,vY,c8,bY],wY=["boolean","integer","number","date"];function CY(n,e){if(!n||!n.length)return"unknown";const t=n.length,i=db.length,s=db.map((r,o)=>o+1);for(let r=0,o=0,a,l;r<t;++r)for(l=e?n[r][e]:n[r],a=0;a<i;++a)if(s[a]&&mY(l)&&!db[a](l)&&(s[a]=0,++o,o===db.length))return"string";return wY[s.reduce((r,o)=>r===0?o:r,0)-1]}function yY(n,e){return e.reduce((t,i)=>(t[i]=CY(n,i),t),{})}function iO(n){const e=function(t,i){const s={delimiter:n};return yN(t,i?hN(i,s):s)};return e.responseType="text",e}function yN(n,e){return e.header&&(n=e.header.map(xy).join(e.delimiter)+`
`+n),zB(e.delimiter).parse(n+"")}yN.responseType="text";function SY(n){return typeof Buffer=="function"&&Cs(Buffer.isBuffer)?Buffer.isBuffer(n):!1}function SN(n,e){const t=e&&e.property?wy(e.property):Cy;return uo(n)&&!SY(n)?xY(t(n),e):t(JSON.parse(n))}SN.responseType="json";function xY(n,e){return!Dr(n)&&tK(n)&&(n=[...n]),e&&e.copy?JSON.parse(JSON.stringify(n)):n}const DY={interior:(n,e)=>n!==e,exterior:(n,e)=>n===e};function h8(n,e){let t,i,s,r;return n=SN(n,e),e&&e.feature?(t=pK,s=e.feature):e&&e.mesh?(t=_K,s=e.mesh,r=DY[e.filter]):fi("Missing TopoJSON feature or mesh parameter."),i=(i=n.objects[s])?t(n,i,r):fi("Invalid TopoJSON object: "+s),i&&i.features||[i]}h8.responseType="json";const GS={dsv:yN,csv:iO(","),tsv:iO("	"),json:SN,topojson:h8};function u8(n,e){return arguments.length>1?(GS[n]=e,this):dh(GS,n)?GS[n]:null}function xN(n,e,t,i){e=e||{};const s=u8(e.type||"json");return s||fi("Unknown data format type: "+e.type),n=s(n,e),e.parse&&LY(n,e.parse,t,i),dh(n,"columns")&&delete n.columns,n}function LY(n,e,t,i){if(!n.length)return;const s=rY();t=t||s.timeParse,i=i||s.utcParse;let r=n.columns||Object.keys(n[0]),o,a,l,c,h,u;e==="auto"&&(e=yY(n,r)),r=Object.keys(e);const d=r.map(f=>{const g=e[f];let p,_;if(g&&(g.startsWith("date:")||g.startsWith("utc:")))return p=g.split(/:(.+)?/,2),_=p[1],(_[0]==="'"&&_[_.length-1]==="'"||_[0]==='"'&&_[_.length-1]==='"')&&(_=_.slice(1,-1)),(p[0]==="utc"?i:t)(_);if(!tO[g])throw Error("Illegal format pattern: "+f+":"+g);return tO[g]});for(l=0,h=n.length,u=r.length;l<h;++l)for(o=n[l],c=0;c<u;++c)a=r[c],o[a]=d[c](o[a])}const Ny=cY(typeof fetch!="undefined"&&fetch,null),nO=1;function DN(){let n=[0,1],e=[0,1],t=1,i=1,s=0,r=0,o=.5,a=0;const c=h=>(h+o-n[0])/t*i+e[0];return c.invert=h=>(h-e[0])/i*t+n[0]-o,c.domain=function(h){if(arguments.length){if(n=yK(h),t=n[1]-n[0],t<nO){t=nO;const u=(n[0]+n[1])/2;n[0]=u-t/2,n[1]=u+t/2}return c}else return n},c.range=function(h){return arguments.length?(e=[...h],i=e[1]-e[0],c):e},c.numberingOffset=function(h){return arguments.length?(a=h,c):a},c.padding=function(h){return arguments.length?(r=h,s=Math.min(1,h),c):s},c.paddingInner=function(h){return arguments.length?(s=Math.min(1,h),c):s},c.paddingOuter=function(h){return arguments.length?(r=h,c):r},c.align=function(h){return arguments.length?(o=Math.max(0,Math.min(1,h)),c):o},c.step=()=>i/t,c.bandwidth=()=>c.step(),c.ticks=h=>{const u=c.align(),d=c.numberingOffset();return bw(n[0]-u+d,n[1]-u+d,Math.min(h,Math.ceil(t))).filter(Number.isInteger).map(f=>f-a)},c.tickFormat=(h,u)=>{if(u)throw new Error("Index scale's tickFormat does not support a specifier!");const f=Zh(n[0],n[1],Math.min(h,Math.ceil(t)))<1e5?wn(","):wn(".3s");return g=>f(g+a)},c.copy=()=>DN().domain(n).range(e).paddingInner(s).paddingOuter(r).numberingOffset(a),c}function kY(){const n=DN().numberingOffset(1);let e;n.genome=function(i){return arguments.length?(e=i,n):e},n.ticks=i=>{if(!e)return[];const s=n.domain(),r=n.numberingOffset(),[o,a]=[Math.max(s[0],0),Math.min(s[1],e.totalSize-1)].map(h=>e.toChromosome(h)),l=Math.max(1,Zh(s[0],s[1],i)),c=[];for(let h=o.index;h<=a.index;h++){const u=e.chromosomes[h],d=Math.max(u.continuousStart+l,s[0]-(s[0]-u.continuousStart)%l),f=Math.min(u.continuousEnd-l/4,s[1]+1);for(let g=d;g<=f;g+=l){const p=g-r;p>=s[0]&&p<s[1]&&c.push(p)}}return c},n.tickFormat=(i,s)=>{if(!e)return;if(s)throw new Error("Locus scale's tickFormat does not support a specifier!");const r=n.domain(),o=r[1]-r[0],a=n.numberingOffset(),c=Zh(r[0],r[1],Math.min(i,Math.ceil(o)))<1e6?wn(","):wn(".3s"),h=u=>u-e.toChromosome(u).continuousStart;return u=>c(h(u)+a)};const t=n.copy;return n.copy=()=>t().genome(e),n}function EY(n){return n.type=="locus"}function da(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function Dc(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const RL=Symbol("implicit");function LN(){var n=new Yh,e=[],t=[],i=RL;function s(r){let o=n.get(r);if(o===void 0){if(i!==RL)return i;n.set(r,o=e.push(r)-1)}return t[o%t.length]}return s.domain=function(r){if(!arguments.length)return e.slice();e=[],n=new Yh;for(const o of r)n.has(o)||n.set(o,e.push(o)-1);return s},s.range=function(r){return arguments.length?(t=Array.from(r),s):t.slice()},s.unknown=function(r){return arguments.length?(i=r,s):i},s.copy=function(){return LN(e,t).unknown(i)},da.apply(s,arguments),s}function pg(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function u0(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function Lc(){}var Qh=.7,If=1/Qh,Xd="\\s*([+-]?\\d+)\\s*",jm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",IY=/^#([0-9a-f]{3,8})$/,TY=new RegExp(`^rgb\\(${Xd},${Xd},${Xd}\\)$`),NY=new RegExp(`^rgb\\(${jo},${jo},${jo}\\)$`),AY=new RegExp(`^rgba\\(${Xd},${Xd},${Xd},${jm}\\)$`),MY=new RegExp(`^rgba\\(${jo},${jo},${jo},${jm}\\)$`),RY=new RegExp(`^hsl\\(${jm},${jo},${jo}\\)$`),OY=new RegExp(`^hsla\\(${jm},${jo},${jo},${jm}\\)$`),sO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pg(Lc,Jh,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:rO,formatHex:rO,formatHex8:FY,formatHsl:PY,formatRgb:oO,toString:oO});function rO(){return this.rgb().formatHex()}function FY(){return this.rgb().formatHex8()}function PY(){return d8(this).formatHsl()}function oO(){return this.rgb().formatRgb()}function Jh(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=IY.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?aO(e):t===3?new on(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?fb(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?fb(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=TY.exec(n))?new on(e[1],e[2],e[3],1):(e=NY.exec(n))?new on(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=AY.exec(n))?fb(e[1],e[2],e[3],e[4]):(e=MY.exec(n))?fb(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=RY.exec(n))?hO(e[1],e[2]/100,e[3]/100,1):(e=OY.exec(n))?hO(e[1],e[2]/100,e[3]/100,e[4]):sO.hasOwnProperty(n)?aO(sO[n]):n==="transparent"?new on(NaN,NaN,NaN,0):null}function aO(n){return new on(n>>16&255,n>>8&255,n&255,1)}function fb(n,e,t,i){return i<=0&&(n=e=t=NaN),new on(n,e,t,i)}function kN(n){return n instanceof Lc||(n=Jh(n)),n?(n=n.rgb(),new on(n.r,n.g,n.b,n.opacity)):new on}function yw(n,e,t,i){return arguments.length===1?kN(n):new on(n,e,t,i==null?1:i)}function on(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}pg(on,yw,u0(Lc,{brighter(n){return n=n==null?If:Math.pow(If,n),new on(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Qh:Math.pow(Qh,n),new on(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new on(Th(this.r),Th(this.g),Th(this.b),Sw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lO,formatHex:lO,formatHex8:BY,formatRgb:cO,toString:cO}));function lO(){return`#${fh(this.r)}${fh(this.g)}${fh(this.b)}`}function BY(){return`#${fh(this.r)}${fh(this.g)}${fh(this.b)}${fh((isNaN(this.opacity)?1:this.opacity)*255)}`}function cO(){const n=Sw(this.opacity);return`${n===1?"rgb(":"rgba("}${Th(this.r)}, ${Th(this.g)}, ${Th(this.b)}${n===1?")":`, ${n})`}`}function Sw(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Th(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function fh(n){return n=Th(n),(n<16?"0":"")+n.toString(16)}function hO(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Wr(n,e,t,i)}function d8(n){if(n instanceof Wr)return new Wr(n.h,n.s,n.l,n.opacity);if(n instanceof Lc||(n=Jh(n)),!n)return new Wr;if(n instanceof Wr)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,s=Math.min(e,t,i),r=Math.max(e,t,i),o=NaN,a=r-s,l=(r+s)/2;return a?(e===r?o=(t-i)/a+(t<i)*6:t===r?o=(i-e)/a+2:o=(e-t)/a+4,a/=l<.5?r+s:2-r-s,o*=60):a=l>0&&l<1?0:o,new Wr(o,a,l,n.opacity)}function OL(n,e,t,i){return arguments.length===1?d8(n):new Wr(n,e,t,i==null?1:i)}function Wr(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}pg(Wr,OL,u0(Lc,{brighter(n){return n=n==null?If:Math.pow(If,n),new Wr(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Qh:Math.pow(Qh,n),new Wr(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,s=2*t-i;return new on(YS(n>=240?n-240:n+120,s,i),YS(n,s,i),YS(n<120?n+240:n-120,s,i),this.opacity)},clamp(){return new Wr(uO(this.h),gb(this.s),gb(this.l),Sw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Sw(this.opacity);return`${n===1?"hsl(":"hsla("}${uO(this.h)}, ${gb(this.s)*100}%, ${gb(this.l)*100}%${n===1?")":`, ${n})`}`}}));function uO(n){return n=(n||0)%360,n<0?n+360:n}function gb(n){return Math.max(0,Math.min(1,n||0))}function YS(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const f8=Math.PI/180,g8=180/Math.PI,xw=18,p8=.96422,m8=1,_8=.82521,b8=4/29,Qd=6/29,v8=3*Qd*Qd,VY=Qd*Qd*Qd;function w8(n){if(n instanceof qo)return new qo(n.l,n.a,n.b,n.opacity);if(n instanceof qa)return C8(n);n instanceof on||(n=kN(n));var e=JS(n.r),t=JS(n.g),i=JS(n.b),s=ZS((.2225045*e+.7168786*t+.0606169*i)/m8),r,o;return e===t&&t===i?r=o=s:(r=ZS((.4360747*e+.3850649*t+.1430804*i)/p8),o=ZS((.0139322*e+.0971045*t+.7141733*i)/_8)),new qo(116*s-16,500*(r-s),200*(s-o),n.opacity)}function FL(n,e,t,i){return arguments.length===1?w8(n):new qo(n,e,t,i==null?1:i)}function qo(n,e,t,i){this.l=+n,this.a=+e,this.b=+t,this.opacity=+i}pg(qo,FL,u0(Lc,{brighter(n){return new qo(this.l+xw*(n==null?1:n),this.a,this.b,this.opacity)},darker(n){return new qo(this.l-xw*(n==null?1:n),this.a,this.b,this.opacity)},rgb(){var n=(this.l+16)/116,e=isNaN(this.a)?n:n+this.a/500,t=isNaN(this.b)?n:n-this.b/200;return e=p8*XS(e),n=m8*XS(n),t=_8*XS(t),new on(QS(3.1338561*e-1.6168667*n-.4906146*t),QS(-.9787684*e+1.9161415*n+.033454*t),QS(.0719453*e-.2289914*n+1.4052427*t),this.opacity)}}));function ZS(n){return n>VY?Math.pow(n,1/3):n/v8+b8}function XS(n){return n>Qd?n*n*n:v8*(n-b8)}function QS(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function JS(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function WY(n){if(n instanceof qa)return new qa(n.h,n.c,n.l,n.opacity);if(n instanceof qo||(n=w8(n)),n.a===0&&n.b===0)return new qa(NaN,0<n.l&&n.l<100?0:NaN,n.l,n.opacity);var e=Math.atan2(n.b,n.a)*g8;return new qa(e<0?e+360:e,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity)}function PL(n,e,t,i){return arguments.length===1?WY(n):new qa(n,e,t,i==null?1:i)}function qa(n,e,t,i){this.h=+n,this.c=+e,this.l=+t,this.opacity=+i}function C8(n){if(isNaN(n.h))return new qo(n.l,0,0,n.opacity);var e=n.h*f8;return new qo(n.l,Math.cos(e)*n.c,Math.sin(e)*n.c,n.opacity)}pg(qa,PL,u0(Lc,{brighter(n){return new qa(this.h,this.c,this.l+xw*(n==null?1:n),this.opacity)},darker(n){return new qa(this.h,this.c,this.l-xw*(n==null?1:n),this.opacity)},rgb(){return C8(this).rgb()}}));var y8=-.14861,EN=1.78277,IN=-.29227,Ay=-.90649,qm=1.97294,dO=qm*Ay,fO=qm*EN,gO=EN*IN-Ay*y8;function zY(n){if(n instanceof Nh)return new Nh(n.h,n.s,n.l,n.opacity);n instanceof on||(n=kN(n));var e=n.r/255,t=n.g/255,i=n.b/255,s=(gO*i+dO*e-fO*t)/(gO+dO-fO),r=i-s,o=(qm*(t-s)-IN*r)/Ay,a=Math.sqrt(o*o+r*r)/(qm*s*(1-s)),l=a?Math.atan2(o,r)*g8-120:NaN;return new Nh(l<0?l+360:l,a,s,n.opacity)}function BL(n,e,t,i){return arguments.length===1?zY(n):new Nh(n,e,t,i==null?1:i)}function Nh(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}pg(Nh,BL,u0(Lc,{brighter(n){return n=n==null?If:Math.pow(If,n),new Nh(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Qh:Math.pow(Qh,n),new Nh(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=isNaN(this.h)?0:(this.h+120)*f8,e=+this.l,t=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(n),s=Math.sin(n);return new on(255*(e+t*(y8*i+EN*s)),255*(e+t*(IN*i+Ay*s)),255*(e+t*(qm*i)),this.opacity)}}));function S8(n,e,t,i,s){var r=n*n,o=r*n;return((1-3*n+3*r-o)*e+(4-6*r+3*o)*t+(1+3*n+3*r-3*o)*i+o*s)/6}function x8(n){var e=n.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),s=n[i],r=n[i+1],o=i>0?n[i-1]:2*s-r,a=i<e-1?n[i+2]:2*r-s;return S8((t-i/e)*e,o,s,r,a)}}function D8(n){var e=n.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*e),s=n[(i+e-1)%e],r=n[i%e],o=n[(i+1)%e],a=n[(i+2)%e];return S8((t-i/e)*e,s,r,o,a)}}var My=n=>()=>n;function L8(n,e){return function(t){return n+t*e}}function HY(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function Ry(n,e){var t=e-n;return t?L8(n,t>180||t<-180?t-360*Math.round(t/360):t):My(isNaN(n)?e:n)}function $Y(n){return(n=+n)==1?an:function(e,t){return t-e?HY(e,t,n):My(isNaN(e)?t:e)}}function an(n,e){var t=e-n;return t?L8(n,t):My(isNaN(n)?e:n)}var VL=function n(e){var t=$Y(e);function i(s,r){var o=t((s=yw(s)).r,(r=yw(r)).r),a=t(s.g,r.g),l=t(s.b,r.b),c=an(s.opacity,r.opacity);return function(h){return s.r=o(h),s.g=a(h),s.b=l(h),s.opacity=c(h),s+""}}return i.gamma=n,i}(1);function k8(n){return function(e){var t=e.length,i=new Array(t),s=new Array(t),r=new Array(t),o,a;for(o=0;o<t;++o)a=yw(e[o]),i[o]=a.r||0,s[o]=a.g||0,r[o]=a.b||0;return i=n(i),s=n(s),r=n(r),a.opacity=1,function(l){return a.r=i(l),a.g=s(l),a.b=r(l),a+""}}}var UY=k8(x8),jY=k8(D8);function TN(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,i=e.slice(),s;return function(r){for(s=0;s<t;++s)i[s]=n[s]*(1-r)+e[s]*r;return i}}function E8(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function qY(n,e){return(E8(e)?TN:I8)(n,e)}function I8(n,e){var t=e?e.length:0,i=n?Math.min(t,n.length):0,s=new Array(i),r=new Array(t),o;for(o=0;o<i;++o)s[o]=kc(n[o],e[o]);for(;o<t;++o)r[o]=e[o];return function(a){for(o=0;o<i;++o)r[o]=s[o](a);return r}}function T8(n,e){var t=new Date;return n=+n,e=+e,function(i){return t.setTime(n*(1-i)+e*i),t}}function Pr(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function N8(n,e){var t={},i={},s;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in n?t[s]=kc(n[s],e[s]):i[s]=e[s];return function(r){for(s in t)i[s]=t[s](r);return i}}var WL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ex=new RegExp(WL.source,"g");function KY(n){return function(){return n}}function GY(n){return function(e){return n(e)+""}}function A8(n,e){var t=WL.lastIndex=ex.lastIndex=0,i,s,r,o=-1,a=[],l=[];for(n=n+"",e=e+"";(i=WL.exec(n))&&(s=ex.exec(e));)(r=s.index)>t&&(r=e.slice(t,r),a[o]?a[o]+=r:a[++o]=r),(i=i[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:Pr(i,s)})),t=ex.lastIndex;return t<e.length&&(r=e.slice(t),a[o]?a[o]+=r:a[++o]=r),a.length<2?l[0]?GY(l[0].x):KY(e):(e=l.length,function(c){for(var h=0,u;h<e;++h)a[(u=l[h]).i]=u.x(c);return a.join("")})}function kc(n,e){var t=typeof e,i;return e==null||t==="boolean"?My(e):(t==="number"?Pr:t==="string"?(i=Jh(e))?(e=i,VL):A8:e instanceof Jh?VL:e instanceof Date?T8:E8(e)?TN:Array.isArray(e)?I8:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?N8:Pr)(n,e)}function YY(n){var e=n.length;return function(t){return n[Math.max(0,Math.min(e-1,Math.floor(t*e)))]}}function ZY(n,e){var t=Ry(+n,+e);return function(i){var s=t(i);return s-360*Math.floor(s/360)}}function d0(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}var pO=180/Math.PI,zL={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function M8(n,e,t,i,s,r){var o,a,l;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(l=n*t+e*i)&&(t-=n*l,i-=e*l),(a=Math.sqrt(t*t+i*i))&&(t/=a,i/=a,l/=a),n*i<e*t&&(n=-n,e=-e,l=-l,o=-o),{translateX:s,translateY:r,rotate:Math.atan2(e,n)*pO,skewX:Math.atan(l)*pO,scaleX:o,scaleY:a}}var pb;function XY(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?zL:M8(e.a,e.b,e.c,e.d,e.e,e.f)}function QY(n){return n==null||(pb||(pb=document.createElementNS("http://www.w3.org/2000/svg","g")),pb.setAttribute("transform",n),!(n=pb.transform.baseVal.consolidate()))?zL:(n=n.matrix,M8(n.a,n.b,n.c,n.d,n.e,n.f))}function R8(n,e,t,i){function s(c){return c.length?c.pop()+" ":""}function r(c,h,u,d,f,g){if(c!==u||h!==d){var p=f.push("translate(",null,e,null,t);g.push({i:p-4,x:Pr(c,u)},{i:p-2,x:Pr(h,d)})}else(u||d)&&f.push("translate("+u+e+d+t)}function o(c,h,u,d){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),d.push({i:u.push(s(u)+"rotate(",null,i)-2,x:Pr(c,h)})):h&&u.push(s(u)+"rotate("+h+i)}function a(c,h,u,d){c!==h?d.push({i:u.push(s(u)+"skewX(",null,i)-2,x:Pr(c,h)}):h&&u.push(s(u)+"skewX("+h+i)}function l(c,h,u,d,f,g){if(c!==u||h!==d){var p=f.push(s(f)+"scale(",null,",",null,")");g.push({i:p-4,x:Pr(c,u)},{i:p-2,x:Pr(h,d)})}else(u!==1||d!==1)&&f.push(s(f)+"scale("+u+","+d+")")}return function(c,h){var u=[],d=[];return c=n(c),h=n(h),r(c.translateX,c.translateY,h.translateX,h.translateY,u,d),o(c.rotate,h.rotate,u,d),a(c.skewX,h.skewX,u,d),l(c.scaleX,c.scaleY,h.scaleX,h.scaleY,u,d),c=h=null,function(f){for(var g=-1,p=d.length,_;++g<p;)u[(_=d[g]).i]=_.x(f);return u.join("")}}}var JY=R8(XY,"px, ","px)","deg)"),eZ=R8(QY,", ",")",")"),tZ=1e-12;function mO(n){return((n=Math.exp(n))+1/n)/2}function iZ(n){return((n=Math.exp(n))-1/n)/2}function nZ(n){return((n=Math.exp(2*n))-1)/(n+1)}var O8=function n(e,t,i){function s(r,o){var a=r[0],l=r[1],c=r[2],h=o[0],u=o[1],d=o[2],f=h-a,g=u-l,p=f*f+g*g,_,v;if(p<tZ)v=Math.log(d/c)/e,_=function(S){return[a+S*f,l+S*g,c*Math.exp(e*S*v)]};else{var b=Math.sqrt(p),w=(d*d-c*c+i*p)/(2*c*t*b),C=(d*d-c*c-i*p)/(2*d*t*b),y=Math.log(Math.sqrt(w*w+1)-w),D=Math.log(Math.sqrt(C*C+1)-C);v=(D-y)/e,_=function(S){var x=S*v,k=mO(y),F=c/(t*b)*(k*nZ(e*x+y)-iZ(y));return[a+F*f,l+F*g,c*k/mO(e*x+y)]}}return _.duration=v*1e3*e/Math.SQRT2,_}return s.rho=function(r){var o=Math.max(.001,+r),a=o*o,l=a*a;return n(o,a,l)},s}(Math.SQRT2,2,4);function F8(n){return function(e,t){var i=n((e=OL(e)).h,(t=OL(t)).h),s=an(e.s,t.s),r=an(e.l,t.l),o=an(e.opacity,t.opacity);return function(a){return e.h=i(a),e.s=s(a),e.l=r(a),e.opacity=o(a),e+""}}}var sZ=F8(Ry),rZ=F8(an);function oZ(n,e){var t=an((n=FL(n)).l,(e=FL(e)).l),i=an(n.a,e.a),s=an(n.b,e.b),r=an(n.opacity,e.opacity);return function(o){return n.l=t(o),n.a=i(o),n.b=s(o),n.opacity=r(o),n+""}}function P8(n){return function(e,t){var i=n((e=PL(e)).h,(t=PL(t)).h),s=an(e.c,t.c),r=an(e.l,t.l),o=an(e.opacity,t.opacity);return function(a){return e.h=i(a),e.c=s(a),e.l=r(a),e.opacity=o(a),e+""}}}var aZ=P8(Ry),lZ=P8(an);function B8(n){return function e(t){t=+t;function i(s,r){var o=n((s=BL(s)).h,(r=BL(r)).h),a=an(s.s,r.s),l=an(s.l,r.l),c=an(s.opacity,r.opacity);return function(h){return s.h=o(h),s.s=a(h),s.l=l(Math.pow(h,t)),s.opacity=c(h),s+""}}return i.gamma=e,i}(1)}var cZ=B8(Ry),hZ=B8(an);function NN(n,e){e===void 0&&(e=n,n=kc);for(var t=0,i=e.length-1,s=e[0],r=new Array(i<0?0:i);t<i;)r[t]=n(s,s=e[++t]);return function(o){var a=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return r[a](o-a)}}function uZ(n,e){for(var t=new Array(e),i=0;i<e;++i)t[i]=n(i/(e-1));return t}var dZ=Object.freeze(Object.defineProperty({__proto__:null,interpolate:kc,interpolateArray:qY,interpolateBasis:x8,interpolateBasisClosed:D8,interpolateDate:T8,interpolateDiscrete:YY,interpolateHue:ZY,interpolateNumber:Pr,interpolateNumberArray:TN,interpolateObject:N8,interpolateRound:d0,interpolateString:A8,interpolateTransformCss:JY,interpolateTransformSvg:eZ,interpolateZoom:O8,interpolateRgb:VL,interpolateRgbBasis:UY,interpolateRgbBasisClosed:jY,interpolateHsl:sZ,interpolateHslLong:rZ,interpolateLab:oZ,interpolateHcl:aZ,interpolateHclLong:lZ,interpolateCubehelix:cZ,interpolateCubehelixLong:hZ,piecewise:NN,quantize:uZ},Symbol.toStringTag,{value:"Module"}));function fZ(n){return function(){return n}}function HL(n){return+n}var _O=[0,1];function _s(n){return n}function $L(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:fZ(isNaN(e)?NaN:.5)}function gZ(n,e){var t;return n>e&&(t=n,n=e,e=t),function(i){return Math.max(n,Math.min(e,i))}}function pZ(n,e,t){var i=n[0],s=n[1],r=e[0],o=e[1];return s<i?(i=$L(s,i),r=t(o,r)):(i=$L(i,s),r=t(r,o)),function(a){return r(i(a))}}function mZ(n,e,t){var i=Math.min(n.length,e.length)-1,s=new Array(i),r=new Array(i),o=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++o<i;)s[o]=$L(n[o],n[o+1]),r[o]=t(e[o],e[o+1]);return function(a){var l=gg(n,a,1,i)-1;return r[l](s[l](a))}}function f0(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function Oy(){var n=_O,e=_O,t=kc,i,s,r,o=_s,a,l,c;function h(){var d=Math.min(n.length,e.length);return o!==_s&&(o=gZ(n[0],n[d-1])),a=d>2?mZ:pZ,l=c=null,u}function u(d){return d==null||isNaN(d=+d)?r:(l||(l=a(n.map(i),e,t)))(i(o(d)))}return u.invert=function(d){return o(s((c||(c=a(e,n.map(i),Pr)))(d)))},u.domain=function(d){return arguments.length?(n=Array.from(d,HL),h()):n.slice()},u.range=function(d){return arguments.length?(e=Array.from(d),h()):e.slice()},u.rangeRound=function(d){return e=Array.from(d),t=d0,h()},u.clamp=function(d){return arguments.length?(o=d?!0:_s,h()):o!==_s},u.interpolate=function(d){return arguments.length?(t=d,h()):t},u.unknown=function(d){return arguments.length?(r=d,u):r},function(d,f){return i=d,s=f,h()}}function V8(){return Oy()(_s,_s)}function W8(n,e,t,i){var s=Zh(n,e,t),r;switch(i=nc(i==null?",f":i),i.type){case"s":{var o=Math.max(Math.abs(n),Math.abs(e));return i.precision==null&&!isNaN(r=ZB(s,o))&&(i.precision=r),dN(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(r=XB(s,Math.max(Math.abs(n),Math.abs(e))))&&(i.precision=r-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(r=YB(s))&&(i.precision=r-(i.type==="%")*2);break}}return wn(i)}function Iu(n){var e=n.domain;return n.ticks=function(t){var i=e();return bw(i[0],i[i.length-1],t==null?10:t)},n.tickFormat=function(t,i){var s=e();return W8(s[0],s[s.length-1],t==null?10:t,i)},n.nice=function(t){t==null&&(t=10);var i=e(),s=0,r=i.length-1,o=i[s],a=i[r],l,c,h=10;for(a<o&&(c=o,o=a,a=c,c=s,s=r,r=c);h-- >0;){if(c=qB(o,a,t),c===l)return i[s]=o,i[r]=a,e(i);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return n},n}function z8(){var n=V8();return n.copy=function(){return f0(n,z8())},da.apply(n,arguments),Iu(n)}function H8(n){var e;function t(i){return i==null||isNaN(i=+i)?e:i}return t.invert=t,t.domain=t.range=function(i){return arguments.length?(n=Array.from(i,HL),t):n.slice()},t.unknown=function(i){return arguments.length?(e=i,t):e},t.copy=function(){return H8(n).unknown(e)},n=arguments.length?Array.from(n,HL):[0,1],Iu(t)}function $8(n,e){n=n.slice();var t=0,i=n.length-1,s=n[t],r=n[i],o;return r<s&&(o=t,t=i,i=o,o=s,s=r,r=o),n[t]=e.floor(s),n[i]=e.ceil(r),n}function bO(n){return Math.log(n)}function vO(n){return Math.exp(n)}function _Z(n){return-Math.log(-n)}function bZ(n){return-Math.exp(-n)}function vZ(n){return isFinite(n)?+("1e"+n):n<0?0:n}function wZ(n){return n===10?vZ:n===Math.E?Math.exp:e=>Math.pow(n,e)}function CZ(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function wO(n){return(e,t)=>-n(-e,t)}function AN(n){const e=n(bO,vO),t=e.domain;let i=10,s,r;function o(){return s=CZ(i),r=wZ(i),t()[0]<0?(s=wO(s),r=wO(r),n(_Z,bZ)):n(bO,vO),e}return e.base=function(a){return arguments.length?(i=+a,o()):i},e.domain=function(a){return arguments.length?(t(a),o()):t()},e.ticks=a=>{const l=t();let c=l[0],h=l[l.length-1];const u=h<c;u&&([c,h]=[h,c]);let d=s(c),f=s(h),g,p;const _=a==null?10:+a;let v=[];if(!(i%1)&&f-d<_){if(d=Math.floor(d),f=Math.ceil(f),c>0){for(;d<=f;++d)for(g=1;g<i;++g)if(p=d<0?g/r(-d):g*r(d),!(p<c)){if(p>h)break;v.push(p)}}else for(;d<=f;++d)for(g=i-1;g>=1;--g)if(p=d>0?g/r(-d):g*r(d),!(p<c)){if(p>h)break;v.push(p)}v.length*2<_&&(v=bw(c,h,_))}else v=bw(d,f,Math.min(f-d,_)).map(r);return u?v.reverse():v},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=nc(l)).precision==null&&(l.trim=!0),l=wn(l)),a===1/0)return l;const c=Math.max(1,i*a/e.ticks().length);return h=>{let u=h/r(Math.round(s(h)));return u*i<i-.5&&(u*=i),u<=c?l(h):""}},e.nice=()=>t($8(t(),{floor:a=>r(Math.floor(s(a))),ceil:a=>r(Math.ceil(s(a)))})),e}function MN(){const n=AN(Oy()).domain([1,10]);return n.copy=()=>f0(n,MN()).base(n.base()),da.apply(n,arguments),n}function CO(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function yO(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function RN(n){var e=1,t=n(CO(e),yO(e));return t.constant=function(i){return arguments.length?n(CO(e=+i),yO(e)):e},Iu(t)}function U8(){var n=RN(Oy());return n.copy=function(){return f0(n,U8()).constant(n.constant())},da.apply(n,arguments)}function SO(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function yZ(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function SZ(n){return n<0?-n*n:n*n}function ON(n){var e=n(_s,_s),t=1;function i(){return t===1?n(_s,_s):t===.5?n(yZ,SZ):n(SO(t),SO(1/t))}return e.exponent=function(s){return arguments.length?(t=+s,i()):t},Iu(e)}function FN(){var n=ON(Oy());return n.copy=function(){return f0(n,FN()).exponent(n.exponent())},da.apply(n,arguments),n}function xZ(){return FN.apply(null,arguments).exponent(.5)}function j8(){var n=[],e=[],t=[],i;function s(){var o=0,a=Math.max(1,e.length);for(t=new Array(a-1);++o<a;)t[o-1]=KB(n,o/a);return r}function r(o){return o==null||isNaN(o=+o)?i:e[gg(t,o)]}return r.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?t[a-1]:n[0],a<t.length?t[a]:n[n.length-1]]},r.domain=function(o){if(!arguments.length)return n.slice();n=[];for(let a of o)a!=null&&!isNaN(a=+a)&&n.push(a);return n.sort(Up),s()},r.range=function(o){return arguments.length?(e=Array.from(o),s()):e.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.quantiles=function(){return t.slice()},r.copy=function(){return j8().domain(n).range(e).unknown(i)},da.apply(r,arguments)}function q8(){var n=0,e=1,t=1,i=[.5],s=[0,1],r;function o(l){return l!=null&&l<=l?s[gg(i,l,0,t)]:r}function a(){var l=-1;for(i=new Array(t);++l<t;)i[l]=((l+1)*e-(l-t)*n)/(t+1);return o}return o.domain=function(l){return arguments.length?([n,e]=l,n=+n,e=+e,a()):[n,e]},o.range=function(l){return arguments.length?(t=(s=Array.from(l)).length-1,a()):s.slice()},o.invertExtent=function(l){var c=s.indexOf(l);return c<0?[NaN,NaN]:c<1?[n,i[0]]:c>=t?[i[t-1],e]:[i[c-1],i[c]]},o.unknown=function(l){return arguments.length&&(r=l),o},o.thresholds=function(){return i.slice()},o.copy=function(){return q8().domain([n,e]).range(s).unknown(r)},da.apply(Iu(o),arguments)}function K8(){var n=[.5],e=[0,1],t,i=1;function s(r){return r!=null&&r<=r?e[gg(n,r,0,i)]:t}return s.domain=function(r){return arguments.length?(n=Array.from(r),i=Math.min(n.length,e.length-1),s):n.slice()},s.range=function(r){return arguments.length?(e=Array.from(r),i=Math.min(n.length,e.length-1),s):e.slice()},s.invertExtent=function(r){var o=e.indexOf(r);return[n[o-1],n[o]]},s.unknown=function(r){return arguments.length?(t=r,s):t},s.copy=function(){return K8().domain(n).range(e).unknown(t)},da.apply(s,arguments)}function DZ(n){return new Date(n)}function LZ(n){return n instanceof Date?+n:+new Date(+n)}function PN(n,e,t,i,s,r,o,a,l,c){var h=V8(),u=h.invert,d=h.domain,f=c(".%L"),g=c(":%S"),p=c("%I:%M"),_=c("%I %p"),v=c("%a %d"),b=c("%b %d"),w=c("%B"),C=c("%Y");function y(D){return(l(D)<D?f:a(D)<D?g:o(D)<D?p:r(D)<D?_:i(D)<D?s(D)<D?v:b:t(D)<D?w:C)(D)}return h.invert=function(D){return new Date(u(D))},h.domain=function(D){return arguments.length?d(Array.from(D,LZ)):d().map(DZ)},h.ticks=function(D){var S=d();return n(S[0],S[S.length-1],D==null?10:D)},h.tickFormat=function(D,S){return S==null?y:c(S)},h.nice=function(D){var S=d();return(!D||typeof D.range!="function")&&(D=e(S[0],S[S.length-1],D==null?10:D)),D?d($8(S,D)):h},h.copy=function(){return f0(h,PN(n,e,t,i,s,r,o,a,l,c))},h}function kZ(){return da.apply(PN(qK,KK,sc,ww,ky,Eh,mN,pN,Vl,wN).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function EZ(){return da.apply(PN(UK,jK,rc,Cw,Ey,Ih,bN,_N,Vl,CN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Fy(){var n=0,e=1,t,i,s,r,o=_s,a=!1,l;function c(u){return u==null||isNaN(u=+u)?l:o(s===0?.5:(u=(r(u)-t)*s,a?Math.max(0,Math.min(1,u)):u))}c.domain=function(u){return arguments.length?([n,e]=u,t=r(n=+n),i=r(e=+e),s=t===i?0:1/(i-t),c):[n,e]},c.clamp=function(u){return arguments.length?(a=!!u,c):a},c.interpolator=function(u){return arguments.length?(o=u,c):o};function h(u){return function(d){var f,g;return arguments.length?([f,g]=d,o=u(f,g),c):[o(0),o(1)]}}return c.range=h(kc),c.rangeRound=h(d0),c.unknown=function(u){return arguments.length?(l=u,c):l},function(u){return r=u,t=u(n),i=u(e),s=t===i?0:1/(i-t),c}}function Ec(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function BN(){var n=Iu(Fy()(_s));return n.copy=function(){return Ec(n,BN())},Dc.apply(n,arguments)}function G8(){var n=AN(Fy()).domain([1,10]);return n.copy=function(){return Ec(n,G8()).base(n.base())},Dc.apply(n,arguments)}function Y8(){var n=RN(Fy());return n.copy=function(){return Ec(n,Y8()).constant(n.constant())},Dc.apply(n,arguments)}function VN(){var n=ON(Fy());return n.copy=function(){return Ec(n,VN()).exponent(n.exponent())},Dc.apply(n,arguments)}function IZ(){return VN.apply(null,arguments).exponent(.5)}function Py(){var n=0,e=.5,t=1,i=1,s,r,o,a,l,c=_s,h,u=!1,d;function f(p){return isNaN(p=+p)?d:(p=.5+((p=+h(p))-r)*(i*p<i*r?a:l),c(u?Math.max(0,Math.min(1,p)):p))}f.domain=function(p){return arguments.length?([n,e,t]=p,s=h(n=+n),r=h(e=+e),o=h(t=+t),a=s===r?0:.5/(r-s),l=r===o?0:.5/(o-r),i=r<s?-1:1,f):[n,e,t]},f.clamp=function(p){return arguments.length?(u=!!p,f):u},f.interpolator=function(p){return arguments.length?(c=p,f):c};function g(p){return function(_){var v,b,w;return arguments.length?([v,b,w]=_,c=NN(p,[v,b,w]),f):[c(0),c(.5),c(1)]}}return f.range=g(kc),f.rangeRound=g(d0),f.unknown=function(p){return arguments.length?(d=p,f):d},function(p){return h=p,s=p(n),r=p(e),o=p(t),a=s===r?0:.5/(r-s),l=r===o?0:.5/(o-r),i=r<s?-1:1,f}}function Z8(){var n=Iu(Py()(_s));return n.copy=function(){return Ec(n,Z8())},Dc.apply(n,arguments)}function X8(){var n=AN(Py()).domain([.1,1,10]);return n.copy=function(){return Ec(n,X8()).base(n.base())},Dc.apply(n,arguments)}function Q8(){var n=RN(Py());return n.copy=function(){return Ec(n,Q8()).constant(n.constant())},Dc.apply(n,arguments)}function WN(){var n=ON(Py());return n.copy=function(){return Ec(n,WN()).exponent(n.exponent())},Dc.apply(n,arguments)}function TZ(){return WN.apply(null,arguments).exponent(.5)}function zN(n,e,t){const i=n-e+t*2;return n?i>0?i:1:0}const NZ="identity",Tf="linear",oc="log",g0="pow",p0="sqrt",By="symlog",J8="time",e6="utc",Ko="sequential",mg="diverging",UL="quantile",t6="quantize",i6="threshold",HN="ordinal",jL="point",n6="band",$N="bin-ordinal",Ji="continuous",m0="discrete",_0="discretizing",Lr="interpolating",s6="temporal";function AZ(n){return function(e){let t=e[0],i=e[1],s;return i<t&&(s=t,t=i,i=s),[n.invert(t),n.invert(i)]}}function MZ(n){return function(e){const t=n.range();let i=e[0],s=e[1],r=-1,o,a,l,c;for(s<i&&(a=i,i=s,s=a),l=0,c=t.length;l<c;++l)t[l]>=i&&t[l]<=s&&(r<0&&(r=l),o=l);if(!(r<0))return i=n.invertExtent(t[r]),s=n.invertExtent(t[o]),[i[0]===void 0?i[1]:i[0],s[1]===void 0?s[0]:s[1]]}}function UN(){const n=LN().unknown(void 0),e=n.domain,t=n.range;let i=[0,1],s,r,o=!1,a=0,l=0,c=.5;delete n.unknown;function h(){const u=e().length,d=i[1]<i[0],f=i[1-d],g=zN(u,a,l);let p=i[d-0];s=(f-p)/(g||1),o&&(s=Math.floor(s)),p+=(f-p-s*(u-a))*c,r=s*(1-a),o&&(p=Math.round(p),r=Math.round(r));const _=Rm(u).map(v=>p+s*v);return t(d?_.reverse():_)}return n.domain=function(u){return arguments.length?(e(u),h()):e()},n.range=function(u){return arguments.length?(i=[+u[0],+u[1]],h()):i.slice()},n.rangeRound=function(u){return i=[+u[0],+u[1]],o=!0,h()},n.bandwidth=function(){return r},n.step=function(){return s},n.round=function(u){return arguments.length?(o=!!u,h()):o},n.padding=function(u){return arguments.length?(l=Math.max(0,Math.min(1,u)),a=l,h()):a},n.paddingInner=function(u){return arguments.length?(a=Math.max(0,Math.min(1,u)),h()):a},n.paddingOuter=function(u){return arguments.length?(l=Math.max(0,Math.min(1,u)),h()):l},n.align=function(u){return arguments.length?(c=Math.max(0,Math.min(1,u)),h()):c},n.invertRange=function(u){if(u[0]==null||u[1]==null)return;const d=i[1]<i[0],f=d?t().reverse():t(),g=f.length-1;let p=+u[0],_=+u[1],v,b,w;if(!(p!==p||_!==_)&&(_<p&&(w=p,p=_,_=w),!(_<f[0]||p>i[1-d])))return v=Math.max(0,DL(f,p)-1),b=p===_?v:DL(f,_)-1,p-f[v]>r+1e-10&&++v,d&&(w=v,v=g-b,b=g-w),v>b?void 0:e().slice(v,b+1)},n.invert=function(u){const d=n.invertRange([u,u]);return d&&d[0]},n.copy=function(){return UN().domain(e()).range(i).round(o).paddingInner(a).paddingOuter(l).align(c)},h()}function r6(n){const e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,n.copy=function(){return r6(e())},n}function RZ(){return r6(UN().paddingInner(1))}var OZ=Array.prototype.map;function FZ(n){return OZ.call(n,Mm)}const PZ=Array.prototype.slice;function o6(){let n=[],e=[];function t(i){return i==null||i!==i?void 0:e[(gg(n,i)-1)%e.length]}return t.domain=function(i){return arguments.length?(n=FZ(i),t):n.slice()},t.range=function(i){return arguments.length?(e=PZ.call(i),t):e.slice()},t.tickFormat=function(i,s){return W8(n[0],to(n),i==null?10:i,s)},t.copy=function(){return o6().domain(t.domain()).range(t.range())},t}const Dw={};function BZ(n,e,t){const i=function(){const r=e();return r.invertRange||(r.invertRange=r.invert?AZ(r):r.invertExtent?MZ(r):void 0),r.type=n,r};return i.metadata=_w(xL(t)),i}function Nt(n,e,t){return arguments.length>1?(Dw[n]=BZ(n,e,t),this):VZ(n)?Dw[n]:void 0}Nt(NZ,H8);Nt(Tf,z8,Ji);Nt(oc,MN,[Ji,oc]);Nt(g0,FN,Ji);Nt(p0,xZ,Ji);Nt(By,U8,Ji);Nt(J8,kZ,[Ji,s6]);Nt(e6,EZ,[Ji,s6]);Nt(Ko,BN,[Ji,Lr]);Nt("".concat(Ko,"-").concat(Tf),BN,[Ji,Lr]);Nt("".concat(Ko,"-").concat(oc),G8,[Ji,Lr,oc]);Nt("".concat(Ko,"-").concat(g0),VN,[Ji,Lr]);Nt("".concat(Ko,"-").concat(p0),IZ,[Ji,Lr]);Nt("".concat(Ko,"-").concat(By),Y8,[Ji,Lr]);Nt("".concat(mg,"-").concat(Tf),Z8,[Ji,Lr]);Nt("".concat(mg,"-").concat(oc),X8,[Ji,Lr,oc]);Nt("".concat(mg,"-").concat(g0),WN,[Ji,Lr]);Nt("".concat(mg,"-").concat(p0),TZ,[Ji,Lr]);Nt("".concat(mg,"-").concat(By),Q8,[Ji,Lr]);Nt(UL,j8,[_0,UL]);Nt(t6,q8,_0);Nt(i6,K8,_0);Nt($N,o6,[m0,_0]);Nt(HN,LN,m0);Nt(n6,UN,m0);Nt(jL,RZ,m0);function VZ(n){return dh(Dw,n)}function b0(n,e){const t=Dw[n];return t&&t.metadata[e]}function ur(n){return b0(n,Ji)}function eu(n){return b0(n,m0)}function Ld(n){return b0(n,_0)}function a6(n){return b0(n,oc)}function Vy(n){return b0(n,Lr)}function WZ(n,e){const t=e[0],i=to(e)-t;return function(s){return n(t+s*i)}}function Wy(n,e,t){return NN(l6(e||"rgb",t),n)}function zZ(n,e){const t=new Array(e),i=e+1;for(let s=0;s<e;)t[s]=n(++s/i);return t}function l6(n,e){const t=dZ[HZ(n)];return e!=null&&t&&t.gamma?t.gamma(e):t}function HZ(n){return"interpolate"+n.toLowerCase().split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join("")}const $Z={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},UZ={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function c6(n){const e=n.length/6|0,t=new Array(e);for(let i=0;i<e;)t[i]="#"+n.slice(i*6,++i*6);return t}function h6(n,e){for(const t in n)jN(t,e(n[t]))}const xO={};h6(UZ,c6);h6($Z,n=>Wy(c6(n)));function jN(n,e){return n=n&&n.toLowerCase(),arguments.length>1?(xO[n]=e,this):xO[n]}function jZ(n,e){var t=n.getBoundingClientRect();return[e.clientX-t.left-n.clientLeft,e.clientY-t.top-n.clientTop]}function u6(n,e){return n.length==e.length&&n.every((t,i)=>n[i]===e[i])}function qZ(n,e,t,i){return n.length==e.length&&n.every((s,r)=>t(n[r])===i(e[r]))}function Go(n){return Array.isArray(n)?n:typeof n!="undefined"?[n]:[]}function _g(n){return n[n.length-1]}class KZ{constructor(e){this.container=e,this.element=document.createElement("div"),this.element.className="tooltip",this._visible=!0,this.container.appendChild(this.element),this._previousTooltipDatum=void 0,this.enabledStack=[!0],this._penaltyUntil=0,this._lastCoords=void 0,this._previousMove=0,this.clear()}set visible(e){e!=this._visible&&(this.element.style.display=e?null:"none",this._visible=e)}get visible(){return this._visible}get enabled(){var e;return(e=_g(this.enabledStack))!=null?e:!0}pushEnabledState(e){this.enabledStack.push(e),e||(this.visible=!1)}popEnabledState(){this.enabledStack.pop()}handleMouseMove(e){this.mouseCoords=jZ(this.container,e);const t=performance.now();!this.visible&&!this._isPenalty()&&t-this._previousMove>500&&(this._penaltyUntil=t+70),this._lastCoords&&GZ(this.mouseCoords,this._lastCoords)>20&&(this._penaltyUntil=t+400),this._lastCoords=this.mouseCoords,this.visible&&this.updatePlacement(),this._previousMove=t}updatePlacement(){const[t,i]=this.mouseCoords;let s=t+20;s>this.container.clientWidth-this.element.offsetWidth&&(s=t-20-this.element.offsetWidth),this.element.style.left=s+"px",this.element.style.top=Math.min(i+20,this.container.clientHeight-this.element.offsetHeight)+"px"}setContent(e){if(!e||!this.enabled||this._isPenalty()){this.visible&&(cw("",this.element),this.visible=!1),this._previousTooltipDatum=void 0;return}cw(e,this.element),this.visible=!0,this.updatePlacement()}clear(){this._previousTooltipDatum=void 0,this.setContent(void 0)}updateWithDatum(e,t){e!==this._previousTooltipDatum&&(this._previousTooltipDatum=e,t||(t=i=>Promise.resolve(Ti` ${JSON.stringify(i)} `)),t(e).then(i=>this.setContent(i)).catch(i=>{if(i!=="debounced")throw i}))}_isPenalty(){return this._penaltyUntil&&this._penaltyUntil>performance.now()}}function GZ(n,e){let t=0;for(let i=0;i<n.length;i++)t+=(n[i]-e[i])**2;return Math.sqrt(t)}const YZ="RawCode",ZZ="Literal",XZ="Property",QZ="Identifier",JZ="ArrayExpression",eX="BinaryExpression",tX="CallExpression",iX="ConditionalExpression",nX="LogicalExpression",sX="MemberExpression",rX="ObjectExpression",oX="UnaryExpression";function fo(n){this.type=n}fo.prototype.visit=function(n){let e,t,i;if(n(this))return 1;for(e=aX(this),t=0,i=e.length;t<i;++t)if(e[t].visit(n))return 1};function aX(n){switch(n.type){case JZ:return n.elements;case eX:case nX:return[n.left,n.right];case tX:return[n.callee].concat(n.arguments);case iX:return[n.test,n.consequent,n.alternate];case sX:return[n.object,n.property];case rX:return n.properties;case XZ:return[n.key,n.value];case oX:return[n.argument];case QZ:case ZZ:case YZ:default:return[]}}var fa,ye,Q,Mn,Mt,zy=1,v0=2,tu=3,Ic=4,Hy=5,Tu=6,us=7,w0=8,lX=9;fa={};fa[zy]="Boolean";fa[v0]="<end>";fa[tu]="Identifier";fa[Ic]="Keyword";fa[Hy]="Null";fa[Tu]="Numeric";fa[us]="Punctuator";fa[w0]="String";fa[lX]="RegularExpression";var cX="ArrayExpression",hX="BinaryExpression",uX="CallExpression",dX="ConditionalExpression",d6="Identifier",fX="Literal",gX="LogicalExpression",pX="MemberExpression",mX="ObjectExpression",_X="Property",bX="UnaryExpression",ln="Unexpected token %0",vX="Unexpected number",wX="Unexpected string",CX="Unexpected identifier",yX="Unexpected reserved word",SX="Unexpected end of input",qL="Invalid regular expression",tx="Invalid regular expression: missing /",f6="Octal literals are not allowed in strict mode.",xX="Duplicate data property in object literal not allowed in strict mode",bn="ILLEGAL",Km="Disabled.",DX=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),LX=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function $y(n,e){if(!n)throw new Error("ASSERT: "+e)}function Ma(n){return n>=48&&n<=57}function qN(n){return"0123456789abcdefABCDEF".indexOf(n)>=0}function jp(n){return"01234567".indexOf(n)>=0}function kX(n){return n===32||n===9||n===11||n===12||n===160||n>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(n)>=0}function Gm(n){return n===10||n===13||n===8232||n===8233}function C0(n){return n===36||n===95||n>=65&&n<=90||n>=97&&n<=122||n===92||n>=128&&DX.test(String.fromCharCode(n))}function Lw(n){return n===36||n===95||n>=65&&n<=90||n>=97&&n<=122||n>=48&&n<=57||n===92||n>=128&&LX.test(String.fromCharCode(n))}const EX={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function g6(){for(;Q<Mn;){const n=ye.charCodeAt(Q);if(kX(n)||Gm(n))++Q;else break}}function KL(n){var e,t,i,s=0;for(t=n==="u"?4:2,e=0;e<t;++e)Q<Mn&&qN(ye[Q])?(i=ye[Q++],s=s*16+"0123456789abcdef".indexOf(i.toLowerCase())):St({},ln,bn);return String.fromCharCode(s)}function IX(){var n,e,t,i;for(n=ye[Q],e=0,n==="}"&&St({},ln,bn);Q<Mn&&(n=ye[Q++],!!qN(n));)e=e*16+"0123456789abcdef".indexOf(n.toLowerCase());return(e>1114111||n!=="}")&&St({},ln,bn),e<=65535?String.fromCharCode(e):(t=(e-65536>>10)+55296,i=(e-65536&1023)+56320,String.fromCharCode(t,i))}function p6(){var n,e;for(n=ye.charCodeAt(Q++),e=String.fromCharCode(n),n===92&&(ye.charCodeAt(Q)!==117&&St({},ln,bn),++Q,n=KL("u"),(!n||n==="\\"||!C0(n.charCodeAt(0)))&&St({},ln,bn),e=n);Q<Mn&&(n=ye.charCodeAt(Q),!!Lw(n));)++Q,e+=String.fromCharCode(n),n===92&&(e=e.substr(0,e.length-1),ye.charCodeAt(Q)!==117&&St({},ln,bn),++Q,n=KL("u"),(!n||n==="\\"||!Lw(n.charCodeAt(0)))&&St({},ln,bn),e+=n);return e}function TX(){var n,e;for(n=Q++;Q<Mn;){if(e=ye.charCodeAt(Q),e===92)return Q=n,p6();if(Lw(e))++Q;else break}return ye.slice(n,Q)}function NX(){var n,e,t;return n=Q,e=ye.charCodeAt(Q)===92?p6():TX(),e.length===1?t=tu:EX.hasOwnProperty(e)?t=Ic:e==="null"?t=Hy:e==="true"||e==="false"?t=zy:t=tu,{type:t,value:e,start:n,end:Q}}function ix(){var n=Q,e=ye.charCodeAt(Q),t,i=ye[Q],s,r,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Q,{type:us,value:String.fromCharCode(e),start:n,end:Q};default:if(t=ye.charCodeAt(Q+1),t===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Q+=2,{type:us,value:String.fromCharCode(e)+String.fromCharCode(t),start:n,end:Q};case 33:case 61:return Q+=2,ye.charCodeAt(Q)===61&&++Q,{type:us,value:ye.slice(n,Q),start:n,end:Q}}}if(o=ye.substr(Q,4),o===">>>=")return Q+=4,{type:us,value:o,start:n,end:Q};if(r=o.substr(0,3),r===">>>"||r==="<<="||r===">>=")return Q+=3,{type:us,value:r,start:n,end:Q};if(s=r.substr(0,2),i===s[1]&&"+-<>&|".indexOf(i)>=0||s==="=>")return Q+=2,{type:us,value:s,start:n,end:Q};if(s==="//"&&St({},ln,bn),"<>=!+-*%&|^/".indexOf(i)>=0)return++Q,{type:us,value:i,start:n,end:Q};St({},ln,bn)}function AX(n){let e="";for(;Q<Mn&&qN(ye[Q]);)e+=ye[Q++];return e.length===0&&St({},ln,bn),C0(ye.charCodeAt(Q))&&St({},ln,bn),{type:Tu,value:parseInt("0x"+e,16),start:n,end:Q}}function MX(n){let e="0"+ye[Q++];for(;Q<Mn&&jp(ye[Q]);)e+=ye[Q++];return(C0(ye.charCodeAt(Q))||Ma(ye.charCodeAt(Q)))&&St({},ln,bn),{type:Tu,value:parseInt(e,8),octal:!0,start:n,end:Q}}function DO(){var n,e,t;if(t=ye[Q],$y(Ma(t.charCodeAt(0))||t===".","Numeric literal must start with a decimal digit or a decimal point"),e=Q,n="",t!=="."){if(n=ye[Q++],t=ye[Q],n==="0"){if(t==="x"||t==="X")return++Q,AX(e);if(jp(t))return MX(e);t&&Ma(t.charCodeAt(0))&&St({},ln,bn)}for(;Ma(ye.charCodeAt(Q));)n+=ye[Q++];t=ye[Q]}if(t==="."){for(n+=ye[Q++];Ma(ye.charCodeAt(Q));)n+=ye[Q++];t=ye[Q]}if(t==="e"||t==="E")if(n+=ye[Q++],t=ye[Q],(t==="+"||t==="-")&&(n+=ye[Q++]),Ma(ye.charCodeAt(Q)))for(;Ma(ye.charCodeAt(Q));)n+=ye[Q++];else St({},ln,bn);return C0(ye.charCodeAt(Q))&&St({},ln,bn),{type:Tu,value:parseFloat(n),start:e,end:Q}}function RX(){var n="",e,t,i,s,r=!1;for(e=ye[Q],$y(e==="'"||e==='"',"String literal must starts with a quote"),t=Q,++Q;Q<Mn;)if(i=ye[Q++],i===e){e="";break}else if(i==="\\")if(i=ye[Q++],!i||!Gm(i.charCodeAt(0)))switch(i){case"u":case"x":ye[Q]==="{"?(++Q,n+=IX()):n+=KL(i);break;case"n":n+=`
`;break;case"r":n+="\r";break;case"t":n+="	";break;case"b":n+="\b";break;case"f":n+="\f";break;case"v":n+="\v";break;default:jp(i)?(s="01234567".indexOf(i),s!==0&&(r=!0),Q<Mn&&jp(ye[Q])&&(r=!0,s=s*8+"01234567".indexOf(ye[Q++]),"0123".indexOf(i)>=0&&Q<Mn&&jp(ye[Q])&&(s=s*8+"01234567".indexOf(ye[Q++]))),n+=String.fromCharCode(s)):n+=i;break}else i==="\r"&&ye[Q]===`
`&&++Q;else{if(Gm(i.charCodeAt(0)))break;n+=i}return e!==""&&St({},ln,bn),{type:w0,value:n,octal:r,start:t,end:Q}}function OX(n,e){let t=n;e.indexOf("u")>=0&&(t=t.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,s)=>{if(parseInt(s,16)<=1114111)return"x";St({},qL)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(t)}catch{St({},qL)}try{return new RegExp(n,e)}catch{return null}}function FX(){var n,e,t,i,s;for(n=ye[Q],$y(n==="/","Regular expression literal must start with a slash"),e=ye[Q++],t=!1,i=!1;Q<Mn;)if(n=ye[Q++],e+=n,n==="\\")n=ye[Q++],Gm(n.charCodeAt(0))&&St({},tx),e+=n;else if(Gm(n.charCodeAt(0)))St({},tx);else if(t)n==="]"&&(t=!1);else if(n==="/"){i=!0;break}else n==="["&&(t=!0);return i||St({},tx),s=e.substr(1,e.length-2),{value:s,literal:e}}function PX(){var n,e,t;for(e="",t="";Q<Mn&&(n=ye[Q],!!Lw(n.charCodeAt(0)));)++Q,n==="\\"&&Q<Mn?St({},ln,bn):(t+=n,e+=n);return t.search(/[^gimuy]/g)>=0&&St({},qL,t),{value:t,literal:e}}function BX(){var n,e,t,i;return Mt=null,g6(),n=Q,e=FX(),t=PX(),i=OX(e.value,t.value),{literal:e.literal+t.literal,value:i,regex:{pattern:e.value,flags:t.value},start:n,end:Q}}function VX(n){return n.type===tu||n.type===Ic||n.type===zy||n.type===Hy}function m6(){if(g6(),Q>=Mn)return{type:v0,start:Q,end:Q};const n=ye.charCodeAt(Q);return C0(n)?NX():n===40||n===41||n===59?ix():n===39||n===34?RX():n===46?Ma(ye.charCodeAt(Q+1))?DO():ix():Ma(n)?DO():ix()}function ds(){const n=Mt;return Q=n.end,Mt=m6(),Q=n.end,n}function _6(){const n=Q;Mt=m6(),Q=n}function WX(n){const e=new fo(cX);return e.elements=n,e}function LO(n,e,t){const i=new fo(n==="||"||n==="&&"?gX:hX);return i.operator=n,i.left=e,i.right=t,i}function zX(n,e){const t=new fo(uX);return t.callee=n,t.arguments=e,t}function HX(n,e,t){const i=new fo(dX);return i.test=n,i.consequent=e,i.alternate=t,i}function KN(n){const e=new fo(d6);return e.name=n,e}function kp(n){const e=new fo(fX);return e.value=n.value,e.raw=ye.slice(n.start,n.end),n.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=n.regex),e}function kO(n,e,t){const i=new fo(pX);return i.computed=n==="[",i.object=e,i.property=t,i.computed||(t.member=!0),i}function $X(n){const e=new fo(mX);return e.properties=n,e}function EO(n,e,t){const i=new fo(_X);return i.key=e,i.value=t,i.kind=n,i}function UX(n,e){const t=new fo(bX);return t.operator=n,t.argument=e,t.prefix=!0,t}function St(n,e){var t,i=Array.prototype.slice.call(arguments,2),s=e.replace(/%(\d)/g,(r,o)=>($y(o<i.length,"Message reference must be in range"),i[o]));throw t=new Error(s),t.index=Q,t.description=s,t}function Uy(n){n.type===v0&&St(n,SX),n.type===Tu&&St(n,vX),n.type===w0&&St(n,wX),n.type===tu&&St(n,CX),n.type===Ic&&St(n,yX),St(n,ln,n.value)}function Rn(n){const e=ds();(e.type!==us||e.value!==n)&&Uy(e)}function ei(n){return Mt.type===us&&Mt.value===n}function nx(n){return Mt.type===Ic&&Mt.value===n}function jX(){const n=[];for(Q=Mt.start,Rn("[");!ei("]");)ei(",")?(ds(),n.push(null)):(n.push(iu()),ei("]")||Rn(","));return ds(),WX(n)}function IO(){Q=Mt.start;const n=ds();return n.type===w0||n.type===Tu?(n.octal&&St(n,f6),kp(n)):KN(n.value)}function qX(){var n,e,t,i;if(Q=Mt.start,n=Mt,n.type===tu)return t=IO(),Rn(":"),i=iu(),EO("init",t,i);if(n.type===v0||n.type===us)Uy(n);else return e=IO(),Rn(":"),i=iu(),EO("init",e,i)}function KX(){var n=[],e,t,i,s={},r=String;for(Q=Mt.start,Rn("{");!ei("}");)e=qX(),e.key.type===d6?t=e.key.name:t=r(e.key.value),i="$"+t,Object.prototype.hasOwnProperty.call(s,i)?St({},xX):s[i]=!0,n.push(e),ei("}")||Rn(",");return Rn("}"),$X(n)}function GX(){Rn("(");const n=GN();return Rn(")"),n}const YX={if:1};function ZX(){var n,e,t;if(ei("("))return GX();if(ei("["))return jX();if(ei("{"))return KX();if(n=Mt.type,Q=Mt.start,n===tu||YX[Mt.value])t=KN(ds().value);else if(n===w0||n===Tu)Mt.octal&&St(Mt,f6),t=kp(ds());else{if(n===Ic)throw new Error(Km);n===zy?(e=ds(),e.value=e.value==="true",t=kp(e)):n===Hy?(e=ds(),e.value=null,t=kp(e)):ei("/")||ei("/=")?(t=kp(BX()),_6()):Uy(ds())}return t}function XX(){const n=[];if(Rn("("),!ei(")"))for(;Q<Mn&&(n.push(iu()),!ei(")"));)Rn(",");return Rn(")"),n}function QX(){Q=Mt.start;const n=ds();return VX(n)||Uy(n),KN(n.value)}function JX(){return Rn("."),QX()}function eQ(){Rn("[");const n=GN();return Rn("]"),n}function tQ(){var n,e,t;for(n=ZX();;)if(ei("."))t=JX(),n=kO(".",n,t);else if(ei("("))e=XX(),n=zX(n,e);else if(ei("["))t=eQ(),n=kO("[",n,t);else break;return n}function TO(){const n=tQ();if(Mt.type===us&&(ei("++")||ei("--")))throw new Error(Km);return n}function xv(){var n,e;if(Mt.type!==us&&Mt.type!==Ic)e=TO();else{if(ei("++")||ei("--"))throw new Error(Km);if(ei("+")||ei("-")||ei("~")||ei("!"))n=ds(),e=xv(),e=UX(n.value,e);else{if(nx("delete")||nx("void")||nx("typeof"))throw new Error(Km);e=TO()}}return e}function NO(n){let e=0;if(n.type!==us&&n.type!==Ic)return 0;switch(n.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function iQ(){var n,e,t,i,s,r,o,a,l,c;if(n=Mt,l=xv(),i=Mt,s=NO(i),s===0)return l;for(i.prec=s,ds(),e=[n,Mt],o=xv(),r=[l,i,o];(s=NO(Mt))>0;){for(;r.length>2&&s<=r[r.length-2].prec;)o=r.pop(),a=r.pop().value,l=r.pop(),e.pop(),t=LO(a,l,o),r.push(t);i=ds(),i.prec=s,r.push(i),e.push(Mt),t=xv(),r.push(t)}for(c=r.length-1,t=r[c],e.pop();c>1;)e.pop(),t=LO(r[c-1].value,r[c-2],t),c-=2;return t}function iu(){var n,e,t;return n=iQ(),ei("?")&&(ds(),e=iu(),Rn(":"),t=iu(),n=HX(n,e,t)),n}function GN(){const n=iu();if(ei(","))throw new Error(Km);return n}function nQ(n){ye=n,Q=0,Mn=ye.length,Mt=null,_6();const e=GN();if(Mt.type!==v0)throw new Error("Unexpect token after expression.");return e}var sQ={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function rQ(n){function e(o,a,l,c){let h=n(a[0]);return l&&(h=l+"("+h+")",l.lastIndexOf("new ",0)===0&&(h="("+h+")")),h+"."+o+(c<0?"":c===0?"()":"("+a.slice(1).map(n).join(",")+")")}function t(o,a,l){return c=>e(o,c,a,l)}const i="new Date",s="String",r="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&fi("Missing arguments to clamp function."),o.length>3&&fi("Too many arguments to clamp function.");const a=o.map(n);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:t("getDate",i,0),day:t("getDay",i,0),year:t("getFullYear",i,0),month:t("getMonth",i,0),hours:t("getHours",i,0),minutes:t("getMinutes",i,0),seconds:t("getSeconds",i,0),milliseconds:t("getMilliseconds",i,0),time:t("getTime",i,0),timezoneoffset:t("getTimezoneOffset",i,0),utcdate:t("getUTCDate",i,0),utcday:t("getUTCDay",i,0),utcyear:t("getUTCFullYear",i,0),utcmonth:t("getUTCMonth",i,0),utchours:t("getUTCHours",i,0),utcminutes:t("getUTCMinutes",i,0),utcseconds:t("getUTCSeconds",i,0),utcmilliseconds:t("getUTCMilliseconds",i,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",s,0),lower:t("toLowerCase",s,0),substring:t("substring",s),split:t("split",s),trim:t("trim",s,0),regexp:r,test:t("test",r),if:function(o){o.length<3&&fi("Missing arguments to if function."),o.length>3&&fi("Too many arguments to if function.");const a=o.map(n);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function oQ(n){const e=n&&n.length-1;return e&&(n[0]==='"'&&n[e]==='"'||n[0]==="'"&&n[e]==="'")?n.slice(1,-1):n}function aQ(n){n=n||{};const e=n.allowed?_w(n.allowed):{},t=n.forbidden?_w(n.forbidden):{},i=n.constants||sQ,s=(n.functions||rQ)(u),r=n.globalvar,o=n.fieldvar,a=Cs(r)?r:g=>`${r}["${g}"]`;let l={},c={},h=0;function u(g){if(pi(g))return g;const p=d[g.type];return p==null&&fi("Unsupported type: "+g.type),p(g)}const d={Literal:g=>g.raw,Identifier:g=>{const p=g.name;return h>0?p:dh(t,p)?fi("Illegal identifier: "+p):dh(i,p)?i[p]:dh(e,p)?p:(l[p]=1,a(p))},MemberExpression:g=>{const p=!g.computed,_=u(g.object);p&&(h+=1);const v=u(g.property);return _===o&&(c[oQ(v)]=1),p&&(h-=1),_+(p?"."+v:"["+v+"]")},CallExpression:g=>{g.callee.type!=="Identifier"&&fi("Illegal callee type: "+g.callee.type);const p=g.callee.name,_=g.arguments,v=dh(s,p)&&s[p];return v||fi("Unrecognized function: "+p),Cs(v)?v(_):v+"("+_.map(u).join(",")+")"},ArrayExpression:g=>"["+g.elements.map(u).join(",")+"]",BinaryExpression:g=>"("+u(g.left)+" "+g.operator+" "+u(g.right)+")",UnaryExpression:g=>"("+g.operator+u(g.argument)+")",ConditionalExpression:g=>"("+u(g.test)+"?"+u(g.consequent)+":"+u(g.alternate)+")",LogicalExpression:g=>"("+u(g.left)+g.operator+u(g.right)+")",ObjectExpression:g=>"{"+g.properties.map(u).join(",")+"}",Property:g=>{h+=1;const p=u(g.key);return h-=1,p+":"+u(g.value)}};function f(g){const p={code:u(g),globals:Object.keys(l),fields:Object.keys(c)};return l={},c={},p}return f.functions=s,f.constants=i,f}function YN(n,e={}){const t=aQ({forbidden:[],allowed:["datum"],globalvar:"global",fieldvar:"datum"});try{const i=nQ(n),s=t(i),r=Function("datum","global",`"use strict"; return (${s.code});`),o=a=>r(a,e);return o.fields=s.fields,o}catch(i){throw new Error(`Invalid expression: ${n}, ${i.message}`)}}function lQ(){let n=0;const e=new Map,t=i=>{let s=e.get(i);return s===void 0&&(s=n++,e.set(i,s)),s};return t.addAll=i=>{for(const s of i)t(s)},t.invert=i=>{for(const s of e.entries())if(s[1]==i)return s[0]},t.domain=()=>[...e.keys()],t}function cQ(n,e){const t={};e||(e=n.encoding);for(const[i,s]of Object.entries(e)){if(!s)continue;const r=n.unitView.getScaleResolution(br(s)&&s.resolutionChannel||i);t[i]=hQ(e[i],r==null?void 0:r.getScale(),n.unitView.getAccessor(i),i)}return t}function hQ(n,e,t,i){let s;if(io(n)){const r=n.value;s=o=>r,s.constant=!0,s.constantValue=!0,s.accessor=void 0}else if(t)if(i=="text")s=r=>{},s.accessor=t,s.constant=t.constant;else{if(!e)throw new Error(`Missing scale! "${i}": ${JSON.stringify(n)}`);if(s=r=>e(t(r)),eu(e.type)){const r=lQ();r.addAll(e.domain()),s.indexer=r}s.constant=t.constant,s.accessor=t,s.scale=e}else throw new Error(`Missing value or accessor (field, expr, datum) on channel "${i}": ${JSON.stringify(n)}`);return s.invert=e?r=>e.invert(r):r=>{throw new Error("No scale available, cannot invert: "+JSON.stringify(n))},s.channelDef=n,s.applyMetadata=r=>{for(const o in s)o in s&&(r[o]=s[o]);return r},s}function io(n){return n&&"value"in n}function y0(n){return n&&"field"in n}function S0(n){return n&&"datum"in n}function br(n){return y0(n)||S0(n)||ZN(n)||b6(n)}function GL(n,e){const t=n.mark.encoding[e];if(br(t))return t;throw new Error("Not a channel def with scale!")}function b6(n){return n&&"chrom"in n}function ZN(n){return n&&"expr"in n}const x0=["x","y"],uQ=["x2","y2"],dQ=[...x0,...uQ];function v6(n){return x0.includes(n)}function Ym(n){return dQ.includes(n)}const XN={x:"x2",y:"y2"},w6=Object.fromEntries(Object.entries(XN).map(n=>[n[1],n[0]]));function qp(n){return n in w6}function fQ(n){const e=XN[n];if(e)return e;throw new Error(`${n} has no secondary channel!`)}function bg(n){var e;return(e=w6[n])!=null?e:n}function Ah(n){return["color","fill","stroke"].includes(bg(n))}function jy(n){return["shape","squeeze"].includes(n)}function C6(n){switch(n){case"shape":return["circle","square","triangle-up","cross","diamond","triangle-down","triangle-right","triangle-left"]}}function y6(n){if(!jy(n))throw new Error("Not a discrete channel: "+n);const e=new Map(C6(n).map((t,i)=>[t,i]));return t=>{const i=e.get(t);if(i!==void 0)return i;throw new Error(`Invalid value for "${n}" channel: ${t}`)}}function Xt(n,e=n){if(/^[A-Za-z0-9_]+$/.test(n)){const t=new Function("datum",`return datum[${JSON.stringify(n)}]`);return xc(t,[n],e)}else return wy(n)}class gQ{constructor(){this.accessorCreators=[],this.register(e=>{if(y0(e))try{const t=Xt(e.field);return t.constant=!1,t.fields=MB(t),t}catch(t){throw new Error(`Invalid field definition: ${t.message}`)}}),this.register(e=>ZN(e)?pQ(e.expr):void 0),this.register(e=>{if(S0(e)){const i=Qq(e.datum);return i.constant=!0,i.fields=[],i}})}register(e){this.accessorCreators.push(e)}createAccessor(e){for(const t of this.accessorCreators){const i=t(e);if(i)return i}}}function pQ(n){const e=YN(n);return e.constant=e.fields.length==0,e}/* @license twgl.js 4.22.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */const QN=5120,Zm=5121,JN=5122,eA=5123,tA=5124,iA=5125,nA=5126,mQ=32819,_Q=32820,bQ=33635,vQ=5131,wQ=33640,CQ=35899,yQ=35902,SQ=36269,xQ=34042,S6={};{const n=S6;n[QN]=Int8Array,n[Zm]=Uint8Array,n[JN]=Int16Array,n[eA]=Uint16Array,n[tA]=Int32Array,n[iA]=Uint32Array,n[nA]=Float32Array,n[mQ]=Uint16Array,n[_Q]=Uint16Array,n[bQ]=Uint16Array,n[vQ]=Uint16Array,n[wQ]=Uint32Array,n[CQ]=Uint32Array,n[yQ]=Uint32Array,n[SQ]=Uint32Array,n[xQ]=Uint32Array}function sA(n){if(n instanceof Int8Array)return QN;if(n instanceof Uint8Array||n instanceof Uint8ClampedArray)return Zm;if(n instanceof Int16Array)return JN;if(n instanceof Uint16Array)return eA;if(n instanceof Int32Array)return tA;if(n instanceof Uint32Array)return iA;if(n instanceof Float32Array)return nA;throw new Error("unsupported typed array type")}function DQ(n){if(n===Int8Array)return QN;if(n===Uint8Array||n===Uint8ClampedArray)return Zm;if(n===Int16Array)return JN;if(n===Uint16Array)return eA;if(n===Int32Array)return tA;if(n===Uint32Array)return iA;if(n===Float32Array)return nA;throw new Error("unsupported typed array type")}function LQ(n){const e=S6[n];if(!e)throw new Error("unknown gl type");return e}const kw=typeof SharedArrayBuffer!="undefined"?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};function kQ(...n){console.error(...n)}function x6(...n){console.warn(...n)}function EQ(n,e){return typeof WebGLBuffer!="undefined"&&e instanceof WebGLBuffer}function D6(n,e){return typeof WebGLRenderbuffer!="undefined"&&e instanceof WebGLRenderbuffer}function qy(n,e){return typeof WebGLTexture!="undefined"&&e instanceof WebGLTexture}function IQ(n,e){return typeof WebGLSampler!="undefined"&&e instanceof WebGLSampler}const L6=35044,Yo=34962,TQ=34963,NQ=34660,AQ=5120,MQ=5121,RQ=5122,OQ=5123,FQ=5124,PQ=5125,BQ=5126,k6={attribPrefix:""};function E6(n,e,t,i,s){n.bindBuffer(e,t),n.bufferData(e,i,s||L6)}function I6(n,e,t,i){if(EQ(n,e))return e;t=t||Yo;const s=n.createBuffer();return E6(n,t,s,e,i),s}function T6(n){return n==="indices"}function VQ(n){return n instanceof Int8Array||n instanceof Uint8Array}function WQ(n){return n===Int8Array||n===Uint8Array}function zQ(n){return n.length?n:n.data}const HQ=/coord|texture/i,$Q=/color|colour/i;function N6(n,e){let t;if(HQ.test(n)?t=2:$Q.test(n)?t=4:t=3,e%t>0)throw new Error(`Can not guess numComponents for attribute '${n}'. Tried ${t} but ${e} values is not evenly divisible by ${t}. You should specify it.`);return t}function UQ(n,e){return n.numComponents||n.size||N6(e,zQ(n).length)}function rA(n,e){if(kw(n))return n;if(kw(n.data))return n.data;Array.isArray(n)&&(n={data:n});let t=n.type;return t||(T6(e)?t=Uint16Array:t=Float32Array),new t(n.data)}function jQ(n,e){const t={};return Object.keys(e).forEach(function(i){if(!T6(i)){const s=e[i],r=s.attrib||s.name||s.attribName||k6.attribPrefix+i;if(s.value){if(!Array.isArray(s.value)&&!kw(s.value))throw new Error("array.value is not array or typedarray");t[r]={value:s.value}}else{let o,a,l,c;if(s.buffer&&s.buffer instanceof WebGLBuffer)o=s.buffer,c=s.numComponents||s.size,a=s.type,l=s.normalize;else if(typeof s=="number"||typeof s.data=="number"){const h=s.data||s,u=s.type||Float32Array,d=h*u.BYTES_PER_ELEMENT;a=DQ(u),l=s.normalize!==void 0?s.normalize:WQ(u),c=s.numComponents||s.size||N6(i,h),o=n.createBuffer(),n.bindBuffer(Yo,o),n.bufferData(Yo,d,s.drawType||L6)}else{const h=rA(s,i);o=I6(n,h,void 0,s.drawType),a=sA(h),l=s.normalize!==void 0?s.normalize:VQ(h),c=UQ(s,i)}t[r]={buffer:o,numComponents:c,type:a,normalize:l,stride:s.stride||0,offset:s.offset||0,divisor:s.divisor===void 0?void 0:s.divisor,drawType:s.drawType}}}}),n.bindBuffer(Yo,null),t}function qQ(n,e,t,i){t=rA(t),i!==void 0?(n.bindBuffer(Yo,e.buffer),n.bufferSubData(Yo,i,t)):E6(n,Yo,e.buffer,t,e.drawType)}function KQ(n,e){return e===AQ||e===MQ?1:e===RQ||e===OQ?2:e===FQ||e===PQ||e===BQ?4:0}const sx=["position","positions","a_position"];function GQ(n,e){let t,i;for(i=0;i<sx.length&&(t=sx[i],!(t in e||(t=k6.attribPrefix+t,t in e)));++i);i===sx.length&&(t=Object.keys(e)[0]);const s=e[t];n.bindBuffer(Yo,s.buffer);const r=n.getBufferParameter(Yo,NQ);n.bindBuffer(Yo,null);const o=KQ(n,s.type),a=r/o,l=s.numComponents||s.size,c=a/l;if(c%1!==0)throw new Error(`numComponents ${l} not correct for length ${length}`);return c}function YQ(n,e,t){const i=jQ(n,e),s=Object.assign({},t||{});s.attribs=Object.assign({},t?t.attribs:{},i);const r=e.indices;if(r){const o=rA(r,"indices");s.indices=I6(n,o,TQ),s.numElements=o.length,s.elementType=sA(o)}else s.numElements||(s.numElements=GQ(n,s.attribs));return s}function vg(n){return!!n.texStorage2D}const YL=function(){const n={},e={};function t(i){const s=i.constructor.name;if(!n[s]){for(const r in i)if(typeof i[r]=="number"){const o=e[i[r]];e[i[r]]=o?`${o} | ${r}`:r}n[s]=!0}}return function(s,r){return t(s),e[r]||(typeof r=="number"?`0x${r.toString(16)}`:r)}}(),Tc={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},Nf=kw,A6=function(){let n;return function(){return n=n||(typeof document!="undefined"&&document.createElement?document.createElement("canvas").getContext("2d"):null),n}}(),AO=6406,Co=6407,hi=6408,MO=6409,RO=6410,rp=6402,OO=34041,Ew=33071,ZQ=9728,XQ=9729,ul=3553,sl=34067,ac=32879,lc=35866,Ky=34069,QQ=34070,JQ=34071,eJ=34072,tJ=34073,iJ=34074,ZL=10241,XL=10240,Iw=10242,Tw=10243,FO=32882,nJ=33082,sJ=33083,rJ=33084,oJ=33085,oA=3317,M6=3314,R6=32878,O6=3316,F6=3315,P6=32877,aJ=37443,lJ=37441,cJ=37440,hJ=33321,uJ=36756,dJ=33325,fJ=33326,gJ=33330,pJ=33329,mJ=33338,_J=33337,bJ=33340,vJ=33339,wJ=33323,CJ=36757,yJ=33327,SJ=33328,xJ=33336,DJ=33335,LJ=33332,kJ=33331,EJ=33334,IJ=33333,TJ=32849,NJ=35905,AJ=36194,MJ=36758,RJ=35898,OJ=35901,FJ=34843,PJ=34837,BJ=36221,VJ=36239,WJ=36215,zJ=36233,HJ=36209,$J=36227,UJ=32856,jJ=35907,qJ=36759,KJ=32855,GJ=32854,YJ=32857,ZJ=34842,XJ=34836,QJ=36220,JJ=36238,eee=36975,tee=36214,iee=36232,nee=36226,see=36208,ree=33189,oee=33190,aee=36012,lee=36013,cee=35056,_l=5120,li=5121,mb=5122,sd=5123,_b=5124,zc=5125,Ln=5126,PO=32819,BO=32820,VO=33635,Tr=5131,op=36193,rx=33640,hee=35899,uee=35902,dee=36269,fee=34042,bb=33319,rd=33320,vb=6403,od=36244,ad=36248,Hc=36249;let ox;function Gy(n){if(!ox){const e={};e[AO]={textureFormat:AO,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[li,Tr,op,Ln]},e[MO]={textureFormat:MO,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[li,Tr,op,Ln]},e[RO]={textureFormat:RO,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[li,Tr,op,Ln]},e[Co]={textureFormat:Co,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[li,Tr,op,Ln,VO]},e[hi]={textureFormat:hi,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[li,Tr,op,Ln,PO,BO]},e[rp]={textureFormat:rp,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[zc,sd]},e[hJ]={textureFormat:vb,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[li]},e[uJ]={textureFormat:vb,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[_l]},e[dJ]={textureFormat:vb,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[Ln,Tr]},e[fJ]={textureFormat:vb,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[Ln]},e[gJ]={textureFormat:od,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[li]},e[pJ]={textureFormat:od,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[_l]},e[LJ]={textureFormat:od,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[sd]},e[kJ]={textureFormat:od,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[mb]},e[EJ]={textureFormat:od,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[zc]},e[IJ]={textureFormat:od,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[_b]},e[wJ]={textureFormat:bb,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[li]},e[CJ]={textureFormat:bb,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[_l]},e[yJ]={textureFormat:bb,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[Ln,Tr]},e[SJ]={textureFormat:bb,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[Ln]},e[xJ]={textureFormat:rd,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[li]},e[DJ]={textureFormat:rd,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[_l]},e[mJ]={textureFormat:rd,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[sd]},e[_J]={textureFormat:rd,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[mb]},e[bJ]={textureFormat:rd,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[zc]},e[vJ]={textureFormat:rd,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[_b]},e[TJ]={textureFormat:Co,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[li]},e[NJ]={textureFormat:Co,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[li]},e[AJ]={textureFormat:Co,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[li,VO]},e[MJ]={textureFormat:Co,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[_l]},e[RJ]={textureFormat:Co,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Ln,Tr,hee]},e[OJ]={textureFormat:Co,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Ln,Tr,uee]},e[FJ]={textureFormat:Co,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[Ln,Tr]},e[PJ]={textureFormat:Co,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Ln]},e[BJ]={textureFormat:ad,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[li]},e[VJ]={textureFormat:ad,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[_l]},e[WJ]={textureFormat:ad,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[sd]},e[zJ]={textureFormat:ad,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[mb]},e[HJ]={textureFormat:ad,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[zc]},e[$J]={textureFormat:ad,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[_b]},e[UJ]={textureFormat:hi,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[li]},e[jJ]={textureFormat:hi,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[li]},e[qJ]={textureFormat:hi,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[_l]},e[KJ]={textureFormat:hi,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[li,BO,rx]},e[GJ]={textureFormat:hi,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[li,PO]},e[YJ]={textureFormat:hi,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[rx]},e[ZJ]={textureFormat:hi,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[Ln,Tr]},e[XJ]={textureFormat:hi,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[Ln]},e[QJ]={textureFormat:Hc,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[li]},e[JJ]={textureFormat:Hc,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[_l]},e[eee]={textureFormat:Hc,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[rx]},e[tee]={textureFormat:Hc,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[sd]},e[iee]={textureFormat:Hc,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[mb]},e[nee]={textureFormat:Hc,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[_b]},e[see]={textureFormat:Hc,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[zc]},e[ree]={textureFormat:rp,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[sd,zc]},e[oee]={textureFormat:rp,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[zc]},e[aee]={textureFormat:rp,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ln]},e[cee]={textureFormat:OO,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[fee]},e[lee]={textureFormat:OO,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[dee]},Object.keys(e).forEach(function(t){const i=e[t];i.bytesPerElementMap={},i.bytesPerElement.forEach(function(s,r){const o=i.type[r];i.bytesPerElementMap[o]=s})}),ox=e}return ox[n]}function gee(n,e){const t=Gy(n);if(!t)throw"unknown internal format";const i=t.bytesPerElementMap[e];if(i===void 0)throw"unknown internal format";return i}function wg(n){const e=Gy(n);if(!e)throw"unknown internal format";return{format:e.textureFormat,type:e.type[0]}}function WO(n){return(n&n-1)===0}function pee(n,e,t,i){if(!vg(n))return WO(e)&&WO(t);const s=Gy(i);if(!s)throw"unknown internal format";return s.colorRenderable&&s.textureFilterable}function mee(n){const e=Gy(n);if(!e)throw"unknown internal format";return e.textureFilterable}function B6(n,e,t){return Nf(e)?sA(e):t||li}function wb(n,e,t,i,s){if(s%1!==0)throw"can't guess dimensions";if(!t&&!i){const r=Math.sqrt(s/(e===sl?6:1));r%1===0?(t=r,i=r):(t=s,i=1)}else if(i){if(!t&&(t=s/i,t%1))throw"can't guess dimensions"}else if(i=s/t,i%1)throw"can't guess dimensions";return{width:t,height:i}}function Af(n,e){e.colorspaceConversion!==void 0&&n.pixelStorei(aJ,e.colorspaceConversion),e.premultiplyAlpha!==void 0&&n.pixelStorei(lJ,e.premultiplyAlpha),e.flipY!==void 0&&n.pixelStorei(cJ,e.flipY)}function V6(n){n.pixelStorei(oA,4),vg(n)&&(n.pixelStorei(M6,0),n.pixelStorei(R6,0),n.pixelStorei(O6,0),n.pixelStorei(F6,0),n.pixelStorei(P6,0))}function _ee(n,e,t,i){i.minMag&&(t.call(n,e,ZL,i.minMag),t.call(n,e,XL,i.minMag)),i.min&&t.call(n,e,ZL,i.min),i.mag&&t.call(n,e,XL,i.mag),i.wrap&&(t.call(n,e,Iw,i.wrap),t.call(n,e,Tw,i.wrap),(e===ac||IQ(n,e))&&t.call(n,e,FO,i.wrap)),i.wrapR&&t.call(n,e,FO,i.wrapR),i.wrapS&&t.call(n,e,Iw,i.wrapS),i.wrapT&&t.call(n,e,Tw,i.wrapT),i.minLod&&t.call(n,e,nJ,i.minLod),i.maxLod&&t.call(n,e,sJ,i.maxLod),i.baseLevel&&t.call(n,e,rJ,i.baseLevel),i.maxLevel&&t.call(n,e,oJ,i.maxLevel)}function W6(n,e,t){const i=t.target||ul;n.bindTexture(i,e),_ee(n,i,n.texParameteri,t)}function bee(n){return n=n||Tc.textureColor,Nf(n)?n:new Uint8Array([n[0]*255,n[1]*255,n[2]*255,n[3]*255])}function QL(n,e,t,i,s,r){t=t||Tc.textureOptions,r=r||hi;const o=t.target||ul;if(i=i||t.width,s=s||t.height,n.bindTexture(o,e),pee(n,i,s,r))n.generateMipmap(o);else{const a=mee(r)?XQ:ZQ;n.texParameteri(o,ZL,a),n.texParameteri(o,XL,a),n.texParameteri(o,Iw,Ew),n.texParameteri(o,Tw,Ew)}}function Xm(n){return n.auto===!0||n.auto===void 0&&n.level===void 0}function JL(n,e){return e=e||{},e.cubeFaceOrder||[Ky,QQ,JQ,eJ,tJ,iJ]}function ek(n,e){const i=JL(n,e).map(function(s,r){return{face:s,ndx:r}});return i.sort(function(s,r){return s.face-r.face}),i}function z6(n,e,t,i){i=i||Tc.textureOptions;const s=i.target||ul,r=i.level||0;let o=t.width,a=t.height;const l=i.internalFormat||i.format||hi,c=wg(l),h=i.format||c.format,u=i.type||c.type;if(Af(n,i),n.bindTexture(s,e),s===sl){const d=t.width,f=t.height;let g,p;if(d/6===f)g=f,p=[0,0,1,0,2,0,3,0,4,0,5,0];else if(f/6===d)g=d,p=[0,0,0,1,0,2,0,3,0,4,0,5];else if(d/3===f/2)g=d/3,p=[0,0,1,0,2,0,0,1,1,1,2,1];else if(d/2===f/3)g=d/2,p=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(t.src?t.src:t.nodeName);const _=A6();_?(_.canvas.width=g,_.canvas.height=g,o=g,a=g,ek(n,i).forEach(function(v){const b=p[v.ndx*2+0]*g,w=p[v.ndx*2+1]*g;_.drawImage(t,b,w,g,g,0,0,g,g),n.texImage2D(v.face,r,l,h,u,_.canvas)}),_.canvas.width=1,_.canvas.height=1):typeof createImageBitmap!="undefined"&&(o=g,a=g,ek(n,i).forEach(function(v){const b=p[v.ndx*2+0]*g,w=p[v.ndx*2+1]*g;n.texImage2D(v.face,r,l,g,g,0,h,u,null),createImageBitmap(t,b,w,g,g,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(C){Af(n,i),n.bindTexture(s,e),n.texImage2D(v.face,r,l,h,u,C),Xm(i)&&QL(n,e,i,o,a,l)})}))}else if(s===ac||s===lc){const d=Math.min(t.width,t.height),f=Math.max(t.width,t.height),g=f/d;if(g%1!==0)throw"can not compute 3D dimensions of element";const p=t.width===f?1:0,_=t.height===f?1:0;n.pixelStorei(oA,1),n.pixelStorei(M6,t.width),n.pixelStorei(R6,0),n.pixelStorei(P6,0),n.texImage3D(s,r,l,d,d,d,0,h,u,null);for(let v=0;v<g;++v){const b=v*d*p,w=v*d*_;n.pixelStorei(O6,b),n.pixelStorei(F6,w),n.texSubImage3D(s,r,0,0,v,d,d,1,h,u,t)}V6(n)}else n.texImage2D(s,r,l,h,u,t);Xm(i)&&QL(n,e,i,o,a,l),W6(n,e,i)}function D0(){}function vee(n){if(typeof document!="undefined"){const e=document.createElement("a");return e.href=n,e.hostname===location.hostname&&e.port===location.port&&e.protocol===location.protocol}else{const e=new URL(location.href).origin;return new URL(n,location.href).origin===e}}function wee(n,e){return e===void 0&&!vee(n)?"anonymous":e}function Cee(n,e,t){t=t||D0;let i;if(e=e!==void 0?e:Tc.crossOrigin,e=wee(n,e),typeof Image!="undefined"){i=new Image,e!==void 0&&(i.crossOrigin=e);const s=function(){i.removeEventListener("error",r),i.removeEventListener("load",o),i=null},r=function(){const l="couldn't load image: "+n;kQ(l),t(l,i),s()},o=function(){t(null,i),s()};return i.addEventListener("error",r),i.addEventListener("load",o),i.src=n,i}else if(typeof ImageBitmap!="undefined"){let s,r;const o=function(){t(s,r)},a={};e&&(a.mode="cors"),fetch(n,a).then(function(l){if(!l.ok)throw l;return l.blob()}).then(function(l){return createImageBitmap(l,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(l){r=l,setTimeout(o)}).catch(function(l){s=l,setTimeout(o)}),i=null}return i}function H6(n){return typeof ImageBitmap!="undefined"&&n instanceof ImageBitmap||typeof ImageData!="undefined"&&n instanceof ImageData||typeof HTMLElement!="undefined"&&n instanceof HTMLElement}function aA(n,e,t){return H6(n)?(setTimeout(function(){t(null,n)}),n):Cee(n,e,t)}function lA(n,e,t){t=t||Tc.textureOptions;const i=t.target||ul;if(n.bindTexture(i,e),t.color===!1)return;const s=bee(t.color);if(i===sl)for(let r=0;r<6;++r)n.texImage2D(Ky+r,0,hi,1,1,0,hi,li,s);else i===ac||i===lc?n.texImage3D(i,0,hi,1,1,1,0,hi,li,s):n.texImage2D(i,0,hi,1,1,0,hi,li,s)}function yee(n,e,t,i){return i=i||D0,t=t||Tc.textureOptions,lA(n,e,t),t=Object.assign({},t),aA(t.src,t.crossOrigin,function(r,o){r?i(r,e,o):(z6(n,e,o,t),i(null,e,o))})}function See(n,e,t,i){i=i||D0;const s=t.src;if(s.length!==6)throw"there must be 6 urls for a cubemap";const r=t.level||0,o=t.internalFormat||t.format||hi,a=wg(o),l=t.format||a.format,c=t.type||li,h=t.target||ul;if(h!==sl)throw"target must be TEXTURE_CUBE_MAP";lA(n,e,t),t=Object.assign({},t);let u=6;const d=[],f=JL(n,t);let g;function p(_){return function(v,b){--u,v?d.push(v):b.width!==b.height?d.push("cubemap face img is not a square: "+b.src):(Af(n,t),n.bindTexture(h,e),u===5?JL().forEach(function(w){n.texImage2D(w,r,o,l,c,b)}):n.texImage2D(_,r,o,l,c,b),Xm(t)&&n.generateMipmap(h)),u===0&&i(d.length?d:void 0,e,g)}}g=s.map(function(_,v){return aA(_,t.crossOrigin,p(f[v]))})}function xee(n,e,t,i){i=i||D0;const s=t.src,r=t.internalFormat||t.format||hi,o=wg(r),a=t.format||o.format,l=t.type||li,c=t.target||lc;if(c!==ac&&c!==lc)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";lA(n,e,t),t=Object.assign({},t);let h=s.length;const u=[];let d;const f=t.level||0;let g=t.width,p=t.height;const _=s.length;let v=!0;function b(w){return function(C,y){if(--h,C)u.push(C);else{if(Af(n,t),n.bindTexture(c,e),v){v=!1,g=t.width||y.width,p=t.height||y.height,n.texImage3D(c,f,r,g,p,_,0,a,l,null);for(let D=0;D<_;++D)n.texSubImage3D(c,f,0,0,D,g,p,1,a,l,y)}else{let D=y,S;(y.width!==g||y.height!==p)&&(S=A6(),D=S.canvas,S.canvas.width=g,S.canvas.height=p,S.drawImage(y,0,0,g,p)),n.texSubImage3D(c,f,0,0,w,g,p,1,a,l,D),S&&D===S.canvas&&(S.canvas.width=0,S.canvas.height=0)}Xm(t)&&n.generateMipmap(c)}h===0&&i(u.length?u:void 0,e,d)}}d=s.map(function(w,C){return aA(w,t.crossOrigin,b(C))})}function $6(n,e,t,i){i=i||Tc.textureOptions;const s=i.target||ul;n.bindTexture(s,e);let r=i.width,o=i.height,a=i.depth;const l=i.level||0,c=i.internalFormat||i.format||hi,h=wg(c),u=i.format||h.format,d=i.type||B6(n,t,h.type);if(Nf(t))t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));else{const _=LQ(d);t=new _(t)}const f=gee(c,d),g=t.byteLength/f;if(g%1)throw"length wrong size for format: "+YL(n,u);let p;if(s===ac||s===lc)if(!r&&!o&&!a){const _=Math.cbrt(g);if(_%1!==0)throw"can't guess cube size of array of numElements: "+g;r=_,o=_,a=_}else r&&(!o||!a)?(p=wb(n,s,o,a,g/r),o=p.width,a=p.height):o&&(!r||!a)?(p=wb(n,s,r,a,g/o),r=p.width,a=p.height):(p=wb(n,s,r,o,g/a),r=p.width,o=p.height);else p=wb(n,s,r,o,g),r=p.width,o=p.height;if(V6(n),n.pixelStorei(oA,i.unpackAlignment||1),Af(n,i),s===sl){const _=f/t.BYTES_PER_ELEMENT,v=g/6*_;ek(n,i).forEach(b=>{const w=v*b.ndx,C=t.subarray(w,w+v);n.texImage2D(b.face,l,c,r,o,0,u,d,C)})}else s===ac||s===lc?n.texImage3D(s,l,c,r,o,a,0,u,d,t):n.texImage2D(s,l,c,r,o,0,u,d,t);return{width:r,height:o,depth:a,type:d}}function Dee(n,e,t){const i=t.target||ul;n.bindTexture(i,e);const s=t.level||0,r=t.internalFormat||t.format||hi,o=wg(r),a=t.format||o.format,l=t.type||o.type;if(Af(n,t),i===sl)for(let c=0;c<6;++c)n.texImage2D(Ky+c,s,r,t.width,t.height,0,a,l,null);else i===ac||i===lc?n.texImage3D(i,s,r,t.width,t.height,t.depth,0,a,l,null):n.texImage2D(i,s,r,t.width,t.height,0,a,l,null)}function Qm(n,e,t){t=t||D0,e=e||Tc.textureOptions;const i=n.createTexture(),s=e.target||ul;let r=e.width||1,o=e.height||1;const a=e.internalFormat||hi;n.bindTexture(s,i),s===sl&&(n.texParameteri(s,Iw,Ew),n.texParameteri(s,Tw,Ew));let l=e.src;if(l)if(typeof l=="function"&&(l=l(n,e)),typeof l=="string")yee(n,i,e,t);else if(Nf(l)||Array.isArray(l)&&(typeof l[0]=="number"||Array.isArray(l[0])||Nf(l[0]))){const c=$6(n,i,l,e);r=c.width,o=c.height}else Array.isArray(l)&&(typeof l[0]=="string"||H6(l[0]))?s===sl?See(n,i,e,t):xee(n,i,e,t):(z6(n,i,l,e),r=l.width,o=l.height);else Dee(n,i,e);return Xm(e)&&QL(n,i,e,r,o,a),W6(n,i,e),i}function Lee(n,e,t,i,s,r){i=i||t.width,s=s||t.height,r=r||t.depth;const o=t.target||ul;n.bindTexture(o,e);const a=t.level||0,l=t.internalFormat||t.format||hi,c=wg(l),h=t.format||c.format;let u;const d=t.src;if(d&&(Nf(d)||Array.isArray(d)&&typeof d[0]=="number")?u=t.type||B6(n,d,c.type):u=t.type||c.type,o===sl)for(let f=0;f<6;++f)n.texImage2D(Ky+f,a,l,i,s,0,h,u,null);else o===ac||o===lc?n.texImage3D(o,a,l,i,s,r,0,h,u,null):n.texImage2D(o,a,l,i,s,0,h,u,null)}const kee=x6,Nw=33984,Eee=35048,Yy=34962,Iee=34963,cA=35345,U6=35718,Tee=35721,Nee=35971,Aee=35382,Mee=35396,Ree=35398,Oee=35392,Fee=35395,Zy=5126,j6=35664,q6=35665,K6=35666,hA=5124,G6=35667,Y6=35668,Z6=35669,X6=35670,Q6=35671,J6=35672,e7=35673,t7=35674,i7=35675,n7=35676,Pee=35678,Bee=35680,Vee=35679,Wee=35682,zee=35685,Hee=35686,$ee=35687,Uee=35688,jee=35689,qee=35690,Kee=36289,Gee=36292,Yee=36293,uA=5125,s7=36294,r7=36295,o7=36296,Zee=36298,Xee=36299,Qee=36300,Jee=36303,ete=36306,tte=36307,ite=36308,nte=36311,Xy=3553,Qy=34067,dA=32879,Jy=35866,qe={};function a7(n,e){return qe[e].bindPoint}function ste(n,e){return function(t){n.uniform1f(e,t)}}function rte(n,e){return function(t){n.uniform1fv(e,t)}}function ote(n,e){return function(t){n.uniform2fv(e,t)}}function ate(n,e){return function(t){n.uniform3fv(e,t)}}function lte(n,e){return function(t){n.uniform4fv(e,t)}}function l7(n,e){return function(t){n.uniform1i(e,t)}}function c7(n,e){return function(t){n.uniform1iv(e,t)}}function h7(n,e){return function(t){n.uniform2iv(e,t)}}function u7(n,e){return function(t){n.uniform3iv(e,t)}}function d7(n,e){return function(t){n.uniform4iv(e,t)}}function cte(n,e){return function(t){n.uniform1ui(e,t)}}function hte(n,e){return function(t){n.uniform1uiv(e,t)}}function ute(n,e){return function(t){n.uniform2uiv(e,t)}}function dte(n,e){return function(t){n.uniform3uiv(e,t)}}function fte(n,e){return function(t){n.uniform4uiv(e,t)}}function gte(n,e){return function(t){n.uniformMatrix2fv(e,!1,t)}}function pte(n,e){return function(t){n.uniformMatrix3fv(e,!1,t)}}function mte(n,e){return function(t){n.uniformMatrix4fv(e,!1,t)}}function _te(n,e){return function(t){n.uniformMatrix2x3fv(e,!1,t)}}function bte(n,e){return function(t){n.uniformMatrix3x2fv(e,!1,t)}}function vte(n,e){return function(t){n.uniformMatrix2x4fv(e,!1,t)}}function wte(n,e){return function(t){n.uniformMatrix4x2fv(e,!1,t)}}function Cte(n,e){return function(t){n.uniformMatrix3x4fv(e,!1,t)}}function yte(n,e){return function(t){n.uniformMatrix4x3fv(e,!1,t)}}function ns(n,e,t,i){const s=a7(n,e);return vg(n)?function(r){let o,a;qy(n,r)?(o=r,a=null):(o=r.texture,a=r.sampler),n.uniform1i(i,t),n.activeTexture(Nw+t),n.bindTexture(s,o),n.bindSampler(t,a)}:function(r){n.uniform1i(i,t),n.activeTexture(Nw+t),n.bindTexture(s,r)}}function ss(n,e,t,i,s){const r=a7(n,e),o=new Int32Array(s);for(let a=0;a<s;++a)o[a]=t+a;return vg(n)?function(a){n.uniform1iv(i,o),a.forEach(function(l,c){n.activeTexture(Nw+o[c]);let h,u;qy(n,l)?(h=l,u=null):(h=l.texture,u=l.sampler),n.bindSampler(t,u),n.bindTexture(r,h)})}:function(a){n.uniform1iv(i,o),a.forEach(function(l,c){n.activeTexture(Nw+o[c]),n.bindTexture(r,l)})}}qe[Zy]={Type:Float32Array,size:4,setter:ste,arraySetter:rte};qe[j6]={Type:Float32Array,size:8,setter:ote,cols:2};qe[q6]={Type:Float32Array,size:12,setter:ate,cols:3};qe[K6]={Type:Float32Array,size:16,setter:lte,cols:4};qe[hA]={Type:Int32Array,size:4,setter:l7,arraySetter:c7};qe[G6]={Type:Int32Array,size:8,setter:h7,cols:2};qe[Y6]={Type:Int32Array,size:12,setter:u7,cols:3};qe[Z6]={Type:Int32Array,size:16,setter:d7,cols:4};qe[uA]={Type:Uint32Array,size:4,setter:cte,arraySetter:hte};qe[s7]={Type:Uint32Array,size:8,setter:ute,cols:2};qe[r7]={Type:Uint32Array,size:12,setter:dte,cols:3};qe[o7]={Type:Uint32Array,size:16,setter:fte,cols:4};qe[X6]={Type:Uint32Array,size:4,setter:l7,arraySetter:c7};qe[Q6]={Type:Uint32Array,size:8,setter:h7,cols:2};qe[J6]={Type:Uint32Array,size:12,setter:u7,cols:3};qe[e7]={Type:Uint32Array,size:16,setter:d7,cols:4};qe[t7]={Type:Float32Array,size:32,setter:gte,rows:2,cols:2};qe[i7]={Type:Float32Array,size:48,setter:pte,rows:3,cols:3};qe[n7]={Type:Float32Array,size:64,setter:mte,rows:4,cols:4};qe[zee]={Type:Float32Array,size:32,setter:_te,rows:2,cols:3};qe[Hee]={Type:Float32Array,size:32,setter:vte,rows:2,cols:4};qe[$ee]={Type:Float32Array,size:48,setter:bte,rows:3,cols:2};qe[Uee]={Type:Float32Array,size:48,setter:Cte,rows:3,cols:4};qe[jee]={Type:Float32Array,size:64,setter:wte,rows:4,cols:2};qe[qee]={Type:Float32Array,size:64,setter:yte,rows:4,cols:3};qe[Pee]={Type:null,size:0,setter:ns,arraySetter:ss,bindPoint:Xy};qe[Bee]={Type:null,size:0,setter:ns,arraySetter:ss,bindPoint:Qy};qe[Vee]={Type:null,size:0,setter:ns,arraySetter:ss,bindPoint:dA};qe[Wee]={Type:null,size:0,setter:ns,arraySetter:ss,bindPoint:Xy};qe[Kee]={Type:null,size:0,setter:ns,arraySetter:ss,bindPoint:Jy};qe[Gee]={Type:null,size:0,setter:ns,arraySetter:ss,bindPoint:Jy};qe[Yee]={Type:null,size:0,setter:ns,arraySetter:ss,bindPoint:Qy};qe[Zee]={Type:null,size:0,setter:ns,arraySetter:ss,bindPoint:Xy};qe[Xee]={Type:null,size:0,setter:ns,arraySetter:ss,bindPoint:dA};qe[Qee]={Type:null,size:0,setter:ns,arraySetter:ss,bindPoint:Qy};qe[Jee]={Type:null,size:0,setter:ns,arraySetter:ss,bindPoint:Jy};qe[ete]={Type:null,size:0,setter:ns,arraySetter:ss,bindPoint:Xy};qe[tte]={Type:null,size:0,setter:ns,arraySetter:ss,bindPoint:dA};qe[ite]={Type:null,size:0,setter:ns,arraySetter:ss,bindPoint:Qy};qe[nte]={Type:null,size:0,setter:ns,arraySetter:ss,bindPoint:Jy};function e1(n,e){return function(t){if(t.value)switch(n.disableVertexAttribArray(e),t.value.length){case 4:n.vertexAttrib4fv(e,t.value);break;case 3:n.vertexAttrib3fv(e,t.value);break;case 2:n.vertexAttrib2fv(e,t.value);break;case 1:n.vertexAttrib1fv(e,t.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else n.bindBuffer(Yy,t.buffer),n.enableVertexAttribArray(e),n.vertexAttribPointer(e,t.numComponents||t.size,t.type||Zy,t.normalize||!1,t.stride||0,t.offset||0),t.divisor!==void 0&&n.vertexAttribDivisor(e,t.divisor)}}function Nc(n,e){return function(t){if(t.value)if(n.disableVertexAttribArray(e),t.value.length===4)n.vertexAttrib4iv(e,t.value);else throw new Error("The length of an integer constant value must be 4!");else n.bindBuffer(Yy,t.buffer),n.enableVertexAttribArray(e),n.vertexAttribIPointer(e,t.numComponents||t.size,t.type||hA,t.stride||0,t.offset||0),t.divisor!==void 0&&n.vertexAttribDivisor(e,t.divisor)}}function t1(n,e){return function(t){if(t.value)if(n.disableVertexAttribArray(e),t.value.length===4)n.vertexAttrib4uiv(e,t.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else n.bindBuffer(Yy,t.buffer),n.enableVertexAttribArray(e),n.vertexAttribIPointer(e,t.numComponents||t.size,t.type||uA,t.stride||0,t.offset||0),t.divisor!==void 0&&n.vertexAttribDivisor(e,t.divisor)}}function fA(n,e,t){const i=t.size,s=t.count;return function(r){n.bindBuffer(Yy,r.buffer);const o=r.size||r.numComponents||i,a=o/s,l=r.type||Zy,h=qe[l].size*o,u=r.normalize||!1,d=r.offset||0,f=h/s;for(let g=0;g<s;++g)n.enableVertexAttribArray(e+g),n.vertexAttribPointer(e+g,a,l,u,h,d+f*g),r.divisor!==void 0&&n.vertexAttribDivisor(e+g,r.divisor)}}const zi={};zi[Zy]={size:4,setter:e1};zi[j6]={size:8,setter:e1};zi[q6]={size:12,setter:e1};zi[K6]={size:16,setter:e1};zi[hA]={size:4,setter:Nc};zi[G6]={size:8,setter:Nc};zi[Y6]={size:12,setter:Nc};zi[Z6]={size:16,setter:Nc};zi[uA]={size:4,setter:t1};zi[s7]={size:8,setter:t1};zi[r7]={size:12,setter:t1};zi[o7]={size:16,setter:t1};zi[X6]={size:4,setter:Nc};zi[Q6]={size:8,setter:Nc};zi[J6]={size:12,setter:Nc};zi[e7]={size:16,setter:Nc};zi[t7]={size:4,setter:fA,count:2};zi[i7]={size:9,setter:fA,count:3};zi[n7]={size:16,setter:fA,count:4};function f7(n){const e=n.name;return e.startsWith("gl_")||e.startsWith("webgl_")}const Ste=/(\.|\[|]|\w+)/g,xte=n=>n>="0"&&n<="9";function g7(n,e,t,i){const s=n.split(Ste).filter(a=>a!=="");let r=0,o="";for(;;){const a=s[r++];o+=a;const l=xte(a[0]),c=l?parseInt(a):a;if(l&&(o+=s[r++]),r===s.length){t[c]=e;break}else{const u=s[r++],d=u==="[",f=t[c]||(d?[]:{});t[c]=f,t=f,i[o]=i[o]||function(g){return function(p){p7(g,p)}}(f),o+=u}}}function Dte(n,e){let t=0;function i(a,l,c){const h=l.name.endsWith("[0]"),u=l.type,d=qe[u];if(!d)throw new Error(`unknown type: 0x${u.toString(16)}`);let f;if(d.bindPoint){const g=t;t+=l.size,h?f=d.arraySetter(n,u,g,c,l.size):f=d.setter(n,u,g,c,l.size)}else d.arraySetter&&h?f=d.arraySetter(n,c):f=d.setter(n,c);return f.location=c,f}const s={},r={},o=n.getProgramParameter(e,U6);for(let a=0;a<o;++a){const l=n.getActiveUniform(e,a);if(f7(l))continue;let c=l.name;c.endsWith("[0]")&&(c=c.substr(0,c.length-3));const h=n.getUniformLocation(e,l.name);if(h){const u=i(e,l,h);s[c]=u,g7(c,u,r,s)}}return s}function Lte(n,e){const t={},i=n.getProgramParameter(e,Nee);for(let s=0;s<i;++s){const r=n.getTransformFeedbackVarying(e,s);t[r.name]={index:s,type:r.type,size:r.size}}return t}function kte(n,e){const t=n.getProgramParameter(e,U6),i=[],s=[];for(let a=0;a<t;++a){s.push(a),i.push({});const l=n.getActiveUniform(e,a);i[a].name=l.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(a){const l=a[0],c=a[1];n.getActiveUniforms(e,s,n[l]).forEach(function(h,u){i[u][c]=h})});const r={},o=n.getProgramParameter(e,Aee);for(let a=0;a<o;++a){const l=n.getActiveUniformBlockName(e,a),c={index:n.getUniformBlockIndex(e,l),usedByVertexShader:n.getActiveUniformBlockParameter(e,a,Mee),usedByFragmentShader:n.getActiveUniformBlockParameter(e,a,Ree),size:n.getActiveUniformBlockParameter(e,a,Oee),uniformIndices:n.getActiveUniformBlockParameter(e,a,Fee)};c.used=c.usedByVertexShader||c.usedByFragmentShader,r[l]=c}return{blockSpecs:r,uniformData:i}}const zO=/\[\d+\]\.$/,Ete=(n,e)=>((n+(e-1))/e|0)*e;function Ite(n,e,t,i){if(e||t){i=i||1;const r=n.length/4;return function(o){let a=0,l=0;for(let c=0;c<r;++c){for(let h=0;h<i;++h)n[a++]=o[l++];a+=4-i}}}else return function(s){s.length?n.set(s):n[0]=s}}function Tte(n,e,t,i){const s=t.blockSpecs,r=t.uniformData,o=s[i];if(!o)return kee("no uniform block object named:",i),{name:i,uniforms:{}};const a=new ArrayBuffer(o.size),l=n.createBuffer(),c=o.index;n.bindBuffer(cA,l),n.uniformBlockBinding(e,o.index,c);let h=i+".";zO.test(h)&&(h=h.replace(zO,"."));const u={},d={},f={};return o.uniformIndices.forEach(function(g){const p=r[g];let _=p.name;_.startsWith(h)&&(_=_.substr(h.length));const v=_.endsWith("[0]");v&&(_=_.substr(0,_.length-3));const b=qe[p.type],w=b.Type,C=v?Ete(b.size,16)*p.size:b.size*p.size,y=new w(a,p.offset,C/w.BYTES_PER_ELEMENT);u[_]=y;const D=Ite(y,v,b.rows,b.cols);d[_]=D,g7(_,D,f,d)}),{name:i,array:a,asFloat:new Float32Array(a),buffer:l,uniforms:u,setters:d}}function HO(n,e,t){return Tte(n,e.program,e.uniformBlockSpec,t)}function Nte(n,e,t){const s=(e.uniformBlockSpec||e).blockSpecs[t.name];if(s){const r=s.index;return n.bindBufferRange(cA,r,t.buffer,t.offset||0,t.array.byteLength),!0}return!1}function $O(n,e,t){Nte(n,e,t)&&n.bufferData(cA,t.array,Eee)}function UO(n,e){const t=n.setters;for(const i in e){const s=t[i];if(s){const r=e[i];s(r)}}}function p7(n,e){for(const t in e){const i=n[t];typeof i=="function"?i(e[t]):p7(n[t],e[t])}}function Bs(n,...e){const t=n.uniformSetters||n,i=e.length;for(let s=0;s<i;++s){const r=e[s];if(Array.isArray(r)){const o=r.length;for(let a=0;a<o;++a)Bs(t,r[a])}else for(const o in r){const a=t[o];a&&a(r[o])}}}function Ate(n,e){const t={},i=n.getProgramParameter(e,Tee);for(let s=0;s<i;++s){const r=n.getActiveAttrib(e,s);if(f7(r))continue;const o=n.getAttribLocation(e,r.name),a=zi[r.type],l=a.setter(n,o,a);l.location=o,t[r.name]=l}return t}function Mte(n,e){for(const t in e){const i=n[t];i&&i(e[t])}}function Cg(n,e,t){t.vertexArrayObject?n.bindVertexArray(t.vertexArrayObject):(Mte(e.attribSetters||e,t.attribs),t.indices&&n.bindBuffer(Iee,t.indices))}function Rte(n,e){const t=Dte(n,e),i=Ate(n,e),s={program:e,uniformSetters:t,attribSetters:i};return vg(n)&&(s.uniformBlockSpec=kte(n,e),s.transformFeedbackInfo=Lte(n,e)),s}const Ote=4,jO=5123;function L0(n,e,t,i,s,r){t=t===void 0?Ote:t;const o=e.indices,a=e.elementType,l=i===void 0?e.numElements:i;s=s===void 0?0:s,a||o?r!==void 0?n.drawElementsInstanced(t,l,a===void 0?jO:e.elementType,s,r):n.drawElements(t,l,a===void 0?jO:e.elementType,s):r!==void 0?n.drawArraysInstanced(t,s,l,r):n.drawArrays(t,s,l)}const Fte=36160,gh=36161,Pte=3553,Bte=5121,Vte=6402,Wte=6408,zte=33190,Hte=36012,$te=35056,Ute=36013,jte=32854,qte=32855,Kte=36194,m7=33189,_7=6401,b7=36168,gA=34041,Gte=36064,i1=36096,v7=36128,pA=33306,tk=33071,ik=9729,w7=[{format:Wte,type:Bte,min:ik,wrap:tk},{format:gA}],no={};no[gA]=pA;no[_7]=v7;no[b7]=v7;no[Vte]=i1;no[m7]=i1;no[zte]=i1;no[Hte]=i1;no[$te]=pA;no[Ute]=pA;function Yte(n,e){return no[n]||no[e]}const Ac={};Ac[jte]=!0;Ac[qte]=!0;Ac[Kte]=!0;Ac[gA]=!0;Ac[m7]=!0;Ac[_7]=!0;Ac[b7]=!0;function Zte(n){return Ac[n]}function Xte(n,e,t,i){const s=Fte,r=n.createFramebuffer();n.bindFramebuffer(s,r),t=t||n.drawingBufferWidth,i=i||n.drawingBufferHeight,e=e||w7;let o=0;const a={framebuffer:r,attachments:[],width:t,height:i};return e.forEach(function(l){let c=l.attachment;const h=l.samples,u=l.format;let d=l.attachmentPoint||Yte(u,l.internalFormat);if(d||(d=Gte+o++),!c)if(h!==void 0||Zte(u))c=n.createRenderbuffer(),n.bindRenderbuffer(gh,c),h>1?n.renderbufferStorageMultisample(gh,h,u,t,i):n.renderbufferStorage(gh,u,t,i);else{const f=Object.assign({},l);f.width=t,f.height=i,f.auto===void 0&&(f.auto=!1,f.min=f.min||f.minMag||ik,f.mag=f.mag||f.minMag||ik,f.wrapS=f.wrapS||f.wrap||tk,f.wrapT=f.wrapT||f.wrap||tk),c=Qm(n,f)}if(D6(n,c))n.framebufferRenderbuffer(s,d,gh,c);else if(qy(n,c))l.layer!==void 0?n.framebufferTextureLayer(s,d,c,l.level||0,l.layer):n.framebufferTexture2D(s,d,l.target||Pte,c,l.level||0);else throw new Error("unknown attachment type");a.attachments.push(c)}),a}function Qte(n,e,t,i,s){i=i||n.drawingBufferWidth,s=s||n.drawingBufferHeight,e.width=i,e.height=s,t=t||w7,t.forEach(function(r,o){const a=e.attachments[o],l=r.format,c=r.samples;if(c!==void 0||D6(n,a))n.bindRenderbuffer(gh,a),c>1?n.renderbufferStorageMultisample(gh,c,l,i,s):n.renderbufferStorage(gh,l,i,s);else if(qy(n,a))Lee(n,a,r,i,s);else throw new Error("unknown attachment type")})}function Jte(n,e,t){const i=n.createVertexArray();return n.bindVertexArray(i),e.length||(e=[e]),e.forEach(function(s){Cg(n,s,t)}),n.bindVertexArray(null),{numElements:t.numElements,elementType:t.elementType,vertexArrayObject:i}}const eie=/^(.*?)_/;function tie(n,e){YL(n,0);const t=n.getExtension(e);if(t){const i={},s=eie.exec(e)[1],r="_"+s;for(const o in t){const a=t[o],l=typeof a=="function",c=l?s:r;let h=o;o.endsWith(c)&&(h=o.substring(0,o.length-c.length)),n[h]!==void 0?!l&&n[h]!==a&&x6(h,n[h],a,o):l?n[h]=function(u){return function(){return u.apply(t,arguments)}}(a):(n[h]=a,i[h]=a)}i.constructor={name:t.constructor.name},YL(i,0)}return t}const qO=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function C7(n){for(let e=0;e<qO.length;++e)tie(n,qO[e])}function iie(n,e){const t=["webgl2","webgl","experimental-webgl"];let i=null;for(let s=0;s<t.length;++s)if(i=n.getContext(t[s],e),i){C7(i);break}return i}function nie(n,e){return iie(n,e)}var sie=`/**
 * The vertex position wrt the rectangle specified by (x, x2, y, y2).
 * [0, 0] = [x, y], [1, 1] = [x2, y2]. 
 * The x or y component may contain fractional values if the rectangle 
 * have been tessellated.
 */
in vec2 frac;

/** Minimum size (width, height) of the displayed rectangle in pixels */
uniform vec2 uMinSize;

/** Minimum opacity for the size size clamping */
uniform float uMinOpacity;

/** top-right, bottom-right, top-left, bottom-left */
uniform vec4 uCornerRadii;

flat out lowp vec4 vFillColor;
flat out lowp vec4 vStrokeColor;
flat out float vHalfStrokeWidth;
flat out vec4 vCornerRadii;


#if defined(ROUNDED_CORNERS) || defined(STROKED)
/** Position for SDF-strokes */
out vec2 vPosInPixels;
#endif

/** Size of the rect in pixels */
flat out vec2 vHalfSizeInPixels;

/**
 * Clamps the minimumSize and returns an opacity that reflects the amount of clamping.
 */
float clampMinSize(inout float pos, float frac, float size, float minSize) {
    if (minSize > 0.0 && abs(size) < minSize) {
        pos += (frac - 0.5) * (minSize * sign(size) - size);
        return abs(size) / minSize;
    }

    return 1.0;
}

void sort(inout float a, inout float b) {
    if (a > b) {
        float tmp = b;
        b = a;
        a = tmp;
    }
}

void main(void) {
    vec2 normalizedMinSize = uMinSize / uViewportSize;

    float x = getScaled_x();
    float x2 = getScaled_x2();
    float y = getScaled_y();
    float y2 = getScaled_y2();

    sort(x, x2);
    sort(y, y2);

    // Clamp x to prevent precision artifacts when the scale is zoomed very close.
	// TODO: clamp y as well
	float clampMargin = 1.0;
    vec2 pos1 = vec2(clamp(x, 0.0 - clampMargin, 1.0 + clampMargin), y);
    vec2 pos2 = vec2(clamp(x2, 0.0 - clampMargin, 1.0 + clampMargin), y2);

    vec2 size = pos2 - pos1;

    if (size.x <= 0.0 || size.y <= 0.0) {
        // Early exit. May increase performance or not...
        gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
        return;
    }

    vec2 pos = pos1 + frac * size;

    size.y *= getSampleFacetHeight(pos);

    // Clamp to minimum size, optionally compensate with opacity
    float opaFactor = uViewOpacity * max(uMinOpacity,
        clampMinSize(pos.x, frac.x, size.x, normalizedMinSize.x) *
        clampMinSize(pos.y, frac.y, size.y, normalizedMinSize.y));

    pos = applySampleFacet(pos);

#if defined(ROUNDED_CORNERS) || defined(STROKED)
    // Add an extra pixel to stroke width to accommodate edge antialiasing
    float aaPadding = 1.0 / uDevicePixelRatio;
    float strokeWidth = getScaled_strokeWidth();
    float strokeOpacity = getScaled_strokeOpacity() * opaFactor;

    vec2 centeredFrac = frac - 0.5;
    vec2 expand = centeredFrac * (strokeWidth + aaPadding) / uViewportSize;
    pos += expand;

    vec2 sizeInPixels = size * uViewportSize;
    vPosInPixels = (centeredFrac + expand / size) * sizeInPixels;

    vHalfSizeInPixels = sizeInPixels / 2.0;

    vCornerRadii = min(uCornerRadii, min(vHalfSizeInPixels.x, vHalfSizeInPixels.y));
    vHalfStrokeWidth = strokeWidth / 2.0;
    vStrokeColor = vec4(getScaled_stroke() * strokeOpacity, strokeOpacity);
#endif

    gl_Position = unitToNdc(pos);

    float fillOpacity = getScaled_fillOpacity() * opaFactor;
    vFillColor = vec4(getScaled_fill() * fillOpacity, fillOpacity);

    setupPicking();
}
`,rie=`#if defined(ROUNDED_CORNERS) || defined(STROKED)
in vec2 vPosInPixels;
#endif

flat in vec2 vHalfSizeInPixels;

flat in lowp vec4 vFillColor;
flat in lowp vec4 vStrokeColor;
flat in float vHalfStrokeWidth;
flat in vec4 vCornerRadii;

out lowp vec4 fragColor;

// Source: https://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
float sdRoundedBox(vec2 p, vec2 b, vec4 r) {
    r.xy = p.x > 0.0 ? r.xy : r.zw;
    r.x  = p.y > 0.0 ? r.x  : r.y;
    vec2 q = abs(p) - b + r.x;
    return min(max(q.x, q.y), 0.0) + length(max(q, 0.0)) - r.x;
}

// Not a true SDF. Makes the corners of strokes sharp and is faster.
float sdSharpBox(vec2 p, vec2 b) {
    vec2 q = abs(p) - b;
    return max(q.x, q.y);
}

void main(void) {

#if defined(ROUNDED_CORNERS) || defined(STROKED)
#ifdef ROUNDED_CORNERS
    // Distance from rectangle's edge in pixels. Negative inside the rectangle.
    float d = sdRoundedBox(vPosInPixels, vHalfSizeInPixels, vCornerRadii);
#else
    float d = sdSharpBox(vPosInPixels, vHalfSizeInPixels);
#endif

    fragColor = distanceToColor(d, vFillColor, vStrokeColor, vHalfStrokeWidth);

    if (fragColor.a == 0.0) {
        discard;
    }
#else
    // The trivial, non-decorated case
    fragColor = vFillColor;
#endif

    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
}
`;const mA="attr_",y7="uDomain_",oie="range_",KO="scale_",S7="getScaled_",nk="uRangeTexture_",GO=3402823466e29;function aie(n){const e=n.match(/^(?:(\w+)-)?(\w+)$/);if(!e)throw new Error("Not a scale type: "+n);return{family:e[1]||"continuous",transform:e[2]}}function lie(n,e){let t;if(jy(n))t=ph(y6(n)(e));else if(pi(e))if(Ah(n))t=hie(e);else throw new Error(`String values are not supported on the "${n}" channel: ${e}`);else if(Sy(e))t=ph(e?1:0);else if(e===null)if(Ah(n))t=ph([0,0,0]);else throw new Error(`null value is not supported on the "${n}" chanel.`);else t=ph(e);return`
#define ${n}_DEFINED
${t.type} ${S7}${n}() {
    // Constant value
    return ${t};
}`}function cie(n,e,t){var S,x;if(io(t))throw new Error(`Cannot create scale for "value": ${JSON.stringify(t)}`);const i=bg(n),s=mA+n,r=y7+i,o=oie+i,a=Aw(e.type),l=a?"vec2":"float",c=e.domain?e.domain().length:void 0;let h;const u=[];u.push(""),u.push("/".repeat(70)),u.push(`// Channel: ${n}`),u.push(""),u.push(`#define ${n}_DEFINED`);const{transform:d}=aie(e.type),f=(k,...F)=>uie.apply(null,[k,"value",...F]);let g;switch(d){case"linear":g=f("scaleLinear","domain",o);break;case"log":g=f("scaleLog","domain",o,e.base());break;case"symlog":g=f("scaleSymlog","domain",o,e.constant());break;case"pow":case"sqrt":g=f("scalePow","domain",o,e.exponent());break;case"index":case"locus":g=f("scaleBandHp","domain",o,e.paddingInner(),e.paddingOuter(),e.align(),(S=t.band)!=null?S:.5);break;case"point":case"band":g=f("scaleBand","domain",o,e.paddingInner(),e.paddingOuter(),e.align(),(x=t.band)!=null?x:.5);break;case"ordinal":case"null":case"identity":g=f("scaleIdentity");break;case"threshold":break;default:throw new Error(`Unsupported scale type: ${e.type}! ${n}: ${JSON.stringify(t)}`)}const p=Vy(e.type)||ur(e.type)&&Ah(n)?[0,1]:e.range?e.range():void 0;if(p&&n==i&&p.length&&p.every(ys)){const k=YO(p);u.push(`const ${k.type} ${o} = ${k};`)}const _=Ah(n)?"vec3":"float";let v;if(Ah(n)){const k=nk+i;if(n==i&&u.push(`uniform sampler2D ${k};`),ur(e.type))v=`getInterpolatedColor(${k}, transformed)`;else if(eu(e.type)||Ld(e.type))v=`getDiscreteColor(${k}, int(transformed))`;else throw new Error("Problem with color scale!")}else if(e.type==="ordinal"||Ld(e.type)){const k=nk+i;n==i&&u.push(`uniform sampler2D ${k};`),v=`getDiscreteColor(${k}, int(transformed)).r`}S0(t)?u.push(`uniform highp ${l} ${s};`):u.push(`in highp ${l} ${s};`);const b=[],w=ur(e.type)&&c>2,C=Ld(e.type)||w;if(b.push("int slot = 0;"),C){const k=r;b.push(w?`while (slot < ${k}.length() - 2 && value >= ${k}[slot + 1]) { slot++; }`:`while (slot < ${k}.length() && value >= ${k}[slot]) { slot++; }`)}const y=ur(e.type)||Ld(e.type)||["band","point"].includes(e.type);if(g){const k=r;y&&(a?b.push(`vec3 domain = ${k};`):b.push(`vec2 domain = vec2(${k}[slot], ${k}[slot + 1]);`)),b.push(`float transformed = ${g};`),w&&b.push(`transformed = (float(slot) + transformed) / (float(${k}.length()) - 1.0);`)}else b.push("float transformed = float(slot);");"clamp"in e&&e.clamp()&&b.push(`transformed = clampToRange(transformed, ${YO(p)});`),b.push(`return ${v!=null?v:"transformed"};`),u.push(`
${_} ${KO}${n}(${l} value) {
${b.map(k=>`    ${k}
`).join("")}
}`),u.push(`
${_} ${S7}${n}() {
    return ${KO}${n}(${s});
}`);const D=u.join(`
`);if(y&&n==i){const k=ur(e.type)||Ld(e.type)?c:2;h=a?`highp vec3 ${r};`:`mediump float ${r}[${k}];`}return{glsl:D,domainUniform:h}}function sk(n){if(!ys(n))throw new Error(`Not a number: ${n}`);if(n==1/0)return""+GO;if(n==-1/0)return""+-GO;{let e=`${n}`;return/^(-)?\d+$/.test(e)&&(e+=".0"),e}}function ph(n){typeof n=="number"&&(n=[n]);const e=n.length;if(e<1||e>4)throw new Error("Invalid number of components: "+e);let t,i;return e>1?(t=`vec${e}`,i=`${t}(${n.map(sk).join(", ")})`):(t="float",i=sk(n[0])),Object.assign(i,{type:t,numComponents:e})}function hie(n){const e=Jh(n).rgb();return ph([e.r,e.g,e.b].map(t=>t/255))}function YO(n){return ph([n[0],_g(n)])}function uie(n,...e){const t=[];for(const i of e)ys(i)?t.push(sk(i)):Dr(i)?t.push(ph(i)):t.push(i);return`${n}(${t.join(", ")})`}function Aw(n){return n=="index"||n=="locus"}function _A(n,e){const i=n%2048,s=Math.round(n-i);return e!=null||(e=[]),e[0]=s,e[1]=i,e}function die(n){return[..._A(n[0]),n[1]-n[0]]}class fie{constructor(e){this.size=e,this.arrays={},this.pushers=[],this.dataUpdaters=[],this.vertexCount=0}addConverter(e,t){const i=this.createUpdater(mA+e,t.numComponents||1,t.arrayReference),s=t.f;this.dataUpdaters.push(t.arrayReference?r=>i(s(r)):r=>i(s(r)))}createUpdater(e,t,i){if(!ys(this.size))throw new Error("The number of vertices must be defined!");let s,r,o=0;const a=new Float32Array(this.size*t);if(this.arrays[e]={data:a,numComponents:t},t==1){let l=0;const c=h=>{l=+h};s=()=>{a[o++]=l},r=c}else{let l=i!=null?i:[0];const c=i?h=>{}:h=>{l=h};switch(t){case 1:break;case 2:s=()=>{a[o++]=l[0],a[o++]=l[1]},r=c;break;case 3:s=()=>{a[o++]=l[0],a[o++]=l[1],a[o++]=l[2]},r=c;break;case 4:s=()=>{a[o++]=l[0],a[o++]=l[1],a[o++]=l[2],a[o++]=l[3]},r=c;break;default:throw new Error("Invalid numComponents: "+t)}}return this.pushers.push(s),r}_unrollPushAll(){let e="",t="";for(let s=0;s<this.pushers.length;s++)e+=`const p${s} = that.pushers[${s}];
`,t+=`p${s}();
`;const i=new Function("that",`${e}

            return function unrolledPushAll() {
                ${t}
                that.vertexCount++;
            };
        `);this.pushAll=i(this)}pushAll(){this.size>1e5?this._unrollPushAll():this.pushAll=()=>{for(let t=0;t<this.pushers.length;t++)this.pushers[t]();this.vertexCount++},this.pushAll()}updateFromDatum(e){for(let t=0;t<this.dataUpdaters.length;t++)this.dataUpdaters[t](e)}pushFromDatum(e){this.updateFromDatum(e),this.pushAll()}}const Od=5,ax=127;function rk(n){const e=[];for(let g=0;g<=ax;g++)e.push(void 0);const t=new Map;for(const g of n.chars)g.id<=ax?e[g.id]=g:t.set(g.id,g);const i=8722;t.has(i)||t.set(i,e["-".charCodeAt(0)]);function s(g){return(g<=ax?e[g]:t.get(g))||e[63]}function r(g){return s(g.charCodeAt(0))}const o=n.common.base,a=r("x"),l=r("X"),c=r("q"),h=a.height-Od*2,u=l.height-Od*2,d=c.height-a.height+c.yoffset-a.yoffset;function f(g,p=1){let _=0;for(let v=0;v<g.length;v++)_+=s(g.charCodeAt(v)).xadvance;return _/o*p}return{measureWidth:f,getCharByCode:s,getChar:r,xHeight:h,capHeight:u,descent:d,common:n.common}}function gie(n,e=0,t=1){return Math.max(e,Math.min(t,n))}const ZO=2**31-1,pie=-(2**31);function mie(n,e,t,i=t){const s=new Int32Array(n);s.fill(ZO);let r=pie,o=!1;const a=new Int32Array(n),l=e[0],h=(e[1]-e[0])/n,u=_=>gie(Math.floor((_-l)/h),0,n-1);function d(_,v,b){v>r?r=v:o||(o=!0,console.debug("Items are not ordered properly. Disabling binned index."));const w=t(_),C=u(w);s[C]>v&&(s[C]=v),a[C]<b&&(a[C]=b)}function f(_,v,b){v>r?r=v:o||(o=!0,console.debug("Items are not ordered properly. Disabling binned index."));const w=t(_),C=i(_),y=u(w),D=u(C);for(let S=y;S<=D;S++)s[S]>v&&(s[S]=v),a[S]<b&&(a[S]=b)}const g=(_,v,b=[0,0])=>(b[0]=s[u(_)],b[1]=Math.max(a[u(v)],b[0]),b),p=()=>{for(let v=1;v<a.length;v++)a[v]<a[v-1]&&(a[v]=a[v-1]);let _=!0;for(let v=s.length-1;v>0;v--)_&&s[v]==ZO?(s[v]=a[v],_=!1):s[v-1]>s[v]&&(s[v-1]=s[v]);return g};if(d.getIndex=p,f.getIndex=p,!o)return t==i?d:f}class k0{constructor({encoders:e,numVertices:t=void 0,attributes:i=[]}){this.encoders=e,this.variableEncoders=Object.fromEntries(Object.entries(e).filter(([s,r])=>i.includes(s)&&r&&r.scale&&!r.constant)),this.allocatedVertices=t,this.variableBuilder=new fie(t);for(const[s,r]of Object.entries(this.variableEncoders)){const o=r.accessor,a=[0,0],l=Aw(r.scale.type),c=r.indexer,h=c?u=>c(o(u)):l?u=>_A(o(u),a):o;this.variableBuilder.addConverter(s,{f:h,numComponents:l?2:1,arrayReference:l?a:void 0})}this.lastOffset=0,this.rangeMap=new Yh([],JSON.stringify)}registerBatch(e){var r;const t=this.lastOffset,i=this.variableBuilder.vertexCount,s=i-t;s&&this.rangeMap.set(e,{offset:t,count:s,xIndex:(r=this.xIndexer)==null?void 0:r.getIndex()}),this.lastOffset=i}addBatches(e){for(const[t,i]of e)this.addBatch(t,i)}addBatch(e,t,i=0,s=t.length){this.prepareXIndexer(t,i,s);for(let r=i;r<s;r++){const o=t[r];this.variableBuilder.pushFromDatum(o),this.addToXIndex(o)}this.registerBatch(e)}prepareXIndexer(e,t=0,i=t+e.length){if(!e.length||i-t<0){this.addToXIndex=a=>{};return}const s=a=>{var l;return a&&ur((l=a.scale)==null?void 0:l.type)&&a},r=s(this.variableEncoders.x),o=s(this.variableEncoders.x2);if(r){const a=r.accessor,l=o?o.accessor:a;this.xIndexer=mie(50,[a(e[t]),l(e[i-1])],a,l);let c=this.variableBuilder.vertexCount;this.addToXIndex=h=>{let u=this.variableBuilder.vertexCount;this.xIndexer(h,c,u),c=u}}else this.xIndexer=void 0,this.addToXIndex=a=>{}}addToXIndex(e){}toArrays(){return{arrays:this.variableBuilder.arrays,vertexCount:this.variableBuilder.vertexCount,allocatedVertices:this.allocatedVertices,rangeMap:this.rangeMap}}}class _ie extends k0{constructor({encoders:e,attributes:t,tessellationThreshold:i=1/0,visibleRange:s=[-1/0,1/0],numItems:r}){super({encoders:e,attributes:t,numVertices:i==1/0?r*6:void 0}),this.visibleRange=s,this.tessellationThreshold=i||1/0,this.updateFrac=this.variableBuilder.createUpdater("frac",2)}addBatch(e,t,i=0,s=t.length){if(s<=i)return;const r=this.encoders,[o,a]=this.visibleRange,l=d=>d.accessor||(f=>0),c=l(r.x),h=l(r.x2);this.prepareXIndexer(t,i,s);const u=[0,0];this.updateFrac(u);for(let d=i;d<s;d++){const f=t[d];let g=c(f),p=h(f);if(g>p&&([g,p]=[p,g]),p<o||g>a)continue;g<o&&(g=o),p>a&&(p=a),this.variableBuilder.updateFromDatum(f),u[0]=0,u[1]=0;const _=1;this.variableBuilder.pushAll();for(let v=0;v<=_;v++)u[0]=v/_,u[1]=0,this.variableBuilder.pushAll(),u[1]=1,this.variableBuilder.pushAll();this.variableBuilder.pushAll(),this.addToXIndex(f)}this.registerBatch(e)}}class bie extends k0{constructor({encoders:e,attributes:t,tessellationThreshold:i=1/0,visibleRange:s=[-1/0,1/0],numItems:r}){super({encoders:e,attributes:t,numVertices:i==1/0?r*6:void 0}),this.visibleRange=s,this.tessellationThreshold=i||1/0,this.updateSide=this.variableBuilder.createUpdater("side",1),this.updatePos=this.variableBuilder.createUpdater("pos",1)}addBatch(e,t,i=0,s=t.length){this.prepareXIndexer(t,i,s);for(let r=i;r<s;r++){const o=t[r];this.variableBuilder.updateFromDatum(o),this.updateSide(-.5),this.updatePos(0),this.variableBuilder.pushAll();const a=1;for(let l=0;l<=a;l++)this.updatePos(l/a),this.updateSide(-.5),this.variableBuilder.pushAll(),this.updateSide(.5),this.variableBuilder.pushAll();this.variableBuilder.pushAll(),this.addToXIndex(o)}this.registerBatch(e)}}class vie extends k0{constructor({encoders:e,attributes:t,numItems:i=void 0}){super({encoders:e,attributes:t,numVertices:i})}}class wie extends k0{constructor({encoders:e,attributes:t,numItems:i=void 0}){super({encoders:e,attributes:t,numVertices:i})}toArrays(){const e=this.variableBuilder.arrays;for(let t of Object.values(e))t.divisor=1;return super.toArrays()}}class Cie extends k0{constructor({encoders:e,attributes:t,fontMetrics:i,properties:s,numCharacters:r=void 0}){super({encoders:e,attributes:t,numVertices:r*6}),this.metadata=i,this.metrics=i,this.properties=s;const a=e.text.channelDef;this.numberFormat=!io(a)&&a.format?wn(a.format):l=>l,this.updateVertexCoord=this.variableBuilder.createUpdater("vertexCoord",2),this.updateTextureCoord=this.variableBuilder.createUpdater("textureCoord",2),this.updateWidth=this.variableBuilder.createUpdater("width",1)}addBatch(e,t,i=0,s=t.length){var f;const r=this.properties.align||"left",o=(f=this.properties.logoLetters)!=null?f:!1,a=this.metadata.common.base,l=this.metadata.common.scaleH;let c=-Od;switch(this.properties.baseline){case"top":c+=this.metrics.capHeight;break;case"middle":c+=this.metrics.capHeight/2;break;case"bottom":c-=this.metrics.descent;break}const h=this.encoders.text.accessor||this.encoders.text,u=[0,0];this.updateVertexCoord(u);const d=[0,0];this.updateTextureCoord(d),this.prepareXIndexer(t,i,s);for(let g=i;g<s;g++){const p=t[g],_=this.numberFormat(h(p)),v=pi(_)?_:_===null?"":""+_;if(v.length==0)continue;this.variableBuilder.updateFromDatum(p);const b=o?v.length:this.metrics.measureWidth(v);this.updateWidth(b);let w=r=="right"?-b:r=="center"?-b/2:0;if(!o){const S=this.metrics.getCharByCode(v.charCodeAt(0));w-=(S.width-S.xadvance)/a/2}let C=-.5,y=1,D=1;for(let S=0;S<v.length;S++){const x=this.metrics.getCharByCode(v.charCodeAt(S)),k=o?1:x.xadvance/a;if(x.id==32){w+=k;continue}o?(D=(x.width+Od*2)/x.width,w=-D/2,y=(x.height+Od*2)/x.height,C=-.5-Od/x.height):(y=x.height/a,C=-(x.height+x.yoffset+c)/a,D=x.width/a);const F=x.x,A=x.y;u[0]=w,u[1]=C+y,d[0]=F/l,d[1]=A/l,this.variableBuilder.pushAll(),u[0]=w+D,u[1]=C+y,d[0]=(F+x.width)/l,d[1]=A/l,this.variableBuilder.pushAll(),u[0]=w,u[1]=C,d[0]=F/l,d[1]=(A+x.height)/l,this.variableBuilder.pushAll(),u[0]=w+D,u[1]=C+y,d[0]=(F+x.width)/l,d[1]=A/l,this.variableBuilder.pushAll(),u[0]=w,u[1]=C,d[0]=F/l,d[1]=(A+x.height)/l,this.variableBuilder.pushAll(),u[0]=w+D,u[1]=C,d[0]=(F+x.width)/l,d[1]=(A+x.height)/l,this.variableBuilder.pushAll(),w+=k}this.addToXIndex(p)}this.registerBatch(e)}}var XO=`#define PI 3.141593

uniform View {
    /** Offset in "unit" units */
    mediump vec2 uViewOffset;
    mediump vec2 uViewScale;
    /** Size of the logical viewport in pixels, i.e., the view */
    mediump vec2 uViewportSize;
    lowp float uDevicePixelRatio;
    // TODO: Views with opacity less than 1.0 should be rendered into a texture
    // that is rendered with the specified opacity.
    lowp float uViewOpacity;
    bool uPickingEnabled;
};


/**
 * Maps a coordinate on the unit scale to a normalized device coordinate.
 * (0, 0) is at the bottom left corner.
 */
vec4 unitToNdc(vec2 coord) {
    return vec4((coord * uViewScale + uViewOffset) * 2.0 - 1.0, 0.0, 1.0);
}

vec4 unitToNdc(float x, float y) {
    return unitToNdc(vec2(x, y));
}

vec4 pixelsToNdc(vec2 coord) {
    return unitToNdc(coord / uViewportSize);
}

vec4 pixelsToNdc(float x, float y) {
    return pixelsToNdc(vec2(x, y));
}

float linearstep(float edge0, float edge1, float x) {
    return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
}

// Fragment shader stuff ////////////////////////////////////////////////////////

// TODO: include the following only in fragment shaders

/**
 * Specialized linearstep for doing antialiasing
 */
float distanceToRatio(float d) {
	return clamp(d * uDevicePixelRatio + 0.5, 0.0, 1.0);
}

vec4 distanceToColor(float d, vec4 fill, vec4 stroke, float halfStrokeWidth) {
    if (halfStrokeWidth > 0.0) {
        // Distance to stroke's edge. Negative inside the stroke.
        float sd = abs(d) - halfStrokeWidth;
        return mix(
            stroke,
            d <= 0.0 ? fill : vec4(0.0),
            distanceToRatio(sd));
    } else {
        return fill * distanceToRatio(-d);
    }
}
`,yie=`const float inf = 1.0 / 0.0;

// Utils ------------

vec3 getDiscreteColor(sampler2D s, int index) {
    return texelFetch(s, ivec2(index % textureSize(s, 0).x, 0), 0).rgb;
}

vec3 getInterpolatedColor(sampler2D s, float unitValue) {
    return texture(s, vec2(unitValue, 0.0)).rgb;
}

float clampToRange(float value, vec2 range) {
    return clamp(value, min(range[0], range[1]), max(range[0], range[1]));
}

// Scales ------------
// Based on d3 scales: https://github.com/d3/d3-scale

float scaleIdentity(float value) {
    return value;
}

float scaleLinear(float value, vec2 domain, vec2 range) {
    float domainSpan = domain[1] - domain[0];
    float rangeSpan = range[1] - range[0];
    return (value - domain[0]) / domainSpan * rangeSpan + range[0];
}

float scaleLog(float value, vec2 domain, vec2 range, float base) {
    // y = m log(x) + b 
    // TODO: Perf optimization: precalculate log domain in js.
    // TODO: Reversed domain, etc
    return scaleLinear(log(value) / log(base), log(domain) / log(base), range);
}

float symlog(float value, float constant) {
    // WARNING: emulating log1p with log(x + 1). Small numbers are likely to
    // have significant precision problems.
    return sign(value) * log(abs(value / constant) + 1.0);
}

float scaleSymlog(float value, vec2 domain, vec2 range, float constant) {
    return scaleLinear(
        symlog(value, constant),
        vec2(symlog(domain[0], constant), symlog(domain[1], constant)),
        range
    );
}

float scalePow(float value, vec2 domain, vec2 range, float exponent) {
    // y = mx^k + b
    // TODO: Perf optimization: precalculate pow domain in js.
    // TODO: Reversed domain, etc
    return scaleLinear(
        pow(abs(value), exponent) * sign(value),
        pow(abs(domain), vec2(exponent)) * sign(domain),
        range
    );
}

// TODO: scaleThreshold
// TODO: scaleQuantile (special case of threshold scale)

float scaleBand(float value, vec2 domainExtent, vec2 range,
                float paddingInner, float paddingOuter,
                float align, float band) {

    // TODO: reverse
    float start = range[0];
    float stop = range[1];
    float rangeSpan = stop - start;

    float n = domainExtent[1] - domainExtent[0];

    // This fix departs from Vega and d3: https://github.com/vega/vega/issues/3357#issuecomment-1063253596
    paddingInner = int(n) > 1 ? paddingInner : 0.0;

    // Adapted from: https://github.com/d3/d3-scale/blob/master/src/band.js
    float step = rangeSpan / max(1.0, n - paddingInner + paddingOuter * 2.0);
    start += (rangeSpan - step * (n - paddingInner)) * align;
    float bandwidth = step * (1.0 - paddingInner);

    return start + (value - domainExtent[0]) * step + bandwidth * band;
}

// High precision variant of scaleBand for index/locus scales
float scaleBandHp(vec2 value, vec3 domainExtent, vec2 range,
                 float paddingInner, float paddingOuter,
                 float align, float band) {

    // TODO: reverse
    float start = range[0];
    float stop = range[1];
    float rangeSpan = stop - start;

    vec2 domainStart = domainExtent.xy;
    float n = domainExtent[2];

    // The following computation is identical for every vertex. Could be done on the JS side.
    float step = rangeSpan / max(1.0, n - paddingInner + paddingOuter * 2.0);
    start += (rangeSpan - step * (n - paddingInner)) * align;
    float bandwidth = step * (1.0 - paddingInner);

    // Using max to prevent the shader compiler from wrecking the precision.
    // Othwewise the compiler could optimize the sum of the four terms into
    // some equivalent form that does premature rounding.
    float hi = max(value[0] - domainStart[0], -inf);
    float lo = max(value[1] - domainStart[1], -inf);

    return dot(vec4(start, hi, lo, bandwidth), vec4(1.0, step, step, band));
}
`,Sie=`
/**
 * Describes where a sample facet should be shown. Interpolating between the
 * current and target positions/heights allows for transitioning between facet
 * configurations.
 */
struct SampleFacetPosition {
    float pos;
    float height;
    float targetPos;
    float targetHeight;
};

/**
 * Trasition fraction [0, 1] between the current and target configurations.
 */
uniform float uTransitionOffset;


// ----------------------------------------------------------------------------

#if !defined(SAMPLE_FACET_UNIFORM) && !defined(SAMPLE_FACET_TEXTURE)

SampleFacetPosition getSampleFacetPos() {
    return SampleFacetPosition(0.0, 1.0, 0.0, 1.0);
}

#elif defined(SAMPLE_FACET_UNIFORM)

/**
 * Location and height of the band on the Y axis on a normalized [0, 1] scale.
 * Elements: curr pos, curr height, target pos, target height
 */
uniform vec4 uSampleFacet;

SampleFacetPosition getSampleFacetPos() {
    return SampleFacetPosition(
        1.0 - uSampleFacet.x - uSampleFacet.y,
        uSampleFacet.y,
        1.0 - uSampleFacet.z - uSampleFacet.w,
        uSampleFacet.w
    );
}

#elif defined(SAMPLE_FACET_TEXTURE)

uniform sampler2D uSampleFacetTexture;

SampleFacetPosition getSampleFacetPos() {
    vec4 texel = texelFetch(uSampleFacetTexture, ivec2(int(attr_facetIndex), 0), 0);
    return SampleFacetPosition(
        1.0 - texel.r - texel.g,
        texel.g,
        1.0 - texel.r - texel.g,
        texel.g);
}

#endif

// ----------------------------------------------------------------------------

bool isFacetedSamples(SampleFacetPosition facetPos) {
    return facetPos != SampleFacetPosition(0.0, 1.0, 0.0, 1.0);
}

bool isFacetedSamples() {
    return isFacetedSamples(getSampleFacetPos());
}

bool isInTransit() {
    return uTransitionOffset > 0.0;
}

float getTransitionFraction(float xPos) {
    return smoothstep(0.0, 0.7 + uTransitionOffset, (xPos - uTransitionOffset) * 2.0);
}

vec2 applySampleFacet(vec2 pos) {
    SampleFacetPosition facetPos = getSampleFacetPos();

    if (!isFacetedSamples(facetPos)) {
        return pos;
    } else if (isInTransit()) {
        vec2 interpolated = mix(
            vec2(facetPos.pos, facetPos.height),
            vec2(facetPos.targetPos, facetPos.targetHeight),
            getTransitionFraction(pos.x));
        return vec2(pos.x, interpolated[0] + pos.y * interpolated[1]);
    } else {
        return vec2(pos.x, facetPos.pos + pos.y * facetPos.height);
    }
}

float getSampleFacetHeight(vec2 pos) {
    SampleFacetPosition facetPos = getSampleFacetPos();

    if (!isFacetedSamples(facetPos)) {
        return 1.0;
    } else if (isInTransit()) {
        return mix(
            facetPos.height,
            facetPos.targetHeight,
            getTransitionFraction(pos.x));
    } else {
        return facetPos.height;
    }
}
`,xie=`/*
 * Based on concepts presented at:
 * https://webglfundamentals.org/webgl/lessons/webgl-picking.html
 * https://deck.gl/docs/developer-guide/custom-layers/picking
 */

flat out highp vec4 vPickingColor;

/**
 * Passes the unique id to the fragment shader as a color if picking is enabled.
 * Returns true if picking is enabled.
 */
bool setupPicking() {
    if (uPickingEnabled) {
#ifdef uniqueId_DEFINED
        int id = int(getScaled_uniqueId());
        // TODO: Take the sign bit into account
        vPickingColor = vec4(
            ivec4(id >> 0, id >> 8, id >> 16, 0xFF) & 0xFF
        ) / float(0xFF);
#else
        vPickingColor = vec4(1.0);
#endif
        return true;
    }
    return false;
}
`,Die=`flat in highp vec4 vPickingColor;
`;const Dv=Symbol("cacheMap");function Mf(n,e,t){let i=Jm(n).get(e);return i===void 0&&(i=t(e),Jm(n).set(e,i)),i}function x7(n,e){Jm(n).delete(e)}function Lv(n,e){const t=Jm(n);for(const i of t.keys())i.startsWith(e)&&t.delete(i);Jm(n).delete(e)}function D7(n){n[Dv]=new Map}function Jm(n){return n[Dv]||D7(n),n[Dv]}function Lie(n,e,t,i){const s=pi(n)?n:n.name,r=!pi(n)&&n.extent||[0,1];if(t===void 0&&!pi(n)&&(t=n.count),s){const o=jN(s);if(Cs(o)){const a=k7(o,{extent:r,count:t});return n1(e,{minMag:e.LINEAR,format:e.RGB,height:1,wrap:e.CLAMP_TO_EDGE},a,i)}else{if(Dr(o))return L7(o,e);throw new Error("Unknown scheme: "+s)}}}function kie(n,e="rgb",t,i){const s=Wy(n,pi(e)?e:e.type,pi(e)?void 0:e.gamma),r=k7(s);return n1(t,{minMag:t.LINEAR,format:t.RGB,height:1,wrap:t.CLAMP_TO_EDGE},r,i)}function Eie(n,e,t,i){const s=Math.max(n.length,t||0),r=new Float32Array(s);for(let o=0;o<s;o++)r[o]=n[o%n.length];return n1(e,{minMag:e.NEAREST,format:e.RED,internalFormat:e.R32F,height:1},r,i)}function L7(n,e,t,i){const s=E7(n,t);return n1(e,{minMag:e.NEAREST,format:e.RGB,height:1},s,i)}function k7(n,{extent:e=[0,1],reverse:t=!1,count:i=256}={}){const s=e[0],r=_g(e)-s,o=Rm(i).map(a=>a/(i-1)).map(a=>s+a/r).map(n);return t&&o.reverse(),E7(o)}function E7(n,e){const t=Math.max(n.length,e||0),i=new Uint8Array(t*3);for(let s=0;s<t;s++){const r=Jh(n[s%n.length]).rgb();i[s*3+0]=r.r,i[s*3+1]=r.g,i[s*3+2]=r.b}return i}class Iie{constructor(e,t){this._container=e,this._sizeSource=t,this._shaderCache=new Map,this._listeners=[],this.rangeTextures=new WeakMap;const i=document.createElement("canvas");e.appendChild(i);const s=nie(i,{antialias:!0,depth:!1,premultipliedAlpha:!0});if(!s)throw new Error("Unable to initialize WebGL. Your browser or machine may not support it.");if(!vg(s))throw new Error("Your web browser does not support WebGL 2.0. Chrome, Firefox, and Safari Tech Preview should work.");C7(s),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),this.canvas=i,this.gl=s,this._pickingAttachmentOptions=[{format:s.RGBA,type:s.UNSIGNED_BYTE,minMag:s.LINEAR,wrap:s.CLAMP_TO_EDGE}],this._pickingBufferInfo=Xte(s,this._pickingAttachmentOptions),s.bindFramebuffer(s.FRAMEBUFFER,null),this.adjustGl(),this._resizeObserver=new ResizeObserver(r=>{this.invalidateSize(),this._emit("resize")}),this._resizeObserver.observe(this._container),this._updateDpr()}invalidateSize(){this._logicalCanvasSize=void 0,this._updateDpr(),this.adjustGl()}_updateDpr(){this.dpr=window.devicePixelRatio}compileShader(e,t){const i="#version 300 es",s="precision mediump float;";Dr(t)&&(t=t.join(`

`));const r=this.gl,o=t.replaceAll(/ {2,}|^\s*\/\/.*$/gm,"");let a=this._shaderCache.get(o);if(!a){const l=[i,s,t].join(`

`);a=r.createShader(e),r.shaderSource(a,l),r.compileShader(a),this._shaderCache.set(o,a)}return a}adjustGl(){const e=this.getLogicalCanvasSize();this.canvas.style.width=`${e.width}px`,this.canvas.style.height=`${e.height}px`;const t=this.getPhysicalCanvasSize(e);this.canvas.width=t.width,this.canvas.height=t.height,Qte(this.gl,this._pickingBufferInfo,this._pickingAttachmentOptions)}finalize(){this._resizeObserver.unobserve(this._container),this.canvas.remove()}getPhysicalCanvasSize(e){return e=e||this.getLogicalCanvasSize(),{width:e.width*this.dpr,height:e.height*this.dpr}}getLogicalCanvasSize(){var r,o,a,l;if(this._logicalCanvasSize)return this._logicalCanvasSize;const e=(o=(r=this._sizeSource)==null?void 0:r.call(this))!=null?o:{width:void 0,height:void 0},t=window.getComputedStyle(this._container,null),i=(a=e.width)!=null?a:this._container.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight),s=(l=e.height)!=null?l:this._container.clientHeight-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom);return this._logicalCanvasSize={width:i,height:s},this._logicalCanvasSize}addEventListener(e,t){this._listeners.push({type:e,listener:t})}_emit(e){for(const t of this._listeners)t.type===e&&t.listener()}readPickingPixel(e,t){const i=this.gl;e*=this.dpr,t*=this.dpr;const s=this.getPhysicalCanvasSize().height,r=new Uint8Array(4);return i.bindFramebuffer(i.FRAMEBUFFER,this._pickingBufferInfo.framebuffer),i.readPixels(e,s-t-1,1,1,i.RGBA,i.UNSIGNED_BYTE,r),i.bindFramebuffer(i.FRAMEBUFFER,null),r}clearAll(){const e=this.gl,{width:t,height:i}=this.getPhysicalCanvasSize();e.viewport(0,0,t,i),e.disable(e.SCISSOR_TEST),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)}createRangeTexture(e,t=!1){const i=this.rangeTextures.get(e);if(!t&&i)return;function s(o,a){return eu(a.type)?a.domain().length:a.type=="threshold"?a.domain().length+1:a.type=="quantize"||a.type=="quantile"?o!=null?o:4:o}const r=e.channel;if(Ah(r)){const o=e.getScaleProps(),a=e.getScale();let l;if(o.scheme){let c=pi(o.scheme)?void 0:o.scheme.count;c=s(c,a),l=Lie(o.scheme,this.gl,c,i)}else{const c=a.range();Vy(a.type)?l=kie(c,o.interpolate,this.gl,i):l=L7(c,this.gl,a.domain().length,i)}this.rangeTextures.set(e,l)}else{const o=e.getScale();if(o.type==="ordinal"||Ld(o.type)){const a=jy(r)?y6(r):c=>c,l=e.getScale().range();this.rangeTextures.set(e,Eie(l.map(a),this.gl,o.domain().length,i))}}}}function Tie(n,e="",t=0){const i=/ERROR:\s*\d+:(\d+)/gi,s=[...e.matchAll(i)],r=new Map(s.map((o,a)=>{const l=parseInt(o[1]),c=s[a+1],h=c?c.index:e.length,u=e.substring(o.index,h);return[l-1,u]}));return n.split(`
`).map((o,a)=>{const l=r.get(a);return`${a+1+t}: ${o}${l?`

^^^ ${l}`:""}`}).join(`
`)}function Nie(n,e,t){const i=n.createProgram();n.attachShader(i,e),n.attachShader(i,t),n.linkProgram(i);function s(){let r,o;if(!n.getProgramParameter(i,n.LINK_STATUS)){r=n.getProgramInfoLog(i);for(const l of[e,t])n.getShaderParameter(l,n.COMPILE_STATUS)||(r=n.getShaderInfoLog(l),o=Tie(n.getShaderSource(l),r,0)+`
Error compiling: ${r}`,n.deleteShader(l));n.deleteProgram(i)}if(r)return{message:r,detail:o}}return{program:i,getProgramErrors:s}}function n1(n,e,t,i){return i?$6(n,i,t,e):i=Qm(n,as(Ae({},e),{src:t})),i}function Aie(...n){const e={get(t,i,s){for(const r of n){const a=r()[i];if(a!==void 0)return a}},has(t,i,s){for(const r of n){const o=r();if(i in o)return!0}return!1}};return new Proxy({},e)}function Mie(n){return pi(n)||ys(n)||Sy(n)}const Rie="SAMPLE_FACET_UNIFORM",QO="SAMPLE_FACET_TEXTURE";class E0{constructor(e){this.unitView=e,this.encoders=void 0,this.bufferInfo=void 0,this.programInfo=void 0,this.vertexArrayInfo=void 0,this.domainUniformInfo=void 0,this.viewUniformInfo=void 0,this.rangeMap=new Oie,this.defaultProperties={get clip(){return["x","y"].map(t=>e.getScaleResolution(t)).some(t=>{var i;return(i=t==null?void 0:t.isZoomable())!=null?i:!1})},xOffset:0,yOffset:0,minBufferSize:0},this.properties=Aie(typeof this.unitView.spec.mark=="object"?()=>this.unitView.spec.mark:()=>({}),()=>this.defaultProperties)}get opaque(){return!1}getAttributes(){throw new Error("Not implemented!")}getSupportedChannels(){return["sample","facetIndex","x","y","color","opacity","search","uniqueId"]}getDefaultEncoding(){const e={sample:void 0,uniqueId:void 0};return this.isPickingParticipant()&&(e.uniqueId={field:"_uniqueId"}),e}fixEncoding(e){return e}get encoding(){return Mf(this,"encoding",()=>{const e=this.getDefaultEncoding(),t=this.unitView.getEncoding(),i=o=>{const a=this.properties[o];return Mie(a)&&{value:a}},s=Object.fromEntries(this.getSupportedChannels().map(o=>[o,i(o)]).filter(o=>o[1].value!==void 0)),r=this.fixEncoding(Ae(Ae(Ae({},e),s),t));for(const o of Object.keys(r))this.getSupportedChannels().includes(o)||delete r[o];return r})}getContext(){return this.unitView.context}getType(){return this.unitView.getMarkType()}initializeData(){}initializeEncoders(){this.encoders=cQ(this)}async initializeGraphics(){}updateGraphicsData(){}getSampleFacetMode(){if(this.encoders.facetIndex)return QO;if(this.unitView.getFacetAccessor())return Rie}createAndLinkShaders(e,t,i=[]){const s=this.getAttributes();i.push("// view: "+this.unitView.getPathString()),this.domainUniforms=[];let r=[];const o=this.getSampleFacetMode();o&&i.push(`#define ${o}`);for(const d of s){let f;if(d in this.encoding)f=d;else continue;const g=this.encoding[f];if(!!g)if(io(g))r.push(lie(f,g.value));else{const p=br(g)&&g.resolutionChannel||f,_=this.unitView.getScaleResolution(p).getScale(),v=cie(f,_,g);r.push(v.glsl),v.domainUniform&&this.domainUniforms.push(v.domainUniform)}}const a=this.domainUniforms.length?`layout(std140) uniform Domains {
`+this.domainUniforms.map(d=>`    ${d}
`).join("")+`};

`:"",c=[`precision highp float;
`,...i,XO,yie,a,...r,Sie,xie,e],h=[...i,XO,Die,t],u=this.gl;this.programStatus=Nie(u,this.glHelper.compileShader(u.VERTEX_SHADER,c),this.glHelper.compileShader(u.FRAGMENT_SHADER,h))}finalizeGraphicsInitialization(){const e=this.programStatus.getProgramErrors();if(e){e.detail&&console.warn(e.detail);const t=new Error("Cannot create shader program: "+e.message);throw t.view=this.unitView,t}this.programInfo=Rte(this.gl,this.programStatus.program),delete this.programStatus,this.domainUniforms.length&&(this.domainUniformInfo=HO(this.gl,this.programInfo,"Domains")),this.viewUniformInfo=HO(this.gl,this.programInfo,"View"),this.gl.useProgram(this.programInfo.program),this._setDatums(),Bs(this.programInfo,{uSampleFacet:[0,1,0,1],uTransitionOffset:0})}_setDatums(){for(const[e,t]of Object.entries(this.encoding))if(S0(t)){const i=this.encoders[e],s=i.indexer?i.indexer(t.datum):Aw(i.scale.type)?_A(+t.datum):+t.datum;Bs(this.programInfo,{[mA+e]:s})}}deleteGraphicsData(){if(this.bufferInfo){const e=this.gl;for(let t=0;t<8;t++)e.disableVertexAttribArray(t);Object.values(this.bufferInfo.attribs).forEach(t=>this.gl.deleteBuffer(t.buffer)),this.bufferInfo.indices&&this.gl.deleteBuffer(this.bufferInfo.indices),this.bufferInfo=void 0}}updateBufferInfo(e){if(this.gl.bindVertexArray(null),this.bufferInfo&&e.vertexCount<=this.bufferInfo.allocatedVertices)for(const[t,i]of Object.entries(e.arrays))i.data&&qQ(this.gl,this.bufferInfo.attribs[t],i.data,0);else this.deleteGraphicsData(),this.bufferInfo=YQ(this.gl,e.arrays,{numElements:e.vertexCount}),this.bufferInfo.allocatedVertices=e.allocatedVertices,this.vertexArrayInfo=void 0}get glHelper(){return this.getContext().glHelper}get gl(){return this.glHelper.gl}onBeforeSampleAnimation(){}onAfterSampleAnimation(){}isReady(){return this.bufferInfo&&this.programInfo}isPickingParticipant(){if(this.properties.tooltip===null)return!1;for(const e of this.unitView.getAncestors())if(!e.isPickingSupported())return!1;return!0}prepareRender(e){var o;const t=this.glHelper,i=this.gl,s=[];if(s.push(()=>{this.vertexArrayInfo||(this.vertexArrayInfo=Jte(this.gl,this.programInfo,this.bufferInfo)),i.useProgram(this.programInfo.program)}),this.domainUniformInfo){for(const[a,l]of Object.entries(this.domainUniformInfo.setters)){const c=a.substring(y7.length),h=this.encoding[c],u=br(h)&&h.resolutionChannel||c,d=this.unitView.getScaleResolution(u);if(d){const f=d.getScale();s.push(()=>{const g=eu(f.type)?[0,f.domain().length]:f.domain();l(Aw(f.type)?die(g):g)})}}s.push(()=>$O(i,this.programInfo,this.domainUniformInfo))}for(const[a,l]of Object.entries(this.encoding))if(br(l)){const c=br(l)&&l.resolutionChannel||a,h=this.unitView.getScaleResolution(c),u=t.rangeTextures.get(h);u&&s.push(()=>Bs(this.programInfo,{[nk+a]:u}))}this.getSampleFacetMode()==QO&&s.push(()=>{let a;for(const l of this.unitView.getAncestors())if(a=l.getSampleFacetTexture(),a)break;if(!a)throw new Error("No facet texture available. This is bug.");Bs(this.programInfo,{uSampleFacetTexture:a})});const r=((o=e.picking)!=null?o:!1)&&this.isPickingParticipant();return s.push(()=>UO(this.viewUniformInfo,{uViewOpacity:this.unitView.getEffectiveOpacity(),uPickingEnabled:r})),this.opaque||e.picking?s.push(()=>i.disable(i.BLEND)):s.push(()=>i.enable(i.BLEND)),s}prepareSampleFacetRendering(e){const t=e.sampleFacetRenderingOptions,i=this.programInfo.uniformSetters.uSampleFacet;if(t&&i){const s=t.locSize?t.locSize.location:0,r=t.locSize?t.locSize.size:1;if(s>1||s+r<0)return!1;const o=t.targetLocSize?t.targetLocSize.location:s,a=t.targetLocSize?t.targetLocSize.size:r;this.gl.uniform4f(i.location,s,r,o,a)}return!0}render(e){}createRenderCallback(e,t){var h;const i=this;let s;const r=(h=this.unitView.getScaleResolution("x"))==null?void 0:h.getScale(),o=r&&ur(r.type),a=["index","locus"].includes(r==null?void 0:r.type)?-1:0,l=[0,0];s=u=>{if(o&&u.xIndex){const d=r.domain(),f=u.xIndex(d[0]+a,d[1],l),g=f[0],p=f[1]-g;p>0&&e(g,p)}else e(u.offset,u.count)};const c=this.rangeMap.get(t.facetId);return t.sampleFacetRenderingOptions?function(){c.count&&i.prepareSampleFacetRendering(t)&&s(c)}:function(){c.count&&s(c)}}setViewport(e,t){const i=this.glHelper.dpr,s=this.gl,r=this.properties,o=this.glHelper.getLogicalCanvasSize(),a=.5,l=(r.xOffset||0)+a,c=(r.yOffset||0)+a;let h,u=e;if(r.clip||t){let d=0,f=0,g;t?(u=r.clip?e.intersect(t):t,g=[e.width/u.width,e.height/u.height],f=Math.max(0,e.y2-t.y2),d=Math.max(0,e.x2-t.x2)):g=[1,1];const p=[e.x,o.height-u.y2,Math.max(0,u.width),Math.max(0,u.height)].map(w=>w*i),_=p.map(w=>Math.floor(w)),[v,b]=p.map((w,C)=>w-_[C]);s.viewport(..._),s.scissor(..._),s.enable(s.SCISSOR_TEST),h={uViewOffset:[(l+d+v)/u.width,-(c+f-b)/u.height],uViewScale:g}}else s.viewport(0,0,o.width*i,o.height*i),s.disable(s.SCISSOR_TEST),h={uViewOffset:[(e.x+l)/o.width,(o.height-e.y-c-e.height)/o.height],uViewScale:[e.width/o.width,e.height/o.height]};return UO(this.viewUniformInfo,as(Ae({},h),{uViewportSize:[e.width,e.height],uDevicePixelRatio:this.glHelper.dpr})),$O(this.gl,this.programInfo,this.viewUniformInfo),u.height>0&&u.width>0}findDatumAt(e,t){}}class Oie extends Yh{constructor(){super([],JSON.stringify)}get(e){let t=super.get(e);return t===void 0&&(t={offset:0,count:0,xIndex:void 0},super.set(e,t)),t}migrateEntries(e){for(const[t,i]of e.entries())Object.assign(this.get(t),i)}}function ok(n,e){var r;const t=fQ(e);let i=n[e]&&Ae({},n[e]),s=n[t]&&Ae({},n[t]);if(!(io(i)||io(s))){if(i){if(!br(n[e]))return;if(s){if(i.type!="quantitative"){const o=(1-(i.band||1))/2;i.band=o,s.band=-o}}else if(i.type=="quantitative")s={datum:0};else{s=Ae({},i);const o=(1-((r=i.band)!=null?r:1))/2;i.band=0+o,s.band=1-o}}else i={value:0},s={value:1};n[e]=i,n[t]=s}}function I7(n,e){n.stroke||(e?n.stroke={value:null}:n.stroke=Ae({resolutionChannel:"color"},n.color)),io(n.stroke)&&n.stroke.value===null&&(n.strokeWidth={value:0}),n.strokeOpacity||(n.strokeOpacity=Ae({resolutionChannel:"opacity"},n.opacity))}function T7(n,e){io(n.fill)&&n.fill.value===null?n.fillOpacity={value:0}:n.fill||(n.fill=Ae({resolutionChannel:"color"},n.color),!e&&!n.fillOpacity&&(n.fillOpacity={value:0})),n.fillOpacity||(e?n.fillOpacity=Ae({resolutionChannel:"opacity"},n.opacity):n.fillOpacity={value:0})}class Fie extends E0{constructor(e){super(e),Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x2:void 0,y2:void 0,filled:!0,color:"#4c78a8",opacity:1,strokeWidth:3,cornerRadius:0,minWidth:.5,minHeight:.5,minOpacity:1,tessellationZoomThreshold:10,tessellationTiles:35}))}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","fill","stroke","fillOpacity","strokeOpacity","strokeWidth"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","fill","stroke","fillOpacity","strokeOpacity","strokeWidth"]}get opaque(){return Mf(this,"opaque",()=>!this._isRoundedCorners()&&!this._isStroked()&&io(this.encoding.fillOpacity)&&this.encoding.fillOpacity.value==1&&this.properties.minOpacity==1)&&this.unitView.getEffectiveOpacity()==1}fixEncoding(e){return ok(e,"x"),ok(e,"y"),I7(e,this.properties.filled),T7(e,this.properties.filled),delete e.color,delete e.opacity,e}onBeforeSampleAnimation(){}onAfterSampleAnimation(){}_isRoundedCorners(){return["","TopLeft","TopRight","BottomLeft","BottomRight"].map(e=>"cornerRadius"+e).some(e=>this.properties[e]>0)}_isStroked(){const e=this.encoding.strokeWidth;return!(io(e)&&!e.value)}async initializeGraphics(){await super.initializeGraphics();const e=[];this._isRoundedCorners()&&e.push("ROUNDED_CORNERS"),this._isStroked()&&e.push("STROKED"),this.createAndLinkShaders(sie,rie,e.map(t=>"#define "+t))}finalizeGraphicsInitialization(){var t,i,s,r;super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;Bs(this.programInfo,{uMinSize:[e.minWidth,e.minHeight],uMinOpacity:e.minOpacity,uCornerRadii:[(t=e.cornerRadiusTopRight)!=null?t:e.cornerRadius,(i=e.cornerRadiusBottomRight)!=null?i:e.cornerRadius,(s=e.cornerRadiusTopLeft)!=null?s:e.cornerRadius,(r=e.cornerRadiusBottomLeft)!=null?r:e.cornerRadius]})}updateGraphicsData(){const e=this.unitView.getCollector(),t=e.getItemCount(),i=new _ie({encoders:this.encoders,attributes:this.getAttributes(),numItems:t});i.addBatches(e.facetBatches);const s=i.toArrays();this.rangeMap.migrateEntries(s.rangeMap),this.updateBufferInfo(s)}prepareRender(e){const t=super.prepareRender(e);return t.push(()=>Cg(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((i,s)=>{L0(t,this.vertexArrayInfo,t.TRIANGLE_STRIP,s,i)},e)}findDatumAt(e,t){e=Go(e);const i=this.encoders,s=this.unitView.getCollector().facetBatches.get(e),r=i.x.accessor,o=i.x2.accessor;if(s)return s.find(a=>t>=r(a)&&t<o(a))}}var Pie=`/**
 * The stroke should only grow inwards, e.g, the diameter/outline is not affected by the stroke width.
 * Thus, a point that has a zero size has no visible stroke. This allows strokes to be used with
 * geometric zoom, etc.
 */
uniform bool uInwardStroke;

/** Maximum size of the largest point as the fraction of the height of the (faceted) view */
uniform lowp float uMaxRelativePointDiameter;

/** Scale factor for geometric zoom */
uniform float uScaleFactor;

/** The size of the largest point in the data */
uniform float uMaxPointSize;

uniform float uZoomLevel;
uniform float uSemanticThreshold;

flat out float vRadius;
flat out float vRadiusWithPadding;
flat out lowp vec4 vFillColor;
flat out lowp vec4 vStrokeColor;
flat out lowp float vShape;
flat out lowp float vHalfStrokeWidth;
flat out mat2 vRotationMatrix;


float computeSemanticThresholdFactor() {
    // TODO: add smooth transition
    return getScaled_semanticScore() >= uSemanticThreshold ? 1.0 : 0.0;
}

/**
 * Computes a scaling factor for the points in a sample-faceted view.
 */
float getDownscaleFactor(vec2 pos) {
    if (!isFacetedSamples()) {
        return 1.0;
    }

    float sampleFacetHeight = getSampleFacetHeight(pos);
    float maxPointDiameter = sqrt(uMaxPointSize);

    float factor = sampleFacetHeight *
        uViewportSize.y *
        uMaxRelativePointDiameter;

    return clamp(0.0, maxPointDiameter, factor) / maxPointDiameter;
}

// TODO: Move this into common.glsl or something
vec2 getDxDy() {
#if defined(dx_DEFINED) || defined(dy_DEFINED)
    return vec2(getScaled_dx(), getScaled_dy()) / uViewportSize;
#else
    return vec2(0.0, 0.0);
#endif
}

void main(void) {

    float semanticThresholdFactor = computeSemanticThresholdFactor();
    if (semanticThresholdFactor <= 0.0) {
        gl_PointSize = 0.0;
        // Place the vertex outside the viewport. The default (0, 0) makes this super-slow
        // on Apple Silicon. Probably related to the tile-based GPU architecture.
        gl_Position = vec4(100.0, 0.0, 0.0, 0.0);
        // Exit early. MAY prevent some unnecessary calculations.
        return;
    }

    float size = getScaled_size();
    vec2 pos = vec2(getScaled_x(), getScaled_y()) + getDxDy();

    gl_Position = unitToNdc(applySampleFacet(pos));

    float strokeWidth = getScaled_strokeWidth();

    float diameter = sqrt(size) *
        uScaleFactor *
        semanticThresholdFactor *
        getDownscaleFactor(pos);

    // Clamp minimum size and adjust opacity instead. Yields more pleasing result,
    // no flickering etc.
    float opacity = uViewOpacity;
	if (strokeWidth <= 0.0 || uInwardStroke) {
		float minDiameter = 1.0 / uDevicePixelRatio;
		if (diameter < minDiameter) {
			// We do some "cheap" gamma correction here. It breaks on dark background, though.
			// First we take a square of the size and then apply "gamma" of 1.5.
			opacity *= pow(diameter / minDiameter, 2.5);
			diameter = minDiameter;
		}
	}

	float fillOpa = getScaled_fillOpacity() * opacity;
	float strokeOpa = getScaled_strokeOpacity() * opacity;

    vShape = getScaled_shape();

	// Circle doesn't have sharp corners. Do some special optimizations to minimize the point size.
	bool circle = vShape == 0.0;

	float angleInDegrees = getScaled_angle();
	float angle = -angleInDegrees * PI / 180.0;
    float sinTheta = sin(angle);
    float cosTheta = cos(angle);
    vRotationMatrix = mat2(cosTheta, sinTheta, -sinTheta, cosTheta);
	float roomForRotation = circle ? 1.0 : sin(mod(angle, PI / 2.0) + PI / 4.0) / sin(PI / 4.0);

	float aaPadding = 1.0 / uDevicePixelRatio;
	float rotationPadding = (diameter * roomForRotation) - diameter;
	// sqrt(3.0) ensures that the angles of equilateral triangles have enough room
	float strokePadding = uInwardStroke ? 0.0 : strokeWidth * (circle ? 1.0 : sqrt(3.0));
	float padding = rotationPadding + strokePadding + aaPadding;
    gl_PointSize = (diameter + padding) * uDevicePixelRatio;

	vRadius = diameter / 2.0;
	vRadiusWithPadding = vRadius + padding / 2.0;

    vHalfStrokeWidth = strokeWidth / 2.0;

    vFillColor = vec4(getScaled_fill() * fillOpa, fillOpa);
    vStrokeColor = vec4(getScaled_stroke() * strokeOpa, strokeOpa);

    setupPicking();
}
`,Bie=`const lowp vec4 white = vec4(1.0);
const lowp vec4 black = vec4(0.0, 0.0, 0.0, 1.0);

uniform bool uInwardStroke;
uniform float uGradientStrength;

flat in float vRadius;
flat in float vRadiusWithPadding;

flat in lowp vec4 vFillColor;
flat in lowp vec4 vStrokeColor;
flat in lowp float vShape;
flat in lowp float vHalfStrokeWidth;

flat in mat2 vRotationMatrix;

out lowp vec4 fragColor;

const float CIRCLE = 0.0;
const float SQUARE = 1.0;
const float TRIANGLE_UP = 2.0;
const float CROSS = 3.0;
const float DIAMOND = 4.0;
const float TRIANGLE_DOWN = 5.0;
const float TRIANGLE_RIGHT = 6.0;
const float TRIANGLE_LEFT = 7.0;


// The distance functions are inspired by:
// http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
// However, these are not true distance functions, because the corners need to be sharp.

float circle(vec2 p, float r) {
    return length(p) - r;
}

float square(vec2 p, float r) {
    p = abs(p);
    return max(p.x, p.y) - r;
}

float equilateralTriangle(vec2 p, float r, bool flip, bool swap) {
    if (swap) {
        p.xy = p.yx;
    }
    if (flip) {
        p.y = -p.y;
    }

    float k = sqrt(3.0);
    float kr = k * r;
    //p.y -= kr * 2.0 / 3.0;
    p.y -= kr / 2.0;
    return max((abs(p.x) * k + p.y) / 2.0, -p.y - kr);
}

float crossShape(vec2 p, float r) {
    p = abs(p);

	vec2 b = vec2(0.4, 1.0) * r;
    vec2 v = abs(p) - b.xy;
    vec2 h = abs(p) - b.yx;
    return min(max(v.x, v.y), max(h.x, h.y));
}

float diamond(vec2 p, float r) {
    p = abs(p);
    return (max(abs(p.x - p.y), abs(p.x + p.y)) - r) / sqrt(2.0);
}

void main() {
    float d;

	/** Normalized point coord */
    vec2 p = vRotationMatrix * (2.0 * gl_PointCoord - 1.0) * vRadiusWithPadding;
	float r = vRadius;

    // We could also use textures here. Could even be faster, because we have plenty of branching here.
    if (vShape == CIRCLE) {
        d = circle(p, r);

    } else if (vShape == SQUARE) {
        d = square(p, r);

    } else if (vShape == TRIANGLE_UP) {
        d = equilateralTriangle(p, r, true, false);

    } else if (vShape == CROSS) {
        d = crossShape(p, r);

    } else if (vShape == DIAMOND) {
        d = diamond(p, r);

    } else if (vShape == TRIANGLE_DOWN) {
        d = equilateralTriangle(p, r, false, false);

    } else if (vShape == TRIANGLE_RIGHT) {
        d = equilateralTriangle(p, r, false, true);

    } else if (vShape == TRIANGLE_LEFT) {
        d = equilateralTriangle(p, r, true, true);

    } else {
        d = 0.0;
    }

	if (!uPickingEnabled) {
		lowp vec4 fillColor = mix(vFillColor, white, -d * uGradientStrength / vRadius);

		fragColor = distanceToColor(
			d + (uInwardStroke ? vHalfStrokeWidth : 0.0),
			fillColor,
			vStrokeColor,
			vHalfStrokeWidth);

	} else if (d - vHalfStrokeWidth <= 0.0) {
        fragColor = vPickingColor;

	} else {
		discard;
    }
}

`;const dl=1<<0,Mc=1<<1,Vie={};class Hi{get behavior(){return 0}constructor(){this.children=[],this.parent=void 0,this.completed=!1}reset(){this.completed=!1;for(const e of this.children)e.reset()}initialize(){}_updatePropagator(){this._propagate=Function("children",Rm(this.children.length).map(e=>`const child${e} = children[${e}];`).join(`
`)+`return function propagate(datum) {${Rm(this.children.length).map(e=>`child${e}.handle(datum);`).join(`
`)}}`)(this.children)}setParent(e){this.parent=e}addChild(e){if(e.parent)throw new Error("Cannot add the child! It already has a parent.");return this.children.push(e),e.setParent(this),this._updatePropagator(),this}adopt(e){e.parent&&e.parent.removeChild(e),this.addChild(e)}adoptChildrenOf(e){for(const t of e.children)this.adopt(t)}insertAsParent(e){if(this.isRoot())throw new Error("Cannot insert a new parent for a root node!");e.parent=this.parent,this.parent.children[this.parent.children.indexOf(this)]=e,this.parent._updatePropagator(),this.parent=void 0,e.addChild(this)}removeChild(e){const t=this.children.indexOf(e);if(t>-1)this.children.splice(t,1),e.parent=void 0,this._updatePropagator();else throw new Error("Trying to remove an unknown child node!")}excise(){if(this.isRoot())throw new Error("Cannot excise root node!");if(this.isTerminal())this.parent.removeChild(this);else if(this.children.length==1){const e=this.children[0];e.setParent(this.parent),this.parent.children[this.parent.children.indexOf(this)]=e,this.parent._updatePropagator(),this.setParent(void 0),this.children.length=0}else throw new Error("Cannot excise a node that has multiple children!")}isRoot(){return!this.parent}isBranching(){return this.children.length>1}isTerminal(){return this.children.length==0}visit(e){e(this);for(const t of this.children)t.visit(e);e.afterChildren&&e.afterChildren(this)}subtreeToString(e=0){var i;const t=this.children.map(s=>s.subtreeToString(e+1)).join("");return" ".repeat(e*2)+"* "+((i=/^class ([A-Za-z0-9_]+)/.exec(""+this.constructor))==null?void 0:i[1])+`
`+t}getGlobalObject(){return this.parent?this.parent.getGlobalObject():Vie}handle(e){this._propagate(e)}complete(){this.completed=!0;for(const e of this.children)e.complete()}beginBatch(e){for(const t of this.children)t.beginBatch(e)}_propagate(e){}}function N7(n){return n.type=="file"}function Wie(n){return n.type=="facet"}class A7 extends Hi{constructor(e){super(),this.k=e.size||500,this.reset()}reset(){super.reset(),this.reservoir=[],this.W=void 0,this.ingester=this._initialIngester}_initialIngester(e){this.reservoir.push(e),this.reservoir.length==this.k&&(this.W=Math.exp(Math.log(Math.random())/this.k),this.i=this.k,this.next=this.i,this.ingester=this._finalIngester,this._setNextStop())}_finalIngester(e){++this.i==this.next&&(this.reservoir[Math.floor(Math.random()*this.k)]=e,this.W*=Math.exp(Math.log(Math.random())/this.k),this._setNextStop())}_setNextStop(){this.next+=Math.floor(Math.log(Math.random())/Math.log(1-this.W))+1}handle(e){this.ingester(e)}complete(){for(const e of this.reservoir)this._propagate(e);super.complete()}}function zie(n,e,t){const i=new A7({type:"sample",size:n});for(const s of e)i.handle(t(s));return i.complete(),i.reservoir}const Hie={};class $ie extends E0{constructor(e){super(e),Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x:.5,y:.5,color:"#4c78a8",filled:!0,opacity:1,size:100,semanticScore:0,shape:"circle",strokeWidth:2,fillGradientStrength:0,dx:0,dy:0,angle:0,sampleFacetPadding:.1,semanticZoomFraction:.02}))}getAttributes(){return["inwardStroke","uniqueId","facetIndex","x","y","size","semanticScore","shape","strokeWidth","gradientStrength","dx","dy","fill","stroke","fillOpacity","strokeOpacity","angle"]}getSupportedChannels(){return[...super.getSupportedChannels(),"size","semanticScore","shape","strokeWidth","dx","dy","fill","stroke","fillOpacity","strokeOpacity","angle"]}getDefaultEncoding(){return Ae(Ae({},super.getDefaultEncoding()),Hie)}fixEncoding(e){return I7(e,this.properties.filled),T7(e,this.properties.filled),delete e.color,delete e.opacity,e}initializeData(){super.initializeData();const e=this.unitView.getAccessor("semanticScore");e&&(this.sampledSemanticScores=Float32Array.from(zie(1e4,this.unitView.getCollector().getData(),e)),this.sampledSemanticScores.sort((t,i)=>t-i))}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(Pie,Bie)}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;Bs(this.programInfo,{uInwardStroke:e.inwardStroke,uGradientStrength:e.fillGradientStrength,uMaxRelativePointDiameter:1-2*e.sampleFacetPadding})}updateGraphicsData(){const e=this.unitView.getCollector(),t=e.getItemCount(),i=new vie({encoders:this.encoders,attributes:this.getAttributes(),numItems:Math.max(t,this.properties.minBufferSize||0)});i.addBatches(e.facetBatches);const s=i.toArrays();this.rangeMap.migrateEntries(s.rangeMap),this.updateBufferInfo(s)}_getGeometricScaleFactor(){const e=Math.pow(2,this.properties.geometricZoomBound||0);return Math.pow(Math.min(1,this.unitView.getZoomLevel()/e),1/3)}_getMaxPointSize(){const e=this.encoders.size;return e.constant?e(null):e.scale.range().reduce((t,i)=>Math.max(t,i))}getSemanticThreshold(){if(this.sampledSemanticScores){const e=Math.max(0,1-this.properties.semanticZoomFraction*this.unitView.getZoomLevel());if(e<=0)return-1/0;if(e>=1)return 1/0;{const t=this.sampledSemanticScores;return KB(t,e)}}else return-1}prepareRender(e){const t=super.prepareRender(e);return t.push(()=>Bs(this.programInfo,{uMaxPointSize:this._getMaxPointSize(),uScaleFactor:this._getGeometricScaleFactor(),uSemanticThreshold:this.getSemanticThreshold()})),t.push(()=>Cg(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((i,s)=>{s&&L0(t,this.vertexArrayInfo,t.POINTS,s,i)},e)}}var Uie=`// Line caps
const int BUTT = 0;
const int SQUARE = 1;
const int ROUND = 2;

/** Position along the rule */
in float pos;

/** Which side of the stroke: -0.5 or 0.5 */
in float side;

/** Minimum rule length in pixels */
uniform float uMinLength;

uniform mediump float uDashTextureSize;
uniform lowp int uStrokeCap;

flat out vec4 vColor;

/** Stroke width */
flat out float vSize;

/** The distance from the line center to the direction of normal in pixels */
out float vNormalLengthInPixels;

/** Distances from the line endings. Used for rendering the round caps and dashes */
out highp vec2 vPosInPixels;


void main(void) {
    float pixelSize = 1.0 / uDevicePixelRatio;

    // Stroke width in pixels
    float size = getScaled_size();
    float opacity = getScaled_opacity() * uViewOpacity;

    // Avoid artifacts in very thin lines by clamping the size and adjusting opacity respectively
    if (size < pixelSize) {
        opacity *= size / pixelSize;
        size = pixelSize;
    }

    vec2 a = applySampleFacet(vec2(getScaled_x(), getScaled_y()));
    vec2 b = applySampleFacet(vec2(getScaled_x2(), getScaled_y2()));

    vec2 tangent = b - a;

    float offset = 0.0;
    float relativeDiff = 0.0;
    if (uMinLength > 0.0 || uStrokeCap != BUTT) {
        float len = length(tangent * uViewportSize);

        // Elongate to reach the minimum length.
        // The length difference in pixels
        float diff = max(0.0, uMinLength - len);

        // Add line caps
        if (uStrokeCap != BUTT) {
            diff += size;
        }

        relativeDiff = diff / len;
        offset = relativeDiff * (pos - 0.5);
    }

    // Apply caps and minimum length by spreading the vertices along the tangent
    vec2 p = pos < 1.0
        ? a + tangent * (pos + offset)
        : b + tangent * offset;

    // Add an extra pixel to stroke width to accommodate edge antialiasing
    float aaPadding = pixelSize;

    // Extrude
    vec2 normal = normalize(vec2(-tangent.y, tangent.x) / uViewportSize);
    p += normal * side * (size + aaPadding) / uViewportSize;

    gl_Position = unitToNdc(p);

    vColor = vec4(getScaled_color() * opacity, opacity);
    vSize = size;
    vNormalLengthInPixels = side * (size + aaPadding);

    // TODO: Here's a precision problem that breaks round caps when zoomed in enough
    vPosInPixels = vec2(pos, (1.0 - pos)) * (1.0 + relativeDiff) * length(tangent * uViewportSize) -
        vec2(uStrokeCap != BUTT ? size / 2.0 : 0.0);
    
    setupPicking();
}
`,jie=`// Line ending
const int BUTT = 0;
const int SQUARE = 1;
const int ROUND = 2;

uniform sampler2D uDashTexture;
uniform float uDashTextureSize;
uniform float uStrokeDashOffset;
uniform lowp int uStrokeCap;

flat in vec4 vColor;
flat in float vSize;

/** Position on the rule along its length in pixels */
in vec2 vPosInPixels;
in float vNormalLengthInPixels;

out lowp vec4 fragColor;

void main(void) {
    float dpr = uDevicePixelRatio;

    float distanceFromEnd = -min(vPosInPixels[0], vPosInPixels[1]);
    float distance; // from the rule centerline or end
    if (distanceFromEnd > 0.0 && uStrokeCap == ROUND) {
        // round cap
        distance = length(vec2(distanceFromEnd, vNormalLengthInPixels));
    } else {
        distance = abs(vNormalLengthInPixels);
    }

    // Use a signed distance field to implement edge antialiasing
    float opacity = clamp(((vSize / 2.0 - distance) * dpr), -0.5, 0.5) + 0.5;

    if (uDashTextureSize > 0.0) {
        float pos = (vPosInPixels[0] + uStrokeDashOffset) * dpr;
        float floored = floor(pos);
        vec2 texelPositions = (floored + vec2(0.5, 1.5)) / dpr / uDashTextureSize;
      
        // Do antialiasing
        opacity *= mix(
            texture(uDashTexture, vec2(texelPositions[0], 0)).r,
            texture(uDashTexture, vec2(texelPositions[1], 0)).r,
            clamp((pos - floored), 0.0, 1.0));
    }

    fragColor = vColor * opacity;

    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
}
`;class qie extends E0{constructor(e){super(e),this.dashTextureSize=0,Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x2:void 0,y2:void 0,size:1,color:"black",opacity:1,minLength:0,strokeDash:null,strokeDashOffset:0,strokeCap:"butt"}))}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","size","color","opacity"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size"]}fixEncoding(e){if(!(e.x&&e.y&&e.x2&&e.y2))if(e.x&&e.x2&&!e.y)e.y={value:.5},e.y2=e.y;else if(e.y&&e.y2&&!e.x)e.x={value:.5},e.x2=e.x;else if(e.x&&!e.y)e.y={value:0},e.y2={value:1},e.x2=e.x;else if(e.y&&!e.x)e.x={value:0},e.x2={value:1},e.y2=e.y;else if(e.x&&e.y&&e.y2)e.x2=e.x;else if(e.y&&e.x&&e.x2)e.y2=e.y;else if(e.y&&e.x)if(!e.x2&&br(e.y)&&e.y.type=="quantitative")e.x2=e.x,e.y2={datum:0};else if(!e.y2&&br(e.x)&&e.x.type=="quantitative")e.y2=e.y,e.x2={datum:0};else throw new Error("A bug!");else throw new Error("Invalid x and y encodings for rule mark: "+JSON.stringify(e));return e}async initializeGraphics(){if(await super.initializeGraphics(),this.properties.strokeDash){const e=this.gl,t=Kie(this.properties.strokeDash);this.dashTexture=Qm(e,{mag:e.NEAREST,min:e.NEAREST,internalFormat:e.R8,format:e.RED,src:t,height:1}),this.dashTextureSize=t.length}this.createAndLinkShaders(Uie,jie)}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;Bs(this.programInfo,{uMinLength:e.minLength,uDashTextureSize:this.dashTextureSize,uStrokeCap:["butt","square","round"].indexOf(e.strokeCap)})}updateGraphicsData(){const e=this.unitView.getCollector(),t=e.getItemCount(),i=new bie({encoders:this.encoders,attributes:this.getAttributes(),numItems:Math.max(t,this.properties.minBufferSize||0)});i.addBatches(e.facetBatches);const s=i.toArrays();this.rangeMap.migrateEntries(s.rangeMap),this.updateBufferInfo(s)}prepareRender(e){const t=super.prepareRender(e);return this.dashTexture&&t.push(()=>Bs(this.programInfo,{uDashTexture:this.dashTexture,uStrokeDashOffset:this.properties.strokeDashOffset})),t.push(()=>Cg(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((i,s)=>L0(t,this.vertexArrayInfo,t.TRIANGLE_STRIP,s,i),e)}}function Kie(n){if(n.length==0||n.length%2||n.findIndex(r=>Math.round(r)!=r||r<1||r>1e3)>=0)throw new Error("Invalid stroke dash pattern: "+JSON.stringify(n));const e=n.reduce((r,o)=>r+o),t=new Uint8Array(e);let i=!0,s=0;for(let r of n){for(;r;)t[s++]=i&&255||0,r--;i=!i}return t}var Gie=`uniform float uSagittaScaleFactor;

/** Make very small arcs visible */
uniform float uMinSagittaLength;

in vec2 strip;

out vec4 vColor;

/** Stroke width */
out float vSize;

/** The distance from the line center to the direction of normal in pixels */
out float vNormalLengthInPixels;

void main(void) {
    float pixelSize = 1.0 / uDevicePixelRatio;
    float opacity = getScaled_opacity() * uViewOpacity;

    vec2 a = vec2(getScaled_x(), getScaled_y()) * uViewportSize;
    vec2 b = vec2(getScaled_x2(), getScaled_y2()) * uViewportSize;
    
    vec2 chordVector = b - a;
    vec2 unitChordVector = normalize(chordVector);
    vec2 chordNormal = vec2(-unitChordVector.y, unitChordVector.x);

    float sagitta = max(
        length(chordVector) / 2.0 * uSagittaScaleFactor,
        uMinSagittaLength
    );

    bool compress = false;
    if (compress) {
        // Work in progres...
        float maxSagittaLen = length(chordNormal * uViewportSize);
        float maxChordLen = length(unitChordVector * uViewportSize);

        float threshold = maxSagittaLen * 0.5;
        if (sagitta > threshold) {
            float m = (maxSagittaLen - threshold) / (maxChordLen - threshold);
            sagitta = (sagitta - threshold) * m + threshold;
        }
    }

    vec2 controlOffset = chordNormal * sagitta / 0.75;

    vec2 p1 = a;
    vec2 p2 = a + controlOffset;
    vec2 p3 = b + controlOffset;
    vec2 p4 = b;

    // Make segments shorter near the endpoints to make the tightly bent attachment points smoother
    float t = smoothstep(0.0, 1.0, strip.x);

    // https://stackoverflow.com/a/31317254/1547896
    vec2 C1 = p4 - 3.0 * p3 + 3.0 * p2 - p1;
    vec2 C2 = 3.0 * p3 - 6.0 * p2 + 3.0 * p1;
    vec2 C3 = 3.0 * p2 - 3.0 * p1;
    vec2 C4 = p1;

    vec2 p;
    // Skip computation at endpoints to maintain precision
    if (t == 0.0) {
        p = p1;
    } else if (t == 1.0) {
        p = p4;
    } else {
        p = C1*t*t*t + C2*t*t + C3*t + C4;
    }

    vec2 tangent = normalize(3.0*C1*t*t + 2.0*C2*t + C3);
    vec2 normal = vec2(-tangent.y, tangent.x);

    //p = applySampleFacet(p);

#ifdef size2_DEFINED
    float mixedSize = mix(getScaled_size(), getScaled_size2(), t);
#else
    float mixedSize = getScaled_size();
#endif

    // Avoid artifacts in very thin lines by clamping the size and adjusting opacity respectively
    if (mixedSize < pixelSize) {
        opacity *= mixedSize / pixelSize;
        mixedSize = pixelSize;
    }

    // Add an extra pixel to stroke width to accommodate edge antialiasing
    float paddedSize = mixedSize + pixelSize;

    vNormalLengthInPixels = strip.y * paddedSize;
    
    // Extrude
    p += normal * vNormalLengthInPixels;

    gl_Position = pixelsToNdc(p);

#ifdef color2_DEFINED
    // Yuck, RGB interpolation in gamma space!
    // TODO: linear space: https://unlimited3d.wordpress.com/2020/01/08/srgb-color-space-in-opengl/
    vec3 color = mix(getScaled_color(), getScaled_color2(), t);
#else 
    vec3 color = getScaled_color();
#endif

    vColor = vec4(color * opacity, opacity);

    vSize = paddedSize;

    setupPicking();
}
`,Yie=`in lowp vec4 vColor;
in float vSize;
in float vNormalLengthInPixels;

out lowp vec4 fragColor;

void main(void) {
    float dpr = uDevicePixelRatio;

    float distance = abs(vNormalLengthInPixels);
    float opacity = clamp(((vSize / 2.0 - distance) * dpr), 0.0, 1.0);

    fragColor = vColor * opacity;

    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
}
`;class Zie extends E0{constructor(e){super(e),Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x:0,x2:void 0,y:0,y2:void 0,size:1,color:"black",opacity:1,segments:101,sagittaScaleFactor:1,minSagittaLength:1.5}))}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","size","height","color","opacity"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size"]}fixEncoding(e){return e.x||(e.x2=e.x),e.y2||(e.y2=e.y),e}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(Gie,Yie)}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;Bs(this.programInfo,{uSagittaScaleFactor:e.sagittaScaleFactor,uMinSagittaLength:e.minSagittaLength})}updateGraphicsData(){const e=this.unitView.getCollector(),t=e.getItemCount(),i=new wie({encoders:this.encoders,attributes:this.getAttributes(),numItems:t});i.addBatches(e.facetBatches);const s=i.toArrays();s.arrays.strip={data:Xie(this.properties.segments),numComponents:2},this.rangeMap.migrateEntries(s.rangeMap),this.arrays=Object.fromEntries(Object.entries(s.arrays).map(([r,o])=>[r,as(Ae({},o),{data:void 0})])),this.updateBufferInfo(s)}render(e){const t=this.gl;return this.createRenderCallback((i,s)=>{this.gl.bindVertexArray(this.vertexArrayInfo.vertexArrayObject);for(const r of Object.entries(this.bufferInfo.attribs)){const[o,a]=r;a.buffer&&this.arrays[o].numComponents&&(a.offset=i*this.arrays[o].numComponents*4)}Cg(t,this.programInfo,this.bufferInfo),L0(t,this.bufferInfo,t.TRIANGLE_STRIP,(this.properties.segments+1)*2,0,s)},e)}}function Xie(n){let e=0;const t=[];for(;e<=n;e++)t.push(e/n,.5),t.push(e/n,-.5);return t}var Qie=`uniform float uSdfNumerator;

uniform vec2 uD; // dx & dy

in mediump vec2 vertexCoord;
in lowp vec2 textureCoord;

uniform vec4 uViewportEdgeFadeWidth;
uniform vec4 uViewportEdgeFadeDistance;
    
uniform bool uSqueeze;
uniform bool uLogoLetter;

// Width of the text (all letters)
in float width;

// x: -1, 0, 1 = left, center, right
// y: -1, 0, 1 = top, middle, bottom 
uniform ivec2 uAlign;

#ifdef x2_DEFINED
uniform float uPaddingX;
uniform bool uFlushX;
#endif

#ifdef y2_DEFINED
uniform float uPaddingY;
uniform bool uFlushY;
#endif

out vec2 vTexCoord;
flat out vec4 vColor;
flat out float vSlope;
out float vEdgeFadeOpacity;

struct RangeResult {
    float pos;
    float scale;
};

float minValue(vec4 v) {
    return min(min(v.x, v.y), min(v.z, v.w));
}

float maxValue(vec4 v) {
    return max(max(v.x, v.y), max(v.z, v.w));
}

/**
 * All measures are in [0, 1]
 */
RangeResult positionInsideRange(float a, float b, float width, float padding,
                                int align, bool flush) {
    float span = b - a;
    float paddedWidth = width + 2.0 * padding;

    // Is the text clearly outside the viewport
    if (a > 1.0 || b < 0.0) {
        return RangeResult(0.0, 0.0);
    }

    // How much extra space we have for adjusting the position so that the
    // text stays inside the range.
    float extra = max(0.0, span - paddedWidth);

    float pos;

    // Align the text and try to keep it inside the range and the viewport
    if (align == 0) {
        float centre = a + b;

        if (flush) {
            float leftOver = max(0.0, paddedWidth - centre);
            centre += min(leftOver, extra);

            float rightOver = max(0.0, paddedWidth + centre - 2.0);
            centre -= min(rightOver, extra);
        }

        pos = centre / 2.0;

    } else if (align < 0) {
        float edge = a;

        if (flush) {
            float over = max(0.0, -edge);
            edge += min(over, extra);
        }

        pos = edge + padding;

    } else {
        float edge = b;

        if (flush) {
            float over = max(0.0, edge - 1.0);
            edge -= min(over, extra);
        }

		// TODO: If the text spans the whole viewport, try to keep it centered if possible.

        pos = edge - padding;
    }

    // How the text should be scaled to make it fit inside the range (if it didn't fit).
    float scale = clamp((span - padding) / paddedWidth, 0.0, 1.0);

    // TODO: Fix padding in scale factor. Padding should stay constant
    return RangeResult(pos, scale);
}

vec2 calculateRotatedDimensions(float width, mat2 rotationMatrix) {
    vec2 a = abs(rotationMatrix * vec2(width / 2.0, 0.5));
    vec2 b = abs(rotationMatrix * vec2(width / 2.0, -0.5));
    return vec2(max(a.x, b.x), max(a.y, b.y)) * 2.0;
}

/** Needed when using ranged text */
ivec2 fixAlignForAngle(ivec2 align, float angleInDegrees) {
    float a = mod(angleInDegrees + 45.0, 360.0);
    int x = align.x;
    int y = -align.y;

    // TODO: Optimize by avoiding branching
    if (a < 90.0) {
        return ivec2(x, y);
    } else if (a < 180.0) {
        return ivec2(y, -x);
    } else if (a < 270.0) {
        return ivec2(-x, y);
    } else {
        return ivec2(-y, x);
    }
}

void main(void) {
    float opacity = getScaled_opacity() * uViewOpacity;
    vec2 size = vec2(getScaled_size());
    float x = getScaled_x();
    float y = getScaled_y();

    float scale = 1.0;

	float angleInDegrees = getScaled_angle();
	float angle = -angleInDegrees * PI / 180.0;
	
    float sinTheta = sin(angle);
    float cosTheta = cos(angle);
    mat2 rotationMatrix = mat2(cosTheta, sinTheta, -sinTheta, cosTheta);

    vec2 flushSize = calculateRotatedDimensions(width, rotationMatrix);

#if defined(x2_DEFINED) || defined(y2_DEFINED)
    ivec2 align = fixAlignForAngle(uAlign, angleInDegrees);
#else
    ivec2 align = uAlign;
#endif

#ifdef x2_DEFINED
    float x2 = getScaled_x2();

    if (uLogoLetter) {
        size.x = (x2 - x) * uViewportSize.x;
        x += (x2 - x) / 2.0;

    } else {
        float x2 = getScaled_x2();
        RangeResult result = positionInsideRange(
            min(x, x2), max(x, x2),
            size.x * scale * flushSize.x / uViewportSize.x, uPaddingX / uViewportSize.x,
            align.x, uFlushX);
        
        x = result.pos;
        scale *= result.scale;
    }
#endif

    // Position of the text origo 
    vec2 pos = applySampleFacet(vec2(x, y));

#ifdef y2_DEFINED
    float y2 = getScaled_y2();
    vec2 pos2 = applySampleFacet(vec2(x, y2));

    if (uLogoLetter) {
        size.y = (pos2.y - pos.y) * uViewportSize.y;
        pos.y += (pos2.y - pos.y) / 2.0;

    } else {
        RangeResult result = positionInsideRange(
            min(pos.y, pos2.y), max(pos.y, pos2.y),
            size.y * scale * flushSize.y / uViewportSize.y, uPaddingY / uViewportSize.y,
            align.y, uFlushY);
        
        pos.y = result.pos;
        scale *= result.scale;
    }
#endif

    if (scale < 1.0) {
        if (uSqueeze) {
            vec2 scaleFadeExtent = vec2(3.0, 6.0) / size;

            if (scale  < scaleFadeExtent[0]) {
                gl_Position = vec4(0.0);
                return;
            }

            size *= scale;
            opacity *= linearstep(scaleFadeExtent[0], scaleFadeExtent[1], scale);

        } else if (scale < 1.0) {
            // Eliminate the text
            gl_Position = vec4(0.0);
            return;
        }
    }

    // Position of the character vertex in relation to the text origo
    vec2 charPos = rotationMatrix * (vertexCoord * size + uD);

    // Position of the character vertex inside the unit viewport
    vec2 unitPos = pos + charPos / uViewportSize;

    gl_Position = unitToNdc(unitPos);

    // Controls antialiasing of the SDF
    vSlope = max(1.0, min(size.x, size.y) / uSdfNumerator);

    vColor = vec4(getScaled_color() * opacity, opacity);

    vTexCoord = textureCoord;

    // Edge fading. The implementation is simplistic and fails with primitives that
    // span the whole viewport. However, it works just fine with reasonable font sizes.
    // x: top, y: right, z: bottom, w: left
    if (maxValue(uViewportEdgeFadeDistance) > -pow(10.0, 10.0)) { // -Infinity would be nice
        vEdgeFadeOpacity = minValue(
            ((vec4(1.0, 1.0, 0.0, 0.0) + vec4(-1.0, -1.0, 1.0, 1.0) * unitPos.yxyx) *
                uViewportSize.yxyx - uViewportEdgeFadeDistance) / uViewportEdgeFadeWidth);
    } else {
        vEdgeFadeOpacity = 1.0;
    }

    setupPicking();
}
`,Jie=`uniform sampler2D uTexture;

in vec2 vTexCoord;
in float vEdgeFadeOpacity;
flat in vec4 vColor;
flat in float vSlope;

out lowp vec4 fragColor;

float median(float r, float g, float b) {
    return max(min(r, g), min(max(r, g), b));
}

void main() {
    // TODO: Really small text should fall back to normal (non-SDF) texture that can be mip-mapped.
    // Currently small text has severe aliasing artifacts.

    vec3 c = texture(uTexture, vTexCoord).rgb;

    float sigDist = 1.0 - median(c.r, c.g, c.b);
    float opa = clamp((sigDist - 0.5) * vSlope + 0.5, 0.0, 1.0);

    // Raise to the power of 2.2 to do some cheap gamma correction
    opa *= pow(clamp(vEdgeFadeOpacity, 0.0, 1.0), 2.2);

    fragColor = vColor * opa;

    if (uPickingEnabled) {
        fragColor = vPickingColor;
    }
}
`;const ene={left:-1,center:0,right:1},tne={top:-1,middle:0,bottom:1,alphabetic:1};class ine extends E0{constructor(e){super(e),Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x:.5,y:.5,x2:void 0,y2:void 0,text:"",size:11,color:"black",opacity:1,font:void 0,fontStyle:void 0,fontWeight:void 0,align:"center",baseline:"middle",dx:0,dy:0,angle:0,fitToBand:!1,squeeze:!0,paddingX:0,paddingY:0,flushX:!0,flushY:!0,logoLetters:!1,viewportEdgeFadeWidthTop:0,viewportEdgeFadeWidthRight:0,viewportEdgeFadeWidthBottom:0,viewportEdgeFadeWidthLeft:0,viewportEdgeFadeDistanceTop:-1/0,viewportEdgeFadeDistanceRight:-1/0,viewportEdgeFadeDistanceBottom:-1/0,viewportEdgeFadeDistanceLeft:-1/0})),this.font=this.properties.font?e.context.fontManager.getFont(this.properties.font,this.properties.fontStyle,this.properties.fontWeight):e.context.fontManager.getDefaultFont()}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","color","size","opacity","angle"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size","text","angle"]}fixEncoding(e){for(const t of x0)this.properties.fitToBand&&ok(e,t);return e}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(Qie,Jie)}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;Bs(this.programInfo,{uPaddingX:e.paddingX,uPaddingY:e.paddingY,uFlushX:!!e.flushX,uFlushY:!!e.flushY,uAlign:[ene[e.align],tne[e.baseline]],uD:[e.dx,-e.dy],uLogoLetter:!!e.logoLetters,uSqueeze:!!e.squeeze,uViewportEdgeFadeWidth:[e.viewportEdgeFadeWidthTop,e.viewportEdgeFadeWidthRight,e.viewportEdgeFadeWidthBottom,e.viewportEdgeFadeWidthLeft],uViewportEdgeFadeDistance:[e.viewportEdgeFadeDistanceTop,e.viewportEdgeFadeDistanceRight,e.viewportEdgeFadeDistanceBottom,e.viewportEdgeFadeDistanceLeft]})}updateGraphicsData(){const e=this.unitView.getCollector(),t=e.getData(),i=this.encoding,s=this.encoders.text.accessor||this.encoders.text;let r=0;const o=i.text.format?wn(i.text.format):c=>c;for(const c of t){const h=o(s(c)),u=pi(h)?h:h===null?"":""+h;r+=u&&u.length||0}const a=new Cie({encoders:this.encoders,attributes:this.getAttributes(),properties:this.properties,fontMetrics:this.font.metrics,numCharacters:Math.max(r,this.properties.minBufferSize||0)});a.addBatches(e.facetBatches);const l=a.toArrays();this.rangeMap.migrateEntries(l.rangeMap),this.updateBufferInfo(l)}prepareRender(e){const t=super.prepareRender(e);let i=.35;return this.properties.logoLetters&&(i/=2),t.push(()=>Bs(this.programInfo,{uTexture:this.font.texture,uSdfNumerator:this.font.metrics.common.base/(this.glHelper.dpr/i)})),t.push(()=>Cg(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((i,s)=>L0(t,this.vertexArrayInfo,t.TRIANGLES,s,i),e)}}function JO(n,e,{spacing:t,devicePixelRatio:i,offset:s,reverse:r}={}){t=t||0,s=s||0;let o=0,a=0;for(const g of n)o+=Cb(g.px)+(lx(g)?0:t),a+=Cb(g.grow);o-=t;const l=Math.max(0,e-o),c=i!==void 0?g=>Math.round(g*i)/i:g=>g,h=[],u=[],d=g=>{const p=h.length;if(!p)return;const _=(g?t:0)*(r?-1:1);f-=_;for(let v=0;v<p;v++)u.push({location:f+(v+1)/(p+1)*_,size:0});f+=_,h.length=0};let f=r?Math.max(e,o):0+s;if(n.length==1&&lx(n[0]))return[{location:f,size:0}];for(let g=0;g<n.length;g++){const p=n[g];if(lx(p))h.push(p);else{d(u.length>0);const _=Cb(p.px)+(a?Cb(p.grow)/a*l:0);r&&(f-=_),u.push({location:c(f),size:c(_)}),r?f-=t:f+=_+t}}return f+=r?t:-t,d(!1),u}function nne(n){var i,s;let e=0,t=0;for(const r of n)e=Math.max(e,(i=r.px)!=null?i:0),t=Math.max(t,(s=r.grow)!=null?s:0);return{px:e,grow:t}}var s0,ak;const $M=class{constructor(e,t){qn(this,s0);this.width=e,this.height=t}addPadding(e){return gn(this,s0,ak).call(this,e.width,e.height)}subtractPadding(e){return gn(this,s0,ak).call(this,-e.width,-e.height)}};let nu=$M;s0=new WeakSet,ak=function(e,t){var i,s;return new $M({px:((i=this.width.px)!=null?i:0)+e,grow:this.width.grow},{px:((s=this.height.px)!=null?s:0)+t,grow:this.height.grow})};const Kp=Object.freeze({px:0,grow:0}),sne=new nu(Kp,Kp);function lx(n){return!n.px&&!n.grow}function Cb(n){return n||0}function rne(n){return n&&(ys(n.px)||ys(n.grow))}function one(n){if(O7(n))throw new Error("parseSizeDef does not accept step-based sizes.");if(rne(n))return n;if(ys(n))return{px:n,grow:0};if(n==="container")return{px:0,grow:1};if(!n)return{px:0,grow:1};throw new Error(`Invalid sizeDef: ${n}`)}class zr{constructor(e,t,i,s){this.top=e||0,this.right=t||0,this.bottom=i||0,this.left=s||0}get width(){return this.left+this.right}get height(){return this.top+this.bottom}expand(e){return e<=0?this:new zr(this.top+e,this.right+e,this.bottom+e,this.left+e)}add(e){return new zr(this.top+e.top,this.right+e.right,this.bottom+e.bottom,this.left+e.left)}subtract(e){return new zr(this.top-e.top,this.right-e.right,this.bottom-e.bottom,this.left-e.left)}static createFromConfig(e){return typeof e=="number"?this.createUniformPadding(e):e?this.createFromRecord(e):lk}static createFromRecord(e){return new zr(e.top,e.right,e.bottom,e.left)}static zero(){return lk}static createUniformPadding(e){return new zr(e,e,e,e)}}const lk=zr.createUniformPadding(0);Object.freeze(lk);const ane=/^([A-Za-z]+:)?\/\//;function lne(n,e){if(e&&ane.test(e))return e;const t=n();return t&&e?t.endsWith("/")?t+e:t+"/"+e:t!=null?t:e}const M7="VISIT_SKIP",Gp="VISIT_STOP",eF=n=>n;class R7{constructor(e,t,i,s){this.context=t,this.parent=i,this.name=e.name||s,this.spec=e,this.resolutions={scale:{},axis:{}},this._broadcastHandlers={},this._capturingInteractionEventListeners={},this._nonCapturingInteractionEventListeners={},D7(this),this.opacityFunction=eF,this.blockEncodingInheritance=!1}getPadding(){return this._cache("size/padding",()=>zr.createFromConfig(this.spec.padding))}getOverhang(){return zr.zero()}getSize(){return this._cache("size/size",()=>this.isVisible()?this.getSizeFromSpec().addPadding(this.getPadding()):sne)}getSizeFromSpec(){const e=t=>{var s,r;let i=this.spec[t];if(O7(i)){const o=i.step,a=(s=this.getScaleResolution(t=="width"?"x":"y"))==null?void 0:s.getScale();if(a){let l=0;if(eu(a.type))l=a.domain().length;else if(["locus","index"].includes(a.type)){const h=a.domain();l=_g(h)-h[0]}else throw new Error(`Cannot use step-based size with "${a.type}" scale!`);const c=a;return l=zN(l,c.paddingInner(),c.paddingOuter()),{px:l*o,grow:0}}else throw new Error("Cannot use 'step' size with missing scale!")}else return(r=i&&one(i))!=null?r:{px:0,grow:1}};return this._cache("size/sizeFromSpec",()=>new nu(e("width"),e("height")))}isVisible(){return this.context.isViewVisible(this)}isVisibleInSpec(){var e;return(e=this.spec.visible)!=null?e:!0}getEffectiveOpacity(){var e,t;return this.opacityFunction((t=(e=this.parent)==null?void 0:e.getEffectiveOpacity())!=null?t:1)}getPathString(){return[...this.getAncestors()].map(e=>e.name).reverse().join("/")}*getAncestors(){let e=this;do yield e,e=e.parent;while(e)}handleBroadcast(e){for(const t of this._broadcastHandlers[e.type]||[])t(e)}_addBroadcastHandler(e,t){let i=this._broadcastHandlers[e];i||(i=[],this._broadcastHandlers[e]=i),i.push(t)}handleInteractionEvent(e,t,i){const s=i?this._capturingInteractionEventListeners:this._nonCapturingInteractionEventListeners;for(const r of s[t.type]||[])r(e,t)}addInteractionEventListener(e,t,i){const s=i?this._capturingInteractionEventListeners:this._nonCapturingInteractionEventListeners;let r=s[e];r||(r=[],s[e]=r),r.push(t)}visit(e){try{const t=e(this);if(e.postOrder&&e.postOrder(this),t!==Gp)return t}catch(t){throw t.view=this,t}}onScalesResolved(){(!this.opacityFunction||this.opacityFunction===eF)&&(this.opacityFunction=hne(this))}onBeforeRender(){}render(e,t,i={}){}getEncoding(){const e=this.parent&&!this.blockEncodingInheritance?this.parent.getEncoding():{},t=this.spec.encoding||{},i=Ae(Ae({},e),t);for(const[s,r]of Object.entries(i))r===null&&delete i[s];return i}getFacetAccessor(e){if(this.parent)return this.parent.getFacetAccessor(this)}getFacetFields(e){var i;const t=this.getEncoding().sample;return y0(t)?[t.field]:(i=this.parent)==null?void 0:i.getFacetFields(this)}getSampleFacetTexture(){}_getResolution(e,t){e=bg(e);let i=this;do{const s=i.resolutions[t][e];if(s)return s;i=i.parent}while(i)}getScaleResolution(e){return this._getResolution(e,"scale")}getAxisResolution(e){return this._getResolution(e,"axis")}getBaseUrl(){return lne(()=>{var e;return(e=this.parent)==null?void 0:e.getBaseUrl()},this.spec.baseUrl)}getDynamicDataSource(){throw new Error("The view does not provide dynamic data!")}isPickingSupported(){return!0}getTitleText(){const e=this.spec.title;if(e)return pi(e)?e:e.text}_cache(e,t){return Mf(this,e,t)}_invalidateCacheByPrefix(e,t="self"){switch(t){case"self":Lv(this,e);break;case"ancestors":for(const i of this.getAncestors())Lv(i,e);break;case"progeny":this.visit(i=>Lv(i,e));break}}invalidateSizeCache(){this._invalidateCacheByPrefix("size/","ancestors")}propagateInteractionEvent(e){}}function cne(n){return"unitsPerPixel"in n}function hne(n){const e=n.spec.opacity;if(e!==void 0){if(ys(e))return t=>t*e;if(cne(e)){const t=r=>{var a;const o=(a=n.getScaleResolution(r))==null?void 0:a.getScale();if(["linear","index","locus"].includes(o==null?void 0:o.type))return o},i=e.channel?t(e.channel):t("x")||t("y");if(!i)throw new Error("Cannot find a resolved quantitative scale for dynamic opacity!");const s=MN().domain(e.unitsPerPixel).range(e.values).clamp(!0);return r=>{const a=mw(i.domain())/1e3;return s(a)*r}}}return t=>t}const O7=n=>!!(n!=null&&n.step);class Rf extends R7{constructor(e,t,i,s){super(e,t,i,s),this.spec=e}*[Symbol.iterator](){}replaceChild(e,t){throw new Error("Not implemented")}visit(e){let t;try{t=e(this)}catch(i){throw i.view=this,i}if(t===Gp)return t;if(t!==M7){e.beforeChildren&&e.beforeChildren(this);for(const i of this){const s=i.visit(e);if(s===Gp)return s}e.afterChildren&&e.afterChildren(this),e.postOrder&&e.postOrder(this)}}findDescendantByPath(e){for(const t of this)if(t.name===e[0]){if(e.length==1)return t;if(t instanceof Rf)return t.findDescendantByPath(e.slice(1))}}findChildByName(e){for(const t of this)if(t.name===e)return t}findDescendantByName(e){let t;return this.visit(i=>{if(i.name==e)return t=i,Gp}),t}getConfiguredResolution(e,t){var i,s;return(s=(i=this.spec.resolve)==null?void 0:i[t])==null?void 0:s[e]}getDefaultResolution(e,t){return"shared"}getConfiguredOrDefaultResolution(e,t){var i,s;return(s=(i=this.getConfiguredResolution(e,t))!=null?i:this.getConfiguredResolution("default",t))!=null?s:this.getDefaultResolution(e,t)}}function Mw(n,e,t){if(t=t||[],n.some(o=>o===null)){if(n.every(o=>o===null))return null;throw console.warn(n),new Error("Cannot merge objects with nulls!")}const i={},s=(o,a)=>o===a||ld(o)&&ld(a)||ld(o)&&a===!0||o===!0&&uo(a),r=o=>{for(let a in o){const l=o[a];if(!t.includes(a)&&l!==void 0)if(i[a]!==void 0&&!s(i[a],l))console.warn(`Conflicting property ${a} of ${e}: (${JSON.stringify(i[a])} and ${JSON.stringify(o[a])}). Using ${JSON.stringify(i[a])}.`);else{const c=i[a];if(ld(c))ld(l)&&(i[a]=Mw([c,l],a));else if(ld(l)){if(!(c===!0||c===void 0))throw new Error("Bug in merge! Target is: "+c);i[a]=Mw([{},l],a)}else i[a]=l}}};for(const o of n)r(o);return i}function ld(n){return uo(n)&&!Array.isArray(n)}/*!
 * Adapted from vega-encode:
 * https://github.com/vega/vega/blob/master/packages/vega-encode/src/ticks.js
 *
 * Copyright (c) 2015-2018, University of Washington Interactive Data Lab
 * All rights reserved.
 *
 * BSD-3-Clause License: https://github.com/vega/vega-lite/blob/master/LICENSE
 */function F7(n,e,t){return ys(e)&&t!=null&&(e=Math.min(e,~~(mw(n.domain())/t)||1)),uo(e)&&(e=e.interval),e}function P7(n,e,t){var i=n.range(),s=Math.floor(i[0]),r=Math.ceil(to(i));if(s>r&&(i=r,r=s,s=i),e=e.filter(function(a){return a=n(a),s<=a&&a<=r}),t>0&&e.length>1){for(var o=[e[0],to(e)];e.length>t&&e.length>=3;)e=e.filter(function(a,l){return!(l%2)});e.length<3&&(e=o)}return e}function une(n,e){return n.bins?P7(n,dne(n.bins,e)):n.ticks?n.ticks(e):n.domain()}function dne(n,e){var t=n.length,i=~~(t/(e||t));return i<2?n.slice():n.filter(function(s,r){return!(r%i)})}function fne(n,e,t){var i=n.tickFormat?n.tickFormat(e,t):t?wn(t):String;if(a6(n.type)){var s=pne(t);i=n.bins?s:gne(i,s)}return i}function gne(n,e){return function(t){return n(t)?e(t):""}}function pne(n){var e=nc(n||",");if(e.precision==null){switch(e.precision=12,e.type){case"%":e.precision-=2;break;case"e":e.precision-=1;break}return mne(wn(e),wn(".1f")(1)[1])}else return wn(e)}function mne(n,e){return function(t){var i=n(t),s=i.indexOf(e),r,o;if(s<0)return i;for(r=_ne(i,s),o=r<i.length?i.slice(r):"";--r>s;)if(i[r]!=="0"){++r;break}return i.slice(0,r)+o}}function _ne(n,e){var t=n.lastIndexOf("e"),i;if(t>0)return t;for(t=n.length;--t>e;)if(i=n.charCodeAt(t),i>=48&&i<=57)return t+1}/*!
 * Adapted from vega-encode:
 * https://github.com/vega/vega/blob/master/packages/vega-encode/src/Scale.js
 *
 * Copyright (c) 2015-2018, University of Washington Interactive Data Lab
 * All rights reserved.
 *
 * BSD-3-Clause License: https://github.com/vega/vega-lite/blob/master/LICENSE
 */const bne="locus",vne="index";var wne=5;function Cne(n){const e=n.type;return!n.bins&&(e===Tf||e===g0||e===p0)}function B7(n){return ur(n)&&![Ko,vne,bne].includes(n)}function V7(n){return n||{warn:(e,...t)=>console.warn(e,...t)}}var yne=_w(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma","zoom","fp64","name"]);function W7(n,e,t){t=V7(t);for(const i in n)if(!yne[i]){if(i==="padding"&&B7(e.type))continue;Cs(e[i])?e[i](n[i]):t.warn("Unsupported scale property: "+i)}Tne(e,n,Ine(e,n,Lne(e,n,t)))}function Sne(n,e){const t=xne(n),i=Nt(t);if(!i)throw new Error("Unknown scale type: "+t);const s=i();return W7(n,s,e),s}function xne(n){var e=n.type,t="",i;return e===Ko?Ko+"-"+Tf:(Dne(n)&&(i=n.rawDomain?n.rawDomain.length:n.domain?n.domain.length+ +(n.domainMid!=null):0,t=i===2?Ko+"-":i===3?mg+"-":""),(t+e||Tf).toLowerCase())}function Dne(n){const e=n.type;return ur(e)&&e!==J8&&e!==e6&&(n.scheme||n.range&&n.range.length&&n.range.every(pi))}function Lne(n,e,t){if(!n.domain)return 0;t=V7(t);var i=kne(n,e.domainRaw,t);if(i>-1)return i;var s=e.domain,r=n.type,o=e.zero||e.zero===void 0&&Cne(n),a,l;return s?(B7(r)&&e.padding&&s[0]!==to(s)&&(s=Ene(r,s,e.range,e.padding,e.exponent,e.constant)),(o||e.domainMin!=null||e.domainMax!=null||e.domainMid!=null)&&(a=(s=s.slice()).length-1||1,o&&(s[0]>0&&(s[0]=0),s[a]<0&&(s[a]=0)),e.domainMin!=null&&(s[0]=e.domainMin),e.domainMax!=null&&(s[a]=e.domainMax),e.domainMid!=null&&(l=e.domainMid,(l<s[0]||l>s[a])&&t.warn("Scale domainMid exceeds domain min or max.",l),s.splice(a,0,l))),n.domain(z7(r,s,t)),r===HN&&n.unknown(e.domainImplicit?RL:void 0),e.nice&&n.nice&&n.nice(e.nice!==!0&&F7(n,e.nice)||null),s.length):0}function kne(n,e,t){return e?(n.domain(z7(n.type,e,t)),e.length):-1}function Ene(n,e,t,i,s,r){var o=Math.abs(to(t)-t[0]),a=o/(o-2*i),l=n===oc?PB(e,null,a):n===p0?SL(e,null,a,.5):n===g0?SL(e,null,a,s||1):n===By?qq(e,null,a,r||1):FB(e,null,a);return e=e.slice(),e[0]=l[0],e[e.length-1]=l[1],e}function z7(n,e,t){if(a6(n)){var i=Math.abs(e.reduce(function(s,r){return s+(r<0?-1:r>0?1:0)},0));i!==e.length&&t.warn("Log scale domain includes zero: "+xy(e))}return e}function Ine(n,e,t){let i=e.bins;if(i&&!Dr(i)){const s=(i.start==null||i.stop==null)&&n.domain(),r=i.start==null?s[0]:i.start,o=i.stop==null?to(s):i.stop,a=i.step;a||fi("Scale bins parameter missing step property."),i=Rm(r,o+a,a)}return i?n.bins=i:n.bins&&delete n.bins,n.type===$N&&(i?!e.domain&&!e.domainRaw&&(n.domain(i),t=i.length):n.bins=n.domain()),t}function Tne(n,e,t){var i=n.type,s=e.round||!1,r=e.range;if(e.rangeStep!=null)r=Nne(i,e,t);else if(e.scheme&&(r=Ane(i,e,t),Cs(r))){if(n.interpolator)return n.interpolator(r);fi(`Scale type ${i} does not support interpolating color schemes.`)}if(r&&Vy(i))return n.interpolator(Wy(ck(r,e.reverse),e.interpolate,e.interpolateGamma));r&&e.interpolate&&n.interpolate?n.interpolate(l6(e.interpolate,e.interpolateGamma)):Cs(n.round)?n.round(s):Cs(n.rangeRound)&&n.interpolate(s?d0:kc),r&&n.range(ck(r,e.reverse))}function Nne(n,e,t){n!==n6&&n!==jL&&fi("Only band and point scales support rangeStep.");var i=(e.paddingOuter!=null?e.paddingOuter:e.padding)||0,s=n===jL?1:(e.paddingInner!=null?e.paddingInner:e.padding)||0;return[0,e.rangeStep*zN(t,s,i)]}function Ane(n,e,t){var i=e.schemeExtent,s,r;return Dr(e.scheme)?r=Wy(e.scheme,e.interpolate,e.interpolateGamma):(s=e.scheme.toLowerCase(),r=jN(s),r||fi(`Unrecognized scheme name: ${e.scheme}`)),t=n===i6?t+1:n===$N?t-1:n===UL||n===t6?+e.schemeCount||wne:t,Vy(n)?tF(r,i,e.reverse):Cs(r)?zZ(tF(r,i),t):n===HN?r:r.slice(0,t)}function tF(n,e,t){return Cs(n)&&(e||t)?WZ(n,ck(e||[0,1],t)):n}function ck(n,e){return e?n.slice().reverse():n}const iF=wn(",d");function Mne(n,e){return n.chrom+":"+iF(Math.floor(n.pos+1))+"-"+(n.chrom!=e.chrom?e.chrom+":":"")+iF(Math.ceil(e.pos))}const Rne="https://genomespy.app/data/genomes/";class One{constructor(e){if(this.config=e,!this.config.contigs&&typeof this.config.name!="string")throw new Error("No name has been defined for the genome assembly!");this.chromosomes=[],this.cumulativeChromPositions=new Map,this.chromosomesByName=new Map,this.startByIndex=[],this.totalSize=0,this.config.contigs&&this.setChromSizes(this.config.contigs)}get name(){return this.config.name}async load(e){if(!this.config.contigs){this.config.baseUrl?this.baseUrl=/^http(s)?/.test(this.config.baseUrl)?this.config.baseUrl:e+"/"+this.config.baseUrl:this.baseUrl=Rne;try{this.setChromSizes(Fne(await Ny({baseURL:this.baseUrl}).load(`${this.config.name}/${this.name}.chrom.sizes`)))}catch(t){throw new Error(`Could not load chrom sizes: ${t.message}`)}}}setChromSizes(e){let t=0;this.startByIndex=[0];for(let i=0;i<e.length;i++){this.startByIndex.push(t);const s=e[i].size,r=as(Ae({},e[i]),{continuousStart:t,continuousEnd:t+s,continuousInterval:[t,t+s],index:i,number:i+1,odd:!(i&1)});this.chromosomes.push(r);const o=r.name.replace(/^chr/i,"");for(const a of["chr"+o,"CHR"+o,"Chr"+o,r.number,""+r.number,o,r.name])this.cumulativeChromPositions.set(a,t),this.chromosomesByName.set(a,r);t+=r.size}this.totalSize=t}getExtent(){return[0,this.totalSize]}toContinuous(e,t){let i=this.cumulativeChromPositions.get(e);if(i===void 0)throw new Error("Unknown chromosome/contig: "+e);return i+ +t}toChromosome(e){if(e>=this.totalSize)return;e=Math.floor(e);const t=gg(this.startByIndex,e)-1;if(t>0&&t<=this.chromosomes.length)return this.chromosomes[t-1]}toChromosomal(e){const t=this.toChromosome(e);if(!!t)return{chrom:t.name,pos:Math.floor(e)-t.continuousStart}}getChromosome(e){return this.chromosomesByName.get(e)}formatInterval(e){return Mne(...this.toChromosomalInterval(e))}toChromosomalInterval(e){const t=this.toChromosomal(e[0]+.5),i=this.toChromosomal(e[1]-.5);return i.pos+=1,[t,i]}toContinuousInterval(e){var s,r,o;let[t,i]=e;return i||(i=t),[this.toContinuous(t.chrom,(s=t.pos)!=null?s:0),this.toContinuous(i.chrom,(o=i.pos)!=null?o:(r=this.chromosomesByName.get(i.chrom))==null?void 0:r.size)]}parseInterval(e){const t=e.match(/^(chr[0-9A-Z]+)(?::([0-9,]+)(?:-(?:(chr[0-9A-Z]+):)?([0-9,]+))?)?$/);if(t){const i=t[1];if(t.slice(2).every(a=>a===void 0)){const a=this.getChromosome(i);return a?[a.continuousStart,a.continuousEnd]:void 0}const s=t[3]||i,r=parseInt(t[2].replace(/,/g,"")),o=t[4]!==void 0?parseInt(t[4].replace(/,/g,"")):r;return[this.toContinuous(i,r-1),this.toContinuous(s,o)]}}}function Fne(n){return uK(n).filter(e=>/^chr[0-9A-Z]+$/.test(e[0])).map(([e,t])=>({name:e,size:parseInt(t)}))}function H7(n){return uo(n)&&"chrom"in n}function Pne(n){return n.every(H7)}class I0 extends Array{constructor(){super(),this.type=void 0}extend(e){return this}extendAll(e){if(e instanceof I0&&e.type!=this.type)throw new Error(`Cannot combine different types of domains: ${this.type} and ${e.type}`);for(const t of e)this.extend(t);return this}extendAllWithAccessor(e,t){for(const i of e)this.extend(t(i));return this}}class cx extends I0{constructor(){super(),this.type="quantitative"}extend(e){return e==null||Number.isNaN(e)?this:(e=+e,this.length?e<this[0]?this[0]=e:e>this[1]&&(this[1]=e):(this.push(e),this.push(e)),this)}}class $7 extends I0{constructor(){super(),this.type="ordinal",this.uniqueValues=new Set}extend(e){return e==null||Number.isNaN(e)?this:(this.uniqueValues.has(e)||(this.uniqueValues.add(e),this.push(e)),this)}}class U7 extends $7{constructor(){super(),this.type="nominal"}}class Bne extends I0{constructor(e){super();let t=0;for(let i=1;i<e.length;i++)t+=Math.sign(e[i]-e[i-1]);if(Math.abs(t)!=e.length-1)throw new Error("Piecewise domain must be strictly increasing or decreasing: "+JSON.stringify(e));e.forEach(i=>this.push(i))}extend(e){if(this.includes(e))return this;throw new Error("Piecewise domains are immutable and cannot be unioned!")}}const nF={quantitative:cx,index:cx,locus:cx,nominal:U7,ordinal:$7};function sF(n,e){if(n=="quantitative"&&Vne(e)){const t=new Bne(e);return t.type=n,t}else if(nF[n]){const t=new nF[n];return t.type=n,e&&t.extendAll(e),t}throw new Error("Unknown type: "+n)}function Vne(n){return n&&n.length>0&&n.length!=2&&n.every(e=>typeof e=="number")}function Wne(n){return((n*=2)<=1?n*n:--n*(2-n)+1)/2}const rF="quantitative",j7="ordinal",q7="nominal",K7="locus",zne="index";class Hne{constructor(e){this.channel=e,this.members=[],this.type=null,this._zoomExtent=void 0,this._domainListeners=new Set,this.name=void 0,this._scale=void 0}addEventListener(e,t){if(e!="domain")throw new Error("Unsupported event type: "+e);this._domainListeners.add(t)}removeEventListener(e,t){if(e!="domain")throw new Error("Unsupported event type: "+e);this._domainListeners.delete(t)}_notifyDomainListeners(){for(const e of this._domainListeners.values())e({type:"domain",scaleResolution:this})}pushUnitView(e,t){var o;const i=GL(e,t),s=i.type,r=(o=i==null?void 0:i.scale)==null?void 0:o.name;if(r){if(this.name!==void 0&&r!=this.name)throw new Error(`Shared scales have conflicting names: "${r}" vs. "${this.name}"!`);this.name=r}if(!this.type)this.type=s;else if(s!==this.type&&!qp(t))throw new Error(`Can not use shared scale for different data types: ${this.type} vs. ${s}. Use "resolve: independent" for channel ${this.channel}`);this.members.push({view:e,channel:t})}isExplicitDomain(){return!!this.getConfiguredDomain()}_getMergedScaleProps(){return Mf(this,"mergedScaleProps",()=>{const e=this.members.map(t=>GL(t.view,t.channel).scale).filter(t=>t!==void 0);return Mw(e,"scale",["domain"])})}getScaleProps(){return Mf(this,"scaleProps",()=>{var s,r;const e=this._getMergedScaleProps();if(e===null||e.type=="null")return{type:"null"};const t=Ae(Ae({},this._getDefaultScaleProperties(this.type)),e);t.type||(t.type=$ne(this.channel,this.type));const i=this.getInitialDomain();return i&&i.length>0?t.domain=i:eu(t.type)&&(t.domain=new U7),!t.domain&&t.domainMid!==void 0&&(t.domain=[(s=t.domainMin)!=null?s:0,(r=t.domainMax)!=null?r:1]),this.channel=="y"&&eu(t.type)&&t.reverse==null&&(t.reverse=!0),t.range&&t.scheme&&delete t.scheme,!("zoom"in t)&&["index","locus"].includes(t.type)&&(t.zoom=!0),Une(t,this.channel),t})}getInitialDomain(){var e;return(e=this.getConfiguredDomain())!=null?e:this.type==K7?this.getGenome().getExtent():this.getDataDomain()}getConfiguredDomain(){return this._reduceDomains(e=>qp(e.channel)?void 0:e.view.getConfiguredDomain(e.channel))}getDataDomain(){return this._reduceDomains(e=>qp(e.channel)?void 0:e.view.extractDataDomain(e.channel))}reconfigure(){if(this._scale&&this._scale.type!="null"){x7(this,"scaleProps");const e=this.getScaleProps();W7(e,this._scale),ur(this._scale.type)&&(this._zoomExtent=this._getZoomExtent())}}getScale(){if(this._scale)return this._scale;const e=this.getScaleProps(),t=Sne(e);return this._scale=t,EY(t)&&t.genome(this.getGenome()),ur(t.type)&&(this._zoomExtent=this._getZoomExtent()),t}getDomain(){return this.getScale().domain()}getComplexDomain(){var e,t;return(t=(e=this.getGenome())==null?void 0:e.toChromosomalInterval(this.getDomain()))!=null?t:this.getDomain()}isZoomed(){return this.isZoomable()&&u6(this.getInitialDomain(),this.getDomain())}isZoomable(){if(!v6(this.channel))return!1;const e=this.getScale().type;return["linear","locus","index","log","pow","sqrt"].includes(e)?!!this.getScaleProps().zoom:!1}zoom(e,t,i){if(!this.isZoomable())return!1;const s=this.getScale(),r=s.domain();let o=[...r],a=s.invert(t);switch(this.getScaleProps().reverse&&(i=-i),"align"in s&&(a+=s.align()),s.type){case"linear":case"index":case"locus":o=$q(o,i||0),o=FB(o,a,e);break;case"log":o=Uq(o,i||0),o=PB(o,a,e);break;case"pow":case"sqrt":{const l=s;o=jq(o,i||0,l.exponent()),o=SL(o,a,e,l.exponent());break}default:throw new Error("Zooming is not implemented for: "+s.type)}return this._zoomExtent&&(o=Kq(o,this._zoomExtent[0],this._zoomExtent[1])),[0,1].some(l=>o[l]!=r[l])?(s.domain(o),this._notifyDomainListeners(),!0):!1}async zoomTo(e,t=!1){var a;if(Sy(t)&&(t=t?700:0),!this.isZoomable())throw new Error("Not a zoomable scale!");const i=this.fromComplexInterval(e),s=(a=this.members[0])==null?void 0:a.view.context.animator,r=this.getScale(),o=r.domain();if(t>0&&o.length==2){const l=o[1]-o[0],c=o[0]+l/2,h=i[1]-i[0],u=i[0]+h/2,d=O8([c,0,l],[u,0,h]).rho(.7);await s.transition({duration:t/1e3*d.duration,easingFunction:Wne,onUpdate:f=>{const[g,,p]=d(f);r.domain([g-p/2,g+p/2]),this._notifyDomainListeners()}}),r.domain(i),this._notifyDomainListeners()}else r.domain(i),s==null||s.requestRender(),this._notifyDomainListeners()}getZoomLevel(){return this.isZoomable()?mw(this._zoomExtent)/mw(this.getScale().domain()):1}_getZoomExtent(){const e=this.getScaleProps(),t=e.zoom;if(jne(t)&&Dr(t.extent))return this.fromComplexInterval(t.extent);if(t)return e.type=="locus"?this.getGenome().getExtent():this._scale.domain()}_getDefaultScaleProperties(e){const t=this.channel,i={};return this.isExplicitDomain()&&(i.zero=!1),Ym(t)?i.nice=!this.isExplicitDomain():Ah(t)?i.scheme=e==q7?"tableau10":e==j7?"blues":"viridis":jy(t)?i.range=C6(t):t=="size"?i.range=[0,400]:t=="angle"&&(i.range=[0,360]),i}getGenome(){var t;if(this.type!=="locus")return;const e=(t=this.members[0].view.context.genomeStore)==null?void 0:t.getGenome();if(!e)throw new Error("No genome has been defined!");return e}invertToComplex(e){const t=this.getScale();if("invert"in t){const i=t.invert(e);return this.toComplex(i)}else throw new Error("The scale does not support inverting!")}toComplex(e){const t=this.getGenome();return t?t.toChromosomal(e):e}fromComplex(e){return H7(e)?this.getGenome().toContinuous(e.chrom,e.pos):e}fromComplexInterval(e){return this.type==="locus"&&Pne(e)?this.getGenome().toContinuousInterval(e):e}_getViewPaths(){return this.members.map(e=>e.view.getPathString()).join(", ")}_reduceDomains(e){const t=this.members.map(e).filter(i=>!!i);if(t.length)return t.reduce((i,s)=>i.extendAll(s))}}function $ne(n,e){if(e==zne||e==K7){if(v6(n))return e;throw new Error(`${n} does not support ${e} data type. Only positional channels do.`)}const t={x:["band","band","linear"],y:["band","band","linear"],size:[void 0,"point","linear"],opacity:[void 0,"point","linear"],fillOpacity:[void 0,"point","linear"],strokeOpacity:[void 0,"point","linear"],color:["ordinal","ordinal","linear"],fill:["ordinal","ordinal","linear"],stroke:["ordinal","ordinal","linear"],strokeWidth:[void 0,void 0,"linear"],shape:["ordinal","ordinal",void 0],dx:[void 0,void 0,"null"],dy:[void 0,void 0,"null"],angle:[void 0,void 0,"linear"]},s=["uniqueId","facetIndex","semanticScore","search","text","sample"].includes(n)?"null":t[n]?t[n][[q7,j7,rF].indexOf(e)]:e==rF?"linear":"ordinal";if(s===void 0)throw new Error(`Channel "${n}" is not compatible with "${e}" data type. Use of a proper scale may be needed.`);return s}function Une(n,e){Ym(e)&&n.type!=="ordinal"&&(n.range=[0,1]),e=="opacity"&&ur(n.type)&&(n.clamp=!0)}function jne(n){return uo(n)}function hx(...n){for(const e of n)if(e!==void 0)return e}class qne{constructor(e){this.channel=e,this.members=[]}get scaleResolution(){var e;return(e=_g(this.members))==null?void 0:e.view.getScaleResolution(this.channel)}pushUnitView(e,t){const i=e.getScaleResolution(this.channel);if(!i)throw new Error("Cannot find a scale resolution!");if(this.scaleResolution&&i!==this.scaleResolution)throw new Error("Shared axes must have a shared scale!");this.members.push({view:e,channel:t})}getAxisProps(){return Mf(this,"axisProps",()=>{const e=this.members.map(t=>{const i=t.view.mark.encoding[t.channel];return"axis"in i&&i.axis});return e.length>0&&e.some(t=>t===null)?null:Mw(e.filter(t=>t!==void 0),"axis",["title"])})}getTitle(){const e=r=>{var a;const o=GL(r.view,r.channel);if(!io(o))return{member:r,explicitTitle:hx((a=o.axis)==null?void 0:a.title,o.title),implicitTitle:hx(y0(o)?o.field:void 0,ZN(o)?o.expr:void 0)}},t=this.members.map(e),i=t.filter(r=>{var o;if(qp(r.member.channel)&&!r.explicitTitle){const a=bg(r.member.channel);return((o=t.find(l=>l.member.view==r.member.view&&l.member.channel==a))==null?void 0:o.explicitTitle)===void 0}return!0}),s=new Set(i.map(r=>hx(r.explicitTitle,r.implicitTitle)).filter(pi));return s.size?[...s].join(", "):null}}class G7 extends R7{constructor(e,t,i,s){super(e,t,i,s),this.spec=e}}class mh extends Rf{constructor(e,t,i,s){super(e,t,i,s),this.spec=e,this.children=(e.layer||[]).map((r,o)=>{if(wA(r)||vA(r))return t.createView(r,this,"layer"+o);throw new Error("LayerView accepts only unit or layer specs as children!")})}*[Symbol.iterator](){for(const e of this.children)yield e}render(e,t,i={}){if(!!this.isVisible()){e.pushView(this,t);for(const s of this.children)s.render(e,t,i);e.popView(this)}}propagateInteractionEvent(e){this.handleInteractionEvent(void 0,e,!0),this.children.length&&this.children.at(-1).propagateInteractionEvent(e),!e.stopped&&this.handleInteractionEvent(void 0,e,!1)}}class oF{constructor(e,t){this.n=e,this.maxCols=t!=null?t:1/0}get nRows(){return this.maxCols==1/0?1:Math.ceil(this.n/this.maxCols)}get nCols(){return Math.min(this.n,this.maxCols)}get rowIndices(){const e=[],t=this.nCols,i=this.nRows;for(let s=0;s<i;s++){const r=[];e.push(r);for(let o=0;o<t;o++){const a=s*t+o;a<this.n&&r.push(a)}}return e}get colIndices(){const e=[],t=this.nCols,i=this.nRows;for(let s=0;s<t;s++){const r=[];e.push(r);for(let o=0;o<i;o++){const a=o*t+s;a<this.n&&r.push(a)}}return e}getCellIndex(e,t){let i=0;if(this.maxCols==1/0)i=t==0?e:void 0;else{if(e>=this.maxCols)return;i=t*this.nCols+e}return i<this.n?i:void 0}getCellCoords(e){if(!(e<0||e>=this.n))return[e%this.nCols,Math.floor(e/this.nCols)]}}function va(n){return()=>n}const Aa=class{static create(e,t,i,s){return new Aa(va(e),va(t),va(i),va(s))}_offset(e,t){const i=this["_"+e];if(t===0)return i;switch(typeof t){case"number":return()=>i()+t;case"function":return()=>i()+t();default:throw new Error("Not a number of function")}}_passThrough(e){return this._offset(e,0)}constructor(e,t,i,s){this._x=e,this._y=t,this._width=i,this._height=s}get x(){return this._x()}get y(){return this._y()}get width(){return this._width()}get height(){return this._height()}get x2(){return this._x()+this._width()}get y2(){return this._y()+this._height()}equals(e){return e?this===e||this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height:!1}modify(e){if(!Object.keys(e).length)return this;const t=i=>{const s=e[i];return typeof s=="number"?va(s):typeof s=="function"?s:this._passThrough(i)};return new Aa(t("x"),t("y"),t("width"),t("height"))}translate(e,t){return e===0&&t===0?this:new Aa(this._offset("x",e),this._offset("y",t),this._passThrough("width"),this._passThrough("height"))}translateBy(e){return this.translate(e.x,e.y)}expand(e,t=1){return e.left==0&&e.top==0&&e.right==0&&e.bottom==0?this:new Aa(e.left?this._offset("x",-e.left*t):this._passThrough("x"),e.top?this._offset("y",-e.top*t):this._passThrough("y"),e.width?this._offset("width",e.width*t):this._passThrough("width"),e.height?this._offset("height",e.height*t):this._passThrough("height"))}shrink(e){return this.expand(e,-1)}intersect(e){return this===e?this:new Aa(()=>Math.max(this.x,e.x),()=>Math.max(this.y,e.y),()=>Math.min(this.x2,e.x2)-Math.max(this.x,e.x),()=>Math.min(this.y2,e.y2)-Math.max(this.y,e.y))}isDefined(){return this.width>=0&&this.height>=0}flatten(){return new Aa(va(this.x),va(this.y),va(this.width),va(this.height))}containsPoint(e,t){return e>=this.x&&e<this.x2&&t>=this.y&&t<this.y2}normalizePoint(e,t){return{x:(e-this.x)/this.width,y:(t-this.y)/this.height}}toString(){return`Rectangle: x: ${this.x}, y: ${this.y}, width: ${this.width}, height: ${this.height}`}};let Jd=Aa;id(Jd,"ZERO",Aa.create(0,0,0,0));function Kne(n,e,t){return t=(t-n)/(e-n),t=Math.max(0,Math.min(1,t)),t*t*(3-2*t)}class yg extends Hi{get identifier(){}handle(e){throw new Error("Source does not handle incoming data!")}async load(){}}function Y7(n){var t,i;const e=Ae({},n.format);if((t=e.type)!=null||(e.type=Xne(n)&&Gne(n.url)),(i=e.parse)!=null||(e.parse="auto"),!e.type)throw new Error("Format for the data source was not defined and it could not be inferred: "+JSON.stringify(n));return e}function Gne(n){var e;if(Array.isArray(n)&&(n=n[0]),n)return(e=n.match(/\.(csv|tsv|json)/))==null?void 0:e[1]}const s1=n=>typeof n!="object"?Yne:Zne,Yne=n=>({data:n}),Zne=n=>n;function Xne(n){return"url"in n}function Qne(n){return"dynamicCallbackSource"in n}class aF extends yg{constructor(e){super(),this.callback=e}loadSynchronously(){if(!this.callback)return;const e=this.callback();if(!e||typeof e[Symbol.iterator]!="function")throw new Error("Dynamic data callback didn't return iterable data!");this.reset(),this.beginBatch({type:"file"});let t;for(const i of e)t||(t=s1(i)),this._propagate(t(i));this.complete()}async load(){this.loadSynchronously()}}const Z7="chromosome_ticks_and_labels",X7={x:"width",y:"height"};function hk(n){return n=="x"?"y":"x"}const uk={x:["bottom","top"],y:["left","right"]},Q7=Object.fromEntries(Object.entries(uk).map(([n,e])=>e.map(t=>[t,n])).flat(1));function Mh(n){return Q7[n]}class Jne extends mh{constructor(e,t,i,s){const r=t=="locus",o=Ae(Ae(Ae({},r?ise:J7),tse(t,e)),e);if(super(r?nse(o):e9(o),i,s,`axis_${e.orient}`),this.axisProps=o,this.axisUpdateRequested=!0,this._addBroadcastHandler("layout",()=>{this.axisUpdateRequested=!0}),this.previousScaleDomain=[],this.axisLength=void 0,this.ticks=[],this.tickSource=new aF(()=>this.ticks),r){const a=Mh(this.axisProps.orient),l=this.getScaleResolution(a).getGenome();this.findChildByName(Z7).getDynamicDataSource=()=>new aF(()=>l.chromosomes)}this.blockEncodingInheritance=!0}getOrient(){return this.axisProps.orient}getSize(){const e={px:this.getPerpendicularSize()},t={grow:1};return Q7[this.axisProps.orient]=="x"?new nu(t,e):new nu(e,t)}getPerpendicularSize(){return bA(this.axisProps)}getDynamicDataSource(){return this.tickSource}_updateAxisData(){const e=Mh(this.axisProps.orient),t=this.getScaleResolution(e).getScale(),i=t.domain();if(u6(i,this.previousScaleDomain)&&!this.axisUpdateRequested)return;this.previousScaleDomain=i;const s=this.ticks,r=ese(this.axisProps,t,this.axisLength,s);r!==s&&(this.ticks=r,this.tickSource.loadSynchronously()),this.axisUpdateRequested=!1}onBeforeRender(){super.onBeforeRender(),this._updateAxisData()}render(e,t,i={}){!this.isVisible()||(this.axisLength=t[X7[Mh(this.getOrient())]],super.render(e,t,i))}isPickingSupported(){return!1}}function bA(n){const e=Mh(n.orient);let t=n.ticks&&n.tickSize||0;return n.labels&&(t+=n.labelPadding,e=="x"?t+=n.labelFontSize:t+=30),n.title&&(t+=n.titlePadding+n.titleFontSize),t=Math.min(n.maxExtent||1/0,Math.max(n.minExtent||0,t)),t}function ese(n,e,t,i=[]){const s=a=>25+60*Kne(100,700,a);let r=ys(n.tickCount)?n.tickCount:Math.round(t/s(t));r=F7(e,r,n.tickMinStep);const o=n.values?P7(e,n.values,r):une(e,r);if(qZ(o,i,a=>a,a=>a.value))return i;{const a=fne(e,r,n.format);return o.map(l=>({value:l,label:a(l)}))}}const J7={values:null,minExtent:20,maxExtent:1/0,offset:0,domain:!0,domainWidth:1,domainColor:"gray",domainDash:null,domainDashOffset:0,domainCap:"square",ticks:!0,tickSize:5,tickWidth:1,tickColor:"gray",tickDash:null,tickDashOffset:0,tickCap:"square",tickCount:null,tickMinStep:null,labels:!0,labelAlign:"center",labelBaseline:"middle",labelPadding:4,labelFontSize:10,labelLimit:180,labelColor:"black",format:null,titleColor:"black",titleFont:"sans-serif",titleFontSize:10,titlePadding:3};function tse(n,e){var a;const t=e.orient,i=n=="nominal"||n=="ordinal";let s="center",r="middle",o=(a=e.labelAngle)!=null?a:(t=="top"||t=="bottom")&&i?-90:0;switch(t){case"left":s="right";break;case"right":s="left";break;case"top":case"bottom":Math.abs(o)>30?(s=o>0==(t=="bottom")?"left":"right",r="middle"):r=t=="top"?"alphabetic":"top";break}return{labelAlign:s,labelAngle:o,labelBaseline:r}}function e9(n){const e=as(Ae({},n),{extent:bA(n)}),t=Mh(e.orient),i=hk(t),s=e.orient=="bottom"||e.orient=="right"?1:-1,r=e.orient=="bottom"||e.orient=="left"?1:0,o=()=>({name:"domain",data:{values:[0]},mark:{type:"rule",clip:!1,strokeDash:e.domainDash,strokeCap:e.domainCap,color:e.domainColor,[i]:r,size:e.domainWidth}}),a=()=>({name:"labels",mark:{type:"text",clip:!1,align:e.labelAlign,angle:e.labelAngle,baseline:e.labelBaseline,[i+"Offset"]:(e.tickSize+e.labelPadding)*s,[i]:r,size:e.labelFontSize,color:e.labelColor,minBufferSize:1500},encoding:{[t]:{field:"value",type:"quantitative"},text:{field:"label"}}}),l=()=>({name:"ticks",mark:{type:"rule",clip:!1,strokeDash:e.tickDash,strokeCap:e.tickCap,color:e.tickColor,size:e.tickWidth,minBufferSize:300},encoding:{[i]:{value:r},[i+"2"]:{value:r-e.tickSize/e.extent*(r?1:-1)}}}),c=()=>({name:"title",data:{values:[0]},mark:{type:"text",clip:!1,align:"center",baseline:e.orient=="bottom"?"bottom":"top",angle:[0,90,0,-90][["top","right","bottom","left"].indexOf(e.orient)],text:e.title,color:e.titleColor,[t]:.5,[i]:1-r}}),h=()=>{const d={name:"ticks_and_labels",encoding:{[t]:{field:"value",type:"quantitative"}},layer:[]};return e.ticks&&d.layer.push(l()),e.labels&&d.layer.push(a()),d},u={[X7[hk(Mh(e.orient))]]:e.extent,data:{dynamicCallbackSource:!0},layer:[]};return e.domain&&u.layer.push(o()),(e.ticks||e.labels)&&u.layer.push(h()),e.title&&u.layer.push(c()),u}const ise=as(Ae({},J7),{chromTicks:!0,chromTickSize:18,chromTickWidth:1,chromTickColor:"#989898",chromTickDash:[4,2],chromTickDashOffset:1,chromLabels:!0,chromLabelFontSize:13,chromLabelFontWeight:"normal",chromLabelFontStyle:"normal",chromLabelColor:"black",chromLabelAlign:"left",chromLabelPadding:7});function nse(n){const e=as(Ae({},n),{extent:bA(n)}),t=Mh(e.orient),i=hk(t),s=e.orient=="bottom"||e.orient=="left"?1:0,r=()=>({name:"chromosome_ticks",mark:{type:"rule",strokeDash:n.chromTickDash,strokeDashOffset:n.chromTickDashOffset,[i]:s,[i+"2"]:s-e.chromTickSize/e.extent*(s?1:-1),color:n.chromTickColor,size:e.chromTickWidth}}),o=()=>{let c;switch(e.orient){case"top":c={y:0,angle:0,paddingX:4,dy:-e.chromLabelPadding,viewportEdgeFadeWidthLeft:20,viewportEdgeFadeWidthRight:20,viewportEdgeFadeDistanceRight:-10,viewportEdgeFadeDistanceLeft:-20};break;case"bottom":c={y:1,angle:0,paddingX:4,dy:e.chromLabelPadding+e.chromLabelFontSize*.73,viewportEdgeFadeWidthLeft:20,viewportEdgeFadeWidthRight:20,viewportEdgeFadeDistanceRight:-10,viewportEdgeFadeDistanceLeft:-20};break;case"left":c={x:1,angle:-90,paddingY:4,dy:-e.chromLabelPadding,viewportEdgeFadeWidthBottom:20,viewportEdgeFadeWidthTop:20,viewportEdgeFadeDistanceBottom:-20,viewportEdgeFadeDistanceTop:-10};break;case"right":c={x:0,angle:90,align:"right",paddingY:4,dy:-e.chromLabelPadding};break;default:c={}}return{name:"chromosome_labels",mark:Ae({type:"text",size:e.chromLabelFontSize,font:e.chromLabelFont,fontWeight:e.chromLabelFontWeight,fontStyle:e.chromLabelFontStyle,color:e.chromLabelColor,align:n.chromLabelAlign,baseline:"alphabetic",clip:!1},c),encoding:{[t+"2"]:{field:"continuousEnd",type:"locus"},text:{field:"name"}}}};let a;switch(e.orient){case"bottom":case"top":a={};break;case"left":a={labelAngle:-90,labelAlign:"center",labelPadding:6};break;case"right":a={labelAngle:90,labelAlign:"center",labelPadding:6};break;default:a={}}const l=e9(Ae(Ae({},n),a));if(n.chromTicks||n.chromLabels){const c={name:Z7,data:{dynamicCallbackSource:!0},encoding:{[t]:{field:"continuousStart",type:"locus",band:0}},layer:[]};if(n.chromTicks&&c.layer.push(r()),n.chromLabels){c.layer.push(o());let h;l.layer.filter(u=>u.name=="ticks_and_labels").forEach(u=>u.layer.filter(d=>d.name=="labels").forEach(d=>{h=d.mark})),h&&(e.orient=="top"||e.orient=="bottom"?(h.viewportEdgeFadeWidthLeft=30,h.viewportEdgeFadeDistanceLeft=40):(h.viewportEdgeFadeWidthBottom=30,h.viewportEdgeFadeDistanceBottom=40))}l.layer.push(c)}return l}const lF={anchor:"middle",frame:"group",offset:10,orient:"top",align:void 0,angle:0,baseline:"alphabetic",dx:0,dy:0,color:void 0,font:void 0,fontSize:12,fontStyle:"normal",fontWeight:"normal"},sse={orient:"left",anchor:"middle",align:"right",baseline:"middle",angle:0,fontSize:12},rse={orient:"top",anchor:"start",align:"left",baseline:"top",offset:-10,dx:10,fontSize:12},ose={start:0,middle:.5,end:1},ase={start:"left",middle:"center",end:"right"};function lse(n){var c,h,u;if(!n)return;const e=pi(n)?{text:n}:n;if(!e.text||e.orient=="none")return;const t=(c={"track-title":sse,overlay:rse}[e.style])!=null?c:{},i=Ae(Ae(Ae({},lF),t),e);let s={},r={x:0,y:0};const o=ose[(h=i.anchor)!=null?h:"middle"];switch(i.orient){case"top":r={x:o,y:1},s={baseline:"alphabetic",angle:0};break;case"right":r={x:1,y:1-o},s={baseline:"alphabetic",angle:90};break;case"bottom":r={x:o,y:0},s={baseline:"top",angle:0};break;case"left":r={x:0,y:o},s={baseline:"alphabetic",angle:-90};break}const a=Ae(Ae(Ae(Ae({},lF),s),t),e),l={xOffset:0,yOffset:0};switch(i.orient){case"top":l.yOffset=-a.offset;break;case"right":l.xOffset=a.offset;break;case"bottom":l.yOffset=a.offset;break;case"left":l.xOffset=-a.offset;break}return{configurableVisibility:!1,data:{values:[{}]},mark:as(Ae(Ae({type:"text",tooltip:null,clip:!1},r),l),{text:a.text,align:(u=a.align)!=null?u:ase[a.anchor],angle:a.angle,baseline:a.baseline,dx:a.dx,dy:a.dy,color:a.color,font:a.font,size:a.fontSize,fontStyle:a.fontStyle,fontWeight:a.fontWeight})}}function cse(n,e,t,i){if(n.type=="wheel"){n.uiEvent.preventDefault();const s=n.uiEvent,r=s.deltaMode?120:1;let{x:o,y:a}=n.point;if(i){const l=i.mark.encoders;l.x&&!l.x2&&(o=+l.x(i.datum)*e.width+e.x),l.y&&!l.y2&&(a=(1-+l.y(i.datum))*e.height+e.y)}Math.abs(s.deltaX)<Math.abs(s.deltaY)?t({x:o,y:a,xDelta:0,yDelta:0,zDelta:s.deltaY*r/300}):t({x:o,y:a,xDelta:-s.deltaX*r,yDelta:0,zDelta:0})}else if(n.type=="mousedown"&&n.uiEvent.button===0){const s=n.uiEvent;s.preventDefault();let r=s;const o=l=>{t({x:r.clientX,y:r.clientY,xDelta:l.clientX-r.clientX,yDelta:l.clientY-r.clientY,zDelta:0}),r=l},a=l=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",a)};document.addEventListener("mouseup",a,!1),document.addEventListener("mousemove",o,!1)}}var Cf,yf,ar,Sf,r0,dk,Mo,xl,uy,i9,dy,n9,kh,Ep,o0,fk,a0,gk,l0,pk,fy,s9;class t9 extends Rf{constructor(t,i,s,r,o){var a;super(t,i,s,r);qn(this,r0);qn(this,Mo);qn(this,uy);qn(this,dy);qn(this,kh);qn(this,o0);qn(this,a0);qn(this,l0);qn(this,fy);qn(this,Cf,1/0);qn(this,yf,10);qn(this,ar,[]);qn(this,Sf,0);this.spec=t,Jg(this,yf,(a=t.spacing)!=null?a:10),Jg(this,Cf,o),Jg(this,ar,[]),this.wrappingFacet=!1,this._createChildren()}_createChildren(){}appendChild(t){var i;(i=t.parent)!=null||(t.parent=this),oi(this,ar).push(gn(this,r0,dk).call(this,t)),GM(this,Sf)._++}setChildren(t){for(const i of t)this.appendChild(i)}replaceChild(t,i){const s=oi(this,ar).findIndex(r=>r.view==t);if(s>=0)oi(this,ar)[s]=gn(this,r0,dk).call(this,i);else throw new Error("Not my child view!")}get children(){return oi(this,ar).map(t=>t.view)}get childCount(){return oi(this,ar).length}onScalesResolved(){super.onScalesResolved(),gn(this,dy,n9).call(this)}*[Symbol.iterator](){for(const t of oi(this,ar)){t.background&&(yield t.background);for(const i of Object.values(t.axes))i&&(yield i);yield t.view,t.title&&(yield t.title)}}getOverhang(){const t=gn(this,kh,Ep).call(this,"column"),i=gn(this,kh,Ep).call(this,"row");return!t.length||!i.length?zr.zero():new zr(i.at(0).axisBefore,t.at(-1).axisAfter,i.at(-1).axisAfter,t.at(0).axisBefore)}getSize(){return this._cache("size",()=>new nu(gn(this,a0,gk).call(this,"column"),gn(this,a0,gk).call(this,"row")).subtractPadding(this.getOverhang()).addPadding(this.getPadding()))}render(t,i,s={}){var c;if(!this.isVisible())return;i=i.shrink(this.getPadding()),t.pushView(this,i);const r={devicePixelRatio:this.context.glHelper.dpr},o=JO(gn(this,o0,fk).call(this,"column"),i.width,r),a=JO(gn(this,o0,fk).call(this,"row"),i.height,r),l=new oF(oi(this,Mo,xl).length,(c=oi(this,Cf))!=null?c:1/0);for(const[h,u]of oi(this,Mo,xl).entries()){const{view:d,axes:f,background:g,title:p}=u,[_,v]=l.getCellCoords(h),b=o[gn(this,l0,pk).call(this,"column",_)],w=a[gn(this,l0,pk).call(this,"row",v)],C=d.getSize(),y=d.getPadding().subtract(d.getOverhang()),D=b.location+y.left,S=w.location+y.top,x=(C.width.grow?b.size:C.width.px)-y.width,k=(C.height.grow?w.size:C.height.px)-y.height,F=new Jd(()=>i.x+D,()=>i.y+S,()=>x,()=>k);u.coords=F,g==null||g.render(t,F,s);const A=dse(d);A&&d.render(t,F,s);for(const[z,H]of Object.entries(f)){const te=H.axisProps;let ie;const ae=H.getPerpendicularSize();z=="bottom"?ie=F.translate(0,F.height+te.offset).modify({height:ae}):z=="top"?ie=F.translate(0,-ae-te.offset).modify({height:ae}):z=="left"?ie=F.translate(-ae-te.offset,0).modify({width:ae}):z=="right"&&(ie=F.translate(F.width+te.offset,0).modify({width:ae})),H.render(t,ie)}A||d.render(t,F,s),p==null||p.render(t,F,as(Ae({},s),{clipRect:void 0}))}t.popView(this)}propagateInteractionEvent(t){if(this.handleInteractionEvent(void 0,t,!0),t.stopped)return;const i=oi(this,Mo,xl).find(r=>r.coords.containsPoint(t.point.x,t.point.y)),s=i==null?void 0:i.view;s&&(s.propagateInteractionEvent(t),(s instanceof fs||s instanceof mh)&&cse(t,i.coords,r=>gn(this,fy,s9).call(this,i.coords,i.view,r),this.context.getCurrentHover())),!t.stopped&&this.handleInteractionEvent(void 0,t,!1)}getDefaultResolution(t,i){return"independent"}}Cf=new WeakMap,yf=new WeakMap,ar=new WeakMap,Sf=new WeakMap,r0=new WeakSet,dk=function(t){var s;const i={view:t,background:void 0,axes:{},coords:Jd.ZERO};if(t instanceof fs||t instanceof mh){const r=(s=t.spec)==null?void 0:s.view;if((r==null?void 0:r.fill)||(r==null?void 0:r.stroke)){const a=new fs(hse(r),this.context,t,"background"+oi(this,Sf));a.blockEncodingInheritance=!0,i.background=a}const o=lse(t.spec.title);if(o){const a=new fs(o,this.context,t,"title"+oi(this,Sf));a.blockEncodingInheritance=!0,i.title=a}}return i},Mo=new WeakSet,xl=function(){return oi(this,ar).filter(t=>t.view.isVisible())},uy=new WeakSet,i9=function(){var t;return new oF(oi(this,Mo,xl).length,(t=oi(this,Cf))!=null?t:1/0)},dy=new WeakSet,n9=function(){if(Object.keys(this.resolutions.axis).length)throw new Error("ConcatView does not (currently) support shared axes!");for(const t of oi(this,ar)){const{view:i,axes:s}=t,r=(o,a,l)=>{var h;const c=o.getAxisProps();if(c!==null){if(!c.orient){for(const u of uk[a])if(!s[u]){c.orient=u;break}if(!c.orient)throw new Error("No slots available for an axis! Perhaps a LayerView has more than two children?")}if((h=c.title)!=null||(c.title=o.getTitle()),!uk[a].includes(c.orient))throw new Error(`Invalid axis orientation "${c.orient}" on channel "${a}"!`);if(s[c.orient])throw new Error(`An axis with the orient "${c.orient}" already exists!`);s[c.orient]=new Jne(c,o.scaleResolution.type,this.context,l)}};if(i instanceof fs||i instanceof mh)for(const o of["x","y"]){const a=i.resolutions.axis[o];!a||r(a,o,i)}if(i instanceof mh){for(const o of i.children)for(const[a,l]of Object.entries(o.resolutions.axis)){const c=l.getAxisProps();c&&c.orient&&r(l,a,o)}for(const o of i.children)for(const[a,l]of Object.entries(o.resolutions.axis)){const c=l.getAxisProps();c&&!c.orient&&r(l,a,o)}}}},kh=new WeakSet,Ep=function(t){const i=t=="column"?["left","right"]:["top","bottom"],s=t=="column"?"width":"height",r=(o,a)=>o.map(l=>{const c=oi(this,Mo,xl)[l].axes[i[a]];if(c)return Math.max(c.getPerpendicularSize()+c.axisProps.offset,0);const h=oi(this,Mo,xl)[l].view.getOverhang();return t=="column"?a?h.right:h.left:a?h.bottom:h.top}).reduce((l,c)=>Math.max(l,c),0);return oi(this,uy,i9)[t=="column"?"colIndices":"rowIndices"].map(o=>({axisBefore:r(o,0),axisAfter:r(o,1),view:nne(o.map(a=>oi(this,Mo,xl)[a].view.getSize()[s]))}))},o0=new WeakSet,fk=function(t){const i=gn(this,kh,Ep).call(this,t),s=[];s.push(Kp);for(const[r,o]of i.entries())r>0&&s.push({px:oi(this,yf),grow:0}),(r==0||this.wrappingFacet)&&s.push(Kp),s.push({px:o.axisBefore,grow:0}),s.push(o.view),s.push({px:o.axisAfter,grow:0}),(r==i.length-1||this.wrappingFacet)&&s.push(Kp);return s},a0=new WeakSet,gk=function(t){var o,a;let i=0,s=0;const r=gn(this,kh,Ep).call(this,t);for(const[l,c]of r.entries())l>0&&(s+=oi(this,yf)),(l==0||this.wrappingFacet)&&(s+=0),s+=c.axisBefore,s+=(o=c.view.px)!=null?o:0,i+=(a=c.view.grow)!=null?a:0,s+=c.axisAfter,(l==r.length-1||this.wrappingFacet)&&(s+=0);return{px:s,grow:i}},l0=new WeakSet,pk=function(t,i){return t=="row"&&this.wrappingFacet?1+6*i+2:2+4*i+1},fy=new WeakSet,s9=function(t,i,s){for(const[r,o]of Object.entries(use(i))){if(o.size<=0)continue;const a=t.normalizePoint(s.x,s.y),l=t.normalizePoint(s.x+s.xDelta,s.y+s.yDelta),c={x:l.x-a.x,y:l.y-a.y};for(const h of o)h.zoom(2**s.zDelta,r=="y"?1-a[r]:a[r],r=="x"?c.x:-c.y)}this.context.animator.requestRender()};function hse(n){return{configurableVisibility:!1,data:{values:[{}]},mark:as(Ae({fill:null,strokeWidth:1,fillOpacity:n.fill?1:0},n),{type:"rect",clip:!1,tooltip:null})}}function use(n){const e={x:new Set,y:new Set};return n.visit(t=>{for(const[i,s]of Object.entries(e)){const r=t.getScaleResolution(i);r&&r.isZoomable()&&s.add(r)}}),e}function dse(n){let e=!0;return n.visit(t=>{t instanceof fs&&e&&(e=t.mark.properties.clip)}),e}class ux extends t9{constructor(e,t,i,s){super(e,t,i,s,_k(e)?e.columns:mk(e)?1:1/0),this.spec=e}_createChildren(){const e=this.spec,t=_k(e)?e.concat:mk(e)?e.vconcat:e.hconcat;this.setChildren(t.map((i,s)=>this.context.createView(i,this,"grid"+s)))}}class fse{constructor(){this.types=[];const e=t=>(i,s,r,o)=>{var a;return new t(i,s,r,(a=i.name)!=null?a:o)};this.addViewType(gse,e(G7)),this.addViewType(wA,e(mh)),this.addViewType(vA,e(fs)),this.addViewType(mk,e(ux)),this.addViewType(pse,e(ux)),this.addViewType(_k,e(ux))}addViewType(e,t){this.types.push({specGuard:e,factory:t})}createView(e,t,i,s){const r=this.types.find(o=>o.specGuard(e));if(r)return r.factory(e,t,i,s!=null?s:"unnamed");throw new Error("Invalid spec, cannot figure out the view type from the properties: "+JSON.stringify([...Object.keys(e)]))}isViewSpec(e){const t=this.types.filter(i=>i.specGuard(e));if(t.length>1)throw new Error("Ambiguous spec. Cannot create a view!");return t.length==1}}function vA(n){return"mark"in n&&(pi(n.mark)||uo(n.mark))}function wA(n){return"layer"in n&&uo(n.layer)}function r9(n){return n&&(vA(n)||wA(n))&&"aggregateSamples"in n}function gse(n){return"import"in n}function mk(n){return"vconcat"in n&&Dr(n.vconcat)}function pse(n){return"hconcat"in n&&Dr(n.hconcat)}function _k(n){return"concat"in n&&Dr(n.concat)}const mse={point:$ie,rect:Fie,rule:qie,link:Zie,text:ine};class fs extends Rf{constructor(e,t,i,s){super(e,t,i,s),this.spec=e;const r=mse[this.getMarkType()];if(r)this.mark=new r(this);else throw new Error(`No such mark: ${this.getMarkType()}`);this.sampleAggregateViews=[],this._initializeAggregateViews(),this.coords=void 0}*[Symbol.iterator](){for(const e of this.sampleAggregateViews)yield e}replaceChild(e,t){const i=this.sampleAggregateViews.indexOf(e);if(i>=0)this.sampleAggregateViews[i]=t;else throw new Error("Not my child view!")}render(e,t,i={}){!this.isVisible()||(this.coords=t,e.pushView(this,t),e.renderMark(this.mark,i),e.popView(this))}getMarkType(){return typeof this.spec.mark=="object"?this.spec.mark.type:this.spec.mark}resolve(e){var i;const t=this.mark.encoding;for(const[s,r]of Object.entries(t)){if(!br(r))continue;let o=bg((i=r.resolutionChannel)!=null?i:s);if(e=="axis"&&!Ym(o))continue;let a=this;for(;a.parent instanceof Rf&&["shared","excluded"].includes(a.parent.getConfiguredOrDefaultResolution(o,e))&&a.getConfiguredOrDefaultResolution(o,e)!="excluded";)a=a.parent;a.resolutions[e][o]||(a.resolutions[e][o]=e=="scale"?new Hne(o):new qne(o)),Ym(s)?a.resolutions[e][o].pushUnitView(this,s):e=="scale"&&a.resolutions[e][o].pushUnitView(this,s)}}getAccessor(e){return this._cache("accessor/"+e,()=>{const t=this.mark.encoding;if(t&&t[e])return this.context.accessorFactory.createAccessor(t[e])})}getFacetAccessor(e){const t=this.getAccessor("sample");return t||super.getFacetAccessor(this)}getCollector(){return this.context.dataFlow.findCollectorByKey(this)}_validateDomainQuery(e){if(qp(e))throw new Error(`getDomain(${e}), must only be called for primary channels!`);const t=this.mark.encoding[e];if(!br(t))throw new Error("The channel has no scale, cannot get domain!");return t}getConfiguredDomain(e){var s,r;const t=this._validateDomainQuery(e),i=t&&t.scale&&t.scale.domain;if(i){const o=this.getScaleResolution((s=t.resolutionChannel)!=null?s:e);return sF((r=t.type)!=null?r:"nominal",o.fromComplexInterval(i))}}extractDataDomain(e){var a;const i=(a=this._validateDomainQuery(e).type)!=null?a:"nominal",s=l=>{let c;const h=this.mark.encoding[l];if(h){const u=this.context.accessorFactory.createAccessor(h);if(u)if(c=sF(i),u.constant)c.extend(u({}));else{const d=this.getCollector();d!=null&&d.completed&&d.visitData(f=>c.extend(u(f)))}}return c};let r=s(e);const o=XN[e];if(o){const l=s(o);l&&r.extendAll(l)}return r}getZoomLevel(){const e=t=>{var i,s;return(s=(i=this.getScaleResolution(t))==null?void 0:i.getZoomLevel())!=null?s:1};return x0.map(e).reduce((t,i)=>t*i,1)}_initializeAggregateViews(){var e,t;if(r9(this.spec))for(const i of this.spec.aggregateSamples){const s=(e=i.transform)!=null?e:[];s.length&&_g(s).type!="collect"&&s.push({type:"collect"}),s.push({type:"mergeFacets"}),i.transform=s,i.encoding=as(Ae({},(t=i.encoding)!=null?t:{}),{sample:null});const r=this.context.createView(i,this,"summaryView");r.getFacetFields=o=>{},this.sampleAggregateViews.push(r)}}propagateInteractionEvent(e){e.target=this}getDefaultResolution(e,t){return e=="x"?"shared":"independent"}}function*CA(n,e=[]){for(const[t,i]of n.entries())if(i instanceof Map)for(const s of CA(i,[...e,t]))yield s;else yield[[...e,t],i]}class yA extends Hi{constructor(e){super(),this.params=e!=null?e:{type:"collect"},this.observers=[],this.facetBatches=void 0,this._init()}_init(){this._data=[],this.facetBatches=new Yh([],JSON.stringify),this.facetBatches.set(void 0,this._data)}reset(){super.reset(),this._init()}handle(e){this._data.push(e)}beginBatch(e){Wie(e)&&(this._data=[],this.facetBatches.set(Go(e.facetId),this._data))}complete(){var s,r;const e=(s=this.params)==null?void 0:s.sort,t=e?BB(e.field,e.order):void 0,i=o=>{t&&o.sort(t)};if((r=this.params.groupby)!=null&&r.length){if(this.facetBatches.size>1)throw new Error("TODO: Support faceted data!");const o=this.params.groupby.map(l=>Xt(l)),a=Ly(this._data,...o);this.facetBatches.clear();for(const[l,c]of CA(a))this.facetBatches.set(l,c)}for(const o of this.facetBatches.values())i(o);if(this.children.length)for(const[o,a]of this.facetBatches.entries()){if(o){const l={type:"facet",facetId:o};for(const c of this.children)c.beginBatch(l)}for(const l of a)this._propagate(l)}super.complete();for(const o of this.observers)o(this)}getData(){switch(this._checkStatus(),this.facetBatches.size){case 0:return[];case 1:return[...this.facetBatches.values()][0];default:{const e=this.facetBatches;return{[Symbol.iterator]:function*(){for(const i of e.values())for(let s=0;s<i.length;s++)yield i[s]}}}}}visitData(e){this._checkStatus();for(const t of this.facetBatches.values())for(let i=0;i<t.length;i++)e(t[i])}getItemCount(){let e=0;for(const t of this.facetBatches.values())e+=t.length;return e}_checkStatus(){if(!this.completed)throw new Error("Data propagation is not completed! No data are available.")}}class Rw{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(e,t){let i=this.length++;for(;i>0;){const s=i-1>>1,r=this.values[s];if(t>=r)break;this.ids[i]=this.ids[s],this.values[i]=r,i=s}this.ids[i]=e,this.values[i]=t}pop(){if(this.length===0)return;const e=this.ids[0];if(this.length--,this.length>0){const t=this.ids[0]=this.ids[this.length],i=this.values[0]=this.values[this.length],s=this.length>>1;let r=0;for(;r<s;){let o=(r<<1)+1;const a=o+1;let l=this.ids[o],c=this.values[o];const h=this.values[a];if(a<this.length&&h<c&&(o=a,l=this.ids[a],c=h),c>=i)break;this.ids[r]=l,this.values[r]=c,r=o}this.ids[r]=t,this.values[r]=i}return e}peek(){if(this.length!==0)return this.ids[0]}peekValue(){if(this.length!==0)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}class _se extends Hi{get behavior(){return dl}constructor(e){super(),this.params=e,this.startAccessor=Xt(e.start),this.endAccessor=Xt(e.end),this.chromAccessor=e.chrom?Xt(e.chrom):t=>{},this.weightAccessor=e.weight?Xt(e.weight):t=>1,this.as={coverage:e.as||"coverage",start:e.asStart||e.start,end:e.asEnd||e.end,chrom:e.asChrom||e.chrom},this.createSegment=new Function("start","end","coverage","chrom","return {"+Object.entries(this.as).filter(([t,i])=>i).map(([t,i])=>`${JSON.stringify(i)}: ${t}`).join(", ")+"};"),this.ends=new Rw}reset(){super.reset(),this.initialize()}initialize(){const e=this.as.coverage,t=this.as.end,i=this.as.chrom,s=this.startAccessor,r=this.endAccessor,o=this.chromAccessor,a=this.weightAccessor;let l,c,h,u=0,d;const f=this.ends;f.clear();const g=(_,v,b)=>{if(_==v)return;let w=!1;l&&(l[e]===b?(l[t]=v,w=!0):l[e]!=0&&this._propagate(l)),w||(l=this.createSegment(_,v,b,h))},p=()=>{let _;for(;(_=f.peekValue())!==void 0;)g(d,_,u),d=_,u-=f.pop();d=void 0,l&&(this._propagate(l),l=void 0)};this.handle=_=>{const v=s(_);let b;for(;(b=f.peekValue())!==void 0&&b<v;)g(d,b,u),d=b,u-=f.pop();if(i){let C=o(_);C!==c&&(p(),h=C,c=h)}d!==void 0&&g(d,v,u),d=v;const w=a(_);u+=w,f.push(w,r(_))},this.complete=()=>{p(),super.complete()}}}function bse(n,e,t=0,i=n.length){const s=new Rw,r=i-t;let o;for(o=0;o<e&&o<r;o++)s.push(o,n[t+o]);for(;o<r;o++){const c=n[t+o];c>=s.peekValue()&&(s.push(o,c),s.pop())}const a=[];let l;for(;(l=s.pop())!==void 0;)a.push(t+l);return a.reverse()}class vse{constructor(e,t=-1/0,i=1/0){this.maxSize=e,this.lowerLimit=t,this.upperLimit=i;const s=this.maxSize*2+1;this.lowerLimits=new Float64Array(s),this.upperLimits=new Float64Array(s),this.lowerChildren=new Int32Array(s),this.upperChildren=new Int32Array(s),this.reset()}reset(){this.lowerLimits.fill(0),this.upperLimits.fill(0),this.lowerChildren.fill(0),this.upperChildren.fill(0),this.n=1,this.lowerLimits[0]=this.lowerLimit,this.upperLimits[0]=this.upperLimit}_findSlot(e,t,i=0){if(e>=this.lowerLimits[i]&&t<=this.upperLimits[i]){const s=this.lowerChildren[i];if(s){const r=this._findSlot(e,t,s);return r>=0?r:this._findSlot(e,t,this.upperChildren[i])}else return i}else return-1}reserve(e,t){if(t-e<=0)throw new Error("Cannot reserve an empty or negative-size slot!");if(this.n+1>this.lowerLimits.length)return!1;const i=this._findSlot(e,t);if(i<0)return!1;const s=this.n++,r=this.n++;return this.lowerLimits[s]=this.lowerLimits[i],this.upperLimits[s]=e,this.lowerLimits[r]=t,this.upperLimits[r]=this.upperLimits[i],this.lowerChildren[i]=s,this.upperChildren[i]=r,!0}}class wse extends Hi{constructor(e,t){var s,r;if(super(),this.params=e,this._data=[],this.channel=(s=e.channel)!=null?s:"x",!["x","y"].includes(this.channel))throw new Error("Invalid channel: "+this.channel);this.posAccessor=Xt(this.params.pos),this.posBisector=Dy(this.posAccessor),this.scoreAccessor=Xt(this.params.score),this.widthAccessor=Xt(this.params.width),this.laneAccessor=this.params.lane?Xt(this.params.lane):o=>0,this.padding=(r=this.params.padding)!=null?r:0,this.reservationMaps=new Map,this.resolution=t.getScaleResolution(this.channel);const i=()=>this._filterAndPropagate();this.schedule=()=>t.context.animator.requestTransition(i),this.resolution.addEventListener("domain",o=>this.schedule()),t._addBroadcastHandler("layoutComputed",()=>this.schedule())}complete(){const e=this.posAccessor;this._data.sort((t,i)=>e(t)-e(i)),this._scores=this._data.map(this.scoreAccessor);for(const t of new Set(this._data.map(this.laneAccessor)))this.reservationMaps.set(t,new vse(200));this.schedule(),super.complete()}_filterAndPropagate(){var o;super.reset();const e=this.resolution.getScale(),t=(o=this.resolution.members[0].view.coords)==null?void 0:o[this.channel=="x"?"width":"height"];if(!t)return;for(const a of this.reservationMaps.values())a.reset();const i=e.domain(),s=70,r=bse(this._scores,s,this.posBisector.left(this._data,i[0]),this.posBisector.right(this._data,i[1]));for(const a of r){const l=this._data[a],c=e(this.posAccessor(l))*t,h=this.widthAccessor(l)/2+this.padding;this.reservationMaps.get(this.laneAccessor(l)).reserve(c-h,c+h)&&this._propagate(l)}super.complete()}reset(){super.reset(),this._data=[],this.groups=new Map}handle(e){this._data.push(e)}}class Cse extends Hi{constructor(e){super(),this.params=e,this.predicate=void 0}initialize(){this.predicate=YN(this.params.expr,this.getGlobalObject())}handle(e){this.predicate(e)&&this._propagate(e)}}const yse="0".charCodeAt(0);function*Sse(n,e=","){const t=e.charCodeAt(0);let i=0;for(let s=0;s<n.length;s++){const r=n.charCodeAt(s);r==t?(yield i,i=0):i=i*10+r-yse}yield i}class xse extends Hi{get behavior(){return dl}constructor(e){var o,a;super();const t=Xt((o=e.exons)!=null?o:"exons"),i=Xt((a=e.start)!=null?a:"start"),[s,r]=e.as||["exonStart","exonEnd"];this.handle=l=>{let c=i(l),h=c,u=!0;const d=t(l);for(const f of Sse(d)){if(u)h=c+f;else{c=h+f;const g=Object.assign({},l);g[s]=h,g[r]=c,this._propagate(g)}u=!u}}}}class Dse extends Hi{get behavior(){return dl}constructor(e){super();const t=Go(e.field).map(r=>Xt(r)),i=Go(e.separator),s=Go(e.as||e.field);if(t.length!==i.length||t.length!==s.length)throw new Error(`Lengths of "separator" (${i.length}), "fields" (${t.length}), and "as" (${s.length}) do not match!`);this.handle=r=>{if(t.some(l=>!l(r)))return;const o=t.map((l,c)=>l(r).split(i[c]));Lse(o,r);const a=o[0].length;for(let l=0;l<a;l++){const c=Object.assign({},r);for(let h=0;h<t.length;h++)c[s[h]]=o[h][l];this._propagate(c)}}}}function Lse(n,e){const t=n.map(i=>i.length);if(!t.every(i=>i==t[0]))throw new Error("Mismatching number of elements in the fields to be split: "+JSON.stringify(e))}class kse extends Hi{get behavior(){return Mc}constructor(e){super(),this.params=e,this.as=e.as,this.fn=void 0}initialize(){this.fn=YN(this.params.expr,this.getGlobalObject())}handle(e){e[this.as]=this.fn(e),this._propagate(e)}}class o9 extends Hi{get behavior(){return Mc}constructor(e,t){var g;super();const i=(g=e.channel)!=null?g:"x";if(!["x","y"].includes(i))throw new Error("Invalid channel: "+i);const s=t.getScaleResolution(i).getGenome();if(!s)throw new Error("LinearizeGenomicCoordinate transform requires a locus scale!");const r=Xt(e.chrom),o=Go(e.pos).map(p=>Xt(p)),a=Go(e.as);if(o.length!=a.length)throw new Error('The number of "pos" and "as" elements must be equal!');const l=Go(e.offset);let c;if(l.length==0)c=new Array(o.length).fill(0);else if(l.length==1)c=new Array(o.length).fill(l[0]);else if(l.length==o.length)c=l;else throw new Error(`Invalid "offset" parameter: ${JSON.stringify(e.offset)}!`);const h=new Function("datum","chromOffset","posAccessors",a.map((p,_)=>`datum[${JSON.stringify(p)}] = chromOffset + +posAccessors[${_}](datum) - ${c[_]};`).join(`
`));let u,d=0;const f=p=>{if(p!==u){if(d=s.cumulativeChromPositions.get(p),d===void 0)throw new Error("Unknown chromosome/contig: "+p);u=p}return d};this.handle=p=>{h(p,f(r(p)),o),this._propagate(p)}}}const Ese=["Lato-Regular.png"],Ise=[{id:87,width:53,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:43.491,chnl:15,x:0,y:0,page:0},{id:124,width:17,height:50,xoffset:0,yoffset:-32.193000000000005,xadvance:10.521,chnl:15,x:0,y:42,page:0},{id:40,width:20,height:49,xoffset:0,yoffset:-32.571000000000005,xadvance:11.214,chnl:15,x:0,y:94,page:0},{id:41,width:19,height:49,xoffset:0,yoffset:-32.571000000000005,xadvance:11.214,chnl:15,x:0,y:145,page:0},{id:36,width:32,height:49,xoffset:0,yoffset:-34.419000000000004,xadvance:24.360000000000003,chnl:15,x:0,y:196,page:0},{id:125,width:21,height:48,xoffset:0,yoffset:-32.193000000000005,xadvance:12.642000000000001,chnl:15,x:0,y:247,page:0},{id:91,width:22,height:48,xoffset:0,yoffset:-32.193000000000005,xadvance:12.852,chnl:15,x:0,y:297,page:0},{id:93,width:19,height:48,xoffset:0,yoffset:-32.193000000000005,xadvance:12.852,chnl:15,x:0,y:347,page:0},{id:123,width:21,height:48,xoffset:0,yoffset:-32.193000000000005,xadvance:12.642000000000001,chnl:15,x:0,y:397,page:0},{id:106,width:19,height:48,xoffset:0,yoffset:-30.639000000000003,xadvance:10.08,chnl:15,x:0,y:447,page:0},{id:81,width:43,height:47,xoffset:0,yoffset:-30.429000000000002,xadvance:33.621,chnl:15,x:21,y:447,page:0},{id:77,width:45,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:38.997,chnl:15,x:66,y:447,page:0},{id:64,width:43,height:44,xoffset:0,yoffset:-28.539,xadvance:35.133,chnl:15,x:23,y:397,page:0},{id:92,width:28,height:43,xoffset:0,yoffset:-30.933000000000003,xadvance:18.984,chnl:15,x:68,y:397,page:0},{id:47,width:28,height:43,xoffset:0,yoffset:-30.933000000000003,xadvance:18.984,chnl:15,x:98,y:397,page:0},{id:109,width:42,height:32,xoffset:0,yoffset:-21.609,xadvance:34.545,chnl:15,x:113,y:447,page:0},{id:119,width:42,height:31,xoffset:0,yoffset:-21.315,xadvance:32.991,chnl:15,x:157,y:447,page:0},{id:42,width:25,height:42,xoffset:0,yoffset:-31.626,xadvance:17.85,chnl:15,x:128,y:397,page:0},{id:37,width:42,height:41,xoffset:0,yoffset:-30.387,xadvance:33.663000000000004,chnl:15,x:155,y:397,page:0},{id:79,width:42,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:33.621,chnl:15,x:199,y:397,page:0},{id:102,width:24,height:41,xoffset:0,yoffset:-30.534000000000002,xadvance:14.721,chnl:15,x:243,y:397,page:0},{id:100,width:31,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:23.520000000000003,chnl:15,x:269,y:397,page:0},{id:98,width:32,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:23.520000000000003,chnl:15,x:302,y:397,page:0},{id:56,width:32,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:336,y:397,page:0},{id:38,width:40,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:29.904000000000003,chnl:15,x:370,y:397,page:0},{id:108,width:17,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:9.912,chnl:15,x:412,y:397,page:0},{id:107,width:31,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:21.336000000000002,chnl:15,x:431,y:397,page:0},{id:48,width:33,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:464,y:397,page:0},{id:71,width:38,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:30.681,chnl:15,x:21,y:347,page:0},{id:83,width:31,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:22.785,chnl:15,x:61,y:347,page:0},{id:63,width:27,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:18.795,chnl:15,x:94,y:347,page:0},{id:105,width:18,height:41,xoffset:0,yoffset:-30.639000000000003,xadvance:10.08,chnl:15,x:123,y:347,page:0},{id:51,width:32,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:143,y:347,page:0},{id:104,width:31,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:23.436,chnl:15,x:177,y:347,page:0},{id:67,width:37,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:28.056,chnl:15,x:210,y:347,page:0},{id:88,width:37,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:27.258000000000003,chnl:15,x:249,y:347,page:0},{id:68,width:40,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:31.941000000000003,chnl:15,x:288,y:347,page:0},{id:70,width:32,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:23.751,chnl:15,x:330,y:347,page:0},{id:34,width:23,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:15.561000000000002,chnl:15,x:364,y:347,page:0},{id:72,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:32.067,chnl:15,x:389,y:347,page:0},{id:73,width:18,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:11.760000000000002,chnl:15,x:429,y:347,page:0},{id:74,width:24,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:17.745,chnl:15,x:449,y:347,page:0},{id:75,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:27.825000000000003,chnl:15,x:24,y:297,page:0},{id:76,width:31,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:21.567,chnl:15,x:475,y:347,page:0},{id:66,width:35,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:27.153000000000002,chnl:15,x:64,y:297,page:0},{id:78,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:32.067,chnl:15,x:101,y:297,page:0},{id:33,width:18,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:11.298,chnl:15,x:141,y:297,page:0},{id:80,width:34,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:25.221,chnl:15,x:161,y:297,page:0},{id:65,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:28.434,chnl:15,x:197,y:297,page:0},{id:82,width:36,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:26.313000000000002,chnl:15,x:237,y:297,page:0},{id:35,width:33,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:275,y:297,page:0},{id:84,width:34,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.801000000000002,chnl:15,x:310,y:297,page:0},{id:85,width:37,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:30.891000000000002,chnl:15,x:346,y:297,page:0},{id:86,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:28.434,chnl:15,x:385,y:297,page:0},{id:39,width:16,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:8.568000000000001,chnl:15,x:425,y:297,page:0},{id:69,width:32,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.255000000000003,chnl:15,x:443,y:297,page:0},{id:89,width:36,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:26.208000000000002,chnl:15,x:23,y:247,page:0},{id:90,width:34,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:25.284000000000002,chnl:15,x:477,y:297,page:0},{id:49,width:31,height:40,xoffset:0,yoffset:-30.156000000000002,xadvance:24.360000000000003,chnl:15,x:61,y:247,page:0},{id:50,width:32,height:40,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:94,y:247,page:0},{id:57,width:32,height:40,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:128,y:247,page:0},{id:94,width:32,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:162,y:247,page:0},{id:96,width:21,height:40,xoffset:0,yoffset:-30.429000000000002,xadvance:16.8,chnl:15,x:196,y:247,page:0},{id:55,width:33,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:219,y:247,page:0},{id:54,width:33,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:254,y:247,page:0},{id:53,width:32,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:289,y:247,page:0},{id:52,width:33,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:323,y:247,page:0},{id:103,width:31,height:39,xoffset:0,yoffset:-21.630000000000003,xadvance:21.84,chnl:15,x:358,y:247,page:0},{id:112,width:32,height:39,xoffset:0,yoffset:-21.651,xadvance:23.541,chnl:15,x:391,y:247,page:0},{id:113,width:31,height:39,xoffset:0,yoffset:-21.651,xadvance:23.520000000000003,chnl:15,x:425,y:247,page:0},{id:116,width:25,height:39,xoffset:0,yoffset:-28.182000000000002,xadvance:15.057,chnl:15,x:458,y:247,page:0},{id:121,width:31,height:38,xoffset:0,yoffset:-21.273,xadvance:21.651,chnl:15,x:34,y:196,page:0},{id:59,width:18,height:36,xoffset:0,yoffset:-20.706,xadvance:10.983,chnl:15,x:485,y:247,page:0},{id:43,width:32,height:34,xoffset:0,yoffset:-24.486,xadvance:24.360000000000003,chnl:15,x:67,y:196,page:0},{id:60,width:30,height:33,xoffset:0,yoffset:-23.331000000000003,xadvance:24.360000000000003,chnl:15,x:101,y:196,page:0},{id:62,width:31,height:33,xoffset:0,yoffset:-23.331000000000003,xadvance:24.360000000000003,chnl:15,x:133,y:196,page:0},{id:117,width:30,height:32,xoffset:0,yoffset:-21.273,xadvance:23.415000000000003,chnl:15,x:166,y:196,page:0},{id:99,width:29,height:32,xoffset:0,yoffset:-21.609,xadvance:20.055,chnl:15,x:198,y:196,page:0},{id:110,width:31,height:32,xoffset:0,yoffset:-21.609,xadvance:23.436,chnl:15,x:229,y:196,page:0},{id:111,width:32,height:32,xoffset:0,yoffset:-21.609,xadvance:23.814,chnl:15,x:262,y:196,page:0},{id:126,width:32,height:26,xoffset:0,yoffset:-16.128,xadvance:24.360000000000003,chnl:15,x:201,y:447,page:0},{id:101,width:31,height:32,xoffset:0,yoffset:-21.609,xadvance:22.176000000000002,chnl:15,x:296,y:196,page:0},{id:114,width:25,height:32,xoffset:0,yoffset:-21.651,xadvance:15.288,chnl:15,x:329,y:196,page:0},{id:115,width:27,height:32,xoffset:0,yoffset:-21.609,xadvance:18.186,chnl:15,x:356,y:196,page:0},{id:97,width:28,height:32,xoffset:0,yoffset:-21.651,xadvance:20.874000000000002,chnl:15,x:385,y:196,page:0},{id:118,width:31,height:31,xoffset:0,yoffset:-21.273,xadvance:21.672,chnl:15,x:415,y:196,page:0},{id:61,width:31,height:29,xoffset:0,yoffset:-19.089000000000002,xadvance:24.360000000000003,chnl:15,x:448,y:196,page:0},{id:120,width:30,height:31,xoffset:0,yoffset:-21.273,xadvance:20.916,chnl:15,x:21,y:145,page:0},{id:58,width:18,height:31,xoffset:0,yoffset:-20.706,xadvance:10.5,chnl:15,x:53,y:145,page:0},{id:122,width:28,height:31,xoffset:0,yoffset:-21.273,xadvance:18.984,chnl:15,x:73,y:145,page:0},{id:95,width:28,height:16,xoffset:0,yoffset:0,xadvance:19.278000000000002,chnl:15,x:235,y:447,page:0},{id:45,width:23,height:24,xoffset:0,yoffset:-14.175,xadvance:15.603000000000002,chnl:15,x:481,y:196,page:0},{id:44,width:17,height:21,xoffset:0,yoffset:-4.956,xadvance:9.534,chnl:15,x:103,y:145,page:0},{id:46,width:18,height:15,xoffset:0,yoffset:-4.956,xadvance:9.912,chnl:15,x:0,y:497,page:0},{id:32,width:0,height:0,xoffset:0,yoffset:0,xadvance:10.752,chnl:15,x:20,y:497,page:0}],Tse={face:"Lato Regular",size:42,bold:0,italic:0,charset:[" ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~"],unicode:1,stretchH:100,smooth:1,aa:1,padding:[0,0,0,0],spacing:[2,2]},Nse={lineHeight:50.400000000000006,base:41.454,scaleW:512,scaleH:512,pages:1,packed:0,alphaChnl:0,redChnl:0,greenChnl:0,blueChnl:0},Ase=[];var a9={pages:Ese,chars:Ise,info:Tse,common:Nse,kernings:Ase};class Mse extends Hi{get behavior(){return Mc}constructor(e){super();const t=rk(a9),i=Xt(e.field),s=e.as,r=e.fontSize;this.handle=o=>{const a=i(o);a!==void 0?o[s]=t.measureWidth(a,r):o[s]=0,this._propagate(o)}}}const Rse=65536;class Ose extends Hi{get behavior(){return Mc}constructor(e){super(),this.params=e}reset(){this.initialize()}initialize(){const e=this.params,t=e.as||"lane",i=ys(e.spacing)?e.spacing:1,s=Xt(e.start),r=Xt(e.end);if(!e.preference!=!e.preferredOrder)throw new Error('Must specify both "preference" and "preferredOrder"');if(e.preference){const o=new Float64Array(Rse),a=Xt(e.preference),l=e.preferredOrder;let c=1/0;this.handle=h=>{const u=s(h);u<c&&o.fill(-1/0),c=u;const d=l.indexOf(a(h));let f=-1;if(d>=0&&o[d]<u)f=d;else{const g=s(h);for(f=0;f<o.length&&!(o[f]<g);f++);if(f>=o.length)throw new Error("Out of lanes!")}o[f]=r(h)+i,h[t]=f,this._propagate(h)}}else{const o=new Rw,a=new Rw;let l=-1/0,c=0;this.handle=h=>{const u=s(h);for(;o.length&&(o.peekValue()<=u||u<l);){const f=o.pop();a.push(f,f)}l=u;let d=a.pop();d===void 0&&(d=c++),h[t]=d,this._propagate(h),o.push(d,r(h)+i)}}}}class Fse extends Hi{get behavior(){return dl}constructor(e){if(super(),e.as&&e.as.length!=e.fields.length)throw new Error('"fields" and "as" have unequal lengths!');const t=e.fields.map(s=>Xt(s)),i=e.as?e.as:t.map(Fq);this.handle=s=>{const r={};for(let o=0;o<t.length;o++)r[i[o]]=t[o](s);this._propagate(r)}}}class Pse extends Hi{get behavior(){return Mc}constructor(e){super();const t=new RegExp(e.regex),i=typeof e.as=="string"?[e.as]:e.as,s=Xt(e.field);this.handle=r=>{const o=s(r);if(pi(o)){const a=o.match(t);if(a){if(a.length-1!=i.length)throw new Error('The number of RegEx groups and the length of "as" do not match!');for(let l=0;l<i.length;l++)r[i[l]]=a[l+1]}else if(e.skipInvalidInput)for(let l=0;l<i.length;l++)r[i[l]]=void 0;else throw new Error(`"${o}" does not match the given regex: ${t.toString()}`)}else if(!e.skipInvalidInput)throw new Error(`Trying to match a non-string field. Encountered type: ${typeof o}, field content: "${o}".`);this._propagate(r)}}}class Bse extends Hi{get behavior(){return dl}constructor(e){super();const t=Go(e.columnRegex).map(d=>new RegExp(d)),i=Go(e.asValue);if(t.length!=i.length)throw new Error('Lengths of "columnRegex" and "as" are not equal!');const s=e.skipRegex?new RegExp(e.skipRegex):void 0,r=e.asKey||"sample";let o,a,l;const c=d=>{var _;const f=Object.keys(d),g=new Map;for(const[v,b]of t.entries())for(const w of f){const C=(_=b.exec(w))==null?void 0:_[1];if(C!==void 0){let y=g.get(C);y||(y=[],g.set(C,y)),y[v]=w}}o=[...g.entries()],a=f.filter(v=>!t.some(b=>b.test(v))&&!(s&&s.test(v)));const p=[...a.map(v=>JSON.stringify(v)+": datum["+JSON.stringify(v)+"]"),JSON.stringify(r)+": sampleId",...i.map(v=>JSON.stringify(v)+": null")];l=new Function("datum","sampleId",`return {
`+p.join(`,
`)+`
};`)},h=d=>{o||c(d);for(const[f,g]of o){const p=l(d,f);for(let _=0;_<g.length;_++)p[i[_]]=d[g[_]];this._propagate(p)}},u=d=>{c(d),h(d),this.handle=h};this.handle=u,this.beginBatch=d=>{N7(d)&&(this.handle=u),super.beginBatch(d)}}}class Vse extends Hi{get behavior(){return Mc}constructor(e){super(),this.params=e,this.buffer=[]}reset(){this.buffer=[]}handle(e){this.buffer.push(e)}complete(){var h;const e=this.params,t=e.as||["y0","y1"],i=e.sort?BB(e.sort.field,e.sort.order):void 0,s=e.field?Xt(e.field):()=>1,r=e.groupby.map(u=>Xt(u)),o=LK(this.buffer,u=>r.map(d=>d(u)).join()).map(u=>u[1]);let a=u=>!0;if(e.baseField){const u=Xt(e.baseField);a=d=>u(d)!==null}let l,c;switch(e.offset){case"normalize":l=(u,d)=>u/d,c=(u,d)=>hb(u,d);break;case"center":l=(u,d)=>u-d/2,c=(u,d)=>hb(u,d);break;case"information":{const u=Math.log2((h=e.cardinality)!=null?h:4);l=(d,f)=>d/f,c=(d,f)=>{const p=hb(d,w=>+!a(w)),_=hb(d,f),v=_-p;let b=0;for(let w=0;w<d.length;w++){const C=d[w];if(a(C)){const y=f(C)/v;b-=y*Math.log2(y)}}return v/(u-(b+0))*(v/_)}}break;default:l=(u,d)=>u,c=(u,d)=>1}for(const u of o){i&&u.sort(i);const d=c(u,s);let f=0;for(const g of u){const p=f+s(g);a(g)&&(g[t[0]]=l(f,d),g[t[1]]=l(p,d),this._propagate(g),f=p)}}super.complete()}}class Wse extends Hi{get behavior(){return dl}constructor(e){var r,o;super();const t=Xt((r=e.field)!=null?r:"sequence"),[i,s]=(o=e.as)!=null?o:["pos","sequence"];this.handle=a=>{const l=Object.assign({},a,{[s]:"",[i]:0}),c=t(a);for(let h=0;h<c.length;h++){const u=Object.assign({},l);u[i]=h,u[s]=c.charAt(h),this._propagate(u)}}}}class zse extends Hi{get behavior(){return dl}constructor(e){super(),this.params=e,this.buffer=[]}reset(){this.buffer=[]}handle(e){this.buffer.push(e)}complete(){const t=this.params.groupby,i=t.map(r=>Xt(r)),s=Ly(this.buffer,...i);for(const[r,o]of CA(s)){const a={count:o.length};for(let l=0;l<t.length;l++)a[t[l]]=r[l];this._propagate(a)}super.complete()}}const Hse="_uniqueId",cF=1e4,hF=[null];class l9 extends Hi{get behavior(){return Mc}constructor(e){var t;super(),this.params=e,this.as=(t=e.as)!=null?t:Hse,this._blocks=[],this._usedBlocks=0,this._id=-1}initialize(){}reset(){super.reset(),this._usedBlocks=0,this._id=-1}handle(e){e[this.as]=this._nextId(),this._propagate(e)}_nextId(){return++this._id%cF==0&&(this._id=this._getBlock()*cF),this._id}_getBlock(){return this._usedBlocks<this._blocks.length?this._blocks[this._usedBlocks++]:this._reserveBlock()}_reserveBlock(){const e=hF.length;return hF[e]=this,this._blocks.push(e),this._usedBlocks++,e}}const $se={aggregate:zse,collect:yA,coverage:_se,filterScoredLabels:wse,filter:Cse,flattenCompressedExons:xse,flattenDelimited:Dse,flattenSequence:Wse,formula:kse,identifier:l9,linearizeGenomicCoordinate:o9,measureText:Mse,pileup:Ose,project:Fse,regexExtract:Pse,regexFold:Bse,sample:A7,stack:Vse};function Use(n,e){const t=$se[n.type];if(t)return new t(n,e);throw new Error("Unknown transform: "+n.type)}function jse(n){return"values"in n}class qse extends yg{constructor(e){var t;if(super(),this.params=e,typeof e.values=="string"&&!((t=e==null?void 0:e.format)!=null&&t.type))throw new Error("Data format type (csv, dsv, ...) must be specified if a string is provided!")}loadSynchronously(){const e=this.params.values;let t=[],i=s=>s;if(Array.isArray(e))e.length>0&&(t=e,i=s1(e[0]));else if(typeof e=="object")t=[e];else if(typeof e=="string")t=xN(e,Y7(this.params));else throw new Error('"values" in data configuration is not an array, object, or a string!');this.reset(),this.beginBatch({type:"file"});for(const s of t)this._propagate(i(s));this.complete()}async load(){this.loadSynchronously()}}function Kse(n){return"url"in n}class Gse extends yg{constructor(e,t){super(),this.params=e,this.baseUrl=t}get identifier(){return JSON.stringify({params:this.params,baseUrl:this.baseUrl})}async load(){const e=this.params.url,t=Array.isArray(e)?e:[e],i=async r=>Ny({baseURL:this.baseUrl}).load(r).catch(o=>{throw new Error(`Cannot fetch: ${this.baseUrl}${r}: ${o.message}`)}),s=(r,o)=>{try{const a=xN(r,Y7(this.params));this.beginBatch({type:"file",url:o});for(const l of a)this._propagate(l)}catch(a){throw new Error(`Cannot parse: ${o}: ${a.message}`)}};this.reset(),await Promise.all(t.map(r=>i(r).then(s))),this.complete()}}function Yse(n){return"sequence"in n}class Zse extends yg{constructor(e){if(super(),this.sequence=e.sequence,!("start"in this.sequence))throw new Error("'start' is missing from sequence parameters!");if(!("stop"in this.sequence))throw new Error("'stop' is missing from sequence parameters!")}loadSynchronously(){const e=this.sequence.as||"data",t=this.sequence.step||1,i=this.sequence.stop;this.reset(),this.beginBatch({type:"file"});for(let s=this.sequence.start;s<i;s+=t)this._propagate({[e]:s});this.complete()}async load(){this.loadSynchronously()}}function Xse(n){return"dynamicSource"in n}class Qse extends yg{publishData(e){this.reset(),this.beginBatch({type:"file"});let t;for(const i of e)t||(t=s1(i)),this._propagate(t(i));this.complete()}async load(){}}function Jse(n,e){if(jse(n))return new qse(n);if(Kse(n))return new Gse(n,e);if(Yse(n))return new Zse(n);if(Xse(n))return new Qse;throw new Error("Cannot figure out the data source type: "+JSON.stringify(n))}function ere(n){const e=Object.keys(n).filter(i=>typeof i=="string"),t=new Function("source","return { "+e.map(i=>JSON.stringify(i)).map(i=>`${i}: source[${i}]`).join(`,
`)+" };");return t.properties=e,t}class c9 extends Hi{get behavior(){return dl}constructor(){super();const e=t=>{const i=ere(t);this.handle=s=>this._propagate(i(s)),this.handle(t)};this.handle=e,this.beginBatch=t=>{N7(t)&&(this.handle=e),super.beginBatch(t)}}}class h9{constructor(){this._dataSourcesByHost=new Map,this._collectorsByHost=new Map,this._observers=new Map}get dataSources(){return[...new Set(this._dataSourcesByHost.values()).values()]}get collectors(){return[...this._collectorsByHost.values()]}addObserver(e,t){let i=this._observers.get(t);i||(i=[],this._observers.set(t,i)),i.push(e)}_relayObserverCallback(e,t){const i=this._observers.get(t);if(i)for(const s of i)s(e)}addDataSource(e,t){this._dataSourcesByHost.set(t,e)}findDataSourceByKey(e){return this._dataSourcesByHost.get(e)}addCollector(e,t){this._collectorsByHost.set(t,e),e.observers.push(i=>this._relayObserverCallback(i,t))}findCollectorByKey(e){return this._collectorsByHost.get(e)}initialize(){for(const e of this.dataSources)e.visit(t=>t.initialize())}}function tre(n){return"name"in n}class ire extends yg{constructor(e,t){super(),this.getNamedData=t,this.params=e}get identifier(){return this.params.name}_getValues(){const e=this.getNamedData(this.params.name);if(e)return e;throw new Error("Cannot find named data: "+this.params.name)}loadSynchronously(){const e=this._getValues();let t=i=>i;if(Array.isArray(e))e.length>0&&(t=s1(e[0]));else throw new Error(`Named data "${this.params.name}" is not an array!`);this.reset(),this.beginBatch({type:"file"});for(const i of e)this._propagate(t(i));this.complete()}async load(){this.loadSynchronously()}}function nre(n,e){const t=[];let i;const s=e!=null?e:new h9,r=[];function o(h,u=()=>{}){if(!i)throw u()||new Error("Cannot append data flow node, no parent exist!");return i.addChild(h),i=h,h}function a(h,u){return o(h,()=>new Error(`Cannot append a transform because no (inherited) data are available! ${u?JSON.stringify(u):""}`))}function l(h,u){for(const d of h){let f;try{f=Use(d,u)}catch(g){throw console.warn(g),new Error(`Cannot initialize "${d.type}" transform: ${g}`)}f.behavior&Mc&&a(new c9),a(f)}}const c=h=>{if(t.push(i),h.spec.data){const u=Qne(h.spec.data)?h.getDynamicDataSource():tre(h.spec.data)?new ire(h.spec.data,h.context.getNamedData):Jse(h.spec.data,h.getBaseUrl());i=u,s.addDataSource(u,h)}if(h.spec.transform&&l(h.spec.transform,h),h instanceof fs){if(!i)throw new Error("A unit view has no (inherited) data source");const u=sre(h);if(u){r.push(u.rewrite);for(const f of u.transforms)a(f)}h.mark.isPickingParticipant()&&a(new l9({type:"identifier"}));const d=new yA({type:"collect",groupby:h.getFacetFields(),sort:rre(h,u==null?void 0:u.rewrittenEncoding)});o(d),s.addCollector(d,h)}r9(h.spec)};return c.postOrder=h=>{i=t.pop()},n.visit(c),r.forEach(h=>h()),s}function sre(n){var r,o,a,l;const e=[],t={},i=[];for(const[c,h]of Object.entries(n.getEncoding())){const u=c;Ym(u)&&b6(h)&&i.push({channel:u,chromPosDef:h})}const s=Ly(i,c=>bg(c.channel),c=>c.chromPosDef.chrom);for(const[c,h]of s.entries())for(const[u,d]of h.entries()){const f=[],g=[],p=[];for(const{channel:_,chromPosDef:v}of d){const b=y=>y.replace(/[^A-Za-z0-9_]/g,""),w=["_linearized_",b(v.chrom),"_",b(v.pos)].join(""),C=as(Ae({},(a=(o=(r=n.spec.encoding)==null?void 0:r[_])!=null?o:n.getEncoding()[_])!=null?a:{}),{field:w});delete C.chrom,delete C.pos,!C.type&&v.type&&(C.type=v.type),t[_]=C,f.push(v.pos),p.push((l=v.offset)!=null?l:0),g.push(w)}e.push(new o9({type:"linearizeGenomicCoordinate",channel:c,chrom:u,pos:f,offset:p,as:g},n))}return e.length?{transforms:e,rewrittenEncoding:t,rewrite:()=>{n.spec.encoding=Ae(Ae({},n.spec.encoding),t),x7(n.mark,"encoding")}}:void 0}function rre(n,e){var i;const t=Ae(Ae({},n.getEncoding()),e).x;if(br(t)&&(i=n.getScaleResolution("x"))!=null&&i.isZoomable()){if(y0(t))return{field:t.field};if(!S0(t))throw new Error("A zoomable x channel must be mapped to a field.")}}function u9(n,e=void 0){if(n.parent!==e)return!1;for(const t of n.children)if(!u9(t,n))return!1;return!0}function bk(n,e=!1){if(n instanceof yA&&(e=!0),n instanceof c9)if(e)e=!1;else{const t=n.children[0];n.excise(),t&&bk(t,e);return}n.behavior&dl&&(e=!1);for(let t=0,i=n.children.length;t<i;t++)bk(n.children[t],e||t<i-1)}function ore(n){const e=[...n._dataSourcesByHost.entries()],t=new Map;for(const i of e){const s=i[1];s.identifier&&!t.has(s.identifier)&&t.set(s.identifier,s)}n._dataSourcesByHost.clear();for(let[i,s]of e){const r=t.get(s.identifier);r&&(r.adoptChildrenOf(s),s=r),n.addDataSource(s,i)}}function are(n){if(bk(n),!u9(n))throw new Error("Encountered a bug! There's a problem in the data flow structure.")}function lre(n){for(const e of n.dataSources)are(e);ore(n)}function cre(n){n.visit(t=>{t instanceof fs&&t.resolve("scale")});const e=new Set;n.visit(t=>{for(const i of Object.values(t.resolutions.scale)){const s=i.name;if(s&&e.has(s))throw new Error(`The same scale name "${s}" occurs in multiple scale resolutions!`);e.add(s)}}),n.visit(t=>{t instanceof fs&&t.resolve("axis")}),n.visit(t=>t.onScalesResolved())}function hre(n){for(const e of x0){const t=n.getScaleResolution(e);t&&!t.name&&t.isZoomable()&&(t.name=`${e}_at_root`)}}async function ure(n,e,t){var o;if(!n.import.url)throw new Error("Cannot import, not an import spec: "+JSON.stringify(n));const i=Ny({baseURL:e}),s=n.import.url,r=JSON.parse(await i.load(s).catch(a=>{throw new Error(`Could not load imported view spec: ${s} 
Reason: ${a.message}`)}));if(t.isViewSpec(r))return r.baseUrl=(o=s.match(/^[^?#]*\//))==null?void 0:o[0],r;throw new Error(`The imported spec "${s}" is not a view spec: ${JSON.stringify(n)}`)}async function d9(n){const e=[];n.visit(t=>{if(t instanceof G7)return e.push(t),M7});for(const t of e){const i=t.context,s=await ure(t.spec,t.getBaseUrl(),i),r=i.createView(s,t.parent,t.name);t.parent.replaceChild(t,r),await d9(r)}}class f9{constructor(e){this.globalOptions=e}pushView(e,t){}popView(e){}renderMark(e,t){}}class uF extends f9{constructor(e,t){super(e),this.webGLHelper=t,this.buffer=[],this.coords=void 0,this.views=new Set}pushView(e,t){this.views.add(e),this.coords=t}renderMark(e,t){if(this.globalOptions.picking&&!e.isPickingParticipant())return;const i=e.render(t);i&&this.buffer.push({mark:e,callback:i,coords:this.coords,clipRect:t.clipRect})}renderDeferred(){if(this.batch||this._buildBatch(),this.batch.length==0)return;const e=this.webGLHelper.gl,t=this.globalOptions.picking;e.bindFramebuffer(e.FRAMEBUFFER,t?this.webGLHelper._pickingBufferInfo.framebuffer:null),this.webGLHelper.clearAll();for(const i of this.views)i.onBeforeRender();for(const i of this.batch)i();t&&e.bindFramebuffer(e.FRAMEBUFFER,null)}_buildBatch(){this.batch=[];let e=!0,t=!0;const i=o=>()=>{e&&o()},s=o=>()=>{e&&t&&o()},r=Ly(this.buffer,o=>o.mark);for(const[o,a]of r.entries()){if(!o.isReady())continue;this.batch.push(()=>{e=o.unitView.getEffectiveOpacity()>0}),this.batch.push(...o.prepareRender(this.globalOptions).map(c=>i(c)));let l;for(const c of a){const h=c.coords;h.equals(l)||this.batch.push(i(()=>{t=o.setViewport(h,c.clipRect)})),this.batch.push(s(c.callback)),l=c.coords}}}}class dre extends f9{constructor(...e){super({}),this.contexts=e}pushView(e,t){for(const i of this.contexts)i.pushView(e,t)}popView(e){for(const t of this.contexts)t.popView(e)}renderMark(e,t){for(const i of this.contexts)i.renderMark(e,t)}}class fre{constructor(e,t){this.point=e,this.uiEvent=t,this.stopped=!1,this.target=void 0}stopPropagation(){this.stopped=!0}get type(){return this.uiEvent.type}}class gre{constructor(e,t){this.x=e,this.y=t}equals(e){return e?e===this||e.x===this.x&&e.y===this.y:!1}}const pre=n=>new Promise(e=>setTimeout(e,n));function mre(n){const e=n.requestAnimationFrame||window.requestAnimationFrame,t=n.signal,i=()=>new Promise((s,r)=>{if(t!=null&&t.aborted)return r("aborted");const o=performance.now(),a=o+(n.duration||1e3),l=typeof n.from=="number"?n.from:0,c=typeof n.to=="number"?n.to:1,h=n.easingFunction||(p=>p),u=p=>(p-o)/(a-o),d=p=>p*(c-l)+l,f=p=>Math.max(0,Math.min(1,p)),g=p=>{t!=null&&t.aborted?r("aborted"):(n.onUpdate(d(h(f(u(p))))),p<a?e(g):(n.onUpdate(d(h(1))),s()))};e(g)});return n.delay?t!=null&&t.aborted?Promise.reject("aborted"):pre(n.delay).then(i):i()}class _re{constructor(e){this._renderCallback=e,this._renderRequested=!1,this._warn=!1,this.transitions=[]}requestTransition(e){this.cancelTransition(e),this.transitions.push(e),this.requestRender()}cancelTransition(e){const t=this.transitions.indexOf(e);t>=0&&this.transitions.splice(t,1)}requestRender(){this._renderRequested?this._warn&&console.warn("Render already requested!"):(this._renderRequested=!0,window.requestAnimationFrame(e=>{this._renderRequested=!1;const t=this.transitions;this.transitions=[];let i;for(;i=t.shift();)i(e);this._renderCallback(e)}))}transition(e){return mre(Ae({requestAnimationFrame:t=>this.requestTransition(t)},e))}}function g9(){const n=e=>e;return n.invert=e=>e,n.copy=g9,n.invertRange=()=>{},n}class bre{constructor(e){this.genomes=new Map,this.genomeSpy=e}async initialize(e){const t=new One(e);return this.genomes.set(t.name,t),Promise.all([...this.genomes.values()].map(i=>i.load(this.genomeSpy.spec.baseUrl)))}getGenome(e){if(!this.genomes.size)throw new Error("No genomes have been configured!");if(e){const t=this.genomes.get(e);if(!t)throw new Error(`No genome with the name ${e} has been configured!`);return t}else{if(this.genomes.size>1)throw new Error("Cannot pick a default genome! More than one have been configured!");return this.genomes.values().next().value}}}var vre="assets/Lato-Regular.e459d1f9.png";const wre={thin:100,light:300,regular:400,normal:400,medium:500,bold:700,black:900};class Cre{constructor(e){this._webGLHelper=e,this.fontRepository="https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/",this._fonts=new Yh([],JSON.stringify),this._metadataPromises=new Map,this._fontPromises=new Map,this._promises=[],this._defaultFontEntry={metrics:rk(a9),texture:this._createTextureNow(vre)}}async waitUntilReady(){await Promise.all(this._promises)}getFont(e,t="normal",i="regular"){if(pi(i)&&(i=wre[i.toLowerCase()],!i))throw new Error("Unknown font weight: "+i);const s={family:e,style:t,weight:i};let r=this._fonts.get(s);return r||(r={metrics:void 0,texture:void 0},this._fonts.set(s,r),this._promises.push(this._loadFontEntry(r,s))),r}async _loadFontEntry(e,t){try{const i=await this._loadMetadata(t.family),s=Sre(i,t),r=this.fontRepository+dF(t.family)+"/"+s.replace(/\.\w+/,""),o=this._createTexture(r+".png"),a=this._loadFont(r+".json");e.texture=await o,e.metrics=await a}catch(i){console.log("Cannot load font. Using default.",i),e.metrics=this._defaultFontEntry.metrics,e.texture=this._defaultFontEntry.texture}}_loadFont(e){let t=this._fontPromises.get(e);return t||(t=fetch(e).then(i=>{if(!i.ok)throw new Error("Could not load font: "+i.status);return i}).then(i=>i.json()).then(i=>rk(i)),this._fontPromises.set(e,t)),t}_loadMetadata(e){const t=dF(e);let i=this._metadataPromises.get(t);return i||(i=fetch(this.fontRepository+t+"/METADATA.pb").then(s=>{if(!s.ok)throw new Error("Could not load font metadata: "+s.status);return s}).then(s=>s.text()).then(s=>yre(s)).catch(s=>{console.warn(s)}),this._metadataPromises.set(t,i)),i}getDefaultFont(){return this._defaultFontEntry}_createTexture(e){const t=this._webGLHelper.gl;return new Promise((i,s)=>{Qm(t,{src:e,min:t.LINEAR},(r,o,a)=>{r?s(r):i(o)})})}_createTextureNow(e){const t=this._webGLHelper.gl;let i;const s=new Promise((r,o)=>{i=Qm(t,{src:e,min:t.LINEAR},(a,l,c)=>{a?o(a):r(l)})});return this._promises.push(s),i}}function dF(n){return n.toLowerCase().replaceAll(/[^\w]/g,"")}function yre(n){const e=n.split(`
`),t=[];let i;for(const s of e)if(s.startsWith("fonts {")&&(i={name:void 0,style:void 0,weight:void 0,filename:void 0,post_script_name:void 0,full_name:void 0,copyright:void 0}),s.startsWith("}")&&(t.push(i),i=void 0),i){let r=s.match(/^\s*([A-Za-z_]+):[ ]?"(.*)"$/);if(r){const o=r[1];i[o]=r[2]}if(r=s.match(/^\s*([A-Za-z_]+):[ ]?(\d+)$/),r){const o=r[1];i[o]=+r[2]}}return t}function Sre(n,e){let t,i=Number.POSITIVE_INFINITY;for(const s of n)if(e.family.localeCompare(s.name,void 0,{sensitivity:"accent"})==0&&e.style==s.style){const r=Math.abs(e.weight-s.weight);r<i&&(i=r,t=s)}return t==null?void 0:t.filename}function xre(n,e){const t=[];let i;for(const s of n.split(`
`))if(s.startsWith(">"))i={identifier:s.match(/>(\S+)/)[1],sequence:""},t.push(i);else if(i)i.sequence+=s.trim();else throw new Error("Invalid fasta file!");return t}class Dre{constructor(e,t){this.animator=e,this.disabled=!!t,this.damping=.015,this.acceleration=.3,this.accelerationThreshold=100,this.lowerLimit=.5,this.loop=!1,this.momentum=0,this.timestamp=0,this.callback=null,this._transitionCallback=this.animate.bind(this),this.clear()}clear(){this.momentum=0,this.timestamp=null,this.loop=null,this.callback=null}cancel(){this.loop&&(this.animator.cancelTransition(this._transitionCallback),this.clear())}setMomentum(e,t){if(this.disabled){t(e);return}e*this.momentum<0?this.momentum=0:Math.abs(e)>this.accelerationThreshold?this.momentum=iK([this.momentum,e],this.acceleration):this.momentum=e,this.callback=t,this.loop||this.animate()}animate(e){this.callback(this.momentum);const t=e-this.timestamp||0;this.timestamp=e;const i=Math.abs(this.momentum);this.momentum=Math.sign(this.momentum)*Math.max(0,i-((i*this.damping)**1.5+.04)*t),Math.abs(this.momentum)>this.lowerLimit?(this.loop=!0,this.animator.requestTransition(this._transitionCallback)):this.clear()}}function Lre(n){const e={},t=["string","number","boolean"],i=["wheelDelta","wheelDeltaX","wheelDeltaY"];for(const s in n){const r=s;!i.includes(s)&&t.includes(typeof n[r])&&(e[r]=n[r])}return e}function p9(n,e,t=!0){let i,s=o=>{};return function(...a){return new Promise((l,c)=>{const h=()=>{clearTimeout(i),s=u=>{},l(n(...a))};t&&s("debounced"),clearTimeout(i),s=c,i=setTimeout(h,e)})}}const fF=new Map;async function kre(n,e,t){var r;const i=n.symbol;let s=(r=fF.get(i))!=null?r:await Tre(n.symbol);return s?(fF.set(i,s),Ti`
            <div class="title">
                <strong>${s.name}</strong>
                ${s.description}
            </div>
            <p class="summary">${s.summary}</p>
            <p class="source">Source: NCBI RefSeq Gene</p>
        `):null}async function Ere(n){console.log("Searching: "+n);const e={mode:"cors"},i=(await fetch(`https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=gene&term=${n}[GENE]&sort=relevance&retmode=json`,e).then(s=>s.json())).esearchresult.idlist[0];return i?(await fetch(`https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=gene&id=${i}&retmode=json`,e).then(o=>o.json())).result[i]:null}const Ire=p9(Ere,500);function Tre(n){return Ire(n)}const Nre=wn(".4~r"),Are=wn(".4~e");function Mre(n){return n===null?Ti` <span class="na">NA</span> `:pi(n)?n.substring(0,30):Number.isInteger(n)?""+n:ys(n)?Math.abs(n)>Math.pow(10,8)||Math.abs(n)<Math.pow(10,-8)?Are(n):Nre(n):Sy(n)?n?"True":"False":"?"+typeof n+" "+n}async function Rre(n,e,t){const i=(a,l)=>{var c;for(const[h,u]of Object.entries(e.encoders))if((c=u==null?void 0:u.accessor)!=null&&c.fields.includes(a))switch(h){case"color":case"fill":case"stroke":return Ti`
                            <span
                                class="color-legend"
                                style=${`background-color: ${u(l)}`}
                            ></span>
                        `}return""},s=Ti`
        <table class="attributes">
            ${Object.entries(n).filter(([a,l])=>!a.startsWith("_")).map(([a,l])=>Ti`
                        <tr>
                            <th>${a}</th>
                            <td>
                                ${Mre(l)} ${i(a,n)}
                            </td>
                        </tr>
                    `)}
        </table>
    `,r=e.unitView.getTitleText(),o=r?Ti`
              <div class="title">
                  <strong>${r}</strong>
              </div>
          `:"";return Ti`${o}${s}`}class Ore extends t9{constructor(e,t){super({vconcat:[]},e,void 0,"implicitRoot",1),t.parent=this,this.appendChild(t)}}Nt("index",DN,["continuous"]);Nt("locus",kY,["continuous"]);Nt("null",g9,[]);u8("fasta",xre);class Fre{constructor(e,t,i={}){var s;this.container=e,this.spec=t,this.accessorFactory=new gQ,this.viewFactory=new fse,this.namedDataProviders=[],this.animator=new _re(()=>this.renderAll()),this.genomeStore=void 0,this.viewVisibilityPredicate=r=>r.isVisibleInSpec(),this._renderingContext=void 0,this._pickingContext=void 0,this._dirtyPickingBuffer=!1,this._currentHover=void 0,this._wheelInertia=new Dre(this.animator),this._keyboardListeners=new Map,this._eventListeners=new Map,this.tooltipHandlers=Ae({default:Rre,refseqgene:kre},(s=i.tooltipHandlers)!=null?s:{}),this.viewRoot=void 0}registerNamedDataProvider(e){this.namedDataProviders.unshift(e)}getNamedData(e){for(const t of this.namedDataProviders){const i=t(e);if(i)return i}}broadcast(e,t){const i={type:e,payload:t};this.viewRoot.visit(s=>s.handleBroadcast(i))}_prepareContainer(){this.container.classList.add("genome-spy"),this.container.classList.add("loading"),this._glHelper=new Iie(this.container,()=>{if(this.viewRoot){const e=this.viewRoot.getSize().addPadding(this.viewRoot.getOverhang()),t=i=>i.grow>0?void 0:i.px;return{width:t(e.width),height:t(e.height)}}}),this.loadingMessageElement=document.createElement("div"),this.loadingMessageElement.className="loading-message",this.loadingMessageElement.innerHTML='<div class="message">Loading<span class="ellipsis">...</span></div>',this.container.appendChild(this.loadingMessageElement),this.tooltip=new KZ(this.container),this.loadingMessageElement.querySelector(".message").addEventListener("transitionend",()=>{this.loadingMessageElement.style.display="none"})}destroy(){this.container.classList.remove("genome-spy"),this.container.classList.remove("loading");for(const[e,t]of this._keyboardListeners)for(const i of t)document.removeEventListener(e,i);for(this._glHelper.finalize();this.container.firstChild;)this.container.firstChild.remove()}async _prepareViewsAndData(){this.spec.genome&&(this.genomeStore=new bre(this),await this.genomeStore.initialize(this.spec.genome));const e=this,t={dataFlow:new h9,accessorFactory:this.accessorFactory,glHelper:this._glHelper,animator:this.animator,genomeStore:this.genomeStore,fontManager:new Cre(this._glHelper),requestLayoutReflow:()=>{},updateTooltip:this.updateTooltip.bind(this),getNamedData:this.getNamedData.bind(this),getCurrentHover:()=>this._currentHover,addKeyboardListener:(a,l)=>{document.addEventListener(a,l);let c=this._keyboardListeners.get(a);c||(c=[],this._keyboardListeners.set(a,c)),c.push(l)},isViewVisible:e.viewVisibilityPredicate,isViewSpec:a=>e.viewFactory.isViewSpec(a),createView:function(a,l,c){return e.viewFactory.createView(a,t,l,c)}},i=this.spec;i.datasets&&this.registerNamedDataProvider(a=>i.datasets[a]),this.viewRoot=t.createView(i,null,"viewRoot"),await d9(this.viewRoot),(this.viewRoot instanceof fs||this.viewRoot instanceof mh)&&(this.viewRoot=new Ore(t,this.viewRoot)),cre(this.viewRoot),hre(this.viewRoot),this._glHelper.invalidateSize();const s=[];this.viewRoot.visit(a=>{a instanceof fs&&s.push(a)});const r=nre(this.viewRoot,t.dataFlow);lre(r),this.broadcast("dataFlowBuilt",r),r.dataSources.forEach(a=>console.log(a.subtreeToString())),s.forEach(a=>a.mark.initializeEncoders());const o=Promise.all(s.map(a=>a.mark.initializeGraphics()));for(const a of s)r.addObserver(l=>{a.mark.initializeData(),a.mark.updateGraphicsData()},a);await t.fontManager.waitUntilReady(),r.initialize(),await Promise.all(r.dataSources.map(a=>a.load())),this.viewRoot.visit(a=>{for(const l of Object.values(a.resolutions.scale))l.reconfigure()}),this.broadcast("dataLoaded"),await o,this.viewRoot.visit(a=>{for(const l of Object.values(a.resolutions.scale))this._glHelper.createRangeTexture(l)});for(const a of s)a.mark.finalizeGraphicsInitialization();t.requestLayoutReflow=this.computeLayout.bind(this),this.viewRoot.visit(a=>Lv(a,"size")),this._glHelper.invalidateSize()}async launch(){try{return this._prepareContainer(),await this._prepareViewsAndData(),this.registerMouseEvents(),this.computeLayout(),this.animator.requestRender(),this._glHelper.addEventListener("resize",()=>{this.computeLayout(),this.renderAll()}),!0}catch(e){const t=`${e.view?`At "${e.view.getPathString()}": `:""}${e.toString()}`;return console.error(e.stack),Pre(this.container,t),!1}finally{this.container.classList.remove("loading"),window.setTimeout(()=>{this.loadingMessageElement.style.display="none"},2e3)}}registerMouseEvents(){const e=this._glHelper.canvas,t=i=>{var s;if(i instanceof MouseEvent){i.type=="mousemove"&&(this.tooltip.handleMouseMove(i),this._tooltipUpdateRequested=!1,i.buttons==0&&this.renderPickingFramebuffer());const r=e.getBoundingClientRect(),o=new gre(i.clientX-r.left-e.clientLeft,i.clientY-r.top-e.clientTop),a=l=>{this.viewRoot.propagateInteractionEvent(new fre(o,l)),this._tooltipUpdateRequested||this.tooltip.clear()};if(i.type!="wheel"&&this._wheelInertia.cancel(),i.type=="mousemove")this._handlePicking(o.x,o.y);else if(i.type=="mousedown"||i.type=="mouseup")this.renderPickingFramebuffer();else if(i.type=="wheel"){this._tooltipUpdateRequested=!1;const l=i;if(Math.abs(l.deltaX)>Math.abs(l.deltaY))this._currentHover=null,this._wheelInertia.cancel();else{const c=Lre(l);this._wheelInertia.setMomentum(l.deltaY*(l.deltaMode?80:1),h=>{const u=new WheelEvent("wheel",as(Ae({},c),{deltaMode:0,deltaX:0,deltaY:h}));a(u)}),l.preventDefault();return}}if(i.type=="click"){const l=this._currentHover?{type:i.type,viewPath:[...this._currentHover.mark.unitView.getAncestors()].map(c=>c.name).reverse(),datum:this._currentHover.datum}:{type:i.type,viewPath:null,datum:null};(s=this._eventListeners.get("click"))==null||s.forEach(c=>c(l))}a(i)}};["mousedown","mouseup","wheel","click","mousemove","gesturechange","contextmenu"].forEach(i=>e.addEventListener(i,t)),e.addEventListener("mousedown",()=>{document.addEventListener("mouseup",()=>this.tooltip.popEnabledState(),{once:!0}),this.tooltip.pushEnabledState(!1)}),e.addEventListener("dragstart",i=>i.stopPropagation())}_handlePicking(e,t){var r;const i=this._glHelper.readPickingPixel(e,t),s=i[0]|i[1]<<8|i[2]<<16;if(s==0){this._currentHover=null;return}if(s!==((r=this._currentHover)==null?void 0:r.uniqueId)&&(this._currentHover=null),this._currentHover||this.viewRoot.visit(o=>{if(o instanceof fs){if(o.mark.isPickingParticipant()){const a=o.mark.encoders.uniqueId.accessor;o.getCollector().visitData(l=>{a(l)==s&&(this._currentHover={mark:o.mark,datum:l,uniqueId:s})})}if(this._currentHover)return Gp}}),this._currentHover){const o=this._currentHover.mark;this.updateTooltip(this._currentHover.datum,async a=>{var c;if(!o.isPickingParticipant())return;const l=o.properties.tooltip;if(l!==null){const h=(c=l==null?void 0:l.handler)!=null?c:"default",u=this.tooltipHandlers[h];if(!u)throw new Error("No such tooltip handler: "+h);return u(a,o,l==null?void 0:l.params)}})}}updateTooltip(e,t){if(!this._tooltipUpdateRequested||!e)this.tooltip.updateWithDatum(e,t),this._tooltipUpdateRequested=!0;else throw new Error("Tooltip has already been updated! Duplicate event handler?")}computeLayout(){const e=this.viewRoot;if(!e)return;this.broadcast("layout");const t=this._glHelper.getLogicalCanvasSize();if(isNaN(t.width)||isNaN(t.height)){console.log(`NaN in canvas size: ${t.width}x${t.height}. Skipping computeLayout().`);return}this._renderingContext=new uF({picking:!1},this._glHelper),this._pickingContext=new uF({picking:!0},this._glHelper),e.render(new dre(this._renderingContext,this._pickingContext),Jd.create(0,0,t.width,t.height)),this.broadcast("layoutComputed")}renderAll(){var e;(e=this._renderingContext)==null||e.renderDeferred(),this._dirtyPickingBuffer=!0}renderPickingFramebuffer(){!this._dirtyPickingBuffer||(this._pickingContext.renderDeferred(),this._dirtyPickingBuffer=!1)}getSearchableViews(){const e=[];return this.viewRoot.visit(t=>{t instanceof fs&&t.getAccessor("search")&&e.push(t)}),e}getNamedScaleResolutions(){const e=new Map;return this.viewRoot.visit(t=>{for(const i of Object.values(t.resolutions.scale))i.name&&e.set(i.name,i)}),e}}function Pre(n,e){const t=document.createElement("div");t.className="message-box";const i=document.createElement("div");i.textContent=e,t.appendChild(i),n.appendChild(t)}var Bre="assets/bowtie.663e9fd6.svg";async function Vre(n,e,t={}){var r,o,a;let i;if(pi(n)){if(i=document.querySelector(n),!i)throw new Error(`No such element: ${n}`)}else if(n instanceof HTMLElement)i=n;else throw new Error(`Invalid element: ${n}`);let s;try{const l=uo(e)?e:await zre(e);if((r=l.baseUrl)!=null||(l.baseUrl=""),(o=l.width)!=null||(l.width="container"),(a=l.padding)!=null||(l.padding=10),i==document.body){const c=document.createElement("div");c.style.position="fixed",c.style.inset="0",c.style.overflow="hidden",i.appendChild(c),i=c}s=new Fre(i,l,t),Wre(s,t),await s.launch()}catch(l){i.innerText=l.toString(),console.error(l)}return{finalize(){for(s.destroy();i.firstChild;)i.firstChild.remove()},addEventListener(l,c){const h=s._eventListeners;let u=h.get(l);u||(u=new Set,h.set(l,u)),u.add(c)},removeEventListener(l,c){var u;(u=s._eventListeners.get(l))==null||u.delete(c)},getScaleResolutionByName(l){return s.getNamedScaleResolutions().get(l)}}}function Wre(n,e){e.namedDataProvider&&n.registerNamedDataProvider(e.namedDataProvider)}async function zre(n){let e;try{e=JSON.parse(await Ny().load(n))}catch(t){throw new Error(`Could not load or parse configuration: ${n}, reason: ${t.message}`)}if(!e.baseUrl){const t=n.match(/^[^?#]*\//);e.baseUrl=t&&t[0]||"./"}return e}var Hre=`{
  "data": {
    "sequence": { "start": 0, "stop": 60, "as": "x" }
  },
  "transform": [
    {
      "type": "formula",
      "expr": "sin((datum.x - 30) / 4) + (datum.x - 30) / 30",
      "as": "y"
    }
  ],
  "mark": "rect",
  "encoding": {
    "x": { "field": "x", "type": "index", "scale": { "padding": 0.1 } },
    "y": { "field": "y", "type": "quantitative" },
    "y2": { "datum": 0 },
    "color": {
      "field": "y",
      "type": "quantitative",
      "scale": {
        "type": "threshold",
        "domain": [0],
        "range": ["#ed553b", "#20639b"]
      }
    }
  }
}
`;function $re(n,e){let t;return e.length===0?t=n:t=n.replace(/\{(\d+)\}/g,function(i,s){const r=s[0];return typeof e[r]!="undefined"?e[r]:i}),t}function m(n,e,...t){return $re(e,t)}var dx;const kv="en";let Ow=!1,Fw=!1,Ev=!1,m9=!1,_9=!1,SA=!1,yb,fx=kv,Ure,Dl;const It=typeof self=="object"?self:typeof global=="object"?global:{};let sn;typeof It.vscode!="undefined"&&typeof It.vscode.process!="undefined"?sn=It.vscode.process:typeof process!="undefined"&&(sn=process);const jre=typeof((dx=sn==null?void 0:sn.versions)===null||dx===void 0?void 0:dx.electron)=="string"&&sn.type==="renderer";if(typeof navigator=="object"&&!jre)Dl=navigator.userAgent,Ow=Dl.indexOf("Windows")>=0,Fw=Dl.indexOf("Macintosh")>=0,SA=(Dl.indexOf("Macintosh")>=0||Dl.indexOf("iPad")>=0||Dl.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Ev=Dl.indexOf("Linux")>=0,_9=!0,yb=navigator.language,fx=yb;else if(typeof sn=="object"){Ow=sn.platform==="win32",Fw=sn.platform==="darwin",Ev=sn.platform==="linux",Ev&&!!sn.env.SNAP&&sn.env.SNAP_REVISION,yb=kv,fx=kv;const n=sn.env.VSCODE_NLS_CONFIG;if(n)try{const e=JSON.parse(n),t=e.availableLanguages["*"];yb=e.locale,fx=t||kv,Ure=e._translationsConfigFile}catch{}m9=!0}else console.error("Unable to resolve platform.");const Zi=Ow,je=Fw,Fn=Ev,ef=m9,T0=_9,cc=SA,qre=Dl,vk=function(){if(It.setImmediate)return It.setImmediate.bind(It);if(typeof It.postMessage=="function"&&!It.importScripts){let t=[];It.addEventListener("message",s=>{if(s.data&&s.data.vscodeSetImmediateId)for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a.id===s.data.vscodeSetImmediateId){t.splice(r,1),a.callback();return}}});let i=0;return s=>{const r=++i;t.push({id:r,callback:s}),It.postMessage({vscodeSetImmediateId:r},"*")}}if(typeof(sn==null?void 0:sn.nextTick)=="function")return sn.nextTick.bind(sn);const e=Promise.resolve();return t=>e.then(t)}(),dr=Fw||SA?2:Ow?1:3;let gF=!0,pF=!1;function b9(){if(!pF){pF=!0;const n=new Uint8Array(2);n[0]=1,n[1]=2,gF=new Uint16Array(n.buffer)[0]===(2<<8)+1}return gF}const v9="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function Kre(n=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of v9)n.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const w9=Kre();function Pw(n){let e=w9;if(n&&n instanceof RegExp)if(n.global)e=n;else{let t="g";n.ignoreCase&&(t+="i"),n.multiline&&(t+="m"),n.unicode&&(t+="u"),e=new RegExp(n.source,t)}return e.lastIndex=0,e}const Gre={maxLen:1e3,windowSize:15,timeBudget:150};function Bw(n,e,t,i,s=Gre){if(t.length>s.maxLen){let c=n-s.maxLen/2;return c<0?c=0:i+=c,t=t.substring(c,n+s.maxLen/2),Bw(n,e,t,i,s)}const r=Date.now(),o=n-1-i;let a=-1,l=null;for(let c=1;!(Date.now()-r>=s.timeBudget);c++){const h=o-s.windowSize*c;e.lastIndex=Math.max(0,h);const u=Yre(e,t,o,a);if(!u&&l||(l=u,h<=0))break;a=h}if(l){let c={word:l[0],startColumn:i+1+l.index,endColumn:i+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function Yre(n,e,t,i){let s;for(;s=n.exec(e);){const r=s.index||0;if(r<=t&&n.lastIndex>=t)return s;if(i>0&&r>i)return null}return null}const Ll=8;class C9{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class Zre{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class y9{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class Di{constructor(e,t,i,s){this.id=e,this.name=t,this.defaultValue=i,this.schema=s}compute(e,t,i){return i}}class Sg{constructor(e,t=null){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0,this.deps=t}validate(e){return this.defaultValue}}class Nu{constructor(e,t,i,s){this.id=e,this.name=t,this.defaultValue=i,this.schema=s}validate(e){return typeof e=="undefined"?this.defaultValue:e}compute(e,t,i){return i}}function pe(n,e){return typeof n=="undefined"?e:n==="false"?!1:Boolean(n)}class Be extends Nu{constructor(e,t,i,s=void 0){typeof s!="undefined"&&(s.type="boolean",s.default=i),super(e,t,i,s)}validate(e){return pe(e,this.defaultValue)}}function wk(n,e,t,i){if(typeof n=="undefined")return e;let s=parseInt(n,10);return isNaN(s)?e:(s=Math.max(t,s),s=Math.min(i,s),s|0)}class Ct extends Nu{constructor(e,t,i,s,r,o=void 0){typeof o!="undefined"&&(o.type="integer",o.default=i,o.minimum=s,o.maximum=r),super(e,t,i,o),this.minimum=s,this.maximum=r}static clampedInt(e,t,i,s){return wk(e,t,i,s)}validate(e){return Ct.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}class Ho extends Nu{constructor(e,t,i,s,r){typeof r!="undefined"&&(r.type="number",r.default=i),super(e,t,i,r),this.validationFn=s}static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){if(typeof e=="number")return e;if(typeof e=="undefined")return t;const i=parseFloat(e);return isNaN(i)?t:i}validate(e){return this.validationFn(Ho.float(e,this.defaultValue))}}class Yn extends Nu{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,i,s=void 0){typeof s!="undefined"&&(s.type="string",s.default=i),super(e,t,i,s)}validate(e){return Yn.string(e,this.defaultValue)}}function Tn(n,e,t){return typeof n!="string"||t.indexOf(n)===-1?e:n}class ai extends Nu{constructor(e,t,i,s,r=void 0){typeof r!="undefined"&&(r.type="string",r.enum=s,r.default=i),super(e,t,i,r),this._allowedValues=s}validate(e){return Tn(e,this.defaultValue,this._allowedValues)}}class ap extends Di{constructor(e,t,i,s,r,o,a=void 0){typeof a!="undefined"&&(a.type="string",a.enum=r,a.default=s),super(e,t,i,a),this._allowedValues=r,this._convert=o}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function Xre(n){switch(n){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class Qre extends Di{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[m("accessibilitySupport.auto","The editor will use platform APIs to detect when a Screen Reader is attached."),m("accessibilitySupport.on","The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled."),m("accessibilitySupport.off","The editor will never be optimized for usage with a Screen Reader.")],default:"auto",description:m("accessibilitySupport","Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}}class Jre extends Di{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(19,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:m("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:m("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:pe(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:pe(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function eoe(n){switch(n){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var Mi;(function(n){n[n.Line=1]="Line",n[n.Block=2]="Block",n[n.Underline=3]="Underline",n[n.LineThin=4]="LineThin",n[n.BlockOutline=5]="BlockOutline",n[n.UnderlineThin=6]="UnderlineThin"})(Mi||(Mi={}));function toe(n){switch(n){case"line":return Mi.Line;case"block":return Mi.Block;case"underline":return Mi.Underline;case"line-thin":return Mi.LineThin;case"block-outline":return Mi.BlockOutline;case"underline-thin":return Mi.UnderlineThin}}class ioe extends Sg{constructor(){super(126,[65,33])}compute(e,t,i){const s=["monaco-editor"];return t.get(33)&&s.push(t.get(33)),e.extraEditorClassName&&s.push(e.extraEditorClassName),t.get(65)==="default"?s.push("mouse-default"):t.get(65)==="copy"&&s.push("mouse-copy"),t.get(99)&&s.push("showUnused"),t.get(124)&&s.push("showDeprecated"),s.join(" ")}}class noe extends Be{constructor(){super(32,"emptySelectionClipboard",!0,{description:m("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,i){return i&&e.emptySelectionClipboard}}class soe extends Di{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(35,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:m("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[m("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),m("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),m("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:m("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[m("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),m("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),m("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:m("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:m("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:je},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:m("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:m("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:pe(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Tn(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Tn(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:pe(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:pe(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:pe(t.loop,this.defaultValue.loop)}}}class gs extends Di{constructor(){super(44,"fontLigatures",gs.OFF,{anyOf:[{type:"boolean",description:m("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:m("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:m("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e=="undefined"?this.defaultValue:typeof e=="string"?e==="false"?gs.OFF:e==="true"?gs.ON:e:Boolean(e)?gs.ON:gs.OFF}}gs.OFF='"liga" off, "calt" off';gs.ON='"liga" on, "calt" on';class roe extends Sg{constructor(){super(43)}compute(e,t,i){return e.fontInfo}}class ooe extends Nu{constructor(){super(45,"fontSize",Cn.fontSize,{type:"number",minimum:6,maximum:100,default:Cn.fontSize,description:m("fontSize","Controls the font size in pixels.")})}validate(e){let t=Ho.float(e,this.defaultValue);return t===0?Cn.fontSize:Ho.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}}class Po extends Di{constructor(){super(46,"fontWeight",Cn.fontWeight,{anyOf:[{type:"number",minimum:Po.MINIMUM_VALUE,maximum:Po.MAXIMUM_VALUE,errorMessage:m("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Po.SUGGESTION_VALUES}],default:Cn.fontWeight,description:m("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Ct.clampedInt(e,Cn.fontWeight,Po.MINIMUM_VALUE,Po.MAXIMUM_VALUE))}}Po.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];Po.MINIMUM_VALUE=1;Po.MAXIMUM_VALUE=1e3;class aoe extends Di{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[m("editor.gotoLocation.multiple.peek","Show peek view of the results (default)"),m("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a peek view"),m("editor.gotoLocation.multiple.goto","Go to the primary result and enable peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(50,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:m("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:m("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:m("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:m("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:m("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:m("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:m("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:m("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:m("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:m("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:m("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,i,s,r,o;if(!e||typeof e!="object")return this.defaultValue;const a=e;return{multiple:Tn(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:Tn(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(i=a.multipleTypeDefinitions)!==null&&i!==void 0?i:Tn(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(s=a.multipleDeclarations)!==null&&s!==void 0?s:Tn(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(r=a.multipleImplementations)!==null&&r!==void 0?r:Tn(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(o=a.multipleReferences)!==null&&o!==void 0?o:Tn(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:Yn.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:Yn.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:Yn.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:Yn.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:Yn.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}class loe extends Di{constructor(){const e={enabled:!0,delay:300,sticky:!0,above:!0};super(52,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:m("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,description:m("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:m("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:m("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:pe(t.enabled,this.defaultValue.enabled),delay:Ct.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:pe(t.sticky,this.defaultValue.sticky),above:pe(t.above,this.defaultValue.above)}}}class tf extends Sg{constructor(){super(129,[49,57,37,64,91,59,60,93,116,119,120,121,2])}compute(e,t,i){return tf.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,i=e.scrollBeyondLastLine?t-1:0,s=(e.viewLineCount+i)/(e.pixelRatio*e.height),r=Math.floor(e.viewLineCount/s);return{typicalViewportLineCount:t,extraLinesBeyondLastLine:i,desiredRatio:s,minimapLineCount:r}}static _computeMinimapLayout(e,t){const i=e.outerWidth,s=e.outerHeight,r=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(r*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=t.stableMinimapLayoutInput,a=o&&e.outerHeight===o.outerHeight&&e.lineHeight===o.lineHeight&&e.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&e.pixelRatio===o.pixelRatio&&e.scrollBeyondLastLine===o.scrollBeyondLastLine&&e.minimap.enabled===o.minimap.enabled&&e.minimap.side===o.minimap.side&&e.minimap.size===o.minimap.size&&e.minimap.showSlider===o.minimap.showSlider&&e.minimap.renderCharacters===o.minimap.renderCharacters&&e.minimap.maxColumn===o.minimap.maxColumn&&e.minimap.scale===o.minimap.scale&&e.verticalScrollbarWidth===o.verticalScrollbarWidth&&e.isViewportWrapping===o.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,h=e.scrollBeyondLastLine,u=e.minimap.renderCharacters;let d=r>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const f=e.minimap.maxColumn,g=e.minimap.size,p=e.minimap.side,_=e.verticalScrollbarWidth,v=e.viewLineCount,b=e.remainingWidth,w=e.isViewportWrapping,C=u?2:3;let y=Math.floor(r*s);const D=y/r;let S=!1,x=!1,k=C*d,F=d/r,A=1;if(g==="fill"||g==="fit"){const{typicalViewportLineCount:me,extraLinesBeyondLastLine:fe,desiredRatio:Dt,minimapLineCount:ct}=tf.computeContainedMinimapLineCount({viewLineCount:v,scrollBeyondLastLine:h,height:s,lineHeight:l,pixelRatio:r});if(v/ct>1)S=!0,x=!0,d=1,k=1,F=d/r;else{let Et=!1,tt=d+1;if(g==="fit"){const dn=Math.ceil((v+fe)*k);w&&a&&b<=t.stableFitRemainingWidth?(Et=!0,tt=t.stableFitMaxMinimapScale):Et=dn>y}if(g==="fill"||Et){S=!0;const dn=d;k=Math.min(l*r,Math.max(1,Math.floor(1/Dt))),w&&a&&b<=t.stableFitRemainingWidth&&(tt=t.stableFitMaxMinimapScale),d=Math.min(tt,Math.max(1,Math.floor(k/C))),d>dn&&(A=Math.min(2,d/dn)),F=d/r/A,y=Math.ceil(Math.max(me,v+fe)*k),w?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=b,t.stableFitMaxMinimapScale=d):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const z=Math.floor(f*F),H=Math.min(z,Math.max(0,Math.floor((b-_-2)*F/(c+F)))+Ll);let te=Math.floor(r*H);const ie=te/r;te=Math.floor(te*A);const ae=u?1:2,_e=p==="left"?0:i-H-_;return{renderMinimap:ae,minimapLeft:_e,minimapWidth:H,minimapHeightIsEditorHeight:S,minimapIsSampling:x,minimapScale:d,minimapLineHeight:k,minimapCanvasInnerWidth:te,minimapCanvasInnerHeight:y,minimapCanvasOuterWidth:ie,minimapCanvasOuterHeight:D}}static computeLayout(e,t){const i=t.outerWidth|0,s=t.outerHeight|0,r=t.lineHeight|0,o=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,h=t.viewLineCount,u=e.get(121),d=u==="inherit"?e.get(120):u,f=d==="inherit"?e.get(116):d,g=e.get(119),p=e.get(2),_=t.isDominatedByLongLines,v=e.get(49),b=e.get(59).renderType!==0,w=e.get(60),C=e.get(93),y=e.get(64),D=e.get(91),S=D.verticalScrollbarSize,x=D.verticalHasArrows,k=D.arrowSize,F=D.horizontalScrollbarSize,A=e.get(57),z=e.get(37);let H;if(typeof A=="string"&&/^\d+(\.\d+)?ch$/.test(A)){const Es=parseFloat(A.substr(0,A.length-2));H=Ct.clampedInt(Es*a,0,0,1e3)}else H=Ct.clampedInt(A,0,0,1e3);z&&(H+=16);let te=0;if(b){const Es=Math.max(o,w);te=Math.round(Es*l)}let ie=0;v&&(ie=r);let ae=0,_e=ae+ie,me=_e+te,fe=me+H;const Dt=i-ie-te-H;let ct=!1,mt=!1,Et=-1;p!==2&&(d==="inherit"&&_?(ct=!0,mt=!0):f==="on"||f==="bounded"?mt=!0:f==="wordWrapColumn"&&(Et=g));const tt=tf._computeMinimapLayout({outerWidth:i,outerHeight:s,lineHeight:r,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:C,minimap:y,verticalScrollbarWidth:S,viewLineCount:h,remainingWidth:Dt,isViewportWrapping:mt},t.memory||new y9);tt.renderMinimap!==0&&tt.minimapLeft===0&&(ae+=tt.minimapWidth,_e+=tt.minimapWidth,me+=tt.minimapWidth,fe+=tt.minimapWidth);const dn=Dt-tt.minimapWidth,Qs=Math.max(1,Math.floor((dn-S-2)/a)),Ir=x?k:0;return mt&&(Et=Math.max(1,Qs),f==="bounded"&&(Et=Math.min(Et,g))),{width:i,height:s,glyphMarginLeft:ae,glyphMarginWidth:ie,lineNumbersLeft:_e,lineNumbersWidth:te,decorationsLeft:me,decorationsWidth:H,contentLeft:fe,contentWidth:dn,minimap:tt,viewportColumn:Qs,isWordWrapMinified:ct,isViewportWrapping:mt,wrappingColumn:Et,verticalScrollbarWidth:S,horizontalScrollbarHeight:F,overviewRuler:{top:Ir,width:S,height:s-2*Ir,right:0}}}}class coe extends Di{constructor(){const e={enabled:!0};super(56,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:m("codeActions","Enables the code action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:pe(e.enabled,this.defaultValue.enabled)}}}class hoe extends Di{constructor(){const e={enabled:!0,fontSize:0,fontFamily:""};super(125,"inlayHints",e,{"editor.inlayHints.enabled":{type:"boolean",default:e.enabled,description:m("inlayHints.enable","Enables the inlay hints in the editor.")},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:m("inlayHints.fontSize","Controls font size of inlay hints in the editor. A default of 90% of `#editor.fontSize#` is used when the configured value is less than `5` or greater than the editor font size.")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:m("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the `#editor.fontFamily#` is used.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:pe(t.enabled,this.defaultValue.enabled),fontSize:Ct.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:Yn.string(t.fontFamily,this.defaultValue.fontFamily)}}}class uoe extends Ho{constructor(){super(58,"lineHeight",Cn.lineHeight,e=>Ho.clamp(e,0,150),{markdownDescription:m("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,i){return e.fontInfo.lineHeight}}class doe extends Di{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",renderCharacters:!0,maxColumn:120,scale:1};super(64,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:m("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[m("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),m("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),m("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:m("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:m("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:m("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:m("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:m("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:m("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:pe(t.enabled,this.defaultValue.enabled),size:Tn(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Tn(t.side,this.defaultValue.side,["right","left"]),showSlider:Tn(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:pe(t.renderCharacters,this.defaultValue.renderCharacters),scale:Ct.clampedInt(t.scale,1,1,3),maxColumn:Ct.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}function foe(n){return n==="ctrlCmd"?je?"metaKey":"ctrlKey":"altKey"}class goe extends Di{constructor(){super(74,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:m("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:m("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Ct.clampedInt(t.top,0,0,1e3),bottom:Ct.clampedInt(t.bottom,0,0,1e3)}}}class poe extends Di{constructor(){const e={enabled:!0,cycle:!1};super(75,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:m("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:m("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:pe(t.enabled,this.defaultValue.enabled),cycle:pe(t.cycle,this.defaultValue.cycle)}}}class moe extends Sg{constructor(){super(127)}compute(e,t,i){return e.pixelRatio}}class _oe extends Di{constructor(){const e={other:!0,comments:!1,strings:!1};super(78,"quickSuggestions",e,{anyOf:[{type:"boolean"},{type:"object",properties:{strings:{type:"boolean",default:e.strings,description:m("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{type:"boolean",default:e.comments,description:m("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{type:"boolean",default:e.other,description:m("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}}}],default:e,description:m("quickSuggestions","Controls whether suggestions should automatically show up while typing.")}),this.defaultValue=e}validate(e){if(typeof e=="boolean")return e;if(e&&typeof e=="object"){const t=e,i={other:pe(t.other,this.defaultValue.other),comments:pe(t.comments,this.defaultValue.comments),strings:pe(t.strings,this.defaultValue.strings)};return i.other&&i.comments&&i.strings?!0:!i.other&&!i.comments&&!i.strings?!1:i}return this.defaultValue}}class boe extends Di{constructor(){super(59,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[m("lineNumbers.off","Line numbers are not rendered."),m("lineNumbers.on","Line numbers are rendered as absolute number."),m("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),m("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:m("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e!="undefined"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}}function xA(n){const e=n.get(86);return e==="editable"?n.get(80):e!=="on"}class voe extends Di{constructor(){const e=[],t={type:"number",description:m("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(90,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:m("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:m("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){let t=[];for(let i of e)if(typeof i=="number")t.push({column:Ct.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const s=i;t.push({column:Ct.clampedInt(s.column,0,0,1e4),color:s.color})}return t.sort((i,s)=>i.column-s.column),t}return this.defaultValue}}function mF(n,e){if(typeof n!="string")return e;switch(n){case"hidden":return 2;case"visible":return 3;default:return 1}}class woe extends Di{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(91,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[m("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),m("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),m("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:m("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[m("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),m("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),m("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:m("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:m("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:m("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:m("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=Ct.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),s=Ct.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Ct.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:mF(t.vertical,this.defaultValue.vertical),horizontal:mF(t.horizontal,this.defaultValue.horizontal),useShadows:pe(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:pe(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:pe(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:pe(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:pe(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:Ct.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:s,verticalSliderSize:Ct.clampedInt(t.verticalSliderSize,s,0,1e3),scrollByPage:pe(t.scrollByPage,this.defaultValue.scrollByPage)}}}class Coe extends Di{constructor(){const e={enabled:!0,mode:"subwordSmart"};super(54,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:m("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:pe(t.enabled,this.defaultValue.enabled),mode:Tn(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"])}}}class yoe extends Di{constructor(){const e={enabled:rn.bracketPairColorizationOptions.enabled};super(12,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,description:m("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use 'workbench.colorCustomizations' to override the bracket highlight colors.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:pe(e.enabled,this.defaultValue.enabled)}}}class Soe extends Di{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(13,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[m("editor.guides.bracketPairs.true","Enables bracket pair guides."),m("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),m("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:m("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[m("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),m("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),m("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:m("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:m("editor.guides.highlightActiveBracketPair","Controls whether bracket pair guides are enabled or not.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:m("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:"boolean",default:e.highlightActiveIndentation,description:m("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:_F(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:_F(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:pe(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:pe(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:pe(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation)}}}function _F(n,e,t){const i=t.indexOf(n);return i===-1?e:t[i]}class xoe extends Di{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(105,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[m("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),m("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:m("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:m("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:m("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:m("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:m("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:m("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:m("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:m("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:m("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:m("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:m("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:Tn(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:pe(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:pe(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:pe(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:pe(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:pe(t.showIcons,this.defaultValue.showIcons),showStatusBar:pe(t.showStatusBar,this.defaultValue.showStatusBar),preview:pe(t.preview,this.defaultValue.preview),previewMode:Tn(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:pe(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:pe(t.showMethods,this.defaultValue.showMethods),showFunctions:pe(t.showFunctions,this.defaultValue.showFunctions),showConstructors:pe(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:pe(t.showDeprecated,this.defaultValue.showDeprecated),showFields:pe(t.showFields,this.defaultValue.showFields),showVariables:pe(t.showVariables,this.defaultValue.showVariables),showClasses:pe(t.showClasses,this.defaultValue.showClasses),showStructs:pe(t.showStructs,this.defaultValue.showStructs),showInterfaces:pe(t.showInterfaces,this.defaultValue.showInterfaces),showModules:pe(t.showModules,this.defaultValue.showModules),showProperties:pe(t.showProperties,this.defaultValue.showProperties),showEvents:pe(t.showEvents,this.defaultValue.showEvents),showOperators:pe(t.showOperators,this.defaultValue.showOperators),showUnits:pe(t.showUnits,this.defaultValue.showUnits),showValues:pe(t.showValues,this.defaultValue.showValues),showConstants:pe(t.showConstants,this.defaultValue.showConstants),showEnums:pe(t.showEnums,this.defaultValue.showEnums),showEnumMembers:pe(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:pe(t.showKeywords,this.defaultValue.showKeywords),showWords:pe(t.showWords,this.defaultValue.showWords),showColors:pe(t.showColors,this.defaultValue.showColors),showFiles:pe(t.showFiles,this.defaultValue.showFiles),showReferences:pe(t.showReferences,this.defaultValue.showReferences),showFolders:pe(t.showFolders,this.defaultValue.showFolders),showTypeParameters:pe(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:pe(t.showSnippets,this.defaultValue.showSnippets),showUsers:pe(t.showUsers,this.defaultValue.showUsers),showIssues:pe(t.showIssues,this.defaultValue.showIssues)}}}class Doe extends Di{constructor(){super(101,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:m("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:pe(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}}}class Loe extends Sg{constructor(){super(128,[80])}compute(e,t,i){return t.get(80)?!0:e.tabFocusMode}}function koe(n){switch(n){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}}class Eoe extends Sg{constructor(){super(130,[129])}compute(e,t,i){const s=t.get(129);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:s.isWordWrapMinified,isViewportWrapping:s.isViewportWrapping,wrappingColumn:s.wrappingColumn}}}const Ioe="Consolas, 'Courier New', monospace",Toe="Menlo, Monaco, 'Courier New', monospace",Noe="'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback'",Cn={fontFamily:je?Toe:Fn?Noe:Ioe,fontWeight:"normal",fontSize:je?12:14,lineHeight:0,letterSpacing:0},rn={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!1}},Fd=[];function X(n){return Fd[n.id]=n,n}const Au={acceptSuggestionOnCommitCharacter:X(new Be(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:m("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:X(new ai(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",m("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:m("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:X(new Qre),accessibilityPageSize:X(new Ct(3,"accessibilityPageSize",10,1,1073741824,{description:m("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.")})),ariaLabel:X(new Yn(4,"ariaLabel",m("editorViewAccessibleLabel","Editor content"))),autoClosingBrackets:X(new ai(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",m("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),m("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:m("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:X(new ai(6,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",m("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:m("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:X(new ai(7,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",m("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:m("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:X(new ai(8,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",m("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),m("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:m("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:X(new ap(9,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],Xre,{enumDescriptions:[m("editor.autoIndent.none","The editor will not insert indentation automatically."),m("editor.autoIndent.keep","The editor will keep the current line's indentation."),m("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),m("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),m("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:m("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:X(new Be(10,"automaticLayout",!1)),autoSurround:X(new ai(11,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[m("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),m("editor.autoSurround.quotes","Surround with quotes but not brackets."),m("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:m("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:X(new yoe),bracketPairGuides:X(new Soe),stickyTabStops:X(new Be(103,"stickyTabStops",!1,{description:m("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:X(new Be(14,"codeLens",!0,{description:m("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:X(new Yn(15,"codeLensFontFamily","",{description:m("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:X(new Ct(16,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:m("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to `0`, the 90% of `#editor.fontSize#` is used.")})),colorDecorators:X(new Be(17,"colorDecorators",!0,{description:m("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),columnSelection:X(new Be(18,"columnSelection",!1,{description:m("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:X(new Jre),contextmenu:X(new Be(20,"contextmenu",!0)),copyWithSyntaxHighlighting:X(new Be(21,"copyWithSyntaxHighlighting",!0,{description:m("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:X(new ap(22,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],eoe,{description:m("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:X(new Be(23,"cursorSmoothCaretAnimation",!1,{description:m("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:X(new ap(24,"cursorStyle",Mi.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],toe,{description:m("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:X(new Ct(25,"cursorSurroundingLines",0,0,1073741824,{description:m("cursorSurroundingLines","Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:X(new ai(26,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[m("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),m("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:m("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:X(new Ct(27,"cursorWidth",0,0,1073741824,{markdownDescription:m("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:X(new Be(28,"disableLayerHinting",!1)),disableMonospaceOptimizations:X(new Be(29,"disableMonospaceOptimizations",!1)),domReadOnly:X(new Be(30,"domReadOnly",!1)),dragAndDrop:X(new Be(31,"dragAndDrop",!0,{description:m("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:X(new noe),extraEditorClassName:X(new Yn(33,"extraEditorClassName","")),fastScrollSensitivity:X(new Ho(34,"fastScrollSensitivity",5,n=>n<=0?5:n,{markdownDescription:m("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:X(new soe),fixedOverflowWidgets:X(new Be(36,"fixedOverflowWidgets",!1)),folding:X(new Be(37,"folding",!0,{description:m("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:X(new ai(38,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[m("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),m("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:m("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:X(new Be(39,"foldingHighlight",!0,{description:m("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:X(new Be(40,"foldingImportsByDefault",!1,{description:m("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),unfoldOnClickAfterEndOfLine:X(new Be(41,"unfoldOnClickAfterEndOfLine",!1,{description:m("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:X(new Yn(42,"fontFamily",Cn.fontFamily,{description:m("fontFamily","Controls the font family.")})),fontInfo:X(new roe),fontLigatures2:X(new gs),fontSize:X(new ooe),fontWeight:X(new Po),formatOnPaste:X(new Be(47,"formatOnPaste",!1,{description:m("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:X(new Be(48,"formatOnType",!1,{description:m("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:X(new Be(49,"glyphMargin",!0,{description:m("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:X(new aoe),hideCursorInOverviewRuler:X(new Be(51,"hideCursorInOverviewRuler",!1,{description:m("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:X(new loe),inDiffEditor:X(new Be(53,"inDiffEditor",!1)),letterSpacing:X(new Ho(55,"letterSpacing",Cn.letterSpacing,n=>Ho.clamp(n,-5,20),{description:m("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:X(new coe),lineDecorationsWidth:X(new Nu(57,"lineDecorationsWidth",10)),lineHeight:X(new uoe),lineNumbers:X(new boe),lineNumbersMinChars:X(new Ct(60,"lineNumbersMinChars",5,1,300)),linkedEditing:X(new Be(61,"linkedEditing",!1,{description:m("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.")})),links:X(new Be(62,"links",!0,{description:m("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:X(new ai(63,"matchBrackets","always",["always","near","never"],{description:m("matchBrackets","Highlight matching brackets.")})),minimap:X(new doe),mouseStyle:X(new ai(65,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:X(new Ho(66,"mouseWheelScrollSensitivity",1,n=>n===0?1:n,{markdownDescription:m("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:X(new Be(67,"mouseWheelZoom",!1,{markdownDescription:m("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:X(new Be(68,"multiCursorMergeOverlapping",!0,{description:m("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:X(new ap(69,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],foe,{markdownEnumDescriptions:[m("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),m("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:m({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the multicursor modifier. [Read more](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:X(new ai(70,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[m("multiCursorPaste.spread","Each cursor pastes a single line of the text."),m("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:m("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),occurrencesHighlight:X(new Be(71,"occurrencesHighlight",!0,{description:m("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:X(new Be(72,"overviewRulerBorder",!0,{description:m("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:X(new Ct(73,"overviewRulerLanes",3,0,3)),padding:X(new goe),parameterHints:X(new poe),peekWidgetDefaultFocus:X(new ai(76,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[m("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),m("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:m("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:X(new Be(77,"definitionLinkOpensInPeek",!1,{description:m("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:X(new _oe),quickSuggestionsDelay:X(new Ct(79,"quickSuggestionsDelay",10,0,1073741824,{description:m("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:X(new Be(80,"readOnly",!1)),renameOnType:X(new Be(81,"renameOnType",!1,{description:m("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:m("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:X(new Be(82,"renderControlCharacters",!0,{description:m("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:X(new Be(83,"renderFinalNewline",!0,{description:m("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:X(new ai(84,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",m("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:m("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:X(new Be(85,"renderLineHighlightOnlyWhenFocus",!1,{description:m("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:X(new ai(86,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:X(new ai(87,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",m("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),m("renderWhitespace.selection","Render whitespace characters only on selected text."),m("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:m("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:X(new Ct(88,"revealHorizontalRightPadding",30,0,1e3)),roundedSelection:X(new Be(89,"roundedSelection",!0,{description:m("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:X(new voe),scrollbar:X(new woe),scrollBeyondLastColumn:X(new Ct(92,"scrollBeyondLastColumn",5,0,1073741824,{description:m("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:X(new Be(93,"scrollBeyondLastLine",!0,{description:m("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:X(new Be(94,"scrollPredominantAxis",!0,{description:m("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:X(new Be(95,"selectionClipboard",!0,{description:m("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Fn})),selectionHighlight:X(new Be(96,"selectionHighlight",!0,{description:m("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:X(new Be(97,"selectOnLineNumbers",!0)),showFoldingControls:X(new ai(98,"showFoldingControls","mouseover",["always","mouseover"],{enumDescriptions:[m("showFoldingControls.always","Always show the folding controls."),m("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:m("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:X(new Be(99,"showUnused",!0,{description:m("showUnused","Controls fading out of unused code.")})),showDeprecated:X(new Be(124,"showDeprecated",!0,{description:m("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:X(new hoe),snippetSuggestions:X(new ai(100,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[m("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),m("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),m("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),m("snippetSuggestions.none","Do not show snippet suggestions.")],description:m("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:X(new Doe),smoothScrolling:X(new Be(102,"smoothScrolling",!1,{description:m("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:X(new Ct(104,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:X(new xoe),inlineSuggest:X(new Coe),suggestFontSize:X(new Ct(106,"suggestFontSize",0,0,1e3,{markdownDescription:m("suggestFontSize","Font size for the suggest widget. When set to `0`, the value of `#editor.fontSize#` is used.")})),suggestLineHeight:X(new Ct(107,"suggestLineHeight",0,0,1e3,{markdownDescription:m("suggestLineHeight","Line height for the suggest widget. When set to `0`, the value of `#editor.lineHeight#` is used. The minimum value is 8.")})),suggestOnTriggerCharacters:X(new Be(108,"suggestOnTriggerCharacters",!0,{description:m("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:X(new ai(109,"suggestSelection","recentlyUsed",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[m("suggestSelection.first","Always select the first suggestion."),m("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),m("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:m("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:X(new ai(110,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[m("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),m("tabCompletion.off","Disable tab completions."),m("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:m("tabCompletion","Enables tab completions.")})),tabIndex:X(new Ct(111,"tabIndex",0,-1,1073741824)),unusualLineTerminators:X(new ai(112,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[m("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),m("unusualLineTerminators.off","Unusual line terminators are ignored."),m("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:m("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:X(new Be(113,"useShadowDOM",!0)),useTabStops:X(new Be(114,"useTabStops",!0,{description:m("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordSeparators:X(new Yn(115,"wordSeparators",v9,{description:m("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:X(new ai(116,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[m("wordWrap.off","Lines will never wrap."),m("wordWrap.on","Lines will wrap at the viewport width."),m({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),m({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:m({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:X(new Yn(117,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:X(new Yn(118,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:X(new Ct(119,"wordWrapColumn",80,1,1073741824,{markdownDescription:m({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:X(new ai(120,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:X(new ai(121,"wordWrapOverride2","inherit",["off","on","inherit"])),wrappingIndent:X(new ap(122,"wrappingIndent",1,"same",["none","same","indent","deepIndent"],koe,{enumDescriptions:[m("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),m("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),m("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),m("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:m("wrappingIndent","Controls the indentation of wrapped lines.")})),wrappingStrategy:X(new ai(123,"wrappingStrategy","simple",["simple","advanced"],{enumDescriptions:[m("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),m("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],description:m("wrappingStrategy","Controls the algorithm that computes wrapping points.")})),editorClassName:X(new ioe),pixelRatio:X(new moe),tabFocusMode:X(new Loe),layoutInfo:X(new tf),wrappingInfo:X(new Eoe)};class Aoe{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const S9=new Aoe;function Ie(n){Rc(n)||S9.onUnexpectedError(n)}function kr(n){Rc(n)||S9.onUnexpectedExternalError(n)}function bF(n){if(n instanceof Error){let{name:e,message:t}=n;const i=n.stacktrace||n.stack;return{$isError:!0,name:e,message:t,stack:i}}return n}const Ck="Canceled";function Rc(n){return n instanceof Error&&n.name===Ck&&n.message===Ck}function xg(){const n=new Error(Ck);return n.name=n.message,n}function Zo(n){return n?new Error(`Illegal argument: ${n}`):new Error("Illegal argument")}function Moe(n){return n?new Error(`Illegal state: ${n}`):new Error("Illegal state")}class Roe extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}function su(n){const e=this;let t=!1,i;return function(){return t||(t=!0,i=n.apply(e,arguments)),i}}var Ue;(function(n){function e(b){return b&&typeof b=="object"&&typeof b[Symbol.iterator]=="function"}n.is=e;const t=Object.freeze([]);function i(){return t}n.empty=i;function*s(b){yield b}n.single=s;function r(b){return b||t}n.from=r;function o(b){return!b||b[Symbol.iterator]().next().done===!0}n.isEmpty=o;function a(b){return b[Symbol.iterator]().next().value}n.first=a;function l(b,w){for(const C of b)if(w(C))return!0;return!1}n.some=l;function c(b,w){for(const C of b)if(w(C))return C}n.find=c;function*h(b,w){for(const C of b)w(C)&&(yield C)}n.filter=h;function*u(b,w){let C=0;for(const y of b)yield w(y,C++)}n.map=u;function*d(...b){for(const w of b)for(const C of w)yield C}n.concat=d;function*f(b){for(const w of b)for(const C of w)yield C}n.concatNested=f;function g(b,w,C){let y=C;for(const D of b)y=w(y,D);return y}n.reduce=g;function*p(b,w,C=b.length){for(w<0&&(w+=b.length),C<0?C+=b.length:C>b.length&&(C=b.length);w<C;w++)yield b[w]}n.slice=p;function _(b,w=Number.POSITIVE_INFINITY){const C=[];if(w===0)return[C,b];const y=b[Symbol.iterator]();for(let D=0;D<w;D++){const S=y.next();if(S.done)return[C,n.empty()];C.push(S.value)}return[C,{[Symbol.iterator](){return y}}]}n.consume=_;function v(b,w,C=(y,D)=>y===D){const y=b[Symbol.iterator](),D=w[Symbol.iterator]();for(;;){const S=y.next(),x=D.next();if(S.done!==x.done)return!1;if(S.done)return!0;if(!C(S.value,x.value))return!1}}n.equals=v})(Ue||(Ue={}));class Ooe extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function x9(n){return typeof n.dispose=="function"&&n.dispose.length===0}function He(n){if(Ue.is(n)){let e=[];for(const t of n)if(t)try{t.dispose()}catch(i){e.push(i)}if(e.length===1)throw e[0];if(e.length>1)throw new Ooe(e);return Array.isArray(n)?[]:n}else if(n)return n.dispose(),n}function jl(...n){return Ze(()=>He(n))}function Ze(n){return{dispose:su(()=>{n()})}}class ee{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}clear(){try{He(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?ee.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}ee.DISABLE_DISPOSED_WARNING=!1;class q{constructor(){this._store=new ee,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}q.None=Object.freeze({dispose(){}});class Ls{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e}}class Foe{constructor(e){this.object=e}dispose(){}}class Pt{constructor(e){this.element=e,this.next=Pt.Undefined,this.prev=Pt.Undefined}}Pt.Undefined=new Pt(void 0);class bs{constructor(){this._first=Pt.Undefined,this._last=Pt.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Pt.Undefined}clear(){let e=this._first;for(;e!==Pt.Undefined;){const t=e.next;e.prev=Pt.Undefined,e.next=Pt.Undefined,e=t}this._first=Pt.Undefined,this._last=Pt.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new Pt(e);if(this._first===Pt.Undefined)this._first=i,this._last=i;else if(t){const r=this._last;this._last=i,i.prev=r,r.next=i}else{const r=this._first;this._first=i,i.next=r,r.prev=i}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(i))}}shift(){if(this._first!==Pt.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Pt.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Pt.Undefined&&e.next!==Pt.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Pt.Undefined&&e.next===Pt.Undefined?(this._first=Pt.Undefined,this._last=Pt.Undefined):e.next===Pt.Undefined?(this._last=this._last.prev,this._last.next=Pt.Undefined):e.prev===Pt.Undefined&&(this._first=this._first.next,this._first.prev=Pt.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Pt.Undefined;)yield e.element,e=e.next}}const Poe=It.performance&&typeof It.performance.now=="function";class rl{constructor(e){this._highResolution=Poe&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new rl(e)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?It.performance.now():Date.now()}}var ue;(function(n){n.None=()=>q.None;function e(b){return(w,C=null,y)=>{let D=!1,S;return S=b(x=>{if(!D)return S?S.dispose():D=!0,w.call(C,x)},null,y),D&&S.dispose(),S}}n.once=e;function t(b,w){return l((C,y=null,D)=>b(S=>C.call(y,w(S)),null,D))}n.map=t;function i(b,w){return l((C,y=null,D)=>b(S=>{w(S),C.call(y,S)},null,D))}n.forEach=i;function s(b,w){return l((C,y=null,D)=>b(S=>w(S)&&C.call(y,S),null,D))}n.filter=s;function r(b){return b}n.signal=r;function o(...b){return(w,C=null,y)=>jl(...b.map(D=>D(S=>w.call(C,S),null,y)))}n.any=o;function a(b,w,C){let y=C;return t(b,D=>(y=w(y,D),y))}n.reduce=a;function l(b){let w;const C=new R({onFirstListenerAdd(){w=b(C.fire,C)},onLastListenerRemove(){w.dispose()}});return C.event}function c(b,w,C=100,y=!1,D){let S,x,k,F=0;const A=new R({leakWarningThreshold:D,onFirstListenerAdd(){S=b(z=>{F++,x=w(x,z),y&&!k&&(A.fire(x),x=void 0),clearTimeout(k),k=setTimeout(()=>{const H=x;x=void 0,k=void 0,(!y||F>1)&&A.fire(H),F=0},C)})},onLastListenerRemove(){S.dispose()}});return A.event}n.debounce=c;function h(b,w=(C,y)=>C===y){let C=!0,y;return s(b,D=>{const S=C||!w(D,y);return C=!1,y=D,S})}n.latch=h;function u(b,w){return[n.filter(b,w),n.filter(b,C=>!w(C))]}n.split=u;function d(b,w=!1,C=[]){let y=C.slice(),D=b(k=>{y?y.push(k):x.fire(k)});const S=()=>{y&&y.forEach(k=>x.fire(k)),y=null},x=new R({onFirstListenerAdd(){D||(D=b(k=>x.fire(k)))},onFirstListenerDidAdd(){y&&(w?setTimeout(S):S())},onLastListenerRemove(){D&&D.dispose(),D=null}});return x.event}n.buffer=d;class f{constructor(w){this.event=w}map(w){return new f(t(this.event,w))}forEach(w){return new f(i(this.event,w))}filter(w){return new f(s(this.event,w))}reduce(w,C){return new f(a(this.event,w,C))}latch(){return new f(h(this.event))}debounce(w,C=100,y=!1,D){return new f(c(this.event,w,C,y,D))}on(w,C,y){return this.event(w,C,y)}once(w,C,y){return e(this.event)(w,C,y)}}function g(b){return new f(b)}n.chain=g;function p(b,w,C=y=>y){const y=(...k)=>x.fire(C(...k)),D=()=>b.on(w,y),S=()=>b.removeListener(w,y),x=new R({onFirstListenerAdd:D,onLastListenerRemove:S});return x.event}n.fromNodeEventEmitter=p;function _(b,w,C=y=>y){const y=(...k)=>x.fire(C(...k)),D=()=>b.addEventListener(w,y),S=()=>b.removeEventListener(w,y),x=new R({onFirstListenerAdd:D,onLastListenerRemove:S});return x.event}n.fromDOMEventEmitter=_;function v(b){return new Promise(w=>e(b)(w))}n.toPromise=v})(ue||(ue={}));class r1{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${r1._idPool++}`}start(e){this._stopWatch=new rl(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}}r1._idPool=0;class R{constructor(e){var t;this._disposed=!1,this._options=e,this._leakageMon=void 0,this._perfMon=!((t=this._options)===null||t===void 0)&&t._profName?new r1(this._options._profName):void 0}get event(){return this._event||(this._event=(e,t,i)=>{var s;this._listeners||(this._listeners=new bs);const r=this._listeners.isEmpty();r&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);const o=this._listeners.push(t?[e,t]:e);r&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);const a=(s=this._leakageMon)===null||s===void 0?void 0:s.check(this._listeners.size),l=Ze(()=>{a&&a(),this._disposed||(o(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))});return i instanceof ee?i.add(l):Array.isArray(i)&&i.push(l),l}),this._event}fire(e){var t,i;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new bs);for(let s of this._listeners)this._deliveryQueue.push([s,e]);for((t=this._perfMon)===null||t===void 0||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[s,r]=this._deliveryQueue.shift();try{typeof s=="function"?s.call(void 0,r):s[0].call(s[1],r)}catch(o){Ie(o)}}(i=this._perfMon)===null||i===void 0||i.stop()}}dispose(){var e,t,i,s,r;this._disposed||(this._disposed=!0,(e=this._listeners)===null||e===void 0||e.clear(),(t=this._deliveryQueue)===null||t===void 0||t.clear(),(s=(i=this._options)===null||i===void 0?void 0:i.onLastListenerRemove)===null||s===void 0||s.call(i),(r=this._leakageMon)===null||r===void 0||r.dispose())}}class Vw extends R{constructor(e){super(e),this._isPaused=0,this._eventQueue=new bs,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class Boe extends Vw{constructor(e){var t;super(e),this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class DA{constructor(){this.buffers=[]}wrapEvent(e){return(t,i,s)=>e(r=>{const o=this.buffers[this.buffers.length-1];o?o.push(()=>t.call(i,r)):t.call(i,r)},void 0,s)}bufferEvents(e){const t=[];this.buffers.push(t);const i=e();return this.buffers.pop(),t.forEach(s=>s()),i}}class vF{constructor(){this.listening=!1,this.inputEvent=ue.None,this.inputEventListener=q.None,this.emitter=new R({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const D9=Object.freeze(function(n,e){const t=setTimeout(n.bind(e),0);return{dispose(){clearTimeout(t)}}});var Lt;(function(n){function e(t){return t===n.None||t===n.Cancelled||t instanceof Iv?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}n.isCancellationToken=e,n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ue.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:D9})})(Lt||(Lt={}));class Iv{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?D9:(this._emitter||(this._emitter=new R),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class go{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new Iv),this._token}cancel(){this._token?this._token instanceof Iv&&this._token.cancel():this._token=Lt.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof Iv&&this._token.dispose():this._token=Lt.None}}class LA{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const Tv=new LA,yk=new LA,Sk=new LA,L9=new Array(230),Voe={},Woe=[],zoe=Object.create(null),Hoe=Object.create(null),kA=[],xk=[];for(let n=0;n<=193;n++)kA[n]=-1;for(let n=0;n<=126;n++)xk[n]=-1;(function(){const n="",e=[[0,1,0,"None",0,"unknown",0,"VK_UNKNOWN",n,n],[0,1,1,"Hyper",0,n,0,n,n,n],[0,1,2,"Super",0,n,0,n,n,n],[0,1,3,"Fn",0,n,0,n,n,n],[0,1,4,"FnLock",0,n,0,n,n,n],[0,1,5,"Suspend",0,n,0,n,n,n],[0,1,6,"Resume",0,n,0,n,n,n],[0,1,7,"Turbo",0,n,0,n,n,n],[0,1,8,"Sleep",0,n,0,"VK_SLEEP",n,n],[0,1,9,"WakeUp",0,n,0,n,n,n],[31,0,10,"KeyA",31,"A",65,"VK_A",n,n],[32,0,11,"KeyB",32,"B",66,"VK_B",n,n],[33,0,12,"KeyC",33,"C",67,"VK_C",n,n],[34,0,13,"KeyD",34,"D",68,"VK_D",n,n],[35,0,14,"KeyE",35,"E",69,"VK_E",n,n],[36,0,15,"KeyF",36,"F",70,"VK_F",n,n],[37,0,16,"KeyG",37,"G",71,"VK_G",n,n],[38,0,17,"KeyH",38,"H",72,"VK_H",n,n],[39,0,18,"KeyI",39,"I",73,"VK_I",n,n],[40,0,19,"KeyJ",40,"J",74,"VK_J",n,n],[41,0,20,"KeyK",41,"K",75,"VK_K",n,n],[42,0,21,"KeyL",42,"L",76,"VK_L",n,n],[43,0,22,"KeyM",43,"M",77,"VK_M",n,n],[44,0,23,"KeyN",44,"N",78,"VK_N",n,n],[45,0,24,"KeyO",45,"O",79,"VK_O",n,n],[46,0,25,"KeyP",46,"P",80,"VK_P",n,n],[47,0,26,"KeyQ",47,"Q",81,"VK_Q",n,n],[48,0,27,"KeyR",48,"R",82,"VK_R",n,n],[49,0,28,"KeyS",49,"S",83,"VK_S",n,n],[50,0,29,"KeyT",50,"T",84,"VK_T",n,n],[51,0,30,"KeyU",51,"U",85,"VK_U",n,n],[52,0,31,"KeyV",52,"V",86,"VK_V",n,n],[53,0,32,"KeyW",53,"W",87,"VK_W",n,n],[54,0,33,"KeyX",54,"X",88,"VK_X",n,n],[55,0,34,"KeyY",55,"Y",89,"VK_Y",n,n],[56,0,35,"KeyZ",56,"Z",90,"VK_Z",n,n],[22,0,36,"Digit1",22,"1",49,"VK_1",n,n],[23,0,37,"Digit2",23,"2",50,"VK_2",n,n],[24,0,38,"Digit3",24,"3",51,"VK_3",n,n],[25,0,39,"Digit4",25,"4",52,"VK_4",n,n],[26,0,40,"Digit5",26,"5",53,"VK_5",n,n],[27,0,41,"Digit6",27,"6",54,"VK_6",n,n],[28,0,42,"Digit7",28,"7",55,"VK_7",n,n],[29,0,43,"Digit8",29,"8",56,"VK_8",n,n],[30,0,44,"Digit9",30,"9",57,"VK_9",n,n],[21,0,45,"Digit0",21,"0",48,"VK_0",n,n],[3,1,46,"Enter",3,"Enter",13,"VK_RETURN",n,n],[9,1,47,"Escape",9,"Escape",27,"VK_ESCAPE",n,n],[1,1,48,"Backspace",1,"Backspace",8,"VK_BACK",n,n],[2,1,49,"Tab",2,"Tab",9,"VK_TAB",n,n],[10,1,50,"Space",10,"Space",32,"VK_SPACE",n,n],[83,0,51,"Minus",83,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[81,0,52,"Equal",81,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[87,0,53,"BracketLeft",87,"[",219,"VK_OEM_4","[","OEM_4"],[89,0,54,"BracketRight",89,"]",221,"VK_OEM_6","]","OEM_6"],[88,0,55,"Backslash",88,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,0,56,"IntlHash",0,n,0,n,n,n],[80,0,57,"Semicolon",80,";",186,"VK_OEM_1",";","OEM_1"],[90,0,58,"Quote",90,"'",222,"VK_OEM_7","'","OEM_7"],[86,0,59,"Backquote",86,"`",192,"VK_OEM_3","`","OEM_3"],[82,0,60,"Comma",82,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[84,0,61,"Period",84,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[85,0,62,"Slash",85,"/",191,"VK_OEM_2","/","OEM_2"],[8,1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",n,n],[59,1,64,"F1",59,"F1",112,"VK_F1",n,n],[60,1,65,"F2",60,"F2",113,"VK_F2",n,n],[61,1,66,"F3",61,"F3",114,"VK_F3",n,n],[62,1,67,"F4",62,"F4",115,"VK_F4",n,n],[63,1,68,"F5",63,"F5",116,"VK_F5",n,n],[64,1,69,"F6",64,"F6",117,"VK_F6",n,n],[65,1,70,"F7",65,"F7",118,"VK_F7",n,n],[66,1,71,"F8",66,"F8",119,"VK_F8",n,n],[67,1,72,"F9",67,"F9",120,"VK_F9",n,n],[68,1,73,"F10",68,"F10",121,"VK_F10",n,n],[69,1,74,"F11",69,"F11",122,"VK_F11",n,n],[70,1,75,"F12",70,"F12",123,"VK_F12",n,n],[0,1,76,"PrintScreen",0,n,0,n,n,n],[79,1,77,"ScrollLock",79,"ScrollLock",145,"VK_SCROLL",n,n],[7,1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",n,n],[19,1,79,"Insert",19,"Insert",45,"VK_INSERT",n,n],[14,1,80,"Home",14,"Home",36,"VK_HOME",n,n],[11,1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",n,n],[20,1,82,"Delete",20,"Delete",46,"VK_DELETE",n,n],[13,1,83,"End",13,"End",35,"VK_END",n,n],[12,1,84,"PageDown",12,"PageDown",34,"VK_NEXT",n,n],[17,1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",n],[15,1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",n],[18,1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",n],[16,1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",n],[78,1,89,"NumLock",78,"NumLock",144,"VK_NUMLOCK",n,n],[108,1,90,"NumpadDivide",108,"NumPad_Divide",111,"VK_DIVIDE",n,n],[103,1,91,"NumpadMultiply",103,"NumPad_Multiply",106,"VK_MULTIPLY",n,n],[106,1,92,"NumpadSubtract",106,"NumPad_Subtract",109,"VK_SUBTRACT",n,n],[104,1,93,"NumpadAdd",104,"NumPad_Add",107,"VK_ADD",n,n],[3,1,94,"NumpadEnter",3,n,0,n,n,n],[94,1,95,"Numpad1",94,"NumPad1",97,"VK_NUMPAD1",n,n],[95,1,96,"Numpad2",95,"NumPad2",98,"VK_NUMPAD2",n,n],[96,1,97,"Numpad3",96,"NumPad3",99,"VK_NUMPAD3",n,n],[97,1,98,"Numpad4",97,"NumPad4",100,"VK_NUMPAD4",n,n],[98,1,99,"Numpad5",98,"NumPad5",101,"VK_NUMPAD5",n,n],[99,1,100,"Numpad6",99,"NumPad6",102,"VK_NUMPAD6",n,n],[100,1,101,"Numpad7",100,"NumPad7",103,"VK_NUMPAD7",n,n],[101,1,102,"Numpad8",101,"NumPad8",104,"VK_NUMPAD8",n,n],[102,1,103,"Numpad9",102,"NumPad9",105,"VK_NUMPAD9",n,n],[93,1,104,"Numpad0",93,"NumPad0",96,"VK_NUMPAD0",n,n],[107,1,105,"NumpadDecimal",107,"NumPad_Decimal",110,"VK_DECIMAL",n,n],[92,0,106,"IntlBackslash",92,"OEM_102",226,"VK_OEM_102",n,n],[58,1,107,"ContextMenu",58,"ContextMenu",93,n,n,n],[0,1,108,"Power",0,n,0,n,n,n],[0,1,109,"NumpadEqual",0,n,0,n,n,n],[71,1,110,"F13",71,"F13",124,"VK_F13",n,n],[72,1,111,"F14",72,"F14",125,"VK_F14",n,n],[73,1,112,"F15",73,"F15",126,"VK_F15",n,n],[74,1,113,"F16",74,"F16",127,"VK_F16",n,n],[75,1,114,"F17",75,"F17",128,"VK_F17",n,n],[76,1,115,"F18",76,"F18",129,"VK_F18",n,n],[77,1,116,"F19",77,"F19",130,"VK_F19",n,n],[0,1,117,"F20",0,n,0,"VK_F20",n,n],[0,1,118,"F21",0,n,0,"VK_F21",n,n],[0,1,119,"F22",0,n,0,"VK_F22",n,n],[0,1,120,"F23",0,n,0,"VK_F23",n,n],[0,1,121,"F24",0,n,0,"VK_F24",n,n],[0,1,122,"Open",0,n,0,n,n,n],[0,1,123,"Help",0,n,0,n,n,n],[0,1,124,"Select",0,n,0,n,n,n],[0,1,125,"Again",0,n,0,n,n,n],[0,1,126,"Undo",0,n,0,n,n,n],[0,1,127,"Cut",0,n,0,n,n,n],[0,1,128,"Copy",0,n,0,n,n,n],[0,1,129,"Paste",0,n,0,n,n,n],[0,1,130,"Find",0,n,0,n,n,n],[0,1,131,"AudioVolumeMute",112,"AudioVolumeMute",173,"VK_VOLUME_MUTE",n,n],[0,1,132,"AudioVolumeUp",113,"AudioVolumeUp",175,"VK_VOLUME_UP",n,n],[0,1,133,"AudioVolumeDown",114,"AudioVolumeDown",174,"VK_VOLUME_DOWN",n,n],[105,1,134,"NumpadComma",105,"NumPad_Separator",108,"VK_SEPARATOR",n,n],[110,0,135,"IntlRo",110,"ABNT_C1",193,"VK_ABNT_C1",n,n],[0,1,136,"KanaMode",0,n,0,n,n,n],[0,0,137,"IntlYen",0,n,0,n,n,n],[0,1,138,"Convert",0,n,0,n,n,n],[0,1,139,"NonConvert",0,n,0,n,n,n],[0,1,140,"Lang1",0,n,0,n,n,n],[0,1,141,"Lang2",0,n,0,n,n,n],[0,1,142,"Lang3",0,n,0,n,n,n],[0,1,143,"Lang4",0,n,0,n,n,n],[0,1,144,"Lang5",0,n,0,n,n,n],[0,1,145,"Abort",0,n,0,n,n,n],[0,1,146,"Props",0,n,0,n,n,n],[0,1,147,"NumpadParenLeft",0,n,0,n,n,n],[0,1,148,"NumpadParenRight",0,n,0,n,n,n],[0,1,149,"NumpadBackspace",0,n,0,n,n,n],[0,1,150,"NumpadMemoryStore",0,n,0,n,n,n],[0,1,151,"NumpadMemoryRecall",0,n,0,n,n,n],[0,1,152,"NumpadMemoryClear",0,n,0,n,n,n],[0,1,153,"NumpadMemoryAdd",0,n,0,n,n,n],[0,1,154,"NumpadMemorySubtract",0,n,0,n,n,n],[0,1,155,"NumpadClear",0,n,0,n,n,n],[0,1,156,"NumpadClearEntry",0,n,0,n,n,n],[5,1,0,n,5,"Ctrl",17,"VK_CONTROL",n,n],[4,1,0,n,4,"Shift",16,"VK_SHIFT",n,n],[6,1,0,n,6,"Alt",18,"VK_MENU",n,n],[57,1,0,n,57,"Meta",0,"VK_COMMAND",n,n],[5,1,157,"ControlLeft",5,n,0,"VK_LCONTROL",n,n],[4,1,158,"ShiftLeft",4,n,0,"VK_LSHIFT",n,n],[6,1,159,"AltLeft",6,n,0,"VK_LMENU",n,n],[57,1,160,"MetaLeft",57,n,0,"VK_LWIN",n,n],[5,1,161,"ControlRight",5,n,0,"VK_RCONTROL",n,n],[4,1,162,"ShiftRight",4,n,0,"VK_RSHIFT",n,n],[6,1,163,"AltRight",6,n,0,"VK_RMENU",n,n],[57,1,164,"MetaRight",57,n,0,"VK_RWIN",n,n],[0,1,165,"BrightnessUp",0,n,0,n,n,n],[0,1,166,"BrightnessDown",0,n,0,n,n,n],[0,1,167,"MediaPlay",0,n,0,n,n,n],[0,1,168,"MediaRecord",0,n,0,n,n,n],[0,1,169,"MediaFastForward",0,n,0,n,n,n],[0,1,170,"MediaRewind",0,n,0,n,n,n],[114,1,171,"MediaTrackNext",119,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",n,n],[115,1,172,"MediaTrackPrevious",120,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",n,n],[116,1,173,"MediaStop",121,"MediaStop",178,"VK_MEDIA_STOP",n,n],[0,1,174,"Eject",0,n,0,n,n,n],[117,1,175,"MediaPlayPause",122,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",n,n],[0,1,176,"MediaSelect",123,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",n,n],[0,1,177,"LaunchMail",124,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",n,n],[0,1,178,"LaunchApp2",125,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",n,n],[0,1,179,"LaunchApp1",0,n,0,"VK_MEDIA_LAUNCH_APP1",n,n],[0,1,180,"SelectTask",0,n,0,n,n,n],[0,1,181,"LaunchScreenSaver",0,n,0,n,n,n],[0,1,182,"BrowserSearch",115,"BrowserSearch",170,"VK_BROWSER_SEARCH",n,n],[0,1,183,"BrowserHome",116,"BrowserHome",172,"VK_BROWSER_HOME",n,n],[112,1,184,"BrowserBack",117,"BrowserBack",166,"VK_BROWSER_BACK",n,n],[113,1,185,"BrowserForward",118,"BrowserForward",167,"VK_BROWSER_FORWARD",n,n],[0,1,186,"BrowserStop",0,n,0,"VK_BROWSER_STOP",n,n],[0,1,187,"BrowserRefresh",0,n,0,"VK_BROWSER_REFRESH",n,n],[0,1,188,"BrowserFavorites",0,n,0,"VK_BROWSER_FAVORITES",n,n],[0,1,189,"ZoomToggle",0,n,0,n,n,n],[0,1,190,"MailReply",0,n,0,n,n,n],[0,1,191,"MailForward",0,n,0,n,n,n],[0,1,192,"MailSend",0,n,0,n,n,n],[109,1,0,n,109,"KeyInComposition",229,n,n,n],[111,1,0,n,111,"ABNT_C2",194,"VK_ABNT_C2",n,n],[91,1,0,n,91,"OEM_8",223,"VK_OEM_8",n,n],[0,1,0,n,0,n,0,"VK_CLEAR",n,n],[0,1,0,n,0,n,0,"VK_KANA",n,n],[0,1,0,n,0,n,0,"VK_HANGUL",n,n],[0,1,0,n,0,n,0,"VK_JUNJA",n,n],[0,1,0,n,0,n,0,"VK_FINAL",n,n],[0,1,0,n,0,n,0,"VK_HANJA",n,n],[0,1,0,n,0,n,0,"VK_KANJI",n,n],[0,1,0,n,0,n,0,"VK_CONVERT",n,n],[0,1,0,n,0,n,0,"VK_NONCONVERT",n,n],[0,1,0,n,0,n,0,"VK_ACCEPT",n,n],[0,1,0,n,0,n,0,"VK_MODECHANGE",n,n],[0,1,0,n,0,n,0,"VK_SELECT",n,n],[0,1,0,n,0,n,0,"VK_PRINT",n,n],[0,1,0,n,0,n,0,"VK_EXECUTE",n,n],[0,1,0,n,0,n,0,"VK_SNAPSHOT",n,n],[0,1,0,n,0,n,0,"VK_HELP",n,n],[0,1,0,n,0,n,0,"VK_APPS",n,n],[0,1,0,n,0,n,0,"VK_PROCESSKEY",n,n],[0,1,0,n,0,n,0,"VK_PACKET",n,n],[0,1,0,n,0,n,0,"VK_DBE_SBCSCHAR",n,n],[0,1,0,n,0,n,0,"VK_DBE_DBCSCHAR",n,n],[0,1,0,n,0,n,0,"VK_ATTN",n,n],[0,1,0,n,0,n,0,"VK_CRSEL",n,n],[0,1,0,n,0,n,0,"VK_EXSEL",n,n],[0,1,0,n,0,n,0,"VK_EREOF",n,n],[0,1,0,n,0,n,0,"VK_PLAY",n,n],[0,1,0,n,0,n,0,"VK_ZOOM",n,n],[0,1,0,n,0,n,0,"VK_NONAME",n,n],[0,1,0,n,0,n,0,"VK_PA1",n,n],[0,1,0,n,0,n,0,"VK_OEM_CLEAR",n,n]];let t=[],i=[];for(const s of e){const[r,o,a,l,c,h,u,d,f,g]=s;if(i[a]||(i[a]=!0,Woe[a]=l,zoe[l]=a,Hoe[l.toLowerCase()]=a,o&&(kA[a]=c,c!==0&&c!==3&&c!==5&&c!==4&&c!==6&&c!==57&&(xk[c]=a))),!t[c]){if(t[c]=!0,!h)throw new Error(`String representation missing for key code ${c} around scan code ${l}`);Tv.define(c,h),yk.define(c,f||h),Sk.define(c,g||f||h)}u&&(L9[u]=c),d&&(Voe[d]=c)}xk[3]=46})();var _h;(function(n){function e(a){return Tv.keyCodeToStr(a)}n.toString=e;function t(a){return Tv.strToKeyCode(a)}n.fromString=t;function i(a){return yk.keyCodeToStr(a)}n.toUserSettingsUS=i;function s(a){return Sk.keyCodeToStr(a)}n.toUserSettingsGeneral=s;function r(a){return yk.strToKeyCode(a)||Sk.strToKeyCode(a)}n.fromUserSettings=r;function o(a){if(a>=93&&a<=108)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return Tv.keyCodeToStr(a)}n.toElectronAccelerator=o})(_h||(_h={}));function Vn(n,e){const t=(e&65535)<<16>>>0;return(n|t)>>>0}let nf;if(typeof It.vscode!="undefined"&&typeof It.vscode.process!="undefined"){const n=It.vscode.process;nf={get platform(){return n.platform},get arch(){return n.arch},get env(){return n.env},cwd(){return n.cwd()},nextTick(e){return vk(e)}}}else typeof process!="undefined"?nf={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()},nextTick(n){return process.nextTick(n)}}:nf={get platform(){return Zi?"win32":je?"darwin":"linux"},get arch(){},nextTick(n){return vk(n)},get env(){return{}},cwd(){return"/"}};const Dk=nf.cwd,$oe=nf.env,Mu=nf.platform,Uoe=65,joe=97,qoe=90,Koe=122,ql=46,tn=47,cs=92,bl=58,Goe=63;class k9 extends Error{constructor(e,t,i){let s;typeof t=="string"&&t.indexOf("not ")===0?(s="must not be",t=t.replace(/^not /,"")):s="must be";const r=e.indexOf(".")!==-1?"property":"argument";let o=`The "${e}" ${r} ${s} of type ${t}`;o+=`. Received type ${typeof i}`,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function Ci(n,e){if(typeof n!="string")throw new k9(e,"string",n)}function Qe(n){return n===tn||n===cs}function Lk(n){return n===tn}function vl(n){return n>=Uoe&&n<=qoe||n>=joe&&n<=Koe}function Ww(n,e,t,i){let s="",r=0,o=-1,a=0,l=0;for(let c=0;c<=n.length;++c){if(c<n.length)l=n.charCodeAt(c);else{if(i(l))break;l=tn}if(i(l)){if(!(o===c-1||a===1))if(a===2){if(s.length<2||r!==2||s.charCodeAt(s.length-1)!==ql||s.charCodeAt(s.length-2)!==ql){if(s.length>2){const h=s.lastIndexOf(t);h===-1?(s="",r=0):(s=s.slice(0,h),r=s.length-1-s.lastIndexOf(t)),o=c,a=0;continue}else if(s.length!==0){s="",r=0,o=c,a=0;continue}}e&&(s+=s.length>0?`${t}..`:"..",r=2)}else s.length>0?s+=`${t}${n.slice(o+1,c)}`:s=n.slice(o+1,c),r=c-o-1;o=c,a=0}else l===ql&&a!==-1?++a:a=-1}return s}function E9(n,e){if(e===null||typeof e!="object")throw new k9("pathObject","Object",e);const t=e.dir||e.root,i=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${i}`:`${t}${n}${i}`:i}const Qn={resolve(...n){let e="",t="",i=!1;for(let s=n.length-1;s>=-1;s--){let r;if(s>=0){if(r=n[s],Ci(r,"path"),r.length===0)continue}else e.length===0?r=Dk():(r=$oe[`=${e}`]||Dk(),(r===void 0||r.slice(0,2).toLowerCase()!==e.toLowerCase()&&r.charCodeAt(2)===cs)&&(r=`${e}\\`));const o=r.length;let a=0,l="",c=!1;const h=r.charCodeAt(0);if(o===1)Qe(h)&&(a=1,c=!0);else if(Qe(h))if(c=!0,Qe(r.charCodeAt(1))){let u=2,d=u;for(;u<o&&!Qe(r.charCodeAt(u));)u++;if(u<o&&u!==d){const f=r.slice(d,u);for(d=u;u<o&&Qe(r.charCodeAt(u));)u++;if(u<o&&u!==d){for(d=u;u<o&&!Qe(r.charCodeAt(u));)u++;(u===o||u!==d)&&(l=`\\\\${f}\\${r.slice(d,u)}`,a=u)}}}else a=1;else vl(h)&&r.charCodeAt(1)===bl&&(l=r.slice(0,2),a=2,o>2&&Qe(r.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(i){if(e.length>0)break}else if(t=`${r.slice(a)}\\${t}`,i=c,c&&e.length>0)break}return t=Ww(t,!i,"\\",Qe),i?`${e}\\${t}`:`${e}${t}`||"."},normalize(n){Ci(n,"path");const e=n.length;if(e===0)return".";let t=0,i,s=!1;const r=n.charCodeAt(0);if(e===1)return Lk(r)?"\\":n;if(Qe(r))if(s=!0,Qe(n.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Qe(n.charCodeAt(a));)a++;if(a<e&&a!==l){const c=n.slice(l,a);for(l=a;a<e&&Qe(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Qe(n.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${n.slice(l)}\\`;a!==l&&(i=`\\\\${c}\\${n.slice(l,a)}`,t=a)}}}else t=1;else vl(r)&&n.charCodeAt(1)===bl&&(i=n.slice(0,2),t=2,e>2&&Qe(n.charCodeAt(2))&&(s=!0,t=3));let o=t<e?Ww(n.slice(t),!s,"\\",Qe):"";return o.length===0&&!s&&(o="."),o.length>0&&Qe(n.charCodeAt(e-1))&&(o+="\\"),i===void 0?s?`\\${o}`:o:s?`${i}\\${o}`:`${i}${o}`},isAbsolute(n){Ci(n,"path");const e=n.length;if(e===0)return!1;const t=n.charCodeAt(0);return Qe(t)||e>2&&vl(t)&&n.charCodeAt(1)===bl&&Qe(n.charCodeAt(2))},join(...n){if(n.length===0)return".";let e,t;for(let r=0;r<n.length;++r){const o=n[r];Ci(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let i=!0,s=0;if(typeof t=="string"&&Qe(t.charCodeAt(0))){++s;const r=t.length;r>1&&Qe(t.charCodeAt(1))&&(++s,r>2&&(Qe(t.charCodeAt(2))?++s:i=!1))}if(i){for(;s<e.length&&Qe(e.charCodeAt(s));)s++;s>=2&&(e=`\\${e.slice(s)}`)}return Qn.normalize(e)},relative(n,e){if(Ci(n,"from"),Ci(e,"to"),n===e)return"";const t=Qn.resolve(n),i=Qn.resolve(e);if(t===i||(n=t.toLowerCase(),e=i.toLowerCase(),n===e))return"";let s=0;for(;s<n.length&&n.charCodeAt(s)===cs;)s++;let r=n.length;for(;r-1>s&&n.charCodeAt(r-1)===cs;)r--;const o=r-s;let a=0;for(;a<e.length&&e.charCodeAt(a)===cs;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===cs;)l--;const c=l-a,h=o<c?o:c;let u=-1,d=0;for(;d<h;d++){const g=n.charCodeAt(s+d);if(g!==e.charCodeAt(a+d))break;g===cs&&(u=d)}if(d!==h){if(u===-1)return i}else{if(c>h){if(e.charCodeAt(a+d)===cs)return i.slice(a+d+1);if(d===2)return i.slice(a+d)}o>h&&(n.charCodeAt(s+d)===cs?u=d:d===2&&(u=3)),u===-1&&(u=0)}let f="";for(d=s+u+1;d<=r;++d)(d===r||n.charCodeAt(d)===cs)&&(f+=f.length===0?"..":"\\..");return a+=u,f.length>0?`${f}${i.slice(a,l)}`:(i.charCodeAt(a)===cs&&++a,i.slice(a,l))},toNamespacedPath(n){if(typeof n!="string")return n;if(n.length===0)return"";const e=Qn.resolve(n);if(e.length<=2)return n;if(e.charCodeAt(0)===cs){if(e.charCodeAt(1)===cs){const t=e.charCodeAt(2);if(t!==Goe&&t!==ql)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(vl(e.charCodeAt(0))&&e.charCodeAt(1)===bl&&e.charCodeAt(2)===cs)return`\\\\?\\${e}`;return n},dirname(n){Ci(n,"path");const e=n.length;if(e===0)return".";let t=-1,i=0;const s=n.charCodeAt(0);if(e===1)return Qe(s)?n:".";if(Qe(s)){if(t=i=1,Qe(n.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Qe(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&Qe(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Qe(n.charCodeAt(a));)a++;if(a===e)return n;a!==l&&(t=i=a+1)}}}}else vl(s)&&n.charCodeAt(1)===bl&&(t=e>2&&Qe(n.charCodeAt(2))?3:2,i=t);let r=-1,o=!0;for(let a=e-1;a>=i;--a)if(Qe(n.charCodeAt(a))){if(!o){r=a;break}}else o=!1;if(r===-1){if(t===-1)return".";r=t}return n.slice(0,r)},basename(n,e){e!==void 0&&Ci(e,"ext"),Ci(n,"path");let t=0,i=-1,s=!0,r;if(n.length>=2&&vl(n.charCodeAt(0))&&n.charCodeAt(1)===bl&&(t=2),e!==void 0&&e.length>0&&e.length<=n.length){if(e===n)return"";let o=e.length-1,a=-1;for(r=n.length-1;r>=t;--r){const l=n.charCodeAt(r);if(Qe(l)){if(!s){t=r+1;break}}else a===-1&&(s=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=r):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=n.length),n.slice(t,i)}for(r=n.length-1;r>=t;--r)if(Qe(n.charCodeAt(r))){if(!s){t=r+1;break}}else i===-1&&(s=!1,i=r+1);return i===-1?"":n.slice(t,i)},extname(n){Ci(n,"path");let e=0,t=-1,i=0,s=-1,r=!0,o=0;n.length>=2&&n.charCodeAt(1)===bl&&vl(n.charCodeAt(0))&&(e=i=2);for(let a=n.length-1;a>=e;--a){const l=n.charCodeAt(a);if(Qe(l)){if(!r){i=a+1;break}continue}s===-1&&(r=!1,s=a+1),l===ql?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||s===-1||o===0||o===1&&t===s-1&&t===i+1?"":n.slice(t,s)},format:E9.bind(null,"\\"),parse(n){Ci(n,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;const t=n.length;let i=0,s=n.charCodeAt(0);if(t===1)return Qe(s)?(e.root=e.dir=n,e):(e.base=e.name=n,e);if(Qe(s)){if(i=1,Qe(n.charCodeAt(1))){let u=2,d=u;for(;u<t&&!Qe(n.charCodeAt(u));)u++;if(u<t&&u!==d){for(d=u;u<t&&Qe(n.charCodeAt(u));)u++;if(u<t&&u!==d){for(d=u;u<t&&!Qe(n.charCodeAt(u));)u++;u===t?i=u:u!==d&&(i=u+1)}}}}else if(vl(s)&&n.charCodeAt(1)===bl){if(t<=2)return e.root=e.dir=n,e;if(i=2,Qe(n.charCodeAt(2))){if(t===3)return e.root=e.dir=n,e;i=3}}i>0&&(e.root=n.slice(0,i));let r=-1,o=i,a=-1,l=!0,c=n.length-1,h=0;for(;c>=i;--c){if(s=n.charCodeAt(c),Qe(s)){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),s===ql?r===-1?r=c:h!==1&&(h=1):r!==-1&&(h=-1)}return a!==-1&&(r===-1||h===0||h===1&&r===a-1&&r===o+1?e.base=e.name=n.slice(o,a):(e.name=n.slice(o,r),e.base=n.slice(o,a),e.ext=n.slice(r,a))),o>0&&o!==i?e.dir=n.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},gi={resolve(...n){let e="",t=!1;for(let i=n.length-1;i>=-1&&!t;i--){const s=i>=0?n[i]:Dk();Ci(s,"path"),s.length!==0&&(e=`${s}/${e}`,t=s.charCodeAt(0)===tn)}return e=Ww(e,!t,"/",Lk),t?`/${e}`:e.length>0?e:"."},normalize(n){if(Ci(n,"path"),n.length===0)return".";const e=n.charCodeAt(0)===tn,t=n.charCodeAt(n.length-1)===tn;return n=Ww(n,!e,"/",Lk),n.length===0?e?"/":t?"./":".":(t&&(n+="/"),e?`/${n}`:n)},isAbsolute(n){return Ci(n,"path"),n.length>0&&n.charCodeAt(0)===tn},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){const i=n[t];Ci(i,"path"),i.length>0&&(e===void 0?e=i:e+=`/${i}`)}return e===void 0?".":gi.normalize(e)},relative(n,e){if(Ci(n,"from"),Ci(e,"to"),n===e||(n=gi.resolve(n),e=gi.resolve(e),n===e))return"";const t=1,i=n.length,s=i-t,r=1,o=e.length-r,a=s<o?s:o;let l=-1,c=0;for(;c<a;c++){const u=n.charCodeAt(t+c);if(u!==e.charCodeAt(r+c))break;u===tn&&(l=c)}if(c===a)if(o>a){if(e.charCodeAt(r+c)===tn)return e.slice(r+c+1);if(c===0)return e.slice(r+c)}else s>a&&(n.charCodeAt(t+c)===tn?l=c:c===0&&(l=0));let h="";for(c=t+l+1;c<=i;++c)(c===i||n.charCodeAt(c)===tn)&&(h+=h.length===0?"..":"/..");return`${h}${e.slice(r+l)}`},toNamespacedPath(n){return n},dirname(n){if(Ci(n,"path"),n.length===0)return".";const e=n.charCodeAt(0)===tn;let t=-1,i=!0;for(let s=n.length-1;s>=1;--s)if(n.charCodeAt(s)===tn){if(!i){t=s;break}}else i=!1;return t===-1?e?"/":".":e&&t===1?"//":n.slice(0,t)},basename(n,e){e!==void 0&&Ci(e,"ext"),Ci(n,"path");let t=0,i=-1,s=!0,r;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e===n)return"";let o=e.length-1,a=-1;for(r=n.length-1;r>=0;--r){const l=n.charCodeAt(r);if(l===tn){if(!s){t=r+1;break}}else a===-1&&(s=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=r):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=n.length),n.slice(t,i)}for(r=n.length-1;r>=0;--r)if(n.charCodeAt(r)===tn){if(!s){t=r+1;break}}else i===-1&&(s=!1,i=r+1);return i===-1?"":n.slice(t,i)},extname(n){Ci(n,"path");let e=-1,t=0,i=-1,s=!0,r=0;for(let o=n.length-1;o>=0;--o){const a=n.charCodeAt(o);if(a===tn){if(!s){t=o+1;break}continue}i===-1&&(s=!1,i=o+1),a===ql?e===-1?e=o:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||i===-1||r===0||r===1&&e===i-1&&e===t+1?"":n.slice(e,i)},format:E9.bind(null,"/"),parse(n){Ci(n,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;const t=n.charCodeAt(0)===tn;let i;t?(e.root="/",i=1):i=0;let s=-1,r=0,o=-1,a=!0,l=n.length-1,c=0;for(;l>=i;--l){const h=n.charCodeAt(l);if(h===tn){if(!a){r=l+1;break}continue}o===-1&&(a=!1,o=l+1),h===ql?s===-1?s=l:c!==1&&(c=1):s!==-1&&(c=-1)}if(o!==-1){const h=r===0&&t?1:r;s===-1||c===0||c===1&&s===o-1&&s===r+1?e.base=e.name=n.slice(h,o):(e.name=n.slice(h,s),e.base=n.slice(h,o),e.ext=n.slice(s,o))}return r>0?e.dir=n.slice(0,r-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};gi.win32=Qn.win32=Qn;gi.posix=Qn.posix=gi;const EA=Mu==="win32"?Qn.normalize:gi.normalize,Yoe=Mu==="win32"?Qn.resolve:gi.resolve,Zoe=Mu==="win32"?Qn.relative:gi.relative,I9=Mu==="win32"?Qn.dirname:gi.dirname,Rh=Mu==="win32"?Qn.basename:gi.basename,Xoe=Mu==="win32"?Qn.extname:gi.extname,Nv=Mu==="win32"?Qn.sep:gi.sep,Qoe=/^\w[\w\d+.-]*$/,Joe=/^\//,eae=/^\/\//;function wF(n,e){if(!n.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${n.authority}", path: "${n.path}", query: "${n.query}", fragment: "${n.fragment}"}`);if(n.scheme&&!Qoe.test(n.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(n.path){if(n.authority){if(!Joe.test(n.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(eae.test(n.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function tae(n,e){return!n&&!e?"file":n}function iae(n,e){switch(n){case"https":case"http":case"file":e?e[0]!==Br&&(e=Br+e):e=Br;break}return e}const Ht="",Br="/",nae=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class xe{constructor(e,t,i,s,r,o=!1){typeof e=="object"?(this.scheme=e.scheme||Ht,this.authority=e.authority||Ht,this.path=e.path||Ht,this.query=e.query||Ht,this.fragment=e.fragment||Ht):(this.scheme=tae(e,o),this.authority=t||Ht,this.path=iae(this.scheme,i||Ht),this.query=s||Ht,this.fragment=r||Ht,wF(this,o))}static isUri(e){return e instanceof xe?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}get fsPath(){return zw(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:s,query:r,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=Ht),i===void 0?i=this.authority:i===null&&(i=Ht),s===void 0?s=this.path:s===null&&(s=Ht),r===void 0?r=this.query:r===null&&(r=Ht),o===void 0?o=this.fragment:o===null&&(o=Ht),t===this.scheme&&i===this.authority&&s===this.path&&r===this.query&&o===this.fragment?this:new cd(t,i,s,r,o)}static parse(e,t=!1){const i=nae.exec(e);return i?new cd(i[2]||Ht,Sb(i[4]||Ht),Sb(i[5]||Ht),Sb(i[7]||Ht),Sb(i[9]||Ht),t):new cd(Ht,Ht,Ht,Ht,Ht)}static file(e){let t=Ht;if(Zi&&(e=e.replace(/\\/g,Br)),e[0]===Br&&e[1]===Br){const i=e.indexOf(Br,2);i===-1?(t=e.substring(2),e=Br):(t=e.substring(2,i),e=e.substring(i)||Br)}return new cd("file",t,e,Ht,Ht)}static from(e){const t=new cd(e.scheme,e.authority,e.path,e.query,e.fragment);return wF(t,!0),t}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return Zi&&e.scheme==="file"?i=xe.file(Qn.join(zw(e,!0),...t)).path:i=gi.join(e.path,...t),e.with({path:i})}toString(e=!1){return kk(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof xe)return e;{const t=new cd(e);return t._formatted=e.external,t._fsPath=e._sep===T9?e.fsPath:null,t}}else return e}}const T9=Zi?1:void 0;class cd extends xe{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=zw(this,!1)),this._fsPath}toString(e=!1){return e?kk(this,!0):(this._formatted||(this._formatted=kk(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=T9),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const N9={[58]:"%3A",[47]:"%2F",[63]:"%3F",[35]:"%23",[91]:"%5B",[93]:"%5D",[64]:"%40",[33]:"%21",[36]:"%24",[38]:"%26",[39]:"%27",[40]:"%28",[41]:"%29",[42]:"%2A",[43]:"%2B",[44]:"%2C",[59]:"%3B",[61]:"%3D",[32]:"%20"};function CF(n,e){let t,i=-1;for(let s=0;s<n.length;s++){const r=n.charCodeAt(s);if(r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||r===45||r===46||r===95||r===126||e&&r===47)i!==-1&&(t+=encodeURIComponent(n.substring(i,s)),i=-1),t!==void 0&&(t+=n.charAt(s));else{t===void 0&&(t=n.substr(0,s));const o=N9[r];o!==void 0?(i!==-1&&(t+=encodeURIComponent(n.substring(i,s)),i=-1),t+=o):i===-1&&(i=s)}}return i!==-1&&(t+=encodeURIComponent(n.substring(i))),t!==void 0?t:n}function sae(n){let e;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i===35||i===63?(e===void 0&&(e=n.substr(0,t)),e+=N9[i]):e!==void 0&&(e+=n[t])}return e!==void 0?e:n}function zw(n,e){let t;return n.authority&&n.path.length>1&&n.scheme==="file"?t=`//${n.authority}${n.path}`:n.path.charCodeAt(0)===47&&(n.path.charCodeAt(1)>=65&&n.path.charCodeAt(1)<=90||n.path.charCodeAt(1)>=97&&n.path.charCodeAt(1)<=122)&&n.path.charCodeAt(2)===58?e?t=n.path.substr(1):t=n.path[1].toLowerCase()+n.path.substr(2):t=n.path,Zi&&(t=t.replace(/\//g,"\\")),t}function kk(n,e){const t=e?sae:CF;let i="",{scheme:s,authority:r,path:o,query:a,fragment:l}=n;if(s&&(i+=s,i+=":"),(r||s==="file")&&(i+=Br,i+=Br),r){let c=r.indexOf("@");if(c!==-1){const h=r.substr(0,c);r=r.substr(c+1),c=h.indexOf(":"),c===-1?i+=t(h,!1):(i+=t(h.substr(0,c),!1),i+=":",i+=t(h.substr(c+1),!1)),i+="@"}r=r.toLowerCase(),c=r.indexOf(":"),c===-1?i+=t(r,!1):(i+=t(r.substr(0,c),!1),i+=r.substr(c))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const c=o.charCodeAt(1);c>=65&&c<=90&&(o=`/${String.fromCharCode(c+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const c=o.charCodeAt(0);c>=65&&c<=90&&(o=`${String.fromCharCode(c+32)}:${o.substr(2)}`)}i+=t(o,!0)}return a&&(i+="?",i+=t(a,!1)),l&&(i+="#",i+=e?l:CF(l,!1)),i}function A9(n){try{return decodeURIComponent(n)}catch{return n.length>3?n.substr(0,3)+A9(n.substr(3)):n}}const yF=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Sb(n){return n.match(yF)?n.replace(yF,e=>A9(e)):n}class P{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new P(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return P.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return P.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return P.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){let i=e.lineNumber|0,s=t.lineNumber|0;if(i===s){let r=e.column|0,o=t.column|0;return r-o}return i-s}clone(){return new P(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new P(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}}class I{constructor(e,t,i,s){e>i||e===i&&t>s?(this.startLineNumber=i,this.startColumn=s,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=s)}isEmpty(){return I.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return I.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}containsRange(e){return I.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return I.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return I.plusRange(this,e)}static plusRange(e,t){let i,s,r,o;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,s=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,s=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,s=e.startColumn),t.endLineNumber>e.endLineNumber?(r=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(r=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(r=e.endLineNumber,o=e.endColumn),new I(i,s,r,o)}intersectRanges(e){return I.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn,a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,h=t.endColumn;return i<a?(i=a,s=l):i===a&&(s=Math.max(s,l)),r>c?(r=c,o=h):r===c&&(o=Math.min(o,h)),i>r||i===r&&s>o?null:new I(i,s,r,o)}equalsRange(e){return I.equalsRange(this,e)}static equalsRange(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return I.getEndPosition(this)}static getEndPosition(e){return new P(e.endLineNumber,e.endColumn)}getStartPosition(){return I.getStartPosition(this)}static getStartPosition(e){return new P(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new I(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new I(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return I.collapseToStart(this)}static collapseToStart(e){return new I(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}static fromPositions(e,t=e){return new I(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new I(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const r=e.startLineNumber|0,o=t.startLineNumber|0;if(r===o){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,h=t.endLineNumber|0;if(c===h){const u=e.endColumn|0,d=t.endColumn|0;return u-d}return c-h}return a-l}return r-o}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}}class Se extends I{constructor(e,t,i,s){super(e,t,i,s),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Se.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new Se(this.startLineNumber,this.startColumn,e,t):new Se(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new P(this.positionLineNumber,this.positionColumn)}setStartPosition(e,t){return this.getDirection()===0?new Se(e,t,this.endLineNumber,this.endColumn):new Se(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new Se(e.lineNumber,e.column,t.lineNumber,t.column)}static liftSelection(e){return new Se(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,s=e.length;i<s;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,i,s,r){return r===0?new Se(e,t,i,s):new Se(i,s,e,t)}}class o1{constructor(e,t,i){this._tokenBrand=void 0,this.offset=e|0,this.type=t,this.language=i}toString(){return"("+this.offset+", "+this.type+")"}}class IA{constructor(e,t){this._tokenizationResultBrand=void 0,this.tokens=e,this.endState=t}}class a1{constructor(e,t){this._tokenizationResult2Brand=void 0,this.tokens=e,this.endState=t}}var Ek;(function(n){n[n.Unknown=0]="Unknown",n[n.Disabled=1]="Disabled",n[n.Enabled=2]="Enabled"})(Ek||(Ek={}));var Ik;(function(n){n[n.KeepWhitespace=1]="KeepWhitespace",n[n.InsertAsSnippet=4]="InsertAsSnippet"})(Ik||(Ik={}));var Tk;(function(n){n[n.Method=0]="Method",n[n.Function=1]="Function",n[n.Constructor=2]="Constructor",n[n.Field=3]="Field",n[n.Variable=4]="Variable",n[n.Class=5]="Class",n[n.Struct=6]="Struct",n[n.Interface=7]="Interface",n[n.Module=8]="Module",n[n.Property=9]="Property",n[n.Event=10]="Event",n[n.Operator=11]="Operator",n[n.Unit=12]="Unit",n[n.Value=13]="Value",n[n.Constant=14]="Constant",n[n.Enum=15]="Enum",n[n.EnumMember=16]="EnumMember",n[n.Keyword=17]="Keyword",n[n.Text=18]="Text",n[n.Color=19]="Color",n[n.File=20]="File",n[n.Reference=21]="Reference",n[n.Customcolor=22]="Customcolor",n[n.Folder=23]="Folder",n[n.TypeParameter=24]="TypeParameter",n[n.User=25]="User",n[n.Issue=26]="Issue",n[n.Snippet=27]="Snippet"})(Tk||(Tk={}));var Nk;(function(n){n[n.Deprecated=1]="Deprecated"})(Nk||(Nk={}));var Ak;(function(n){n[n.Invoke=0]="Invoke",n[n.TriggerCharacter=1]="TriggerCharacter",n[n.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(Ak||(Ak={}));var Mk;(function(n){n[n.EXACT=0]="EXACT",n[n.ABOVE=1]="ABOVE",n[n.BELOW=2]="BELOW"})(Mk||(Mk={}));var Rk;(function(n){n[n.NotSet=0]="NotSet",n[n.ContentFlush=1]="ContentFlush",n[n.RecoverFromMarkers=2]="RecoverFromMarkers",n[n.Explicit=3]="Explicit",n[n.Paste=4]="Paste",n[n.Undo=5]="Undo",n[n.Redo=6]="Redo"})(Rk||(Rk={}));var Ok;(function(n){n[n.LF=1]="LF",n[n.CRLF=2]="CRLF"})(Ok||(Ok={}));var Fk;(function(n){n[n.Text=0]="Text",n[n.Read=1]="Read",n[n.Write=2]="Write"})(Fk||(Fk={}));var Pk;(function(n){n[n.None=0]="None",n[n.Keep=1]="Keep",n[n.Brackets=2]="Brackets",n[n.Advanced=3]="Advanced",n[n.Full=4]="Full"})(Pk||(Pk={}));var Bk;(function(n){n[n.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",n[n.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",n[n.accessibilitySupport=2]="accessibilitySupport",n[n.accessibilityPageSize=3]="accessibilityPageSize",n[n.ariaLabel=4]="ariaLabel",n[n.autoClosingBrackets=5]="autoClosingBrackets",n[n.autoClosingDelete=6]="autoClosingDelete",n[n.autoClosingOvertype=7]="autoClosingOvertype",n[n.autoClosingQuotes=8]="autoClosingQuotes",n[n.autoIndent=9]="autoIndent",n[n.automaticLayout=10]="automaticLayout",n[n.autoSurround=11]="autoSurround",n[n.bracketPairColorization=12]="bracketPairColorization",n[n.guides=13]="guides",n[n.codeLens=14]="codeLens",n[n.codeLensFontFamily=15]="codeLensFontFamily",n[n.codeLensFontSize=16]="codeLensFontSize",n[n.colorDecorators=17]="colorDecorators",n[n.columnSelection=18]="columnSelection",n[n.comments=19]="comments",n[n.contextmenu=20]="contextmenu",n[n.copyWithSyntaxHighlighting=21]="copyWithSyntaxHighlighting",n[n.cursorBlinking=22]="cursorBlinking",n[n.cursorSmoothCaretAnimation=23]="cursorSmoothCaretAnimation",n[n.cursorStyle=24]="cursorStyle",n[n.cursorSurroundingLines=25]="cursorSurroundingLines",n[n.cursorSurroundingLinesStyle=26]="cursorSurroundingLinesStyle",n[n.cursorWidth=27]="cursorWidth",n[n.disableLayerHinting=28]="disableLayerHinting",n[n.disableMonospaceOptimizations=29]="disableMonospaceOptimizations",n[n.domReadOnly=30]="domReadOnly",n[n.dragAndDrop=31]="dragAndDrop",n[n.emptySelectionClipboard=32]="emptySelectionClipboard",n[n.extraEditorClassName=33]="extraEditorClassName",n[n.fastScrollSensitivity=34]="fastScrollSensitivity",n[n.find=35]="find",n[n.fixedOverflowWidgets=36]="fixedOverflowWidgets",n[n.folding=37]="folding",n[n.foldingStrategy=38]="foldingStrategy",n[n.foldingHighlight=39]="foldingHighlight",n[n.foldingImportsByDefault=40]="foldingImportsByDefault",n[n.unfoldOnClickAfterEndOfLine=41]="unfoldOnClickAfterEndOfLine",n[n.fontFamily=42]="fontFamily",n[n.fontInfo=43]="fontInfo",n[n.fontLigatures=44]="fontLigatures",n[n.fontSize=45]="fontSize",n[n.fontWeight=46]="fontWeight",n[n.formatOnPaste=47]="formatOnPaste",n[n.formatOnType=48]="formatOnType",n[n.glyphMargin=49]="glyphMargin",n[n.gotoLocation=50]="gotoLocation",n[n.hideCursorInOverviewRuler=51]="hideCursorInOverviewRuler",n[n.hover=52]="hover",n[n.inDiffEditor=53]="inDiffEditor",n[n.inlineSuggest=54]="inlineSuggest",n[n.letterSpacing=55]="letterSpacing",n[n.lightbulb=56]="lightbulb",n[n.lineDecorationsWidth=57]="lineDecorationsWidth",n[n.lineHeight=58]="lineHeight",n[n.lineNumbers=59]="lineNumbers",n[n.lineNumbersMinChars=60]="lineNumbersMinChars",n[n.linkedEditing=61]="linkedEditing",n[n.links=62]="links",n[n.matchBrackets=63]="matchBrackets",n[n.minimap=64]="minimap",n[n.mouseStyle=65]="mouseStyle",n[n.mouseWheelScrollSensitivity=66]="mouseWheelScrollSensitivity",n[n.mouseWheelZoom=67]="mouseWheelZoom",n[n.multiCursorMergeOverlapping=68]="multiCursorMergeOverlapping",n[n.multiCursorModifier=69]="multiCursorModifier",n[n.multiCursorPaste=70]="multiCursorPaste",n[n.occurrencesHighlight=71]="occurrencesHighlight",n[n.overviewRulerBorder=72]="overviewRulerBorder",n[n.overviewRulerLanes=73]="overviewRulerLanes",n[n.padding=74]="padding",n[n.parameterHints=75]="parameterHints",n[n.peekWidgetDefaultFocus=76]="peekWidgetDefaultFocus",n[n.definitionLinkOpensInPeek=77]="definitionLinkOpensInPeek",n[n.quickSuggestions=78]="quickSuggestions",n[n.quickSuggestionsDelay=79]="quickSuggestionsDelay",n[n.readOnly=80]="readOnly",n[n.renameOnType=81]="renameOnType",n[n.renderControlCharacters=82]="renderControlCharacters",n[n.renderFinalNewline=83]="renderFinalNewline",n[n.renderLineHighlight=84]="renderLineHighlight",n[n.renderLineHighlightOnlyWhenFocus=85]="renderLineHighlightOnlyWhenFocus",n[n.renderValidationDecorations=86]="renderValidationDecorations",n[n.renderWhitespace=87]="renderWhitespace",n[n.revealHorizontalRightPadding=88]="revealHorizontalRightPadding",n[n.roundedSelection=89]="roundedSelection",n[n.rulers=90]="rulers",n[n.scrollbar=91]="scrollbar",n[n.scrollBeyondLastColumn=92]="scrollBeyondLastColumn",n[n.scrollBeyondLastLine=93]="scrollBeyondLastLine",n[n.scrollPredominantAxis=94]="scrollPredominantAxis",n[n.selectionClipboard=95]="selectionClipboard",n[n.selectionHighlight=96]="selectionHighlight",n[n.selectOnLineNumbers=97]="selectOnLineNumbers",n[n.showFoldingControls=98]="showFoldingControls",n[n.showUnused=99]="showUnused",n[n.snippetSuggestions=100]="snippetSuggestions",n[n.smartSelect=101]="smartSelect",n[n.smoothScrolling=102]="smoothScrolling",n[n.stickyTabStops=103]="stickyTabStops",n[n.stopRenderingLineAfter=104]="stopRenderingLineAfter",n[n.suggest=105]="suggest",n[n.suggestFontSize=106]="suggestFontSize",n[n.suggestLineHeight=107]="suggestLineHeight",n[n.suggestOnTriggerCharacters=108]="suggestOnTriggerCharacters",n[n.suggestSelection=109]="suggestSelection",n[n.tabCompletion=110]="tabCompletion",n[n.tabIndex=111]="tabIndex",n[n.unusualLineTerminators=112]="unusualLineTerminators",n[n.useShadowDOM=113]="useShadowDOM",n[n.useTabStops=114]="useTabStops",n[n.wordSeparators=115]="wordSeparators",n[n.wordWrap=116]="wordWrap",n[n.wordWrapBreakAfterCharacters=117]="wordWrapBreakAfterCharacters",n[n.wordWrapBreakBeforeCharacters=118]="wordWrapBreakBeforeCharacters",n[n.wordWrapColumn=119]="wordWrapColumn",n[n.wordWrapOverride1=120]="wordWrapOverride1",n[n.wordWrapOverride2=121]="wordWrapOverride2",n[n.wrappingIndent=122]="wrappingIndent",n[n.wrappingStrategy=123]="wrappingStrategy",n[n.showDeprecated=124]="showDeprecated",n[n.inlayHints=125]="inlayHints",n[n.editorClassName=126]="editorClassName",n[n.pixelRatio=127]="pixelRatio",n[n.tabFocusMode=128]="tabFocusMode",n[n.layoutInfo=129]="layoutInfo",n[n.wrappingInfo=130]="wrappingInfo"})(Bk||(Bk={}));var Vk;(function(n){n[n.TextDefined=0]="TextDefined",n[n.LF=1]="LF",n[n.CRLF=2]="CRLF"})(Vk||(Vk={}));var Wk;(function(n){n[n.LF=0]="LF",n[n.CRLF=1]="CRLF"})(Wk||(Wk={}));var zk;(function(n){n[n.None=0]="None",n[n.Indent=1]="Indent",n[n.IndentOutdent=2]="IndentOutdent",n[n.Outdent=3]="Outdent"})(zk||(zk={}));var Hk;(function(n){n[n.Other=0]="Other",n[n.Type=1]="Type",n[n.Parameter=2]="Parameter"})(Hk||(Hk={}));var $k;(function(n){n[n.Automatic=0]="Automatic",n[n.Explicit=1]="Explicit"})($k||($k={}));var Uk;(function(n){n[n.DependsOnKbLayout=-1]="DependsOnKbLayout",n[n.Unknown=0]="Unknown",n[n.Backspace=1]="Backspace",n[n.Tab=2]="Tab",n[n.Enter=3]="Enter",n[n.Shift=4]="Shift",n[n.Ctrl=5]="Ctrl",n[n.Alt=6]="Alt",n[n.PauseBreak=7]="PauseBreak",n[n.CapsLock=8]="CapsLock",n[n.Escape=9]="Escape",n[n.Space=10]="Space",n[n.PageUp=11]="PageUp",n[n.PageDown=12]="PageDown",n[n.End=13]="End",n[n.Home=14]="Home",n[n.LeftArrow=15]="LeftArrow",n[n.UpArrow=16]="UpArrow",n[n.RightArrow=17]="RightArrow",n[n.DownArrow=18]="DownArrow",n[n.Insert=19]="Insert",n[n.Delete=20]="Delete",n[n.Digit0=21]="Digit0",n[n.Digit1=22]="Digit1",n[n.Digit2=23]="Digit2",n[n.Digit3=24]="Digit3",n[n.Digit4=25]="Digit4",n[n.Digit5=26]="Digit5",n[n.Digit6=27]="Digit6",n[n.Digit7=28]="Digit7",n[n.Digit8=29]="Digit8",n[n.Digit9=30]="Digit9",n[n.KeyA=31]="KeyA",n[n.KeyB=32]="KeyB",n[n.KeyC=33]="KeyC",n[n.KeyD=34]="KeyD",n[n.KeyE=35]="KeyE",n[n.KeyF=36]="KeyF",n[n.KeyG=37]="KeyG",n[n.KeyH=38]="KeyH",n[n.KeyI=39]="KeyI",n[n.KeyJ=40]="KeyJ",n[n.KeyK=41]="KeyK",n[n.KeyL=42]="KeyL",n[n.KeyM=43]="KeyM",n[n.KeyN=44]="KeyN",n[n.KeyO=45]="KeyO",n[n.KeyP=46]="KeyP",n[n.KeyQ=47]="KeyQ",n[n.KeyR=48]="KeyR",n[n.KeyS=49]="KeyS",n[n.KeyT=50]="KeyT",n[n.KeyU=51]="KeyU",n[n.KeyV=52]="KeyV",n[n.KeyW=53]="KeyW",n[n.KeyX=54]="KeyX",n[n.KeyY=55]="KeyY",n[n.KeyZ=56]="KeyZ",n[n.Meta=57]="Meta",n[n.ContextMenu=58]="ContextMenu",n[n.F1=59]="F1",n[n.F2=60]="F2",n[n.F3=61]="F3",n[n.F4=62]="F4",n[n.F5=63]="F5",n[n.F6=64]="F6",n[n.F7=65]="F7",n[n.F8=66]="F8",n[n.F9=67]="F9",n[n.F10=68]="F10",n[n.F11=69]="F11",n[n.F12=70]="F12",n[n.F13=71]="F13",n[n.F14=72]="F14",n[n.F15=73]="F15",n[n.F16=74]="F16",n[n.F17=75]="F17",n[n.F18=76]="F18",n[n.F19=77]="F19",n[n.NumLock=78]="NumLock",n[n.ScrollLock=79]="ScrollLock",n[n.Semicolon=80]="Semicolon",n[n.Equal=81]="Equal",n[n.Comma=82]="Comma",n[n.Minus=83]="Minus",n[n.Period=84]="Period",n[n.Slash=85]="Slash",n[n.Backquote=86]="Backquote",n[n.BracketLeft=87]="BracketLeft",n[n.Backslash=88]="Backslash",n[n.BracketRight=89]="BracketRight",n[n.Quote=90]="Quote",n[n.OEM_8=91]="OEM_8",n[n.IntlBackslash=92]="IntlBackslash",n[n.Numpad0=93]="Numpad0",n[n.Numpad1=94]="Numpad1",n[n.Numpad2=95]="Numpad2",n[n.Numpad3=96]="Numpad3",n[n.Numpad4=97]="Numpad4",n[n.Numpad5=98]="Numpad5",n[n.Numpad6=99]="Numpad6",n[n.Numpad7=100]="Numpad7",n[n.Numpad8=101]="Numpad8",n[n.Numpad9=102]="Numpad9",n[n.NumpadMultiply=103]="NumpadMultiply",n[n.NumpadAdd=104]="NumpadAdd",n[n.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",n[n.NumpadSubtract=106]="NumpadSubtract",n[n.NumpadDecimal=107]="NumpadDecimal",n[n.NumpadDivide=108]="NumpadDivide",n[n.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",n[n.ABNT_C1=110]="ABNT_C1",n[n.ABNT_C2=111]="ABNT_C2",n[n.AudioVolumeMute=112]="AudioVolumeMute",n[n.AudioVolumeUp=113]="AudioVolumeUp",n[n.AudioVolumeDown=114]="AudioVolumeDown",n[n.BrowserSearch=115]="BrowserSearch",n[n.BrowserHome=116]="BrowserHome",n[n.BrowserBack=117]="BrowserBack",n[n.BrowserForward=118]="BrowserForward",n[n.MediaTrackNext=119]="MediaTrackNext",n[n.MediaTrackPrevious=120]="MediaTrackPrevious",n[n.MediaStop=121]="MediaStop",n[n.MediaPlayPause=122]="MediaPlayPause",n[n.LaunchMediaPlayer=123]="LaunchMediaPlayer",n[n.LaunchMail=124]="LaunchMail",n[n.LaunchApp2=125]="LaunchApp2",n[n.MAX_VALUE=126]="MAX_VALUE"})(Uk||(Uk={}));var jk;(function(n){n[n.Hint=1]="Hint",n[n.Info=2]="Info",n[n.Warning=4]="Warning",n[n.Error=8]="Error"})(jk||(jk={}));var qk;(function(n){n[n.Unnecessary=1]="Unnecessary",n[n.Deprecated=2]="Deprecated"})(qk||(qk={}));var Kk;(function(n){n[n.Inline=1]="Inline",n[n.Gutter=2]="Gutter"})(Kk||(Kk={}));var Gk;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.TEXTAREA=1]="TEXTAREA",n[n.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",n[n.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",n[n.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",n[n.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",n[n.CONTENT_TEXT=6]="CONTENT_TEXT",n[n.CONTENT_EMPTY=7]="CONTENT_EMPTY",n[n.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",n[n.CONTENT_WIDGET=9]="CONTENT_WIDGET",n[n.OVERVIEW_RULER=10]="OVERVIEW_RULER",n[n.SCROLLBAR=11]="SCROLLBAR",n[n.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",n[n.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(Gk||(Gk={}));var Yk;(function(n){n[n.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",n[n.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",n[n.TOP_CENTER=2]="TOP_CENTER"})(Yk||(Yk={}));var Zk;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=4]="Right",n[n.Full=7]="Full"})(Zk||(Zk={}));var Xk;(function(n){n[n.Off=0]="Off",n[n.On=1]="On",n[n.Relative=2]="Relative",n[n.Interval=3]="Interval",n[n.Custom=4]="Custom"})(Xk||(Xk={}));var Qk;(function(n){n[n.None=0]="None",n[n.Text=1]="Text",n[n.Blocks=2]="Blocks"})(Qk||(Qk={}));var Jk;(function(n){n[n.Smooth=0]="Smooth",n[n.Immediate=1]="Immediate"})(Jk||(Jk={}));var eE;(function(n){n[n.Auto=1]="Auto",n[n.Hidden=2]="Hidden",n[n.Visible=3]="Visible"})(eE||(eE={}));var tE;(function(n){n[n.LTR=0]="LTR",n[n.RTL=1]="RTL"})(tE||(tE={}));var iE;(function(n){n[n.Invoke=1]="Invoke",n[n.TriggerCharacter=2]="TriggerCharacter",n[n.ContentChange=3]="ContentChange"})(iE||(iE={}));var nE;(function(n){n[n.File=0]="File",n[n.Module=1]="Module",n[n.Namespace=2]="Namespace",n[n.Package=3]="Package",n[n.Class=4]="Class",n[n.Method=5]="Method",n[n.Property=6]="Property",n[n.Field=7]="Field",n[n.Constructor=8]="Constructor",n[n.Enum=9]="Enum",n[n.Interface=10]="Interface",n[n.Function=11]="Function",n[n.Variable=12]="Variable",n[n.Constant=13]="Constant",n[n.String=14]="String",n[n.Number=15]="Number",n[n.Boolean=16]="Boolean",n[n.Array=17]="Array",n[n.Object=18]="Object",n[n.Key=19]="Key",n[n.Null=20]="Null",n[n.EnumMember=21]="EnumMember",n[n.Struct=22]="Struct",n[n.Event=23]="Event",n[n.Operator=24]="Operator",n[n.TypeParameter=25]="TypeParameter"})(nE||(nE={}));var sE;(function(n){n[n.Deprecated=1]="Deprecated"})(sE||(sE={}));var rE;(function(n){n[n.Hidden=0]="Hidden",n[n.Blink=1]="Blink",n[n.Smooth=2]="Smooth",n[n.Phase=3]="Phase",n[n.Expand=4]="Expand",n[n.Solid=5]="Solid"})(rE||(rE={}));var oE;(function(n){n[n.Line=1]="Line",n[n.Block=2]="Block",n[n.Underline=3]="Underline",n[n.LineThin=4]="LineThin",n[n.BlockOutline=5]="BlockOutline",n[n.UnderlineThin=6]="UnderlineThin"})(oE||(oE={}));var aE;(function(n){n[n.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",n[n.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",n[n.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",n[n.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(aE||(aE={}));var lE;(function(n){n[n.None=0]="None",n[n.Same=1]="Same",n[n.Indent=2]="Indent",n[n.DeepIndent=3]="DeepIndent"})(lE||(lE={}));class N0{static chord(e,t){return Vn(e,t)}}N0.CtrlCmd=2048;N0.Shift=1024;N0.Alt=512;N0.WinCtrl=256;function M9(){return{editor:void 0,languages:void 0,CancellationTokenSource:go,Emitter:R,KeyCode:Uk,KeyMod:N0,Position:P,Range:I,Selection:Se,SelectionDirection:tE,MarkerSeverity:jk,MarkerTag:qk,Uri:xe,Token:o1}}var Ur;(function(n){n.serviceIds=new Map,n.DI_TARGET="$di$target",n.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[n.DI_DEPENDENCIES]||[]}n.getServiceDependencies=e})(Ur||(Ur={}));const pt=Xe("instantiationService");function R9(n,e,t,i){e[Ur.DI_TARGET]===e?e[Ur.DI_DEPENDENCIES].push({id:n,index:t,optional:i}):(e[Ur.DI_DEPENDENCIES]=[{id:n,index:t,optional:i}],e[Ur.DI_TARGET]=e)}function Xe(n){if(Ur.serviceIds.has(n))return Ur.serviceIds.get(n);const e=function(t,i,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");R9(e,t,s,!1)};return e.toString=()=>n,Ur.serviceIds.set(n,e),e}function rae(n){return function(e,t,i){if(arguments.length!==3)throw new Error("@optional-decorator can only be used to decorate a parameter");R9(n,e,i,!0)}}const Tt=Xe("codeEditorService");class ru{constructor(){this._zoomLevel=0,this._lastZoomLevelChangeTime=0,this._onDidChangeZoomLevel=new R,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this._zoomFactor=1}getZoomLevel(){return this._zoomLevel}getTimeSinceLastZoomLevelChanged(){return Date.now()-this._lastZoomLevelChangeTime}getZoomFactor(){return this._zoomFactor}getPixelRatio(){let e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/i}}ru.INSTANCE=new ru;function cE(){return ru.INSTANCE.getZoomLevel()}function oae(){return ru.INSTANCE.getTimeSinceLastZoomLevelChanged()}function O9(n){return ru.INSTANCE.onDidChangeZoomLevel(n)}function aae(){return ru.INSTANCE.getZoomFactor()}function Hw(){return ru.INSTANCE.getPixelRatio()}const A0=navigator.userAgent,On=A0.indexOf("Firefox")>=0,Oh=A0.indexOf("AppleWebKit")>=0,$w=A0.indexOf("Chrome")>=0,vr=!$w&&A0.indexOf("Safari")>=0,lae=!$w&&!vr&&Oh,Ip=A0.indexOf("Android")>=0,F9=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches,l1={clipboard:{writeText:ef||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:ef||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>ef||F9?0:navigator.keyboard||vr?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)};function hE(n,e){if(n===0)return null;const t=(n&65535)>>>0,i=(n&4294901760)>>>16;return i!==0?new Uw([gx(t,e),gx(i,e)]):new Uw([gx(t,e)])}function gx(n,e){const t=!!(n&2048),i=!!(n&256),s=e===2?i:t,r=!!(n&1024),o=!!(n&512),a=e===2?t:i,l=n&255;return new ou(s,r,o,a,l)}class ou{constructor(e,t,i,s,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=s,this.keyCode=r}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toChord(){return new Uw([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class Uw{constructor(e){if(e.length===0)throw Zo("parts");this.parts=e}}class cae{constructor(e,t,i,s,r,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=s,this.keyLabel=r,this.keyAriaLabel=o}}class hae{}function uae(n){if(n.charCode){let t=String.fromCharCode(n.charCode).toUpperCase();return _h.fromString(t)}const e=n.keyCode;if(e===3)return 7;if(On){if(e===59)return 80;if(e===107)return 81;if(e===109)return 83;if(je&&e===224)return 57}else if(Oh){if(e===91)return 57;if(je&&e===93)return 57;if(!je&&e===92)return 57}return L9[e]||0}const dae=je?256:2048,fae=512,gae=1024,pae=je?2048:256;class Ft{constructor(e){this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=uae(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=dae),this.altKey&&(t|=fae),this.shiftKey&&(t|=gae),this.metaKey&&(t|=pae),t|=e,t}_computeRuntimeKeybinding(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new ou(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}let uE=!1,hd=null;function mae(n){if(!n.parent||n.parent===n)return null;try{let e=n.location,t=n.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return uE=!0,null}catch{return uE=!0,null}return n.parent}class dE{static getSameOriginWindowChain(){if(!hd){hd=[];let e=window,t;do t=mae(e),t?hd.push({window:e,iframeElement:e.frameElement||null}):hd.push({window:e,iframeElement:null}),e=t;while(e)}return hd.slice(0)}static hasDifferentOriginAncestor(){return hd||this.getSameOriginWindowChain(),uE}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,s=0,r=this.getSameOriginWindowChain();for(const o of r){if(i+=o.window.scrollY,s+=o.window.scrollX,o.window===t||!o.iframeElement)break;let a=o.iframeElement.getBoundingClientRect();i+=a.top,s+=a.left}return{top:i,left:s}}}class Vs{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);let t=dE.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class Of{constructor(e,t=0,i=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t,e){let s=e,r=e;if(typeof s.wheelDeltaY!="undefined")this.deltaY=s.wheelDeltaY/120;else if(typeof r.VERTICAL_AXIS!="undefined"&&r.axis===r.VERTICAL_AXIS)this.deltaY=-r.detail/3;else if(e.type==="wheel"){const o=e;o.deltaMode===o.DOM_DELTA_LINE?On&&!je?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof s.wheelDeltaX!="undefined")vr&&Zi?this.deltaX=-(s.wheelDeltaX/120):this.deltaX=s.wheelDeltaX/120;else if(typeof r.HORIZONTAL_AXIS!="undefined"&&r.axis===r.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const o=e;o.deltaMode===o.DOM_DELTA_LINE?On&&!je?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}}var SF=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};function _ae(n){return!!n&&typeof n.then=="function"}function ks(n){const e=new go,t=n(e.token),i=new Promise((s,r)=>{const o=e.token.onCancellationRequested(()=>{o.dispose(),e.dispose(),r(xg())});Promise.resolve(t).then(a=>{o.dispose(),e.dispose(),s(a)},a=>{o.dispose(),e.dispose(),r(a)})});return new class{cancel(){e.cancel()}then(s,r){return i.then(s,r)}catch(s){return this.then(void 0,s)}finally(s){return i.finally(s)}}}function P9(n,e,t){return Promise.race([n,new Promise(i=>e.onCancellationRequested(()=>i(t)))])}class bae{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{this.queuedPromise=null;const i=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,i};this.queuedPromise=new Promise(i=>{this.activePromise.then(t,t).then(i)})}return new Promise((t,i)=>{this.queuedPromise.then(t,i)})}return this.activePromise=e(),new Promise((t,i)=>{this.activePromise.then(s=>{this.activePromise=null,t(s)},s=>{this.activePromise=null,i(s)})})}}class Dg{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((i,s)=>{this.doResolve=i,this.doReject=s}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const i=this.task;return this.task=null,i()}})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve&&this.doResolve(null)},t),this.completionPromise}isTriggered(){return this.timeout!==null}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(xg()),this.completionPromise=null)}cancelTimeout(){this.timeout!==null&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancel()}}class vae{constructor(e){this.delayer=new Dg(e),this.throttler=new bae}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}dispose(){this.delayer.dispose()}}function e_(n,e){return e?new Promise((t,i)=>{const s=setTimeout(()=>{r.dispose(),t()},n),r=e.onCancellationRequested(()=>{clearTimeout(s),r.dispose(),i(xg())})}):ks(t=>e_(n,t))}function Ff(n,e=0){const t=setTimeout(n,e);return Ze(()=>clearTimeout(t))}class Wn{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class M0{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}class Wt{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}let fE;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?fE=n=>{const e=setTimeout(()=>{const i=Date.now()+15;n(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0,clearTimeout(e))}}}:fE=(n,e)=>{const t=requestIdleCallback(n,typeof e=="number"?{timeout:e}:void 0);let i=!1;return{dispose(){i||(i=!0,cancelIdleCallback(t))}}}})();class Yp{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=fE(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}var gE;(function(n){function e(i){return SF(this,void 0,void 0,function*(){let s;const r=yield Promise.all(i.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s!="undefined")throw s;return r})}n.settled=e;function t(i){return new Promise((s,r)=>SF(this,void 0,void 0,function*(){try{yield i(s,r)}catch(o){r(o)}}))}n.withAsyncBody=t})(gE||(gE={}));var Ve;(function(n){n.inMemory="inmemory",n.vscode="vscode",n.internal="private",n.walkThrough="walkThrough",n.walkThroughSnippet="walkThroughSnippet",n.http="http",n.https="https",n.file="file",n.mailto="mailto",n.untitled="untitled",n.data="data",n.command="command",n.vscodeRemote="vscode-remote",n.vscodeRemoteResource="vscode-remote-resource",n.userData="vscode-userdata",n.vscodeCustomEditor="vscode-custom-editor",n.vscodeNotebook="vscode-notebook",n.vscodeNotebookCell="vscode-notebook-cell",n.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",n.vscodeNotebookCellOutput="vscode-notebook-cell-output",n.vscodeInteractive="vscode-interactive",n.vscodeInteractiveInput="vscode-interactive-input",n.vscodeSettings="vscode-settings",n.vscodeWorkspaceTrust="vscode-workspace-trust",n.vscodeTerminal="vscode-terminal",n.webviewPanel="webview-panel",n.vscodeWebview="vscode-webview",n.extension="extension",n.vscodeFileResource="vscode-file",n.tmp="tmp"})(Ve||(Ve={}));class wae{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)return this._delegate(e);const t=e.authority;let i=this._hosts[t];i&&i.indexOf(":")!==-1&&(i=`[${i}]`);const s=this._ports[t],r=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return typeof r=="string"&&(o+=`&tkn=${encodeURIComponent(r)}`),xe.from({scheme:T0?this._preferredWebSchema:Ve.vscodeRemoteResource,authority:`${i}:${s}`,path:"/vscode-remote-resource",query:o})}}const B9=new wae;class t_{asBrowserUri(e,t){const i=this.toUri(e,t);return i.scheme===Ve.vscodeRemote?B9.rewrite(i):i.scheme===Ve.file&&(ef||typeof It.importScripts=="function"&&It.origin===`${Ve.vscodeFileResource}://${t_.FALLBACK_AUTHORITY}`)?i.with({scheme:Ve.vscodeFileResource,authority:i.authority||t_.FALLBACK_AUTHORITY,query:null,fragment:null}):i}toUri(e,t){return xe.isUri(e)?e:xe.parse(t.toUrl(e))}}t_.FALLBACK_AUTHORITY="vscode-app";const V9=new t_;function Yi(n){for(;n.firstChild;)n.firstChild.remove()}function TA(n){var e;return(e=n==null?void 0:n.isConnected)!==null&&e!==void 0?e:!1}class Cae{constructor(e,t,i,s){this._node=e,this._type=t,this._handler=i,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){!this._handler||(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function K(n,e,t,i){return new Cae(n,e,t,i)}function W9(n){return function(e){return n(new Vs(e))}}function yae(n){return function(e){return n(new Ft(e))}}let mi=function(e,t,i,s){let r=i;return t==="click"||t==="mousedown"?r=W9(i):(t==="keydown"||t==="keypress"||t==="keyup")&&(r=yae(i)),K(e,t,r,s)},Sae=function(e,t,i){let s=W9(t);return NA(e,s,i)};function NA(n,e,t){return K(n,cc&&l1.pointerEvents?de.POINTER_DOWN:de.MOUSE_DOWN,e,t)}function z9(n,e,t){return K(n,cc&&l1.pointerEvents?de.POINTER_UP:de.MOUSE_UP,e,t)}function AA(n,e){return K(n,"mouseout",t=>{let i=t.relatedTarget;for(;i&&i!==n;)i=i.parentNode;i!==n&&e(t)})}function xae(n,e){return K(n,"pointerout",t=>{let i=t.relatedTarget;for(;i&&i!==n;)i=i.parentNode;i!==n&&e(t)})}let px=null;function Dae(n){if(!px){const e=t=>setTimeout(()=>t(new Date().getTime()),0);px=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}return px.call(self,n)}let H9,na;class mx{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Ie(e)}}static sort(e,t){return t.priority-e.priority}}(function(){let n=[],e=null,t=!1,i=!1,s=()=>{for(t=!1,e=n,n=[],i=!0;e.length>0;)e.sort(mx.sort),e.shift().execute();i=!1};na=(r,o=0)=>{let a=new mx(r,o);return n.push(a),t||(t=!0,Dae(s)),a},H9=(r,o)=>{if(i){let a=new mx(r,o);return e.push(a),a}else return na(r,o)}})();const Lae=8,kae=function(n,e){return e};class Eae extends q{constructor(e,t,i,s=kae,r=Lae){super();let o=null,a=0,l=this._register(new Wn),c=()=>{a=new Date().getTime(),i(o),o=null};this._register(K(e,t,h=>{o=s(o,h);let u=new Date().getTime()-a;u>=r?(l.cancel(),c()):l.setIfNotSet(c,r-u)}))}}function MA(n,e,t,i,s){return new Eae(n,e,t,i,s)}function RA(n){return document.defaultView.getComputedStyle(n,null)}function c1(n){if(n!==document.body)return new gt(n.clientWidth,n.clientHeight);if(cc&&window.visualViewport)return new gt(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new gt(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new gt(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new gt(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class Vt{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,i){let s=RA(e),r="0";return s&&(s.getPropertyValue?r=s.getPropertyValue(t):r=s.getAttribute(i)),Vt.convertToPixels(e,r)}static getBorderLeftWidth(e){return Vt.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return Vt.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return Vt.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return Vt.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return Vt.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return Vt.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return Vt.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return Vt.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return Vt.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return Vt.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return Vt.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return Vt.getDimension(e,"margin-bottom","marginBottom")}}class gt{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new gt(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof gt?e:new gt(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}function $9(n){let e=n.offsetParent,t=n.offsetTop,i=n.offsetLeft;for(;(n=n.parentNode)!==null&&n!==document.body&&n!==document.documentElement;){t-=n.scrollTop;const s=j9(n)?null:RA(n);s&&(i-=s.direction!=="rtl"?n.scrollLeft:-n.scrollLeft),n===e&&(i+=Vt.getBorderLeftWidth(n),t+=Vt.getBorderTopWidth(n),t+=n.offsetTop,i+=n.offsetLeft,e=n.offsetParent)}return{left:i,top:t}}function Iae(n,e,t){typeof e=="number"&&(n.style.width=`${e}px`),typeof t=="number"&&(n.style.height=`${t}px`)}function Gi(n){let e=n.getBoundingClientRect();return{left:e.left+Xa.scrollX,top:e.top+Xa.scrollY,width:e.width,height:e.height}}const Xa=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function sr(n){let e=Vt.getMarginLeft(n)+Vt.getMarginRight(n);return n.offsetWidth+e}function _x(n){let e=Vt.getBorderLeftWidth(n)+Vt.getBorderRightWidth(n),t=Vt.getPaddingLeft(n)+Vt.getPaddingRight(n);return n.offsetWidth-e-t}function Tae(n){let e=Vt.getBorderTopWidth(n)+Vt.getBorderBottomWidth(n),t=Vt.getPaddingTop(n)+Vt.getPaddingBottom(n);return n.offsetHeight-e-t}function pE(n){let e=Vt.getMarginTop(n)+Vt.getMarginBottom(n);return n.offsetHeight+e}function Xo(n,e){for(;n;){if(n===e)return!0;n=n.parentNode}return!1}function U9(n,e,t){for(;n&&n.nodeType===n.ELEMENT_NODE;){if(n.classList.contains(e))return n;if(t){if(typeof t=="string"){if(n.classList.contains(t))return null}else if(n===t)return null}n=n.parentNode}return null}function xF(n,e,t){return!!U9(n,e,t)}function j9(n){return n&&!!n.host&&!!n.mode}function OA(n){return!!Lg(n)}function Lg(n){for(;n.parentNode;){if(n===document.body)return null;n=n.parentNode}return j9(n)?n:null}function sf(){let n=document.activeElement;for(;n!=null&&n.shadowRoot;)n=n.shadowRoot.activeElement;return n}function $s(n=document.getElementsByTagName("head")[0]){let e=document.createElement("style");return e.type="text/css",e.media="screen",n.appendChild(e),e}let bx=null;function q9(){return bx||(bx=$s()),bx}function Nae(n){var e,t;return!((e=n==null?void 0:n.sheet)===null||e===void 0)&&e.rules?n.sheet.rules:!((t=n==null?void 0:n.sheet)===null||t===void 0)&&t.cssRules?n.sheet.cssRules:[]}function mE(n,e,t=q9()){!t||!e||t.sheet.insertRule(n+"{"+e+"}",0)}function jw(n,e=q9()){if(!e)return;let t=Nae(e),i=[];for(let s=0;s<t.length;s++)t[s].selectorText.indexOf(n)!==-1&&i.push(s);for(let s=i.length-1;s>=0;s--)e.sheet.deleteRule(i[s])}function K9(n){return typeof HTMLElement=="object"?n instanceof HTMLElement:n&&typeof n=="object"&&n.nodeType===1&&typeof n.nodeName=="string"}const de={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:Oh?"webkitAnimationStart":"animationstart",ANIMATION_END:Oh?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:Oh?"webkitAnimationIteration":"animationiteration"},ot={stop:function(n,e){n.preventDefault?n.preventDefault():n.returnValue=!1,e&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0)}};function Aae(n){let e=[];for(let t=0;n&&n.nodeType===n.ELEMENT_NODE;t++)e[t]=n.scrollTop,n=n.parentNode;return e}function Mae(n,e){for(let t=0;n&&n.nodeType===n.ELEMENT_NODE;t++)n.scrollTop!==e[t]&&(n.scrollTop=e[t]),n=n.parentNode}class Rae extends q{constructor(e){super(),this._onDidFocus=this._register(new R),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new R),this.onDidBlur=this._onDidBlur.event;let t=Xo(document.activeElement,e),i=!1;const s=()=>{i=!1,t||(t=!0,this._onDidFocus.fire())},r=()=>{t&&(i=!0,window.setTimeout(()=>{i&&(i=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{Xo(document.activeElement,e)!==t&&(t?r():s())},this._register(K(e,de.FOCUS,s,!0)),this._register(K(e,de.BLUR,r,!0))}}function Pf(n){return new Rae(n)}function Y(n,...e){if(n.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function Oae(n,e){return n.insertBefore(e,n.firstChild),e}function R0(n,...e){n.innerText="",Y(n,...e)}const Fae=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var i_;(function(n){n.HTML="http://www.w3.org/1999/xhtml",n.SVG="http://www.w3.org/2000/svg"})(i_||(i_={}));function G9(n,e,t,...i){let s=Fae.exec(e);if(!s)throw new Error("Bad use of emmet");t=Object.assign({},t||{});let r=s[1]||"div",o;return n!==i_.HTML?o=document.createElementNS(n,r):o=document.createElement(r),s[3]&&(o.id=s[3]),s[4]&&(o.className=s[4].replace(/\./g," ").trim()),Object.keys(t).forEach(a=>{const l=t[a];typeof l!="undefined"&&(/^on\w+$/.test(a)?o[a]=l:a==="selected"?l&&o.setAttribute(a,"true"):o.setAttribute(a,l))}),o.append(...i),o}function J(n,e,...t){return G9(i_.HTML,n,e,...t)}J.SVG=function(n,e,...t){return G9(i_.SVG,n,e,...t)};function ps(...n){for(let e of n)e.style.display="",e.removeAttribute("aria-hidden")}function Nn(...n){for(let e of n)e.style.display="none",e.setAttribute("aria-hidden","true")}function Pae(n){return Array.prototype.slice.call(document.getElementsByTagName(n),0)}function DF(n){const e=window.devicePixelRatio*n;return Math.max(1,Math.floor(e))/window.devicePixelRatio}function Y9(n){window.open(n,"_blank","noopener")}function Bae(n){const e=()=>{n(),t=na(e)};let t=na(e);return Ze(()=>t.dispose())}B9.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function ol(n){return n?`url('${V9.asBrowserUri(n).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function LF(n){return`'${n.replace(/'/g,"%27")}'`}class bh extends R{constructor(){super(),this._subscriptions=new ee,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(K(window,"keydown",e=>{if(e.defaultPrevented)return;const t=new Ft(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(K(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(K(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(K(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(K(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(K(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return bh.instance||(bh.instance=new bh),bh.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}function Vae(n,e){const t=window.matchMedia(n);typeof t.addEventListener=="function"?t.addEventListener("change",e):t.addListener(e)}function Z9(n){return!n||typeof n!="string"?!0:n.trim().length===0}const Wae=/{(\d+)}/g;function cr(n,...e){return e.length===0?n:n.replace(Wae,function(t,i){const s=parseInt(i,10);return isNaN(s)||s<0||s>=e.length?t:e[s]})}function FA(n){return n.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function so(n){return n.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function X9(n,e){if(!n||!e)return n;const t=e.length;if(t===0||n.length===0)return n;let i=0;for(;n.indexOf(e,i)===i;)i=i+t;return n.substring(i)}function zae(n,e){if(!n||!e)return n;const t=e.length,i=n.length;if(t===0||i===0)return n;let s=i,r=-1;for(;r=n.lastIndexOf(e,s-1),!(r===-1||r+t!==s);){if(r===0)return"";s=r}return n.substring(0,s)}function Hae(n){return n.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function Q9(n,e,t={}){if(!n)throw new Error("Cannot create regex from empty string");e||(n=so(n)),t.wholeWord&&(/\B/.test(n.charAt(0))||(n="\\b"+n),/\B/.test(n.charAt(n.length-1))||(n=n+"\\b"));let i="";return t.global&&(i+="g"),t.matchCase||(i+="i"),t.multiline&&(i+="m"),t.unicode&&(i+="u"),new RegExp(n,i)}function $ae(n){return n.source==="^"||n.source==="^$"||n.source==="$"||n.source==="^\\s*$"?!1:!!(n.exec("")&&n.lastIndex===0)}function vx(n){return(n.global?"g":"")+(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")}function sa(n){return n.split(/\r\n|\r|\n/)}function Jn(n){for(let e=0,t=n.length;e<t;e++){const i=n.charCodeAt(e);if(i!==32&&i!==9)return e}return-1}function ci(n,e=0,t=n.length){for(let i=e;i<t;i++){const s=n.charCodeAt(i);if(s!==32&&s!==9)return n.substring(e,i)}return n.substring(e,t)}function kg(n,e=n.length-1){for(let t=e;t>=0;t--){const i=n.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function n_(n,e){return n<e?-1:n>e?1:0}function PA(n,e,t=0,i=n.length,s=0,r=e.length){for(;t<i&&s<r;t++,s++){let l=n.charCodeAt(t),c=e.charCodeAt(s);if(l<c)return-1;if(l>c)return 1}const o=i-t,a=r-s;return o<a?-1:o>a?1:0}function _E(n,e){return O0(n,e,0,n.length,0,e.length)}function O0(n,e,t=0,i=n.length,s=0,r=e.length){for(;t<i&&s<r;t++,s++){let l=n.charCodeAt(t),c=e.charCodeAt(s);if(l===c)continue;if(l>=128||c>=128)return PA(n.toLowerCase(),e.toLowerCase(),t,i,s,r);Pd(l)&&(l-=32),Pd(c)&&(c-=32);const h=l-c;if(h!==0)return h}const o=i-t,a=r-s;return o<a?-1:o>a?1:0}function Pd(n){return n>=97&&n<=122}function Tl(n){return n>=65&&n<=90}function Tp(n,e){return n.length===e.length&&O0(n,e)===0}function BA(n,e){const t=e.length;return e.length>n.length?!1:O0(n,e,0,t)===0}function s_(n,e){let t,i=Math.min(n.length,e.length);for(t=0;t<i;t++)if(n.charCodeAt(t)!==e.charCodeAt(t))return t;return i}function bE(n,e){let t,i=Math.min(n.length,e.length);const s=n.length-1,r=e.length-1;for(t=0;t<i;t++)if(n.charCodeAt(s-t)!==e.charCodeAt(r-t))return t;return i}function Ri(n){return 55296<=n&&n<=56319}function Bf(n){return 56320<=n&&n<=57343}function VA(n,e){return(n-55296<<10)+(e-56320)+65536}function Ra(n,e,t){const i=n.charCodeAt(t);if(Ri(i)&&t+1<e){const s=n.charCodeAt(t+1);if(Bf(s))return VA(i,s)}return i}function rf(n,e){const t=n.charCodeAt(e-1);if(Bf(t)&&e>1){const i=n.charCodeAt(e-2);if(Ri(i))return VA(i,t)}return t}function qw(n,e){const t=Ka.getInstance(),i=e,s=n.length,r=Ra(n,s,e);e+=r>=65536?2:1;let o=t.getGraphemeBreakType(r);for(;e<s;){const a=Ra(n,s,e),l=t.getGraphemeBreakType(a);if(Xp(o,l))break;e+=a>=65536?2:1,o=l}return e-i}function Uae(n,e){const t=Ka.getInstance(),i=e,s=rf(n,e);e-=s>=65536?2:1;let r=t.getGraphemeBreakType(s);for(;e>0;){const o=rf(n,e),a=t.getGraphemeBreakType(o);if(Xp(a,r))break;e-=o>=65536?2:1,r=a}return i-e}const jae=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u08BD\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE33\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDCFF]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD50-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function h1(n){return jae.test(n)}const qae=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD00-\uDDFF\uDE70-\uDED6])/;function Kae(n){return qae.test(n)}const Gae=/^[\t\n\r\x20-\x7E]*$/;function WA(n){return Gae.test(n)}const J9=/[\u2028\u2029]/;function eV(n){return J9.test(n)}function Yae(n){for(let e=0,t=n.length;e<t;e++)if(Kr(n.charCodeAt(e)))return!0;return!1}function Kr(n){return n=+n,n>=11904&&n<=55215||n>=63744&&n<=64255||n>=65281&&n<=65374}function Zp(n){return n>=127462&&n<=127487||n===8986||n===8987||n===9200||n===9203||n>=9728&&n<=10175||n===11088||n===11093||n>=127744&&n<=128591||n>=128640&&n<=128764||n>=128992&&n<=129003||n>=129280&&n<=129535||n>=129648&&n<=129750}const Zae=String.fromCharCode(65279);function zA(n){return!!(n&&n.length>0&&n.charCodeAt(0)===65279)}function Xae(n,e=!1){return n?(e&&(n=n.replace(/\\./g,"")),n.toLowerCase()!==n):!1}function tV(n){return n=n%(2*26),n<26?String.fromCharCode(97+n):String.fromCharCode(65+n-26)}function ud(n){return Ka.getInstance().getGraphemeBreakType(n)}function Xp(n,e){return n===0?e!==5&&e!==7:n===2&&e===3?!1:n===4||n===2||n===3||e===4||e===2||e===3?!0:!(n===8&&(e===8||e===9||e===11||e===12)||(n===11||n===9)&&(e===9||e===10)||(n===12||n===10)&&e===10||e===5||e===13||e===7||n===1||n===13&&e===14||n===6&&e===6)}class Ka{constructor(){this._data=Qae()}static getInstance(){return Ka._INSTANCE||(Ka._INSTANCE=new Ka),Ka._INSTANCE}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,i=t.length/3;let s=1;for(;s<=i;)if(e<t[3*s])s=2*s;else if(e>t[3*s+1])s=2*s+1;else return t[3*s+2];return 0}}Ka._INSTANCE=null;function Qae(){return JSON.parse("[0,0,0,51592,51592,11,44424,44424,11,72251,72254,5,7150,7150,7,48008,48008,11,55176,55176,11,128420,128420,14,3276,3277,5,9979,9980,14,46216,46216,11,49800,49800,11,53384,53384,11,70726,70726,5,122915,122916,5,129320,129327,14,2558,2558,5,5906,5908,5,9762,9763,14,43360,43388,8,45320,45320,11,47112,47112,11,48904,48904,11,50696,50696,11,52488,52488,11,54280,54280,11,70082,70083,1,71350,71350,7,73111,73111,5,127892,127893,14,128726,128727,14,129473,129474,14,2027,2035,5,2901,2902,5,3784,3789,5,6754,6754,5,8418,8420,5,9877,9877,14,11088,11088,14,44008,44008,5,44872,44872,11,45768,45768,11,46664,46664,11,47560,47560,11,48456,48456,11,49352,49352,11,50248,50248,11,51144,51144,11,52040,52040,11,52936,52936,11,53832,53832,11,54728,54728,11,69811,69814,5,70459,70460,5,71096,71099,7,71998,71998,5,72874,72880,5,119149,119149,7,127374,127374,14,128335,128335,14,128482,128482,14,128765,128767,14,129399,129400,14,129680,129685,14,1476,1477,5,2377,2380,7,2759,2760,5,3137,3140,7,3458,3459,7,4153,4154,5,6432,6434,5,6978,6978,5,7675,7679,5,9723,9726,14,9823,9823,14,9919,9923,14,10035,10036,14,42736,42737,5,43596,43596,5,44200,44200,11,44648,44648,11,45096,45096,11,45544,45544,11,45992,45992,11,46440,46440,11,46888,46888,11,47336,47336,11,47784,47784,11,48232,48232,11,48680,48680,11,49128,49128,11,49576,49576,11,50024,50024,11,50472,50472,11,50920,50920,11,51368,51368,11,51816,51816,11,52264,52264,11,52712,52712,11,53160,53160,11,53608,53608,11,54056,54056,11,54504,54504,11,54952,54952,11,68108,68111,5,69933,69940,5,70197,70197,7,70498,70499,7,70845,70845,5,71229,71229,5,71727,71735,5,72154,72155,5,72344,72345,5,73023,73029,5,94095,94098,5,121403,121452,5,126981,127182,14,127538,127546,14,127990,127990,14,128391,128391,14,128445,128449,14,128500,128505,14,128752,128752,14,129160,129167,14,129356,129356,14,129432,129442,14,129648,129651,14,129751,131069,14,173,173,4,1757,1757,1,2274,2274,1,2494,2494,5,2641,2641,5,2876,2876,5,3014,3016,7,3262,3262,7,3393,3396,5,3570,3571,7,3968,3972,5,4228,4228,7,6086,6086,5,6679,6680,5,6912,6915,5,7080,7081,5,7380,7392,5,8252,8252,14,9096,9096,14,9748,9749,14,9784,9786,14,9833,9850,14,9890,9894,14,9938,9938,14,9999,9999,14,10085,10087,14,12349,12349,14,43136,43137,7,43454,43456,7,43755,43755,7,44088,44088,11,44312,44312,11,44536,44536,11,44760,44760,11,44984,44984,11,45208,45208,11,45432,45432,11,45656,45656,11,45880,45880,11,46104,46104,11,46328,46328,11,46552,46552,11,46776,46776,11,47000,47000,11,47224,47224,11,47448,47448,11,47672,47672,11,47896,47896,11,48120,48120,11,48344,48344,11,48568,48568,11,48792,48792,11,49016,49016,11,49240,49240,11,49464,49464,11,49688,49688,11,49912,49912,11,50136,50136,11,50360,50360,11,50584,50584,11,50808,50808,11,51032,51032,11,51256,51256,11,51480,51480,11,51704,51704,11,51928,51928,11,52152,52152,11,52376,52376,11,52600,52600,11,52824,52824,11,53048,53048,11,53272,53272,11,53496,53496,11,53720,53720,11,53944,53944,11,54168,54168,11,54392,54392,11,54616,54616,11,54840,54840,11,55064,55064,11,65438,65439,5,69633,69633,5,69837,69837,1,70018,70018,7,70188,70190,7,70368,70370,7,70465,70468,7,70712,70719,5,70835,70840,5,70850,70851,5,71132,71133,5,71340,71340,7,71458,71461,5,71985,71989,7,72002,72002,7,72193,72202,5,72281,72283,5,72766,72766,7,72885,72886,5,73104,73105,5,92912,92916,5,113824,113827,4,119173,119179,5,121505,121519,5,125136,125142,5,127279,127279,14,127489,127490,14,127570,127743,14,127900,127901,14,128254,128254,14,128369,128370,14,128400,128400,14,128425,128432,14,128468,128475,14,128489,128494,14,128715,128720,14,128745,128745,14,128759,128760,14,129004,129023,14,129296,129304,14,129340,129342,14,129388,129392,14,129404,129407,14,129454,129455,14,129485,129487,14,129659,129663,14,129719,129727,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2363,2363,7,2402,2403,5,2507,2508,7,2622,2624,7,2691,2691,7,2786,2787,5,2881,2884,5,3006,3006,5,3072,3072,5,3170,3171,5,3267,3268,7,3330,3331,7,3406,3406,1,3538,3540,5,3655,3662,5,3897,3897,5,4038,4038,5,4184,4185,5,4352,4447,8,6068,6069,5,6155,6157,5,6448,6449,7,6742,6742,5,6783,6783,5,6966,6970,5,7042,7042,7,7143,7143,7,7212,7219,5,7412,7412,5,8206,8207,4,8294,8303,4,8596,8601,14,9410,9410,14,9742,9742,14,9757,9757,14,9770,9770,14,9794,9794,14,9828,9828,14,9855,9855,14,9882,9882,14,9900,9903,14,9929,9933,14,9963,9967,14,9987,9988,14,10006,10006,14,10062,10062,14,10175,10175,14,11744,11775,5,42607,42607,5,43043,43044,7,43263,43263,5,43444,43445,7,43569,43570,5,43698,43700,5,43766,43766,5,44032,44032,11,44144,44144,11,44256,44256,11,44368,44368,11,44480,44480,11,44592,44592,11,44704,44704,11,44816,44816,11,44928,44928,11,45040,45040,11,45152,45152,11,45264,45264,11,45376,45376,11,45488,45488,11,45600,45600,11,45712,45712,11,45824,45824,11,45936,45936,11,46048,46048,11,46160,46160,11,46272,46272,11,46384,46384,11,46496,46496,11,46608,46608,11,46720,46720,11,46832,46832,11,46944,46944,11,47056,47056,11,47168,47168,11,47280,47280,11,47392,47392,11,47504,47504,11,47616,47616,11,47728,47728,11,47840,47840,11,47952,47952,11,48064,48064,11,48176,48176,11,48288,48288,11,48400,48400,11,48512,48512,11,48624,48624,11,48736,48736,11,48848,48848,11,48960,48960,11,49072,49072,11,49184,49184,11,49296,49296,11,49408,49408,11,49520,49520,11,49632,49632,11,49744,49744,11,49856,49856,11,49968,49968,11,50080,50080,11,50192,50192,11,50304,50304,11,50416,50416,11,50528,50528,11,50640,50640,11,50752,50752,11,50864,50864,11,50976,50976,11,51088,51088,11,51200,51200,11,51312,51312,11,51424,51424,11,51536,51536,11,51648,51648,11,51760,51760,11,51872,51872,11,51984,51984,11,52096,52096,11,52208,52208,11,52320,52320,11,52432,52432,11,52544,52544,11,52656,52656,11,52768,52768,11,52880,52880,11,52992,52992,11,53104,53104,11,53216,53216,11,53328,53328,11,53440,53440,11,53552,53552,11,53664,53664,11,53776,53776,11,53888,53888,11,54000,54000,11,54112,54112,11,54224,54224,11,54336,54336,11,54448,54448,11,54560,54560,11,54672,54672,11,54784,54784,11,54896,54896,11,55008,55008,11,55120,55120,11,64286,64286,5,66272,66272,5,68900,68903,5,69762,69762,7,69817,69818,5,69927,69931,5,70003,70003,5,70070,70078,5,70094,70094,7,70194,70195,7,70206,70206,5,70400,70401,5,70463,70463,7,70475,70477,7,70512,70516,5,70722,70724,5,70832,70832,5,70842,70842,5,70847,70848,5,71088,71089,7,71102,71102,7,71219,71226,5,71231,71232,5,71342,71343,7,71453,71455,5,71463,71467,5,71737,71738,5,71995,71996,5,72000,72000,7,72145,72147,7,72160,72160,5,72249,72249,7,72273,72278,5,72330,72342,5,72752,72758,5,72850,72871,5,72882,72883,5,73018,73018,5,73031,73031,5,73109,73109,5,73461,73462,7,94031,94031,5,94192,94193,7,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,126976,126979,14,127184,127231,14,127344,127345,14,127405,127461,14,127514,127514,14,127561,127567,14,127778,127779,14,127896,127896,14,127985,127986,14,127995,127999,5,128326,128328,14,128360,128366,14,128378,128378,14,128394,128397,14,128405,128406,14,128422,128423,14,128435,128443,14,128453,128464,14,128479,128480,14,128484,128487,14,128496,128498,14,128640,128709,14,128723,128724,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129096,129103,14,129292,129292,14,129311,129311,14,129329,129330,14,129344,129349,14,129360,129374,14,129394,129394,14,129402,129402,14,129413,129425,14,129445,129450,14,129466,129471,14,129483,129483,14,129511,129535,14,129653,129655,14,129667,129670,14,129705,129711,14,129731,129743,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2307,2307,7,2366,2368,7,2382,2383,7,2434,2435,7,2497,2500,5,2519,2519,5,2563,2563,7,2631,2632,5,2677,2677,5,2750,2752,7,2763,2764,7,2817,2817,5,2879,2879,5,2891,2892,7,2914,2915,5,3008,3008,5,3021,3021,5,3076,3076,5,3146,3149,5,3202,3203,7,3264,3265,7,3271,3272,7,3298,3299,5,3390,3390,5,3402,3404,7,3426,3427,5,3535,3535,5,3544,3550,7,3635,3635,7,3763,3763,7,3893,3893,5,3953,3966,5,3981,3991,5,4145,4145,7,4157,4158,5,4209,4212,5,4237,4237,5,4520,4607,10,5970,5971,5,6071,6077,5,6089,6099,5,6277,6278,5,6439,6440,5,6451,6456,7,6683,6683,5,6744,6750,5,6765,6770,7,6846,6846,5,6964,6964,5,6972,6972,5,7019,7027,5,7074,7077,5,7083,7085,5,7146,7148,7,7154,7155,7,7222,7223,5,7394,7400,5,7416,7417,5,8204,8204,5,8233,8233,4,8288,8292,4,8413,8416,5,8482,8482,14,8986,8987,14,9193,9203,14,9654,9654,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9775,14,9792,9792,14,9800,9811,14,9825,9826,14,9831,9831,14,9852,9853,14,9872,9873,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9936,9936,14,9941,9960,14,9974,9974,14,9982,9985,14,9992,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10145,10145,14,11013,11015,14,11503,11505,5,12334,12335,5,12951,12951,14,42612,42621,5,43014,43014,5,43047,43047,7,43204,43205,5,43335,43345,5,43395,43395,7,43450,43451,7,43561,43566,5,43573,43574,5,43644,43644,5,43710,43711,5,43758,43759,7,44005,44005,5,44012,44012,7,44060,44060,11,44116,44116,11,44172,44172,11,44228,44228,11,44284,44284,11,44340,44340,11,44396,44396,11,44452,44452,11,44508,44508,11,44564,44564,11,44620,44620,11,44676,44676,11,44732,44732,11,44788,44788,11,44844,44844,11,44900,44900,11,44956,44956,11,45012,45012,11,45068,45068,11,45124,45124,11,45180,45180,11,45236,45236,11,45292,45292,11,45348,45348,11,45404,45404,11,45460,45460,11,45516,45516,11,45572,45572,11,45628,45628,11,45684,45684,11,45740,45740,11,45796,45796,11,45852,45852,11,45908,45908,11,45964,45964,11,46020,46020,11,46076,46076,11,46132,46132,11,46188,46188,11,46244,46244,11,46300,46300,11,46356,46356,11,46412,46412,11,46468,46468,11,46524,46524,11,46580,46580,11,46636,46636,11,46692,46692,11,46748,46748,11,46804,46804,11,46860,46860,11,46916,46916,11,46972,46972,11,47028,47028,11,47084,47084,11,47140,47140,11,47196,47196,11,47252,47252,11,47308,47308,11,47364,47364,11,47420,47420,11,47476,47476,11,47532,47532,11,47588,47588,11,47644,47644,11,47700,47700,11,47756,47756,11,47812,47812,11,47868,47868,11,47924,47924,11,47980,47980,11,48036,48036,11,48092,48092,11,48148,48148,11,48204,48204,11,48260,48260,11,48316,48316,11,48372,48372,11,48428,48428,11,48484,48484,11,48540,48540,11,48596,48596,11,48652,48652,11,48708,48708,11,48764,48764,11,48820,48820,11,48876,48876,11,48932,48932,11,48988,48988,11,49044,49044,11,49100,49100,11,49156,49156,11,49212,49212,11,49268,49268,11,49324,49324,11,49380,49380,11,49436,49436,11,49492,49492,11,49548,49548,11,49604,49604,11,49660,49660,11,49716,49716,11,49772,49772,11,49828,49828,11,49884,49884,11,49940,49940,11,49996,49996,11,50052,50052,11,50108,50108,11,50164,50164,11,50220,50220,11,50276,50276,11,50332,50332,11,50388,50388,11,50444,50444,11,50500,50500,11,50556,50556,11,50612,50612,11,50668,50668,11,50724,50724,11,50780,50780,11,50836,50836,11,50892,50892,11,50948,50948,11,51004,51004,11,51060,51060,11,51116,51116,11,51172,51172,11,51228,51228,11,51284,51284,11,51340,51340,11,51396,51396,11,51452,51452,11,51508,51508,11,51564,51564,11,51620,51620,11,51676,51676,11,51732,51732,11,51788,51788,11,51844,51844,11,51900,51900,11,51956,51956,11,52012,52012,11,52068,52068,11,52124,52124,11,52180,52180,11,52236,52236,11,52292,52292,11,52348,52348,11,52404,52404,11,52460,52460,11,52516,52516,11,52572,52572,11,52628,52628,11,52684,52684,11,52740,52740,11,52796,52796,11,52852,52852,11,52908,52908,11,52964,52964,11,53020,53020,11,53076,53076,11,53132,53132,11,53188,53188,11,53244,53244,11,53300,53300,11,53356,53356,11,53412,53412,11,53468,53468,11,53524,53524,11,53580,53580,11,53636,53636,11,53692,53692,11,53748,53748,11,53804,53804,11,53860,53860,11,53916,53916,11,53972,53972,11,54028,54028,11,54084,54084,11,54140,54140,11,54196,54196,11,54252,54252,11,54308,54308,11,54364,54364,11,54420,54420,11,54476,54476,11,54532,54532,11,54588,54588,11,54644,54644,11,54700,54700,11,54756,54756,11,54812,54812,11,54868,54868,11,54924,54924,11,54980,54980,11,55036,55036,11,55092,55092,11,55148,55148,11,55216,55238,9,65056,65071,5,65529,65531,4,68097,68099,5,68159,68159,5,69446,69456,5,69688,69702,5,69808,69810,7,69815,69816,7,69821,69821,1,69888,69890,5,69932,69932,7,69957,69958,7,70016,70017,5,70067,70069,7,70079,70080,7,70089,70092,5,70095,70095,5,70191,70193,5,70196,70196,5,70198,70199,5,70367,70367,5,70371,70378,5,70402,70403,7,70462,70462,5,70464,70464,5,70471,70472,7,70487,70487,5,70502,70508,5,70709,70711,7,70720,70721,7,70725,70725,7,70750,70750,5,70833,70834,7,70841,70841,7,70843,70844,7,70846,70846,7,70849,70849,7,71087,71087,5,71090,71093,5,71100,71101,5,71103,71104,5,71216,71218,7,71227,71228,7,71230,71230,7,71339,71339,5,71341,71341,5,71344,71349,5,71351,71351,5,71456,71457,7,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123628,123631,5,125252,125258,5,126980,126980,14,127183,127183,14,127245,127247,14,127340,127343,14,127358,127359,14,127377,127386,14,127462,127487,6,127491,127503,14,127535,127535,14,127548,127551,14,127568,127569,14,127744,127777,14,127780,127891,14,127894,127895,14,127897,127899,14,127902,127984,14,127987,127989,14,127991,127994,14,128000,128253,14,128255,128317,14,128329,128334,14,128336,128359,14,128367,128368,14,128371,128377,14,128379,128390,14,128392,128393,14,128398,128399,14,128401,128404,14,128407,128419,14,128421,128421,14,128424,128424,14,128433,128434,14,128444,128444,14,128450,128452,14,128465,128467,14,128476,128478,14,128481,128481,14,128483,128483,14,128488,128488,14,128495,128495,14,128499,128499,14,128506,128591,14,128710,128714,14,128721,128722,14,128725,128725,14,128728,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129664,129666,14,129671,129679,14,129686,129704,14,129712,129718,14,129728,129730,14,129744,129750,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2259,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3134,3136,5,3142,3144,5,3157,3158,5,3201,3201,5,3260,3260,5,3263,3263,5,3266,3266,5,3270,3270,5,3274,3275,7,3285,3286,5,3328,3329,5,3387,3388,5,3391,3392,7,3398,3400,7,3405,3405,5,3415,3415,5,3457,3457,5,3530,3530,5,3536,3537,7,3542,3542,5,3551,3551,5,3633,3633,5,3636,3642,5,3761,3761,5,3764,3772,5,3864,3865,5,3895,3895,5,3902,3903,7,3967,3967,7,3974,3975,5,3993,4028,5,4141,4144,5,4146,4151,5,4155,4156,7,4182,4183,7,4190,4192,5,4226,4226,5,4229,4230,5,4253,4253,5,4448,4519,9,4957,4959,5,5938,5940,5,6002,6003,5,6070,6070,7,6078,6085,7,6087,6088,7,6109,6109,5,6158,6158,4,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6848,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7673,5,8203,8203,4,8205,8205,13,8232,8232,4,8234,8238,4,8265,8265,14,8293,8293,4,8400,8412,5,8417,8417,5,8421,8432,5,8505,8505,14,8617,8618,14,9000,9000,14,9167,9167,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9776,9783,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9935,14,9937,9937,14,9939,9940,14,9961,9962,14,9968,9973,14,9975,9978,14,9981,9981,14,9986,9986,14,9989,9989,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10084,14,10133,10135,14,10160,10160,14,10548,10549,14,11035,11036,14,11093,11093,14,11647,11647,5,12330,12333,5,12336,12336,14,12441,12442,5,12953,12953,14,42608,42610,5,42654,42655,5,43010,43010,5,43019,43019,5,43045,43046,5,43052,43052,5,43188,43203,7,43232,43249,5,43302,43309,5,43346,43347,7,43392,43394,5,43443,43443,5,43446,43449,5,43452,43453,5,43493,43493,5,43567,43568,7,43571,43572,7,43587,43587,5,43597,43597,7,43696,43696,5,43703,43704,5,43713,43713,5,43756,43757,5,43765,43765,7,44003,44004,7,44006,44007,7,44009,44010,7,44013,44013,5,44033,44059,12,44061,44087,12,44089,44115,12,44117,44143,12,44145,44171,12,44173,44199,12,44201,44227,12,44229,44255,12,44257,44283,12,44285,44311,12,44313,44339,12,44341,44367,12,44369,44395,12,44397,44423,12,44425,44451,12,44453,44479,12,44481,44507,12,44509,44535,12,44537,44563,12,44565,44591,12,44593,44619,12,44621,44647,12,44649,44675,12,44677,44703,12,44705,44731,12,44733,44759,12,44761,44787,12,44789,44815,12,44817,44843,12,44845,44871,12,44873,44899,12,44901,44927,12,44929,44955,12,44957,44983,12,44985,45011,12,45013,45039,12,45041,45067,12,45069,45095,12,45097,45123,12,45125,45151,12,45153,45179,12,45181,45207,12,45209,45235,12,45237,45263,12,45265,45291,12,45293,45319,12,45321,45347,12,45349,45375,12,45377,45403,12,45405,45431,12,45433,45459,12,45461,45487,12,45489,45515,12,45517,45543,12,45545,45571,12,45573,45599,12,45601,45627,12,45629,45655,12,45657,45683,12,45685,45711,12,45713,45739,12,45741,45767,12,45769,45795,12,45797,45823,12,45825,45851,12,45853,45879,12,45881,45907,12,45909,45935,12,45937,45963,12,45965,45991,12,45993,46019,12,46021,46047,12,46049,46075,12,46077,46103,12,46105,46131,12,46133,46159,12,46161,46187,12,46189,46215,12,46217,46243,12,46245,46271,12,46273,46299,12,46301,46327,12,46329,46355,12,46357,46383,12,46385,46411,12,46413,46439,12,46441,46467,12,46469,46495,12,46497,46523,12,46525,46551,12,46553,46579,12,46581,46607,12,46609,46635,12,46637,46663,12,46665,46691,12,46693,46719,12,46721,46747,12,46749,46775,12,46777,46803,12,46805,46831,12,46833,46859,12,46861,46887,12,46889,46915,12,46917,46943,12,46945,46971,12,46973,46999,12,47001,47027,12,47029,47055,12,47057,47083,12,47085,47111,12,47113,47139,12,47141,47167,12,47169,47195,12,47197,47223,12,47225,47251,12,47253,47279,12,47281,47307,12,47309,47335,12,47337,47363,12,47365,47391,12,47393,47419,12,47421,47447,12,47449,47475,12,47477,47503,12,47505,47531,12,47533,47559,12,47561,47587,12,47589,47615,12,47617,47643,12,47645,47671,12,47673,47699,12,47701,47727,12,47729,47755,12,47757,47783,12,47785,47811,12,47813,47839,12,47841,47867,12,47869,47895,12,47897,47923,12,47925,47951,12,47953,47979,12,47981,48007,12,48009,48035,12,48037,48063,12,48065,48091,12,48093,48119,12,48121,48147,12,48149,48175,12,48177,48203,12,48205,48231,12,48233,48259,12,48261,48287,12,48289,48315,12,48317,48343,12,48345,48371,12,48373,48399,12,48401,48427,12,48429,48455,12,48457,48483,12,48485,48511,12,48513,48539,12,48541,48567,12,48569,48595,12,48597,48623,12,48625,48651,12,48653,48679,12,48681,48707,12,48709,48735,12,48737,48763,12,48765,48791,12,48793,48819,12,48821,48847,12,48849,48875,12,48877,48903,12,48905,48931,12,48933,48959,12,48961,48987,12,48989,49015,12,49017,49043,12,49045,49071,12,49073,49099,12,49101,49127,12,49129,49155,12,49157,49183,12,49185,49211,12,49213,49239,12,49241,49267,12,49269,49295,12,49297,49323,12,49325,49351,12,49353,49379,12,49381,49407,12,49409,49435,12,49437,49463,12,49465,49491,12,49493,49519,12,49521,49547,12,49549,49575,12,49577,49603,12,49605,49631,12,49633,49659,12,49661,49687,12,49689,49715,12,49717,49743,12,49745,49771,12,49773,49799,12,49801,49827,12,49829,49855,12,49857,49883,12,49885,49911,12,49913,49939,12,49941,49967,12,49969,49995,12,49997,50023,12,50025,50051,12,50053,50079,12,50081,50107,12,50109,50135,12,50137,50163,12,50165,50191,12,50193,50219,12,50221,50247,12,50249,50275,12,50277,50303,12,50305,50331,12,50333,50359,12,50361,50387,12,50389,50415,12,50417,50443,12,50445,50471,12,50473,50499,12,50501,50527,12,50529,50555,12,50557,50583,12,50585,50611,12,50613,50639,12,50641,50667,12,50669,50695,12,50697,50723,12,50725,50751,12,50753,50779,12,50781,50807,12,50809,50835,12,50837,50863,12,50865,50891,12,50893,50919,12,50921,50947,12,50949,50975,12,50977,51003,12,51005,51031,12,51033,51059,12,51061,51087,12,51089,51115,12,51117,51143,12,51145,51171,12,51173,51199,12,51201,51227,12,51229,51255,12,51257,51283,12,51285,51311,12,51313,51339,12,51341,51367,12,51369,51395,12,51397,51423,12,51425,51451,12,51453,51479,12,51481,51507,12,51509,51535,12,51537,51563,12,51565,51591,12,51593,51619,12,51621,51647,12,51649,51675,12,51677,51703,12,51705,51731,12,51733,51759,12,51761,51787,12,51789,51815,12,51817,51843,12,51845,51871,12,51873,51899,12,51901,51927,12,51929,51955,12,51957,51983,12,51985,52011,12,52013,52039,12,52041,52067,12,52069,52095,12,52097,52123,12,52125,52151,12,52153,52179,12,52181,52207,12,52209,52235,12,52237,52263,12,52265,52291,12,52293,52319,12,52321,52347,12,52349,52375,12,52377,52403,12,52405,52431,12,52433,52459,12,52461,52487,12,52489,52515,12,52517,52543,12,52545,52571,12,52573,52599,12,52601,52627,12,52629,52655,12,52657,52683,12,52685,52711,12,52713,52739,12,52741,52767,12,52769,52795,12,52797,52823,12,52825,52851,12,52853,52879,12,52881,52907,12,52909,52935,12,52937,52963,12,52965,52991,12,52993,53019,12,53021,53047,12,53049,53075,12,53077,53103,12,53105,53131,12,53133,53159,12,53161,53187,12,53189,53215,12,53217,53243,12,53245,53271,12,53273,53299,12,53301,53327,12,53329,53355,12,53357,53383,12,53385,53411,12,53413,53439,12,53441,53467,12,53469,53495,12,53497,53523,12,53525,53551,12,53553,53579,12,53581,53607,12,53609,53635,12,53637,53663,12,53665,53691,12,53693,53719,12,53721,53747,12,53749,53775,12,53777,53803,12,53805,53831,12,53833,53859,12,53861,53887,12,53889,53915,12,53917,53943,12,53945,53971,12,53973,53999,12,54001,54027,12,54029,54055,12,54057,54083,12,54085,54111,12,54113,54139,12,54141,54167,12,54169,54195,12,54197,54223,12,54225,54251,12,54253,54279,12,54281,54307,12,54309,54335,12,54337,54363,12,54365,54391,12,54393,54419,12,54421,54447,12,54449,54475,12,54477,54503,12,54505,54531,12,54533,54559,12,54561,54587,12,54589,54615,12,54617,54643,12,54645,54671,12,54673,54699,12,54701,54727,12,54729,54755,12,54757,54783,12,54785,54811,12,54813,54839,12,54841,54867,12,54869,54895,12,54897,54923,12,54925,54951,12,54953,54979,12,54981,55007,12,55009,55035,12,55037,55063,12,55065,55091,12,55093,55119,12,55121,55147,12,55149,55175,12,55177,55203,12,55243,55291,10,65024,65039,5,65279,65279,4,65520,65528,4,66045,66045,5,66422,66426,5,68101,68102,5,68152,68154,5,68325,68326,5,69291,69292,5,69632,69632,7,69634,69634,7,69759,69761,5]")}function Jae(n,e){if(n===0)return 0;const t=ele(n,e);if(t!==void 0)return t;const i=rf(e,n);return n-=Av(i),n}function ele(n,e){let t=rf(e,n);for(n-=Av(t);tle(t)||t===65039||t===8419;){if(n===0)return;t=rf(e,n),n-=Av(t)}if(!!Zp(t)){if(n>=0){const i=rf(e,n);i===8205&&(n-=Av(i))}return n}}function Av(n){return n>=65536?2:1}function tle(n){return 127995<=n&&n<=127999}var kF,EF;class ile{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),i=this._value.charCodeAt(this._pos);return t-i}value(){return this._value[this._pos]}}class nle{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?PA(e,this._value,0,e.length,this._from,this._to):O0(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class sle{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?PA(e,this._value,0,e.length,this._from,this._to):O0(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class rle{constructor(e){this._ignorePathCasing=e,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new sle(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return _E(e,this._value.scheme);if(this._states[this._stateIdx]===2)return _E(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return n_(e,this._value.query);if(this._states[this._stateIdx]===5)return n_(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class xb{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return(t=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get heightRight(){var e,t;return(t=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}}class of{constructor(e){this._iter=e}static forUris(e=()=>!1){return new of(new rle(e))}static forStrings(){return new of(new ile)}static forConfigKeys(){return new of(new nle)}clear(){this._root=void 0}set(e,t){const i=this._iter.reset(e);let s;this._root||(this._root=new xb,this._root.segment=i.value());const r=[];for(s=this._root;;){const a=i.cmp(s.segment);if(a>0)s.left||(s.left=new xb,s.left.segment=i.value()),r.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new xb,s.right.segment=i.value()),r.push([1,s]),s=s.right;else if(i.hasNext())i.next(),s.mid||(s.mid=new xb,s.mid.segment=i.value()),r.push([0,s]),s=s.mid;else break}const o=s.value;s.value=t,s.key=e;for(let a=r.length-1;a>=0;a--){const l=r[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const h=r[a][0],u=r[a+1][0];if(h===1&&u===1)r[a][1]=l.rotateLeft();else if(h===-1&&u===-1)r[a][1]=l.rotateRight();else if(h===1&&u===-1)l.right=r[a+1][1]=r[a+1][1].rotateRight(),r[a][1]=l.rotateLeft();else if(h===-1&&u===1)l.left=r[a+1][1]=r[a+1][1].rotateLeft(),r[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(r[a-1][0]){case-1:r[a-1][1].left=r[a][1];break;case 1:r[a-1][1].right=r[a][1];break;case 0:r[a-1][1].mid=r[a][1];break}else this._root=r[0][1]}}return o}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const s=t.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else break}return i}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var i;const s=this._iter.reset(e),r=[];let o=this._root;for(;o;){const a=s.cmp(o.segment);if(a>0)r.push([-1,o]),o=o.left;else if(a<0)r.push([1,o]),o=o.right;else if(s.hasNext())s.next(),r.push([0,o]),o=o.mid;else break}if(!!o){if(t?(o.left=void 0,o.mid=void 0,o.right=void 0,o.height=1):(o.key=void 0,o.value=void 0),!o.mid&&!o.value)if(o.left&&o.right){const a=this._min(o.right),{key:l,value:c,segment:h}=a;this._delete(a.key,!1),o.key=l,o.value=c,o.segment=h}else{const a=(i=o.left)!==null&&i!==void 0?i:o.right;if(r.length>0){const[l,c]=r[r.length-1];switch(l){case-1:c.left=a;break;case 0:c.mid=a;break;case 1:c.right=a;break}}else this._root=a}for(let a=r.length-1;a>=0;a--){const l=r[a][1];l.updateHeight();const c=l.balanceFactor();if(c>1?(l.right.balanceFactor()>=0||(l.right=r[a+1][1]=r[a+1][1].rotateRight()),r[a][1]=l.rotateLeft()):c<-1&&(l.left.balanceFactor()<=0||(l.left=r[a+1][1]=r[a+1][1].rotateLeft()),r[a][1]=l.rotateRight()),a>0)switch(r[a-1][0]){case-1:r[a-1][1].left=r[a][1];break;case 1:r[a-1][1].right=r[a][1];break;case 0:r[a-1][1].mid=r[a][1];break}else this._root=r[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let i=this._root,s;for(;i;){const r=t.cmp(i.segment);if(r>0)i=i.left;else if(r<0)i=i.right;else if(t.hasNext())t.next(),s=i.value||s,i=i.mid;else break}return i&&i.value||s}findSuperstr(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const s=t.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else return i.mid?this._entries(i.mid):void 0}}forEach(e){for(const[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){!e||(e.left&&(yield*this._entries(e.left)),e.value&&(yield[e.key,e.value]),e.mid&&(yield*this._entries(e.mid)),e.right&&(yield*this._entries(e.right)))}}class ole{constructor(e,t){this.uri=e,this.value=t}}class _n{constructor(e,t){this[kF]="ResourceMap",e instanceof _n?(this.map=new Map(e.map),this.toKey=t!=null?t:_n.defaultToKey):(this.map=new Map,this.toKey=e!=null?e:_n.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new ole(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))===null||t===void 0?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t!="undefined"&&(e=e.bind(t));for(let[i,s]of this.map)e(s.value,s.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(kF=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}}_n.defaultToKey=n=>n.toString();class ale{constructor(){this[EF]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const i=this._map.get(e);if(!!i)return t!==0&&this.touch(i,t),i.value}set(e,t,i=0){let s=this._map.get(e);if(s)s.value=t,i!==0&&this.touch(s,i);else{switch(s={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.addItemLast(s);break;case 1:this.addItemFirst(s);break;case 2:this.addItemLast(s);break;default:this.addItemLast(s);break}this._map.set(e,s),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(!!t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const i=this._state;let s=this._head;for(;s;){if(t?e.bind(t)(s.value,s.key,this):e(s.value,s.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");s=s.next}}keys(){const e=this,t=this._state;let i=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const r={value:i.key,done:!1};return i=i.next,r}else return{value:void 0,done:!0}}};return s}values(){const e=this,t=this._state;let i=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const r={value:i.value,done:!1};return i=i.next,r}else return{value:void 0,done:!0}}};return s}entries(){const e=this,t=this._state;let i=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const r={value:[i.key,i.value],done:!1};return i=i.next,r}else return{value:void 0,done:!0}}};return s}[(EF=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const i=e.next,s=e.previous;e===this._tail?(s.next=void 0,this._tail=s):(i.previous=s,s.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const i=e.next,s=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=s,s.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}}class HA extends ale{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}const IF=typeof Buffer!="undefined";let wx;class u1{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static wrap(e){return IF&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new u1(e)}toString(){return IF?this.buffer.toString():(wx||(wx=new TextDecoder),wx.decode(this.buffer))}}function lle(n,e){return n[e+0]<<0>>>0|n[e+1]<<8>>>0}function cle(n,e,t){n[t+0]=e&255,e=e>>>8,n[t+1]=e&255}function Nr(n,e){return n[e]*Math.pow(2,24)+n[e+1]*Math.pow(2,16)+n[e+2]*Math.pow(2,8)+n[e+3]}function Ar(n,e,t){n[t+3]=e,e=e>>>8,n[t+2]=e,e=e>>>8,n[t+1]=e,e=e>>>8,n[t]=e}function TF(n,e){return n[e]}function NF(n,e,t){n[t]=e}function vE(n){let e=JSON.parse(n);return e=wE(e),e}function wE(n,e=0){if(!n||e>200)return n;if(typeof n=="object"){switch(n.$mid){case 1:return xe.revive(n);case 2:return new RegExp(n.source,n.flags)}if(n instanceof u1||n instanceof Uint8Array)return n;if(Array.isArray(n))for(let t=0;t<n.length;++t)n[t]=wE(n[t],e+1);else for(const t in n)Object.hasOwnProperty.call(n,t)&&(n[t]=wE(n[t],e+1))}return n}function hle(n){return n.replace(/[\\/]/g,gi.sep)}function ule(n){return n.indexOf("/")===-1&&(n=hle(n)),/^[a-zA-Z]:(\/|$)/.test(n)&&(n="/"+n),n}function dle(n,e,t,i=Nv){if(n===e)return!0;if(!n||!e||e.length>n.length)return!1;if(t){if(!BA(n,e))return!1;if(e.length===n.length)return!0;let r=e.length;return e.charAt(e.length-1)===i&&r--,n.charAt(r)===i}return e.charAt(e.length-1)!==i&&(e+=i),n.indexOf(e)===0}function fle(n){return n>=65&&n<=90||n>=97&&n<=122}function gle(n){const e=EA(n);return Zi?n.length>3?!1:iV(e)&&(n.length===2||e.charCodeAt(2)===92):e===gi.sep}function iV(n){return Zi?fle(n.charCodeAt(0))&&n.charCodeAt(1)===58:!1}function Cx(n){return zw(n,!0)}class ple{constructor(e){this._ignorePathCasing=e}compare(e,t,i=!1){return e===t?0:n_(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}joinPath(e,...t){return xe.joinPath(e,...t)}basenameOrAuthority(e){return ro(e)||e.authority}basename(e){return gi.basename(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Ve.file?t=xe.file(I9(Cx(e))).path:(t=gi.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Ve.file?t=xe.file(EA(Cx(e))).path:t=gi.normalize(e.path),e.with({path:t})}resolvePath(e,t){if(e.scheme===Ve.file){const i=xe.file(Yoe(Cx(e),t));return e.with({authority:i.authority,path:i.path})}return t=ule(t),e.with({path:gi.resolve(e.path,t)})}}const Pn=new ple(()=>!1),nV=Pn.isEqual.bind(Pn),sV=Pn.basenameOrAuthority.bind(Pn),ro=Pn.basename.bind(Pn),$A=Pn.dirname.bind(Pn);Pn.joinPath.bind(Pn);const mle=Pn.normalizePath.bind(Pn),AF=Pn.resolvePath.bind(Pn);var hc;(function(n){n.META_DATA_LABEL="label",n.META_DATA_DESCRIPTION="description",n.META_DATA_SIZE="size",n.META_DATA_MIME="mime";function e(t){const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,l]=o.split(":");a&&l&&i.set(a,l)});const r=t.path.substring(0,t.path.indexOf(";"));return r&&i.set(n.META_DATA_MIME,r),i}n.parseMetaData=e})(hc||(hc={}));function rV(n){return Array.isArray(n)}function oo(n){return typeof n=="string"}function An(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&!(n instanceof RegExp)&&!(n instanceof Date)}function au(n){return typeof n=="number"&&!isNaN(n)}function oV(n){return n===!0||n===!1}function vn(n){return typeof n=="undefined"}function _le(n){return!Ms(n)}function Ms(n){return vn(n)||n===null}function ti(n,e){if(!n)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function Qp(n){return typeof n=="function"}function ble(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)vle(n[i],e[i])}function vle(n,e){if(oo(e)){if(typeof n!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(Qp(e)){try{if(n instanceof e)return}catch{}if(!Ms(n)&&n.constructor===e||e.length===1&&e.call(void 0,n)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function wle(n){let e=[],t=Object.getPrototypeOf(n);for(;Object.prototype!==t;)e=e.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return e}function UA(n){const e=[];for(const t of wle(n))typeof n[t]=="function"&&e.push(t);return e}function Cle(n,e){const t=s=>function(){const r=Array.prototype.slice.call(arguments,0);return e(s,r)};let i={};for(const s of n)i[s]=t(s);return i}function vh(n){return n===null?void 0:n}function yle(n,e="Unreachable"){throw new Error(e)}const Fi=Xe("commandService"),lt=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new R,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(n,e){if(!n)throw new Error("invalid command");if(typeof n=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:n,handler:e})}if(n.description){const o=[];for(let l of n.description.args)o.push(l.constraint);const a=n.handler;n.handler=function(l,...c){return ble(c,o),a(l,...c)}}const{id:t}=n;let i=this._commands.get(t);i||(i=new bs,this._commands.set(t,i));let s=i.unshift(n),r=Ze(()=>{s();const o=this._commands.get(t);o!=null&&o.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),r}registerCommandAlias(n,e){return lt.registerCommand(n,(t,...i)=>t.get(Fi).executeCommand(e,...i))}getCommand(n){const e=this._commands.get(n);if(!(!e||e.isEmpty()))return Ue.first(e)}getCommands(){const n=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&n.set(e,t)}return n}};lt.registerCommand("noop",()=>{});var Kw;(function(n){n[n.API=0]="API",n[n.USER=1]="USER"})(Kw||(Kw={}));var MF=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const uc=Xe("openerService"),Sle=Object.freeze({_serviceBrand:void 0,registerOpener(){return q.None},registerValidator(){return q.None},registerExternalUriResolver(){return q.None},setDefaultExternalOpener(){},registerExternalOpener(){return q.None},open(){return MF(this,void 0,void 0,function*(){return!1})},resolveExternalUri(n){return MF(this,void 0,void 0,function*(){return{resolved:n,dispose(){}}})}});function kd(n,e){return xe.isUri(n)?Tp(n.scheme,e):BA(n,e+":")}var jA=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Gw=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},eh=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};let CE=class{constructor(e){this._commandService=e}open(e,t){return eh(this,void 0,void 0,function*(){if(!kd(e,Ve.command))return!1;if(!(t!=null&&t.allowCommands))return!0;typeof e=="string"&&(e=xe.parse(e));let i=[];try{i=vE(decodeURIComponent(e.query))}catch{try{i=vE(e.query)}catch{}}return Array.isArray(i)||(i=[i]),yield this._commandService.executeCommand(e.path,...i),!0})}};CE=jA([Gw(0,Fi)],CE);let yE=class{constructor(e){this._editorService=e}open(e,t){return eh(this,void 0,void 0,function*(){typeof e=="string"&&(e=xe.parse(e));let i;const s=/^L?(\d+)(?:,(\d+))?/.exec(e.fragment);return s&&(i={startLineNumber:parseInt(s[1]),startColumn:s[2]?parseInt(s[2]):1},e=e.with({fragment:""})),e.scheme===Ve.file&&(e=mle(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:i,context:t!=null&&t.fromUserGesture?Kw.USER:Kw.API},t==null?void 0:t.editorOptions)},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0})}};yE=jA([Gw(0,Tt)],yE);let SE=class{constructor(e,t){this._openers=new bs,this._validators=new bs,this._resolvers=new bs,this._resolvedUriTargets=new _n(i=>i.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new bs,this._defaultExternalOpener={openExternal:i=>eh(this,void 0,void 0,function*(){return kd(i,Ve.http)||kd(i,Ve.https)?Y9(i):window.location.href=i,!0})},this._openers.push({open:(i,s)=>eh(this,void 0,void 0,function*(){return(s==null?void 0:s.openExternal)||kd(i,Ve.mailto)||kd(i,Ve.http)||kd(i,Ve.https)?(yield this._doOpenExternal(i,s),!0):!1})}),this._openers.push(new CE(t)),this._openers.push(new yE(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}open(e,t){var i;return eh(this,void 0,void 0,function*(){const s=typeof e=="string"?xe.parse(e):e,r=(i=this._resolvedUriTargets.get(s))!==null&&i!==void 0?i:e;for(const o of this._validators)if(!(yield o.shouldOpen(r)))return!1;for(const o of this._openers)if(yield o.open(e,t))return!0;return!1})}resolveExternalUri(e,t){return eh(this,void 0,void 0,function*(){for(const i of this._resolvers)try{const s=yield i.resolveExternalUri(e,t);if(s)return this._resolvedUriTargets.has(s.resolved)||this._resolvedUriTargets.set(s.resolved,e),s}catch{}throw new Error("Could not resolve external URI: "+e.toString())})}_doOpenExternal(e,t){return eh(this,void 0,void 0,function*(){const i=typeof e=="string"?xe.parse(e):e;let s;try{s=(yield this.resolveExternalUri(i,t)).resolved}catch{s=i}let r;if(typeof e=="string"&&i.toString()===s.toString()?r=e:r=encodeURI(s.toString(!0)),t!=null&&t.allowContributedOpeners){const o=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(yield a.openExternal(r,{sourceUri:i,preferredOpenerId:o},Lt.None))return!0}return this._defaultExternalOpener.openExternal(r,{sourceUri:i},Lt.None)})}dispose(){this._validators.clear()}};SE=jA([Gw(0,Tt),Gw(1,Fi)],SE);function Mv(n,e){if(!n)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function Ml(n){if(!n||typeof n!="object"||n instanceof RegExp)return n;const e=Array.isArray(n)?[]:{};return Object.keys(n).forEach(t=>{n[t]&&typeof n[t]=="object"?e[t]=Ml(n[t]):e[t]=n[t]}),e}function xle(n){if(!n||typeof n!="object")return n;const e=[n];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const i in t)if(aV.call(t,i)){const s=t[i];typeof s=="object"&&!Object.isFrozen(s)&&e.push(s)}}return n}const aV=Object.prototype.hasOwnProperty;function Dle(n,e){return xE(n,e,new Set)}function xE(n,e,t){if(Ms(n))return n;const i=e(n);if(typeof i!="undefined")return i;if(rV(n)){const s=[];for(const r of n)s.push(xE(r,e,t));return s}if(An(n)){if(t.has(n))throw new Error("Cannot clone recursive data-structure");t.add(n);const s={};for(let r in n)aV.call(n,r)&&(s[r]=xE(n[r],e,t));return t.delete(n),s}return n}function po(n,e,t=!0){return An(n)?(An(e)&&Object.keys(e).forEach(i=>{i in n?t&&(An(n[i])&&An(e[i])?po(n[i],e[i],t):n[i]=e[i]):n[i]=e[i]}),n):e}function Gr(n,e){if(n===e)return!0;if(n==null||e===null||e===void 0||typeof n!=typeof e||typeof n!="object"||Array.isArray(n)!==Array.isArray(e))return!1;let t,i;if(Array.isArray(n)){if(n.length!==e.length)return!1;for(t=0;t<n.length;t++)if(!Gr(n[t],e[t]))return!1}else{const s=[];for(i in n)s.push(i);s.sort();const r=[];for(i in e)r.push(i);if(r.sort(),!Gr(s,r))return!1;for(t=0;t<s.length;t++)if(!Gr(n[s[t]],e[s[t]]))return!1}return!0}function yo(n,e,t){const i=e(n);return typeof i=="undefined"?t:i}const Lle={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class kle extends q{constructor(e,t={}){super(),this._onDidUpdate=this._register(new R),this._editor=e,this._options=po(t,Lle,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=Boolean(this._options.alwaysRevealFirst),this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(i=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(i=>{this.revealFirst=!0})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(t=>{!this._options.ignoreCharChanges&&t.charChanges?t.charChanges.forEach(i=>{this.ranges.push({rhs:!0,range:new I(i.modifiedStartLineNumber,i.modifiedStartColumn,i.modifiedEndLineNumber,i.modifiedEndColumn)})}):t.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new I(t.modifiedStartLineNumber,1,t.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new I(t.modifiedStartLineNumber,1,t.modifiedEndLineNumber+1,1)})}),this.ranges.sort((t,i)=>I.compareRangesUsingStarts(t.range,i.range)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1,i=this._editor.getPosition();if(!i){this.nextIdx=0;return}for(let s=0,r=this.ranges.length;s<r&&!t;s++){let o=this.ranges[s].range;i.isBeforeOrEqual(o.getStartPosition())&&(this.nextIdx=s+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,t){if(Mv(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));let i=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{let s=i.range.getStartPosition();this._editor.setPosition(s),this._editor.revealRangeInCenter(i.range,t)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}const Yw=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new R,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(n){n=Math.min(Math.max(-5,n),20),this._zoomLevel!==n&&(this._zoomLevel=n,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},Ele=je?1.5:1.35,yx=8;class Fh{constructor(e){this._bareFontInfoBrand=void 0,this.zoomLevel=e.zoomLevel,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}static createFromValidatedSettings(e,t,i,s){const r=e.get(42),o=e.get(46),a=e.get(45),l=e.get(44),c=e.get(58),h=e.get(55);return Fh._create(r,o,a,l,c,h,t,i,s)}static _create(e,t,i,s,r,o,a,l,c){r===0?r=Ele*i:r<yx&&(r=r*i),r=Math.round(r),r<yx&&(r=yx);const h=1+(c?0:Yw.getZoomLevel()*.1);return i*=h,r*=h,new Fh({zoomLevel:a,pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:i,fontFeatureSettings:s,lineHeight:r,letterSpacing:o})}getId(){return this.zoomLevel+"-"+this.pixelRatio+"-"+this.fontFamily+"-"+this.fontWeight+"-"+this.fontSize+"-"+this.fontFeatureSettings+"-"+this.lineHeight+"-"+this.letterSpacing}getMassagedFontFamily(e){const t=Fh._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const Ile=1;class DE extends Fh{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=Ile,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}function Tle(n){return n&&typeof n.id=="string"}const d1={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};var ra;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=4]="Right",n[n.Full=7]="Full"})(ra||(ra={}));var Qo;(function(n){n[n.Inline=1]="Inline",n[n.Gutter=2]="Gutter"})(Qo||(Qo={}));class Rv{constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),this.indentSize=e.tabSize|0,this.insertSpaces=Boolean(e.insertSpaces),this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=Boolean(e.trimAutoWhitespace),this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&Gr(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class r_{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}var Ph;(function(n){n[n.Disabled=0]="Disabled",n[n.EnabledForActive=1]="EnabledForActive",n[n.Enabled=2]="Enabled"})(Ph||(Ph={}));class Bd{constructor(e,t,i){this.visibleColumn=e,this.className=t,this.horizontalLine=i}}class LE{constructor(e,t){this.top=e,this.endColumn=t}}class Sx{constructor(e,t,i,s,r,o){this.identifier=e,this.range=t,this.text=i,this.forceMoveMarkers=s,this.isAutoWhitespaceEdit=r,this._isTracked=o}}class Nle{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}}function Ale(n){return qA(n,0)}function qA(n,e){switch(typeof n){case"object":return n===null?Ga(349,e):Array.isArray(n)?Rle(n,e):Ole(n,e);case"string":return KA(n,e);case"boolean":return Mle(n,e);case"number":return Ga(n,e);case"undefined":return Ga(937,e);default:return Ga(617,e)}}function Ga(n,e){return(e<<5)-e+n|0}function Mle(n,e){return Ga(n?433:863,e)}function KA(n,e){e=Ga(149417,e);for(let t=0,i=n.length;t<i;t++)e=Ga(n.charCodeAt(t),e);return e}function Rle(n,e){return e=Ga(104579,e),n.reduce((t,i)=>qA(i,t),e)}function Ole(n,e){return e=Ga(181387,e),Object.keys(n).sort().reduce((t,i)=>(t=KA(i,t),qA(n[i],t)),e)}function xx(n,e,t=32){const i=t-e,s=~((1<<i)-1);return(n<<e|(s&n)>>>i)>>>0}function RF(n,e=0,t=n.byteLength,i=0){for(let s=0;s<t;s++)n[e+s]=i}function Fle(n,e,t="0"){for(;n.length<e;)n=t+n;return n}function lp(n,e=32){return n instanceof ArrayBuffer?Array.from(new Uint8Array(n)).map(t=>t.toString(16).padStart(2,"0")).join(""):Fle((n>>>0).toString(16),e/4)}class f1{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const i=this._buff;let s=this._buffLen,r=this._leftoverHighSurrogate,o,a;for(r!==0?(o=r,a=-1,r=0):(o=e.charCodeAt(0),a=0);;){let l=o;if(Ri(o))if(a+1<t){const c=e.charCodeAt(a+1);Bf(c)?(a++,l=VA(o,c)):l=65533}else{r=o;break}else Bf(o)&&(l=65533);if(s=this._push(i,s,l),a++,a<t)o=e.charCodeAt(a);else break}this._buffLen=s,this._leftoverHighSurrogate=r}_push(e,t,i){return i<128?e[t++]=i:i<2048?(e[t++]=192|(i&1984)>>>6,e[t++]=128|(i&63)>>>0):i<65536?(e[t++]=224|(i&61440)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0):(e[t++]=240|(i&1835008)>>>18,e[t++]=128|(i&258048)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),lp(this._h0)+lp(this._h1)+lp(this._h2)+lp(this._h3)+lp(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,RF(this._buff,this._buffLen),this._buffLen>56&&(this._step(),RF(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=f1._bigBlock32,t=this._buffDV;for(let u=0;u<64;u+=4)e.setUint32(u,t.getUint32(u,!1),!1);for(let u=64;u<320;u+=4)e.setUint32(u,xx(e.getUint32(u-12,!1)^e.getUint32(u-32,!1)^e.getUint32(u-56,!1)^e.getUint32(u-64,!1),1),!1);let i=this._h0,s=this._h1,r=this._h2,o=this._h3,a=this._h4,l,c,h;for(let u=0;u<80;u++)u<20?(l=s&r|~s&o,c=1518500249):u<40?(l=s^r^o,c=1859775393):u<60?(l=s&r|s&o|r&o,c=2400959708):(l=s^r^o,c=3395469782),h=xx(i,5)+l+a+c+e.getUint32(u*4,!1)&4294967295,a=o,o=r,r=xx(s,30),s=i,i=h;this._h0=this._h0+i&4294967295,this._h1=this._h1+s&4294967295,this._h2=this._h2+r&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}}f1._bigBlock32=new DataView(new ArrayBuffer(320));function lr(n,e,t){return Math.min(Math.max(n,e),t)}const Dx="**",OF="/",Ov="[/\\\\]",Fv="[^/\\\\]",Ple=/\//g;function FF(n){switch(n){case 0:return"";case 1:return`${Fv}*?`;default:return`(?:${Ov}|${Fv}+${Ov}|${Ov}${Fv}+)*?`}}function PF(n,e){if(!n)return[];const t=[];let i=!1,s=!1,r="";for(const o of n){switch(o){case e:if(!i&&!s){t.push(r),r="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":s=!0;break;case"]":s=!1;break}r+=o}return r&&t.push(r),t}function lV(n){if(!n)return"";let e="";const t=PF(n,OF);if(t.every(i=>i===Dx))e=".*";else{let i=!1;t.forEach((s,r)=>{if(s===Dx){i||(e+=FF(2),i=!0);return}let o=!1,a="",l=!1,c="";for(const h of s){if(h!=="}"&&o){a+=h;continue}if(l&&(h!=="]"||!c)){let u;h==="-"?u=h:(h==="^"||h==="!")&&!c?u="^":h===OF?u="":u=so(h),c+=u;continue}switch(h){case"{":o=!0;continue;case"[":l=!0;continue;case"}":e+=`(?:${PF(a,",").map(f=>lV(f)).join("|")})`,o=!1,a="";break;case"]":e+="["+c+"]",l=!1,c="";break;case"?":e+=Fv;continue;case"*":e+=FF(1);continue;default:e+=so(h)}}r<t.length-1&&(t[r+1]!==Dx||r+2<t.length)&&(e+=Ov),i=!1})}return e}const Ble=/^\*\*\/\*\.[\w\.-]+$/,Vle=/^\*\*\/([\w\.-]+)\/?$/,Wle=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,zle=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,Hle=/^\*\*((\/[\w\.-]+)+)\/?$/,$le=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,BF=new HA(1e4),VF=function(){return!1},Jo=function(){return null};function GA(n,e){if(!n)return Jo;let t;typeof n!="string"?t=n.pattern:t=n,t=t.trim();const i=`${t}_${!!e.trimForExclusions}`;let s=BF.get(i);if(s)return WF(s,n);let r;if(Ble.test(t)){const o=t.substr(4);s=function(a,l){return typeof a=="string"&&a.endsWith(o)?t:null}}else(r=Vle.exec(Lx(t,e)))?s=Ule(r[1],t):(e.trimForExclusions?zle:Wle).test(t)?s=jle(t,e):(r=Hle.exec(Lx(t,e)))?s=zF(r[1].substr(1),t,!0):(r=$le.exec(Lx(t,e)))?s=zF(r[1],t,!1):s=qle(t);return BF.set(i,s),WF(s,n)}function WF(n,e){return typeof e=="string"?n:function(t,i){return dle(t,e.base)?n(Zoe(e.base,t),i):null}}function Lx(n,e){return e.trimForExclusions&&n.endsWith("/**")?n.substr(0,n.length-2):n}function Ule(n,e){const t=`/${n}`,i=`\\${n}`,s=function(o,a){return typeof o!="string"?null:a?a===n?e:null:o===n||o.endsWith(t)||o.endsWith(i)?e:null},r=[n];return s.basenames=r,s.patterns=[e],s.allBasenames=r,s}function jle(n,e){const t=hV(n.slice(1,-1).split(",").map(a=>GA(a,e)).filter(a=>a!==Jo),n),i=t.length;if(!i)return Jo;if(i===1)return t[0];const s=function(a,l){for(let c=0,h=t.length;c<h;c++)if(t[c](a,l))return n;return null},r=t.find(a=>!!a.allBasenames);r&&(s.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function zF(n,e,t){const i=Nv===gi.sep,s=i?n:n.replace(Ple,Nv),r=Nv+s,o=gi.sep+n,a=t?function(l,c){return typeof l=="string"&&(l===s||l.endsWith(r)||!i&&(l===n||l.endsWith(o)))?e:null}:function(l,c){return typeof l=="string"&&(l===s||!i&&l===n)?e:null};return a.allPaths=[(t?"*/":"./")+n],a}function qle(n){try{const e=new RegExp(`^${lV(n)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?n:null}}catch{return Jo}}function Kle(n,e,t){return!n||typeof e!="string"?!1:cV(n)(e,void 0,t)}function cV(n,e={}){if(!n)return VF;if(typeof n=="string"||Gle(n)){const t=GA(n,e);if(t===Jo)return VF;const i=function(s,r){return!!t(s,r)};return t.allBasenames&&(i.allBasenames=t.allBasenames),t.allPaths&&(i.allPaths=t.allPaths),i}return Yle(n,e)}function Gle(n){const e=n;return e&&typeof e.base=="string"&&typeof e.pattern=="string"}function Yle(n,e){const t=hV(Object.getOwnPropertyNames(n).map(a=>Zle(a,n[a],e)).filter(a=>a!==Jo)),i=t.length;if(!i)return Jo;if(!t.some(a=>!!a.requiresSiblings)){if(i===1)return t[0];const a=function(h,u){for(let d=0,f=t.length;d<f;d++){const g=t[d](h,u);if(g)return g}return null},l=t.find(h=>!!h.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((h,u)=>u.allPaths?h.concat(u.allPaths):h,[]);return c.length&&(a.allPaths=c),a}const s=function(a,l,c){let h;for(let u=0,d=t.length;u<d;u++){const f=t[u];f.requiresSiblings&&c&&(l||(l=Rh(a)),h||(h=l.substr(0,l.length-Xoe(a).length)));const g=f(a,l,h,c);if(g)return g}return null},r=t.find(a=>!!a.allBasenames);r&&(s.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function Zle(n,e,t){if(e===!1)return Jo;const i=GA(n,t);if(i===Jo)return Jo;if(typeof e=="boolean")return i;if(e){const s=e.when;if(typeof s=="string"){const r=(o,a,l,c)=>{if(!c||!i(o,a))return null;const h=s.replace("$(basename)",l),u=c(h);return _ae(u)?u.then(d=>d?n:null):u?n:null};return r.requiresSiblings=!0,r}}return i}function hV(n,e){const t=n.filter(a=>!!a.basenames);if(t.length<2)return n;const i=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let s;if(e){s=[];for(let a=0,l=i.length;a<l;a++)s.push(e)}else s=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const r=function(a,l){if(typeof a!="string")return null;if(!l){let h;for(h=a.length;h>0;h--){const u=a.charCodeAt(h-1);if(u===47||u===92)break}l=a.substr(h)}const c=i.indexOf(l);return c!==-1?s[c]:null};r.basenames=i,r.patterns=s,r.allBasenames=i;const o=n.filter(a=>!a.basenames);return o.push(r),o}function uV(n,e,t,i){if(Array.isArray(n)){let s=0;for(const r of n){const o=uV(r,e,t,i);if(o===10)return o;o>s&&(s=o)}return s}else{if(typeof n=="string")return i?n==="*"?5:n===t?10:0:0;if(n){const{language:s,pattern:r,scheme:o,hasAccessToAllModels:a}=n;if(!i&&!a)return 0;let l=0;if(o)if(o===e.scheme)l=10;else if(o==="*")l=5;else return 0;if(s)if(s===t)l=10;else if(s==="*")l=Math.max(l,5);else return 0;if(r){let c;if(typeof r=="string"?c=r:c=Object.assign(Object.assign({},r),{base:EA(r.base)}),c===e.fsPath||Kle(c,e.fsPath))l=10;else return 0}return l}else return 0}}const zn=Xe("modelService");function Xle(n){return!n.isTooLargeForSyncing()&&!n.isForSimpleWidget}function dV(n){return typeof n=="string"?!1:Array.isArray(n)?n.every(dV):!!n.exclusive}class Kt{constructor(){this._clock=0,this._entries=[],this._onDidChange=new R}get onDidChange(){return this._onDidChange.event}register(e,t){let i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),Ze(()=>{if(i){let s=this._entries.indexOf(i);s>=0&&(this._entries.splice(s,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),i=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(let i of this._entries)i._score>0&&t.push(i.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,i=>t.push(i.provider)),t}orderedGroups(e){const t=[];let i,s;return this._orderedForEach(e,r=>{i&&s===r._score?i.push(r.provider):(s=r._score,i=[r.provider],t.push(i))}),t}_orderedForEach(e,t){if(!!e){this._updateScores(e);for(const i of this._entries)i._score>0&&t(i)}}_updateScores(e){let t={uri:e.uri.toString(),language:e.getLanguageId()};if(!(this._lastCandidate&&this._lastCandidate.language===t.language&&this._lastCandidate.uri===t.uri)){this._lastCandidate=t;for(let i of this._entries)if(i._score=uV(i.selector,e.uri,e.getLanguageId(),Xle(e)),dV(i.selector)&&i._score>0){for(let s of this._entries)s._score=0;i._score=1e3;break}this._entries.sort(Kt._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0}}class Qle{constructor(){this._map=new Map,this._promises=new Map,this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._map.set(e,t),this.fire([e]),Ze(()=>{this._map.get(e)===t&&(this._map.delete(e),this.fire([e]))})}registerPromise(e,t){let i=null,s=!1;return this._promises.set(e,t.then(r=>{this._promises.delete(e),!(s||!r)&&(i=this.register(e,r))})),Ze(()=>{s=!0,i&&i.dispose()})}getPromise(e){const t=this.get(e);if(t)return Promise.resolve(t);const i=this._promises.get(e);return i?i.then(s=>this.get(e)):null}get(e){return this._map.get(e)||null}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}class Jle{constructor(){this._icons=new Map,this._onDidRegister=new R}add(e){const t=this._icons.get(e.id);t?e.description?t.description=e.description:console.error(`Duplicate registration of codicon ${e.id}`):(this._icons.set(e.id,e),this._onDidRegister.fire(e))}get(e){return this._icons.get(e)}get all(){return this._icons.values()}get onDidRegister(){return this._onDidRegister.event}}const fV=new Jle,Zw=fV;function Er(n,e){return new se(n,e)}function ece(n){return n?n.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}class se{constructor(e,t,i){this.id=e,this.definition=t,this.description=i,fV.add(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}}var Xn;(function(n){n.iconNameSegment="[A-Za-z0-9]+",n.iconNameExpression="[A-Za-z0-9\\-]+",n.iconModifierExpression="~[A-Za-z]+";const e=new RegExp(`^(${n.iconNameExpression})(${n.iconModifierExpression})?$`);function t(r){if(r instanceof se)return["codicon","codicon-"+r.id];const o=e.exec(r.id);if(!o)return t(se.error);let[,a,l]=o;const c=["codicon","codicon-"+a];return l&&c.push("codicon-modifier-"+l.substr(1)),c}n.asClassNameArray=t;function i(r){return t(r).join(" ")}n.asClassName=i;function s(r){return"."+t(r).join(".")}n.asCSSSelector=s})(Xn||(Xn={}));(function(n){n.add=new n("add",{fontCharacter:"\\ea60"}),n.plus=new n("plus",n.add.definition),n.gistNew=new n("gist-new",n.add.definition),n.repoCreate=new n("repo-create",n.add.definition),n.lightbulb=new n("lightbulb",{fontCharacter:"\\ea61"}),n.lightBulb=new n("light-bulb",{fontCharacter:"\\ea61"}),n.repo=new n("repo",{fontCharacter:"\\ea62"}),n.repoDelete=new n("repo-delete",{fontCharacter:"\\ea62"}),n.gistFork=new n("gist-fork",{fontCharacter:"\\ea63"}),n.repoForked=new n("repo-forked",{fontCharacter:"\\ea63"}),n.gitPullRequest=new n("git-pull-request",{fontCharacter:"\\ea64"}),n.gitPullRequestAbandoned=new n("git-pull-request-abandoned",{fontCharacter:"\\ea64"}),n.recordKeys=new n("record-keys",{fontCharacter:"\\ea65"}),n.keyboard=new n("keyboard",{fontCharacter:"\\ea65"}),n.tag=new n("tag",{fontCharacter:"\\ea66"}),n.tagAdd=new n("tag-add",{fontCharacter:"\\ea66"}),n.tagRemove=new n("tag-remove",{fontCharacter:"\\ea66"}),n.person=new n("person",{fontCharacter:"\\ea67"}),n.personFollow=new n("person-follow",{fontCharacter:"\\ea67"}),n.personOutline=new n("person-outline",{fontCharacter:"\\ea67"}),n.personFilled=new n("person-filled",{fontCharacter:"\\ea67"}),n.gitBranch=new n("git-branch",{fontCharacter:"\\ea68"}),n.gitBranchCreate=new n("git-branch-create",{fontCharacter:"\\ea68"}),n.gitBranchDelete=new n("git-branch-delete",{fontCharacter:"\\ea68"}),n.sourceControl=new n("source-control",{fontCharacter:"\\ea68"}),n.mirror=new n("mirror",{fontCharacter:"\\ea69"}),n.mirrorPublic=new n("mirror-public",{fontCharacter:"\\ea69"}),n.star=new n("star",{fontCharacter:"\\ea6a"}),n.starAdd=new n("star-add",{fontCharacter:"\\ea6a"}),n.starDelete=new n("star-delete",{fontCharacter:"\\ea6a"}),n.starEmpty=new n("star-empty",{fontCharacter:"\\ea6a"}),n.comment=new n("comment",{fontCharacter:"\\ea6b"}),n.commentAdd=new n("comment-add",{fontCharacter:"\\ea6b"}),n.alert=new n("alert",{fontCharacter:"\\ea6c"}),n.warning=new n("warning",{fontCharacter:"\\ea6c"}),n.search=new n("search",{fontCharacter:"\\ea6d"}),n.searchSave=new n("search-save",{fontCharacter:"\\ea6d"}),n.logOut=new n("log-out",{fontCharacter:"\\ea6e"}),n.signOut=new n("sign-out",{fontCharacter:"\\ea6e"}),n.logIn=new n("log-in",{fontCharacter:"\\ea6f"}),n.signIn=new n("sign-in",{fontCharacter:"\\ea6f"}),n.eye=new n("eye",{fontCharacter:"\\ea70"}),n.eyeUnwatch=new n("eye-unwatch",{fontCharacter:"\\ea70"}),n.eyeWatch=new n("eye-watch",{fontCharacter:"\\ea70"}),n.circleFilled=new n("circle-filled",{fontCharacter:"\\ea71"}),n.primitiveDot=new n("primitive-dot",{fontCharacter:"\\ea71"}),n.closeDirty=new n("close-dirty",{fontCharacter:"\\ea71"}),n.debugBreakpoint=new n("debug-breakpoint",{fontCharacter:"\\ea71"}),n.debugBreakpointDisabled=new n("debug-breakpoint-disabled",{fontCharacter:"\\ea71"}),n.debugHint=new n("debug-hint",{fontCharacter:"\\ea71"}),n.primitiveSquare=new n("primitive-square",{fontCharacter:"\\ea72"}),n.edit=new n("edit",{fontCharacter:"\\ea73"}),n.pencil=new n("pencil",{fontCharacter:"\\ea73"}),n.info=new n("info",{fontCharacter:"\\ea74"}),n.issueOpened=new n("issue-opened",{fontCharacter:"\\ea74"}),n.gistPrivate=new n("gist-private",{fontCharacter:"\\ea75"}),n.gitForkPrivate=new n("git-fork-private",{fontCharacter:"\\ea75"}),n.lock=new n("lock",{fontCharacter:"\\ea75"}),n.mirrorPrivate=new n("mirror-private",{fontCharacter:"\\ea75"}),n.close=new n("close",{fontCharacter:"\\ea76"}),n.removeClose=new n("remove-close",{fontCharacter:"\\ea76"}),n.x=new n("x",{fontCharacter:"\\ea76"}),n.repoSync=new n("repo-sync",{fontCharacter:"\\ea77"}),n.sync=new n("sync",{fontCharacter:"\\ea77"}),n.clone=new n("clone",{fontCharacter:"\\ea78"}),n.desktopDownload=new n("desktop-download",{fontCharacter:"\\ea78"}),n.beaker=new n("beaker",{fontCharacter:"\\ea79"}),n.microscope=new n("microscope",{fontCharacter:"\\ea79"}),n.vm=new n("vm",{fontCharacter:"\\ea7a"}),n.deviceDesktop=new n("device-desktop",{fontCharacter:"\\ea7a"}),n.file=new n("file",{fontCharacter:"\\ea7b"}),n.fileText=new n("file-text",{fontCharacter:"\\ea7b"}),n.more=new n("more",{fontCharacter:"\\ea7c"}),n.ellipsis=new n("ellipsis",{fontCharacter:"\\ea7c"}),n.kebabHorizontal=new n("kebab-horizontal",{fontCharacter:"\\ea7c"}),n.mailReply=new n("mail-reply",{fontCharacter:"\\ea7d"}),n.reply=new n("reply",{fontCharacter:"\\ea7d"}),n.organization=new n("organization",{fontCharacter:"\\ea7e"}),n.organizationFilled=new n("organization-filled",{fontCharacter:"\\ea7e"}),n.organizationOutline=new n("organization-outline",{fontCharacter:"\\ea7e"}),n.newFile=new n("new-file",{fontCharacter:"\\ea7f"}),n.fileAdd=new n("file-add",{fontCharacter:"\\ea7f"}),n.newFolder=new n("new-folder",{fontCharacter:"\\ea80"}),n.fileDirectoryCreate=new n("file-directory-create",{fontCharacter:"\\ea80"}),n.trash=new n("trash",{fontCharacter:"\\ea81"}),n.trashcan=new n("trashcan",{fontCharacter:"\\ea81"}),n.history=new n("history",{fontCharacter:"\\ea82"}),n.clock=new n("clock",{fontCharacter:"\\ea82"}),n.folder=new n("folder",{fontCharacter:"\\ea83"}),n.fileDirectory=new n("file-directory",{fontCharacter:"\\ea83"}),n.symbolFolder=new n("symbol-folder",{fontCharacter:"\\ea83"}),n.logoGithub=new n("logo-github",{fontCharacter:"\\ea84"}),n.markGithub=new n("mark-github",{fontCharacter:"\\ea84"}),n.github=new n("github",{fontCharacter:"\\ea84"}),n.terminal=new n("terminal",{fontCharacter:"\\ea85"}),n.console=new n("console",{fontCharacter:"\\ea85"}),n.repl=new n("repl",{fontCharacter:"\\ea85"}),n.zap=new n("zap",{fontCharacter:"\\ea86"}),n.symbolEvent=new n("symbol-event",{fontCharacter:"\\ea86"}),n.error=new n("error",{fontCharacter:"\\ea87"}),n.stop=new n("stop",{fontCharacter:"\\ea87"}),n.variable=new n("variable",{fontCharacter:"\\ea88"}),n.symbolVariable=new n("symbol-variable",{fontCharacter:"\\ea88"}),n.array=new n("array",{fontCharacter:"\\ea8a"}),n.symbolArray=new n("symbol-array",{fontCharacter:"\\ea8a"}),n.symbolModule=new n("symbol-module",{fontCharacter:"\\ea8b"}),n.symbolPackage=new n("symbol-package",{fontCharacter:"\\ea8b"}),n.symbolNamespace=new n("symbol-namespace",{fontCharacter:"\\ea8b"}),n.symbolObject=new n("symbol-object",{fontCharacter:"\\ea8b"}),n.symbolMethod=new n("symbol-method",{fontCharacter:"\\ea8c"}),n.symbolFunction=new n("symbol-function",{fontCharacter:"\\ea8c"}),n.symbolConstructor=new n("symbol-constructor",{fontCharacter:"\\ea8c"}),n.symbolBoolean=new n("symbol-boolean",{fontCharacter:"\\ea8f"}),n.symbolNull=new n("symbol-null",{fontCharacter:"\\ea8f"}),n.symbolNumeric=new n("symbol-numeric",{fontCharacter:"\\ea90"}),n.symbolNumber=new n("symbol-number",{fontCharacter:"\\ea90"}),n.symbolStructure=new n("symbol-structure",{fontCharacter:"\\ea91"}),n.symbolStruct=new n("symbol-struct",{fontCharacter:"\\ea91"}),n.symbolParameter=new n("symbol-parameter",{fontCharacter:"\\ea92"}),n.symbolTypeParameter=new n("symbol-type-parameter",{fontCharacter:"\\ea92"}),n.symbolKey=new n("symbol-key",{fontCharacter:"\\ea93"}),n.symbolText=new n("symbol-text",{fontCharacter:"\\ea93"}),n.symbolReference=new n("symbol-reference",{fontCharacter:"\\ea94"}),n.goToFile=new n("go-to-file",{fontCharacter:"\\ea94"}),n.symbolEnum=new n("symbol-enum",{fontCharacter:"\\ea95"}),n.symbolValue=new n("symbol-value",{fontCharacter:"\\ea95"}),n.symbolRuler=new n("symbol-ruler",{fontCharacter:"\\ea96"}),n.symbolUnit=new n("symbol-unit",{fontCharacter:"\\ea96"}),n.activateBreakpoints=new n("activate-breakpoints",{fontCharacter:"\\ea97"}),n.archive=new n("archive",{fontCharacter:"\\ea98"}),n.arrowBoth=new n("arrow-both",{fontCharacter:"\\ea99"}),n.arrowDown=new n("arrow-down",{fontCharacter:"\\ea9a"}),n.arrowLeft=new n("arrow-left",{fontCharacter:"\\ea9b"}),n.arrowRight=new n("arrow-right",{fontCharacter:"\\ea9c"}),n.arrowSmallDown=new n("arrow-small-down",{fontCharacter:"\\ea9d"}),n.arrowSmallLeft=new n("arrow-small-left",{fontCharacter:"\\ea9e"}),n.arrowSmallRight=new n("arrow-small-right",{fontCharacter:"\\ea9f"}),n.arrowSmallUp=new n("arrow-small-up",{fontCharacter:"\\eaa0"}),n.arrowUp=new n("arrow-up",{fontCharacter:"\\eaa1"}),n.bell=new n("bell",{fontCharacter:"\\eaa2"}),n.bold=new n("bold",{fontCharacter:"\\eaa3"}),n.book=new n("book",{fontCharacter:"\\eaa4"}),n.bookmark=new n("bookmark",{fontCharacter:"\\eaa5"}),n.debugBreakpointConditionalUnverified=new n("debug-breakpoint-conditional-unverified",{fontCharacter:"\\eaa6"}),n.debugBreakpointConditional=new n("debug-breakpoint-conditional",{fontCharacter:"\\eaa7"}),n.debugBreakpointConditionalDisabled=new n("debug-breakpoint-conditional-disabled",{fontCharacter:"\\eaa7"}),n.debugBreakpointDataUnverified=new n("debug-breakpoint-data-unverified",{fontCharacter:"\\eaa8"}),n.debugBreakpointData=new n("debug-breakpoint-data",{fontCharacter:"\\eaa9"}),n.debugBreakpointDataDisabled=new n("debug-breakpoint-data-disabled",{fontCharacter:"\\eaa9"}),n.debugBreakpointLogUnverified=new n("debug-breakpoint-log-unverified",{fontCharacter:"\\eaaa"}),n.debugBreakpointLog=new n("debug-breakpoint-log",{fontCharacter:"\\eaab"}),n.debugBreakpointLogDisabled=new n("debug-breakpoint-log-disabled",{fontCharacter:"\\eaab"}),n.briefcase=new n("briefcase",{fontCharacter:"\\eaac"}),n.broadcast=new n("broadcast",{fontCharacter:"\\eaad"}),n.browser=new n("browser",{fontCharacter:"\\eaae"}),n.bug=new n("bug",{fontCharacter:"\\eaaf"}),n.calendar=new n("calendar",{fontCharacter:"\\eab0"}),n.caseSensitive=new n("case-sensitive",{fontCharacter:"\\eab1"}),n.check=new n("check",{fontCharacter:"\\eab2"}),n.checklist=new n("checklist",{fontCharacter:"\\eab3"}),n.chevronDown=new n("chevron-down",{fontCharacter:"\\eab4"}),n.dropDownButton=new n("drop-down-button",n.chevronDown.definition),n.chevronLeft=new n("chevron-left",{fontCharacter:"\\eab5"}),n.chevronRight=new n("chevron-right",{fontCharacter:"\\eab6"}),n.chevronUp=new n("chevron-up",{fontCharacter:"\\eab7"}),n.chromeClose=new n("chrome-close",{fontCharacter:"\\eab8"}),n.chromeMaximize=new n("chrome-maximize",{fontCharacter:"\\eab9"}),n.chromeMinimize=new n("chrome-minimize",{fontCharacter:"\\eaba"}),n.chromeRestore=new n("chrome-restore",{fontCharacter:"\\eabb"}),n.circleOutline=new n("circle-outline",{fontCharacter:"\\eabc"}),n.debugBreakpointUnverified=new n("debug-breakpoint-unverified",{fontCharacter:"\\eabc"}),n.circleSlash=new n("circle-slash",{fontCharacter:"\\eabd"}),n.circuitBoard=new n("circuit-board",{fontCharacter:"\\eabe"}),n.clearAll=new n("clear-all",{fontCharacter:"\\eabf"}),n.clippy=new n("clippy",{fontCharacter:"\\eac0"}),n.closeAll=new n("close-all",{fontCharacter:"\\eac1"}),n.cloudDownload=new n("cloud-download",{fontCharacter:"\\eac2"}),n.cloudUpload=new n("cloud-upload",{fontCharacter:"\\eac3"}),n.code=new n("code",{fontCharacter:"\\eac4"}),n.collapseAll=new n("collapse-all",{fontCharacter:"\\eac5"}),n.colorMode=new n("color-mode",{fontCharacter:"\\eac6"}),n.commentDiscussion=new n("comment-discussion",{fontCharacter:"\\eac7"}),n.compareChanges=new n("compare-changes",{fontCharacter:"\\eafd"}),n.creditCard=new n("credit-card",{fontCharacter:"\\eac9"}),n.dash=new n("dash",{fontCharacter:"\\eacc"}),n.dashboard=new n("dashboard",{fontCharacter:"\\eacd"}),n.database=new n("database",{fontCharacter:"\\eace"}),n.debugContinue=new n("debug-continue",{fontCharacter:"\\eacf"}),n.debugDisconnect=new n("debug-disconnect",{fontCharacter:"\\ead0"}),n.debugPause=new n("debug-pause",{fontCharacter:"\\ead1"}),n.debugRestart=new n("debug-restart",{fontCharacter:"\\ead2"}),n.debugStart=new n("debug-start",{fontCharacter:"\\ead3"}),n.debugStepInto=new n("debug-step-into",{fontCharacter:"\\ead4"}),n.debugStepOut=new n("debug-step-out",{fontCharacter:"\\ead5"}),n.debugStepOver=new n("debug-step-over",{fontCharacter:"\\ead6"}),n.debugStop=new n("debug-stop",{fontCharacter:"\\ead7"}),n.debug=new n("debug",{fontCharacter:"\\ead8"}),n.deviceCameraVideo=new n("device-camera-video",{fontCharacter:"\\ead9"}),n.deviceCamera=new n("device-camera",{fontCharacter:"\\eada"}),n.deviceMobile=new n("device-mobile",{fontCharacter:"\\eadb"}),n.diffAdded=new n("diff-added",{fontCharacter:"\\eadc"}),n.diffIgnored=new n("diff-ignored",{fontCharacter:"\\eadd"}),n.diffModified=new n("diff-modified",{fontCharacter:"\\eade"}),n.diffRemoved=new n("diff-removed",{fontCharacter:"\\eadf"}),n.diffRenamed=new n("diff-renamed",{fontCharacter:"\\eae0"}),n.diff=new n("diff",{fontCharacter:"\\eae1"}),n.discard=new n("discard",{fontCharacter:"\\eae2"}),n.editorLayout=new n("editor-layout",{fontCharacter:"\\eae3"}),n.emptyWindow=new n("empty-window",{fontCharacter:"\\eae4"}),n.exclude=new n("exclude",{fontCharacter:"\\eae5"}),n.extensions=new n("extensions",{fontCharacter:"\\eae6"}),n.eyeClosed=new n("eye-closed",{fontCharacter:"\\eae7"}),n.fileBinary=new n("file-binary",{fontCharacter:"\\eae8"}),n.fileCode=new n("file-code",{fontCharacter:"\\eae9"}),n.fileMedia=new n("file-media",{fontCharacter:"\\eaea"}),n.filePdf=new n("file-pdf",{fontCharacter:"\\eaeb"}),n.fileSubmodule=new n("file-submodule",{fontCharacter:"\\eaec"}),n.fileSymlinkDirectory=new n("file-symlink-directory",{fontCharacter:"\\eaed"}),n.fileSymlinkFile=new n("file-symlink-file",{fontCharacter:"\\eaee"}),n.fileZip=new n("file-zip",{fontCharacter:"\\eaef"}),n.files=new n("files",{fontCharacter:"\\eaf0"}),n.filter=new n("filter",{fontCharacter:"\\eaf1"}),n.flame=new n("flame",{fontCharacter:"\\eaf2"}),n.foldDown=new n("fold-down",{fontCharacter:"\\eaf3"}),n.foldUp=new n("fold-up",{fontCharacter:"\\eaf4"}),n.fold=new n("fold",{fontCharacter:"\\eaf5"}),n.folderActive=new n("folder-active",{fontCharacter:"\\eaf6"}),n.folderOpened=new n("folder-opened",{fontCharacter:"\\eaf7"}),n.gear=new n("gear",{fontCharacter:"\\eaf8"}),n.gift=new n("gift",{fontCharacter:"\\eaf9"}),n.gistSecret=new n("gist-secret",{fontCharacter:"\\eafa"}),n.gist=new n("gist",{fontCharacter:"\\eafb"}),n.gitCommit=new n("git-commit",{fontCharacter:"\\eafc"}),n.gitCompare=new n("git-compare",{fontCharacter:"\\eafd"}),n.gitMerge=new n("git-merge",{fontCharacter:"\\eafe"}),n.githubAction=new n("github-action",{fontCharacter:"\\eaff"}),n.githubAlt=new n("github-alt",{fontCharacter:"\\eb00"}),n.globe=new n("globe",{fontCharacter:"\\eb01"}),n.grabber=new n("grabber",{fontCharacter:"\\eb02"}),n.graph=new n("graph",{fontCharacter:"\\eb03"}),n.gripper=new n("gripper",{fontCharacter:"\\eb04"}),n.heart=new n("heart",{fontCharacter:"\\eb05"}),n.home=new n("home",{fontCharacter:"\\eb06"}),n.horizontalRule=new n("horizontal-rule",{fontCharacter:"\\eb07"}),n.hubot=new n("hubot",{fontCharacter:"\\eb08"}),n.inbox=new n("inbox",{fontCharacter:"\\eb09"}),n.issueClosed=new n("issue-closed",{fontCharacter:"\\eba4"}),n.issueReopened=new n("issue-reopened",{fontCharacter:"\\eb0b"}),n.issues=new n("issues",{fontCharacter:"\\eb0c"}),n.italic=new n("italic",{fontCharacter:"\\eb0d"}),n.jersey=new n("jersey",{fontCharacter:"\\eb0e"}),n.json=new n("json",{fontCharacter:"\\eb0f"}),n.kebabVertical=new n("kebab-vertical",{fontCharacter:"\\eb10"}),n.key=new n("key",{fontCharacter:"\\eb11"}),n.law=new n("law",{fontCharacter:"\\eb12"}),n.lightbulbAutofix=new n("lightbulb-autofix",{fontCharacter:"\\eb13"}),n.linkExternal=new n("link-external",{fontCharacter:"\\eb14"}),n.link=new n("link",{fontCharacter:"\\eb15"}),n.listOrdered=new n("list-ordered",{fontCharacter:"\\eb16"}),n.listUnordered=new n("list-unordered",{fontCharacter:"\\eb17"}),n.liveShare=new n("live-share",{fontCharacter:"\\eb18"}),n.loading=new n("loading",{fontCharacter:"\\eb19"}),n.location=new n("location",{fontCharacter:"\\eb1a"}),n.mailRead=new n("mail-read",{fontCharacter:"\\eb1b"}),n.mail=new n("mail",{fontCharacter:"\\eb1c"}),n.markdown=new n("markdown",{fontCharacter:"\\eb1d"}),n.megaphone=new n("megaphone",{fontCharacter:"\\eb1e"}),n.mention=new n("mention",{fontCharacter:"\\eb1f"}),n.milestone=new n("milestone",{fontCharacter:"\\eb20"}),n.mortarBoard=new n("mortar-board",{fontCharacter:"\\eb21"}),n.move=new n("move",{fontCharacter:"\\eb22"}),n.multipleWindows=new n("multiple-windows",{fontCharacter:"\\eb23"}),n.mute=new n("mute",{fontCharacter:"\\eb24"}),n.noNewline=new n("no-newline",{fontCharacter:"\\eb25"}),n.note=new n("note",{fontCharacter:"\\eb26"}),n.octoface=new n("octoface",{fontCharacter:"\\eb27"}),n.openPreview=new n("open-preview",{fontCharacter:"\\eb28"}),n.package_=new n("package",{fontCharacter:"\\eb29"}),n.paintcan=new n("paintcan",{fontCharacter:"\\eb2a"}),n.pin=new n("pin",{fontCharacter:"\\eb2b"}),n.play=new n("play",{fontCharacter:"\\eb2c"}),n.run=new n("run",{fontCharacter:"\\eb2c"}),n.plug=new n("plug",{fontCharacter:"\\eb2d"}),n.preserveCase=new n("preserve-case",{fontCharacter:"\\eb2e"}),n.preview=new n("preview",{fontCharacter:"\\eb2f"}),n.project=new n("project",{fontCharacter:"\\eb30"}),n.pulse=new n("pulse",{fontCharacter:"\\eb31"}),n.question=new n("question",{fontCharacter:"\\eb32"}),n.quote=new n("quote",{fontCharacter:"\\eb33"}),n.radioTower=new n("radio-tower",{fontCharacter:"\\eb34"}),n.reactions=new n("reactions",{fontCharacter:"\\eb35"}),n.references=new n("references",{fontCharacter:"\\eb36"}),n.refresh=new n("refresh",{fontCharacter:"\\eb37"}),n.regex=new n("regex",{fontCharacter:"\\eb38"}),n.remoteExplorer=new n("remote-explorer",{fontCharacter:"\\eb39"}),n.remote=new n("remote",{fontCharacter:"\\eb3a"}),n.remove=new n("remove",{fontCharacter:"\\eb3b"}),n.replaceAll=new n("replace-all",{fontCharacter:"\\eb3c"}),n.replace=new n("replace",{fontCharacter:"\\eb3d"}),n.repoClone=new n("repo-clone",{fontCharacter:"\\eb3e"}),n.repoForcePush=new n("repo-force-push",{fontCharacter:"\\eb3f"}),n.repoPull=new n("repo-pull",{fontCharacter:"\\eb40"}),n.repoPush=new n("repo-push",{fontCharacter:"\\eb41"}),n.report=new n("report",{fontCharacter:"\\eb42"}),n.requestChanges=new n("request-changes",{fontCharacter:"\\eb43"}),n.rocket=new n("rocket",{fontCharacter:"\\eb44"}),n.rootFolderOpened=new n("root-folder-opened",{fontCharacter:"\\eb45"}),n.rootFolder=new n("root-folder",{fontCharacter:"\\eb46"}),n.rss=new n("rss",{fontCharacter:"\\eb47"}),n.ruby=new n("ruby",{fontCharacter:"\\eb48"}),n.saveAll=new n("save-all",{fontCharacter:"\\eb49"}),n.saveAs=new n("save-as",{fontCharacter:"\\eb4a"}),n.save=new n("save",{fontCharacter:"\\eb4b"}),n.screenFull=new n("screen-full",{fontCharacter:"\\eb4c"}),n.screenNormal=new n("screen-normal",{fontCharacter:"\\eb4d"}),n.searchStop=new n("search-stop",{fontCharacter:"\\eb4e"}),n.server=new n("server",{fontCharacter:"\\eb50"}),n.settingsGear=new n("settings-gear",{fontCharacter:"\\eb51"}),n.settings=new n("settings",{fontCharacter:"\\eb52"}),n.shield=new n("shield",{fontCharacter:"\\eb53"}),n.smiley=new n("smiley",{fontCharacter:"\\eb54"}),n.sortPrecedence=new n("sort-precedence",{fontCharacter:"\\eb55"}),n.splitHorizontal=new n("split-horizontal",{fontCharacter:"\\eb56"}),n.splitVertical=new n("split-vertical",{fontCharacter:"\\eb57"}),n.squirrel=new n("squirrel",{fontCharacter:"\\eb58"}),n.starFull=new n("star-full",{fontCharacter:"\\eb59"}),n.starHalf=new n("star-half",{fontCharacter:"\\eb5a"}),n.symbolClass=new n("symbol-class",{fontCharacter:"\\eb5b"}),n.symbolColor=new n("symbol-color",{fontCharacter:"\\eb5c"}),n.symbolConstant=new n("symbol-constant",{fontCharacter:"\\eb5d"}),n.symbolEnumMember=new n("symbol-enum-member",{fontCharacter:"\\eb5e"}),n.symbolField=new n("symbol-field",{fontCharacter:"\\eb5f"}),n.symbolFile=new n("symbol-file",{fontCharacter:"\\eb60"}),n.symbolInterface=new n("symbol-interface",{fontCharacter:"\\eb61"}),n.symbolKeyword=new n("symbol-keyword",{fontCharacter:"\\eb62"}),n.symbolMisc=new n("symbol-misc",{fontCharacter:"\\eb63"}),n.symbolOperator=new n("symbol-operator",{fontCharacter:"\\eb64"}),n.symbolProperty=new n("symbol-property",{fontCharacter:"\\eb65"}),n.wrench=new n("wrench",{fontCharacter:"\\eb65"}),n.wrenchSubaction=new n("wrench-subaction",{fontCharacter:"\\eb65"}),n.symbolSnippet=new n("symbol-snippet",{fontCharacter:"\\eb66"}),n.tasklist=new n("tasklist",{fontCharacter:"\\eb67"}),n.telescope=new n("telescope",{fontCharacter:"\\eb68"}),n.textSize=new n("text-size",{fontCharacter:"\\eb69"}),n.threeBars=new n("three-bars",{fontCharacter:"\\eb6a"}),n.thumbsdown=new n("thumbsdown",{fontCharacter:"\\eb6b"}),n.thumbsup=new n("thumbsup",{fontCharacter:"\\eb6c"}),n.tools=new n("tools",{fontCharacter:"\\eb6d"}),n.triangleDown=new n("triangle-down",{fontCharacter:"\\eb6e"}),n.triangleLeft=new n("triangle-left",{fontCharacter:"\\eb6f"}),n.triangleRight=new n("triangle-right",{fontCharacter:"\\eb70"}),n.triangleUp=new n("triangle-up",{fontCharacter:"\\eb71"}),n.twitter=new n("twitter",{fontCharacter:"\\eb72"}),n.unfold=new n("unfold",{fontCharacter:"\\eb73"}),n.unlock=new n("unlock",{fontCharacter:"\\eb74"}),n.unmute=new n("unmute",{fontCharacter:"\\eb75"}),n.unverified=new n("unverified",{fontCharacter:"\\eb76"}),n.verified=new n("verified",{fontCharacter:"\\eb77"}),n.versions=new n("versions",{fontCharacter:"\\eb78"}),n.vmActive=new n("vm-active",{fontCharacter:"\\eb79"}),n.vmOutline=new n("vm-outline",{fontCharacter:"\\eb7a"}),n.vmRunning=new n("vm-running",{fontCharacter:"\\eb7b"}),n.watch=new n("watch",{fontCharacter:"\\eb7c"}),n.whitespace=new n("whitespace",{fontCharacter:"\\eb7d"}),n.wholeWord=new n("whole-word",{fontCharacter:"\\eb7e"}),n.window=new n("window",{fontCharacter:"\\eb7f"}),n.wordWrap=new n("word-wrap",{fontCharacter:"\\eb80"}),n.zoomIn=new n("zoom-in",{fontCharacter:"\\eb81"}),n.zoomOut=new n("zoom-out",{fontCharacter:"\\eb82"}),n.listFilter=new n("list-filter",{fontCharacter:"\\eb83"}),n.listFlat=new n("list-flat",{fontCharacter:"\\eb84"}),n.listSelection=new n("list-selection",{fontCharacter:"\\eb85"}),n.selection=new n("selection",{fontCharacter:"\\eb85"}),n.listTree=new n("list-tree",{fontCharacter:"\\eb86"}),n.debugBreakpointFunctionUnverified=new n("debug-breakpoint-function-unverified",{fontCharacter:"\\eb87"}),n.debugBreakpointFunction=new n("debug-breakpoint-function",{fontCharacter:"\\eb88"}),n.debugBreakpointFunctionDisabled=new n("debug-breakpoint-function-disabled",{fontCharacter:"\\eb88"}),n.debugStackframeActive=new n("debug-stackframe-active",{fontCharacter:"\\eb89"}),n.debugStackframeDot=new n("debug-stackframe-dot",{fontCharacter:"\\eb8a"}),n.debugStackframe=new n("debug-stackframe",{fontCharacter:"\\eb8b"}),n.debugStackframeFocused=new n("debug-stackframe-focused",{fontCharacter:"\\eb8b"}),n.debugBreakpointUnsupported=new n("debug-breakpoint-unsupported",{fontCharacter:"\\eb8c"}),n.symbolString=new n("symbol-string",{fontCharacter:"\\eb8d"}),n.debugReverseContinue=new n("debug-reverse-continue",{fontCharacter:"\\eb8e"}),n.debugStepBack=new n("debug-step-back",{fontCharacter:"\\eb8f"}),n.debugRestartFrame=new n("debug-restart-frame",{fontCharacter:"\\eb90"}),n.callIncoming=new n("call-incoming",{fontCharacter:"\\eb92"}),n.callOutgoing=new n("call-outgoing",{fontCharacter:"\\eb93"}),n.menu=new n("menu",{fontCharacter:"\\eb94"}),n.expandAll=new n("expand-all",{fontCharacter:"\\eb95"}),n.feedback=new n("feedback",{fontCharacter:"\\eb96"}),n.groupByRefType=new n("group-by-ref-type",{fontCharacter:"\\eb97"}),n.ungroupByRefType=new n("ungroup-by-ref-type",{fontCharacter:"\\eb98"}),n.account=new n("account",{fontCharacter:"\\eb99"}),n.bellDot=new n("bell-dot",{fontCharacter:"\\eb9a"}),n.debugConsole=new n("debug-console",{fontCharacter:"\\eb9b"}),n.library=new n("library",{fontCharacter:"\\eb9c"}),n.output=new n("output",{fontCharacter:"\\eb9d"}),n.runAll=new n("run-all",{fontCharacter:"\\eb9e"}),n.syncIgnored=new n("sync-ignored",{fontCharacter:"\\eb9f"}),n.pinned=new n("pinned",{fontCharacter:"\\eba0"}),n.githubInverted=new n("github-inverted",{fontCharacter:"\\eba1"}),n.debugAlt=new n("debug-alt",{fontCharacter:"\\eb91"}),n.serverProcess=new n("server-process",{fontCharacter:"\\eba2"}),n.serverEnvironment=new n("server-environment",{fontCharacter:"\\eba3"}),n.pass=new n("pass",{fontCharacter:"\\eba4"}),n.stopCircle=new n("stop-circle",{fontCharacter:"\\eba5"}),n.playCircle=new n("play-circle",{fontCharacter:"\\eba6"}),n.record=new n("record",{fontCharacter:"\\eba7"}),n.debugAltSmall=new n("debug-alt-small",{fontCharacter:"\\eba8"}),n.vmConnect=new n("vm-connect",{fontCharacter:"\\eba9"}),n.cloud=new n("cloud",{fontCharacter:"\\ebaa"}),n.merge=new n("merge",{fontCharacter:"\\ebab"}),n.exportIcon=new n("export",{fontCharacter:"\\ebac"}),n.graphLeft=new n("graph-left",{fontCharacter:"\\ebad"}),n.magnet=new n("magnet",{fontCharacter:"\\ebae"}),n.notebook=new n("notebook",{fontCharacter:"\\ebaf"}),n.redo=new n("redo",{fontCharacter:"\\ebb0"}),n.checkAll=new n("check-all",{fontCharacter:"\\ebb1"}),n.pinnedDirty=new n("pinned-dirty",{fontCharacter:"\\ebb2"}),n.passFilled=new n("pass-filled",{fontCharacter:"\\ebb3"}),n.circleLargeFilled=new n("circle-large-filled",{fontCharacter:"\\ebb4"}),n.circleLargeOutline=new n("circle-large-outline",{fontCharacter:"\\ebb5"}),n.combine=new n("combine",{fontCharacter:"\\ebb6"}),n.gather=new n("gather",{fontCharacter:"\\ebb6"}),n.table=new n("table",{fontCharacter:"\\ebb7"}),n.variableGroup=new n("variable-group",{fontCharacter:"\\ebb8"}),n.typeHierarchy=new n("type-hierarchy",{fontCharacter:"\\ebb9"}),n.typeHierarchySub=new n("type-hierarchy-sub",{fontCharacter:"\\ebba"}),n.typeHierarchySuper=new n("type-hierarchy-super",{fontCharacter:"\\ebbb"}),n.gitPullRequestCreate=new n("git-pull-request-create",{fontCharacter:"\\ebbc"}),n.runAbove=new n("run-above",{fontCharacter:"\\ebbd"}),n.runBelow=new n("run-below",{fontCharacter:"\\ebbe"}),n.notebookTemplate=new n("notebook-template",{fontCharacter:"\\ebbf"}),n.debugRerun=new n("debug-rerun",{fontCharacter:"\\ebc0"}),n.workspaceTrusted=new n("workspace-trusted",{fontCharacter:"\\ebc1"}),n.workspaceUntrusted=new n("workspace-untrusted",{fontCharacter:"\\ebc2"}),n.workspaceUnspecified=new n("workspace-unspecified",{fontCharacter:"\\ebc3"}),n.terminalCmd=new n("terminal-cmd",{fontCharacter:"\\ebc4"}),n.terminalDebian=new n("terminal-debian",{fontCharacter:"\\ebc5"}),n.terminalLinux=new n("terminal-linux",{fontCharacter:"\\ebc6"}),n.terminalPowershell=new n("terminal-powershell",{fontCharacter:"\\ebc7"}),n.terminalTmux=new n("terminal-tmux",{fontCharacter:"\\ebc8"}),n.terminalUbuntu=new n("terminal-ubuntu",{fontCharacter:"\\ebc9"}),n.terminalBash=new n("terminal-bash",{fontCharacter:"\\ebca"}),n.arrowSwap=new n("arrow-swap",{fontCharacter:"\\ebcb"}),n.copy=new n("copy",{fontCharacter:"\\ebcc"}),n.personAdd=new n("person-add",{fontCharacter:"\\ebcd"}),n.filterFilled=new n("filter-filled",{fontCharacter:"\\ebce"}),n.wand=new n("wand",{fontCharacter:"\\ebcf"}),n.debugLineByLine=new n("debug-line-by-line",{fontCharacter:"\\ebd0"}),n.inspect=new n("inspect",{fontCharacter:"\\ebd1"}),n.layers=new n("layers",{fontCharacter:"\\ebd2"}),n.layersDot=new n("layers-dot",{fontCharacter:"\\ebd3"}),n.layersActive=new n("layers-active",{fontCharacter:"\\ebd4"}),n.compass=new n("compass",{fontCharacter:"\\ebd5"}),n.compassDot=new n("compass-dot",{fontCharacter:"\\ebd6"}),n.compassActive=new n("compass-active",{fontCharacter:"\\ebd7"}),n.azure=new n("azure",{fontCharacter:"\\ebd8"}),n.issueDraft=new n("issue-draft",{fontCharacter:"\\ebd9"}),n.gitPullRequestClosed=new n("git-pull-request-closed",{fontCharacter:"\\ebda"}),n.gitPullRequestDraft=new n("git-pull-request-draft",{fontCharacter:"\\ebdb"}),n.debugAll=new n("debug-all",{fontCharacter:"\\ebdc"}),n.debugCoverage=new n("debug-coverage",{fontCharacter:"\\ebdd"}),n.runErrors=new n("run-errors",{fontCharacter:"\\ebde"}),n.folderLibrary=new n("folder-library",{fontCharacter:"\\ebdf"}),n.debugContinueSmall=new n("debug-continue-small",{fontCharacter:"\\ebe0"}),n.beakerStop=new n("beaker-stop",{fontCharacter:"\\ebe1"}),n.graphLine=new n("graph-line",{fontCharacter:"\\ebe2"}),n.graphScatter=new n("graph-scatter",{fontCharacter:"\\ebe3"}),n.pieChart=new n("pie-chart",{fontCharacter:"\\ebe4"}),n.bracket=new n("bracket",n.json.definition),n.bracketDot=new n("bracket-dot",{fontCharacter:"\\ebe5"}),n.bracketError=new n("bracket-error",{fontCharacter:"\\ebe6"}),n.lockSmall=new n("lock-small",{fontCharacter:"\\ebe7"}),n.azureDevops=new n("azure-devops",{fontCharacter:"\\ebe8"}),n.verifiedFilled=new n("verified-filled",{fontCharacter:"\\ebe9"})})(se||(se={}));class Rs{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&1792)>>>8}static getFontStyle(e){return(e&14336)>>>11}static getForeground(e){return(e&8372224)>>>14}static getBackground(e){return(e&4286578688)>>>23}static getClassNameFromMetadata(e){let t=this.getForeground(e),i="mtk"+t,s=this.getFontStyle(e);return s&1&&(i+=" mtki"),s&2&&(i+=" mtkb"),s&4&&(i+=" mtku"),i}static getInlineStyleFromMetadata(e,t){const i=this.getForeground(e),s=this.getFontStyle(e);let r=`color: ${t[i]};`;return s&1&&(r+="font-style: italic;"),s&2&&(r+="font-weight: bold;"),s&4&&(r+="text-decoration: underline;"),r}}const tce=function(){let n=Object.create(null);return n[0]="symbol-method",n[1]="symbol-function",n[2]="symbol-constructor",n[3]="symbol-field",n[4]="symbol-variable",n[5]="symbol-class",n[6]="symbol-struct",n[7]="symbol-interface",n[8]="symbol-module",n[9]="symbol-property",n[10]="symbol-event",n[11]="symbol-operator",n[12]="symbol-unit",n[13]="symbol-value",n[14]="symbol-constant",n[15]="symbol-enum",n[16]="symbol-enum-member",n[17]="symbol-keyword",n[27]="symbol-snippet",n[18]="symbol-text",n[19]="symbol-color",n[20]="symbol-file",n[21]="symbol-reference",n[22]="symbol-customcolor",n[23]="symbol-folder",n[24]="symbol-type-parameter",n[25]="account",n[26]="issues",function(e){const t=n[e];let i=t&&Zw.get(t);return i||(console.info("No codicon found for CompletionItemKind "+e),i=se.symbolProperty),i.classNames}}();let gV=function(){let n=Object.create(null);return n.method=0,n.function=1,n.constructor=2,n.field=3,n.variable=4,n.class=5,n.struct=6,n.interface=7,n.module=8,n.property=9,n.event=10,n.operator=11,n.unit=12,n.value=13,n.constant=14,n.enum=15,n["enum-member"]=16,n.enumMember=16,n.keyword=17,n.snippet=27,n.text=18,n.color=19,n.file=20,n.reference=21,n.customcolor=22,n.folder=23,n["type-parameter"]=24,n.typeParameter=24,n.account=25,n.issue=26,function(e,t){let i=n[e];return typeof i=="undefined"&&!t&&(i=9),i}}();var Os;(function(n){n[n.Automatic=0]="Automatic",n[n.Explicit=1]="Explicit"})(Os||(Os={}));var HF;(function(n){n[n.Invoke=1]="Invoke",n[n.TriggerCharacter=2]="TriggerCharacter",n[n.ContentChange=3]="ContentChange"})(HF||(HF={}));var $F;(function(n){n[n.Text=0]="Text",n[n.Read=1]="Read",n[n.Write=2]="Write"})($F||($F={}));function ice(n){return n&&xe.isUri(n.uri)&&I.isIRange(n.range)&&(I.isIRange(n.originSelectionRange)||I.isIRange(n.targetSelectionRange))}var UF;(function(n){const e=new Map;e.set("file",0),e.set("module",1),e.set("namespace",2),e.set("package",3),e.set("class",4),e.set("method",5),e.set("property",6),e.set("field",7),e.set("constructor",8),e.set("enum",9),e.set("interface",10),e.set("function",11),e.set("variable",12),e.set("constant",13),e.set("string",14),e.set("number",15),e.set("boolean",16),e.set("array",17),e.set("object",18),e.set("key",19),e.set("null",20),e.set("enum-member",21),e.set("struct",22),e.set("event",23),e.set("operator",24),e.set("type-parameter",25);const t=new Map;t.set(0,"file"),t.set(1,"module"),t.set(2,"namespace"),t.set(3,"package"),t.set(4,"class"),t.set(5,"method"),t.set(6,"property"),t.set(7,"field"),t.set(8,"constructor"),t.set(9,"enum"),t.set(10,"interface"),t.set(11,"function"),t.set(12,"variable"),t.set(13,"constant"),t.set(14,"string"),t.set(15,"number"),t.set(16,"boolean"),t.set(17,"array"),t.set(18,"object"),t.set(19,"key"),t.set(20,"null"),t.set(21,"enum-member"),t.set(22,"struct"),t.set(23,"event"),t.set(24,"operator"),t.set(25,"type-parameter");function i(o){return e.get(o)}n.fromString=i;function s(o){return t.get(o)}n.toString=s;function r(o,a){const l=t.get(o);let c=l&&Zw.get("symbol-"+l);return c||(console.info("No codicon found for SymbolKind "+o),c=se.symbolProperty),`${a?"inline":"block"} ${c.classNames}`}n.toCssClassName=r})(UF||(UF={}));class ao{constructor(e){this.value=e}}ao.Comment=new ao("comment");ao.Imports=new ao("imports");ao.Region=new ao("region");var jF;(function(n){n[n.Other=0]="Other",n[n.Type=1]="Type",n[n.Parameter=2]="Parameter"})(jF||(jF={}));const Xw=new Kt,kE=new Kt,Hr=new Kt,YA=new Kt,EE=new Kt,o_=new Kt,IE=new Kt,Qw=new Kt,nce=new Kt,a_=new Kt,Jw=new Kt,eC=new Kt,tC=new Kt,TE=new Kt,NE=new Kt,ea=new Kt,Jp=new Kt,Rl=new Kt,pV=new Kt,mV=new Kt,Vf=new Kt,sce=new Kt,AE=new Kt,Wf=new Kt,_V=new Kt,Zt=new Qle;class rce{clone(){return this}equals(e){return this===e}}const g1=new rce,dc="vs.editor.nullMode";function oce(n,e,t,i){return new IA([new o1(i,"",n)],t)}function bV(n,e,t,i){let s=new Uint32Array(2);return s[0]=i,s[1]=(n<<0|0<<8|0<<11|1<<14|2<<23)>>>0,new a1(s,t===null?g1:t)}const ace="editorWorkerService",Oc=Xe(ace),Hn=Xe("modeService"),oa=Xe("textModelService"),lce="$initialize";let qF=!1;function ME(n){!T0||(qF||(qF=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(n.message))}class cce{constructor(e,t,i,s){this.vsWorker=e,this.req=t,this.method=i,this.args=s,this.type=0}}class KF{constructor(e,t,i,s){this.vsWorker=e,this.seq=t,this.res=i,this.err=s,this.type=1}}class hce{constructor(e,t,i,s){this.vsWorker=e,this.req=t,this.eventName=i,this.arg=s,this.type=2}}class uce{constructor(e,t,i){this.vsWorker=e,this.req=t,this.event=i,this.type=3}}class dce{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class fce{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const i=String(++this._lastSentReq);return new Promise((s,r)=>{this._pendingReplies[i]={resolve:s,reject:r},this._send(new cce(this._workerId,i,e,t))})}listen(e,t){let i=null;const s=new R({onFirstListenerAdd:()=>{i=String(++this._lastSentReq),this._pendingEmitters.set(i,s),this._send(new hce(this._workerId,i,e,t))},onLastListenerRemove:()=>{this._pendingEmitters.delete(i),this._send(new dce(this._workerId,i)),i=null}});return s.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}let t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let i=e.err;e.err.$isError&&(i=new Error,i.name=e.err.name,i.message=e.err.message,i.stack=e.err.stack),t.reject(i);return}t.resolve(e.res)}_handleRequestMessage(e){let t=e.req;this._handler.handleMessage(e.method,e.args).then(s=>{this._send(new KF(this._workerId,t,s,void 0))},s=>{s.detail instanceof Error&&(s.detail=bF(s.detail)),this._send(new KF(this._workerId,t,void 0,bF(s)))})}_handleSubscribeEventMessage(e){const t=e.req,i=this._handler.handleEvent(e.eventName,e.arg)(s=>{this._send(new uce(this._workerId,t,s))});this._pendingEvents.set(t,i)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){let t=[];if(e.type===0)for(let i=0;i<e.args.length;i++)e.args[i]instanceof ArrayBuffer&&t.push(e.args[i]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class gce extends q{constructor(e,t,i){super();let s=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",c=>{this._protocol.handleMessage(c)},c=>{s&&s(c)})),this._protocol=new fce({sendMessage:(c,h)=>{this._worker.postMessage(c,h)},handleMessage:(c,h)=>{if(typeof i[c]!="function")return Promise.reject(new Error("Missing method "+c+" on main thread host."));try{return Promise.resolve(i[c].apply(i,h))}catch(u){return Promise.reject(u)}},handleEvent:(c,h)=>{if(wV(c)){const u=i[c].call(i,h);if(typeof u!="function")throw new Error(`Missing dynamic event ${c} on main thread host.`);return u}if(vV(c)){const u=i[c];if(typeof u!="function")throw new Error(`Missing event ${c} on main thread host.`);return u}throw new Error(`Malformed event name ${c}`)}}),this._protocol.setWorkerId(this._worker.getId());let r=null;typeof It.require!="undefined"&&typeof It.require.getConfig=="function"?r=It.require.getConfig():typeof It.requirejs!="undefined"&&(r=It.requirejs.s.contexts._.config);const o=UA(i);this._onModuleLoaded=this._protocol.sendMessage(lce,[this._worker.getId(),JSON.parse(JSON.stringify(r)),t,o]);const a=(c,h)=>this._request(c,h),l=(c,h)=>this._protocol.listen(c,h);this._lazyProxy=new Promise((c,h)=>{s=h,this._onModuleLoaded.then(u=>{c(pce(u,a,l))},u=>{h(u),this._onError("Worker failed to load "+t,u)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((i,s)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(i,s)},s)})}_onError(e,t){console.error(e),console.info(t)}}function vV(n){return n[0]==="o"&&n[1]==="n"&&Tl(n.charCodeAt(2))}function wV(n){return/^onDynamic/.test(n)&&Tl(n.charCodeAt(9))}function pce(n,e,t){const i=o=>function(){const a=Array.prototype.slice.call(arguments,0);return e(o,a)},s=o=>function(a){return t(o,a)};let r={};for(const o of n){if(wV(o)){r[o]=s(o);continue}if(vV(o)){r[o]=t(o,void 0);continue}r[o]=i(o)}return r}var kx;const GF=(kx=window.trustedTypes)===null||kx===void 0?void 0:kx.createPolicy("defaultWorkerFactory",{createScriptURL:n=>n});function mce(n,e){if(It.MonacoEnvironment){if(typeof It.MonacoEnvironment.getWorker=="function")return It.MonacoEnvironment.getWorker(n,e);if(typeof It.MonacoEnvironment.getWorkerUrl=="function"){const t=It.MonacoEnvironment.getWorkerUrl(n,e);return new Worker(GF?GF.createScriptURL(t):t,{name:e})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function _ce(n){return typeof n.then=="function"}class bce{constructor(e,t,i,s,r){this.id=t;const o=mce("workerMain.js",i);_ce(o)?this.worker=o:this.worker=Promise.resolve(o),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(l){s(l.data)},a.onmessageerror=r,typeof a.addEventListener=="function"&&a.addEventListener("error",r)})}getId(){return this.id}postMessage(e,t){this.worker&&this.worker.then(i=>i.postMessage(e,t))}dispose(){this.worker&&this.worker.then(e=>e.terminate()),this.worker=null}}class p1{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,i){let s=++p1.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new bce(e,s,this._label||"anonymous"+s,t,r=>{ME(r),this._webWorkerFailedBeforeError=r,i(r)})}}p1.LAST_WORKER_ID=0;var wi;(function(n){n[n.None=0]="None",n[n.Indent=1]="Indent",n[n.IndentOutdent=2]="IndentOutdent",n[n.Outdent=3]="Outdent"})(wi||(wi={}));class Ex{constructor(e){if(this._standardAutoClosingPairConditionalBrand=void 0,this.open=e.open,this.close=e.close,this._standardTokenMask=0,Array.isArray(e.notIn))for(let t=0,i=e.notIn.length;t<i;t++)switch(e.notIn[t]){case"string":this._standardTokenMask|=2;break;case"comment":this._standardTokenMask|=1;break;case"regex":this._standardTokenMask|=4;break}}isOK(e){return(this._standardTokenMask&e)===0}}class vce{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)cp(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),cp(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),cp(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),cp(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&cp(this.autoClosingPairsCloseSingleChar,t.close,t)}}function cp(n,e,t){n.has(e)?n.get(e).push(t):n.set(e,[t])}function Db(n,e){let t=n.getCount(),i=n.findTokenIndexAtOffset(e),s=n.getLanguageId(i),r=i;for(;r+1<t&&n.getLanguageId(r+1)===s;)r++;let o=i;for(;o>0&&n.getLanguageId(o-1)===s;)o--;return new wce(n,s,o,r+1,n.getStartOffset(o),n.getEndOffset(r))}class wce{constructor(e,t,i,s,r,o){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=i,this._lastTokenIndex=s,this.firstCharOffset=r,this._lastCharOffset=o}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}function ko(n){return(n&7)!==0}class zf{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new Ex(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new Ex({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.colorizedBracketPairs?this._colorizedBracketPairs=YF(e.colorizedBracketPairs.map(t=>[t[0],t[1]])):e.brackets?this._colorizedBracketPairs=YF(e.brackets.map(t=>[t[0],t[1]]).filter(t=>!(t[0]==="<"&&t[1]===">"))):this._colorizedBracketPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new Ex({open:t.open,close:t.close||""}))}this._autoCloseBefore=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:zf.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}static shouldAutoClosePair(e,t,i){if(t.getTokenCount()===0)return!0;const s=t.findTokenIndexAtOffset(i-2),r=t.getStandardTokenType(s);return e.isOK(r)}getSurroundingPairs(){return this._surroundingPairs}getColorizedBrackets(){return this._colorizedBracketPairs}}zf.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=`;:.,=}])> 
	`;function YF(n){return n.filter(([e,t])=>e!==""&&t!=="")}let Ix;function CV(){return Ix||(Ix=new TextDecoder("UTF-16LE")),Ix}let Tx;function Cce(){return Tx||(Tx=new TextDecoder("UTF-16BE")),Tx}let Nx;function yV(){return Nx||(Nx=b9()?CV():Cce()),Nx}const SV=typeof TextDecoder!="undefined";let lu,RE;SV?(lu=n=>new Sce(n),RE=yce):(lu=n=>new xce,RE=xV);function yce(n,e,t){const i=new Uint16Array(n.buffer,e,t);return t>0&&(i[0]===65279||i[0]===65534)?xV(n,e,t):CV().decode(i)}function xV(n,e,t){let i=[],s=0;for(let r=0;r<t;r++){const o=lle(n,e);e+=2,i[s++]=String.fromCharCode(o)}return i.join("")}class Sce{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return yV().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}write1(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||Ri(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCII(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIIString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let i=0;i<t;i++)this._buffer[this._bufferLength++]=e.charCodeAt(i)}}class xce{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCII(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCIIString(e){this._pieces[this._piecesLen++]=e}}class iC{constructor(e,t,i,s,r,o){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=i,this.close=s,this.forwardRegex=r,this.reversedRegex=o,this._openSet=iC._toSet(this.open),this._closeSet=iC._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const i of e)t.add(i);return t}}function Dce(n){const e=n.length;n=n.map(o=>[o[0].toLowerCase(),o[1].toLowerCase()]);const t=[];for(let o=0;o<e;o++)t[o]=o;const i=(o,a)=>{const[l,c]=o,[h,u]=a;return l===h||l===u||c===h||c===u},s=(o,a)=>{const l=Math.min(o,a),c=Math.max(o,a);for(let h=0;h<e;h++)t[h]===c&&(t[h]=l)};for(let o=0;o<e;o++){const a=n[o];for(let l=o+1;l<e;l++){const c=n[l];i(a,c)&&s(t[o],t[l])}}const r=[];for(let o=0;o<e;o++){let a=[],l=[];for(let c=0;c<e;c++)if(t[c]===o){const[h,u]=n[c];a.push(h),l.push(u)}a.length>0&&r.push({open:a,close:l})}return r}class Lce{constructor(e,t){this._richEditBracketsBrand=void 0;const i=Dce(t);this.brackets=i.map((s,r)=>new iC(e,r,s.open,s.close,kce(s.open,s.close,i,r),Ece(s.open,s.close,i,r))),this.forwardRegex=Ice(this.brackets),this.reversedRegex=Tce(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const s of this.brackets){for(const r of s.open)this.textIsBracket[r]=s,this.textIsOpenBracket[r]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,r.length);for(const r of s.close)this.textIsBracket[r]=s,this.textIsOpenBracket[r]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,r.length)}}}function DV(n,e,t,i){for(let s=0,r=e.length;s<r;s++){if(s===t)continue;const o=e[s];for(const a of o.open)a.indexOf(n)>=0&&i.push(a);for(const a of o.close)a.indexOf(n)>=0&&i.push(a)}}function LV(n,e){return n.length-e.length}function m1(n){if(n.length<=1)return n;const e=[],t=new Set;for(const i of n)t.has(i)||(e.push(i),t.add(i));return e}function kce(n,e,t,i){let s=[];s=s.concat(n),s=s.concat(e);for(let r=0,o=s.length;r<o;r++)DV(s[r],t,i,s);return s=m1(s),s.sort(LV),s.reverse(),_1(s)}function Ece(n,e,t,i){let s=[];s=s.concat(n),s=s.concat(e);for(let r=0,o=s.length;r<o;r++)DV(s[r],t,i,s);return s=m1(s),s.sort(LV),s.reverse(),_1(s.map(ZA))}function Ice(n){let e=[];for(const t of n){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=m1(e),_1(e)}function Tce(n){let e=[];for(const t of n){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=m1(e),_1(e.map(ZA))}function Nce(n){const e=/^[\w ]+$/.test(n);return n=so(n),e?`\\b${n}\\b`:n}function _1(n){let e=`(${n.map(Nce).join(")|(")})`;return Q9(e,!0)}const ZA=function(){function n(i){if(SV){const s=new Uint16Array(i.length);let r=0;for(let o=i.length-1;o>=0;o--)s[r++]=i.charCodeAt(o);return yV().decode(s)}else{let s=[],r=0;for(let o=i.length-1;o>=0;o--)s[r++]=i.charAt(o);return s.join("")}}let e=null,t=null;return function(s){return e!==s&&(e=s,t=n(e)),t}}();class nr{static _findPrevBracketInText(e,t,i,s){let r=i.match(e);if(!r)return null;let o=i.length-(r.index||0),a=r[0].length,l=s+o;return new I(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,i,s,r){const a=ZA(i).substring(i.length-r,i.length-s);return this._findPrevBracketInText(e,t,a,s)}static findNextBracketInText(e,t,i,s){let r=i.match(e);if(!r)return null;let o=r.index||0,a=r[0].length;if(a===0)return null;let l=s+o;return new I(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,i,s,r){const o=i.substring(s,r);return this.findNextBracketInText(e,t,o,s)}}class Ace{constructor(e){this._richEditBrackets=e}getElectricCharacters(){let e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const i of t.close){const s=i.charAt(i.length-1);e.push(s)}return e=e.filter((t,i,s)=>s.indexOf(t)===i),e}onElectricCharacter(e,t,i){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const s=t.findTokenIndexAtOffset(i-1);if(ko(t.getStandardTokenType(s)))return null;const r=this._richEditBrackets.reversedRegex,o=t.getLineContent().substring(0,i-1)+e,a=nr.findPrevBracketInRange(r,1,o,0,o.length);if(!a)return null;const l=o.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const h=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(h)?{matchOpenBracket:l}:null}}function Lb(n){return n.global&&(n.lastIndex=0),!0}class Mce{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&Lb(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&Lb(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&Lb(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&Lb(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class Vd{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const i=Vd._createOpenBracketRegExp(t[0]),s=Vd._createCloseBracketRegExp(t[1]);i&&s&&this._brackets.push({open:t[0],openRegExp:i,close:t[1],closeRegExp:s})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,i,s){if(e>=3)for(let r=0,o=this._regExpRules.length;r<o;r++){let a=this._regExpRules[r];if([{reg:a.beforeText,text:i},{reg:a.afterText,text:s},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&i.length>0&&s.length>0)for(let r=0,o=this._brackets.length;r<o;r++){let a=this._brackets[r];if(a.openRegExp.test(i)&&a.closeRegExp.test(s))return{indentAction:wi.IndentOutdent}}if(e>=2&&i.length>0){for(let r=0,o=this._brackets.length;r<o;r++)if(this._brackets[r].openRegExp.test(i))return{indentAction:wi.Indent}}return null}static _createOpenBracketRegExp(e){let t=so(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",Vd._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=so(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,Vd._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return Ie(t),null}}}class Rce{constructor(){this.data=new Map}add(e,t){Mv(oo(e)),Mv(An(t)),Mv(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const $i=new Rce,b1={JSONContribution:"base.contributions.json"};function Oce(n){return n.length>0&&n.charAt(n.length-1)==="#"?n.substring(0,n.length-1):n}class Fce{constructor(){this._onDidChangeSchema=new R,this.schemasById={}}registerSchema(e,t){this.schemasById[Oce(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const Pce=new Fce;$i.add(b1.JSONContribution,Pce);const Eg={Configuration:"base.contributions.configuration"},ZF={properties:{},patternProperties:{}},XF={properties:{},patternProperties:{}},QF={properties:{},patternProperties:{}},JF={properties:{},patternProperties:{}},eP={properties:{},patternProperties:{}},Ax={properties:{},patternProperties:{}},Mx="vscode://schemas/settings/resourceLanguage",tP=$i.as(b1.JSONContribution);class Bce{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new R,this._onDidUpdateConfiguration=new R,this.defaultValues={},this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:m("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.excludedConfigurationProperties={},tP.registerSchema(Mx,this.resourceLanguageSettingsSchema)}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=this.doRegisterConfigurations(e,t);tP.registerSchema(Mx,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(i)}registerOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t){const i=[];return e.forEach(s=>{i.push(...this.validateAndRegisterProperties(s,t,s.extensionInfo)),this.configurationContributors.push(s),this.registerJSONConfiguration(s)}),i}validateAndRegisterProperties(e,t=!0,i,s=3){var r;s=Ms(e.scope)?s:e.scope;let o=[],a=e.properties;if(a)for(let c in a){if(t&&Hce(c)){delete a[c];continue}const h=a[c];if(this.updatePropertyDefaultValue(c,h),XA.test(c)?h.scope=void 0:(h.scope=Ms(h.scope)?s:h.scope,h.restricted=Ms(h.restricted)?!!(!((r=i==null?void 0:i.restrictedConfigurations)===null||r===void 0)&&r.includes(c)):h.restricted),a[c].hasOwnProperty("included")&&!a[c].included){this.excludedConfigurationProperties[c]=a[c],delete a[c];continue}else this.configurationProperties[c]=a[c];!a[c].deprecationMessage&&a[c].markdownDeprecationMessage&&(a[c].deprecationMessage=a[c].markdownDeprecationMessage),o.push(c)}let l=e.allOf;if(l)for(let c of l)o.push(...this.validateAndRegisterProperties(c,t,i,s));return o}getConfigurationProperties(){return this.configurationProperties}registerJSONConfiguration(e){const t=i=>{let s=i.properties;if(s)for(const o in s)this.updateSchema(o,s[o]);let r=i.allOf;r&&r.forEach(t)};t(e)}updateSchema(e,t){switch(ZF.properties[e]=t,t.scope){case 1:XF.properties[e]=t;break;case 2:QF.properties[e]=t;break;case 6:JF.properties[e]=t;break;case 3:eP.properties[e]=t;break;case 4:Ax.properties[e]=t;break;case 5:Ax.properties[e]=t,this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,i={type:"object",description:m("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:m("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Mx};this.updatePropertyDefaultValue(t,i),ZF.properties[t]=i,XF.properties[t]=i,QF.properties[t]=i,JF.properties[t]=i,eP.properties[t]=i,Ax.properties[t]=i}this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){let i=this.defaultValues[e];vn(i)&&(i=t.default),vn(i)&&(i=zce(t.type)),t.default=i}}const Vce="\\[.*\\]$",XA=new RegExp(Vce);function Wce(n){return n.substring(1,n.length-1)}function zce(n){switch(Array.isArray(n)?n[0]:n){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const kV=new Bce;$i.add(Eg.Configuration,kV);function Hce(n){return n.trim()?XA.test(n)?m("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",n):kV.getConfigurationProperties()[n]!==void 0?m("config.property.duplicate","Cannot register '{0}'. This property is already registered.",n):null:m("config.property.empty","Cannot register an empty property")}const si=Xe("configurationService");function EV(n,e){const t=Object.create(null);for(let i in n)QA(t,i,n[i],e);return t}function QA(n,e,t,i){const s=e.split("."),r=s.pop();let o=n;for(let a=0;a<s.length;a++){let l=s[a],c=o[l];switch(typeof c){case"undefined":c=o[l]=Object.create(null);break;case"object":break;default:i(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}o=c}if(typeof o=="object"&&o!==null)try{o[r]=t}catch{i(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}else i(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}function $ce(n,e){const t=e.split(".");IV(n,t)}function IV(n,e){const t=e.shift();if(e.length===0){delete n[t];return}if(Object.keys(n).indexOf(t)!==-1){const i=n[t];typeof i=="object"&&!Array.isArray(i)&&(IV(i,e),Object.keys(i).length===0&&delete n[t])}}function Uce(n,e,t){function i(o,a){let l=o;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const s=e.split("."),r=i(n,s);return typeof r=="undefined"?t:r}function jce(){const n=$i.as(Eg.Configuration).getConfigurationProperties();return Object.keys(n)}function qce(){const n=Object.create(null),e=$i.as(Eg.Configuration).getConfigurationProperties();for(let t in e){let i=e[t].default;QA(n,t,i,s=>console.error(`Conflict in default settings: ${s}`))}return n}class Nl{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}const TV=[];function Ru(n,e,t){e instanceof Nl||(e=new Nl(e,[],t)),TV.push([n,e])}function Kce(){return TV}var Gce=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},iP=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};class Rx{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const F0=Xe("languageConfigurationService");let nC=class extends q{constructor(e,t){super(),this.configurationService=e,this.modeService=t,this.onDidChangeEmitter=this._register(new R),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const i=new Set(Object.values(OE));this._register(this.configurationService.onDidChangeConfiguration(s=>{const r=s.change.keys.some(a=>i.has(a)),o=s.change.overrides.filter(([a,l])=>l.some(c=>i.has(c))).map(([a])=>this.modeService.validateLanguageId(a));if(r)this.configurations.clear(),this.onDidChangeEmitter.fire(new Rx(void 0));else for(const a of o)a&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new Rx(a)))})),this._register(Qt.onDidChange(s=>{this.configurations.delete(s.languageId),this.onDidChangeEmitter.fire(new Rx(s.languageId))}))}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=Yce(e,this.configurationService,this.modeService),this.configurations.set(e,t)),t}};nC=Gce([iP(0,si),iP(1,Hn)],nC);function Yce(n,e,t){let i=Qt.getLanguageConfiguration(n);if(!i){const a=t.validateLanguageId(n);if(!a)throw new Error("Unexpected languageId");i=new l_(a,{})}const s=Zce(i.languageId,e),r=NV([i.underlyingConfig,s]);return new l_(i.languageId,r)}const OE={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function Zce(n,e){const t=e.getValue(OE.brackets,{overrideIdentifier:n}),i=e.getValue(OE.colorizedBracketPairs,{overrideIdentifier:n});return{brackets:nP(t),colorizedBracketPairs:nP(i)}}function nP(n){if(!!Array.isArray(n))return n.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}class sP{constructor(e){this.languageId=e}}class Xce{constructor(){this._entries=new Map,this._onDidChange=new R,this.onDidChange=this._onDidChange.event}register(e,t,i=0){let s=this._entries.get(e);s||(s=new Qce(e),this._entries.set(e,s));const r=s.register(t,i);return this._onDidChange.fire(new sP(e)),Ze(()=>{r.dispose(),this._onDidChange.fire(new sP(e))})}getLanguageConfiguration(e){let t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}getIndentationRules(e){const t=this.getLanguageConfiguration(e);return t&&t.indentationRules||null}_getElectricCharacterSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.electricCharacter||null}getElectricCharacters(e){let t=this._getElectricCharacterSupport(e);return t?t.getElectricCharacters():[]}onElectricCharacter(e,t,i){let s=Db(t,i-1),r=this._getElectricCharacterSupport(s.languageId);return r?r.onElectricCharacter(e,s,i-s.firstCharOffset):null}getComments(e){let t=this.getLanguageConfiguration(e);return t&&t.comments||null}_getCharacterPairSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.characterPair||null}getAutoClosingPairs(e){const t=this._getCharacterPairSupport(e);return new vce(t?t.getAutoClosingPairs():[])}getAutoCloseBeforeSet(e){let t=this._getCharacterPairSupport(e);return t?t.getAutoCloseBeforeSet():zf.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED}getSurroundingPairs(e){let t=this._getCharacterPairSupport(e);return t?t.getSurroundingPairs():[]}shouldAutoClosePair(e,t,i){const s=Db(t,i-1);return zf.shouldAutoClosePair(e,s,i-s.firstCharOffset)}getWordDefinition(e){let t=this.getLanguageConfiguration(e);return Pw(t&&t.wordDefinition||null)}getFoldingRules(e){let t=this.getLanguageConfiguration(e);return t?t.foldingRules:{}}getIndentRulesSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.indentRulesSupport||null}getPrecedingValidLine(e,t,i){let s=e.getLanguageIdAtPosition(t,0);if(t>1){let r,o=-1;for(r=t-1;r>=1;r--){if(e.getLanguageIdAtPosition(r,0)!==s)return o;let a=e.getLineContent(r);if(i.shouldIgnore(a)||/^\s+$/.test(a)||a===""){o=r;continue}return r}}return-1}getInheritIndentForLine(e,t,i,s=!0){if(e<4)return null;const r=this.getIndentRulesSupport(t.getLanguageId());if(!r)return null;if(i<=1)return{indentation:"",action:null};const o=this.getPrecedingValidLine(t,i,r);if(o<0)return null;if(o<1)return{indentation:"",action:null};const a=t.getLineContent(o);if(r.shouldIncrease(a)||r.shouldIndentNextLine(a))return{indentation:ci(a),action:wi.Indent,line:o};if(r.shouldDecrease(a))return{indentation:ci(a),action:null,line:o};{if(o===1)return{indentation:ci(t.getLineContent(o)),action:null,line:o};const l=o-1,c=r.getIndentMetadata(t.getLineContent(l));if(!(c&3)&&c&4){let h=0;for(let u=l-1;u>0;u--)if(!r.shouldIndentNextLine(t.getLineContent(u))){h=u;break}return{indentation:ci(t.getLineContent(h+1)),action:null,line:h+1}}if(s)return{indentation:ci(t.getLineContent(o)),action:null,line:o};for(let h=o;h>0;h--){const u=t.getLineContent(h);if(r.shouldIncrease(u))return{indentation:ci(u),action:wi.Indent,line:h};if(r.shouldIndentNextLine(u)){let d=0;for(let f=h-1;f>0;f--)if(!r.shouldIndentNextLine(t.getLineContent(h))){d=f;break}return{indentation:ci(t.getLineContent(d+1)),action:null,line:d+1}}else if(r.shouldDecrease(u))return{indentation:ci(u),action:null,line:h}}return{indentation:ci(t.getLineContent(1)),action:null,line:1}}}getGoodIndentForLine(e,t,i,s,r){if(e<4)return null;const o=this.getLanguageConfiguration(i);if(!o)return null;const a=this.getIndentRulesSupport(i);if(!a)return null;const l=this.getInheritIndentForLine(e,t,s),c=t.getLineContent(s);if(l){const h=l.line;if(h!==void 0){const u=o.onEnter(e,"",t.getLineContent(h),"");if(u){let d=ci(t.getLineContent(h));return u.removeText&&(d=d.substring(0,d.length-u.removeText)),u.indentAction===wi.Indent||u.indentAction===wi.IndentOutdent?d=r.shiftIndent(d):u.indentAction===wi.Outdent&&(d=r.unshiftIndent(d)),a.shouldDecrease(c)&&(d=r.unshiftIndent(d)),u.appendText&&(d+=u.appendText),ci(d)}}return a.shouldDecrease(c)?l.action===wi.Indent?l.indentation:r.unshiftIndent(l.indentation):l.action===wi.Indent?r.shiftIndent(l.indentation):l.indentation}return null}getIndentForEnter(e,t,i,s){if(e<4)return null;t.forceTokenization(i.startLineNumber);const r=t.getLineTokens(i.startLineNumber),o=Db(r,i.startColumn-1),a=o.getLineContent();let l=!1,c;o.firstCharOffset>0&&r.getLanguageId(0)!==o.languageId?(l=!0,c=a.substr(0,i.startColumn-1-o.firstCharOffset)):c=r.getLineContent().substring(0,i.startColumn-1);let h;i.isEmpty()?h=a.substr(i.startColumn-1-o.firstCharOffset):h=this.getScopedLineTokens(t,i.endLineNumber,i.endColumn).getLineContent().substr(i.endColumn-1-o.firstCharOffset);const u=this.getIndentRulesSupport(o.languageId);if(!u)return null;const d=c,f=ci(c),g={getLineTokens:b=>t.getLineTokens(b),getLanguageId:()=>t.getLanguageId(),getLanguageIdAtPosition:(b,w)=>t.getLanguageIdAtPosition(b,w),getLineContent:b=>b===i.startLineNumber?d:t.getLineContent(b)},p=ci(r.getLineContent()),_=this.getInheritIndentForLine(e,g,i.startLineNumber+1);if(!_){const b=l?p:f;return{beforeEnter:b,afterEnter:b}}let v=l?p:_.indentation;return _.action===wi.Indent&&(v=s.shiftIndent(v)),u.shouldDecrease(h)&&(v=s.unshiftIndent(v)),{beforeEnter:l?p:f,afterEnter:v}}getIndentActionForType(e,t,i,s,r){if(e<4)return null;const o=this.getScopedLineTokens(t,i.startLineNumber,i.startColumn);if(o.firstCharOffset)return null;const a=this.getIndentRulesSupport(o.languageId);if(!a)return null;const l=o.getLineContent(),c=l.substr(0,i.startColumn-1-o.firstCharOffset);let h;if(i.isEmpty()?h=l.substr(i.startColumn-1-o.firstCharOffset):h=this.getScopedLineTokens(t,i.endLineNumber,i.endColumn).getLineContent().substr(i.endColumn-1-o.firstCharOffset),!a.shouldDecrease(c+h)&&a.shouldDecrease(c+s+h)){const u=this.getInheritIndentForLine(e,t,i.startLineNumber,!1);if(!u)return null;let d=u.indentation;return u.action!==wi.Indent&&(d=r.unshiftIndent(d)),d}return null}getIndentMetadata(e,t){const i=this.getIndentRulesSupport(e.getLanguageId());return!i||t<1||t>e.getLineCount()?null:i.getIndentMetadata(e.getLineContent(t))}getEnterAction(e,t,i){const s=this.getScopedLineTokens(t,i.startLineNumber,i.startColumn),r=this.getLanguageConfiguration(s.languageId);if(!r)return null;const o=s.getLineContent(),a=o.substr(0,i.startColumn-1-s.firstCharOffset);let l;i.isEmpty()?l=o.substr(i.startColumn-1-s.firstCharOffset):l=this.getScopedLineTokens(t,i.endLineNumber,i.endColumn).getLineContent().substr(i.endColumn-1-s.firstCharOffset);let c="";if(i.startLineNumber>1&&s.firstCharOffset===0){const p=this.getScopedLineTokens(t,i.startLineNumber-1);p.languageId===s.languageId&&(c=p.getLineContent())}const h=r.onEnter(e,c,a,l);if(!h)return null;const u=h.indentAction;let d=h.appendText;const f=h.removeText||0;d?u===wi.Indent&&(d="	"+d):u===wi.Indent||u===wi.IndentOutdent?d="	":d="";let g=this.getIndentationAtPosition(t,i.startLineNumber,i.startColumn);return f&&(g=g.substring(0,g.length-f)),{indentAction:u,appendText:d,removeText:f,indentation:g}}getIndentationAtPosition(e,t,i){const s=e.getLineContent(t);let r=ci(s);return r.length>i-1&&(r=r.substring(0,i-1)),r}getScopedLineTokens(e,t,i){e.forceTokenization(t);const s=e.getLineTokens(t),r=typeof i=="undefined"?e.getLineMaxColumn(t)-1:i-1;return Db(s,r)}}const Qt=new Xce;class Qce{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const i=new rP(e,t,++this._order);return this._entries.push(i),this._resolved=null,Ze(()=>{for(let s=0;s<this._entries.length;s++)if(this._entries[s]===i){this._entries.splice(s,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new l_(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(rP.cmp),NV(this._entries.map(e=>e.configuration)))}}function NV(n){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of n)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class rP{constructor(e,t,i){this.configuration=e,this.priority=t,this.order=i}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class l_{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new Vd(this.underlyingConfig):null,this.comments=l_._handleComments(this.underlyingConfig),this.characterPair=new zf(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||w9,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new Mce(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{}}getWordDefinition(){return Pw(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new Lce(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new Ace(this.brackets)),this._electricCharacter}onEnter(e,t,i,s){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,i,s):null}static _handleComments(e){let t=e.comments;if(!t)return null;let i={};if(t.lineComment&&(i.lineCommentToken=t.lineComment),t.blockComment){let[s,r]=t.blockComment;i.blockCommentStartToken=s,i.blockCommentEndToken=r}return i}}Ru(F0,nC);class kl{constructor(e,t,i,s){this.originalStart=e,this.originalLength=t,this.modifiedStart=i,this.modifiedLength=s}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class oP{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let i=0,s=e.length;i<s;i++)t[i]=e.charCodeAt(i);return t}}function Jce(n,e,t){return new Bo(new oP(n),new oP(e)).ComputeDiff(t).changes}class dd{static Assert(e,t){if(!e)throw new Error(t)}}class fd{static Copy(e,t,i,s,r){for(let o=0;o<r;o++)i[s+o]=e[t+o]}static Copy2(e,t,i,s,r){for(let o=0;o<r;o++)i[s+o]=e[t+o]}}class aP{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new kl(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class Bo{constructor(e,t,i=null){this.ContinueProcessingPredicate=i,this._originalSequence=e,this._modifiedSequence=t;const[s,r,o]=Bo._getElements(e),[a,l,c]=Bo._getElements(t);this._hasStrings=o&&c,this._originalStringElements=s,this._originalElementsOrHash=r,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(Bo._isStringArray(t)){const i=new Int32Array(t.length);for(let s=0,r=t.length;s<r;s++)i[s]=KA(t[s],0);return[t,i,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const i=Bo._getStrictElement(this._originalSequence,e),s=Bo._getStrictElement(this._modifiedSequence,t);return i===s}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,i,s,r){const o=[!1];let a=this.ComputeDiffRecursive(e,t,i,s,o);return r&&(a=this.PrettifyChanges(a)),{quitEarly:o[0],changes:a}}ComputeDiffRecursive(e,t,i,s,r){for(r[0]=!1;e<=t&&i<=s&&this.ElementsAreEqual(e,i);)e++,i++;for(;t>=e&&s>=i&&this.ElementsAreEqual(t,s);)t--,s--;if(e>t||i>s){let u;return i<=s?(dd.Assert(e===t+1,"originalStart should only be one more than originalEnd"),u=[new kl(e,0,i,s-i+1)]):e<=t?(dd.Assert(i===s+1,"modifiedStart should only be one more than modifiedEnd"),u=[new kl(e,t-e+1,i,0)]):(dd.Assert(e===t+1,"originalStart should only be one more than originalEnd"),dd.Assert(i===s+1,"modifiedStart should only be one more than modifiedEnd"),u=[]),u}const o=[0],a=[0],l=this.ComputeRecursionPoint(e,t,i,s,o,a,r),c=o[0],h=a[0];if(l!==null)return l;if(!r[0]){const u=this.ComputeDiffRecursive(e,c,i,h,r);let d=[];return r[0]?d=[new kl(c+1,t-(c+1)+1,h+1,s-(h+1)+1)]:d=this.ComputeDiffRecursive(c+1,t,h+1,s,r),this.ConcatenateChanges(u,d)}return[new kl(e,t-e+1,i,s-i+1)]}WALKTRACE(e,t,i,s,r,o,a,l,c,h,u,d,f,g,p,_,v,b){let w=null,C=null,y=new aP,D=t,S=i,x=f[0]-_[0]-s,k=-1073741824,F=this.m_forwardHistory.length-1;do{const A=x+e;A===D||A<S&&c[A-1]<c[A+1]?(u=c[A+1],g=u-x-s,u<k&&y.MarkNextChange(),k=u,y.AddModifiedElement(u+1,g),x=A+1-e):(u=c[A-1]+1,g=u-x-s,u<k&&y.MarkNextChange(),k=u-1,y.AddOriginalElement(u,g+1),x=A-1-e),F>=0&&(c=this.m_forwardHistory[F],e=c[0],D=1,S=c.length-1)}while(--F>=-1);if(w=y.getReverseChanges(),b[0]){let A=f[0]+1,z=_[0]+1;if(w!==null&&w.length>0){const H=w[w.length-1];A=Math.max(A,H.getOriginalEnd()),z=Math.max(z,H.getModifiedEnd())}C=[new kl(A,d-A+1,z,p-z+1)]}else{y=new aP,D=o,S=a,x=f[0]-_[0]-l,k=1073741824,F=v?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const A=x+r;A===D||A<S&&h[A-1]>=h[A+1]?(u=h[A+1]-1,g=u-x-l,u>k&&y.MarkNextChange(),k=u+1,y.AddOriginalElement(u+1,g+1),x=A+1-r):(u=h[A-1],g=u-x-l,u>k&&y.MarkNextChange(),k=u,y.AddModifiedElement(u+1,g+1),x=A-1-r),F>=0&&(h=this.m_reverseHistory[F],r=h[0],D=1,S=h.length-1)}while(--F>=-1);C=y.getChanges()}return this.ConcatenateChanges(w,C)}ComputeRecursionPoint(e,t,i,s,r,o,a){let l=0,c=0,h=0,u=0,d=0,f=0;e--,i--,r[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const g=t-e+(s-i),p=g+1,_=new Int32Array(p),v=new Int32Array(p),b=s-i,w=t-e,C=e-i,y=t-s,S=(w-b)%2===0;_[b]=e,v[w]=t,a[0]=!1;for(let x=1;x<=g/2+1;x++){let k=0,F=0;h=this.ClipDiagonalBound(b-x,x,b,p),u=this.ClipDiagonalBound(b+x,x,b,p);for(let z=h;z<=u;z+=2){z===h||z<u&&_[z-1]<_[z+1]?l=_[z+1]:l=_[z-1]+1,c=l-(z-b)-C;const H=l;for(;l<t&&c<s&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(_[z]=l,l+c>k+F&&(k=l,F=c),!S&&Math.abs(z-w)<=x-1&&l>=v[z])return r[0]=l,o[0]=c,H<=v[z]&&1447>0&&x<=1447+1?this.WALKTRACE(b,h,u,C,w,d,f,y,_,v,l,t,r,c,s,o,S,a):null}const A=(k-e+(F-i)-x)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(k,A))return a[0]=!0,r[0]=k,o[0]=F,A>0&&1447>0&&x<=1447+1?this.WALKTRACE(b,h,u,C,w,d,f,y,_,v,l,t,r,c,s,o,S,a):(e++,i++,[new kl(e,t-e+1,i,s-i+1)]);d=this.ClipDiagonalBound(w-x,x,w,p),f=this.ClipDiagonalBound(w+x,x,w,p);for(let z=d;z<=f;z+=2){z===d||z<f&&v[z-1]>=v[z+1]?l=v[z+1]-1:l=v[z-1],c=l-(z-w)-y;const H=l;for(;l>e&&c>i&&this.ElementsAreEqual(l,c);)l--,c--;if(v[z]=l,S&&Math.abs(z-b)<=x&&l<=_[z])return r[0]=l,o[0]=c,H>=_[z]&&1447>0&&x<=1447+1?this.WALKTRACE(b,h,u,C,w,d,f,y,_,v,l,t,r,c,s,o,S,a):null}if(x<=1447){let z=new Int32Array(u-h+2);z[0]=b-h+1,fd.Copy2(_,h,z,1,u-h+1),this.m_forwardHistory.push(z),z=new Int32Array(f-d+2),z[0]=w-d+1,fd.Copy2(v,d,z,1,f-d+1),this.m_reverseHistory.push(z)}}return this.WALKTRACE(b,h,u,C,w,d,f,y,_,v,l,t,r,c,s,o,S,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const i=e[t],s=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,r=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,o=i.originalLength>0,a=i.modifiedLength>0;for(;i.originalStart+i.originalLength<s&&i.modifiedStart+i.modifiedLength<r&&(!o||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!a||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){const c=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart);if(this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength)&&!c)break;i.originalStart++,i.modifiedStart++}let l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const i=e[t];let s=0,r=0;if(t>0){const u=e[t-1];s=u.originalStart+u.originalLength,r=u.modifiedStart+u.modifiedLength}const o=i.originalLength>0,a=i.modifiedLength>0;let l=0,c=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let u=1;;u++){const d=i.originalStart-u,f=i.modifiedStart-u;if(d<s||f<r||o&&!this.OriginalElementsAreEqual(d,d+i.originalLength)||a&&!this.ModifiedElementsAreEqual(f,f+i.modifiedLength))break;const p=(d===s&&f===r?5:0)+this._boundaryScore(d,i.originalLength,f,i.modifiedLength);p>c&&(c=p,l=u)}i.originalStart-=l,i.modifiedStart-=l;const h=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],h)){e[t-1]=h[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,i=e.length;t<i;t++){const s=e[t-1],r=e[t],o=r.originalStart-s.originalStart-s.originalLength,a=s.originalStart,l=r.originalStart+r.originalLength,c=l-a,h=s.modifiedStart,u=r.modifiedStart+r.modifiedLength,d=u-h;if(o<5&&c<20&&d<20){const f=this._findBetterContiguousSequence(a,c,h,d,o);if(f){const[g,p]=f;(g!==s.originalStart+s.originalLength||p!==s.modifiedStart+s.modifiedLength)&&(s.originalLength=g-s.originalStart,s.modifiedLength=p-s.modifiedStart,r.originalStart=g+o,r.modifiedStart=p+o,r.originalLength=l-r.originalStart,r.modifiedLength=u-r.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,i,s,r){if(t<r||s<r)return null;const o=e+t-r+1,a=i+s-r+1;let l=0,c=0,h=0;for(let u=e;u<o;u++)for(let d=i;d<a;d++){const f=this._contiguousSequenceScore(u,d,r);f>0&&f>l&&(l=f,c=u,h=d)}return l>0?[c,h]:null}_contiguousSequenceScore(e,t,i){let s=0;for(let r=0;r<i;r++){if(!this.ElementsAreEqual(e+r,t+r))return 0;s+=this._originalStringElements[e+r].length}return s}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,t,i,s){const r=this._OriginalRegionIsBoundary(e,t)?1:0,o=this._ModifiedRegionIsBoundary(i,s)?1:0;return r+o}ConcatenateChanges(e,t){let i=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],i)){const s=new Array(e.length+t.length-1);return fd.Copy(e,0,s,0,e.length-1),s[e.length-1]=i[0],fd.Copy(t,1,s,e.length,t.length-1),s}else{const s=new Array(e.length+t.length);return fd.Copy(e,0,s,0,e.length),fd.Copy(t,0,s,e.length,t.length),s}}ChangesOverlap(e,t,i){if(dd.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),dd.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const s=e.originalStart;let r=e.originalLength;const o=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(r=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),i[0]=new kl(s,r,o,a),!0}else return i[0]=null,!1}ClipDiagonalBound(e,t,i,s){if(e>=0&&e<s)return e;const r=i,o=s-i-1,a=t%2===0;if(e<0){const l=r%2===0;return a===l?0:1}else{const l=o%2===0;return a===l?s-1:s-2}}}const ehe=3;function AV(n,e,t,i){return new Bo(n,e,t).ComputeDiff(i)}class lP{constructor(e){const t=[],i=[];for(let s=0,r=e.length;s<r;s++)t[s]=FE(e[s],1),i[s]=PE(e[s],1);this.lines=e,this._startColumns=t,this._endColumns=i}getElements(){const e=[];for(let t=0,i=this.lines.length;t<i;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,i){const s=[],r=[],o=[];let a=0;for(let l=t;l<=i;l++){const c=this.lines[l],h=e?this._startColumns[l]:1,u=e?this._endColumns[l]:c.length+1;for(let d=h;d<u;d++)s[a]=c.charCodeAt(d-1),r[a]=l+1,o[a]=d,a++}return new the(s,r,o)}}class the{constructor(e,t,i){this._charCodes=e,this._lineNumbers=t,this._columns=i}getElements(){return this._charCodes}getStartLineNumber(e){return this._lineNumbers[e]}getStartColumn(e){return this._columns[e]}getEndLineNumber(e){return this._lineNumbers[e]}getEndColumn(e){return this._columns[e]+1}}class c_{constructor(e,t,i,s,r,o,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=i,this.originalEndColumn=s,this.modifiedStartLineNumber=r,this.modifiedStartColumn=o,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,i){let s,r,o,a,l,c,h,u;return e.originalLength===0?(s=0,r=0,o=0,a=0):(s=t.getStartLineNumber(e.originalStart),r=t.getStartColumn(e.originalStart),o=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1)),e.modifiedLength===0?(l=0,c=0,h=0,u=0):(l=i.getStartLineNumber(e.modifiedStart),c=i.getStartColumn(e.modifiedStart),h=i.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),u=i.getEndColumn(e.modifiedStart+e.modifiedLength-1)),new c_(s,r,o,a,l,c,h,u)}}function ihe(n){if(n.length<=1)return n;const e=[n[0]];let t=e[0];for(let i=1,s=n.length;i<s;i++){const r=n[i],o=r.originalStart-(t.originalStart+t.originalLength),a=r.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(o,a)<ehe?(t.originalLength=r.originalStart+r.originalLength-t.originalStart,t.modifiedLength=r.modifiedStart+r.modifiedLength-t.modifiedStart):(e.push(r),t=r)}return e}class em{constructor(e,t,i,s,r){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=i,this.modifiedEndLineNumber=s,this.charChanges=r}static createFromDiffResult(e,t,i,s,r,o,a){let l,c,h,u,d;if(t.originalLength===0?(l=i.getStartLineNumber(t.originalStart)-1,c=0):(l=i.getStartLineNumber(t.originalStart),c=i.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(h=s.getStartLineNumber(t.modifiedStart)-1,u=0):(h=s.getStartLineNumber(t.modifiedStart),u=s.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),o&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&r()){const f=i.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),g=s.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);let p=AV(f,g,r,!0).changes;a&&(p=ihe(p)),d=[];for(let _=0,v=p.length;_<v;_++)d.push(c_.createFromDiffChange(p[_],f,g))}return new em(l,c,h,u,d)}}class nhe{constructor(e,t,i){this.shouldComputeCharChanges=i.shouldComputeCharChanges,this.shouldPostProcessCharChanges=i.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=i.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=i.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new lP(e),this.modified=new lP(t),this.continueLineDiff=cP(i.maxComputationTime),this.continueCharDiff=cP(i.maxComputationTime===0?0:Math.min(i.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};const e=AV(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,i=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(em.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:i,changes:a}}const s=[];let r=0,o=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,h=c?c.originalStart:this.originalLines.length,u=c?c.modifiedStart:this.modifiedLines.length;for(;r<h&&o<u;){const d=this.originalLines[r],f=this.modifiedLines[o];if(d!==f){{let g=FE(d,1),p=FE(f,1);for(;g>1&&p>1;){const _=d.charCodeAt(g-2),v=f.charCodeAt(p-2);if(_!==v)break;g--,p--}(g>1||p>1)&&this._pushTrimWhitespaceCharChange(s,r+1,1,g,o+1,1,p)}{let g=PE(d,1),p=PE(f,1);const _=d.length+1,v=f.length+1;for(;g<_&&p<v;){const b=d.charCodeAt(g-1),w=d.charCodeAt(p-1);if(b!==w)break;g++,p++}(g<_||p<v)&&this._pushTrimWhitespaceCharChange(s,r+1,g,_,o+1,p,v)}}r++,o++}c&&(s.push(em.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),r+=c.originalLength,o+=c.modifiedLength)}return{quitEarly:i,changes:s}}_pushTrimWhitespaceCharChange(e,t,i,s,r,o,a){if(this._mergeTrimWhitespaceCharChange(e,t,i,s,r,o,a))return;let l;this.shouldComputeCharChanges&&(l=[new c_(t,i,t,s,r,o,r,a)]),e.push(new em(t,t,r,r,l))}_mergeTrimWhitespaceCharChange(e,t,i,s,r,o,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===r?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=r,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new c_(t,i,t,s,r,o,r,a)),!0):!1}}function FE(n,e){const t=Jn(n);return t===-1?e:t+1}function PE(n,e){const t=kg(n);return t===-1?e:t+2}function cP(n){if(n===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<n}function sC(n){return n<0?0:n>255?255:n|0}function gd(n){return n<0?0:n>4294967295?4294967295:n|0}class MV{constructor(e,t){this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class she{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=gd(e);const i=this.values,s=this.prefixSum,r=t.length;return r===0?!1:(this.values=new Uint32Array(i.length+r),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e),e+r),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}changeValue(e,t){return e=gd(e),t=gd(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=gd(e),t=gd(t);const i=this.values,s=this.prefixSum;if(e>=i.length)return!1;let r=i.length-e;return t>=r&&(t=r),t===0?!1:(this.values=new Uint32Array(i.length-t),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=gd(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let i=t;i<=e;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.values.length-1,s=0,r=0,o=0;for(;t<=i;)if(s=t+(i-t)/2|0,r=this.prefixSum[s],o=r-this.values[s],e<o)i=s-1;else if(e>=r)t=s+1;else break;return new MV(s,e-o)}}class rhe{constructor(e,t,i,s){this._uri=e,this._lines=t,this._eol=i,this._versionId=s,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const i of t)this._acceptDeleteRange(i.range),this._acceptInsertText(new P(i.range.startLineNumber,i.range.startColumn),i.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let s=0;s<t;s++)i[s]=this._lines[s].length+e;this._lineStarts=new she(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.changeValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;let i=sa(t);if(i.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);let s=new Uint32Array(i.length-1);for(let r=1;r<i.length;r++)this._lines.splice(e.lineNumber+r-1,0,i[r]),s[r-1]=i[r].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,s)}}class Ig{constructor(e){let t=sC(e);this._defaultValue=t,this._asciiMap=Ig._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);for(let i=0;i<256;i++)t[i]=e;return t}set(e,t){let i=sC(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}}class ohe{constructor(){this._actual=new Ig(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}}class ahe{constructor(e,t,i){const s=new Uint8Array(e*t);for(let r=0,o=e*t;r<o;r++)s[r]=i;this._data=s,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,i){this._data[e*this.cols+t]=i}}class lhe{constructor(e){let t=0,i=0;for(let r=0,o=e.length;r<o;r++){let[a,l,c]=e[r];l>t&&(t=l),a>i&&(i=a),c>i&&(i=c)}t++,i++;let s=new ahe(i,t,0);for(let r=0,o=e.length;r<o;r++){let[a,l,c]=e[r];s.set(a,l,c)}this._states=s,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let Ox=null;function che(){return Ox===null&&(Ox=new lhe([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),Ox}let hp=null;function hhe(){if(hp===null){hp=new Ig(0);const n=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let t=0;t<n.length;t++)hp.set(n.charCodeAt(t),1);const e=".,;";for(let t=0;t<e.length;t++)hp.set(e.charCodeAt(t),2)}return hp}class rC{static _createLink(e,t,i,s,r){let o=r-1;do{const a=t.charCodeAt(o);if(e.get(a)!==2)break;o--}while(o>s);if(s>0){const a=t.charCodeAt(s-1),l=t.charCodeAt(o);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&o--}return{range:{startLineNumber:i,startColumn:s+1,endLineNumber:i,endColumn:o+2},url:t.substring(s,o+1)}}static computeLinks(e,t=che()){const i=hhe();let s=[];for(let r=1,o=e.getLineCount();r<=o;r++){const a=e.getLineContent(r),l=a.length;let c=0,h=0,u=0,d=1,f=!1,g=!1,p=!1,_=!1;for(;c<l;){let v=!1;const b=a.charCodeAt(c);if(d===13){let w;switch(b){case 40:f=!0,w=0;break;case 41:w=f?0:1;break;case 91:p=!0,g=!0,w=0;break;case 93:p=!1,w=g?0:1;break;case 123:_=!0,w=0;break;case 125:w=_?0:1;break;case 39:w=u===34||u===96?0:1;break;case 34:w=u===39||u===96?0:1;break;case 96:w=u===39||u===34?0:1;break;case 42:w=u===42?1:0;break;case 124:w=u===124?1:0;break;case 32:w=p?0:1;break;default:w=i.get(b)}w===1&&(s.push(rC._createLink(i,a,r,h,c)),v=!0)}else if(d===12){let w;b===91?(g=!0,w=0):w=i.get(b),w===1?v=!0:d=13}else d=t.nextState(d,b),d===0&&(v=!0);v&&(d=1,f=!1,g=!1,_=!1,h=c+1,u=b),c++}d===13&&s.push(rC._createLink(i,a,r,h,l))}return s}}function uhe(n){return!n||typeof n.getLineCount!="function"||typeof n.getLineContent!="function"?[]:rC.computeLinks(n)}class BE{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,i,s,r){if(e&&t){let o=this.doNavigateValueSet(t,r);if(o)return{range:e,value:o}}if(i&&s){let o=this.doNavigateValueSet(s,r);if(o)return{range:i,value:o}}return null}doNavigateValueSet(e,t){let i=this.numberReplace(e,t);return i!==null?i:this.textReplace(e,t)}numberReplace(e,t){let i=Math.pow(10,e.length-(e.lastIndexOf(".")+1)),s=Number(e),r=parseFloat(e);return!isNaN(s)&&!isNaN(r)&&s===r?s===0&&!t?null:(s=Math.floor(s*i),s+=t?i:-i,String(s/i)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,i){let s=null;for(let r=0,o=e.length;s===null&&r<o;r++)s=this.valueSetReplace(e[r],t,i);return s}valueSetReplace(e,t,i){let s=e.indexOf(t);return s>=0?(s+=i?1:-1,s<0?s=e.length-1:s%=e.length,e[s]):null}}BE.INSTANCE=new BE;var pd=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class dhe extends rhe{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){let i=Bw(e.column,Pw(t),this._lines[e.lineNumber-1],0);return i?new I(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn):null}words(e){const t=this._lines,i=this._wordenize.bind(this);let s=0,r="",o=0,a=[];return{*[Symbol.iterator](){for(;;)if(o<a.length){const l=r.substring(a[o].start,a[o].end);o+=1,yield l}else if(s<t.length)r=t[s],a=i(r,e),o=0,s+=1;else break}}}getLineWords(e,t){let i=this._lines[e-1],s=this._wordenize(i,t),r=[];for(const o of s)r.push({word:i.substring(o.start,o.end),startColumn:o.start+1,endColumn:o.end+1});return r}_wordenize(e,t){const i=[];let s;for(t.lastIndex=0;(s=t.exec(e))&&s[0].length!==0;)i.push({start:s.index,end:s.index+s[0].length});return i}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);let t=this._eol,i=e.startLineNumber-1,s=e.endLineNumber-1,r=[];r.push(this._lines[i].substring(e.startColumn-1));for(let o=i+1;o<s;o++)r.push(this._lines[o]);return r.push(this._lines[s].substring(0,e.endColumn-1)),r.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,i)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),i=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||i.lineNumber!==e.endLineNumber||i.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:i.lineNumber,endColumn:i.column}:e}_validatePosition(e){if(!P.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:i}=e,s=!1;if(t<1)t=1,i=1,s=!0;else if(t>this._lines.length)t=this._lines.length,i=this._lines[t-1].length+1,s=!0;else{let r=this._lines[t-1].length+1;i<1?(i=1,s=!0):i>r&&(i=r,s=!0)}return s?{lineNumber:t,column:i}:e}}class cu{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){let e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new dhe(xe.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){!this._models[e]||delete this._models[e]}computeDiff(e,t,i,s){return pd(this,void 0,void 0,function*(){const r=this._getModel(e),o=this._getModel(t);if(!r||!o)return null;const a=r.getLinesContent(),l=o.getLinesContent(),h=new nhe(a,l,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:i,shouldMakePrettyDiff:!0,maxComputationTime:s}).computeDiff(),u=h.changes.length>0?!1:this._modelsAreIdentical(r,o);return{quitEarly:h.quitEarly,identical:u,changes:h.changes}})}_modelsAreIdentical(e,t){const i=e.getLineCount(),s=t.getLineCount();if(i!==s)return!1;for(let r=1;r<=i;r++){const o=e.getLineContent(r),a=t.getLineContent(r);if(o!==a)return!1}return!0}computeMoreMinimalEdits(e,t){return pd(this,void 0,void 0,function*(){const i=this._getModel(e);if(!i)return t;const s=[];let r;t=t.slice(0).sort((o,a)=>{if(o.range&&a.range)return I.compareRangesUsingStarts(o.range,a.range);let l=o.range?0:1,c=a.range?0:1;return l-c});for(let{range:o,text:a,eol:l}of t){if(typeof l=="number"&&(r=l),I.isEmpty(o)&&!a)continue;const c=i.getValueInRange(o);if(a=a.replace(/\r\n|\n|\r/g,i.eol),c===a)continue;if(Math.max(a.length,c.length)>cu._diffLimit){s.push({range:o,text:a});continue}const h=Jce(c,a,!1),u=i.offsetAt(I.lift(o).getStartPosition());for(const d of h){const f=i.positionAt(u+d.originalStart),g=i.positionAt(u+d.originalStart+d.originalLength),p={text:a.substr(d.modifiedStart,d.modifiedLength),range:{startLineNumber:f.lineNumber,startColumn:f.column,endLineNumber:g.lineNumber,endColumn:g.column}};i.getValueInRange(p.range)!==p.text&&s.push(p)}}return typeof r=="number"&&s.push({eol:r,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),s})}computeLinks(e){return pd(this,void 0,void 0,function*(){let t=this._getModel(e);return t?uhe(t):null})}textualSuggest(e,t,i,s){return pd(this,void 0,void 0,function*(){const r=new rl(!0),o=new RegExp(i,s),a=new Set;e:for(let l of e){const c=this._getModel(l);if(!!c){for(let h of c.words(o))if(!(h===t||!isNaN(Number(h)))&&(a.add(h),a.size>cu._suggestionsLimit))break e}}return{words:Array.from(a),duration:r.elapsed()}})}computeWordRanges(e,t,i,s){return pd(this,void 0,void 0,function*(){let r=this._getModel(e);if(!r)return Object.create(null);const o=new RegExp(i,s),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){let c=r.getLineWords(l,o);for(const h of c){if(!isNaN(Number(h.word)))continue;let u=a[h.word];u||(u=[],a[h.word]=u),u.push({startLineNumber:l,startColumn:h.startColumn,endLineNumber:l,endColumn:h.endColumn})}}return a})}navigateValueSet(e,t,i,s,r){return pd(this,void 0,void 0,function*(){let o=this._getModel(e);if(!o)return null;let a=new RegExp(s,r);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});let l=o.getValueInRange(t),c=o.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;let h=o.getValueInRange(c);return BE.INSTANCE.navigateValueSet(t,l,c,h,i)})}loadForeignModule(e,t,i){let o={host:Cle(i,(a,l)=>this._host.fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(o,t),Promise.resolve(UA(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(i){return Promise.reject(i)}}}cu._diffLimit=1e5;cu._suggestionsLimit=1e4;typeof importScripts=="function"&&(It.monaco=M9());const RV=Xe("textResourceConfigurationService"),OV=Xe("textResourcePropertiesService");function Is(n,e=0){return n[n.length-(1+e)]}function fhe(n){if(n.length===0)throw new Error("Invalid tail call");return[n.slice(0,n.length-1),n[n.length-1]]}function ta(n,e,t=(i,s)=>i===s){if(n===e)return!0;if(!n||!e||n.length!==e.length)return!1;for(let i=0,s=n.length;i<s;i++)if(!t(n[i],e[i]))return!1;return!0}function JA(n,e,t){let i=0,s=n.length-1;for(;i<=s;){const r=(i+s)/2|0,o=t(n[r],e);if(o<0)i=r+1;else if(o>0)s=r-1;else return r}return-(i+1)}function FV(n,e){let t=0,i=n.length;if(i===0)return 0;for(;t<i;){const s=Math.floor((t+i)/2);e(n[s])?i=s:t=s+1}return t}function VE(n,e,t){if(n=n|0,n>=e.length)throw new TypeError("invalid index");let i=e[Math.floor(e.length*Math.random())],s=[],r=[],o=[];for(let a of e){const l=t(a,i);l<0?s.push(a):l>0?r.push(a):o.push(a)}return n<s.length?VE(n,s,t):n<s.length+o.length?o[0]:VE(n-(s.length+o.length),r,t)}function hP(n,e){const t=[];let i;for(const s of n.slice(0).sort(e))!i||e(i[0],s)!==0?(i=[s],t.push(i)):i.push(s);return t}function v1(n){return n.filter(e=>!!e)}function PV(n){return!Array.isArray(n)||n.length===0}function ia(n){return Array.isArray(n)&&n.length>0}function oC(n,e=t=>t){const t=new Set;return n.filter(i=>{const s=e(i);return t.has(s)?!1:(t.add(s),!0)})}function ghe(n,e){const t=phe(n,e);if(t!==-1)return n[t]}function phe(n,e){for(let t=n.length-1;t>=0;t--){const i=n[t];if(e(i))return t}return-1}function WE(n,e){return n.length>0?n[0]:e}function e2(n){return[].concat(...n)}function mn(n,e){let t=typeof e=="number"?n:0;typeof e=="number"?t=n:(t=0,e=n);const i=[];if(t<=e)for(let s=t;s<e;s++)i.push(s);else for(let s=t;s>e;s--)i.push(s);return i}function h_(n,e,t){const i=n.slice(0,e),s=n.slice(e);return i.concat(t,s)}function Fx(n,e){const t=n.indexOf(e);t>-1&&(n.splice(t,1),n.unshift(e))}function kb(n,e){const t=n.indexOf(e);t>-1&&(n.splice(t,1),n.push(e))}function BV(n){return Array.isArray(n)?n:[n]}function mhe(n,e,t){const i=VV(n,e),s=n.length,r=t.length;n.length=s+r;for(let o=s-1;o>=i;o--)n[o+r]=n[o];for(let o=0;o<r;o++)n[o+i]=t[o]}function uP(n,e,t,i){const s=VV(n,e),r=n.splice(s,t);return mhe(n,s,i),r}function VV(n,e){return e<0?Math.max(e+n.length,0):Math.min(e,n.length)}class tm{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const i=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,i}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const i=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,i}peek(){return this.items[this.firstIdx]}}const fl=Xe("logService");var jr;(function(n){n[n.Trace=0]="Trace",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warning=3]="Warning",n[n.Error=4]="Error",n[n.Critical=5]="Critical",n[n.Off=6]="Off"})(jr||(jr={}));const WV=jr.Info;class _he extends q{constructor(){super(...arguments),this.level=WV,this._onDidChangeLogLevel=this._register(new R)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}class bhe extends _he{constructor(e=WV){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=jr.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=jr.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=jr.Info&&console.log("%c INFO","color: #33f",e,...t)}error(e,...t){this.getLevel()<=jr.Error&&console.log("%c  ERR","color: #f33",e,...t)}dispose(){}}class vhe extends q{constructor(e){super(),this.logger=e,this._register(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}error(e,...t){this.logger.error(e,...t)}}var whe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Px=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},zE=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const dP=60*1e3,fP=5*60*1e3;function Wd(n,e){let t=n.getModel(e);return!(!t||t.isTooLargeForSyncing())}let HE=class extends q{constructor(e,t,i){super(),this._modelService=e,this._workerManager=this._register(new yhe(this._modelService)),this._logService=i,this._register(mV.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(s,r)=>Wd(this._modelService,s.uri)?this._workerManager.withWorker().then(o=>o.computeLinks(s.uri)).then(o=>o&&{links:o}):Promise.resolve({links:[]})})),this._register(Hr.register("*",new Che(this._workerManager,t,this._modelService)))}dispose(){super.dispose()}computeDiff(e,t,i,s){return this._workerManager.withWorker().then(r=>r.computeDiff(e,t,i,s))}computeMoreMinimalEdits(e,t){if(ia(t)){if(!Wd(this._modelService,e))return Promise.resolve(t);const i=rl.create(!0),s=this._workerManager.withWorker().then(r=>r.computeMoreMinimalEdits(e,t));return s.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),i.elapsed())),Promise.race([s,e_(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return Wd(this._modelService,e)}navigateValueSet(e,t,i){return this._workerManager.withWorker().then(s=>s.navigateValueSet(e,t,i))}canComputeWordRanges(e){return Wd(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(i=>i.computeWordRanges(e,t))}};HE=whe([Px(0,zn),Px(1,RV),Px(2,fl)],HE);class Che{constructor(e,t,i){this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=i}provideCompletionItems(e,t){return zE(this,void 0,void 0,function*(){const i=this._configurationService.getValue(e.uri,t,"editor");if(!i.wordBasedSuggestions)return;const s=[];if(i.wordBasedSuggestionsMode==="currentDocument")Wd(this._modelService,e.uri)&&s.push(e.uri);else for(const u of this._modelService.getModels())!Wd(this._modelService,u.uri)||(u===e?s.unshift(u.uri):(i.wordBasedSuggestionsMode==="allDocuments"||u.getLanguageId()===e.getLanguageId())&&s.push(u.uri));if(s.length===0)return;const r=Qt.getWordDefinition(e.getLanguageId()),o=e.getWordAtPosition(t),a=o?new I(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn):I.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),h=yield(yield this._workerManager.withWorker()).textualSuggest(s,o==null?void 0:o.word,r);if(!!h)return{duration:h.duration,suggestions:h.words.map(u=>({kind:18,label:u,insertText:u,range:{insert:l,replace:a}}))}})}}class yhe extends q{constructor(e){super(),this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new M0).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(fP/2)),this._register(this._modelService.onModelRemoved(i=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>fP&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new zV(this._modelService,!1,"editorWorkerService")),Promise.resolve(this._editorWorkerClient)}}class She extends q{constructor(e,t,i){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!i){let s=new M0;s.cancelAndSet(()=>this._checkStopModelSync(),Math.round(dP/2)),this._register(s)}}dispose(){for(let e in this._syncedModels)He(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const i of e){let s=i.toString();this._syncedModels[s]||this._beginModelSync(i,t),this._syncedModels[s]&&(this._syncedModelsLastUsedTime[s]=new Date().getTime())}}_checkStopModelSync(){let e=new Date().getTime(),t=[];for(let i in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[i]>dP&&t.push(i);for(const i of t)this._stopModelSync(i)}_beginModelSync(e,t){let i=this._modelService.getModel(e);if(!i||!t&&i.isTooLargeForSyncing())return;let s=e.toString();this._proxy.acceptNewModel({url:i.uri.toString(),lines:i.getLinesContent(),EOL:i.getEOL(),versionId:i.getVersionId()});const r=new ee;r.add(i.onDidChangeContent(o=>{this._proxy.acceptModelChanged(s.toString(),o)})),r.add(i.onWillDispose(()=>{this._stopModelSync(s)})),r.add(Ze(()=>{this._proxy.acceptRemovedModel(s)})),this._syncedModels[s]=r}_stopModelSync(e){let t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],He(t)}}class gP{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class Bx{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}class zV extends q{constructor(e,t,i){super(),this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new p1(i),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new gce(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new Bx(this)))}catch(e){ME(e),this._worker=new gP(new cu(new Bx(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(ME(e),this._worker=new gP(new cu(new Bx(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new She(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,t=!1){return zE(this,void 0,void 0,function*(){return this._disposed?Promise.reject(xg()):this._getProxy().then(i=>(this._getOrCreateModelManager(i).ensureSyncedResources(e,t),i))})}computeDiff(e,t,i,s){return this._withSyncedResources([e,t],!0).then(r=>r.computeDiff(e.toString(),t.toString(),i,s))}computeMoreMinimalEdits(e,t){return this._withSyncedResources([e]).then(i=>i.computeMoreMinimalEdits(e.toString(),t))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}textualSuggest(e,t,i){return zE(this,void 0,void 0,function*(){const s=yield this._withSyncedResources(e),r=i.source,o=vx(i);return s.textualSuggest(e.map(a=>a.toString()),t,r,o)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(i=>{let s=this._modelService.getModel(e);if(!s)return Promise.resolve(null);let r=Qt.getWordDefinition(s.getLanguageId()),o=r.source,a=vx(r);return i.computeWordRanges(e.toString(),t,o,a)})}navigateValueSet(e,t,i){return this._withSyncedResources([e]).then(s=>{let r=this._modelService.getModel(e);if(!r)return null;let o=Qt.getWordDefinition(r.getLanguageId()),a=o.source,l=vx(o);return s.navigateValueSet(e.toString(),t,i,a,l)})}dispose(){super.dispose(),this._disposed=!0}}function xhe(n,e){return new Dhe(n,e)}class Dhe extends zV{constructor(e,t){super(e,t.keepIdleModels||!1,t.label),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(i){return Promise.reject(i)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?UA(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(i=>{this._foreignModuleCreateData=null;const s=(a,l)=>e.fmr(a,l),r=(a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)};let o={};for(const a of i)o[a]=r(a,s);return o})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}}class Oi{constructor(e,t,i){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=i}static createEmpty(e,t){const i=Oi.defaultTokenMetadata,s=new Uint32Array(2);return s[0]=e.length,s[1]=i,new Oi(s,e,t)}equals(e){return e instanceof Oi?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,i){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const s=t<<1,r=s+(i<<1);for(let o=s;o<r;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],i=Rs.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(i)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return Rs.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return Rs.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return Rs.getClassNameFromMetadata(t)}getInlineStyle(e,t){const i=this._tokens[(e<<1)+1];return Rs.getInlineStyleFromMetadata(i,t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return Oi.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,i){return new t2(this,e,t,i)}static convertToEndOffset(e,t){const s=(e.length>>>1)-1;for(let r=0;r<s;r++)e[r<<1]=e[r+1<<1];e[s<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let i=0,s=(e.length>>>1)-1;for(;i<s;){const r=i+Math.floor((s-i)/2),o=e[r<<1];if(o===t)return r+1;o<t?i=r+1:o>t&&(s=r)}return i}withInserted(e){if(e.length===0)return this;let t=0,i=0,s="";const r=new Array;let o=0;for(;;){let a=t<this._tokensCount?this._tokens[t<<1]:-1,l=i<e.length?e[i]:null;if(a!==-1&&(l===null||a<=l.offset)){s+=this._text.substring(o,a);const c=this._tokens[(t<<1)+1];r.push(s.length,c),t++,o=a}else if(l){if(l.offset>o){s+=this._text.substring(o,l.offset);const c=this._tokens[(t<<1)+1];r.push(s.length,c),o=l.offset}s+=l.text,r.push(s.length,l.tokenMetadata),i++}else break}return new Oi(new Uint32Array(r),s,this._languageIdCodec)}}Oi.defaultTokenMetadata=(0<<11|1<<14|2<<23)>>>0;class t2{constructor(e,t,i,s){this._source=e,this._startOffset=t,this._endOffset=i,this._deltaOffset=s,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let r=this._firstTokenIndex,o=e.getCount();r<o&&!(e.getStartOffset(r)>=i);r++)this._tokensCount++}equals(e){return e instanceof t2?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}class vs{constructor(e,t,i,s){this.startColumn=e,this.endColumn=t,this.className=i,this.type=s,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const i=e.length,s=t.length;if(i!==s)return!1;for(let r=0;r<i;r++)if(!vs._equals(e[r],t[r]))return!1;return!0}static extractWrapped(e,t,i){if(e.length===0)return e;const s=t+1,r=i+1,o=i-t,a=[];let l=0;for(const c of e)c.endColumn<=s||c.startColumn>=r||(a[l++]=new vs(Math.max(1,c.startColumn-s+1),Math.min(o+1,c.endColumn-s+1),c.className,c.type));return a}static filter(e,t,i,s){if(e.length===0)return[];let r=[],o=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],h=c.range;if(h.endLineNumber<t||h.startLineNumber>t||h.isEmpty()&&(c.type===0||c.type===3))continue;const u=h.startLineNumber===t?h.startColumn:i,d=h.endLineNumber===t?h.endColumn:s;r[o++]=new vs(u,d,c.inlineClassName,c.type)}return r}static _typeCompare(e,t){const i=[2,0,1,3];return i[e]-i[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const i=vs._typeCompare(e.type,t.type);return i!==0?i:e.className!==t.className?e.className<t.className?-1:1:0}}class pP{constructor(e,t,i,s){this.startOffset=e,this.endOffset=t,this.className=i,this.metadata=s}}class aC{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let i=0,s=e.length;i<s;i++)t|=e[i];return t}consumeLowerThan(e,t,i){for(;this.count>0&&this.stopOffsets[0]<e;){let s=0;for(;s+1<this.count&&this.stopOffsets[s]===this.stopOffsets[s+1];)s++;i.push(new pP(t,this.stopOffsets[s],this.classNames.join(" "),aC._metadata(this.metadata))),t=this.stopOffsets[s]+1,this.stopOffsets.splice(0,s+1),this.classNames.splice(0,s+1),this.metadata.splice(0,s+1),this.count-=s+1}return this.count>0&&t<e&&(i.push(new pP(t,e-1,this.classNames.join(" "),aC._metadata(this.metadata))),t=e),t}insert(e,t,i){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(i);else for(let s=0;s<this.count;s++)if(this.stopOffsets[s]>=e){this.stopOffsets.splice(s,0,e),this.classNames.splice(s,0,t),this.metadata.splice(s,0,i);break}this.count++}}class Lhe{static normalize(e,t){if(t.length===0)return[];let i=[];const s=new aC;let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];let c=l.startColumn,h=l.endColumn;const u=l.className,d=l.type===1?2:l.type===2?4:0;if(c>1){const p=e.charCodeAt(c-2);Ri(p)&&c--}if(h>1){const p=e.charCodeAt(h-2);Ri(p)&&h--}const f=c-1,g=h-2;r=s.consumeLowerThan(f,r,i),s.count===0&&(r=f),s.insert(g,u,d)}return s.consumeLowerThan(1073741824,r,i),i}}class Si{constructor(e,t,i){this._linePartBrand=void 0,this.endIndex=e,this.type=t,this.metadata=i}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class khe{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class Ou{constructor(e,t,i,s,r,o,a,l,c,h,u,d,f,g,p,_,v,b,w){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.continuesWithWrappedLine=s,this.isBasicASCII=r,this.containsRTL=o,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(vs.compare),this.tabSize=h,this.startVisibleColumn=u,this.spaceWidth=d,this.stopRenderingLineAfter=p,this.renderWhitespace=_==="all"?4:_==="boundary"?1:_==="selection"?2:_==="trailing"?3:0,this.renderControlCharacters=v,this.fontLigatures=b,this.selectionsOnLine=w&&w.sort((D,S)=>D.startOffset<S.startOffset?-1:1);const C=Math.abs(g-d),y=Math.abs(f-d);C<y?(this.renderSpaceWidth=g,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=f,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&vs.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class i2{constructor(e,t){this.partIndex=e,this.charIndex=t}}class Ro{constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._absoluteOffsets=new Uint32Array(this.length)}static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}setColumnInfo(e,t,i,s){const r=(t<<16|i<<0)>>>0;this._data[e-1]=r,this._absoluteOffsets[e-1]=s+i}getAbsoluteOffset(e){return this._absoluteOffsets.length===0?0:this._absoluteOffsets[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),i=Ro.getPartIndex(t),s=Ro.getCharIndex(t);return new i2(i,s)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,i){if(this.length===0)return 0;let s=(e<<16|i<<0)>>>0,r=0,o=this.length-1;for(;r+1<o;){let p=r+o>>>1,_=this._data[p];if(_===s)return p;_>s?o=p:r=p}if(r===o)return r;let a=this._data[r],l=this._data[o];if(a===s)return r;if(l===s)return o;let c=Ro.getPartIndex(a),h=Ro.getCharIndex(a),u=Ro.getPartIndex(l),d;c!==u?d=t:d=Ro.getCharIndex(l);let f=i-h,g=d-i;return f<=g?r:o}}class $E{constructor(e,t,i){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=i}}function w1(n,e){if(n.lineContent.length===0){if(n.lineDecorations.length>0){e.appendASCIIString("<span>");let t=0,i=0,s=0;for(const o of n.lineDecorations)(o.type===1||o.type===2)&&(e.appendASCIIString('<span class="'),e.appendASCIIString(o.className),e.appendASCIIString('"></span>'),o.type===1&&(s|=1,t++),o.type===2&&(s|=2,i++));e.appendASCIIString("</span>");const r=new Ro(1,t+i);return r.setColumnInfo(1,t,0,0),new $E(r,!1,s)}return e.appendASCIIString("<span><span></span></span>"),new $E(new Ro(0,0),!1,0)}return Fhe(The(n),e)}class Ehe{constructor(e,t,i,s){this.characterMapping=e,this.html=t,this.containsRTL=i,this.containsForeignElements=s}}function C1(n){let e=lu(1e4),t=w1(n,e);return new Ehe(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class Ihe{constructor(e,t,i,s,r,o,a,l,c,h,u,d,f,g,p){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.len=s,this.isOverflowing=r,this.parts=o,this.containsForeignElements=a,this.fauxIndentLength=l,this.tabSize=c,this.startVisibleColumn=h,this.containsRTL=u,this.spaceWidth=d,this.renderSpaceCharCode=f,this.renderWhitespace=g,this.renderControlCharacters=p}}function The(n){const e=n.lineContent;let t,i;n.stopRenderingLineAfter!==-1&&n.stopRenderingLineAfter<e.length?(t=!0,i=n.stopRenderingLineAfter):(t=!1,i=e.length);let s=Nhe(n.lineTokens,n.fauxIndentLength,i);(n.renderWhitespace===4||n.renderWhitespace===1||n.renderWhitespace===2&&!!n.selectionsOnLine||n.renderWhitespace===3)&&(s=Rhe(n,e,i,s));let r=0;if(n.lineDecorations.length>0){for(let o=0,a=n.lineDecorations.length;o<a;o++){const l=n.lineDecorations[o];l.type===3||l.type===1?r|=1:l.type===2&&(r|=2)}s=Ohe(e,i,s,n.lineDecorations)}return n.containsRTL||(s=Ahe(e,s,!n.isBasicASCII||n.fontLigatures)),n.renderControlCharacters&&!n.isBasicASCII&&(s=Mhe(e,s)),new Ihe(n.useMonospaceOptimizations,n.canUseHalfwidthRightwardsArrow,e,i,t,s,r,n.fauxIndentLength,n.tabSize,n.startVisibleColumn,n.containsRTL,n.spaceWidth,n.renderSpaceCharCode,n.renderWhitespace,n.renderControlCharacters)}function Nhe(n,e,t){let i=[],s=0;e>0&&(i[s++]=new Si(e,"",0));for(let r=0,o=n.getCount();r<o;r++){const a=n.getEndOffset(r);if(a<=e)continue;const l=n.getClassName(r);if(a>=t){i[s++]=new Si(t,l,0);break}i[s++]=new Si(a,l,0)}return i}function Ahe(n,e,t){let i=0,s=[],r=0;if(t)for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex;if(i+50<c){const h=l.type,u=l.metadata;let d=-1,f=i;for(let g=i;g<c;g++)n.charCodeAt(g)===32&&(d=g),d!==-1&&g-f>=50&&(s[r++]=new Si(d+1,h,u),f=d+1,d=-1);f!==c&&(s[r++]=new Si(c,h,u))}else s[r++]=l;i=c}else for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex;let h=c-i;if(h>50){const u=l.type,d=l.metadata,f=Math.ceil(h/50);for(let g=1;g<f;g++){let p=i+g*50;s[r++]=new Si(p,u,d)}s[r++]=new Si(c,u,d)}else s[r++]=l;i=c}return s}function HV(n){return n<32?n!==9:n===127||n>=8234&&n<=8238||n>=8294&&n<=8297||n>=8206&&n<=8207||n===1564}function Mhe(n,e){let t=[],i=new Si(0,"",0),s=0;for(const r of e){const o=r.endIndex;for(;s<o;s++){const a=n.charCodeAt(s);HV(a)&&(s>i.endIndex&&(i=new Si(s,r.type,r.metadata),t.push(i)),i=new Si(s+1,"mtkcontrol",r.metadata),t.push(i))}s>i.endIndex&&(i=new Si(o,r.type,r.metadata),t.push(i))}return t}function Rhe(n,e,t,i){const s=n.continuesWithWrappedLine,r=n.fauxIndentLength,o=n.tabSize,a=n.startVisibleColumn,l=n.useMonospaceOptimizations,c=n.selectionsOnLine,h=n.renderWhitespace===1,u=n.renderWhitespace===3,d=n.renderSpaceWidth!==n.spaceWidth;let f=[],g=0,p=0,_=i[p].type,v=i[p].endIndex;const b=i.length;let w=!1,C=Jn(e),y;C===-1?(w=!0,C=t,y=t):y=kg(e);let D=!1,S=0,x=c&&c[S],k=a%o;for(let A=r;A<t;A++){const z=e.charCodeAt(A);x&&A>=x.endOffset&&(S++,x=c&&c[S]);let H;if(A<C||A>y)H=!0;else if(z===9)H=!0;else if(z===32)if(h)if(D)H=!0;else{const te=A+1<t?e.charCodeAt(A+1):0;H=te===32||te===9}else H=!0;else H=!1;if(H&&c&&(H=!!x&&x.startOffset<=A&&x.endOffset>A),H&&u&&(H=w||A>y),D){if(!H||!l&&k>=o){if(d){const te=g>0?f[g-1].endIndex:r;for(let ie=te+1;ie<=A;ie++)f[g++]=new Si(ie,"mtkw",1)}else f[g++]=new Si(A,"mtkw",1);k=k%o}}else(A===v||H&&A>r)&&(f[g++]=new Si(A,_,0),k=k%o);for(z===9?k=o:Kr(z)?k+=2:k++,D=H;A===v&&(p++,p<b);)_=i[p].type,v=i[p].endIndex}let F=!1;if(D)if(s&&h){let A=t>0?e.charCodeAt(t-1):0,z=t>1?e.charCodeAt(t-2):0;A===32&&z!==32&&z!==9||(F=!0)}else F=!0;if(F)if(d){const A=g>0?f[g-1].endIndex:r;for(let z=A+1;z<=t;z++)f[g++]=new Si(z,"mtkw",1)}else f[g++]=new Si(t,"mtkw",1);else f[g++]=new Si(t,_,0);return f}function Ohe(n,e,t,i){i.sort(vs.compare);const s=Lhe.normalize(n,i),r=s.length;let o=0,a=[],l=0,c=0;for(let u=0,d=t.length;u<d;u++){const f=t[u],g=f.endIndex,p=f.type,_=f.metadata;for(;o<r&&s[o].startOffset<g;){const v=s[o];if(v.startOffset>c&&(c=v.startOffset,a[l++]=new Si(c,p,_)),v.endOffset+1<=g)c=v.endOffset+1,a[l++]=new Si(c,p+" "+v.className,_|v.metadata),o++;else{c=g,a[l++]=new Si(c,p+" "+v.className,_|v.metadata);break}}g>c&&(c=g,a[l++]=new Si(c,p,_))}const h=t[t.length-1].endIndex;if(o<r&&s[o].startOffset===h)for(;o<r&&s[o].startOffset===h;){const u=s[o];a[l++]=new Si(c,u.className,u.metadata),o++}return a}function Fhe(n,e){const t=n.fontIsMonospace,i=n.canUseHalfwidthRightwardsArrow,s=n.containsForeignElements,r=n.lineContent,o=n.len,a=n.isOverflowing,l=n.parts,c=n.fauxIndentLength,h=n.tabSize,u=n.startVisibleColumn,d=n.containsRTL,f=n.spaceWidth,g=n.renderSpaceCharCode,p=n.renderWhitespace,_=n.renderControlCharacters,v=new Ro(o+1,l.length);let b=!1,w=0,C=u,y=0,D=0,S=0,x=0;d?e.appendASCIIString('<span dir="ltr">'):e.appendASCIIString("<span>");for(let k=0,F=l.length;k<F;k++){x+=S;const A=l[k],z=A.endIndex,H=A.type,te=p!==0&&A.isWhitespace(),ie=te&&!t&&(H==="mtkw"||!s),ae=w===z&&A.isPseudoAfter();if(y=0,e.appendASCIIString('<span class="'),e.appendASCIIString(ie?"mtkz":H),e.appendASCII(34),te){let _e=0;{let me=w,fe=C;for(;me<z;me++){const ct=(r.charCodeAt(me)===9?h-fe%h:1)|0;_e+=ct,me>=c&&(fe+=ct)}}for(ie&&(e.appendASCIIString(' style="width:'),e.appendASCIIString(String(f*_e)),e.appendASCIIString('px"')),e.appendASCII(62);w<z;w++){v.setColumnInfo(w+1,k-D,y,x),D=0;const me=r.charCodeAt(w);let fe;if(me===9){fe=h-C%h|0,!i||fe>1?e.write1(8594):e.write1(65515);for(let Dt=2;Dt<=fe;Dt++)e.write1(160)}else fe=1,e.write1(g);y+=fe,w>=c&&(C+=fe)}S=_e}else{let _e=0;for(e.appendASCII(62);w<z;w++){v.setColumnInfo(w+1,k-D,y,x),D=0;const me=r.charCodeAt(w);let fe=1,Dt=1;switch(me){case 9:fe=h-C%h,Dt=fe;for(let ct=1;ct<=fe;ct++)e.write1(160);break;case 32:e.write1(160);break;case 60:e.appendASCIIString("&lt;");break;case 62:e.appendASCIIString("&gt;");break;case 38:e.appendASCIIString("&amp;");break;case 0:_?e.write1(9216):e.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.write1(65533);break;default:Kr(me)&&Dt++,_&&me<32?e.write1(9216+me):_&&me===127?e.write1(9249):_&&HV(me)?(e.appendASCIIString("[U+"),e.appendASCIIString(Phe(me)),e.appendASCIIString("]"),fe=8):e.write1(me)}y+=fe,_e+=fe,w>=c&&(C+=Dt)}S=_e}ae?D++:D=0,w>=o&&!b&&A.isPseudoAfter()&&(b=!0,v.setColumnInfo(w+1,k,y,x)),e.appendASCIIString("</span>")}return b||v.setColumnInfo(o+1,l.length-1,y,x),a&&e.appendASCIIString("<span>&hellip;</span>"),e.appendASCIIString("</span>"),new $E(v,d,s)}function Phe(n){return n.toString(16).toUpperCase().padStart(4,"0")}class mP{constructor(e,t,i,s){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=i|0,this.height=s|0}}class Bhe{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e,t){const i=this.outputLineIndex>0?t:0;return new P(e+this.outputLineIndex,i+this.outputOffset+1)}}class im{constructor(e,t,i,s,r){this.breakOffsets=e,this.breakOffsetsVisibleColumn=t,this.wrappedTextIndentLength=i,this.injectionOffsets=s,this.injectionOptions=r}getInputOffsetOfOutputPosition(e,t){let i=0;if(e===0?i=t:i=this.breakOffsets[e-1]+t,this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&i>this.injectionOffsets[s];s++)i<this.injectionOffsets[s]+this.injectionOptions[s].content.length?i=this.injectionOffsets[s]:i-=this.injectionOptions[s].content.length;return i}getOutputPositionOfInputOffset(e,t=2){let i=0;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&!(e<this.injectionOffsets[s]||t!==1&&e===this.injectionOffsets[s]);s++)i+=this.injectionOptions[s].content.length;return e+=i,this.getOutputPositionOfOffsetInUnwrappedLine(e,t)}getOutputPositionOfOffsetInUnwrappedLine(e,t=2){let i=0,s=this.breakOffsets.length-1,r=0,o=0;for(;i<=s;){r=i+(s-i)/2|0;const a=this.breakOffsets[r];if(o=r>0?this.breakOffsets[r-1]:0,t===0)if(e<=o)s=r-1;else if(e>a)i=r+1;else break;else if(e<o)s=r-1;else if(e>=a)i=r+1;else break}return new Bhe(r,e-o)}outputPositionToOffsetInUnwrappedLine(e,t){let i=(e>0?this.breakOffsets[e-1]:0)+t;return e>0&&(i-=this.wrappedTextIndentLength),i}normalizeOffsetAroundInjections(e,t){const i=this.getInjectedTextAtOffset(e);if(!i)return e;if(t===2)return e===i.offsetInUnwrappedLine+i.length?i.offsetInUnwrappedLine+i.length:i.offsetInUnwrappedLine;if(t===1){let o=i.offsetInUnwrappedLine+i.length,a=i.injectedTextIndex;for(;a+1<this.injectionOffsets.length&&this.injectionOffsets[a+1]===this.injectionOffsets[a];)o+=this.injectionOptions[a+1].content.length,a++;return o}let s=i.offsetInUnwrappedLine,r=i.injectedTextIndex;for(;r-1>=0&&this.injectionOffsets[r-1]===this.injectionOffsets[r];)s-=this.injectionOptions[r-1].content.length,r++;return s}getInjectedText(e,t){const i=this.outputPositionToOffsetInUnwrappedLine(e,t),s=this.getInjectedTextAtOffset(i);return s?{options:this.injectionOptions[s.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,i=this.injectionOptions;if(t!==null){let s=0;for(let r=0;r<t.length;r++){const o=i[r].content.length,a=t[r]+s,l=t[r]+s+o;if(a>e)break;if(e<=l)return{injectedTextIndex:r,offsetInUnwrappedLine:a,length:o};s+=o}}}}class Vhe{constructor(e,t){this.tabSize=e,this.data=t}}class n2{constructor(e,t,i,s,r,o,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=i,this.maxColumn=s,this.startVisibleColumn=r,this.tokens=o,this.inlineDecorations=a}}class Ss{constructor(e,t,i,s,r,o,a,l,c,h){this.minColumn=e,this.maxColumn=t,this.content=i,this.continuesWithWrappedLine=s,this.isBasicASCII=Ss.isBasicASCII(i,o),this.containsRTL=Ss.containsRTL(i,this.isBasicASCII,r),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=h}static isBasicASCII(e,t){return t?WA(e):!0}static containsRTL(e,t,i){return!t&&i?h1(e):!1}}class nm{constructor(e,t,i){this.range=e,this.inlineClassName=t,this.type=i}}class Whe{constructor(e,t,i,s){this.startOffset=e,this.endOffset=t,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=s}toInlineDecoration(e){return new nm(new I(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class $V{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class UV{constructor(e,t,i){this.color=e,this.zIndex=t,this.data=i}static cmp(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}}function zhe(n){return Array.isArray(n)}function Hhe(n){return!zhe(n)}function jV(n){return typeof n=="string"}function _P(n){return!jV(n)}function Ed(n){return!n}function Kl(n,e){return n.ignoreCase&&e?e.toLowerCase():e}function bP(n){return n.replace(/[&<>'"_]/g,"-")}function $he(n,e){console.log(`${n.languageId}: ${e}`)}function dt(n,e){return new Error(`${n.languageId}: ${e}`)}function Ol(n,e,t,i,s){const r=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let o=null;return e.replace(r,function(a,l,c,h,u,d,f,g,p){return Ed(c)?Ed(h)?!Ed(u)&&u<i.length?Kl(n,i[u]):!Ed(f)&&n&&typeof n[f]=="string"?n[f]:(o===null&&(o=s.split("."),o.unshift(s)),!Ed(d)&&d<o.length?Kl(n,o[d]):""):Kl(n,t):"$"})}function Eb(n,e){let t=e;for(;t&&t.length>0;){const i=n.tokenizer[t];if(i)return i;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return null}function Uhe(n,e){let t=e;for(;t&&t.length>0;){if(n.stateNames[t])return!0;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return!1}const qV=5;class u_{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new af(e,t);let i=af.getStackElementId(e);i.length>0&&(i+="|"),i+=t;let s=this._entries[i];return s||(s=new af(e,t),this._entries[i]=s,s)}}u_._INSTANCE=new u_(qV);class af{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return af._equals(this,e)}push(e){return u_.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return u_.create(this.parent,e)}}class sm{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new sm(this.languageId,this.state)}}class Fl{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(t!==null)return new rm(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new rm(e,t);let i=af.getStackElementId(e),s=this._entries[i];return s||(s=new rm(e,null),this._entries[i]=s,s)}}Fl._INSTANCE=new Fl(qV);class rm{constructor(e,t){this.stack=e,this.embeddedModeData=t}clone(){return(this.embeddedModeData?this.embeddedModeData.clone():null)===this.embeddedModeData?this:Fl.create(this.stack,this.embeddedModeData)}equals(e){return!(e instanceof rm)||!this.stack.equals(e.stack)?!1:this.embeddedModeData===null&&e.embeddedModeData===null?!0:this.embeddedModeData===null||e.embeddedModeData===null?!1:this.embeddedModeData.equals(e.embeddedModeData)}}class jhe{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterMode(e,t){this._languageId=t}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new o1(e,t,this._languageId)))}nestedModeTokenize(e,t,i,s){const r=i.languageId,o=i.state,a=Zt.get(r);if(!a)return this.enterMode(s,r),this.emit(s,""),o;let l=a.tokenize(e,t,o,s);return this._tokens=this._tokens.concat(l.tokens),this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new IA(this._tokens,e)}}class lC{constructor(e,t){this._modeService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterMode(e,t){this._currentLanguageId=this._modeService.languageIdCodec.encodeLanguageId(t)}emit(e,t){let i=this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==i&&(this._lastTokenMetadata=i,this._tokens.push(e),this._tokens.push(i))}static _merge(e,t,i){let s=e!==null?e.length:0,r=t.length,o=i!==null?i.length:0;if(s===0&&r===0&&o===0)return new Uint32Array(0);if(s===0&&r===0)return i;if(r===0&&o===0)return e;let a=new Uint32Array(s+r+o);e!==null&&a.set(e);for(let l=0;l<r;l++)a[s+l]=t[l];return i!==null&&a.set(i,s+r),a}nestedModeTokenize(e,t,i,s){const r=i.languageId,o=i.state,a=Zt.get(r);if(!a)return this.enterMode(s,r),this.emit(s,""),o;let l=a.tokenize2(e,t,o,s);return this._prependTokens=lC._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new a1(lC._merge(this._prependTokens,this._tokens,null),e)}}class y1{constructor(e,t,i,s){this._modeService=e,this._standaloneThemeService=t,this._languageId=i,this._lexer=s,this._embeddedModes=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let r=!1;this._tokenizationRegistryListener=Zt.onDidChange(o=>{if(r)return;let a=!1;for(let l=0,c=o.changedLanguages.length;l<c;l++){let h=o.changedLanguages[l];if(this._embeddedModes[h]){a=!0;break}}a&&(r=!0,Zt.fire([this._languageId]),r=!1)})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){let e=[];for(let t in this._embeddedModes){const i=Zt.get(t);if(i){if(i instanceof y1){const r=i.getLoadStatus();r.loaded===!1&&e.push(r.promise)}continue}const s=Zt.getPromise(t);s&&e.push(s)}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){let e=u_.create(null,this._lexer.start);return Fl.create(e,null)}tokenize(e,t,i,s){let r=new jhe,o=this._tokenize(e,t,i,s,r);return r.finalize(o)}tokenize2(e,t,i,s){let r=new lC(this._modeService,this._standaloneThemeService.getColorTheme().tokenTheme),o=this._tokenize(e,t,i,s,r);return r.finalize(o)}_tokenize(e,t,i,s,r){return i.embeddedModeData?this._nestedTokenize(e,t,i,s,r):this._myTokenize(e,t,i,s,r)}_findLeavingNestedModeOffset(e,t){let i=this._lexer.tokenizer[t.stack.state];if(!i&&(i=Eb(this._lexer,t.stack.state),!i))throw dt(this._lexer,"tokenizer state is not defined: "+t.stack.state);let s=-1,r=!1;for(const o of i){if(!_P(o.action)||o.action.nextEmbedded!=="@pop")continue;r=!0;let a=o.regex,l=o.regex.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){let h=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),h)}let c=e.search(a);c===-1||c!==0&&o.matchOnlyAtLineStart||(s===-1||c<s)&&(s=c)}if(!r)throw dt(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return s}_nestedTokenize(e,t,i,s,r){let o=this._findLeavingNestedModeOffset(e,i);if(o===-1){let c=r.nestedModeTokenize(e,t,i.embeddedModeData,s);return Fl.create(i.stack,new sm(i.embeddedModeData.languageId,c))}let a=e.substring(0,o);a.length>0&&r.nestedModeTokenize(a,!1,i.embeddedModeData,s);let l=e.substring(o);return this._myTokenize(l,t,i,s+o,r)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,i,s,r){r.enterMode(s,this._languageId);const o=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=i.embeddedModeData,h=i.stack,u=0,d=null,f=!0;for(;f||u<l;){const g=u,p=h.depth,_=d?d.groups.length:0,v=h.state;let b=null,w=null,C=null,y=null,D=null;if(d){b=d.matches;const k=d.groups.shift();w=k.matched,C=k.action,y=d.rule,d.groups.length===0&&(d=null)}else{if(!f&&u>=l)break;f=!1;let k=this._lexer.tokenizer[v];if(!k&&(k=Eb(this._lexer,v),!k))throw dt(this._lexer,"tokenizer state is not defined: "+v);let F=a.substr(u);for(const A of k)if((u===0||!A.matchOnlyAtLineStart)&&(b=F.match(A.regex),b)){w=b[0],C=A.action;break}}if(b||(b=[""],w=""),C||(u<l&&(b=[a.charAt(u)],w=b[0]),C=this._lexer.defaultToken),w===null)break;for(u+=w.length;Hhe(C)&&_P(C)&&C.test;)C=C.test(w,b,v,u===l);let S=null;if(typeof C=="string"||Array.isArray(C))S=C;else if(C.group)S=C.group;else if(C.token!==null&&C.token!==void 0){if(C.tokenSubst?S=Ol(this._lexer,C.token,w,b,v):S=C.token,C.nextEmbedded)if(C.nextEmbedded==="@pop"){if(!c)throw dt(this._lexer,"cannot pop embedded mode if not inside one");c=null}else{if(c)throw dt(this._lexer,"cannot enter embedded mode from within an embedded mode");D=Ol(this._lexer,C.nextEmbedded,w,b,v)}if(C.goBack&&(u=Math.max(0,u-C.goBack)),C.switchTo&&typeof C.switchTo=="string"){let k=Ol(this._lexer,C.switchTo,w,b,v);if(k[0]==="@"&&(k=k.substr(1)),Eb(this._lexer,k))h=h.switchTo(k);else throw dt(this._lexer,"trying to switch to a state '"+k+"' that is undefined in rule: "+this._safeRuleName(y))}else{if(C.transform&&typeof C.transform=="function")throw dt(this._lexer,"action.transform not supported");if(C.next)if(C.next==="@push"){if(h.depth>=this._lexer.maxStack)throw dt(this._lexer,"maximum tokenizer stack size reached: ["+h.state+","+h.parent.state+",...]");h=h.push(v)}else if(C.next==="@pop"){if(h.depth<=1)throw dt(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(y));h=h.pop()}else if(C.next==="@popall")h=h.popall();else{let k=Ol(this._lexer,C.next,w,b,v);if(k[0]==="@"&&(k=k.substr(1)),Eb(this._lexer,k))h=h.push(k);else throw dt(this._lexer,"trying to set a next state '"+k+"' that is undefined in rule: "+this._safeRuleName(y))}}C.log&&typeof C.log=="string"&&$he(this._lexer,this._lexer.languageId+": "+Ol(this._lexer,C.log,w,b,v))}if(S===null)throw dt(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(y));const x=k=>{let F=this._modeService.getModeIdForLanguageName(k);F&&(k=F);const A=this._getNestedEmbeddedModeData(k);if(u<l){const z=e.substr(u);return this._nestedTokenize(z,t,Fl.create(h,A),s+u,r)}else return Fl.create(h,A)};if(Array.isArray(S)){if(d&&d.groups.length>0)throw dt(this._lexer,"groups cannot be nested: "+this._safeRuleName(y));if(b.length!==S.length+1)throw dt(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(y));let k=0;for(let F=1;F<b.length;F++)k+=b[F].length;if(k!==w.length)throw dt(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(y));d={rule:y,matches:b,groups:[]};for(let F=0;F<S.length;F++)d.groups[F]={action:S[F],matched:b[F+1]};u-=w.length;continue}else{if(S==="@rematch"&&(u-=w.length,w="",b=null,S="",D!==null))return x(D);if(w.length===0){if(l===0||p!==h.depth||v!==h.state||(d?d.groups.length:0)!==_)continue;throw dt(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(y))}let k=null;if(jV(S)&&S.indexOf("@brackets")===0){let F=S.substr(9),A=qhe(this._lexer,w);if(!A)throw dt(this._lexer,"@brackets token returned but no bracket defined as: "+w);k=bP(A.token+F)}else{let F=S===""?"":S+this._lexer.tokenPostfix;k=bP(F)}g<o&&r.emit(g+s,k)}if(D!==null)return x(D)}return Fl.create(h,c)}_getNestedEmbeddedModeData(e){let t=this._locateMode(e);if(t){let i=Zt.get(t);if(i)return new sm(t,i.getInitialState())}return new sm(t||dc,g1)}_locateMode(e){if(!e||!this._modeService.isRegisteredMode(e))return null;if(e===this._languageId)return e;const t=this._modeService.getModeId(e);return t&&(this._modeService.triggerMode(t),this._embeddedModes[t]=!0),t}}function qhe(n,e){if(!e)return null;e=Kl(n,e);let t=n.brackets;for(const i of t){if(i.open===e)return{token:i.token,bracketType:1};if(i.close===e)return{token:i.token,bracketType:-1}}return null}function Khe(n,e,t,i){return new y1(n,e,t,i)}var Vx;const Wx=(Vx=window.trustedTypes)===null||Vx===void 0?void 0:Vx.createPolicy("standaloneColorizer",{createHTML:n=>n});class s2{static colorizeElement(e,t,i,s){s=s||{};let r=s.theme||"vs",o=s.mimeType||i.getAttribute("lang")||i.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();e.setTheme(r);let a=i.firstChild?i.firstChild.nodeValue:"";i.className+=" "+r;let l=c=>{var h;const u=(h=Wx==null?void 0:Wx.createHTML(c))!==null&&h!==void 0?h:c;i.innerHTML=u};return this.colorize(t,a||"",o,s).then(l,c=>console.error(c))}static colorize(e,t,i,s){const r=e.languageIdCodec;let o=4;s&&typeof s.tabSize=="number"&&(o=s.tabSize),zA(t)&&(t=t.substr(1));let a=sa(t),l=e.getModeId(i);if(!l)return Promise.resolve(vP(a,o,r));e.triggerMode(l);const c=Zt.get(l);if(c)return zx(a,o,c,r);const h=Zt.getPromise(l);return h?new Promise((u,d)=>{h.then(f=>{zx(a,o,f,r).then(u,d)},d)}):new Promise((u,d)=>{let f=null,g=null;const p=()=>{f&&(f.dispose(),f=null),g&&(g.dispose(),g=null);const _=Zt.get(l);if(_){zx(a,o,_,r).then(u,d);return}u(vP(a,o,r))};g=new Wn,g.cancelAndSet(p,500),f=Zt.onDidChange(_=>{_.changedLanguages.indexOf(l)>=0&&p()})})}static colorizeLine(e,t,i,s,r=4){const o=Ss.isBasicASCII(e,t),a=Ss.containsRTL(e,o,i);return C1(new Ou(!1,!0,e,!1,o,a,0,s,[],r,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,i=4){let s=e.getLineContent(t);e.forceTokenization(t);let o=e.getLineTokens(t).inflate();return this.colorizeLine(s,e.mightContainNonBasicASCII(),e.mightContainRTL(),o,i)}}function zx(n,e,t,i){return new Promise((s,r)=>{const o=()=>{const a=Ghe(n,e,t,i);if(t instanceof y1){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(o,r);return}}s(a)};o()})}function vP(n,e,t){let i=[];const r=new Uint32Array(2);r[0]=0,r[1]=16793600;for(let o=0,a=n.length;o<a;o++){let l=n[o];r[0]=l.length;const c=new Oi(r,l,t),h=Ss.isBasicASCII(l,!0),u=Ss.containsRTL(l,h,!0);let d=C1(new Ou(!1,!0,l,!1,h,u,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(d.html),i.push("<br/>")}return i.join("")}function Ghe(n,e,t,i){let s=[],r=t.getInitialState();for(let o=0,a=n.length;o<a;o++){let l=n[o],c=t.tokenize2(l,!0,r,0);Oi.convertToEndOffset(c.tokens,l.length);let h=new Oi(c.tokens,l,i);const u=Ss.isBasicASCII(l,!0),d=Ss.containsRTL(l,u,!0);let f=C1(new Ou(!1,!0,l,!1,u,d,0,h.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));s=s.concat(f.html),s.push("<br/>"),r=c.endState}return s.join("")}var d_;(function(n){n[n.Ignore=0]="Ignore",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error"})(d_||(d_={}));(function(n){const e="error",t="warning",i="warn",s="info",r="ignore";function o(l){return l?Tp(e,l)?n.Error:Tp(t,l)||Tp(i,l)?n.Warning:Tp(s,l)?n.Info:n.Ignore:n.Ignore}n.fromValue=o;function a(l){switch(l){case n.Error:return e;case n.Warning:return t;case n.Info:return s;default:return r}}n.toString=a})(d_||(d_={}));var qt=d_;function r2(n){return n&&typeof n.getEditorType=="function"?n.getEditorType()===d1.ICodeEditor:!1}const KV=Xe("IWorkspaceEditService");function Yhe(n){return An(n)&&(Boolean(n.newUri)||Boolean(n.oldUri))}function Zhe(n){return An(n)&&xe.isUri(n.resource)&&An(n.edit)}class o2{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(Zhe(t))return new GV(t.resource,t.edit,t.modelVersionId,t.metadata);if(Yhe(t))return new Xhe(t.oldUri,t.newUri,t.options,t.metadata);throw new Error("Unsupported edit")})}}class GV extends o2{constructor(e,t,i,s){super(s),this.resource=e,this.textEdit=t,this.versionId=i}}class Xhe extends o2{constructor(e,t,i,s){super(s),this.oldResource=e,this.newResource=t,this.options=i}}const Qhe=Object.prototype.hasOwnProperty;function Jhe(n,e){for(let t in n)if(Qhe.call(n,t)&&e({key:t,value:n[t]},function(){delete n[t]})===!1)return}class eue{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){const i=this.map.get(e);!i||(i.delete(t),i.size===0&&this.map.delete(e))}forEach(e,t){const i=this.map.get(e);!i||i.forEach(t)}}const wP=new class{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new R,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(n){this._tabFocus!==n&&(this._tabFocus=n,this._onDidChangeTabFocus.fire(this._tabFocus))}},YV=Object.hasOwnProperty;class tue{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class iue{constructor(){this._values=[]}_read(e){return this._values[e]}_write(e,t){this._values[e]=t}}class Oa{static readOptions(e){const t=e,i=new iue;for(const s of Fd){const r=s.name==="_never_"?void 0:t[s.name];i._write(s.id,r)}return i}static validateOptions(e){const t=new Zre;for(const i of Fd)t._write(i.id,i.validate(e._read(i.id)));return t}static computeOptions(e,t){const i=new tue;for(const s of Fd)i._write(s.id,s.compute(t,i,e._read(s.id)));return i}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object")return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?ta(e,t):!1;for(let i in e)if(!Oa._deepEquals(e[i],t[i]))return!1;return!0}static checkEquals(e,t){const i=[];let s=!1;for(const r of Fd){const o=!Oa._deepEquals(e._read(r.id),t._read(r.id));i[r.id]=o,o&&(s=!0)}return s?new C9(i):null}}function nue(n){const e=n.wordWrap;e===!0?n.wordWrap="on":e===!1&&(n.wordWrap="off");const t=n.lineNumbers;t===!0?n.lineNumbers="on":t===!1&&(n.lineNumbers="off"),n.autoClosingBrackets===!1&&(n.autoClosingBrackets="never",n.autoClosingQuotes="never",n.autoSurround="never"),n.cursorBlinking==="visible"&&(n.cursorBlinking="solid");const r=n.renderWhitespace;r===!0?n.renderWhitespace="boundary":r===!1&&(n.renderWhitespace="none");const o=n.renderLineHighlight;o===!0?n.renderLineHighlight="line":o===!1&&(n.renderLineHighlight="none");const a=n.acceptSuggestionOnEnter;a===!0?n.acceptSuggestionOnEnter="on":a===!1&&(n.acceptSuggestionOnEnter="off");const l=n.tabCompletion;l===!1?n.tabCompletion="off":l===!0&&(n.tabCompletion="onlySnippets");const c=n.suggest;if(c&&typeof c.filteredTypes=="object"&&c.filteredTypes){const _={};_.method="showMethods",_.function="showFunctions",_.constructor="showConstructors",_.deprecated="showDeprecated",_.field="showFields",_.variable="showVariables",_.class="showClasses",_.struct="showStructs",_.interface="showInterfaces",_.module="showModules",_.property="showProperties",_.event="showEvents",_.operator="showOperators",_.unit="showUnits",_.value="showValues",_.constant="showConstants",_.enum="showEnums",_.enumMember="showEnumMembers",_.keyword="showKeywords",_.text="showWords",_.color="showColors",_.file="showFiles",_.reference="showReferences",_.folder="showFolders",_.typeParameter="showTypeParameters",_.snippet="showSnippets",Jhe(_,v=>{const b=c.filteredTypes[v.key];b===!1&&(c[v.value]=b)})}const h=n.hover;h===!0?n.hover={enabled:!0}:h===!1&&(n.hover={enabled:!1});const u=n.parameterHints;u===!0?n.parameterHints={enabled:!0}:u===!1&&(n.parameterHints={enabled:!1});const d=n.autoIndent;d===!0?n.autoIndent="full":d===!1&&(n.autoIndent="advanced");const f=n.matchBrackets;f===!0?n.matchBrackets="always":f===!1&&(n.matchBrackets="never");const{renderIndentGuides:g,highlightActiveIndentGuide:p}=n;n.guides||(n.guides={}),g!==void 0&&(n.guides.indentation=!!g),p!==void 0&&(n.guides.highlightActiveIndentation=!!p)}function CP(n){const e=Ml(n);return nue(e),e}class cC extends q{constructor(e,t){super(),this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new R),this.onDidChangeFast=this._onDidChangeFast.event,this.isSimpleWidget=e,this._isDominatedByLongLines=!1,this._computeOptionsMemory=new y9,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._rawOptions=CP(t),this._readOptions=Oa.readOptions(this._rawOptions),this._validatedOptions=Oa.validateOptions(this._readOptions),this._register(Yw.onDidChangeZoomLevel(i=>this._recomputeOptions())),this._register(wP.onDidChangeTabFocus(i=>this._recomputeOptions()))}observeReferenceElement(e){}updatePixelRatio(){}_recomputeOptions(){const e=this.options,t=this._computeInternalOptions();if(!e)this.options=t;else{const i=Oa.checkEquals(e,t);if(i===null)return;this.options=t,this._onDidChangeFast.fire(i),this._onDidChange.fire(i)}}getRawOptions(){return this._rawOptions}_computeInternalOptions(){const e=this._getEnvConfiguration(),t=Fh.createFromValidatedSettings(this._validatedOptions,e.zoomLevel,e.pixelRatio,this.isSimpleWidget),i={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,fontInfo:this.readConfiguration(t),extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:wP.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport};return Oa.computeOptions(this._validatedOptions,i)}static _subsetEquals(e,t){for(const i in t)if(YV.call(t,i)){const s=t[i],r=e[i];if(r===s)continue;if(Array.isArray(r)&&Array.isArray(s)){if(!ta(r,s))return!1;continue}if(r&&typeof r=="object"&&s&&typeof s=="object"){if(!this._subsetEquals(r,s))return!1;continue}return!1}return!0}updateOptions(e){if(typeof e=="undefined")return;const t=CP(e);cC._subsetEquals(this._rawOptions,t)||(this._rawOptions=po(this._rawOptions,t||{}),this._readOptions=Oa.readOptions(this._rawOptions),this._validatedOptions=Oa.validateOptions(this._readOptions),this._recomputeOptions())}setIsDominatedByLongLines(e){this._isDominatedByLongLines=e,this._recomputeOptions()}setMaxLineNumber(e){const t=cC._digitCount(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}static _digitCount(e){let t=0;for(;e;)e=Math.floor(e/10),t++;return t||1}}const sue=Object.freeze({id:"editor",order:5,type:"object",title:m("editorConfigurationTitle","Editor"),scope:5}),rue=$i.as(Eg.Configuration),hC=Object.assign(Object.assign({},sue),{properties:{"editor.tabSize":{type:"number",default:rn.tabSize,minimum:1,markdownDescription:m("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:rn.insertSpaces,markdownDescription:m("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:rn.detectIndentation,markdownDescription:m("detectIndentation","Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:"boolean",default:rn.trimAutoWhitespace,description:m("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:rn.largeFileOptimizations,description:m("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:m("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[m("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),m("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),m("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:m("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[m("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),m("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),m("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:m("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:m("stablePeek","Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:m("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.language.brackets":{type:"array",default:!1,description:m("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:m("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:m("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:"array",default:!1,description:m("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:m("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:m("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:m("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:50,description:m("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:m("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:m("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:m("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:m("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[m("wordWrap.off","Lines will never wrap."),m("wordWrap.on","Lines will wrap at the viewport width."),m("wordWrap.inherit","Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function oue(n){return typeof n.type!="undefined"||typeof n.anyOf!="undefined"}for(const n of Fd){const e=n.schema;if(typeof e!="undefined")if(oue(e))hC.properties[`editor.${n.name}`]=e;else for(let t in e)YV.call(e,t)&&(hC.properties[t]=e[t])}let Ib=null;function ZV(){return Ib===null&&(Ib=Object.create(null),Object.keys(hC.properties).forEach(n=>{Ib[n]=!0})),Ib}function aue(n){return ZV()[`editor.${n}`]||!1}function lue(n){return ZV()[`diffEditor.${n}`]||!1}rue.registerConfiguration(hC);class Hf{static insert(e,t){return{range:new I(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}class As{constructor(e={},t=[],i=[]){this._contents=e,this._keys=t,this._overrides=i,this.isFrozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?Uce(this.contents,e):this.contents}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){const t=Ml(this.contents),i=Ml(this.overrides),s=[...this.keys];for(const r of e){this.mergeContents(t,r.contents);for(const o of r.overrides){const[a]=i.filter(l=>ta(l.identifiers,o.identifiers));a?this.mergeContents(a.contents,o.contents):i.push(Ml(o))}for(const o of r.keys)s.indexOf(o)===-1&&s.push(o)}return new As(t,s,i)}freeze(){return this.isFrozen=!0,this}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;let i={};for(const s of oC([...Object.keys(this.contents),...Object.keys(t)])){let r=this.contents[s],o=t[s];o&&(typeof r=="object"&&typeof o=="object"?(r=Ml(r),this.mergeContents(r,o)):r=o),i[s]=r}return new As(i,this.keys,this.overrides)}mergeContents(e,t){for(const i of Object.keys(t)){if(i in e&&An(e[i])&&An(t[i])){this.mergeContents(e[i],t[i]);continue}e[i]=Ml(t[i])}}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?xle(e):e}getContentsForOverrideIdentifer(e){for(const t of this.overrides)if(t.identifiers.indexOf(e)!==-1)return t.contents;return null}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),QA(this.contents,e,t,i=>{throw new Error(i)})}removeValue(e){this.removeKey(e)&&$ce(this.contents,e)}addKey(e){let t=this.keys.length;for(let i=0;i<t;i++)e.indexOf(this.keys[i])===0&&(t=i);this.keys.splice(t,1,e)}removeKey(e){let t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1}}class cue extends As{constructor(){const e=qce(),t=jce(),i=[];for(const s of Object.keys(e))XA.test(s)&&i.push({identifiers:[Wce(s).trim()],keys:Object.keys(e[s]),contents:EV(e[s],r=>console.error(`Conflict in default settings file: ${r}`))});super(e,t,i)}}class S1{constructor(e,t,i=new As,s=new As,r=new _n,o=new As,a=new _n,l=!0){this._defaultConfiguration=e,this._localUserConfiguration=t,this._remoteUserConfiguration=i,this._workspaceConfiguration=s,this._folderConfigurations=r,this._memoryConfiguration=o,this._memoryConfigurationByResource=a,this._freeze=l,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new _n,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidateConfigurationModel(t,i).getValue(e)}updateValue(e,t,i={}){let s;i.resource?(s=this._memoryConfigurationByResource.get(i.resource),s||(s=new As,this._memoryConfigurationByResource.set(i.resource,s))):s=this._memoryConfiguration,t===void 0?s.removeValue(e):s.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}getConsolidateConfigurationModel(e,t){let i=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier?i.override(e.overrideIdentifier):i}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const s=t.getFolder(e);s&&(i=this.getFolderConsolidatedConfiguration(s.uri)||i);const r=this._memoryConfigurationByResource.get(e);r&&(i=i.merge(r))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),s=this._folderConfigurations.get(e);s?(t=i.merge(s),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:i,overrides:s,keys:r}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:s,keys:r}]),e},[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),i=this.parseConfigurationModel(e.user),s=this.parseConfigurationModel(e.workspace),r=e.folders.reduce((o,a)=>(o.set(xe.revive(a[0]),this.parseConfigurationModel(a[1])),o),new _n);return new S1(t,i,new As,s,r,new As,new _n,!1)}static parseConfigurationModel(e){return new As(e.contents,e.keys,e.overrides).freeze()}}class hue{constructor(e,t,i,s){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=s,this._previousConfiguration=void 0;const r=new Set;e.keys.forEach(a=>r.add(a)),e.overrides.forEach(([,a])=>a.forEach(l=>r.add(l))),this.affectedKeys=[...r.values()];const o=new As;this.affectedKeys.forEach(a=>o.setValue(a,{})),this.affectedKeysTree=o.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=S1.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var i;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)){if(t){const s=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(i=this.previous)===null||i===void 0?void 0:i.workspace):void 0,r=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!Gr(s,r)}return!0}return!1}doesAffectedKeysTreeContains(e,t){let i=EV({[t]:!0},()=>{}),s;for(;typeof i=="object"&&(s=Object.keys(i)[0]);){if(e=e[s],!e)return!1;i=i[s]}return!0}}const uue=/^(cursor|delete)/;class due extends q{constructor(e,t,i,s,r){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=i,this._notificationService=s,this._logService=r,this._onDidUpdateKeybindings=this._register(new R),this._currentChord=null,this._currentChordChecker=new M0,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=zd.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new Wn,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:ue.None}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const i=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(!!i)return i.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){const i=this.resolveKeyboardEvent(e);if(i.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[s]=i.getDispatchParts();if(s===null)return null;const r=this._contextKeyService.getContext(t),o=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(r,o,s)}_enterChordMode(e,t){this._currentChord={keypress:e,label:t},this._currentChordStatusMessage=this._notificationService.status(m("first.chord","({0}) was pressed. Waiting for second key of chord...",t));const i=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-i>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const i=this.resolveKeyboardEvent(e),[s]=i.getSingleModifierDispatchParts();if(s)return this._ignoreSingleModifiers.has(s)?(this._log(`+ Ignoring single modifier ${s} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=zd.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=zd.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${s}.`),this._currentSingleModifier=s,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):s===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${s} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(i,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[r]=i.getParts();return this._ignoreSingleModifiers=new zd(r),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,i=!1){let s=!1;if(e.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let r=null,o=null;if(i){const[h]=e.getSingleModifierDispatchParts();r=h,o=h}else[r]=e.getDispatchParts(),o=this._currentChord?this._currentChord.keypress:null;if(r===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),s;const a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,o,r);return this._logService.trace("KeybindingService#dispatch",l,c==null?void 0:c.commandId),c&&c.enterChord?(s=!0,this._enterChordMode(r,l),s):(this._currentChord&&(!c||!c.commandId)&&(this._notificationService.status(m("missing.chord","The key combination ({0}, {1}) is not a command.",this._currentChord.label,l),{hideAfter:10*1e3}),s=!0),this._leaveChordMode(),c&&c.commandId&&(c.bubble||(s=!0),typeof c.commandArgs=="undefined"?this._commandService.executeCommand(c.commandId).then(void 0,h=>this._notificationService.warn(h)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,h=>this._notificationService.warn(h)),uue.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding"})),s)}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}class zd{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}zd.EMPTY=new zd(null);let x1=qre||"";const Xi=new Map;Xi.set("false",!1);Xi.set("true",!0);Xi.set("isMac",je);Xi.set("isLinux",Fn);Xi.set("isWindows",Zi);Xi.set("isWeb",T0);Xi.set("isMacNative",je&&!T0);Xi.set("isEdge",x1.indexOf("Edg/")>=0);Xi.set("isFirefox",x1.indexOf("Firefox")>=0);Xi.set("isChrome",x1.indexOf("Chrome")>=0);Xi.set("isSafari",x1.indexOf("Safari")>=0);const fue=Object.prototype.hasOwnProperty;class le{static has(e){return fc.create(e)}static equals(e,t){return $f.create(e,t)}static regex(e,t){return uC.create(e,t)}static not(e){return hu.create(e)}static and(...e){return Wl.create(e,null)}static or(...e){return Ya.create(e,null,!0)}static deserialize(e,t=!1){if(!!e)return this._deserializeOrExpression(e,t)}static _deserializeOrExpression(e,t){let i=e.split("||");return Ya.create(i.map(s=>this._deserializeAndExpression(s,t)),null,!0)}static _deserializeAndExpression(e,t){let i=e.split("&&");return Wl.create(i.map(s=>this._deserializeOne(s,t)),null)}static _deserializeOne(e,t){if(e=e.trim(),e.indexOf("!=")>=0){let i=e.split("!=");return D1.create(i[0].trim(),this._deserializeValue(i[1],t))}if(e.indexOf("==")>=0){let i=e.split("==");return $f.create(i[0].trim(),this._deserializeValue(i[1],t))}if(e.indexOf("=~")>=0){let i=e.split("=~");return uC.create(i[0].trim(),this._deserializeRegexValue(i[1],t))}if(e.indexOf(" in ")>=0){let i=e.split(" in ");return a2.create(i[0].trim(),i[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const i=e.split(">=");return E1.create(i[0].trim(),i[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const i=e.split(">");return k1.create(i[0].trim(),i[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const i=e.split("<=");return T1.create(i[0].trim(),i[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const i=e.split("<");return I1.create(i[0].trim(),i[1].trim())}return/^\!\s*/.test(e)?hu.create(e.substr(1).trim()):fc.create(e)}static _deserializeValue(e,t){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;let i=/^'([^']*)'$/.exec(e);return i?i[1].trim():e}static _deserializeRegexValue(e,t){if(Z9(e)){if(t)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}let i=e.indexOf("/"),s=e.lastIndexOf("/");if(i===s||i<0){if(t)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}let r=e.slice(i+1,s),o=e[s+1]==="i"?"i":"";try{return new RegExp(r,o)}catch(a){if(t)throw new Error(`bad regexp-value '${e}', parse error: ${a}`);return console.warn(`bad regexp-value '${e}', parse error: ${a}`),null}}}function gue(n,e){const t=n?n.substituteConstants():void 0,i=e?e.substituteConstants():void 0;return!t&&!i?!0:!t||!i?!1:t.equals(i)}function lf(n,e){return n.cmp(e)}class xs{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return Us.INSTANCE}}xs.INSTANCE=new xs;class Us{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return xs.INSTANCE}}Us.INSTANCE=new Us;class fc{constructor(e,t){this.key=e,this.negated=t,this.type=2}static create(e,t=null){const i=Xi.get(e);return typeof i=="boolean"?i?Us.INSTANCE:xs.INSTANCE:new fc(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:QV(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Xi.get(this.key);return typeof e=="boolean"?e?Us.INSTANCE:xs.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=hu.create(this.key,this)),this.negated}}class $f{constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=4}static create(e,t,i=null){if(typeof t=="boolean")return t?fc.create(e,i):hu.create(e,i);const s=Xi.get(e);return typeof s=="boolean"?t===(s?"true":"false")?Us.INSTANCE:xs.INSTANCE:new $f(e,t,i)}cmp(e){return e.type!==this.type?this.type-e.type:Fu(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Xi.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Us.INSTANCE:xs.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=D1.create(this.key,this.value,this)),this.negated}}class a2{constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}static create(e,t){return new a2(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Fu(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.indexOf(i)>=0:typeof i=="string"&&typeof t=="object"&&t!==null?fue.call(t,i):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=l2.create(this)),this.negated}}class l2{constructor(e){this._actual=e,this.type=11}static create(e){return new l2(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}class D1{constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=5}static create(e,t,i=null){if(typeof t=="boolean")return t?hu.create(e,i):fc.create(e,i);const s=Xi.get(e);return typeof s=="boolean"?t===(s?"true":"false")?xs.INSTANCE:Us.INSTANCE:new D1(e,t,i)}cmp(e){return e.type!==this.type?this.type-e.type:Fu(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Xi.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?xs.INSTANCE:Us.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=$f.create(this.key,this.value,this)),this.negated}}class hu{constructor(e,t){this.key=e,this.negated=t,this.type=3}static create(e,t=null){const i=Xi.get(e);return typeof i=="boolean"?i?xs.INSTANCE:Us.INSTANCE:new hu(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:QV(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Xi.get(this.key);return typeof e=="boolean"?e?xs.INSTANCE:Us.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=fc.create(this.key,this)),this.negated}}function L1(n,e){if(typeof n=="string"){const t=parseFloat(n);isNaN(t)||(n=t)}return typeof n=="string"||typeof n=="number"?e(n):xs.INSTANCE}class k1{constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=12}static create(e,t,i=null){return L1(t,s=>new k1(e,s,i))}cmp(e){return e.type!==this.type?this.type-e.type:Fu(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=T1.create(this.key,this.value,this)),this.negated}}class E1{constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=13}static create(e,t,i=null){return L1(t,s=>new E1(e,s,i))}cmp(e){return e.type!==this.type?this.type-e.type:Fu(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=I1.create(this.key,this.value,this)),this.negated}}class I1{constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=14}static create(e,t,i=null){return L1(t,s=>new I1(e,s,i))}cmp(e){return e.type!==this.type?this.type-e.type:Fu(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=E1.create(this.key,this.value,this)),this.negated}}class T1{constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=15}static create(e,t,i=null){return L1(t,s=>new T1(e,s,i))}cmp(e){return e.type!==this.type?this.type-e.type:Fu(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=k1.create(this.key,this.value,this)),this.negated}}class uC{constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}static create(e,t){return new uC(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=c2.create(this)),this.negated}}class c2{constructor(e){this._actual=e,this.type=8}static create(e){return new c2(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}function XV(n){let e=null;for(let t=0,i=n.length;t<i;t++){const s=n[t].substituteConstants();if(n[t]!==s&&e===null){e=[];for(let r=0;r<t;r++)e[r]=n[r]}e!==null&&(e[t]=s)}return e===null?n:e}class Wl{constructor(e,t){this.expr=e,this.negated=t,this.type=6}static create(e,t){return Wl._normalizeArr(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const s=lf(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=XV(this.expr);return e===this.expr?this:Wl.create(e,this.negated)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t){const i=[];let s=!1;for(const r of e)if(!!r){if(r.type===1){s=!0;continue}if(r.type===0)return xs.INSTANCE;if(r.type===6){i.push(...r.expr);continue}i.push(r)}if(i.length===0&&s)return Us.INSTANCE;if(i.length!==0){if(i.length===1)return i[0];i.sort(lf);for(let r=1;r<i.length;r++)i[r-1].equals(i[r])&&(i.splice(r,1),r--);if(i.length===1)return i[0];for(;i.length>1;){const r=i[i.length-1];if(r.type!==9)break;i.pop();const o=i.pop(),a=i.length===0,l=Ya.create(r.expr.map(c=>Wl.create([c,o],null)),null,a);l&&(i.push(l),i.sort(lf))}return i.length===1?i[0]:new Wl(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(let t of this.expr)e.push(t.negate());this.negated=Ya.create(e,this,!0)}return this.negated}}class Ya{constructor(e,t){this.expr=e,this.negated=t,this.type=9}static create(e,t,i){return Ya._normalizeArr(e,t,i)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const s=lf(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=XV(this.expr);return e===this.expr?this:Ya.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,i){let s=[],r=!1;if(e){for(let o=0,a=e.length;o<a;o++){const l=e[o];if(!!l){if(l.type===0){r=!0;continue}if(l.type===1)return Us.INSTANCE;if(l.type===9){s=s.concat(l.expr);continue}s.push(l)}}if(s.length===0&&r)return xs.INSTANCE;s.sort(lf)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(i){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)JV(s[o],s[a])&&(s.splice(a,1),a--);if(s.length===1)return s[0]}return new Ya(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),i=e.shift(),s=[];for(const o of dC(t))for(const a of dC(i))s.push(Wl.create([o,a],null));const r=e.length===0;e.unshift(Ya.create(s,null,r))}this.negated=e[0]}return this.negated}}class he extends fc{constructor(e,t,i){super(e,null),this._defaultValue=t,typeof i=="object"?he._info.push(Object.assign(Object.assign({},i),{key:e})):i!==!0&&he._info.push({key:e,description:i,type:t!=null?typeof t:void 0})}static all(){return he._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return $f.create(this.key,e)}}he._info=[];const Le=Xe("contextKeyService"),pue="setContext";function QV(n,e){return n<e?-1:n>e?1:0}function Fu(n,e,t,i){return n<t?-1:n>t?1:e<i?-1:e>i?1:0}function JV(n,e){if(e.type===6&&n.type!==9&&n.type!==6){for(const s of e.expr)if(n.equals(s))return!0}const t=n.negate(),i=dC(t).concat(dC(e));i.sort(lf);for(let s=0;s<i.length;s++){const o=i[s].negate();for(let a=s+1;a<i.length;a++){const l=i[a];if(o.equals(l))return!0}}return!1}function dC(n){return n.type===9?n.expr:[n]}class cf{constructor(e,t,i){this._log=i,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(let s=0,r=e.length;s<r;s++){const o=e[s].command;o&&this._defaultBoundCommands.set(o,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=cf.combine(e,t);for(let s=0,r=this._keybindings.length;s<r;s++){let o=this._keybindings[s];o.keypressParts.length!==0&&(o.when&&o.when.type===0||this._addKeyPress(o.keypressParts[0],o))}}static _isTargetedForRemoval(e,t,i,s,r){return!(e.command!==s||t&&e.keypressParts[0]!==t||i&&e.keypressParts[1]!==i||r&&(!e.when||!gue(r,e.when)))}static combine(e,t){e=e.slice(0);let i=[];for(const s of t){if(!s.command||s.command.length===0||s.command.charAt(0)!=="-"){i.push(s);continue}const r=s.command.substr(1),o=s.keypressParts[0],a=s.keypressParts[1],l=s.when;for(let c=e.length-1;c>=0;c--)this._isTargetedForRemoval(e[c],o,a,r,l)&&e.splice(c,1)}return e.concat(i)}_addKeyPress(e,t){const i=this._map.get(e);if(typeof i=="undefined"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let s=i.length-1;s>=0;s--){let r=i[s];if(r.command===t.command)continue;const o=r.keypressParts.length>1,a=t.keypressParts.length>1;o&&a&&r.keypressParts[1]!==t.keypressParts[1]||cf.whenIsEntirelyIncluded(r.when,t.when)&&this._removeFromLookupMap(r)}i.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t=="undefined"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);if(typeof t!="undefined"){for(let i=0,s=t.length;i<s;i++)if(t[i]===e){t.splice(i,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:JV(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const i=this._lookupMap.get(e);if(typeof i=="undefined"||i.length===0)return null;if(i.length===1)return i[0];for(let s=i.length-1;s>=0;s--){const r=i[s];if(t.contextMatchesRules(r.when))return r}return i[i.length-1]}resolve(e,t,i){this._log(`| Resolving ${i}${t?` chorded from ${t}`:""}`);let s=null;if(t!==null){const o=this._map.get(t);if(typeof o=="undefined")return this._log("\\ No keybinding entries."),null;s=[];for(let a=0,l=o.length;a<l;a++){let c=o[a];c.keypressParts[1]===i&&s.push(c)}}else{const o=this._map.get(i);if(typeof o=="undefined")return this._log("\\ No keybinding entries."),null;s=o}let r=this._findCommand(e,s);return r?t===null&&r.keypressParts.length>1&&r.keypressParts[1]!==null?(this._log(`\\ From ${s.length} keybinding entries, matched chord, when: ${yP(r.when)}, source: ${SP(r)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${s.length} keybinding entries, matched ${r.command}, when: ${yP(r.when)}, source: ${SP(r)}.`),{enterChord:!1,leaveChord:r.keypressParts.length>1,commandId:r.command,commandArgs:r.commandArgs,bubble:r.bubble}):(this._log(`\\ From ${s.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,t){for(let i=t.length-1;i>=0;i--){let s=t[i];if(!!cf.contextMatchesRules(e,s.when))return s}return null}static contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function yP(n){return n?`${n.serialize()}`:"no when condition"}function SP(n){return n.extensionId?n.isBuiltinExtension?`built-in extension ${n.extensionId}`:`user extension ${n.extensionId}`:n.isDefault?"built-in":"user"}class fC{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(dr===1){if(e&&e.win)return e.win}else if(dr===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=fC.bindToCurrentPlatform(e);if(t&&t.primary){const i=hE(t.primary,dr);i&&this._registerDefaultKeybinding(i,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let i=0,s=t.secondary.length;i<s;i++){const r=t.secondary[i],o=hE(r,dr);o&&this._registerDefaultKeybinding(o,e.id,e.args,e.weight,-i-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),lt.registerCommand(e)}static _mightProduceChar(e){return e>=21&&e<=30||e>=31&&e<=56?!0:e===80||e===81||e===82||e===83||e===84||e===85||e===86||e===110||e===111||e===87||e===88||e===89||e===90||e===91||e===92}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&fC._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,i,s,r,o){dr===1&&this._assertNoCtrlAlt(e.parts[0],t),this._coreKeybindings.push({keybinding:e.parts,command:t,commandArgs:i,when:o,weight1:s,weight2:r,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(_ue)),this._cachedMergedKeybindings.slice(0)}}const yn=new fC,mue={EditorModes:"platform.keybindingsRegistry"};$i.add(mue.EditorModes,yn);function _ue(n,e){return n.weight1!==e.weight1?n.weight1-e.weight1:n.command<e.command?-1:n.command>e.command?1:n.weight2-e.weight2}class xP{constructor(e,t,i,s,r,o,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.keypressParts=e?UE(e.getDispatchParts()):[],e&&this.keypressParts.length===0&&(this.keypressParts=UE(e.getSingleModifierDispatchParts())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=s,this.isDefault=r,this.extensionId=o,this.isBuiltinExtension=a}}function UE(n){let e=[];for(let t=0,i=n.length;t<i;t++){const s=n[t];if(!s)return e;e.push(s)}return e}class h2{constructor(e,t,i=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=i}toLabel(e,t,i){if(t.length===0)return null;const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=i(a);if(l===null)return null;s[r]=wue(a,l,this.modifierLabels[e])}return s.join(" ")}}const u2=new h2({ctrlKey:"\u2303",shiftKey:"\u21E7",altKey:"\u2325",metaKey:"\u2318",separator:""},{ctrlKey:m({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:m({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:m({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:m({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),bue=new h2({ctrlKey:m({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:m({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:m({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),vue=new h2({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});function wue(n,e,t){if(e===null)return"";const i=[];return n.ctrlKey&&i.push(t.ctrlKey),n.shiftKey&&i.push(t.shiftKey),n.altKey&&i.push(t.altKey),n.metaKey&&i.push(t.metaKey),e!==""&&i.push(e),i.join(t.separator)}class Cue extends hae{constructor(e,t){if(super(),t.length===0)throw Zo("parts");this._os=e,this._parts=t}getLabel(){return u2.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return bue.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._parts.length>1||this._parts[0].isDuplicateModifierCase()?null:vue.toLabel(this._os,this._parts,e=>this._getElectronAccelerator(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){return new cae(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}getSingleModifierDispatchParts(){return this._parts.map(e=>this._getSingleModifierDispatchPart(e))}}class f_ extends Cue{constructor(e,t){super(t,e.parts)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"\u2190";case 16:return"\u2191";case 17:return"\u2192";case 18:return"\u2193"}return _h.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":_h.toString(e.keyCode)}_getElectronAccelerator(e){return _h.toElectronAccelerator(e.keyCode)}_getDispatchPart(e){return f_.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=_h.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=kA[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 83;case 52:return 81;case 53:return 87;case 54:return 89;case 55:return 88;case 56:return 0;case 57:return 80;case 58:return 90;case 59:return 86;case 60:return 82;case 61:return 84;case 62:return 85;case 106:return 92}return 0}static _resolveSimpleUserBinding(e){if(!e)return null;if(e instanceof ou)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new ou(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveUserBinding(e,t){const i=UE(e.map(s=>this._resolveSimpleUserBinding(s)));return i.length>0?[new f_(new Uw(i),t)]:[]}}const en=Xe("notificationService");class yue{}const eW=Xe("contextService");class Sue{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}var DP;(function(n){n.noSelection=m("noSelection","No selection"),n.singleSelectionRange=m("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),n.singleSelection=m("singleSelection","Line {0}, Column {1}"),n.multiSelectionRange=m("multiSelectionRange","{0} selections ({1} characters selected)"),n.multiSelection=m("multiSelection","{0} selections"),n.emergencyConfOn=m("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),n.openingDocs=m("openingDocs","Now opening the Editor Accessibility documentation page."),n.readonlyDiffEditor=m("readonlyDiffEditor"," in a read-only pane of a diff editor."),n.editableDiffEditor=m("editableDiffEditor"," in a pane of a diff editor."),n.readonlyEditor=m("readonlyEditor"," in a read-only code editor"),n.editableEditor=m("editableEditor"," in a code editor"),n.changeConfigToOnMac=m("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),n.changeConfigToOnWinLinux=m("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),n.auto_on=m("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),n.auto_off=m("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),n.tabFocusModeOnMsg=m("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),n.tabFocusModeOnMsgNoKb=m("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),n.tabFocusModeOffMsg=m("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),n.tabFocusModeOffMsgNoKb=m("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),n.openDocMac=m("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),n.openDocWinLinux=m("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),n.outroMsg=m("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),n.showAccessibilityHelpAction=m("showAccessibilityHelpAction","Show Accessibility Help")})(DP||(DP={}));var LP;(function(n){n.inspectTokensAction=m("inspectTokens","Developer: Inspect Tokens")})(LP||(LP={}));var kP;(function(n){n.gotoLineActionLabel=m("gotoLineActionLabel","Go to Line/Column...")})(kP||(kP={}));var EP;(function(n){n.helpQuickAccessActionLabel=m("helpQuickAccess","Show all Quick Access Providers")})(EP||(EP={}));var IP;(function(n){n.quickCommandActionLabel=m("quickCommandActionLabel","Command Palette"),n.quickCommandHelp=m("quickCommandActionHelp","Show And Run Commands")})(IP||(IP={}));var TP;(function(n){n.quickOutlineActionLabel=m("quickOutlineActionLabel","Go to Symbol..."),n.quickOutlineByCategoryActionLabel=m("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(TP||(TP={}));var gC;(function(n){n.editorViewAccessibleLabel=m("editorViewAccessibleLabel","Editor content"),n.accessibilityHelpMessage=m("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(gC||(gC={}));var NP;(function(n){n.toggleHighContrast=m("toggleHighContrast","Toggle High Contrast Theme")})(NP||(NP={}));var jE;(function(n){n.bulkEditServiceSummary=m("bulkEditServiceSummary","Made {0} edits in {1} files")})(jE||(jE={}));var tW=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},iW=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},nW=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class xue{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new R}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}function Due(n,e,t){return r2(n)?e(n):t(n)}let qE=class{constructor(e){this.modelService=e}setEditor(e){this.editor=e}createModelReference(e){let t=null;return this.editor&&(t=Due(this.editor,i=>this.findModel(i,e),i=>this.findModel(i.getOriginalEditor(),e)||this.findModel(i.getModifiedEditor(),e))),t?Promise.resolve(new Foe(new xue(t))):Promise.reject(new Error("Model not found"))}findModel(e,t){let i=this.modelService.getModel(t);return i&&i.uri.toString()!==t.toString()?null:i}};qE=tW([iW(0,zn)],qE);class N1{show(){return N1.NULL_PROGRESS_RUNNER}showWhile(e,t){return nW(this,void 0,void 0,function*(){yield e})}}N1.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class Lue{confirm(e){return this.doConfirm(e).then(t=>({confirmed:t,checkboxChecked:!1}))}doConfirm(e){let t=e.message;return e.detail&&(t=t+`

`+e.detail),Promise.resolve(window.confirm(t))}show(e,t,i,s){return Promise.resolve({choice:0})}}class A1{info(e){return this.notify({severity:qt.Info,message:e})}warn(e){return this.notify({severity:qt.Warning,message:e})}error(e){return this.notify({severity:qt.Error,message:e})}notify(e){switch(e.severity){case qt.Error:console.error(e.message);break;case qt.Warning:console.warn(e.message);break;default:console.log(e.message);break}return A1.NO_OP}status(e,t){return q.None}}A1.NO_OP=new yue;class kue{constructor(e){this._onWillExecuteCommand=new R,this._onDidExecuteCommand=new R,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const i=lt.getCommand(e);if(!i)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const s=this._instantiationService.invokeFunction.apply(this._instantiationService,[i.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(s)}catch(s){return Promise.reject(s)}}}class sW extends due{constructor(e,t,i,s,r,o){super(e,t,i,s,r),this._cachedResolver=null,this._dynamicKeybindings=[],this._register(K(o,de.KEY_DOWN,a=>{const l=new Ft(a);this._dispatch(l,l.target)&&(l.preventDefault(),l.stopPropagation())})),this._register(K(window,de.KEY_UP,a=>{const l=new Ft(a);this._singleModifierDispatch(l,l.target)&&l.preventDefault()}))}addDynamicKeybinding(e,t,i,s){const r=hE(t,dr),o=new ee;return r&&(this._dynamicKeybindings.push({keybinding:r.parts,command:e,when:s,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}),o.add(Ze(()=>{for(let a=0;a<this._dynamicKeybindings.length;a++)if(this._dynamicKeybindings[a].command===e){this._dynamicKeybindings.splice(a,1),this.updateResolver({source:1});return}}))),o.add(lt.registerCommand(e,i)),this.updateResolver({source:1}),o}updateResolver(e){this._cachedResolver=null,this._onDidUpdateKeybindings.fire(e)}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(yn.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new cf(e,t,i=>this._log(i))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){let i=[],s=0;for(const r of e){const o=r.when||void 0,a=r.keybinding;if(!a)i[s++]=new xP(void 0,r.command,r.commandArgs,o,t,null,!1);else{const l=f_.resolveUserBinding(a,dr);for(const c of l)i[s++]=new xP(c,r.command,r.commandArgs,o,t,null,!1)}}return i}resolveKeyboardEvent(e){let t=new ou(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode).toChord();return new f_(t,dr)}}function AP(n){return n&&typeof n=="object"&&(!n.overrideIdentifier||typeof n.overrideIdentifier=="string")&&(!n.resource||n.resource instanceof xe)}class rW{constructor(){this._onDidChangeConfiguration=new R,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new S1(new cue,new As)}getValue(e,t){const i=typeof e=="string"?e:void 0,s=AP(e)?e:AP(t)?t:{};return this._configuration.getValue(i,s,void 0)}updateValues(e){const t={data:this._configuration.toData()};let i=[];for(const s of e){const[r,o]=s;this.getValue(r)!==o&&(this._configuration.updateValue(r,o),i.push(r))}if(i.length>0){const s=new hue({keys:i,overrides:[]},t,this._configuration);s.source=7,s.sourceConfig=null,this._onDidChangeConfiguration.fire(s)}return Promise.resolve()}}class Eue{constructor(e){this.configurationService=e,this._onDidChangeConfiguration=new R,this.configurationService.onDidChangeConfiguration(t=>{this._onDidChangeConfiguration.fire({affectedKeys:t.affectedKeys,affectsConfiguration:(i,s)=>t.affectsConfiguration(s)})})}getValue(e,t,i){const r=(P.isIPosition(t)?t:null)?typeof i=="string"?i:void 0:typeof t=="string"?t:void 0;return typeof r=="undefined"?this.configurationService.getValue():this.configurationService.getValue(r)}}let KE=class{constructor(e){this.configurationService=e}getEOL(e,t){const i=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return i&&typeof i=="string"&&i!=="auto"?i:Fn||je?`
`:`\r
`}};KE=tW([iW(0,si)],KE);class Iue{publicLog(e,t){return Promise.resolve(void 0)}publicLog2(e,t){return this.publicLog(e,t)}}class M1{constructor(){const e=xe.from({scheme:M1.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new Sue({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}}M1.SCHEME="inmemory";function pC(n,e,t){if(!e||!(n instanceof rW))return;let i=[];Object.keys(e).forEach(s=>{aue(s)&&i.push([`editor.${s}`,e[s]]),t&&lue(s)&&i.push([`diffEditor.${s}`,e[s]])}),i.length>0&&n.updateValues(i)}class Tue{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return nW(this,void 0,void 0,function*(){const i=new Map;for(let o of e){if(!(o instanceof GV))throw new Error("bad edit - only text edits are supported");const a=this._modelService.getModel(o.resource);if(!a)throw new Error("bad edit - model not found");if(typeof o.versionId=="number"&&a.getVersionId()!==o.versionId)throw new Error("bad state - model changed in the meantime");let l=i.get(a);l||(l=[],i.set(a,l)),l.push(Hf.replaceMove(I.lift(o.textEdit.range),o.textEdit.text))}let s=0,r=0;for(const[o,a]of i)o.pushStackElement(),o.pushEditOperations([],a,()=>[]),o.pushStackElement(),r+=1,s+=a.length;return{ariaSummary:cr(jE.bulkEditServiceSummary,s,r)}})}}class Nue{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}}class Aue{constructor(e,t){this._codeEditorService=e,this._container=t,this.onDidLayout=ue.None}get dimension(){return this._dimension||(this._dimension=c1(window.document.body)),this._dimension}get container(){return this._container}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}}const MP=2e4;let th,Pv,GE,Bv,YE;function Mue(n){th=document.createElement("div"),th.className="monaco-aria-container";const e=()=>{const i=document.createElement("div");return i.className="monaco-alert",i.setAttribute("role","alert"),i.setAttribute("aria-atomic","true"),th.appendChild(i),i};Pv=e(),GE=e();const t=()=>{const i=document.createElement("div");return i.className="monaco-status",i.setAttribute("role","complementary"),i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),th.appendChild(i),i};Bv=t(),YE=t(),n.appendChild(th)}function Pu(n){!th||(Pv.textContent!==n?(Yi(GE),_C(Pv,n)):(Yi(Pv),_C(GE,n)))}function mC(n){!th||(je?Pu(n):Bv.textContent!==n?(Yi(YE),_C(Bv,n)):(Yi(Bv),_C(YE,n)))}function _C(n,e){Yi(n),e.length>MP&&(e=e.substr(0,MP)),n.textContent=e,n.style.visibility="hidden",n.style.visibility="visible"}const d2=Xe("markerDecorationsService");var bC=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class Cr extends q{constructor(e,t="",i="",s=!0,r){super(),this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=i,this._enabled=s,this._actionCallback=r}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return bC(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}}class Uf extends q{constructor(){super(...arguments),this._onBeforeRun=this._register(new R),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new R),this.onDidRun=this._onDidRun.event}run(e,t){return bC(this,void 0,void 0,function*(){if(!e.enabled)return;this._onBeforeRun.fire({action:e});let i;try{yield this.runAction(e,t)}catch(s){i=s}this._onDidRun.fire({action:e,error:i})})}runAction(e,t){return bC(this,void 0,void 0,function*(){yield e.run(t)})}}class Yr extends Cr{constructor(e){super(Yr.ID,e,e?"separator text":"separator"),this.checked=!1,this.enabled=!1}}Yr.ID="vs.actions.separator";class f2{constructor(e,t,i,s){this.tooltip="",this.enabled=!0,this.checked=!1,this.id=e,this.label=t,this.class=s,this._actions=i}get actions(){return this._actions}dispose(){}run(){return bC(this,void 0,void 0,function*(){})}}class R1 extends Cr{constructor(){super(R1.ID,m("submenu.empty","(empty)"),void 0,!1)}}R1.ID="vs.actions.empty";var Zr;(function(n){n.DARK="dark",n.LIGHT="light",n.HIGH_CONTRAST="hc"})(Zr||(Zr={}));const At=Xe("themeService");var ZE;(function(n){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}n.isThemeColor=e})(ZE||(ZE={}));function ms(n){return{id:n}}var Rt;(function(n){function e(a){return a&&typeof a=="object"&&typeof a.id=="string"&&(typeof a.color=="undefined"||ZE.isThemeColor(a.color))}n.isThemeIcon=e;const t=new RegExp(`^\\$\\((${Xn.iconNameExpression}(?:${Xn.iconModifierExpression})?)\\)$`);function i(a){const l=t.exec(a);if(!l)return;let[,c]=l;return{id:c}}n.fromString=i;function s(a,l){let c=a.id;const h=c.lastIndexOf("~");return h!==-1&&(c=c.substring(0,h)),l&&(c=`${c}~${l}`),{id:c}}n.modify=s;function r(a,l){var c,h;return a.id===l.id&&((c=a.color)===null||c===void 0?void 0:c.id)===((h=l.color)===null||h===void 0?void 0:h.id)}n.isEqual=r;function o(a,l){return{id:a.id,color:l?ms(l):void 0}}n.asThemeIcon=o,n.asClassNameArray=Xn.asClassNameArray,n.asClassName=Xn.asClassName,n.asCSSSelector=Xn.asCSSSelector})(Rt||(Rt={}));function vC(n){switch(n){case Zr.DARK:return"vs-dark";case Zr.HIGH_CONTRAST:return"hc-black";default:return"vs"}}const oW={ThemingContribution:"base.contributions.theming"};class Rue{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new R}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),Ze(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}let aW=new Rue;$i.add(oW.ThemingContribution,aW);function kt(n){return aW.onColorThemeChange(n)}class Oue extends q{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var Fue=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},RP=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};function Np(n){return n.command!==void 0}class De{constructor(e){this.id=De._idPool++,this._debugName=e}}De._idPool=0;De.CommandPalette=new De("CommandPalette");De.EditorContext=new De("EditorContext");De.SimpleEditorContext=new De("SimpleEditorContext");De.EditorContextCopy=new De("EditorContextCopy");De.EditorContextPeek=new De("EditorContextPeek");De.MenubarEditMenu=new De("MenubarEditMenu");De.MenubarCopy=new De("MenubarCopy");De.MenubarGoMenu=new De("MenubarGoMenu");De.MenubarSelectionMenu=new De("MenubarSelectionMenu");De.InlineCompletionsActions=new De("InlineCompletionsActions");const Tg=Xe("menuService"),Xr=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new R,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:n=>n===De.CommandPalette}}addCommand(n){return this.addCommands(Ue.single(n))}addCommands(n){for(const e of n)this._commands.set(e.id,e);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),Ze(()=>{let e=!1;for(const t of n)e=this._commands.delete(t.id)||e;e&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)})}getCommand(n){return this._commands.get(n)}getCommands(){const n=new Map;return this._commands.forEach((e,t)=>n.set(t,e)),n}appendMenuItem(n,e){return this.appendMenuItems(Ue.single({id:n,item:e}))}appendMenuItems(n){const e=new Set,t=new bs;for(const{id:i,item:s}of n){let r=this._menuItems.get(i);r||(r=new bs,this._menuItems.set(i,r)),t.push(r.push(s)),e.add(i)}return this._onDidChangeMenu.fire(e),Ze(()=>{if(t.size>0){for(let i of t)i();this._onDidChangeMenu.fire(e),t.clear()}})}getMenuItems(n){let e;return this._menuItems.has(n)?e=[...this._menuItems.get(n)]:e=[],n===De.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(n){const e=new Set;for(const t of n)Np(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,i)=>{e.has(i)||n.push({command:t})})}};class lW extends f2{constructor(e,t,i,s){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,[],"submenu"),this.item=e,this._menuService=t,this._contextKeyService=i,this._options=s}get actions(){const e=[],t=this._menuService.createMenu(this.item.submenu,this._contextKeyService),i=t.getActions(this._options);t.dispose();for(const[,s]of i)s.length>0&&(e.push(...s),e.push(new Yr));return e.length&&e.pop(),e}}let gc=class cW{constructor(e,t,i,s,r){var o,a;if(this._commandService=r,this.id=e.id,this.label=(i==null?void 0:i.renderShortTitle)&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value,this.tooltip=(a=typeof e.tooltip=="string"?e.tooltip:(o=e.tooltip)===null||o===void 0?void 0:o.value)!==null&&a!==void 0?a:"",this.enabled=!e.precondition||s.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){const l=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=s.contextMatchesRules(l.condition),this.checked&&l.tooltip&&(this.tooltip=typeof l.tooltip=="string"?l.tooltip:l.tooltip.value),l.title&&(this.label=typeof l.title=="string"?l.title:l.title.value)}this.item=e,this.alt=t?new cW(t,void 0,i,s,r):void 0,this._options=i,Rt.isThemeIcon(e.icon)&&(this.class=Xn.asClassName(e.icon))}dispose(){}run(...e){var t,i;let s=[];return!((t=this._options)===null||t===void 0)&&t.arg&&(s=[...s,this._options.arg]),!((i=this._options)===null||i===void 0)&&i.shouldForwardArgs&&(s=[...s,...e]),this._commandService.executeCommand(this.id,...s)}};gc=Fue([RP(3,Le),RP(4,Fi)],gc);const Ng=Xe("telemetryService");class O1{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let i=t.kbExpr;this.precondition&&(i?i=le.and(i,this.precondition):i=this.precondition);const s={id:this.id,weight:t.weight,args:t.args,when:i,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};yn.registerKeybindingRule(s)}}lt.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){Xr.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class g2 extends O1{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,i){return this._implementations.push({priority:e,name:t,implementation:i}),this._implementations.sort((s,r)=>r.priority-s.priority),{dispose:()=>{for(let s=0;s<this._implementations.length;s++)if(this._implementations[s].implementation===i){this._implementations.splice(s,1);return}}}}runCommand(e,t){const i=e.get(fl);i.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const s of this._implementations){const r=s.implementation(e,t);if(r)return i.trace(`Command '${this.id}' was handled by '${s.name}'.`),typeof r=="boolean"?void 0:r}i.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class hW extends O1{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class Ks extends O1{static bindToContribution(e){return class extends Ks{constructor(i){super(i),this._callback=i.handler}runEditorCommand(i,s,r){e(s)&&this._callback(e(s),r)}}}runCommand(e,t){const i=e.get(Tt),s=i.getFocusedCodeEditor()||i.getActiveCodeEditor();if(!!s)return s.invokeWithinContext(r=>{if(!!r.get(Le).contextMatchesRules(vh(this.precondition)))return this.runEditorCommand(r,s,t)})}}class zt extends Ks{constructor(e){super(zt.convertOptions(e)),this.label=e.label,this.alias=e.alias}static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function i(s){return s.menuId||(s.menuId=De.EditorContext),s.title||(s.title=e.label),s.when=le.and(e.precondition,s.when),s}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(i)):e.contextMenuOpts&&t.push(i(e.contextMenuOpts)),e.menuOpts=t,e}runEditorCommand(e,t,i){return this.reportTelemetry(e,t),this.run(e,t,i||{})}reportTelemetry(e,t){e.get(Ng).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class uW extends zt{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((i,s)=>s[0]-i[0]),{dispose:()=>{for(let i=0;i<this._implementations.length;i++)if(this._implementations[i][1]===t){this._implementations.splice(i,1);return}}}}run(e,t,i){for(const s of this._implementations){const r=s[1](e,t,i);if(r)return typeof r=="boolean"?void 0:r}}}function Ag(n,e){lt.registerCommand(n,function(t,...i){const[s,r]=i;ti(xe.isUri(s)),ti(P.isIPosition(r));const o=t.get(zn).getModel(s);if(o){const a=P.lift(r);return e(o,a,...i.slice(2))}return t.get(oa).createModelReference(s).then(a=>new Promise((l,c)=>{try{const h=e(a.object.textEditorModel,P.lift(r),i.slice(2));l(h)}catch(h){c(h)}}).finally(()=>{a.dispose()}))})}function ne(n){return Fs.INSTANCE.registerEditorCommand(n),n}function ze(n){const e=new n;return Fs.INSTANCE.registerEditorAction(e),e}function dW(n){return Fs.INSTANCE.registerEditorAction(n),n}function fW(n){Fs.INSTANCE.registerEditorAction(n)}function $n(n,e){Fs.INSTANCE.registerEditorContribution(n,e)}var hf;(function(n){function e(o){return Fs.INSTANCE.getEditorCommand(o)}n.getEditorCommand=e;function t(){return Fs.INSTANCE.getEditorActions()}n.getEditorActions=t;function i(){return Fs.INSTANCE.getEditorContributions()}n.getEditorContributions=i;function s(o){return Fs.INSTANCE.getEditorContributions().filter(a=>o.indexOf(a.id)>=0)}n.getSomeEditorContributions=s;function r(){return Fs.INSTANCE.getDiffEditorContributions()}n.getDiffEditorContributions=r})(hf||(hf={}));const Pue={EditorCommonContributions:"editor.contributions"};class Fs{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}Fs.INSTANCE=new Fs;$i.add(Pue.EditorCommonContributions,Fs.INSTANCE);function P0(n){return n.register(),n}const p2=P0(new g2({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:De.MenubarEditMenu,group:"1_do",title:m({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:De.CommandPalette,group:"",title:m("undo","Undo"),order:1}]}));P0(new hW(p2,{id:"default:undo",precondition:void 0}));const m2=P0(new g2({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:De.MenubarEditMenu,group:"1_do",title:m({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:De.CommandPalette,group:"",title:m("redo","Redo"),order:1}]}));P0(new hW(m2,{id:"default:redo",precondition:void 0}));const Bue=P0(new g2({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:De.MenubarSelectionMenu,group:"1_basic",title:m({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:De.CommandPalette,group:"",title:m("selectAll","Select All"),order:1}]}));var Vue=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Wue=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let g_=class{constructor(e,t){}dispose(){}};g_.ID="editor.contrib.markerDecorations";g_=Vue([Wue(1,d2)],g_);$n(g_.ID,g_);class zue{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class _2{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=this._bareFontInfo.getMassagedFontFamily(vr?Cn.fontFamily:null),t=document.createElement("div");t.style.position="absolute",t.style.top="-50000px",t.style.width="50000px";const i=document.createElement("div");i.style.fontFamily=e,i.style.fontWeight=this._bareFontInfo.fontWeight,i.style.fontSize=this._bareFontInfo.fontSize+"px",i.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,i.style.lineHeight=this._bareFontInfo.lineHeight+"px",i.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(i);const s=document.createElement("div");s.style.fontFamily=e,s.style.fontWeight="bold",s.style.fontSize=this._bareFontInfo.fontSize+"px",s.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,s.style.lineHeight=this._bareFontInfo.lineHeight+"px",s.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(s);const r=document.createElement("div");r.style.fontFamily=e,r.style.fontWeight=this._bareFontInfo.fontWeight,r.style.fontSize=this._bareFontInfo.fontSize+"px",r.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,r.style.lineHeight=this._bareFontInfo.lineHeight+"px",r.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",r.style.fontStyle="italic",t.appendChild(r);const o=[];for(const a of this._requests){let l;a.type===0&&(l=i),a.type===2&&(l=s),a.type===1&&(l=r),l.appendChild(document.createElement("br"));const c=document.createElement("span");_2._render(c,a),l.appendChild(c),o.push(c)}this._container=t,this._testElements=o}static _render(e,t){if(t.chr===" "){let i="\xA0";for(let s=0;s<8;s++)i+=i;e.innerText=i}else{let i=t.chr;for(let s=0;s<8;s++)i+=i;e.textContent=i}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const i=this._requests[e],s=this._testElements[e];i.fulfill(s.offsetWidth/256)}}}function Hue(n,e){new _2(n,e).read()}class gW extends q{constructor(e,t,i){super(),this.referenceDomElement=e,this.changeCallback=i,this.width=-1,this.height=-1,this.resizeObserver=null,this.measureReferenceDomElementToken=-1,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this.width}getHeight(){return this.height}startObserving(){typeof ResizeObserver!="undefined"?!this.resizeObserver&&this.referenceDomElement&&(this.resizeObserver=new ResizeObserver(e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()}),this.resizeObserver.observe(this.referenceDomElement)):this.measureReferenceDomElementToken===-1&&(this.measureReferenceDomElementToken=setInterval(()=>this.observe(),100))}stopObserving(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.measureReferenceDomElementToken!==-1&&(clearInterval(this.measureReferenceDomElementToken),this.measureReferenceDomElementToken=-1)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let i=0,s=0;t?(i=t.width,s=t.height):this.referenceDomElement&&(i=this.referenceDomElement.clientWidth,s=this.referenceDomElement.clientHeight),i=Math.max(5,i),s=Math.max(5,s),(this.width!==i||this.height!==s)&&(this.width=i,this.height=s,e&&this.changeCallback())}}class OP{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const i=e.getId();this._keys[i]=e,this._values[i]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}function $ue(){uu.INSTANCE.clearCache()}class uu extends q{constructor(){super(),this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._cache=new OP,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearCache(){this._cache=new OP,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const i of e)i.isTrusted||(t=!0,this._cache.remove(i));t&&this._onDidChange.fire()}readConfiguration(e){if(!this._cache.has(e)){let t=uu._actualReadConfiguration(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new DE({zoomLevel:cE(),pixelRatio:Hw(),fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}static createRequest(e,t,i,s){const r=new zue(e,t);return i.push(r),s&&s.push(r),r}static _actualReadConfiguration(e){const t=[],i=[],s=this.createRequest("n",0,t,i),r=this.createRequest("\uFF4D",0,t,null),o=this.createRequest(" ",0,t,i),a=this.createRequest("0",0,t,i),l=this.createRequest("1",0,t,i),c=this.createRequest("2",0,t,i),h=this.createRequest("3",0,t,i),u=this.createRequest("4",0,t,i),d=this.createRequest("5",0,t,i),f=this.createRequest("6",0,t,i),g=this.createRequest("7",0,t,i),p=this.createRequest("8",0,t,i),_=this.createRequest("9",0,t,i),v=this.createRequest("\u2192",0,t,i),b=this.createRequest("\uFFEB",0,t,null),w=this.createRequest("\xB7",0,t,i),C=this.createRequest(String.fromCharCode(11825),0,t,null),y="|/-_ilm%";for(let A=0,z=y.length;A<z;A++)this.createRequest(y.charAt(A),0,t,i),this.createRequest(y.charAt(A),1,t,i),this.createRequest(y.charAt(A),2,t,i);Hue(e,t);const D=Math.max(a.width,l.width,c.width,h.width,u.width,d.width,f.width,g.width,p.width,_.width);let S=e.fontFeatureSettings===gs.OFF;const x=i[0].width;for(let A=1,z=i.length;S&&A<z;A++){const H=x-i[A].width;if(H<-.001||H>.001){S=!1;break}}let k=!0;S&&b.width!==x&&(k=!1),b.width>v.width&&(k=!1);const F=oae()>2e3;return new DE({zoomLevel:cE(),pixelRatio:Hw(),fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:S,typicalHalfwidthCharacterWidth:s.width,typicalFullwidthCharacterWidth:r.width,canUseHalfwidthRightwardsArrow:k,spaceWidth:o.width,middotWidth:w.width,wsmiddotWidth:C.width,maxDigitWidth:D},F)}}uu.INSTANCE=new uu;class Qi extends cC{constructor(e,t,i=null,s){super(e,t),this.accessibilityService=s,this._elementSizeObserver=this._register(new gW(i,t.dimension,()=>this._recomputeOptions())),this._register(uu.INSTANCE.onDidChange(()=>this._recomputeOptions())),this._validatedOptions.get(10)&&this._elementSizeObserver.startObserving(),this._register(O9(r=>this._recomputeOptions())),this._register(this.accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions())),this._recomputeOptions()}static applyFontInfoSlow(e,t){e.style.fontFamily=t.getMassagedFontFamily(vr?Cn.fontFamily:null),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+"px",e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.lineHeight=t.lineHeight+"px",e.style.letterSpacing=t.letterSpacing+"px"}static applyFontInfo(e,t){e.setFontFamily(t.getMassagedFontFamily(vr?Cn.fontFamily:null)),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)}observeReferenceElement(e){this._elementSizeObserver.observe(e)}updatePixelRatio(){this._recomputeOptions()}static _getExtraEditorClassName(){let e="";return!vr&&!lae&&(e+="no-user-select "),vr&&(e+="no-minimap-shadow "),je&&(e+="mac "),e}_getEnvConfiguration(){return{extraEditorClassName:Qi._getExtraEditorClassName(),outerWidth:this._elementSizeObserver.getWidth(),outerHeight:this._elementSizeObserver.getHeight(),emptySelectionClipboard:Oh||On,pixelRatio:Hw(),zoomLevel:cE(),accessibilitySupport:this.accessibilityService.isScreenReaderOptimized()?2:this.accessibilityService.getAccessibilitySupport()}}readConfiguration(e){return uu.INSTANCE.readConfiguration(e)}}class pW{constructor(e){this.domNode=e,this._maxWidth=-1,this._width=-1,this._height=-1,this._top=-1,this._left=-1,this._bottom=-1,this._right=-1,this._fontFamily="",this._fontWeight="",this._fontSize=-1,this._fontFeatureSettings="",this._lineHeight=-1,this._letterSpacing=-100,this._className="",this._display="",this._position="",this._visibility="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth+"px")}setWidth(e){this._width!==e&&(this._width=e,this.domNode.style.width=this._width+"px")}setHeight(e){this._height!==e&&(this._height=e,this.domNode.style.height=this._height+"px")}setTop(e){this._top!==e&&(this._top=e,this.domNode.style.top=this._top+"px")}unsetTop(){this._top!==-1&&(this._top=-1,this.domNode.style.top="")}setLeft(e){this._left!==e&&(this._left=e,this.domNode.style.left=this._left+"px")}setBottom(e){this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom+"px")}setRight(e){this._right!==e&&(this._right=e,this.domNode.style.right=this._right+"px")}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize+"px")}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setLineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight+"px")}setLetterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing+"px")}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function Ye(n){return new pW(n)}function ui(n,e,t){let i=null,s=null;if(typeof t.value=="function"?(i="value",s=t.value,s.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(i="get",s=t.get),!s)throw new Error("not supported");const r=`$memoize$${e}`;t[i]=function(...o){return this.hasOwnProperty(r)||Object.defineProperty(this,r,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,o)}),this[r]}}var Uue=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},bt;(function(n){n.Tap="-monaco-gesturetap",n.Change="-monaco-gesturechange",n.Start="-monaco-gesturestart",n.End="-monaco-gesturesend",n.Contextmenu="-monaco-gesturecontextmenu"})(bt||(bt={}));class st extends q{constructor(){super(),this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(K(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register(K(document,"touchend",e=>this.onTouchEnd(e))),this._register(K(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){return st.isTouchDevice()?(st.INSTANCE||(st.INSTANCE=new st),st.INSTANCE.targets.push(e),{dispose:()=>{st.INSTANCE.targets=st.INSTANCE.targets.filter(t=>t!==e)}}):q.None}static ignoreTarget(e){return st.isTouchDevice()?(st.INSTANCE||(st.INSTANCE=new st),st.INSTANCE.ignoreTargets.push(e),{dispose:()=>{st.INSTANCE.ignoreTargets=st.INSTANCE.ignoreTargets.filter(t=>t!==e)}}):q.None}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,s=e.targetTouches.length;i<s;i++){let r=e.targetTouches.item(i);this.activeTouches[r.identifier]={id:r.identifier,initialTarget:r.target,initialTimeStamp:t,initialPageX:r.pageX,initialPageY:r.pageY,rollingTimestamps:[t],rollingPageX:[r.pageX],rollingPageY:[r.pageY]};let o=this.newGestureEvent(bt.Start,r.target);o.pageX=r.pageX,o.pageY=r.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){let t=Date.now(),i=Object.keys(this.activeTouches).length;for(let s=0,r=e.changedTouches.length;s<r;s++){let o=e.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("move of an UNKNOWN touch",o);continue}let a=this.activeTouches[o.identifier],l=Date.now()-a.initialTimeStamp;if(l<st.HOLD_DELAY&&Math.abs(a.initialPageX-Is(a.rollingPageX))<30&&Math.abs(a.initialPageY-Is(a.rollingPageY))<30){let c=this.newGestureEvent(bt.Tap,a.initialTarget);c.pageX=Is(a.rollingPageX),c.pageY=Is(a.rollingPageY),this.dispatchEvent(c)}else if(l>=st.HOLD_DELAY&&Math.abs(a.initialPageX-Is(a.rollingPageX))<30&&Math.abs(a.initialPageY-Is(a.rollingPageY))<30){let c=this.newGestureEvent(bt.Contextmenu,a.initialTarget);c.pageX=Is(a.rollingPageX),c.pageY=Is(a.rollingPageY),this.dispatchEvent(c)}else if(i===1){let c=Is(a.rollingPageX),h=Is(a.rollingPageY),u=Is(a.rollingTimestamps)-a.rollingTimestamps[0],d=c-a.rollingPageX[0],f=h-a.rollingPageY[0];const g=this.targets.filter(p=>a.initialTarget instanceof Node&&p.contains(a.initialTarget));this.inertia(g,t,Math.abs(d)/u,d>0?1:-1,c,Math.abs(f)/u,f>0?1:-1,h)}this.dispatchEvent(this.newGestureEvent(bt.End,a.initialTarget)),delete this.activeTouches[o.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let i=document.createEvent("CustomEvent");return i.initEvent(e,!1,!0),i.initialTarget=t,i.tapCount=0,i}dispatchEvent(e){if(e.type===bt.Tap){const t=new Date().getTime();let i=0;t-this._lastSetTapCountTime>st.CLEAR_TAP_COUNT_TIME?i=1:i=2,this._lastSetTapCountTime=t,e.tapCount=i}else(e.type===bt.Change||e.type===bt.Contextmenu)&&(this._lastSetTapCountTime=0);for(let t=0;t<this.ignoreTargets.length;t++)if(e.initialTarget instanceof Node&&this.ignoreTargets[t].contains(e.initialTarget))return;this.targets.forEach(t=>{e.initialTarget instanceof Node&&t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)})}inertia(e,t,i,s,r,o,a,l){this.handle=na(()=>{let c=Date.now(),h=c-t,u=0,d=0,f=!0;i+=st.SCROLL_FRICTION*h,o+=st.SCROLL_FRICTION*h,i>0&&(f=!1,u=s*i*h),o>0&&(f=!1,d=a*o*h);let g=this.newGestureEvent(bt.Change);g.translationX=u,g.translationY=d,e.forEach(p=>p.dispatchEvent(g)),f||this.inertia(e,c,i,s,r+u,o,a,l+d)})}onTouchMove(e){let t=Date.now();for(let i=0,s=e.changedTouches.length;i<s;i++){let r=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("end of an UNKNOWN touch",r);continue}let o=this.activeTouches[r.identifier],a=this.newGestureEvent(bt.Change,o.initialTarget);a.translationX=r.pageX-Is(o.rollingPageX),a.translationY=r.pageY-Is(o.rollingPageY),a.pageX=r.pageX,a.pageY=r.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(r.pageX),o.rollingPageY.push(r.pageY),o.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}st.SCROLL_FRICTION=-.005;st.HOLD_DELAY=700;st.CLEAR_TAP_COUNT_TIME=400;Uue([ui],st,"isTouchDevice",null);function Mg(n,e){let t=new Vs(e);return t.preventDefault(),{leftButton:t.leftButton,buttons:t.buttons,posx:t.posx,posy:t.posy}}class Bu{constructor(){this._hooks=new ee,this._mouseMoveEventMerger=null,this._mouseMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._mouseMoveEventMerger=null,this._mouseMoveCallback=null;const i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._mouseMoveEventMerger}startMonitoring(e,t,i,s,r){if(this.isMonitoring())return;this._mouseMoveEventMerger=i,this._mouseMoveCallback=s,this._onStopCallback=r;const o=dE.getSameOriginWindowChain(),a=cc?"pointermove":"mousemove",l="mouseup",c=o.map(u=>u.window.document),h=Lg(e);h&&c.unshift(h);for(const u of c)this._hooks.add(MA(u,a,d=>{if(d.buttons!==t){this.stopMonitoring(!0);return}this._mouseMoveCallback(d)},(d,f)=>this._mouseMoveEventMerger(d,f))),this._hooks.add(K(u,l,d=>this.stopMonitoring(!0)));if(dE.hasDifferentOriginAncestor()){let u=o[o.length-1];this._hooks.add(K(u.window.document,"mouseout",d=>{new Vs(d).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(K(u.window.document,"mouseover",d=>{new Vs(d).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(K(u.window.document.body,"mouseleave",d=>{this.stopMonitoring(!0)}))}}}class b2{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new mW(this.x-Xa.scrollX,this.y-Xa.scrollY)}}class mW{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new b2(this.clientX+Xa.scrollX,this.clientY+Xa.scrollY)}}class jue{constructor(e,t,i,s){this.x=e,this.y=t,this.width=i,this.height=s,this._editorPagePositionBrand=void 0}}function _W(n){const e=Gi(n);return new jue(e.left,e.top,e.width,e.height)}class du extends Vs{constructor(e,t){super(e),this._editorMouseEventBrand=void 0,this.pos=new b2(this.posx,this.posy),this.editorPos=_W(t)}}class que{constructor(e){this._editorViewDomNode=e}_create(e){return new du(e,this._editorViewDomNode)}onContextMenu(e,t){return K(e,"contextmenu",i=>{t(this._create(i))})}onMouseUp(e,t){return K(e,"mouseup",i=>{t(this._create(i))})}onMouseDown(e,t){return K(e,"mousedown",i=>{t(this._create(i))})}onMouseLeave(e,t){return AA(e,i=>{t(this._create(i))})}onMouseMoveThrottled(e,t,i,s){return MA(e,"mousemove",t,(o,a)=>i(o,this._create(a)),s)}}class Kue{constructor(e){this._editorViewDomNode=e}_create(e){return new du(e,this._editorViewDomNode)}onPointerUp(e,t){return K(e,"pointerup",i=>{t(this._create(i))})}onPointerDown(e,t){return K(e,"pointerdown",i=>{t(this._create(i))})}onPointerLeave(e,t){return xae(e,i=>{t(this._create(i))})}onPointerMoveThrottled(e,t,i,s){return MA(e,"pointermove",t,(o,a)=>i(o,this._create(a)),s)}}class Gue extends q{constructor(e){super(),this._editorViewDomNode=e,this._globalMouseMoveMonitor=this._register(new Bu),this._keydownListener=null}startMonitoring(e,t,i,s,r){this._keydownListener=mi(document,"keydown",a=>{a.toKeybinding().isModifierKey()||this._globalMouseMoveMonitor.stopMonitoring(!0,a.browserEvent)},!0);const o=(a,l)=>i(a,new du(l,this._editorViewDomNode));this._globalMouseMoveMonitor.startMonitoring(e,t,o,s,a=>{this._keydownListener.dispose(),r(a)})}stopMonitoring(){this._globalMouseMoveMonitor.stopMonitoring(!0)}}class B0 extends q{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let i=0,s=e.length;i<s;i++){let r=e[i];switch(r.type){case 0:this.onCompositionStart(r)&&(t=!0);break;case 1:this.onCompositionEnd(r)&&(t=!0);break;case 2:this.onConfigurationChanged(r)&&(t=!0);break;case 3:this.onCursorStateChanged(r)&&(t=!0);break;case 4:this.onDecorationsChanged(r)&&(t=!0);break;case 5:this.onFlushed(r)&&(t=!0);break;case 6:this.onFocusChanged(r)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(r)&&(t=!0);break;case 8:this.onLineMappingChanged(r)&&(t=!0);break;case 9:this.onLinesChanged(r)&&(t=!0);break;case 10:this.onLinesDeleted(r)&&(t=!0);break;case 11:this.onLinesInserted(r)&&(t=!0);break;case 12:this.onRevealRangeRequest(r)&&(t=!0);break;case 13:this.onScrollChanged(r)&&(t=!0);break;case 15:this.onTokensChanged(r)&&(t=!0);break;case 14:this.onThemeChanged(r)&&(t=!0);break;case 16:this.onTokensColorsChanged(r)&&(t=!0);break;case 17:this.onZonesChanged(r)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(r)}}t&&(this._shouldRender=!0)}}class Gs extends B0{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class aa{static write(e,t){e instanceof pW,e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){let i=[],s=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(i[s++]=this.read(e)),e=e.parentElement;const r=new Uint8Array(s);for(let o=0;o<s;o++)r[o]=i[s-o-1];return r}}class Yue{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class Zue extends Yue{constructor(e,t,i){super(e,t),this._renderingContextBrand=void 0,this._viewLines=i}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class Xue{constructor(e,t,i){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=i}}class F1{constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}static from(e){const t=new Array(e.length);for(let i=0,s=e.length;i<s;i++){const r=e[i];t[i]=new F1(r.left,r.width)}return t}toString(){return`[${this.left},${this.width}]`}}class uf{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class Que{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class Jue{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class Hx{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,i,s,r){const o=this._createRange();try{return o.setStart(e,t),o.setEnd(i,s),o.getClientRects()}catch{return null}finally{this._detachRange(o,r)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(uf.compare);let t=[],i=0,s=e[0];for(let r=1,o=e.length;r<o;r++){const a=e[r];s.left+s.width+.9>=a.left?s.width=Math.max(s.width,a.left+a.width-s.left):(t[i++]=s,s=a)}return t[i++]=s,t}static _createHorizontalRangesFromClientRects(e,t){if(!e||e.length===0)return null;const i=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];i[s]=new uf(Math.max(0,o.left-t),o.width)}return this._mergeAdjacentRanges(i)}static readHorizontalRanges(e,t,i,s,r,o,a){const c=e.children.length-1;if(0>c)return null;if(t=Math.min(c,Math.max(0,t)),s=Math.min(c,Math.max(0,s)),t===s&&i===r&&i===0&&!e.children[t].firstChild){const f=e.children[t].getClientRects();return this._createHorizontalRangesFromClientRects(f,o)}t!==s&&s>0&&r===0&&(s--,r=1073741824);let h=e.children[t].firstChild,u=e.children[s].firstChild;if((!h||!u)&&(!h&&i===0&&t>0&&(h=e.children[t-1].firstChild,i=1073741824),!u&&r===0&&s>0&&(u=e.children[s-1].firstChild,r=1073741824)),!h||!u)return null;i=Math.min(h.textContent.length,Math.max(0,i)),r=Math.min(u.textContent.length,Math.max(0,r));const d=this._readClientRects(h,i,u,r,a);return this._createHorizontalRangesFromClientRects(d,o)}}const ede=function(){return ef?!0:!(Fn||On||vr)}();let df=!0;class FP{constructor(e,t){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectDeltaLeftRead=!1,this.endNode=t}get clientRectDeltaLeft(){return this._clientRectDeltaLeftRead||(this._clientRectDeltaLeftRead=!0,this._clientRectDeltaLeft=this._domNode.getBoundingClientRect().left),this._clientRectDeltaLeft}}class PP{constructor(e,t){this.themeType=t;const i=e.options,s=i.get(43);this.renderWhitespace=i.get(87),this.renderControlCharacters=i.get(82),this.spaceWidth=s.spaceWidth,this.middotWidth=s.middotWidth,this.wsmiddotWidth=s.wsmiddotWidth,this.useMonospaceOptimizations=s.isMonospace&&!i.get(29),this.canUseHalfwidthRightwardsArrow=s.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(58),this.stopRenderingLineAfter=i.get(104),this.fontLigatures=i.get(44)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class Vo{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=Ye(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return this._options.themeType===Zr.HIGH_CONTRAST||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,i,s){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const r=i.getViewLineRenderingData(e),o=this._options,a=vs.filter(r.inlineDecorations,e,r.minColumn,r.maxColumn);let l=null;if(o.themeType===Zr.HIGH_CONTRAST||this._options.renderWhitespace==="selection"){const d=i.selections;for(const f of d){if(f.endLineNumber<e||f.startLineNumber>e)continue;const g=f.startLineNumber===e?f.startColumn:r.minColumn,p=f.endLineNumber===e?f.endColumn:r.maxColumn;g<p&&(o.themeType===Zr.HIGH_CONTRAST||this._options.renderWhitespace!=="selection"?a.push(new vs(g,p,"inline-selected-text",0)):(l||(l=[]),l.push(new khe(g-1,p-1))))}}const c=new Ou(o.useMonospaceOptimizations,o.canUseHalfwidthRightwardsArrow,r.content,r.continuesWithWrappedLine,r.isBasicASCII,r.containsRTL,r.minColumn-1,r.tokens,a,r.tabSize,r.startVisibleColumn,o.spaceWidth,o.middotWidth,o.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==gs.OFF,l);if(this._renderedViewLine&&this._renderedViewLine.input.equals(c))return!1;s.appendASCIIString('<div style="top:'),s.appendASCIIString(String(t)),s.appendASCIIString("px;height:"),s.appendASCIIString(String(this._options.lineHeight)),s.appendASCIIString('px;" class="'),s.appendASCIIString(Vo.CLASS_NAME),s.appendASCIIString('">');const h=w1(c,s);s.appendASCIIString("</div>");let u=null;return df&&ede&&r.isBasicASCII&&o.useMonospaceOptimizations&&h.containsForeignElements===0&&r.content.length<300&&c.lineTokens.getCount()<100&&(u=new Tb(this._renderedViewLine?this._renderedViewLine.domNode:null,c,h.characterMapping)),u||(u=vW(this._renderedViewLine?this._renderedViewLine.domNode:null,c,h.characterMapping,h.containsRTL,h.containsForeignElements)),this._renderedViewLine=u,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof Tb:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof Tb?this._renderedViewLine.monospaceAssumptionsAreValid():df}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof Tb&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,i,s){if(!this._renderedViewLine)return null;t=t|0,i=i|0,t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i));const r=this._renderedViewLine.input.stopRenderingLineAfter|0;let o=!1;r!==-1&&t>r+1&&i>r+1&&(o=!0),r!==-1&&t>r+1&&(t=r+1),r!==-1&&i>r+1&&(i=r+1);const a=this._renderedViewLine.getVisibleRangesForRange(e,t,i,s);return a&&a.length>0?new Jue(o,a):null}getColumnOfNodeOffset(e,t,i){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,i):1}}Vo.CLASS_NAME="view-line";class Tb{constructor(e,t,i){this.domNode=e,this.input=t,this._characterMapping=i,this._charWidth=t.spaceWidth}getWidth(){return Math.round(this._getCharPosition(this._characterMapping.length))}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return df;const e=this.getWidth(),t=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),df=!1),df}toSlowRenderedLine(){return vW(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,i,s){const r=this._getCharPosition(t),o=this._getCharPosition(i);return[new uf(r,o-r)]}_getCharPosition(e){const t=this._characterMapping.getAbsoluteOffset(e);return this._charWidth*t}getColumnOfNodeOffset(e,t,i){const s=t.textContent.length;let r=-1;for(;t;)t=t.previousSibling,r++;return this._characterMapping.getColumn(new i2(r,i),s)}}class bW{constructor(e,t,i,s,r){if(this.domNode=e,this.input=t,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=r,this._cachedWidth=-1,this._pixelOffsetCache=null,!s||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let o=0,a=this._characterMapping.length;o<=a;o++)this._pixelOffsetCache[o]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,i,s){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const r=this._readPixelOffset(this.domNode,e,t,s);if(r===-1)return null;const o=this._readPixelOffset(this.domNode,e,i,s);return o===-1?null:[new uf(r,o-r)]}return this._readVisibleRangesForRange(this.domNode,e,t,i,s)}_readVisibleRangesForRange(e,t,i,s,r){if(i===s){const o=this._readPixelOffset(e,t,i,r);return o===-1?null:[new uf(o,0)]}else return this._readRawVisibleRangesForRange(e,i,s,r)}_readPixelOffset(e,t,i,s){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth();const r=this._getReadingTarget(e);return r.firstChild?r.firstChild.offsetWidth:0}if(this._pixelOffsetCache!==null){const r=this._pixelOffsetCache[i];if(r!==-1)return r;const o=this._actualReadPixelOffset(e,t,i,s);return this._pixelOffsetCache[i]=o,o}return this._actualReadPixelOffset(e,t,i,s)}_actualReadPixelOffset(e,t,i,s){if(this._characterMapping.length===0){const l=Hx.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,s.clientRectDeltaLeft,s.endNode);return!l||l.length===0?-1:l[0].left}if(i===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth();const r=this._characterMapping.getDomPosition(i),o=Hx.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,r.partIndex,r.charIndex,s.clientRectDeltaLeft,s.endNode);if(!o||o.length===0)return-1;const a=o[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getAbsoluteOffset(i),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,i,s){if(t===1&&i===this._characterMapping.length)return[new uf(0,this.getWidth())];const r=this._characterMapping.getDomPosition(t),o=this._characterMapping.getDomPosition(i);return Hx.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,o.partIndex,o.charIndex,s.clientRectDeltaLeft,s.endNode)}getColumnOfNodeOffset(e,t,i){const s=t.textContent.length;let r=-1;for(;t;)t=t.previousSibling,r++;return this._characterMapping.getColumn(new i2(r,i),s)}}class tde extends bW{_readVisibleRangesForRange(e,t,i,s,r){const o=super._readVisibleRangesForRange(e,t,i,s,r);if(!o||o.length===0||i===s||i===1&&s===this._characterMapping.length)return o;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,s,r);if(a!==-1){const l=o[o.length-1];l.left<a&&(l.width=a-l.left)}}return o}}const vW=function(){return Oh?ide:nde}();function ide(n,e,t,i,s){return new tde(n,e,t,i,s)}function nde(n,e,t,i,s){return new bW(n,e,t,i,s)}function Nb(n){return n.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class Pi{constructor(e,t,i,s){this.oldPosition=e,this.oldText=t,this.newPosition=i,this.newText=s}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Nb(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Nb(this.oldText)}")`:`(replace@${this.oldPosition} "${Nb(this.oldText)}" with "${Nb(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,i){const s=t.length;Ar(e,s,i),i+=4;for(let r=0;r<s;r++)cle(e,t.charCodeAt(r),i),i+=2;return i}static _readString(e,t){const i=Nr(e,t);return t+=4,RE(e,t,i)}writeSize(){return 4+4+Pi._writeStringSize(this.oldText)+Pi._writeStringSize(this.newText)}write(e,t){return Ar(e,this.oldPosition,t),t+=4,Ar(e,this.newPosition,t),t+=4,t=Pi._writeString(e,this.oldText,t),t=Pi._writeString(e,this.newText,t),t}static read(e,t,i){const s=Nr(e,t);t+=4;const r=Nr(e,t);t+=4;const o=Pi._readString(e,t);t+=Pi._writeStringSize(o);const a=Pi._readString(e,t);return t+=Pi._writeStringSize(a),i.push(new Pi(s,o,r,a)),t}}function sde(n,e){return n===null||n.length===0?e:new To(n,e).compress()}class To{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,i=this._getPrev(e),s=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(i===null){this._acceptCurr(s),s=this._getCurr(++t);continue}if(s===null){this._acceptPrev(i),i=this._getPrev(++e);continue}if(s.oldEnd<=i.newPosition){this._acceptCurr(s),s=this._getCurr(++t);continue}if(i.newEnd<=s.oldPosition){this._acceptPrev(i),i=this._getPrev(++e);continue}if(s.oldPosition<i.newPosition){const[c,h]=To._splitCurr(s,i.newPosition-s.oldPosition);this._acceptCurr(c),s=h;continue}if(i.newPosition<s.oldPosition){const[c,h]=To._splitPrev(i,s.oldPosition-i.newPosition);this._acceptPrev(c),i=h;continue}let a,l;if(s.oldEnd===i.newEnd)a=i,l=s,i=this._getPrev(++e),s=this._getCurr(++t);else if(s.oldEnd<i.newEnd){const[c,h]=To._splitPrev(i,s.oldLength);a=c,l=s,i=h,s=this._getCurr(++t)}else{const[c,h]=To._splitCurr(s,i.newLength);a=i,l=c,i=this._getPrev(++e),s=h}this._result[this._resultLen++]=new Pi(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const r=To._merge(this._result);return To._removeNoOps(r)}_acceptCurr(e){this._result[this._resultLen++]=To._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=To._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new Pi(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new Pi(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const i=e.newText.substr(0,t),s=e.newText.substr(t);return[new Pi(e.oldPosition,e.oldText,e.newPosition,i),new Pi(e.oldEnd,"",e.newPosition+t,s)]}static _splitCurr(e,t){const i=e.oldText.substr(0,t),s=e.oldText.substr(t);return[new Pi(e.oldPosition,i,e.newPosition,e.newText),new Pi(e.oldPosition+t,s,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;let t=[],i=0,s=e[0];for(let r=1;r<e.length;r++){const o=e[r];s.oldEnd===o.oldPosition?s=new Pi(s.oldPosition,s.oldText+o.oldText,s.newPosition,s.newText+o.newText):(t[i++]=s,s=o)}return t[i++]=s,t}static _removeNoOps(e){if(e.length===0)return e;let t=[],i=0;for(let s=0;s<e.length;s++){const r=e[s];r.oldText!==r.newText&&(t[i++]=r)}return t}}function md(n){return n.toString()}class vi{constructor(e,t,i,s,r,o,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=i,this.afterEOL=s,this.beforeCursorState=r,this.afterCursorState=o,this.changes=a}static create(e,t){const i=e.getAlternativeVersionId(),s=XE(e);return new vi(i,i,s,s,t,t,[])}append(e,t,i,s,r){t.length>0&&(this.changes=sde(this.changes,t)),this.afterEOL=i,this.afterVersionId=s,this.afterCursorState=r}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,i){if(Ar(e,t?t.length:0,i),i+=4,t)for(const s of t)Ar(e,s.selectionStartLineNumber,i),i+=4,Ar(e,s.selectionStartColumn,i),i+=4,Ar(e,s.positionLineNumber,i),i+=4,Ar(e,s.positionColumn,i),i+=4;return i}static _readSelections(e,t,i){const s=Nr(e,t);t+=4;for(let r=0;r<s;r++){const o=Nr(e,t);t+=4;const a=Nr(e,t);t+=4;const l=Nr(e,t);t+=4;const c=Nr(e,t);t+=4,i.push(new Se(o,a,l,c))}return t}serialize(){let e=10+vi._writeSelectionsSize(this.beforeCursorState)+vi._writeSelectionsSize(this.afterCursorState)+4;for(const s of this.changes)e+=s.writeSize();const t=new Uint8Array(e);let i=0;Ar(t,this.beforeVersionId,i),i+=4,Ar(t,this.afterVersionId,i),i+=4,NF(t,this.beforeEOL,i),i+=1,NF(t,this.afterEOL,i),i+=1,i=vi._writeSelections(t,this.beforeCursorState,i),i=vi._writeSelections(t,this.afterCursorState,i),Ar(t,this.changes.length,i),i+=4;for(const s of this.changes)i=s.write(t,i);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let i=0;const s=Nr(t,i);i+=4;const r=Nr(t,i);i+=4;const o=TF(t,i);i+=1;const a=TF(t,i);i+=1;const l=[];i=vi._readSelections(t,i,l);const c=[];i=vi._readSelections(t,i,c);const h=Nr(t,i);i+=4;const u=[];for(let d=0;d<h;d++)i=Pi.read(t,i,u);return new vi(s,r,o,a,l,c,u)}}class wW{constructor(e,t){this.model=e,this._data=vi.create(e,t)}get type(){return 0}get resource(){return xe.isUri(this.model)?this.model:this.model.uri}get label(){return m("edit","Typing")}toString(){return(this._data instanceof vi?this._data:vi.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(xe.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof vi}append(e,t,i,s,r){this._data instanceof vi&&this._data.append(e,t,i,s,r)}close(){this._data instanceof vi&&(this._data=this._data.serialize())}open(){this._data instanceof vi||(this._data=vi.deserialize(this._data))}undo(){if(xe.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof vi&&(this._data=this._data.serialize());const e=vi.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(xe.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof vi&&(this._data=this._data.serialize());const e=vi.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof vi&&(this._data=this._data.serialize()),this._data.byteLength+168}}class rde{constructor(e,t){this.type=1,this.label=e,this._isOpen=!0,this._editStackElementsArr=t.slice(0),this._editStackElementsMap=new Map;for(const i of this._editStackElementsArr){const s=md(i.resource);this._editStackElementsMap.set(s,i)}this._delegate=null}get resources(){return this._editStackElementsArr.map(e=>e.resource)}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=md(e);return this._editStackElementsMap.has(t)}setModel(e){const t=md(xe.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=md(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,i,s,r){const o=md(e.uri);this._editStackElementsMap.get(o).append(e,t,i,s,r)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=md(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(const t of this._editStackElementsArr)e.push(`${ro(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function XE(n){return n.getEOL()===`
`?0:1}function Fa(n){return n?n instanceof wW||n instanceof rde:!1}class v2{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Fa(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Fa(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){const t=this._undoRedoService.getLastElement(this._model.uri);if(Fa(t)&&t.canAppend(this._model))return t;const i=new wW(this._model,e);return this._undoRedoService.pushElement(i),i}pushEOL(e){const t=this._getOrCreateEditStackElement(null);this._model.setEOL(e),t.append(this._model,[],XE(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,i){const s=this._getOrCreateEditStackElement(e),r=this._model.applyEdits(t,!0),o=v2._computeCursorState(i,r),a=r.map((l,c)=>({index:c,textChange:l.textChange}));return a.sort((l,c)=>l.textChange.oldPosition===c.textChange.oldPosition?l.index-c.index:l.textChange.oldPosition-c.textChange.oldPosition),s.append(this._model,a.map(l=>l.textChange),XE(this._model),this._model.getAlternativeVersionId(),o),o}static _computeCursorState(e,t){try{return e?e(t):null}catch(i){return Ie(i),null}}}class ode{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function ade(n,e,t,i,s){s.spacesDiff=0,s.looksLikeAlignment=!1;let r;for(r=0;r<e&&r<i;r++){let d=n.charCodeAt(r),f=t.charCodeAt(r);if(d!==f)break}let o=0,a=0;for(let d=r;d<e;d++)n.charCodeAt(d)===32?o++:a++;let l=0,c=0;for(let d=r;d<i;d++)t.charCodeAt(d)===32?l++:c++;if(o>0&&a>0||l>0&&c>0)return;let h=Math.abs(a-c),u=Math.abs(o-l);if(h===0){s.spacesDiff=u,u>0&&0<=l-1&&l-1<n.length&&l<t.length&&t.charCodeAt(l)!==32&&n.charCodeAt(l-1)===32&&n.charCodeAt(n.length-1)===44&&(s.looksLikeAlignment=!0);return}if(u%h===0){s.spacesDiff=u/h;return}}function BP(n,e,t){const i=Math.min(n.getLineCount(),1e4);let s=0,r=0,o="",a=0;const l=[2,4,6,8,3,5,7],c=8;let h=[0,0,0,0,0,0,0,0,0],u=new ode;for(let g=1;g<=i;g++){let p=n.getLineLength(g),_=n.getLineContent(g);const v=p<=65536;let b=!1,w=0,C=0,y=0;for(let S=0,x=p;S<x;S++){let k=v?_.charCodeAt(S):n.getLineCharCode(g,S);if(k===9)y++;else if(k===32)C++;else{b=!0,w=S;break}}if(!b||(y>0?s++:C>1&&r++,ade(o,a,_,w,u),u.looksLikeAlignment&&!(t&&e===u.spacesDiff)))continue;let D=u.spacesDiff;D<=c&&h[D]++,o=_,a=w}let d=t;s!==r&&(d=s<r);let f=e;if(d){let g=d?0:.1*i;l.forEach(p=>{let _=h[p];_>g&&(g=_,f=p)}),f===4&&h[4]>0&&h[2]>0&&h[2]>=h[4]/2&&(f=2)}return{insertSpaces:d,tabSize:f}}function kn(n){return(n.metadata&1)>>>0}function ut(n,e){n.metadata=n.metadata&254|e<<0}function Vi(n){return(n.metadata&2)>>>1===1}function ht(n,e){n.metadata=n.metadata&253|(e?1:0)<<1}function CW(n){return(n.metadata&4)>>>2===1}function VP(n,e){n.metadata=n.metadata&251|(e?1:0)<<2}function lde(n){return(n.metadata&24)>>>3}function WP(n,e){n.metadata=n.metadata&231|e<<3}function cde(n){return(n.metadata&32)>>>5===1}function zP(n,e){n.metadata=n.metadata&223|(e?1:0)<<5}class yW{constructor(e,t,i){this.metadata=0,this.parent=this,this.left=this,this.right=this,ut(this,1),this.start=t,this.end=i,this.delta=0,this.maxEnd=i,this.id=e,this.ownerId=0,this.options=null,VP(this,!1),WP(this,1),zP(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=null,ht(this,!1)}reset(e,t,i,s){this.start=t,this.end=i,this.maxEnd=i,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=s}setOptions(e){this.options=e;let t=this.options.className;VP(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),WP(this,this.options.stickiness),zP(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,i){this.cachedVersionId!==i&&(this.range=null),this.cachedVersionId=i,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const ke=new yW(null,0,0);ke.parent=ke;ke.left=ke;ke.right=ke;ut(ke,0);class $x{constructor(){this.root=ke,this.requestNormalizeDelta=!1}intervalSearch(e,t,i,s,r){return this.root===ke?[]:_de(this,e,t,i,s,r)}search(e,t,i){return this.root===ke?[]:mde(this,e,t,i)}collectNodesFromOwner(e){return gde(this,e)}collectNodesPostOrder(){return pde(this)}insert(e){HP(this,e),this._normalizeDeltaIfNecessary()}delete(e){$P(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const i=e;let s=0;for(;e!==this.root;)e===e.parent.right&&(s+=e.parent.delta),e=e.parent;const r=i.start+s,o=i.end+s;i.setCachedOffsets(r,o,t)}acceptReplace(e,t,i,s){const r=dde(this,e,e+t);for(let o=0,a=r.length;o<a;o++){const l=r[o];$P(this,l)}this._normalizeDeltaIfNecessary(),fde(this,e,e+t,i),this._normalizeDeltaIfNecessary();for(let o=0,a=r.length;o<a;o++){const l=r[o];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,ude(l,e,e+t,i,s),l.maxEnd=l.end,HP(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){!this.requestNormalizeDelta||(this.requestNormalizeDelta=!1,hde(this))}}function hde(n){let e=n.root,t=0;for(;e!==ke;){if(e.left!==ke&&!Vi(e.left)){e=e.left;continue}if(e.right!==ke&&!Vi(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,pc(e),ht(e,!0),ht(e.left,!1),ht(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}ht(n.root,!1)}function _d(n,e,t,i){return n<t?!0:n>t||i===1?!1:i===2?!0:e}function ude(n,e,t,i,s){const r=lde(n),o=r===0||r===2,a=r===1||r===2,l=t-e,c=i,h=Math.min(l,c),u=n.start;let d=!1;const f=n.end;let g=!1;e<=u&&f<=t&&cde(n)&&(n.start=e,d=!0,n.end=e,g=!0);{const _=s?1:l>0?2:0;!d&&_d(u,o,e,_)&&(d=!0),!g&&_d(f,a,e,_)&&(g=!0)}if(h>0&&!s){const _=l>c?2:0;!d&&_d(u,o,e+h,_)&&(d=!0),!g&&_d(f,a,e+h,_)&&(g=!0)}{const _=s?1:0;!d&&_d(u,o,t,_)&&(n.start=e+c,d=!0),!g&&_d(f,a,t,_)&&(n.end=e+c,g=!0)}const p=c-l;d||(n.start=Math.max(0,u+p)),g||(n.end=Math.max(0,f+p)),n.start>n.end&&(n.end=n.start)}function dde(n,e,t){let i=n.root,s=0,r=0,o=0,a=0,l=[],c=0;for(;i!==ke;){if(Vi(i)){ht(i.left,!1),ht(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),i=i.parent;continue}if(!Vi(i.left)){if(r=s+i.maxEnd,r<e){ht(i,!0);continue}if(i.left!==ke){i=i.left;continue}}if(o=s+i.start,o>t){ht(i,!0);continue}if(a=s+i.end,a>=e&&(i.setCachedOffsets(o,a,0),l[c++]=i),ht(i,!0),i.right!==ke&&!Vi(i.right)){s+=i.delta,i=i.right;continue}}return ht(n.root,!1),l}function fde(n,e,t,i){let s=n.root,r=0,o=0,a=0;const l=i-(t-e);for(;s!==ke;){if(Vi(s)){ht(s.left,!1),ht(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),pc(s),s=s.parent;continue}if(!Vi(s.left)){if(o=r+s.maxEnd,o<e){ht(s,!0);continue}if(s.left!==ke){s=s.left;continue}}if(a=r+s.start,a>t){s.start+=l,s.end+=l,s.delta+=l,(s.delta<-1073741824||s.delta>1073741824)&&(n.requestNormalizeDelta=!0),ht(s,!0);continue}if(ht(s,!0),s.right!==ke&&!Vi(s.right)){r+=s.delta,s=s.right;continue}}ht(n.root,!1)}function gde(n,e){let t=n.root,i=[],s=0;for(;t!==ke;){if(Vi(t)){ht(t.left,!1),ht(t.right,!1),t=t.parent;continue}if(t.left!==ke&&!Vi(t.left)){t=t.left;continue}if(t.ownerId===e&&(i[s++]=t),ht(t,!0),t.right!==ke&&!Vi(t.right)){t=t.right;continue}}return ht(n.root,!1),i}function pde(n){let e=n.root,t=[],i=0;for(;e!==ke;){if(Vi(e)){ht(e.left,!1),ht(e.right,!1),e=e.parent;continue}if(e.left!==ke&&!Vi(e.left)){e=e.left;continue}if(e.right!==ke&&!Vi(e.right)){e=e.right;continue}t[i++]=e,ht(e,!0)}return ht(n.root,!1),t}function mde(n,e,t,i){let s=n.root,r=0,o=0,a=0,l=[],c=0;for(;s!==ke;){if(Vi(s)){ht(s.left,!1),ht(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),s=s.parent;continue}if(s.left!==ke&&!Vi(s.left)){s=s.left;continue}o=r+s.start,a=r+s.end,s.setCachedOffsets(o,a,i);let h=!0;if(e&&s.ownerId&&s.ownerId!==e&&(h=!1),t&&CW(s)&&(h=!1),h&&(l[c++]=s),ht(s,!0),s.right!==ke&&!Vi(s.right)){r+=s.delta,s=s.right;continue}}return ht(n.root,!1),l}function _de(n,e,t,i,s,r){let o=n.root,a=0,l=0,c=0,h=0,u=[],d=0;for(;o!==ke;){if(Vi(o)){ht(o.left,!1),ht(o.right,!1),o===o.parent.right&&(a-=o.parent.delta),o=o.parent;continue}if(!Vi(o.left)){if(l=a+o.maxEnd,l<e){ht(o,!0);continue}if(o.left!==ke){o=o.left;continue}}if(c=a+o.start,c>t){ht(o,!0);continue}if(h=a+o.end,h>=e){o.setCachedOffsets(c,h,r);let f=!0;i&&o.ownerId&&o.ownerId!==i&&(f=!1),s&&CW(o)&&(f=!1),f&&(u[d++]=o)}if(ht(o,!0),o.right!==ke&&!Vi(o.right)){a+=o.delta,o=o.right;continue}}return ht(n.root,!1),u}function HP(n,e){if(n.root===ke)return e.parent=ke,e.left=ke,e.right=ke,ut(e,0),n.root=e,n.root;bde(n,e),El(e.parent);let t=e;for(;t!==n.root&&kn(t.parent)===1;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;kn(i)===1?(ut(t.parent,0),ut(i,0),ut(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,om(n,t)),ut(t.parent,0),ut(t.parent.parent,1),am(n,t.parent.parent))}else{const i=t.parent.parent.left;kn(i)===1?(ut(t.parent,0),ut(i,0),ut(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,am(n,t)),ut(t.parent,0),ut(t.parent.parent,1),om(n,t.parent.parent))}return ut(n.root,0),e}function bde(n,e){let t=0,i=n.root;const s=e.start,r=e.end;for(;;)if(wde(s,r,i.start+t,i.end+t)<0)if(i.left===ke){e.start-=t,e.end-=t,e.maxEnd-=t,i.left=e;break}else i=i.left;else if(i.right===ke){e.start-=t+i.delta,e.end-=t+i.delta,e.maxEnd-=t+i.delta,i.right=e;break}else t+=i.delta,i=i.right;e.parent=i,e.left=ke,e.right=ke,ut(e,1)}function $P(n,e){let t,i;if(e.left===ke?(t=e.right,i=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===ke?(t=e.left,i=e):(i=vde(e.right),t=i.right,t.start+=i.delta,t.end+=i.delta,t.delta+=i.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),i.start+=e.delta,i.end+=e.delta,i.delta=e.delta,(i.delta<-1073741824||i.delta>1073741824)&&(n.requestNormalizeDelta=!0)),i===n.root){n.root=t,ut(t,0),e.detach(),Ux(),pc(t),n.root.parent=ke;return}let s=kn(i)===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?t.parent=i.parent:(i.parent===e?t.parent=i:t.parent=i.parent,i.left=e.left,i.right=e.right,i.parent=e.parent,ut(i,kn(e)),e===n.root?n.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==ke&&(i.left.parent=i),i.right!==ke&&(i.right.parent=i)),e.detach(),s){El(t.parent),i!==e&&(El(i),El(i.parent)),Ux();return}El(t),El(t.parent),i!==e&&(El(i),El(i.parent));let r;for(;t!==n.root&&kn(t)===0;)t===t.parent.left?(r=t.parent.right,kn(r)===1&&(ut(r,0),ut(t.parent,1),om(n,t.parent),r=t.parent.right),kn(r.left)===0&&kn(r.right)===0?(ut(r,1),t=t.parent):(kn(r.right)===0&&(ut(r.left,0),ut(r,1),am(n,r),r=t.parent.right),ut(r,kn(t.parent)),ut(t.parent,0),ut(r.right,0),om(n,t.parent),t=n.root)):(r=t.parent.left,kn(r)===1&&(ut(r,0),ut(t.parent,1),am(n,t.parent),r=t.parent.left),kn(r.left)===0&&kn(r.right)===0?(ut(r,1),t=t.parent):(kn(r.left)===0&&(ut(r.right,0),ut(r,1),om(n,r),r=t.parent.left),ut(r,kn(t.parent)),ut(t.parent,0),ut(r.left,0),am(n,t.parent),t=n.root));ut(t,0),Ux()}function vde(n){for(;n.left!==ke;)n=n.left;return n}function Ux(){ke.parent=ke,ke.delta=0,ke.start=0,ke.end=0}function om(n,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==ke&&(t.left.parent=e),t.parent=e.parent,e.parent===ke?n.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,pc(e),pc(t)}function am(n,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(n.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==ke&&(t.right.parent=e),t.parent=e.parent,e.parent===ke?n.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,pc(e),pc(t)}function SW(n){let e=n.end;if(n.left!==ke){const t=n.left.maxEnd;t>e&&(e=t)}if(n.right!==ke){const t=n.right.maxEnd+n.delta;t>e&&(e=t)}return e}function pc(n){n.maxEnd=SW(n)}function El(n){for(;n!==ke;){const e=SW(n);if(n.maxEnd===e)return;n.maxEnd=e,n=n.parent}}function wde(n,e,t,i){return n===t?e-i:n-t}class QE{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==ve)return w2(this.right);let e=this;for(;e.parent!==ve&&e.parent.left!==e;)e=e.parent;return e.parent===ve?ve:e.parent}prev(){if(this.left!==ve)return xW(this.left);let e=this;for(;e.parent!==ve&&e.parent.right!==e;)e=e.parent;return e.parent===ve?ve:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const ve=new QE(null,0);ve.parent=ve;ve.left=ve;ve.right=ve;ve.color=0;function w2(n){for(;n.left!==ve;)n=n.left;return n}function xW(n){for(;n.right!==ve;)n=n.right;return n}function C2(n){return n===ve?0:n.size_left+n.piece.length+C2(n.right)}function y2(n){return n===ve?0:n.lf_left+n.piece.lineFeedCnt+y2(n.right)}function jx(){ve.parent=ve}function lm(n,e){let t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==ve&&(t.left.parent=e),t.parent=e.parent,e.parent===ve?n.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function cm(n,e){let t=e.left;e.left=t.right,t.right!==ve&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===ve?n.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function Ab(n,e){let t,i;if(e.left===ve?(i=e,t=i.right):e.right===ve?(i=e,t=i.left):(i=w2(e.right),t=i.right),i===n.root){n.root=t,t.color=0,e.detach(),jx(),n.root.parent=ve;return}let s=i.color===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?(t.parent=i.parent,Ap(n,t)):(i.parent===e?t.parent=i:t.parent=i.parent,Ap(n,t),i.left=e.left,i.right=e.right,i.parent=e.parent,i.color=e.color,e===n.root?n.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==ve&&(i.left.parent=i),i.right!==ve&&(i.right.parent=i),i.size_left=e.size_left,i.lf_left=e.lf_left,Ap(n,i)),e.detach(),t.parent.left===t){let o=C2(t),a=y2(t);if(o!==t.parent.size_left||a!==t.parent.lf_left){let l=o-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=o,t.parent.lf_left=a,ka(n,t.parent,l,c)}}if(Ap(n,t.parent),s){jx();return}let r;for(;t!==n.root&&t.color===0;)t===t.parent.left?(r=t.parent.right,r.color===1&&(r.color=0,t.parent.color=1,lm(n,t.parent),r=t.parent.right),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.right.color===0&&(r.left.color=0,r.color=1,cm(n,r),r=t.parent.right),r.color=t.parent.color,t.parent.color=0,r.right.color=0,lm(n,t.parent),t=n.root)):(r=t.parent.left,r.color===1&&(r.color=0,t.parent.color=1,cm(n,t.parent),r=t.parent.left),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.left.color===0&&(r.right.color=0,r.color=1,lm(n,r),r=t.parent.left),r.color=t.parent.color,t.parent.color=0,r.left.color=0,cm(n,t.parent),t=n.root));t.color=0,jx()}function UP(n,e){for(Ap(n,e);e!==n.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,lm(n,e)),e.parent.color=0,e.parent.parent.color=1,cm(n,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,cm(n,e)),e.parent.color=0,e.parent.parent.color=1,lm(n,e.parent.parent))}n.root.color=0}function ka(n,e,t,i){for(;e!==n.root&&e!==ve;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}function Ap(n,e){let t=0,i=0;if(e!==n.root){for(;e!==n.root&&e===e.parent.right;)e=e.parent;if(e!==n.root)for(e=e.parent,t=C2(e.left)-e.size_left,i=y2(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=i;e!==n.root&&(t!==0||i!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}}class Cde extends Ig{constructor(e){super(0);for(let t=0,i=e.length;t<i;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}}function yde(n){let e={};return t=>(e.hasOwnProperty(t)||(e[t]=n(t)),e[t])}const jf=yde(n=>new Cde(n)),Sde=999;class Xc{constructor(e,t,i,s){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=s}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=xde(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=Q9(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new Dde(t,this.wordSeparators?jf(this.wordSeparators):null,i?this.searchString:null)}}function xde(n){if(!n||n.length===0)return!1;for(let e=0,t=n.length;e<t;e++)if(n.charCodeAt(e)===92){if(e++,e>=t)break;const s=n.charCodeAt(e);if(s===110||s===114||s===87)return!0}return!1}class Dde{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}}function ih(n,e,t){if(!t)return new r_(n,null);let i=[];for(let s=0,r=e.length;s<r;s++)i[s]=e[s];return new r_(n,i)}class jP{constructor(e){let t=[],i=0;for(let s=0,r=e.length;s<r;s++)e.charCodeAt(s)===10&&(t[i++]=s);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let i=0,s=t.length-1;if(s===-1||e<=t[0])return 0;for(;i<s;){const r=i+((s-i)/2>>0);t[r]>=e?s=r-1:t[r+1]>=e?(i=r,s=r):i=r+1}return i+1}}class Mb{static findMatches(e,t,i,s,r){const o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,i,new Mp(o.wordSeparators,o.regex),s,r):this._doFindMatchesLineByLine(e,i,o,s,r):[]}static _getMultilineMatchRange(e,t,i,s,r,o){let a,l=0;s?(l=s.findLineFeedCountBeforeOffset(r),a=t+r+l):a=t+r;let c;if(s){let f=s.findLineFeedCountBeforeOffset(r+o.length)-l;c=a+o.length+f}else c=a+o.length;const h=e.getPositionAt(a),u=e.getPositionAt(c);return new I(h.lineNumber,h.column,u.lineNumber,u.column)}static _doFindMatchesMultiline(e,t,i,s,r){const o=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new jP(a):null,c=[];let h=0,u;for(i.reset(0);u=i.next(a);)if(c[h++]=ih(this._getMultilineMatchRange(e,o,a,l,u.index,u[0]),u,s),h>=r)return c;return c}static _doFindMatchesLineByLine(e,t,i,s,r){const o=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(i,c,t.startLineNumber,t.startColumn-1,a,o,s,r),o}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(i,l,t.startLineNumber,t.startColumn-1,a,o,s,r);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<r;c++)a=this._findMatchesInLine(i,e.getLineContent(c),c,0,a,o,s,r);if(a<r){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(i,c,t.endLineNumber,0,a,o,s,r)}return o}static _findMatchesInLine(e,t,i,s,r,o,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const d=e.simpleSearch,f=d.length,g=t.length;let p=-f;for(;(p=t.indexOf(d,p+f))!==-1;)if((!c||S2(c,t,g,p,f))&&(o[r++]=new r_(new I(i,p+1+s,i,p+1+f+s),null),r>=l))return r;return r}const h=new Mp(e.wordSeparators,e.regex);let u;h.reset(0);do if(u=h.next(t),u&&(o[r++]=ih(new I(i,u.index+1+s,i,u.index+1+u[0].length+s),u,a),r>=l))return r;while(u);return r}static findNextMatch(e,t,i,s){const r=t.parseSearchRequest();if(!r)return null;const o=new Mp(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindNextMatchMultiline(e,i,o,s):this._doFindNextMatchLineByLine(e,i,o,s)}static _doFindNextMatchMultiline(e,t,i,s){const r=new P(t.lineNumber,1),o=e.getOffsetAt(r),a=e.getLineCount(),l=e.getValueInRange(new I(r.lineNumber,r.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new jP(l):null;i.reset(t.column-1);let h=i.next(l);return h?ih(this._getMultilineMatchRange(e,o,l,c,h.index,h[0]),h,s):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new P(1,1),i,s):null}static _doFindNextMatchLineByLine(e,t,i,s){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o),l=this._findFirstMatchInLine(i,a,o,t.column,s);if(l)return l;for(let c=1;c<=r;c++){const h=(o+c-1)%r,u=e.getLineContent(h+1),d=this._findFirstMatchInLine(i,u,h+1,1,s);if(d)return d}return null}static _findFirstMatchInLine(e,t,i,s,r){e.reset(s-1);const o=e.next(t);return o?ih(new I(i,o.index+1,i,o.index+1+o[0].length),o,r):null}static findPreviousMatch(e,t,i,s){const r=t.parseSearchRequest();if(!r)return null;const o=new Mp(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindPreviousMatchMultiline(e,i,o,s):this._doFindPreviousMatchLineByLine(e,i,o,s)}static _doFindPreviousMatchMultiline(e,t,i,s){const r=this._doFindMatchesMultiline(e,new I(1,1,t.lineNumber,t.column),i,s,10*Sde);if(r.length>0)return r[r.length-1];const o=e.getLineCount();return t.lineNumber!==o||t.column!==e.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(e,new P(o,e.getLineMaxColumn(o)),i,s):null}static _doFindPreviousMatchLineByLine(e,t,i,s){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o).substring(0,t.column-1),l=this._findLastMatchInLine(i,a,o,s);if(l)return l;for(let c=1;c<=r;c++){const h=(r+o-c-1)%r,u=e.getLineContent(h+1),d=this._findLastMatchInLine(i,u,h+1,s);if(d)return d}return null}static _findLastMatchInLine(e,t,i,s){let r=null,o;for(e.reset(0);o=e.next(t);)r=ih(new I(i,o.index+1,i,o.index+1+o[0].length),o,s);return r}}function Lde(n,e,t,i,s){if(i===0)return!0;const r=e.charCodeAt(i-1);if(n.get(r)!==0||r===13||r===10)return!0;if(s>0){const o=e.charCodeAt(i);if(n.get(o)!==0)return!0}return!1}function kde(n,e,t,i,s){if(i+s===t)return!0;const r=e.charCodeAt(i+s);if(n.get(r)!==0||r===13||r===10)return!0;if(s>0){const o=e.charCodeAt(i+s-1);if(n.get(o)!==0)return!0}return!1}function S2(n,e,t,i,s){return Lde(n,e,t,i,s)&&kde(n,e,t,i,s)}class Mp{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let i;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(i=this._searchRegex.exec(e),!i))return null;const s=i.index,r=i[0].length;if(s===this._prevMatchStartIndex&&r===this._prevMatchLength){if(r===0){Ra(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=s,this._prevMatchLength=r,!this._wordSeparators||S2(this._wordSeparators,e,t,s,r))return i}while(i);return null}}const wa=65535;function DW(n){let e;return n[n.length-1]<65536?e=new Uint16Array(n.length):e=new Uint32Array(n.length),e.set(n,0),e}class Ede{constructor(e,t,i,s,r){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=s,this.isBasicASCII=r}}function Ea(n,e=!0){let t=[0],i=1;for(let s=0,r=n.length;s<r;s++){const o=n.charCodeAt(s);o===13?s+1<r&&n.charCodeAt(s+1)===10?(t[i++]=s+2,s++):t[i++]=s+1:o===10&&(t[i++]=s+1)}return e?DW(t):t}function Ide(n,e){n.length=0,n[0]=0;let t=1,i=0,s=0,r=0,o=!0;for(let l=0,c=e.length;l<c;l++){const h=e.charCodeAt(l);h===13?l+1<c&&e.charCodeAt(l+1)===10?(r++,n[t++]=l+2,l++):(i++,n[t++]=l+1):h===10?(s++,n[t++]=l+1):o&&h!==9&&(h<32||h>126)&&(o=!1)}const a=new Ede(DW(n),i,s,r,o);return n.length=0,a}class Kn{constructor(e,t,i,s,r){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=s,this.length=r}}class nh{constructor(e,t){this.buffer=e,this.lineStarts=t}}class Tde{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==ve&&e.iterate(e.root,i=>(i!==ve&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class Nde{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,i=this._cache;for(let s=0;s<i.length;s++){let r=i[s];if(r.node.parent===null||r.nodeStartOffset>=e){i[s]=null,t=!0;continue}}if(t){let s=[];for(const r of i)r!==null&&s.push(r);this._cache=s}}}class Ade{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new nh("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=ve,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let s=null;for(let r=0,o=e.length;r<o;r++)if(e[r].buffer.length>0){e[r].lineStarts||(e[r].lineStarts=Ea(e[r].buffer));let a=new Kn(r+1,{line:0,column:0},{line:e[r].lineStarts.length-1,column:e[r].buffer.length-e[r].lineStarts[e[r].lineStarts.length-1]},e[r].lineStarts.length-1,e[r].buffer.length);this._buffers.push(e[r]),s=this.rbInsertRight(s,a)}this._searchCache=new Nde(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=wa,i=t-Math.floor(t/3),s=i*2,r="",o=0,a=[];if(this.iterate(this.root,l=>{let c=this.getNodeContent(l),h=c.length;if(o<=i||o+h<s)return r+=c,o+=h,!0;let u=r.replace(/\r\n|\r|\n/g,e);return a.push(new nh(u,Ea(u))),r=c,o=h,!0}),o>0){let l=r.replace(/\r\n|\r|\n/g,e);a.push(new nh(l,Ea(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new Tde(this,e)}getOffsetAt(e,t){let i=0,s=this.root;for(;s!==ve;)if(s.left!==ve&&s.lf_left+1>=e)s=s.left;else{if(s.lf_left+s.piece.lineFeedCnt+1>=e)return i+=s.size_left,i+=this.getAccumulatedValue(s,e-s.lf_left-2)+t-1;e-=s.lf_left+s.piece.lineFeedCnt,i+=s.size_left+s.piece.length,s=s.right}return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0,s=e;for(;t!==ve;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){let r=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+r.index,r.index===0){let o=this.getOffsetAt(i+1,1),a=s-o;return new P(i+1,a+1)}return new P(i+1,r.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===ve){let r=this.getOffsetAt(i+1,1),o=s-e-r;return new P(i+1,o+1)}else t=t.right;return new P(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let i=this.nodeAt2(e.startLineNumber,e.startColumn),s=this.nodeAt2(e.endLineNumber,e.endColumn),r=this.getValueInRange2(i,s);return t?t!==this._EOL||!this._EOLNormalized?r.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?r:r.replace(/\r\n|\r|\n/g,t):r}getValueInRange2(e,t){if(e.node===t.node){let a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let i=e.node,s=this._buffers[i.piece.bufferIndex].buffer,r=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start),o=s.substring(r+e.remainder,r+i.piece.length);for(i=i.next();i!==ve;){let a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){o+=a.substring(l,l+t.remainder);break}else o+=a.substr(l,i.piece.length);i=i.next()}return o}getLinesContent(){let e=[],t=0,i="",s=!1;return this.iterate(this.root,r=>{if(r===ve)return!0;const o=r.piece;let a=o.length;if(a===0)return!0;const l=this._buffers[o.bufferIndex].buffer,c=this._buffers[o.bufferIndex].lineStarts,h=o.start.line,u=o.end.line;let d=c[h]+o.start.column;if(s&&(l.charCodeAt(d)===10&&(d++,a--),e[t++]=i,i="",s=!1,a===0))return!0;if(h===u)return!this._EOLNormalized&&l.charCodeAt(d+a-1)===13?(s=!0,i+=l.substr(d,a-1)):i+=l.substr(d,a),!0;i+=this._EOLNormalized?l.substring(d,Math.max(d,c[h+1]-this._EOLLength)):l.substring(d,c[h+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let f=h+1;f<u;f++)i=this._EOLNormalized?l.substring(c[f],c[f+1]-this._EOLLength):l.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this._EOLNormalized&&l.charCodeAt(c[u]+o.end.column-1)===13?(s=!0,o.end.column===0?t--:i=l.substr(c[u],o.end.column-1)):i=l.substr(c[u],o.end.column),!0}),s&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let i=this._buffers[t.piece.bufferIndex],s=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(s)}else{let t=this._buffers[e.node.piece.bufferIndex],s=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(s)}}getLineCharCode(e,t){let i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,i,s,r,o,a,l,c,h,u){let d=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),g=this.offsetInBuffer(e.piece.bufferIndex,r),p=this.offsetInBuffer(e.piece.bufferIndex,o),_,v={line:0,column:0},b,w;t._wordSeparators?(b=d.buffer.substring(g,p),w=C=>C+g,t.reset(0)):(b=d.buffer,w=C=>C,t.reset(g));do if(_=t.next(b),_){if(w(_.index)>=p)return h;this.positionInBuffer(e,w(_.index)-f,v);let C=this.getLineFeedCnt(e.piece.bufferIndex,r,v),y=v.line===r.line?v.column-r.column+s:v.column+1,D=y+_[0].length;if(u[h++]=ih(new I(i+C,y,i+C,D),_,l),w(_.index)+_[0].length>=p||h>=c)return h}while(_);return h}findMatchesLineByLine(e,t,i,s){const r=[];let o=0;const a=new Mp(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];let c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let h=this.positionInBuffer(l.node,l.remainder),u=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,h,u,t,i,s,o,r),r;let d=e.startLineNumber,f=l.node;for(;f!==c.node;){let p=this.getLineFeedCnt(f.piece.bufferIndex,h,f.piece.end);if(p>=1){let v=this._buffers[f.piece.bufferIndex].lineStarts,b=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),w=v[h.line+p],C=d===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(f,a,d,C,h,this.positionInBuffer(f,w-b),t,i,s,o,r),o>=s)return r;d+=p}let _=d===e.startLineNumber?e.startColumn-1:0;if(d===e.endLineNumber){const v=this.getLineContent(d).substring(_,e.endColumn-1);return o=this._findMatchesInLine(t,a,v,e.endLineNumber,_,o,r,i,s),r}if(o=this._findMatchesInLine(t,a,this.getLineContent(d).substr(_),d,_,o,r,i,s),o>=s)return r;d++,l=this.nodeAt2(d,1),f=l.node,h=this.positionInBuffer(l.node,l.remainder)}if(d===e.endLineNumber){let p=d===e.startLineNumber?e.startColumn-1:0;const _=this.getLineContent(d).substring(p,e.endColumn-1);return o=this._findMatchesInLine(t,a,_,e.endLineNumber,p,o,r,i,s),r}let g=d===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(c.node,a,d,g,h,u,t,i,s,o,r),r}_findMatchesInLine(e,t,i,s,r,o,a,l,c){const h=e.wordSeparators;if(!l&&e.simpleSearch){const d=e.simpleSearch,f=d.length,g=i.length;let p=-f;for(;(p=i.indexOf(d,p+f))!==-1;)if((!h||S2(h,i,g,p,f))&&(a[o++]=new r_(new I(s,p+1+r,s,p+1+f+r),null),o>=c))return o;return o}let u;t.reset(0);do if(u=t.next(i),u&&(a[o++]=ih(new I(s,u.index+1+r,s,u.index+1+u[0].length+r),u,l),o>=c))return o;while(u);return o}insert(e,t,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==ve){let{node:s,remainder:r,nodeStartOffset:o}=this.nodeAt(e),a=s.piece,l=a.bufferIndex,c=this.positionInBuffer(s,r);if(s.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&o+a.length===e&&t.length<wa){this.appendToNode(s,t),this.computeBufferMetadata();return}if(o===e)this.insertContentToNodeLeft(t,s),this._searchCache.validate(e);else if(o+s.piece.length>e){let h=[],u=new Kn(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(s,r)===10){let p={line:u.start.line+1,column:0};u=new Kn(u.bufferIndex,p,u.end,this.getLineFeedCnt(u.bufferIndex,p,u.end),u.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(s,r-1)===13){let p=this.positionInBuffer(s,r-1);this.deleteNodeTail(s,p),t="\r"+t,s.piece.length===0&&h.push(s)}else this.deleteNodeTail(s,c);else this.deleteNodeTail(s,c);let d=this.createNewPieces(t);u.length>0&&this.rbInsertRight(s,u);let f=s;for(let g=0;g<d.length;g++)f=this.rbInsertRight(f,d[g]);this.deleteNodes(h)}else this.insertContentToNodeRight(t,s)}else{let s=this.createNewPieces(t),r=this.rbInsertLeft(null,s[0]);for(let o=1;o<s.length;o++)r=this.rbInsertRight(r,s[o])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===ve)return;let i=this.nodeAt(e),s=this.nodeAt(e+t),r=i.node,o=s.node;if(r===o){let d=this.positionInBuffer(r,i.remainder),f=this.positionInBuffer(r,s.remainder);if(i.nodeStartOffset===e){if(t===r.piece.length){let g=r.next();Ab(this,r),this.validateCRLFWithPrevNode(g),this.computeBufferMetadata();return}this.deleteNodeHead(r,f),this._searchCache.validate(e),this.validateCRLFWithPrevNode(r),this.computeBufferMetadata();return}if(i.nodeStartOffset+r.piece.length===e+t){this.deleteNodeTail(r,d),this.validateCRLFWithNextNode(r),this.computeBufferMetadata();return}this.shrinkNode(r,d,f),this.computeBufferMetadata();return}let a=[],l=this.positionInBuffer(r,i.remainder);this.deleteNodeTail(r,l),this._searchCache.validate(e),r.piece.length===0&&a.push(r);let c=this.positionInBuffer(o,s.remainder);this.deleteNodeHead(o,c),o.piece.length===0&&a.push(o);let h=r.next();for(let d=h;d!==ve&&d!==o;d=d.next())a.push(d);let u=r.piece.length===0?r.prev():r;this.deleteNodes(a),this.validateCRLFWithNextNode(u),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let o=t.piece,a={line:o.start.line+1,column:0},l=new Kn(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),o.length-1);t.piece=l,e+=`
`,ka(this,t,-1,-1),t.piece.length===0&&i.push(t)}let s=this.createNewPieces(e),r=this.rbInsertLeft(t,s[s.length-1]);for(let o=s.length-2;o>=0;o--)r=this.rbInsertLeft(r,s[o]);this.validateCRLFWithPrevNode(r),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);let i=this.createNewPieces(e),s=this.rbInsertRight(t,i[0]),r=s;for(let o=1;o<i.length;o++)r=this.rbInsertRight(r,i[o]);this.validateCRLFWithPrevNode(s)}positionInBuffer(e,t,i){let s=e.piece,r=e.piece.bufferIndex,o=this._buffers[r].lineStarts,l=o[s.start.line]+s.start.column+t,c=s.start.line,h=s.end.line,u=0,d=0,f=0;for(;c<=h&&(u=c+(h-c)/2|0,f=o[u],u!==h);)if(d=o[u+1],l<f)h=u-1;else if(l>=d)c=u+1;else break;return i?(i.line=u,i.column=l-f,null):{line:u,column:l-f}}getLineFeedCnt(e,t,i){if(i.column===0)return i.line-t.line;let s=this._buffers[e].lineStarts;if(i.line===s.length-1)return i.line-t.line;let r=s[i.line+1],o=s[i.line]+i.column;if(r>o+1)return i.line-t.line;let a=o-1;return this._buffers[e].buffer.charCodeAt(a)===13?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)Ab(this,e[t])}createNewPieces(e){if(e.length>wa){let h=[];for(;e.length>wa;){const d=e.charCodeAt(wa-1);let f;d===13||d>=55296&&d<=56319?(f=e.substring(0,wa-1),e=e.substring(wa-1)):(f=e.substring(0,wa),e=e.substring(wa));let g=Ea(f);h.push(new Kn(this._buffers.length,{line:0,column:0},{line:g.length-1,column:f.length-g[g.length-1]},g.length-1,f.length)),this._buffers.push(new nh(f,g))}let u=Ea(e);return h.push(new Kn(this._buffers.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this._buffers.push(new nh(e,u)),h}let t=this._buffers[0].buffer.length;const i=Ea(e,!1);let s=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},s=this._lastChangeBufferPos;for(let h=0;h<i.length;h++)i[h]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let h=0;h<i.length;h++)i[h]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}const r=this._buffers[0].buffer.length;let o=this._buffers[0].lineStarts.length-1,a=r-this._buffers[0].lineStarts[o],l={line:o,column:a},c=new Kn(0,s,l,this.getLineFeedCnt(0,s,l),r-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let i=this.root,s="",r=this._searchCache.get2(e);if(r){i=r.node;let o=this.getAccumulatedValue(i,e-r.nodeStartLineNumber-1),a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(r.nodeStartLineNumber+i.piece.lineFeedCnt===e)s=a.substring(l+o,l+i.piece.length);else{let c=this.getAccumulatedValue(i,e-r.nodeStartLineNumber);return a.substring(l+o,l+c-t)}}else{let o=0;const a=e;for(;i!==ve;)if(i.left!==ve&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){let l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this.getAccumulatedValue(i,e-i.lf_left-1),h=this._buffers[i.piece.bufferIndex].buffer,u=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return o+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:o,nodeStartLineNumber:a-(e-1-i.lf_left)}),h.substring(u+l,u+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){let l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this._buffers[i.piece.bufferIndex].buffer,h=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);s=c.substring(h+l,h+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,o+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==ve;){let o=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){let a=this.getAccumulatedValue(i,0),l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return s+=o.substring(l,l+a-t),s}else{let a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);s+=o.substr(a,i.piece.length)}i=i.next()}return s}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==ve;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){let i=e.piece,s=this.positionInBuffer(e,t),r=s.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){let o=this.getLineFeedCnt(e.piece.bufferIndex,i.start,s);if(o!==r)return{index:o,remainder:0}}return{index:r,remainder:s.column}}getAccumulatedValue(e,t){if(t<0)return 0;let i=e.piece,s=this._buffers[i.bufferIndex].lineStarts,r=i.start.line+t+1;return r>i.end.line?s[i.end.line]+i.end.column-s[i.start.line]-i.start.column:s[r]-s[i.start.line]-i.start.column}deleteNodeTail(e,t){const i=e.piece,s=i.lineFeedCnt,r=this.offsetInBuffer(i.bufferIndex,i.end),o=t,a=this.offsetInBuffer(i.bufferIndex,o),l=this.getLineFeedCnt(i.bufferIndex,i.start,o),c=l-s,h=a-r,u=i.length+h;e.piece=new Kn(i.bufferIndex,i.start,o,l,u),ka(this,e,h,c)}deleteNodeHead(e,t){const i=e.piece,s=i.lineFeedCnt,r=this.offsetInBuffer(i.bufferIndex,i.start),o=t,a=this.getLineFeedCnt(i.bufferIndex,o,i.end),l=this.offsetInBuffer(i.bufferIndex,o),c=a-s,h=r-l,u=i.length+h;e.piece=new Kn(i.bufferIndex,o,i.end,a,u),ka(this,e,h,c)}shrinkNode(e,t,i){const s=e.piece,r=s.start,o=s.end,a=s.length,l=s.lineFeedCnt,c=t,h=this.getLineFeedCnt(s.bufferIndex,s.start,c),u=this.offsetInBuffer(s.bufferIndex,t)-this.offsetInBuffer(s.bufferIndex,r);e.piece=new Kn(s.bufferIndex,s.start,c,h,u),ka(this,e,u-a,h-l);let d=new Kn(s.bufferIndex,i,o,this.getLineFeedCnt(s.bufferIndex,i,o),this.offsetInBuffer(s.bufferIndex,o)-this.offsetInBuffer(s.bufferIndex,i)),f=this.rbInsertRight(e,d);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),s=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const r=Ea(t,!1);for(let f=0;f<r.length;f++)r[f]+=s;if(i){let f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:s-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1));const o=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[o],l={line:o,column:a},c=e.piece.length+t.length,h=e.piece.lineFeedCnt,u=this.getLineFeedCnt(0,e.piece.start,l),d=u-h;e.piece=new Kn(e.piece.bufferIndex,e.piece.start,l,u,c),this._lastChangeBufferPos=l,ka(this,e,t.length,d)}nodeAt(e){let t=this.root,i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let s=0;for(;t!==ve;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){s+=t.size_left;let r={node:t,remainder:e-t.size_left,nodeStartOffset:s};return this._searchCache.set(r),r}else e-=t.size_left+t.piece.length,s+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let i=this.root,s=0;for(;i!==ve;)if(i.left!==ve&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){let r=this.getAccumulatedValue(i,e-i.lf_left-2),o=this.getAccumulatedValue(i,e-i.lf_left-1);return s+=i.size_left,{node:i,remainder:Math.min(r+t-1,o),nodeStartOffset:s}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){let r=this.getAccumulatedValue(i,e-i.lf_left-2);if(r+t-1<=i.piece.length)return{node:i,remainder:r+t-1,nodeStartOffset:s};t-=i.piece.length-r;break}else e-=i.lf_left+i.piece.lineFeedCnt,s+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==ve;){if(i.piece.lineFeedCnt>0){let r=this.getAccumulatedValue(i,0),o=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,r),nodeStartOffset:o}}else if(i.piece.length>=t-1){let r=this.offsetOfNode(i);return{node:i,remainder:t-1,nodeStartOffset:r}}else t-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let i=this._buffers[e.piece.bufferIndex],s=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(s)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===ve||e.piece.lineFeedCnt===0)return!1;let t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,s=t.start.line,r=i[s]+t.start.column;return s===i.length-1||i[s+1]>r+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(r)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===ve||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let i=[],s=this._buffers[e.piece.bufferIndex].lineStarts,r;e.piece.end.column===0?r={line:e.piece.end.line-1,column:s[e.piece.end.line]-s[e.piece.end.line-1]-1}:r={line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Kn(e.piece.bufferIndex,e.piece.start,r,a,o),ka(this,e,-1,-1),e.piece.length===0&&i.push(e);let l={line:t.piece.start.line+1,column:0};const c=t.piece.length-1,h=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Kn(t.piece.bufferIndex,l,t.piece.end,h,c),ka(this,t,-1,-1),t.piece.length===0&&i.push(t);let u=this.createNewPieces(`\r
`);this.rbInsertRight(e,u[0]);for(let d=0;d<i.length;d++)Ab(this,i[d])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let i=t.next();if(this.startWithLF(i)){if(e+=`
`,i.piece.length===1)Ab(this,i);else{const s=i.piece,r={line:s.start.line+1,column:0},o=s.length-1,a=this.getLineFeedCnt(s.bufferIndex,r,s.end);i.piece=new Kn(s.bufferIndex,r,s.end,a,o),ka(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===ve)return t(ve);let i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===ve)return"";let t=this._buffers[e.piece.bufferIndex],i,s=e.piece,r=this.offsetInBuffer(s.bufferIndex,s.start),o=this.offsetInBuffer(s.bufferIndex,s.end);return i=t.buffer.substring(r,o),i}getPieceContent(e){let t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),s=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(i,s)}rbInsertRight(e,t){let i=new QE(t,1);if(i.left=ve,i.right=ve,i.parent=ve,i.size_left=0,i.lf_left=0,this.root===ve)this.root=i,i.color=0;else if(e.right===ve)e.right=i,i.parent=e;else{let r=w2(e.right);r.left=i,i.parent=r}return UP(this,i),i}rbInsertLeft(e,t){let i=new QE(t,1);if(i.left=ve,i.right=ve,i.parent=ve,i.size_left=0,i.lf_left=0,this.root===ve)this.root=i,i.color=0;else if(e.left===ve)e.left=i,i.parent=e;else{let s=xW(e.left);s.right=i,i.parent=s}return UP(this,i),i}}function qf(n){let e=0,t=0,i=0,s=0;for(let r=0,o=n.length;r<o;r++){const a=n.charCodeAt(r);a===13?(e===0&&(t=r),e++,r+1<o&&n.charCodeAt(r+1)===10?(s|=2,r++):s|=3,i=r+1):a===10&&(s|=1,e===0&&(t=r),e++,i=r+1)}return e===0&&(t=n.length),[e,t,n.length-i,s]}function qP(n){return(n<<0|0<<8|0<<11|1<<14|2<<23)>>>0}const Ca=new Uint32Array(0).buffer;class qx{constructor(){this.tokens=[]}add(e,t){if(this.tokens.length>0){const i=this.tokens[this.tokens.length-1];if(i.startLineNumber+i.tokens.length-1+1===e){i.tokens.push(t);return}}this.tokens.push(new Mde(e,[t]))}}class wC{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){let t=[];for(let i=0;i<this._tokenCount;i++)t.push(`(${this._getDeltaLine(i)+e},${this._getStartCharacter(i)}-${this._getEndCharacter(i)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),i=this._getDeltaLine(e-1),s=this._getEndCharacter(e-1);return new I(0,t+1,i,s+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,i=this._getTokenCount()-1;for(;t<i;){const s=t+Math.floor((i-t)/2),r=this._getDeltaLine(s);if(r<e)t=s+1;else if(r>e)i=s-1;else{let o=s;for(;o>t&&this._getDeltaLine(o-1)===e;)o--;let a=s;for(;a<i&&this._getDeltaLine(a+1)===e;)a++;return new KP(this._tokens.subarray(4*o,4*a+4))}}return this._getDeltaLine(t)===e?new KP(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,i,s){const r=this._tokens,o=this._tokenCount;let a=0,l=!1,c=0;for(let h=0;h<o;h++){const u=4*h,d=r[u],f=r[u+1],g=r[u+2],p=r[u+3];if((d>e||d===e&&g>=t)&&(d<i||d===i&&f<=s))l=!0;else{if(a===0&&(c=d),l){const _=4*a;r[_]=d-c,r[_+1]=f,r[_+2]=g,r[_+3]=p}a++}}return this._tokenCount=a,c}split(e,t,i,s){const r=this._tokens,o=this._tokenCount;let a=[],l=[],c=a,h=0,u=0;for(let d=0;d<o;d++){const f=4*d,g=r[f],p=r[f+1],_=r[f+2],v=r[f+3];if(g>e||g===e&&_>=t){if(g<i||g===i&&p<=s)continue;c!==l&&(c=l,h=0,u=g)}c[h++]=g-u,c[h++]=p,c[h++]=_,c[h++]=v}return[new wC(new Uint32Array(a)),new wC(new Uint32Array(l)),u]}acceptDeleteRange(e,t,i,s,r){const o=this._tokens,a=this._tokenCount,l=s-t;let c=0,h=!1;for(let u=0;u<a;u++){const d=4*u;let f=o[d],g=o[d+1],p=o[d+2];const _=o[d+3];if(f<t||f===t&&p<=i){c++;continue}else if(f===t&&g<i)f===s&&p>r?p-=r-i:p=i;else if(f===t&&g===i)if(f===s&&p>r)p-=r-i;else{h=!0;continue}else if(f<s||f===s&&g<r)if(f===s&&p>r)f===t?(g=i,p=g+(p-r)):(g=0,p=g+(p-r));else{h=!0;continue}else if(f>s){if(l===0&&!h){c=a;break}f-=l}else if(f===s&&g>=r)e&&f===0&&(g+=e,p+=e),f-=l,g-=r-i,p-=r-i;else throw new Error("Not possible!");const v=4*c;o[v]=f,o[v+1]=g,o[v+2]=p,o[v+3]=_,c++}this._tokenCount=c}acceptInsertText(e,t,i,s,r,o){const a=i===0&&s===1&&(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122),l=this._tokens,c=this._tokenCount;for(let h=0;h<c;h++){const u=4*h;let d=l[u],f=l[u+1],g=l[u+2];if(!(d<e||d===e&&g<t)){if(d===e&&g===t)if(a)g+=1;else continue;else if(d===e&&f<t&&t<g)i===0?g+=s:g=t;else{if(d===e&&f===t&&a)continue;if(d===e)if(d+=i,i===0)f+=s,g+=s;else{const p=g-f;f=r+(f-t),g=f+p}else d+=i}l[u]=d,l[u+1]=f,l[u+2]=g}}}}class KP{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}class CC{constructor(e,t){this.startLineNumber=e,this.tokens=t,this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}toString(){return this.tokens.toString(this.startLineNumber)}_updateEndLineNumber(){this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}isEmpty(){return this.tokens.isEmpty()}getLineTokens(e){return this.startLineNumber<=e&&e<=this.endLineNumber?this.tokens.getLineTokens(e-this.startLineNumber):null}getRange(){const e=this.tokens.getRange();return e&&new I(this.startLineNumber+e.startLineNumber,e.startColumn,this.startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this.startLineNumber,i=e.endLineNumber-this.startLineNumber;this.startLineNumber+=this.tokens.removeTokens(t,e.startColumn-1,i,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this.startLineNumber,i=e.endLineNumber-this.startLineNumber,[s,r,o]=this.tokens.split(t,e.startColumn-1,i,e.endColumn-1);return[new CC(this.startLineNumber,s),new CC(this.startLineNumber+o,r)]}applyEdit(e,t){const[i,s,r]=qf(t);this.acceptEdit(e,i,s,r,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,i,s,r){this._acceptDeleteRange(e),this._acceptInsertText(new P(e.startLineNumber,e.startColumn),t,i,s,r),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this.startLineNumber,i=e.endLineNumber-this.startLineNumber;if(i<0){const r=i-t;this.startLineNumber-=r;return}const s=this.tokens.getMaxDeltaLine();if(!(t>=s+1)){if(t<0&&i>=s+1){this.startLineNumber=0,this.tokens.clear();return}if(t<0){const r=-t;this.startLineNumber-=r,this.tokens.acceptDeleteRange(e.startColumn-1,0,0,i,e.endColumn-1)}else this.tokens.acceptDeleteRange(0,t,e.startColumn-1,i,e.endColumn-1)}}_acceptInsertText(e,t,i,s,r){if(t===0&&i===0)return;const o=e.lineNumber-this.startLineNumber;if(o<0){this.startLineNumber+=t;return}const a=this.tokens.getMaxDeltaLine();o>=a+1||this.tokens.acceptInsertText(o,e.column-1,t,i,s,r)}}class Mde{constructor(e,t){this.startLineNumber=e,this.tokens=t}}function ya(n){return n instanceof Uint32Array?n:new Uint32Array(n)}class x2{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let i=e;if(t.length>0){const r=t[0].getRange(),o=t[t.length-1].getRange();if(!r||!o)return e;i=e.plusRange(r).plusRange(o)}let s=null;for(let r=0,o=this._pieces.length;r<o;r++){const a=this._pieces[r];if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){s=s||{index:r};break}if(a.removeTokens(i),a.isEmpty()){this._pieces.splice(r,1),r--,o--;continue}if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){s=s||{index:r};continue}const[l,c]=a.split(i);if(l.isEmpty()){s=s||{index:r};continue}c.isEmpty()||(this._pieces.splice(r,1,l,c),r++,o++,s=s||{index:r})}return s=s||{index:this._pieces.length},t.length>0&&(this._pieces=h_(this._pieces,s.index,t)),i}isComplete(){return this._isComplete}addSemanticTokens(e,t){const i=this._pieces;if(i.length===0)return t;const s=x2._findFirstPieceWithLine(i,e),r=i[s].getLineTokens(e);if(!r)return t;const o=t.getCount(),a=r.getCount();let l=0,c=[],h=0,u=0;const d=(f,g)=>{f!==u&&(u=f,c[h++]=f,c[h++]=g)};for(let f=0;f<a;f++){const g=r.getStartCharacter(f),p=r.getEndCharacter(f),_=r.getMetadata(f),v=((_&1?2048:0)|(_&2?4096:0)|(_&4?8192:0)|(_&8?8372224:0)|(_&16?4286578688:0))>>>0,b=~v>>>0;for(;l<o&&t.getEndOffset(l)<=g;)d(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<o&&t.getStartOffset(l)<g&&d(g,t.getMetadata(l));l<o&&t.getEndOffset(l)<p;)d(t.getEndOffset(l),t.getMetadata(l)&b|_&v),l++;if(l<o)d(p,t.getMetadata(l)&b|_&v),t.getEndOffset(l)===p&&l++;else{const w=Math.min(Math.max(0,l-1),o-1);d(p,t.getMetadata(w)&b|_&v)}}for(;l<o;)d(t.getEndOffset(l),t.getMetadata(l)),l++;return new Oi(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let i=0,s=e.length-1;for(;i<s;){let r=i+Math.floor((s-i)/2);if(e[r].endLineNumber<t)i=r+1;else if(e[r].startLineNumber>t)s=r-1;else{for(;r>i&&e[r-1].startLineNumber<=t&&t<=e[r-1].endLineNumber;)r--;return r}}return i}acceptEdit(e,t,i,s,r){for(const o of this._pieces)o.acceptEdit(e,t,i,s,r)}}class Ts{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}getTokens(e,t,i){let s=null;if(t<this._len&&(s=this._lineTokens[t]),s!==null&&s!==Ca)return new Oi(ya(s),i,this._languageIdCodec);const r=new Uint32Array(2);return r[0]=i.length,r[1]=qP(this._languageIdCodec.encodeLanguageId(e)),new Oi(r,i,this._languageIdCodec)}static _massageTokens(e,t,i){const s=i?ya(i):null;if(t===0){let r=!1;if(s&&s.length>1&&(r=Rs.getLanguageId(s[1])!==e),!r)return Ca}if(!s||s.length===0){const r=new Uint32Array(2);return r[0]=t,r[1]=qP(e),r.buffer}return s[s.length-2]=t,s.byteOffset===0&&s.byteLength===s.buffer.byteLength?s.buffer:s}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let i=[];for(let s=0;s<t;s++)i[s]=null;this._lineTokens=h_(this._lineTokens,e,i),this._len+=t}setTokens(e,t,i,s,r){const o=Ts._massageTokens(this._languageIdCodec.encodeLanguageId(e),i,s);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=o,r?!Ts._equals(a,o):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const i=ya(e),s=ya(t);if(i.length!==s.length)return!1;for(let r=0,o=i.length;r<o;r++)if(i[r]!==s[r])return!1;return!0}acceptEdit(e,t,i){this._acceptDeleteRange(e),this._acceptInsertText(new P(e.startLineNumber,e.startColumn),t,i)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=Ts._delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=Ts._deleteEnding(this._lineTokens[t],e.startColumn-1);const i=e.endLineNumber-1;let s=null;i<this._len&&(s=Ts._deleteBeginning(this._lineTokens[i],e.endColumn-1)),this._lineTokens[t]=Ts._append(this._lineTokens[t],s),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,i){if(t===0&&i===0)return;const s=e.lineNumber-1;if(!(s>=this._len)){if(t===0){this._lineTokens[s]=Ts._insert(this._lineTokens[s],e.column-1,i);return}this._lineTokens[s]=Ts._deleteEnding(this._lineTokens[s],e.column-1),this._lineTokens[s]=Ts._insert(this._lineTokens[s],e.column-1,i),this._insertLines(e.lineNumber,t)}}static _deleteBeginning(e,t){return e===null||e===Ca?e:Ts._delete(e,0,t)}static _deleteEnding(e,t){if(e===null||e===Ca)return e;const i=ya(e),s=i[i.length-2];return Ts._delete(e,t,s)}static _delete(e,t,i){if(e===null||e===Ca||t===i)return e;const s=ya(e),r=s.length>>>1;if(t===0&&s[s.length-2]===i)return Ca;const o=Oi.findIndexInTokensArray(s,t),a=o>0?s[o-1<<1]:0,l=s[o<<1];if(i<l){const f=i-t;for(let g=o;g<r;g++)s[g<<1]-=f;return e}let c,h;a!==t?(s[o<<1]=t,c=o+1<<1,h=t):(c=o<<1,h=a);const u=i-t;for(let f=o+1;f<r;f++){const g=s[f<<1]-u;g>h&&(s[c++]=g,s[c++]=s[(f<<1)+1],h=g)}if(c===s.length)return e;let d=new Uint32Array(c);return d.set(s.subarray(0,c),0),d.buffer}static _append(e,t){if(t===Ca)return e;if(e===Ca)return t;if(e===null)return e;if(t===null)return null;const i=ya(e),s=ya(t),r=s.length>>>1;let o=new Uint32Array(i.length+s.length);o.set(i,0);let a=i.length;const l=i[i.length-2];for(let c=0;c<r;c++)o[a++]=s[c<<1]+l,o[a++]=s[(c<<1)+1];return o.buffer}static _insert(e,t,i){if(e===null||e===Ca)return e;const s=ya(e),r=s.length>>>1;let o=Oi.findIndexInTokensArray(s,t);o>0&&s[o-1<<1]===t&&o--;for(let a=o;a<r;a++)s[a<<1]+=i;return e}}class ff extends q{constructor(e,t,i,s,r,o,a){super(),this._onDidChangeContent=this._register(new R),this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=s,this._mightContainUnusualLineTerminators=r,this._pieceTree=new Ade(e,i,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let i=e+t;const s=this.getPositionAt(e),r=this.getPositionAt(i);return new I(s.lineNumber,s.column,r.lineNumber,r.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let i=this.getOffsetAt(e.startLineNumber,e.startColumn);return this.getOffsetAt(e.endLineNumber,e.endColumn)-i}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let i=0;const s=e.startLineNumber,r=e.endLineNumber;for(let o=s;o<=r;o++){const a=this.getLineContent(o),l=o===s?e.startColumn-1:0,c=o===r?e.endColumn-1:a.length;for(let h=l;h<c;h++)Ri(a.charCodeAt(h))?(i=i+1,h=h+1):i=i+1}return i+=this._getEndOfLine(t).length*(r-s),i}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=Jn(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=kg(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,i){let s=this._mightContainRTL,r=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,a=!0,l=[];for(let p=0;p<e.length;p++){let _=e[p];a&&_._isTracked&&(a=!1);let v=_.range;if(_.text){let D=!0;o||(D=!WA(_.text),o=D),!s&&D&&(s=h1(_.text)),!r&&D&&(r=eV(_.text))}let b="",w=0,C=0,y=0;if(_.text){let D;[w,C,y,D]=qf(_.text);const S=this.getEOL();D===0||D===(S===`\r
`?2:1)?b=_.text:b=_.text.replace(/\r\n|\r|\n/g,S)}l[p]={sortIndex:p,identifier:_.identifier||null,range:v,rangeOffset:this.getOffsetAt(v.startLineNumber,v.startColumn),rangeLength:this.getValueLengthInRange(v),text:b,eolCount:w,firstLineLength:C,lastLineLength:y,forceMoveMarkers:Boolean(_.forceMoveMarkers),isAutoWhitespaceEdit:_.isAutoWhitespaceEdit||!1}}l.sort(ff._sortOpsAscending);let c=!1;for(let p=0,_=l.length-1;p<_;p++){let v=l[p].range.getEndPosition(),b=l[p+1].range.getStartPosition();if(b.isBeforeOrEqual(v)){if(b.isBefore(v))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));let h=i||t?ff._getInverseEditRanges(l):[],u=[];if(t)for(let p=0;p<l.length;p++){let _=l[p],v=h[p];if(_.isAutoWhitespaceEdit&&_.range.isEmpty())for(let b=v.startLineNumber;b<=v.endLineNumber;b++){let w="";b===v.startLineNumber&&(w=this.getLineContent(_.range.startLineNumber),Jn(w)!==-1)||u.push({lineNumber:b,oldContent:w})}}let d=null;if(i){let p=0;d=[];for(let _=0;_<l.length;_++){const v=l[_],b=h[_],w=this.getValueInRange(v.range),C=v.rangeOffset+p;p+=v.text.length-w.length,d[_]={sortIndex:v.sortIndex,identifier:v.identifier,range:b,text:w,textChange:new Pi(v.rangeOffset,w,C,v.text)}}c||d.sort((_,v)=>_.sortIndex-v.sortIndex)}this._mightContainRTL=s,this._mightContainUnusualLineTerminators=r,this._mightContainNonBasicASCII=o;const f=this._doApplyEdits(l);let g=null;if(t&&u.length>0){u.sort((p,_)=>_.lineNumber-p.lineNumber),g=[];for(let p=0,_=u.length;p<_;p++){let v=u[p].lineNumber;if(p>0&&u[p-1].lineNumber===v)continue;let b=u[p].oldContent,w=this.getLineContent(v);w.length===0||w===b||Jn(w)!==-1||g.push(v)}}return this._onDidChangeContent.fire(),new Nle(d,f,g)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const i=e[0].range,s=e[e.length-1].range,r=new I(i.startLineNumber,i.startColumn,s.endLineNumber,s.endColumn);let o=i.startLineNumber,a=i.startColumn;const l=[];for(let f=0,g=e.length;f<g;f++){const p=e[f],_=p.range;t=t||p.forceMoveMarkers,l.push(this.getValueInRange(new I(o,a,_.startLineNumber,_.startColumn))),p.text.length>0&&l.push(p.text),o=_.endLineNumber,a=_.endColumn}const c=l.join(""),[h,u,d]=qf(c);return{sortIndex:0,identifier:e[0].identifier,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r,0),text:c,eolCount:h,firstLineLength:u,lastLineLength:d,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(ff._sortOpsDescending);let t=[];for(let i=0;i<e.length;i++){let s=e[i];const r=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,l=s.range.endColumn;if(r===a&&o===l&&s.text.length===0)continue;s.text?(this._pieceTree.delete(s.rangeOffset,s.rangeLength),this._pieceTree.insert(s.rangeOffset,s.text,!0)):this._pieceTree.delete(s.rangeOffset,s.rangeLength);const c=new I(r,o,a,l);t.push({range:c,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,i,s){return this._pieceTree.findMatchesLineByLine(e,t,i,s)}static _getInverseEditRanges(e){let t=[],i=0,s=0,r=null;for(let o=0,a=e.length;o<a;o++){let l=e[o],c,h;r?r.range.endLineNumber===l.range.startLineNumber?(c=i,h=s+(l.range.startColumn-r.range.endColumn)):(c=i+(l.range.startLineNumber-r.range.endLineNumber),h=l.range.startColumn):(c=l.range.startLineNumber,h=l.range.startColumn);let u;if(l.text.length>0){const d=l.eolCount+1;d===1?u=new I(c,h,c,h+l.firstLineLength):u=new I(c,h,c+d-1,l.lastLineLength+1)}else u=new I(c,h,c,h);i=u.endLineNumber,s=u.endColumn,t.push(u),r=l}return t}static _sortOpsAscending(e,t){let i=I.compareRangesUsingEnds(e.range,t.range);return i===0?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){let i=I.compareRangesUsingEnds(e.range,t.range);return i===0?t.sortIndex-e.sortIndex:-i}}class Rde{constructor(e,t,i,s,r,o,a,l,c){this._chunks=e,this._bom=t,this._cr=i,this._lf=s,this._crlf=r,this._containsRTL=o,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e);let i=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let r=0,o=i.length;r<o;r++){let a=i[r].buffer.replace(/\r\n|\r|\n/g,t),l=Ea(a);i[r]=new nh(a,l)}const s=new ff(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:s,disposable:s}}}class Ode{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&zA(e)&&(this.BOM=Zae,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=Ide(this._tmpLineStarts,e);this.chunks.push(new nh(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&(this.isBasicASCII=t.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=h1(e)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=eV(e))}finish(e=!0){return this._finish(),new Rde(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=Ea(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class Fde{constructor(){this.changeType=1}}class lo{constructor(e,t,i,s,r){this.ownerId=e,this.lineNumber=t,this.column=i,this.options=s,this.order=r}static applyInjectedText(e,t){if(!t||t.length===0)return e;let i="",s=0;for(const r of t)i+=e.substring(s,r.column-1),s=r.column-1,i+=r.options.content;return i+=e.substring(s),i}static fromDecorations(e){const t=[];for(const i of e)i.options.before&&i.options.before.content.length>0&&t.push(new lo(i.ownerId,i.range.startLineNumber,i.range.startColumn,i.options.before,0)),i.options.after&&i.options.after.content.length>0&&t.push(new lo(i.ownerId,i.range.endLineNumber,i.range.endColumn,i.options.after,1));return t.sort((i,s)=>i.lineNumber===s.lineNumber?i.column===s.column?i.order-s.order:i.column-s.column:i.lineNumber-s.lineNumber),t}}class GP{constructor(e,t,i){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=i}}class Pde{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class Bde{constructor(e,t,i,s){this.changeType=4,this.injectedTexts=s,this.fromLineNumber=e,this.toLineNumber=t,this.detail=i}}class Vde{constructor(){this.changeType=5}}class Bh{constructor(e,t,i,s){this.changes=e,this.versionId=t,this.isUndoing=i,this.isRedoing=s,this.resultingSelection=null}containsEvent(e){for(let t=0,i=this.changes.length;t<i;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const i=[].concat(e.changes).concat(t.changes),s=t.versionId,r=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing;return new Bh(i,s,r,o)}}class LW{constructor(e){this.changes=e}}class yC{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=Bh.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),i=yC._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new yC(t,i)}static _mergeChangeEvents(e,t){const i=[].concat(e.changes).concat(t.changes),s=t.eol,r=t.versionId,o=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush;return{changes:i,eol:s,versionId:r,isUndoing:o,isRedoing:a,isFlush:l}}}class Wde{constructor(){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0}_reset(e){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0,e&&this._setBeginState(0,e)}flush(e){this._reset(e)}get invalidLineStartIndex(){return this._invalidLineStartIndex}_invalidateLine(e){e<this._len&&(this._valid[e]=!1),e<this._invalidLineStartIndex&&(this._invalidLineStartIndex=e)}_isValid(e){return e<this._len?this._valid[e]:!1}getBeginState(e){return e<this._len?this._beginState[e]:null}_ensureLine(e){for(;e>=this._len;)this._beginState[this._len]=null,this._valid[this._len]=!1,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._beginState.splice(e,t),this._valid.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const i=[],s=[];for(let r=0;r<t;r++)i[r]=null,s[r]=!1;this._beginState=h_(this._beginState,e,i),this._valid=h_(this._valid,e,s),this._len+=t}_setValid(e,t){this._ensureLine(e),this._valid[e]=t}_setBeginState(e,t){this._ensureLine(e),this._beginState[e]=t}setEndState(e,t,i){if(this._setValid(t,!0),this._invalidLineStartIndex=t+1,t===e-1)return;const s=this.getBeginState(t+1);if(s===null||!i.equals(s)){this._setBeginState(t+1,i),this._invalidateLine(t+1);return}let r=t+1;for(;r<e&&this._isValid(r);)r++;this._invalidLineStartIndex=r}setFakeTokens(e){this._setValid(e,!1)}applyEdits(e,t){const i=e.endLineNumber-e.startLineNumber,r=Math.min(i,t);for(let o=r;o>=0;o--)this._invalidateLine(e.startLineNumber+o-1);this._acceptDeleteRange(e),this._acceptInsertText(new P(e.startLineNumber,e.startColumn),t)}_acceptDeleteRange(e){e.startLineNumber-1>=this._len||this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){e.lineNumber-1>=this._len||this._insertLines(e.lineNumber,t)}}class zde extends q{constructor(e,t){super(),this._textModel=e,this._languageIdCodec=t,this._isDisposed=!1,this._tokenizationStateStore=new Wde,this._tokenizationSupport=null,this._register(Zt.onDidChange(i=>{const s=this._textModel.getLanguageId();i.changedLanguages.indexOf(s)!==-1&&(this._resetTokenizationState(),this._textModel.clearTokens())})),this._register(this._textModel.onDidChangeContentFast(i=>{if(i.isFlush){this._resetTokenizationState();return}for(let s=0,r=i.changes.length;s<r;s++){const o=i.changes[s],[a]=qf(o.text);this._tokenizationStateStore.applyEdits(o.range,a)}this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeAttached(()=>{this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeLanguage(()=>{this._resetTokenizationState(),this._textModel.clearTokens()})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}_resetTokenizationState(){const[e,t]=Hde(this._textModel);this._tokenizationSupport=e,this._tokenizationStateStore.flush(t),this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&vk(()=>{this._isDisposed||this._revalidateTokensNow()})}_revalidateTokensNow(){const e=this._textModel.getLineCount(),t=1,i=new qx,s=rl.create(!1);let r=-1;for(;this._hasLinesToTokenize()&&!(s.elapsed()>t||(r=this._tokenizeOneInvalidLine(i),r>=e)););this._beginBackgroundTokenization(),this._textModel.setTokens(i.tokens,!this._hasLinesToTokenize())}tokenizeViewport(e,t){const i=new qx;this._tokenizeViewport(i,e,t),this._textModel.setTokens(i.tokens,!this._hasLinesToTokenize())}reset(){this._resetTokenizationState(),this._textModel.clearTokens()}forceTokenization(e){const t=new qx;this._updateTokensUntilLine(t,e),this._textModel.setTokens(t.tokens,!this._hasLinesToTokenize())}isCheapToTokenize(e){if(!this._tokenizationSupport)return!0;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return e>t?!1:e<t||this._textModel.getLineLength(e)<2048}_hasLinesToTokenize(){return this._tokenizationSupport?this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount():!1}_tokenizeOneInvalidLine(e){if(!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t}_updateTokensUntilLine(e,t){if(!this._tokenizationSupport)return;const i=this._textModel.getLanguageId(),s=this._textModel.getLineCount(),r=t-1;for(let o=this._tokenizationStateStore.invalidLineStartIndex;o<=r;o++){const a=this._textModel.getLineContent(o+1),l=this._tokenizationStateStore.getBeginState(o),c=Kx(this._languageIdCodec,i,this._tokenizationSupport,a,!0,l);e.add(o+1,c.tokens),this._tokenizationStateStore.setEndState(s,o,c.endState),o=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,t,i){if(!this._tokenizationSupport||i<=this._tokenizationStateStore.invalidLineStartIndex)return;if(t<=this._tokenizationStateStore.invalidLineStartIndex){this._updateTokensUntilLine(e,i);return}let s=this._textModel.getLineFirstNonWhitespaceColumn(t);const r=[];let o=null;for(let c=t-1;s>1&&c>=1;c--){const h=this._textModel.getLineFirstNonWhitespaceColumn(c);if(h!==0&&h<s){if(o=this._tokenizationStateStore.getBeginState(c-1),o)break;r.push(this._textModel.getLineContent(c)),s=h}}o||(o=this._tokenizationSupport.getInitialState());const a=this._textModel.getLanguageId();let l=o;for(let c=r.length-1;c>=0;c--)l=Kx(this._languageIdCodec,a,this._tokenizationSupport,r[c],!1,l).endState;for(let c=t;c<=i;c++){const h=this._textModel.getLineContent(c),u=Kx(this._languageIdCodec,a,this._tokenizationSupport,h,!0,l);e.add(c,u.tokens),this._tokenizationStateStore.setFakeTokens(c-1),l=u.endState}}}function Hde(n){const e=n.getLanguageId();let t=n.isTooLargeForTokenization()?null:Zt.get(e),i=null;if(t)try{i=t.getInitialState()}catch(s){Ie(s),t=null}return[t,i]}function Kx(n,e,t,i,s,r){let o=null;if(t)try{o=t.tokenize2(i,s,r.clone(),0)}catch(a){Ie(a)}return o||(o=bV(n.encodeLanguageId(e),i,r,0)),Oi.convertToEndOffset(o.tokens,i.length),o}function Gl(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}class Fe{constructor(e,t,i,s=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,i))|0,this.a=Gl(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class Vr{constructor(e,t,i,s){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Gl(Math.max(Math.min(1,t),0),3),this.l=Gl(Math.max(Math.min(1,i),0),3),this.a=Gl(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,s=e.b/255,r=e.a,o=Math.max(t,i,s),a=Math.min(t,i,s);let l=0,c=0;const h=(a+o)/2,u=o-a;if(u>0){switch(c=Math.min(h<=.5?u/(2*h):u/(2-2*h),1),o){case t:l=(i-s)/u+(i<s?6:0);break;case i:l=(s-t)/u+2;break;case s:l=(t-i)/u+4;break}l*=60,l=Math.round(l)}return new Vr(l,c,h,r)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){const t=e.h/360,{s:i,l:s,a:r}=e;let o,a,l;if(i===0)o=a=l=s;else{const c=s<.5?s*(1+i):s+i-s*i,h=2*s-c;o=Vr._hue2rgb(h,c,t+1/3),a=Vr._hue2rgb(h,c,t),l=Vr._hue2rgb(h,c,t-1/3)}return new Fe(Math.round(o*255),Math.round(a*255),Math.round(l*255),r)}}class $o{constructor(e,t,i,s){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Gl(Math.max(Math.min(1,t),0),3),this.v=Gl(Math.max(Math.min(1,i),0),3),this.a=Gl(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,s=e.b/255,r=Math.max(t,i,s),o=Math.min(t,i,s),a=r-o,l=r===0?0:a/r;let c;return a===0?c=0:r===t?c=((i-s)/a%6+6)%6:r===i?c=(s-t)/a+2:c=(t-i)/a+4,new $o(Math.round(c*60),l,r,e.a)}static toRGBA(e){const{h:t,s:i,v:s,a:r}=e,o=s*i,a=o*(1-Math.abs(t/60%2-1)),l=s-o;let[c,h,u]=[0,0,0];return t<60?(c=o,h=a):t<120?(c=a,h=o):t<180?(h=o,u=a):t<240?(h=a,u=o):t<300?(c=a,u=o):t<=360&&(c=o,u=a),c=Math.round((c+l)*255),h=Math.round((h+l)*255),u=Math.round((u+l)*255),new Fe(c,h,u,r)}}class V{constructor(e){if(e)if(e instanceof Fe)this.rgba=e;else if(e instanceof Vr)this._hsla=e,this.rgba=Vr.toRGBA(e);else if(e instanceof $o)this._hsva=e,this.rgba=$o.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(e){return V.Format.CSS.parseHex(e)||V.red}get hsla(){return this._hsla?this._hsla:Vr.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:$o.fromRGBA(this.rgba)}equals(e){return!!e&&Fe.equals(this.rgba,e.rgba)&&Vr.equals(this.hsla,e.hsla)&&$o.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=V._relativeLuminanceForComponent(this.rgba.r),t=V._relativeLuminanceForComponent(this.rgba.g),i=V._relativeLuminanceForComponent(this.rgba.b),s=.2126*e+.7152*t+.0722*i;return Gl(s,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i}isDarkerThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t<i}lighten(e){return new V(new Vr(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new V(new Vr(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:i,b:s,a:r}=this.rgba;return new V(new Fe(t,i,s,r*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new V(new Fe(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return this._toString||(this._toString=V.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;const s=e.getRelativeLuminance(),r=t.getRelativeLuminance();return i=i*(r-s)/r,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;const s=e.getRelativeLuminance(),r=t.getRelativeLuminance();return i=i*(s-r)/s,e.darken(i)}}V.white=new V(new Fe(255,255,255,1));V.black=new V(new Fe(0,0,0,1));V.red=new V(new Fe(255,0,0,1));V.blue=new V(new Fe(0,0,255,1));V.cyan=new V(new Fe(0,255,255,1));V.lightgrey=new V(new Fe(211,211,211,1));V.transparent=new V(new Fe(0,0,0,0));(function(n){(function(e){(function(t){function i(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:n.Format.CSS.formatRGBA(f)}t.formatRGB=i;function s(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}t.formatRGBA=s;function r(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:n.Format.CSS.formatHSLA(f)}t.formatHSL=r;function o(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(f){const g=f.toString(16);return g.length!==2?"0"+g:g}function l(f){return`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}`}t.formatHex=l;function c(f,g=!1){return g&&f.rgba.a===1?n.Format.CSS.formatHex(f):`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}${a(Math.round(f.rgba.a*255))}`}t.formatHexA=c;function h(f){return f.isOpaque()?n.Format.CSS.formatHex(f):n.Format.CSS.formatRGBA(f)}t.format=h;function u(f){const g=f.length;if(g===0||f.charCodeAt(0)!==35)return null;if(g===7){const p=16*d(f.charCodeAt(1))+d(f.charCodeAt(2)),_=16*d(f.charCodeAt(3))+d(f.charCodeAt(4)),v=16*d(f.charCodeAt(5))+d(f.charCodeAt(6));return new n(new Fe(p,_,v,1))}if(g===9){const p=16*d(f.charCodeAt(1))+d(f.charCodeAt(2)),_=16*d(f.charCodeAt(3))+d(f.charCodeAt(4)),v=16*d(f.charCodeAt(5))+d(f.charCodeAt(6)),b=16*d(f.charCodeAt(7))+d(f.charCodeAt(8));return new n(new Fe(p,_,v,b/255))}if(g===4){const p=d(f.charCodeAt(1)),_=d(f.charCodeAt(2)),v=d(f.charCodeAt(3));return new n(new Fe(16*p+p,16*_+_,16*v+v))}if(g===5){const p=d(f.charCodeAt(1)),_=d(f.charCodeAt(2)),v=d(f.charCodeAt(3)),b=d(f.charCodeAt(4));return new n(new Fe(16*p+p,16*_+_,16*v+v,(16*b+b)/255))}return null}t.parseHex=u;function d(f){switch(f){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(n.Format||(n.Format={}))})(V||(V={}));const V0=Xe("undoRedoService");class kW{constructor(e,t){this.resource=e,this.elements=t}}class Kf{constructor(){this.id=Kf._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}Kf._ID=0;Kf.None=new Kf;class Wo{constructor(){this.id=Wo._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}Wo._ID=0;Wo.None=new Wo;class YP{constructor(e,t,i){this.range=e,this.nestingLevel=t,this.isInvalid=i}}class $de{constructor(e,t,i,s){this.range=e,this.openingBracketRange=t,this.closingBracketRange=i,this.nestingLevel=s}}class Ude extends $de{constructor(e,t,i,s,r){super(e,t,i,s),this.minVisibleColumnIndentation=r}}class jde{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}}function qde(n,e,t,i){return n!==t?jt(t-n,i):jt(0,i-e)}const al=0;function Kde(n){return n===0}const ws=Math.pow(2,26);function jt(n,e){return n*ws+e}function Yl(n){const e=n,t=Math.floor(e/ws),i=e-t*ws;return new jde(t,i)}function Gde(n){return Math.floor(n/ws)}function Bi(n,e){return e<ws?n+e:n-n%ws+e}function Yde(n,e){const t=n,i=e;if(i-t<=0)return al;const r=Math.floor(t/ws),o=Math.floor(i/ws),a=i-o*ws;if(r===o){const l=t-r*ws;return jt(0,a-l)}else return jt(o-r,a)}function Vv(n,e){return n<e}function wh(n,e){return n<=e}function Rb(n,e){return n>=e}function Ob(n){return jt(n.lineNumber-1,n.column-1)}function hm(n,e){const t=n,i=Math.floor(t/ws),s=t-i*ws,r=e,o=Math.floor(r/ws),a=r-o*ws;return new I(i+1,s+1,o+1,a+1)}function Zde(n){const e=sa(n);return jt(e.length-1,e[e.length-1].length)}class ZP{constructor(e,t,i){this.startOffset=e,this.endOffset=t,this.newLength=i}}class Xde{constructor(e,t){this.documentLength=t,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(i=>D2.from(i))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],i=t?this.translateOldToCur(t.offsetObj):this.documentLength;return Yde(e,i)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?jt(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):jt(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=Yl(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?jt(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):jt(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],i=this.translateOldToCur(t.endOffsetAfterObj);if(wh(i,e)){this.nextEditIdx++;const s=Yl(i),r=Yl(this.translateOldToCur(t.endOffsetBeforeObj)),o=s.lineCount-r.lineCount;this.deltaOldToNewLineCount+=o;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=s.columnCount-r.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class D2{constructor(e,t,i){this.endOffsetBeforeObj=Yl(t),this.endOffsetAfterObj=Yl(Bi(e,i)),this.offsetObj=Yl(e)}static from(e){return new D2(e.startOffset,e.endOffset,e.newLength)}}class rt{static visibleColumnFromColumn(e,t,i){const s=e.length,r=t-1<s?t-1:s;let o=0,a=0;for(;a<r;){const l=Ra(e,r,a);if(a+=l>=65536?2:1,l===9)o=rt.nextRenderTabStop(o,i);else{let c=ud(l);for(;a<r;){const h=Ra(e,r,a),u=ud(h);if(Xp(c,u))break;a+=h>=65536?2:1,c=u}Kr(l)||Zp(l)?o=o+2:o=o+1}}return o}static visibleColumnsByColumns(e,t){const i=e.length;let s=new Array;s.push(-1);let r=0,o=0;for(;o<i;){const a=Ra(e,i,o);if(o+=a>=65536?2:1,s.push(r),a>=65536&&s.push(r),a===9)r=rt.nextRenderTabStop(r,t);else{let l=ud(a);for(;o<i;){const c=Ra(e,i,o),h=ud(c);if(Xp(l,h))break;o+=c>=65536?2:1,s.push(r),a>=65536&&s.push(r),l=h}Kr(a)||Zp(a)?r=r+2:r=r+1}}return s.push(r),s}static visibleColumnFromColumn2(e,t,i){return this.visibleColumnFromColumn(t.getLineContent(i.lineNumber),i.column,e.tabSize)}static columnFromVisibleColumn(e,t,i){if(t<=0)return 1;const s=e.length;let r=0,o=1,a=0;for(;a<s;){const l=Ra(e,s,a);a+=l>=65536?2:1;let c;if(l===9)c=rt.nextRenderTabStop(r,i);else{let u=ud(l);for(;a<s;){const d=Ra(e,s,a),f=ud(d);if(Xp(u,f))break;a+=d>=65536?2:1,u=f}Kr(l)||Zp(l)?c=r+2:c=r+1}const h=a+1;if(c>=t){const u=t-r;return c-t<u?h:o}r=c,o=h}return s+1}static columnFromVisibleColumn2(e,t,i,s){let r=this.columnFromVisibleColumn(t.getLineContent(i),s,e.tabSize),o=t.getLineMinColumn(i);if(r<o)return o;let a=t.getLineMaxColumn(i);return r>a?a:r}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}const Wv=new Array;class Jt{constructor(e,t){this.items=e,this.additionalItems=t}static create(e,t){if(e<=128&&t.length===0){let i=Jt.cache[e];return i||(i=new Jt(e,t),Jt.cache[e]=i),i}return new Jt(e,t)}static getEmpty(){return this.empty}add(e,t){const i=t.getKey(e);let s=i>>5;if(s===0){const o=1<<i|this.items;return o===this.items?this:Jt.create(o,this.additionalItems)}s--;const r=this.additionalItems.slice(0);for(;r.length<s;)r.push(0);return r[s]|=1<<(i&31),Jt.create(this.items,r)}merge(e){const t=this.items|e.items;if(this.additionalItems===Wv&&e.additionalItems===Wv)return t===this.items?this:t===e.items?e:Jt.create(t,Wv);const i=new Array;for(let s=0;s<Math.max(this.additionalItems.length,e.additionalItems.length);s++){const r=this.additionalItems[s]||0,o=e.additionalItems[s]||0;i.push(r|o)}return Jt.create(t,i)}intersects(e){if((this.items&e.items)!==0)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if((this.additionalItems[t]&e.additionalItems[t])!==0)return!0;return!1}}Jt.cache=new Array(129);Jt.empty=Jt.create(0,Wv);const XP={getKey(n){return n}};class Qde{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class L2{constructor(e){this._length=e}get length(){return this._length}}class p_ extends L2{constructor(e,t,i,s,r){super(e),this.openingBracket=t,this.child=i,this.closingBracket=s,this.missingOpeningBracketIds=r}static create(e,t,i){let s=e.length;return t&&(s=Bi(s,t.length)),i&&(s=Bi(s,i.length)),new p_(s,e,t,i,t?t.missingOpeningBracketIds:Jt.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=new Array;return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new p_(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(Bi(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class la extends L2{constructor(e,t,i){super(e),this.listHeight=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}static create23(e,t,i,s=!1){let r=e.length,o=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(r=Bi(r,t.length),o=o.merge(t.missingOpeningBracketIds),i){if(e.listHeight!==i.listHeight)throw new Error("Invalid list heights");r=Bi(r,i.length),o=o.merge(i.missingOpeningBracketIds)}return s?new Jde(r,e.listHeight+1,e,t,i,o):new m_(r,e.listHeight+1,e,t,i,o)}static getEmpty(){return new efe(al,0,[],Jt.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(e-1,i),i}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(0,i),i}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;let t=this,i;for(;t.kind===4&&(i=t.childrenLength)>0;)t=t.getChild(i-1);return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let s=1;s<e;s++){const r=this.getChild(s);t=Bi(t,r.length),i=i.merge(r.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,s=e;for(let r=0;r<this.childrenLength;r++){const o=this.getChild(r);o&&(i=Math.min(i,o.computeMinIndentation(s,t)),s=Bi(s,o.length))}return this.cachedMinIndentation=i,i}}class m_ extends la{constructor(e,t,i,s,r,o){super(e,t,o),this._item1=i,this._item2=s,this._item3=r}get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new m_(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class Jde extends m_{toMutable(){return new m_(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class SC extends la{constructor(e,t,i,s){super(e,t,s),this._children=i}get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new SC(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class efe extends SC{toMutable(){return new SC(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const tfe=[];class k2 extends L2{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return tfe}deepClone(){return this}}class Id extends k2{get kind(){return 0}get missingOpeningBracketIds(){return Jt.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const i=Yl(e),s=(i.columnCount===0?i.lineCount:i.lineCount+1)+1,r=Gde(Bi(e,this.length))+1;let o=Number.MAX_SAFE_INTEGER;for(let a=s;a<=r;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const h=rt.visibleColumnFromColumn(c,l,t.getOptions().tabSize);o=Math.min(o,h)}return o}}class Vh extends k2{constructor(e){super(e)}static create(e){const t=e,i=Vh.cacheByLength.get(t);if(i)return i;const s=new Vh(e);return Vh.cacheByLength.set(t,s),s}get kind(){return 1}get missingOpeningBracketIds(){return Jt.getEmpty()}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}Vh.cacheByLength=new Map;class ife extends k2{constructor(e,t){super(t),this.missingOpeningBracketIds=e}get kind(){return 3}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class Pl{constructor(e,t,i,s,r){this.length=e,this.kind=t,this.bracketId=i,this.bracketIds=s,this.astNode=r}}class nfe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new sfe(this.textModel,this.bracketTokens),this._offset=al,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return jt(this.textBufferLineCount,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=Bi(this._offset,e);const t=Yl(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Bi(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class sfe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const r=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=r.length,r}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let i=0;for(;;){const r=this.lineTokens,o=r.getCount();let a=null;if(this.lineTokenOffset<o){const l=r.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<o&&l===r.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=Rs.getTokenType(l)===0,h=r.getEndOffset(this.lineTokenOffset);if(c&&h!==this.lineCharOffset){const u=r.getLanguageId(this.lineTokenOffset),d=this.line.substring(this.lineCharOffset,h),f=this.bracketTokens.getSingleLanguageBracketTokens(u),g=f.regExpGlobal;if(g){g.lastIndex=0;const p=g.exec(d);p&&(a=f.getToken(p[0]),a&&(this.lineCharOffset+=p.index))}}if(i+=h-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=h}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,i+=33,i>1e3))break;if(i>1500)break}const s=qde(e,t,this.lineIdx,this.lineCharOffset);return new Pl(s,0,-1,Jt.getEmpty(),new Id(s))}}class rfe{constructor(e,t){this.text=e,this._offset=al,this.idx=0;const s=t.getRegExpStr()?new RegExp(t.getRegExpStr()+`|
`,"g"):null,r=[];let o,a=0,l=0,c=0,h=0;const u=new Array;for(let g=0;g<60;g++)u.push(new Pl(jt(0,g),0,-1,Jt.getEmpty(),new Id(jt(0,g))));const d=new Array;for(let g=0;g<60;g++)d.push(new Pl(jt(1,g),0,-1,Jt.getEmpty(),new Id(jt(1,g))));if(s)for(s.lastIndex=0;(o=s.exec(e))!==null;){const g=o.index,p=o[0];if(p===`
`)a++,l=g+1;else{if(c!==g){let _;if(h===a){const v=g-c;if(v<u.length)_=u[v];else{const b=jt(0,v);_=new Pl(b,0,-1,Jt.getEmpty(),new Id(b))}}else{const v=a-h,b=g-l;if(v===1&&b<d.length)_=d[b];else{const w=jt(v,b);_=new Pl(w,0,-1,Jt.getEmpty(),new Id(w))}}r.push(_)}r.push(t.getToken(p)),c=g+p.length,h=a}}const f=e.length;if(c!==f){const g=h===a?jt(0,f-c):jt(a-h,f-l);r.push(new Pl(g,0,-1,Jt.getEmpty(),new Id(g)))}this.length=jt(a,f-l),this.tokens=r}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new Roe}}class xC{constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}static createFromLanguage(e,t){function i(l,c){return t.getKey(`${l}:::${c}`)}const s=e.characterPair.getColorizedBrackets(),r=new Map,o=new Set;for(const[l,c]of s){o.add(l);let h=r.get(c);const u=i(e.languageId,l);h||(h={openingBrackets:Jt.getEmpty(),first:u},r.set(c,h)),h.openingBrackets=h.openingBrackets.add(u,XP)}const a=new Map;for(const[l,c]of r){const h=jt(0,l.length);a.set(l,new Pl(h,2,c.first,c.openingBrackets,Vh.create(h)))}for(const l of o){const c=jt(0,l.length),h=i(e.languageId,l);a.set(l,new Pl(c,1,h,Jt.getEmpty().add(h,XP),Vh.create(c)))}return new xC(a)}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>ofe(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"g"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e)}get isEmpty(){return this.map.size===0}}function ofe(n){const e=so(n);return/^[\w ]+$/.test(n)?`\\b${e}\\b`:e}class afe{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){const t=this.languageIdToBracketTokens.get(e);if(!t)return!1;const i=xC.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider).getRegExpStr();return t.getRegExpStr()!==i}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=xC.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function lfe(n){if(n.length===0)return null;if(n.length===1)return n[0];let e=0;function t(){if(e>=n.length)return null;const o=e,a=n[o].listHeight;for(e++;e<n.length&&n[e].listHeight===a;)e++;return e-o>=2?EW(o===0&&e===n.length?n:n.slice(o,e),!1):n[o]}let i=t(),s=t();if(!s)return i;for(let o=t();o;o=t())QP(i,s)<=QP(s,o)?(i=Gx(i,s),s=o):s=Gx(s,o);return Gx(i,s)}function EW(n,e=!1){if(n.length===0)return null;if(n.length===1)return n[0];let t=n.length;for(;t>3;){const i=t>>1;for(let s=0;s<i;s++){const r=s<<1;n[s]=la.create23(n[r],n[r+1],r+3===t?n[r+2]:null,e)}t=i}return la.create23(n[0],n[1],t>=3?n[2]:null,e)}function QP(n,e){return Math.abs(n.listHeight-e.listHeight)}function Gx(n,e){return n.listHeight===e.listHeight?la.create23(n,e,null,!1):n.listHeight>e.listHeight?cfe(n,e):hfe(e,n)}function cfe(n,e){n=n.toMutable();let t=n;const i=new Array;let s;for(;;){if(e.listHeight===t.listHeight){s=e;break}if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeLastElementMutable()}for(let r=i.length-1;r>=0;r--){const o=i[r];s?o.childrenLength>=3?s=la.create23(o.unappendChild(),s,null,!1):(o.appendChildOfSameHeight(s),s=void 0):o.handleChildrenChanged()}return s?la.create23(n,s,null,!1):n}function hfe(n,e){n=n.toMutable();let t=n;const i=new Array;for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeFirstElementMutable()}let s=e;for(let r=i.length-1;r>=0;r--){const o=i[r];s?o.childrenLength>=3?s=la.create23(s,o.unprependChild(),null,!1):(o.prependChildOfSameHeight(s),s=void 0):o.handleChildrenChanged()}return s?la.create23(s,n,null,!1):n}class ufe{constructor(e){this.lastOffset=al,this.nextNodes=[e],this.offsets=[al],this.idxs=[]}readLongestNodeAt(e,t){if(Vv(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const i=up(this.nextNodes);if(!i)return;const s=up(this.offsets);if(Vv(e,s))return;if(Vv(s,e))if(Bi(s,i.length)<=e)this.nextNodeAfterCurrent();else{const r=Yx(i);r!==-1?(this.nextNodes.push(i.getChild(r)),this.offsets.push(s),this.idxs.push(r)):this.nextNodeAfterCurrent()}else{if(t(i))return this.nextNodeAfterCurrent(),i;{const r=Yx(i);if(r===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(i.getChild(r)),this.offsets.push(s),this.idxs.push(r)}}}}nextNodeAfterCurrent(){for(;;){const e=up(this.offsets),t=up(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const i=up(this.nextNodes),s=Yx(i,this.idxs[this.idxs.length-1]);if(s!==-1){this.nextNodes.push(i.getChild(s)),this.offsets.push(Bi(e,t.length)),this.idxs[this.idxs.length-1]=s;break}else this.idxs.pop()}}}function Yx(n,e=-1){for(;;){if(e++,e>=n.childrenLength)return-1;if(n.getChild(e))return e}}function up(n){return n.length>0?n[n.length-1]:void 0}function JP(n,e,t,i){return new dfe(n,e,t,i).parseDocument()}class dfe{constructor(e,t,i,s){if(this.tokenizer=e,this.createImmutableLists=s,this._itemsConstructed=0,this._itemsFromCache=0,i&&s)throw new Error("Not supported");this.oldNodeReader=i?new ufe(i):void 0,this.positionMapper=new Xde(t,e.length)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Jt.getEmpty());return e||(e=la.getEmpty()),e}parseList(e){const t=new Array;for(;;){const s=this.tokenizer.peek();if(!s||s.kind===2&&s.bracketIds.intersects(e))break;const r=this.parseChild(e);r.kind===4&&r.childrenLength===0||t.push(r)}return this.oldNodeReader?lfe(t):EW(t,this.createImmutableLists)}parseChild(e){if(this.oldNodeReader){const i=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!Kde(i)){const s=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),r=>Vv(r.length,i)?r.canBeReused(e):!1);if(s)return this._itemsFromCache++,this.tokenizer.skip(s.length),s}}this._itemsConstructed++;const t=this.tokenizer.read();switch(t.kind){case 2:return new ife(t.bracketIds,t.length);case 0:return t.astNode;case 1:const i=e.merge(t.bracketIds),s=this.parseList(i),r=this.tokenizer.peek();return r&&r.kind===2&&(r.bracketId===t.bracketId||r.bracketIds.intersects(t.bracketIds))?(this.tokenizer.read(),p_.create(t.astNode,s,r.astNode)):p_.create(t.astNode,s,null);default:throw new Error("unexpected")}}}class ffe extends q{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.cache=this._register(new Ls),this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(e.onDidChangeOptions(i=>{this.cache.clear(),this.updateCache()})),this._register(e.onDidChangeLanguage(i=>{this.cache.clear(),this.updateCache()})),this._register(this.languageConfigurationService.onDidChange(i=>{var s;(!i.languageId||((s=this.cache.value)===null||s===void 0?void 0:s.object.didLanguageChange(i.languageId)))&&(this.cache.clear(),this.updateCache())}))}get isDocumentSupported(){return this.textModel.getValueLength()<=5e6}updateCache(){if(this.bracketsRequested&&this.isDocumentSupported){if(!this.cache.value){const e=new ee;this.cache.value=gfe(e.add(new pfe(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.cache.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.cache.clear(),this.onDidChangeEmitter.fire()}handleContentChanged(e){var t;(t=this.cache.value)===null||t===void 0||t.object.handleContentChanged(e)}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateCache(),((t=this.cache.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||[]}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateCache(),((t=this.cache.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||[]}getBracketsInRange(e){var t;return this.bracketsRequested=!0,this.updateCache(),((t=this.cache.value)===null||t===void 0?void 0:t.object.getBracketsInRange(e))||[]}}function gfe(n,e){return{object:n,dispose:()=>e==null?void 0:e.dispose()}}class pfe extends q{constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new R,this.denseKeyProvider=new Qde,this.brackets=new afe(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this._register(e.onBackgroundTokenizationStateChanged(()=>{if(e.backgroundTokenizationState===2){const i=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,i||this.didChangeEmitter.fire()}})),this._register(e.onDidChangeTokens(({ranges:i})=>{const s=i.map(r=>new ZP(jt(r.fromLineNumber-1,0),jt(r.toLineNumber,0),jt(r.toLineNumber-r.fromLineNumber+1,0)));this.astWithTokens=this.parseDocumentFromTextBuffer(s,this.astWithTokens,!1),this.initialAstWithoutTokens||this.didChangeEmitter.fire()})),e.backgroundTokenizationState===0){const i=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),s=new rfe(this.textModel.getValue(),i);this.initialAstWithoutTokens=JP(s,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else e.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):e.backgroundTokenizationState===1&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens)}didLanguageChange(e){return this.brackets.didLanguageChange(e)}handleContentChanged(e){const t=e.changes.map(i=>{const s=I.lift(i.range);return new ZP(Ob(s.getStartPosition()),Ob(s.getEndPosition()),Zde(i.text))}).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(t,this.initialAstWithoutTokens,!1))}parseDocumentFromTextBuffer(e,t,i){const s=t,r=new nfe(this.textModel,this.brackets);return JP(r,e,s,i)}getBracketsInRange(e){const t=jt(e.startLineNumber-1,e.startColumn-1),i=jt(e.endLineNumber-1,e.endColumn-1),s=new Array,r=this.initialAstWithoutTokens||this.astWithTokens;return Rp(r,al,r.length,t,i,s),s}getBracketPairsInRange(e,t){const i=new Array,s=Ob(e.getStartPosition()),r=Ob(e.getEndPosition()),o=this.initialAstWithoutTokens||this.astWithTokens,a=new mfe(i,t,this.textModel);return IW(o,al,o.length,s,r,a),i}}function Rp(n,e,t,i,s,r,o=0){if(n.kind===1){const a=hm(e,t);r.push(new YP(a,o-1,!1))}else if(n.kind===3){const a=hm(e,t);r.push(new YP(a,o-1,!0))}else if(n.kind===4)for(const a of n.children)t=Bi(e,a.length),wh(e,s)&&Rb(t,i)&&Rp(a,e,t,i,s,r,o),e=t;else if(n.kind===2){o++;{const a=n.openingBracket;t=Bi(e,a.length),wh(e,s)&&Rb(t,i)&&Rp(a,e,t,i,s,r,o),e=t}if(n.child){const a=n.child;t=Bi(e,a.length),wh(e,s)&&Rb(t,i)&&Rp(a,e,t,i,s,r,o),e=t}if(n.closingBracket){const a=n.closingBracket;t=Bi(e,a.length),wh(e,s)&&Rb(t,i)&&Rp(a,e,t,i,s,r,o),e=t}}}class mfe{constructor(e,t,i){this.result=e,this.includeMinIndentation=t,this.textModel=i}}function IW(n,e,t,i,s,r,o=0){var a;if(n.kind===2){const c=Bi(e,n.openingBracket.length);let h=-1;r.includeMinIndentation&&(h=n.computeMinIndentation(e,r.textModel)),r.result.push(new Ude(hm(e,t),hm(e,c),n.closingBracket?hm(Bi(c,((a=n.child)===null||a===void 0?void 0:a.length)||al),t):void 0,o,h)),o++}let l=e;for(const c of n.children){const h=l;l=Bi(l,c.length),wh(h,s)&&wh(i,l)&&IW(c,h,l,i,s,r,o)}}const TW={ColorContribution:"base.contributions.colors"};class _fe{constructor(){this._onDidChangeSchema=new R,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,i,s=!1,r){let o={id:e,description:i,defaults:t,needsTransparency:s,deprecationMessage:r};this.colorsById[e]=o;let a={type:"string",description:i,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return r&&(a.deprecationMessage=r),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(i),this._onDidChangeSchema.fire(),e}resolveDefaultColor(e,t){const i=this.colorsById[e];if(i&&i.defaults){const s=i.defaults[t.type];return Ia(s,t)}}getColorSchema(){return this.colorSchema}toString(){let e=(t,i)=>{let s=t.indexOf(".")===-1?0:1,r=i.indexOf(".")===-1?0:1;return s!==r?s-r:t.localeCompare(i)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const P1=new _fe;$i.add(TW.ColorContribution,P1);function M(n,e,t,i,s){return P1.registerColor(n,e,t,i,s)}const ge=M("foreground",{dark:"#CCCCCC",light:"#616161",hc:"#FFFFFF"},m("foreground","Overall foreground color. This color is only used if not overridden by a component.")),bfe=M("errorForeground",{dark:"#F48771",light:"#A1260D",hc:"#F48771"},m("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),Zx=M("icon.foreground",{dark:"#C5C5C5",light:"#424242",hc:"#FFFFFF"},m("iconForeground","The default color for icons in the workbench.")),mc=M("focusBorder",{dark:"#007FD4",light:"#0090F1",hc:"#F38518"},m("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),ni=M("contrastBorder",{light:null,dark:null,hc:"#6FC3DF"},m("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Bn=M("contrastActiveBorder",{light:null,dark:null,hc:mc},m("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),B1=M("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},m("textLinkForeground","Foreground color for links in text.")),V1=M("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},m("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),NW=M("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hc:V.black},m("textCodeBlockBackground","Background color for code blocks in text.")),Gf=M("widget.shadow",{dark:vt(V.black,.36),light:vt(V.black,.16),hc:null},m("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),AW=M("input.background",{dark:"#3C3C3C",light:V.white,hc:V.black},m("inputBoxBackground","Input box background.")),MW=M("input.foreground",{dark:ge,light:ge,hc:ge},m("inputBoxForeground","Input box foreground.")),RW=M("input.border",{dark:null,light:null,hc:ni},m("inputBoxBorder","Input box border.")),JE=M("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hc:ni},m("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),eI=M("inputOption.activeBackground",{dark:vt(mc,.4),light:vt(mc,.2),hc:V.transparent},m("inputOption.activeBackground","Background color of activated options in input fields.")),tI=M("inputOption.activeForeground",{dark:V.white,light:V.black,hc:null},m("inputOption.activeForeground","Foreground color of activated options in input fields.")),E2=M("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hc:V.black},m("inputValidationInfoBackground","Input validation background color for information severity.")),I2=M("inputValidation.infoForeground",{dark:null,light:null,hc:null},m("inputValidationInfoForeground","Input validation foreground color for information severity.")),T2=M("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hc:ni},m("inputValidationInfoBorder","Input validation border color for information severity.")),OW=M("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hc:V.black},m("inputValidationWarningBackground","Input validation background color for warning severity.")),FW=M("inputValidation.warningForeground",{dark:null,light:null,hc:null},m("inputValidationWarningForeground","Input validation foreground color for warning severity.")),PW=M("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hc:ni},m("inputValidationWarningBorder","Input validation border color for warning severity.")),BW=M("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hc:V.black},m("inputValidationErrorBackground","Input validation background color for error severity.")),VW=M("inputValidation.errorForeground",{dark:null,light:null,hc:null},m("inputValidationErrorForeground","Input validation foreground color for error severity.")),WW=M("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hc:ni},m("inputValidationErrorBorder","Input validation border color for error severity.")),Xx=M("dropdown.background",{dark:"#3C3C3C",light:V.white,hc:V.black},m("dropdownBackground","Dropdown background.")),e4=M("dropdown.foreground",{dark:"#F0F0F0",light:null,hc:V.white},m("dropdownForeground","Dropdown foreground.")),vfe=M("button.foreground",{dark:V.white,light:V.white,hc:V.white},m("buttonForeground","Button foreground color.")),iI=M("button.background",{dark:"#0E639C",light:"#007ACC",hc:null},m("buttonBackground","Button background color.")),wfe=M("button.hoverBackground",{dark:KW(iI,.2),light:qW(iI,.2),hc:null},m("buttonHoverBackground","Button background color when hovering.")),um=M("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hc:V.black},m("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),dm=M("badge.foreground",{dark:V.white,light:"#333",hc:V.white},m("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),W0=M("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hc:null},m("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),fm=M("scrollbarSlider.background",{dark:V.fromHex("#797979").transparent(.4),light:V.fromHex("#646464").transparent(.4),hc:vt(ni,.6)},m("scrollbarSliderBackground","Scrollbar slider background color.")),gm=M("scrollbarSlider.hoverBackground",{dark:V.fromHex("#646464").transparent(.7),light:V.fromHex("#646464").transparent(.7),hc:vt(ni,.8)},m("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),pm=M("scrollbarSlider.activeBackground",{dark:V.fromHex("#BFBFBF").transparent(.4),light:V.fromHex("#000000").transparent(.6),hc:ni},m("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),Cfe=M("progressBar.background",{dark:V.fromHex("#0E70C0"),light:V.fromHex("#0E70C0"),hc:ni},m("progressBarBackground","Background color of the progress bar that can show for long running operations.")),yfe=M("editorError.background",{dark:null,light:null,hc:null},m("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),mm=M("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hc:null},m("editorError.foreground","Foreground color of error squigglies in the editor.")),zW=M("editorError.border",{dark:null,light:null,hc:V.fromHex("#E47777").transparent(.8)},m("errorBorder","Border color of error boxes in the editor.")),Sfe=M("editorWarning.background",{dark:null,light:null,hc:null},m("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Qa=M("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hc:null},m("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),W1=M("editorWarning.border",{dark:null,light:null,hc:V.fromHex("#FFCC00").transparent(.8)},m("warningBorder","Border color of warning boxes in the editor.")),xfe=M("editorInfo.background",{dark:null,light:null,hc:null},m("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Qr=M("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hc:"#3794FF"},m("editorInfo.foreground","Foreground color of info squigglies in the editor.")),N2=M("editorInfo.border",{dark:null,light:null,hc:V.fromHex("#3794FF").transparent(.8)},m("infoBorder","Border color of info boxes in the editor.")),Dfe=M("editorHint.foreground",{dark:V.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hc:null},m("editorHint.foreground","Foreground color of hint squigglies in the editor.")),Lfe=M("editorHint.border",{dark:null,light:null,hc:V.fromHex("#eeeeee").transparent(.8)},m("hintBorder","Border color of hint boxes in the editor.")),zs=M("editor.background",{light:"#fffffe",dark:"#1E1E1E",hc:V.black},m("editorBackground","Editor background color.")),Zl=M("editor.foreground",{light:"#333333",dark:"#BBBBBB",hc:V.white},m("editorForeground","Editor default foreground color.")),yr=M("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hc:"#0C141F"},m("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),Xl=M("editorWidget.foreground",{dark:ge,light:ge,hc:ge},m("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),Wh=M("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hc:ni},m("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),kfe=M("editorWidget.resizeBorder",{light:null,dark:null,hc:null},m("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),t4=M("quickInput.background",{dark:yr,light:yr,hc:yr},m("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),Efe=M("quickInput.foreground",{dark:Xl,light:Xl,hc:Xl},m("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),Ife=M("quickInputTitle.background",{dark:new V(new Fe(255,255,255,.105)),light:new V(new Fe(0,0,0,.06)),hc:"#000000"},m("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),Tfe=M("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hc:V.white},m("pickerGroupForeground","Quick picker color for grouping labels.")),Nfe=M("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hc:V.white},m("pickerGroupBorder","Quick picker color for grouping borders.")),Afe=M("keybindingLabel.background",{dark:new V(new Fe(128,128,128,.17)),light:new V(new Fe(221,221,221,.4)),hc:V.transparent},m("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),Mfe=M("keybindingLabel.foreground",{dark:V.fromHex("#CCCCCC"),light:V.fromHex("#555555"),hc:V.white},m("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),Rfe=M("keybindingLabel.border",{dark:new V(new Fe(51,51,51,.6)),light:new V(new Fe(204,204,204,.4)),hc:new V(new Fe(111,195,223))},m("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),Ofe=M("keybindingLabel.bottomBorder",{dark:new V(new Fe(68,68,68,.6)),light:new V(new Fe(187,187,187,.4)),hc:new V(new Fe(111,195,223))},m("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),Ql=M("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hc:"#f3f518"},m("editorSelectionBackground","Color of the editor selection.")),Ffe=M("editor.selectionForeground",{light:null,dark:null,hc:"#000000"},m("editorSelectionForeground","Color of the selected text for high contrast.")),A2=M("editor.inactiveSelectionBackground",{light:vt(Ql,.5),dark:vt(Ql,.5),hc:vt(Ql,.5)},m("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),HW=M("editor.selectionHighlightBackground",{light:s4(Ql,zs,.3,.6),dark:s4(Ql,zs,.3,.6),hc:null},m("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);M("editor.selectionHighlightBorder",{light:null,dark:null,hc:Bn},m("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));const Pfe=M("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hc:null},m("editorFindMatch","Color of the current search match.")),nI=M("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hc:null},m("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),Bfe=M("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hc:null},m("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),Vfe=M("editor.findMatchBorder",{light:null,dark:null,hc:Bn},m("editorFindMatchBorder","Border color of the current search match.")),Wfe=M("editor.findMatchHighlightBorder",{light:null,dark:null,hc:Bn},m("findMatchHighlightBorder","Border color of the other search matches.")),zfe=M("editor.findRangeHighlightBorder",{dark:null,light:null,hc:vt(Bn,.4)},m("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),Hfe=M("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hc:"#ADD6FF26"},m("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),__=M("editorHoverWidget.background",{light:yr,dark:yr,hc:yr},m("hoverBackground","Background color of the editor hover.")),$fe=M("editorHoverWidget.foreground",{light:Xl,dark:Xl,hc:Xl},m("hoverForeground","Foreground color of the editor hover.")),Ufe=M("editorHoverWidget.border",{light:Wh,dark:Wh,hc:Wh},m("hoverBorder","Border color of the editor hover.")),jfe=M("editorHoverWidget.statusBarBackground",{dark:KW(__,.2),light:qW(__,.05),hc:yr},m("statusBarBackground","Background color of the editor hover status bar.")),qfe=M("editorLink.activeForeground",{dark:"#4E94CE",light:V.blue,hc:V.cyan},m("activeLinkForeground","Color of active links.")),gf=M("editorInlayHint.foreground",{dark:vt(dm,.8),light:vt(dm,.8),hc:dm},m("editorInlayHintForeground","Foreground color of inline hints")),pf=M("editorInlayHint.background",{dark:vt(um,.6),light:vt(um,.3),hc:um},m("editorInlayHintBackground","Background color of inline hints"));M("editorInlayHint.typeForeground",{dark:gf,light:gf,hc:gf},m("editorInlayHintForegroundTypes","Foreground color of inline hints for types"));M("editorInlayHint.typeBackground",{dark:pf,light:pf,hc:pf},m("editorInlayHintBackgroundTypes","Background color of inline hints for types"));M("editorInlayHint.parameterForeground",{dark:gf,light:gf,hc:gf},m("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters"));M("editorInlayHint.parameterBackground",{dark:pf,light:pf,hc:pf},m("editorInlayHintBackgroundParameter","Background color of inline hints for parameters"));const Kfe=M("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hc:"#FFCC00"},m("editorLightBulbForeground","The color used for the lightbulb actions icon.")),Gfe=M("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},m("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),sI=new V(new Fe(155,185,85,.2)),rI=new V(new Fe(255,0,0,.2)),$W=M("diffEditor.insertedTextBackground",{dark:sI,light:sI,hc:null},m("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),UW=M("diffEditor.removedTextBackground",{dark:rI,light:rI,hc:null},m("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),Yfe=M("diffEditor.insertedTextBorder",{dark:null,light:null,hc:"#33ff2eff"},m("diffEditorInsertedOutline","Outline color for the text that got inserted.")),Zfe=M("diffEditor.removedTextBorder",{dark:null,light:null,hc:"#FF008F"},m("diffEditorRemovedOutline","Outline color for text that got removed.")),Xfe=M("diffEditor.border",{dark:null,light:null,hc:ni},m("diffEditorBorder","Border color between the two text editors.")),Qfe=M("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hc:null},m("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),Jfe=M("list.focusBackground",{dark:null,light:null,hc:null},m("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),ege=M("list.focusForeground",{dark:null,light:null,hc:null},m("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),tge=M("list.focusOutline",{dark:mc,light:mc,hc:Bn},m("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Jl=M("list.activeSelectionBackground",{dark:"#094771",light:"#0060C0",hc:null},m("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),ec=M("list.activeSelectionForeground",{dark:V.white,light:V.white,hc:null},m("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),zv=M("list.activeSelectionIconForeground",{dark:null,light:null,hc:null},m("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),ige=M("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hc:null},m("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),nge=M("list.inactiveSelectionForeground",{dark:null,light:null,hc:null},m("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),sge=M("list.inactiveSelectionIconForeground",{dark:null,light:null,hc:null},m("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),rge=M("list.inactiveFocusBackground",{dark:null,light:null,hc:null},m("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),oge=M("list.inactiveFocusOutline",{dark:null,light:null,hc:null},m("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),age=M("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hc:null},m("listHoverBackground","List/Tree background when hovering over items using the mouse.")),lge=M("list.hoverForeground",{dark:null,light:null,hc:null},m("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),cge=M("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hc:null},m("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),mf=M("list.highlightForeground",{dark:"#18A3FF",light:"#0066BF",hc:mc},m("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),Qx=M("list.focusHighlightForeground",{dark:mf,light:Wge(Jl,mf,"#9DDDFF"),hc:mf},m("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.")),hge=M("listFilterWidget.background",{light:"#efc1ad",dark:"#653723",hc:V.black},m("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),uge=M("listFilterWidget.outline",{dark:V.transparent,light:V.transparent,hc:"#f38518"},m("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),dge=M("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hc:ni},m("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),fge=M("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hc:"#a9a9a9"},m("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),gge=M("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hc:null},m("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),i4=M("quickInput.list.focusBackground",{dark:null,light:null,hc:null},"",void 0,m("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),Hv=M("quickInputList.focusForeground",{dark:ec,light:ec,hc:ec},m("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),$v=M("quickInputList.focusIconForeground",{dark:zv,light:zv,hc:zv},m("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),Uv=M("quickInputList.focusBackground",{dark:b_(i4,Jl),light:b_(i4,Jl),hc:null},m("quickInput.listFocusBackground","Quick picker background color for the focused item.")),pge=M("menu.border",{dark:null,light:null,hc:ni},m("menuBorder","Border color of menus.")),mge=M("menu.foreground",{dark:e4,light:ge,hc:e4},m("menuForeground","Foreground color of menu items.")),_ge=M("menu.background",{dark:Xx,light:Xx,hc:Xx},m("menuBackground","Background color of menu items.")),bge=M("menu.selectionForeground",{dark:ec,light:ec,hc:ec},m("menuSelectionForeground","Foreground color of the selected menu item in menus.")),vge=M("menu.selectionBackground",{dark:Jl,light:Jl,hc:Jl},m("menuSelectionBackground","Background color of the selected menu item in menus.")),wge=M("menu.selectionBorder",{dark:null,light:null,hc:Bn},m("menuSelectionBorder","Border color of the selected menu item in menus.")),Cge=M("menu.separatorBackground",{dark:"#BBBBBB",light:"#888888",hc:ni},m("menuSeparatorBackground","Color of a separator menu item in menus.")),yge=M("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hc:null},m("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),Sge=M("editor.snippetTabstopHighlightBackground",{dark:new V(new Fe(124,124,124,.3)),light:new V(new Fe(10,50,100,.2)),hc:new V(new Fe(124,124,124,.3))},m("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),xge=M("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hc:null},m("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),Dge=M("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hc:null},m("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),Lge=M("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new V(new Fe(10,50,100,.5)),hc:"#525252"},m("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet.")),M2=M("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},m("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),kge=M("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},m("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),jW=M("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},m("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),Ege=M("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hc:"#ffffff"},m("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),n4=M("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hc:"#ffffff"},m("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),Ige=M("minimap.errorHighlight",{dark:new V(new Fe(255,18,18,.7)),light:new V(new Fe(255,18,18,.7)),hc:new V(new Fe(255,50,50,1))},m("minimapError","Minimap marker color for errors.")),Tge=M("minimap.warningHighlight",{dark:Qa,light:Qa,hc:W1},m("overviewRuleWarning","Minimap marker color for warnings.")),Nge=M("minimap.background",{dark:null,light:null,hc:null},m("minimapBackground","Minimap background color.")),Age=M("minimap.foregroundOpacity",{dark:V.fromHex("#000f"),light:V.fromHex("#000f"),hc:V.fromHex("#000f")},m("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),Mge=M("minimapSlider.background",{light:vt(fm,.5),dark:vt(fm,.5),hc:vt(fm,.5)},m("minimapSliderBackground","Minimap slider background color.")),Rge=M("minimapSlider.hoverBackground",{light:vt(gm,.5),dark:vt(gm,.5),hc:vt(gm,.5)},m("minimapSliderHoverBackground","Minimap slider background color when hovering.")),Oge=M("minimapSlider.activeBackground",{light:vt(pm,.5),dark:vt(pm,.5),hc:vt(pm,.5)},m("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),Fge=M("problemsErrorIcon.foreground",{dark:mm,light:mm,hc:mm},m("problemsErrorIconForeground","The color used for the problems error icon.")),Pge=M("problemsWarningIcon.foreground",{dark:Qa,light:Qa,hc:Qa},m("problemsWarningIconForeground","The color used for the problems warning icon.")),Bge=M("problemsInfoIcon.foreground",{dark:Qr,light:Qr,hc:Qr},m("problemsInfoIconForeground","The color used for the problems info icon."));function Vge(n,e){var t,i,s;switch(n.op){case 0:return(t=Ia(n.value,e))===null||t===void 0?void 0:t.darken(n.factor);case 1:return(i=Ia(n.value,e))===null||i===void 0?void 0:i.lighten(n.factor);case 2:return(s=Ia(n.value,e))===null||s===void 0?void 0:s.transparent(n.factor);case 3:for(const a of n.values){const l=Ia(a,e);if(l)return l}return;case 5:return Ia(e.defines(n.if)?n.then:n.else,e);case 4:const r=Ia(n.value,e);if(!r)return;const o=Ia(n.background,e);return o?r.isDarkerThan(o)?V.getLighterColor(r,o,n.factor).transparent(n.transparency):V.getDarkerColor(r,o,n.factor).transparent(n.transparency):r.transparent(n.factor*n.transparency);default:throw yle()}}function qW(n,e){return{op:0,value:n,factor:e}}function KW(n,e){return{op:1,value:n,factor:e}}function vt(n,e){return{op:2,value:n,factor:e}}function b_(...n){return{op:3,values:n}}function Wge(n,e,t){return{op:5,if:n,then:e,else:t}}function s4(n,e,t,i){return{op:4,value:n,background:e,factor:t,transparency:i}}function Ia(n,e){if(n!==null){if(typeof n=="string")return n[0]==="#"?V.fromHex(n):e.getColor(n);if(n instanceof V)return n;if(typeof n=="object")return Vge(n,e)}}const GW="vscode://schemas/workbench-colors";let YW=$i.as(b1.JSONContribution);YW.registerSchema(GW,P1.getColorSchema());const r4=new Wt(()=>YW.notifySchemaChanged(GW),200);P1.onDidChangeSchema(()=>{r4.isScheduled()||r4.schedule()});const zge=M("editor.lineHighlightBackground",{dark:null,light:null,hc:null},m("lineHighlight","Background color for the highlight of line at the cursor position.")),o4=M("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hc:"#f38518"},m("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),Hge=M("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hc:null},m("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),$ge=M("editor.rangeHighlightBorder",{dark:null,light:null,hc:Bn},m("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),Uge=M("editor.symbolHighlightBackground",{dark:nI,light:nI,hc:null},m("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),jge=M("editor.symbolHighlightBorder",{dark:null,light:null,hc:Bn},m("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),ZW=M("editorCursor.foreground",{dark:"#AEAFAD",light:V.black,hc:V.white},m("caret","Color of the editor cursor.")),qge=M("editorCursor.background",null,m("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),zh=M("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hc:"#e3e4e229"},m("editorWhitespaces","Color of whitespace characters in the editor.")),z1=M("editorIndentGuide.background",{dark:zh,light:zh,hc:zh},m("editorIndentGuides","Color of the editor indentation guides.")),H1=M("editorIndentGuide.activeBackground",{dark:zh,light:zh,hc:zh},m("editorActiveIndentGuide","Color of the active editor indentation guides.")),XW=M("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hc:V.white},m("editorLineNumbers","Color of editor line numbers.")),Jx=M("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hc:Bn},m("editorActiveLineNumber","Color of editor active line number"),!1,m("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),Kge=M("editorLineNumber.activeForeground",{dark:Jx,light:Jx,hc:Jx},m("editorActiveLineNumber","Color of editor active line number")),Gge=M("editorRuler.foreground",{dark:"#5A5A5A",light:V.lightgrey,hc:V.white},m("editorRuler","Color of the editor rulers."));M("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hc:"#999999"},m("editorCodeLensForeground","Foreground color of editor CodeLens"));const Yge=M("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hc:"#0064001a"},m("editorBracketMatchBackground","Background color behind matching brackets")),Zge=M("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hc:ni},m("editorBracketMatchBorder","Color for matching brackets boxes")),Xge=M("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hc:"#7f7f7f4d"},m("editorOverviewRulerBorder","Color of the overview ruler border.")),Qge=M("editorOverviewRuler.background",null,m("editorOverviewRulerBackground","Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.")),Jge=M("editorGutter.background",{dark:zs,light:zs,hc:zs},m("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),epe=M("editorUnnecessaryCode.border",{dark:null,light:null,hc:V.fromHex("#fff").transparent(.8)},m("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),tpe=M("editorUnnecessaryCode.opacity",{dark:V.fromHex("#000a"),light:V.fromHex("#0007"),hc:null},m("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),QW=M("editorGhostText.border",{dark:null,light:null,hc:V.fromHex("#fff").transparent(.8)},m("editorGhostTextBorder","Border color of ghost text in the editor.")),JW=M("editorGhostText.foreground",{dark:V.fromHex("#ffffff56"),light:V.fromHex("#0007"),hc:null},m("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),eD=new V(new Fe(0,122,204,.6));M("editorOverviewRuler.rangeHighlightForeground",{dark:eD,light:eD,hc:eD},m("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const ipe=M("editorOverviewRuler.errorForeground",{dark:new V(new Fe(255,18,18,.7)),light:new V(new Fe(255,18,18,.7)),hc:new V(new Fe(255,50,50,1))},m("overviewRuleError","Overview ruler marker color for errors.")),npe=M("editorOverviewRuler.warningForeground",{dark:Qa,light:Qa,hc:W1},m("overviewRuleWarning","Overview ruler marker color for warnings.")),spe=M("editorOverviewRuler.infoForeground",{dark:Qr,light:Qr,hc:N2},m("overviewRuleInfo","Overview ruler marker color for infos.")),ez=M("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hc:"#FFD700"},m("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),tz=M("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hc:"#DA70D6"},m("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),iz=M("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hc:"#87CEFA"},m("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),nz=M("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},m("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),sz=M("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},m("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),rz=M("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},m("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),rpe=M("editorBracketHighlight.unexpectedBracket.foreground",{dark:new V(new Fe(255,18,18,.8)),light:new V(new Fe(255,18,18,.8)),hc:new V(new Fe(255,50,50,1))},m("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),ope=M("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},m("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),ape=M("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},m("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),lpe=M("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},m("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),cpe=M("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},m("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),hpe=M("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},m("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),upe=M("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},m("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),dpe=M("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},m("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),fpe=M("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},m("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),gpe=M("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},m("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),ppe=M("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},m("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),mpe=M("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},m("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),_pe=M("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},m("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));kt((n,e)=>{const t=n.getColor(zs);t&&e.addRule(`.monaco-editor, .monaco-editor-background, .monaco-editor .inputarea.ime-input { background-color: ${t}; }`);const i=n.getColor(Zl);i&&e.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${i}; }`);const s=n.getColor(Jge);s&&e.addRule(`.monaco-editor .margin { background-color: ${s}; }`);const r=n.getColor(Hge);r&&e.addRule(`.monaco-editor .rangeHighlight { background-color: ${r}; }`);const o=n.getColor($ge);o&&e.addRule(`.monaco-editor .rangeHighlight { border: 1px ${n.type==="hc"?"dotted":"solid"} ${o}; }`);const a=n.getColor(Uge);a&&e.addRule(`.monaco-editor .symbolHighlight { background-color: ${a}; }`);const l=n.getColor(jge);l&&e.addRule(`.monaco-editor .symbolHighlight { border: 1px ${n.type==="hc"?"dotted":"solid"} ${l}; }`);const c=n.getColor(zh);c&&(e.addRule(`.monaco-editor .mtkw { color: ${c} !important; }`),e.addRule(`.monaco-editor .mtkz { color: ${c} !important; }`))});class bpe extends q{constructor(e){super(),this.textModel=e,this.colorProvider=new oz,this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.onDidChangeOptions(t=>{this.colorizationOptions=e.getOptions().bracketPairColorizationOptions})),this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}getDecorationsInRange(e,t,i){if(t===void 0)return[];if(!this.colorizationOptions.enabled)return[];const s=new Array,r=this.textModel.bracketPairs.getBracketsInRange(e);for(const o of r)s.push({id:`bracket${o.range.toString()}-${o.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(o)},ownerId:0,range:o.range});return s}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new I(1,1,this.textModel.getLineCount(),1),e,t):[]}}class oz{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}kt((n,e)=>{const t=[ez,tz,iz,nz,sz,rz],i=new oz;e.addRule(`.monaco-editor .${i.unexpectedClosingBracketClassName} { color: ${n.getColor(rpe)}; }`);let s=t.map(r=>n.getColor(r)).filter(r=>!!r).filter(r=>!r.isTransparent());for(let r=0;r<30;r++){const o=s[r%s.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(r)} { color: ${o}; }`)}});var vpe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},tD=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};function wpe(){return new Ode}function Cpe(n){const e=wpe();return e.acceptChunk(n),e.finish()}function a4(n,e){return(typeof n=="string"?Cpe(n):n).create(e)}let Fb=0;const ype=999,Spe=1e4;class xpe{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,i=0;do{let s=this._source.read();if(s===null)return this._eos=!0,t===0?null:e.join("");if(s.length>0&&(e[t++]=s,i+=s.length),i>=64*1024)return e.join("")}while(!0)}}const dp=()=>{throw new Error("Invalid change accessor")};class Pa{constructor(){this._searchCanceledBrand=void 0}}Pa.INSTANCE=new Pa;function Pb(n){return n instanceof Pa?null:n}let js=class Eo extends q{constructor(e,t,i,s=null,r,o,a){super(),this._undoRedoService=r,this._modeService=o,this._languageConfigurationService=a,this._onWillDispose=this._register(new R),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new Epe(d=>this.handleBeforeFireDecorationsChangedEvent(d))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeLanguage=this._register(new R),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new R),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new R),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidChangeOptions=this._register(new R),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new R),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeContentOrInjectedText=this._register(new R),this.onDidChangeContentOrInjectedText=this._onDidChangeContentOrInjectedText.event,this._eventEmitter=this._register(new Ipe),this._backgroundTokenizationState=0,this._onBackgroundTokenizationStateChanged=this._register(new R),this.onBackgroundTokenizationStateChanged=this._onBackgroundTokenizationStateChanged.event,this._register(this._eventEmitter.fastEvent(d=>{this._onDidChangeContentOrInjectedText.fire(d.rawContentChangedEvent)})),Fb++,this.id="$model"+Fb,this.isForSimpleWidget=t.isForSimpleWidget,typeof s=="undefined"||s===null?this._associatedResource=xe.parse("inmemory://model/"+Fb):this._associatedResource=s,this._attachedEditorCount=0;const{textBuffer:l,disposable:c}=a4(e,t.defaultEOL);this._buffer=l,this._bufferDisposable=c,this._options=Eo.resolveOptions(this._buffer,t);const h=this._buffer.getLineCount(),u=this._buffer.getValueLengthInRange(new I(1,1,h,this._buffer.getLineLength(h)+1),0);t.largeFileOptimizations?this._isTooLargeForTokenization=u>Eo.LARGE_FILE_SIZE_THRESHOLD||h>Eo.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=u>Eo.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this._isDisposing=!1,this._languageId=i||dc,this._languageRegistryListener=this._languageConfigurationService.onDidChange(d=>{d.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}),this._instanceId=tV(Fb),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new l4,this._commandManager=new v2(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._tokens=new Ts(this._modeService.languageIdCodec),this._tokens2=new x2(this._modeService.languageIdCodec),this._tokenization=new zde(this,this._modeService.languageIdCodec),this._bracketPairColorizer=this._register(new ffe(this,this._languageConfigurationService)),this._decorationProvider=this._register(new bpe(this)),this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))}static resolveOptions(e,t){if(t.detectIndentation){const i=BP(e,t.tabSize,t.insertSpaces);return new Rv({tabSize:i.tabSize,indentSize:i.tabSize,insertSpaces:i.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new Rv({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}onDidChangeContentFast(e){return this._eventEmitter.fastEvent(t=>e(t.contentChangedEvent))}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}get bracketPairs(){return this._bracketPairColorizer}get backgroundTokenizationState(){return this._backgroundTokenizationState}handleTokenizationProgress(e){if(this._backgroundTokenizationState===2)return;const t=e?2:1;this._backgroundTokenizationState!==t&&(this._backgroundTokenizationState=t,this._onBackgroundTokenizationStateChanged.fire())}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this._isDisposing=!1;const e=new ff([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this._bracketPairColorizer.handleContentChanged(t),!this._isDisposing&&this._eventEmitter.fire(new yC(e,t))}setValue(e){if(this._assertNotDisposed(),e===null)return;const{textBuffer:t,disposable:i}=a4(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,i)}_createContentChanged2(e,t,i,s,r,o,a){return{changes:[{range:e,rangeOffset:t,rangeLength:i,text:s}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:r,isRedoing:o,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const i=this.getFullModelRange(),s=this.getValueLengthInRange(i),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._tokens.flush(),this._tokens2.flush(),this._decorations=Object.create(null),this._decorationsTree=new l4,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Bh([new Fde],this._versionId,!1,!1),this._createContentChanged2(new I(1,1,r,o),0,s,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const i=this.getFullModelRange(),s=this.getValueLengthInRange(i),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Bh([new Vde],this._versionId,!1,!1),this._createContentChanged2(new I(1,1,r,o),0,s,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let i=0,s=t.length;i<s;i++){const r=t[i],o=r.range,a=r.cachedAbsoluteStart-r.start,l=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),c=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);r.cachedAbsoluteStart=l,r.cachedAbsoluteEnd=c,r.cachedVersionId=e,r.start=l-a,r.end=c-a,pc(r)}}onBeforeAttached(){this._attachedEditorCount++,this._attachedEditorCount===1&&this._onDidChangeAttached.fire(void 0)}onBeforeDetached(){this._attachedEditorCount--,this._attachedEditorCount===0&&this._onDidChangeAttached.fire(void 0)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const i=this._buffer.getLineCount();for(let s=1;s<=i;s++){const r=this._buffer.getLineLength(s);r>=Spe?t+=r:e+=r}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();let t=typeof e.tabSize!="undefined"?e.tabSize:this._options.tabSize,i=typeof e.indentSize!="undefined"?e.indentSize:this._options.indentSize,s=typeof e.insertSpaces!="undefined"?e.insertSpaces:this._options.insertSpaces,r=typeof e.trimAutoWhitespace!="undefined"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=typeof e.bracketColorizationOptions!="undefined"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new Rv({tabSize:t,indentSize:i,insertSpaces:s,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:r,bracketPairColorizationOptions:o});if(this._options.equals(a))return;let l=this._options.createChangeEvent(a);this._options=a,this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();let i=BP(this._buffer,t,e);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}static _normalizeIndentationFromWhitespace(e,t,i){let s=0;for(let o=0;o<e.length;o++)e.charAt(o)==="	"?s+=t:s++;let r="";if(!i){let o=Math.floor(s/t);s=s%t;for(let a=0;a<o;a++)r+="	"}for(let o=0;o<s;o++)r+=" ";return r}static normalizeIndentation(e,t,i){let s=Jn(e);return s===-1&&(s=e.length),Eo._normalizeIndentationFromWhitespace(e.substring(0,s),t,i)+e.substring(s)}normalizeIndentation(e){return this._assertNotDisposed(),Eo.normalizeIndentation(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(J9.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(i=>({range:i.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();let t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();let t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();const i=this.getFullModelRange(),s=this.getValueInRange(i,e);return t?this._buffer.getBOM()+s:s}createSnapshot(e=!1){return new xpe(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const i=this.getFullModelRange(),s=this.getValueLengthInRange(i,e);return t?this._buffer.getBOM().length+s:s}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),i=e.startLineNumber,s=e.startColumn;let r=Math.floor(typeof i=="number"&&!isNaN(i)?i:1),o=Math.floor(typeof s=="number"&&!isNaN(s)?s:1);if(r<1)r=1,o=1;else if(r>t)r=t,o=this.getLineMaxColumn(r);else if(o<=1)o=1;else{const u=this.getLineMaxColumn(r);o>=u&&(o=u)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),h=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,h=1;else if(c>t)c=t,h=this.getLineMaxColumn(c);else if(h<=1)h=1;else{const u=this.getLineMaxColumn(c);h>=u&&(h=u)}return i===r&&s===o&&a===c&&l===h&&e instanceof I&&!(e instanceof Se)?e:new I(r,o,c,h)}_isValidPosition(e,t,i){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const s=this._buffer.getLineCount();if(e>s)return!1;if(t===1)return!0;const r=this.getLineMaxColumn(e);if(t>r)return!1;if(i===1){const o=this._buffer.getLineCharCode(e,t-2);if(Ri(o))return!1}return!0}_validatePosition(e,t,i){const s=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),r=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),o=this._buffer.getLineCount();if(s<1)return new P(1,1);if(s>o)return new P(o,this.getLineMaxColumn(o));if(r<=1)return new P(s,1);const a=this.getLineMaxColumn(s);if(r>=a)return new P(s,a);if(i===1){const l=this._buffer.getLineCharCode(s,r-2);if(Ri(l))return new P(s,r-1)}return new P(s,r)}validatePosition(e){return this._assertNotDisposed(),e instanceof P&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const i=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(i,s,0)||!this._isValidPosition(r,o,0))return!1;if(t===1){const a=s>1?this._buffer.getLineCharCode(i,s-2):0,l=o>1&&o<=this._buffer.getLineLength(r)?this._buffer.getLineCharCode(r,o-2):0,c=Ri(a),h=Ri(l);return!c&&!h}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof I&&!(e instanceof Se)&&this._isValidRange(e,1))return e;const i=this._validatePosition(e.startLineNumber,e.startColumn,0),s=this._validatePosition(e.endLineNumber,e.endColumn,0),r=i.lineNumber,o=i.column,a=s.lineNumber,l=s.column;{const c=o>1?this._buffer.getLineCharCode(r,o-2):0,h=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,u=Ri(c),d=Ri(h);return!u&&!d?new I(r,o,a,l):r===a&&o===l?new I(r,o-1,a,l-1):u&&d?new I(r,o-1,a,l+1):u?new I(r,o-1,a,l):new I(r,o,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();let i=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new I(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,i,s){return this._buffer.findMatchesLineByLine(e,t,i,s)}findMatches(e,t,i,s,r,o,a=ype){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(u=>I.isIRange(u))&&(l=t.map(u=>this.validateRange(u)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((u,d)=>u.startLineNumber-d.startLineNumber||u.startColumn-d.startColumn);const c=[];c.push(l.reduce((u,d)=>I.areIntersecting(u,d)?u.plusRange(d):(c.push(u),d)));let h;if(!i&&e.indexOf(`
`)<0){const d=new Xc(e,i,s,r).parseSearchRequest();if(!d)return[];h=f=>this.findMatchesLineByLine(f,d,o,a)}else h=u=>Mb.findMatches(this,new Xc(e,i,s,r),u,o,a);return c.map(h).reduce((u,d)=>u.concat(d),[])}findNextMatch(e,t,i,s,r,o){this._assertNotDisposed();const a=this.validatePosition(t);if(!i&&e.indexOf(`
`)<0){const c=new Xc(e,i,s,r).parseSearchRequest();if(!c)return null;const h=this.getLineCount();let u=new I(a.lineNumber,a.column,h,this.getLineMaxColumn(h)),d=this.findMatchesLineByLine(u,c,o,1);return Mb.findNextMatch(this,new Xc(e,i,s,r),a,o),d.length>0||(u=new I(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),d=this.findMatchesLineByLine(u,c,o,1),d.length>0)?d[0]:null}return Mb.findNextMatch(this,new Xc(e,i,s,r),a,o)}findPreviousMatch(e,t,i,s,r,o){this._assertNotDisposed();const a=this.validatePosition(t);return Mb.findPreviousMatch(this,new Xc(e,i,s,r),a,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof Sx?e:new Sx(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let i=0,s=e.length;i<s;i++)t[i]=this._validateEditOperation(e[i]);return t}pushEditOperations(e,t,i){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),i)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,i){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let s=t.map(o=>({range:this.validateRange(o.range),text:o.text})),r=!0;if(e)for(let o=0,a=e.length;o<a;o++){let l=e[o],c=!1;for(let h=0,u=s.length;h<u;h++){let d=s[h].range,f=d.startLineNumber>l.endLineNumber,g=l.startLineNumber>d.endLineNumber;if(!f&&!g){c=!0;break}}if(!c){r=!1;break}}if(r)for(let o=0,a=this._trimAutoWhitespaceLines.length;o<a;o++){let l=this._trimAutoWhitespaceLines[o],c=this.getLineMaxColumn(l),h=!0;for(let u=0,d=s.length;u<d;u++){let f=s[u].range,g=s[u].text;if(!(l<f.startLineNumber||l>f.endLineNumber)&&!(l===f.startLineNumber&&f.startColumn===c&&f.isEmpty()&&g&&g.length>0&&g.charAt(0)===`
`)&&!(l===f.startLineNumber&&f.startColumn===1&&f.isEmpty()&&g&&g.length>0&&g.charAt(g.length-1)===`
`)){h=!1;break}}if(h){const u=new I(l,1,l,c);t.push(new Sx(null,u,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,i)}_applyUndo(e,t,i,s){const r=e.map(o=>{const a=this.getPositionAt(o.newPosition),l=this.getPositionAt(o.newEnd);return{range:new I(a.lineNumber,a.column,l.lineNumber,l.column),text:o.oldText}});this._applyUndoRedoEdits(r,t,!0,!1,i,s)}_applyRedo(e,t,i,s){const r=e.map(o=>{const a=this.getPositionAt(o.oldPosition),l=this.getPositionAt(o.oldEnd);return{range:new I(a.lineNumber,a.column,l.lineNumber,l.column),text:o.newText}});this._applyUndoRedoEdits(r,t,!1,!0,i,s)}_applyUndoRedoEdits(e,t,i,s,r,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=s,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(r)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const i=this._validateEditOperations(e);return this._doApplyEdits(i,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const i=this._buffer.getLineCount(),s=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),r=this._buffer.getLineCount(),o=s.changes;if(this._trimAutoWhitespaceLines=s.trimAutoWhitespaceLineNumbers,o.length!==0){for(let c=0,h=o.length;c<h;c++){const u=o[c],[d,f,g]=qf(u.text);this._tokens.acceptEdit(u.range,d,f),this._tokens2.acceptEdit(u.range,d,f,g,u.text.length>0?u.text.charCodeAt(0):0),this._decorationsTree.acceptReplace(u.rangeOffset,u.rangeLength,u.text.length,u.forceMoveMarkers)}let a=[];this._increaseVersionId();let l=i;for(let c=0,h=o.length;c<h;c++){const u=o[c],[d]=qf(u.text);this._onDidChangeDecorations.fire();const f=u.range.startLineNumber,g=u.range.endLineNumber,p=g-f,_=d,v=Math.min(p,_),b=_-p,w=r-l-b+f,C=w,y=w+_,D=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new P(C,1)),this.getOffsetAt(new P(y,this.getLineMaxColumn(y))),0),S=lo.fromDecorations(D),x=new tm(S);for(let k=v;k>=0;k--){const F=f+k,A=w+k;x.takeFromEndWhile(H=>H.lineNumber>A);const z=x.takeFromEndWhile(H=>H.lineNumber===A);a.push(new GP(F,this.getLineContent(A),z))}if(v<p){const k=f+v;a.push(new Pde(k+1,g))}if(v<_){const k=new tm(S),F=f+v,A=_-v,z=r-l-A+F+1;let H=[],te=[];for(let ie=0;ie<A;ie++){let ae=z+ie;te[ie]=this.getLineContent(ae),k.takeWhile(_e=>_e.lineNumber<ae),H[ie]=k.takeWhile(_e=>_e.lineNumber===ae)}a.push(new Bde(F+1,f+_,te,H))}l+=b}this._emitContentChangedEvent(new Bh(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return s.reverseEdits===null?void 0:s.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const i=[...e].map(s=>new GP(s,this.getLineContent(s),this._getInjectedTextInLine(s)));this._onDidChangeContentOrInjectedText.fire(new LW(i))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){let i={addDecoration:(r,o)=>this._deltaDecorationsImpl(e,[],[{range:r,options:o}])[0],changeDecoration:(r,o)=>{this._changeDecorationImpl(r,o)},changeDecorationOptions:(r,o)=>{this._changeDecorationOptionsImpl(r,h4(o))},removeDecoration:r=>{this._deltaDecorationsImpl(e,[r],[])},deltaDecorations:(r,o)=>r.length===0&&o.length===0?[]:this._deltaDecorationsImpl(e,r,o)},s=null;try{s=t(i)}catch(r){Ie(r)}return i.addDecoration=dp,i.changeDecoration=dp,i.changeDecorationOptions=dp,i.removeDecoration=dp,i.deltaDecorations=dp,s}deltaDecorations(e,t,i=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,i){const s=e?this._decorations[e]:null;if(!s)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:c4[i]}])[0]:null;if(!t)return this._decorationsTree.delete(s),delete this._decorations[s.id],null;const r=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),a=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);return this._decorationsTree.delete(s),s.reset(this.getVersionId(),o,a,r),s.setOptions(c4[i]),this._decorationsTree.insert(s),s.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let i=0,s=t.length;i<s;i++){const r=t[i];this._decorationsTree.delete(r),delete this._decorations[r.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,i=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,i)}getLinesDecorations(e,t,i=0,s=!1){let r=this.getLineCount(),o=Math.min(r,Math.max(1,e)),a=Math.min(r,Math.max(1,t)),l=this.getLineMaxColumn(a);const c=new I(o,1,a,l),h=this._getDecorationsInRange(c,i,s);return h.push(...this._decorationProvider.getDecorationsInRange(c,i,s)),h}getDecorationsInRange(e,t=0,i=!1){let s=this.validateRange(e);const r=this._getDecorationsInRange(s,t,i);return r.push(...this._decorationProvider.getDecorationsInRange(s,t,i)),r}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),i=t+this._buffer.getLineLength(e),s=this._decorationsTree.getInjectedTextInInterval(this,t,i,0);return lo.fromDecorations(s).filter(r=>r.lineNumber===e)}getAllDecorations(e=0,t=!1){let i=this._decorationsTree.getAll(this,e,t,!1);return i=i.concat(this._decorationProvider.getAllDecorations(e,t)),i}_getDecorationsInRange(e,t,i){const s=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),r=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,s,r,t,i)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const i=this._decorations[e];if(!i)return;if(i.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(i.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const s=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),o=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),r,o,s),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.startLineNumber)}_changeDecorationOptionsImpl(e,t){const i=this._decorations[e];if(!i)return;const s=!!(i.options.overviewRuler&&i.options.overviewRuler.color),r=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(t),i.options.after||t.after){const o=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.endLineNumber)}if(i.options.before||t.before){const o=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.startLineNumber)}s!==r?(this._decorationsTree.delete(i),i.setOptions(t),this._decorationsTree.insert(i)):i.setOptions(t)}_deltaDecorationsImpl(e,t,i){const s=this.getVersionId(),r=t.length;let o=0;const a=i.length;let l=0,c=new Array(a);for(;o<r||l<a;){let h=null;if(o<r){do h=this._decorations[t[o++]];while(!h&&o<r);if(h){if(h.options.after){const u=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(u.endLineNumber)}if(h.options.before){const u=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(u.startLineNumber)}this._decorationsTree.delete(h),this._onDidChangeDecorations.checkAffectedAndFire(h.options)}}if(l<a){if(!h){const _=++this._lastDecorationId,v=`${this._instanceId};${_}`;h=new yW(v,0,0),this._decorations[v]=h}const u=i[l],d=this._validateRangeRelaxedNoAllocations(u.range),f=h4(u.options),g=this._buffer.getOffsetAt(d.startLineNumber,d.startColumn),p=this._buffer.getOffsetAt(d.endLineNumber,d.endColumn);h.ownerId=e,h.reset(s,g,p,d),h.setOptions(f),h.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.endLineNumber),h.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(f),this._decorationsTree.insert(h),c[l]=h.id,l++}else h&&delete this._decorations[h.id]}return c}setTokens(e,t=!1){if(e.length!==0){let i=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];let a=0,l=0,c=!1;for(let h=0,u=o.tokens.length;h<u;h++){const d=o.startLineNumber+h;c?(this._tokens.setTokens(this._languageId,d-1,this._buffer.getLineLength(d),o.tokens[h],!1),l=d):this._tokens.setTokens(this._languageId,d-1,this._buffer.getLineLength(d),o.tokens[h],!0)&&(c=!0,a=d,l=d)}c&&i.push({fromLineNumber:a,toLineNumber:l})}i.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:i})}this.handleTokenizationProgress(t)}setSemanticTokens(e,t){this._tokens2.set(e,t),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]})}hasCompleteSemanticTokens(){return this._tokens2.isComplete()}hasSomeSemanticTokens(){return!this._tokens2.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const i=this._tokens2.setPartial(e,t);this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}tokenizeViewport(e,t){e=Math.max(1,e),t=Math.min(this._buffer.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._isDisposing||this._onDidChangeTokens.fire(e)}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){const t=this.getLineContent(e),i=this._tokens.getTokens(this._languageId,e-1,t);return this._tokens2.addSemanticTokens(e,i)}getLanguageId(){return this._languageId}setMode(e){if(this._languageId===e)return;let t={oldLanguage:this._languageId,newLanguage:e};this._languageId=e,this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}getLanguageIdAtPosition(e,t){const i=this.validatePosition(new P(e,t)),s=this.getLineTokens(i.lineNumber);return s.getLanguageId(s.findTokenIndexAtOffset(i.column-1))}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}getWordAtPosition(e){this._assertNotDisposed();const t=this.validatePosition(e),i=this.getLineContent(t.lineNumber),s=this._getLineTokens(t.lineNumber),r=s.findTokenIndexAtOffset(t.column-1),[o,a]=Eo._findLanguageBoundaries(s,r),l=Bw(t.column,this.getLanguageConfiguration(s.getLanguageId(r)).getWordDefinition(),i.substring(o,a),o);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(r>0&&o===t.column-1){const[c,h]=Eo._findLanguageBoundaries(s,r-1),u=Bw(t.column,this.getLanguageConfiguration(s.getLanguageId(r-1)).getWordDefinition(),i.substring(c,h),c);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn)return u}return null}static _findLanguageBoundaries(e,t){const i=e.getLanguageId(t);let s=0;for(let o=t;o>=0&&e.getLanguageId(o)===i;o--)s=e.getStartOffset(o);let r=e.getLineContent().length;for(let o=t,a=e.getCount();o<a&&e.getLanguageId(o)===i;o++)r=e.getEndOffset(o);return[s,r]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}findMatchingBracketUp(e,t){let i=e.toLowerCase(),s=this.validatePosition(t),r=this._getLineTokens(s.lineNumber),o=r.getLanguageId(r.findTokenIndexAtOffset(s.column-1)),a=this.getLanguageConfiguration(o).brackets;if(!a)return null;let l=a.textIsBracket[i];return l?Pb(this._findMatchingBracketUp(l,s,null)):null}matchBracket(e){return this._matchBracket(this.validatePosition(e))}_establishBracketSearchOffsets(e,t,i,s){const r=t.getCount(),o=t.getLanguageId(s);let a=Math.max(0,e.column-1-i.maxBracketLength);for(let c=s-1;c>=0;c--){const h=t.getEndOffset(c);if(h<=a)break;if(ko(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){a=h;break}}let l=Math.min(t.getLineContent().length,e.column-1+i.maxBracketLength);for(let c=s+1;c<r;c++){const h=t.getStartOffset(c);if(h>=l)break;if(ko(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){l=h;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e){const t=e.lineNumber,i=this._getLineTokens(t),s=this._buffer.getLineContent(t),r=i.findTokenIndexAtOffset(e.column-1);if(r<0)return null;const o=this.getLanguageConfiguration(i.getLanguageId(r)).brackets;if(o&&!ko(i.getStandardTokenType(r))){let{searchStartOffset:a,searchEndOffset:l}=this._establishBracketSearchOffsets(e,i,o,r),c=null;for(;;){const h=nr.findNextBracketInRange(o.forwardRegex,t,s,a,l);if(!h)break;if(h.startColumn<=e.column&&e.column<=h.endColumn){const u=s.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),d=this._matchFoundBracket(h,o.textIsBracket[u],o.textIsOpenBracket[u],null);if(d){if(d instanceof Pa)return null;c=d}}a=h.endColumn-1}if(c)return c}if(r>0&&i.getStartOffset(r)===e.column-1){const a=r-1,l=this.getLanguageConfiguration(i.getLanguageId(a)).brackets;if(l&&!ko(i.getStandardTokenType(a))){let{searchStartOffset:c,searchEndOffset:h}=this._establishBracketSearchOffsets(e,i,l,a);const u=nr.findPrevBracketInRange(l.reversedRegex,t,s,c,h);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn){const d=s.substring(u.startColumn-1,u.endColumn-1).toLowerCase(),f=this._matchFoundBracket(u,l.textIsBracket[d],l.textIsOpenBracket[d],null);if(f)return f instanceof Pa?null:f}}}return null}_matchFoundBracket(e,t,i,s){if(!t)return null;const r=i?this._findMatchingBracketDown(t,e.getEndPosition(),s):this._findMatchingBracketUp(t,e.getStartPosition(),s);return r?r instanceof Pa?r:[e,r]:null}_findMatchingBracketUp(e,t,i){const s=e.languageId,r=e.reversedRegex;let o=-1,a=0;const l=(c,h,u,d)=>{for(;;){if(i&&++a%100===0&&!i())return Pa.INSTANCE;const f=nr.findPrevBracketInRange(r,c,h,u,d);if(!f)break;const g=h.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(e.isOpen(g)?o++:e.isClose(g)&&o--,o===0)return f;d=f.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const h=this._getLineTokens(c),u=h.getCount(),d=this._buffer.getLineContent(c);let f=u-1,g=d.length,p=d.length;c===t.lineNumber&&(f=h.findTokenIndexAtOffset(t.column-1),g=t.column-1,p=t.column-1);let _=!0;for(;f>=0;f--){const v=h.getLanguageId(f)===s&&!ko(h.getStandardTokenType(f));if(v)_?g=h.getStartOffset(f):(g=h.getStartOffset(f),p=h.getEndOffset(f));else if(_&&g!==p){const b=l(c,d,g,p);if(b)return b}_=v}if(_&&g!==p){const v=l(c,d,g,p);if(v)return v}}return null}_findMatchingBracketDown(e,t,i){const s=e.languageId,r=e.forwardRegex;let o=1,a=0;const l=(h,u,d,f)=>{for(;;){if(i&&++a%100===0&&!i())return Pa.INSTANCE;const g=nr.findNextBracketInRange(r,h,u,d,f);if(!g)break;const p=u.substring(g.startColumn-1,g.endColumn-1).toLowerCase();if(e.isOpen(p)?o++:e.isClose(p)&&o--,o===0)return g;d=g.endColumn-1}return null},c=this.getLineCount();for(let h=t.lineNumber;h<=c;h++){const u=this._getLineTokens(h),d=u.getCount(),f=this._buffer.getLineContent(h);let g=0,p=0,_=0;h===t.lineNumber&&(g=u.findTokenIndexAtOffset(t.column-1),p=t.column-1,_=t.column-1);let v=!0;for(;g<d;g++){const b=u.getLanguageId(g)===s&&!ko(u.getStandardTokenType(g));if(b)v||(p=u.getStartOffset(g)),_=u.getEndOffset(g);else if(v&&p!==_){const w=l(h,f,p,_);if(w)return w}v=b}if(v&&p!==_){const b=l(h,f,p,_);if(b)return b}}return null}findPrevBracket(e){const t=this.validatePosition(e);let i=null,s=null;for(let r=t.lineNumber;r>=1;r--){const o=this._getLineTokens(r),a=o.getCount(),l=this._buffer.getLineContent(r);let c=a-1,h=l.length,u=l.length;if(r===t.lineNumber){c=o.findTokenIndexAtOffset(t.column-1),h=t.column-1,u=t.column-1;const f=o.getLanguageId(c);i!==f&&(i=f,s=this.getLanguageConfiguration(i).brackets)}let d=!0;for(;c>=0;c--){const f=o.getLanguageId(c);if(i!==f){if(s&&d&&h!==u){const p=nr.findPrevBracketInRange(s.reversedRegex,r,l,h,u);if(p)return this._toFoundBracket(s,p);d=!1}i=f,s=this.getLanguageConfiguration(i).brackets}const g=!!s&&!ko(o.getStandardTokenType(c));if(g)d?h=o.getStartOffset(c):(h=o.getStartOffset(c),u=o.getEndOffset(c));else if(s&&d&&h!==u){const p=nr.findPrevBracketInRange(s.reversedRegex,r,l,h,u);if(p)return this._toFoundBracket(s,p)}d=g}if(s&&d&&h!==u){const f=nr.findPrevBracketInRange(s.reversedRegex,r,l,h,u);if(f)return this._toFoundBracket(s,f)}}return null}findNextBracket(e){const t=this.validatePosition(e),i=this.getLineCount();let s=null,r=null;for(let o=t.lineNumber;o<=i;o++){const a=this._getLineTokens(o),l=a.getCount(),c=this._buffer.getLineContent(o);let h=0,u=0,d=0;if(o===t.lineNumber){h=a.findTokenIndexAtOffset(t.column-1),u=t.column-1,d=t.column-1;const g=a.getLanguageId(h);s!==g&&(s=g,r=this.getLanguageConfiguration(s).brackets)}let f=!0;for(;h<l;h++){const g=a.getLanguageId(h);if(s!==g){if(r&&f&&u!==d){const _=nr.findNextBracketInRange(r.forwardRegex,o,c,u,d);if(_)return this._toFoundBracket(r,_);f=!1}s=g,r=this.getLanguageConfiguration(s).brackets}const p=!!r&&!ko(a.getStandardTokenType(h));if(p)f||(u=a.getStartOffset(h)),d=a.getEndOffset(h);else if(r&&f&&u!==d){const _=nr.findNextBracketInRange(r.forwardRegex,o,c,u,d);if(_)return this._toFoundBracket(r,_)}f=p}if(r&&f&&u!==d){const g=nr.findNextBracketInRange(r.forwardRegex,o,c,u,d);if(g)return this._toFoundBracket(r,g)}}return null}findEnclosingBrackets(e,t){let i;if(typeof t=="undefined")i=null;else{const f=Date.now();i=()=>Date.now()-f<=t}const s=this.validatePosition(e),r=this.getLineCount(),o=new Map;let a=[];const l=(f,g)=>{if(!o.has(f)){let p=[];for(let _=0,v=g?g.brackets.length:0;_<v;_++)p[_]=0;o.set(f,p)}a=o.get(f)};let c=0;const h=(f,g,p,_,v)=>{for(;;){if(i&&++c%100===0&&!i())return Pa.INSTANCE;const b=nr.findNextBracketInRange(f.forwardRegex,g,p,_,v);if(!b)break;const w=p.substring(b.startColumn-1,b.endColumn-1).toLowerCase(),C=f.textIsBracket[w];if(C&&(C.isOpen(w)?a[C.index]++:C.isClose(w)&&a[C.index]--,a[C.index]===-1))return this._matchFoundBracket(b,C,!1,i);_=b.endColumn-1}return null};let u=null,d=null;for(let f=s.lineNumber;f<=r;f++){const g=this._getLineTokens(f),p=g.getCount(),_=this._buffer.getLineContent(f);let v=0,b=0,w=0;if(f===s.lineNumber){v=g.findTokenIndexAtOffset(s.column-1),b=s.column-1,w=s.column-1;const y=g.getLanguageId(v);u!==y&&(u=y,d=this.getLanguageConfiguration(u).brackets,l(u,d))}let C=!0;for(;v<p;v++){const y=g.getLanguageId(v);if(u!==y){if(d&&C&&b!==w){const S=h(d,f,_,b,w);if(S)return Pb(S);C=!1}u=y,d=this.getLanguageConfiguration(u).brackets,l(u,d)}const D=!!d&&!ko(g.getStandardTokenType(v));if(D)C||(b=g.getStartOffset(v)),w=g.getEndOffset(v);else if(d&&C&&b!==w){const S=h(d,f,_,b,w);if(S)return Pb(S)}C=D}if(d&&C&&b!==w){const y=h(d,f,_,b,w);if(y)return Pb(y)}}return null}_toFoundBracket(e,t){if(!t)return null;let i=this.getValueInRange(t);i=i.toLowerCase();let s=e.textIsBracket[i];return s?{range:t,open:s.open,close:s.close,isOpen:e.textIsOpenBracket[i]}:null}static computeIndentLevel(e,t){let i=0,s=0,r=e.length;for(;s<r;){let o=e.charCodeAt(s);if(o===32)i++;else if(o===9)i=i-i%t+t;else break;s++}return s===r?-1:i}_computeIndentLevel(e){return Eo.computeIndentLevel(this._buffer.getLineContent(e+1),this._options.tabSize)}getActiveIndentGuide(e,t,i){this._assertNotDisposed();const s=this.getLineCount();if(e<1||e>s)throw new Error("Illegal value for lineNumber");const r=this.getLanguageConfiguration(this._languageId).foldingRules,o=Boolean(r&&r.offSide);let a=-2,l=-1,c=-2,h=-1;const u=S=>{if(a!==-1&&(a===-2||a>S-1)){a=-1,l=-1;for(let x=S-2;x>=0;x--){let k=this._computeIndentLevel(x);if(k>=0){a=x,l=k;break}}}if(c===-2){c=-1,h=-1;for(let x=S;x<s;x++){let k=this._computeIndentLevel(x);if(k>=0){c=x,h=k;break}}}};let d=-2,f=-1,g=-2,p=-1;const _=S=>{if(d===-2){d=-1,f=-1;for(let x=S-2;x>=0;x--){let k=this._computeIndentLevel(x);if(k>=0){d=x,f=k;break}}}if(g!==-1&&(g===-2||g<S-1)){g=-1,p=-1;for(let x=S;x<s;x++){let k=this._computeIndentLevel(x);if(k>=0){g=x,p=k;break}}}};let v=0,b=!0,w=0,C=!0,y=0,D=0;for(let S=0;b||C;S++){const x=e-S,k=e+S;S>1&&(x<1||x<t)&&(b=!1),S>1&&(k>s||k>i)&&(C=!1),S>5e4&&(b=!1,C=!1);let F=-1;if(b){const z=this._computeIndentLevel(x-1);z>=0?(c=x-1,h=z,F=Math.ceil(z/this._options.indentSize)):(u(x),F=this._getIndentLevelForWhitespaceLine(o,l,h))}let A=-1;if(C){const z=this._computeIndentLevel(k-1);z>=0?(d=k-1,f=z,A=Math.ceil(z/this._options.indentSize)):(_(k),A=this._getIndentLevelForWhitespaceLine(o,f,p))}if(S===0){D=F;continue}if(S===1){if(k<=s&&A>=0&&D+1===A){b=!1,v=k,w=k,y=A;continue}if(x>=1&&F>=0&&F-1===D){C=!1,v=x,w=x,y=F;continue}if(v=e,w=e,y=D,y===0)return{startLineNumber:v,endLineNumber:w,indent:y}}b&&(F>=y?v=x:b=!1),C&&(A>=y?w=k:C=!1)}return{startLineNumber:v,endLineNumber:w,indent:y}}getLinesBracketGuides(e,t,i,s){var r,o,a,l,c;const h=[],u=this._bracketPairColorizer.getBracketPairsInRangeWithMinIndentation(new I(e,1,t,this.getLineMaxColumn(t)));let d;if(i&&u.length>0){const v=e<=i.lineNumber&&i.lineNumber<=t?u.filter(b=>b.range.containsPosition(i)):this._bracketPairColorizer.getBracketPairsInRange(I.fromPositions(i));d=(r=ghe(v,b=>b.range.startLineNumber!==b.range.endLineNumber))===null||r===void 0?void 0:r.range}const f=new tm(u),g=new Array,p=new Array,_=new az;for(let v=e;v<=t;v++){let b=new Array;p.length>0&&(b=b.concat(p),p.length=0),h.push(b);for(const C of f.takeWhile(y=>y.openingBracketRange.startLineNumber<=v)||[]){if(C.range.startLineNumber===C.range.endLineNumber)continue;const y=Math.min(this.getVisibleColumnFromPosition(C.openingBracketRange.getStartPosition()),this.getVisibleColumnFromPosition((a=(o=C.closingBracketRange)===null||o===void 0?void 0:o.getStartPosition())!==null&&a!==void 0?a:C.range.getEndPosition()),C.minVisibleColumnIndentation+1);let D=!1;C.closingBracketRange&&Jn(this.getLineContent(C.closingBracketRange.startLineNumber))<C.closingBracketRange.startColumn-1&&(D=!0);const S=C.openingBracketRange.getStartPosition(),x=(c=(l=C.closingBracketRange)===null||l===void 0?void 0:l.getStartPosition())!==null&&c!==void 0?c:C.range.getEndPosition();C.closingBracketRange===void 0?g[C.nestingLevel]=null:g[C.nestingLevel]={nestingLevel:C.nestingLevel,guideVisibleColumn:y,start:S,visibleStartColumn:this.getVisibleColumnFromPosition(S),end:x,visibleEndColumn:this.getVisibleColumnFromPosition(x),bracketPair:C,renderHorizontalEndLineAtTheBottom:D}}for(const C of g){if(!C)continue;const y=d&&C.bracketPair.range.equalsRange(d),D=_.getInlineClassNameOfLevel(C.nestingLevel)+(s.highlightActive&&y?" "+_.activeClassName:"");(y&&s.horizontalGuides!==Ph.Disabled||s.includeInactive&&s.horizontalGuides===Ph.Enabled)&&(C.start.lineNumber===v&&C.guideVisibleColumn<C.visibleStartColumn&&b.push(new Bd(C.guideVisibleColumn,D,new LE(!1,C.start.column))),C.end.lineNumber===v+1&&C.guideVisibleColumn<C.visibleEndColumn&&p.push(new Bd(C.guideVisibleColumn,D,new LE(!C.renderHorizontalEndLineAtTheBottom,C.end.column))))}let w=Number.MAX_SAFE_INTEGER;for(let C=g.length-1;C>=0;C--){const y=g[C];if(!y)continue;const D=s.highlightActive&&d&&y.bracketPair.range.equalsRange(d),S=_.getInlineClassNameOfLevel(y.nestingLevel)+(D?" "+_.activeClassName:"");(D||s.includeInactive)&&y.renderHorizontalEndLineAtTheBottom&&y.end.lineNumber===v+1&&p.push(new Bd(y.guideVisibleColumn,S,null)),!(y.end.lineNumber<=v||y.start.lineNumber>=v)&&(y.guideVisibleColumn>=w&&!D||(w=y.guideVisibleColumn,(D||s.includeInactive)&&b.push(new Bd(y.guideVisibleColumn,S,null))))}b.sort((C,y)=>C.visibleColumn-y.visibleColumn)}return h}getVisibleColumnFromPosition(e){return rt.visibleColumnFromColumn(this.getLineContent(e.lineNumber),e.column,this._options.tabSize)+1}getLinesIndentGuides(e,t){this._assertNotDisposed();const i=this.getLineCount();if(e<1||e>i)throw new Error("Illegal value for startLineNumber");if(t<1||t>i)throw new Error("Illegal value for endLineNumber");const s=this.getLanguageConfiguration(this._languageId).foldingRules,r=Boolean(s&&s.offSide);let o=new Array(t-e+1),a=-2,l=-1,c=-2,h=-1;for(let u=e;u<=t;u++){let d=u-e;const f=this._computeIndentLevel(u-1);if(f>=0){a=u-1,l=f,o[d]=Math.ceil(f/this._options.indentSize);continue}if(a===-2){a=-1,l=-1;for(let g=u-2;g>=0;g--){let p=this._computeIndentLevel(g);if(p>=0){a=g,l=p;break}}}if(c!==-1&&(c===-2||c<u-1)){c=-1,h=-1;for(let g=u;g<i;g++){let p=this._computeIndentLevel(g);if(p>=0){c=g,h=p;break}}}o[d]=this._getIndentLevelForWhitespaceLine(r,l,h)}return o}_getIndentLevelForWhitespaceLine(e,t,i){return t===-1||i===-1?0:t<i?1+Math.floor(t/this._options.indentSize):t===i?Math.ceil(i/this._options.indentSize):e?Math.ceil(i/this._options.indentSize):1+Math.floor(i/this._options.indentSize)}normalizePosition(e,t){return e}getLineIndentColumn(e){return Dpe(this.getLineContent(e))+1}};js.MODEL_SYNC_LIMIT=50*1024*1024;js.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;js.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;js.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:rn.tabSize,indentSize:rn.indentSize,insertSpaces:rn.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:rn.trimAutoWhitespace,largeFileOptimizations:rn.largeFileOptimizations,bracketPairColorizationOptions:rn.bracketPairColorizationOptions};js=vpe([tD(4,V0),tD(5,Hn),tD(6,F0)],js);function Dpe(n){let e=0;for(const t of n)if(t===" "||t==="	")e++;else break;return e}class az{constructor(){this.activeClassName="indent-active"}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}function iD(n){return!!(n.options.overviewRuler&&n.options.overviewRuler.color)}function nD(n){return!!n.options.after||!!n.options.before}class l4{constructor(){this._decorationsTree0=new $x,this._decorationsTree1=new $x,this._injectedTextDecorationsTree=new $x}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1)}_ensureNodesHaveRanges(e,t){for(const i of t)i.range===null&&(i.range=e.getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd));return t}getAllInInterval(e,t,i,s,r){const o=e.getVersionId(),a=this._intervalSearch(t,i,s,r,o);return this._ensureNodesHaveRanges(e,a)}_intervalSearch(e,t,i,s,r){const o=this._decorationsTree0.intervalSearch(e,t,i,s,r),a=this._decorationsTree1.intervalSearch(e,t,i,s,r),l=this._injectedTextDecorationsTree.intervalSearch(e,t,i,s,r);return o.concat(a).concat(l)}getInjectedTextInInterval(e,t,i,s){const r=e.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(t,i,s,!1,r);return this._ensureNodesHaveRanges(e,o).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const i=e.getVersionId(),s=this._injectedTextDecorationsTree.search(t,!1,i);return this._ensureNodesHaveRanges(e,s).filter(r=>r.options.showIfCollapsed||!r.range.isEmpty())}getAll(e,t,i,s){const r=e.getVersionId(),o=this._search(t,i,s,r);return this._ensureNodesHaveRanges(e,o)}_search(e,t,i,s){if(i)return this._decorationsTree1.search(e,t,s);{const r=this._decorationsTree0.search(e,t,s),o=this._decorationsTree1.search(e,t,s),a=this._injectedTextDecorationsTree.search(e,t,s);return r.concat(o).concat(a)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),i=this._decorationsTree1.collectNodesFromOwner(e),s=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(i).concat(s)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),i=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(i)}insert(e){nD(e)?this._injectedTextDecorationsTree.insert(e):iD(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){nD(e)?this._injectedTextDecorationsTree.delete(e):iD(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const i=e.getVersionId();return t.cachedVersionId!==i&&this._resolveNode(t,i),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){nD(e)?this._injectedTextDecorationsTree.resolveNode(e,t):iD(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,i,s){this._decorationsTree0.acceptReplace(e,t,i,s),this._decorationsTree1.acceptReplace(e,t,i,s),this._injectedTextDecorationsTree.acceptReplace(e,t,i,s)}}function wl(n){return n.replace(/[^a-z0-9\-_]/gi," ")}class lz{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class Lpe extends lz{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:ra.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;let i=e?t.getColor(e.id):null;return i?i.toString():""}}class kpe extends lz{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?V.fromHex(e):t.getColor(e.id)}}class v_{constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1}static from(e){return e instanceof v_?e:new v_(e)}}class $e{constructor(e){this.description=e.description,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?wl(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new Lpe(e.overviewRuler):null,this.minimap=e.minimap?new kpe(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?wl(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?wl(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?wl(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?wl(e.marginClassName):null,this.inlineClassName=e.inlineClassName?wl(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?wl(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?wl(e.afterContentClassName):null,this.after=e.after?v_.from(e.after):null,this.before=e.before?v_.from(e.before):null}static register(e){return new $e(e)}static createDynamic(e){return new $e(e)}}$e.EMPTY=$e.register({description:"empty"});const c4=[$e.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),$e.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),$e.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),$e.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function h4(n){return n instanceof $e?n:$e.createDynamic(n)}class Epe extends q{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new R),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;if(this._deferredCnt--,this._deferredCnt===0){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);const t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(t)}(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}}class Ipe extends q{constructor(){super(),this._fastEmitter=this._register(new R),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new R),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}const Tpe=()=>!0,u4=()=>!1,Npe=n=>n===" "||n==="	";class hr{constructor(e,t,i){this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const s=i.options,r=s.get(129);this.readOnly=s.get(80),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=s.get(103),this.lineHeight=s.get(58),this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=s.get(114),this.wordSeparators=s.get(115),this.emptySelectionClipboard=s.get(32),this.copyWithSyntaxHighlighting=s.get(21),this.multiCursorMergeOverlapping=s.get(68),this.multiCursorPaste=s.get(70),this.autoClosingBrackets=s.get(5),this.autoClosingQuotes=s.get(8),this.autoClosingDelete=s.get(6),this.autoClosingOvertype=s.get(7),this.autoSurround=s.get(11),this.autoIndent=s.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:hr._getShouldAutoClose(e,this.autoClosingQuotes),bracket:hr._getShouldAutoClose(e,this.autoClosingBrackets)},this.autoClosingPairs=Qt.getAutoClosingPairs(e);let o=hr._getSurroundingPairs(e);if(o)for(const a of o)this.surroundingPairs[a.open]=a.close}static shouldRecreate(e){return e.hasChanged(129)||e.hasChanged(115)||e.hasChanged(32)||e.hasChanged(68)||e.hasChanged(70)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(114)||e.hasChanged(58)||e.hasChanged(80)}get electricChars(){if(!this._electricChars){this._electricChars={};let e=hr._getElectricCharacters(this._languageId);if(e)for(const t of e)this._electricChars[t]=!0}return this._electricChars}normalizeIndentation(e){return js.normalizeIndentation(e,this.indentSize,this.insertSpaces)}static _getElectricCharacters(e){try{return Qt.getElectricCharacters(e)}catch(t){return Ie(t),null}}static _getShouldAutoClose(e,t){switch(t){case"beforeWhitespace":return Npe;case"languageDefined":return hr._getLanguageDefinedShouldAutoClose(e);case"always":return Tpe;case"never":return u4}}static _getLanguageDefinedShouldAutoClose(e){try{const t=Qt.getAutoCloseBeforeSet(e);return i=>t.indexOf(i)!==-1}catch(t){return Ie(t),u4}}static _getSurroundingPairs(e){try{return Qt.getSurroundingPairs(e)}catch(t){return Ie(t),null}}}class Ni{constructor(e,t,i,s){this._singleCursorStateBrand=void 0,this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=t,this.position=i,this.leftoverVisibleColumns=s,this.selection=Ni._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,i,s){return e?new Ni(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new P(t,i),s):new Ni(new I(t,i,t,i),s,new P(t,i),s)}static _computeSelection(e,t){let i,s,r,o;return e.isEmpty()?(i=e.startLineNumber,s=e.startColumn,r=t.lineNumber,o=t.column):t.isBeforeOrEqual(e.getStartPosition())?(i=e.endLineNumber,s=e.endColumn,r=t.lineNumber,o=t.column):(i=e.startLineNumber,s=e.startColumn,r=t.lineNumber,o=t.column),new Se(i,s,r,o)}}class d4{constructor(e,t,i,s){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=i,this.cursorConfig=s}}class Ape{constructor(e){this.modelState=e,this.viewState=null}}class Mpe{constructor(e){this.modelState=null,this.viewState=e}}class Me{constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}static fromModelState(e){return new Ape(e)}static fromViewState(e){return new Mpe(e)}static fromModelSelection(e){const t=e.selectionStartLineNumber,i=e.selectionStartColumn,s=e.positionLineNumber,r=e.positionColumn,o=new Ni(new I(t,i,t,i),0,new P(s,r),0);return Me.fromModelState(o)}static fromModelSelections(e){let t=[];for(let i=0,s=e.length;i<s;i++)t[i]=this.fromModelSelection(e[i]);return t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class Gn{constructor(e,t,i){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=i.shouldPushStackElementBefore,this.shouldPushStackElementAfter=i.shouldPushStackElementAfter}}function Td(n){return n==="'"||n==='"'||n==="`"}class w_{static whitespaceVisibleColumn(e,t,i){const s=e.length;let r=0,o=-1,a=-1;for(let l=0;l<s;l++){if(l===t)return[o,a,r];switch(r%i===0&&(o=l,a=r),e.charCodeAt(l)){case 32:r+=1;break;case 9:r=rt.nextRenderTabStop(r,i);break;default:return[-1,-1,-1]}}return t===s?[o,a,r]:[-1,-1,-1]}static atomicPosition(e,t,i,s){const r=e.length,[o,a,l]=w_.whitespaceVisibleColumn(e,t,i);if(l===-1)return-1;let c;switch(s){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%i===0)return t;c=l%i<=i/2;break}if(c){if(o===-1)return-1;let d=a;for(let f=o;f<r;++f){if(d===a+i)return o;switch(e.charCodeAt(f)){case 32:d+=1;break;case 9:d=rt.nextRenderTabStop(d,i);break;default:return-1}}return d===a+i?o:-1}const h=rt.nextRenderTabStop(l,i);let u=l;for(let d=t;d<r;d++){if(u===h)return d;switch(e.charCodeAt(d)){case 32:u+=1;break;case 9:u=rt.nextRenderTabStop(u,i);break;default:return-1}}return u===h?r:-1}}class Il{constructor(e=null){this.hitTarget=e,this.type=0}}class oI{constructor(e,t,i){this.position=e,this.spanNode=t,this.injectedText=i,this.type=1}}var sh;(function(n){function e(t,i,s){const r=t.getPositionFromDOMInfo(i,s);return r?new oI(r,i,null):new Il(i)}n.createFromDOMInfo=e})(sh||(sh={}));class Rpe{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class Rr{constructor(e,t,i=0,s=null,r=null,o=null){this.element=e,this.type=t,this.mouseColumn=i,this.position=s,!r&&s&&(r=new I(s.lineNumber,s.column,s.lineNumber,s.column)),this.range=r,this.detail=o}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+e.detail}toString(){return Rr.toString(this)}}class tr{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}}class Yf{constructor(e,t,i){this.model=e.model;const s=e.configuration.options;this.layoutInfo=s.get(129),this.viewDomNode=t.viewDomNode,this.lineHeight=s.get(58),this.stickyTabStops=s.get(103),this.typicalHalfwidthCharacterWidth=s.get(43).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return Yf.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const i=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(i){const s=i.verticalOffset+i.height/2,r=e.model.getLineCount();let o=null,a,l=null;return i.afterLineNumber!==r&&(l=new P(i.afterLineNumber+1,1)),i.afterLineNumber>0&&(o=new P(i.afterLineNumber,e.model.getLineMaxColumn(i.afterLineNumber))),l===null?a=o:o===null?a=l:t<s?a=o:a=l,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:o,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const s=this._context.model.getLineCount(),r=this._context.model.getLineMaxColumn(s);return{range:new I(s,r,s,r),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),i=this._context.model.getLineMaxColumn(t);return{range:new I(t,1,t,i),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return Yf._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,i){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===i)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class Ope{constructor(e,t,i){this.editorPos=t,this.pos=i,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+i.y-t.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+i.x-t.x-e.layoutInfo.contentLeft,this.isInMarginArea=i.x-t.x<e.layoutInfo.contentLeft&&i.x-t.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,ji._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class R2 extends Ope{constructor(e,t,i,s){super(e,t,i),this._ctx=e,s?(this.target=s,this.targetPath=aa.collect(s,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}fulfill(e,t=null,i=null,s=null){let r=this.mouseColumn;return t&&t.column<this._ctx.model.getLineMaxColumn(t.lineNumber)&&(r=rt.visibleColumnFromColumn(this._ctx.model.getLineContent(t.lineNumber),t.column,this._ctx.model.getTextModelOptions().tabSize)+1),new Rr(this.target,e,r,t,i,s)}withTarget(e){return new R2(this._ctx,this.editorPos,this.pos,e)}}const f4={isAfterLines:!0};function sD(n){return{isAfterLines:!1,horizontalDistanceToText:n}}class ji{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,i=aa.collect(t,this._viewHelper.viewDomNode);return!!(tr.isChildOfContentWidgets(i)||tr.isChildOfOverflowingContentWidgets(i)||tr.isChildOfOverlayWidgets(i))}createMouseTarget(e,t,i,s){const r=new Yf(this._context,this._viewHelper,e),o=new R2(r,t,i,s);try{return ji._createMouseTarget(r,o,!1)}catch{return o.fulfill(0)}}static _createMouseTarget(e,t,i){if(t.target===null){if(i)return t.fulfill(0);const o=ji._doHitTest(e,t);return o.type===1?ji.createMouseTargetFromHitTestPosition(e,t,o.spanNode,o.position,o.injectedText):this._createMouseTarget(e,t.withTarget(o.hitTarget),!0)}const s=t;let r=null;return r=r||ji._hitTestContentWidget(e,s),r=r||ji._hitTestOverlayWidget(e,s),r=r||ji._hitTestMinimap(e,s),r=r||ji._hitTestScrollbarSlider(e,s),r=r||ji._hitTestViewZone(e,s),r=r||ji._hitTestMargin(e,s),r=r||ji._hitTestViewCursor(e,s),r=r||ji._hitTestTextArea(e,s),r=r||ji._hitTestViewLines(e,s,i),r=r||ji._hitTestScrollbar(e,s),r||t.fulfill(0)}static _hitTestContentWidget(e,t){if(tr.isChildOfContentWidgets(t.targetPath)||tr.isChildOfOverflowingContentWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfill(9,null,null,i):t.fulfill(0)}return null}static _hitTestOverlayWidget(e,t){if(tr.isChildOfOverlayWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfill(12,null,null,i):t.fulfill(0)}return null}static _hitTestViewCursor(e,t){if(t.target){const i=e.lastRenderData.lastViewCursorsRenderData;for(const s of i)if(t.target===s.domNode)return t.fulfill(6,s.position,null,{mightBeForeignElement:!1})}if(t.isInContentArea){const i=e.lastRenderData.lastViewCursorsRenderData,s=t.mouseContentHorizontalOffset,r=t.mouseVerticalOffset;for(const o of i){if(s<o.contentLeft||s>o.contentLeft+o.width)continue;const a=e.getVerticalOffsetForLineNumber(o.position.lineNumber);if(a<=r&&r<=a+o.height)return t.fulfill(6,o.position,null,{mightBeForeignElement:!1})}}return null}static _hitTestViewZone(e,t){const i=e.getZoneAtCoord(t.mouseVerticalOffset);if(i){const s=t.isInContentArea?8:5;return t.fulfill(s,i.position,null,i)}return null}static _hitTestTextArea(e,t){return tr.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfill(6,e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1}):t.fulfill(1,e.lastRenderData.lastTextareaPosition):null}static _hitTestMargin(e,t){if(t.isInMarginArea){const i=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),s=i.range.getStartPosition();let r=Math.abs(t.pos.x-t.editorPos.x);const o={isAfterLines:i.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:r};return r-=e.layoutInfo.glyphMarginLeft,r<=e.layoutInfo.glyphMarginWidth?t.fulfill(2,s,i.range,o):(r-=e.layoutInfo.glyphMarginWidth,r<=e.layoutInfo.lineNumbersWidth?t.fulfill(3,s,i.range,o):(r-=e.layoutInfo.lineNumbersWidth,t.fulfill(4,s,i.range,o)))}return null}static _hitTestViewLines(e,t,i){if(!tr.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfill(7,new P(1,1),null,f4);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const r=e.model.getLineCount(),o=e.model.getLineMaxColumn(r);return t.fulfill(7,new P(r,o),null,f4)}if(i){if(tr.isStrictChildOfViewLines(t.targetPath)){const r=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.model.getLineLength(r)===0){const a=e.getLineWidth(r),l=sD(t.mouseContentHorizontalOffset-a);return t.fulfill(7,new P(r,1),null,l)}const o=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>=o){const a=sD(t.mouseContentHorizontalOffset-o),l=new P(r,e.model.getLineMaxColumn(r));return t.fulfill(7,l,null,a)}}return t.fulfill(0)}const s=ji._doHitTest(e,t);return s.type===1?ji.createMouseTargetFromHitTestPosition(e,t,s.spanNode,s.position,s.injectedText):this._createMouseTarget(e,t.withTarget(s.hitTarget),!0)}static _hitTestMinimap(e,t){if(tr.isChildOfMinimap(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.model.getLineMaxColumn(i);return t.fulfill(11,new P(i,s))}return null}static _hitTestScrollbarSlider(e,t){if(tr.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const i=t.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.model.getLineMaxColumn(s);return t.fulfill(11,new P(s,r))}}return null}static _hitTestScrollbar(e,t){if(tr.isChildOfScrollableElement(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.model.getLineMaxColumn(i);return t.fulfill(11,new P(i,s))}return null}getMouseColumn(e,t){const i=this._context.configuration.options,s=i.get(129),r=this._context.viewLayout.getCurrentScrollLeft()+t.x-e.x-s.contentLeft;return ji._getMouseColumn(r,i.get(43).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,i,s,r){const o=s.lineNumber,a=s.column,l=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>l){const _=sD(t.mouseContentHorizontalOffset-l);return t.fulfill(7,s,null,_)}const c=e.visibleRangeForPosition(o,a);if(!c)return t.fulfill(0,s);const h=c.left;if(t.mouseContentHorizontalOffset===h)return t.fulfill(6,s,null,{mightBeForeignElement:!!r});const u=[];if(u.push({offset:c.left,column:a}),a>1){const _=e.visibleRangeForPosition(o,a-1);_&&u.push({offset:_.left,column:a-1})}const d=e.model.getLineMaxColumn(o);if(a<d){const _=e.visibleRangeForPosition(o,a+1);_&&u.push({offset:_.left,column:a+1})}u.sort((_,v)=>_.offset-v.offset);const f=t.pos.toClientCoordinates(),g=i.getBoundingClientRect(),p=g.left<=f.clientX&&f.clientX<=g.right;for(let _=1;_<u.length;_++){const v=u[_-1],b=u[_];if(v.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=b.offset){const w=new I(o,v.column,o,b.column);return t.fulfill(6,s,w,{mightBeForeignElement:!p||!!r})}}return t.fulfill(6,s,null,{mightBeForeignElement:!p||!!r})}static _doHitTestWithCaretRangeFromPoint(e,t){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.getVerticalOffsetForLineNumber(i)+Math.floor(e.lineHeight/2);let o=t.pos.y+(r-t.mouseVerticalOffset);o<=t.editorPos.y&&(o=t.editorPos.y+1),o>=t.editorPos.y+e.layoutInfo.height&&(o=t.editorPos.y+e.layoutInfo.height-1);const a=new b2(t.pos.x,o),l=this._actualDoHitTestWithCaretRangeFromPoint(e,a.toClientCoordinates());return l.type===1?l:this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const i=Lg(e.viewDomNode);let s;if(i?typeof i.caretRangeFromPoint=="undefined"?s=Fpe(i,t.clientX,t.clientY):s=i.caretRangeFromPoint(t.clientX,t.clientY):s=document.caretRangeFromPoint(t.clientX,t.clientY),!s||!s.startContainer)return new Il;const r=s.startContainer;if(r.nodeType===r.TEXT_NODE){const o=r.parentNode,a=o?o.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===Vo.CLASS_NAME?sh.createFromDOMInfo(e,o,s.startOffset):new Il(r.parentNode)}else if(r.nodeType===r.ELEMENT_NODE){const o=r.parentNode,a=o?o.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===Vo.CLASS_NAME?sh.createFromDOMInfo(e,r,r.textContent.length):new Il(r)}return new Il}static _doHitTestWithCaretPositionFromPoint(e,t){const i=document.caretPositionFromPoint(t.clientX,t.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){const s=i.offsetNode.parentNode,r=s?s.parentNode:null,o=r?r.parentNode:null;return(o&&o.nodeType===o.ELEMENT_NODE?o.className:null)===Vo.CLASS_NAME?sh.createFromDOMInfo(e,i.offsetNode.parentNode,i.offset):new Il(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){const s=i.offsetNode.parentNode,r=s&&s.nodeType===s.ELEMENT_NODE?s.className:null,o=s?s.parentNode:null,a=o&&o.nodeType===o.ELEMENT_NODE?o.className:null;if(r===Vo.CLASS_NAME){const l=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(l)return sh.createFromDOMInfo(e,l,0)}else if(a===Vo.CLASS_NAME)return sh.createFromDOMInfo(e,i.offsetNode,0)}return new Il(i.offsetNode)}static _snapToSoftTabBoundary(e,t){const i=t.getLineContent(e.lineNumber),{tabSize:s}=t.getTextModelOptions(),r=w_.atomicPosition(i,e.column-1,s,2);return r!==-1?new P(e.lineNumber,r+1):e}static _doHitTest(e,t){let i=new Il;if(typeof document.caretRangeFromPoint=="function"?i=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),i.type===1){const s=e.model.getInjectedTextAt(i.position),r=e.model.normalizePosition(i.position,2);(s||!r.equals(i.position))&&(i=new oI(r,i.spanNode,s))}return i.type===1&&e.stickyTabStops&&(i=new oI(this._snapToSoftTabBoundary(i.position,e.model),i.spanNode,i.injectedText)),i}}function Fpe(n,e,t){const i=document.createRange();let s=n.elementFromPoint(e,t);if(s!==null){for(;s&&s.firstChild&&s.firstChild.nodeType!==s.firstChild.TEXT_NODE&&s.lastChild&&s.lastChild.firstChild;)s=s.lastChild;const r=s.getBoundingClientRect(),o=window.getComputedStyle(s,null).getPropertyValue("font"),a=s.innerText;let l=r.left,c=0,h;if(e>r.left+r.width)c=a.length;else{const u=Ch.getInstance();for(let d=0;d<a.length+1;d++){if(h=u.getCharWidth(a.charAt(d),o)/2,l+=h,e<l){c=d;break}l+=h}}i.setStart(s.firstChild,c),i.setEnd(s.firstChild,c)}return i}class Ch{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return Ch._INSTANCE||(Ch._INSTANCE=new Ch),Ch._INSTANCE}getCharWidth(e,t){const i=e+t;if(this._cache[i])return this._cache[i];const s=this._canvas.getContext("2d");s.font=t;const o=s.measureText(e).width;return this._cache[i]=o,o}}Ch._INSTANCE=null;function DC(n){return function(e,t){let i=!1;return n&&(i=n.mouseTargetIsWidget(t)),i||t.preventDefault(),t}}class fu extends B0{constructor(e,t,i){super(),this._context=e,this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new ji(this._context,i),this._mouseDownOperation=this._register(new Ppe(this._context,this.viewController,this.viewHelper,(o,a)=>this._createMouseTarget(o,a),o=>this._getMouseColumn(o))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(129).height;const s=new que(this.viewHelper.viewDomNode);this._register(s.onContextMenu(this.viewHelper.viewDomNode,o=>this._onContextMenu(o,!0))),this._register(s.onMouseMoveThrottled(this.viewHelper.viewDomNode,o=>this._onMouseMove(o),DC(this.mouseTargetFactory),fu.MOUSE_MOVE_MINIMUM_TIME)),this._register(s.onMouseUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(s.onMouseLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o))),this._register(s.onMouseDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o)));const r=o=>{if(this.viewController.emitMouseWheel(o),!this._context.configuration.options.get(67))return;const a=new Of(o);if(je?(o.metaKey||o.ctrlKey)&&!o.shiftKey&&!o.altKey:o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.altKey){const c=Yw.getZoomLevel(),h=a.deltaY>0?1:-1;Yw.setZoomLevel(c+h),a.preventDefault(),a.stopPropagation()}};this._register(K(this.viewHelper.viewDomNode,de.MOUSE_WHEEL,r,{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(129)){const t=this._context.configuration.options.get(129).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,t){const s=new mW(e,t).toPageCoordinates(),r=_W(this.viewHelper.viewDomNode);return s.y<r.y||s.y>r.y+r.height||s.x<r.x||s.x>r.x+r.width?null:this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),r,s,null)}_createMouseTarget(e,t){let i=e.target;if(!this.viewHelper.viewDomNode.contains(i)){const s=Lg(this.viewHelper.viewDomNode);s&&(i=s.elementsFromPoint(e.posx,e.posy).find(r=>this.viewHelper.viewDomNode.contains(r)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,t?i:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.editorPos,e.pos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e){const t=this._createMouseTarget(e,!0),i=t.type===6||t.type===7,s=t.type===2||t.type===3||t.type===4,r=t.type===3,o=this._context.configuration.options.get(97),a=t.type===8||t.type===5,l=t.type===9;let c=e.leftButton||e.middleButton;je&&e.leftButton&&e.ctrlKey&&(c=!1);const h=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(c&&(i||r&&o))h(),this._mouseDownOperation.start(t.type,e);else if(s)e.preventDefault();else if(a){const u=t.detail;this.viewHelper.shouldSuppressMouseDownOnViewZone(u.viewZoneId)&&(h(),this._mouseDownOperation.start(t.type,e),e.preventDefault())}else l&&this.viewHelper.shouldSuppressMouseDownOnWidget(t.detail)&&(h(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:t})}}fu.MOUSE_MOVE_MINIMUM_TIME=100;class Ppe extends q{constructor(e,t,i,s,r){super(),this._context=e,this._viewController=t,this._viewHelper=i,this._createMouseTarget=s,this._getMouseColumn=r,this._mouseMoveMonitor=this._register(new Gue(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new Wn),this._mouseState=new $1,this._currentSelection=new Se(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!0);!t||(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):this._dispatchMouse(t,!0))}start(e,t){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const i=this._findMousePosition(t,!0);if(!i||!i.position)return;this._mouseState.trySetCount(t.detail,i.position),t.detail=this._mouseState.count;const s=this._context.configuration.options;if(!s.get(80)&&s.get(31)&&!s.get(18)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&i.type===6&&i.position&&this._currentSelection.containsPosition(i.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,DC(null),r=>this._onMouseDownThenMove(r),r=>{const o=this._findMousePosition(this._lastMouseEvent,!0);r&&r instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:o?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(i,t.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,DC(null),r=>this._onMouseDownThenMove(r),()=>this._stop()))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){!this._isActive||this._onScrollTimeout.setIfNotSet(()=>{if(!this._lastMouseEvent)return;const e=this._findMousePosition(this._lastMouseEvent,!1);!e||this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0)},10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,i=this._context.model,s=this._context.viewLayout,r=this._getMouseColumn(e);if(e.posy<t.y){const a=Math.max(s.getCurrentScrollTop()-(t.y-e.posy),0),l=Yf.getZoneAtCoord(this._context,a);if(l){const h=this._helpPositionJumpOverViewZone(l);if(h)return new Rr(null,13,r,h)}const c=s.getLineNumberAtVerticalOffset(a);return new Rr(null,13,r,new P(c,1))}if(e.posy>t.y+t.height){const a=s.getCurrentScrollTop()+(e.posy-t.y),l=Yf.getZoneAtCoord(this._context,a);if(l){const h=this._helpPositionJumpOverViewZone(l);if(h)return new Rr(null,13,r,h)}const c=s.getLineNumberAtVerticalOffset(a);return new Rr(null,13,r,new P(c,i.getLineMaxColumn(c)))}const o=s.getLineNumberAtVerticalOffset(s.getCurrentScrollTop()+(e.posy-t.y));return e.posx<t.x?new Rr(null,13,r,new P(o,1)):e.posx>t.x+t.width?new Rr(null,13,r,new P(o,i.getLineMaxColumn(o))):null}_findMousePosition(e,t){const i=this._getPositionOutsideEditor(e);if(i)return i;const s=this._createMouseTarget(e,t);if(!s.position)return null;if(s.type===8||s.type===5){const o=this._helpPositionJumpOverViewZone(s.detail);if(o)return new Rr(s.element,s.type,s.mouseColumn,o,null,s.detail)}return s}_helpPositionJumpOverViewZone(e){const t=new P(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=e.positionBefore,s=e.positionAfter;return i&&s?i.isBefore(t)?i:s:null}_dispatchMouse(e,t){!e.position||this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton})}}class $1{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const i=new Date().getTime();i-this._lastSetMouseDownCountTime>$1.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}$1.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var fr;(function(n){n.text="text/plain",n.binary="application/octet-stream",n.unknown="application/unknown",n.markdown="text/markdown",n.latex="text/latex"})(fr||(fr={}));let Hh=[],O2=[],LC=[];function Bb(n,e=!1){const t=Bpe(n);Hh.push(t),t.userConfigured?LC.push(t):O2.push(t),e&&!t.userConfigured&&Hh.forEach(i=>{i.mime===t.mime||i.userConfigured||(t.extension&&i.extension===t.extension&&console.warn(`Overwriting extension <<${t.extension}>> to now point to mime <<${t.mime}>>`),t.filename&&i.filename===t.filename&&console.warn(`Overwriting filename <<${t.filename}>> to now point to mime <<${t.mime}>>`),t.filepattern&&i.filepattern===t.filepattern&&console.warn(`Overwriting filepattern <<${t.filepattern}>> to now point to mime <<${t.mime}>>`),t.firstline&&i.firstline===t.firstline&&console.warn(`Overwriting firstline <<${t.firstline}>> to now point to mime <<${t.mime}>>`))})}function Bpe(n){return{id:n.id,mime:n.mime,filename:n.filename,extension:n.extension,filepattern:n.filepattern,firstline:n.firstline,userConfigured:n.userConfigured,filenameLowercase:n.filename?n.filename.toLowerCase():void 0,extensionLowercase:n.extension?n.extension.toLowerCase():void 0,filepatternLowercase:n.filepattern?cV(n.filepattern.toLowerCase()):void 0,filepatternOnPath:n.filepattern?n.filepattern.indexOf(gi.sep)>=0:!1}}function Vpe(n){n?(Hh=Hh.filter(e=>!e.userConfigured),LC=[]):(Hh=[],O2=[],LC=[])}function Wpe(n,e){let t;if(n)switch(n.scheme){case Ve.file:t=n.fsPath;break;case Ve.data:t=hc.parseMetaData(n).get(hc.META_DATA_LABEL);break;default:t=n.path}if(!t)return[fr.unknown];t=t.toLowerCase();const i=Rh(t),s=g4(t,i,LC);if(s)return[s,fr.text];const r=g4(t,i,O2);if(r)return[r,fr.text];if(e){const o=zpe(e);if(o)return[o,fr.text]}return[fr.unknown]}function g4(n,e,t){var i;let s=null,r=null,o=null;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){s=l;break}if(l.filepattern&&(!r||l.filepattern.length>r.filepattern.length)){const c=l.filepatternOnPath?n:e;!((i=l.filepatternLowercase)===null||i===void 0)&&i.call(l,c)&&(r=l)}l.extension&&(!o||l.extension.length>o.extension.length)&&e.endsWith(l.extensionLowercase)&&(o=l)}return s?s.mime:r?r.mime:o?o.mime:null}function zpe(n){if(zA(n)&&(n=n.substr(1)),n.length>0)for(let e=Hh.length-1;e>=0;e--){const t=Hh[e];if(!t.firstline)continue;const i=n.match(t.firstline);if(i&&i.length>0)return t.mime}return null}class yi{constructor(e,t,i,s,r){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selectionStartPosition=s,this.selectionEndPosition=r}toString(){return"[ <"+this.value+">, selectionStart: "+this.selectionStart+", selectionEnd: "+this.selectionEnd+"]"}static readFromTextArea(e){return new yi(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)}collapseSelection(){return new yi(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,t,i){t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const s=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,s,-1)}if(e>=this.selectionEnd){const s=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,s,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition(this.selectionStartPosition,t,1);const i=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,i,-1)}_finishDeduceEditorPosition(e,t,i){let s=0,r=-1;for(;(r=t.indexOf(`
`,r+1))!==-1;)s++;return[e,i*t.length,s]}static selectedText(e){return new yi(e,0,e.length,null,null)}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};let s=e.value,r=e.selectionStart,o=e.selectionEnd,a=t.value,l=t.selectionStart,c=t.selectionEnd;const h=s.substring(o),u=a.substring(c),d=bE(h,u);a=a.substring(0,a.length-d),s=s.substring(0,s.length-d);const f=s.substring(0,r),g=a.substring(0,l),p=s_(f,g);if(a=a.substring(p),s=s.substring(p),l-=p,r-=p,c-=p,o-=p,i&&l===c&&s.length>0){let v=null;if(l===a.length?a.startsWith(s)&&(v=a.substring(s.length)):a.endsWith(s)&&(v=a.substring(0,a.length-s.length)),v!==null&&v.length>0&&(/\uFE0F/.test(v)||Kae(v)))return{text:v,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0}}if(l===c){if(s===a&&r===0&&o===s.length&&l===a.length&&a.indexOf(`
`)===-1&&Yae(a))return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const v=f.length-p;return{text:a,replacePrevCharCnt:v,replaceNextCharCnt:0,positionDelta:0}}const _=o-r;return{text:a,replacePrevCharCnt:_,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const i=Math.min(s_(e.value,t.value),e.selectionEnd),s=Math.min(bE(e.value,t.value),e.value.length-e.selectionEnd),r=e.value.substring(i,e.value.length-s),o=t.value.substring(i,t.value.length-s);e.selectionStart-i;const a=e.selectionEnd-i;t.selectionStart-i;const l=t.selectionEnd-i;return{text:o,replacePrevCharCnt:a,replaceNextCharCnt:r.length-a,positionDelta:l-o.length}}}yi.EMPTY=new yi("",0,0,null,null);class Hd{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const i=e*t,s=i+1,r=i+t;return new I(s,1,r+1,1)}static fromEditorSelection(e,t,i,s,r){const o=Hd._getPageOfLine(i.startLineNumber,s),a=Hd._getRangeForPage(o,s),l=Hd._getPageOfLine(i.endLineNumber,s),c=Hd._getRangeForPage(l,s),h=a.intersectRanges(new I(1,1,i.startLineNumber,i.startColumn));let u=t.getValueInRange(h,1);const d=t.getLineCount(),f=t.getLineMaxColumn(d),g=c.intersectRanges(new I(i.endLineNumber,i.endColumn,d,f));let p=t.getValueInRange(g,1),_;if(o===l||o+1===l)_=t.getValueInRange(i,1);else{const v=a.intersectRanges(i),b=c.intersectRanges(i);_=t.getValueInRange(v,1)+String.fromCharCode(8230)+t.getValueInRange(b,1)}return r&&(u.length>500&&(u=u.substring(u.length-500,u.length)),p.length>500&&(p=p.substring(0,500)),_.length>2*500&&(_=_.substring(0,500)+String.fromCharCode(8230)+_.substring(_.length-500,_.length))),new yi(u+_+p,u.length,u.length+_.length,new P(i.startLineNumber,i.startColumn),new P(i.endLineNumber,i.endColumn))}}var kC;(function(n){n.Tap="-monaco-textarea-synthetic-tap"})(kC||(kC={}));class EC{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}EC.INSTANCE=new EC;class Hpe extends q{constructor(e,t){super(),this.textArea=t,this._onFocus=this._register(new R),this.onFocus=this._onFocus.event,this._onBlur=this._register(new R),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new R),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new R),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new R),this.onCut=this._onCut.event,this._onPaste=this._register(new R),this.onPaste=this._onPaste.event,this._onType=this._register(new R),this.onType=this._onType.event,this._onCompositionStart=this._register(new R),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new R),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new R),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new R),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._host=e,this._textArea=this._register(new $pe(t)),this._asyncTriggerCut=this._register(new Wt(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new Wt(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=yi.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._isDoingComposition=!1,this._nextCommand=0;let i=null;this._register(mi(t.domNode,"keydown",a=>{(a.keyCode===109||this._isDoingComposition&&a.keyCode===1)&&a.stopPropagation(),a.equals(9)&&a.preventDefault(),i=a,this._onKeyDown.fire(a)})),this._register(mi(t.domNode,"keyup",a=>{this._onKeyUp.fire(a)})),this._register(K(t.domNode,"compositionstart",a=>{if(!this._isDoingComposition){if(this._isDoingComposition=!0,je&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===a.data&&(i&&i.equals(109)&&(i.code==="ArrowRight"||i.code==="ArrowLeft")||On)){this._textAreaState=new yi(this._textAreaState.value,this._textAreaState.selectionStart-1,this._textAreaState.selectionEnd,this._textAreaState.selectionStartPosition?new P(this._textAreaState.selectionStartPosition.lineNumber,this._textAreaState.selectionStartPosition.column-1):null,this._textAreaState.selectionEndPosition),this._onCompositionStart.fire({revealDeltaColumns:-1});return}if(Ip){this._onCompositionStart.fire({revealDeltaColumns:-this._textAreaState.selectionStart});return}this._setAndWriteTextAreaState("compositionstart",yi.EMPTY),this._onCompositionStart.fire({revealDeltaColumns:0})}}));const s=a=>{const l=this._textAreaState,c=yi.readFromTextArea(this._textArea);return[c,yi.deduceInput(l,c,a)]},r=()=>{const a=this._textAreaState,l=yi.readFromTextArea(this._textArea);return[l,yi.deduceAndroidCompositionInput(a,l)]},o=a=>{const l=this._textAreaState,c=yi.selectedText(a),h={text:c.value,replacePrevCharCnt:l.selectionEnd-l.selectionStart,replaceNextCharCnt:0,positionDelta:0};return[c,h]};this._register(K(t.domNode,"compositionupdate",a=>{if(Ip){const[h,u]=r();this._textAreaState=h,this._onType.fire(u),this._onCompositionUpdate.fire(a);return}const[l,c]=o(a.data||"");this._textAreaState=l,this._onType.fire(c),this._onCompositionUpdate.fire(a)})),this._register(K(t.domNode,"compositionend",a=>{if(!this._isDoingComposition)return;if(this._isDoingComposition=!1,Ip){const[h,u]=r();this._textAreaState=h,this._onType.fire(u),this._onCompositionEnd.fire();return}const[l,c]=o(a.data||"");this._textAreaState=l,this._onType.fire(c),($w||On)&&(this._textAreaState=yi.readFromTextArea(this._textArea)),this._onCompositionEnd.fire()})),this._register(K(t.domNode,"input",()=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._isDoingComposition)return;const[a,l]=s(je);l.replacePrevCharCnt===0&&l.text.length===1&&Ri(l.text.charCodeAt(0))||(this._textAreaState=a,this._nextCommand===0?(l.text!==""||l.replacePrevCharCnt!==0)&&this._onType.fire(l):((l.text!==""||l.replacePrevCharCnt!==0)&&this._firePaste(l.text,null),this._nextCommand=0))})),this._register(K(t.domNode,"cut",a=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(a),this._asyncTriggerCut.schedule()})),this._register(K(t.domNode,"copy",a=>{this._ensureClipboardGetsEditorSelection(a)})),this._register(K(t.domNode,"paste",a=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),fp.canUseTextData(a)){const[l,c]=fp.getTextData(a);l!==""&&this._firePaste(l,c)}else this._textArea.getSelectionStart()!==this._textArea.getSelectionEnd()&&this._setAndWriteTextAreaState("paste",yi.EMPTY),this._nextCommand=1})),this._register(K(t.domNode,"focus",()=>{const a=this._hasFocus;this._setHasFocus(!0),vr&&!a&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(K(t.domNode,"blur",()=>{this._isDoingComposition&&(this._isDoingComposition=!1,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(K(t.domNode,kC.Tap,()=>{Ip&&this._isDoingComposition&&(this._isDoingComposition=!1,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return K(document,"selectionchange",t=>{if(!this._hasFocus||this._isDoingComposition||!$w)return;const i=Date.now(),s=i-e;if(e=i,s<5)return;const r=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),r<100||!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;const o=this._textArea.getValue();if(this._textAreaState.value!==o)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),h=this._host.deduceModelPosition(c[0],c[1],c[2]),u=this._textAreaState.deduceEditorPosition(l),d=this._host.deduceModelPosition(u[0],u[1],u[2]),f=new Se(h.lineNumber,h.column,d.lineNumber,d.column);this._onSelectionChangeRequest.fire(f)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){const e=Lg(this.textArea.domNode);e?this._setHasFocus(e.activeElement===this.textArea.domNode):TA(this.textArea.domNode)?this._setHasFocus(document.activeElement===this.textArea.domNode):this._setHasFocus(!1)}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._isDoingComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(fp.canUseTextData(e)),i={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};if(EC.INSTANCE.set(On?t.text.replace(/\r\n/g,`
`):t.text,i),!fp.canUseTextData(e)){this._setAndWriteTextAreaState("copy or cut",yi.selectedText(t.text));return}fp.setTextData(e,t.text,t.html,i)}_firePaste(e,t){t||(t=EC.INSTANCE.get(e)),this._onPaste.fire({text:e,metadata:t})}}class fp{static canUseTextData(e){return!!e.clipboardData}static getTextData(e){if(e.clipboardData){e.preventDefault();const t=e.clipboardData.getData(fr.text);let i=null;const s=e.clipboardData.getData("vscode-editor-data");if(typeof s=="string")try{i=JSON.parse(s),i.version!==1&&(i=null)}catch{}return[t,i]}throw new Error("ClipboardEventUtils.getTextData: Cannot use text data!")}static setTextData(e,t,i,s){if(e.clipboardData){e.clipboardData.setData(fr.text,t),typeof i=="string"&&e.clipboardData.setData("text/html",i),e.clipboardData.setData("vscode-editor-data",JSON.stringify(s)),e.preventDefault();return}throw new Error("ClipboardEventUtils.setTextData: Cannot use text data!")}}class $pe extends q{constructor(e){super(),this._actual=e,this._ignoreSelectionChangeTime=0}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.domNode.value}setValue(e,t){const i=this._actual.domNode;i.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=t)}getSelectionStart(){return this._actual.domNode.selectionDirection==="backward"?this._actual.domNode.selectionEnd:this._actual.domNode.selectionStart}getSelectionEnd(){return this._actual.domNode.selectionDirection==="backward"?this._actual.domNode.selectionStart:this._actual.domNode.selectionEnd}setSelectionRange(e,t,i){const s=this._actual.domNode;let r=null;const o=Lg(s);o?r=o.activeElement:r=document.activeElement;const a=r===s,l=s.selectionStart,c=s.selectionEnd;if(a&&l===t&&c===i){On&&window.parent!==window&&s.focus();return}if(a){this.setIgnoreSelectionChangeTime("setSelectionRange"),s.setSelectionRange(t,i),On&&window.parent!==window&&s.focus();return}try{const h=Aae(s);this.setIgnoreSelectionChangeTime("setSelectionRange"),s.focus(),s.setSelectionRange(t,i),Mae(s,h)}catch{}}}class Upe extends fu{constructor(e,t,i){super(e,t,i),this._register(st.addTarget(this.viewHelper.linesContentDomNode)),this._register(K(this.viewHelper.linesContentDomNode,bt.Tap,r=>this.onTap(r))),this._register(K(this.viewHelper.linesContentDomNode,bt.Change,r=>this.onChange(r))),this._register(K(this.viewHelper.linesContentDomNode,bt.Contextmenu,r=>this._onContextMenu(new du(r,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(K(this.viewHelper.linesContentDomNode,"pointerdown",r=>{const o=r.pointerType;if(o==="mouse"){this._lastPointerType="mouse";return}else o==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const s=new Kue(this.viewHelper.viewDomNode);this._register(s.onPointerMoveThrottled(this.viewHelper.viewDomNode,r=>this._onMouseMove(r),DC(this.mouseTargetFactory),fu.MOUSE_MOVE_MINIMUM_TIME)),this._register(s.onPointerUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(s.onPointerLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r))),this._register(s.onPointerDown(this.viewHelper.viewDomNode,r=>this._onMouseDown(r)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new du(e,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1})}onChange(e){this._lastPointerType==="touch"&&this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e)}}class jpe extends fu{constructor(e,t,i){super(e,t,i),this._register(st.addTarget(this.viewHelper.linesContentDomNode)),this._register(K(this.viewHelper.linesContentDomNode,bt.Tap,s=>this.onTap(s))),this._register(K(this.viewHelper.linesContentDomNode,bt.Change,s=>this.onChange(s))),this._register(K(this.viewHelper.linesContentDomNode,bt.Contextmenu,s=>this._onContextMenu(new du(s,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new du(e,this.viewHelper.viewDomNode),!1);if(t.position){const i=document.createEvent("CustomEvent");i.initEvent(kC.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(i),this.viewController.moveTo(t.position)}}onChange(e){this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}}class qpe extends q{constructor(e,t,i){super(),cc&&l1.pointerEvents?this.handler=this._register(new Upe(e,t,i)):window.TouchEvent?this.handler=this._register(new jpe(e,t,i)):this.handler=this._register(new fu(e,t,i))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class Rg extends B0{}class Zf extends Rg{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new P(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(58);const t=e.get(59);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(83);const i=e.get(129);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(t);let i=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,i=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(i=!0),i}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const t=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new P(e,1));if(t.column!==1)return"";const i=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(i);if(this._renderLineNumbers===2){const s=Math.abs(this._lastCursorModelPosition.lineNumber-i);return s===0?'<span class="relative-current-line-number">'+i+"</span>":String(s)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===i||i%10===0?String(i):"":String(i)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=Fn?this._lineHeight%2===0?" lh-even":" lh-odd":"",i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,r='<div class="'+Zf.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">',o=this._context.model.getLineCount(),a=[];for(let l=i;l<=s;l++){const c=l-i;if(!this._renderFinalNewline&&l===o&&this._context.model.getLineLength(l)===0){a[c]="";continue}const h=this._getLineRenderLineNumber(l);h?l===this._activeLineNumber?a[c]='<div class="active-line-number '+Zf.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+h+"</div>":a[c]=r+h+"</div>":a[c]=""}this._renderResult=a}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}Zf.CLASS_NAME="line-numbers";kt((n,e)=>{const t=n.getColor(XW);t&&e.addRule(`.monaco-editor .line-numbers { color: ${t}; }`);const i=n.getColor(Kge);i&&e.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${i}; }`)});class gu extends Gs{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(129);this._canUseLayerHinting=!t.get(28),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._domNode=Ye(document.createElement("div")),this._domNode.setClassName(gu.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=Ye(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(gu.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(129);return this._canUseLayerHinting=!t.get(28),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}}gu.CLASS_NAME="glyph-margin";gu.OUTER_CLASS_NAME="margin";const $h="monaco-mouse-cursor-text";class F2{constructor(e,t,i){this._visibleTextAreaBrand=void 0,this.top=e,this.left=t,this.width=i}setWidth(e){return new F2(this.top,this.left,e)}}const gp=On;class Kpe extends Gs{constructor(e,t,i){super(e),this._primaryCursorPosition=new P(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._viewHelper=i,this._scrollLeft=0,this._scrollTop=0;const s=this._context.configuration.options,r=s.get(129);this._setAccessibilityOptions(s),this._contentLeft=r.contentLeft,this._contentWidth=r.contentWidth,this._contentHeight=r.height,this._fontInfo=s.get(43),this._lineHeight=s.get(58),this._emptySelectionClipboard=s.get(32),this._copyWithSyntaxHighlighting=s.get(21),this._visibleTextArea=null,this._selections=[new Se(1,1,1,1)],this._modelSelections=[new Se(1,1,1,1)],this._lastRenderPosition=null,this.textArea=Ye(document.createElement("textarea")),aa.write(this.textArea,6),this.textArea.setClassName(`inputarea ${$h}`),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(s)),this.textArea.setAttribute("tabindex",String(s.get(111))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",m("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),s.get(30)&&s.get(80)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=Ye(document.createElement("div")),this.textAreaCover.setPosition("absolute");const o={getLineCount:()=>this._context.model.getLineCount(),getLineMaxColumn:l=>this._context.model.getLineMaxColumn(l),getValueInRange:(l,c)=>this._context.model.getValueInRange(l,c)},a={getDataToCopy:l=>{const c=this._context.model.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,Zi),h=this._context.model.getEOL(),u=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),d=Array.isArray(c)?c:null,f=Array.isArray(c)?c.join(h):c;let g,p=null;if(l&&this._copyWithSyntaxHighlighting&&f.length<65536){const _=this._context.model.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);_&&(g=_.html,p=_.mode)}return{isFromEmptySelection:u,multicursorText:d,text:f,html:g,mode:p}},getScreenReaderContent:l=>{if(this._accessibilitySupport===1){if(je){const c=this._selections[0];if(c.isEmpty()){const h=c.getStartPosition();let u=this._getWordBeforePosition(h);if(u.length===0&&(u=this._getCharacterBeforePosition(h)),u.length>0)return new yi(u,u.length,u.length,h,h)}}return yi.EMPTY}if(Ip){const c=this._selections[0];if(c.isEmpty()){const h=c.getStartPosition(),[u,d]=this._getAndroidWordAtPosition(h);if(u.length>0)return new yi(u,d,d,h,h)}return yi.EMPTY}return Hd.fromEditorSelection(l,o,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(l,c,h)=>this._context.model.deduceModelPositionRelativeToViewPosition(l,c,h)};this._textAreaInput=this._register(new Hpe(a,this.textArea)),this._register(this._textAreaInput.onKeyDown(l=>{this._viewController.emitKeyDown(l)})),this._register(this._textAreaInput.onKeyUp(l=>{this._viewController.emitKeyUp(l)})),this._register(this._textAreaInput.onPaste(l=>{let c=!1,h=null,u=null;l.metadata&&(c=this._emptySelectionClipboard&&!!l.metadata.isFromEmptySelection,h=typeof l.metadata.multicursorText!="undefined"?l.metadata.multicursorText:null,u=l.metadata.mode),this._viewController.paste(l.text,c,h,u)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(l=>{l.replacePrevCharCnt||l.replaceNextCharCnt||l.positionDelta?this._viewController.compositionType(l.text,l.replacePrevCharCnt,l.replaceNextCharCnt,l.positionDelta):this._viewController.type(l.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(l=>{this._viewController.setSelection(l)})),this._register(this._textAreaInput.onCompositionStart(l=>{const c=this._selections[0].startLineNumber,h=this._selections[0].startColumn+l.revealDeltaColumns;this._context.model.revealRange("keyboard",!0,new I(c,h,c,h),0,1);const u=this._viewHelper.visibleRangeForPositionRelativeToEditor(c,h);u&&(this._visibleTextArea=new F2(this._context.viewLayout.getVerticalOffsetForLineNumber(c),u.left,gp?0:1),this._render()),this.textArea.setClassName(`inputarea ${$h} ime-input`),this._viewController.compositionStart(),this._context.model.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(l=>{!this._visibleTextArea||(this._visibleTextArea=this._visibleTextArea.setWidth(Gpe(l.data,this._fontInfo)),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName(`inputarea ${$h}`),this._viewController.compositionEnd(),this._context.model.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.model.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.model.setHasFocus(!1)}))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',i=this._context.model.getLineContent(e.lineNumber),s=jf(t);let r=!0,o=e.column,a=!0,l=e.column,c=0;for(;c<50&&(r||a);){if(r&&o<=1&&(r=!1),r){const h=i.charCodeAt(o-2);s.get(h)!==0?r=!1:o--}if(a&&l>i.length&&(a=!1),a){const h=i.charCodeAt(l-1);s.get(h)!==0?a=!1:l++}c++}return[i.substring(o-1,l-1),e.column-o]}_getWordBeforePosition(e){const t=this._context.model.getLineContent(e.lineNumber),i=jf(this._context.configuration.options.get(115));let s=e.column,r=0;for(;s>1;){const o=t.charCodeAt(s-2);if(i.get(o)!==0||r>50)return t.substring(s-1,e.column-1);r++,s--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const i=this._context.model.getLineContent(e.lineNumber).charAt(e.column-2);if(!Ri(i.charCodeAt(0)))return i}return""}_getAriaLabel(e){return e.get(2)===1?m("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",Fn?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===Au.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(129);return this._setAccessibilityOptions(t),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=t.get(43),this._lineHeight=t.get(58),this._emptySelectionClipboard=t.get(32),this._copyWithSyntaxHighlighting=t.get(21),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("tabindex",String(t.get(111))),(e.hasChanged(30)||e.hasChanged(80))&&(t.get(30)&&t.get(80)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}prepareRender(e){this._primaryCursorPosition=new P(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea){this._renderInsideEditor(null,this._visibleTextArea.top-this._scrollTop,this._contentLeft+this._visibleTextArea.left-this._scrollLeft,this._visibleTextArea.width,this._lineHeight);return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(je){this._renderInsideEditor(this._primaryCursorPosition,t,e,gp?0:1,this._lineHeight);return}this._renderInsideEditor(this._primaryCursorPosition,t,e,gp?0:1,gp?0:1)}_renderInsideEditor(e,t,i,s,r){this._lastRenderPosition=e;const o=this.textArea,a=this.textAreaCover;Qi.applyFontInfo(o,this._fontInfo),o.setTop(t),o.setLeft(i),o.setWidth(s),o.setHeight(r),a.setTop(0),a.setLeft(0),a.setWidth(0),a.setHeight(0)}_renderAtTopLeft(){this._lastRenderPosition=null;const e=this.textArea,t=this.textAreaCover;if(Qi.applyFontInfo(e,this._fontInfo),e.setTop(0),e.setLeft(0),t.setTop(0),t.setLeft(0),gp){e.setWidth(0),e.setHeight(0),t.setWidth(0),t.setHeight(0);return}e.setWidth(1),e.setHeight(1),t.setWidth(1),t.setHeight(1);const i=this._context.configuration.options;i.get(49)?t.setClassName("monaco-editor-background textAreaCover "+gu.OUTER_CLASS_NAME):i.get(59).renderType!==0?t.setClassName("monaco-editor-background textAreaCover "+Zf.CLASS_NAME):t.setClassName("monaco-editor-background textAreaCover")}}function Gpe(n,e){const i=document.createElement("canvas").getContext("2d");i.font=Ype(e);const s=i.measureText(n);return On?s.width+2:s.width}function Ype(n){return Zpe("normal",n.fontWeight,n.fontSize,n.lineHeight,n.fontFamily)}function Zpe(n,e,t,i,s){return`${n} normal ${e} ${t}px / ${i}px ${s}`}class rh{static columnSelect(e,t,i,s,r,o){let a=Math.abs(r-i)+1,l=i>r,c=s>o,h=s<o,u=[];for(let d=0;d<a;d++){let f=i+(l?-d:d),g=rt.columnFromVisibleColumn2(e,t,f,s),p=rt.columnFromVisibleColumn2(e,t,f,o),_=rt.visibleColumnFromColumn2(e,t,new P(f,g)),v=rt.visibleColumnFromColumn2(e,t,new P(f,p));h&&(_>o||v<s)||c&&(v>s||_<o)||u.push(new Ni(new I(f,g,f,g),0,new P(f,p),0))}if(u.length===0)for(let d=0;d<a;d++){const f=i+(l?-d:d),g=t.getLineMaxColumn(f);u.push(new Ni(new I(f,g,f,g),0,new P(f,g),0))}return{viewStates:u,reversed:l,fromLineNumber:i,fromVisualColumn:s,toLineNumber:r,toVisualColumn:o}}static columnSelectLeft(e,t,i){let s=i.toViewVisualColumn;return s>0&&s--,rh.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,s)}static columnSelectRight(e,t,i){let s=0;const r=Math.min(i.fromViewLineNumber,i.toViewLineNumber),o=Math.max(i.fromViewLineNumber,i.toViewLineNumber);for(let l=r;l<=o;l++){const c=t.getLineMaxColumn(l),h=rt.visibleColumnFromColumn2(e,t,new P(l,c));s=Math.max(s,h)}let a=i.toViewVisualColumn;return a<s&&a++,this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,a)}static columnSelectUp(e,t,i,s){const r=s?e.pageSize:1,o=Math.max(1,i.toViewLineNumber-r);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,o,i.toViewVisualColumn)}static columnSelectDown(e,t,i,s){const r=s?e.pageSize:1,o=Math.min(t.getLineCount(),i.toViewLineNumber+r);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,o,i.toViewVisualColumn)}}class En{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let s=t.getInverseEditOperations()[0].range;return new Se(s.endLineNumber,s.endColumn,s.endLineNumber,s.endColumn)}}class Vb{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let s=t.getInverseEditOperations()[0].range;return new Se(s.startLineNumber,s.startColumn,s.startLineNumber,s.startColumn)}}class jv{constructor(e,t,i,s,r=!1){this._range=e,this._text=t,this._columnDeltaOffset=s,this._lineNumberDeltaOffset=i,this.insertsAutoWhitespace=r}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let s=t.getInverseEditOperations()[0].range;return new Se(s.endLineNumber+this._lineNumberDeltaOffset,s.endColumn+this._columnDeltaOffset,s.endLineNumber+this._lineNumberDeltaOffset,s.endColumn+this._columnDeltaOffset)}}class cz{constructor(e,t,i,s=!1){this._range=e,this._text=t,this._initialSelection=i,this._forceMoveMarkers=s,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class rD{constructor(e,t,i){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=i}}class Je{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-Uae(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const i=t.lineNumber-1;return new P(i,e.getLineMaxColumn(i))}else return t}static leftPositionAtomicSoftTabs(e,t,i){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const s=e.getLineMinColumn(t.lineNumber),r=e.getLineContent(t.lineNumber),o=w_.atomicPosition(r,t.column-1,i,0);if(o!==-1&&o+1>=s)return new P(t.lineNumber,o+1)}return this.leftPosition(e,t)}static left(e,t,i){const s=e.stickyTabStops?Je.leftPositionAtomicSoftTabs(t,i,e.tabSize):Je.leftPosition(t,i);return new rD(s.lineNumber,s.column,0)}static moveLeft(e,t,i,s,r){let o,a;if(i.hasSelection()&&!s)o=i.selection.startLineNumber,a=i.selection.startColumn;else{const l=i.position.delta(void 0,-(r-1)),c=t.normalizePosition(Je.clipPositionColumn(l,t),0),h=Je.left(e,t,c);o=h.lineNumber,a=h.column}return i.move(s,o,a,0)}static clipPositionColumn(e,t){return new P(e.lineNumber,Je.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,i){return e<t?t:e>i?i:e}static rightPosition(e,t,i){return i<e.getLineMaxColumn(t)?i=i+qw(e.getLineContent(t),i-1):t<e.getLineCount()&&(t=t+1,i=e.getLineMinColumn(t)),new P(t,i)}static rightPositionAtomicSoftTabs(e,t,i,s,r){if(i<e.getLineIndentColumn(t)){const o=e.getLineContent(t),a=w_.atomicPosition(o,i-1,s,1);if(a!==-1)return new P(t,a+1)}return this.rightPosition(e,t,i)}static right(e,t,i){const s=e.stickyTabStops?Je.rightPositionAtomicSoftTabs(t,i.lineNumber,i.column,e.tabSize,e.indentSize):Je.rightPosition(t,i.lineNumber,i.column);return new rD(s.lineNumber,s.column,0)}static moveRight(e,t,i,s,r){let o,a;if(i.hasSelection()&&!s)o=i.selection.endLineNumber,a=i.selection.endColumn;else{const l=i.position.delta(void 0,r-1),c=t.normalizePosition(Je.clipPositionColumn(l,t),1),h=Je.right(e,t,c);o=h.lineNumber,a=h.column}return i.move(s,o,a,0)}static vertical(e,t,i,s,r,o,a){const l=rt.visibleColumnFromColumn(t.getLineContent(i),s,e.tabSize)+r,c=t.getLineCount(),h=i===1&&s===1,u=i===c&&s===t.getLineMaxColumn(i),d=o<i?h:u;return i=o,i<1?(i=1,a?s=t.getLineMinColumn(i):s=Math.min(t.getLineMaxColumn(i),s)):i>c?(i=c,a?s=t.getLineMaxColumn(i):s=Math.min(t.getLineMaxColumn(i),s)):s=rt.columnFromVisibleColumn2(e,t,i,l),d?r=0:r=l-rt.visibleColumnFromColumn(t.getLineContent(i),s,e.tabSize),new rD(i,s,r)}static down(e,t,i,s,r,o,a){return this.vertical(e,t,i,s,r,i+o,a)}static moveDown(e,t,i,s,r){let o,a;i.hasSelection()&&!s?(o=i.selection.endLineNumber,a=i.selection.endColumn):(o=i.position.lineNumber,a=i.position.column);let l=Je.down(e,t,o,a,i.leftoverVisibleColumns,r,!0);return i.move(s,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateDown(e,t,i){let s=i.selection,r=Je.down(e,t,s.selectionStartLineNumber,s.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),o=Je.down(e,t,s.positionLineNumber,s.positionColumn,i.leftoverVisibleColumns,1,!1);return new Ni(new I(r.lineNumber,r.column,r.lineNumber,r.column),r.leftoverVisibleColumns,new P(o.lineNumber,o.column),o.leftoverVisibleColumns)}static up(e,t,i,s,r,o,a){return this.vertical(e,t,i,s,r,i-o,a)}static moveUp(e,t,i,s,r){let o,a;i.hasSelection()&&!s?(o=i.selection.startLineNumber,a=i.selection.startColumn):(o=i.position.lineNumber,a=i.position.column);let l=Je.up(e,t,o,a,i.leftoverVisibleColumns,r,!0);return i.move(s,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,i){let s=i.selection,r=Je.up(e,t,s.selectionStartLineNumber,s.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),o=Je.up(e,t,s.positionLineNumber,s.positionColumn,i.leftoverVisibleColumns,1,!1);return new Ni(new I(r.lineNumber,r.column,r.lineNumber,r.column),r.leftoverVisibleColumns,new P(o.lineNumber,o.column),o.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,i,s){let r=i.position.lineNumber;for(;r>1&&this._isBlankLine(t,r);)r--;for(;r>1&&!this._isBlankLine(t,r);)r--;return i.move(s,r,t.getLineMinColumn(r),0)}static moveToNextBlankLine(e,t,i,s){const r=t.getLineCount();let o=i.position.lineNumber;for(;o<r&&this._isBlankLine(t,o);)o++;for(;o<r&&!this._isBlankLine(t,o);)o++;return i.move(s,o,t.getLineMinColumn(o),0)}static moveToBeginningOfLine(e,t,i,s){let r=i.position.lineNumber,o=t.getLineMinColumn(r),a=t.getLineFirstNonWhitespaceColumn(r)||o,l;return i.position.column===a?l=o:l=a,i.move(s,r,l,0)}static moveToEndOfLine(e,t,i,s,r){let o=i.position.lineNumber,a=t.getLineMaxColumn(o);return i.move(s,o,a,r?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,i,s){return i.move(s,1,1,0)}static moveToEndOfBuffer(e,t,i,s){let r=t.getLineCount(),o=t.getLineMaxColumn(r);return i.move(s,r,o,0)}}class pu{static deleteRight(e,t,i,s){let r=[],o=e!==3;for(let a=0,l=s.length;a<l;a++){const c=s[a];let h=c;if(h.isEmpty()){let u=c.getPosition(),d=Je.right(t,i,u);h=new I(d.lineNumber,d.column,u.lineNumber,u.column)}if(h.isEmpty()){r[a]=null;continue}h.startLineNumber!==h.endLineNumber&&(o=!0),r[a]=new En(h,"")}return[o,r]}static isAutoClosingPairDelete(e,t,i,s,r,o,a){if(t==="never"&&i==="never"||e==="never")return!1;for(let l=0,c=o.length;l<c;l++){const h=o[l],u=h.getPosition();if(!h.isEmpty())return!1;const d=r.getLineContent(u.lineNumber);if(u.column<2||u.column>=d.length+1)return!1;const f=d.charAt(u.column-2),g=s.get(f);if(!g)return!1;if(Td(f)){if(i==="never")return!1}else if(t==="never")return!1;const p=d.charAt(u.column-1);let _=!1;for(const v of g)v.open===f&&v.close===p&&(_=!0);if(!_)return!1;if(e==="auto"){let v=!1;for(let b=0,w=a.length;b<w;b++){const C=a[b];if(u.lineNumber===C.startLineNumber&&u.column===C.startColumn){v=!0;break}}if(!v)return!1}}return!0}static _runAutoClosingPairDelete(e,t,i){let s=[];for(let r=0,o=i.length;r<o;r++){const a=i[r].getPosition(),l=new I(a.lineNumber,a.column-1,a.lineNumber,a.column+1);s[r]=new En(l,"")}return[!0,s]}static deleteLeft(e,t,i,s,r){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,i,s,r))return this._runAutoClosingPairDelete(t,i,s);const o=[];let a=e!==2;for(let l=0,c=s.length;l<c;l++){let h=pu.getDeleteRange(s[l],i,t);if(h.isEmpty()){o[l]=null;continue}h.startLineNumber!==h.endLineNumber&&(a=!0),o[l]=new En(h,"")}return[a,o]}static getDeleteRange(e,t,i){if(!e.isEmpty())return e;const s=e.getPosition();if(i.useTabStops&&s.column>1){const r=t.getLineContent(s.lineNumber),o=Jn(r),a=o===-1?r.length+1:o+1;if(s.column<=a){const l=rt.visibleColumnFromColumn2(i,t,s),c=rt.prevIndentTabStop(l,i.indentSize),h=rt.columnFromVisibleColumn2(i,t,s.lineNumber,c);return new I(s.lineNumber,h,s.lineNumber,s.column)}}return I.fromPositions(pu.getPositionAfterDeleteLeft(s,t),s)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const i=Jae(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,i+1)}else if(e.lineNumber>1){const i=e.lineNumber-1;return new P(i,t.getLineMaxColumn(i))}else return e}static cut(e,t,i){let s=[],r=null;i.sort((o,a)=>P.compare(o.getStartPosition(),a.getEndPosition()));for(let o=0,a=i.length;o<a;o++){const l=i[o];if(l.isEmpty())if(e.emptySelectionClipboard){let c=l.getPosition(),h,u,d,f;c.lineNumber<t.getLineCount()?(h=c.lineNumber,u=1,d=c.lineNumber+1,f=1):c.lineNumber>1&&(r==null?void 0:r.endLineNumber)!==c.lineNumber?(h=c.lineNumber-1,u=t.getLineMaxColumn(c.lineNumber-1),d=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber)):(h=c.lineNumber,u=1,d=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber));let g=new I(h,u,d,f);r=g,g.isEmpty()?s[o]=null:s[o]=new En(g,"")}else s[o]=null;else s[o]=new En(l,"")}return new Gn(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class $t{static _createWord(e,t,i,s,r){return{start:s,end:r,wordType:t,nextCharClass:i}}static _findPreviousWordOnLine(e,t,i){let s=t.getLineContent(i.lineNumber);return this._doFindPreviousWordOnLine(s,e,i)}static _doFindPreviousWordOnLine(e,t,i){let s=0;for(let r=i.column-2;r>=0;r--){let o=e.charCodeAt(r),a=t.get(o);if(a===0){if(s===2)return this._createWord(e,s,a,r+1,this._findEndOfWord(e,t,s,r+1));s=1}else if(a===2){if(s===1)return this._createWord(e,s,a,r+1,this._findEndOfWord(e,t,s,r+1));s=2}else if(a===1&&s!==0)return this._createWord(e,s,a,r+1,this._findEndOfWord(e,t,s,r+1))}return s!==0?this._createWord(e,s,1,0,this._findEndOfWord(e,t,s,0)):null}static _findEndOfWord(e,t,i,s){let r=e.length;for(let o=s;o<r;o++){let a=e.charCodeAt(o),l=t.get(a);if(l===1||i===1&&l===2||i===2&&l===0)return o}return r}static _findNextWordOnLine(e,t,i){let s=t.getLineContent(i.lineNumber);return this._doFindNextWordOnLine(s,e,i)}static _doFindNextWordOnLine(e,t,i){let s=0,r=e.length;for(let o=i.column-1;o<r;o++){let a=e.charCodeAt(o),l=t.get(a);if(l===0){if(s===2)return this._createWord(e,s,l,this._findStartOfWord(e,t,s,o-1),o);s=1}else if(l===2){if(s===1)return this._createWord(e,s,l,this._findStartOfWord(e,t,s,o-1),o);s=2}else if(l===1&&s!==0)return this._createWord(e,s,l,this._findStartOfWord(e,t,s,o-1),o)}return s!==0?this._createWord(e,s,1,this._findStartOfWord(e,t,s,r-1),r):null}static _findStartOfWord(e,t,i,s){for(let r=s;r>=0;r--){let o=e.charCodeAt(r),a=t.get(o);if(a===1||i===1&&a===2||i===2&&a===0)return r+1}return 0}static moveWordLeft(e,t,i,s){let r=i.lineNumber,o=i.column;o===1&&r>1&&(r=r-1,o=t.getLineMaxColumn(r));let a=$t._findPreviousWordOnLine(e,t,new P(r,o));if(s===0)return new P(r,a?a.start+1:1);if(s===1)return a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=$t._findPreviousWordOnLine(e,t,new P(r,a.start+1))),new P(r,a?a.start+1:1);if(s===3){for(;a&&a.wordType===2;)a=$t._findPreviousWordOnLine(e,t,new P(r,a.start+1));return new P(r,a?a.start+1:1)}return a&&o<=a.end+1&&(a=$t._findPreviousWordOnLine(e,t,new P(r,a.start+1))),new P(r,a?a.end+1:1)}static _moveWordPartLeft(e,t){const i=t.lineNumber,s=e.getLineMaxColumn(i);if(t.column===1)return i>1?new P(i-1,e.getLineMaxColumn(i-1)):t;const r=e.getLineContent(i);for(let o=t.column-1;o>1;o--){const a=r.charCodeAt(o-2),l=r.charCodeAt(o-1);if(a===95&&l!==95)return new P(i,o);if(Pd(a)&&Tl(l))return new P(i,o);if(Tl(a)&&Tl(l)&&o+1<s){const c=r.charCodeAt(o);if(Pd(c))return new P(i,o)}}return new P(i,1)}static moveWordRight(e,t,i,s){let r=i.lineNumber,o=i.column,a=!1;o===t.getLineMaxColumn(r)&&r<t.getLineCount()&&(a=!0,r=r+1,o=1);let l=$t._findNextWordOnLine(e,t,new P(r,o));if(s===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=$t._findNextWordOnLine(e,t,new P(r,l.end+1))),l?o=l.end+1:o=t.getLineMaxColumn(r);else if(s===3){for(a&&(o=0);l&&(l.wordType===2||l.start+1<=o);)l=$t._findNextWordOnLine(e,t,new P(r,l.end+1));l?o=l.start+1:o=t.getLineMaxColumn(r)}else l&&!a&&o>=l.start+1&&(l=$t._findNextWordOnLine(e,t,new P(r,l.end+1))),l?o=l.start+1:o=t.getLineMaxColumn(r);return new P(r,o)}static _moveWordPartRight(e,t){const i=t.lineNumber,s=e.getLineMaxColumn(i);if(t.column===s)return i<e.getLineCount()?new P(i+1,1):t;const r=e.getLineContent(i);for(let o=t.column+1;o<s;o++){const a=r.charCodeAt(o-2),l=r.charCodeAt(o-1);if(a!==95&&l===95)return new P(i,o);if(Pd(a)&&Tl(l))return new P(i,o);if(Tl(a)&&Tl(l)&&o+1<s){const c=r.charCodeAt(o);if(Pd(c))return new P(i,o)}}return new P(i,s)}static _deleteWordLeftWhitespace(e,t){const i=e.getLineContent(t.lineNumber),s=t.column-2,r=kg(i,s);return r+1<s?new I(t.lineNumber,r+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const i=e.wordSeparators,s=e.model,r=e.selection,o=e.whitespaceHeuristics;if(!r.isEmpty())return r;if(pu.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const u=e.selection.getPosition();return new I(u.lineNumber,u.column-1,u.lineNumber,u.column+1)}const a=new P(r.positionLineNumber,r.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(o){let u=this._deleteWordLeftWhitespace(s,a);if(u)return u}let h=$t._findPreviousWordOnLine(i,s,a);return t===0?h?c=h.start+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l)):(h&&c<=h.end+1&&(h=$t._findPreviousWordOnLine(i,s,new P(l,h.start+1))),h?c=h.end+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l))),new I(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,i){if(!i.isEmpty())return i;const s=new P(i.positionLineNumber,i.positionColumn);let r=this._deleteInsideWordWhitespace(t,s);return r||this._deleteInsideWordDetermineDeleteRange(e,t,s)}static _charAtIsWhitespace(e,t){const i=e.charCodeAt(t);return i===32||i===9}static _deleteInsideWordWhitespace(e,t){const i=e.getLineContent(t.lineNumber),s=i.length;if(s===0)return null;let r=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(i,r))return null;let o=Math.min(t.column-1,s-1);if(!this._charAtIsWhitespace(i,o))return null;for(;r>0&&this._charAtIsWhitespace(i,r-1);)r--;for(;o+1<s&&this._charAtIsWhitespace(i,o+1);)o++;return new I(t.lineNumber,r+1,t.lineNumber,o+2)}static _deleteInsideWordDetermineDeleteRange(e,t,i){const s=t.getLineContent(i.lineNumber),r=s.length;if(r===0)return i.lineNumber>1?new I(i.lineNumber-1,t.getLineMaxColumn(i.lineNumber-1),i.lineNumber,1):i.lineNumber<t.getLineCount()?new I(i.lineNumber,1,i.lineNumber+1,1):new I(i.lineNumber,1,i.lineNumber,1);const o=u=>u.start+1<=i.column&&i.column<=u.end+1,a=(u,d)=>(u=Math.min(u,i.column),d=Math.max(d,i.column),new I(i.lineNumber,u,i.lineNumber,d)),l=u=>{let d=u.start+1,f=u.end+1,g=!1;for(;f-1<r&&this._charAtIsWhitespace(s,f-1);)g=!0,f++;if(!g)for(;d>1&&this._charAtIsWhitespace(s,d-2);)d--;return a(d,f)},c=$t._findPreviousWordOnLine(e,t,i);if(c&&o(c))return l(c);const h=$t._findNextWordOnLine(e,t,i);return h&&o(h)?l(h):c&&h?a(c.end+1,h.start+1):c?a(c.start+1,c.end+1):h?a(h.start+1,h.end+1):a(1,r+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),s=$t._moveWordPartLeft(e,i);return new I(i.lineNumber,i.column,s.lineNumber,s.column)}static _findFirstNonWhitespaceChar(e,t){let i=e.length;for(let s=t;s<i;s++){let r=e.charAt(s);if(r!==" "&&r!=="	")return s}return i}static _deleteWordRightWhitespace(e,t){const i=e.getLineContent(t.lineNumber),s=t.column-1,r=this._findFirstNonWhitespaceChar(i,s);return s+1<r?new I(t.lineNumber,t.column,t.lineNumber,r+1):null}static deleteWordRight(e,t){const i=e.wordSeparators,s=e.model,r=e.selection,o=e.whitespaceHeuristics;if(!r.isEmpty())return r;const a=new P(r.positionLineNumber,r.positionColumn);let l=a.lineNumber,c=a.column;const h=s.getLineCount(),u=s.getLineMaxColumn(l);if(l===h&&c===u)return null;if(o){let f=this._deleteWordRightWhitespace(s,a);if(f)return f}let d=$t._findNextWordOnLine(i,s,a);return t===2?d?c=d.end+1:c<u||l===h?c=u:(l++,d=$t._findNextWordOnLine(i,s,new P(l,1)),d?c=d.start+1:c=s.getLineMaxColumn(l)):(d&&c>=d.start+1&&(d=$t._findNextWordOnLine(i,s,new P(l,d.end+1))),d?c=d.start+1:c<u||l===h?c=u:(l++,d=$t._findNextWordOnLine(i,s,new P(l,1)),d?c=d.start+1:c=s.getLineMaxColumn(l))),new I(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),s=$t._moveWordPartRight(e,i);return new I(i.lineNumber,i.column,s.lineNumber,s.column)}static _createWordAtPosition(e,t,i){const s=new I(t,i.start+1,t,i.end+1);return{word:e.getValueInRange(s),startColumn:s.startColumn,endColumn:s.endColumn}}static getWordAtPosition(e,t,i){const s=jf(t),r=$t._findPreviousWordOnLine(s,e,i);if(r&&r.wordType===1&&r.start<=i.column-1&&i.column-1<=r.end)return $t._createWordAtPosition(e,i.lineNumber,r);const o=$t._findNextWordOnLine(s,e,i);return o&&o.wordType===1&&o.start<=i.column-1&&i.column-1<=o.end?$t._createWordAtPosition(e,i.lineNumber,o):null}static word(e,t,i,s,r){const o=jf(e.wordSeparators);let a=$t._findPreviousWordOnLine(o,t,r),l=$t._findNextWordOnLine(o,t,r);if(!s){let f,g;return a&&a.wordType===1&&a.start<=r.column-1&&r.column-1<=a.end?(f=a.start+1,g=a.end+1):l&&l.wordType===1&&l.start<=r.column-1&&r.column-1<=l.end?(f=l.start+1,g=l.end+1):(a?f=a.end+1:f=1,l?g=l.start+1:g=t.getLineMaxColumn(r.lineNumber)),new Ni(new I(r.lineNumber,f,r.lineNumber,g),0,new P(r.lineNumber,g),0)}let c,h;a&&a.wordType===1&&a.start<r.column-1&&r.column-1<a.end?(c=a.start+1,h=a.end+1):l&&l.wordType===1&&l.start<r.column-1&&r.column-1<l.end?(c=l.start+1,h=l.end+1):(c=r.column,h=r.column);let u=r.lineNumber,d;if(i.selectionStart.containsPosition(r))d=i.selectionStart.endColumn;else if(r.isBeforeOrEqual(i.selectionStart.getStartPosition())){d=c;let f=new P(u,d);i.selectionStart.containsPosition(f)&&(d=i.selectionStart.endColumn)}else{d=h;let f=new P(u,d);i.selectionStart.containsPosition(f)&&(d=i.selectionStart.startColumn)}return i.move(!0,u,d,0)}}class Ii{static addCursorDown(e,t,i){let s=[],r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];s[r++]=new Me(l.modelState,l.viewState),i?s[r++]=Me.fromModelState(Je.translateDown(e.cursorConfig,e.model,l.modelState)):s[r++]=Me.fromViewState(Je.translateDown(e.cursorConfig,e,l.viewState))}return s}static addCursorUp(e,t,i){let s=[],r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];s[r++]=new Me(l.modelState,l.viewState),i?s[r++]=Me.fromModelState(Je.translateUp(e.cursorConfig,e.model,l.modelState)):s[r++]=Me.fromViewState(Je.translateUp(e.cursorConfig,e,l.viewState))}return s}static moveToBeginningOfLine(e,t,i){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=this._moveToLineStart(e,a,i)}return s}static _moveToLineStart(e,t,i){const s=t.viewState.position.column,r=t.modelState.position.column,o=s===r,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!o&&!(s===l)?this._moveToLineStartByView(e,t,i):this._moveToLineStartByModel(e,t,i)}static _moveToLineStartByView(e,t,i){return Me.fromViewState(Je.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,i))}static _moveToLineStartByModel(e,t,i){return Me.fromModelState(Je.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,i))}static moveToEndOfLine(e,t,i,s){let r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=this._moveToLineEnd(e,l,i,s)}return r}static _moveToLineEnd(e,t,i,s){const r=t.viewState.position,o=e.getLineMaxColumn(r.lineNumber),a=r.column===o,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),h=o-r.column===c-l.column;return a||h?this._moveToLineEndByModel(e,t,i,s):this._moveToLineEndByView(e,t,i,s)}static _moveToLineEndByView(e,t,i,s){return Me.fromViewState(Je.moveToEndOfLine(e.cursorConfig,e,t.viewState,i,s))}static _moveToLineEndByModel(e,t,i,s){return Me.fromModelState(Je.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,i,s))}static expandLineSelection(e,t){let i=[];for(let s=0,r=t.length;s<r;s++){const o=t[s],a=o.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=o.modelState.selection.endLineNumber,h;c===l?h=e.model.getLineMaxColumn(l):(c++,h=1),i[s]=Me.fromModelState(new Ni(new I(a,1,a,1),0,new P(c,h),0))}return i}static moveToBeginningOfBuffer(e,t,i){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=Me.fromModelState(Je.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return s}static moveToEndOfBuffer(e,t,i){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=Me.fromModelState(Je.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return s}static selectAll(e,t){const i=e.model.getLineCount(),s=e.model.getLineMaxColumn(i);return Me.fromModelState(new Ni(new I(1,1,1,1),0,new P(i,s),0))}static line(e,t,i,s,r){const o=e.model.validatePosition(s),a=r?e.coordinatesConverter.validateViewPosition(new P(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);if(!i||!t.modelState.hasSelection()){const c=e.model.getLineCount();let h=o.lineNumber+1,u=1;return h>c&&(h=c,u=e.model.getLineMaxColumn(h)),Me.fromModelState(new Ni(new I(o.lineNumber,1,h,u),0,new P(h,u),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(o.lineNumber<l)return Me.fromViewState(t.viewState.move(t.modelState.hasSelection(),a.lineNumber,1,0));if(o.lineNumber>l){const c=e.getLineCount();let h=a.lineNumber+1,u=1;return h>c&&(h=c,u=e.getLineMaxColumn(h)),Me.fromViewState(t.viewState.move(t.modelState.hasSelection(),h,u,0))}else{const c=t.modelState.selectionStart.getEndPosition();return Me.fromModelState(t.modelState.move(t.modelState.hasSelection(),c.lineNumber,c.column,0))}}static word(e,t,i,s){const r=e.model.validatePosition(s);return Me.fromModelState($t.word(e.cursorConfig,e.model,t.modelState,i,r))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new Me(t.modelState,t.viewState);const i=t.viewState.position.lineNumber,s=t.viewState.position.column;return Me.fromViewState(new Ni(new I(i,s,i,s),0,new P(i,s),0))}static moveTo(e,t,i,s,r){const o=e.model.validatePosition(s),a=r?e.coordinatesConverter.validateViewPosition(new P(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);return Me.fromViewState(t.viewState.move(i,a.lineNumber,a.column,0))}static simpleMove(e,t,i,s,r,o){switch(i){case 0:return o===4?this._moveHalfLineLeft(e,t,s):this._moveLeft(e,t,s,r);case 1:return o===4?this._moveHalfLineRight(e,t,s):this._moveRight(e,t,s,r);case 2:return o===2?this._moveUpByViewLines(e,t,s,r):this._moveUpByModelLines(e,t,s,r);case 3:return o===2?this._moveDownByViewLines(e,t,s,r):this._moveDownByModelLines(e,t,s,r);case 4:return o===2?t.map(a=>Me.fromViewState(Je.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>Me.fromModelState(Je.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 5:return o===2?t.map(a=>Me.fromViewState(Je.moveToNextBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>Me.fromModelState(Je.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 6:return this._moveToViewMinColumn(e,t,s);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,s);case 8:return this._moveToViewCenterColumn(e,t,s);case 9:return this._moveToViewMaxColumn(e,t,s);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,s);default:return null}}static viewportMove(e,t,i,s,r){const o=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(o);switch(i){case 11:{const l=this._firstLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 14:{let l=[];for(let c=0,h=t.length;c<h;c++){const u=t[c];l[c]=this.findPositionInViewportIfOutside(e,u,o,s)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,i,s){let r=t.viewState.position.lineNumber;if(i.startLineNumber<=r&&r<=i.endLineNumber-1)return new Me(t.modelState,t.viewState);{let o;r>i.endLineNumber-1?o=i.endLineNumber-1:r<i.startLineNumber?o=i.startLineNumber:o=r;const a=Je.vertical(e.cursorConfig,e,r,t.viewState.position.column,t.viewState.leftoverVisibleColumns,o,!1);return Me.fromViewState(t.viewState.move(s,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,i){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.min(t.endLineNumber,s+i-1)}static _lastLineNumberInRange(e,t,i){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.max(s,t.endLineNumber-i+1)}static _moveLeft(e,t,i,s){return t.map(r=>Me.fromViewState(Je.moveLeft(e.cursorConfig,e,r.viewState,i,s)))}static _moveHalfLineLeft(e,t,i){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);s[r]=Me.fromViewState(Je.moveLeft(e.cursorConfig,e,a.viewState,i,c))}return s}static _moveRight(e,t,i,s){return t.map(r=>Me.fromViewState(Je.moveRight(e.cursorConfig,e,r.viewState,i,s)))}static _moveHalfLineRight(e,t,i){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);s[r]=Me.fromViewState(Je.moveRight(e.cursorConfig,e,a.viewState,i,c))}return s}static _moveDownByViewLines(e,t,i,s){let r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Me.fromViewState(Je.moveDown(e.cursorConfig,e,l.viewState,i,s))}return r}static _moveDownByModelLines(e,t,i,s){let r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Me.fromModelState(Je.moveDown(e.cursorConfig,e.model,l.modelState,i,s))}return r}static _moveUpByViewLines(e,t,i,s){let r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Me.fromViewState(Je.moveUp(e.cursorConfig,e,l.viewState,i,s))}return r}static _moveUpByModelLines(e,t,i,s){let r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Me.fromModelState(Je.moveUp(e.cursorConfig,e.model,l.modelState,i,s))}return r}static _moveToViewPosition(e,t,i,s,r){return Me.fromViewState(t.viewState.move(i,s,r,0))}static _moveToModelPosition(e,t,i,s,r){return Me.fromModelState(t.modelState.move(i,s,r,0))}static _moveToViewMinColumn(e,t,i){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);s[r]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewFirstNonWhitespaceColumn(e,t,i){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);s[r]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewCenterColumn(e,t,i){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);s[r]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewMaxColumn(e,t,i){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);s[r]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewLastNonWhitespaceColumn(e,t,i){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);s[r]=this._moveToViewPosition(e,a,i,l,c)}return s}}var IC;(function(n){const e=function(i){if(!An(i))return!1;let s=i;return!(!oo(s.to)||!vn(s.select)&&!oV(s.select)||!vn(s.by)&&!oo(s.by)||!vn(s.value)&&!au(s.value))};n.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},n.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},n.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(i){if(!i.to)return null;let s;switch(i.to){case n.RawDirection.Left:s=0;break;case n.RawDirection.Right:s=1;break;case n.RawDirection.Up:s=2;break;case n.RawDirection.Down:s=3;break;case n.RawDirection.PrevBlankLine:s=4;break;case n.RawDirection.NextBlankLine:s=5;break;case n.RawDirection.WrappedLineStart:s=6;break;case n.RawDirection.WrappedLineFirstNonWhitespaceCharacter:s=7;break;case n.RawDirection.WrappedLineColumnCenter:s=8;break;case n.RawDirection.WrappedLineEnd:s=9;break;case n.RawDirection.WrappedLineLastNonWhitespaceCharacter:s=10;break;case n.RawDirection.ViewPortTop:s=11;break;case n.RawDirection.ViewPortBottom:s=13;break;case n.RawDirection.ViewPortCenter:s=12;break;case n.RawDirection.ViewPortIfOutside:s=14;break;default:return null}let r=0;switch(i.by){case n.RawUnit.Line:r=1;break;case n.RawUnit.WrappedLine:r=2;break;case n.RawUnit.Character:r=3;break;case n.RawUnit.HalfLine:r=4;break}return{direction:s,unit:r,select:!!i.select,value:i.value||1}}n.parse=t})(IC||(IC={}));const oD=Object.create(null);function $c(n,e){if(e<=0)return"";oD[n]||(oD[n]=["",n]);const t=oD[n];for(let i=t.length;i<=e;i++)t[i]=t[i-1]+n;return t[e]}class Bl{constructor(e,t){this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,i,s,r){const o=rt.visibleColumnFromColumn(e,t,i);if(r){const a=$c(" ",s),c=rt.prevIndentTabStop(o,s)/s;return $c(a,c)}else{const a="	",c=rt.prevRenderTabStop(o,i)/i;return $c(a,c)}}static shiftIndent(e,t,i,s,r){const o=rt.visibleColumnFromColumn(e,t,i);if(r){const a=$c(" ",s),c=rt.nextIndentTabStop(o,s)/s;return $c(a,c)}else{const a="	",c=rt.nextRenderTabStop(o,i)/i;return $c(a,c)}}_addEditOperation(e,t,i){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,i):e.addEditOperation(t,i)}getEditOperations(e,t){const i=this._selection.startLineNumber;let s=this._selection.endLineNumber;this._selection.endColumn===1&&i!==s&&(s=s-1);const{tabSize:r,indentSize:o,insertSpaces:a}=this._opts,l=i===s;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(i))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,h=0;for(let u=i;u<=s;u++,c=h){h=0;let d=e.getLineContent(u),f=Jn(d);if(this._opts.isUnshift&&(d.length===0||f===0)||!l&&!this._opts.isUnshift&&d.length===0)continue;if(f===-1&&(f=d.length),u>1&&rt.visibleColumnFromColumn(d,f+1,r)%o!==0&&e.isCheapToTokenize(u-1)){let _=Qt.getEnterAction(this._opts.autoIndent,e,new I(u-1,e.getLineMaxColumn(u-1),u-1,e.getLineMaxColumn(u-1)));if(_){if(h=c,_.appendText)for(let v=0,b=_.appendText.length;v<b&&h<o&&_.appendText.charCodeAt(v)===32;v++)h++;_.removeText&&(h=Math.max(0,h-_.removeText));for(let v=0;v<h&&!(f===0||d.charCodeAt(f-1)!==32);v++)f--}}if(this._opts.isUnshift&&f===0)continue;let g;this._opts.isUnshift?g=Bl.unshiftIndent(d,f+1,r,o,a):g=Bl.shiftIndent(d,f+1,r,o,a),this._addEditOperation(t,new I(u,1,u,f+1),g),u===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=f+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(i)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?$c(" ",o):"	";for(let h=i;h<=s;h++){const u=e.getLineContent(h);let d=Jn(u);if(!(this._opts.isUnshift&&(u.length===0||d===0))&&!(!l&&!this._opts.isUnshift&&u.length===0)&&(d===-1&&(d=u.length),!(this._opts.isUnshift&&d===0)))if(this._opts.isUnshift){d=Math.min(d,o);for(let f=0;f<d;f++)if(u.charCodeAt(f)===9){d=f+1;break}this._addEditOperation(t,new I(h,1,h,d+1),"")}else this._addEditOperation(t,new I(h,1,h,1),c),h===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){let s=t.getInverseEditOperations()[0];return new Se(s.range.endLineNumber,s.range.endColumn,s.range.endLineNumber,s.range.endColumn)}const i=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){let s=this._selection.startColumn;return i.startColumn<=s?i:i.getDirection()===0?new Se(i.startLineNumber,s,i.endLineNumber,i.endColumn):new Se(i.endLineNumber,i.endColumn,i.startLineNumber,s)}return i}}class Xpe{constructor(e,t,i){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=i}getEditOperations(e,t){t.addTrackedEditOperation(new I(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new I(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){let i=t.getInverseEditOperations(),s=i[0].range,r=i[1].range;return new Se(s.endLineNumber,s.endColumn,r.endLineNumber,r.endColumn-this._charAfterSelection.length)}}class Ut{static indent(e,t,i){if(t===null||i===null)return[];let s=[];for(let r=0,o=i.length;r<o;r++)s[r]=new Bl(i[r],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return s}static outdent(e,t,i){let s=[];for(let r=0,o=i.length;r<o;r++)s[r]=new Bl(i[r],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return s}static shiftIndent(e,t,i){return i=i||1,Bl.shiftIndent(t,t.length+i,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,i){return i=i||1,Bl.unshiftIndent(t,t.length+i,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,i,s){let r=[];for(let o=0,a=i.length;o<a;o++)r[o]=new En(i[o],s[o]);return new Gn(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,i,s,r){let o=[];for(let a=0,l=i.length;a<l;a++){const c=i[a];let h=c.getPosition();if(r&&!c.isEmpty()&&(r=!1),r&&s.indexOf(`
`)!==s.length-1&&(r=!1),r){let u=new I(h.lineNumber,1,h.lineNumber,1);o[a]=new cz(u,s,c,!0)}else o[a]=new En(c,s)}return new Gn(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,i,s,r){if(s||t.length===1)return null;if(r&&r.length===t.length)return r;if(e.multiCursorPaste==="spread"){i.charCodeAt(i.length-1)===10&&(i=i.substr(0,i.length-1)),i.charCodeAt(i.length-1)===13&&(i=i.substr(0,i.length-1));let o=sa(i);if(o.length===t.length)return o}return null}static paste(e,t,i,s,r,o){const a=this._distributePasteToCursors(e,i,s,r,o);return a?(i=i.sort(I.compareRangesUsingStarts),this._distributedPaste(e,t,i,a)):this._simplePaste(e,t,i,s,r)}static _goodIndentForLine(e,t,i){let s=null,r="";const o=Qt.getInheritIndentForLine(e.autoIndent,t,i,!1);if(o)s=o.action,r=o.indentation;else if(i>1){let a;for(a=i-1;a>=1;a--){const h=t.getLineContent(a);if(kg(h)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=Qt.getEnterAction(e.autoIndent,t,new I(a,l,a,l));c&&(r=c.indentation+c.appendText)}return s&&(s===wi.Indent&&(r=Ut.shiftIndent(e,r)),s===wi.Outdent&&(r=Ut.unshiftIndent(e,r)),r=e.normalizeIndentation(r)),r||null}static _replaceJumpToNextIndent(e,t,i,s){let r="",o=i.getStartPosition();if(e.insertSpaces){let a=rt.visibleColumnFromColumn2(e,t,o),l=e.indentSize,c=l-a%l;for(let h=0;h<c;h++)r+=" "}else r="	";return new En(i,r,s)}static tab(e,t,i){let s=[];for(let r=0,o=i.length;r<o;r++){const a=i[r];if(a.isEmpty()){let l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";let h=e.normalizeIndentation(c);if(!l.startsWith(h)){s[r]=new En(new I(a.startLineNumber,1,a.startLineNumber,l.length+1),h,!0);continue}}s[r]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){let l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){s[r]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}s[r]=new Bl(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent})}}return s}static compositionType(e,t,i,s,r,o,a,l){const c=s.map(h=>this._compositionType(i,h,r,o,a,l));return new Gn(4,c,{shouldPushStackElementBefore:Wb(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,i,s,r,o){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-s),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+r),h=new I(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(h)===i&&o===0?null:new jv(h,i,0,o)}static _typeCommand(e,t,i){return i?new Vb(e,t,!0):new En(e,t,!0)}static _enter(e,t,i,s){if(e.autoIndent===0)return Ut._typeCommand(s,`
`,i);if(!t.isCheapToTokenize(s.getStartPosition().lineNumber)||e.autoIndent===1){let l=t.getLineContent(s.startLineNumber),c=ci(l).substring(0,s.startColumn-1);return Ut._typeCommand(s,`
`+e.normalizeIndentation(c),i)}const r=Qt.getEnterAction(e.autoIndent,t,s);if(r){if(r.indentAction===wi.None)return Ut._typeCommand(s,`
`+e.normalizeIndentation(r.indentation+r.appendText),i);if(r.indentAction===wi.Indent)return Ut._typeCommand(s,`
`+e.normalizeIndentation(r.indentation+r.appendText),i);if(r.indentAction===wi.IndentOutdent){const l=e.normalizeIndentation(r.indentation),c=e.normalizeIndentation(r.indentation+r.appendText),h=`
`+c+`
`+l;return i?new Vb(s,h,!0):new jv(s,h,-1,c.length-l.length,!0)}else if(r.indentAction===wi.Outdent){const l=Ut.unshiftIndent(e,r.indentation);return Ut._typeCommand(s,`
`+e.normalizeIndentation(l+r.appendText),i)}}const o=t.getLineContent(s.startLineNumber),a=ci(o).substring(0,s.startColumn-1);if(e.autoIndent>=4){const l=Qt.getIndentForEnter(e.autoIndent,t,s,{unshiftIndent:c=>Ut.unshiftIndent(e,c),shiftIndent:c=>Ut.shiftIndent(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)});if(l){let c=rt.visibleColumnFromColumn2(e,t,s.getEndPosition());const h=s.endColumn,u=t.getLineContent(s.endLineNumber),d=Jn(u);if(d>=0?s=s.setEndPosition(s.endLineNumber,Math.max(s.endColumn,d+1)):s=s.setEndPosition(s.endLineNumber,t.getLineMaxColumn(s.endLineNumber)),i)return new Vb(s,`
`+e.normalizeIndentation(l.afterEnter),!0);{let f=0;return h<=d+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),f=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new jv(s,`
`+e.normalizeIndentation(l.afterEnter),0,f,!0)}}}return Ut._typeCommand(s,`
`+e.normalizeIndentation(a),i)}static _isAutoIndentType(e,t,i){if(e.autoIndent<4)return!1;for(let s=0,r=i.length;s<r;s++)if(!t.isCheapToTokenize(i[s].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,i,s){const r=Qt.getIndentationAtPosition(t,i.startLineNumber,i.startColumn),o=Qt.getIndentActionForType(e.autoIndent,t,i,s,{shiftIndent:a=>Ut.shiftIndent(e,a),unshiftIndent:a=>Ut.unshiftIndent(e,a)});if(o===null)return null;if(o!==e.normalizeIndentation(r)){const a=t.getLineFirstNonWhitespaceColumn(i.startLineNumber);return a===0?Ut._typeCommand(new I(i.startLineNumber,1,i.endLineNumber,i.endColumn),e.normalizeIndentation(o)+s,!1):Ut._typeCommand(new I(i.startLineNumber,1,i.endLineNumber,i.endColumn),e.normalizeIndentation(o)+t.getLineContent(i.startLineNumber).substring(a-1,i.startColumn-1)+s,!1)}return null}static _isAutoClosingOvertype(e,t,i,s,r){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(r))return!1;for(let o=0,a=i.length;o<a;o++){const l=i[o];if(!l.isEmpty())return!1;const c=l.getPosition(),h=t.getLineContent(c.lineNumber);if(h.charAt(c.column-1)!==r)return!1;const d=Td(r);if((c.column>2?h.charCodeAt(c.column-2):0)===92&&d)return!1;if(e.autoClosingOvertype==="auto"){let g=!1;for(let p=0,_=s.length;p<_;p++){const v=s[p];if(c.lineNumber===v.startLineNumber&&c.column===v.startColumn){g=!0;break}}if(!g)return!1}}return!0}static _runAutoClosingOvertype(e,t,i,s,r){let o=[];for(let a=0,l=s.length;a<l;a++){const h=s[a].getPosition(),u=new I(h.lineNumber,h.column,h.lineNumber,h.column+1);o[a]=new En(u,r)}return new Gn(4,o,{shouldPushStackElementBefore:Wb(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const i=t.charAt(0),s=e.autoClosingPairs.autoClosingPairsOpenByStart.get(i)||[],r=e.autoClosingPairs.autoClosingPairsCloseByStart.get(i)||[],o=s.some(l=>t.startsWith(l.open)),a=r.some(l=>t.startsWith(l.close));return!o&&a}static _findAutoClosingPairOpen(e,t,i,s){const r=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(s);if(!r)return null;let o=null;for(const a of r)if(o===null||a.open.length>o.open.length){let l=!0;for(const c of i)if(t.getValueInRange(new I(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+s!==a.open){l=!1;break}l&&(o=a)}return o}static _findSubAutoClosingPairClose(e,t){if(t.open.length<=1)return"";const i=t.close.charAt(t.close.length-1),s=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(i)||[];let r=null;for(const o of s)o.open!==t.open&&t.open.includes(o.open)&&t.close.endsWith(o.close)&&(!r||o.open.length>r.open.length)&&(r=o);return r?r.close:""}static _getAutoClosingPairClose(e,t,i,s,r){const o=Td(s),a=o?e.autoClosingQuotes:e.autoClosingBrackets;if(a==="never")return null;const l=this._findAutoClosingPairOpen(e,t,i.map(d=>d.getPosition()),s);if(!l)return null;const c=this._findSubAutoClosingPairClose(e,l);let h=!0;const u=o?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;for(let d=0,f=i.length;d<f;d++){const g=i[d];if(!g.isEmpty())return null;const p=g.getPosition(),_=t.getLineContent(p.lineNumber),v=_.substring(p.column-1);if(v.startsWith(c)||(h=!1),_.length>p.column-1){const C=_.charAt(p.column-1);if(!Ut._isBeforeClosingBrace(e,v)&&!u(C))return null}if(!t.isCheapToTokenize(p.lineNumber))return null;if(l.open.length===1&&(s==="'"||s==='"')&&a!=="always"){const C=jf(e.wordSeparators);if(r&&p.column>1&&C.get(_.charCodeAt(p.column-2))===0||!r&&p.column>2&&C.get(_.charCodeAt(p.column-3))===0)return null}t.forceTokenization(p.lineNumber);const b=t.getLineTokens(p.lineNumber);let w=!1;try{w=Qt.shouldAutoClosePair(l,b,r?p.column:p.column-1)}catch(C){Ie(C)}if(!w)return null}return h?l.close.substring(0,l.close.length-c.length):l.close}static _runAutoClosingOpenCharType(e,t,i,s,r,o,a){let l=[];for(let c=0,h=s.length;c<h;c++){const u=s[c];l[c]=new hz(u,r,o,a)}return new Gn(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return Td(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,i,s){if(!Ut._shouldSurroundChar(e,s)||!e.surroundingPairs.hasOwnProperty(s))return!1;const r=Td(s);for(let o=0,a=i.length;o<a;o++){const l=i[o];if(l.isEmpty())return!1;let c=!0;for(let h=l.startLineNumber;h<=l.endLineNumber;h++){const u=t.getLineContent(h),d=h===l.startLineNumber?l.startColumn-1:0,f=h===l.endLineNumber?l.endColumn-1:u.length,g=u.substring(d,f);if(/[^ \t]/.test(g)){c=!1;break}}if(c)return!1;if(r&&l.startLineNumber===l.endLineNumber&&l.startColumn+1===l.endColumn){const h=t.getValueInRange(l);if(Td(h))return!1}}return!0}static _runSurroundSelectionType(e,t,i,s,r){let o=[];for(let a=0,l=s.length;a<l;a++){const c=s[a],h=t.surroundingPairs[r];o[a]=new Xpe(c,r,h)}return new Gn(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,i){return!!(i.length===1&&t.isCheapToTokenize(i[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,i,s,r){if(!t.electricChars.hasOwnProperty(r)||!s.isEmpty())return null;let o=s.getPosition();i.forceTokenization(o.lineNumber);let a=i.getLineTokens(o.lineNumber),l;try{l=Qt.onElectricCharacter(r,a,o.column)}catch(c){return Ie(c),null}if(!l)return null;if(l.matchOpenBracket){let c=(a.getLineContent()+r).lastIndexOf(l.matchOpenBracket)+1,h=i.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:o.lineNumber,column:c});if(h){if(h.startLineNumber===o.lineNumber)return null;let u=i.getLineContent(h.startLineNumber),d=ci(u),f=t.normalizeIndentation(d),g=i.getLineContent(o.lineNumber),p=i.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,_=g.substring(p-1,o.column-1),v=f+_+r,b=new I(o.lineNumber,1,o.lineNumber,o.column);const w=new En(b,v);return new Gn(aD(v,e),[w],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,i,s,r,o){if(!s||Se.selectionsArrEqual(s,r))return null;let a=null;for(const c of r){if(!c.isEmpty())return null;const h=c.getPosition(),u=i.getValueInRange(new I(h.lineNumber,h.column-1,h.lineNumber,h.column));if(a===null)a=u;else if(a!==u)return null}if(!a)return null;if(this._isAutoClosingOvertype(t,i,r,o,a)){const c=r.map(h=>new En(new I(h.positionLineNumber,h.positionColumn,h.positionLineNumber,h.positionColumn+1),"",!1));return new Gn(4,c,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const l=this._getAutoClosingPairClose(t,i,r,a,!1);return l!==null?this._runAutoClosingOpenCharType(e,t,i,r,a,!1,l):null}static typeWithInterceptors(e,t,i,s,r,o,a){if(!e&&a===`
`){let h=[];for(let u=0,d=r.length;u<d;u++)h[u]=Ut._enter(i,s,!1,r[u]);return new Gn(4,h,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(i,s,r)){let h=[],u=!1;for(let d=0,f=r.length;d<f;d++)if(h[d]=this._runAutoIndentType(i,s,r[d],a),!h[d]){u=!0;break}if(!u)return new Gn(4,h,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoClosingOvertype(i,s,r,o,a))return this._runAutoClosingOvertype(t,i,s,r,a);if(!e){const h=this._getAutoClosingPairClose(i,s,r,a,!0);if(h)return this._runAutoClosingOpenCharType(t,i,s,r,a,!0,h)}if(this._isSurroundSelectionType(i,s,r,a))return this._runSurroundSelectionType(t,i,s,r,a);if(!e&&this._isTypeInterceptorElectricChar(i,s,r)){const h=this._typeInterceptorElectricChar(t,i,s,r[0],a);if(h)return h}let l=[];for(let h=0,u=r.length;h<u;h++)l[h]=new En(r[h],a);const c=aD(a,t);return new Gn(c,l,{shouldPushStackElementBefore:Wb(t,c),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,i,s,r){let o=[];for(let l=0,c=s.length;l<c;l++)o[l]=new En(s[l],r);const a=aD(r,e);return new Gn(a,o,{shouldPushStackElementBefore:Wb(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,i){if(t===null||i===null)return[];let s=[];for(let r=0,o=i.length;r<o;r++){let a=i[r].positionLineNumber;if(a===1)s[r]=new Vb(new I(1,1,1,1),`
`);else{a--;let l=t.getLineMaxColumn(a);s[r]=this._enter(e,t,!1,new I(a,l,a,l))}}return s}static lineInsertAfter(e,t,i){if(t===null||i===null)return[];let s=[];for(let r=0,o=i.length;r<o;r++){const a=i[r].positionLineNumber;let l=t.getLineMaxColumn(a);s[r]=this._enter(e,t,!1,new I(a,l,a,l))}return s}static lineBreakInsert(e,t,i){let s=[];for(let r=0,o=i.length;r<o;r++)s[r]=this._enter(e,t,!0,i[r]);return s}}class hz extends jv{constructor(e,t,i,s){super(e,(i?t:"")+s,0,-s.length),this._openCharacter=t,this._closeCharacter=s,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){let s=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new I(s.startLineNumber,s.endColumn-this._closeCharacter.length,s.endLineNumber,s.endColumn),this.enclosingRange=new I(s.startLineNumber,s.endColumn-this._openCharacter.length-this._closeCharacter.length,s.endLineNumber,s.endColumn),super.computeCursorState(e,t)}}function aD(n,e){return n===" "?e===5||e===6?6:5:4}function Wb(n,e){return m4(n)&&!m4(e)?!0:n===5?!1:p4(n)!==p4(e)}function p4(n){return n===6||n===5?"space":n}function m4(n){return n===4||n===5||n===6}var B;(function(n){n.editorSimpleInput=new he("editorSimpleInput",!1,!0),n.editorTextFocus=new he("editorTextFocus",!1,m("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),n.focus=new he("editorFocus",!1,m("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),n.textInputFocus=new he("textInputFocus",!1,m("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),n.readOnly=new he("editorReadonly",!1,m("editorReadonly","Whether the editor is read only")),n.inDiffEditor=new he("inDiffEditor",!1,m("inDiffEditor","Whether the context is a diff editor")),n.columnSelection=new he("editorColumnSelection",!1,m("editorColumnSelection","Whether `editor.columnSelection` is enabled")),n.writable=n.readOnly.toNegated(),n.hasNonEmptySelection=new he("editorHasSelection",!1,m("editorHasSelection","Whether the editor has text selected")),n.hasOnlyEmptySelection=n.hasNonEmptySelection.toNegated(),n.hasMultipleSelections=new he("editorHasMultipleSelections",!1,m("editorHasMultipleSelections","Whether the editor has multiple selections")),n.hasSingleSelection=n.hasMultipleSelections.toNegated(),n.tabMovesFocus=new he("editorTabMovesFocus",!1,m("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),n.tabDoesNotMoveFocus=n.tabMovesFocus.toNegated(),n.isInWalkThroughSnippet=new he("isInEmbeddedEditor",!1,!0),n.canUndo=new he("canUndo",!1,!0),n.canRedo=new he("canRedo",!1,!0),n.hoverVisible=new he("editorHoverVisible",!1,m("editorHoverVisible","Whether the editor hover is visible")),n.inCompositeEditor=new he("inCompositeEditor",void 0,m("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),n.notInCompositeEditor=n.inCompositeEditor.toNegated(),n.languageId=new he("editorLangId","",m("editorLangId","The language identifier of the editor")),n.hasCompletionItemProvider=new he("editorHasCompletionItemProvider",!1,m("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),n.hasCodeActionsProvider=new he("editorHasCodeActionsProvider",!1,m("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),n.hasCodeLensProvider=new he("editorHasCodeLensProvider",!1,m("editorHasCodeLensProvider","Whether the editor has a code lens provider")),n.hasDefinitionProvider=new he("editorHasDefinitionProvider",!1,m("editorHasDefinitionProvider","Whether the editor has a definition provider")),n.hasDeclarationProvider=new he("editorHasDeclarationProvider",!1,m("editorHasDeclarationProvider","Whether the editor has a declaration provider")),n.hasImplementationProvider=new he("editorHasImplementationProvider",!1,m("editorHasImplementationProvider","Whether the editor has an implementation provider")),n.hasTypeDefinitionProvider=new he("editorHasTypeDefinitionProvider",!1,m("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),n.hasHoverProvider=new he("editorHasHoverProvider",!1,m("editorHasHoverProvider","Whether the editor has a hover provider")),n.hasDocumentHighlightProvider=new he("editorHasDocumentHighlightProvider",!1,m("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),n.hasDocumentSymbolProvider=new he("editorHasDocumentSymbolProvider",!1,m("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),n.hasReferenceProvider=new he("editorHasReferenceProvider",!1,m("editorHasReferenceProvider","Whether the editor has a reference provider")),n.hasRenameProvider=new he("editorHasRenameProvider",!1,m("editorHasRenameProvider","Whether the editor has a rename provider")),n.hasSignatureHelpProvider=new he("editorHasSignatureHelpProvider",!1,m("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),n.hasInlayHintsProvider=new he("editorHasInlayHintsProvider",!1,m("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),n.hasDocumentFormattingProvider=new he("editorHasDocumentFormattingProvider",!1,m("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),n.hasDocumentSelectionFormattingProvider=new he("editorHasDocumentSelectionFormattingProvider",!1,m("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),n.hasMultipleDocumentFormattingProvider=new he("editorHasMultipleDocumentFormattingProvider",!1,m("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),n.hasMultipleDocumentSelectionFormattingProvider=new he("editorHasMultipleDocumentSelectionFormattingProvider",!1,m("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(B||(B={}));const Ge=0;class Gt extends Ks{runEditorCommand(e,t,i){const s=t._getViewModel();!s||this.runCoreEditorCommand(s,i||{})}}var TC;(function(n){const e=function(i){if(!An(i))return!1;const s=i;return!(!oo(s.to)||!vn(s.by)&&!oo(s.by)||!vn(s.value)&&!au(s.value)||!vn(s.revealCursor)&&!oV(s.revealCursor))};n.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},n.RawDirection={Up:"up",Down:"down"},n.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage"};function t(i){let s;switch(i.to){case n.RawDirection.Up:s=1;break;case n.RawDirection.Down:s=2;break;default:return null}let r;switch(i.by){case n.RawUnit.Line:r=1;break;case n.RawUnit.WrappedLine:r=2;break;case n.RawUnit.Page:r=3;break;case n.RawUnit.HalfPage:r=4;break;default:r=2}const o=Math.floor(i.value||1),a=!!i.revealCursor;return{direction:s,unit:r,value:o,revealCursor:a,select:!!i.select}}n.parse=t})(TC||(TC={}));var $d;(function(n){const e=function(t){if(!An(t))return!1;const i=t;return!(!au(i.lineNumber)&&!oo(i.lineNumber)||!vn(i.at)&&!oo(i.at))};n.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},n.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})($d||($d={}));class aI{constructor(e){e.addImplementation(1e4,"code-editor",(t,i)=>{const s=t.get(Tt).getFocusedCodeEditor();return s&&s.hasTextFocus()?this._runEditorCommand(t,s,i):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,i)=>{const s=document.activeElement;return s&&["input","textarea"].indexOf(s.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,"generic-dom",(t,i)=>{const s=t.get(Tt).getActiveCodeEditor();return s?(s.focus(),this._runEditorCommand(t,s,i)):!1})}_runEditorCommand(e,t,i){const s=this.runEditorCommand(e,t,i);return s||!0}}var bi;(function(n){class e extends Gt{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,[Ii.moveTo(b,b.getPrimaryCursorState(),this._inSelectionMode,w.position,w.viewPosition)]),b.revealPrimaryCursor(w.source,!0)}}n.MoveTo=ne(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),n.MoveToSelect=ne(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends Gt{runCoreEditorCommand(b,w){b.model.pushStackElement();const C=this._getColumnSelectResult(b,b.getPrimaryCursorState(),b.getCursorColumnSelectData(),w);b.setCursorStates(w.source,3,C.viewStates.map(y=>Me.fromViewState(y))),b.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:C.fromLineNumber,fromViewVisualColumn:C.fromVisualColumn,toViewLineNumber:C.toLineNumber,toViewVisualColumn:C.toVisualColumn}),C.reversed?b.revealTopMostCursor(w.source):b.revealBottomMostCursor(w.source)}}n.ColumnSelect=ne(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(v,b,w,C){const y=v.model.validatePosition(C.position),D=v.coordinatesConverter.validateViewPosition(new P(C.viewPosition.lineNumber,C.viewPosition.column),y);let S=C.doColumnSelect?w.fromViewLineNumber:D.lineNumber,x=C.doColumnSelect?w.fromViewVisualColumn:C.mouseColumn-1;return rh.columnSelect(v.cursorConfig,v,S,x,D.lineNumber,C.mouseColumn-1)}}),n.CursorColumnSelectLeft=ne(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(v,b,w,C){return rh.columnSelectLeft(v.cursorConfig,v,w)}}),n.CursorColumnSelectRight=ne(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(v,b,w,C){return rh.columnSelectRight(v.cursorConfig,v,w)}});class i extends t{constructor(b){super(b),this._isPaged=b.isPaged}_getColumnSelectResult(b,w,C,y){return rh.columnSelectUp(b.cursorConfig,b,C,this._isPaged)}}n.CursorColumnSelectUp=ne(new i({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:3600,linux:{primary:0}}})),n.CursorColumnSelectPageUp=ne(new i({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:3595,linux:{primary:0}}}));class s extends t{constructor(b){super(b),this._isPaged=b.isPaged}_getColumnSelectResult(b,w,C,y){return rh.columnSelectDown(b.cursorConfig,b,C,this._isPaged)}}n.CursorColumnSelectDown=ne(new s({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:3602,linux:{primary:0}}})),n.CursorColumnSelectPageDown=ne(new s({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:3596,linux:{primary:0}}}));class r extends Gt{constructor(){super({id:"cursorMove",precondition:void 0,description:IC.description})}runCoreEditorCommand(b,w){const C=IC.parse(w);!C||this._runCursorMove(b,w.source,C)}_runCursorMove(b,w,C){b.model.pushStackElement(),b.setCursorStates(w,3,r._move(b,b.getCursorStates(),C)),b.revealPrimaryCursor(w,!0)}static _move(b,w,C){const y=C.select,D=C.value;switch(C.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return Ii.simpleMove(b,w,C.direction,y,D,C.unit);case 11:case 13:case 12:case 14:return Ii.viewportMove(b,w,C.direction,y,D);default:return null}}}n.CursorMoveImpl=r,n.CursorMove=ne(new r);class o extends Gt{constructor(b){super(b),this._staticArgs=b.args}runCoreEditorCommand(b,w){let C=this._staticArgs;this._staticArgs.value===-1&&(C={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:b.cursorConfig.pageSize}),b.model.pushStackElement(),b.setCursorStates(w.source,3,Ii.simpleMove(b,b.getCursorStates(),C.direction,C.select,C.value,C.unit)),b.revealPrimaryCursor(w.source,!0)}}n.CursorLeft=ne(new o({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),n.CursorLeftSelect=ne(new o({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:1039}})),n.CursorRight=ne(new o({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),n.CursorRightSelect=ne(new o({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:1041}})),n.CursorUp=ne(new o({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),n.CursorUpSelect=ne(new o({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),n.CursorPageUp=ne(new o({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:11}})),n.CursorPageUpSelect=ne(new o({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:1035}})),n.CursorDown=ne(new o({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),n.CursorDownSelect=ne(new o({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),n.CursorPageDown=ne(new o({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:12}})),n.CursorPageDownSelect=ne(new o({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:1036}})),n.CreateCursor=ne(new class extends Gt{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(v,b){let w;b.wholeLine?w=Ii.line(v,v.getPrimaryCursorState(),!1,b.position,b.viewPosition):w=Ii.moveTo(v,v.getPrimaryCursorState(),!1,b.position,b.viewPosition);const C=v.getCursorStates();if(C.length>1){const y=w.modelState?w.modelState.position:null,D=w.viewState?w.viewState.position:null;for(let S=0,x=C.length;S<x;S++){const k=C[S];if(!(y&&!k.modelState.selection.containsPosition(y))&&!(D&&!k.viewState.selection.containsPosition(D))){C.splice(S,1),v.model.pushStackElement(),v.setCursorStates(b.source,3,C);return}}}C.push(w),v.model.pushStackElement(),v.setCursorStates(b.source,3,C)}}),n.LastCursorMoveToSelect=ne(new class extends Gt{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(v,b){const w=v.getLastAddedCursorIndex(),C=v.getCursorStates(),y=C.slice(0);y[w]=Ii.moveTo(v,C[w],!0,b.position,b.viewPosition),v.model.pushStackElement(),v.setCursorStates(b.source,3,y)}});class a extends Gt{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,Ii.moveToBeginningOfLine(b,b.getCursorStates(),this._inSelectionMode)),b.revealPrimaryCursor(w.source,!0)}}n.CursorHome=ne(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),n.CursorHomeSelect=ne(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends Gt{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,this._exec(b.getCursorStates())),b.revealPrimaryCursor(w.source,!0)}_exec(b){const w=[];for(let C=0,y=b.length;C<y;C++){const D=b[C],S=D.modelState.position.lineNumber;w[C]=Me.fromModelState(D.modelState.move(this._inSelectionMode,S,1,0))}return w}}n.CursorLineStart=ne(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:0,mac:{primary:287}}})),n.CursorLineStartSelect=ne(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends Gt{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,Ii.moveToEndOfLine(b,b.getCursorStates(),this._inSelectionMode,w.sticky||!1)),b.revealPrimaryCursor(w.source,!0)}}n.CursorEnd=ne(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Ge,kbExpr:B.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:m("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),n.CursorEndSelect=ne(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Ge,kbExpr:B.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:m("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class h extends Gt{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,this._exec(b,b.getCursorStates())),b.revealPrimaryCursor(w.source,!0)}_exec(b,w){const C=[];for(let y=0,D=w.length;y<D;y++){const S=w[y],x=S.modelState.position.lineNumber,k=b.model.getLineMaxColumn(x);C[y]=Me.fromModelState(S.modelState.move(this._inSelectionMode,x,k,0))}return C}}n.CursorLineEnd=ne(new h({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:0,mac:{primary:291}}})),n.CursorLineEndSelect=ne(new h({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:0,mac:{primary:1315}}}));class u extends Gt{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,Ii.moveToBeginningOfBuffer(b,b.getCursorStates(),this._inSelectionMode)),b.revealPrimaryCursor(w.source,!0)}}n.CursorTop=ne(new u({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:2062,mac:{primary:2064}}})),n.CursorTopSelect=ne(new u({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:3086,mac:{primary:3088}}}));class d extends Gt{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,Ii.moveToEndOfBuffer(b,b.getCursorStates(),this._inSelectionMode)),b.revealPrimaryCursor(w.source,!0)}}n.CursorBottom=ne(new d({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:2061,mac:{primary:2066}}})),n.CursorBottomSelect=ne(new d({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:3085,mac:{primary:3090}}}));class f extends Gt{constructor(){super({id:"editorScroll",precondition:void 0,description:TC.description})}runCoreEditorCommand(b,w){const C=TC.parse(w);!C||this._runEditorScroll(b,w.source,C)}_runEditorScroll(b,w,C){const y=this._computeDesiredScrollTop(b,C);if(C.revealCursor){const D=b.getCompletelyVisibleViewRangeAtScrollTop(y);b.setCursorStates(w,3,[Ii.findPositionInViewportIfOutside(b,b.getPrimaryCursorState(),D,C.select)])}b.setScrollTop(y,0)}_computeDesiredScrollTop(b,w){if(w.unit===1){const D=b.getCompletelyVisibleViewRange(),S=b.coordinatesConverter.convertViewRangeToModelRange(D);let x;w.direction===1?x=Math.max(1,S.startLineNumber-w.value):x=Math.min(b.model.getLineCount(),S.startLineNumber+w.value);const k=b.coordinatesConverter.convertModelPositionToViewPosition(new P(x,1));return b.getVerticalOffsetForLineNumber(k.lineNumber)}let C;w.unit===3?C=b.cursorConfig.pageSize*w.value:w.unit===4?C=Math.round(b.cursorConfig.pageSize/2)*w.value:C=w.value;const y=(w.direction===1?-1:1)*C;return b.getScrollTop()+y*b.cursorConfig.lineHeight}}n.EditorScrollImpl=f,n.EditorScroll=ne(new f),n.ScrollLineUp=ne(new class extends Gt{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(v,b){n.EditorScroll._runEditorScroll(v,b.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),n.ScrollPageUp=ne(new class extends Gt{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(v,b){n.EditorScroll._runEditorScroll(v,b.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),n.ScrollLineDown=ne(new class extends Gt{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(v,b){n.EditorScroll._runEditorScroll(v,b.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),n.ScrollPageDown=ne(new class extends Gt{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(v,b){n.EditorScroll._runEditorScroll(v,b.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}});class g extends Gt{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,[Ii.word(b,b.getPrimaryCursorState(),this._inSelectionMode,w.position)]),b.revealPrimaryCursor(w.source,!0)}}n.WordSelect=ne(new g({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),n.WordSelectDrag=ne(new g({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),n.LastCursorWordSelect=ne(new class extends Gt{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(v,b){const w=v.getLastAddedCursorIndex(),C=v.getCursorStates(),y=C.slice(0),D=C[w];y[w]=Ii.word(v,D,D.modelState.hasSelection(),b.position),v.model.pushStackElement(),v.setCursorStates(b.source,3,y)}});class p extends Gt{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,[Ii.line(b,b.getPrimaryCursorState(),this._inSelectionMode,w.position,w.viewPosition)]),b.revealPrimaryCursor(w.source,!1)}}n.LineSelect=ne(new p({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),n.LineSelectDrag=ne(new p({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class _ extends Gt{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){const C=b.getLastAddedCursorIndex(),y=b.getCursorStates(),D=y.slice(0);D[C]=Ii.line(b,y[C],this._inSelectionMode,w.position,w.viewPosition),b.model.pushStackElement(),b.setCursorStates(w.source,3,D)}}n.LastCursorLineSelect=ne(new _({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),n.LastCursorLineSelectDrag=ne(new _({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),n.ExpandLineSelection=ne(new class extends Gt{constructor(){super({id:"expandLineSelection",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:2090}})}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates(b.source,3,Ii.expandLineSelection(v,v.getCursorStates())),v.revealPrimaryCursor(b.source,!0)}}),n.CancelSelection=ne(new class extends Gt{constructor(){super({id:"cancelSelection",precondition:B.hasNonEmptySelection,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates(b.source,3,[Ii.cancelSelection(v,v.getPrimaryCursorState())]),v.revealPrimaryCursor(b.source,!0)}}),n.RemoveSecondaryCursors=ne(new class extends Gt{constructor(){super({id:"removeSecondaryCursors",precondition:B.hasMultipleSelections,kbOpts:{weight:Ge+1,kbExpr:B.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates(b.source,3,[v.getPrimaryCursorState()]),v.revealPrimaryCursor(b.source,!0),mC(m("removedCursor","Removed secondary cursors"))}}),n.RevealLine=ne(new class extends Gt{constructor(){super({id:"revealLine",precondition:void 0,description:$d.description})}runCoreEditorCommand(v,b){const w=b,C=w.lineNumber||0;let y=typeof C=="number"?C+1:parseInt(C)+1;y<1&&(y=1);const D=v.model.getLineCount();y>D&&(y=D);const S=new I(y,1,y,v.model.getLineMaxColumn(y));let x=0;if(w.at)switch(w.at){case $d.RawAtArgument.Top:x=3;break;case $d.RawAtArgument.Center:x=1;break;case $d.RawAtArgument.Bottom:x=4;break}const k=v.coordinatesConverter.convertModelRangeToViewRange(S);v.revealRange(b.source,!1,k,x,0)}}),n.SelectAll=new class extends aI{constructor(){super(Bue)}runDOMCommand(){On&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(v,b,w){const C=b._getViewModel();!C||this.runCoreEditorCommand(C,w)}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates("keyboard",3,[Ii.selectAll(v,v.getPrimaryCursorState())])}},n.SetSelection=ne(new class extends Gt{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates(b.source,3,[Me.fromModelSelection(b.selection)])}})})(bi||(bi={}));const Qpe=le.and(B.textInputFocus,B.columnSelection);function Og(n,e){yn.registerKeybindingRule({id:n,primary:e,when:Qpe,weight:Ge+1})}Og(bi.CursorColumnSelectLeft.id,1039);Og(bi.CursorColumnSelectRight.id,1041);Og(bi.CursorColumnSelectUp.id,1040);Og(bi.CursorColumnSelectPageUp.id,1035);Og(bi.CursorColumnSelectDown.id,1042);Og(bi.CursorColumnSelectPageDown.id,1036);function _4(n){return n.register(),n}var _m;(function(n){class e extends Ks{runEditorCommand(i,s,r){const o=s._getViewModel();!o||this.runCoreEditingCommand(s,o,r||{})}}n.CoreEditingCommand=e,n.LineBreakInsert=ne(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:B.writable,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,i,s){t.pushUndoStop(),t.executeCommands(this.id,Ut.lineBreakInsert(i.cursorConfig,i.model,i.getCursorStates().map(r=>r.modelState.selection)))}}),n.Outdent=ne(new class extends e{constructor(){super({id:"outdent",precondition:B.writable,kbOpts:{weight:Ge,kbExpr:le.and(B.editorTextFocus,B.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,i,s){t.pushUndoStop(),t.executeCommands(this.id,Ut.outdent(i.cursorConfig,i.model,i.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),n.Tab=ne(new class extends e{constructor(){super({id:"tab",precondition:B.writable,kbOpts:{weight:Ge,kbExpr:le.and(B.editorTextFocus,B.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,i,s){t.pushUndoStop(),t.executeCommands(this.id,Ut.tab(i.cursorConfig,i.model,i.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),n.DeleteLeft=ne(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,i,s){const[r,o]=pu.deleteLeft(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection),i.getCursorAutoClosedCharacters());r&&t.pushUndoStop(),t.executeCommands(this.id,o),i.setPrevEditOperationType(2)}}),n.DeleteRight=ne(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:Ge,kbExpr:B.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,i,s){const[r,o]=pu.deleteRight(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection));r&&t.pushUndoStop(),t.executeCommands(this.id,o),i.setPrevEditOperationType(3)}}),n.Undo=new class extends aI{constructor(){super(p2)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(t,i,s){if(!(!i.hasModel()||i.getOption(80)===!0))return i.getModel().undo()}},n.Redo=new class extends aI{constructor(){super(m2)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(t,i,s){if(!(!i.hasModel()||i.getOption(80)===!0))return i.getModel().redo()}}})(_m||(_m={}));class b4 extends O1{constructor(e,t,i){super({id:e,precondition:void 0,description:i}),this._handlerId=t}runCommand(e,t){const i=e.get(Tt).getFocusedCodeEditor();!i||i.trigger("keyboard",this._handlerId,t)}}function Vu(n,e){_4(new b4("default:"+n,n)),_4(new b4(n,n,e))}Vu("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});Vu("replacePreviousChar");Vu("compositionType");Vu("compositionStart");Vu("compositionEnd");Vu("paste");Vu("cut");class Jpe{constructor(e,t,i,s){this.configuration=e,this.viewModel=t,this.userInputEvents=i,this.commandDelegate=s}paste(e,t,i,s){this.commandDelegate.paste(e,t,i,s)}type(e){this.commandDelegate.type(e)}compositionType(e,t,i,s){this.commandDelegate.compositionType(e,t,i,s)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){bi.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new P(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,i=Fn&&t.get(95),s=t.get(18);e.middleButton&&!i?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount===2?this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):s?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){bi.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){bi.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,t,i){e=this._validateViewColumn(e),bi.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}_createCursor(e,t){e=this._validateViewColumn(e),bi.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e){bi.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){bi.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){bi.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){bi.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){bi.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){bi.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){bi.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){bi.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){bi.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class U1{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown&&this.onKeyDown(e)}emitKeyUp(e){this.onKeyUp&&this.onKeyUp(e)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}emitMouseWheel(e){this.onMouseWheel&&this.onMouseWheel(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return U1.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){return new eme(e.element,e.type,e.mouseColumn,e.position?t.convertViewPositionToModelPosition(e.position):null,e.range?t.convertViewRangeToModelRange(e.range):null,e.detail)}}class eme{constructor(e,t,i,s,r,o){this.element=e,this.type=t,this.mouseColumn=i,this.position=s,this.range=r,this.detail=o}toString(){return Rr.toString(this)}}var lD;class uz{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const i=this.getStartLineNumber(),s=this.getEndLineNumber();if(t<i){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>s)return null;let r=0,o=0;for(let l=i;l<=s;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(o===0?(r=c,o=1):o++)}if(e<i){let l=0;t<i?l=t-e+1:l=i-e,this._rendLineNumberStart-=l}return this._lines.splice(r,o)}onLinesChanged(e,t){if(this.getCount()===0)return!1;const i=this.getStartLineNumber(),s=this.getEndLineNumber();let r=!1;for(let o=e;o<=t;o++)o>=i&&o<=s&&(this._lines[o-this._rendLineNumberStart].onContentChanged(),r=!0);return r}onLinesInserted(e,t){if(this.getCount()===0)return null;const i=t-e+1,s=this.getStartLineNumber(),r=this.getEndLineNumber();if(e<=s)return this._rendLineNumberStart+=i,null;if(e>r)return null;if(i+e>r)return this._lines.splice(e-this._rendLineNumberStart,r-e+1);const o=[];for(let u=0;u<i;u++)o[u]=this._createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-i),h=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=l.concat(o).concat(c),h}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),i=this.getEndLineNumber();let s=!1;for(let r=0,o=e.length;r<o;r++){const a=e[r];if(a.toLineNumber<t||a.fromLineNumber>i)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(i,a.toLineNumber);for(let h=l;h<=c;h++){const u=h-this._rendLineNumberStart;this._lines[u].onTokensChanged(),s=!0}}return s}}class dz{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new uz(()=>this._host.createVisibleLine())}_createDomNode(){const e=Ye(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(129)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,s=t.length;i<s;i++){const r=t[i].getDomNode();r&&this.domNode.domNode.removeChild(r)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,s=t.length;i<s;i++){const r=t[i].getDomNode();r&&this.domNode.domNode.removeChild(r)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),i=new za(this.domNode.domNode,this._host,e),s={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},r=i.render(s,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(r.rendLineNumberStart,r.lines)}}class za{constructor(e,t,i){this.domNode=e,this.host=t,this.viewportData=i}render(e,t,i,s){const r={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(r.rendLineNumberStart+r.linesLength-1<t||i<r.rendLineNumberStart){r.rendLineNumberStart=t,r.linesLength=i-t+1,r.lines=[];for(let o=t;o<=i;o++)r.lines[o-t]=this.host.createVisibleLine();return this._finishRendering(r,!0,s),r}if(this._renderUntouchedLines(r,Math.max(t-r.rendLineNumberStart,0),Math.min(i-r.rendLineNumberStart,r.linesLength-1),s,t),r.rendLineNumberStart>t){const o=t,a=Math.min(i,r.rendLineNumberStart-1);o<=a&&(this._insertLinesBefore(r,o,a,s,t),r.linesLength+=a-o+1)}else if(r.rendLineNumberStart<t){const o=Math.min(r.linesLength,t-r.rendLineNumberStart);o>0&&(this._removeLinesBefore(r,o),r.linesLength-=o)}if(r.rendLineNumberStart=t,r.rendLineNumberStart+r.linesLength-1<i){const o=r.rendLineNumberStart+r.linesLength,a=i;o<=a&&(this._insertLinesAfter(r,o,a,s,t),r.linesLength+=a-o+1)}else if(r.rendLineNumberStart+r.linesLength-1>i){const o=Math.max(0,i-r.rendLineNumberStart+1),l=r.linesLength-1-o+1;l>0&&(this._removeLinesAfter(r,l),r.linesLength-=l)}return this._finishRendering(r,!1,s),r}_renderUntouchedLines(e,t,i,s,r){const o=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=i;l++){const c=o+l;a[l].layoutLine(c,s[c-r])}}_insertLinesBefore(e,t,i,s,r){const o=[];let a=0;for(let l=t;l<=i;l++)o[a++]=this.host.createVisibleLine();e.lines=o.concat(e.lines)}_removeLinesBefore(e,t){for(let i=0;i<t;i++){const s=e.lines[i].getDomNode();s&&this.domNode.removeChild(s)}e.lines.splice(0,t)}_insertLinesAfter(e,t,i,s,r){const o=[];let a=0;for(let l=t;l<=i;l++)o[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(o)}_removeLinesAfter(e,t){const i=e.linesLength-t;for(let s=0;s<t;s++){const r=e.lines[i+s].getDomNode();r&&this.domNode.removeChild(r)}e.lines.splice(i,t)}_finishRenderingNewLines(e,t,i,s){za._ttPolicy&&(i=za._ttPolicy.createHTML(i));const r=this.domNode.lastChild;t||!r?this.domNode.innerHTML=i:r.insertAdjacentHTML("afterend",i);let o=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];s[a]&&(l.setDomNode(o),o=o.previousSibling)}}_finishRenderingInvalidLines(e,t,i){const s=document.createElement("div");za._ttPolicy&&(t=za._ttPolicy.createHTML(t)),s.innerHTML=t;for(let r=0;r<e.linesLength;r++){const o=e.lines[r];if(i[r]){const a=s.firstChild,l=o.getDomNode();l.parentNode.replaceChild(a,l),o.setDomNode(a)}}}_finishRendering(e,t,i){const s=za._sb,r=e.linesLength,o=e.lines,a=e.rendLineNumberStart,l=[];{s.reset();let c=!1;for(let h=0;h<r;h++){const u=o[h];l[h]=!1,!(u.getDomNode()||!u.renderLine(h+a,i[h],this.viewportData,s))&&(l[h]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,s.build(),l)}{s.reset();let c=!1;const h=[];for(let u=0;u<r;u++){const d=o[u];h[u]=!1,!(l[u]||!d.renderLine(u+a,i[u],this.viewportData,s))&&(h[u]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,s.build(),h)}}}za._ttPolicy=(lD=window.trustedTypes)===null||lD===void 0?void 0:lD.createPolicy("editorViewLayer",{createHTML:n=>n});za._sb=lu(1e5);class fz extends Gs{constructor(e){super(e),this._visibleLines=new dz(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new tme(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=t;s<=i;s++)this._visibleLines.getVisibleLine(s).onConfigurationChanged(e);return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(i=>i.shouldRender());for(let i=0,s=t.length;i<s;i++){const r=t[i];r.prepareRender(e),r.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class tme{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(58),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=Ye(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(58)}renderLine(e,t,i,s){let r="";for(let o=0,a=this._dynamicOverlays.length;o<a;o++)r+=this._dynamicOverlays[o].render(i.startLineNumber,e);return this._renderedContent===r?!1:(this._renderedContent=r,s.appendASCIIString('<div style="position:absolute;top:'),s.appendASCIIString(String(t)),s.appendASCIIString("px;width:100%;height:"),s.appendASCIIString(String(this._lineHeight)),s.appendASCIIString('px;">'),s.appendASCIIString(r),s.appendASCIIString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}class ime extends fz{constructor(e){super(e);const i=this._context.configuration.options.get(129);this._contentWidth=i.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const i=this._context.configuration.options.get(129);return this._contentWidth=i.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class nme extends fz{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(129);this._contentLeft=i.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),Qi.applyFontInfo(this.domNode,t.get(43))}onConfigurationChanged(e){const t=this._context.configuration.options;Qi.applyFontInfo(this.domNode,t.get(43));const i=t.get(129);return this._contentLeft=i.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class pp{constructor(e,t){this._coordinateBrand=void 0,this.top=e,this.left=t}}class sme extends Gs{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=Ye(document.createElement("div")),aa.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=Ye(document.createElement("div")),aa.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onLineMappingChanged(e);return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}addWidget(e){const t=new rme(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,i){this._widgets[e.getId()].setPosition(t,i),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t];delete this._widgets[t];const s=i.domNode.domNode;s.parentNode.removeChild(s),s.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].render(e)}}class rme{constructor(e,t,i){this._context=e,this._viewDomNode=t,this._actual=i,this.domNode=Ye(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const s=this._context.configuration.options,r=s.get(129);this._fixedOverflowWidgets=s.get(36),this._contentWidth=r.contentWidth,this._contentLeft=r.contentLeft,this._lineHeight=s.get(58),this._range=null,this._viewRange=null,this._preference=[],this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(58),e.hasChanged(129)){const i=t.get(129);this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(e){this._setPosition(this._range)}_setPosition(e){if(this._range=e,this._viewRange=null,this._range){const t=this._context.model.validateModelRange(this._range);(this._context.model.coordinatesConverter.modelPositionIsVisible(t.getStartPosition())||this._context.model.coordinatesConverter.modelPositionIsVisible(t.getEndPosition()))&&(this._viewRange=this._context.model.coordinatesConverter.convertModelRangeToViewRange(t))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth:this._contentWidth}setPosition(e,t){this._setPosition(e),this._preference=t,this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1}_layoutBoxInViewport(e,t,i,s,r){const o=e.top,a=o,l=t.top+this._lineHeight,c=r.viewportHeight-l,h=o-s,u=a>=s,d=l,f=c>=s;let g=e.left,p=t.left;return g+i>r.scrollLeft+r.viewportWidth&&(g=r.scrollLeft+r.viewportWidth-i),p+i>r.scrollLeft+r.viewportWidth&&(p=r.scrollLeft+r.viewportWidth-i),g<r.scrollLeft&&(g=r.scrollLeft),p<r.scrollLeft&&(p=r.scrollLeft),{fitsAbove:u,aboveTop:h,aboveLeft:g,fitsBelow:f,belowTop:d,belowLeft:p}}_layoutHorizontalSegmentInPage(e,t,i,s){const r=Math.max(0,t.left-s),o=Math.min(t.left+t.width+s,e.width);let a=t.left+i-Xa.scrollX;if(a+s>o){const l=a-(o-s);a-=l,i-=l}if(a<r){const l=a-r;a-=l,i-=l}return[i,a]}_layoutBoxInPage(e,t,i,s,r){const o=e.top-s,a=t.top+this._lineHeight,l=Gi(this._viewDomNode.domNode),c=l.top+o-Xa.scrollY,h=l.top+a-Xa.scrollY,u=c1(document.body),[d,f]=this._layoutHorizontalSegmentInPage(u,l,e.left-r.scrollLeft+this._contentLeft,i),[g,p]=this._layoutHorizontalSegmentInPage(u,l,t.left-r.scrollLeft+this._contentLeft,i),_=22,v=22,b=c>=_,w=h+s<=u.height-v;return this._fixedOverflowWidgets?{fitsAbove:b,aboveTop:Math.max(c,_),aboveLeft:f,fitsBelow:w,belowTop:h,belowLeft:p}:{fitsAbove:b,aboveTop:o,aboveLeft:d,fitsBelow:w,belowTop:a,belowLeft:g}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new pp(e.top,e.left+this._contentLeft)}_getTopAndBottomLeft(e){if(!this._viewRange)return[null,null];const t=e.linesVisibleRangesForRange(this._viewRange,!1);if(!t||t.length===0)return[null,null];let i=t[0],s=t[0];for(const u of t)u.lineNumber<i.lineNumber&&(i=u),u.lineNumber>s.lineNumber&&(s=u);let r=1073741824;for(const u of i.ranges)u.left<r&&(r=u.left);let o=1073741824;for(const u of s.ranges)u.left<o&&(o=u.left);const a=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.scrollTop,l=new pp(a,r),c=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.scrollTop,h=new pp(c,o);return[l,h]}_prepareRenderWidget(e){const[t,i]=this._getTopAndBottomLeft(e);if(!t||!i)return null;if(this._cachedDomNodeClientWidth===-1||this._cachedDomNodeClientHeight===-1){let r=null;if(typeof this._actual.beforeRender=="function"&&(r=cD(this._actual.beforeRender,this._actual)),r)this._cachedDomNodeClientWidth=r.width,this._cachedDomNodeClientHeight=r.height;else{const o=this.domNode.domNode;this._cachedDomNodeClientWidth=o.clientWidth,this._cachedDomNodeClientHeight=o.clientHeight}}let s;if(this.allowEditorOverflow?s=this._layoutBoxInPage(t,i,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e):s=this._layoutBoxInViewport(t,i,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e),this._preference)for(let r=1;r<=2;r++)for(const o of this._preference)if(o===1){if(!s)return null;if(r===2||s.fitsAbove)return{coordinate:new pp(s.aboveTop,s.aboveLeft),position:1}}else if(o===2){if(!s)return null;if(r===2||s.fitsBelow)return{coordinate:new pp(s.belowTop,s.belowLeft),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(t),position:0}:{coordinate:t,position:0};return null}onBeforeRender(e){!this._viewRange||!this._preference||this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&cD(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&cD(this._actual.afterRender,this._actual,this._renderData.position)}}function cD(n,e,...t){try{return n.call(e,...t)}catch{return null}}let lI=!0;class gz extends Rg{constructor(e){super(),this._context=e;const t=this._context.configuration.options,i=t.get(129);this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new Se(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=lI?this._selections.slice(0,1):this._selections,i=t.map(r=>r.positionLineNumber);i.sort((r,o)=>r-o),ta(this._cursorLineNumbers,i)||(this._cursorLineNumbers=i,e=!0);const s=t.every(r=>r.isEmpty());return this._selectionIsEmpty!==s&&(this._selectionIsEmpty=s,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(129);return this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=this._renderOne(e),i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,r=this._cursorLineNumbers.length;let o=0;const a=[];for(let l=i;l<=s;l++){const c=l-i;for(;o<r&&this._cursorLineNumbers[o]<l;)o++;o<r&&this._cursorLineNumbers[o]===l?a[c]=t:a[c]=""}this._renderData=a}render(e,t){if(!this._renderData)return"";const i=t-e;return i>=this._renderData.length?"":this._renderData[i]}}class ome extends gz{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderOther(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class ame extends gz{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderThis(){return!0}_shouldRenderOther(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}kt((n,e)=>{lI=!1;const t=n.getColor(zge);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||n.defines(o4)){const i=n.getColor(o4);i&&(lI=!0,e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${i}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${i}; }`),n.type==="hc"&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});class lme extends Rg{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let i=[],s=0;for(let l=0,c=t.length;l<c;l++){const h=t[l];h.options.className&&(i[s++]=h)}i=i.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const h=l.options.className,u=c.options.className;return h<u?-1:h>u?1:I.compareRangesUsingStarts(l.range,c.range)});const r=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=[];for(let l=r;l<=o;l++){const c=l-r;a[c]=""}this._renderWholeLineDecorations(e,i,a),this._renderNormalDecorations(e,i,a),this._renderResult=a}_renderWholeLineDecorations(e,t,i){const s=String(this._lineHeight),r=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber;for(let a=0,l=t.length;a<l;a++){const c=t[a];if(!c.options.isWholeLine)continue;const h='<div class="cdr '+c.options.className+'" style="left:0;width:100%;height:'+s+'px;"></div>',u=Math.max(c.range.startLineNumber,r),d=Math.min(c.range.endLineNumber,o);for(let f=u;f<=d;f++){const g=f-r;i[g]+=h}}}_renderNormalDecorations(e,t,i){const s=String(this._lineHeight),r=e.visibleRange.startLineNumber;let o=null,a=!1,l=null;for(let c=0,h=t.length;c<h;c++){const u=t[c];if(u.options.isWholeLine)continue;const d=u.options.className,f=Boolean(u.options.showIfCollapsed);let g=u.range;if(f&&g.endColumn===1&&g.endLineNumber!==g.startLineNumber&&(g=new I(g.startLineNumber,g.startColumn,g.endLineNumber-1,this._context.model.getLineMaxColumn(g.endLineNumber-1))),o===d&&a===f&&I.areIntersectingOrTouching(l,g)){l=I.plusRange(l,g);continue}o!==null&&this._renderNormalDecoration(e,l,o,a,s,r,i),o=d,a=f,l=g}o!==null&&this._renderNormalDecoration(e,l,o,a,s,r,i)}_renderNormalDecoration(e,t,i,s,r,o,a){const l=e.linesVisibleRangesForRange(t,i==="findMatch");if(!!l)for(let c=0,h=l.length;c<h;c++){const u=l[c];if(u.outsideRenderedLine)continue;const d=u.lineNumber-o;if(s&&u.ranges.length===1){const f=u.ranges[0];f.width===0&&(u.ranges[0]=new F1(f.left,this._typicalHalfwidthCharacterWidth))}for(let f=0,g=u.ranges.length;f<g;f++){const p=u.ranges[f],_='<div class="cdr '+i+'" style="left:'+String(p.left)+"px;width:"+String(p.width)+"px;height:"+r+'px;"></div>';a[d]+=_}}}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class Ys extends q{onclick(e,t){this._register(K(e,de.CLICK,i=>t(new Vs(i))))}onmousedown(e,t){this._register(K(e,de.MOUSE_DOWN,i=>t(new Vs(i))))}onmouseover(e,t){this._register(K(e,de.MOUSE_OVER,i=>t(new Vs(i))))}onnonbubblingmouseout(e,t){this._register(AA(e,i=>t(new Vs(i))))}onkeydown(e,t){this._register(K(e,de.KEY_DOWN,i=>t(new Ft(i))))}onkeyup(e,t){this._register(K(e,de.KEY_UP,i=>t(new Ft(i))))}oninput(e,t){this._register(K(e,de.INPUT,t))}onblur(e,t){this._register(K(e,de.BLUR,t))}onfocus(e,t){this._register(K(e,de.FOCUS,t))}ignoreGesture(e){st.ignoreTarget(e)}}const Xf=11;class cme extends Ys{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top!="undefined"&&(this.bgDomNode.style.top="0px"),typeof e.left!="undefined"&&(this.bgDomNode.style.left="0px"),typeof e.bottom!="undefined"&&(this.bgDomNode.style.bottom="0px"),typeof e.right!="undefined"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...e.icon.classNamesArray),this.domNode.style.position="absolute",this.domNode.style.width=Xf+"px",this.domNode.style.height=Xf+"px",typeof e.top!="undefined"&&(this.domNode.style.top=e.top+"px"),typeof e.left!="undefined"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom!="undefined"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right!="undefined"&&(this.domNode.style.right=e.right+"px"),this._mouseMoveMonitor=this._register(new Bu),this.onmousedown(this.bgDomNode,t=>this._arrowMouseDown(t)),this.onmousedown(this.domNode,t=>this._arrowMouseDown(t)),this._mousedownRepeatTimer=this._register(new M0),this._mousedownScheduleRepeatTimer=this._register(new Wn)}_arrowMouseDown(e){const t=()=>{this._mousedownRepeatTimer.cancelAndSet(()=>this._onActivate(),41.666666666666664)};this._onActivate(),this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancelAndSet(t,200),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,Mg,i=>{},()=>{this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class hme extends q{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Wn)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode&&this._domNode.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode&&this._domNode.setClassName(this._invisibleClassName+(e?" fade":"")))}}const ume=140;class pz extends Ys{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new hme(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._mouseMoveMonitor=this._register(new Bu),this._shouldRender=!0,this.domNode=Ye(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this.onmousedown(this.domNode.domNode,t=>this._domNodeMouseDown(t))}_createArrow(e){const t=this._register(new cme(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,s){this.slider=Ye(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof i=="number"&&this.slider.setWidth(i),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this.onmousedown(this.slider.domNode,r=>{r.leftButton&&(r.preventDefault(),this._sliderMouseDown(r,()=>{}))}),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){!this._shouldRender||(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodeMouseDown(e){e.target===this.domNode.domNode&&this._onMouseDown(e)}delegateMouseDown(e){const t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),s=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderMousePosition(e);i<=r&&r<=s?e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{})):this._onMouseDown(e)}_onMouseDown(e){let t,i;if(e.target===this.domNode.domNode&&typeof e.browserEvent.offsetX=="number"&&typeof e.browserEvent.offsetY=="number")t=e.browserEvent.offsetX,i=e.browserEvent.offsetY;else{const r=Gi(this.domNode.domNode);t=e.posx-r.left,i=e.posy-r.top}const s=this._mouseDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{}))}_sliderMouseDown(e,t){const i=this._sliderMousePosition(e),s=this._sliderOrthogonalMousePosition(e),r=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,Mg,o=>{const a=this._sliderOrthogonalMousePosition(o),l=Math.abs(a-s);if(Zi&&l>ume){this._setDesiredScrollPositionNow(r.getScrollPosition());return}const h=this._sliderMousePosition(o)-i;this._setDesiredScrollPositionNow(r.getDesiredScrollPositionFromDelta(h))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd(),t()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const dme=20;class C_{constructor(e,t,i,s,r,o){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(e),this._visibleSize=s,this._scrollSize=r,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new C_(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,i,s,r){const o=Math.max(0,i-e),a=Math.max(0,o-2*t),l=s>0&&s>i;if(!l)return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(dme,Math.floor(i*a/s))),h=(a-c)/(s-i),u=r*h;return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:h,computedSliderPosition:Math.round(u)}}_refreshComputedValues(){const e=C_._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let i=this._scrollPosition;return t<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}const fme=Er("scrollbar-button-left",se.triangleLeft),gme=Er("scrollbar-button-right",se.triangleRight);class pme extends pz{constructor(e,t,i){const s=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new C_(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,s.width,s.scrollWidth,r.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const o=(t.arrowSize-Xf)/2,a=(t.horizontalScrollbarSize-Xf)/2;this._createArrow({className:"scra",icon:fme,top:a,left:o,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Of(null,1,0))}),this._createArrow({className:"scra",icon:gme,top:a,left:void 0,bottom:void 0,right:o,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Of(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return e}_sliderMousePosition(e){return e.posx}_sliderOrthogonalMousePosition(e){return e.posy}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}const mme=Er("scrollbar-button-up",se.triangleUp),_me=Er("scrollbar-button-down",se.triangleDown);class bme extends pz{constructor(e,t,i){const s=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new C_(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,s.height,s.scrollHeight,r.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const o=(t.arrowSize-Xf)/2,a=(t.verticalScrollbarSize-Xf)/2;this._createArrow({className:"scra",icon:mme,top:o,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Of(null,0,1))}),this._createArrow({className:"scra",icon:_me,top:void 0,left:a,bottom:o,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Of(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return t}_sliderMousePosition(e){return e.posy}_sliderOrthogonalMousePosition(e){return e.posx}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class NC{constructor(e,t,i,s,r,o){this._scrollStateBrand=void 0,e=e|0,t=t|0,i=i|0,s=s|0,r=r|0,o=o|0,this.rawScrollLeft=i,this.rawScrollTop=o,e<0&&(e=0),i+e>t&&(i=t-e),i<0&&(i=0),s<0&&(s=0),o+s>r&&(o=r-s),o<0&&(o=0),this.width=e,this.scrollWidth=t,this.scrollLeft=i,this.height=s,this.scrollHeight=r,this.scrollTop=o}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new NC(typeof e.width!="undefined"?e.width:this.width,typeof e.scrollWidth!="undefined"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height!="undefined"?e.height:this.height,typeof e.scrollHeight!="undefined"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new NC(this.width,this.scrollWidth,typeof e.scrollLeft!="undefined"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop!="undefined"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const i=this.width!==e.width,s=this.scrollWidth!==e.scrollWidth,r=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:s,scrollLeftChanged:r,heightChanged:o,scrollHeightChanged:a,scrollTopChanged:l}}}class j1 extends q{constructor(e,t){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new R),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e,this._scheduleAtNextAnimationFrame=t,this._state=new NC(0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){const i=this._state.withScrollDimensions(e,t);this._setState(i,Boolean(this._smoothScrolling)),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft=="undefined"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop=="undefined"?this._smoothScrolling.to.scrollTop:e.scrollTop};const i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let s;t?s=new y_(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):s=this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{const i=this._state.withScrollPosition(e);this._smoothScrolling=y_.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{!this._smoothScrolling||(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{!this._smoothScrolling||(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}}class v4{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}}function hD(n,e){const t=e-n;return function(i){return n+t*Cme(i)}}function vme(n,e,t){return function(i){return i<t?n(i/t):e((i-t)/(1-t))}}class y_{constructor(e,t,i,s){this.from=e,this.to=t,this.duration=s,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,i){if(Math.abs(e-t)>2.5*i){let r,o;return e<t?(r=e+.75*i,o=t-.75*i):(r=e-.75*i,o=t+.75*i),vme(hD(e,r),hD(o,t),.33)}return hD(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const i=this.scrollLeft(t),s=this.scrollTop(t);return new v4(i,s,!1)}return new v4(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,i){return y_.start(e,t,i)}static start(e,t,i){i=i+10;const s=Date.now()-10;return new y_(e,t,s,i)}}function wme(n){return Math.pow(n,3)}function Cme(n){return 1-wme(1-n)}const yme=500,w4=50;class Sme{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}}class cI{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,i=1,s=this._rear;do{const r=s===this._front?e:Math.pow(2,-i);if(e-=r,t+=this._memory[s].score*r,s===this._front)break;s=(this._capacity+s-1)%this._capacity,i++}while(!0);return t<=.5}accept(e,t,i){const s=new Sme(e,t,i);s.score=this._computeScore(s),this._front===-1&&this._rear===-1?(this._memory[0]=s,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=s)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}cI.INSTANCE=new cI;class mz extends Ys{constructor(e,t,i){super(),this._onScroll=this._register(new R),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new R),e.style.overflow="hidden",this._options=xme(t),this._scrollable=i,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));const s={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new bme(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new pme(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Ye(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Ye(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Ye(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onnonbubblingmouseout(this._listenOnDomNode,r=>this._onMouseOut(r)),this._hideTimeout=this._register(new Wn),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=He(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarMouseDown(e){this._verticalScrollbar.delegateMouseDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,je&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel!="undefined"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity!="undefined"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity!="undefined"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis!="undefined"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal!="undefined"&&(this._options.horizontal=e.horizontal),typeof e.vertical!="undefined"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize!="undefined"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize!="undefined"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage!="undefined"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=He(this._mouseWheelToDispose),e)){const i=s=>{this._onMouseWheel(new Of(s))};this._mouseWheelToDispose.push(K(this._listenOnDomNode,de.MOUSE_WHEEL,i,{passive:!1}))}}_onMouseWheel(e){const t=cI.INSTANCE;{const r=window.devicePixelRatio/aae();Zi||Fn?t.accept(Date.now(),e.deltaX/r,e.deltaY/r):t.accept(Date.now(),e.deltaX,e.deltaY)}let i=!1;if(e.deltaY||e.deltaX){let r=e.deltaY*this._options.mouseWheelScrollSensitivity,o=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(r)>=Math.abs(o)?o=0:r=0),this._options.flipAxes&&([r,o]=[o,r]);const a=!je&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!o&&(o=r,r=0),e.browserEvent&&e.browserEvent.altKey&&(o=o*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);const l=this._scrollable.getFutureScrollPosition();let c={};if(r){const h=w4*r,u=l.scrollTop-(h<0?Math.floor(h):Math.ceil(h));this._verticalScrollbar.writeScrollPosition(c,u)}if(o){const h=w4*o,u=l.scrollLeft-(h<0?Math.floor(h):Math.ceil(h));this._horizontalScrollbar.writeScrollPosition(c,u)}c=this._scrollable.validateScrollPosition(c),(l.scrollLeft!==c.scrollLeft||l.scrollTop!==c.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(c):this._scrollable.setScrollPositionNow(c),i=!0)}let s=i;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(!!this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,s=i?" left":"",r=t?" top":"",o=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${o}${r}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseOut(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),yme)}}class P2 extends mz{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new j1(0,s=>na(s));super(e,t,i),this._register(i)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class B2 extends mz{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class q1 extends P2{constructor(e,t){super(e,t),this._element=e,this.onScroll(i=>{i.scrollTopChanged&&(this._element.scrollTop=i.scrollTop),i.scrollLeftChanged&&(this._element.scrollLeft=i.scrollLeft)}),this.scanDomNode()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function xme(n){const e={lazyRender:typeof n.lazyRender!="undefined"?n.lazyRender:!1,className:typeof n.className!="undefined"?n.className:"",useShadows:typeof n.useShadows!="undefined"?n.useShadows:!0,handleMouseWheel:typeof n.handleMouseWheel!="undefined"?n.handleMouseWheel:!0,flipAxes:typeof n.flipAxes!="undefined"?n.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof n.consumeMouseWheelIfScrollbarIsNeeded!="undefined"?n.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof n.alwaysConsumeMouseWheel!="undefined"?n.alwaysConsumeMouseWheel:!1,scrollYToX:typeof n.scrollYToX!="undefined"?n.scrollYToX:!1,mouseWheelScrollSensitivity:typeof n.mouseWheelScrollSensitivity!="undefined"?n.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof n.fastScrollSensitivity!="undefined"?n.fastScrollSensitivity:5,scrollPredominantAxis:typeof n.scrollPredominantAxis!="undefined"?n.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof n.mouseWheelSmoothScroll!="undefined"?n.mouseWheelSmoothScroll:!0,arrowSize:typeof n.arrowSize!="undefined"?n.arrowSize:11,listenOnDomNode:typeof n.listenOnDomNode!="undefined"?n.listenOnDomNode:null,horizontal:typeof n.horizontal!="undefined"?n.horizontal:1,horizontalScrollbarSize:typeof n.horizontalScrollbarSize!="undefined"?n.horizontalScrollbarSize:10,horizontalSliderSize:typeof n.horizontalSliderSize!="undefined"?n.horizontalSliderSize:0,horizontalHasArrows:typeof n.horizontalHasArrows!="undefined"?n.horizontalHasArrows:!1,vertical:typeof n.vertical!="undefined"?n.vertical:1,verticalScrollbarSize:typeof n.verticalScrollbarSize!="undefined"?n.verticalScrollbarSize:10,verticalHasArrows:typeof n.verticalHasArrows!="undefined"?n.verticalHasArrows:!1,verticalSliderSize:typeof n.verticalSliderSize!="undefined"?n.verticalSliderSize:0,scrollByPage:typeof n.scrollByPage!="undefined"?n.scrollByPage:!1};return e.horizontalSliderSize=typeof n.horizontalSliderSize!="undefined"?n.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof n.verticalSliderSize!="undefined"?n.verticalSliderSize:e.verticalScrollbarSize,je&&(e.className+=" mac"),e}class Dme extends Gs{constructor(e,t,i,s){super(e);const r=this._context.configuration.options,o=r.get(91),a=r.get(66),l=r.get(34),c=r.get(94),h={listenOnDomNode:i.domNode,className:"editor-scrollable "+vC(e.theme.type),useShadows:!1,lazyRender:!0,vertical:o.vertical,horizontal:o.horizontal,verticalHasArrows:o.verticalHasArrows,horizontalHasArrows:o.horizontalHasArrows,verticalScrollbarSize:o.verticalScrollbarSize,verticalSliderSize:o.verticalSliderSize,horizontalScrollbarSize:o.horizontalScrollbarSize,horizontalSliderSize:o.horizontalSliderSize,handleMouseWheel:o.handleMouseWheel,alwaysConsumeMouseWheel:o.alwaysConsumeMouseWheel,arrowSize:o.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:o.scrollByPage};this.scrollbar=this._register(new B2(t.domNode,h,this._context.viewLayout.getScrollable())),aa.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=Ye(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const u=(d,f,g)=>{const p={};if(f){const _=d.scrollTop;_&&(p.scrollTop=this._context.viewLayout.getCurrentScrollTop()+_,d.scrollTop=0)}if(g){const _=d.scrollLeft;_&&(p.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+_,d.scrollLeft=0)}this._context.model.setScrollPosition(p,1)};this._register(K(i.domNode,"scroll",d=>u(i.domNode,!0,!0))),this._register(K(t.domNode,"scroll",d=>u(t.domNode,!0,!1))),this._register(K(s.domNode,"scroll",d=>u(s.domNode,!0,!1))),this._register(K(this.scrollbarDomNode.domNode,"scroll",d=>u(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(129);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(64).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarMouseDown(e){this.scrollbar.delegateVerticalScrollbarMouseDown(e)}onConfigurationChanged(e){if(e.hasChanged(91)||e.hasChanged(66)||e.hasChanged(34)){const t=this._context.configuration.options,i=t.get(91),s=t.get(66),r=t.get(34),o=t.get(94),a={vertical:i.vertical,horizontal:i.horizontal,verticalScrollbarSize:i.verticalScrollbarSize,horizontalScrollbarSize:i.horizontalScrollbarSize,scrollByPage:i.scrollByPage,handleMouseWheel:i.handleMouseWheel,mouseWheelScrollSensitivity:s,fastScrollSensitivity:r,scrollPredominantAxis:o};this.scrollbar.updateOptions(a)}return e.hasChanged(129)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+vC(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}kt((n,e)=>{const t=n.getColor(W0);t&&e.addRule(`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${t} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${t} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${t} 6px 6px 6px -6px inset;
			}
		`);const i=n.getColor(fm);i&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${i};
			}
		`);const s=n.getColor(gm);s&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${s};
			}
		`);const r=n.getColor(pm);r&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${r};
			}
		`)});class AC{constructor(e,t,i){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(i)}}class V2 extends Rg{_render(e,t,i){const s=[];for(let a=e;a<=t;a++){const l=a-e;s[l]=[]}if(i.length===0)return s;i.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let r=null,o=0;for(let a=0,l=i.length;a<l;a++){const c=i[a],h=c.className;let u=Math.max(c.startLineNumber,e)-e;const d=Math.min(c.endLineNumber,t)-e;r===h?(u=Math.max(o+1,u),o=Math.max(o,d)):(r=h,o=d);for(let f=u;f<=o;f++)s[f].push(r)}return s}}class Lme extends V2{constructor(e){super(),this._context=e;const t=this._context.configuration.options,i=t.get(129);this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(129);return this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let i=[],s=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.glyphMarginClassName;l&&(i[s++]=new AC(a.range.startLineNumber,a.range.endLineNumber,l))}return i}prepareRender(e){if(!this._glyphMargin){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._render(t,i,this._getDecorations(e)),r=this._lineHeight.toString(),o=this._glyphMarginLeft.toString(),a=this._glyphMarginWidth.toString(),l='" style="left:'+o+"px;width:"+a+"px;height:"+r+'px;"></div>',c=[];for(let h=t;h<=i;h++){const u=h-t,d=s[u];d.length===0?c[u]="":c[u]='<div class="cgmr codicon '+d.join(" ")+l}this._renderResult=c}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class kme extends Rg{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,i=t.get(130),s=t.get(43);this._lineHeight=t.get(58),this._spaceWidth=s.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(130),s=t.get(43);return this._lineHeight=t.get(58),this._spaceWidth=s.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),!0}onCursorStateChanged(e){var t;const s=e.selections[0].getPosition();return!((t=this._primaryPosition)===null||t===void 0)&&t.equals(s)?!1:(this._primaryPosition=s,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,i,s,r;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const o=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,c=this._lineHeight,h=this._primaryPosition,u=this.getGuidesByLine(o,a,h),d=[];for(let f=o;f<=a;f++){const g=f-o,p=u[g];let _="";const v=(i=(t=e.visibleRangeForPosition(new P(f,1)))===null||t===void 0?void 0:t.left)!==null&&i!==void 0?i:0;for(const b of p){const w=v+(b.visibleColumn-1)*this._spaceWidth;if(w>l||this._maxIndentLeft>0&&w>this._maxIndentLeft)break;const C=b.horizontalLine?b.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",y=b.horizontalLine?((r=(s=e.visibleRangeForPosition(new P(f,b.horizontalLine.endColumn)))===null||s===void 0?void 0:s.left)!==null&&r!==void 0?r:w+this._spaceWidth)-w:this._spaceWidth;_+=`<div class="core-guide ${b.className} ${C}" style="left:${w}px;height:${c}px;width:${y}px"></div>`}d[g]=_}this._renderResult=d}getGuidesByLine(e,t,i){const s=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.model.getBracketGuidesInRangeByLine(e,t,i,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?Ph.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?Ph.EnabledForActive:Ph.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,r=this._bracketPairGuideOptions.indentation?this._context.model.getLinesIndentGuides(e,t):null;let o=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation&&i){const u=this._context.model.getActiveIndentGuide(i.lineNumber,e,t);o=u.startLineNumber,a=u.endLineNumber,l=u.indent}const{indentSize:c}=this._context.model.getTextModelOptions(),h=[];for(let u=e;u<=t;u++){const d=new Array;h.push(d);const f=s?s[u-e]:[],g=new tm(f),p=r?r[u-e]:[];for(let _=1;_<=p;_++){const v=(_-1)*c+1,b=f.length===0&&o<=u&&u<=a&&_===l;d.push(...g.takeWhile(C=>C.visibleColumn<v)||[]);const w=g.peek();(!w||w.visibleColumn!==v||w.horizontalLine)&&d.push(new Bd(v,b?"core-guide-indent-active":"core-guide-indent",null))}d.push(...g.takeWhile(_=>!0)||[])}return h}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}function zb(n){if(!(n&&n.isTransparent()))return n}kt((n,e)=>{const t=n.getColor(z1);t&&e.addRule(`.monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ${t} inset; }`);const i=n.getColor(H1)||t;i&&e.addRule(`.monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ${i} inset; }`);const s=[{bracketColor:ez,guideColor:ope,guideColorActive:dpe},{bracketColor:tz,guideColor:ape,guideColorActive:fpe},{bracketColor:iz,guideColor:lpe,guideColorActive:gpe},{bracketColor:nz,guideColor:cpe,guideColorActive:ppe},{bracketColor:sz,guideColor:hpe,guideColorActive:mpe},{bracketColor:rz,guideColor:upe,guideColorActive:_pe}],r=new az;let o=s.map(a=>{var l,c;const h=n.getColor(a.bracketColor),u=n.getColor(a.guideColor),d=n.getColor(a.guideColorActive),f=zb((l=zb(u))!==null&&l!==void 0?l:h==null?void 0:h.transparent(.3)),g=zb((c=zb(d))!==null&&c!==void 0?c:h);if(!(!f||!g))return{guideColor:f,guideColorActive:g}}).filter(_le);if(o.length>0){for(let a=0;a<30;a++){const l=o[a%o.length];e.addRule(`.monaco-editor .${r.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${r.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${r.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${r.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}});class Eme{constructor(){this._currentVisibleRange=new I(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class Ime{constructor(e,t,i,s,r,o){this.lineNumber=e,this.startColumn=t,this.endColumn=i,this.startScrollTop=s,this.stopScrollTop=r,this.scrollType=o,this.type="range",this.minLineNumber=e,this.maxLineNumber=e}}class Tme{constructor(e,t,i,s){this.selections=e,this.startScrollTop=t,this.stopScrollTop=i,this.scrollType=s,this.type="selections";let r=e[0].startLineNumber,o=e[0].endLineNumber;for(let a=1,l=e.length;a<l;a++){const c=e[a];r=Math.min(r,c.startLineNumber),o=Math.max(o,c.endLineNumber)}this.minLineNumber=r,this.maxLineNumber=o}}class K1 extends Gs{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new dz(this),this.domNode=this._visibleLines.domNode;const i=this._context.configuration,s=this._context.configuration.options,r=s.get(43),o=s.get(130);this._lineHeight=s.get(58),this._typicalHalfwidthCharacterWidth=r.typicalHalfwidthCharacterWidth,this._isViewportWrapping=o.isViewportWrapping,this._revealHorizontalRightPadding=s.get(88),this._cursorSurroundingLines=s.get(25),this._cursorSurroundingLinesStyle=s.get(26),this._canUseLayerHinting=!s.get(28),this._viewLineOptions=new PP(i,this._context.theme.type),aa.write(this.domNode,7),this.domNode.setClassName(`view-lines ${$h}`),Qi.applyFontInfo(this.domNode,r),this._maxLineWidth=0,this._asyncUpdateLineWidths=new Wt(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new Wt(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new Eme,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new Vo(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(130)&&(this._maxLineWidth=0);const t=this._context.configuration.options,i=t.get(43),s=t.get(130);return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=t.get(88),this._cursorSurroundingLines=t.get(25),this._cursorSurroundingLinesStyle=t.get(26),this._canUseLayerHinting=!t.get(28),Qi.applyFontInfo(this.domNode,i),this._onOptionsMaybeChanged(),e.hasChanged(129)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new PP(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const i=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=i;r<=s;r++)this._visibleLines.getVisibleLine(r).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let s=!1;for(let r=t;r<=i;r++)s=this._visibleLines.getVisibleLine(r).onSelectionChanged()||s;return s}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=t;s<=i;s++)this._visibleLines.getVisibleLine(s).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.range,e.selections,e.verticalType);if(t===-1)return!1;let i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new Ime(e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new Tme(e.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const r=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.model.setScrollPosition(i,r),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.model.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const i=this._getViewLineDomNode(e);if(i===null)return null;const s=this._getLineNumberFor(i);if(s===-1||s<1||s>this._context.model.getLineCount())return null;if(this._context.model.getLineMaxColumn(s)===1)return new P(s,1);const r=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();if(s<r||s>o)return null;let a=this._visibleLines.getVisibleLine(s).getColumnOfNodeOffset(s,e,t);const l=this._context.model.getLineMinColumn(s);return a<l&&(a=l),new P(s,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===Vo.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=t;s<=i;s++){const r=this._visibleLines.getVisibleLine(s);if(e===r.getDomNode())return s}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();return e<t||e>i?-1:this._visibleLines.getVisibleLine(e).getWidth()}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const i=e.endLineNumber,s=I.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!s)return null;let r=[],o=0;const a=new FP(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new P(s.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),h=this._visibleLines.getEndLineNumber();for(let u=s.startLineNumber;u<=s.endLineNumber;u++){if(u<c||u>h)continue;const d=u===s.startLineNumber?s.startColumn:1,f=u===s.endLineNumber?s.endColumn:this._context.model.getLineMaxColumn(u),g=this._visibleLines.getVisibleLine(u).getVisibleRangesForRange(u,d,f,a);if(!!g){if(t&&u<i){const p=l;l=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new P(u+1,1)).lineNumber,p!==l&&(g.ranges[g.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}r[o++]=new Xue(g.outsideRenderedLine,u,F1.from(g.ranges))}}return o===0?null:r}_visibleRangesForLineRange(e,t,i){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,i,new FP(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new Que(t.outsideRenderedLine,t.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let s=1,r=!0;for(let o=t;o<=i;o++){const a=this._visibleLines.getVisibleLine(o);if(e&&!a.getWidthIsFast()){r=!1;continue}s=Math.max(s,a.getWidth())}return r&&t===1&&i===this._context.model.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(s),r}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const i=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=i;r<=s;r++){const o=this._visibleLines.getVisibleLine(r);if(o.needsMonospaceFontCheck()){const a=o.getWidth();a>t&&(t=a,e=r)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let r=i;r<=s;r++)this._visibleLines.getVisibleLine(r).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const i=this._horizontalRevealRequest;if(e.startLineNumber<=i.minLineNumber&&i.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const s=this._computeScrollLeftToReveal(i);s&&(this._isViewportWrapping||this._ensureMaxLineWidth(s.maxHorizontalOffset),this._context.model.setScrollPosition({scrollLeft:s.scrollLeft},i.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),Fn&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const i=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=i;r<=s;r++)if(this._visibleLines.getVisibleLine(r).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.model.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,i,s,r){const o=e.top,a=e.height,l=o+a;let c,h,u;if(s&&s.length>0){let g=s[0].startLineNumber,p=s[0].endLineNumber;for(let _=1,v=s.length;_<v;_++){const b=s[_];g=Math.min(g,b.startLineNumber),p=Math.max(p,b.endLineNumber)}c=!1,h=this._context.viewLayout.getVerticalOffsetForLineNumber(g),u=this._context.viewLayout.getVerticalOffsetForLineNumber(p)+this._lineHeight}else if(i)c=!0,h=this._context.viewLayout.getVerticalOffsetForLineNumber(i.startLineNumber),u=this._context.viewLayout.getVerticalOffsetForLineNumber(i.endLineNumber)+this._lineHeight;else return-1;if(!(t==="mouse"&&this._cursorSurroundingLinesStyle==="default")){const g=Math.min(a/this._lineHeight/2,this._cursorSurroundingLines);h-=g*this._lineHeight,u+=Math.max(0,g-1)*this._lineHeight}(r===0||r===4)&&(u+=this._lineHeight);let f;if(u-h>a){if(!c)return-1;f=h}else if(r===5||r===6)if(r===6&&o<=h&&u<=l)f=o;else{const g=Math.max(5*this._lineHeight,a*.2),p=h-g,_=u-a;f=Math.max(_,p)}else if(r===1||r===2)if(r===2&&o<=h&&u<=l)f=o;else{const g=(h+u)/2;f=Math.max(0,g-a/2)}else f=this._computeMinimumScrolling(o,l,h,u,r===3,r===4);return f}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),i=t.left,s=i+t.width;let r=1073741824,o=0;if(e.type==="range"){const l=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!l)return null;for(const c of l.ranges)r=Math.min(r,Math.round(c.left)),o=Math.max(o,Math.round(c.left+c.width))}else for(const l of e.selections){if(l.startLineNumber!==l.endLineNumber)return null;const c=this._visibleRangesForLineRange(l.startLineNumber,l.startColumn,l.endColumn);if(!c)return null;for(const h of c.ranges)r=Math.min(r,Math.round(h.left)),o=Math.max(o,Math.round(h.left+h.width))}return r=Math.max(0,r-K1.HORIZONTAL_EXTRA_PX),o+=this._revealHorizontalRightPadding,e.type==="selections"&&o-r>t.width?null:{scrollLeft:this._computeMinimumScrolling(i,s,r,o),maxHorizontalOffset:o}}_computeMinimumScrolling(e,t,i,s,r,o){e=e|0,t=t|0,i=i|0,s=s|0,r=!!r,o=!!o;const a=t-e;if(s-i<a){if(r)return i;if(o)return Math.max(0,s-a);if(i<e)return i;if(s>t)return Math.max(0,s-a)}else return i;return e}}K1.HORIZONTAL_EXTRA_PX=30;class Nme extends V2{constructor(e){super(),this._context=e;const i=this._context.configuration.options.get(129);this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const i=this._context.configuration.options.get(129);return this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let i=[],s=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.linesDecorationsClassName;l&&(i[s++]=new AC(a.range.startLineNumber,a.range.endLineNumber,l));const c=a.options.firstLineDecorationClassName;c&&(i[s++]=new AC(a.range.startLineNumber,a.range.startLineNumber,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._render(t,i,this._getDecorations(e)),r=this._decorationsLeft.toString(),o=this._decorationsWidth.toString(),a='" style="left:'+r+"px;width:"+o+'px;"></div>',l=[];for(let c=t;c<=i;c++){const h=c-t,u=s[h];let d="";for(let f=0,g=u.length;f<g;f++)d+='<div class="cldr '+u[f]+a;l[h]=d}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class Ame extends V2{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let i=[],s=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.marginClassName;l&&(i[s++]=new AC(a.range.startLineNumber,a.range.endLineNumber,l))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._render(t,i,this._getDecorations(e)),r=[];for(let o=t;o<=i;o++){const a=o-t,l=s[a];let c="";for(let h=0,u=l.length;h<u;h++)c+='<div class="cmdr '+l[h]+'" style=""></div>';r[a]=c}this._renderResult=r}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class Ws{constructor(e,t,i,s){this._rgba8Brand=void 0,this.r=Ws._clamp(e),this.g=Ws._clamp(t),this.b=Ws._clamp(i),this.a=Ws._clamp(s)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}Ws.Empty=new Ws(0,0,0,0);class z0 extends q{constructor(){super(),this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Zt.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}static getInstance(){return this._INSTANCE||(this._INSTANCE=new z0),this._INSTANCE}_updateColorMap(){const e=Zt.getColorMap();if(!e){this._colors=[Ws.Empty],this._backgroundIsLight=!0;return}this._colors=[Ws.Empty];for(let i=1;i<e.length;i++){const s=e[i].rgba;this._colors[i]=new Ws(s.r,s.g,s.b,Math.round(s.a*255))}let t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}z0._INSTANCE=null;const Mme=(()=>{const n=[];for(let e=32;e<=126;e++)n.push(e);return n.push(65533),n})(),Rme=(n,e)=>(n-=32,n<0||n>96?e<=2?(n+96)%96:96-1:n);class S_{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=S_.soften(e,12/15),this.charDataLight=S_.soften(e,50/60)}static soften(e,t){let i=new Uint8ClampedArray(e.length);for(let s=0,r=e.length;s<r;s++)i[s]=sC(e[s]*t);return i}renderChar(e,t,i,s,r,o,a,l,c,h,u){const d=1*this.scale,f=2*this.scale,g=u?1:f;if(t+d>e.width||i+g>e.height){console.warn("bad render request outside image data");return}const p=h?this.charDataLight:this.charDataNormal,_=Rme(s,c),v=e.width*4,b=a.r,w=a.g,C=a.b,y=r.r-b,D=r.g-w,S=r.b-C,x=Math.max(o,l),k=e.data;let F=_*d*f,A=i*v+t*4;for(let z=0;z<g;z++){let H=A;for(let te=0;te<d;te++){const ie=p[F++]/255*(o/255);k[H++]=b+y*ie,k[H++]=w+D*ie,k[H++]=C+S*ie,k[H++]=x}A+=v}}blockRenderChar(e,t,i,s,r,o,a,l){const c=1*this.scale,h=2*this.scale,u=l?1:h;if(t+c>e.width||i+u>e.height){console.warn("bad render request outside image data");return}const d=e.width*4,f=.5*(r/255),g=o.r,p=o.g,_=o.b,v=s.r-g,b=s.g-p,w=s.b-_,C=g+v*f,y=p+b*f,D=_+w*f,S=Math.max(r,a),x=e.data;let k=i*d+t*4;for(let F=0;F<u;F++){let A=k;for(let z=0;z<c;z++)x[A++]=C,x[A++]=y,x[A++]=D,x[A++]=S;k+=d}}}const C4={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,A:10,B:11,C:12,D:13,E:14,F:15},y4=n=>{const e=new Uint8ClampedArray(n.length/2);for(let t=0;t<n.length;t+=2)e[t>>1]=C4[n[t]]<<4|C4[n[t+1]]&15;return e},S4={1:su(()=>y4("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:su(()=>y4("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class bm{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let i;return S4[e]?i=new S_(S4[e](),e):i=bm.createFromSampleData(bm.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=i,i}static createSampleData(e){const t=document.createElement("canvas"),i=t.getContext("2d");t.style.height=`${16}px`,t.height=16,t.width=96*10,t.style.width=96*10+"px",i.fillStyle="#ffffff",i.font=`bold ${16}px ${e}`,i.textBaseline="middle";let s=0;for(const r of Mme)i.fillText(String.fromCharCode(r),s,16/2),s+=10;return i.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");let s=bm._downsample(e,t);return new S_(s,t)}static _downsampleChar(e,t,i,s,r){const o=1*r,a=2*r;let l=s,c=0;for(let h=0;h<a;h++){const u=h/a*16,d=(h+1)/a*16;for(let f=0;f<o;f++){const g=f/o*10,p=(f+1)/o*10;let _=0,v=0;for(let w=u;w<d;w++){const C=t+Math.floor(w)*3840,y=1-(w-Math.floor(w));for(let D=g;D<p;D++){const S=1-(D-Math.floor(D)),x=C+Math.floor(D)*4,k=S*y;v+=k,_+=e[x]*e[x+3]/255*k}}const b=_/v;c=Math.max(c,b),i[l++]=sC(b)}}return c}static _downsample(e,t){const i=2*t*1*t,s=i*96,r=new Uint8ClampedArray(s);let o=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,r,o,t)),o+=i,a+=10*4;if(l>0){const c=255/l;for(let h=0;h<s;h++)r[h]*=c}return r}}const Ome=140,Fme=2;class x_{constructor(e,t,i){const s=e.options,r=s.get(127),o=s.get(129),a=o.minimap,l=s.get(43),c=s.get(64);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=s.get(93),this.showSlider=c.showSlider,this.pixelRatio=r,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=s.get(58),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=o.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=su(()=>bm.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=i.getColor(2),this.backgroundColor=x_._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=x_._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const i=e.getColor(Nge);return i?new Ws(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(Age);return t?Ws._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class vm{constructor(e,t,i,s,r,o,a,l){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=i,this._computedSliderRatio=s,this.sliderTop=r,this.sliderHeight=o,this.startLineNumber=a,this.endLineNumber=l}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(e,t,i,s,r,o,a,l,c,h,u){const d=e.pixelRatio,f=e.minimapLineHeight,g=Math.floor(e.canvasInnerHeight/f),p=e.lineHeight;if(e.minimapHeightIsEditorHeight){const y=l*e.lineHeight+(e.scrollBeyondLastLine?r-e.lineHeight:0),D=Math.max(1,Math.floor(r*r/y)),S=Math.max(0,e.minimapHeight-D),x=S/(h-r),k=c*x,F=S>0,A=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new vm(c,h,F,x,k,D,1,Math.min(a,A))}let _;if(o&&i!==a){const y=i-t+1;_=Math.floor(y*f/d)}else{const y=r/p;_=Math.floor(y*f/d)}let v;e.scrollBeyondLastLine?v=(a-1)*f/d:v=Math.max(0,a*f/d-_),v=Math.min(e.minimapHeight-_,v);const b=v/(h-r),w=c*b;let C=0;if(e.scrollBeyondLastLine&&(C=r/p-1),g>=a+C){const D=a,S=v>0;return new vm(c,h,S,b,w,_,1,D)}else{let y=Math.max(1,Math.floor(t-w*d/f));u&&u.scrollHeight===h&&(u.scrollTop>c&&(y=Math.min(y,u.startLineNumber)),u.scrollTop<c&&(y=Math.max(y,u.startLineNumber)));const D=Math.min(a,y+g-1),S=(c-s)/p,x=(t-y+S)*f/d;return new vm(c,h,!0,b,x,_,y,D)}}}class MC{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}MC.INVALID=new MC(-1);class x4{constructor(e,t,i){this.renderedLayout=e,this._imageData=t,this._renderedLines=new uz(()=>MC.INVALID),this._renderedLines._set(e.startLineNumber,i)}linesEquals(e){if(!this.scrollEquals(e))return!1;const i=this._renderedLines._get().lines;for(let s=0,r=i.length;s<r;s++)if(i[s].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class W2{constructor(e,t,i,s){this._backgroundFillData=W2._createBackgroundFillData(t,i,s),this._buffers=[e.createImageData(t,i),e.createImageData(t,i)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,i){const s=i.r,r=i.g,o=i.b,a=i.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let h=0;h<t;h++)for(let u=0;u<e;u++)l[c]=s,l[c+1]=r,l[c+2]=o,l[c+3]=a,c+=4;return l}}class D_{constructor(e,t){this.samplingRatio=e,this.minimapLines=t}static compute(e,t,i){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const s=e.pixelRatio,r=e.lineHeight,o=e.scrollBeyondLastLine,{minimapLineCount:a}=tf.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:o,height:e.editorHeight,lineHeight:r,pixelRatio:s}),l=t/a,c=l/2;if(!i||i.minimapLines.length===0){let w=[];if(w[0]=1,a>1){for(let C=0,y=a-1;C<y;C++)w[C]=Math.round(C*l+c);w[a-1]=t}return[new D_(l,w),[]]}const h=i.minimapLines,u=h.length;let d=[],f=0,g=0,p=1;const _=10;let v=[],b=null;for(let w=0;w<a;w++){const C=Math.max(p,Math.round(w*l)),y=Math.max(C,Math.round((w+1)*l));for(;f<u&&h[f]<C;){if(v.length<_){const S=f+1+g;b&&b.type==="deleted"&&b._oldIndex===f-1?b.deleteToLineNumber++:(b={type:"deleted",_oldIndex:f,deleteFromLineNumber:S,deleteToLineNumber:S},v.push(b)),g--}f++}let D;if(f<u&&h[f]<=y)D=h[f],f++;else if(w===0?D=1:w+1===a?D=t:D=Math.round(w*l+c),v.length<_){const S=f+1+g;b&&b.type==="inserted"&&b._i===w-1?b.insertToLineNumber++:(b={type:"inserted",_i:w,insertFromLineNumber:S,insertToLineNumber:S},v.push(b)),g++}d[w]=D,p=D}if(v.length<_)for(;f<u;){const w=f+1+g;b&&b.type==="deleted"&&b._oldIndex===f-1?b.deleteToLineNumber++:(b={type:"deleted",_oldIndex:f,deleteFromLineNumber:w,deleteToLineNumber:w},v.push(b)),g--,f++}else v=[{type:"flush"}];return[new D_(l,d),v]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e)-1;for(;i>0&&this.minimapLines[i-1]>=e;)i--;let s=this.modelLineToMinimapLine(t)-1;for(;s+1<this.minimapLines.length&&this.minimapLines[s+1]<=t;)s++;if(i===s){const r=this.minimapLines[i];if(r<e||r>t)return null}return[i+1,s+1]}decorationLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e),s=this.modelLineToMinimapLine(t);return e!==t&&s===i&&(s===this.minimapLines.length?i>1&&i--:s++),[i,s]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let i=this.minimapLines.length,s=0;for(let r=this.minimapLines.length-1;r>=0&&!(this.minimapLines[r]<e.fromLineNumber);r--)this.minimapLines[r]<=e.toLineNumber?(this.minimapLines[r]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,r),s=Math.max(s,r)):this.minimapLines[r]-=t;return[i,s]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}}class Pme extends Gs{constructor(e){super(e),this.tokensColorTracker=z0.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new x_(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=D_.compute(this.options,this._context.model.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new RC(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new x_(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.toLineNumber);return t?this._actual.onLinesChanged(t[0],t[1]):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){if(this._samplingState){const[t,i]=this._samplingState.onLinesDeleted(e);return t<=i&&this._actual.onLinesChanged(t+1,i+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._context.model.invalidateMinimapColorCache(),this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){let t=[];for(const i of e.ranges){const s=this._samplingState.modelLineRangeToMinimapLineRange(i.fromLineNumber,i.toLineNumber);s&&t.push({fromLineNumber:s[0],toLineNumber:s[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));const s={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(s)}_recreateLineSampling(){this._minimapSelections=null;const e=Boolean(this._samplingState),[t,i]=D_.compute(this.options,this._context.model.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const s of i)switch(s.type){case"deleted":this._actual.onLinesDeleted(s.deleteFromLineNumber,s.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(s.insertFromLineNumber,s.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.model.getLineCount()}getRealLineCount(){return this._context.model.getLineCount()}getLineContent(e){return this._samplingState?this._context.model.getLineContent(this._samplingState.minimapLines[e-1]):this._context.model.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.model.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.model.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,i){if(this._samplingState){let s=[];for(let r=0,o=t-e+1;r<o;r++)i[r]?s[r]=this._context.model.getViewLineData(this._samplingState.minimapLines[e+r-1]):s[r]=null;return s}return this._context.model.getMinimapLinesRenderingData(e,t,i).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,i]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new Se(t,e.startColumn,i,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let i;if(this._samplingState){const r=this._samplingState.minimapLines[e-1],o=this._samplingState.minimapLines[t-1];i=new I(r,1,o,this._context.model.getLineMaxColumn(o))}else i=new I(e,1,t,this._context.model.getLineMaxColumn(t));const s=this._context.model.getDecorationsInViewport(i);if(this._samplingState){let r=[];for(const o of s){if(!o.options.minimap)continue;const a=o.range,l=this._samplingState.modelLineToMinimapLine(a.startLineNumber),c=this._samplingState.modelLineToMinimapLine(a.endLineNumber);r.push(new $V(new I(l,a.startColumn,c,a.endColumn),o.options))}return r}return s}getOptions(){return this._context.model.getTextModelOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.model.revealRange("mouse",!1,new I(e,1,e,1),1,0)}setScrollTop(e){this._context.model.setScrollPosition({scrollTop:e},1)}}class RC extends q{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(n4),this._domNode=Ye(document.createElement("div")),aa.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=Ye(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=Ye(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=Ye(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=Ye(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=Ye(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._mouseDownListener=mi(this._domNode.domNode,"mousedown",i=>{if(i.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(i.leftButton&&this._lastRenderData){const c=Gi(this._slider.domNode),h=c.top+c.height/2;this._startSliderDragging(i.buttons,i.posx,h,i.posy,this._lastRenderData.renderedLayout)}return}const r=this._model.options.minimapLineHeight,o=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*i.browserEvent.offsetY;let l=Math.floor(o/r)+this._lastRenderData.renderedLayout.startLineNumber;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderMouseMoveMonitor=new Bu,this._sliderMouseDownListener=mi(this._slider.domNode,"mousedown",i=>{i.preventDefault(),i.stopPropagation(),i.leftButton&&this._lastRenderData&&this._startSliderDragging(i.buttons,i.posx,i.posy,i.posy,this._lastRenderData.renderedLayout)}),this._gestureDisposable=st.addTarget(this._domNode.domNode),this._sliderTouchStartListener=K(this._domNode.domNode,bt.Start,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(i))},{passive:!1}),this._sliderTouchMoveListener=K(this._domNode.domNode,bt.Change,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(i)},{passive:!1}),this._sliderTouchEndListener=mi(this._domNode.domNode,bt.End,i=>{i.preventDefault(),i.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,i,s,r){this._slider.toggleClassName("active",!0);const o=(a,l)=>{const c=Math.abs(l-t);if(Zi&&c>Ome){this._model.setScrollTop(r.scrollTop);return}const h=a-i;this._model.setScrollTop(r.getDesiredScrollTopFromDelta(h))};s!==i&&o(s,t),this._sliderMouseMoveMonitor.startMonitoring(this._slider.domNode,e,Mg,a=>o(a.posy,a.posx),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}dispose(){this._mouseDownListener.dispose(),this._sliderMouseMoveMonitor.dispose(),this._sliderMouseDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){return this._model.options.showSlider==="always"?"minimap slider-always":"minimap slider-mouseover"}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new W2(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(n4),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const i=vm.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(i.sliderNeeded?"block":"none"),this._slider.setTop(i.sliderTop),this._slider.setHeight(i.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(i.sliderHeight),this.renderDecorations(i),this._lastRenderData=this.renderLines(i)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(I.compareRangesUsingStarts);const i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);i.sort((d,f)=>(d.options.zIndex||0)-(f.options.zIndex||0));const{canvasInnerWidth:s,canvasInnerHeight:r}=this._model.options,o=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,s,r);const h=new D4(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,h,e,o),this._renderDecorationsLineHighlights(c,i,h,e,o);const u=new D4(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,u,e,o,l,a,s),this._renderDecorationsHighlights(c,i,u,e,o,l,a,s)}}_renderSelectionLineHighlights(e,t,i,s,r){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let o=0,a=0;for(const l of t){const c=Math.max(s.startLineNumber,l.startLineNumber),h=Math.min(s.endLineNumber,l.endLineNumber);if(c>h)continue;for(let f=c;f<=h;f++)i.set(f,!0);const u=(c-s.startLineNumber)*r,d=(h-s.startLineNumber)*r+r;a>=u||(a>o&&e.fillRect(Ll,o,e.canvas.width,a-o),o=u),a=d}a>o&&e.fillRect(Ll,o,e.canvas.width,a-o)}_renderDecorationsLineHighlights(e,t,i,s,r){const o=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==Qo.Inline)continue;const h=Math.max(s.startLineNumber,l.range.startLineNumber),u=Math.min(s.endLineNumber,l.range.endLineNumber);if(h>u)continue;const d=c.getColor(this._theme);if(!d||d.isTransparent())continue;let f=o.get(d.toString());f||(f=d.transparent(.5).toString(),o.set(d.toString(),f)),e.fillStyle=f;for(let g=h;g<=u;g++){if(i.has(g))continue;i.set(g,!0);const p=(h-s.startLineNumber)*r;e.fillRect(Ll,p,e.canvas.width,r)}}}_renderSelectionsHighlights(e,t,i,s,r,o,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const h=Math.max(s.startLineNumber,c.startLineNumber),u=Math.min(s.endLineNumber,c.endLineNumber);if(!(h>u))for(let d=h;d<=u;d++)this.renderDecorationOnLine(e,i,c,this._selectionColor,s,d,r,r,o,a,l)}}_renderDecorationsHighlights(e,t,i,s,r,o,a,l){for(const c of t){const h=c.options.minimap;if(!h)continue;const u=Math.max(s.startLineNumber,c.range.startLineNumber),d=Math.min(s.endLineNumber,c.range.endLineNumber);if(u>d)continue;const f=h.getColor(this._theme);if(!(!f||f.isTransparent()))for(let g=u;g<=d;g++)switch(h.position){case Qo.Inline:this.renderDecorationOnLine(e,i,c.range,f,s,g,r,r,o,a,l);continue;case Qo.Gutter:const p=(g-s.startLineNumber)*r,_=2;this.renderDecoration(e,f,_,p,Fme,r);continue}}}renderDecorationOnLine(e,t,i,s,r,o,a,l,c,h,u){const d=(o-r.startLineNumber)*l;if(d+a<0||d>this._model.options.canvasInnerHeight)return;const{startLineNumber:f,endLineNumber:g}=i,p=f===o?i.startColumn:1,_=g===o?i.endColumn:this._model.getLineMaxColumn(o),v=this.getXOffsetForPosition(t,o,p,c,h,u),b=this.getXOffsetForPosition(t,o,_,c,h,u);this.renderDecoration(e,s,v,d,b-v,a)}getXOffsetForPosition(e,t,i,s,r,o){if(i===1)return Ll;if((i-1)*r>=o)return o;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[Ll];let h=Ll;for(let u=1;u<c.length+1;u++){const d=c.charCodeAt(u-1),f=d===9?s*r:Kr(d)?2*r:r,g=h+f;if(g>=o){l[u]=o;break}l[u]=g,h=g}e.set(t,l)}return i-1<l.length?l[i-1]:o}renderDecoration(e,t,i,s,r,o){e.fillStyle=t&&t.toString()||"",e.fillRect(i,s,r,o)}renderLines(e){const t=e.startLineNumber,i=e.endLineNumber,s=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const ie=this._lastRenderData._get();return new x4(e,ie.imageData,ie.lines)}const r=this._getBuffer();if(!r)return null;let[o,a,l]=RC._renderUntouchedLines(r,t,i,s,this._lastRenderData);const c=this._model.getMinimapLinesRenderingData(t,i,l),h=this._model.getOptions().tabSize,u=this._model.options.defaultBackgroundColor,d=this._model.options.backgroundColor,f=this._model.options.foregroundAlpha,g=this._model.tokensColorTracker,p=g.backgroundIsLight(),_=this._model.options.renderMinimap,v=this._model.options.charRenderer(),b=this._model.options.fontScale,w=this._model.options.minimapCharWidth,y=(_===1?2:2+1)*b,D=s>y?Math.floor((s-y)/2):0,S=d.a/255,x=new Ws(Math.round((d.r-u.r)*S+u.r),Math.round((d.g-u.g)*S+u.g),Math.round((d.b-u.b)*S+u.b),255);let k=0;const F=[];for(let ie=0,ae=i-t+1;ie<ae;ie++)l[ie]&&RC._renderLine(r,x,d.a,p,_,w,g,f,v,k,D,h,c[ie],b,s),F[ie]=new MC(k),k+=s;const A=o===-1?0:o,H=(a===-1?r.height:a)-A;return this._canvas.domNode.getContext("2d").putImageData(r,0,0,0,A,r.width,H),new x4(e,r,F)}static _renderUntouchedLines(e,t,i,s,r){const o=[];if(!r){for(let x=0,k=i-t+1;x<k;x++)o[x]=!0;return[-1,-1,o]}const a=r._get(),l=a.imageData.data,c=a.rendLineNumberStart,h=a.lines,u=h.length,d=e.width,f=e.data,g=(i-t+1)*s*d*4;let p=-1,_=-1,v=-1,b=-1,w=-1,C=-1,y=0;for(let x=t;x<=i;x++){const k=x-t,F=x-c,A=F>=0&&F<u?h[F].dy:-1;if(A===-1){o[k]=!0,y+=s;continue}const z=A*d*4,H=(A+s)*d*4,te=y*d*4,ie=(y+s)*d*4;b===z&&C===te?(b=H,C=ie):(v!==-1&&(f.set(l.subarray(v,b),w),p===-1&&v===0&&v===w&&(p=b),_===-1&&b===g&&v===w&&(_=v)),v=z,b=H,w=te,C=ie),o[k]=!1,y+=s}v!==-1&&(f.set(l.subarray(v,b),w),p===-1&&v===0&&v===w&&(p=b),_===-1&&b===g&&v===w&&(_=v));const D=p===-1?-1:p/(d*4),S=_===-1?-1:_/(d*4);return[D,S,o]}static _renderLine(e,t,i,s,r,o,a,l,c,h,u,d,f,g,p){const _=f.content,v=f.tokens,b=e.width-o,w=p===1;let C=Ll,y=0,D=0;for(let S=0,x=v.getCount();S<x;S++){const k=v.getEndOffset(S),F=v.getForeground(S),A=a.getColor(F);for(;y<k;y++){if(C>b)return;const z=_.charCodeAt(y);if(z===9){const H=d-(y+D)%d;D+=H-1,C+=H*o}else if(z===32)C+=o;else{const H=Kr(z)?2:1;for(let te=0;te<H;te++)if(r===2?c.blockRenderChar(e,C,h+u,A,l,t,i,w):c.renderChar(e,C,h+u,z,A,l,t,i,g,s,w),C+=o,C>b)return}}}}}class D4{constructor(e,t,i){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=i,this._values=[];for(let s=0,r=this._endLineNumber-this._startLineNumber+1;s<r;s++)this._values[s]=i}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}kt((n,e)=>{const t=n.getColor(Mge);t&&e.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${t}; }`);const i=n.getColor(Rge);i&&e.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${i}; }`);const s=n.getColor(Oge);s&&e.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${s}; }`);const r=n.getColor(W0);r&&e.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${r} -6px 0 6px -6px inset; }`)});class Bme extends Gs{constructor(e){super(e);const i=this._context.configuration.options.get(129);this._widgets={},this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,this._domNode=Ye(document.createElement("div")),aa.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const i=this._context.configuration.options.get(129);return this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,!0}addWidget(e){const t=Ye(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const i=this._widgets[e.getId()];return i.preference===t?!1:(i.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const s=this._widgets[t].domNode.domNode;delete this._widgets[t],s.parentNode.removeChild(s),this.setShouldRender()}}_renderWidget(e){const t=e.domNode;if(e.preference===null){t.unsetTop();return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){const i=t.domNode.clientHeight;t.setTop(this._editorHeight-i-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let i=0,s=t.length;i<s;i++){const r=t[i];this._renderWidget(this._widgets[r])}}}class Vme{constructor(e,t){const i=e.options;this.lineHeight=i.get(58),this.pixelRatio=i.get(127),this.overviewRulerLanes=i.get(73),this.renderBorder=i.get(72);const s=t.getColor(Xge);this.borderColor=s?s.toString():null,this.hideCursor=i.get(51);const r=t.getColor(ZW);this.cursorColor=r?r.transparent(.7).toString():null,this.themeType=t.type;const o=i.get(64),a=o.enabled,l=o.side,c=a?t.getColor(Qge)||Zt.getDefaultBackground():null;c===null||l==="left"?this.backgroundColor=null:this.backgroundColor=V.Format.CSS.formatHex(c);const u=i.get(129).overviewRuler;this.top=u.top,this.right=u.right,this.domWidth=u.width,this.domHeight=u.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[d,f]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=d,this.w=f}_initLanes(e,t,i){const s=t-e;if(i>=3){const r=Math.floor(s/3),o=Math.floor(s/3),a=s-r-o,l=e,c=l+r,h=l+r+a;return[[0,l,c,l,h,l,c,l],[0,r,a,r+a,o,r+a+o,a+o,r+a+o]]}else if(i===2){const r=Math.floor(s/2),o=s-r,a=e,l=a+r;return[[0,a,a,a,l,a,a,a],[0,r,r,r,o,r+o,r+o,r+o]]}else{const r=e,o=s;return[[0,r,r,r,r,r,r,r],[0,o,o,o,o,o,o,o]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class Wme extends Gs{constructor(e){super(e),this._domNode=Ye(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Zt.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new Vme(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,i=e.selections.length;t<i;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(P.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._context.model.invalidateOverviewRulerColorCache(),this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:"");return}const e=this._settings.canvasWidth,t=this._settings.canvasHeight,i=this._settings.lineHeight,s=this._context.viewLayout,r=this._context.viewLayout.getScrollHeight(),o=t/r,a=this._context.model.getAllOverviewRulerDecorations(this._context.theme),l=6*this._settings.pixelRatio|0,c=l/2|0,h=this._domNode.domNode.getContext("2d");this._settings.backgroundColor===null?h.clearRect(0,0,e,t):(h.fillStyle=this._settings.backgroundColor,h.fillRect(0,0,e,t));const u=this._settings.x,d=this._settings.w;a.sort(UV.cmp);for(const f of a){const g=f.color,p=f.data;h.fillStyle=g;let _=0,v=0,b=0;for(let w=0,C=p.length/3;w<C;w++){const y=p[3*w],D=p[3*w+1],S=p[3*w+2];let x=s.getVerticalOffsetForLineNumber(D)*o|0,k=(s.getVerticalOffsetForLineNumber(S)+i)*o|0;if(k-x<l){let A=(x+k)/2|0;A<c?A=c:A+c>t&&(A=t-c),x=A-c,k=A+c}x>b+1||y!==_?(w!==0&&h.fillRect(u[_],v,d[_],b-v),_=y,v=x,b=k):k>b&&(b=k)}h.fillRect(u[_],v,d[_],b-v)}if(!this._settings.hideCursor&&this._settings.cursorColor){const f=2*this._settings.pixelRatio|0,g=f/2|0,p=this._settings.x[7],_=this._settings.w[7];h.fillStyle=this._settings.cursorColor;let v=-100,b=-100;for(let w=0,C=this._cursorPositions.length;w<C;w++){const y=this._cursorPositions[w];let D=s.getVerticalOffsetForLineNumber(y.lineNumber)*o|0;D<g?D=g:D+g>t&&(D=t-g);const S=D-g,x=S+f;S>b+1?(w!==0&&h.fillRect(p,v,_,b-v),v=S,b=x):x>b&&(b=x)}h.fillRect(p,v,_,b-v)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(h.beginPath(),h.lineWidth=1,h.strokeStyle=this._settings.borderColor,h.moveTo(0,0),h.lineTo(0,t),h.stroke(),h.moveTo(0,0),h.lineTo(e,0),h.stroke())}}class L4{constructor(e,t,i){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=i|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class L_{constructor(e,t,i){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.color=i,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class zme{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(L_.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),i=Math.floor(this.getCanvasHeight()),s=Math.floor(this._outerHeight),r=i/s,o=Math.floor(4*this._pixelRatio/2);let a=[];for(let l=0,c=this._zones.length;l<c;l++){const h=this._zones[l];if(!e){const b=h.getColorZones();if(b){a.push(b);continue}}const u=Math.floor(r*this._getVerticalOffsetForLine(h.startLineNumber)),d=Math.floor(r*(this._getVerticalOffsetForLine(h.endLineNumber)+t));let f=Math.floor((u+d)/2),g=d-f;g<o&&(g=o),f-g<0&&(f=g),f+g>i&&(f=i-g);const p=h.color;let _=this._color2Id[p];_||(_=++this._lastAssignedId,this._color2Id[p]=_,this._id2Color[_]=p);const v=new L4(f-g,f+g,_);h.setColorZone(v),a.push(v)}return this._colorZonesInvalid=!1,a.sort(L4.compare),a}}class Hme extends B0{constructor(e,t){super(),this._context=e;const i=this._context.configuration.options;this._domNode=Ye(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new zme(s=>this._context.viewLayout.getVerticalOffsetForLineNumber(s)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(i.get(58)),this._zoneManager.setPixelRatio(i.get(127)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(58)&&(this._zoneManager.setLineHeight(t.get(58)),this._render()),e.hasChanged(127)&&(this._zoneManager.setPixelRatio(t.get(127)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),s=this._zoneManager.getId2Color(),r=this._domNode.domNode.getContext("2d");return r.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(r,i,s,e),!0}_renderOneLane(e,t,i,s){let r=0,o=0,a=0;for(const l of t){const c=l.colorId,h=l.from,u=l.to;c!==r?(e.fillRect(0,o,s,a-o),r=c,e.fillStyle=i[r],o=h,a=u):a>=h?a=Math.max(a,u):(e.fillRect(0,o,s,a-o),o=h,a=u)}e.fillRect(0,o,s,a-o)}}class $me extends Gs{constructor(e){super(e),this.domNode=Ye(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:s}=this._context.model.getTextModelOptions(),r=s;let o=t-e;for(;o>0;){const a=Ye(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(r),this.domNode.appendChild(a),this._renderedRulers.push(a),o--}return}let i=e-t;for(;i>0;){const s=this._renderedRulers.pop();this.domNode.removeChild(s),i--}}render(e){this._ensureRulersCount();for(let t=0,i=this._rulers.length;t<i;t++){const s=this._renderedRulers[t],r=this._rulers[t];s.setBoxShadow(r.color?`1px 0 0 0 ${r.color} inset`:""),s.setHeight(Math.min(e.scrollHeight,1e6)),s.setLeft(r.column*this._typicalHalfwidthCharacterWidth)}}}kt((n,e)=>{const t=n.getColor(Gge);t&&e.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${t} inset; }`)});class Ume extends Gs{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const i=this._context.configuration.options.get(91);this._useShadows=i.useShadows,this._domNode=Ye(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(129);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.minimap.minimapWidth-t.verticalScrollbarWidth}onConfigurationChanged(e){const i=this._context.configuration.options.get(91);return this._useShadows=i.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}kt((n,e)=>{const t=n.getColor(W0);t&&e.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${t} 0 6px 6px -6px inset; }`)});class jme{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class qme{constructor(e,t){this.lineNumber=e,this.ranges=t}}function Kme(n){return new jme(n)}function Gme(n){return new qme(n.lineNumber,n.ranges.map(Kme))}class Bt extends Rg{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,i=e.length;t<i;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,i){const s=this._typicalHalfwidthCharacterWidth/4;let r=null,o=null;if(i&&i.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!r&&c<i.length;c++)i[c].lineNumber===a&&(r=i[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=i.length-1;!o&&c>=0;c--)i[c].lineNumber===l&&(o=i[c].ranges[0]);r&&!r.startStyle&&(r=null),o&&!o.startStyle&&(o=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],h=c.left,u=c.left+c.width,d={top:0,bottom:0},f={top:0,bottom:0};if(a>0){const g=t[a-1].ranges[0].left,p=t[a-1].ranges[0].left+t[a-1].ranges[0].width;Hb(h-g)<s?d.top=2:h>g&&(d.top=1),Hb(u-p)<s?f.top=2:g<u&&u<p&&(f.top=1)}else r&&(d.top=r.startStyle.top,f.top=r.endStyle.top);if(a+1<l){const g=t[a+1].ranges[0].left,p=t[a+1].ranges[0].left+t[a+1].ranges[0].width;Hb(h-g)<s?d.bottom=2:g<h&&h<p&&(d.bottom=1),Hb(u-p)<s?f.bottom=2:u<p&&(f.bottom=1)}else o&&(d.bottom=o.startStyle.bottom,f.bottom=o.endStyle.bottom);c.startStyle=d,c.endStyle=f}}_getVisibleRangesWithStyle(e,t,i){const r=(t.linesVisibleRangesForRange(e,!0)||[]).map(Gme);return!this._visibleRangesHaveGaps(r)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,r,i),r}_createSelectionPiece(e,t,i,s,r){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;left:"+s.toString()+"px;width:"+r.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,i,s){if(s.length===0)return;const r=!!s[0].ranges[0].startStyle,o=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),l=s[0].lineNumber,c=s[s.length-1].lineNumber;for(let h=0,u=s.length;h<u;h++){const d=s[h],f=d.lineNumber,g=f-t,p=i&&(f===c||f===l)?a:o,_=i&&f===l?1:0;let v="",b="";for(let w=0,C=d.ranges.length;w<C;w++){const y=d.ranges[w];if(r){const S=y.startStyle,x=y.endStyle;if(S.top===1||S.bottom===1){v+=this._createSelectionPiece(_,p,Bt.SELECTION_CLASS_NAME,y.left-Bt.ROUNDED_PIECE_WIDTH,Bt.ROUNDED_PIECE_WIDTH);let k=Bt.EDITOR_BACKGROUND_CLASS_NAME;S.top===1&&(k+=" "+Bt.SELECTION_TOP_RIGHT),S.bottom===1&&(k+=" "+Bt.SELECTION_BOTTOM_RIGHT),v+=this._createSelectionPiece(_,p,k,y.left-Bt.ROUNDED_PIECE_WIDTH,Bt.ROUNDED_PIECE_WIDTH)}if(x.top===1||x.bottom===1){v+=this._createSelectionPiece(_,p,Bt.SELECTION_CLASS_NAME,y.left+y.width,Bt.ROUNDED_PIECE_WIDTH);let k=Bt.EDITOR_BACKGROUND_CLASS_NAME;x.top===1&&(k+=" "+Bt.SELECTION_TOP_LEFT),x.bottom===1&&(k+=" "+Bt.SELECTION_BOTTOM_LEFT),v+=this._createSelectionPiece(_,p,k,y.left+y.width,Bt.ROUNDED_PIECE_WIDTH)}}let D=Bt.SELECTION_CLASS_NAME;if(r){const S=y.startStyle,x=y.endStyle;S.top===0&&(D+=" "+Bt.SELECTION_TOP_LEFT),S.bottom===0&&(D+=" "+Bt.SELECTION_BOTTOM_LEFT),x.top===0&&(D+=" "+Bt.SELECTION_TOP_RIGHT),x.bottom===0&&(D+=" "+Bt.SELECTION_BOTTOM_RIGHT)}b+=this._createSelectionPiece(_,p,D,y.left,y.width)}e[g][0]+=v,e[g][1]+=b}}prepareRender(e){const t=[],i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let o=i;o<=s;o++){const a=o-i;t[a]=["",""]}const r=[];for(let o=0,a=this._selections.length;o<a;o++){const l=this._selections[o];if(l.isEmpty()){r[o]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[o]);r[o]=c,this._actualRenderOneSelection(t,i,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=r,this._renderResult=t.map(([o,a])=>o+a)}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}Bt.SELECTION_CLASS_NAME="selected-text";Bt.SELECTION_TOP_LEFT="top-left-radius";Bt.SELECTION_BOTTOM_LEFT="bottom-left-radius";Bt.SELECTION_TOP_RIGHT="top-right-radius";Bt.SELECTION_BOTTOM_RIGHT="bottom-right-radius";Bt.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";Bt.ROUNDED_PIECE_WIDTH=10;kt((n,e)=>{const t=n.getColor(Ql);t&&e.addRule(`.monaco-editor .focused .selected-text { background-color: ${t}; }`);const i=n.getColor(A2);i&&e.addRule(`.monaco-editor .selected-text { background-color: ${i}; }`);const s=n.getColor(Ffe);s&&!s.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${s}; }`)});function Hb(n){return n<0?-n:n}class k4{constructor(e,t,i,s,r,o){this.top=e,this.left=t,this.width=i,this.height=s,this.textContent=r,this.textContentClassName=o}}class E4{constructor(e){this._context=e;const t=this._context.configuration.options,i=t.get(43);this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=Ye(document.createElement("div")),this._domNode.setClassName(`cursor ${$h}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Qi.applyFontInfo(this._domNode,i),this._domNode.setDisplay("none"),this._position=new P(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(43);return this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),Qi.applyFontInfo(this._domNode,i),!0}onCursorPositionChanged(e){return this._position=e,!0}_prepareRender(e){let t="";if(this._cursorStyle===Mi.Line||this._cursorStyle===Mi.LineThin){const d=e.visibleRangeForPosition(this._position);if(!d||d.outsideRenderedLine)return null;let f;if(this._cursorStyle===Mi.Line){if(f=DF(this._lineCursorWidth>0?this._lineCursorWidth:2),f>2){const _=this._context.model.getLineContent(this._position.lineNumber),v=qw(_,this._position.column-1);t=_.substr(this._position.column-1,v)}}else f=DF(1);let g=d.left;f>=2&&g>=1&&(g-=1);const p=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta;return new k4(p,g,f,this._lineHeight,t,"")}const i=this._context.model.getLineContent(this._position.lineNumber),s=qw(i,this._position.column-1),r=e.linesVisibleRangesForRange(new I(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column+s),!1);if(!r||r.length===0)return null;const o=r[0];if(o.outsideRenderedLine||o.ranges.length===0)return null;const a=o.ranges[0],l=a.width<1?this._typicalHalfwidthCharacterWidth:a.width;let c="";if(this._cursorStyle===Mi.Block){const d=this._context.model.getViewLineData(this._position.lineNumber);t=i.substr(this._position.column-1,s);const f=d.tokens.findTokenIndexAtOffset(this._position.column-1);c=d.tokens.getClassName(f)}let h=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta,u=this._lineHeight;return(this._cursorStyle===Mi.Underline||this._cursorStyle===Mi.UnderlineThin)&&(h+=this._lineHeight-2,u=2),new k4(h,a.left,l,u,t,c)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${$h} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class k_ extends Gs{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new E4(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=Ye(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new Wn,this._cursorFlatBlinkInterval=new M0,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let i=0,s=this._secondaryCursors.length;i<s;i++)this._secondaryCursors[i].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length){const i=t.length-this._secondaryCursors.length;for(let s=0;s<i;s++){const r=new E4(this._context);this._domNode.domNode.insertBefore(r.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(r)}}else if(this._secondaryCursors.length>t.length){const i=this._secondaryCursors.length-t.length;for(let s=0;s<i;s++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let i=0;i<t.length;i++)this._secondaryCursors[i].onCursorPositionChanged(t[i])}onCursorStateChanged(e){const t=[];for(let s=0,r=e.selections.length;s<r;s++)t[s]=e.selections[s].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));const i=e.selections[0].isEmpty();return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=i=>{for(let s=0,r=e.ranges.length;s<r;s++)if(e.ranges[s].fromLineNumber<=i.lineNumber&&i.lineNumber<=e.ranges[s].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const i of this._secondaryCursors)if(t(i.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,i=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!i&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},k_.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},k_.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case Mi.Line:e+=" cursor-line-style";break;case Mi.Block:e+=" cursor-block-style";break;case Mi.Underline:e+=" cursor-underline-style";break;case Mi.LineThin:e+=" cursor-line-thin-style";break;case Mi.BlockOutline:e+=" cursor-block-outline-style";break;case Mi.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}render(e){let t=[],i=0;const s=this._primaryCursor.render(e);s&&(t[i++]=s);for(let r=0,o=this._secondaryCursors.length;r<o;r++){const a=this._secondaryCursors[r].render(e);a&&(t[i++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}}k_.BLINK_INTERVAL=500;kt((n,e)=>{const t=n.getColor(ZW);if(t){let i=n.getColor(qge);i||(i=t.opposite()),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${t}; border-color: ${t}; color: ${i}; }`),n.type==="hc"&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${i}; border-right: 1px solid ${i}; }`)}});const uD=()=>{throw new Error("Invalid change accessor")};class Yme extends Gs{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(129);this._lineHeight=t.get(58),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,this.domNode=Ye(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=Ye(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const s of e)t.set(s.id,s);let i=!1;return this._context.model.changeWhitespace(s=>{const r=Object.keys(this._zones);for(let o=0,a=r.length;o<a;o++){const l=r[o],c=this._zones[l],h=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=h.isInHiddenArea;const u=t.get(l);u&&(u.afterLineNumber!==h.afterViewLineNumber||u.height!==h.heightInPx)&&(s.changeOneWhitespace(l,h.afterViewLineNumber,h.heightInPx),this._safeCallOnComputedHeight(c.delegate,h.heightInPx),i=!0)}}),i}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(129);return this._lineHeight=t.get(58),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(58)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return typeof e.afterColumn!="undefined"?e.afterColumn:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn!="undefined")t=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const o=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new P(o,this._context.model.getModelLineMaxColumn(o))}let i;t.column===this._context.model.getModelLineMaxColumn(t.lineNumber)?i=this._context.model.validateModelPosition({lineNumber:t.lineNumber+1,column:1}):i=this._context.model.validateModelPosition({lineNumber:t.lineNumber,column:t.column+1});const s=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(t),r=this._context.model.coordinatesConverter.modelPositionIsVisible(i);return{isInHiddenArea:!r,afterViewLineNumber:s.lineNumber,heightInPx:r?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.model.changeWhitespace(i=>{const s={addZone:r=>(t=!0,this._addZone(i,r)),removeZone:r=>{!r||(t=this._removeZone(i,r)||t)},layoutZone:r=>{!r||(t=this._layoutZone(i,r)||t)}};Zme(e,s),s.addZone=uD,s.removeZone=uD,s.layoutZone=uD}),t}_addZone(e,t){const i=this._computeWhitespaceProps(t),r={whitespaceId:e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),delegate:t,isInHiddenArea:i.isInHiddenArea,isVisible:!1,domNode:Ye(t.domNode),marginDomNode:t.marginDomNode?Ye(t.marginDomNode):null};return this._safeCallOnComputedHeight(r.delegate,i.heightInPx),r.domNode.setPosition("absolute"),r.domNode.domNode.style.width="100%",r.domNode.setDisplay("none"),r.domNode.setAttribute("monaco-view-zone",r.whitespaceId),this.domNode.appendChild(r.domNode),r.marginDomNode&&(r.marginDomNode.setPosition("absolute"),r.marginDomNode.domNode.style.width="100%",r.marginDomNode.setDisplay("none"),r.marginDomNode.setAttribute("monaco-view-zone",r.whitespaceId),this.marginDomNode.appendChild(r.marginDomNode)),this._zones[r.whitespaceId]=r,this.setShouldRender(),r.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.parentNode.removeChild(i.domNode.domNode),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.parentNode.removeChild(i.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t],s=this._computeWhitespaceProps(i.delegate);return i.isInHiddenArea=s.isInHiddenArea,e.changeOneWhitespace(i.whitespaceId,s.afterViewLineNumber,s.heightInPx),this._safeCallOnComputedHeight(i.delegate,s.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){if(this._zones.hasOwnProperty(e)){const t=this._zones[e];return Boolean(t.delegate.suppressMouseDown)}return!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(i){Ie(i)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(i){Ie(i)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,i={};let s=!1;for(const o of t)this._zones[o.id].isInHiddenArea||(i[o.id]=o,s=!0);const r=Object.keys(this._zones);for(let o=0,a=r.length;o<a;o++){const l=r[o],c=this._zones[l];let h=0,u=0,d="none";i.hasOwnProperty(l)?(h=i[l].verticalOffset-e.bigNumbersDelta,u=i[l].height,d="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(i[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(h),c.domNode.setHeight(u),c.domNode.setDisplay(d),c.marginDomNode&&(c.marginDomNode.setTop(h),c.marginDomNode.setHeight(u),c.marginDomNode.setDisplay(d))}s&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function Zme(n,e){try{return n(e)}catch(t){Ie(t)}}class Xme{constructor(e){this._theme=e}get type(){return this._theme.type}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class Qme{constructor(e,t,i){this.configuration=e,this.theme=new Xme(t),this.model=i,this.viewLayout=i.viewLayout}addEventHandler(e){this.model.addViewEventHandler(e)}removeEventHandler(e){this.model.removeViewEventHandler(e)}}class Jme{constructor(e,t,i,s){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=i,this._model=s,this.visibleRange=new I(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class e_e extends B0{constructor(e,t,i,s,r,o){super(),this._selections=[new Se(1,1,1,1)],this._renderAnimationFrame=null;const a=new Jpe(t,s,r,e);this._context=new Qme(t,i.getColorTheme(),s),this._configPixelRatio=this._context.configuration.options.get(127),this._context.addEventHandler(this),this._register(i.onDidColorThemeChange(p=>{this._context.theme.update(p),this._context.model.onDidColorThemeChange(),this.render(!0,!1)})),this._viewParts=[],this._textAreaHandler=new Kpe(this._context,a,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=Ye(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=Ye(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=Ye(document.createElement("div")),aa.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new Dme(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new K1(this._context,this._linesContent),this._viewZones=new Yme(this._context),this._viewParts.push(this._viewZones);const l=new Wme(this._context);this._viewParts.push(l);const c=new Ume(this._context);this._viewParts.push(c);const h=new ime(this._context);this._viewParts.push(h),h.addDynamicOverlay(new ome(this._context)),h.addDynamicOverlay(new Bt(this._context)),h.addDynamicOverlay(new kme(this._context)),h.addDynamicOverlay(new lme(this._context));const u=new nme(this._context);this._viewParts.push(u),u.addDynamicOverlay(new ame(this._context)),u.addDynamicOverlay(new Lme(this._context)),u.addDynamicOverlay(new Ame(this._context)),u.addDynamicOverlay(new Nme(this._context)),u.addDynamicOverlay(new Zf(this._context));const d=new gu(this._context);d.getDomNode().appendChild(this._viewZones.marginDomNode),d.getDomNode().appendChild(u.getDomNode()),this._viewParts.push(d),this._contentWidgets=new sme(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new k_(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new Bme(this._context),this._viewParts.push(this._overlayWidgets);const f=new $me(this._context);this._viewParts.push(f);const g=new Pme(this._context);if(this._viewParts.push(g),l){const p=this._scrollbar.getOverviewRulerLayoutInfo();p.parent.insertBefore(l.getDomNode(),p.insertBefore)}this._linesContent.appendChild(h.getDomNode()),this._linesContent.appendChild(f.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(c.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(g.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),o?o.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new qpe(this._context,a,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new Rpe(e,t)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new P(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPositionRelativeToEditor:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new P(e,t)))}}_applyLayout(){const t=this._context.configuration.options.get(129);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(126)+" "+vC(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this._configPixelRatio=this._context.configuration.options.get(127),this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=H9(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){t_e(()=>this._actualRender())}_getViewPartsToRender(){let e=[],t=0;for(const i of this._viewParts)i.shouldRender()&&(e[t++]=i);return e}_actualRender(){if(!TA(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;const t=this._context.viewLayout.getLinesViewportData();this._context.model.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const i=new Jme(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.model);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const s=new Zue(this._context.viewLayout,i,this._viewLines);for(const r of e)r.prepareRender(s);for(const r of e)r.render(s),r.onDidRender();Math.abs(Hw()-this._configPixelRatio)>.001&&this._context.configuration.updatePixelRatio()}delegateVerticalScrollbarMouseDown(e){this._scrollbar.delegateVerticalScrollbarMouseDown(e)}restoreState(e){this._context.model.setScrollPosition({scrollTop:e.scrollTop},1),this._context.model.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.model.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,t){const i=this._context.model.validateModelPosition({lineNumber:e,column:t}),s=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();const r=this._viewLines.visibleRangeForPosition(new P(s.lineNumber,s.column));return r?r.left:-1}getTargetAtClientPoint(e,t){const i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?U1.convertViewToModelMouseTarget(i,this._context.model.coordinatesConverter):null}createOverviewRuler(e){return new Hme(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const i of this._viewParts)i.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){let t=e.position&&e.position.range||null;if(t===null){const s=e.position?e.position.position:null;s!==null&&(t=new I(s.lineNumber,s.column,s.lineNumber,s.column))}const i=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,t,i),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}function t_e(n){try{return n()}catch(e){Ie(e)}}class OC{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new Ni(new I(1,1,1,1),0,new P(1,1),0),new Ni(new I(1,1,1,1),0,new P(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){!this._trackSelection||(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Me(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.getDirection()===0?new Se(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new Se(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,i){this._setState(e,t,i)}static _validatePositionWithCache(e,t,i,s){return t.equals(i)?s:e.normalizePosition(t,2)}static _validateViewState(e,t){const i=t.position,s=t.selectionStart.getStartPosition(),r=t.selectionStart.getEndPosition(),o=e.normalizePosition(i,2),a=this._validatePositionWithCache(e,s,i,o),l=this._validatePositionWithCache(e,r,s,a);return i.equals(o)&&s.equals(a)&&r.equals(l)?t:new Ni(I.fromPositions(a,l),t.selectionStartLeftoverVisibleColumns+s.column-a.column,o,t.leftoverVisibleColumns+i.column-o.column)}_setState(e,t,i){if(i&&(i=OC._validateViewState(e.viewModel,i)),t){const s=e.model.validateRange(t.selectionStart),r=t.selectionStart.equalsRange(s)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),a=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new Ni(s,r,o,a)}else{if(!i)return;const s=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(i.selectionStart)),r=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(i.position));t=new Ni(s,i.selectionStartLeftoverVisibleColumns,r,i.leftoverVisibleColumns)}if(i){const s=e.coordinatesConverter.validateViewRange(i.selectionStart,t.selectionStart),r=e.coordinatesConverter.validateViewPosition(i.position,t.position);i=new Ni(s,t.selectionStartLeftoverVisibleColumns,r,t.leftoverVisibleColumns)}else{const s=e.coordinatesConverter.convertModelPositionToViewPosition(new P(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),r=e.coordinatesConverter.convertModelPositionToViewPosition(new P(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),o=new I(s.lineNumber,s.column,r.lineNumber,r.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);i=new Ni(o,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=i,this._updateTrackedRange(e)}}class I4{constructor(e){this.context=e,this.primaryCursor=new OC(e),this.secondaryCursors=[],this.lastAddedCursorIndex=0}dispose(){this.primaryCursor.dispose(this.context),this.killSecondaryCursors()}startTrackingSelections(){this.primaryCursor.startTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].startTrackingSelection(this.context)}stopTrackingSelections(){this.primaryCursor.stopTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){this.primaryCursor.ensureValidState(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].ensureValidState(this.context)}readSelectionFromMarkers(){let e=[];e[0]=this.primaryCursor.readSelectionFromMarkers(this.context);for(let t=0,i=this.secondaryCursors.length;t<i;t++)e[t+1]=this.secondaryCursors[t].readSelectionFromMarkers(this.context);return e}getAll(){let e=[];e[0]=this.primaryCursor.asCursorState();for(let t=0,i=this.secondaryCursors.length;t<i;t++)e[t+1]=this.secondaryCursors[t].asCursorState();return e}getViewPositions(){let e=[];e[0]=this.primaryCursor.viewState.position;for(let t=0,i=this.secondaryCursors.length;t<i;t++)e[t+1]=this.secondaryCursors[t].viewState.position;return e}getTopMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,i=this.secondaryCursors.length;t<i;t++){const s=this.secondaryCursors[t].viewState.position;s.isBefore(e)&&(e=s)}return e}getBottomMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,i=this.secondaryCursors.length;t<i;t++){const s=this.secondaryCursors[t].viewState.position;e.isBeforeOrEqual(s)&&(e=s)}return e}getSelections(){let e=[];e[0]=this.primaryCursor.modelState.selection;for(let t=0,i=this.secondaryCursors.length;t<i;t++)e[t+1]=this.secondaryCursors[t].modelState.selection;return e}getViewSelections(){let e=[];e[0]=this.primaryCursor.viewState.selection;for(let t=0,i=this.secondaryCursors.length;t<i;t++)e[t+1]=this.secondaryCursors[t].viewState.selection;return e}setSelections(e){this.setStates(Me.fromModelSelections(e))}getPrimaryCursor(){return this.primaryCursor.asCursorState()}setStates(e){e!==null&&(this.primaryCursor.setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.secondaryCursors.length,i=e.length;if(t<i){let s=i-t;for(let r=0;r<s;r++)this._addSecondaryCursor()}else if(t>i){let s=t-i;for(let r=0;r<s;r++)this._removeSecondaryCursor(this.secondaryCursors.length-1)}for(let s=0;s<i;s++)this.secondaryCursors[s].setState(this.context,e[s].modelState,e[s].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.secondaryCursors.push(new OC(this.context)),this.lastAddedCursorIndex=this.secondaryCursors.length}getLastAddedCursorIndex(){return this.secondaryCursors.length===0||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.secondaryCursors[e].dispose(this.context),this.secondaryCursors.splice(e,1)}_getAll(){let e=[];e[0]=this.primaryCursor;for(let t=0,i=this.secondaryCursors.length;t<i;t++)e[t+1]=this.secondaryCursors[t];return e}normalize(){if(this.secondaryCursors.length===0)return;let e=this._getAll(),t=[];for(let i=0,s=e.length;i<s;i++)t.push({index:i,selection:e[i].modelState.selection});t.sort((i,s)=>i.selection.startLineNumber===s.selection.startLineNumber?i.selection.startColumn-s.selection.startColumn:i.selection.startLineNumber-s.selection.startLineNumber);for(let i=0;i<t.length-1;i++){const s=t[i],r=t[i+1],o=s.selection,a=r.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||o.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(o.getEndPosition()):l=a.getStartPosition().isBefore(o.getEndPosition()),l){const c=s.index<r.index?i:i+1,h=s.index<r.index?i+1:i,u=t[h].index,d=t[c].index,f=t[h].selection,g=t[c].selection;if(!f.equalsSelection(g)){const p=f.plusRange(g),_=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,v=g.selectionStartLineNumber===g.startLineNumber&&g.selectionStartColumn===g.startColumn;let b;u===this.lastAddedCursorIndex?(b=_,this.lastAddedCursorIndex=d):b=v;let w;b?w=new Se(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn):w=new Se(p.endLineNumber,p.endColumn,p.startLineNumber,p.startColumn),t[c].selection=w;const C=Me.fromModelSelection(w);e[d].setState(this.context,C.modelState,C.viewState)}for(const p of t)p.index>u&&p.index--;e.splice(u,1),t.splice(h,1),this._removeSecondaryCursor(u-1),i--}}}}class i_e{constructor(){this.type=0}}class n_e{constructor(){this.type=1}}class s_e{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class r_e{constructor(e,t){this.type=3,this.selections=e,this.modelSelections=t}}class bd{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}}class $b{constructor(){this.type=5}}class o_e{constructor(e){this.type=6,this.isFocused=e}}class a_e{constructor(){this.type=7}}class Ub{constructor(){this.type=8}}class _z{constructor(e,t){this.type=9,this.fromLineNumber=e,this.toLineNumber=t}}class hI{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class uI{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class qv{constructor(e,t,i,s,r,o){this.type=12,this.source=e,this.range=t,this.selections=i,this.verticalType=s,this.revealHorizontal=r,this.scrollType=o}}class l_e{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class c_e{constructor(){this.type=14}}class h_e{constructor(e){this.type=15,this.ranges=e}}class u_e{constructor(){this.type=16}}class d_e{constructor(){this.type=17}}class f_e extends q{constructor(){super(),this._onEvent=this._register(new R),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,i=this._outgoingEvents.length;t<i;t++)if(this._outgoingEvents[t].kind===e.kind){this._outgoingEvents[t]=this._outgoingEvents[t].merge(e);return}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,i=this._eventHandlers.length;t<i;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new g_e),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const i of e)this._addOutgoingEvent(i);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const i of t)i.handleEvents(e)}}}class g_e{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class z2{constructor(e,t,i,s){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=i,this.contentHeight=s,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}merge(e){return e.kind!==0?this:new z2(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class H2{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}merge(e){return e.kind!==1?this:new H2(this.oldHasFocus,e.hasFocus)}}class $2{constructor(e,t,i,s,r,o,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=i,this._oldScrollTop=s,this.scrollWidth=r,this.scrollLeft=o,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}merge(e){return e.kind!==2?this:new $2(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class T4{constructor(){this.kind=3}isNoOp(){return!1}merge(e){return this}}class FC{constructor(e,t,i,s,r,o,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=i,this.modelVersionId=s,this.source=r,this.reason=o,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const i=e.length,s=t.length;if(i!==s)return!1;for(let r=0;r<i;r++)if(!e[r].equalsSelection(t[r]))return!1;return!0}isNoOp(){return FC._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}merge(e){return e.kind!==6?this:new FC(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class p_e{constructor(){this.kind=5}isNoOp(){return!1}merge(e){return this}}class dD{constructor(e,t){this.modelVersionId=e.getVersionId(),this.cursorState=t.getCursorStates()}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,i=this.cursorState.length;t<i;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class N4{constructor(e,t,i){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=i}static getAllAutoClosedCharacters(e){let t=[];for(const i of e)t=t.concat(i.getAutoClosedCharactersRanges());return t}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){let e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const i=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);i&&e.push(i)}return e}isValid(e){let t=[];for(let i=0;i<this._autoClosedEnclosingDecorations.length;i++){const s=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[i]);if(s&&(t.push(s),s.startLineNumber!==s.endLineNumber))return!1}t.sort(I.compareRangesUsingStarts),e.sort(I.compareRangesUsingStarts);for(let i=0;i<e.length;i++)if(i>=t.length||!t[i].strictContainsRange(e[i]))return!1;return!0}}class Qf extends q{constructor(e,t,i,s){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=i,this.context=new d4(this._model,this._viewModel,this._coordinatesConverter,s),this._cursors=new I4(this.context),this._hasFocus=!1,this._isHandling=!1,this._isDoingComposition=!1,this._selectionsWhenCompositionStarted=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=He(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new d4(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){let e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const i=this._autoClosedActions[t];i.isValid(e)||(i.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,i,s){let r=!1;s!==null&&s.length>Qf.MAX_CURSOR_COUNT&&(s=s.slice(0,Qf.MAX_CURSOR_COUNT),r=!0);const o=new dD(this._model,this);return this._cursors.setStates(s),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,i,o,r)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,i,s){const r=this._cursors.getViewPositions();if(r.length>1){this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),0,i,s);return}else{const o=r[0],a=new I(o.lineNumber,o.column,o.lineNumber,o.column);this._emitCursorRevealRange(e,t,a,null,0,i,s)}}_revealPrimaryCursor(e,t,i,s,r){const o=this._cursors.getViewPositions();if(o.length>1)this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),i,s,r);else{const a=o[0],l=new I(a.lineNumber,a.column,a.lineNumber,a.column);this._emitCursorRevealRange(e,t,l,null,i,s,r)}}_emitCursorRevealRange(e,t,i,s,r,o,a){e.emitViewEvent(new qv(t,i,s,r,o,a))}saveState(){let e=[];const t=this._cursors.getSelections();for(let i=0,s=t.length;i<s;i++){const r=t[i];e.push({inSelectionMode:!r.isEmpty(),selectionStart:{lineNumber:r.selectionStartLineNumber,column:r.selectionStartColumn},position:{lineNumber:r.positionLineNumber,column:r.positionColumn}})}return e}restoreState(e,t){let i=[];for(let s=0,r=t.length;s<r;s++){const o=t[s];let a=1,l=1;o.position&&o.position.lineNumber&&(a=o.position.lineNumber),o.position&&o.position.column&&(l=o.position.column);let c=a,h=l;o.selectionStart&&o.selectionStart.lineNumber&&(c=o.selectionStart.lineNumber),o.selectionStart&&o.selectionStart.column&&(h=o.selectionStart.column),i.push({selectionStartLineNumber:c,selectionStartColumn:h,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,Me.fromModelSelections(i)),this.revealPrimary(e,"restoreState",!0,1)}onModelContentChanged(e,t){if(t instanceof LW){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{if(this._knownModelVersionId=t.versionId,this._isHandling)return;const i=t.containsEvent(1);if(this._prevEditOperationType=0,i)this._cursors.dispose(),this._cursors=new I4(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&t.resultingSelection&&t.resultingSelection.length>0){const s=Me.fromModelSelections(t.resultingSelection);this.setStates(e,"modelChange",t.isUndoing?5:t.isRedoing?6:2,s)&&this._revealPrimaryCursor(e,"modelChange",0,!0,0)}else{const s=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Me.fromModelSelections(s))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),i=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:rt.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,t),toViewLineNumber:i.lineNumber,toViewVisualColumn:rt.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,i)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,i,s){this.setStates(e,t,s,Me.fromModelSelections(i))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){let i=[],s=[];for(let a=0,l=e.length;a<l;a++)i.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),s.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const r=this._model.deltaDecorations([],i),o=this._model.deltaDecorations([],s);this._autoClosedActions.push(new N4(this._model,r,o))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=m_e.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);let i=[],s=[];for(let r=0;r<e.commands.length;r++){const o=e.commands[r];o instanceof hz&&o.enclosingRange&&o.closeCharacterRange&&(i.push(o.closeCharacterRange),s.push(o.enclosingRange))}i.length>0&&this._pushAutoClosedAction(i,s),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,i,s,r){const o=new dD(this._model,this);if(o.equals(s))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new r_e(l,a)),!s||s.cursorState.length!==o.cursorState.length||o.cursorState.some((c,h)=>!c.modelState.equals(s.cursorState[h].modelState))){const c=s?s.cursorState.map(u=>u.modelState.selection):null,h=s?s.modelVersionId:0;e.emitOutgoingEvent(new FC(c,a,h,o.modelVersionId,t||"keyboard",i,r))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;let t=[];for(let i=0,s=e.length;i<s;i++){const r=e[i];if(!r.text||r.text.indexOf(`
`)>=0)return null;const o=r.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;const a=o[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,h=r.text.length-o[2].length-1,u=r.text.lastIndexOf(c,h-1);if(u===-1)return null;t.push([u,h])}return t}executeEdits(e,t,i,s){let r=null;t==="snippet"&&(r=this._findAutoClosingPairs(i)),r&&(i[0]._isTracked=!0);let o=[],a=[];const l=this._model.pushEditOperations(this.getSelections(),i,c=>{if(r)for(let u=0,d=r.length;u<d;u++){const[f,g]=r[u],p=c[u],_=p.range.startLineNumber,v=p.range.startColumn-1+f,b=p.range.startColumn-1+g;o.push(new I(_,b+1,_,b+2)),a.push(new I(_,v+1,_,b+2))}const h=s(c);return h&&(this._isHandling=!0),h});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),o.length>0&&this._pushAutoClosedAction(o,a)}_executeEdit(e,t,i,s=0){if(this.context.cursorConfig.readOnly)return;const r=new dD(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(o){Ie(o)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,i,s,r,!1)&&this._revealPrimaryCursor(t,i,0,!0,0)}setIsDoingComposition(e){this._isDoingComposition=e}getAutoClosedCharacters(){return N4.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._selectionsWhenCompositionStarted=this.getSelections().slice(0)}endComposition(e,t){this._executeEdit(()=>{t==="keyboard"&&(this._executeEditOperation(Ut.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this._selectionsWhenCompositionStarted,this.getSelections(),this.getAutoClosedCharacters())),this._selectionsWhenCompositionStarted=null)},e,t)}type(e,t,i){this._executeEdit(()=>{if(i==="keyboard"){const s=t.length;let r=0;for(;r<s;){const o=qw(t,r),a=t.substr(r,o);this._executeEditOperation(Ut.typeWithInterceptors(this._isDoingComposition,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),r+=o}}else this._executeEditOperation(Ut.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,i)}compositionType(e,t,i,s,r,o){if(t.length===0&&i===0&&s===0){if(r!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new Se(c.lineNumber,c.column+r,c.lineNumber,c.column+r)});this.setSelections(e,o,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(Ut.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,i,s,r))},e,o)}paste(e,t,i,s,r){this._executeEdit(()=>{this._executeEditOperation(Ut.paste(this.context.cursorConfig,this._model,this.getSelections(),t,i,s||[]))},e,r,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(pu.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,i){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Gn(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}executeCommands(e,t,i){this._executeEdit(()=>{this._executeEditOperation(new Gn(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}}Qf.MAX_CURSOR_COUNT=1e4;class m_e{static executeCommands(e,t,i){const s={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},r=this._innerExecuteCommands(s,i);for(let o=0,a=s.trackedRanges.length;o<a;o++)s.model._setTrackedRange(s.trackedRanges[o],null,0);return r}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const i=this._getEditOperations(e,t);if(i.operations.length===0)return null;const s=i.operations,r=this._getLoserCursorMap(s);if(r.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;let o=[];for(let c=0,h=s.length;c<h;c++)r.hasOwnProperty(s[c].identifier.major.toString())||o.push(s[c]);i.hadTrackedEditOperation&&o.length>0&&(o[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,o,c=>{let h=[];for(let f=0;f<e.selectionsBefore.length;f++)h[f]=[];for(const f of c)!f.identifier||h[f.identifier.major].push(f);const u=(f,g)=>f.identifier.minor-g.identifier.minor;let d=[];for(let f=0;f<e.selectionsBefore.length;f++)h[f].length>0?(h[f].sort(u),d[f]=t[f].computeCursorState(e.model,{getInverseEditOperations:()=>h[f],getTrackedSelection:g=>{const p=parseInt(g,10),_=e.model._getTrackedRange(e.trackedRanges[p]);return e.trackedRangesDirection[p]===0?new Se(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn):new Se(_.endLineNumber,_.endColumn,_.startLineNumber,_.startColumn)}})):d[f]=e.selectionsBefore[f];return d});a||(a=e.selectionsBefore);let l=[];for(let c in r)r.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,h)=>h-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,i=e.length;t<i;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let i=[],s=!1;for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a){const l=this._getEditOperationsFromCommand(e,r,a);i=i.concat(l.operations),s=s||l.hadTrackedEditOperation}}return{operations:i,hadTrackedEditOperation:s}}static _getEditOperationsFromCommand(e,t,i){let s=[],r=0;const o=(u,d,f=!1)=>{I.isEmpty(u)&&d===""||s.push({identifier:{major:t,minor:r++},range:u,text:d,forceMoveMarkers:f,isAutoWhitespaceEdit:i.insertsAutoWhitespace})};let a=!1;const h={addEditOperation:o,addTrackedEditOperation:(u,d,f)=>{a=!0,o(u,d,f)},trackSelection:(u,d)=>{const f=Se.liftSelection(u);let g;if(f.isEmpty())if(typeof d=="boolean")d?g=2:g=3;else{const v=e.model.getLineMaxColumn(f.startLineNumber);f.startColumn===v?g=2:g=3}else g=1;const p=e.trackedRanges.length,_=e.model._setTrackedRange(null,f,g);return e.trackedRanges[p]=_,e.trackedRangesDirection[p]=f.getDirection(),p.toString()}};try{i.getEditOperations(e.model,h)}catch(u){return Ie(u),{operations:[],hadTrackedEditOperation:!1}}return{operations:s,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((i,s)=>-I.compareRangesUsingEnds(i.range,s.range));let t={};for(let i=1;i<e.length;i++){const s=e[i-1],r=e[i];if(I.getStartPosition(s.range).isBefore(I.getEndPosition(r.range))){let o;s.identifier.major>r.identifier.major?o=s.identifier.major:o=r.identifier.major,t[o.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===o&&(e.splice(a,1),a<i&&i--,a--);i>0&&i--}}return t}}class bz{constructor(e,t,i,s,r,o){this.id=e,this.label=t,this.alias=i,this._precondition=s,this._run=r,this._contextKeyService=o}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}}const A4={getInitialState:()=>g1,tokenize2:(n,e,t,i)=>bV(0,n,t,i)};function vz(n,e,t=A4){return b_e(n,e,t||A4)}function __e(n,e,t,i,s,r,o){let a="<div>",l=i,c=0,h=!0;for(let u=0,d=e.getCount();u<d;u++){const f=e.getEndOffset(u);if(f<=i)continue;let g="";for(;l<f&&l<s;l++){const p=n.charCodeAt(l);switch(p){case 9:let _=r-(l+c)%r;for(c+=_-1;_>0;)o&&h?(g+="&#160;",h=!1):(g+=" ",h=!0),_--;break;case 60:g+="&lt;",h=!1;break;case 62:g+="&gt;",h=!1;break;case 38:g+="&amp;",h=!1;break;case 0:g+="&#00;",h=!1;break;case 65279:case 8232:case 8233:case 133:g+="\uFFFD",h=!1;break;case 13:g+="&#8203",h=!1;break;case 32:o&&h?(g+="&#160;",h=!1):(g+=" ",h=!0);break;default:g+=String.fromCharCode(p),h=!1}}if(a+=`<span style="${e.getInlineStyle(u,t)}">${g}</span>`,f>s||l>=s)break}return a+="</div>",a}function b_e(n,e,t){let i='<div class="monaco-tokenized-source">';const s=sa(n);let r=t.getInitialState();for(let o=0,a=s.length;o<a;o++){const l=s[o];o>0&&(i+="<br/>");const c=t.tokenize2(l,!0,r,0);Oi.convertToEndOffset(c.tokens,l.length);const u=new Oi(c.tokens,l,e).inflate();let d=0;for(let f=0,g=u.getCount();f<g;f++){const p=u.getClassName(f),_=u.getEndOffset(f);i+=`<span class="${p}">${FA(l.substring(d,_))}</span>`,d=_}r=c.endState}return i+="</div>",i}class v_e{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,i=this._changes,s=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,i,s)}}class w_e{constructor(e,t,i,s,r){this.id=e,this.afterLineNumber=t,this.ordinal=i,this.height=s,this.minWidth=r,this.prefixSum=0}}class E_{constructor(e,t,i,s){this._instanceId=tV(++E_.INSTANCE_COUNT),this._pendingChanges=new v_e,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=i,this._paddingBottom=s}static findInsertionIndex(e,t,i){let s=0,r=e.length;for(;s<r;){const o=s+r>>>1;t===e[o].afterLineNumber?i<e[o].ordinal?r=o:s=o+1:t<e[o].afterLineNumber?r=o:s=o+1}return s}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(s,r,o,a)=>{t=!0,s=s|0,r=r|0,o=o|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new w_e(l,s,r,o,a)),l},changeOneWhitespace:(s,r,o)=>{t=!0,r=r|0,o=o|0,this._pendingChanges.change({id:s,newAfterLineNumber:r,newHeight:o})},removeWhitespace:s=>{t=!0,this._pendingChanges.remove({id:s})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,i){if((e.length>0||i.length>0)&&(this._minWidth=-1),e.length+t.length+i.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of i){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const s=new Set;for(const l of i)s.add(l.id);const r=new Map;for(const l of t)r.set(l.id,l);const o=l=>{let c=[];for(const h of l)if(!s.has(h.id)){if(r.has(h.id)){const u=r.get(h.id);h.afterLineNumber=u.newAfterLineNumber,h.height=u.newHeight}c.push(h)}return c},a=o(this._arr).concat(o(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=E_.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let i=0,s=t.length;i<s;i++)if(t[i].id===e)return i;return-1}_changeOneWhitespace(e,t,i){const s=this._findWhitespaceIndex(e);if(s!==-1&&(this._arr[s].height!==i&&(this._arr[s].height=i,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,s-1)),this._arr[s].afterLineNumber!==t)){const r=this._arr[s];this._removeWhitespace(s),r.afterLineNumber=t,this._insertWhitespace(r)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let i=0,s=this._arr.length;i<s;i++){const r=this._arr[i].afterLineNumber;e<=r&&r<=t?this._arr[i].afterLineNumber=e-1:r>t&&(this._arr[i].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let i=0,s=this._arr.length;i<s;i++){const r=this._arr[i].afterLineNumber;e<=r&&(this._arr[i].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let i=t;i<=e;i++)this._arr[i].prefixSum=this._arr[i-1].prefixSum+this._arr[i].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let i=0,s=t.length-1;for(;i<=s;){const o=(s-i|0)/2|0,a=i+o|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;i=a+1|0}else s=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const i=this._findLastWhitespaceBeforeLineNumber(e)+1;return i<this._arr.length?i:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e){this._checkPendingChanges(),e=e|0;let t;e>1?t=this._lineHeight*(e-1):t=0;const i=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e);return t+i+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,i=this._arr.length;t<i;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,i=this._lineHeight;let s=1,r=t;for(;s<r;){const o=(s+r)/2|0,a=this.getVerticalOffsetForLineNumber(o)|0;if(e>=a+i)s=o+1;else{if(e>=a)return o;r=o}}return s>t?t:s}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this._lineHeight,s=this.getLineNumberAtOrAfterVerticalOffset(e)|0,r=this.getVerticalOffsetForLineNumber(s)|0;let o=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(s)|0;const l=this.getWhitespacesCount()|0;let c,h;a===-1?(a=l,h=o+1,c=0):(h=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let u=r,d=u;const f=5e5;let g=0;r>=f&&(g=Math.floor(r/f)*f,g=Math.floor(g/i)*i,d-=g);const p=[],_=e+(t-e)/2;let v=-1;for(let y=s;y<=o;y++){if(v===-1){const D=u,S=u+i;(D<=_&&_<S||D>_)&&(v=y)}for(u+=i,p[y-s]=d,d+=i;h===y;)d+=c,u+=c,a++,a>=l?h=o+1:(h=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(u>=t){o=y;break}}v===-1&&(v=o);const b=this.getVerticalOffsetForLineNumber(o)|0;let w=s,C=o;return w<C&&r<e&&w++,w<C&&b+i>t&&C--,{bigNumbersDelta:g,startLineNumber:s,endLineNumber:o,relativeVerticalOffset:p,centeredLineNumber:v,completelyVisibleStartLineNumber:w,completelyVisibleEndLineNumber:C}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let i;t>=1?i=this._lineHeight*t:i=0;let s;return e>0?s=this.getWhitespacesAccumulatedHeight(e-1):s=0,i+s+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,i=this.getWhitespacesCount()-1;if(i<0)return-1;const s=this.getVerticalOffsetForWhitespaceIndex(i),r=this.getHeightForWhitespaceIndex(i);if(e>=s+r)return-1;for(;t<i;){const o=Math.floor((t+i)/2),a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(e>=a+l)t=o+1;else{if(e>=a)return o;i=o}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const i=this.getVerticalOffsetForWhitespaceIndex(t);if(i>e)return null;const s=this.getHeightForWhitespaceIndex(t),r=this.getIdForWhitespaceIndex(t),o=this.getAfterLineNumberForWhitespaceIndex(t);return{id:r,afterLineNumber:o,verticalOffset:i,height:s}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),s=this.getWhitespacesCount()-1;if(i<0)return[];let r=[];for(let o=i;o<=s;o++){const a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(a>=t)break;r.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:a,height:l})}return r}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}}E_.INSTANCE_COUNT=0;const C_e=125;class Op{constructor(e,t,i,s){e=e|0,t=t|0,i=i|0,s=s|0,e<0&&(e=0),t<0&&(t=0),i<0&&(i=0),s<0&&(s=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=i,this.contentHeight=s,this.scrollHeight=Math.max(i,s)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class y_e extends q{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new R),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new Op(0,0,0,0),this._scrollable=this._register(new j1(e,t)),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const i=t.contentWidth!==e.contentWidth,s=t.contentHeight!==e.contentHeight;(i||s)&&this._onDidContentSizeChange.fire(new z2(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}}class S_e extends q{constructor(e,t,i){super(),this._configuration=e;const s=this._configuration.options,r=s.get(129),o=s.get(74);this._linesLayout=new E_(t,s.get(58),o.top,o.bottom),this._scrollable=this._register(new y_e(0,i)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new Op(r.contentWidth,0,r.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(102)?C_e:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(58)&&this._linesLayout.setLineHeight(t.get(58)),e.hasChanged(74)){const i=t.get(74);this._linesLayout.setPadding(i.top,i.bottom)}if(e.hasChanged(129)){const i=t.get(129),s=i.contentWidth,r=i.height,o=this._scrollable.getScrollDimensions(),a=o.contentWidth;this._scrollable.setScrollDimensions(new Op(s,o.contentWidth,r,this._getContentHeight(s,r,a)))}else this._updateHeight();e.hasChanged(102)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const s=this._configuration.options.get(91);return s.horizontal===2||e>=t?0:s.horizontalScrollbarSize}_getContentHeight(e,t,i){const s=this._configuration.options;let r=this._linesLayout.getLinesTotalHeight();return s.get(93)?r+=Math.max(0,t-s.get(58)-s.get(74).bottom):r+=this._getHorizontalScrollbarHeight(e,i),r}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,i=e.height,s=e.contentWidth;this._scrollable.setScrollDimensions(new Op(t,e.contentWidth,i,this._getContentHeight(t,i,s)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new mP(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new mP(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(e){const t=this._configuration.options,i=t.get(130),s=t.get(43);if(i.isViewportWrapping){const r=t.get(129),o=t.get(64);return e>r.contentWidth+s.typicalHalfwidthCharacterWidth&&o.enabled&&o.side==="right"?e+r.verticalScrollbarWidth:e}else{const r=t.get(92)*s.typicalHalfwidthCharacterWidth,o=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+r,o)}}setMaxLineWidth(e){const t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new Op(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition();let t=e.scrollTop,i=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),s=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(i);return{scrollTop:t,scrollTopWithoutViewZones:t-s,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e){return this._linesLayout.getVerticalOffsetForLineNumber(e)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,t){const i=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:i.scrollLeft+e,scrollTop:i.scrollTop+t})}}class x_e{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class D_e{constructor(e){this._counts=e,this._isValid=!1,this._validEndIndex=-1,this._modelToView=[],this._viewToModel=[]}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._counts.length;e<t;e++){const i=this._counts[e],s=e>0?this._modelToView[e-1]:0;this._modelToView[e]=s+i;for(let r=0;r<i;r++)this._viewToModel[s+r]=e}this._modelToView.length=this._counts.length,this._viewToModel.length=this._modelToView[this._modelToView.length-1],this._isValid=!0,this._validEndIndex=this._counts.length-1}}changeValue(e,t){this._counts[e]!==t&&(this._counts[e]=t,this._invalidate(e))}removeValues(e,t){this._counts.splice(e,t),this._invalidate(e)}insertValues(e,t){this._counts=h_(this._counts,e,t),this._invalidate(e)}getTotalValue(){return this._ensureValid(),this._viewToModel.length}getAccumulatedValue(e){return this._ensureValid(),this._modelToView[e]}getIndexOf(e){this._ensureValid();const t=this._viewToModel[e],i=t>0?this._modelToView[t-1]:0;return new MV(t,e-i)}}class L_e{constructor(e,t,i,s,r,o,a,l,c){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=i,this._monospaceLineBreaksComputerFactory=s,this.fontInfo=r,this.tabSize=o,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this._constructLines(!0,null)}dispose(){this.hiddenAreasIds=this.model.deltaDecorations(this.hiddenAreasIds,[])}createCoordinatesConverter(){return new x_e(this)}_constructLines(e,t){this.lines=[],e&&(this.hiddenAreasIds=[]);const i=this.model.getLinesContent(),s=this.model.getInjectedTextDecorations(this._editorId),r=i.length,o=this.createLineBreaksComputer(),a=new tm(lo.fromDecorations(s));for(let p=0;p<r;p++){const _=a.takeWhile(v=>v.lineNumber===p+1);o.addRequest(i[p],_,t?t[p]:null)}const l=o.finalize();let c=[],h=this.hiddenAreasIds.map(p=>this.model.getDecorationRange(p)).sort(I.compareRangesUsingStarts),u=1,d=0,f=-1,g=f+1<h.length?d+1:r+2;for(let p=0;p<r;p++){let _=p+1;_===g&&(f++,u=h[f].startLineNumber,d=h[f].endLineNumber,g=f+1<h.length?d+1:r+2);let v=_>=u&&_<=d,b=gD(l[p],!v);c[p]=b.getViewLineCount(),this.lines[p]=b}this._validModelVersionId=this.model.getVersionId(),this.prefixSumComputer=new D_e(c)}getHiddenAreas(){return this.hiddenAreasIds.map(e=>this.model.getDecorationRange(e))}_reduceRanges(e){if(e.length===0)return[];let t=e.map(o=>this.model.validateRange(o)).sort(I.compareRangesUsingStarts),i=[],s=t[0].startLineNumber,r=t[0].endLineNumber;for(let o=1,a=t.length;o<a;o++){let l=t[o];l.startLineNumber>r+1?(i.push(new I(s,1,r,1)),s=l.startLineNumber,r=l.endLineNumber):l.endLineNumber>r&&(r=l.endLineNumber)}return i.push(new I(s,1,r,1)),i}setHiddenAreas(e){let t=this._reduceRanges(e),i=this.hiddenAreasIds.map(u=>this.model.getDecorationRange(u)).sort(I.compareRangesUsingStarts);if(t.length===i.length){let u=!1;for(let d=0;d<t.length;d++)if(!t[d].equalsRange(i[d])){u=!0;break}if(!u)return!1}let s=[];for(const u of t)s.push({range:u,options:$e.EMPTY});this.hiddenAreasIds=this.model.deltaDecorations(this.hiddenAreasIds,s);let r=t,o=1,a=0,l=-1,c=l+1<r.length?a+1:this.lines.length+2,h=!1;for(let u=0;u<this.lines.length;u++){let d=u+1;d===c&&(l++,o=r[l].startLineNumber,a=r[l].endLineNumber,c=l+1<r.length?a+1:this.lines.length+2);let f=!1;if(d>=o&&d<=a?this.lines[u].isVisible()&&(this.lines[u]=this.lines[u].setVisible(!1),f=!0):(h=!0,this.lines[u].isVisible()||(this.lines[u]=this.lines[u].setVisible(!0),f=!0)),f){let g=this.lines[u].getViewLineCount();this.prefixSumComputer.changeValue(u,g)}}return h||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.lines.length?!1:this.lines[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.lines.length?1:this.lines[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,i,s){const r=this.fontInfo.equals(e),o=this.wrappingStrategy===t,a=this.wrappingColumn===i,l=this.wrappingIndent===s;if(r&&o&&a&&l)return!1;const c=r&&o&&!a&&l;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=i,this.wrappingIndent=s;let h=null;if(c){h=[];for(let u=0,d=this.lines.length;u<d;u++)h[u]=this.lines[u].getLineBreakData()}return this._constructLines(!1,h),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,i){if(!e||e<=this._validModelVersionId)return null;let s=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,r=this.prefixSumComputer.getAccumulatedValue(i-1);return this.lines.splice(t-1,i-t+1),this.prefixSumComputer.removeValues(t-1,i-t+1),new hI(s,r)}onModelLinesInserted(e,t,i,s){if(!e||e<=this._validModelVersionId)return null;const r=t>2&&!this.lines[t-2].isVisible();let o=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,a=0,l=[],c=[];for(let h=0,u=s.length;h<u;h++){let d=gD(s[h],!r);l.push(d);let f=d.getViewLineCount();a+=f,c[h]=f}return this.lines=this.lines.slice(0,t-1).concat(l).concat(this.lines.slice(t-1)),this.prefixSumComputer.insertValues(t-1,c),new uI(o,o+a-1)}onModelLineChanged(e,t,i){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];let s=t-1,r=this.lines[s].getViewLineCount(),o=this.lines[s].isVisible(),a=gD(i,o);this.lines[s]=a;let l=this.lines[s].getViewLineCount(),c=!1,h=0,u=-1,d=0,f=-1,g=0,p=-1;r>l?(h=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,u=h+l-1,g=u+1,p=g+(r-l)-1,c=!0):r<l?(h=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,u=h+r-1,d=u+1,f=d+(l-r)-1,c=!0):(h=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,u=h+l-1),this.prefixSumComputer.changeValue(s,l);const _=h<=u?new _z(h,u):null,v=d<=f?new uI(d,f):null,b=g<=p?new hI(g,p):null;return[c,_,v,b]}acceptVersionId(e){this._validModelVersionId=e,this.lines.length===1&&!this.lines[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.prefixSumComputer.getTotalValue()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),i=this._toValidViewLineNumber(i);const s=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),o=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),a=this.model.getActiveIndentGuide(s.lineNumber,r.lineNumber,o.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),i=t.index,s=t.remainder;return new M4(i+1,s)}getMinColumnOfViewLine(e){return this.lines[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.lines[e.modelLineNumber-1],i=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new P(e.modelLineNumber,s)}getModelEndPositionOfViewLine(e){const t=this.lines[e.modelLineNumber-1],i=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new P(e.modelLineNumber,s)}getViewLineInfosGroupedByModelRanges(e,t){const i=this.getViewLineInfo(e),s=this.getViewLineInfo(t),r=new Array;let o=this.getModelStartPositionOfViewLine(i),a=new Array;for(let l=i.modelLineNumber;l<=s.modelLineNumber;l++){const c=this.lines[l-1];if(c.isVisible()){let h=l===i.modelLineNumber?i.modelLineWrappedLineIdx:0,u=l===s.modelLineNumber?s.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let d=h;d<u;d++)a.push(new M4(l,d))}if(!c.isVisible()&&o){const h=new P(l-1,this.model.getLineMaxColumn(l-1)+1),u=I.fromPositions(o,h);r.push(new R4(u,a)),a=[],o=null}else c.isVisible()&&!o&&(o=new P(l,1))}if(o){const l=I.fromPositions(o,this.getModelEndPositionOfViewLine(s));r.push(new R4(l,a))}return r}getViewLinesBracketGuides(e,t,i,s){const r=i?this.convertViewPositionToModelPosition(i.lineNumber,i.column):null,o=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.getLinesBracketGuides(l,a.modelRange.endLineNumber,r,s);for(const h of a.viewLines)if(h.isWrappedLineContinuation&&this.getMinColumnOfViewLine(h)===1)o.push([]);else{let u=c[h.modelLineNumber-l];u=u.map(d=>d.horizontalLine?new Bd(d.visibleColumn,d.className,new LE(d.horizontalLine.top,this.convertModelPositionToViewPosition(h.modelLineNumber,d.horizontalLine.endColumn).column)):d),o.push(u)}}return o}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let r=[],o=[],a=[];const l=i.lineNumber-1,c=s.lineNumber-1;let h=null;for(let g=l;g<=c;g++){const p=this.lines[g];if(p.isVisible()){let _=p.getViewLineNumberOfModelPosition(0,g===l?i.column:1),v=p.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(g+1)),b=v-_+1,w=0;b>1&&p.getViewLineMinColumn(this.model,g+1,v)===1&&(w=_===0?1:2),o.push(b),a.push(w),h===null&&(h=new P(g+1,0))}else h!==null&&(r=r.concat(this.model.getLinesIndentGuides(h.lineNumber,g)),h=null)}h!==null&&(r=r.concat(this.model.getLinesIndentGuides(h.lineNumber,s.lineNumber)),h=null);const u=t-e+1;let d=new Array(u),f=0;for(let g=0,p=r.length;g<p;g++){let _=r[g],v=Math.min(u-f,o[g]),b=a[g],w;b===2?w=0:b===1?w=1:w=v;for(let C=0;C<v;C++)C===w&&(_=0),d[f++]=_}return d}getViewLineContent(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),i=t.index,s=t.remainder;return this.lines[i].getViewLineContent(this.model,i+1,s)}getViewLineLength(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),i=t.index,s=t.remainder;return this.lines[i].getViewLineLength(this.model,i+1,s)}getViewLineMinColumn(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),i=t.index,s=t.remainder;return this.lines[i].getViewLineMinColumn(this.model,i+1,s)}getViewLineMaxColumn(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),i=t.index,s=t.remainder;return this.lines[i].getViewLineMaxColumn(this.model,i+1,s)}getViewLineData(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),i=t.index,s=t.remainder;return this.lines[i].getViewLineData(this.model,i+1,s)}getViewLinesData(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let s=this.prefixSumComputer.getIndexOf(e-1),r=e,o=s.index,a=s.remainder,l=[];for(let c=o,h=this.model.getLineCount();c<h;c++){let u=this.lines[c];if(!u.isVisible())continue;let d=c===o?a:0,f=u.getViewLineCount()-d,g=!1;r+f>t&&(g=!0,f=t-r+1);let p=d+f;if(u.getViewLinesData(this.model,c+1,d,p,r-e,i,l),r+=f,g)break}return l}validateViewPosition(e,t,i){e=this._toValidViewLineNumber(e);let s=this.prefixSumComputer.getIndexOf(e-1),r=s.index,o=s.remainder,a=this.lines[r],l=a.getViewLineMinColumn(this.model,r+1,o),c=a.getViewLineMaxColumn(this.model,r+1,o);t<l&&(t=l),t>c&&(t=c);let h=a.getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new P(r+1,h)).equals(i)?new P(e,t):this.convertModelPositionToViewPosition(i.lineNumber,i.column)}validateViewRange(e,t){const i=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),s=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new I(i.lineNumber,i.column,s.lineNumber,s.column)}convertViewPositionToModelPosition(e,t){e=this._toValidViewLineNumber(e);let i=this.prefixSumComputer.getIndexOf(e-1),s=i.index,r=i.remainder,o=this.lines[s].getModelColumnOfViewPosition(r,t);return this.model.validatePosition(new P(s+1,o))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),i=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new I(t.lineNumber,t.column,i.lineNumber,i.column)}convertModelPositionToViewPosition(e,t,i=2){const s=this.model.validatePosition(new P(e,t)),r=s.lineNumber,o=s.column;let a=r-1,l=!1;for(;a>0&&!this.lines[a].isVisible();)a--,l=!0;if(a===0&&!this.lines[a].isVisible())return new P(1,1);const c=1+(a===0?0:this.prefixSumComputer.getAccumulatedValue(a-1));let h;return l?h=this.lines[a].getViewPositionOfModelPosition(c,this.model.getLineMaxColumn(a+1),i):h=this.lines[r-1].getViewPositionOfModelPosition(c,o,i),h}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return I.fromPositions(i)}else{const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),s=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new I(i.lineNumber,i.column,s.lineNumber,s.column)}}getViewLineNumberOfModelPosition(e,t){let i=e-1;if(this.lines[i].isVisible()){const r=1+(i===0?0:this.prefixSumComputer.getAccumulatedValue(i-1));return this.lines[i].getViewLineNumberOfModelPosition(r,t)}for(;i>0&&!this.lines[i].isVisible();)i--;if(i===0&&!this.lines[i].isVisible())return 1;const s=1+(i===0?0:this.prefixSumComputer.getAccumulatedValue(i-1));return this.lines[i].getViewLineNumberOfModelPosition(s,this.model.getLineMaxColumn(i+1))}getDecorationsInRange(e,t,i){const s=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),r=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(r.lineNumber-s.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new I(s.lineNumber,1,r.lineNumber,r.column),t,i);let o=[];const a=s.lineNumber-1,l=r.lineNumber-1;let c=null;for(let f=a;f<=l;f++)if(this.lines[f].isVisible())c===null&&(c=new P(f+1,f===a?s.column:1));else if(c!==null){const p=this.model.getLineMaxColumn(f);o=o.concat(this.model.getDecorationsInRange(new I(c.lineNumber,c.column,f,p),t,i)),c=null}c!==null&&(o=o.concat(this.model.getDecorationsInRange(new I(c.lineNumber,c.column,r.lineNumber,r.column),t,i)),c=null),o.sort((f,g)=>{const p=I.compareRangesUsingStarts(f.range,g.range);return p===0?f.id<g.id?-1:f.id>g.id?1:0:p});let h=[],u=0,d=null;for(const f of o){const g=f.id;d!==g&&(d=g,h[u++]=f)}return h}getInjectedTextAt(e){const t=this._toValidViewLineNumber(e.lineNumber),i=this.prefixSumComputer.getIndexOf(t-1),s=i.index,r=i.remainder;return this.lines[s].getInjectedTextAt(r,e.column)}normalizePosition(e,t){const i=this._toValidViewLineNumber(e.lineNumber),s=this.prefixSumComputer.getIndexOf(i-1),r=s.index,o=s.remainder;return this.lines[r].normalizePosition(this.model,r+1,o,e,t)}getLineIndentColumn(e){const t=this._toValidViewLineNumber(e),i=this.prefixSumComputer.getIndexOf(t-1),s=i.index;return i.remainder===0?this.model.getLineIndentColumn(s+1):0}}class M4{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}get isWrappedLineContinuation(){return this.modelLineWrappedLineIdx>0}}class R4{constructor(e,t){this.modelRange=e,this.viewLines=t}}class PC{constructor(){}isVisible(){return!0}setVisible(e){return e?this:BC.INSTANCE}getLineBreakData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,i){return e.getLineContent(t)}getViewLineLength(e,t,i){return e.getLineLength(t)}getViewLineMinColumn(e,t,i){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,i){return e.getLineMaxColumn(t)}getViewLineData(e,t,i){let s=e.getLineTokens(t),r=s.getLineContent();return new n2(r,!1,1,r.length+1,0,s.inflate(),null)}getViewLinesData(e,t,i,s,r,o,a){if(!o[r]){a[r]=null;return}a[r]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new P(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,i,s,r){return s}getInjectedTextAt(e,t){return null}}PC.INSTANCE=new PC;class BC{constructor(){}isVisible(){return!1}setVisible(e){return e?PC.INSTANCE:this}getLineBreakData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,i){throw new Error("Not supported")}getViewLineLength(e,t,i){throw new Error("Not supported")}getViewLineMinColumn(e,t,i){throw new Error("Not supported")}getViewLineMaxColumn(e,t,i){throw new Error("Not supported")}getViewLineData(e,t,i){throw new Error("Not supported")}getViewLinesData(e,t,i,s,r,o,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,i,s,r){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}BC.INSTANCE=new BC;class k_e{constructor(e,t){this._lineBreakData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getLineBreakData(){return this._lineBreakData}getViewLineCount(){return this._isVisible?this._lineBreakData.breakOffsets.length:0}getInputStartOffsetOfOutputLineIndex(e){return this._lineBreakData.getInputOffsetOfOutputPosition(e,0)}getInputEndOffsetOfOutputLineIndex(e,t,i){return i+1===this._lineBreakData.breakOffsets.length?e.getLineMaxColumn(t)-1:this._lineBreakData.getInputOffsetOfOutputPosition(i+1,0)}getViewLineContent(e,t,i){if(!this._isVisible)throw new Error("Not supported");const s=i>0?this._lineBreakData.breakOffsets[i-1]:0,r=i<this._lineBreakData.breakOffsets.length?this._lineBreakData.breakOffsets[i]:this._lineBreakData.breakOffsets[this._lineBreakData.breakOffsets.length-1];let o;if(this._lineBreakData.injectionOffsets!==null){const a=this._lineBreakData.injectionOffsets.map((l,c)=>new lo(0,0,l+1,this._lineBreakData.injectionOptions[c],0));o=lo.applyInjectedText(e.getLineContent(t),a).substring(s,r)}else o=e.getValueInRange({startLineNumber:t,startColumn:s+1,endLineNumber:t,endColumn:r+1});return i>0&&(o=O4(this._lineBreakData.wrappedTextIndentLength)+o),o}getViewLineLength(e,t,i){if(!this._isVisible)throw new Error("Not supported");const s=i>0?this._lineBreakData.breakOffsets[i-1]:0;let o=(i<this._lineBreakData.breakOffsets.length?this._lineBreakData.breakOffsets[i]:this._lineBreakData.breakOffsets[this._lineBreakData.breakOffsets.length-1])-s;return i>0&&(o=this._lineBreakData.wrappedTextIndentLength+o),o}getViewLineMinColumn(e,t,i){if(!this._isVisible)throw new Error("Not supported");return this._getViewLineMinColumn(i)}_getViewLineMinColumn(e){return e>0?this._lineBreakData.wrappedTextIndentLength+1:1}getViewLineMaxColumn(e,t,i){if(!this._isVisible)throw new Error("Not supported");return this.getViewLineLength(e,t,i)+1}getViewLineData(e,t,i){if(!this._isVisible)throw new Error("Not supported");const s=this._lineBreakData,r=i>0?s.wrappedTextIndentLength:0,o=s.injectionOffsets,a=s.injectionOptions;let l,c,h;if(o){const p=e.getLineTokens(t).withInserted(o.map((w,C)=>({offset:w,text:a[C].content,tokenMetadata:Oi.defaultTokenMetadata}))),_=i>0?s.breakOffsets[i-1]:0,v=s.breakOffsets[i];l=p.getLineContent().substring(_,v),c=p.sliceAndInflate(_,v,r),h=new Array;let b=0;for(let w=0;w<o.length;w++){const C=a[w].content.length,y=o[w]+b,D=o[w]+b+C;if(y>v)break;if(_<D){const S=a[w];if(S.inlineClassName){const x=i>0?s.wrappedTextIndentLength:0,k=x+Math.max(y-_,0),F=x+Math.min(D-_,v);k!==F&&h.push(new Whe(k,F,S.inlineClassName,S.inlineClassNameAffectsLetterSpacing))}}b+=C}}else{const p=this.getInputStartOffsetOfOutputLineIndex(i),_=this.getInputEndOffsetOfOutputLineIndex(e,t,i),v=e.getLineTokens(t);l=e.getValueInRange({startLineNumber:t,startColumn:p+1,endLineNumber:t,endColumn:_+1}),c=v.sliceAndInflate(p,_,r),h=null}i>0&&(l=O4(s.wrappedTextIndentLength)+l);const u=i>0?s.wrappedTextIndentLength+1:1,d=l.length+1,f=i+1<this.getViewLineCount(),g=i===0?0:s.breakOffsetsVisibleColumn[i-1];return new n2(l,f,u,d,g,c,h)}getViewLinesData(e,t,i,s,r,o,a){if(!this._isVisible)throw new Error("Not supported");for(let l=i;l<s;l++){let c=r+l-i;if(!o[c]){a[c]=null;continue}a[c]=this.getViewLineData(e,t,l)}}getModelColumnOfViewPosition(e,t){if(!this._isVisible)throw new Error("Not supported");let i=t-1;return e>0&&(i<this._lineBreakData.wrappedTextIndentLength?i=0:i-=this._lineBreakData.wrappedTextIndentLength),this._lineBreakData.getInputOffsetOfOutputPosition(e,i)+1}getViewPositionOfModelPosition(e,t,i=2){if(!this._isVisible)throw new Error("Not supported");let s=this._lineBreakData.getOutputPositionOfInputOffset(t-1,i),r=s.outputLineIndex,o=s.outputOffset+1;return r>0&&(o+=this._lineBreakData.wrappedTextIndentLength),new P(e+r,o)}getViewLineNumberOfModelPosition(e,t){if(!this._isVisible)throw new Error("Not supported");const i=this._lineBreakData.getOutputPositionOfInputOffset(t-1);return e+i.outputLineIndex}normalizePosition(e,t,i,s,r){if(this._lineBreakData.injectionOffsets!==null){const o=s.lineNumber-i,a=this._lineBreakData.outputPositionToOffsetInUnwrappedLine(i,s.column-1),l=this._lineBreakData.normalizeOffsetAroundInjections(a,r);if(l!==a)return this._lineBreakData.getOutputPositionOfOffsetInUnwrappedLine(l,r).toPosition(o,this._lineBreakData.wrappedTextIndentLength)}if(r===0){if(i>0&&s.column===this._getViewLineMinColumn(i))return new P(s.lineNumber-1,this.getViewLineMaxColumn(e,t,i-1))}else if(r===1){const o=this.getViewLineCount()-1;if(i<o&&s.column===this.getViewLineMaxColumn(e,t,i))return new P(s.lineNumber+1,this._getViewLineMinColumn(i+1))}return s}getInjectedTextAt(e,t){return this._lineBreakData.getInjectedText(e,t-1)}}let fD=[""];function O4(n){if(n>=fD.length)for(let e=1;e<=n;e++)fD[e]=E_e(e);return fD[n]}function E_e(n){return new Array(n+1).join(" ")}function gD(n,e){return n===null?e?PC.INSTANCE:BC.INSTANCE:new k_e(n,e)}class I_e{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}class T_e{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new I_e(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,i,s){return!1}createLineBreaksComputer(){let e=[];return{addRequest:(t,i,s)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,i){return new hI(t,i)}onModelLinesInserted(e,t,i,s){return new uI(t,i)}onModelLineChanged(e,t,i){return[!1,new _z(t,t),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,i){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,i){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const i=t-e+1;let s=new Array(i);for(let r=0;r<i;r++)s[r]=0;return s}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){let t=this.model.getLineTokens(e),i=t.getLineContent();return new n2(i,!1,1,i.length+1,0,t.inflate(),null)}getViewLinesData(e,t,i){const s=this.model.getLineCount();e=Math.min(Math.max(1,e),s),t=Math.min(Math.max(1,t),s);let r=[];for(let o=e;o<=t;o++){let a=o-e;i[a]||(r[a]=null),r[a]=this.getViewLineData(o)}return r}getDecorationsInRange(e,t,i){return this.model.getDecorationsInRange(e,t,i)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class N_e{constructor(e,t,i,s,r){this.editorId=e,this.model=t,this.configuration=i,this._linesCollection=s,this._coordinatesConverter=r,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let i=this._decorationsCache[t];if(!i){const s=e.range,r=e.options;let o;if(r.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new P(s.startLineNumber,1),0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new P(s.endLineNumber,this.model.getLineMaxColumn(s.endLineNumber)),1);o=new I(a.lineNumber,a.column,l.lineNumber,l.column)}else o=this._coordinatesConverter.convertModelRangeToViewRange(s,1);i=new $V(o,r),this._decorationsCache[t]=i}return i}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsViewportData(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}_getDecorationsViewportData(e){const t=this._linesCollection.getDecorationsInRange(e,this.editorId,xA(this.configuration.options)),i=e.startLineNumber,s=e.endLineNumber;let r=[],o=0,a=[];for(let l=i;l<=s;l++)a[l-i]=[];for(let l=0,c=t.length;l<c;l++){let h=t[l],u=h.options,d=this._getOrCreateViewModelDecoration(h),f=d.range;if(r[o++]=d,u.inlineClassName){let g=new nm(f,u.inlineClassName,u.inlineClassNameAffectsLetterSpacing?3:0),p=Math.max(i,f.startLineNumber),_=Math.min(s,f.endLineNumber);for(let v=p;v<=_;v++)a[v-i].push(g)}if(u.beforeContentClassName&&i<=f.startLineNumber&&f.startLineNumber<=s){let g=new nm(new I(f.startLineNumber,f.startColumn,f.startLineNumber,f.startColumn),u.beforeContentClassName,1);a[f.startLineNumber-i].push(g)}if(u.afterContentClassName&&i<=f.endLineNumber&&f.endLineNumber<=s){let g=new nm(new I(f.endLineNumber,f.endColumn,f.endLineNumber,f.endColumn),u.afterContentClassName,2);a[f.endLineNumber-i].push(g)}}return{decorations:r,inlineDecorations:a}}}const A_e={ModesRegistry:"editor.modesRegistry"};class M_e{constructor(){this._onDidChangeLanguages=new R,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[],this._dynamicLanguages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,i=this._languages.length;t<i;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return[].concat(this._languages).concat(this._dynamicLanguages)}}const Uh=new M_e;$i.add(A_e.ModesRegistry,Uh);const Fg="plaintext",R_e=".txt";Uh.registerLanguage({id:Fg,extensions:[R_e],aliases:[m("plainText.alias","Plain Text"),"text"],mimetypes:[fr.text]});Qt.register(Fg,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0);class O_e extends q{constructor(e,t,i,s,r,o){if(super(),this._editorId=e,this._configuration=t,this.model=i,this._eventDispatcher=new f_e,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new hr(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._tokenizeViewportSoon=this._register(new Wt(()=>this.tokenizeViewport(),50)),this._updateConfigurationViewLineCount=this._register(new Wt(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStartLine=-1,this._viewportStartLineTrackedRange=null,this._viewportStartLineDelta=0,this.model.isTooLargeForTokenization())this._lines=new T_e(this.model);else{const a=this._configuration.options,l=a.get(43),c=a.get(123),h=a.get(130),u=a.get(122);this._lines=new L_e(this._editorId,this.model,s,r,l,this.model.getOptions().tabSize,c,h.wrappingColumn,u)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new Qf(i,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new S_e(this._configuration,this.getLineCount(),o)),this._register(this.viewLayout.onDidScroll(a=>{a.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitSingleViewEvent(new l_e(a)),this._eventDispatcher.emitOutgoingEvent(new $2(a.oldScrollWidth,a.oldScrollLeft,a.oldScrollHeight,a.oldScrollTop,a.scrollWidth,a.scrollLeft,a.scrollHeight,a.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(a=>{this._eventDispatcher.emitOutgoingEvent(a)})),this._decorations=new N_e(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(a=>{try{const l=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(l,a)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(z0.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new u_e)})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this.invalidateMinimapColorCache(),this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,null,1),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){const e=this.viewLayout.getLinesViewportData(),t=new I(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber)),i=this._toModelVisibleRanges(t);for(const s of i)this.model.tokenizeViewport(s.startLineNumber,s.endLineNumber)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new o_e(e)),this._eventDispatcher.emitOutgoingEvent(new H2(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new i_e)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new n_e)}onDidColorThemeChange(){this._eventDispatcher.emitSingleViewEvent(new c_e)}_onConfigurationChanged(e,t){let i=null;if(this._viewportStartLine!==-1){let h=new P(this._viewportStartLine,this.getLineMinColumn(this._viewportStartLine));i=this.coordinatesConverter.convertViewPositionToModelPosition(h)}let s=!1;const r=this._configuration.options,o=r.get(43),a=r.get(123),l=r.get(130),c=r.get(122);if(this._lines.setWrappingSettings(o,a,l.wrappingColumn,c)&&(e.emitViewEvent(new $b),e.emitViewEvent(new Ub),e.emitViewEvent(new bd(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.getCurrentScrollTop()!==0&&(s=!0),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(80)&&(this._decorations.reset(),e.emitViewEvent(new bd(null))),e.emitViewEvent(new s_e(t)),this.viewLayout.onConfigurationChanged(t),s&&i){const h=this.coordinatesConverter.convertModelPositionToViewPosition(i),u=this.viewLayout.getVerticalOffsetForLineNumber(h.lineNumber);this.viewLayout.setScrollPosition({scrollTop:u+this._viewportStartLineDelta},1)}hr.shouldRecreate(t)&&(this.cursorConfig=new hr(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const t=this._eventDispatcher.beginEmitViewEvents();let i=!1,s=!1;const r=e.changes,o=e instanceof Bh?e.versionId:null,a=this._lines.createLineBreaksComputer();for(const h of r)switch(h.changeType){case 4:{for(let u=0;u<h.detail.length;u++){const d=h.detail[u];let f=h.injectedTexts[u];f&&(f=f.filter(g=>!g.ownerId||g.ownerId===this._editorId)),a.addRequest(d,f,null)}break}case 2:{let u=null;h.injectedText&&(u=h.injectedText.filter(d=>!d.ownerId||d.ownerId===this._editorId)),a.addRequest(h.detail,u,null);break}}const l=a.finalize();let c=0;for(const h of r)switch(h.changeType){case 1:{this._lines.onModelFlushed(),t.emitViewEvent(new $b),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),i=!0;break}case 3:{const u=this._lines.onModelLinesDeleted(o,h.fromLineNumber,h.toLineNumber);u!==null&&(t.emitViewEvent(u),this.viewLayout.onLinesDeleted(u.fromLineNumber,u.toLineNumber)),i=!0;break}case 4:{const u=l.slice(c,c+h.detail.length);c+=h.detail.length;const d=this._lines.onModelLinesInserted(o,h.fromLineNumber,h.toLineNumber,u);d!==null&&(t.emitViewEvent(d),this.viewLayout.onLinesInserted(d.fromLineNumber,d.toLineNumber)),i=!0;break}case 2:{const u=l[c];c++;const[d,f,g,p]=this._lines.onModelLineChanged(o,h.lineNumber,u);s=d,f&&t.emitViewEvent(f),g&&(t.emitViewEvent(g),this.viewLayout.onLinesInserted(g.fromLineNumber,g.toLineNumber)),p&&(t.emitViewEvent(p),this.viewLayout.onLinesDeleted(p.fromLineNumber,p.toLineNumber));break}case 5:break}o!==null&&this._lines.acceptVersionId(o),this.viewLayout.onHeightMaybeChanged(),!i&&s&&(t.emitViewEvent(new Ub),t.emitViewEvent(new bd(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}if(this._viewportStartLine=-1,this._configuration.setMaxLineNumber(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&this._viewportStartLineTrackedRange){const t=this.model._getTrackedRange(this._viewportStartLineTrackedRange);if(t){const i=this.coordinatesConverter.convertModelPositionToViewPosition(t.getStartPosition()),s=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber);this.viewLayout.setScrollPosition({scrollTop:s+this._viewportStartLineDelta},1)}}try{const t=this._eventDispatcher.beginEmitViewEvents();this._cursor.onModelContentChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(this.model.onDidChangeTokens(e=>{let t=[];for(let i=0,s=e.ranges.length;i<s;i++){const r=e.ranges[i],o=this.coordinatesConverter.convertModelPositionToViewPosition(new P(r.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new P(r.toLineNumber,this.model.getLineMaxColumn(r.toLineNumber))).lineNumber;t[i]={fromLineNumber:o,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new h_e(t)),e.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new a_e),this.cursorConfig=new hr(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new hr(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new $b),t.emitViewEvent(new Ub),t.emitViewEvent(new bd(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new hr(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new bd(e))}))}setHiddenAreas(e){let t=!1;try{const i=this._eventDispatcher.beginEmitViewEvents();t=this._lines.setHiddenAreas(e),t&&(i.emitViewEvent(new $b),i.emitViewEvent(new Ub),i.emitViewEvent(new bd(null)),this._cursor.onLineMappingChanged(i),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),t&&this._eventDispatcher.emitOutgoingEvent(new T4)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(129),t=this._configuration.options.get(58),i=Math.max(20,Math.round(e.height/t)),s=this.viewLayout.getLinesViewportData(),r=Math.max(1,s.completelyVisibleStartLineNumber-i),o=Math.min(this.getLineCount(),s.completelyVisibleEndLineNumber+i);return this._toModelVisibleRanges(new I(r,this.getLineMinColumn(r),o,this.getLineMaxColumn(o)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),i=this._lines.getHiddenAreas();if(i.length===0)return[t];let s=[],r=0,o=t.startLineNumber,a=t.startColumn,l=t.endLineNumber,c=t.endColumn;for(let h=0,u=i.length;h<u;h++){const d=i[h].startLineNumber,f=i[h].endLineNumber;f<o||d>l||(o<d&&(s[r++]=new I(o,a,d-1,this.model.getLineMaxColumn(d-1))),o=f+1,a=1)}return(o<l||o===l&&a<c)&&(s[r++]=new I(o,a,l,c)),s}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,i=e.completelyVisibleEndLineNumber;return new I(t,this.getLineMinColumn(t),i,this.getLineMaxColumn(i))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),i=t.completelyVisibleStartLineNumber,s=t.completelyVisibleEndLineNumber;return new I(i,this.getLineMinColumn(i),s,this.getLineMaxColumn(s))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,i=this.viewLayout.getLineNumberAtVerticalOffset(t),s=this.coordinatesConverter.convertViewPositionToModelPosition(new P(i,this.getLineMinColumn(i))),r=this.viewLayout.getVerticalOffsetForLineNumber(i)-t;return{scrollLeft:e.scrollLeft,firstPosition:s,firstPositionDeltaTop:r}}reduceRestoreState(e){if(typeof e.firstPosition=="undefined")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),i=this.coordinatesConverter.convertModelPositionToViewPosition(t),s=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:s}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getTextModelOptions(){return this.model.getOptions()}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,i){this._viewportStartLine=e;let s=this.coordinatesConverter.convertViewPositionToModelPosition(new P(e,this.getLineMinColumn(e)));this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,new I(s.lineNumber,s.column,s.lineNumber,s.column),1);const r=this.viewLayout.getVerticalOffsetForLineNumber(e),o=this.viewLayout.getCurrentScrollTop();this._viewportStartLineDelta=o-r}getActiveIndentGuide(e,t,i){return this._lines.getActiveIndentGuide(e,t,i)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,i,s){return this._lines.getViewLinesBracketGuides(e,t,i,s)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=Jn(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=kg(this.getLineContent(e));return t===-1?0:t+2}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewLineRenderingData(e,t){let i=this.model.mightContainRTL(),s=this.model.mightContainNonBasicASCII(),r=this.getTabSize(),o=this._lines.getViewLineData(t),l=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return o.inlineDecorations&&(l=[...l,...o.inlineDecorations.map(c=>c.toInlineDecoration(t))]),new Ss(o.minColumn,o.maxColumn,o.content,o.continuesWithWrappedLine,i,s,o.tokens,l,r,o.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,i){let s=this._lines.getViewLinesData(e,t,i);return new Vhe(this.getTabSize(),s)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,xA(this._configuration.options)),i=new F_e;for(const s of t){const r=s.options,o=r.overviewRuler;if(!o)continue;const a=o.position;if(a===0)continue;const l=o.getColor(e),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.startLineNumber,s.range.startColumn),h=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.endLineNumber,s.range.endColumn);i.accept(l,r.zIndex,c,h,a)}return i.asArray}invalidateOverviewRulerColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const i=t.options.overviewRuler;i&&i.invalidateCachedColor()}}invalidateMinimapColorCache(){const e=this.model.getAllDecorations();for(const t of e){const i=t.options.minimap;i&&i.invalidateCachedColor()}}getValueInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(i,t)}getModelLineMaxColumn(e){return this.model.getLineMaxColumn(e)}validateModelPosition(e){return this.model.validatePosition(e)}validateModelRange(e){return this.model.validateRange(e)}deduceModelPositionRelativeToViewPosition(e,t,i){const s=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=i:t+=i);const o=this.model.getOffsetAt(s)+t;return this.model.getPositionAt(o)}getEOL(){return this.model.getEOL()}getPlainTextToCopy(e,t,i){const s=i?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(I.compareRangesUsingStarts);let r=!1,o=!1;for(const l of e)l.isEmpty()?r=!0:o=!0;if(!o){if(!t)return"";const l=e.map(h=>h.startLineNumber);let c="";for(let h=0;h<l.length;h++)h>0&&l[h-1]===l[h]||(c+=this.model.getLineContent(l[h])+s);return c}if(r&&t){let l=[],c=0;for(const h of e){const u=h.startLineNumber;h.isEmpty()?u!==c&&l.push(this.model.getLineContent(u)):l.push(this.model.getValueInRange(h,i?2:0)),c=u}return l.length===1?l[0]:l}let a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,i?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const i=this.model.getLanguageId();if(i===Fg||e.length!==1)return null;let s=e[0];if(s.isEmpty()){if(!t)return null;const h=s.startLineNumber;s=new I(h,this.model.getLineMinColumn(h),h,this.model.getLineMaxColumn(h))}const r=this._configuration.options.get(43),o=this._getColorMap(),l=/[:;\\\/<>]/.test(r.fontFamily)||r.fontFamily===Cn.fontFamily;let c;return l?c=Cn.fontFamily:(c=r.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${Cn.fontFamily}`),{mode:i,html:`<div style="color: ${o[1]};background-color: ${o[2]};font-family: ${c};font-weight: ${r.fontWeight};font-size: ${r.fontSize}px;line-height: ${r.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(s,o)+"</div>"}}_getHTMLToCopy(e,t){const i=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn,a=this.getTabSize();let l="";for(let c=i;c<=r;c++){const h=this.model.getLineTokens(c),u=h.getLineContent(),d=c===i?s-1:0,f=c===r?o-1:u.length;u===""?l+="<br>":l+=__e(u,h.inflate(),t,d,f,a,Zi)}return l}_getColorMap(){let e=Zt.getColorMap(),t=["#000000"];if(e)for(let i=1,s=e.length;i<s;i++)t[i]=V.Format.CSS.formatHex(e[i]);return t}pushStackElement(){this.model.pushStackElement()}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,i){this._withViewEventsCollector(s=>this._cursor.setStates(s,e,t,i))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,i=0){this._withViewEventsCollector(s=>this._cursor.setSelections(s,e,t,i))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new p_e);return}this._withViewEventsCollector(e)}executeEdits(e,t,i){this._executeCursorEdit(s=>this._cursor.executeEdits(s,e,t,i))}startComposition(){this._cursor.setIsDoingComposition(!0),this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._cursor.setIsDoingComposition(!1),this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(i=>this._cursor.type(i,e,t))}compositionType(e,t,i,s,r){this._executeCursorEdit(o=>this._cursor.compositionType(o,e,t,i,s,r))}paste(e,t,i,s){this._executeCursorEdit(r=>this._cursor.paste(r,e,t,i,s))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(i=>this._cursor.executeCommand(i,e,t))}executeCommands(e,t){this._executeCursorEdit(i=>this._cursor.executeCommands(i,e,t))}revealPrimaryCursor(e,t){this._withViewEventsCollector(i=>this._cursor.revealPrimary(i,e,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),i=new I(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new qv(e,i,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),i=new I(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new qv(e,i,null,0,!0,0)))}revealRange(e,t,i,s,r){this._withViewEventsCollector(o=>o.emitViewEvent(new qv(e,i,null,s,t,r)))}getVerticalOffsetForLineNumber(e){return this.viewLayout.getVerticalOffsetForLineNumber(e)}getScrollTop(){return this.viewLayout.getCurrentScrollTop()}setScrollTop(e,t){this.viewLayout.setScrollPosition({scrollTop:e},t)}setScrollPosition(e,t){this.viewLayout.setScrollPosition(e,t)}deltaScrollNow(e,t){this.viewLayout.deltaScrollNow(e,t)}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new d_e),this._eventDispatcher.emitOutgoingEvent(new T4))}setMaxLineWidth(e){this.viewLayout.setMaxLineWidth(e)}_withViewEventsCollector(e){try{const t=this._eventDispatcher.beginEmitViewEvents();e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}class F_e{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,i,s,r){const o=this._asMap[e];if(o){const a=o.data,l=a[a.length-3],c=a[a.length-1];if(l===r&&c+1>=i){s>c&&(a[a.length-1]=s);return}a.push(r,i,s)}else{const a=new UV(e,t,[r,i,s]);this._asMap[e]=a,this.asArray.push(a)}}}class I_{constructor(...e){this._entries=new Map;for(let[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}const rs=Xe("accessibilityService"),P_e=new he("accessibilityModeEnabled",!1);class B_e extends Ig{constructor(e,t){super(0);for(let i=0;i<e.length;i++)this.set(e.charCodeAt(i),1);for(let i=0;i<t.length;i++)this.set(t.charCodeAt(i),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let dI=[],fI=[];class U2{constructor(e,t){this.classifier=new B_e(e,t)}static create(e){return new U2(e.get(118),e.get(117))}createLineBreaksComputer(e,t,i,s){t=t|0,i=+i;const r=[],o=[],a=[];return{addRequest:(l,c,h)=>{r.push(l),o.push(c),a.push(h)},finalize:()=>{const l=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth;let c=[];for(let h=0,u=r.length;h<u;h++){const d=o[h],f=a[h];f&&!f.injectionOptions&&!d?c[h]=V_e(this.classifier,f,r[h],t,i,l,s):c[h]=W_e(this.classifier,r[h],d,t,i,l,s)}return dI.length=0,fI.length=0,c}}}}function V_e(n,e,t,i,s,r,o){if(s===-1)return null;const a=t.length;if(a<=1)return null;const l=e.breakOffsets,c=e.breakOffsetsVisibleColumn,h=wz(t,i,s,r,o),u=s-h;let d=dI,f=fI,g=0,p=0,_=0,v=s;const b=l.length;let w=0;if(w>=0){let C=Math.abs(c[w]-v);for(;w+1<b;){const y=Math.abs(c[w+1]-v);if(y>=C)break;C=y,w++}}for(;w<b;){let C=w<0?0:l[w],y=w<0?0:c[w];p>C&&(C=p,y=_);let D=0,S=0,x=0,k=0;if(y<=v){let A=y,z=C===0?0:t.charCodeAt(C-1),H=C===0?0:n.get(z),te=!0;for(let ie=C;ie<a;ie++){const ae=ie,_e=t.charCodeAt(ie);let me,fe;if(Ri(_e)?(ie++,me=0,fe=2):(me=n.get(_e),fe=wm(_e,A,i,r)),ae>p&&gI(z,H,_e,me)&&(D=ae,S=A),A+=fe,A>v){ae>p?(x=ae,k=A-fe):(x=ie+1,k=A),A-S>u&&(D=0),te=!1;break}z=_e,H=me}if(te){g>0&&(d[g]=l[l.length-1],f[g]=c[l.length-1],g++);break}}if(D===0){let A=y,z=t.charCodeAt(C),H=n.get(z),te=!1;for(let ie=C-1;ie>=p;ie--){const ae=ie+1,_e=t.charCodeAt(ie);if(_e===9){te=!0;break}let me,fe;if(Bf(_e)?(ie--,me=0,fe=2):(me=n.get(_e),fe=Kr(_e)?r:1),A<=v){if(x===0&&(x=ae,k=A),A<=v-u)break;if(gI(_e,me,z,H)){D=ae,S=A;break}}A-=fe,z=_e,H=me}if(D!==0){const ie=u-(k-S);if(ie<=i){const ae=t.charCodeAt(x);let _e;Ri(ae)?_e=2:_e=wm(ae,k,i,r),ie-_e<0&&(D=0)}}if(te){w--;continue}}if(D===0&&(D=x,S=k),D<=p){const A=t.charCodeAt(p);Ri(A)?(D=p+2,S=_+2):(D=p+1,S=_+wm(A,_,i,r))}for(p=D,d[g]=D,_=S,f[g]=S,g++,v=S+u;w<0||w<b&&c[w]<S;)w++;let F=Math.abs(c[w]-v);for(;w+1<b;){const A=Math.abs(c[w+1]-v);if(A>=F)break;F=A,w++}}return g===0?null:(d.length=g,f.length=g,dI=e.breakOffsets,fI=e.breakOffsetsVisibleColumn,e.breakOffsets=d,e.breakOffsetsVisibleColumn=f,e.wrappedTextIndentLength=h,e)}function W_e(n,e,t,i,s,r,o){const a=lo.applyInjectedText(e,t);let l,c;if(t&&t.length>0?(l=t.map(S=>S.options),c=t.map(S=>S.column-1)):(l=null,c=null),s===-1)return l?new im([a.length],[],0,c,l):null;const h=a.length;if(h<=1)return l?new im([a.length],[],0,c,l):null;const u=wz(a,i,s,r,o),d=s-u;let f=[],g=[],p=0,_=0,v=0,b=s,w=a.charCodeAt(0),C=n.get(w),y=wm(w,0,i,r),D=1;Ri(w)&&(y+=1,w=a.charCodeAt(1),C=n.get(w),D++);for(let S=D;S<h;S++){const x=S,k=a.charCodeAt(S);let F,A;Ri(k)?(S++,F=0,A=2):(F=n.get(k),A=wm(k,y,i,r)),gI(w,C,k,F)&&(_=x,v=y),y+=A,y>b&&((_===0||y-v>d)&&(_=x,v=y-A),f[p]=_,g[p]=v,p++,b=v+d,_=0),w=k,C=F}return p===0&&(!t||t.length===0)?null:(f[p]=h,g[p]=y,new im(f,g,u,c,l))}function wm(n,e,t,i){return n===9?t-e%t:Kr(n)||n<32?i:1}function F4(n,e){return e-n%e}function gI(n,e,t,i){return t!==32&&(e===2||e===3&&i!==2||i===1||i===3&&e!==1)}function wz(n,e,t,i,s){let r=0;if(s!==0){const o=Jn(n);if(o!==-1){for(let l=0;l<o;l++)r+=n.charCodeAt(l)===9?F4(r,e):1;const a=s===3?2:s===2?1:0;for(let l=0;l<a;l++)r+=F4(r,e);r+i>t&&(r=0)}}return r}var pD;const mD=(pD=window.trustedTypes)===null||pD===void 0?void 0:pD.createPolicy("domLineBreaksComputer",{createHTML:n=>n});class j2{static create(){return new j2}constructor(){}createLineBreaksComputer(e,t,i,s){t=t|0,i=+i;let r=[],o=[];return{addRequest:(a,l,c)=>{r.push(a),o.push(l)},finalize:()=>z_e(r,e,t,i,s,o)}}}function z_e(n,e,t,i,s,r){var o;function a(x){const k=r[x];if(k){const F=lo.applyInjectedText(n[x],k),A=k.map(H=>H.options),z=k.map(H=>H.column-1);return new im([F.length],[],0,z,A)}else return null}if(i===-1){const x=[];for(let k=0,F=n.length;k<F;k++)x[k]=a(k);return x}const l=Math.round(i*e.typicalHalfwidthCharacterWidth),h=Math.round(t*(s===3?2:s===2?1:0)),u=Math.ceil(e.spaceWidth*h),d=document.createElement("div");Qi.applyFontInfoSlow(d,e);const f=lu(1e4),g=[],p=[],_=[],v=[],b=[];for(let x=0;x<n.length;x++){const k=lo.applyInjectedText(n[x],r[x]);let F=0,A=0,z=l;if(s!==0)if(F=Jn(k),F===-1)F=0;else{for(let ae=0;ae<F;ae++)A+=k.charCodeAt(ae)===9?t-A%t:1;const ie=Math.ceil(e.spaceWidth*A);ie+e.typicalFullwidthCharacterWidth>l?(F=0,A=0):z=l-ie}const H=k.substr(F),te=H_e(H,A,t,z,f,u);g[x]=F,p[x]=A,_[x]=H,v[x]=te[0],b[x]=te[1]}const w=f.build(),C=(o=mD==null?void 0:mD.createHTML(w))!==null&&o!==void 0?o:w;d.innerHTML=C,d.style.position="absolute",d.style.top="10000",d.style.wordWrap="break-word",document.body.appendChild(d);let y=document.createRange();const D=Array.prototype.slice.call(d.children,0);let S=[];for(let x=0;x<n.length;x++){const k=D[x],F=$_e(y,k,_[x],v[x]);if(F===null){S[x]=a(x);continue}const A=g[x],z=p[x]+h,H=b[x],te=[];for(let me=0,fe=F.length;me<fe;me++)te[me]=H[F[me]];if(A!==0)for(let me=0,fe=F.length;me<fe;me++)F[me]+=A;let ie,ae;const _e=r[x];_e?(ie=_e.map(me=>me.options),ae=_e.map(me=>me.column-1)):(ie=null,ae=null),S[x]=new im(F,te,z,ae,ie)}return document.body.removeChild(d),S}function H_e(n,e,t,i,s,r){if(r!==0){let d=String(r);s.appendASCIIString('<div style="text-indent: -'),s.appendASCIIString(d),s.appendASCIIString("px; padding-left: "),s.appendASCIIString(d),s.appendASCIIString("px; box-sizing: border-box; width:")}else s.appendASCIIString('<div style="width:');s.appendASCIIString(String(i)),s.appendASCIIString('px;">');const o=n.length;let a=e,l=0,c=[],h=[],u=0<o?n.charCodeAt(0):0;s.appendASCIIString("<span>");for(let d=0;d<o;d++){d!==0&&d%16384===0&&s.appendASCIIString("</span><span>"),c[d]=l,h[d]=a;const f=u;u=d+1<o?n.charCodeAt(d+1):0;let g=1,p=1;switch(f){case 9:g=t-a%t,p=g;for(let _=1;_<=g;_++)_<g?s.write1(160):s.appendASCII(32);break;case 32:u===32?s.write1(160):s.appendASCII(32);break;case 60:s.appendASCIIString("&lt;");break;case 62:s.appendASCIIString("&gt;");break;case 38:s.appendASCIIString("&amp;");break;case 0:s.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:s.write1(65533);break;default:Kr(f)&&p++,f<32?s.write1(9216+f):s.write1(f)}l+=g,a+=p}return s.appendASCIIString("</span>"),c[n.length]=l,h[n.length]=a,s.appendASCIIString("</div>"),[c,h]}function $_e(n,e,t,i){if(t.length<=1)return null;const s=Array.prototype.slice.call(e.children,0),r=[];try{pI(n,s,i,0,null,t.length-1,null,r)}catch(o){return console.log(o),null}return r.length===0?null:(r.push(t.length),r)}function pI(n,e,t,i,s,r,o,a){if(i===r||(s=s||_D(n,e,t[i],t[i+1]),o=o||_D(n,e,t[r],t[r+1]),Math.abs(s[0].top-o[0].top)<=.1))return;if(i+1===r){a.push(r);return}const l=i+(r-i)/2|0,c=_D(n,e,t[l],t[l+1]);pI(n,e,t,i,s,l,c,a),pI(n,e,t,l,c,r,o,a)}function _D(n,e,t,i){return n.setStart(e[t/16384|0].firstChild,t%16384),n.setEnd(e[i/16384|0].firstChild,i%16384),n.getClientRects()}var U_e=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Uc=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let j_e=0;class q_e{constructor(e,t,i,s,r){this.model=e,this.viewModel=t,this.view=i,this.hasRealView=s,this.listenersToRemove=r}dispose(){He(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}let T_=class Kv extends q{constructor(e,t,i,s,r,o,a,l,c,h){super(),this._onDidDispose=this._register(new R),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new R),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new R),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new R),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new R),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new R),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeConfiguration=this._register(new R),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new R),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new R),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new R),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new R),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new R),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new P4),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new P4),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new R),this.onWillType=this._onWillType.event,this._onDidType=this._register(new R),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new R),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new R),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new R),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new R),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new R),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new R),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new R),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new R),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onContextMenu=this._register(new R),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new R),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new R),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new R),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new R),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new R),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new R),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new R),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new R),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new R),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event;const u=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=u.overflowWidgetsDomNode,delete u.overflowWidgetsDomNode,this._id=++j_e,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this.isSimpleWidget=i.isSimpleWidget||!1,this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(u,h)),this._register(this._configuration.onDidChange(f=>{this._onDidChangeConfiguration.fire(f);const g=this._configuration.options;if(f.hasChanged(129)){const p=g.get(129);this._onDidLayoutChange.fire(p)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=r,this._commandService=o,this._themeService=l,this._register(new K_e(this,this._contextKeyService)),this._register(new G_e(this,this._contextKeyService)),this._instantiationService=s.createChild(new I_([Le,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new Y_e(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={};let d;Array.isArray(i.contributions)?d=i.contributions:d=hf.getEditorContributions();for(const f of d){if(this._contributions[f.id]){Ie(new Error(`Cannot have two contributions with the same id ${f.id}`));continue}try{const g=this._instantiationService.createInstance(f.ctor,this);this._contributions[f.id]=g}catch(g){Ie(g)}}hf.getEditorActions().forEach(f=>{if(this._actions[f.id]){Ie(new Error(`Cannot have two actions with the same id ${f.id}`));return}const g=new bz(f.id,f.label,f.alias,vh(f.precondition),()=>this._instantiationService.invokeFunction(p=>Promise.resolve(f.runEditorCommand(p,this,null))),this._contextKeyService);this._actions[g.id]=g}),this._codeEditorService.addCodeEditor(this)}_createConfiguration(e,t){return new Qi(this.isSimpleWidget,e,this._domElement,t)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return d1.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const e=Object.keys(this._contributions);for(let t=0,i=e.length;t<i;t++){const s=e[t];this._contributions[s].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e)}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?$t.getWordAtPosition(this._modelData.model,this._configuration.options.get(115),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let i=0;return e&&e.lineEnding&&e.lineEnding===`
`?i=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(i=2),this._modelData.model.getValue(i,t)}setValue(e){!this._modelData||this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const i=this.hasTextFocus(),s=this._detachModel();this._attachModel(t),i&&this.hasModel()&&this.focus();const r={oldModelUrl:s?s.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(r),this._postDetachModelCleanup(s)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(let i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetForPosition(e,t,i){const s=e.model.validatePosition({lineNumber:t,column:i}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber)}getTopForLineNumber(e){return this._modelData?Kv._getVerticalOffsetForPosition(this._modelData,e,1):-1}getTopForPosition(e,t){return this._modelData?Kv._getVerticalOffsetForPosition(this._modelData,e,t):-1}setHiddenAreas(e){this._modelData&&this._modelData.viewModel.setHiddenAreas(e.map(t=>I.lift(t)))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return rt.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e){if(!!this._modelData){if(!P.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections("api",[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,i,s){if(!this._modelData)return;if(!I.isIRange(e))throw new Error("Invalid arguments");const r=this._modelData.model.validateRange(e),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(r);this._modelData.viewModel.revealRange("api",i,o,t,s)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,i){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new I(e,1,e,1),t,!1,i)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,i,s){if(!P.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new I(e.lineNumber,e.column,e.lineNumber,e.column),t,i,s)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e){const t=Se.isISelection(e),i=I.isIRange(e);if(!t&&!i)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(e);else if(i){const s={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(s)}}_setSelectionImpl(e){if(!this._modelData)return;const t=new Se(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections("api",[t])}revealLines(e,t,i=0){this._revealLines(e,t,0,i)}revealLinesInCenter(e,t,i=0){this._revealLines(e,t,1,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._revealLines(e,t,2,i)}revealLinesNearTop(e,t,i=0){this._revealLines(e,t,5,i)}_revealLines(e,t,i,s){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new I(e,1,t,1),i,!1,s)}revealRange(e,t=0,i=!1,s=!0){this._revealRange(e,i?1:0,s,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,i,s){if(!I.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(I.lift(e),t,i,s)}setSelections(e,t="api",i=0){if(!!this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let s=0,r=e.length;s<r;s++)if(!Se.isISelection(e[s]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(!!this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(!!this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){!this._modelData||this._modelData.viewModel.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;const e={},t=Object.keys(this._contributions);for(const r of t){const o=this._contributions[r];typeof o.saveViewState=="function"&&(e[r]=o.saveViewState())}const i=this._modelData.viewModel.saveCursorState(),s=this._modelData.viewModel.saveState();return{cursorState:i,viewState:s,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const i=t.cursorState;Array.isArray(i)?this._modelData.viewModel.restoreCursorState(i):this._modelData.viewModel.restoreCursorState([i]);const s=t.contributionsState||{},r=Object.keys(this._contributions);for(let a=0,l=r.length;a<l;a++){const c=r[a],h=this._contributions[c];typeof h.restoreViewState=="function"&&h.restoreViewState(s[c])}const o=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(o)}}getContribution(e){return this._contributions[e]||null}getActions(){const e=[],t=Object.keys(this._actions);for(let i=0,s=t.length;i<s;i++){const r=t[i];e.push(this._actions[r])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions[e]||null}trigger(e,t,i){switch(i=i||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const r=i;this._type(e,r.text||"");return}case"replacePreviousChar":{const r=i;this._compositionType(e,r.text||"",r.replaceCharCnt||0,0,0);return}case"compositionType":{const r=i;this._compositionType(e,r.text||"",r.replacePrevCharCnt||0,r.replaceNextCharCnt||0,r.positionDelta||0);return}case"paste":{const r=i;this._paste(e,r.text||"",r.pasteOnNewLine||!1,r.multicursorText||null,r.mode||null);return}case"cut":this._cut(e);return}const s=this.getAction(t);if(s){Promise.resolve(s.run()).then(void 0,Ie);return}!this._modelData||this._triggerEditorCommand(e,t,i)||this._triggerCommand(t,i)}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){!this._modelData||(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){!this._modelData||(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,i,s,r){!this._modelData||this._modelData.viewModel.compositionType(t,i,s,r,e)}_paste(e,t,i,s,r){if(!this._modelData||t.length===0)return;const o=this._modelData.viewModel.getSelection().getStartPosition();this._modelData.viewModel.paste(t,i,s,e);const a=this._modelData.viewModel.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new I(o.lineNumber,o.column,a.lineNumber,a.column),languageId:r})}_cut(e){!this._modelData||this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,i){const s=hf.getEditorCommand(t);return s?(i=i||{},i.source=e,this._instantiationService.invokeFunction(r=>{Promise.resolve(s.runEditorCommand(r,this,i)).then(void 0,Ie)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,i){if(!this._modelData||this._configuration.options.get(80))return!1;let s;return i?Array.isArray(i)?s=()=>i:s=i:s=()=>null,this._modelData.viewModel.executeEdits(e,t,s),!0}executeCommand(e,t){!this._modelData||this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){!this._modelData||this._modelData.viewModel.executeCommands(t,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,xA(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(129)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarMouseDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarMouseDown(e)}layout(e){this._configuration.observeReferenceElement(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(i)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(i)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),i=this._configuration.options,s=i.get(129),r=Kv._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),o=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+s.glyphMarginWidth+s.lineNumbersWidth+s.decorationsWidth-this.getScrollLeft();return{top:r,left:o,height:i.get(58)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){Qi.applyFontInfoSlow(e,this._configuration.options.get(43))}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setMaxLineNumber(e.getLineCount()),e.onBeforeAttached();const i=new O_e(this._id,this._configuration,e,j2.create(),U2.create(this._configuration.options),o=>na(o));t.push(e.onDidChangeDecorations(o=>this._onDidChangeModelDecorations.fire(o))),t.push(e.onDidChangeLanguage(o=>{this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(o)})),t.push(e.onDidChangeLanguageConfiguration(o=>this._onDidChangeModelLanguageConfiguration.fire(o))),t.push(e.onDidChangeContent(o=>this._onDidChangeModelContent.fire(o))),t.push(e.onDidChangeOptions(o=>this._onDidChangeModelOptions.fire(o))),t.push(e.onWillDispose(()=>this.setModel(null))),t.push(i.onEvent(o=>{switch(o.kind){case 0:this._onDidContentSizeChange.fire(o);break;case 1:this._editorTextFocus.setValue(o.hasFocus);break;case 2:this._onDidScrollChange.fire(o);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{o.reachedMaxCursorCount&&this._notificationService.warn(m("cursors.maximum","The number of cursors has been limited to {0}.",Qf.MAX_CURSOR_COUNT));const a=[];for(let h=0,u=o.selections.length;h<u;h++)a[h]=o.selections[h].getPosition();const l={position:a[0],secondaryPositions:a.slice(1),reason:o.reason,source:o.source};this._onDidChangeCursorPosition.fire(l);const c={selection:o.selections[0],secondarySelections:o.selections.slice(1),modelVersionId:o.modelVersionId,oldSelections:o.oldSelections,oldModelVersionId:o.oldModelVersionId,source:o.source,reason:o.reason};this._onDidChangeCursorSelection.fire(c);break}}}));const[s,r]=this._createView(i);if(r){this._domElement.appendChild(s.domNode.domNode);let o=Object.keys(this._contentWidgets);for(let a=0,l=o.length;a<l;a++){const c=o[a];s.addContentWidget(this._contentWidgets[c])}o=Object.keys(this._overlayWidgets);for(let a=0,l=o.length;a<l;a++){const c=o[a];s.addOverlayWidget(this._overlayWidgets[c])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new q_e(e,i,s,r,t)}_createView(e){let t;this.isSimpleWidget?t={paste:(r,o,a,l)=>{this._paste("keyboard",r,o,a,l)},type:r=>{this._type("keyboard",r)},compositionType:(r,o,a,l)=>{this._compositionType("keyboard",r,o,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(r,o,a,l)=>{const c={text:r,pasteOnNewLine:o,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:r=>{const o={text:r};this._commandService.executeCommand("type",o)},compositionType:(r,o,a,l)=>{if(a||l){const c={text:r,replacePrevCharCnt:o,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:r,replaceCharCnt:o};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const i=new U1(e.coordinatesConverter);return i.onKeyDown=r=>this._onKeyDown.fire(r),i.onKeyUp=r=>this._onKeyUp.fire(r),i.onContextMenu=r=>this._onContextMenu.fire(r),i.onMouseMove=r=>this._onMouseMove.fire(r),i.onMouseLeave=r=>this._onMouseLeave.fire(r),i.onMouseDown=r=>this._onMouseDown.fire(r),i.onMouseUp=r=>this._onMouseUp.fire(r),i.onMouseDrag=r=>this._onMouseDrag.fire(r),i.onMouseDrop=r=>this._onMouseDrop.fire(r),i.onMouseDropCanceled=r=>this._onMouseDropCanceled.fire(r),i.onMouseWheel=r=>this._onMouseWheel.fire(r),[new e_e(t,this._configuration,this._themeService,e,i,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e&&e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}};T_=U_e([Uc(3,pt),Uc(4,Tt),Uc(5,Fi),Uc(6,Le),Uc(7,At),Uc(8,en),Uc(9,rs)],T_);class P4 extends q{constructor(){super(),this._onDidChangeToTrue=this._register(new R),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new R),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class K_e extends q{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=B.editorSimpleInput.bindTo(t),this._editorFocus=B.focus.bindTo(t),this._textInputFocus=B.textInputFocus.bindTo(t),this._editorTextFocus=B.editorTextFocus.bindTo(t),this._editorTabMovesFocus=B.tabMovesFocus.bindTo(t),this._editorReadonly=B.readOnly.bindTo(t),this._inDiffEditor=B.inDiffEditor.bindTo(t),this._editorColumnSelection=B.columnSelection.bindTo(t),this._hasMultipleSelections=B.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=B.hasNonEmptySelection.bindTo(t),this._canUndo=B.canUndo.bindTo(t),this._canRedo=B.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(128)),this._editorReadonly.set(e.get(80)),this._inDiffEditor.set(e.get(53)),this._editorColumnSelection.set(e.get(18))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}class G_e extends q{constructor(e,t){super(),this._editor=e,this._contextKeyService=t,this._langId=B.languageId.bindTo(t),this._hasCompletionItemProvider=B.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=B.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=B.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=B.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=B.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=B.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=B.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=B.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=B.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=B.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=B.hasReferenceProvider.bindTo(t),this._hasRenameProvider=B.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=B.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=B.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=B.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=B.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=B.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=B.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=B.isInWalkThroughSnippet.bindTo(t);const i=()=>this._update();this._register(e.onDidChangeModel(i)),this._register(e.onDidChangeModelLanguage(i)),this._register(Hr.onDidChange(i)),this._register(ea.onDidChange(i)),this._register(TE.onDidChange(i)),this._register(a_.onDidChange(i)),this._register(Jw.onDidChange(i)),this._register(eC.onDidChange(i)),this._register(tC.onDidChange(i)),this._register(o_.onDidChange(i)),this._register(Qw.onDidChange(i)),this._register(IE.onDidChange(i)),this._register(Xw.onDidChange(i)),this._register(kE.onDidChange(i)),this._register(Jp.onDidChange(i)),this._register(Rl.onDidChange(i)),this._register(EE.onDidChange(i)),this._register(NE.onDidChange(i)),i()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(Hr.has(e)),this._hasCodeActionsProvider.set(ea.has(e)),this._hasCodeLensProvider.set(TE.has(e)),this._hasDefinitionProvider.set(a_.has(e)),this._hasDeclarationProvider.set(Jw.has(e)),this._hasImplementationProvider.set(eC.has(e)),this._hasTypeDefinitionProvider.set(tC.has(e)),this._hasHoverProvider.set(o_.has(e)),this._hasDocumentHighlightProvider.set(Qw.has(e)),this._hasDocumentSymbolProvider.set(IE.has(e)),this._hasReferenceProvider.set(Xw.has(e)),this._hasRenameProvider.set(kE.has(e)),this._hasSignatureHelpProvider.set(EE.has(e)),this._hasInlayHintsProvider.set(NE.has(e)),this._hasDocumentFormattingProvider.set(Jp.has(e)||Rl.has(e)),this._hasDocumentSelectionFormattingProvider.set(Rl.has(e)),this._hasMultipleDocumentFormattingProvider.set(Jp.all(e).length+Rl.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(Rl.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===Ve.walkThroughSnippet)})}}class Y_e extends q{constructor(e){super(),this._onChange=this._register(new R),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(Pf(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}const Z_e=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),X_e=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function bD(n){return Z_e+encodeURIComponent(n.toString())+X_e}const Q_e=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),J_e=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function e0e(n){return Q_e+encodeURIComponent(n.toString())+J_e}kt((n,e)=>{const t=n.getColor(zW);t&&e.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${t}; }`);const i=n.getColor(mm);i&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${bD(i)}") repeat-x bottom left; }`);const s=n.getColor(yfe);s&&e.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${s}; }`);const r=n.getColor(W1);r&&e.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${r}; }`);const o=n.getColor(Qa);o&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${bD(o)}") repeat-x bottom left; }`);const a=n.getColor(Sfe);a&&e.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${a}; }`);const l=n.getColor(N2);l&&e.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${l}; }`);const c=n.getColor(Qr);c&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${bD(c)}") repeat-x bottom left; }`);const h=n.getColor(xfe);h&&e.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${h}; }`);const u=n.getColor(Lfe);u&&e.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${u}; }`);const d=n.getColor(Dfe);d&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${e0e(d)}") no-repeat bottom left; }`);const f=n.getColor(tpe);f&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${f.rgba.a}; }`);const g=n.getColor(epe);g&&e.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${g}; }`);const p=n.getColor(Zl)||"inherit";e.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${p}}`)});class ft{constructor(e,t,i){const s=r=>this.emitter.fire(r);this.emitter=new R({onFirstListenerAdd:()=>e.addEventListener(t,s,i),onLastListenerRemove:()=>e.removeEventListener(t,s,i)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}}function B4(n){return n.preventDefault(),n.stopPropagation(),n}var Pg=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let t0e=!1;var VC;(function(n){n.North="north",n.South="south",n.East="east",n.West="west"})(VC||(VC={}));let i0e=4;const n0e=new R;let s0e=300;const r0e=new R;class q2{constructor(){this.disposables=new ee}get onPointerMove(){return this.disposables.add(new ft(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new ft(window,"mouseup")).event}dispose(){this.disposables.dispose()}}Pg([ui],q2.prototype,"onPointerMove",null);Pg([ui],q2.prototype,"onPointerUp",null);class K2{constructor(e){this.el=e,this.disposables=new ee}get onPointerMove(){return this.disposables.add(new ft(this.el,bt.Change)).event}get onPointerUp(){return this.disposables.add(new ft(this.el,bt.End)).event}dispose(){this.disposables.dispose()}}Pg([ui],K2.prototype,"onPointerMove",null);Pg([ui],K2.prototype,"onPointerUp",null);class WC{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}}Pg([ui],WC.prototype,"onPointerMove",null);Pg([ui],WC.prototype,"onPointerUp",null);class Ki extends q{constructor(e,t,i){super(),this.hoverDelay=s0e,this.hoverDelayer=this._register(new Dg(this.hoverDelay)),this._state=3,this._onDidEnablementChange=this._register(new R),this.onDidEnablementChange=this._onDidEnablementChange.event,this._onDidStart=this._register(new R),this.onDidStart=this._onDidStart.event,this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._onDidReset=this._register(new R),this.onDidReset=this._onDidReset.event,this._onDidEnd=this._register(new R),this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.orthogonalStartSashDisposables=this._register(new ee),this.orthogonalStartDragHandleDisposables=this._register(new ee),this.orthogonalEndSashDisposables=this._register(new ee),this.orthogonalEndDragHandleDisposables=this._register(new ee),this.el=Y(e,J(".monaco-sash")),i.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${i.orthogonalEdge}`),je&&this.el.classList.add("mac");const s=this._register(new ft(this.el,"mousedown")).event;this._register(s(u=>this.onPointerStart(u,new q2),this));const r=this._register(new ft(this.el,"dblclick")).event;this._register(r(this.onPointerDoublePress,this));const o=this._register(new ft(this.el,"mouseenter")).event;this._register(o(()=>Ki.onMouseEnter(this)));const a=this._register(new ft(this.el,"mouseleave")).event;this._register(a(()=>Ki.onMouseLeave(this))),this._register(st.addTarget(this.el));const l=ue.map(this._register(new ft(this.el,bt.Start)).event,u=>{var d;return Object.assign(Object.assign({},u),{target:(d=u.initialTarget)!==null&&d!==void 0?d:null})});this._register(l(u=>this.onPointerStart(u,new K2(this.el)),this));const c=this._register(new ft(this.el,bt.Tap)).event,h=ue.map(ue.filter(ue.debounce(c,(u,d)=>{var f;return{event:d,count:((f=u==null?void 0:u.count)!==null&&f!==void 0?f:0)+1}},250),({count:u})=>u===2),({event:u})=>{var d;return Object.assign(Object.assign({},u),{target:(d=u.initialTarget)!==null&&d!==void 0?d:null})});this._register(h(this.onPointerDoublePress,this)),typeof i.size=="number"?(this.size=i.size,i.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=i0e,this._register(n0e.event(u=>{this.size=u,this.layout()}))),this._register(r0e.event(u=>this.hoverDelay=u)),this.hidden=!1,this.layoutProvider=t,this.orthogonalStartSash=i.orthogonalStartSash,this.orthogonalEndSash=i.orthogonalEndSash,this.orientation=i.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",t0e),this.layout()}get state(){return this._state}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this._onDidEnablementChange.fire(e))}get orthogonalStartSash(){return this._orthogonalStartSash}set orthogonalStartSash(e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=i=>{this.orthogonalStartDragHandleDisposables.clear(),i!==0&&(this._orthogonalStartDragHandle=Y(this.el,J(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(Ze(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new ft(this._orthogonalStartDragHandle,"mouseenter")).event(()=>Ki.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new ft(this._orthogonalStartDragHandle,"mouseleave")).event(()=>Ki.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange(t,this)),t(e.state)}this._orthogonalStartSash=e}get orthogonalEndSash(){return this._orthogonalEndSash}set orthogonalEndSash(e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=i=>{this.orthogonalEndDragHandleDisposables.clear(),i!==0&&(this._orthogonalEndDragHandle=Y(this.el,J(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(Ze(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new ft(this._orthogonalEndDragHandle,"mouseenter")).event(()=>Ki.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new ft(this._orthogonalEndDragHandle,"mouseleave")).event(()=>Ki.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange(t,this)),t(e.state)}this._orthogonalEndSash=e}onPointerStart(e,t){ot.stop(e);let i=!1;if(!e.__orthogonalSashEvent){const g=this.getOrthogonalSash(e);g&&(i=!0,e.__orthogonalSashEvent=!0,g.onPointerStart(e,new WC(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new WC(t))),!this.state)return;const s=Pae("iframe");for(const g of s)g.style.pointerEvents="none";const r=e.pageX,o=e.pageY,a=e.altKey,l={startX:r,currentX:r,startY:o,currentY:o,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=$s(this.el),h=()=>{let g="";i?g="all-scroll":this.orientation===1?this.state===1?g="s-resize":this.state===2?g="n-resize":g=je?"row-resize":"ns-resize":this.state===1?g="e-resize":this.state===2?g="w-resize":g=je?"col-resize":"ew-resize",c.textContent=`* { cursor: ${g} !important; }`},u=new ee;h(),i||this.onDidEnablementChange(h,null,u);const d=g=>{ot.stop(g,!1);const p={startX:r,currentX:g.pageX,startY:o,currentY:g.pageY,altKey:a};this._onDidChange.fire(p)},f=g=>{ot.stop(g,!1),this.el.removeChild(c),this.el.classList.remove("active"),this._onDidEnd.fire(),u.dispose();for(const p of s)p.style.pointerEvents="auto"};t.onPointerMove(d,null,u),t.onPointerUp(f,null,u),u.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&Ki.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&Ki.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){Ki.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}hide(){this.hidden=!0,this.el.style.display="none",this.el.setAttribute("aria-hidden","true")}getOrthogonalSash(e){if(!(!e.target||!(e.target instanceof HTMLElement))&&e.target.classList.contains("orthogonal-drag-handle"))return e.target.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const G2=Xe("IEditorCancelService"),Cz=new he("cancellableOperation",!1,m("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));Ru(G2,class{constructor(){this._tokens=new WeakMap}add(n,e){let t=this._tokens.get(n);t||(t=n.invokeWithinContext(s=>{const r=Cz.bindTo(s.get(Le)),o=new bs;return{key:r,tokens:o}}),this._tokens.set(n,t));let i;return t.key.set(!0),i=t.tokens.push(e),()=>{i&&(i(),t.key.set(!t.tokens.isEmpty()),i=void 0)}}cancel(n){const e=this._tokens.get(n);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},!0);class o0e extends go{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(i=>i.get(G2).add(e,this))}dispose(){this._unregister(),super.dispose()}}ne(new class extends Ks{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:Cz})}runEditorCommand(n,e){n.get(G2).cancel(e)}});class zC{constructor(e,t){if(this.flags=t,(this.flags&1)!==0){const i=e.getModel();this.modelVersionId=i?cr("{0}#{1}",i.uri.toString(),i.getVersionId()):null}else this.modelVersionId=null;(this.flags&4)!==0?this.position=e.getPosition():this.position=null,(this.flags&2)!==0?this.selection=e.getSelection():this.selection=null,(this.flags&8)!==0?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof zC))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new zC(e,this.flags))}}class a0e extends o0e{constructor(e,t,i,s){super(e,s),this._listener=new ee,t&4&&this._listener.add(e.onDidChangeCursorPosition(r=>{(!i||!I.containsPosition(i,r.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(r=>{(!i||!I.containsRange(i,r.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(r=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(r=>this.cancel())),this._listener.add(e.onDidChangeModelContent(r=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class l0e extends go{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}class Jf{constructor(e,t,i){this._visiblePosition=e,this._visiblePositionScrollDelta=t,this._cursorPosition=i}static capture(e){let t=null,i=0;if(e.getScrollTop()!==0){const s=e.getVisibleRanges();if(s.length>0){t=s[0].getStartPosition();const r=e.getTopForPosition(t.lineNumber,t.column);i=e.getScrollTop()-r}}return new Jf(t,i,e.getPosition())}restore(e){if(this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){const t=e.getPosition();if(!this._cursorPosition||!t)return;const i=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+i)}}const yz={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:fr.text,TERMINALS:"Terminals"};class c0e{constructor(e){this.data=e}update(){}getData(){return this.data}}const Ta={CurrentDragAndDropData:void 0};class jh extends q{constructor(e,t,i={}){super(),this.options=i,this._context=e||this,this._action=t,t instanceof Cr&&this._register(t.onDidChange(s=>{!this.element||this.handleActionChangeEvent(s)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Uf)),this._actionRunner}set actionRunner(e){this._actionRunner=e}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(st.addTarget(e));const i=this.options&&this.options.draggable;i&&(e.draggable=!0,On&&this._register(K(e,de.DRAG_START,s=>{var r;return(r=s.dataTransfer)===null||r===void 0?void 0:r.setData(yz.TEXT,this._action.label)}))),this._register(K(t,bt.Tap,s=>this.onClick(s,!0))),this._register(K(t,de.MOUSE_DOWN,s=>{i||ot.stop(s,!0),this._action.enabled&&s.button===0&&t.classList.add("active")})),je&&this._register(K(t,de.CONTEXT_MENU,s=>{s.button===0&&s.ctrlKey===!0&&this.onClick(s)})),this._register(K(t,de.CLICK,s=>{ot.stop(s,!0),this.options&&this.options.isMenu||this.onClick(s)})),this._register(K(t,de.DBLCLICK,s=>{ot.stop(s,!0)})),[de.MOUSE_UP,de.MOUSE_OUT].forEach(s=>{this._register(K(t,s,r=>{ot.stop(r),t.classList.remove("active")}))})}onClick(e,t=!1){var i;ot.stop(e,!0);const s=Ms(this._context)?!((i=this.options)===null||i===void 0)&&i.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,s)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}updateTooltip(){}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),super.dispose()}}class Y2 extends jh{constructor(e,t,i={}){super(e,t,i),this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=Y(this.element,J("a.action-label"))),this.label&&(this._action.id===Yr.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&(Y(this.element,J("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=m({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.label&&(this.label.title=e)}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label&&this.label.classList.remove("codicon")}updateEnabled(){this.getAction().enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element&&this.element.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element&&this.element.classList.add("disabled"))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}}var h0e=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class ll extends q{constructor(e,t={}){var i,s,r,o,a,l;super(),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new R),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new R({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new R),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new R),this.onBeforeRun=this._onBeforeRun.event,this.options=t,this._context=(i=t.context)!==null&&i!==void 0?i:null,this._orientation=(s=this.options.orientation)!==null&&s!==void 0?s:0,this._triggerKeys={keyDown:(o=(r=this.options.triggerKeys)===null||r===void 0?void 0:r.keyDown)!==null&&o!==void 0?o:!1,keys:(l=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&l!==void 0?l:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Uf,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun(u=>this._onDidRun.fire(u))),this._register(this._actionRunner.onBeforeRun(u=>this._onBeforeRun.fire(u))),this._actionIds=[],this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",t.animated!==!1&&this.domNode.classList.add("animated");let c,h;switch(this._orientation){case 0:c=[15],h=[17];break;case 1:c=[16],h=[18],this.domNode.className+=" vertical";break}this._register(K(this.domNode,de.KEY_DOWN,u=>{const d=new Ft(u);let f=!0;const g=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;c&&(d.equals(c[0])||d.equals(c[1]))?f=this.focusPrevious():h&&(d.equals(h[0])||d.equals(h[1]))?f=this.focusNext():d.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():d.equals(14)?f=this.focusFirst():d.equals(13)?f=this.focusLast():d.equals(2)&&g instanceof jh&&g.trapsArrowNavigation?f=this.focusNext():this.isTriggerKeyEvent(d)?this._triggerKeys.keyDown?this.doTrigger(d):this.triggerKeyDown=!0:f=!1,f&&(d.preventDefault(),d.stopPropagation())})),this._register(K(this.domNode,de.KEY_UP,u=>{const d=new Ft(u);this.isTriggerKeyEvent(d)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(d)),d.preventDefault(),d.stopPropagation()):(d.equals(2)||d.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register(Pf(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(sf()===this.domNode||!Xo(sf(),this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role","toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(i=>{t=t||e.equals(i)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(Xo(sf(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.viewItems.forEach(t=>t.actionRunner=e))}getContainer(){return this.domNode}push(e,t={}){const i=Array.isArray(e)?e:[e];let s=au(t.index)?t.index:null;i.forEach(r=>{const o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation"),this.options.allowContextMenu||this._register(K(o,de.CONTEXT_MENU,l=>{ot.stop(l,!0)}));let a;this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(r)),a||(a=new Y2(this.context,r,t)),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(o),this.focusable&&a instanceof jh&&this.viewItems.length===0&&a.setFocusable(!0),s===null||s<0||s>=this.actionsList.children.length?(this.actionsList.appendChild(o),this.viewItems.push(a),this._actionIds.push(r.id)):(this.actionsList.insertBefore(o,this.actionsList.children[s]),this.viewItems.splice(s,0,a),this._actionIds.splice(s,0,r.id),s++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem)}clear(){He(this.viewItems),this.viewItems=[],this._actionIds=[],Yi(this.actionsList)}length(){return this.viewItems.length}focus(e){let t=!1,i;if(e===void 0?t=!0:typeof e=="number"?i=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem=="undefined"){const s=this.viewItems.findIndex(r=>r.isEnabled());this.focusedItem=s===-1?void 0:s,this.updateFocus()}else i!==void 0&&(this.focusedItem=i),this.updateFocus()}focusFirst(){return this.focusedItem=this.length()>1?1:0,this.focusPrevious()}focusLast(){return this.focusedItem=this.length()<2?0:this.length()-2,this.focusNext()}focusNext(){if(typeof this.focusedItem=="undefined")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const e=this.focusedItem;let t;do{if(this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=e,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,t=this.viewItems[this.focusedItem]}while(this.focusedItem!==e&&this.options.focusOnlyEnabledItems&&!t.isEnabled());return this.updateFocus(),!0}focusPrevious(){if(typeof this.focusedItem=="undefined")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const e=this.focusedItem;let t;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(this.options.preventLoopNavigation)return this.focusedItem=e,!1;this.focusedItem=this.viewItems.length-1}t=this.viewItems[this.focusedItem]}while(this.focusedItem!==e&&this.options.focusOnlyEnabledItems&&!t.isEnabled());return this.updateFocus(!0),!0}updateFocus(e,t){typeof this.focusedItem=="undefined"&&this.actionsList.focus({preventScroll:t});for(let i=0;i<this.viewItems.length;i++){const s=this.viewItems[i],r=s;if(i===this.focusedItem){let o=!0;Qp(r.focus)||(o=!1),this.options.focusOnlyEnabledItems&&Qp(s.isEnabled)&&!s.isEnabled()&&(o=!1),o?r.focus(e):this.actionsList.focus({preventScroll:t})}else Qp(r.blur)&&r.blur()}}doTrigger(e){if(typeof this.focusedItem=="undefined")return;const t=this.viewItems[this.focusedItem];if(t instanceof jh){const i=t._context===null||t._context===void 0?e:t._context;this.run(t._action,i)}}run(e,t){return h0e(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){He(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}}const u0e={IconContribution:"base.contributions.icons"};class d0e{constructor(){this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:m("iconDefintion.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:m("iconDefintion.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${Xn.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,s){const r=this.iconsById[e];if(r){if(i&&!r.description){r.description=i,this.iconSchema.properties[e].markdownDescription=`${i} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=i),this._onDidChange.fire()}return r}let o={id:e,description:i,defaults:t,deprecationMessage:s};this.iconsById[e]=o;let a={$ref:"#/definitions/icons"};return s&&(a.deprecationMessage=s),i&&(a.markdownDescription=`${i}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconFont(e){return this.iconFontsById[e]}toString(){const e=(r,o)=>r.id.localeCompare(o.id),t=r=>{for(;Rt.isThemeIcon(r.defaults);)r=this.iconsById[r.defaults.id];return`codicon codicon-${r?r.id:""}`};let i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const s=Object.keys(this.iconsById).map(r=>this.iconsById[r]);for(const r of s.filter(o=>!!o.description).sort(e))i.push(`|<i class="${t(r)}"></i>|${r.id}|${Rt.isThemeIcon(r.defaults)?r.defaults.id:r.id}|${r.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const r of s.filter(o=>!Rt.isThemeIcon(o.defaults)).sort(e))i.push(`|<i class="${t(r)}"></i>|${r.id}|`);return i.join(`
`)}}const mu=new d0e;$i.add(u0e.IconContribution,mu);function un(n,e,t,i){return mu.registerIcon(n,e,t,i)}function f0e(){return mu}function g0e(){for(const n of Zw.all)mu.registerIcon(n.id,n.definition,n.description);Zw.onDidRegister(n=>mu.registerIcon(n.id,n.definition,n.description))}g0e();const Sz="vscode://schemas/icons";let xz=$i.as(b1.JSONContribution);xz.registerSchema(Sz,mu.getIconSchema());const V4=new Wt(()=>xz.notifySchemaChanged(Sz),200);mu.onDidChange(()=>{V4.isScheduled()||V4.schedule()});const p0e=un("widget-close",se.close,m("widgetClose","Icon for the close action in widgets."));var m0e=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},_0e=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},b0e=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})},vD;const jb=3;class mp{constructor(e,t,i,s){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=i,this.modifiedLineEnd=s}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}}class wD{constructor(e){this.entries=e}}const v0e=un("diff-review-insert",se.add,m("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),w0e=un("diff-review-remove",se.remove,m("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),C0e=un("diff-review-close",se.close,m("diffReviewCloseIcon","Icon for 'Close' in diff review."));let HC=class Qc extends q{constructor(e,t){super(),this._modeService=t,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=Ye(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=Ye(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new ll(this.actionBarContainer.domNode)),this._actionBar.push(new Cr("diffreview.close",m("label.close","Close"),"close-diff-review "+Rt.asClassName(C0e),!0,()=>b0e(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=Ye(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=Ye(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new q1(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{!this._isVisible||(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{!this._isVisible||this._render()})),this._register(mi(this.domNode.domNode,"click",i=>{i.preventDefault();let s=U9(i.target,"diff-review-row");s&&this._goToRow(s)})),this._register(mi(this.domNode.domNode,"keydown",i=>{(i.equals(18)||i.equals(2066)||i.equals(530))&&(i.preventDefault(),this._goToRow(this._getNextRow())),(i.equals(16)||i.equals(2064)||i.equals(528))&&(i.preventDefault(),this._goToRow(this._getPrevRow())),(i.equals(9)||i.equals(2057)||i.equals(521)||i.equals(1033))&&(i.preventDefault(),this.hide()),(i.equals(10)||i.equals(3))&&(i.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let i=-1;for(let s=0,r=this._diffs.length;s<r;s++)if(this._diffs[s]===this._currentDiff){i=s;break}e=this._diffs.length+i-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new P(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let i=-1;for(let s=0,r=this._diffs.length;s<r;s++)if(this._diffs[s]===this._currentDiff){i=s;break}e=i+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new P(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1,t=this._getCurrentFocusedRow();if(t){let i=parseInt(t.getAttribute("data-line"),10);isNaN(i)||(e=i)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new P(e,1)),this._diffEditor.revealPosition(new P(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){let e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){let e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){let e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){let t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,i){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(i),this._content.setHeight(i),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||e.length===0)return[];const t=this._diffEditor.getOriginalEditor().getModel(),i=this._diffEditor.getModifiedEditor().getModel();return!t||!i?[]:Qc._mergeAdjacent(e,t.getLineCount(),i.getLineCount())}static _mergeAdjacent(e,t,i){if(!e||e.length===0)return[];let s=[],r=0;for(let c=0,h=e.length;c<h;c++){const u=e[c],d=u.originalStartLineNumber,f=u.originalEndLineNumber,g=u.modifiedStartLineNumber,p=u.modifiedEndLineNumber;let _=[],v=0;{const b=f===0?d:d-1,w=p===0?g:g-1;let C=1,y=1;if(c>0){const x=e[c-1];x.originalEndLineNumber===0?C=x.originalStartLineNumber+1:C=x.originalEndLineNumber+1,x.modifiedEndLineNumber===0?y=x.modifiedStartLineNumber+1:y=x.modifiedEndLineNumber+1}let D=b-jb+1,S=w-jb+1;if(D<C){const x=C-D;D=D+x,S=S+x}if(S<y){const x=y-S;D=D+x,S=S+x}_[v++]=new mp(D,b,S,w)}f!==0&&(_[v++]=new mp(d,f,0,0)),p!==0&&(_[v++]=new mp(0,0,g,p));{const b=f===0?d+1:f+1,w=p===0?g+1:p+1;let C=t,y=i;if(c+1<h){const x=e[c+1];x.originalEndLineNumber===0?C=x.originalStartLineNumber:C=x.originalStartLineNumber-1,x.modifiedEndLineNumber===0?y=x.modifiedStartLineNumber:y=x.modifiedStartLineNumber-1}let D=b+jb-1,S=w+jb-1;if(D>C){const x=C-D;D=D+x,S=S+x}if(S>y){const x=y-S;D=D+x,S=S+x}_[v++]=new mp(b,D,w,S)}s[r++]=new wD(_)}let o=s[0].entries,a=[],l=0;for(let c=1,h=s.length;c<h;c++){const u=s[c].entries,d=o[o.length-1],f=u[0];if(d.getType()===0&&f.getType()===0&&f.originalLineStart<=d.originalLineEnd){o[o.length-1]=new mp(d.originalLineStart,f.originalLineEnd,d.modifiedLineStart,f.modifiedLineEnd),o=o.concat(u.slice(1));continue}a[l++]=new wD(o),o=u}return a[l++]=new wD(o),a}_findDiffIndex(e){const t=e.lineNumber;for(let i=0,s=this._diffs.length;i<s;i++){const r=this._diffs[i].entries,o=r[r.length-1].modifiedLineEnd;if(t<=o)return i}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),i=this._diffEditor.getOriginalEditor().getModel(),s=this._diffEditor.getModifiedEditor().getModel(),r=i.getOptions(),o=s.getOptions();if(!this._isVisible||!i||!s){Yi(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});const a=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[a]===this._currentDiff)return;this._currentDiff=this._diffs[a];const l=this._diffs[a].entries;let c=document.createElement("div");c.className="diff-review-table",c.setAttribute("role","list"),c.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),Qi.applyFontInfoSlow(c,t.get(43));let h=0,u=0,d=0,f=0;for(let S=0,x=l.length;S<x;S++){const k=l[S],F=k.originalLineStart,A=k.originalLineEnd,z=k.modifiedLineStart,H=k.modifiedLineEnd;F!==0&&(h===0||F<h)&&(h=F),A!==0&&(u===0||A>u)&&(u=A),z!==0&&(d===0||z<d)&&(d=z),H!==0&&(f===0||H>f)&&(f=H)}let g=document.createElement("div");g.className="diff-review-row";let p=document.createElement("div");p.className="diff-review-cell diff-review-summary";const _=u-h+1,v=f-d+1;p.appendChild(document.createTextNode(`${a+1}/${this._diffs.length}: @@ -${h},${_} +${d},${v} @@`)),g.setAttribute("data-line",String(d));const b=S=>S===0?m("no_lines_changed","no lines changed"):S===1?m("one_line_changed","1 line changed"):m("more_lines_changed","{0} lines changed",S),w=b(_),C=b(v);g.setAttribute("aria-label",m({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",a+1,this._diffs.length,h,w,d,C)),g.appendChild(p),g.setAttribute("role","listitem"),c.appendChild(g);const y=t.get(58);let D=d;for(let S=0,x=l.length;S<x;S++){const k=l[S];Qc._renderSection(c,k,D,y,this._width,e,i,r,t,s,o,this._modeService.languageIdCodec),k.modifiedLineStart!==0&&(D=k.modifiedLineEnd)}Yi(this._content.domNode),this._content.domNode.appendChild(c),this.scrollbar.scanDomNode()}static _renderSection(e,t,i,s,r,o,a,l,c,h,u,d){const f=t.getType();let g="diff-review-row",p="";const _="diff-review-spacer";let v=null;switch(f){case 1:g="diff-review-row line-insert",p=" char-insert",v=v0e;break;case 2:g="diff-review-row line-delete",p=" char-delete",v=w0e;break}const b=t.originalLineStart,w=t.originalLineEnd,C=t.modifiedLineStart,y=t.modifiedLineEnd,D=Math.max(y-C,w-b),S=o.get(129),x=S.glyphMarginWidth+S.lineNumbersWidth,k=c.get(129),F=10+k.glyphMarginWidth+k.lineNumbersWidth;for(let A=0;A<=D;A++){const z=b===0?0:b+A,H=C===0?0:C+A,te=document.createElement("div");te.style.minWidth=r+"px",te.className=g,te.setAttribute("role","listitem"),H!==0&&(i=H),te.setAttribute("data-line",String(i));let ie=document.createElement("div");ie.className="diff-review-cell",ie.style.height=`${s}px`,te.appendChild(ie);const ae=document.createElement("span");ae.style.width=x+"px",ae.style.minWidth=x+"px",ae.className="diff-review-line-number"+p,z!==0?ae.appendChild(document.createTextNode(String(z))):ae.innerText="\xA0",ie.appendChild(ae);const _e=document.createElement("span");_e.style.width=F+"px",_e.style.minWidth=F+"px",_e.style.paddingRight="10px",_e.className="diff-review-line-number"+p,H!==0?_e.appendChild(document.createTextNode(String(H))):_e.innerText="\xA0",ie.appendChild(_e);const me=document.createElement("span");if(me.className=_,v){const ct=document.createElement("span");ct.className=Rt.asClassName(v),ct.innerText="\xA0\xA0",me.appendChild(ct)}else me.innerText="\xA0\xA0";ie.appendChild(me);let fe;if(H!==0){let ct=this._renderLine(h,c,u.tabSize,H,d);Qc._ttPolicy&&(ct=Qc._ttPolicy.createHTML(ct)),ie.insertAdjacentHTML("beforeend",ct),fe=h.getLineContent(H)}else{let ct=this._renderLine(a,o,l.tabSize,z,d);Qc._ttPolicy&&(ct=Qc._ttPolicy.createHTML(ct)),ie.insertAdjacentHTML("beforeend",ct),fe=a.getLineContent(z)}fe.length===0&&(fe=m("blankLine","blank"));let Dt="";switch(f){case 0:z===H?Dt=m({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",fe,z):Dt=m("equalLine","{0} original line {1} modified line {2}",fe,z,H);break;case 1:Dt=m("insertLine","+ {0} modified line {1}",fe,H);break;case 2:Dt=m("deleteLine","- {0} original line {1}",fe,z);break}te.setAttribute("aria-label",Dt),e.appendChild(te)}}static _renderLine(e,t,i,s,r){const o=e.getLineContent(s),a=t.get(43),l=Oi.createEmpty(o,r),c=Ss.isBasicASCII(o,e.mightContainNonBasicASCII()),h=Ss.containsRTL(o,c,e.mightContainRTL());return C1(new Ou(a.isMonospace&&!t.get(29),a.canUseHalfwidthRightwardsArrow,o,!1,c,h,0,l,[],i,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(104),t.get(87),t.get(82),t.get(44)!==gs.OFF,null)).html}};HC._ttPolicy=(vD=window.trustedTypes)===null||vD===void 0?void 0:vD.createPolicy("diffReview",{createHTML:n=>n});HC=m0e([_0e(1,Hn)],HC);kt((n,e)=>{const t=n.getColor(XW);t&&e.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${t}; }`);const i=n.getColor(W0);i&&e.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${i} 0 -6px 6px -6px inset; }`)});class y0e extends zt{constructor(){super({id:"editor.action.diffReview.next",label:m("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:le.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){const i=Dz(e);i&&i.diffReviewNext()}}class S0e extends zt{constructor(){super({id:"editor.action.diffReview.prev",label:m("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:le.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,t){const i=Dz(e);i&&i.diffReviewPrev()}}function Dz(n){const e=n.get(Tt),t=e.listDiffEditors(),i=e.getActiveCodeEditor();if(!i)return null;for(let s=0,r=t.length;s<r;s++){const o=t[s];if(o.getModifiedEditor().getId()===i.getId()||o.getOriginalEditor().getId()===i.getId())return o}return null}ze(y0e);ze(S0e);const Wu=Xe("contextViewService"),zu=Xe("contextMenuService");var CD=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class x0e extends q{constructor(e,t,i,s,r,o){super(),this._viewZoneId=e,this._marginDomNode=t,this.editor=i,this.diff=s,this._contextMenuService=r,this._clipboardService=o,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=se.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const a=i.getOption(58),l=i.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${a}px`,this._diffActions.style.lineHeight=`${a}px`,this._marginDomNode.appendChild(this._diffActions);const c=[],h=s.modifiedEndLineNumber===0;c.push(new Cr("diff.clipboard.copyDeletedContent",h?s.originalEndLineNumber>s.modifiedStartLineNumber?m("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):m("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):s.originalEndLineNumber>s.modifiedStartLineNumber?m("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):m("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>CD(this,void 0,void 0,function*(){const p=new I(s.originalStartLineNumber,1,s.originalEndLineNumber+1,1),_=s.originalModel.getValueInRange(p);yield this._clipboardService.writeText(_)})));let u=0,d;s.originalEndLineNumber>s.modifiedStartLineNumber&&(d=new Cr("diff.clipboard.copyDeletedLineContent",h?m("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",s.originalStartLineNumber):m("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",s.originalStartLineNumber),void 0,!0,()=>CD(this,void 0,void 0,function*(){const p=s.originalModel.getLineContent(s.originalStartLineNumber+u);if(p===""){const _=s.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(_===0?`
`:`\r
`)}else yield this._clipboardService.writeText(p)})),c.push(d)),i.getOption(80)||c.push(new Cr("diff.inline.revertChange",m("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>CD(this,void 0,void 0,function*(){const p=new I(s.originalStartLineNumber,1,s.originalEndLineNumber,s.originalModel.getLineMaxColumn(s.originalEndLineNumber)),_=s.originalModel.getValueInRange(p);if(s.modifiedEndLineNumber===0){const v=i.getModel().getLineMaxColumn(s.modifiedStartLineNumber);i.executeEdits("diffEditor",[{range:new I(s.modifiedStartLineNumber,v,s.modifiedStartLineNumber,v),text:l+_}])}else{const v=i.getModel().getLineMaxColumn(s.modifiedEndLineNumber);i.executeEdits("diffEditor",[{range:new I(s.modifiedStartLineNumber,1,s.modifiedEndLineNumber,v),text:_}])}})));const g=(p,_)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:p,y:_}),getActions:()=>(d&&(d.label=h?m("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",s.originalStartLineNumber+u):m("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",s.originalStartLineNumber+u)),c),autoSelectFirstItem:!0})};this._register(mi(this._diffActions,"mousedown",p=>{const{top:_,height:v}=Gi(this._diffActions);let b=Math.floor(a/3);p.preventDefault(),g(p.posx,_+v+b)})),this._register(i.onMouseMove(p=>{p.target.type===8||p.target.type===5?p.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,u=this._updateLightBulbPosition(this._marginDomNode,p.event.browserEvent.y,a)):this.visibility=!1:this.visibility=!1})),this._register(i.onMouseDown(p=>{!p.event.rightButton||(p.target.type===8||p.target.type===5)&&p.target.detail.viewZoneId===this._viewZoneId&&(p.event.preventDefault(),u=this._updateLightBulbPosition(this._marginDomNode,p.event.browserEvent.y,a),g(p.event.posx,p.event.posy+a))}))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}_updateLightBulbPosition(e,t,i){const{top:s}=Gi(e),r=t-s,o=Math.floor(r/i),a=o*i;if(this._diffActions.style.top=`${a}px`,this.diff.viewLineCounts){let l=0;for(let c=0;c<this.diff.viewLineCounts.length;c++)if(l+=this.diff.viewLineCounts[c],o<l)return c}return o}}const Hu=Xe("clipboardService");class G1{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}}G1.None=Object.freeze({report(){}});const Bg=Xe("editorProgressService");var D0e=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Sa=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},yD;class W4{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(t=>!this._zonesMap[String(t.id)])}clean(e){this._zones.length>0&&e.changeViewZones(t=>{for(const i of this._zones)t.removeZone(i)}),this._zones=[],this._zonesMap={},this._decorations=e.deltaDecorations(this._decorations,[])}apply(e,t,i,s){const r=s?Jf.capture(e):null;e.changeViewZones(o=>{var a;for(const l of this._zones)o.removeZone(l);for(const l of this._inlineDiffMargins)l.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let l=0,c=i.zones.length;l<c;l++){const h=i.zones[l];h.suppressMouseDown=!0;const u=o.addZone(h);this._zones.push(u),this._zonesMap[String(u)]=!0,i.zones[l].diff&&h.marginDomNode&&(h.suppressMouseDown=!1,((a=i.zones[l].diff)===null||a===void 0?void 0:a.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new x0e(u,h.marginDomNode,e,i.zones[l].diff,this._contextMenuService,this._clipboardService)))}}),r&&r.restore(e),this._decorations=e.deltaDecorations(this._decorations,i.decorations),t&&t.setZones(i.overviewZones)}}let L0e=0;const k0e=un("diff-insert",se.add,m("diffInsertIcon","Line decoration for inserts in the diff editor.")),Lz=un("diff-remove",se.remove,m("diffRemoveIcon","Line decoration for removals in the diff editor.")),z4=(yD=window.trustedTypes)===null||yD===void 0?void 0:yD.createPolicy("diffEditorWidget",{createHTML:n=>n});let _c=class Ui extends q{constructor(e,t,i,s,r,o,a,l,c,h,u,d){super(),this._editorProgressService=d,this._onDidDispose=this._register(new R),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new R),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new R),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=r,this._codeEditorService=l,this._contextKeyService=this._register(o.createScoped(e)),this._instantiationService=a.createChild(new I_([Le,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=c,this._notificationService=h,this._id=++L0e,this._state=0,this._updatingDiffProgress=null,this._domElement=e,t=t||{},this._options=U4(t,{enableSplitViewResizing:!0,renderSideBySide:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),typeof t.isInEmbeddedEditor!="undefined"?this._contextKeyService.createKey("isInEmbeddedDiffEditor",t.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new Wt(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=Ui._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=Ye(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(mi(this._overviewDomElement,"mousedown",g=>{this._modifiedEditor.delegateVerticalScrollbarMouseDown(g)})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new W4(u,s),this._modifiedEditorState=new W4(u,s),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new gW(this._containerDomElement,t.dimension,()=>this._onDidContainerSizeChanged())),t.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(t,i.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(t,i.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=a.createInstance(HC,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new Ha(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new $4(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(c.onDidColorThemeChange(g=>{this._strategy&&this._strategy.applyColors(g)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=Ui._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));const f=hf.getDiffEditorContributions();for(const g of f)try{this._register(a.createInstance(g.ctor,this))}catch(p){Ie(p)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let i="monaco-diff-editor monaco-editor-background ";return t&&(i+="side-by-side "),i+=vC(e.type),i}_recreateOverviewRulers(){!this._options.renderOverviewRuler||(this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,t){const i=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),t);this._register(i.onDidScrollChange(r=>{this._isHandlingScrollEvent||!r.scrollTopChanged&&!r.scrollLeftChanged&&!r.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(i.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(i.onDidChangeConfiguration(r=>{!i.getModel()||(r.hasChanged(43)&&this._updateDecorationsRunner.schedule(),r.hasChanged(130)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(i.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(i.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const s=this._contextKeyService.createKey("isInDiffLeftEditor",i.hasWidgetFocus());return this._register(i.onDidFocusEditorWidget(()=>s.set(!0))),this._register(i.onDidBlurEditorWidget(()=>s.set(!1))),this._register(i.onDidContentSizeChange(r=>{const o=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+Ui.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:o,contentHeightChanged:r.contentHeightChanged,contentWidthChanged:r.contentWidthChanged})})),i}_createRightHandSideEditor(e,t){const i=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),t);this._register(i.onDidScrollChange(r=>{this._isHandlingScrollEvent||!r.scrollTopChanged&&!r.scrollLeftChanged&&!r.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(i.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(i.onDidChangeConfiguration(r=>{!i.getModel()||(r.hasChanged(43)&&this._updateDecorationsRunner.schedule(),r.hasChanged(130)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(i.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(i.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(i.onDidChangeModelOptions(r=>{r.tabSize&&this._updateDecorationsRunner.schedule()}));const s=this._contextKeyService.createKey("isInDiffRightEditor",i.hasWidgetFocus());return this._register(i.onDidFocusEditorWidget(()=>s.set(!0))),this._register(i.onDidBlurEditorWidget(()=>s.set(!1))),this._register(i.onDidContentSizeChange(r=>{const o=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+Ui.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:o,contentHeightChanged:r.contentHeightChanged,contentWidthChanged:r.contentWidthChanged})})),i}_createInnerEditor(e,t,i,s){return e.createInstance(T_,t,i,s)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return d1.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){const t=U4(e,this._options),i=N0e(this._options,t);this._options=t;const s=i.ignoreTrimWhitespace||i.renderIndicators,r=this._isVisible&&(i.maxComputationTime||i.maxFileSize);s?this._beginUpdateDecorations():r&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),i.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new Ha(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new $4(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=Ui._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),i.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._recreateOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e){this._modifiedEditor.setPosition(e)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e){this._modifiedEditor.setSelection(e)}setSelections(e){this._modifiedEditor.setSelections(e)}revealLines(e,t,i=0){this._modifiedEditor.revealLines(e,t,i)}revealLinesInCenter(e,t,i=0){this._modifiedEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t,i=0){this._modifiedEditor.revealLinesNearTop(e,t,i)}revealRange(e,t=0,i=!1,s=!0){this._modifiedEditor.revealRange(e,t,i,s)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){const e=this._originalEditor.saveViewState(),t=this._modifiedEditor.saveViewState();return{original:e,modified:t}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,i){this._modifiedEditor.trigger(e,t,i)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const e=this._elementSizeObserver.getHeight(),t=this._getReviewHeight(),i=Ui.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Ui.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:Ui.ONE_OVERVIEW_WIDTH,right:i+Ui.ONE_OVERVIEW_WIDTH,height:e-t}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:Ui.ONE_OVERVIEW_WIDTH,height:e-t}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),Ui.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t?!0:!e||!t?!1:e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const e=this._originalEditor.getModel(),t=this._modifiedEditor.getModel();if(!e||!t)return;this._diffComputationToken++;const i=this._diffComputationToken,s=this._options.maxFileSize*1024*1024,r=o=>{const a=o.getValueLength();return s===0||a<=s};if(!r(e)||!r(t)){(!Ui._equals(e.uri,this._lastOriginalWarning)||!Ui._equals(t.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=t.uri,this._notificationService.warn(m("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._setState(1),this._editorWorkerService.computeDiff(e.uri,t.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then(o=>{i===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=o,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},o=>{i===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),i=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),s=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,t,i);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,s.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,s.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){const t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?t.wordWrapOverride1=this._options.diffWordWrap:t.wordWrapOverride1="off",e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.readOnly=!this._options.originalEditable,t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(e){const t=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(t.ariaLabel=e.modifiedAriaLabel),t.wordWrapOverride1=this._options.diffWordWrap,t.revealHorizontalRightPadding=Au.revealHorizontalRightPadding.defaultValue+Ui.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const e=this._elementSizeObserver.getWidth(),t=this._elementSizeObserver.getHeight(),i=this._getReviewHeight(),s=this._strategy.layout();this._originalDomNode.style.width=s+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-s+"px",this._modifiedDomNode.style.left=s+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=t-i+"px",this._overviewDomElement.style.width=Ui.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-Ui.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(Ui.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:s,height:t-i}),this._modifiedEditor.layout({width:e-s-(this._options.renderOverviewRuler?Ui.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:t-i}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(t-i,e,i),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const t=this._modifiedEditor.getScrollTop(),i=this._modifiedEditor.getScrollHeight(),s=Math.max(0,e.height),r=Math.max(0,s-2*0),o=i>0?r/i:0,a=Math.max(0,Math.floor(e.height*o)),l=Math.floor(t*o);return{height:a,top:l}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){const i=this._diffComputationResult?this._diffComputationResult.changes:[];if(i.length===0||e<t(i[0]))return null;let s=0,r=i.length-1;for(;s<r;){const o=Math.floor((s+r)/2),a=t(i[o]),l=o+1<=r?t(i[o+1]):1073741824;e<a?r=o-1:e>=l?s=o+1:(s=o,r=o)}return i[s]}_getEquivalentLineForOriginalLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.originalStartLineNumber);if(!t)return e;const i=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),s=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),r=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,o=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-i;return a<=r?s+Math.min(a,o):s+o-r+a}_getEquivalentLineForModifiedLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.modifiedStartLineNumber);if(!t)return e;const i=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),s=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),r=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,o=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-s;return a<=o?i+Math.min(a,r):i+r-o+a}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};_c.ONE_OVERVIEW_WIDTH=15;_c.ENTIRE_DIFF_OVERVIEW_WIDTH=30;_c.UPDATE_DIFF_DECORATIONS_DELAY=200;_c=D0e([Sa(3,Hu),Sa(4,Oc),Sa(5,Le),Sa(6,pt),Sa(7,Tt),Sa(8,At),Sa(9,en),Sa(10,zu),Sa(11,Bg)],_c);class kz extends q{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const t=(e.getColor($W)||sI).transparent(2),i=(e.getColor(UW)||rI).transparent(2),s=!t.equals(this._insertColor)||!i.equals(this._removeColor);return this._insertColor=t,this._removeColor=i,s}getEditorsDiffDecorations(e,t,i,s,r){r=r.sort((c,h)=>c.afterLineNumber-h.afterLineNumber),s=s.sort((c,h)=>c.afterLineNumber-h.afterLineNumber);const o=this._getViewZones(e,s,r,i),a=this._getOriginalEditorDecorations(e,t,i),l=this._getModifiedEditorDecorations(e,t,i);return{original:{decorations:a.decorations,overviewZones:a.overviewZones,zones:o.original},modified:{decorations:l.decorations,overviewZones:l.overviewZones,zones:o.modified}}}}class H4{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class yh{constructor(e,t,i,s,r){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=i,this._originalEditor=s,this._modifiedEditor=r}static _getViewLineCount(e,t,i){const s=e.getModel(),r=e._getViewModel();if(s&&r){const o=N_(s,r,t,i);return o.endLineNumber-o.startLineNumber+1}return i-t+1}getViewZones(){const e=this._originalEditor.getOption(58),t=this._modifiedEditor.getOption(58),i=this._originalEditor.getOption(130).wrappingColumn!==-1,s=this._modifiedEditor.getOption(130).wrappingColumn!==-1,r=i||s,o=this._originalEditor.getModel(),a=this._originalEditor._getViewModel().coordinatesConverter,l=this._modifiedEditor._getViewModel().coordinatesConverter,c={original:[],modified:[]};let h=0,u=0,d=0,f=0,g=0,p=0;const _=(D,S)=>D.afterLineNumber-S.afterLineNumber,v=(D,S)=>{if(S.domNode===null&&D.length>0){const x=D[D.length-1];if(x.afterLineNumber===S.afterLineNumber&&x.domNode===null){x.heightInLines+=S.heightInLines;return}}D.push(S)},b=new H4(this._modifiedForeignVZ),w=new H4(this._originalForeignVZ);let C=1,y=1;for(let D=0,S=this._lineChanges.length;D<=S;D++){const x=D<S?this._lineChanges[D]:null;x!==null?(d=x.originalStartLineNumber+(x.originalEndLineNumber>0?-1:0),f=x.modifiedStartLineNumber+(x.modifiedEndLineNumber>0?-1:0),u=x.originalEndLineNumber>0?yh._getViewLineCount(this._originalEditor,x.originalStartLineNumber,x.originalEndLineNumber):0,h=x.modifiedEndLineNumber>0?yh._getViewLineCount(this._modifiedEditor,x.modifiedStartLineNumber,x.modifiedEndLineNumber):0,g=Math.max(x.originalStartLineNumber,x.originalEndLineNumber),p=Math.max(x.modifiedStartLineNumber,x.modifiedEndLineNumber)):(d+=1e7+u,f+=1e7+h,g=d,p=f);let k=[],F=[];if(r){let H;x?x.originalEndLineNumber>0?H=x.originalStartLineNumber-C:H=x.modifiedStartLineNumber-y:H=o.getLineCount()-C;for(let te=0;te<H;te++){const ie=C+te,ae=y+te,_e=a.getModelLineViewLineCount(ie),me=l.getModelLineViewLineCount(ae);_e<me?k.push({afterLineNumber:ie,heightInLines:me-_e,domNode:null,marginDomNode:null}):_e>me&&F.push({afterLineNumber:ae,heightInLines:_e-me,domNode:null,marginDomNode:null})}x&&(C=(x.originalEndLineNumber>0?x.originalEndLineNumber:x.originalStartLineNumber)+1,y=(x.modifiedEndLineNumber>0?x.modifiedEndLineNumber:x.modifiedStartLineNumber)+1)}for(;b.current&&b.current.afterLineNumber<=p;){let H;b.current.afterLineNumber<=f?H=d-f+b.current.afterLineNumber:H=g;let te=null;x&&x.modifiedStartLineNumber<=b.current.afterLineNumber&&b.current.afterLineNumber<=x.modifiedEndLineNumber&&(te=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),k.push({afterLineNumber:H,heightInLines:b.current.height/t,domNode:null,marginDomNode:te}),b.advance()}for(;w.current&&w.current.afterLineNumber<=g;){let H;w.current.afterLineNumber<=d?H=f-d+w.current.afterLineNumber:H=p,F.push({afterLineNumber:H,heightInLines:w.current.height/e,domNode:null}),w.advance()}if(x!==null&&_f(x)){const H=this._produceOriginalFromDiff(x,u,h);H&&k.push(H)}if(x!==null&&bf(x)){const H=this._produceModifiedFromDiff(x,u,h);H&&F.push(H)}let A=0,z=0;for(k=k.sort(_),F=F.sort(_);A<k.length&&z<F.length;){const H=k[A],te=F[z],ie=H.afterLineNumber-d,ae=te.afterLineNumber-f;ie<ae?(v(c.original,H),A++):ae<ie?(v(c.modified,te),z++):H.shouldNotShrink?(v(c.original,H),A++):te.shouldNotShrink?(v(c.modified,te),z++):H.heightInLines>=te.heightInLines?(H.heightInLines-=te.heightInLines,z++):(te.heightInLines-=H.heightInLines,A++)}for(;A<k.length;)v(c.original,k[A]),A++;for(;z<F.length;)v(c.modified,F[z]),z++}return{original:yh._ensureDomNodes(c.original),modified:yh._ensureDomNodes(c.modified)}}static _ensureDomNodes(e){return e.map(t=>(t.domNode||(t.domNode=Ez()),t))}}function Ba(n,e,t,i,s){return{range:new I(n,e,t,i),options:s}}const In={charDelete:$e.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:$e.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:$e.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:$e.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:$e.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"line-insert",isWholeLine:!0}),lineInsertWithSign:$e.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+Rt.asClassName(k0e),marginClassName:"line-insert",isWholeLine:!0}),lineDelete:$e.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"line-delete",isWholeLine:!0}),lineDeleteWithSign:$e.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+Rt.asClassName(Lz),marginClassName:"line-delete",isWholeLine:!0}),lineDeleteMargin:$e.register({description:"diff-editor-line-delete-margin",marginClassName:"line-delete"})};class Ha extends kz{constructor(e,t){super(e),this._disableSash=t===!1,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new Ki(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(i=>this._onSashDrag(i)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){const t=e===!1;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const i=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?_c.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let s=Math.floor((e||.5)*i);const r=Math.floor(.5*i);return s=this._disableSash?r:s||r,i>Ha.MINIMUM_EDITOR_WIDTH*2?(s<Ha.MINIMUM_EDITOR_WIDTH&&(s=Ha.MINIMUM_EDITOR_WIDTH),s>i-Ha.MINIMUM_EDITOR_WIDTH&&(s=i-Ha.MINIMUM_EDITOR_WIDTH)):s=r,this._sashPosition!==s&&(this._sashPosition=s,this._sash.layout()),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const i=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?_c.ENTIRE_DIFF_OVERVIEW_WIDTH:0),s=this.layout((this._startSashPosition+(e.currentX-e.startX))/i);this._sashRatio=s/i,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,t,i){const s=this._dataSource.getOriginalEditor(),r=this._dataSource.getModifiedEditor();return new E0e(e,t,i,s,r).getViewZones()}_getOriginalEditorDecorations(e,t,i){const s=this._dataSource.getOriginalEditor(),r=String(this._removeColor),o={decorations:[],overviewZones:[]},a=s.getModel(),l=s._getViewModel();for(const c of e)if(bf(c)){o.decorations.push({range:new I(c.originalStartLineNumber,1,c.originalEndLineNumber,1073741824),options:i?In.lineDeleteWithSign:In.lineDelete}),(!_f(c)||!c.charChanges)&&o.decorations.push(Ba(c.originalStartLineNumber,1,c.originalEndLineNumber,1073741824,In.charDeleteWholeLine));const h=N_(a,l,c.originalStartLineNumber,c.originalEndLineNumber);if(o.overviewZones.push(new L_(h.startLineNumber,h.endLineNumber,r)),c.charChanges){for(const u of c.charChanges)if(bf(u))if(t)for(let d=u.originalStartLineNumber;d<=u.originalEndLineNumber;d++){let f,g;d===u.originalStartLineNumber?f=u.originalStartColumn:f=a.getLineFirstNonWhitespaceColumn(d),d===u.originalEndLineNumber?g=u.originalEndColumn:g=a.getLineLastNonWhitespaceColumn(d),o.decorations.push(Ba(d,f,d,g,In.charDelete))}else o.decorations.push(Ba(u.originalStartLineNumber,u.originalStartColumn,u.originalEndLineNumber,u.originalEndColumn,In.charDelete))}}return o}_getModifiedEditorDecorations(e,t,i){const s=this._dataSource.getModifiedEditor(),r=String(this._insertColor),o={decorations:[],overviewZones:[]},a=s.getModel(),l=s._getViewModel();for(const c of e)if(_f(c)){o.decorations.push({range:new I(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,1073741824),options:i?In.lineInsertWithSign:In.lineInsert}),(!bf(c)||!c.charChanges)&&o.decorations.push(Ba(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,1073741824,In.charInsertWholeLine));const h=N_(a,l,c.modifiedStartLineNumber,c.modifiedEndLineNumber);if(o.overviewZones.push(new L_(h.startLineNumber,h.endLineNumber,r)),c.charChanges){for(const u of c.charChanges)if(_f(u))if(t)for(let d=u.modifiedStartLineNumber;d<=u.modifiedEndLineNumber;d++){let f,g;d===u.modifiedStartLineNumber?f=u.modifiedStartColumn:f=a.getLineFirstNonWhitespaceColumn(d),d===u.modifiedEndLineNumber?g=u.modifiedEndColumn:g=a.getLineLastNonWhitespaceColumn(d),o.decorations.push(Ba(d,f,d,g,In.charInsert))}else o.decorations.push(Ba(u.modifiedStartLineNumber,u.modifiedStartColumn,u.modifiedEndLineNumber,u.modifiedEndColumn,In.charInsert))}}return o}}Ha.MINIMUM_EDITOR_WIDTH=100;class E0e extends yh{constructor(e,t,i,s,r){super(e,t,i,s,r)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,i){return i>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:i-t,domNode:null}:null}_produceModifiedFromDiff(e,t,i){return t>i?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-i,domNode:null}:null}}class $4 extends kz{constructor(e,t){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(i=>{this._decorationsLeft!==i.decorationsLeft&&(this._decorationsLeft=i.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,i,s){const r=this._dataSource.getOriginalEditor(),o=this._dataSource.getModifiedEditor();return new I0e(e,t,i,r,o,s).getViewZones()}_getOriginalEditorDecorations(e,t,i){const s=String(this._removeColor),r={decorations:[],overviewZones:[]},o=this._dataSource.getOriginalEditor(),a=o.getModel(),l=o._getViewModel();for(const c of e)if(bf(c)){r.decorations.push({range:new I(c.originalStartLineNumber,1,c.originalEndLineNumber,1073741824),options:In.lineDeleteMargin});const h=N_(a,l,c.originalStartLineNumber,c.originalEndLineNumber);r.overviewZones.push(new L_(h.startLineNumber,h.endLineNumber,s))}return r}_getModifiedEditorDecorations(e,t,i){const s=this._dataSource.getModifiedEditor(),r=String(this._insertColor),o={decorations:[],overviewZones:[]},a=s.getModel(),l=s._getViewModel();for(const c of e)if(_f(c)){o.decorations.push({range:new I(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,1073741824),options:i?In.lineInsertWithSign:In.lineInsert});const h=N_(a,l,c.modifiedStartLineNumber,c.modifiedEndLineNumber);if(o.overviewZones.push(new L_(h.startLineNumber,h.endLineNumber,r)),c.charChanges){for(const u of c.charChanges)if(_f(u))if(t)for(let d=u.modifiedStartLineNumber;d<=u.modifiedEndLineNumber;d++){let f,g;d===u.modifiedStartLineNumber?f=u.modifiedStartColumn:f=a.getLineFirstNonWhitespaceColumn(d),d===u.modifiedEndLineNumber?g=u.modifiedEndColumn:g=a.getLineLastNonWhitespaceColumn(d),o.decorations.push(Ba(d,f,d,g,In.charInsert))}else o.decorations.push(Ba(u.modifiedStartLineNumber,u.modifiedStartColumn,u.modifiedEndLineNumber,u.modifiedEndColumn,In.charInsert))}else o.decorations.push(Ba(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,1073741824,In.charInsertWholeLine))}return o}layout(){return Math.max(5,this._decorationsLeft)}}class I0e extends yh{constructor(e,t,i,s,r,o){super(e,t,i,s,r),this._originalModel=s.getModel(),this._renderIndicators=o,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,i){const s=document.createElement("div");return s.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:i,domNode:document.createElement("div"),marginDomNode:s}}_produceModifiedFromDiff(e,t,i){const s=document.createElement("div");s.className=`view-lines line-delete ${$h}`;const r=document.createElement("div");r.className="inline-deleted-margin-view-zone";const o={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:s,marginDomNode:r,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(o),o}_finalize(e){const t=this._modifiedEditor.getOptions(),i=this._modifiedEditor.getModel().getOptions().tabSize,s=t.get(43),r=t.get(29),o=s.typicalHalfwidthCharacterWidth,a=t.get(92),l=this._originalModel.mightContainNonBasicASCII(),c=this._originalModel.mightContainRTL(),h=t.get(58),d=t.get(129).decorationsWidth,f=t.get(104),g=t.get(87),p=t.get(82),_=t.get(44),v=this._lineBreaksComputer.finalize();let b=0;for(let w=0;w<this._pendingLineChange.length;w++){const C=this._pendingLineChange[w],y=this._pendingViewZones[w],D=y.domNode;Qi.applyFontInfoSlow(D,s);const S=y.marginDomNode;Qi.applyFontInfoSlow(S,s);const x=[];if(C.charChanges)for(const ae of C.charChanges)bf(ae)&&x.push(new nm(new I(ae.originalStartLineNumber,ae.originalStartColumn,ae.originalEndLineNumber,ae.originalEndColumn),"char-delete",0));const k=x.length>0,F=lu(1e4);let A=0,z=0,H=null;for(let ae=C.originalStartLineNumber;ae<=C.originalEndLineNumber;ae++){const _e=ae-C.originalStartLineNumber,me=this._originalModel.getLineTokens(ae),fe=me.getLineContent(),Dt=v[b++],ct=vs.filter(x,ae,1,fe.length+1);if(Dt){let mt=0;for(const tt of Dt.breakOffsets){const dn=me.sliceAndInflate(mt,tt,0),Qs=fe.substring(mt,tt);A=Math.max(A,this._renderOriginalLine(z++,Qs,dn,vs.extractWrapped(ct,mt,tt),k,l,c,s,r,h,d,f,g,p,_,i,F,S)),mt=tt}for(H||(H=[]);H.length<_e;)H[H.length]=1;H[_e]=Dt.breakOffsets.length,y.heightInLines+=Dt.breakOffsets.length-1;const Et=document.createElement("div");Et.className="line-delete",e.original.push({afterLineNumber:ae,afterColumn:0,heightInLines:Dt.breakOffsets.length-1,domNode:Ez(),marginDomNode:Et})}else A=Math.max(A,this._renderOriginalLine(z++,fe,me,ct,k,l,c,s,r,h,d,f,g,p,_,i,F,S))}A+=a;const te=F.build(),ie=z4?z4.createHTML(te):te;if(D.innerHTML=ie,y.minWidthInPx=A*o,H){const ae=C.originalEndLineNumber-C.originalStartLineNumber;for(;H.length<=ae;)H[H.length]=1}y.diff.viewLineCounts=H}e.original.sort((w,C)=>w.afterLineNumber-C.afterLineNumber)}_renderOriginalLine(e,t,i,s,r,o,a,l,c,h,u,d,f,g,p,_,v,b){v.appendASCIIString('<div class="view-line'),r||v.appendASCIIString(" char-delete"),v.appendASCIIString('" style="top:'),v.appendASCIIString(String(e*h)),v.appendASCIIString('px;width:1000000px;">');const w=Ss.isBasicASCII(t,o),C=Ss.containsRTL(t,w,a),y=w1(new Ou(l.isMonospace&&!c,l.canUseHalfwidthRightwardsArrow,t,!1,w,C,0,i,s,_,0,l.spaceWidth,l.middotWidth,l.wsmiddotWidth,d,f,g,p!==gs.OFF,null),v);if(v.appendASCIIString("</div>"),this._renderIndicators){const D=document.createElement("div");D.className=`delete-sign ${Rt.asClassName(Lz)}`,D.setAttribute("style",`position:absolute;top:${e*h}px;width:${u}px;height:${h}px;right:0;`),b.appendChild(D)}return y.characterMapping.getAbsoluteOffset(y.characterMapping.length)}}function T0e(n,e){return Tn(n,e,["off","on","inherit"])}function _f(n){return n.modifiedEndLineNumber>0}function bf(n){return n.originalEndLineNumber>0}function Ez(){const n=document.createElement("div");return n.className="diagonal-fill",n}function N_(n,e,t,i){const s=n.getLineCount();return t=Math.min(s,Math.max(1,t)),i=Math.min(s,Math.max(1,i)),e.coordinatesConverter.convertModelRangeToViewRange(new I(t,n.getLineMinColumn(t),i,n.getLineMaxColumn(i)))}function U4(n,e){return{enableSplitViewResizing:pe(n.enableSplitViewResizing,e.enableSplitViewResizing),renderSideBySide:pe(n.renderSideBySide,e.renderSideBySide),maxComputationTime:wk(n.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:wk(n.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:pe(n.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:pe(n.renderIndicators,e.renderIndicators),originalEditable:pe(n.originalEditable,e.originalEditable),diffCodeLens:pe(n.diffCodeLens,e.diffCodeLens),renderOverviewRuler:pe(n.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:T0e(n.diffWordWrap,e.diffWordWrap)}}function N0e(n,e){return{enableSplitViewResizing:n.enableSplitViewResizing!==e.enableSplitViewResizing,renderSideBySide:n.renderSideBySide!==e.renderSideBySide,maxComputationTime:n.maxComputationTime!==e.maxComputationTime,maxFileSize:n.maxFileSize!==e.maxFileSize,ignoreTrimWhitespace:n.ignoreTrimWhitespace!==e.ignoreTrimWhitespace,renderIndicators:n.renderIndicators!==e.renderIndicators,originalEditable:n.originalEditable!==e.originalEditable,diffCodeLens:n.diffCodeLens!==e.diffCodeLens,renderOverviewRuler:n.renderOverviewRuler!==e.renderOverviewRuler,diffWordWrap:n.diffWordWrap!==e.diffWordWrap}}kt((n,e)=>{const t=n.getColor($W);t&&(e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${t}; }`));const i=n.getColor(UW);i&&(e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { background-color: ${i}; }`),e.addRule(`.monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: ${i}; }`),e.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${i}; }`));const s=n.getColor(Yfe);s&&e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${n.type==="hc"?"dashed":"solid"} ${s}; }`);const r=n.getColor(Zfe);r&&e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${n.type==="hc"?"dashed":"solid"} ${r}; }`);const o=n.getColor(W0);o&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${o}; }`);const a=n.getColor(Xfe);a&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${a}; }`);const l=n.getColor(fm);l&&e.addRule(`
			.monaco-diff-editor .diffViewport {
				background: ${l};
			}
		`);const c=n.getColor(gm);c&&e.addRule(`
			.monaco-diff-editor .diffViewport:hover {
				background: ${c};
			}
		`);const h=n.getColor(pm);h&&e.addRule(`
			.monaco-diff-editor .diffViewport:active {
				background: ${h};
			}
		`);const u=n.getColor(Qfe);e.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${u} 12.5%,
			#0000 12.5%, #0000 50%,
			${u} 50%, ${u} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});const H0=Xe("themeService"),ri=Xe("keybindingService");class A0e extends q{constructor(){super(),this._onCodeEditorAdd=this._register(new R),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new R),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new R),this._onDiffEditorRemove=this._register(new R),this._onDecorationTypeRegistered=this._register(new R),this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null)}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}setModelProperty(e,t,i){const s=e.toString();let r;this._modelProperties.has(s)?r=this._modelProperties.get(s):(r=new Map,this._modelProperties.set(s,r)),r.set(t,i)}getModelProperty(e,t){const i=e.toString();if(this._modelProperties.has(i))return this._modelProperties.get(i).get(t)}}var M0e=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},R0e=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};class O0e{constructor(e,t,i){this._parent=e,this._editorId=t,this._styleSheet=i,this._refCount=0}ref(){this._refCount++}unref(){var e;this._refCount--,this._refCount===0&&((e=this._styleSheet.parentNode)===null||e===void 0||e.removeChild(this._styleSheet),this._parent._removeEditorStyleSheets(this._editorId))}insertRule(e,t){this._styleSheet.sheet.insertRule(e,t)}removeRulesContainingSelector(e){jw(e,this._styleSheet)}}class F0e{constructor(e){this._styleSheet=e}ref(){}unref(){}insertRule(e,t){this._styleSheet.sheet.insertRule(e,t)}removeRulesContainingSelector(e){jw(e,this._styleSheet)}}let mI=class extends A0e{constructor(e,t){super(),this._decorationOptionProviders=new Map,this._editorStyleSheets=new Map,this._globalStyleSheet=e||null,this._themeService=t}_getOrCreateGlobalStyleSheet(){return this._globalStyleSheet||(this._globalStyleSheet=new F0e($s())),this._globalStyleSheet}_getOrCreateStyleSheet(e){if(!e)return this._getOrCreateGlobalStyleSheet();const t=e.getContainerDomNode();if(!OA(t))return this._getOrCreateGlobalStyleSheet();const i=e.getId();if(!this._editorStyleSheets.has(i)){const s=new O0e(this,i,$s(t));this._editorStyleSheets.set(i,s)}return this._editorStyleSheets.get(i)}_removeEditorStyleSheets(e){this._editorStyleSheets.delete(e)}registerDecorationType(e,t,i,s,r){let o=this._decorationOptionProviders.get(t);if(!o){const a=this._getOrCreateStyleSheet(r),l={styleSheet:a,key:t,parentTypeKey:s,options:i||Object.create(null)};s?o=new P0e(this._themeService,a,l):o=new B0e(e,this._themeService,a,l),this._decorationOptionProviders.set(t,o),this._onDecorationTypeRegistered.fire(t)}o.refCount++}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(i=>i.removeDecorations(e))))}resolveDecorationOptions(e,t){const i=this._decorationOptionProviders.get(e);if(!i)throw new Error("Unknown decoration type key: "+e);return i.getOptions(this,t)}};mI=M0e([R0e(1,At)],mI);class P0e{constructor(e,t,i){this._styleSheet=t,this._styleSheet.ref(),this._parentTypeKey=i.parentTypeKey,this.refCount=0,this._beforeContentRules=new $C(3,i,e),this._afterContentRules=new $C(4,i,e)}getOptions(e,t){const i=e.resolveDecorationOptions(this._parentTypeKey,!0);return this._beforeContentRules&&(i.beforeContentClassName=this._beforeContentRules.className),this._afterContentRules&&(i.afterContentClassName=this._afterContentRules.className),i}dispose(){this._beforeContentRules&&(this._beforeContentRules.dispose(),this._beforeContentRules=null),this._afterContentRules&&(this._afterContentRules.dispose(),this._afterContentRules=null),this._styleSheet.unref()}}class B0e{constructor(e,t,i,s){this._disposables=new ee,this.description=e,this._styleSheet=i,this._styleSheet.ref(),this.refCount=0;const r=u=>{const d=new $C(u,s,t);if(this._disposables.add(d),d.hasContent)return d.className},o=u=>{const d=new $C(u,s,t);return this._disposables.add(d),d.hasContent?{className:d.className,hasLetterSpacing:d.hasLetterSpacing}:null};this.className=r(0);const a=o(1);if(a&&(this.inlineClassName=a.className,this.inlineClassNameAffectsLetterSpacing=a.hasLetterSpacing),this.beforeContentClassName=r(3),this.afterContentClassName=r(4),s.options.beforeInjectedText&&s.options.beforeInjectedText.contentText){const u=o(5);this.beforeInjectedText={content:s.options.beforeInjectedText.contentText,inlineClassName:u==null?void 0:u.className,inlineClassNameAffectsLetterSpacing:(u==null?void 0:u.hasLetterSpacing)||s.options.beforeInjectedText.affectsLetterSpacing}}if(s.options.afterInjectedText&&s.options.afterInjectedText.contentText){const u=o(6);this.afterInjectedText={content:s.options.afterInjectedText.contentText,inlineClassName:u==null?void 0:u.className,inlineClassNameAffectsLetterSpacing:(u==null?void 0:u.hasLetterSpacing)||s.options.afterInjectedText.affectsLetterSpacing}}this.glyphMarginClassName=r(2);const l=s.options;this.isWholeLine=Boolean(l.isWholeLine),this.stickiness=l.rangeBehavior;const c=l.light&&l.light.overviewRulerColor||l.overviewRulerColor,h=l.dark&&l.dark.overviewRulerColor||l.overviewRulerColor;(typeof c!="undefined"||typeof h!="undefined")&&(this.overviewRuler={color:c||h,darkColor:h||c,position:l.overviewRulerLane||ra.Center})}getOptions(e,t){return t?{description:this.description,inlineClassName:this.inlineClassName,beforeContentClassName:this.beforeContentClassName,afterContentClassName:this.afterContentClassName,className:this.className,glyphMarginClassName:this.glyphMarginClassName,isWholeLine:this.isWholeLine,overviewRuler:this.overviewRuler,stickiness:this.stickiness,before:this.beforeInjectedText,after:this.afterInjectedText}:this}dispose(){this._disposables.dispose(),this._styleSheet.unref()}}const _p={color:"color:{0} !important;",opacity:"opacity:{0};",backgroundColor:"background-color:{0};",outline:"outline:{0};",outlineColor:"outline-color:{0};",outlineStyle:"outline-style:{0};",outlineWidth:"outline-width:{0};",border:"border:{0};",borderColor:"border-color:{0};",borderRadius:"border-radius:{0};",borderSpacing:"border-spacing:{0};",borderStyle:"border-style:{0};",borderWidth:"border-width:{0};",fontStyle:"font-style:{0};",fontWeight:"font-weight:{0};",fontSize:"font-size:{0};",fontFamily:"font-family:{0};",textDecoration:"text-decoration:{0};",cursor:"cursor:{0};",letterSpacing:"letter-spacing:{0};",gutterIconPath:"background:{0} center center no-repeat;",gutterIconSize:"background-size:{0};",contentText:"content:'{0}';",contentIconPath:"content:{0};",margin:"margin:{0};",padding:"padding:{0};",width:"width:{0};",height:"height:{0};",verticalAlign:"vertical-align:{0};"};class $C{constructor(e,t,i){this._theme=i.getColorTheme(),this._ruleType=e,this._providerArgs=t,this._usesThemeColors=!1,this._hasContent=!1,this._hasLetterSpacing=!1;let s=SD.getClassName(this._providerArgs.key,e);this._providerArgs.parentTypeKey&&(s=s+" "+SD.getClassName(this._providerArgs.parentTypeKey,e)),this._className=s,this._unThemedSelector=SD.getSelector(this._providerArgs.key,this._providerArgs.parentTypeKey,e),this._buildCSS(),this._usesThemeColors?this._themeListener=i.onDidColorThemeChange(r=>{this._theme=i.getColorTheme(),this._removeCSS(),this._buildCSS()}):this._themeListener=null}dispose(){this._hasContent&&(this._removeCSS(),this._hasContent=!1),this._themeListener&&(this._themeListener.dispose(),this._themeListener=null)}get hasContent(){return this._hasContent}get hasLetterSpacing(){return this._hasLetterSpacing}get className(){return this._className}_buildCSS(){const e=this._providerArgs.options;let t,i,s;switch(this._ruleType){case 0:t=this.getCSSTextForModelDecorationClassName(e),i=this.getCSSTextForModelDecorationClassName(e.light),s=this.getCSSTextForModelDecorationClassName(e.dark);break;case 1:t=this.getCSSTextForModelDecorationInlineClassName(e),i=this.getCSSTextForModelDecorationInlineClassName(e.light),s=this.getCSSTextForModelDecorationInlineClassName(e.dark);break;case 2:t=this.getCSSTextForModelDecorationGlyphMarginClassName(e),i=this.getCSSTextForModelDecorationGlyphMarginClassName(e.light),s=this.getCSSTextForModelDecorationGlyphMarginClassName(e.dark);break;case 3:t=this.getCSSTextForModelDecorationContentClassName(e.before),i=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.before),s=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.before);break;case 4:t=this.getCSSTextForModelDecorationContentClassName(e.after),i=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.after),s=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.after);break;case 5:t=this.getCSSTextForModelDecorationContentClassName(e.beforeInjectedText),i=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.beforeInjectedText),s=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.beforeInjectedText);break;case 6:t=this.getCSSTextForModelDecorationContentClassName(e.afterInjectedText),i=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.afterInjectedText),s=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.afterInjectedText);break;default:throw new Error("Unknown rule type: "+this._ruleType)}const r=this._providerArgs.styleSheet;let o=!1;t.length>0&&(r.insertRule(`${this._unThemedSelector} {${t}}`,0),o=!0),i.length>0&&(r.insertRule(`.vs${this._unThemedSelector} {${i}}`,0),o=!0),s.length>0&&(r.insertRule(`.vs-dark${this._unThemedSelector}, .hc-black${this._unThemedSelector} {${s}}`,0),o=!0),this._hasContent=o}_removeCSS(){this._providerArgs.styleSheet.removeRulesContainingSelector(this._unThemedSelector)}getCSSTextForModelDecorationClassName(e){if(!e)return"";const t=[];return this.collectCSSText(e,["backgroundColor"],t),this.collectCSSText(e,["outline","outlineColor","outlineStyle","outlineWidth"],t),this.collectBorderSettingsCSSText(e,t),t.join("")}getCSSTextForModelDecorationInlineClassName(e){if(!e)return"";const t=[];return this.collectCSSText(e,["fontStyle","fontWeight","textDecoration","cursor","color","opacity","letterSpacing"],t),e.letterSpacing&&(this._hasLetterSpacing=!0),t.join("")}getCSSTextForModelDecorationContentClassName(e){if(!e)return"";const t=[];if(typeof e!="undefined"){if(this.collectBorderSettingsCSSText(e,t),typeof e.contentIconPath!="undefined"&&t.push(cr(_p.contentIconPath,ol(xe.revive(e.contentIconPath)))),typeof e.contentText=="string"){const s=e.contentText.match(/^.*$/m)[0].replace(/['\\]/g,"\\$&");t.push(cr(_p.contentText,s))}this.collectCSSText(e,["verticalAlign","fontStyle","fontWeight","fontSize","fontFamily","textDecoration","color","opacity","backgroundColor","margin","padding"],t),this.collectCSSText(e,["width","height"],t)&&t.push("display:inline-block;")}return t.join("")}getCSSTextForModelDecorationGlyphMarginClassName(e){if(!e)return"";const t=[];return typeof e.gutterIconPath!="undefined"&&(t.push(cr(_p.gutterIconPath,ol(xe.revive(e.gutterIconPath)))),typeof e.gutterIconSize!="undefined"&&t.push(cr(_p.gutterIconSize,e.gutterIconSize))),t.join("")}collectBorderSettingsCSSText(e,t){return this.collectCSSText(e,["border","borderColor","borderRadius","borderSpacing","borderStyle","borderWidth"],t)?(t.push(cr("box-sizing: border-box;")),!0):!1}collectCSSText(e,t,i){const s=i.length;for(let r of t){const o=this.resolveValue(e[r]);typeof o=="string"&&i.push(cr(_p[r],o))}return i.length!==s}resolveValue(e){if(Tle(e)){this._usesThemeColors=!0;const t=this._theme.getColor(e.id);return t?t.toString():"transparent"}return e}}class SD{static getClassName(e,t){return"ced-"+e+"-"+t}static getSelector(e,t,i){let s=".monaco-editor ."+this.getClassName(e,i);return t&&(s=s+"."+this.getClassName(t,i)),i===3?s+="::before":i===4&&(s+="::after"),s}}var V0e=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},j4=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let UC=class extends mI{constructor(e,t,i){super(e,i),this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=t.createKey("editorIsOpen",!1),this._activeCodeEditor=null}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}openCodeEditor(e,t,i){return t?Promise.resolve(this.doOpenEditor(t,e)):Promise.resolve(null)}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const r=t.resource.scheme;if(r===Ve.http||r===Ve.https)return Y9(t.resource.toString()),e}return null}const s=t.options?t.options.selection:null;if(s)if(typeof s.endLineNumber=="number"&&typeof s.endColumn=="number")e.setSelection(s),e.revealRangeInCenter(s,1);else{const r={lineNumber:s.startLineNumber,column:s.startColumn};e.setPosition(r),e.revealPositionInCenter(r,1)}return e}findModel(e,t){const i=e.getModel();return i&&i.uri.toString()!==t.toString()?null:i}};UC=V0e([j4(1,Le),j4(2,At)],UC);var Z2=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},yt=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let W0e=0,q4=!1;function z0e(n){if(!n){if(q4)return;q4=!0}Mue(n||document.body)}let jC=class extends T_{constructor(e,t,i,s,r,o,a,l,c,h){const u=Object.assign({},t);u.ariaLabel=u.ariaLabel||gC.editorViewAccessibleLabel,u.ariaLabel=u.ariaLabel+";"+gC.accessibilityHelpMessage,super(e,u,{},i,s,r,o,l,c,h),a instanceof sW?this._standaloneKeybindingService=a:this._standaloneKeybindingService=null,z0e(u.ariaContainerElement)}addCommand(e,t,i){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;let s="DYNAMIC_"+ ++W0e,r=le.deserialize(i);return this._standaloneKeybindingService.addDynamicKeybinding(s,e,t,r),s}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),q.None;const t=e.id,i=e.label,s=le.and(le.equals("editorId",this.getId()),le.deserialize(e.precondition)),r=e.keybindings,o=le.and(s,le.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(f,...g)=>Promise.resolve(e.run(this,...g)),h=new ee,u=this.getId()+":"+t;if(h.add(lt.registerCommand(u,c)),a){let f={command:{id:u,title:i},when:s,group:a,order:l};h.add(Xr.appendMenuItem(De.EditorContext,f))}if(Array.isArray(r))for(const f of r)h.add(this._standaloneKeybindingService.addDynamicKeybinding(u,f,c,o));let d=new bz(u,i,i,s,c,this._contextKeyService);return this._actions[t]=d,h.add(Ze(()=>{delete this._actions[t]})),h}_triggerCommand(e,t){if(this._codeEditorService instanceof UC)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};jC=Z2([yt(2,pt),yt(3,Tt),yt(4,Fi),yt(5,Le),yt(6,ri),yt(7,At),yt(8,en),yt(9,rs)],jC);let _I=class extends jC{constructor(e,t,i,s,r,o,a,l,c,h,u,d,f,g,p){const _=Object.assign({},t);pC(d,_,!1);const v=h.registerEditorContainer(e);typeof _.theme=="string"&&h.setTheme(_.theme),typeof _.autoDetectHighContrast!="undefined"&&h.setAutoDetectHighContrast(Boolean(_.autoDetectHighContrast));let b=_.model;delete _.model,super(e,_,s,r,o,a,l,h,u,f),this._contextViewService=c,this._configurationService=d,this._standaloneThemeService=h,this._register(i),this._register(v);let w;if(typeof b=="undefined"?(w=Iz(g,p,_.value||"",_.language||fr.text,void 0),this._ownsModel=!0):(w=b,this._ownsModel=!1),this._attachModel(w),w){let C={oldModelUrl:null,newModelUrl:w.uri};this._onDidChangeModel.fire(C)}}dispose(){super.dispose()}updateOptions(e){pC(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast!="undefined"&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_attachModel(e){super._attachModel(e),this._modelData&&this._contextViewService.setContainer(this._modelData.view.domNode.domNode)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};_I=Z2([yt(3,pt),yt(4,Tt),yt(5,Fi),yt(6,Le),yt(7,ri),yt(8,Wu),yt(9,H0),yt(10,en),yt(11,si),yt(12,rs),yt(13,zn),yt(14,Hn)],_I);let bI=class extends _c{constructor(e,t,i,s,r,o,a,l,c,h,u,d,f,g,p){const _=Object.assign({},t);pC(d,_,!0);const v=h.registerEditorContainer(e);typeof _.theme=="string"&&h.setTheme(_.theme),typeof _.autoDetectHighContrast!="undefined"&&h.setAutoDetectHighContrast(Boolean(_.autoDetectHighContrast)),super(e,_,{},p,l,r,s,c,h,u,f,g),this._contextViewService=a,this._configurationService=d,this._standaloneThemeService=h,this._register(i),this._register(v),this._contextViewService.setContainer(this._containerDomElement)}dispose(){super.dispose()}updateOptions(e){pC(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast!="undefined"&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_createInnerEditor(e,t,i){return e.createInstance(jC,t,i)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,i){return this.getModifiedEditor().addCommand(e,t,i)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};bI=Z2([yt(3,pt),yt(4,Le),yt(5,ri),yt(6,Wu),yt(7,Oc),yt(8,Tt),yt(9,H0),yt(10,en),yt(11,si),yt(12,zu),yt(13,Bg),yt(14,Hu)],bI);function Iz(n,e,t,i,s){if(t=t||"",!i){const r=t.indexOf(`
`);let o=t;return r!==-1&&(o=t.substring(0,r)),K4(n,t,e.createByFilepathOrFirstLine(s||null,o),s)}return K4(n,t,e.create(i),s)}function K4(n,e,t,i){return n.createModel(e,t,i)}const jc=Object.prototype.hasOwnProperty;class H0e{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(dc,0),this._register(Fg,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||dc}}class A_ extends q{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,A_.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new H0e,this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(Uh.onDidChangeLanguages(i=>{this._initializeFromRegistry()})))}dispose(){A_.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Vpe();const e=Uh.getLanguages();this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{let i=this._languages[t];i.name&&(this._nameMap[i.name]=i.identifier),i.aliases.forEach(s=>{this._lowercaseNameMap[s.toLowerCase()]=i.identifier}),i.mimetypes.forEach(s=>{this._mimeTypesMap[s]=i.identifier})}),$i.as(Eg.Configuration).registerOverrideIdentifiers(Uh.getLanguages().map(t=>t.id)),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let i;jc.call(this._languages,t)?i=this._languages[t]:(this.languageIdCodec.register(t),i={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[]},this._languages[t]=i),this._mergeLanguage(i,e)}_mergeLanguage(e,t){const i=t.id;let s=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),s=t.mimetypes[0]),s||(s=`text/x-${i}`,e.mimetypes.push(s)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(let a of t.extensions)Bb({id:i,mime:s,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(let a of t.filenames)Bb({id:i,mime:s,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(let a of t.filenamePatterns)Bb({id:i,mime:s,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{let l=new RegExp(a);$ae(l)||Bb({id:i,mime:s,firstline:l},this._warnOnOverwrite)}catch(l){Ie(l)}}e.aliases.push(i);let r=null;if(typeof t.aliases!="undefined"&&Array.isArray(t.aliases)&&(t.aliases.length===0?r=[null]:r=t.aliases),r!==null)for(const a of r)!a||a.length===0||e.aliases.push(a);let o=r!==null&&r.length>0;if(!(o&&r[0]===null)){let a=(o?r[0]:null)||i;(o||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration)}isRegisteredMode(e){return jc.call(this._mimeTypesMap,e)?!0:jc.call(this._languages,e)}getModeIdForLanguageNameLowercase(e){return jc.call(this._lowercaseNameMap,e)?this._lowercaseNameMap[e]:null}extractModeIds(e){return e?e.split(",").map(t=>t.trim()).map(t=>jc.call(this._mimeTypesMap,t)?this._mimeTypesMap[t]:t).filter(t=>jc.call(this._languages,t)):[]}validateLanguageId(e){return!e||e===dc?dc:jc.call(this._languages,e)?e:null}getModeIdsFromFilepathOrFirstLine(e,t){if(!e&&!t)return[];let i=Wpe(e,t);return this.extractModeIds(i.join(","))}}A_.instanceCount=0;class G4{constructor(e,t){this._selector=t,this.languageId=this._selector();let i;this._onDidChange=new R({onFirstListenerAdd:()=>{i=e(()=>this._evaluate())},onLastListenerRemove:()=>{i.dispose()}}),this.onDidChange=this._onDidChange.event}_evaluate(){const e=this._selector();e!==this.languageId&&(this.languageId=e,this._onDidChange.fire(this.languageId))}}class M_ extends q{constructor(e=!1){super(),this._onDidEncounterLanguage=this._register(new R),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onLanguagesMaybeChanged=this._register(new R({leakWarningThreshold:200})),this.onLanguagesMaybeChanged=this._onLanguagesMaybeChanged.event,M_.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new A_(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onLanguagesMaybeChanged.fire()))}dispose(){M_.instanceCount--,super.dispose()}isRegisteredMode(e){return this._registry.isRegisteredMode(e)}getModeIdForLanguageName(e){return this._registry.getModeIdForLanguageNameLowercase(e)}getModeIdByFilepathOrFirstLine(e,t){const i=this._registry.getModeIdsFromFilepathOrFirstLine(e,t);return WE(i,null)}getModeId(e){const t=this._registry.extractModeIds(e);return WE(t,null)}validateLanguageId(e){return this._registry.validateLanguageId(e)}create(e){return new G4(this.onLanguagesMaybeChanged,()=>{const t=this.getModeId(e);return this._createModeAndGetLanguageIdentifier(t)})}createByFilepathOrFirstLine(e,t){return new G4(this.onLanguagesMaybeChanged,()=>{const i=this.getModeIdByFilepathOrFirstLine(e,t);return this._createModeAndGetLanguageIdentifier(i)})}_createModeAndGetLanguageIdentifier(e){const t=this.validateLanguageId(e||"plaintext")||dc;return this._getOrCreateMode(t),t}triggerMode(e){const t=this.getModeId(e);this._getOrCreateMode(t||"plaintext")}_getOrCreateMode(e){if(!this._encounteredLanguages.has(e)){this._encounteredLanguages.add(e);const t=this.validateLanguageId(e)||dc;this._onDidEncounterLanguage.fire(t)}}}M_.instanceCount=0;var $0e=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},xD=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let vI=class{constructor(e,t,i,s){this._legend=e,this._themeService=t,this._modeService=i,this._logService=s,this._hashTable=new Va,this._hasWarnedOverlappingTokens=!1}getMetadata(e,t,i){const s=this._modeService.languageIdCodec.encodeLanguageId(i),r=this._hashTable.get(e,t,s);let o;if(r)o=r.metadata,this._logService.getLevel()===jr.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${Rs.getForeground(o)}, fontStyle ${Rs.getFontStyle(o).toString(2)}`);else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let u=0;c>0&&u<this._legend.tokenModifiers.length;u++)c&1&&l.push(this._legend.tokenModifiers[u]),c=c>>1;c>0&&this._logService.getLevel()===jr.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),l.push("not-in-legend"));const h=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,i);typeof h=="undefined"?o=2147483647:(o=0,typeof h.italic!="undefined"&&(o|=(h.italic?1:0)<<11|1),typeof h.bold!="undefined"&&(o|=(h.bold?2:0)<<11|2),typeof h.underline!="undefined"&&(o|=(h.underline?4:0)<<11|4),h.foreground&&(o|=h.foreground<<14|8),o===0&&(o=2147483647))}else this._logService.getLevel()===jr.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),o=2147483647,a="not-in-legend";this._hashTable.add(e,t,s,o),this._logService.getLevel()===jr.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${a}) / ${t} (${l.join(" ")}): foreground ${Rs.getForeground(o)}, fontStyle ${Rs.getFontStyle(o).toString(2)}`)}return o}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}};vI=$0e([xD(1,At),xD(2,Hn),xD(3,fl)],vI);function U0e(n,e,t){const i=n.data,s=n.data.length/5|0,r=Math.max(Math.ceil(s/1024),400),o=[];let a=0,l=1,c=0;for(;a<s;){const h=a;let u=Math.min(h+r,s);if(u<s){let w=u;for(;w-1>h&&i[5*w]===0;)w--;if(w-1===h){let C=u;for(;C+1<s&&i[5*C]===0;)C++;u=C}else u=w}let d=new Uint32Array((u-h)*4),f=0,g=0,p=0,_=0,v=0;for(;a<u;){const w=5*a,C=i[w],y=i[w+1],D=l+C|0,S=C===0?c+y|0:y,x=i[w+2],k=i[w+3],F=i[w+4],A=e.getMetadata(k,F,t);A!==2147483647&&(g===0&&(g=D),p===D&&v>S&&(e.warnOverlappingSemanticTokens(D,S+1),_<S?d[f-4+2]=S:f-=4),d[f]=D-g,d[f+1]=S,d[f+2]=S+x,d[f+3]=A,f+=4,p=D,_=S,v=S+x),l=D,c=S,a++}f!==d.length&&(d=d.subarray(0,f));const b=new CC(g,new wC(d));o.push(b)}return o}class j0e{constructor(e,t,i,s){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=i,this.metadata=s,this.next=null}}class Va{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=Va._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Va._SIZES.length?2/3*this._currentLength:0),this._elements=[],Va._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let i=0;i<t;i++)e[i]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,i){return this._hash2(this._hash2(e,t),i)%this._currentLength}get(e,t,i){const s=this._hashFunc(e,t,i);let r=this._elements[s];for(;r;){if(r.tokenTypeIndex===e&&r.tokenModifierSet===t&&r.languageId===i)return r;r=r.next}return null}add(e,t,i,s){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const r=this._elements;this._currentLengthIndex++,this._currentLength=Va._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Va._SIZES.length?2/3*this._currentLength:0),this._elements=[],Va._nullOutEntries(this._elements,this._currentLength);for(const o of r){let a=o;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new j0e(e,t,i,s))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}Va._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];function q0e(n){for(let e=0,t=n.length;e<t;e+=4){const i=n[e+0],s=n[e+1],r=n[e+2],o=n[e+3];n[e+0]=o,n[e+1]=r,n[e+2]=s,n[e+3]=i}}function K0e(n){const e=new Uint8Array(n.buffer,n.byteOffset,n.length*4);return b9()||q0e(e),u1.wrap(e)}function Tz(n){const e=new Uint32Array(G0e(n));let t=0;if(e[t++]=n.id,n.type==="full")e[t++]=1,e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length;else{e[t++]=2,e[t++]=n.deltas.length;for(const i of n.deltas)e[t++]=i.start,e[t++]=i.deleteCount,i.data?(e[t++]=i.data.length,e.set(i.data,t),t+=i.data.length):e[t++]=0}return K0e(e)}function G0e(n){let e=0;if(e+=1+1,n.type==="full")e+=1+n.data.length;else{e+=1,e+=(1+1+1)*n.deltas.length;for(const t of n.deltas)t.data&&(e+=t.data.length)}return e}var bc=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};function Y1(n){return n&&!!n.data}function Nz(n){return n&&Array.isArray(n.edits)}class Y0e{constructor(e,t){this.provider=e,this.tokens=t}}function Az(n){return Wf.has(n)}function Z0e(n){const e=Wf.orderedGroups(n);return e.length>0?e[0]:[]}function Mz(n,e,t,i){return bc(this,void 0,void 0,function*(){const s=Z0e(n),r=yield Promise.all(s.map(o=>bc(this,void 0,void 0,function*(){let a;try{a=yield o.provideDocumentSemanticTokens(n,o===e?t:null,i)}catch(l){kr(l),a=null}return(!a||!Y1(a)&&!Nz(a))&&(a=null),new Y0e(o,a)})));for(const o of r)if(o.tokens)return o;return r.length>0?r[0]:null})}function X0e(n){const e=Wf.orderedGroups(n);return e.length>0?e[0]:null}class Q0e{constructor(e,t){this.provider=e,this.tokens=t}}function Rz(n){const e=_V.orderedGroups(n);return e.length>0?e[0]:[]}function Oz(n,e,t){return bc(this,void 0,void 0,function*(){const i=Rz(n),s=yield Promise.all(i.map(r=>bc(this,void 0,void 0,function*(){let o;try{o=yield r.provideDocumentRangeSemanticTokens(n,e,t)}catch(a){kr(a),o=null}return(!o||!Y1(o))&&(o=null),new Q0e(r,o)})));for(const r of s)if(r.tokens)return r;return s.length>0?s[0]:null})}lt.registerCommand("_provideDocumentSemanticTokensLegend",(n,...e)=>bc(void 0,void 0,void 0,function*(){const[t]=e;ti(t instanceof xe);const i=n.get(zn).getModel(t);if(!i)return;const s=X0e(i);return s?s[0].getLegend():n.get(Fi).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)}));lt.registerCommand("_provideDocumentSemanticTokens",(n,...e)=>bc(void 0,void 0,void 0,function*(){const[t]=e;ti(t instanceof xe);const i=n.get(zn).getModel(t);if(!i)return;if(!Az(i))return n.get(Fi).executeCommand("_provideDocumentRangeSemanticTokens",t,i.getFullModelRange());const s=yield Mz(i,null,null,Lt.None);if(!s)return;const{provider:r,tokens:o}=s;if(!o||!Y1(o))return;const a=Tz({id:0,type:"full",data:o.data});return o.resultId&&r.releaseDocumentSemanticTokens(o.resultId),a}));lt.registerCommand("_provideDocumentRangeSemanticTokensLegend",(n,...e)=>bc(void 0,void 0,void 0,function*(){const[t,i]=e;ti(t instanceof xe);const s=n.get(zn).getModel(t);if(!s)return;const r=Rz(s);if(r.length===0)return;if(r.length===1)return r[0].getLegend();if(!i||!I.isIRange(i))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),r[0].getLegend();const o=yield Oz(s,I.lift(i),Lt.None);if(!!o)return o.provider.getLegend()}));lt.registerCommand("_provideDocumentRangeSemanticTokens",(n,...e)=>bc(void 0,void 0,void 0,function*(){const[t,i]=e;ti(t instanceof xe),ti(I.isIRange(i));const s=n.get(zn).getModel(t);if(!s)return;const r=yield Oz(s,I.lift(i),Lt.None);if(!(!r||!r.tokens))return Tz({id:0,type:"full",data:r.tokens.data})}));var J0e=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},qc=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};function Cl(n){return n.toString()}function Y4(n){const e=new f1,t=n.createSnapshot();let i;for(;i=t.read();)e.update(i);return e.digest()}class ebe{constructor(e,t,i){this._modelEventListeners=new ee,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(s=>i(e,s)))}_disposeLanguageSelection(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(e){this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange(()=>this.model.setMode(e.languageId)),this.model.setMode(e.languageId)}}const tbe=Fn||je?1:2;class ibe{constructor(e,t,i,s,r,o,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=i,this.sharesUndoRedoStack=s,this.heapSize=r,this.sha1=o,this.versionId=a,this.alternativeVersionId=l}}let qC=class Fp extends q{constructor(e,t,i,s,r,o,a){super(),this._configurationService=e,this._resourcePropertiesService=t,this._themeService=i,this._logService=s,this._undoRedoService=r,this._modeService=o,this._languageConfigurationService=a,this._onModelAdded=this._register(new R),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new R),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new R),this.onModelModeChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new sbe(this._themeService,this._modeService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration(()=>this._updateModelOptions())),this._updateModelOptions(),this._register(new nbe(this,this._themeService,this._configurationService,this._semanticStyling))}static _readModelOptions(e,t){var i;let s=rn.tabSize;if(e.editor&&typeof e.editor.tabSize!="undefined"){const f=parseInt(e.editor.tabSize,10);isNaN(f)||(s=f),s<1&&(s=1)}let r=s;if(e.editor&&typeof e.editor.indentSize!="undefined"&&e.editor.indentSize!=="tabSize"){const f=parseInt(e.editor.indentSize,10);isNaN(f)||(r=f),r<1&&(r=1)}let o=rn.insertSpaces;e.editor&&typeof e.editor.insertSpaces!="undefined"&&(o=e.editor.insertSpaces==="false"?!1:Boolean(e.editor.insertSpaces));let a=tbe;const l=e.eol;l===`\r
`?a=2:l===`
`&&(a=1);let c=rn.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace!="undefined"&&(c=e.editor.trimAutoWhitespace==="false"?!1:Boolean(e.editor.trimAutoWhitespace));let h=rn.detectIndentation;e.editor&&typeof e.editor.detectIndentation!="undefined"&&(h=e.editor.detectIndentation==="false"?!1:Boolean(e.editor.detectIndentation));let u=rn.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations!="undefined"&&(u=e.editor.largeFileOptimizations==="false"?!1:Boolean(e.editor.largeFileOptimizations));let d=rn.bracketPairColorizationOptions;return((i=e.editor)===null||i===void 0?void 0:i.bracketPairColorization)&&typeof e.editor.bracketPairColorization=="object"&&(d={enabled:!!e.editor.bracketPairColorization.enabled}),{isForSimpleWidget:t,tabSize:s,indentSize:r,insertSpaces:o,detectIndentation:h,defaultEOL:a,trimAutoWhitespace:c,largeFileOptimizations:u,bracketPairColorizationOptions:d}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const i=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return i&&typeof i=="string"&&i!=="auto"?i:dr===3||dr===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,i){let s=this._modelCreationOptionsByLanguageAndResource[e+t];if(!s){const r=this._configurationService.getValue("editor",{overrideIdentifier:e,resource:t}),o=this._getEOL(t,e);s=Fp._readModelOptions({editor:r,eol:o},i),this._modelCreationOptionsByLanguageAndResource[e+t]=s}return s}_updateModelOptions(){const e=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const t=Object.keys(this._models);for(let i=0,s=t.length;i<s;i++){const r=t[i],o=this._models[r],a=o.model.getLanguageId(),l=o.model.uri,c=e[a+l],h=this.getCreationOptions(a,l,o.model.isForSimpleWidget);Fp._setModelOptionsForModel(o.model,h,c)}}static _setModelOptionsForModel(e,t,i){i&&i.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(i&&i.detectIndentation===t.detectIndentation&&i.insertSpaces===t.insertSpaces&&i.tabSize===t.tabSize&&i.indentSize===t.indentSize&&i.trimAutoWhitespace===t.trimAutoWhitespace&&Gr(i.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(Cl(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(Cl(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(Cl(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(i=>{i.sharesUndoRedoStack||t.push(i)}),t.sort((i,s)=>i.time-s.time);t.length>0&&this._disposedModelsHeapSize>e;){const i=t.shift();this._removeDisposedModel(i.uri),i.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(i.initialUndoRedoSnapshot)}}}_createModelData(e,t,i,s){const r=this.getCreationOptions(t,i,s),o=new js(e,r,t,i,this._undoRedoService,this._modeService,this._languageConfigurationService);if(i&&this._disposedModels.has(Cl(i))){const c=this._removeDisposedModel(i),h=this._undoRedoService.getElements(i),u=Y4(o)===c.sha1;if(u||c.sharesUndoRedoStack){for(const d of h.past)Fa(d)&&d.matchesResource(i)&&d.setModel(o);for(const d of h.future)Fa(d)&&d.matchesResource(i)&&d.setModel(o);this._undoRedoService.setElementsValidFlag(i,!0,d=>Fa(d)&&d.matchesResource(i)),u&&(o._overwriteVersionId(c.versionId),o._overwriteAlternativeVersionId(c.alternativeVersionId),o._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=Cl(o.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new ebe(o,c=>this._onWillDispose(c),(c,h)=>this._onDidChangeLanguage(c,h));return this._models[a]=l,l}createModel(e,t,i,s=!1){let r;return t?(r=this._createModelData(e,t.languageId,i,s),this.setMode(r.model,t)):r=this._createModelData(e,Fg,i,s),this._onModelAdded.fire(r.model),r.model}setMode(e,t){if(!t)return;const i=this._models[Cl(e.uri)];!i||i.setLanguage(t)}getModels(){const e=[],t=Object.keys(this._models);for(let i=0,s=t.length;i<s;i++){const r=t[i];e.push(this._models[r].model)}return e}getModel(e){const t=Cl(e),i=this._models[t];return i?i.model:null}getSemanticTokensProviderStyling(e){return this._semanticStyling.get(e)}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===Ve.file||e.scheme===Ve.vscodeRemote||e.scheme===Ve.userData||e.scheme===Ve.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=Cl(e.uri),i=this._models[t],s=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let r=!1,o=0;if(s||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const l=this._undoRedoService.getElements(e.uri);if(l.past.length>0||l.future.length>0){for(const c of l.past)Fa(c)&&c.matchesResource(e.uri)&&(r=!0,o+=c.heapSize(e.uri),c.setModel(e.uri));for(const c of l.future)Fa(c)&&c.matchesResource(e.uri)&&(r=!0,o+=c.heapSize(e.uri),c.setModel(e.uri))}}const a=Fp.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(r)if(!s&&o>a){const l=i.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}else this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,l=>Fa(l)&&l.matchesResource(e.uri)),this._insertDisposedModel(new ibe(e.uri,i.model.getInitialUndoRedoSnapshot(),Date.now(),s,o,Y4(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!s){const l=i.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}delete this._models[t],i.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const i=t.oldLanguage,s=e.getLanguageId(),r=this.getCreationOptions(i,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(s,e.uri,e.isForSimpleWidget);Fp._setModelOptionsForModel(e,o,r),this._onModelModeChanged.fire({model:e,oldModeId:i})}};qC.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;qC=J0e([qc(0,si),qc(1,OV),qc(2,At),qc(3,fl),qc(4,V0),qc(5,Hn),qc(6,F0)],qC);const Fz="editor.semanticHighlighting";function Z4(n,e,t){var i;const s=(i=t.getValue(Fz,{overrideIdentifier:n.getLanguageId(),resource:n.uri}))===null||i===void 0?void 0:i.enabled;return typeof s=="boolean"?s:e.getColorTheme().semanticHighlighting}class nbe extends q{constructor(e,t,i,s){super(),this._watchers=Object.create(null),this._semanticStyling=s;const r=l=>{this._watchers[l.uri.toString()]=new Sh(l,t,this._semanticStyling)},o=(l,c)=>{c.dispose(),delete this._watchers[l.uri.toString()]},a=()=>{for(let l of e.getModels()){const c=this._watchers[l.uri.toString()];Z4(l,t,i)?c||r(l):c&&o(l,c)}};this._register(e.onModelAdded(l=>{Z4(l,t,i)&&r(l)})),this._register(e.onModelRemoved(l=>{const c=this._watchers[l.uri.toString()];c&&o(l,c)})),this._register(i.onDidChangeConfiguration(l=>{l.affectsConfiguration(Fz)&&a()})),this._register(t.onDidColorThemeChange(a))}}class sbe extends q{constructor(e,t,i){super(),this._themeService=e,this._modeService=t,this._logService=i,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}get(e){return this._caches.has(e)||this._caches.set(e,new vI(e.getLegend(),this._themeService,this._modeService,this._logService)),this._caches.get(e)}}class rbe{constructor(e,t,i){this.provider=e,this.resultId=t,this.data=i}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}class Sh extends q{constructor(e,t,i){super(),this._isDisposed=!1,this._model=e,this._semanticStyling=i,this._fetchDocumentSemanticTokens=this._register(new Wt(()=>this._fetchDocumentSemanticTokensNow(),Sh.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule()})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const s=()=>{He(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const r of Wf.all(e))typeof r.onDidChange=="function"&&this._documentProvidersChangeListeners.push(r.onDidChange(()=>this._fetchDocumentSemanticTokens.schedule(0)))};s(),this._register(Wf.onDidChange(()=>{s(),this._fetchDocumentSemanticTokens.schedule()})),this._register(t.onDidColorThemeChange(r=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule()})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!Az(this._model)){this._currentDocumentResponse&&this._model.setSemanticTokens(null,!1);return}const e=new go,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,i=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,s=Mz(this._model,t,i,e.token);this._currentDocumentRequestCancellationTokenSource=e;const r=[],o=this._model.onDidChangeContent(a=>{r.push(a)});s.then(a=>{if(this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),!a)this._setDocumentSemanticTokens(null,null,null,r);else{const{provider:l,tokens:c}=a,h=this._semanticStyling.get(l);this._setDocumentSemanticTokens(l,c||null,h,r)}},a=>{a&&(Rc(a)||typeof a.message=="string"&&a.message.indexOf("busy")!==-1)||Ie(a),this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),r.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule())})}static _copy(e,t,i,s,r){for(let o=0;o<r;o++)i[s+o]=e[t+o]}_setDocumentSemanticTokens(e,t,i,s){const r=this._currentDocumentResponse,o=()=>{s.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule()};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!i){this._model.setSemanticTokens(null,!1);return}if(!t){this._model.setSemanticTokens(null,!0),o();return}if(Nz(t)){if(!r){this._model.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:r.data};else{let a=0;for(const d of t.edits)a+=(d.data?d.data.length:0)-d.deleteCount;const l=r.data,c=new Uint32Array(l.length+a);let h=l.length,u=c.length;for(let d=t.edits.length-1;d>=0;d--){const f=t.edits[d],g=h-(f.start+f.deleteCount);g>0&&(Sh._copy(l,h-g,c,u-g,g),u-=g),f.data&&(Sh._copy(f.data,0,c,u-f.data.length,f.data.length),u-=f.data.length),h=f.start}h>0&&Sh._copy(l,0,c,0,h),t={resultId:t.resultId,data:c}}}if(Y1(t)){this._currentDocumentResponse=new rbe(e,t.resultId,t.data);const a=U0e(t,i,this._model.getLanguageId());if(s.length>0)for(const l of s)for(const c of a)for(const h of l.changes)c.applyEdit(h.range,h.text);this._model.setSemanticTokens(a,!0)}else this._model.setSemanticTokens(null,!0);o()}}Sh.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY=300;class obe{constructor(e,t,i,s,r){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=i,this.foreground=s,this.background=r}}function abe(n){if(!n||!Array.isArray(n))return[];let e=[],t=0;for(let i=0,s=n.length;i<s;i++){let r=n[i],o=-1;if(typeof r.fontStyle=="string"){o=0;let c=r.fontStyle.split(" ");for(let h=0,u=c.length;h<u;h++)switch(c[h]){case"italic":o=o|1;break;case"bold":o=o|2;break;case"underline":o=o|4;break}}let a=null;typeof r.foreground=="string"&&(a=r.foreground);let l=null;typeof r.background=="string"&&(l=r.background),e[t++]=new obe(r.token||"",i,o,a,l)}return e}function lbe(n,e){n.sort((h,u)=>{let d=fbe(h.token,u.token);return d!==0?d:h.index-u.index});let t=0,i="000000",s="ffffff";for(;n.length>=1&&n[0].token==="";){let h=n.shift();h.fontStyle!==-1&&(t=h.fontStyle),h.foreground!==null&&(i=h.foreground),h.background!==null&&(s=h.background)}let r=new hbe;for(let h of e)r.getId(h);let o=r.getId(i),a=r.getId(s),l=new X2(t,o,a),c=new Q2(l);for(let h=0,u=n.length;h<u;h++){let d=n[h];c.insert(d.token,d.fontStyle,r.getId(d.foreground),r.getId(d.background))}return new Pz(r,c)}const cbe=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class hbe{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(cbe);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let i=this._color2id.get(e);return i||(i=++this._lastColorId,this._color2id.set(e,i),this._id2color[i]=V.fromHex("#"+e),i)}getColorMap(){return this._id2color.slice(0)}}class Pz{constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(abe(e),t)}static createFromParsedTokenTheme(e,t){return lbe(e,t)}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let i=this._cache.get(t);if(typeof i=="undefined"){let s=this._match(t),r=dbe(t);i=(s.metadata|r<<8)>>>0,this._cache.set(t,i)}return(i|e<<0)>>>0}}const ube=/\b(comment|string|regex|regexp)\b/;function dbe(n){let e=n.match(ube);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 4;case"regexp":return 4}throw new Error("Unexpected match for standard token type!")}function fbe(n,e){return n<e?-1:n>e?1:0}class X2{constructor(e,t,i){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=i,this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}clone(){return new X2(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,i){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),i!==0&&(this._background=i),this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}}class Q2{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;let t=e.indexOf("."),i,s;t===-1?(i=e,s=""):(i=e.substring(0,t),s=e.substring(t+1));let r=this._children.get(i);return typeof r!="undefined"?r.match(s):this._mainRule}insert(e,t,i,s){if(e===""){this._mainRule.acceptOverwrite(t,i,s);return}let r=e.indexOf("."),o,a;r===-1?(o=e,a=""):(o=e.substring(0,r),a=e.substring(r+1));let l=this._children.get(o);typeof l=="undefined"&&(l=new Q2(this._mainRule.clone()),this._children.set(o,l)),l.insert(a,t,i,s)}}function gbe(n){let e=[];for(let t=1,i=n.length;t<i;t++){let s=n[t];e[t]=`.mtk${t} { color: ${s}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.join(`
`)}const pbe={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[zs]:"#FFFFFE",[Zl]:"#000000",[A2]:"#E5EBF1",[z1]:"#D3D3D3",[H1]:"#939393",[HW]:"#ADD6FF4D"}},mbe={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[zs]:"#1E1E1E",[Zl]:"#D4D4D4",[A2]:"#3A3D41",[z1]:"#404040",[H1]:"#707070",[HW]:"#ADD6FF26"}},_be={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[zs]:"#000000",[Zl]:"#FFFFFF",[z1]:"#FFFFFF",[H1]:"#FFFFFF"}};function bbe(){const n=new R,e=f0e();return e.onDidChange(()=>n.fire()),{onDidChange:n.event,getCSS(){const t={},i=r=>{let o=r.defaults;for(;Rt.isThemeIcon(o);){const l=e.getIcon(o.id);if(!l)return;o=l.defaults}const a=o.fontId;if(a){const l=e.getIconFont(a);if(l)return t[a]=l,`.codicon-${r.id}:before { content: '${o.fontCharacter}'; font-family: ${LF(a)}; }`}return`.codicon-${r.id}:before { content: '${o.fontCharacter}'; }`},s=[];for(let r of e.getIcons()){const o=i(r);o&&s.push(o)}for(let r in t){const a=t[r].definition.src.map(l=>`${ol(l.location)} format('${l.format}')`).join(", ");s.push(`@font-face { src: ${a}; font-family: ${LF(r)}; font-display: block; }`)}return s.join(`
`)}}}const xh="vs",KC="vs-dark",vf="hc-black",vbe=$i.as(TW.ColorContribution),wbe=$i.as(oW.ThemingContribution);class Bz{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;let i=t.base;e.length>0?(Gv(e)?this.id=e:this.id=i+" "+e,this.themeName=e):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(let t in this.themeData.colors)e.set(t,V.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){let t=wI(this.themeData.base);for(let i in t.colors)e.has(i)||e.set(i,V.fromHex(t.colors[i]))}this.colors=e}return this.colors}getColor(e,t){const i=this.getColors().get(e);if(i)return i;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=vbe.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)}get type(){switch(this.base){case xh:return Zr.LIGHT;case vf:return Zr.HIGH_CONTRAST;default:return Zr.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){let r=wI(this.themeData.base);e=r.rules,r.encodedTokensColors&&(t=r.encodedTokensColors)}const i=this.themeData.colors["editor.foreground"],s=this.themeData.colors["editor.background"];if(i||s){const r={token:""};i&&(r.foreground=i),s&&(r.background=s),e.push(r)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=Pz.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,i){const r=this.tokenTheme._match([e].concat(t).join(".")).metadata,o=Rs.getForeground(r),a=Rs.getFontStyle(r);return{foreground:o,italic:Boolean(a&1),bold:Boolean(a&2),underline:Boolean(a&4)}}}function Gv(n){return n===xh||n===KC||n===vf}function wI(n){switch(n){case xh:return pbe;case KC:return mbe;case vf:return _be}}function DD(n){let e=wI(n);return new Bz(n,e)}class Cbe extends q{constructor(){super(),this._onColorThemeChange=this._register(new R),this.onDidColorThemeChange=this._onColorThemeChange.event,this._environment=Object.create(null),this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(xh,DD(xh)),this._knownThemes.set(KC,DD(KC)),this._knownThemes.set(vf,DD(vf));const e=bbe();this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(xh),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),Vae("(forced-colors: active)",()=>{this._updateActualTheme()})}registerEditorContainer(e){return OA(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=$s(),this._globalStyleElement.className="monaco-colors",this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),q.None}_registerShadowDomContainer(e){const t=$s(e);return t.className="monaco-colors",t.textContent=this._allCSS,this._styleElements.push(t),{dispose:()=>{for(let i=0;i<this._styleElements.length;i++)if(this._styleElements[i]===t){this._styleElements.splice(i,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!Gv(t.base)&&!Gv(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new Bz(e,t)),Gv(e)&&this._knownThemes.forEach(i=>{i.base===e&&i.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(xh),this._desiredTheme=t,this._updateActualTheme()}_updateActualTheme(){const e=this._autoDetectHighContrast&&window.matchMedia("(forced-colors: active)").matches?this._knownThemes.get(vf):this._desiredTheme;this._theme!==e&&(this._theme=e,this._updateThemeOrColorMap())}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._updateActualTheme()}_updateThemeOrColorMap(){let e=[],t={},i={addRule:r=>{t[r]||(e.push(r),t[r]=!0)}};wbe.getThemingParticipants().forEach(r=>r(this._theme,i,this._environment));const s=this._colorMapOverride||this._theme.tokenTheme.getColorMap();i.addRule(gbe(s)),this._themeCSS=e.join(`
`),this._updateCSS(),Zt.setColorMap(s),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}}var ybe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Sbe=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};const Cm="data-keybinding-context";class J2{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t=="undefined"&&this._parent?this._parent.getValue(e):t}}class eg extends J2{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}eg.INSTANCE=new eg;class R_ extends J2{constructor(e,t,i){super(e,null),this._configurationService=t,this._values=of.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(s=>{if(s.source===6){const r=Array.from(Ue.map(this._values,([o])=>o));this._values.clear(),i.fire(new Q4(r))}else{const r=[];for(const o of s.affectedKeys){const a=`config.${o}`,l=this._values.findSuperstr(a);l!==void 0&&(r.push(...Ue.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(r.push(a),this._values.delete(a))}i.fire(new Q4(r))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(R_._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(R_._keyPrefix.length),i=this._configurationService.getValue(t);let s;switch(typeof i){case"number":case"boolean":case"string":s=i;break;default:Array.isArray(i)?s=JSON.stringify(i):s=i}return this._values.set(e,s),s}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}R_._keyPrefix="config.";class xbe{constructor(e,t,i){this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue=="undefined"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class X4{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}}class Q4{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}}class Dbe{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}}class Vz{constructor(e){this._onDidChangeContext=new Vw({merge:t=>new Dbe(t)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new xbe(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Lbe(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return cf.contextMatchesRules(t,e)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const i=this.getContextValuesContainer(this._myContextId);!i||i.setValue(e,t)&&this._onDidChangeContext.fire(new X4(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new X4(e))}getContext(e){return this._isDisposed?eg.INSTANCE:this.getContextValuesContainer(kbe(e))}}let CI=class extends Vz{constructor(e){super(0),this._contexts=new Map,this._toDispose=new ee,this._lastContextId=0;const t=new R_(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?eg.INSTANCE:this._contexts.get(e)||eg.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");let t=++this._lastContextId;return this._contexts.set(t,new J2(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};CI=ybe([Sbe(0,si)],CI);class Lbe extends Vz{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=new Ls,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(Cm)){let i="";this._domNode.classList&&(i=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${i?": "+i:""}`)}this._domNode.setAttribute(Cm,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(this._onDidChangeContext.fire,this._onDidChangeContext)}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(Cm),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?eg.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function kbe(n){for(;n;){if(n.hasAttribute(Cm)){const e=n.getAttribute(Cm);return e?parseInt(e,10):NaN}n=n.parentElement}return 0}lt.registerCommand(pue,function(n,e,t){n.get(Le).createKey(String(e),t)});lt.registerCommand({id:"getContextKeyInfo",handler(){return[...he.all()].sort((n,e)=>n.key.localeCompare(e.key))},description:{description:m("getContextKeyInfo","A command that returns information about context keys"),args:[]}});lt.registerCommand("_generateContextKeyInfo",function(){const n=[],e=new Set;for(let t of he.all())e.has(t.key)||(e.add(t.key),n.push(t));n.sort((t,i)=>t.key.localeCompare(i.key)),console.log(JSON.stringify(n,void 0,2))});function J4(n){let e=n.definition;for(;e instanceof se;)e=e.definition;return`.codicon-${n.id}:before { content: '${e.fontCharacter}'; }`}var qi;(function(n){function e(r,o){if(r.start>=o.end||o.start>=r.end)return{start:0,end:0};const a=Math.max(r.start,o.start),l=Math.min(r.end,o.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}n.intersect=e;function t(r){return r.end-r.start<=0}n.isEmpty=t;function i(r,o){return!t(e(r,o))}n.intersects=i;function s(r,o){const a=[],l={start:r.start,end:Math.min(o.start,r.end)},c={start:Math.max(o.end,r.start),end:r.end};return t(l)||a.push(l),t(c)||a.push(c),a}n.relativeComplement=s})(qi||(qi={}));var zl;(function(n){n[n.AVOID=0]="AVOID",n[n.ALIGN=1]="ALIGN"})(zl||(zl={}));function Ud(n,e,t){const i=t.mode===zl.ALIGN?t.offset:t.offset+t.size,s=t.mode===zl.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=n-i?i:e<=s?s-e:Math.max(n-e,0):e<=s?s-e:e<=n-i?i:0}class tg extends q{constructor(e,t){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=q.None,this.toDisposeOnSetContainer=q.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=J(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,Nn(this.view),this.setContainer(e,t),this._register(Ze(()=>this.setContainer(null,1)))}setContainer(e,t){var i;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(i=this.shadowRootHostElement)===null||i===void 0||i.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=t!==1,this.useShadowDOM=t===3,this.useShadowDOM){this.shadowRootHostElement=J(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const r=document.createElement("style");r.textContent=Ebe,this.shadowRoot.appendChild(r),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(J("slot"))}else this.container.appendChild(this.view);const s=new ee;tg.BUBBLE_UP_EVENTS.forEach(r=>{s.add(mi(this.container,r,o=>{this.onDOMEvent(o,!1)}))}),tg.BUBBLE_DOWN_EVENTS.forEach(r=>{s.add(mi(this.container,r,o=>{this.onDOMEvent(o,!0)},!0))}),this.toDisposeOnSetContainer=s}}show(e){this.isVisible()&&this.hide(),Yi(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2500",this.view.style.position=this.useFixedPosition?"fixed":"absolute",ps(this.view),this.toDisposeOnClean=e.render(this.view)||q.None,this.delegate=e,this.doLayout(),this.delegate.focus&&this.delegate.focus()}getViewElement(){return this.view}layout(){if(!!this.isVisible()){if(this.delegate.canRelayout===!1&&!(cc&&l1.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;let e=this.delegate.getAnchor(),t;if(K9(e)){let u=Gi(e);t={top:u.top,left:u.left,width:u.width,height:u.height}}else t={top:e.y,left:e.x,width:e.width||1,height:e.height||2};const i=sr(this.view),s=pE(this.view),r=this.delegate.anchorPosition||0,o=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;if(a===0){const u={offset:t.top-window.pageYOffset,size:t.height,position:r===0?0:1},d={offset:t.left,size:t.width,position:o===0?0:1,mode:zl.ALIGN};l=Ud(window.innerHeight,s,u)+window.pageYOffset,qi.intersects({start:l,end:l+s},{start:u.offset,end:u.offset+u.size})&&(d.mode=zl.AVOID),c=Ud(window.innerWidth,i,d)}else{const u={offset:t.left,size:t.width,position:o===0?0:1},d={offset:t.top,size:t.height,position:r===0?0:1,mode:zl.ALIGN};c=Ud(window.innerWidth,i,u),qi.intersects({start:c,end:c+i},{start:u.offset,end:u.offset+u.size})&&(d.mode=zl.AVOID),l=Ud(window.innerHeight,s,d)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(r===0?"bottom":"top"),this.view.classList.add(o===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const h=Gi(this.container);this.view.style.top=`${l-(this.useFixedPosition?Gi(this.view).top:h.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?Gi(this.view).left:h.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),Nn(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!Xo(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}tg.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];tg.BUBBLE_DOWN_EVENTS=["click"];let Ebe=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	@font-face {
		font-family: "codicon";
		font-display: block;
		src: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;function Wz(...n){return function(e,t){for(let i=0,s=n.length;i<s;i++){const r=n[i](e,t);if(r)return r}return null}}const eM=Ibe.bind(void 0,!0);function Ibe(n,e,t){if(!t||t.length<e.length)return null;let i;return n?i=BA(t,e):i=t.indexOf(e)===0,i?e.length>0?[{start:0,end:e.length}]:[]:null}function Tbe(n,e){const t=e.toLowerCase().indexOf(n.toLowerCase());return t===-1?null:[{start:t,end:t+n.length}]}function Nbe(n,e){return yI(n.toLowerCase(),e.toLowerCase(),0,0)}function yI(n,e,t,i){if(t===n.length)return[];if(i===e.length)return null;if(n[t]===e[i]){let s=null;return(s=yI(n,e,t+1,i+1))?Hz({start:i,end:i+1},s):null}return yI(n,e,t,i+1)}function tM(n){return 97<=n&&n<=122}function Z1(n){return 65<=n&&n<=90}function iM(n){return 48<=n&&n<=57}function Abe(n){return n===32||n===9||n===10||n===13}const Mbe=new Set;"`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?".split("").forEach(n=>Mbe.add(n.charCodeAt(0)));function zz(n){return tM(n)||Z1(n)||iM(n)}function Hz(n,e){return e.length===0?e=[n]:n.end===e[0].start?e[0].start=n.start:e.unshift(n),e}function $z(n,e){for(let t=e;t<n.length;t++){const i=n.charCodeAt(t);if(Z1(i)||iM(i)||t>0&&!zz(n.charCodeAt(t-1)))return t}return n.length}function SI(n,e,t,i){if(t===n.length)return[];if(i===e.length)return null;if(n[t]!==e[i].toLowerCase())return null;{let s=null,r=i+1;for(s=SI(n,e,t+1,i+1);!s&&(r=$z(e,r))<e.length;)s=SI(n,e,t+1,r),r++;return s===null?null:Hz({start:i,end:i+1},s)}}function Rbe(n){let e=0,t=0,i=0,s=0,r=0;for(let h=0;h<n.length;h++)r=n.charCodeAt(h),Z1(r)&&e++,tM(r)&&t++,zz(r)&&i++,iM(r)&&s++;const o=e/n.length,a=t/n.length,l=i/n.length,c=s/n.length;return{upperPercent:o,lowerPercent:a,alphaPercent:l,numericPercent:c}}function Obe(n){const{upperPercent:e,lowerPercent:t}=n;return t===0&&e>.6}function Fbe(n){const{upperPercent:e,lowerPercent:t,alphaPercent:i,numericPercent:s}=n;return t>.2&&e<.8&&i>.6&&s<.2}function Pbe(n){let e=0,t=0,i=0,s=0;for(let r=0;r<n.length;r++)i=n.charCodeAt(r),Z1(i)&&e++,tM(i)&&t++,Abe(i)&&s++;return(e===0||t===0)&&s===0?n.length<=30:e<=5}function Uz(n,e){if(!e||(e=e.trim(),e.length===0)||!Pbe(n)||e.length>60)return null;const t=Rbe(e);if(!Fbe(t)){if(!Obe(t))return null;e=e.toLowerCase()}let i=null,s=0;for(n=n.toLowerCase();s<e.length&&(i=SI(n,e,0,s))===null;)s=$z(e,s+1);return i}const Bbe=Wz(eM,Uz,Tbe),Vbe=Wz(eM,Uz,Nbe),e3=new HA(1e4);function t3(n,e,t=!1){if(typeof n!="string"||typeof e!="string")return null;let i=e3.get(n);i||(i=new RegExp(Hae(n),"i"),e3.set(n,i));const s=i.exec(e);return s?[{start:s.index,end:s.index+s[0].length}]:t?Vbe(n,e):Bbe(n,e)}function Wbe(n,e,t,i,s,r){const o=Math.min(13,n.length);for(;t<o;t++){const a=O_(n,e,t,i,s,r,!1);if(a)return a}return[0,r]}function nM(n){if(typeof n=="undefined")return[];const e=[],t=n[1];for(let i=n.length-1;i>1;i--){const s=n[i]+t,r=e[e.length-1];r&&r.end===s?r.end=s+1:e.push({start:s,end:s+1})}return e}const Hl=128;function sM(){const n=[],e=[];for(let t=0;t<=Hl;t++)e[t]=0;for(let t=0;t<=Hl;t++)n.push(e.slice(0));return n}function jz(n){const e=[];for(let t=0;t<=n;t++)e[t]=0;return e}const qz=jz(2*Hl),xI=jz(2*Hl),xa=sM(),Kc=sM(),qb=sM();function Kb(n,e){if(e<0||e>=n.length)return!1;const t=n.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 40:case 91:return!0;case void 0:return!1;default:return!!Zp(t)}}function i3(n,e){if(e<0||e>=n.length)return!1;switch(n.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function Yv(n,e,t){return e[n]!==t[n]}function zbe(n,e,t,i,s,r,o=!1){for(;e<t&&s<r;)n[e]===i[s]&&(o&&(qz[e]=s),e+=1),s+=1;return e===t}var Jr;(function(n){n.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}n.isDefault=e})(Jr||(Jr={}));function O_(n,e,t,i,s,r,o){const a=n.length>Hl?Hl:n.length,l=i.length>Hl?Hl:i.length;if(t>=a||r>=l||a-t>l-r||!zbe(e,t,a,s,r,l,!0))return;Hbe(a,l,t,r,e,s);let c=1,h=1,u=t,d=r;const f=[!1];for(c=1,u=t;u<a;c++,u++){const b=qz[u],w=xI[u],C=u+1<a?xI[u+1]:l;for(h=b-r+1,d=b;d<C;h++,d++){let y=Number.MIN_SAFE_INTEGER,D=!1;d<=w&&(y=$be(n,e,u,t,i,s,d,l,r,xa[c-1][h-1]===0,f));let S=0;y!==Number.MAX_SAFE_INTEGER&&(D=!0,S=y+Kc[c-1][h-1]);const x=d>b,k=x?Kc[c][h-1]+(xa[c][h-1]>0?-5:0):0,F=d>b+1&&xa[c][h-1]>0,A=F?Kc[c][h-2]+(xa[c][h-2]>0?-5:0):0;if(F&&(!x||A>=k)&&(!D||A>=S))Kc[c][h]=A,qb[c][h]=3,xa[c][h]=0;else if(x&&(!D||k>=S))Kc[c][h]=k,qb[c][h]=2,xa[c][h]=0;else if(D)Kc[c][h]=S,qb[c][h]=1,xa[c][h]=xa[c-1][h-1]+1;else throw new Error("not possible")}}if(!f[0]&&!o)return;c--,h--;const g=[Kc[c][h],r];let p=0,_=0;for(;c>=1;){let b=h;do{const w=qb[c][b];if(w===3)b=b-2;else if(w===2)b=b-1;else break}while(b>=1);p>1&&e[t+c-1]===s[r+h-1]&&!Yv(b+r-1,i,s)&&p+1>xa[c][b]&&(b=h),b===h?p++:p=1,_||(_=b),c--,h=b-1,g.push(h)}l===a&&(g[0]+=2);const v=_-a;return g[0]-=v,g}function Hbe(n,e,t,i,s,r){let o=n-1,a=e-1;for(;o>=t&&a>=i;)s[o]===r[a]&&(xI[o]=a,o--),a--}function $be(n,e,t,i,s,r,o,a,l,c,h){if(e[t]!==r[o])return Number.MIN_SAFE_INTEGER;let u=1,d=!1;return o===t-i?u=n[t]===s[o]?7:5:Yv(o,s,r)&&(o===0||!Yv(o-1,s,r))?(u=n[t]===s[o]?7:5,d=!0):Kb(r,o)&&(o===0||!Kb(r,o-1))?u=5:(Kb(r,o-1)||i3(r,o-1))&&(u=5,d=!0),u>1&&t===i&&(h[0]=!0),d||(d=Yv(o,s,r)||Kb(r,o-1)||i3(r,o-1)),t===i?o>l&&(u-=d?3:5):c?u+=d?2:0:u+=d?0:1,o+1===a&&(u-=d?3:5),u}function Ube(n,e,t,i,s,r,o){return jbe(n,e,t,i,s,r,!0,o)}function jbe(n,e,t,i,s,r,o,a){let l=O_(n,e,t,i,s,r,a);if(l&&!o)return l;if(n.length>=3){const c=Math.min(7,n.length-1);for(let h=t+1;h<c;h++){const u=qbe(n,h);if(u){const d=O_(u,u.toLowerCase(),t,i,s,r,a);d&&(d[0]-=3,(!l||d[0]>l[0])&&(l=d))}}}return l}function qbe(n,e){if(e+1>=n.length)return;const t=n[e],i=n[e+1];if(t!==i)return n.slice(0,e)+i+t+n.slice(e+2)}const ym="$(",rM=new RegExp(`\\$\\(${Xn.iconNameExpression}(?:${Xn.iconModifierExpression})?\\)`,"g"),Kbe=new RegExp(`(\\\\)?${rM.source}`,"g");function Gbe(n){return n.replace(Kbe,(e,t)=>t?e:`\\${e}`)}const Ybe=new RegExp(`\\\\${rM.source}`,"g");function Zbe(n){return n.replace(Ybe,e=>`\\${e}`)}const Xbe=new RegExp(`(\\s)?(\\\\)?${rM.source}(\\s)?`,"g");function Qbe(n){return n.indexOf(ym)===-1?n:n.replace(Xbe,(e,t,i,s)=>i?e:t||s||"")}function Gb(n){const e=n.indexOf(ym);return e===-1?{text:n}:Jbe(n,e)}function Jbe(n,e){const t=[];let i="";function s(d){if(d){i+=d;for(const f of d)t.push(a)}}let r=-1,o="",a=0,l,c,h=e;const u=n.length;for(s(n.substr(0,e));h<u;)l=n[h],c=n[h+1],l===ym[0]&&c===ym[1]?(r=h,s(o),o=ym,h++):l===")"&&r!==-1?(a+=h-r+1,r=-1,o=""):r!==-1?/^[a-z0-9\-]$/i.test(l)?o+=l:(s(o),r=-1,o=""):s(l),h++;return s(o),{text:i,iconOffsets:t}}function Yb(n,e,t=!1){const{text:i,iconOffsets:s}=e;if(!s||s.length===0)return t3(n,i,t);const r=X9(i," "),o=i.length-r.length,a=t3(n,r,t);if(a)for(const l of a){const c=s[l.start+o]+o;l.start+=c,l.end+=c}return a}const DI=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,LD=/(&amp;)?(&amp;)([^\s&])/g,Kz=Er("menu-selection",se.check),Gz=Er("menu-submenu",se.chevronRight);var GC;(function(n){n[n.Right=0]="Right",n[n.Left=1]="Left"})(GC||(GC={}));class Dh extends ll{constructor(e,t,i={}){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const s=document.createElement("div");s.classList.add("monaco-menu"),s.setAttribute("role","presentation"),super(s,{orientation:1,actionViewItemProvider:a=>this.doGetActionViewItem(a,i,r),context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...je||Fn?[10]:[]],keyDown:!0}}),this.menuElement=s,this.actionsList.setAttribute("role","menu"),this.actionsList.tabIndex=0,this.menuDisposables=this._register(new ee),this.initializeStyleSheet(e),this._register(st.addTarget(s)),K(s,de.KEY_DOWN,a=>{new Ft(a).equals(2)&&a.preventDefault()}),i.enableMnemonics&&this.menuDisposables.add(K(s,de.KEY_DOWN,a=>{const l=a.key.toLocaleLowerCase();if(this.mnemonics.has(l)){ot.stop(a,!0);const c=this.mnemonics.get(l);if(c.length===1&&(c[0]instanceof n3&&c[0].container&&this.focusItemByElement(c[0].container),c[0].onClick(a)),c.length>1){const h=c.shift();h&&h.container&&(this.focusItemByElement(h.container),c.push(h)),this.mnemonics.set(l,c)}}})),Fn&&this._register(K(s,de.KEY_DOWN,a=>{const l=new Ft(a);l.equals(14)||l.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),ot.stop(a,!0)):(l.equals(13)||l.equals(12))&&(this.focusedItem=0,this.focusPrevious(),ot.stop(a,!0))})),this._register(K(this.domNode,de.MOUSE_OUT,a=>{let l=a.relatedTarget;Xo(l,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),a.stopPropagation())})),this._register(K(this.actionsList,de.MOUSE_OVER,a=>{let l=a.target;if(!(!l||!Xo(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const c=this.focusedItem;this.setFocusedItem(l),c!==this.focusedItem&&this.updateFocus()}}})),this._register(st.addTarget(this.actionsList)),this._register(K(this.actionsList,bt.Tap,a=>{let l=a.initialTarget;if(!(!l||!Xo(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const c=this.focusedItem;this.setFocusedItem(l),c!==this.focusedItem&&this.updateFocus()}}}));let r={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new q1(s,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const o=this.scrollableElement.getDomNode();o.style.position="",this._register(K(s,bt.Change,a=>{ot.stop(a,!0);const l=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:l-a.translationY})})),this._register(K(o,de.MOUSE_UP,a=>{a.preventDefault()})),s.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(a=>{var l;return!((l=i.submenuIds)===null||l===void 0)&&l.has(a.id)?(console.warn(`Found submenu cycle: ${a.id}`),!1):!0}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(a=>!(a instanceof kD)).forEach((a,l,c)=>{a.updatePositionInSet(l+1,c.length)})}initializeStyleSheet(e){OA(e)?(this.styleSheet=$s(e),this.styleSheet.textContent=s3):(Dh.globalStyleSheet||(Dh.globalStyleSheet=$s(),Dh.globalStyleSheet.textContent=s3),this.styleSheet=Dh.globalStyleSheet)}style(e){const t=this.getContainer(),i=e.foregroundColor?`${e.foregroundColor}`:"",s=e.backgroundColor?`${e.backgroundColor}`:"",r=e.borderColor?`1px solid ${e.borderColor}`:"",o=e.shadowColor?`0 2px 4px ${e.shadowColor}`:"";t.style.border=r,this.domNode.style.color=i,this.domNode.style.backgroundColor=s,t.style.boxShadow=o,this.viewItems&&this.viewItems.forEach(a=>{(a instanceof LI||a instanceof kD)&&a.style(e)})}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){let i=this.actionsList.children[t];if(e===i){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0),typeof this.focusedItem!="undefined"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,i){if(e instanceof Yr)return new kD(t.context,e,{icon:!0});if(e instanceof f2){const s=new n3(e,e.actions,i,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}));if(t.enableMnemonics){const r=s.getMnemonic();if(r&&s.isEnabled()){let o=[];this.mnemonics.has(r)&&(o=this.mnemonics.get(r)),o.push(s),this.mnemonics.set(r,o)}}return s}else{const s={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const o=t.getKeyBinding(e);if(o){const a=o.getLabel();a&&(s.keybinding=a)}}const r=new LI(t.context,e,s);if(t.enableMnemonics){const o=r.getMnemonic();if(o&&r.isEnabled()){let a=[];this.mnemonics.has(o)&&(a=this.mnemonics.get(o)),a.push(r),this.mnemonics.set(o,a)}}return r}}}class LI extends jh{constructor(e,t,i={}){if(i.isMenu=!0,super(t,t,i),this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass="",this.options.label&&i.enableMnemonics){let s=this.getAction().label;if(s){let r=DI.exec(s);r&&(this.mnemonic=(r[1]?r[1]:r[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new Wt(()=>{!this.element||(this._register(K(this.element,de.MOUSE_UP,s=>{if(ot.stop(s,!0),On){if(new Vs(s).rightButton)return;this.onClick(s)}else setTimeout(()=>{this.onClick(s)},0)})),this._register(K(this.element,de.CONTEXT_MENU,s=>{ot.stop(s,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=Y(this.element,J("a.action-menu-item")),this._action.id===Yr.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=Y(this.item,J("span.menu-item-check"+Kz.cssSelector)),this.check.setAttribute("role","none"),this.label=Y(this.item,J("span.action-label")),this.options.label&&this.options.keybinding&&(Y(this.item,J("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){if(!!this.label&&this.options.label){Yi(this.label);let e=Qbe(this.getAction().label);if(e){const t=eve(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t.replace(/&&/g,"&"));const i=DI.exec(e);if(i){e=FA(e),LD.lastIndex=0;let s=LD.exec(e);for(;s&&s[1];)s=LD.exec(e);const r=o=>o.replace(/&amp;&amp;/g,"&amp;");s?this.label.append(X9(r(e.substr(0,s.index))," "),J("u",{"aria-hidden":"true"},s[3]),zae(r(e.substr(s.index+s[0].length))," ")):this.label.innerText=r(e).trim(),this.item&&this.item.setAttribute("aria-keyshortcuts",(i[1]?i[1]:i[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,"&").trim()}}}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=m({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.item&&(this.item.title=e)}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.getAction().checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,s=e&&this.menuStyle.selectionBorderColor?`thin solid ${this.menuStyle.selectionBorderColor}`:"";this.item&&(this.item.style.color=t?t.toString():"",this.item.style.backgroundColor=i?i.toString():""),this.check&&(this.check.style.color=t?t.toString():""),this.container&&(this.container.style.border=s)}style(e){this.menuStyle=e,this.applyStyle()}}class n3 extends LI{constructor(e,t,i,s){super(e,e,s),this.submenuActions=t,this.parentData=i,this.submenuOptions=s,this.mysubmenu=null,this.submenuDisposables=this._register(new ee),this.mouseOver=!1,this.expandDirection=s&&s.expandDirection!==void 0?s.expandDirection:GC.Right,this.showScheduler=new Wt(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new Wt(()=>{this.element&&!Xo(sf(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=Y(this.item,J("span.submenu-indicator"+Gz.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(K(this.element,de.KEY_UP,t=>{let i=new Ft(t);(i.equals(17)||i.equals(3))&&(ot.stop(t,!0),this.createSubmenu(!0))})),this._register(K(this.element,de.KEY_DOWN,t=>{let i=new Ft(t);sf()===this.item&&(i.equals(17)||i.equals(3))&&ot.stop(t,!0)})),this._register(K(this.element,de.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(K(this.element,de.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(K(this.element,de.FOCUS_OUT,t=>{this.element&&!Xo(sf(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!1)})))}updateEnabled(){}onClick(e){ot.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,i,s){const r={top:0,left:0};return r.left=Ud(e.width,t.width,{position:s===GC.Right?0:1,offset:i.left,size:i.width}),r.left>=i.left&&r.left<i.left+i.width&&(i.left+10+t.width<=e.width&&(r.left=i.left+10),i.top+=10,i.height=0),r.top=Ud(e.height,t.height,{position:0,offset:i.top,size:0}),r.top+t.height===i.top&&r.top+i.height+t.height<=e.height&&(r.top+=i.height),r}createSubmenu(e=!0){if(!!this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=Y(this.element,J("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=getComputedStyle(this.parentData.parent.domNode),i=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new Dh(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new R1],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const s=this.element.getBoundingClientRect(),r={top:s.top-i,left:s.left,height:s.height+2*i,width:s.width},o=this.submenuContainer.getBoundingClientRect(),{top:a,left:l}=this.calculateSubmenuMenuLayout(new gt(window.innerWidth,window.innerHeight),gt.lift(o),r,this.expandDirection);this.submenuContainer.style.left=`${l-o.left}px`,this.submenuContainer.style.top=`${a-o.top}px`,this.submenuDisposables.add(K(this.submenuContainer,de.KEY_UP,c=>{new Ft(c).equals(15)&&(ot.stop(c,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(K(this.submenuContainer,de.KEY_DOWN,c=>{new Ft(c).equals(15)&&ot.stop(c,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){if(super.applyStyle(),!this.menuStyle)return;const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t?`${t}`:""),this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class kD extends Y2{style(e){this.label&&(this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:"")}}function eve(n){const e=DI,t=e.exec(n);if(!t)return n;const i=!t[1];return n.replace(e,i?"$2$3":"").trim()}let s3=`
.monaco-menu {
	font-size: 13px;

}

${J4(Kz)}
${J4(Gz)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 = \u221A\u03C6 */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	opacity: 0.4;
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid #bbb;
	padding-top: 1px;
	margin-left: .8em;
	margin-right: .8em;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	padding: 0.5em 0 0 0;
	margin-bottom: 0.5em;
	width: 100%;
	height: 0px !important;
	margin-left: .8em !important;
	margin-right: .8em !important;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	border: thin solid transparent; /* prevents jumping behaviour on hover or focus */
}


/* High Contrast Theming */
:host-context(.hc-black) .context-view.monaco-menu-container {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: .5em 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 1.8em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	padding: 0.2em 0 0 0;
	margin-bottom: 0.2em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}

/* Arrows */
.monaco-scrollable-element > .scrollbar > .scra {
	cursor: pointer;
	font-size: 11px !important;
}

.monaco-scrollable-element > .visible {
	opacity: 1;

	/* Background rule added for IE9 - to allow clicks on dom node */
	background:rgba(0,0,0,0);

	transition: opacity 100ms linear;
}
.monaco-scrollable-element > .invisible {
	opacity: 0;
	pointer-events: none;
}
.monaco-scrollable-element > .invisible.fade {
	transition: opacity 800ms linear;
}

/* Scrollable Content Inset Shadow */
.monaco-scrollable-element > .shadow {
	position: absolute;
	display: none;
}
.monaco-scrollable-element > .shadow.top {
	display: block;
	top: 0;
	left: 3px;
	height: 3px;
	width: 100%;
	box-shadow: #DDD 0 6px 6px -6px inset;
}
.monaco-scrollable-element > .shadow.left {
	display: block;
	top: 3px;
	left: 0;
	height: 100%;
	width: 3px;
	box-shadow: #DDD 6px 0 6px -6px inset;
}
.monaco-scrollable-element > .shadow.top-left-corner {
	display: block;
	top: 0;
	left: 0;
	height: 3px;
	width: 3px;
}
.monaco-scrollable-element > .shadow.top.left {
	box-shadow: #DDD 6px 6px 6px -6px inset;
}

/* ---------- Default Style ---------- */

:host-context(.vs) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(100, 100, 100, .4);
}
:host-context(.vs-dark) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(121, 121, 121, .4);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(111, 195, 223, .6);
}

.monaco-scrollable-element > .scrollbar > .slider:hover {
	background: rgba(100, 100, 100, .7);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider:hover {
	background: rgba(111, 195, 223, .8);
}

.monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(0, 0, 0, .6);
}
:host-context(.vs-dark) .monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(191, 191, 191, .4);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(111, 195, 223, 1);
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.top {
	box-shadow: none;
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.left {
	box-shadow: #000 6px 0 6px -6px inset;
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.top.left {
	box-shadow: #000 6px 6px 6px -6px inset;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.top {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.left {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.top.left {
	box-shadow: none;
}
`;function Or(n,e){const t=Object.create(null);for(let i in e){const s=e[i];s&&(t[i]=Ia(s,n))}return t}function oM(n,e,t){function i(){const s=Or(n.getColorTheme(),e);typeof t=="function"?t(s):t.style(s)}return i(),n.onDidColorThemeChange(i)}function tve(n,e,t){return oM(e,{badgeBackground:(t==null?void 0:t.badgeBackground)||um,badgeForeground:(t==null?void 0:t.badgeForeground)||dm,badgeBorder:ni},n)}function _u(n,e,t){return oM(e,Object.assign(Object.assign({},X1),t||{}),n)}const X1={listFocusBackground:Jfe,listFocusForeground:ege,listFocusOutline:tge,listActiveSelectionBackground:Jl,listActiveSelectionForeground:ec,listActiveSelectionIconForeground:zv,listFocusAndSelectionBackground:Jl,listFocusAndSelectionForeground:ec,listInactiveSelectionBackground:ige,listInactiveSelectionIconForeground:sge,listInactiveSelectionForeground:nge,listInactiveFocusBackground:rge,listInactiveFocusOutline:oge,listHoverBackground:age,listHoverForeground:lge,listDropBackground:cge,listSelectionOutline:Bn,listHoverOutline:Bn,listFilterWidgetBackground:hge,listFilterWidgetOutline:uge,listFilterWidgetNoMatchesOutline:dge,listMatchesShadow:Gf,treeIndentGuidesStroke:fge,tableColumnsBorder:gge},ive={shadowColor:Gf,borderColor:pge,foregroundColor:mge,backgroundColor:_ge,selectionForegroundColor:bge,selectionBackgroundColor:vge,selectionBorderColor:wge,separatorColor:Cge};function nve(n,e,t){return oM(e,Object.assign(Object.assign({},ive),t),n)}class sve{constructor(e,t,i,s,r){this.contextViewService=e,this.telemetryService=t,this.notificationService=i,this.keybindingService=s,this.themeService=r,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let i,s=K9(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:r=>{let o=e.getMenuClassName?e.getMenuClassName():"";o&&(r.className+=" "+o),this.options.blockMouse&&(this.block=r.appendChild(J(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",K(this.block,de.MOUSE_DOWN,c=>c.stopPropagation()));const a=new ee,l=e.actionRunner||new Uf;return l.onBeforeRun(this.onActionRun,this,a),l.onDidRun(this.onDidActionRun,this,a),i=new Dh(r,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:c=>this.keybindingService.lookupKeybinding(c.id)}),a.add(nve(i,this.themeService)),i.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),i.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a),a.add(K(window,de.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(K(window,de.MOUSE_DOWN,c=>{if(c.defaultPrevented)return;let h=new Vs(c),u=h.target;if(!h.rightButton){for(;u;){if(u===r)return;u=u.parentElement}this.contextViewService.hideContextView(!0)}})),jl(a,i)},focus:()=>{i&&i.focus(!!e.autoSelectFirstItem)},onHide:r=>{e.onHide&&e.onHide(!!r),this.block&&(this.block.remove(),this.block=null),this.focusToReturn&&this.focusToReturn.focus()}},s,!!s)}onActionRun(e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(e){e.error&&!Rc(e.error)&&this.notificationService.error(e.error)}}var rve=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},bp=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let kI=class extends q{constructor(e,t,i,s,r){super(),this.contextMenuHandler=new sve(i,e,t,s,r)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){this.contextMenuHandler.showContextMenu(e),bh.getInstance().resetKeyStatus()}};kI=rve([bp(0,Ng),bp(1,en),bp(2,Wu),bp(3,ri),bp(4,At)],kI);const Q1=Xe("layoutService");var ove=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ave=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let EI=class extends q{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=q.None,this.container=e.container,this.contextView=this._register(new tg(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,i){t?t!==this.container&&(this.container=t,this.setContainer(t,i?3:2)):this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.contextView.show(e);const s=Ze(()=>{this.currentViewDisposable===s&&this.hideContextView()});return this.currentViewDisposable=s,s}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}};EI=ove([ave(0,Q1)],EI);const Yz=Xe("dialogService");class lve{constructor(e){this.incoming=new Map,this.outgoing=new Map,this.data=e}}class cve{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(let t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),s=this.lookupOrInsertNode(t);i.outgoing.set(this._hashFn(t),s),s.incoming.set(this._hashFn(e),i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(let i of this._nodes.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new lve(e),this._nodes.set(t,i)),i}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[t,i]of this._nodes)e.push(`${t}, (incoming)[${[...i.incoming.keys()].join(", ")}], (outgoing)[${[...i.outgoing.keys()].join(",")}]`);return e.join(`
`)}findCycleSlow(){for(let[e,t]of this._nodes){const i=new Set([e]),s=this._findCycle(t,i);if(s)return s}}_findCycle(e,t){for(let[i,s]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const r=this._findCycle(s,t);if(r)return r;t.delete(i)}}}class r3 extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class YC{constructor(e=new I_,t=!1,i){this._activeInstantiations=new Set,this._services=e,this._strict=t,this._parent=i,this._services.set(pt,this)}createChild(e){return new YC(e,this._strict,this)}invokeFunction(e,...t){let i=gr.traceInvocation(e),s=!1;try{return e({get:(o,a)=>{if(s)throw Moe("service accessor is only valid during the invocation of its target method");const l=this._getOrCreateServiceInstance(o,i);if(!l&&a!==rae)throw new Error(`[invokeFunction] unknown service '${o}'`);return l}},...t)}finally{s=!0,i.stop()}}createInstance(e,...t){let i,s;return e instanceof Nl?(i=gr.traceCreation(e.ctor),s=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=gr.traceCreation(e),s=this._createInstance(e,t,i)),i.stop(),s}_createInstance(e,t=[],i){let s=Ur.getServiceDependencies(e).sort((a,l)=>a.index-l.index),r=[];for(const a of s){let l=this._getOrCreateServiceInstance(a.id,i);if(!l&&this._strict&&!a.optional)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`);r.push(l)}let o=s.length>0?s[0].index:t.length;if(t.length!==o){console.warn(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);let a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return new e(...[...t,...r])}_setServiceInstance(e,t){if(this._services.get(e)instanceof Nl)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){let i=this._getServiceInstanceOrDescriptor(e);return i instanceof Nl?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){const s=new cve(a=>a.id.toString());let r=0;const o=[{id:e,desc:t,_trace:i}];for(;o.length;){const a=o.pop();if(s.lookupOrInsertNode(a),r++>1e3)throw new r3(s);for(let l of Ur.getServiceDependencies(a.desc.ctor)){let c=this._getServiceInstanceOrDescriptor(l.id);if(!c&&!l.optional&&console.warn(`[createInstance] ${e} depends on ${l.id} which is NOT registered.`),c instanceof Nl){const h={id:l.id,desc:c,_trace:a._trace.branch(l.id,!0)};s.insertEdge(a,h),o.push(h)}}}for(;;){const a=s.roots();if(a.length===0){if(!s.isEmpty())throw new r3(s);break}for(const{data:l}of a){if(this._getServiceInstanceOrDescriptor(l.id)instanceof Nl){const h=this._createServiceInstanceWithOwner(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this._setServiceInstance(l.id,h)}s.removeNode(l)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],s,r){if(this._services.get(e)instanceof Nl)return this._createServiceInstance(t,i,s,r);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,s,r);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],i,s){if(i){const r=new Yp(()=>this._createInstance(e,t,s));return new Proxy(Object.create(null),{get(o,a){if(a in o)return o[a];let l=r.value,c=l[a];return typeof c!="function"||(c=c.bind(l),o[a]=c),c},set(o,a,l){return r.value[a]=l,!0}})}else return this._createInstance(e,t,s)}}class gr{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return gr._None}static traceCreation(e){return gr._None}branch(e,t){let i=new gr(2,e.toString());return this._dep.push([e,t,i]),i}stop(){let e=Date.now()-this._start;gr._totals+=e;let t=!1;function i(r,o){let a=[],l=new Array(r+1).join("	");for(const[c,h,u]of o._dep)if(h&&u){t=!0,a.push(`${l}CREATES -> ${c}`);let d=i(r+1,u);d&&a.push(d)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}let s=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${gr._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(s.join(`
`))}}gr._None=new class extends gr{constructor(){super(-1,null)}stop(){}branch(){return this}};gr._totals=0;const $0=Xe("labelService");class hve{constructor(e){this.spliceables=e}splice(e,t,i){this.spliceables.forEach(s=>s.splice(e,t,i))}}class Gc extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function o3(n,e){const t=[];for(let i of e){if(n.start>=i.range.end)continue;if(n.end<i.range.start)break;const s=qi.intersect(n,i.range);qi.isEmpty(s)||t.push({range:s,size:i.size})}return t}function II({start:n,end:e},t){return{start:n+t,end:e+t}}function uve(n){const e=[];let t=null;for(let i of n){const s=i.range.start,r=i.range.end,o=i.size;if(t&&o===t.size){t.range.end=r;continue}t={range:{start:s,end:r},size:o},e.push(t)}return e}function dve(...n){return uve(n.reduce((e,t)=>e.concat(t),[]))}class a3{constructor(){this.groups=[],this._size=0}splice(e,t,i=[]){const s=i.length-t,r=o3({start:0,end:e},this.groups),o=o3({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:II(l.range,s),size:l.size})),a=i.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=dve(r,a,o),this._size=this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,i=0;for(let s of this.groups){const r=s.range.end-s.range.start,o=i+r*s.size;if(e<o)return t+Math.floor((e-i)/s.size);t+=r,i=o}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,i=0;for(let s of this.groups){const r=s.range.end-s.range.start,o=i+r;if(e<o)return t+(e-i)*s.size;t+=r*s.size,i=o}return-1}}function fve(n){try{n.parentElement&&n.parentElement.removeChild(n)}catch{}}class gve{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){const i=J(".monaco-list-row"),r=this.getRenderer(e).renderTemplate(i);t={domNode:i,templateId:e,templateData:r}}return t}release(e){!e||this.releaseRow(e)}releaseRow(e){const{domNode:t,templateId:i}=e;t&&(t.classList.remove("scrolling"),fve(t)),this.getTemplateCache(i).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const i of e)this.getRenderer(t).disposeTemplate(i.templateData),i.templateData=null}),this.cache.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var $u=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const So={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(n){return[n]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class U0{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class pve{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class mve{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const i=e.files.item(t);i&&(i.size||i.type)&&this.files.push(i)}}}getData(){return{types:this.types,files:this.files}}}function _ve(n,e){return Array.isArray(n)&&Array.isArray(e)?ta(n,e):n===e}class bve{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,i,s)=>s,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,i)=>i+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}class mo{constructor(e,t,i,s=So){if(this.virtualDelegate=t,this.domId=`list_id_${++mo.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Dg(50),this.splicing=!1,this.dragOverAnimationStopDisposable=q.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=q.None,this.onDragLeaveTimeout=q.None,this.disposables=new ee,this._onDidChangeContentHeight=new R,this._horizontalScrolling=!1,s.horizontalScrolling&&s.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new a3;for(const o of i)this.renderers.set(o.templateId,o);this.cache=this.disposables.add(new gve(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof s.mouseSupport=="boolean"?s.mouseSupport:!0),this._horizontalScrolling=yo(s,o=>o.horizontalScrolling,So.horizontalScrolling),this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=typeof s.additionalScrollHeight=="undefined"?0:s.additionalScrollHeight,this.accessibilityProvider=new bve(s.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",yo(s,o=>o.transformOptimization,So.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(st.addTarget(this.rowsContainer)),this.scrollable=new j1(yo(s,o=>o.smoothScrolling,!1)?125:0,o=>na(o)),this.scrollableElement=this.disposables.add(new B2(this.rowsContainer,{alwaysConsumeMouseWheel:yo(s,o=>o.alwaysConsumeMouseWheel,So.alwaysConsumeMouseWheel),horizontal:1,vertical:yo(s,o=>o.verticalScrollMode,So.verticalScrollMode),useShadows:yo(s,o=>o.useShadows,So.useShadows),mouseWheelScrollSensitivity:s.mouseWheelScrollSensitivity,fastScrollSensitivity:s.fastScrollSensitivity},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(K(this.rowsContainer,bt.Change,o=>this.onTouchChange(o))),this.disposables.add(K(this.scrollableElement.getDomNode(),"scroll",o=>o.target.scrollTop=0)),this.disposables.add(K(this.domNode,"dragover",o=>this.onDragOver(this.toDragEvent(o)))),this.disposables.add(K(this.domNode,"drop",o=>this.onDrop(this.toDragEvent(o)))),this.disposables.add(K(this.domNode,"dragleave",o=>this.onDragLeave(this.toDragEvent(o)))),this.disposables.add(K(this.domNode,"dragend",o=>this.onDragEnd(o))),this.setRowLineHeight=yo(s,o=>o.setRowLineHeight,So.setRowLineHeight),this.setRowHeight=yo(s,o=>o.setRowHeight,So.setRowHeight),this.supportDynamicHeights=yo(s,o=>o.supportDynamicHeights,So.supportDynamicHeights),this.dnd=yo(s,o=>o.dnd,So.dnd),this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:_x(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling),e.mouseWheelScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({fastScrollSensitivity:e.fastScrollSensitivity})}splice(e,t,i=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,i=[]){const s=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r={start:e,end:e+t},o=qi.intersect(s,r),a=new Map;for(let D=o.start;D<o.end;D++){const S=this.items[D];if(S.dragStartDisposable.dispose(),S.row){let x=a.get(S.templateId);x||(x=[],a.set(S.templateId,x));const k=this.renderers.get(S.templateId);k&&k.disposeElement&&k.disposeElement(S.element,D,S.row.templateData,S.size),x.push(S.row)}S.row=null}const l={start:e+t,end:this.items.length},c=qi.intersect(l,s),h=qi.relativeComplement(l,s),u=i.map(D=>({id:String(this.itemId++),element:D,templateId:this.virtualDelegate.getTemplateId(D),size:this.virtualDelegate.getHeight(D),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(D),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:q.None}));let d;e===0&&t>=this.items.length?(this.rangeMap=new a3,this.rangeMap.splice(0,0,u),d=this.items,this.items=u):(this.rangeMap.splice(e,t,u),d=this.items.splice(e,t,...u));const f=i.length-t,g=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),p=II(c,f),_=qi.intersect(g,p);for(let D=_.start;D<_.end;D++)this.updateItemInDOM(this.items[D],D);const v=qi.relativeComplement(p,g);for(const D of v)for(let S=D.start;S<D.end;S++)this.removeItemFromDOM(S);const b=h.map(D=>II(D,f)),C=[{start:e,end:e+i.length},...b].map(D=>qi.intersect(g,D)),y=this.getNextToLastElement(C);for(const D of C)for(let S=D.start;S<D.end;S++){const x=this.items[S],k=a.get(x.templateId),F=k==null?void 0:k.pop();this.insertItemInDOM(S,y,F)}for(const D of a.values())for(const S of D)this.cache.release(S);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),d.map(D=>D.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=na(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width!="undefined"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10})}rerender(){if(!!this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let i={height:typeof e=="number"?e:Tae(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),typeof t!="undefined"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:_x(this.domNode)})}render(e,t,i,s,r,o=!1){const a=this.getRenderRange(t,i),l=qi.relativeComplement(a,e),c=qi.relativeComplement(e,a),h=this.getNextToLastElement(l);if(o){const u=qi.intersect(e,a);for(let d=u.start;d<u.end;d++)this.updateItemInDOM(this.items[d],d)}for(const u of l)for(let d=u.start;d<u.end;d++)this.insertItemInDOM(d,h);for(const u of c)for(let d=u.start;d<u.end;d++)this.removeItemFromDOM(d);s!==void 0&&(this.rowsContainer.style.left=`-${s}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&r!==void 0&&(this.rowsContainer.style.width=`${Math.max(r,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=i}insertItemInDOM(e,t,i){const s=this.items[e];s.row||(s.row=i!=null?i:this.cache.alloc(s.templateId));const r=this.accessibilityProvider.getRole(s.element)||"listitem";s.row.domNode.setAttribute("role",r);const o=this.accessibilityProvider.isChecked(s.element);typeof o!="undefined"&&s.row.domNode.setAttribute("aria-checked",String(!!o)),s.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(s.row.domNode,t):this.rowsContainer.appendChild(s.row.domNode)),this.updateItemInDOM(s,e);const a=this.renderers.get(s.templateId);if(!a)throw new Error(`No renderer found for template id ${s.templateId}`);a&&a.renderElement(s.element,e,s.row.templateData,s.size);const l=this.dnd.getDragURI(s.element);s.dragStartDisposable.dispose(),s.row.domNode.draggable=!!l,l&&(s.dragStartDisposable=K(s.row.domNode,"dragstart",c=>this.onDragStart(s.element,l,c))),this.horizontalScrolling&&(this.measureItemWidth(s),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=On?"-moz-fit-content":"fit-content",e.width=_x(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.row){const i=this.renderers.get(t.templateId);i&&i.disposeElement&&i.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return ue.map(this.disposables.add(new ft(this.domNode,"click")).event,e=>this.toMouseEvent(e))}get onMouseDblClick(){return ue.map(this.disposables.add(new ft(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e))}get onMouseMiddleClick(){return ue.filter(ue.map(this.disposables.add(new ft(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e)),e=>e.browserEvent.button===1)}get onMouseDown(){return ue.map(this.disposables.add(new ft(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e))}get onContextMenu(){return ue.any(ue.map(this.disposables.add(new ft(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e)),ue.map(this.disposables.add(new ft(this.domNode,bt.Contextmenu)).event,e=>this.toGestureEvent(e)))}get onTouchStart(){return ue.map(this.disposables.add(new ft(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e))}get onTap(){return ue.map(this.disposables.add(new ft(this.rowsContainer,bt.Tap)).event,e=>this.toGestureEvent(e))}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t=="undefined"?void 0:this.items[t],s=i&&i.element;return{browserEvent:e,index:t,element:s}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t=="undefined"?void 0:this.items[t],s=i&&i.element;return{browserEvent:e,index:t,element:s}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),i=typeof t=="undefined"?void 0:this.items[t],s=i&&i.element;return{browserEvent:e,index:t,element:s}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t=="undefined"?void 0:this.items[t],s=i&&i.element;return{browserEvent:e,index:t,element:s}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,i){if(!i.dataTransfer)return;const s=this.dnd.getDragElements(e);if(i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(yz.TEXT,t),i.dataTransfer.setDragImage){let r;this.dnd.getDragLabel&&(r=this.dnd.getDragLabel(s,i)),typeof r=="undefined"&&(r=String(s.length));const o=J(".monaco-drag-image");o.textContent=r,document.body.appendChild(o),i.dataTransfer.setDragImage(o,-10,-10),setTimeout(()=>document.body.removeChild(o),0)}this.currentDragData=new U0(s),Ta.CurrentDragAndDropData=new pve(s),this.dnd.onDragStart&&this.dnd.onDragStart(this.currentDragData,i)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),Ta.CurrentDragAndDropData&&Ta.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(Ta.CurrentDragAndDropData)this.currentDragData=Ta.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new mve}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect===0?"copy":"move";let i;if(typeof t!="boolean"&&t.feedback?i=t.feedback:typeof e.index=="undefined"?i=[-1]:i=[e.index],i=oC(i).filter(s=>s>=-1&&s<this.length).sort((s,r)=>s-r),i=i[0]===-1?[-1]:i,_ve(this.currentDragFeedback,i))return!0;if(this.currentDragFeedback=i,this.currentDragFeedbackDisposable.dispose(),i[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=Ze(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(const s of i){const r=this.items[s];r.dropTarget=!0,r.row&&r.row.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=Ze(()=>{for(const s of i){const r=this.items[s];r.dropTarget=!1,r.row&&r.row.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var t,i;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=Ff(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((i=(t=this.dnd).onDragLeave)===null||i===void 0||i.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,Ta.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,Ta.CurrentDragAndDropData=void 0,this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=q.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=$9(this.domNode).top;this.dragOverAnimationDisposable=Bae(this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=Ff(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,i=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-i))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let i=e;for(;i instanceof HTMLElement&&i!==this.rowsContainer&&t.contains(i);){const s=i.getAttribute("data-index");if(s){const r=Number(s);if(!isNaN(r))return r}i=i.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,i){const s=this.getRenderRange(e,t);let r,o;e===this.elementTop(s.start)?(r=s.start,o=0):s.end-s.start>1&&(r=s.start+1,o=this.elementTop(r)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let h=l.start;h<l.end;h++){const u=this.probeDynamicHeight(h);u!==0&&this.rangeMap.splice(h,1,[this.items[h]]),a+=u,c=c||u!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const h=qi.relativeComplement(s,l);for(const d of h)for(let f=d.start;f<d.end;f++)this.items[f].row&&this.removeItemFromDOM(f);const u=qi.relativeComplement(l,s);for(const d of u)for(let f=d.start;f<d.end;f++){const g=f+1,p=g<this.items.length?this.items[g].row:null,_=p?p.domNode:null;this.insertItemInDOM(f,_)}for(let d=l.start;d<l.end;d++)this.items[d].row&&this.updateItemInDOM(this.items[d],d);if(typeof r=="number"){const d=this.scrollable.getFutureScrollPosition().scrollTop-e,f=this.elementTop(r)-o+d;this.setScrollTop(f,i)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const o=this.virtualDelegate.getDynamicHeight(t.element);if(o!==null){const a=t.size;return t.size=o,t.lastDynamicHeightWidth=this.renderWidth,o-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||!!this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const i=t.size;if(!this.setRowHeight&&t.row){let o=t.row.domNode.offsetHeight;return t.size=o,t.lastDynamicHeightWidth=this.renderWidth,o-i}const s=this.cache.alloc(t.templateId);s.domNode.style.height="",this.rowsContainer.appendChild(s.domNode);const r=this.renderers.get(t.templateId);return r&&(r.renderElement(t.element,e,s.templateData,void 0),r.disposeElement&&r.disposeElement(t.element,e,s.templateData,void 0)),t.size=s.domNode.offsetHeight,this.virtualDelegate.setDynamicHeight&&this.virtualDelegate.setDynamicHeight(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(s.domNode),this.cache.release(s),t.size-i}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const i=this.items[t.end];return!i||!i.row?null:i.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){if(this.items){for(const e of this.items)if(e.row){const t=this.renderers.get(e.row.templateId);t&&(t.disposeElement&&t.disposeElement(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),He(this.disposables)}}mo.InstanceCount=0;$u([ui],mo.prototype,"onMouseClick",null);$u([ui],mo.prototype,"onMouseDblClick",null);$u([ui],mo.prototype,"onMouseMiddleClick",null);$u([ui],mo.prototype,"onMouseDown",null);$u([ui],mo.prototype,"onContextMenu",null);$u([ui],mo.prototype,"onTouchStart",null);$u([ui],mo.prototype,"onTap",null);var Uu=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},l3=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class vve{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.trait}`}renderTemplate(e){return e}renderElement(e,t,i){const s=this.renderedElements.findIndex(r=>r.templateData===i);if(s>=0){const r=this.renderedElements[s];this.trait.unrender(i),r.index=t}else{const r={index:t,templateData:i};this.renderedElements.push(r)}this.trait.renderIndex(t,i)}splice(e,t,i){const s=[];for(const r of this.renderedElements)r.index<e?s.push(r):r.index>=e+t&&s.push({index:r.index+i-t,templateData:r.templateData});this.renderedElements=s}renderIndexes(e){for(const{index:t,templateData:i}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,i)}disposeTemplate(e){const t=this.renderedElements.findIndex(i=>i.templateData===e);t<0||this.renderedElements.splice(t,1)}}class ZC{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new R,this.onChange=this._onChange.event}get trait(){return this._trait}get renderer(){return new vve(this)}splice(e,t,i){var s;t=Math.max(0,Math.min(t,this.length-e));const r=i.length-t,o=e+t,a=[...this.sortedIndexes.filter(c=>c<e),...i.map((c,h)=>c?h+e:-1).filter(c=>c!==-1),...this.sortedIndexes.filter(c=>c>=o).map(c=>c+r)],l=this.length+r;if(this.sortedIndexes.length>0&&a.length===0&&l>0){const c=(s=this.sortedIndexes.find(h=>h>=e))!==null&&s!==void 0?s:l-1;a.push(Math.min(c,l-1))}this.renderer.splice(e,t,i.length),this._set(a,a),this.length=l}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(h3),t)}_set(e,t,i){const s=this.indexes,r=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const o=TI(r,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:i}),s}get(){return this.indexes}contains(e){return JA(this.sortedIndexes,e,h3)>=0}dispose(){He(this._onChange)}}Uu([ui],ZC.prototype,"renderer",null);class wve extends ZC{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class ED{constructor(e,t,i){this.trait=e,this.view=t,this.identityProvider=i}splice(e,t,i){if(!this.identityProvider)return this.trait.splice(e,t,i.map(()=>!1));const s=this.trait.get().map(o=>this.identityProvider.getId(this.view.element(o)).toString()),r=i.map(o=>s.indexOf(this.identityProvider.getId(o).toString())>-1);this.trait.splice(e,t,r)}}function vc(n){return n.tagName==="INPUT"||n.tagName==="TEXTAREA"}function jd(n){return n.classList.contains("monaco-editor")?!0:n.classList.contains("monaco-list")||!n.parentElement?!1:jd(n.parentElement)}class Zz{constructor(e,t,i){this.list=e,this.view=t,this.disposables=new ee,this.multipleSelectionDisposables=new ee,this.onKeyDown.filter(s=>s.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===9).on(this.onEscape,this,this.disposables),i.multipleSelectionSupport!==!1&&this.onKeyDown.filter(s=>(je?s.metaKey:s.ctrlKey)&&s.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return ue.chain(this.disposables.add(new ft(this.view.domNode,"keydown")).event).filter(e=>!vc(e.target)).map(e=>new Ft(e))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(t=>(je?t.metaKey:t.ctrlKey)&&t.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(mn(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}Uu([ui],Zz.prototype,"onKeyDown",null);var qd;(function(n){n[n.Idle=0]="Idle",n[n.Typing=1]="Typing"})(qd||(qd={}));const Xz=new class{mightProducePrintableCharacter(n){return n.ctrlKey||n.metaKey||n.altKey?!1:n.keyCode>=31&&n.keyCode<=56||n.keyCode>=21&&n.keyCode<=30||n.keyCode>=93&&n.keyCode<=102||n.keyCode>=80&&n.keyCode<=90}};class Cve{constructor(e,t,i,s){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=i,this.delegate=s,this.enabled=!1,this.state=qd.Idle,this.automaticKeyboardNavigation=!0,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new ee,this.disposables=new ee,this.updateOptions(e.options)}updateOptions(e){(typeof e.enableKeyboardNavigation=="undefined"?!0:!!e.enableKeyboardNavigation)?this.enable():this.disable(),typeof e.automaticKeyboardNavigation!="undefined"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation)}enable(){if(this.enabled)return;const e=ue.chain(this.enabledDisposables.add(new ft(this.view.domNode,"keydown")).event).filter(s=>!vc(s.target)).filter(()=>this.automaticKeyboardNavigation||this.triggered).map(s=>new Ft(s)).filter(s=>this.delegate.mightProducePrintableCharacter(s)).forEach(s=>{s.stopPropagation(),s.preventDefault()}).map(s=>s.browserEvent.key).event,t=ue.debounce(e,()=>null,800);ue.reduce(ue.any(e,t),(s,r)=>r===null?null:(s||"")+r)(this.onInput,this,this.enabledDisposables),t(this.onClear,this,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){!this.enabled||(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const i=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));i&&Pu(i)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=qd.Idle,this.triggered=!1;return}const t=this.list.getFocus(),i=t.length>0?t[0]:0,s=this.state===qd.Idle?1:0;this.state=qd.Typing;for(let r=0;r<this.list.length;r++){const o=(i+r+s)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),l=a&&a.toString();if(typeof l=="undefined"||eM(e,l)){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class yve{constructor(e,t){this.list=e,this.view=t,this.disposables=new ee,ue.chain(this.disposables.add(new ft(t.domNode,"keydown")).event).filter(s=>!vc(s.target)).map(s=>new Ft(s)).filter(s=>s.keyCode===2&&!s.ctrlKey&&!s.metaKey&&!s.shiftKey&&!s.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const i=this.view.domElement(t[0]);if(!i)return;const s=i.querySelector("[tabIndex]");if(!s||!(s instanceof HTMLElement)||s.tabIndex===-1)return;const r=window.getComputedStyle(s);r.visibility==="hidden"||r.display==="none"||(e.preventDefault(),e.stopPropagation(),s.focus())}dispose(){this.disposables.dispose()}}function Qz(n){return je?n.browserEvent.metaKey:n.browserEvent.ctrlKey}function Jz(n){return n.browserEvent.shiftKey}function Sve(n){return n instanceof MouseEvent&&n.button===2}const c3={isSelectionSingleChangeEvent:Qz,isSelectionRangeChangeEvent:Jz};class eH{constructor(e){this.list=e,this.disposables=new ee,this._onPointer=new R,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||c3),this.mouseSupport=typeof e.options.mouseSupport=="undefined"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(st.addTarget(e.getHTMLElement()))),ue.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||c3))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){jd(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(jd(e.browserEvent.target))return;const t=typeof e.index=="undefined"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||vc(e.browserEvent.target)||jd(e.browserEvent.target))return;const t=e.index;if(typeof t=="undefined"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(e))return this.changeSelection(e);if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),Sve(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(vc(e.browserEvent.target)||jd(e.browserEvent.target)||this.isSelectionChangeEvent(e))return;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof i=="undefined"){const h=this.list.getFocus()[0];i=h!=null?h:t,this.list.setAnchor(i)}const s=Math.min(i,t),r=Math.max(i,t),o=mn(s,r+1),a=this.list.getSelection(),l=Lve(TI(a,[i]),i);if(l.length===0)return;const c=TI(o,kve(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const s=this.list.getSelection(),r=s.filter(o=>o!==t);this.list.setFocus([t]),this.list.setAnchor(t),s.length===r.length?this.list.setSelection([...r,t],e.browserEvent):this.list.setSelection(r,e.browserEvent)}}dispose(){this.disposables.dispose()}}class tH{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,i=[];e.listBackground&&(e.listBackground.isOpaque()?i.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`):je||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&i.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(i.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&i.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&i.push(`.monaco-list${t}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&i.push(`.monaco-list${t} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&i.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&i.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&i.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&i.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.listFilterWidgetBackground&&i.push(`.monaco-list-type-filter { background-color: ${e.listFilterWidgetBackground} }`),e.listFilterWidgetOutline&&i.push(`.monaco-list-type-filter { border: 1px solid ${e.listFilterWidgetOutline}; }`),e.listFilterWidgetNoMatchesOutline&&i.push(`.monaco-list-type-filter.no-matches { border: 1px solid ${e.listFilterWidgetNoMatchesOutline}; }`),e.listMatchesShadow&&i.push(`.monaco-list-type-filter { box-shadow: 1px 1px 1px ${e.listMatchesShadow}; }`),e.tableColumnsBorder&&i.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
			}`),this.styleElement.textContent=i.join(`
`)}}const xve={listFocusBackground:V.fromHex("#7FB0D0"),listActiveSelectionBackground:V.fromHex("#0E639C"),listActiveSelectionForeground:V.fromHex("#FFFFFF"),listActiveSelectionIconForeground:V.fromHex("#FFFFFF"),listFocusAndSelectionBackground:V.fromHex("#094771"),listFocusAndSelectionForeground:V.fromHex("#FFFFFF"),listInactiveSelectionBackground:V.fromHex("#3F3F46"),listInactiveSelectionIconForeground:V.fromHex("#FFFFFF"),listHoverBackground:V.fromHex("#2A2D2E"),listDropBackground:V.fromHex("#383B3D"),treeIndentGuidesStroke:V.fromHex("#a9a9a9"),tableColumnsBorder:V.fromHex("#cccccc").transparent(.2)},Dve={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function Lve(n,e){const t=n.indexOf(e);if(t===-1)return[];const i=[];let s=t-1;for(;s>=0&&n[s]===e-(t-s);)i.push(n[s--]);for(i.reverse(),s=t;s<n.length&&n[s]===e+(s-t);)i.push(n[s++]);return i}function TI(n,e){const t=[];let i=0,s=0;for(;i<n.length||s<e.length;)if(i>=n.length)t.push(e[s++]);else if(s>=e.length)t.push(n[i++]);else if(n[i]===e[s]){t.push(n[i]),i++,s++;continue}else n[i]<e[s]?t.push(n[i++]):t.push(e[s++]);return t}function kve(n,e){const t=[];let i=0,s=0;for(;i<n.length||s<e.length;)if(i>=n.length)t.push(e[s++]);else if(s>=e.length)t.push(n[i++]);else if(n[i]===e[s]){i++,s++;continue}else n[i]<e[s]?t.push(n[i++]):s++;return t}const h3=(n,e)=>n-e;class Eve{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,i,s){let r=0;for(const o of this.renderers)o.renderElement(e,t,i[r++],s)}disposeElement(e,t,i,s){let r=0;for(const o of this.renderers)o.disposeElement&&o.disposeElement(e,t,i[r],s),r+=1}disposeTemplate(e){let t=0;for(const i of this.renderers)i.disposeTemplate(e[t++])}}class Ive{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,i){const s=this.accessibilityProvider.getAriaLabel(e);s?i.setAttribute("aria-label",s):i.removeAttribute("aria-label");const r=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof r=="number"?i.setAttribute("aria-level",`${r}`):i.removeAttribute("aria-level")}disposeTemplate(e){}}class Tve{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(e,t)}onDragOver(e,t,i,s){return this.dnd.onDragOver(e,t,i,s)}onDragLeave(e,t,i,s){var r,o;(o=(r=this.dnd).onDragLeave)===null||o===void 0||o.call(r,e,t,i,s)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}drop(e,t,i,s){this.dnd.drop(e,t,i,s)}}class ga{constructor(e,t,i,s,r=Dve){var o;this.user=e,this._options=r,this.focus=new ZC("focused"),this.anchor=new ZC("anchor"),this.eventBufferer=new DA,this._ariaLabel="",this.disposables=new ee,this._onDidDispose=new R,this.onDidDispose=this._onDidDispose.event;const a=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(o=this._options.accessibilityProvider)===null||o===void 0?void 0:o.getWidgetRole():"list";this.selection=new wve(a!=="listbox"),po(r,xve,!1);const l=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=r.accessibilityProvider,this.accessibilityProvider&&(l.push(new Ive(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant&&this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant,this,this.disposables)),s=s.map(h=>new Eve(h.templateId,[...l,h]));const c=Object.assign(Object.assign({},r),{dnd:r.dnd&&new Tve(this,r.dnd)});if(this.view=new mo(t,i,s,c),this.view.domNode.setAttribute("role",a),r.styleController)this.styleController=r.styleController(this.view.domId);else{const h=$s(this.view.domNode);this.styleController=new tH(h,this.view.domId)}if(this.spliceable=new hve([new ED(this.focus,this.view,r.identityProvider),new ED(this.selection,this.view,r.identityProvider),new ED(this.anchor,this.view,r.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new yve(this,this.view)),(typeof r.keyboardSupport!="boolean"||r.keyboardSupport)&&(this.keyboardController=new Zz(this,this.view,r),this.disposables.add(this.keyboardController)),r.keyboardNavigationLabelProvider){const h=r.keyboardNavigationDelegate||Xz;this.typeLabelController=new Cve(this,this.view,r.keyboardNavigationLabelProvider,h),this.disposables.add(this.typeLabelController)}this.mouseController=this.createMouseController(r),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return ue.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e))}get onDidChangeSelection(){return ue.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e))}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=ue.chain(this.disposables.add(new ft(this.view.domNode,"keydown")).event).map(r=>new Ft(r)).filter(r=>e=r.keyCode===58||r.shiftKey&&r.keyCode===68).map(B4).filter(()=>!1).event,i=ue.chain(this.disposables.add(new ft(this.view.domNode,"keyup")).event).forEach(()=>e=!1).map(r=>new Ft(r)).filter(r=>r.keyCode===58||r.shiftKey&&r.keyCode===68).map(B4).map(({browserEvent:r})=>{const o=this.getFocus(),a=o.length?o[0]:void 0,l=typeof a!="undefined"?this.view.element(a):void 0,c=typeof a!="undefined"?this.view.domElement(a):this.view.domNode;return{index:a,element:l,anchor:c,browserEvent:r}}).event,s=ue.chain(this.view.onContextMenu).filter(r=>!e).map(({element:r,index:o,browserEvent:a})=>({element:r,index:o,anchor:{x:a.pageX+1,y:a.pageY},browserEvent:a})).event;return ue.any(t,i,s)}get onKeyDown(){return this.disposables.add(new ft(this.view.domNode,"keydown")).event}get onDidFocus(){return ue.signal(this.disposables.add(new ft(this.view.domNode,"focus",!0)).event)}createMouseController(e){return new eH(this)}updateOptions(e={}){var t;this._options=Object.assign(Object.assign({},this._options),e),this.typeLabelController&&this.typeLabelController.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(t=this.keyboardController)===null||t===void 0||t.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,i=[]){if(e<0||e>this.view.length)throw new Gc(this.user,`Invalid start index: ${e}`);if(t<0)throw new Gc(this.user,`Invalid delete count: ${t}`);t===0&&i.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,i))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const i of e)if(i<0||i>=this.length)throw new Gc(this.user,`Invalid index ${i}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e=="undefined"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new Gc(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return WE(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e=="undefined"?void 0:this.element(e)}setFocus(e,t){for(const i of e)if(i<0||i>=this.length)throw new Gc(this.user,`Invalid index ${i}`);this.focus.set(e,t)}focusNext(e=1,t=!1,i,s){if(this.length===0)return;const r=this.focus.get(),o=this.findNextIndex(r.length>0?r[0]+e:0,t,s);o>-1&&this.setFocus([o],i)}focusPrevious(e=1,t=!1,i,s){if(this.length===0)return;const r=this.focus.get(),o=this.findPreviousIndex(r.length>0?r[0]-e:0,t,s);o>-1&&this.setFocus([o],i)}focusNextPage(e,t){return l3(this,void 0,void 0,function*(){let i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=i===0?0:i-1;const s=this.view.element(i),r=this.getFocusedElements()[0];if(r!==s){const o=this.findPreviousIndex(i,!1,t);o>-1&&r!==this.view.element(o)?this.setFocus([o],e):this.setFocus([i],e)}else{const o=this.view.getScrollTop();this.view.setScrollTop(o+this.view.renderHeight-this.view.elementHeight(i)),this.view.getScrollTop()!==o&&(this.setFocus([]),yield e_(0),yield this.focusNextPage(e,t))}})}focusPreviousPage(e,t){return l3(this,void 0,void 0,function*(){let i;const s=this.view.getScrollTop();s===0?i=this.view.indexAt(s):i=this.view.indexAfter(s-1);const r=this.view.element(i),o=this.getFocusedElements()[0];if(o!==r){const a=this.findNextIndex(i,!1,t);a>-1&&o!==this.view.element(a)?this.setFocus([a],e):this.setFocus([i],e)}else{const a=s;this.view.setScrollTop(s-this.view.renderHeight),this.view.getScrollTop()!==a&&(this.setFocus([]),yield e_(0),yield this.focusPreviousPage(e,t))}})}focusLast(e,t){if(this.length===0)return;const i=this.findPreviousIndex(this.length-1,!1,t);i>-1&&this.setFocus([i],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,i){if(this.length===0)return;const s=this.findNextIndex(e,!1,i);s>-1&&this.setFocus([s],t)}findNextIndex(e,t=!1,i){for(let s=0;s<this.length;s++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!i||i(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,i){for(let s=0;s<this.length;s++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!i||i(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new Gc(this.user,`Invalid index ${e}`);const i=this.view.getScrollTop(),s=this.view.elementTop(e),r=this.view.elementHeight(e);if(au(t)){const o=r-this.view.renderHeight;this.view.setScrollTop(o*lr(t,0,1)+s)}else{const o=s+r,a=i+this.view.renderHeight;s<i&&o>=a||(s<i||o>=a&&r>=this.view.renderHeight?this.view.setScrollTop(s):o>=a&&this.view.setScrollTop(o-this.view.renderHeight))}}getRelativeTop(e){if(e<0||e>=this.length)throw new Gc(this.user,`Invalid index ${e}`);const t=this.view.getScrollTop(),i=this.view.elementTop(e),s=this.view.elementHeight(e);if(i<t||i+s>t+this.view.renderHeight)return null;const r=s-this.view.renderHeight;return Math.abs((t-i)/r)}getHTMLElement(){return this.view.domNode}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(i=>this.view.element(i)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let i;!((e=this.accessibilityProvider)===null||e===void 0)&&e.getActiveDescendantId&&(i=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",i||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}Uu([ui],ga.prototype,"onDidChangeFocus",null);Uu([ui],ga.prototype,"onDidChangeSelection",null);Uu([ui],ga.prototype,"onContextMenu",null);Uu([ui],ga.prototype,"onKeyDown",null);Uu([ui],ga.prototype,"onDidFocus",null);class Nve{constructor(e,t){this.renderer=e,this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:q.None}}renderElement(e,t,i,s){if(i.disposable&&i.disposable.dispose(),!i.data)return;const r=this.modelProvider();if(r.isResolved(e))return this.renderer.renderElement(r.get(e),e,i.data,s);const o=new go,a=r.resolve(e,o.token);i.disposable={dispose:()=>o.cancel()},this.renderer.renderPlaceholder(e,i.data),a.then(l=>this.renderer.renderElement(l,e,i.data,s))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class Ave{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function Mve(n,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new Ave(n,e.accessibilityProvider)})}class Rve{constructor(e,t,i,s,r={}){const o=()=>this.model,a=s.map(l=>new Nve(l,o));this.list=new ga(e,t,i,a,Mve(o,r))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return ue.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onPointer(){return ue.map(this.list.onPointer,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onDidChangeSelection(){return ue.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:i})=>({elements:e.map(s=>this._model.get(s)),indexes:t,browserEvent:i}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,mn(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}const Ove={separatorBorder:V.transparent};class iH{constructor(e,t,i,s){this.container=e,this.view=t,this.disposable=s,this._cachedVisibleSize=void 0,typeof i=="number"?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize=="undefined"}setVisible(e,t){e!==this.visible&&(e?(this.size=lr(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){return this.disposable.dispose(),this.view}}class Fve extends iH{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class Pve extends iH{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var Na;(function(n){n[n.Idle=0]="Idle",n[n.Busy=1]="Busy"})(Na||(Na={}));var XC;(function(n){n.Distribute={type:"distribute"};function e(i){return{type:"split",index:i}}n.Split=e;function t(i){return{type:"invisible",cachedVisibleSize:i}}n.Invisible=t})(XC||(XC={}));class nH extends q{constructor(e,t={}){var i,s;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=Na.Idle,this._onDidSashChange=this._register(new R),this.onDidSashChange=this._onDidSashChange.event,this._onDidSashReset=this._register(new R),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.orientation=vn(t.orientation)?0:t.orientation,this.inverseAltBehavior=!!t.inverseAltBehavior,this.proportionalLayout=vn(t.proportionalLayout)?!0:!!t.proportionalLayout,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=Y(this.el,J(".sash-container")),this.viewContainer=J(".split-view-container"),this.scrollable=new j1(125,na),this.scrollableElement=this._register(new B2(this.viewContainer,{vertical:this.orientation===0?(i=t.scrollbarVisibility)!==null&&i!==void 0?i:1:2,horizontal:this.orientation===1?(s=t.scrollbarVisibility)!==null&&s!==void 0?s:1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(r=>{this.viewContainer.scrollTop=r.scrollTop,this.viewContainer.scrollLeft=r.scrollLeft})),Y(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||Ove),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((r,o)=>{const a=vn(r.visible)||r.visible?r.size:{type:"invisible",cachedVisibleSize:r.size},l=r.view;this.doAddView(l,a,o,!0)}),this.contentSize=this.viewItems.reduce((r,o)=>r+o.size,0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}get orthogonalEndSash(){return this._orthogonalEndSash}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,i=this.viewItems.length,s){this.doAddView(e,t,i,s)}layout(e,t){const i=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions)for(let s=0;s<this.viewItems.length;s++){const r=this.viewItems[s];r.size=lr(Math.round(this.proportions[s]*e),r.minimumSize,r.maximumSize)}else{const s=mn(this.viewItems.length),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-i,void 0,r,o)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}onSashStart({sash:e,start:t,alt:i}){for(const a of this.viewItems)a.enabled=!1;const s=this.sashItems.findIndex(a=>a.sash===e),r=jl(K(document.body,"keydown",a=>o(this.sashDragState.current,a.altKey)),K(document.body,"keyup",()=>o(this.sashDragState.current,!1))),o=(a,l)=>{const c=this.viewItems.map(g=>g.size);let h=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(s===this.sashItems.length-1){const p=this.viewItems[s];h=(p.minimumSize-p.size)/2,u=(p.maximumSize-p.size)/2}else{const p=this.viewItems[s+1];h=(p.size-p.maximumSize)/2,u=(p.size-p.minimumSize)/2}let d,f;if(!l){const g=mn(s,-1),p=mn(s+1,this.viewItems.length),_=g.reduce((x,k)=>x+(this.viewItems[k].minimumSize-c[k]),0),v=g.reduce((x,k)=>x+(this.viewItems[k].viewMaximumSize-c[k]),0),b=p.length===0?Number.POSITIVE_INFINITY:p.reduce((x,k)=>x+(c[k]-this.viewItems[k].minimumSize),0),w=p.length===0?Number.NEGATIVE_INFINITY:p.reduce((x,k)=>x+(c[k]-this.viewItems[k].viewMaximumSize),0),C=Math.max(_,w),y=Math.min(b,v),D=this.findFirstSnapIndex(g),S=this.findFirstSnapIndex(p);if(typeof D=="number"){const x=this.viewItems[D],k=Math.floor(x.viewMinimumSize/2);d={index:D,limitDelta:x.visible?C-k:C+k,size:x.size}}if(typeof S=="number"){const x=this.viewItems[S],k=Math.floor(x.viewMinimumSize/2);f={index:S,limitDelta:x.visible?y+k:y-k,size:x.size}}}this.sashDragState={start:a,current:a,index:s,sizes:c,minDelta:h,maxDelta:u,alt:l,snapBefore:d,snapAfter:f,disposable:r}};o(t,i)}onSashChange({current:e}){const{index:t,start:i,sizes:s,alt:r,minDelta:o,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const h=e-i,u=this.resize(t,h,s,void 0,void 0,o,a,l,c);if(r){const d=t===this.sashItems.length-1,f=this.viewItems.map(w=>w.size),g=d?t:t+1,p=this.viewItems[g],_=p.size-p.maximumSize,v=p.size-p.minimumSize,b=d?t-1:t+1;this.resize(b,-u,f,void 0,void 0,_,v)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const i=this.viewItems.indexOf(e);i<0||i>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=lr(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([i],void 0)))}resizeView(e,t){if(this.state!==Na.Idle)throw new Error("Cant modify splitview");if(this.state=Na.Busy,e<0||e>=this.viewItems.length)return;const i=mn(this.viewItems.length).filter(a=>a!==e),s=[...i.filter(a=>this.viewItems[a].priority===1),e],r=i.filter(a=>this.viewItems[a].priority===2),o=this.viewItems[e];t=Math.round(t),t=lr(t,o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=t,this.relayout(s,r),this.state=Na.Idle}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const i=Math.floor(t/e.length);for(const a of e)a.size=lr(i,a.minimumSize,a.maximumSize);const s=mn(this.viewItems.length),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);this.relayout(r,o)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,i=this.viewItems.length,s){if(this.state!==Na.Idle)throw new Error("Cant modify splitview");this.state=Na.Busy;const r=J(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(r):this.viewContainer.insertBefore(r,this.viewContainer.children.item(i));const o=e.onDidChange(d=>this.onViewChange(h,d)),a=Ze(()=>this.viewContainer.removeChild(r)),l=jl(o,a);let c;typeof t=="number"?c=t:t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize;const h=this.orientation===0?new Fve(r,e,c,l):new Pve(r,e,c,l);if(this.viewItems.splice(i,0,h),this.viewItems.length>1){let d={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash};const f=this.orientation===0?new Ki(this.sashContainer,{getHorizontalSashTop:x=>this.getSashPosition(x),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},d),{orientation:1})):new Ki(this.sashContainer,{getVerticalSashLeft:x=>this.getSashPosition(x),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},d),{orientation:0})),g=this.orientation===0?x=>({sash:f,start:x.startY,current:x.currentY,alt:x.altKey}):x=>({sash:f,start:x.startX,current:x.currentX,alt:x.altKey}),_=ue.map(f.onDidStart,g)(this.onSashStart,this),b=ue.map(f.onDidChange,g)(this.onSashChange,this),C=ue.map(f.onDidEnd,()=>this.sashItems.findIndex(x=>x.sash===f))(this.onSashEnd,this),y=f.onDidReset(()=>{const x=this.sashItems.findIndex(H=>H.sash===f),k=mn(x,-1),F=mn(x+1,this.viewItems.length),A=this.findFirstSnapIndex(k),z=this.findFirstSnapIndex(F);typeof A=="number"&&!this.viewItems[A].visible||typeof z=="number"&&!this.viewItems[z].visible||this._onDidSashReset.fire(x)}),D=jl(_,b,C,y,f),S={sash:f,disposable:D};this.sashItems.splice(i-1,0,S)}r.appendChild(e.element);let u;typeof t!="number"&&t.type==="split"&&(u=[t.index]),s||this.relayout([i],u),this.state=Na.Idle,!s&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}relayout(e,t){const i=this.viewItems.reduce((s,r)=>s+r.size,0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,i=this.viewItems.map(h=>h.size),s,r,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const h=mn(e,-1),u=mn(e+1,this.viewItems.length);if(r)for(const S of r)Fx(h,S),Fx(u,S);if(s)for(const S of s)kb(h,S),kb(u,S);const d=h.map(S=>this.viewItems[S]),f=h.map(S=>i[S]),g=u.map(S=>this.viewItems[S]),p=u.map(S=>i[S]),_=h.reduce((S,x)=>S+(this.viewItems[x].minimumSize-i[x]),0),v=h.reduce((S,x)=>S+(this.viewItems[x].maximumSize-i[x]),0),b=u.length===0?Number.POSITIVE_INFINITY:u.reduce((S,x)=>S+(i[x]-this.viewItems[x].minimumSize),0),w=u.length===0?Number.NEGATIVE_INFINITY:u.reduce((S,x)=>S+(i[x]-this.viewItems[x].maximumSize),0),C=Math.max(_,w,o),y=Math.min(b,v,a);let D=!1;if(l){const S=this.viewItems[l.index],x=t>=l.limitDelta;D=x!==S.visible,S.setVisible(x,l.size)}if(!D&&c){const S=this.viewItems[c.index],x=t<c.limitDelta;D=x!==S.visible,S.setVisible(x,c.size)}if(D)return this.resize(e,t,i,s,r,o,a);t=lr(t,C,y);for(let S=0,x=t;S<d.length;S++){const k=d[S],F=lr(f[S]+x,k.minimumSize,k.maximumSize);x-=F-f[S],k.size=F}for(let S=0,x=t;S<g.length;S++){const k=g[S],F=lr(p[S]-x,k.minimumSize,k.maximumSize);x+=F-p[S],k.size=F}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let i=this.size-t;const s=mn(this.viewItems.length-1,-1),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);for(const a of o)Fx(s,a);for(const a of r)kb(s,a);typeof e=="number"&&kb(s,e);for(let a=0;i!==0&&a<s.length;a++){const l=this.viewItems[s[a]],c=lr(l.size+i,l.minimumSize,l.maximumSize);i-=c-l.size,l.size=c}}layoutViews(){this.contentSize=this.viewItems.reduce((t,i)=>t+i.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const i=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),s=[...this.viewItems].reverse();e=!1;const r=s.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const o=s.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l];a+=this.viewItems[l].size;const u=!(t[l]&&o[l+1]),d=!(i[l]&&r[l+1]);if(u&&d){const f=mn(l,-1),g=mn(l+1,this.viewItems.length),p=this.findFirstSnapIndex(f),_=this.findFirstSnapIndex(g),v=typeof p=="number"&&!this.viewItems[p].visible,b=typeof _=="number"&&!this.viewItems[_].visible;v&&r[l]&&(a>0||this.startSnappingEnabled)?c.state=1:b&&t[l]&&(a<this.contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else u&&!d?c.state=1:!u&&d?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let i=0;i<this.sashItems.length;i++)if(t+=this.viewItems[i].size,this.sashItems[i].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const i=this.viewItems[t];if(!!i.visible&&i.snap)return t}for(const t of e){const i=this.viewItems[t];if(i.visible&&i.maximumSize-i.minimumSize>0)return;if(!i.visible&&i.snap)return t}}dispose(){super.dispose(),this.viewItems.forEach(e=>e.dispose()),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[]}}class j0{constructor(e,t,i){this.columns=e,this.getColumnSize=i,this.templateId=j0.TemplateId,this.renderedTemplates=new Set;const s=new Map(t.map(r=>[r.templateId,r]));this.renderers=[];for(const r of e){const o=s.get(r.templateId);if(!o)throw new Error(`Table cell renderer for template id ${r.templateId} not found.`);this.renderers.push(o)}}renderTemplate(e){const t=Y(e,J(".monaco-table-tr")),i=[],s=[];for(let o=0;o<this.columns.length;o++){const a=this.renderers[o],l=Y(t,J(".monaco-table-td",{"data-col-index":o}));l.style.width=`${this.getColumnSize(o)}px`,i.push(l),s.push(a.renderTemplate(l))}const r={container:e,cellContainers:i,cellTemplateData:s};return this.renderedTemplates.add(r),r}renderElement(e,t,i,s){for(let r=0;r<this.columns.length;r++){const a=this.columns[r].project(e);this.renderers[r].renderElement(a,t,i.cellTemplateData[r],s)}}disposeElement(e,t,i,s){for(let r=0;r<this.columns.length;r++){const o=this.renderers[r];if(o.disposeElement){const l=this.columns[r].project(e);o.disposeElement(l,t,i.cellTemplateData[r],s)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);Yi(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:i}of this.renderedTemplates)i[e].style.width=`${t}px`}}j0.TemplateId="row";function Bve(n){return{getHeight(e){return n.getHeight(e)},getTemplateId(){return j0.TemplateId}}}class Vve{constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new R,this.onDidLayout=this._onDidLayout.event,this.element=J(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:ue.None}layout(e){this._onDidLayout.fire([this.index,e])}}class J1{constructor(e,t,i,s,r,o){this.virtualDelegate=i,this.domId=`table_id_${++J1.InstanceCount}`,this.cachedHeight=0,this.domNode=Y(t,J(`.monaco-table.${this.domId}`));const a=s.map((h,u)=>new Vve(h,u)),l={size:a.reduce((h,u)=>h+u.column.weight,0),views:a.map(h=>({size:h.column.weight,view:h}))};this.splitview=new nH(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l}),this.splitview.el.style.height=`${i.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${i.headerRowHeight}px`;const c=new j0(s,r,h=>this.splitview.getViewSize(h));this.list=new ga(e,this.domNode,Bve(i),[c],o),this.columnLayoutDisposable=ue.any(...a.map(h=>h.onDidLayout))(([h,u])=>c.layoutColumn(h,u)),this.styleElement=$s(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,t,i=[]){this.list.splice(e,t,i)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.splitview.dispose(),this.list.dispose(),this.columnLayoutDisposable.dispose()}}J1.InstanceCount=0;var Sm;(function(n){n[n.Unknown=0]="Unknown",n[n.Twistie=1]="Twistie",n[n.Element=2]="Element"})(Sm||(Sm={}));class Ps extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class aM{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function lM(n){return typeof n=="object"&&"visibility"in n&&"data"in n}function F_(n){switch(n){case!0:return 1;case!1:return 0;default:return n}}function ID(n){return typeof n.collapsible=="boolean"}class Wve{constructor(e,t,i,s={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new DA,this._onDidChangeCollapseState=new R,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new R,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new R,this.onDidSplice=this._onDidSplice.event,this.collapseByDefault=typeof s.collapseByDefault=="undefined"?!1:s.collapseByDefault,this.filter=s.filter,this.autoExpandSingleChildren=typeof s.autoExpandSingleChildren=="undefined"?!1:s.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,i=Ue.empty(),s={}){if(e.length===0)throw new Ps(this.user,"Invalid tree location");s.diffIdentityProvider?this.spliceSmart(s.diffIdentityProvider,e,t,i,s):this.spliceSimple(e,t,i,s)}spliceSmart(e,t,i,s,r,o){var a;s===void 0&&(s=Ue.empty()),o===void 0&&(o=(a=r.diffDepth)!==null&&a!==void 0?a:0);const{parentNode:l}=this.getParentNodeWithListIndex(t);if(!l.lastDiffIds)return this.spliceSimple(t,i,s,r);const c=[...s],h=t[t.length-1],u=new Bo({getElements:()=>l.lastDiffIds},{getElements:()=>[...l.children.slice(0,h),...c,...l.children.slice(h+i)].map(_=>e.getId(_.element).toString())}).ComputeDiff(!1);if(u.quitEarly)return l.lastDiffIds=void 0,this.spliceSimple(t,i,c,r);const d=t.slice(0,-1),f=(_,v,b)=>{if(o>0)for(let w=0;w<b;w++)_--,v--,this.spliceSmart(e,[...d,_,0],Number.MAX_SAFE_INTEGER,c[v].children,r,o-1)};let g=Math.min(l.children.length,h+i),p=c.length;for(const _ of u.changes.sort((v,b)=>b.originalStart-v.originalStart))f(g,p,g-(_.originalStart+_.originalLength)),g=_.originalStart,p=_.modifiedStart-h,this.spliceSimple([...d,g],_.originalLength,Ue.slice(c,p,p+_.modifiedLength),r);f(g,p,g)}spliceSimple(e,t,i=Ue.empty(),{onDidCreateNode:s,onDidDeleteNode:r,diffIdentityProvider:o}){const{parentNode:a,listIndex:l,revealed:c,visible:h}=this.getParentNodeWithListIndex(e),u=[],d=Ue.map(i,S=>this.createTreeNode(S,a,a.visible?1:0,c,u,s)),f=e[e.length-1],g=a.children.length>0;let p=0;for(let S=f;S>=0&&S<a.children.length;S--){const x=a.children[S];if(x.visible){p=x.visibleChildIndex;break}}const _=[];let v=0,b=0;for(const S of d)_.push(S),b+=S.renderNodeCount,S.visible&&(S.visibleChildIndex=p+v++);const w=uP(a.children,f,t,_);o?a.lastDiffIds?uP(a.lastDiffIds,f,t,_.map(S=>o.getId(S.element).toString())):a.lastDiffIds=a.children.map(S=>o.getId(S.element).toString()):a.lastDiffIds=void 0;let C=0;for(const S of w)S.visible&&C++;if(C!==0)for(let S=f+_.length;S<a.children.length;S++){const x=a.children[S];x.visible&&(x.visibleChildIndex-=C)}if(a.visibleChildrenCount+=v-C,c&&h){const S=w.reduce((x,k)=>x+(k.visible?k.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,b-S),this.list.splice(l,S,u)}if(w.length>0&&r){const S=x=>{r(x),x.children.forEach(S)};w.forEach(S)}const y=a.children.length>0;g!==y&&this.setCollapsible(e.slice(0,-1),y),this._onDidSplice.fire({insertedNodes:_,deletedNodes:w});let D=a;for(;D;){if(D.visibility===2){this.refilter();break}D=D.parent}}rerender(e){if(e.length===0)throw new Ps(this.user,"Invalid tree location");const{node:t,listIndex:i,revealed:s}=this.getTreeNodeWithListIndex(e);t.visible&&s&&this.list.splice(i,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:i,revealed:s}=this.getTreeNodeWithListIndex(e);return i&&s?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const i=this.getTreeNode(e);typeof t=="undefined"&&(t=!i.collapsible);const s={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){const s=this.getTreeNode(e);typeof t=="undefined"&&(t=!s.collapsed);const r={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,r))}_setCollapseState(e,t){const{node:i,listIndex:s,revealed:r}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(i,s,r,t);if(i!==this.root&&this.autoExpandSingleChildren&&o&&!ID(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let a=-1;for(let l=0;l<i.children.length;l++)if(i.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return o}_setListNodeCollapseState(e,t,i,s){const r=this._setNodeCollapseState(e,s,!1);if(!i||!e.visible||!r)return r;const o=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=o-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),r}_setNodeCollapseState(e,t,i){let s;if(e===this.root?s=!1:(ID(t)?(s=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(s=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):s=!1,s&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!ID(t)&&t.recursive)for(const r of e.children)s=this._setNodeCollapseState(r,t,!0)||s;return s}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t)}createTreeNode(e,t,i,s,r,o){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed!="undefined",collapsed:typeof e.collapsed=="undefined"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,i);a.visibility=l,s&&r.push(a);const c=e.children||Ue.empty(),h=s&&l!==0&&!a.collapsed,u=Ue.map(c,g=>this.createTreeNode(g,a,l,h,r,o));let d=0,f=1;for(const g of u)a.children.push(g),f+=g.renderNodeCount,g.visible&&(g.visibleChildIndex=d++);return a.collapsible=a.collapsible||a.children.length>0,a.visibleChildrenCount=d,a.visible=l===2?d>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=f):(a.renderNodeCount=0,s&&r.pop()),o&&o(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i,s=!0){let r;if(e!==this.root){if(r=this._filterNode(e,t),r===0)return e.visible=!1,e.renderNodeCount=0,!1;s&&i.push(e)}const o=i.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||r!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,r,i,s&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=r===2?a:r===1,e.visibility=r),e.visible?e.collapsed||(e.renderNodeCount+=i.length-o):(e.renderNodeCount=0,s&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const i=this.filter?this.filter.filter(e.element,t):1;return typeof i=="boolean"?(e.filterData=void 0,i?1:0):lM(i)?(e.filterData=i.data,F_(i.visibility)):(e.filterData=void 0,F_(i))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[i,...s]=e;return i<0||i>t.children.length?!1:this.hasTreeNode(s,t.children[i])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[i,...s]=e;if(i<0||i>t.children.length)throw new Ps(this.user,"Invalid tree location");return this.getTreeNode(s,t.children[i])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:i,revealed:s,visible:r}=this.getParentNodeWithListIndex(e),o=e[e.length-1];if(o<0||o>t.children.length)throw new Ps(this.user,"Invalid tree location");const a=t.children[o];return{node:a,listIndex:i,revealed:s,visible:r&&a.visible}}getParentNodeWithListIndex(e,t=this.root,i=0,s=!0,r=!0){const[o,...a]=e;if(o<0||o>t.children.length)throw new Ps(this.user,"Invalid tree location");for(let l=0;l<o;l++)i+=t.children[l].renderNodeCount;return s=s&&!t.collapsed,r=r&&t.visible,a.length===0?{parentNode:t,listIndex:i,revealed:s,visible:r}:this.getParentNodeWithListIndex(a,t.children[o],i+1,s,r)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:fhe(e)[0]}}const u3=Er("tree-item-expanded",se.chevronDown),d3=Er("tree-filter-on-type-on",se.listFilter),f3=Er("tree-filter-on-type-off",se.listSelection),zve=Er("tree-filter-clear",se.close),QC=Er("tree-item-loading",se.loading);class Hve extends U0{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function TD(n){return n instanceof U0?new Hve(n):n}class $ve{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=q.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(TD(e),t)}onDragOver(e,t,i,s,r=!0){const o=this.dnd.onDragOver(TD(e),t&&t.element,i,s),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t=="undefined")return o;if(a&&typeof o!="boolean"&&o.autoExpand&&(this.autoExpandDisposable=Ff(()=>{const d=this.modelProvider(),f=d.getNodeLocation(t);d.isCollapsed(f)&&d.setCollapsed(f,!1),this.autoExpandNode=void 0},500)),typeof o=="boolean"||!o.accept||typeof o.bubble=="undefined"||o.feedback){if(!r){const d=typeof o=="boolean"?o:o.accept,f=typeof o=="boolean"?void 0:o.effect;return{accept:d,effect:f,feedback:[i]}}return o}if(o.bubble===1){const d=this.modelProvider(),f=d.getNodeLocation(t),g=d.getParentNodeLocation(f),p=d.getNode(g),_=g&&d.getListIndex(g);return this.onDragOver(e,p,_,s,!1)}const l=this.modelProvider(),c=l.getNodeLocation(t),h=l.getListIndex(c),u=l.getListRenderCount(c);return Object.assign(Object.assign({},o),{feedback:mn(h,h+u)})}drop(e,t,i,s){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(TD(e),t&&t.element,i,s)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function Uve(n,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new $ve(n,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(t){const i=n(),s=i.getNodeLocation(t),r=i.getParentNodeLocation(s);return i.getNode(r).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}),enableKeyboardNavigation:e.simpleKeyboardNavigation})}class cM{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight&&this.delegate.setDynamicHeight(e.element,t)}}var P_;(function(n){n.None="none",n.OnHover="onHover",n.Always="always"})(P_||(P_={}));class jve{constructor(e,t=[]){this._elements=t,this.onDidChange=ue.forEach(e,i=>this._elements=i)}get elements(){return this._elements}}class B_{constructor(e,t,i,s,r={}){this.renderer=e,this.modelProvider=t,this.activeNodes=s,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=B_.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new eue,this.activeIndentNodes=new Set,this.indentGuidesDisposable=q.None,this.disposables=new ee,this.templateId=e.templateId,this.updateOptions(r),ue.map(i,o=>o.node)(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState&&e.onDidChangeTwistieState(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent!="undefined"&&(this.indent=lr(e.indent,0,40)),typeof e.renderIndentGuides!="undefined"){const t=e.renderIndentGuides!==P_.None;if(t!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=t,this.indentGuidesDisposable.dispose(),t)){const i=new ee;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,i),this.indentGuidesDisposable=i,this._onDidChangeActiveNodes(this.activeNodes.elements)}}typeof e.hideTwistiesOfChildlessElements!="undefined"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=Y(e,J(".monaco-tl-row")),i=Y(t,J(".monaco-tl-indent")),s=Y(t,J(".monaco-tl-twistie")),r=Y(t,J(".monaco-tl-contents")),o=this.renderer.renderTemplate(r);return{container:e,indent:i,twistie:s,indentGuidesDisposable:q.None,templateData:o}}renderElement(e,t,i,s){typeof s=="number"&&(this.renderedNodes.set(e,{templateData:i,height:s}),this.renderedElements.set(e.element,e));const r=B_.DefaultIndent+(e.depth-1)*this.indent;i.twistie.style.paddingLeft=`${r}px`,i.indent.style.width=`${r+this.indent-16}px`,this.renderTwistie(e,i),typeof s=="number"&&this.renderIndentGuides(e,i),this.renderer.renderElement(e,t,i.templateData,s)}disposeElement(e,t,i,s){i.indentGuidesDisposable.dispose(),this.renderer.disposeElement&&this.renderer.disposeElement(e,t,i.templateData,s),typeof s=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);!t||this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);!t||(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))}renderTwistie(e,t){t.twistie.classList.remove(...u3.classNamesArray);let i=!1;this.renderer.renderTwistie&&(i=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(i||t.twistie.classList.add(...u3.classNamesArray),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded")}renderIndentGuides(e,t){if(Yi(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const i=new ee,s=this.modelProvider();let r=e;for(;;){const o=s.getNodeLocation(r),a=s.getParentNodeLocation(o);if(!a)break;const l=s.getNode(a),c=J(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(l)&&c.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(c):t.indent.insertBefore(c,t.indent.firstElementChild),this.renderedIndentGuides.add(l,c),i.add(Ze(()=>this.renderedIndentGuides.delete(l,c))),r=l}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,i=this.modelProvider();e.forEach(s=>{const r=i.getNodeLocation(s);try{const o=i.getParentNodeLocation(r);s.collapsible&&s.children.length>0&&!s.collapsed?t.add(s):o&&t.add(i.getNode(o))}catch{}}),this.activeIndentNodes.forEach(s=>{t.has(s)||this.renderedIndentGuides.forEach(s,r=>r.classList.remove("active"))}),t.forEach(s=>{this.activeIndentNodes.has(s)||this.renderedIndentGuides.forEach(s,r=>r.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),He(this.disposables)}}B_.DefaultIndent=8;class qve{constructor(e,t,i){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new ee,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}filter(e,t){if(this._filter){const r=this._filter.filter(e,t);if(this.tree.options.simpleKeyboardNavigation)return r;let o;if(typeof r=="boolean"?o=r?1:0:lM(r)?o=F_(r.visibility):o=r,o===0)return!1}if(this._totalCount++,this.tree.options.simpleKeyboardNavigation||!this._pattern)return this._matchCount++,{data:Jr.Default,visibility:!0};const i=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),s=Array.isArray(i)?i:[i];for(const r of s){const o=r&&r.toString();if(typeof o=="undefined")return{data:Jr.Default,visibility:!0};const a=O_(this._pattern,this._lowercasePattern,0,o,o.toLowerCase(),0,!0);if(a)return this._matchCount++,s.length===1?{data:a,visibility:!0}:{data:{label:o,score:a},visibility:!0}}return this.tree.options.filterOnType?2:{data:Jr.Default,visibility:!0}}reset(){this._totalCount=0,this._matchCount=0}dispose(){He(this.disposables)}}class Kve{constructor(e,t,i,s,r){this.tree=e,this.view=i,this.filter=s,this.keyboardNavigationDelegate=r,this._enabled=!1,this._pattern="",this._empty=!1,this._onDidChangeEmptyState=new R,this.positionClassName="ne",this.automaticKeyboardNavigation=!0,this.triggered=!1,this._onDidChangePattern=new R,this.enabledDisposables=new ee,this.disposables=new ee,this.domNode=J(`.monaco-list-type-filter.${this.positionClassName}`),this.domNode.draggable=!0,this.disposables.add(K(this.domNode,"dragstart",()=>this.onDragStart())),this.messageDomNode=Y(i.getHTMLElement(),J(".monaco-list-type-filter-message")),this.labelDomNode=Y(this.domNode,J("span.label"));const o=Y(this.domNode,J(".controls"));this._filterOnType=!!e.options.filterOnType,this.filterOnTypeDomNode=Y(o,J("input.filter")),this.filterOnTypeDomNode.type="checkbox",this.filterOnTypeDomNode.checked=this._filterOnType,this.filterOnTypeDomNode.tabIndex=-1,this.updateFilterOnTypeTitleAndIcon(),this.disposables.add(K(this.filterOnTypeDomNode,"input",()=>this.onDidChangeFilterOnType())),this.clearDomNode=Y(o,J("button.clear"+zve.cssSelector)),this.clearDomNode.tabIndex=-1,this.clearDomNode.title=m("clear","Clear"),this.keyboardNavigationEventFilter=e.options.keyboardNavigationEventFilter,t.onDidSplice(this.onDidSpliceModel,this,this.disposables),this.updateOptions(e.options)}get enabled(){return this._enabled}get pattern(){return this._pattern}get filterOnType(){return this._filterOnType}updateOptions(e){e.simpleKeyboardNavigation?this.disable():this.enable(),typeof e.filterOnType!="undefined"&&(this._filterOnType=!!e.filterOnType,this.filterOnTypeDomNode.checked=this._filterOnType,this.updateFilterOnTypeTitleAndIcon()),typeof e.automaticKeyboardNavigation!="undefined"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation),this.tree.refilter(),this.render(),this.automaticKeyboardNavigation||this.onEventOrInput("")}enable(){if(this._enabled)return;const e=this.enabledDisposables.add(new ft(this.view.getHTMLElement(),"keydown")),t=ue.chain(e.event).filter(s=>!vc(s.target)||s.target===this.filterOnTypeDomNode).filter(s=>s.key!=="Dead"&&!/^Media/.test(s.key)).map(s=>new Ft(s)).filter(this.keyboardNavigationEventFilter||(()=>!0)).filter(()=>this.automaticKeyboardNavigation||this.triggered).filter(s=>this.keyboardNavigationDelegate.mightProducePrintableCharacter(s)&&!(s.keyCode===18||s.keyCode===16||s.keyCode===15||s.keyCode===17)||(this.pattern.length>0||this.triggered)&&(s.keyCode===9||s.keyCode===1)&&!s.altKey&&!s.ctrlKey&&!s.metaKey||s.keyCode===1&&(je?s.altKey&&!s.metaKey:s.ctrlKey)&&!s.shiftKey).forEach(s=>{s.stopPropagation(),s.preventDefault()}).event,i=this.enabledDisposables.add(new ft(this.clearDomNode,"click"));ue.chain(ue.any(t,i.event)).event(this.onEventOrInput,this,this.enabledDisposables),this.filter.pattern="",this.tree.refilter(),this.render(),this._enabled=!0,this.triggered=!1}disable(){!this._enabled||(this.domNode.remove(),this.enabledDisposables.clear(),this.tree.refilter(),this.render(),this._enabled=!1,this.triggered=!1)}onEventOrInput(e){typeof e=="string"?this.onInput(e):e instanceof MouseEvent||e.keyCode===9||e.keyCode===1&&(je?e.altKey:e.ctrlKey)?this.onInput(""):e.keyCode===1?this.onInput(this.pattern.length===0?"":this.pattern.substr(0,this.pattern.length-1)):this.onInput(this.pattern+e.browserEvent.key)}onInput(e){const t=this.view.getHTMLElement();e&&!this.domNode.parentElement?t.append(this.domNode):!e&&this.domNode.parentElement&&(this.domNode.remove(),this.tree.domFocus()),this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,s=>!Jr.isDefault(s.filterData));const i=this.tree.getFocus();if(i.length>0){const s=i[0];this.tree.getRelativeTop(s)===null&&this.tree.reveal(s,.5)}this.render(),e||(this.triggered=!1)}onDragStart(){const e=this.view.getHTMLElement(),{left:t}=Gi(e),i=e.clientWidth,s=i/2,r=this.domNode.clientWidth,o=new ee;let a=this.positionClassName;const l=()=>{switch(a){case"nw":this.domNode.style.top="4px",this.domNode.style.left="4px";break;case"ne":this.domNode.style.top="4px",this.domNode.style.left=`${i-r-6}px`;break}},c=u=>{u.preventDefault();const d=u.clientX-t;u.dataTransfer&&(u.dataTransfer.dropEffect="none"),d<s?a="nw":a="ne",l()},h=()=>{this.positionClassName=a,this.domNode.className=`monaco-list-type-filter ${this.positionClassName}`,this.domNode.style.top="",this.domNode.style.left="",He(o)};l(),this.domNode.classList.remove(a),this.domNode.classList.add("dragging"),o.add(Ze(()=>this.domNode.classList.remove("dragging"))),o.add(K(document,"dragover",u=>c(u))),o.add(K(this.domNode,"dragend",()=>h())),Ta.CurrentDragAndDropData=new c0e("vscode-ui"),o.add(Ze(()=>Ta.CurrentDragAndDropData=void 0))}onDidSpliceModel(){!this._enabled||this.pattern.length===0||(this.tree.refilter(),this.render())}onDidChangeFilterOnType(){this.tree.updateOptions({filterOnType:this.filterOnTypeDomNode.checked}),this.tree.refilter(),this.tree.domFocus(),this.render(),this.updateFilterOnTypeTitleAndIcon()}updateFilterOnTypeTitleAndIcon(){this.filterOnType?(this.filterOnTypeDomNode.classList.remove(...f3.classNamesArray),this.filterOnTypeDomNode.classList.add(...d3.classNamesArray),this.filterOnTypeDomNode.title=m("disable filter on type","Disable Filter on Type")):(this.filterOnTypeDomNode.classList.remove(...d3.classNamesArray),this.filterOnTypeDomNode.classList.add(...f3.classNamesArray),this.filterOnTypeDomNode.title=m("enable filter on type","Enable Filter on Type"))}render(){const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&this.tree.options.filterOnType&&e?(this.messageDomNode.textContent=m("empty","No elements found"),this._empty=!0):(this.messageDomNode.innerText="",this._empty=!1),this.domNode.classList.toggle("no-matches",e),this.domNode.title=m("found","Matched {0} out of {1} elements",this.filter.matchCount,this.filter.totalCount),this.labelDomNode.textContent=this.pattern.length>16?"\u2026"+this.pattern.substr(this.pattern.length-16):this.pattern,this._onDidChangeEmptyState.fire(this._empty)}shouldAllowFocus(e){return!this.enabled||!this.pattern||this.filterOnType||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!Jr.isDefault(e.filterData)}dispose(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.dispose(),this._enabled=!1,this.triggered=!1),this._onDidChangePattern.dispose(),He(this.disposables)}}function g3(n){let e=Sm.Unknown;return xF(n.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=Sm.Twistie:xF(n.browserEvent.target,"monaco-tl-contents","monaco-tl-row")&&(e=Sm.Element),{browserEvent:n.browserEvent,element:n.element?n.element.element:null,target:e}}function Zv(n,e){e(n),n.children.forEach(t=>Zv(t,e))}class ND{constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new R,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){var i;!(!((i=t)===null||i===void 0)&&i.__forceEvent)&&ta(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const s=this;this._onDidChange.fire({get elements(){return s.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=h=>l.delete(h);t.forEach(h=>Zv(h,c)),this.set([...l.values()]);return}const i=new Set,s=l=>i.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>Zv(l,s));const r=new Map,o=l=>r.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>Zv(l,o));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!i.has(c))a.push(l);else{const u=r.get(c);u&&a.push(u)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class Gve extends eH{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if(vc(e.browserEvent.target)||jd(e.browserEvent.target))return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const i=e.browserEvent.target,s=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let r=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?r=this.tree.expandOnlyOnTwistieClick(t.element):r=!!this.tree.expandOnlyOnTwistieClick,r&&!s&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){const o=this.tree.model,a=o.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),o.setCollapsed(a,void 0,l),r&&s)return}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||super.onDoubleClick(e)}}class Yve extends ga{constructor(e,t,i,s,r,o,a,l){super(e,t,i,s,l),this.focusTrait=r,this.selectionTrait=o,this.anchorTrait=a}createMouseController(e){return new Gve(this,e.tree)}splice(e,t,i=[]){if(super.splice(e,t,i),i.length===0)return;const s=[],r=[];let o;i.forEach((a,l)=>{this.focusTrait.has(a)&&s.push(e+l),this.selectionTrait.has(a)&&r.push(e+l),this.anchorTrait.has(a)&&(o=e+l)}),s.length>0&&super.setFocus(oC([...super.getFocus(),...s])),r.length>0&&super.setSelection(oC([...super.getSelection(),...r])),typeof o=="number"&&super.setAnchor(o)}setFocus(e,t,i=!1){super.setFocus(e,t),i||this.focusTrait.set(e.map(s=>this.element(s)),t)}setSelection(e,t,i=!1){super.setSelection(e,t),i||this.selectionTrait.set(e.map(s=>this.element(s)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e=="undefined"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class sH{constructor(e,t,i,s,r={}){this._options=r,this.eventBufferer=new DA,this.disposables=new ee,this._onWillRefilter=new R,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new R;const o=new cM(i),a=new vF,l=new vF,c=new jve(l.event);this.renderers=s.map(d=>new B_(d,()=>this.model,a.event,c,r));for(let d of this.renderers)this.disposables.add(d);let h;r.keyboardNavigationLabelProvider&&(h=new qve(this,r.keyboardNavigationLabelProvider,r.filter),r=Object.assign(Object.assign({},r),{filter:h}),this.disposables.add(h)),this.focus=new ND(()=>this.view.getFocusedElements()[0],r.identityProvider),this.selection=new ND(()=>this.view.getSelectedElements()[0],r.identityProvider),this.anchor=new ND(()=>this.view.getAnchorElement(),r.identityProvider),this.view=new Yve(e,t,o,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},Uve(()=>this.model,r)),{tree:this})),this.model=this.createModel(e,this.view,r),a.input=this.model.onDidChangeCollapseState;const u=ue.forEach(this.model.onDidSplice,d=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(d),this.selection.onDidModelSplice(d)})});if(u(()=>null,null,this.disposables),l.input=ue.chain(ue.any(u,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{const d=new Set;for(const f of this.focus.getNodes())d.add(f);for(const f of this.selection.getNodes())d.add(f);return[...d.values()]}).event,r.keyboardSupport!==!1){const d=ue.chain(this.view.onKeyDown).filter(f=>!vc(f.target)).map(f=>new Ft(f));d.filter(f=>f.keyCode===15).on(this.onLeftArrow,this,this.disposables),d.filter(f=>f.keyCode===17).on(this.onRightArrow,this,this.disposables),d.filter(f=>f.keyCode===10).on(this.onSpace,this,this.disposables)}if(r.keyboardNavigationLabelProvider){const d=r.keyboardNavigationDelegate||Xz;this.typeFilterController=new Kve(this,this.model,this.view,h,d),this.focusNavigationFilter=f=>this.typeFilterController.shouldAllowFocus(f),this.disposables.add(this.typeFilterController)}this.styleElement=$s(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===P_.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return ue.map(this.view.onMouseDblClick,g3)}get onPointer(){return ue.map(this.view.onPointer,g3)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick=="undefined"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick=="undefined"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(Object.assign(Object.assign({},this._options),{enableKeyboardNavigation:this._options.simpleKeyboardNavigation})),this.typeFilterController&&this.typeFilterController.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===P_.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){this.view.layout(e,t)}style(e){const t=`.${this.view.domId}`,i=[];e.treeIndentGuidesStroke&&(i.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),i.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=i.join(`
`),this.view.style(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const i=e.map(r=>this.model.getNode(r));this.selection.set(i,t);const s=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setSelection(s,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const i=e.map(r=>this.model.getNode(r));this.focus.set(i,t);const s=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setFocus(s,t,!0)}focusNext(e=1,t=!1,i,s=this.focusNavigationFilter){this.view.focusNext(e,t,i,s)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const i=this.model.getListIndex(e);i!==-1&&this.view.reveal(i,t)}getRelativeTop(e){const t=this.model.getListIndex(e);return t===-1?null:this.view.getRelativeTop(t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],s=this.model.getNodeLocation(i);if(!this.model.setCollapsed(s,!0)){const o=this.model.getParentNodeLocation(s);if(!o)return;const a=this.model.getListIndex(o);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],s=this.model.getNodeLocation(i);if(!this.model.setCollapsed(s,!1)){if(!i.children.some(l=>l.visible))return;const[o]=this.view.getFocus(),a=o+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],s=this.model.getNodeLocation(i),r=e.browserEvent.altKey;this.model.setCollapsed(s,void 0,r)}dispose(){He(this.disposables),this.view.dispose()}}class hM{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new Wve(e,t,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare(s,r){return i.sorter.compare(s.element,r.element)}}),this.identityProvider=i.identityProvider}setChildren(e,t=Ue.empty(),i={}){const s=this.getElementLocation(e);this._setChildren(s,this.preserveCollapseState(t),i)}_setChildren(e,t=Ue.empty(),i){const s=new Set,r=new Set,o=l=>{var c;if(l.element===null)return;const h=l;if(s.add(h.element),this.nodes.set(h.element,h),this.identityProvider){const u=this.identityProvider.getId(h.element).toString();r.add(u),this.nodesByIdentity.set(u,h)}(c=i.onDidCreateNode)===null||c===void 0||c.call(i,h)},a=l=>{var c;if(l.element===null)return;const h=l;if(s.has(h.element)||this.nodes.delete(h.element),this.identityProvider){const u=this.identityProvider.getId(h.element).toString();r.has(u)||this.nodesByIdentity.delete(u)}(c=i.onDidDeleteNode)===null||c===void 0||c.call(i,h)};this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},i),{onDidCreateNode:o,onDidDeleteNode:a}))}preserveCollapseState(e=Ue.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),Ue.map(e,t=>{let i=this.nodes.get(t.element);if(!i&&this.identityProvider){const o=this.identityProvider.getId(t.element).toString();i=this.nodesByIdentity.get(o)}if(!i)return Object.assign(Object.assign({},t),{children:this.preserveCollapseState(t.children)});const s=typeof t.collapsible=="boolean"?t.collapsible:i.collapsible,r=typeof t.collapsed!="undefined"?t.collapsed:i.collapsed;return Object.assign(Object.assign({},t),{collapsible:s,collapsed:r,children:this.preserveCollapseState(t.children)})})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const s=this.getElementLocation(e);return this.model.setCollapsed(s,t,i)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Ps(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Ps(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Ps(this.user,`Tree element not found: ${e}`);const i=this.model.getNodeLocation(t),s=this.model.getParentNodeLocation(i);return this.model.getNode(s).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Ps(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function Xv(n){const e=[n.element],t=n.incompressible||!1;return{element:{elements:e,incompressible:t},children:Ue.map(Ue.from(n.children),Xv),collapsible:n.collapsible,collapsed:n.collapsed}}function Qv(n){const e=[n.element],t=n.incompressible||!1;let i,s;for(;[s,i]=Ue.consume(Ue.from(n.children),2),!(s.length!==1||s[0].incompressible);)n=s[0],e.push(n.element);return{element:{elements:e,incompressible:t},children:Ue.map(Ue.concat(s,i),Qv),collapsible:n.collapsible,collapsed:n.collapsed}}function NI(n,e=0){let t;return e<n.element.elements.length-1?t=[NI(n,e+1)]:t=Ue.map(Ue.from(n.children),i=>NI(i,0)),e===0&&n.element.incompressible?{element:n.element.elements[e],children:t,incompressible:!0,collapsible:n.collapsible,collapsed:n.collapsed}:{element:n.element.elements[e],children:t,collapsible:n.collapsible,collapsed:n.collapsed}}function p3(n){return NI(n,0)}function rH(n,e,t){return n.element===e?Object.assign(Object.assign({},n),{children:t}):Object.assign(Object.assign({},n),{children:Ue.map(Ue.from(n.children),i=>rH(i,e,t))})}const Zve=n=>({getId(e){return e.elements.map(t=>n.getId(t).toString()).join("\0")}});class Xve{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new hM(e,t,i),this.enabled=typeof i.compressionEnabled=="undefined"?!0:i.compressionEnabled,this.identityProvider=i.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,t=Ue.empty(),i){const s=i.diffIdentityProvider&&Zve(i.diffIdentityProvider);if(e===null){const f=Ue.map(t,this.enabled?Qv:Xv);this._setChildren(null,f,{diffIdentityProvider:s,diffDepth:1/0});return}const r=this.nodes.get(e);if(!r)throw new Error("Unknown compressed tree node");const o=this.model.getNode(r),a=this.model.getParentNodeLocation(r),l=this.model.getNode(a),c=p3(o),h=rH(c,e,t),u=(this.enabled?Qv:Xv)(h),d=l.children.map(f=>f===o?u:f);this._setChildren(l.element,d,{diffIdentityProvider:s,diffDepth:o.depth-l.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const i=this.model.getNode().children,s=Ue.map(i,p3),r=Ue.map(s,e?Qv:Xv);this._setChildren(null,r,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){const s=new Set,r=a=>{for(const l of a.element.elements)s.add(l),this.nodes.set(l,a.element)},o=a=>{for(const l of a.element.elements)s.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,Object.assign(Object.assign({},i),{onDidCreateNode:r,onDidDeleteNode:o}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e=="undefined")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return i===null?null:i.elements[i.elements.length-1]}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const s=this.getCompressedNode(e);return this.model.setCollapsed(s,t,i)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Ps(this.user,`Tree element not found: ${e}`);return t}}const Qve=n=>n[n.length-1];class uM{constructor(e,t){this.unwrapper=e,this.node=t}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new uM(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}function Jve(n,e){return{splice(t,i,s){e.splice(t,i,s.map(r=>n.map(r)))},updateElementHeight(t,i){e.updateElementHeight(t,i)}}}function ewe(n,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(n(t))}},sorter:e.sorter&&{compare(t,i){return e.sorter.compare(t.elements[0],i.elements[0])}},filter:e.filter&&{filter(t,i){return e.filter.filter(n(t),i)}}})}class twe{constructor(e,t,i={}){this.rootRef=null,this.elementMapper=i.elementMapper||Qve;const s=r=>this.elementMapper(r.elements);this.nodeMapper=new aM(r=>new uM(s,r)),this.model=new Xve(e,Jve(this.nodeMapper,t),ewe(s,i))}get onDidSplice(){return ue.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(i=>this.nodeMapper.map(i)),deletedNodes:t.map(i=>this.nodeMapper.map(i))}))}get onDidChangeCollapseState(){return ue.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return ue.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}setChildren(e,t=Ue.empty(),i={}){this.model.setChildren(e,t,i)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var iwe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class dM extends sH{constructor(e,t,i,s,r={}){super(e,t,i,s,r)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=Ue.empty(),i){this.model.setChildren(e,t,i)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,i){return new hM(e,t,i)}}class oH{constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){const t=this.renderer.renderTemplate(e);return{compressedTreeNode:void 0,data:t}}renderElement(e,t,i,s){const r=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);r.element.elements.length===1?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,s)):(i.compressedTreeNode=r,this.renderer.renderCompressedElements(r,t,i.data,s))}disposeElement(e,t,i,s){i.compressedTreeNode?this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(i.compressedTreeNode,t,i.data,s):this.renderer.disposeElement&&this.renderer.disposeElement(e,t,i.data,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}iwe([ui],oH.prototype,"compressedTreeNodeProvider",null);function nwe(n,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let i;try{i=n().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return i.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(i.element.elements)}}})}class aH extends dM{constructor(e,t,i,s,r={}){const o=()=>this,a=s.map(l=>new oH(o,l));super(e,t,i,a,nwe(o,r))}setChildren(e,t=Ue.empty(),i){this.model.setChildren(e,t,i)}createModel(e,t,i){return new twe(e,t,i)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled!="undefined"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}var yl=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};function AD(n){return Object.assign(Object.assign({},n),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function AI(n,e){return e.parent?e.parent===n?!0:AI(n,e.parent):!1}function swe(n,e){return n===e||AI(n,e)||AI(e,n)}class fM{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new fM(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class rwe{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...QC.classNamesArray),!0):(t.classList.remove(...QC.classNamesArray),!1)}disposeElement(e,t,i,s){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,i.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function m3(n){return{browserEvent:n.browserEvent,elements:n.elements.map(e=>e.element)}}function _3(n){return{browserEvent:n.browserEvent,element:n.element&&n.element.element,target:n.target}}class owe extends U0{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function MD(n){return n instanceof U0?new owe(n):n}class awe{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(MD(e),t)}onDragOver(e,t,i,s,r=!0){return this.dnd.onDragOver(MD(e),t&&t.element,i,s)}drop(e,t,i,s){this.dnd.drop(MD(e),t&&t.element,i,s)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function lH(n){return n&&Object.assign(Object.assign({},n),{collapseByDefault:!0,identityProvider:n.identityProvider&&{getId(e){return n.identityProvider.getId(e.element)}},dnd:n.dnd&&new awe(n.dnd),multipleSelectionController:n.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return n.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return n.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:n.accessibilityProvider&&Object.assign(Object.assign({},n.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:n.accessibilityProvider.getRole?e=>n.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:n.accessibilityProvider.isChecked?e=>{var t;return!!(!((t=n.accessibilityProvider)===null||t===void 0)&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return n.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return n.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:n.accessibilityProvider.getWidgetRole?()=>n.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:n.accessibilityProvider.getAriaLevel&&(e=>n.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:n.accessibilityProvider.getActiveDescendantId&&(e=>n.accessibilityProvider.getActiveDescendantId(e.element))}),filter:n.filter&&{filter(e,t){return n.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:n.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},n.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return n.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof n.expandOnlyOnTwistieClick=="undefined"?void 0:typeof n.expandOnlyOnTwistieClick!="function"?n.expandOnlyOnTwistieClick:e=>n.expandOnlyOnTwistieClick(e.element),additionalScrollHeight:n.additionalScrollHeight})}function MI(n,e){e(n),n.children.forEach(t=>MI(t,e))}class cH{constructor(e,t,i,s,r,o={}){this.user=e,this.dataSource=r,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new R,this._onDidChangeNodeSlowState=new R,this.nodeMapper=new aM(a=>new fM(a)),this.disposables=new ee,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=typeof o.autoExpandSingleChildren=="undefined"?!1:o.autoExpandSingleChildren,this.sorter=o.sorter,this.collapseByDefault=o.collapseByDefault,this.tree=this.createTree(e,t,i,s,o),this.root=AD({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return ue.map(this.tree.onDidChangeFocus,m3)}get onDidChangeSelection(){return ue.map(this.tree.onDidChangeSelection,m3)}get onMouseDblClick(){return ue.map(this.tree.onMouseDblClick,_3)}get onPointer(){return ue.map(this.tree.onPointer,_3)}get onDidFocus(){return this.tree.onDidFocus}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,i,s,r){const o=new cM(i),a=s.map(c=>new rwe(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=lH(r)||{};return new dM(e,t,o,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return yl(this,void 0,void 0,function*(){this.refreshPromises.forEach(s=>s.cancel()),this.refreshPromises.clear(),this.root.element=e;const i=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,i=!1,s,r){return yl(this,void 0,void 0,function*(){if(typeof this.root.element=="undefined")throw new Ps(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield ue.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(yield this.refreshAndRenderNode(o,t,s,r),i)try{this.tree.rerender(o)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}collapse(e,t=!1){const i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}expand(e,t=!1){return yl(this,void 0,void 0,function*(){if(typeof this.root.element=="undefined")throw new Ps(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield ue.toPromise(this._onDidRender.event));const i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i)||(i.refreshPromise&&(yield this.root.refreshPromise,yield ue.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i)))return!1;const s=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(yield this.root.refreshPromise,yield ue.toPromise(this._onDidRender.event)),s})}setSelection(e,t){const i=e.map(s=>this.getDataNode(s));this.tree.setSelection(i,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const i=e.map(s=>this.getDataNode(s));this.tree.setFocus(i,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Ps(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,i,s){return yl(this,void 0,void 0,function*(){yield this.refreshNode(e,t,i),this.render(e,i,s)})}refreshNode(e,t,i){return yl(this,void 0,void 0,function*(){let s;return this.subTreeRefreshPromises.forEach((r,o)=>{!s&&swe(o,e)&&(s=r.then(()=>this.refreshNode(e,t,i)))}),s||this.doRefreshSubTree(e,t,i)})}doRefreshSubTree(e,t,i){return yl(this,void 0,void 0,function*(){let s;e.refreshPromise=new Promise(r=>s=r),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const r=yield this.doRefreshNode(e,t,i);e.stale=!1,yield gE.settled(r.map(o=>this.doRefreshSubTree(o,t,i)))}finally{s()}})}doRefreshNode(e,t,i){return yl(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let s;if(!e.hasChildren)s=Promise.resolve(Ue.empty());else{const r=e_(800);r.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},o=>null),s=this.doGetChildren(e).finally(()=>r.cancel())}try{const r=yield s;return this.setChildren(e,r,t,i)}catch(r){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),Rc(r))return[];throw r}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);return t||(t=ks(()=>yl(this,void 0,void 0,function*(){const i=yield this.dataSource.getChildren(e.element);return this.processChildren(i)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(Ie))}setChildren(e,t,i,s){const r=[...t];if(e.children.length===0&&r.length===0)return[];const o=new Map,a=new Map;for(const h of e.children)if(o.set(h.element,h),this.identityProvider){const u=this.tree.isCollapsed(h);a.set(h.id,{node:h,collapsed:u})}const l=[],c=r.map(h=>{const u=!!this.dataSource.hasChildren(h);if(!this.identityProvider){const p=AD({element:h,parent:e,hasChildren:u});return u&&this.collapseByDefault&&!this.collapseByDefault(h)&&(p.collapsedByDefault=!1,l.push(p)),p}const d=this.identityProvider.getId(h).toString(),f=a.get(d);if(f){const p=f.node;return o.delete(p.element),this.nodes.delete(p.element),this.nodes.set(h,p),p.element=h,p.hasChildren=u,i?f.collapsed?(p.children.forEach(_=>MI(_,v=>this.nodes.delete(v.element))),p.children.splice(0,p.children.length),p.stale=!0):l.push(p):u&&this.collapseByDefault&&!this.collapseByDefault(h)&&(p.collapsedByDefault=!1,l.push(p)),p}const g=AD({element:h,parent:e,id:d,hasChildren:u});return s&&s.viewState.focus&&s.viewState.focus.indexOf(d)>-1&&s.focus.push(g),s&&s.viewState.selection&&s.viewState.selection.indexOf(d)>-1&&s.selection.push(g),s&&s.viewState.expanded&&s.viewState.expanded.indexOf(d)>-1?l.push(g):u&&this.collapseByDefault&&!this.collapseByDefault(h)&&(g.collapsedByDefault=!1,l.push(g)),g});for(const h of o.values())MI(h,u=>this.nodes.delete(u.element));for(const h of c)this.nodes.set(h.element,h);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].collapsedByDefault=!1,l.push(c[0])),l}render(e,t,i){const s=e.children.map(o=>this.asTreeElement(o,t)),r=i&&Object.assign(Object.assign({},i),{diffIdentityProvider:i.diffIdentityProvider&&{getId(o){return i.diffIdentityProvider.getId(o.element)}}});this.tree.setChildren(e===this.root?null:e,s,r),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let i;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?i=!1:i=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?Ue.map(e.children,s=>this.asTreeElement(s,t)):[],collapsible:e.hasChildren,collapsed:i}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}class gM{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new gM(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class lwe{constructor(e,t,i,s){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=s,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,s)}renderCompressedElements(e,t,i,s){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...QC.classNamesArray),!0):(t.classList.remove(...QC.classNamesArray),!1)}disposeElement(e,t,i,s){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,i.templateData,s)}disposeCompressedElements(e,t,i,s){this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=He(this.disposables)}}function cwe(n){const e=n&&lH(n);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return n.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(i=>i.element))}})})}class hwe extends cH{constructor(e,t,i,s,r,o,a={}){super(e,t,i,r,o,a),this.compressionDelegate=s,this.compressibleNodeMapper=new aM(l=>new gM(l)),this.filter=a.filter}createTree(e,t,i,s,r){const o=new cM(i),a=s.map(c=>new lwe(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=cwe(r)||{};return new aH(e,t,o,a,l)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const i=d=>this.identityProvider.getId(d).toString(),s=d=>{const f=new Set;for(const g of d){const p=this.tree.getCompressedTreeNode(g===this.root?null:g);if(!!p.element)for(const _ of p.element.elements)f.add(i(_.element))}return f},r=s(this.tree.getSelection()),o=s(this.tree.getFocus());super.render(e,t);const a=this.getSelection();let l=!1;const c=this.getFocus();let h=!1;const u=d=>{const f=d.element;if(f)for(let g=0;g<f.elements.length;g++){const p=i(f.elements[g].element),_=f.elements[f.elements.length-1].element;r.has(p)&&a.indexOf(_)===-1&&(a.push(_),l=!0),o.has(p)&&c.indexOf(_)===-1&&(c.push(_),h=!0)}d.children.forEach(u)};u(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),h&&this.setFocus(c)}processChildren(e){return this.filter&&(e=Ue.filter(e,t=>{const i=this.filter.filter(t,1),s=uwe(i);if(s===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return s===1})),super.processChildren(e)}}function uwe(n){return typeof n=="boolean"?n?1:0:lM(n)?F_(n.visibility):F_(n)}class dwe extends sH{constructor(e,t,i,s,r,o={}){super(e,t,i,s,o),this.user=e,this.dataSource=r,this.identityProvider=o.identityProvider}createModel(e,t,i){return new hM(e,t,i)}}new he("isWindows",Zi,m("isWindows","Whether the operating system is Windows"));const fwe="inputFocus";var pa=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Re=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};const Zs=Xe("listService");let RI=class{constructor(e){this._themeService=e,this.disposables=new ee,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;const s=new tH($s(),"");this.disposables.add(_u(s,this._themeService))}if(this.lists.some(s=>s.widget===e))throw new Error("Cannot register the same widget multiple times");const i={widget:e,extraContextKeys:t};return this.lists.push(i),e.getHTMLElement()===document.activeElement&&(this._lastFocusedWidget=e),jl(e.onDidFocus(()=>this._lastFocusedWidget=e),Ze(()=>this.lists.splice(this.lists.indexOf(i),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(s=>s!==i),this._lastFocusedWidget===e&&(this._lastFocusedWidget=void 0)}))}dispose(){this.disposables.dispose()}};RI=pa([Re(0,At)],RI);const hH=new he("listFocus",!0),eS=new he("listSupportsMultiselect",!0),uH=le.and(hH,le.not(fwe)),pM=new he("listHasSelectionOrFocus",!1),mM=new he("listDoubleSelection",!1),_M=new he("listMultiSelection",!1),tS=new he("listSelectionNavigation",!1),dH="listAutomaticKeyboardNavigation";function iS(n,e){const t=n.createScoped(e.getHTMLElement());return hH.bindTo(t),t}const ju="workbench.list.multiSelectModifier",OI="workbench.list.openMode",Hs="workbench.list.horizontalScrolling",JC="workbench.list.keyboardNavigation",bM="workbench.list.automaticKeyboardNavigation",V_="workbench.tree.indent",ey="workbench.tree.renderIndentGuides",co="workbench.list.smoothScrolling",ca="workbench.list.mouseWheelScrollSensitivity",ha="workbench.list.fastScrollSensitivity",ty="workbench.tree.expandMode";function ua(n){return n.getValue(ju)==="alt"}class gwe extends q{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=ua(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(ju)&&(this.useAltAsMultipleSelectionModifier=ua(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:Qz(e)}isSelectionRangeChangeEvent(e){return Jz(e)}}function nS(n,e,t){var i;const s=new ee;return[Object.assign(Object.assign({},n),{keyboardNavigationDelegate:{mightProducePrintableCharacter(o){return t.mightProducePrintableCharacter(o)}},smoothScrolling:Boolean(e.getValue(co)),mouseWheelScrollSensitivity:e.getValue(ca),fastScrollSensitivity:e.getValue(ha),multipleSelectionController:(i=n.multipleSelectionController)!==null&&i!==void 0?i:s.add(new gwe(e))}),s]}let FI=class extends ga{constructor(e,t,i,s,r,o,a,l,c,h){const u=typeof r.horizontalScrolling!="undefined"?r.horizontalScrolling:Boolean(c.getValue(Hs)),[d,f]=nS(r,c,h);super(e,t,i,s,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Or(l.getColorTheme(),X1)),d),{horizontalScrolling:u})),this.disposables.add(f),this.contextKeyService=iS(o,this),this.themeService=l,this.listSupportsMultiSelect=eS.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),tS.bindTo(this.contextKeyService).set(Boolean(r.selectionNavigation)),this.listHasSelectionOrFocus=pM.bindTo(this.contextKeyService),this.listDoubleSelection=mM.bindTo(this.contextKeyService),this.listMultiSelection=_M.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=ua(c),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),r.overrideStyles&&this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const p=this.getSelection(),_=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(p.length>0||_.length>0),this.listMultiSelection.set(p.length>1),this.listDoubleSelection.set(p.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const p=this.getSelection(),_=this.getFocus();this.listHasSelectionOrFocus.set(p.length>0||_.length>0)})),this.disposables.add(c.onDidChangeConfiguration(p=>{p.affectsConfiguration(ju)&&(this._useAltAsMultipleSelectionModifier=ua(c));let _={};if(p.affectsConfiguration(Hs)&&this.horizontalScrolling===void 0){const v=Boolean(c.getValue(Hs));_=Object.assign(Object.assign({},_),{horizontalScrolling:v})}if(p.affectsConfiguration(co)){const v=Boolean(c.getValue(co));_=Object.assign(Object.assign({},_),{smoothScrolling:v})}if(p.affectsConfiguration(ca)){const v=c.getValue(ca);_=Object.assign(Object.assign({},_),{mouseWheelScrollSensitivity:v})}if(p.affectsConfiguration(ha)){const v=c.getValue(ha);_=Object.assign(Object.assign({},_),{fastScrollSensitivity:v})}Object.keys(_).length>0&&this.updateOptions(_)})),this.navigator=new fH(this,Object.assign({configurationService:c},r)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=_u(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),super.dispose()}};FI=pa([Re(5,Le),Re(6,Zs),Re(7,At),Re(8,si),Re(9,ri)],FI);let b3=class extends Rve{constructor(e,t,i,s,r,o,a,l,c,h){const u=typeof r.horizontalScrolling!="undefined"?r.horizontalScrolling:Boolean(c.getValue(Hs)),[d,f]=nS(r,c,h);super(e,t,i,s,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Or(l.getColorTheme(),X1)),d),{horizontalScrolling:u})),this.disposables=new ee,this.disposables.add(f),this.contextKeyService=iS(o,this),this.themeService=l,this.horizontalScrolling=r.horizontalScrolling,this.listSupportsMultiSelect=eS.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),tS.bindTo(this.contextKeyService).set(Boolean(r.selectionNavigation)),this._useAltAsMultipleSelectionModifier=ua(c),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),r.overrideStyles&&this.updateStyles(r.overrideStyles),r.overrideStyles&&this.disposables.add(_u(this,l,r.overrideStyles)),this.disposables.add(c.onDidChangeConfiguration(p=>{p.affectsConfiguration(ju)&&(this._useAltAsMultipleSelectionModifier=ua(c));let _={};if(p.affectsConfiguration(Hs)&&this.horizontalScrolling===void 0){const v=Boolean(c.getValue(Hs));_=Object.assign(Object.assign({},_),{horizontalScrolling:v})}if(p.affectsConfiguration(co)){const v=Boolean(c.getValue(co));_=Object.assign(Object.assign({},_),{smoothScrolling:v})}if(p.affectsConfiguration(ca)){const v=c.getValue(ca);_=Object.assign(Object.assign({},_),{mouseWheelScrollSensitivity:v})}if(p.affectsConfiguration(ha)){const v=c.getValue(ha);_=Object.assign(Object.assign({},_),{fastScrollSensitivity:v})}Object.keys(_).length>0&&this.updateOptions(_)})),this.navigator=new fH(this,Object.assign({configurationService:c},r)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=_u(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};b3=pa([Re(5,Le),Re(6,Zs),Re(7,At),Re(8,si),Re(9,ri)],b3);let v3=class extends J1{constructor(e,t,i,s,r,o,a,l,c,h,u){const d=typeof o.horizontalScrolling!="undefined"?o.horizontalScrolling:Boolean(h.getValue(Hs)),[f,g]=nS(o,h,u);super(e,t,i,s,r,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Or(c.getColorTheme(),X1)),f),{horizontalScrolling:d})),this.disposables=new ee,this.disposables.add(g),this.contextKeyService=iS(a,this),this.themeService=c,this.listSupportsMultiSelect=eS.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),tS.bindTo(this.contextKeyService).set(Boolean(o.selectionNavigation)),this.listHasSelectionOrFocus=pM.bindTo(this.contextKeyService),this.listDoubleSelection=mM.bindTo(this.contextKeyService),this.listMultiSelection=_M.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=ua(h),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const _=this.getSelection(),v=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(_.length>0||v.length>0),this.listMultiSelection.set(_.length>1),this.listDoubleSelection.set(_.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const _=this.getSelection(),v=this.getFocus();this.listHasSelectionOrFocus.set(_.length>0||v.length>0)})),this.disposables.add(h.onDidChangeConfiguration(_=>{_.affectsConfiguration(ju)&&(this._useAltAsMultipleSelectionModifier=ua(h));let v={};if(_.affectsConfiguration(Hs)&&this.horizontalScrolling===void 0){const b=Boolean(h.getValue(Hs));v=Object.assign(Object.assign({},v),{horizontalScrolling:b})}if(_.affectsConfiguration(co)){const b=Boolean(h.getValue(co));v=Object.assign(Object.assign({},v),{smoothScrolling:b})}if(_.affectsConfiguration(ca)){const b=h.getValue(ca);v=Object.assign(Object.assign({},v),{mouseWheelScrollSensitivity:b})}if(_.affectsConfiguration(ha)){const b=h.getValue(ha);v=Object.assign(Object.assign({},v),{fastScrollSensitivity:b})}Object.keys(v).length>0&&this.updateOptions(v)})),this.navigator=new pwe(this,Object.assign({configurationService:h},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=_u(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};v3=pa([Re(6,Le),Re(7,Zs),Re(8,At),Re(9,si),Re(10,ri)],v3);class vM extends q{constructor(e,t){var i;super(),this.widget=e,this._onDidOpen=this._register(new R),this.onDidOpen=this._onDidOpen.event,this._register(ue.filter(this.widget.onDidChangeSelection,s=>s.browserEvent instanceof KeyboardEvent)(s=>this.onSelectionFromKeyboard(s))),this._register(this.widget.onPointer(s=>this.onPointer(s.element,s.browserEvent))),this._register(this.widget.onMouseDblClick(s=>this.onMouseDblClick(s.element,s.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t==null?void 0:t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(OI))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(()=>{this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(OI))!=="doubleClick"}))):this.openOnSingleClick=(i=t==null?void 0:t.openOnSingleClick)!==null&&i!==void 0?i:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,i=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,s=typeof t.pinned=="boolean"?t.pinned:!i,r=!1;this._open(this.getSelectedElement(),i,s,r,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const s=t.button===1,r=!0,o=s,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}onMouseDblClick(e,t){if(!t)return;const i=t.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.offsetX<16)return;const r=!1,o=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}_open(e,t,i,s,r){!e||this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:i,revealIfVisible:!0},sideBySide:s,element:e,browserEvent:r})}}class fH extends vM{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class pwe extends vM{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class mwe extends vM{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}}function _we(n,e){let t=!1;return i=>{if(t)return t=!1,!1;const s=e.softDispatch(i,n);return s&&s.enterChord?(t=!0,!1):(t=!1,!0)}}let w3=class extends dM{constructor(e,t,i,s,r,o,a,l,c,h,u){const{options:d,getAutomaticKeyboardNavigation:f,disposable:g}=q0(t,r,o,c,h,u);super(e,t,i,s,d),this.disposables.add(g),this.internals=new bu(this,r,f,r.overrideStyles,o,a,l,c,u),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};w3=pa([Re(5,Le),Re(6,Zs),Re(7,At),Re(8,si),Re(9,ri),Re(10,rs)],w3);let C3=class extends aH{constructor(e,t,i,s,r,o,a,l,c,h,u){const{options:d,getAutomaticKeyboardNavigation:f,disposable:g}=q0(t,r,o,c,h,u);super(e,t,i,s,d),this.disposables.add(g),this.internals=new bu(this,r,f,r.overrideStyles,o,a,l,c,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};C3=pa([Re(5,Le),Re(6,Zs),Re(7,At),Re(8,si),Re(9,ri),Re(10,rs)],C3);let y3=class extends dwe{constructor(e,t,i,s,r,o,a,l,c,h,u,d){const{options:f,getAutomaticKeyboardNavigation:g,disposable:p}=q0(t,o,a,h,u,d);super(e,t,i,s,r,f),this.disposables.add(p),this.internals=new bu(this,o,g,o.overrideStyles,a,l,c,h,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};y3=pa([Re(6,Le),Re(7,Zs),Re(8,At),Re(9,si),Re(10,ri),Re(11,rs)],y3);let PI=class extends cH{constructor(e,t,i,s,r,o,a,l,c,h,u,d){const{options:f,getAutomaticKeyboardNavigation:g,disposable:p}=q0(t,o,a,h,u,d);super(e,t,i,s,r,f),this.disposables.add(p),this.internals=new bu(this,o,g,o.overrideStyles,a,l,c,h,d),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};PI=pa([Re(6,Le),Re(7,Zs),Re(8,At),Re(9,si),Re(10,ri),Re(11,rs)],PI);let S3=class extends hwe{constructor(e,t,i,s,r,o,a,l,c,h,u,d,f){const{options:g,getAutomaticKeyboardNavigation:p,disposable:_}=q0(t,a,l,u,d,f);super(e,t,i,s,r,o,g),this.disposables.add(_),this.internals=new bu(this,a,p,a.overrideStyles,l,c,h,u,f),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};S3=pa([Re(7,Le),Re(8,Zs),Re(9,At),Re(10,si),Re(11,ri),Re(12,rs)],S3);function q0(n,e,t,i,s,r){var o;const a=()=>{let g=Boolean(t.getContextKeyValue(dH));return g&&(g=Boolean(i.getValue(bM))),g},l=r.isScreenReaderOptimized(),c=e.simpleKeyboardNavigation||l?"simple":i.getValue(JC),h=e.horizontalScrolling!==void 0?e.horizontalScrolling:Boolean(i.getValue(Hs)),[u,d]=nS(e,i,s),f=e.additionalScrollHeight;return{getAutomaticKeyboardNavigation:a,disposable:d,options:Object.assign(Object.assign({keyboardSupport:!1},u),{indent:typeof i.getValue(V_)=="number"?i.getValue(V_):void 0,renderIndentGuides:i.getValue(ey),smoothScrolling:Boolean(i.getValue(co)),automaticKeyboardNavigation:a(),simpleKeyboardNavigation:c==="simple",filterOnType:c==="filter",horizontalScrolling:h,keyboardNavigationEventFilter:_we(n,s),additionalScrollHeight:f,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(o=e.expandOnlyOnTwistieClick)!==null&&o!==void 0?o:i.getValue(ty)==="doubleClick"})}}let bu=class{constructor(e,t,i,s,r,o,a,l,c){this.tree=e,this.themeService=a,this.disposables=[],this.contextKeyService=iS(r,e),this.listSupportsMultiSelect=eS.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),tS.bindTo(this.contextKeyService).set(Boolean(t.selectionNavigation)),this.hasSelectionOrFocus=pM.bindTo(this.contextKeyService),this.hasDoubleSelection=mM.bindTo(this.contextKeyService),this.hasMultiSelection=_M.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=ua(l);const u=new Set;u.add(dH);const d=()=>{const g=c.isScreenReaderOptimized()?"simple":l.getValue(JC);e.updateOptions({simpleKeyboardNavigation:g==="simple",filterOnType:g==="filter"})};this.updateStyleOverrides(s),this.disposables.push(this.contextKeyService,o.register(e),e.onDidChangeSelection(()=>{const f=e.getSelection(),g=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(f.length>0||g.length>0),this.hasMultiSelection.set(f.length>1),this.hasDoubleSelection.set(f.length===2)})}),e.onDidChangeFocus(()=>{const f=e.getSelection(),g=e.getFocus();this.hasSelectionOrFocus.set(f.length>0||g.length>0)}),l.onDidChangeConfiguration(f=>{let g={};if(f.affectsConfiguration(ju)&&(this._useAltAsMultipleSelectionModifier=ua(l)),f.affectsConfiguration(V_)){const p=l.getValue(V_);g=Object.assign(Object.assign({},g),{indent:p})}if(f.affectsConfiguration(ey)){const p=l.getValue(ey);g=Object.assign(Object.assign({},g),{renderIndentGuides:p})}if(f.affectsConfiguration(co)){const p=Boolean(l.getValue(co));g=Object.assign(Object.assign({},g),{smoothScrolling:p})}if(f.affectsConfiguration(JC)&&d(),f.affectsConfiguration(bM)&&(g=Object.assign(Object.assign({},g),{automaticKeyboardNavigation:i()})),f.affectsConfiguration(Hs)&&t.horizontalScrolling===void 0){const p=Boolean(l.getValue(Hs));g=Object.assign(Object.assign({},g),{horizontalScrolling:p})}if(f.affectsConfiguration(ty)&&t.expandOnlyOnTwistieClick===void 0&&(g=Object.assign(Object.assign({},g),{expandOnlyOnTwistieClick:l.getValue(ty)==="doubleClick"})),f.affectsConfiguration(ca)){const p=l.getValue(ca);g=Object.assign(Object.assign({},g),{mouseWheelScrollSensitivity:p})}if(f.affectsConfiguration(ha)){const p=l.getValue(ha);g=Object.assign(Object.assign({},g),{fastScrollSensitivity:p})}Object.keys(g).length>0&&e.updateOptions(g)}),this.contextKeyService.onDidChangeContext(f=>{f.affectsSome(u)&&e.updateOptions({automaticKeyboardNavigation:i()})}),c.onDidChangeScreenReaderOptimized(()=>d())),this.navigator=new mwe(e,Object.assign({configurationService:l},t)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){He(this.styler),this.styler=e?_u(this.tree,this.themeService,e):q.None}dispose(){this.disposables=He(this.disposables),He(this.styler),this.styler=void 0}};bu=pa([Re(4,Le),Re(5,Zs),Re(6,At),Re(7,si),Re(8,rs)],bu);const bwe=$i.as(Eg.Configuration);bwe.registerConfiguration({id:"workbench",order:7,title:m("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[ju]:{type:"string",enum:["ctrlCmd","alt"],enumDescriptions:[m("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),m("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:m({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[OI]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:m({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Hs]:{type:"boolean",default:!1,description:m("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[V_]:{type:"number",default:8,minimum:0,maximum:40,description:m("tree indent setting","Controls tree indentation in pixels.")},[ey]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:m("render tree indent guides","Controls whether the tree should render indent guides.")},[co]:{type:"boolean",default:!1,description:m("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[ca]:{type:"number",default:1,description:m("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[ha]:{type:"number",default:5,description:m("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[JC]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[m("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),m("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),m("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:m("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.")},[bM]:{type:"boolean",default:!0,markdownDescription:m("automatic keyboard navigation setting","Controls whether keyboard navigation in lists and trees is automatically triggered simply by typing. If set to `false`, keyboard navigation is only triggered when executing the `list.toggleKeyboardNavigation` command, for which you can assign a keyboard shortcut.")},[ty]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:m("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}}});var Ot;(function(n){n[n.Hint=1]="Hint",n[n.Info=2]="Info",n[n.Warning=4]="Warning",n[n.Error=8]="Error"})(Ot||(Ot={}));(function(n){function e(o,a){return a-o}n.compare=e;const t=Object.create(null);t[n.Error]=m("sev.error","Error"),t[n.Warning]=m("sev.warning","Warning"),t[n.Info]=m("sev.info","Info");function i(o){return t[o]||""}n.toString=i;function s(o){switch(o){case qt.Error:return n.Error;case qt.Warning:return n.Warning;case qt.Info:return n.Info;case qt.Ignore:return n.Hint}}n.fromSeverity=s;function r(o){switch(o){case n.Error:return qt.Error;case n.Warning:return qt.Warning;case n.Info:return qt.Info;case n.Hint:return qt.Ignore}}n.toSeverity=r})(Ot||(Ot={}));var iy;(function(n){const e="";function t(s){return i(s,!0)}n.makeKey=t;function i(s,r){let o=[e];return s.source?o.push(s.source.replace("\xA6","\\\xA6")):o.push(e),s.code?typeof s.code=="string"?o.push(s.code.replace("\xA6","\\\xA6")):o.push(s.code.value.replace("\xA6","\\\xA6")):o.push(e),s.severity!==void 0&&s.severity!==null?o.push(Ot.toString(s.severity)):o.push(e),s.message&&r?o.push(s.message.replace("\xA6","\\\xA6")):o.push(e),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(e),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(e),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(e),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(e),o.push(e),o.join("\xA6")}n.makeKeyOptionalMessage=i})(iy||(iy={}));const K0=Xe("markerService");class vwe{constructor(){this._byResource=new _n,this._byOwner=new Map}set(e,t,i){let s=this._byResource.get(e);s||(s=new Map,this._byResource.set(e,s)),s.set(t,i);let r=this._byOwner.get(t);r||(r=new _n,this._byOwner.set(t,r)),r.set(e,i)}get(e,t){let i=this._byResource.get(e);return i==null?void 0:i.get(t)}delete(e,t){let i=!1,s=!1,r=this._byResource.get(e);r&&(i=r.delete(t));let o=this._byOwner.get(t);if(o&&(s=o.delete(e)),i!==s)throw new Error("illegal state");return i&&s}values(e){var t,i,s,r;return typeof e=="string"?(i=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&i!==void 0?i:Ue.empty():xe.isUri(e)?(r=(s=this._byResource.get(e))===null||s===void 0?void 0:s.values())!==null&&r!==void 0?r:Ue.empty():Ue.map(Ue.concat(...this._byOwner.values()),o=>o[1])}}class wwe{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new _n,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const i=this._data.get(t);i&&this._substract(i);const s=this._resourceStats(t);this._add(s),this._data.set(t,s)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===Ve.inMemory||e.scheme===Ve.walkThrough||e.scheme===Ve.walkThroughSnippet)return t;for(const{severity:i}of this._service.read({resource:e}))i===Ot.Error?t.errors+=1:i===Ot.Warning?t.warnings+=1:i===Ot.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class oh{constructor(){this._onMarkerChanged=new Boe({delay:0,merge:oh._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new vwe,this._stats=new wwe(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const i of t||[])this.changeOne(e,i,[])}changeOne(e,t,i){if(PV(i))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const s=[];for(const r of i){const o=oh._toMarker(e,t,r);o&&s.push(o)}this._data.set(t,e,s),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,i){let{code:s,severity:r,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:h,endColumn:u,relatedInformation:d,tags:f}=i;if(!!o)return l=l>0?l:1,c=c>0?c:1,h=h>=l?h:l,u=u>0?u:c,{resource:t,owner:e,code:s,severity:r,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:h,endColumn:u,relatedInformation:d,tags:f}}read(e=Object.create(null)){let{owner:t,resource:i,severities:s,take:r}=e;if((!r||r<0)&&(r=-1),t&&i){const o=this._data.get(i,t);if(o){const a=[];for(const l of o)if(oh._accept(l,s)){const c=a.push(l);if(r>0&&c===r)break}return a}else return[]}else if(!t&&!i){const o=[];for(let a of this._data.values())for(let l of a)if(oh._accept(l,s)){const c=o.push(l);if(r>0&&c===r)return o}return o}else{const o=this._data.values(i!=null?i:t),a=[];for(const l of o)for(const c of l)if(oh._accept(c,s)){const h=a.push(c);if(r>0&&h===r)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new _n;for(let i of e)for(let s of i)t.set(s,!0);return Array.from(t.keys())}}var Jv=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})},Kd;(function(n){n[n.None=0]="None",n[n.Initialized=1]="Initialized",n[n.Closed=2]="Closed"})(Kd||(Kd={}));class W_ extends q{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new R),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=Kd.None,this.cache=new Map,this.flushDelayer=new vae(W_.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,i;(t=e.changed)===null||t===void 0||t.forEach((s,r)=>this.accept(r,s)),(i=e.deleted)===null||i===void 0||i.forEach(s=>this.accept(s,void 0))}accept(e,t){if(this.state===Kd.Closed)return;let i=!1;Ms(t)?i=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),i=!0),i&&this._onDidChangeStorage.fire(e)}get(e,t){const i=this.cache.get(e);return Ms(i)?t:i}getBoolean(e,t){const i=this.get(e);return Ms(i)?t:i==="true"}getNumber(e,t){const i=this.get(e);return Ms(i)?t:parseInt(i,10)}set(e,t){return Jv(this,void 0,void 0,function*(){if(this.state===Kd.Closed)return;if(Ms(t))return this.delete(e);const i=String(t);if(this.cache.get(e)!==i)return this.cache.set(e,i),this.pendingInserts.set(e,i),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger(()=>this.flushPending())})}delete(e){return Jv(this,void 0,void 0,function*(){if(!(this.state===Kd.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger(()=>this.flushPending())})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return Jv(this,void 0,void 0,function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})})}dispose(){this.flushDelayer.dispose(),super.dispose()}}W_.DEFAULT_FLUSH_DELAY=100;class x3{constructor(){this.onDidChangeItemsExternal=ue.None,this.items=new Map}updateItems(e){return Jv(this,void 0,void 0,function*(){e.insert&&e.insert.forEach((t,i)=>this.items.set(i,t)),e.delete&&e.delete.forEach(t=>this.items.delete(t))})}}const Zb="__$__targetStorageMarker",qu=Xe("storageService");var BI;(function(n){n[n.NONE=0]="NONE",n[n.SHUTDOWN=1]="SHUTDOWN"})(BI||(BI={}));class sS extends q{constructor(e={flushInterval:sS.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new Vw),this._onDidChangeTarget=this._register(new Vw),this._onWillSaveState=this._register(new R),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._globalKeyTargets=void 0}emitDidChangeValue(e,t){t===Zb?(e===0?this._globalKeyTargets=void 0:e===1&&(this._workspaceKeyTargets=void 0),this._onDidChangeTarget.fire({scope:e})):this._onDidChangeValue.fire({scope:e,key:t,target:this.getKeyTargets(e)[t]})}get(e,t,i){var s;return(s=this.getStorage(t))===null||s===void 0?void 0:s.get(e,i)}getBoolean(e,t,i){var s;return(s=this.getStorage(t))===null||s===void 0?void 0:s.getBoolean(e,i)}getNumber(e,t,i){var s;return(s=this.getStorage(t))===null||s===void 0?void 0:s.getNumber(e,i)}store(e,t,i,s){if(Ms(t)){this.remove(e,i);return}this.withPausedEmitters(()=>{var r;this.updateKeyTarget(e,i,s),(r=this.getStorage(i))===null||r===void 0||r.set(e,t)})}remove(e,t){this.withPausedEmitters(()=>{var i;this.updateKeyTarget(e,t,void 0),(i=this.getStorage(t))===null||i===void 0||i.delete(e)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,i){var s,r;const o=this.getKeyTargets(t);typeof i=="number"?o[e]!==i&&(o[e]=i,(s=this.getStorage(t))===null||s===void 0||s.set(Zb,JSON.stringify(o))):typeof o[e]=="number"&&(delete o[e],(r=this.getStorage(t))===null||r===void 0||r.set(Zb,JSON.stringify(o)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get globalKeyTargets(){return this._globalKeyTargets||(this._globalKeyTargets=this.loadKeyTargets(0)),this._globalKeyTargets}getKeyTargets(e){return e===0?this.globalKeyTargets:this.workspaceKeyTargets}loadKeyTargets(e){const t=this.get(Zb,e);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}}sS.DEFAULT_FLUSH_INTERVAL=60*1e3;class Cwe extends sS{constructor(){super(),this.globalStorage=this._register(new W_(new x3)),this.workspaceStorage=this._register(new W_(new x3)),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.globalStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e)))}getStorage(e){return e===0?this.globalStorage:this.workspaceStorage}}var gH=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ew=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let VI=class{constructor(e){this._commandService=e}createMenu(e,t,i){return new WI(e,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},i),this._commandService,t,this)}};VI=gH([ew(0,Fi)],VI);let WI=class Nd{constructor(e,t,i,s,r){this._id=e,this._options=t,this._commandService=i,this._contextKeyService=s,this._menuService=r,this._disposables=new ee,this._menuGroups=[],this._contextKeys=new Set,this._build();const o=new Wt(()=>{this._build(),this._onDidChange.fire(this)},t.eventDebounceDelay);this._disposables.add(o),this._disposables.add(Xr.onDidChangeMenu(c=>{c.has(e)&&o.schedule()}));const a=this._disposables.add(new ee),l=()=>{const c=new Wt(()=>this._onDidChange.fire(this),t.eventDebounceDelay);a.add(c),a.add(s.onDidChangeContext(h=>{h.affectsSome(this._contextKeys)&&c.schedule()}))};this._onDidChange=new R({onFirstListenerAdd:l,onLastListenerRemove:a.clear.bind(a)}),this.onDidChange=this._onDidChange.event}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();const e=Xr.getMenuItems(this._id);let t;e.sort(Nd._compareMenuItems);for(const i of e){const s=i.group||"";(!t||t[0]!==s)&&(t=[s,[]],this._menuGroups.push(t)),t[1].push(i),this._collectContextKeys(i)}}_collectContextKeys(e){if(Nd._fillInKbExprKeys(e.when,this._contextKeys),Np(e)){if(e.command.precondition&&Nd._fillInKbExprKeys(e.command.precondition,this._contextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;Nd._fillInKbExprKeys(t,this._contextKeys)}}else this._options.emitEventsForSubmenuChanges&&Xr.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}getActions(e){const t=[];for(let i of this._menuGroups){const[s,r]=i,o=[];for(const a of r)if(this._contextKeyService.contextMatchesRules(a.when)){const l=Np(a)?new gc(a.command,a.alt,e,this._contextKeyService,this._commandService):new lW(a,this._menuService,this._contextKeyService,e);o.push(l)}o.length>0&&t.push([s,o])}return t}static _fillInKbExprKeys(e,t){if(e)for(let i of e.keys())t.add(i)}static _compareMenuItems(e,t){let i=e.group,s=t.group;if(i!==s){if(i){if(!s)return-1}else return 1;if(i==="navigation")return-1;if(s==="navigation")return 1;let a=i.localeCompare(s);if(a!==0)return a}let r=e.order||0,o=t.order||0;return r<o?-1:r>o?1:Nd._compareTitles(Np(e)?e.command.title:e.title,Np(t)?t.command.title:t.title)}static _compareTitles(e,t){const i=typeof e=="string"?e:e.original,s=typeof t=="string"?t:t.original;return i.localeCompare(s)}};WI=gH([ew(2,Fi),ew(3,Le),ew(4,Tg)],WI);var ywe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},D3=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};class Swe extends q{constructor(e){super(),this.model=e,this._markersData=new Map,this._register(Ze(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,t){const i=[...this._markersData.keys()];this._markersData.clear();const s=this.model.deltaDecorations(i,t);for(let r=0;r<s.length;r++)this._markersData.set(s[r],e[r]);return i.length!==0||s.length!==0}getMarker(e){return this._markersData.get(e.id)}}let zI=class extends q{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new R),this._markerDecorations=new _n,e.getModels().forEach(i=>this._onModelAdded(i)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const i=this._markerDecorations.get(e);return i&&i.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const i=this._markerDecorations.get(t);i&&this._updateDecorations(i)})}_onModelAdded(e){const t=new Swe(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===Ve.inMemory||e.uri.scheme===Ve.internal||e.uri.scheme===Ve.vscode)&&this._markerService&&this._markerService.read({resource:e.uri}).map(i=>i.owner).forEach(i=>this._markerService.remove(i,[e.uri]))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});let i=t.map(s=>({range:this._createDecorationRange(e.model,s),options:this._createDecorationOption(s)}));e.update(t,i)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,t){let i=I.lift(t);return t.severity===Ot.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),e.validateRange(i)}_createDecorationOption(e){let t,i,s,r,o;switch(e.severity){case Ot.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",s=0;break;case Ot.Warning:t="squiggly-warning",i=ms(npe),s=20,o={color:ms(Tge),position:Qo.Inline};break;case Ot.Info:t="squiggly-info",i=ms(spe),s=10;break;case Ot.Error:default:t="squiggly-error",i=ms(ipe),s=30,o={color:ms(Ige),position:Qo.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(r="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(r="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:i,position:ra.Right},minimap:o,zIndex:s,inlineClassName:r}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}};zI=ywe([D3(0,zn),D3(1,K0)],zI);var xwe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},L3=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let HI=class extends q{constructor(e,t){super(),this._contextKeyService=e,this._configurationService=t,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new R,this._accessibilityModeEnabledContext=P_e.bindTo(this._contextKeyService);const i=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(s=>{s.affectsConfiguration("editor.accessibilitySupport")&&(i(),this._onDidChangeScreenReaderOptimized.fire())})),i(),this.onDidChangeScreenReaderOptimized(()=>i())}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}getAccessibilitySupport(){return this._accessibilitySupport}};HI=xwe([L3(0,Le),L3(1,si)],HI);var Xb=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class Dwe{constructor(){this.mapTextToType=new Map,this.findText=""}writeText(e,t){return Xb(this,void 0,void 0,function*(){if(t){this.mapTextToType.set(t,e);return}try{return yield navigator.clipboard.writeText(e)}catch(r){console.error(r)}const i=document.activeElement,s=document.body.appendChild(J("textarea",{"aria-hidden":!0}));s.style.height="1px",s.style.width="1px",s.style.position="absolute",s.value=e,s.focus(),s.select(),document.execCommand("copy"),i instanceof HTMLElement&&i.focus(),document.body.removeChild(s)})}readText(e){return Xb(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(t){return console.error(t),""}})}readFindText(){return Xb(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return Xb(this,void 0,void 0,function*(){this.findText=e})}}var Lwe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},k3=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},Qb=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};function Jb(n){return n.scheme===Ve.file?n.fsPath:n.path}let pH=0;class ev{constructor(e,t,i,s,r,o,a){this.id=++pH,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=s,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class E3{constructor(e,t){this.resourceLabel=e,this.reason=t}}class I3{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,s]of this.elements)(s.reason===0?e:t).push(s.resourceLabel);let i=[];return e.length>0&&i.push(m({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&i.push(m({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),i.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class kwe{constructor(e,t,i,s,r,o,a){this.id=++pH,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=i,this.groupId=s,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,i){this.removedResources||(this.removedResources=new I3),this.removedResources.has(t)||this.removedResources.set(t,new E3(e,i))}setValid(e,t,i){i?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new I3),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new E3(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class mH{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){let e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const i of this._past)t(i.actual)&&this._setElementValidFlag(i,e);for(const i of this._future)t(i.actual)&&this._setElementValidFlag(i,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let i=0,s=this._past.length;i<s;i++)t.push(this._past[i].id);for(let i=this._future.length-1;i>=0;i--)t.push(this._future[i].id);return new kW(e,t)}restoreSnapshot(e){const t=e.elements.length;let i=!0,s=0,r=-1;for(let a=0,l=this._past.length;a<l;a++,s++){const c=this._past[a];i&&(s>=t||c.id!==e.elements[s])&&(i=!1,r=0),!i&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let o=-1;for(let a=this._future.length-1;a>=0;a--,s++){const l=this._future[a];i&&(s>=t||l.id!==e.elements[s])&&(i=!1,o=a),!i&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}r!==-1&&(this._past=this._past.slice(0,r)),o!==-1&&(this._future=this._future.slice(o+1)),this.versionId++}getElements(){const e=[],t=[];for(const i of this._past)e.push(i.actual);for(const i of this._future)t.push(i.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let i=this._past.length-1;i>=0;i--)if(this._past[i]===e){t.has(this.strResource)?this._past[i]=t.get(this.strResource):this._past.splice(i,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let i=this._future.length-1;i>=0;i--)if(this._future[i]===e){t.has(this.strResource)?this._future[i]=t.get(this.strResource):this._future.splice(i,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class RD{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,i=this.editStacks.length;t<i;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const _H=new mH("","");_H.locked=!0;let ny=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);let t=[];for(const i of this._editStacks)t.push(i[1].toString());console.log(t.join(`
`))}pushElement(e,t=Kf.None,i=Wo.None){if(e.type===0){const s=Jb(e.resource),r=this.getUriComparisonKey(e.resource);this._pushElement(new ev(e,s,r,t.id,t.nextOrder(),i.id,i.nextOrder()))}else{const s=new Set,r=[],o=[];for(const a of e.resources){const l=Jb(a),c=this.getUriComparisonKey(a);s.has(c)||(s.add(c),r.push(l),o.push(c))}r.length===1?this._pushElement(new ev(e,r[0],o[0],t.id,t.nextOrder(),i.id,i.nextOrder())):this._pushElement(new kwe(e,r,o,t.id,t.nextOrder(),i.id,i.nextOrder()))}}_pushElement(e){for(let t=0,i=e.strResources.length;t<i;t++){const s=e.resourceLabels[t],r=e.strResources[t];let o;this._editStacks.has(r)?o=this._editStacks.get(r):(o=new mH(s,r),this._editStacks.set(r,o)),o.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const i=this._editStacks.get(t);if(i.hasFutureElements())return null;const s=i.getClosestPastElement();return s?s.actual:null}return null}_splitPastWorkspaceElement(e,t){const i=e.actual.split(),s=new Map;for(const r of i){const o=Jb(r.resource),a=this.getUriComparisonKey(r.resource),l=new ev(r,o,a,0,0,0,0);s.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitPastWorkspaceElement(e,s)}}_splitFutureWorkspaceElement(e,t){const i=e.actual.split(),s=new Map;for(const r of i){const o=Jb(r.resource),a=this.getUriComparisonKey(r.resource),l=new ev(r,o,a,0,0,0,0);s.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitFutureWorkspaceElement(e,s)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,i){const s=this.getUriComparisonKey(e);this._editStacks.has(s)&&this._editStacks.get(s).setElementsValidFlag(t,i)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new kW(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const i=this._editStacks.get(t);i.restoreSnapshot(e),!i.hasPastElements()&&!i.hasFutureElements()&&(i.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[s,r]of this._editStacks){const o=r.getClosestPastElement();!o||o.sourceId===e&&(!t||o.sourceOrder>t.sourceOrder)&&(t=o,i=s)}return[t,i]}canUndo(e){if(e instanceof Wo){const[,i]=this._findClosestUndoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){Ie(e);for(const i of t.strResources)this.removeElements(i);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,i,s,r){const o=this._acquireLocks(i);let a;try{a=t()}catch(l){return o(),s.dispose(),this._onError(l,e)}return a?a.then(()=>(o(),s.dispose(),r()),l=>(o(),s.dispose(),this._onError(l,e))):(o(),s.dispose(),r())}_invokeWorkspacePrepare(e){return Qb(this,void 0,void 0,function*(){if(typeof e.actual.prepareUndoRedo=="undefined")return q.None;const t=e.actual.prepareUndoRedo();return typeof t=="undefined"?q.None:t})}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo=="undefined")return t(q.None);const i=e.actual.prepareUndoRedo();return i?x9(i)?t(i):i.then(s=>t(s)):t(q.None)}_getAffectedEditStacks(e){const t=[];for(const i of e.strResources)t.push(this._editStacks.get(i)||_H);return new RD(t)}_tryToSplitAndUndo(e,t,i,s){if(t.canSplit())return this._splitPastWorkspaceElement(t,i),this._notificationService.warn(s),new tv(this._undo(e,0,!0));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(s),new tv}_checkWorkspaceUndo(e,t,i,s){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,m({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,m({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of i.editStacks)a.getClosestPastElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndUndo(e,t,null,m({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of i.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndUndo(e,t,null,m({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):i.isValid()?null:this._tryToSplitAndUndo(e,t,null,m({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,i){const s=this._getAffectedEditStacks(t),r=this._checkWorkspaceUndo(e,t,s,!1);return r?r.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,s,i)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const i=t.getClosestPastElement();if(!!i){if(i===e){const s=t.getSecondClosestPastElement();if(s&&s.groupId===e.groupId)return!0}if(i.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,t,i,s){return Qb(this,void 0,void 0,function*(){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){const a=yield this._dialogService.show(qt.Info,m("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),[m({key:"ok",comment:["{0} denotes a number that is > 1"]},"Undo in {0} Files",i.editStacks.length),m("nok","Undo this File"),m("cancel","Cancel")],{cancelId:2});if(a.choice===2)return;if(a.choice===1)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const l=this._checkWorkspaceUndo(e,t,i,!1);if(l)return l.returnValue;s=!0}let r;try{r=yield this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const o=this._checkWorkspaceUndo(e,t,i,!0);if(o)return r.dispose(),o.returnValue;for(const a of i.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),i,r,()=>this._continueUndoInGroup(t.groupId,s))})}_resourceUndo(e,t,i){if(!t.isValid){e.flushAllElements();return}if(e.locked){const s=m({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(s);return}return this._invokeResourcePrepare(t,s=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new RD([e]),s,()=>this._continueUndoInGroup(t.groupId,i))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[s,r]of this._editStacks){const o=r.getClosestPastElement();!o||o.groupId===e&&(!t||o.groupOrder>t.groupOrder)&&(t=o,i=s)}return[t,i]}_continueUndoInGroup(e,t){if(!e)return;const[,i]=this._findClosestUndoElementInGroup(e);if(i)return this._undo(i,0,t)}undo(e){if(e instanceof Wo){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,i){if(!this._editStacks.has(e))return;const s=this._editStacks.get(e),r=s.getClosestPastElement();if(!r)return;if(r.groupId){const[a,l]=this._findClosestUndoElementInGroup(r.groupId);if(r!==a&&l)return this._undo(l,t,i)}if((r.sourceId!==t||r.confirmBeforeUndo)&&!i)return this._confirmAndContinueUndo(e,t,r);try{return r.type===1?this._workspaceUndo(e,r,i):this._resourceUndo(s,r,i)}finally{}}_confirmAndContinueUndo(e,t,i){return Qb(this,void 0,void 0,function*(){if((yield this._dialogService.show(qt.Info,m("confirmDifferentSource","Would you like to undo '{0}'?",i.label),[m("confirmDifferentSource.yes","Yes"),m("cancel","Cancel")],{cancelId:1})).choice!==1)return this._undo(e,t,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[s,r]of this._editStacks){const o=r.getClosestFutureElement();!o||o.sourceId===e&&(!t||o.sourceOrder<t.sourceOrder)&&(t=o,i=s)}return[t,i]}canRedo(e){if(e instanceof Wo){const[,i]=this._findClosestRedoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,i,s){if(t.canSplit())return this._splitFutureWorkspaceElement(t,i),this._notificationService.warn(s),new tv(this._redo(e));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(s),new tv}_checkWorkspaceRedo(e,t,i,s){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,m({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,m({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of i.editStacks)a.getClosestFutureElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndRedo(e,t,null,m({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of i.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndRedo(e,t,null,m({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):i.isValid()?null:this._tryToSplitAndRedo(e,t,null,m({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const i=this._getAffectedEditStacks(t),s=this._checkWorkspaceRedo(e,t,i,!1);return s?s.returnValue:this._executeWorkspaceRedo(e,t,i)}_executeWorkspaceRedo(e,t,i){return Qb(this,void 0,void 0,function*(){let s;try{s=yield this._invokeWorkspacePrepare(t)}catch(o){return this._onError(o,t)}const r=this._checkWorkspaceRedo(e,t,i,!0);if(r)return s.dispose(),r.returnValue;for(const o of i.editStacks)o.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),i,s,()=>this._continueRedoInGroup(t.groupId))})}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=m({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new RD([e]),i,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[s,r]of this._editStacks){const o=r.getClosestFutureElement();!o||o.groupId===e&&(!t||o.groupOrder<t.groupOrder)&&(t=o,i=s)}return[t,i]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof Wo){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),i=t.getClosestFutureElement();if(!!i){if(i.groupId){const[s,r]=this._findClosestRedoElementInGroup(i.groupId);if(i!==s&&r)return this._redo(r)}try{return i.type===1?this._workspaceRedo(e,i):this._resourceRedo(t,i)}finally{}}}};ny=Lwe([k3(0,Yz),k3(1,en)],ny);class tv{constructor(e){this.returnValue=e}}Ru(V0,ny);const Ewe=new RegExp(`(\\\\)?\\$\\((${Xn.iconNameExpression}(?:${Xn.iconModifierExpression})?)\\)`,"g");function wf(n){const e=new Array;let t,i=0,s=0;for(;(t=Ewe.exec(n))!==null;){s=t.index||0,e.push(n.substring(i,s)),i=(t.index||0)+t[0].length;const[,r,o]=t;e.push(r?`$(${o})`:Iwe({id:o}))}return i<n.length&&e.push(n.substring(i)),e}function Iwe(n){const e=J("span");return e.classList.add(...Xn.asClassNameArray(n)),e}const Twe={buttonBackground:V.fromHex("#0E639C"),buttonHoverBackground:V.fromHex("#006BB3"),buttonForeground:V.white};class T3 extends q{constructor(e,t){super(),this._onDidClick=this._register(new R),this.options=t||Object.create(null),po(this.options,Twe,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),e.appendChild(this._element),this._register(st.addTarget(this._element)),[de.CLICK,bt.Tap].forEach(i=>{this._register(K(this._element,i,s=>{if(!this.enabled){ot.stop(s);return}this._onDidClick.fire(s)}))}),this._register(K(this._element,de.KEY_DOWN,i=>{const s=new Ft(i);let r=!1;this.enabled&&(s.equals(3)||s.equals(10))?(this._onDidClick.fire(i),r=!0):s.equals(9)&&(this._element.blur(),r=!0),r&&ot.stop(s,!0)})),this._register(K(this._element,de.MOUSE_OVER,i=>{this._element.classList.contains("disabled")||this.setHoverBackground()})),this._register(K(this._element,de.MOUSE_OUT,i=>{this.applyStyles()})),this.focusTracker=this._register(Pf(this._element)),this._register(this.focusTracker.onDidFocus(()=>this.setHoverBackground())),this._register(this.focusTracker.onDidBlur(()=>this.applyStyles())),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let e;this.options.secondary?e=this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:e=this.buttonHoverBackground?this.buttonHoverBackground.toString():null,e&&(this._element.style.backgroundColor=e)}style(e){this.buttonForeground=e.buttonForeground,this.buttonBackground=e.buttonBackground,this.buttonHoverBackground=e.buttonHoverBackground,this.buttonSecondaryForeground=e.buttonSecondaryForeground,this.buttonSecondaryBackground=e.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=e.buttonSecondaryHoverBackground,this.buttonBorder=e.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let e,t;this.options.secondary?(t=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():"",e=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():""):(t=this.buttonForeground?this.buttonForeground.toString():"",e=this.buttonBackground?this.buttonBackground.toString():"");const i=this.buttonBorder?this.buttonBorder.toString():"";this._element.style.color=t,this._element.style.backgroundColor=e,this._element.style.borderWidth=i?"1px":"",this._element.style.borderStyle=i?"solid":"",this._element.style.borderColor=i}}get element(){return this._element}set label(e){this._element.classList.add("monaco-text-button"),this.options.supportIcons?R0(this._element,...wf(e)):this._element.textContent=e,typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=e)}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}const Nwe={badgeBackground:V.fromHex("#4D4D4D"),badgeForeground:V.fromHex("#FFFFFF")};class $I{constructor(e,t){this.count=0,this.options=t||Object.create(null),po(this.options,Nwe,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=Y(e,J(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=cr(this.countFormat,this.count),this.element.title=cr(this.titleFormat,this.count),this.applyStyles()}style(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){const e=this.badgeBackground?this.badgeBackground.toString():"",t=this.badgeForeground?this.badgeForeground.toString():"",i=this.badgeBorder?this.badgeBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.element.style.borderWidth=i?"1px":"",this.element.style.borderStyle=i?"solid":"",this.element.style.borderColor=i}}}const N3="done",A3="active",OD="infinite",M3="discrete",Awe={progressBarBackground:V.fromHex("#0E70C0")};class Mwe extends q{constructor(e,t){super(),this.options=t||Object.create(null),po(this.options,Awe,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this._register(this.showDelayedScheduler=new Wt(()=>ps(this.element),0)),this.create(e)}create(e){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(A3,OD,M3),this.workedVal=0,this.totalWork=void 0}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(N3),this.element.classList.contains(OD)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(M3,N3),this.element.classList.add(A3,OD),this}getContainer(){return this.element}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){const e=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=e}}}class wM{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const bH=new wM("id#");const FD={},Rwe=new wM("quick-input-button-icon-");function UI(n){if(!n)return;let e;const t=n.dark.toString();return FD[t]?e=FD[t]:(e=Rwe.nextId(),mE(`.${e}`,`background-image: ${ol(n.light||n.dark)}`),mE(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${ol(n.dark)}`),FD[t]=e),e}const Owe={ctrlCmd:!1,alt:!1};var z_;(function(n){n[n.Blur=1]="Blur",n[n.Gesture=2]="Gesture",n[n.Other=3]="Other"})(z_||(z_={}));var Mr;(function(n){n[n.NONE=0]="NONE",n[n.FIRST=1]="FIRST",n[n.SECOND=2]="SECOND",n[n.LAST=3]="LAST"})(Mr||(Mr={}));function Fwe(n,e={}){const t=CM(e);return t.textContent=n,t}function Pwe(n,e={}){const t=CM(e);return vH(t,Vwe(n,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function CM(n){const e=n.inline?"span":"div",t=document.createElement(e);return n.className&&(t.className=n.className),t}class Bwe{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function vH(n,e,t,i){let s;if(e.type===2)s=document.createTextNode(e.content||"");else if(e.type===3)s=document.createElement("b");else if(e.type===4)s=document.createElement("i");else if(e.type===7&&i)s=document.createElement("code");else if(e.type===5&&t){const r=document.createElement("a");r.href="#",t.disposables.add(mi(r,"click",o=>{t.callback(String(e.index),o)})),s=r}else e.type===8?s=document.createElement("br"):e.type===1&&(s=n);s&&n!==s&&n.appendChild(s),s&&Array.isArray(e.children)&&e.children.forEach(r=>{vH(s,r,t,i)})}function Vwe(n,e){const t={type:1,children:[]};let i=0,s=t;const r=[],o=new Bwe(n);for(;!o.eos();){let a=o.next();const l=a==="\\"&&jI(o.peek(),e)!==0;if(l&&(a=o.next()),!l&&Wwe(a,e)&&a===o.peek()){o.advance(),s.type===2&&(s=r.pop());const c=jI(a,e);if(s.type===c||s.type===5&&c===6)s=r.pop();else{const h={type:c,children:[]};c===5&&(h.index=i,i++),s.children.push(h),r.push(s),s=h}}else if(a===`
`)s.type===2&&(s=r.pop()),s.children.push({type:8});else if(s.type!==2){const c={type:2,content:a};s.children.push(c),r.push(s),s=c}else s.content+=a}return s.type===2&&(s=r.pop()),t}function Wwe(n,e){return jI(n,e)!==0}function jI(n,e){switch(n){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}class zwe{constructor(e,t=0,i=e.length,s=t-1){this.items=e,this.start=t,this.end=i,this.index=s}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class Hwe{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._currentPosition()!==this._elements.length-1?this._navigator.next():null}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new zwe(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const vp=J,$we={inputBackground:V.fromHex("#3C3C3C"),inputForeground:V.fromHex("#CCCCCC"),inputValidationInfoBorder:V.fromHex("#55AAFF"),inputValidationInfoBackground:V.fromHex("#063B49"),inputValidationWarningBorder:V.fromHex("#B89500"),inputValidationWarningBackground:V.fromHex("#352A05"),inputValidationErrorBorder:V.fromHex("#BE1100"),inputValidationErrorBackground:V.fromHex("#5A1D1D")};class wH extends Ys{constructor(e,t,i){var s;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new R),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=i||Object.create(null),po(this.options,$we,!1),this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(s=this.options.tooltip)!==null&&s!==void 0?s:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=Y(e,vp(".monaco-inputbox.idle"));let r=this.options.flexibleHeight?"textarea":"input",o=Y(this.element,vp(".ibwrapper"));if(this.input=Y(o,vp(r+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=Y(o,vp("div.mirror")),this.mirror.innerText="\xA0",this.scrollableElement=new P2(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),Y(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(c=>this.input.scrollTop=c.scrollTop));const a=this._register(new ft(document,"selectionchange")),l=ue.filter(a.event,()=>{const c=document.getSelection();return(c==null?void 0:c.anchorNode)===o});this._register(l(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this.ignoreGesture(this.input),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new ll(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:pE(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return sr(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){const i=parseFloat(this.mirror.style.paddingLeft||"")||0,s=parseFloat(this.mirror.style.paddingRight||"")||0;t=i+s}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.options.flexibleHeight&&this.options.flexibleWidth?this.input.style.width=`calc(100% - ${e}px)`:this.input.style.paddingRight=e+"px",this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:i})}showMessage(e,t){this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const i=this.stylesForType(this.message.type);this.element.style.border=i.border?`1px solid ${i.border}`:"",(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,t=()=>e.style.width=sr(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:s=>{if(!this.message)return null;e=Y(s,vp(".monaco-inputbox-container")),t();const r={inline:!0,className:"monaco-inputbox-message"},o=this.message.formatContent?Pwe(this.message.content,r):Fwe(this.message.content,r);o.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return o.style.backgroundColor=a.background?a.background.toString():"",o.style.color=a.foreground?a.foreground.toString():"",o.style.border=a.border?`1px solid ${a.border}`:"",Y(e,o),null},onHide:()=>{this.state="closed"},layout:t});let i;this.message.type===3?i=m("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?i=m("alertWarningMessage","Warning: {0}",this.message.content):i=m("alertInfoMessage","Info: {0}",this.message.content),Pu(i),this.state="open"}_hideMessage(){!this.contextViewProvider||(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,i=e.charCodeAt(e.length-1)===10?" ":"";(e+i).replace(/\u000c/g,"")?this.mirror.textContent=e+i:this.mirror.innerText="\xA0",this.layout()}style(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){const e=this.inputBackground?this.inputBackground.toString():"",t=this.inputForeground?this.inputForeground.toString():"",i=this.inputBorder?this.inputBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.input.style.backgroundColor="inherit",this.input.style.color=t,this.element.style.borderWidth=i?"1px":"",this.element.style.borderStyle=i?"solid":"",this.element.style.borderColor=i}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=pE(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,i=t.selectionStart,s=t.selectionEnd,r=t.value;i!==null&&s!==null&&(this.value=r.substr(0,i)+e+r.substr(s),t.setSelectionRange(i+1,i+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}}class CH extends wH{constructor(e,t,i){const s=m({key:"history.inputbox.hint",comment:["Text will be prefixed with \u21C5 plus a single space, then used as a hint where input field keeps history"]},"for history"),r=` or \u21C5 ${s}`,o=` (\u21C5 ${s})`;super(e,t,i),this.history=new Hwe(i.history,100);const a=()=>{if(i.showHistoryHint&&i.showHistoryHint()&&!this.placeholder.endsWith(r)&&!this.placeholder.endsWith(o)&&this.history.getHistory().length){const l=this.placeholder.endsWith(")")?r:o,c=this.placeholder+l;i.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=c:this.setPlaceHolder(c)}};this.observer=new MutationObserver((l,c)=>{l.forEach(h=>{h.target.textContent||a()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>a()),this.onblur(this.input,()=>{const l=c=>{if(this.placeholder.endsWith(c)){const h=this.placeholder.slice(0,this.placeholder.length-c.length);return i.showPlaceholderOnFocus?this.placeholder=h:this.setPlaceHolder(h),!0}else return!1};l(o)||l(r)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),e&&(this.value=e,mC(this.value))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,mC(this.value))}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()||this.history.last()}}const Uwe=J;class jwe extends q{constructor(e){super(),this.parent=e,this.onKeyDown=t=>K(this.inputBox.inputElement,de.KEY_DOWN,i=>{t(new Ft(i))}),this.onMouseDown=t=>K(this.inputBox.inputElement,de.MOUSE_DOWN,i=>{t(new Vs(i))}),this.onDidChange=t=>this.inputBox.onDidChange(t),this.container=Y(this.parent,Uwe(".quick-input-box")),this.inputBox=this._register(new wH(this.container,void 0))}get value(){return this.inputBox.value}set value(e){this.inputBox.value=e}select(e=null){this.inputBox.select(e)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.inputBox.setPlaceHolder(e)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(e){this.inputBox.setAriaLabel(e)}get password(){return this.inputBox.inputElement.type==="password"}set password(e){this.inputBox.inputElement.type=e?"password":"text"}setAttribute(e,t){this.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===qt.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:e===qt.Info?1:e===qt.Warning?2:3,content:""})}stylesForType(e){return this.inputBox.stylesForType(e===qt.Info?1:e===qt.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(e){this.inputBox.style(e)}}class wc{constructor(e,t){this.supportIcons=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.domNode=document.createElement("span"),this.domNode.className="monaco-highlighted-label",e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t=[],i="",s){e||(e=""),s&&(e=wc.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===i&&Gr(this.highlights,t))&&(this.text=e,this.title=i,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const i of this.highlights){if(i.end===i.start)continue;if(t<i.start){const o=this.text.substring(t,i.start);e.push(J("span",void 0,...this.supportIcons?wf(o):[o])),t=i.end}const s=this.text.substring(i.start,i.end),r=J("span.highlight",void 0,...this.supportIcons?wf(s):[s]);i.extraClasses&&r.classList.add(i.extraClasses),e.push(r),t=i.end}if(t<this.text.length){const i=this.text.substring(t);e.push(J("span",void 0,...this.supportIcons?wf(i):[i]))}R0(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let i=0,s=0;return e.replace(/\r\n|\r|\n/g,(r,o)=>{s=r===`\r
`?-1:0,o+=i;for(const a of t)a.end<=o||(a.start>=o&&(a.start+=s),a.end>=o&&(a.end+=s));return i+=s,"\u23CE"})}}class ig{constructor(e="",t=!1){var i,s,r;if(this.value=e,typeof this.value!="string")throw Zo("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(i=t.isTrusted)!==null&&i!==void 0?i:void 0,this.supportThemeIcons=(s=t.supportThemeIcons)!==null&&s!==void 0?s:!1,this.supportHtml=(r=t.supportHtml)!==null&&r!==void 0?r:!1)}appendText(e,t=0){return this.value+=qwe(this.supportThemeIcons?Gbe(e):e).replace(/([ \t]+)/g,(i,s)=>"&nbsp;".repeat(s.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=t,this.value+="\n```\n",this}}function xm(n){return yH(n)?!n.value:Array.isArray(n)?n.every(xm):!0}function yH(n){return n instanceof ig?!0:n&&typeof n=="object"?typeof n.value=="string"&&(typeof n.isTrusted=="boolean"||n.isTrusted===void 0)&&(typeof n.supportThemeIcons=="boolean"||n.supportThemeIcons===void 0):!1}function qwe(n){return n.replace(/[\\`*_{}[\]()#+\-!]/g,"\\$&")}function PD(n){return n&&n.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1")}function Kwe(n){const e=[],t=n.split("|").map(s=>s.trim());n=t[0];const i=t[1];if(i){const s=/height=(\d+)/.exec(i),r=/width=(\d+)/.exec(i),o=s?s[1]:"",a=r?r[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(o));l&&e.push(`width="${a}"`),c&&e.push(`height="${o}"`)}return{href:n,dimensions:e}}var qI=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};function Gwe(n,e){oo(e)?n.title=e:e!=null&&e.markdownNotSupportedFallback?n.title=e.markdownNotSupportedFallback:n.removeAttribute("title")}class Ywe{constructor(e,t,i){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=i}update(e,t){var i;return qI(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let s;if(e===void 0||oo(e)||e instanceof HTMLElement)s=e;else if(!Qp(e.markdown))s=(i=e.markdown)!==null&&i!==void 0?i:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(m("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new go;const r=this._cancellationTokenSource.token;if(s=yield e.markdown(r),this.isDisposed||r.isCancellationRequested)return}this.show(s,t)})}show(e,t){const i=this._hoverWidget;if(this.hasContent(e)){const s={content:e,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!i};this._hoverWidget=this.hoverDelegate.showHover(s,t)}i==null||i.dispose()}hasContent(e){return e?yH(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}}function Zwe(n,e,t){let i,s;const r=(h,u)=>{var d;h&&(s==null||s.dispose(),s=void 0),u&&(i==null||i.dispose(),i=void 0),(d=n.onDidHideHover)===null||d===void 0||d.call(n)},o=(h,u,d)=>new Wn(()=>qI(this,void 0,void 0,function*(){(!s||s.isDisposed)&&(s=new Ywe(n,d||e,h>0),yield s.update(t,u))}),h),a=()=>{if(i)return;const h=new ee,u=g=>r(!1,g.fromElement===e);h.add(K(e,de.MOUSE_LEAVE,u,!0));const d=()=>r(!0,!0);h.add(K(e,de.MOUSE_DOWN,d,!0));const f={targetElements:[e],dispose:()=>{}};if(n.placement===void 0||n.placement==="mouse"){const g=p=>f.x=p.x+10;h.add(K(e,de.MOUSE_MOVE,g,!0))}h.add(o(n.delay,!1,f)),i=h},l=K(e,de.MOUSE_OVER,a,!0);return{show:h=>{r(!1,!0),o(0,h)},hide:()=>{r(!0,!0)},update:h=>qI(this,void 0,void 0,function*(){t=h,yield s==null?void 0:s.update(t)}),dispose:()=>{l.dispose(),r(!0,!0)}}}class BD{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class yM extends q{constructor(e,t){super(),this.customHovers=new Map,this.domNode=this._register(new BD(Y(e,J(".monaco-icon-label")))),this.labelContainer=Y(this.domNode.element,J(".monaco-icon-label-container"));const i=Y(this.labelContainer,J("span.monaco-icon-name-container"));this.descriptionContainer=this._register(new BD(Y(this.labelContainer,J("span.monaco-icon-description-container")))),(t==null?void 0:t.supportHighlights)||(t==null?void 0:t.supportIcons)?this.nameNode=new Jwe(i,!!t.supportIcons):this.nameNode=new Xwe(i),t!=null&&t.supportDescriptionHighlights?this.descriptionNodeFactory=()=>new wc(Y(this.descriptionContainer.element,J("span.label-description")),!!t.supportIcons):this.descriptionNodeFactory=()=>this._register(new BD(Y(this.descriptionContainer.element,J("span.label-description")))),this.hoverDelegate=t==null?void 0:t.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,i){const s=["monaco-icon-label"];i&&(i.extraClasses&&s.push(...i.extraClasses),i.italic&&s.push("italic"),i.strikethrough&&s.push("strikethrough")),this.domNode.className=s.join(" "),this.setupHover(i!=null&&i.descriptionTitle?this.labelContainer:this.element,i==null?void 0:i.title),this.nameNode.setLabel(e,i),(t||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof wc?(this.descriptionNode.set(t||"",i?i.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,i==null?void 0:i.descriptionTitle)):(this.descriptionNode.textContent=t||"",this.setupHover(this.descriptionNode.element,(i==null?void 0:i.descriptionTitle)||""),this.descriptionNode.empty=!t))}setupHover(e,t){const i=this.customHovers.get(e);if(i&&(i.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(!this.hoverDelegate)Gwe(e,t);else{const s=Zwe(this.hoverDelegate,e,t);s&&this.customHovers.set(e,s)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}}class Xwe{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Gr(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=Y(this.container,J("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let i=0;i<e.length;i++){const s=e[i],r=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${i}`;Y(this.container,J("a.label-name",{id:r,"data-icon-label-count":e.length,"data-icon-label-index":i,role:"treeitem"},s)),i<e.length-1&&Y(this.container,J("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}}function Qwe(n,e,t){if(!t)return;let i=0;return n.map(s=>{const r={start:i,end:i+s.length},o=t.map(a=>qi.intersect(r,a)).filter(a=>!qi.isEmpty(a)).map(({start:a,end:l})=>({start:a-i,end:l-i}));return i=r.end+e.length,o})}class Jwe{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Gr(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new wc(Y(this.container,J("a.label-name",{id:t==null?void 0:t.domId})),this.supportIcons)),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const i=(t==null?void 0:t.separator)||"/",s=Qwe(e,i,t==null?void 0:t.matches);for(let r=0;r<e.length;r++){const o=e[r],a=s?s[r]:void 0,l=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${r}`,c=J("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":r,role:"treeitem"});new wc(Y(this.container,c),this.supportIcons).set(o,a,void 0,t==null?void 0:t.labelEscapeNewLines),r<e.length-1&&Y(c,J("span.label-separator",void 0,i))}}}}const iv=J;class SM{constructor(e,t,i){this.os=t,this.keyElements=new Set,this.options=i||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=Y(e,iv(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&SM.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){let[e,t]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),t&&(Y(this.domNode,iv("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,t,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){Yi(this.domNode),this.keyElements.clear()}renderPart(e,t,i){const s=u2.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,s.ctrlKey,Boolean(i==null?void 0:i.ctrlKey),s.separator),t.shiftKey&&this.renderKey(e,s.shiftKey,Boolean(i==null?void 0:i.shiftKey),s.separator),t.altKey&&this.renderKey(e,s.altKey,Boolean(i==null?void 0:i.altKey),s.separator),t.metaKey&&this.renderKey(e,s.metaKey,Boolean(i==null?void 0:i.metaKey),s.separator);const r=t.keyLabel;r&&this.renderKey(e,r,Boolean(i==null?void 0:i.keyCode),"")}renderKey(e,t,i,s){Y(e,this.createKeyElement(t,i?".highlight":"")),s&&Y(e,iv("span.monaco-keybinding-key-separator",void 0,s))}renderUnbound(e){Y(e,this.createKeyElement(m("unbound","Unbound")))}createKeyElement(e,t=""){const i=iv("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(i),i}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){var e;if(this.element){for(const t of this.keyElements)this.labelBackground&&(t.style.backgroundColor=(e=this.labelBackground)===null||e===void 0?void 0:e.toString()),this.labelBorder&&(t.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(t.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(t.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&Gr(e.firstPart,t.firstPart)&&Gr(e.chordPart,t.chordPart)}}const R3=new Yp(()=>{const n=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:n,collatorIsNumeric:n.resolvedOptions().numeric}});function eCe(n,e,t=!1){const i=n||"",s=e||"",r=R3.value.collator.compare(i,s);return R3.value.collatorIsNumeric&&r===0&&i!==s?i<s?-1:1:r}function tCe(n,e,t){const i=n.toLowerCase(),s=e.toLowerCase(),r=iCe(n,e,t);if(r)return r;const o=i.endsWith(t),a=s.endsWith(t);if(o!==a)return o?-1:1;const l=eCe(i,s);return l!==0?l:i.localeCompare(s)}function iCe(n,e,t){const i=n.toLowerCase(),s=e.toLowerCase(),r=i.startsWith(t),o=s.startsWith(t);if(r!==o)return r?-1:1;if(r&&o){if(i.length<s.length)return-1;if(i.length>s.length)return 1}return 0}var SH=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},nCe=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const Io=J;class sCe{constructor(e){this.hidden=!1,this._onChecked=new R,this.onChecked=this._onChecked.event,Object.assign(this,e)}get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}dispose(){this._onChecked.dispose()}}class G0{get templateId(){return G0.ID}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=Y(e,Io(".quick-input-list-entry"));const i=Y(t.entry,Io("label.quick-input-list-label"));t.toDisposeTemplate.push(mi(i,de.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=Y(i,Io("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(mi(t.checkbox,de.CHANGE,c=>{t.element.checked=t.checkbox.checked}));const s=Y(i,Io(".quick-input-list-rows")),r=Y(s,Io(".quick-input-list-row")),o=Y(s,Io(".quick-input-list-row"));t.label=new yM(r,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});const a=Y(r,Io(".quick-input-list-entry-keybinding"));t.keybinding=new SM(a,dr);const l=Y(o,Io(".quick-input-list-label-meta"));return t.detail=new wc(l,!0),t.separator=Y(t.entry,Io(".quick-input-list-separator")),t.actionBar=new ll(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,i){i.toDisposeElement=He(i.toDisposeElement),i.element=e,i.checkbox.checked=e.checked,i.toDisposeElement.push(e.onChecked(c=>i.checkbox.checked=c));const{labelHighlights:s,descriptionHighlights:r,detailHighlights:o}=e,a=Object.create(null);a.matches=s||[],a.descriptionTitle=e.saneDescription,a.descriptionMatches=r||[],a.extraClasses=e.item.iconClasses,a.italic=e.item.italic,a.strikethrough=e.item.strikethrough,i.label.setLabel(e.saneLabel,e.saneDescription,a),i.keybinding.set(e.item.keybinding),i.detail.set(e.saneDetail,o),e.separator&&e.separator.label?(i.separator.textContent=e.separator.label,i.separator.style.display=""):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!e.separator),i.actionBar.clear();const l=e.item.buttons;l&&l.length?(i.actionBar.push(l.map((c,h)=>{let u=c.iconClass||(c.iconPath?UI(c.iconPath):void 0);c.alwaysVisible&&(u=u?`${u} always-visible`:"always-visible");const d=new Cr(`id-${h}`,"",u,!0,()=>nCe(this,void 0,void 0,function*(){e.fireButtonTriggered({button:c,item:e.item})}));return d.tooltip=c.tooltip||"",d}),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i){i.toDisposeElement=He(i.toDisposeElement)}disposeTemplate(e){e.toDisposeElement=He(e.toDisposeElement),e.toDisposeTemplate=He(e.toDisposeTemplate)}}G0.ID="listelement";class rCe{getHeight(e){return e.saneDetail?44:22}getTemplateId(e){return G0.ID}}var Yt;(function(n){n[n.First=1]="First",n[n.Second=2]="Second",n[n.Last=3]="Last",n[n.Next=4]="Next",n[n.Previous=5]="Previous",n[n.NextPage=6]="NextPage",n[n.PreviousPage=7]="PreviousPage"})(Yt||(Yt={}));class xM{constructor(e,t,i){this.parent=e,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new R,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new R,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new R,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new R,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new R,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new R,this.onKeyDown=this._onKeyDown.event,this._onLeave=new R,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=Y(this.parent,Io(".quick-input-list"));const s=new rCe,r=new aCe;this.list=i.createList("QuickInput",this.container,s,[new G0],{identityProvider:{getId:o=>o.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:r}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(o=>{const a=new Ft(o);switch(a.keyCode){case 10:this.toggleCheckbox();break;case 31:(je?o.metaKey:o.ctrlKey)&&this.list.setFocus(mn(this.list.length));break;case 16:const l=this.list.getFocus();l.length===1&&l[0]===0&&this._onLeave.fire();break;case 18:const c=this.list.getFocus();c.length===1&&c[0]===this.list.length-1&&this._onLeave.fire();break}this._onKeyDown.fire(a)})),this.disposables.push(this.list.onMouseDown(o=>{o.browserEvent.button!==2&&o.browserEvent.preventDefault()})),this.disposables.push(K(this.container,de.CLICK,o=>{(o.x||o.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(o=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(o=>{typeof o.index=="number"&&(o.browserEvent.preventDefault(),this.list.setSelection([o.index]))})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return ue.map(this.list.onDidChangeFocus,e=>e.elements.map(t=>t.item))}get onDidChangeSelection(){return ue.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let i=0,s=e.length;i<s;i++){const r=e[i];if(!r.hidden)if(r.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0;const t=this.elements;for(let i=0,s=t.length;i<s;i++)t[i].checked&&e++;return e}getVisibleCount(){let e=0;const t=this.elements;for(let i=0,s=t.length;i<s;i++)t[i].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=He(this.elementDisposables);const t=i=>this.fireButtonTriggered(i);this.inputElements=e,this.elements=e.reduce((i,s,r)=>{var o,a,l;if(s.type!=="separator"){const c=r&&e[r-1],h=s.label&&s.label.replace(/\r?\n/g," "),u=s.meta&&s.meta.replace(/\r?\n/g," "),d=s.description&&s.description.replace(/\r?\n/g," "),f=s.detail&&s.detail.replace(/\r?\n/g," "),g=s.ariaLabel||[h,d,f].map(p=>ece(p)).filter(p=>!!p).join(", ");i.push(new sCe({index:r,item:s,saneLabel:h,saneMeta:u,saneAriaLabel:g,saneDescription:d,saneDetail:f,labelHighlights:(o=s.highlights)===null||o===void 0?void 0:o.label,descriptionHighlights:(a=s.highlights)===null||a===void 0?void 0:a.description,detailHighlights:(l=s.highlights)===null||l===void 0?void 0:l.detail,checked:!1,separator:c&&c.type==="separator"?c:void 0,fireButtonTriggered:t}))}return i},[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map(i=>i.onChecked(()=>this.fireCheckedEvents()))),this.elementsToIndexes=this.elements.reduce((i,s,r)=>(i.set(s.item,r),i),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t))),e.length>0){const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){try{this._fireCheckedEvents=!1;const t=new Set;for(const i of e)t.add(i);for(const i of this.elements)i.checked=t.has(i.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===Yt.Next&&this.list.getFocus()[0]===this.list.length-1&&(e=Yt.First),e===Yt.Previous&&this.list.getFocus()[0]===0&&(e=Yt.Last),e===Yt.Second&&this.list.length<2&&(e=Yt.First),e){case Yt.First:this.list.focusFirst();break;case Yt.Second:this.list.focusNth(1);break;case Yt.Last:this.list.focusLast();break;case Yt.Next:this.list.focusNext();break;case Yt.Previous:this.list.focusPrevious();break;case Yt.NextPage:this.list.focusNextPage();break;case Yt.PreviousPage:this.list.focusPreviousPage();break}const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(e){this.list.getHTMLElement().style.maxHeight=e?`calc(${Math.floor(e/44)*44}px)`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(i=>{i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=!1;const s=i.index&&this.inputElements[i.index-1];i.separator=s&&s.type==="separator"?s:void 0});else{let i;this.elements.forEach(s=>{const r=this.matchOnLabel?vh(Yb(e,Gb(s.saneLabel))):void 0,o=this.matchOnDescription?vh(Yb(e,Gb(s.saneDescription||""))):void 0,a=this.matchOnDetail?vh(Yb(e,Gb(s.saneDetail||""))):void 0,l=this.matchOnMeta?vh(Yb(e,Gb(s.saneMeta||""))):void 0;if(r||o||a||l?(s.labelHighlights=r,s.descriptionHighlights=o,s.detailHighlights=a,s.hidden=!1):(s.labelHighlights=void 0,s.descriptionHighlights=void 0,s.detailHighlights=void 0,s.hidden=!s.item.alwaysShow),s.separator=void 0,!this.sortByLabel){const c=s.index&&this.inputElements[s.index-1];i=c&&c.type==="separator"?c:i,i&&!s.hidden&&(s.separator=i,i=void 0)}})}const t=this.elements.filter(i=>!i.hidden);if(this.sortByLabel&&e){const i=e.toLowerCase();t.sort((s,r)=>oCe(s,r,i))}return this.elementsToIndexes=t.reduce((i,s,r)=>(i.set(s.item,r),i),new Map),this.list.splice(0,this.list.length,t),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(t.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(const i of e)i.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=He(this.elementDisposables),this.disposables=He(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}style(e){this.list.style(e)}}SH([ui],xM.prototype,"onDidChangeFocus",null);SH([ui],xM.prototype,"onDidChangeSelection",null);function oCe(n,e,t){const i=n.labelHighlights||[],s=e.labelHighlights||[];return i.length&&!s.length?-1:!i.length&&s.length?1:i.length===0&&s.length===0?0:tCe(n.saneLabel,e.saneLabel,t)}class aCe{getWidgetAriaLabel(){return m("quickInput","Quick Input")}getAriaLabel(e){return e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(){return"option"}}var O3=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const ls=J,lCe=Er("quick-input-back",se.arrowLeft),KI={iconClass:lCe.classNames,tooltip:m("quickInput.back","Back"),handle:-1};class rS extends q{constructor(e){super(),this.ui=e,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=rS.noPromptMessage,this._severity=qt.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new R),this.onDidHideEmitter=this._register(new R),this.onDisposeEmitter=this._register(new R),this.visibleDisposables=this._register(new ee),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!cc;this._ignoreFocusOut=e&&!cc,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){!this.visible||this.ui.hide()}didHide(e=z_.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="\xA0");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this.busy&&!this.busyDelay&&(this.busyDelay=new Wn,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const s=this.buttons.filter(o=>o===KI);this.ui.leftActionBar.push(s.map((o,a)=>{const l=new Cr(`id-${a}`,"",o.iconClass||UI(o.iconPath),!0,()=>O3(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(o)}));return l.tooltip=o.tooltip||"",l}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const r=this.buttons.filter(o=>o!==KI);this.ui.rightActionBar.push(r.map((o,a)=>{const l=new Cr(`id-${a}`,"",o.iconClass||UI(o.iconPath),!0,()=>O3(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(o)}));return l.tooltip=o.tooltip||"",l}),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const i=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==i&&(this._lastValidationMessage=i,R0(this.ui.message,...wf(i))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?m("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==qt.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.paddingBottom="4px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.paddingBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}rS.noPromptMessage=m("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class H_ extends rS{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new R),this.onWillAcceptEmitter=this._register(new R),this.onDidAcceptEmitter=this._register(new R),this.onDidCustomEmitter=this._register(new R),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=this.ui.isScreenReaderOptimized()?Mr.NONE:Mr.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new R),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new R),this.onDidTriggerItemButtonEmitter=this._register(new R),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e||"",this.update(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?Owe:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(Yt.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{if(e===this.value)return;this._value=e,this.ui.list.filter(this.filterValue(this.ui.inputBox.value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(e)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(Yt.Next),this.canSelectMany&&this.ui.list.domFocus(),ot.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(Yt.Previous):this.ui.list.focus(Yt.Last),this.canSelectMany&&this.ui.list.domFocus(),ot.stop(e,!0);break;case 12:this.ui.list.focus(Yt.NextPage),this.canSelectMany&&this.ui.list.domFocus(),ot.stop(e,!0);break;case 11:this.ui.list.focus(Yt.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),ot.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(Yt.First),ot.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(Yt.Last),ot.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&ta(e,this._activeItems,(t,i)=>t===i)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&ta(e,this._selectedItems,(i,s)=>i===s)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||this.selectedItemsToConfirm!==this._selectedItems&&ta(e,this._selectedItems,(t,i)=>t===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return K(this.ui.container,de.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new Ft(e),i=t.keyCode;this._quickNavigate.keybindings.some(o=>{const[a,l]=o.getParts();return l?!1:a.shiftKey&&i===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a.altKey&&i===6||a.ctrlKey&&i===5||a.metaKey&&i===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",t&&!this.description);const i={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!t,progressBar:!t,visibleCount:!0,count:this.canSelectMany,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(i),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");const s=this.ariaLabel||this.placeholder||H_.DEFAULT_ARIA_LABEL;if(this.ui.inputBox.ariaLabel!==s&&(this.ui.inputBox.ariaLabel=s),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case Mr.NONE:this._itemActivation=Mr.FIRST;break;case Mr.SECOND:this.ui.list.focus(Yt.Second),this._itemActivation=Mr.FIRST;break;case Mr.LAST:this.ui.list.focus(Yt.Last),this._itemActivation=Mr.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),i.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(Yt.First)),this.keepScrollPosition&&(this.scrollTop=e)}}H_.DEFAULT_ARIA_LABEL=m("quickInputBox.ariaLabel","Type to narrow down results.");class oS extends q{constructor(e){super(),this.options=e,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new R),this.onDidCustomEmitter=this._register(new R),this.onDidTriggerButtonEmitter=this._register(new R),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new R),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new R),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const e=t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey};this._register(K(window,de.KEY_DOWN,e,!0)),this._register(K(window,de.KEY_UP,e,!0)),this._register(K(window,de.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;const e=Y(this.parentElement,ls(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const t=$s(e),i=Y(e,ls(".quick-input-titlebar")),s=this._register(new ll(i));s.domNode.classList.add("quick-input-left-action-bar");const r=Y(i,ls(".quick-input-title")),o=this._register(new ll(i));o.domNode.classList.add("quick-input-right-action-bar");const a=Y(e,ls(".quick-input-description")),l=Y(e,ls(".quick-input-header")),c=Y(l,ls("input.quick-input-check-all"));c.type="checkbox",this._register(mi(c,de.CHANGE,F=>{const A=c.checked;S.setAllVisibleChecked(A)})),this._register(K(c,de.CLICK,F=>{(F.x||F.y)&&f.setFocus()}));const h=Y(l,ls(".quick-input-description")),u=Y(l,ls(".quick-input-and-message")),d=Y(u,ls(".quick-input-filter")),f=this._register(new jwe(d));f.setAttribute("aria-describedby",`${this.idPrefix}message`);const g=Y(d,ls(".quick-input-visible-count"));g.setAttribute("aria-live","polite"),g.setAttribute("aria-atomic","true");const p=new $I(g,{countFormat:m({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")}),_=Y(d,ls(".quick-input-count"));_.setAttribute("aria-live","polite");const v=new $I(_,{countFormat:m({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")}),b=Y(l,ls(".quick-input-action")),w=new T3(b);w.label=m("ok","OK"),this._register(w.onDidClick(F=>{this.onDidAcceptEmitter.fire()}));const C=Y(l,ls(".quick-input-action")),y=new T3(C);y.label=m("custom","Custom"),this._register(y.onDidClick(F=>{this.onDidCustomEmitter.fire()}));const D=Y(u,ls(`#${this.idPrefix}message.quick-input-message`)),S=this._register(new xM(e,this.idPrefix+"list",this.options));this._register(S.onChangedAllVisibleChecked(F=>{c.checked=F})),this._register(S.onChangedVisibleCount(F=>{p.setCount(F)})),this._register(S.onChangedCheckedCount(F=>{v.setCount(F)})),this._register(S.onLeave(()=>{setTimeout(()=>{f.setFocus(),this.controller instanceof H_&&this.controller.canSelectMany&&S.clearFocus()},0)})),this._register(S.onDidChangeFocus(()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")}));const x=new Mwe(e);x.getContainer().classList.add("quick-input-progress");const k=Pf(e);return this._register(k),this._register(K(e,de.FOCUS,F=>{this.previousFocusElement=F.relatedTarget instanceof HTMLElement?F.relatedTarget:void 0},!0)),this._register(k.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(z_.Blur),this.previousFocusElement=void 0})),this._register(K(e,de.FOCUS,F=>{f.setFocus()})),this._register(K(e,de.KEY_DOWN,F=>{const A=new Ft(F);switch(A.keyCode){case 3:ot.stop(F,!0),this.onDidAcceptEmitter.fire();break;case 9:ot.stop(F,!0),this.hide(z_.Gesture);break;case 2:if(!A.altKey&&!A.ctrlKey&&!A.metaKey){const z=[".action-label.codicon"];e.classList.contains("show-checkboxes")?z.push("input"):z.push("input[type=text]"),this.getUI().list.isDisplayed()&&z.push(".monaco-list");const H=e.querySelectorAll(z.join(", "));A.shiftKey&&A.target===H[0]?(ot.stop(F,!0),H[H.length-1].focus()):!A.shiftKey&&A.target===H[H.length-1]&&(ot.stop(F,!0),H[0].focus())}break}})),this.ui={container:e,styleSheet:t,leftActionBar:s,titleBar:i,title:r,description1:a,description2:h,rightActionBar:o,checkAll:c,filterContainer:d,inputBox:f,visibleCountContainer:g,visibleCount:p,countContainer:_,count:v,okContainer:b,ok:w,message:D,customButtonContainer:C,customButton:y,list:S,progressBar:x,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:F=>this.show(F),hide:()=>this.hide(),setVisibilities:F=>this.setVisibilities(F),setComboboxAccessibility:F=>this.setComboboxAccessibility(F),setEnabled:F=>this.setEnabled(F),setContextKey:F=>this.options.setContextKey(F)},this.updateStyles(),this.ui}pick(e,t={},i=Lt.None){return new Promise((s,r)=>{let o=h=>{o=s,t.onKeyMods&&t.onKeyMods(a.keyMods),s(h)};if(i.isCancellationRequested){o(void 0);return}const a=this.createQuickPick();let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)o(a.selectedItems.slice()),a.hide();else{const h=a.activeItems[0];h&&(o(h),a.hide())}}),a.onDidChangeActive(h=>{const u=h[0];u&&t.onDidFocus&&t.onDidFocus(u)}),a.onDidChangeSelection(h=>{if(!a.canSelectMany){const u=h[0];u&&(o(u),a.hide())}}),a.onDidTriggerItemButton(h=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},h),{removeItem:()=>{const u=a.items.indexOf(h.item);if(u!==-1){const d=a.items.slice(),f=d.splice(u,1),g=a.activeItems.filter(_=>_!==f[0]),p=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=d,g&&(a.activeItems=g),a.keepScrollPosition=p}}}))),a.onDidChangeValue(h=>{l&&!h&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),i.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{He(c),o(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,a.quickNavigate=t.quickNavigate,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([h,u])=>{l=u,a.busy=!1,a.items=h,a.canSelectMany&&(a.selectedItems=h.filter(d=>d.type!=="separator"&&d.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,h=>{r(h),a.hide()})})}createQuickPick(){const e=this.getUI();return new H_(e)}show(e){const t=this.getUI();this.onShowEmitter.fire();const i=this.controller;this.controller=e,i&&i.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(qt.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),R0(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),t.inputBox.ariaLabel="";const s=this.options.backKeybindingLabel();KI.tooltip=s?m("quickInput.backWithKeybinding","Back ({0})",s):m("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList[e.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(e){if(e!==this.comboboxAccessibility){const t=this.getUI();this.comboboxAccessibility=e,this.comboboxAccessibility?(t.inputBox.setAttribute("role","combobox"),t.inputBox.setAttribute("aria-haspopup","true"),t.inputBox.setAttribute("aria-autocomplete","list"),t.inputBox.setAttribute("aria-activedescendant",t.list.getActiveDescendant()||"")):(t.inputBox.removeAttribute("role"),t.inputBox.removeAttribute("aria-haspopup"),t.inputBox.removeAttribute("aria-autocomplete"),t.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.getAction().enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.getAction().enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t;const i=this.controller;if(i){const s=!(!((t=this.ui)===null||t===void 0)&&t.container.contains(document.activeElement));this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",s||(this.previousFocusElement&&this.previousFocusElement.offsetParent?(this.previousFocusElement.focus(),this.previousFocusElement=void 0):this.options.returnFocus()),i.didHide(e)}}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,oS.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:i,contrastBorder:s,widgetShadow:r}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e?e.toString():"",this.ui.container.style.backgroundColor=t?t.toString():"",this.ui.container.style.color=i?i.toString():"",this.ui.container.style.border=s?`1px solid ${s}`:"",this.ui.container.style.boxShadow=r?`0 0 8px 2px ${r}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);const o=[];this.styles.list.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const a=o.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}}oS.MAX_WIDTH=600;var GI;(function(n){n[n.PRESERVE=0]="PRESERVE",n[n.LAST=1]="LAST"})(GI||(GI={}));const xH={Quickaccess:"workbench.contributions.quickaccess"};class cCe{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,i)=>i.prefix.length-t.prefix.length),Ze(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return v1([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(i=>e.startsWith(i.prefix))||void 0||this.defaultProvider}}$i.add(xH.Quickaccess,new cCe);const DH=Xe("quickInputService");var hCe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},F3=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let YI=class extends q{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=$i.as(xH.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,i){var s;const[r,o]=this.getOrInstantiateProvider(e),a=this.visibleQuickAccess,l=a==null?void 0:a.descriptor;if(a&&o&&l===o){e!==o.prefix&&!(i!=null&&i.preserveValue)&&(a.picker.value=e),this.adjustValueSelection(a.picker,o,i);return}if(o&&!(i!=null&&i.preserveValue)){let g;if(a&&l&&l!==o){const p=a.value.substr(l.prefix.length);p&&(g=`${o.prefix}${p}`)}if(!g){const p=r==null?void 0:r.defaultFilterValue;p===GI.LAST?g=this.lastAcceptedPickerValues.get(o):typeof p=="string"&&(g=`${o.prefix}${p}`)}typeof g=="string"&&(e=g)}const c=new ee,h=c.add(this.quickInputService.createQuickPick());h.value=e,this.adjustValueSelection(h,o,i),h.placeholder=o==null?void 0:o.placeholder,h.quickNavigate=i==null?void 0:i.quickNavigateConfiguration,h.hideInput=!!h.quickNavigate&&!a,(typeof(i==null?void 0:i.itemActivation)=="number"||(i==null?void 0:i.quickNavigateConfiguration))&&(h.itemActivation=(s=i==null?void 0:i.itemActivation)!==null&&s!==void 0?s:Mr.SECOND),h.contextKey=o==null?void 0:o.contextKey,h.filterValue=g=>g.substring(o?o.prefix.length:0),o!=null&&o.placeholder&&(h.ariaLabel=o==null?void 0:o.placeholder);let u,d;t&&(u=new Promise(g=>d=g),c.add(su(h.onWillAccept)(g=>{g.veto(),h.hide()}))),c.add(this.registerPickerListeners(h,r,o,e));const f=c.add(new go);if(r&&c.add(r.provide(h,f.token)),su(h.onDidHide)(()=>{h.selectedItems.length===0&&f.cancel(),c.dispose(),d==null||d(h.selectedItems)}),h.show(),t)return u}adjustValueSelection(e,t,i){var s;let r;i!=null&&i.preserveValue?r=[e.value.length,e.value.length]:r=[(s=t==null?void 0:t.prefix.length)!==null&&s!==void 0?s:0,e.value.length],e.valueSelection=r}registerPickerListeners(e,t,i,s){const r=new ee,o=this.visibleQuickAccess={picker:e,descriptor:i,value:s};return r.add(Ze(()=>{o===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),r.add(e.onDidChangeValue(a=>{const[l]=this.getOrInstantiateProvider(a);l!==t?this.show(a,{preserveValue:!0}):o.value=a})),i&&r.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(i,e.value)})),r}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let i=this.mapProviderToDescriptor.get(t);return i||(i=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,i)),[i,t]}};YI=hCe([F3(0,DH),F3(1,pt)],YI);var uCe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},wp=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let ZI=class extends Oue{constructor(e,t,i,s,r){super(i),this.instantiationService=e,this.contextKeyService=t,this.accessibilityService=s,this.layoutService=r,this.contexts=new Map}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(YI))),this._quickAccess}createController(e=this.layoutService,t){var i,s;const r={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>{},setContextKey:a=>this.setContextKey(a),returnFocus:()=>e.focus(),createList:(a,l,c,h,u)=>this.instantiationService.createInstance(FI,a,l,c,h,u),styles:this.computeStyles()},o=this._register(new oS(Object.assign(Object.assign({},r),t)));return o.layout(e.dimension,(s=(i=e.offset)===null||i===void 0?void 0:i.top)!==null&&s!==void 0?s:0),this._register(e.onDidLayout(a=>{var l,c;return o.layout(a,(c=(l=e.offset)===null||l===void 0?void 0:l.top)!==null&&c!==void 0?c:0)})),this._register(o.onShow(()=>this.resetContextKeys())),this._register(o.onHide(()=>this.resetContextKeys())),o}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new he(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t&&t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},i=Lt.None){return this.controller.pick(e,t,i)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},Or(this.theme,{quickInputBackground:t4,quickInputForeground:Efe,quickInputTitleBackground:Ife,contrastBorder:ni,widgetShadow:Gf})),inputBox:Or(this.theme,{inputForeground:MW,inputBackground:AW,inputBorder:RW,inputValidationInfoBackground:E2,inputValidationInfoForeground:I2,inputValidationInfoBorder:T2,inputValidationWarningBackground:OW,inputValidationWarningForeground:FW,inputValidationWarningBorder:PW,inputValidationErrorBackground:BW,inputValidationErrorForeground:VW,inputValidationErrorBorder:WW}),countBadge:Or(this.theme,{badgeBackground:um,badgeForeground:dm,badgeBorder:ni}),button:Or(this.theme,{buttonForeground:vfe,buttonBackground:iI,buttonHoverBackground:wfe,buttonBorder:ni}),progressBar:Or(this.theme,{progressBarBackground:Cfe}),keybindingLabel:Or(this.theme,{keybindingLabelBackground:Afe,keybindingLabelForeground:Mfe,keybindingLabelBorder:Rfe,keybindingLabelBottomBorder:Ofe,keybindingLabelShadow:Gf}),list:Or(this.theme,{listBackground:t4,listInactiveFocusForeground:Hv,listInactiveSelectionIconForeground:$v,listInactiveFocusBackground:Uv,listFocusOutline:Bn,listInactiveFocusOutline:Bn,pickerGroupBorder:Nfe,pickerGroupForeground:Tfe})}}};ZI=uCe([wp(0,pt),wp(1,Le),wp(2,At),wp(3,rs),wp(4,Q1)],ZI);var LH=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ah=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let XI=class extends ZI{constructor(e,t,i,s,r,o){super(t,i,s,r,o),this.host=void 0;const a=ng.get(e);this.host={_serviceBrand:void 0,get container(){return a.widget.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus()}}createController(){return super.createController(this.host)}};XI=LH([ah(1,pt),ah(2,Le),ah(3,At),ah(4,rs),ah(5,Q1)],XI);let QI=class{constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const i=t=this.instantiationService.createInstance(XI,e);this.mapEditorToService.set(e,t),su(e.onDidDispose)(()=>{i.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}pick(e,t={},i=Lt.None){return this.activeService.pick(e,t,i)}createQuickPick(){return this.activeService.createQuickPick()}};QI=LH([ah(0,pt),ah(1,Tt)],QI);class ng{constructor(e){this.editor=e,this.widget=new aS(this.editor)}static get(e){return e.getContribution(ng.ID)}dispose(){this.widget.dispose()}}ng.ID="editor.controller.quickInput";class aS{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return aS.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}aS.ID="editor.contrib.quickInputWidget";$n(ng.ID,ng);var et;(function(n){const e=new I_;class t{constructor(l,c){this._serviceId=l,this._factory=c,this._value=null}get id(){return this._serviceId}get(l){if(!this._value){if(l&&(this._value=l[this._serviceId.toString()]),this._value||(this._value=this._factory(l)),!this._value)throw new Error("Service "+this._serviceId+" is missing!");e.set(this._serviceId,this._value)}return this._value}}n.LazyStaticService=t;let i=[];function s(a,l){let c=new t(a,l);return i.push(c),c}function r(a){let l=new I_;for(const[h,u]of Kce())l.set(h,u);for(let h in a)a.hasOwnProperty(h)&&l.set(Xe(h),a[h]);i.forEach(h=>l.set(h.id,h.get(a)));let c=new YC(l,!0);return l.set(pt,c),[l,c]}n.init=r,n.instantiationService=s(pt,()=>new YC(e,!0));const o=new rW;n.configurationService=s(si,()=>o),n.resourceConfigurationService=s(RV,()=>new Eue(o)),n.resourcePropertiesService=s(OV,()=>new KE(o)),n.contextService=s(eW,()=>new M1),n.labelService=s($0,()=>new Nue),n.telemetryService=s(Ng,()=>new Iue),n.dialogService=s(Yz,()=>new Lue),n.notificationService=s(en,()=>new A1),n.markerService=s(K0,()=>new oh),n.modeService=s(Hn,a=>new M_),n.standaloneThemeService=s(H0,()=>new Cbe),n.logService=s(fl,()=>new vhe(new bhe)),n.undoRedoService=s(V0,a=>new ny(n.dialogService.get(a),n.notificationService.get(a))),n.languageConfigurationService=s(F0,a=>new nC(n.configurationService.get(a),n.modeService.get(a))),n.modelService=s(zn,a=>new qC(n.configurationService.get(a),n.resourcePropertiesService.get(a),n.standaloneThemeService.get(a),n.logService.get(a),n.undoRedoService.get(a),n.modeService.get(a),n.languageConfigurationService.get(a))),n.markerDecorationsService=s(d2,a=>new zI(n.modelService.get(a),n.markerService.get(a))),n.contextKeyService=s(Le,a=>new CI(n.configurationService.get(a))),n.codeEditorService=s(Tt,a=>new UC(null,n.contextKeyService.get(a),n.standaloneThemeService.get(a))),n.editorProgressService=s(Bg,()=>new N1),n.storageService=s(qu,()=>new Cwe),n.editorWorkerService=s(Oc,a=>new HE(n.modelService.get(a),n.resourceConfigurationService.get(a),n.logService.get(a)))})(et||(et={}));class dCe extends q{constructor(e,t){super();const[i,s]=et.init(t);this._serviceCollection=i,this._instantiationService=s;const r=this.get(si),o=this.get(en),a=this.get(Ng),l=this.get(At),c=this.get(fl),h=this.get(Le);let u=(_,v)=>{let b=null;return t&&(b=t[_.toString()]),b||(b=v()),this._serviceCollection.set(_,b),b};u(rs,()=>new HI(h,r)),u(Zs,()=>new RI(l));let d=u(Fi,()=>new kue(this._instantiationService)),f=u(ri,()=>this._register(new sW(h,d,a,o,c,e))),g=u(Q1,()=>new Aue(et.codeEditorService.get(Tt),e));u(DH,()=>new QI(s,et.codeEditorService.get(Tt)));let p=u(Wu,()=>this._register(new EI(g)));u(Hu,()=>new Dwe),u(zu,()=>{const _=new kI(a,o,p,f,l);return _.configure({blockMouse:!1}),this._register(_)}),u(Tg,()=>new VI(d)),u(KV,()=>new Tue(et.modelService.get(zn)))}get(e){let t=this._serviceCollection.get(e);if(!t)throw new Error("Missing service "+e);return t}set(e,t){this._serviceCollection.set(e,t)}has(e){return this._serviceCollection.has(e)}}function kH(n,e,t){let i=new dCe(n,e),s=null;i.has(oa)||(s=new qE(et.modelService.get()),i.set(oa,s)),i.has(uc)||i.set(uc,new SE(i.get(Tt),i.get(Fi)));let r=t(i);return s&&s.setEditor(r),r}function fCe(n,e,t){return kH(n,t||{},i=>new _I(n,e,i,i.get(pt),i.get(Tt),i.get(Fi),i.get(Le),i.get(ri),i.get(Wu),i.get(H0),i.get(en),i.get(si),i.get(rs),i.get(zn),i.get(Hn)))}function gCe(n){return et.codeEditorService.get().onCodeEditorAdd(e=>{n(e)})}function pCe(n,e,t){return kH(n,t||{},i=>new bI(n,e,i,i.get(pt),i.get(Le),i.get(ri),i.get(Wu),i.get(Oc),i.get(Tt),i.get(H0),i.get(en),i.get(si),i.get(zu),i.get(Bg),i.get(Hu)))}function mCe(n,e){return new kle(n,e)}function _Ce(n,e,t){return Iz(et.modelService.get(),et.modeService.get(),n,e,t)}function bCe(n,e){et.modelService.get().setMode(n,et.modeService.get().create(e))}function vCe(n,e,t){n&&et.markerService.get().changeOne(e,n.uri,t)}function wCe(n){return et.markerService.get().read(n)}function CCe(n){return et.markerService.get().onMarkerChanged(n)}function yCe(n){return et.modelService.get().getModel(n)}function SCe(){return et.modelService.get().getModels()}function xCe(n){return et.modelService.get().onModelAdded(n)}function DCe(n){return et.modelService.get().onModelRemoved(n)}function LCe(n){return et.modelService.get().onModelModeChanged(e=>{n({model:e.model,oldLanguage:e.oldModeId})})}function kCe(n){return xhe(et.modelService.get(),n)}function ECe(n,e){const t=et.standaloneThemeService.get();return t.registerEditorContainer(n),s2.colorizeElement(t,et.modeService.get(),n,e)}function ICe(n,e,t){return et.standaloneThemeService.get().registerEditorContainer(document.body),s2.colorize(et.modeService.get(),n,e,t)}function TCe(n,e,t=4){return et.standaloneThemeService.get().registerEditorContainer(document.body),s2.colorizeModelLine(n,e,t)}function NCe(n){let e=Zt.get(n);return e||{getInitialState:()=>g1,tokenize:(t,i,s,r)=>oce(n,t,s,r)}}function ACe(n,e){et.modeService.get().triggerMode(e);let i=NCe(e),s=sa(n),r=[],o=i.getInitialState();for(let a=0,l=s.length;a<l;a++){let c=s[a],h=i.tokenize(c,!0,o,0);r[a]=h.tokens,o=h.endState}return r}function MCe(n,e){et.standaloneThemeService.get().defineTheme(n,e)}function RCe(n){et.standaloneThemeService.get().setTheme(n)}function OCe(){$ue()}function FCe(n,e){return lt.registerCommand({id:n,handler:e})}function PCe(){return{create:fCe,onDidCreateEditor:gCe,createDiffEditor:pCe,createDiffNavigator:mCe,createModel:_Ce,setModelLanguage:bCe,setModelMarkers:vCe,getModelMarkers:wCe,onDidChangeMarkers:CCe,getModels:SCe,getModel:yCe,onDidCreateModel:xCe,onWillDisposeModel:DCe,onDidChangeModelLanguage:LCe,createWebWorker:kCe,colorizeElement:ECe,colorize:ICe,colorizeModelLine:TCe,tokenize:ACe,defineTheme:MCe,setTheme:RCe,remeasureFonts:OCe,registerCommand:FCe,AccessibilitySupport:Ek,ContentWidgetPositionPreference:Mk,CursorChangeReason:Rk,DefaultEndOfLine:Ok,EditorAutoIndentStrategy:Pk,EditorOption:Bk,EndOfLinePreference:Vk,EndOfLineSequence:Wk,MinimapPosition:Kk,MouseTargetType:Gk,OverlayWidgetPositionPreference:Yk,OverviewRulerLane:Zk,RenderLineNumbersType:Xk,RenderMinimap:Qk,ScrollbarVisibility:eE,ScrollType:Jk,TextEditorCursorBlinkingStyle:rE,TextEditorCursorStyle:oE,TrackedRangeStickiness:aE,WrappingIndent:lE,ConfigurationChangedEvent:C9,BareFontInfo:Fh,FontInfo:DE,TextModelResolvedOptions:Rv,FindMatch:r_,EditorType:d1,EditorOptions:Au}}function BCe(n,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!n(t))return!1;return!0}function nv(n,e){return typeof n=="boolean"?n:e}function P3(n,e){return typeof n=="string"?n:e}function VCe(n){const e={};for(const t of n)e[t]=!0;return e}function B3(n,e=!1){e&&(n=n.map(function(i){return i.toLowerCase()}));const t=VCe(n);return e?function(i){return t[i.toLowerCase()]!==void 0&&t.hasOwnProperty(i.toLowerCase())}:function(i){return t[i]!==void 0&&t.hasOwnProperty(i)}}function JI(n,e){e=e.replace(/@@/g,"");let t=0,i;do i=!1,e=e.replace(/@(\w+)/g,function(r,o){i=!0;let a="";if(typeof n[o]=="string")a=n[o];else if(n[o]&&n[o]instanceof RegExp)a=n[o].source;else throw n[o]===void 0?dt(n,"language definition does not contain attribute '"+o+"', used at: "+e):dt(n,"attribute reference '"+o+"' must be a string, used at: "+e);return Ed(a)?"":"(?:"+a+")"}),t++;while(i&&t<5);e=e.replace(/\x01/g,"@");let s=(n.ignoreCase?"i":"")+(n.unicode?"u":"");return new RegExp(e,s)}function WCe(n,e,t,i){if(i<0)return n;if(i<e.length)return e[i];if(i>=100){i=i-100;let s=t.split(".");if(s.unshift(t),i<s.length)return s[i]}return null}function zCe(n,e,t,i){let s=-1,r=t,o=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(s=parseInt(o[3]),o[2]&&(s=s+100)),r=o[4]);let a="~",l=r;!r||r.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(o=r.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(a=o[1],l=o[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){let h=B3(l.split("|"),n.ignoreCase);c=function(u){return a==="~"?h(u):!h(u)}}else if(a==="@"||a==="!@"){let h=n[l];if(!h)throw dt(n,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!BCe(function(d){return typeof d=="string"},h))throw dt(n,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);let u=B3(h,n.ignoreCase);c=function(d){return a==="@"?u(d):!u(d)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){let h=JI(n,"^"+l+"$");c=function(u){return a==="~"?h.test(u):!h.test(u)}}else c=function(h,u,d,f){return JI(n,"^"+Ol(n,l,u,d,f)+"$").test(h)};else if(l.indexOf("$")<0){let h=Kl(n,l);c=function(u){return a==="=="?u===h:u!==h}}else{let h=Kl(n,l);c=function(u,d,f,g,p){let _=Ol(n,h,d,f,g);return a==="=="?u===_:u!==_}}return s===-1?{name:t,value:i,test:function(h,u,d,f){return c(h,h,u,d,f)}}:{name:t,value:i,test:function(h,u,d,f){let g=WCe(h,u,d,s);return c(g||"",h,u,d,f)}}}function eT(n,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw dt(n,"a 'token' attribute must be of type string, in rule: "+e);{let i={token:t.token};if(t.token.indexOf("$")>=0&&(i.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")i.bracket=1;else if(t.bracket==="@close")i.bracket=-1;else throw dt(n,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw dt(n,"the next state must be a string value in rule: "+e);{let s=t.next;if(!/^(@pop|@push|@popall)$/.test(s)&&(s[0]==="@"&&(s=s.substr(1)),s.indexOf("$")<0&&!Uhe(n,Ol(n,s,"",[],""))))throw dt(n,"the next state '"+t.next+"' is not defined in rule: "+e);i.next=s}}return typeof t.goBack=="number"&&(i.goBack=t.goBack),typeof t.switchTo=="string"&&(i.switchTo=t.switchTo),typeof t.log=="string"&&(i.log=t.log),typeof t.nextEmbedded=="string"&&(i.nextEmbedded=t.nextEmbedded,n.usesEmbedded=!0),i}}else if(Array.isArray(t)){let i=[];for(let s=0,r=t.length;s<r;s++)i[s]=eT(n,e,t[s]);return{group:i}}else if(t.cases){let i=[];for(let r in t.cases)if(t.cases.hasOwnProperty(r)){const o=eT(n,e,t.cases[r]);r==="@default"||r==="@"||r===""?i.push({test:void 0,value:o,name:r}):r==="@eos"?i.push({test:function(a,l,c,h){return h},value:o,name:r}):i.push(zCe(n,e,r,o))}const s=n.defaultToken;return{test:function(r,o,a,l){for(const c of i)if(!c.test||c.test(r,o,a,l))return c.value;return s}}}else throw dt(n,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class HCe{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let i;if(typeof t=="string")i=t;else if(t instanceof RegExp)i=t.source;else throw dt(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=i.length>0&&i[0]==="^",this.name=this.name+": "+i,this.regex=JI(e,"^(?:"+(this.matchOnlyAtLineStart?i.substr(1):i)+")")}setAction(e,t){this.action=eT(e,this.name,t)}}function $Ce(n,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");let t={};t.languageId=n,t.includeLF=nv(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=nv(e.ignoreCase,!1),t.unicode=nv(e.unicode,!1),t.tokenPostfix=P3(e.tokenPostfix,"."+t.languageId),t.defaultToken=P3(e.defaultToken,"source"),t.usesEmbedded=!1;let i=e;i.languageId=n,i.includeLF=t.includeLF,i.ignoreCase=t.ignoreCase,i.unicode=t.unicode,i.noThrow=t.noThrow,i.usesEmbedded=t.usesEmbedded,i.stateNames=e.tokenizer,i.defaultToken=t.defaultToken;function s(o,a,l){for(const c of l){let h=c.include;if(h){if(typeof h!="string")throw dt(t,"an 'include' attribute must be a string at: "+o);if(h[0]==="@"&&(h=h.substr(1)),!e.tokenizer[h])throw dt(t,"include target '"+h+"' is not defined at: "+o);s(o+"."+h,a,e.tokenizer[h])}else{const u=new HCe(o);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(u.setRegex(i,c[0]),c.length>=3)if(typeof c[1]=="string")u.setAction(i,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const d=c[1];d.next=c[2],u.setAction(i,d)}else throw dt(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+o);else u.setAction(i,c[1]);else{if(!c.regex)throw dt(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+o);c.name&&typeof c.name=="string"&&(u.name=c.name),c.matchOnlyAtStart&&(u.matchOnlyAtLineStart=nv(c.matchOnlyAtLineStart,!1)),u.setRegex(i,c.regex),u.setAction(i,c.action)}a.push(u)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw dt(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(let o in e.tokenizer)if(e.tokenizer.hasOwnProperty(o)){t.start||(t.start=o);const a=e.tokenizer[o];t.tokenizer[o]=new Array,s("tokenizer."+o,t.tokenizer[o],a)}if(t.usesEmbedded=i.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw dt(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];let r=[];for(let o of e.brackets){let a=o;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw dt(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")r.push({token:a.token+t.tokenPostfix,open:Kl(t,a.open),close:Kl(t,a.close)});else throw dt(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=r,t.noThrow=!0,t}function UCe(n){Uh.registerLanguage(n)}function jCe(){let n=[];return n=n.concat(Uh.getLanguages()),n}function qCe(n){return et.modeService.get().languageIdCodec.encodeLanguageId(n)}function KCe(n,e){let t=et.modeService.get().onDidEncounterLanguage(i=>{i===n&&(t.dispose(),e())});return t}function GCe(n,e){const t=et.modeService.get().validateLanguageId(n);if(!t)throw new Error(`Cannot set configuration for unknown language ${n}`);return Qt.register(t,e,100)}class YCe{constructor(e,t){this._languageId=e,this._actual=t}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,i,s){if(typeof this._actual.tokenize=="function")return $_.adaptTokenize(this._languageId,this._actual,e,i,s);throw new Error("Not supported!")}tokenize2(e,t,i){let s=this._actual.tokenizeEncoded(e,i);return new a1(s.tokens,s.endState)}}class $_{constructor(e,t,i,s){this._languageId=e,this._actual=t,this._modeService=i,this._standaloneThemeService=s}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t,i){let s=[],r=0;for(let o=0,a=e.length;o<a;o++){const l=e[o];let c=l.startIndex;o===0?c=0:c<r&&(c=r),s[o]=new o1(c+i,l.scopes,t),r=c}return s}static adaptTokenize(e,t,i,s,r){let o=t.tokenize(i,s),a=$_._toClassicTokens(o.tokens,e,r),l;return o.endState.equals(s)?l=s:l=o.endState,new IA(a,l)}tokenize(e,t,i,s){return $_.adaptTokenize(this._languageId,this._actual,e,i,s)}_toBinaryTokens(e,t,i){const s=e.encodeLanguageId(this._languageId),r=this._standaloneThemeService.getColorTheme().tokenTheme;let o=[],a=0,l=0;for(let h=0,u=t.length;h<u;h++){const d=t[h],f=r.match(s,d.scopes);if(a>0&&o[a-1]===f)continue;let g=d.startIndex;h===0?g=0:g<l&&(g=l),o[a++]=g+i,o[a++]=f,l=g}let c=new Uint32Array(a);for(let h=0;h<a;h++)c[h]=o[h];return c}tokenize2(e,t,i,s){let r=this._actual.tokenize(e,i),o=this._toBinaryTokens(this._modeService.languageIdCodec,r.tokens,s),a;return r.endState.equals(i)?a=i:a=r.endState,new a1(o,a)}}function ZCe(n){return"tokenizeEncoded"in n}function EH(n){return n&&typeof n.then=="function"}function XCe(n){if(n){const e=[null];for(let t=1,i=n.length;t<i;t++)e[t]=V.fromHex(n[t]);et.standaloneThemeService.get().setColorMapOverride(e)}else et.standaloneThemeService.get().setColorMapOverride(null)}function QCe(n,e){const t=et.modeService.get().validateLanguageId(n);if(!t)throw new Error(`Cannot set tokens provider for unknown language ${n}`);const i=s=>ZCe(s)?new YCe(t,s):new $_(t,s,et.modeService.get(),et.standaloneThemeService.get());return EH(e)?Zt.registerPromise(n,e.then(s=>i(s))):Zt.register(n,i(e))}function JCe(n,e){const t=i=>Khe(et.modeService.get(),et.standaloneThemeService.get(),n,$Ce(n,i));return EH(e)?Zt.registerPromise(n,e.then(i=>t(i))):Zt.register(n,t(e))}function eye(n,e){return Xw.register(n,e)}function tye(n,e){return kE.register(n,e)}function iye(n,e){return EE.register(n,e)}function nye(n,e){return o_.register(n,{provideHover:(t,i,s)=>{let r=t.getWordAtPosition(i);return Promise.resolve(e.provideHover(t,i,s)).then(o=>{if(!!o)return!o.range&&r&&(o.range=new I(i.lineNumber,r.startColumn,i.lineNumber,r.endColumn)),o.range||(o.range=new I(i.lineNumber,i.column,i.lineNumber,i.column)),o})}})}function sye(n,e){return IE.register(n,e)}function rye(n,e){return Qw.register(n,e)}function oye(n,e){return nce.register(n,e)}function aye(n,e){return a_.register(n,e)}function lye(n,e){return eC.register(n,e)}function cye(n,e){return tC.register(n,e)}function hye(n,e){return TE.register(n,e)}function uye(n,e,t){return ea.register(n,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,provideCodeActions:(i,s,r,o)=>{let a=et.markerService.get().read({resource:i.uri}).filter(l=>I.areIntersectingOrTouching(l,s));return e.provideCodeActions(i,s,{markers:a,only:r.only},o)},resolveCodeAction:e.resolveCodeAction})}function dye(n,e){return Jp.register(n,e)}function fye(n,e){return Rl.register(n,e)}function gye(n,e){return pV.register(n,e)}function pye(n,e){return mV.register(n,e)}function mye(n,e){return Hr.register(n,e)}function _ye(n,e){return Vf.register(n,e)}function bye(n,e){return AE.register(n,e)}function vye(n,e){return Jw.register(n,e)}function wye(n,e){return sce.register(n,e)}function Cye(n,e){return Wf.register(n,e)}function yye(n,e){return _V.register(n,e)}function Sye(n,e){return YA.register(n,e)}function xye(n,e){return NE.register(n,e)}function Dye(){return{register:UCe,getLanguages:jCe,onLanguage:KCe,getEncodedLanguageId:qCe,setLanguageConfiguration:GCe,setColorMap:XCe,setTokensProvider:QCe,setMonarchTokensProvider:JCe,registerReferenceProvider:eye,registerRenameProvider:tye,registerCompletionItemProvider:mye,registerSignatureHelpProvider:iye,registerHoverProvider:nye,registerDocumentSymbolProvider:sye,registerDocumentHighlightProvider:rye,registerLinkedEditingRangeProvider:oye,registerDefinitionProvider:aye,registerImplementationProvider:lye,registerTypeDefinitionProvider:cye,registerCodeLensProvider:hye,registerCodeActionProvider:uye,registerDocumentFormattingEditProvider:dye,registerDocumentRangeFormattingEditProvider:fye,registerOnTypeFormattingEditProvider:gye,registerLinkProvider:pye,registerColorProvider:_ye,registerFoldingRangeProvider:bye,registerDeclarationProvider:vye,registerSelectionRangeProvider:wye,registerDocumentSemanticTokensProvider:Cye,registerDocumentRangeSemanticTokensProvider:yye,registerInlineCompletionsProvider:Sye,registerInlayHintsProvider:xye,DocumentHighlightKind:Fk,CompletionItemKind:Tk,CompletionItemTag:Nk,CompletionItemInsertTextRule:Ik,SymbolKind:nE,SymbolTag:sE,IndentAction:zk,CompletionTriggerKind:Ak,SignatureHelpTriggerKind:iE,InlayHintKind:Hk,InlineCompletionTriggerKind:$k,FoldingRangeKind:ao}}class VD{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}var Vg=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};function Lye(n){const e=[],t=new Set,i=Jp.ordered(n);for(const r of i)e.push(r),r.extensionId&&t.add(VD.toKey(r.extensionId));const s=Rl.ordered(n);for(const r of s){if(r.extensionId){if(t.has(VD.toKey(r.extensionId)))continue;t.add(VD.toKey(r.extensionId))}e.push({displayName:r.displayName,extensionId:r.extensionId,provideDocumentFormattingEdits(o,a,l){return r.provideDocumentRangeFormattingEdits(o,o.getFullModelRange(),a,l)}})}return e}class U_{static setFormatterSelector(e){return{dispose:U_._selectors.unshift(e)}}static select(e,t,i){return Vg(this,void 0,void 0,function*(){if(e.length===0)return;const s=Ue.first(U_._selectors);if(s)return yield s(e,t,i)})}}U_._selectors=new bs;function kye(n,e,t,i,s){return Vg(this,void 0,void 0,function*(){const r=Rl.ordered(e);for(const o of r){let a=yield Promise.resolve(o.provideDocumentRangeFormattingEdits(e,t,i,s)).catch(kr);if(ia(a))return yield n.computeMoreMinimalEdits(e.uri,a)}})}function Eye(n,e,t,i){return Vg(this,void 0,void 0,function*(){const s=Lye(e);for(const r of s){let o=yield Promise.resolve(r.provideDocumentFormattingEdits(e,t,i)).catch(kr);if(ia(o))return yield n.computeMoreMinimalEdits(e.uri,o)}})}function Iye(n,e,t,i,s){const r=pV.ordered(e);return r.length===0||r[0].autoFormatTriggerCharacters.indexOf(i)<0?Promise.resolve(void 0):Promise.resolve(r[0].provideOnTypeFormattingEdits(e,t,i,s,Lt.None)).catch(kr).then(o=>n.computeMoreMinimalEdits(e.uri,o))}lt.registerCommand("_executeFormatRangeProvider",function(n,...e){return Vg(this,void 0,void 0,function*(){const[t,i,s]=e;ti(xe.isUri(t)),ti(I.isIRange(i));const r=n.get(oa),o=n.get(Oc),a=yield r.createModelReference(t);try{return kye(o,a.object.textEditorModel,I.lift(i),s,Lt.None)}finally{a.dispose()}})});lt.registerCommand("_executeFormatDocumentProvider",function(n,...e){return Vg(this,void 0,void 0,function*(){const[t,i]=e;ti(xe.isUri(t));const s=n.get(oa),r=n.get(Oc),o=yield s.createModelReference(t);try{return Eye(r,o.object.textEditorModel,i,Lt.None)}finally{o.dispose()}})});lt.registerCommand("_executeFormatOnTypeProvider",function(n,...e){return Vg(this,void 0,void 0,function*(){const[t,i,s,r]=e;ti(xe.isUri(t)),ti(P.isIPosition(i)),ti(typeof s=="string");const o=n.get(oa),a=n.get(Oc),l=yield o.createModelReference(t);try{return Iye(a,l.object.textEditorModel,P.lift(i),s,r)}finally{l.dispose()}})});var WD;Au.wrappingIndent.defaultValue=0;Au.glyphMargin.defaultValue=!1;Au.autoIndent.defaultValue=3;Au.overviewRulerLanes.defaultValue=2;U_.setFormatterSelector((n,e,t)=>Promise.resolve(n[0]));const Sn=M9();Sn.editor=PCe();Sn.languages=Dye();Sn.CancellationTokenSource;const Tye=Sn.Emitter;Sn.KeyCode;Sn.KeyMod;Sn.Position;const mIe=Sn.Range;Sn.Selection;Sn.SelectionDirection;const _Ie=Sn.MarkerSeverity;Sn.MarkerTag;Sn.Uri;Sn.Token;const Nye=Sn.editor,lS=Sn.languages;(((WD=It.MonacoEnvironment)===null||WD===void 0?void 0:WD.globalAPI)||typeof define=="function"&&define.amd)&&(self.monaco=Sn);typeof self.require!="undefined"&&typeof self.require.config=="function"&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const Aye="#/definitions/RootSpec",Mye="http://json-schema.org/draft-07/schema#",Rye={AggregateParams:{additionalProperties:!1,properties:{groupby:{description:"Which fields to use for grouping. Missing `groupby` results in a single group that includes all the data items.",items:{$ref:"#/definitions/Field"},type:"array"},type:{const:"aggregate",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},Align:{enum:["left","center","right"],type:"string"},Axis:{additionalProperties:!1,properties:{domain:{description:"A boolean flag indicating if the domain (the axis baseline) should be included as part of the axis.\n\n__Default value:__ `true`",type:"boolean"},domainCap:{description:'The stroke cap for the domain line\'s ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`',enum:["butt","round","square"],type:"string"},domainColor:{description:'Color of axis domain line.\n\n__Default value:__ `"gray"`.',type:"string"},domainDash:{description:"An array of alternating [stroke, space] lengths for dashed domain lines.",items:{type:"number"},type:"array"},domainDashOffset:{description:"The pixel offset at which to start drawing with the domain dash array.",type:"number"},domainWidth:{description:"Stroke width of axis domain line\n\n__Default value:__ `1`",type:"number"},format:{description:"The format specifier pattern for axis labels. Must be a legal [d3-format](https://github.com/d3/d3-format#locale_format) specifier.",type:"string"},labelAlign:{$ref:"#/definitions/Align",description:"Horizontal text alignment of axis tick labels, overriding the default setting for the current axis orientation."},labelAngle:{description:"The rotation angle of the axis labels.\n\n__Default value:__ `-90` for nominal and ordinal fields; `0` otherwise.",maximum:360,minimum:-360,type:"number"},labelBaseline:{$ref:"#/definitions/Baseline",description:'Vertical text baseline of axis tick labels, overriding the default setting for the current axis orientation. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`.'},labelColor:{description:"The color of the tick label, can be in hex color code or regular color name.",type:"string"},labelFont:{description:"The font of the tick label.",type:"string"},labelFontSize:{description:"The font size of the label, in pixels.",minimum:0,type:"number"},labelFontStyle:{description:"Font style of the title.",type:"string"},labelFontWeight:{description:"Font weight of axis tick labels.",type:"string"},labelLimit:{description:"Maximum allowed pixel width of axis tick labels.\n\n__Default value:__ `180`",type:"number"},labelPadding:{description:"The padding, in pixels, between axis and text labels.\n\n__Default value:__ `2`",type:"number"},labels:{description:"A boolean flag indicating if labels should be included as part of the axis.\n\n__Default value:__ `true`.",type:"boolean"},maxExtent:{description:"The maximum extent in pixels that axis ticks and labels should use. This determines a maximum offset value for axis titles.\n\n__Default value:__ `undefined`.",type:"number"},minExtent:{description:"The minimum extent in pixels that axis ticks and labels should use. This determines a minimum offset value for axis titles.\n\n__Default value:__ `30` for y-axis; `undefined` for x-axis.",type:"number"},offset:{description:"The orthogonal offset in pixels by which to displace the axis from its position along the edge of the chart.",type:"number"},orient:{$ref:"#/definitions/AxisOrient",description:'The orientation of the axis. One of `"top"`, `"bottom"`, `"left"` or `"right"`. The orientation can be used to further specialize the axis type (e.g., a y axis oriented for the right edge of the chart).\n\n__Default value:__ `"bottom"` for x-axes and `"left"` for y-axes.'},tickCap:{description:'The stroke cap for the tick lines\' ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`',enum:["butt","round","square"],type:"string"},tickColor:{description:`The color of the axis's tick.

__Default value:__ \`"gray"\``,type:"string"},tickCount:{description:'A desired number of ticks, for axes visualizing quantitative scales. The resulting number may be different so that values are "nice" (multiples of `2`, `5`, `10`) and lie within the underlying scale\'s range.',minimum:0,type:"number"},tickDash:{description:"An array of alternating [stroke, space] lengths for dashed tick mark lines.",items:{type:"number"},type:"array"},tickDashOffset:{description:"The pixel offset at which to start drawing with the tick mark dash array.",type:"number"},tickMinStep:{description:"The minimum desired step between axis ticks, in terms of scale domain values. For example, a value of `1` indicates that ticks should not be less than 1 unit apart. If `tickMinStep` is specified, the `tickCount` value will be adjusted, if necessary, to enforce the minimum step value.",type:"number"},tickSize:{description:"The size in pixels of axis ticks.\n\n__Default value:__ `5`",minimum:0,type:"number"},tickWidth:{description:"The width, in pixels, of ticks.\n\n__Default value:__ `1`",minimum:0,type:"number"},ticks:{description:"Boolean value that determines whether the axis should include ticks.\n\n__Default value:__ `true`",type:"boolean"},title:{description:"A title for the axis (none by default).",type:"string"},titleColor:{description:"Color of the title, can be in hex color code or regular color name.",type:"string"},titleFont:{description:'Font of the title. (e.g., `"Helvetica Neue"`).',type:"string"},titleFontSize:{description:"Font size of the title.",minimum:0,type:"number"},titleFontStyle:{description:"Font style of the title.",type:"string"},titleFontWeight:{description:'Font weight of the title. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).',type:"string"},titleOpacity:{description:"Opacity of the axis title.",type:"number"},titlePadding:{description:"The padding, in pixels, between title and axis.",type:"number"},values:{description:"Explicitly set the visible axis tick and label values.",items:{},type:"array"}},type:"object"},AxisOrient:{enum:["top","bottom","left","right"],type:"string"},Baseline:{enum:["top","middle","bottom","alphabetic"],type:"string"},Channel:{anyOf:[{$ref:"#/definitions/PositionalChannel"},{const:"color",type:"string"},{const:"fill",type:"string"},{const:"stroke",type:"string"},{const:"opacity",type:"string"},{const:"fillOpacity",type:"string"},{const:"strokeOpacity",type:"string"},{const:"strokeWidth",type:"string"},{const:"size",type:"string"},{const:"shape",type:"string"},{const:"text",type:"string"},{const:"angle",type:"string"},{const:"sample",type:"string"},{const:"uniqueId",type:"string"},{const:"search",type:"string"},{const:"facetIndex",type:"string"},{const:"semanticScore",type:"string"},{const:"dx",type:"string"},{const:"dy",type:"string"}]},ChromPosDef:{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/Axis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},chrom:{$ref:"#/definitions/FieldName",description:"The field having the chromosome or contig."},offset:{description:"An offset or offsets that allow for adjusting the numbering base. The offset is subtracted from the positions.\n\nGenomeSpy uses internally zero-based indexing with half-open intervals. UCSC-based formats (BED, etc.) generally use this scheme. However, for example, VCF files use one-based indexing and must be adjusted by setting the offset to `1`.\n\n**Default:** `0`",type:"number"},pos:{$ref:"#/definitions/FieldName",description:"The field having an intra-chromosomal position."},resolutionChannel:{$ref:"#/definitions/Channel",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{const:"locus",type:"string"}},required:["chrom","type"],type:"object"},ChromosomalLocus:{additionalProperties:!1,properties:{chrom:{description:'The name of the chromosome. For example: `"chr1"`, `"CHR1"`, or `"1"`.',type:"string"},pos:{description:"The zero-based position inside the chromosome or contig.",type:"number"}},required:["chrom"],type:"object"},CollectParams:{additionalProperties:!1,properties:{groupby:{description:"Arranges the data into consecutive batches based on the groups. This is mainly intended for internal use so that faceted data can be handled as batches.",items:{$ref:"#/definitions/Field"},type:"array"},sort:{$ref:"#/definitions/CompareParams",description:"The sort order."},type:{const:"collect",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},"ColorDef<string>":{$ref:"#/definitions/MarkPropDef%3Cstring%2C(string%7Cnull)%3E"},CompareParams:{additionalProperties:!1,properties:{field:{anyOf:[{items:{$ref:"#/definitions/Field"},type:"array"},{$ref:"#/definitions/Field"}],description:"The field(s) to sort by"},order:{anyOf:[{items:{$ref:"#/definitions/SortOrder"},type:"array"},{$ref:"#/definitions/SortOrder"}],description:'The order(s) to use: `"ascending"` (default), `"descending"`.'}},required:["field"],type:"object"},ComplexDomain:{description:"A complex domain that needs to be converted into a scalar domain before it is assigned to a scale.",items:{$ref:"#/definitions/ChromosomalLocus"},type:"array"},ConcatSpec:{additionalProperties:!1,properties:{baseUrl:{type:"string"},columns:{type:"number"},concat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["concat","columns"],type:"object"},Contig:{additionalProperties:!1,properties:{name:{type:"string"},size:{type:"number"}},required:["name","size"],type:"object"},CoverageParams:{additionalProperties:!1,properties:{as:{description:"The output field for the computed coverage.",type:"string"},asChrom:{description:"The output field for the chromosome.\n\n**Default:** Same as `chrom`",type:"string"},asEnd:{description:"The output field for the end coordinate.\n\n**Default:** Same as `end`",type:"string"},asStart:{description:"The output field for the start coordinate.\n\n**Default:** Same as `start`",type:"string"},chrom:{$ref:"#/definitions/Field",description:"An optional chromosome field that is passed through. TODO: groupby"},end:{$ref:"#/definitions/Field",description:"The field representing the end coordinate of the segment (exclusive)."},start:{$ref:"#/definitions/Field",description:"The field representing the start coordinate of the segment (inclusive)."},type:{const:"coverage",description:"The type of the transform to be applied",type:"string"},weight:{$ref:"#/definitions/Field",description:"A field representing an optional weight for the segment. Can be used with copy ratios, for example."}},required:["end","start","type"],type:"object"},CsvDataFormat:{additionalProperties:!1,properties:{parse:{anyOf:[{$ref:"#/definitions/Parse"},{type:"null"}],description:'If set to `null`, disable type inference based on the spec and only use type inference based on the data. Alternatively, a parsing directive object can be provided for explicit data types. Each property of the object corresponds to a field name, and the value to the desired data type (one of `"number"`, `"boolean"`, `"date"`, or null (do not parse the field)). For example, `"parse": {"modified_on": "date"}` parses the `modified_on` field in each input record a Date value.\n\nFor `"date"`, we parse data based using Javascript\'s [`Date.parse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse). For Specific date formats can be provided (e.g., `{foo: "date:\'%m%d%Y\'"}`), using the [d3-time-format syntax](https://github.com/d3/d3-time-format#locale_format). UTC date format parsing is supported similarly (e.g., `{foo: "utc:\'%m%d%Y\'"}`). See more about [UTC time](https://vega.github.io/vega-lite/docs/timeunit.html#utc)'},type:{description:'Type of input data: `"json"`, `"csv"`, `"tsv"`, `"dsv"`.\n\n__Default value:__  The default format type is determined by the extension of the file URL. If no extension is detected, `"json"` will be used by default.',enum:["csv","tsv"],type:"string"}},type:"object"},Data:{anyOf:[{$ref:"#/definitions/DataSource"},{$ref:"#/definitions/Generator"}]},DataFormat:{anyOf:[{$ref:"#/definitions/CsvDataFormat"},{$ref:"#/definitions/DsvDataFormat"},{$ref:"#/definitions/JsonDataFormat"},{$ref:"#/definitions/OtherDataFormat"}]},DataSource:{anyOf:[{$ref:"#/definitions/UrlData"},{$ref:"#/definitions/InlineData"},{$ref:"#/definitions/NamedData"},{$ref:"#/definitions/DynamicCallbackData"},{$ref:"#/definitions/DynamicData"}]},DsvDataFormat:{additionalProperties:!1,properties:{delimiter:{description:"The delimiter between records. The delimiter must be a single character (i.e., a single 16-bit code unit); so, ASCII delimiters are fine, but emoji delimiters are not.",maxLength:1,minLength:1,type:"string"},parse:{anyOf:[{$ref:"#/definitions/Parse"},{type:"null"}],description:'If set to `null`, disable type inference based on the spec and only use type inference based on the data. Alternatively, a parsing directive object can be provided for explicit data types. Each property of the object corresponds to a field name, and the value to the desired data type (one of `"number"`, `"boolean"`, `"date"`, or null (do not parse the field)). For example, `"parse": {"modified_on": "date"}` parses the `modified_on` field in each input record a Date value.\n\nFor `"date"`, we parse data based using Javascript\'s [`Date.parse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse). For Specific date formats can be provided (e.g., `{foo: "date:\'%m%d%Y\'"}`), using the [d3-time-format syntax](https://github.com/d3/d3-time-format#locale_format). UTC date format parsing is supported similarly (e.g., `{foo: "utc:\'%m%d%Y\'"}`). See more about [UTC time](https://vega.github.io/vega-lite/docs/timeunit.html#utc)'},type:{const:"dsv",description:'Type of input data: `"json"`, `"csv"`, `"tsv"`, `"dsv"`.\n\n__Default value:__  The default format type is determined by the extension of the file URL. If no extension is detected, `"json"` will be used by default.',type:"string"}},required:["delimiter"],type:"object"},DynamicCallbackData:{additionalProperties:!1,properties:{dynamicCallbackSource:{description:"The View class has `getDynamicData()` methods that provides the data. This is intended for internal use.",type:"boolean"},format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for parsing the data."},name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"}},required:["dynamicCallbackSource"],type:"object"},DynamicData:{additionalProperties:!1,properties:{dynamicSource:{description:"For internal use.",type:"boolean"},format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for parsing the data."},name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"}},required:["dynamicSource"],type:"object"},DynamicOpacity:{additionalProperties:!1,description:"DynamicOpacity specifies a zoom-dependent behavior for view opacity. The opacity is interpolated between the specified stops.",properties:{channel:{$ref:"#/definitions/PrimaryPositionalChannel"},unitsPerPixel:{description:"Stops expressed as units (base pairs, for example) per pixel.",items:{type:"number"},type:"array"},values:{description:"Opacity values that match the given stops.",items:{type:"number"},type:"array"}},required:["unitsPerPixel","values"],type:"object"},Encoding:{additionalProperties:!1,properties:{angle:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:"Rotation angle of point and text marks."},color:{$ref:"#/definitions/ColorDef%3Cstring%3E",description:"Color of the marks \u2013 either fill or stroke color based on  the `filled` property of mark definition.\n\n_Note:_ 1) For fine-grained control over both fill and stroke colors of the marks, please use the `fill` and `stroke` channels. The `fill` or `stroke` encodings have higher precedence than `color`, thus may override the `color` encoding if conflicting encodings are specified. 2) See the scale documentation for more information about customizing [color scheme](https://vega.github.io/vega-lite/docs/scale.html#scheme)."},dx:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E"},dy:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E"},facetIndex:{$ref:"#/definitions/FieldDefWithoutScale%3Cstring%3E",description:"For internal use"},fill:{$ref:"#/definitions/ColorDef%3Cstring%3E",description:"Fill color of the marks.\n\n_Note:_ The `fill` encoding has higher precedence than `color`, thus may override the `color` encoding if conflicting encodings are specified."},fillOpacity:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:"Fill opacity of the marks."},opacity:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:"Opacity of the marks."},sample:{$ref:"#/definitions/FieldDefWithoutScale%3Cstring%3E",description:"Facet identifier for interactive filtering, sorting, and grouping in the App."},search:{$ref:"#/definitions/FieldDefWithoutScale%3Cstring%3E"},semanticScore:{$ref:"#/definitions/FieldDefWithoutScale%3Cstring%3E"},shape:{$ref:"#/definitions/ShapeDef%3Cstring%3E",description:'Shape of the mark.\n\nFor `point` marks the supported values include:\n- plotting shapes: `"circle"`, `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`, `"triangle-down"`, `"triangle-right"`, or `"triangle-left"`.\n- centered directional shape `"triangle"`'},size:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:'Size of the mark.\n- For `"point"` \u2013 the symbol size, or pixel area of the mark.\n- For `"text"` \u2013 the text\'s font size.'},stroke:{$ref:"#/definitions/ColorDef%3Cstring%3E",description:"Stroke color of the marks.\n\n_Note:_ The `stroke` encoding has higher precedence than `color`, thus may override the `color` encoding if conflicting encodings are specified."},strokeOpacity:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:"Stroke opacity of the marks."},strokeWidth:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:"Stroke width of the marks."},text:{$ref:"#/definitions/TextDef%3Cstring%3E",description:"Text of the `text` mark."},uniqueId:{$ref:"#/definitions/FieldDefWithoutScale%3Cstring%3E",description:"For internal use"},x:{$ref:"#/definitions/PositionDef%3Cstring%3E",description:"X coordinates of the marks.\n\nThe `value` of this channel can be a number between zero and one."},x2:{$ref:"#/definitions/Position2Def%3Cstring%3E",description:"X2 coordinates of the marks.\n\nThe `value` of this channel can be a number between zero and one."},y:{$ref:"#/definitions/PositionDef%3Cstring%3E",description:"Y coordinates of the marks.\n\nThe `value` of this channel can be a number between zero and one."},y2:{$ref:"#/definitions/Position2Def%3Cstring%3E",description:"Y2 coordinates of the marks.\n\nThe `value` of this channel can be a number between zero and one."}},type:"object"},Field:{description:"The name of the field or a JavaScript expression for accessing nested properties. Dots and brackets in the field name must be escaped.",type:"string"},"FieldDefWithoutScale<string>":{additionalProperties:!1,properties:{field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},type:"object"},FieldName:{type:"string"},FilterParams:{additionalProperties:!1,properties:{expr:{description:"An expression string. The data object is removed if the expression evaluates to false.",type:"string"},type:{const:"filter",description:"The type of the transform to be applied",type:"string"}},required:["expr","type"],type:"object"},FilterScoredLabelsParams:{additionalProperties:!1,properties:{channel:{description:'**Default:** `"x"`',enum:["x","y"],type:"string"},lane:{$ref:"#/definitions/Field",description:"An optional field representing element's lane, e.g., if transcripts are shown using a piled up layout."},padding:{description:"Padding (in pixels) around the element.\n\n**Default:** `0`",type:"number"},pos:{$ref:"#/definitions/Field",description:"The field representing element's position on the domain."},score:{$ref:"#/definitions/Field",description:"The field representing the score used for prioritization."},type:{const:"filterScoredLabels",description:"The type of the transform to be applied",type:"string"},width:{$ref:"#/definitions/Field",description:"The field representing element's width in pixels"}},required:["pos","score","type","width"],type:"object"},FlattenCompressedExonsParams:{additionalProperties:!1,properties:{as:{description:'Field names for the flattened exons.\n\n**Default:** `["exonStart", "exonEnd"]`',items:{type:"string"},maxItems:2,minItems:2,type:"array"},exons:{$ref:"#/definitions/Field",description:'The field containing the exons.\n\n**Default:** `"exons"`'},start:{$ref:"#/definitions/Field",description:'Start coordinate of the gene body.\n\n**Default:** `"start"`'},type:{const:"flattenCompressedExons",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},FlattenDelimitedParams:{additionalProperties:!1,properties:{as:{anyOf:[{items:{type:"string"},type:"array"},{type:"string"}],description:`The output field name(s) for the flattened field.

**Default:** the input fields.`},field:{anyOf:[{items:{$ref:"#/definitions/Field"},type:"array"},{$ref:"#/definitions/Field"}],description:"The field(s) to split and flatten"},separator:{anyOf:[{items:{type:"string"},type:"array"},{type:"string"}],description:"Separator(s) used on the field(s) TODO: Rename to delimiter"},type:{const:"flattenDelimited",description:"The type of the transform to be applied",type:"string"}},required:["field","separator","type"],type:"object"},FlattenSequenceParams:{additionalProperties:!1,properties:{as:{description:'Name of the fields where the zero-based index number and flattened sequence letter are written to.\n\n**Default:** `["pos", "sequence"]`',items:{type:"string"},maxItems:2,minItems:2,type:"array"},field:{$ref:"#/definitions/Field",description:'The field to flatten.\n\n**Default:** `"sequence"`'},type:{const:"flattenSequence",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},FontStyle:{enum:["normal","italic"],type:"string"},FontWeight:{anyOf:[{type:"number"},{const:"thin",type:"string"},{const:"light",type:"string"},{const:"regular",type:"string"},{const:"normal",type:"string"},{const:"medium",type:"string"},{const:"bold",type:"string"},{const:"black",type:"string"}]},FormulaParams:{additionalProperties:!1,properties:{as:{description:"The (new) field where the computed value is written to",type:"string"},expr:{description:"An expression string",type:"string"},type:{const:"formula",description:"The type of the transform to be applied",type:"string"}},required:["as","expr","type"],type:"object"},Generator:{$ref:"#/definitions/SequenceGenerator"},GenomeConfig:{additionalProperties:!1,properties:{baseUrl:{description:'Base url of data files: chromsizes, cytobands, and gene annotations.\n\n**Default:** `"https://genomespy.app/data/genomes/"`',type:"string"},contigs:{description:"As an alternative for chromSizes, the contigs can be provided inline.",items:{$ref:"#/definitions/Contig"},type:"array"},name:{description:"Name of the genome assembly, e.g., `hg19` or `hg38`.",type:"string"}},required:["name"],type:"object"},HConcatSpec:{additionalProperties:!1,properties:{baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},hconcat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["hconcat"],type:"object"},HandledTooltip:{additionalProperties:!1,properties:{handler:{type:"string"},params:{type:"object"}},required:["handler"],type:"object"},IdentifierParams:{additionalProperties:!1,properties:{as:{description:'**Default:** `"_uniqueId"`',type:"string"},type:{const:"identifier",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},ImportConfig:{additionalProperties:!1,properties:{name:{type:"string"},params:{type:"object"},url:{type:"string"}},type:"object"},ImportSpec:{additionalProperties:!1,properties:{import:{$ref:"#/definitions/ImportConfig"}},required:["import"],type:"object"},InlineData:{additionalProperties:!1,properties:{format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for parsing the data."},name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"},values:{$ref:"#/definitions/InlineDataset",description:"The full data set, included inline. This can be an array of objects or primitive values, an object, or a string. Arrays of primitive values are ingested as objects with a `data` property. Strings are parsed according to the specified format type."}},required:["values"],type:"object"},InlineDataset:{anyOf:[{items:{type:"number"},type:"array"},{items:{type:"string"},type:"array"},{items:{type:"boolean"},type:"array"},{items:{type:"object"},type:"array"},{type:"string"},{type:"object"}]},JsonDataFormat:{additionalProperties:!1,properties:{parse:{anyOf:[{$ref:"#/definitions/Parse"},{type:"null"}],description:'If set to `null`, disable type inference based on the spec and only use type inference based on the data. Alternatively, a parsing directive object can be provided for explicit data types. Each property of the object corresponds to a field name, and the value to the desired data type (one of `"number"`, `"boolean"`, `"date"`, or null (do not parse the field)). For example, `"parse": {"modified_on": "date"}` parses the `modified_on` field in each input record a Date value.\n\nFor `"date"`, we parse data based using Javascript\'s [`Date.parse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse). For Specific date formats can be provided (e.g., `{foo: "date:\'%m%d%Y\'"}`), using the [d3-time-format syntax](https://github.com/d3/d3-time-format#locale_format). UTC date format parsing is supported similarly (e.g., `{foo: "utc:\'%m%d%Y\'"}`). See more about [UTC time](https://vega.github.io/vega-lite/docs/timeunit.html#utc)'},property:{description:'The JSON property containing the desired data. This parameter can be used when the loaded JSON file may have surrounding structure or meta-data. For example `"property": "values.features"` is equivalent to retrieving `json.values.features` from the loaded JSON object.',type:"string"},type:{const:"json",description:'Type of input data: `"json"`, `"csv"`, `"tsv"`, `"dsv"`.\n\n__Default value:__  The default format type is determined by the extension of the file URL. If no extension is detected, `"json"` will be used by default.',type:"string"}},type:"object"},LayerSpec:{additionalProperties:!1,properties:{aggregateSamples:{items:{anyOf:[{$ref:"#/definitions/UnitSpec"},{$ref:"#/definitions/LayerSpec"}]},type:"array"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},layer:{items:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpec"}]},type:"array"},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},view:{$ref:"#/definitions/ViewBackground"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["layer"],type:"object"},LinearizeGenomicCoordinateParams:{additionalProperties:!1,properties:{as:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"The output field or fields for linearized coordinates."},channel:{description:'Get the genome assembly from the scale of the channel.\n\n**Default:** `"x"`',enum:["x","y"],type:"string"},chrom:{$ref:"#/definitions/Field",description:"The chromosome/contig field"},offset:{anyOf:[{type:"number"},{items:{type:"number"},type:"array"}],description:"An offset or offsets that allow for adjusting the numbering base. The offset is subtracted from the positions.\n\nGenomeSpy uses internally zero-based indexing with half-open intervals. UCSC-based formats (BED, etc.) generally use this scheme. However, for example, VCF files use one-based indexing and must be adjusted by setting the offset to `1`.\n\n**Default:** `0`"},pos:{anyOf:[{$ref:"#/definitions/Field"},{items:{$ref:"#/definitions/Field"},type:"array"}],description:"The field or fields that contain intra-chromosomal positions"},type:{const:"linearizeGenomicCoordinate",description:"The type of the transform to be applied",type:"string"}},required:["as","chrom","pos","type"],type:"object"},MarkConfigAndType:{additionalProperties:!1,properties:{align:{$ref:"#/definitions/Align",description:'The horizontal alignment of the text. One of `"left"`, `"center"`, or `"right"`.\n\n**Default value:** `"left"`'},angle:{description:"The rotation angle in degrees.\n\n**Default value:** `0`",type:"number"},baseline:{$ref:"#/definitions/Baseline",description:'The vertical alignment of the text.  One of `"top"`, `"middle"`, `"bottom"`.\n\n**Default value:** `"bottom"`'},buildIndex:{description:`Builds and index for efficient rendering of subsets of the data. The data must be sorted by the x coordinate.

TODO: This should be enabled automatically if the data are sorted.`,type:"boolean"},clip:{description:"If true, the mark is clipped to the UnitView's rectangle. By default, clipping is enabled for marks that have zoomable positional scales.",type:"boolean"},color:{type:"string"},color2:{description:"TODO",type:"string"},cornerRadius:{description:"Radius of the rounded corners.\n\n**Default value:** `0`",type:"number"},cornerRadiusBottomLeft:{description:"Radius of the bottom left rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},cornerRadiusBottomRight:{description:"Radius of the bottom right rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},cornerRadiusTopLeft:{description:"Radius of the top left rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},cornerRadiusTopRight:{description:"Radius of the top right rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},dx:{description:"The horizontal offset between the text and its anchor point, in pixels. Applied after the rotation by `angle`.",type:"number"},dy:{description:"The vertical offset between the text and its anchor point, in pixels. Applied after the rotation by `angle`.",type:"number"},fill:{type:"string"},fillGradientStrength:{description:"Gradient strength controls the amount of the gradient eye-candy effect in the fill color. Valid values are between 0 and 1.\n\n**Default value:** `0`",type:"number"},fillOpacity:{type:"number"},filled:{description:"Whether the `color` represents the `fill` color (`true`) or the `stroke` color (`false`).",type:"boolean"},fitToBand:{description:'If true, sets the secondary positional channel that allows the text to be squeezed (see the `squeeze` property). Can be used when: 1) `"band"`, `"index"`, or `"locus"` scale is being used and 2) only the primary positional channel is specified.\n\n**Default value:** `false`',type:"boolean"},flushX:{description:"If true, the text is kept inside the viewport when the range of `x` and `x2` intersect the viewport.",type:"boolean"},flushY:{description:"If true, the text is kept inside the viewport when the range of `y` and `y2` intersect the viewport.",type:"boolean"},font:{description:'The font typeface. GenomeSpy uses [SDF](https://github.com/Chlumsky/msdfgen) versions of [Google Fonts](https://fonts.google.com/). Check their availability at the [A-Frame Fonts](https://github.com/etiennepinchon/aframe-fonts/tree/master/fonts) repository. System fonts are **not** supported.\n\n**Default value:** `"Lato"`',type:"string"},fontStyle:{$ref:"#/definitions/FontStyle",description:'The font style. Valid values: `"normal"` and `"italic"`.\n\n**Default value:** `"normal"`'},fontWeight:{$ref:"#/definitions/FontWeight",description:'The font weight. The following strings and numbers are valid values: `"thin"` (`100`), `"light"` (`300`), `"regular"` (`400`), `"normal"` (`400`), `"medium"` (`500`), `"bold"` (`700`), `"black"` (`900`)\n\n**Default value:** `"regular"`'},geometricZoomBound:{description:"Enables geometric zooming. The value is the base two logarithmic zoom level where the maximum point size is reached.\n\n**Default value:** `0`",type:"number"},inwardStroke:{description:"Should the stroke only grow inwards, e.g, the diameter/outline is not affected by the stroke width. Thus, a point that has a zero size has no visible stroke. This allows strokes to be used with geometric zoom, etc.\n\n**Default value:** `false`",type:"boolean"},logoLetters:{description:"Stretch letters so that they can be used with [sequence logos](https://en.wikipedia.org/wiki/Sequence_logo), etc...",type:"boolean"},minBufferSize:{description:"Minimum size for WebGL buffers (number of data items). Allows for using `bufferSubData()` to update graphics.\n\nThis property is intended for internal use.",type:"number"},minHeight:{description:"The minimum height of a rectangle in pixels. The property clamps rectangles' heights.\n\n**Default value:** `0`",type:"number"},minLength:{description:"The minimum length of the rule in pixels. Use this property to ensure that very short ranged rules remain visible even when the user zooms out.\n\n**Default value:** `0`",type:"number"},minOpacity:{description:"Clamps the minimum size-dependent opacity. The property does not affect the `opacity` channel. Valid values are between `0` and `1`.\n\nWhen a rectangle would be smaller than what is specified in `minHeight` and `minWidth`, it is faded out proportionally. Example: a rectangle would be rendered as one pixel wide, but `minWidth` clamps it to five pixels. The rectangle is actually rendered as five pixels wide, but its opacity is multiplied by 0.2. With this setting, you can limit the factor to, for example, 0.5 to keep the rectangles more clearly visible.\n\n**Default value:** `0`",type:"number"},minSagittaLength:{description:"Minimum length of the arc's sagitta. Makes very short links more clearly visible.\n\n**Default value:** `1.5`",type:"number"},minWidth:{description:`The minimum width of a rectangle in pixels. The property clamps rectangles' widths when the viewport is zoomed out.

This property also reduces flickering of very narrow rectangles when zooming. The value should generally be at least one.

**Default value:** \`1\``,type:"number"},opacity:{type:"number"},paddingX:{description:"The horizontal padding, in pixels, when the `x2` channel is used for ranged text.\n\n**Default value:** `0`",type:"number"},paddingY:{description:"The vertical padding, in pixels, when the `y2` channel is used for ranged text.\n\n**Default value:** `0`",type:"number"},sagittaScaleFactor:{description:"Scaling factor of the arc's sagitta. The default value `1.0` produces roughly circular arcs.\n\n**Default value:** `1.0`",type:"number"},sampleFacetPadding:{description:"Padding between sample facet's upper/lower edge and the maximum point size. This property controls how tightly points are squeezed when facet's height is smaller than the maximum point size. The unit is a proportion of facet's height. The value must be between `0` and `0.5`. This property has no effect when sample faceting is not used.\n\n**Default value:** `0.1`",type:"number"},segments:{description:"The number of segments in the b\xE9zier curve. Affects the rendering quality and performance. Use a higher value for a smoother curve.\n\n**Default value:* `101`",type:"number"},semanticZoomFraction:{description:"TODO\n\n**Default value:** `0.02`",type:"number"},shape:{description:'One of `"circle"`, `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`, `"triangle-down"`, `"triangle-right"`, or `"triangle-left"`.\n\n**Default value:** `"circle"`',type:"string"},size:{description:"The font size in pixels.\n\n**Default value:** `11`",type:"number"},size2:{description:"TODO",type:"number"},squeeze:{description:"If the `squeeze` property is true and secondary positional channels (`x2` and/or `y2`) are used, the text is scaled to fit mark's width and/or height.\n\n**Default value:** `true`",type:"boolean"},stroke:{type:"string"},strokeCap:{description:'The style of stroke ends. Available choices: `"butt"`, `"round`", and `"square"`.\n\n**Default value:** `"butt"`',enum:["butt","square","round"],type:"string"},strokeDash:{description:"An array of of alternating stroke and gap lengths or `null` for solid strokes.\n\n**Default value:** `null`",items:{type:"number"},type:"array"},strokeDashOffset:{description:"An offset for the stroke dash pattern.\n\n**Default value:** `0`",type:"number"},strokeOpacity:{type:"number"},strokeWidth:{description:"The stroke width in pixels.",type:"number"},text:{$ref:"#/definitions/Scalar",description:'The text to display. The format of numeric data can be customized by setting a [format specifier](https://github.com/d3/d3-format#locale_format) to channel definition\'s `format` property.\n\n**Default value:** `""`'},tooltip:{$ref:"#/definitions/Tooltip",description:"TODO"},type:{$ref:"#/definitions/MarkType"},viewportEdgeFadeDistanceBottom:{type:"number"},viewportEdgeFadeDistanceLeft:{type:"number"},viewportEdgeFadeDistanceRight:{type:"number"},viewportEdgeFadeDistanceTop:{type:"number"},viewportEdgeFadeWidthBottom:{type:"number"},viewportEdgeFadeWidthLeft:{type:"number"},viewportEdgeFadeWidthRight:{type:"number"},viewportEdgeFadeWidthTop:{type:"number"},x:{type:"number"},x2:{type:"number"},xOffset:{description:"Offsets of the `x` and `x2` coordinates in pixels. The offset is applied after the viewport scaling and translation.\n\n**Default value:** `0`",type:"number"},y:{type:"number"},y2:{type:"number"},yOffset:{description:"Offsets of the `y` and `y2` coordinates in pixels. The offset is applied after the viewport scaling and translation.\n\n**Default value:** `0`",type:"number"}},required:["type"],type:"object"},"MarkPropDatumDef<Type>":{additionalProperties:!1,properties:{datum:{$ref:"#/definitions/Scalar",description:"A constant value in data domain."},resolutionChannel:{$ref:"#/definitions/Channel",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/Type"}},required:["type"],type:"object"},"MarkPropDatumDef<TypeForShape>":{additionalProperties:!1,properties:{datum:{$ref:"#/definitions/Scalar",description:"A constant value in data domain."},resolutionChannel:{$ref:"#/definitions/Channel",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/TypeForShape"}},required:["type"],type:"object"},"MarkPropDef<string,(string|null),TypeForShape>":{anyOf:[{$ref:"#/definitions/MarkPropFieldOrDatumOrExprDef%3Cstring%2CTypeForShape%3E"},{$ref:"#/definitions/ValueDef%3C(string%7Cnull)%3E"}]},"MarkPropDef<string,(string|null)>":{anyOf:[{$ref:"#/definitions/MarkPropFieldOrDatumOrExprDef%3Cstring%2CType%3E"},{$ref:"#/definitions/ValueDef%3C(string%7Cnull)%3E"}]},"MarkPropDef<string,number>":{anyOf:[{$ref:"#/definitions/MarkPropFieldOrDatumOrExprDef%3Cstring%2CType%3E"},{$ref:"#/definitions/ValueDef%3Cnumber%3E"}]},MarkPropExprDef:{additionalProperties:!1,properties:{expr:{description:"An expression. Properties of the data can be accessed through the `datum` object.",type:"string"},resolutionChannel:{$ref:"#/definitions/Channel",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},type:{$ref:"#/definitions/Type"}},required:["expr","type"],type:"object"},"MarkPropFieldDef<string,Type>":{additionalProperties:!1,description:"Field definition of a mark property, which can contain a legend.",properties:{field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},resolutionChannel:{$ref:"#/definitions/Channel",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/Type"}},required:["type"],type:"object"},"MarkPropFieldDef<string,TypeForShape>":{additionalProperties:!1,description:"Field definition of a mark property, which can contain a legend.",properties:{field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},resolutionChannel:{$ref:"#/definitions/Channel",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/TypeForShape"}},required:["type"],type:"object"},"MarkPropFieldOrDatumOrExprDef<string,Type>":{anyOf:[{$ref:"#/definitions/MarkPropFieldDef%3Cstring%2CType%3E"},{$ref:"#/definitions/MarkPropDatumDef%3CType%3E"},{$ref:"#/definitions/MarkPropExprDef"}]},"MarkPropFieldOrDatumOrExprDef<string,TypeForShape>":{anyOf:[{$ref:"#/definitions/MarkPropFieldDef%3Cstring%2CTypeForShape%3E"},{$ref:"#/definitions/MarkPropDatumDef%3CTypeForShape%3E"},{$ref:"#/definitions/MarkPropExprDef"}]},MarkType:{enum:["rect","point","rule","text","link"],type:"string"},MeasureTextParams:{additionalProperties:!1,properties:{as:{type:"string"},field:{$ref:"#/definitions/Field"},fontSize:{type:"number"},type:{const:"measureText",description:"The type of the transform to be applied",type:"string"}},required:["as","field","fontSize","type"],type:"object"},MergeFacetsParams:{additionalProperties:!1,properties:{type:{const:"mergeFacets",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},NamedData:{additionalProperties:!1,properties:{format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for parsing the data."},name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"}},required:["name"],type:"object"},NumericDomain:{items:{type:"number"},type:"array"},"NumericMarkPropDef<string>":{$ref:"#/definitions/MarkPropDef%3Cstring%2Cnumber%3E"},NumericValueDef:{$ref:"#/definitions/ValueDef%3Cnumber%3E"},OtherDataFormat:{additionalProperties:!1,description:'Other data format, such as `"fasta"`',properties:{type:{type:"string"}},required:["type"],type:"object"},PaddingConfig:{anyOf:[{$ref:"#/definitions/Paddings"},{type:"number"}]},Paddings:{additionalProperties:!1,properties:{bottom:{type:"number"},left:{type:"number"},right:{type:"number"},top:{type:"number"}},type:"object"},Parse:{additionalProperties:{$ref:"#/definitions/ParseValue"},type:"object"},ParseValue:{anyOf:[{type:"null"},{type:"string"},{const:"string",type:"string"},{const:"boolean",type:"string"},{const:"date",type:"string"},{const:"number",type:"string"}]},PileupParams:{additionalProperties:!1,properties:{as:{description:'The output field name for the computed lane.\n\n**Default:** `"lane"`.',type:"string"},end:{$ref:"#/definitions/Field",description:"The field representing the end coordinate of the segment (exclusive)."},preference:{$ref:"#/definitions/Field",description:"An optional field indicating the preferred lane. Use together with the `preferredOrder` property."},preferredOrder:{anyOf:[{items:{type:"string"},type:"array"},{items:{type:"number"},type:"array"},{items:{type:"boolean"},type:"array"}],description:"The order of the lane preferences. The first element contains the value that should place the segment on the first lane and so forth. If the preferred lane is occupied, the first available lane is taken."},spacing:{description:"The spacing between adjacent segments on the same lane in coordinate units.\n\n**Default:** `1`.",type:"number"},start:{$ref:"#/definitions/Field",description:"The field representing the start coordinate of the segment (inclusive)."},type:{const:"pileup",description:"The type of the transform to be applied",type:"string"}},required:["end","start","type"],type:"object"},"Position2Def<string>":{anyOf:[{additionalProperties:!1,properties:{band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},type:"object"},{$ref:"#/definitions/SecondaryChromPosDef"},{additionalProperties:!1,properties:{band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},datum:{$ref:"#/definitions/Scalar",description:"A constant value in data domain."},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},type:"object"},{additionalProperties:!1,properties:{band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},expr:{description:"An expression. Properties of the data can be accessed through the `datum` object.",type:"string"}},required:["expr"],type:"object"},{$ref:"#/definitions/PositionValueDef"}]},PositionDatumDef:{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/Axis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},datum:{$ref:"#/definitions/Scalar",description:"A constant value in data domain."},resolutionChannel:{$ref:"#/definitions/Channel",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/Type"}},required:["type"],type:"object"},"PositionDef<string>":{anyOf:[{$ref:"#/definitions/PositionFieldDef%3Cstring%3E"},{$ref:"#/definitions/ChromPosDef"},{$ref:"#/definitions/PositionDatumDef"},{$ref:"#/definitions/PositionExprDef"},{$ref:"#/definitions/PositionValueDef"}]},PositionExprDef:{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/Axis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},expr:{description:"An expression. Properties of the data can be accessed through the `datum` object.",type:"string"},type:{$ref:"#/definitions/Type"}},required:["expr","type"],type:"object"},"PositionFieldDef<string>":{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/Axis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},resolutionChannel:{$ref:"#/definitions/Channel",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/Type"}},required:["type"],type:"object"},PositionValueDef:{$ref:"#/definitions/NumericValueDef"},PositionalChannel:{anyOf:[{$ref:"#/definitions/PrimaryPositionalChannel"},{$ref:"#/definitions/SecondaryPositionalChannel"}]},PrimaryPositionalChannel:{enum:["x","y"],type:"string"},ProjectParams:{additionalProperties:!1,properties:{as:{description:"New names for the projected fields. If omitted, the names of the source fields are used.",items:{type:"string"},type:"array"},fields:{description:"The fields to be projected.",items:{$ref:"#/definitions/Field"},type:"array"},type:{const:"project",description:"The type of the transform to be applied",type:"string"}},required:["fields","type"],type:"object"},RegexExtractParams:{additionalProperties:!1,properties:{as:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"The new field or an array of fields where the extracted values are written."},field:{$ref:"#/definitions/Field",description:"The source field"},regex:{description:'A valid JavaScript regular expression with at least one group. For example: `"^Sample(\\\\d+)$"`.\n\nRead more at: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions',type:"string"},skipInvalidInput:{description:"Do not complain about invalid input. Just skip it and leave the new fields undefined on the affected datum.\n\n**Default:** `false`",type:"boolean"},type:{const:"regexExtract",description:"The type of the transform to be applied",type:"string"}},required:["as","field","regex","type"],type:"object"},RegexFoldParams:{additionalProperties:!1,properties:{asKey:{description:'**Default:** `"sample"`',type:"string"},asValue:{anyOf:[{items:{type:"string"},type:"array"},{type:"string"}],description:"A new column name for the extracted values."},columnRegex:{anyOf:[{items:{type:"string"},type:"array"},{type:"string"}],description:"A regular expression that matches to column names. The regex must have one capturing group that is used for extracting the key (e.g., a sample id) from the column name."},skipRegex:{description:"An optional regex that matches to fields that should not be included in the new folded data objects.",type:"string"},type:{const:"regexFold",description:"The type of the transform to be applied",type:"string"}},required:["asValue","columnRegex","type"],type:"object"},ResolutionBehavior:{description:'`"independent"` and `"shared"` behave similarly to Vega-Lite. `"excluded"` behaves like `"shared"`, but is not pulled towards the root.',enum:["independent","shared","excluded"],type:"string"},RootSpec:{anyOf:[{additionalProperties:!1,properties:{$schema:{type:"string"},aggregateSamples:{items:{anyOf:[{$ref:"#/definitions/UnitSpec"},{$ref:"#/definitions/LayerSpec"}]},type:"array"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},mark:{anyOf:[{$ref:"#/definitions/MarkType"},{$ref:"#/definitions/MarkConfigAndType"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},view:{$ref:"#/definitions/ViewBackground"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["mark"],type:"object"},{additionalProperties:!1,properties:{$schema:{type:"string"},aggregateSamples:{items:{anyOf:[{$ref:"#/definitions/UnitSpec"},{$ref:"#/definitions/LayerSpec"}]},type:"array"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},layer:{items:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpec"}]},type:"array"},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},view:{$ref:"#/definitions/ViewBackground"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["layer"],type:"object"},{additionalProperties:!1,properties:{$schema:{type:"string"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},samples:{$ref:"#/definitions/SampleDef"},spec:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpec"}]},stickySummaries:{type:"boolean"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["samples","spec"],type:"object"},{additionalProperties:!1,properties:{$schema:{type:"string"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},vconcat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["vconcat"],type:"object"},{additionalProperties:!1,properties:{$schema:{type:"string"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},hconcat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["hconcat"],type:"object"},{additionalProperties:!1,properties:{$schema:{type:"string"},baseUrl:{type:"string"},columns:{type:"number"},concat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["columns","concat"],type:"object"}]},SampleAttributeDef:{additionalProperties:!1,properties:{barScale:{$ref:"#/definitions/Scale"},scale:{$ref:"#/definitions/Scale",description:"Color scale (primary)"},type:{$ref:"#/definitions/Type"},visible:{type:"boolean"},width:{type:"number"}},required:["type"],type:"object"},SampleDef:{additionalProperties:!1,properties:{attributes:{additionalProperties:{$ref:"#/definitions/SampleAttributeDef"},type:"object"},data:{$ref:"#/definitions/Data"}},type:"object"},SampleParams:{additionalProperties:!1,properties:{size:{description:"The maximum sample size.\n\n**Default:** `500`",type:"number"},type:{const:"sample",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},SampleSpec:{additionalProperties:!1,properties:{baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},samples:{$ref:"#/definitions/SampleDef"},spec:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpec"}]},stickySummaries:{type:"boolean"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["samples","spec"],type:"object"},Scalar:{type:["string","number","boolean"]},ScalarDomain:{anyOf:[{$ref:"#/definitions/NumericDomain"},{items:{type:"string"},type:"array"},{items:{type:"boolean"},type:"array"}]},Scale:{additionalProperties:!1,properties:{align:{description:"The alignment of the steps within the scale range.\n\nThis value must lie in the range `[0,1]`. A value of `0.5` indicates that the steps should be centered within the range. A value of `0` or `1` may be used to shift the bands to one side, say to position them adjacent to an axis.\n\n__Default value:__ `0.5`",type:"number"},base:{description:"The logarithm base of the `log` scale (default `10`).",type:"number"},bins:{description:"An array of bin boundaries over the scale domain. If provided, axes and legends will use the bin boundaries to inform the choice of tick marks and text labels.",items:{type:"number"},type:"array"},clamp:{description:"If `true`, values that exceed the data domain are clamped to either the minimum or maximum range value\n\n__Default value:__ derived from the [scale config](https://vega.github.io/vega-lite/docs/config.html#scale-config)'s `clamp` (`true` by default).",type:"boolean"},constant:{description:"A constant determining the slope of the symlog function around zero. Only used for `symlog` scales.\n\n__Default value:__ `1`",type:"number"},domain:{anyOf:[{$ref:"#/definitions/ScalarDomain"},{$ref:"#/definitions/ComplexDomain"}],description:"Customized domain values.\n\nFor _quantitative_ fields, `domain` can take the form of a two-element array with minimum and maximum values.  [Piecewise scales](https://vega.github.io/vega-lite/docs/scale.html#piecewise) can be created by providing a `domain` with more than two entries.\n\nFor _temporal_ fields, `domain` can be a two-element array minimum and maximum values, in the form of either timestamps or the [DateTime definition objects](https://vega.github.io/vega-lite/docs/types.html#datetime).\n\nFor _ordinal_ and _nominal_ fields, `domain` can be an array that lists valid input values."},domainMax:{description:"Sets the maximum value in the scale domain, overriding the `domain` property. This property is only intended for use with scales having continuous domains.",type:"number"},domainMid:{description:"Inserts a single mid-point value into a two-element domain. The mid-point value must lie between the domain minimum and maximum values. This property can be useful for setting a midpoint for [diverging color scales](https://vega.github.io/vega-lite/docs/scale.html#piecewise). The domainMid property is only intended for use with scales supporting continuous, piecewise domains.",type:"number"},domainMin:{description:"Sets the minimum value in the scale domain, overriding the domain property. This property is only intended for use with scales having continuous domains.",type:"number"},exponent:{description:"The exponent of the `pow` scale.",type:"number"},interpolate:{anyOf:[{$ref:"#/definitions/ScaleInterpolate"},{$ref:"#/definitions/ScaleInterpolateParams"}],description:"The interpolation method for range values. By default, a general interpolator for numbers, dates, strings and colors (in HCL space) is used. For color ranges, this property allows interpolation in alternative color spaces. Legal values include `rgb`, `hsl`, `hsl-long`, `lab`, `hcl`, `hcl-long`, `cubehelix` and `cubehelix-long` ('-long' variants use longer paths in polar coordinate spaces). If object-valued, this property accepts an object with a string-valued _type_ property and an optional numeric _gamma_ property applicable to rgb and cubehelix interpolators. For more, see the [d3-interpolate documentation](https://github.com/d3/d3-interpolate).\n\n__Default value:__ `hcl`"},name:{description:"The name of the scale. Names are optional but allow the scales to be referenced and found with the API.",type:"string"},nice:{anyOf:[{type:"boolean"},{type:"number"},{additionalProperties:!1,properties:{interval:{type:"string"},step:{type:"number"}},required:["interval","step"],type:"object"}],description:"Extending the domain so that it starts and ends on nice round values. This method typically modifies the scale\u2019s domain, and may only extend the bounds to the nearest round value. Nicing is useful if the domain is computed from data and may be irregular. For example, for a domain of _[0.201479\u2026, 0.996679\u2026]_, a nice domain might be _[0.2, 1.0]_.\n\nFor quantitative scales such as linear, `nice` can be either a boolean flag or a number. If `nice` is a number, it will represent a desired tick count. This allows greater control over the step size used to extend the bounds, guaranteeing that the returned ticks will exactly cover the domain.\n\n__Default value:__ `true` for unbinned _quantitative_ fields; `false` otherwise."},padding:{description:"For _[continuous](https://vega.github.io/vega-lite/docs/scale.html#continuous)_ scales, expands the scale domain to accommodate the specified number of pixels on each of the scale range. The scale range must represent pixels for this parameter to function as intended. Padding adjustment is performed\xA0prior\xA0to all other adjustments, including the effects of the\xA0`zero`,\xA0`nice`,\xA0`domainMin`, and\xA0`domainMax`\xA0properties.\n\nFor _[band](https://vega.github.io/vega-lite/docs/scale.html#band)_ scales, shortcut for setting `paddingInner` and `paddingOuter` to the same value.\n\nFor _[point](https://vega.github.io/vega-lite/docs/scale.html#point)_ scales, alias for `paddingOuter`.\n\n__Default value:__ For _continuous_ scales, derived from the [scale config](https://vega.github.io/vega-lite/docs/scale.html#config)'s `continuousPadding`. For _band and point_ scales, see `paddingInner` and `paddingOuter`.  By default, Vega-Lite sets padding such that _width/height = number of unique values * step_.",minimum:0,type:"number"},paddingInner:{description:`The inner padding (spacing) within each band step of band scales, as a fraction of the step size. This value must lie in the range [0,1].

For point scale, this property is invalid as point scales do not have internal band widths (only step sizes between bands).

__Default value:__ derived from the [scale config](https://vega.github.io/vega-lite/docs/scale.html#config)'s \`bandPaddingInner\`.`,maximum:1,minimum:0,type:"number"},paddingOuter:{description:"The outer padding (spacing) at the ends of the range of band and point scales, as a fraction of the step size. This value must lie in the range [0,1].\n\n__Default value:__ derived from the [scale config](https://vega.github.io/vega-lite/docs/scale.html#config)'s `bandPaddingOuter` for band scales and `pointPadding` for point scales. By default, Vega-Lite sets outer padding such that _width/height = number of unique values * step_.",maximum:1,minimum:0,type:"number"},range:{anyOf:[{items:{type:"number"},type:"array"},{items:{type:"string"},type:"array"},{type:"string"}],description:'The range of the scale. One of:\n\n- A string indicating a [pre-defined named scale range](https://vega.github.io/vega-lite/docs/scale.html#range-config) (e.g., example, `"symbol"`, or `"diverging"`).\n\n- For [continuous scales](https://vega.github.io/vega-lite/docs/scale.html#continuous), two-element array indicating  minimum and maximum values, or an array with more than two entries for specifying a [piecewise scale](https://vega.github.io/vega-lite/docs/scale.html#piecewise).\n\n- For [discrete](https://vega.github.io/vega-lite/docs/scale.html#discrete) and [discretizing](https://vega.github.io/vega-lite/docs/scale.html#discretizing) scales, an array of desired output values.\n\n__Notes:__\n\n1) For color scales you can also specify a color [`scheme`](https://vega.github.io/vega-lite/docs/scale.html#scheme) instead of `range`.\n\n2) Any directly specified `range` for `x` and `y` channels will be ignored. Range can be customized via the view\'s corresponding [size](https://vega.github.io/vega-lite/docs/size.html) (`width` and `height`).'},reverse:{description:"If true, reverses the order of the scale range.\n\n__Default value:__ `false`.",type:"boolean"},round:{description:"If `true`, rounds numeric output values to integers. This can be helpful for snapping to the pixel grid.\n\n__Default value:__ `false`.",type:"boolean"},scheme:{anyOf:[{type:"string"},{$ref:"#/definitions/SchemeParams"}],description:'A string indicating a color [scheme](https://vega.github.io/vega-lite/docs/scale.html#scheme) name (e.g., `"category10"` or `"blues"`) or a [scheme parameter object](https://vega.github.io/vega-lite/docs/scale.html#scheme-params).\n\nDiscrete color schemes may be used with [discrete](https://vega.github.io/vega-lite/docs/scale.html#discrete) or [discretizing](https://vega.github.io/vega-lite/docs/scale.html#discretizing) scales. Continuous color schemes are intended for use with color scales.\n\nFor the full list of supported schemes, please refer to the [Vega Scheme](https://vega.github.io/vega/docs/schemes/#reference) reference.'},type:{$ref:"#/definitions/ScaleType",description:'The type of scale.  Vega-Lite supports the following categories of scale types:\n\n1) [**Continuous Scales**](https://vega.github.io/vega-lite/docs/scale.html#continuous) -- mapping continuous domains to continuous output ranges ([`"linear"`](https://vega.github.io/vega-lite/docs/scale.html#linear), [`"pow"`](https://vega.github.io/vega-lite/docs/scale.html#pow), [`"sqrt"`](https://vega.github.io/vega-lite/docs/scale.html#sqrt), [`"symlog"`](https://vega.github.io/vega-lite/docs/scale.html#symlog), [`"log"`](https://vega.github.io/vega-lite/docs/scale.html#log), [`"time"`](https://vega.github.io/vega-lite/docs/scale.html#time), [`"utc"`](https://vega.github.io/vega-lite/docs/scale.html#utc).\n\n2) [**Discrete Scales**](https://vega.github.io/vega-lite/docs/scale.html#discrete) -- mapping discrete domains to discrete ([`"ordinal"`](https://vega.github.io/vega-lite/docs/scale.html#ordinal)) or continuous ([`"band"`](https://vega.github.io/vega-lite/docs/scale.html#band) and [`"point"`](https://vega.github.io/vega-lite/docs/scale.html#point)) output ranges.\n\n3) [**Discretizing Scales**](https://vega.github.io/vega-lite/docs/scale.html#discretizing) -- mapping continuous domains to discrete output ranges [`"bin-ordinal"`](https://vega.github.io/vega-lite/docs/scale.html#bin-ordinal), [`"quantile"`](https://vega.github.io/vega-lite/docs/scale.html#quantile), [`"quantize"`](https://vega.github.io/vega-lite/docs/scale.html#quantize) and [`"threshold"`](https://vega.github.io/vega-lite/docs/scale.html#threshold).\n\n__Default value:__ please see the [scale type table](https://vega.github.io/vega-lite/docs/scale.html#type).'},zero:{description:"If `true`, ensures that a zero baseline value is included in the scale domain.\n\n__Default value:__ `true` for x and y channels if the quantitative field is not binned and no custom `domain` is provided; `false` otherwise.\n\n__Note:__ Log, time, and utc scales do not support `zero`.",type:"boolean"},zoom:{anyOf:[{type:"boolean"},{$ref:"#/definitions/ZoomParams"}],description:"If `true` and the scale is used on a positional channel, it can bee zoomed and translated interactively."}},type:"object"},ScaleInterpolate:{enum:["rgb","lab","hcl","hsl","hsl-long","hcl-long","cubehelix","cubehelix-long"],type:"string"},ScaleInterpolateParams:{additionalProperties:!1,properties:{gamma:{type:"number"},type:{enum:["rgb","cubehelix","cubehelix-long"],type:"string"}},required:["type"],type:"object"},ScaleType:{enum:["null","linear","log","pow","sqrt","symlog","identity","sequential","quantize","threshold","ordinal","point","band","index","locus"],type:"string"},SchemeParams:{additionalProperties:!1,properties:{count:{description:'The number of colors to use in the scheme. This can be useful for scale types such as `"quantize"`, which use the length of the scale range to determine the number of discrete bins for the scale domain.',type:"number"},extent:{description:"The extent of the color range to use. For example `[0.2, 1]` will rescale the color scheme such that color values in the range _[0, 0.2)_ are excluded from the scheme.",items:{type:"number"},type:"array"},name:{description:'A color scheme name for ordinal scales (e.g., `"category10"` or `"blues"`).\n\nFor the full list of supported schemes, please refer to the [Vega Scheme](https://vega.github.io/vega/docs/schemes/#reference) reference.',type:"string"}},required:["name"],type:"object"},SecondaryChromPosDef:{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/Axis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},chrom:{$ref:"#/definitions/FieldName",description:"The field having the chromosome or contig."},offset:{description:"An offset or offsets that allow for adjusting the numbering base. The offset is subtracted from the positions.\n\nGenomeSpy uses internally zero-based indexing with half-open intervals. UCSC-based formats (BED, etc.) generally use this scheme. However, for example, VCF files use one-based indexing and must be adjusted by setting the offset to `1`.\n\n**Default:** `0`",type:"number"},pos:{$ref:"#/definitions/FieldName",description:"The field having an intra-chromosomal position."},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},required:["chrom"],type:"object"},SecondaryPositionalChannel:{enum:["x2","y2"],type:"string"},SequenceGenerator:{additionalProperties:!1,properties:{name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"},sequence:{$ref:"#/definitions/SequenceParams",description:"Generate a sequence of numbers."}},required:["sequence"],type:"object"},SequenceParams:{additionalProperties:!1,properties:{as:{$ref:"#/definitions/FieldName",description:'The name of the generated sequence field.\n\n__Default value:__ `"data"`'},start:{description:"The starting value of the sequence (inclusive).",type:"number"},step:{description:"The step value between sequence entries.\n\n__Default value:__ `1`",type:"number"},stop:{description:"The ending value of the sequence (exclusive).",type:"number"}},required:["start","stop"],type:"object"},"ShapeDef<string>":{$ref:"#/definitions/MarkPropDef%3Cstring%2C(string%7Cnull)%2CTypeForShape%3E"},SizeDef:{additionalProperties:!1,properties:{grow:{description:"Share of the remaining space",type:"number"},px:{description:"Size in pixels",type:"number"}},type:"object"},SortOrder:{enum:["ascending","descending"],type:"string"},StackParams:{additionalProperties:!1,properties:{as:{description:'Fields to write the stacked values.\n\n**Default:** `["y0", "y1"]`',items:{type:"string"},type:"array"},baseField:{$ref:"#/definitions/Field",description:'The field that contains the base or amino acid. Used for information content calculation when the offset is `"information"`. The data items that have `null` in the baseField are considered gaps and they are taken into account when scaling the the locus\' information content.'},cardinality:{description:'Cardinality, e.g., the number if distinct bases or amino acids. Used for information content calculation when the offset is `"information"`.\n\n**Default:** `4`;',type:"number"},field:{$ref:"#/definitions/Field",description:"The field to stack. If no field is defined, a constant value of one is assumed."},groupby:{description:"The fields to be used for forming groups for different stacks.",items:{$ref:"#/definitions/Field"},type:"array"},offset:{description:'How to offset the values in a stack. `"zero"` (default) starts stacking at 0. `"center"` centers the values around zero. `"normalize"` computes intra-stack percentages and normalizes the values to the range of `[0, 1]`. `"information"` computes a layout for a sequence logo. The total height of the stack reflects the group\'s information content.',enum:["zero","center","normalize","information"],type:"string"},sort:{$ref:"#/definitions/CompareParams",description:"The sort order of data in each stack."},type:{const:"stack",description:"The type of the transform to be applied",type:"string"}},required:["as","groupby","type"],type:"object"},Step:{additionalProperties:!1,properties:{step:{type:"number"}},required:["step"],type:"object"},StringDatumDef:{additionalProperties:!1,properties:{datum:{$ref:"#/definitions/Scalar",description:"A constant value in data domain."},format:{description:`When used with the default \`"number"\` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.

- If the format type is \`"number"\` (e.g., for quantitative fields), this is D3's [number format pattern](https://github.com/d3/d3-format#locale_format).

See the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.`,type:"string"},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},type:"object"},"StringFieldDef<string>":{additionalProperties:!1,properties:{field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},format:{description:`When used with the default \`"number"\` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.

- If the format type is \`"number"\` (e.g., for quantitative fields), this is D3's [number format pattern](https://github.com/d3/d3-format#locale_format).

See the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.`,type:"string"},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},type:"object"},"TextDef<string>":{anyOf:[{$ref:"#/definitions/StringFieldDef%3Cstring%3E"},{$ref:"#/definitions/StringDatumDef"}]},Title:{additionalProperties:!1,properties:{align:{$ref:"#/definitions/Align",description:'Horizontal text alignment for title text. One of `"left"`, `"center"`, or `"right"`.'},anchor:{$ref:"#/definitions/TitleAnchor",description:'The anchor position for placing the title and subtitle text. One of `"start"`, `"middle"`, or `"end"`. For example, with an orientation of top these anchor positions map to a left-, center-, or right-aligned title.'},angle:{description:"Angle in degrees of title and subtitle text.",type:"number"},baseline:{$ref:"#/definitions/Baseline",description:'Vertical text baseline for title and subtitle text. One of `"alphabetic"` (default), `"top"`, `"middle"`, or `"bottom"`.'},color:{description:"Text color for title text.",type:"string"},dx:{description:"Delta offset for title and subtitle text x-coordinate.",type:"number"},dy:{description:"Delta offset for title and subtitle text y-coordinate.",type:"number"},font:{description:"Font name for title text.",type:"string"},fontSize:{description:"Font size in pixels for title text.",minimum:0,type:"number"},fontStyle:{$ref:"#/definitions/FontStyle",description:"Font style for title text."},fontWeight:{$ref:"#/definitions/FontWeight",description:'Font weight for title text. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},frame:{$ref:"#/definitions/TitleFrame",description:'The reference frame for the anchor position, one of `"bounds"` (to anchor relative to the full bounding box) or `"group"` (to anchor relative to the group width or height).'},offset:{description:"The orthogonal offset in pixels by which to displace the title group from its position along the edge of the chart.",type:"number"},orient:{$ref:"#/definitions/TitleOrient",description:'Default title orientation (`"top"`, `"bottom"`, `"left"`, or `"right"`)'},style:{description:'A mark style property to apply to the title text mark. If not specified, a default style of `"group-title"` is applied.',type:"string"},text:{description:"The title text.",type:"string"}},required:["text"],type:"object"},TitleAnchor:{enum:[null,"start","middle","end"],type:["null","string"]},TitleFrame:{enum:["bounds","group"],type:"string"},TitleOrient:{enum:["none","left","right","top","bottom"],type:"string"},Tooltip:{anyOf:[{$ref:"#/definitions/HandledTooltip"},{type:"null"}]},TransformParams:{anyOf:[{$ref:"#/definitions/AggregateParams"},{$ref:"#/definitions/CollectParams"},{$ref:"#/definitions/CoverageParams"},{$ref:"#/definitions/FlattenDelimitedParams"},{$ref:"#/definitions/FormulaParams"},{$ref:"#/definitions/FilterParams"},{$ref:"#/definitions/FilterScoredLabelsParams"},{$ref:"#/definitions/FlattenCompressedExonsParams"},{$ref:"#/definitions/FlattenSequenceParams"},{$ref:"#/definitions/IdentifierParams"},{$ref:"#/definitions/LinearizeGenomicCoordinateParams"},{$ref:"#/definitions/MeasureTextParams"},{$ref:"#/definitions/MergeFacetsParams"},{$ref:"#/definitions/PileupParams"},{$ref:"#/definitions/ProjectParams"},{$ref:"#/definitions/RegexExtractParams"},{$ref:"#/definitions/RegexFoldParams"},{$ref:"#/definitions/SampleParams"},{$ref:"#/definitions/StackParams"}]},Type:{enum:["quantitative","ordinal","nominal","index","locus"],type:"string"},TypeForShape:{enum:["ordinal","nominal"],type:"string"},UnitSpec:{additionalProperties:!1,properties:{aggregateSamples:{items:{anyOf:[{$ref:"#/definitions/UnitSpec"},{$ref:"#/definitions/LayerSpec"}]},type:"array"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},mark:{anyOf:[{$ref:"#/definitions/MarkType"},{$ref:"#/definitions/MarkConfigAndType"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},view:{$ref:"#/definitions/ViewBackground"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["mark"],type:"object"},UrlData:{additionalProperties:!1,properties:{format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for parsing the data."},name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"},url:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"An URL or an array of URLs from which to load the data set. Use the `format.type` property to ensure the loaded data is correctly parsed."}},required:["url"],type:"object"},VConcatSpec:{additionalProperties:!1,properties:{baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},vconcat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["vconcat"],type:"object"},"ValueDef<(string|null)>":{additionalProperties:!1,properties:{value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"`, values between `0` to `1` for opacity).',type:["string","null"]}},required:["value"],type:"object"},"ValueDef<number>":{additionalProperties:!1,properties:{value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"`, values between `0` to `1` for opacity).',type:"number"}},required:["value"],type:"object"},ViewBackground:{additionalProperties:!1,properties:{cornerRadius:{description:"Radius of the rounded corners.\n\n**Default value:** `0`",type:"number"},cornerRadiusBottomLeft:{description:"Radius of the bottom left rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},cornerRadiusBottomRight:{description:"Radius of the bottom right rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},cornerRadiusTopLeft:{description:"Radius of the top left rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},cornerRadiusTopRight:{description:"Radius of the top right rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},fill:{type:"string"},fillOpacity:{type:"number"},minHeight:{description:"The minimum height of a rectangle in pixels. The property clamps rectangles' heights.\n\n**Default value:** `0`",type:"number"},minOpacity:{description:"Clamps the minimum size-dependent opacity. The property does not affect the `opacity` channel. Valid values are between `0` and `1`.\n\nWhen a rectangle would be smaller than what is specified in `minHeight` and `minWidth`, it is faded out proportionally. Example: a rectangle would be rendered as one pixel wide, but `minWidth` clamps it to five pixels. The rectangle is actually rendered as five pixels wide, but its opacity is multiplied by 0.2. With this setting, you can limit the factor to, for example, 0.5 to keep the rectangles more clearly visible.\n\n**Default value:** `0`",type:"number"},minWidth:{description:`The minimum width of a rectangle in pixels. The property clamps rectangles' widths when the viewport is zoomed out.

This property also reduces flickering of very narrow rectangles when zooming. The value should generally be at least one.

**Default value:** \`1\``,type:"number"},stroke:{type:"string"},strokeOpacity:{type:"number"},strokeWidth:{type:"number"},x2:{type:"number"},y2:{type:"number"}},type:"object"},ViewOpacityDef:{anyOf:[{type:"number"},{$ref:"#/definitions/DynamicOpacity"}]},ViewSpec:{anyOf:[{$ref:"#/definitions/UnitSpec"},{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/SampleSpec"},{$ref:"#/definitions/VConcatSpec"},{$ref:"#/definitions/HConcatSpec"},{$ref:"#/definitions/ConcatSpec"}]},ZoomParams:{additionalProperties:!1,properties:{extent:{anyOf:[{$ref:"#/definitions/ScalarDomain"},{$ref:"#/definitions/ComplexDomain"}],description:"The boundaries that limit the zoom and pan interactions."}},type:"object"}};var V3={$ref:Aye,$schema:Mye,definitions:Rye};const Oye="@genome-spy/playground",Fye="0.22.1",Pye="A playground for testing GenomeSpy visualizations",Bye={dev:"vite",build:"vite build",serve:"vite preview"},Vye="Kari Lavikka",Wye="BSD-2-Clause",zye={"@fortawesome/fontawesome-free":"^6.1.1","@fortawesome/fontawesome-svg-core":"^6.1.1","@fortawesome/free-solid-svg-icons":"^6.1.1","@genome-spy/core":"^0.22.1",lit:"^2.0.2","monaco-editor":"^0.30.1","vega-loader":"^4.4.0"};var W3={name:Oye,private:!0,version:Fye,description:Pye,scripts:Bye,author:Vye,license:Wye,dependencies:zye};const Hye="modulepreload",z3={},$ye="",Uye=function(e,t){return!t||t.length===0?e():Promise.all(t.map(i=>{if(i=`${$ye}${i}`,i in z3)return;z3[i]=!0;const s=i.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${r}`))return;const o=document.createElement("link");if(o.rel=s?"stylesheet":Hye,s||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),s)return new Promise((a,l)=>{o.addEventListener("load",a),o.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())};var jye=function(){function n(e,t,i){this._onDidChange=new Tye,this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(i)}return Object.defineProperty(n.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"modeConfiguration",{get:function(){return this._modeConfiguration},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"diagnosticsOptions",{get:function(){return this._diagnosticsOptions},enumerable:!1,configurable:!0}),n.prototype.setDiagnosticsOptions=function(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)},n.prototype.setModeConfiguration=function(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)},n}(),qye={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},Kye={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},IH=new jye("json",qye,Kye);lS.json={jsonDefaults:IH};function Gye(){return Uye(()=>import("./jsonMode.98b4507f.js"),[])}lS.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});lS.onLanguage("json",function(){Gye().then(function(n){return n.setupMode(IH)})});const H3=65535,$a=16777215,$3=4278190080;class j_{constructor(e,t,i){if(e.length!==t.length||e.length>H3)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Uint32Array(Math.ceil(e.length/32)),this._types=i,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],t=(i,s)=>{let r=e[e.length-1];return this.getStartLineNumber(r)<=i&&this.getEndLineNumber(r)>=s};for(let i=0,s=this._startIndexes.length;i<s;i++){let r=this._startIndexes[i],o=this._endIndexes[i];if(r>$a||o>$a)throw new Error("startLineNumber or endLineNumber must not exceed "+$a);for(;e.length>0&&!t(r,o);)e.pop();let a=e.length>0?e[e.length-1]:-1;e.push(i),this._startIndexes[i]=r+((a&255)<<24),this._endIndexes[i]=o+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&$a}getEndLineNumber(e){return this._endIndexes[e]&$a}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){let t=e/32|0,i=e%32;return(this._collapseStates[t]&1<<i)!==0}setCollapsed(e,t){let i=e/32|0,s=e%32,r=this._collapseStates[i];t?this._collapseStates[i]=r|1<<s:this._collapseStates[i]=r&~(1<<s)}setCollapsedAllOfType(e,t){let i=!1;if(this._types)for(let s=0;s<this._types.length;s++)this._types[s]===e&&(this.setCollapsed(s,t),i=!0);return i}toRegion(e){return new Yye(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((this._startIndexes[e]&$3)>>>24)+((this._endIndexes[e]&$3)>>>16);return t===H3?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,i=this._startIndexes.length;if(i===0)return-1;for(;t<i;){let s=Math.floor((t+i)/2);e<this.getStartLineNumber(s)?i=s:t=s+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}}class Yye{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class Zye{constructor(e,t){this._updateEventEmitter=new R,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new j_(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}get regions(){return this._regions}get textModel(){return this._textModel}get isInitialized(){return this._isInitialized}toggleCollapseState(e){if(!e.length)return;e=e.sort((i,s)=>i.regionIndex-s.regionIndex);const t={};this._decorationProvider.changeDecorations(i=>{let s=0,r=-1,o=-1;const a=l=>{for(;s<l;){const c=this._regions.getEndLineNumber(s),h=this._regions.isCollapsed(s);c<=r&&i.changeDecorationOptions(this._editorDecorationIds[s],this._decorationProvider.getDecorationOption(h,c<=o)),h&&c>o&&(o=c),s++}};for(let l of e){let c=l.regionIndex,h=this._editorDecorationIds[c];if(h&&!t[h]){t[h]=!0,a(c);let u=!this._regions.isCollapsed(c);this._regions.setCollapsed(c,u),r=Math.max(r,this._regions.getEndLineNumber(c))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}update(e,t=[]){let i=[],s=(u,d)=>{for(let f of t)if(u<f&&f<=d)return!0;return!1},r=-1,o=(u,d)=>{const f=e.getStartLineNumber(u),g=e.getEndLineNumber(u);d||(d=e.isCollapsed(u)),d&&s(f,g)&&(d=!1),e.setCollapsed(u,d);const p=this._textModel.getLineMaxColumn(f),_={startLineNumber:f,startColumn:Math.max(p-1,1),endLineNumber:f,endColumn:p};i.push({range:_,options:this._decorationProvider.getDecorationOption(d,g<=r)}),d&&g>r&&(r=g)},a=0,l=()=>{for(;a<this._regions.length;){let u=this._regions.isCollapsed(a);if(a++,u)return a-1}return-1},c=0,h=l();for(;h!==-1&&c<e.length;){let u=this._textModel.getDecorationRange(this._editorDecorationIds[h]);if(u){let d=u.startLineNumber;if(u.startColumn===Math.max(u.endColumn-1,1)&&this._textModel.getLineMaxColumn(d)===u.endColumn)for(;c<e.length;){let f=e.getStartLineNumber(c);if(d>=f)o(c,d===f),c++;else break}}h=l()}for(;c<e.length;)o(c,!1),c++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,i),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}getMemento(){let e=[];for(let t=0;t<this._regions.length;t++)if(this._regions.isCollapsed(t)){let i=this._textModel.getDecorationRange(this._editorDecorationIds[t]);if(i){let s=i.startLineNumber,r=i.endLineNumber+this._regions.getEndLineNumber(t)-this._regions.getStartLineNumber(t);e.push({startLineNumber:s,endLineNumber:r})}}if(e.length>0)return e}applyMemento(e){if(!Array.isArray(e))return;let t=[];for(let i of e){let s=this.getRegionAtLine(i.startLineNumber);s&&!s.isCollapsed&&t.push(s)}this.toggleCollapseState(t)}dispose(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}getAllRegionsAtLine(e,t){let i=[];if(this._regions){let s=this._regions.findRange(e),r=1;for(;s>=0;){let o=this._regions.toRegion(s);(!t||t(o,r))&&i.push(o),r++,s=o.parentIndex}}return i}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let i=[],s=e?e.regionIndex+1:0,r=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const o=[];for(let a=s,l=this._regions.length;a<l;a++){let c=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<r){for(;o.length>0&&!c.containedBy(o[o.length-1]);)o.pop();o.push(c),t(c,o.length)&&i.push(c)}else break}}else for(let o=s,a=this._regions.length;o<a;o++){let l=this._regions.toRegion(o);if(this._regions.getStartLineNumber(o)<r)(!t||t(l))&&i.push(l);else break}return i}}function Xye(n,e,t){let i=[];for(let s of t){let r=n.getRegionAtLine(s);if(r){const o=!r.isCollapsed;if(i.push(r),e>1){let a=n.getRegionsInside(r,(l,c)=>l.isCollapsed!==o&&c<e);i.push(...a)}}}n.toggleCollapseState(i)}function Wg(n,e,t=Number.MAX_VALUE,i){let s=[];if(i&&i.length>0)for(let r of i){let o=n.getRegionAtLine(r);if(o&&(o.isCollapsed!==e&&s.push(o),t>1)){let a=n.getRegionsInside(o,(l,c)=>l.isCollapsed!==e&&c<t);s.push(...a)}}else{let r=n.getRegionsInside(null,(o,a)=>o.isCollapsed!==e&&a<t);s.push(...r)}n.toggleCollapseState(s)}function TH(n,e,t,i){let s=[];for(let r of i){let o=n.getAllRegionsAtLine(r,(a,l)=>a.isCollapsed!==e&&l<=t);s.push(...o)}n.toggleCollapseState(s)}function Qye(n,e,t){let i=[];for(let s of t){let r=n.getAllRegionsAtLine(s,o=>o.isCollapsed!==e);r.length>0&&i.push(r[0])}n.toggleCollapseState(i)}function Jye(n,e,t,i){let s=(o,a)=>a===e&&o.isCollapsed!==t&&!i.some(l=>o.containsLine(l)),r=n.getRegionsInside(null,s);n.toggleCollapseState(r)}function NH(n,e,t){let i=[];for(let o of t)i.push(n.getAllRegionsAtLine(o,void 0)[0]);let s=o=>i.every(a=>!a.containedBy(o)&&!o.containedBy(a))&&o.isCollapsed!==e,r=n.getRegionsInside(null,s);n.toggleCollapseState(r)}function DM(n,e,t){let i=n.textModel,s=n.regions,r=[];for(let o=s.length-1;o>=0;o--)if(t!==s.isCollapsed(o)){let a=s.getStartLineNumber(o);e.test(i.getLineContent(a))&&r.push(s.toRegion(o))}n.toggleCollapseState(r)}function LM(n,e,t){let i=n.regions,s=[];for(let r=i.length-1;r>=0;r--)t!==i.isCollapsed(r)&&e===i.getType(r)&&s.push(i.toRegion(r));n.toggleCollapseState(s)}function e1e(n,e){let t=null,i=e.getRegionAtLine(n);if(i!==null&&(t=i.startLineNumber,n===t)){let s=i.parentIndex;s!==-1?t=e.regions.getStartLineNumber(s):t=null}return t}function t1e(n,e){let t=e.getRegionAtLine(n);if(t!==null&&t.startLineNumber===n){if(n!==t.startLineNumber)return t.startLineNumber;{let i=t.parentIndex,s=0;for(i!==-1&&(s=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=s)return null;if(t.parentIndex===i)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<n)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function i1e(n,e){let t=e.getRegionAtLine(n);if(t!==null&&t.startLineNumber===n){let i=t.parentIndex,s=0;if(i!==-1)s=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;s=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=s)return null;if(t.parentIndex===i)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>n)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}class n1e{constructor(e){this._updateEventEmitter=new R,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}updateHiddenRanges(){let e=!1,t=[],i=0,s=0,r=Number.MAX_VALUE,o=-1,a=this._foldingModel.regions;for(;i<a.length;i++){if(!a.isCollapsed(i))continue;let l=a.getStartLineNumber(i)+1,c=a.getEndLineNumber(i);r<=l&&c<=o||(!e&&s<this._hiddenRanges.length&&this._hiddenRanges[s].startLineNumber===l&&this._hiddenRanges[s].endLineNumber===c?(t.push(this._hiddenRanges[s]),s++):(e=!0,t.push(new I(l,1,c,1))),r=l,o=c)}(e||s<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyMemento(e){if(!Array.isArray(e)||e.length===0)return!1;let t=[];for(let i of e){if(!i.startLineNumber||!i.endLineNumber)return!1;t.push(new I(i.startLineNumber+1,1,i.endLineNumber,1))}return this.applyHiddenRanges(t),!0}getMemento(){return this._hiddenRanges.map(e=>({startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber}))}applyHiddenRanges(e){this._hiddenRanges=e,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return U3(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1,i=this._foldingModel.textModel,s=null,r=o=>((!s||!s1e(o,s))&&(s=U3(this._hiddenRanges,o)),s?s.startLineNumber-1:null);for(let o=0,a=e.length;o<a;o++){let l=e[o],c=r(l.startLineNumber);c&&(l=l.setStartPosition(c,i.getLineMaxColumn(c)),t=!0);let h=r(l.endLineNumber);h&&(l=l.setEndPosition(h,i.getLineMaxColumn(h)),t=!0),e[o]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function s1e(n,e){return n>=e.startLineNumber&&n<=e.endLineNumber}function U3(n,e){let t=FV(n,i=>e<i.startLineNumber)-1;return t>=0&&n[t].endLineNumber>=e?n[t]:null}const r1e=5e3,o1e="indent";class a1e{constructor(e){this.editorModel=e,this.id=o1e}dispose(){}compute(e){let t=Qt.getFoldingRules(this.editorModel.getLanguageId()),i=t&&!!t.offSide,s=t&&t.markers;return Promise.resolve(c1e(this.editorModel,i,s))}}class l1e{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,i){if(e>$a||t>$a)return;let s=this._length;this._startIndexes[s]=e,this._endIndexes[s]=t,this._length++,i<1e3&&(this._indentOccurrences[i]=(this._indentOccurrences[i]||0)+1)}toIndentRanges(e){if(this._length<=this._foldingRangesLimit){let t=new Uint32Array(this._length),i=new Uint32Array(this._length);for(let s=this._length-1,r=0;s>=0;s--,r++)t[r]=this._startIndexes[s],i[r]=this._endIndexes[s];return new j_(t,i)}else{let t=0,i=this._indentOccurrences.length;for(let a=0;a<this._indentOccurrences.length;a++){let l=this._indentOccurrences[a];if(l){if(l+t>this._foldingRangesLimit){i=a;break}t+=l}}const s=e.getOptions().tabSize;let r=new Uint32Array(this._foldingRangesLimit),o=new Uint32Array(this._foldingRangesLimit);for(let a=this._length-1,l=0;a>=0;a--){let c=this._startIndexes[a],h=e.getLineContent(c),u=js.computeIndentLevel(h,s);(u<i||u===i&&t++<this._foldingRangesLimit)&&(r[l]=c,o[l]=this._endIndexes[a],l++)}return new j_(r,o)}}}function c1e(n,e,t,i=r1e){const s=n.getOptions().tabSize;let r=new l1e(i),o;t&&(o=new RegExp(`(${t.start.source})|(?:${t.end.source})`));let a=[],l=n.getLineCount()+1;a.push({indent:-1,endAbove:l,line:l});for(let c=n.getLineCount();c>0;c--){let h=n.getLineContent(c),u=js.computeIndentLevel(h,s),d=a[a.length-1];if(u===-1){e&&(d.endAbove=c);continue}let f;if(o&&(f=h.match(o)))if(f[1]){let g=a.length-1;for(;g>0&&a[g].indent!==-2;)g--;if(g>0){a.length=g+1,d=a[g],r.insertFirst(c,d.line,u),d.line=c,d.indent=u,d.endAbove=c;continue}}else{a.push({indent:-2,endAbove:c,line:c});continue}if(d.indent>u){do a.pop(),d=a[a.length-1];while(d.indent>u);let g=d.endAbove-1;g-c>=1&&r.insertFirst(c,g,u)}d.indent===u?d.endAbove=c:a.push({indent:u,endAbove:c,line:c})}return r.toIndentRanges(n)}const h1e=5e3,u1e={},AH="syntax";class d1e{constructor(e,t,i,s=h1e){this.editorModel=e,this.providers=t,this.limit=s,this.id=AH;for(const r of t)typeof r.onDidChange=="function"&&(this.disposables||(this.disposables=new ee),this.disposables.add(r.onDidChange(i)))}compute(e){return f1e(this.providers,this.editorModel,e).then(t=>t?MH(t,this.limit):null)}dispose(){var e;(e=this.disposables)===null||e===void 0||e.dispose()}}function f1e(n,e,t){let i=null,s=n.map((r,o)=>Promise.resolve(r.provideFoldingRanges(e,u1e,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(i)||(i=[]);let l=e.getLineCount();for(let c of a)c.start>0&&c.end>c.start&&c.end<=l&&i.push({start:c.start,end:c.end,rank:o,kind:c.kind})}},kr));return Promise.all(s).then(r=>i)}class g1e{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,i,s){if(e>$a||t>$a)return;let r=this._length;this._startIndexes[r]=e,this._endIndexes[r]=t,this._nestingLevels[r]=s,this._types[r]=i,this._length++,s<30&&(this._nestingLevelCounts[s]=(this._nestingLevelCounts[s]||0)+1)}toIndentRanges(){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let i=0;i<this._length;i++)e[i]=this._startIndexes[i],t[i]=this._endIndexes[i];return new j_(e,t,this._types)}else{let e=0,t=this._nestingLevelCounts.length;for(let o=0;o<this._nestingLevelCounts.length;o++){let a=this._nestingLevelCounts[o];if(a){if(a+e>this._foldingRangesLimit){t=o;break}e+=a}}let i=new Uint32Array(this._foldingRangesLimit),s=new Uint32Array(this._foldingRangesLimit),r=[];for(let o=0,a=0;o<this._length;o++){let l=this._nestingLevels[o];(l<t||l===t&&e++<this._foldingRangesLimit)&&(i[a]=this._startIndexes[o],s[a]=this._endIndexes[o],r[a]=this._types[o],a++)}return new j_(i,s,r)}}}function MH(n,e){let t=n.sort((o,a)=>{let l=o.start-a.start;return l===0&&(l=o.rank-a.rank),l}),i=new g1e(e),s,r=[];for(let o of t)if(!s)s=o,i.add(o.start,o.end,o.kind&&o.kind.value,r.length);else if(o.start>s.start)if(o.end<=s.end)r.push(s),s=o,i.add(o.start,o.end,o.kind&&o.kind.value,r.length);else{if(o.start>s.end){do s=r.pop();while(s&&o.start>s.end);s&&r.push(s),s=o}i.add(o.start,o.end,o.kind&&o.kind.value,r.length)}return i.toIndentRanges()}const RH="init";class p1e{constructor(e,t,i,s){if(this.editorModel=e,this.id=RH,t.length){let r=o=>({range:{startLineNumber:o.startLineNumber,startColumn:0,endLineNumber:o.endLineNumber,endColumn:e.getLineLength(o.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1}});this.decorationIds=e.deltaDecorations([],t.map(r)),this.timeout=setTimeout(i,s)}}dispose(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),typeof this.timeout=="number"&&(clearTimeout(this.timeout),this.timeout=void 0)}compute(e){let t=[];if(this.decorationIds)for(let i of this.decorationIds){let s=this.editorModel.getDecorationRange(i);s&&t.push({start:s.startLineNumber,end:s.endLineNumber,rank:1})}return Promise.resolve(MH(t,Number.MAX_VALUE))}}const kM=un("folding-expanded",se.chevronDown,m("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),EM=un("folding-collapsed",se.chevronRight,m("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin."));class pr{constructor(e){this.editor=e,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}getDecorationOption(e,t){return t?pr.HIDDEN_RANGE_DECORATION:e?this.showFoldingHighlights?pr.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:pr.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?pr.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:pr.EXPANDED_VISUAL_DECORATION}deltaDecorations(e,t){return this.editor.deltaDecorations(e,t)}changeDecorations(e){return this.editor.changeDecorations(e)}}pr.COLLAPSED_VISUAL_DECORATION=$e.register({description:"folding-collapsed-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:Rt.asClassName(EM)});pr.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=$e.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:Rt.asClassName(EM)});pr.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=$e.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:Rt.asClassName(kM)});pr.EXPANDED_VISUAL_DECORATION=$e.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+Rt.asClassName(kM)});pr.HIDDEN_RANGE_DECORATION=$e.register({description:"folding-hidden-range-decoration",stickiness:1});var m1e=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},_1e=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};const xn=new he("foldingEnabled",!1);let sg=class OH extends q{constructor(e,t){super(),this.contextKeyService=t,this.localToDispose=this._register(new ee),this.editor=e;const i=this.editor.getOptions();this._isEnabled=i.get(37),this._useFoldingProviders=i.get(38)!=="indentation",this._unfoldOnClickAfterEndOfLine=i.get(41),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=i.get(40),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingStateMemento=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new pr(e),this.foldingDecorationProvider.autoHideFoldingControls=i.get(98)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=i.get(39),this.foldingEnabled=xn.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(s=>{if(s.hasChanged(37)&&(this._isEnabled=this.editor.getOptions().get(37),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),s.hasChanged(98)||s.hasChanged(39)){const r=this.editor.getOptions();this.foldingDecorationProvider.autoHideFoldingControls=r.get(98)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=r.get(39),this.onModelContentChanged()}s.hasChanged(38)&&(this._useFoldingProviders=this.editor.getOptions().get(38)!=="indentation",this.onFoldingStrategyChanged()),s.hasChanged(41)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(41)),s.hasChanged(40)&&(this._foldingImportsByDefault=this.editor.getOptions().get(40))})),this.onModelChanged()}static get(e){return e.getContribution(OH.ID)}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),i=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:i,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel||!e||e.lineCount!==t.getLineCount()||(this._currentModelHasFoldedImports=!!e.foldedImports,!e.collapsedRegions))return;(e.provider===AH||e.provider===RH)&&(this.foldingStateMemento=e);const i=e.collapsedRegions;if(this.hiddenRangeModel.applyMemento(i)){const s=this.getFoldingModel();s&&s.then(r=>{if(r){this._restoringViewState=!0;try{r.applyMemento(i)}finally{this._restoringViewState=!1}}}).then(void 0,Ie)}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new Zye(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new n1e(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new Dg(200),this.cursorChangedScheduler=new Wt(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(AE.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(()=>this.onModelContentChanged())),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.foldingStateMemento=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.onModelContentChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.onModelContentChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new a1e(e),this._useFoldingProviders&&this.foldingModel){let t=AE.ordered(this.foldingModel.textModel);if(t.length===0&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions)return this.rangeProvider=new p1e(e,this.foldingStateMemento.collapsedRegions,()=>{this.foldingStateMemento=null,this.onFoldingStrategyChanged()},3e4);t.length>0&&(this.rangeProvider=new d1e(e,t,()=>this.onModelContentChanged()))}return this.foldingStateMemento=null,this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onModelContentChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=this.getRangeProvider(e.textModel);let i=this.foldingRegionPromise=ks(s=>t.compute(s));return i.then(s=>{if(s&&i===this.foldingRegionPromise){let r;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const l=s.setCollapsedAllOfType(ao.Imports.value,!0);l&&(r=Jf.capture(this.editor),this._currentModelHasFoldedImports=l)}let o=this.editor.getSelections(),a=o?o.map(l=>l.startLineNumber):[];e.update(s,a),r&&r.restore(this.editor)}return e})}).then(void 0,e=>(Ie(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();!e||e.then(t=>{if(t){let i=this.editor.getSelections();if(i&&i.length>0){let s=[];for(let r of i){let o=r.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(o)&&s.push(...t.getAllRegionsAtLine(o,a=>a.isCollapsed&&o>a.startLineNumber))}s.length&&(t.toggleCollapseState(s),this.reveal(i[0].getPosition()))}}}).then(void 0,Ie)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let i=!1;switch(e.target.type){case 4:const s=e.target.detail,r=e.target.element.offsetLeft;if(s.offsetX-r<5)return;i=!0;break;case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){let a=this.editor.getModel();if(a&&t.startColumn===a.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:i}}onEditorMouseUp(e){const t=this.getFoldingModel();if(!t||!this.mouseDownInfo||!e.target)return;let i=this.mouseDownInfo.lineNumber,s=this.mouseDownInfo.iconClicked,r=e.target.range;if(!(!r||r.startLineNumber!==i)){if(s){if(e.target.type!==4)return}else{let o=this.editor.getModel();if(!o||r.startColumn!==o.getLineMaxColumn(i))return}t.then(o=>{if(o){let a=o.getRegionAtLine(i);if(a&&a.startLineNumber===i){let l=a.isCollapsed;if(s||l){let c=e.event.altKey,h=[];if(c){let u=f=>!f.containedBy(a)&&!a.containedBy(f),d=o.getRegionsInside(null,u);for(const f of d)f.isCollapsed&&h.push(f);h.length===0&&(h=d)}else{let u=e.event.middleButton||e.event.shiftKey;if(u)for(const d of o.getRegionsInside(a))d.isCollapsed===l&&h.push(d);(l||!u||h.length===0)&&h.push(a)}o.toggleCollapseState(h),this.reveal({lineNumber:i,column:1})}}}}).then(void 0,Ie)}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};sg.ID="editor.contrib.folding";sg=m1e([_1e(1,Le)],sg);class Un extends zt{runEditorCommand(e,t,i){let s=sg.get(t);if(!s)return;let r=s.getFoldingModel();if(r)return this.reportTelemetry(e,t),r.then(o=>{if(o){this.invoke(s,o,t,i);const a=t.getSelection();a&&s.reveal(a.getStartPosition())}})}getSelectedLines(e){let t=e.getSelections();return t?t.map(i=>i.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(i=>i+1):this.getSelectedLines(t)}run(e,t){}}function FH(n){if(!vn(n)){if(!An(n))return!1;const e=n;if(!vn(e.levels)&&!au(e.levels)||!vn(e.direction)&&!oo(e.direction)||!vn(e.selectionLines)&&(!rV(e.selectionLines)||!e.selectionLines.every(au)))return!1}return!0}class b1e extends Un{constructor(){super({id:"editor.unfold",label:m("unfoldAction.label","Unfold"),alias:"Unfold",precondition:xn,kbOpts:{kbExpr:B.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:FH,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,s){let r=s&&s.levels||1,o=this.getLineNumbers(s,i);s&&s.direction==="up"?TH(t,!1,r,o):Wg(t,!1,r,o)}}class v1e extends Un{constructor(){super({id:"editor.unfoldRecursively",label:m("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:xn,kbOpts:{kbExpr:B.editorTextFocus,primary:Vn(2089,2137),weight:100}})}invoke(e,t,i,s){Wg(t,!1,Number.MAX_VALUE,this.getSelectedLines(i))}}class w1e extends Un{constructor(){super({id:"editor.fold",label:m("foldAction.label","Fold"),alias:"Fold",precondition:xn,kbOpts:{kbExpr:B.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:FH,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,s){let r=this.getLineNumbers(s,i);const o=s&&s.levels,a=s&&s.direction;typeof o!="number"&&typeof a!="string"?Qye(t,!0,r):a==="up"?TH(t,!0,o||1,r):Wg(t,!0,o||1,r)}}class C1e extends Un{constructor(){super({id:"editor.toggleFold",label:m("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:xn,kbOpts:{kbExpr:B.editorTextFocus,primary:Vn(2089,2090),weight:100}})}invoke(e,t,i){let s=this.getSelectedLines(i);Xye(t,1,s)}}class y1e extends Un{constructor(){super({id:"editor.foldRecursively",label:m("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:xn,kbOpts:{kbExpr:B.editorTextFocus,primary:Vn(2089,2135),weight:100}})}invoke(e,t,i){let s=this.getSelectedLines(i);Wg(t,!0,Number.MAX_VALUE,s)}}class S1e extends Un{constructor(){super({id:"editor.foldAllBlockComments",label:m("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:xn,kbOpts:{kbExpr:B.editorTextFocus,primary:Vn(2089,2133),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())LM(t,ao.Comment.value,!0);else{const s=i.getModel();if(!s)return;const r=Qt.getComments(s.getLanguageId());if(r&&r.blockCommentStartToken){let o=new RegExp("^\\s*"+so(r.blockCommentStartToken));DM(t,o,!0)}}}}class x1e extends Un{constructor(){super({id:"editor.foldAllMarkerRegions",label:m("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:xn,kbOpts:{kbExpr:B.editorTextFocus,primary:Vn(2089,2077),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())LM(t,ao.Region.value,!0);else{const s=i.getModel();if(!s)return;const r=Qt.getFoldingRules(s.getLanguageId());if(r&&r.markers&&r.markers.start){let o=new RegExp(r.markers.start);DM(t,o,!0)}}}}class D1e extends Un{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:m("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:xn,kbOpts:{kbExpr:B.editorTextFocus,primary:Vn(2089,2078),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())LM(t,ao.Region.value,!1);else{const s=i.getModel();if(!s)return;const r=Qt.getFoldingRules(s.getLanguageId());if(r&&r.markers&&r.markers.start){let o=new RegExp(r.markers.start);DM(t,o,!1)}}}}class L1e extends Un{constructor(){super({id:"editor.foldAllExcept",label:m("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:xn,kbOpts:{kbExpr:B.editorTextFocus,primary:Vn(2089,2131),weight:100}})}invoke(e,t,i){let s=this.getSelectedLines(i);NH(t,!0,s)}}class k1e extends Un{constructor(){super({id:"editor.unfoldAllExcept",label:m("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:xn,kbOpts:{kbExpr:B.editorTextFocus,primary:Vn(2089,2129),weight:100}})}invoke(e,t,i){let s=this.getSelectedLines(i);NH(t,!1,s)}}class E1e extends Un{constructor(){super({id:"editor.foldAll",label:m("foldAllAction.label","Fold All"),alias:"Fold All",precondition:xn,kbOpts:{kbExpr:B.editorTextFocus,primary:Vn(2089,2069),weight:100}})}invoke(e,t,i){Wg(t,!0)}}class I1e extends Un{constructor(){super({id:"editor.unfoldAll",label:m("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:xn,kbOpts:{kbExpr:B.editorTextFocus,primary:Vn(2089,2088),weight:100}})}invoke(e,t,i){Wg(t,!1)}}class vu extends Un{getFoldingLevel(){return parseInt(this.id.substr(vu.ID_PREFIX.length))}invoke(e,t,i){Jye(t,this.getFoldingLevel(),!0,this.getSelectedLines(i))}}vu.ID_PREFIX="editor.foldLevel";vu.ID=n=>vu.ID_PREFIX+n;class T1e extends Un{constructor(){super({id:"editor.gotoParentFold",label:m("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:xn,kbOpts:{kbExpr:B.editorTextFocus,weight:100}})}invoke(e,t,i){let s=this.getSelectedLines(i);if(s.length>0){let r=e1e(s[0],t);r!==null&&i.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}class N1e extends Un{constructor(){super({id:"editor.gotoPreviousFold",label:m("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:xn,kbOpts:{kbExpr:B.editorTextFocus,weight:100}})}invoke(e,t,i){let s=this.getSelectedLines(i);if(s.length>0){let r=t1e(s[0],t);r!==null&&i.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}class A1e extends Un{constructor(){super({id:"editor.gotoNextFold",label:m("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:xn,kbOpts:{kbExpr:B.editorTextFocus,weight:100}})}invoke(e,t,i){let s=this.getSelectedLines(i);if(s.length>0){let r=i1e(s[0],t);r!==null&&i.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}$n(sg.ID,sg);ze(b1e);ze(v1e);ze(w1e);ze(y1e);ze(E1e);ze(I1e);ze(S1e);ze(x1e);ze(D1e);ze(L1e);ze(k1e);ze(C1e);ze(T1e);ze(N1e);ze(A1e);for(let n=1;n<=7;n++)fW(new vu({id:vu.ID(n),label:m("foldLevelAction.label","Fold Level {0}",n),alias:`Fold Level ${n}`,precondition:xn,kbOpts:{kbExpr:B.editorTextFocus,primary:Vn(2089,2048|21+n),weight:100}}));const M1e=M("editor.foldBackground",{light:vt(Ql,.3),dark:vt(Ql,.3),hc:null},m("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),R1e=M("editorGutter.foldingControlForeground",{dark:Zx,light:Zx,hc:Zx},m("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));kt((n,e)=>{const t=n.getColor(M1e);t&&e.addRule(`.monaco-editor .folded-background { background-color: ${t}; }`);const i=n.getColor(R1e);i&&e.addRule(`
		.monaco-editor .cldr${Rt.asCSSSelector(kM)},
		.monaco-editor .cldr${Rt.asCSSSelector(EM)} {
			color: ${i} !important;
		}
		`)});class nn{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getCurrentMatchesPosition(e){let t=this._editor.getModel().getDecorationsInRange(e);for(const i of t){const s=i.options;if(s===nn._FIND_MATCH_DECORATION||s===nn._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(i.id)}return 0}setCurrentFindMatch(e){let t=null,i=0;if(e)for(let s=0,r=this._decorations.length;s<r;s++){let o=this._editor.getModel().getDecorationRange(this._decorations[s]);if(e.equalsRange(o)){t=this._decorations[s],i=s+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(s=>{if(this._highlightedDecorationId!==null&&(s.changeDecorationOptions(this._highlightedDecorationId,nn._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,s.changeDecorationOptions(this._highlightedDecorationId,nn._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(s.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let r=this._editor.getModel().getDecorationRange(t);if(r.startLineNumber!==r.endLineNumber&&r.endColumn===1){let o=r.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(o);r=new I(r.startLineNumber,r.startColumn,o,a)}this._rangeHighlightDecorationId=s.addDecoration(r,nn._RANGE_HIGHLIGHT_DECORATION)}}),i}set(e,t){this._editor.changeDecorations(i=>{let s=nn._FIND_MATCH_DECORATION,r=[];if(e.length>1e3){s=nn._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),c=this._editor.getLayoutInfo().height/a,h=Math.max(2,Math.ceil(3/c));let u=e[0].range.startLineNumber,d=e[0].range.endLineNumber;for(let f=1,g=e.length;f<g;f++){const p=e[f].range;d+h>=p.startLineNumber?p.endLineNumber>d&&(d=p.endLineNumber):(r.push({range:new I(u,1,d,1),options:nn._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),u=p.startLineNumber,d=p.endLineNumber)}r.push({range:new I(u,1,d,1),options:nn._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let o=new Array(e.length);for(let a=0,l=e.length;a<l;a++)o[a]={range:e[a].range,options:s};this._decorations=i.deltaDecorations(this._decorations,o),this._overviewRulerApproximateDecorations=i.deltaDecorations(this._overviewRulerApproximateDecorations,r),this._rangeHighlightDecorationId&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>i.removeDecoration(a)),this._findScopeDecorationIds=[]),t!=null&&t.length&&(this._findScopeDecorationIds=t.map(a=>i.addDecoration(a,nn._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){let i=this._decorations[t],s=this._editor.getModel().getDecorationRange(i);if(!(!s||s.endLineNumber>e.lineNumber)){if(s.endLineNumber<e.lineNumber)return s;if(!(s.endColumn>e.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,i=this._decorations.length;t<i;t++){let s=this._decorations[t],r=this._editor.getModel().getDecorationRange(s);if(!(!r||r.startLineNumber<e.lineNumber)){if(r.startLineNumber>e.lineNumber)return r;if(!(r.startColumn<e.column))return r}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}nn._CURRENT_FIND_MATCH_DECORATION=$e.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:ms(M2),position:ra.Center},minimap:{color:ms(jW),position:Qo.Inline}});nn._FIND_MATCH_DECORATION=$e.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:ms(M2),position:ra.Center},minimap:{color:ms(jW),position:Qo.Inline}});nn._FIND_MATCH_NO_OVERVIEW_DECORATION=$e.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});nn._FIND_MATCH_ONLY_OVERVIEW_DECORATION=$e.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:ms(M2),position:ra.Center}});nn._RANGE_HIGHLIGHT_DECORATION=$e.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});nn._FIND_SCOPE_DECORATION=$e.register({description:"find-scope",className:"findScope",isWholeLine:!0});class O1e{constructor(e,t,i){this._editorSelection=e,this._ranges=t,this._replaceStrings=i,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){let i=[];for(let o=0;o<this._ranges.length;o++)i.push({range:this._ranges[o],text:this._replaceStrings[o]});i.sort((o,a)=>I.compareRangesUsingStarts(o.range,a.range));let s=[],r=i[0];for(let o=1;o<i.length;o++)r.range.endLineNumber===i[o].range.startLineNumber&&r.range.endColumn===i[o].range.startColumn?(r.range=r.range.plusRange(i[o].range),r.text=r.text+i[o].text):(s.push(r),r=i[o]);s.push(r);for(const o of s)t.addEditOperation(o.range,o.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}function PH(n,e){if(n&&n[0]!==""){const t=j3(n,e,"-"),i=j3(n,e,"_");return t&&!i?q3(n,e,"-"):!t&&i?q3(n,e,"_"):n[0].toUpperCase()===n[0]?e.toUpperCase():n[0].toLowerCase()===n[0]?e.toLowerCase():Xae(n[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):n[0][0].toUpperCase()!==n[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function j3(n,e,t){return n[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&n[0].split(t).length===e.split(t).length}function q3(n,e,t){const i=e.split(t),s=n[0].split(t);let r="";return i.forEach((o,a)=>{r+=PH([s[a]],o)+t}),r.slice(0,-1)}class K3{constructor(e){this.staticValue=e,this.kind=0}}class F1e{constructor(e){this.pieces=e,this.kind=1}}class rg{constructor(e){!e||e.length===0?this._state=new K3(""):e.length===1&&e[0].staticValue!==null?this._state=new K3(e[0].staticValue):this._state=new F1e(e)}static fromStaticValue(e){return new rg([qh.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}buildReplaceString(e,t){if(this._state.kind===0)return t?PH(e,this._state.staticValue):this._state.staticValue;let i="";for(let s=0,r=this._state.pieces.length;s<r;s++){let o=this._state.pieces[s];if(o.staticValue!==null){i+=o.staticValue;continue}let a=rg._substitute(o.matchIndex,e);if(o.caseOps!==null&&o.caseOps.length>0){let l=[],c=o.caseOps.length,h=0;for(let u=0,d=a.length;u<d;u++){if(h>=c){l.push(a.slice(u));break}switch(o.caseOps[h]){case"U":l.push(a[u].toUpperCase());break;case"u":l.push(a[u].toUpperCase()),h++;break;case"L":l.push(a[u].toLowerCase());break;case"l":l.push(a[u].toLowerCase()),h++;break;default:l.push(a[u])}}a=l.join("")}i+=a}return i}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let i="";for(;e>0;){if(e<t.length)return(t[e]||"")+i;i=String(e%10)+i,e=Math.floor(e/10)}return"$"+i}}class qh{constructor(e,t,i){this.staticValue=e,this.matchIndex=t,!i||i.length===0?this.caseOps=null:this.caseOps=i.slice(0)}static staticValue(e){return new qh(e,-1,null)}static caseOps(e,t){return new qh(null,e,t)}}class P1e{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,i){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=qh.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=qh.caseOps(e,i),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=qh.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new rg(this._result)}}function B1e(n){if(!n||n.length===0)return new rg(null);let e=[],t=new P1e(n);for(let i=0,s=n.length;i<s;i++){let r=n.charCodeAt(i);if(r===92){if(i++,i>=s)break;let o=n.charCodeAt(i);switch(o){case 92:t.emitUnchanged(i-1),t.emitStatic("\\",i+1);break;case 110:t.emitUnchanged(i-1),t.emitStatic(`
`,i+1);break;case 116:t.emitUnchanged(i-1),t.emitStatic("	",i+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(i-1),t.emitStatic("",i+1),e.push(String.fromCharCode(o));break}continue}if(r===36){if(i++,i>=s)break;let o=n.charCodeAt(i);if(o===36){t.emitUnchanged(i-1),t.emitStatic("$",i+1);continue}if(o===48||o===38){t.emitUnchanged(i-1),t.emitMatchIndex(0,i+1,e),e.length=0;continue}if(49<=o&&o<=57){let a=o-48;if(i+1<s){let l=n.charCodeAt(i+1);if(48<=l&&l<=57){i++,a=a*10+(l-48),t.emitUnchanged(i-2),t.emitMatchIndex(a,i+1,e),e.length=0;continue}}t.emitUnchanged(i-1),t.emitMatchIndex(a,i+1,e),e.length=0;continue}}}return t.finalize()}const Ku=new he("findWidgetVisible",!1),cS=new he("findInputFocussed",!1),IM=new he("replaceInputFocussed",!1),sv={primary:545,mac:{primary:2593}},rv={primary:565,mac:{primary:2613}},ov={primary:560,mac:{primary:2608}},av={primary:554,mac:{primary:2602}},lv={primary:558,mac:{primary:2606}},_t={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},$l=19999,V1e=240;class Dm{constructor(e,t){this._toDispose=new ee,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new Wn,this._decorations=new nn(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new Wt(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(i=>{(i.reason===3||i.reason===5||i.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(i=>{this._ignoreModelContentChanged||(i.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(i=>this._onStateChanged(i))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,He(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||!this._editor.hasModel()||(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},V1e)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let i=null;typeof t!="undefined"?t!==null&&(Array.isArray(t)?i=t:i=[t]):i=this._decorations.getFindScopes(),i!==null&&(i=i.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new I(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));let s=this._findMatches(i,!1,$l);this._decorations.set(s,i);const r=this._editor.getSelection();let o=this._decorations.getCurrentMatchesPosition(r);if(o===0&&s.length>0){const a=FV(s.map(l=>l.range),l=>I.compareRangesUsingStarts(l,r)>=0);o=a>0?a-1+1:o}this._state.changeMatchInfo(o,this._decorations.getCount(),void 0),e&&this._editor.getOption(35).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){let t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:i,column:s}=e,r=this._editor.getModel();return t||s===1?(i===1?i=r.getLineCount():i--,s=r.getLineMaxColumn(i)):s--,new P(i,s)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const h=this._decorations.matchAfterPosition(e);h&&this._setCurrentFindMatch(h);return}if(this._decorations.getCount()<$l){let h=this._decorations.matchBeforePosition(e);h&&h.isEmpty()&&h.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),h=this._decorations.matchBeforePosition(e)),h&&this._setCurrentFindMatch(h);return}if(this._cannotFind())return;let i=this._decorations.getFindScope(),s=Dm._getSearchRange(this._editor.getModel(),i);s.getEndPosition().isBefore(e)&&(e=s.getEndPosition()),e.isBefore(s.getStartPosition())&&(e=s.getEndPosition());let{lineNumber:r,column:o}=e,a=this._editor.getModel(),l=new P(r,o),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,!1);if(c&&c.range.isEmpty()&&c.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,!1)),!!c){if(!t&&!s.containsRange(c.range))return this._moveToPrevMatch(c.range.getStartPosition(),!0);this._setCurrentFindMatch(c.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:i,column:s}=e,r=this._editor.getModel();return t||s===r.getLineMaxColumn(i)?(i===r.getLineCount()?i=1:i++,s=1):s++,new P(i,s)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const i=this._decorations.matchBeforePosition(e);i&&this._setCurrentFindMatch(i);return}if(this._decorations.getCount()<$l){let i=this._decorations.matchAfterPosition(e);i&&i.isEmpty()&&i.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),i=this._decorations.matchAfterPosition(e)),i&&this._setCurrentFindMatch(i);return}let t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,i,s=!1){if(this._cannotFind())return null;let r=this._decorations.getFindScope(),o=Dm._getSearchRange(this._editor.getModel(),r);o.getEndPosition().isBefore(e)&&(e=o.getStartPosition()),e.isBefore(o.getStartPosition())&&(e=o.getStartPosition());let{lineNumber:a,column:l}=e,c=this._editor.getModel(),h=new P(a,l),u=c.findNextMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t);return i&&u&&u.range.isEmpty()&&u.range.getStartPosition().equals(h)&&(h=this._nextSearchPosition(h),u=c.findNextMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t)),u?!s&&!o.containsRange(u.range)?this._getNextMatch(u.range.getEndPosition(),t,i,!0):u:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?B1e(this._state.replaceString):rg.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let e=this._getReplacePattern(),t=this._editor.getSelection(),i=this._getNextMatch(t.getStartPosition(),!0,!1);if(i)if(t.equalsRange(i.range)){let s=e.buildReplaceString(i.matches,this._state.preserveCase),r=new En(t,s);this._executeEditorCommand("replace",r),this._decorations.setStartPosition(new P(t.startLineNumber,t.startColumn+s.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)}_findMatches(e,t,i){const s=(e||[null]).map(r=>Dm._getSearchRange(this._editor.getModel(),r));return this._editor.getModel().findMatches(this._state.searchString,s,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t,i)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=$l?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new Xc(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null).parseSearchRequest();if(!t)return;let i=t.regex;if(!i.multiline){let u="mu";i.ignoreCase&&(u+="i"),i.global&&(u+="g"),i=new RegExp(i.source,u)}const s=this._editor.getModel(),r=s.getValue(1),o=s.getFullModelRange(),a=this._getReplacePattern();let l;const c=this._state.preserveCase;a.hasReplacementPatterns||c?l=r.replace(i,function(){return a.buildReplaceString(arguments,c)}):l=r.replace(i,a.buildReplaceString(null,c));let h=new cz(o,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",h)}_regularReplaceAll(e){const t=this._getReplacePattern();let i=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),s=[];for(let o=0,a=i.length;o<a;o++)s[o]=t.buildReplaceString(i[o].matches,this._state.preserveCase);let r=new O1e(this._editor.getSelection(),i.map(o=>o.range),s);this._executeEditorCommand("replaceAll",r)}selectAllMatches(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes(),i=this._findMatches(e,!1,1073741824).map(r=>new Se(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn)),s=this._editor.getSelection();for(let r=0,o=i.length;r<o;r++)if(i[r].equalsRange(s)){i=[s].concat(i.slice(0,r)).concat(i.slice(r+1));break}this._editor.setSelections(i)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}const W1e={inputActiveOptionBorder:V.fromHex("#007ACC00"),inputActiveOptionForeground:V.fromHex("#FFFFFF"),inputActiveOptionBackground:V.fromHex("#0E639C50")};class Y0 extends Ys{constructor(e){super(),this._onChange=this._register(new R),this.onChange=this._onChange.event,this._onKeyDown=this._register(new R),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},W1e),e),this._checked=this._opts.isChecked;const t=["monaco-custom-checkbox"];this._opts.icon&&t.push(...Xn.asClassNameArray(this._opts.icon)),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,i=>{this.checked=!this._checked,this._onChange.fire(!1),i.preventDefault()}),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,i=>{if(i.keyCode===10||i.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),i.preventDefault();return}this._onKeyDown.fire(i)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 2+2+2+16}style(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),e.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=e.inputActiveOptionForeground),e.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=e.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"transparent",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"transparent")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}const z1e=m("caseDescription","Match Case"),H1e=m("wordsDescription","Match Whole Word"),$1e=m("regexDescription","Use Regular Expression");class BH extends Y0{constructor(e){super({icon:se.caseSensitive,title:z1e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class VH extends Y0{constructor(e){super({icon:se.wholeWord,title:H1e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class WH extends Y0{constructor(e){super({icon:se.regex,title:$1e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class hS extends Ys{constructor(e,t,i,s){super(),this._hideSoon=this._register(new Wt(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=i,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const r=s.getColorTheme().getColor(JE),o=s.getColorTheme().getColor(tI),a=s.getColorTheme().getColor(eI);this.caseSensitive=this._register(new BH({appendTitle:this._keybindingLabelFor(_t.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:r,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new VH({appendTitle:this._keybindingLabelFor(_t.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:r,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new WH({appendTitle:this._keybindingLabelFor(_t.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:r,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(l=>{let c=!1;l.isRegex&&(this.regex.checked=this._state.isRegex,c=!0),l.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,c=!0),l.matchCase&&(this.caseSensitive.checked=this._state.matchCase,c=!0),!this._state.isRevealed&&c&&this._revealTemporarily()})),this._register(AA(this._domNode,l=>this._onMouseOut())),this._register(K(this._domNode,"mouseover",l=>this._onMouseOver())),this._applyTheme(s.getColorTheme()),this._register(s.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return hS.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseOut(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){!this._isVisible||(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(JE),inputActiveOptionForeground:e.getColor(tI),inputActiveOptionBackground:e.getColor(eI)};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}}hS.ID="editor.contrib.findOptionsWidget";kt((n,e)=>{const t=n.getColor(yr);t&&e.addRule(`.monaco-editor .findOptionsWidget { background-color: ${t}; }`);const i=n.getColor(Xl);i&&e.addRule(`.monaco-editor .findOptionsWidget { color: ${i}; }`);const s=n.getColor(Gf);s&&e.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${s}; }`);const r=n.getColor(ni);r&&e.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${r}; }`)});function cv(n,e){return n===1?!0:n===2?!1:e}class U1e extends q{constructor(){super(),this._onFindReplaceStateChange=this._register(new R),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return cv(this._isRegexOverride,this._isRegex)}get wholeWord(){return cv(this._wholeWordOverride,this._wholeWord)}get matchCase(){return cv(this._matchCaseOverride,this._matchCase)}get preserveCase(){return cv(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(e,t,i){let s={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},r=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,s.matchesPosition=!0,r=!0),this._matchesCount!==t&&(this._matchesCount=t,s.matchesCount=!0,r=!0),typeof i!="undefined"&&(I.equalsRange(this._currentMatch,i)||(this._currentMatch=i,s.currentMatch=!0,r=!0)),r&&this._onFindReplaceStateChange.fire(s)}change(e,t,i=!0){var s;let r={moveCursor:t,updateHistory:i,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},o=!1;const a=this.isRegex,l=this.wholeWord,c=this.matchCase,h=this.preserveCase;typeof e.searchString!="undefined"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,r.searchString=!0,o=!0),typeof e.replaceString!="undefined"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,r.replaceString=!0,o=!0),typeof e.isRevealed!="undefined"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,r.isRevealed=!0,o=!0),typeof e.isReplaceRevealed!="undefined"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,r.isReplaceRevealed=!0,o=!0),typeof e.isRegex!="undefined"&&(this._isRegex=e.isRegex),typeof e.wholeWord!="undefined"&&(this._wholeWord=e.wholeWord),typeof e.matchCase!="undefined"&&(this._matchCase=e.matchCase),typeof e.preserveCase!="undefined"&&(this._preserveCase=e.preserveCase),typeof e.searchScope!="undefined"&&(!((s=e.searchScope)===null||s===void 0)&&s.every(u=>{var d;return(d=this._searchScope)===null||d===void 0?void 0:d.some(f=>!I.equalsRange(f,u))})||(this._searchScope=e.searchScope,r.searchScope=!0,o=!0)),typeof e.loop!="undefined"&&this._loop!==e.loop&&(this._loop=e.loop,r.loop=!0,o=!0),this._isRegexOverride=typeof e.isRegexOverride!="undefined"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride!="undefined"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride!="undefined"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride!="undefined"?e.preserveCaseOverride:0,a!==this.isRegex&&(o=!0,r.isRegex=!0),l!==this.wholeWord&&(o=!0,r.wholeWord=!0),c!==this.matchCase&&(o=!0,r.matchCase=!0),h!==this.preserveCase&&(o=!0,r.preserveCase=!0),o&&this._onFindReplaceStateChange.fire(r)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=$l}}const j1e=m("defaultLabel","input");class q1e extends Ys{constructor(e,t,i,s){super(),this._showOptionButtons=i,this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this._onDidOptionChange=this._register(new R),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new R),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new R),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new R),this._onKeyUp=this._register(new R),this._onCaseSensitiveKeyDown=this._register(new R),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new R),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.contextViewProvider=t,this.placeholder=s.placeholder||"",this.validation=s.validation,this.label=s.label||j1e,this.inputActiveOptionBorder=s.inputActiveOptionBorder,this.inputActiveOptionForeground=s.inputActiveOptionForeground,this.inputActiveOptionBackground=s.inputActiveOptionBackground,this.inputBackground=s.inputBackground,this.inputForeground=s.inputForeground,this.inputBorder=s.inputBorder,this.inputValidationInfoBorder=s.inputValidationInfoBorder,this.inputValidationInfoBackground=s.inputValidationInfoBackground,this.inputValidationInfoForeground=s.inputValidationInfoForeground,this.inputValidationWarningBorder=s.inputValidationWarningBorder,this.inputValidationWarningBackground=s.inputValidationWarningBackground,this.inputValidationWarningForeground=s.inputValidationWarningForeground,this.inputValidationErrorBorder=s.inputValidationErrorBorder,this.inputValidationErrorBackground=s.inputValidationErrorBackground,this.inputValidationErrorForeground=s.inputValidationErrorForeground;const r=s.appendCaseSensitiveLabel||"",o=s.appendWholeWordsLabel||"",a=s.appendRegexLabel||"",l=s.history||[],c=!!s.flexibleHeight,h=!!s.flexibleWidth,u=s.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new CH(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:l,showHistoryHint:s.showHistoryHint,flexibleHeight:c,flexibleWidth:h,flexibleMaxHeight:u})),this.regex=this._register(new WH({appendTitle:a,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.regex.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(g=>{this._onRegexKeyDown.fire(g)})),this.wholeWords=this._register(new VH({appendTitle:o,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.wholeWords.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new BH({appendTitle:r,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.caseSensitive.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(g=>{this._onCaseSensitiveKeyDown.fire(g)})),this._showOptionButtons&&(this.inputBox.paddingRight=this.caseSensitive.width()+this.wholeWords.width()+this.regex.width());let d=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,g=>{if(g.equals(15)||g.equals(17)||g.equals(9)){let p=d.indexOf(document.activeElement);if(p>=0){let _=-1;g.equals(17)?_=(p+1)%d.length:g.equals(15)&&(p===0?_=d.length-1:_=p-1),g.equals(9)?(d[p].blur(),this.inputBox.focus()):_>=0&&d[_].focus(),ot.stop(g,!0)}}});let f=document.createElement("div");f.className="controls",f.style.display=this._showOptionButtons?"block":"none",f.appendChild(this.caseSensitive.domNode),f.appendChild(this.wholeWords.domNode),f.appendChild(this.regex.domNode),this.domNode.appendChild(f),e&&e.appendChild(this.domNode),this._register(K(this.inputBox.inputElement,"compositionstart",g=>{this.imeSessionInProgress=!0})),this._register(K(this.inputBox.inputElement,"compositionend",g=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,g=>this._onKeyDown.fire(g)),this.onkeyup(this.inputBox.inputElement,g=>this._onKeyUp.fire(g)),this.oninput(this.inputBox.inputElement,g=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,g=>this._onMouseDown.fire(g))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.regex.style(e),this.wholeWords.style(e),this.caseSensitive.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive.checked}setCaseSensitive(e){this.caseSensitive.checked=e}getWholeWords(){return this.wholeWords.checked}setWholeWords(e){this.wholeWords.checked=e}getRegex(){return this.regex.checked}setRegex(e){this.regex.checked=e,this.validate()}focusOnCaseSensitive(){this.caseSensitive.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}clearMessage(){this.inputBox.hideMessage()}}const K1e=m("defaultLabel","input"),G1e=m("label.preserveCaseCheckbox","Preserve Case");class Y1e extends Y0{constructor(e){super({icon:se.preserveCase,title:G1e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Z1e extends Ys{constructor(e,t,i,s){super(),this._showOptionButtons=i,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new R),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new R),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new R),this._onInput=this._register(new R),this._onKeyUp=this._register(new R),this._onPreserveCaseKeyDown=this._register(new R),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=s.placeholder||"",this.validation=s.validation,this.label=s.label||K1e,this.inputActiveOptionBorder=s.inputActiveOptionBorder,this.inputActiveOptionForeground=s.inputActiveOptionForeground,this.inputActiveOptionBackground=s.inputActiveOptionBackground,this.inputBackground=s.inputBackground,this.inputForeground=s.inputForeground,this.inputBorder=s.inputBorder,this.inputValidationInfoBorder=s.inputValidationInfoBorder,this.inputValidationInfoBackground=s.inputValidationInfoBackground,this.inputValidationInfoForeground=s.inputValidationInfoForeground,this.inputValidationWarningBorder=s.inputValidationWarningBorder,this.inputValidationWarningBackground=s.inputValidationWarningBackground,this.inputValidationWarningForeground=s.inputValidationWarningForeground,this.inputValidationErrorBorder=s.inputValidationErrorBorder,this.inputValidationErrorBackground=s.inputValidationErrorBackground,this.inputValidationErrorForeground=s.inputValidationErrorForeground;const r=s.appendPreserveCaseLabel||"",o=s.history||[],a=!!s.flexibleHeight,l=!!s.flexibleWidth,c=s.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new CH(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:o,showHistoryHint:s.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c})),this.preserveCase=this._register(new Y1e({appendTitle:r,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.preserveCase.onChange(d=>{this._onDidOptionChange.fire(d),!d&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(d=>{this._onPreserveCaseKeyDown.fire(d)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let h=[this.preserveCase.domNode];this.onkeydown(this.domNode,d=>{if(d.equals(15)||d.equals(17)||d.equals(9)){let f=h.indexOf(document.activeElement);if(f>=0){let g=-1;d.equals(17)?g=(f+1)%h.length:d.equals(15)&&(f===0?g=h.length-1:g=f-1),d.equals(9)?(h[f].blur(),this.inputBox.focus()):g>=0&&h[g].focus(),ot.stop(d,!0)}}});let u=document.createElement("div");u.className="controls",u.style.display=this._showOptionButtons?"block":"none",u.appendChild(this.preserveCase.domNode),this.domNode.appendChild(u),e&&e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,d=>this._onKeyDown.fire(d)),this.onkeyup(this.inputBox.inputElement,d=>this._onKeyUp.fire(d)),this.oninput(this.inputBox.inputElement,d=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,d=>this._onMouseDown.fire(d))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.preserveCase.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox&&this.inputBox.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.inputBox.width=e,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}class rr{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,t=0,i=this.value.charCodeAt(e),s;if(s=rr._table[i],typeof s=="number")return this.pos+=1,{type:s,pos:e,len:1};if(rr.isDigitCharacter(i)){s=8;do t+=1,i=this.value.charCodeAt(e+t);while(rr.isDigitCharacter(i));return this.pos+=t,{type:s,pos:e,len:t}}if(rr.isVariableCharacter(i)){s=9;do i=this.value.charCodeAt(e+ ++t);while(rr.isVariableCharacter(i)||rr.isDigitCharacter(i));return this.pos+=t,{type:s,pos:e,len:t}}s=10;do t+=1,i=this.value.charCodeAt(e+t);while(!isNaN(i)&&typeof rr._table[i]=="undefined"&&!rr.isDigitCharacter(i)&&!rr.isVariableCharacter(i));return this.pos+=t,{type:s,pos:e,len:t}}}rr._table={[36]:0,[58]:1,[44]:2,[123]:3,[125]:4,[92]:5,[47]:6,[124]:7,[43]:11,[45]:12,[63]:13};class zg{constructor(){this._children=[]}appendChild(e){return e instanceof Zn&&this._children[this._children.length-1]instanceof Zn?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:i}=e,s=i.children.indexOf(e),r=i.children.slice(0);r.splice(s,1,...t),i._children=r,function o(a,l){for(const c of a)c.parent=l,o(c.children,c)}(t,i)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof uS)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}class Zn extends zg{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new Zn(this.value)}}class zH extends zg{}class mr extends zH{constructor(e){super(),this.index=e}static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Z0?this._children[0]:void 0}clone(){let e=new mr(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}class Z0 extends zg{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof Zn&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let e=new Z0;return this.options.forEach(e.appendChild,e),e}}class TM extends zg{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let i=!1,s=e.replace(this.regexp,function(){return i=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(r=>r instanceof Fr&&Boolean(r.elseValue))&&(s=this._replace([])),s}_replace(e){let t="";for(const i of this._children)if(i instanceof Fr){let s=e[i.index]||"";s=i.resolve(s),t+=s}else t+=i.toString();return t}toString(){return""}clone(){let e=new TM;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}class Fr extends zg{constructor(e,t,i,s){super(),this.index=e,this.shorthandName=t,this.ifValue=i,this.elseValue=s}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":Boolean(e)&&typeof this.ifValue=="string"?this.ifValue:!Boolean(e)&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((i,s)=>s===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):e}clone(){return new Fr(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class q_ extends zH{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new Zn(t)],!0):!1}clone(){const e=new q_(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}function G3(n,e){const t=[...n];for(;t.length>0;){const i=t.shift();if(!e(i))break;t.unshift(...i.children)}}class uS extends zg{get placeholderInfo(){if(!this._placeholders){let e=[],t;this.walk(function(i){return i instanceof mr&&(e.push(i),t=!t||t.index<i.index?i:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,i=!1;return this.walk(s=>s===e?(i=!0,!1):(t+=s.len(),!0)),i?t:-1}fullLen(e){let t=0;return G3([e],i=>(t+=i.len(),!0)),t}enclosingPlaceholders(e){let t=[],{parent:i}=e;for(;i;)i instanceof mr&&t.push(i),i=i.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof q_&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){let e=new uS;return this._children=this.children.map(t=>t.clone()),e}walk(e){G3(this.children,e)}}class dS{constructor(){this._scanner=new rr,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,i){this._scanner.text(e),this._token=this._scanner.next();const s=new uS;for(;this._parse(s););const r=new Map,o=[];let a=0;s.walk(l=>(l instanceof mr&&(a+=1,l.isFinalTabstop?r.set(0,void 0):!r.has(l.index)&&l.children.length>0?r.set(l.index,l.children):o.push(l)),!0));for(const l of o){const c=r.get(l.index);if(c){const h=new mr(l.index);h.transform=l.transform;for(const u of c)h.appendChild(u.clone());s.replace(l,[h])}}return i||(i=a>0&&t),!r.has(0)&&i&&s.appendChild(new mr(0)),s}_accept(e,t){if(e===void 0||this._token.type===e){let i=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),i}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const s=this._scanner.next();if(s.type!==0&&s.type!==4&&s.type!==5)return!1}this._token=this._scanner.next()}const i=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),i}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new Zn(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const i=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new mr(Number(t)):new q_(t)),!0):this._backTo(i)}_parseComplexPlaceholder(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(i);const r=new mr(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new Zn("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else if(r.index>0&&this._accept(7)){const o=new Z0;for(;;){if(this._parseChoiceElement(o)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(o),this._accept(4)))return e.appendChild(r),!0}return this._backTo(i),!1}}else return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(i)}_parseChoiceElement(e){const t=this._token,i=[];for(;!(this._token.type===2||this._token.type===7);){let s;if((s=this._accept(5,!0))?s=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||s:s=this._accept(void 0,!0),!s)return this._backTo(t),!1;i.push(s)}return i.length===0?(this._backTo(t),!1):(e.appendChild(new Zn(i.join(""))),!0)}_parseComplexVariable(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(i);const r=new q_(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new Zn("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(i)}_parseTransform(e){let t=new TM,i="",s="";for(;!this._accept(6);){let r;if(r=this._accept(5,!0)){r=this._accept(6,!0)||r,i+=r;continue}if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let r;if(r=this._accept(5,!0)){r=this._accept(5,!0)||this._accept(6,!0)||r,t.appendChild(new Zn(r));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){s+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(i,s)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let i=!1;this._accept(3)&&(i=!0);let s=this._accept(8,!0);if(s)if(i){if(this._accept(4))return e.appendChild(new Fr(Number(s))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new Fr(Number(s))),!0;else return this._backTo(t),!1;if(this._accept(6)){let r=this._accept(9,!0);return!r||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new Fr(Number(s),r)),!0)}else if(this._accept(11)){let r=this._until(4);if(r)return e.appendChild(new Fr(Number(s),void 0,r,void 0)),!0}else if(this._accept(12)){let r=this._until(4);if(r)return e.appendChild(new Fr(Number(s),void 0,void 0,r)),!0}else if(this._accept(13)){let r=this._until(1);if(r){let o=this._until(4);if(o)return e.appendChild(new Fr(Number(s),void 0,r,o)),!0}}else{let r=this._until(4);if(r)return e.appendChild(new Fr(Number(s),void 0,void 0,r)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Zn(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}var Lm=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const Oe={Visible:new he("suggestWidgetVisible",!1,m("suggestWidgetVisible","Whether suggestion are visible")),DetailsVisible:new he("suggestWidgetDetailsVisible",!1,m("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new he("suggestWidgetMultipleSuggestions",!1,m("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new he("suggestionMakesTextEdit",!0,m("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new he("acceptSuggestionOnEnter",!0,m("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new he("suggestionHasInsertAndReplaceRange",!1,m("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new he("suggestionInsertMode",void 0,{type:"string",description:m("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new he("suggestionCanResolve",!1,m("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},Cc=new De("suggestWidgetStatusBar");class X1e{constructor(e,t,i,s){this.position=e,this.completion=t,this.container=i,this.provider=s,this.isInvalid=!1,this.score=Jr.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:t.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),I.isIRange(t.range)?(this.editStart=new P(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new P(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new P(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||I.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new P(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new P(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new P(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||I.spansMultipleLines(t.range.insert)||I.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof s.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(e){return Lm(this,void 0,void 0,function*(){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._isResolved=!1});this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(i=>{Object.assign(this.completion,i),this._isResolved=!0,t.dispose()},i=>{Rc(i)&&(this._resolveCache=void 0,this._isResolved=!1)})}return this._resolveCache})}}class sy{constructor(e=2,t=new Set,i=new Set,s=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=i,this.showDeprecated=s}}sy.default=new sy;let Q1e;function J1e(){return Q1e}class eSe{constructor(e,t,i,s){this.items=e,this.needsClipboard=t,this.durations=i,this.disposable=s}}function HH(n,e,t=sy.default,i={triggerKind:0},s=Lt.None){return Lm(this,void 0,void 0,function*(){const r=new rl(!0);e=e.clone();const o=n.getWordAtPosition(e),a=o?new I(e.lineNumber,o.startColumn,e.lineNumber,o.endColumn):I.fromPositions(e),l={replace:a,insert:a.setEndPosition(e.lineNumber,e.column)},c=[],h=new ee,u=[];let d=!1;const f=(p,_,v)=>{var b,w,C;if(!!_){for(let y of _.suggestions)if(!t.kindFilter.has(y.kind)){if(!t.showDeprecated&&((b=y==null?void 0:y.tags)===null||b===void 0?void 0:b.includes(1)))continue;y.range||(y.range=l),y.sortText||(y.sortText=typeof y.label=="string"?y.label:y.label.label),!d&&y.insertTextRules&&y.insertTextRules&4&&(d=dS.guessNeedsClipboard(y.insertText)),c.push(new X1e(e,y,_,p))}x9(_)&&h.add(_),u.push({providerName:(w=p._debugDisplayName)!==null&&w!==void 0?w:"unkown_provider",elapsedProvider:(C=_.duration)!==null&&C!==void 0?C:-1,elapsedOverall:v.elapsed()})}},g=(()=>Lm(this,void 0,void 0,function*(){}))();for(let p of Hr.orderedGroups(n)){let _=c.length;if(yield Promise.all(p.map(v=>Lm(this,void 0,void 0,function*(){if(!(t.providerFilter.size>0&&!t.providerFilter.has(v)))try{const b=new rl(!0),w=yield v.provideCompletionItems(n,e,i,s);f(v,w,b)}catch(b){kr(b)}}))),_!==c.length||s.isCancellationRequested)break}return yield g,s.isCancellationRequested?(h.dispose(),Promise.reject(xg())):new eSe(c.sort($H(t.snippetSortOrder)),d,{entries:u,elapsed:r.elapsed()},h)})}function NM(n,e){if(n.sortTextLow&&e.sortTextLow){if(n.sortTextLow<e.sortTextLow)return-1;if(n.sortTextLow>e.sortTextLow)return 1}return n.completion.label<e.completion.label?-1:n.completion.label>e.completion.label?1:n.completion.kind-e.completion.kind}function tSe(n,e){if(n.completion.kind!==e.completion.kind){if(n.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return NM(n,e)}function iSe(n,e){if(n.completion.kind!==e.completion.kind){if(n.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return NM(n,e)}const fS=new Map;fS.set(0,tSe);fS.set(2,iSe);fS.set(1,NM);function $H(n){return fS.get(n)}lt.registerCommand("_executeCompletionItemProvider",(n,...e)=>Lm(void 0,void 0,void 0,function*(){const[t,i,s,r]=e;ti(xe.isUri(t)),ti(P.isIPosition(i)),ti(typeof s=="string"||!s),ti(typeof r=="number"||!r);const o=yield n.get(oa).createModelReference(t);try{const a={incomplete:!1,suggestions:[]},l=[],c=yield HH(o.object.textEditorModel,P.lift(i),void 0,{triggerCharacter:s,triggerKind:s?1:0});for(const h of c.items)l.length<(r!=null?r:0)&&l.push(h.resolve(Lt.None)),a.incomplete=a.incomplete||h.container.incomplete,a.suggestions.push(h.completion);try{return yield Promise.all(l),a}finally{setTimeout(()=>c.disposable.dispose(),100)}}finally{o.dispose()}}));const tT=new class{constructor(){this.onlyOnceSuggestions=[]}provideCompletionItems(){let e={suggestions:this.onlyOnceSuggestions.slice(0)};return this.onlyOnceSuggestions.length=0,e}};Hr.register("*",tT);function nSe(n,e){setTimeout(()=>{tT.onlyOnceSuggestions.push(...e),n.getContribution("editor.contrib.suggestController").triggerSuggest(new Set().add(tT))},0)}var UH=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},jH=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};const K_="historyNavigationWidget",qH="historyNavigationForwardsEnabled",KH="historyNavigationBackwardsEnabled";function sSe(n,e,t){new he(t,e).bindTo(n)}function rSe(n,e){return n.createScoped(e.target)}function GH(n,e){return n.getContext(document.activeElement).getValue(e)}function YH(n,e){const t=rSe(n,e);sSe(t,e,K_);const i=new he(qH,!0).bindTo(t),s=new he(KH,!0).bindTo(t);return{scopedContextKeyService:t,historyNavigationForwardsEnablement:i,historyNavigationBackwardsEnablement:s}}let iT=class extends q1e{constructor(e,t,i,s,r=!1){super(e,t,r,i),this._register(YH(s,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};iT=UH([jH(3,Le)],iT);let nT=class extends Z1e{constructor(e,t,i,s,r=!1){super(e,t,r,i),this._register(YH(s,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};nT=UH([jH(3,Le)],nT);yn.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:le.and(le.has(K_),le.equals(KH,!0),Oe.Visible.isEqualTo(!1)),primary:16,secondary:[528],handler:n=>{const e=GH(n.get(Le),K_);e&&e.historyNavigator.showPreviousValue()}});yn.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:le.and(le.has(K_),le.equals(qH,!0),Oe.Visible.isEqualTo(!1)),primary:18,secondary:[530],handler:n=>{const e=GH(n.get(Le),K_);e&&e.historyNavigator.showNextValue()}});function Y3(n){var e,t;return((e=n.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=n.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}var oSe=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const aSe=un("find-selection",se.selection,m("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),Z3=un("find-collapsed",se.chevronRight,m("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),X3=un("find-expanded",se.chevronDown,m("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),lSe=un("find-replace",se.replace,m("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),cSe=un("find-replace-all",se.replaceAll,m("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),hSe=un("find-previous-match",se.arrowUp,m("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),uSe=un("find-next-match",se.arrowDown,m("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),dSe=m("label.find","Find"),fSe=m("placeholder.find","Find"),gSe=m("label.previousMatchButton","Previous Match"),pSe=m("label.nextMatchButton","Next Match"),mSe=m("label.toggleSelectionFind","Find in Selection"),_Se=m("label.closeButton","Close"),bSe=m("label.replace","Replace"),vSe=m("placeholder.replace","Replace"),wSe=m("label.replaceButton","Replace"),CSe=m("label.replaceAllButton","Replace All"),ySe=m("label.toggleReplaceButton","Toggle Replace"),SSe=m("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",$l),xSe=m("label.matchesLocation","{0} of {1}"),Q3=m("label.noResults","No results"),xo=419,DSe=275,LSe=DSe-54;let Cp=69;const kSe=33,J3="ctrlEnterReplaceAll.windows.donotask",e5=je?256:2048;class zD{constructor(e){this.afterLineNumber=e,this.heightInPx=kSe,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function t5(n,e,t){const i=!!e.match(/\n/);if(t&&i&&t.selectionStart>0){n.stopPropagation();return}}function i5(n,e,t){const i=!!e.match(/\n/);if(t&&i&&t.selectionEnd<t.value.length){n.stopPropagation();return}}class gS extends Ys{constructor(e,t,i,s,r,o,a,l,c){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=i,this._contextViewProvider=s,this._keybindingService=r,this._contextKeyService=o,this._storageService=l,this._notificationService=c,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(J3,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new Dg(500),this._register(Ze(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(h=>this._onStateChanged(h))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(h=>{if(h.hasChanged(80)&&(this._codeEditor.getOption(80)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),h.hasChanged(129)&&this._tryUpdateWidgetWidth(),h.hasChanged(2)&&this.updateAccessibilitySupport(),h.hasChanged(35)){const u=this._codeEditor.getOption(35).addExtraSpaceOnTop;u&&!this._viewZone&&(this._viewZone=new zD(0),this._showViewZone()),!u&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>oSe(this,void 0,void 0,function*(){if(this._isVisible){let h=yield this._controller.getGlobalBufferTerm();h&&h!==this._state.searchString&&(this._state.change({searchString:h},!1),this._findInput.select())}}))),this._findInputFocused=cS.bindTo(o),this._findFocusTracker=this._register(Pf(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=IM.bindTo(o),this._replaceFocusTracker=this._register(Pf(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(35).addExtraSpaceOnTop&&(this._viewZone=new zD(0)),this._applyTheme(a.getColorTheme()),this._register(a.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel(()=>{!this._isVisible||(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(h=>{if(h.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return gS.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(80)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=sr(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){let t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Ie)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=Cp+"px",this._state.matchesCount>=$l?this._matchesCount.title=SSe:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=$l&&(t+="+");let i=String(this._state.matchesPosition);i==="0"&&(i="?"),e=cr(xSe,i,t)}else e=Q3;this._matchesCount.appendChild(document.createTextNode(e)),Pu(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),Cp=Math.max(Cp,this._matchesCount.clientWidth)}_getAriaLabel(e,t,i){if(e===Q3)return i===""?m("ariaSearchNoResultEmpty","{0} found",e):m("ariaSearchNoResult","{0} found for '{1}'",e,i);if(t){const s=m("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,i,t.startLineNumber+":"+t.startColumn),r=this._codeEditor.getModel();return r&&t.startLineNumber<=r.getLineCount()&&t.startLineNumber>=1?`${r.getLineContent(t.startLineNumber)}, ${s}`:s}return m("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,i)}_updateToggleSelectionFindButton(){let e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,i=this._toggleSelectionFind.checked;this._isVisible&&(i||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let i=!this._codeEditor.getOption(80);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(35).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":const i=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=i;break}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(35).seedSearchStringFromSelection&&e){const i=this._codeEditor.getDomNode();if(i){const s=Gi(i),r=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),o=s.left+(r?r.left:0),a=r?r.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const l=$9(this._domNode).left;o>l&&(t=!1);const c=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());s.left+(c?c.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(35).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const i=this._viewZone;this._viewZoneId!==void 0||!i||this._codeEditor.changeViewZones(s=>{i.heightInPx=this._getHeight(),this._viewZoneId=s.addZone(i),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+i.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(35).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new zD(0));const i=this._viewZone;this._codeEditor.changeViewZones(s=>{if(this._viewZoneId!==void 0){const r=this._getHeight();if(r===i.heightInPx)return;let o=r-i.heightInPx;i.heightInPx=r,s.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o);return}else{let r=this._getHeight();if(r-=this._codeEditor.getOption(74).top,r<=0)return;i.heightInPx=r,this._viewZoneId=s.addZone(i),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+r)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(JE),inputActiveOptionBackground:e.getColor(eI),inputActiveOptionForeground:e.getColor(tI),inputBackground:e.getColor(AW),inputForeground:e.getColor(MW),inputBorder:e.getColor(RW),inputValidationInfoBackground:e.getColor(E2),inputValidationInfoForeground:e.getColor(I2),inputValidationInfoBorder:e.getColor(T2),inputValidationWarningBackground:e.getColor(OW),inputValidationWarningForeground:e.getColor(FW),inputValidationWarningBorder:e.getColor(PW),inputValidationErrorBackground:e.getColor(BW),inputValidationErrorForeground:e.getColor(VW),inputValidationErrorBorder:e.getColor(WW)};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}_tryUpdateWidgetWidth(){if(!this._isVisible||!TA(this._domNode))return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const i=e.width,s=e.minimap.minimapWidth;let r=!1,o=!1,a=!1;if(this._resized&&sr(this._domNode)>xo){this._domNode.style.maxWidth=`${i-28-s-15}px`,this._replaceInput.width=sr(this._findInput.domNode);return}if(xo+28+s>=i&&(o=!0),xo+28+s-Cp>=i&&(a=!0),xo+28+s-Cp>=i+50&&(r=!0),this._domNode.classList.toggle("collapsed-find-widget",r),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",o),!a&&!r&&(this._domNode.style.maxWidth=`${i-28-s-15}px`),this._resized){this._findInput.inputBox.layout();let l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=sr(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(!!this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const i=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!I.equalsRange(t,i)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(e5|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return t5(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return i5(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(e5|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{Zi&&ef&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(m("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(J3,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return t5(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return i5(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new iT(null,this._contextViewProvider,{width:LSe,label:dSe,placeholder:fSe,appendCaseSensitiveLabel:this._keybindingLabelFor(_t.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(_t.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(_t.ToggleRegexCommand),validation:l=>{if(l.length===0||!this._findInput.getRegex())return null;try{return new RegExp(l,"gu"),null}catch(c){return{content:c.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>Y3(this._keybindingService)},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(l=>this._onFindInputKeyDown(l))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(l=>{l.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),l.preventDefault())})),this._register(this._findInput.onRegexKeyDown(l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),l.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(l=>{this._tryUpdateHeight()&&this._showViewZone()})),Fn&&this._register(this._findInput.onMouseDown(l=>this._onFindInputMouseDown(l))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new vd({label:gSe+this._keybindingLabelFor(_t.PreviousMatchFindAction),icon:hSe,onTrigger:()=>{this._codeEditor.getAction(_t.PreviousMatchFindAction).run().then(void 0,Ie)}})),this._nextBtn=this._register(new vd({label:pSe+this._keybindingLabelFor(_t.NextMatchFindAction),icon:uSe,onTrigger:()=>{this._codeEditor.getAction(_t.NextMatchFindAction).run().then(void 0,Ie)}}));let i=document.createElement("div");i.className="find-part",i.appendChild(this._findInput.domNode);const s=document.createElement("div");s.className="find-actions",i.appendChild(s),s.appendChild(this._matchesCount),s.appendChild(this._prevBtn.domNode),s.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new Y0({icon:aSe,title:mSe+this._keybindingLabelFor(_t.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let l=this._codeEditor.getSelections();l.map(c=>(c.endColumn===1&&c.endLineNumber>c.startLineNumber&&(c=c.setEndPosition(c.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(c.endLineNumber-1))),c.isEmpty()?null:c)).filter(c=>!!c),l.length&&this._state.change({searchScope:l},!0)}}else this._state.change({searchScope:null},!0)})),s.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new vd({label:_Se+this._keybindingLabelFor(_t.CloseFindWidgetCommand),icon:p0e,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),l.preventDefault())}})),s.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new nT(null,void 0,{label:bSe,placeholder:vSe,appendPreserveCaseLabel:this._keybindingLabelFor(_t.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>Y3(this._keybindingService)},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(l=>this._onReplaceInputKeyDown(l))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(l=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(l=>{l.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),l.preventDefault())})),this._replaceBtn=this._register(new vd({label:wSe+this._keybindingLabelFor(_t.ReplaceOneAction),icon:lSe,onTrigger:()=>{this._controller.replace()},onKeyDown:l=>{l.equals(1026)&&(this._closeBtn.focus(),l.preventDefault())}})),this._replaceAllBtn=this._register(new vd({label:CSe+this._keybindingLabelFor(_t.ReplaceAllAction),icon:cSe,onTrigger:()=>{this._controller.replaceAll()}}));let r=document.createElement("div");r.className="replace-part",r.appendChild(this._replaceInput.domNode);const o=document.createElement("div");o.className="replace-actions",r.appendChild(o),o.appendChild(this._replaceBtn.domNode),o.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new vd({label:ySe,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=sr(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=`${xo}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(i),this._domNode.appendChild(r),this._resizeSash=new Ki(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let a=xo;this._register(this._resizeSash.onDidStart(()=>{a=sr(this._domNode)})),this._register(this._resizeSash.onDidChange(l=>{this._resized=!0;let c=a+l.startX-l.currentX;if(c<xo)return;const h=parseFloat(RA(this._domNode).maxWidth)||0;c>h||(this._domNode.style.width=`${c}px`,this._isReplaceVisible&&(this._replaceInput.width=sr(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const l=sr(this._domNode);if(l<xo)return;let c=xo;if(!this._resized||l===xo){const h=this._codeEditor.getLayoutInfo();c=h.width-28-h.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${c}px`,this._isReplaceVisible&&(this._replaceInput.width=sr(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}}gS.ID="editor.contrib.findWidget";class vd extends Ys{constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+Rt.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,i=>{this._opts.onTrigger(),i.preventDefault()}),this.onkeydown(this._domNode,i=>{if(i.equals(10)||i.equals(3)){this._opts.onTrigger(),i.preventDefault();return}this._opts.onKeyDown&&this._opts.onKeyDown(i)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...Rt.asClassNameArray(Z3)),this._domNode.classList.add(...Rt.asClassNameArray(X3))):(this._domNode.classList.remove(...Rt.asClassNameArray(X3)),this._domNode.classList.add(...Rt.asClassNameArray(Z3)))}}kt((n,e)=>{const t=(g,p)=>{p&&e.addRule(`.monaco-editor ${g} { background-color: ${p}; }`)};t(".findMatch",n.getColor(nI)),t(".currentFindMatch",n.getColor(Pfe)),t(".findScope",n.getColor(Bfe));const i=n.getColor(yr);t(".find-widget",i);const s=n.getColor(Gf);s&&e.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${s}; }`);const r=n.getColor(Wfe);r&&e.addRule(`.monaco-editor .findMatch { border: 1px ${n.type==="hc"?"dotted":"solid"} ${r}; box-sizing: border-box; }`);const o=n.getColor(Vfe);o&&e.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${o}; padding: 1px; box-sizing: border-box; }`);const a=n.getColor(zfe);a&&e.addRule(`.monaco-editor .findScope { border: 1px ${n.type==="hc"?"dashed":"solid"} ${a}; }`);const l=n.getColor(ni);l&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${l}; }`);const c=n.getColor(Xl);c&&e.addRule(`.monaco-editor .find-widget { color: ${c}; }`);const h=n.getColor(bfe);h&&e.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${h}; }`);const u=n.getColor(kfe);if(u)e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${u}; }`);else{const g=n.getColor(Wh);g&&e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${g}; }`)}const d=n.getColor(yge);d&&e.addRule(`
		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: ${d} !important;
		}
	`);const f=n.getColor(mc);f&&e.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${f}; }`)});var ZH=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},No=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},og=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const ESe=524288;function sT(n,e="single",t=!1){if(!n.hasModel())return null;const i=n.getSelection();if(e==="single"&&i.startLineNumber===i.endLineNumber||e==="multiple"){if(i.isEmpty()){const s=n.getConfiguredWordAtPosition(i.getStartPosition());if(s&&t===!1)return s.word}else if(n.getModel().getValueLengthInRange(i)<ESe)return n.getModel().getValueInRange(i)}return null}let Ds=class XH extends q{constructor(e,t,i,s){super(),this._editor=e,this._findWidgetVisible=Ku.bindTo(t),this._contextKeyService=t,this._storageService=i,this._clipboardService=s,this._updateHistoryDelayer=new Dg(500),this._state=this._register(new U1e),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(r=>this._onStateChanged(r))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{let r=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),r&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(35).loop})}))}get editor(){return this._editor}static get(e){return e.getContribution(XH.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!cS.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=so(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e){return og(this,void 0,void 0,function*(){if(this.disposeModel(),!this._editor.hasModel())return;let t={isRevealed:!0};if(e.seedSearchStringFromSelection==="single"){let i=sT(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);i&&(this._state.isRegex?t.searchString=so(i):t.searchString=i)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){let i=sT(this._editor,e.seedSearchStringFromSelection);i&&(t.searchString=i)}if(!t.searchString&&e.seedSearchStringFromGlobalClipboard){let i=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;i&&(t.searchString=i)}if(e.forceRevealReplace?t.isReplaceRevealed=!0:this._findWidgetVisible.get()||(t.isReplaceRevealed=!1),e.updateSearchScope){let i=this._editor.getSelections();i.some(s=>!s.isEmpty())&&(t.searchScope=i)}t.loop=e.loop,this._state.change(t,!1),this._model||(this._model=new Dm(this._editor,this._state))})}start(e){return this._start(e)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}getGlobalBufferTerm(){return og(this,void 0,void 0,function*(){return this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""})}setGlobalBufferTerm(e){this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};Ds.ID="editor.contrib.findController";Ds=ZH([No(1,Le),No(2,qu),No(3,Hu)],Ds);let rT=class extends Ds{constructor(e,t,i,s,r,o,a,l){super(e,i,a,l),this._contextViewService=t,this._keybindingService=s,this._themeService=r,this._notificationService=o,this._widget=null,this._findOptionsWidget=null}_start(e){const t=Object.create(null,{_start:{get:()=>super._start}});return og(this,void 0,void 0,function*(){this._widget||this._createFindWidget();const i=this._editor.getSelection();let s=!1;switch(this._editor.getOption(35).autoFindInSelection){case"always":s=!0;break;case"never":s=!1;break;case"multiline":s=!!i&&i.startLineNumber!==i.endLineNumber;break}e.updateSearchScope=s,yield t._start.call(this,e),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())})}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new gS(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new hS(this._editor,this._state,this._keybindingService,this._themeService))}};rT=ZH([No(1,Wu),No(2,Le),No(3,ri),No(4,At),No(5,en),No(6,qu),No(7,Hu)],rT);const ISe=dW(new uW({id:_t.StartFindAction,label:m("startFindAction","Find"),alias:"Find",precondition:le.or(B.focus,le.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:De.MenubarEditMenu,group:"3_find",title:m({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));ISe.addImplementation(0,(n,e,t)=>{const i=Ds.get(e);return i?i.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop}):!1});class TSe extends zt{constructor(){super({id:_t.StartFindWithSelection,label:m("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return og(this,void 0,void 0,function*(){let i=Ds.get(t);i&&(yield i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),i.setGlobalBufferTerm(i.getState().searchString))})}}class QH extends zt{run(e,t){return og(this,void 0,void 0,function*(){let i=Ds.get(t);i&&!this._run(i)&&(yield i.start({forceRevealReplace:!1,seedSearchStringFromSelection:i.getState().searchString.length===0&&t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(i))})}}class NSe extends QH{constructor(){super({id:_t.NextMatchFindAction,label:m("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:B.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:le.and(B.focus,cS),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}class ASe extends QH{constructor(){super({id:_t.PreviousMatchFindAction,label:m("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:B.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:le.and(B.focus,cS),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class JH extends zt{run(e,t){return og(this,void 0,void 0,function*(){let i=Ds.get(t);if(!i)return;const s=t.getOption(35).seedSearchStringFromSelection==="selection";let r=null;t.getOption(35).seedSearchStringFromSelection!=="never"&&(r=sT(t,"single",s)),r&&i.setSearchString(r),this._run(i)||(yield i.start({forceRevealReplace:!1,seedSearchStringFromSelection:t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:s,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(i))})}}class MSe extends JH{constructor(){super({id:_t.NextSelectionMatchFindAction,label:m("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class RSe extends JH{constructor(){super({id:_t.PreviousSelectionMatchFindAction,label:m("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const OSe=dW(new uW({id:_t.StartFindReplaceAction,label:m("startReplace","Replace"),alias:"Replace",precondition:le.or(B.focus,le.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:De.MenubarEditMenu,group:"3_find",title:m({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));OSe.addImplementation(0,(n,e,t)=>{if(!e.hasModel()||e.getOption(80))return!1;const i=Ds.get(e);if(!i)return!1;const s=e.getSelection(),r=i.isFindInputFocused(),o=!s.isEmpty()&&s.startLineNumber===s.endLineNumber&&e.getOption(35).seedSearchStringFromSelection!=="never"&&!r,a=r||o?2:1;return i.start({forceRevealReplace:!0,seedSearchStringFromSelection:o?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop})});$n(Ds.ID,rT);ze(TSe);ze(NSe);ze(ASe);ze(MSe);ze(RSe);const _o=Ks.bindToContribution(Ds.get);ne(new _o({id:_t.CloseFindWidgetCommand,precondition:Ku,handler:n=>n.closeFindWidget(),kbOpts:{weight:100+5,kbExpr:le.and(B.focus,le.not("isComposing")),primary:9,secondary:[1033]}}));ne(new _o({id:_t.ToggleCaseSensitiveCommand,precondition:void 0,handler:n=>n.toggleCaseSensitive(),kbOpts:{weight:100+5,kbExpr:B.focus,primary:sv.primary,mac:sv.mac,win:sv.win,linux:sv.linux}}));ne(new _o({id:_t.ToggleWholeWordCommand,precondition:void 0,handler:n=>n.toggleWholeWords(),kbOpts:{weight:100+5,kbExpr:B.focus,primary:rv.primary,mac:rv.mac,win:rv.win,linux:rv.linux}}));ne(new _o({id:_t.ToggleRegexCommand,precondition:void 0,handler:n=>n.toggleRegex(),kbOpts:{weight:100+5,kbExpr:B.focus,primary:ov.primary,mac:ov.mac,win:ov.win,linux:ov.linux}}));ne(new _o({id:_t.ToggleSearchScopeCommand,precondition:void 0,handler:n=>n.toggleSearchScope(),kbOpts:{weight:100+5,kbExpr:B.focus,primary:av.primary,mac:av.mac,win:av.win,linux:av.linux}}));ne(new _o({id:_t.TogglePreserveCaseCommand,precondition:void 0,handler:n=>n.togglePreserveCase(),kbOpts:{weight:100+5,kbExpr:B.focus,primary:lv.primary,mac:lv.mac,win:lv.win,linux:lv.linux}}));ne(new _o({id:_t.ReplaceOneAction,precondition:Ku,handler:n=>n.replace(),kbOpts:{weight:100+5,kbExpr:B.focus,primary:3094}}));ne(new _o({id:_t.ReplaceOneAction,precondition:Ku,handler:n=>n.replace(),kbOpts:{weight:100+5,kbExpr:le.and(B.focus,IM),primary:3}}));ne(new _o({id:_t.ReplaceAllAction,precondition:Ku,handler:n=>n.replaceAll(),kbOpts:{weight:100+5,kbExpr:B.focus,primary:2563}}));ne(new _o({id:_t.ReplaceAllAction,precondition:Ku,handler:n=>n.replaceAll(),kbOpts:{weight:100+5,kbExpr:le.and(B.focus,IM),primary:void 0,mac:{primary:2051}}}));ne(new _o({id:_t.SelectAllMatchesAction,precondition:Ku,handler:n=>n.selectAllMatches(),kbOpts:{weight:100+5,kbExpr:B.focus,primary:515}}));function Hg(n,e){const t=e.filter(i=>!n.find(s=>s.equals(i)));if(t.length>=1){const i=t.map(r=>`line ${r.viewState.position.lineNumber} column ${r.viewState.position.column}`).join(", "),s=t.length===1?m("cursorAdded","Cursor added: {0}",i):m("cursorsAdded","Cursors added: {0}",i);mC(s)}}class FSe extends zt{constructor(){super({id:"editor.action.insertCursorAbove",label:m("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:De.MenubarSelectionMenu,group:"3_multi",title:m({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,i){if(!t.hasModel())return;let s=!0;i&&i.logicalLine===!1&&(s=!1);const r=t._getViewModel();if(r.cursorConfig.readOnly)return;r.pushStackElement();const o=r.getCursorStates();r.setCursorStates(i.source,3,Ii.addCursorUp(r,o,s)),r.revealTopMostCursor(i.source),Hg(o,r.getCursorStates())}}class PSe extends zt{constructor(){super({id:"editor.action.insertCursorBelow",label:m("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:De.MenubarSelectionMenu,group:"3_multi",title:m({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,i){if(!t.hasModel())return;let s=!0;i&&i.logicalLine===!1&&(s=!1);const r=t._getViewModel();if(r.cursorConfig.readOnly)return;r.pushStackElement();const o=r.getCursorStates();r.setCursorStates(i.source,3,Ii.addCursorDown(r,o,s)),r.revealBottomMostCursor(i.source),Hg(o,r.getCursorStates())}}class BSe extends zt{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:m("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:De.MenubarSelectionMenu,group:"3_multi",title:m({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,i){if(!e.isEmpty()){for(let s=e.startLineNumber;s<e.endLineNumber;s++){let r=t.getLineMaxColumn(s);i.push(new Se(s,r,s,r))}e.endColumn>1&&i.push(new Se(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const i=t.getModel(),s=t.getSelections(),r=t._getViewModel(),o=r.getCursorStates();let a=[];s.forEach(l=>this.getCursorsForSelection(l,i,a)),a.length>0&&t.setSelections(a),Hg(o,r.getCursorStates())}}class VSe extends zt{constructor(){super({id:"editor.action.addCursorsToBottom",label:m("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),s=t.getModel().getLineCount();let r=[];for(let l=i[0].startLineNumber;l<=s;l++)r.push(new Se(l,i[0].startColumn,l,i[0].endColumn));const o=t._getViewModel(),a=o.getCursorStates();r.length>0&&t.setSelections(r),Hg(a,o.getCursorStates())}}class WSe extends zt{constructor(){super({id:"editor.action.addCursorsToTop",label:m("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections();let s=[];for(let a=i[0].startLineNumber;a>=1;a--)s.push(new Se(a,i[0].startColumn,a,i[0].endColumn));const r=t._getViewModel(),o=r.getCursorStates();s.length>0&&t.setSelections(s),Hg(o,r.getCursorStates())}}class hv{constructor(e,t,i){this.selections=e,this.revealRange=t,this.revealScrollType=i}}class G_{constructor(e,t,i,s,r,o,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=i,this.searchText=s,this.wholeWord=r,this.matchCase=o,this.currentMatch=a}static create(e,t){if(!e.hasModel())return null;const i=t.getState();if(!e.hasTextFocus()&&i.isRevealed&&i.searchString.length>0)return new G_(e,t,!1,i.searchString,i.wholeWord,i.matchCase,null);let s=!1,r,o;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(s=!0,r=!0,o=!0):(r=i.wholeWord,o=i.matchCase);const l=e.getSelection();let c,h=null;if(l.isEmpty()){const u=e.getConfiguredWordAtPosition(l.getStartPosition());if(!u)return null;c=u.word,h=new Se(l.startLineNumber,u.startColumn,l.startLineNumber,u.endColumn)}else c=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new G_(e,t,s,c,r,o,h)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new hv(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new hv(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const s=this.currentMatch;return this.currentMatch=null,s}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(115):null,!1);return i?new Se(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new hv(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new hv(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const s=this.currentMatch;return this.currentMatch=null,s}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(115):null,!1);return i?new Se(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}selectAll(){return this._editor.hasModel()?(this.findController.highlightFindOptions(),this._editor.getModel().findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(115):null,!1,1073741824)):[]}}class wu extends q{constructor(e){super(),this._sessionDispose=this._register(new ee),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}static get(e){return e.getContribution(wu.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=G_.create(this._editor,e);if(!t)return;this._session=t;const i={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(i.wholeWordOverride=1,i.matchCaseOverride=1,i.isRegexOverride=2),e.getState().change(i,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(s=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(s=>{(s.matchCase||s.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const i=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return i?new Se(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):t}_applySessionResult(e){!e||(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(!!this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const s=e.getState().matchCase;if(!e$(this._editor.getModel(),t,s)){const o=this._editor.getModel();let a=[];for(let l=0,c=t.length;l<c;l++)a[l]=this._expandEmptyToWord(o,t[l]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const i=e.getState();if(i.isRevealed&&i.searchString.length>0&&i.isRegex)t=this._editor.getModel().findMatches(i.searchString,!0,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(115):null,!1,1073741824);else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll()}if(i.searchScope){const s=i.searchScope;let r=[];t.forEach(o=>{s.forEach(a=>{o.range.endLineNumber<=a.endLineNumber&&o.range.startLineNumber>=a.startLineNumber&&r.push(o)})}),t=r}if(t.length>0){const s=this._editor.getSelection();for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a.range.intersectRanges(s)){t[r]=t[0],t[0]=a;break}}this._setSelections(t.map(r=>new Se(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn)))}}}wu.ID="editor.contrib.multiCursorController";class $g extends zt{run(e,t){const i=wu.get(t);if(!i)return;const s=Ds.get(t);if(!s)return;const r=t._getViewModel();if(r){const o=r.getCursorStates();this._run(i,s),Hg(o,r.getCursorStates())}}}class zSe extends $g{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:m("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:2082,weight:100},menuOpts:{menuId:De.MenubarSelectionMenu,group:"3_multi",title:m({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class HSe extends $g{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:m("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:De.MenubarSelectionMenu,group:"3_multi",title:m({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class $Se extends $g{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:m("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:Vn(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class USe extends $g{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:m("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class jSe extends $g{constructor(){super({id:"editor.action.selectHighlights",label:m("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:3114,weight:100},menuOpts:{menuId:De.MenubarSelectionMenu,group:"3_multi",title:m({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class qSe extends $g{constructor(){super({id:"editor.action.changeAll",label:m("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:le.and(B.writable,B.editorTextFocus),kbOpts:{kbExpr:B.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class n5{constructor(e,t,i,s){this.searchText=e,this.matchCase=t,this.wordSeparators=i,this.modelVersionId=s}static softEquals(e,t){return!e&&!t?!0:!e||!t?!1:e.searchText===t.searchText&&e.matchCase===t.matchCase&&e.wordSeparators===t.wordSeparators&&e.modelVersionId===t.modelVersionId}}class Ja extends q{constructor(e){super(),this.editor=e,this._isEnabled=e.getOption(96),this.decorations=[],this.updateSoon=this._register(new Wt(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(t=>{this._isEnabled=e.getOption(96)})),this._register(e.onDidChangeCursorSelection(t=>{!this._isEnabled||(t.selection.isEmpty()?t.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(t=>{this._setState(null)})),this._register(e.onDidChangeModelContent(t=>{this._isEnabled&&this.updateSoon.schedule()})),this._register(Ds.get(e).getState().onFindReplaceStateChange(t=>{this._update()}))}_update(){this._setState(Ja._createState(this._isEnabled,this.editor))}static _createState(e,t){if(!e||!t.hasModel())return null;const i=t.getSelection();if(i.startLineNumber!==i.endLineNumber)return null;const s=wu.get(t);if(!s)return null;const r=Ds.get(t);if(!r)return null;let o=s.getSession(r);if(!o){const c=t.getSelections();if(c.length>1){const u=r.getState().matchCase;if(!e$(t.getModel(),c,u))return null}o=G_.create(t,r)}if(!o||o.currentMatch||/^[ \t]+$/.test(o.searchText)||o.searchText.length>200)return null;const a=r.getState(),l=a.matchCase;if(a.isRevealed){let c=a.searchString;l||(c=c.toLowerCase());let h=o.searchText;if(l||(h=h.toLowerCase()),c===h&&o.matchCase===a.matchCase&&o.wholeWord===a.wholeWord&&!a.isRegex)return null}return new n5(o.searchText,o.matchCase,o.wholeWord?t.getOption(115):null,t.getModel().getVersionId())}_setState(e){if(n5.softEquals(this.state,e)){this.state=e;return}if(this.state=e,!this.state){this.decorations=this.editor.deltaDecorations(this.decorations,[]);return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const i=Qw.has(t)&&this.editor.getOption(71);let s=t.findMatches(this.state.searchText,!0,!1,this.state.matchCase,this.state.wordSeparators,!1).map(l=>l.range);s.sort(I.compareRangesUsingStarts);let r=this.editor.getSelections();r.sort(I.compareRangesUsingStarts);let o=[];for(let l=0,c=0,h=s.length,u=r.length;l<h;){const d=s[l];if(c>=u)o.push(d),l++;else{const f=I.compareRangesUsingStarts(d,r[c]);f<0?((r[c].isEmpty()||!I.areIntersecting(d,r[c]))&&o.push(d),l++):(f>0||l++,c++)}}const a=o.map(l=>({range:l,options:i?Ja._SELECTION_HIGHLIGHT:Ja._SELECTION_HIGHLIGHT_OVERVIEW}));this.decorations=this.editor.deltaDecorations(this.decorations,a)}dispose(){this._setState(null),super.dispose()}}Ja.ID="editor.contrib.selectionHighlighter";Ja._SELECTION_HIGHLIGHT_OVERVIEW=$e.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",minimap:{color:ms(Ege),position:Qo.Inline},overviewRuler:{color:ms(kge),position:ra.Center}});Ja._SELECTION_HIGHLIGHT=$e.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"});function e$(n,e,t){const i=s5(n,e[0],!t);for(let s=1,r=e.length;s<r;s++){const o=e[s];if(o.isEmpty())return!1;const a=s5(n,o,!t);if(i!==a)return!1}return!0}function s5(n,e,t){const i=n.getValueInRange(e);return t?i.toLowerCase():i}$n(wu.ID,wu);$n(Ja.ID,Ja);ze(FSe);ze(PSe);ze(BSe);ze(zSe);ze(HSe);ze($Se);ze(USe);ze(jSe);ze(qSe);ze(VSe);ze(WSe);const KSe=M("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hc:"#A0A0A0"},m("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class GSe extends zt{constructor(){super({id:"editor.action.jumpToBracket",label:m("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:3160,weight:100}})}run(e,t){let i=eo.get(t);!i||i.jumpToBracket()}}class YSe extends zt{constructor(){super({id:"editor.action.selectToBracket",label:m("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,i){const s=eo.get(t);if(!s)return;let r=!0;i&&i.selectBrackets===!1&&(r=!1),s.selectToBracket(r)}}class ZSe{constructor(e,t,i){this.position=e,this.brackets=t,this.options=i}}class eo extends q{constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=[],this._updateBracketsSoon=this._register(new Wt(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(63),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._decorations=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(63)&&(this._matchBrackets=this._editor.getOption(63),this._decorations=this._editor.deltaDecorations(this._decorations,[]),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}static get(e){return e.getContribution(eo.ID)}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(i=>{const s=i.getStartPosition(),r=e.matchBracket(s);let o=null;if(r)r[0].containsPosition(s)?o=r[1].getStartPosition():r[1].containsPosition(s)&&(o=r[0].getStartPosition());else{const a=e.findEnclosingBrackets(s);if(a)o=a[0].getStartPosition();else{const l=e.findNextBracket(s);l&&l.range&&(o=l.range.getStartPosition())}}return o?new Se(o.lineNumber,o.column,o.lineNumber,o.column):new Se(s.lineNumber,s.column,s.lineNumber,s.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=[];this._editor.getSelections().forEach(s=>{const r=s.getStartPosition();let o=t.matchBracket(r);if(!o&&(o=t.findEnclosingBrackets(r),!o)){const c=t.findNextBracket(r);c&&c.range&&(o=t.matchBracket(c.range.getStartPosition()))}let a=null,l=null;if(o){o.sort(I.compareRangesUsingStarts);const[c,h]=o;if(a=e?c.getStartPosition():c.getEndPosition(),l=e?h.getEndPosition():h.getStartPosition(),h.containsPosition(r)){const u=a;a=l,l=u}}a&&l&&i.push(new Se(a.lineNumber,a.column,l.lineNumber,l.column))}),i.length>0&&(this._editor.setSelections(i),this._editor.revealRange(i[0]))}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();let e=[],t=0;for(const i of this._lastBracketsData){let s=i.brackets;s&&(e[t++]={range:s[0],options:i.options},e[t++]={range:s[1],options:i.options})}this._decorations=this._editor.deltaDecorations(this._decorations,e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),i=t.getVersionId();let s=[];this._lastVersionId===i&&(s=this._lastBracketsData);let r=[],o=0;for(let u=0,d=e.length;u<d;u++){let f=e[u];f.isEmpty()&&(r[o++]=f.getStartPosition())}r.length>1&&r.sort(P.compare);let a=[],l=0,c=0,h=s.length;for(let u=0,d=r.length;u<d;u++){let f=r[u];for(;c<h&&s[c].position.isBefore(f);)c++;if(c<h&&s[c].position.equals(f))a[l++]=s[c];else{let g=t.matchBracket(f),p=eo._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!g&&this._matchBrackets==="always"&&(g=t.findEnclosingBrackets(f,20),p=eo._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new ZSe(f,g,p)}}this._lastBracketsData=a,this._lastVersionId=i}}eo.ID="editor.contrib.bracketMatchingController";eo._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=$e.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:ms(KSe),position:ra.Center}});eo._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=$e.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});$n(eo.ID,eo);ze(YSe);ze(GSe);kt((n,e)=>{const t=n.getColor(Yge);t&&e.addRule(`.monaco-editor .bracket-match { background-color: ${t}; }`);const i=n.getColor(Zge);i&&e.addRule(`.monaco-editor .bracket-match { border: 1px solid ${i}; }`)});Xr.appendMenuItem(De.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:m({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});function oT(n,e){return!!n[e]}class HD{constructor(e,t){this.target=e.target,this.hasTriggerModifier=oT(e.event,t.triggerModifier),this.hasSideBySideModifier=oT(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class r5{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=oT(e,t.triggerModifier)}}class uv{constructor(e,t,i,s){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=s}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function o5(n){return n==="altKey"?je?new uv(57,"metaKey",6,"altKey"):new uv(5,"ctrlKey",6,"altKey"):je?new uv(6,"altKey",57,"metaKey"):new uv(6,"altKey",5,"ctrlKey")}class XSe extends q{constructor(e){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new R),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new R),this.onExecute=this._onExecute.event,this._onCancel=this._register(new R),this.onCancel=this._onCancel.event,this._editor=e,this._opts=o5(this._editor.getOption(69)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(t=>{if(t.hasChanged(69)){const i=o5(this._editor.getOption(69));if(this._opts.equals(i))return;this._opts=i,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(t=>this._onEditorMouseMove(new HD(t,this._opts)))),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(new HD(t,this._opts)))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(new HD(t,this._opts)))),this._register(this._editor.onKeyDown(t=>this._onEditorKeyDown(new r5(t,this._opts)))),this._register(this._editor.onKeyUp(t=>this._onEditorKeyUp(new r5(t,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(t=>this._onDidChangeCursorSelection(t))),this._register(this._editor.onDidChangeModel(t=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(t=>{(t.scrollTopChanged||t.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}var QSe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Yc=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let Cu=class extends T_{constructor(e,t,i,s,r,o,a,l,c,h){super(e,Object.assign(Object.assign({},i.getRawOptions()),{overflowWidgetsDomNode:i.getOverflowWidgetsDomNode()}),{},s,r,o,a,l,c,h),this._parentEditor=i,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(i.onDidChangeConfiguration(u=>this._onParentConfigurationChanged(u)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){po(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};Cu=QSe([Yc(3,pt),Yc(4,Tt),Yc(5,Fi),Yc(6,Le),Yc(7,At),Yc(8,en),Yc(9,rs)],Cu);const a5=new V(new Fe(0,122,204)),JSe={showArrow:!0,showFrame:!0,className:"",frameColor:a5,arrowColor:a5,keepEditorSelection:!1},exe="vs.editor.contrib.zoneWidget";class txe{constructor(e,t,i,s,r,o){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=i,this.heightInLines=s,this._onDomNodeTop=r,this._onComputedHeight=o}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}class ixe{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}class pS{constructor(e){this._editor=e,this._ruleName=pS._IdGenerator.nextId(),this._decorations=[],this._color=null,this._height=-1}dispose(){this.hide(),jw(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){jw(this._ruleName),mE(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){this._decorations=this._editor.deltaDecorations(this._decorations,[{range:I.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._editor.deltaDecorations(this._decorations,[])}}pS._IdGenerator=new wM(".arrow-decoration-");class nxe{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._positionMarkerId=[],this._viewZone=null,this._disposables=new ee,this.container=null,this._isShowing=!1,this.editor=e,this.options=Ml(t),po(this.options,JSe,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(i=>{const s=this._getWidth(i);this.domNode.style.width=s+"px",this.domNode.style.left=this._getLeft(i)+"px",this._onWidth(s)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this.editor.deltaDecorations(this._positionMarkerId,[]),this._positionMarkerId=[],this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new pS(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){let e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){let e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){if(this.domNode.style.height=`${e}px`,this.container){let t=e-this._decoratingElementsHeight();this.container.style.height=`${t}px`;const i=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(i))}this._resizeSash&&this._resizeSash.layout()}get position(){const[e]=this._positionMarkerId;if(!e)return;const t=this.editor.getModel();if(!t)return;const i=t.getDecorationRange(e);if(!!i)return i.getStartPosition()}show(e,t){const i=I.isIRange(e)?I.lift(e):I.fromPositions(e);this._isShowing=!0,this._showImpl(i,t),this._isShowing=!1,this._positionMarkerId=this.editor.deltaDecorations(this._positionMarkerId,[{range:i,options:$e.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()}_decoratingElementsHeight(){let e=this.editor.getOption(58),t=0;if(this.options.showArrow){let i=Math.round(e/3);t+=2*i}if(this.options.showFrame){let i=Math.round(e/9);t+=2*i}return t}_showImpl(e,t){const i=e.getStartPosition(),s=this.editor.getLayoutInfo(),r=this._getWidth(s);this.domNode.style.width=`${r}px`,this.domNode.style.left=this._getLeft(s)+"px";const o=document.createElement("div");o.style.overflow="hidden";const a=this.editor.getOption(58),l=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,l);let c=0,h=0;if(this._arrow&&this.options.showArrow&&(c=Math.round(a/3),this._arrow.height=c,this._arrow.show(i)),this.options.showFrame&&(h=Math.round(a/9)),this.editor.changeViewZones(f=>{this._viewZone&&f.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new txe(o,i.lineNumber,i.column,t,g=>this._onViewZoneTop(g),g=>this._onViewZoneHeight(g)),this._viewZone.id=f.addZone(this._viewZone),this._overlayWidget=new ixe(exe+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const f=this.options.frameWidth?this.options.frameWidth:h;this.container.style.borderTopWidth=f+"px",this.container.style.borderBottomWidth=f+"px"}let u=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=c+"px",this.container.style.height=u+"px",this.container.style.overflow="hidden"),this._doLayout(u,r),this.options.keepEditorSelection||this.editor.setSelection(e);const d=this.editor.getModel();if(d){const f=e.endLineNumber+1;f<=d.getLineCount()?this.revealLine(f,!1):this.revealLine(d.getLineCount(),!0)}}revealLine(e,t){t?this.editor.revealLineInCenter(e,0):this.editor.revealLine(e,0)}setCssClass(e,t){!this.container||(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new Ki(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.hide(),this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){let i=(t.currentY-e.startY)/this.editor.getOption(58),s=i<0?Math.ceil(i):Math.floor(i),r=e.heightInLines+s;r>5&&r<35&&this._relayout(r)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}class sxe extends Uf{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new R),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=Y(e,J(".monaco-dropdown")),this._label=Y(this._element,J(".dropdown-label"));let i=t.labelRenderer;i||(i=r=>(r.textContent=t.label||"",null));for(const r of[de.CLICK,de.MOUSE_DOWN,bt.Tap])this._register(K(this.element,r,o=>ot.stop(o,!0)));for(const r of[de.MOUSE_DOWN,bt.Tap])this._register(K(this._label,r,o=>{o instanceof MouseEvent&&o.detail>1||(this.visible?this.hide():this.show())}));this._register(K(this._label,de.KEY_UP,r=>{const o=new Ft(r);(o.equals(3)||o.equals(10))&&(ot.stop(r,!0),this.visible?this.hide():this.show())}));const s=i(this._label);s&&this._register(s),this._register(st.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class rxe extends sxe{constructor(e,t){super(e,t),this._actions=[],this._contextMenuProvider=t.contextMenuProvider,this.actions=t.actions||[],this.actionProvider=t.actionProvider,this.menuClassName=t.menuClassName||"",this.menuAsChild=!!t.menuAsChild}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:e=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class t$ extends jh{constructor(e,t,i,s=Object.create(null)){super(null,e,s),this.actionItem=null,this._onDidChangeVisibility=this._register(new R),this.menuActionsOrProvider=t,this.contextMenuProvider=i,this.options=s,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=r=>{this.element=Y(r,J("a.action-label"));let o=[];return typeof this.options.classNames=="string"?o=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(o=this.options.classNames),o.find(a=>a==="icon")||o.push("codicon"),this.element.classList.add(...o),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",null},i=Array.isArray(this.menuActionsOrProvider),s={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:i?this.menuActionsOrProvider:void 0,actionProvider:i?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new rxe(e,s)),this._register(this.dropdownMenu.onDidChangeVisibility(r=>{var o;(o=this.element)===null||o===void 0||o.setAttribute("aria-expanded",`${r}`),this._onDidChangeVisibility.fire(r)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const r=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return r.options.anchorAlignmentProvider()}})}this.updateEnabled()}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}updateEnabled(){var e,t;const i=!this.getAction().enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",i),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",i)}}var AM=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Oo=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},i$=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};function oxe(n,e,t,i,s,r,o){const a=n.getActions(e);return lxe(a,t,!1,typeof i=="string"?c=>c===i:i,s,r,o),axe(a)}function axe(n){const e=new ee;for(const[,t]of n)for(const i of t)e.add(i);return e}function lxe(n,e,t,i=a=>a==="navigation",s=Number.MAX_SAFE_INTEGER,r=()=>!1,o=!1){let a,l;Array.isArray(e)?(a=e,l=e):(a=e.primary,l=e.secondary);const c=new Set;for(const[h,u]of n){let d;i(h)?(d=a,d.length>0&&o&&d.push(new Yr)):(d=l,d.length>0&&d.push(new Yr));for(let f of u){t&&(f=f instanceof gc&&f.alt?f.alt:f);const g=d.push(f);f instanceof f2&&c.add({group:h,action:f,index:g-1})}}for(const{group:h,action:u,index:d}of c){const f=i(h)?a:l,g=u.actions;(g.length<=1||f.length+g.length-2<=s)&&r(u,h,f.length)&&f.splice(d,1,...g)}if(a!==l&&a.length>s){const h=a.splice(s,a.length-s);l.unshift(...h,new Yr)}}let ag=class extends Y2{constructor(e,t,i,s,r){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable}),this._keybindingService=i,this._notificationService=s,this._contextKeyService=r,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new Ls),this._altKey=bh.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(e){return i$(this,void 0,void 0,function*(){e.preventDefault(),e.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}})}render(e){super.render(e),e.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);let t=!1,i=this._altKey.keyStatus.altKey||(Zi||Fn)&&this._altKey.keyStatus.shiftKey;const s=()=>{const r=t&&i;r!==this._wantsAltCommand&&(this._wantsAltCommand=r,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._menuItemAction.alt&&this._register(this._altKey.event(r=>{i=r.altKey||(Zi||Fn)&&r.shiftKey,s()})),this._register(K(e,"mouseleave",r=>{t=!1,s()})),this._register(K(e,"mouseenter",r=>{t=!0,s()}))}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}updateTooltip(){if(this.label){const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),i=this._commandAction.tooltip||this._commandAction.label;let s=t?m("titleAndKb","{0} ({1})",i,t):i;if(!this._wantsAltCommand&&this._menuItemAction.alt){const r=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,o=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),a=o&&o.getLabel(),l=a?m("titleAndKb","{0} ({1})",r,a):r;s+=`
[${u2.modifierLabels[dr].altKey}] ${l}`}this.label.title=s}}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){var t;this._itemClassDispose.value=void 0;const{element:i,label:s}=this;if(!i||!s)return;const r=this._commandAction.checked&&((t=e.toggled)===null||t===void 0?void 0:t.icon)?e.toggled.icon:e.icon;if(!!r)if(Rt.isThemeIcon(r)){const o=Rt.asClassNameArray(r);s.classList.add(...o),this._itemClassDispose.value=Ze(()=>{s.classList.remove(...o)})}else r.light&&s.style.setProperty("--menu-entry-icon-light",ol(r.light)),r.dark&&s.style.setProperty("--menu-entry-icon-dark",ol(r.dark)),s.classList.add("icon"),this._itemClassDispose.value=Ze(()=>{s.classList.remove("icon"),s.style.removeProperty("--menu-entry-icon-light"),s.style.removeProperty("--menu-entry-icon-dark")})}};ag=AM([Oo(2,ri),Oo(3,en),Oo(4,Le)],ag);let aT=class extends t${constructor(e,t,i){var s,r;const o=Object.assign({},t!=null?t:Object.create(null),{menuAsChild:(s=t==null?void 0:t.menuAsChild)!==null&&s!==void 0?s:!1,classNames:(r=t==null?void 0:t.classNames)!==null&&r!==void 0?r:Rt.isThemeIcon(e.item.icon)?Rt.asClassName(e.item.icon):void 0});super(e,{getActions:()=>e.actions},i,o)}render(e){if(super.render(e),this.element){e.classList.add("menu-entry");const{icon:t}=this._action.item;t&&!Rt.isThemeIcon(t)&&(this.element.classList.add("icon"),t.light&&this.element.style.setProperty("--menu-entry-icon-light",ol(t.light)),t.dark&&this.element.style.setProperty("--menu-entry-icon-dark",ol(t.dark)))}}};aT=AM([Oo(2,zu)],aT);let lT=class extends jh{constructor(e,t,i,s,r,o,a,l){var c,h,u;super(null,e),this._keybindingService=i,this._notificationService=s,this._contextMenuService=r,this._menuService=o,this._instaService=a,this._storageService=l,this._container=null,this._storageKey=`${e.item.submenu._debugName}_lastActionId`;let d,f=l.get(this._storageKey,1);f&&(d=e.actions.find(p=>f===p.id)),d||(d=e.actions[0]),this._defaultAction=this._instaService.createInstance(ag,d,void 0);const g=Object.assign({},t!=null?t:Object.create(null),{menuAsChild:(c=t==null?void 0:t.menuAsChild)!==null&&c!==void 0?c:!0,classNames:(h=t==null?void 0:t.classNames)!==null&&h!==void 0?h:["codicon","codicon-chevron-down"],actionRunner:(u=t==null?void 0:t.actionRunner)!==null&&u!==void 0?u:new Uf});this._dropdown=new t$(e,e.actions,this._contextMenuService,g),this._dropdown.actionRunner.onDidRun(p=>{p.action instanceof gc&&this.update(p.action)})}update(e){this._storageService.store(this._storageKey,e.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(ag,e,void 0),this._defaultAction.actionRunner=new class extends Uf{runAction(t,i){return i$(this,void 0,void 0,function*(){yield t.run(void 0)})}},this._container&&this._defaultAction.render(Oae(this._container,J(".action-container")))}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=J(".action-container");this._defaultAction.render(Y(this._container,t)),this._register(K(t,de.KEY_DOWN,s=>{const r=new Ft(s);r.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),r.stopPropagation())}));const i=J(".dropdown-action-container");this._dropdown.render(Y(this._container,i)),this._register(K(i,de.KEY_DOWN,s=>{var r;const o=new Ft(s);o.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(r=this._defaultAction.element)===null||r===void 0||r.focus(),o.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};lT=AM([Oo(2,ri),Oo(3,en),Oo(4,zu),Oo(5,Tg),Oo(6,pt),Oo(7,qu)],lT);function cxe(n,e,t){return e instanceof gc?n.createInstance(ag,e,void 0):e instanceof lW?e.item.rememberDefaultAction?n.createInstance(lT,e,t):n.createInstance(aT,e,t):void 0}var n$=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},s$=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};const r$=Xe("IPeekViewService");Ru(r$,class{constructor(){this._widgets=new Map}addExclusiveWidget(n,e){const t=this._widgets.get(n);t&&(t.listener.dispose(),t.widget.dispose());const i=()=>{const s=this._widgets.get(n);s&&s.widget===e&&(s.listener.dispose(),this._widgets.delete(n))};this._widgets.set(n,{widget:e,listener:e.onDidClose(i)})}});var ts;(function(n){n.inPeekEditor=new he("inReferenceSearchEditor",!0,m("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),n.notInPeekEditor=n.inPeekEditor.toNegated()})(ts||(ts={}));let Y_=class{constructor(e,t){e instanceof Cu&&ts.inPeekEditor.bindTo(t)}dispose(){}};Y_.ID="editor.contrib.referenceController";Y_=n$([s$(1,Le)],Y_);$n(Y_.ID,Y_);function hxe(n){let e=n.get(Tt).getFocusedCodeEditor();return e instanceof Cu?e.getParentEditor():e}const uxe={headerBackgroundColor:V.white,primaryHeadingColor:V.fromHex("#333333"),secondaryHeadingColor:V.fromHex("#6c6c6cb3")};let ry=class extends nxe{constructor(e,t,i){super(e,t),this.instantiationService=i,this._onDidClose=new R,this.onDidClose=this._onDidClose.event,po(this.options,uxe,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){let t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();let e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=J(".head"),this._bodyElement=J(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){const i=J(".peekview-title");this.options.supportOnTitleClick&&(i.classList.add("clickable"),mi(i,"click",o=>this._onTitleClick(o))),Y(this._headElement,i),this._fillTitleIcon(i),this._primaryHeading=J("span.filename"),this._secondaryHeading=J("span.dirname"),this._metaHeading=J("span.meta"),Y(i,this._primaryHeading,this._secondaryHeading,this._metaHeading);const s=J(".peekview-actions");Y(this._headElement,s);const r=this._getActionBarOptions();this._actionbarWidget=new ll(s,r),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new Cr("peekview.close",m("label.close","Close"),se.close.classNames,!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:cxe.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:Yi(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,ps(this._metaHeading)):Nn(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const i=Math.ceil(this.editor.getOption(58)*1.2),s=Math.round(e-(i+2));this._doLayoutHead(i,t),this._doLayoutBody(s,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};ry=n$([s$(2,pt)],ry);const dxe=M("peekViewTitle.background",{dark:vt(Qr,.1),light:vt(Qr,.1),hc:null},m("peekViewTitleBackground","Background color of the peek view title area.")),o$=M("peekViewTitleLabel.foreground",{dark:V.white,light:V.black,hc:V.white},m("peekViewTitleForeground","Color of the peek view title.")),a$=M("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hc:"#FFFFFF99"},m("peekViewTitleInfoForeground","Color of the peek view title info.")),fxe=M("peekView.border",{dark:Qr,light:Qr,hc:ni},m("peekViewBorder","Color of the peek view borders and arrow.")),l$=M("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hc:V.black},m("peekViewResultsBackground","Background color of the peek view result list.")),gxe=M("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hc:V.white},m("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),pxe=M("peekViewResult.fileForeground",{dark:V.white,light:"#1E1E1E",hc:V.white},m("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),mxe=M("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hc:null},m("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),_xe=M("peekViewResult.selectionForeground",{dark:V.white,light:"#6C6C6C",hc:V.white},m("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list.")),tw=M("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hc:V.black},m("peekViewEditorBackground","Background color of the peek view editor.")),bxe=M("peekViewEditorGutter.background",{dark:tw,light:tw,hc:tw},m("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),vxe=M("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hc:null},m("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),wxe=M("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hc:null},m("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),Cxe=M("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hc:Bn},m("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));var yxe=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class yc{constructor(e,t,i,s){this.isProviderFirst=e,this.parent=t,this.link=i,this._rangeCallback=s,this.id=bH.nextId()}get uri(){return this.link.uri}get range(){var e,t;return(t=(e=this._range)!==null&&e!==void 0?e:this.link.targetSelectionRange)!==null&&t!==void 0?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=(e=this.parent.getPreview(this))===null||e===void 0?void 0:e.preview(this.range);return t?m({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",ro(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):m("aria.oneReference","symbol in {0} on line {1} at column {2}",ro(this.uri),this.range.startLineNumber,this.range.startColumn)}}class Sxe{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const i=this._modelReference.object.textEditorModel;if(!i)return;const{startLineNumber:s,startColumn:r,endLineNumber:o,endColumn:a}=e,l=i.getWordUntilPosition({lineNumber:s,column:r-t}),c=new I(s,l.startColumn,s,r),h=new I(o,a,o,1073741824),u=i.getValueInRange(c).replace(/^\s+/,""),d=i.getValueInRange(e),f=i.getValueInRange(h).replace(/\s+$/,"");return{value:u+d+f,highlight:{start:u.length,end:u.length+d.length}}}}class Z_{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new _n}dispose(){He(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?m("aria.fileReferences.1","1 symbol in {0}, full path {1}",ro(this.uri),this.uri.fsPath):m("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,ro(this.uri),this.uri.fsPath)}resolve(e){return yxe(this,void 0,void 0,function*(){if(this._previews.size!==0)return this;for(let t of this.children)if(!this._previews.has(t.uri))try{const i=yield e.createModelReference(t.uri);this._previews.set(t.uri,new Sxe(i))}catch(i){Ie(i)}return this})}}class es{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new R,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[i]=e;e.sort(es._compareReferences);let s;for(let r of e)if((!s||!Pn.isEqual(s.uri,r.uri,!0))&&(s=new Z_(this,r.uri),this.groups.push(s)),s.children.length===0||es._compareReferences(r,s.children[s.children.length-1])!==0){const o=new yc(i===r,s,r,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(o),s.children.push(o)}}dispose(){He(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new es(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?m("aria.result.0","No results found"):this.references.length===1?m("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?m("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):m("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:i}=e,s=i.children.indexOf(e),r=i.children.length,o=i.parent.groups.length;return o===1||t&&s+1<r||!t&&s>0?(t?s=(s+1)%r:s=(s+r-1)%r,i.children[s]):(s=i.parent.groups.indexOf(i),t?(s=(s+1)%o,i.parent.groups[s].children[0]):(s=(s+o-1)%o,i.parent.groups[s].children[i.parent.groups[s].children.length-1]))}nearestReference(e,t){const i=this.references.map((s,r)=>({idx:r,prefixLen:s_(s.uri.toString(),e.toString()),offsetDist:Math.abs(s.range.startLineNumber-t.lineNumber)*100+Math.abs(s.range.startColumn-t.column)})).sort((s,r)=>s.prefixLen>r.prefixLen?-1:s.prefixLen<r.prefixLen?1:s.offsetDist<r.offsetDist?-1:s.offsetDist>r.offsetDist?1:0)[0];if(i)return this.references[i.idx]}referenceAt(e,t){for(const i of this.references)if(i.uri.toString()===e.toString()&&I.containsPosition(i.range,t))return i}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return Pn.compare(e.uri,t.uri)||I.compareRangesUsingStarts(e.range,t.range)}}function c$(n){if(!n)return;typeof n=="string"&&(n=xe.file(n));const e=ro(n)||(n.scheme===Ve.file?n.fsPath:n.path);return Zi&&gle(e)?cT(e):e}function cT(n){return iV(n)?n.charAt(0).toUpperCase()+n.slice(1):n}var mS=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},X_=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let hT=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof es||e instanceof Z_}getChildren(e){if(e instanceof es)return e.groups;if(e instanceof Z_)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};hT=mS([X_(0,oa)],hT);class xxe{getHeight(){return 23}getTemplateId(e){return e instanceof Z_?Q_.id:X0.id}}let uT=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof yc){const i=(t=e.parent.getPreview(e))===null||t===void 0?void 0:t.preview(e.range);if(i)return i.value}return ro(e.uri)}};uT=mS([X_(0,ri)],uT);class Dxe{getId(e){return e instanceof yc?e.id:e.uri}}let dT=class extends q{constructor(e,t,i){super(),this._uriLabel=t;const s=document.createElement("div");s.classList.add("reference-file"),this.file=this._register(new yM(s,{supportHighlights:!0})),this.badge=new $I(Y(s,J(".count"))),this._register(tve(this.badge,i)),e.appendChild(s)}set(e,t){let i=$A(e.uri);this.file.setLabel(c$(e.uri),this._uriLabel.getUriLabel(i,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});const s=e.children.length;this.badge.setCount(s),s>1?this.badge.setTitleFormat(m("referencesCount","{0} references",s)):this.badge.setTitleFormat(m("referenceCount","{0} reference",s))}};dT=mS([X_(1,$0),X_(2,At)],dT);let Q_=class h${constructor(e){this._instantiationService=e,this.templateId=h$.id}renderTemplate(e){return this._instantiationService.createInstance(dT,e)}renderElement(e,t,i){i.set(e.element,nM(e.filterData))}disposeTemplate(e){e.dispose()}};Q_.id="FileReferencesRenderer";Q_=mS([X_(0,pt)],Q_);class Lxe{constructor(e){this.label=new wc(e,!1)}set(e,t){var i;const s=(i=e.parent.getPreview(e))===null||i===void 0?void 0:i.preview(e.range);if(!s||!s.value)this.label.set(`${ro(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:r,highlight:o}=s;t&&!Jr.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(r,nM(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(r,[o]))}}}class X0{constructor(){this.templateId=X0.id}renderTemplate(e){return new Lxe(e)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(){}}X0.id="OneReferenceRenderer";class kxe{getWidgetAriaLabel(){return m("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var Exe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Da=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},l5=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class _S{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new ee,this._callOnModelChange=new ee,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(!!e){for(let t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],i=[];for(let r=0,o=e.children.length;r<o;r++){let a=e.children[r];this._decorationIgnoreSet.has(a.id)||a.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:a.range,options:_S.DecorationOptions}),i.push(r))}const s=this._editor.deltaDecorations([],t);for(let r=0;r<s.length;r++)this._decorations.set(s[r],e.children[i[r]])}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(!!t){for(let[i,s]of this._decorations){const r=t.getDecorationRange(i);if(!r)continue;let o=!1;if(!I.equalsRange(r,s.range)){if(I.spansMultipleLines(r))o=!0;else{const a=s.range.endColumn-s.range.startColumn,l=r.endColumn-r.startColumn;a!==l&&(o=!0)}o?(this._decorationIgnoreSet.add(s.id),e.push(i)):s.range=r}}for(let i=0,s=e.length;i<s;i++)this._decorations.delete(e[i]);this._editor.deltaDecorations(e,[])}}removeDecorations(){this._editor.deltaDecorations([...this._decorations.keys()],[]),this._decorations.clear()}}_S.DecorationOptions=$e.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class Ixe{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,i;try{const s=JSON.parse(e);t=s.ratio,i=s.heightInLines}catch{}return{ratio:t||.7,heightInLines:i||18}}}class Txe extends PI{}let fT=class extends ry{constructor(e,t,i,s,r,o,a,l,c,h,u,d){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},o),this._defaultTreeKeyboardSupport=t,this.layoutData=i,this._textModelResolverService=r,this._instantiationService=o,this._peekViewService=a,this._uriLabel=l,this._undoRedoService=c,this._keybindingService=h,this._modeService=u,this._languageConfigurationService=d,this._disposeOnNewModel=new ee,this._callOnDispose=new ee,this._onDidSelectReference=new R,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new gt(0,0),this._applyTheme(s.getColorTheme()),this._callOnDispose.add(s.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),He(this._preview),He(this._previewNotAvailableMessage),He(this._tree),He(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(fxe)||V.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(dxe)||V.transparent,primaryHeadingColor:e.getColor(o$),secondaryHeadingColor:e.getColor(a$)})}show(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=Y(e,J("div.messages")),Nn(this._messageContainer),this._splitView=new nH(e,{orientation:1}),this._previewContainer=Y(e,J("div.preview.inline"));let t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(Cu,this._previewContainer,t,this.editor),Nn(this._previewContainer),this._previewNotAvailableMessage=new js(m("missingPreviewMessage","no preview available"),js.DEFAULT_CREATION_OPTIONS,null,null,this._undoRedoService,this._modeService,this._languageConfigurationService),this._treeContainer=Y(e,J("div.ref-tree.inline"));const i={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new kxe,keyboardNavigationLabelProvider:this._instantiationService.createInstance(uT),identityProvider:new Dxe,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:l$}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(mi(this._treeContainer,"keydown",r=>{r.equals(9)&&(this._keybindingService.dispatchEvent(r,r.target),r.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(Txe,"ReferencesWidget",this._treeContainer,new xxe,[this._instantiationService.createInstance(Q_),this._instantiationService.createInstance(X0)],this._instantiationService.createInstance(hT),i),this._splitView.addView({onDidChange:ue.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:r=>{this._preview.layout({height:this._dim.height,width:r})}},XC.Distribute),this._splitView.addView({onDidChange:ue.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:r=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${r}px`,this._tree.layout(this._dim.height,r)}},XC.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let s=(r,o)=>{r instanceof yc&&(o==="show"&&this._revealReference(r,!1),this._onDidSelectReference.fire({element:r,kind:o,source:"tree"}))};this._tree.onDidOpen(r=>{r.sideBySide?s(r.element,"side"):r.editorOptions.pinned?s(r.element,"goto"):s(r.element,"show")}),Nn(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new gt(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{!this._model||(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=m("noResults","No results"),ps(this._messageContainer),Promise.resolve(void 0)):(Nn(this._messageContainer),this._decorationsManager=new _S(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:i}=e;if(t.detail!==2)return;const s=this._getFocusedReference();!s||this._onDidSelectReference.fire({element:{uri:s.uri,range:i.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),ps(this._treeContainer),ps(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof yc)return e;if(e instanceof Z_&&e.children.length>0)return e.children[0]}revealReference(e){return l5(this,void 0,void 0,function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})})}_revealReference(e,t){return l5(this,void 0,void 0,function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==Ve.inMemory?this.setTitle(sV(e.uri),this._uriLabel.getUriLabel($A(e.uri))):this.setTitle(m("peekView.alternateTitle","References"));const i=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent),this._tree.reveal(e));const s=yield i;if(!this._model){s.dispose();return}He(this._previewModelReference);const r=s.object;if(r){const o=this._preview.getModel()===r.textEditorModel?0:1,a=I.lift(e.range).collapseToStart();this._previewModelReference=s,this._preview.setModel(r.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,o)}else this._preview.setModel(this._previewNotAvailableMessage),s.dispose()})}};fT=Exe([Da(3,At),Da(4,oa),Da(5,pt),Da(6,r$),Da(7,$0),Da(8,V0),Da(9,ri),Da(10,Hn),Da(11,F0)],fT);kt((n,e)=>{const t=n.getColor(vxe);t&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { background-color: ${t}; }`);const i=n.getColor(wxe);i&&e.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { background-color: ${i}; }`);const s=n.getColor(Cxe);s&&e.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { border: 2px solid ${s}; box-sizing: border-box; }`);const r=n.getColor(Bn);r&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { border: 1px dotted ${r}; box-sizing: border-box; }`);const o=n.getColor(l$);o&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree { background-color: ${o}; }`);const a=n.getColor(gxe);a&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree { color: ${a}; }`);const l=n.getColor(pxe);l&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .reference-file { color: ${l}; }`);const c=n.getColor(mxe);c&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: ${c}; }`);const h=n.getColor(_xe);h&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: ${h} !important; }`);const u=n.getColor(tw);u&&e.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {	background-color: ${u};}`);const d=n.getColor(bxe);d&&e.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .margin {	background-color: ${d};}`)});var Nxe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},wd=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},c5=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const Gu=new he("referenceSearchVisible",!1,m("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let lg=class gT{constructor(e,t,i,s,r,o,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=s,this._notificationService=r,this._instantiationService=o,this._storageService=a,this._configurationService=l,this._disposables=new ee,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=Gu.bindTo(i)}static get(e){return e.getContribution(gT.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)===null||e===void 0||e.dispose(),(t=this._model)===null||t===void 0||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,i){let s;if(this._widget&&(s=this._widget.position),this.closeWidget(),!!s&&e.containsPosition(s))return;this._peekMode=i,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const r="peekViewLayout",o=Ixe.fromJSON(this._storageService.get(r,0,"{}"));this._widget=this._instantiationService.createInstance(fT,this._editor,this._defaultTreeKeyboardSupport,o),this._widget.setTitle(m("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(r,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{let{element:c,kind:h}=l;if(!!c)switch(h){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(c,!1,!1);break;case"side":this.openReference(c,!0,!1);break;case"goto":i?this._gotoReference(c):this.openReference(c,!1,!0);break}}));const a=++this._requestIdPool;t.then(l=>{var c;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(c=this._model)===null||c===void 0||c.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(m("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let h=this._editor.getModel().uri,u=new P(e.startLineNumber,e.startColumn),d=this._model.nearestReference(h,u);if(d)return this._widget.setSelection(d).then(()=>{this._widget&&this._editor.getOption(76)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){!this._widget||(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return c5(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const i=this._model.nearestReference(this._editor.getModel().uri,t);if(!i)return;const s=this._model.nextOrPreviousReference(i,e),r=this._editor.hasTextFocus(),o=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(s),yield this._gotoReference(s),r?this._editor.focus():this._widget&&o&&this._widget.focusOnPreviewEditor()})}revealReference(e){return c5(this,void 0,void 0,function*(){!this._editor.hasModel()||!this._model||!this._widget||(yield this._widget.revealReference(e))})}closeWidget(e=!0){var t,i;(t=this._widget)===null||t===void 0||t.dispose(),(i=this._model)===null||i===void 0||i.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const t=I.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:t}},this._editor).then(i=>{var s;if(this._ignoreModelChangeEvent=!1,!i||!this._widget){this.closeWidget();return}if(this._editor===i)this._widget.show(t),this._widget.focusOnReferenceTree();else{const r=gT.get(i),o=this._model.clone();this.closeWidget(),i.focus(),r.toggleWidget(t,ks(a=>Promise.resolve(o)),(s=this._peekMode)!==null&&s!==void 0?s:!1)}},i=>{this._ignoreModelChangeEvent=!1,Ie(i)})}openReference(e,t,i){t||this.closeWidget();const{uri:s,range:r}=e;this._editorService.openCodeEditor({resource:s,options:{selection:r,pinned:i}},this._editor,t)}};lg.ID="editor.contrib.referencesController";lg=Nxe([wd(2,Le),wd(3,Tt),wd(4,en),wd(5,pt),wd(6,qu),wd(7,si)],lg);function Yu(n,e){const t=hxe(n);if(!t)return;let i=lg.get(t);i&&e(i)}yn.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:Vn(2089,60),when:le.or(Gu,ts.inPeekEditor),handler(n){Yu(n,e=>{e.changeFocusBetweenPreviewAndReferences()})}});yn.registerCommandAndKeybindingRule({id:"goToNextReference",weight:100-10,primary:62,secondary:[70],when:le.or(Gu,ts.inPeekEditor),handler(n){Yu(n,e=>{e.goToNextOrPreviousReference(!0)})}});yn.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:100-10,primary:1086,secondary:[1094],when:le.or(Gu,ts.inPeekEditor),handler(n){Yu(n,e=>{e.goToNextOrPreviousReference(!1)})}});lt.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");lt.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");lt.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");lt.registerCommand("closeReferenceSearch",n=>Yu(n,e=>e.closeWidget()));yn.registerKeybindingRule({id:"closeReferenceSearch",weight:100-101,primary:9,secondary:[1033],when:le.and(ts.inPeekEditor,le.not("config.editor.stablePeek"))});yn.registerKeybindingRule({id:"closeReferenceSearch",weight:200+50,primary:9,secondary:[1033],when:le.and(Gu,le.not("config.editor.stablePeek"))});yn.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:le.and(Gu,uH),handler(n){var e;const i=(e=n.get(Zs).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(i)&&i[0]instanceof yc&&Yu(n,s=>s.revealReference(i[0]))}});yn.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:le.and(Gu,uH),handler(n){var e;const i=(e=n.get(Zs).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(i)&&i[0]instanceof yc&&Yu(n,s=>s.openReference(i[0],!0,!0))}});lt.registerCommand("openReference",n=>{var e;const i=(e=n.get(Zs).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(i)&&i[0]instanceof yc&&Yu(n,s=>s.openReference(i[0],!1,!0))});var u$=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Pp=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};const MM=new he("hasSymbols",!1,m("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),bS=Xe("ISymbolNavigationService");let pT=class{constructor(e,t,i,s){this._editorService=t,this._notificationService=i,this._keybindingService=s,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=MM.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)===null||e===void 0||e.dispose(),(t=this._currentMessage)===null||t===void 0||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const i=new mT(this._editorService),s=i.onDidChange(r=>{if(this._ignoreEditorChange)return;const o=this._editorService.getActiveCodeEditor();if(!o)return;const a=o.getModel(),l=o.getPosition();if(!a||!l)return;let c=!1,h=!1;for(const u of t.references)if(nV(u.uri,a.uri))c=!0,h=h||I.containsPosition(u.range,l);else if(c)break;(!c||!h)&&this.reset()});this._currentState=jl(i,s)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:I.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;(e=this._currentMessage)===null||e===void 0||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),i=t?m("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):m("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(i)}};pT=u$([Pp(0,Le),Pp(1,Tt),Pp(2,en),Pp(3,ri)],pT);Ru(bS,pT,!0);ne(new class extends Ks{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:MM,kbOpts:{weight:100,primary:70}})}runEditorCommand(n,e){return n.get(bS).revealNext(e)}});yn.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:MM,primary:9,handler(n){n.get(bS).reset()}});let mT=class{constructor(e){this._listener=new Map,this._disposables=new ee,this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),He(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,jl(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))===null||t===void 0||t.dispose(),this._listener.delete(e)}};mT=u$([Pp(0,Tt)],mT);var Axe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Mxe=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let xr=class _T{constructor(e,t){this._messageWidget=new Ls,this._messageListeners=new ee,this._editor=e,this._visible=_T.MESSAGE_VISIBLE.bindTo(t),this._editorListener=this._editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit())}static get(e){return e.getContribution(_T.ID)}dispose(){this._editorListener.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){Pu(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new h5(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(new Wn(()=>this.closeMessage(),3e3));let i;this._messageListeners.add(this._editor.onMouseMove(s=>{!s.target.position||(i?i.containsPosition(s.target.position)||this.closeMessage():i=new I(t.lineNumber-3,1,s.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(h5.fadeOut(this._messageWidget.value))}_onDidAttemptReadOnlyEdit(){this._editor.hasModel()&&this.showMessage(m("editor.readonly","Cannot edit in read-only editor"),this._editor.getPosition())}};xr.ID="editor.contrib.messageController";xr.MESSAGE_VISIBLE=new he("messageVisible",!1,m("messageVisible","Whether the editor is currently showing an inline message"));xr=Axe([Mxe(1,Le)],xr);const Rxe=Ks.bindToContribution(xr.get);ne(new Rxe({id:"leaveEditorMessage",precondition:xr.MESSAGE_VISIBLE,handler:n=>n.closeMessage(),kbOpts:{weight:100+30,primary:9}}));class h5{constructor(e,{lineNumber:t,column:i},s){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:i-1},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage");const r=document.createElement("div");r.classList.add("anchor","top"),this._domNode.appendChild(r);const o=document.createElement("div");o.classList.add("message"),o.textContent=s,this._domNode.appendChild(o);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(e){let t;const i=()=>{e.dispose(),clearTimeout(t),e.getDomNode().removeEventListener("animationend",i)};return t=setTimeout(i,110),e.getDomNode().addEventListener("animationend",i),e.getDomNode().classList.add("fadeOut"),{dispose:i}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2]}}afterRender(e){this._domNode.classList.toggle("below",e===2)}}$n(xr.ID,xr);kt((n,e)=>{const t=n.getColor(T2);if(t){let r=n.type===Zr.HIGH_CONTRAST?2:1;e.addRule(`.monaco-editor .monaco-editor-overlaymessage .anchor.below { border-top-color: ${t}; }`),e.addRule(`.monaco-editor .monaco-editor-overlaymessage .anchor.top { border-bottom-color: ${t}; }`),e.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { border: ${r}px solid ${t}; }`)}const i=n.getColor(E2);i&&e.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { background-color: ${i}; }`);const s=n.getColor(I2);s&&e.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { color: ${s}; }`)});var d$=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};function Q0(n,e,t,i){const r=t.ordered(n).map(o=>Promise.resolve(i(o,n,e)).then(void 0,a=>{kr(a)}));return Promise.all(r).then(o=>{const a=[];for(let l of o)Array.isArray(l)?a.push(...l):l&&a.push(l);return a})}function RM(n,e,t){return Q0(n,e,a_,(i,s,r)=>i.provideDefinition(s,r,t))}function f$(n,e,t){return Q0(n,e,Jw,(i,s,r)=>i.provideDeclaration(s,r,t))}function g$(n,e,t){return Q0(n,e,eC,(i,s,r)=>i.provideImplementation(s,r,t))}function p$(n,e,t){return Q0(n,e,tC,(i,s,r)=>i.provideTypeDefinition(s,r,t))}function vS(n,e,t,i){return Q0(n,e,Xw,(s,r,o)=>d$(this,void 0,void 0,function*(){const a=yield s.provideReferences(r,o,{includeDeclaration:!0},i);if(!t||!a||a.length!==2)return a;const l=yield s.provideReferences(r,o,{includeDeclaration:!1},i);return l&&l.length===1?l:a}))}function J0(n){return d$(this,void 0,void 0,function*(){const e=yield n(),t=new es(e,""),i=t.references.map(s=>s.link);return t.dispose(),i})}Ag("_executeDefinitionProvider",(n,e)=>J0(()=>RM(n,e,Lt.None)));Ag("_executeDeclarationProvider",(n,e)=>J0(()=>f$(n,e,Lt.None)));Ag("_executeImplementationProvider",(n,e)=>J0(()=>g$(n,e,Lt.None)));Ag("_executeTypeDefinitionProvider",(n,e)=>J0(()=>p$(n,e,Lt.None)));Ag("_executeReferenceProvider",(n,e)=>J0(()=>vS(n,e,!1,Lt.None)));var Sr=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})},$D,UD,jD,qD,KD,GD,YD,ZD;Xr.appendMenuItem(De.EditorContext,{submenu:De.EditorContextPeek,title:m("peek.submenu","Peek"),group:"navigation",order:100});const m$=new Set;function bo(n){const e=new n;return fW(e),m$.add(e.id),e}class Ug extends zt{constructor(e,t){super(t),this._configuration=e}run(e,t){if(!t.hasModel())return Promise.resolve(void 0);const i=e.get(en),s=e.get(Tt),r=e.get(Bg),o=e.get(bS),a=t.getModel(),l=t.getPosition(),c=new a0e(t,5),h=P9(this._getLocationModel(a,l,c.token),c.token).then(u=>Sr(this,void 0,void 0,function*(){if(!u||c.token.isCancellationRequested)return;Pu(u.ariaMessage);let d;if(u.referenceAt(a.uri,l)){const g=this._getAlternativeCommand(t);g!==this.id&&m$.has(g)&&(d=t.getAction(g))}const f=u.references.length;if(f===0){if(!this._configuration.muteMessage){const g=a.getWordAtPosition(l);xr.get(t).showMessage(this._getNoResultFoundMessage(g),l)}}else if(f===1&&d)d.run();else return this._onResult(s,o,t,u)}),u=>{i.error(u)}).finally(()=>{c.dispose()});return r.showWhile(h,250),h}_onResult(e,t,i,s){return Sr(this,void 0,void 0,function*(){const r=this._getGoToPreference(i);if(!(i instanceof Cu)&&(this._configuration.openInPeek||r==="peek"&&s.references.length>1))this._openInPeek(i,s);else{const o=s.firstReference(),a=s.references.length>1&&r==="gotoAndPeek",l=yield this._openReference(i,e,o,this._configuration.openToSide,!a);a&&l?this._openInPeek(l,s):s.dispose(),r==="goto"&&t.put(o)}})}_openReference(e,t,i,s,r){return Sr(this,void 0,void 0,function*(){let o;if(ice(i)&&(o=i.targetSelectionRange),o||(o=i.range),!o)return;const a=yield t.openCodeEditor({resource:i.uri,options:{selection:I.collapseToStart(o),selectionRevealType:3}},e,s);if(!!a){if(r){const l=a.getModel(),c=a.deltaDecorations([],[{range:o,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&a.deltaDecorations(c,[])},350)}return a}})}_openInPeek(e,t){let i=lg.get(e);i&&e.hasModel()?i.toggleWidget(e.getSelection(),ks(s=>Promise.resolve(t)),this._configuration.openInPeek):t.dispose()}}class wS extends Ug{_getLocationModel(e,t,i){return Sr(this,void 0,void 0,function*(){return new es(yield RM(e,t,i),m("def.title","Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?m("noResultWord","No definition found for '{0}'",e.word):m("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleDefinitions}}const _$=T0&&!F9?2118:70;bo(($D=class bT extends wS{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:bT.id,label:m("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:le.and(B.hasDefinitionProvider,B.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:B.editorTextFocus,primary:_$,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),lt.registerCommandAlias("editor.action.goToDeclaration",bT.id)}},$D.id="editor.action.revealDefinition",$D));bo((UD=class vT extends wS{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:vT.id,label:m("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:le.and(B.hasDefinitionProvider,B.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:B.editorTextFocus,primary:Vn(2089,_$),weight:100}}),lt.registerCommandAlias("editor.action.openDeclarationToTheSide",vT.id)}},UD.id="editor.action.revealDefinitionAside",UD));bo((jD=class wT extends wS{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:wT.id,label:m("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:le.and(B.hasDefinitionProvider,ts.notInPeekEditor,B.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:B.editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:De.EditorContextPeek,group:"peek",order:2}}),lt.registerCommandAlias("editor.action.previewDeclaration",wT.id)}},jD.id="editor.action.peekDefinition",jD));class b$ extends Ug{_getLocationModel(e,t,i){return Sr(this,void 0,void 0,function*(){return new es(yield f$(e,t,i),m("decl.title","Declarations"))})}_getNoResultFoundMessage(e){return e&&e.word?m("decl.noResultWord","No declaration found for '{0}'",e.word):m("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(50).multipleDeclarations}}bo((qD=class v$ extends b${constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:v$.id,label:m("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:le.and(B.hasDeclarationProvider,B.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(e){return e&&e.word?m("decl.noResultWord","No declaration found for '{0}'",e.word):m("decl.generic.noResults","No declaration found")}},qD.id="editor.action.revealDeclaration",qD));bo(class extends b${constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:m("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:le.and(B.hasDeclarationProvider,ts.notInPeekEditor,B.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:De.EditorContextPeek,group:"peek",order:3}})}});class w$ extends Ug{_getLocationModel(e,t,i){return Sr(this,void 0,void 0,function*(){return new es(yield p$(e,t,i),m("typedef.title","Type Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?m("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):m("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleTypeDefinitions}}bo((KD=class C$ extends w${constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:C$.ID,label:m("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:le.and(B.hasTypeDefinitionProvider,B.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:B.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},KD.ID="editor.action.goToTypeDefinition",KD));bo((GD=class y$ extends w${constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:y$.ID,label:m("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:le.and(B.hasTypeDefinitionProvider,ts.notInPeekEditor,B.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:De.EditorContextPeek,group:"peek",order:4}})}},GD.ID="editor.action.peekTypeDefinition",GD));class S$ extends Ug{_getLocationModel(e,t,i){return Sr(this,void 0,void 0,function*(){return new es(yield g$(e,t,i),m("impl.title","Implementations"))})}_getNoResultFoundMessage(e){return e&&e.word?m("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):m("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(50).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(50).multipleImplementations}}bo((YD=class x$ extends S${constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:x$.ID,label:m("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:le.and(B.hasImplementationProvider,B.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:B.editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},YD.ID="editor.action.goToImplementation",YD));bo((ZD=class D$ extends S${constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:D$.ID,label:m("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:le.and(B.hasImplementationProvider,ts.notInPeekEditor,B.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:B.editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:De.EditorContextPeek,group:"peek",order:5}})}},ZD.ID="editor.action.peekImplementation",ZD));class L$ extends Ug{_getNoResultFoundMessage(e){return e?m("references.no","No references found for '{0}'",e.word):m("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(50).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(50).multipleReferences}}bo(class extends L${constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:m("goToReferences.label","Go to References"),alias:"Go to References",precondition:le.and(B.hasReferenceProvider,ts.notInPeekEditor,B.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:B.editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(e,t,i){return Sr(this,void 0,void 0,function*(){return new es(yield vS(e,t,!0,i),m("ref.title","References"))})}});bo(class extends L${constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:m("references.action.label","Peek References"),alias:"Peek References",precondition:le.and(B.hasReferenceProvider,ts.notInPeekEditor,B.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:De.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,i){return Sr(this,void 0,void 0,function*(){return new es(yield vS(e,t,!1,i),m("ref.title","References"))})}});class Oxe extends Ug{constructor(e,t,i){super(e,{id:"editor.action.goToLocation",label:m("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:le.and(ts.notInPeekEditor,B.isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=i}_getLocationModel(e,t,i){return Sr(this,void 0,void 0,function*(){return new es(this._references,m("generic.title","Locations"))})}_getNoResultFoundMessage(e){return e&&m("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return(t=this._gotoMultipleBehaviour)!==null&&t!==void 0?t:e.getOption(50).multipleReferences}_getAlternativeCommand(){return""}}lt.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:xe},{name:"position",description:"The position at which to start",constraint:P.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(n,e,t,i,s,r,o)=>Sr(void 0,void 0,void 0,function*(){ti(xe.isUri(e)),ti(P.isIPosition(t)),ti(Array.isArray(i)),ti(typeof s=="undefined"||typeof s=="string"),ti(typeof o=="undefined"||typeof o=="boolean");const a=n.get(Tt),l=yield a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(r2(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(c=>{const h=new class extends Oxe{_getNoResultFoundMessage(u){return r||super._getNoResultFoundMessage(u)}}({muteMessage:!Boolean(r),openInPeek:Boolean(o),openToSide:!1},i,s);c.get(pt).invokeFunction(h.run.bind(h),l)})})});lt.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:xe},{name:"position",description:"The position at which to start",constraint:P.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(n,e,t,i,s)=>Sr(void 0,void 0,void 0,function*(){n.get(Fi).executeCommand("editor.action.goToLocations",e,t,i,s,void 0,!0)})});lt.registerCommand({id:"editor.action.findReferences",handler:(n,e,t)=>{ti(xe.isUri(e)),ti(P.isIPosition(t));const i=n.get(Tt);return i.openCodeEditor({resource:e},i.getFocusedCodeEditor()).then(s=>{if(!r2(s)||!s.hasModel())return;const r=lg.get(s);if(!r)return;const o=ks(l=>vS(s.getModel(),P.lift(t),!1,l).then(c=>new es(c,m("ref.title","References")))),a=new I(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(r.toggleWidget(a,o,!1))})}});lt.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");Xr.appendMenuItems([{id:De.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:m({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:De.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:m({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:De.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:m({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:De.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:m({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:De.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:m({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}]);var Fxe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},u5=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let yu=class Bp{constructor(e,t,i){this.textModelResolverService=t,this.modeService=i,this.toUnhook=new ee,this.toUnhookForKeyboard=new ee,this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e;let s=new XSe(e);this.toUnhook.add(s),this.toUnhook.add(s.onMouseMoveOrRelevantKeyDown(([r,o])=>{this.startFindDefinitionFromMouse(r,vh(o))})),this.toUnhook.add(s.onExecute(r=>{this.isEnabled(r)&&this.gotoDefinition(r.target.position,r.hasSideBySideModifier).then(()=>{this.removeLinkDecorations()},o=>{this.removeLinkDecorations(),Ie(o)})})),this.toUnhook.add(s.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(Bp.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then(()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const i=e.target.position;this.startFindDefinition(i)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const i=e?(t=this.editor.getModel())===null||t===void 0?void 0:t.getWordAtPosition(e):null;if(!i)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===i.startColumn&&this.currentWordAtPosition.endColumn===i.endColumn&&this.currentWordAtPosition.word===i.word)return Promise.resolve(0);this.currentWordAtPosition=i;let s=new zC(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=ks(r=>this.findDefinition(e,r)),this.previousPromise.then(r=>{if(!r||!r.length||!s.validate(this.editor)){this.removeLinkDecorations();return}if(r.length>1)this.addDecoration(new I(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn),new ig().appendText(m("multipleResults","Click to show {0} definitions.",r.length)));else{let o=r[0];if(!o.uri)return;this.textModelResolverService.createModelReference(o.uri).then(a=>{if(!a.object||!a.object.textEditorModel){a.dispose();return}const{object:{textEditorModel:l}}=a,{startLineNumber:c}=o.range;if(c<1||c>l.getLineCount()){a.dispose();return}const h=this.getPreviewValue(l,c,o);let u;o.originSelectionRange?u=I.lift(o.originSelectionRange):u=new I(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn);const d=this.modeService.getModeIdByFilepathOrFirstLine(l.uri);this.addDecoration(u,new ig().appendCodeblock(d||"",h)),a.dispose()})}}).then(void 0,Ie)}getPreviewValue(e,t,i){let s=i.targetSelectionRange?i.range:this.getPreviewRangeBasedOnBrackets(e,t);return s.endLineNumber-s.startLineNumber>=Bp.MAX_SOURCE_PREVIEW_LINES&&(s=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,s)}stripIndentationFromPreviewRange(e,t,i){let r=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<i.endLineNumber;a++){const l=e.getLineFirstNonWhitespaceColumn(a);r=Math.min(r,l)}return e.getValueInRange(i).replace(new RegExp(`^\\s{${r-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const i=e.getLineFirstNonWhitespaceColumn(t),s=Math.min(e.getLineCount(),t+Bp.MAX_SOURCE_PREVIEW_LINES);let r=t+1;for(;r<s;r++){let o=e.getLineFirstNonWhitespaceColumn(r);if(i===o)break}return new I(t,1,r+1,1)}getPreviewRangeBasedOnBrackets(e,t){const i=Math.min(e.getLineCount(),t+Bp.MAX_SOURCE_PREVIEW_LINES),s=[];let r=!0,o=e.findNextBracket(new P(t,1));for(;o!==null;){if(s.length===0)s.push(o);else{const h=s[s.length-1];if(h.open[0]===o.open[0]&&h.isOpen&&!o.isOpen?s.pop():s.push(o),s.length===0)if(r)r=!1;else return new I(t,1,o.range.endLineNumber+1,1)}const a=e.getLineMaxColumn(t);let l=o.range.endLineNumber,c=o.range.endColumn;if(a===o.range.endColumn&&(l++,c=1),l>i)return new I(t,1,i+1,1);o=e.findNextBracket(new P(l,c))}return new I(t,1,i+1,1)}addDecoration(e,t){const i={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[i])}removeLinkDecorations(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&e.target.type===6&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&a_.has(this.editor.getModel())}findDefinition(e,t){const i=this.editor.getModel();return i?RM(i,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(i=>{const s=!t&&this.editor.getOption(77)&&!this.isInPeekEditor(i);return new wS({openToSide:t,openInPeek:s,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(i,this.editor)})}isInPeekEditor(e){const t=e.get(Le);return ts.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}};yu.ID="editor.contrib.gotodefinitionatposition";yu.MAX_SOURCE_PREVIEW_LINES=8;yu=Fxe([u5(1,oa),u5(2,Hn)],yu);$n(yu.ID,yu);kt((n,e)=>{const t=n.getColor(qfe);t&&e.addRule(`.monaco-editor .goto-definition-link { color: ${t} !important; }`)});const dv=J;class k$ extends q{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this._scrollbar=this._register(new q1(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this._scrollbar.getDomNode())}onContentsChanged(){this._scrollbar.scanDomNode()}}class OM extends q{constructor(e,t,i){super(),this.actionContainer=Y(e,dv("div.action-container")),this.action=Y(this.actionContainer,dv("a.action")),this.action.setAttribute("href","#"),this.action.setAttribute("role","button"),t.iconClass&&Y(this.action,dv(`span.icon.${t.iconClass}`));const s=Y(this.action,dv("span"));s.textContent=i?`${t.label} (${i})`:t.label,this._register(K(this.actionContainer,de.MOUSE_DOWN,r=>{r.stopPropagation(),r.preventDefault(),t.run(this.actionContainer)})),this.setEnabled(!0)}static render(e,t,i){return new OM(e,t,i)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function Pxe(n,e){const t=[],s=Vf.ordered(n).reverse().map(r=>Promise.resolve(r.provideDocumentColors(n,e)).then(o=>{if(Array.isArray(o))for(let a of o)t.push({colorInfo:a,provider:r})}));return Promise.all(s).then(()=>t)}function d5(n,e,t,i){return Promise.resolve(t.provideColorPresentations(n,e,i))}lt.registerCommand("_executeDocumentColorProvider",function(n,...e){const[t]=e;if(!(t instanceof xe))throw Zo();const i=n.get(zn).getModel(t);if(!i)throw Zo();const s=[],o=Vf.ordered(i).reverse().map(a=>Promise.resolve(a.provideDocumentColors(i,Lt.None)).then(l=>{if(Array.isArray(l))for(let c of l)s.push({range:c.range,color:[c.color.red,c.color.green,c.color.blue,c.color.alpha]})}));return Promise.all(o).then(()=>s)});lt.registerCommand("_executeColorPresentationProvider",function(n,...e){const[t,i]=e,{uri:s,range:r}=i;if(!(s instanceof xe)||!Array.isArray(t)||t.length!==4||!I.isIRange(r))throw Zo();const[o,a,l,c]=t,h=n.get(zn).getModel(s);if(!h)throw Zo();const u={range:r,color:{red:o,green:a,blue:l,alpha:c}},d=[],g=Vf.ordered(h).reverse().map(p=>Promise.resolve(p.provideColorPresentations(h,u,Lt.None)).then(_=>{Array.isArray(_)&&d.push(..._)}));return Promise.all(g).then(()=>d)});var Bxe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},f5=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};const Vxe=500;let Su=class E$ extends q{constructor(e,t,i){super(),this._editor=e,this._codeEditorService=t,this._configurationService=i,this._localToDispose=this._register(new ee),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=[],this._decorationsTypes=new Set,this._register(e.onDidChangeModel(()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()})),this._register(e.onDidChangeModelLanguage(()=>this.onModelChanged())),this._register(Vf.onDidChange(()=>this.onModelChanged())),this._register(e.onDidChangeConfiguration(()=>{let s=this._isEnabled;this._isEnabled=this.isEnabled(),s!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),i=this._configurationService.getValue(t);if(i&&typeof i=="object"){const s=i.colorDecorators;if(s&&s.enable!==void 0&&!s.enable)return s.enable}return this._editor.getOption(17)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const e=this._editor.getModel();!e||!Vf.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new Wn,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},E$.RECOMPUTE_TIME))})),this.beginCompute())}beginCompute(){this._computePromise=ks(e=>{const t=this._editor.getModel();return t?Pxe(t,e):Promise.resolve([])}),this._computePromise.then(e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null},Ie)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(i=>({range:{startLineNumber:i.colorInfo.range.startLineNumber,startColumn:i.colorInfo.range.startColumn,endLineNumber:i.colorInfo.range.endLineNumber,endColumn:i.colorInfo.range.endColumn},options:$e.EMPTY}));this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((i,s)=>this._colorDatas.set(i,e[s]))}updateColorDecorators(e){let t=[],i={};for(let s=0;s<e.length&&t.length<Vxe;s++){const{red:r,green:o,blue:a,alpha:l}=e[s].colorInfo.color,c=new Fe(Math.round(r*255),Math.round(o*255),Math.round(a*255),l);let h=Ale(`rgba(${c.r},${c.g},${c.b},${c.a})`).toString(16),u=`rgba(${c.r}, ${c.g}, ${c.b}, ${c.a})`,d="colorBox-"+h;!this._decorationsTypes.has(d)&&!i[d]&&this._codeEditorService.registerDecorationType("color-detector-color",d,{before:{contentText:" ",border:"solid 0.1em #000",margin:"0.1em 0.2em 0 0.2em",width:"0.8em",height:"0.8em",backgroundColor:u},dark:{before:{border:"solid 0.1em #eee"}}},void 0,this._editor),i[d]=!0,t.push({range:{startLineNumber:e[s].colorInfo.range.startLineNumber,startColumn:e[s].colorInfo.range.startColumn,endLineNumber:e[s].colorInfo.range.endLineNumber,endColumn:e[s].colorInfo.range.endColumn},options:this._codeEditorService.resolveDecorationOptions(d,!0)})}this._decorationsTypes.forEach(s=>{i[s]||this._codeEditorService.removeDecorationType(s)}),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,t)}removeAllDecorations(){this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,[]),this._decorationsTypes.forEach(e=>{this._codeEditorService.removeDecorationType(e)})}getColorData(e){const t=this._editor.getModel();if(!t)return null;const i=t.getDecorationsInRange(I.fromPositions(e,e)).filter(s=>this._colorDatas.has(s.id));return i.length===0?null:this._colorDatas.get(i[0].id)}};Su.ID="editor.contrib.colorDetector";Su.RECOMPUTE_TIME=1e3;Su=Bxe([f5(1,Tt),f5(2,si)],Su);$n(Su.ID,Su);class Wxe{constructor(e,t,i){this.presentationIndex=i,this._onColorFlushed=new R,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new R,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new R,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){for(let i=0;i<this.colorPresentations.length;i++)if(t.toLowerCase()===this.colorPresentations[i].label){this.presentationIndex=i,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}}const qr=J;class zxe extends q{constructor(e,t,i){super(),this.model=t,this.domNode=qr(".colorpicker-header"),Y(e,this.domNode),this.pickedColorNode=Y(this.domNode,qr(".picked-color"));const s=m("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",s);const r=Y(this.domNode,qr(".original-color"));r.style.backgroundColor=V.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=i.getColorTheme().getColor(__)||V.white,this._register(kt((o,a)=>{this.backgroundColor=o.getColor(__)||V.white})),this._register(K(this.pickedColorNode,de.CLICK,()=>this.model.selectNextColorPresentation())),this._register(K(r,de.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=V.Format.CSS.format(t.color)||"",this.pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter())}onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=V.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend(qr(".codicon.codicon-color-mode"))}}class Hxe extends q{constructor(e,t,i){super(),this.model=t,this.pixelRatio=i,this.domNode=qr(".colorpicker-body"),Y(e,this.domNode),this.saturationBox=new $xe(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new Uxe(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new jxe(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const i=this.model.color.hsva;this.model.color=new V(new $o(i.h,e,t,i.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new V(new $o(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,i=(1-e)*360;this.model.color=new V(new $o(i===360?0:i,t.s,t.v,t.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}class $xe extends q{constructor(e,t,i){super(),this.model=t,this.pixelRatio=i,this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new R,this.onColorFlushed=this._onColorFlushed.event,this.domNode=qr(".saturation-wrap"),Y(e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",Y(this.domNode,this.canvas),this.selection=qr(".saturation-selection"),Y(this.domNode,this.selection),this.layout(),this._register(NA(this.domNode,s=>this.onMouseDown(s))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onMouseDown(e){this.monitor=this._register(new Bu);const t=Gi(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.buttons,Mg,s=>this.onDidChangePosition(s.posx-t.left,s.posy-t.top),()=>null);const i=z9(document,()=>{this._onColorFlushed.fire(),i.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const i=Math.max(0,Math.min(1,e/this.width)),s=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(i,s),this._onDidChange.fire({s:i,v:s})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new V(new $o(e.h,1,1,1)),i=this.canvas.getContext("2d"),s=i.createLinearGradient(0,0,this.canvas.width,0);s.addColorStop(0,"rgba(255, 255, 255, 1)"),s.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),s.addColorStop(1,"rgba(255, 255, 255, 0)");const r=i.createLinearGradient(0,0,0,this.canvas.height);r.addColorStop(0,"rgba(0, 0, 0, 0)"),r.addColorStop(1,"rgba(0, 0, 0, 1)"),i.rect(0,0,this.canvas.width,this.canvas.height),i.fillStyle=V.Format.CSS.format(t),i.fill(),i.fillStyle=s,i.fill(),i.fillStyle=r,i.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}class I$ extends q{constructor(e,t){super(),this.model=t,this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new R,this.onColorFlushed=this._onColorFlushed.event,this.domNode=Y(e,qr(".strip")),this.overlay=Y(this.domNode,qr(".overlay")),this.slider=Y(this.domNode,qr(".slider")),this.slider.style.top="0px",this._register(NA(this.domNode,i=>this.onMouseDown(i))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onMouseDown(e){const t=this._register(new Bu),i=Gi(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.buttons,Mg,r=>this.onDidChangeTop(r.posy-i.top),()=>null);const s=z9(document,()=>{this._onColorFlushed.fire(),s.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}class Uxe extends I${constructor(e,t){super(e,t),this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){const{r:t,g:i,b:s}=e.rgba,r=new V(new Fe(t,i,s,1)),o=new V(new Fe(t,i,s,0));this.overlay.style.background=`linear-gradient(to bottom, ${r} 0%, ${o} 100%)`}getValue(e){return e.hsva.a}}class jxe extends I${constructor(e,t){super(e,t),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class qxe extends Ys{constructor(e,t,i,s){super(),this.model=t,this.pixelRatio=i,this._register(O9(()=>this.layout()));const r=qr(".colorpicker-widget");e.appendChild(r);const o=new zxe(r,this.model,s);this.body=new Hxe(r,this.model,this.pixelRatio),this._register(o),this._register(this.body)}layout(){this.body.layout()}}var Kxe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Gxe=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},g5=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class Yxe{constructor(e,t,i,s){this.owner=e,this.range=t,this.model=i,this.provider=s,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let CT=class{constructor(e,t,i){this._editor=e,this._hover=t,this._themeService=i}computeSync(e,t){return[]}computeAsync(e,t,i){return g5(this,void 0,void 0,function*(){if(!this._editor.hasModel())return[];const s=Su.get(this._editor);for(const r of t){if(r.options.description!=="color-detector-color")continue;const o=s.getColorData(r.range.getStartPosition());if(o)return[yield this._createColorHover(this._editor.getModel(),o.colorInfo,o.provider)]}return[]})}_createColorHover(e,t,i){return g5(this,void 0,void 0,function*(){const s=e.getValueInRange(t.range),{red:r,green:o,blue:a,alpha:l}=t.color,c=new Fe(Math.round(r*255),Math.round(o*255),Math.round(a*255),l),h=new V(c),u=yield d5(e,t,i,Lt.None),d=new Wxe(h,[],0);return d.colorPresentations=u||[],d.guessColorPresentation(h,s),new Yxe(this,I.lift(t.range),d,i)})}renderHoverParts(e,t,i){if(e.length===0||!this._editor.hasModel())return q.None;const s=new ee,r=e[0],o=this._editor.getModel(),a=r.model,l=s.add(new qxe(t,a,this._editor.getOption(127),this._themeService));let c=new I(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn);const h=()=>{let d,f;if(a.presentation.textEdit){d=[a.presentation.textEdit],f=new I(a.presentation.textEdit.range.startLineNumber,a.presentation.textEdit.range.startColumn,a.presentation.textEdit.range.endLineNumber,a.presentation.textEdit.range.endColumn);const g=this._editor.getModel()._setTrackedRange(null,f,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",d),f=this._editor.getModel()._getTrackedRange(g)||f}else d=[{identifier:null,range:c,text:a.presentation.label,forceMoveMarkers:!1}],f=c.setEndPosition(c.endLineNumber,c.startColumn+a.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",d);a.presentation.additionalTextEdits&&(d=[...a.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",d),this._hover.hide()),this._editor.pushUndoStop(),c=f},u=d=>d5(o,{range:c,color:{red:d.rgba.r/255,green:d.rgba.g/255,blue:d.rgba.b/255,alpha:d.rgba.a}},r.provider,Lt.None).then(f=>{a.colorPresentations=f||[]});return s.add(a.onColorFlushed(d=>{u(d).then(h)})),s.add(a.onDidChangeColor(u)),this._hover.setColorPicker(l),s}};CT=Kxe([Gxe(2,At)],CT);class T${constructor(e,t,i,s,r){this._computer=e,this._state=0,this._hoverTime=r,this._firstWaitScheduler=new Wt(()=>this._triggerAsyncComputation(),0),this._secondWaitScheduler=new Wt(()=>this._triggerSyncComputation(),0),this._loadingMessageScheduler=new Wt(()=>this._showLoadingMessage(),0),this._asyncComputationPromise=null,this._asyncComputationPromiseDone=!1,this._completeCallback=t,this._errorCallback=i,this._progressCallback=s}setHoverTime(e){this._hoverTime=e}_firstWaitTime(){return this._hoverTime/2}_secondWaitTime(){return this._hoverTime/2}_loadingMessageTime(){return 3*this._hoverTime}_triggerAsyncComputation(){this._state=2,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncComputationPromiseDone=!1,this._asyncComputationPromise=ks(e=>this._computer.computeAsync(e)),this._asyncComputationPromise.then(e=>{this._asyncComputationPromiseDone=!0,this._withAsyncResult(e)},e=>this._onError(e))):this._asyncComputationPromiseDone=!0}_triggerSyncComputation(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncComputationPromiseDone?(this._state=0,this._onComplete(this._computer.getResult())):(this._state=3,this._onProgress(this._computer.getResult()))}_showLoadingMessage(){this._state===3&&this._onProgress(this._computer.getResultWithLoadingMessage())}_withAsyncResult(e){e&&this._computer.onResult(e,!1),this._state===3&&(this._state=0,this._onComplete(this._computer.getResult()))}_onComplete(e){this._completeCallback(e)}_onError(e){this._errorCallback?this._errorCallback(e):Ie(e)}_onProgress(e){this._progressCallback(e)}start(e){if(e===0)this._state===0&&(this._state=1,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._loadingMessageScheduler.cancel(),this._state===1&&this._firstWaitScheduler.cancel(),this._state===2&&(this._secondWaitScheduler.cancel(),this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null)),this._state===3&&this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null),this._state=0}}class p5{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}class XD{constructor(e,t,i){this.priority=e,this.owner=t,this.range=i,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */function Zxe(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}else return Array.from(n)}var Xxe=Object.hasOwnProperty,m5=Object.setPrototypeOf,Qxe=Object.isFrozen,Jxe=Object.getPrototypeOf,eDe=Object.getOwnPropertyDescriptor,is=Object.freeze,cl=Object.seal,tDe=Object.create,N$=typeof Reflect!="undefined"&&Reflect,oy=N$.apply,yT=N$.construct;oy||(oy=function(e,t,i){return e.apply(t,i)});is||(is=function(e){return e});cl||(cl=function(e){return e});yT||(yT=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(Zxe(t))))});var iDe=ho(Array.prototype.forEach),_5=ho(Array.prototype.pop),yp=ho(Array.prototype.push),Jc=ho(String.prototype.toLowerCase),b5=ho(String.prototype.match),Sl=ho(String.prototype.replace),nDe=ho(String.prototype.indexOf),sDe=ho(String.prototype.trim),La=ho(RegExp.prototype.test),v5=rDe(TypeError);function ho(n){return function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return oy(n,e,i)}}function rDe(n){return function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return yT(n,t)}}function it(n,e){m5&&m5(n,null);for(var t=e.length;t--;){var i=e[t];if(typeof i=="string"){var s=Jc(i);s!==i&&(Qxe(e)||(e[t]=s),i=s)}n[i]=!0}return n}function Zc(n){var e=tDe(null),t=void 0;for(t in n)oy(Xxe,n,[t])&&(e[t]=n[t]);return e}function fv(n,e){for(;n!==null;){var t=eDe(n,e);if(t){if(t.get)return ho(t.get);if(typeof t.value=="function")return ho(t.value)}n=Jxe(n)}function i(s){return console.warn("fallback value for",s),null}return i}var w5=is(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),QD=is(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),JD=is(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),oDe=is(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),eL=is(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),aDe=is(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),C5=is(["#text"]),y5=is(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),tL=is(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),S5=is(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),gv=is(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),lDe=cl(/\{\{[\s\S]*|[\s\S]*\}\}/gm),cDe=cl(/<%[\s\S]*|[\s\S]*%>/gm),hDe=cl(/^data-[\-\w.\u00B7-\uFFFF]/),uDe=cl(/^aria-[\-\w]+$/),dDe=cl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),fDe=cl(/^(?:\w+script|data):/i),gDe=cl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function Do(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}else return Array.from(n)}var pDe=function(){return typeof window=="undefined"?null:window},mDe=function(e,t){if((typeof e=="undefined"?"undefined":Vp(e))!=="object"||typeof e.createPolicy!="function")return null;var i=null,s="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(s)&&(i=t.currentScript.getAttribute(s));var r="dompurify"+(i?"#"+i:"");try{return e.createPolicy(r,{createHTML:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function A$(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pDe(),e=function(L){return A$(L)};if(e.version="2.3.1",e.removed=[],!n||!n.document||n.document.nodeType!==9)return e.isSupported=!1,e;var t=n.document,i=n.document,s=n.DocumentFragment,r=n.HTMLTemplateElement,o=n.Node,a=n.Element,l=n.NodeFilter,c=n.NamedNodeMap,h=c===void 0?n.NamedNodeMap||n.MozNamedAttrMap:c,u=n.Text,d=n.Comment,f=n.DOMParser,g=n.trustedTypes,p=a.prototype,_=fv(p,"cloneNode"),v=fv(p,"nextSibling"),b=fv(p,"childNodes"),w=fv(p,"parentNode");if(typeof r=="function"){var C=i.createElement("template");C.content&&C.content.ownerDocument&&(i=C.content.ownerDocument)}var y=mDe(g,t),D=y&&vo?y.createHTML(""):"",S=i,x=S.implementation,k=S.createNodeIterator,F=S.createDocumentFragment,A=S.getElementsByTagName,z=t.importNode,H={};try{H=Zc(i).documentMode?i.documentMode:{}}catch{}var te={};e.isSupported=typeof w=="function"&&x&&typeof x.createHTMLDocument!="undefined"&&H!==9;var ie=lDe,ae=cDe,_e=hDe,me=uDe,fe=fDe,Dt=gDe,ct=dDe,mt=null,Et=it({},[].concat(Do(w5),Do(QD),Do(JD),Do(eL),Do(C5))),tt=null,dn=it({},[].concat(Do(y5),Do(tL),Do(S5),Do(gv))),Qs=null,Ir=null,Es=!0,re=!0,We=!1,ce=!1,U=!1,Li=!1,wt=!1,_i=!1,di=!1,Dn=!0,vo=!1,ib=!0,Zu=!0,Fc=!1,gl={},ba=null,Pc=it({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),jg=null,qg=it({},["audio","video","img","source","image","track"]),Xu=null,nb=it({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Kg="http://www.w3.org/1998/Math/MathML",Gg="http://www.w3.org/2000/svg",wo="http://www.w3.org/1999/xhtml",Qu=wo,Yg=!1,Js=null,Bc=i.createElement("form"),Ju=function(L){Js&&Js===L||((!L||(typeof L=="undefined"?"undefined":Vp(L))!=="object")&&(L={}),L=Zc(L),mt="ALLOWED_TAGS"in L?it({},L.ALLOWED_TAGS):Et,tt="ALLOWED_ATTR"in L?it({},L.ALLOWED_ATTR):dn,Xu="ADD_URI_SAFE_ATTR"in L?it(Zc(nb),L.ADD_URI_SAFE_ATTR):nb,jg="ADD_DATA_URI_TAGS"in L?it(Zc(qg),L.ADD_DATA_URI_TAGS):qg,ba="FORBID_CONTENTS"in L?it({},L.FORBID_CONTENTS):Pc,Qs="FORBID_TAGS"in L?it({},L.FORBID_TAGS):{},Ir="FORBID_ATTR"in L?it({},L.FORBID_ATTR):{},gl="USE_PROFILES"in L?L.USE_PROFILES:!1,Es=L.ALLOW_ARIA_ATTR!==!1,re=L.ALLOW_DATA_ATTR!==!1,We=L.ALLOW_UNKNOWN_PROTOCOLS||!1,ce=L.SAFE_FOR_TEMPLATES||!1,U=L.WHOLE_DOCUMENT||!1,_i=L.RETURN_DOM||!1,di=L.RETURN_DOM_FRAGMENT||!1,Dn=L.RETURN_DOM_IMPORT!==!1,vo=L.RETURN_TRUSTED_TYPE||!1,wt=L.FORCE_BODY||!1,ib=L.SANITIZE_DOM!==!1,Zu=L.KEEP_CONTENT!==!1,Fc=L.IN_PLACE||!1,ct=L.ALLOWED_URI_REGEXP||ct,Qu=L.NAMESPACE||wo,ce&&(re=!1),di&&(_i=!0),gl&&(mt=it({},[].concat(Do(C5))),tt=[],gl.html===!0&&(it(mt,w5),it(tt,y5)),gl.svg===!0&&(it(mt,QD),it(tt,tL),it(tt,gv)),gl.svgFilters===!0&&(it(mt,JD),it(tt,tL),it(tt,gv)),gl.mathMl===!0&&(it(mt,eL),it(tt,S5),it(tt,gv))),L.ADD_TAGS&&(mt===Et&&(mt=Zc(mt)),it(mt,L.ADD_TAGS)),L.ADD_ATTR&&(tt===dn&&(tt=Zc(tt)),it(tt,L.ADD_ATTR)),L.ADD_URI_SAFE_ATTR&&it(Xu,L.ADD_URI_SAFE_ATTR),L.FORBID_CONTENTS&&(ba===Pc&&(ba=Zc(ba)),it(ba,L.FORBID_CONTENTS)),Zu&&(mt["#text"]=!0),U&&it(mt,["html","head","body"]),mt.table&&(it(mt,["tbody"]),delete Qs.tbody),is&&is(L),Js=L)},Zg=it({},["mi","mo","mn","ms","mtext"]),sb=it({},["foreignobject","desc","title","annotation-xml"]),ed=it({},QD);it(ed,JD),it(ed,oDe);var pl=it({},eL);it(pl,aDe);var rb=function(L){var O=w(L);(!O||!O.tagName)&&(O={namespaceURI:wo,tagName:"template"});var G=Jc(L.tagName),Z=Jc(O.tagName);if(L.namespaceURI===Gg)return O.namespaceURI===wo?G==="svg":O.namespaceURI===Kg?G==="svg"&&(Z==="annotation-xml"||Zg[Z]):Boolean(ed[G]);if(L.namespaceURI===Kg)return O.namespaceURI===wo?G==="math":O.namespaceURI===Gg?G==="math"&&sb[Z]:Boolean(pl[G]);if(L.namespaceURI===wo){if(O.namespaceURI===Gg&&!sb[Z]||O.namespaceURI===Kg&&!Zg[Z])return!1;var oe=it({},["title","style","font","a","script"]);return!pl[G]&&(oe[G]||!ed[G])}return!1},er=function(L){yp(e.removed,{element:L});try{L.parentNode.removeChild(L)}catch{try{L.outerHTML=D}catch{L.remove()}}},ob=function(L,O){try{yp(e.removed,{attribute:O.getAttributeNode(L),from:O})}catch{yp(e.removed,{attribute:null,from:O})}if(O.removeAttribute(L),L==="is"&&!tt[L])if(_i||di)try{er(O)}catch{}else try{O.setAttribute(L,"")}catch{}},ab=function(L){var O=void 0,G=void 0;if(wt)L="<remove></remove>"+L;else{var Z=b5(L,/^[\r\n\t ]+/);G=Z&&Z[0]}var oe=y?y.createHTML(L):L;if(Qu===wo)try{O=new f().parseFromString(oe,"text/html")}catch{}if(!O||!O.documentElement){O=x.createDocument(Qu,"template",null);try{O.documentElement.innerHTML=Yg?"":oe}catch{}}var Ce=O.body||O.documentElement;return L&&G&&Ce.insertBefore(i.createTextNode(G),Ce.childNodes[0]||null),Qu===wo?A.call(O,U?"html":"body")[0]:U?O.documentElement:Ce},lb=function(L){return k.call(L.ownerDocument||L,L,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},Ke=function(L){return L instanceof u||L instanceof d?!1:typeof L.nodeName!="string"||typeof L.textContent!="string"||typeof L.removeChild!="function"||!(L.attributes instanceof h)||typeof L.removeAttribute!="function"||typeof L.setAttribute!="function"||typeof L.namespaceURI!="string"||typeof L.insertBefore!="function"},Vc=function(L){return(typeof o=="undefined"?"undefined":Vp(o))==="object"?L instanceof o:L&&(typeof L=="undefined"?"undefined":Vp(L))==="object"&&typeof L.nodeType=="number"&&typeof L.nodeName=="string"},j=function(L,O,G){!te[L]||iDe(te[L],function(Z){Z.call(e,O,G,Js)})},W=function(L){var O=void 0;if(j("beforeSanitizeElements",L,null),Ke(L)||b5(L.nodeName,/[\u0080-\uFFFF]/))return er(L),!0;var G=Jc(L.nodeName);if(j("uponSanitizeElement",L,{tagName:G,allowedTags:mt}),!Vc(L.firstElementChild)&&(!Vc(L.content)||!Vc(L.content.firstElementChild))&&La(/<[/\w]/g,L.innerHTML)&&La(/<[/\w]/g,L.textContent)||G==="select"&&La(/<template/i,L.innerHTML))return er(L),!0;if(!mt[G]||Qs[G]){if(Zu&&!ba[G]){var Z=w(L)||L.parentNode,oe=b(L)||L.childNodes;if(oe&&Z)for(var Ce=oe.length,Ee=Ce-1;Ee>=0;--Ee)Z.insertBefore(_(oe[Ee],!0),v(L))}return er(L),!0}return L instanceof a&&!rb(L)||(G==="noscript"||G==="noembed")&&La(/<\/no(script|embed)/i,L.innerHTML)?(er(L),!0):(ce&&L.nodeType===3&&(O=L.textContent,O=Sl(O,ie," "),O=Sl(O,ae," "),L.textContent!==O&&(yp(e.removed,{element:L.cloneNode()}),L.textContent=O)),j("afterSanitizeElements",L,null),!1)},$=function(L,O,G){if(ib&&(O==="id"||O==="name")&&(G in i||G in Bc))return!1;if(!(re&&!Ir[O]&&La(_e,O))){if(!(Es&&La(me,O))){if(!tt[O]||Ir[O])return!1;if(!Xu[O]){if(!La(ct,Sl(G,Dt,""))){if(!((O==="src"||O==="xlink:href"||O==="href")&&L!=="script"&&nDe(G,"data:")===0&&jg[L])){if(!(We&&!La(fe,Sl(G,Dt,"")))){if(G)return!1}}}}}}return!0},E=function(L){var O=void 0,G=void 0,Z=void 0,oe=void 0;j("beforeSanitizeAttributes",L,null);var Ce=L.attributes;if(!!Ce){var Ee={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:tt};for(oe=Ce.length;oe--;){O=Ce[oe];var Ne=O,Pe=Ne.name,we=Ne.namespaceURI;if(G=sDe(O.value),Z=Jc(Pe),Ee.attrName=Z,Ee.attrValue=G,Ee.keepAttr=!0,Ee.forceKeepAttr=void 0,j("uponSanitizeAttribute",L,Ee),G=Ee.attrValue,!Ee.forceKeepAttr&&(ob(Pe,L),!!Ee.keepAttr)){if(La(/\/>/i,G)){ob(Pe,L);continue}ce&&(G=Sl(G,ie," "),G=Sl(G,ae," "));var ki=L.nodeName.toLowerCase();if(!!$(ki,Z,G))try{we?L.setAttributeNS(we,Pe,G):L.setAttribute(Pe,G),_5(e.removed)}catch{}}}j("afterSanitizeAttributes",L,null)}},T=function N(L){var O=void 0,G=lb(L);for(j("beforeSanitizeShadowDOM",L,null);O=G.nextNode();)j("uponSanitizeShadowNode",O,null),!W(O)&&(O.content instanceof s&&N(O.content),E(O));j("afterSanitizeShadowDOM",L,null)};return e.sanitize=function(N,L){var O=void 0,G=void 0,Z=void 0,oe=void 0,Ce=void 0;if(Yg=!N,Yg&&(N="<!-->"),typeof N!="string"&&!Vc(N)){if(typeof N.toString!="function")throw v5("toString is not a function");if(N=N.toString(),typeof N!="string")throw v5("dirty is not a string, aborting")}if(!e.isSupported){if(Vp(n.toStaticHTML)==="object"||typeof n.toStaticHTML=="function"){if(typeof N=="string")return n.toStaticHTML(N);if(Vc(N))return n.toStaticHTML(N.outerHTML)}return N}if(Li||Ju(L),e.removed=[],typeof N=="string"&&(Fc=!1),!Fc)if(N instanceof o)O=ab("<!---->"),G=O.ownerDocument.importNode(N,!0),G.nodeType===1&&G.nodeName==="BODY"||G.nodeName==="HTML"?O=G:O.appendChild(G);else{if(!_i&&!ce&&!U&&N.indexOf("<")===-1)return y&&vo?y.createHTML(N):N;if(O=ab(N),!O)return _i?null:D}O&&wt&&er(O.firstChild);for(var Ee=lb(Fc?N:O);Z=Ee.nextNode();)Z.nodeType===3&&Z===oe||W(Z)||(Z.content instanceof s&&T(Z.content),E(Z),oe=Z);if(oe=null,Fc)return N;if(_i){if(di)for(Ce=F.call(O.ownerDocument);O.firstChild;)Ce.appendChild(O.firstChild);else Ce=O;return Dn&&(Ce=z.call(t,Ce,!0)),Ce}var Ne=U?O.outerHTML:O.innerHTML;return ce&&(Ne=Sl(Ne,ie," "),Ne=Sl(Ne,ae," ")),y&&vo?y.createHTML(Ne):Ne},e.setConfig=function(N){Ju(N),Li=!0},e.clearConfig=function(){Js=null,Li=!1},e.isValidAttribute=function(N,L,O){Js||Ju({});var G=Jc(N),Z=Jc(L);return $(G,Z,O)},e.addHook=function(N,L){typeof L=="function"&&(te[N]=te[N]||[],yp(te[N],L))},e.removeHook=function(N){te[N]&&_5(te[N])},e.removeHooks=function(N){te[N]&&(te[N]=[])},e.removeAllHooks=function(){te={}},e}var ma=A$();ma.version;ma.isSupported;const _De=ma.sanitize;ma.setConfig;ma.clearConfig;ma.isValidAttribute;const x5=ma.addHook,D5=ma.removeHook;ma.removeHooks;ma.removeAllHooks;let _a;(function(){function n(e){_a=e()}n.amd=!0,function(e,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof n=="function"&&n.amd?n(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.marked=t())}(this,function(){function e(j,W){for(var $=0;$<W.length;$++){var E=W[$];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(j,E.key,E)}}function t(j,W,$){return W&&e(j.prototype,W),$&&e(j,$),j}function i(j,W){if(!!j){if(typeof j=="string")return s(j,W);var $=Object.prototype.toString.call(j).slice(8,-1);if($==="Object"&&j.constructor&&($=j.constructor.name),$==="Map"||$==="Set")return Array.from(j);if($==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($))return s(j,W)}}function s(j,W){(W==null||W>j.length)&&(W=j.length);for(var $=0,E=new Array(W);$<W;$++)E[$]=j[$];return E}function r(j,W){var $=typeof Symbol!="undefined"&&j[Symbol.iterator]||j["@@iterator"];if($)return($=$.call(j)).next.bind($);if(Array.isArray(j)||($=i(j))||W&&j&&typeof j.length=="number"){$&&(j=$);var E=0;return function(){return E>=j.length?{done:!0}:{done:!1,value:j[E++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o={exports:{}};function a(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function l(j){o.exports.defaults=j}o.exports={defaults:a(),getDefaults:a,changeDefaults:l};var c=/[&<>"']/,h=/[&<>"']/g,u=/[<>"']|&(?!#?\w+;)/,d=/[<>"']|&(?!#?\w+;)/g,f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=function(W){return f[W]};function p(j,W){if(W){if(c.test(j))return j.replace(h,g)}else if(u.test(j))return j.replace(d,g);return j}var _=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function v(j){return j.replace(_,function(W,$){return $=$.toLowerCase(),$==="colon"?":":$.charAt(0)==="#"?$.charAt(1)==="x"?String.fromCharCode(parseInt($.substring(2),16)):String.fromCharCode(+$.substring(1)):""})}var b=/(^|[^\[])\^/g;function w(j,W){j=j.source||j,W=W||"";var $={replace:function(T,N){return N=N.source||N,N=N.replace(b,"$1"),j=j.replace(T,N),$},getRegex:function(){return new RegExp(j,W)}};return $}var C=/[^\w:]/g,y=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function D(j,W,$){if(j){var E;try{E=decodeURIComponent(v($)).replace(C,"").toLowerCase()}catch{return null}if(E.indexOf("javascript:")===0||E.indexOf("vbscript:")===0||E.indexOf("data:")===0)return null}W&&!y.test($)&&($=A(W,$));try{$=encodeURI($).replace(/%25/g,"%")}catch{return null}return $}var S={},x=/^[^:]+:\/*[^/]*$/,k=/^([^:]+:)[\s\S]*$/,F=/^([^:]+:\/*[^/]*)[\s\S]*$/;function A(j,W){S[" "+j]||(x.test(j)?S[" "+j]=j+"/":S[" "+j]=ie(j,"/",!0)),j=S[" "+j];var $=j.indexOf(":")===-1;return W.substring(0,2)==="//"?$?W:j.replace(k,"$1")+W:W.charAt(0)==="/"?$?W:j.replace(F,"$1")+W:j+W}var z={exec:function(){}};function H(j){for(var W=1,$,E;W<arguments.length;W++){$=arguments[W];for(E in $)Object.prototype.hasOwnProperty.call($,E)&&(j[E]=$[E])}return j}function te(j,W){var $=j.replace(/\|/g,function(N,L,O){for(var G=!1,Z=L;--Z>=0&&O[Z]==="\\";)G=!G;return G?"|":" |"}),E=$.split(/ \|/),T=0;if(E[0].trim()||E.shift(),E[E.length-1].trim()||E.pop(),E.length>W)E.splice(W);else for(;E.length<W;)E.push("");for(;T<E.length;T++)E[T]=E[T].trim().replace(/\\\|/g,"|");return E}function ie(j,W,$){var E=j.length;if(E===0)return"";for(var T=0;T<E;){var N=j.charAt(E-T-1);if(N===W&&!$)T++;else if(N!==W&&$)T++;else break}return j.substr(0,E-T)}function ae(j,W){if(j.indexOf(W[1])===-1)return-1;for(var $=j.length,E=0,T=0;T<$;T++)if(j[T]==="\\")T++;else if(j[T]===W[0])E++;else if(j[T]===W[1]&&(E--,E<0))return T;return-1}function _e(j){j&&j.sanitize&&!j.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function me(j,W){if(W<1)return"";for(var $="";W>1;)W&1&&($+=j),W>>=1,j+=j;return $+j}var fe={escape:p,unescape:v,edit:w,cleanUrl:D,resolveUrl:A,noopTest:z,merge:H,splitCells:te,rtrim:ie,findClosingBracket:ae,checkSanitizeDeprecation:_e,repeatString:me},Dt=o.exports.defaults,ct=fe.rtrim,mt=fe.splitCells,Et=fe.escape,tt=fe.findClosingBracket;function dn(j,W,$,E){var T=W.href,N=W.title?Et(W.title):null,L=j[1].replace(/\\([\[\]])/g,"$1");if(j[0].charAt(0)!=="!"){E.state.inLink=!0;var O={type:"link",raw:$,href:T,title:N,text:L,tokens:E.inlineTokens(L,[])};return E.state.inLink=!1,O}else return{type:"image",raw:$,href:T,title:N,text:Et(L)}}function Qs(j,W){var $=j.match(/^(\s+)(?:```)/);if($===null)return W;var E=$[1];return W.split(`
`).map(function(T){var N=T.match(/^\s+/);if(N===null)return T;var L=N[0];return L.length>=E.length?T.slice(E.length):T}).join(`
`)}var Ir=function(){function j($){this.options=$||Dt}var W=j.prototype;return W.space=function(E){var T=this.rules.block.newline.exec(E);if(T)return T[0].length>1?{type:"space",raw:T[0]}:{raw:`
`}},W.code=function(E){var T=this.rules.block.code.exec(E);if(T){var N=T[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:T[0],codeBlockStyle:"indented",text:this.options.pedantic?N:ct(N,`
`)}}},W.fences=function(E){var T=this.rules.block.fences.exec(E);if(T){var N=T[0],L=Qs(N,T[3]||"");return{type:"code",raw:N,lang:T[2]?T[2].trim():T[2],text:L}}},W.heading=function(E){var T=this.rules.block.heading.exec(E);if(T){var N=T[2].trim();if(/#$/.test(N)){var L=ct(N,"#");(this.options.pedantic||!L||/ $/.test(L))&&(N=L.trim())}var O={type:"heading",raw:T[0],depth:T[1].length,text:N,tokens:[]};return this.lexer.inline(O.text,O.tokens),O}},W.hr=function(E){var T=this.rules.block.hr.exec(E);if(T)return{type:"hr",raw:T[0]}},W.blockquote=function(E){var T=this.rules.block.blockquote.exec(E);if(T){var N=T[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:T[0],tokens:this.lexer.blockTokens(N,[]),text:N}}},W.list=function(E){var T=this.rules.block.list.exec(E);if(T){var N,L,O,G,Z,oe,Ce,Ee,Ne,Pe,we=T[1].trim(),ki=we.length>1,nt={type:"list",raw:"",ordered:ki,start:ki?+we.slice(0,-1):"",loose:!1,items:[]};we=ki?"\\d{1,9}\\"+we.slice(-1):"\\"+we,this.options.pedantic&&(we=ki?we:"[*+-]");for(var jn=new RegExp("^( {0,3}"+we+")((?: [^\\n]*| *)(?:\\n[^\\n]*)*(?:\\n|$))");E&&!(this.rules.block.hr.test(E)||!(T=jn.exec(E)));){Ne=T[2].split(`
`),this.options.pedantic?(G=2,Pe=Ne[0].trimLeft()):(G=T[2].search(/[^ ]/),G=T[1].length+(G>4?1:G),Pe=Ne[0].slice(G-T[1].length)),oe=!1,N=T[0],!Ne[0]&&/^ *$/.test(Ne[1])&&(N=T[1]+Ne.slice(0,2).join(`
`)+`
`,nt.loose=!0,Ne=[]);var td=new RegExp("^ {0,"+Math.min(3,G-1)+"}(?:[*+-]|\\d{1,9}[.)])");for(Z=1;Z<Ne.length;Z++){if(Ee=Ne[Z],this.options.pedantic&&(Ee=Ee.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),td.test(Ee)){N=T[1]+Ne.slice(0,Z).join(`
`)+`
`;break}if(!oe){Ee.trim()||(oe=!0),Ee.search(/[^ ]/)>=G?Pe+=`
`+Ee.slice(G):Pe+=`
`+Ee;continue}if(Ee.search(/[^ ]/)>=G||!Ee.trim()){Pe+=`
`+Ee.slice(G);continue}else{N=T[1]+Ne.slice(0,Z).join(`
`)+`
`;break}}nt.loose||(Ce?nt.loose=!0:/\n *\n *$/.test(N)&&(Ce=!0)),this.options.gfm&&(L=/^\[[ xX]\] /.exec(Pe),L&&(O=L[0]!=="[ ] ",Pe=Pe.replace(/^\[[ xX]\] +/,""))),nt.items.push({type:"list_item",raw:N,task:!!L,checked:O,loose:!1,text:Pe}),nt.raw+=N,E=E.slice(N.length)}nt.items[nt.items.length-1].raw=N.trimRight(),nt.items[nt.items.length-1].text=Pe.trimRight(),nt.raw=nt.raw.trimRight();var fn=nt.items.length;for(Z=0;Z<fn;Z++)this.lexer.state.top=!1,nt.items[Z].tokens=this.lexer.blockTokens(nt.items[Z].text,[]),nt.items[Z].tokens.some(function(Xg){return Xg.type==="space"})&&(nt.loose=!0,nt.items[Z].loose=!0);return nt}},W.html=function(E){var T=this.rules.block.html.exec(E);if(T){var N={type:"html",raw:T[0],pre:!this.options.sanitizer&&(T[1]==="pre"||T[1]==="script"||T[1]==="style"),text:T[0]};return this.options.sanitize&&(N.type="paragraph",N.text=this.options.sanitizer?this.options.sanitizer(T[0]):Et(T[0]),N.tokens=[],this.lexer.inline(N.text,N.tokens)),N}},W.def=function(E){var T=this.rules.block.def.exec(E);if(T){T[3]&&(T[3]=T[3].substring(1,T[3].length-1));var N=T[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:N,raw:T[0],href:T[2],title:T[3]}}},W.table=function(E){var T=this.rules.block.table.exec(E);if(T){var N={type:"table",header:mt(T[1]).map(function(Ce){return{text:Ce}}),align:T[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:T[3]?T[3].replace(/\n$/,"").split(`
`):[]};if(N.header.length===N.align.length){N.raw=T[0];var L=N.align.length,O,G,Z,oe;for(O=0;O<L;O++)/^ *-+: *$/.test(N.align[O])?N.align[O]="right":/^ *:-+: *$/.test(N.align[O])?N.align[O]="center":/^ *:-+ *$/.test(N.align[O])?N.align[O]="left":N.align[O]=null;for(L=N.rows.length,O=0;O<L;O++)N.rows[O]=mt(N.rows[O],N.header.length).map(function(Ce){return{text:Ce}});for(L=N.header.length,G=0;G<L;G++)N.header[G].tokens=[],this.lexer.inlineTokens(N.header[G].text,N.header[G].tokens);for(L=N.rows.length,G=0;G<L;G++)for(oe=N.rows[G],Z=0;Z<oe.length;Z++)oe[Z].tokens=[],this.lexer.inlineTokens(oe[Z].text,oe[Z].tokens);return N}}},W.lheading=function(E){var T=this.rules.block.lheading.exec(E);if(T){var N={type:"heading",raw:T[0],depth:T[2].charAt(0)==="="?1:2,text:T[1],tokens:[]};return this.lexer.inline(N.text,N.tokens),N}},W.paragraph=function(E){var T=this.rules.block.paragraph.exec(E);if(T){var N={type:"paragraph",raw:T[0],text:T[1].charAt(T[1].length-1)===`
`?T[1].slice(0,-1):T[1],tokens:[]};return this.lexer.inline(N.text,N.tokens),N}},W.text=function(E){var T=this.rules.block.text.exec(E);if(T){var N={type:"text",raw:T[0],text:T[0],tokens:[]};return this.lexer.inline(N.text,N.tokens),N}},W.escape=function(E){var T=this.rules.inline.escape.exec(E);if(T)return{type:"escape",raw:T[0],text:Et(T[1])}},W.tag=function(E){var T=this.rules.inline.tag.exec(E);if(T)return!this.lexer.state.inLink&&/^<a /i.test(T[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(T[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(T[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(T[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:T[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(T[0]):Et(T[0]):T[0]}},W.link=function(E){var T=this.rules.inline.link.exec(E);if(T){var N=T[2].trim();if(!this.options.pedantic&&/^</.test(N)){if(!/>$/.test(N))return;var L=ct(N.slice(0,-1),"\\");if((N.length-L.length)%2===0)return}else{var O=tt(T[2],"()");if(O>-1){var G=T[0].indexOf("!")===0?5:4,Z=G+T[1].length+O;T[2]=T[2].substring(0,O),T[0]=T[0].substring(0,Z).trim(),T[3]=""}}var oe=T[2],Ce="";if(this.options.pedantic){var Ee=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(oe);Ee&&(oe=Ee[1],Ce=Ee[3])}else Ce=T[3]?T[3].slice(1,-1):"";return oe=oe.trim(),/^</.test(oe)&&(this.options.pedantic&&!/>$/.test(N)?oe=oe.slice(1):oe=oe.slice(1,-1)),dn(T,{href:oe&&oe.replace(this.rules.inline._escapes,"$1"),title:Ce&&Ce.replace(this.rules.inline._escapes,"$1")},T[0],this.lexer)}},W.reflink=function(E,T){var N;if((N=this.rules.inline.reflink.exec(E))||(N=this.rules.inline.nolink.exec(E))){var L=(N[2]||N[1]).replace(/\s+/g," ");if(L=T[L.toLowerCase()],!L||!L.href){var O=N[0].charAt(0);return{type:"text",raw:O,text:O}}return dn(N,L,N[0],this.lexer)}},W.emStrong=function(E,T,N){N===void 0&&(N="");var L=this.rules.inline.emStrong.lDelim.exec(E);if(!!L&&!(L[3]&&N.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var O=L[1]||L[2]||"";if(!O||O&&(N===""||this.rules.inline.punctuation.exec(N))){var G=L[0].length-1,Z,oe,Ce=G,Ee=0,Ne=L[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(Ne.lastIndex=0,T=T.slice(-1*E.length+G);(L=Ne.exec(T))!=null;)if(Z=L[1]||L[2]||L[3]||L[4]||L[5]||L[6],!!Z){if(oe=Z.length,L[3]||L[4]){Ce+=oe;continue}else if((L[5]||L[6])&&G%3&&!((G+oe)%3)){Ee+=oe;continue}if(Ce-=oe,!(Ce>0)){if(oe=Math.min(oe,oe+Ce+Ee),Math.min(G,oe)%2){var Pe=E.slice(1,G+L.index+oe);return{type:"em",raw:E.slice(0,G+L.index+oe+1),text:Pe,tokens:this.lexer.inlineTokens(Pe,[])}}var we=E.slice(2,G+L.index+oe-1);return{type:"strong",raw:E.slice(0,G+L.index+oe+1),text:we,tokens:this.lexer.inlineTokens(we,[])}}}}}},W.codespan=function(E){var T=this.rules.inline.code.exec(E);if(T){var N=T[2].replace(/\n/g," "),L=/[^ ]/.test(N),O=/^ /.test(N)&&/ $/.test(N);return L&&O&&(N=N.substring(1,N.length-1)),N=Et(N,!0),{type:"codespan",raw:T[0],text:N}}},W.br=function(E){var T=this.rules.inline.br.exec(E);if(T)return{type:"br",raw:T[0]}},W.del=function(E){var T=this.rules.inline.del.exec(E);if(T)return{type:"del",raw:T[0],text:T[2],tokens:this.lexer.inlineTokens(T[2],[])}},W.autolink=function(E,T){var N=this.rules.inline.autolink.exec(E);if(N){var L,O;return N[2]==="@"?(L=Et(this.options.mangle?T(N[1]):N[1]),O="mailto:"+L):(L=Et(N[1]),O=L),{type:"link",raw:N[0],text:L,href:O,tokens:[{type:"text",raw:L,text:L}]}}},W.url=function(E,T){var N;if(N=this.rules.inline.url.exec(E)){var L,O;if(N[2]==="@")L=Et(this.options.mangle?T(N[0]):N[0]),O="mailto:"+L;else{var G;do G=N[0],N[0]=this.rules.inline._backpedal.exec(N[0])[0];while(G!==N[0]);L=Et(N[0]),N[1]==="www."?O="http://"+L:O=L}return{type:"link",raw:N[0],text:L,href:O,tokens:[{type:"text",raw:L,text:L}]}}},W.inlineText=function(E,T){var N=this.rules.inline.text.exec(E);if(N){var L;return this.lexer.state.inRawBlock?L=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(N[0]):Et(N[0]):N[0]:L=Et(this.options.smartypants?T(N[0]):N[0]),{type:"text",raw:N[0],text:L}}},j}(),Es=fe.noopTest,re=fe.edit,We=fe.merge,ce={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:Es,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/};ce._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,ce._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,ce.def=re(ce.def).replace("label",ce._label).replace("title",ce._title).getRegex(),ce.bullet=/(?:[*+-]|\d{1,9}[.)])/,ce.listItemStart=re(/^( *)(bull) */).replace("bull",ce.bullet).getRegex(),ce.list=re(ce.list).replace(/bull/g,ce.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+ce.def.source+")").getRegex(),ce._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ce._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,ce.html=re(ce.html,"i").replace("comment",ce._comment).replace("tag",ce._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ce.paragraph=re(ce._paragraph).replace("hr",ce.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ce._tag).getRegex(),ce.blockquote=re(ce.blockquote).replace("paragraph",ce.paragraph).getRegex(),ce.normal=We({},ce),ce.gfm=We({},ce.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)\\|?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),ce.gfm.table=re(ce.gfm.table).replace("hr",ce.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ce._tag).getRegex(),ce.pedantic=We({},ce.normal,{html:re(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ce._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Es,paragraph:re(ce.normal._paragraph).replace("hr",ce.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ce.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var U={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Es,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Es,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};U._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",U.punctuation=re(U.punctuation).replace(/punctuation/g,U._punctuation).getRegex(),U.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,U.escapedEmSt=/\\\*|\\_/g,U._comment=re(ce._comment).replace("(?:-->|$)","-->").getRegex(),U.emStrong.lDelim=re(U.emStrong.lDelim).replace(/punct/g,U._punctuation).getRegex(),U.emStrong.rDelimAst=re(U.emStrong.rDelimAst,"g").replace(/punct/g,U._punctuation).getRegex(),U.emStrong.rDelimUnd=re(U.emStrong.rDelimUnd,"g").replace(/punct/g,U._punctuation).getRegex(),U._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,U._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,U._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,U.autolink=re(U.autolink).replace("scheme",U._scheme).replace("email",U._email).getRegex(),U._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,U.tag=re(U.tag).replace("comment",U._comment).replace("attribute",U._attribute).getRegex(),U._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,U._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,U._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,U.link=re(U.link).replace("label",U._label).replace("href",U._href).replace("title",U._title).getRegex(),U.reflink=re(U.reflink).replace("label",U._label).getRegex(),U.reflinkSearch=re(U.reflinkSearch,"g").replace("reflink",U.reflink).replace("nolink",U.nolink).getRegex(),U.normal=We({},U),U.pedantic=We({},U.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:re(/^!?\[(label)\]\((.*?)\)/).replace("label",U._label).getRegex(),reflink:re(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",U._label).getRegex()}),U.gfm=We({},U.normal,{escape:re(U.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),U.gfm.url=re(U.gfm.url,"i").replace("email",U.gfm._extended_email).getRegex(),U.breaks=We({},U.gfm,{br:re(U.br).replace("{2,}","*").getRegex(),text:re(U.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var Li={block:ce,inline:U},wt=Ir,_i=o.exports.defaults,di=Li.block,Dn=Li.inline,vo=fe.repeatString;function ib(j){return j.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function Zu(j){var W="",$,E,T=j.length;for($=0;$<T;$++)E=j.charCodeAt($),Math.random()>.5&&(E="x"+E.toString(16)),W+="&#"+E+";";return W}var Fc=function(){function j($){this.tokens=[],this.tokens.links=Object.create(null),this.options=$||_i,this.options.tokenizer=this.options.tokenizer||new wt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var E={block:di.normal,inline:Dn.normal};this.options.pedantic?(E.block=di.pedantic,E.inline=Dn.pedantic):this.options.gfm&&(E.block=di.gfm,this.options.breaks?E.inline=Dn.breaks:E.inline=Dn.gfm),this.tokenizer.rules=E}j.lex=function(E,T){var N=new j(T);return N.lex(E)},j.lexInline=function(E,T){var N=new j(T);return N.inlineTokens(E)};var W=j.prototype;return W.lex=function(E){E=E.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(E,this.tokens);for(var T;T=this.inlineQueue.shift();)this.inlineTokens(T.src,T.tokens);return this.tokens},W.blockTokens=function(E,T){var N=this;T===void 0&&(T=[]),this.options.pedantic&&(E=E.replace(/^ +$/gm,""));for(var L,O,G,Z;E;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Ce){return(L=Ce.call({lexer:N},E,T))?(E=E.substring(L.raw.length),T.push(L),!0):!1}))){if(L=this.tokenizer.space(E)){E=E.substring(L.raw.length),L.type&&T.push(L);continue}if(L=this.tokenizer.code(E)){E=E.substring(L.raw.length),O=T[T.length-1],O&&(O.type==="paragraph"||O.type==="text")?(O.raw+=`
`+L.raw,O.text+=`
`+L.text,this.inlineQueue[this.inlineQueue.length-1].src=O.text):T.push(L);continue}if(L=this.tokenizer.fences(E)){E=E.substring(L.raw.length),T.push(L);continue}if(L=this.tokenizer.heading(E)){E=E.substring(L.raw.length),T.push(L);continue}if(L=this.tokenizer.hr(E)){E=E.substring(L.raw.length),T.push(L);continue}if(L=this.tokenizer.blockquote(E)){E=E.substring(L.raw.length),T.push(L);continue}if(L=this.tokenizer.list(E)){E=E.substring(L.raw.length),T.push(L);continue}if(L=this.tokenizer.html(E)){E=E.substring(L.raw.length),T.push(L);continue}if(L=this.tokenizer.def(E)){E=E.substring(L.raw.length),O=T[T.length-1],O&&(O.type==="paragraph"||O.type==="text")?(O.raw+=`
`+L.raw,O.text+=`
`+L.raw,this.inlineQueue[this.inlineQueue.length-1].src=O.text):this.tokens.links[L.tag]||(this.tokens.links[L.tag]={href:L.href,title:L.title});continue}if(L=this.tokenizer.table(E)){E=E.substring(L.raw.length),T.push(L);continue}if(L=this.tokenizer.lheading(E)){E=E.substring(L.raw.length),T.push(L);continue}if(G=E,this.options.extensions&&this.options.extensions.startBlock&&function(){var Ce=1/0,Ee=E.slice(1),Ne=void 0;N.options.extensions.startBlock.forEach(function(Pe){Ne=Pe.call({lexer:this},Ee),typeof Ne=="number"&&Ne>=0&&(Ce=Math.min(Ce,Ne))}),Ce<1/0&&Ce>=0&&(G=E.substring(0,Ce+1))}(),this.state.top&&(L=this.tokenizer.paragraph(G))){O=T[T.length-1],Z&&O.type==="paragraph"?(O.raw+=`
`+L.raw,O.text+=`
`+L.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=O.text):T.push(L),Z=G.length!==E.length,E=E.substring(L.raw.length);continue}if(L=this.tokenizer.text(E)){E=E.substring(L.raw.length),O=T[T.length-1],O&&O.type==="text"?(O.raw+=`
`+L.raw,O.text+=`
`+L.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=O.text):T.push(L);continue}if(E){var oe="Infinite loop on byte: "+E.charCodeAt(0);if(this.options.silent){console.error(oe);break}else throw new Error(oe)}}return this.state.top=!0,T},W.inline=function(E,T){this.inlineQueue.push({src:E,tokens:T})},W.inlineTokens=function(E,T){var N=this;T===void 0&&(T=[]);var L,O,G,Z=E,oe,Ce,Ee;if(this.tokens.links){var Ne=Object.keys(this.tokens.links);if(Ne.length>0)for(;(oe=this.tokenizer.rules.inline.reflinkSearch.exec(Z))!=null;)Ne.includes(oe[0].slice(oe[0].lastIndexOf("[")+1,-1))&&(Z=Z.slice(0,oe.index)+"["+vo("a",oe[0].length-2)+"]"+Z.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(oe=this.tokenizer.rules.inline.blockSkip.exec(Z))!=null;)Z=Z.slice(0,oe.index)+"["+vo("a",oe[0].length-2)+"]"+Z.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(oe=this.tokenizer.rules.inline.escapedEmSt.exec(Z))!=null;)Z=Z.slice(0,oe.index)+"++"+Z.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;E;)if(Ce||(Ee=""),Ce=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(we){return(L=we.call({lexer:N},E,T))?(E=E.substring(L.raw.length),T.push(L),!0):!1}))){if(L=this.tokenizer.escape(E)){E=E.substring(L.raw.length),T.push(L);continue}if(L=this.tokenizer.tag(E)){E=E.substring(L.raw.length),O=T[T.length-1],O&&L.type==="text"&&O.type==="text"?(O.raw+=L.raw,O.text+=L.text):T.push(L);continue}if(L=this.tokenizer.link(E)){E=E.substring(L.raw.length),T.push(L);continue}if(L=this.tokenizer.reflink(E,this.tokens.links)){E=E.substring(L.raw.length),O=T[T.length-1],O&&L.type==="text"&&O.type==="text"?(O.raw+=L.raw,O.text+=L.text):T.push(L);continue}if(L=this.tokenizer.emStrong(E,Z,Ee)){E=E.substring(L.raw.length),T.push(L);continue}if(L=this.tokenizer.codespan(E)){E=E.substring(L.raw.length),T.push(L);continue}if(L=this.tokenizer.br(E)){E=E.substring(L.raw.length),T.push(L);continue}if(L=this.tokenizer.del(E)){E=E.substring(L.raw.length),T.push(L);continue}if(L=this.tokenizer.autolink(E,Zu)){E=E.substring(L.raw.length),T.push(L);continue}if(!this.state.inLink&&(L=this.tokenizer.url(E,Zu))){E=E.substring(L.raw.length),T.push(L);continue}if(G=E,this.options.extensions&&this.options.extensions.startInline&&function(){var we=1/0,ki=E.slice(1),nt=void 0;N.options.extensions.startInline.forEach(function(jn){nt=jn.call({lexer:this},ki),typeof nt=="number"&&nt>=0&&(we=Math.min(we,nt))}),we<1/0&&we>=0&&(G=E.substring(0,we+1))}(),L=this.tokenizer.inlineText(G,ib)){E=E.substring(L.raw.length),L.raw.slice(-1)!=="_"&&(Ee=L.raw.slice(-1)),Ce=!0,O=T[T.length-1],O&&O.type==="text"?(O.raw+=L.raw,O.text+=L.text):T.push(L);continue}if(E){var Pe="Infinite loop on byte: "+E.charCodeAt(0);if(this.options.silent){console.error(Pe);break}else throw new Error(Pe)}}return T},t(j,null,[{key:"rules",get:function(){return{block:di,inline:Dn}}}]),j}(),gl=o.exports.defaults,ba=fe.cleanUrl,Pc=fe.escape,jg=function(){function j($){this.options=$||gl}var W=j.prototype;return W.code=function(E,T,N){var L=(T||"").match(/\S*/)[0];if(this.options.highlight){var O=this.options.highlight(E,L);O!=null&&O!==E&&(N=!0,E=O)}return E=E.replace(/\n$/,"")+`
`,L?'<pre><code class="'+this.options.langPrefix+Pc(L,!0)+'">'+(N?E:Pc(E,!0))+`</code></pre>
`:"<pre><code>"+(N?E:Pc(E,!0))+`</code></pre>
`},W.blockquote=function(E){return`<blockquote>
`+E+`</blockquote>
`},W.html=function(E){return E},W.heading=function(E,T,N,L){return this.options.headerIds?"<h"+T+' id="'+this.options.headerPrefix+L.slug(N)+'">'+E+"</h"+T+`>
`:"<h"+T+">"+E+"</h"+T+`>
`},W.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},W.list=function(E,T,N){var L=T?"ol":"ul",O=T&&N!==1?' start="'+N+'"':"";return"<"+L+O+`>
`+E+"</"+L+`>
`},W.listitem=function(E){return"<li>"+E+`</li>
`},W.checkbox=function(E){return"<input "+(E?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},W.paragraph=function(E){return"<p>"+E+`</p>
`},W.table=function(E,T){return T&&(T="<tbody>"+T+"</tbody>"),`<table>
<thead>
`+E+`</thead>
`+T+`</table>
`},W.tablerow=function(E){return`<tr>
`+E+`</tr>
`},W.tablecell=function(E,T){var N=T.header?"th":"td",L=T.align?"<"+N+' align="'+T.align+'">':"<"+N+">";return L+E+"</"+N+`>
`},W.strong=function(E){return"<strong>"+E+"</strong>"},W.em=function(E){return"<em>"+E+"</em>"},W.codespan=function(E){return"<code>"+E+"</code>"},W.br=function(){return this.options.xhtml?"<br/>":"<br>"},W.del=function(E){return"<del>"+E+"</del>"},W.link=function(E,T,N){if(E=ba(this.options.sanitize,this.options.baseUrl,E),E===null)return N;var L='<a href="'+Pc(E)+'"';return T&&(L+=' title="'+T+'"'),L+=">"+N+"</a>",L},W.image=function(E,T,N){if(E=ba(this.options.sanitize,this.options.baseUrl,E),E===null)return N;var L='<img src="'+E+'" alt="'+N+'"';return T&&(L+=' title="'+T+'"'),L+=this.options.xhtml?"/>":">",L},W.text=function(E){return E},j}(),qg=function(){function j(){}var W=j.prototype;return W.strong=function(E){return E},W.em=function(E){return E},W.codespan=function(E){return E},W.del=function(E){return E},W.html=function(E){return E},W.text=function(E){return E},W.link=function(E,T,N){return""+N},W.image=function(E,T,N){return""+N},W.br=function(){return""},j}(),Xu=function(){function j(){this.seen={}}var W=j.prototype;return W.serialize=function(E){return E.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},W.getNextSafeSlug=function(E,T){var N=E,L=0;if(this.seen.hasOwnProperty(N)){L=this.seen[E];do L++,N=E+"-"+L;while(this.seen.hasOwnProperty(N))}return T||(this.seen[E]=L,this.seen[N]=0),N},W.slug=function(E,T){T===void 0&&(T={});var N=this.serialize(E);return this.getNextSafeSlug(N,T.dryrun)},j}(),nb=jg,Kg=qg,Gg=Xu,wo=o.exports.defaults,Qu=fe.unescape,Yg=function(){function j($){this.options=$||wo,this.options.renderer=this.options.renderer||new nb,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Kg,this.slugger=new Gg}j.parse=function(E,T){var N=new j(T);return N.parse(E)},j.parseInline=function(E,T){var N=new j(T);return N.parseInline(E)};var W=j.prototype;return W.parse=function(E,T){T===void 0&&(T=!0);var N="",L,O,G,Z,oe,Ce,Ee,Ne,Pe,we,ki,nt,jn,td,fn,Xg,UM,Qg,kS,jM=E.length;for(L=0;L<jM;L++){if(we=E[L],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[we.type]&&(kS=this.options.extensions.renderers[we.type].call({parser:this},we),kS!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(we.type))){N+=kS||"";continue}switch(we.type){case"space":continue;case"hr":{N+=this.renderer.hr();continue}case"heading":{N+=this.renderer.heading(this.parseInline(we.tokens),we.depth,Qu(this.parseInline(we.tokens,this.textRenderer)),this.slugger);continue}case"code":{N+=this.renderer.code(we.text,we.lang,we.escaped);continue}case"table":{for(Ne="",Ee="",Z=we.header.length,O=0;O<Z;O++)Ee+=this.renderer.tablecell(this.parseInline(we.header[O].tokens),{header:!0,align:we.align[O]});for(Ne+=this.renderer.tablerow(Ee),Pe="",Z=we.rows.length,O=0;O<Z;O++){for(Ce=we.rows[O],Ee="",oe=Ce.length,G=0;G<oe;G++)Ee+=this.renderer.tablecell(this.parseInline(Ce[G].tokens),{header:!1,align:we.align[G]});Pe+=this.renderer.tablerow(Ee)}N+=this.renderer.table(Ne,Pe);continue}case"blockquote":{Pe=this.parse(we.tokens),N+=this.renderer.blockquote(Pe);continue}case"list":{for(ki=we.ordered,nt=we.start,jn=we.loose,Z=we.items.length,Pe="",O=0;O<Z;O++)fn=we.items[O],Xg=fn.checked,UM=fn.task,td="",fn.task&&(Qg=this.renderer.checkbox(Xg),jn?fn.tokens.length>0&&fn.tokens[0].type==="paragraph"?(fn.tokens[0].text=Qg+" "+fn.tokens[0].text,fn.tokens[0].tokens&&fn.tokens[0].tokens.length>0&&fn.tokens[0].tokens[0].type==="text"&&(fn.tokens[0].tokens[0].text=Qg+" "+fn.tokens[0].tokens[0].text)):fn.tokens.unshift({type:"text",text:Qg}):td+=Qg),td+=this.parse(fn.tokens,jn),Pe+=this.renderer.listitem(td,UM,Xg);N+=this.renderer.list(Pe,ki,nt);continue}case"html":{N+=this.renderer.html(we.text);continue}case"paragraph":{N+=this.renderer.paragraph(this.parseInline(we.tokens));continue}case"text":{for(Pe=we.tokens?this.parseInline(we.tokens):we.text;L+1<jM&&E[L+1].type==="text";)we=E[++L],Pe+=`
`+(we.tokens?this.parseInline(we.tokens):we.text);N+=T?this.renderer.paragraph(Pe):Pe;continue}default:{var qM='Token with "'+we.type+'" type was not found.';if(this.options.silent){console.error(qM);return}else throw new Error(qM)}}}return N},W.parseInline=function(E,T){T=T||this.renderer;var N="",L,O,G,Z=E.length;for(L=0;L<Z;L++){if(O=E[L],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[O.type]&&(G=this.options.extensions.renderers[O.type].call({parser:this},O),G!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(O.type))){N+=G||"";continue}switch(O.type){case"escape":{N+=T.text(O.text);break}case"html":{N+=T.html(O.text);break}case"link":{N+=T.link(O.href,O.title,this.parseInline(O.tokens,T));break}case"image":{N+=T.image(O.href,O.title,O.text);break}case"strong":{N+=T.strong(this.parseInline(O.tokens,T));break}case"em":{N+=T.em(this.parseInline(O.tokens,T));break}case"codespan":{N+=T.codespan(O.text);break}case"br":{N+=T.br();break}case"del":{N+=T.del(this.parseInline(O.tokens,T));break}case"text":{N+=T.text(O.text);break}default:{var oe='Token with "'+O.type+'" type was not found.';if(this.options.silent){console.error(oe);return}else throw new Error(oe)}}}return N},j}(),Js=Fc,Bc=Yg,Ju=Ir,Zg=jg,sb=qg,ed=Xu,pl=fe.merge,rb=fe.checkSanitizeDeprecation,er=fe.escape,ob=o.exports.getDefaults,ab=o.exports.changeDefaults,lb=o.exports.defaults;function Ke(j,W,$){if(typeof j=="undefined"||j===null)throw new Error("marked(): input parameter is undefined or null");if(typeof j!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(j)+", string expected");if(typeof W=="function"&&($=W,W=null),W=pl({},Ke.defaults,W||{}),rb(W),$){var E=W.highlight,T;try{T=Js.lex(j,W)}catch(G){return $(G)}var N=function(Z){var oe;if(!Z)try{W.walkTokens&&Ke.walkTokens(T,W.walkTokens),oe=Bc.parse(T,W)}catch(Ce){Z=Ce}return W.highlight=E,Z?$(Z):$(null,oe)};if(!E||E.length<3||(delete W.highlight,!T.length))return N();var L=0;Ke.walkTokens(T,function(G){G.type==="code"&&(L++,setTimeout(function(){E(G.text,G.lang,function(Z,oe){if(Z)return N(Z);oe!=null&&oe!==G.text&&(G.text=oe,G.escaped=!0),L--,L===0&&N()})},0))}),L===0&&N();return}try{var O=Js.lex(j,W);return W.walkTokens&&Ke.walkTokens(O,W.walkTokens),Bc.parse(O,W)}catch(G){if(G.message+=`
Please report this to https://github.com/markedjs/marked.`,W.silent)return"<p>An error occurred:</p><pre>"+er(G.message+"",!0)+"</pre>";throw G}}Ke.options=Ke.setOptions=function(j){return pl(Ke.defaults,j),ab(Ke.defaults),Ke},Ke.getDefaults=ob,Ke.defaults=lb,Ke.use=function(){for(var j=this,W=arguments.length,$=new Array(W),E=0;E<W;E++)$[E]=arguments[E];var T=pl.apply(void 0,[{}].concat($)),N=Ke.defaults.extensions||{renderers:{},childTokens:{}},L;$.forEach(function(O){if(O.extensions&&(L=!0,O.extensions.forEach(function(Z){if(!Z.name)throw new Error("extension name required");if(Z.renderer){var oe=N.renderers?N.renderers[Z.name]:null;oe?N.renderers[Z.name]=function(){for(var Ce=arguments.length,Ee=new Array(Ce),Ne=0;Ne<Ce;Ne++)Ee[Ne]=arguments[Ne];var Pe=Z.renderer.apply(this,Ee);return Pe===!1&&(Pe=oe.apply(this,Ee)),Pe}:N.renderers[Z.name]=Z.renderer}if(Z.tokenizer){if(!Z.level||Z.level!=="block"&&Z.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");N[Z.level]?N[Z.level].unshift(Z.tokenizer):N[Z.level]=[Z.tokenizer],Z.start&&(Z.level==="block"?N.startBlock?N.startBlock.push(Z.start):N.startBlock=[Z.start]:Z.level==="inline"&&(N.startInline?N.startInline.push(Z.start):N.startInline=[Z.start]))}Z.childTokens&&(N.childTokens[Z.name]=Z.childTokens)})),O.renderer&&function(){var Z=Ke.defaults.renderer||new Zg,oe=function(Ne){var Pe=Z[Ne];Z[Ne]=function(){for(var we=arguments.length,ki=new Array(we),nt=0;nt<we;nt++)ki[nt]=arguments[nt];var jn=O.renderer[Ne].apply(Z,ki);return jn===!1&&(jn=Pe.apply(Z,ki)),jn}};for(var Ce in O.renderer)oe(Ce);T.renderer=Z}(),O.tokenizer&&function(){var Z=Ke.defaults.tokenizer||new Ju,oe=function(Ne){var Pe=Z[Ne];Z[Ne]=function(){for(var we=arguments.length,ki=new Array(we),nt=0;nt<we;nt++)ki[nt]=arguments[nt];var jn=O.tokenizer[Ne].apply(Z,ki);return jn===!1&&(jn=Pe.apply(Z,ki)),jn}};for(var Ce in O.tokenizer)oe(Ce);T.tokenizer=Z}(),O.walkTokens){var G=Ke.defaults.walkTokens;T.walkTokens=function(Z){O.walkTokens.call(j,Z),G&&G(Z)}}L&&(T.extensions=N),Ke.setOptions(T)})},Ke.walkTokens=function(j,W){for(var $=function(){var L=T.value;switch(W(L),L.type){case"table":{for(var O=r(L.header),G;!(G=O()).done;){var Z=G.value;Ke.walkTokens(Z.tokens,W)}for(var oe=r(L.rows),Ce;!(Ce=oe()).done;)for(var Ee=Ce.value,Ne=r(Ee),Pe;!(Pe=Ne()).done;){var we=Pe.value;Ke.walkTokens(we.tokens,W)}break}case"list":{Ke.walkTokens(L.items,W);break}default:Ke.defaults.extensions&&Ke.defaults.extensions.childTokens&&Ke.defaults.extensions.childTokens[L.type]?Ke.defaults.extensions.childTokens[L.type].forEach(function(ki){Ke.walkTokens(L[ki],W)}):L.tokens&&Ke.walkTokens(L.tokens,W)}},E=r(j),T;!(T=E()).done;)$()},Ke.parseInline=function(j,W){if(typeof j=="undefined"||j===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof j!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(j)+", string expected");W=pl({},Ke.defaults,W||{}),rb(W);try{var $=Js.lexInline(j,W);return W.walkTokens&&Ke.walkTokens($,W.walkTokens),Bc.parseInline($,W)}catch(E){if(E.message+=`
Please report this to https://github.com/markedjs/marked.`,W.silent)return"<p>An error occurred:</p><pre>"+er(E.message+"",!0)+"</pre>";throw E}},Ke.Parser=Bc,Ke.parser=Bc.parse,Ke.Renderer=Zg,Ke.TextRenderer=sb,Ke.Lexer=Js,Ke.lexer=Js.lex,Ke.Tokenizer=Ju,Ke.Slugger=ed,Ke.parse=Ke;var Vc=Ke;return Vc})})();_a.Parser;_a.parser;var bDe=_a.Renderer;_a.TextRenderer;_a.Lexer;_a.lexer;_a.Tokenizer;_a.Slugger;var vDe=_a.parse;function wDe(n,e={},t={}){var i;const s=new ee;let r=!1;const o=s.add(new go),a=CM(e),l=function(p){let _;try{_=vE(decodeURIComponent(p))}catch{}return _?(_=Dle(_,v=>{if(n.uris&&n.uris[v])return xe.revive(n.uris[v])}),encodeURIComponent(JSON.stringify(_))):p},c=function(p,_){const v=n.uris&&n.uris[p];if(!v)return p;let b=xe.revive(v);return _?p.startsWith(Ve.data+":")?p:V9.asBrowserUri(b).toString(!0):xe.parse(p).toString()===b.toString()?p:(b.query&&(b=b.with({query:l(b.query)})),b.toString())};let h;const u=new Promise(p=>h=p),d=new bDe;if(d.image=(p,_,v)=>{let b=[],w=[];if(p){({href:p,dimensions:b}=Kwe(p)),p=c(p,!0);try{const C=xe.parse(p);e.baseUrl&&C.scheme===Ve.file&&(p=AF(e.baseUrl,p).toString())}catch{}w.push(`src="${p}"`)}return v&&w.push(`alt="${v}"`),_&&w.push(`title="${_}"`),b.length&&(w=w.concat(b)),"<img "+w.join(" ")+">"},d.link=(p,_,v)=>(p===v&&(v=PD(v)),p=c(p,!1),e.baseUrl&&(/^\w[\w\d+.-]*:/.test(p)||(p=AF(e.baseUrl,p).toString())),_=PD(_),p=PD(p),!p||p.match(/^data:|javascript:/i)||p.match(/^command:/i)&&!n.isTrusted||p.match(/^command:(\/\/\/)?_workbench\.downloadResource/i)?v:(p=p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="#" data-href="${p}" title="${_||p}">${v}</a>`)),d.paragraph=p=>`<p>${p}</p>`,e.codeBlockRenderer&&(d.code=(p,_)=>{const v=e.codeBlockRenderer(_,p),b=bH.nextId();return P9(Promise.all([v,u]),o.token).then(w=>{var C;if(!r&&w){const y=a.querySelector(`div[data-code="${b}"]`);y&&R0(y,w[0]),(C=e.asyncRenderCallback)===null||C===void 0||C.call(e)}}).catch(()=>{}),`<div class="code" data-code="${b}">${FA(p)}</div>`}),e.actionHandler){const p=e.actionHandler.disposables.add(new ft(a,"click")),_=e.actionHandler.disposables.add(new ft(a,"auxclick"));e.actionHandler.disposables.add(ue.any(p.event,_.event)(v=>{const b=new Vs(v);if(!b.leftButton&&!b.middleButton)return;let w=b.target;if(!(w.tagName!=="A"&&(w=w.parentElement,!w||w.tagName!=="A")))try{const C=w.dataset.href;C&&e.actionHandler.callback(C,b)}catch(C){Ie(C)}finally{b.preventDefault()}}))}n.supportHtml||(t.sanitizer=p=>(n.isTrusted?p.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?p:"",t.sanitize=!0,t.silent=!0),t.renderer=d;let f=(i=n.value)!==null&&i!==void 0?i:"";f.length>1e5&&(f=`${f.substr(0,1e5)}\u2026`),n.supportThemeIcons&&(f=Zbe(f));let g=vDe(f,t);if(n.supportThemeIcons&&(g=wf(g).map(_=>typeof _=="string"?_:_.outerHTML).join("")),a.innerHTML=CDe(n,g),h(),e.asyncRenderCallback)for(const p of a.getElementsByTagName("img")){const _=s.add(K(p,"load",()=>{_.dispose(),e.asyncRenderCallback()}))}return{element:a,dispose:()=>{r=!0,o.cancel(),s.dispose()}}}function CDe(n,e){const{config:t,allowedSchemes:i}=yDe(n);x5("uponSanitizeAttribute",(r,o)=>{if(o.attrName==="style"||o.attrName==="class"){if(r.tagName==="SPAN"){if(o.attrName==="style"){o.keepAttr=/^(color\:#[0-9a-fA-F]+;)?(background-color\:#[0-9a-fA-F]+;)?$/.test(o.attrValue);return}else if(o.attrName==="class"){o.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(o.attrValue);return}}o.keepAttr=!1;return}});const s=document.createElement("a");x5("afterSanitizeAttributes",r=>{for(const o of["href","src"])r.hasAttribute(o)&&(s.href=r.getAttribute(o),i.includes(s.protocol.replace(/:$/,""))||r.removeAttribute(o))});try{return _De(e,Object.assign(Object.assign({},t),{RETURN_TRUSTED_TYPE:!0}))}finally{D5("uponSanitizeAttribute"),D5("afterSanitizeAttributes")}}function yDe(n){const e=[Ve.http,Ve.https,Ve.mailto,Ve.data,Ve.file,Ve.vscodeFileResource,Ve.vscodeRemote,Ve.vscodeRemoteResource];return n.isTrusted&&e.push(Ve.command),{config:{ALLOWED_TAGS:["ul","li","p","b","i","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"],ALLOWED_ATTR:["href","data-href","target","title","src","alt","class","style","data-code","width","height","align"],ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}var SDe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},L5=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},xDe=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})},iL;let xu=class M${constructor(e,t,i){this._options=e,this._modeService=t,this._openerService=i,this._onDidRenderAsync=new R,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const s=new ee;return{element:s.add(wDe(e,Object.assign(Object.assign({},this._getRenderOptions(e,s)),t),i)).element,dispose:()=>s.dispose()}}_getRenderOptions(e,t){return{baseUrl:this._options.baseUrl,codeBlockRenderer:(i,s)=>xDe(this,void 0,void 0,function*(){var r,o,a,l;let c;i?c=this._modeService.getModeIdForLanguageName(i):this._options.editor&&(c=(r=this._options.editor.getModel())===null||r===void 0?void 0:r.getLanguageId()),c||(c="plaintext"),this._modeService.triggerMode(c);const h=(o=yield Zt.getPromise(c))!==null&&o!==void 0?o:void 0,u=document.createElement("span");if(u.innerHTML=(l=(a=M$._ttpTokenizer)===null||a===void 0?void 0:a.createHTML(s,this._modeService.languageIdCodec,h))!==null&&l!==void 0?l:vz(s,this._modeService.languageIdCodec,h),this._options.editor){const d=this._options.editor.getOption(43);Qi.applyFontInfoSlow(u,d)}else this._options.codeBlockFontFamily&&(u.style.fontFamily=this._options.codeBlockFontFamily);return u}),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:i=>this._openerService.open(i,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:e.isTrusted}).catch(Ie),disposables:t}}}};xu._ttpTokenizer=(iL=window.trustedTypes)===null||iL===void 0?void 0:iL.createPolicy("tokenizeToString",{createHTML(n,e,t){return vz(n,e,t)}});xu=SDe([L5(1,Hn),L5(2,uc)],xu);function R$(n,e,t){const s=o_.ordered(n).map(r=>Promise.resolve(r.provideHover(n,e,t)).then(o=>o&&DDe(o)?o:void 0,o=>{kr(o)}));return Promise.all(s).then(v1)}Ag("_executeHoverProvider",(n,e)=>R$(n,e,Lt.None));function DDe(n){const e=typeof n.range!="undefined",t=typeof n.contents!="undefined"&&n.contents&&n.contents.length>0;return e&&t}var LDe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},nL=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},kDe=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const k5=J;class pv{constructor(e,t,i){this.owner=e,this.range=t,this.contents=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let ST=class{constructor(e,t,i,s,r){this._editor=e,this._hover=t,this._modeService=i,this._openerService=s,this._configurationService=r}createLoadingMessage(e){return new pv(this,e.range,[new ig().appendText(m("modesContentHover.loading","Loading..."))])}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const i=this._editor.getModel(),s=e.range.startLineNumber,r=i.getLineMaxColumn(s),o=[];for(const h of t){const u=h.range.startLineNumber===s?h.range.startColumn:1,d=h.range.endLineNumber===s?h.range.endColumn:r,f=h.options.hoverMessage;if(!f||xm(f))continue;const g=new I(e.range.startLineNumber,u,e.range.startLineNumber,d);o.push(new pv(this,g,BV(f)))}const a=i.getLineLength(s),l=i.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),c=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:l});return typeof c=="number"&&a>=c&&o.push(new pv(this,e.range,[{value:m("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}])),o}computeAsync(e,t,i){return kDe(this,void 0,void 0,function*(){if(!this._editor.hasModel()||e.type!==1)return Promise.resolve([]);const s=this._editor.getModel();if(!o_.has(s))return Promise.resolve([]);const r=yield R$(s,new P(e.range.startLineNumber,e.range.startColumn),i),o=[];for(const a of r){if(xm(a.contents))continue;const l=a.range?I.lift(a.range):e.range;o.push(new pv(this,l,a.contents))}return o})}renderHoverParts(e,t,i){const s=new ee;for(const r of e)for(const o of r.contents){if(xm(o))continue;const a=k5("div.hover-row.markdown-hover"),l=Y(a,k5("div.hover-contents")),c=s.add(new xu({editor:this._editor},this._modeService,this._openerService));s.add(c.onDidRenderAsync(()=>{l.className="hover-contents code-hover-contents",this._hover.onContentsChanged()}));const h=s.add(c.render(o));l.appendChild(h.element),t.appendChild(a)}return s}};ST=LDe([nL(2,Hn),nL(3,uc),nL(4,si)],ST);class at{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+at.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new at(this.value+at.sep+e)}}at.sep=".";at.None=new at("@@none@@");at.Empty=new at("");at.QuickFix=new at("quickfix");at.Refactor=new at("refactor");at.Source=new at("source");at.SourceOrganizeImports=at.Source.append("organizeImports");at.SourceFixAll=at.Source.append("fixAll");function EDe(n,e){return!(n.include&&!n.include.intersects(e)||n.excludes&&n.excludes.some(t=>O$(e,t,n.include))||!n.includeSourceActions&&at.Source.contains(e))}function IDe(n,e){const t=e.kind?new at(e.kind):void 0;return!(n.include&&(!t||!n.include.contains(t))||n.excludes&&t&&n.excludes.some(i=>O$(t,i,n.include))||!n.includeSourceActions&&t&&at.Source.contains(t)||n.onlyIncludePreferredActions&&!e.isPreferred)}function O$(n,e,t){return!(!e.contains(n)||t&&e.contains(t))}class lh{constructor(e,t,i){this.kind=e,this.apply=t,this.preferred=i}static fromUser(e,t){return!e||typeof e!="object"?new lh(t.kind,t.apply,!1):new lh(lh.getKindFromUser(e,t.kind),lh.getApplyFromUser(e,t.apply),lh.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new at(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}}var FM=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const TDe="editor.action.codeAction",NDe="editor.action.refactor",ADe="editor.action.sourceAction",F$="editor.action.organizeImports",P$="editor.action.fixAll";class B${constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return FM(this,void 0,void 0,function*(){if(((t=this.provider)===null||t===void 0?void 0:t.resolveCodeAction)&&!this.action.edit){let i;try{i=yield this.provider.resolveCodeAction(this.action,e)}catch(s){kr(s)}i&&(this.action.edit=i.edit)}return this})}}class PM extends q{constructor(e,t,i){super(),this.documentation=t,this._register(i),this.allActions=[...e].sort(PM.codeActionsComparator),this.validActions=this.allActions.filter(({action:s})=>!s.disabled)}static codeActionsComparator({action:e},{action:t}){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:ia(e.diagnostics)?ia(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:ia(t.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&at.QuickFix.contains(new at(e.kind))&&!!e.isPreferred)}}const E5={actions:[],documentation:void 0};function BM(n,e,t,i,s){var r;const o=t.filter||{},a={only:(r=o.include)===null||r===void 0?void 0:r.value,trigger:t.type},l=new l0e(n,s),c=MDe(n,o),h=new ee,u=c.map(f=>FM(this,void 0,void 0,function*(){try{i.report(f);const g=yield f.provideCodeActions(n,e,a,l.token);if(g&&h.add(g),l.token.isCancellationRequested)return E5;const p=((g==null?void 0:g.actions)||[]).filter(v=>v&&IDe(o,v)),_=RDe(f,p,o.include);return{actions:p.map(v=>new B$(v,f)),documentation:_}}catch(g){if(Rc(g))throw g;return kr(g),E5}})),d=ea.onDidChange(()=>{const f=ea.all(n);ta(f,c)||l.cancel()});return Promise.all(u).then(f=>{const g=e2(f.map(_=>_.actions)),p=v1(f.map(_=>_.documentation));return new PM(g,p,h)}).finally(()=>{d.dispose(),l.dispose()})}function MDe(n,e){return ea.all(n).filter(t=>t.providedCodeActionKinds?t.providedCodeActionKinds.some(i=>EDe(e,new at(i))):!0)}function RDe(n,e,t){if(!n.documentation)return;const i=n.documentation.map(s=>({kind:new at(s.kind),command:s.command}));if(t){let s;for(const r of i)r.kind.contains(t)&&(s?s.kind.contains(r.kind)&&(s=r):s=r);if(s)return s==null?void 0:s.command}for(const s of e)if(!!s.kind){for(const r of i)if(r.kind.contains(new at(s.kind)))return r.command}}lt.registerCommand("_executeCodeActionProvider",function(n,e,t,i,s){return FM(this,void 0,void 0,function*(){if(!(e instanceof xe))throw Zo();const r=n.get(zn).getModel(e);if(!r)throw Zo();const o=Se.isISelection(t)?Se.liftSelection(t):I.isIRange(t)?r.validateRange(t):void 0;if(!o)throw Zo();const a=typeof i=="string"?new at(i):void 0,l=yield BM(r,o,{type:1,filter:{includeSourceActions:!0,include:a}},G1.None,Lt.None),c=[],h=Math.min(l.validActions.length,typeof s=="number"?s:0);for(let u=0;u<h;u++)c.push(l.validActions[u].resolve(Lt.None));try{return yield Promise.all(c),l.validActions.map(u=>u.action)}finally{setTimeout(()=>l.dispose(),100)}})});class ay{constructor(e){this.executor=e,this._didRun=!1}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}var ODe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},I5=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},FDe=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class T5 extends Cr{constructor(e,t){super(e.command?e.command.id:e.title,PDe(e.title),void 0,!e.disabled,t),this.action=e}}function PDe(n){return n.replace(/\r\n|\r|\n/g," ")}let xT=class extends q{constructor(e,t,i,s){super(),this._editor=e,this._delegate=t,this._contextMenuService=i,this._visible=!1,this._showingActions=this._register(new Ls),this._keybindingResolver=new CS({getKeybindings:()=>s.getKeybindings()})}get isVisible(){return this._visible}show(e,t,i,s){return FDe(this,void 0,void 0,function*(){const r=s.includeDisabledActions?t.allActions:t.validActions;if(!r.length){this._visible=!1;return}if(!this._editor.getDomNode())throw this._visible=!1,xg();this._visible=!0,this._showingActions.value=t;const o=this.getMenuActions(e,r,t.documentation),a=P.isIPosition(i)?this._toCoords(i):i||{x:0,y:0},l=this._keybindingResolver.getResolver(),c=this._editor.getOption(113);this._contextMenuService.showContextMenu({domForShadowRoot:c?this._editor.getDomNode():void 0,getAnchor:()=>a,getActions:()=>o,onHide:()=>{this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:h=>h instanceof T5?l(h.action):void 0})})}getMenuActions(e,t,i){var s,r;const o=h=>new T5(h.action,()=>this._delegate.onSelectCodeAction(h)),a=t.map(o),l=[...i],c=this._editor.getModel();if(c&&a.length)for(const h of ea.all(c))h._getAdditionalMenuItems&&l.push(...h._getAdditionalMenuItems({trigger:e.type,only:(r=(s=e.filter)===null||s===void 0?void 0:s.include)===null||r===void 0?void 0:r.value},t.map(u=>u.action)));return l.length&&a.push(new Yr,...l.map(h=>o(new B$({title:h.title,command:h},void 0)))),a}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),i=Gi(this._editor.getDomNode()),s=i.left+t.left,r=i.top+t.top+t.height;return{x:s,y:r}}};xT=ODe([I5(2,zu),I5(3,ri)],xT);class CS{constructor(e){this._keybindingProvider=e}getResolver(){const e=new ay(()=>this._keybindingProvider.getKeybindings().filter(t=>CS.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let i=t.commandArgs;return t.command===F$?i={kind:at.SourceOrganizeImports.value}:t.command===P$&&(i={kind:at.SourceFixAll.value}),Object.assign({resolvedKeybinding:t.resolvedKeybinding},lh.fromUser(i,{kind:at.None,apply:"never"}))}));return t=>{if(t.kind){const i=this.bestKeybindingForCodeAction(t,e.getValue());return i==null?void 0:i.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const i=new at(e.kind);return t.filter(s=>s.kind.contains(i)).filter(s=>s.preferred?e.isPreferred:!0).reduceRight((s,r)=>s?s.kind.contains(r.kind)?r:s:r,void 0)}}CS.codeActionCommands=[NDe,TDe,ADe,F$,P$];var BDe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},VDe=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},km;(function(n){n.Hidden={type:0};class e{constructor(i,s,r,o){this.actions=i,this.trigger=s,this.editorPosition=r,this.widgetPosition=o,this.type=1}}n.Showing=e})(km||(km={}));let ly=class V$ extends q{constructor(e,t,i,s){super(),this._editor=e,this._quickFixActionId=t,this._preferredFixActionId=i,this._keybindingService=s,this._onClick=this._register(new R),this.onClick=this._onClick.event,this._state=km.Hidden,this._domNode=document.createElement("div"),this._domNode.className=se.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(r=>{const o=this._editor.getModel();(this.state.type!==1||!o||this.state.editorPosition.lineNumber>=o.getLineCount())&&this.hide()})),st.ignoreTarget(this._domNode),this._register(Sae(this._domNode,r=>{if(this.state.type!==1)return;this._editor.focus(),r.preventDefault();const{top:o,height:a}=Gi(this._domNode),l=this._editor.getOption(58);let c=Math.floor(l/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(c+=l),this._onClick.fire({x:r.posx,y:o+a+c,actions:this.state.actions,trigger:this.state.trigger})})),this._register(K(this._domNode,"mouseenter",r=>{if((r.buttons&1)!==1)return;this.hide();const o=new Bu;o.startMonitoring(r.target,r.buttons,Mg,()=>{},()=>{o.dispose()})})),this._register(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(56)&&!this._editor.getOption(56).enabled&&this.hide()})),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,i){if(e.validActions.length<=0)return this.hide();const s=this._editor.getOptions();if(!s.get(56).enabled)return this.hide();const r=this._editor.getModel();if(!r)return this.hide();const{lineNumber:o,column:a}=r.validatePosition(i),l=r.getOptions().tabSize,c=s.get(43),h=r.getLineContent(o),u=js.computeIndentLevel(h,l),d=c.spaceWidth*u>22,f=p=>p>2&&this._editor.getTopForLineNumber(p)===this._editor.getTopForLineNumber(p-1);let g=o;if(!d){if(o>1&&!f(o-1))g-=1;else if(!f(o+1))g+=1;else if(a*c.spaceWidth<22)return this.hide()}this.state=new km.Showing(e,t,i,{position:{lineNumber:g,column:1},preference:V$._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=km.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this.state.type===1&&this.state.actions.hasAutoFix){this._domNode.classList.remove(...se.lightBulb.classNamesArray),this._domNode.classList.add(...se.lightbulbAutofix.classNamesArray);const t=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(t){this.title=m("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",t.getLabel());return}}this._domNode.classList.remove(...se.lightbulbAutofix.classNamesArray),this._domNode.classList.add(...se.lightBulb.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._quickFixActionId);e?this.title=m("codeActionWithKb","Show Code Actions ({0})",e.getLabel()):this.title=m("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}};ly._posPref=[0];ly=BDe([VDe(3,ri)],ly);kt((n,e)=>{var t;const i=(t=n.getColor(zs))===null||t===void 0?void 0:t.transparent(.7),s=n.getColor(Kfe);s&&e.addRule(`
		.monaco-editor .contentWidgets ${se.lightBulb.cssSelector} {
			color: ${s};
			background-color: ${i};
		}`);const r=n.getColor(Gfe);r&&e.addRule(`
		.monaco-editor .contentWidgets ${se.lightbulbAutofix.cssSelector} {
			color: ${r};
			background-color: ${i};
		}`)});var WDe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},zDe=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},sL=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})},HDe=globalThis&&globalThis.__classPrivateFieldSet||function(n,e,t,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},$De=globalThis&&globalThis.__classPrivateFieldGet||function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},iw;let DT=class extends q{constructor(e,t,i,s,r){super(),this._editor=e,this.delegate=s,this._activeCodeActions=this._register(new Ls),iw.set(this,!1),this._codeActionWidget=new ay(()=>this._register(r.createInstance(xT,this._editor,{onSelectCodeAction:o=>sL(this,void 0,void 0,function*(){this.delegate.applyCodeAction(o,!0)})}))),this._lightBulbWidget=new ay(()=>{const o=this._register(r.createInstance(ly,this._editor,t,i));return this._register(o.onClick(a=>this.showCodeActionList(a.trigger,a.actions,a,{includeDisabledActions:!1}))),o})}dispose(){HDe(this,iw,!0,"f"),super.dispose()}update(e){var t,i,s;return sL(this,void 0,void 0,function*(){if(e.type!==1){(t=this._lightBulbWidget.rawValue)===null||t===void 0||t.hide();return}let r;try{r=yield e.actions}catch(o){Ie(o);return}if(!$De(this,iw,"f"))if(this._lightBulbWidget.getValue().update(r,e.trigger,e.position),e.trigger.type===1){if(!((i=e.trigger.filter)===null||i===void 0)&&i.include){const a=this.tryGetValidActionToApply(e.trigger,r);if(a){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(a,!1)}finally{r.dispose()}return}if(e.trigger.context){const l=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,r);if(l&&l.action.disabled){xr.get(this._editor).showMessage(l.action.disabled,e.trigger.context.position),r.dispose();return}}}const o=!!(!((s=e.trigger.filter)===null||s===void 0)&&s.include);if(e.trigger.context&&(!r.allActions.length||!o&&!r.validActions.length)){xr.get(this._editor).showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=r,r.dispose();return}this._activeCodeActions.value=r,this._codeActionWidget.getValue().show(e.trigger,r,e.position,{includeDisabledActions:o})}else this._codeActionWidget.getValue().isVisible?r.dispose():this._activeCodeActions.value=r})}getInvalidActionThatWouldHaveBeenApplied(e,t){if(!!t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:i})=>i.disabled)}tryGetValidActionToApply(e,t){if(!!t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}showCodeActionList(e,t,i,s){return sL(this,void 0,void 0,function*(){this._codeActionWidget.getValue().show(e,t,i,s)})}};iw=new WeakMap;DT=WDe([zDe(4,pt)],DT);var rL=globalThis&&globalThis.__classPrivateFieldGet||function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},UDe=globalThis&&globalThis.__classPrivateFieldSet||function(n,e,t,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},Ad;const W$=new he("supportedCodeAction","");class jDe extends q{constructor(e,t,i,s=250){super(),this._editor=e,this._markerService=t,this._signalChange=i,this._delay=s,this._autoTriggerTimer=this._register(new Wn),this._register(this._markerService.onMarkerChanged(r=>this._onMarkerChanges(r))),this._register(this._editor.onDidChangeCursorPosition(()=>this._onCursorChange()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}_onMarkerChanges(e){const t=this._editor.getModel();!t||e.some(i=>nV(i,t.uri))&&this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_getRangeOfMarker(e){const t=this._editor.getModel();if(!!t)for(const i of this._markerService.read({resource:t.uri})){const s=t.validateRange(i);if(I.intersectRanges(s,e))return I.lift(s)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=this._editor.getSelection();if(i.isEmpty()&&e.type===2){const{lineNumber:s,column:r}=i.getPosition(),o=t.getLineContent(s);if(o.length===0)return;if(r===1){if(/\s/.test(o[0]))return}else if(r===t.getLineMaxColumn(s)){if(/\s/.test(o[o.length-1]))return}else if(/\s/.test(o[r-2])&&/\s/.test(o[r-1]))return}return i}_createEventAndSignalChange(e,t){const i=this._editor.getModel();if(!t||!i){this._signalChange(void 0);return}const s=this._getRangeOfMarker(t),r=s?s.getStartPosition():t.getStartPosition(),o={trigger:e,selection:t,position:r};return this._signalChange(o),o}}var ch;(function(n){n.Empty={type:0};class e{constructor(i,s,r,o){this.trigger=i,this.rangeOrSelection=s,this.position=r,this._cancellablePromise=o,this.type=1,this.actions=o.catch(a=>{if(Rc(a))return qDe;throw a})}cancel(){this._cancellablePromise.cancel()}}n.Triggered=e})(ch||(ch={}));const qDe={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class KDe extends q{constructor(e,t,i,s){super(),this._editor=e,this._markerService=t,this._progressService=s,this._codeActionOracle=this._register(new Ls),this._state=ch.Empty,this._onDidChangeState=this._register(new R),this.onDidChangeState=this._onDidChangeState.event,Ad.set(this,!1),this._supportedCodeActions=W$.bindTo(i),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(ea.onDidChange(()=>this._update())),this._update()}dispose(){rL(this,Ad,"f")||(UDe(this,Ad,!0,"f"),super.dispose(),this.setState(ch.Empty,!0))}_update(){if(rL(this,Ad,"f"))return;this._codeActionOracle.value=void 0,this.setState(ch.Empty);const e=this._editor.getModel();if(e&&ea.has(e)&&!this._editor.getOption(80)){const t=[];for(const i of ea.all(e))Array.isArray(i.providedCodeActionKinds)&&t.push(...i.providedCodeActionKinds);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new jDe(this._editor,this._markerService,i=>{var s;if(!i){this.setState(ch.Empty);return}const r=ks(o=>BM(e,i.selection,i.trigger,G1.None,o));i.trigger.type===1&&((s=this._progressService)===null||s===void 0||s.showWhile(r,250)),this.setState(new ch.Triggered(i.trigger,i.selection,i.position,r))},void 0),this._codeActionOracle.value.trigger({type:2})}else this._supportedCodeActions.reset()}trigger(e){this._codeActionOracle.value&&this._codeActionOracle.value.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!rL(this,Ad,"f")&&this._onDidChangeState.fire(e))}}Ad=new WeakMap;var GDe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},mv=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},z$=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};function YDe(n){return le.regex(W$.keys()[0],new RegExp("(\\s|^)"+so(n.value)+"\\b"))}m("args.schema.kind","Kind of the code action to run."),m("args.schema.apply","Controls when the returned actions are applied."),m("args.schema.apply.first","Always apply the first returned code action."),m("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),m("args.schema.apply.never","Do not apply the returned code actions."),m("args.schema.preferred","Controls if only preferred code actions should be returned.");let J_=class H$ extends q{constructor(e,t,i,s,r){super(),this._instantiationService=r,this._editor=e,this._model=this._register(new KDe(this._editor,t,i,s)),this._register(this._model.onDidChangeState(o=>this.update(o))),this._ui=new ay(()=>this._register(new DT(e,eb.Id,yS.Id,{applyCodeAction:(o,a)=>z$(this,void 0,void 0,function*(){try{yield this._applyCodeAction(o)}finally{a&&this._trigger({type:2,filter:{}})}})},this._instantiationService)))}static get(e){return e.getContribution(H$.ID)}update(e){this._ui.getValue().update(e)}showCodeActions(e,t,i){return this._ui.getValue().showCodeActionList(e,t,i,{includeDisabledActions:!1})}manualTriggerAtCurrentPosition(e,t,i){if(!this._editor.hasModel())return;xr.get(this._editor).closeMessage();const s=this._editor.getPosition();this._trigger({type:1,filter:t,autoApply:i,context:{notAvailableMessage:e,position:s}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e){return this._instantiationService.invokeFunction(ZDe,e,this._editor)}};J_.ID="editor.contrib.quickFixController";J_=GDe([mv(1,K0),mv(2,Le),mv(3,Bg),mv(4,pt)],J_);function ZDe(n,e,t){return z$(this,void 0,void 0,function*(){const i=n.get(KV),s=n.get(Fi),r=n.get(Ng),o=n.get(en);if(r.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred}),yield e.resolve(Lt.None),e.action.edit&&(yield i.apply(o2.convert(e.action.edit),{editor:t,label:e.action.title})),e.action.command)try{yield s.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(a){const l=XDe(a);o.error(typeof l=="string"?l:m("applyCodeActionFailed","An unknown error occurred while applying the code action"))}})}function XDe(n){return typeof n=="string"?n:n instanceof Error&&typeof n.message=="string"?n.message:void 0}function $$(n,e,t,i){if(n.hasModel()){const s=J_.get(n);s&&s.manualTriggerAtCurrentPosition(e,t,i)}}class eb extends zt{constructor(){super({id:eb.Id,label:m("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:le.and(B.writable,B.hasCodeActionsProvider),kbOpts:{kbExpr:B.editorTextFocus,primary:2132,weight:100}})}run(e,t){return $$(t,m("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0)}}eb.Id="editor.action.quickFix";class yS extends zt{constructor(){super({id:yS.Id,label:m("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:le.and(B.writable,YDe(at.QuickFix)),kbOpts:{kbExpr:B.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}run(e,t){return $$(t,m("editor.action.autoFix.noneMessage","No auto fixes available"),{include:at.QuickFix,onlyIncludePreferredActions:!0},"ifSingle")}}yS.Id="editor.action.autoFix";var U$=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},j$=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};class N5{constructor(e,t,i){this.marker=e,this.index=t,this.total=i}}let LT=class q${constructor(e,t){this._markerService=t,this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this._dispoables=new ee,this._markers=[],this._nextIdx=-1,xe.isUri(e)?this._resourceFilter=s=>s.toString()===e.toString():e&&(this._resourceFilter=e);const i=()=>{this._markers=this._markerService.read({resource:xe.isUri(e)?e:void 0,severities:Ot.Error|Ot.Warning|Ot.Info}),typeof e=="function"&&(this._markers=this._markers.filter(s=>this._resourceFilter(s.resource))),this._markers.sort(q$._compareMarker)};i(),this._dispoables.add(t.onMarkerChanged(s=>{(!this._resourceFilter||s.some(r=>this._resourceFilter(r)))&&(i(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new N5(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,i){let s=!1,r=this._markers.findIndex(o=>o.resource.toString()===e.uri.toString());r<0&&(r=JA(this._markers,{resource:e.uri},(o,a)=>n_(o.resource.toString(),a.resource.toString())),r<0&&(r=~r));for(let o=r;o<this._markers.length;o++){let a=I.lift(this._markers[o]);if(a.isEmpty()){const l=e.getWordAtPosition(a.getStartPosition());l&&(a=new I(a.startLineNumber,l.startColumn,a.startLineNumber,l.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=o,s=!0;break}if(this._markers[o].resource.toString()!==e.uri.toString())break}s||(this._nextIdx=i?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,i){if(this._markers.length===0)return!1;let s=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,i,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),s!==this._nextIdx}find(e,t){let i=this._markers.findIndex(s=>s.resource.toString()===e.toString());if(!(i<0)){for(;i<this._markers.length;i++)if(I.containsPosition(this._markers[i],t))return new N5(this._markers[i],i+1,this._markers.length)}}static _compareMarker(e,t){let i=n_(e.resource.toString(),t.resource.toString());return i===0&&(i=Ot.compare(e.severity,t.severity)),i===0&&(i=I.compareRangesUsingStarts(e,t)),i}};LT=U$([j$(1,K0)],LT);const K$=Xe("IMarkerNavigationService");let kT=class{constructor(e){this._markerService=e,this._provider=new bs}getMarkerList(e){for(let t of this._provider){const i=t.getMarkerList(e);if(i)return i}return new LT(e,this._markerService)}};kT=U$([j$(0,K0)],kT);Ru(K$,kT,!0);var ET;(function(n){function e(t){switch(t){case qt.Ignore:return"severity-ignore "+se.info.classNames;case qt.Info:return se.info.classNames;case qt.Warning:return se.warning.classNames;case qt.Error:return se.error.classNames;default:return""}}n.className=e})(ET||(ET={}));kt((n,e)=>{const t=n.getColor(Fge);if(t){const r=se.error.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${r},
			.markers-panel .marker-icon${r},
			.text-search-provider-messages .providerMessage ${r},
			.extensions-viewlet > .extensions ${r} {
				color: ${t};
			}
		`)}const i=n.getColor(Pge);if(i){const r=se.warning.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${r},
			.markers-panel .marker-icon${r},
			.extensions-viewlet > .extensions ${r},
			.extension-editor ${r},
			.text-search-provider-messages .providerMessage ${r},
			.preferences-editor ${r} {
				color: ${i};
			}
		`)}const s=n.getColor(Bge);if(s){const r=se.info.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${r},
			.markers-panel .marker-icon${r},
			.extensions-viewlet > .extensions ${r},
			.text-search-provider-messages .providerMessage ${r},
			.extension-editor ${r} {
				color: ${s};
			}
		`)}});var QDe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Cd=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};class JDe{constructor(e,t,i,s,r){this._openerService=s,this._labelService=r,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new ee,this._editor=t;const o=document.createElement("div");o.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),o.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),o.appendChild(this._relatedBlock),this._disposables.add(mi(this._relatedBlock,"click",a=>{a.preventDefault();const l=this._relatedDiagnostics.get(a.target);l&&i(l)})),this._scrollable=new P2(o,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:3,verticalScrollbarSize:3}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{o.style.left=`-${a.scrollLeft}px`,o.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){He(this._disposables)}update(e){const{source:t,message:i,relatedInformation:s,code:r}=e;let o=((t==null?void 0:t.length)||0)+2;r&&(typeof r=="string"?o+=r.length:o+=r.value.length);const a=sa(i);this._lines=a.length,this._longestLineLength=0;for(const d of a)this._longestLineLength=Math.max(d.length+o,this._longestLineLength);Yi(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(const d of a)l=document.createElement("div"),l.innerText=d,d===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||r){const d=document.createElement("span");if(d.classList.add("details"),l.appendChild(d),t){const f=document.createElement("span");f.innerText=t,f.classList.add("source"),d.appendChild(f)}if(r)if(typeof r=="string"){const f=document.createElement("span");f.innerText=`(${r})`,f.classList.add("code"),d.appendChild(f)}else{this._codeLink=J("a.code-link"),this._codeLink.setAttribute("href",`${r.target.toString()}`),this._codeLink.onclick=g=>{this._openerService.open(r.target,{allowCommands:!0}),g.preventDefault(),g.stopPropagation()};const f=Y(this._codeLink,J("span"));f.innerText=r.value,d.appendChild(this._codeLink)}}if(Yi(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),ia(s)){const d=this._relatedBlock.appendChild(document.createElement("div"));d.style.paddingTop=`${Math.floor(this._editor.getOption(58)*.66)}px`,this._lines+=1;for(const f of s){let g=document.createElement("div"),p=document.createElement("a");p.classList.add("filename"),p.innerText=`${c$(f.resource)}(${f.startLineNumber}, ${f.startColumn}): `,p.title=this._labelService.getUriLabel(f.resource),this._relatedDiagnostics.set(p,f);let _=document.createElement("span");_.innerText=f.message,g.appendChild(p),g.appendChild(_),this._lines+=1,d.appendChild(g)}}const c=this._editor.getOption(43),h=Math.ceil(c.typicalFullwidthCharacterWidth*this._longestLineLength*.75),u=c.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:h,scrollHeight:u})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case Ot.Error:t=m("Error","Error");break;case Ot.Warning:t=m("Warning","Warning");break;case Ot.Info:t=m("Info","Info");break;case Ot.Hint:t=m("Hint","Hint");break}let i=m("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const s=this._editor.getModel();return s&&e.startLineNumber<=s.getLineCount()&&e.startLineNumber>=1&&(i=`${s.getLineContent(e.startLineNumber)}, ${i}`),i}}let cg=class G$ extends ry{constructor(e,t,i,s,r,o,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},r),this._themeService=t,this._openerService=i,this._menuService=s,this._contextKeyService=o,this._labelService=a,this._callOnDispose=new ee,this._onDidSelectRelatedInformation=new R,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=Ot.Warning,this._backgroundColor=V.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(nLe);let t=IT,i=eLe;this._severity===Ot.Warning?(t=TT,i=tLe):this._severity===Ot.Info&&(t=NT,i=iLe);const s=e.getColor(t),r=e.getColor(i);this.style({arrowColor:s,frameColor:s,headerBackgroundColor:r,primaryHeadingColor:e.getColor(o$),secondaryHeadingColor:e.getColor(a$)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(s=>this.editor.focus()));const t=[],i=this._menuService.createMenu(G$.TitleMenu,this._contextKeyService);oxe(i,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),i.dispose()}_fillTitleIcon(e){this._icon=Y(e,J(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new JDe(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let s=I.lift(e);const r=this.editor.getPosition();let o=r&&s.containsPosition(r)?r:s.getStartPosition();super.show(o,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const l=i>1?m("problems","{0} of {1} problems",t,i):m("change","{0} of {1} problem",t,i);this.setTitle(ro(a.uri),l)}this._icon.className=`codicon ${ET.className(Ot.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(o,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};cg.TitleMenu=new De("gotoErrorTitleMenu");cg=QDe([Cd(1,At),Cd(2,uc),Cd(3,Tg),Cd(4,pt),Cd(5,Le),Cd(6,$0)],cg);let A5=b_(mm,zW),M5=b_(Qa,W1),R5=b_(Qr,N2);const IT=M("editorMarkerNavigationError.background",{dark:A5,light:A5,hc:ni},m("editorMarkerNavigationError","Editor marker navigation widget error color.")),eLe=M("editorMarkerNavigationError.headerBackground",{dark:vt(IT,.1),light:vt(IT,.1),hc:null},m("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),TT=M("editorMarkerNavigationWarning.background",{dark:M5,light:M5,hc:ni},m("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),tLe=M("editorMarkerNavigationWarning.headerBackground",{dark:vt(TT,.1),light:vt(TT,.1),hc:"#0C141F"},m("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),NT=M("editorMarkerNavigationInfo.background",{dark:R5,light:R5,hc:ni},m("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),iLe=M("editorMarkerNavigationInfo.headerBackground",{dark:vt(NT,.1),light:vt(NT,.1),hc:null},m("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),nLe=M("editorMarkerNavigation.background",{dark:zs,light:zs,hc:zs},m("editorMarkerNavigationBackground","Editor marker navigation widget background."));kt((n,e)=>{const t=n.getColor(B1);t&&e.addRule(`.monaco-editor .marker-widget a.code-link span { color: ${t}; }`);const i=n.getColor(V1);i&&e.addRule(`.monaco-editor .marker-widget a.code-link span:hover { color: ${i}; }`)});var sLe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},_v=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},Y$=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};let Sc=class nw{constructor(e,t,i,s,r){this._markerNavigationService=t,this._contextKeyService=i,this._editorService=s,this._instantiationService=r,this._sessionDispoables=new ee,this._editor=e,this._widgetVisible=Z$.bindTo(this._contextKeyService)}static get(e){return e.getContribution(nw.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(cg,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(i=>{var s,r,o;(!(!((s=this._model)===null||s===void 0)&&s.selected)||!I.containsPosition((r=this._model)===null||r===void 0?void 0:r.selected.marker,i.position))&&((o=this._model)===null||o===void 0||o.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const i=this._model.find(this._editor.getModel().uri,this._widget.position);i?this._widget.updateMarker(i.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(i=>{this._editorService.openCodeEditor({resource:i.resource,options:{pinned:!0,revealIfOpened:!0,selection:I.lift(i).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new P(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(e,t){return Y$(this,void 0,void 0,function*(){if(this._editor.hasModel()){const i=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(i.move(e,this._editor.getModel(),this._editor.getPosition()),!i.selected)return;if(i.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const s=yield this._editorService.openCodeEditor({resource:i.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:i.selected.marker}},this._editor);s&&(nw.get(s).close(),nw.get(s).nagivate(e,t))}else this._widget.showAtMarker(i.selected.marker,i.selected.index,i.selected.total)}})}};Sc.ID="editor.contrib.markerController";Sc=sLe([_v(1,K$),_v(2,Le),_v(3,Tt),_v(4,pt)],Sc);class SS extends zt{constructor(e,t,i){super(i),this._next=e,this._multiFile=t}run(e,t){return Y$(this,void 0,void 0,function*(){t.hasModel()&&Sc.get(t).nagivate(this._next,this._multiFile)})}}class el extends SS{constructor(){super(!0,!1,{id:el.ID,label:el.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:578,weight:100},menuOpts:{menuId:cg.TitleMenu,title:el.LABEL,icon:un("marker-navigation-next",se.arrowDown,m("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}el.ID="editor.action.marker.next";el.LABEL=m("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class hg extends SS{constructor(){super(!1,!1,{id:hg.ID,label:hg.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:1602,weight:100},menuOpts:{menuId:cg.TitleMenu,title:el.LABEL,icon:un("marker-navigation-previous",se.arrowUp,m("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}hg.ID="editor.action.marker.prev";hg.LABEL=m("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class rLe extends SS{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:m("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:66,weight:100},menuOpts:{menuId:De.MenubarGoMenu,title:m({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class oLe extends SS{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:m("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:1090,weight:100},menuOpts:{menuId:De.MenubarGoMenu,title:m({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}$n(Sc.ID,Sc);ze(el);ze(hg);ze(rLe);ze(oLe);const Z$=new he("markersNavigationVisible",!1),aLe=Ks.bindToContribution(Sc.get);ne(new aLe({id:"closeMarkersNavigation",precondition:Z$,handler:n=>n.close(),kbOpts:{weight:100+50,kbExpr:B.focus,primary:9,secondary:[1033]}}));var lLe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},O5=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};const ir=J;class cLe{constructor(e,t,i){this.owner=e,this.range=t,this.marker=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const F5={type:1,filter:{include:at.QuickFix}};let AT=class{constructor(e,t,i,s){this._editor=e,this._hover=t,this._markerDecorationsService=i,this._openerService=s,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const i=this._editor.getModel(),s=e.range.startLineNumber,r=i.getLineMaxColumn(s),o=[];for(const a of t){const l=a.range.startLineNumber===s?a.range.startColumn:1,c=a.range.endLineNumber===s?a.range.endColumn:r,h=this._markerDecorationsService.getMarker(i.uri,a);if(!h)continue;const u=new I(e.range.startLineNumber,l,e.range.startLineNumber,c);o.push(new cLe(this,u,h))}return o}renderHoverParts(e,t,i){if(!e.length)return q.None;const s=new ee;e.forEach(o=>t.appendChild(this.renderMarkerHover(o,s)));const r=e.length===1?e[0]:e.sort((o,a)=>Ot.compare(o.marker.severity,a.marker.severity))[0];return this.renderMarkerStatusbar(r,i,s),s}renderMarkerHover(e,t){const i=ir("div.hover-row"),s=Y(i,ir("div.marker.hover-contents")),{source:r,message:o,code:a,relatedInformation:l}=e.marker;this._editor.applyFontInfo(s);const c=Y(s,ir("span"));if(c.style.whiteSpace="pre-wrap",c.innerText=o,r||a)if(a&&typeof a!="string"){const h=ir("span");if(r){const g=Y(h,ir("span"));g.innerText=r}const u=Y(h,ir("a.code-link"));u.setAttribute("href",a.target.toString()),t.add(K(u,"click",g=>{this._openerService.open(a.target,{allowCommands:!0}),g.preventDefault(),g.stopPropagation()}));const d=Y(u,ir("span"));d.innerText=a.value;const f=Y(s,h);f.style.opacity="0.6",f.style.paddingLeft="6px"}else{const h=Y(s,ir("span"));h.style.opacity="0.6",h.style.paddingLeft="6px",h.innerText=r&&a?`${r}(${a})`:r||`(${a})`}if(ia(l))for(const{message:h,resource:u,startLineNumber:d,startColumn:f}of l){const g=Y(s,ir("div"));g.style.marginTop="8px";const p=Y(g,ir("a"));p.innerText=`${ro(u)}(${d}, ${f}): `,p.style.cursor="pointer",t.add(K(p,"click",v=>{v.stopPropagation(),v.preventDefault(),this._openerService&&this._openerService.open(u,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:d,startColumn:f}}}).catch(Ie)}));const _=Y(g,ir("span"));_.innerText=h,this._editor.applyFontInfo(_)}return i}renderMarkerStatusbar(e,t,i){if((e.marker.severity===Ot.Error||e.marker.severity===Ot.Warning||e.marker.severity===Ot.Info)&&t.addAction({label:m("view problem","View Problem"),commandId:el.ID,run:()=>{this._hover.hide(),Sc.get(this._editor).showAtMarker(e.marker),this._editor.focus()}}),!this._editor.getOption(80)){const s=t.append(ir("div"));this.recentMarkerCodeActionsInfo&&(iy.makeKey(this.recentMarkerCodeActionsInfo.marker)===iy.makeKey(e.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(s.textContent=m("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const r=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?q.None:i.add(Ff(()=>s.textContent=m("checkingForQuickFixes","Checking for quick fixes..."),200));s.textContent||(s.textContent=String.fromCharCode(160));const o=this.getCodeActions(e.marker);i.add(Ze(()=>o.cancel())),o.then(a=>{if(r.dispose(),this.recentMarkerCodeActionsInfo={marker:e.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),s.textContent=m("noQuickFixes","No quick fixes available");return}s.style.display="none";let l=!1;i.add(Ze(()=>{l||a.dispose()})),t.addAction({label:m("quick fixes","Quick Fix..."),commandId:eb.Id,run:c=>{l=!0;const h=J_.get(this._editor),u=Gi(c);this._hover.hide(),h.showCodeActions(F5,a,{x:u.left+6,y:u.top+u.height+6})}})},Ie)}}getCodeActions(e){return ks(t=>BM(this._editor.getModel(),new I(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),F5,G1.None,t))}};AT=lLe([O5(2,d2),O5(3,uc)],AT);kt((n,e)=>{const t=n.getColor(B1);t&&e.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${t}; }`);const i=n.getColor(V1);i&&e.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${i}; }`)});const X$="editor.action.inlineSuggest.commit";class Q${constructor(e,t,i=0){this.lineNumber=e,this.parts=t,this.additionalReservedLineCount=i}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],i=e.substr(0,t.column-1);return uLe(i,this.parts.map(r=>({range:{startLineNumber:1,endLineNumber:1,startColumn:r.column,endColumn:r.column},text:r.lines.join(`
`)}))).substring(this.parts[0].column-1)}}class hLe{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}function uLe(n,e){const t=new hLe(n),i=e.map(s=>{const r=I.lift(s.range);return{startOffset:t.getOffset(r.getStartPosition()),endOffset:t.getOffset(r.getEndPosition()),text:s.text}});i.sort((s,r)=>r.startOffset-s.startOffset);for(const s of i)n=n.substring(0,s.startOffset)+s.text+n.substring(s.endOffset);return n}class P5{constructor(e,t,i){this.column=e,this.lines=t,this.preview=i}}class J$ extends q{constructor(e){super(),this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(105)&&this._expanded===void 0&&this.onDidChangeEmitter.fire()}))}setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}}function dLe(n,e){return n===e?!0:!n||!e?!1:n.range.equalsRange(e.range)&&n.text===e.text&&n.command===e.command}function eU(n,e,t,i,s=0){if(n.range.startLineNumber!==n.range.endLineNumber)return;const r=e.getLineContent(n.range.startLineNumber),o=ci(r).length;if(n.range.startColumn-1<=o){const f=ci(n.text).length,g=r.substring(n.range.startColumn-1,o),p=I.fromPositions(n.range.getStartPosition().delta(0,g.length),n.range.getEndPosition()),_=n.text.startsWith(g)?n.text.substring(g.length):n.text.substring(f);n={range:p,text:_,command:n.command}}const l=e.getValueInRange(n.range),c=fLe(l,n.text);if(!c)return;const h=n.range.startLineNumber,u=new Array;if(t==="prefix"){const f=c.filter(g=>g.originalLength===0);if(f.length>1||f.length===1&&f[0].originalStart!==l.length)return}const d=n.text.length-s;for(const f of c){const g=n.range.startColumn+f.originalStart+f.originalLength;if(t==="subwordSmart"&&i&&i.lineNumber===n.range.startLineNumber&&g<i.column||f.originalLength>0)return;if(f.modifiedLength===0)continue;const p=f.modifiedStart+f.modifiedLength,_=Math.max(f.modifiedStart,Math.min(p,d)),v=n.text.substring(f.modifiedStart,_),b=n.text.substring(_,Math.max(f.modifiedStart,p));if(v.length>0){const w=sa(v);u.push(new P5(g,w,!1))}if(b.length>0){const w=sa(b);u.push(new P5(g,w,!0))}}return new Q$(h,u,0)}let Lo;function fLe(n,e){if((Lo==null?void 0:Lo.originalValue)===n&&(Lo==null?void 0:Lo.newValue)===e)return Lo==null?void 0:Lo.changes;{const t=gLe(n,e);return Lo={originalValue:n,newValue:e,changes:t},t}}function gLe(n,e){if(n.length>5e3||e.length>5e3)return;function t(l){let c=0;for(let h=0,u=l.length;h<u;h++){const d=l.charCodeAt(h);d>c&&(c=d)}return c}const i=Math.max(t(n),t(e));function s(l){if(l<0)throw new Error("unexpected");return i+l+1}function r(l){let c=0,h=0;const u=new Int32Array(l.length);for(let d=0,f=l.length;d<f;d++){const g=h*100+c;l[d]==="("?(u[d]=s(2*g),c++):l[d]===")"?(u[d]=s(2*g+1),c===1&&h++,c=Math.max(c-1,0)):u[d]=l.charCodeAt(d)}return u}const o=r(n),a=r(e);return new Bo({getElements:()=>o},{getElements:()=>a}).ComputeDiff(!1).changes}var pLe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},mLe=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},Wa=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};let MT=class extends q{constructor(e,t,i){super(),this.editor=e,this.cache=t,this.commandService=i,this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new Ls),this.active=!1,this.disposed=!1,this._register(i.onDidExecuteCommand(s=>{new Set([p2.id,m2.id,_m.Tab.id,_m.DeleteLeft.id,_m.DeleteRight.id,X$,"acceptSelectedSuggestion"]).has(s.commandId)&&e.hasTextFocus()&&this.handleUserInput()})),this._register(this.editor.onDidType(s=>{this.handleUserInput()})),this._register(this.editor.onDidChangeCursorPosition(s=>{this.session&&!this.session.isValid&&this.hide()})),this._register(Ze(()=>{this.disposed=!0})),this._register(this.editor.onDidBlurEditorWidget(()=>{this.hide()}))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout(()=>{this.disposed||this.startSessionIfTriggered()},0)}get session(){return this.completionSession.value}get ghostText(){var e;return(e=this.session)===null||e===void 0?void 0:e.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(e){var t;(t=this.session)===null||t===void 0||t.setExpanded(e)}setActive(e){var t;this.active=e,e&&((t=this.session)===null||t===void 0||t.scheduleAutomaticUpdate())}startSessionIfTriggered(){!this.editor.getOption(54).enabled||this.session&&this.session.isValid||this.trigger(Os.Automatic)}trigger(e){if(this.completionSession.value){e===Os.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext();return}this.completionSession.value=new _Le(this.editor,this.editor.getPosition(),()=>this.active,this.commandService,this.cache,e),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(()=>{this.onDidChangeEmitter.fire()}))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var e;(e=this.session)===null||e===void 0||e.commitCurrentCompletion()}showNext(){var e;(e=this.session)===null||e===void 0||e.showNextInlineCompletion()}showPrevious(){var e;(e=this.session)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return Wa(this,void 0,void 0,function*(){const t=yield(e=this.session)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};MT=pLe([mLe(2,Fi)],MT);class _Le extends J${constructor(e,t,i,s,r,o){super(e),this.triggerPosition=t,this.shouldUpdate=i,this.commandService=s,this.cache=r,this.initialTriggerKind=o,this.minReservedLineCount=0,this.updateOperation=this._register(new Ls),this.updateSoon=this._register(new Wt(()=>{let l=this.initialTriggerKind;return this.initialTriggerKind=Os.Automatic,this.update(l)},50)),this.currentlySelectedCompletionId=void 0;let a;this._register(this.onDidChange(()=>{const l=this.currentCompletion;if(l&&l.sourceInlineCompletion!==a){a=l.sourceInlineCompletion;const c=l.sourceProvider;c.handleItemDidShow&&c.handleItemDidShow(l.sourceInlineCompletions,a)}})),this._register(Ze(()=>{this.cache.clear()})),this._register(this.editor.onDidChangeCursorPosition(l=>{this.cache.value&&this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeModelContent(l=>{this.scheduleAutomaticUpdate()})),this._register(YA.onDidChange(()=>{this.updateSoon.schedule()})),this.scheduleAutomaticUpdate()}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value||this.cache.value.completions.length===0)return 0;const e=this.cache.value.completions.findIndex(t=>t.semanticId===this.currentlySelectedCompletionId);return e===-1?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(!!this.cache.value)return this.cache.value.completions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){var e;return Wa(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){const i=(this.fixAndGetIndexOfCurrentSelection()+1)%t.length;this.currentlySelectedCompletionId=t[i].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}showPreviousInlineCompletion(){var e;return Wa(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){const i=(this.fixAndGetIndexOfCurrentSelection()+t.length-1)%t.length;this.currentlySelectedCompletionId=t[i].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}ensureUpdateWithExplicitContext(){var e;return Wa(this,void 0,void 0,function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===Os.Explicit?yield this.updateOperation.value.promise:yield this.update(Os.Explicit):((e=this.cache.value)===null||e===void 0?void 0:e.triggerKind)!==Os.Explicit&&(yield this.update(Os.Explicit))})}hasMultipleInlineCompletions(){var e;return Wa(this,void 0,void 0,function*(){return yield this.ensureUpdateWithExplicitContext(),(((e=this.cache.value)===null||e===void 0?void 0:e.completions.length)||0)>1})}get ghostText(){const e=this.currentCompletion,t=this.editor.getOptions().get(54).mode;return e?eU(e,this.editor.getModel(),t,this.editor.getPosition()):void 0}get currentCompletion(){const e=this.currentCachedCompletion;if(!!e)return e.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule()}update(e){return Wa(this,void 0,void 0,function*(){if(!this.shouldUpdate())return;const t=this.editor.getPosition(),i=ks(r=>Wa(this,void 0,void 0,function*(){let o;try{o=yield iU(t,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},r)}catch(a){Ie(a);return}r.isCancellationRequested||(this.cache.setValue(this.editor,o,e),this.onDidChangeEmitter.fire())})),s=new tU(i,e);this.updateOperation.value=s,yield i,this.updateOperation.value===s&&this.updateOperation.clear()})}takeOwnership(e){this._register(e)}commitCurrentCompletion(){if(!this.ghostText)return;const e=this.currentCompletion;e&&this.commit(e)}commit(e){const t=this.cache.clearAndLeak();this.editor.executeEdits("inlineSuggestion.accept",[Hf.replaceMove(e.range,e.text)]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally(()=>{t==null||t.dispose()}).then(void 0,kr):t==null||t.dispose(),this.onDidChangeEmitter.fire()}}class tU{constructor(e,t){this.promise=e,this.triggerKind=t}dispose(){this.promise.cancel()}}class bLe extends q{constructor(e,t,i,s){super(),this.triggerKind=s;const r=e.deltaDecorations([],t.items.map(o=>({range:o.range,options:{description:"inline-completion-tracking-range"}})));this._register(Ze(()=>{e.deltaDecorations(r,[])})),this.completions=t.items.map((o,a)=>new vLe(o,r[a])),this._register(e.onDidChangeModelContent(()=>{let o=!1;const a=e.getModel();for(const l of this.completions){const c=a.getDecorationRange(l.decorationId);if(!c){Ie(new Error("Decoration has no range"));continue}l.synchronizedRange.equalsRange(c)||(o=!0,l.synchronizedRange=c)}o&&i()})),this._register(t)}}class vLe{constructor(e,t){this.inlineCompletion=e,this.decorationId=t,this.semanticId=JSON.stringify({text:this.inlineCompletion.text,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}toLiveInlineCompletion(){return{text:this.inlineCompletion.text,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion}}}function wLe(n,e){const t=e.getWordAtPosition(n),i=e.getLineMaxColumn(n.lineNumber);return t?new I(n.lineNumber,t.startColumn,n.lineNumber,i):I.fromPositions(n,n.with(void 0,i))}function iU(n,e,t,i=Lt.None){return Wa(this,void 0,void 0,function*(){const s=wLe(n,e),r=YA.all(e),o=yield Promise.all(r.map(l=>Wa(this,void 0,void 0,function*(){const c=yield l.provideInlineCompletions(e,n,t,i);return{completions:c,provider:l,dispose:()=>{c&&l.freeInlineCompletions(c)}}}))),a=new Map;for(const l of o){const c=l.completions;if(c)for(const h of c.items.map(u=>({text:u.text,range:u.range?I.lift(u.range):s,command:u.command,sourceProvider:l.provider,sourceInlineCompletions:c,sourceInlineCompletion:u})))h.range.startLineNumber===h.range.endLineNumber&&a.set(JSON.stringify({text:h.text,range:h.range}),h)}return{items:[...a.values()],dispose:()=>{for(const l of o)l.dispose()}}})}function cy(n,e){if(!e)return e;const t=n.getValueInRange(e.range),i=s_(t,e.text),s=n.getOffsetAt(e.range.getStartPosition())+i,r=n.getPositionAt(s),o=t.substr(i),a=bE(o,e.text),l=n.getPositionAt(Math.max(s,n.getOffsetAt(e.range.getEndPosition())-a));return{range:I.fromPositions(r,l),text:e.text.substr(i,e.text.length-i-a)}}const Ei=new Uint8Array(16),pn=[];for(let n=0;n<256;n++)pn.push(n.toString(16).padStart(2,"0"));let RT;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?RT=crypto.getRandomValues.bind(crypto):RT=function(n){for(let e=0;e<n.length;e++)n[e]=Math.floor(Math.random()*256);return n};function CLe(){RT(Ei),Ei[6]=Ei[6]&15|64,Ei[8]=Ei[8]&63|128;let n=0,e="";return e+=pn[Ei[n++]],e+=pn[Ei[n++]],e+=pn[Ei[n++]],e+=pn[Ei[n++]],e+="-",e+=pn[Ei[n++]],e+=pn[Ei[n++]],e+="-",e+=pn[Ei[n++]],e+=pn[Ei[n++]],e+="-",e+=pn[Ei[n++]],e+=pn[Ei[n++]],e+="-",e+=pn[Ei[n++]],e+=pn[Ei[n++]],e+=pn[Ei[n++]],e+=pn[Ei[n++]],e+=pn[Ei[n++]],e+=pn[Ei[n++]],e}const B5="code-workspace";function V5(n){const e=n;return typeof(e==null?void 0:e.id)=="string"&&xe.isUri(e.uri)}function yLe(n){if(n.configuration)return{id:n.id,configPath:n.configuration};if(n.folders.length===1)return{id:n.id,uri:n.folders[0].uri}}class SLe{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){let i=t.resolve(e);if(i!==void 0)return i}}}class xLe{constructor(e,t,i,s){this._model=e,this._selection=t,this._selectionIdx=i,this._overtypingCapturer=s}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let i=this._model.getValueInRange(this._selection)||void 0,s=this._selection.startLineNumber!==this._selection.endLineNumber;if(!i&&this._overtypingCapturer){const r=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);r&&(i=r.value,s=r.multiline)}if(i&&s&&e.snippet){const r=this._model.getLineContent(this._selection.startLineNumber),o=ci(r,0,this._selection.startColumn-1);let a=o;e.snippet.walk(c=>c===e?!1:(c instanceof Zn&&(a=ci(sa(c.value).pop())),!0));const l=s_(a,o);i=i.replace(/(\r\n|\r|\n)(.*)/g,(c,h,u)=>`${h}${a.substr(l)}${u}`)}return i}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const i=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return i&&i.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber)}}}}class DLe{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return Rh(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const i=Rh(this._model.uri.fsPath),s=i.lastIndexOf(".");return s<=0?i:i.slice(0,s)}else{if(t==="TM_DIRECTORY")return I9(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel($A(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}class LLe{constructor(e,t,i,s){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=i,this._spread=s}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(!!t){if(this._spread){const i=t.split(/\r\n|\n|\r/).filter(s=>!Z9(s));if(i.length===this._selectionCount)return i[this._selectionIdx]}return t}}}class kLe{constructor(e,t){this._model=e,this._selection=t}resolve(e){const{name:t}=e,i=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),s=Qt.getComments(i);if(!!s){if(t==="LINE_COMMENT")return s.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return s.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return s.blockCommentEndToken||void 0}}}class Uo{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return Uo.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return Uo.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return Uo.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return Uo.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3))}}Uo.dayNames=[m("Sunday","Sunday"),m("Monday","Monday"),m("Tuesday","Tuesday"),m("Wednesday","Wednesday"),m("Thursday","Thursday"),m("Friday","Friday"),m("Saturday","Saturday")];Uo.dayNamesShort=[m("SundayShort","Sun"),m("MondayShort","Mon"),m("TuesdayShort","Tue"),m("WednesdayShort","Wed"),m("ThursdayShort","Thu"),m("FridayShort","Fri"),m("SaturdayShort","Sat")];Uo.monthNames=[m("January","January"),m("February","February"),m("March","March"),m("April","April"),m("May","May"),m("June","June"),m("July","July"),m("August","August"),m("September","September"),m("October","October"),m("November","November"),m("December","December")];Uo.monthNamesShort=[m("JanuaryShort","Jan"),m("FebruaryShort","Feb"),m("MarchShort","Mar"),m("AprilShort","Apr"),m("MayShort","May"),m("JuneShort","Jun"),m("JulyShort","Jul"),m("AugustShort","Aug"),m("SeptemberShort","Sep"),m("OctoberShort","Oct"),m("NovemberShort","Nov"),m("DecemberShort","Dec")];class ELe{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=yLe(this._workspaceService.getWorkspace());if(!!t){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(V5(e))return Rh(e.uri.path);let t=Rh(e.configPath.path);return t.endsWith(B5)&&(t=t.substr(0,t.length-B5.length-1)),t}_resoveWorkspacePath(e){if(V5(e))return cT(e.uri.fsPath);let t=Rh(e.configPath.path),i=e.configPath.fsPath;return i.endsWith(t)&&(i=i.substr(0,i.length-t.length-1)),i?cT(i):"/"}}class ILe{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return CLe()}}kt((n,e)=>{function t(i){const s=n.getColor(i);return s?s.toString():"transparent"}e.addRule(`.monaco-editor .snippet-placeholder { background-color: ${t(Sge)}; outline-color: ${t(xge)}; }`),e.addRule(`.monaco-editor .finish-snippet-placeholder { background-color: ${t(Dge)}; outline-color: ${t(Lge)}; }`)});class or{constructor(e,t,i,s){this._editor=e,this._snippet=t,this._offset=i,this._snippetLineLeadingWhitespace=s,this._nestingLevel=1,this._placeholderGroups=hP(t.placeholders,mr.compareByIndex),this._placeholderGroupsIdx=-1}dispose(){this._placeholderDecorations&&this._editor.deltaDecorations([...this._placeholderDecorations.values()],[]),this._placeholderGroups.length=0}_initDecorations(){if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const i of this._snippet.placeholders){const s=this._snippet.offset(i),r=this._snippet.fullLen(i),o=I.fromPositions(e.getPositionAt(this._offset+s),e.getPositionAt(this._offset+s+r)),a=i.isFinalTabstop?or._decor.inactiveFinal:or._decor.inactive,l=t.addDecoration(o,a);this._placeholderDecorations.set(i,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let s=[];for(const r of this._placeholderGroups[this._placeholderGroupsIdx])if(r.transform){const o=this._placeholderDecorations.get(r),a=this._editor.getModel().getDecorationRange(o),l=this._editor.getModel().getValueInRange(a),c=r.transform.resolve(l).split(/\r\n|\r|\n/);for(let h=1;h<c.length;h++)c[h]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+c[h]);s.push(Hf.replace(a,c.join(this._editor.getModel().getEOL())))}s.length>0&&this._editor.executeEdits("snippet.placeholderTransform",s)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const i=this._editor.getModel().changeDecorations(s=>{const r=new Set,o=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const l=this._placeholderDecorations.get(a),c=this._editor.getModel().getDecorationRange(l);o.push(new Se(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),s.changeDecorationOptions(l,a.isFinalTabstop?or._decor.activeFinal:or._decor.active),r.add(a);for(const h of this._snippet.enclosingPlaceholders(a)){const u=this._placeholderDecorations.get(h);s.changeDecorationOptions(u,h.isFinalTabstop?or._decor.activeFinal:or._decor.active),r.add(h)}}for(const[a,l]of this._placeholderDecorations)r.has(a)||s.changeDecorationOptions(l,a.isFinalTabstop?or._decor.inactiveFinal:or._decor.inactive);return o});return t?this.move(e):i!=null?i:[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof mr){const i=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(i).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let i;for(const s of t){if(s.isFinalTabstop)break;i||(i=[],e.set(s.index,i));const r=this._placeholderDecorations.get(s),o=this._editor.getModel().getDecorationRange(r);if(!o){e.delete(s.index);break}i.push(o)}}return e}get choice(){return this._placeholderGroups[this._placeholderGroupsIdx][0].choice}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(i=>{for(const s of this._placeholderGroups[this._placeholderGroupsIdx]){const r=e.shift();console.assert(!r._placeholderDecorations);const o=r._snippet.placeholderInfo.last.index;for(const l of r._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=s.index+(o+1)/this._nestingLevel:l.index=s.index+l.index/this._nestingLevel;this._snippet.replace(s,r._snippet.children);const a=this._placeholderDecorations.get(s);i.removeDecoration(a),this._placeholderDecorations.delete(s);for(const l of r._snippet.placeholders){const c=r._snippet.offset(l),h=r._snippet.fullLen(l),u=I.fromPositions(t.getPositionAt(r._offset+c),t.getPositionAt(r._offset+c+h)),d=i.addDecoration(u,or._decor.inactive);this._placeholderDecorations.set(l,d)}}this._placeholderGroups=hP(this._snippet.placeholders,mr.compareByIndex)})}}or._decor={active:$e.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:$e.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:$e.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:$e.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const W5={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};class Ao{constructor(e,t,i=W5){this._templateMerges=[],this._snippets=[],this._editor=e,this._template=t,this._options=i}static adjustWhitespace(e,t,i,s,r){const o=e.getLineContent(t.lineNumber),a=ci(o,0,t.column-1);let l;return i.walk(c=>{if(!(c instanceof Zn)||c.parent instanceof Z0)return!0;const h=c.value.split(/\r\n|\r|\n/);if(s){const d=i.offset(c);if(d===0)h[0]=e.normalizeIndentation(h[0]);else{l=l!=null?l:i.toString();let f=l.charCodeAt(d-1);(f===10||f===13)&&(h[0]=e.normalizeIndentation(a+h[0]))}for(let f=1;f<h.length;f++)h[f]=e.normalizeIndentation(a+h[f])}const u=h.join(e.getEOL());return u!==c.value&&(c.parent.replace(c,[new Zn(u)]),l=void 0),!0}),a}static adjustSelection(e,t,i,s){if(i!==0||s!==0){const{positionLineNumber:r,positionColumn:o}=t,a=o-i,l=o+s,c=e.validateRange({startLineNumber:r,startColumn:a,endLineNumber:r,endColumn:l});t=Se.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,t.getDirection())}return t}static createEditsAndSnippets(e,t,i,s,r,o,a,l){const c=[],h=[];if(!e.hasModel())return{edits:c,snippets:h};const u=e.getModel(),d=e.invokeWithinContext(C=>C.get(eW)),f=e.invokeWithinContext(C=>new DLe(C.get($0),u)),g=()=>a;let p=0,_=u.getValueInRange(Ao.adjustSelection(u,e.getSelection(),i,0)),v=u.getValueInRange(Ao.adjustSelection(u,e.getSelection(),0,s)),b=u.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber);const w=e.getSelections().map((C,y)=>({selection:C,idx:y})).sort((C,y)=>I.compareRangesUsingStarts(C.selection,y.selection));for(const{selection:C,idx:y}of w){let D=Ao.adjustSelection(u,C,i,0),S=Ao.adjustSelection(u,C,0,s);_!==u.getValueInRange(D)&&(D=C),v!==u.getValueInRange(S)&&(S=C);const x=C.setStartPosition(D.startLineNumber,D.startColumn).setEndPosition(S.endLineNumber,S.endColumn),k=new dS().parse(t,!0,r),F=x.getStartPosition(),A=Ao.adjustWhitespace(u,F,k,o||y>0&&b!==u.getLineFirstNonWhitespaceColumn(C.positionLineNumber),!0);k.resolveVariables(new SLe([f,new LLe(g,y,w.length,e.getOption(70)==="spread"),new xLe(u,C,y,l),new kLe(u,C),new Uo,new ELe(d),new ILe]));const z=u.getOffsetAt(F)+p;p+=k.toString().length-u.getValueLengthInRange(x),c[y]=Hf.replace(x,k.toString()),c[y].identifier={major:y,minor:0},h[y]=new or(e,k,z,A)}return{edits:c,snippets:h}}dispose(){He(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=Ao.createEditsAndSnippets(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer);this._snippets=t,this._editor.executeEdits("snippet",e,i=>this._snippets[0].hasPlaceholder?this._move(!0):i.filter(s=>!!s.identifier).map(s=>Se.fromPositions(s.range.getEndPosition()))),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=W5){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:i,snippets:s}=Ao.createEditsAndSnippets(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer);this._editor.executeEdits("snippet",i,r=>{for(const o of this._snippets)o.merge(s);return console.assert(s.length===0),this._snippets[0].hasPlaceholder?this._move(void 0):r.filter(o=>!!o.identifier).map(o=>Se.fromPositions(o.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const i of this._snippets){const s=i.move(e);t.push(...s)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get choice(){return this._snippets[0].choice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;let t=new Map;for(const i of this._snippets){const s=i.computePossibleSelections();if(t.size===0)for(const[r,o]of s){o.sort(I.compareRangesUsingStarts);for(const a of e)if(o[0].containsRange(a)){t.set(r,[]);break}}if(t.size===0)return!1;t.forEach((r,o)=>{r.push(...s.get(o))})}e.sort(I.compareRangesUsingStarts);for(let[i,s]of t){if(s.length!==e.length){t.delete(i);continue}s.sort(I.compareRangesUsingStarts);for(let r=0;r<s.length;r++)if(!s[r].containsRange(e[r])){t.delete(i);continue}}return t.size>0}}var TLe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},z5=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};const H5={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let Wi=class Wp{constructor(e,t,i){this._editor=e,this._logService=t,this._snippetListener=new ee,this._modelVersionId=-1,this._inSnippet=Wp.InSnippetMode.bindTo(i),this._hasNextTabstop=Wp.HasNextTabstop.bindTo(i),this._hasPrevTabstop=Wp.HasPrevTabstop.bindTo(i)}static get(e){return e.getContribution(Wp.ID)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)===null||e===void 0||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t=="undefined"?H5:Object.assign(Object.assign({},H5),t))}catch(i){this.cancel(),this._logService.error(i),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){!this._editor.hasModel()||(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session?this._session.merge(e,t):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new Ao(this._editor,e,t),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(i=>i.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState())))}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{choice:e}=this._session;if(!e){this._currentChoice=void 0;return}if(this._currentChoice!==e){this._currentChoice=e,this._editor.setSelections(this._editor.getSelections().map(i=>Se.fromPositions(i.getStartPosition())));const[t]=e.options;nSe(this._editor,e.options.map((i,s)=>({kind:13,label:i.value,insertText:i.value,sortText:"a".repeat(s+1),range:I.fromPositions(this._editor.getPosition(),this._editor.getPosition().delta(0,t.value.length))})))}}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),(t=this._session)===null||t===void 0||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return Boolean(this._inSnippet.get())}};Wi.ID="snippetController2";Wi.InSnippetMode=new he("inSnippetMode",!1,m("inSnippetMode","Whether the editor in current in snippet mode"));Wi.HasNextTabstop=new he("hasNextTabstop",!1,m("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));Wi.HasPrevTabstop=new he("hasPrevTabstop",!1,m("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));Wi=TLe([z5(1,fl),z5(2,Le)],Wi);$n(Wi.ID,Wi);const xS=Ks.bindToContribution(Wi.get);ne(new xS({id:"jumpToNextSnippetPlaceholder",precondition:le.and(Wi.InSnippetMode,Wi.HasNextTabstop),handler:n=>n.next(),kbOpts:{weight:100+30,kbExpr:B.editorTextFocus,primary:2}}));ne(new xS({id:"jumpToPrevSnippetPlaceholder",precondition:le.and(Wi.InSnippetMode,Wi.HasPrevTabstop),handler:n=>n.prev(),kbOpts:{weight:100+30,kbExpr:B.editorTextFocus,primary:1026}}));ne(new xS({id:"leaveSnippet",precondition:Wi.InSnippetMode,handler:n=>n.cancel(!0),kbOpts:{weight:100+30,kbExpr:B.editorTextFocus,primary:9,secondary:[1033]}}));ne(new xS({id:"acceptSnippet",precondition:Wi.InSnippetMode,handler:n=>n.finish()}));var NLe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},$5=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};class VM{constructor(e){this.name=e}select(e,t,i){if(i.length===0)return 0;let s=i[0].score[0];for(let r=0;r<i.length;r++){const{score:o,completion:a}=i[r];if(o[0]!==s)break;if(a.preselect)return r}return 0}}class nU extends VM{constructor(){super("first")}memorize(e,t,i){}toJSON(){}fromJSON(){}}class ALe extends VM{constructor(){super("recentlyUsed"),this._cache=new HA(300,.66),this._seq=0}memorize(e,t,i){const s=`${e.getLanguageId()}/${i.textLabel}`;this._cache.set(s,{touch:this._seq++,type:i.completion.kind,insertText:i.completion.insertText})}select(e,t,i){if(i.length===0)return 0;const s=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(s))return super.select(e,t,i);let r=i[0].score[0],o=-1,a=-1,l=-1;for(let c=0;c<i.length&&i[c].score[0]===r;c++){const h=`${e.getLanguageId()}/${i[c].textLabel}`,u=this._cache.peek(h);if(u&&u.touch>l&&u.type===i[c].completion.kind&&u.insertText===i[c].completion.insertText&&(l=u.touch,a=c),i[c].completion.preselect&&o===-1)return o=c}return a!==-1?a:o!==-1?o:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();let t=0;for(const[i,s]of e)s.touch=t,s.type=typeof s.type=="number"?s.type:gV(s.type),this._cache.set(i,s);this._seq=this._cache.size}}class MLe extends VM{constructor(){super("recentlyUsedByPrefix"),this._trie=of.forStrings(),this._seq=0}memorize(e,t,i){const{word:s}=e.getWordUntilPosition(t),r=`${e.getLanguageId()}/${s}`;this._trie.set(r,{type:i.completion.kind,insertText:i.completion.insertText,touch:this._seq++})}select(e,t,i){let{word:s}=e.getWordUntilPosition(t);if(!s)return super.select(e,t,i);let r=`${e.getLanguageId()}/${s}`,o=this._trie.get(r);if(o||(o=this._trie.findSubstr(r)),o)for(let a=0;a<i.length;a++){let{kind:l,insertText:c}=i[a].completion;if(l===o.type&&c===o.insertText)return a}return super.select(e,t,i)}toJSON(){let e=[];return this._trie.forEach((t,i)=>e.push([i,t])),e.sort((t,i)=>-(t[1].touch-i[1].touch)).forEach((t,i)=>t[1].touch=i),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,i]of e)i.type=typeof i.type=="number"?i.type:gV(i.type),this._trie.set(t,i)}}}let e0=class sw{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new ee,this._persistSoon=new Wt(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(i=>{i.reason===BI.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,i){this._withStrategy(e,t).memorize(e,t,i),this._persistSoon.schedule()}select(e,t,i){return this._withStrategy(e,t).select(e,t,i)}_withStrategy(e,t){var i;const s=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((i=this._strategy)===null||i===void 0?void 0:i.name)!==s){this._saveState();const r=sw._strategyCtors.get(s)||nU;this._strategy=new r;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get(`${sw._storagePrefix}/${s}`,a);l&&this._strategy.fromJSON(JSON.parse(l))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=JSON.stringify(this._strategy);this._storageService.store(`${sw._storagePrefix}/${this._strategy.name}`,i,t,1)}}};e0._strategyCtors=new Map([["recentlyUsedByPrefix",MLe],["recentlyUsed",ALe],["first",nU]]);e0._storagePrefix="suggest/memories";e0=NLe([$5(0,qu),$5(1,si)],e0);const sU=Xe("ISuggestMemories");Ru(sU,e0,!0);var RLe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},OLe=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let t0=class rU{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=rU.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(i=>i.hasChanged(110)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(110)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const i=this._editor.getModel(),s=this._editor.getSelection(),r=i.getWordAtPosition(s.getStartPosition());if(!r){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(r.endColumn===s.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};t0.AtEnd=new he("atEndOfWord",!1);t0=RLe([OLe(1,Le)],t0);var FLe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},PLe=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let Du=class rw{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=rw.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)===null||e===void 0||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},i){if(e.items.length===0){this.reset();return}if(rw._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=i,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,i){let s=i;for(;s=(s+t.items.length+(e?1:-1))%t.items.length,!(s===i||!t.items[s].completion.additionalTextEdits););return s}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(!!this._model)try{this._ignore=!0,this._index=rw._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};Du.OtherSuggestions=new he("hasOtherSuggestions",!1);Du=FLe([PLe(1,Le)],Du);class BLe{constructor(e,t,i){this._disposables=new ee,this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(s=>{if(this._active&&!t.isFrozen()){const r=s.charCodeAt(s.length-1);this._active.acceptCharacters.has(r)&&e.getOption(0)&&i(this._active.item)}}))}_onItem(e){if(!e||!ia(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new ohe;for(const i of e.item.completion.commitCharacters)i.length>0&&t.add(i.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}var VLe=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class Ns{provideSelectionRanges(e,t){return VLe(this,void 0,void 0,function*(){const i=[];for(const s of t){const r=[];i.push(r);const o=new Map;yield new Promise(a=>Ns._bracketsRightYield(a,0,e,s,o)),yield new Promise(a=>Ns._bracketsLeftYield(a,0,e,s,o,r))}return i})}static _bracketsRightYield(e,t,i,s,r){const o=new Map,a=Date.now();for(;;){if(t>=Ns._maxRounds){e();break}if(!s){e();break}let l=i.findNextBracket(s);if(!l){e();break}if(Date.now()-a>Ns._maxDuration){setTimeout(()=>Ns._bracketsRightYield(e,t+1,i,s,r));break}const h=l.close[0];if(l.isOpen){let u=o.has(h)?o.get(h):0;o.set(h,u+1)}else{let u=o.has(h)?o.get(h):0;if(u-=1,o.set(h,Math.max(0,u)),u<0){let d=r.get(h);d||(d=new bs,r.set(h,d)),d.push(l.range)}}s=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,i,s,r,o){const a=new Map,l=Date.now();for(;;){if(t>=Ns._maxRounds&&r.size===0){e();break}if(!s){e();break}let c=i.findPrevBracket(s);if(!c){e();break}if(Date.now()-l>Ns._maxDuration){setTimeout(()=>Ns._bracketsLeftYield(e,t+1,i,s,r,o));break}const u=c.close[0];if(c.isOpen){let d=a.has(u)?a.get(u):0;if(d-=1,a.set(u,Math.max(0,d)),d<0){let f=r.get(u);if(f){let g=f.shift();f.size===0&&r.delete(u);const p=I.fromPositions(c.range.getEndPosition(),g.getStartPosition()),_=I.fromPositions(c.range.getStartPosition(),g.getEndPosition());o.push({range:p}),o.push({range:_}),Ns._addBracketLeading(i,_,o)}}}else{let d=a.has(u)?a.get(u):0;a.set(u,d+1)}s=c.range.getStartPosition()}}static _addBracketLeading(e,t,i){if(t.startLineNumber===t.endLineNumber)return;const s=t.startLineNumber,r=e.getLineFirstNonWhitespaceColumn(s);r!==0&&r!==t.startColumn&&(i.push({range:I.fromPositions(new P(s,r),t.getEndPosition())}),i.push({range:I.fromPositions(new P(s,1),t.getEndPosition())}));const o=s-1;if(o>0){const a=e.getLineFirstNonWhitespaceColumn(o);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(o)&&(i.push({range:I.fromPositions(new P(o,a),t.getEndPosition())}),i.push({range:I.fromPositions(new P(o,1),t.getEndPosition())}))}}}Ns._maxDuration=30;Ns._maxRounds=2;var WLe=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class Fo{static create(e,t){return WLe(this,void 0,void 0,function*(){if(!t.getOption(105).localityBonus||!t.hasModel())return Fo.None;const i=t.getModel(),s=t.getPosition();if(!e.canComputeWordRanges(i.uri))return Fo.None;const[r]=yield new Ns().provideSelectionRanges(i,[s]);if(r.length===0)return Fo.None;const o=yield e.computeWordRanges(i.uri,r[0].range);if(!o)return Fo.None;const a=i.getWordUntilPosition(s);return delete o[a.word],new class extends Fo{distance(l,c){if(!s.equals(t.getPosition()))return 0;if(c.kind===17)return 2<<20;let h=typeof c.label=="string"?c.label:c.label.label,u=o[h];if(PV(u))return 2<<20;let d=JA(u,I.fromPositions(l),I.compareRangesUsingStarts),f=d>=0?u[d]:u[Math.max(0,~d-1)],g=r.length;for(const p of r){if(!I.containsRange(p.range,f))break;g-=1}return g}}})}}Fo.None=new class extends Fo{distance(){return 0}};class hh{constructor(e,t,i,s,r,o,a){this.clipboardText=a,this._snippetCompareFn=hh._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=s,this._options=r,this._refilterKind=1,this._lineContext=i,o==="top"?this._snippetCompareFn=hh._compareCompletionItemsSnippetsUp:o==="bottom"&&(this._snippetCompareFn=hh._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();const e=new Set;for(let[t,i]of this._providerInfo)i&&e.add(t);return e}adopt(e){let t=[];for(let i=0;i<this._items.length;)e.has(this._items[i].provider)?i++:(t.push(this._items[i]),this._items[i]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;const e=[],{leadingLineContent:t,characterCountDelta:i}=this._lineContext;let s="",r="";const o=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||o.length>2e3?O_:Ube;for(let c=0;c<o.length;c++){const h=o[c];if(h.isInvalid)continue;this._providerInfo.set(h.provider,Boolean(h.container.incomplete));const u=h.position.column-h.editStart.column,d=u+i-(h.position.column-this._column);if(s.length!==d&&(s=d===0?"":t.slice(-d),r=s.toLowerCase()),h.word=s,d===0)h.score=Jr.Default;else{let f=0;for(;f<u;){const g=s.charCodeAt(f);if(g===32||g===9)f+=1;else break}if(f>=d)h.score=Jr.Default;else if(typeof h.completion.filterText=="string"){let g=l(s,r,f,h.completion.filterText,h.filterTextLow,0,!1);if(!g)continue;_E(h.completion.filterText,h.textLabel)===0?h.score=g:(h.score=Wbe(s,r,f,h.textLabel,h.labelLow,0),h.score[0]=g[0])}else{let g=l(s,r,f,h.textLabel,h.labelLow,0,!1);if(!g)continue;h.score=g}}h.idx=c,h.distance=this._wordDistance.distance(h.position,h.completion),a.push(h),e.push(h.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?VE(e.length-.85,e,(c,h)=>c-h):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return hh._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return hh._compareCompletionItems(e,t)}}var zLe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},yd=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},HLe=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class Sd{constructor(e,t,i,s){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.auto=i,this.shy=s}static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),i=e.getPosition();t.tokenizeIfCheap(i.lineNumber);const s=t.getWordAtPosition(i);return!(!s||s.endColumn!==i.column||!isNaN(Number(s.word)))}}function $Le(n,e,t){if(!Boolean(e.getContextKeyValue("inlineSuggestionVisible")))return!0;const i=t.getValue("editor.inlineSuggest.allowQuickSuggestions");return i!==void 0?Boolean(i):!1}function ULe(n,e,t){if(!Boolean(e.getContextKeyValue("inlineSuggestionVisible")))return!0;const i=t.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters");return i!==void 0?Boolean(i):!1}let OT=class oU{constructor(e,t,i,s,r,o,a){this._editor=e,this._editorWorkerService=t,this._clipboardService=i,this._telemetryService=s,this._logService=r,this._contextKeyService=o,this._configurationService=a,this._toDispose=new ee,this._quickSuggestDelay=10,this._triggerCharacterListener=new ee,this._triggerQuickSuggest=new Wn,this._state=0,this._completionDisposables=new ee,this._onDidCancel=new R,this._onDidTrigger=new R,this._onDidSuggest=new R,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new Se(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters(),this._updateQuickSuggest()})),this._toDispose.add(Hr.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(c=>{this._onCursorChange(c)}));let l=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{l=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{l=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{l||this._refilterCompletionItems()})),this._updateTriggerCharacters(),this._updateQuickSuggest()}dispose(){He(this._triggerCharacterListener),He([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateQuickSuggest(){this._quickSuggestDelay=this._editor.getOption(79),(isNaN(this._quickSuggestDelay)||!this._quickSuggestDelay&&this._quickSuggestDelay!==0||this._quickSuggestDelay<0)&&(this._quickSuggestDelay=10)}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(80)||!this._editor.hasModel()||!this._editor.getOption(108))return;const e=new Map;for(const i of Hr.all(this._editor.getModel()))for(const s of i.triggerCharacters||[]){let r=e.get(s);r||(r=new Set,r.add(J1e()),e.set(s,r)),r.add(i)}const t=i=>{if(!ULe(this._editor,this._contextKeyService,this._configurationService)||Sd.shouldAutoTrigger(this._editor))return;if(!i){const o=this._editor.getPosition();i=this._editor.getModel().getLineContent(o.lineNumber).substr(0,o.column-1)}let s="";Bf(i.charCodeAt(i.length-1))?Ri(i.charCodeAt(i.length-2))&&(s=i.substr(i.length-2)):s=i.charAt(i.length-1);const r=e.get(s);if(r){const o=this._completionModel?{items:this._completionModel.adopt(r),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,triggerCharacter:s},Boolean(this._completionModel),r,o)}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(t))}get state(){return this._state}cancel(e=!1){var t;this._state!==0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)===null||t===void 0||t.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._state!==0&&(!this._editor.hasModel()||!Hr.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._state===2,shy:!1},!0))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._state===0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._state!==0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._state===0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){this._editor.getOption(78)!==!1&&(this._editor.getOption(105).snippetsPreventQuickSuggestions&&Wi.get(this._editor).isInSnippet()||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._state!==0||!Sd.shouldAutoTrigger(this._editor)||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),i=this._editor.getOption(78);if(i!==!1){if(i!==!0){e.tokenizeIfCheap(t.lineNumber);const s=e.getLineTokens(t.lineNumber),r=s.getStandardTokenType(s.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(!(i.other&&r===0||i.comments&&r===1||i.strings&&r===2))return}!$Le(this._editor,this._contextKeyService,this._configurationService)||!Hr.has(e)||this.trigger({auto:!0,shy:!1})}},this._quickSuggestDelay)))}_refilterCompletionItems(){Promise.resolve().then(()=>{if(this._state===0||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),i=new Sd(e,t,this._state===2,!1);this._onNewContext(i)})}trigger(e,t=!1,i,s){var r;if(!this._editor.hasModel())return;const o=this._editor.getModel(),a=e.auto,l=new Sd(o,this._editor.getPosition(),a,e.shy);this.cancel(t),this._state=a?2:1,this._onDidTrigger.fire({auto:a,shy:e.shy,position:this._editor.getPosition()}),this._context=l;let c={triggerKind:(r=e.triggerKind)!==null&&r!==void 0?r:0};e.triggerCharacter&&(c={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new go;const h=this._editor.getOption(100);let u=1;switch(h){case"top":u=0;break;case"bottom":u=2;break}const{itemKind:d,showDeprecated:f}=oU._createSuggestFilter(this._editor),g=Fo.create(this._editorWorkerService,this._editor),p=HH(o,this._editor.getPosition(),new sy(u,d,i,f),c,this._requestToken.token);Promise.all([p,g]).then(([_,v])=>HLe(this,void 0,void 0,function*(){var b;if((b=this._requestToken)===null||b===void 0||b.dispose(),!this._editor.hasModel())return;let w=s==null?void 0:s.clipboardText;if(!w&&_.needsClipboard&&(w=yield this._clipboardService.readText()),this._state===0)return;const C=this._editor.getModel();let y=_.items;if(s){const S=$H(u);y=y.concat(s.items).sort(S)}const D=new Sd(C,this._editor.getPosition(),a,e.shy);this._completionModel=new hh(y,this._context.column,{leadingLineContent:D.leadingLineContent,characterCountDelta:D.column-this._context.column},v,this._editor.getOption(105),this._editor.getOption(100),w),this._completionDisposables.add(_.disposable),this._onNewContext(D),this._reportDurationsTelemetry(_.durations)})).catch(Ie)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static _createSuggestFilter(e){const t=new Set;e.getOption(100)==="none"&&t.add(27);const s=e.getOption(105);return s.showMethods||t.add(0),s.showFunctions||t.add(1),s.showConstructors||t.add(2),s.showFields||t.add(3),s.showVariables||t.add(4),s.showClasses||t.add(5),s.showStructs||t.add(6),s.showInterfaces||t.add(7),s.showModules||t.add(8),s.showProperties||t.add(9),s.showEvents||t.add(10),s.showOperators||t.add(11),s.showUnits||t.add(12),s.showValues||t.add(13),s.showConstants||t.add(14),s.showEnums||t.add(15),s.showEnumMembers||t.add(16),s.showKeywords||t.add(17),s.showWords||t.add(18),s.showColors||t.add(19),s.showFiles||t.add(20),s.showReferences||t.add(21),s.showColors||t.add(22),s.showFolders||t.add(23),s.showTypeParameters||t.add(24),s.showSnippets||t.add(27),s.showUsers||t.add(25),s.showIssues||t.add(26),{itemKind:t,showDeprecated:s.showDeprecated}}_onNewContext(e){if(!!this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(ci(e.leadingLineContent)!==ci(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1},!0):this.cancel();return}if(!!this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){const t=new Set(Hr.all(this._editor.getModel()));for(let s of this._completionModel.allProvider)t.delete(s);const i=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1},!0,t,{items:i,clipboardText:this._completionModel.clipboardText});return}if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&e.leadingWord.word.length!==0){const{incomplete:t}=this._completionModel,i=this._completionModel.adopt(t);this.trigger({auto:this._state===2,shy:!1,triggerKind:2},!0,t,{items:i,clipboardText:this._completionModel.clipboardText})}else{let t=this._completionModel.lineContext,i=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){if(Sd.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.auto,shy:!1},!0);return}if(this._context.auto){this.cancel();return}else if(this._completionModel.lineContext=t,i=this._completionModel.items.length>0,i&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,isFrozen:i})}}}}};OT=zLe([yd(1,Oc),yd(2,Hu),yd(3,Ng),yd(4,fl),yd(5,Le),yd(6,si)],OT);class DS{constructor(e,t){this._disposables=new ee,this._lastOvertyped=[],this._empty=!0,this._disposables.add(e.onWillType(()=>{if(!this._empty||!e.hasModel())return;const i=e.getSelections(),s=i.length;let r=!1;for(let a=0;a<s;a++)if(!i[a].isEmpty()){r=!0;break}if(!r)return;this._lastOvertyped=[];const o=e.getModel();for(let a=0;a<s;a++){const l=i[a];if(o.getValueLengthInRange(l)>DS._maxSelectionLength)return;this._lastOvertyped[a]={value:o.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}this._empty=!1})),this._disposables.add(t.onDidCancel(i=>{!this._empty&&!i.retrigger&&(this._empty=!0)}))}getLastOvertypedInfo(e){if(!this._empty&&e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}DS._maxSelectionLength=51200;var jLe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},oL=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};class WM extends ag{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=m("ddd","{0} ({1})",this._action.label,WM.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return(t=e.getLabel())===null||t===void 0?void 0:t.replace(/\benter\b/gi,"\u23CE")}}let FT=class{constructor(e,t,i,s){this._menuService=i,this._contextKeyService=s,this._menuDisposables=new ee,this.element=Y(e,J(".suggest-status-bar"));const r=o=>o instanceof gc?t.createInstance(WM,o,void 0):void 0;this._leftActions=new ll(this.element,{actionViewItemProvider:r}),this._rightActions=new ll(this.element,{actionViewItemProvider:r}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(Cc,this._contextKeyService),t=()=>{const i=[],s=[];for(let[r,o]of e.getActions())r==="left"?i.push(...o):s.push(...o);this._leftActions.clear(),this._leftActions.push(i),this._rightActions.clear(),this._rightActions.push(s)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};FT=jLe([oL(1,pt),oL(2,Tg),oL(3,Le)],FT);const qLe=M("symbolIcon.arrayForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),KLe=M("symbolIcon.booleanForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),GLe=M("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},m("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),YLe=M("symbolIcon.colorForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ZLe=M("symbolIcon.constantForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),XLe=M("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},m("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),QLe=M("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},m("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),JLe=M("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},m("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),eke=M("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},m("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),tke=M("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},m("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ike=M("symbolIcon.fileForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),nke=M("symbolIcon.folderForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ske=M("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},m("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),rke=M("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},m("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),oke=M("symbolIcon.keyForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ake=M("symbolIcon.keywordForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),lke=M("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},m("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),cke=M("symbolIcon.moduleForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),hke=M("symbolIcon.namespaceForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),uke=M("symbolIcon.nullForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),dke=M("symbolIcon.numberForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),fke=M("symbolIcon.objectForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),gke=M("symbolIcon.operatorForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),pke=M("symbolIcon.packageForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),mke=M("symbolIcon.propertyForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),_ke=M("symbolIcon.referenceForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),bke=M("symbolIcon.snippetForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),vke=M("symbolIcon.stringForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),wke=M("symbolIcon.structForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Cke=M("symbolIcon.textForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),yke=M("symbolIcon.typeParameterForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ske=M("symbolIcon.unitForeground",{dark:ge,light:ge,hc:ge},m("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),xke=M("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},m("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));kt((n,e)=>{const t=n.getColor(qLe);t&&e.addRule(`${se.symbolArray.cssSelector} { color: ${t}; }`);const i=n.getColor(KLe);i&&e.addRule(`${se.symbolBoolean.cssSelector} { color: ${i}; }`);const s=n.getColor(GLe);s&&e.addRule(`${se.symbolClass.cssSelector} { color: ${s}; }`);const r=n.getColor(lke);r&&e.addRule(`${se.symbolMethod.cssSelector} { color: ${r}; }`);const o=n.getColor(YLe);o&&e.addRule(`${se.symbolColor.cssSelector} { color: ${o}; }`);const a=n.getColor(ZLe);a&&e.addRule(`${se.symbolConstant.cssSelector} { color: ${a}; }`);const l=n.getColor(XLe);l&&e.addRule(`${se.symbolConstructor.cssSelector} { color: ${l}; }`);const c=n.getColor(QLe);c&&e.addRule(`
			${se.symbolValue.cssSelector},${se.symbolEnum.cssSelector} { color: ${c}; }`);const h=n.getColor(JLe);h&&e.addRule(`${se.symbolEnumMember.cssSelector} { color: ${h}; }`);const u=n.getColor(eke);u&&e.addRule(`${se.symbolEvent.cssSelector} { color: ${u}; }`);const d=n.getColor(tke);d&&e.addRule(`${se.symbolField.cssSelector} { color: ${d}; }`);const f=n.getColor(ike);f&&e.addRule(`${se.symbolFile.cssSelector} { color: ${f}; }`);const g=n.getColor(nke);g&&e.addRule(`${se.symbolFolder.cssSelector} { color: ${g}; }`);const p=n.getColor(ske);p&&e.addRule(`${se.symbolFunction.cssSelector} { color: ${p}; }`);const _=n.getColor(rke);_&&e.addRule(`${se.symbolInterface.cssSelector} { color: ${_}; }`);const v=n.getColor(oke);v&&e.addRule(`${se.symbolKey.cssSelector} { color: ${v}; }`);const b=n.getColor(ake);b&&e.addRule(`${se.symbolKeyword.cssSelector} { color: ${b}; }`);const w=n.getColor(cke);w&&e.addRule(`${se.symbolModule.cssSelector} { color: ${w}; }`);const C=n.getColor(hke);C&&e.addRule(`${se.symbolNamespace.cssSelector} { color: ${C}; }`);const y=n.getColor(uke);y&&e.addRule(`${se.symbolNull.cssSelector} { color: ${y}; }`);const D=n.getColor(dke);D&&e.addRule(`${se.symbolNumber.cssSelector} { color: ${D}; }`);const S=n.getColor(fke);S&&e.addRule(`${se.symbolObject.cssSelector} { color: ${S}; }`);const x=n.getColor(gke);x&&e.addRule(`${se.symbolOperator.cssSelector} { color: ${x}; }`);const k=n.getColor(pke);k&&e.addRule(`${se.symbolPackage.cssSelector} { color: ${k}; }`);const F=n.getColor(mke);F&&e.addRule(`${se.symbolProperty.cssSelector} { color: ${F}; }`);const A=n.getColor(_ke);A&&e.addRule(`${se.symbolReference.cssSelector} { color: ${A}; }`);const z=n.getColor(bke);z&&e.addRule(`${se.symbolSnippet.cssSelector} { color: ${z}; }`);const H=n.getColor(vke);H&&e.addRule(`${se.symbolString.cssSelector} { color: ${H}; }`);const te=n.getColor(wke);te&&e.addRule(`${se.symbolStruct.cssSelector} { color: ${te}; }`);const ie=n.getColor(Cke);ie&&e.addRule(`${se.symbolText.cssSelector} { color: ${ie}; }`);const ae=n.getColor(yke);ae&&e.addRule(`${se.symbolTypeParameter.cssSelector} { color: ${ae}; }`);const _e=n.getColor(Ske);_e&&e.addRule(`${se.symbolUnit.cssSelector} { color: ${_e}; }`);const me=n.getColor(xke);me&&e.addRule(`${se.symbolVariable.cssSelector} { color: ${me}; }`)});class aU{constructor(){this._onDidWillResize=new R,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new R,this.onDidResize=this._onDidResize.event,this._sashListener=new ee,this._size=new gt(0,0),this._minSize=new gt(0,0),this._maxSize=new gt(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new Ki(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new Ki(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new Ki(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:VC.North}),this._southSash=new Ki(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:VC.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,i=0;this._sashListener.add(ue.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,i=0)})),this._sashListener.add(ue.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,i=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(s=>{e&&(i=s.currentX-s.startX,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(s=>{e&&(i=-(s.currentX-s.startX),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(s=>{e&&(t=-(s.currentY-s.startY),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(s=>{e&&(t=s.currentY-s.startY,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(ue.any(this._eastSash.onDidReset,this._westSash.onDidReset)(s=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(ue.any(this._northSash.onDidReset,this._southSash.onDidReset)(s=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,i,s){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=i?3:0,this._westSash.state=s?3:0}layout(e=this.size.height,t=this.size.width){const{height:i,width:s}=this._minSize,{height:r,width:o}=this._maxSize;e=Math.max(i,Math.min(r,e)),t=Math.max(s,Math.min(o,t));const a=new gt(t,e);gt.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}var Dke=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Lke=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};function zM(n){return!!n&&Boolean(n.completion.documentation||n.completion.detail&&n.completion.detail!==n.completion.label)}let PT=class{constructor(e,t){this._editor=e,this._onDidClose=new R,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new R,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new ee,this._renderDisposeable=new ee,this._borderWidth=1,this._size=new gt(330,0),this.domNode=J(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(xu,{editor:e}),this._body=J(".body"),this._scrollbar=new q1(this._body,{}),Y(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=Y(this._body,J(".header")),this._close=Y(this._header,J("span"+se.close.cssSelector)),this._close.title=m("details.close","Close"),this._type=Y(this._header,J("p.type")),this._docs=Y(this._body,J("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(43)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(43),i=t.getMassagedFontFamily(vr?Cn.fontFamily:null),s=e.get(106)||t.fontSize,r=e.get(107)||t.lineHeight,o=t.fontWeight,a=`${s}px`,l=`${r}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${r/s}`,this.domNode.style.fontWeight=o,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=i,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){const e=this._editor.getOption(107)||this._editor.getOption(43).lineHeight,t=this._borderWidth,i=t*2;return{lineHeight:e,borderWidth:t,borderHeight:i,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=m("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var i,s;this._renderDisposeable.clear();let{detail:r,documentation:o}=e.completion;if(t){let a="";a+=`score: ${e.score[0]}
`,a+=`prefix: ${(i=e.word)!==null&&i!==void 0?i:"(no prefix)"}
`,a+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,a+=`distance: ${e.distance} (localityBonus-setting)
`,a+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,a+=`commit_chars: ${(s=e.completion.commitCharacters)===null||s===void 0?void 0:s.join("")}
`,o=new ig().appendCodeblock("empty",a),r=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!zM(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),r){const a=r.length>1e5?`${r.substr(0,1e5)}\u2026`:r;this._type.textContent=a,this._type.title=a,ps(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(a))}else Yi(this._type),this._type.title="",Nn(this._type),this.domNode.classList.add("no-type");if(Yi(this._docs),typeof o=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=o;else if(o){this._docs.classList.add("markdown-docs"),Yi(this._docs);const a=this._markdownRenderer.render(o);this._docs.appendChild(a.element),this._renderDisposeable.add(a),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=a=>{a.preventDefault(),a.stopPropagation()},this._close.onclick=a=>{a.preventDefault(),a.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(e,t){const i=new gt(e,t);gt.equals(i,this._size)||(this._size=i,Iae(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};PT=Dke([Lke(1,pt)],PT);class kke{constructor(e,t){this.widget=e,this._editor=t,this._disposables=new ee,this._added=!1,this._resizable=new aU,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let i,s,r=0,o=0;this._disposables.add(this._resizable.onDidWillResize(()=>{i=this._topLeft,s=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(i&&s){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(o=s.width-a.dimension.width,l=!0),a.north&&(r=s.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:i.top+r,left:i.left+o})}a.done&&(i=void 0,s=void 0,r=0,o=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(a=this._userSize)!==null&&a!==void 0?a:this.widget.size)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e){var t;const i=Gi(e);this._anchorBox=i,this._placeAtAnchor(this._anchorBox,(t=this._userSize)!==null&&t!==void 0?t:this.widget.size)}_placeAtAnchor(e,t){var i;const s=c1(document.body),r=this.widget.getLayoutInfo(),o=new gt(220,2*r.lineHeight),a=e.top,l=function(){const b=s.width-(e.left+e.width+r.borderWidth+r.horizontalPadding),w=-r.borderWidth+e.left+e.width,C=new gt(b,s.height-e.top-r.borderHeight-r.verticalPadding),y=C.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:a,left:w,fit:b-t.width,maxSizeTop:C,maxSizeBottom:y,minSize:o.with(Math.min(b,o.width))}}(),c=function(){const b=e.left-r.borderWidth-r.horizontalPadding,w=Math.max(r.horizontalPadding,e.left-t.width-r.borderWidth),C=new gt(b,s.height-e.top-r.borderHeight-r.verticalPadding),y=C.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:a,left:w,fit:b-t.width,maxSizeTop:C,maxSizeBottom:y,minSize:o.with(Math.min(b,o.width))}}(),h=function(){const b=e.left,w=-r.borderWidth+e.top+e.height,C=new gt(e.width-r.borderHeight,s.height-e.top-e.height-r.verticalPadding);return{top:w,left:b,fit:C.height-t.height,maxSizeBottom:C,maxSizeTop:C,minSize:o.with(C.width)}}(),u=[l,c,h],d=(i=u.find(b=>b.fit>=0))!==null&&i!==void 0?i:u.sort((b,w)=>w.fit-b.fit)[0],f=e.top+e.height-r.borderHeight;let g,p=t.height;const _=Math.max(d.maxSizeTop.height,d.maxSizeBottom.height);p>_&&(p=_);let v;p<=d.maxSizeTop.height?(g=!0,v=d.maxSizeTop):(g=!1,v=d.maxSizeBottom),this._applyTopLeft({left:d.left,top:g?d.top:f-p}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!g,d===l,g,d!==l),this._resizable.minSize=d.minSize,this._resizable.maxSize=v,this._resizable.layout(p,Math.min(v.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}}var Za;(function(n){n[n.FILE=0]="FILE",n[n.FOLDER=1]="FOLDER",n[n.ROOT_FOLDER=2]="ROOT_FOLDER"})(Za||(Za={}));function bv(n,e,t,i){const s=i===Za.ROOT_FOLDER?["rootfolder-icon"]:i===Za.FOLDER?["folder-icon"]:["file-icon"];if(t){let r;if(t.scheme===Ve.data?r=hc.parseMetaData(t).get(hc.META_DATA_LABEL):r=U5(sV(t).toLowerCase()),i===Za.FOLDER)s.push(`${r}-name-folder-icon`);else{if(r){if(s.push(`${r}-name-file-icon`),r.length<=255){const a=r.split(".");for(let l=1;l<a.length;l++)s.push(`${a.slice(l).join(".")}-ext-file-icon`)}s.push("ext-file-icon")}const o=Eke(n,e,t);o&&s.push(`${U5(o)}-lang-file-icon`)}}return s}function Eke(n,e,t){if(!t)return null;let i=null;if(t.scheme===Ve.data){const r=hc.parseMetaData(t).get(hc.META_DATA_MIME);r&&(i=e.getModeId(r))}else{const s=n.getModel(t);s&&(i=s.getLanguageId())}return i&&i!==Fg?i:e.getModeIdByFilepathOrFirstLine(t)}function U5(n){return n.replace(/[\11\12\14\15\40]/g,"/")}var Ike=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},aL=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},Sp;function lU(n){return`suggest-aria-id:${n}`}const Tke=un("suggest-more-info",se.chevronRight,m("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),Nke=new(Sp=class ow{extract(e,t){if(e.textLabel.match(ow._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(ow._regexStrict))return t[0]=e.completion.detail,!0;if(typeof e.completion.documentation=="string"){const i=ow._regexRelaxed.exec(e.completion.documentation);if(i&&(i.index===0||i.index+i[0].length===e.completion.documentation.length))return t[0]=i[0],!0}return!1}},Sp._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,Sp._regexStrict=new RegExp(`^${Sp._regexRelaxed.source}$`,"i"),Sp);let BT=class{constructor(e,t,i,s){this._editor=e,this._modelService=t,this._modeService=i,this._themeService=s,this._onDidToggleDetails=new R,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=Object.create(null);t.disposables=new ee,t.root=e,t.root.classList.add("show-file-icons"),t.icon=Y(e,J(".icon")),t.colorspan=Y(t.icon,J("span.colorspan"));const i=Y(e,J(".contents")),s=Y(i,J(".main"));t.iconContainer=Y(s,J(".icon-label.codicon")),t.left=Y(s,J("span.left")),t.right=Y(s,J("span.right")),t.iconLabel=new yM(t.left,{supportHighlights:!0,supportIcons:!0}),t.disposables.add(t.iconLabel),t.parametersLabel=Y(t.left,J("span.signature-label")),t.qualifierLabel=Y(t.left,J("span.qualifier-label")),t.detailsLabel=Y(t.right,J("span.details-label")),t.readMore=Y(t.right,J("span.readMore"+Rt.asCSSSelector(Tke))),t.readMore.title=m("readMore","Read More");const r=()=>{const o=this._editor.getOptions(),a=o.get(43),l=a.getMassagedFontFamily(vr?Cn.fontFamily:null),c=a.fontFeatureSettings,h=o.get(106)||a.fontSize,u=o.get(107)||a.lineHeight,d=a.fontWeight,f=`${h}px`,g=`${u}px`;t.root.style.fontSize=f,t.root.style.fontWeight=d,s.style.fontFamily=l,s.style.fontFeatureSettings=c,s.style.lineHeight=g,t.icon.style.height=g,t.icon.style.width=g,t.readMore.style.height=g,t.readMore.style.width=g};return r(),t.disposables.add(this._editor.onDidChangeConfiguration(o=>{(o.hasChanged(43)||o.hasChanged(106)||o.hasChanged(107))&&r()})),t}renderElement(e,t,i){const{completion:s}=e;i.root.id=lU(t),i.colorspan.style.backgroundColor="";const r={labelEscapeNewLines:!0,matches:nM(e.score)};let o=[];if(s.kind===19&&Nke.extract(e,o))i.icon.className="icon customcolor",i.iconContainer.className="icon hide",i.colorspan.style.backgroundColor=o[0];else if(s.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){i.icon.className="icon hide",i.iconContainer.className="icon hide";const a=bv(this._modelService,this._modeService,xe.from({scheme:"fake",path:e.textLabel}),Za.FILE),l=bv(this._modelService,this._modeService,xe.from({scheme:"fake",path:s.detail}),Za.FILE);r.extraClasses=a.length>l.length?a:l}else s.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(i.icon.className="icon hide",i.iconContainer.className="icon hide",r.extraClasses=e2([bv(this._modelService,this._modeService,xe.from({scheme:"fake",path:e.textLabel}),Za.FOLDER),bv(this._modelService,this._modeService,xe.from({scheme:"fake",path:s.detail}),Za.FOLDER)])):(i.icon.className="icon hide",i.iconContainer.className="",i.iconContainer.classList.add("suggest-icon",...tce(s.kind).split(" ")));s.tags&&s.tags.indexOf(1)>=0&&(r.extraClasses=(r.extraClasses||[]).concat(["deprecated"]),r.matches=[]),i.iconLabel.setLabel(e.textLabel,void 0,r),typeof s.label=="string"?(i.parametersLabel.textContent="",i.detailsLabel.textContent=lL(s.detail||""),i.root.classList.add("string-label")):(i.parametersLabel.textContent=lL(s.label.detail||""),i.detailsLabel.textContent=lL(s.label.description||""),i.root.classList.remove("string-label")),this._editor.getOption(105).showInlineDetails?ps(i.detailsLabel):Nn(i.detailsLabel),zM(e)?(i.right.classList.add("can-expand-details"),ps(i.readMore),i.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},i.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(i.right.classList.remove("can-expand-details"),Nn(i.readMore),i.readMore.onmousedown=null,i.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};BT=Ike([aL(1,zn),aL(2,Hn),aL(3,At)],BT);function lL(n){return n.replace(/\r\n|\r|\n/g,"")}var Ake=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},vv=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},Mke=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const Rke=M("editorSuggestWidget.background",{dark:yr,light:yr,hc:yr},m("editorSuggestWidgetBackground","Background color of the suggest widget.")),Oke=M("editorSuggestWidget.border",{dark:Wh,light:Wh,hc:Wh},m("editorSuggestWidgetBorder","Border color of the suggest widget.")),Fke=M("editorSuggestWidget.foreground",{dark:Zl,light:Zl,hc:Zl},m("editorSuggestWidgetForeground","Foreground color of the suggest widget.")),Pke=M("editorSuggestWidget.selectedForeground",{dark:Hv,light:Hv,hc:Hv},m("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget.")),Bke=M("editorSuggestWidget.selectedIconForeground",{dark:$v,light:$v,hc:$v},m("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget.")),Vke=M("editorSuggestWidget.selectedBackground",{dark:Uv,light:Uv,hc:Uv},m("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget.")),Wke=M("editorSuggestWidget.highlightForeground",{dark:mf,light:mf,hc:mf},m("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),zke=M("editorSuggestWidget.focusHighlightForeground",{dark:Qx,light:Qx,hc:Qx},m("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));class Hke{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof Cu}`}restore(){var e;const t=(e=this._service.get(this._key,0))!==null&&e!==void 0?e:"";try{const i=JSON.parse(t);if(gt.is(i))return gt.lift(i)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}let i0=class VT{constructor(e,t,i,s,r){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new Wn,this._disposables=new ee,this._onDidSelect=new R,this._onDidFocus=new R,this._onDidHide=new R,this._onDidShow=new R,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new R,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new aU,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new $ke(this,e),this._persistedSize=new Hke(t,e);class o{constructor(f,g,p=!1,_=!1){this.persistedSize=f,this.currentSize=g,this.persistHeight=p,this.persistWidth=_}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new o(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(d=>{var f,g,p,_;if(this._resize(d.dimension.width,d.dimension.height),a&&(a.persistHeight=a.persistHeight||!!d.north||!!d.south,a.persistWidth=a.persistWidth||!!d.east||!!d.west),!!d.done){if(a){const{itemHeight:v,defaultSize:b}=this.getLayoutInfo(),w=Math.round(v/2);let{width:C,height:y}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-y)<=w)&&(y=(g=(f=a.persistedSize)===null||f===void 0?void 0:f.height)!==null&&g!==void 0?g:b.height),(!a.persistWidth||Math.abs(a.currentSize.width-C)<=w)&&(C=(_=(p=a.persistedSize)===null||p===void 0?void 0:p.width)!==null&&_!==void 0?_:b.width),this._persistedSize.store(new gt(C,y))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=Y(this.element.domNode,J(".message")),this._listElement=Y(this.element.domNode,J(".tree"));const l=r.createInstance(PT,this.editor);l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new kke(l,this.editor);const c=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(105).showIcons);c();const h=r.createInstance(BT,this.editor);this._disposables.add(h),this._disposables.add(h.onDidToggleDetails(()=>this.toggleDetails())),this._list=new ga("SuggestWidget",this._listElement,{getHeight:d=>this.getLayoutInfo().itemHeight,getTemplateId:d=>"suggestion"},[h],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,accessibilityProvider:{getRole:()=>"option",getAriaLabel:d=>{if(d.isResolved&&this._isDetailsVisible()){const{documentation:f,detail:g}=d.completion,p=cr("{0}{1}",g||"",f?typeof f=="string"?f:f.value:"");return m("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",d.textLabel,p)}else return d.textLabel},getWidgetAriaLabel:()=>m("suggest","Suggest"),getWidgetRole:()=>"listbox"}}),this._status=r.createInstance(FT,this.element.domNode);const u=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(105).showStatusBar);u(),this._disposables.add(_u(this._list,s,{listInactiveFocusBackground:Vke,listInactiveFocusOutline:Bn})),this._disposables.add(s.onDidColorThemeChange(d=>this._onThemeChange(d))),this._onThemeChange(s.getColorTheme()),this._disposables.add(this._list.onMouseDown(d=>this._onListMouseDownOrTap(d))),this._disposables.add(this._list.onTap(d=>this._onListMouseDownOrTap(d))),this._disposables.add(this._list.onDidChangeSelection(d=>this._onListSelection(d))),this._disposables.add(this._list.onDidChangeFocus(d=>this._onListFocus(d))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(d=>{d.hasChanged(105)&&(u(),c())})),this._ctxSuggestWidgetVisible=Oe.Visible.bindTo(i),this._ctxSuggestWidgetDetailsVisible=Oe.DetailsVisible.bindTo(i),this._ctxSuggestWidgetMultipleSuggestions=Oe.MultipleSuggestions.bindTo(i),this._disposables.add(mi(this._details.widget.domNode,"keydown",d=>{this._onDetailsKeydown.fire(d)})),this._disposables.add(this.editor.onMouseDown(d=>this._onEditorMouseDown(d)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element=="undefined"||typeof e.index=="undefined"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const i=this._completionModel;i&&(this._onDidSelect.fire({item:e,index:t,model:i}),this.editor.focus())}_onThemeChange(e){const t=e.getColor(Rke);t&&(this.element.domNode.style.backgroundColor=t.toString(),this._messageElement.style.backgroundColor=t.toString(),this._details.widget.domNode.style.backgroundColor=t.toString());const i=e.getColor(Oke);i&&(this.element.domNode.style.borderColor=i.toString(),this._messageElement.style.borderColor=i.toString(),this._status.element.style.borderTopColor=i.toString(),this._details.widget.domNode.style.borderColor=i.toString(),this._detailsBorderColor=i.toString());const s=e.getColor(mc);s&&(this._detailsFocusBorderColor=s.toString()),this._details.widget.borderWidth=e.type==="hc"?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0});return}if(!this._completionModel)return;const i=e.elements[0],s=e.indexes[0];i!==this._focusedItem&&((t=this._currentSuggestionDetails)===null||t===void 0||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=i,this._list.reveal(s),this._currentSuggestionDetails=ks(r=>Mke(this,void 0,void 0,function*(){const o=Ff(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250);r.onCancellationRequested(()=>o.dispose());const a=yield i.resolve(r);return o.dispose(),a})),this._currentSuggestionDetails.then(()=>{s>=this._list.length||i!==this._list.element(s)||(this._ignoreFocusEvents=!0,this._list.splice(s,1,[i]),this._list.setFocus([s]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:lU(s)}))}).catch(Ie)),this._onDidFocus.fire({item:i,index:s,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:Nn(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=VT.LOADING_MESSAGE,Nn(this._listElement,this._status.element),ps(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=VT.NO_SUGGESTIONS_MESSAGE,Nn(this._listElement,this._status.element),ps(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:Nn(this._messageElement),ps(this._listElement,this._status.element),this._show();break;case 4:Nn(this._messageElement),ps(this._listElement,this._status.element),this._show();break;case 5:Nn(this._messageElement),ps(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=Ff(()=>this._setState(1),t)))}showSuggestions(e,t,i,s){var r,o;if(this._contentWidget.setPosition(this.editor.getPosition()),(r=this._loadingTimeout)===null||r===void 0||r.dispose(),(o=this._currentSuggestionDetails)===null||o===void 0||o.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),i&&this._state!==2&&this._state!==0){this._setState(4);return}const a=this._completionModel.items.length,l=a===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(a>1),l){this._setState(s?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(i?4:3),this._list.reveal(t,0),this._list.setFocus([t]),this._layout(this.element.size),this._detailsBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsBorderColor)}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._detailsBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsBorderColor)):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._detailsFocusBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsFocusBorderColor))}toggleDetails(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(zM(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),i=Math.ceil(this.getLayoutInfo().itemHeight*4.3);t&&t.height<i&&this._persistedSize.store(t.with(void 0,i))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&this._details.show(),this._positionDetails())}_layout(e){var t,i,s;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const r=c1(document.body),o=this.getLayoutInfo();e||(e=o.defaultSize);let a=e.height,l=e.width;if(this._status.element.style.lineHeight=`${o.itemHeight}px`,this._state===2||this._state===1)a=o.itemHeight+o.borderHeight,l=o.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new gt(l,a),this._contentWidget.setPreference(2);else{const c=r.width-o.borderHeight-2*o.horizontalPadding;l>c&&(l=c);const h=this._completionModel?this._completionModel.stats.pLabelLen*o.typicalHalfwidthCharacterWidth:l,u=o.statusBarHeight+this._list.contentHeight+o.borderHeight,d=o.itemHeight+o.statusBarHeight,f=Gi(this.editor.getDomNode()),g=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),p=f.top+g.top+g.height,_=Math.min(r.height-p-o.verticalPadding,u),v=f.top+g.top-o.verticalPadding,b=Math.min(v,u);let w=Math.min(Math.max(b,_)+o.borderHeight,u);a===((t=this._cappedHeight)===null||t===void 0?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<d&&(a=d),a>w&&(a=w);const C=150;a>_||this._forceRenderingAbove&&v>C?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),w=b):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),w=_),this.element.preferredSize=new gt(h,o.defaultSize.height),this.element.maxSize=new gt(c,w),this.element.minSize=new gt(220,d),this._cappedHeight=a===u?{wanted:(s=(i=this._cappedHeight)===null||i===void 0?void 0:i.wanted)!==null&&s!==void 0?s:e.height,capped:a}:void 0}this._resize(l,a)}_resize(e,t){const{width:i,height:s}=this.element.maxSize;e=Math.min(i,e),t=Math.min(s,t);const{statusBarHeight:r}=this.getLayoutInfo();this._list.layout(t-r,e),this._listElement.style.height=`${t-r}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode)}getLayoutInfo(){const e=this.editor.getOption(43),t=lr(this.editor.getOption(107)||e.lineHeight,8,1e3),i=!this.editor.getOption(105).showStatusBar||this._state===2||this._state===1?0:t,s=this._details.widget.borderWidth,r=2*s;return{itemHeight:t,statusBarHeight:i,borderWidth:s,borderHeight:r,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new gt(430,i+12*t+r)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};i0.LOADING_MESSAGE=m("suggestWidget.loading","Loading...");i0.NO_SUGGESTIONS_MESSAGE=m("suggestWidget.noSuggestions","No suggestions.");i0=Ake([vv(1,qu),vv(2,Le),vv(3,At),vv(4,pt)],i0);class $ke{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:i,horizontalPadding:s}=this._widget.getLayoutInfo();return new gt(t+2*i+s,e+2*i)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}kt((n,e)=>{const t=n.getColor(Wke);t&&e.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-highlighted-label .highlight { color: ${t}; }`);const i=n.getColor(zke);t&&e.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .monaco-highlighted-label .highlight { color: ${i}; }`);const s=n.getColor(Fke);s&&e.addRule(`.monaco-editor .suggest-widget, .monaco-editor .suggest-details { color: ${s}; }`);const r=n.getColor(Pke);r&&e.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused { color: ${r}; }`);const o=n.getColor(Bke);o&&e.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .codicon { color: ${o}; }`);const a=n.getColor(B1);a&&e.addRule(`.monaco-editor .suggest-details a { color: ${a}; }`);const l=n.getColor(V1);l&&e.addRule(`.monaco-editor .suggest-details a:hover { color: ${l}; }`);const c=n.getColor(NW);c&&e.addRule(`.monaco-editor .suggest-details code { background-color: ${c}; }`)});var Uke=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},xp=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};class jke{constructor(e,t){if(this._model=e,this._position=t,e.getLineMaxColumn(t.lineNumber)!==t.column){const s=e.getOffsetAt(t),r=e.getPositionAt(s+1);this._marker=e.deltaDecorations([],[{range:I.fromPositions(t,r),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}let wr=class cU{constructor(e,t,i,s,r,o){this._memoryService=t,this._commandService=i,this._contextKeyService=s,this._instantiationService=r,this._logService=o,this._lineSuffix=new Ls,this._toDispose=new ee,this._selectors=new qke(h=>h.priority),this.editor=e,this.model=r.createInstance(OT,this.editor);const a=Oe.InsertMode.bindTo(s);a.set(e.getOption(105).insertMode),this.model.onDidTrigger(()=>a.set(e.getOption(105).insertMode)),this.widget=this._toDispose.add(new Yp(()=>{const h=this._instantiationService.createInstance(i0,this.editor);this._toDispose.add(h),this._toDispose.add(h.onDidSelect(p=>this._insertSuggestion(p,0),this));const u=new BLe(this.editor,h,p=>this._insertSuggestion(p,2));this._toDispose.add(u),this._toDispose.add(this.model.onDidSuggest(p=>{p.completionModel.items.length===0&&u.reset()}));const d=Oe.MakesTextEdit.bindTo(this._contextKeyService),f=Oe.HasInsertAndReplaceRange.bindTo(this._contextKeyService),g=Oe.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(Ze(()=>{d.reset(),f.reset(),g.reset()})),this._toDispose.add(h.onDidFocus(({item:p})=>{const _=this.editor.getPosition(),v=p.editStart.column,b=_.column;let w=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!p.completion.additionalTextEdits&&!(p.completion.insertTextRules&4)&&b-v===p.completion.insertText.length&&(w=this.editor.getModel().getValueInRange({startLineNumber:_.lineNumber,startColumn:v,endLineNumber:_.lineNumber,endColumn:b})!==p.completion.insertText),d.set(w),f.set(!P.equals(p.editInsertEnd,p.editReplaceEnd)),g.set(Boolean(p.provider.resolveCompletionItem)||Boolean(p.completion.documentation)||p.completion.detail!==p.completion.label)})),this._toDispose.add(h.onDetailsKeyDown(p=>{if(p.toKeybinding().equals(new ou(!0,!1,!1,!1,33))||je&&p.toKeybinding().equals(new ou(!1,!1,!1,!0,33))){p.stopPropagation();return}p.toKeybinding().isModifierKey()||this.editor.focus()})),h})),this._overtypingCapturer=this._toDispose.add(new Yp(()=>this._toDispose.add(new DS(this.editor,this.model)))),this._alternatives=this._toDispose.add(new Yp(()=>this._toDispose.add(new Du(this.editor,this._contextKeyService)))),this._toDispose.add(r.createInstance(t0,e)),this._toDispose.add(this.model.onDidTrigger(h=>{this.widget.value.showTriggered(h.auto,h.shy?250:50),this._lineSuffix.value=new jke(this.editor.getModel(),h.position)})),this._toDispose.add(this.model.onDidSuggest(h=>{if(!h.shy){let u=-1;for(const d of this._selectors.itemsOrderedByPriorityDesc)if(u=d.select(this.editor.getModel(),this.editor.getPosition(),h.completionModel.items),u!==-1)break;u===-1&&(u=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),h.completionModel.items)),this.widget.value.showSuggestions(h.completionModel,u,h.isFrozen,h.auto)}})),this._toDispose.add(this.model.onDidCancel(h=>{h.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));let l=Oe.AcceptSuggestionsOnEnter.bindTo(s),c=()=>{const h=this.editor.getOption(1);l.set(h==="on"||h==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>c())),c()}static get(e){return e.getContribution(cU.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const i=this.editor.getModel(),s=i.getAlternativeVersionId(),{item:r}=e,o=[],a=new go;t&1||this.editor.pushUndoStop();const l=this.getOverwriteInfo(r,Boolean(t&8));if(this._memoryService.memorize(i,this.editor.getPosition(),r),Array.isArray(r.completion.additionalTextEdits)){const h=Jf.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",r.completion.additionalTextEdits.map(u=>Hf.replace(I.lift(u.range),u.text))),h.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!r.isResolved){const h=new rl(!0);let u;const d=i.onDidChangeContent(_=>{if(_.isFlush){a.cancel(),d.dispose();return}for(let v of _.changes){const b=I.getEndPosition(v.range);(!u||P.isBefore(b,u))&&(u=b)}});let f=t;t|=2;let g=!1,p=this.editor.onWillType(()=>{p.dispose(),g=!0,f&2||this.editor.pushUndoStop()});o.push(r.resolve(a.token).then(()=>{if(!r.completion.additionalTextEdits||a.token.isCancellationRequested||u&&r.completion.additionalTextEdits.some(v=>P.isBefore(u,I.getStartPosition(v.range))))return!1;g&&this.editor.pushUndoStop();const _=Jf.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",r.completion.additionalTextEdits.map(v=>Hf.replace(I.lift(v.range),v.text))),_.restoreRelativeVerticalPositionOfCursor(this.editor),(g||!(f&2))&&this.editor.pushUndoStop(),!0}).then(_=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",h.elapsed(),_),d.dispose(),p.dispose()}))}let{insertText:c}=r.completion;r.completion.insertTextRules&4||(c=dS.escape(c)),Wi.get(this.editor).insert(c,{overwriteBefore:l.overwriteBefore,overwriteAfter:l.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(r.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),r.completion.command?r.completion.command.id===tb.id?this.model.trigger({auto:!0,shy:!1},!0):(o.push(this._commandService.executeCommand(r.completion.command.id,...r.completion.command.arguments?[...r.completion.command.arguments]:[]).catch(Ie)),this.model.cancel()):this.model.cancel(),t&4&&this._alternatives.value.set(e,h=>{for(a.cancel();i.canUndo();){s!==i.getAlternativeVersionId()&&i.undo(),this._insertSuggestion(h,3|(t&8?8:0));break}}),this._alertCompletionItem(r),Promise.all(o).finally(()=>{this.model.clear(),a.dispose()})}getOverwriteInfo(e,t){ti(this.editor.hasModel());let i=this.editor.getOption(105).insertMode==="replace";t&&(i=!i);const s=e.position.column-e.editStart.column,r=(i?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,o=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:s+o,overwriteAfter:r+a}}_alertCompletionItem(e){if(ia(e.completion.additionalTextEdits)){let t=m("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);Pu(t)}}triggerSuggest(e){this.editor.hasModel()&&(this.model.trigger({auto:!1,shy:!1},!1,e),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),i=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},s=r=>{if(r.completion.insertTextRules&4||r.completion.additionalTextEdits)return!0;const o=this.editor.getPosition(),a=r.editStart.column,l=o.column;return l-a!==r.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:o.lineNumber,startColumn:a,endLineNumber:o.lineNumber,endColumn:l})!==r.completion.insertText};ue.once(this.model.onDidTrigger)(r=>{let o=[];ue.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{He(o),i()},void 0,o),this.model.onDidSuggest(({completionModel:a})=>{if(He(o),a.items.length===0){i();return}const l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),c=a.items[l];if(!s(c)){i();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:c,model:a},7)},void 0,o)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const i=this.widget.value.getFocusedItem();let s=0;e&&(s|=4),t&&(s|=8),this._insertSuggestion(i,s)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){!this.widget.isInitialized||this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};wr.ID="editor.contrib.suggestController";wr=Uke([xp(1,sU),xp(2,Fi),xp(3,Le),xp(4,pt),xp(5,fl)],wr);class qke{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,i)=>this.prioritySelector(i)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class tb extends zt{constructor(){super({id:tb.id,label:m("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:le.and(B.writable,B.hasCompletionItemProvider),kbOpts:{kbExpr:B.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t){const i=wr.get(t);!i||i.triggerSuggest()}}tb.id="editor.action.triggerSuggest";$n(wr.ID,wr);ze(tb);const Xs=100+90,os=Ks.bindToContribution(wr.get);ne(new os({id:"acceptSelectedSuggestion",precondition:Oe.Visible,handler(n){n.acceptSelectedSuggestion(!0,!1)}}));yn.registerKeybindingRule({id:"acceptSelectedSuggestion",when:le.and(Oe.Visible,B.textInputFocus),primary:2,weight:Xs});yn.registerKeybindingRule({id:"acceptSelectedSuggestion",when:le.and(Oe.Visible,B.textInputFocus,Oe.AcceptSuggestionsOnEnter,Oe.MakesTextEdit),primary:3,weight:Xs});Xr.appendMenuItem(Cc,{command:{id:"acceptSelectedSuggestion",title:m("accept.insert","Insert")},group:"left",order:1,when:Oe.HasInsertAndReplaceRange.toNegated()});Xr.appendMenuItem(Cc,{command:{id:"acceptSelectedSuggestion",title:m("accept.insert","Insert")},group:"left",order:1,when:le.and(Oe.HasInsertAndReplaceRange,Oe.InsertMode.isEqualTo("insert"))});Xr.appendMenuItem(Cc,{command:{id:"acceptSelectedSuggestion",title:m("accept.replace","Replace")},group:"left",order:1,when:le.and(Oe.HasInsertAndReplaceRange,Oe.InsertMode.isEqualTo("replace"))});ne(new os({id:"acceptAlternativeSelectedSuggestion",precondition:le.and(Oe.Visible,B.textInputFocus),kbOpts:{weight:Xs,kbExpr:B.textInputFocus,primary:1027,secondary:[1026]},handler(n){n.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:Cc,group:"left",order:2,when:le.and(Oe.HasInsertAndReplaceRange,Oe.InsertMode.isEqualTo("insert")),title:m("accept.replace","Replace")},{menuId:Cc,group:"left",order:2,when:le.and(Oe.HasInsertAndReplaceRange,Oe.InsertMode.isEqualTo("replace")),title:m("accept.insert","Insert")}]}));lt.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");ne(new os({id:"hideSuggestWidget",precondition:Oe.Visible,handler:n=>n.cancelSuggestWidget(),kbOpts:{weight:Xs,kbExpr:B.textInputFocus,primary:9,secondary:[1033]}}));ne(new os({id:"selectNextSuggestion",precondition:le.and(Oe.Visible,Oe.MultipleSuggestions),handler:n=>n.selectNextSuggestion(),kbOpts:{weight:Xs,kbExpr:B.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));ne(new os({id:"selectNextPageSuggestion",precondition:le.and(Oe.Visible,Oe.MultipleSuggestions),handler:n=>n.selectNextPageSuggestion(),kbOpts:{weight:Xs,kbExpr:B.textInputFocus,primary:12,secondary:[2060]}}));ne(new os({id:"selectLastSuggestion",precondition:le.and(Oe.Visible,Oe.MultipleSuggestions),handler:n=>n.selectLastSuggestion()}));ne(new os({id:"selectPrevSuggestion",precondition:le.and(Oe.Visible,Oe.MultipleSuggestions),handler:n=>n.selectPrevSuggestion(),kbOpts:{weight:Xs,kbExpr:B.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));ne(new os({id:"selectPrevPageSuggestion",precondition:le.and(Oe.Visible,Oe.MultipleSuggestions),handler:n=>n.selectPrevPageSuggestion(),kbOpts:{weight:Xs,kbExpr:B.textInputFocus,primary:11,secondary:[2059]}}));ne(new os({id:"selectFirstSuggestion",precondition:le.and(Oe.Visible,Oe.MultipleSuggestions),handler:n=>n.selectFirstSuggestion()}));ne(new os({id:"toggleSuggestionDetails",precondition:Oe.Visible,handler:n=>n.toggleSuggestionDetails(),kbOpts:{weight:Xs,kbExpr:B.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:Cc,group:"right",order:1,when:le.and(Oe.DetailsVisible,Oe.CanResolve),title:m("detail.more","show less")},{menuId:Cc,group:"right",order:1,when:le.and(Oe.DetailsVisible.toNegated(),Oe.CanResolve),title:m("detail.less","show more")}]}));ne(new os({id:"toggleExplainMode",precondition:Oe.Visible,handler:n=>n.toggleExplainMode(),kbOpts:{weight:100,primary:2133}}));ne(new os({id:"toggleSuggestionFocus",precondition:Oe.Visible,handler:n=>n.toggleSuggestionFocus(),kbOpts:{weight:Xs,kbExpr:B.textInputFocus,primary:2570,mac:{primary:778}}}));ne(new os({id:"insertBestCompletion",precondition:le.and(B.textInputFocus,le.equals("config.editor.tabCompletion","on"),t0.AtEnd,Oe.Visible.toNegated(),Du.OtherSuggestions.toNegated(),Wi.InSnippetMode.toNegated()),handler:(n,e)=>{n.triggerSuggestAndAcceptBest(An(e)?Object.assign({fallback:"tab"},e):{fallback:"tab"})},kbOpts:{weight:Xs,primary:2}}));ne(new os({id:"insertNextSuggestion",precondition:le.and(B.textInputFocus,le.equals("config.editor.tabCompletion","on"),Du.OtherSuggestions,Oe.Visible.toNegated(),Wi.InSnippetMode.toNegated()),handler:n=>n.acceptNextSuggestion(),kbOpts:{weight:Xs,kbExpr:B.textInputFocus,primary:2}}));ne(new os({id:"insertPrevSuggestion",precondition:le.and(B.textInputFocus,le.equals("config.editor.tabCompletion","on"),Du.OtherSuggestions,Oe.Visible.toNegated(),Wi.InSnippetMode.toNegated()),handler:n=>n.acceptPrevSuggestion(),kbOpts:{weight:Xs,kbExpr:B.textInputFocus,primary:1026}}));ze(class extends zt{constructor(){super({id:"editor.action.resetSuggestSize",label:m("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(n,e){wr.get(e).resetWidgetSize()}});function Kke(n,e){return{object:n,dispose:()=>e==null?void 0:e.dispose()}}function Gke(n,e){return(t,i)=>e(n(t),n(i))}function Yke(){return(n,e)=>n-e}function Zke(n,e){let t;for(const i of n)(t===void 0||e(i,t)>0)&&(t=i);return t}class Xke extends q{constructor(e,t){super(),this.editor=e,this.suggestControllerPreselector=t,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentInlineCompletion=void 0,this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this.setInactiveDelayed=this._register(new Wt(()=>{this.isSuggestWidgetVisible||this._isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())},100)),this._register(e.onKeyDown(s=>{s.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(s=>{s.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const i=wr.get(this.editor);if(i){this._register(i.registerSelector({priority:100,select:(o,a,l)=>{const c=this.editor.getModel(),h=cy(c,this.suggestControllerPreselector());if(!h)return-1;const u=P.lift(a),d=l.map((g,p)=>{const _=j5(i,u,g,this.isShiftKeyPressed),v=cy(c,_);if(!v)return;const b=Qke(h.range,v.range)&&h.text.startsWith(v.text);return{index:p,valid:b,prefixLength:v.text.length,suggestItem:g}}).filter(g=>g&&g.valid),f=Zke(d,Gke(g=>g.prefixLength,Yke()));return f?f.index:-1}}));let s=!1;const r=()=>{s||(s=!0,this._register(i.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(i.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.update(this._isActive)})),this._register(i.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(ue.once(i.model.onDidTrigger)(o=>{r()}))}this.update(this._isActive)}get state(){if(!!this._isActive)return{selectedItemAsInlineCompletion:this._currentInlineCompletion}}update(e){const t=this.getInlineCompletion();let i=!1;dLe(this._currentInlineCompletion,t)||(this._currentInlineCompletion=t,i=!0),this._isActive!==e&&(this._isActive=e,i=!0),i&&this.onDidChangeEmitter.fire()}getInlineCompletion(){const e=wr.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem();if(!!t)return j5(e,this.editor.getPosition(),t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=wr.get(this.editor);e&&e.stopForceRenderingAbove()}forceRenderingAbove(){const e=wr.get(this.editor);e&&e.forceRenderingAbove()}}function Qke(n,e){return n.startLineNumber===e.startLineNumber&&n.startColumn===e.startColumn&&(n.endLineNumber<e.endLineNumber||n.endLineNumber===e.endLineNumber&&n.endColumn<=e.endColumn)}function j5(n,e,t,i){if(Array.isArray(t.completion.additionalTextEdits)&&t.completion.additionalTextEdits.length>0)return{text:"",range:I.fromPositions(e,e)};let{insertText:s}=t.completion;if(t.completion.insertTextRules&4){const o=new dS().parse(s),a=n.editor.getModel();if(o.children.length>100)return;Ao.adjustWhitespace(a,e,o,!0,!0),s=o.toString()}const r=n.getOverwriteInfo(t,i);return{text:s,range:I.fromPositions(e.delta(0,-r.overwriteBefore),e.delta(0,Math.max(r.overwriteAfter,0)))}}var q5=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class Jke extends J${constructor(e,t){super(e),this.cache=t,this.suggestionInlineCompletionSource=this._register(new Xke(this.editor,()=>{var i,s;return(s=(i=this.cache.value)===null||i===void 0?void 0:i.completions[0])===null||s===void 0?void 0:s.toLiveInlineCompletion()})),this.updateOperation=this._register(new Ls),this.updateCacheSoon=this._register(new Wt(()=>this.updateCache(),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange(()=>{this.updateCacheSoon.schedule(),this.suggestionInlineCompletionSource.state||(this.minReservedLineCount=0);const s=this.ghostText;s&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,eEe(s.parts.map(r=>r.lines.length-1)))),this.minReservedLineCount>=1&&this.isSuggestionPreviewEnabled()?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()})),this._register(this.cache.onDidChange(()=>{this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeCursorPosition(i=>{this.isSuggestionPreviewEnabled()&&(this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire())})),this._register(Ze(()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove()))}get isActive(){return this.suggestionInlineCompletionSource.state!==void 0}isSuggestionPreviewEnabled(){return this.editor.getOption(105).preview}updateCache(){return q5(this,void 0,void 0,function*(){const e=this.suggestionInlineCompletionSource.state;if(!e||!e.selectedItemAsInlineCompletion)return;const t={text:e.selectedItemAsInlineCompletion.text,range:e.selectedItemAsInlineCompletion.range},i=this.editor.getPosition(),s=ks(o=>q5(this,void 0,void 0,function*(){let a;try{a=yield iU(i,this.editor.getModel(),{triggerKind:Os.Automatic,selectedSuggestionInfo:t},o)}catch(l){Ie(l);return}o.isCancellationRequested||(this.cache.setValue(this.editor,a,Os.Automatic),this.onDidChangeEmitter.fire())})),r=new tU(s,Os.Automatic);this.updateOperation.value=r,yield s,this.updateOperation.value===r&&this.updateOperation.clear()})}get ghostText(){var e,t;if(!this.isSuggestionPreviewEnabled())return;const i=this.suggestionInlineCompletionSource.state,s=cy(this.editor.getModel(),i==null?void 0:i.selectedItemAsInlineCompletion),r=cy(this.editor.getModel(),(t=(e=this.cache.value)===null||e===void 0?void 0:e.completions[0])===null||t===void 0?void 0:t.toLiveInlineCompletion()),o=r&&s&&r.text.startsWith(s.text)&&r.range.equalsRange(s.range)?r:s||r,a=s?((o==null?void 0:o.text.length)||0)-s.text.length:0;return(h=>{const u=this.editor.getOptions().get(105).previewMode;return h?eU(h,this.editor.getModel(),u,this.editor.getPosition(),a)||new Q$(h.range.endLineNumber,[],this.minReservedLineCount):void 0})(o)}}function eEe(n){return n.reduce((e,t)=>e+t,0)}var tEe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},iEe=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},nEe=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class sEe extends q{constructor(){super(...arguments),this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new Ls)}get targetModel(){var e;return(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object}setTargetModel(e){var t;((t=this.currentModelRef.value)===null||t===void 0?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?Kke(e,e.onDidChange(()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()})):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=(t=(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object)===null||t===void 0?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var t;(t=this.targetModel)===null||t===void 0||t.setExpanded(e)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}}let WT=class extends sEe{constructor(e,t){super(),this.editor=e,this.commandService=t,this.sharedCache=this._register(new rEe),this.suggestWidgetAdapterModel=this._register(new Jke(this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(new MT(this.editor,this.sharedCache,this.commandService)),this._register(this.suggestWidgetAdapterModel.onDidChange(()=>{this.updateModel()})),this.updateModel()}get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(e){var t;const i=(t=this.activeInlineCompletionsModel)===null||t===void 0?void 0:t.ghostText;return i?i.parts.some(s=>e.containsPosition(new P(i.lineNumber,s.column))):!1}triggerInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.trigger(Os.Explicit)}commitInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.commitCurrentSuggestion()}hideInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.hide()}showNextInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showNext()}showPreviousInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showPrevious()}hasMultipleInlineCompletions(){var e;return nEe(this,void 0,void 0,function*(){const t=yield(e=this.activeInlineCompletionsModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};WT=tEe([iEe(1,Fi)],WT);class rEe extends q{constructor(){super(...arguments),this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new Ls)}get value(){return this.cache.value}setValue(e,t,i){this.cache.value=new bLe(e,t,()=>this.onDidChangeEmitter.fire(),i)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}}var hU=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Em=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},cL;const K5=(cL=window.trustedTypes)===null||cL===void 0?void 0:cL.createPolicy("editorGhostText",{createHTML:n=>n});let zT=class extends q{constructor(e,t,i,s){super(),this.editor=e,this.model=t,this.instantiationService=i,this.modeService=s,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(HT,this.editor)),this.additionalLinesWidget=this._register(new oEe(this.editor,this.modeService.languageIdCodec)),this.viewMoreContentWidget=void 0,this._register(this.editor.onDidChangeConfiguration(r=>{(r.hasChanged(29)||r.hasChanged(104)||r.hasChanged(87)||r.hasChanged(82)||r.hasChanged(44)||r.hasChanged(43)||r.hasChanged(58))&&this.update()})),this._register(Ze(()=>{var r;this.disposed=!0,this.update(),(r=this.viewMoreContentWidget)===null||r===void 0||r.dispose(),this.viewMoreContentWidget=void 0})),this._register(t.onDidChange(()=>{this.update()})),this.update()}shouldShowHoverAtViewZone(e){return this.additionalLinesWidget.viewZoneId===e}update(){var e;const t=this.model.ghostText;if(!this.editor.hasModel()||!t||this.disposed){this.partsWidget.clear(),this.additionalLinesWidget.clear();return}const i=new Array,s=new Array;function r(c,h){if(s.length>0){const u=s[s.length-1];h&&u.decorations.push(new vs(u.content.length+1,u.content.length+1+c[0].length,h,0)),u.content+=c[0],c=c.slice(1)}for(const u of c)s.push({content:u,decorations:h?[new vs(1,u.length+1,h,0)]:[]})}const o=this.editor.getModel().getLineContent(t.lineNumber);this.editor.getModel().getLineTokens(t.lineNumber);let a,l=0;for(const c of t.parts){let h=c.lines;a===void 0?(i.push({column:c.column,text:h[0],preview:c.preview}),h=h.slice(1)):r([o.substring(l,c.column-1)],void 0),h.length>0&&(r(h,"ghost-text"),a===void 0&&c.column<=o.length&&(a=c.column)),l=c.column-1}a!==void 0&&r([o.substring(l)],void 0),this.partsWidget.setParts(t.lineNumber,i,a!==void 0?{column:a,length:o.length+1-a}:void 0),this.additionalLinesWidget.updateLines(t.lineNumber,s,t.additionalReservedLineCount),t.parts.some(c=>c.lines.length<0)?this.viewMoreContentWidget=this.renderViewMoreLines(new P(t.lineNumber,this.editor.getModel().getLineMaxColumn(t.lineNumber)),"",0):((e=this.viewMoreContentWidget)===null||e===void 0||e.dispose(),this.viewMoreContentWidget=void 0)}renderViewMoreLines(e,t,i){const s=this.editor.getOption(43),r=document.createElement("div");r.className="suggest-preview-additional-widget",Qi.applyFontInfoSlow(r,s);const o=document.createElement("span");o.className="content-spacer",o.append(t),r.append(o);const a=document.createElement("span");a.className="content-newline suggest-preview-text",a.append("\u23CE  "),r.append(a);const l=new ee,c=document.createElement("div");return c.className="button suggest-preview-text",c.append(`+${i} lines\u2026`),l.add(mi(c,"mousedown",h=>{var u;(u=this.model)===null||u===void 0||u.setExpanded(!0),h.preventDefault(),this.editor.focus()})),r.append(c),new hEe(this.editor,e,r,l)}};zT=hU([Em(2,pt),Em(3,Hn)],zT);let HT=class{constructor(e,t,i,s){this.editor=e,this.codeEditorService=t,this.themeService=i,this.contextKeyService=s,this.decorationIds=[],this.disposableStore=new ee}dispose(){this.clear(),this.disposableStore.dispose()}clear(){this.editor.deltaDecorations(this.decorationIds,[]),this.disposableStore.clear()}setParts(e,t,i){this.disposableStore.clear();const s=this.themeService.getColorTheme(),r=s.getColor(JW);let o,a;r&&(o=String(r.rgba.a),a=V.Format.CSS.format(uU(r)));const l=s.getColor(QW);let c;l&&(c=`2px dashed ${l}`);const h=this.editor.getModel();if(!h)return;const{tabSize:u}=h.getOptions(),d=h.getLineContent(e)||"";let f=0,g="";const p=new Array;i&&p.push({range:I.fromPositions(new P(e,i.column),new P(e,i.column+i.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});const _=this.contextKeyService.getContextKeyValue("config.editor.useInjectedText"),v=_===void 0?!0:!!_;this.decorationIds=this.editor.deltaDecorations(this.decorationIds,t.map(b=>{g+=d.substring(f,b.column-1),f=b.column-1;const w=v?b.text:this.renderSingleLineText(b.text,g,u,!1),C=this.disposableStore.add(cEe(this.codeEditorService,"ghost-text","0-ghost-text-",{after:{contentText:w,opacity:o,color:a,border:c,fontWeight:b.preview?"bold":"normal"}}));return{range:I.fromPositions(new P(e,b.column)),options:v?{description:"ghost-text",after:{content:w,inlineClassName:b.preview?"ghost-text-decoration-preview":"ghost-text-decoration"},showIfCollapsed:!0}:Object.assign({},C.resolve())}}).concat(p))}renderSingleLineText(e,t,i,s){const r=t+e,o=rt.visibleColumnsByColumns(r,i);let a="",l=t.length+1;for(const c of e){if(c==="	"){const h=o[l+1]-o[l];if(s){a+="\u2192";for(let u=1;u<h;u++)a+="\xA0"}else for(let u=0;u<h;u++)a+="\xA0"}else c===" "?s?a+="\xB7":a+="\xA0":a+=c;l+=1}return a}};HT=hU([Em(1,Tt),Em(2,At),Em(3,Le)],HT);function uU(n){const{r:e,b:t,g:i}=n.rgba;return new V(new Fe(e,i,t,255))}class oEe{constructor(e,t){this.editor=e,this.languageIdCodec=t,this._viewZoneId=void 0}get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,i){const s=this.editor.getModel();if(!s)return;const{tabSize:r}=s.getOptions();this.editor.changeViewZones(o=>{this._viewZoneId&&(o.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,i);if(a>0){const l=document.createElement("div");aEe(l,r,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=o.addZone({afterLineNumber:e,heightInLines:a,domNode:l})}})}}function aEe(n,e,t,i,s){const r=i.get(29),o=i.get(104),a="none",l=i.get(82),c=i.get(44),h=i.get(43),u=i.get(58),d=lu(1e4);d.appendASCIIString('<div class="suggest-preview-text">');for(let p=0,_=t.length;p<_;p++){const v=t[p],b=v.content;d.appendASCIIString('<div class="view-line'),d.appendASCIIString('" style="top:'),d.appendASCIIString(String(p*u)),d.appendASCIIString('px;width:1000000px;">');const w=WA(b),C=h1(b),y=Oi.createEmpty(b,s);w1(new Ou(h.isMonospace&&!r,h.canUseHalfwidthRightwardsArrow,b,!1,w,C,0,y,v.decorations,e,0,h.spaceWidth,h.middotWidth,h.wsmiddotWidth,o,a,l,c!==gs.OFF,null),d),d.appendASCIIString("</div>")}d.appendASCIIString("</div>"),Qi.applyFontInfoSlow(n,h);const f=d.build(),g=K5?K5.createHTML(f):f;n.innerHTML=g}let lEe=0;function cEe(n,e,t,i){const s=t+lEe++;return n.registerDecorationType(e,s,i),{dispose(){n.removeDecorationType(s)},resolve(){return n.resolveDecorationOptions(s,!0)}}}class hEe extends q{constructor(e,t,i,s){super(),this.editor=e,this.position=t,this.domNode=i,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(s),this._register(Ze(()=>{this.editor.removeContentWidget(this)})),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}}kt((n,e)=>{const t=n.getColor(JW);if(t){const s=String(t.rgba.a),r=V.Format.CSS.format(uU(t));e.addRule(`.monaco-editor .ghost-text-decoration { opacity: ${s} !important; color: ${r} !important; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { opacity: ${s} !important; color: ${r} !important; }`)}const i=n.getColor(QW);i&&(e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${i}; }`),e.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${i}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${i}; }`))});var dU=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},$T=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},LS=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};let xi=class fU extends q{constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.triggeredExplicitly=!1,this.activeController=this._register(new Ls),this._register(this.editor.onDidChangeModel(()=>{this.updateModelController()})),this._register(this.editor.onDidChangeConfiguration(i=>{i.hasChanged(105)&&this.updateModelController(),i.hasChanged(54)&&this.updateModelController()})),this.updateModelController()}static get(e){return e.getContribution(fU.ID)}get activeModel(){var e;return(e=this.activeController.value)===null||e===void 0?void 0:e.model}updateModelController(){const e=this.editor.getOption(105),t=this.editor.getOption(54);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(UT,this.editor):void 0}shouldShowHoverAt(e){var t;return((t=this.activeModel)===null||t===void 0?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,i;return((i=(t=this.activeController.value)===null||t===void 0?void 0:t.widget)===null||i===void 0?void 0:i.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),(e=this.activeModel)===null||e===void 0||e.triggerInlineCompletion()}commit(){var e;(e=this.activeModel)===null||e===void 0||e.commitInlineCompletion()}hide(){var e;(e=this.activeModel)===null||e===void 0||e.hideInlineCompletion()}showNextInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return LS(this,void 0,void 0,function*(){const t=yield(e=this.activeModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};xi.inlineSuggestionVisible=new he("inlineSuggestionVisible",!1,m("inlineSuggestionVisible","Whether an inline suggestion is visible"));xi.inlineSuggestionHasIndentation=new he("inlineSuggestionHasIndentation",!1,m("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));xi.inlineSuggestionHasIndentationLessThanTabSize=new he("inlineSuggestionHasIndentationLessThanTabSize",!0,m("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));xi.ID="editor.contrib.ghostTextController";xi=dU([$T(1,pt)],xi);class uEe{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=xi.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=xi.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=xi.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)}}let UT=class extends q{constructor(e,t,i){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=i,this.contextKeys=new uEe(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(WT,this.editor)),this.widget=this._register(this.instantiationService.createInstance(zT,this.editor,this.model)),this._register(Ze(()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)})),this._register(this.model.onDidChange(()=>{this.updateContextKeys()})),this.updateContextKeys()}updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(((e=this.model.activeInlineCompletionsModel)===null||e===void 0?void 0:e.ghostText)!==void 0);let t=!1,i=!0;const s=this.model.inlineCompletionsModel.ghostText;if(!!this.model.activeInlineCompletionsModel&&s&&s.parts.length>0){const{column:r,lines:o}=s.parts[0],a=o[0],l=this.editor.getModel().getLineIndentColumn(s.lineNumber);if(r<=l){let h=Jn(a);h===-1&&(h=a.length-1),t=h>0;const u=this.editor.getModel().getOptions().tabSize;i=rt.visibleColumnFromColumn(a,h+1,u)<u}}this.contextKeys.inlineCompletionSuggestsIndentation.set(t),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(i)}};UT=dU([$T(1,pt),$T(2,Le)],UT);const gU=Ks.bindToContribution(xi.get),n0=new gU({id:X$,precondition:xi.inlineSuggestionVisible,handler(n){n.commit(),n.editor.focus()}});ne(n0);yn.registerKeybindingRule({primary:2,weight:200,id:n0.id,when:le.and(n0.precondition,B.tabMovesFocus.toNegated(),xi.inlineSuggestionHasIndentationLessThanTabSize)});ne(new gU({id:"editor.action.inlineSuggest.hide",precondition:xi.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler(n){n.hide()}}));class ug extends zt{constructor(){super({id:ug.ID,label:m("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:le.and(B.writable,xi.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}run(e,t){return LS(this,void 0,void 0,function*(){const i=xi.get(t);i&&(i.showNextInlineCompletion(),t.focus())})}}ug.ID="editor.action.inlineSuggest.showNext";class dg extends zt{constructor(){super({id:dg.ID,label:m("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:le.and(B.writable,xi.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}run(e,t){return LS(this,void 0,void 0,function*(){const i=xi.get(t);i&&(i.showPreviousInlineCompletion(),t.focus())})}}dg.ID="editor.action.inlineSuggest.showPrevious";class dEe extends zt{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:m("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:B.writable})}run(e,t){return LS(this,void 0,void 0,function*(){const i=xi.get(t);i&&i.trigger()})}}$n(xi.ID,xi);ze(dEe);ze(ug);ze(dg);var fEe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},xd=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};class gEe{constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}}let jT=class{constructor(e,t,i,s,r,o,a,l){this._editor=e,this._hover=t,this._commandService=i,this._menuService=s,this._contextKeyService=r,this._modeService=o,this._openerService=a,this.accessibilityService=l}suggestHoverAnchor(e){const t=xi.get(this._editor);if(!t)return null;if(e.target.type===8){const i=e.target.detail;if(t.shouldShowHoverAtViewZone(i.viewZoneId))return new XD(1e3,this,I.fromPositions(i.positionBefore||i.position,i.positionBefore||i.position))}return e.target.type===7&&e.target.range&&t.shouldShowHoverAt(e.target.range)?new XD(1e3,this,e.target.range):e.target.type===6&&e.target.range&&e.target.detail&&e.target.detail.mightBeForeignElement&&t.shouldShowHoverAt(e.target.range)?new XD(1e3,this,e.target.range):null}computeSync(e,t){const i=xi.get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new gEe(this,e.range,i)]:[]}renderHoverParts(e,t,i){const s=new ee,r=e[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(r,t,s);const o=s.add(this._menuService.createMenu(De.InlineCompletionsActions,this._contextKeyService)),a=i.addAction({label:m("showNextInlineSuggestion","Next"),commandId:ug.ID,run:()=>this._commandService.executeCommand(ug.ID)}),l=i.addAction({label:m("showPreviousInlineSuggestion","Previous"),commandId:dg.ID,run:()=>this._commandService.executeCommand(dg.ID)});i.addAction({label:m("acceptInlineSuggestion","Accept"),commandId:n0.id,run:()=>this._commandService.executeCommand(n0.id)});const c=[a,l];for(const h of c)h.setEnabled(!1);r.hasMultipleSuggestions().then(h=>{for(const u of c)u.setEnabled(h)});for(const[h,u]of o.getActions())for(const d of u)d instanceof gc&&i.addAction({label:d.label,commandId:d.item.id,run:()=>this._commandService.executeCommand(d.item.id)});return s}renderScreenReaderText(e,t,i){var s,r;const o=J,a=o("div.hover-row.markdown-hover"),l=Y(a,o("div.hover-contents")),c=i.add(new xu({editor:this._editor},this._modeService,this._openerService)),h=d=>{i.add(c.onDidRenderAsync(()=>{l.className="hover-contents code-hover-contents",this._hover.onContentsChanged()}));const f=m("inlineSuggestionFollows","Suggestion:"),g=i.add(c.render(new ig().appendText(f).appendCodeblock("text",d)));l.replaceChildren(g.element)},u=(r=(s=e.controller.activeModel)===null||s===void 0?void 0:s.inlineCompletionsModel)===null||r===void 0?void 0:r.ghostText;if(u){const d=this._editor.getModel().getLineContent(u.lineNumber);h(u.renderForScreenReader(d))}t.appendChild(a)}};jT=fEe([xd(2,Fi),xd(3,Tg),xd(4,Le),xd(5,Hn),xd(6,uc),xd(7,rs)],jT);var pU=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},aw=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},G5=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const Y5=J;let qT=class extends q{constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=Y5("div.hover-row.status-bar"),this.actionsElement=Y(this.hoverElement,Y5("div.actions"))}get hasContent(){return this._hasContent}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),i=t?t.getLabel():null;return this._hasContent=!0,this._register(OM.render(this.actionsElement,e,i))}append(e){const t=Y(this.actionsElement,e);return this._hasContent=!0,t}};qT=pU([aw(0,ri)],qT);class hy{constructor(e,t){this._participants=t,this._editor=e,this._result=[],this._anchor=null}setAnchor(e){this._anchor=e,this._result=[]}clearResult(){this._result=[]}static _getLineDecorations(e,t){if(t.type!==1)return[];const i=e.getModel(),s=t.range.startLineNumber,r=i.getLineMaxColumn(s);return e.getLineDecorations(s).filter(o=>{if(o.options.isWholeLine)return!0;const a=o.range.startLineNumber===s?o.range.startColumn:1,l=o.range.endLineNumber===s?o.range.endColumn:r;return!(a>t.range.startColumn||t.range.endColumn>l)})}computeAsync(e){return G5(this,void 0,void 0,function*(){const t=this._anchor;if(!this._editor.hasModel()||!t)return Promise.resolve([]);const i=hy._getLineDecorations(this._editor,t),s=yield Promise.all(this._participants.map(r=>this._computeAsync(r,i,t,e)));return e2(s)})}_computeAsync(e,t,i,s){return G5(this,void 0,void 0,function*(){return e.computeAsync?e.computeAsync(i,t,s):[]})}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=hy._getLineDecorations(this._editor,this._anchor);let t=[];for(const i of this._participants)t=t.concat(i.computeSync(this._anchor,e));return v1(t)}onResult(e,t){t?this._result=e.concat(this._result):this._result=this._result.concat(e)}getResult(){return this._result.slice(0)}getResultWithLoadingMessage(){if(this._anchor){for(const e of this._participants)if(e.createLoadingMessage){const t=e.createLoadingMessage(this._anchor);if(t)return this._result.slice(0).concat([t])}}return this._result.slice(0)}}let Ul=class KT extends Ys{constructor(e,t,i,s,r){super(),this._hoverVisibleKey=t,this._keybindingService=s,this._contextKeyService=r,this.allowEditorOverflow=!0,this._participants=[i.createInstance(CT,e,this),i.createInstance(ST,e,this),i.createInstance(jT,e,this),i.createInstance(AT,e,this)],this._editor=e,this._isVisible=!1,this._stoleFocus=!1,this._renderDisposable=null,this._hover=this._register(new k$),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this.onkeydown(this._hover.containerDomNode,o=>{o.equals(9)&&this.hide()}),this._register(this._editor.onDidChangeConfiguration(o=>{o.hasChanged(43)&&this._updateFont()})),this._editor.onDidLayoutChange(()=>this.layout()),this.layout(),this._editor.addContentWidget(this),this._showAtPosition=null,this._showAtRange=null,this._stoleFocus=!1,this._messages=[],this._lastAnchor=null,this._computer=new hy(this._editor,this._participants),this._highlightDecorations=[],this._isChangingDecorations=!1,this._shouldFocus=!1,this._colorPicker=null,this._preferAbove=this._editor.getOption(52).above,this._hoverOperation=new T$(this._computer,o=>this._withResult(o,!0),null,o=>this._withResult(o,!1),this._editor.getOption(52).delay),this._register(mi(this.getDomNode(),de.FOCUS,()=>{this._colorPicker&&this.getDomNode().classList.add("colorpicker-hover")})),this._register(mi(this.getDomNode(),de.BLUR,()=>{this.getDomNode().classList.remove("colorpicker-hover")})),this._register(e.onDidChangeConfiguration(()=>{this._hoverOperation.setHoverTime(this._editor.getOption(52).delay),this._preferAbove=this._editor.getOption(52).above})),this._register(Zt.onDidChange(()=>{this._isVisible&&this._lastAnchor&&this._messages.length>0&&(this._hover.contentsDomNode.textContent="",this._renderMessages(this._lastAnchor,this._messages))}))}dispose(){this._hoverOperation.cancel(),this._editor.removeContentWidget(this),super.dispose()}getId(){return KT.ID}getDomNode(){return this._hover.containerDomNode}_shouldShowAt(e){const t=e.target.type;if(t===6)return!0;if(t===7){const i=this._editor.getOption(43).typicalHalfwidthCharacterWidth/2,s=e.target.detail;if(s&&!s.isAfterLines&&typeof s.horizontalDistanceToText=="number"&&s.horizontalDistanceToText<i)return!0}return!1}maybeShowAt(e){var t;const i=[];for(const s of this._participants)if(typeof s.suggestHoverAnchor=="function"){const r=s.suggestHoverAnchor(e);r&&i.push(r)}if(this._shouldShowAt(e)&&e.target.range){const r=[...((t=e.target.element)===null||t===void 0?void 0:t.classList.values())||[]].find(o=>o.startsWith("ced-colorBox"))&&e.target.range.endColumn-e.target.range.startColumn===1?new I(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1):e.target.range;i.push(new p5(0,r))}return i.length===0?!1:(i.sort((s,r)=>r.priority-s.priority),this._startShowingAt(i[0],0,!1),!0)}_showAt(e,t,i){this._showAtPosition=e,this._showAtRange=t,this._hoverVisibleKey.set(!0),this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._editor.render(),this._stoleFocus=i,i&&this._hover.containerDomNode.focus()}getPosition(){if(this._isVisible){let e=this._preferAbove;return!e&&this._contextKeyService.getContextKeyValue(Oe.Visible.key)&&(e=!0),{position:this._showAtPosition,range:this._showAtRange,preference:e?[1,2]:[2,1]}}return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont(),this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:i}=this._editor.getOption(43);this._hover.contentsDomNode.style.fontSize=`${t}px`,this._hover.contentsDomNode.style.lineHeight=`${i/t}`,this._hover.contentsDomNode.style.maxHeight=`${e}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(this._editor.getLayoutInfo().width*.66,500)}px`}onModelDecorationsChanged(){this._isChangingDecorations||this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._colorPicker||this._hoverOperation.start(0))}startShowingAtRange(e,t,i){this._startShowingAt(new p5(0,e),t,i)}_startShowingAt(e,t,i){if(!(this._lastAnchor&&this._lastAnchor.equals(e))){if(this._hoverOperation.cancel(),this._isVisible)if(!this._showAtPosition||!this._lastAnchor||!e.canAdoptVisibleHover(this._lastAnchor,this._showAtPosition))this.hide();else{const s=this._messages.filter(r=>r.isValidForHoverAnchor(e));if(s.length===0)this.hide();else{if(s.length===this._messages.length)return;this._renderMessages(e,s)}}this._lastAnchor=e,this._computer.setAnchor(e),this._shouldFocus=i,this._hoverOperation.start(t)}}hide(){this._lastAnchor=null,this._hoverOperation.cancel(),this._isVisible&&(setTimeout(()=>{this._isVisible||this._hoverVisibleKey.set(!1)},0),this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus()),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1,this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null}isColorPickerVisible(){return!!this._colorPicker}setColorPicker(e){this._colorPicker=e}onContentsChanged(){this._hover.onContentsChanged()}_withResult(e,t){this._messages=e,this._lastAnchor&&this._messages.length>0?this._renderMessages(this._lastAnchor,this._messages):t&&this.hide()}_renderMessages(e,t){this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null;let i=1073741824,s=t[0].range,r=null,o=document.createDocumentFragment();const a=new ee,l=new Map;for(const h of t)i=Math.min(i,h.range.startColumn),s=I.plusRange(s,h.range),h.forceShowAtRange&&(r=h.range),l.has(h.owner)||l.set(h.owner,[]),l.get(h.owner).push(h);const c=a.add(new qT(this._keybindingService));for(const[h,u]of l)a.add(h.renderHoverParts(u,o,c));c.hasContent&&o.appendChild(c.hoverElement),this._renderDisposable=a,o.hasChildNodes()&&(r?this._showAt(r.getStartPosition(),r,this._shouldFocus):this._showAt(new P(e.range.startLineNumber,i),s,this._shouldFocus),this._updateContents(o)),this._colorPicker&&this._colorPicker.layout(),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,s?[{range:s,options:KT._DECORATION_OPTIONS}]:[]),this._isChangingDecorations=!1}};Ul.ID="editor.contrib.modesContentHoverWidget";Ul._DECORATION_OPTIONS=$e.register({description:"content-hover-highlight",className:"hoverHighlight"});Ul=pU([aw(2,pt),aw(3,ri),aw(4,Le)],Ul);const Z5=J;class pEe{constructor(e){this._editor=e,this._lineNumber=-1,this._result=[]}setLineNumber(e){this._lineNumber=e,this._result=[]}clearResult(){this._result=[]}computeSync(){const e=s=>({value:s}),t=this._editor.getLineDecorations(this._lineNumber),i=[];if(!t)return i;for(const s of t){if(!s.options.glyphMarginClassName)continue;const r=s.options.glyphMarginHoverMessage;!r||xm(r)||i.push(...BV(r).map(e))}return i}onResult(e,t){this._result=this._result.concat(e)}getResult(){return this._result}getResultWithLoadingMessage(){return this.getResult()}}class Lh extends Ys{constructor(e,t,i=Sle){super(),this._renderDisposeables=this._register(new ee),this._editor=e,this._isVisible=!1,this._messages=[],this._lastLineNumber=-1,this._hover=this._register(new k$),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new xu({editor:this._editor},t,i)),this._computer=new pEe(this._editor),this._hoverOperation=new T$(this._computer,s=>this._withResult(s),void 0,s=>this._withResult(s),300),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(43)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._hoverOperation.cancel(),this._editor.removeOverlayWidget(this),super.dispose()}getId(){return Lh.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(e),s=this._editor.getScrollTop(),r=this._editor.getOption(58),o=this._hover.containerDomNode.clientHeight,a=i-s-(o-r)/2;this._hover.containerDomNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start(0))}startShowingAt(e){this._lastLineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=e,this._computer.setLineNumber(e),this._hoverOperation.start(0))}hide(){this._lastLineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const i=document.createDocumentFragment();for(const s of t){const r=Z5("div.hover-row.markdown-hover"),o=Y(r,Z5("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(s.value));o.appendChild(a.element),i.appendChild(r)}this._updateContents(i),this._showAt(e)}}Lh.ID="editor.contrib.modesGlyphHoverWidget";var mEe=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},wv=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let Lu=class mU{constructor(e,t,i,s,r){this._editor=e,this._instantiationService=t,this._openerService=i,this._modeService=s,this._toUnhook=new ee,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(o=>{o.hasChanged(52)&&(this._unhookEvents(),this._hookEvents())}),this._hoverVisibleKey=B.hoverVisible.bindTo(r)}static get(e){return e.getContribution(mU.ID)}_hookEvents(){const e=()=>this._hideWidgets(),t=this._editor.getOption(52);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(i=>this._onEditorMouseDown(i))),this._toUnhook.add(this._editor.onMouseUp(i=>this._onEditorMouseUp(i))),this._toUnhook.add(this._editor.onMouseMove(i=>this._onEditorMouseMove(i))),this._toUnhook.add(this._editor.onKeyDown(i=>this._onKeyDown(i))),this._toUnhook.add(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged()))):(this._toUnhook.add(this._editor.onMouseMove(i=>this._onEditorMouseMove(i))),this._toUnhook.add(this._editor.onKeyDown(i=>this._onKeyDown(i)))),this._toUnhook.add(this._editor.onMouseLeave(e)),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(i=>this._onEditorScrollChanged(i)))}_unhookEvents(){this._toUnhook.clear()}_onModelDecorationsChanged(){var e,t;(e=this._contentWidget)===null||e===void 0||e.onModelDecorationsChanged(),(t=this._glyphWidget)===null||t===void 0||t.onModelDecorationsChanged()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target.type;if(t===9&&e.target.detail===Ul.ID){this._hoverClicked=!0;return}t===12&&e.target.detail===Lh.ID||(t!==12&&e.target.detail!==Lh.ID&&(this._hoverClicked=!1),this._hideWidgets())}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseMove(e){var t,i,s,r,o;let a=e.target.type;if(this._isMouseDown&&this._hoverClicked||this._isHoverSticky&&a===9&&e.target.detail===Ul.ID||this._isHoverSticky&&!(!((i=(t=e.event.browserEvent.view)===null||t===void 0?void 0:t.getSelection())===null||i===void 0)&&i.isCollapsed)||!this._isHoverSticky&&a===9&&e.target.detail===Ul.ID&&((s=this._contentWidget)===null||s===void 0?void 0:s.isColorPickerVisible())||this._isHoverSticky&&a===12&&e.target.detail===Lh.ID)return;if(!this._isHoverEnabled){this._hideWidgets();return}if(this._getOrCreateContentWidget().maybeShowAt(e)){(r=this._glyphWidget)===null||r===void 0||r.hide();return}if(a===2&&e.target.position){(o=this._contentWidget)===null||o===void 0||o.hide(),this._glyphWidget||(this._glyphWidget=new Lh(this._editor,this._modeService,this._openerService)),this._glyphWidget.startShowingAt(e.target.position.lineNumber);return}this._hideWidgets()}_onKeyDown(e){e.keyCode!==5&&e.keyCode!==6&&e.keyCode!==57&&e.keyCode!==4&&this._hideWidgets()}_hideWidgets(){var e,t,i;this._isMouseDown&&this._hoverClicked&&((e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible())||(this._hoverClicked=!1,(t=this._glyphWidget)===null||t===void 0||t.hide(),(i=this._contentWidget)===null||i===void 0||i.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(Ul,this._editor,this._hoverVisibleKey)),this._contentWidget}isColorPickerVisible(){var e;return((e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,i){this._getOrCreateContentWidget().startShowingAtRange(e,t,i)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),(e=this._glyphWidget)===null||e===void 0||e.dispose(),(t=this._contentWidget)===null||t===void 0||t.dispose()}};Lu.ID="editor.contrib.hover";Lu=mEe([wv(1,pt),wv(2,uc),wv(3,Hn),wv(4,Le)],Lu);class _Ee extends zt{constructor(){super({id:"editor.action.showHover",label:m({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:Vn(2089,2087),weight:100}})}run(e,t){if(!t.hasModel())return;let i=Lu.get(t);if(!i)return;const s=t.getPosition(),r=new I(s.lineNumber,s.column,s.lineNumber,s.column),o=t.getOption(2)===2;i.showContentHover(r,1,o)}}class bEe extends zt{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:m({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){let i=Lu.get(t);if(!i)return;const s=t.getPosition();if(!s)return;const r=new I(s.lineNumber,s.column,s.lineNumber,s.column);yu.get(t).startFindDefinitionFromCursor(s).then(()=>{i.showContentHover(r,1,!0)})}}$n(Lu.ID,Lu);ze(_Ee);ze(bEe);kt((n,e)=>{const t=n.getColor(Hfe);t&&e.addRule(`.monaco-editor .hoverHighlight { background-color: ${t}; }`);const i=n.getColor(__);i&&e.addRule(`.monaco-editor .monaco-hover { background-color: ${i}; }`);const s=n.getColor(Ufe);s&&(e.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${s}; }`),e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${s.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${s.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${s.transparent(.5)}; }`));const r=n.getColor(B1);r&&e.addRule(`.monaco-editor .monaco-hover a { color: ${r}; }`);const o=n.getColor(V1);o&&e.addRule(`.monaco-editor .monaco-hover a:hover { color: ${o}; }`);const a=n.getColor($fe);a&&e.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);const l=n.getColor(jfe);l&&e.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${l}; }`);const c=n.getColor(NW);c&&e.addRule(`.monaco-editor .monaco-hover code { background-color: ${c}; }`)});function vEe(){return new Worker("assets/json.worker.7fa54914.js",{type:"module"})}self.MonacoEnvironment={getWorker(n,e){if(e==="json")return new vEe;throw new Error("Unsupported language: "+e)}};class wEe extends Yd{constructor(){super();id(this,"_editor");id(this,"_initialValue")}set value(t){this._editor?this._editor.setValue(t):this._initialValue=t}get value(){var t,i;return(i=(t=this._editor)==null?void 0:t.getValue())!=null?i:this._initialValue}createRenderRoot(){return this}disconnectedCallback(){var t,i,s;(t=this._editor)==null||t.dispose(),(s=(i=this._editor)==null?void 0:i.getModel())==null||s.dispose()}render(){return Ai}firstUpdated(){this._editor=Nye.create(this,{value:this._initialValue,language:"json",minimap:{enabled:!1}}),this._editor.getModel().onDidChangeContent(()=>{this.dispatchEvent(new CustomEvent("change",{detail:{}}))}),new ResizeObserver(i=>{this._editor.layout()}).observe(this)}}customElements.define("code-editor",wEe);class CEe extends Yd{constructor(){super();id(this,"_currentTab");id(this,"files")}createRenderRoot(){return this}render(){return Ti`
            <ul class="tabs">
                ${Object.keys(this.files).map(t=>Ti`
                            <li
                                data-name=${t}
                                class=${t==this._currentTab?"selected":""}
                            >
                                <a
                                    href="#"
                                    @click=${i=>this._changeTab(i)}
                                    >${t}</a
                                >
                            </li>
                        `)}
                <li class=${this._currentTab===void 0?"selected":""}>
                    <a
                        href="#"
                        @click=${t=>this._changeTab(t)}
                        >Add new files</a
                    >
                </li>
                <li style="flex-grow: 1"></li>
            </ul>

            <div class="tab-pages">
                ${Object.keys(this.files).map(t=>Ti`
                        <div
                            class=${t==this._currentTab?"selected":""}
                        >
                            ${SEe(this.files[t].data)}
                        </div>
                    `)}

                <div class=${this._currentTab===void 0?"selected":""}>
                    ${yEe(t=>this._handleFiles(t))}
                </div>
            </div>
        `}async _handleFiles(t){const s=t.target.files;for(const r of s){const o=await xEe(r),a=xN(o,{type:DEe(o,r.name),parse:"auto"});this.files[r.name]={metadata:r,data:a},this._currentTab=r.name}this.requestUpdate(),this.dispatchEvent(new CustomEvent("upload",{detail:{}}))}_changeTab(t){const s=t.target.parentElement.dataset.name;this._currentTab=s,t.preventDefault(),this.requestUpdate()}}customElements.define("file-pane",CEe);function yEe(n){return Ti` <form class="upload-form">
        <input
            type="file"
            multiple
            accept=".csv,.tsv,.txt,.json"
            id="fileInput"
            @change=${n}
            style="display:none"
        />
        <div id="upload-button-wrapper">
            <button
                class="btn"
                @click=${e=>{document.getElementById("fileInput").click(),e.preventDefault(),e.stopPropagation()}}
            >
                Choose files
            </button>
        </div>

        <p>
            The added file becomes a named datasource, which can be accessed as
            follows:
        </p>

        <pre>
"data": {
    "name": "filename.csv"
}
</pre
        >

        <p>
            N.B. All data processing takes place in your web browser. Nothing is
            uploaded anywhere.
        </p>
    </form>`}function SEe(n){const e=Object.keys(n[0]),t=n.slice(0,30),i=e.map(a=>"text-align: "+(typeof n[0][a]=="number"?"right":"left")),s=a=>Ti`
        <tr>
            ${e.map((l,c)=>Ti`<td style=${i[c]}>${a[l]}</td> `)}
        </tr>
    `,r=()=>Ti`
        <tr>
            ${e.map((a,l)=>Ti`<td style=${i[l]}>...</td> `)}
        </tr>
    `;return Ti`
        <table class="data-sample-table">
            <thead>
                ${(()=>Ti`
        <tr>
            ${e.map((a,l)=>Ti`<th style=${i[l]}>${a}</th> `)}
        </tr>
    `)()}
            </thead>
            <tbody>
                ${t.map(s)}
                ${t.length<n.length?r():""}
            </tbody>
        </table>
    `}function xEe(n){return new Promise((e,t)=>{let i=new FileReader;i.onload=()=>e(i.result),i.onerror=t,i.readAsText(n)})}function DEe(n,e){return/\.json$/.test(e)?"json":n.indexOf("	")>=0?"tsv":"csv"}function _U(n){if(typeof n=="object"&&n!==null){n.description&&(n.markdownDescription=n.description);for(const e in n)n.hasOwnProperty(e)&&(n[e]=_U(n[e]))}return n}EEe();const bU="playgroundSpec",vU=sB(),wU=sB(),CU={};let hL,LEe=window.localStorage.getItem(bU)||Hre,X5="";const lw=["stacked","parallel","full"];let GT=lw[0];function kEe(){GT=lw[(lw.indexOf(GT)+1)%lw.length],yU(),window.dispatchEvent(new Event("resize"))}function EEe(){_U(V3),lS.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:"http://myserver/foo-schema.json",fileMatch:["*"],schema:V3}]})}function IEe(n){var e;return(e=CU[n])==null?void 0:e.data}async function HM(n=!1){var t;const e=(t=wU.value)==null?void 0:t.value;window.localStorage.setItem(bU,e);try{const i=JSON.parse(e),s=JSON.stringify(i);if(s===X5&&!n)return;X5=s,hL&&hL.finalize(),hL=await Vre(vU.value,i,{namedDataProvider:IEe})}catch(i){console.log(i)}}const TEe=()=>Ti`
    <div class="toolbar">
        <img
            title="GenomeSpy"
            alt="GenomeSpy"
            src="${Bre}"
            class="genome-spy-icon"
        />
        <span class="title">
            <span>GenomeSpy Playground</span>
        </span>
        <button @click=${kEe}>
            ${AR(Oq).node[0]}
            <span>Toggle layout</span>
        </button>
        <span class="spacer"></span>
        <a
            class="version"
            href="https://github.com/genome-spy/genome-spy/releases/tag/v${W3.version}"
            >v${W3.version}</a
        >
        <a href="https://genomespy.app/docs/" target="_blank"
            >${AR(Mq).node[0]} <span>Docs</span></a
        >
    </div>
`,NEe=p9(()=>HM(),500,!1),AEe=()=>Ti`
    <section id="playground-layout" class="${GT}">
        ${TEe()}
        <section id="editor-pane">
            <code-editor
                ${aR(wU)}
                @change=${NEe}
                .value=${LEe}
            ></code-editor>
        </section>
        <section id="genome-spy-pane">
            <div ${aR(vU)}></div>
        </section>
        <section id="file-pane">
            <file-pane @upload=${HM} .files=${CU}></file-pane>
        </section>
    </section>
`;function yU(){cw(AEe(),document.body)}yU();HM();export{_Ie as M,mIe as R,Nye as e,lS as l};
