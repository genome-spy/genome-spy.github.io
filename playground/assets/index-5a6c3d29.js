var aie=Object.defineProperty;var lie=(i,e,t)=>e in i?aie(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var H0=(i,e,t)=>(lie(i,typeof e!="symbol"?e+"":e,t),t),bF=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var U0=(i,e,t)=>(bF(i,e,"read from private field"),t?t.call(i):e.get(i)),vF=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},r2=(i,e,t,n)=>(bF(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const _C=window,P3=_C.ShadowRoot&&(_C.ShadyCSS===void 0||_C.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,PH=Symbol(),wF=new WeakMap;let cie=class{constructor(e,t,n){if(this._$cssResult$=!0,n!==PH)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(P3&&e===void 0){const n=t!==void 0&&t.length===1;n&&(e=wF.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&wF.set(t,e))}return e}toString(){return this.cssText}};const hie=i=>new cie(typeof i=="string"?i:i+"",void 0,PH),uie=(i,e)=>{P3?i.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet):e.forEach(t=>{const n=document.createElement("style"),s=_C.litNonce;s!==void 0&&n.setAttribute("nonce",s),n.textContent=t.cssText,i.appendChild(n)})},yF=P3?i=>i:i=>i instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return hie(t)})(i):i;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var o2;const _S=window,CF=_S.trustedTypes,die=CF?CF.emptyScript:"",SF=_S.reactiveElementPolyfillSupport,AI={toAttribute(i,e){switch(e){case Boolean:i=i?die:null;break;case Object:case Array:i=i==null?i:JSON.stringify(i)}return i},fromAttribute(i,e){let t=i;switch(e){case Boolean:t=i!==null;break;case Number:t=i===null?null:Number(i);break;case Object:case Array:try{t=JSON.parse(i)}catch{t=null}}return t}},FH=(i,e)=>e!==i&&(e==e||i==i),a2={attribute:!0,type:String,converter:AI,reflect:!1,hasChanged:FH};let Zg=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var t;(t=this.h)!==null&&t!==void 0||(this.h=[]),this.h.push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((t,n)=>{const s=this._$Ep(n,t);s!==void 0&&(this._$Ev.set(s,n),e.push(s))}),e}static createProperty(e,t=a2){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const n=typeof e=="symbol"?Symbol():"__"+e,s=this.getPropertyDescriptor(e,n,t);s!==void 0&&Object.defineProperty(this.prototype,e,s)}}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(s){const r=this[e];this[t]=s,this.requestUpdate(e,r,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||a2}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,n=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const s of n)this.createProperty(s,t[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const s of n)t.unshift(yF(s))}else e!==void 0&&t.push(yF(e));return t}static _$Ep(e,t){const n=t.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(t=>t(this))}addController(e){var t,n;((t=this._$ES)!==null&&t!==void 0?t:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)===null||n===void 0||n.call(e))}removeController(e){var t;(t=this._$ES)===null||t===void 0||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])})}createRenderRoot(){var e;const t=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return uie(t,this.constructor.elementStyles),t}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(t=>{var n;return(n=t.hostConnected)===null||n===void 0?void 0:n.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(t=>{var n;return(n=t.hostDisconnected)===null||n===void 0?void 0:n.call(t)})}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$EO(e,t,n=a2){var s;const r=this.constructor._$Ep(e,n);if(r!==void 0&&n.reflect===!0){const o=(((s=n.converter)===null||s===void 0?void 0:s.toAttribute)!==void 0?n.converter:AI).toAttribute(t,n.type);this._$El=e,o==null?this.removeAttribute(r):this.setAttribute(r,o),this._$El=null}}_$AK(e,t){var n;const s=this.constructor,r=s._$Ev.get(e);if(r!==void 0&&this._$El!==r){const o=s.getPropertyOptions(r),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((n=o.converter)===null||n===void 0?void 0:n.fromAttribute)!==void 0?o.converter:AI;this._$El=r,this[r]=a.fromAttribute(t,o.type),this._$El=null}}requestUpdate(e,t,n){let s=!0;e!==void 0&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||FH)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),n.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,n))):s=!1),!this.isUpdatePending&&s&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((s,r)=>this[r]=s),this._$Ei=void 0);let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),(e=this._$ES)===null||e===void 0||e.forEach(s=>{var r;return(r=s.hostUpdate)===null||r===void 0?void 0:r.call(s)}),this.update(n)):this._$Ek()}catch(s){throw t=!1,this._$Ek(),s}t&&this._$AE(n)}willUpdate(e){}_$AE(e){var t;(t=this._$ES)===null||t===void 0||t.forEach(n=>{var s;return(s=n.hostUpdated)===null||s===void 0?void 0:s.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((t,n)=>this._$EO(n,this[n],t)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};Zg.finalized=!0,Zg.elementProperties=new Map,Zg.elementStyles=[],Zg.shadowRootOptions={mode:"open"},SF==null||SF({ReactiveElement:Zg}),((o2=_S.reactiveElementVersions)!==null&&o2!==void 0?o2:_S.reactiveElementVersions=[]).push("1.4.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var l2;const bS=window,Jp=bS.trustedTypes,xF=Jp?Jp.createPolicy("lit-html",{createHTML:i=>i}):void 0,xh=`lit$${(Math.random()+"").slice(9)}$`,BH="?"+xh,fie=`<${BH}>`,em=document,Ub=(i="")=>em.createComment(i),$b=i=>i===null||typeof i!="object"&&typeof i!="function",VH=Array.isArray,gie=i=>VH(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",$0=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,DF=/-->/g,LF=/>/g,$u=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),kF=/'/g,AF=/"/g,WH=/^(?:script|style|textarea|title)$/i,pie=i=>(e,...t)=>({_$litType$:i,strings:e,values:t}),Us=pie(1),tm=Symbol.for("lit-noChange"),ln=Symbol.for("lit-nothing"),EF=new WeakMap,yp=em.createTreeWalker(em,129,null,!1),mie=(i,e)=>{const t=i.length-1,n=[];let s,r=e===2?"<svg>":"",o=$0;for(let l=0;l<t;l++){const c=i[l];let h,u,d=-1,f=0;for(;f<c.length&&(o.lastIndex=f,u=o.exec(c),u!==null);)f=o.lastIndex,o===$0?u[1]==="!--"?o=DF:u[1]!==void 0?o=LF:u[2]!==void 0?(WH.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=$u):u[3]!==void 0&&(o=$u):o===$u?u[0]===">"?(o=s??$0,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,h=u[1],o=u[3]===void 0?$u:u[3]==='"'?AF:kF):o===AF||o===kF?o=$u:o===DF||o===LF?o=$0:(o=$u,s=void 0);const g=o===$u&&i[l+1].startsWith("/>")?" ":"";r+=o===$0?c+fie:d>=0?(n.push(h),c.slice(0,d)+"$lit$"+c.slice(d)+xh+g):c+xh+(d===-2?(n.push(void 0),l):g)}const a=r+(i[t]||"<?>")+(e===2?"</svg>":"");if(!Array.isArray(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return[xF!==void 0?xF.createHTML(a):a,n]};class jb{constructor({strings:e,_$litType$:t},n){let s;this.parts=[];let r=0,o=0;const a=e.length-1,l=this.parts,[c,h]=mie(e,t);if(this.el=jb.createElement(c,n),yp.currentNode=this.el.content,t===2){const u=this.el.content,d=u.firstChild;d.remove(),u.append(...d.childNodes)}for(;(s=yp.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes()){const u=[];for(const d of s.getAttributeNames())if(d.endsWith("$lit$")||d.startsWith(xh)){const f=h[o++];if(u.push(d),f!==void 0){const g=s.getAttribute(f.toLowerCase()+"$lit$").split(xh),p=/([.?@])?(.*)/.exec(f);l.push({type:1,index:r,name:p[2],strings:g,ctor:p[1]==="."?bie:p[1]==="?"?wie:p[1]==="@"?yie:BD})}else l.push({type:6,index:r})}for(const d of u)s.removeAttribute(d)}if(WH.test(s.tagName)){const u=s.textContent.split(xh),d=u.length-1;if(d>0){s.textContent=Jp?Jp.emptyScript:"";for(let f=0;f<d;f++)s.append(u[f],Ub()),yp.nextNode(),l.push({type:2,index:++r});s.append(u[d],Ub())}}}else if(s.nodeType===8)if(s.data===BH)l.push({type:2,index:r});else{let u=-1;for(;(u=s.data.indexOf(xh,u+1))!==-1;)l.push({type:7,index:r}),u+=xh.length-1}r++}}static createElement(e,t){const n=em.createElement("template");return n.innerHTML=e,n}}function im(i,e,t=i,n){var s,r,o,a;if(e===tm)return e;let l=n!==void 0?(s=t._$Co)===null||s===void 0?void 0:s[n]:t._$Cl;const c=$b(e)?void 0:e._$litDirective$;return(l==null?void 0:l.constructor)!==c&&((r=l==null?void 0:l._$AO)===null||r===void 0||r.call(l,!1),c===void 0?l=void 0:(l=new c(i),l._$AT(i,t,n)),n!==void 0?((o=(a=t)._$Co)!==null&&o!==void 0?o:a._$Co=[])[n]=l:t._$Cl=l),l!==void 0&&(e=im(i,l._$AS(i,e.values),l,n)),e}let _ie=class{constructor(e,t){this.u=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(e){var t;const{el:{content:n},parts:s}=this._$AD,r=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:em).importNode(n,!0);yp.currentNode=r;let o=yp.nextNode(),a=0,l=0,c=s[0];for(;c!==void 0;){if(a===c.index){let h;c.type===2?h=new V1(o,o.nextSibling,this,e):c.type===1?h=new c.ctor(o,c.name,c.strings,this,e):c.type===6&&(h=new Cie(o,this,e)),this.u.push(h),c=s[++l]}a!==(c==null?void 0:c.index)&&(o=yp.nextNode(),a++)}return r}p(e){let t=0;for(const n of this.u)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}};class V1{constructor(e,t,n,s){var r;this.type=2,this._$AH=ln,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=s,this._$Cm=(r=s==null?void 0:s.isConnected)===null||r===void 0||r}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cm}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&e.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=im(this,e,t),$b(e)?e===ln||e==null||e===""?(this._$AH!==ln&&this._$AR(),this._$AH=ln):e!==this._$AH&&e!==tm&&this.g(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):gie(e)?this.k(e):this.g(e)}O(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}g(e){this._$AH!==ln&&$b(this._$AH)?this._$AA.nextSibling.data=e:this.T(em.createTextNode(e)),this._$AH=e}$(e){var t;const{values:n,_$litType$:s}=e,r=typeof s=="number"?this._$AC(e):(s.el===void 0&&(s.el=jb.createElement(s.h,this.options)),s);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===r)this._$AH.p(n);else{const o=new _ie(r,this),a=o.v(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let t=EF.get(e.strings);return t===void 0&&EF.set(e.strings,t=new jb(e)),t}k(e){VH(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,s=0;for(const r of e)s===t.length?t.push(n=new V1(this.O(Ub()),this.O(Ub()),this,this.options)):n=t[s],n._$AI(r),s++;s<t.length&&(this._$AR(n&&n._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,t);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var t;this._$AM===void 0&&(this._$Cm=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}}class BD{constructor(e,t,n,s,r){this.type=1,this._$AH=ln,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=r,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=ln}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,s){const r=this.strings;let o=!1;if(r===void 0)e=im(this,e,t,0),o=!$b(e)||e!==this._$AH&&e!==tm,o&&(this._$AH=e);else{const a=e;let l,c;for(e=r[0],l=0;l<r.length-1;l++)c=im(this,a[n+l],t,l),c===tm&&(c=this._$AH[l]),o||(o=!$b(c)||c!==this._$AH[l]),c===ln?e=ln:e!==ln&&(e+=(c??"")+r[l+1]),this._$AH[l]=c}o&&!s&&this.j(e)}j(e){e===ln?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class bie extends BD{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ln?void 0:e}}const vie=Jp?Jp.emptyScript:"";class wie extends BD{constructor(){super(...arguments),this.type=4}j(e){e&&e!==ln?this.element.setAttribute(this.name,vie):this.element.removeAttribute(this.name)}}class yie extends BD{constructor(e,t,n,s,r){super(e,t,n,s,r),this.type=5}_$AI(e,t=this){var n;if((e=(n=im(this,e,t,0))!==null&&n!==void 0?n:ln)===tm)return;const s=this._$AH,r=e===ln&&s!==ln||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,o=e!==ln&&(s===ln||r);r&&this.element.removeEventListener(this.name,this,s),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;typeof this._$AH=="function"?this._$AH.call((n=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}class Cie{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){im(this,e)}}const IF=bS.litHtmlPolyfillSupport;IF==null||IF(jb,V1),((l2=bS.litHtmlVersions)!==null&&l2!==void 0?l2:bS.litHtmlVersions=[]).push("2.4.0");const zH=(i,e,t)=>{var n,s;const r=(n=t==null?void 0:t.renderBefore)!==null&&n!==void 0?n:e;let o=r._$litPart$;if(o===void 0){const a=(s=t==null?void 0:t.renderBefore)!==null&&s!==void 0?s:null;r._$litPart$=o=new V1(e.insertBefore(Ub(),a),a,void 0,t??{})}return o._$AI(i),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var c2,h2;let Cp=class extends Zg{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var e,t;const n=super.createRenderRoot();return(e=(t=this.renderOptions).renderBefore)!==null&&e!==void 0||(t.renderBefore=n.firstChild),n}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Dt=zH(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!1)}render(){return tm}};Cp.finalized=!0,Cp._$litElement$=!0,(c2=globalThis.litElementHydrateSupport)===null||c2===void 0||c2.call(globalThis,{LitElement:Cp});const TF=globalThis.litElementPolyfillSupport;TF==null||TF({LitElement:Cp});((h2=globalThis.litElementVersions)!==null&&h2!==void 0?h2:globalThis.litElementVersions=[]).push("3.2.0");/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Sie=i=>i.strings===void 0;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const xie={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Die=i=>(...e)=>({_$litDirective$:i,values:e});class Lie{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,n){this._$Ct=e,this._$AM=t,this._$Ci=n}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const H_=(i,e)=>{var t,n;const s=i._$AN;if(s===void 0)return!1;for(const r of s)(n=(t=r)._$AO)===null||n===void 0||n.call(t,e,!1),H_(r,e);return!0},vS=i=>{let e,t;do{if((e=i._$AM)===void 0)break;t=e._$AN,t.delete(i),i=e}while((t==null?void 0:t.size)===0)},HH=i=>{for(let e;e=i._$AM;i=e){let t=e._$AN;if(t===void 0)e._$AN=t=new Set;else if(t.has(i))break;t.add(i),Eie(e)}};function kie(i){this._$AN!==void 0?(vS(this),this._$AM=i,HH(this)):this._$AM=i}function Aie(i,e=!1,t=0){const n=this._$AH,s=this._$AN;if(s!==void 0&&s.size!==0)if(e)if(Array.isArray(n))for(let r=t;r<n.length;r++)H_(n[r],!1),vS(n[r]);else n!=null&&(H_(n,!1),vS(n));else H_(this,i)}const Eie=i=>{var e,t,n,s;i.type==xie.CHILD&&((e=(n=i)._$AP)!==null&&e!==void 0||(n._$AP=Aie),(t=(s=i)._$AQ)!==null&&t!==void 0||(s._$AQ=kie))};class Iie extends Lie{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,n){super._$AT(e,t,n),HH(this),this.isConnected=e._$AU}_$AO(e,t=!0){var n,s;e!==this.isConnected&&(this.isConnected=e,e?(n=this.reconnected)===null||n===void 0||n.call(this):(s=this.disconnected)===null||s===void 0||s.call(this)),t&&(H_(this,e),vS(this))}setValue(e){if(Sie(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const UH=()=>new Tie;let Tie=class{};const u2=new WeakMap,NF=Die(class extends Iie{render(i){return ln}update(i,[e]){var t;const n=e!==this.Y;return n&&this.Y!==void 0&&this.rt(void 0),(n||this.lt!==this.ct)&&(this.Y=e,this.dt=(t=i.options)===null||t===void 0?void 0:t.host,this.rt(this.ct=i.element)),ln}rt(i){var e;if(typeof this.Y=="function"){const t=(e=this.dt)!==null&&e!==void 0?e:globalThis;let n=u2.get(t);n===void 0&&(n=new WeakMap,u2.set(t,n)),n.get(this.Y)!==void 0&&this.Y.call(this.dt,void 0),n.set(this.Y,i),i!==void 0&&this.Y.call(this.dt,i)}else this.Y.value=i}get lt(){var i,e,t;return typeof this.Y=="function"?(e=u2.get((i=this.dt)!==null&&i!==void 0?i:globalThis))===null||e===void 0?void 0:e.get(this.Y):(t=this.Y)===null||t===void 0?void 0:t.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});/*!
 * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function MF(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function Oe(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?MF(Object(t),!0).forEach(function(n){Rie(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):MF(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function wS(i){return wS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wS(i)}function Nie(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function RF(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function Mie(i,e,t){return e&&RF(i.prototype,e),t&&RF(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function Rie(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function F3(i,e){return Pie(i)||Bie(i,e)||$H(i,e)||Wie()}function VD(i){return Oie(i)||Fie(i)||$H(i)||Vie()}function Oie(i){if(Array.isArray(i))return EI(i)}function Pie(i){if(Array.isArray(i))return i}function Fie(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Bie(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],s=!0,r=!1,o,a;try{for(t=t.call(i);!(s=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));s=!0);}catch(l){r=!0,a=l}finally{try{!s&&t.return!=null&&t.return()}finally{if(r)throw a}}return n}}function $H(i,e){if(i){if(typeof i=="string")return EI(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return EI(i,e)}}function EI(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function Vie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var OF=function(){},B3={},jH={},qH=null,GH={mark:OF,measure:OF};try{typeof window<"u"&&(B3=window),typeof document<"u"&&(jH=document),typeof MutationObserver<"u"&&(qH=MutationObserver),typeof performance<"u"&&(GH=performance)}catch{}var zie=B3.navigator||{},PF=zie.userAgent,FF=PF===void 0?"":PF,su=B3,Ri=jH,BF=qH,$w=GH;su.document;var Zc=!!Ri.documentElement&&!!Ri.head&&typeof Ri.addEventListener=="function"&&typeof Ri.createElement=="function",KH=~FF.indexOf("MSIE")||~FF.indexOf("Trident/"),Bc="___FONT_AWESOME___",II=16,ZH="fa",YH="svg-inline--fa",Jd="data-fa-i2svg",TI="data-fa-pseudo-element",Hie="data-fa-pseudo-element-pending",V3="data-prefix",W3="data-icon",VF="fontawesome-i2svg",Uie="async",$ie=["HTML","HEAD","STYLE","SCRIPT"],QH=function(){try{return!0}catch{return!1}}(),z3={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},yS={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},XH={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},jie={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},qie=/fa[srltdbk\-\ ]/,JH="fa-layers-text",Gie=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,Kie={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},eU=[1,2,3,4,5,6,7,8,9,10],Zie=eU.concat([11,12,13,14,15,16,17,18,19,20]),Yie=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],_d={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Qie=[].concat(VD(Object.keys(yS)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",_d.GROUP,_d.SWAP_OPACITY,_d.PRIMARY,_d.SECONDARY]).concat(eU.map(function(i){return"".concat(i,"x")})).concat(Zie.map(function(i){return"w-".concat(i)})),tU=su.FontAwesomeConfig||{};function Xie(i){var e=Ri.querySelector("script["+i+"]");if(e)return e.getAttribute(i)}function Jie(i){return i===""?!0:i==="false"?!1:i==="true"?!0:i}if(Ri&&typeof Ri.querySelector=="function"){var ene=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];ene.forEach(function(i){var e=F3(i,2),t=e[0],n=e[1],s=Jie(Xie(t));s!=null&&(tU[n]=s)})}var tne={familyPrefix:ZH,styleDefault:"solid",replacementClass:YH,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},U_=Oe(Oe({},tne),tU);U_.autoReplaceSvg||(U_.observeMutations=!1);var Ze={};Object.keys(U_).forEach(function(i){Object.defineProperty(Ze,i,{enumerable:!0,set:function(t){U_[i]=t,bC.forEach(function(n){return n(Ze)})},get:function(){return U_[i]}})});su.FontAwesomeConfig=Ze;var bC=[];function ine(i){return bC.push(i),function(){bC.splice(bC.indexOf(i),1)}}var sh=II,ul={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function nne(i){if(!(!i||!Zc)){var e=Ri.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=i;for(var t=Ri.head.childNodes,n=null,s=t.length-1;s>-1;s--){var r=t[s],o=(r.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(n=r)}return Ri.head.insertBefore(e,n),i}}var sne="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function qb(){for(var i=12,e="";i-- >0;)e+=sne[Math.random()*62|0];return e}function i0(i){for(var e=[],t=(i||[]).length>>>0;t--;)e[t]=i[t];return e}function H3(i){return i.classList?i0(i.classList):(i.getAttribute("class")||"").split(" ").filter(function(e){return e})}function iU(i){return"".concat(i).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function rne(i){return Object.keys(i||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(iU(i[t]),'" ')},"").trim()}function WD(i){return Object.keys(i||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(i[t].trim(),";")},"")}function U3(i){return i.size!==ul.size||i.x!==ul.x||i.y!==ul.y||i.rotate!==ul.rotate||i.flipX||i.flipY}function one(i){var e=i.transform,t=i.containerWidth,n=i.iconWidth,s={transform:"translate(".concat(t/2," 256)")},r="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(r," ").concat(o," ").concat(a)},c={transform:"translate(".concat(n/2*-1," -256)")};return{outer:s,inner:l,path:c}}function ane(i){var e=i.transform,t=i.width,n=t===void 0?II:t,s=i.height,r=s===void 0?II:s,o=i.startCentered,a=o===void 0?!1:o,l="";return a&&KH?l+="translate(".concat(e.x/sh-n/2,"em, ").concat(e.y/sh-r/2,"em) "):a?l+="translate(calc(-50% + ".concat(e.x/sh,"em), calc(-50% + ").concat(e.y/sh,"em)) "):l+="translate(".concat(e.x/sh,"em, ").concat(e.y/sh,"em) "),l+="scale(".concat(e.size/sh*(e.flipX?-1:1),", ").concat(e.size/sh*(e.flipY?-1:1),") "),l+="rotate(".concat(e.rotate,"deg) "),l}var lne=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function nU(){var i=ZH,e=YH,t=Ze.familyPrefix,n=Ze.replacementClass,s=lne;if(t!==i||n!==e){var r=new RegExp("\\.".concat(i,"\\-"),"g"),o=new RegExp("\\--".concat(i,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");s=s.replace(r,".".concat(t,"-")).replace(o,"--".concat(t,"-")).replace(a,".".concat(n))}return s}var WF=!1;function d2(){Ze.autoAddCss&&!WF&&(nne(nU()),WF=!0)}var cne={mixout:function(){return{dom:{css:nU,insertCss:d2}}},hooks:function(){return{beforeDOMElementCreation:function(){d2()},beforeI2svg:function(){d2()}}}},Vc=su||{};Vc[Bc]||(Vc[Bc]={});Vc[Bc].styles||(Vc[Bc].styles={});Vc[Bc].hooks||(Vc[Bc].hooks={});Vc[Bc].shims||(Vc[Bc].shims=[]);var ia=Vc[Bc],sU=[],hne=function i(){Ri.removeEventListener("DOMContentLoaded",i),CS=1,sU.map(function(e){return e()})},CS=!1;Zc&&(CS=(Ri.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ri.readyState),CS||Ri.addEventListener("DOMContentLoaded",hne));function une(i){Zc&&(CS?setTimeout(i,0):sU.push(i))}function W1(i){var e=i.tag,t=i.attributes,n=t===void 0?{}:t,s=i.children,r=s===void 0?[]:s;return typeof i=="string"?iU(i):"<".concat(e," ").concat(rne(n),">").concat(r.map(W1).join(""),"</").concat(e,">")}function zF(i,e,t){if(i&&i[e]&&i[e][t])return{prefix:e,iconName:t,icon:i[e][t]}}var dne=function(e,t){return function(n,s,r,o){return e.call(t,n,s,r,o)}},f2=function(e,t,n,s){var r=Object.keys(e),o=r.length,a=s!==void 0?dne(t,s):t,l,c,h;for(n===void 0?(l=1,h=e[r[0]]):(l=0,h=n);l<o;l++)c=r[l],h=a(h,e[c],c,e);return h};function fne(i){for(var e=[],t=0,n=i.length;t<n;){var s=i.charCodeAt(t++);if(s>=55296&&s<=56319&&t<n){var r=i.charCodeAt(t++);(r&64512)==56320?e.push(((s&1023)<<10)+(r&1023)+65536):(e.push(s),t--)}else e.push(s)}return e}function NI(i){var e=fne(i);return e.length===1?e[0].toString(16):null}function gne(i,e){var t=i.length,n=i.charCodeAt(e),s;return n>=55296&&n<=56319&&t>e+1&&(s=i.charCodeAt(e+1),s>=56320&&s<=57343)?(n-55296)*1024+s-56320+65536:n}function HF(i){return Object.keys(i).reduce(function(e,t){var n=i[t],s=!!n.icon;return s?e[n.iconName]=n.icon:e[t]=n,e},{})}function MI(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.skipHooks,s=n===void 0?!1:n,r=HF(e);typeof ia.hooks.addPack=="function"&&!s?ia.hooks.addPack(i,HF(e)):ia.styles[i]=Oe(Oe({},ia.styles[i]||{}),r),i==="fas"&&MI("fa",e)}var $_=ia.styles,pne=ia.shims,mne=Object.values(XH),$3=null,rU={},oU={},aU={},lU={},cU={},_ne=Object.keys(z3);function bne(i){return~Qie.indexOf(i)}function vne(i,e){var t=e.split("-"),n=t[0],s=t.slice(1).join("-");return n===i&&s!==""&&!bne(s)?s:null}var hU=function(){var e=function(r){return f2($_,function(o,a,l){return o[l]=f2(a,r,{}),o},{})};rU=e(function(s,r,o){if(r[3]&&(s[r[3]]=o),r[2]){var a=r[2].filter(function(l){return typeof l=="number"});a.forEach(function(l){s[l.toString(16)]=o})}return s}),oU=e(function(s,r,o){if(s[o]=o,r[2]){var a=r[2].filter(function(l){return typeof l=="string"});a.forEach(function(l){s[l]=o})}return s}),cU=e(function(s,r,o){var a=r[2];return s[o]=o,a.forEach(function(l){s[l]=o}),s});var t="far"in $_||Ze.autoFetchSvg,n=f2(pne,function(s,r){var o=r[0],a=r[1],l=r[2];return a==="far"&&!t&&(a="fas"),typeof o=="string"&&(s.names[o]={prefix:a,iconName:l}),typeof o=="number"&&(s.unicodes[o.toString(16)]={prefix:a,iconName:l}),s},{names:{},unicodes:{}});aU=n.names,lU=n.unicodes,$3=zD(Ze.styleDefault)};ine(function(i){$3=zD(i.styleDefault)});hU();function j3(i,e){return(rU[i]||{})[e]}function wne(i,e){return(oU[i]||{})[e]}function np(i,e){return(cU[i]||{})[e]}function uU(i){return aU[i]||{prefix:null,iconName:null}}function yne(i){var e=lU[i],t=j3("fas",i);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}function ru(){return $3}var q3=function(){return{prefix:null,iconName:null,rest:[]}};function zD(i){var e=z3[i],t=yS[i]||yS[e],n=i in ia.styles?i:null;return t||n||null}function HD(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.skipLookups,n=t===void 0?!1:t,s=null,r=i.reduce(function(o,a){var l=vne(Ze.familyPrefix,a);if($_[a]?(a=mne.includes(a)?jie[a]:a,s=a,o.prefix=a):_ne.indexOf(a)>-1?(s=a,o.prefix=zD(a)):l?o.iconName=l:a!==Ze.replacementClass&&o.rest.push(a),!n&&o.prefix&&o.iconName){var c=s==="fa"?uU(o.iconName):{},h=np(o.prefix,o.iconName);c.prefix&&(s=null),o.iconName=c.iconName||h||o.iconName,o.prefix=c.prefix||o.prefix,o.prefix==="far"&&!$_.far&&$_.fas&&!Ze.autoFetchSvg&&(o.prefix="fas")}return o},q3());return(r.prefix==="fa"||s==="fa")&&(r.prefix=ru()||"fas"),r}var Cne=function(){function i(){Nie(this,i),this.definitions={}}return Mie(i,[{key:"add",value:function(){for(var t=this,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];var o=s.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){t.definitions[a]=Oe(Oe({},t.definitions[a]||{}),o[a]),MI(a,o[a]);var l=XH[a];l&&MI(l,o[a]),hU()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,n){var s=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(s).map(function(r){var o=s[r],a=o.prefix,l=o.iconName,c=o.icon,h=c[2];t[a]||(t[a]={}),h.length>0&&h.forEach(function(u){typeof u=="string"&&(t[a][u]=c)}),t[a][l]=c}),t}}]),i}(),UF=[],sp={},Sp={},Sne=Object.keys(Sp);function xne(i,e){var t=e.mixoutsTo;return UF=i,sp={},Object.keys(Sp).forEach(function(n){Sne.indexOf(n)===-1&&delete Sp[n]}),UF.forEach(function(n){var s=n.mixout?n.mixout():{};if(Object.keys(s).forEach(function(o){typeof s[o]=="function"&&(t[o]=s[o]),wS(s[o])==="object"&&Object.keys(s[o]).forEach(function(a){t[o]||(t[o]={}),t[o][a]=s[o][a]})}),n.hooks){var r=n.hooks();Object.keys(r).forEach(function(o){sp[o]||(sp[o]=[]),sp[o].push(r[o])})}n.provides&&n.provides(Sp)}),t}function RI(i,e){for(var t=arguments.length,n=new Array(t>2?t-2:0),s=2;s<t;s++)n[s-2]=arguments[s];var r=sp[i]||[];return r.forEach(function(o){e=o.apply(null,[e].concat(n))}),e}function ef(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];var s=sp[i]||[];s.forEach(function(r){r.apply(null,t)})}function Wc(){var i=arguments[0],e=Array.prototype.slice.call(arguments,1);return Sp[i]?Sp[i].apply(null,e):void 0}function OI(i){i.prefix==="fa"&&(i.prefix="fas");var e=i.iconName,t=i.prefix||ru();if(e)return e=np(t,e)||e,zF(dU.definitions,t,e)||zF(ia.styles,t,e)}var dU=new Cne,Dne=function(){Ze.autoReplaceSvg=!1,Ze.observeMutations=!1,ef("noAuto")},Lne={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Zc?(ef("beforeI2svg",e),Wc("pseudoElements2svg",e),Wc("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.autoReplaceSvgRoot;Ze.autoReplaceSvg===!1&&(Ze.autoReplaceSvg=!0),Ze.observeMutations=!0,une(function(){Ane({autoReplaceSvgRoot:t}),ef("watch",e)})}},kne={icon:function(e){if(e===null)return null;if(wS(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:np(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var t=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],n=zD(e[0]);return{prefix:n,iconName:np(n,t)||t}}if(typeof e=="string"&&(e.indexOf("".concat(Ze.familyPrefix,"-"))>-1||e.match(qie))){var s=HD(e.split(" "),{skipLookups:!0});return{prefix:s.prefix||ru(),iconName:np(s.prefix,s.iconName)||s.iconName}}if(typeof e=="string"){var r=ru();return{prefix:r,iconName:np(r,e)||e}}}},Kr={noAuto:Dne,config:Ze,dom:Lne,parse:kne,library:dU,findIconDefinition:OI,toHtml:W1},Ane=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.autoReplaceSvgRoot,n=t===void 0?Ri:t;(Object.keys(ia.styles).length>0||Ze.autoFetchSvg)&&Zc&&Ze.autoReplaceSvg&&Kr.dom.i2svg({node:n})};function UD(i,e){return Object.defineProperty(i,"abstract",{get:e}),Object.defineProperty(i,"html",{get:function(){return i.abstract.map(function(n){return W1(n)})}}),Object.defineProperty(i,"node",{get:function(){if(Zc){var n=Ri.createElement("div");return n.innerHTML=i.html,n.children}}}),i}function Ene(i){var e=i.children,t=i.main,n=i.mask,s=i.attributes,r=i.styles,o=i.transform;if(U3(o)&&t.found&&!n.found){var a=t.width,l=t.height,c={x:a/l/2,y:.5};s.style=WD(Oe(Oe({},r),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:s,children:e}]}function Ine(i){var e=i.prefix,t=i.iconName,n=i.children,s=i.attributes,r=i.symbol,o=r===!0?"".concat(e,"-").concat(Ze.familyPrefix,"-").concat(t):r;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Oe(Oe({},s),{},{id:o}),children:n}]}]}function G3(i){var e=i.icons,t=e.main,n=e.mask,s=i.prefix,r=i.iconName,o=i.transform,a=i.symbol,l=i.title,c=i.maskId,h=i.titleId,u=i.extra,d=i.watchable,f=d===void 0?!1:d,g=n.found?n:t,p=g.width,m=g.height,v=s==="fak",b=[Ze.replacementClass,r?"".concat(Ze.familyPrefix,"-").concat(r):""].filter(function(D){return u.classes.indexOf(D)===-1}).filter(function(D){return D!==""||!!D}).concat(u.classes).join(" "),w={children:[],attributes:Oe(Oe({},u.attributes),{},{"data-prefix":s,"data-icon":r,class:b,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(p," ").concat(m)})},y=v&&!~u.classes.indexOf("fa-fw")?{width:"".concat(p/m*16*.0625,"em")}:{};f&&(w.attributes[Jd]=""),l&&(w.children.push({tag:"title",attributes:{id:w.attributes["aria-labelledby"]||"title-".concat(h||qb())},children:[l]}),delete w.attributes.title);var x=Oe(Oe({},w),{},{prefix:s,iconName:r,main:t,mask:n,maskId:c,transform:o,symbol:a,styles:Oe(Oe({},y),u.styles)}),k=n.found&&t.found?Wc("generateAbstractMask",x)||{children:[],attributes:{}}:Wc("generateAbstractIcon",x)||{children:[],attributes:{}},S=k.children,L=k.attributes;return x.children=S,x.attributes=L,a?Ine(x):Ene(x)}function $F(i){var e=i.content,t=i.width,n=i.height,s=i.transform,r=i.title,o=i.extra,a=i.watchable,l=a===void 0?!1:a,c=Oe(Oe(Oe({},o.attributes),r?{title:r}:{}),{},{class:o.classes.join(" ")});l&&(c[Jd]="");var h=Oe({},o.styles);U3(s)&&(h.transform=ane({transform:s,startCentered:!0,width:t,height:n}),h["-webkit-transform"]=h.transform);var u=WD(h);u.length>0&&(c.style=u);var d=[];return d.push({tag:"span",attributes:c,children:[e]}),r&&d.push({tag:"span",attributes:{class:"sr-only"},children:[r]}),d}function Tne(i){var e=i.content,t=i.title,n=i.extra,s=Oe(Oe(Oe({},n.attributes),t?{title:t}:{}),{},{class:n.classes.join(" ")}),r=WD(n.styles);r.length>0&&(s.style=r);var o=[];return o.push({tag:"span",attributes:s,children:[e]}),t&&o.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),o}var g2=ia.styles;function PI(i){var e=i[0],t=i[1],n=i.slice(4),s=F3(n,1),r=s[0],o=null;return Array.isArray(r)?o={tag:"g",attributes:{class:"".concat(Ze.familyPrefix,"-").concat(_d.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Ze.familyPrefix,"-").concat(_d.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Ze.familyPrefix,"-").concat(_d.PRIMARY),fill:"currentColor",d:r[1]}}]}:o={tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:e,height:t,icon:o}}var Nne={found:!1,width:512,height:512};function Mne(i,e){!QH&&!Ze.showMissingIcons&&i&&console.error('Icon with name "'.concat(i,'" and prefix "').concat(e,'" is missing.'))}function FI(i,e){var t=e;return e==="fa"&&Ze.styleDefault!==null&&(e=ru()),new Promise(function(n,s){if(Wc("missingIconAbstract"),t==="fa"){var r=uU(i)||{};i=r.iconName||i,e=r.prefix||e}if(i&&e&&g2[e]&&g2[e][i]){var o=g2[e][i];return n(PI(o))}Mne(i,e),n(Oe(Oe({},Nne),{},{icon:Ze.showMissingIcons&&i?Wc("missingIconAbstract")||{}:{}}))})}var jF=function(){},BI=Ze.measurePerformance&&$w&&$w.mark&&$w.measure?$w:{mark:jF,measure:jF},S_='FA "6.1.1"',Rne=function(e){return BI.mark("".concat(S_," ").concat(e," begins")),function(){return fU(e)}},fU=function(e){BI.mark("".concat(S_," ").concat(e," ends")),BI.measure("".concat(S_," ").concat(e),"".concat(S_," ").concat(e," begins"),"".concat(S_," ").concat(e," ends"))},K3={begin:Rne,end:fU},vC=function(){};function qF(i){var e=i.getAttribute?i.getAttribute(Jd):null;return typeof e=="string"}function One(i){var e=i.getAttribute?i.getAttribute(V3):null,t=i.getAttribute?i.getAttribute(W3):null;return e&&t}function Pne(i){return i&&i.classList&&i.classList.contains&&i.classList.contains(Ze.replacementClass)}function Fne(){if(Ze.autoReplaceSvg===!0)return wC.replace;var i=wC[Ze.autoReplaceSvg];return i||wC.replace}function Bne(i){return Ri.createElementNS("http://www.w3.org/2000/svg",i)}function Vne(i){return Ri.createElement(i)}function gU(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.ceFn,n=t===void 0?i.tag==="svg"?Bne:Vne:t;if(typeof i=="string")return Ri.createTextNode(i);var s=n(i.tag);Object.keys(i.attributes||[]).forEach(function(o){s.setAttribute(o,i.attributes[o])});var r=i.children||[];return r.forEach(function(o){s.appendChild(gU(o,{ceFn:n}))}),s}function Wne(i){var e=" ".concat(i.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var wC={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(s){t.parentNode.insertBefore(gU(s),t)}),t.getAttribute(Jd)===null&&Ze.keepOriginalSource){var n=Ri.createComment(Wne(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){var t=e[0],n=e[1];if(~H3(t).indexOf(Ze.replacementClass))return wC.replace(e);var s=new RegExp("".concat(Ze.familyPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var r=n[0].attributes.class.split(" ").reduce(function(a,l){return l===Ze.replacementClass||l.match(s)?a.toSvg.push(l):a.toNode.push(l),a},{toNode:[],toSvg:[]});n[0].attributes.class=r.toSvg.join(" "),r.toNode.length===0?t.removeAttribute("class"):t.setAttribute("class",r.toNode.join(" "))}var o=n.map(function(a){return W1(a)}).join(`
`);t.setAttribute(Jd,""),t.innerHTML=o}};function GF(i){i()}function pU(i,e){var t=typeof e=="function"?e:vC;if(i.length===0)t();else{var n=GF;Ze.mutateApproach===Uie&&(n=su.requestAnimationFrame||GF),n(function(){var s=Fne(),r=K3.begin("mutate");i.map(s),r(),t()})}}var Z3=!1;function mU(){Z3=!0}function VI(){Z3=!1}var SS=null;function KF(i){if(BF&&Ze.observeMutations){var e=i.treeCallback,t=e===void 0?vC:e,n=i.nodeCallback,s=n===void 0?vC:n,r=i.pseudoElementsCallback,o=r===void 0?vC:r,a=i.observeMutationsRoot,l=a===void 0?Ri:a;SS=new BF(function(c){if(!Z3){var h=ru();i0(c).forEach(function(u){if(u.type==="childList"&&u.addedNodes.length>0&&!qF(u.addedNodes[0])&&(Ze.searchPseudoElements&&o(u.target),t(u.target)),u.type==="attributes"&&u.target.parentNode&&Ze.searchPseudoElements&&o(u.target.parentNode),u.type==="attributes"&&qF(u.target)&&~Yie.indexOf(u.attributeName))if(u.attributeName==="class"&&One(u.target)){var d=HD(H3(u.target)),f=d.prefix,g=d.iconName;u.target.setAttribute(V3,f||h),g&&u.target.setAttribute(W3,g)}else Pne(u.target)&&s(u.target)})}}),Zc&&SS.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function zne(){SS&&SS.disconnect()}function Hne(i){var e=i.getAttribute("style"),t=[];return e&&(t=e.split(";").reduce(function(n,s){var r=s.split(":"),o=r[0],a=r.slice(1);return o&&a.length>0&&(n[o]=a.join(":").trim()),n},{})),t}function Une(i){var e=i.getAttribute("data-prefix"),t=i.getAttribute("data-icon"),n=i.innerText!==void 0?i.innerText.trim():"",s=HD(H3(i));return s.prefix||(s.prefix=ru()),e&&t&&(s.prefix=e,s.iconName=t),s.iconName&&s.prefix||s.prefix&&n.length>0&&(s.iconName=wne(s.prefix,i.innerText)||j3(s.prefix,NI(i.innerText))),s}function $ne(i){var e=i0(i.attributes).reduce(function(s,r){return s.name!=="class"&&s.name!=="style"&&(s[r.name]=r.value),s},{}),t=i.getAttribute("title"),n=i.getAttribute("data-fa-title-id");return Ze.autoA11y&&(t?e["aria-labelledby"]="".concat(Ze.replacementClass,"-title-").concat(n||qb()):(e["aria-hidden"]="true",e.focusable="false")),e}function jne(){return{iconName:null,title:null,titleId:null,prefix:null,transform:ul,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function ZF(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},t=Une(i),n=t.iconName,s=t.prefix,r=t.rest,o=$ne(i),a=RI("parseNodeAttributes",{},i),l=e.styleParser?Hne(i):[];return Oe({iconName:n,title:i.getAttribute("title"),titleId:i.getAttribute("data-fa-title-id"),prefix:s,transform:ul,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:l,attributes:o}},a)}var qne=ia.styles;function _U(i){var e=Ze.autoReplaceSvg==="nest"?ZF(i,{styleParser:!1}):ZF(i);return~e.extra.classes.indexOf(JH)?Wc("generateLayersText",i,e):Wc("generateSvgReplacementMutation",i,e)}function YF(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Zc)return Promise.resolve();var t=Ri.documentElement.classList,n=function(u){return t.add("".concat(VF,"-").concat(u))},s=function(u){return t.remove("".concat(VF,"-").concat(u))},r=Ze.autoFetchSvg?Object.keys(z3):Object.keys(qne),o=[".".concat(JH,":not([").concat(Jd,"])")].concat(r.map(function(h){return".".concat(h,":not([").concat(Jd,"])")})).join(", ");if(o.length===0)return Promise.resolve();var a=[];try{a=i0(i.querySelectorAll(o))}catch{}if(a.length>0)n("pending"),s("complete");else return Promise.resolve();var l=K3.begin("onTree"),c=a.reduce(function(h,u){try{var d=_U(u);d&&h.push(d)}catch(f){QH||f.name==="MissingIcon"&&console.error(f)}return h},[]);return new Promise(function(h,u){Promise.all(c).then(function(d){pU(d,function(){n("active"),n("complete"),s("pending"),typeof e=="function"&&e(),l(),h()})}).catch(function(d){l(),u(d)})})}function Gne(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;_U(i).then(function(t){t&&pU([t],e)})}function Kne(i){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=(e||{}).icon?e:OI(e||{}),s=t.mask;return s&&(s=(s||{}).icon?s:OI(s||{})),i(n,Oe(Oe({},t),{},{mask:s}))}}var Zne=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.transform,s=n===void 0?ul:n,r=t.symbol,o=r===void 0?!1:r,a=t.mask,l=a===void 0?null:a,c=t.maskId,h=c===void 0?null:c,u=t.title,d=u===void 0?null:u,f=t.titleId,g=f===void 0?null:f,p=t.classes,m=p===void 0?[]:p,v=t.attributes,b=v===void 0?{}:v,w=t.styles,y=w===void 0?{}:w;if(e){var x=e.prefix,k=e.iconName,S=e.icon;return UD(Oe({type:"icon"},e),function(){return ef("beforeDOMElementCreation",{iconDefinition:e,params:t}),Ze.autoA11y&&(d?b["aria-labelledby"]="".concat(Ze.replacementClass,"-title-").concat(g||qb()):(b["aria-hidden"]="true",b.focusable="false")),G3({icons:{main:PI(S),mask:l?PI(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:x,iconName:k,transform:Oe(Oe({},ul),s),symbol:o,title:d,maskId:h,titleId:g,extra:{attributes:b,styles:y,classes:m}})})}},Yne={mixout:function(){return{icon:Kne(Zne)}},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=YF,t.nodeCallback=Gne,t}}},provides:function(e){e.i2svg=function(t){var n=t.node,s=n===void 0?Ri:n,r=t.callback,o=r===void 0?function(){}:r;return YF(s,o)},e.generateSvgReplacementMutation=function(t,n){var s=n.iconName,r=n.title,o=n.titleId,a=n.prefix,l=n.transform,c=n.symbol,h=n.mask,u=n.maskId,d=n.extra;return new Promise(function(f,g){Promise.all([FI(s,a),h.iconName?FI(h.iconName,h.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(p){var m=F3(p,2),v=m[0],b=m[1];f([t,G3({icons:{main:v,mask:b},prefix:a,iconName:s,transform:l,symbol:c,maskId:u,title:r,titleId:o,extra:d,watchable:!0})])}).catch(g)})},e.generateAbstractIcon=function(t){var n=t.children,s=t.attributes,r=t.main,o=t.transform,a=t.styles,l=WD(a);l.length>0&&(s.style=l);var c;return U3(o)&&(c=Wc("generateAbstractTransformGrouping",{main:r,transform:o,containerWidth:r.width,iconWidth:r.width})),n.push(c||r.icon),{children:n,attributes:s}}}},Qne={mixout:function(){return{layer:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.classes,r=s===void 0?[]:s;return UD({type:"layer"},function(){ef("beforeDOMElementCreation",{assembler:t,params:n});var o=[];return t(function(a){Array.isArray(a)?a.map(function(l){o=o.concat(l.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(Ze.familyPrefix,"-layers")].concat(VD(r)).join(" ")},children:o}]})}}}},Xne={mixout:function(){return{counter:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.title,r=s===void 0?null:s,o=n.classes,a=o===void 0?[]:o,l=n.attributes,c=l===void 0?{}:l,h=n.styles,u=h===void 0?{}:h;return UD({type:"counter",content:t},function(){return ef("beforeDOMElementCreation",{content:t,params:n}),Tne({content:t.toString(),title:r,extra:{attributes:c,styles:u,classes:["".concat(Ze.familyPrefix,"-layers-counter")].concat(VD(a))}})})}}}},Jne={mixout:function(){return{text:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.transform,r=s===void 0?ul:s,o=n.title,a=o===void 0?null:o,l=n.classes,c=l===void 0?[]:l,h=n.attributes,u=h===void 0?{}:h,d=n.styles,f=d===void 0?{}:d;return UD({type:"text",content:t},function(){return ef("beforeDOMElementCreation",{content:t,params:n}),$F({content:t,transform:Oe(Oe({},ul),r),title:a,extra:{attributes:u,styles:f,classes:["".concat(Ze.familyPrefix,"-layers-text")].concat(VD(c))}})})}}},provides:function(e){e.generateLayersText=function(t,n){var s=n.title,r=n.transform,o=n.extra,a=null,l=null;if(KH){var c=parseInt(getComputedStyle(t).fontSize,10),h=t.getBoundingClientRect();a=h.width/c,l=h.height/c}return Ze.autoA11y&&!s&&(o.attributes["aria-hidden"]="true"),Promise.resolve([t,$F({content:t.innerHTML,width:a,height:l,transform:r,title:s,extra:o,watchable:!0})])}}},ese=new RegExp('"',"ug"),QF=[1105920,1112319];function tse(i){var e=i.replace(ese,""),t=gne(e,0),n=t>=QF[0]&&t<=QF[1],s=e.length===2?e[0]===e[1]:!1;return{value:NI(s?e[0]:e),isSecondary:n||s}}function XF(i,e){var t="".concat(Hie).concat(e.replace(":","-"));return new Promise(function(n,s){if(i.getAttribute(t)!==null)return n();var r=i0(i.children),o=r.filter(function(k){return k.getAttribute(TI)===e})[0],a=su.getComputedStyle(i,e),l=a.getPropertyValue("font-family").match(Gie),c=a.getPropertyValue("font-weight"),h=a.getPropertyValue("content");if(o&&!l)return i.removeChild(o),n();if(l&&h!=="none"&&h!==""){var u=a.getPropertyValue("content"),d=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?yS[l[2].toLowerCase()]:Kie[c],f=tse(u),g=f.value,p=f.isSecondary,m=l[0].startsWith("FontAwesome"),v=j3(d,g),b=v;if(m){var w=yne(g);w.iconName&&w.prefix&&(v=w.iconName,d=w.prefix)}if(v&&!p&&(!o||o.getAttribute(V3)!==d||o.getAttribute(W3)!==b)){i.setAttribute(t,b),o&&i.removeChild(o);var y=jne(),x=y.extra;x.attributes[TI]=e,FI(v,d).then(function(k){var S=G3(Oe(Oe({},y),{},{icons:{main:k,mask:q3()},prefix:d,iconName:b,extra:x,watchable:!0})),L=Ri.createElement("svg");e==="::before"?i.insertBefore(L,i.firstChild):i.appendChild(L),L.outerHTML=S.map(function(D){return W1(D)}).join(`
`),i.removeAttribute(t),n()}).catch(s)}else n()}else n()})}function ise(i){return Promise.all([XF(i,"::before"),XF(i,"::after")])}function nse(i){return i.parentNode!==document.head&&!~$ie.indexOf(i.tagName.toUpperCase())&&!i.getAttribute(TI)&&(!i.parentNode||i.parentNode.tagName!=="svg")}function JF(i){if(Zc)return new Promise(function(e,t){var n=i0(i.querySelectorAll("*")).filter(nse).map(ise),s=K3.begin("searchPseudoElements");mU(),Promise.all(n).then(function(){s(),VI(),e()}).catch(function(){s(),VI(),t()})})}var sse={hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=JF,t}}},provides:function(e){e.pseudoElements2svg=function(t){var n=t.node,s=n===void 0?Ri:n;Ze.searchPseudoElements&&JF(s)}}},eB=!1,rse={mixout:function(){return{dom:{unwatch:function(){mU(),eB=!0}}}},hooks:function(){return{bootstrap:function(){KF(RI("mutationObserverCallbacks",{}))},noAuto:function(){zne()},watch:function(t){var n=t.observeMutationsRoot;eB?VI():KF(RI("mutationObserverCallbacks",{observeMutationsRoot:n}))}}}},tB=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(n,s){var r=s.toLowerCase().split("-"),o=r[0],a=r.slice(1).join("-");if(o&&a==="h")return n.flipX=!0,n;if(o&&a==="v")return n.flipY=!0,n;if(a=parseFloat(a),isNaN(a))return n;switch(o){case"grow":n.size=n.size+a;break;case"shrink":n.size=n.size-a;break;case"left":n.x=n.x-a;break;case"right":n.x=n.x+a;break;case"up":n.y=n.y-a;break;case"down":n.y=n.y+a;break;case"rotate":n.rotate=n.rotate+a;break}return n},t)},ose={mixout:function(){return{parse:{transform:function(t){return tB(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,n){var s=n.getAttribute("data-fa-transform");return s&&(t.transform=tB(s)),t}}},provides:function(e){e.generateAbstractTransformGrouping=function(t){var n=t.main,s=t.transform,r=t.containerWidth,o=t.iconWidth,a={transform:"translate(".concat(r/2," 256)")},l="translate(".concat(s.x*32,", ").concat(s.y*32,") "),c="scale(".concat(s.size/16*(s.flipX?-1:1),", ").concat(s.size/16*(s.flipY?-1:1),") "),h="rotate(".concat(s.rotate," 0 0)"),u={transform:"".concat(l," ").concat(c," ").concat(h)},d={transform:"translate(".concat(o/2*-1," -256)")},f={outer:a,inner:u,path:d};return{tag:"g",attributes:Oe({},f.outer),children:[{tag:"g",attributes:Oe({},f.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:Oe(Oe({},n.icon.attributes),f.path)}]}]}}}},p2={x:0,y:0,width:"100%",height:"100%"};function iB(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return i.attributes&&(i.attributes.fill||e)&&(i.attributes.fill="black"),i}function ase(i){return i.tag==="g"?i.children:[i]}var lse={hooks:function(){return{parseNodeAttributes:function(t,n){var s=n.getAttribute("data-fa-mask"),r=s?HD(s.split(" ").map(function(o){return o.trim()})):q3();return r.prefix||(r.prefix=ru()),t.mask=r,t.maskId=n.getAttribute("data-fa-mask-id"),t}}},provides:function(e){e.generateAbstractMask=function(t){var n=t.children,s=t.attributes,r=t.main,o=t.mask,a=t.maskId,l=t.transform,c=r.width,h=r.icon,u=o.width,d=o.icon,f=one({transform:l,containerWidth:u,iconWidth:c}),g={tag:"rect",attributes:Oe(Oe({},p2),{},{fill:"white"})},p=h.children?{children:h.children.map(iB)}:{},m={tag:"g",attributes:Oe({},f.inner),children:[iB(Oe({tag:h.tag,attributes:Oe(Oe({},h.attributes),f.path)},p))]},v={tag:"g",attributes:Oe({},f.outer),children:[m]},b="mask-".concat(a||qb()),w="clip-".concat(a||qb()),y={tag:"mask",attributes:Oe(Oe({},p2),{},{id:b,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[g,v]},x={tag:"defs",children:[{tag:"clipPath",attributes:{id:w},children:ase(d)},y]};return n.push(x,{tag:"rect",attributes:Oe({fill:"currentColor","clip-path":"url(#".concat(w,")"),mask:"url(#".concat(b,")")},p2)}),{children:n,attributes:s}}}},cse={provides:function(e){var t=!1;su.matchMedia&&(t=su.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var n=[],s={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:Oe(Oe({},s),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=Oe(Oe({},r),{},{attributeName:"opacity"}),a={tag:"circle",attributes:Oe(Oe({},s),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:Oe(Oe({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Oe(Oe({},o),{},{values:"1;0;1;1;0;1;"})}),n.push(a),n.push({tag:"path",attributes:Oe(Oe({},s),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:Oe(Oe({},o),{},{values:"1;0;0;0;0;1;"})}]}),t||n.push({tag:"path",attributes:Oe(Oe({},s),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Oe(Oe({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},hse={hooks:function(){return{parseNodeAttributes:function(t,n){var s=n.getAttribute("data-fa-symbol"),r=s===null?!1:s===""?!0:s;return t.symbol=r,t}}}},use=[cne,Yne,Qne,Xne,Jne,sse,rse,ose,lse,cse,hse];xne(use,{mixoutsTo:Kr});Kr.noAuto;Kr.config;Kr.library;Kr.dom;Kr.parse;Kr.findIconDefinition;Kr.toHtml;var nB=Kr.icon;Kr.layer;Kr.text;Kr.counter;/*!
 * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var dse={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 400c-18 0-32-14-32-32s13.1-32 32-32c17.1 0 32 14 32 32S273.1 400 256 400zM325.1 258L280 286V288c0 13-11 24-24 24S232 301 232 288V272c0-8 4-16 12-21l57-34C308 213 312 206 312 198C312 186 301.1 176 289.1 176h-51.1C225.1 176 216 186 216 198c0 13-11 24-24 24s-24-11-24-24C168 159 199 128 237.1 128h51.1C329 128 360 159 360 198C360 222 347 245 325.1 258z"]},fse=dse,gse={prefix:"fas",iconName:"table-columns",icon:[512,512,["columns"],"f0db","M0 96C0 60.65 28.65 32 64 32H448C483.3 32 512 60.65 512 96V416C512 451.3 483.3 480 448 480H64C28.65 480 0 451.3 0 416V96zM64 416H224V160H64V416zM448 160H288V416H448V160z"]},pse=gse,mse=Object.defineProperty,_se=(i,e,t)=>e in i?mse(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,zc=(i,e,t)=>(_se(i,typeof e!="symbol"?e+"":e,t),t),Y3=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Gi=(i,e,t)=>(Y3(i,e,"read from private field"),t?t.call(i):e.get(i)),zs=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},j_=(i,e,t,n)=>(Y3(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),bse=(i,e,t,n)=>({set _(s){j_(i,e,s,t)},get _(){return Gi(i,e,n)}}),bs=(i,e,t)=>(Y3(i,e,"access private method"),t);function Au(i,e,t){return i.fields=e||[],i.fname=t,i}function vse(i){return i==null?null:i.fname}function bU(i){return i==null?null:i.fields}function wse(i){return i.length===1?yse(i[0]):Cse(i)}const yse=i=>function(e){return e[i]},Cse=i=>{const e=i.length;return function(t){for(let n=0;n<e;++n)t=t[i[n]];return t}};function Yi(i){throw Error(i)}function Sse(i){const e=[],t=i.length;let n=null,s=0,r="",o,a,l;i=i+"";function c(){e.push(r+i.substring(o,a)),r="",o=a+1}for(o=a=0;a<t;++a)if(l=i[a],l==="\\")r+=i.substring(o,a),r+=i.substring(++a,++a),o=a;else if(l===n)c(),n=null,s=-1;else{if(n)continue;o===s&&l==='"'||o===s&&l==="'"?(o=a+1,n=l):l==="."&&!s?a>o?c():o=a+1:l==="["?(a>o&&c(),s=o=a+1):l==="]"&&(s||Yi("Access path missing open bracket: "+i),s>0&&c(),s=0,o=a+1)}return s&&Yi("Access path missing closing bracket: "+i),n&&Yi("Access path missing closing quote: "+i),a>o&&(a++,c()),e}function $D(i,e,t){const n=Sse(i);return i=n.length===1?n[0]:i,Au((t&&t.get||wse)(n),[i],e||i)}$D("id");const jD=Au(i=>i,[],"identity");Au(()=>0,[],"zero");Au(()=>1,[],"one");Au(()=>!0,[],"true");Au(()=>!1,[],"false");var Ro=Array.isArray;function ka(i){return i===Object(i)}function ma(i){return i[i.length-1]}function Gb(i){return i==null||i===""?null:+i}const vU=i=>e=>i*Math.exp(e),wU=i=>e=>Math.log(i*e),xse=i=>e=>Math.sign(e)*Math.log1p(Math.abs(e/i)),Dse=i=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*i,xS=i=>e=>e<0?-Math.pow(-e,i):Math.pow(e,i);function Q3(i,e,t,n){const s=t(i[0]),r=t(ma(i)),o=(r-s)*e;return[n(s-o),n(r-o)]}function Lse(i,e){return Q3(i,e,Gb,jD)}function kse(i,e){var t=Math.sign(i[0]);return Q3(i,e,wU(t),vU(t))}function Ase(i,e,t){return Q3(i,e,xS(t),xS(1/t))}function qD(i,e,t,n,s){const r=n(i[0]),o=n(ma(i)),a=e!=null?n(e):(r+o)/2;return[s(a+(r-a)*t),s(a+(o-a)*t)]}function yU(i,e,t){return qD(i,e,t,Gb,jD)}function CU(i,e,t){const n=Math.sign(i[0]);return qD(i,e,t,wU(n),vU(n))}function WI(i,e,t,n){return qD(i,e,t,xS(n),xS(1/n))}function Ese(i,e,t,n){return qD(i,e,t,xse(n),Dse(n))}function zI(i){return i!=null?Ro(i)?i:[i]:[]}function Ise(i,e,t){let n=i[0],s=i[1],r;return s<n&&(r=s,s=n,n=r),r=s-n,r>=t-e?[e,t]:[n=Math.min(Math.max(n,e),t-r),n+r]}function wr(i){return typeof i=="function"}const Tse="descending";function SU(i,e,t){t=t||{},e=zI(e)||[];const n=[],s=[],r={},o=t.comparator||Nse;return zI(i).forEach((a,l)=>{a!=null&&(n.push(e[l]===Tse?-1:1),s.push(a=wr(a)?a:$D(a,null,t)),(bU(a)||[]).forEach(c=>r[c]=1))}),s.length===0?null:Au(o(s,n),Object.keys(r))}const xU=(i,e)=>(i<e||i==null)&&e!=null?-1:(i>e||e==null)&&i!=null?1:(e=e instanceof Date?+e:e,(i=i instanceof Date?+i:i)!==i&&e===e?-1:e!==e&&i===i?1:0),Nse=(i,e)=>i.length===1?Mse(i[0],e[0]):Rse(i,e,i.length),Mse=(i,e)=>function(t,n){return xU(i(t),i(n))*e},Rse=(i,e,t)=>(e.push(0),function(n,s){let r,o=0,a=-1;for(;o===0&&++a<t;)r=i[a],o=xU(r(n),r(s));return o*e[a]});function Ose(i){return wr(i)?i:()=>i}function X3(i){for(let e,t,n=1,s=arguments.length;n<s;++n){e=arguments[n];for(t in e)i[t]=e[t]}return i}const Pse=Object.prototype.hasOwnProperty;function bd(i,e){return Pse.call(i,e)}function GD(i){return typeof i=="boolean"}function Fse(i){return Object.prototype.toString.call(i)==="[object Date]"}function Bse(i){return i&&wr(i[Symbol.iterator])}function yr(i){return typeof i=="number"}function Xi(i){return typeof i=="string"}function Vse(i,e){const t=i[0],n=ma(i),s=+e;return s?s===1?n:t+s*(n-t):t}function DS(i){return i&&ma(i)-i[0]||0}function KD(i){return Ro(i)?"["+i.map(KD)+"]":ka(i)||Xi(i)?JSON.stringify(i).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):i}function Wse(i){return i==null||i===""?null:!i||i==="false"||i==="0"?!1:!!i}const zse=i=>yr(i)||Fse(i)?i:Date.parse(i);function Hse(i,e){return e=e||zse,i==null||i===""?null:e(i)}function Use(i){return i==null||i===""?null:i+""}function LS(i){const e={},t=i.length;for(let n=0;n<t;++n)e[i[n]]=!0;return e}var sB={},m2={},_2=34,j0=10,b2=13;function DU(i){return new Function("d","return {"+i.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function $se(i,e){var t=DU(i);return function(n,s){return e(t(n),s,i)}}function rB(i){var e=Object.create(null),t=[];return i.forEach(function(n){for(var s in n)s in e||t.push(e[s]=s)}),t}function or(i,e){var t=i+"",n=t.length;return n<e?new Array(e-n+1).join(0)+t:t}function jse(i){return i<0?"-"+or(-i,6):i>9999?"+"+or(i,6):or(i,4)}function qse(i){var e=i.getUTCHours(),t=i.getUTCMinutes(),n=i.getUTCSeconds(),s=i.getUTCMilliseconds();return isNaN(i)?"Invalid Date":jse(i.getUTCFullYear())+"-"+or(i.getUTCMonth()+1,2)+"-"+or(i.getUTCDate(),2)+(s?"T"+or(e,2)+":"+or(t,2)+":"+or(n,2)+"."+or(s,3)+"Z":n?"T"+or(e,2)+":"+or(t,2)+":"+or(n,2)+"Z":t||e?"T"+or(e,2)+":"+or(t,2)+"Z":"")}function LU(i){var e=new RegExp('["'+i+`
\r]`),t=i.charCodeAt(0);function n(u,d){var f,g,p=s(u,function(m,v){if(f)return f(m,v-1);g=m,f=d?$se(m,d):DU(m)});return p.columns=g||[],p}function s(u,d){var f=[],g=u.length,p=0,m=0,v,b=g<=0,w=!1;u.charCodeAt(g-1)===j0&&--g,u.charCodeAt(g-1)===b2&&--g;function y(){if(b)return m2;if(w)return w=!1,sB;var k,S=p,L;if(u.charCodeAt(S)===_2){for(;p++<g&&u.charCodeAt(p)!==_2||u.charCodeAt(++p)===_2;);return(k=p)>=g?b=!0:(L=u.charCodeAt(p++))===j0?w=!0:L===b2&&(w=!0,u.charCodeAt(p)===j0&&++p),u.slice(S+1,k-1).replace(/""/g,'"')}for(;p<g;){if((L=u.charCodeAt(k=p++))===j0)w=!0;else if(L===b2)w=!0,u.charCodeAt(p)===j0&&++p;else if(L!==t)continue;return u.slice(S,k)}return b=!0,u.slice(S,g)}for(;(v=y())!==m2;){for(var x=[];v!==sB&&v!==m2;)x.push(v),v=y();d&&(x=d(x,m++))==null||f.push(x)}return f}function r(u,d){return u.map(function(f){return d.map(function(g){return h(f[g])}).join(i)})}function o(u,d){return d==null&&(d=rB(u)),[d.map(h).join(i)].concat(r(u,d)).join(`
`)}function a(u,d){return d==null&&(d=rB(u)),r(u,d).join(`
`)}function l(u){return u.map(c).join(`
`)}function c(u){return u.map(h).join(i)}function h(u){return u==null?"":u instanceof Date?qse(u):e.test(u+="")?'"'+u.replace(/"/g,'""')+'"':u}return{parse:n,parseRows:s,format:o,formatBody:a,formatRows:l,formatRow:c,formatValue:h}}var Gse=LU("	"),Kse=Gse.parseRows;function Zse(i){return i}function Yse(i){if(i==null)return Zse;var e,t,n=i.scale[0],s=i.scale[1],r=i.translate[0],o=i.translate[1];return function(a,l){l||(e=t=0);var c=2,h=a.length,u=new Array(h);for(u[0]=(e+=a[0])*n+r,u[1]=(t+=a[1])*s+o;c<h;)u[c]=a[c],++c;return u}}function Qse(i,e){for(var t,n=i.length,s=n-e;s<--n;)t=i[s],i[s++]=i[n],i[n]=t}function Xse(i,e){return typeof e=="string"&&(e=i.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(t){return oB(i,t)})}:oB(i,e)}function oB(i,e){var t=e.id,n=e.bbox,s=e.properties==null?{}:e.properties,r=kU(i,e);return t==null&&n==null?{type:"Feature",properties:s,geometry:r}:n==null?{type:"Feature",id:t,properties:s,geometry:r}:{type:"Feature",id:t,bbox:n,properties:s,geometry:r}}function kU(i,e){var t=Yse(i.transform),n=i.arcs;function s(h,u){u.length&&u.pop();for(var d=n[h<0?~h:h],f=0,g=d.length;f<g;++f)u.push(t(d[f],f));h<0&&Qse(u,g)}function r(h){return t(h)}function o(h){for(var u=[],d=0,f=h.length;d<f;++d)s(h[d],u);return u.length<2&&u.push(u[0]),u}function a(h){for(var u=o(h);u.length<4;)u.push(u[0]);return u}function l(h){return h.map(a)}function c(h){var u=h.type,d;switch(u){case"GeometryCollection":return{type:u,geometries:h.geometries.map(c)};case"Point":d=r(h.coordinates);break;case"MultiPoint":d=h.coordinates.map(r);break;case"LineString":d=o(h.arcs);break;case"MultiLineString":d=h.arcs.map(o);break;case"Polygon":d=l(h.arcs);break;case"MultiPolygon":d=h.arcs.map(l);break;default:return null}return{type:u,coordinates:d}}return c(e)}function Jse(i,e){var t={},n={},s={},r=[],o=-1;e.forEach(function(c,h){var u=i.arcs[c<0?~c:c],d;u.length<3&&!u[1][0]&&!u[1][1]&&(d=e[++o],e[o]=c,e[h]=d)}),e.forEach(function(c){var h=a(c),u=h[0],d=h[1],f,g;if(f=s[u])if(delete s[f.end],f.push(c),f.end=d,g=n[d]){delete n[g.start];var p=g===f?f:f.concat(g);n[p.start=f.start]=s[p.end=g.end]=p}else n[f.start]=s[f.end]=f;else if(f=n[d])if(delete n[f.start],f.unshift(c),f.start=u,g=s[u]){delete s[g.end];var m=g===f?f:g.concat(f);n[m.start=g.start]=s[m.end=f.end]=m}else n[f.start]=s[f.end]=f;else f=[c],n[f.start=u]=s[f.end=d]=f});function a(c){var h=i.arcs[c<0?~c:c],u=h[0],d;return i.transform?(d=[0,0],h.forEach(function(f){d[0]+=f[0],d[1]+=f[1]})):d=h[h.length-1],c<0?[d,u]:[u,d]}function l(c,h){for(var u in c){var d=c[u];delete h[d.start],delete d.start,delete d.end,d.forEach(function(f){t[f<0?~f:f]=1}),r.push(d)}}return l(s,n),l(n,s),e.forEach(function(c){t[c<0?~c:c]||r.push([c])}),r}function ere(i){return kU(i,tre.apply(this,arguments))}function tre(i,e,t){var n,s,r;if(arguments.length>1)n=ire(i,e,t);else for(s=0,n=new Array(r=i.arcs.length);s<r;++s)n[s]=s;return{type:"MultiLineString",arcs:Jse(i,n)}}function ire(i,e,t){var n=[],s=[],r;function o(u){var d=u<0?~u:u;(s[d]||(s[d]=[])).push({i:u,g:r})}function a(u){u.forEach(o)}function l(u){u.forEach(a)}function c(u){u.forEach(l)}function h(u){switch(r=u,u.type){case"GeometryCollection":u.geometries.forEach(h);break;case"LineString":a(u.arcs);break;case"MultiLineString":case"Polygon":l(u.arcs);break;case"MultiPolygon":c(u.arcs);break}}return h(e),s.forEach(t==null?function(u){n.push(u[0].i)}:function(u){t(u[0].g,u[u.length-1].g)&&n.push(u[0].i)}),n}function q_(i,e){return i==null||e==null?NaN:i<e?-1:i>e?1:i>=e?0:NaN}function nre(i,e){return i==null||e==null?NaN:e<i?-1:e>i?1:e>=i?0:NaN}function ZD(i){let e,t,n;i.length!==2?(e=q_,t=(a,l)=>q_(i(a),l),n=(a,l)=>i(a)-l):(e=i===q_||i===nre?i:sre,t=i,n=i);function s(a,l,c=0,h=a.length){if(c<h){if(e(l,l)!==0)return h;do{const u=c+h>>>1;t(a[u],l)<0?c=u+1:h=u}while(c<h)}return c}function r(a,l,c=0,h=a.length){if(c<h){if(e(l,l)!==0)return h;do{const u=c+h>>>1;t(a[u],l)<=0?c=u+1:h=u}while(c<h)}return c}function o(a,l,c=0,h=a.length){const u=s(a,l,c,h-1);return u>c&&n(a[u-1],l)>-n(a[u],l)?u-1:u}return{left:s,center:o,right:r}}function sre(){return 0}function AU(i){return i===null?NaN:+i}const EU=ZD(q_),HI=EU.right;EU.left;ZD(AU).center;const n0=HI;function rre(i,e){let t,n;if(e===void 0)for(const s of i)s!=null&&(t===void 0?s>=s&&(t=n=s):(t>s&&(t=s),n<s&&(n=s)));else{let s=-1;for(let r of i)(r=e(r,++s,i))!=null&&(t===void 0?r>=r&&(t=n=r):(t>r&&(t=r),n<r&&(n=r)))}return[t,n]}class tf extends Map{constructor(e,t=lre){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[n,s]of e)this.set(n,s)}get(e){return super.get(aB(this,e))}has(e){return super.has(aB(this,e))}set(e,t){return super.set(ore(this,e),t)}delete(e){return super.delete(are(this,e))}}function aB({_intern:i,_key:e},t){const n=e(t);return i.has(n)?i.get(n):t}function ore({_intern:i,_key:e},t){const n=e(t);return i.has(n)?i.get(n):(i.set(n,t),t)}function are({_intern:i,_key:e},t){const n=e(t);return i.has(n)&&(t=i.get(n),i.delete(n)),t}function lre(i){return i!==null&&typeof i=="object"?i.valueOf():i}function UI(i){return i}function YD(i,...e){return IU(i,UI,UI,e)}function cre(i,...e){return IU(i,Array.from,UI,e)}function IU(i,e,t,n){return function s(r,o){if(o>=n.length)return t(r);const a=new tf,l=n[o++];let c=-1;for(const h of r){const u=l(h,++c,r),d=a.get(u);d?d.push(h):a.set(u,[h])}for(const[h,u]of a)a.set(h,s(u,o));return e(a)}(i,0)}var $I=Math.sqrt(50),jI=Math.sqrt(10),qI=Math.sqrt(2);function kS(i,e,t){var n,s=-1,r,o,a;if(e=+e,i=+i,t=+t,i===e&&t>0)return[i];if((n=e<i)&&(r=i,i=e,e=r),(a=TU(i,e,t))===0||!isFinite(a))return[];if(a>0){let l=Math.round(i/a),c=Math.round(e/a);for(l*a<i&&++l,c*a>e&&--c,o=new Array(r=c-l+1);++s<r;)o[s]=(l+s)*a}else{a=-a;let l=Math.round(i*a),c=Math.round(e*a);for(l/a<i&&++l,c/a>e&&--c,o=new Array(r=c-l+1);++s<r;)o[s]=(l+s)/a}return n&&o.reverse(),o}function TU(i,e,t){var n=(e-i)/Math.max(0,t),s=Math.floor(Math.log(n)/Math.LN10),r=n/Math.pow(10,s);return s>=0?(r>=$I?10:r>=jI?5:r>=qI?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(r>=$I?10:r>=jI?5:r>=qI?2:1)}function nf(i,e,t){var n=Math.abs(e-i)/Math.max(0,t),s=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),r=n/s;return r>=$I?s*=10:r>=jI?s*=5:r>=qI&&(s*=2),e<i?-s:s}function NU(i,e,t=AU){if(n=i.length){if((e=+e)<=0||n<2)return+t(i[0],0,i);if(e>=1)return+t(i[n-1],n-1,i);var n,s=(n-1)*e,r=Math.floor(s),o=+t(i[r],r,i),a=+t(i[r+1],r+1,i);return o+(a-o)*(s-r)}}function Kb(i,e,t){i=+i,e=+e,t=(s=arguments.length)<2?(e=i,i=0,1):s<3?1:+t;for(var n=-1,s=Math.max(0,Math.ceil((e-i)/t))|0,r=new Array(s);++n<s;)r[n]=i+n*t;return r}function jw(i,e){let t=0;if(e===void 0)for(let n of i)(n=+n)&&(t+=n);else{let n=-1;for(let s of i)(s=+e(s,++n,i))&&(t+=s)}return t}function hre(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function AS(i,e){if((t=(i=e?i.toExponential(e-1):i.toExponential()).indexOf("e"))<0)return null;var t,n=i.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+i.slice(t+1)]}function nm(i){return i=AS(Math.abs(i)),i?i[1]:NaN}function ure(i,e){return function(t,n){for(var s=t.length,r=[],o=0,a=i[0],l=0;s>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),r.push(t.substring(s-=a,s+a)),!((l+=a+1)>n));)a=i[o=(o+1)%i.length];return r.reverse().join(e)}}function dre(i){return function(e){return e.replace(/[0-9]/g,function(t){return i[+t]})}}var fre=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ou(i){if(!(e=fre.exec(i)))throw new Error("invalid format: "+i);var e;return new J3({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ou.prototype=J3.prototype;function J3(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}J3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function gre(i){e:for(var e=i.length,t=1,n=-1,s;t<e;++t)switch(i[t]){case".":n=s=t;break;case"0":n===0&&(n=t),s=t;break;default:if(!+i[t])break e;n>0&&(n=0);break}return n>0?i.slice(0,n)+i.slice(s+1):i}var MU;function pre(i,e){var t=AS(i,e);if(!t)return i+"";var n=t[0],s=t[1],r=s-(MU=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return r===o?n:r>o?n+new Array(r-o+1).join("0"):r>0?n.slice(0,r)+"."+n.slice(r):"0."+new Array(1-r).join("0")+AS(i,Math.max(0,e+r-1))[0]}function lB(i,e){var t=AS(i,e);if(!t)return i+"";var n=t[0],s=t[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const cB={"%":(i,e)=>(i*100).toFixed(e),b:i=>Math.round(i).toString(2),c:i=>i+"",d:hre,e:(i,e)=>i.toExponential(e),f:(i,e)=>i.toFixed(e),g:(i,e)=>i.toPrecision(e),o:i=>Math.round(i).toString(8),p:(i,e)=>lB(i*100,e),r:lB,s:pre,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function hB(i){return i}var uB=Array.prototype.map,dB=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function mre(i){var e=i.grouping===void 0||i.thousands===void 0?hB:ure(uB.call(i.grouping,Number),i.thousands+""),t=i.currency===void 0?"":i.currency[0]+"",n=i.currency===void 0?"":i.currency[1]+"",s=i.decimal===void 0?".":i.decimal+"",r=i.numerals===void 0?hB:dre(uB.call(i.numerals,String)),o=i.percent===void 0?"%":i.percent+"",a=i.minus===void 0?"−":i.minus+"",l=i.nan===void 0?"NaN":i.nan+"";function c(u){u=ou(u);var d=u.fill,f=u.align,g=u.sign,p=u.symbol,m=u.zero,v=u.width,b=u.comma,w=u.precision,y=u.trim,x=u.type;x==="n"?(b=!0,x="g"):cB[x]||(w===void 0&&(w=12),y=!0,x="g"),(m||d==="0"&&f==="=")&&(m=!0,d="0",f="=");var k=p==="$"?t:p==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",S=p==="$"?n:/[%p]/.test(x)?o:"",L=cB[x],D=/[defgprs%]/.test(x);w=w===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function N(T){var $=k,U=S,ee,ce,fe;if(x==="c")U=L(T)+U,T="";else{T=+T;var Ce=T<0||1/T<0;if(T=isNaN(T)?l:L(Math.abs(T),w),y&&(T=gre(T)),Ce&&+T==0&&g!=="+"&&(Ce=!1),$=(Ce?g==="("?g:a:g==="-"||g==="("?"":g)+$,U=(x==="s"?dB[8+MU/3]:"")+U+(Ce&&g==="("?")":""),D){for(ee=-1,ce=T.length;++ee<ce;)if(fe=T.charCodeAt(ee),48>fe||fe>57){U=(fe===46?s+T.slice(ee+1):T.slice(ee))+U,T=T.slice(0,ee);break}}}b&&!m&&(T=e(T,1/0));var Se=$.length+T.length+U.length,me=Se<v?new Array(v-Se+1).join(d):"";switch(b&&m&&(T=e(me+T,me.length?v-U.length:1/0),me=""),f){case"<":T=$+T+U+me;break;case"=":T=$+me+T+U;break;case"^":T=me.slice(0,Se=me.length>>1)+$+T+U+me.slice(Se);break;default:T=me+$+T+U;break}return r(T)}return N.toString=function(){return u+""},N}function h(u,d){var f=c((u=ou(u),u.type="f",u)),g=Math.max(-8,Math.min(8,Math.floor(nm(d)/3)))*3,p=Math.pow(10,-g),m=dB[8+g/3];return function(v){return f(p*v)+m}}return{format:c,formatPrefix:h}}var qw,hs,eR;_re({thousands:",",grouping:[3],currency:["$",""]});function _re(i){return qw=mre(i),hs=qw.format,eR=qw.formatPrefix,qw}function RU(i){return Math.max(0,-nm(Math.abs(i)))}function OU(i,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(nm(e)/3)))*3-nm(Math.abs(i)))}function PU(i,e){return i=Math.abs(i),e=Math.abs(e)-i,Math.max(0,nm(e)-nm(i))+1}var v2=new Date,w2=new Date;function Xn(i,e,t,n){function s(r){return i(r=arguments.length===0?new Date:new Date(+r)),r}return s.floor=function(r){return i(r=new Date(+r)),r},s.ceil=function(r){return i(r=new Date(r-1)),e(r,1),i(r),r},s.round=function(r){var o=s(r),a=s.ceil(r);return r-o<a-r?o:a},s.offset=function(r,o){return e(r=new Date(+r),o==null?1:Math.floor(o)),r},s.range=function(r,o,a){var l=[],c;if(r=s.ceil(r),a=a==null?1:Math.floor(a),!(r<o)||!(a>0))return l;do l.push(c=new Date(+r)),e(r,a),i(r);while(c<r&&r<o);return l},s.filter=function(r){return Xn(function(o){if(o>=o)for(;i(o),!r(o);)o.setTime(o-1)},function(o,a){if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!r(o););else for(;--a>=0;)for(;e(o,1),!r(o););})},t&&(s.count=function(r,o){return v2.setTime(+r),w2.setTime(+o),i(v2),i(w2),Math.floor(t(v2,w2))},s.every=function(r){return r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?s.filter(n?function(o){return n(o)%r===0}:function(o){return s.count(0,o)%r===0}):s}),s}var ES=Xn(function(){},function(i,e){i.setTime(+i+e)},function(i,e){return e-i});ES.every=function(i){return i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?Xn(function(e){e.setTime(Math.floor(e/i)*i)},function(e,t){e.setTime(+e+t*i)},function(e,t){return(t-e)/i}):ES};const tR=ES;ES.range;const Dc=1e3,wo=Dc*60,Lc=wo*60,sf=Lc*24,iR=sf*7,fB=sf*30,y2=sf*365;var FU=Xn(function(i){i.setTime(i-i.getMilliseconds())},function(i,e){i.setTime(+i+e*Dc)},function(i,e){return(e-i)/Dc},function(i){return i.getUTCSeconds()});const Ph=FU;FU.range;var BU=Xn(function(i){i.setTime(i-i.getMilliseconds()-i.getSeconds()*Dc)},function(i,e){i.setTime(+i+e*wo)},function(i,e){return(e-i)/wo},function(i){return i.getMinutes()});const nR=BU;BU.range;var VU=Xn(function(i){i.setTime(i-i.getMilliseconds()-i.getSeconds()*Dc-i.getMinutes()*wo)},function(i,e){i.setTime(+i+e*Lc)},function(i,e){return(e-i)/Lc},function(i){return i.getHours()});const sR=VU;VU.range;var WU=Xn(i=>i.setHours(0,0,0,0),(i,e)=>i.setDate(i.getDate()+e),(i,e)=>(e-i-(e.getTimezoneOffset()-i.getTimezoneOffset())*wo)/sf,i=>i.getDate()-1);const Rd=WU;WU.range;function Hf(i){return Xn(function(e){e.setDate(e.getDate()-(e.getDay()+7-i)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*wo)/iR})}var z1=Hf(0),IS=Hf(1),bre=Hf(2),vre=Hf(3),sm=Hf(4),wre=Hf(5),yre=Hf(6);z1.range;IS.range;bre.range;vre.range;sm.range;wre.range;yre.range;var zU=Xn(function(i){i.setDate(1),i.setHours(0,0,0,0)},function(i,e){i.setMonth(i.getMonth()+e)},function(i,e){return e.getMonth()-i.getMonth()+(e.getFullYear()-i.getFullYear())*12},function(i){return i.getMonth()});const TS=zU;zU.range;var rR=Xn(function(i){i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,e){i.setFullYear(i.getFullYear()+e)},function(i,e){return e.getFullYear()-i.getFullYear()},function(i){return i.getFullYear()});rR.every=function(i){return!isFinite(i=Math.floor(i))||!(i>0)?null:Xn(function(e){e.setFullYear(Math.floor(e.getFullYear()/i)*i),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*i)})};const au=rR;rR.range;var HU=Xn(function(i){i.setUTCSeconds(0,0)},function(i,e){i.setTime(+i+e*wo)},function(i,e){return(e-i)/wo},function(i){return i.getUTCMinutes()});const oR=HU;HU.range;var UU=Xn(function(i){i.setUTCMinutes(0,0,0)},function(i,e){i.setTime(+i+e*Lc)},function(i,e){return(e-i)/Lc},function(i){return i.getUTCHours()});const aR=UU;UU.range;var $U=Xn(function(i){i.setUTCHours(0,0,0,0)},function(i,e){i.setUTCDate(i.getUTCDate()+e)},function(i,e){return(e-i)/sf},function(i){return i.getUTCDate()-1});const Od=$U;$U.range;function Uf(i){return Xn(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-i)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/iR})}var H1=Uf(0),NS=Uf(1),Cre=Uf(2),Sre=Uf(3),rm=Uf(4),xre=Uf(5),Dre=Uf(6);H1.range;NS.range;Cre.range;Sre.range;rm.range;xre.range;Dre.range;var jU=Xn(function(i){i.setUTCDate(1),i.setUTCHours(0,0,0,0)},function(i,e){i.setUTCMonth(i.getUTCMonth()+e)},function(i,e){return e.getUTCMonth()-i.getUTCMonth()+(e.getUTCFullYear()-i.getUTCFullYear())*12},function(i){return i.getUTCMonth()});const MS=jU;jU.range;var lR=Xn(function(i){i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,e){i.setUTCFullYear(i.getUTCFullYear()+e)},function(i,e){return e.getUTCFullYear()-i.getUTCFullYear()},function(i){return i.getUTCFullYear()});lR.every=function(i){return!isFinite(i=Math.floor(i))||!(i>0)?null:Xn(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/i)*i),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*i)})};const lu=lR;lR.range;function qU(i,e,t,n,s,r){const o=[[Ph,1,Dc],[Ph,5,5*Dc],[Ph,15,15*Dc],[Ph,30,30*Dc],[r,1,wo],[r,5,5*wo],[r,15,15*wo],[r,30,30*wo],[s,1,Lc],[s,3,3*Lc],[s,6,6*Lc],[s,12,12*Lc],[n,1,sf],[n,2,2*sf],[t,1,iR],[e,1,fB],[e,3,3*fB],[i,1,y2]];function a(c,h,u){const d=h<c;d&&([c,h]=[h,c]);const f=u&&typeof u.range=="function"?u:l(c,h,u),g=f?f.range(c,+h+1):[];return d?g.reverse():g}function l(c,h,u){const d=Math.abs(h-c)/u,f=ZD(([,,m])=>m).right(o,d);if(f===o.length)return i.every(nf(c/y2,h/y2,u));if(f===0)return tR.every(Math.max(nf(c,h,u),1));const[g,p]=o[d/o[f-1][2]<o[f][2]/d?f-1:f];return g.every(p)}return[a,l]}const[Lre,kre]=qU(lu,MS,H1,Od,aR,oR),[Are,Ere]=qU(au,TS,z1,Rd,sR,nR),Zb="year",Yb="quarter",Qb="month",Xb="week",Jb="date",QD="day",cR="dayofyear",ev="hours",tv="minutes",iv="seconds",XD="milliseconds",Ire=[Zb,Yb,Qb,Xb,Jb,QD,cR,ev,tv,iv,XD];Ire.reduce((i,e,t)=>(i[e]=1+t,i),{});const Tre={[Zb]:au,[Yb]:TS.every(3),[Qb]:TS,[Xb]:z1,[Jb]:Rd,[QD]:Rd,[cR]:Rd,[ev]:sR,[tv]:nR,[iv]:Ph,[XD]:tR},Nre={[Zb]:lu,[Yb]:MS.every(3),[Qb]:MS,[Xb]:H1,[Jb]:Od,[QD]:Od,[cR]:Od,[ev]:aR,[tv]:oR,[iv]:Ph,[XD]:tR};function Mre(i){return Tre[i]}function Rre(i){return Nre[i]}function C2(i){if(0<=i.y&&i.y<100){var e=new Date(-1,i.m,i.d,i.H,i.M,i.S,i.L);return e.setFullYear(i.y),e}return new Date(i.y,i.m,i.d,i.H,i.M,i.S,i.L)}function S2(i){if(0<=i.y&&i.y<100){var e=new Date(Date.UTC(-1,i.m,i.d,i.H,i.M,i.S,i.L));return e.setUTCFullYear(i.y),e}return new Date(Date.UTC(i.y,i.m,i.d,i.H,i.M,i.S,i.L))}function q0(i,e,t){return{y:i,m:e,d:t,H:0,M:0,S:0,L:0}}function GU(i){var e=i.dateTime,t=i.date,n=i.time,s=i.periods,r=i.days,o=i.shortDays,a=i.months,l=i.shortMonths,c=G0(s),h=K0(s),u=G0(r),d=K0(r),f=G0(o),g=K0(o),p=G0(a),m=K0(a),v=G0(l),b=K0(l),w={a:Ce,A:Se,b:me,B:Dt,c:null,d:vB,e:vB,f:noe,g:foe,G:poe,H:eoe,I:toe,j:ioe,L:KU,m:soe,M:roe,p:ze,q:Ge,Q:CB,s:SB,S:ooe,u:aoe,U:loe,V:coe,w:hoe,W:uoe,x:null,X:null,y:doe,Y:goe,Z:moe,"%":yB},y={a:Lt,A:nt,b:Vi,B:wn,c:null,d:wB,e:wB,f:woe,g:Ioe,G:Noe,H:_oe,I:boe,j:voe,L:YU,m:yoe,M:Coe,p:Wn,q:Ai,Q:CB,s:SB,S:Soe,u:xoe,U:Doe,V:Loe,w:koe,W:Aoe,x:null,X:null,y:Eoe,Y:Toe,Z:Moe,"%":yB},x={a:N,A:T,b:$,B:U,c:ee,d:_B,e:_B,f:Yre,g:mB,G:pB,H:bB,I:bB,j:qre,L:Zre,m:jre,M:Gre,p:D,q:$re,Q:Xre,s:Jre,S:Kre,u:Vre,U:Wre,V:zre,w:Bre,W:Hre,x:ce,X:fe,y:mB,Y:pB,Z:Ure,"%":Qre};w.x=k(t,w),w.X=k(n,w),w.c=k(e,w),y.x=k(t,y),y.X=k(n,y),y.c=k(e,y);function k(J,ye){return function(he){var W=[],ot=-1,Me=0,vt=J.length,pt,ei,zn;for(he instanceof Date||(he=new Date(+he));++ot<vt;)J.charCodeAt(ot)===37&&(W.push(J.slice(Me,ot)),(ei=gB[pt=J.charAt(++ot)])!=null?pt=J.charAt(++ot):ei=pt==="e"?" ":"0",(zn=ye[pt])&&(pt=zn(he,ei)),W.push(pt),Me=ot+1);return W.push(J.slice(Me,ot)),W.join("")}}function S(J,ye){return function(he){var W=q0(1900,void 0,1),ot=L(W,J,he+="",0),Me,vt;if(ot!=he.length)return null;if("Q"in W)return new Date(W.Q);if("s"in W)return new Date(W.s*1e3+("L"in W?W.L:0));if(ye&&!("Z"in W)&&(W.Z=0),"p"in W&&(W.H=W.H%12+W.p*12),W.m===void 0&&(W.m="q"in W?W.q:0),"V"in W){if(W.V<1||W.V>53)return null;"w"in W||(W.w=1),"Z"in W?(Me=S2(q0(W.y,0,1)),vt=Me.getUTCDay(),Me=vt>4||vt===0?NS.ceil(Me):NS(Me),Me=Od.offset(Me,(W.V-1)*7),W.y=Me.getUTCFullYear(),W.m=Me.getUTCMonth(),W.d=Me.getUTCDate()+(W.w+6)%7):(Me=C2(q0(W.y,0,1)),vt=Me.getDay(),Me=vt>4||vt===0?IS.ceil(Me):IS(Me),Me=Rd.offset(Me,(W.V-1)*7),W.y=Me.getFullYear(),W.m=Me.getMonth(),W.d=Me.getDate()+(W.w+6)%7)}else("W"in W||"U"in W)&&("w"in W||(W.w="u"in W?W.u%7:"W"in W?1:0),vt="Z"in W?S2(q0(W.y,0,1)).getUTCDay():C2(q0(W.y,0,1)).getDay(),W.m=0,W.d="W"in W?(W.w+6)%7+W.W*7-(vt+5)%7:W.w+W.U*7-(vt+6)%7);return"Z"in W?(W.H+=W.Z/100|0,W.M+=W.Z%100,S2(W)):C2(W)}}function L(J,ye,he,W){for(var ot=0,Me=ye.length,vt=he.length,pt,ei;ot<Me;){if(W>=vt)return-1;if(pt=ye.charCodeAt(ot++),pt===37){if(pt=ye.charAt(ot++),ei=x[pt in gB?ye.charAt(ot++):pt],!ei||(W=ei(J,he,W))<0)return-1}else if(pt!=he.charCodeAt(W++))return-1}return W}function D(J,ye,he){var W=c.exec(ye.slice(he));return W?(J.p=h.get(W[0].toLowerCase()),he+W[0].length):-1}function N(J,ye,he){var W=f.exec(ye.slice(he));return W?(J.w=g.get(W[0].toLowerCase()),he+W[0].length):-1}function T(J,ye,he){var W=u.exec(ye.slice(he));return W?(J.w=d.get(W[0].toLowerCase()),he+W[0].length):-1}function $(J,ye,he){var W=v.exec(ye.slice(he));return W?(J.m=b.get(W[0].toLowerCase()),he+W[0].length):-1}function U(J,ye,he){var W=p.exec(ye.slice(he));return W?(J.m=m.get(W[0].toLowerCase()),he+W[0].length):-1}function ee(J,ye,he){return L(J,e,ye,he)}function ce(J,ye,he){return L(J,t,ye,he)}function fe(J,ye,he){return L(J,n,ye,he)}function Ce(J){return o[J.getDay()]}function Se(J){return r[J.getDay()]}function me(J){return l[J.getMonth()]}function Dt(J){return a[J.getMonth()]}function ze(J){return s[+(J.getHours()>=12)]}function Ge(J){return 1+~~(J.getMonth()/3)}function Lt(J){return o[J.getUTCDay()]}function nt(J){return r[J.getUTCDay()]}function Vi(J){return l[J.getUTCMonth()]}function wn(J){return a[J.getUTCMonth()]}function Wn(J){return s[+(J.getUTCHours()>=12)]}function Ai(J){return 1+~~(J.getUTCMonth()/3)}return{format:function(J){var ye=k(J+="",w);return ye.toString=function(){return J},ye},parse:function(J){var ye=S(J+="",!1);return ye.toString=function(){return J},ye},utcFormat:function(J){var ye=k(J+="",y);return ye.toString=function(){return J},ye},utcParse:function(J){var ye=S(J+="",!0);return ye.toString=function(){return J},ye}}}var gB={"-":"",_:" ",0:"0"},Jn=/^\s*\d+/,Ore=/^%/,Pre=/[\\^$*+?|[\]().{}]/g;function Yt(i,e,t){var n=i<0?"-":"",s=(n?-i:i)+"",r=s.length;return n+(r<t?new Array(t-r+1).join(e)+s:s)}function Fre(i){return i.replace(Pre,"\\$&")}function G0(i){return new RegExp("^(?:"+i.map(Fre).join("|")+")","i")}function K0(i){return new Map(i.map((e,t)=>[e.toLowerCase(),t]))}function Bre(i,e,t){var n=Jn.exec(e.slice(t,t+1));return n?(i.w=+n[0],t+n[0].length):-1}function Vre(i,e,t){var n=Jn.exec(e.slice(t,t+1));return n?(i.u=+n[0],t+n[0].length):-1}function Wre(i,e,t){var n=Jn.exec(e.slice(t,t+2));return n?(i.U=+n[0],t+n[0].length):-1}function zre(i,e,t){var n=Jn.exec(e.slice(t,t+2));return n?(i.V=+n[0],t+n[0].length):-1}function Hre(i,e,t){var n=Jn.exec(e.slice(t,t+2));return n?(i.W=+n[0],t+n[0].length):-1}function pB(i,e,t){var n=Jn.exec(e.slice(t,t+4));return n?(i.y=+n[0],t+n[0].length):-1}function mB(i,e,t){var n=Jn.exec(e.slice(t,t+2));return n?(i.y=+n[0]+(+n[0]>68?1900:2e3),t+n[0].length):-1}function Ure(i,e,t){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return n?(i.Z=n[1]?0:-(n[2]+(n[3]||"00")),t+n[0].length):-1}function $re(i,e,t){var n=Jn.exec(e.slice(t,t+1));return n?(i.q=n[0]*3-3,t+n[0].length):-1}function jre(i,e,t){var n=Jn.exec(e.slice(t,t+2));return n?(i.m=n[0]-1,t+n[0].length):-1}function _B(i,e,t){var n=Jn.exec(e.slice(t,t+2));return n?(i.d=+n[0],t+n[0].length):-1}function qre(i,e,t){var n=Jn.exec(e.slice(t,t+3));return n?(i.m=0,i.d=+n[0],t+n[0].length):-1}function bB(i,e,t){var n=Jn.exec(e.slice(t,t+2));return n?(i.H=+n[0],t+n[0].length):-1}function Gre(i,e,t){var n=Jn.exec(e.slice(t,t+2));return n?(i.M=+n[0],t+n[0].length):-1}function Kre(i,e,t){var n=Jn.exec(e.slice(t,t+2));return n?(i.S=+n[0],t+n[0].length):-1}function Zre(i,e,t){var n=Jn.exec(e.slice(t,t+3));return n?(i.L=+n[0],t+n[0].length):-1}function Yre(i,e,t){var n=Jn.exec(e.slice(t,t+6));return n?(i.L=Math.floor(n[0]/1e3),t+n[0].length):-1}function Qre(i,e,t){var n=Ore.exec(e.slice(t,t+1));return n?t+n[0].length:-1}function Xre(i,e,t){var n=Jn.exec(e.slice(t));return n?(i.Q=+n[0],t+n[0].length):-1}function Jre(i,e,t){var n=Jn.exec(e.slice(t));return n?(i.s=+n[0],t+n[0].length):-1}function vB(i,e){return Yt(i.getDate(),e,2)}function eoe(i,e){return Yt(i.getHours(),e,2)}function toe(i,e){return Yt(i.getHours()%12||12,e,2)}function ioe(i,e){return Yt(1+Rd.count(au(i),i),e,3)}function KU(i,e){return Yt(i.getMilliseconds(),e,3)}function noe(i,e){return KU(i,e)+"000"}function soe(i,e){return Yt(i.getMonth()+1,e,2)}function roe(i,e){return Yt(i.getMinutes(),e,2)}function ooe(i,e){return Yt(i.getSeconds(),e,2)}function aoe(i){var e=i.getDay();return e===0?7:e}function loe(i,e){return Yt(z1.count(au(i)-1,i),e,2)}function ZU(i){var e=i.getDay();return e>=4||e===0?sm(i):sm.ceil(i)}function coe(i,e){return i=ZU(i),Yt(sm.count(au(i),i)+(au(i).getDay()===4),e,2)}function hoe(i){return i.getDay()}function uoe(i,e){return Yt(IS.count(au(i)-1,i),e,2)}function doe(i,e){return Yt(i.getFullYear()%100,e,2)}function foe(i,e){return i=ZU(i),Yt(i.getFullYear()%100,e,2)}function goe(i,e){return Yt(i.getFullYear()%1e4,e,4)}function poe(i,e){var t=i.getDay();return i=t>=4||t===0?sm(i):sm.ceil(i),Yt(i.getFullYear()%1e4,e,4)}function moe(i){var e=i.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Yt(e/60|0,"0",2)+Yt(e%60,"0",2)}function wB(i,e){return Yt(i.getUTCDate(),e,2)}function _oe(i,e){return Yt(i.getUTCHours(),e,2)}function boe(i,e){return Yt(i.getUTCHours()%12||12,e,2)}function voe(i,e){return Yt(1+Od.count(lu(i),i),e,3)}function YU(i,e){return Yt(i.getUTCMilliseconds(),e,3)}function woe(i,e){return YU(i,e)+"000"}function yoe(i,e){return Yt(i.getUTCMonth()+1,e,2)}function Coe(i,e){return Yt(i.getUTCMinutes(),e,2)}function Soe(i,e){return Yt(i.getUTCSeconds(),e,2)}function xoe(i){var e=i.getUTCDay();return e===0?7:e}function Doe(i,e){return Yt(H1.count(lu(i)-1,i),e,2)}function QU(i){var e=i.getUTCDay();return e>=4||e===0?rm(i):rm.ceil(i)}function Loe(i,e){return i=QU(i),Yt(rm.count(lu(i),i)+(lu(i).getUTCDay()===4),e,2)}function koe(i){return i.getUTCDay()}function Aoe(i,e){return Yt(NS.count(lu(i)-1,i),e,2)}function Eoe(i,e){return Yt(i.getUTCFullYear()%100,e,2)}function Ioe(i,e){return i=QU(i),Yt(i.getUTCFullYear()%100,e,2)}function Toe(i,e){return Yt(i.getUTCFullYear()%1e4,e,4)}function Noe(i,e){var t=i.getUTCDay();return i=t>=4||t===0?rm(i):rm.ceil(i),Yt(i.getUTCFullYear()%1e4,e,4)}function Moe(){return"+0000"}function yB(){return"%"}function CB(i){return+i}function SB(i){return Math.floor(+i/1e3)}var Cg,hR,XU,uR,JU;Roe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Roe(i){return Cg=GU(i),hR=Cg.format,XU=Cg.parse,uR=Cg.utcFormat,JU=Cg.utcParse,Cg}function x_(i){const e={};return t=>e[t]||(e[t]=i(t))}function Ooe(i,e){return t=>{const n=i(t),s=n.indexOf(e);if(s<0)return n;let r=Poe(n,s);const o=r<n.length?n.slice(r):"";for(;--r>s;)if(n[r]!=="0"){++r;break}return n.slice(0,r)+o}}function Poe(i,e){let t=i.lastIndexOf("e"),n;if(t>0)return t;for(t=i.length;--t>e;)if(n=i.charCodeAt(t),n>=48&&n<=57)return t+1}function Foe(i){const e=x_(i.format),t=i.formatPrefix;return{format:e,formatPrefix:t,formatFloat(n){const s=ou(n||",");if(s.precision==null){switch(s.precision=12,s.type){case"%":s.precision-=2;break;case"e":s.precision-=1;break}return Ooe(e(s),e(".1f")(1)[1])}else return e(s)},formatSpan(n,s,r,o){o=ou(o??",f");const a=nf(n,s,r),l=Math.max(Math.abs(n),Math.abs(s));let c;if(o.precision==null)switch(o.type){case"s":return isNaN(c=OU(a,l))||(o.precision=c),t(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(c=PU(a,l))||(o.precision=c-(o.type==="e"));break}case"f":case"%":{isNaN(c=RU(a))||(o.precision=c-(o.type==="%")*2);break}}return e(o)}}}Boe();function Boe(){return Foe({format:hs,formatPrefix:eR})}function xB(i,e,t){t=t||{},ka(t)||Yi("Invalid time multi-format specifier: ".concat(t));const n=e(iv),s=e(tv),r=e(ev),o=e(Jb),a=e(Xb),l=e(Qb),c=e(Yb),h=e(Zb),u=i(t[XD]||".%L"),d=i(t[iv]||":%S"),f=i(t[tv]||"%I:%M"),g=i(t[ev]||"%I %p"),p=i(t[Jb]||t[QD]||"%a %d"),m=i(t[Xb]||"%b %d"),v=i(t[Qb]||"%B"),b=i(t[Yb]||"%B"),w=i(t[Zb]||"%Y");return y=>(n(y)<y?u:s(y)<y?d:r(y)<y?f:o(y)<y?g:l(y)<y?a(y)<y?p:m:h(y)<y?c(y)<y?v:b:w)(y)}function e$(i){const e=x_(i.format),t=x_(i.utcFormat);return{timeFormat:n=>Xi(n)?e(n):xB(e,Mre,n),utcFormat:n=>Xi(n)?t(n):xB(t,Rre,n),timeParse:x_(i.parse),utcParse:x_(i.utcParse)}}let GI;Voe();function Voe(){return GI=e$({format:hR,parse:XU,utcFormat:uR,utcParse:JU})}function Woe(i){return e$(GU(i))}function zoe(i){return arguments.length?GI=Woe(i):GI}const Hoe=/^(data:|([A-Za-z]+:)?\/\/)/,Uoe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,$oe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,DB="file://";function joe(i,e){return t=>({options:t||{},sanitize:Goe,load:qoe,fileAccess:!!e,file:Koe(e),http:Yoe(i)})}async function qoe(i,e){const t=await this.sanitize(i,e),n=t.href;return t.localFile?this.file(n):this.http(n,e)}async function Goe(i,e){e=X3({},this.options,e);const t=this.fileAccess,n={href:null};let s,r,o;const a=Uoe.test(i.replace($oe,""));(i==null||typeof i!="string"||!a)&&Yi("Sanitize failure, invalid URI: "+KD(i));const l=Hoe.test(i);return(o=e.baseURL)&&!l&&(!i.startsWith("/")&&!o.endsWith("/")&&(i="/"+i),i=o+i),r=(s=i.startsWith(DB))||e.mode==="file"||e.mode!=="http"&&!l&&t,s?i=i.slice(DB.length):i.startsWith("//")&&(e.defaultProtocol==="file"?(i=i.slice(2),r=!0):i=(e.defaultProtocol||"http")+":"+i),Object.defineProperty(n,"localFile",{value:!!r}),n.href=i,e.target&&(n.target=e.target+""),e.rel&&(n.rel=e.rel+""),e.context==="image"&&e.crossOrigin&&(n.crossOrigin=e.crossOrigin+""),n}function Koe(i){return i?e=>new Promise((t,n)=>{i.readFile(e,(s,r)=>{s?n(s):t(r)})}):Zoe}async function Zoe(){Yi("No file system access.")}function Yoe(i){return i?async function(e,t){const n=X3({},this.options.http,t),s=t&&t.response,r=await i(e,n);return r.ok?wr(r[s])?r[s]():r.text():Yi(r.status+""+r.statusText)}:Qoe}async function Qoe(){Yi("No HTTP fetch method available.")}const Xoe=i=>i!=null&&i===i,Joe=i=>i==="true"||i==="false"||i===!0||i===!1,eae=i=>!Number.isNaN(Date.parse(i)),t$=i=>!Number.isNaN(+i)&&!(i instanceof Date),tae=i=>t$(i)&&Number.isInteger(+i),LB={boolean:Wse,integer:Gb,number:Gb,date:Hse,string:Use,unknown:jD},Gw=[Joe,tae,t$,eae],iae=["boolean","integer","number","date"];function nae(i,e){if(!i||!i.length)return"unknown";const t=i.length,n=Gw.length,s=Gw.map((r,o)=>o+1);for(let r=0,o=0,a,l;r<t;++r)for(l=e?i[r][e]:i[r],a=0;a<n;++a)if(s[a]&&Xoe(l)&&!Gw[a](l)&&(s[a]=0,++o,o===Gw.length))return"string";return iae[s.reduce((r,o)=>r===0?o:r,0)-1]}function sae(i,e){return e.reduce((t,n)=>(t[n]=nae(i,n),t),{})}function kB(i){const e=function(t,n){const s={delimiter:i};return dR(t,n?X3(n,s):s)};return e.responseType="text",e}function dR(i,e){return e.header&&(i=e.header.map(KD).join(e.delimiter)+`
`+i),LU(e.delimiter).parse(i+"")}dR.responseType="text";function rae(i){return typeof Buffer=="function"&&wr(Buffer.isBuffer)?Buffer.isBuffer(i):!1}function fR(i,e){const t=e&&e.property?$D(e.property):jD;return ka(i)&&!rae(i)?oae(t(i),e):t(JSON.parse(i))}fR.responseType="json";function oae(i,e){return!Ro(i)&&Bse(i)&&(i=[...i]),e&&e.copy?JSON.parse(JSON.stringify(i)):i}const aae={interior:(i,e)=>i!==e,exterior:(i,e)=>i===e};function i$(i,e){let t,n,s,r;return i=fR(i,e),e&&e.feature?(t=Xse,s=e.feature):e&&e.mesh?(t=ere,s=e.mesh,r=aae[e.filter]):Yi("Missing TopoJSON feature or mesh parameter."),n=(n=i.objects[s])?t(i,n,r):Yi("Invalid TopoJSON object: "+s),n&&n.features||[n]}i$.responseType="json";const x2={dsv:dR,csv:kB(","),tsv:kB("	"),json:fR,topojson:i$};function n$(i,e){return arguments.length>1?(x2[i]=e,this):bd(x2,i)?x2[i]:null}function s$(i,e,t,n){e=e||{};const s=n$(e.type||"json");return s||Yi("Unknown data format type: "+e.type),i=s(i,e),e.parse&&lae(i,e.parse,t,n),bd(i,"columns")&&delete i.columns,i}function lae(i,e,t,n){if(!i.length)return;const s=zoe();t=t||s.timeParse,n=n||s.utcParse;let r=i.columns||Object.keys(i[0]),o,a,l,c,h,u;e==="auto"&&(e=sae(i,r)),r=Object.keys(e);const d=r.map(f=>{const g=e[f];let p,m;if(g&&(g.startsWith("date:")||g.startsWith("utc:")))return p=g.split(/:(.+)?/,2),m=p[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(p[0]==="utc"?n:t)(m);if(!LB[g])throw Error("Illegal format pattern: "+f+":"+g);return LB[g]});for(l=0,h=i.length,u=r.length;l<h;++l)for(o=i[l],c=0;c<u;++c)a=r[c],o[a]=d[c](o[a])}const JD=joe(typeof fetch<"u"&&fetch,null);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var D2;const RS=window,om=RS.trustedTypes,AB=om?om.createPolicy("lit-html",{createHTML:i=>i}):void 0,Dh=`lit$${(Math.random()+"").slice(9)}$`,r$="?"+Dh,cae=`<${r$}>`,am=document,nv=(i="")=>am.createComment(i),sv=i=>i===null||typeof i!="object"&&typeof i!="function",o$=Array.isArray,hae=i=>o$(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",Z0=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,EB=/-->/g,IB=/>/g,ju=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),TB=/'/g,NB=/"/g,a$=/^(?:script|style|textarea|title)$/i,uae=i=>(e,...t)=>({_$litType$:i,strings:e,values:t}),Lh=uae(1),rv=Symbol.for("lit-noChange"),Gn=Symbol.for("lit-nothing"),MB=new WeakMap,xp=am.createTreeWalker(am,129,null,!1),dae=(i,e)=>{const t=i.length-1,n=[];let s,r=e===2?"<svg>":"",o=Z0;for(let l=0;l<t;l++){const c=i[l];let h,u,d=-1,f=0;for(;f<c.length&&(o.lastIndex=f,u=o.exec(c),u!==null);)f=o.lastIndex,o===Z0?u[1]==="!--"?o=EB:u[1]!==void 0?o=IB:u[2]!==void 0?(a$.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=ju):u[3]!==void 0&&(o=ju):o===ju?u[0]===">"?(o=s??Z0,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,h=u[1],o=u[3]===void 0?ju:u[3]==='"'?NB:TB):o===NB||o===TB?o=ju:o===EB||o===IB?o=Z0:(o=ju,s=void 0);const g=o===ju&&i[l+1].startsWith("/>")?" ":"";r+=o===Z0?c+cae:d>=0?(n.push(h),c.slice(0,d)+"$lit$"+c.slice(d)+Dh+g):c+Dh+(d===-2?(n.push(void 0),l):g)}const a=r+(i[t]||"<?>")+(e===2?"</svg>":"");if(!Array.isArray(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return[AB!==void 0?AB.createHTML(a):a,n]};let KI=class l${constructor({strings:e,_$litType$:t},n){let s;this.parts=[];let r=0,o=0;const a=e.length-1,l=this.parts,[c,h]=dae(e,t);if(this.el=l$.createElement(c,n),xp.currentNode=this.el.content,t===2){const u=this.el.content,d=u.firstChild;d.remove(),u.append(...d.childNodes)}for(;(s=xp.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes()){const u=[];for(const d of s.getAttributeNames())if(d.endsWith("$lit$")||d.startsWith(Dh)){const f=h[o++];if(u.push(d),f!==void 0){const g=s.getAttribute(f.toLowerCase()+"$lit$").split(Dh),p=/([.?@])?(.*)/.exec(f);l.push({type:1,index:r,name:p[2],strings:g,ctor:p[1]==="."?gae:p[1]==="?"?mae:p[1]==="@"?_ae:eL})}else l.push({type:6,index:r})}for(const d of u)s.removeAttribute(d)}if(a$.test(s.tagName)){const u=s.textContent.split(Dh),d=u.length-1;if(d>0){s.textContent=om?om.emptyScript:"";for(let f=0;f<d;f++)s.append(u[f],nv()),xp.nextNode(),l.push({type:2,index:++r});s.append(u[d],nv())}}}else if(s.nodeType===8)if(s.data===r$)l.push({type:2,index:r});else{let u=-1;for(;(u=s.data.indexOf(Dh,u+1))!==-1;)l.push({type:7,index:r}),u+=Dh.length-1}r++}}static createElement(e,t){const n=am.createElement("template");return n.innerHTML=e,n}};function lm(i,e,t=i,n){var s,r,o,a;if(e===rv)return e;let l=n!==void 0?(s=t._$Co)===null||s===void 0?void 0:s[n]:t._$Cl;const c=sv(e)?void 0:e._$litDirective$;return(l==null?void 0:l.constructor)!==c&&((r=l==null?void 0:l._$AO)===null||r===void 0||r.call(l,!1),c===void 0?l=void 0:(l=new c(i),l._$AT(i,t,n)),n!==void 0?((o=(a=t)._$Co)!==null&&o!==void 0?o:a._$Co=[])[n]=l:t._$Cl=l),l!==void 0&&(e=lm(i,l._$AS(i,e.values),l,n)),e}class fae{constructor(e,t){this.u=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(e){var t;const{el:{content:n},parts:s}=this._$AD,r=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:am).importNode(n,!0);xp.currentNode=r;let o=xp.nextNode(),a=0,l=0,c=s[0];for(;c!==void 0;){if(a===c.index){let h;c.type===2?h=new U1(o,o.nextSibling,this,e):c.type===1?h=new c.ctor(o,c.name,c.strings,this,e):c.type===6&&(h=new bae(o,this,e)),this.u.push(h),c=s[++l]}a!==(c==null?void 0:c.index)&&(o=xp.nextNode(),a++)}return r}p(e){let t=0;for(const n of this.u)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class U1{constructor(e,t,n,s){var r;this.type=2,this._$AH=Gn,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=s,this._$Cm=(r=s==null?void 0:s.isConnected)===null||r===void 0||r}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cm}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&e.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=lm(this,e,t),sv(e)?e===Gn||e==null||e===""?(this._$AH!==Gn&&this._$AR(),this._$AH=Gn):e!==this._$AH&&e!==rv&&this.g(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):hae(e)?this.k(e):this.g(e)}O(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}g(e){this._$AH!==Gn&&sv(this._$AH)?this._$AA.nextSibling.data=e:this.T(am.createTextNode(e)),this._$AH=e}$(e){var t;const{values:n,_$litType$:s}=e,r=typeof s=="number"?this._$AC(e):(s.el===void 0&&(s.el=KI.createElement(s.h,this.options)),s);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===r)this._$AH.p(n);else{const o=new fae(r,this),a=o.v(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let t=MB.get(e.strings);return t===void 0&&MB.set(e.strings,t=new KI(e)),t}k(e){o$(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,s=0;for(const r of e)s===t.length?t.push(n=new U1(this.O(nv()),this.O(nv()),this,this.options)):n=t[s],n._$AI(r),s++;s<t.length&&(this._$AR(n&&n._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,t);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var t;this._$AM===void 0&&(this._$Cm=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}}class eL{constructor(e,t,n,s,r){this.type=1,this._$AH=Gn,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=r,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Gn}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,s){const r=this.strings;let o=!1;if(r===void 0)e=lm(this,e,t,0),o=!sv(e)||e!==this._$AH&&e!==rv,o&&(this._$AH=e);else{const a=e;let l,c;for(e=r[0],l=0;l<r.length-1;l++)c=lm(this,a[n+l],t,l),c===rv&&(c=this._$AH[l]),o||(o=!sv(c)||c!==this._$AH[l]),c===Gn?e=Gn:e!==Gn&&(e+=(c??"")+r[l+1]),this._$AH[l]=c}o&&!s&&this.j(e)}j(e){e===Gn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class gae extends eL{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Gn?void 0:e}}const pae=om?om.emptyScript:"";class mae extends eL{constructor(){super(...arguments),this.type=4}j(e){e&&e!==Gn?this.element.setAttribute(this.name,pae):this.element.removeAttribute(this.name)}}class _ae extends eL{constructor(e,t,n,s,r){super(e,t,n,s,r),this.type=5}_$AI(e,t=this){var n;if((e=(n=lm(this,e,t,0))!==null&&n!==void 0?n:Gn)===rv)return;const s=this._$AH,r=e===Gn&&s!==Gn||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,o=e!==Gn&&(s===Gn||r);r&&this.element.removeEventListener(this.name,this,s),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;typeof this._$AH=="function"?this._$AH.call((n=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}class bae{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){lm(this,e)}}const RB=RS.litHtmlPolyfillSupport;RB==null||RB(KI,U1),((D2=RS.litHtmlVersions)!==null&&D2!==void 0?D2:RS.litHtmlVersions=[]).push("2.4.0");const OB=(i,e,t)=>{var n,s;const r=(n=t==null?void 0:t.renderBefore)!==null&&n!==void 0?n:e;let o=r._$litPart$;if(o===void 0){const a=(s=t==null?void 0:t.renderBefore)!==null&&s!==void 0?s:null;r._$litPart$=o=new U1(e.insertBefore(nv(),a),a,void 0,t??{})}return o._$AI(i),o},PB=1;function gR(){let i=[0,1],e=[0,1],t=1,n=1,s=0,r=0,o=.5,a=0;const l=c=>(c+o-i[0])/t*n+e[0];return l.invert=c=>(c-e[0])/n*t+i[0]-o,l.domain=function(c){if(arguments.length){if(i=rre(c),t=i[1]-i[0],t<PB){t=PB;const h=(i[0]+i[1])/2;i[0]=h-t/2,i[1]=h+t/2}return l}else return i},l.range=function(c){return arguments.length?(e=[...c],n=e[1]-e[0],l):e},l.numberingOffset=function(c){return arguments.length?(a=c,l):a},l.padding=function(c){return arguments.length?(r=c,s=Math.min(1,c),l):s},l.paddingInner=function(c){return arguments.length?(s=Math.min(1,c),l):s},l.paddingOuter=function(c){return arguments.length?(r=c,l):r},l.align=function(c){return arguments.length?(o=Math.max(0,Math.min(1,c)),l):o},l.step=()=>n/t,l.bandwidth=()=>l.step(),l.ticks=c=>{const h=l.align(),u=l.numberingOffset();return kS(i[0]-h+u,i[1]-h+u,Math.min(c,Math.ceil(t))).filter(Number.isInteger).map(d=>d-a)},l.tickFormat=(c,h)=>{if(h)throw new Error("Index scale's tickFormat does not support a specifier!");const u=nf(i[0],i[1],Math.min(c,Math.ceil(t)))<1e5?hs(","):hs(".3s");return d=>u(d+a)},l.copy=()=>gR().domain(i).range(e).paddingInner(s).paddingOuter(r).numberingOffset(a),l}function vae(){const i=gR().numberingOffset(1);let e;i.genome=function(n){return arguments.length?(e=n,i):e},i.ticks=n=>{if(!e)return[];const s=i.domain(),r=i.numberingOffset(),[o,a]=[Math.max(s[0],0),Math.min(s[1],e.totalSize-1)].map(h=>e.toChromosome(h)),l=Math.max(1,nf(s[0],s[1],n)),c=[];for(let h=o.index;h<=a.index;h++){const u=e.chromosomes[h],d=Math.max(u.continuousStart+l,s[0]-(s[0]-u.continuousStart)%l),f=Math.min(u.continuousEnd-l/4,s[1]+1);for(let g=d;g<=f;g+=l){const p=g-r;p>=s[0]&&p<s[1]&&c.push(p)}}return c},i.tickFormat=(n,s)=>{if(!e)return;if(s)throw new Error("Locus scale's tickFormat does not support a specifier!");const r=i.domain(),o=r[1]-r[0],a=i.numberingOffset(),l=nf(r[0],r[1],Math.min(n,Math.ceil(o)))<1e6?hs(","):hs(".3s"),c=h=>h-e.toChromosome(h).continuousStart;return h=>l(c(h)+a)};const t=i.copy;return i.copy=()=>t().genome(e),i}function wae(i){return i.type=="locus"}function Fl(i,e){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(e).domain(i);break}return this}function Eu(i,e){switch(arguments.length){case 0:break;case 1:{typeof i=="function"?this.interpolator(i):this.range(i);break}default:{this.domain(i),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const ZI=Symbol("implicit");function pR(){var i=new tf,e=[],t=[],n=ZI;function s(r){let o=i.get(r);if(o===void 0){if(n!==ZI)return n;i.set(r,o=e.push(r)-1)}return t[o%t.length]}return s.domain=function(r){if(!arguments.length)return e.slice();e=[],i=new tf;for(const o of r)i.has(o)||i.set(o,e.push(o)-1);return s},s.range=function(r){return arguments.length?(t=Array.from(r),s):t.slice()},s.unknown=function(r){return arguments.length?(n=r,s):n},s.copy=function(){return pR(e,t).unknown(n)},Fl.apply(s,arguments),s}function s0(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function $1(i,e){var t=Object.create(i.prototype);for(var n in e)t[n]=e[n];return t}function Iu(){}var rf=.7,cm=1/rf,Dp="\\s*([+-]?\\d+)\\s*",ov="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yae=/^#([0-9a-f]{3,8})$/,Cae=new RegExp(`^rgb\\(${Dp},${Dp},${Dp}\\)$`),Sae=new RegExp(`^rgb\\(${pl},${pl},${pl}\\)$`),xae=new RegExp(`^rgba\\(${Dp},${Dp},${Dp},${ov}\\)$`),Dae=new RegExp(`^rgba\\(${pl},${pl},${pl},${ov}\\)$`),Lae=new RegExp(`^hsl\\(${ov},${pl},${pl}\\)$`),kae=new RegExp(`^hsla\\(${ov},${pl},${pl},${ov}\\)$`),FB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};s0(Iu,of,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:BB,formatHex:BB,formatHex8:Aae,formatHsl:Eae,formatRgb:VB,toString:VB});function BB(){return this.rgb().formatHex()}function Aae(){return this.rgb().formatHex8()}function Eae(){return c$(this).formatHsl()}function VB(){return this.rgb().formatRgb()}function of(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=yae.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?WB(e):t===3?new Zn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Kw(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Kw(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Cae.exec(i))?new Zn(e[1],e[2],e[3],1):(e=Sae.exec(i))?new Zn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=xae.exec(i))?Kw(e[1],e[2],e[3],e[4]):(e=Dae.exec(i))?Kw(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Lae.exec(i))?UB(e[1],e[2]/100,e[3]/100,1):(e=kae.exec(i))?UB(e[1],e[2]/100,e[3]/100,e[4]):FB.hasOwnProperty(i)?WB(FB[i]):i==="transparent"?new Zn(NaN,NaN,NaN,0):null}function WB(i){return new Zn(i>>16&255,i>>8&255,i&255,1)}function Kw(i,e,t,n){return n<=0&&(i=e=t=NaN),new Zn(i,e,t,n)}function mR(i){return i instanceof Iu||(i=of(i)),i?(i=i.rgb(),new Zn(i.r,i.g,i.b,i.opacity)):new Zn}function OS(i,e,t,n){return arguments.length===1?mR(i):new Zn(i,e,t,n??1)}function Zn(i,e,t,n){this.r=+i,this.g=+e,this.b=+t,this.opacity=+n}s0(Zn,OS,$1(Iu,{brighter(i){return i=i==null?cm:Math.pow(cm,i),new Zn(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?rf:Math.pow(rf,i),new Zn(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new Zn(Pd(this.r),Pd(this.g),Pd(this.b),PS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zB,formatHex:zB,formatHex8:Iae,formatRgb:HB,toString:HB}));function zB(){return`#${vd(this.r)}${vd(this.g)}${vd(this.b)}`}function Iae(){return`#${vd(this.r)}${vd(this.g)}${vd(this.b)}${vd((isNaN(this.opacity)?1:this.opacity)*255)}`}function HB(){const i=PS(this.opacity);return`${i===1?"rgb(":"rgba("}${Pd(this.r)}, ${Pd(this.g)}, ${Pd(this.b)}${i===1?")":`, ${i})`}`}function PS(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function Pd(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function vd(i){return i=Pd(i),(i<16?"0":"")+i.toString(16)}function UB(i,e,t,n){return n<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new Jo(i,e,t,n)}function c$(i){if(i instanceof Jo)return new Jo(i.h,i.s,i.l,i.opacity);if(i instanceof Iu||(i=of(i)),!i)return new Jo;if(i instanceof Jo)return i;i=i.rgb();var e=i.r/255,t=i.g/255,n=i.b/255,s=Math.min(e,t,n),r=Math.max(e,t,n),o=NaN,a=r-s,l=(r+s)/2;return a?(e===r?o=(t-n)/a+(t<n)*6:t===r?o=(n-e)/a+2:o=(e-t)/a+4,a/=l<.5?r+s:2-r-s,o*=60):a=l>0&&l<1?0:o,new Jo(o,a,l,i.opacity)}function YI(i,e,t,n){return arguments.length===1?c$(i):new Jo(i,e,t,n??1)}function Jo(i,e,t,n){this.h=+i,this.s=+e,this.l=+t,this.opacity=+n}s0(Jo,YI,$1(Iu,{brighter(i){return i=i==null?cm:Math.pow(cm,i),new Jo(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?rf:Math.pow(rf,i),new Jo(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,e=isNaN(i)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,s=2*t-n;return new Zn(L2(i>=240?i-240:i+120,s,n),L2(i,s,n),L2(i<120?i+240:i-120,s,n),this.opacity)},clamp(){return new Jo($B(this.h),Zw(this.s),Zw(this.l),PS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=PS(this.opacity);return`${i===1?"hsl(":"hsla("}${$B(this.h)}, ${Zw(this.s)*100}%, ${Zw(this.l)*100}%${i===1?")":`, ${i})`}`}}));function $B(i){return i=(i||0)%360,i<0?i+360:i}function Zw(i){return Math.max(0,Math.min(1,i||0))}function L2(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}const h$=Math.PI/180,u$=180/Math.PI,FS=18,d$=.96422,f$=1,g$=.82521,p$=4/29,Lp=6/29,m$=3*Lp*Lp,Tae=Lp*Lp*Lp;function _$(i){if(i instanceof ml)return new ml(i.l,i.a,i.b,i.opacity);if(i instanceof kc)return b$(i);i instanceof Zn||(i=mR(i));var e=I2(i.r),t=I2(i.g),n=I2(i.b),s=k2((.2225045*e+.7168786*t+.0606169*n)/f$),r,o;return e===t&&t===n?r=o=s:(r=k2((.4360747*e+.3850649*t+.1430804*n)/d$),o=k2((.0139322*e+.0971045*t+.7141733*n)/g$)),new ml(116*s-16,500*(r-s),200*(s-o),i.opacity)}function QI(i,e,t,n){return arguments.length===1?_$(i):new ml(i,e,t,n??1)}function ml(i,e,t,n){this.l=+i,this.a=+e,this.b=+t,this.opacity=+n}s0(ml,QI,$1(Iu,{brighter(i){return new ml(this.l+FS*(i??1),this.a,this.b,this.opacity)},darker(i){return new ml(this.l-FS*(i??1),this.a,this.b,this.opacity)},rgb(){var i=(this.l+16)/116,e=isNaN(this.a)?i:i+this.a/500,t=isNaN(this.b)?i:i-this.b/200;return e=d$*A2(e),i=f$*A2(i),t=g$*A2(t),new Zn(E2(3.1338561*e-1.6168667*i-.4906146*t),E2(-.9787684*e+1.9161415*i+.033454*t),E2(.0719453*e-.2289914*i+1.4052427*t),this.opacity)}}));function k2(i){return i>Tae?Math.pow(i,1/3):i/m$+p$}function A2(i){return i>Lp?i*i*i:m$*(i-p$)}function E2(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function I2(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Nae(i){if(i instanceof kc)return new kc(i.h,i.c,i.l,i.opacity);if(i instanceof ml||(i=_$(i)),i.a===0&&i.b===0)return new kc(NaN,0<i.l&&i.l<100?0:NaN,i.l,i.opacity);var e=Math.atan2(i.b,i.a)*u$;return new kc(e<0?e+360:e,Math.sqrt(i.a*i.a+i.b*i.b),i.l,i.opacity)}function XI(i,e,t,n){return arguments.length===1?Nae(i):new kc(i,e,t,n??1)}function kc(i,e,t,n){this.h=+i,this.c=+e,this.l=+t,this.opacity=+n}function b$(i){if(isNaN(i.h))return new ml(i.l,0,0,i.opacity);var e=i.h*h$;return new ml(i.l,Math.cos(e)*i.c,Math.sin(e)*i.c,i.opacity)}s0(kc,XI,$1(Iu,{brighter(i){return new kc(this.h,this.c,this.l+FS*(i??1),this.opacity)},darker(i){return new kc(this.h,this.c,this.l-FS*(i??1),this.opacity)},rgb(){return b$(this).rgb()}}));var v$=-.14861,_R=1.78277,bR=-.29227,tL=-.90649,av=1.97294,jB=av*tL,qB=av*_R,GB=_R*bR-tL*v$;function Mae(i){if(i instanceof Fd)return new Fd(i.h,i.s,i.l,i.opacity);i instanceof Zn||(i=mR(i));var e=i.r/255,t=i.g/255,n=i.b/255,s=(GB*n+jB*e-qB*t)/(GB+jB-qB),r=n-s,o=(av*(t-s)-bR*r)/tL,a=Math.sqrt(o*o+r*r)/(av*s*(1-s)),l=a?Math.atan2(o,r)*u$-120:NaN;return new Fd(l<0?l+360:l,a,s,i.opacity)}function JI(i,e,t,n){return arguments.length===1?Mae(i):new Fd(i,e,t,n??1)}function Fd(i,e,t,n){this.h=+i,this.s=+e,this.l=+t,this.opacity=+n}s0(Fd,JI,$1(Iu,{brighter(i){return i=i==null?cm:Math.pow(cm,i),new Fd(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?rf:Math.pow(rf,i),new Fd(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=isNaN(this.h)?0:(this.h+120)*h$,e=+this.l,t=isNaN(this.s)?0:this.s*e*(1-e),n=Math.cos(i),s=Math.sin(i);return new Zn(255*(e+t*(v$*n+_R*s)),255*(e+t*(bR*n+tL*s)),255*(e+t*(av*n)),this.opacity)}}));function w$(i,e,t,n,s){var r=i*i,o=r*i;return((1-3*i+3*r-o)*e+(4-6*r+3*o)*t+(1+3*i+3*r-3*o)*n+o*s)/6}function y$(i){var e=i.length-1;return function(t){var n=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),s=i[n],r=i[n+1],o=n>0?i[n-1]:2*s-r,a=n<e-1?i[n+2]:2*r-s;return w$((t-n/e)*e,o,s,r,a)}}function C$(i){var e=i.length;return function(t){var n=Math.floor(((t%=1)<0?++t:t)*e),s=i[(n+e-1)%e],r=i[n%e],o=i[(n+1)%e],a=i[(n+2)%e];return w$((t-n/e)*e,s,r,o,a)}}const iL=i=>()=>i;function S$(i,e){return function(t){return i+t*e}}function Rae(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(n){return Math.pow(i+n*e,t)}}function nL(i,e){var t=e-i;return t?S$(i,t>180||t<-180?t-360*Math.round(t/360):t):iL(isNaN(i)?e:i)}function Oae(i){return(i=+i)==1?Yn:function(e,t){return t-e?Rae(e,t,i):iL(isNaN(e)?t:e)}}function Yn(i,e){var t=e-i;return t?S$(i,t):iL(isNaN(i)?e:i)}const eT=function i(e){var t=Oae(e);function n(s,r){var o=t((s=OS(s)).r,(r=OS(r)).r),a=t(s.g,r.g),l=t(s.b,r.b),c=Yn(s.opacity,r.opacity);return function(h){return s.r=o(h),s.g=a(h),s.b=l(h),s.opacity=c(h),s+""}}return n.gamma=i,n}(1);function x$(i){return function(e){var t=e.length,n=new Array(t),s=new Array(t),r=new Array(t),o,a;for(o=0;o<t;++o)a=OS(e[o]),n[o]=a.r||0,s[o]=a.g||0,r[o]=a.b||0;return n=i(n),s=i(s),r=i(r),a.opacity=1,function(l){return a.r=n(l),a.g=s(l),a.b=r(l),a+""}}}var Pae=x$(y$),Fae=x$(C$);function vR(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,n=e.slice(),s;return function(r){for(s=0;s<t;++s)n[s]=i[s]*(1-r)+e[s]*r;return n}}function D$(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Bae(i,e){return(D$(e)?vR:L$)(i,e)}function L$(i,e){var t=e?e.length:0,n=i?Math.min(t,i.length):0,s=new Array(n),r=new Array(t),o;for(o=0;o<n;++o)s[o]=Tu(i[o],e[o]);for(;o<t;++o)r[o]=e[o];return function(a){for(o=0;o<n;++o)r[o]=s[o](a);return r}}function k$(i,e){var t=new Date;return i=+i,e=+e,function(n){return t.setTime(i*(1-n)+e*n),t}}function Yo(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function A$(i,e){var t={},n={},s;(i===null||typeof i!="object")&&(i={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in i?t[s]=Tu(i[s],e[s]):n[s]=e[s];return function(r){for(s in t)n[s]=t[s](r);return n}}var tT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,T2=new RegExp(tT.source,"g");function Vae(i){return function(){return i}}function Wae(i){return function(e){return i(e)+""}}function E$(i,e){var t=tT.lastIndex=T2.lastIndex=0,n,s,r,o=-1,a=[],l=[];for(i=i+"",e=e+"";(n=tT.exec(i))&&(s=T2.exec(e));)(r=s.index)>t&&(r=e.slice(t,r),a[o]?a[o]+=r:a[++o]=r),(n=n[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:Yo(n,s)})),t=T2.lastIndex;return t<e.length&&(r=e.slice(t),a[o]?a[o]+=r:a[++o]=r),a.length<2?l[0]?Wae(l[0].x):Vae(e):(e=l.length,function(c){for(var h=0,u;h<e;++h)a[(u=l[h]).i]=u.x(c);return a.join("")})}function Tu(i,e){var t=typeof e,n;return e==null||t==="boolean"?iL(e):(t==="number"?Yo:t==="string"?(n=of(e))?(e=n,eT):E$:e instanceof of?eT:e instanceof Date?k$:D$(e)?vR:Array.isArray(e)?L$:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?A$:Yo)(i,e)}function zae(i){var e=i.length;return function(t){return i[Math.max(0,Math.min(e-1,Math.floor(t*e)))]}}function Hae(i,e){var t=nL(+i,+e);return function(n){var s=t(n);return s-360*Math.floor(s/360)}}function j1(i,e){return i=+i,e=+e,function(t){return Math.round(i*(1-t)+e*t)}}var KB=180/Math.PI,I$={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function T$(i,e,t,n,s,r){var o,a,l;return(o=Math.sqrt(i*i+e*e))&&(i/=o,e/=o),(l=i*t+e*n)&&(t-=i*l,n-=e*l),(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a,l/=a),i*n<e*t&&(i=-i,e=-e,l=-l,o=-o),{translateX:s,translateY:r,rotate:Math.atan2(e,i)*KB,skewX:Math.atan(l)*KB,scaleX:o,scaleY:a}}var Yw;function Uae(i){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(i+"");return e.isIdentity?I$:T$(e.a,e.b,e.c,e.d,e.e,e.f)}function $ae(i){return i==null||(Yw||(Yw=document.createElementNS("http://www.w3.org/2000/svg","g")),Yw.setAttribute("transform",i),!(i=Yw.transform.baseVal.consolidate()))?I$:(i=i.matrix,T$(i.a,i.b,i.c,i.d,i.e,i.f))}function N$(i,e,t,n){function s(c){return c.length?c.pop()+" ":""}function r(c,h,u,d,f,g){if(c!==u||h!==d){var p=f.push("translate(",null,e,null,t);g.push({i:p-4,x:Yo(c,u)},{i:p-2,x:Yo(h,d)})}else(u||d)&&f.push("translate("+u+e+d+t)}function o(c,h,u,d){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),d.push({i:u.push(s(u)+"rotate(",null,n)-2,x:Yo(c,h)})):h&&u.push(s(u)+"rotate("+h+n)}function a(c,h,u,d){c!==h?d.push({i:u.push(s(u)+"skewX(",null,n)-2,x:Yo(c,h)}):h&&u.push(s(u)+"skewX("+h+n)}function l(c,h,u,d,f,g){if(c!==u||h!==d){var p=f.push(s(f)+"scale(",null,",",null,")");g.push({i:p-4,x:Yo(c,u)},{i:p-2,x:Yo(h,d)})}else(u!==1||d!==1)&&f.push(s(f)+"scale("+u+","+d+")")}return function(c,h){var u=[],d=[];return c=i(c),h=i(h),r(c.translateX,c.translateY,h.translateX,h.translateY,u,d),o(c.rotate,h.rotate,u,d),a(c.skewX,h.skewX,u,d),l(c.scaleX,c.scaleY,h.scaleX,h.scaleY,u,d),c=h=null,function(f){for(var g=-1,p=d.length,m;++g<p;)u[(m=d[g]).i]=m.x(f);return u.join("")}}}var jae=N$(Uae,"px, ","px)","deg)"),qae=N$($ae,", ",")",")"),Gae=1e-12;function ZB(i){return((i=Math.exp(i))+1/i)/2}function Kae(i){return((i=Math.exp(i))-1/i)/2}function Zae(i){return((i=Math.exp(2*i))-1)/(i+1)}const M$=function i(e,t,n){function s(r,o){var a=r[0],l=r[1],c=r[2],h=o[0],u=o[1],d=o[2],f=h-a,g=u-l,p=f*f+g*g,m,v;if(p<Gae)v=Math.log(d/c)/e,m=function(S){return[a+S*f,l+S*g,c*Math.exp(e*S*v)]};else{var b=Math.sqrt(p),w=(d*d-c*c+n*p)/(2*c*t*b),y=(d*d-c*c-n*p)/(2*d*t*b),x=Math.log(Math.sqrt(w*w+1)-w),k=Math.log(Math.sqrt(y*y+1)-y);v=(k-x)/e,m=function(S){var L=S*v,D=ZB(x),N=c/(t*b)*(D*Zae(e*L+x)-Kae(x));return[a+N*f,l+N*g,c*D/ZB(e*L+x)]}}return m.duration=v*1e3*e/Math.SQRT2,m}return s.rho=function(r){var o=Math.max(.001,+r),a=o*o,l=a*a;return i(o,a,l)},s}(Math.SQRT2,2,4);function R$(i){return function(e,t){var n=i((e=YI(e)).h,(t=YI(t)).h),s=Yn(e.s,t.s),r=Yn(e.l,t.l),o=Yn(e.opacity,t.opacity);return function(a){return e.h=n(a),e.s=s(a),e.l=r(a),e.opacity=o(a),e+""}}}const Yae=R$(nL);var Qae=R$(Yn);function Xae(i,e){var t=Yn((i=QI(i)).l,(e=QI(e)).l),n=Yn(i.a,e.a),s=Yn(i.b,e.b),r=Yn(i.opacity,e.opacity);return function(o){return i.l=t(o),i.a=n(o),i.b=s(o),i.opacity=r(o),i+""}}function O$(i){return function(e,t){var n=i((e=XI(e)).h,(t=XI(t)).h),s=Yn(e.c,t.c),r=Yn(e.l,t.l),o=Yn(e.opacity,t.opacity);return function(a){return e.h=n(a),e.c=s(a),e.l=r(a),e.opacity=o(a),e+""}}}const Jae=O$(nL);var ele=O$(Yn);function P$(i){return function e(t){t=+t;function n(s,r){var o=i((s=JI(s)).h,(r=JI(r)).h),a=Yn(s.s,r.s),l=Yn(s.l,r.l),c=Yn(s.opacity,r.opacity);return function(h){return s.h=o(h),s.s=a(h),s.l=l(Math.pow(h,t)),s.opacity=c(h),s+""}}return n.gamma=e,n}(1)}const tle=P$(nL);var ile=P$(Yn);function wR(i,e){e===void 0&&(e=i,i=Tu);for(var t=0,n=e.length-1,s=e[0],r=new Array(n<0?0:n);t<n;)r[t]=i(s,s=e[++t]);return function(o){var a=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return r[a](o-a)}}function nle(i,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=i(n/(e-1));return t}const sle=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Tu,interpolateArray:Bae,interpolateBasis:y$,interpolateBasisClosed:C$,interpolateCubehelix:tle,interpolateCubehelixLong:ile,interpolateDate:k$,interpolateDiscrete:zae,interpolateHcl:Jae,interpolateHclLong:ele,interpolateHsl:Yae,interpolateHslLong:Qae,interpolateHue:Hae,interpolateLab:Xae,interpolateNumber:Yo,interpolateNumberArray:vR,interpolateObject:A$,interpolateRgb:eT,interpolateRgbBasis:Pae,interpolateRgbBasisClosed:Fae,interpolateRound:j1,interpolateString:E$,interpolateTransformCss:jae,interpolateTransformSvg:qae,interpolateZoom:M$,piecewise:wR,quantize:nle},Symbol.toStringTag,{value:"Module"}));function rle(i){return function(){return i}}function iT(i){return+i}var YB=[0,1];function fr(i){return i}function nT(i,e){return(e-=i=+i)?function(t){return(t-i)/e}:rle(isNaN(e)?NaN:.5)}function ole(i,e){var t;return i>e&&(t=i,i=e,e=t),function(n){return Math.max(i,Math.min(e,n))}}function ale(i,e,t){var n=i[0],s=i[1],r=e[0],o=e[1];return s<n?(n=nT(s,n),r=t(o,r)):(n=nT(n,s),r=t(r,o)),function(a){return r(n(a))}}function lle(i,e,t){var n=Math.min(i.length,e.length)-1,s=new Array(n),r=new Array(n),o=-1;for(i[n]<i[0]&&(i=i.slice().reverse(),e=e.slice().reverse());++o<n;)s[o]=nT(i[o],i[o+1]),r[o]=t(e[o],e[o+1]);return function(a){var l=n0(i,a,1,n)-1;return r[l](s[l](a))}}function q1(i,e){return e.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function sL(){var i=YB,e=YB,t=Tu,n,s,r,o=fr,a,l,c;function h(){var d=Math.min(i.length,e.length);return o!==fr&&(o=ole(i[0],i[d-1])),a=d>2?lle:ale,l=c=null,u}function u(d){return d==null||isNaN(d=+d)?r:(l||(l=a(i.map(n),e,t)))(n(o(d)))}return u.invert=function(d){return o(s((c||(c=a(e,i.map(n),Yo)))(d)))},u.domain=function(d){return arguments.length?(i=Array.from(d,iT),h()):i.slice()},u.range=function(d){return arguments.length?(e=Array.from(d),h()):e.slice()},u.rangeRound=function(d){return e=Array.from(d),t=j1,h()},u.clamp=function(d){return arguments.length?(o=d?!0:fr,h()):o!==fr},u.interpolate=function(d){return arguments.length?(t=d,h()):t},u.unknown=function(d){return arguments.length?(r=d,u):r},function(d,f){return n=d,s=f,h()}}function F$(){return sL()(fr,fr)}function B$(i,e,t,n){var s=nf(i,e,t),r;switch(n=ou(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(i),Math.abs(e));return n.precision==null&&!isNaN(r=OU(s,o))&&(n.precision=r),eR(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(r=PU(s,Math.max(Math.abs(i),Math.abs(e))))&&(n.precision=r-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(r=RU(s))&&(n.precision=r-(n.type==="%")*2);break}}return hs(n)}function $f(i){var e=i.domain;return i.ticks=function(t){var n=e();return kS(n[0],n[n.length-1],t??10)},i.tickFormat=function(t,n){var s=e();return B$(s[0],s[s.length-1],t??10,n)},i.nice=function(t){t==null&&(t=10);var n=e(),s=0,r=n.length-1,o=n[s],a=n[r],l,c,h=10;for(a<o&&(c=o,o=a,a=c,c=s,s=r,r=c);h-- >0;){if(c=TU(o,a,t),c===l)return n[s]=o,n[r]=a,e(n);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return i},i}function V$(){var i=F$();return i.copy=function(){return q1(i,V$())},Fl.apply(i,arguments),$f(i)}function W$(i){var e;function t(n){return n==null||isNaN(n=+n)?e:n}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(i=Array.from(n,iT),t):i.slice()},t.unknown=function(n){return arguments.length?(e=n,t):e},t.copy=function(){return W$(i).unknown(e)},i=arguments.length?Array.from(i,iT):[0,1],$f(t)}function z$(i,e){i=i.slice();var t=0,n=i.length-1,s=i[t],r=i[n],o;return r<s&&(o=t,t=n,n=o,o=s,s=r,r=o),i[t]=e.floor(s),i[n]=e.ceil(r),i}function QB(i){return Math.log(i)}function XB(i){return Math.exp(i)}function cle(i){return-Math.log(-i)}function hle(i){return-Math.exp(-i)}function ule(i){return isFinite(i)?+("1e"+i):i<0?0:i}function dle(i){return i===10?ule:i===Math.E?Math.exp:e=>Math.pow(i,e)}function fle(i){return i===Math.E?Math.log:i===10&&Math.log10||i===2&&Math.log2||(i=Math.log(i),e=>Math.log(e)/i)}function JB(i){return(e,t)=>-i(-e,t)}function yR(i){const e=i(QB,XB),t=e.domain;let n=10,s,r;function o(){return s=fle(n),r=dle(n),t()[0]<0?(s=JB(s),r=JB(r),i(cle,hle)):i(QB,XB),e}return e.base=function(a){return arguments.length?(n=+a,o()):n},e.domain=function(a){return arguments.length?(t(a),o()):t()},e.ticks=a=>{const l=t();let c=l[0],h=l[l.length-1];const u=h<c;u&&([c,h]=[h,c]);let d=s(c),f=s(h),g,p;const m=a==null?10:+a;let v=[];if(!(n%1)&&f-d<m){if(d=Math.floor(d),f=Math.ceil(f),c>0){for(;d<=f;++d)for(g=1;g<n;++g)if(p=d<0?g/r(-d):g*r(d),!(p<c)){if(p>h)break;v.push(p)}}else for(;d<=f;++d)for(g=n-1;g>=1;--g)if(p=d>0?g/r(-d):g*r(d),!(p<c)){if(p>h)break;v.push(p)}v.length*2<m&&(v=kS(c,h,m))}else v=kS(d,f,Math.min(f-d,m)).map(r);return u?v.reverse():v},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=ou(l)).precision==null&&(l.trim=!0),l=hs(l)),a===1/0)return l;const c=Math.max(1,n*a/e.ticks().length);return h=>{let u=h/r(Math.round(s(h)));return u*n<n-.5&&(u*=n),u<=c?l(h):""}},e.nice=()=>t(z$(t(),{floor:a=>r(Math.floor(s(a))),ceil:a=>r(Math.ceil(s(a)))})),e}function CR(){const i=yR(sL()).domain([1,10]);return i.copy=()=>q1(i,CR()).base(i.base()),Fl.apply(i,arguments),i}function e6(i){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/i))}}function t6(i){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*i}}function SR(i){var e=1,t=i(e6(e),t6(e));return t.constant=function(n){return arguments.length?i(e6(e=+n),t6(e)):e},$f(t)}function H$(){var i=SR(sL());return i.copy=function(){return q1(i,H$()).constant(i.constant())},Fl.apply(i,arguments)}function i6(i){return function(e){return e<0?-Math.pow(-e,i):Math.pow(e,i)}}function gle(i){return i<0?-Math.sqrt(-i):Math.sqrt(i)}function ple(i){return i<0?-i*i:i*i}function xR(i){var e=i(fr,fr),t=1;function n(){return t===1?i(fr,fr):t===.5?i(gle,ple):i(i6(t),i6(1/t))}return e.exponent=function(s){return arguments.length?(t=+s,n()):t},$f(e)}function DR(){var i=xR(sL());return i.copy=function(){return q1(i,DR()).exponent(i.exponent())},Fl.apply(i,arguments),i}function mle(){return DR.apply(null,arguments).exponent(.5)}function U$(){var i=[],e=[],t=[],n;function s(){var o=0,a=Math.max(1,e.length);for(t=new Array(a-1);++o<a;)t[o-1]=NU(i,o/a);return r}function r(o){return o==null||isNaN(o=+o)?n:e[n0(t,o)]}return r.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?t[a-1]:i[0],a<t.length?t[a]:i[i.length-1]]},r.domain=function(o){if(!arguments.length)return i.slice();i=[];for(let a of o)a!=null&&!isNaN(a=+a)&&i.push(a);return i.sort(q_),s()},r.range=function(o){return arguments.length?(e=Array.from(o),s()):e.slice()},r.unknown=function(o){return arguments.length?(n=o,r):n},r.quantiles=function(){return t.slice()},r.copy=function(){return U$().domain(i).range(e).unknown(n)},Fl.apply(r,arguments)}function $$(){var i=0,e=1,t=1,n=[.5],s=[0,1],r;function o(l){return l!=null&&l<=l?s[n0(n,l,0,t)]:r}function a(){var l=-1;for(n=new Array(t);++l<t;)n[l]=((l+1)*e-(l-t)*i)/(t+1);return o}return o.domain=function(l){return arguments.length?([i,e]=l,i=+i,e=+e,a()):[i,e]},o.range=function(l){return arguments.length?(t=(s=Array.from(l)).length-1,a()):s.slice()},o.invertExtent=function(l){var c=s.indexOf(l);return c<0?[NaN,NaN]:c<1?[i,n[0]]:c>=t?[n[t-1],e]:[n[c-1],n[c]]},o.unknown=function(l){return arguments.length&&(r=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return $$().domain([i,e]).range(s).unknown(r)},Fl.apply($f(o),arguments)}function j$(){var i=[.5],e=[0,1],t,n=1;function s(r){return r!=null&&r<=r?e[n0(i,r,0,n)]:t}return s.domain=function(r){return arguments.length?(i=Array.from(r),n=Math.min(i.length,e.length-1),s):i.slice()},s.range=function(r){return arguments.length?(e=Array.from(r),n=Math.min(i.length,e.length-1),s):e.slice()},s.invertExtent=function(r){var o=e.indexOf(r);return[i[o-1],i[o]]},s.unknown=function(r){return arguments.length?(t=r,s):t},s.copy=function(){return j$().domain(i).range(e).unknown(t)},Fl.apply(s,arguments)}function _le(i){return new Date(i)}function ble(i){return i instanceof Date?+i:+new Date(+i)}function LR(i,e,t,n,s,r,o,a,l,c){var h=F$(),u=h.invert,d=h.domain,f=c(".%L"),g=c(":%S"),p=c("%I:%M"),m=c("%I %p"),v=c("%a %d"),b=c("%b %d"),w=c("%B"),y=c("%Y");function x(k){return(l(k)<k?f:a(k)<k?g:o(k)<k?p:r(k)<k?m:n(k)<k?s(k)<k?v:b:t(k)<k?w:y)(k)}return h.invert=function(k){return new Date(u(k))},h.domain=function(k){return arguments.length?d(Array.from(k,ble)):d().map(_le)},h.ticks=function(k){var S=d();return i(S[0],S[S.length-1],k??10)},h.tickFormat=function(k,S){return S==null?x:c(S)},h.nice=function(k){var S=d();return(!k||typeof k.range!="function")&&(k=e(S[0],S[S.length-1],k??10)),k?d(z$(S,k)):h},h.copy=function(){return q1(h,LR(i,e,t,n,s,r,o,a,l,c))},h}function vle(){return Fl.apply(LR(Are,Ere,au,TS,z1,Rd,sR,nR,Ph,hR).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wle(){return Fl.apply(LR(Lre,kre,lu,MS,H1,Od,aR,oR,Ph,uR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function rL(){var i=0,e=1,t,n,s,r,o=fr,a=!1,l;function c(u){return u==null||isNaN(u=+u)?l:o(s===0?.5:(u=(r(u)-t)*s,a?Math.max(0,Math.min(1,u)):u))}c.domain=function(u){return arguments.length?([i,e]=u,t=r(i=+i),n=r(e=+e),s=t===n?0:1/(n-t),c):[i,e]},c.clamp=function(u){return arguments.length?(a=!!u,c):a},c.interpolator=function(u){return arguments.length?(o=u,c):o};function h(u){return function(d){var f,g;return arguments.length?([f,g]=d,o=u(f,g),c):[o(0),o(1)]}}return c.range=h(Tu),c.rangeRound=h(j1),c.unknown=function(u){return arguments.length?(l=u,c):l},function(u){return r=u,t=u(i),n=u(e),s=t===n?0:1/(n-t),c}}function Nu(i,e){return e.domain(i.domain()).interpolator(i.interpolator()).clamp(i.clamp()).unknown(i.unknown())}function kR(){var i=$f(rL()(fr));return i.copy=function(){return Nu(i,kR())},Eu.apply(i,arguments)}function q$(){var i=yR(rL()).domain([1,10]);return i.copy=function(){return Nu(i,q$()).base(i.base())},Eu.apply(i,arguments)}function G$(){var i=SR(rL());return i.copy=function(){return Nu(i,G$()).constant(i.constant())},Eu.apply(i,arguments)}function AR(){var i=xR(rL());return i.copy=function(){return Nu(i,AR()).exponent(i.exponent())},Eu.apply(i,arguments)}function yle(){return AR.apply(null,arguments).exponent(.5)}function oL(){var i=0,e=.5,t=1,n=1,s,r,o,a,l,c=fr,h,u=!1,d;function f(p){return isNaN(p=+p)?d:(p=.5+((p=+h(p))-r)*(n*p<n*r?a:l),c(u?Math.max(0,Math.min(1,p)):p))}f.domain=function(p){return arguments.length?([i,e,t]=p,s=h(i=+i),r=h(e=+e),o=h(t=+t),a=s===r?0:.5/(r-s),l=r===o?0:.5/(o-r),n=r<s?-1:1,f):[i,e,t]},f.clamp=function(p){return arguments.length?(u=!!p,f):u},f.interpolator=function(p){return arguments.length?(c=p,f):c};function g(p){return function(m){var v,b,w;return arguments.length?([v,b,w]=m,c=wR(p,[v,b,w]),f):[c(0),c(.5),c(1)]}}return f.range=g(Tu),f.rangeRound=g(j1),f.unknown=function(p){return arguments.length?(d=p,f):d},function(p){return h=p,s=p(i),r=p(e),o=p(t),a=s===r?0:.5/(r-s),l=r===o?0:.5/(o-r),n=r<s?-1:1,f}}function K$(){var i=$f(oL()(fr));return i.copy=function(){return Nu(i,K$())},Eu.apply(i,arguments)}function Z$(){var i=yR(oL()).domain([.1,1,10]);return i.copy=function(){return Nu(i,Z$()).base(i.base())},Eu.apply(i,arguments)}function Y$(){var i=SR(oL());return i.copy=function(){return Nu(i,Y$()).constant(i.constant())},Eu.apply(i,arguments)}function ER(){var i=xR(oL());return i.copy=function(){return Nu(i,ER()).exponent(i.exponent())},Eu.apply(i,arguments)}function Cle(){return ER.apply(null,arguments).exponent(.5)}function IR(i,e,t){const n=i-e+t*2;return i?n>0?n:1:0}const Sle="identity",hm="linear",cu="log",G1="pow",K1="sqrt",aL="symlog",Q$="time",X$="utc",_l="sequential",r0="diverging",sT="quantile",J$="quantize",ej="threshold",TR="ordinal",rT="point",tj="band",NR="bin-ordinal",Bn="continuous",Z1="discrete",Y1="discretizing",Oo="interpolating",ij="temporal";function xle(i){return function(e){let t=e[0],n=e[1],s;return n<t&&(s=t,t=n,n=s),[i.invert(t),i.invert(n)]}}function Dle(i){return function(e){const t=i.range();let n=e[0],s=e[1],r=-1,o,a,l,c;for(s<n&&(a=n,n=s,s=a),l=0,c=t.length;l<c;++l)t[l]>=n&&t[l]<=s&&(r<0&&(r=l),o=l);if(!(r<0))return n=i.invertExtent(t[r]),s=i.invertExtent(t[o]),[n[0]===void 0?n[1]:n[0],s[1]===void 0?s[0]:s[1]]}}function MR(){const i=pR().unknown(void 0),e=i.domain,t=i.range;let n=[0,1],s,r,o=!1,a=0,l=0,c=.5;delete i.unknown;function h(){const u=e().length,d=n[1]<n[0],f=n[1-d],g=IR(u,a,l);let p=n[d-0];s=(f-p)/(g||1),o&&(s=Math.floor(s)),p+=(f-p-s*(u-a))*c,r=s*(1-a),o&&(p=Math.round(p),r=Math.round(r));const m=Kb(u).map(v=>p+s*v);return t(d?m.reverse():m)}return i.domain=function(u){return arguments.length?(e(u),h()):e()},i.range=function(u){return arguments.length?(n=[+u[0],+u[1]],h()):n.slice()},i.rangeRound=function(u){return n=[+u[0],+u[1]],o=!0,h()},i.bandwidth=function(){return r},i.step=function(){return s},i.round=function(u){return arguments.length?(o=!!u,h()):o},i.padding=function(u){return arguments.length?(l=Math.max(0,Math.min(1,u)),a=l,h()):a},i.paddingInner=function(u){return arguments.length?(a=Math.max(0,Math.min(1,u)),h()):a},i.paddingOuter=function(u){return arguments.length?(l=Math.max(0,Math.min(1,u)),h()):l},i.align=function(u){return arguments.length?(c=Math.max(0,Math.min(1,u)),h()):c},i.invertRange=function(u){if(u[0]==null||u[1]==null)return;const d=n[1]<n[0],f=d?t().reverse():t(),g=f.length-1;let p=+u[0],m=+u[1],v,b,w;if(!(p!==p||m!==m)&&(m<p&&(w=p,p=m,m=w),!(m<f[0]||p>n[1-d])))return v=Math.max(0,HI(f,p)-1),b=p===m?v:HI(f,m)-1,p-f[v]>r+1e-10&&++v,d&&(w=v,v=g-b,b=g-w),v>b?void 0:e().slice(v,b+1)},i.invert=function(u){const d=i.invertRange([u,u]);return d&&d[0]},i.copy=function(){return MR().domain(e()).range(n).round(o).paddingInner(a).paddingOuter(l).align(c)},h()}function nj(i){const e=i.copy;return i.padding=i.paddingOuter,delete i.paddingInner,i.copy=function(){return nj(e())},i}function Lle(){return nj(MR().paddingInner(1))}var kle=Array.prototype.map;function Ale(i){return kle.call(i,Gb)}const Ele=Array.prototype.slice;function sj(){let i=[],e=[];function t(n){return n==null||n!==n?void 0:e[(n0(i,n)-1)%e.length]}return t.domain=function(n){return arguments.length?(i=Ale(n),t):i.slice()},t.range=function(n){return arguments.length?(e=Ele.call(n),t):e.slice()},t.tickFormat=function(n,s){return B$(i[0],ma(i),n??10,s)},t.copy=function(){return sj().domain(t.domain()).range(t.range())},t}const BS={};function Ile(i,e,t){const n=function(){const s=e();return s.invertRange||(s.invertRange=s.invert?xle(s):s.invertExtent?Dle(s):void 0),s.type=i,s};return n.metadata=LS(zI(t)),n}function ni(i,e,t){return arguments.length>1?(BS[i]=Ile(i,e,t),this):Tle(i)?BS[i]:void 0}ni(Sle,W$);ni(hm,V$,Bn);ni(cu,CR,[Bn,cu]);ni(G1,DR,Bn);ni(K1,mle,Bn);ni(aL,H$,Bn);ni(Q$,vle,[Bn,ij]);ni(X$,wle,[Bn,ij]);ni(_l,kR,[Bn,Oo]);ni("".concat(_l,"-").concat(hm),kR,[Bn,Oo]);ni("".concat(_l,"-").concat(cu),q$,[Bn,Oo,cu]);ni("".concat(_l,"-").concat(G1),AR,[Bn,Oo]);ni("".concat(_l,"-").concat(K1),yle,[Bn,Oo]);ni("".concat(_l,"-").concat(aL),G$,[Bn,Oo]);ni("".concat(r0,"-").concat(hm),K$,[Bn,Oo]);ni("".concat(r0,"-").concat(cu),Z$,[Bn,Oo,cu]);ni("".concat(r0,"-").concat(G1),ER,[Bn,Oo]);ni("".concat(r0,"-").concat(K1),Cle,[Bn,Oo]);ni("".concat(r0,"-").concat(aL),Y$,[Bn,Oo]);ni(sT,U$,[Y1,sT]);ni(J$,$$,Y1);ni(ej,j$,Y1);ni(NR,sj,[Z1,Y1]);ni(TR,pR,Z1);ni(tj,MR,Z1);ni(rT,Lle,Z1);function Tle(i){return bd(BS,i)}function Q1(i,e){const t=BS[i];return t&&t.metadata[e]}function Nr(i){return Q1(i,Bn)}function af(i){return Q1(i,Z1)}function Yg(i){return Q1(i,Y1)}function rj(i){return Q1(i,cu)}function lL(i){return Q1(i,Oo)}function Nle(i,e){const t=e[0],n=ma(e)-t;return function(s){return i(t+s*n)}}function cL(i,e,t){return wR(oj(e||"rgb",t),i)}function Mle(i,e){const t=new Array(e),n=e+1;for(let s=0;s<e;)t[s]=i(++s/n);return t}function oj(i,e){const t=sle[Rle(i)];return e!=null&&t&&t.gamma?t.gamma(e):t}function Rle(i){return"interpolate"+i.toLowerCase().split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join("")}const Ole={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Ple={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function aj(i){const e=i.length/6|0,t=new Array(e);for(let n=0;n<e;)t[n]="#"+i.slice(n*6,++n*6);return t}function lj(i,e){for(const t in i)RR(t,e(i[t]))}const n6={};lj(Ple,aj);lj(Ole,i=>cL(aj(i)));function RR(i,e){return i=i&&i.toLowerCase(),arguments.length>1?(n6[i]=e,this):n6[i]}function Fle(i,e){var t=i.getBoundingClientRect();return[e.clientX-t.left-i.clientLeft,e.clientY-t.top-i.clientTop]}function OR(i,e){return i.length==e.length&&i.every((t,n)=>i[n]===e[n])}function bl(i){return Array.isArray(i)?i:typeof i<"u"?[i]:[]}function o0(i){return i[i.length-1]}class Ble{constructor(e){this.container=e,this.element=document.createElement("div"),this.element.className="tooltip",this._visible=!0,this.container.appendChild(this.element),this._previousTooltipDatum=void 0,this.enabledStack=[!0],this._penaltyUntil=0,this._lastCoords=void 0,this._previousMove=0,this.clear()}set visible(e){e!=this._visible&&(this.element.style.display=e?null:"none",this._visible=e)}get visible(){return this._visible}get enabled(){return o0(this.enabledStack)??!0}pushEnabledState(e){this.enabledStack.push(e),e||(this.visible=!1)}popEnabledState(){this.enabledStack.pop()}handleMouseMove(e){this.mouseCoords=Fle(this.container,e);const t=performance.now();!this.visible&&!this._isPenalty()&&t-this._previousMove>500&&(this._penaltyUntil=t+70),this._lastCoords&&Vle(this.mouseCoords,this._lastCoords)>20&&(this._penaltyUntil=t+400),this._lastCoords=this.mouseCoords,this.visible&&this.updatePlacement(),this._previousMove=t}updatePlacement(){const[e,t]=this.mouseCoords;let n=e+20;n>this.container.clientWidth-this.element.offsetWidth&&(n=e-20-this.element.offsetWidth),this.element.style.left=n+"px",this.element.style.top=Math.min(t+20,this.container.clientHeight-this.element.offsetHeight)+"px"}setContent(e){if(!e||!this.enabled||this._isPenalty()){this.visible&&(OB("",this.element),this.visible=!1),this._previousTooltipDatum=void 0;return}OB(e,this.element),this.visible=!0,this.updatePlacement()}clear(){this._previousTooltipDatum=void 0,this.setContent(void 0)}updateWithDatum(e,t){e!==this._previousTooltipDatum&&(this._previousTooltipDatum=e,t||(t=n=>Promise.resolve(Lh`${JSON.stringify(n)}`)),t(e).then(n=>this.setContent(n)).catch(n=>{if(n!=="debounced")throw n}))}_isPenalty(){return this._penaltyUntil&&this._penaltyUntil>performance.now()}}function Vle(i,e){let t=0;for(let n=0;n<i.length;n++)t+=(i[n]-e[n])**2;return Math.sqrt(t)}const Wle="RawCode",zle="Literal",Hle="Property",Ule="Identifier",$le="ArrayExpression",jle="BinaryExpression",qle="CallExpression",Gle="ConditionalExpression",Kle="LogicalExpression",Zle="MemberExpression",Yle="ObjectExpression",Qle="UnaryExpression";function Aa(i){this.type=i}Aa.prototype.visit=function(i){let e,t,n;if(i(this))return 1;for(e=Xle(this),t=0,n=e.length;t<n;++t)if(e[t].visit(i))return 1};function Xle(i){switch(i.type){case $le:return i.elements;case jle:case Kle:return[i.left,i.right];case qle:return[i.callee].concat(i.arguments);case Gle:return[i.test,i.consequent,i.alternate];case Zle:return[i.object,i.property];case Yle:return i.properties;case Hle:return[i.key,i.value];case Qle:return[i.argument];case Ule:case zle:case Wle:default:return[]}}var Bl,Be,le,Ds,ri,hL=1,X1=2,lf=3,Mu=4,uL=5,jf=6,lr=7,J1=8,Jle=9;Bl={};Bl[hL]="Boolean";Bl[X1]="<end>";Bl[lf]="Identifier";Bl[Mu]="Keyword";Bl[uL]="Null";Bl[jf]="Numeric";Bl[lr]="Punctuator";Bl[J1]="String";Bl[Jle]="RegularExpression";var ece="ArrayExpression",tce="BinaryExpression",ice="CallExpression",nce="ConditionalExpression",cj="Identifier",sce="Literal",rce="LogicalExpression",oce="MemberExpression",ace="ObjectExpression",lce="Property",cce="UnaryExpression",Qn="Unexpected token %0",hce="Unexpected number",uce="Unexpected string",dce="Unexpected identifier",fce="Unexpected reserved word",gce="Unexpected end of input",oT="Invalid regular expression",N2="Invalid regular expression: missing /",hj="Octal literals are not allowed in strict mode.",pce="Duplicate data property in object literal not allowed in strict mode",os="ILLEGAL",lv="Disabled.",mce=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),_ce=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function dL(i,e){if(!i)throw new Error("ASSERT: "+e)}function hc(i){return i>=48&&i<=57}function PR(i){return"0123456789abcdefABCDEF".indexOf(i)>=0}function G_(i){return"01234567".indexOf(i)>=0}function bce(i){return i===32||i===9||i===11||i===12||i===160||i>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(i)>=0}function cv(i){return i===10||i===13||i===8232||i===8233}function ew(i){return i===36||i===95||i>=65&&i<=90||i>=97&&i<=122||i===92||i>=128&&mce.test(String.fromCharCode(i))}function VS(i){return i===36||i===95||i>=65&&i<=90||i>=97&&i<=122||i>=48&&i<=57||i===92||i>=128&&_ce.test(String.fromCharCode(i))}const vce={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function uj(){for(;le<Ds;){const i=Be.charCodeAt(le);if(bce(i)||cv(i))++le;else break}}function aT(i){var e,t,n,s=0;for(t=i==="u"?4:2,e=0;e<t;++e)le<Ds&&PR(Be[le])?(n=Be[le++],s=s*16+"0123456789abcdef".indexOf(n.toLowerCase())):Kt({},Qn,os);return String.fromCharCode(s)}function wce(){var i,e,t,n;for(i=Be[le],e=0,i==="}"&&Kt({},Qn,os);le<Ds&&(i=Be[le++],!!PR(i));)e=e*16+"0123456789abcdef".indexOf(i.toLowerCase());return(e>1114111||i!=="}")&&Kt({},Qn,os),e<=65535?String.fromCharCode(e):(t=(e-65536>>10)+55296,n=(e-65536&1023)+56320,String.fromCharCode(t,n))}function dj(){var i,e;for(i=Be.charCodeAt(le++),e=String.fromCharCode(i),i===92&&(Be.charCodeAt(le)!==117&&Kt({},Qn,os),++le,i=aT("u"),(!i||i==="\\"||!ew(i.charCodeAt(0)))&&Kt({},Qn,os),e=i);le<Ds&&(i=Be.charCodeAt(le),!!VS(i));)++le,e+=String.fromCharCode(i),i===92&&(e=e.substr(0,e.length-1),Be.charCodeAt(le)!==117&&Kt({},Qn,os),++le,i=aT("u"),(!i||i==="\\"||!VS(i.charCodeAt(0)))&&Kt({},Qn,os),e+=i);return e}function yce(){var i,e;for(i=le++;le<Ds;){if(e=Be.charCodeAt(le),e===92)return le=i,dj();if(VS(e))++le;else break}return Be.slice(i,le)}function Cce(){var i,e,t;return i=le,e=Be.charCodeAt(le)===92?dj():yce(),e.length===1?t=lf:vce.hasOwnProperty(e)?t=Mu:e==="null"?t=uL:e==="true"||e==="false"?t=hL:t=lf,{type:t,value:e,start:i,end:le}}function M2(){var i=le,e=Be.charCodeAt(le),t,n=Be[le],s,r,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++le,{type:lr,value:String.fromCharCode(e),start:i,end:le};default:if(t=Be.charCodeAt(le+1),t===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return le+=2,{type:lr,value:String.fromCharCode(e)+String.fromCharCode(t),start:i,end:le};case 33:case 61:return le+=2,Be.charCodeAt(le)===61&&++le,{type:lr,value:Be.slice(i,le),start:i,end:le}}}if(o=Be.substr(le,4),o===">>>=")return le+=4,{type:lr,value:o,start:i,end:le};if(r=o.substr(0,3),r===">>>"||r==="<<="||r===">>=")return le+=3,{type:lr,value:r,start:i,end:le};if(s=r.substr(0,2),n===s[1]&&"+-<>&|".indexOf(n)>=0||s==="=>")return le+=2,{type:lr,value:s,start:i,end:le};if(s==="//"&&Kt({},Qn,os),"<>=!+-*%&|^/".indexOf(n)>=0)return++le,{type:lr,value:n,start:i,end:le};Kt({},Qn,os)}function Sce(i){let e="";for(;le<Ds&&PR(Be[le]);)e+=Be[le++];return e.length===0&&Kt({},Qn,os),ew(Be.charCodeAt(le))&&Kt({},Qn,os),{type:jf,value:parseInt("0x"+e,16),start:i,end:le}}function xce(i){let e="0"+Be[le++];for(;le<Ds&&G_(Be[le]);)e+=Be[le++];return(ew(Be.charCodeAt(le))||hc(Be.charCodeAt(le)))&&Kt({},Qn,os),{type:jf,value:parseInt(e,8),octal:!0,start:i,end:le}}function s6(){var i,e,t;if(t=Be[le],dL(hc(t.charCodeAt(0))||t===".","Numeric literal must start with a decimal digit or a decimal point"),e=le,i="",t!=="."){if(i=Be[le++],t=Be[le],i==="0"){if(t==="x"||t==="X")return++le,Sce(e);if(G_(t))return xce(e);t&&hc(t.charCodeAt(0))&&Kt({},Qn,os)}for(;hc(Be.charCodeAt(le));)i+=Be[le++];t=Be[le]}if(t==="."){for(i+=Be[le++];hc(Be.charCodeAt(le));)i+=Be[le++];t=Be[le]}if(t==="e"||t==="E")if(i+=Be[le++],t=Be[le],(t==="+"||t==="-")&&(i+=Be[le++]),hc(Be.charCodeAt(le)))for(;hc(Be.charCodeAt(le));)i+=Be[le++];else Kt({},Qn,os);return ew(Be.charCodeAt(le))&&Kt({},Qn,os),{type:jf,value:parseFloat(i),start:e,end:le}}function Dce(){var i="",e,t,n,s,r=!1;for(e=Be[le],dL(e==="'"||e==='"',"String literal must starts with a quote"),t=le,++le;le<Ds;)if(n=Be[le++],n===e){e="";break}else if(n==="\\")if(n=Be[le++],!n||!cv(n.charCodeAt(0)))switch(n){case"u":case"x":Be[le]==="{"?(++le,i+=wce()):i+=aT(n);break;case"n":i+=`
`;break;case"r":i+="\r";break;case"t":i+="	";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:G_(n)?(s="01234567".indexOf(n),s!==0&&(r=!0),le<Ds&&G_(Be[le])&&(r=!0,s=s*8+"01234567".indexOf(Be[le++]),"0123".indexOf(n)>=0&&le<Ds&&G_(Be[le])&&(s=s*8+"01234567".indexOf(Be[le++]))),i+=String.fromCharCode(s)):i+=n;break}else n==="\r"&&Be[le]===`
`&&++le;else{if(cv(n.charCodeAt(0)))break;i+=n}return e!==""&&Kt({},Qn,os),{type:J1,value:i,octal:r,start:t,end:le}}function Lce(i,e){let t=i;e.indexOf("u")>=0&&(t=t.replace(/\\u\{([0-9a-fA-F]+)\}/g,(n,s)=>{if(parseInt(s,16)<=1114111)return"x";Kt({},oT)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(t)}catch{Kt({},oT)}try{return new RegExp(i,e)}catch{return null}}function kce(){var i,e,t,n,s;for(i=Be[le],dL(i==="/","Regular expression literal must start with a slash"),e=Be[le++],t=!1,n=!1;le<Ds;)if(i=Be[le++],e+=i,i==="\\")i=Be[le++],cv(i.charCodeAt(0))&&Kt({},N2),e+=i;else if(cv(i.charCodeAt(0)))Kt({},N2);else if(t)i==="]"&&(t=!1);else if(i==="/"){n=!0;break}else i==="["&&(t=!0);return n||Kt({},N2),s=e.substr(1,e.length-2),{value:s,literal:e}}function Ace(){var i,e,t;for(e="",t="";le<Ds&&(i=Be[le],!!VS(i.charCodeAt(0)));)++le,i==="\\"&&le<Ds?Kt({},Qn,os):(t+=i,e+=i);return t.search(/[^gimuy]/g)>=0&&Kt({},oT,t),{value:t,literal:e}}function Ece(){var i,e,t,n;return ri=null,uj(),i=le,e=kce(),t=Ace(),n=Lce(e.value,t.value),{literal:e.literal+t.literal,value:n,regex:{pattern:e.value,flags:t.value},start:i,end:le}}function Ice(i){return i.type===lf||i.type===Mu||i.type===hL||i.type===uL}function fj(){if(uj(),le>=Ds)return{type:X1,start:le,end:le};const i=Be.charCodeAt(le);return ew(i)?Cce():i===40||i===41||i===59?M2():i===39||i===34?Dce():i===46?hc(Be.charCodeAt(le+1))?s6():M2():hc(i)?s6():M2()}function cr(){const i=ri;return le=i.end,ri=fj(),le=i.end,i}function gj(){const i=le;ri=fj(),le=i}function Tce(i){const e=new Aa(ece);return e.elements=i,e}function r6(i,e,t){const n=new Aa(i==="||"||i==="&&"?rce:tce);return n.operator=i,n.left=e,n.right=t,n}function Nce(i,e){const t=new Aa(ice);return t.callee=i,t.arguments=e,t}function Mce(i,e,t){const n=new Aa(nce);return n.test=i,n.consequent=e,n.alternate=t,n}function FR(i){const e=new Aa(cj);return e.name=i,e}function D_(i){const e=new Aa(sce);return e.value=i.value,e.raw=Be.slice(i.start,i.end),i.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=i.regex),e}function o6(i,e,t){const n=new Aa(oce);return n.computed=i==="[",n.object=e,n.property=t,n.computed||(t.member=!0),n}function Rce(i){const e=new Aa(ace);return e.properties=i,e}function a6(i,e,t){const n=new Aa(lce);return n.key=e,n.value=t,n.kind=i,n}function Oce(i,e){const t=new Aa(cce);return t.operator=i,t.argument=e,t.prefix=!0,t}function Kt(i,e){var t,n=Array.prototype.slice.call(arguments,2),s=e.replace(/%(\d)/g,(r,o)=>(dL(o<n.length,"Message reference must be in range"),n[o]));throw t=new Error(s),t.index=le,t.description=s,t}function fL(i){i.type===X1&&Kt(i,gce),i.type===jf&&Kt(i,hce),i.type===J1&&Kt(i,uce),i.type===lf&&Kt(i,dce),i.type===Mu&&Kt(i,fce),Kt(i,Qn,i.value)}function Ls(i){const e=cr();(e.type!==lr||e.value!==i)&&fL(e)}function Ni(i){return ri.type===lr&&ri.value===i}function R2(i){return ri.type===Mu&&ri.value===i}function Pce(){const i=[];for(le=ri.start,Ls("[");!Ni("]");)Ni(",")?(cr(),i.push(null)):(i.push(cf()),Ni("]")||Ls(","));return cr(),Tce(i)}function l6(){le=ri.start;const i=cr();return i.type===J1||i.type===jf?(i.octal&&Kt(i,hj),D_(i)):FR(i.value)}function Fce(){var i,e,t,n;if(le=ri.start,i=ri,i.type===lf)return t=l6(),Ls(":"),n=cf(),a6("init",t,n);if(i.type===X1||i.type===lr)fL(i);else return e=l6(),Ls(":"),n=cf(),a6("init",e,n)}function Bce(){var i=[],e,t,n,s={},r=String;for(le=ri.start,Ls("{");!Ni("}");)e=Fce(),e.key.type===cj?t=e.key.name:t=r(e.key.value),n="$"+t,Object.prototype.hasOwnProperty.call(s,n)?Kt({},pce):s[n]=!0,i.push(e),Ni("}")||Ls(",");return Ls("}"),Rce(i)}function Vce(){Ls("(");const i=BR();return Ls(")"),i}const Wce={if:1};function zce(){var i,e,t;if(Ni("("))return Vce();if(Ni("["))return Pce();if(Ni("{"))return Bce();if(i=ri.type,le=ri.start,i===lf||Wce[ri.value])t=FR(cr().value);else if(i===J1||i===jf)ri.octal&&Kt(ri,hj),t=D_(cr());else{if(i===Mu)throw new Error(lv);i===hL?(e=cr(),e.value=e.value==="true",t=D_(e)):i===uL?(e=cr(),e.value=null,t=D_(e)):Ni("/")||Ni("/=")?(t=D_(Ece()),gj()):fL(cr())}return t}function Hce(){const i=[];if(Ls("("),!Ni(")"))for(;le<Ds&&(i.push(cf()),!Ni(")"));)Ls(",");return Ls(")"),i}function Uce(){le=ri.start;const i=cr();return Ice(i)||fL(i),FR(i.value)}function $ce(){return Ls("."),Uce()}function jce(){Ls("[");const i=BR();return Ls("]"),i}function qce(){var i,e,t;for(i=zce();;)if(Ni("."))t=$ce(),i=o6(".",i,t);else if(Ni("("))e=Hce(),i=Nce(i,e);else if(Ni("["))t=jce(),i=o6("[",i,t);else break;return i}function c6(){const i=qce();if(ri.type===lr&&(Ni("++")||Ni("--")))throw new Error(lv);return i}function yC(){var i,e;if(ri.type!==lr&&ri.type!==Mu)e=c6();else{if(Ni("++")||Ni("--"))throw new Error(lv);if(Ni("+")||Ni("-")||Ni("~")||Ni("!"))i=cr(),e=yC(),e=Oce(i.value,e);else{if(R2("delete")||R2("void")||R2("typeof"))throw new Error(lv);e=c6()}}return e}function h6(i){let e=0;if(i.type!==lr&&i.type!==Mu)return 0;switch(i.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function Gce(){var i,e,t,n,s,r,o,a,l,c;if(i=ri,l=yC(),n=ri,s=h6(n),s===0)return l;for(n.prec=s,cr(),e=[i,ri],o=yC(),r=[l,n,o];(s=h6(ri))>0;){for(;r.length>2&&s<=r[r.length-2].prec;)o=r.pop(),a=r.pop().value,l=r.pop(),e.pop(),t=r6(a,l,o),r.push(t);n=cr(),n.prec=s,r.push(n),e.push(ri),t=yC(),r.push(t)}for(c=r.length-1,t=r[c],e.pop();c>1;)e.pop(),t=r6(r[c-1].value,r[c-2],t),c-=2;return t}function cf(){var i,e,t;return i=Gce(),Ni("?")&&(cr(),e=cf(),Ls(":"),t=cf(),i=Mce(i,e,t)),i}function BR(){const i=cf();if(Ni(","))throw new Error(lv);return i}function Kce(i){Be=i,le=0,Ds=Be.length,ri=null,gj();const e=BR();if(ri.type!==X1)throw new Error("Unexpect token after expression.");return e}var Zce={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Yce(i){function e(o,a,l,c){let h=i(a[0]);return l&&(h=l+"("+h+")",l.lastIndexOf("new ",0)===0&&(h="("+h+")")),h+"."+o+(c<0?"":c===0?"()":"("+a.slice(1).map(i).join(",")+")")}function t(o,a,l){return c=>e(o,c,a,l)}const n="new Date",s="String",r="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Yi("Missing arguments to clamp function."),o.length>3&&Yi("Too many arguments to clamp function.");const a=o.map(i);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",s,0),lower:t("toLowerCase",s,0),substring:t("substring",s),split:t("split",s),trim:t("trim",s,0),regexp:r,test:t("test",r),if:function(o){o.length<3&&Yi("Missing arguments to if function."),o.length>3&&Yi("Too many arguments to if function.");const a=o.map(i);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function Qce(i){const e=i&&i.length-1;return e&&(i[0]==='"'&&i[e]==='"'||i[0]==="'"&&i[e]==="'")?i.slice(1,-1):i}function Xce(i){i=i||{};const e=i.allowed?LS(i.allowed):{},t=i.forbidden?LS(i.forbidden):{},n=i.constants||Zce,s=(i.functions||Yce)(u),r=i.globalvar,o=i.fieldvar,a=wr(r)?r:g=>`${r}["${g}"]`;let l={},c={},h=0;function u(g){if(Xi(g))return g;const p=d[g.type];return p==null&&Yi("Unsupported type: "+g.type),p(g)}const d={Literal:g=>g.raw,Identifier:g=>{const p=g.name;return h>0?p:bd(t,p)?Yi("Illegal identifier: "+p):bd(n,p)?n[p]:bd(e,p)?p:(l[p]=1,a(p))},MemberExpression:g=>{const p=!g.computed,m=u(g.object);p&&(h+=1);const v=u(g.property);return m===o&&(c[Qce(v)]=1),p&&(h-=1),m+(p?"."+v:"["+v+"]")},CallExpression:g=>{g.callee.type!=="Identifier"&&Yi("Illegal callee type: "+g.callee.type);const p=g.callee.name,m=g.arguments,v=bd(s,p)&&s[p];return v||Yi("Unrecognized function: "+p),wr(v)?v(m):v+"("+m.map(u).join(",")+")"},ArrayExpression:g=>"["+g.elements.map(u).join(",")+"]",BinaryExpression:g=>"("+u(g.left)+" "+g.operator+" "+u(g.right)+")",UnaryExpression:g=>"("+g.operator+u(g.argument)+")",ConditionalExpression:g=>"("+u(g.test)+"?"+u(g.consequent)+":"+u(g.alternate)+")",LogicalExpression:g=>"("+u(g.left)+g.operator+u(g.right)+")",ObjectExpression:g=>"{"+g.properties.map(u).join(",")+"}",Property:g=>{h+=1;const p=u(g.key);return h-=1,p+":"+u(g.value)}};function f(g){const p={code:u(g),globals:Object.keys(l),fields:Object.keys(c)};return l={},c={},p}return f.functions=s,f.constants=n,f}function VR(i,e={}){const t=Xce({forbidden:[],allowed:["datum"],globalvar:"global",fieldvar:"datum"});try{const n=Kce(i),s=t(n),r=Function("datum","global",`"use strict"; return (${s.code});`),o=a=>r(a,e);return o.fields=s.fields,o}catch(n){throw new Error(`Invalid expression: ${i}, ${n.message}`)}}function Jce(){let i=0;const e=new Map,t=n=>{let s=e.get(n);return s===void 0&&(s=i++,e.set(n,s)),s};return t.addAll=n=>{for(const s of n)t(s)},t.invert=n=>{for(const s of e.entries())if(s[1]==n)return s[0]},t.domain=()=>[...e.keys()],t}function ehe(i,e){const t={};e||(e=i.encoding);for(const[n,s]of Object.entries(e)){if(!s)continue;const r=i.unitView.getScaleResolution(yo(s)&&s.resolutionChannel||n);t[n]=the(e[n],r==null?void 0:r.getScale(),i.unitView.getAccessor(n),n)}return t}function the(i,e,t,n){let s;if(_a(i)){const r=i.value;s=o=>r,s.constant=!0,s.constantValue=!0,s.accessor=void 0}else if(t)if(n=="text")s=r=>{},s.accessor=t,s.constant=t.constant;else{if(!e)throw new Error(`Missing scale! "${n}": ${JSON.stringify(i)}`);if(s=r=>e(t(r)),af(e.type)){const r=Jce();r.addAll(e.domain()),s.indexer=r}s.constant=t.constant,s.accessor=t,s.scale=e}else throw new Error(`Missing value or accessor (field, expr, datum) on channel "${n}": ${JSON.stringify(i)}`);return s.invert=e?r=>e.invert(r):r=>{throw new Error("No scale available, cannot invert: "+JSON.stringify(i))},s.channelDef=i,s.applyMetadata=r=>{for(const o in s)o in s&&(r[o]=s[o]);return r},s}function _a(i){return i&&"value"in i}function tw(i){return i&&"field"in i}function iw(i){return i&&"datum"in i}function yo(i){return tw(i)||iw(i)||WR(i)||pj(i)}function lT(i,e){const t=i.mark.encoding[e];if(yo(t))return t;throw new Error("Not a channel def with scale!")}function pj(i){return i&&"chrom"in i}function WR(i){return i&&"expr"in i}const nw=["x","y"],ihe=["x2","y2"],nhe=[...nw,...ihe];function mj(i){return nw.includes(i)}function hv(i){return nhe.includes(i)}const zR={x:"x2",y:"y2"},_j=Object.fromEntries(Object.entries(zR).map(i=>[i[1],i[0]]));function K_(i){return i in _j}function she(i){const e=zR[i];if(e)return e;throw new Error(`${i} has no secondary channel!`)}function a0(i){return _j[i]??i}function Bd(i){return["color","fill","stroke"].includes(a0(i))}function gL(i){return["shape","squeeze"].includes(i)}function bj(i){switch(i){case"shape":return["circle","square","triangle-up","cross","diamond","triangle-down","triangle-right","triangle-left"]}}function vj(i){if(!gL(i))throw new Error("Not a discrete channel: "+i);const e=new Map(bj(i).map((t,n)=>[t,n]));return t=>{const n=e.get(t);if(n!==void 0)return n;throw new Error(`Invalid value for "${i}" channel: ${t}`)}}function Di(i,e=i){if(/^[A-Za-z0-9_]+$/.test(i)){const t=new Function("datum",`return datum[${JSON.stringify(i)}]`);return Au(t,[i],e)}else return $D(i)}class rhe{constructor(){this.accessorCreators=[],this.register(e=>{if(tw(e))try{const t=Di(e.field);return t.constant=!1,t.fields=bU(t),t}catch(t){throw new Error(`Invalid field definition: ${t.message}`)}}),this.register(e=>WR(e)?ohe(e.expr):void 0),this.register(e=>{if(iw(e)){const t=Ose(e.datum);return t.constant=!0,t.fields=[],t}})}register(e){this.accessorCreators.push(e)}createAccessor(e){for(const t of this.accessorCreators){const n=t(e);if(n)return n}}}function ohe(i){const e=VR(i);return e.constant=e.fields.length==0,e}/* @license twgl.js 4.22.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */const HR=5120,UR=5121,$R=5122,jR=5123,qR=5124,GR=5125,KR=5126,ahe=32819,lhe=32820,che=33635,hhe=5131,uhe=33640,dhe=35899,fhe=35902,ghe=36269,phe=34042,wj={};{const i=wj;i[HR]=Int8Array,i[UR]=Uint8Array,i[$R]=Int16Array,i[jR]=Uint16Array,i[qR]=Int32Array,i[GR]=Uint32Array,i[KR]=Float32Array,i[ahe]=Uint16Array,i[lhe]=Uint16Array,i[che]=Uint16Array,i[hhe]=Uint16Array,i[uhe]=Uint32Array,i[dhe]=Uint32Array,i[fhe]=Uint32Array,i[ghe]=Uint32Array,i[phe]=Uint32Array}function ZR(i){if(i instanceof Int8Array)return HR;if(i instanceof Uint8Array||i instanceof Uint8ClampedArray)return UR;if(i instanceof Int16Array)return $R;if(i instanceof Uint16Array)return jR;if(i instanceof Int32Array)return qR;if(i instanceof Uint32Array)return GR;if(i instanceof Float32Array)return KR;throw new Error("unsupported typed array type")}function mhe(i){if(i===Int8Array)return HR;if(i===Uint8Array||i===Uint8ClampedArray)return UR;if(i===Int16Array)return $R;if(i===Uint16Array)return jR;if(i===Int32Array)return qR;if(i===Uint32Array)return GR;if(i===Float32Array)return KR;throw new Error("unsupported typed array type")}function _he(i){const e=wj[i];if(!e)throw new Error("unknown gl type");return e}const WS=typeof SharedArrayBuffer<"u"?function(i){return i&&i.buffer&&(i.buffer instanceof ArrayBuffer||i.buffer instanceof SharedArrayBuffer)}:function(i){return i&&i.buffer&&i.buffer instanceof ArrayBuffer};function bhe(...i){console.error(...i)}function yj(...i){console.warn(...i)}function vhe(i,e){return typeof WebGLBuffer<"u"&&e instanceof WebGLBuffer}function Cj(i,e){return typeof WebGLRenderbuffer<"u"&&e instanceof WebGLRenderbuffer}function pL(i,e){return typeof WebGLTexture<"u"&&e instanceof WebGLTexture}function whe(i,e){return typeof WebGLSampler<"u"&&e instanceof WebGLSampler}const Sj=35044,vl=34962,yhe=34963,Che=34660,She=5120,xhe=5121,Dhe=5122,Lhe=5123,khe=5124,Ahe=5125,Ehe=5126,xj={attribPrefix:""};function Dj(i,e,t,n,s){i.bindBuffer(e,t),i.bufferData(e,n,s||Sj)}function Lj(i,e,t,n){if(vhe(i,e))return e;t=t||vl;const s=i.createBuffer();return Dj(i,t,s,e,n),s}function kj(i){return i==="indices"}function Ihe(i){return i instanceof Int8Array||i instanceof Uint8Array}function The(i){return i===Int8Array||i===Uint8Array}function Nhe(i){return i.length?i:i.data}const Mhe=/coord|texture/i,Rhe=/color|colour/i;function Aj(i,e){let t;if(Mhe.test(i)?t=2:Rhe.test(i)?t=4:t=3,e%t>0)throw new Error(`Can not guess numComponents for attribute '${i}'. Tried ${t} but ${e} values is not evenly divisible by ${t}. You should specify it.`);return t}function Ohe(i,e){return i.numComponents||i.size||Aj(e,Nhe(i).length)}function YR(i,e){if(WS(i))return i;if(WS(i.data))return i.data;Array.isArray(i)&&(i={data:i});let t=i.type;return t||(kj(e)?t=Uint16Array:t=Float32Array),new t(i.data)}function Phe(i,e){const t={};return Object.keys(e).forEach(function(n){if(!kj(n)){const s=e[n],r=s.attrib||s.name||s.attribName||xj.attribPrefix+n;if(s.value){if(!Array.isArray(s.value)&&!WS(s.value))throw new Error("array.value is not array or typedarray");t[r]={value:s.value}}else{let o,a,l,c;if(s.buffer&&s.buffer instanceof WebGLBuffer)o=s.buffer,c=s.numComponents||s.size,a=s.type,l=s.normalize;else if(typeof s=="number"||typeof s.data=="number"){const h=s.data||s,u=s.type||Float32Array,d=h*u.BYTES_PER_ELEMENT;a=mhe(u),l=s.normalize!==void 0?s.normalize:The(u),c=s.numComponents||s.size||Aj(n,h),o=i.createBuffer(),i.bindBuffer(vl,o),i.bufferData(vl,d,s.drawType||Sj)}else{const h=YR(s,n);o=Lj(i,h,void 0,s.drawType),a=ZR(h),l=s.normalize!==void 0?s.normalize:Ihe(h),c=Ohe(s,n)}t[r]={buffer:o,numComponents:c,type:a,normalize:l,stride:s.stride||0,offset:s.offset||0,divisor:s.divisor===void 0?void 0:s.divisor,drawType:s.drawType}}}}),i.bindBuffer(vl,null),t}function Fhe(i,e,t,n){t=YR(t),n!==void 0?(i.bindBuffer(vl,e.buffer),i.bufferSubData(vl,n,t)):Dj(i,vl,e.buffer,t,e.drawType)}function Bhe(i,e){return e===She||e===xhe?1:e===Dhe||e===Lhe?2:e===khe||e===Ahe||e===Ehe?4:0}const O2=["position","positions","a_position"];function Vhe(i,e){let t,n;for(n=0;n<O2.length&&(t=O2[n],!(t in e||(t=xj.attribPrefix+t,t in e)));++n);n===O2.length&&(t=Object.keys(e)[0]);const s=e[t];i.bindBuffer(vl,s.buffer);const r=i.getBufferParameter(vl,Che);i.bindBuffer(vl,null);const o=Bhe(i,s.type),a=r/o,l=s.numComponents||s.size,c=a/l;if(c%1!==0)throw new Error(`numComponents ${l} not correct for length ${length}`);return c}function Whe(i,e,t){const n=Phe(i,e),s=Object.assign({},t||{});s.attribs=Object.assign({},t?t.attribs:{},n);const r=e.indices;if(r){const o=YR(r,"indices");s.indices=Lj(i,o,yhe),s.numElements=o.length,s.elementType=ZR(o)}else s.numElements||(s.numElements=Vhe(i,s.attribs));return s}function l0(i){return!!i.texStorage2D}const cT=function(){const i={},e={};function t(n){const s=n.constructor.name;if(!i[s]){for(const r in n)if(typeof n[r]=="number"){const o=e[n[r]];e[n[r]]=o?`${o} | ${r}`:r}i[s]=!0}}return function(n,s){return t(n),e[s]||(typeof s=="number"?`0x${s.toString(16)}`:s)}}(),Ru={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},um=WS,Ej=function(){let i;return function(){return i=i||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),i}}(),u6=6406,Wa=6407,Ki=6408,d6=6409,f6=6410,Y0=6402,g6=34041,zS=33071,zhe=9728,Hhe=9729,Yc=3553,Hc=34067,hu=32879,uu=35866,mL=34069,Uhe=34070,$he=34071,jhe=34072,qhe=34073,Ghe=34074,hT=10241,uT=10240,HS=10242,US=10243,p6=32882,Khe=33082,Zhe=33083,Yhe=33084,Qhe=33085,QR=3317,Ij=3314,Tj=32878,Nj=3316,Mj=3315,Rj=32877,Xhe=37443,Jhe=37441,eue=37440,tue=33321,iue=36756,nue=33325,sue=33326,rue=33330,oue=33329,aue=33338,lue=33337,cue=33340,hue=33339,uue=33323,due=36757,fue=33327,gue=33328,pue=33336,mue=33335,_ue=33332,bue=33331,vue=33334,wue=33333,yue=32849,Cue=35905,Sue=36194,xue=36758,Due=35898,Lue=35901,kue=34843,Aue=34837,Eue=36221,Iue=36239,Tue=36215,Nue=36233,Mue=36209,Rue=36227,Oue=32856,Pue=35907,Fue=36759,Bue=32855,Vue=32854,Wue=32857,zue=34842,Hue=34836,Uue=36220,$ue=36238,jue=36975,que=36214,Gue=36232,Kue=36226,Zue=36208,Yue=33189,Que=33190,Xue=36012,Jue=36013,ede=35056,rh=5120,ji=5121,Qw=5122,Sg=5123,Xw=5124,qu=5125,ms=5126,m6=32819,_6=32820,b6=33635,Wo=5131,Q0=36193,P2=33640,tde=35899,ide=35902,nde=36269,sde=34042,Jw=33319,xg=33320,ey=6403,Dg=36244,Lg=36248,Gu=36249;let F2;function _L(i){if(!F2){const e={};e[u6]={textureFormat:u6,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[ji,Wo,Q0,ms]},e[d6]={textureFormat:d6,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[ji,Wo,Q0,ms]},e[f6]={textureFormat:f6,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[ji,Wo,Q0,ms]},e[Wa]={textureFormat:Wa,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[ji,Wo,Q0,ms,b6]},e[Ki]={textureFormat:Ki,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[ji,Wo,Q0,ms,m6,_6]},e[Y0]={textureFormat:Y0,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[qu,Sg]},e[tue]={textureFormat:ey,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[ji]},e[iue]={textureFormat:ey,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[rh]},e[nue]={textureFormat:ey,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[ms,Wo]},e[sue]={textureFormat:ey,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[ms]},e[rue]={textureFormat:Dg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[ji]},e[oue]={textureFormat:Dg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[rh]},e[_ue]={textureFormat:Dg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Sg]},e[bue]={textureFormat:Dg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Qw]},e[vue]={textureFormat:Dg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[qu]},e[wue]={textureFormat:Dg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Xw]},e[uue]={textureFormat:Jw,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[ji]},e[due]={textureFormat:Jw,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[rh]},e[fue]={textureFormat:Jw,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[ms,Wo]},e[gue]={textureFormat:Jw,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[ms]},e[pue]={textureFormat:xg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[ji]},e[mue]={textureFormat:xg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[rh]},e[aue]={textureFormat:xg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Sg]},e[lue]={textureFormat:xg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Qw]},e[cue]={textureFormat:xg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[qu]},e[hue]={textureFormat:xg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Xw]},e[yue]={textureFormat:Wa,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[ji]},e[Cue]={textureFormat:Wa,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[ji]},e[Sue]={textureFormat:Wa,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[ji,b6]},e[xue]={textureFormat:Wa,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[rh]},e[Due]={textureFormat:Wa,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[ms,Wo,tde]},e[Lue]={textureFormat:Wa,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[ms,Wo,ide]},e[kue]={textureFormat:Wa,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[ms,Wo]},e[Aue]={textureFormat:Wa,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[ms]},e[Eue]={textureFormat:Lg,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[ji]},e[Iue]={textureFormat:Lg,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[rh]},e[Tue]={textureFormat:Lg,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Sg]},e[Nue]={textureFormat:Lg,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Qw]},e[Mue]={textureFormat:Lg,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[qu]},e[Rue]={textureFormat:Lg,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Xw]},e[Oue]={textureFormat:Ki,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[ji]},e[Pue]={textureFormat:Ki,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[ji]},e[Fue]={textureFormat:Ki,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[rh]},e[Bue]={textureFormat:Ki,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[ji,_6,P2]},e[Vue]={textureFormat:Ki,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[ji,m6]},e[Wue]={textureFormat:Ki,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[P2]},e[zue]={textureFormat:Ki,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[ms,Wo]},e[Hue]={textureFormat:Ki,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[ms]},e[Uue]={textureFormat:Gu,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ji]},e[$ue]={textureFormat:Gu,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[rh]},e[jue]={textureFormat:Gu,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[P2]},e[que]={textureFormat:Gu,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Sg]},e[Gue]={textureFormat:Gu,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Qw]},e[Kue]={textureFormat:Gu,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Xw]},e[Zue]={textureFormat:Gu,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[qu]},e[Yue]={textureFormat:Y0,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Sg,qu]},e[Que]={textureFormat:Y0,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[qu]},e[Xue]={textureFormat:Y0,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ms]},e[ede]={textureFormat:g6,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[sde]},e[Jue]={textureFormat:g6,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[nde]},Object.keys(e).forEach(function(t){const n=e[t];n.bytesPerElementMap={},n.bytesPerElement.forEach(function(s,r){const o=n.type[r];n.bytesPerElementMap[o]=s})}),F2=e}return F2[i]}function rde(i,e){const t=_L(i);if(!t)throw"unknown internal format";const n=t.bytesPerElementMap[e];if(n===void 0)throw"unknown internal format";return n}function c0(i){const e=_L(i);if(!e)throw"unknown internal format";return{format:e.textureFormat,type:e.type[0]}}function v6(i){return(i&i-1)===0}function ode(i,e,t,n){if(!l0(i))return v6(e)&&v6(t);const s=_L(n);if(!s)throw"unknown internal format";return s.colorRenderable&&s.textureFilterable}function ade(i){const e=_L(i);if(!e)throw"unknown internal format";return e.textureFilterable}function Oj(i,e,t){return um(e)?ZR(e):t||ji}function ty(i,e,t,n,s){if(s%1!==0)throw"can't guess dimensions";if(!t&&!n){const r=Math.sqrt(s/(e===Hc?6:1));r%1===0?(t=r,n=r):(t=s,n=1)}else if(n){if(!t&&(t=s/n,t%1))throw"can't guess dimensions"}else if(n=s/t,n%1)throw"can't guess dimensions";return{width:t,height:n}}function dm(i,e){e.colorspaceConversion!==void 0&&i.pixelStorei(Xhe,e.colorspaceConversion),e.premultiplyAlpha!==void 0&&i.pixelStorei(Jhe,e.premultiplyAlpha),e.flipY!==void 0&&i.pixelStorei(eue,e.flipY)}function Pj(i){i.pixelStorei(QR,4),l0(i)&&(i.pixelStorei(Ij,0),i.pixelStorei(Tj,0),i.pixelStorei(Nj,0),i.pixelStorei(Mj,0),i.pixelStorei(Rj,0))}function lde(i,e,t,n){n.minMag&&(t.call(i,e,hT,n.minMag),t.call(i,e,uT,n.minMag)),n.min&&t.call(i,e,hT,n.min),n.mag&&t.call(i,e,uT,n.mag),n.wrap&&(t.call(i,e,HS,n.wrap),t.call(i,e,US,n.wrap),(e===hu||whe(i,e))&&t.call(i,e,p6,n.wrap)),n.wrapR&&t.call(i,e,p6,n.wrapR),n.wrapS&&t.call(i,e,HS,n.wrapS),n.wrapT&&t.call(i,e,US,n.wrapT),n.minLod&&t.call(i,e,Khe,n.minLod),n.maxLod&&t.call(i,e,Zhe,n.maxLod),n.baseLevel&&t.call(i,e,Yhe,n.baseLevel),n.maxLevel&&t.call(i,e,Qhe,n.maxLevel)}function Fj(i,e,t){const n=t.target||Yc;i.bindTexture(n,e),lde(i,n,i.texParameteri,t)}function cde(i){return i=i||Ru.textureColor,um(i)?i:new Uint8Array([i[0]*255,i[1]*255,i[2]*255,i[3]*255])}function dT(i,e,t,n,s,r){t=t||Ru.textureOptions,r=r||Ki;const o=t.target||Yc;if(n=n||t.width,s=s||t.height,i.bindTexture(o,e),ode(i,n,s,r))i.generateMipmap(o);else{const a=ade(r)?Hhe:zhe;i.texParameteri(o,hT,a),i.texParameteri(o,uT,a),i.texParameteri(o,HS,zS),i.texParameteri(o,US,zS)}}function uv(i){return i.auto===!0||i.auto===void 0&&i.level===void 0}function fT(i,e){return e=e||{},e.cubeFaceOrder||[mL,Uhe,$he,jhe,qhe,Ghe]}function gT(i,e){const t=fT(i,e).map(function(n,s){return{face:n,ndx:s}});return t.sort(function(n,s){return n.face-s.face}),t}function Bj(i,e,t,n){n=n||Ru.textureOptions;const s=n.target||Yc,r=n.level||0;let o=t.width,a=t.height;const l=n.internalFormat||n.format||Ki,c=c0(l),h=n.format||c.format,u=n.type||c.type;if(dm(i,n),i.bindTexture(s,e),s===Hc){const d=t.width,f=t.height;let g,p;if(d/6===f)g=f,p=[0,0,1,0,2,0,3,0,4,0,5,0];else if(f/6===d)g=d,p=[0,0,0,1,0,2,0,3,0,4,0,5];else if(d/3===f/2)g=d/3,p=[0,0,1,0,2,0,0,1,1,1,2,1];else if(d/2===f/3)g=d/2,p=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(t.src?t.src:t.nodeName);const m=Ej();m?(m.canvas.width=g,m.canvas.height=g,o=g,a=g,gT(i,n).forEach(function(v){const b=p[v.ndx*2+0]*g,w=p[v.ndx*2+1]*g;m.drawImage(t,b,w,g,g,0,0,g,g),i.texImage2D(v.face,r,l,h,u,m.canvas)}),m.canvas.width=1,m.canvas.height=1):typeof createImageBitmap<"u"&&(o=g,a=g,gT(i,n).forEach(function(v){const b=p[v.ndx*2+0]*g,w=p[v.ndx*2+1]*g;i.texImage2D(v.face,r,l,g,g,0,h,u,null),createImageBitmap(t,b,w,g,g,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(y){dm(i,n),i.bindTexture(s,e),i.texImage2D(v.face,r,l,h,u,y),uv(n)&&dT(i,e,n,o,a,l)})}))}else if(s===hu||s===uu){const d=Math.min(t.width,t.height),f=Math.max(t.width,t.height),g=f/d;if(g%1!==0)throw"can not compute 3D dimensions of element";const p=t.width===f?1:0,m=t.height===f?1:0;i.pixelStorei(QR,1),i.pixelStorei(Ij,t.width),i.pixelStorei(Tj,0),i.pixelStorei(Rj,0),i.texImage3D(s,r,l,d,d,d,0,h,u,null);for(let v=0;v<g;++v){const b=v*d*p,w=v*d*m;i.pixelStorei(Nj,b),i.pixelStorei(Mj,w),i.texSubImage3D(s,r,0,0,v,d,d,1,h,u,t)}Pj(i)}else i.texImage2D(s,r,l,h,u,t);uv(n)&&dT(i,e,n,o,a,l),Fj(i,e,n)}function sw(){}function hde(i){if(typeof document<"u"){const e=document.createElement("a");return e.href=i,e.hostname===location.hostname&&e.port===location.port&&e.protocol===location.protocol}else{const e=new URL(location.href).origin;return new URL(i,location.href).origin===e}}function ude(i,e){return e===void 0&&!hde(i)?"anonymous":e}function dde(i,e,t){t=t||sw;let n;if(e=e!==void 0?e:Ru.crossOrigin,e=ude(i,e),typeof Image<"u"){n=new Image,e!==void 0&&(n.crossOrigin=e);const s=function(){n.removeEventListener("error",r),n.removeEventListener("load",o),n=null},r=function(){const a="couldn't load image: "+i;bhe(a),t(a,n),s()},o=function(){t(null,n),s()};return n.addEventListener("error",r),n.addEventListener("load",o),n.src=i,n}else if(typeof ImageBitmap<"u"){let s,r;const o=function(){t(s,r)},a={};e&&(a.mode="cors"),fetch(i,a).then(function(l){if(!l.ok)throw l;return l.blob()}).then(function(l){return createImageBitmap(l,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(l){r=l,setTimeout(o)}).catch(function(l){s=l,setTimeout(o)}),n=null}return n}function Vj(i){return typeof ImageBitmap<"u"&&i instanceof ImageBitmap||typeof ImageData<"u"&&i instanceof ImageData||typeof HTMLElement<"u"&&i instanceof HTMLElement}function XR(i,e,t){return Vj(i)?(setTimeout(function(){t(null,i)}),i):dde(i,e,t)}function JR(i,e,t){t=t||Ru.textureOptions;const n=t.target||Yc;if(i.bindTexture(n,e),t.color===!1)return;const s=cde(t.color);if(n===Hc)for(let r=0;r<6;++r)i.texImage2D(mL+r,0,Ki,1,1,0,Ki,ji,s);else n===hu||n===uu?i.texImage3D(n,0,Ki,1,1,1,0,Ki,ji,s):i.texImage2D(n,0,Ki,1,1,0,Ki,ji,s)}function fde(i,e,t,n){return n=n||sw,t=t||Ru.textureOptions,JR(i,e,t),t=Object.assign({},t),XR(t.src,t.crossOrigin,function(s,r){s?n(s,e,r):(Bj(i,e,r,t),n(null,e,r))})}function gde(i,e,t,n){n=n||sw;const s=t.src;if(s.length!==6)throw"there must be 6 urls for a cubemap";const r=t.level||0,o=t.internalFormat||t.format||Ki,a=c0(o),l=t.format||a.format,c=t.type||ji,h=t.target||Yc;if(h!==Hc)throw"target must be TEXTURE_CUBE_MAP";JR(i,e,t),t=Object.assign({},t);let u=6;const d=[],f=fT(i,t);let g;function p(m){return function(v,b){--u,v?d.push(v):b.width!==b.height?d.push("cubemap face img is not a square: "+b.src):(dm(i,t),i.bindTexture(h,e),u===5?fT().forEach(function(w){i.texImage2D(w,r,o,l,c,b)}):i.texImage2D(m,r,o,l,c,b),uv(t)&&i.generateMipmap(h)),u===0&&n(d.length?d:void 0,e,g)}}g=s.map(function(m,v){return XR(m,t.crossOrigin,p(f[v]))})}function pde(i,e,t,n){n=n||sw;const s=t.src,r=t.internalFormat||t.format||Ki,o=c0(r),a=t.format||o.format,l=t.type||ji,c=t.target||uu;if(c!==hu&&c!==uu)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";JR(i,e,t),t=Object.assign({},t);let h=s.length;const u=[];let d;const f=t.level||0;let g=t.width,p=t.height;const m=s.length;let v=!0;function b(w){return function(y,x){if(--h,y)u.push(y);else{if(dm(i,t),i.bindTexture(c,e),v){v=!1,g=t.width||x.width,p=t.height||x.height,i.texImage3D(c,f,r,g,p,m,0,a,l,null);for(let k=0;k<m;++k)i.texSubImage3D(c,f,0,0,k,g,p,1,a,l,x)}else{let k=x,S;(x.width!==g||x.height!==p)&&(S=Ej(),k=S.canvas,S.canvas.width=g,S.canvas.height=p,S.drawImage(x,0,0,g,p)),i.texSubImage3D(c,f,0,0,w,g,p,1,a,l,k),S&&k===S.canvas&&(S.canvas.width=0,S.canvas.height=0)}uv(t)&&i.generateMipmap(c)}h===0&&n(u.length?u:void 0,e,d)}}d=s.map(function(w,y){return XR(w,t.crossOrigin,b(y))})}function Wj(i,e,t,n){n=n||Ru.textureOptions;const s=n.target||Yc;i.bindTexture(s,e);let r=n.width,o=n.height,a=n.depth;const l=n.level||0,c=n.internalFormat||n.format||Ki,h=c0(c),u=n.format||h.format,d=n.type||Oj(i,t,h.type);if(um(t))t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));else{const m=_he(d);t=new m(t)}const f=rde(c,d),g=t.byteLength/f;if(g%1)throw"length wrong size for format: "+cT(i,u);let p;if(s===hu||s===uu)if(!r&&!o&&!a){const m=Math.cbrt(g);if(m%1!==0)throw"can't guess cube size of array of numElements: "+g;r=m,o=m,a=m}else r&&(!o||!a)?(p=ty(i,s,o,a,g/r),o=p.width,a=p.height):o&&(!r||!a)?(p=ty(i,s,r,a,g/o),r=p.width,a=p.height):(p=ty(i,s,r,o,g/a),r=p.width,o=p.height);else p=ty(i,s,r,o,g),r=p.width,o=p.height;if(Pj(i),i.pixelStorei(QR,n.unpackAlignment||1),dm(i,n),s===Hc){const m=f/t.BYTES_PER_ELEMENT,v=g/6*m;gT(i,n).forEach(b=>{const w=v*b.ndx,y=t.subarray(w,w+v);i.texImage2D(b.face,l,c,r,o,0,u,d,y)})}else s===hu||s===uu?i.texImage3D(s,l,c,r,o,a,0,u,d,t):i.texImage2D(s,l,c,r,o,0,u,d,t);return{width:r,height:o,depth:a,type:d}}function mde(i,e,t){const n=t.target||Yc;i.bindTexture(n,e);const s=t.level||0,r=t.internalFormat||t.format||Ki,o=c0(r),a=t.format||o.format,l=t.type||o.type;if(dm(i,t),n===Hc)for(let c=0;c<6;++c)i.texImage2D(mL+c,s,r,t.width,t.height,0,a,l,null);else n===hu||n===uu?i.texImage3D(n,s,r,t.width,t.height,t.depth,0,a,l,null):i.texImage2D(n,s,r,t.width,t.height,0,a,l,null)}function dv(i,e,t){t=t||sw,e=e||Ru.textureOptions;const n=i.createTexture(),s=e.target||Yc;let r=e.width||1,o=e.height||1;const a=e.internalFormat||Ki;i.bindTexture(s,n),s===Hc&&(i.texParameteri(s,HS,zS),i.texParameteri(s,US,zS));let l=e.src;if(l)if(typeof l=="function"&&(l=l(i,e)),typeof l=="string")fde(i,n,e,t);else if(um(l)||Array.isArray(l)&&(typeof l[0]=="number"||Array.isArray(l[0])||um(l[0]))){const c=Wj(i,n,l,e);r=c.width,o=c.height}else Array.isArray(l)&&(typeof l[0]=="string"||Vj(l[0]))?s===Hc?gde(i,n,e,t):pde(i,n,e,t):(Bj(i,n,l,e),r=l.width,o=l.height);else mde(i,n,e);return uv(e)&&dT(i,n,e,r,o,a),Fj(i,n,e),n}function _de(i,e,t,n,s,r){n=n||t.width,s=s||t.height,r=r||t.depth;const o=t.target||Yc;i.bindTexture(o,e);const a=t.level||0,l=t.internalFormat||t.format||Ki,c=c0(l),h=t.format||c.format;let u;const d=t.src;if(d&&(um(d)||Array.isArray(d)&&typeof d[0]=="number")?u=t.type||Oj(i,d,c.type):u=t.type||c.type,o===Hc)for(let f=0;f<6;++f)i.texImage2D(mL+f,a,l,n,s,0,h,u,null);else o===hu||o===uu?i.texImage3D(o,a,l,n,s,r,0,h,u,null):i.texImage2D(o,a,l,n,s,0,h,u,null)}const bde=yj,$S=33984,vde=35048,bL=34962,wde=34963,eO=35345,zj=35718,yde=35721,Cde=35971,Sde=35382,xde=35396,Dde=35398,Lde=35392,kde=35395,vL=5126,Hj=35664,Uj=35665,$j=35666,tO=5124,jj=35667,qj=35668,Gj=35669,Kj=35670,Zj=35671,Yj=35672,Qj=35673,Xj=35674,Jj=35675,eq=35676,Ade=35678,Ede=35680,Ide=35679,Tde=35682,Nde=35685,Mde=35686,Rde=35687,Ode=35688,Pde=35689,Fde=35690,Bde=36289,Vde=36292,Wde=36293,iO=5125,tq=36294,iq=36295,nq=36296,zde=36298,Hde=36299,Ude=36300,$de=36303,jde=36306,qde=36307,Gde=36308,Kde=36311,wL=3553,yL=34067,nO=32879,CL=35866,ut={};function sq(i,e){return ut[e].bindPoint}function Zde(i,e){return function(t){i.uniform1f(e,t)}}function Yde(i,e){return function(t){i.uniform1fv(e,t)}}function Qde(i,e){return function(t){i.uniform2fv(e,t)}}function Xde(i,e){return function(t){i.uniform3fv(e,t)}}function Jde(i,e){return function(t){i.uniform4fv(e,t)}}function rq(i,e){return function(t){i.uniform1i(e,t)}}function oq(i,e){return function(t){i.uniform1iv(e,t)}}function aq(i,e){return function(t){i.uniform2iv(e,t)}}function lq(i,e){return function(t){i.uniform3iv(e,t)}}function cq(i,e){return function(t){i.uniform4iv(e,t)}}function efe(i,e){return function(t){i.uniform1ui(e,t)}}function tfe(i,e){return function(t){i.uniform1uiv(e,t)}}function ife(i,e){return function(t){i.uniform2uiv(e,t)}}function nfe(i,e){return function(t){i.uniform3uiv(e,t)}}function sfe(i,e){return function(t){i.uniform4uiv(e,t)}}function rfe(i,e){return function(t){i.uniformMatrix2fv(e,!1,t)}}function ofe(i,e){return function(t){i.uniformMatrix3fv(e,!1,t)}}function afe(i,e){return function(t){i.uniformMatrix4fv(e,!1,t)}}function lfe(i,e){return function(t){i.uniformMatrix2x3fv(e,!1,t)}}function cfe(i,e){return function(t){i.uniformMatrix3x2fv(e,!1,t)}}function hfe(i,e){return function(t){i.uniformMatrix2x4fv(e,!1,t)}}function ufe(i,e){return function(t){i.uniformMatrix4x2fv(e,!1,t)}}function dfe(i,e){return function(t){i.uniformMatrix3x4fv(e,!1,t)}}function ffe(i,e){return function(t){i.uniformMatrix4x3fv(e,!1,t)}}function Js(i,e,t,n){const s=sq(i,e);return l0(i)?function(r){let o,a;pL(i,r)?(o=r,a=null):(o=r.texture,a=r.sampler),i.uniform1i(n,t),i.activeTexture($S+t),i.bindTexture(s,o),i.bindSampler(t,a)}:function(r){i.uniform1i(n,t),i.activeTexture($S+t),i.bindTexture(s,r)}}function er(i,e,t,n,s){const r=sq(i,e),o=new Int32Array(s);for(let a=0;a<s;++a)o[a]=t+a;return l0(i)?function(a){i.uniform1iv(n,o),a.forEach(function(l,c){i.activeTexture($S+o[c]);let h,u;pL(i,l)?(h=l,u=null):(h=l.texture,u=l.sampler),i.bindSampler(t,u),i.bindTexture(r,h)})}:function(a){i.uniform1iv(n,o),a.forEach(function(l,c){i.activeTexture($S+o[c]),i.bindTexture(r,l)})}}ut[vL]={Type:Float32Array,size:4,setter:Zde,arraySetter:Yde};ut[Hj]={Type:Float32Array,size:8,setter:Qde,cols:2};ut[Uj]={Type:Float32Array,size:12,setter:Xde,cols:3};ut[$j]={Type:Float32Array,size:16,setter:Jde,cols:4};ut[tO]={Type:Int32Array,size:4,setter:rq,arraySetter:oq};ut[jj]={Type:Int32Array,size:8,setter:aq,cols:2};ut[qj]={Type:Int32Array,size:12,setter:lq,cols:3};ut[Gj]={Type:Int32Array,size:16,setter:cq,cols:4};ut[iO]={Type:Uint32Array,size:4,setter:efe,arraySetter:tfe};ut[tq]={Type:Uint32Array,size:8,setter:ife,cols:2};ut[iq]={Type:Uint32Array,size:12,setter:nfe,cols:3};ut[nq]={Type:Uint32Array,size:16,setter:sfe,cols:4};ut[Kj]={Type:Uint32Array,size:4,setter:rq,arraySetter:oq};ut[Zj]={Type:Uint32Array,size:8,setter:aq,cols:2};ut[Yj]={Type:Uint32Array,size:12,setter:lq,cols:3};ut[Qj]={Type:Uint32Array,size:16,setter:cq,cols:4};ut[Xj]={Type:Float32Array,size:32,setter:rfe,rows:2,cols:2};ut[Jj]={Type:Float32Array,size:48,setter:ofe,rows:3,cols:3};ut[eq]={Type:Float32Array,size:64,setter:afe,rows:4,cols:4};ut[Nde]={Type:Float32Array,size:32,setter:lfe,rows:2,cols:3};ut[Mde]={Type:Float32Array,size:32,setter:hfe,rows:2,cols:4};ut[Rde]={Type:Float32Array,size:48,setter:cfe,rows:3,cols:2};ut[Ode]={Type:Float32Array,size:48,setter:dfe,rows:3,cols:4};ut[Pde]={Type:Float32Array,size:64,setter:ufe,rows:4,cols:2};ut[Fde]={Type:Float32Array,size:64,setter:ffe,rows:4,cols:3};ut[Ade]={Type:null,size:0,setter:Js,arraySetter:er,bindPoint:wL};ut[Ede]={Type:null,size:0,setter:Js,arraySetter:er,bindPoint:yL};ut[Ide]={Type:null,size:0,setter:Js,arraySetter:er,bindPoint:nO};ut[Tde]={Type:null,size:0,setter:Js,arraySetter:er,bindPoint:wL};ut[Bde]={Type:null,size:0,setter:Js,arraySetter:er,bindPoint:CL};ut[Vde]={Type:null,size:0,setter:Js,arraySetter:er,bindPoint:CL};ut[Wde]={Type:null,size:0,setter:Js,arraySetter:er,bindPoint:yL};ut[zde]={Type:null,size:0,setter:Js,arraySetter:er,bindPoint:wL};ut[Hde]={Type:null,size:0,setter:Js,arraySetter:er,bindPoint:nO};ut[Ude]={Type:null,size:0,setter:Js,arraySetter:er,bindPoint:yL};ut[$de]={Type:null,size:0,setter:Js,arraySetter:er,bindPoint:CL};ut[jde]={Type:null,size:0,setter:Js,arraySetter:er,bindPoint:wL};ut[qde]={Type:null,size:0,setter:Js,arraySetter:er,bindPoint:nO};ut[Gde]={Type:null,size:0,setter:Js,arraySetter:er,bindPoint:yL};ut[Kde]={Type:null,size:0,setter:Js,arraySetter:er,bindPoint:CL};function SL(i,e){return function(t){if(t.value)switch(i.disableVertexAttribArray(e),t.value.length){case 4:i.vertexAttrib4fv(e,t.value);break;case 3:i.vertexAttrib3fv(e,t.value);break;case 2:i.vertexAttrib2fv(e,t.value);break;case 1:i.vertexAttrib1fv(e,t.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else i.bindBuffer(bL,t.buffer),i.enableVertexAttribArray(e),i.vertexAttribPointer(e,t.numComponents||t.size,t.type||vL,t.normalize||!1,t.stride||0,t.offset||0),t.divisor!==void 0&&i.vertexAttribDivisor(e,t.divisor)}}function Ou(i,e){return function(t){if(t.value)if(i.disableVertexAttribArray(e),t.value.length===4)i.vertexAttrib4iv(e,t.value);else throw new Error("The length of an integer constant value must be 4!");else i.bindBuffer(bL,t.buffer),i.enableVertexAttribArray(e),i.vertexAttribIPointer(e,t.numComponents||t.size,t.type||tO,t.stride||0,t.offset||0),t.divisor!==void 0&&i.vertexAttribDivisor(e,t.divisor)}}function xL(i,e){return function(t){if(t.value)if(i.disableVertexAttribArray(e),t.value.length===4)i.vertexAttrib4uiv(e,t.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else i.bindBuffer(bL,t.buffer),i.enableVertexAttribArray(e),i.vertexAttribIPointer(e,t.numComponents||t.size,t.type||iO,t.stride||0,t.offset||0),t.divisor!==void 0&&i.vertexAttribDivisor(e,t.divisor)}}function sO(i,e,t){const n=t.size,s=t.count;return function(r){i.bindBuffer(bL,r.buffer);const o=r.size||r.numComponents||n,a=o/s,l=r.type||vL,c=ut[l].size*o,h=r.normalize||!1,u=r.offset||0,d=c/s;for(let f=0;f<s;++f)i.enableVertexAttribArray(e+f),i.vertexAttribPointer(e+f,a,l,h,c,u+d*f),r.divisor!==void 0&&i.vertexAttribDivisor(e+f,r.divisor)}}const Dn={};Dn[vL]={size:4,setter:SL};Dn[Hj]={size:8,setter:SL};Dn[Uj]={size:12,setter:SL};Dn[$j]={size:16,setter:SL};Dn[tO]={size:4,setter:Ou};Dn[jj]={size:8,setter:Ou};Dn[qj]={size:12,setter:Ou};Dn[Gj]={size:16,setter:Ou};Dn[iO]={size:4,setter:xL};Dn[tq]={size:8,setter:xL};Dn[iq]={size:12,setter:xL};Dn[nq]={size:16,setter:xL};Dn[Kj]={size:4,setter:Ou};Dn[Zj]={size:8,setter:Ou};Dn[Yj]={size:12,setter:Ou};Dn[Qj]={size:16,setter:Ou};Dn[Xj]={size:4,setter:sO,count:2};Dn[Jj]={size:9,setter:sO,count:3};Dn[eq]={size:16,setter:sO,count:4};function hq(i){const e=i.name;return e.startsWith("gl_")||e.startsWith("webgl_")}const gfe=/(\.|\[|]|\w+)/g,pfe=i=>i>="0"&&i<="9";function uq(i,e,t,n){const s=i.split(gfe).filter(a=>a!=="");let r=0,o="";for(;;){const a=s[r++];o+=a;const l=pfe(a[0]),c=l?parseInt(a):a;if(l&&(o+=s[r++]),r===s.length){t[c]=e;break}else{const h=s[r++],u=h==="[",d=t[c]||(u?[]:{});t[c]=d,t=d,n[o]=n[o]||function(f){return function(g){dq(f,g)}}(d),o+=h}}}function mfe(i,e){let t=0;function n(a,l,c){const h=l.name.endsWith("[0]"),u=l.type,d=ut[u];if(!d)throw new Error(`unknown type: 0x${u.toString(16)}`);let f;if(d.bindPoint){const g=t;t+=l.size,h?f=d.arraySetter(i,u,g,c,l.size):f=d.setter(i,u,g,c,l.size)}else d.arraySetter&&h?f=d.arraySetter(i,c):f=d.setter(i,c);return f.location=c,f}const s={},r={},o=i.getProgramParameter(e,zj);for(let a=0;a<o;++a){const l=i.getActiveUniform(e,a);if(hq(l))continue;let c=l.name;c.endsWith("[0]")&&(c=c.substr(0,c.length-3));const h=i.getUniformLocation(e,l.name);if(h){const u=n(e,l,h);s[c]=u,uq(c,u,r,s)}}return s}function _fe(i,e){const t={},n=i.getProgramParameter(e,Cde);for(let s=0;s<n;++s){const r=i.getTransformFeedbackVarying(e,s);t[r.name]={index:s,type:r.type,size:r.size}}return t}function bfe(i,e){const t=i.getProgramParameter(e,zj),n=[],s=[];for(let a=0;a<t;++a){s.push(a),n.push({});const l=i.getActiveUniform(e,a);n[a].name=l.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(a){const l=a[0],c=a[1];i.getActiveUniforms(e,s,i[l]).forEach(function(h,u){n[u][c]=h})});const r={},o=i.getProgramParameter(e,Sde);for(let a=0;a<o;++a){const l=i.getActiveUniformBlockName(e,a),c={index:i.getUniformBlockIndex(e,l),usedByVertexShader:i.getActiveUniformBlockParameter(e,a,xde),usedByFragmentShader:i.getActiveUniformBlockParameter(e,a,Dde),size:i.getActiveUniformBlockParameter(e,a,Lde),uniformIndices:i.getActiveUniformBlockParameter(e,a,kde)};c.used=c.usedByVertexShader||c.usedByFragmentShader,r[l]=c}return{blockSpecs:r,uniformData:n}}const w6=/\[\d+\]\.$/,vfe=(i,e)=>((i+(e-1))/e|0)*e;function wfe(i,e,t,n){if(e||t){n=n||1;const s=i.length/4;return function(r){let o=0,a=0;for(let l=0;l<s;++l){for(let c=0;c<n;++c)i[o++]=r[a++];o+=4-n}}}else return function(s){s.length?i.set(s):i[0]=s}}function yfe(i,e,t,n){const s=t.blockSpecs,r=t.uniformData,o=s[n];if(!o)return bde("no uniform block object named:",n),{name:n,uniforms:{}};const a=new ArrayBuffer(o.size),l=i.createBuffer(),c=o.index;i.bindBuffer(eO,l),i.uniformBlockBinding(e,o.index,c);let h=n+".";w6.test(h)&&(h=h.replace(w6,"."));const u={},d={},f={};return o.uniformIndices.forEach(function(g){const p=r[g];let m=p.name;m.startsWith(h)&&(m=m.substr(h.length));const v=m.endsWith("[0]");v&&(m=m.substr(0,m.length-3));const b=ut[p.type],w=b.Type,y=v?vfe(b.size,16)*p.size:b.size*p.size,x=new w(a,p.offset,y/w.BYTES_PER_ELEMENT);u[m]=x;const k=wfe(x,v,b.rows,b.cols);d[m]=k,uq(m,k,f,d)}),{name:n,array:a,asFloat:new Float32Array(a),buffer:l,uniforms:u,setters:d}}function y6(i,e,t){return yfe(i,e.program,e.uniformBlockSpec,t)}function Cfe(i,e,t){const n=(e.uniformBlockSpec||e).blockSpecs[t.name];if(n){const s=n.index;return i.bindBufferRange(eO,s,t.buffer,t.offset||0,t.array.byteLength),!0}return!1}function C6(i,e,t){Cfe(i,e,t)&&i.bufferData(eO,t.array,vde)}function S6(i,e){const t=i.setters;for(const n in e){const s=t[n];if(s){const r=e[n];s(r)}}}function dq(i,e){for(const t in e){const n=i[t];typeof n=="function"?n(e[t]):dq(i[t],e[t])}}function Br(i,...e){const t=i.uniformSetters||i,n=e.length;for(let s=0;s<n;++s){const r=e[s];if(Array.isArray(r)){const o=r.length;for(let a=0;a<o;++a)Br(t,r[a])}else for(const o in r){const a=t[o];a&&a(r[o])}}}function Sfe(i,e){const t={},n=i.getProgramParameter(e,yde);for(let s=0;s<n;++s){const r=i.getActiveAttrib(e,s);if(hq(r))continue;const o=i.getAttribLocation(e,r.name),a=Dn[r.type],l=a.setter(i,o,a);l.location=o,t[r.name]=l}return t}function xfe(i,e){for(const t in e){const n=i[t];n&&n(e[t])}}function h0(i,e,t){t.vertexArrayObject?i.bindVertexArray(t.vertexArrayObject):(xfe(e.attribSetters||e,t.attribs),t.indices&&i.bindBuffer(wde,t.indices))}function Dfe(i,e){const t=mfe(i,e),n=Sfe(i,e),s={program:e,uniformSetters:t,attribSetters:n};return l0(i)&&(s.uniformBlockSpec=bfe(i,e),s.transformFeedbackInfo=_fe(i,e)),s}const Lfe=4,x6=5123;function rw(i,e,t,n,s,r){t=t===void 0?Lfe:t;const o=e.indices,a=e.elementType,l=n===void 0?e.numElements:n;s=s===void 0?0:s,a||o?r!==void 0?i.drawElementsInstanced(t,l,a===void 0?x6:e.elementType,s,r):i.drawElements(t,l,a===void 0?x6:e.elementType,s):r!==void 0?i.drawArraysInstanced(t,s,l,r):i.drawArrays(t,s,l)}const kfe=36160,wd=36161,Afe=3553,Efe=5121,Ife=6402,Tfe=6408,Nfe=33190,Mfe=36012,Rfe=35056,Ofe=36013,Pfe=32854,Ffe=32855,Bfe=36194,fq=33189,gq=6401,pq=36168,rO=34041,Vfe=36064,DL=36096,mq=36128,oO=33306,pT=33071,mT=9729,_q=[{format:Tfe,type:Efe,min:mT,wrap:pT},{format:rO}],ba={};ba[rO]=oO;ba[gq]=mq;ba[pq]=mq;ba[Ife]=DL;ba[fq]=DL;ba[Nfe]=DL;ba[Mfe]=DL;ba[Rfe]=oO;ba[Ofe]=oO;function Wfe(i,e){return ba[i]||ba[e]}const Pu={};Pu[Pfe]=!0;Pu[Ffe]=!0;Pu[Bfe]=!0;Pu[rO]=!0;Pu[fq]=!0;Pu[gq]=!0;Pu[pq]=!0;function zfe(i){return Pu[i]}function Hfe(i,e,t,n){const s=kfe,r=i.createFramebuffer();i.bindFramebuffer(s,r),t=t||i.drawingBufferWidth,n=n||i.drawingBufferHeight,e=e||_q;let o=0;const a={framebuffer:r,attachments:[],width:t,height:n};return e.forEach(function(l){let c=l.attachment;const h=l.samples,u=l.format;let d=l.attachmentPoint||Wfe(u,l.internalFormat);if(d||(d=Vfe+o++),!c)if(h!==void 0||zfe(u))c=i.createRenderbuffer(),i.bindRenderbuffer(wd,c),h>1?i.renderbufferStorageMultisample(wd,h,u,t,n):i.renderbufferStorage(wd,u,t,n);else{const f=Object.assign({},l);f.width=t,f.height=n,f.auto===void 0&&(f.auto=!1,f.min=f.min||f.minMag||mT,f.mag=f.mag||f.minMag||mT,f.wrapS=f.wrapS||f.wrap||pT,f.wrapT=f.wrapT||f.wrap||pT),c=dv(i,f)}if(Cj(i,c))i.framebufferRenderbuffer(s,d,wd,c);else if(pL(i,c))l.layer!==void 0?i.framebufferTextureLayer(s,d,c,l.level||0,l.layer):i.framebufferTexture2D(s,d,l.target||Afe,c,l.level||0);else throw new Error("unknown attachment type");a.attachments.push(c)}),a}function Ufe(i,e,t,n,s){n=n||i.drawingBufferWidth,s=s||i.drawingBufferHeight,e.width=n,e.height=s,t=t||_q,t.forEach(function(r,o){const a=e.attachments[o],l=r.format,c=r.samples;if(c!==void 0||Cj(i,a))i.bindRenderbuffer(wd,a),c>1?i.renderbufferStorageMultisample(wd,c,l,n,s):i.renderbufferStorage(wd,l,n,s);else if(pL(i,a))_de(i,a,r,n,s);else throw new Error("unknown attachment type")})}function $fe(i,e,t){const n=i.createVertexArray();return i.bindVertexArray(n),e.length||(e=[e]),e.forEach(function(s){h0(i,s,t)}),i.bindVertexArray(null),{numElements:t.numElements,elementType:t.elementType,vertexArrayObject:n}}const jfe=/^(.*?)_/;function qfe(i,e){cT(i,0);const t=i.getExtension(e);if(t){const n={},s=jfe.exec(e)[1],r="_"+s;for(const o in t){const a=t[o],l=typeof a=="function",c=l?s:r;let h=o;o.endsWith(c)&&(h=o.substring(0,o.length-c.length)),i[h]!==void 0?!l&&i[h]!==a&&yj(h,i[h],a,o):l?i[h]=function(u){return function(){return u.apply(t,arguments)}}(a):(i[h]=a,n[h]=a)}n.constructor={name:t.constructor.name},cT(n,0)}return t}const D6=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function bq(i){for(let e=0;e<D6.length;++e)qfe(i,D6[e])}function Gfe(i,e){const t=["webgl2","webgl","experimental-webgl"];let n=null;for(let s=0;s<t.length;++s)if(n=i.getContext(t[s],e),n){bq(n);break}return n}function Kfe(i,e){return Gfe(i,e)}const Zfe=`/***The vertex position wrt the rectangle specified by(x,x2,y,y2).*[0,0]=[x,y],[1,1]=[x2,y2].*The x or y component may contain fractional values if the rectangle*have been tessellated.*/in vec2 frac;uniform vec2 uMinSize;uniform float uMinOpacity;uniform vec4 uCornerRadii;out lowp vec4 vFillColor;out lowp vec4 vStrokeColor;out float vHalfStrokeWidth;out vec4 vCornerRadii;
#if defined(ROUNDED_CORNERS) || defined(STROKED)
out vec2 vPosInPixels;
#endif
out vec2 vHalfSizeInPixels;/***Clamps the minimumSize and returns an opacity that reflects the amount of clamping.*/float clampMinSize(inout float pos,float frac,float size,float minSize){if(minSize>0.0&&abs(size)<minSize){pos+=(frac-0.5)*(minSize*sign(size)-size);return abs(size)/minSize;}return 1.0;}void sort(inout float a,inout float b){if(a>b){float tmp=b;b=a;a=tmp;}}void main(void){vec2 normalizedMinSize=uMinSize/uViewportSize;float x=getScaled_x();float x2=getScaled_x2();float y=getScaled_y();float y2=getScaled_y2();sort(x,x2);sort(y,y2);float clampMargin=1.0;vec2 pos1=vec2(clamp(x,0.0-clampMargin,1.0+clampMargin),y);vec2 pos2=vec2(clamp(x2,0.0-clampMargin,1.0+clampMargin),y2);vec2 size=pos2-pos1;if(size.x<=0.0||size.y<=0.0){gl_Position=vec4(0.0,0.0,0.0,1.0);return;}vec2 pos=pos1+frac*size;size.y*=getSampleFacetHeight(pos);float opaFactor=uViewOpacity*max(uMinOpacity,clampMinSize(pos.x,frac.x,size.x,normalizedMinSize.x)*clampMinSize(pos.y,frac.y,size.y,normalizedMinSize.y));pos=applySampleFacet(pos);
#if defined(ROUNDED_CORNERS) || defined(STROKED)
float aaPadding=1.0/uDevicePixelRatio;float strokeWidth=getScaled_strokeWidth();float strokeOpacity=getScaled_strokeOpacity()*opaFactor;vec2 centeredFrac=frac-0.5;vec2 expand=centeredFrac*(strokeWidth+aaPadding)/uViewportSize;pos+=expand;vec2 sizeInPixels=size*uViewportSize;vPosInPixels=(centeredFrac+expand/size)*sizeInPixels;vHalfSizeInPixels=sizeInPixels/2.0;vCornerRadii=min(uCornerRadii,min(vHalfSizeInPixels.x,vHalfSizeInPixels.y));vHalfStrokeWidth=strokeWidth/2.0;vStrokeColor=vec4(getScaled_stroke()*strokeOpacity,strokeOpacity);
#endif
gl_Position=unitToNdc(pos);float fillOpacity=getScaled_fillOpacity()*opaFactor;vFillColor=vec4(getScaled_fill()*fillOpacity,fillOpacity);setupPicking();}`,Yfe=`#if defined(ROUNDED_CORNERS) || defined(STROKED)
in vec2 vPosInPixels;
#endif
in vec2 vHalfSizeInPixels;in lowp vec4 vFillColor;in lowp vec4 vStrokeColor;in float vHalfStrokeWidth;in vec4 vCornerRadii;out lowp vec4 fragColor;float sdRoundedBox(vec2 p,vec2 b,vec4 r){r.xy=p.x>0.0 ? r.xy : r.zw;r.x=p.y>0.0 ? r.x  : r.y;vec2 q=abs(p)-b+r.x;return min(max(q.x,q.y),0.0)+length(max(q,0.0))-r.x;}float sdSharpBox(vec2 p,vec2 b){vec2 q=abs(p)-b;return max(q.x,q.y);}void main(void){
#if defined(ROUNDED_CORNERS) || defined(STROKED)
#ifdef ROUNDED_CORNERS
float d=sdRoundedBox(vPosInPixels,vHalfSizeInPixels,vCornerRadii);
#else
float d=sdSharpBox(vPosInPixels,vHalfSizeInPixels);
#endif
fragColor=distanceToColor(d,vFillColor,vStrokeColor,vHalfStrokeWidth);if(fragColor.a==0.0){discard;}
#else
fragColor=vFillColor;
#endif
if(uPickingEnabled){fragColor=vPickingColor;}}`,aO="attr_",vq="uDomain_",Qfe="range_",L6="scale_",wq="getScaled_",_T="uRangeTexture_",k6=3402823466e29;function Xfe(i){const e=i.match(/^(?:(\w+)-)?(\w+)$/);if(!e)throw new Error("Not a scale type: "+i);return{family:e[1]||"continuous",transform:e[2]}}function Jfe(i,e){let t;if(gL(i))t=yd(vj(i)(e));else if(Xi(e))if(Bd(i))t=tge(e);else throw new Error(`String values are not supported on the "${i}" channel: ${e}`);else if(GD(e))t=yd(e?1:0);else if(e===null)if(Bd(i))t=yd([0,0,0]);else throw new Error(`null value is not supported on the "${i}" chanel.`);else t=yd(e);return`
#define ${i}_DEFINED
${t.type} ${wq}${i}() {
    // Constant value
    return ${t};
}`}function ege(i,e,t){if(_a(t))throw new Error(`Cannot create scale for "value": ${JSON.stringify(t)}`);const n=a0(i),s=aO+i,r=vq+n,o=Qfe+n,a=jS(e.type),l=a?"vec2":"float",c=e.domain?e.domain().length:void 0;let h;const u=[];u.push(""),u.push("/".repeat(70)),u.push(`// Channel: ${i}`),u.push(""),u.push(`#define ${i}_DEFINED`);const{transform:d}=Xfe(e.type),f=(S,...L)=>ige.apply(null,[S,"value",...L]);let g;switch(d){case"linear":g=f("scaleLinear","domain",o);break;case"log":g=f("scaleLog","domain",o,e.base());break;case"symlog":g=f("scaleSymlog","domain",o,e.constant());break;case"pow":case"sqrt":g=f("scalePow","domain",o,e.exponent());break;case"index":case"locus":g=f("scaleBandHp","domain",o,e.paddingInner(),e.paddingOuter(),e.align(),t.band??.5);break;case"point":case"band":g=f("scaleBand","domain",o,e.paddingInner(),e.paddingOuter(),e.align(),t.band??.5);break;case"ordinal":case"null":case"identity":g=f("scaleIdentity");break;case"threshold":break;default:throw new Error(`Unsupported scale type: ${e.type}! ${i}: ${JSON.stringify(t)}`)}const p=lL(e.type)||Nr(e.type)&&Bd(i)?[0,1]:e.range?e.range():void 0;if(p&&i==n&&p.length&&p.every(yr)){const S=A6(p);u.push(`const ${S.type} ${o} = ${S};`)}const m=Bd(i)?"vec3":"float";let v;if(Bd(i)){const S=_T+n;if(i==n&&u.push(`uniform sampler2D ${S};`),Nr(e.type))v=`getInterpolatedColor(${S}, transformed)`;else if(af(e.type)||Yg(e.type))v=`getDiscreteColor(${S}, int(transformed))`;else throw new Error("Problem with color scale!")}else if(e.type==="ordinal"||Yg(e.type)){const S=_T+n;i==n&&u.push(`uniform sampler2D ${S};`),v=`getDiscreteColor(${S}, int(transformed)).r`}iw(t)?u.push(`uniform highp ${l} ${s};`):u.push(`in highp ${l} ${s};`);const b=[],w=Nr(e.type)&&c>2,y=Yg(e.type)||w;if(b.push("int slot = 0;"),y){const S=r;b.push(w?`while (slot < ${S}.length() - 2 && value >= ${S}[slot + 1]) { slot++; }`:`while (slot < ${S}.length() && value >= ${S}[slot]) { slot++; }`)}const x=Nr(e.type)||Yg(e.type)||["band","point"].includes(e.type);if(g){const S=r;x&&(a?b.push(`vec3 domain = ${S};`):b.push(`vec2 domain = vec2(${S}[slot], ${S}[slot + 1]);`)),b.push(`float transformed = ${g};`),w&&b.push(`transformed = (float(slot) + transformed) / (float(${S}.length() - 1));`)}else b.push("float transformed = float(slot);");"clamp"in e&&e.clamp()&&b.push(`transformed = clampToRange(transformed, ${A6(p)});`),b.push(`return ${v??"transformed"};`),u.push(`
${m} ${L6}${i}(${l} value) {
${b.map(S=>`    ${S}
`).join("")}
}`),u.push(`
${m} ${wq}${i}() {
    return ${L6}${i}(${s});
}`);const k=u.join(`
`);if(x&&i==n){const S=Nr(e.type)||Yg(e.type)?c:2;h=a?`highp vec3 ${r};`:`mediump float ${r}[${S}];`}return{glsl:k,domainUniform:h}}function bT(i){if(!yr(i))throw new Error(`Not a number: ${i}`);if(i==1/0)return""+k6;if(i==-1/0)return""+-k6;{let e=`${i}`;return/^(-)?\d+$/.test(e)&&(e+=".0"),e}}function yd(i){typeof i=="number"&&(i=[i]);const e=i.length;if(e<1||e>4)throw new Error("Invalid number of components: "+e);let t,n;return e>1?(t=`vec${e}`,n=`${t}(${i.map(bT).join(", ")})`):(t="float",n=bT(i[0])),Object.assign(n,{type:t,numComponents:e})}function tge(i){const e=of(i).rgb();return yd([e.r,e.g,e.b].map(t=>t/255))}function A6(i){return yd([i[0],o0(i)])}function ige(i,...e){const t=[];for(const n of e)yr(n)?t.push(bT(n)):Ro(n)?t.push(yd(n)):t.push(n);return`${i}(${t.join(", ")})`}function jS(i){return i=="index"||i=="locus"}const yq=2**11,nge=yq-1;function Cq(i,e=[]){const t=i&nge,n=i-t;return e[0]=n,e[1]=t,e}function sge(i){const e=i%yq;return[i-e,e]}function rge(i){return[...sge(i[0]),i[1]-i[0]]}class oge{constructor(e){this.size=e,this.arrays={},this.pushers=[],this.dataUpdaters=[],this.vertexCount=0}addConverter(e,t){const n=this.createUpdater(aO+e,t.numComponents||1,t.arrayReference),s=t.f;this.dataUpdaters.push(t.arrayReference?r=>n(s(r)):r=>n(s(r)))}createUpdater(e,t,n){if(!yr(this.size))throw new Error("The number of vertices must be defined!");let s,r,o=0;const a=new Float32Array(this.size*t);if(this.arrays[e]={data:a,numComponents:t},t==1){let l=0;const c=h=>{l=+h};s=()=>{a[o++]=l},r=c}else{let l=n??[0];const c=n?h=>{}:h=>{l=h};switch(t){case 1:break;case 2:s=()=>{a[o++]=l[0],a[o++]=l[1]},r=c;break;case 3:s=()=>{a[o++]=l[0],a[o++]=l[1],a[o++]=l[2]},r=c;break;case 4:s=()=>{a[o++]=l[0],a[o++]=l[1],a[o++]=l[2],a[o++]=l[3]},r=c;break;default:throw new Error("Invalid numComponents: "+t)}}return this.pushers.push(s),r}_unrollPushAll(){let e="",t="";for(let s=0;s<this.pushers.length;s++)e+=`const p${s} = that.pushers[${s}];
`,t+=`p${s}();
`;const n=new Function("that",`${e}

            return function unrolledPushAll() {
                ${t}
                that.vertexCount++;
            };
        `);this.pushAll=n(this)}pushAll(){this.size>1e5?this._unrollPushAll():this.pushAll=()=>{for(let e=0;e<this.pushers.length;e++)this.pushers[e]();this.vertexCount++},this.pushAll()}updateFromDatum(e){for(let t=0;t<this.dataUpdaters.length;t++)this.dataUpdaters[t](e)}pushFromDatum(e){this.updateFromDatum(e),this.pushAll()}}const rp=5,B2=127;function vT(i){const e=[];for(let g=0;g<=B2;g++)e.push(void 0);const t=new Map;for(const g of i.chars)g.id<=B2?e[g.id]=g:t.set(g.id,g);const n=8722;t.has(n)||t.set(n,e["-".charCodeAt(0)]);function s(g){return(g<=B2?e[g]:t.get(g))||e[63]}function r(g){return s(g.charCodeAt(0))}const o=i.common.base,a=r("x"),l=r("X"),c=r("q"),h=a.height-rp*2,u=l.height-rp*2,d=c.height-a.height+c.yoffset-a.yoffset;function f(g,p=1){let m=0;for(let v=0;v<g.length;v++)m+=s(g.charCodeAt(v)).xadvance;return m/o*p}return{measureWidth:f,getCharByCode:s,getChar:r,xHeight:h,capHeight:u,descent:d,common:i.common}}function age(i,e=0,t=1){return Math.max(e,Math.min(t,i))}const E6=2**31-1,lge=-(2**31);function cge(i,e,t,n=t){const s=new Int32Array(i);s.fill(E6);let r=lge,o=!1;const a=new Int32Array(i),l=e[0],c=(e[1]-e[0])/i,h=(p,m)=>{const v=(p-l)/c,b=Math.floor(v);return age(m&&b==v?b-1:b,0,i-1)};function u(p,m,v){m>r?r=m:o||(o=!0,console.debug("Items are not ordered properly. Disabling binned index."));const b=t(p),w=h(b,!1);s[w]>m&&(s[w]=m),a[w]<v&&(a[w]=v)}function d(p,m,v){m>r?r=m:o||(o=!0,console.debug("Items are not ordered properly. Disabling binned index."));const b=t(p),w=n(p),y=h(b,!1),x=h(w,!0);for(let k=y;k<=x;k++)s[k]>m&&(s[k]=m),a[k]<v&&(a[k]=v)}const f=(p,m,v=[0,0])=>{const b=h(p,!1),w=h(m,!0),y=s[b],x=Math.max(a[w],y);return v[0]=y,v[1]=x,v},g=()=>{for(let m=1;m<a.length;m++)a[m]<a[m-1]&&(a[m]=a[m-1]);let p=!0;for(let m=s.length-1;m>0;m--)p&&s[m]==E6?(s[m]=a[m],p=!1):s[m-1]>s[m]&&(s[m-1]=s[m]);return f};if(u.getIndex=g,d.getIndex=g,!o)return t==n?u:d}class ow{constructor({encoders:e,numVertices:t=void 0,attributes:n=[]}){this.encoders=e,this.variableEncoders=Object.fromEntries(Object.entries(e).filter(([s,r])=>n.includes(s)&&r&&r.scale&&!r.constant)),this.allocatedVertices=t,this.variableBuilder=new oge(t);for(const[s,r]of Object.entries(this.variableEncoders)){const o=r.accessor,a=[0,0],l=jS(r.scale.type),c=r.indexer,h=c?u=>c(o(u)):l?u=>Cq(o(u),a):o;this.variableBuilder.addConverter(s,{f:h,numComponents:l?2:1,arrayReference:l?a:void 0})}this.lastOffset=0,this.rangeMap=new tf([],JSON.stringify)}registerBatch(e){var t;const n=this.lastOffset,s=this.variableBuilder.vertexCount,r=s-n;r&&this.rangeMap.set(e,{offset:n,count:r,xIndex:(t=this.xIndexer)==null?void 0:t.getIndex()}),this.lastOffset=s}addBatches(e){for(const[t,n]of e)this.addBatch(t,n)}addBatch(e,t,n=0,s=t.length){this.prepareXIndexer(t,n,s);for(let r=n;r<s;r++){const o=t[r];this.variableBuilder.pushFromDatum(o),this.addToXIndex(o)}this.registerBatch(e)}prepareXIndexer(e,t=0,n=t+e.length){const s=()=>{this.addToXIndex=l=>{},this.xIndexer=void 0};if(!e.length||n-t<0){s();return}const r=l=>{var c;return l&&Nr((c=l.scale)==null?void 0:c.type)&&l},o=r(this.variableEncoders.x),a=r(this.variableEncoders.x2);if(o){const l=o.accessor,c=a?a.accessor:l,h=[l(e[t]),c(e[n-1])];if(h[1]>h[0]){this.xIndexer=cge(50,h,l,c);let u=this.variableBuilder.vertexCount;this.addToXIndex=d=>{let f=this.variableBuilder.vertexCount;this.xIndexer(d,u,f),u=f}}else s()}else s()}addToXIndex(e){}toArrays(){return{arrays:this.variableBuilder.arrays,vertexCount:this.variableBuilder.vertexCount,allocatedVertices:this.allocatedVertices,rangeMap:this.rangeMap}}}class hge extends ow{constructor({encoders:e,attributes:t,tessellationThreshold:n=1/0,visibleRange:s=[-1/0,1/0],numItems:r}){super({encoders:e,attributes:t,numVertices:n==1/0?r*6:void 0}),this.visibleRange=s,this.tessellationThreshold=n||1/0,this.updateFrac=this.variableBuilder.createUpdater("frac",2)}addBatch(e,t,n=0,s=t.length){if(s<=n)return;const r=this.encoders,[o,a]=this.visibleRange,l=d=>d.accessor||(f=>0),c=l(r.x),h=l(r.x2);this.prepareXIndexer(t,n,s);const u=[0,0];this.updateFrac(u);for(let d=n;d<s;d++){const f=t[d];let g=c(f),p=h(f);if(g>p&&([g,p]=[p,g]),p<o||g>a)continue;g<o&&(g=o),p>a&&(p=a),this.variableBuilder.updateFromDatum(f),u[0]=0,u[1]=0;const m=1;this.variableBuilder.pushAll();for(let v=0;v<=m;v++)u[0]=v/m,u[1]=0,this.variableBuilder.pushAll(),u[1]=1,this.variableBuilder.pushAll();this.variableBuilder.pushAll(),this.addToXIndex(f)}this.registerBatch(e)}}class uge extends ow{constructor({encoders:e,attributes:t,tessellationThreshold:n=1/0,visibleRange:s=[-1/0,1/0],numItems:r}){super({encoders:e,attributes:t,numVertices:n==1/0?r*6:void 0}),this.visibleRange=s,this.tessellationThreshold=n||1/0,this.updateSide=this.variableBuilder.createUpdater("side",1),this.updatePos=this.variableBuilder.createUpdater("pos",1)}addBatch(e,t,n=0,s=t.length){this.prepareXIndexer(t,n,s);for(let r=n;r<s;r++){const o=t[r];this.variableBuilder.updateFromDatum(o),this.updateSide(-.5),this.updatePos(0),this.variableBuilder.pushAll();const a=1;for(let l=0;l<=a;l++)this.updatePos(l/a),this.updateSide(-.5),this.variableBuilder.pushAll(),this.updateSide(.5),this.variableBuilder.pushAll();this.variableBuilder.pushAll(),this.addToXIndex(o)}this.registerBatch(e)}}class dge extends ow{constructor({encoders:e,attributes:t,numItems:n=void 0}){super({encoders:e,attributes:t,numVertices:n})}}class fge extends ow{constructor({encoders:e,attributes:t,numItems:n=void 0}){super({encoders:e,attributes:t,numVertices:n})}toArrays(){const e=this.variableBuilder.arrays;for(let t of Object.values(e))t.divisor=1;return super.toArrays()}}class gge extends ow{constructor({encoders:e,attributes:t,fontMetrics:n,properties:s,numCharacters:r=void 0}){super({encoders:e,attributes:t,numVertices:r*6}),this.metadata=n,this.metrics=n,this.properties=s;const o=e.text.channelDef;this.numberFormat=!_a(o)&&o.format?hs(o.format):a=>a,this.updateVertexCoord=this.variableBuilder.createUpdater("vertexCoord",2),this.updateTextureCoord=this.variableBuilder.createUpdater("textureCoord",2),this.updateWidth=this.variableBuilder.createUpdater("width",1)}addBatch(e,t,n=0,s=t.length){const r=this.properties.align||"left",o=this.properties.logoLetters??!1,a=this.metadata.common.base,l=this.metadata.common.scaleH;let c=-rp;switch(this.properties.baseline){case"top":c+=this.metrics.capHeight;break;case"middle":c+=this.metrics.capHeight/2;break;case"bottom":c-=this.metrics.descent;break}const h=this.encoders.text.accessor||this.encoders.text,u=[0,0];this.updateVertexCoord(u);const d=[0,0];this.updateTextureCoord(d),this.prepareXIndexer(t,n,s);for(let f=n;f<s;f++){const g=t[f],p=this.numberFormat(h(g)),m=Xi(p)?p:p===null?"":""+p;if(m.length==0)continue;this.variableBuilder.updateFromDatum(g);const v=o?m.length:this.metrics.measureWidth(m);this.updateWidth(v);let b=r=="right"?-v:r=="center"?-v/2:0;if(!o){const k=this.metrics.getCharByCode(m.charCodeAt(0));b-=(k.width-k.xadvance)/a/2}let w=-.5,y=1,x=1;for(let k=0;k<m.length;k++){const S=this.metrics.getCharByCode(m.charCodeAt(k)),L=o?1:S.xadvance/a;if(S.id==32){b+=L;continue}o?(x=(S.width+rp*2)/S.width,b=-x/2,y=(S.height+rp*2)/S.height,w=-.5-rp/S.height):(y=S.height/a,w=-(S.height+S.yoffset+c)/a,x=S.width/a);const D=S.x,N=S.y;u[0]=b,u[1]=w+y,d[0]=D/l,d[1]=N/l,this.variableBuilder.pushAll(),u[0]=b+x,u[1]=w+y,d[0]=(D+S.width)/l,d[1]=N/l,this.variableBuilder.pushAll(),u[0]=b,u[1]=w,d[0]=D/l,d[1]=(N+S.height)/l,this.variableBuilder.pushAll(),u[0]=b+x,u[1]=w+y,d[0]=(D+S.width)/l,d[1]=N/l,this.variableBuilder.pushAll(),u[0]=b,u[1]=w,d[0]=D/l,d[1]=(N+S.height)/l,this.variableBuilder.pushAll(),u[0]=b+x,u[1]=w,d[0]=(D+S.width)/l,d[1]=(N+S.height)/l,this.variableBuilder.pushAll(),b+=L}this.addToXIndex(g)}this.registerBatch(e)}}const I6=`#define PI 3.141593
uniform View{mediump vec2 uViewOffset;mediump vec2 uViewScale;mediump vec2 uViewportSize;lowp float uDevicePixelRatio;lowp float uViewOpacity;bool uPickingEnabled;};/***Maps a coordinate on the unit scale to a normalized device coordinate.*(0,0)is at the bottom left corner.*/vec4 unitToNdc(vec2 coord){return vec4((coord*uViewScale+uViewOffset)*2.0-1.0,0.0,1.0);}vec4 unitToNdc(float x,float y){return unitToNdc(vec2(x,y));}vec4 pixelsToNdc(vec2 coord){return unitToNdc(coord/uViewportSize);}vec4 pixelsToNdc(float x,float y){return pixelsToNdc(vec2(x,y));}float linearstep(float edge0,float edge1,float x){return clamp((x-edge0)/(edge1-edge0),0.0,1.0);}/***Specialized linearstep for doing antialiasing*/float distanceToRatio(float d){return clamp(d*uDevicePixelRatio+0.5,0.0,1.0);}vec4 distanceToColor(float d,vec4 fill,vec4 stroke,float halfStrokeWidth){if(halfStrokeWidth>0.0){float sd=abs(d)-halfStrokeWidth;return mix(stroke,d<=0.0 ? fill : vec4(0.0),distanceToRatio(sd));}else{return fill*distanceToRatio(-d);}}`,pge="const float inf=1.0/0.0;vec3 getDiscreteColor(sampler2D s,int index){return texelFetch(s,ivec2(index % textureSize(s,0).x,0),0).rgb;}vec3 getInterpolatedColor(sampler2D s,float unitValue){return texture(s,vec2(unitValue,0.0)).rgb;}float clampToRange(float value,vec2 range){return clamp(value,min(range[0],range[1]),max(range[0],range[1]));}float scaleIdentity(float value){return value;}float scaleLinear(float value,vec2 domain,vec2 range){float domainSpan=domain[1]-domain[0];float rangeSpan=range[1]-range[0];return(value-domain[0])/domainSpan*rangeSpan+range[0];}float scaleLog(float value,vec2 domain,vec2 range,float base){return scaleLinear(log(value)/log(base),log(domain)/log(base),range);}float symlog(float value,float constant){return sign(value)*log(abs(value/constant)+1.0);}float scaleSymlog(float value,vec2 domain,vec2 range,float constant){return scaleLinear(symlog(value,constant),vec2(symlog(domain[0],constant),symlog(domain[1],constant)),range);}float scalePow(float value,vec2 domain,vec2 range,float exponent){return scaleLinear(pow(abs(value),exponent)*sign(value),pow(abs(domain),vec2(exponent))*sign(domain),range);}float scaleBand(float value,vec2 domainExtent,vec2 range,float paddingInner,float paddingOuter,float align,float band){float start=range[0];float stop=range[1];float rangeSpan=stop-start;float n=domainExtent[1]-domainExtent[0];paddingInner=int(n)>1 ? paddingInner : 0.0;float step=rangeSpan/max(1.0,n-paddingInner+paddingOuter*2.0);start+=(rangeSpan-step*(n-paddingInner))*align;float bandwidth=step*(1.0-paddingInner);return start+(value-domainExtent[0])*step+bandwidth*band;}float scaleBandHp(vec2 value,vec3 domainExtent,vec2 range,float paddingInner,float paddingOuter,float align,float band){float start=range[0];float stop=range[1];float rangeSpan=stop-start;vec2 domainStart=domainExtent.xy;float n=domainExtent[2];float step=rangeSpan/max(1.0,n-paddingInner+paddingOuter*2.0);start+=(rangeSpan-step*(n-paddingInner))*align;float bandwidth=step*(1.0-paddingInner);float hi=max(value[0]-domainStart[0],-inf);float lo=max(value[1]-domainStart[1],-inf);return dot(vec4(start,hi,lo,bandwidth),vec4(1.0,step,step,band));}",mge=`/***Describes where a sample facet should be shown. Interpolating between the*current and target positions/heights allows for transitioning between facet*configurations.*/struct SampleFacetPosition{float pos;float height;float targetPos;float targetHeight;};/***Trasition fraction[0,1]between the current and target configurations.*/uniform float uTransitionOffset;
#if !defined(SAMPLE_FACET_UNIFORM) && !defined(SAMPLE_FACET_TEXTURE)
SampleFacetPosition getSampleFacetPos(){return SampleFacetPosition(0.0,1.0,0.0,1.0);}
#elif defined(SAMPLE_FACET_UNIFORM)
/***Location and height of the band on the Y axis on a normalized[0,1]scale.*Elements: curr pos,curr height,target pos,target height*/uniform vec4 uSampleFacet;SampleFacetPosition getSampleFacetPos(){return SampleFacetPosition(1.0-uSampleFacet.x-uSampleFacet.y,uSampleFacet.y,1.0-uSampleFacet.z-uSampleFacet.w,uSampleFacet.w);}
#elif defined(SAMPLE_FACET_TEXTURE)
uniform sampler2D uSampleFacetTexture;SampleFacetPosition getSampleFacetPos(){vec4 texel=texelFetch(uSampleFacetTexture,ivec2(int(attr_facetIndex),0),0);return SampleFacetPosition(1.0-texel.r-texel.g,texel.g,1.0-texel.r-texel.g,texel.g);}
#endif
bool isFacetedSamples(SampleFacetPosition facetPos){return facetPos!=SampleFacetPosition(0.0,1.0,0.0,1.0);}bool isFacetedSamples(){return isFacetedSamples(getSampleFacetPos());}bool isInTransit(){return uTransitionOffset>0.0;}float getTransitionFraction(float xPos){return smoothstep(0.0,0.7+uTransitionOffset,(xPos-uTransitionOffset)*2.0);}vec2 applySampleFacet(vec2 pos){SampleFacetPosition facetPos=getSampleFacetPos();if(!isFacetedSamples(facetPos)){return pos;}else if(isInTransit()){vec2 interpolated=mix(vec2(facetPos.pos,facetPos.height),vec2(facetPos.targetPos,facetPos.targetHeight),getTransitionFraction(pos.x));return vec2(pos.x,interpolated[0]+pos.y*interpolated[1]);}else{return vec2(pos.x,facetPos.pos+pos.y*facetPos.height);}}float getSampleFacetHeight(vec2 pos){SampleFacetPosition facetPos=getSampleFacetPos();if(!isFacetedSamples(facetPos)){return 1.0;}else if(isInTransit()){return mix(facetPos.height,facetPos.targetHeight,getTransitionFraction(pos.x));}else{return facetPos.height;}}`,_ge=`/**Based on concepts presented at:*https:*https:*/out highp vec4 vPickingColor;/***Passes the unique id to the fragment shader as a color if picking is enabled.*Returns true if picking is enabled.*/bool setupPicking(){if(uPickingEnabled){
#ifdef uniqueId_DEFINED
int id=int(getScaled_uniqueId());vPickingColor=vec4(ivec4(id>>0,id>>8,id>>16,0xFF)&0xFF)/float(0xFF);
#else
vPickingColor=vec4(1.0);
#endif
return true;}return false;}`,bge="in highp vec4 vPickingColor;",wT=Symbol("cacheMap");function fm(i,e,t){let n=fv(i).get(e);return n===void 0&&(n=t(e),fv(i).set(e,n)),n}function Sq(i,e){fv(i).delete(e)}function CC(i,e){const t=fv(i);for(const n of t.keys())n.startsWith(e)&&t.delete(n);fv(i).delete(e)}function xq(i){i[wT]=new Map}function fv(i){return i[wT]||xq(i),i[wT]}function vge(i,e,t,n){const s=Xi(i)?i:i.name,r=!Xi(i)&&i.extent||[0,1];if(t===void 0&&!Xi(i)&&(t=i.count),s){const o=RR(s);if(wr(o)){const a=Dq(o,{extent:r,count:t});return LL(e,{minMag:e.LINEAR,format:e.RGB,height:1,wrap:e.CLAMP_TO_EDGE},a,n)}else{if(Ro(o))return yT(o,e);throw new Error("Unknown scheme: "+s)}}}function wge(i,e="rgb",t,n){const s=cL(i,Xi(e)?e:e.type,Xi(e)?void 0:e.gamma),r=Dq(s);return LL(t,{minMag:t.LINEAR,format:t.RGB,height:1,wrap:t.CLAMP_TO_EDGE},r,n)}function yge(i,e,t,n){const s=Math.max(i.length,t||0),r=new Float32Array(s);for(let o=0;o<s;o++)r[o]=i[o%i.length];return LL(e,{minMag:e.NEAREST,format:e.RED,internalFormat:e.R32F,height:1},r,n)}function yT(i,e,t,n){const s=Lq(i,t);return LL(e,{minMag:e.NEAREST,format:e.RGB,height:1},s,n)}function Dq(i,{extent:e=[0,1],reverse:t=!1,count:n=256}={}){const s=e[0],r=o0(e)-s,o=Kb(n).map(a=>a/(n-1)).map(a=>s+a/r).map(i);return t&&o.reverse(),Lq(o)}function Lq(i,e){const t=Math.max(i.length,e||0),n=new Uint8Array(t*3);for(let s=0;s<t;s++){const r=of(i[s%i.length]).rgb();n[s*3+0]=r.r,n[s*3+1]=r.g,n[s*3+2]=r.b}return n}class Cge{constructor(e,t){this._container=e,this._sizeSource=t,this._shaderCache=new Map,this._listeners=[],this.rangeTextures=new WeakMap;const n=document.createElement("canvas");e.appendChild(n);const s=Kfe(n,{antialias:!0,depth:!1,premultipliedAlpha:!0});if(!s)throw new Error("Unable to initialize WebGL. Your browser or machine may not support it.");if(!l0(s))throw new Error("Your web browser does not support WebGL 2.0. Chrome, Firefox, and Safari Tech Preview should work.");bq(s),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),this.canvas=n,this.gl=s,this._pickingAttachmentOptions=[{format:s.RGBA,type:s.UNSIGNED_BYTE,minMag:s.LINEAR,wrap:s.CLAMP_TO_EDGE}],this._pickingBufferInfo=Hfe(s,this._pickingAttachmentOptions),s.bindFramebuffer(s.FRAMEBUFFER,null),this.adjustGl(),this._resizeObserver=new ResizeObserver(r=>{this.invalidateSize(),this._emit("resize")}),this._resizeObserver.observe(this._container),this._updateDpr()}invalidateSize(){this._logicalCanvasSize=void 0,this._updateDpr(),this.adjustGl()}_updateDpr(){this.dpr=window.devicePixelRatio}compileShader(e,t){const n="#version 300 es",s="precision mediump float;";Ro(t)&&(t=t.join(`

`));const r=this.gl,o=t.replaceAll(/ {2,}|^\s*\/\/.*$/gm,"");let a=this._shaderCache.get(o);if(!a){const l=[n,s,t].join(`

`);a=r.createShader(e),r.shaderSource(a,l),r.compileShader(a),this._shaderCache.set(o,a)}return a}adjustGl(){const e=this.getLogicalCanvasSize();this.canvas.style.width=`${e.width}px`,this.canvas.style.height=`${e.height}px`;const t=this.getPhysicalCanvasSize(e);this.canvas.width=t.width,this.canvas.height=t.height,Ufe(this.gl,this._pickingBufferInfo,this._pickingAttachmentOptions)}finalize(){this._resizeObserver.unobserve(this._container),this.canvas.remove()}getPhysicalCanvasSize(e){return e=e||this.getLogicalCanvasSize(),{width:e.width*this.dpr,height:e.height*this.dpr}}getLogicalCanvasSize(){var e;if(this._logicalCanvasSize)return this._logicalCanvasSize;const t=((e=this._sizeSource)==null?void 0:e.call(this))??{width:void 0,height:void 0},n=window.getComputedStyle(this._container,null),s=t.width??this._container.clientWidth-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight),r=t.height??this._container.clientHeight-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom);return this._logicalCanvasSize={width:s,height:r},this._logicalCanvasSize}addEventListener(e,t){this._listeners.push({type:e,listener:t})}_emit(e){for(const t of this._listeners)t.type===e&&t.listener()}readPickingPixel(e,t){const n=this.gl;e*=this.dpr,t*=this.dpr;const s=this.getPhysicalCanvasSize().height,r=new Uint8Array(4);return n.bindFramebuffer(n.FRAMEBUFFER,this._pickingBufferInfo.framebuffer),n.readPixels(e,s-t-1,1,1,n.RGBA,n.UNSIGNED_BYTE,r),n.bindFramebuffer(n.FRAMEBUFFER,null),r}clearAll(){const e=this.gl,{width:t,height:n}=this.getPhysicalCanvasSize();e.viewport(0,0,t,n),e.disable(e.SCISSOR_TEST),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)}createRangeTexture(e,t=!1){const n=this.rangeTextures.get(e);if(!t&&n)return;function s(o,a){return af(a.type)?a.domain().length:a.type=="threshold"?a.domain().length+1:a.type=="quantize"||a.type=="quantile"?o??4:o}const r=e.channel;if(Bd(r)){const o=e.getScaleProps(),a=e.getScale(),l=a.range();let c;if(o.scheme)if(a.type=="threshold"&&l)c=yT(l,this.gl,a.domain().length,n);else{let h=Xi(o.scheme)?void 0:o.scheme.count;h=s(h,a),c=vge(o.scheme,this.gl,h,n)}else lL(a.type)||Nr(a.type)&&l.length>2?c=wge(l,o.interpolate,this.gl,n):c=yT(l,this.gl,a.domain().length,n);this.rangeTextures.set(e,c)}else{const o=e.getScale();if(o.type==="ordinal"||Yg(o.type)){const a=gL(r)?vj(r):c=>c,l=e.getScale().range();this.rangeTextures.set(e,yge(l.map(a),this.gl,o.domain().length,n))}}}}function Sge(i,e="",t=0){const n=/ERROR:\s*\d+:(\d+)/gi,s=[...e.matchAll(n)],r=new Map(s.map((o,a)=>{const l=parseInt(o[1]),c=s[a+1],h=c?c.index:e.length,u=e.substring(o.index,h);return[l-1,u]}));return i.split(`
`).map((o,a)=>{const l=r.get(a);return`${a+1+t}: ${o}${l?`

^^^ ${l}`:""}`}).join(`
`)}function xge(i,e,t){const n=i.createProgram();i.attachShader(n,e),i.attachShader(n,t),i.linkProgram(n);function s(){let r,o;if(!i.getProgramParameter(n,i.LINK_STATUS)){r=i.getProgramInfoLog(n);for(const a of[e,t])i.getShaderParameter(a,i.COMPILE_STATUS)||(r=i.getShaderInfoLog(a),o=Sge(i.getShaderSource(a),r,0)+`
Error compiling: ${r}`,i.deleteShader(a));i.deleteProgram(n)}if(r)return{message:r,detail:o}}return{program:n,getProgramErrors:s}}function LL(i,e,t,n){return n?Wj(i,n,t,e):n=dv(i,{...e,src:t}),n}function Dge(...i){const e={get(t,n,s){for(const r of i){const o=r()[n];if(o!==void 0)return o}},has(t,n,s){for(const r of i){const o=r();if(n in o)return!0}return!1}};return new Proxy({},e)}function Lge(i){return Xi(i)||yr(i)||GD(i)}const kge="SAMPLE_FACET_UNIFORM",T6="SAMPLE_FACET_TEXTURE";class aw{constructor(e){this.unitView=e,this.encoders=void 0,this.bufferInfo=void 0,this.programInfo=void 0,this.vertexArrayInfo=void 0,this.domainUniformInfo=void 0,this.viewUniformInfo=void 0,this.rangeMap=new Age,this.defaultProperties={get clip(){return["x","y"].map(t=>e.getScaleResolution(t)).some(t=>(t==null?void 0:t.isZoomable())??!1)},xOffset:0,yOffset:0,minBufferSize:0},this.properties=Dge(typeof this.unitView.spec.mark=="object"?()=>this.unitView.spec.mark:()=>({}),()=>this.defaultProperties)}get opaque(){return!1}getAttributes(){throw new Error("Not implemented!")}getSupportedChannels(){return["sample","facetIndex","x","y","color","opacity","search","uniqueId"]}getDefaultEncoding(){const e={sample:void 0,uniqueId:void 0};return this.isPickingParticipant()&&(e.uniqueId={field:"_uniqueId"}),e}fixEncoding(e){return e}get encoding(){return fm(this,"encoding",()=>{const e=this.getDefaultEncoding(),t=this.unitView.getEncoding(),n=o=>{const a=this.properties[o];return Lge(a)&&{value:a}},s=Object.fromEntries(this.getSupportedChannels().map(o=>[o,n(o)]).filter(o=>o[1].value!==void 0)),r=this.fixEncoding({...e,...s,...t});for(const o of Object.keys(r))this.getSupportedChannels().includes(o)||delete r[o];return r})}getContext(){return this.unitView.context}getType(){return this.unitView.getMarkType()}initializeData(){}initializeEncoders(){this.encoders=ehe(this)}async initializeGraphics(){}updateGraphicsData(){}getSampleFacetMode(){if(this.encoders.facetIndex)return T6;if(this.unitView.getAncestors().find(e=>"samples"in e.spec))return kge}createAndLinkShaders(e,t,n=[]){const s=this.getAttributes();n.push("// view: "+this.unitView.getPathString()),this.domainUniforms=[];let r=[];const o=this.getSampleFacetMode();o&&n.push(`#define ${o}`);for(const u of s){let d;if(u in this.encoding)d=u;else continue;const f=this.encoding[d];if(f)if(_a(f))r.push(Jfe(d,f.value));else{const g=yo(f)&&f.resolutionChannel||d,p=this.unitView.getScaleResolution(g).getScale(),m=ege(d,p,f);r.push(m.glsl),m.domainUniform&&this.domainUniforms.push(m.domainUniform)}}const a=this.domainUniforms.length?`layout(std140) uniform Domains {
`+this.domainUniforms.map(u=>`    ${u}
`).join("")+`};

`:"",l=[`precision highp float;
`,...n,I6,pge,a,...r,mge,_ge,e],c=[...n,I6,bge,t],h=this.gl;this.programStatus=xge(h,this.glHelper.compileShader(h.VERTEX_SHADER,l),this.glHelper.compileShader(h.FRAGMENT_SHADER,c))}finalizeGraphicsInitialization(){const e=this.programStatus.getProgramErrors();if(e){e.detail&&console.warn(e.detail);const t=new Error("Cannot create shader program: "+e.message);throw t.view=this.unitView,t}this.programInfo=Dfe(this.gl,this.programStatus.program),delete this.programStatus,this.domainUniforms.length&&(this.domainUniformInfo=y6(this.gl,this.programInfo,"Domains")),this.viewUniformInfo=y6(this.gl,this.programInfo,"View"),this.gl.useProgram(this.programInfo.program),this._setDatums(),Br(this.programInfo,{uSampleFacet:[0,1,0,1],uTransitionOffset:0})}_setDatums(){for(const[e,t]of Object.entries(this.encoding))if(iw(t)){const n=this.encoders[e],s=n.indexer?n.indexer(t.datum):jS(n.scale.type)?Cq(+t.datum):+t.datum;Br(this.programInfo,{[aO+e]:s})}}deleteGraphicsData(){if(this.bufferInfo){const e=this.gl;for(let t=0;t<8;t++)e.disableVertexAttribArray(t);Object.values(this.bufferInfo.attribs).forEach(t=>this.gl.deleteBuffer(t.buffer)),this.bufferInfo.indices&&this.gl.deleteBuffer(this.bufferInfo.indices),this.bufferInfo=void 0}}updateBufferInfo(e){if(this.gl.bindVertexArray(null),this.bufferInfo&&e.vertexCount<=this.bufferInfo.allocatedVertices)for(const[t,n]of Object.entries(e.arrays))n.data&&Fhe(this.gl,this.bufferInfo.attribs[t],n.data,0);else this.deleteGraphicsData(),this.bufferInfo=Whe(this.gl,e.arrays,{numElements:e.vertexCount}),this.bufferInfo.allocatedVertices=e.allocatedVertices,this.vertexArrayInfo=void 0}get glHelper(){return this.getContext().glHelper}get gl(){return this.glHelper.gl}onBeforeSampleAnimation(){}onAfterSampleAnimation(){}isReady(){return this.bufferInfo&&this.programInfo}isPickingParticipant(){if(this.properties.tooltip===null)return!1;for(const e of this.unitView.getAncestors())if(!e.isPickingSupported())return!1;return!0}prepareRender(e){const t=this.glHelper,n=this.gl,s=[];if(s.push(()=>{this.vertexArrayInfo||(this.vertexArrayInfo=$fe(this.gl,this.programInfo,this.bufferInfo)),n.useProgram(this.programInfo.program)}),this.domainUniformInfo){for(const[o,a]of Object.entries(this.domainUniformInfo.setters)){const l=o.substring(vq.length),c=this.encoding[l],h=yo(c)&&c.resolutionChannel||l,u=this.unitView.getScaleResolution(h);if(u){const d=u.getScale();s.push(()=>{const f=af(d.type)?[0,d.domain().length]:d.domain();a(jS(d.type)?rge(f):f)})}}s.push(()=>C6(n,this.programInfo,this.domainUniformInfo))}for(const[o,a]of Object.entries(this.encoding))if(yo(a)){const l=yo(a)&&a.resolutionChannel||o,c=this.unitView.getScaleResolution(l),h=t.rangeTextures.get(c);h&&s.push(()=>Br(this.programInfo,{[_T+o]:h}))}this.getSampleFacetMode()==T6&&s.push(()=>{let o;for(const a of this.unitView.getAncestors())if(o=a.getSampleFacetTexture(),o)break;if(!o)throw new Error("No facet texture available. This is bug.");Br(this.programInfo,{uSampleFacetTexture:o})});const r=(e.picking??!1)&&this.isPickingParticipant();return s.push(()=>S6(this.viewUniformInfo,{uViewOpacity:this.unitView.getEffectiveOpacity(),uPickingEnabled:r})),this.opaque||e.picking?s.push(()=>n.disable(n.BLEND)):s.push(()=>n.enable(n.BLEND)),s}prepareSampleFacetRendering(e){const t=e.sampleFacetRenderingOptions,n=this.programInfo.uniformSetters.uSampleFacet;if(t&&n){const s=t.locSize?t.locSize.location:0,r=t.locSize?t.locSize.size:1;if(s>1||s+r<0)return!1;const o=t.targetLocSize?t.targetLocSize.location:s,a=t.targetLocSize?t.targetLocSize.size:r;this.gl.uniform4f(n.location,s,r,o,a)}return!0}render(e){}createRenderCallback(e,t){var n;const s=this;let r;const o=(n=this.unitView.getScaleResolution("x"))==null?void 0:n.getScale(),a=o&&Nr(o.type),l=["index","locus"].includes(o==null?void 0:o.type)?-1:0,c=[0,0];r=d=>{if(a&&d.xIndex){const f=o.domain(),g=d.xIndex(f[0]+l,f[1],c),p=g[0],m=g[1]-p;m>0&&e(p,m)}else e(d.offset,d.count)};const h=this.rangeMap.get(void 0).count==0?t.facetId:void 0,u=this.rangeMap.get(h);return t.sampleFacetRenderingOptions?function(){u.count&&s.prepareSampleFacetRendering(t)&&r(u)}:function(){u.count&&r(u)}}setViewport(e,t){const n=this.glHelper.dpr,s=this.gl,r=this.properties,o=this.glHelper.getLogicalCanvasSize(),a=.5,l=(r.xOffset||0)+a,c=(r.yOffset||0)+a;let h,u=e;if(r.clip||t){let d=0,f=0,g;t?(u=r.clip?e.intersect(t):t,g=[e.width/u.width,e.height/u.height],f=Math.max(0,e.y2-t.y2),d=Math.max(0,e.x2-t.x2)):g=[1,1];const p=[e.x,o.height-u.y2,Math.max(0,u.width),Math.max(0,u.height)].map(w=>w*n),m=p.map(w=>Math.floor(w)),[v,b]=p.map((w,y)=>w-m[y]);s.viewport(...m),s.scissor(...m),s.enable(s.SCISSOR_TEST),h={uViewOffset:[(l+d+v)/u.width,-(c+f-b)/u.height],uViewScale:g}}else s.viewport(0,0,o.width*n,o.height*n),s.disable(s.SCISSOR_TEST),h={uViewOffset:[(e.x+l)/o.width,(o.height-e.y-c-e.height)/o.height],uViewScale:[e.width/o.width,e.height/o.height]};return S6(this.viewUniformInfo,{...h,uViewportSize:[e.width,e.height],uDevicePixelRatio:this.glHelper.dpr}),C6(this.gl,this.programInfo,this.viewUniformInfo),u.height>0&&u.width>0}findDatumAt(e,t){}}class Age extends tf{constructor(){super([],JSON.stringify)}get(e){let t=super.get(e);return t===void 0&&(t={offset:0,count:0,xIndex:void 0},super.set(e,t)),t}migrateEntries(e){for(const[t,n]of e.entries())Object.assign(this.get(t),n)}}function CT(i,e){const t=she(e);let n=i[e]&&{...i[e]},s=i[t]&&{...i[t]};if(!(_a(n)||_a(s))){if(n){if(!yo(i[e]))return;if(s){if(n.type!="quantitative"){const r=(1-(n.band||1))/2;n.band=r,s.band=-r}}else if(n.type=="quantitative")s={datum:0};else{s={...n};const r=(1-(n.band??1))/2;n.band=0+r,s.band=1-r}}else n={value:0},s={value:1};i[e]=n,i[t]=s}}function kq(i,e){i.stroke||(e?i.stroke={value:null}:i.stroke={resolutionChannel:"color",...i.color}),_a(i.stroke)&&i.stroke.value===null&&(i.strokeWidth={value:0}),i.strokeOpacity||(i.strokeOpacity={resolutionChannel:"opacity",...i.opacity})}function Aq(i,e){_a(i.fill)&&i.fill.value===null?i.fillOpacity={value:0}:i.fill||(i.fill={resolutionChannel:"color",...i.color},!e&&!i.fillOpacity&&(i.fillOpacity={value:0})),i.fillOpacity||(e?i.fillOpacity={resolutionChannel:"opacity",...i.opacity}:i.fillOpacity={value:0})}class Ege extends aw{constructor(e){super(e),Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x2:void 0,y2:void 0,filled:!0,color:"#4c78a8",opacity:1,strokeWidth:3,cornerRadius:0,minWidth:.5,minHeight:.5,minOpacity:1,tessellationZoomThreshold:10,tessellationTiles:35}))}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","fill","stroke","fillOpacity","strokeOpacity","strokeWidth"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","fill","stroke","fillOpacity","strokeOpacity","strokeWidth"]}get opaque(){return fm(this,"opaque",()=>!this._isRoundedCorners()&&!this._isStroked()&&_a(this.encoding.fillOpacity)&&this.encoding.fillOpacity.value==1&&this.properties.minOpacity==1)&&this.unitView.getEffectiveOpacity()==1}fixEncoding(e){return CT(e,"x"),CT(e,"y"),kq(e,this.properties.filled),Aq(e,this.properties.filled),delete e.color,delete e.opacity,e}onBeforeSampleAnimation(){}onAfterSampleAnimation(){}_isRoundedCorners(){const e=this.properties;return e.cornerRadius||e.cornerRadiusBottomLeft||e.cornerRadiusBottomRight||e.cornerRadiusTopLeft||e.cornerRadiusTopRight}_isStroked(){const e=this.encoding.strokeWidth;return!(_a(e)&&!e.value)}async initializeGraphics(){await super.initializeGraphics();const e=[];this._isRoundedCorners()&&e.push("ROUNDED_CORNERS"),this._isStroked()&&e.push("STROKED"),this.createAndLinkShaders(Zfe,Yfe,e.map(t=>"#define "+t))}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;Br(this.programInfo,{uMinSize:[e.minWidth,e.minHeight],uMinOpacity:e.minOpacity,uCornerRadii:[e.cornerRadiusTopRight??e.cornerRadius,e.cornerRadiusBottomRight??e.cornerRadius,e.cornerRadiusTopLeft??e.cornerRadius,e.cornerRadiusBottomLeft??e.cornerRadius]})}updateGraphicsData(){const e=this.unitView.getCollector(),t=e.getItemCount(),n=new hge({encoders:this.encoders,attributes:this.getAttributes(),numItems:t});n.addBatches(e.facetBatches);const s=n.toArrays();this.rangeMap.migrateEntries(s.rangeMap),this.updateBufferInfo(s)}prepareRender(e){const t=super.prepareRender(e);return t.push(()=>h0(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((n,s)=>{rw(t,this.vertexArrayInfo,t.TRIANGLE_STRIP,s,n)},e)}findDatumAt(e,t){e=bl(e);const n=this.encoders,s=this.unitView.getCollector().facetBatches.get(e),r=n.x.accessor,o=n.x2.accessor;if(s)return s.find(a=>t>=r(a)&&t<o(a))}}const Ige=`/***The stroke should only grow inwards,e.g,the diameter/outline is not affected by the stroke width.*Thus,a point that has a zero size has no visible stroke. This allows strokes to be used with*geometric zoom,etc.*/uniform bool uInwardStroke;uniform lowp float uMaxRelativePointDiameter;uniform float uScaleFactor;uniform float uMaxPointSize;uniform float uZoomLevel;uniform float uSemanticThreshold;out float vRadius;out float vRadiusWithPadding;out lowp vec4 vFillColor;out lowp vec4 vStrokeColor;out lowp float vShape;out lowp float vHalfStrokeWidth;out mat2 vRotationMatrix;float computeSemanticThresholdFactor(){return getScaled_semanticScore()>=uSemanticThreshold ? 1.0 : 0.0;}/***Computes a scaling factor for the points in a sample-faceted view.*/float getDownscaleFactor(vec2 pos){if(!isFacetedSamples()){return 1.0;}float sampleFacetHeight=getSampleFacetHeight(pos);float maxPointDiameter=sqrt(uMaxPointSize);float factor=sampleFacetHeight*uViewportSize.y*uMaxRelativePointDiameter;return clamp(0.0,maxPointDiameter,factor)/maxPointDiameter;}vec2 getDxDy(){
#if defined(dx_DEFINED) || defined(dy_DEFINED)
return vec2(getScaled_dx(),getScaled_dy())/uViewportSize;
#else
return vec2(0.0,0.0);
#endif
}void main(void){float semanticThresholdFactor=computeSemanticThresholdFactor();if(semanticThresholdFactor<=0.0){gl_PointSize=0.0;gl_Position=vec4(100.0,0.0,0.0,0.0);return;}float size=getScaled_size();vec2 pos=vec2(getScaled_x(),getScaled_y())+getDxDy();gl_Position=unitToNdc(applySampleFacet(pos));float strokeWidth=getScaled_strokeWidth();float diameter=sqrt(size)*uScaleFactor*semanticThresholdFactor*getDownscaleFactor(pos);float opacity=uViewOpacity;if(strokeWidth<=0.0||uInwardStroke){float minDiameter=1.0/uDevicePixelRatio;if(diameter<minDiameter){opacity*=pow(diameter/minDiameter,2.5);diameter=minDiameter;}}float fillOpa=getScaled_fillOpacity()*opacity;float strokeOpa=getScaled_strokeOpacity()*opacity;vShape=getScaled_shape();bool circle=vShape==0.0;float angleInDegrees=getScaled_angle();float angle=-angleInDegrees*PI/180.0;float sinTheta=sin(angle);float cosTheta=cos(angle);vRotationMatrix=mat2(cosTheta,sinTheta,-sinTheta,cosTheta);float roomForRotation=circle ? 1.0 : sin(mod(angle,PI/2.0)+PI/4.0)/sin(PI/4.0);float aaPadding=1.0/uDevicePixelRatio;float rotationPadding=(diameter*roomForRotation)-diameter;float strokePadding=uInwardStroke ? 0.0 : strokeWidth*(circle ? 1.0 : sqrt(3.0));float padding=rotationPadding+strokePadding+aaPadding;gl_PointSize=(diameter+padding)*uDevicePixelRatio;vRadius=diameter/2.0;vRadiusWithPadding=vRadius+padding/2.0;vHalfStrokeWidth=strokeWidth/2.0;vFillColor=vec4(getScaled_fill()*fillOpa,fillOpa);vStrokeColor=vec4(getScaled_stroke()*strokeOpa,strokeOpa);setupPicking();}`,Tge="const lowp vec4 white=vec4(1.0);const lowp vec4 black=vec4(0.0,0.0,0.0,1.0);uniform bool uInwardStroke;uniform float uGradientStrength;in float vRadius;in float vRadiusWithPadding;in lowp vec4 vFillColor;in lowp vec4 vStrokeColor;in lowp float vShape;in lowp float vHalfStrokeWidth;in mat2 vRotationMatrix;out lowp vec4 fragColor;const float CIRCLE=0.0;const float SQUARE=1.0;const float TRIANGLE_UP=2.0;const float CROSS=3.0;const float DIAMOND=4.0;const float TRIANGLE_DOWN=5.0;const float TRIANGLE_RIGHT=6.0;const float TRIANGLE_LEFT=7.0;float circle(vec2 p,float r){return length(p)-r;}float square(vec2 p,float r){p=abs(p);return max(p.x,p.y)-r;}float equilateralTriangle(vec2 p,float r,bool flip,bool swap){if(swap){p.xy=p.yx;}if(flip){p.y=-p.y;}float k=sqrt(3.0);float kr=k*r;p.y-=kr/2.0;return max((abs(p.x)*k+p.y)/2.0,-p.y-kr);}float crossShape(vec2 p,float r){p=abs(p);vec2 b=vec2(0.4,1.0)*r;vec2 v=abs(p)-b.xy;vec2 h=abs(p)-b.yx;return min(max(v.x,v.y),max(h.x,h.y));}float diamond(vec2 p,float r){p=abs(p);return(max(abs(p.x-p.y),abs(p.x+p.y))-r)/sqrt(2.0);}void main(){float d;vec2 p=vRotationMatrix*(2.0*gl_PointCoord-1.0)*vRadiusWithPadding;float r=vRadius;if(vShape==CIRCLE){d=circle(p,r);}else if(vShape==SQUARE){d=square(p,r);}else if(vShape==TRIANGLE_UP){d=equilateralTriangle(p,r,true,false);}else if(vShape==CROSS){d=crossShape(p,r);}else if(vShape==DIAMOND){d=diamond(p,r);}else if(vShape==TRIANGLE_DOWN){d=equilateralTriangle(p,r,false,false);}else if(vShape==TRIANGLE_RIGHT){d=equilateralTriangle(p,r,false,true);}else if(vShape==TRIANGLE_LEFT){d=equilateralTriangle(p,r,true,true);}else{d=0.0;}if(!uPickingEnabled){lowp vec4 fillColor=mix(vFillColor,white,-d*uGradientStrength/vRadius);fragColor=distanceToColor(d+(uInwardStroke ? vHalfStrokeWidth : 0.0),fillColor,vStrokeColor,vHalfStrokeWidth);}else if(d-vHalfStrokeWidth<=0.0){fragColor=vPickingColor;}else{discard;}}",Qc=1<<0,Fu=1<<1,lO=1<<2,Nge={};class Ln{get behavior(){return 0}constructor(){this.children=[],this.parent=void 0,this.completed=!1}reset(){this.completed=!1;for(const e of this.children)e.reset()}initialize(){}_updatePropagator(){this._propagate=Function("children",Kb(this.children.length).map(e=>`const child${e} = children[${e}];`).join(`
`)+`return function propagate(datum) {${Kb(this.children.length).map(e=>`child${e}.handle(datum);`).join(`
`)}}`)(this.children)}setParent(e){this.parent=e}addChild(e){if(e.parent)throw new Error("Cannot add the child! It already has a parent.");return this.children.push(e),e.setParent(this),this._updatePropagator(),this}adopt(e){e.parent&&e.parent.removeChild(e),this.addChild(e)}adoptChildrenOf(e){for(const t of e.children)this.adopt(t)}insertAsParent(e){if(this.isRoot())throw new Error("Cannot insert a new parent for a root node!");e.parent=this.parent,this.parent.children[this.parent.children.indexOf(this)]=e,this.parent._updatePropagator(),this.parent=void 0,e.addChild(this)}removeChild(e){const t=this.children.indexOf(e);if(t>-1)this.children.splice(t,1),e.parent=void 0,this._updatePropagator();else throw new Error("Trying to remove an unknown child node!")}excise(){if(this.isRoot())throw new Error("Cannot excise root node!");if(this.isTerminal())this.parent.removeChild(this);else if(this.children.length==1){const e=this.children[0];e.setParent(this.parent),this.parent.children[this.parent.children.indexOf(this)]=e,this.parent._updatePropagator(),this.setParent(void 0),this.children.length=0}else throw new Error("Cannot excise a node that has multiple children!")}isRoot(){return!this.parent}isBranching(){return this.children.length>1}isTerminal(){return this.children.length==0}visit(e){e(this);for(const t of this.children)t.visit(e);e.afterChildren&&e.afterChildren(this)}subtreeToString(e=0){var t;const n=this.children.map(s=>s.subtreeToString(e+1)).join("");return" ".repeat(e*2)+"* "+((t=/^class ([A-Za-z0-9_]+)/.exec(""+this.constructor))==null?void 0:t[1])+`
`+n}getGlobalObject(){return this.parent?this.parent.getGlobalObject():Nge}handle(e){this._propagate(e)}complete(){this.completed=!0;for(const e of this.children)e.complete()}beginBatch(e){for(const t of this.children)t.beginBatch(e)}_propagate(e){}}function Eq(i){return i.type=="file"}function Mge(i){return i.type=="facet"}class Iq extends Ln{constructor(e){super(),this.k=e.size||500,this.reset()}reset(){super.reset(),this.reservoir=[],this.W=void 0,this.ingester=this._initialIngester}_initialIngester(e){this.reservoir.push(e),this.reservoir.length==this.k&&(this.W=Math.exp(Math.log(Math.random())/this.k),this.i=this.k,this.next=this.i,this.ingester=this._finalIngester,this._setNextStop())}_finalIngester(e){++this.i==this.next&&(this.reservoir[Math.floor(Math.random()*this.k)]=e,this.W*=Math.exp(Math.log(Math.random())/this.k),this._setNextStop())}_setNextStop(){this.next+=Math.floor(Math.log(Math.random())/Math.log(1-this.W))+1}handle(e){this.ingester(e)}complete(){for(const e of this.reservoir)this._propagate(e);super.complete()}}function Rge(i,e,t){const n=new Iq({type:"sample",size:i});for(const s of e)n.handle(t(s));return n.complete(),n.reservoir}const Oge={};class Pge extends aw{constructor(e){super(e),Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x:.5,y:.5,color:"#4c78a8",filled:!0,opacity:1,size:100,semanticScore:0,shape:"circle",strokeWidth:2,fillGradientStrength:0,dx:0,dy:0,angle:0,sampleFacetPadding:.1,semanticZoomFraction:.02}))}getAttributes(){return["inwardStroke","uniqueId","facetIndex","x","y","size","semanticScore","shape","strokeWidth","gradientStrength","dx","dy","fill","stroke","fillOpacity","strokeOpacity","angle"]}getSupportedChannels(){return[...super.getSupportedChannels(),"size","semanticScore","shape","strokeWidth","dx","dy","fill","stroke","fillOpacity","strokeOpacity","angle"]}getDefaultEncoding(){return{...super.getDefaultEncoding(),...Oge}}fixEncoding(e){return kq(e,this.properties.filled),Aq(e,this.properties.filled),delete e.color,delete e.opacity,e}initializeData(){super.initializeData();const e=this.unitView.getAccessor("semanticScore");e&&(this.sampledSemanticScores=Float32Array.from(Rge(1e4,this.unitView.getCollector().getData(),e)),this.sampledSemanticScores.sort((t,n)=>t-n))}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(Ige,Tge)}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;Br(this.programInfo,{uInwardStroke:e.inwardStroke,uGradientStrength:e.fillGradientStrength,uMaxRelativePointDiameter:1-2*e.sampleFacetPadding})}updateGraphicsData(){const e=this.unitView.getCollector(),t=e.getItemCount(),n=new dge({encoders:this.encoders,attributes:this.getAttributes(),numItems:Math.max(t,this.properties.minBufferSize||0)});n.addBatches(e.facetBatches);const s=n.toArrays();this.rangeMap.migrateEntries(s.rangeMap),this.updateBufferInfo(s)}_getGeometricScaleFactor(){const e=Math.pow(2,this.properties.geometricZoomBound||0);return Math.pow(Math.min(1,this.unitView.getZoomLevel()/e),1/3)}_getMaxPointSize(){const e=this.encoders.size;return e.constant?e(null):e.scale.range().reduce((t,n)=>Math.max(t,n))}getSemanticThreshold(){if(this.sampledSemanticScores){const e=Math.max(0,1-this.properties.semanticZoomFraction*this.unitView.getZoomLevel());if(e<=0)return-1/0;if(e>=1)return 1/0;{const t=this.sampledSemanticScores;return NU(t,e)}}else return-1}prepareRender(e){const t=super.prepareRender(e);return t.push(()=>Br(this.programInfo,{uMaxPointSize:this._getMaxPointSize(),uScaleFactor:this._getGeometricScaleFactor(),uSemanticThreshold:this.getSemanticThreshold()})),t.push(()=>h0(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((n,s)=>{s&&rw(t,this.vertexArrayInfo,t.POINTS,s,n)},e)}}const Fge="const int BUTT=0;const int SQUARE=1;const int ROUND=2;in float pos;in float side;uniform float uMinLength;uniform mediump float uDashTextureSize;uniform lowp int uStrokeCap;out vec4 vColor;out float vSize;out float vNormalLengthInPixels;out highp vec2 vPosInPixels;void main(void){float pixelSize=1.0/uDevicePixelRatio;float size=getScaled_size();float opacity=getScaled_opacity()*uViewOpacity;if(size<pixelSize){opacity*=size/pixelSize;size=pixelSize;}vec2 a=applySampleFacet(vec2(getScaled_x(),getScaled_y()));vec2 b=applySampleFacet(vec2(getScaled_x2(),getScaled_y2()));vec2 tangent=b-a;float offset=0.0;float relativeDiff=0.0;if(uMinLength>0.0||uStrokeCap!=BUTT){float len=length(tangent*uViewportSize);float diff=max(0.0,uMinLength-len);if(uStrokeCap!=BUTT){diff+=size;}relativeDiff=diff/len;offset=relativeDiff*(pos-0.5);}vec2 p=pos<1.0? a+tangent*(pos+offset): b+tangent*offset;float aaPadding=pixelSize;vec2 normal=normalize(vec2(-tangent.y,tangent.x)/uViewportSize);p+=normal*side*(size+aaPadding)/uViewportSize;gl_Position=unitToNdc(p);vColor=vec4(getScaled_color()*opacity,opacity);vSize=size;vNormalLengthInPixels=side*(size+aaPadding);vPosInPixels=vec2(pos,(1.0-pos))*(1.0+relativeDiff)*length(tangent*uViewportSize)-vec2(uStrokeCap!=BUTT ? size/2.0 : 0.0);setupPicking();}",Bge="const int BUTT=0;const int SQUARE=1;const int ROUND=2;uniform sampler2D uDashTexture;uniform float uDashTextureSize;uniform float uStrokeDashOffset;uniform lowp int uStrokeCap;in vec4 vColor;in float vSize;in vec2 vPosInPixels;in float vNormalLengthInPixels;out lowp vec4 fragColor;void main(void){float dpr=uDevicePixelRatio;float distanceFromEnd=-min(vPosInPixels[0],vPosInPixels[1]);float distance;if(distanceFromEnd>0.0&&uStrokeCap==ROUND){distance=length(vec2(distanceFromEnd,vNormalLengthInPixels));}else{distance=abs(vNormalLengthInPixels);}float opacity=clamp(((vSize/2.0-distance)*dpr),-0.5,0.5)+0.5;if(uDashTextureSize>0.0){float pos=(vPosInPixels[0]+uStrokeDashOffset)*dpr;float floored=floor(pos);vec2 texelPositions=(floored+vec2(0.5,1.5))/dpr/uDashTextureSize;opacity*=mix(texture(uDashTexture,vec2(texelPositions[0],0)).r,texture(uDashTexture,vec2(texelPositions[1],0)).r,clamp((pos-floored),0.0,1.0));}fragColor=vColor*opacity;if(uPickingEnabled){fragColor=vPickingColor;}}";class Vge extends aw{constructor(e){super(e),this.dashTextureSize=0,Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x2:void 0,y2:void 0,size:1,color:"black",opacity:1,minLength:0,strokeDash:null,strokeDashOffset:0,strokeCap:"butt"}))}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","size","color","opacity"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size"]}fixEncoding(e){if(!(e.x&&e.y&&e.x2&&e.y2))if(e.x&&e.x2&&!e.y)e.y={value:.5},e.y2=e.y;else if(e.y&&e.y2&&!e.x)e.x={value:.5},e.x2=e.x;else if(e.x&&!e.y)e.y={value:0},e.y2={value:1},e.x2=e.x;else if(e.y&&!e.x)e.x={value:0},e.x2={value:1},e.y2=e.y;else if(e.x&&e.y&&e.y2)e.x2=e.x;else if(e.y&&e.x&&e.x2)e.y2=e.y;else if(e.y&&e.x)if(!e.x2&&yo(e.y)&&e.y.type=="quantitative")e.x2=e.x,e.y2={datum:0};else if(!e.y2&&yo(e.x)&&e.x.type=="quantitative")e.y2=e.y,e.x2={datum:0};else throw new Error("A bug!");else throw new Error("Invalid x and y encodings for rule mark: "+JSON.stringify(e));return e}async initializeGraphics(){if(await super.initializeGraphics(),this.properties.strokeDash){const e=this.gl,t=Wge(this.properties.strokeDash);this.dashTexture=dv(e,{mag:e.NEAREST,min:e.NEAREST,internalFormat:e.R8,format:e.RED,src:t,height:1}),this.dashTextureSize=t.length}this.createAndLinkShaders(Fge,Bge)}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;Br(this.programInfo,{uMinLength:e.minLength,uDashTextureSize:this.dashTextureSize,uStrokeCap:["butt","square","round"].indexOf(e.strokeCap)})}updateGraphicsData(){const e=this.unitView.getCollector(),t=e.getItemCount(),n=new uge({encoders:this.encoders,attributes:this.getAttributes(),numItems:Math.max(t,this.properties.minBufferSize||0)});n.addBatches(e.facetBatches);const s=n.toArrays();this.rangeMap.migrateEntries(s.rangeMap),this.updateBufferInfo(s)}prepareRender(e){const t=super.prepareRender(e);return this.dashTexture&&t.push(()=>Br(this.programInfo,{uDashTexture:this.dashTexture,uStrokeDashOffset:this.properties.strokeDashOffset})),t.push(()=>h0(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((n,s)=>rw(t,this.vertexArrayInfo,t.TRIANGLE_STRIP,s,n),e)}}function Wge(i){if(i.length==0||i.length%2||i.findIndex(r=>Math.round(r)!=r||r<1||r>1e3)>=0)throw new Error("Invalid stroke dash pattern: "+JSON.stringify(i));const e=i.reduce((r,o)=>r+o),t=new Uint8Array(e);let n=!0,s=0;for(let r of i){for(;r;)t[s++]=n&&255||0,r--;n=!n}return t}const zge=`uniform float uSagittaScaleFactor;uniform float uMinSagittaLength;in vec2 strip;out vec4 vColor;out float vSize;out float vNormalLengthInPixels;void main(void){float pixelSize=1.0/uDevicePixelRatio;float opacity=getScaled_opacity()*uViewOpacity;vec2 a=vec2(getScaled_x(),getScaled_y())*uViewportSize;vec2 b=vec2(getScaled_x2(),getScaled_y2())*uViewportSize;vec2 chordVector=b-a;vec2 unitChordVector=normalize(chordVector);vec2 chordNormal=vec2(-unitChordVector.y,unitChordVector.x);float sagitta=max(length(chordVector)/2.0*uSagittaScaleFactor,uMinSagittaLength);bool compress=false;if(compress){float maxSagittaLen=length(chordNormal*uViewportSize);float maxChordLen=length(unitChordVector*uViewportSize);float threshold=maxSagittaLen*0.5;if(sagitta>threshold){float m=(maxSagittaLen-threshold)/(maxChordLen-threshold);sagitta=(sagitta-threshold)*m+threshold;}}vec2 controlOffset=chordNormal*sagitta/0.75;vec2 p1=a;vec2 p2=a+controlOffset;vec2 p3=b+controlOffset;vec2 p4=b;float t=smoothstep(0.0,1.0,strip.x);vec2 C1=p4-3.0*p3+3.0*p2-p1;vec2 C2=3.0*p3-6.0*p2+3.0*p1;vec2 C3=3.0*p2-3.0*p1;vec2 C4=p1;vec2 p;if(t==0.0){p=p1;}else if(t==1.0){p=p4;}else{p=C1*t*t*t+C2*t*t+C3*t+C4;}vec2 tangent=normalize(3.0*C1*t*t+2.0*C2*t+C3);vec2 normal=vec2(-tangent.y,tangent.x);
#ifdef size2_DEFINED
float mixedSize=mix(getScaled_size(),getScaled_size2(),t);
#else
float mixedSize=getScaled_size();
#endif
if(mixedSize<pixelSize){opacity*=mixedSize/pixelSize;mixedSize=pixelSize;}float paddedSize=mixedSize+pixelSize;vNormalLengthInPixels=strip.y*paddedSize;p+=normal*vNormalLengthInPixels;gl_Position=pixelsToNdc(p);
#ifdef color2_DEFINED
vec3 color=mix(getScaled_color(),getScaled_color2(),t);
#else
vec3 color=getScaled_color();
#endif
vColor=vec4(color*opacity,opacity);vSize=paddedSize;setupPicking();}`,Hge="in lowp vec4 vColor;in float vSize;in float vNormalLengthInPixels;out lowp vec4 fragColor;void main(void){float dpr=uDevicePixelRatio;float distance=abs(vNormalLengthInPixels);float opacity=clamp(((vSize/2.0-distance)*dpr),0.0,1.0);fragColor=vColor*opacity;if(uPickingEnabled){fragColor=vPickingColor;}}";class Uge extends aw{constructor(e){super(e),Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x:0,x2:void 0,y:0,y2:void 0,size:1,color:"black",opacity:1,segments:101,sagittaScaleFactor:1,minSagittaLength:1.5}))}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","size","height","color","opacity"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size"]}fixEncoding(e){return e.x||(e.x2=e.x),e.y2||(e.y2=e.y),e}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(zge,Hge)}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;Br(this.programInfo,{uSagittaScaleFactor:e.sagittaScaleFactor,uMinSagittaLength:e.minSagittaLength})}updateGraphicsData(){const e=this.unitView.getCollector(),t=e.getItemCount(),n=new fge({encoders:this.encoders,attributes:this.getAttributes(),numItems:t});n.addBatches(e.facetBatches);const s=n.toArrays();s.arrays.strip={data:$ge(this.properties.segments),numComponents:2},this.rangeMap.migrateEntries(s.rangeMap),this.arrays=Object.fromEntries(Object.entries(s.arrays).map(([r,o])=>[r,{...o,data:void 0}])),this.updateBufferInfo(s)}render(e){const t=this.gl;return this.createRenderCallback((n,s)=>{this.gl.bindVertexArray(this.vertexArrayInfo.vertexArrayObject);for(const r of Object.entries(this.bufferInfo.attribs)){const[o,a]=r;a.buffer&&a.numComponents&&a.divisor&&(a.offset=n*this.arrays[o].numComponents*4)}h0(t,this.programInfo,this.bufferInfo),rw(t,this.bufferInfo,t.TRIANGLE_STRIP,(this.properties.segments+1)*2,0,s)},e)}}function $ge(i){let e=0;const t=[];for(;e<=i;e++)t.push(e/i,.5),t.push(e/i,-.5);return t}const jge=`uniform float uSdfNumerator;uniform vec2 uD;in mediump vec2 vertexCoord;in lowp vec2 textureCoord;uniform vec4 uViewportEdgeFadeWidth;uniform vec4 uViewportEdgeFadeDistance;uniform bool uSqueeze;uniform bool uLogoLetter;in float width;uniform ivec2 uAlign;
#ifdef x2_DEFINED
uniform float uPaddingX;uniform bool uFlushX;
#endif
#ifdef y2_DEFINED
uniform float uPaddingY;uniform bool uFlushY;
#endif
out vec2 vTexCoord;out vec4 vColor;out float vSlope;out float vEdgeFadeOpacity;struct RangeResult{float pos;float scale;};float minValue(vec4 v){return min(min(v.x,v.y),min(v.z,v.w));}float maxValue(vec4 v){return max(max(v.x,v.y),max(v.z,v.w));}/***All measures are in[0,1]*/RangeResult positionInsideRange(float a,float b,float width,float padding,int align,bool flush){float span=b-a;float paddedWidth=width+2.0*padding;if(a>1.0||b<0.0){return RangeResult(0.0,0.0);}float extra=max(0.0,span-paddedWidth);float pos;if(align==0){float centre=a+b;if(flush){float leftOver=max(0.0,paddedWidth-centre);centre+=min(leftOver,extra);float rightOver=max(0.0,paddedWidth+centre-2.0);centre-=min(rightOver,extra);}pos=centre/2.0;}else if(align<0){float edge=a;if(flush){float over=max(0.0,-edge);edge+=min(over,extra);}pos=edge+padding;}else{float edge=b;if(flush){float over=max(0.0,edge-1.0);edge-=min(over,extra);}pos=edge-padding;}float scale=clamp((span-padding)/paddedWidth,0.0,1.0);return RangeResult(pos,scale);}vec2 calculateRotatedDimensions(float width,mat2 rotationMatrix){vec2 a=abs(rotationMatrix*vec2(width/2.0,0.5));vec2 b=abs(rotationMatrix*vec2(width/2.0,-0.5));return vec2(max(a.x,b.x),max(a.y,b.y))*2.0;}ivec2 fixAlignForAngle(ivec2 align,float angleInDegrees){float a=mod(angleInDegrees+45.0,360.0);int x=align.x;int y=-align.y;if(a<90.0){return ivec2(x,y);}else if(a<180.0){return ivec2(y,-x);}else if(a<270.0){return ivec2(-x,y);}else{return ivec2(-y,x);}}void main(void){float opacity=getScaled_opacity()*uViewOpacity;vec2 size=vec2(getScaled_size());float x=getScaled_x();float y=getScaled_y();float scale=1.0;float angleInDegrees=getScaled_angle();float angle=-angleInDegrees*PI/180.0;float sinTheta=sin(angle);float cosTheta=cos(angle);mat2 rotationMatrix=mat2(cosTheta,sinTheta,-sinTheta,cosTheta);vec2 flushSize=calculateRotatedDimensions(width,rotationMatrix);
#if defined(x2_DEFINED) || defined(y2_DEFINED)
ivec2 align=fixAlignForAngle(uAlign,angleInDegrees);
#else
ivec2 align=uAlign;
#endif
#ifdef x2_DEFINED
float x2=getScaled_x2();if(uLogoLetter){size.x=(x2-x)*uViewportSize.x;x+=(x2-x)/2.0;}else{float x2=getScaled_x2();RangeResult result=positionInsideRange(min(x,x2),max(x,x2),size.x*scale*flushSize.x/uViewportSize.x,uPaddingX/uViewportSize.x,align.x,uFlushX);x=result.pos;scale*=result.scale;}
#endif
vec2 pos=applySampleFacet(vec2(x,y));
#ifdef y2_DEFINED
float y2=getScaled_y2();vec2 pos2=applySampleFacet(vec2(x,y2));if(uLogoLetter){size.y=(pos2.y-pos.y)*uViewportSize.y;pos.y+=(pos2.y-pos.y)/2.0;}else{RangeResult result=positionInsideRange(min(pos.y,pos2.y),max(pos.y,pos2.y),size.y*scale*flushSize.y/uViewportSize.y,uPaddingY/uViewportSize.y,align.y,uFlushY);pos.y=result.pos;scale*=result.scale;}
#endif
if(scale<1.0){if(uSqueeze){vec2 scaleFadeExtent=vec2(3.0,6.0)/size;if(scale<scaleFadeExtent[0]){gl_Position=vec4(0.0);return;}size*=scale;opacity*=linearstep(scaleFadeExtent[0],scaleFadeExtent[1],scale);}else if(scale<1.0){gl_Position=vec4(0.0);return;}}vec2 charPos=rotationMatrix*(vertexCoord*size+uD);vec2 unitPos=pos+charPos/uViewportSize;gl_Position=unitToNdc(unitPos);vSlope=max(1.0,min(size.x,size.y)/uSdfNumerator);vColor=vec4(getScaled_color()*opacity,opacity);vTexCoord=textureCoord;if(maxValue(uViewportEdgeFadeDistance)>-pow(10.0,10.0)){vEdgeFadeOpacity=minValue(((vec4(1.0,1.0,0.0,0.0)+vec4(-1.0,-1.0,1.0,1.0)*unitPos.yxyx)*uViewportSize.yxyx-uViewportEdgeFadeDistance)/uViewportEdgeFadeWidth);}else{vEdgeFadeOpacity=1.0;}setupPicking();}`,qge="uniform sampler2D uTexture;uniform bool uLogoLetter;in vec2 vTexCoord;in float vEdgeFadeOpacity;in vec4 vColor;in float vSlope;out lowp vec4 fragColor;float median(float r,float g,float b){return max(min(r,g),min(max(r,g),b));}void main(){vec3 c=texture(uTexture,vTexCoord).rgb;float sigDist=1.0-median(c.r,c.g,c.b);float slope=uLogoLetter? 0.7/length(vec2(dFdy(sigDist),dFdx(sigDist))): vSlope;float opa=clamp((sigDist-0.5)*slope+0.5,0.0,1.0);opa*=pow(clamp(vEdgeFadeOpacity,0.0,1.0),2.2);fragColor=vColor*opa;if(uPickingEnabled){fragColor=vPickingColor;}}",Gge={left:-1,center:0,right:1},Kge={top:-1,middle:0,bottom:1,alphabetic:1};class Zge extends aw{constructor(e){super(e),Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x:.5,y:.5,x2:void 0,y2:void 0,text:"",size:11,color:"black",opacity:1,font:void 0,fontStyle:void 0,fontWeight:void 0,align:"center",baseline:"middle",dx:0,dy:0,angle:0,fitToBand:!1,squeeze:!0,paddingX:0,paddingY:0,flushX:!0,flushY:!0,logoLetters:!1,viewportEdgeFadeWidthTop:0,viewportEdgeFadeWidthRight:0,viewportEdgeFadeWidthBottom:0,viewportEdgeFadeWidthLeft:0,viewportEdgeFadeDistanceTop:-1/0,viewportEdgeFadeDistanceRight:-1/0,viewportEdgeFadeDistanceBottom:-1/0,viewportEdgeFadeDistanceLeft:-1/0})),this.font=this.properties.font?e.context.fontManager.getFont(this.properties.font,this.properties.fontStyle,this.properties.fontWeight):e.context.fontManager.getDefaultFont()}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","color","size","opacity","angle"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size","text","angle"]}fixEncoding(e){for(const t of nw)this.properties.fitToBand&&CT(e,t);return e}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(jge,qge)}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;Br(this.programInfo,{uPaddingX:e.paddingX,uPaddingY:e.paddingY,uFlushX:!!e.flushX,uFlushY:!!e.flushY,uAlign:[Gge[e.align],Kge[e.baseline]],uD:[e.dx,-e.dy],uLogoLetter:!!e.logoLetters,uSqueeze:!!e.squeeze,uViewportEdgeFadeWidth:[e.viewportEdgeFadeWidthTop,e.viewportEdgeFadeWidthRight,e.viewportEdgeFadeWidthBottom,e.viewportEdgeFadeWidthLeft],uViewportEdgeFadeDistance:[e.viewportEdgeFadeDistanceTop,e.viewportEdgeFadeDistanceRight,e.viewportEdgeFadeDistanceBottom,e.viewportEdgeFadeDistanceLeft]})}updateGraphicsData(){const e=this.unitView.getCollector(),t=e.getData(),n=this.encoding,s=this.encoders.text.accessor||this.encoders.text;let r=0;const o="format"in n.text?hs(n.text.format):c=>c;for(const c of t){const h=o(s(c)),u=Xi(h)?h:h===null?"":""+h;r+=u&&u.length||0}const a=new gge({encoders:this.encoders,attributes:this.getAttributes(),properties:this.properties,fontMetrics:this.font.metrics,numCharacters:Math.max(r,this.properties.minBufferSize||0)});a.addBatches(e.facetBatches);const l=a.toArrays();this.rangeMap.migrateEntries(l.rangeMap),this.updateBufferInfo(l)}prepareRender(e){const t=super.prepareRender(e);let n=.35;return this.properties.logoLetters&&(n/=2),t.push(()=>Br(this.programInfo,{uTexture:this.font.texture,uSdfNumerator:this.font.metrics.common.base/(this.glHelper.dpr/n)})),t.push(()=>h0(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((n,s)=>rw(t,this.vertexArrayInfo,t.TRIANGLES,s,n),e)}}function N6(i,e,{spacing:t,devicePixelRatio:n,offset:s,reverse:r}={}){t=t||0,s=s||0;let o=0,a=0;for(const g of i)o+=iy(g.px)+(V2(g)?0:t),a+=iy(g.grow);o-=t;const l=Math.max(0,e-o),c=n!==void 0?g=>Math.round(g*n)/n:g=>g,h=[],u=[],d=g=>{const p=h.length;if(!p)return;const m=(g?t:0)*(r?-1:1);f-=m;for(let v=0;v<p;v++)u.push({location:f+(v+1)/(p+1)*m,size:0});f+=m,h.length=0};let f=r?Math.max(e,o):0+s;if(i.length==1&&V2(i[0]))return[{location:f,size:0}];for(let g=0;g<i.length;g++){const p=i[g];if(V2(p))h.push(p);else{d(u.length>0);const m=iy(p.px)+(a?iy(p.grow)/a*l:0);r&&(f-=m),u.push({location:c(f),size:c(m)}),r?f-=t:f+=m+t}}return f+=r?t:-t,d(!1),u}function Yge(i){let e=0,t=0;for(const n of i)e=Math.max(e,n.px??0),t=Math.max(t,n.grow??0);return{px:e,grow:t}}var SC,ST;const Tq=class{constructor(i,e){zs(this,SC),this.width=i,this.height=e}addPadding(i){return bs(this,SC,ST).call(this,i.width,i.height)}subtractPadding(i){return bs(this,SC,ST).call(this,-i.width,-i.height)}};let gv=Tq;SC=new WeakSet,ST=function(i,e){return new Tq({px:(this.width.px??0)+i,grow:this.width.grow},{px:(this.height.px??0)+e,grow:this.height.grow})};const Z_=Object.freeze({px:0,grow:0}),Qge=new gv(Z_,Z_);function V2(i){return!i.px&&!i.grow}function iy(i){return i||0}function Xge(i){return i&&(yr(i.px)||yr(i.grow))}function Nq(i){if(Oq(i))throw new Error("parseSizeDef does not accept step-based sizes.");if(Xge(i))return i;if(yr(i))return{px:i,grow:0};if(i==="container")return{px:0,grow:1};if(!i)return{px:0,grow:1};throw new Error(`Invalid sizeDef: ${i}`)}class ea{constructor(e,t,n,s){this.top=e||0,this.right=t||0,this.bottom=n||0,this.left=s||0}get width(){return this.left+this.right}get height(){return this.top+this.bottom}expand(e){return e<=0?this:new ea(this.top+e,this.right+e,this.bottom+e,this.left+e)}add(e){return new ea(this.top+e.top,this.right+e.right,this.bottom+e.bottom,this.left+e.left)}subtract(e){return new ea(this.top-e.top,this.right-e.right,this.bottom-e.bottom,this.left-e.left)}static createFromConfig(e){return typeof e=="number"?this.createUniformPadding(e):e?this.createFromRecord(e):xT}static createFromRecord(e){return new ea(e.top,e.right,e.bottom,e.left)}static zero(){return xT}static createUniformPadding(e){return new ea(e,e,e,e)}}const xT=ea.createUniformPadding(0);Object.freeze(xT);const Jge=/^([A-Za-z]+:)?\/\//;function epe(i,e){if(e&&Jge.test(e))return e;const t=i();return t&&e?t.endsWith("/")?t+e:t+"/"+e:t??e}const Mq="VISIT_SKIP",Y_="VISIT_STOP",M6=i=>i;class Rq{constructor(e,t,n,s){this.context=t,this.parent=n,this.name=e.name||s,this.spec=e,this.resolutions={scale:{},axis:{}},this._broadcastHandlers={},this._capturingInteractionEventListeners={},this._nonCapturingInteractionEventListeners={},xq(this),this.opacityFunction=M6,this.blockEncodingInheritance=!1}getPadding(){return this._cache("size/padding",()=>ea.createFromConfig(this.spec.padding))}getOverhang(){return ea.zero()}getSize(){return this._cache("size/size",()=>this.isConfiguredVisible()?this.getSizeFromSpec().addPadding(this.getPadding()):Qge)}getSizeFromSpec(){const e=t=>{var n;let s=this.spec[t];if(Oq(s)){const r=s.step,o=(n=this.getScaleResolution(t=="width"?"x":"y"))==null?void 0:n.getScale();if(o){let a=0;if(af(o.type))a=o.domain().length;else if(["locus","index"].includes(o.type)){const c=o.domain();a=o0(c)-c[0]}else throw new Error(`Cannot use step-based size with "${o.type}" scale!`);const l=o;return a=IR(a,l.paddingInner(),l.paddingOuter()),{px:a*r,grow:0}}else throw new Error("Cannot use 'step' size with missing scale!")}else return(s&&Nq(s))??{px:0,grow:1}};return this._cache("size/sizeFromSpec",()=>new gv(e("width"),e("height")))}isConfiguredVisible(){return this.context.isViewConfiguredVisible(this)}isVisibleInSpec(){return this.spec.visible??!0}isVisible(){return this.getAncestors().every(e=>e.isConfiguredVisible())}getEffectiveOpacity(){var e;return this.opacityFunction(((e=this.parent)==null?void 0:e.getEffectiveOpacity())??1)}getPathString(){return this.getAncestors().map(e=>e.name).reverse().join("/")}getAncestors(){const e=[];let t=this;do e.push(t),t=t.parent;while(t);return e}handleBroadcast(e){for(const t of this._broadcastHandlers[e.type]||[])t(e)}_addBroadcastHandler(e,t){let n=this._broadcastHandlers[e];n||(n=[],this._broadcastHandlers[e]=n),n.push(t)}handleInteractionEvent(e,t,n){const s=n?this._capturingInteractionEventListeners:this._nonCapturingInteractionEventListeners;for(const r of s[t.type]||[])r(e,t)}addInteractionEventListener(e,t,n){const s=n?this._capturingInteractionEventListeners:this._nonCapturingInteractionEventListeners;let r=s[e];r||(r=[],s[e]=r),r.push(t)}visit(e){try{const t=e(this);if(e.postOrder&&e.postOrder(this),t!==Y_)return t}catch(t){throw t.view=this,t}}onScalesResolved(){(!this.opacityFunction||this.opacityFunction===M6)&&(this.opacityFunction=ipe(this))}onBeforeRender(){}render(e,t,n={}){}getEncoding(){const e=this.parent&&!this.blockEncodingInheritance?this.parent.getEncoding():{},t=this.spec.encoding||{},n={...e,...t};for(const[s,r]of Object.entries(n))r===null&&delete n[s];return n}getFacetAccessor(e){if(this.parent)return this.parent.getFacetAccessor(this)}getFacetFields(e){var t;const n=this.getEncoding().sample;return tw(n)?[n.field]:(t=this.parent)==null?void 0:t.getFacetFields(this)}getSampleFacetTexture(){}_getResolution(e,t){e=a0(e);let n=this;do{const s=n.resolutions[t][e];if(s)return s;n=n.parent}while(n)}getScaleResolution(e){return this._getResolution(e,"scale")}getAxisResolution(e){return this._getResolution(e,"axis")}getBaseUrl(){return epe(()=>{var e;return(e=this.parent)==null?void 0:e.getBaseUrl()},this.spec.baseUrl)}getDynamicDataSource(){throw new Error("The view does not provide dynamic data!")}isPickingSupported(){return!0}getTitleText(){const e=this.spec.title;if(e)return Xi(e)?e:e.text}_cache(e,t){return fm(this,e,t)}_invalidateCacheByPrefix(e,t="self"){switch(t){case"self":CC(this,e);break;case"ancestors":for(const n of this.getAncestors())CC(n,e);break;case"progeny":this.visit(n=>CC(n,e));break}}invalidateSizeCache(){this._invalidateCacheByPrefix("size/","ancestors")}propagateInteractionEvent(e){}}function tpe(i){return"unitsPerPixel"in i}function ipe(i){const e=i.spec.opacity;if(e!==void 0){if(yr(e))return t=>t*e;if(tpe(e)){const t=r=>{var o;const a=(o=i.getScaleResolution(r))==null?void 0:o.getScale();if(["linear","index","locus"].includes(a==null?void 0:a.type))return a},n=e.channel?t(e.channel):t("x")||t("y");if(!n)throw new Error("Cannot find a resolved quantitative scale for dynamic opacity!");const s=CR().domain(e.unitsPerPixel).range(e.values).clamp(!0);return r=>{const o=DS(n.domain())/1e3;return s(o)*r}}}return t=>t}const Oq=i=>!!(i!=null&&i.step);class gm extends Rq{constructor(e,t,n,s){super(e,t,n,s),this.spec=e}*[Symbol.iterator](){}replaceChild(e,t){throw new Error("Not implemented")}visit(e){let t;try{t=e(this)}catch(n){throw n.view=this,n}if(t===Y_)return t;if(t!==Mq){e.beforeChildren&&e.beforeChildren(this);for(const n of this){const s=n.visit(e);if(s===Y_)return s}e.afterChildren&&e.afterChildren(this),e.postOrder&&e.postOrder(this)}}findDescendantByPath(e){for(const t of this)if(t.name===e[0]){if(e.length==1)return t;if(t instanceof gm)return t.findDescendantByPath(e.slice(1))}}findChildByName(e){for(const t of this)if(t.name===e)return t}findDescendantByName(e){let t;return this.visit(n=>{if(n.name==e)return t=n,Y_}),t}getConfiguredResolution(e,t){var n,s;return(s=(n=this.spec.resolve)==null?void 0:n[t])==null?void 0:s[e]}getDefaultResolution(e,t){return"shared"}getConfiguredOrDefaultResolution(e,t){return this.getConfiguredResolution(e,t)??this.getConfiguredResolution("default",t)??this.getDefaultResolution(e,t)}}function qS(i,e,t){if(t=t||[],i.some(o=>o===null)){if(i.every(o=>o===null))return null;throw console.warn(i),new Error("Cannot merge objects with nulls!")}const n={},s=(o,a)=>o===a||kg(o)&&kg(a)||kg(o)&&a===!0||o===!0&&ka(a),r=o=>{for(let a in o){const l=o[a];if(!t.includes(a)&&l!==void 0)if(n[a]!==void 0&&!s(n[a],l))console.warn(`Conflicting property ${a} of ${e}: (${JSON.stringify(n[a])} and ${JSON.stringify(o[a])}). Using ${JSON.stringify(n[a])}.`);else{const c=n[a];if(kg(c))kg(l)&&(n[a]=qS([c,l],a));else if(kg(l)){if(!(c===!0||c===void 0))throw new Error("Bug in merge! Target is: "+c);n[a]=qS([{},l],a)}else n[a]=l}}};for(const o of i)r(o);return n}function kg(i){return ka(i)&&!Array.isArray(i)}/*!
 * Adapted from vega-encode:
 * https://github.com/vega/vega/blob/master/packages/vega-encode/src/ticks.js
 *
 * Copyright (c) 2015-2018, University of Washington Interactive Data Lab
 * All rights reserved.
 *
 * BSD-3-Clause License: https://github.com/vega/vega-lite/blob/master/LICENSE
 */function Pq(i,e,t){return yr(e)&&t!=null&&(e=Math.min(e,~~(DS(i.domain())/t)||1)),ka(e)&&(e.step,e=e.interval),e}function Fq(i,e,t){var n=i.range(),s=Math.floor(n[0]),r=Math.ceil(ma(n));if(s>r&&(n=r,r=s,s=n),e=e.filter(function(a){return a=i(a),s<=a&&a<=r}),t>0&&e.length>1){for(var o=[e[0],ma(e)];e.length>t&&e.length>=3;)e=e.filter(function(a,l){return!(l%2)});e.length<3&&(e=o)}return e}function npe(i,e){return i.bins?Fq(i,spe(i.bins,e)):i.ticks?i.ticks(e):i.domain()}function spe(i,e){var t=i.length,n=~~(t/(e||t));return n<2?i.slice():i.filter(function(s,r){return!(r%n)})}function rpe(i,e,t){var n=i.tickFormat?i.tickFormat(e,t):t?hs(t):String;if(rj(i.type)){var s=ape(t);n=i.bins?s:ope(n,s)}return n}function ope(i,e){return function(t){return i(t)?e(t):""}}function ape(i){var e=ou(i||",");if(e.precision==null){switch(e.precision=12,e.type){case"%":e.precision-=2;break;case"e":e.precision-=1;break}return lpe(hs(e),hs(".1f")(1)[1])}else return hs(e)}function lpe(i,e){return function(t){var n=i(t),s=n.indexOf(e),r,o;if(s<0)return n;for(r=cpe(n,s),o=r<n.length?n.slice(r):"";--r>s;)if(n[r]!=="0"){++r;break}return n.slice(0,r)+o}}function cpe(i,e){var t=i.lastIndexOf("e"),n;if(t>0)return t;for(t=i.length;--t>e;)if(n=i.charCodeAt(t),n>=48&&n<=57)return t+1}/*!
 * Adapted from vega-encode:
 * https://github.com/vega/vega/blob/master/packages/vega-encode/src/Scale.js
 *
 * Copyright (c) 2015-2018, University of Washington Interactive Data Lab
 * All rights reserved.
 *
 * BSD-3-Clause License: https://github.com/vega/vega-lite/blob/master/LICENSE
 */const hpe="locus",upe="index";var dpe=5;function fpe(i){const e=i.type;return!i.bins&&(e===hm||e===G1||e===K1)}function Bq(i){return Nr(i)&&![_l,upe,hpe].includes(i)}function Vq(i){return i||{warn:(e,...t)=>console.warn(e,...t)}}var gpe=LS(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma","zoom","fp64","name"]);function Wq(i,e,t){t=Vq(t);for(const n in i)if(!gpe[n]){if(n==="padding"&&Bq(e.type))continue;wr(e[n])?e[n](i[n]):t.warn("Unsupported scale property: "+n)}Cpe(e,i,ype(e,i,bpe(e,i,t)))}function ppe(i,e){const t=mpe(i),n=ni(t);if(!n)throw new Error("Unknown scale type: "+t);const s=n();return Wq(i,s,e),s}function mpe(i){var e=i.type,t="",n;return e===_l?_l+"-"+hm:(_pe(i)&&(n=i.rawDomain?i.rawDomain.length:i.domain?i.domain.length+ +(i.domainMid!=null):0,t=n===2?_l+"-":n===3?r0+"-":""),(t+e||hm).toLowerCase())}function _pe(i){const e=i.type;return Nr(e)&&e!==Q$&&e!==X$&&(i.scheme||i.range&&i.range.length&&i.range.every(Xi))}function bpe(i,e,t){if(!i.domain)return 0;t=Vq(t);var n=vpe(i,e.domainRaw,t);if(n>-1)return n;var s=e.domain,r=i.type,o=e.zero||e.zero===void 0&&fpe(i),a,l;return s?(Bq(r)&&e.padding&&s[0]!==ma(s)&&(s=wpe(r,s,e.range,e.padding,e.exponent,e.constant)),(o||e.domainMin!=null||e.domainMax!=null||e.domainMid!=null)&&(a=(s=s.slice()).length-1||1,o&&(s[0]>0&&(s[0]=0),s[a]<0&&(s[a]=0)),e.domainMin!=null&&(s[0]=e.domainMin),e.domainMax!=null&&(s[a]=e.domainMax),e.domainMid!=null&&(l=e.domainMid,(l<s[0]||l>s[a])&&t.warn("Scale domainMid exceeds domain min or max.",l),s.splice(a,0,l))),i.domain(zq(r,s,t)),r===TR&&i.unknown(e.domainImplicit?ZI:void 0),e.nice&&i.nice&&i.nice(e.nice!==!0&&Pq(i,e.nice)||null),s.length):0}function vpe(i,e,t){return e?(i.domain(zq(i.type,e,t)),e.length):-1}function wpe(i,e,t,n,s,r){var o=Math.abs(ma(t)-t[0]),a=o/(o-2*n),l=i===cu?CU(e,null,a):i===K1?WI(e,null,a,.5):i===G1?WI(e,null,a,s||1):i===aL?Ese(e,null,a,r||1):yU(e,null,a);return e=e.slice(),e[0]=l[0],e[e.length-1]=l[1],e}function zq(i,e,t){if(rj(i)){var n=Math.abs(e.reduce(function(s,r){return s+(r<0?-1:r>0?1:0)},0));n!==e.length&&t.warn("Log scale domain includes zero: "+KD(e))}return e}function ype(i,e,t){let n=e.bins;if(n&&!Ro(n)){const s=(n.start==null||n.stop==null)&&i.domain(),r=n.start==null?s[0]:n.start,o=n.stop==null?ma(s):n.stop,a=n.step;a||Yi("Scale bins parameter missing step property."),n=Kb(r,o+a,a)}return n?i.bins=n:i.bins&&delete i.bins,i.type===NR&&(n?!e.domain&&!e.domainRaw&&(i.domain(n),t=n.length):i.bins=i.domain()),t}function Cpe(i,e,t){var n=i.type,s=e.round||!1,r=e.range;if(e.rangeStep!=null)r=Spe(n,e,t);else if(e.scheme&&(r=xpe(n,e,t),wr(r))){if(i.interpolator)return i.interpolator(r);Yi(`Scale type ${n} does not support interpolating color schemes.`)}if(r&&lL(n))return i.interpolator(cL(DT(r,e.reverse),e.interpolate,e.interpolateGamma));r&&e.interpolate&&i.interpolate?i.interpolate(oj(e.interpolate,e.interpolateGamma)):wr(i.round)?i.round(s):wr(i.rangeRound)&&i.interpolate(s?j1:Tu),r&&i.range(DT(r,e.reverse))}function Spe(i,e,t){i!==tj&&i!==rT&&Yi("Only band and point scales support rangeStep.");var n=(e.paddingOuter!=null?e.paddingOuter:e.padding)||0,s=i===rT?1:(e.paddingInner!=null?e.paddingInner:e.padding)||0;return[0,e.rangeStep*IR(t,s,n)]}function xpe(i,e,t){var n=e.schemeExtent,s,r;return Ro(e.scheme)?r=cL(e.scheme,e.interpolate,e.interpolateGamma):(s=e.scheme.toLowerCase(),r=RR(s),r||Yi(`Unrecognized scheme name: ${e.scheme}`)),t=i===ej?t+1:i===NR?t-1:i===sT||i===J$?+e.schemeCount||dpe:t,lL(i)?R6(r,n,e.reverse):wr(r)?Mle(R6(r,n),t):i===TR?r:r.slice(0,t)}function R6(i,e,t){return wr(i)&&(e||t)?Nle(i,DT(e||[0,1],t)):i}function DT(i,e){return e?i.slice().reverse():i}const O6=hs(",d");function Dpe(i,e){return i.chrom+":"+O6(Math.floor(i.pos+1))+"-"+(i.chrom!=e.chrom?e.chrom+":":"")+O6(Math.ceil(e.pos))}const Lpe="https://genomespy.app/data/genomes/";class kpe{constructor(e){if(this.config=e,!this.config.contigs&&typeof this.config.name!="string")throw new Error("No name has been defined for the genome assembly!");this.chromosomes=[],this.cumulativeChromPositions=new Map,this.chromosomesByName=new Map,this.startByIndex=[],this.totalSize=0,this.config.contigs&&this.setChromSizes(this.config.contigs)}get name(){return this.config.name}async load(e){if(!this.config.contigs){this.config.baseUrl?this.baseUrl=/^http(s)?/.test(this.config.baseUrl)?this.config.baseUrl:e+"/"+this.config.baseUrl:this.baseUrl=Lpe;try{this.setChromSizes(Ape(await JD({baseURL:this.baseUrl}).load(`${this.config.name}/${this.name}.chrom.sizes`)))}catch(t){throw new Error(`Could not load chrom sizes: ${t.message}`)}}}hasChrPrefix(){return this.chromosomes.some(e=>e.name.startsWith("chr"))}setChromSizes(e){let t=0;this.startByIndex=[0];for(let n=0;n<e.length;n++){this.startByIndex.push(t);const s=e[n].size,r={...e[n],continuousStart:t,continuousEnd:t+s,continuousInterval:[t,t+s],index:n,number:n+1,odd:!(n&1)};this.chromosomes.push(r);const o=r.name.replace(/^chr/i,"");for(const a of["chr"+o,"CHR"+o,"Chr"+o,r.number,""+r.number,o,r.name])this.cumulativeChromPositions.set(a,t),this.chromosomesByName.set(a,r);t+=r.size}this.totalSize=t}getExtent(){return[0,this.totalSize]}toContinuous(e,t){let n=this.cumulativeChromPositions.get(e);if(n===void 0)throw new Error("Unknown chromosome/contig: "+e);return n+ +t}toChromosome(e){if(e>this.totalSize)return;e=Math.floor(e);const t=n0(this.startByIndex,e)-1;if(t>0&&t<=this.chromosomes.length)return this.chromosomes[t-1]}toChromosomal(e){const t=this.toChromosome(e);if(t)return{chrom:t.name,pos:Math.floor(e)-t.continuousStart}}getChromosome(e){return this.chromosomesByName.get(e)}formatInterval(e){return Dpe(...this.toChromosomalInterval(e))}toChromosomalInterval(e){const t=this.toChromosomal(e[0]+.5),n=this.toChromosomal(e[1]-.5);return n.pos+=1,[t,n]}toContinuousInterval(e){var t;let[n,s]=e;return s||(s=n),[this.toContinuous(n.chrom,n.pos??0),this.toContinuous(s.chrom,s.pos??((t=this.chromosomesByName.get(s.chrom))==null?void 0:t.size))]}toDiscreteChromosomeIntervals(e){const t=e[0],n=e[1],s=[];if(t.chrom===n.chrom)s.push({chrom:t.chrom,startPos:t.pos,endPos:n.pos});else{const r=this.chromosomes.findIndex(a=>a.name===t.chrom),o=this.chromosomes.findIndex(a=>a.name===n.chrom);s.push({chrom:t.chrom,startPos:t.pos,endPos:this.chromosomes[r].size});for(let a=r+1;a<o;a++)s.push({chrom:this.chromosomes[a].name,startPos:0,endPos:this.chromosomes[a].size});s.push({chrom:n.chrom,startPos:0,endPos:n.pos})}return s}continuousToDiscreteChromosomeIntervals(e){return this.toDiscreteChromosomeIntervals([this.toChromosomal(e[0]),this.toChromosomal(e[1])])}parseInterval(e){const t=e.match(/^(chr[0-9A-Z]+)(?::([0-9,]+)(?:-(?:(chr[0-9A-Z]+):)?([0-9,]+))?)?$/);if(t){const n=t[1];if(t.slice(2).every(a=>a===void 0)){const a=this.getChromosome(n);return a?[a.continuousStart,a.continuousEnd]:void 0}const s=t[3]||n,r=parseInt(t[2].replace(/,/g,"")),o=t[4]!==void 0?parseInt(t[4].replace(/,/g,"")):r;return[this.toContinuous(n,r-1),this.toContinuous(s,o)]}}}function Ape(i){return Kse(i).filter(e=>/^chr[0-9A-Z]+$/.test(e[0])).map(([e,t])=>({name:e,size:parseInt(t)}))}function Hq(i){return ka(i)&&"chrom"in i}function Epe(i){return i.every(Hq)}class lw extends Array{constructor(){super(),this.type=void 0}extend(e){return this}extendAll(e){if(e instanceof lw&&e.type!=this.type)throw new Error(`Cannot combine different types of domains: ${this.type} and ${e.type}`);for(const t of e)this.extend(t);return this}extendAllWithAccessor(e,t){for(const n of e)this.extend(t(n));return this}}class W2 extends lw{constructor(){super(),this.type="quantitative"}extend(e){return e==null||Number.isNaN(e)?this:(e=+e,this.length?e<this[0]?this[0]=e:e>this[1]&&(this[1]=e):(this.push(e),this.push(e)),this)}}class Uq extends lw{constructor(){super(),this.type="ordinal",this.uniqueValues=new Set}extend(e){return e==null||Number.isNaN(e)?this:(this.uniqueValues.has(e)||(this.uniqueValues.add(e),this.push(e)),this)}}class $q extends Uq{constructor(){super(),this.type="nominal"}}class Ipe extends lw{constructor(e){super();let t=0;for(let n=1;n<e.length;n++)t+=Math.sign(e[n]-e[n-1]);if(Math.abs(t)!=e.length-1)throw new Error("Piecewise domain must be strictly increasing or decreasing: "+JSON.stringify(e));e.forEach(n=>this.push(n))}extend(e){if(this.includes(e))return this;throw new Error("Piecewise domains are immutable and cannot be unioned!")}}const P6={quantitative:W2,index:W2,locus:W2,nominal:$q,ordinal:Uq};function F6(i,e){if(i=="quantitative"&&Tpe(e)){const t=new Ipe(e);return t.type=i,t}else if(P6[i]){const t=new P6[i];return t.type=i,e&&t.extendAll(e),t}throw new Error("Unknown type: "+i)}function Tpe(i){return i&&i.length>0&&i.length!=2&&i.every(e=>typeof e=="number")}function Npe(i){return((i*=2)<=1?i*i:--i*(2-i)+1)/2}const B6="quantitative",jq="ordinal",qq="nominal",Gq="locus",Mpe="index";class Rpe{constructor(e){this.channel=e,this.members=[],this.type=null,this._zoomExtent=void 0,this._domainListeners=new Set,this.name=void 0,this._scale=void 0}addEventListener(e,t){if(e!="domain")throw new Error("Unsupported event type: "+e);this._domainListeners.add(t)}removeEventListener(e,t){if(e!="domain")throw new Error("Unsupported event type: "+e);this._domainListeners.delete(t)}_notifyDomainListeners(){for(const e of this._domainListeners.values())e({type:"domain",scaleResolution:this})}pushUnitView(e,t){var n;const s=lT(e,t),r=s.type,o=(n=s==null?void 0:s.scale)==null?void 0:n.name;if(o){if(this.name!==void 0&&o!=this.name)throw new Error(`Shared scales have conflicting names: "${o}" vs. "${this.name}"!`);this.name=o}if(!this.type)this.type=r;else if(r!==this.type&&!K_(t))throw new Error(`Can not use shared scale for different data types: ${this.type} vs. ${r}. Use "resolve: independent" for channel ${this.channel}`);this.members.push({view:e,channel:t})}isExplicitDomain(){return!!this.getConfiguredDomain()}_getMergedScaleProps(){return fm(this,"mergedScaleProps",()=>{const e=this.members.map(t=>lT(t.view,t.channel).scale).filter(t=>t!==void 0);return qS(e,"scale",["domain"])})}getScaleProps(){return fm(this,"scaleProps",()=>{const e=this._getMergedScaleProps();if(e===null||e.type=="null")return{type:"null"};const t={...this._getDefaultScaleProperties(this.type),...e};t.type||(t.type=Ope(this.channel,this.type));const n=this.getInitialDomain();return n&&n.length>0?t.domain=n:af(t.type)?t.domain=new $q:t.scheme&&(t.domain=[0,1]),!t.domain&&t.domainMid!==void 0&&(t.domain=[t.domainMin??0,t.domainMax??1]),this.channel=="y"&&af(t.type)&&t.reverse==null&&(t.reverse=!0),t.range&&t.scheme&&delete t.scheme,!("zoom"in t)&&["index","locus"].includes(t.type)&&(t.zoom=!0),Ppe(t,this.channel),t})}getInitialDomain(){return this.getConfiguredDomain()??(this.type==Gq?this.getGenome().getExtent():this.getDataDomain())}getConfiguredDomain(){return this._reduceDomains(e=>K_(e.channel)?void 0:e.view.getConfiguredDomain(e.channel))}getDataDomain(){return this._reduceDomains(e=>K_(e.channel)?void 0:e.view.extractDataDomain(e.channel))}reconfigure(){if(this._scale&&this._scale.type!="null"){Sq(this,"scaleProps");const e=this.getScaleProps();Wq(e,this._scale),Nr(this._scale.type)&&(this._zoomExtent=this._getZoomExtent())}}getScale(){if(this._scale)return this._scale;const e=this.getScaleProps(),t=ppe(e);return this._scale=t,wae(t)&&t.genome(this.getGenome()),Nr(t.type)&&(this._zoomExtent=this._getZoomExtent()),t}getDomain(){return this.getScale().domain()}getComplexDomain(){var e;return((e=this.getGenome())==null?void 0:e.toChromosomalInterval(this.getDomain()))??this.getDomain()}isZoomed(){return this.isZoomable()&&OR(this.getInitialDomain(),this.getDomain())}isZoomable(){if(!mj(this.channel))return!1;const e=this.getScale().type;return["linear","locus","index","log","pow","sqrt"].includes(e)?!!this.getScaleProps().zoom:!1}zoom(e,t,n){if(!this.isZoomable())return!1;const s=this.getScale(),r=s.domain();let o=[...r],a=s.invert(t);switch(this.getScaleProps().reverse&&(n=-n),"align"in s&&(a+=s.align()),s.type){case"linear":case"index":case"locus":o=Lse(o,n||0),o=yU(o,a,e);break;case"log":o=kse(o,n||0),o=CU(o,a,e);break;case"pow":case"sqrt":{const l=s;o=Ase(o,n||0,l.exponent()),o=WI(o,a,e,l.exponent());break}default:throw new Error("Zooming is not implemented for: "+s.type)}return this._zoomExtent&&(o=Ise(o,this._zoomExtent[0],this._zoomExtent[1])),[0,1].some(l=>o[l]!=r[l])?(s.domain(o),this._notifyDomainListeners(),!0):!1}async zoomTo(e,t=!1){var n;if(GD(t)&&(t=t?700:0),!this.isZoomable())throw new Error("Not a zoomable scale!");const s=this.fromComplexInterval(e),r=(n=this.members[0])==null?void 0:n.view.context.animator,o=this.getScale(),a=o.domain();if(t>0&&a.length==2){const l=a[1]-a[0],c=a[0]+l/2,h=s[1]-s[0],u=s[0]+h/2,d=M$([c,0,l],[u,0,h]).rho(.7);await r.transition({duration:t/1e3*d.duration,easingFunction:Npe,onUpdate:f=>{const[g,,p]=d(f);o.domain([g-p/2,g+p/2]),this._notifyDomainListeners()}}),o.domain(s),this._notifyDomainListeners()}else o.domain(s),r==null||r.requestRender(),this._notifyDomainListeners()}resetZoom(){if(!this.isZoomable())throw new Error("Not a zoomable scale!");const e=this.getDomain(),t=this.getInitialDomain();return[0,1].some(n=>t[n]!=e[n])?(this._scale.domain(t),this._notifyDomainListeners(),!0):!1}getZoomLevel(){return this.isZoomable()?DS(this._zoomExtent)/DS(this.getScale().domain()):1}_getZoomExtent(){const e=this.getScaleProps(),t=e.zoom;if(Fpe(t)&&Ro(t.extent))return this.fromComplexInterval(t.extent);if(t)return e.type=="locus"?this.getGenome().getExtent():this._scale.domain()}_getDefaultScaleProperties(e){const t=this.channel,n={};return this.isExplicitDomain()&&(n.zero=!1),hv(t)?n.nice=!this.isExplicitDomain():Bd(t)?n.scheme=e==qq?"tableau10":e==jq?"blues":"viridis":gL(t)?n.range=bj(t):t=="size"?n.range=[0,400]:t=="angle"&&(n.range=[0,360]),n}getGenome(){var e;if(this.type!=="locus")return;const t=(e=this.members[0].view.context.genomeStore)==null?void 0:e.getGenome();if(!t)throw new Error("No genome has been defined!");return t}invertToComplex(e){const t=this.getScale();if("invert"in t){const n=t.invert(e);return this.toComplex(n)}else throw new Error("The scale does not support inverting!")}toComplex(e){const t=this.getGenome();return t?t.toChromosomal(e):e}fromComplex(e){return Hq(e)?this.getGenome().toContinuous(e.chrom,e.pos):e}fromComplexInterval(e){return this.type==="locus"&&Epe(e)?this.getGenome().toContinuousInterval(e):e}_getViewPaths(){return this.members.map(e=>e.view.getPathString()).join(", ")}_reduceDomains(e){const t=this.members.map(e).filter(n=>!!n);if(t.length)return t.reduce((n,s)=>n.extendAll(s))}}function Ope(i,e){if(e==Mpe||e==Gq){if(mj(i))return e;throw new Error(`${i} does not support ${e} data type. Only positional channels do.`)}const t={x:["band","band","linear"],y:["band","band","linear"],size:[void 0,"point","linear"],opacity:[void 0,"point","linear"],fillOpacity:[void 0,"point","linear"],strokeOpacity:[void 0,"point","linear"],color:["ordinal","ordinal","linear"],fill:["ordinal","ordinal","linear"],stroke:["ordinal","ordinal","linear"],strokeWidth:[void 0,void 0,"linear"],shape:["ordinal","ordinal",void 0],dx:[void 0,void 0,"null"],dy:[void 0,void 0,"null"],angle:[void 0,void 0,"linear"]},n=["uniqueId","facetIndex","semanticScore","search","text","sample"].includes(i)?"null":t[i]?t[i][[qq,jq,B6].indexOf(e)]:e==B6?"linear":"ordinal";if(n===void 0)throw new Error(`Channel "${i}" is not compatible with "${e}" data type. Use of a proper scale may be needed.`);return n}function Ppe(i,e){hv(e)&&i.type!=="ordinal"&&(i.range=[0,1]),e=="opacity"&&Nr(i.type)&&(i.clamp=!0)}function Fpe(i){return ka(i)}function z2(...i){for(const e of i)if(e!==void 0)return e}class Bpe{constructor(e){this.channel=e,this.members=[]}get scaleResolution(){var e;return(e=o0(this.members))==null?void 0:e.view.getScaleResolution(this.channel)}pushUnitView(e,t){const n=e.getScaleResolution(this.channel);if(!n)throw new Error("Cannot find a scale resolution!");if(this.scaleResolution&&n!==this.scaleResolution)throw new Error("Shared axes must have a shared scale!");this.members.push({view:e,channel:t})}getAxisProps(){return fm(this,"axisProps",()=>{const e=this.members.map(t=>{const n=t.view.mark.encoding[t.channel];return"axis"in n&&n.axis});return e.length>0&&e.some(t=>t===null)?null:qS(e.filter(t=>t!==void 0),"axis",["title"])})}getTitle(){const e=r=>{var o;const a=lT(r.view,r.channel);if(!_a(a))return{member:r,explicitTitle:z2((o=a.axis)==null?void 0:o.title,a.title),implicitTitle:z2(tw(a)?a.field:void 0,WR(a)?a.expr:void 0)}},t=this.members.map(e),n=t.filter(r=>{var o;if(K_(r.member.channel)&&!r.explicitTitle){const a=a0(r.member.channel);return((o=t.find(l=>l.member.view==r.member.view&&l.member.channel==a))==null?void 0:o.explicitTitle)===void 0}return!0}),s=new Set(n.map(r=>z2(r.explicitTitle,r.implicitTitle)).filter(Xi));return s.size?[...s].join(", "):null}}class Kq extends Rq{constructor(e,t,n,s){super(e,t,n,s),this.spec=e}}class jh extends gm{constructor(e,t,n,s){super(e,t,n,s),this.spec=e,this.children=(e.layer||[]).map((r,o)=>{if(uO(r)||hO(r))return t.createView(r,this,"layer"+o);throw new Error("LayerView accepts only unit or layer specs as children!")})}*[Symbol.iterator](){for(const e of this.children)yield e}render(e,t,n={}){if(this.isConfiguredVisible()){e.pushView(this,t);for(const s of this.children)s.render(e,t,n);e.popView(this)}}propagateInteractionEvent(e){this.handleInteractionEvent(void 0,e,!0),this.children.length&&this.children.at(-1).propagateInteractionEvent(e),!e.stopped&&this.handleInteractionEvent(void 0,e,!1)}}class Zq{constructor(e,t){this.n=e,this.maxCols=t??1/0}get nRows(){return this.maxCols==1/0?1:Math.ceil(this.n/this.maxCols)}get nCols(){return Math.min(this.n,this.maxCols)}get rowIndices(){const e=[],t=this.nCols,n=this.nRows;for(let s=0;s<n;s++){const r=[];e.push(r);for(let o=0;o<t;o++){const a=s*t+o;a<this.n&&r.push(a)}}return e}get colIndices(){const e=[],t=this.nCols,n=this.nRows;for(let s=0;s<t;s++){const r=[];e.push(r);for(let o=0;o<n;o++){const a=o*t+s;a<this.n&&r.push(a)}}return e}getCellIndex(e,t){let n=0;if(this.maxCols==1/0)n=t==0?e:void 0;else{if(e>=this.maxCols)return;n=t*this.nCols+e}return n<this.n?n:void 0}getCellCoords(e){if(!(e<0||e>=this.n))return[e%this.nCols,Math.floor(e/this.nCols)]}}function Zl(i){return()=>i}const yh=class{static create(i,e,t,n){return new yh(Zl(i),Zl(e),Zl(t),Zl(n))}_offset(i,e){const t=this["_"+i];if(e===0)return t;switch(typeof e){case"number":return()=>t()+e;case"function":return()=>t()+e();default:throw new Error("Not a number of function")}}_passThrough(i){return this._offset(i,0)}constructor(i,e,t,n){this._x=i,this._y=e,this._width=t,this._height=n}get x(){return this._x()}get y(){return this._y()}get width(){return this._width()}get height(){return this._height()}get x2(){return this._x()+this._width()}get y2(){return this._y()+this._height()}equals(i){return i?this===i||this.x===i.x&&this.y===i.y&&this.width===i.width&&this.height===i.height:!1}modify(i){if(!Object.keys(i).length)return this;const e=t=>{const n=i[t];return typeof n=="number"?Zl(n):typeof n=="function"?n:this._passThrough(t)};return new yh(e("x"),e("y"),e("width"),e("height"))}translate(i,e){return i===0&&e===0?this:new yh(this._offset("x",i),this._offset("y",e),this._passThrough("width"),this._passThrough("height"))}translateBy(i){return this.translate(i.x,i.y)}expand(i,e=1){return i.left==0&&i.top==0&&i.right==0&&i.bottom==0?this:new yh(i.left?this._offset("x",-i.left*e):this._passThrough("x"),i.top?this._offset("y",-i.top*e):this._passThrough("y"),i.width?this._offset("width",i.width*e):this._passThrough("width"),i.height?this._offset("height",i.height*e):this._passThrough("height"))}shrink(i){return this.expand(i,-1)}intersect(i){return this===i?this:new yh(()=>Math.max(this.x,i.x),()=>Math.max(this.y,i.y),()=>Math.min(this.x2,i.x2)-Math.max(this.x,i.x),()=>Math.min(this.y2,i.y2)-Math.max(this.y,i.y))}isDefined(){return this.width>=0&&this.height>=0}flatten(){return new yh(Zl(this.x),Zl(this.y),Zl(this.width),Zl(this.height))}containsPoint(i,e){return i>=this.x&&i<this.x2&&e>=this.y&&e<this.y2}normalizePoint(i,e){return{x:(i-this.x)/this.width,y:(e-this.y)/this.height}}toString(){return`Rectangle: x: ${this.x}, y: ${this.y}, width: ${this.width}, height: ${this.height}`}};let kL=yh;zc(kL,"ZERO",yh.create(0,0,0,0));const Vpe="chromosome_ticks_and_labels",Wpe={x:"width",y:"height"};function LT(i){return i=="x"?"y":"x"}const kT={x:["bottom","top"],y:["left","right"]},Yq=Object.fromEntries(Object.entries(kT).map(([i,e])=>e.map(t=>[t,i])).flat(1));function hf(i){return Yq[i]}class zpe extends jh{constructor(e,t,n,s){const r=t=="locus",o={...r?Upe:Qq,...Hpe(t,e),...e};super(r?$pe(o,t):Xq(o,t),n,s,`axis_${e.orient}`),this.axisProps=o,this.blockEncodingInheritance=!0}getOrient(){return this.axisProps.orient}getSize(){const e={px:this.getPerpendicularSize()},t={grow:1};return Yq[this.axisProps.orient]=="x"?new gv(t,e):new gv(e,t)}getPerpendicularSize(){return cO(this.axisProps)}isPickingSupported(){return!1}}function cO(i){const e=hf(i.orient);let t=i.ticks&&i.tickSize||0;return i.labels&&(t+=i.labelPadding,e=="x"?t+=i.labelFontSize:t+=30),i.title&&(t+=i.titlePadding+i.titleFontSize),t=Math.min(i.maxExtent||1/0,Math.max(i.minExtent||0,t)),t}const Qq={values:null,minExtent:20,maxExtent:1/0,offset:0,domain:!0,domainWidth:1,domainColor:"gray",domainDash:null,domainDashOffset:0,domainCap:"square",ticks:!0,tickSize:5,tickWidth:1,tickColor:"gray",tickDash:null,tickDashOffset:0,tickCap:"square",tickCount:null,tickMinStep:null,labels:!0,labelAlign:"center",labelBaseline:"middle",labelPadding:4,labelFontSize:10,labelLimit:180,labelColor:"black",format:null,titleColor:"black",titleFont:"sans-serif",titleFontSize:10,titlePadding:3};function Hpe(i,e){const t=e.orient,n=i=="nominal"||i=="ordinal";let s="center",r="middle",o=e.labelAngle??((t=="top"||t=="bottom")&&n?-90:0);switch(t){case"left":s="right";break;case"right":s="left";break;case"top":case"bottom":Math.abs(o)>30?(s=o>0==(t=="bottom")?"left":"right",r="middle"):r=t=="top"?"alphabetic":"top";break}return{labelAlign:s,labelAngle:o,labelBaseline:r}}function Xq(i,e){const t={...i,extent:cO(i)},n=hf(t.orient),s=LT(n),r=t.orient=="bottom"||t.orient=="right"?1:-1,o=t.orient=="bottom"||t.orient=="left"?1:0,a=()=>({name:"domain",data:{values:[0]},mark:{type:"rule",clip:!1,strokeDash:t.domainDash,strokeCap:t.domainCap,color:t.domainColor,[s]:o,size:t.domainWidth}}),l=()=>({name:"labels",mark:{type:"text",clip:!1,align:t.labelAlign,angle:t.labelAngle,baseline:t.labelBaseline,[s+"Offset"]:(t.tickSize+t.labelPadding)*r,[s]:o,size:t.labelFontSize,color:t.labelColor,minBufferSize:1500},encoding:{[n]:{field:"value",type:e},text:{field:"label"}}}),c=()=>({name:"ticks",mark:{type:"rule",clip:!1,strokeDash:t.tickDash,strokeCap:t.tickCap,color:t.tickColor,size:t.tickWidth,minBufferSize:300},encoding:{[s]:{value:o},[s+"2"]:{value:o-t.tickSize/t.extent*(o?1:-1)}}}),h=()=>({name:"title",data:{values:[0]},mark:{type:"text",clip:!1,align:"center",baseline:t.orient=="bottom"?"bottom":"top",angle:[0,90,0,-90][["top","right","bottom","left"].indexOf(t.orient)],text:t.title,color:t.titleColor,[n]:.5,[s]:1-o}}),u=()=>{const f={name:"ticks_and_labels",encoding:{[n]:{field:"value",type:e}},layer:[]};return t.ticks&&f.layer.push(c()),t.labels&&f.layer.push(l()),f},d={resolve:{scale:{[n]:"forced"}},[Wpe[LT(n)]]:t.extent,data:{lazy:{type:"axisTicks",channel:n,axis:i}},layer:[]};return t.domain&&d.layer.push(a()),(t.ticks||t.labels)&&d.layer.push(u()),t.title&&d.layer.push(h()),d}const Upe={...Qq,chromTicks:!0,chromTickSize:18,chromTickWidth:1,chromTickColor:"#989898",chromTickDash:[4,2],chromTickDashOffset:1,chromLabels:!0,chromLabelFontSize:13,chromLabelFontWeight:"normal",chromLabelFontStyle:"normal",chromLabelColor:"black",chromLabelAlign:"left",chromLabelPadding:7};function $pe(i,e){const t={...i,extent:cO(i)},n=hf(t.orient),s=LT(n),r=t.orient=="bottom"||t.orient=="left"?1:0,o=()=>({name:"chromosome_ticks",mark:{type:"rule",strokeDash:i.chromTickDash,strokeDashOffset:i.chromTickDashOffset,[s]:r,[s+"2"]:r-t.chromTickSize/t.extent*(r?1:-1),color:i.chromTickColor,size:t.chromTickWidth}}),a=()=>{let h;switch(t.orient){case"top":h={y:0,angle:0,paddingX:4,dy:-t.chromLabelPadding,viewportEdgeFadeWidthLeft:20,viewportEdgeFadeWidthRight:20,viewportEdgeFadeDistanceRight:-10,viewportEdgeFadeDistanceLeft:-20};break;case"bottom":h={y:1,angle:0,paddingX:4,dy:t.chromLabelPadding+t.chromLabelFontSize*.73,viewportEdgeFadeWidthLeft:20,viewportEdgeFadeWidthRight:20,viewportEdgeFadeDistanceRight:-10,viewportEdgeFadeDistanceLeft:-20};break;case"left":h={x:1,angle:-90,paddingY:4,dy:-t.chromLabelPadding,viewportEdgeFadeWidthBottom:20,viewportEdgeFadeWidthTop:20,viewportEdgeFadeDistanceBottom:-20,viewportEdgeFadeDistanceTop:-10};break;case"right":h={x:0,angle:90,align:"right",paddingY:4,dy:-t.chromLabelPadding};break;default:h={}}return{name:"chromosome_labels",mark:{type:"text",size:t.chromLabelFontSize,font:t.chromLabelFont,fontWeight:t.chromLabelFontWeight,fontStyle:t.chromLabelFontStyle,color:t.chromLabelColor,align:i.chromLabelAlign,baseline:"alphabetic",clip:!1,...h},encoding:{[n+"2"]:{field:"continuousEnd",type:e},text:{field:"name"}}}};let l;switch(t.orient){case"bottom":case"top":l={};break;case"left":l={labelAngle:-90,labelAlign:"center",labelPadding:6};break;case"right":l={labelAngle:90,labelAlign:"center",labelPadding:6};break;default:l={}}const c=Xq({...i,...l},e);if(i.chromTicks||i.chromLabels){const h={name:Vpe,data:{lazy:{type:"axisGenome",channel:hf(t.orient)}},encoding:{[n]:{field:"continuousStart",type:e,band:0}},layer:[]};if(i.chromTicks&&h.layer.push(o()),i.chromLabels){h.layer.push(a());let u;c.layer.filter(d=>d.name=="ticks_and_labels").forEach(d=>d.layer.filter(f=>f.name=="labels").forEach(f=>{u=f.mark})),u&&(t.orient=="top"||t.orient=="bottom"?(u.viewportEdgeFadeWidthLeft=30,u.viewportEdgeFadeDistanceLeft=40):(u.viewportEdgeFadeWidthBottom=30,u.viewportEdgeFadeDistanceBottom=40))}c.layer.push(h)}return c}class jpe extends jh{constructor(e,t,n,s){const r={...t=="locus"?qpe:Jq,...e};super(Ype(r,t),n,s,`axisGrid_${e.orient}`),this.axisProps=r,this.blockEncodingInheritance=!0}getOrient(){return this.axisProps.orient}isPickingSupported(){return!1}}const Jq={values:null,grid:!1,gridCap:"butt",gridColor:"lightgray",gridDash:null,gridOpacity:1,gridWidth:1,tickCount:null,tickMinStep:null},qpe={...Jq,chromGrid:!1,chromGridCap:"butt",chromGridColor:"gray",chromGridDash:[1,5],chromGridOpacity:1,chromGridWidth:1};function Gpe(i,e){const t=i,n=hf(t.orient);return{name:"grid_lines",data:{lazy:{type:"axisTicks",channel:n,axis:i}},mark:{type:"rule",strokeDash:t.gridDash,strokeCap:t.gridCap,color:t.gridColor,size:t.gridWidth,opacity:t.gridOpacity,minBufferSize:300},encoding:{[n]:{field:"value",type:e}}}}function Kpe(i,e){const t=i,n=hf(t.orient);return{name:"chromosome_lines",data:{lazy:{type:"axisGenome",channel:n}},mark:{type:"rule",strokeDash:t.chromGridDash,strokeCap:t.chromGridCap,color:t.chromGridColor,size:t.chromGridWidth,opacity:t.chromGridOpacity},encoding:{[n]:{field:"continuousStart",type:e,band:0}}}}function Zpe(i,e){const t=i,n=hf(t.orient);return{name:"chromosome_fill",data:{lazy:{type:"axisGenome",channel:n}},mark:{type:"rect"},encoding:{[n]:{field:"continuousStart",type:e,band:0},[n+"2"]:{field:"continuousEnd",band:0},fill:{field:"odd",type:"nominal",scale:{domain:[!1,!0],range:[t.chromGridFillEven??"white",t.chromGridFillOdd??"white"]}},opacity:{field:"odd",type:"nominal",scale:{type:"ordinal",domain:[!1,!0],range:[t.chromGridFillEven?1:0,t.chromGridFillOdd?1:0]}}}}}function Ype(i,e){const t={...i},n=[];return t.chromGrid&&(t.chromGridFillOdd||t.chromGridFillEven)&&n.push(Zpe(t,e)),t.chromGrid&&t.chromGridOpacity>0&&n.push(Kpe(t,e)),t.grid&&t.gridOpacity>0&&n.push(Gpe(t,e)),{name:"grid_layers",resolve:{scale:{fill:"independent",opacity:"independent"}},layer:n}}const V6={anchor:"middle",frame:"group",offset:10,orient:"top",align:void 0,angle:0,baseline:"alphabetic",dx:0,dy:0,color:void 0,font:void 0,fontSize:12,fontStyle:"normal",fontWeight:"normal"},Qpe={orient:"left",anchor:"middle",align:"right",baseline:"middle",angle:0,fontSize:12},Xpe={orient:"top",anchor:"start",align:"left",baseline:"top",offset:-10,dx:10,fontSize:12},Jpe={start:0,middle:.5,end:1},eme={start:"left",middle:"center",end:"right"};function tme(i){if(!i)return;const e=Xi(i)?{text:i}:i;if(!e.text||e.orient=="none")return;const t={"track-title":Qpe,overlay:Xpe}[e.style]??{},n={...V6,...t,...e};let s={},r={x:0,y:0};const o=Jpe[n.anchor??"middle"];switch(n.orient){case"top":r={x:o,y:1},s={baseline:"alphabetic",angle:0};break;case"right":r={x:1,y:1-o},s={baseline:"alphabetic",angle:90};break;case"bottom":r={x:o,y:0},s={baseline:"top",angle:0};break;case"left":r={x:0,y:o},s={baseline:"alphabetic",angle:-90};break}const a={...V6,...s,...t,...e},l={xOffset:0,yOffset:0};switch(n.orient){case"top":l.yOffset=-a.offset;break;case"right":l.xOffset=a.offset;break;case"bottom":l.yOffset=a.offset;break;case"left":l.xOffset=-a.offset;break}return{configurableVisibility:!1,data:{values:[{}]},mark:{type:"text",tooltip:null,clip:!1,...r,...l,text:a.text,align:a.align??eme[a.anchor],angle:a.angle,baseline:a.baseline,dx:a.dx,dy:a.dy,color:a.color,font:a.font,size:a.fontSize,fontStyle:a.fontStyle,fontWeight:a.fontWeight}}}function ime(i,e,t,n){if(i.type=="wheel"){i.uiEvent.preventDefault();const s=i.uiEvent,r=s.deltaMode?120:1;let{x:o,y:a}=i.point;if(n){const l=n.mark.encoders;l.x&&!l.x2&&!l.x.constantValue&&(o=+l.x(n.datum)*e.width+e.x),l.y&&!l.y2&&!l.y.constantValue&&(a=(1-+l.y(n.datum))*e.height+e.y)}Math.abs(s.deltaX)<Math.abs(s.deltaY)?t({x:o,y:a,xDelta:0,yDelta:0,zDelta:s.deltaY*r/300}):t({x:o,y:a,xDelta:-s.deltaX*r,yDelta:0,zDelta:0})}else if(i.type=="mousedown"&&i.uiEvent.button===0){const s=i.uiEvent;s.preventDefault();let r=s;const o=l=>{t({x:r.clientX,y:r.clientY,xDelta:l.clientX-r.clientX,yDelta:l.clientY-r.clientY,zDelta:0}),r=l},a=l=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",a)};document.addEventListener("mouseup",a,!1),document.addEventListener("mousemove",o,!1)}}var Q_,X_,Uo,J_,xC,AT,yc,kh,ET,W6,IT,eG,kp,eb,DC,TT,LC,NT,kC,MT,RT,tG;class iG extends gm{constructor(e,t,n,s,r){super(e,t,n,s),zs(this,xC),zs(this,yc),zs(this,ET),zs(this,IT),zs(this,kp),zs(this,DC),zs(this,LC),zs(this,kC),zs(this,RT),zs(this,Q_,1/0),zs(this,X_,10),zs(this,Uo,[]),zs(this,J_,0),this.spec=e,j_(this,X_,e.spacing??10),j_(this,Q_,r),j_(this,Uo,[]),this.wrappingFacet=!1,this._createChildren()}_createChildren(){}appendChild(e){e.parent??(e.parent=this),Gi(this,Uo).push(bs(this,xC,AT).call(this,e)),bse(this,J_)._++}setChildren(e){for(const t of e)this.appendChild(t)}replaceChild(e,t){const n=Gi(this,Uo).findIndex(s=>s.view==e);if(n>=0)Gi(this,Uo)[n]=bs(this,xC,AT).call(this,t);else throw new Error("Not my child view!")}get children(){return Gi(this,Uo).map(e=>e.view)}get childCount(){return Gi(this,Uo).length}onScalesResolved(){super.onScalesResolved(),bs(this,IT,eG).call(this)}*[Symbol.iterator](){for(const e of Gi(this,Uo)){e.background&&(yield e.background);for(const t of Object.values(e.gridLines))yield t;for(const t of Object.values(e.axes))yield t;yield e.view,e.title&&(yield e.title)}}getOverhang(){const e=bs(this,kp,eb).call(this,"column"),t=bs(this,kp,eb).call(this,"row");return!e.length||!t.length?ea.zero():new ea(t.at(0).axisBefore,e.at(-1).axisAfter,t.at(-1).axisAfter,e.at(0).axisBefore)}getSize(){return this._cache("size",()=>new gv(bs(this,LC,NT).call(this,"column"),bs(this,LC,NT).call(this,"row")).subtractPadding(this.getOverhang()).addPadding(this.getPadding()))}render(e,t,n={}){if(!this.isConfiguredVisible())return;this.parent||(t=t.shrink(this.getPadding())),e.pushView(this,t);const s={devicePixelRatio:this.context.glHelper.dpr},r=N6(bs(this,DC,TT).call(this,"column"),t.width,s),o=N6(bs(this,DC,TT).call(this,"row"),t.height,s),a=new Zq(Gi(this,yc,kh).length,Gi(this,Q_)??1/0);for(const[l,c]of Gi(this,yc,kh).entries()){const{view:h,axes:u,gridLines:d,background:f,title:g}=c,[p,m]=a.getCellCoords(l),v=r[bs(this,kC,MT).call(this,"column",p)],b=o[bs(this,kC,MT).call(this,"row",m)],w=h.getSize(),y=h.getPadding().subtract(h.getOverhang()),x=v.location+y.left,k=b.location+y.top,S=(w.width.grow?v.size:w.width.px)-y.width,L=(w.height.grow?b.size:w.height.px)-y.height,D=new kL(()=>t.x+x,()=>t.y+k,()=>S,()=>L);c.coords=D,f==null||f.render(e,D,n);for(const T of Object.values(d))T.render(e,D,n);const N=rme(h);N&&h.render(e,D,n);for(const[T,$]of Object.entries(u)){const U=$.axisProps;let ee;const ce=$.getPerpendicularSize();T=="bottom"?ee=D.translate(0,D.height+U.offset).modify({height:ce}):T=="top"?ee=D.translate(0,-ce-U.offset).modify({height:ce}):T=="left"?ee=D.translate(-ce-U.offset,0).modify({width:ce}):T=="right"&&(ee=D.translate(D.width+U.offset,0).modify({width:ce})),$.render(e,ee)}N||h.render(e,D,n),g==null||g.render(e,D,{...n,clipRect:void 0})}e.popView(this)}propagateInteractionEvent(e){if(this.handleInteractionEvent(void 0,e,!0),e.stopped)return;const t=Gi(this,yc,kh).find(s=>s.coords.containsPoint(e.point.x,e.point.y)),n=t==null?void 0:t.view;n&&(n.propagateInteractionEvent(e),(n instanceof Ss||n instanceof jh)&&ime(e,t.coords,s=>bs(this,RT,tG).call(this,t.coords,t.view,s),this.context.getCurrentHover())),!e.stopped&&this.handleInteractionEvent(void 0,e,!1)}getDefaultResolution(e,t){return"independent"}}Q_=new WeakMap,X_=new WeakMap,Uo=new WeakMap,J_=new WeakMap,xC=new WeakSet,AT=function(i){var e;const t={view:i,background:void 0,axes:{},gridLines:{},coords:kL.ZERO};if(i instanceof Ss||i instanceof jh){const n=(e=i.spec)==null?void 0:e.view;if(n!=null&&n.fill||n!=null&&n.stroke){const r=new Ss(nme(n),this.context,i,"background"+Gi(this,J_));r.blockEncodingInheritance=!0,t.background=r}const s=tme(i.spec.title);if(s){const r=new Ss(s,this.context,i,"title"+Gi(this,J_));r.blockEncodingInheritance=!0,t.title=r}}return t},yc=new WeakSet,kh=function(){return Gi(this,Uo).filter(i=>i.view.isConfiguredVisible())},ET=new WeakSet,W6=function(){return new Zq(Gi(this,yc,kh).length,Gi(this,Q_)??1/0)},IT=new WeakSet,eG=function(){if(Object.keys(this.resolutions.axis).length)throw new Error("GridView (concat, vconcat, hconcat) does not currently support shared axes!");for(const i of Gi(this,Uo)){const{view:e,axes:t,gridLines:n}=i,s=(r,o,a)=>{const l=r.getAxisProps();if(l!==null){if(!l.orient){for(const c of kT[o])if(!t[c]){l.orient=c;break}if(!l.orient)throw new Error("No slots available for an axis! Perhaps a LayerView has more than two children?")}if(l.title??(l.title=r.getTitle()),!kT[o].includes(l.orient))throw new Error(`Invalid axis orientation "${l.orient}" on channel "${o}"!`);if(t[l.orient])throw new Error(`An axis with the orient "${l.orient}" already exists!`);t[l.orient]=new zpe(l,r.scaleResolution.type,this.context,a),(l.grid||l.chromGrid)&&(n[l.orient]=new jpe(l,r.scaleResolution.type,this.context,a))}};if(e instanceof Ss||e instanceof jh)for(const r of["x","y"]){const o=e.resolutions.axis[r];o&&s(o,r,e)}if(e instanceof jh){for(const r of e.children)for(const[o,a]of Object.entries(r.resolutions.axis)){const l=a.getAxisProps();l&&l.orient&&s(a,o,r)}for(const r of e.children)for(const[o,a]of Object.entries(r.resolutions.axis)){const l=a.getAxisProps();l&&!l.orient&&s(a,o,r)}}[...Object.values(t),...Object.values(n)].forEach(r=>r.visit(o=>{o instanceof Ss&&o.resolve("scale")}))}},kp=new WeakSet,eb=function(i){const e=i=="column"?["left","right"]:["top","bottom"],t=i=="column"?"width":"height",n=(s,r)=>s.map(o=>{const a=Gi(this,yc,kh)[o].axes[e[r]];if(a)return Math.max(a.getPerpendicularSize()+a.axisProps.offset,0);const l=Gi(this,yc,kh)[o].view.getOverhang();return i=="column"?r?l.right:l.left:r?l.bottom:l.top}).reduce((o,a)=>Math.max(o,a),0);return Gi(this,ET,W6)[i=="column"?"colIndices":"rowIndices"].map(s=>({axisBefore:n(s,0),axisAfter:n(s,1),view:Yge(s.map(r=>Gi(this,yc,kh)[r].view.getSize()[t]))}))},DC=new WeakSet,TT=function(i){const e=bs(this,kp,eb).call(this,i),t=[];t.push(Z_);for(const[n,s]of e.entries())n>0&&t.push({px:Gi(this,X_),grow:0}),(n==0||this.wrappingFacet)&&t.push(Z_),t.push({px:s.axisBefore,grow:0}),t.push(s.view),t.push({px:s.axisAfter,grow:0}),(n==e.length-1||this.wrappingFacet)&&t.push(Z_);return t},LC=new WeakSet,NT=function(i){let e=0,t=0;const n=(i=="row"&&this.spec.height)??(i=="column"&&this.spec.width);if(n||n===0)return Nq(n);const s=bs(this,kp,eb).call(this,i);for(const[r,o]of s.entries())r>0&&(t+=Gi(this,X_)),(r==0||this.wrappingFacet)&&(t+=0),t+=o.axisBefore,t+=o.view.px??0,e+=o.view.grow??0,t+=o.axisAfter,(r==s.length-1||this.wrappingFacet)&&(t+=0);return{px:t,grow:e}},kC=new WeakSet,MT=function(i,e){return i=="row"&&this.wrappingFacet?1+6*e+2:2+4*e+1},RT=new WeakSet,tG=function(i,e,t){for(const[n,s]of Object.entries(sme(e))){if(s.size<=0)continue;const r=i.normalizePoint(t.x,t.y),o=i.normalizePoint(t.x+t.xDelta,t.y+t.yDelta),a={x:o.x-r.x,y:o.y-r.y};for(const l of s)l.zoom(2**t.zDelta,n=="y"?1-r[n]:r[n],n=="x"?a.x:-a.y)}this.context.animator.requestRender()};function nme(i){return{configurableVisibility:!1,data:{values:[{}]},mark:{fill:null,strokeWidth:1,fillOpacity:i.fill?1:0,...i,type:"rect",clip:!1,tooltip:null}}}function sme(i){const e={x:new Set,y:new Set};return i.visit(t=>{for(const[n,s]of Object.entries(e)){const r=t.getScaleResolution(n);r&&r.isZoomable()&&s.add(r)}}),e}function rme(i){let e=!0;return i.visit(t=>{t instanceof Ss&&e&&(e=t.mark.properties.clip)}),e}class H2 extends iG{constructor(e,t,n,s){super(e,t,n,s,PT(e)?e.columns:OT(e)?1:1/0),this.spec=e}_createChildren(){const e=this.spec,t=PT(e)?e.concat:OT(e)?e.vconcat:e.hconcat;this.setChildren(t.map((n,s)=>this.context.createView(n,this,"grid"+s)))}}class ome{constructor(){this.types=[];const e=t=>(n,s,r,o)=>new t(n,s,r,n.name??o);this.addViewType(ame,e(Kq)),this.addViewType(uO,e(jh)),this.addViewType(hO,e(Ss)),this.addViewType(OT,e(H2)),this.addViewType(lme,e(H2)),this.addViewType(PT,e(H2))}addViewType(e,t){this.types.push({specGuard:e,factory:t})}createView(e,t,n,s){const r=this.types.find(o=>o.specGuard(e));if(r)return r.factory(e,t,n,s??"unnamed");throw new Error("Invalid spec, cannot figure out the view type from the properties: "+JSON.stringify([...Object.keys(e)]))}isViewSpec(e){const t=this.types.filter(n=>n.specGuard(e));if(t.length>1)throw new Error("Ambiguous spec. Cannot create a view!");return t.length==1}}function hO(i){return"mark"in i&&(Xi(i.mark)||ka(i.mark))}function uO(i){return"layer"in i&&ka(i.layer)}function nG(i){return i&&(hO(i)||uO(i))&&"aggregateSamples"in i}function ame(i){return"import"in i}function OT(i){return"vconcat"in i&&Ro(i.vconcat)}function lme(i){return"hconcat"in i&&Ro(i.hconcat)}function PT(i){return"concat"in i&&Ro(i.concat)}const cme={point:Pge,rect:Ege,rule:Vge,link:Uge,text:Zge};class Ss extends gm{constructor(e,t,n,s){super(e,t,n,s),this.spec=e;const r=cme[this.getMarkType()];if(r)this.mark=new r(this);else throw new Error(`No such mark: ${this.getMarkType()}`);this.sampleAggregateViews=[],this._initializeAggregateViews(),this.coords=void 0}*[Symbol.iterator](){for(const e of this.sampleAggregateViews)yield e}replaceChild(e,t){const n=this.sampleAggregateViews.indexOf(e);if(n>=0)this.sampleAggregateViews[n]=t;else throw new Error("Not my child view!")}render(e,t,n={}){this.isConfiguredVisible()&&(this.coords=t,e.pushView(this,t),e.renderMark(this.mark,n),e.popView(this))}getMarkType(){return typeof this.spec.mark=="object"?this.spec.mark.type:this.spec.mark}resolve(e){const t=this.mark.encoding;for(const[n,s]of Object.entries(t)){if(!yo(s))continue;let r=a0(s.resolutionChannel??n);if(e=="axis"&&!hv(r))continue;let o=this;for(;(o.getConfiguredOrDefaultResolution(r,e)=="forced"||o.parent instanceof gm&&["shared","excluded","forced"].includes(o.parent.getConfiguredOrDefaultResolution(r,e)))&&o.getConfiguredOrDefaultResolution(r,e)!="excluded";)o=o.parent;o.resolutions[e][r]||(o.resolutions[e][r]=e=="scale"?new Rpe(r):new Bpe(r)),hv(n)?o.resolutions[e][r].pushUnitView(this,n):e=="scale"&&o.resolutions[e][r].pushUnitView(this,n)}}getAccessor(e){return this._cache("accessor/"+e,()=>{const t=this.mark.encoding;if(t&&t[e])return this.context.accessorFactory.createAccessor(t[e])})}getFacetAccessor(e){return this.getAccessor("sample")||super.getFacetAccessor(this)}getCollector(){return this.context.dataFlow.findCollectorByKey(this)}_validateDomainQuery(e){if(K_(e))throw new Error(`getDomain(${e}), must only be called for primary channels!`);const t=this.mark.encoding[e];if(!yo(t))throw new Error("The channel has no scale, cannot get domain!");return t}getConfiguredDomain(e){const t=this._validateDomainQuery(e),n=t&&t.scale&&t.scale.domain;if(n){const s=this.getScaleResolution(t.resolutionChannel??e);return F6(t.type??"nominal",s.fromComplexInterval(n))}}extractDataDomain(e){const t=this._validateDomainQuery(e).type??"nominal",n=o=>{let a;const l=this.mark.encoding[o];if(l){const c=this.context.accessorFactory.createAccessor(l);if(c)if(a=F6(t),c.constant)a.extend(c({}));else{const h=this.getCollector();h!=null&&h.completed&&h.visitData(u=>a.extend(c(u)))}}return a};let s=n(e);const r=zR[e];if(r){const o=n(r);o&&s.extendAll(o)}return s}getZoomLevel(){const e=t=>{var n;return((n=this.getScaleResolution(t))==null?void 0:n.getZoomLevel())??1};return nw.map(e).reduce((t,n)=>t*n,1)}_initializeAggregateViews(){if(nG(this.spec))for(const e of this.spec.aggregateSamples){const t=e.transform??[];t.length&&o0(t).type!="collect"&&t.push({type:"collect"}),t.push({type:"mergeFacets"}),e.transform=t,e.encoding={...e.encoding??{},sample:null};const n=this.context.createView(e,this,"summaryView");n.getFacetFields=s=>{},this.sampleAggregateViews.push(n)}}propagateInteractionEvent(e){e.target=this}getDefaultResolution(e,t){return e=="x"?"shared":"independent"}}function*dO(i,e=[]){for(const[t,n]of i.entries())if(n instanceof Map)for(const s of dO(n,[...e,t]))yield s;else yield[[...e,t],n]}class sG extends Ln{get behavior(){return lO}constructor(e){super(),this.params=e??{type:"collect"},this.observers=[],this.facetBatches=void 0,this._init()}_init(){this._data=[],this.facetBatches=new tf([],JSON.stringify),this.facetBatches.set(void 0,this._data)}reset(){super.reset(),this._init()}handle(e){this._data.push(e)}beginBatch(e){Mge(e)&&(this._data=[],this.facetBatches.set(bl(e.facetId),this._data))}complete(){var e,t;const n=(e=this.params)==null?void 0:e.sort,s=n?SU(n.field,n.order):void 0,r=o=>{s&&o.sort(s)};if((t=this.params.groupby)!=null&&t.length){if(this.facetBatches.size>1)throw new Error("TODO: Support faceted data!");const o=this.params.groupby.map(l=>Di(l)),a=YD(this._data,...o);this.facetBatches.clear();for(const[l,c]of dO(a))this.facetBatches.set(l,c)}for(const o of this.facetBatches.values())r(o);if(this.children.length)for(const[o,a]of this.facetBatches.entries()){if(o){const l={type:"facet",facetId:o};for(const c of this.children)c.beginBatch(l)}for(const l of a)this._propagate(l)}super.complete();for(const o of this.observers)o(this)}getData(){switch(this._checkStatus(),this.facetBatches.size){case 0:return[];case 1:return[...this.facetBatches.values()][0];default:{const e=this.facetBatches;return{[Symbol.iterator]:function*(){for(const t of e.values())for(let n=0;n<t.length;n++)yield t[n]}}}}}visitData(e){this._checkStatus();for(const t of this.facetBatches.values())for(let n=0;n<t.length;n++)e(t[n])}getItemCount(){let e=0;for(const t of this.facetBatches.values())e+=t.length;return e}_checkStatus(){if(!this.completed)throw new Error("Data propagation is not completed! No data are available.")}}class GS{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(e,t){let n=this.length++;for(;n>0;){const s=n-1>>1,r=this.values[s];if(t>=r)break;this.ids[n]=this.ids[s],this.values[n]=r,n=s}this.ids[n]=e,this.values[n]=t}pop(){if(this.length===0)return;const e=this.ids[0];if(this.length--,this.length>0){const t=this.ids[0]=this.ids[this.length],n=this.values[0]=this.values[this.length],s=this.length>>1;let r=0;for(;r<s;){let o=(r<<1)+1;const a=o+1;let l=this.ids[o],c=this.values[o];const h=this.values[a];if(a<this.length&&h<c&&(o=a,l=this.ids[a],c=h),c>=n)break;this.ids[r]=l,this.values[r]=c,r=o}this.ids[r]=t,this.values[r]=n}return e}peek(){if(this.length!==0)return this.ids[0]}peekValue(){if(this.length!==0)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}class hme extends Ln{get behavior(){return Qc}constructor(e){super(),this.params=e,this.startAccessor=Di(e.start),this.endAccessor=Di(e.end),this.chromAccessor=e.chrom?Di(e.chrom):t=>{},this.weightAccessor=e.weight?Di(e.weight):t=>1,this.as={coverage:e.as||"coverage",start:e.asStart||e.start,end:e.asEnd||e.end,chrom:e.asChrom||e.chrom},this.createSegment=new Function("start","end","coverage","chrom","return {"+Object.entries(this.as).filter(([t,n])=>n).map(([t,n])=>`${JSON.stringify(n)}: ${t}`).join(", ")+"};"),this.ends=new GS}reset(){super.reset(),this.initialize()}initialize(){const e=this.as.coverage,t=this.as.end,n=this.as.chrom,s=this.startAccessor,r=this.endAccessor,o=this.chromAccessor,a=this.weightAccessor;let l,c,h,u=0,d;const f=this.ends;f.clear();const g=(m,v,b)=>{if(m==v)return;let w=!1;l&&(l[e]===b?(l[t]=v,w=!0):l[e]!=0&&this._propagate(l)),w||(l=this.createSegment(m,v,b,h))},p=()=>{let m;for(;(m=f.peekValue())!==void 0;)g(d,m,u),d=m,u-=f.pop();d=void 0,l&&(this._propagate(l),l=void 0)};this.handle=m=>{const v=s(m);let b;for(;(b=f.peekValue())!==void 0&&b<v;)g(d,b,u),d=b,u-=f.pop();if(n){let y=o(m);y!==c&&(p(),h=y,c=h)}d!==void 0&&g(d,v,u),d=v;const w=a(m);u+=w,f.push(w,r(m))},this.complete=()=>{p(),super.complete()}}}function ume(i,e,t=0,n=i.length){const s=new GS,r=n-t;let o;for(o=0;o<e&&o<r;o++)s.push(o,i[t+o]);for(;o<r;o++){const c=i[t+o];c>=s.peekValue()&&(s.push(o,c),s.pop())}const a=[];let l;for(;(l=s.pop())!==void 0;)a.push(t+l);return a.reverse()}class dme{constructor(e,t=-1/0,n=1/0){this.maxSize=e,this.lowerLimit=t,this.upperLimit=n;const s=this.maxSize*2+1;this.lowerLimits=new Float64Array(s),this.upperLimits=new Float64Array(s),this.lowerChildren=new Int32Array(s),this.upperChildren=new Int32Array(s),this.reset()}reset(){this.lowerLimits.fill(0),this.upperLimits.fill(0),this.lowerChildren.fill(0),this.upperChildren.fill(0),this.n=1,this.lowerLimits[0]=this.lowerLimit,this.upperLimits[0]=this.upperLimit}_findSlot(e,t,n=0){if(e>=this.lowerLimits[n]&&t<=this.upperLimits[n]){const s=this.lowerChildren[n];if(s){const r=this._findSlot(e,t,s);return r>=0?r:this._findSlot(e,t,this.upperChildren[n])}else return n}else return-1}reserve(e,t){if(t-e<=0)throw new Error("Cannot reserve an empty or negative-size slot!");if(this.n+1>this.lowerLimits.length)return!1;const n=this._findSlot(e,t);if(n<0)return!1;const s=this.n++,r=this.n++;return this.lowerLimits[s]=this.lowerLimits[n],this.upperLimits[s]=e,this.lowerLimits[r]=t,this.upperLimits[r]=this.upperLimits[n],this.lowerChildren[n]=s,this.upperChildren[n]=r,!0}}class fme extends Ln{get behavior(){return lO}constructor(e,t){if(super(),this.params=e,this._data=[],this.channel=e.channel??"x",!["x","y"].includes(this.channel))throw new Error("Invalid channel: "+this.channel);this.posAccessor=Di(this.params.pos),this.posBisector=ZD(this.posAccessor),this.scoreAccessor=Di(this.params.score),this.widthAccessor=Di(this.params.width),this.laneAccessor=this.params.lane?Di(this.params.lane):s=>0,this.padding=this.params.padding??0,this.reservationMaps=new Map,this.resolution=t.getScaleResolution(this.channel);const n=()=>this._filterAndPropagate();this.schedule=()=>t.context.animator.requestTransition(n),this.resolution.addEventListener("domain",s=>this.schedule()),t._addBroadcastHandler("layoutComputed",()=>this.schedule())}complete(){const e=this.posAccessor;this._data.sort((t,n)=>e(t)-e(n)),this._scores=this._data.map(this.scoreAccessor);for(const t of new Set(this._data.map(this.laneAccessor)))this.reservationMaps.set(t,new dme(200));this.schedule(),super.complete()}_filterAndPropagate(){var e;super.reset();const t=this.resolution.getScale(),n=(e=this.resolution.members[0].view.coords)==null?void 0:e[this.channel=="x"?"width":"height"];if(!n)return;for(const a of this.reservationMaps.values())a.reset();const s=t.domain(),r=70,o=ume(this._scores,r,this.posBisector.left(this._data,s[0]),this.posBisector.right(this._data,s[1]));for(const a of o){const l=this._data[a],c=t(this.posAccessor(l))*n,h=this.widthAccessor(l)/2+this.padding;this.reservationMaps.get(this.laneAccessor(l)).reserve(c-h,c+h)&&this._propagate(l)}super.complete()}reset(){super.reset(),this._data=[],this.groups=new Map}handle(e){this._data.push(e)}}class gme extends Ln{constructor(e){super(),this.params=e,this.predicate=void 0}initialize(){this.predicate=VR(this.params.expr,this.getGlobalObject())}handle(e){this.predicate(e)&&this._propagate(e)}}const pme="0".charCodeAt(0);function*mme(i,e=","){const t=e.charCodeAt(0);let n=0;for(let s=0;s<i.length;s++){const r=i.charCodeAt(s);r==t?(yield n,n=0):n=n*10+r-pme}yield n}class _me extends Ln{get behavior(){return Qc}constructor(e){super();const t=Di(e.exons??"exons"),n=Di(e.start??"start"),[s,r]=e.as||["exonStart","exonEnd"];this.handle=o=>{let a=n(o),l=a,c=!0;const h=t(o);for(const u of mme(h)){if(c)l=a+u;else{a=l+u;const d=Object.assign({},o);d[s]=l,d[r]=a,this._propagate(d)}c=!c}}}}class bme extends Ln{get behavior(){return Qc}constructor(e){super();const t=bl(e.field).map(r=>Di(r)),n=bl(e.separator),s=bl(e.as||e.field);if(t.length!==n.length||t.length!==s.length)throw new Error(`Lengths of "separator" (${n.length}), "fields" (${t.length}), and "as" (${s.length}) do not match!`);this.handle=r=>{if(t.some(l=>!l(r)))return;const o=t.map((l,c)=>l(r).split(n[c]));vme(o,r);const a=o[0].length;for(let l=0;l<a;l++){const c=Object.assign({},r);for(let h=0;h<t.length;h++)c[s[h]]=o[h][l];this._propagate(c)}}}}function vme(i,e){const t=i.map(n=>n.length);if(!t.every(n=>n==t[0]))throw new Error("Mismatching number of elements in the fields to be split: "+JSON.stringify(e))}class wme extends Ln{get behavior(){return Fu}constructor(e){super(),this.params=e,this.as=e.as,this.fn=void 0}initialize(){this.fn=VR(this.params.expr,this.getGlobalObject())}handle(e){e[this.as]=this.fn(e),this._propagate(e)}}class rG extends Ln{get behavior(){return Fu}constructor(e,t){super();const n=e.channel??"x";if(!["x","y"].includes(n))throw new Error("Invalid channel: "+n);const s=t.getScaleResolution(n).getGenome();if(!s)throw new Error("LinearizeGenomicCoordinate transform requires a locus scale!");const r=Di(e.chrom),o=bl(e.pos).map(g=>Di(g)),a=bl(e.as);if(o.length!=a.length)throw new Error('The number of "pos" and "as" elements must be equal!');const l=bl(e.offset);let c;if(l.length==0)c=new Array(o.length).fill(0);else if(l.length==1)c=new Array(o.length).fill(l[0]);else if(l.length==o.length)c=l;else throw new Error(`Invalid "offset" parameter: ${JSON.stringify(e.offset)}!`);const h=new Function("datum","chromOffset","posAccessors",a.map((g,p)=>`datum[${JSON.stringify(g)}] = chromOffset + +posAccessors[${p}](datum) - ${c[p]};`).join(`
`));let u,d=0;const f=g=>{if(g!==u){if(d=s.cumulativeChromPositions.get(g),d===void 0)throw new Error("Unknown chromosome/contig: "+g);u=g}return d};this.handle=g=>{h(g,f(r(g)),o),this._propagate(g)}}}const yme=["Lato-Regular.png"],Cme=[{id:87,width:53,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:43.491,chnl:15,x:0,y:0,page:0},{id:124,width:17,height:50,xoffset:0,yoffset:-32.193000000000005,xadvance:10.521,chnl:15,x:0,y:42,page:0},{id:40,width:20,height:49,xoffset:0,yoffset:-32.571000000000005,xadvance:11.214,chnl:15,x:0,y:94,page:0},{id:41,width:19,height:49,xoffset:0,yoffset:-32.571000000000005,xadvance:11.214,chnl:15,x:0,y:145,page:0},{id:36,width:32,height:49,xoffset:0,yoffset:-34.419000000000004,xadvance:24.360000000000003,chnl:15,x:0,y:196,page:0},{id:125,width:21,height:48,xoffset:0,yoffset:-32.193000000000005,xadvance:12.642000000000001,chnl:15,x:0,y:247,page:0},{id:91,width:22,height:48,xoffset:0,yoffset:-32.193000000000005,xadvance:12.852,chnl:15,x:0,y:297,page:0},{id:93,width:19,height:48,xoffset:0,yoffset:-32.193000000000005,xadvance:12.852,chnl:15,x:0,y:347,page:0},{id:123,width:21,height:48,xoffset:0,yoffset:-32.193000000000005,xadvance:12.642000000000001,chnl:15,x:0,y:397,page:0},{id:106,width:19,height:48,xoffset:0,yoffset:-30.639000000000003,xadvance:10.08,chnl:15,x:0,y:447,page:0},{id:81,width:43,height:47,xoffset:0,yoffset:-30.429000000000002,xadvance:33.621,chnl:15,x:21,y:447,page:0},{id:77,width:45,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:38.997,chnl:15,x:66,y:447,page:0},{id:64,width:43,height:44,xoffset:0,yoffset:-28.539,xadvance:35.133,chnl:15,x:23,y:397,page:0},{id:92,width:28,height:43,xoffset:0,yoffset:-30.933000000000003,xadvance:18.984,chnl:15,x:68,y:397,page:0},{id:47,width:28,height:43,xoffset:0,yoffset:-30.933000000000003,xadvance:18.984,chnl:15,x:98,y:397,page:0},{id:109,width:42,height:32,xoffset:0,yoffset:-21.609,xadvance:34.545,chnl:15,x:113,y:447,page:0},{id:119,width:42,height:31,xoffset:0,yoffset:-21.315,xadvance:32.991,chnl:15,x:157,y:447,page:0},{id:42,width:25,height:42,xoffset:0,yoffset:-31.626,xadvance:17.85,chnl:15,x:128,y:397,page:0},{id:37,width:42,height:41,xoffset:0,yoffset:-30.387,xadvance:33.663000000000004,chnl:15,x:155,y:397,page:0},{id:79,width:42,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:33.621,chnl:15,x:199,y:397,page:0},{id:102,width:24,height:41,xoffset:0,yoffset:-30.534000000000002,xadvance:14.721,chnl:15,x:243,y:397,page:0},{id:100,width:31,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:23.520000000000003,chnl:15,x:269,y:397,page:0},{id:98,width:32,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:23.520000000000003,chnl:15,x:302,y:397,page:0},{id:56,width:32,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:336,y:397,page:0},{id:38,width:40,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:29.904000000000003,chnl:15,x:370,y:397,page:0},{id:108,width:17,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:9.912,chnl:15,x:412,y:397,page:0},{id:107,width:31,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:21.336000000000002,chnl:15,x:431,y:397,page:0},{id:48,width:33,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:464,y:397,page:0},{id:71,width:38,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:30.681,chnl:15,x:21,y:347,page:0},{id:83,width:31,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:22.785,chnl:15,x:61,y:347,page:0},{id:63,width:27,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:18.795,chnl:15,x:94,y:347,page:0},{id:105,width:18,height:41,xoffset:0,yoffset:-30.639000000000003,xadvance:10.08,chnl:15,x:123,y:347,page:0},{id:51,width:32,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:143,y:347,page:0},{id:104,width:31,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:23.436,chnl:15,x:177,y:347,page:0},{id:67,width:37,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:28.056,chnl:15,x:210,y:347,page:0},{id:88,width:37,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:27.258000000000003,chnl:15,x:249,y:347,page:0},{id:68,width:40,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:31.941000000000003,chnl:15,x:288,y:347,page:0},{id:70,width:32,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:23.751,chnl:15,x:330,y:347,page:0},{id:34,width:23,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:15.561000000000002,chnl:15,x:364,y:347,page:0},{id:72,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:32.067,chnl:15,x:389,y:347,page:0},{id:73,width:18,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:11.760000000000002,chnl:15,x:429,y:347,page:0},{id:74,width:24,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:17.745,chnl:15,x:449,y:347,page:0},{id:75,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:27.825000000000003,chnl:15,x:24,y:297,page:0},{id:76,width:31,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:21.567,chnl:15,x:475,y:347,page:0},{id:66,width:35,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:27.153000000000002,chnl:15,x:64,y:297,page:0},{id:78,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:32.067,chnl:15,x:101,y:297,page:0},{id:33,width:18,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:11.298,chnl:15,x:141,y:297,page:0},{id:80,width:34,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:25.221,chnl:15,x:161,y:297,page:0},{id:65,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:28.434,chnl:15,x:197,y:297,page:0},{id:82,width:36,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:26.313000000000002,chnl:15,x:237,y:297,page:0},{id:35,width:33,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:275,y:297,page:0},{id:84,width:34,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.801000000000002,chnl:15,x:310,y:297,page:0},{id:85,width:37,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:30.891000000000002,chnl:15,x:346,y:297,page:0},{id:86,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:28.434,chnl:15,x:385,y:297,page:0},{id:39,width:16,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:8.568000000000001,chnl:15,x:425,y:297,page:0},{id:69,width:32,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.255000000000003,chnl:15,x:443,y:297,page:0},{id:89,width:36,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:26.208000000000002,chnl:15,x:23,y:247,page:0},{id:90,width:34,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:25.284000000000002,chnl:15,x:477,y:297,page:0},{id:49,width:31,height:40,xoffset:0,yoffset:-30.156000000000002,xadvance:24.360000000000003,chnl:15,x:61,y:247,page:0},{id:50,width:32,height:40,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:94,y:247,page:0},{id:57,width:32,height:40,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:128,y:247,page:0},{id:94,width:32,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:162,y:247,page:0},{id:96,width:21,height:40,xoffset:0,yoffset:-30.429000000000002,xadvance:16.8,chnl:15,x:196,y:247,page:0},{id:55,width:33,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:219,y:247,page:0},{id:54,width:33,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:254,y:247,page:0},{id:53,width:32,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:289,y:247,page:0},{id:52,width:33,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:323,y:247,page:0},{id:103,width:31,height:39,xoffset:0,yoffset:-21.630000000000003,xadvance:21.84,chnl:15,x:358,y:247,page:0},{id:112,width:32,height:39,xoffset:0,yoffset:-21.651,xadvance:23.541,chnl:15,x:391,y:247,page:0},{id:113,width:31,height:39,xoffset:0,yoffset:-21.651,xadvance:23.520000000000003,chnl:15,x:425,y:247,page:0},{id:116,width:25,height:39,xoffset:0,yoffset:-28.182000000000002,xadvance:15.057,chnl:15,x:458,y:247,page:0},{id:121,width:31,height:38,xoffset:0,yoffset:-21.273,xadvance:21.651,chnl:15,x:34,y:196,page:0},{id:59,width:18,height:36,xoffset:0,yoffset:-20.706,xadvance:10.983,chnl:15,x:485,y:247,page:0},{id:43,width:32,height:34,xoffset:0,yoffset:-24.486,xadvance:24.360000000000003,chnl:15,x:67,y:196,page:0},{id:60,width:30,height:33,xoffset:0,yoffset:-23.331000000000003,xadvance:24.360000000000003,chnl:15,x:101,y:196,page:0},{id:62,width:31,height:33,xoffset:0,yoffset:-23.331000000000003,xadvance:24.360000000000003,chnl:15,x:133,y:196,page:0},{id:117,width:30,height:32,xoffset:0,yoffset:-21.273,xadvance:23.415000000000003,chnl:15,x:166,y:196,page:0},{id:99,width:29,height:32,xoffset:0,yoffset:-21.609,xadvance:20.055,chnl:15,x:198,y:196,page:0},{id:110,width:31,height:32,xoffset:0,yoffset:-21.609,xadvance:23.436,chnl:15,x:229,y:196,page:0},{id:111,width:32,height:32,xoffset:0,yoffset:-21.609,xadvance:23.814,chnl:15,x:262,y:196,page:0},{id:126,width:32,height:26,xoffset:0,yoffset:-16.128,xadvance:24.360000000000003,chnl:15,x:201,y:447,page:0},{id:101,width:31,height:32,xoffset:0,yoffset:-21.609,xadvance:22.176000000000002,chnl:15,x:296,y:196,page:0},{id:114,width:25,height:32,xoffset:0,yoffset:-21.651,xadvance:15.288,chnl:15,x:329,y:196,page:0},{id:115,width:27,height:32,xoffset:0,yoffset:-21.609,xadvance:18.186,chnl:15,x:356,y:196,page:0},{id:97,width:28,height:32,xoffset:0,yoffset:-21.651,xadvance:20.874000000000002,chnl:15,x:385,y:196,page:0},{id:118,width:31,height:31,xoffset:0,yoffset:-21.273,xadvance:21.672,chnl:15,x:415,y:196,page:0},{id:61,width:31,height:29,xoffset:0,yoffset:-19.089000000000002,xadvance:24.360000000000003,chnl:15,x:448,y:196,page:0},{id:120,width:30,height:31,xoffset:0,yoffset:-21.273,xadvance:20.916,chnl:15,x:21,y:145,page:0},{id:58,width:18,height:31,xoffset:0,yoffset:-20.706,xadvance:10.5,chnl:15,x:53,y:145,page:0},{id:122,width:28,height:31,xoffset:0,yoffset:-21.273,xadvance:18.984,chnl:15,x:73,y:145,page:0},{id:95,width:28,height:16,xoffset:0,yoffset:0,xadvance:19.278000000000002,chnl:15,x:235,y:447,page:0},{id:45,width:23,height:24,xoffset:0,yoffset:-14.175,xadvance:15.603000000000002,chnl:15,x:481,y:196,page:0},{id:44,width:17,height:21,xoffset:0,yoffset:-4.956,xadvance:9.534,chnl:15,x:103,y:145,page:0},{id:46,width:18,height:15,xoffset:0,yoffset:-4.956,xadvance:9.912,chnl:15,x:0,y:497,page:0},{id:32,width:0,height:0,xoffset:0,yoffset:0,xadvance:10.752,chnl:15,x:20,y:497,page:0}],Sme={face:"Lato Regular",size:42,bold:0,italic:0,charset:[" ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~"],unicode:1,stretchH:100,smooth:1,aa:1,padding:[0,0,0,0],spacing:[2,2]},xme={lineHeight:50.400000000000006,base:41.454,scaleW:512,scaleH:512,pages:1,packed:0,alphaChnl:0,redChnl:0,greenChnl:0,blueChnl:0},Dme=[],oG={pages:yme,chars:Cme,info:Sme,common:xme,kernings:Dme};class Lme extends Ln{get behavior(){return Fu}constructor(e){super();const t=vT(oG),n=Di(e.field),s=e.as,r=e.fontSize;this.handle=o=>{const a=n(o);a!==void 0?o[s]=t.measureWidth(a,r):o[s]=0,this._propagate(o)}}}const kme=65536;class Ame extends Ln{get behavior(){return Fu}constructor(e){super(),this.params=e}reset(){super.reset(),this.initialize()}initialize(){const e=this.params,t=e.as||"lane",n=yr(e.spacing)?e.spacing:1,s=Di(e.start),r=Di(e.end);if(!e.preference!=!e.preferredOrder)throw new Error('Must specify both "preference" and "preferredOrder"');if(e.preference){const o=new Float64Array(kme),a=Di(e.preference),l=e.preferredOrder;let c=1/0;this.handle=h=>{const u=s(h);u<c&&o.fill(-1/0),c=u;const d=l.indexOf(a(h));let f=-1;if(d>=0&&o[d]<u)f=d;else{const g=s(h);for(f=0;f<o.length&&!(o[f]<g);f++);if(f>=o.length)throw new Error("Out of lanes!")}o[f]=r(h)+n,h[t]=f,this._propagate(h)}}else{const o=new GS,a=new GS;let l=-1/0,c=0;this.handle=h=>{const u=s(h);for(;o.length&&(o.peekValue()<=u||u<l);){const f=o.pop();a.push(f,f)}l=u;let d=a.pop();d===void 0&&(d=c++),h[t]=d,this._propagate(h),o.push(d,r(h)+n)}}}}class Eme extends Ln{get behavior(){return Qc}constructor(e){if(super(),e.as&&e.as.length!=e.fields.length)throw new Error('"fields" and "as" have unequal lengths!');const t=e.fields.map(s=>Di(s)),n=e.as?e.as:t.map(vse);this.handle=s=>{const r={};for(let o=0;o<t.length;o++)r[n[o]]=t[o](s);this._propagate(r)}}}class Ime extends Ln{get behavior(){return Fu}constructor(e){super();const t=new RegExp(e.regex),n=typeof e.as=="string"?[e.as]:e.as,s=Di(e.field);this.handle=r=>{const o=s(r);if(Xi(o)){const a=o.match(t);if(a){if(a.length-1!=n.length)throw new Error('The number of RegEx groups and the length of "as" do not match!');for(let l=0;l<n.length;l++)r[n[l]]=a[l+1]}else if(e.skipInvalidInput)for(let l=0;l<n.length;l++)r[n[l]]=void 0;else throw new Error(`"${o}" does not match the given regex: ${t.toString()}`)}else if(!e.skipInvalidInput)throw new Error(`Trying to match a non-string field. Encountered type: ${typeof o}, field content: "${o}".`);this._propagate(r)}}}class Tme extends Ln{get behavior(){return Qc}constructor(e){super();const t=bl(e.columnRegex).map(d=>new RegExp(d)),n=bl(e.asValue);if(t.length!=n.length)throw new Error('Lengths of "columnRegex" and "as" are not equal!');const s=e.skipRegex?new RegExp(e.skipRegex):void 0,r=e.asKey||"sample";let o,a,l;const c=d=>{var f;const g=Object.keys(d),p=new Map;for(const[v,b]of t.entries())for(const w of g){const y=(f=b.exec(w))==null?void 0:f[1];if(y!==void 0){let x=p.get(y);x||(x=[],p.set(y,x)),x[v]=w}}o=[...p.entries()],a=g.filter(v=>!t.some(b=>b.test(v))&&!(s&&s.test(v)));const m=[...a.map(v=>JSON.stringify(v)+": datum["+JSON.stringify(v)+"]"),JSON.stringify(r)+": sampleId",...n.map(v=>JSON.stringify(v)+": null")];l=new Function("datum","sampleId",`return {
`+m.join(`,
`)+`
};`)},h=d=>{o||c(d);for(const[f,g]of o){const p=l(d,f);for(let m=0;m<g.length;m++)p[n[m]]=d[g[m]];this._propagate(p)}},u=d=>{c(d),h(d),this.handle=h};this.handle=u,this.beginBatch=d=>{Eq(d)&&(this.handle=u),super.beginBatch(d)}}}class Nme extends Ln{get behavior(){return Fu}constructor(e){super(),this.params=e,this.buffer=[]}reset(){this.buffer=[]}handle(e){this.buffer.push(e)}complete(){const e=this.params,t=e.as||["y0","y1"],n=e.sort?SU(e.sort.field,e.sort.order):void 0,s=e.field?Di(e.field):()=>1,r=e.groupby.map(h=>Di(h)),o=cre(this.buffer,h=>r.map(u=>u(h)).join()).map(h=>h[1]);let a=h=>!0;if(e.baseField){const h=Di(e.baseField);a=u=>h(u)!==null}let l,c;switch(e.offset){case"normalize":l=(h,u)=>h/u,c=(h,u)=>jw(h,u);break;case"center":l=(h,u)=>h-u/2,c=(h,u)=>jw(h,u);break;case"information":{const h=Math.log2(e.cardinality??4);l=(u,d)=>u/d,c=(u,d)=>{const f=jw(u,v=>+!a(v)),g=jw(u,d),p=g-f;let m=0;for(let v=0;v<u.length;v++){const b=u[v];if(a(b)){const w=d(b)/p;m-=w*Math.log2(w)}}return p/(h-(m+0))*(p/g)}}break;default:l=(h,u)=>h,c=(h,u)=>1}for(const h of o){n&&h.sort(n);const u=c(h,s);let d=0;for(const f of h){const g=d+s(f);a(f)&&(f[t[0]]=l(d,u),f[t[1]]=l(g,u),this._propagate(f),d=g)}}super.complete()}}class Mme extends Ln{get behavior(){return Qc}constructor(e){super();const t=Di(e.field??"sequence"),[n,s]=e.as??["pos","sequence"];this.handle=r=>{const o=Object.assign({},r,{[s]:"",[n]:0}),a=t(r);for(let l=0;l<a.length;l++){const c=Object.assign({},o);c[n]=l,c[s]=a.charAt(l),this._propagate(c)}}}}class Rme extends Ln{get behavior(){return Qc}constructor(e){super(),this.params=e,this.buffer=[]}reset(){this.buffer=[]}handle(e){this.buffer.push(e)}complete(){const e=this.params.groupby,t=e.map(s=>Di(s)),n=YD(this.buffer,...t);for(const[s,r]of dO(n)){const o={count:r.length};for(let a=0;a<e.length;a++)o[e[a]]=s[a];this._propagate(o)}super.complete()}}const Ome="_uniqueId",z6=1e4,H6=[null];class aG extends Ln{get behavior(){return Fu}constructor(e){super(),this.params=e,this.as=e.as??Ome,this._blocks=[],this._usedBlocks=0,this._id=-1}initialize(){}reset(){super.reset(),this._usedBlocks=0,this._id=-1}handle(e){e[this.as]=this._nextId(),this._propagate(e)}_nextId(){return++this._id%z6==0&&(this._id=this._getBlock()*z6),this._id}_getBlock(){return this._usedBlocks<this._blocks.length?this._blocks[this._usedBlocks++]:this._reserveBlock()}_reserveBlock(){const e=H6.length;return H6[e]=this,this._blocks.push(e),this._usedBlocks++,e}}const Pme={aggregate:Rme,collect:sG,coverage:hme,filterScoredLabels:fme,filter:gme,flattenCompressedExons:_me,flattenDelimited:bme,flattenSequence:Mme,formula:wme,identifier:aG,linearizeGenomicCoordinate:rG,measureText:Lme,pileup:Ame,project:Eme,regexExtract:Ime,regexFold:Tme,sample:Iq,stack:Nme};function Fme(i,e){const t=Pme[i.type];if(t)return new t(i,e);throw new Error("Unknown transform: "+i.type)}function lG(i){const e={...i.format};if(e.type??(e.type=zme(i)&&Bme(i.url)),e.parse??(e.parse="auto"),!e.type)throw new Error("Format for the data source was not defined and it could not be inferred: "+JSON.stringify(i));return e}function Bme(i){var e;if(Array.isArray(i)&&(i=i[0]),i)return(e=i.match(/\.(csv|tsv|json)/))==null?void 0:e[1]}const cG=i=>typeof i!="object"?Vme:Wme,Vme=i=>({data:i}),Wme=i=>i;function zme(i){return"url"in i}class cw extends Ln{get identifier(){}handle(e){throw new Error("Source does not handle incoming data!")}async load(){}}function Hme(i){return"values"in i}class Ume extends cw{constructor(e,t){var n;if(super(),this.params=e,typeof e.values=="string"&&!((n=e==null?void 0:e.format)!=null&&n.type))throw new Error("Data format type (csv, dsv, ...) must be specified if a string is provided!")}loadSynchronously(){const e=this.params.values;let t=[],n=s=>s;if(Array.isArray(e))e.length>0&&(t=e,n=cG(e[0]));else if(typeof e=="object")t=[e];else if(typeof e=="string")t=s$(e,lG(this.params));else throw new Error('"values" in data configuration is not an array, object, or a string!');this.reset(),this.beginBatch({type:"file"});for(const s of t)this._propagate(n(s));this.complete()}async load(){this.loadSynchronously()}}function $me(i){return"url"in i}class jme extends cw{constructor(e,t){super(),this.params=e,this.baseUrl=t==null?void 0:t.getBaseUrl()}get identifier(){return JSON.stringify({params:this.params,baseUrl:this.baseUrl})}async load(){const e=this.params.url,t=Array.isArray(e)?e:[e],n=async r=>JD({baseURL:this.baseUrl}).load(r).catch(o=>{throw new Error(`Cannot fetch: ${this.baseUrl}${r}: ${o.message}`)}),s=(r,o)=>{try{const a=s$(r,lG(this.params));this.beginBatch({type:"file",url:o});for(const l of a)this._propagate(l)}catch(a){throw new Error(`Cannot parse: ${o}: ${a.message}`)}};this.reset(),await Promise.all(t.map(r=>n(r).then(s))),this.complete()}}function qme(i){return"sequence"in i}class Gme extends cw{constructor(e,t){if(super(),this.sequence=e.sequence,!("start"in this.sequence))throw new Error("'start' is missing from sequence parameters!");if(!("stop"in this.sequence))throw new Error("'stop' is missing from sequence parameters!")}loadSynchronously(){const e=this.sequence.as||"data",t=this.sequence.step||1,n=this.sequence.stop;this.reset(),this.beginBatch({type:"file"});for(let s=this.sequence.start;s<n;s+=t)this._propagate({[e]:s});this.complete()}async load(){this.loadSynchronously()}}function Kme(i,e,t){return t=(t-i)/(e-i),t=Math.max(0,Math.min(1,t)),t*t*(3-2*t)}class u0 extends cw{constructor(e,t){if(super(),this.view=e,t){if(t!=="x"&&t!=="y")throw new Error(`Invalid channel specified for the dynamic data source: ${t}. Must be either "x" or "y"`)}else throw new Error('No channel has been specified for the dynamic data source. Must be either "x" or "y".');if(this.channel=t,this.scaleResolution=this.view.getScaleResolution(t),!this.scaleResolution){const s=[`The dynamic data source cannot find a resolved scale for channel "${t}".`];throw this.view instanceof Ss||s.push('Make sure the view has a "shared" scale resolution as it is not a unit view.'),new Error(s.join(" "))}const n=()=>{this.view.isVisible()&&this.onDomainChanged(this.scaleResolution.getDomain(),this.scaleResolution.getComplexDomain())};this.scaleResolution.addEventListener("domain",n),this.view.context.addBroadcastListener("layoutComputed",n)}getAxisLength(){const e=this.scaleResolution.members.map(t=>{var n;return(n=t.view.coords)==null?void 0:n[this.channel==="x"?"width":"height"]}).filter(t=>t>0);return e.length?e.reduce((t,n)=>Math.min(t,n),1e4):0}get genome(){return this.scaleResolution.getGenome()}async onDomainChanged(e,t){}requestRender(){this.view.context.animator.requestRender()}async load(){this.reset(),this.complete()}publishData(e){this.reset(),this.beginBatch({type:"file"});for(const t of e)this._propagate(t);this.complete(),this.requestRender()}}class Zme extends u0{constructor(e,t){const n={axis:{},...e};super(t,n.channel),zc(this,"ticks",[]),this.params=e}async onDomainChanged(){const e=this.scaleResolution.getScale(),t=this.params.axis,n=this.getAxisLength(),s=l=>25+60*Kme(100,700,l),r=yr(t.tickCount)?t.tickCount:Math.round(n/s(n)),o=Pq(e,r,t.tickMinStep),a=t.values?Fq(e,t.values,o):npe(e,o);if(!OR(a,this.ticks)){this.ticks=a;const l=rpe(e,r,t.format);this.publishData(a.map(c=>({value:c,label:l(c)})))}}}class Yme extends u0{constructor(e,t){super(t,e.channel)}async load(){this.publishData(this.genome.chromosomes)}}var uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function d0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Vr={},AL={};AL.byteLength=Jme;AL.toByteArray=t0e;AL.fromByteArray=s0e;var sl=[],ao=[],Qme=typeof Uint8Array<"u"?Uint8Array:Array,U2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ag=0,Xme=U2.length;Ag<Xme;++Ag)sl[Ag]=U2[Ag],ao[U2.charCodeAt(Ag)]=Ag;ao["-".charCodeAt(0)]=62;ao["_".charCodeAt(0)]=63;function hG(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Jme(i){var e=hG(i),t=e[0],n=e[1];return(t+n)*3/4-n}function e0e(i,e,t){return(e+t)*3/4-t}function t0e(i){var e,t=hG(i),n=t[0],s=t[1],r=new Qme(e0e(i,n,s)),o=0,a=s>0?n-4:n,l;for(l=0;l<a;l+=4)e=ao[i.charCodeAt(l)]<<18|ao[i.charCodeAt(l+1)]<<12|ao[i.charCodeAt(l+2)]<<6|ao[i.charCodeAt(l+3)],r[o++]=e>>16&255,r[o++]=e>>8&255,r[o++]=e&255;return s===2&&(e=ao[i.charCodeAt(l)]<<2|ao[i.charCodeAt(l+1)]>>4,r[o++]=e&255),s===1&&(e=ao[i.charCodeAt(l)]<<10|ao[i.charCodeAt(l+1)]<<4|ao[i.charCodeAt(l+2)]>>2,r[o++]=e>>8&255,r[o++]=e&255),r}function i0e(i){return sl[i>>18&63]+sl[i>>12&63]+sl[i>>6&63]+sl[i&63]}function n0e(i,e,t){for(var n,s=[],r=e;r<t;r+=3)n=(i[r]<<16&16711680)+(i[r+1]<<8&65280)+(i[r+2]&255),s.push(i0e(n));return s.join("")}function s0e(i){for(var e,t=i.length,n=t%3,s=[],r=16383,o=0,a=t-n;o<a;o+=r)s.push(n0e(i,o,o+r>a?a:o+r));return n===1?(e=i[t-1],s.push(sl[e>>2]+sl[e<<4&63]+"==")):n===2&&(e=(i[t-2]<<8)+i[t-1],s.push(sl[e>>10]+sl[e>>4&63]+sl[e<<2&63]+"=")),s.join("")}var fO={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */fO.read=function(i,e,t,n,s){var r,o,a=s*8-n-1,l=(1<<a)-1,c=l>>1,h=-7,u=t?s-1:0,d=t?-1:1,f=i[e+u];for(u+=d,r=f&(1<<-h)-1,f>>=-h,h+=a;h>0;r=r*256+i[e+u],u+=d,h-=8);for(o=r&(1<<-h)-1,r>>=-h,h+=n;h>0;o=o*256+i[e+u],u+=d,h-=8);if(r===0)r=1-c;else{if(r===l)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,n),r=r-c}return(f?-1:1)*o*Math.pow(2,r-n)};fO.write=function(i,e,t,n,s,r){var o,a,l,c=r*8-s-1,h=(1<<c)-1,u=h>>1,d=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:r-1,g=n?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+u>=1?e+=d/l:e+=d*Math.pow(2,1-u),e*l>=2&&(o++,l/=2),o+u>=h?(a=0,o=h):o+u>=1?(a=(e*l-1)*Math.pow(2,s),o=o+u):(a=e*Math.pow(2,u-1)*Math.pow(2,s),o=0));s>=8;i[t+f]=a&255,f+=g,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;i[t+f]=o&255,f+=g,o/=256,c-=8);i[t+f-g]|=p*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const e=AL,t=fO,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=a,i.SlowBuffer=b,i.INSPECT_MAX_BYTES=50;const s=2147483647;i.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=r(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function r(){try{const C=new Uint8Array(1),A={foo:function(){return 42}};return Object.setPrototypeOf(A,Uint8Array.prototype),Object.setPrototypeOf(C,A),C.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(C){if(C>s)throw new RangeError('The value "'+C+'" is invalid for option "size"');const A=new Uint8Array(C);return Object.setPrototypeOf(A,a.prototype),A}function a(C,A,I){if(typeof C=="number"){if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(C)}return l(C,A,I)}a.poolSize=8192;function l(C,A,I){if(typeof C=="string")return d(C,A);if(ArrayBuffer.isView(C))return g(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(en(C,ArrayBuffer)||C&&en(C.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(en(C,SharedArrayBuffer)||C&&en(C.buffer,SharedArrayBuffer)))return p(C,A,I);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const j=C.valueOf&&C.valueOf();if(j!=null&&j!==C)return a.from(j,A,I);const Y=m(C);if(Y)return Y;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return a.from(C[Symbol.toPrimitive]("string"),A,I);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}a.from=function(C,A,I){return l(C,A,I)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function h(C,A,I){return c(C),C<=0?o(C):A!==void 0?typeof I=="string"?o(C).fill(A,I):o(C).fill(A):o(C)}a.alloc=function(C,A,I){return h(C,A,I)};function u(C){return c(C),o(C<0?0:v(C)|0)}a.allocUnsafe=function(C){return u(C)},a.allocUnsafeSlow=function(C){return u(C)};function d(C,A){if((typeof A!="string"||A==="")&&(A="utf8"),!a.isEncoding(A))throw new TypeError("Unknown encoding: "+A);const I=w(C,A)|0;let j=o(I);const Y=j.write(C,A);return Y!==I&&(j=j.slice(0,Y)),j}function f(C){const A=C.length<0?0:v(C.length)|0,I=o(A);for(let j=0;j<A;j+=1)I[j]=C[j]&255;return I}function g(C){if(en(C,Uint8Array)){const A=new Uint8Array(C);return p(A.buffer,A.byteOffset,A.byteLength)}return f(C)}function p(C,A,I){if(A<0||C.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(C.byteLength<A+(I||0))throw new RangeError('"length" is outside of buffer bounds');let j;return A===void 0&&I===void 0?j=new Uint8Array(C):I===void 0?j=new Uint8Array(C,A):j=new Uint8Array(C,A,I),Object.setPrototypeOf(j,a.prototype),j}function m(C){if(a.isBuffer(C)){const A=v(C.length)|0,I=o(A);return I.length===0||C.copy(I,0,0,A),I}if(C.length!==void 0)return typeof C.length!="number"||Bs(C.length)?o(0):f(C);if(C.type==="Buffer"&&Array.isArray(C.data))return f(C.data)}function v(C){if(C>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return C|0}function b(C){return+C!=C&&(C=0),a.alloc(+C)}a.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==a.prototype},a.compare=function(C,A){if(en(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),en(A,Uint8Array)&&(A=a.from(A,A.offset,A.byteLength)),!a.isBuffer(C)||!a.isBuffer(A))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===A)return 0;let I=C.length,j=A.length;for(let Y=0,ae=Math.min(I,j);Y<ae;++Y)if(C[Y]!==A[Y]){I=C[Y],j=A[Y];break}return I<j?-1:j<I?1:0},a.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(C,A){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return a.alloc(0);let I;if(A===void 0)for(A=0,I=0;I<C.length;++I)A+=C[I].length;const j=a.allocUnsafe(A);let Y=0;for(I=0;I<C.length;++I){let ae=C[I];if(en(ae,Uint8Array))Y+ae.length>j.length?(a.isBuffer(ae)||(ae=a.from(ae)),ae.copy(j,Y)):Uint8Array.prototype.set.call(j,ae,Y);else if(a.isBuffer(ae))ae.copy(j,Y);else throw new TypeError('"list" argument must be an Array of Buffers');Y+=ae.length}return j};function w(C,A){if(a.isBuffer(C))return C.length;if(ArrayBuffer.isView(C)||en(C,ArrayBuffer))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);const I=C.length,j=arguments.length>2&&arguments[2]===!0;if(!j&&I===0)return 0;let Y=!1;for(;;)switch(A){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":return ei(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I*2;case"hex":return I>>>1;case"base64":return eo(C).length;default:if(Y)return j?-1:ei(C).length;A=(""+A).toLowerCase(),Y=!0}}a.byteLength=w;function y(C,A,I){let j=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((I===void 0||I>this.length)&&(I=this.length),I<=0)||(I>>>=0,A>>>=0,I<=A))return"";for(C||(C="utf8");;)switch(C){case"hex":return me(this,A,I);case"utf8":case"utf-8":return ee(this,A,I);case"ascii":return Ce(this,A,I);case"latin1":case"binary":return Se(this,A,I);case"base64":return U(this,A,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Dt(this,A,I);default:if(j)throw new TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),j=!0}}a.prototype._isBuffer=!0;function x(C,A,I){const j=C[A];C[A]=C[I],C[I]=j}a.prototype.swap16=function(){const C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let A=0;A<C;A+=2)x(this,A,A+1);return this},a.prototype.swap32=function(){const C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let A=0;A<C;A+=4)x(this,A,A+3),x(this,A+1,A+2);return this},a.prototype.swap64=function(){const C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let A=0;A<C;A+=8)x(this,A,A+7),x(this,A+1,A+6),x(this,A+2,A+5),x(this,A+3,A+4);return this},a.prototype.toString=function(){const C=this.length;return C===0?"":arguments.length===0?ee(this,0,C):y.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(C){if(!a.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:a.compare(this,C)===0},a.prototype.inspect=function(){let C="";const A=i.INSPECT_MAX_BYTES;return C=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(C+=" ... "),"<Buffer "+C+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(C,A,I,j,Y){if(en(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),!a.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(A===void 0&&(A=0),I===void 0&&(I=C?C.length:0),j===void 0&&(j=0),Y===void 0&&(Y=this.length),A<0||I>C.length||j<0||Y>this.length)throw new RangeError("out of range index");if(j>=Y&&A>=I)return 0;if(j>=Y)return-1;if(A>=I)return 1;if(A>>>=0,I>>>=0,j>>>=0,Y>>>=0,this===C)return 0;let ae=Y-j,_e=I-A;const _t=Math.min(ae,_e),ci=this.slice(j,Y),Rt=C.slice(A,I);for(let Ot=0;Ot<_t;++Ot)if(ci[Ot]!==Rt[Ot]){ae=ci[Ot],_e=Rt[Ot];break}return ae<_e?-1:_e<ae?1:0};function k(C,A,I,j,Y){if(C.length===0)return-1;if(typeof I=="string"?(j=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),I=+I,Bs(I)&&(I=Y?0:C.length-1),I<0&&(I=C.length+I),I>=C.length){if(Y)return-1;I=C.length-1}else if(I<0)if(Y)I=0;else return-1;if(typeof A=="string"&&(A=a.from(A,j)),a.isBuffer(A))return A.length===0?-1:S(C,A,I,j,Y);if(typeof A=="number")return A=A&255,typeof Uint8Array.prototype.indexOf=="function"?Y?Uint8Array.prototype.indexOf.call(C,A,I):Uint8Array.prototype.lastIndexOf.call(C,A,I):S(C,[A],I,j,Y);throw new TypeError("val must be string, number or Buffer")}function S(C,A,I,j,Y){let ae=1,_e=C.length,_t=A.length;if(j!==void 0&&(j=String(j).toLowerCase(),j==="ucs2"||j==="ucs-2"||j==="utf16le"||j==="utf-16le")){if(C.length<2||A.length<2)return-1;ae=2,_e/=2,_t/=2,I/=2}function ci(Ot,hi){return ae===1?Ot[hi]:Ot.readUInt16BE(hi*ae)}let Rt;if(Y){let Ot=-1;for(Rt=I;Rt<_e;Rt++)if(ci(C,Rt)===ci(A,Ot===-1?0:Rt-Ot)){if(Ot===-1&&(Ot=Rt),Rt-Ot+1===_t)return Ot*ae}else Ot!==-1&&(Rt-=Rt-Ot),Ot=-1}else for(I+_t>_e&&(I=_e-_t),Rt=I;Rt>=0;Rt--){let Ot=!0;for(let hi=0;hi<_t;hi++)if(ci(C,Rt+hi)!==ci(A,hi)){Ot=!1;break}if(Ot)return Rt}return-1}a.prototype.includes=function(C,A,I){return this.indexOf(C,A,I)!==-1},a.prototype.indexOf=function(C,A,I){return k(this,C,A,I,!0)},a.prototype.lastIndexOf=function(C,A,I){return k(this,C,A,I,!1)};function L(C,A,I,j){I=Number(I)||0;const Y=C.length-I;j?(j=Number(j),j>Y&&(j=Y)):j=Y;const ae=A.length;j>ae/2&&(j=ae/2);let _e;for(_e=0;_e<j;++_e){const _t=parseInt(A.substr(_e*2,2),16);if(Bs(_t))return _e;C[I+_e]=_t}return _e}function D(C,A,I,j){return nr(ei(A,C.length-I),C,I,j)}function N(C,A,I,j){return nr(zn(A),C,I,j)}function T(C,A,I,j){return nr(eo(A),C,I,j)}function $(C,A,I,j){return nr(eh(A,C.length-I),C,I,j)}a.prototype.write=function(C,A,I,j){if(A===void 0)j="utf8",I=this.length,A=0;else if(I===void 0&&typeof A=="string")j=A,I=this.length,A=0;else if(isFinite(A))A=A>>>0,isFinite(I)?(I=I>>>0,j===void 0&&(j="utf8")):(j=I,I=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Y=this.length-A;if((I===void 0||I>Y)&&(I=Y),C.length>0&&(I<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");j||(j="utf8");let ae=!1;for(;;)switch(j){case"hex":return L(this,C,A,I);case"utf8":case"utf-8":return D(this,C,A,I);case"ascii":case"latin1":case"binary":return N(this,C,A,I);case"base64":return T(this,C,A,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,C,A,I);default:if(ae)throw new TypeError("Unknown encoding: "+j);j=(""+j).toLowerCase(),ae=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(C,A,I){return A===0&&I===C.length?e.fromByteArray(C):e.fromByteArray(C.slice(A,I))}function ee(C,A,I){I=Math.min(C.length,I);const j=[];let Y=A;for(;Y<I;){const ae=C[Y];let _e=null,_t=ae>239?4:ae>223?3:ae>191?2:1;if(Y+_t<=I){let ci,Rt,Ot,hi;switch(_t){case 1:ae<128&&(_e=ae);break;case 2:ci=C[Y+1],(ci&192)===128&&(hi=(ae&31)<<6|ci&63,hi>127&&(_e=hi));break;case 3:ci=C[Y+1],Rt=C[Y+2],(ci&192)===128&&(Rt&192)===128&&(hi=(ae&15)<<12|(ci&63)<<6|Rt&63,hi>2047&&(hi<55296||hi>57343)&&(_e=hi));break;case 4:ci=C[Y+1],Rt=C[Y+2],Ot=C[Y+3],(ci&192)===128&&(Rt&192)===128&&(Ot&192)===128&&(hi=(ae&15)<<18|(ci&63)<<12|(Rt&63)<<6|Ot&63,hi>65535&&hi<1114112&&(_e=hi))}}_e===null?(_e=65533,_t=1):_e>65535&&(_e-=65536,j.push(_e>>>10&1023|55296),_e=56320|_e&1023),j.push(_e),Y+=_t}return fe(j)}const ce=4096;function fe(C){const A=C.length;if(A<=ce)return String.fromCharCode.apply(String,C);let I="",j=0;for(;j<A;)I+=String.fromCharCode.apply(String,C.slice(j,j+=ce));return I}function Ce(C,A,I){let j="";I=Math.min(C.length,I);for(let Y=A;Y<I;++Y)j+=String.fromCharCode(C[Y]&127);return j}function Se(C,A,I){let j="";I=Math.min(C.length,I);for(let Y=A;Y<I;++Y)j+=String.fromCharCode(C[Y]);return j}function me(C,A,I){const j=C.length;(!A||A<0)&&(A=0),(!I||I<0||I>j)&&(I=j);let Y="";for(let ae=A;ae<I;++ae)Y+=to[C[ae]];return Y}function Dt(C,A,I){const j=C.slice(A,I);let Y="";for(let ae=0;ae<j.length-1;ae+=2)Y+=String.fromCharCode(j[ae]+j[ae+1]*256);return Y}a.prototype.slice=function(C,A){const I=this.length;C=~~C,A=A===void 0?I:~~A,C<0?(C+=I,C<0&&(C=0)):C>I&&(C=I),A<0?(A+=I,A<0&&(A=0)):A>I&&(A=I),A<C&&(A=C);const j=this.subarray(C,A);return Object.setPrototypeOf(j,a.prototype),j};function ze(C,A,I){if(C%1!==0||C<0)throw new RangeError("offset is not uint");if(C+A>I)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(C,A,I){C=C>>>0,A=A>>>0,I||ze(C,A,this.length);let j=this[C],Y=1,ae=0;for(;++ae<A&&(Y*=256);)j+=this[C+ae]*Y;return j},a.prototype.readUintBE=a.prototype.readUIntBE=function(C,A,I){C=C>>>0,A=A>>>0,I||ze(C,A,this.length);let j=this[C+--A],Y=1;for(;A>0&&(Y*=256);)j+=this[C+--A]*Y;return j},a.prototype.readUint8=a.prototype.readUInt8=function(C,A){return C=C>>>0,A||ze(C,1,this.length),this[C]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(C,A){return C=C>>>0,A||ze(C,2,this.length),this[C]|this[C+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(C,A){return C=C>>>0,A||ze(C,2,this.length),this[C]<<8|this[C+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(C,A){return C=C>>>0,A||ze(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(C,A){return C=C>>>0,A||ze(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},a.prototype.readBigUInt64LE=ps(function(C){C=C>>>0,ot(C,"offset");const A=this[C],I=this[C+7];(A===void 0||I===void 0)&&Me(C,this.length-8);const j=A+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24,Y=this[++C]+this[++C]*2**8+this[++C]*2**16+I*2**24;return BigInt(j)+(BigInt(Y)<<BigInt(32))}),a.prototype.readBigUInt64BE=ps(function(C){C=C>>>0,ot(C,"offset");const A=this[C],I=this[C+7];(A===void 0||I===void 0)&&Me(C,this.length-8);const j=A*2**24+this[++C]*2**16+this[++C]*2**8+this[++C],Y=this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+I;return(BigInt(j)<<BigInt(32))+BigInt(Y)}),a.prototype.readIntLE=function(C,A,I){C=C>>>0,A=A>>>0,I||ze(C,A,this.length);let j=this[C],Y=1,ae=0;for(;++ae<A&&(Y*=256);)j+=this[C+ae]*Y;return Y*=128,j>=Y&&(j-=Math.pow(2,8*A)),j},a.prototype.readIntBE=function(C,A,I){C=C>>>0,A=A>>>0,I||ze(C,A,this.length);let j=A,Y=1,ae=this[C+--j];for(;j>0&&(Y*=256);)ae+=this[C+--j]*Y;return Y*=128,ae>=Y&&(ae-=Math.pow(2,8*A)),ae},a.prototype.readInt8=function(C,A){return C=C>>>0,A||ze(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},a.prototype.readInt16LE=function(C,A){C=C>>>0,A||ze(C,2,this.length);const I=this[C]|this[C+1]<<8;return I&32768?I|4294901760:I},a.prototype.readInt16BE=function(C,A){C=C>>>0,A||ze(C,2,this.length);const I=this[C+1]|this[C]<<8;return I&32768?I|4294901760:I},a.prototype.readInt32LE=function(C,A){return C=C>>>0,A||ze(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},a.prototype.readInt32BE=function(C,A){return C=C>>>0,A||ze(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},a.prototype.readBigInt64LE=ps(function(C){C=C>>>0,ot(C,"offset");const A=this[C],I=this[C+7];(A===void 0||I===void 0)&&Me(C,this.length-8);const j=this[C+4]+this[C+5]*2**8+this[C+6]*2**16+(I<<24);return(BigInt(j)<<BigInt(32))+BigInt(A+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24)}),a.prototype.readBigInt64BE=ps(function(C){C=C>>>0,ot(C,"offset");const A=this[C],I=this[C+7];(A===void 0||I===void 0)&&Me(C,this.length-8);const j=(A<<24)+this[++C]*2**16+this[++C]*2**8+this[++C];return(BigInt(j)<<BigInt(32))+BigInt(this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+I)}),a.prototype.readFloatLE=function(C,A){return C=C>>>0,A||ze(C,4,this.length),t.read(this,C,!0,23,4)},a.prototype.readFloatBE=function(C,A){return C=C>>>0,A||ze(C,4,this.length),t.read(this,C,!1,23,4)},a.prototype.readDoubleLE=function(C,A){return C=C>>>0,A||ze(C,8,this.length),t.read(this,C,!0,52,8)},a.prototype.readDoubleBE=function(C,A){return C=C>>>0,A||ze(C,8,this.length),t.read(this,C,!1,52,8)};function Ge(C,A,I,j,Y,ae){if(!a.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>Y||A<ae)throw new RangeError('"value" argument is out of bounds');if(I+j>C.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(C,A,I,j){if(C=+C,A=A>>>0,I=I>>>0,!j){const _e=Math.pow(2,8*I)-1;Ge(this,C,A,I,_e,0)}let Y=1,ae=0;for(this[A]=C&255;++ae<I&&(Y*=256);)this[A+ae]=C/Y&255;return A+I},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(C,A,I,j){if(C=+C,A=A>>>0,I=I>>>0,!j){const _e=Math.pow(2,8*I)-1;Ge(this,C,A,I,_e,0)}let Y=I-1,ae=1;for(this[A+Y]=C&255;--Y>=0&&(ae*=256);)this[A+Y]=C/ae&255;return A+I},a.prototype.writeUint8=a.prototype.writeUInt8=function(C,A,I){return C=+C,A=A>>>0,I||Ge(this,C,A,1,255,0),this[A]=C&255,A+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(C,A,I){return C=+C,A=A>>>0,I||Ge(this,C,A,2,65535,0),this[A]=C&255,this[A+1]=C>>>8,A+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(C,A,I){return C=+C,A=A>>>0,I||Ge(this,C,A,2,65535,0),this[A]=C>>>8,this[A+1]=C&255,A+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(C,A,I){return C=+C,A=A>>>0,I||Ge(this,C,A,4,4294967295,0),this[A+3]=C>>>24,this[A+2]=C>>>16,this[A+1]=C>>>8,this[A]=C&255,A+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(C,A,I){return C=+C,A=A>>>0,I||Ge(this,C,A,4,4294967295,0),this[A]=C>>>24,this[A+1]=C>>>16,this[A+2]=C>>>8,this[A+3]=C&255,A+4};function Lt(C,A,I,j,Y){W(A,j,Y,C,I,7);let ae=Number(A&BigInt(4294967295));C[I++]=ae,ae=ae>>8,C[I++]=ae,ae=ae>>8,C[I++]=ae,ae=ae>>8,C[I++]=ae;let _e=Number(A>>BigInt(32)&BigInt(4294967295));return C[I++]=_e,_e=_e>>8,C[I++]=_e,_e=_e>>8,C[I++]=_e,_e=_e>>8,C[I++]=_e,I}function nt(C,A,I,j,Y){W(A,j,Y,C,I,7);let ae=Number(A&BigInt(4294967295));C[I+7]=ae,ae=ae>>8,C[I+6]=ae,ae=ae>>8,C[I+5]=ae,ae=ae>>8,C[I+4]=ae;let _e=Number(A>>BigInt(32)&BigInt(4294967295));return C[I+3]=_e,_e=_e>>8,C[I+2]=_e,_e=_e>>8,C[I+1]=_e,_e=_e>>8,C[I]=_e,I+8}a.prototype.writeBigUInt64LE=ps(function(C,A=0){return Lt(this,C,A,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=ps(function(C,A=0){return nt(this,C,A,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(C,A,I,j){if(C=+C,A=A>>>0,!j){const _t=Math.pow(2,8*I-1);Ge(this,C,A,I,_t-1,-_t)}let Y=0,ae=1,_e=0;for(this[A]=C&255;++Y<I&&(ae*=256);)C<0&&_e===0&&this[A+Y-1]!==0&&(_e=1),this[A+Y]=(C/ae>>0)-_e&255;return A+I},a.prototype.writeIntBE=function(C,A,I,j){if(C=+C,A=A>>>0,!j){const _t=Math.pow(2,8*I-1);Ge(this,C,A,I,_t-1,-_t)}let Y=I-1,ae=1,_e=0;for(this[A+Y]=C&255;--Y>=0&&(ae*=256);)C<0&&_e===0&&this[A+Y+1]!==0&&(_e=1),this[A+Y]=(C/ae>>0)-_e&255;return A+I},a.prototype.writeInt8=function(C,A,I){return C=+C,A=A>>>0,I||Ge(this,C,A,1,127,-128),C<0&&(C=255+C+1),this[A]=C&255,A+1},a.prototype.writeInt16LE=function(C,A,I){return C=+C,A=A>>>0,I||Ge(this,C,A,2,32767,-32768),this[A]=C&255,this[A+1]=C>>>8,A+2},a.prototype.writeInt16BE=function(C,A,I){return C=+C,A=A>>>0,I||Ge(this,C,A,2,32767,-32768),this[A]=C>>>8,this[A+1]=C&255,A+2},a.prototype.writeInt32LE=function(C,A,I){return C=+C,A=A>>>0,I||Ge(this,C,A,4,2147483647,-2147483648),this[A]=C&255,this[A+1]=C>>>8,this[A+2]=C>>>16,this[A+3]=C>>>24,A+4},a.prototype.writeInt32BE=function(C,A,I){return C=+C,A=A>>>0,I||Ge(this,C,A,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[A]=C>>>24,this[A+1]=C>>>16,this[A+2]=C>>>8,this[A+3]=C&255,A+4},a.prototype.writeBigInt64LE=ps(function(C,A=0){return Lt(this,C,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=ps(function(C,A=0){return nt(this,C,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Vi(C,A,I,j,Y,ae){if(I+j>C.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function wn(C,A,I,j,Y){return A=+A,I=I>>>0,Y||Vi(C,A,I,4),t.write(C,A,I,j,23,4),I+4}a.prototype.writeFloatLE=function(C,A,I){return wn(this,C,A,!0,I)},a.prototype.writeFloatBE=function(C,A,I){return wn(this,C,A,!1,I)};function Wn(C,A,I,j,Y){return A=+A,I=I>>>0,Y||Vi(C,A,I,8),t.write(C,A,I,j,52,8),I+8}a.prototype.writeDoubleLE=function(C,A,I){return Wn(this,C,A,!0,I)},a.prototype.writeDoubleBE=function(C,A,I){return Wn(this,C,A,!1,I)},a.prototype.copy=function(C,A,I,j){if(!a.isBuffer(C))throw new TypeError("argument should be a Buffer");if(I||(I=0),!j&&j!==0&&(j=this.length),A>=C.length&&(A=C.length),A||(A=0),j>0&&j<I&&(j=I),j===I||C.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(I<0||I>=this.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("sourceEnd out of bounds");j>this.length&&(j=this.length),C.length-A<j-I&&(j=C.length-A+I);const Y=j-I;return this===C&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(A,I,j):Uint8Array.prototype.set.call(C,this.subarray(I,j),A),Y},a.prototype.fill=function(C,A,I,j){if(typeof C=="string"){if(typeof A=="string"?(j=A,A=0,I=this.length):typeof I=="string"&&(j=I,I=this.length),j!==void 0&&typeof j!="string")throw new TypeError("encoding must be a string");if(typeof j=="string"&&!a.isEncoding(j))throw new TypeError("Unknown encoding: "+j);if(C.length===1){const ae=C.charCodeAt(0);(j==="utf8"&&ae<128||j==="latin1")&&(C=ae)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(A<0||this.length<A||this.length<I)throw new RangeError("Out of range index");if(I<=A)return this;A=A>>>0,I=I===void 0?this.length:I>>>0,C||(C=0);let Y;if(typeof C=="number")for(Y=A;Y<I;++Y)this[Y]=C;else{const ae=a.isBuffer(C)?C:a.from(C,j),_e=ae.length;if(_e===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(Y=0;Y<I-A;++Y)this[Y+A]=ae[Y%_e]}return this};const Ai={};function J(C,A,I){Ai[C]=class extends I{constructor(){super(),Object.defineProperty(this,"message",{value:A.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${C}]`,this.stack,delete this.name}get code(){return C}set code(j){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:j,writable:!0})}toString(){return`${this.name} [${C}]: ${this.message}`}}}J("ERR_BUFFER_OUT_OF_BOUNDS",function(C){return C?`${C} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),J("ERR_INVALID_ARG_TYPE",function(C,A){return`The "${C}" argument must be of type number. Received type ${typeof A}`},TypeError),J("ERR_OUT_OF_RANGE",function(C,A,I){let j=`The value of "${C}" is out of range.`,Y=I;return Number.isInteger(I)&&Math.abs(I)>2**32?Y=ye(String(I)):typeof I=="bigint"&&(Y=String(I),(I>BigInt(2)**BigInt(32)||I<-(BigInt(2)**BigInt(32)))&&(Y=ye(Y)),Y+="n"),j+=` It must be ${A}. Received ${Y}`,j},RangeError);function ye(C){let A="",I=C.length;const j=C[0]==="-"?1:0;for(;I>=j+4;I-=3)A=`_${C.slice(I-3,I)}${A}`;return`${C.slice(0,I)}${A}`}function he(C,A,I){ot(A,"offset"),(C[A]===void 0||C[A+I]===void 0)&&Me(A,C.length-(I+1))}function W(C,A,I,j,Y,ae){if(C>I||C<A){const _e=typeof A=="bigint"?"n":"";let _t;throw ae>3?A===0||A===BigInt(0)?_t=`>= 0${_e} and < 2${_e} ** ${(ae+1)*8}${_e}`:_t=`>= -(2${_e} ** ${(ae+1)*8-1}${_e}) and < 2 ** ${(ae+1)*8-1}${_e}`:_t=`>= ${A}${_e} and <= ${I}${_e}`,new Ai.ERR_OUT_OF_RANGE("value",_t,C)}he(j,Y,ae)}function ot(C,A){if(typeof C!="number")throw new Ai.ERR_INVALID_ARG_TYPE(A,"number",C)}function Me(C,A,I){throw Math.floor(C)!==C?(ot(C,I),new Ai.ERR_OUT_OF_RANGE(I||"offset","an integer",C)):A<0?new Ai.ERR_BUFFER_OUT_OF_BOUNDS:new Ai.ERR_OUT_OF_RANGE(I||"offset",`>= ${I?1:0} and <= ${A}`,C)}const vt=/[^+/0-9A-Za-z-_]/g;function pt(C){if(C=C.split("=")[0],C=C.trim().replace(vt,""),C.length<2)return"";for(;C.length%4!==0;)C=C+"=";return C}function ei(C,A){A=A||1/0;let I;const j=C.length;let Y=null;const ae=[];for(let _e=0;_e<j;++_e){if(I=C.charCodeAt(_e),I>55295&&I<57344){if(!Y){if(I>56319){(A-=3)>-1&&ae.push(239,191,189);continue}else if(_e+1===j){(A-=3)>-1&&ae.push(239,191,189);continue}Y=I;continue}if(I<56320){(A-=3)>-1&&ae.push(239,191,189),Y=I;continue}I=(Y-55296<<10|I-56320)+65536}else Y&&(A-=3)>-1&&ae.push(239,191,189);if(Y=null,I<128){if((A-=1)<0)break;ae.push(I)}else if(I<2048){if((A-=2)<0)break;ae.push(I>>6|192,I&63|128)}else if(I<65536){if((A-=3)<0)break;ae.push(I>>12|224,I>>6&63|128,I&63|128)}else if(I<1114112){if((A-=4)<0)break;ae.push(I>>18|240,I>>12&63|128,I>>6&63|128,I&63|128)}else throw new Error("Invalid code point")}return ae}function zn(C){const A=[];for(let I=0;I<C.length;++I)A.push(C.charCodeAt(I)&255);return A}function eh(C,A){let I,j,Y;const ae=[];for(let _e=0;_e<C.length&&!((A-=2)<0);++_e)I=C.charCodeAt(_e),j=I>>8,Y=I%256,ae.push(Y),ae.push(j);return ae}function eo(C){return e.toByteArray(pt(C))}function nr(C,A,I,j){let Y;for(Y=0;Y<j&&!(Y+I>=A.length||Y>=C.length);++Y)A[Y+I]=C[Y];return Y}function en(C,A){return C instanceof A||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===A.name}function Bs(C){return C!==C}const to=function(){const C="0123456789abcdef",A=new Array(256);for(let I=0;I<16;++I){const j=I*16;for(let Y=0;Y<16;++Y)A[j+Y]=C[I]+C[Y]}return A}();function ps(C){return typeof BigInt>"u"?Fa:C}function Fa(){throw new Error("BigInt not supported")}})(Vr);const Fh={},$2=typeof window<"u"?window:typeof self<"u"?self:{fetch:void 0};class Ac{async getBufferFromResponse(e){if(typeof e.buffer=="function")return e.buffer();if(typeof e.arrayBuffer=="function"){const t=await e.arrayBuffer();return Vr.Buffer.from(t)}else throw new TypeError("invalid HTTP response object, has no buffer method, and no arrayBuffer method")}constructor(e,t={}){this.baseOverrides={},this.url=e;const n=t.fetch||$2.fetch&&$2.fetch.bind($2);if(!n)throw new TypeError("no fetch function supplied, and none found in global environment");t.overrides&&(this.baseOverrides=t.overrides),this.fetchImplementation=n}async fetch(e,t){let n;try{n=await this.fetchImplementation(e,t)}catch(s){if(`${s}`.includes("Failed to fetch"))console.warn(`generic-filehandle: refetching ${e} to attempt to work around chrome CORS header caching bug`),n=await this.fetchImplementation(e,{...t,cache:"reload"});else throw s}return n}async read(e,t=0,n,s=0,r={}){const{headers:o={},signal:a,overrides:l={}}=r;n<1/0?o.range=`bytes=${s}-${s+n}`:n===1/0&&s!==0&&(o.range=`bytes=${s}-`);const c={...this.baseOverrides,...l,headers:{...o,...l.headers,...this.baseOverrides.headers},method:"GET",redirect:"follow",mode:"cors",signal:a},h=await this.fetch(this.url,c);if(!h.ok)throw new Error(`HTTP ${h.status} ${h.statusText} ${this.url}`);if(h.status===200&&s===0||h.status===206){const u=await this.getBufferFromResponse(h),d=u.copy(e,t,0,Math.min(n,u.length)),f=h.headers.get("content-range"),g=/\/(\d+)$/.exec(f||"");return g&&g[1]&&(this._stat={size:parseInt(g[1],10)}),{bytesRead:d,buffer:e}}throw h.status===200?new Error("${this.url} fetch returned status 200, expected 206"):new Error(`HTTP ${h.status} fetching ${this.url}`)}async readFile(e={}){let t,n;typeof e=="string"?(t=e,n={}):(t=e.encoding,n=e,delete n.encoding);const{headers:s={},signal:r,overrides:o={}}=n,a={headers:s,method:"GET",redirect:"follow",mode:"cors",signal:r,...this.baseOverrides,...o},l=await this.fetch(this.url,a);if(!l)throw new Error("generic-filehandle failed to fetch");if(l.status!==200)throw Object.assign(new Error(`HTTP ${l.status} fetching ${this.url}`),{status:l.status});if(t==="utf8")return l.text();if(t)throw new Error(`unsupported encoding: ${t}`);return this.getBufferFromResponse(l)}async stat(){if(!this._stat){const e=Vr.Buffer.allocUnsafe(10);if(await this.read(e,0,10,0),!this._stat)throw new Error(`unable to determine size of file at ${this.url}`)}return this._stat}async close(){}}var Xc={};(function(i){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function t(r,o){return Object.prototype.hasOwnProperty.call(r,o)}i.assign=function(r){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var a=o.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(var l in a)t(a,l)&&(r[l]=a[l])}}return r},i.shrinkBuf=function(r,o){return r.length===o?r:r.subarray?r.subarray(0,o):(r.length=o,r)};var n={arraySet:function(r,o,a,l,c){if(o.subarray&&r.subarray){r.set(o.subarray(a,a+l),c);return}for(var h=0;h<l;h++)r[c+h]=o[a+h]},flattenChunks:function(r){var o,a,l,c,h,u;for(l=0,o=0,a=r.length;o<a;o++)l+=r[o].length;for(u=new Uint8Array(l),c=0,o=0,a=r.length;o<a;o++)h=r[o],u.set(h,c),c+=h.length;return u}},s={arraySet:function(r,o,a,l,c){for(var h=0;h<l;h++)r[c+h]=o[a+h]},flattenChunks:function(r){return[].concat.apply([],r)}};i.setTyped=function(r){r?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,n)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,s))},i.setTyped(e)})(Xc);var hw={},Vl={},f0={},r0e=Xc,o0e=4,U6=0,$6=1,a0e=2;function g0(i){for(var e=i.length;--e>=0;)i[e]=0}var l0e=0,uG=1,c0e=2,h0e=3,u0e=258,gO=29,uw=256,pv=uw+1+gO,Ap=30,pO=19,dG=2*pv+1,Cd=15,j2=16,d0e=7,mO=256,fG=16,gG=17,pG=18,FT=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],AC=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],f0e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],mG=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],g0e=512,uc=new Array((pv+2)*2);g0(uc);var tb=new Array(Ap*2);g0(tb);var mv=new Array(g0e);g0(mv);var _v=new Array(u0e-h0e+1);g0(_v);var _O=new Array(gO);g0(_O);var KS=new Array(Ap);g0(KS);function q2(i,e,t,n,s){this.static_tree=i,this.extra_bits=e,this.extra_base=t,this.elems=n,this.max_length=s,this.has_stree=i&&i.length}var _G,bG,vG;function G2(i,e){this.dyn_tree=i,this.max_code=0,this.stat_desc=e}function wG(i){return i<256?mv[i]:mv[256+(i>>>7)]}function bv(i,e){i.pending_buf[i.pending++]=e&255,i.pending_buf[i.pending++]=e>>>8&255}function gr(i,e,t){i.bi_valid>j2-t?(i.bi_buf|=e<<i.bi_valid&65535,bv(i,i.bi_buf),i.bi_buf=e>>j2-i.bi_valid,i.bi_valid+=t-j2):(i.bi_buf|=e<<i.bi_valid&65535,i.bi_valid+=t)}function rl(i,e,t){gr(i,t[e*2],t[e*2+1])}function yG(i,e){var t=0;do t|=i&1,i>>>=1,t<<=1;while(--e>0);return t>>>1}function p0e(i){i.bi_valid===16?(bv(i,i.bi_buf),i.bi_buf=0,i.bi_valid=0):i.bi_valid>=8&&(i.pending_buf[i.pending++]=i.bi_buf&255,i.bi_buf>>=8,i.bi_valid-=8)}function m0e(i,e){var t=e.dyn_tree,n=e.max_code,s=e.stat_desc.static_tree,r=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length,c,h,u,d,f,g,p=0;for(d=0;d<=Cd;d++)i.bl_count[d]=0;for(t[i.heap[i.heap_max]*2+1]=0,c=i.heap_max+1;c<dG;c++)h=i.heap[c],d=t[t[h*2+1]*2+1]+1,d>l&&(d=l,p++),t[h*2+1]=d,!(h>n)&&(i.bl_count[d]++,f=0,h>=a&&(f=o[h-a]),g=t[h*2],i.opt_len+=g*(d+f),r&&(i.static_len+=g*(s[h*2+1]+f)));if(p!==0){do{for(d=l-1;i.bl_count[d]===0;)d--;i.bl_count[d]--,i.bl_count[d+1]+=2,i.bl_count[l]--,p-=2}while(p>0);for(d=l;d!==0;d--)for(h=i.bl_count[d];h!==0;)u=i.heap[--c],!(u>n)&&(t[u*2+1]!==d&&(i.opt_len+=(d-t[u*2+1])*t[u*2],t[u*2+1]=d),h--)}}function CG(i,e,t){var n=new Array(Cd+1),s=0,r,o;for(r=1;r<=Cd;r++)n[r]=s=s+t[r-1]<<1;for(o=0;o<=e;o++){var a=i[o*2+1];a!==0&&(i[o*2]=yG(n[a]++,a))}}function _0e(){var i,e,t,n,s,r=new Array(Cd+1);for(t=0,n=0;n<gO-1;n++)for(_O[n]=t,i=0;i<1<<FT[n];i++)_v[t++]=n;for(_v[t-1]=n,s=0,n=0;n<16;n++)for(KS[n]=s,i=0;i<1<<AC[n];i++)mv[s++]=n;for(s>>=7;n<Ap;n++)for(KS[n]=s<<7,i=0;i<1<<AC[n]-7;i++)mv[256+s++]=n;for(e=0;e<=Cd;e++)r[e]=0;for(i=0;i<=143;)uc[i*2+1]=8,i++,r[8]++;for(;i<=255;)uc[i*2+1]=9,i++,r[9]++;for(;i<=279;)uc[i*2+1]=7,i++,r[7]++;for(;i<=287;)uc[i*2+1]=8,i++,r[8]++;for(CG(uc,pv+1,r),i=0;i<Ap;i++)tb[i*2+1]=5,tb[i*2]=yG(i,5);_G=new q2(uc,FT,uw+1,pv,Cd),bG=new q2(tb,AC,0,Ap,Cd),vG=new q2(new Array(0),f0e,0,pO,d0e)}function SG(i){var e;for(e=0;e<pv;e++)i.dyn_ltree[e*2]=0;for(e=0;e<Ap;e++)i.dyn_dtree[e*2]=0;for(e=0;e<pO;e++)i.bl_tree[e*2]=0;i.dyn_ltree[mO*2]=1,i.opt_len=i.static_len=0,i.last_lit=i.matches=0}function xG(i){i.bi_valid>8?bv(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0}function b0e(i,e,t,n){xG(i),n&&(bv(i,t),bv(i,~t)),r0e.arraySet(i.pending_buf,i.window,e,t,i.pending),i.pending+=t}function j6(i,e,t,n){var s=e*2,r=t*2;return i[s]<i[r]||i[s]===i[r]&&n[e]<=n[t]}function K2(i,e,t){for(var n=i.heap[t],s=t<<1;s<=i.heap_len&&(s<i.heap_len&&j6(e,i.heap[s+1],i.heap[s],i.depth)&&s++,!j6(e,n,i.heap[s],i.depth));)i.heap[t]=i.heap[s],t=s,s<<=1;i.heap[t]=n}function q6(i,e,t){var n,s,r=0,o,a;if(i.last_lit!==0)do n=i.pending_buf[i.d_buf+r*2]<<8|i.pending_buf[i.d_buf+r*2+1],s=i.pending_buf[i.l_buf+r],r++,n===0?rl(i,s,e):(o=_v[s],rl(i,o+uw+1,e),a=FT[o],a!==0&&(s-=_O[o],gr(i,s,a)),n--,o=wG(n),rl(i,o,t),a=AC[o],a!==0&&(n-=KS[o],gr(i,n,a)));while(r<i.last_lit);rl(i,mO,e)}function BT(i,e){var t=e.dyn_tree,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,r=e.stat_desc.elems,o,a,l=-1,c;for(i.heap_len=0,i.heap_max=dG,o=0;o<r;o++)t[o*2]!==0?(i.heap[++i.heap_len]=l=o,i.depth[o]=0):t[o*2+1]=0;for(;i.heap_len<2;)c=i.heap[++i.heap_len]=l<2?++l:0,t[c*2]=1,i.depth[c]=0,i.opt_len--,s&&(i.static_len-=n[c*2+1]);for(e.max_code=l,o=i.heap_len>>1;o>=1;o--)K2(i,t,o);c=r;do o=i.heap[1],i.heap[1]=i.heap[i.heap_len--],K2(i,t,1),a=i.heap[1],i.heap[--i.heap_max]=o,i.heap[--i.heap_max]=a,t[c*2]=t[o*2]+t[a*2],i.depth[c]=(i.depth[o]>=i.depth[a]?i.depth[o]:i.depth[a])+1,t[o*2+1]=t[a*2+1]=c,i.heap[1]=c++,K2(i,t,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],m0e(i,e),CG(t,l,i.bl_count)}function G6(i,e,t){var n,s=-1,r,o=e[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),e[(t+1)*2+1]=65535,n=0;n<=t;n++)r=o,o=e[(n+1)*2+1],!(++a<l&&r===o)&&(a<c?i.bl_tree[r*2]+=a:r!==0?(r!==s&&i.bl_tree[r*2]++,i.bl_tree[fG*2]++):a<=10?i.bl_tree[gG*2]++:i.bl_tree[pG*2]++,a=0,s=r,o===0?(l=138,c=3):r===o?(l=6,c=3):(l=7,c=4))}function K6(i,e,t){var n,s=-1,r,o=e[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),n=0;n<=t;n++)if(r=o,o=e[(n+1)*2+1],!(++a<l&&r===o)){if(a<c)do rl(i,r,i.bl_tree);while(--a!==0);else r!==0?(r!==s&&(rl(i,r,i.bl_tree),a--),rl(i,fG,i.bl_tree),gr(i,a-3,2)):a<=10?(rl(i,gG,i.bl_tree),gr(i,a-3,3)):(rl(i,pG,i.bl_tree),gr(i,a-11,7));a=0,s=r,o===0?(l=138,c=3):r===o?(l=6,c=3):(l=7,c=4)}}function v0e(i){var e;for(G6(i,i.dyn_ltree,i.l_desc.max_code),G6(i,i.dyn_dtree,i.d_desc.max_code),BT(i,i.bl_desc),e=pO-1;e>=3&&i.bl_tree[mG[e]*2+1]===0;e--);return i.opt_len+=3*(e+1)+5+5+4,e}function w0e(i,e,t,n){var s;for(gr(i,e-257,5),gr(i,t-1,5),gr(i,n-4,4),s=0;s<n;s++)gr(i,i.bl_tree[mG[s]*2+1],3);K6(i,i.dyn_ltree,e-1),K6(i,i.dyn_dtree,t-1)}function y0e(i){var e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&i.dyn_ltree[t*2]!==0)return U6;if(i.dyn_ltree[9*2]!==0||i.dyn_ltree[10*2]!==0||i.dyn_ltree[13*2]!==0)return $6;for(t=32;t<uw;t++)if(i.dyn_ltree[t*2]!==0)return $6;return U6}var Z6=!1;function C0e(i){Z6||(_0e(),Z6=!0),i.l_desc=new G2(i.dyn_ltree,_G),i.d_desc=new G2(i.dyn_dtree,bG),i.bl_desc=new G2(i.bl_tree,vG),i.bi_buf=0,i.bi_valid=0,SG(i)}function DG(i,e,t,n){gr(i,(l0e<<1)+(n?1:0),3),b0e(i,e,t,!0)}function S0e(i){gr(i,uG<<1,3),rl(i,mO,uc),p0e(i)}function x0e(i,e,t,n){var s,r,o=0;i.level>0?(i.strm.data_type===a0e&&(i.strm.data_type=y0e(i)),BT(i,i.l_desc),BT(i,i.d_desc),o=v0e(i),s=i.opt_len+3+7>>>3,r=i.static_len+3+7>>>3,r<=s&&(s=r)):s=r=t+5,t+4<=s&&e!==-1?DG(i,e,t,n):i.strategy===o0e||r===s?(gr(i,(uG<<1)+(n?1:0),3),q6(i,uc,tb)):(gr(i,(c0e<<1)+(n?1:0),3),w0e(i,i.l_desc.max_code+1,i.d_desc.max_code+1,o+1),q6(i,i.dyn_ltree,i.dyn_dtree)),SG(i),n&&xG(i)}function D0e(i,e,t){return i.pending_buf[i.d_buf+i.last_lit*2]=e>>>8&255,i.pending_buf[i.d_buf+i.last_lit*2+1]=e&255,i.pending_buf[i.l_buf+i.last_lit]=t&255,i.last_lit++,e===0?i.dyn_ltree[t*2]++:(i.matches++,e--,i.dyn_ltree[(_v[t]+uw+1)*2]++,i.dyn_dtree[wG(e)*2]++),i.last_lit===i.lit_bufsize-1}f0._tr_init=C0e;f0._tr_stored_block=DG;f0._tr_flush_block=x0e;f0._tr_tally=D0e;f0._tr_align=S0e;function L0e(i,e,t,n){for(var s=i&65535|0,r=i>>>16&65535|0,o=0;t!==0;){o=t>2e3?2e3:t,t-=o;do s=s+e[n++]|0,r=r+s|0;while(--o);s%=65521,r%=65521}return s|r<<16|0}var LG=L0e;function k0e(){for(var i,e=[],t=0;t<256;t++){i=t;for(var n=0;n<8;n++)i=i&1?3988292384^i>>>1:i>>>1;e[t]=i}return e}var A0e=k0e();function E0e(i,e,t,n){var s=A0e,r=n+t;i^=-1;for(var o=n;o<r;o++)i=i>>>8^s[(i^e[o])&255];return i^-1}var kG=E0e,bO={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},js=Xc,Eo=f0,AG=LG,fh=kG,I0e=bO,qf=0,T0e=1,N0e=3,qh=4,Y6=5,ol=0,Q6=1,wl=-2,M0e=-3,Z2=-5,R0e=-1,O0e=1,ny=2,P0e=3,F0e=4,B0e=0,V0e=2,EL=8,W0e=9,z0e=15,H0e=8,U0e=29,$0e=256,VT=$0e+1+U0e,j0e=30,q0e=19,G0e=2*VT+1,K0e=15,Nt=3,Bh=258,aa=Bh+Nt+1,Z0e=32,IL=42,WT=69,EC=73,IC=91,TC=103,Sd=113,L_=666,as=1,dw=2,df=3,p0=4,Y0e=3;function Vh(i,e){return i.msg=I0e[e],e}function X6(i){return(i<<1)-(i>4?9:0)}function Ah(i){for(var e=i.length;--e>=0;)i[e]=0}function gh(i){var e=i.state,t=e.pending;t>i.avail_out&&(t=i.avail_out),t!==0&&(js.arraySet(i.output,e.pending_buf,e.pending_out,t,i.next_out),i.next_out+=t,e.pending_out+=t,i.total_out+=t,i.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))}function ls(i,e){Eo._tr_flush_block(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,e),i.block_start=i.strstart,gh(i.strm)}function jt(i,e){i.pending_buf[i.pending++]=e}function X0(i,e){i.pending_buf[i.pending++]=e>>>8&255,i.pending_buf[i.pending++]=e&255}function Q0e(i,e,t,n){var s=i.avail_in;return s>n&&(s=n),s===0?0:(i.avail_in-=s,js.arraySet(e,i.input,i.next_in,s,t),i.state.wrap===1?i.adler=AG(i.adler,e,s,t):i.state.wrap===2&&(i.adler=fh(i.adler,e,s,t)),i.next_in+=s,i.total_in+=s,s)}function EG(i,e){var t=i.max_chain_length,n=i.strstart,s,r,o=i.prev_length,a=i.nice_match,l=i.strstart>i.w_size-aa?i.strstart-(i.w_size-aa):0,c=i.window,h=i.w_mask,u=i.prev,d=i.strstart+Bh,f=c[n+o-1],g=c[n+o];i.prev_length>=i.good_match&&(t>>=2),a>i.lookahead&&(a=i.lookahead);do if(s=e,!(c[s+o]!==g||c[s+o-1]!==f||c[s]!==c[n]||c[++s]!==c[n+1])){n+=2,s++;do;while(c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&n<d);if(r=Bh-(d-n),n=d-Bh,r>o){if(i.match_start=e,o=r,r>=a)break;f=c[n+o-1],g=c[n+o]}}while((e=u[e&h])>l&&--t!==0);return o<=i.lookahead?o:i.lookahead}function ff(i){var e=i.w_size,t,n,s,r,o;do{if(r=i.window_size-i.lookahead-i.strstart,i.strstart>=e+(e-aa)){js.arraySet(i.window,i.window,e,e,0),i.match_start-=e,i.strstart-=e,i.block_start-=e,n=i.hash_size,t=n;do s=i.head[--t],i.head[t]=s>=e?s-e:0;while(--n);n=e,t=n;do s=i.prev[--t],i.prev[t]=s>=e?s-e:0;while(--n);r+=e}if(i.strm.avail_in===0)break;if(n=Q0e(i.strm,i.window,i.strstart+i.lookahead,r),i.lookahead+=n,i.lookahead+i.insert>=Nt)for(o=i.strstart-i.insert,i.ins_h=i.window[o],i.ins_h=(i.ins_h<<i.hash_shift^i.window[o+1])&i.hash_mask;i.insert&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[o+Nt-1])&i.hash_mask,i.prev[o&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=o,o++,i.insert--,!(i.lookahead+i.insert<Nt)););}while(i.lookahead<aa&&i.strm.avail_in!==0)}function X0e(i,e){var t=65535;for(t>i.pending_buf_size-5&&(t=i.pending_buf_size-5);;){if(i.lookahead<=1){if(ff(i),i.lookahead===0&&e===qf)return as;if(i.lookahead===0)break}i.strstart+=i.lookahead,i.lookahead=0;var n=i.block_start+t;if((i.strstart===0||i.strstart>=n)&&(i.lookahead=i.strstart-n,i.strstart=n,ls(i,!1),i.strm.avail_out===0)||i.strstart-i.block_start>=i.w_size-aa&&(ls(i,!1),i.strm.avail_out===0))return as}return i.insert=0,e===qh?(ls(i,!0),i.strm.avail_out===0?df:p0):(i.strstart>i.block_start&&(ls(i,!1),i.strm.avail_out),as)}function Y2(i,e){for(var t,n;;){if(i.lookahead<aa){if(ff(i),i.lookahead<aa&&e===qf)return as;if(i.lookahead===0)break}if(t=0,i.lookahead>=Nt&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Nt-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),t!==0&&i.strstart-t<=i.w_size-aa&&(i.match_length=EG(i,t)),i.match_length>=Nt)if(n=Eo._tr_tally(i,i.strstart-i.match_start,i.match_length-Nt),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=Nt){i.match_length--;do i.strstart++,i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Nt-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart;while(--i.match_length!==0);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+1])&i.hash_mask;else n=Eo._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(n&&(ls(i,!1),i.strm.avail_out===0))return as}return i.insert=i.strstart<Nt-1?i.strstart:Nt-1,e===qh?(ls(i,!0),i.strm.avail_out===0?df:p0):i.last_lit&&(ls(i,!1),i.strm.avail_out===0)?as:dw}function Eg(i,e){for(var t,n,s;;){if(i.lookahead<aa){if(ff(i),i.lookahead<aa&&e===qf)return as;if(i.lookahead===0)break}if(t=0,i.lookahead>=Nt&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Nt-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=Nt-1,t!==0&&i.prev_length<i.max_lazy_match&&i.strstart-t<=i.w_size-aa&&(i.match_length=EG(i,t),i.match_length<=5&&(i.strategy===O0e||i.match_length===Nt&&i.strstart-i.match_start>4096)&&(i.match_length=Nt-1)),i.prev_length>=Nt&&i.match_length<=i.prev_length){s=i.strstart+i.lookahead-Nt,n=Eo._tr_tally(i,i.strstart-1-i.prev_match,i.prev_length-Nt),i.lookahead-=i.prev_length-1,i.prev_length-=2;do++i.strstart<=s&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Nt-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart);while(--i.prev_length!==0);if(i.match_available=0,i.match_length=Nt-1,i.strstart++,n&&(ls(i,!1),i.strm.avail_out===0))return as}else if(i.match_available){if(n=Eo._tr_tally(i,0,i.window[i.strstart-1]),n&&ls(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return as}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(n=Eo._tr_tally(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<Nt-1?i.strstart:Nt-1,e===qh?(ls(i,!0),i.strm.avail_out===0?df:p0):i.last_lit&&(ls(i,!1),i.strm.avail_out===0)?as:dw}function J0e(i,e){for(var t,n,s,r,o=i.window;;){if(i.lookahead<=Bh){if(ff(i),i.lookahead<=Bh&&e===qf)return as;if(i.lookahead===0)break}if(i.match_length=0,i.lookahead>=Nt&&i.strstart>0&&(s=i.strstart-1,n=o[s],n===o[++s]&&n===o[++s]&&n===o[++s])){r=i.strstart+Bh;do;while(n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&s<r);i.match_length=Bh-(r-s),i.match_length>i.lookahead&&(i.match_length=i.lookahead)}if(i.match_length>=Nt?(t=Eo._tr_tally(i,1,i.match_length-Nt),i.lookahead-=i.match_length,i.strstart+=i.match_length,i.match_length=0):(t=Eo._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++),t&&(ls(i,!1),i.strm.avail_out===0))return as}return i.insert=0,e===qh?(ls(i,!0),i.strm.avail_out===0?df:p0):i.last_lit&&(ls(i,!1),i.strm.avail_out===0)?as:dw}function e_e(i,e){for(var t;;){if(i.lookahead===0&&(ff(i),i.lookahead===0)){if(e===qf)return as;break}if(i.match_length=0,t=Eo._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++,t&&(ls(i,!1),i.strm.avail_out===0))return as}return i.insert=0,e===qh?(ls(i,!0),i.strm.avail_out===0?df:p0):i.last_lit&&(ls(i,!1),i.strm.avail_out===0)?as:dw}function za(i,e,t,n,s){this.good_length=i,this.max_lazy=e,this.nice_length=t,this.max_chain=n,this.func=s}var op;op=[new za(0,0,0,0,X0e),new za(4,4,8,4,Y2),new za(4,5,16,8,Y2),new za(4,6,32,32,Y2),new za(4,4,16,16,Eg),new za(8,16,32,32,Eg),new za(8,16,128,128,Eg),new za(8,32,128,256,Eg),new za(32,128,258,1024,Eg),new za(32,258,258,4096,Eg)];function t_e(i){i.window_size=2*i.w_size,Ah(i.head),i.max_lazy_match=op[i.level].max_lazy,i.good_match=op[i.level].good_length,i.nice_match=op[i.level].nice_length,i.max_chain_length=op[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=Nt-1,i.match_available=0,i.ins_h=0}function i_e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=EL,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new js.Buf16(G0e*2),this.dyn_dtree=new js.Buf16((2*j0e+1)*2),this.bl_tree=new js.Buf16((2*q0e+1)*2),Ah(this.dyn_ltree),Ah(this.dyn_dtree),Ah(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new js.Buf16(K0e+1),this.heap=new js.Buf16(2*VT+1),Ah(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new js.Buf16(2*VT+1),Ah(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function IG(i){var e;return!i||!i.state?Vh(i,wl):(i.total_in=i.total_out=0,i.data_type=V0e,e=i.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?IL:Sd,i.adler=e.wrap===2?0:1,e.last_flush=qf,Eo._tr_init(e),ol)}function TG(i){var e=IG(i);return e===ol&&t_e(i.state),e}function n_e(i,e){return!i||!i.state||i.state.wrap!==2?wl:(i.state.gzhead=e,ol)}function NG(i,e,t,n,s,r){if(!i)return wl;var o=1;if(e===R0e&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),s<1||s>W0e||t!==EL||n<8||n>15||e<0||e>9||r<0||r>F0e)return Vh(i,wl);n===8&&(n=9);var a=new i_e;return i.state=a,a.strm=i,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=s+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Nt-1)/Nt),a.window=new js.Buf8(a.w_size*2),a.head=new js.Buf16(a.hash_size),a.prev=new js.Buf16(a.w_size),a.lit_bufsize=1<<s+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new js.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=(1+2)*a.lit_bufsize,a.level=e,a.strategy=r,a.method=t,TG(i)}function s_e(i,e){return NG(i,e,EL,z0e,H0e,B0e)}function r_e(i,e){var t,n,s,r;if(!i||!i.state||e>Y6||e<0)return i?Vh(i,wl):wl;if(n=i.state,!i.output||!i.input&&i.avail_in!==0||n.status===L_&&e!==qh)return Vh(i,i.avail_out===0?Z2:wl);if(n.strm=i,t=n.last_flush,n.last_flush=e,n.status===IL)if(n.wrap===2)i.adler=0,jt(n,31),jt(n,139),jt(n,8),n.gzhead?(jt(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),jt(n,n.gzhead.time&255),jt(n,n.gzhead.time>>8&255),jt(n,n.gzhead.time>>16&255),jt(n,n.gzhead.time>>24&255),jt(n,n.level===9?2:n.strategy>=ny||n.level<2?4:0),jt(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(jt(n,n.gzhead.extra.length&255),jt(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(i.adler=fh(i.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=WT):(jt(n,0),jt(n,0),jt(n,0),jt(n,0),jt(n,0),jt(n,n.level===9?2:n.strategy>=ny||n.level<2?4:0),jt(n,Y0e),n.status=Sd);else{var o=EL+(n.w_bits-8<<4)<<8,a=-1;n.strategy>=ny||n.level<2?a=0:n.level<6?a=1:n.level===6?a=2:a=3,o|=a<<6,n.strstart!==0&&(o|=Z0e),o+=31-o%31,n.status=Sd,X0(n,o),n.strstart!==0&&(X0(n,i.adler>>>16),X0(n,i.adler&65535)),i.adler=1}if(n.status===WT)if(n.gzhead.extra){for(s=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(i.adler=fh(i.adler,n.pending_buf,n.pending-s,s)),gh(i),s=n.pending,n.pending===n.pending_buf_size));)jt(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>s&&(i.adler=fh(i.adler,n.pending_buf,n.pending-s,s)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=EC)}else n.status=EC;if(n.status===EC)if(n.gzhead.name){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(i.adler=fh(i.adler,n.pending_buf,n.pending-s,s)),gh(i),s=n.pending,n.pending===n.pending_buf_size)){r=1;break}n.gzindex<n.gzhead.name.length?r=n.gzhead.name.charCodeAt(n.gzindex++)&255:r=0,jt(n,r)}while(r!==0);n.gzhead.hcrc&&n.pending>s&&(i.adler=fh(i.adler,n.pending_buf,n.pending-s,s)),r===0&&(n.gzindex=0,n.status=IC)}else n.status=IC;if(n.status===IC)if(n.gzhead.comment){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(i.adler=fh(i.adler,n.pending_buf,n.pending-s,s)),gh(i),s=n.pending,n.pending===n.pending_buf_size)){r=1;break}n.gzindex<n.gzhead.comment.length?r=n.gzhead.comment.charCodeAt(n.gzindex++)&255:r=0,jt(n,r)}while(r!==0);n.gzhead.hcrc&&n.pending>s&&(i.adler=fh(i.adler,n.pending_buf,n.pending-s,s)),r===0&&(n.status=TC)}else n.status=TC;if(n.status===TC&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&gh(i),n.pending+2<=n.pending_buf_size&&(jt(n,i.adler&255),jt(n,i.adler>>8&255),i.adler=0,n.status=Sd)):n.status=Sd),n.pending!==0){if(gh(i),i.avail_out===0)return n.last_flush=-1,ol}else if(i.avail_in===0&&X6(e)<=X6(t)&&e!==qh)return Vh(i,Z2);if(n.status===L_&&i.avail_in!==0)return Vh(i,Z2);if(i.avail_in!==0||n.lookahead!==0||e!==qf&&n.status!==L_){var l=n.strategy===ny?e_e(n,e):n.strategy===P0e?J0e(n,e):op[n.level].func(n,e);if((l===df||l===p0)&&(n.status=L_),l===as||l===df)return i.avail_out===0&&(n.last_flush=-1),ol;if(l===dw&&(e===T0e?Eo._tr_align(n):e!==Y6&&(Eo._tr_stored_block(n,0,0,!1),e===N0e&&(Ah(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),gh(i),i.avail_out===0))return n.last_flush=-1,ol}return e!==qh?ol:n.wrap<=0?Q6:(n.wrap===2?(jt(n,i.adler&255),jt(n,i.adler>>8&255),jt(n,i.adler>>16&255),jt(n,i.adler>>24&255),jt(n,i.total_in&255),jt(n,i.total_in>>8&255),jt(n,i.total_in>>16&255),jt(n,i.total_in>>24&255)):(X0(n,i.adler>>>16),X0(n,i.adler&65535)),gh(i),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?ol:Q6)}function o_e(i){var e;return!i||!i.state?wl:(e=i.state.status,e!==IL&&e!==WT&&e!==EC&&e!==IC&&e!==TC&&e!==Sd&&e!==L_?Vh(i,wl):(i.state=null,e===Sd?Vh(i,M0e):ol))}function a_e(i,e){var t=e.length,n,s,r,o,a,l,c,h;if(!i||!i.state||(n=i.state,o=n.wrap,o===2||o===1&&n.status!==IL||n.lookahead))return wl;for(o===1&&(i.adler=AG(i.adler,e,t,0)),n.wrap=0,t>=n.w_size&&(o===0&&(Ah(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new js.Buf8(n.w_size),js.arraySet(h,e,t-n.w_size,n.w_size,0),e=h,t=n.w_size),a=i.avail_in,l=i.next_in,c=i.input,i.avail_in=t,i.next_in=0,i.input=e,ff(n);n.lookahead>=Nt;){s=n.strstart,r=n.lookahead-(Nt-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[s+Nt-1])&n.hash_mask,n.prev[s&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=s,s++;while(--r);n.strstart=s,n.lookahead=Nt-1,ff(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Nt-1,n.match_available=0,i.next_in=l,i.input=c,i.avail_in=a,n.wrap=o,ol}Vl.deflateInit=s_e;Vl.deflateInit2=NG;Vl.deflateReset=TG;Vl.deflateResetKeep=IG;Vl.deflateSetHeader=n_e;Vl.deflate=r_e;Vl.deflateEnd=o_e;Vl.deflateSetDictionary=a_e;Vl.deflateInfo="pako deflate (from Nodeca project)";var Gf={},TL=Xc,MG=!0,RG=!0;try{String.fromCharCode.apply(null,[0])}catch{MG=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{RG=!1}var vv=new TL.Buf8(256);for(var oh=0;oh<256;oh++)vv[oh]=oh>=252?6:oh>=248?5:oh>=240?4:oh>=224?3:oh>=192?2:1;vv[254]=vv[254]=1;Gf.string2buf=function(i){var e,t,n,s,r,o=i.length,a=0;for(s=0;s<o;s++)t=i.charCodeAt(s),(t&64512)===55296&&s+1<o&&(n=i.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new TL.Buf8(a),r=0,s=0;r<a;s++)t=i.charCodeAt(s),(t&64512)===55296&&s+1<o&&(n=i.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),t<128?e[r++]=t:t<2048?(e[r++]=192|t>>>6,e[r++]=128|t&63):t<65536?(e[r++]=224|t>>>12,e[r++]=128|t>>>6&63,e[r++]=128|t&63):(e[r++]=240|t>>>18,e[r++]=128|t>>>12&63,e[r++]=128|t>>>6&63,e[r++]=128|t&63);return e};function OG(i,e){if(e<65534&&(i.subarray&&RG||!i.subarray&&MG))return String.fromCharCode.apply(null,TL.shrinkBuf(i,e));for(var t="",n=0;n<e;n++)t+=String.fromCharCode(i[n]);return t}Gf.buf2binstring=function(i){return OG(i,i.length)};Gf.binstring2buf=function(i){for(var e=new TL.Buf8(i.length),t=0,n=e.length;t<n;t++)e[t]=i.charCodeAt(t);return e};Gf.buf2string=function(i,e){var t,n,s,r,o=e||i.length,a=new Array(o*2);for(n=0,t=0;t<o;){if(s=i[t++],s<128){a[n++]=s;continue}if(r=vv[s],r>4){a[n++]=65533,t+=r-1;continue}for(s&=r===2?31:r===3?15:7;r>1&&t<o;)s=s<<6|i[t++]&63,r--;if(r>1){a[n++]=65533;continue}s<65536?a[n++]=s:(s-=65536,a[n++]=55296|s>>10&1023,a[n++]=56320|s&1023)}return OG(a,n)};Gf.utf8border=function(i,e){var t;for(e=e||i.length,e>i.length&&(e=i.length),t=e-1;t>=0&&(i[t]&192)===128;)t--;return t<0||t===0?e:t+vv[i[t]]>e?t:e};function l_e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var PG=l_e,ib=Vl,nb=Xc,zT=Gf,HT=bO,c_e=PG,FG=Object.prototype.toString,h_e=0,Q2=4,Ep=0,J6=1,e8=2,u_e=-1,d_e=0,f_e=8;function gf(i){if(!(this instanceof gf))return new gf(i);this.options=nb.assign({level:u_e,method:f_e,chunkSize:16384,windowBits:15,memLevel:8,strategy:d_e,to:""},i||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c_e,this.strm.avail_out=0;var t=ib.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==Ep)throw new Error(HT[t]);if(e.header&&ib.deflateSetHeader(this.strm,e.header),e.dictionary){var n;if(typeof e.dictionary=="string"?n=zT.string2buf(e.dictionary):FG.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,t=ib.deflateSetDictionary(this.strm,n),t!==Ep)throw new Error(HT[t]);this._dict_set=!0}}gf.prototype.push=function(i,e){var t=this.strm,n=this.options.chunkSize,s,r;if(this.ended)return!1;r=e===~~e?e:e===!0?Q2:h_e,typeof i=="string"?t.input=zT.string2buf(i):FG.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new nb.Buf8(n),t.next_out=0,t.avail_out=n),s=ib.deflate(t,r),s!==J6&&s!==Ep)return this.onEnd(s),this.ended=!0,!1;(t.avail_out===0||t.avail_in===0&&(r===Q2||r===e8))&&(this.options.to==="string"?this.onData(zT.buf2binstring(nb.shrinkBuf(t.output,t.next_out))):this.onData(nb.shrinkBuf(t.output,t.next_out)))}while((t.avail_in>0||t.avail_out===0)&&s!==J6);return r===Q2?(s=ib.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===Ep):(r===e8&&(this.onEnd(Ep),t.avail_out=0),!0)};gf.prototype.onData=function(i){this.chunks.push(i)};gf.prototype.onEnd=function(i){i===Ep&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=nb.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function vO(i,e){var t=new gf(e);if(t.push(i,!0),t.err)throw t.msg||HT[t.err];return t.result}function g_e(i,e){return e=e||{},e.raw=!0,vO(i,e)}function p_e(i,e){return e=e||{},e.gzip=!0,vO(i,e)}hw.Deflate=gf;hw.deflate=vO;hw.deflateRaw=g_e;hw.gzip=p_e;var fw={},Ea={},sy=30,m_e=12,__e=function(i,e){var t,n,s,r,o,a,l,c,h,u,d,f,g,p,m,v,b,w,y,x,k,S,L,D,N;t=i.state,n=i.next_in,D=i.input,s=n+(i.avail_in-5),r=i.next_out,N=i.output,o=r-(e-i.avail_out),a=r+(i.avail_out-257),l=t.dmax,c=t.wsize,h=t.whave,u=t.wnext,d=t.window,f=t.hold,g=t.bits,p=t.lencode,m=t.distcode,v=(1<<t.lenbits)-1,b=(1<<t.distbits)-1;e:do{g<15&&(f+=D[n++]<<g,g+=8,f+=D[n++]<<g,g+=8),w=p[f&v];t:for(;;){if(y=w>>>24,f>>>=y,g-=y,y=w>>>16&255,y===0)N[r++]=w&65535;else if(y&16){x=w&65535,y&=15,y&&(g<y&&(f+=D[n++]<<g,g+=8),x+=f&(1<<y)-1,f>>>=y,g-=y),g<15&&(f+=D[n++]<<g,g+=8,f+=D[n++]<<g,g+=8),w=m[f&b];i:for(;;){if(y=w>>>24,f>>>=y,g-=y,y=w>>>16&255,y&16){if(k=w&65535,y&=15,g<y&&(f+=D[n++]<<g,g+=8,g<y&&(f+=D[n++]<<g,g+=8)),k+=f&(1<<y)-1,k>l){i.msg="invalid distance too far back",t.mode=sy;break e}if(f>>>=y,g-=y,y=r-o,k>y){if(y=k-y,y>h&&t.sane){i.msg="invalid distance too far back",t.mode=sy;break e}if(S=0,L=d,u===0){if(S+=c-y,y<x){x-=y;do N[r++]=d[S++];while(--y);S=r-k,L=N}}else if(u<y){if(S+=c+u-y,y-=u,y<x){x-=y;do N[r++]=d[S++];while(--y);if(S=0,u<x){y=u,x-=y;do N[r++]=d[S++];while(--y);S=r-k,L=N}}}else if(S+=u-y,y<x){x-=y;do N[r++]=d[S++];while(--y);S=r-k,L=N}for(;x>2;)N[r++]=L[S++],N[r++]=L[S++],N[r++]=L[S++],x-=3;x&&(N[r++]=L[S++],x>1&&(N[r++]=L[S++]))}else{S=r-k;do N[r++]=N[S++],N[r++]=N[S++],N[r++]=N[S++],x-=3;while(x>2);x&&(N[r++]=N[S++],x>1&&(N[r++]=N[S++]))}}else if(y&64){i.msg="invalid distance code",t.mode=sy;break e}else{w=m[(w&65535)+(f&(1<<y)-1)];continue i}break}}else if(y&64)if(y&32){t.mode=m_e;break e}else{i.msg="invalid literal/length code",t.mode=sy;break e}else{w=p[(w&65535)+(f&(1<<y)-1)];continue t}break}}while(n<s&&r<a);x=g>>3,n-=x,g-=x<<3,f&=(1<<g)-1,i.next_in=n,i.next_out=r,i.avail_in=n<s?5+(s-n):5-(n-s),i.avail_out=r<a?257+(a-r):257-(r-a),t.hold=f,t.bits=g},t8=Xc,Ig=15,i8=852,n8=592,s8=0,X2=1,r8=2,b_e=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],v_e=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],w_e=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y_e=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],C_e=function(i,e,t,n,s,r,o,a){var l=a.bits,c=0,h=0,u=0,d=0,f=0,g=0,p=0,m=0,v=0,b=0,w,y,x,k,S,L=null,D=0,N,T=new t8.Buf16(Ig+1),$=new t8.Buf16(Ig+1),U=null,ee=0,ce,fe,Ce;for(c=0;c<=Ig;c++)T[c]=0;for(h=0;h<n;h++)T[e[t+h]]++;for(f=l,d=Ig;d>=1&&T[d]===0;d--);if(f>d&&(f=d),d===0)return s[r++]=1<<24|64<<16|0,s[r++]=1<<24|64<<16|0,a.bits=1,0;for(u=1;u<d&&T[u]===0;u++);for(f<u&&(f=u),m=1,c=1;c<=Ig;c++)if(m<<=1,m-=T[c],m<0)return-1;if(m>0&&(i===s8||d!==1))return-1;for($[1]=0,c=1;c<Ig;c++)$[c+1]=$[c]+T[c];for(h=0;h<n;h++)e[t+h]!==0&&(o[$[e[t+h]]++]=h);if(i===s8?(L=U=o,N=19):i===X2?(L=b_e,D-=257,U=v_e,ee-=257,N=256):(L=w_e,U=y_e,N=-1),b=0,h=0,c=u,S=r,g=f,p=0,x=-1,v=1<<f,k=v-1,i===X2&&v>i8||i===r8&&v>n8)return 1;for(;;){ce=c-p,o[h]<N?(fe=0,Ce=o[h]):o[h]>N?(fe=U[ee+o[h]],Ce=L[D+o[h]]):(fe=32+64,Ce=0),w=1<<c-p,y=1<<g,u=y;do y-=w,s[S+(b>>p)+y]=ce<<24|fe<<16|Ce|0;while(y!==0);for(w=1<<c-1;b&w;)w>>=1;if(w!==0?(b&=w-1,b+=w):b=0,h++,--T[c]===0){if(c===d)break;c=e[t+o[h]]}if(c>f&&(b&k)!==x){for(p===0&&(p=f),S+=u,g=c-p,m=1<<g;g+p<d&&(m-=T[g+p],!(m<=0));)g++,m<<=1;if(v+=1<<g,i===X2&&v>i8||i===r8&&v>n8)return 1;x=b&k,s[x]=f<<24|g<<16|S-r|0}}return b!==0&&(s[S+b]=c-p<<24|64<<16|0),a.bits=f,0},Wr=Xc,UT=LG,Ha=kG,S_e=__e,sb=C_e,x_e=0,BG=1,VG=2,o8=4,D_e=5,ry=6,pf=0,L_e=1,k_e=2,Uc=-2,WG=-3,zG=-4,A_e=-5,a8=8,HG=1,l8=2,c8=3,h8=4,u8=5,d8=6,f8=7,g8=8,p8=9,m8=10,ZS=11,Yl=12,J2=13,_8=14,eA=15,b8=16,v8=17,w8=18,y8=19,oy=20,ay=21,C8=22,S8=23,x8=24,D8=25,L8=26,tA=27,k8=28,A8=29,Hi=30,UG=31,E_e=32,I_e=852,T_e=592,N_e=15,M_e=N_e;function E8(i){return(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24)}function R_e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Wr.Buf16(320),this.work=new Wr.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function $G(i){var e;return!i||!i.state?Uc:(e=i.state,i.total_in=i.total_out=e.total=0,i.msg="",e.wrap&&(i.adler=e.wrap&1),e.mode=HG,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Wr.Buf32(I_e),e.distcode=e.distdyn=new Wr.Buf32(T_e),e.sane=1,e.back=-1,pf)}function jG(i){var e;return!i||!i.state?Uc:(e=i.state,e.wsize=0,e.whave=0,e.wnext=0,$G(i))}function qG(i,e){var t,n;return!i||!i.state||(n=i.state,e<0?(t=0,e=-e):(t=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?Uc:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,jG(i))}function GG(i,e){var t,n;return i?(n=new R_e,i.state=n,n.window=null,t=qG(i,e),t!==pf&&(i.state=null),t):Uc}function O_e(i){return GG(i,M_e)}var I8=!0,iA,nA;function P_e(i){if(I8){var e;for(iA=new Wr.Buf32(512),nA=new Wr.Buf32(32),e=0;e<144;)i.lens[e++]=8;for(;e<256;)i.lens[e++]=9;for(;e<280;)i.lens[e++]=7;for(;e<288;)i.lens[e++]=8;for(sb(BG,i.lens,0,288,iA,0,i.work,{bits:9}),e=0;e<32;)i.lens[e++]=5;sb(VG,i.lens,0,32,nA,0,i.work,{bits:5}),I8=!1}i.lencode=iA,i.lenbits=9,i.distcode=nA,i.distbits=5}function KG(i,e,t,n){var s,r=i.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Wr.Buf8(r.wsize)),n>=r.wsize?(Wr.arraySet(r.window,e,t-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(s=r.wsize-r.wnext,s>n&&(s=n),Wr.arraySet(r.window,e,t-n,s,r.wnext),n-=s,n?(Wr.arraySet(r.window,e,t-n,n,0),r.wnext=n,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0}function F_e(i,e){var t,n,s,r,o,a,l,c,h,u,d,f,g,p,m=0,v,b,w,y,x,k,S,L,D=new Wr.Buf8(4),N,T,$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!i||!i.state||!i.output||!i.input&&i.avail_in!==0)return Uc;t=i.state,t.mode===Yl&&(t.mode=J2),o=i.next_out,s=i.output,l=i.avail_out,r=i.next_in,n=i.input,a=i.avail_in,c=t.hold,h=t.bits,u=a,d=l,L=pf;e:for(;;)switch(t.mode){case HG:if(t.wrap===0){t.mode=J2;break}for(;h<16;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(t.wrap&2&&c===35615){t.check=0,D[0]=c&255,D[1]=c>>>8&255,t.check=Ha(t.check,D,2,0),c=0,h=0,t.mode=l8;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((c&255)<<8)+(c>>8))%31){i.msg="incorrect header check",t.mode=Hi;break}if((c&15)!==a8){i.msg="unknown compression method",t.mode=Hi;break}if(c>>>=4,h-=4,S=(c&15)+8,t.wbits===0)t.wbits=S;else if(S>t.wbits){i.msg="invalid window size",t.mode=Hi;break}t.dmax=1<<S,i.adler=t.check=1,t.mode=c&512?m8:Yl,c=0,h=0;break;case l8:for(;h<16;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(t.flags=c,(t.flags&255)!==a8){i.msg="unknown compression method",t.mode=Hi;break}if(t.flags&57344){i.msg="unknown header flags set",t.mode=Hi;break}t.head&&(t.head.text=c>>8&1),t.flags&512&&(D[0]=c&255,D[1]=c>>>8&255,t.check=Ha(t.check,D,2,0)),c=0,h=0,t.mode=c8;case c8:for(;h<32;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.head&&(t.head.time=c),t.flags&512&&(D[0]=c&255,D[1]=c>>>8&255,D[2]=c>>>16&255,D[3]=c>>>24&255,t.check=Ha(t.check,D,4,0)),c=0,h=0,t.mode=h8;case h8:for(;h<16;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.head&&(t.head.xflags=c&255,t.head.os=c>>8),t.flags&512&&(D[0]=c&255,D[1]=c>>>8&255,t.check=Ha(t.check,D,2,0)),c=0,h=0,t.mode=u8;case u8:if(t.flags&1024){for(;h<16;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.length=c,t.head&&(t.head.extra_len=c),t.flags&512&&(D[0]=c&255,D[1]=c>>>8&255,t.check=Ha(t.check,D,2,0)),c=0,h=0}else t.head&&(t.head.extra=null);t.mode=d8;case d8:if(t.flags&1024&&(f=t.length,f>a&&(f=a),f&&(t.head&&(S=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),Wr.arraySet(t.head.extra,n,r,f,S)),t.flags&512&&(t.check=Ha(t.check,n,f,r)),a-=f,r+=f,t.length-=f),t.length))break e;t.length=0,t.mode=f8;case f8:if(t.flags&2048){if(a===0)break e;f=0;do S=n[r+f++],t.head&&S&&t.length<65536&&(t.head.name+=String.fromCharCode(S));while(S&&f<a);if(t.flags&512&&(t.check=Ha(t.check,n,f,r)),a-=f,r+=f,S)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=g8;case g8:if(t.flags&4096){if(a===0)break e;f=0;do S=n[r+f++],t.head&&S&&t.length<65536&&(t.head.comment+=String.fromCharCode(S));while(S&&f<a);if(t.flags&512&&(t.check=Ha(t.check,n,f,r)),a-=f,r+=f,S)break e}else t.head&&(t.head.comment=null);t.mode=p8;case p8:if(t.flags&512){for(;h<16;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(c!==(t.check&65535)){i.msg="header crc mismatch",t.mode=Hi;break}c=0,h=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),i.adler=t.check=0,t.mode=Yl;break;case m8:for(;h<32;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}i.adler=t.check=E8(c),c=0,h=0,t.mode=ZS;case ZS:if(t.havedict===0)return i.next_out=o,i.avail_out=l,i.next_in=r,i.avail_in=a,t.hold=c,t.bits=h,k_e;i.adler=t.check=1,t.mode=Yl;case Yl:if(e===D_e||e===ry)break e;case J2:if(t.last){c>>>=h&7,h-=h&7,t.mode=tA;break}for(;h<3;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}switch(t.last=c&1,c>>>=1,h-=1,c&3){case 0:t.mode=_8;break;case 1:if(P_e(t),t.mode=oy,e===ry){c>>>=2,h-=2;break e}break;case 2:t.mode=v8;break;case 3:i.msg="invalid block type",t.mode=Hi}c>>>=2,h-=2;break;case _8:for(c>>>=h&7,h-=h&7;h<32;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if((c&65535)!==(c>>>16^65535)){i.msg="invalid stored block lengths",t.mode=Hi;break}if(t.length=c&65535,c=0,h=0,t.mode=eA,e===ry)break e;case eA:t.mode=b8;case b8:if(f=t.length,f){if(f>a&&(f=a),f>l&&(f=l),f===0)break e;Wr.arraySet(s,n,r,f,o),a-=f,r+=f,l-=f,o+=f,t.length-=f;break}t.mode=Yl;break;case v8:for(;h<14;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(t.nlen=(c&31)+257,c>>>=5,h-=5,t.ndist=(c&31)+1,c>>>=5,h-=5,t.ncode=(c&15)+4,c>>>=4,h-=4,t.nlen>286||t.ndist>30){i.msg="too many length or distance symbols",t.mode=Hi;break}t.have=0,t.mode=w8;case w8:for(;t.have<t.ncode;){for(;h<3;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.lens[$[t.have++]]=c&7,c>>>=3,h-=3}for(;t.have<19;)t.lens[$[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,N={bits:t.lenbits},L=sb(x_e,t.lens,0,19,t.lencode,0,t.work,N),t.lenbits=N.bits,L){i.msg="invalid code lengths set",t.mode=Hi;break}t.have=0,t.mode=y8;case y8:for(;t.have<t.nlen+t.ndist;){for(;m=t.lencode[c&(1<<t.lenbits)-1],v=m>>>24,b=m>>>16&255,w=m&65535,!(v<=h);){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(w<16)c>>>=v,h-=v,t.lens[t.have++]=w;else{if(w===16){for(T=v+2;h<T;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(c>>>=v,h-=v,t.have===0){i.msg="invalid bit length repeat",t.mode=Hi;break}S=t.lens[t.have-1],f=3+(c&3),c>>>=2,h-=2}else if(w===17){for(T=v+3;h<T;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}c>>>=v,h-=v,S=0,f=3+(c&7),c>>>=3,h-=3}else{for(T=v+7;h<T;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}c>>>=v,h-=v,S=0,f=11+(c&127),c>>>=7,h-=7}if(t.have+f>t.nlen+t.ndist){i.msg="invalid bit length repeat",t.mode=Hi;break}for(;f--;)t.lens[t.have++]=S}}if(t.mode===Hi)break;if(t.lens[256]===0){i.msg="invalid code -- missing end-of-block",t.mode=Hi;break}if(t.lenbits=9,N={bits:t.lenbits},L=sb(BG,t.lens,0,t.nlen,t.lencode,0,t.work,N),t.lenbits=N.bits,L){i.msg="invalid literal/lengths set",t.mode=Hi;break}if(t.distbits=6,t.distcode=t.distdyn,N={bits:t.distbits},L=sb(VG,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,N),t.distbits=N.bits,L){i.msg="invalid distances set",t.mode=Hi;break}if(t.mode=oy,e===ry)break e;case oy:t.mode=ay;case ay:if(a>=6&&l>=258){i.next_out=o,i.avail_out=l,i.next_in=r,i.avail_in=a,t.hold=c,t.bits=h,S_e(i,d),o=i.next_out,s=i.output,l=i.avail_out,r=i.next_in,n=i.input,a=i.avail_in,c=t.hold,h=t.bits,t.mode===Yl&&(t.back=-1);break}for(t.back=0;m=t.lencode[c&(1<<t.lenbits)-1],v=m>>>24,b=m>>>16&255,w=m&65535,!(v<=h);){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(b&&!(b&240)){for(y=v,x=b,k=w;m=t.lencode[k+((c&(1<<y+x)-1)>>y)],v=m>>>24,b=m>>>16&255,w=m&65535,!(y+v<=h);){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}c>>>=y,h-=y,t.back+=y}if(c>>>=v,h-=v,t.back+=v,t.length=w,b===0){t.mode=L8;break}if(b&32){t.back=-1,t.mode=Yl;break}if(b&64){i.msg="invalid literal/length code",t.mode=Hi;break}t.extra=b&15,t.mode=C8;case C8:if(t.extra){for(T=t.extra;h<T;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.length+=c&(1<<t.extra)-1,c>>>=t.extra,h-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=S8;case S8:for(;m=t.distcode[c&(1<<t.distbits)-1],v=m>>>24,b=m>>>16&255,w=m&65535,!(v<=h);){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(!(b&240)){for(y=v,x=b,k=w;m=t.distcode[k+((c&(1<<y+x)-1)>>y)],v=m>>>24,b=m>>>16&255,w=m&65535,!(y+v<=h);){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}c>>>=y,h-=y,t.back+=y}if(c>>>=v,h-=v,t.back+=v,b&64){i.msg="invalid distance code",t.mode=Hi;break}t.offset=w,t.extra=b&15,t.mode=x8;case x8:if(t.extra){for(T=t.extra;h<T;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.offset+=c&(1<<t.extra)-1,c>>>=t.extra,h-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){i.msg="invalid distance too far back",t.mode=Hi;break}t.mode=D8;case D8:if(l===0)break e;if(f=d-l,t.offset>f){if(f=t.offset-f,f>t.whave&&t.sane){i.msg="invalid distance too far back",t.mode=Hi;break}f>t.wnext?(f-=t.wnext,g=t.wsize-f):g=t.wnext-f,f>t.length&&(f=t.length),p=t.window}else p=s,g=o-t.offset,f=t.length;f>l&&(f=l),l-=f,t.length-=f;do s[o++]=p[g++];while(--f);t.length===0&&(t.mode=ay);break;case L8:if(l===0)break e;s[o++]=t.length,l--,t.mode=ay;break;case tA:if(t.wrap){for(;h<32;){if(a===0)break e;a--,c|=n[r++]<<h,h+=8}if(d-=l,i.total_out+=d,t.total+=d,d&&(i.adler=t.check=t.flags?Ha(t.check,s,d,o-d):UT(t.check,s,d,o-d)),d=l,(t.flags?c:E8(c))!==t.check){i.msg="incorrect data check",t.mode=Hi;break}c=0,h=0}t.mode=k8;case k8:if(t.wrap&&t.flags){for(;h<32;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(c!==(t.total&4294967295)){i.msg="incorrect length check",t.mode=Hi;break}c=0,h=0}t.mode=A8;case A8:L=L_e;break e;case Hi:L=WG;break e;case UG:return zG;case E_e:default:return Uc}return i.next_out=o,i.avail_out=l,i.next_in=r,i.avail_in=a,t.hold=c,t.bits=h,(t.wsize||d!==i.avail_out&&t.mode<Hi&&(t.mode<tA||e!==o8))&&KG(i,i.output,i.next_out,d-i.avail_out),u-=i.avail_in,d-=i.avail_out,i.total_in+=u,i.total_out+=d,t.total+=d,t.wrap&&d&&(i.adler=t.check=t.flags?Ha(t.check,s,d,i.next_out-d):UT(t.check,s,d,i.next_out-d)),i.data_type=t.bits+(t.last?64:0)+(t.mode===Yl?128:0)+(t.mode===oy||t.mode===eA?256:0),(u===0&&d===0||e===o8)&&L===pf&&(L=A_e),L}function B_e(i){if(!i||!i.state)return Uc;var e=i.state;return e.window&&(e.window=null),i.state=null,pf}function V_e(i,e){var t;return!i||!i.state||(t=i.state,!(t.wrap&2))?Uc:(t.head=e,e.done=!1,pf)}function W_e(i,e){var t=e.length,n,s,r;return!i||!i.state||(n=i.state,n.wrap!==0&&n.mode!==ZS)?Uc:n.mode===ZS&&(s=1,s=UT(s,e,t,0),s!==n.check)?WG:(r=KG(i,e,t,t),r?(n.mode=UG,zG):(n.havedict=1,pf))}Ea.inflateReset=jG;Ea.inflateReset2=qG;Ea.inflateResetKeep=$G;Ea.inflateInit=O_e;Ea.inflateInit2=GG;Ea.inflate=F_e;Ea.inflateEnd=B_e;Ea.inflateGetHeader=V_e;Ea.inflateSetDictionary=W_e;Ea.inflateInfo="pako inflate (from Nodeca project)";var ZG={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function z_e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var H_e=z_e,Ip=Ea,rb=Xc,NC=Gf,gn=ZG,$T=bO,U_e=PG,$_e=H_e,YG=Object.prototype.toString;function mf(i){if(!(this instanceof mf))return new mf(i);this.options=rb.assign({chunkSize:16384,windowBits:0,to:""},i||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(i&&i.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new U_e,this.strm.avail_out=0;var t=Ip.inflateInit2(this.strm,e.windowBits);if(t!==gn.Z_OK)throw new Error($T[t]);if(this.header=new $_e,Ip.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=NC.string2buf(e.dictionary):YG.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Ip.inflateSetDictionary(this.strm,e.dictionary),t!==gn.Z_OK)))throw new Error($T[t])}mf.prototype.push=function(i,e){var t=this.strm,n=this.options.chunkSize,s=this.options.dictionary,r,o,a,l,c,h=!1;if(this.ended)return!1;o=e===~~e?e:e===!0?gn.Z_FINISH:gn.Z_NO_FLUSH,typeof i=="string"?t.input=NC.binstring2buf(i):YG.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new rb.Buf8(n),t.next_out=0,t.avail_out=n),r=Ip.inflate(t,gn.Z_NO_FLUSH),r===gn.Z_NEED_DICT&&s&&(r=Ip.inflateSetDictionary(this.strm,s)),r===gn.Z_BUF_ERROR&&h===!0&&(r=gn.Z_OK,h=!1),r!==gn.Z_STREAM_END&&r!==gn.Z_OK)return this.onEnd(r),this.ended=!0,!1;t.next_out&&(t.avail_out===0||r===gn.Z_STREAM_END||t.avail_in===0&&(o===gn.Z_FINISH||o===gn.Z_SYNC_FLUSH))&&(this.options.to==="string"?(a=NC.utf8border(t.output,t.next_out),l=t.next_out-a,c=NC.buf2string(t.output,a),t.next_out=l,t.avail_out=n-l,l&&rb.arraySet(t.output,t.output,a,l,0),this.onData(c)):this.onData(rb.shrinkBuf(t.output,t.next_out))),t.avail_in===0&&t.avail_out===0&&(h=!0)}while((t.avail_in>0||t.avail_out===0)&&r!==gn.Z_STREAM_END);return r===gn.Z_STREAM_END&&(o=gn.Z_FINISH),o===gn.Z_FINISH?(r=Ip.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===gn.Z_OK):(o===gn.Z_SYNC_FLUSH&&(this.onEnd(gn.Z_OK),t.avail_out=0),!0)};mf.prototype.onData=function(i){this.chunks.push(i)};mf.prototype.onEnd=function(i){i===gn.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=rb.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function wO(i,e){var t=new mf(e);if(t.push(i,!0),t.err)throw t.msg||$T[t.err];return t.result}function j_e(i,e){return e=e||{},e.raw=!0,wO(i,e)}fw.Inflate=mf;fw.inflate=wO;fw.inflateRaw=j_e;fw.ungzip=wO;var q_e=Xc.assign,G_e=hw,K_e=fw,Z_e=ZG,QG={};q_e(QG,G_e,K_e,Z_e);var YS=QG;async function jT(i){try{let e,t=0,n=0;const s=[];let r=0,o;do{const l=i.subarray(t);if(o=new YS.Inflate,{strm:e}=o,o.push(l,YS.Z_SYNC_FLUSH),o.err)throw new Error(o.msg);t+=e.next_in,s[n]=o.result,r+=s[n].length,n+=1}while(e.avail_in);const a=new Uint8Array(r);for(let l=0,c=0;l<s.length;l++)a.set(s[l],c),c+=s[l].length;return Buffer.from(a)}catch(e){throw`${e}`.match(/incorrect header check/)?new Error("problem decompressing block: incorrect gzip header check"):e}}async function Y_e(i,e){try{let t;const{minv:n,maxv:s}=e;let r=n.blockPosition,o=n.dataPosition;const a=[],l=[],c=[];let h=0,u=0;do{const f=i.subarray(r-n.blockPosition),g=new YS.Inflate;if({strm:t}=g,g.push(f,YS.Z_SYNC_FLUSH),g.err)throw new Error(g.msg);const p=g.result;a.push(p);let m=p.length;l.push(r),c.push(o),a.length===1&&n.dataPosition&&(a[0]=a[0].subarray(n.dataPosition),m=a[0].length);const v=r;if(r+=t.next_in,o+=m,v>=s.blockPosition){a[u]=a[u].subarray(0,s.blockPosition===n.blockPosition?s.dataPosition-n.dataPosition+1:s.dataPosition+1),l.push(r),c.push(o),h+=a[u].length;break}h+=a[u].length,u++}while(t.avail_in);const d=new Uint8Array(h);for(let f=0,g=0;f<a.length;f++)d.set(a[f],g),g+=a[f].length;return{buffer:Buffer.from(d),cpositions:l,dpositions:c}}catch(t){throw`${t}`.match(/incorrect header check/)?new Error("problem decompressing block: incorrect gzip header check"):t}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var Co=null;try{Co=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Oi(i,e,t){this.low=i|0,this.high=e|0,this.unsigned=!!t}Oi.prototype.__isLong__;Object.defineProperty(Oi.prototype,"__isLong__",{value:!0});function Ts(i){return(i&&i.__isLong__)===!0}function T8(i){var e=Math.clz32(i&-i);return i?31-e:e}Oi.isLong=Ts;var N8={},M8={};function Kf(i,e){var t,n,s;return e?(i>>>=0,(s=0<=i&&i<256)&&(n=M8[i],n)?n:(t=Zt(i,0,!0),s&&(M8[i]=t),t)):(i|=0,(s=-128<=i&&i<128)&&(n=N8[i],n)?n:(t=Zt(i,i<0?-1:0,!1),s&&(N8[i]=t),t))}Oi.fromInt=Kf;function So(i,e){if(isNaN(i))return e?Ec:na;if(e){if(i<0)return Ec;if(i>=XG)return tK}else{if(i<=-O8)return pr;if(i+1>=O8)return eK}return i<0?So(-i,e).neg():Zt(i%pm|0,i/pm|0,e)}Oi.fromNumber=So;function Zt(i,e,t){return new Oi(i,e,t)}Oi.fromBits=Zt;var QS=Math.pow;function yO(i,e,t){if(i.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,i==="NaN"||i==="Infinity"||i==="+Infinity"||i==="-Infinity")return e?Ec:na;if(t=t||10,t<2||36<t)throw RangeError("radix");var n;if((n=i.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return yO(i.substring(1),e,t).neg();for(var s=So(QS(t,8)),r=na,o=0;o<i.length;o+=8){var a=Math.min(8,i.length-o),l=parseInt(i.substring(o,o+a),t);if(a<8){var c=So(QS(t,a));r=r.mul(c).add(So(l))}else r=r.mul(s),r=r.add(So(l))}return r.unsigned=e,r}Oi.fromString=yO;function Ia(i,e){return typeof i=="number"?So(i,e):typeof i=="string"?yO(i,e):Zt(i.low,i.high,typeof e=="boolean"?e:i.unsigned)}Oi.fromValue=Ia;var R8=1<<16,Q_e=1<<24,pm=R8*R8,XG=pm*pm,O8=XG/2,P8=Kf(Q_e),na=Kf(0);Oi.ZERO=na;var Ec=Kf(0,!0);Oi.UZERO=Ec;var ap=Kf(1);Oi.ONE=ap;var JG=Kf(1,!0);Oi.UONE=JG;var qT=Kf(-1);Oi.NEG_ONE=qT;var eK=Zt(-1,2147483647,!1);Oi.MAX_VALUE=eK;var tK=Zt(-1,-1,!0);Oi.MAX_UNSIGNED_VALUE=tK;var pr=Zt(0,-2147483648,!1);Oi.MIN_VALUE=pr;var ve=Oi.prototype;ve.toInt=function(){return this.unsigned?this.low>>>0:this.low};ve.toNumber=function(){return this.unsigned?(this.high>>>0)*pm+(this.low>>>0):this.high*pm+(this.low>>>0)};ve.toString=function(i){if(i=i||10,i<2||36<i)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(pr)){var e=So(i),t=this.div(e),n=t.mul(e).sub(this);return t.toString(i)+n.toInt().toString(i)}else return"-"+this.neg().toString(i);for(var s=So(QS(i,6),this.unsigned),r=this,o="";;){var a=r.div(s),l=r.sub(a.mul(s)).toInt()>>>0,c=l.toString(i);if(r=a,r.isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}};ve.getHighBits=function(){return this.high};ve.getHighBitsUnsigned=function(){return this.high>>>0};ve.getLowBits=function(){return this.low};ve.getLowBitsUnsigned=function(){return this.low>>>0};ve.getNumBitsAbs=function(){if(this.isNegative())return this.eq(pr)?64:this.neg().getNumBitsAbs();for(var i=this.high!=0?this.high:this.low,e=31;e>0&&!(i&1<<e);e--);return this.high!=0?e+33:e+1};ve.isZero=function(){return this.high===0&&this.low===0};ve.eqz=ve.isZero;ve.isNegative=function(){return!this.unsigned&&this.high<0};ve.isPositive=function(){return this.unsigned||this.high>=0};ve.isOdd=function(){return(this.low&1)===1};ve.isEven=function(){return(this.low&1)===0};ve.equals=function(i){return Ts(i)||(i=Ia(i)),this.unsigned!==i.unsigned&&this.high>>>31===1&&i.high>>>31===1?!1:this.high===i.high&&this.low===i.low};ve.eq=ve.equals;ve.notEquals=function(i){return!this.eq(i)};ve.neq=ve.notEquals;ve.ne=ve.notEquals;ve.lessThan=function(i){return this.comp(i)<0};ve.lt=ve.lessThan;ve.lessThanOrEqual=function(i){return this.comp(i)<=0};ve.lte=ve.lessThanOrEqual;ve.le=ve.lessThanOrEqual;ve.greaterThan=function(i){return this.comp(i)>0};ve.gt=ve.greaterThan;ve.greaterThanOrEqual=function(i){return this.comp(i)>=0};ve.gte=ve.greaterThanOrEqual;ve.ge=ve.greaterThanOrEqual;ve.compare=function(i){if(Ts(i)||(i=Ia(i)),this.eq(i))return 0;var e=this.isNegative(),t=i.isNegative();return e&&!t?-1:!e&&t?1:this.unsigned?i.high>>>0>this.high>>>0||i.high===this.high&&i.low>>>0>this.low>>>0?-1:1:this.sub(i).isNegative()?-1:1};ve.comp=ve.compare;ve.negate=function(){return!this.unsigned&&this.eq(pr)?pr:this.not().add(ap)};ve.neg=ve.negate;ve.add=function(i){Ts(i)||(i=Ia(i));var e=this.high>>>16,t=this.high&65535,n=this.low>>>16,s=this.low&65535,r=i.high>>>16,o=i.high&65535,a=i.low>>>16,l=i.low&65535,c=0,h=0,u=0,d=0;return d+=s+l,u+=d>>>16,d&=65535,u+=n+a,h+=u>>>16,u&=65535,h+=t+o,c+=h>>>16,h&=65535,c+=e+r,c&=65535,Zt(u<<16|d,c<<16|h,this.unsigned)};ve.subtract=function(i){return Ts(i)||(i=Ia(i)),this.add(i.neg())};ve.sub=ve.subtract;ve.multiply=function(i){if(this.isZero())return this;if(Ts(i)||(i=Ia(i)),Co){var e=Co.mul(this.low,this.high,i.low,i.high);return Zt(e,Co.get_high(),this.unsigned)}if(i.isZero())return this.unsigned?Ec:na;if(this.eq(pr))return i.isOdd()?pr:na;if(i.eq(pr))return this.isOdd()?pr:na;if(this.isNegative())return i.isNegative()?this.neg().mul(i.neg()):this.neg().mul(i).neg();if(i.isNegative())return this.mul(i.neg()).neg();if(this.lt(P8)&&i.lt(P8))return So(this.toNumber()*i.toNumber(),this.unsigned);var t=this.high>>>16,n=this.high&65535,s=this.low>>>16,r=this.low&65535,o=i.high>>>16,a=i.high&65535,l=i.low>>>16,c=i.low&65535,h=0,u=0,d=0,f=0;return f+=r*c,d+=f>>>16,f&=65535,d+=s*c,u+=d>>>16,d&=65535,d+=r*l,u+=d>>>16,d&=65535,u+=n*c,h+=u>>>16,u&=65535,u+=s*l,h+=u>>>16,u&=65535,u+=r*a,h+=u>>>16,u&=65535,h+=t*c+n*l+s*a+r*o,h&=65535,Zt(d<<16|f,h<<16|u,this.unsigned)};ve.mul=ve.multiply;ve.divide=function(i){if(Ts(i)||(i=Ia(i)),i.isZero())throw Error("division by zero");if(Co){if(!this.unsigned&&this.high===-2147483648&&i.low===-1&&i.high===-1)return this;var e=(this.unsigned?Co.div_u:Co.div_s)(this.low,this.high,i.low,i.high);return Zt(e,Co.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Ec:na;var t,n,s;if(this.unsigned){if(i.unsigned||(i=i.toUnsigned()),i.gt(this))return Ec;if(i.gt(this.shru(1)))return JG;s=Ec}else{if(this.eq(pr)){if(i.eq(ap)||i.eq(qT))return pr;if(i.eq(pr))return ap;var r=this.shr(1);return t=r.div(i).shl(1),t.eq(na)?i.isNegative()?ap:qT:(n=this.sub(i.mul(t)),s=t.add(n.div(i)),s)}else if(i.eq(pr))return this.unsigned?Ec:na;if(this.isNegative())return i.isNegative()?this.neg().div(i.neg()):this.neg().div(i).neg();if(i.isNegative())return this.div(i.neg()).neg();s=na}for(n=this;n.gte(i);){t=Math.max(1,Math.floor(n.toNumber()/i.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),a=o<=48?1:QS(2,o-48),l=So(t),c=l.mul(i);c.isNegative()||c.gt(n);)t-=a,l=So(t,this.unsigned),c=l.mul(i);l.isZero()&&(l=ap),s=s.add(l),n=n.sub(c)}return s};ve.div=ve.divide;ve.modulo=function(i){if(Ts(i)||(i=Ia(i)),Co){var e=(this.unsigned?Co.rem_u:Co.rem_s)(this.low,this.high,i.low,i.high);return Zt(e,Co.get_high(),this.unsigned)}return this.sub(this.div(i).mul(i))};ve.mod=ve.modulo;ve.rem=ve.modulo;ve.not=function(){return Zt(~this.low,~this.high,this.unsigned)};ve.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};ve.clz=ve.countLeadingZeros;ve.countTrailingZeros=function(){return this.low?T8(this.low):T8(this.high)+32};ve.ctz=ve.countTrailingZeros;ve.and=function(i){return Ts(i)||(i=Ia(i)),Zt(this.low&i.low,this.high&i.high,this.unsigned)};ve.or=function(i){return Ts(i)||(i=Ia(i)),Zt(this.low|i.low,this.high|i.high,this.unsigned)};ve.xor=function(i){return Ts(i)||(i=Ia(i)),Zt(this.low^i.low,this.high^i.high,this.unsigned)};ve.shiftLeft=function(i){return Ts(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?Zt(this.low<<i,this.high<<i|this.low>>>32-i,this.unsigned):Zt(0,this.low<<i-32,this.unsigned)};ve.shl=ve.shiftLeft;ve.shiftRight=function(i){return Ts(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?Zt(this.low>>>i|this.high<<32-i,this.high>>i,this.unsigned):Zt(this.high>>i-32,this.high>=0?0:-1,this.unsigned)};ve.shr=ve.shiftRight;ve.shiftRightUnsigned=function(i){return Ts(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?Zt(this.low>>>i|this.high<<32-i,this.high>>>i,this.unsigned):i===32?Zt(this.high,0,this.unsigned):Zt(this.high>>>i-32,0,this.unsigned)};ve.shru=ve.shiftRightUnsigned;ve.shr_u=ve.shiftRightUnsigned;ve.rotateLeft=function(i){var e;return Ts(i)&&(i=i.toInt()),(i&=63)===0?this:i===32?Zt(this.high,this.low,this.unsigned):i<32?(e=32-i,Zt(this.low<<i|this.high>>>e,this.high<<i|this.low>>>e,this.unsigned)):(i-=32,e=32-i,Zt(this.high<<i|this.low>>>e,this.low<<i|this.high>>>e,this.unsigned))};ve.rotl=ve.rotateLeft;ve.rotateRight=function(i){var e;return Ts(i)&&(i=i.toInt()),(i&=63)===0?this:i===32?Zt(this.high,this.low,this.unsigned):i<32?(e=32-i,Zt(this.high<<e|this.low>>>i,this.low<<e|this.high>>>i,this.unsigned)):(i-=32,e=32-i,Zt(this.low<<e|this.high>>>i,this.high<<e|this.low>>>i,this.unsigned))};ve.rotr=ve.rotateRight;ve.toSigned=function(){return this.unsigned?Zt(this.low,this.high,!1):this};ve.toUnsigned=function(){return this.unsigned?this:Zt(this.low,this.high,!0)};ve.toBytes=function(i){return i?this.toBytesLE():this.toBytesBE()};ve.toBytesLE=function(){var i=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,i&255,i>>>8&255,i>>>16&255,i>>>24]};ve.toBytesBE=function(){var i=this.high,e=this.low;return[i>>>24,i>>>16&255,i>>>8&255,i&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};Oi.fromBytes=function(i,e,t){return t?Oi.fromBytesLE(i,e):Oi.fromBytesBE(i,e)};Oi.fromBytesLE=function(i,e){return new Oi(i[0]|i[1]<<8|i[2]<<16|i[3]<<24,i[4]|i[5]<<8|i[6]<<16|i[7]<<24,e)};Oi.fromBytesBE=function(i,e){return new Oi(i[4]<<24|i[5]<<16|i[6]<<8|i[7],i[0]<<24|i[1]<<16|i[2]<<8|i[3],e)};function F8(i,e){return i.offset+i.lineBytes*Math.floor(e/i.lineLength)+e%i.lineLength}async function X_e(i,e){const t=await i.readFile(e);if(!(t&&t.length))throw new Error("No data read from FASTA index (FAI) file");let n=0,s;const r=t.toString("utf8").split(/\r?\n/).filter(o=>/\S/.test(o)).map(o=>o.split("	")).filter(o=>o[0]!=="").map(o=>((!s||s.name!==o[0])&&(s={name:o[0],id:n},n+=1),{id:s.id,name:o[0],length:+o[1],start:0,end:+o[1],offset:+o[2],lineLength:+o[3],lineBytes:+o[4]}));return{name:Object.fromEntries(r.map(o=>[o.name,o])),id:Object.fromEntries(r.map(o=>[o.id,o]))}}class J_e{constructor({fasta:e,fai:t,path:n,faiPath:s,chunkSizeLimit:r=1e6}){if(e)this.fasta=e;else if(n)this.fasta=new Fh(n);else throw new Error("Need to pass filehandle for fasta or path to localfile");if(t)this.fai=t;else if(s)this.fai=new Fh(s);else if(n)this.fai=new Fh(`${n}.fai`);else throw new Error("Need to pass filehandle for  or path to localfile");this.chunkSizeLimit=r}async _getIndexes(e){return this.indexes||(this.indexes=X_e(this.fai,e)),this.indexes}async getSequenceNames(e){return Object.keys((await this._getIndexes(e)).name)}async getSequenceSizes(e){const t={},n=await this._getIndexes(e),s=Object.values(n.id);for(let r=0;r<s.length;r+=1)t[s[r].name]=s[r].length;return t}async getSequenceSize(e,t){var n;return(n=(await this._getIndexes(t)).name[e])===null||n===void 0?void 0:n.length}async hasReferenceSequence(e,t){return!!(await this._getIndexes(t)).name[e]}async getResiduesById(e,t,n,s){const r=(await this._getIndexes(s)).id[e];if(r)return this._fetchFromIndexEntry(r,t,n,s)}async getResiduesByName(e,t,n,s){const r=(await this._getIndexes(s)).name[e];if(r)return this._fetchFromIndexEntry(r,t,n,s)}async getSequence(e,t,n,s){return this.getResiduesByName(e,t,n,s)}async _fetchFromIndexEntry(e,t=0,n,s){let r=n;if(t<0)throw new TypeError("regionStart cannot be less than 0");if((r===void 0||r>e.length)&&(r=e.length),t>=r)return"";const o=F8(e,t),a=F8(e,r)-o;if(a>this.chunkSizeLimit)throw new Error(`data size of ${a.toLocaleString()} bytes exceeded chunk size limit of ${this.chunkSizeLimit.toLocaleString()} bytes`);const l=Buffer.allocUnsafe(a);return await this.fasta.read(l,0,a,o,s),l.toString("utf8").replace(/\s+/g,"")}}function NL(i){return class extends i{constructor(){super(...arguments),zc(this,"lastQuantizedInterval",[0,0])}quantizeInterval(e,t){return[Math.max(Math.floor(e[0]/t-1)*t,0),Math.min(Math.ceil(e[1]/t+1)*t,this.genome.totalSize)]}checkAndUpdateLastInterval(e){return OR(this.lastQuantizedInterval,e)?!1:(this.lastQuantizedInterval=e,!0)}}}function ML(i,e){return!e||/^(data:|([A-Za-z]+:)?\/\/)/.test(i)||i.startsWith("/")?i:(e.endsWith("/")||(e+="/"),e+i)}typeof window<"u"&&(window.Buffer=Vr.Buffer);class ebe extends NL(u0){constructor(e,t){const n={channel:"x",windowSize:7e3,...e};if(super(t,n.channel),this.params=n,!this.params.url)throw new Error("No URL provided for IndexedFastaSource");const s=r=>new Ac(ML(r,this.view.getBaseUrl()));this.fasta=new J_e({fasta:s(this.params.url),fai:s(this.params.indexUrl??this.params.url+".fai")})}async onDomainChanged(e){const t=this.params.windowSize;if(e[1]-e[0]>t)return;const n=this.quantizeInterval(e,t);if(this.checkAndUpdateLastInterval(n)){const s=this.genome.continuousToDiscreteChromosomeIntervals(n),r=await Promise.all(s.map(o=>this.fasta.getSequence(o.chrom,o.startPos,o.endPos).then(a=>({chrom:o.chrom,start:o.startPos,sequence:a}))));this.publishData(r)}}}const RL=BigInt(32);function tbe(i,e,t){const n=+!!t,s=+!t;return BigInt(i.getInt32(e,t)*s+i.getInt32(e+4,t)*n)<<RL|BigInt(i.getUint32(e,t)*n+i.getUint32(e+4,t)*s)}function ibe(i,e,t){const n=i.getUint32(e,t),s=i.getUint32(e+4,t),r=+!!t,o=+!t;return BigInt(n*o+s*r)<<RL|BigInt(n*r+s*o)}function nbe(i,e,t,n){const s=Number(t>>RL),r=Number(t&BigInt(4294967295));n?(i.setInt32(e+4,s,n),i.setUint32(e,r,n)):(i.setInt32(e,s,n),i.setUint32(e+4,r,n))}function sbe(i,e,t,n){const s=Number(t>>RL),r=Number(t&BigInt(4294967295));n?(i.setUint32(e+4,s,n),i.setUint32(e,r,n)):(i.setUint32(e,s,n),i.setUint32(e+4,r,n))}"getBigInt64"in DataView||(DataView.prototype.getBigInt64=function(i,e){return tbe(this,i,e)});"getBigUint64"in DataView||(DataView.prototype.getBigUint64=function(i,e){return ibe(this,i,e)});"setBigInt64"in DataView||(DataView.prototype.setBigInt64=function(i,e,t){nbe(this,i,e,t)});"setBigUint64"in DataView||(DataView.prototype.setBigUint64=function(i,e,t){sbe(this,i,e,t)});class rbe{constructor(e,t){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references=new Map,this.imports=[],this.reverseImports=new Map,this.useContextVariables=!1,this.importPath=e,this.useContextVariables=t}generateVariable(e){const t=[...this.scopes[this.scopes.length-1]];return e&&t.push(e),t.join(".")}generateOption(e){switch(typeof e){case"number":return e.toString();case"string":return this.generateVariable(e);case"function":return`${this.addImport(e)}.call(${this.generateVariable()}, vars)`}}generateError(e){this.pushCode(`throw new Error(${e});`)}generateTmpVariable(){return"$tmp"+this.tmpVariableCount++}pushCode(e){this.code+=e+`
`}pushPath(e){e&&this.scopes[this.scopes.length-1].push(e)}popPath(e){e&&this.scopes[this.scopes.length-1].pop()}pushScope(e){this.scopes.push([e])}popScope(){this.scopes.pop()}addImport(e){if(!this.importPath)return`(${e})`;let t=this.reverseImports.get(e);return t||(t=this.imports.push(e)-1,this.reverseImports.set(e,t)),`${this.importPath}[${t}]`}addReference(e){this.references.has(e)||this.references.set(e,{resolved:!1,requested:!1})}markResolved(e){const t=this.references.get(e);t&&(t.resolved=!0)}markRequested(e){e.forEach(t=>{const n=this.references.get(t);n&&(n.requested=!0)})}getUnresolvedReferences(){return Array.from(this.references).filter(([e,t])=>!t.resolved&&!t.requested).map(([e,t])=>e)}}const zo=new Map,Ku="___parser_",Ho={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},ly={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},cy={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1};class Ct{constructor(){this.varName="",this.type="",this.options={},this.endian="be",this.useContextVariables=!1}static start(){return new Ct}primitiveGenerateN(e,t){const n=ly[e],s=cy[e];t.pushCode(`${t.generateVariable(this.varName)} = dataView.get${n}(offset, ${s});`),t.pushCode(`offset += ${Ho[e]};`)}primitiveN(e,t,n){return this.setNextParser(e,t,n)}useThisEndian(e){return e+this.endian.toLowerCase()}uint8(e,t={}){return this.primitiveN("uint8",e,t)}uint16(e,t={}){return this.primitiveN(this.useThisEndian("uint16"),e,t)}uint16le(e,t={}){return this.primitiveN("uint16le",e,t)}uint16be(e,t={}){return this.primitiveN("uint16be",e,t)}uint32(e,t={}){return this.primitiveN(this.useThisEndian("uint32"),e,t)}uint32le(e,t={}){return this.primitiveN("uint32le",e,t)}uint32be(e,t={}){return this.primitiveN("uint32be",e,t)}int8(e,t={}){return this.primitiveN("int8",e,t)}int16(e,t={}){return this.primitiveN(this.useThisEndian("int16"),e,t)}int16le(e,t={}){return this.primitiveN("int16le",e,t)}int16be(e,t={}){return this.primitiveN("int16be",e,t)}int32(e,t={}){return this.primitiveN(this.useThisEndian("int32"),e,t)}int32le(e,t={}){return this.primitiveN("int32le",e,t)}int32be(e,t={}){return this.primitiveN("int32be",e,t)}bigIntVersionCheck(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported on this runtime")}int64(e,t={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),e,t)}int64be(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("int64be",e,t)}int64le(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("int64le",e,t)}uint64(e,t={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),e,t)}uint64be(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("uint64be",e,t)}uint64le(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("uint64le",e,t)}floatle(e,t={}){return this.primitiveN("floatle",e,t)}floatbe(e,t={}){return this.primitiveN("floatbe",e,t)}doublele(e,t={}){return this.primitiveN("doublele",e,t)}doublebe(e,t={}){return this.primitiveN("doublebe",e,t)}bitN(e,t,n){return n.length=e,this.setNextParser("bit",t,n)}bit1(e,t={}){return this.bitN(1,e,t)}bit2(e,t={}){return this.bitN(2,e,t)}bit3(e,t={}){return this.bitN(3,e,t)}bit4(e,t={}){return this.bitN(4,e,t)}bit5(e,t={}){return this.bitN(5,e,t)}bit6(e,t={}){return this.bitN(6,e,t)}bit7(e,t={}){return this.bitN(7,e,t)}bit8(e,t={}){return this.bitN(8,e,t)}bit9(e,t={}){return this.bitN(9,e,t)}bit10(e,t={}){return this.bitN(10,e,t)}bit11(e,t={}){return this.bitN(11,e,t)}bit12(e,t={}){return this.bitN(12,e,t)}bit13(e,t={}){return this.bitN(13,e,t)}bit14(e,t={}){return this.bitN(14,e,t)}bit15(e,t={}){return this.bitN(15,e,t)}bit16(e,t={}){return this.bitN(16,e,t)}bit17(e,t={}){return this.bitN(17,e,t)}bit18(e,t={}){return this.bitN(18,e,t)}bit19(e,t={}){return this.bitN(19,e,t)}bit20(e,t={}){return this.bitN(20,e,t)}bit21(e,t={}){return this.bitN(21,e,t)}bit22(e,t={}){return this.bitN(22,e,t)}bit23(e,t={}){return this.bitN(23,e,t)}bit24(e,t={}){return this.bitN(24,e,t)}bit25(e,t={}){return this.bitN(25,e,t)}bit26(e,t={}){return this.bitN(26,e,t)}bit27(e,t={}){return this.bitN(27,e,t)}bit28(e,t={}){return this.bitN(28,e,t)}bit29(e,t={}){return this.bitN(29,e,t)}bit30(e,t={}){return this.bitN(30,e,t)}bit31(e,t={}){return this.bitN(31,e,t)}bit32(e,t={}){return this.bitN(32,e,t)}namely(e){return zo.set(e,this),this.alias=e,this}skip(e,t={}){return this.seek(e,t)}seek(e,t={}){if(t.assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:e})}string(e,t){if(!t.zeroTerminated&&!t.length&&!t.greedy)throw new Error("One of length, zeroTerminated, or greedy must be defined for string.");if((t.zeroTerminated||t.length)&&t.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(t.stripNull&&!(t.length||t.greedy))throw new Error("length or greedy must be defined if stripNull is enabled.");return t.encoding=t.encoding||"utf8",this.setNextParser("string",e,t)}buffer(e,t){if(!t.length&&!t.readUntil)throw new Error("length or readUntil must be defined for buffer.");return this.setNextParser("buffer",e,t)}wrapped(e,t){if(typeof t!="object"&&typeof e=="object"&&(t=e,e=""),!t||!t.wrapper||!t.type)throw new Error("Both wrapper and type must be defined for wrapped.");if(!t.length&&!t.readUntil)throw new Error("length or readUntil must be defined for wrapped.");return this.setNextParser("wrapper",e,t)}array(e,t){if(!t.readUntil&&!t.length&&!t.lengthInBytes)throw new Error("One of readUntil, length and lengthInBytes must be defined for array.");if(!t.type)throw new Error("type is required for array.");if(typeof t.type=="string"&&!zo.has(t.type)&&!(t.type in Ho))throw new Error(`Array element type "${t.type}" is unkown.`);return this.setNextParser("array",e,t)}choice(e,t){if(typeof t!="object"&&typeof e=="object"&&(t=e,e=""),!t)throw new Error("tag and choices are are required for choice.");if(!t.tag)throw new Error("tag is requird for choice.");if(!t.choices)throw new Error("choices is required for choice.");for(const n in t.choices){const s=parseInt(n,10),r=t.choices[s];if(isNaN(s))throw new Error(`Choice key "${n}" is not a number.`);if(typeof r=="string"&&!zo.has(r)&&!(r in Ho))throw new Error(`Choice type "${r}" is unkown.`)}return this.setNextParser("choice",e,t)}nest(e,t){if(typeof t!="object"&&typeof e=="object"&&(t=e,e=""),!t||!t.type)throw new Error("type is required for nest.");if(!(t.type instanceof Ct)&&!zo.has(t.type))throw new Error("type must be a known parser name or a Parser object.");if(!(t.type instanceof Ct)&&!e)throw new Error("type must be a Parser object if the variable name is omitted.");return this.setNextParser("nest",e,t)}pointer(e,t){if(!t.offset)throw new Error("offset is required for pointer.");if(!t.type)throw new Error("type is required for pointer.");if(typeof t.type=="string"&&!(t.type in Ho)&&!zo.has(t.type))throw new Error(`Pointer type "${t.type}" is unkown.`);return this.setNextParser("pointer",e,t)}saveOffset(e,t={}){return this.setNextParser("saveOffset",e,t)}endianness(e){switch(e.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error('endianness must be one of "little" or "big"')}return this}endianess(e){return this.endianness(e)}useContextVars(e=!0){return this.useContextVariables=e,this}create(e){if(!(e instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=e,this}getContext(e){const t=new rbe(e,this.useContextVariables);return t.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(t),t.pushCode(`return ${Ku+this.alias}(0).result;`)):this.addRawCode(t),t}getCode(){const e="imports";return this.getContext(e).code}addRawCode(e){e.pushCode("var offset = 0;"),e.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),e.pushCode("vars.$parent = null;"),e.pushCode("vars.$root = vars;"),this.generate(e),this.resolveReferences(e),e.pushCode("delete vars.$parent;"),e.pushCode("delete vars.$root;"),e.pushCode("return vars;")}addAliasedCode(e){return e.pushCode(`function ${Ku+this.alias}(offset, context) {`),e.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),e.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),e.pushCode("vars = Object.assign(vars, ctx);"),this.generate(e),e.markResolved(this.alias),this.resolveReferences(e),e.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),e.pushCode("return { offset: offset, result: vars };"),e.pushCode("}"),e}resolveReferences(e){const t=e.getUnresolvedReferences();e.markRequested(t),t.forEach(n=>{var s;(s=zo.get(n))===null||s===void 0||s.addAliasedCode(e)})}compile(){const e="imports",t=this.getContext(e);this.compiled=new Function(e,"TextDecoder",`return function (buffer, constructorFn) { ${t.code} };`)(t.imports,TextDecoder)}sizeOf(){let e=NaN;if(Object.keys(Ho).indexOf(this.type)>=0)e=Ho[this.type];else if(this.type==="string"&&typeof this.options.length=="number")e=this.options.length;else if(this.type==="buffer"&&typeof this.options.length=="number")e=this.options.length;else if(this.type==="array"&&typeof this.options.length=="number"){let t=NaN;typeof this.options.type=="string"?t=Ho[this.options.type]:this.options.type instanceof Ct&&(t=this.options.type.sizeOf()),e=this.options.length*t}else this.type==="seek"?e=this.options.length:this.type==="nest"?e=this.options.type.sizeOf():this.type||(e=0);return this.next&&(e+=this.next.sizeOf()),e}parse(e){return this.compiled||this.compile(),this.compiled(e,this.constructorFn)}setNextParser(e,t,n){const s=new Ct;return s.type=e,s.varName=t,s.options=n,s.endian=this.endian,this.head?this.head.next=s:this.next=s,this.head=s,this}generate(e){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,e);break;case"bit":this.generateBit(e);break;case"string":this.generateString(e);break;case"buffer":this.generateBuffer(e);break;case"seek":this.generateSeek(e);break;case"nest":this.generateNest(e);break;case"array":this.generateArray(e);break;case"choice":this.generateChoice(e);break;case"pointer":this.generatePointer(e);break;case"saveOffset":this.generateSaveOffset(e);break;case"wrapper":this.generateWrapper(e);break}this.type!=="bit"&&this.generateAssert(e)}const t=e.generateVariable(this.varName);return this.options.formatter&&this.type!=="bit"&&this.generateFormatter(e,t,this.options.formatter),this.generateNext(e)}generateAssert(e){if(!this.options.assert)return;const t=e.generateVariable(this.varName);switch(typeof this.options.assert){case"function":{const n=e.addImport(this.options.assert);e.pushCode(`if (!${n}.call(vars, ${t})) {`)}break;case"number":e.pushCode(`if (${this.options.assert} !== ${t}) {`);break;case"string":e.pushCode(`if (${JSON.stringify(this.options.assert)} !== ${t}) {`);break;default:throw new Error("assert option must be a string, number or a function.")}e.generateError(`"Assertion error: ${t} is " + ${JSON.stringify(this.options.assert.toString())}`),e.pushCode("}")}generateNext(e){return this.next&&(e=this.next.generate(e)),e}generateBit(e){const t=JSON.parse(JSON.stringify(this));if(t.options=this.options,t.generateAssert=this.generateAssert.bind(this),t.generateFormatter=this.generateFormatter.bind(this),t.varName=e.generateVariable(t.varName),e.bitFields.push(t),!this.next||this.next&&["bit","nest"].indexOf(this.next.type)<0){const n=e.generateTmpVariable();e.pushCode(`var ${n} = 0;`);const s=(h=0)=>{let u=0;for(let d=h;d<e.bitFields.length;d++){const f=e.bitFields[d].options.length;if(u+f>32)break;u+=f}return u},r=h=>(h<=8?(e.pushCode(`${n} = dataView.getUint8(offset);`),h=8):h<=16?(e.pushCode(`${n} = dataView.getUint16(offset);`),h=16):h<=24?(e.pushCode(`${n} = (dataView.getUint16(offset) << 8) | dataView.getUint8(offset + 2);`),h=24):(e.pushCode(`${n} = dataView.getUint32(offset);`),h=32),e.pushCode(`offset += ${h/8};`),h);let o=0;const a=this.endian==="be";let l=0,c=0;e.bitFields.forEach((h,u)=>{let d=h.options.length;if(d>c){if(c){const p=-1>>>32-c;e.pushCode(`${h.varName} = (${n} & 0x${p.toString(16)}) << ${d-c};`),d-=c}o=0,c=l=r(s(u)-c)}const f=a?l-o-d:o,g=-1>>>32-d;e.pushCode(`${h.varName} ${d<h.options.length?"|=":"="} ${n} >> ${f} & 0x${g.toString(16)};`),h.options.length===32&&e.pushCode(`${h.varName} >>>= 0`),h.options.assert&&h.generateAssert(e),h.options.formatter&&h.generateFormatter(e,h.varName,h.options.formatter),o+=d,c-=d}),e.bitFields=[]}}generateSeek(e){const t=e.generateOption(this.options.length);e.pushCode(`offset += ${t};`)}generateString(e){const t=e.generateVariable(this.varName),n=e.generateTmpVariable(),s=this.options.encoding,r=s.toLowerCase()==="hex",o='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){const a=this.options.length;e.pushCode(`var ${n} = offset;`),e.pushCode(`while(dataView.getUint8(offset++) !== 0 && offset - ${n} < ${a});`);const l=`offset - ${n} < ${a} ? offset - 1 : offset`;e.pushCode(r?`${t} = Array.from(buffer.subarray(${n}, ${l}), ${o}).join('');`:`${t} = new TextDecoder('${s}').decode(buffer.subarray(${n}, ${l}));`)}else if(this.options.length){const a=e.generateOption(this.options.length);e.pushCode(r?`${t} = Array.from(buffer.subarray(offset, offset + ${a}), ${o}).join('');`:`${t} = new TextDecoder('${s}').decode(buffer.subarray(offset, offset + ${a}));`),e.pushCode(`offset += ${a};`)}else this.options.zeroTerminated?(e.pushCode(`var ${n} = offset;`),e.pushCode("while(dataView.getUint8(offset++) !== 0);"),e.pushCode(r?`${t} = Array.from(buffer.subarray(${n}, offset - 1), ${o}).join('');`:`${t} = new TextDecoder('${s}').decode(buffer.subarray(${n}, offset - 1));`)):this.options.greedy&&(e.pushCode(`var ${n} = offset;`),e.pushCode("while(buffer.length > offset++);"),e.pushCode(r?`${t} = Array.from(buffer.subarray(${n}, offset), ${o}).join('');`:`${t} = new TextDecoder('${s}').decode(buffer.subarray(${n}, offset));`));this.options.stripNull&&e.pushCode(`${t} = ${t}.replace(/\\x00+$/g, '')`)}generateBuffer(e){const t=e.generateVariable(this.varName);if(typeof this.options.readUntil=="function"){const n=this.options.readUntil,s=e.generateTmpVariable(),r=e.generateTmpVariable();e.pushCode(`var ${s} = offset;`),e.pushCode(`var ${r} = 0;`),e.pushCode("while (offset < buffer.length) {"),e.pushCode(`${r} = dataView.getUint8(offset);`);const o=e.addImport(n);e.pushCode(`if (${o}.call(${e.generateVariable()}, ${r}, buffer.subarray(offset))) break;`),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(`${t} = buffer.subarray(${s}, offset);`)}else if(this.options.readUntil==="eof")e.pushCode(`${t} = buffer.subarray(offset);`);else{const n=e.generateOption(this.options.length);e.pushCode(`${t} = buffer.subarray(offset, offset + ${n});`),e.pushCode(`offset += ${n};`)}this.options.clone&&e.pushCode(`${t} = buffer.constructor.from(${t});`)}generateArray(e){const t=e.generateOption(this.options.length),n=e.generateOption(this.options.lengthInBytes),s=this.options.type,r=e.generateTmpVariable(),o=e.generateVariable(this.varName),a=e.generateTmpVariable(),l=this.options.key,c=typeof l=="string";if(c?e.pushCode(`${o} = {};`):e.pushCode(`${o} = [];`),typeof this.options.readUntil=="function"?e.pushCode("do {"):this.options.readUntil==="eof"?e.pushCode(`for (var ${r} = 0; offset < buffer.length; ${r}++) {`):n!==void 0?e.pushCode(`for (var ${r} = offset + ${n}; offset < ${r}; ) {`):e.pushCode(`for (var ${r} = ${t}; ${r} > 0; ${r}--) {`),typeof s=="string")if(zo.get(s)){const h=e.generateTmpVariable();if(e.pushCode(`var ${h} = ${Ku+s}(offset, {`),e.useContextVariables){const u=e.generateVariable();e.pushCode(`$parent: ${u},`),e.pushCode(`$root: ${u}.$root,`),!this.options.readUntil&&n===void 0&&e.pushCode(`$index: ${t} - ${r},`)}e.pushCode("});"),e.pushCode(`var ${a} = ${h}.result; offset = ${h}.offset;`),s!==this.alias&&e.addReference(s)}else{const h=ly[s],u=cy[s];e.pushCode(`var ${a} = dataView.get${h}(offset, ${u});`),e.pushCode(`offset += ${Ho[s]};`)}else if(s instanceof Ct){e.pushCode(`var ${a} = {};`);const h=e.generateVariable();e.pushScope(a),e.useContextVariables&&(e.pushCode(`${a}.$parent = ${h};`),e.pushCode(`${a}.$root = ${h}.$root;`),!this.options.readUntil&&n===void 0&&e.pushCode(`${a}.$index = ${t} - ${r};`)),s.generate(e),e.useContextVariables&&(e.pushCode(`delete ${a}.$parent;`),e.pushCode(`delete ${a}.$root;`),e.pushCode(`delete ${a}.$index;`)),e.popScope()}if(c?e.pushCode(`${o}[${a}.${l}] = ${a};`):e.pushCode(`${o}.push(${a});`),e.pushCode("}"),typeof this.options.readUntil=="function"){const h=this.options.readUntil,u=e.addImport(h);e.pushCode(`while (!${u}.call(${e.generateVariable()}, ${a}, buffer.subarray(offset)));`)}}generateChoiceCase(e,t,n){if(typeof n=="string"){const s=e.generateVariable(this.varName);if(zo.has(n)){const r=e.generateTmpVariable();e.pushCode(`var ${r} = ${Ku+n}(offset, {`),e.useContextVariables&&(e.pushCode(`$parent: ${s}.$parent,`),e.pushCode(`$root: ${s}.$root,`)),e.pushCode("});"),e.pushCode(`${s} = ${r}.result; offset = ${r}.offset;`),n!==this.alias&&e.addReference(n)}else{const r=ly[n],o=cy[n];e.pushCode(`${s} = dataView.get${r}(offset, ${o});`),e.pushCode(`offset += ${Ho[n]}`)}}else n instanceof Ct&&(e.pushPath(t),n.generate(e),e.popPath(t))}generateChoice(e){const t=e.generateOption(this.options.tag),n=e.generateVariable(this.varName);if(this.varName&&(e.pushCode(`${n} = {};`),e.useContextVariables)){const s=e.generateVariable();e.pushCode(`${n}.$parent = ${s};`),e.pushCode(`${n}.$root = ${s}.$root;`)}e.pushCode(`switch(${t}) {`);for(const s in this.options.choices){const r=parseInt(s,10),o=this.options.choices[r];e.pushCode(`case ${r}:`),this.generateChoiceCase(e,this.varName,o),e.pushCode("break;")}e.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(e,this.varName,this.options.defaultChoice):e.generateError(`"Met undefined tag value " + ${t} + " at choice"`),e.pushCode("}"),this.varName&&e.useContextVariables&&(e.pushCode(`delete ${n}.$parent;`),e.pushCode(`delete ${n}.$root;`))}generateNest(e){const t=e.generateVariable(this.varName);if(this.options.type instanceof Ct){if(this.varName&&(e.pushCode(`${t} = {};`),e.useContextVariables)){const n=e.generateVariable();e.pushCode(`${t}.$parent = ${n};`),e.pushCode(`${t}.$root = ${n}.$root;`)}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),this.varName&&e.useContextVariables&&e.useContextVariables&&(e.pushCode(`delete ${t}.$parent;`),e.pushCode(`delete ${t}.$root;`))}else if(zo.has(this.options.type)){const n=e.generateTmpVariable();if(e.pushCode(`var ${n} = ${Ku+this.options.type}(offset, {`),e.useContextVariables){const s=e.generateVariable();e.pushCode(`$parent: ${s},`),e.pushCode(`$root: ${s}.$root,`)}e.pushCode("});"),e.pushCode(`${t} = ${n}.result; offset = ${n}.offset;`),this.options.type!==this.alias&&e.addReference(this.options.type)}}generateWrapper(e){const t=e.generateVariable(this.varName),n=e.generateTmpVariable();if(typeof this.options.readUntil=="function"){const l=this.options.readUntil,c=e.generateTmpVariable(),h=e.generateTmpVariable();e.pushCode(`var ${c} = offset;`),e.pushCode(`var ${h} = 0;`),e.pushCode("while (offset < buffer.length) {"),e.pushCode(`${h} = dataView.getUint8(offset);`);const u=e.addImport(l);e.pushCode(`if (${u}.call(${e.generateVariable()}, ${h}, buffer.subarray(offset))) break;`),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(`${n} = buffer.subarray(${c}, offset);`)}else if(this.options.readUntil==="eof")e.pushCode(`${n} = buffer.subarray(offset);`);else{const l=e.generateOption(this.options.length);e.pushCode(`${n} = buffer.subarray(offset, offset + ${l});`),e.pushCode(`offset += ${l};`)}this.options.clone&&e.pushCode(`${n} = buffer.constructor.from(${n});`);const s=e.generateTmpVariable(),r=e.generateTmpVariable(),o=e.generateTmpVariable(),a=e.addImport(this.options.wrapper);if(e.pushCode(`${n} = ${a}.call(this, ${n}).subarray(0);`),e.pushCode(`var ${s} = buffer;`),e.pushCode(`var ${r} = offset;`),e.pushCode(`var ${o} = dataView;`),e.pushCode(`buffer = ${n};`),e.pushCode("offset = 0;"),e.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof Ct)this.varName&&e.pushCode(`${t} = {};`),e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName);else if(zo.has(this.options.type)){const l=e.generateTmpVariable();e.pushCode(`var ${l} = ${Ku+this.options.type}(0);`),e.pushCode(`${t} = ${l}.result;`),this.options.type!==this.alias&&e.addReference(this.options.type)}e.pushCode(`buffer = ${s};`),e.pushCode(`dataView = ${o};`),e.pushCode(`offset = ${r};`)}generateFormatter(e,t,n){if(typeof n=="function"){const s=e.addImport(n);e.pushCode(`${t} = ${s}.call(${e.generateVariable()}, ${t});`)}}generatePointer(e){const t=this.options.type,n=e.generateOption(this.options.offset),s=e.generateTmpVariable(),r=e.generateVariable(this.varName);if(e.pushCode(`var ${s} = offset;`),e.pushCode(`offset = ${n};`),this.options.type instanceof Ct){if(e.pushCode(`${r} = {};`),e.useContextVariables){const o=e.generateVariable();e.pushCode(`${r}.$parent = ${o};`),e.pushCode(`${r}.$root = ${o}.$root;`)}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),e.useContextVariables&&(e.pushCode(`delete ${r}.$parent;`),e.pushCode(`delete ${r}.$root;`))}else if(zo.has(this.options.type)){const o=e.generateTmpVariable();if(e.pushCode(`var ${o} = ${Ku+this.options.type}(offset, {`),e.useContextVariables){const a=e.generateVariable();e.pushCode(`$parent: ${a},`),e.pushCode(`$root: ${a}.$root,`)}e.pushCode("});"),e.pushCode(`${r} = ${o}.result; offset = ${o}.offset;`),this.options.type!==this.alias&&e.addReference(this.options.type)}else if(Object.keys(Ho).indexOf(this.options.type)>=0){const o=ly[t],a=cy[t];e.pushCode(`${r} = dataView.get${o}(offset, ${a});`),e.pushCode(`offset += ${Ho[t]};`)}e.pushCode(`offset = ${s};`)}generateSaveOffset(e){const t=e.generateVariable(this.varName);e.pushCode(`${t} = offset`)}}var iK={},CO={},_f={},gw={};Object.defineProperty(gw,"__esModule",{value:!0});function SO(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function B8(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function xO(i,e,t){return e&&B8(i.prototype,e),t&&B8(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function obe(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&GT(i,e)}function mm(i){return mm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mm(i)}function GT(i,e){return GT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},GT(i,e)}function abe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function k_(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function lbe(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k_(i)}function cbe(i){var e=abe();return function(){var t=mm(i),n;if(e){var s=mm(this).constructor;n=Reflect.construct(t,arguments,s)}else n=t.apply(this,arguments);return lbe(this,n)}}function hbe(i,e){for(;!Object.prototype.hasOwnProperty.call(i,e)&&(i=mm(i),i!==null););return i}function MC(){return typeof Reflect<"u"&&Reflect.get?MC=Reflect.get.bind():MC=function(i,e,t){var n=hbe(i,e);if(n){var s=Object.getOwnPropertyDescriptor(n,e);return s.get?s.get.call(arguments.length<3?i:t):s.value}},MC.apply(this,arguments)}var V8=function(){function i(){SO(this,i),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return xO(i,[{key:"addEventListener",value:function(e,t,n){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:n})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners){for(var n=this.listeners[e],s=0,r=n.length;s<r;s++)if(n[s].callback===t){n.splice(s,1);return}}}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var t=this.listeners[e.type],n=t.slice(),s=0,r=n.length;s<r;s++){var o=n[s];try{o.callback.call(this,e)}catch(a){Promise.resolve().then(function(){throw a})}o.options&&o.options.once&&this.removeEventListener(e.type,o.callback)}return!e.defaultPrevented}}}]),i}(),DO=function(i){obe(t,i);var e=cbe(t);function t(){var n;return SO(this,t),n=e.call(this),n.listeners||V8.call(k_(n)),Object.defineProperty(k_(n),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(k_(n),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(k_(n),"reason",{value:void 0,writable:!0,configurable:!0}),n}return xO(t,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(n){n.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,n)),MC(mm(t.prototype),"dispatchEvent",this).call(this,n)}}]),t}(V8),nK=function(){function i(){SO(this,i),Object.defineProperty(this,"signal",{value:new DO,writable:!0,configurable:!0})}return xO(i,[{key:"abort",value:function(e){var t;try{t=new Event("abort")}catch{typeof document<"u"?document.createEvent?(t=document.createEvent("Event"),t.initEvent("abort",!1,!1)):(t=document.createEventObject(),t.type="abort"):t={type:"abort",bubbles:!1,cancelable:!1}}var n=e;if(n===void 0)if(typeof document>"u")n=new Error("This operation was aborted"),n.name="AbortError";else try{n=new DOMException("signal is aborted without reason")}catch{n=new Error("This operation was aborted"),n.name="AbortError"}this.signal.reason=n,this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),i}();typeof Symbol<"u"&&Symbol.toStringTag&&(nK.prototype[Symbol.toStringTag]="AbortController",DO.prototype[Symbol.toStringTag]="AbortSignal");function ube(i){return i.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof i.Request=="function"&&!i.Request.prototype.hasOwnProperty("signal")||!i.AbortController}function dbe(i){typeof i=="function"&&(i={fetch:i});var e=i,t=e.fetch,n=e.Request,s=n===void 0?t.Request:n,r=e.AbortController,o=e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,a=o===void 0?!1:o;if(!ube({fetch:t,Request:s,AbortController:r,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:a}))return{fetch:t,Request:l};var l=s;(l&&!l.prototype.hasOwnProperty("signal")||a)&&(l=function(u,d){var f;d&&d.signal&&(f=d.signal,delete d.signal);var g=new s(u,d);return f&&Object.defineProperty(g,"signal",{writable:!1,enumerable:!1,configurable:!0,value:f}),g},l.prototype=s.prototype);var c=t,h=function(u,d){var f=l&&l.prototype.isPrototypeOf(u)?u.signal:d?d.signal:void 0;if(f){var g;try{g=new DOMException("Aborted","AbortError")}catch{g=new Error("Aborted"),g.name="AbortError"}if(f.aborted)return Promise.reject(g);var p=new Promise(function(m,v){f.addEventListener("abort",function(){return v(g)},{once:!0})});return d&&d.signal&&delete d.signal,Promise.race([p,c(u,d)])}return c(u,d)};return{fetch:h,Request:l}}gw.AbortController=nK;gw.AbortSignal=DO;gw.abortableFetch=dbe;Object.defineProperty(_f,"__esModule",{value:!0});_f.AbortSignal=_f.AbortController=void 0;const sK=gw;var XS=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof uf<"u")return uf;throw new Error("unable to locate global object")};let fbe=typeof XS().AbortController>"u"?sK.AbortController:XS().AbortController;_f.AbortController=fbe;let gbe=typeof XS().AbortController>"u"?sK.AbortSignal:XS().AbortSignal;_f.AbortSignal=gbe;var LO={};Object.defineProperty(LO,"__esModule",{value:!0});const pbe=_f;class mbe{}class _be{constructor(){this.signals=new Set,this.abortController=new pbe.AbortController}addSignal(e=new mbe){if(this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(e),e.aborted?this.handleAborted(e):typeof e.addEventListener=="function"&&e.addEventListener("abort",()=>{this.handleAborted(e)})}handleAborted(e){this.signals.delete(e),this.signals.size===0&&this.abortController.abort()}get signal(){return this.abortController.signal}abort(){this.abortController.abort()}}LO.default=_be;var kO={};Object.defineProperty(kO,"__esModule",{value:!0});class bbe{constructor(){this.callbacks=new Set}addCallback(e=()=>{}){this.callbacks.add(e),e(this.currentMessage)}callback(e){this.currentMessage=e,this.callbacks.forEach(t=>{t(e)})}}kO.default=bbe;var rK=uf&&uf.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(CO,"__esModule",{value:!0});const vbe=_f,wbe=rK(LO),ybe=rK(kO);class JS{constructor({fill:e,cache:t}){if(typeof e!="function")throw new TypeError("must pass a fill function");if(typeof t!="object")throw new TypeError("must pass a cache object");if(typeof t.get!="function"||typeof t.set!="function"||typeof t.delete!="function")throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=t,this.fillCallback=e}static isAbortException(e){return e.name==="AbortError"||e.code==="ERR_ABORTED"||e.message==="AbortError: aborted"||e.message==="Error: aborted"}evict(e,t){this.cache.get(e)===t&&this.cache.delete(e)}fill(e,t,n,s){const r=new wbe.default,o=new ybe.default;o.addCallback(s);const a={aborter:r,promise:this.fillCallback(t,r.signal,l=>{o.callback(l)}),settled:!1,statusReporter:o,get aborted(){return this.aborter.signal.aborted}};a.aborter.addSignal(n),a.aborter.signal.addEventListener("abort",()=>{a.settled||this.evict(e,a)}),a.promise.then(()=>{a.settled=!0},()=>{a.settled=!0,this.evict(e,a)}).catch(l=>{throw console.error(l),l}),this.cache.set(e,a)}static checkSinglePromise(e,t){function n(){if(t&&t.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return e.then(s=>(n(),s),s=>{throw n(),s})}has(e){return this.cache.has(e)}get(e,t,n,s){if(!n&&t instanceof vbe.AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");const r=this.cache.get(e);return r?r.aborted&&!r.settled?(this.evict(e,r),this.get(e,t,n,s)):r.settled?r.promise:(r.aborter.addSignal(n),r.statusReporter.addCallback(s),JS.checkSinglePromise(r.promise,n)):(this.fill(e,t,n,s),JS.checkSinglePromise(this.cache.get(e).promise,n))}delete(e){const t=this.cache.get(e);t&&(t.settled||t.aborter.abort(),this.cache.delete(e))}clear(){const e=this.cache.keys();let t=0;for(let n=e.next();!n.done;n=e.next())this.delete(n.value),t+=1;return t}}CO.default=JS;var Cbe=uf&&uf.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(iK,"__esModule",{value:!0});const Sbe=Cbe(CO);var AO=iK.default=Sbe.default;let xbe=class{constructor(i={}){if(!(i.maxSize&&i.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=i.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(i,e){this.cache.set(i,e),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(i){if(this.cache.has(i))return this.cache.get(i);if(this.oldCache.has(i)){const e=this.oldCache.get(i);return this.oldCache.delete(i),this._set(i,e),e}}set(i,e){return this.cache.has(i)?this.cache.set(i,e):this._set(i,e),this}has(i){return this.cache.has(i)||this.oldCache.has(i)}peek(i){if(this.cache.has(i))return this.cache.get(i);if(this.oldCache.has(i))return this.oldCache.get(i)}delete(i){const e=this.cache.delete(i);return e&&this._size--,this.oldCache.delete(i)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[i]of this)yield i}*values(){for(const[,i]of this)yield i}*[Symbol.iterator](){for(const i of this.cache)yield i;for(const i of this.oldCache){const[e]=i;this.cache.has(e)||(yield i)}}get size(){let i=0;for(const e of this.oldCache.keys())this.cache.has(e)||i++;return this._size+i}};var Dbe=xbe;const oK=d0(Dbe);class Eh{constructor(e,t){this.ranges=arguments.length===2?[{min:e,max:t}]:0 in e?Object.assign({},e):[e]}min(){return this.ranges[0].min}max(){return this.ranges[this.ranges.length-1].max}contains(e){for(let t=0;t<this.ranges.length;t+=1){const n=this.ranges[t];if(n.min<=e&&n.max>=e)return!0}return!1}isContiguous(){return this.ranges.length>1}getRanges(){return this.ranges.map(e=>new Eh(e.min,e.max))}toString(){return this.ranges.map(e=>`[${e.min}-${e.max}]`).join(",")}union(e){const t=this.getRanges().concat(e.getRanges()).sort(this.rangeOrder),n=[];let s=t[0];for(let r=1;r<t.length;r+=1){const o=t[r];o.min()>s.max()+1?(n.push(s),s=o):o.max()>s.max()&&(s=new Eh(s.min(),o.max()))}return n.push(s),n.length===1?n[0]:new Eh(n)}intersection(e){let t=this,n=e;const s=this.ranges(),r=n.ranges(),o=s.length,a=r.length;let l=0,c=0;const h=[];for(;l<o&&c<a;){t=s[l],n=r[c];const u=Math.max(t.min(),n.min()),d=Math.min(t.max(),n.max());d>=u&&h.push(new Eh(u,d)),t.max()>n.max()?c+=1:l+=1}if(h.length===0)throw new Error("found range of length 0");return h.length===1?h[0]:new Eh(h)}coverage(){let e=0;const t=this.ranges();for(const n of t)e+=n.max()-n.min()+1;return e}rangeOrder(e,t){let n=e,s=t;return arguments.length<2&&(s=n,n=this),n.min()<s.min()?-1:n.min()>s.min()?1:n.max()<s.max()?-1:s.max()>n.max()?1:0}}function m0(i){let e=i.length;for(;--e>=0;)i[e]=0}const Lbe=3,kbe=258,aK=29,Abe=256,Ebe=Abe+1+aK,lK=30,Ibe=512,Tbe=new Array((Ebe+2)*2);m0(Tbe);const Nbe=new Array(lK*2);m0(Nbe);const Mbe=new Array(Ibe);m0(Mbe);const Rbe=new Array(kbe-Lbe+1);m0(Rbe);const Obe=new Array(aK);m0(Obe);const Pbe=new Array(lK);m0(Pbe);const Fbe=(i,e,t,n)=>{let s=i&65535|0,r=i>>>16&65535|0,o=0;for(;t!==0;){o=t>2e3?2e3:t,t-=o;do s=s+e[n++]|0,r=r+s|0;while(--o);s%=65521,r%=65521}return s|r<<16|0};var KT=Fbe;const Bbe=()=>{let i,e=[];for(var t=0;t<256;t++){i=t;for(var n=0;n<8;n++)i=i&1?3988292384^i>>>1:i>>>1;e[t]=i}return e},Vbe=new Uint32Array(Bbe()),Wbe=(i,e,t,n)=>{const s=Vbe,r=n+t;i^=-1;for(let o=n;o<r;o++)i=i>>>8^s[(i^e[o])&255];return i^-1};var Ua=Wbe,ZT={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},EO={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const zbe=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var Hbe=function(i){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)zbe(t,n)&&(i[n]=t[n])}}return i},Ube=i=>{let e=0;for(let n=0,s=i.length;n<s;n++)e+=i[n].length;const t=new Uint8Array(e);for(let n=0,s=0,r=i.length;n<r;n++){let o=i[n];t.set(o,s),s+=o.length}return t},cK={assign:Hbe,flattenChunks:Ube};let hK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{hK=!1}const wv=new Uint8Array(256);for(let i=0;i<256;i++)wv[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;wv[254]=wv[254]=1;var $be=i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let e,t,n,s,r,o=i.length,a=0;for(s=0;s<o;s++)t=i.charCodeAt(s),(t&64512)===55296&&s+1<o&&(n=i.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),r=0,s=0;r<a;s++)t=i.charCodeAt(s),(t&64512)===55296&&s+1<o&&(n=i.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),t<128?e[r++]=t:t<2048?(e[r++]=192|t>>>6,e[r++]=128|t&63):t<65536?(e[r++]=224|t>>>12,e[r++]=128|t>>>6&63,e[r++]=128|t&63):(e[r++]=240|t>>>18,e[r++]=128|t>>>12&63,e[r++]=128|t>>>6&63,e[r++]=128|t&63);return e};const jbe=(i,e)=>{if(e<65534&&i.subarray&&hK)return String.fromCharCode.apply(null,i.length===e?i:i.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(i[n]);return t};var qbe=(i,e)=>{const t=e||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,e));let n,s;const r=new Array(t*2);for(s=0,n=0;n<t;){let o=i[n++];if(o<128){r[s++]=o;continue}let a=wv[o];if(a>4){r[s++]=65533,n+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&n<t;)o=o<<6|i[n++]&63,a--;if(a>1){r[s++]=65533;continue}o<65536?r[s++]=o:(o-=65536,r[s++]=55296|o>>10&1023,r[s++]=56320|o&1023)}return jbe(r,s)},Gbe=(i,e)=>{e=e||i.length,e>i.length&&(e=i.length);let t=e-1;for(;t>=0&&(i[t]&192)===128;)t--;return t<0||t===0?e:t+wv[i[t]]>e?t:e},YT={string2buf:$be,buf2string:qbe,utf8border:Gbe};function Kbe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Zbe=Kbe;const hy=16209,Ybe=16191;var Qbe=function(i,e){let t,n,s,r,o,a,l,c,h,u,d,f,g,p,m,v,b,w,y,x,k,S,L,D;const N=i.state;t=i.next_in,L=i.input,n=t+(i.avail_in-5),s=i.next_out,D=i.output,r=s-(e-i.avail_out),o=s+(i.avail_out-257),a=N.dmax,l=N.wsize,c=N.whave,h=N.wnext,u=N.window,d=N.hold,f=N.bits,g=N.lencode,p=N.distcode,m=(1<<N.lenbits)-1,v=(1<<N.distbits)-1;e:do{f<15&&(d+=L[t++]<<f,f+=8,d+=L[t++]<<f,f+=8),b=g[d&m];t:for(;;){if(w=b>>>24,d>>>=w,f-=w,w=b>>>16&255,w===0)D[s++]=b&65535;else if(w&16){y=b&65535,w&=15,w&&(f<w&&(d+=L[t++]<<f,f+=8),y+=d&(1<<w)-1,d>>>=w,f-=w),f<15&&(d+=L[t++]<<f,f+=8,d+=L[t++]<<f,f+=8),b=p[d&v];i:for(;;){if(w=b>>>24,d>>>=w,f-=w,w=b>>>16&255,w&16){if(x=b&65535,w&=15,f<w&&(d+=L[t++]<<f,f+=8,f<w&&(d+=L[t++]<<f,f+=8)),x+=d&(1<<w)-1,x>a){i.msg="invalid distance too far back",N.mode=hy;break e}if(d>>>=w,f-=w,w=s-r,x>w){if(w=x-w,w>c&&N.sane){i.msg="invalid distance too far back",N.mode=hy;break e}if(k=0,S=u,h===0){if(k+=l-w,w<y){y-=w;do D[s++]=u[k++];while(--w);k=s-x,S=D}}else if(h<w){if(k+=l+h-w,w-=h,w<y){y-=w;do D[s++]=u[k++];while(--w);if(k=0,h<y){w=h,y-=w;do D[s++]=u[k++];while(--w);k=s-x,S=D}}}else if(k+=h-w,w<y){y-=w;do D[s++]=u[k++];while(--w);k=s-x,S=D}for(;y>2;)D[s++]=S[k++],D[s++]=S[k++],D[s++]=S[k++],y-=3;y&&(D[s++]=S[k++],y>1&&(D[s++]=S[k++]))}else{k=s-x;do D[s++]=D[k++],D[s++]=D[k++],D[s++]=D[k++],y-=3;while(y>2);y&&(D[s++]=D[k++],y>1&&(D[s++]=D[k++]))}}else if(w&64){i.msg="invalid distance code",N.mode=hy;break e}else{b=p[(b&65535)+(d&(1<<w)-1)];continue i}break}}else if(w&64)if(w&32){N.mode=Ybe;break e}else{i.msg="invalid literal/length code",N.mode=hy;break e}else{b=g[(b&65535)+(d&(1<<w)-1)];continue t}break}}while(t<n&&s<o);y=f>>3,t-=y,f-=y<<3,d&=(1<<f)-1,i.next_in=t,i.next_out=s,i.avail_in=t<n?5+(n-t):5-(t-n),i.avail_out=s<o?257+(o-s):257-(s-o),N.hold=d,N.bits=f};const Tg=15,W8=852,z8=592,H8=0,sA=1,U8=2,Xbe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Jbe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),eve=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),tve=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),ive=(i,e,t,n,s,r,o,a)=>{const l=a.bits;let c=0,h=0,u=0,d=0,f=0,g=0,p=0,m=0,v=0,b=0,w,y,x,k,S,L=null,D;const N=new Uint16Array(Tg+1),T=new Uint16Array(Tg+1);let $=null,U,ee,ce;for(c=0;c<=Tg;c++)N[c]=0;for(h=0;h<n;h++)N[e[t+h]]++;for(f=l,d=Tg;d>=1&&N[d]===0;d--);if(f>d&&(f=d),d===0)return s[r++]=1<<24|64<<16|0,s[r++]=1<<24|64<<16|0,a.bits=1,0;for(u=1;u<d&&N[u]===0;u++);for(f<u&&(f=u),m=1,c=1;c<=Tg;c++)if(m<<=1,m-=N[c],m<0)return-1;if(m>0&&(i===H8||d!==1))return-1;for(T[1]=0,c=1;c<Tg;c++)T[c+1]=T[c]+N[c];for(h=0;h<n;h++)e[t+h]!==0&&(o[T[e[t+h]]++]=h);if(i===H8?(L=$=o,D=20):i===sA?(L=Xbe,$=Jbe,D=257):(L=eve,$=tve,D=0),b=0,h=0,c=u,S=r,g=f,p=0,x=-1,v=1<<f,k=v-1,i===sA&&v>W8||i===U8&&v>z8)return 1;for(;;){U=c-p,o[h]+1<D?(ee=0,ce=o[h]):o[h]>=D?(ee=$[o[h]-D],ce=L[o[h]-D]):(ee=32+64,ce=0),w=1<<c-p,y=1<<g,u=y;do y-=w,s[S+(b>>p)+y]=U<<24|ee<<16|ce|0;while(y!==0);for(w=1<<c-1;b&w;)w>>=1;if(w!==0?(b&=w-1,b+=w):b=0,h++,--N[c]===0){if(c===d)break;c=e[t+o[h]]}if(c>f&&(b&k)!==x){for(p===0&&(p=f),S+=u,g=c-p,m=1<<g;g+p<d&&(m-=N[g+p],!(m<=0));)g++,m<<=1;if(v+=1<<g,i===sA&&v>W8||i===U8&&v>z8)return 1;x=b&k,s[x]=f<<24|g<<16|S-r|0}}return b!==0&&(s[S+b]=c-p<<24|64<<16|0),a.bits=f,0};var ob=ive;const nve=0,uK=1,dK=2,{Z_FINISH:$8,Z_BLOCK:sve,Z_TREES:uy,Z_OK:bf,Z_STREAM_END:rve,Z_NEED_DICT:ove,Z_STREAM_ERROR:va,Z_DATA_ERROR:fK,Z_MEM_ERROR:gK,Z_BUF_ERROR:ave,Z_DEFLATED:j8}=EO,OL=16180,q8=16181,G8=16182,K8=16183,Z8=16184,Y8=16185,Q8=16186,X8=16187,J8=16188,e9=16189,ex=16190,Ql=16191,rA=16192,t9=16193,oA=16194,i9=16195,n9=16196,s9=16197,r9=16198,dy=16199,fy=16200,o9=16201,a9=16202,l9=16203,c9=16204,h9=16205,aA=16206,u9=16207,d9=16208,Ui=16209,pK=16210,mK=16211,lve=852,cve=592,hve=15,uve=hve,f9=i=>(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24);function dve(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Zf=i=>{if(!i)return 1;const e=i.state;return!e||e.strm!==i||e.mode<OL||e.mode>mK?1:0},_K=i=>{if(Zf(i))return va;const e=i.state;return i.total_in=i.total_out=e.total=0,i.msg="",e.wrap&&(i.adler=e.wrap&1),e.mode=OL,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(lve),e.distcode=e.distdyn=new Int32Array(cve),e.sane=1,e.back=-1,bf},bK=i=>{if(Zf(i))return va;const e=i.state;return e.wsize=0,e.whave=0,e.wnext=0,_K(i)},vK=(i,e)=>{let t;if(Zf(i))return va;const n=i.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?va:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,bK(i))},wK=(i,e)=>{if(!i)return va;const t=new dve;i.state=t,t.strm=i,t.window=null,t.mode=OL;const n=vK(i,e);return n!==bf&&(i.state=null),n},fve=i=>wK(i,uve);let g9=!0,lA,cA;const gve=i=>{if(g9){lA=new Int32Array(512),cA=new Int32Array(32);let e=0;for(;e<144;)i.lens[e++]=8;for(;e<256;)i.lens[e++]=9;for(;e<280;)i.lens[e++]=7;for(;e<288;)i.lens[e++]=8;for(ob(uK,i.lens,0,288,lA,0,i.work,{bits:9}),e=0;e<32;)i.lens[e++]=5;ob(dK,i.lens,0,32,cA,0,i.work,{bits:5}),g9=!1}i.lencode=lA,i.lenbits=9,i.distcode=cA,i.distbits=5},yK=(i,e,t,n)=>{let s;const r=i.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),n>=r.wsize?(r.window.set(e.subarray(t-r.wsize,t),0),r.wnext=0,r.whave=r.wsize):(s=r.wsize-r.wnext,s>n&&(s=n),r.window.set(e.subarray(t-n,t-n+s),r.wnext),n-=s,n?(r.window.set(e.subarray(t-n,t),0),r.wnext=n,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0},pve=(i,e)=>{let t,n,s,r,o,a,l,c,h,u,d,f,g,p,m=0,v,b,w,y,x,k,S,L;const D=new Uint8Array(4);let N,T;const $=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Zf(i)||!i.output||!i.input&&i.avail_in!==0)return va;t=i.state,t.mode===Ql&&(t.mode=rA),o=i.next_out,s=i.output,l=i.avail_out,r=i.next_in,n=i.input,a=i.avail_in,c=t.hold,h=t.bits,u=a,d=l,L=bf;e:for(;;)switch(t.mode){case OL:if(t.wrap===0){t.mode=rA;break}for(;h<16;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(t.wrap&2&&c===35615){t.wbits===0&&(t.wbits=15),t.check=0,D[0]=c&255,D[1]=c>>>8&255,t.check=Ua(t.check,D,2,0),c=0,h=0,t.mode=q8;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((c&255)<<8)+(c>>8))%31){i.msg="incorrect header check",t.mode=Ui;break}if((c&15)!==j8){i.msg="unknown compression method",t.mode=Ui;break}if(c>>>=4,h-=4,S=(c&15)+8,t.wbits===0&&(t.wbits=S),S>15||S>t.wbits){i.msg="invalid window size",t.mode=Ui;break}t.dmax=1<<t.wbits,t.flags=0,i.adler=t.check=1,t.mode=c&512?e9:Ql,c=0,h=0;break;case q8:for(;h<16;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(t.flags=c,(t.flags&255)!==j8){i.msg="unknown compression method",t.mode=Ui;break}if(t.flags&57344){i.msg="unknown header flags set",t.mode=Ui;break}t.head&&(t.head.text=c>>8&1),t.flags&512&&t.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,t.check=Ua(t.check,D,2,0)),c=0,h=0,t.mode=G8;case G8:for(;h<32;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.head&&(t.head.time=c),t.flags&512&&t.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,D[2]=c>>>16&255,D[3]=c>>>24&255,t.check=Ua(t.check,D,4,0)),c=0,h=0,t.mode=K8;case K8:for(;h<16;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.head&&(t.head.xflags=c&255,t.head.os=c>>8),t.flags&512&&t.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,t.check=Ua(t.check,D,2,0)),c=0,h=0,t.mode=Z8;case Z8:if(t.flags&1024){for(;h<16;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.length=c,t.head&&(t.head.extra_len=c),t.flags&512&&t.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,t.check=Ua(t.check,D,2,0)),c=0,h=0}else t.head&&(t.head.extra=null);t.mode=Y8;case Y8:if(t.flags&1024&&(f=t.length,f>a&&(f=a),f&&(t.head&&(S=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(r,r+f),S)),t.flags&512&&t.wrap&4&&(t.check=Ua(t.check,n,f,r)),a-=f,r+=f,t.length-=f),t.length))break e;t.length=0,t.mode=Q8;case Q8:if(t.flags&2048){if(a===0)break e;f=0;do S=n[r+f++],t.head&&S&&t.length<65536&&(t.head.name+=String.fromCharCode(S));while(S&&f<a);if(t.flags&512&&t.wrap&4&&(t.check=Ua(t.check,n,f,r)),a-=f,r+=f,S)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=X8;case X8:if(t.flags&4096){if(a===0)break e;f=0;do S=n[r+f++],t.head&&S&&t.length<65536&&(t.head.comment+=String.fromCharCode(S));while(S&&f<a);if(t.flags&512&&t.wrap&4&&(t.check=Ua(t.check,n,f,r)),a-=f,r+=f,S)break e}else t.head&&(t.head.comment=null);t.mode=J8;case J8:if(t.flags&512){for(;h<16;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(t.wrap&4&&c!==(t.check&65535)){i.msg="header crc mismatch",t.mode=Ui;break}c=0,h=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),i.adler=t.check=0,t.mode=Ql;break;case e9:for(;h<32;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}i.adler=t.check=f9(c),c=0,h=0,t.mode=ex;case ex:if(t.havedict===0)return i.next_out=o,i.avail_out=l,i.next_in=r,i.avail_in=a,t.hold=c,t.bits=h,ove;i.adler=t.check=1,t.mode=Ql;case Ql:if(e===sve||e===uy)break e;case rA:if(t.last){c>>>=h&7,h-=h&7,t.mode=aA;break}for(;h<3;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}switch(t.last=c&1,c>>>=1,h-=1,c&3){case 0:t.mode=t9;break;case 1:if(gve(t),t.mode=dy,e===uy){c>>>=2,h-=2;break e}break;case 2:t.mode=n9;break;case 3:i.msg="invalid block type",t.mode=Ui}c>>>=2,h-=2;break;case t9:for(c>>>=h&7,h-=h&7;h<32;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if((c&65535)!==(c>>>16^65535)){i.msg="invalid stored block lengths",t.mode=Ui;break}if(t.length=c&65535,c=0,h=0,t.mode=oA,e===uy)break e;case oA:t.mode=i9;case i9:if(f=t.length,f){if(f>a&&(f=a),f>l&&(f=l),f===0)break e;s.set(n.subarray(r,r+f),o),a-=f,r+=f,l-=f,o+=f,t.length-=f;break}t.mode=Ql;break;case n9:for(;h<14;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(t.nlen=(c&31)+257,c>>>=5,h-=5,t.ndist=(c&31)+1,c>>>=5,h-=5,t.ncode=(c&15)+4,c>>>=4,h-=4,t.nlen>286||t.ndist>30){i.msg="too many length or distance symbols",t.mode=Ui;break}t.have=0,t.mode=s9;case s9:for(;t.have<t.ncode;){for(;h<3;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.lens[$[t.have++]]=c&7,c>>>=3,h-=3}for(;t.have<19;)t.lens[$[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,N={bits:t.lenbits},L=ob(nve,t.lens,0,19,t.lencode,0,t.work,N),t.lenbits=N.bits,L){i.msg="invalid code lengths set",t.mode=Ui;break}t.have=0,t.mode=r9;case r9:for(;t.have<t.nlen+t.ndist;){for(;m=t.lencode[c&(1<<t.lenbits)-1],v=m>>>24,b=m>>>16&255,w=m&65535,!(v<=h);){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(w<16)c>>>=v,h-=v,t.lens[t.have++]=w;else{if(w===16){for(T=v+2;h<T;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(c>>>=v,h-=v,t.have===0){i.msg="invalid bit length repeat",t.mode=Ui;break}S=t.lens[t.have-1],f=3+(c&3),c>>>=2,h-=2}else if(w===17){for(T=v+3;h<T;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}c>>>=v,h-=v,S=0,f=3+(c&7),c>>>=3,h-=3}else{for(T=v+7;h<T;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}c>>>=v,h-=v,S=0,f=11+(c&127),c>>>=7,h-=7}if(t.have+f>t.nlen+t.ndist){i.msg="invalid bit length repeat",t.mode=Ui;break}for(;f--;)t.lens[t.have++]=S}}if(t.mode===Ui)break;if(t.lens[256]===0){i.msg="invalid code -- missing end-of-block",t.mode=Ui;break}if(t.lenbits=9,N={bits:t.lenbits},L=ob(uK,t.lens,0,t.nlen,t.lencode,0,t.work,N),t.lenbits=N.bits,L){i.msg="invalid literal/lengths set",t.mode=Ui;break}if(t.distbits=6,t.distcode=t.distdyn,N={bits:t.distbits},L=ob(dK,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,N),t.distbits=N.bits,L){i.msg="invalid distances set",t.mode=Ui;break}if(t.mode=dy,e===uy)break e;case dy:t.mode=fy;case fy:if(a>=6&&l>=258){i.next_out=o,i.avail_out=l,i.next_in=r,i.avail_in=a,t.hold=c,t.bits=h,Qbe(i,d),o=i.next_out,s=i.output,l=i.avail_out,r=i.next_in,n=i.input,a=i.avail_in,c=t.hold,h=t.bits,t.mode===Ql&&(t.back=-1);break}for(t.back=0;m=t.lencode[c&(1<<t.lenbits)-1],v=m>>>24,b=m>>>16&255,w=m&65535,!(v<=h);){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(b&&!(b&240)){for(y=v,x=b,k=w;m=t.lencode[k+((c&(1<<y+x)-1)>>y)],v=m>>>24,b=m>>>16&255,w=m&65535,!(y+v<=h);){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}c>>>=y,h-=y,t.back+=y}if(c>>>=v,h-=v,t.back+=v,t.length=w,b===0){t.mode=h9;break}if(b&32){t.back=-1,t.mode=Ql;break}if(b&64){i.msg="invalid literal/length code",t.mode=Ui;break}t.extra=b&15,t.mode=o9;case o9:if(t.extra){for(T=t.extra;h<T;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.length+=c&(1<<t.extra)-1,c>>>=t.extra,h-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=a9;case a9:for(;m=t.distcode[c&(1<<t.distbits)-1],v=m>>>24,b=m>>>16&255,w=m&65535,!(v<=h);){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(!(b&240)){for(y=v,x=b,k=w;m=t.distcode[k+((c&(1<<y+x)-1)>>y)],v=m>>>24,b=m>>>16&255,w=m&65535,!(y+v<=h);){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}c>>>=y,h-=y,t.back+=y}if(c>>>=v,h-=v,t.back+=v,b&64){i.msg="invalid distance code",t.mode=Ui;break}t.offset=w,t.extra=b&15,t.mode=l9;case l9:if(t.extra){for(T=t.extra;h<T;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.offset+=c&(1<<t.extra)-1,c>>>=t.extra,h-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){i.msg="invalid distance too far back",t.mode=Ui;break}t.mode=c9;case c9:if(l===0)break e;if(f=d-l,t.offset>f){if(f=t.offset-f,f>t.whave&&t.sane){i.msg="invalid distance too far back",t.mode=Ui;break}f>t.wnext?(f-=t.wnext,g=t.wsize-f):g=t.wnext-f,f>t.length&&(f=t.length),p=t.window}else p=s,g=o-t.offset,f=t.length;f>l&&(f=l),l-=f,t.length-=f;do s[o++]=p[g++];while(--f);t.length===0&&(t.mode=fy);break;case h9:if(l===0)break e;s[o++]=t.length,l--,t.mode=fy;break;case aA:if(t.wrap){for(;h<32;){if(a===0)break e;a--,c|=n[r++]<<h,h+=8}if(d-=l,i.total_out+=d,t.total+=d,t.wrap&4&&d&&(i.adler=t.check=t.flags?Ua(t.check,s,d,o-d):KT(t.check,s,d,o-d)),d=l,t.wrap&4&&(t.flags?c:f9(c))!==t.check){i.msg="incorrect data check",t.mode=Ui;break}c=0,h=0}t.mode=u9;case u9:if(t.wrap&&t.flags){for(;h<32;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(t.wrap&4&&c!==(t.total&4294967295)){i.msg="incorrect length check",t.mode=Ui;break}c=0,h=0}t.mode=d9;case d9:L=rve;break e;case Ui:L=fK;break e;case pK:return gK;case mK:default:return va}return i.next_out=o,i.avail_out=l,i.next_in=r,i.avail_in=a,t.hold=c,t.bits=h,(t.wsize||d!==i.avail_out&&t.mode<Ui&&(t.mode<aA||e!==$8))&&yK(i,i.output,i.next_out,d-i.avail_out),u-=i.avail_in,d-=i.avail_out,i.total_in+=u,i.total_out+=d,t.total+=d,t.wrap&4&&d&&(i.adler=t.check=t.flags?Ua(t.check,s,d,i.next_out-d):KT(t.check,s,d,i.next_out-d)),i.data_type=t.bits+(t.last?64:0)+(t.mode===Ql?128:0)+(t.mode===dy||t.mode===oA?256:0),(u===0&&d===0||e===$8)&&L===bf&&(L=ave),L},mve=i=>{if(Zf(i))return va;let e=i.state;return e.window&&(e.window=null),i.state=null,bf},_ve=(i,e)=>{if(Zf(i))return va;const t=i.state;return t.wrap&2?(t.head=e,e.done=!1,bf):va},bve=(i,e)=>{const t=e.length;let n,s,r;return Zf(i)||(n=i.state,n.wrap!==0&&n.mode!==ex)?va:n.mode===ex&&(s=1,s=KT(s,e,t,0),s!==n.check)?fK:(r=yK(i,e,t,t),r?(n.mode=pK,gK):(n.havedict=1,bf))};var vve=bK,wve=vK,yve=_K,Cve=fve,Sve=wK,xve=pve,Dve=mve,Lve=_ve,kve=bve,Ave="pako inflate (from Nodeca project)",dc={inflateReset:vve,inflateReset2:wve,inflateResetKeep:yve,inflateInit:Cve,inflateInit2:Sve,inflate:xve,inflateEnd:Dve,inflateGetHeader:Lve,inflateSetDictionary:kve,inflateInfo:Ave};function Eve(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Ive=Eve;const CK=Object.prototype.toString,{Z_NO_FLUSH:Tve,Z_FINISH:Nve,Z_OK:yv,Z_STREAM_END:hA,Z_NEED_DICT:uA,Z_STREAM_ERROR:Mve,Z_DATA_ERROR:p9,Z_MEM_ERROR:Rve}=EO;function pw(i){this.options=cK.assign({chunkSize:1024*64,windowBits:15,to:""},i||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(i&&i.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zbe,this.strm.avail_out=0;let t=dc.inflateInit2(this.strm,e.windowBits);if(t!==yv)throw new Error(ZT[t]);if(this.header=new Ive,dc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=YT.string2buf(e.dictionary):CK.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=dc.inflateSetDictionary(this.strm,e.dictionary),t!==yv)))throw new Error(ZT[t])}pw.prototype.push=function(i,e){const t=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let r,o,a;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?Nve:Tve,CK.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),r=dc.inflate(t,o),r===uA&&s&&(r=dc.inflateSetDictionary(t,s),r===yv?r=dc.inflate(t,o):r===p9&&(r=uA));t.avail_in>0&&r===hA&&t.state.wrap>0&&i[t.next_in]!==0;)dc.inflateReset(t),r=dc.inflate(t,o);switch(r){case Mve:case p9:case uA:case Rve:return this.onEnd(r),this.ended=!0,!1}if(a=t.avail_out,t.next_out&&(t.avail_out===0||r===hA))if(this.options.to==="string"){let l=YT.utf8border(t.output,t.next_out),c=t.next_out-l,h=YT.buf2string(t.output,l);t.next_out=c,t.avail_out=n-c,c&&t.output.set(t.output.subarray(l,l+c),0),this.onData(h)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(r===yv&&a===0)){if(r===hA)return r=dc.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};pw.prototype.onData=function(i){this.chunks.push(i)};pw.prototype.onEnd=function(i){i===yv&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=cK.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function IO(i,e){const t=new pw(e);if(t.push(i),t.err)throw t.msg||ZT[t.err];return t.result}function Ove(i,e){return e=e||{},e.raw=!0,IO(i,e)}var Pve=pw,Fve=IO,Bve=Ove,Vve=IO,Wve=EO,zve={Inflate:Pve,inflate:Fve,inflateRaw:Bve,ungzip:Vve,constants:Wve};const{Inflate:KWe,inflate:ZWe,inflateRaw:Hve,ungzip:YWe}=zve;var Uve=Hve;function $ve(i){return Uve(i.subarray(2))}class jve extends Error{constructor(e){super(e),this.code="ERR_ABORTED"}}function qve(i){i.sort((s,r)=>Number(s.offset)-Number(r.offset));const e=[];let t,n;for(const s of i)t&&n&&Number(s.offset)-n<=2e3?(t.length=BigInt(Number(t.length)+Number(s.length)-n+Number(s.offset)),t.blocks.push(s)):e.push(t={blocks:[s],length:s.length,offset:s.offset}),n=Number(t.offset)+Number(t.length);return e}function gy(i){if(i&&i.aborted)if(typeof DOMException>"u"){const e=new jve("aborted");throw e.code="ERR_ABORTED",e}else throw new DOMException("aborted","AbortError")}const Gve=1,Kve=2,Zve=3;function dA(i,e,t,n){return i<n&&e>=t}function Yve(i){const e=i?"big":"little",t=new Ct().endianess(e).uint32("chromId").uint32("start").uint32("end").uint32("validCnt").floatle("minScore").floatle("maxScore").floatle("sumData").floatle("sumSqData").saveOffset("offset"),n=new Ct().endianess(e).uint8("isLeaf").skip(1).uint16("cnt").choice({tag:"isLeaf",choices:{1:new Ct().endianess(e).array("blocksToFetch",{length:"cnt",type:new Ct().endianess(e).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").uint64("blockSize").saveOffset("offset")}),0:new Ct().array("recurOffsets",{length:"cnt",type:new Ct().endianess(e).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").saveOffset("offset")})}}),s=new Ct().endianess(e).uint32("chromId").int32("start").int32("end").string("rest",{zeroTerminated:!0}).saveOffset("offset");return{bigWigParser:new Ct().endianess(e).skip(4).int32("blockStart").skip(4).uint32("itemStep").uint32("itemSpan").uint8("blockType").skip(1).uint16("itemCount").choice({tag:"blockType",choices:{[Zve]:new Ct().array("items",{length:"itemCount",type:new Ct().floatle("score")}),[Kve]:new Ct().array("items",{length:"itemCount",type:new Ct().endianess(e).int32("start").floatle("score")}),[Gve]:new Ct().array("items",{length:"itemCount",type:new Ct().endianess(e).int32("start").int32("end").floatle("score")})}}),bigBedParser:s,summaryParser:t,leafParser:n}}class SK{constructor(e,t,n,s,r,o){if(this.bbi=e,this.refsByName=t,this.cirTreeOffset=n,this.isBigEndian=s,this.isCompressed=r,this.blockType=o,this.featureCache=new AO({cache:new oK({maxSize:1e3}),fill:async(l,c)=>{const h=Number(l.length),u=Number(l.offset),{buffer:d}=await this.bbi.read(Vr.Buffer.alloc(h),0,h,u,{signal:c});return d}}),!(n>=0))throw new Error("invalid cirTreeOffset!");const a=Yve(s);this.leafParser=a.leafParser,this.bigBedParser=a.bigBedParser}async readWigData(e,t,n,s,r){try{const{refsByName:o,bbi:a,cirTreeOffset:l,isBigEndian:c}=this,h=o[e];h===void 0&&s.complete();const u={chrId:h,start:t,end:n};this.cirTreePromise||(this.cirTreePromise=a.read(Vr.Buffer.alloc(48),0,48,Number(l),r));const{buffer:d}=await this.cirTreePromise,f=c?d.readUInt32BE(4):d.readUInt32LE(4);let g=[],p=0;const m=(y,x,k)=>{try{const S=y.subarray(x),L=this.leafParser.parse(S);if(L.blocksToFetch&&(g=g.concat(L.blocksToFetch.filter(D=>v(D)).map(D=>({offset:D.blockOffset,length:D.blockSize})))),L.recurOffsets){const D=L.recurOffsets.filter(N=>v(N)).map(N=>Number(N.blockOffset));D.length>0&&w(D,k+1)}}catch(S){s.error(S)}},v=y=>{const{startChrom:x,startBase:k,endChrom:S,endBase:L}=y;return(x<h||x===h&&k<=n)&&(S>h||S===h&&L>=t)},b=async(y,x,k)=>{try{const S=x.max()-x.min(),L=x.min(),D=await this.featureCache.get(`${S}_${L}`,{length:S,offset:L},r==null?void 0:r.signal);for(const N of y)x.contains(N)&&(m(D,N-L,k),p-=1,p===0&&this.readFeatures(s,g,{...r,request:u}))}catch(S){s.error(S)}},w=(y,x)=>{try{p+=y.length;const k=4+Number(f)*32;let S=new Eh(y[0],y[0]+k);for(let L=1;L<y.length;L+=1){const D=new Eh(y[L],y[L]+k);S=S.union(D)}S.getRanges().map(L=>b(y,L,x))}catch(k){s.error(k)}};return w([Number(l)+48],1)}catch(o){s.error(o)}}parseSummaryBlock(e,t,n){const s=[];let r=t;const o=new DataView(e.buffer,e.byteOffset,e.length);for(;r<e.byteLength;){const a=o.getUint32(r,!0);r+=4;const l=o.getUint32(r,!0);r+=4;const c=o.getUint32(r,!0);r+=4;const h=o.getUint32(r,!0);r+=4;const u=o.getFloat32(r,!0);r+=4;const d=o.getFloat32(r,!0);r+=4;const f=o.getFloat32(r,!0);r+=4,r+=4,(!n||a===n.chrId&&dA(l,c,n.start,n.end))&&s.push({start:l,end:c,maxScore:d,minScore:u,summary:!0,score:f/(h||1)})}return s}parseBigBedBlock(e,t,n,s){const r=[];let o=t;for(;o<e.byteLength;){const a=this.bigBedParser.parse(e.subarray(o));r.push({...a,uniqueId:`bb-${n+o}`}),o+=a.offset}return s?r.filter(a=>dA(a.start,a.end,s.start,s.end)):r}parseBigWigBlock(e,t,n){const s=e.subarray(t),r=new DataView(s.buffer,s.byteOffset,s.length);let o=0;o+=4;const a=r.getInt32(o,!0);o+=8;const l=r.getUint32(o,!0);o+=4;const c=r.getUint32(o,!0);o+=4;const h=r.getUint8(o);o+=2;const u=r.getUint16(o,!0);o+=2;const d=new Array(u);switch(h){case 1:{for(let f=0;f<u;f++){const g=r.getInt32(o,!0);o+=4;const p=r.getInt32(o,!0);o+=4;const m=r.getFloat32(o,!0);o+=4,d[f]={start:g,end:p,score:m}}break}case 2:{for(let f=0;f<u;f++){const g=r.getInt32(o,!0);o+=4;const p=r.getFloat32(o,!0);o+=4,d[f]={score:p,start:g,end:g+c}}break}case 3:{for(let f=0;f<u;f++){const g=r.getFloat32(o,!0);o+=4;const p=a+f*l;d[f]={score:g,start:p,end:p+c}}break}}return n?d.filter(f=>dA(f.start,f.end,n.start,n.end)):d}async readFeatures(e,t,n={}){try{const{blockType:s,isCompressed:r}=this,{signal:o,request:a}=n,l=qve(t);gy(o),await Promise.all(l.map(async c=>{gy(o);const{length:h,offset:u}=c,d=await this.featureCache.get(`${h}_${u}`,c,o);for(const f of c.blocks){gy(o);let g=Number(f.offset)-Number(c.offset),p=d;switch(r&&(p=$ve(d.subarray(g)),g=0),gy(o),s){case"summary":{e.next(this.parseSummaryBlock(p,g,a));break}case"bigwig":{e.next(this.parseBigWigBlock(p,g,a));break}case"bigbed":{e.next(this.parseBigBedBlock(p,g,Number(f.offset)*(1<<8),a));break}default:console.warn(`Don't know what to do with ${s}`)}}})),e.complete()}catch(s){e.error(s)}}}var QT=function(i,e){return QT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])},QT(i,e)};function TO(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");QT(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Qve(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}function xK(i,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,s,r,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(h){return l([c,h])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(r=c[0]&2?s.return:c[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,c[1])).done)return r;switch(s=0,r&&(c=[c[0]&2,r.value]),c[0]){case 0:case 1:r=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,s=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){t.label=c[1];break}if(c[0]===6&&t.label<r[1]){t.label=r[1],r=c;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(c);break}r[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(i,t)}catch(h){c=[6,h],s=0}finally{n=r=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Cv(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function XT(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var n=t.call(i),s,r=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)r.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return r}function JT(i,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,r;n<s;n++)(r||!(n in e))&&(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return i.concat(r||Array.prototype.slice.call(e))}function Tp(i){return this instanceof Tp?(this.v=i,this):new Tp(i)}function Xve(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),s,r=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(d){n[d]&&(s[d]=function(f){return new Promise(function(g,p){r.push([d,f,g,p])>1||a(d,f)})})}function a(d,f){try{l(n[d](f))}catch(g){u(r[0][3],g)}}function l(d){d.value instanceof Tp?Promise.resolve(d.value.v).then(c,h):u(r[0][2],d)}function c(d){a("next",d)}function h(d){a("throw",d)}function u(d,f){d(f),r.shift(),r.length&&a(r[0][0],r[0][1])}}function Jve(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Cv=="function"?Cv(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=i[r]&&function(o){return new Promise(function(a,l){o=i[r](o),s(a,l,o.done,o.value)})}}function s(r,o,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},o)}}function Mn(i){return typeof i=="function"}function DK(i){var e=function(n){Error.call(n),n.stack=new Error().stack},t=i(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var fA=DK(function(i){return function(e){i(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(t,n){return n+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function m9(i,e){if(i){var t=i.indexOf(e);0<=t&&i.splice(t,1)}}var NO=function(){function i(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return i.prototype.unsubscribe=function(){var e,t,n,s,r;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=Cv(o),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(p){e={error:p}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var h=this.initialTeardown;if(Mn(h))try{h()}catch(p){r=p instanceof fA?p.errors:[p]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var d=Cv(u),f=d.next();!f.done;f=d.next()){var g=f.value;try{_9(g)}catch(p){r=r??[],p instanceof fA?r=JT(JT([],XT(r)),XT(p.errors)):r.push(p)}}}catch(p){n={error:p}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(n)throw n.error}}}if(r)throw new fA(r)}},i.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)_9(e);else{if(e instanceof i){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},i.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},i.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},i.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&m9(t,e)},i.prototype.remove=function(e){var t=this._finalizers;t&&m9(t,e),e instanceof i&&e._removeParent(this)},i.EMPTY=function(){var e=new i;return e.closed=!0,e}(),i}();NO.EMPTY;function LK(i){return i instanceof NO||i&&"closed"in i&&Mn(i.remove)&&Mn(i.add)&&Mn(i.unsubscribe)}function _9(i){Mn(i)?i():i.unsubscribe()}var kK={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},e1e={setTimeout:function(i,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return setTimeout.apply(void 0,JT([i,e],XT(t)))},clearTimeout:function(i){return clearTimeout(i)},delegate:void 0};function AK(i){e1e.setTimeout(function(){throw i})}function b9(){}function t1e(i){i()}var MO=function(i){TO(e,i);function e(t){var n=i.call(this)||this;return n.isStopped=!1,t?(n.destination=t,LK(t)&&t.add(n)):n.destination=r1e,n}return e.create=function(t,n,s){return new tx(t,n,s)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(NO),i1e=Function.prototype.bind;function gA(i,e){return i1e.call(i,e)}var n1e=function(){function i(e){this.partialObserver=e}return i.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){py(n)}},i.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){py(n)}else py(e)},i.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){py(t)}},i}(),tx=function(i){TO(e,i);function e(t,n,s){var r=i.call(this)||this,o;if(Mn(t)||!t)o={next:t??void 0,error:n??void 0,complete:s??void 0};else{var a;r&&kK.useDeprecatedNextContext?(a=Object.create(t),a.unsubscribe=function(){return r.unsubscribe()},o={next:t.next&&gA(t.next,a),error:t.error&&gA(t.error,a),complete:t.complete&&gA(t.complete,a)}):o=t}return r.destination=new n1e(o),r}return e}(MO);function py(i){AK(i)}function s1e(i){throw i}var r1e={closed:!0,next:b9,error:s1e,complete:b9},RO=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function EK(i){return i}function o1e(i){return i.length===0?EK:i.length===1?i[0]:function(e){return i.reduce(function(t,n){return n(t)},e)}}var Po=function(){function i(e){e&&(this._subscribe=e)}return i.prototype.lift=function(e){var t=new i;return t.source=this,t.operator=e,t},i.prototype.subscribe=function(e,t,n){var s=this,r=l1e(e)?e:new tx(e,t,n);return t1e(function(){var o=s,a=o.operator,l=o.source;r.add(a?a.call(r,l):l?s._subscribe(r):s._trySubscribe(r))}),r},i.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},i.prototype.forEach=function(e,t){var n=this;return t=v9(t),new t(function(s,r){var o=new tx({next:function(a){try{e(a)}catch(l){r(l),o.unsubscribe()}},error:r,complete:s});n.subscribe(o)})},i.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},i.prototype[RO]=function(){return this},i.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o1e(e)(this)},i.prototype.toPromise=function(e){var t=this;return e=v9(e),new e(function(n,s){var r;t.subscribe(function(o){return r=o},function(o){return s(o)},function(){return n(r)})})},i.create=function(e){return new i(e)},i}();function v9(i){var e;return(e=i??kK.Promise)!==null&&e!==void 0?e:Promise}function a1e(i){return i&&Mn(i.next)&&Mn(i.error)&&Mn(i.complete)}function l1e(i){return i&&i instanceof MO||a1e(i)&&LK(i)}function c1e(i){return Mn(i==null?void 0:i.lift)}function _0(i){return function(e){if(c1e(e))return e.lift(function(t){try{return i(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Sv(i,e,t,n,s){return new h1e(i,e,t,n,s)}var h1e=function(i){TO(e,i);function e(t,n,s,r,o,a){var l=i.call(this,t)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=n?function(c){try{n(c)}catch(h){t.error(h)}}:i.prototype._next,l._error=r?function(c){try{r(c)}catch(h){t.error(h)}finally{this.unsubscribe()}}:i.prototype._error,l._complete=s?function(){try{s()}catch(c){t.error(c)}finally{this.unsubscribe()}}:i.prototype._complete,l}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;i.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(MO),u1e=new Po(function(i){return i.complete()});function d1e(i){return i&&Mn(i.schedule)}function IK(i){return i[i.length-1]}function f1e(i){return d1e(IK(i))?i.pop():void 0}function g1e(i,e){return typeof IK(i)=="number"?i.pop():e}var TK=function(i){return i&&typeof i.length=="number"&&typeof i!="function"};function NK(i){return Mn(i==null?void 0:i.then)}function MK(i){return Mn(i[RO])}function RK(i){return Symbol.asyncIterator&&Mn(i==null?void 0:i[Symbol.asyncIterator])}function OK(i){return new TypeError("You provided "+(i!==null&&typeof i=="object"?"an invalid object":"'"+i+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function p1e(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var PK=p1e();function FK(i){return Mn(i==null?void 0:i[PK])}function BK(i){return Xve(this,arguments,function(){var e,t,n,s;return xK(this,function(r){switch(r.label){case 0:e=i.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,Tp(e.read())];case 3:return t=r.sent(),n=t.value,s=t.done,s?[4,Tp(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return[4,Tp(n)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function VK(i){return Mn(i==null?void 0:i.getReader)}function b0(i){if(i instanceof Po)return i;if(i!=null){if(MK(i))return m1e(i);if(TK(i))return _1e(i);if(NK(i))return b1e(i);if(RK(i))return WK(i);if(FK(i))return v1e(i);if(VK(i))return w1e(i)}throw OK(i)}function m1e(i){return new Po(function(e){var t=i[RO]();if(Mn(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function _1e(i){return new Po(function(e){for(var t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()})}function b1e(i){return new Po(function(e){i.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,AK)})}function v1e(i){return new Po(function(e){var t,n;try{for(var s=Cv(i),r=s.next();!r.done;r=s.next()){var o=r.value;if(e.next(o),e.closed)return}}catch(a){t={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}e.complete()})}function WK(i){return new Po(function(e){y1e(i,e).catch(function(t){return e.error(t)})})}function w1e(i){return WK(BK(i))}function y1e(i,e){var t,n,s,r;return Qve(this,void 0,void 0,function(){var o,a;return xK(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),t=Jve(i),l.label=1;case 1:return[4,t.next()];case 2:if(n=l.sent(),!!n.done)return[3,4];if(o=n.value,e.next(o),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),s={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),n&&!n.done&&(r=t.return)?[4,r.call(t)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Gh(i,e,t,n,s){n===void 0&&(n=0),s===void 0&&(s=!1);var r=e.schedule(function(){t(),s?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(r),!s)return r}function zK(i,e){return e===void 0&&(e=0),_0(function(t,n){t.subscribe(Sv(n,function(s){return Gh(n,i,function(){return n.next(s)},e)},function(){return Gh(n,i,function(){return n.complete()},e)},function(s){return Gh(n,i,function(){return n.error(s)},e)}))})}function HK(i,e){return e===void 0&&(e=0),_0(function(t,n){n.add(i.schedule(function(){return t.subscribe(n)},e))})}function C1e(i,e){return b0(i).pipe(HK(e),zK(e))}function S1e(i,e){return b0(i).pipe(HK(e),zK(e))}function x1e(i,e){return new Po(function(t){var n=0;return e.schedule(function(){n===i.length?t.complete():(t.next(i[n++]),t.closed||this.schedule())})})}function D1e(i,e){return new Po(function(t){var n;return Gh(t,e,function(){n=i[PK](),Gh(t,e,function(){var s,r,o;try{s=n.next(),r=s.value,o=s.done}catch(a){t.error(a);return}o?t.complete():t.next(r)},0,!0)}),function(){return Mn(n==null?void 0:n.return)&&n.return()}})}function UK(i,e){if(!i)throw new Error("Iterable cannot be null");return new Po(function(t){Gh(t,e,function(){var n=i[Symbol.asyncIterator]();Gh(t,e,function(){n.next().then(function(s){s.done?t.complete():t.next(s.value)})},0,!0)})})}function L1e(i,e){return UK(BK(i),e)}function k1e(i,e){if(i!=null){if(MK(i))return C1e(i,e);if(TK(i))return x1e(i,e);if(NK(i))return S1e(i,e);if(RK(i))return UK(i,e);if(FK(i))return D1e(i,e);if(VK(i))return L1e(i,e)}throw OK(i)}function A1e(i,e){return e?k1e(i,e):b0(i)}var E1e=DK(function(i){return function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}});function $K(i,e){var t=typeof e=="object";return new Promise(function(n,s){var r=new tx({next:function(o){n(o),r.unsubscribe()},error:s,complete:function(){t?n(e.defaultValue):s(new E1e)}});i.subscribe(r)})}function jK(i,e){return _0(function(t,n){var s=0;t.subscribe(Sv(n,function(r){n.next(i.call(e,r,s++))}))})}function I1e(i,e,t,n,s,r,o,a){var l=[],c=0,h=0,u=!1,d=function(){u&&!l.length&&!c&&e.complete()},f=function(p){return c<n?g(p):l.push(p)},g=function(p){r&&e.next(p),c++;var m=!1;b0(t(p,h++)).subscribe(Sv(e,function(v){s==null||s(v),r?f(v):e.next(v)},function(){m=!0},void 0,function(){if(m)try{c--;for(var v=function(){var b=l.shift();o?Gh(e,o,function(){return g(b)}):g(b)};l.length&&c<n;)v();d()}catch(b){e.error(b)}}))};return i.subscribe(Sv(e,f,function(){u=!0,d()})),function(){a==null||a()}}function qK(i,e,t){return t===void 0&&(t=1/0),Mn(e)?qK(function(n,s){return jK(function(r,o){return e(n,r,s,o)})(b0(i(n,s)))},t):(typeof e=="number"&&(t=e),_0(function(n,s){return I1e(n,s,i,t)}))}function T1e(i){return i===void 0&&(i=1/0),qK(EK,i)}function N1e(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var t=f1e(i),n=g1e(i,1/0),s=i;return s.length?s.length===1?b0(s[0]):T1e(n)(A1e(s,t)):u1e}function M1e(i,e,t,n,s){return function(r,o){var a=t,l=e,c=0;r.subscribe(Sv(o,function(h){var u=c++;l=a?i(l,h,u):(a=!0,h),n&&o.next(l)},s&&function(){a&&o.next(l),o.complete()}))}}function GK(i,e){return _0(M1e(i,e,arguments.length>=2,!1,!0))}var R1e=function(i,e){return i.push(e),i};function O1e(){return _0(function(i,e){GK(R1e,[])(i).subscribe(e)})}const w9=-2003829722,pA=-2021002517;function P1e(i){return new TextDecoder().decode(i)}function y9(i){const e=i?"big":"little",t=new Ct().endianess(e).int32("magic").uint16("version").uint16("numZoomLevels").uint64("chromTreeOffset").uint64("unzoomedDataOffset").uint64("unzoomedIndexOffset").uint16("fieldCount").uint16("definedFieldCount").uint64("asOffset").uint64("totalSummaryOffset").uint32("uncompressBufSize").uint64("extHeaderOffset").array("zoomLevels",{length:"numZoomLevels",type:new Ct().endianess(e).uint32("reductionLevel").uint32("reserved").uint64("dataOffset").uint64("indexOffset")}),n=new Ct().endianess(e).uint64("basesCovered").doublele("scoreMin").doublele("scoreMax").doublele("scoreSum").doublele("scoreSumSquares"),s=new Ct().endianess(e).uint32("magic").uint32("blockSize").uint32("keySize").uint32("valSize").uint64("itemCount"),r=new Ct().endianess(e).uint8("isLeafNode").skip(1).uint16("cnt").saveOffset("offset");return{chromTreeParser:s,totalSummaryParser:n,headerParser:t,isLeafNode:r}}class KK{getHeader(e){return this.headerP||(this.headerP=this._getHeader(e).catch(t=>{throw this.headerP=void 0,t})),this.headerP}constructor(e){const{filehandle:t,renameRefSeqs:n=o=>o,path:s,url:r}=e;if(this.renameRefSeqs=n,t)this.bbi=t;else if(r)this.bbi=new Ac(r);else if(s)this.bbi=new Fh(s);else throw new Error("no file given")}async _getHeader(e){const t=await this._getMainHeader(e),n=await this._readChromTree(t,e);return{...t,...n}}async _getMainHeader(e,t=2e3){const{buffer:n}=await this.bbi.read(Vr.Buffer.alloc(t),0,t,0,e),s=this._isBigEndian(n),r=y9(s),o=r.headerParser.parse(n),{magic:a,asOffset:l,totalSummaryOffset:c}=o;if(o.fileType=a===pA?"bigbed":"bigwig",l>t||c>t)return this._getMainHeader(e,t*2);if(l){const h=Number(o.asOffset);o.autoSql=P1e(n.subarray(h,n.indexOf(0,h)))}if(o.totalSummaryOffset>t)return this._getMainHeader(e,t*2);if(o.totalSummaryOffset){const h=n.subarray(Number(o.totalSummaryOffset)),u=r.totalSummaryParser.parse(h);o.totalSummary={...u,basesCovered:Number(u.basesCovered)}}return{...o,isBigEndian:s}}_isBigEndian(e){let t=e.readInt32LE(0);if(t===w9||t===pA)return!1;if(t=e.readInt32BE(0),t===w9||t===pA)return!0;throw new Error("not a BigWig/BigBed file")}async _readChromTree(e,t){const n=e.isBigEndian,s=n?"big":"little",r=[],o={};let a=Number(e.unzoomedDataOffset);const l=Number(e.chromTreeOffset);for(;a%4!==0;)a+=1;const c=a-l,{buffer:h}=await this.bbi.read(Vr.Buffer.alloc(c),0,c,Number(l),t),u=y9(n),{keySize:d}=u.chromTreeParser.parse(h),f=new Ct().endianess(s).string("key",{stripNull:!0,length:d}).uint32("refId").uint32("refSize").saveOffset("offset"),g=new Ct().endianess(s).skip(d).uint64("childOffset").saveOffset("offset"),p=32,m=async v=>{let b=v;if(b>=h.length)throw new Error("reading beyond end of buffer");const w=u.isLeafNode.parse(h.subarray(b)),{isLeafNode:y,cnt:x}=w;if(b+=w.offset,y)for(let k=0;k<x;k+=1){const S=f.parse(h.subarray(b));b+=S.offset;const{key:L,refId:D,refSize:N}=S,T={name:L,id:D,length:N};o[this.renameRefSeqs(L)]=D,r[D]=T}else{const k=[];for(let S=0;S<x;S+=1){const L=g.parse(h.subarray(b)),{childOffset:D}=L;b+=L.offset,k.push(m(Number(D)-Number(l)))}await Promise.all(k)}};return await m(p),{refsByName:o,refsByNumber:r}}async getUnzoomedView(e){const{unzoomedIndexOffset:t,refsByName:n,uncompressBufSize:s,isBigEndian:r,fileType:o}=await this.getHeader(e);return new SK(this.bbi,n,t,r,s>0,o)}async getFeatureStream(e,t,n,s){await this.getHeader(s);const r=this.renameRefSeqs(e);let o;const{basesPerSpan:a,scale:l}=s||{};return a?o=await this.getView(1/a,s):l?o=await this.getView(l,s):o=await this.getView(1,s),new Po(c=>{o.readWigData(r,t,n,c,s)})}async getFeatures(e,t,n,s){const r=await this.getFeatureStream(e,t,n,s);return(await $K(r.pipe(O1e()))).flat()}}class F1e extends KK{async getView(e,t){const{zoomLevels:n,refsByName:s,fileSize:r,isBigEndian:o,uncompressBufSize:a}=await this.getHeader(t),l=1/e;let c=n.length;r||(c-=1);for(let h=c;h>=0;h-=1){const u=n[h];if(u&&u.reductionLevel<=2*l){const d=Number(u.indexOffset);return new SK(this.bbi,s,d,o,a>0,"summary")}}return this.getUnzoomedView(t)}}function B1e(i){return i.filter(e=>!!e)}class V1e extends KK{constructor(){super(...arguments),this.readIndicesCache=new AO({cache:new oK({maxSize:1}),fill:(e,t)=>this._readIndices({...e,signal:t})})}readIndices(e={}){const{signal:t,...n}=e;return this.readIndicesCache.get(JSON.stringify(n),e,t)}async getView(e,t){return this.getUnzoomedView(t)}async _readIndices(e){const{extHeaderOffset:t,isBigEndian:n}=await this.getHeader(e),{buffer:s}=await this.bbi.read(Vr.Buffer.alloc(64),0,64,Number(t)),r=n?"big":"little",o=new Ct().endianess(r).uint16("size").uint16("count").uint64("offset").parse(s),{count:a,offset:l}=o;if(a===0)return[];const c=20,h=c*a,{buffer:u}=await this.bbi.read(Vr.Buffer.alloc(h),0,h,Number(l)),d=new Ct().endianess(r).int16("type").int16("fieldcount").uint64("offset").skip(4).int16("field"),f=[];for(let g=0;g<a;g+=1)f.push(d.parse(u.subarray(g*c)));return f}async searchExtraIndexBlocks(e,t={}){const{isBigEndian:n}=await this.getHeader(t),s=await this.readIndices(t);if(s.length===0)return[];const r=s.map(async o=>{const{offset:a,field:l}=o,{buffer:c}=await this.bbi.read(Vr.Buffer.alloc(32),0,32,Number(a),t),h=n?"big":"little",u=new Ct().endianess(h).int32("magic").int32("blockSize").int32("keySize").int32("valSize").uint64("itemCount"),{blockSize:d,keySize:f,valSize:g}=u.parse(c),p=new Ct().endianess(h).int8("nodeType").skip(1).int16("cnt").choice({tag:"nodeType",choices:{0:new Ct().array("leafkeys",{length:"cnt",type:new Ct().endianess(h).string("key",{length:f,stripNull:!0}).uint64("offset")}),1:new Ct().array("keys",{length:"cnt",type:new Ct().endianess(h).string("key",{length:f,stripNull:!0}).uint64("offset").uint32("length").uint32("reserved")})}}),m=async b=>{const w=Number(b),y=4+d*(f+g),{buffer:x}=await this.bbi.read(Vr.Buffer.alloc(y),0,y,w,t),k=p.parse(x);if(k.leafkeys){let S;for(let L=0;L<k.leafkeys.length;L+=1){const{key:D}=k.leafkeys[L];if(e.localeCompare(D)<0&&S)return m(S);S=k.leafkeys[L].offset}return m(S)}for(let S=0;S<k.keys.length;S+=1)if(k.keys[S].key===e)return{...k.keys[S],field:l}},v=32;return m(Number(a)+v)});return B1e(await Promise.all(r))}async searchExtraIndex(e,t={}){const n=await this.searchExtraIndexBlocks(e,t);if(n.length===0)return[];const s=await this.getUnzoomedView(t),r=n.map(o=>new Po(a=>{s.readFeatures(a,[o],t)}).pipe(GK((a,l)=>a.concat(l)),jK(a=>{for(const l of a)l.field=o.field;return a})));return(await $K(N1e(...r))).filter(o=>{var a;return((a=o.rest)===null||a===void 0?void 0:a.split("	")[(o.field||0)-3])===e})}}function OO(i,e,t=!0){let n,s=r=>{};return function(...r){return new Promise((o,a)=>{const l=()=>{clearTimeout(n),s=c=>{},o(i(...r))};t&&s("debounced"),clearTimeout(n),s=a,n=setTimeout(l,e)})}}class W1e extends NL(u0){constructor(e,t){const n={pixelsPerBin:2,channel:"x",...e};if(super(t,n.channel),zc(this,"reductionLevels",[]),zc(this,"lastRequestId",0),this.params=n,!this.params.url)throw new Error("No URL provided for BigWigSource");this.bbi=new F1e({filehandle:new Ac(ML(this.params.url,this.view.getBaseUrl()))}),this.doDebouncedRequest=OO(this.doRequest.bind(this),200,!1),this.headerPromise=this.bbi.getHeader(),this.headerPromise.then(s=>{this.reductionLevels=s.zoomLevels.map(r=>r.reductionLevel).reverse(),this.reductionLevels.push(1)})}async onDomainChanged(e){await this.headerPromise;const t=this.getAxisLength()||700,n=z1e(e,t,this.reductionLevels),s=Math.max(n*t,5e3),r=this.quantizeInterval(e,s);this.checkAndUpdateLastInterval(r)&&this.doDebouncedRequest(r,n)}async doRequest(e,t){const n=await this.getFeatures(e,.5/t/this.params.pixelsPerBin);n.requestId<this.lastRequestId||this.publishData(n.features)}async getFeatures(e,t){let n=++this.lastRequestId;const s=new AbortController,r=this.genome.continuousToDiscreteChromosomeIntervals(e),o=await Promise.all(r.map(a=>this.bbi.getFeatures(a.chrom,a.startPos,a.endPos,{scale:t,signal:s.signal}).then(l=>l.map(c=>({chrom:a.chrom,start:c.start,end:c.end,score:c.score})))));return{requestId:n,abort:()=>s.abort(),features:o.flat()}}}function z1e(i,e,t){const n=(i[1]-i[0])/e;return t.find(s=>s<n)??t.at(-1)}function H1e(i,e){function t(){this.constructor=i}t.prototype=e.prototype,i.prototype=new t}function _m(i,e,t,n){this.message=i,this.expected=e,this.found=t,this.location=n,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,_m)}H1e(_m,Error);_m.buildMessage=function(i,e){var t={literal:function(c){return'"'+s(c.text)+'"'},class:function(c){var h="",u;for(u=0;u<c.parts.length;u++)h+=c.parts[u]instanceof Array?r(c.parts[u][0])+"-"+r(c.parts[u][1]):r(c.parts[u]);return"["+(c.inverted?"^":"")+h+"]"},any:function(c){return"any character"},end:function(c){return"end of input"},other:function(c){return c.description}};function n(c){return c.charCodeAt(0).toString(16).toUpperCase()}function s(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+n(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+n(h)})}function r(c){return c.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+n(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+n(h)})}function o(c){return t[c.type](c)}function a(c){var h=new Array(c.length),u,d;for(u=0;u<c.length;u++)h[u]=o(c[u]);if(h.sort(),h.length>0){for(u=1,d=1;u<h.length;u++)h[u-1]!==h[u]&&(h[d]=h[u],d++);h.length=d}switch(h.length){case 1:return h[0];case 2:return h[0]+" or "+h[1];default:return h.slice(0,-1).join(", ")+", or "+h[h.length-1]}}function l(c){return c?'"'+s(c)+'"':"end of input"}return"Expected "+a(i)+" but "+l(e)+" found."};function U1e(i,e){e=e!==void 0?e:{};var t={},n={declaration:Wi},s=Wi,r="(",o=X("(",!1),a=")",l=X(")",!1),c=function(P,re,Ee,Ne){return{type:P,name:re,comment:Ee,fields:Ne}},h="simple",u=X("simple",!1),d="object",f=X("object",!1),g="table",p=X("table",!1),m="auto",v=X("auto",!1),b="primary",w=X("primary",!1),y="index",x=X("index",!1),k="unique",S=X("unique",!1),L=function(P,re){return re},D=function(P,re){return P.name&&re.unshift(P),re},N="#",T=X("#",!1),$=";",U=X(";",!1),ee=function(P,re,Ee){return{type:P,name:re,comment:Ee}},ce="[",fe=X("[",!1),Ce="]",Se=X("]",!1),me=function(P,re,Ee,Ne){return{type:P,size:re,name:Ee,comment:Ne}},Dt=function(P,re,Ee,Ne){return{type:P,vals:re,name:Ee,comment:Ne}},ze=",",Ge=X(",",!1),Lt=function(P,re){return re.unshift(P),re},nt="int",Vi=X("int",!1),wn="uint",Wn=X("uint",!1),Ai="short",J=X("short",!1),ye="ushort",he=X("ushort",!1),W="byte",ot=X("byte",!1),Me="ubyte",vt=X("ubyte",!1),pt="float",ei=X("float",!1),zn="char",eh=X("char",!1),eo="string",nr=X("string",!1),en="lstring",Bs=X("lstring",!1),to="enum",ps=X("enum",!1),Fa="double",C=X("double",!1),A="bigint",I=X("bigint",!1),j="set",Y=X("set",!1),ae=function(P,re){return P+" "+re},_e=/^[a-zA-Z_]/,_t=ie([["a","z"],["A","Z"],"_"],!1,!1),ci=/^[a-zA-Z0-9_]/,Rt=ie([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),Ot=function(P){return H()},hi=/^[^\n\r]/,$l=ie([`
`,"\r"],!0,!1),Ba=function(P){return P.join("").replace(/^"/,"").replace(/"$/,"")},bg=Fe("integer"),Vs=/^[0-9]/,Wu=ie([["0","9"]],!1,!1),vg=function(){return parseInt(H(),10)},wg=Fe("whitespace"),st=/^[ \t\n\r]/,Va=ie([" ","	",`
`,"\r"],!1,!1),M=0,K=0,Q=[{line:1,column:1}],R=0,B=[],O=0,E;if("startRule"in e){if(!(e.startRule in n))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');s=n[e.startRule]}function H(){return i.substring(K,M)}function X(P,re){return{type:"literal",text:P,ignoreCase:re}}function ie(P,re,Ee){return{type:"class",parts:P,inverted:re,ignoreCase:Ee}}function we(){return{type:"end"}}function Fe(P){return{type:"other",description:P}}function He(P){var re=Q[P],Ee;if(re)return re;for(Ee=P-1;!Q[Ee];)Ee--;for(re=Q[Ee],re={line:re.line,column:re.column};Ee<P;)i.charCodeAt(Ee)===10?(re.line++,re.column=1):re.column++,Ee++;return Q[P]=re,re}function qe(P,re){var Ee=He(P),Ne=He(re);return{start:{offset:P,line:Ee.line,column:Ee.column},end:{offset:re,line:Ne.line,column:Ne.column}}}function ge(P){M<R||(M>R&&(R=M,B=[]),B.push(P))}function Re(P,re,Ee){return new _m(_m.buildMessage(P,re),P,re,Ee)}function Wi(){var P,re,Ee,Ne,Ye,yi,zi,io,th,ql,ih,Gl,nh,Kl;return P=M,re=zt(),re!==t?(Ee=wt(),Ee!==t?(Ne=zt(),Ne!==t?(Ye=Hn(),Ye!==t?(yi=zt(),yi!==t?(zi=tn(),zi!==t?(io=zt(),io!==t?(i.charCodeAt(M)===40?(th=r,M++):(th=t,O===0&&ge(o)),th!==t?(ql=zt(),ql!==t?(ih=zu(),ih!==t?(Gl=zt(),Gl!==t?(i.charCodeAt(M)===41?(nh=a,M++):(nh=t,O===0&&ge(l)),nh!==t?(Kl=zt(),Kl!==t?(K=P,re=c(Ee,Ye,zi,ih),P=re):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t),P}function wt(){var P;return i.substr(M,6)===h?(P=h,M+=6):(P=t,O===0&&ge(u)),P===t&&(i.substr(M,6)===d?(P=d,M+=6):(P=t,O===0&&ge(f)),P===t&&(i.substr(M,5)===g?(P=g,M+=5):(P=t,O===0&&ge(p)))),P}function Hn(){var P,re,Ee,Ne;return P=Vo(),P===t&&(P=M,re=Vo(),re!==t?(Ee=jl(),Ee!==t?(re=[re,Ee],P=re):(M=P,P=t)):(M=P,P=t),P===t&&(P=M,re=Vo(),re!==t?(i.substr(M,4)===m?(Ee=m,M+=4):(Ee=t,O===0&&ge(v)),Ee!==t?(re=[re,Ee],P=re):(M=P,P=t)):(M=P,P=t),P===t&&(P=M,re=Vo(),re!==t?(Ee=jl(),Ee!==t?(i.substr(M,4)===m?(Ne=m,M+=4):(Ne=t,O===0&&ge(v)),Ne!==t?(re=[re,Ee,Ne],P=re):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)))),P}function jl(){var P;return i.substr(M,7)===b?(P=b,M+=7):(P=t,O===0&&ge(w)),P===t&&(i.substr(M,5)===y?(P=y,M+=5):(P=t,O===0&&ge(x)),P===t&&(i.substr(M,6)===k?(P=k,M+=6):(P=t,O===0&&ge(S)))),P}function tn(){var P;return P=_F(),P===t&&(P=zt()),P}function zu(){var P,re,Ee,Ne,Ye,yi,zi;if(P=M,re=Uu(),re!==t)if(Ee=zt(),Ee!==t){for(Ne=[],Ye=M,yi=zt(),yi!==t?(zi=Uu(),zi!==t?(K=Ye,yi=L(re,zi),Ye=yi):(M=Ye,Ye=t)):(M=Ye,Ye=t);Ye!==t;)Ne.push(Ye),Ye=M,yi=zt(),yi!==t?(zi=Uu(),zi!==t?(K=Ye,yi=L(re,zi),Ye=yi):(M=Ye,Ye=t)):(M=Ye,Ye=t);Ne!==t?(Ye=zt(),Ye!==t?(K=P,re=D(re,Ne),P=re):(M=P,P=t)):(M=P,P=t)}else M=P,P=t;else M=P,P=t;return P}function Hw(){var P;return i.charCodeAt(M)===35?(P=N,M++):(P=t,O===0&&ge(T)),P}function Hu(){var P,re,Ee,Ne,Ye;return P=M,re=zt(),re!==t?(Ee=Hw(),Ee!==t?(Ne=_F(),Ne!==t?(Ye=zt(),Ye!==t?(re=[re,Ee,Ne,Ye],P=re):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t),P}function Uu(){var P,re,Ee,Ne,Ye,yi,zi,io,th,ql,ih,Gl,nh,Kl;return P=M,re=yg(),re!==t?(Ee=zt(),Ee!==t?(Ne=Vo(),Ne!==t?(Ye=zt(),Ye!==t?(i.charCodeAt(M)===59?(yi=$,M++):(yi=t,O===0&&ge(U)),yi!==t?(zi=zt(),zi!==t?(io=tn(),io!==t?(K=P,re=ee(re,Ne,io),P=re):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t),P===t&&(P=M,re=yg(),re!==t?(Ee=zt(),Ee!==t?(i.charCodeAt(M)===91?(Ne=ce,M++):(Ne=t,O===0&&ge(fe)),Ne!==t?(Ye=zt(),Ye!==t?(yi=rie(),yi!==t?(zi=zt(),zi!==t?(i.charCodeAt(M)===93?(io=Ce,M++):(io=t,O===0&&ge(Se)),io!==t?(th=zt(),th!==t?(ql=Vo(),ql!==t?(ih=zt(),ih!==t?(i.charCodeAt(M)===59?(Gl=$,M++):(Gl=t,O===0&&ge(U)),Gl!==t?(nh=zt(),nh!==t?(Kl=tn(),Kl!==t?(K=P,re=me(re,yi,ql,Kl),P=re):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t),P===t&&(P=M,re=yg(),re!==t?(Ee=zt(),Ee!==t?(i.charCodeAt(M)===40?(Ne=r,M++):(Ne=t,O===0&&ge(o)),Ne!==t?(Ye=zt(),Ye!==t?(yi=Uw(),yi!==t?(zi=zt(),zi!==t?(i.charCodeAt(M)===41?(io=a,M++):(io=t,O===0&&ge(l)),io!==t?(th=zt(),th!==t?(ql=Vo(),ql!==t?(ih=zt(),ih!==t?(i.charCodeAt(M)===59?(Gl=$,M++):(Gl=t,O===0&&ge(U)),Gl!==t?(nh=zt(),nh!==t?(Kl=tn(),Kl!==t?(K=P,re=Dt(re,yi,ql,Kl),P=re):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t),P===t&&(P=Hu()))),P}function Uw(){var P,re,Ee,Ne,Ye,yi,zi;if(P=M,re=Vo(),re!==t){for(Ee=[],Ne=M,i.charCodeAt(M)===44?(Ye=ze,M++):(Ye=t,O===0&&ge(Ge)),Ye!==t?(yi=zt(),yi!==t?(zi=Vo(),zi!==t?(K=Ne,Ye=L(re,zi),Ne=Ye):(M=Ne,Ne=t)):(M=Ne,Ne=t)):(M=Ne,Ne=t);Ne!==t;)Ee.push(Ne),Ne=M,i.charCodeAt(M)===44?(Ye=ze,M++):(Ye=t,O===0&&ge(Ge)),Ye!==t?(yi=zt(),yi!==t?(zi=Vo(),zi!==t?(K=Ne,Ye=L(re,zi),Ne=Ye):(M=Ne,Ne=t)):(M=Ne,Ne=t)):(M=Ne,Ne=t);Ee!==t?(K=P,re=Lt(re,Ee),P=re):(M=P,P=t)}else M=P,P=t;return P}function yg(){var P,re,Ee,Ne;return i.substr(M,3)===nt?(P=nt,M+=3):(P=t,O===0&&ge(Vi)),P===t&&(i.substr(M,4)===wn?(P=wn,M+=4):(P=t,O===0&&ge(Wn)),P===t&&(i.substr(M,5)===Ai?(P=Ai,M+=5):(P=t,O===0&&ge(J)),P===t&&(i.substr(M,6)===ye?(P=ye,M+=6):(P=t,O===0&&ge(he)),P===t&&(i.substr(M,4)===W?(P=W,M+=4):(P=t,O===0&&ge(ot)),P===t&&(i.substr(M,5)===Me?(P=Me,M+=5):(P=t,O===0&&ge(vt)),P===t&&(i.substr(M,5)===pt?(P=pt,M+=5):(P=t,O===0&&ge(ei)),P===t&&(i.substr(M,4)===zn?(P=zn,M+=4):(P=t,O===0&&ge(eh)),P===t&&(i.substr(M,6)===eo?(P=eo,M+=6):(P=t,O===0&&ge(nr)),P===t&&(i.substr(M,7)===en?(P=en,M+=7):(P=t,O===0&&ge(Bs)),P===t&&(i.substr(M,4)===to?(P=to,M+=4):(P=t,O===0&&ge(ps)),P===t&&(i.substr(M,6)===Fa?(P=Fa,M+=6):(P=t,O===0&&ge(C)),P===t&&(i.substr(M,6)===A?(P=A,M+=6):(P=t,O===0&&ge(I)),P===t&&(i.substr(M,3)===j?(P=j,M+=3):(P=t,O===0&&ge(Y)),P===t&&(P=M,re=wt(),re!==t?(Ee=zt(),Ee!==t?(Ne=Hn(),Ne!==t?(K=P,re=ae(re,Ne),P=re):(M=P,P=t)):(M=P,P=t)):(M=P,P=t))))))))))))))),P}function rie(){var P;return P=oie(),P===t&&(P=Vo()),P}function Vo(){var P,re,Ee,Ne,Ye;if(P=M,re=M,_e.test(i.charAt(M))?(Ee=i.charAt(M),M++):(Ee=t,O===0&&ge(_t)),Ee!==t){for(Ne=[],ci.test(i.charAt(M))?(Ye=i.charAt(M),M++):(Ye=t,O===0&&ge(Rt));Ye!==t;)Ne.push(Ye),ci.test(i.charAt(M))?(Ye=i.charAt(M),M++):(Ye=t,O===0&&ge(Rt));Ne!==t?(Ee=[Ee,Ne],re=Ee):(M=re,re=t)}else M=re,re=t;return re!==t&&(K=P,re=Ot()),P=re,P}function _F(){var P,re,Ee;for(P=M,re=[],hi.test(i.charAt(M))?(Ee=i.charAt(M),M++):(Ee=t,O===0&&ge($l));Ee!==t;)re.push(Ee),hi.test(i.charAt(M))?(Ee=i.charAt(M),M++):(Ee=t,O===0&&ge($l));return re!==t&&(K=P,re=Ba(re)),P=re,P}function oie(){var P,re,Ee,Ne;if(O++,P=M,re=zt(),re!==t){if(Ee=[],Vs.test(i.charAt(M))?(Ne=i.charAt(M),M++):(Ne=t,O===0&&ge(Wu)),Ne!==t)for(;Ne!==t;)Ee.push(Ne),Vs.test(i.charAt(M))?(Ne=i.charAt(M),M++):(Ne=t,O===0&&ge(Wu));else Ee=t;Ee!==t?(K=P,re=vg(),P=re):(M=P,P=t)}else M=P,P=t;return O--,P===t&&(re=t,O===0&&ge(bg)),P}function zt(){var P,re;for(O++,P=[],st.test(i.charAt(M))?(re=i.charAt(M),M++):(re=t,O===0&&ge(Va));re!==t;)P.push(re),st.test(i.charAt(M))?(re=i.charAt(M),M++):(re=t,O===0&&ge(Va));return O--,P===t&&(re=t,O===0&&ge(wg)),P}if(E=s(),E!==t&&M===i.length)return E;throw E!==t&&M<i.length&&ge(we()),Re(B,R<i.length?i.charAt(R):null,R<i.length?qe(R,R+1):qe(R,R))}var ZK={SyntaxError:_m,parse:U1e};const $1e=d0(ZK),j1e=`table bigChain
"bigChain pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint score;         "Score (0-1000)"
    char[1] strand;     "+ or - for strand"
    uint tSize;         "size of target sequence"
    string qName;       "name of query sequence"
    uint qSize;         "size of query sequence"
    uint qStart;        "start of alignment on query sequence"
    uint qEnd;          "end of alignment on query sequence"
    uint chainScore;    "score from chain"
    )`,q1e=`table bigGenePred
"bigGenePred gene models"
   (
   string chrom;       "Reference sequence chromosome or scaffold"
   uint   chromStart;  "Start position in chromosome"
   uint   chromEnd;    "End position in chromosome"
   string name;        "Name or ID of item, ideally both human readable and unique"
   uint score;         "Score (0-1000)"
   char[1] strand;     "+ or - for strand"
   uint thickStart;    "Start of where display should be thick (start codon)"
   uint thickEnd;      "End of where display should be thick (stop codon)"
   uint reserved;       "RGB value (use R,G,B string in input file)"
   int blockCount;     "Number of blocks"
   int[blockCount] blockSizes; "Comma separated list of block sizes"
   int[blockCount] chromStarts; "Start positions relative to chromStart"
   string name2;       "Alternative/human readable name"
   string cdsStartStat; "Status of CDS start annotation (none, unknown, incomplete, or complete)"
   string cdsEndStat;   "Status of CDS end annotation (none, unknown, incomplete, or complete)"
   int[blockCount] exonFrames; "Exon frame {0,1,2}, or -1 if no frame for exon"
   string type;        "Transcript type"
   string geneName;    "Primary identifier for gene"
   string geneName2;   "Alternative/human readable gene name"
   string geneType;    "Gene type"
   )`,G1e=`table interact
"interaction between two regions"
    (
    string chrom;        "Chromosome (or contig, scaffold, etc.). For interchromosomal, use 2 records"
    uint chromStart;     "Start position of lower region. For interchromosomal, set to chromStart of this region"
    uint chromEnd;       "End position of upper region. For interchromosomal, set to chromEnd of this region"
    string name;         "Name of item, for display.  Usually 'sourceName/targetName/exp' or empty"
    uint score;          "Score (0-1000)"
    double value;        "Strength of interaction or other data value. Typically basis for score"
    string exp;          "Experiment name (metadata for filtering). Use . if not applicable"
    string color;        "Item color.  Specified as r,g,b or hexadecimal #RRGGBB or html color name, as in //www.w3.org/TR/css3-color/#html4. Use 0 and spectrum setting to shade by score"
    string sourceChrom;  "Chromosome of source region (directional) or lower region. For non-directional interchromosomal, chrom of this region."
    uint sourceStart;    "Start position in chromosome of source/lower/this region"
    uint sourceEnd;      "End position in chromosome of source/lower/this region"
    string sourceName;   "Identifier of source/lower/this region"
    string sourceStrand; "Orientation of source/lower/this region: + or -.  Use . if not applicable"
    string targetChrom;  "Chromosome of target region (directional) or upper region. For non-directional interchromosomal, chrom of other region"
    uint targetStart;    "Start position in chromosome of target/upper/this region"
    uint targetEnd;      "End position in chromosome of target/upper/this region"
    string targetName;   "Identifier of target/upper/this region"
    string targetStrand; "Orientation of target/upper/this region: + or -.  Use . if not applicable"

    )`,K1e=`table bigLink
"bigLink pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint qStart;        "start of alignment on query sequence"
    )`,Z1e=`table bedMaf
"Bed3 with MAF block"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start position in chromosome"
    uint   chromEnd;   "End position in chromosome"
    lstring mafBlock;   "MAF block"
    )`,Y1e=`table bigNarrowPeak
"BED6+4 Peaks of signal enrichment based on pooled, normalized (interpreted) data."
(
    string chrom;        "Reference sequence chromosome or scaffold"
    uint   chromStart;   "Start position in chromosome"
    uint   chromEnd;     "End position in chromosome"
    string name;	 "Name given to a region (preferably unique). Use . if no name is assigned"
    uint   score;        "Indicates how dark the peak will be displayed in the browser (0-1000) "
    char[1]  strand;     "+ or - or . for unknown"
    float  signalValue;  "Measurement of average enrichment for the region"
    float  pValue;       "Statistical significance of signal value (-log10). Set to -1 if not used."
    float  qValue;       "Statistical significance with multiple-test correction applied (FDR -log10). Set to -1 if not used."
    int   peak;         "Point-source called for this peak; 0-based offset from chromStart. Set to -1 if no point-source called."
)`,Q1e=`table bigPsl
"bigPsl pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint score;         "Score (0-1000)"
    char[1] strand;     "+ or - indicates whether the query aligns to the + or - strand on the reference"
    uint thickStart;    "Start of where display should be thick (start codon)"
    uint thickEnd;      "End of where display should be thick (stop codon)"
    uint reserved;       "RGB value (use R,G,B string in input file)"
    int blockCount;     "Number of blocks"
    int[blockCount] blockSizes; "Comma separated list of block sizes"
    int[blockCount] chromStarts; "Start positions relative to chromStart"

    uint    oChromStart;"Start position in other chromosome"
    uint    oChromEnd;  "End position in other chromosome"
    char[1] oStrand;    "+ or -, - means that psl was reversed into BED-compatible coordinates"
    uint    oChromSize; "Size of other chromosome."
    int[blockCount] oChromStarts; "Start positions relative to oChromStart or from oChromStart+oChromSize depending on strand"

    lstring  oSequence;  "Sequence on other chrom (or empty)"
    string   oCDS;       "CDS in NCBI format"

    uint    chromSize;"Size of target chromosome"

    uint match;        "Number of bases matched."
    uint misMatch; " Number of bases that don't match "
    uint repMatch; " Number of bases that match but are part of repeats "
    uint nCount;   " Number of 'N' bases "
    uint seqType;    "0=empty, 1=nucleotide, 2=amino_acid"
    )`,X1e=`table defaultBedSchema
"BED12"
    (
    string chrom;      "The name of the chromosome (e.g. chr3, chrY, chr2_random) or scaffold (e.g. scaffold10671)."
    uint   chromStart; "The starting position of the feature in the chromosome or scaffold. The first base in a chromosome is numbered 0."
    uint   chromEnd;   "The ending position of the feature in the chromosome or scaffold. The chromEnd base is not included in the display of the feature. For example, the first 100 bases of a chromosome are defined as chromStart=0, chromEnd=100, and span the bases numbered 0-99."
    string   name;   "Defines the name of the BED line."
    float   score;   "Feature score, doesn't care about the 0-1000 limit as in bed"
    char   strand;   "Defines the strand. Either '.' (=no strand) or '+' or '-'"
    uint thickStart; "The starting position at which the feature is drawn thickly (for example, the start codon in gene displays). When there is no thick part, thickStart and thickEnd are usually set to the chromStart position."
    uint thickEnd; "The ending position at which the feature is drawn thickly (for example the stop codon in gene displays)."
    string itemRgb; "An RGB value of the form R,G,B (e.g. 255,0,0). "
    uint blockCount; " The number of blocks (exons) in the BED line."
    uint[blockCount] blockSizes; " A comma-separated list of the block sizes. The number of items in this list should correspond to blockCount."
    uint[blockCount] blockStarts; "A comma-separated list of block starts. All of the blockStart positions should be calculated relative to chromStart. The number of items in this list should correspond to blockCount."
    )`,J1e=`table mafFrames
"codon frame assignment for MAF components"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start range in chromosome"
    uint   chromEnd;   "End range in chromosome"
    string src;        "Name of sequence source in MAF"
    ubyte frame;       "frame (0,1,2) for first base(+) or last bast(-)"
    char[1] strand;    "+ or -"
    string name;       "Name of gene used to define frame"
    int    prevFramePos;  "target position of the previous base (in transcription direction) that continues this frame, or -1 if none, or frame not contiguous"
    int    nextFramePos;  "target position of the next base (in transcription direction) that continues this frame, or -1 if none, or frame not contiguous"
    ubyte  isExonStart;  "does this start the CDS portion of an exon?"
    ubyte  isExonEnd;    "does this end the CDS portion of an exon?"
    )`,ewe=`table mafSummary
"Positions and scores for alignment blocks"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start position in chromosome"
    uint   chromEnd;   "End position in chromosome"
    string src;        "Sequence name or database of alignment"
    float  score;      "Floating point score."
    char[1] leftStatus;  "Gap/break annotation for preceding block"
    char[1] rightStatus; "Gap/break annotation for following block"
    )`,twe=Object.freeze(Object.defineProperty({__proto__:null,bigChain:j1e,bigGenePred:q1e,bigInteract:G1e,bigLink:K1e,bigMaf:Z1e,bigNarrowPeak:Y1e,bigPsl:Q1e,defaultBedSchema:X1e,mafFrames:J1e,mafSummary:ewe},Symbol.toStringTag,{value:"Module"})),mA=Object.fromEntries(Object.entries(twe).map(([i,e])=>[i,ZK.parse(e.trim())]));function _A(i){const e=["uint","int","float","long"];return{...i,fields:i.fields.map(t=>({...t,isArray:t.size&&t.type!=="char",arrayIsNumeric:t.size&&e.includes(t.type),isNumeric:!t.size&&e.includes(t.type)}))}}const iwe={".":0,"-":-1,"+":1};function nwe(i){var e;return i.length>=12&&!Number.isNaN(parseInt(i[9],10))&&((e=i[10])===null||e===void 0?void 0:e.split(",").filter(t=>!!t).length)===parseInt(i[9],10)}class swe{constructor(e={}){if(e.autoSql)this.autoSql=_A($1e.parse(e.autoSql));else if(e.type){if(!mA[e.type])throw new Error("Type not found");this.autoSql=_A(mA[e.type])}else this.autoSql=_A(mA.defaultBedSchema),this.attemptDefaultBed=!0}parseLine(e,t={}){const{autoSql:n}=this,{uniqueId:s}=t,r=Array.isArray(e)?e:e.split("	");let o={};if(!this.attemptDefaultBed||this.attemptDefaultBed&&nwe(r))for(let a=0;a<n.fields.length;a++){const l=n.fields[a];let c=r[a];const{isNumeric:h,isArray:u,arrayIsNumeric:d,name:f}=l;if(c==null)break;if(c!=="."){if(h){const g=Number(c);c=Number.isNaN(g)?c:g}else u&&(c=c.split(","),c[c.length-1]===""&&c.pop(),d&&(c=c.map(g=>Number(g))));o[f]=c}}else{const a=["chrom","chromStart","chromEnd","name"];o=Object.fromEntries(r.map((l,c)=>[a[c]||"field"+c,l])),o.chromStart=+o.chromStart,o.chromEnd=+o.chromEnd,Number.isNaN(Number.parseFloat(o.field4))||(o.score=+o.field4,delete o.field4),(o.field5==="+"||o.field5==="-")&&(o.strand=o.field5,delete o.field5)}return s&&(o.uniqueId=s),o.strand=iwe[o.strand]||0,o.chrom=decodeURIComponent(o.chrom),o}}class rwe extends NL(u0){constructor(e,t){const n={channel:"x",windowSize:1e6,...e};if(super(t,n.channel),zc(this,"lastRequestId",0),zc(this,"parser"),this.params=n,!this.params.url)throw new Error("No URL provided for BigBedSource");this.bbi=new V1e({filehandle:new Ac(ML(this.params.url,this.view.getBaseUrl()))}),this.doDebouncedRequest=OO(this.doRequest.bind(this),200,!1),this.headerPromise=this.bbi.getHeader(),this.headerPromise.then(s=>{this.parser=new swe({autoSql:s.autoSql})})}async onDomainChanged(e){const t=this.params.windowSize;if(e[1]-e[0]>t)return;const n=this.quantizeInterval(e,t);this.checkAndUpdateLastInterval(n)&&this.doDebouncedRequest(n)}async doRequest(e){const t=await this.getFeatures(e);t.requestId<this.lastRequestId||this.publishData(t.features)}async getFeatures(e){let t=++this.lastRequestId;const n=new AbortController,s=this.genome.continuousToDiscreteChromosomeIntervals(e),r=await Promise.all(s.map(o=>this.bbi.getFeatures(o.chrom,o.startPos,o.endPos,{signal:n.signal}).then(a=>a.map(l=>this.parser.parseLine(`${o.chrom}	${l.start}	${l.end}	${l.rest}`,{uniqueId:l.uniqueId})))));return{requestId:t,abort:()=>n.abort(),features:r.flat()}}}var owe=Li,xo=null;try{xo=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Li(i,e,t){this.low=i|0,this.high=e|0,this.unsigned=!!t}Li.prototype.__isLong__;Object.defineProperty(Li.prototype,"__isLong__",{value:!0});function Dr(i){return(i&&i.__isLong__)===!0}Li.isLong=Dr;var C9={},S9={};function Yf(i,e){var t,n,s;return e?(i>>>=0,(s=0<=i&&i<256)&&(n=S9[i],n)?n:(t=ki(i,(i|0)<0?-1:0,!0),s&&(S9[i]=t),t)):(i|=0,(s=-128<=i&&i<128)&&(n=C9[i],n)?n:(t=ki(i,i<0?-1:0,!1),s&&(C9[i]=t),t))}Li.fromInt=Yf;function Do(i,e){if(isNaN(i))return e?xd:Lo;if(e){if(i<0)return xd;if(i>=YK)return JK}else{if(i<=-D9)return mr;if(i+1>=D9)return XK}return i<0?Do(-i,e).neg():ki(i%bm|0,i/bm|0,e)}Li.fromNumber=Do;function ki(i,e,t){return new Li(i,e,t)}Li.fromBits=ki;var ix=Math.pow;function PO(i,e,t){if(i.length===0)throw Error("empty string");if(i==="NaN"||i==="Infinity"||i==="+Infinity"||i==="-Infinity")return Lo;if(typeof e=="number"?(t=e,e=!1):e=!!e,t=t||10,t<2||36<t)throw RangeError("radix");var n;if((n=i.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return PO(i.substring(1),e,t).neg();for(var s=Do(ix(t,8)),r=Lo,o=0;o<i.length;o+=8){var a=Math.min(8,i.length-o),l=parseInt(i.substring(o,o+a),t);if(a<8){var c=Do(ix(t,a));r=r.mul(c).add(Do(l))}else r=r.mul(s),r=r.add(Do(l))}return r.unsigned=e,r}Li.fromString=PO;function Ta(i,e){return typeof i=="number"?Do(i,e):typeof i=="string"?PO(i,e):ki(i.low,i.high,typeof e=="boolean"?e:i.unsigned)}Li.fromValue=Ta;var x9=1<<16,awe=1<<24,bm=x9*x9,YK=bm*bm,D9=YK/2,L9=Yf(awe),Lo=Yf(0);Li.ZERO=Lo;var xd=Yf(0,!0);Li.UZERO=xd;var lp=Yf(1);Li.ONE=lp;var QK=Yf(1,!0);Li.UONE=QK;var eN=Yf(-1);Li.NEG_ONE=eN;var XK=ki(-1,2147483647,!1);Li.MAX_VALUE=XK;var JK=ki(-1,-1,!0);Li.MAX_UNSIGNED_VALUE=JK;var mr=ki(0,-2147483648,!1);Li.MIN_VALUE=mr;var Le=Li.prototype;Le.toInt=function(){return this.unsigned?this.low>>>0:this.low};Le.toNumber=function(){return this.unsigned?(this.high>>>0)*bm+(this.low>>>0):this.high*bm+(this.low>>>0)};Le.toString=function(i){if(i=i||10,i<2||36<i)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(mr)){var e=Do(i),t=this.div(e),n=t.mul(e).sub(this);return t.toString(i)+n.toInt().toString(i)}else return"-"+this.neg().toString(i);for(var s=Do(ix(i,6),this.unsigned),r=this,o="";;){var a=r.div(s),l=r.sub(a.mul(s)).toInt()>>>0,c=l.toString(i);if(r=a,r.isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}};Le.getHighBits=function(){return this.high};Le.getHighBitsUnsigned=function(){return this.high>>>0};Le.getLowBits=function(){return this.low};Le.getLowBitsUnsigned=function(){return this.low>>>0};Le.getNumBitsAbs=function(){if(this.isNegative())return this.eq(mr)?64:this.neg().getNumBitsAbs();for(var i=this.high!=0?this.high:this.low,e=31;e>0&&!(i&1<<e);e--);return this.high!=0?e+33:e+1};Le.isZero=function(){return this.high===0&&this.low===0};Le.eqz=Le.isZero;Le.isNegative=function(){return!this.unsigned&&this.high<0};Le.isPositive=function(){return this.unsigned||this.high>=0};Le.isOdd=function(){return(this.low&1)===1};Le.isEven=function(){return(this.low&1)===0};Le.equals=function(i){return Dr(i)||(i=Ta(i)),this.unsigned!==i.unsigned&&this.high>>>31===1&&i.high>>>31===1?!1:this.high===i.high&&this.low===i.low};Le.eq=Le.equals;Le.notEquals=function(i){return!this.eq(i)};Le.neq=Le.notEquals;Le.ne=Le.notEquals;Le.lessThan=function(i){return this.comp(i)<0};Le.lt=Le.lessThan;Le.lessThanOrEqual=function(i){return this.comp(i)<=0};Le.lte=Le.lessThanOrEqual;Le.le=Le.lessThanOrEqual;Le.greaterThan=function(i){return this.comp(i)>0};Le.gt=Le.greaterThan;Le.greaterThanOrEqual=function(i){return this.comp(i)>=0};Le.gte=Le.greaterThanOrEqual;Le.ge=Le.greaterThanOrEqual;Le.compare=function(i){if(Dr(i)||(i=Ta(i)),this.eq(i))return 0;var e=this.isNegative(),t=i.isNegative();return e&&!t?-1:!e&&t?1:this.unsigned?i.high>>>0>this.high>>>0||i.high===this.high&&i.low>>>0>this.low>>>0?-1:1:this.sub(i).isNegative()?-1:1};Le.comp=Le.compare;Le.negate=function(){return!this.unsigned&&this.eq(mr)?mr:this.not().add(lp)};Le.neg=Le.negate;Le.add=function(i){Dr(i)||(i=Ta(i));var e=this.high>>>16,t=this.high&65535,n=this.low>>>16,s=this.low&65535,r=i.high>>>16,o=i.high&65535,a=i.low>>>16,l=i.low&65535,c=0,h=0,u=0,d=0;return d+=s+l,u+=d>>>16,d&=65535,u+=n+a,h+=u>>>16,u&=65535,h+=t+o,c+=h>>>16,h&=65535,c+=e+r,c&=65535,ki(u<<16|d,c<<16|h,this.unsigned)};Le.subtract=function(i){return Dr(i)||(i=Ta(i)),this.add(i.neg())};Le.sub=Le.subtract;Le.multiply=function(i){if(this.isZero())return Lo;if(Dr(i)||(i=Ta(i)),xo){var e=xo.mul(this.low,this.high,i.low,i.high);return ki(e,xo.get_high(),this.unsigned)}if(i.isZero())return Lo;if(this.eq(mr))return i.isOdd()?mr:Lo;if(i.eq(mr))return this.isOdd()?mr:Lo;if(this.isNegative())return i.isNegative()?this.neg().mul(i.neg()):this.neg().mul(i).neg();if(i.isNegative())return this.mul(i.neg()).neg();if(this.lt(L9)&&i.lt(L9))return Do(this.toNumber()*i.toNumber(),this.unsigned);var t=this.high>>>16,n=this.high&65535,s=this.low>>>16,r=this.low&65535,o=i.high>>>16,a=i.high&65535,l=i.low>>>16,c=i.low&65535,h=0,u=0,d=0,f=0;return f+=r*c,d+=f>>>16,f&=65535,d+=s*c,u+=d>>>16,d&=65535,d+=r*l,u+=d>>>16,d&=65535,u+=n*c,h+=u>>>16,u&=65535,u+=s*l,h+=u>>>16,u&=65535,u+=r*a,h+=u>>>16,u&=65535,h+=t*c+n*l+s*a+r*o,h&=65535,ki(d<<16|f,h<<16|u,this.unsigned)};Le.mul=Le.multiply;Le.divide=function(i){if(Dr(i)||(i=Ta(i)),i.isZero())throw Error("division by zero");if(xo){if(!this.unsigned&&this.high===-2147483648&&i.low===-1&&i.high===-1)return this;var e=(this.unsigned?xo.div_u:xo.div_s)(this.low,this.high,i.low,i.high);return ki(e,xo.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?xd:Lo;var t,n,s;if(this.unsigned){if(i.unsigned||(i=i.toUnsigned()),i.gt(this))return xd;if(i.gt(this.shru(1)))return QK;s=xd}else{if(this.eq(mr)){if(i.eq(lp)||i.eq(eN))return mr;if(i.eq(mr))return lp;var r=this.shr(1);return t=r.div(i).shl(1),t.eq(Lo)?i.isNegative()?lp:eN:(n=this.sub(i.mul(t)),s=t.add(n.div(i)),s)}else if(i.eq(mr))return this.unsigned?xd:Lo;if(this.isNegative())return i.isNegative()?this.neg().div(i.neg()):this.neg().div(i).neg();if(i.isNegative())return this.div(i.neg()).neg();s=Lo}for(n=this;n.gte(i);){t=Math.max(1,Math.floor(n.toNumber()/i.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),a=o<=48?1:ix(2,o-48),l=Do(t),c=l.mul(i);c.isNegative()||c.gt(n);)t-=a,l=Do(t,this.unsigned),c=l.mul(i);l.isZero()&&(l=lp),s=s.add(l),n=n.sub(c)}return s};Le.div=Le.divide;Le.modulo=function(i){if(Dr(i)||(i=Ta(i)),xo){var e=(this.unsigned?xo.rem_u:xo.rem_s)(this.low,this.high,i.low,i.high);return ki(e,xo.get_high(),this.unsigned)}return this.sub(this.div(i).mul(i))};Le.mod=Le.modulo;Le.rem=Le.modulo;Le.not=function(){return ki(~this.low,~this.high,this.unsigned)};Le.and=function(i){return Dr(i)||(i=Ta(i)),ki(this.low&i.low,this.high&i.high,this.unsigned)};Le.or=function(i){return Dr(i)||(i=Ta(i)),ki(this.low|i.low,this.high|i.high,this.unsigned)};Le.xor=function(i){return Dr(i)||(i=Ta(i)),ki(this.low^i.low,this.high^i.high,this.unsigned)};Le.shiftLeft=function(i){return Dr(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?ki(this.low<<i,this.high<<i|this.low>>>32-i,this.unsigned):ki(0,this.low<<i-32,this.unsigned)};Le.shl=Le.shiftLeft;Le.shiftRight=function(i){return Dr(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?ki(this.low>>>i|this.high<<32-i,this.high>>i,this.unsigned):ki(this.high>>i-32,this.high>=0?0:-1,this.unsigned)};Le.shr=Le.shiftRight;Le.shiftRightUnsigned=function(i){if(Dr(i)&&(i=i.toInt()),i&=63,i===0)return this;var e=this.high;if(i<32){var t=this.low;return ki(t>>>i|e<<32-i,e>>>i,this.unsigned)}else return i===32?ki(e,0,this.unsigned):ki(e>>>i-32,0,this.unsigned)};Le.shru=Le.shiftRightUnsigned;Le.shr_u=Le.shiftRightUnsigned;Le.toSigned=function(){return this.unsigned?ki(this.low,this.high,!1):this};Le.toUnsigned=function(){return this.unsigned?this:ki(this.low,this.high,!0)};Le.toBytes=function(i){return i?this.toBytesLE():this.toBytesBE()};Le.toBytesLE=function(){var i=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,i&255,i>>>8&255,i>>>16&255,i>>>24]};Le.toBytesBE=function(){var i=this.high,e=this.low;return[i>>>24,i>>>16&255,i>>>8&255,i&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};Li.fromBytes=function(i,e,t){return t?Li.fromBytesLE(i,e):Li.fromBytesBE(i,e)};Li.fromBytesLE=function(i,e){return new Li(i[0]|i[1]<<8|i[2]<<16|i[3]<<24,i[4]|i[5]<<8|i[6]<<16|i[7]<<24,e)};Li.fromBytesBE=function(i,e){return new Li(i[4]<<24|i[5]<<16|i[6]<<8|i[7],i[0]<<24|i[1]<<16|i[2]<<8|i[3],e)};const eZ=d0(owe);class tZ{constructor(e,t){this.blockPosition=e,this.dataPosition=t}toString(){return`${this.blockPosition}:${this.dataPosition}`}compareTo(e){return this.blockPosition-e.blockPosition||this.dataPosition-e.dataPosition}static min(...e){let t,n=0;for(;!t;n+=1)t=e[n];for(;n<e.length;n+=1)t.compareTo(e[n])>0&&(t=e[n]);return t}}function Np(i,e=0,t=!1){if(t)throw new Error("big-endian virtual file offsets not implemented");return new tZ(i[e+7]*1099511627776+i[e+6]*4294967296+i[e+5]*16777216+i[e+4]*65536+i[e+3]*256+i[e+2],i[e+1]<<8|i[e])}class nx{constructor(e,t,n,s=void 0){this.minv=e,this.maxv=t,this.bin=n,this._fetchedSize=s}toUniqueString(){return`${this.minv}..${this.maxv} (bin ${this.bin}, fetchedSize ${this.fetchedSize()})`}toString(){return this.toUniqueString()}compareTo(e){return this.minv.compareTo(e.minv)||this.maxv.compareTo(e.maxv)||this.bin-e.bin}fetchedSize(){return this._fetchedSize!==void 0?this._fetchedSize:this.maxv.blockPosition+(1<<16)-this.minv.blockPosition}}class iZ{constructor({filehandle:e,renameRefSeq:t=n=>n}){this.filehandle=e,this.renameRefSeq=t}_findFirstData(e,t){const n=e.firstDataLine;n?e.firstDataLine=n.compareTo(t)>0?t:n:e.firstDataLine=t}async parse(e={}){return this.setupP||(this.setupP=this._parse(e).catch(t=>{throw this.setupP=void 0,t})),this.setupP}async hasRefSeq(e,t={}){return!!((await this.parse(t)).indices[e]||{}).binIndex}}function lwe(i){return new Promise(e=>setTimeout(e,i))}function nZ(i){if(i.greaterThan(Number.MAX_SAFE_INTEGER)||i.lessThan(Number.MIN_SAFE_INTEGER))throw new Error("integer overflow");return i.toNumber()}function sZ(i){if(i&&i.aborted){if(typeof DOMException<"u")throw new DOMException("aborted","AbortError");{const e=new Error("aborted");throw e.code="ERR_ABORTED",e}}}async function rZ(i){await Promise.resolve(),sZ(i)}function cwe(i,e){return e.minv.blockPosition-i.maxv.blockPosition<65e3&&e.maxv.blockPosition-i.minv.blockPosition<5e6}function hwe(i={}){return"aborted"in i?{signal:i}:i}function oZ(i,e){const t=[];let n=null;return i.length===0?i:(i.sort((s,r)=>{const o=s.minv.blockPosition-r.minv.blockPosition;return o!==0?o:s.minv.dataPosition-r.minv.dataPosition}),i.forEach(s=>{(!e||s.maxv.compareTo(e)>0)&&(n===null?(t.push(s),n=s):cwe(n,s)?s.maxv.compareTo(n.maxv)>0&&(n.maxv=s.maxv):(t.push(s),n=s))}),t)}const uwe=21578050;function dwe(i,e){return i-i%e}function fwe(i,e){return i-i%e+e}class J0 extends iZ{parsePseudoBin(e,t){return{lineCount:nZ(eZ.fromBytesLE(Array.prototype.slice.call(e,t+16,t+24),!0))}}async lineCount(e,t={}){const n=(await this.parse(t)).indices[e];if(!n)return-1;const s=n.stats||{};return s.lineCount===void 0?-1:s.lineCount}fetchBai(e={}){return this.baiP||(this.baiP=this.filehandle.readFile(e).catch(t=>{throw this.baiP=void 0,t})),this.baiP}async _parse(){const e={bai:!0,maxBlockSize:65536},t=await this.fetchBai();if(t.readUInt32LE(0)!==uwe)throw new Error("Not a BAI file");e.refCount=t.readInt32LE(4);const n=((1<<(5+1)*3)-1)/7;e.indices=new Array(e.refCount);let s=8;for(let r=0;r<e.refCount;r+=1){const o=t.readInt32LE(s);let a;s+=4;const l={};for(let u=0;u<o;u+=1){const d=t.readUInt32LE(s);if(s+=4,d===n+1)s+=4,a=this.parsePseudoBin(t,s),s+=32;else{if(d>n+1)throw new Error("bai index contains too many bins, please use CSI");{const f=t.readInt32LE(s);s+=4;const g=new Array(f);for(let p=0;p<f;p+=1){const m=Np(t,s),v=Np(t,s+8);s+=16,this._findFirstData(e,m),g[p]=new nx(m,v,d)}l[d]=g}}}const c=t.readInt32LE(s);s+=4;const h=new Array(c);for(let u=0;u<c;u+=1)h[u]=Np(t,s),s+=8,this._findFirstData(e,h[u]);e.indices[r]={binIndex:l,linearIndex:h,stats:a}}return e}async indexCov(e,t,n,s={}){const r=t!==void 0,o=(await this.parse(s)).indices[e];if(!o)return[];const{linearIndex:a=[],stats:l}=o;if(!a.length)return[];const c=n!==void 0?fwe(n,16384):(a.length-1)*16384,h=t!==void 0?dwe(t,16384):0;let u;r?u=new Array((c-h)/16384):u=new Array(a.length-1);const d=a[a.length-1].blockPosition;if(c>(a.length-1)*16384)throw new Error("query outside of range of linear index");let f=a[h/16384].blockPosition;for(let g=h/16384,p=0;g<c/16384;g++,p++)u[p]={score:a[g+1].blockPosition-f,start:g*16384,end:g*16384+16384},f=a[g+1].blockPosition;return u.map(g=>({...g,score:g.score*l.lineCount/d}))}reg2bins(e,t){return t-=1,[[0,0],[1+(e>>26),1+(t>>26)],[9+(e>>23),9+(t>>23)],[73+(e>>20),73+(t>>20)],[585+(e>>17),585+(t>>17)],[4681+(e>>14),4681+(t>>14)]]}async blocksForRange(e,t,n,s={}){t<0&&(t=0);const r=await this.parse(s);if(!r)return[];const o=r.indices[e];if(!o)return[];const a=this.reg2bins(t,n),l=[];for(const[f,g]of a)for(let p=f;p<=g;p++)if(o.binIndex[p]){const m=o.binIndex[p];for(let v=0;v<m.length;++v)l.push(new nx(m[v].minv,m[v].maxv,p))}const c=o.linearIndex.length;let h=null;const u=Math.min(t>>14,c-1),d=Math.min(n>>14,c-1);for(let f=u;f<=d;++f){const g=o.linearIndex[f];g&&(!h||g.compareTo(h)<0)&&(h=g)}return oZ(l,h)}}const gwe=21582659,pwe=38359875;function mwe(i,e){return i*2**e}function k9(i,e){return Math.floor(i/2**e)}class bA extends iZ{constructor(e){super(e),this.maxBinNumber=0,this.depth=0,this.minShift=0}async lineCount(e){const t=await this.parse();if(!t||!t.indices[e])return-1;const{stats:n}=t.indices[e];return n?n.lineCount:-1}async indexCov(){return[]}parseAuxData(e,t,n){if(n<30)return{};const s={};if(s.formatFlags=e.readInt32LE(t),s.coordinateType=s.formatFlags&65536?"zero-based-half-open":"1-based-closed",s.format={0:"generic",1:"SAM",2:"VCF"}[s.formatFlags&15],!s.format)throw new Error(`invalid Tabix preset format flags ${s.formatFlags}`);s.columnNumbers={ref:e.readInt32LE(t+4),start:e.readInt32LE(t+8),end:e.readInt32LE(t+12)},s.metaValue=e.readInt32LE(t+16),s.metaChar=s.metaValue?String.fromCharCode(s.metaValue):"",s.skipLines=e.readInt32LE(t+20);const r=e.readInt32LE(t+24);return Object.assign(s,this._parseNameBytes(e.subarray(t+28,t+28+r))),s}_parseNameBytes(e){let t=0,n=0;const s=[],r={};for(let o=0;o<e.length;o+=1)if(!e[o]){if(n<o){let a=e.toString("utf8",n,o);a=this.renameRefSeq(a),s[t]=a,r[a]=t}n=o+1,t+=1}return{refNameToId:r,refIdToName:s}}async _parse(e){const t={csi:!0,maxBlockSize:65536},n=await this.filehandle.readFile(e),s=await jT(n);if(s.readUInt32LE(0)===gwe)t.csiVersion=1;else if(s.readUInt32LE(0)===pwe)t.csiVersion=2;else throw new Error("Not a CSI file");this.minShift=s.readInt32LE(4),this.depth=s.readInt32LE(8),this.maxBinNumber=((1<<(this.depth+1)*3)-1)/7;const r=s.readInt32LE(12);r&&Object.assign(t,this.parseAuxData(s,16,r)),t.refCount=s.readInt32LE(16+r),t.indices=new Array(t.refCount);let o=16+r+4;for(let a=0;a<t.refCount;a+=1){await rZ(e.signal);const l=s.readInt32LE(o);o+=4;const c={};let h;for(let u=0;u<l;u+=1){const d=s.readUInt32LE(o);if(d>this.maxBinNumber)h=this.parsePseudoBin(s,o+4),o+=4+8+4+16+16;else{const f=Np(s,o+4);this._findFirstData(t,f);const g=s.readInt32LE(o+12);o+=16;const p=new Array(g);for(let m=0;m<g;m+=1){const v=Np(s,o),b=Np(s,o+8);o+=16,p[m]=new nx(v,b,d)}c[d]=p}}t.indices[a]={binIndex:c,stats:h}}return t}parsePseudoBin(e,t){return{lineCount:nZ(eZ.fromBytesLE(Array.prototype.slice.call(e,t+28,t+36),!0))}}async blocksForRange(e,t,n,s={}){t<0&&(t=0);const r=await this.parse(s),o=r==null?void 0:r.indices[e];if(!o)return[];const a=this.reg2bins(t,n),l=[];for(const[c,h]of a)for(let u=c;u<=h;u++)if(o.binIndex[u]){const d=o.binIndex[u];for(let f=0;f<d.length;++f)l.push(new nx(d[f].minv,d[f].maxv,u))}return oZ(l,new tZ(0,0))}reg2bins(e,t){e-=1,e<1&&(e=1),t>2**50&&(t=2**34),t-=1;let n=0,s=0,r=this.minShift+this.depth*3;const o=[];for(;n<=this.depth;r-=3,s+=mwe(1,n*3),n+=1){const a=s+k9(e,r),l=s+k9(t,r);if(l-a+o.length>this.maxBinNumber)throw new Error(`query ${e}-${t} is too large for current binning scheme (shift ${this.minShift}, depth ${this.depth}), try a smaller query or a coarser index binning scheme`);o.push([a,l])}return o}}var ph=Vr.Buffer,tN=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(tN=new Int32Array(tN));function aZ(i){if(ph.isBuffer(i))return i;var e=typeof ph.alloc=="function"&&typeof ph.from=="function";if(typeof i=="number")return e?ph.alloc(i):new ph(i);if(typeof i=="string")return e?ph.from(i):new ph(i);throw new Error("input must be buffer, number, or string, received "+typeof i)}function _we(i){var e=aZ(4);return e.writeInt32BE(i,0),e}function FO(i,e){i=aZ(i),ph.isBuffer(e)&&(e=e.readUInt32BE(0));for(var t=~~e^-1,n=0;n<i.length;n++)t=tN[(t^i[n])&255]^t>>>8;return t^-1}function BO(){return _we(FO.apply(null,arguments))}BO.signed=function(){return FO.apply(null,arguments)};BO.unsigned=function(){return FO.apply(null,arguments)>>>0};var bwe=BO;const vwe=d0(bwe);var vA,A9;function wwe(){if(A9)return vA;A9=1;var i=function(n,s){return Object.prototype.hasOwnProperty.call(n,s)},e=function(n,s){return Object.prototype.propertyIsEnumerable.call(n,s)};function t(n){if(n==null)throw new TypeError("Cannot convert undefined or null to object");var s=[];for(var r in n)i(n,r)&&e(n,r)&&s.push([r,n[r]]);return s}return vA=t,vA}var ywe=typeof Object.entries=="function"?Object.entries:wwe();const Cwe=d0(ywe);class Swe{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e))return this.oldCache.get(e)}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return this._size+e}}var xwe=Swe;const Dwe=d0(xwe),no={BAM_FPAIRED:1,BAM_FPROPER_PAIR:2,BAM_FUNMAP:4,BAM_FMUNMAP:8,BAM_FREVERSE:16,BAM_FMREVERSE:32,BAM_FREAD1:64,BAM_FREAD2:128,BAM_FSECONDARY:256,BAM_FQCFAIL:512,BAM_FDUP:1024,BAM_FSUPPLEMENTARY:2048},E9="=ACMGRSVTWYHKDBN".split(""),e_="MIDNSHP=X???????".split("");class Lwe{constructor(e){this.data={},this._tagList=[],this._allTagsParsed=!1;const{bytes:t,fileOffset:n}=e,{byteArray:s,start:r}=t;this.data={},this.bytes=t,this._id=n,this._refID=s.readInt32LE(r+4),this.data.start=s.readInt32LE(r+8),this.flags=(s.readInt32LE(r+16)&4294901760)>>16}get(e){return this[e]?this.data[e]?this.data[e]:(this.data[e]=this[e](),this.data[e]):this._get(e.toLowerCase())}end(){return this.get("start")+this.get("length_on_ref")}seq_id(){return this._refID}_get(e){return e in this.data?this.data[e]:(this.data[e]=this._parseTag(e),this.data[e])}_tags(){this._parseAllTags();let e=["seq"];this.isSegmentUnmapped()||e.push("start","end","strand","score","qual","MQ","CIGAR","length_on_ref","template_length"),this.isPaired()&&e.push("next_segment_position","pair_orientation"),e=e.concat(this._tagList||[]),Object.keys(this.data).forEach(n=>{n[0]!=="_"&&n!=="next_seq_id"&&e.push(n)});const t={};return e.filter(n=>{if(n in this.data&&this.data[n]===void 0||n==="CG"||n==="cg")return!1;const s=n.toLowerCase(),r=t[s];return t[s]=!0,!r})}parent(){}children(){return this.get("subfeatures")}id(){return this._id}mq(){const e=(this.get("_bin_mq_nl")&65280)>>8;return e===255?void 0:e}score(){return this.get("mq")}qual(){var e;return(e=this.qualRaw())===null||e===void 0?void 0:e.join(" ")}qualRaw(){if(this.isSegmentUnmapped())return;const{start:e,byteArray:t}=this.bytes,n=e+36+this.get("_l_read_name")+this.get("_n_cigar_op")*4+this.get("_seq_bytes"),s=this.get("seq_length");return t.subarray(n,n+s)}strand(){return this.isReverseComplemented()?-1:1}multi_segment_next_segment_strand(){if(!this.isMateUnmapped())return this.isMateReverseComplemented()?-1:1}name(){return this.get("_read_name")}_read_name(){const e=this.get("_l_read_name"),{byteArray:t,start:n}=this.bytes;return t.toString("ascii",n+36,n+36+e-1)}_parseTag(e){if(this._allTagsParsed)return;const{byteArray:t,start:n}=this.bytes;let s=this._tagOffset||n+36+this.get("_l_read_name")+this.get("_n_cigar_op")*4+this.get("_seq_bytes")+this.get("seq_length");const r=this.bytes.end;let o;for(;s<r&&o!==e;){const a=String.fromCharCode(t[s],t[s+1]);o=a.toLowerCase();const l=String.fromCharCode(t[s+2]);s+=3;let c;switch(l){case"A":c=String.fromCharCode(t[s]),s+=1;break;case"i":c=t.readInt32LE(s),s+=4;break;case"I":c=t.readUInt32LE(s),s+=4;break;case"c":c=t.readInt8(s),s+=1;break;case"C":c=t.readUInt8(s),s+=1;break;case"s":c=t.readInt16LE(s),s+=2;break;case"S":c=t.readUInt16LE(s),s+=2;break;case"f":c=t.readFloatLE(s),s+=4;break;case"Z":case"H":for(c="";s<=r;){const h=t[s++];if(h===0)break;c+=String.fromCharCode(h)}break;case"B":{c="";const h=t[s++],u=String.fromCharCode(h),d=t.readInt32LE(s);if(s+=4,u==="i")if(a==="CG")for(let f=0;f<d;f++){const g=t.readInt32LE(s),p=g>>4,m=e_[g&15];c+=p+m,s+=4}else for(let f=0;f<d;f++)c+=t.readInt32LE(s),f+1<d&&(c+=","),s+=4;if(u==="I")if(a==="CG")for(let f=0;f<d;f++){const g=t.readUInt32LE(s),p=g>>4,m=e_[g&15];c+=p+m,s+=4}else for(let f=0;f<d;f++)c+=t.readUInt32LE(s),f+1<d&&(c+=","),s+=4;if(u==="s")for(let f=0;f<d;f++)c+=t.readInt16LE(s),f+1<d&&(c+=","),s+=2;if(u==="S")for(let f=0;f<d;f++)c+=t.readUInt16LE(s),f+1<d&&(c+=","),s+=2;if(u==="c")for(let f=0;f<d;f++)c+=t.readInt8(s),f+1<d&&(c+=","),s+=1;if(u==="C")for(let f=0;f<d;f++)c+=t.readUInt8(s),f+1<d&&(c+=","),s+=1;if(u==="f")for(let f=0;f<d;f++)c+=t.readFloatLE(s),f+1<d&&(c+=","),s+=4;break}default:console.warn(`Unknown BAM tag type '${l}', tags may be incomplete`),c=void 0,s=r}if(this._tagOffset=s,this._tagList.push(a),o===e)return c;this.data[o]=c}this._allTagsParsed=!0}_parseAllTags(){this._parseTag("")}_parseCigar(e){return e.match(/\d+\D/g).map(t=>[t.match(/\D/)[0].toUpperCase(),parseInt(t,10)])}isPaired(){return!!(this.flags&no.BAM_FPAIRED)}isProperlyPaired(){return!!(this.flags&no.BAM_FPROPER_PAIR)}isSegmentUnmapped(){return!!(this.flags&no.BAM_FUNMAP)}isMateUnmapped(){return!!(this.flags&no.BAM_FMUNMAP)}isReverseComplemented(){return!!(this.flags&no.BAM_FREVERSE)}isMateReverseComplemented(){return!!(this.flags&no.BAM_FMREVERSE)}isRead1(){return!!(this.flags&no.BAM_FREAD1)}isRead2(){return!!(this.flags&no.BAM_FREAD2)}isSecondary(){return!!(this.flags&no.BAM_FSECONDARY)}isFailedQc(){return!!(this.flags&no.BAM_FQCFAIL)}isDuplicate(){return!!(this.flags&no.BAM_FDUP)}isSupplementary(){return!!(this.flags&no.BAM_FSUPPLEMENTARY)}cigar(){if(this.isSegmentUnmapped())return;const{byteArray:e,start:t}=this.bytes,n=this.get("_n_cigar_op");let s=t+36+this.get("_l_read_name");const r=this.get("seq_length");let o="",a=0,l=e.readInt32LE(s),c=l>>4,h=e_[l&15];if(h==="S"&&c===r)return s+=4,l=e.readInt32LE(s),c=l>>4,h=e_[l&15],h!=="N"&&console.warn("CG tag with no N tag"),this.data.length_on_ref=c,this.get("CG");for(let u=0;u<n;++u)l=e.readInt32LE(s),c=l>>4,h=e_[l&15],o+=c+h,h!=="H"&&h!=="S"&&h!=="I"&&(a+=c),s+=4;return this.data.length_on_ref=a,o}_flags(){}length_on_ref(){return this.data.length_on_ref?this.data.length_on_ref:(this.get("cigar"),this.data.length_on_ref)}_n_cigar_op(){return this.get("_flag_nc")&65535}_l_read_name(){return this.get("_bin_mq_nl")&255}_seq_bytes(){return this.get("seq_length")+1>>1}getReadBases(){return this.seq()}seq(){const{byteArray:e,start:t}=this.bytes,n=t+36+this.get("_l_read_name")+this.get("_n_cigar_op")*4,s=this.get("_seq_bytes"),r=this.get("seq_length");let o="",a=0;for(let l=0;l<s;++l){const c=e[n+l];o+=E9[(c&240)>>4],a++,a<r&&(o+=E9[c&15],a++)}return o}getPairOrientation(){if(!this.isSegmentUnmapped()&&!this.isMateUnmapped()&&this._refID===this._next_refid()){const e=this.isReverseComplemented()?"R":"F",t=this.isMateReverseComplemented()?"R":"F";let n=" ",s=" ";this.isRead1()?(n="1",s="2"):this.isRead2()&&(n="2",s="1");const r=[];return this.template_length()>0?(r[0]=e,r[1]=n,r[2]=t,r[3]=s):(r[2]=e,r[3]=n,r[0]=t,r[1]=s),r.join("")}return null}_bin_mq_nl(){return this.bytes.byteArray.readInt32LE(this.bytes.start+12)}_flag_nc(){return this.bytes.byteArray.readInt32LE(this.bytes.start+16)}seq_length(){return this.bytes.byteArray.readInt32LE(this.bytes.start+20)}_next_refid(){return this.bytes.byteArray.readInt32LE(this.bytes.start+24)}_next_pos(){return this.bytes.byteArray.readInt32LE(this.bytes.start+28)}template_length(){return this.bytes.byteArray.readInt32LE(this.bytes.start+32)}toJSON(){const e={};return Object.keys(this).forEach(t=>{t.charAt(0)==="_"||t==="bytes"||(e[t]=this[t])}),e}}function kwe(i){const e=i.split(/\r?\n/),t=[];return e.forEach(n=>{const[s,...r]=n.split(/\t/),o=r.map(a=>{const[l,c]=a.split(":",2);return{tag:l,value:c}});s&&t.push({tag:s.substr(1),data:o})}),t}const Awe=21840194,wA=1<<16;function yA(i){return[].concat(...i)}async function Ewe(i){const e=[];for await(const t of i)e.push(t);return e}class Iwe{constructor({bamFilehandle:e,bamPath:t,bamUrl:n,baiPath:s,baiFilehandle:r,baiUrl:o,csiPath:a,csiFilehandle:l,csiUrl:c,fetchSizeLimit:h,chunkSizeLimit:u,yieldThreadTime:d=100,renameRefSeqs:f=g=>g}){if(this.featureCache=new AO({cache:new Dwe({maxSize:50}),fill:async({chunk:g,opts:p},m)=>{const{data:v,cpositions:b,dpositions:w}=await this._readChunk({chunk:g,opts:{...p,signal:m}});return await this.readBamFeatures(v,b,w,g)}}),this.renameRefSeq=f,e)this.bam=e;else if(t)this.bam=new Fh(t);else if(n)this.bam=new Ac(n);else throw new Error("unable to initialize bam");if(l)this.index=new bA({filehandle:l});else if(a)this.index=new bA({filehandle:new Fh(a)});else if(c)this.index=new bA({filehandle:new Ac(c)});else if(r)this.index=new J0({filehandle:r});else if(s)this.index=new J0({filehandle:new Fh(s)});else if(o)this.index=new J0({filehandle:new Ac(o)});else if(t)this.index=new J0({filehandle:new Fh(`${t}.bai`)});else if(n)this.index=new J0({filehandle:new Ac(`${n}.bai`)});else throw new Error("unable to infer index format");this.fetchSizeLimit=h||5e8,this.chunkSizeLimit=u||3e8,this.yieldThreadTime=d}async getHeader(e={}){const t=hwe(e),n=await this.index.parse(t),s=n.firstDataLine?n.firstDataLine.blockPosition+65535:void 0;let r;if(s){const h=await this.bam.read(Buffer.alloc(s+wA),0,s+wA,0,t),{bytesRead:u}=h;if({buffer:r}=h,!u)throw new Error("Error reading header");u<s?r=r.subarray(0,u):r=r.subarray(0,s)}else r=await this.bam.readFile(t);const o=await jT(r);if(o.readInt32LE(0)!==Awe)throw new Error("Not a BAM file");const a=o.readInt32LE(4);this.header=o.toString("utf8",8,8+a);const{chrToIndex:l,indexToChr:c}=await this._readRefSeqs(a+8,65535,t);return this.chrToIndex=l,this.indexToChr=c,kwe(this.header)}async getHeaderText(e={}){return await this.getHeader(e),this.header}async _readRefSeqs(e,t,n={}){if(e>t)return this._readRefSeqs(e,t*2,n);const s=t+wA,{bytesRead:r,buffer:o}=await this.bam.read(Buffer.alloc(s),0,t,0,n);if(!r)throw new Error("Error reading refseqs from header");const a=await jT(o.subarray(0,Math.min(r,t))),l=a.readInt32LE(e);let c=e+4;const h={},u=[];for(let d=0;d<l;d+=1){const f=a.readInt32LE(c),g=this.renameRefSeq(a.toString("utf8",c+4,c+4+f-1)),p=a.readInt32LE(c+f+4);if(h[g]=d,u.push({refName:g,length:p}),c=c+8+f,c>a.length)return console.warn(`BAM header is very big.  Re-fetching ${t} bytes.`),this._readRefSeqs(e,t*2,n)}return{chrToIndex:h,indexToChr:u}}async getRecordsForRange(e,t,n,s={viewAsPairs:!1,pairAcrossChr:!1,maxInsertSize:2e5}){return yA(await Ewe(this.streamRecordsForRange(e,t,n,s)))}async*streamRecordsForRange(e,t,n,s={}){const{signal:r}=s,o=this.chrToIndex&&this.chrToIndex[e];let a;if(!(o>=0))a=[];else if(a=await this.index.blocksForRange(o,t-1,n,s),!a)throw new Error("Error in index fetch");for(let c=0;c<a.length;c+=1){await rZ(r);const h=a[c].fetchedSize();if(h>this.chunkSizeLimit)throw new Error(`Too many BAM features. BAM chunk size ${h} bytes exceeds chunkSizeLimit of ${this.chunkSizeLimit}`)}const l=a.map(c=>c.fetchedSize()).reduce((c,h)=>c+h,0);if(l>this.fetchSizeLimit)throw new Error(`data size of ${l.toLocaleString()} bytes exceeded fetch size limit of ${this.fetchSizeLimit.toLocaleString()} bytes`);yield*this._fetchChunkFeatures(a,o,t,n,s)}async*_fetchChunkFeatures(e,t,n,s,r){const{viewAsPairs:o=!1}=r,a=[];let l=!1;for(let c=0;c<e.length;c++){const h=e[c],u=await this.featureCache.get(h.toString(),{chunk:h,opts:r},r.signal),d=[];for(let f=0;f<u.length;f+=1){const g=u[f];if(g.seq_id()===t)if(g.get("start")>=s){l=!0;break}else g.get("end")>=n&&d.push(g)}if(a.push(d),yield d,l)break}sZ(r.signal),o&&(yield this.fetchPairs(t,a,r))}async fetchPairs(e,t,n){const{pairAcrossChr:s=!1,maxInsertSize:r=2e5}=n,o={},a={};t.map(d=>{const f={};for(let g=0;g<d.length;g++){const p=d[g].name(),m=d[g].id();f[p]||(f[p]=0),f[p]++,a[m]=1}Cwe(f).forEach(([g,p])=>{p===1&&(o[g]=!0)})});const l=[];t.map(d=>{for(let f=0;f<d.length;f++){const g=d[f],p=g.name(),m=g.get("start"),v=g._next_pos(),b=g._next_refid();o[p]&&(s||b===e&&Math.abs(m-v)<r)&&l.push(this.index.blocksForRange(b,v,v+1,n))}});const c=yA(await Promise.all(l)).sort().filter((d,f,g)=>!f||d.toString()!==g[f-1].toString()),h=c.map(d=>d.fetchedSize()).reduce((d,f)=>d+f,0);if(h>this.fetchSizeLimit)throw new Error(`data size of ${h.toLocaleString()} bytes exceeded fetch size limit of ${this.fetchSizeLimit.toLocaleString()} bytes`);const u=c.map(async d=>{const{data:f,cpositions:g,dpositions:p,chunk:m}=await this._readChunk({chunk:d,opts:n}),v=await this.readBamFeatures(f,g,p,m),b=[];for(let w=0;w<v.length;w+=1){const y=v[w];o[y.get("name")]&&!a[y.id()]&&b.push(y)}return b});return yA(await Promise.all(u))}async _readChunk({chunk:e,opts:t}){const n=e.fetchedSize(),{buffer:s,bytesRead:r}=await this.bam.read(Buffer.alloc(n),0,n,e.minv.blockPosition,t),{buffer:o,cpositions:a,dpositions:l}=await Y_e(s.subarray(0,Math.min(r,n)),e);return{data:o,cpositions:a,dpositions:l,chunk:e}}async readBamFeatures(e,t,n,s){let r=0;const o=[];let a=0,l=+Date.now();for(;r+4<e.length;){const c=e.readInt32LE(r),h=r+4+c-1;if(n){for(;r+s.minv.dataPosition>=n[a++];);a--}if(h<e.length){const u=new Lwe({bytes:{byteArray:e,start:r,end:h},fileOffset:t?t[a]*256+(r-n[a])+s.minv.dataPosition+1:vwe.signed(e.slice(r,h))});o.push(u),this.yieldThreadTime&&+Date.now()-l>this.yieldThreadTime&&(await lwe(1),l=+Date.now())}r=h+1}return o}async hasRefSeq(e){const t=this.chrToIndex&&this.chrToIndex[e];return this.index.hasRefSeq(t)}async lineCount(e){const t=this.chrToIndex&&this.chrToIndex[e];return this.index.lineCount(t)}async indexCov(e,t,n){await this.index.parse();const s=this.chrToIndex&&this.chrToIndex[e];return this.index.indexCov(s,t,n)}async blocksForRange(e,t,n,s){await this.index.parse();const r=this.chrToIndex&&this.chrToIndex[e];return this.index.blocksForRange(r,t,n,s)}}(function(){(function(i){(function(e){var t={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function n(D){return D&&DataView.prototype.isPrototypeOf(D)}if(t.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=ArrayBuffer.isView||function(D){return D&&s.indexOf(Object.prototype.toString.call(D))>-1};function o(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(D))throw new TypeError("Invalid character in header field name");return D.toLowerCase()}function a(D){return typeof D!="string"&&(D=String(D)),D}function l(D){var N={next:function(){var T=D.shift();return{done:T===void 0,value:T}}};return t.iterable&&(N[Symbol.iterator]=function(){return N}),N}function c(D){this.map={},D instanceof c?D.forEach(function(N,T){this.append(T,N)},this):Array.isArray(D)?D.forEach(function(N){this.append(N[0],N[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(N){this.append(N,D[N])},this)}c.prototype.append=function(D,N){D=o(D),N=a(N);var T=this.map[D];this.map[D]=T?T+", "+N:N},c.prototype.delete=function(D){delete this.map[o(D)]},c.prototype.get=function(D){return D=o(D),this.has(D)?this.map[D]:null},c.prototype.has=function(D){return this.map.hasOwnProperty(o(D))},c.prototype.set=function(D,N){this.map[o(D)]=a(N)},c.prototype.forEach=function(D,N){for(var T in this.map)this.map.hasOwnProperty(T)&&D.call(N,this.map[T],T,this)},c.prototype.keys=function(){var D=[];return this.forEach(function(N,T){D.push(T)}),l(D)},c.prototype.values=function(){var D=[];return this.forEach(function(N){D.push(N)}),l(D)},c.prototype.entries=function(){var D=[];return this.forEach(function(N,T){D.push([T,N])}),l(D)},t.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);function h(D){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}function u(D){return new Promise(function(N,T){D.onload=function(){N(D.result)},D.onerror=function(){T(D.error)}})}function d(D){var N=new FileReader,T=u(N);return N.readAsArrayBuffer(D),T}function f(D){var N=new FileReader,T=u(N);return N.readAsText(D),T}function g(D){for(var N=new Uint8Array(D),T=new Array(N.length),$=0;$<N.length;$++)T[$]=String.fromCharCode(N[$]);return T.join("")}function p(D){if(D.slice)return D.slice(0);var N=new Uint8Array(D.byteLength);return N.set(new Uint8Array(D)),N.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(D){this._bodyInit=D,D?typeof D=="string"?this._bodyText=D:t.blob&&Blob.prototype.isPrototypeOf(D)?this._bodyBlob=D:t.formData&&FormData.prototype.isPrototypeOf(D)?this._bodyFormData=D:t.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)?this._bodyText=D.toString():t.arrayBuffer&&t.blob&&n(D)?(this._bodyArrayBuffer=p(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(D)||r(D))?this._bodyArrayBuffer=p(D):this._bodyText=D=Object.prototype.toString.call(D):this._bodyText="",this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var D=h(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var D=h(this);if(D)return D;if(this._bodyBlob)return f(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(g(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(D){var N=D.toUpperCase();return v.indexOf(N)>-1?N:D}function w(D,N){N=N||{};var T=N.body;if(D instanceof w){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,N.headers||(this.headers=new c(D.headers)),this.method=D.method,this.mode=D.mode,this.signal=D.signal,!T&&D._bodyInit!=null&&(T=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new c(N.headers)),this.method=b(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&T)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(T)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})};function y(D){var N=new FormData;return D.trim().split("&").forEach(function(T){if(T){var $=T.split("="),U=$.shift().replace(/\+/g," "),ee=$.join("=").replace(/\+/g," ");N.append(decodeURIComponent(U),decodeURIComponent(ee))}}),N}function x(D){var N=new c,T=D.replace(/\r?\n[\t ]+/g," ");return T.split(/\r?\n/).forEach(function($){var U=$.split(":"),ee=U.shift().trim();if(ee){var ce=U.join(":").trim();N.append(ee,ce)}}),N}m.call(w.prototype);function k(D,N){N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in N?N.statusText:"OK",this.headers=new c(N.headers),this.url=N.url||"",this._initBody(D)}m.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},k.error=function(){var D=new k(null,{status:0,statusText:""});return D.type="error",D};var S=[301,302,303,307,308];k.redirect=function(D,N){if(S.indexOf(N)===-1)throw new RangeError("Invalid status code");return new k(null,{status:N,headers:{location:D}})},e.DOMException=i.DOMException;try{new e.DOMException}catch{e.DOMException=function(D,N){this.message=D,this.name=N;var T=Error(D);this.stack=T.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function L(D,N){return new Promise(function(T,$){var U=new w(D,N);if(U.signal&&U.signal.aborted)return $(new e.DOMException("Aborted","AbortError"));var ee=new XMLHttpRequest;function ce(){ee.abort()}ee.onload=function(){var fe={status:ee.status,statusText:ee.statusText,headers:x(ee.getAllResponseHeaders()||"")};fe.url="responseURL"in ee?ee.responseURL:fe.headers.get("X-Request-URL");var Ce="response"in ee?ee.response:ee.responseText;T(new k(Ce,fe))},ee.onerror=function(){$(new TypeError("Network request failed"))},ee.ontimeout=function(){$(new TypeError("Network request failed"))},ee.onabort=function(){$(new e.DOMException("Aborted","AbortError"))},ee.open(U.method,U.url,!0),U.credentials==="include"?ee.withCredentials=!0:U.credentials==="omit"&&(ee.withCredentials=!1),"responseType"in ee&&t.blob&&(ee.responseType="blob"),U.headers.forEach(function(fe,Ce){ee.setRequestHeader(Ce,fe)}),U.signal&&(U.signal.addEventListener("abort",ce),ee.onreadystatechange=function(){ee.readyState===4&&U.signal.removeEventListener("abort",ce)}),ee.send(typeof U._bodyInit>"u"?null:U._bodyInit)})}return L.polyfill=!0,i.fetch||(i.fetch=L,i.Headers=c,i.Request=w,i.Response=k),e.Headers=c,e.Request=w,e.Response=k,e.fetch=L,Object.defineProperty(e,"__esModule",{value:!0}),e})({})})(typeof self<"u"?self:uf)})();class Twe extends NL(u0){constructor(e,t){const n={channel:"x",windowSize:2e4,...e};if(super(t,n.channel),zc(this,"lastRequestId",0),zc(this,"chrPrefixFixer",r=>r),this.params=n,!this.params.url)throw new Error("No URL provided for BamSource");const s=r=>new Ac(ML(r,this.view.getBaseUrl()));this.bam=new Iwe({bamFilehandle:s(this.params.url),baiFilehandle:s(this.params.indexUrl??this.params.url+".bai")}),this.headerPromise=this.bam.getHeader(),this.headerPromise.then(r=>{var o,a;const l=this.genome.hasChrPrefix(),c=(a=(o=this.bam.indexToChr)==null?void 0:o[0])==null?void 0:a.refName.startsWith("chr");l&&!c?this.chrPrefixFixer=h=>h.replace("chr",""):!l&&c&&(this.chrPrefixFixer=h=>"chr"+h)})}async onDomainChanged(e){const t=this.params.windowSize;if(e[1]-e[0]>t)return;await this.headerPromise;const n=this.quantizeInterval(e,t);if(this.checkAndUpdateLastInterval(n)){const s=this.genome.continuousToDiscreteChromosomeIntervals(n),r=await Promise.all(s.map(o=>this.bam.getRecordsForRange(this.chrPrefixFixer(o.chrom),o.startPos,o.endPos).then(a=>a.map(l=>({chrom:o.chrom,start:l.get("start"),end:l.get("end"),name:l.get("name"),MD:l.get("MD"),cigar:l.get("cigar"),mapq:l.get("mq"),strand:l.get("strand")===1?"+":"-"})))));this.publishData(r.flat())}}}function Nwe(i,e){if(Hme(i))return new Ume(i,e);if($me(i))return new jme(i,e);if(qme(i))return new Gme(i,e);if(Mwe(i))return Wwe(i.lazy,e);throw new Error("Cannot figure out the data source type: "+JSON.stringify(i))}function Mwe(i){return"lazy"in i}function Rwe(i){return(i==null?void 0:i.type)=="axisTicks"}function Owe(i){return(i==null?void 0:i.type)=="axisGenome"}function Pwe(i){return(i==null?void 0:i.type)=="indexedFasta"}function Fwe(i){return(i==null?void 0:i.type)=="bigwig"}function Bwe(i){return(i==null?void 0:i.type)=="bigbed"}function Vwe(i){return(i==null?void 0:i.type)=="bam"}function Wwe(i,e){if(Rwe(i))return new Zme(i,e);if(Owe(i))return new Yme(i,e);if(Pwe(i))return new ebe(i,e);if(Fwe(i))return new W1e(i,e);if(Bwe(i))return new rwe(i,e);if(Vwe(i))return new Twe(i,e);throw new Error("Cannot figure out the data source type: "+JSON.stringify(i))}function zwe(i){const e=Object.keys(i).filter(n=>typeof n=="string"),t=new Function("source","return { "+e.map(n=>JSON.stringify(n)).map(n=>`${n}: source[${n}]`).join(`,
`)+" };");return t.properties=e,t}class sx extends Ln{get behavior(){return Qc}constructor(){super();const e=t=>{const n=zwe(t);this.handle=s=>this._propagate(n(s)),this.handle(t)};this.handle=e,this.beginBatch=t=>{Eq(t)&&(this.handle=e),super.beginBatch(t)}}}function Hwe(i){return"name"in i}var RC;class lZ extends cw{constructor(e,t,n){super(),zs(this,RC,void 0),this.provider=n,this.params=e}get identifier(){return this.params.name}updateDynamicData(e){j_(this,RC,e),this.loadSynchronously()}loadSynchronously(){const e=Gi(this,RC)??this.provider(this.params.name)??[];let t=n=>n;if(Array.isArray(e))e.length>0&&(t=cG(e[0]));else throw new Error(`Named data "${this.params.name}" is not an array!`);this.reset(),this.beginBatch({type:"file"});for(const n of e)this._propagate(t(n));this.complete()}async load(){this.loadSynchronously()}}RC=new WeakMap;class cZ{constructor(){this._dataSourcesByHost=new Map,this._collectorsByHost=new Map,this._observers=new Map}get dataSources(){return[...new Set(this._dataSourcesByHost.values()).values()]}get collectors(){return[...this._collectorsByHost.values()]}addObserver(e,t){let n=this._observers.get(t);n||(n=[],this._observers.set(t,n)),n.push(e)}_relayObserverCallback(e,t){const n=this._observers.get(t);if(n)for(const s of n)s(e)}addDataSource(e,t){this._dataSourcesByHost.set(t,e)}findDataSourceByKey(e){return this._dataSourcesByHost.get(e)}findNamedDataSource(e){let t,n=[];for(const[s,r]of this._dataSourcesByHost.entries())if(r instanceof lZ&&e==r.identifier){if(t&&t!==r)throw new Error(`Found multiple instances of named data: ${e}. Data flow optimization is broken (it's a bug).`);t=r,n.push(s)}if(t)return{dataSource:t,hosts:n}}addCollector(e,t){this._collectorsByHost.set(t,e),e.observers.push(n=>this._relayObserverCallback(n,t))}findCollectorByKey(e){return this._collectorsByHost.get(e)}initialize(){for(const e of this.dataSources)e.visit(t=>t.initialize())}}function Uwe(i,e){const t=[];let n;const s=e??new cZ,r=[];function o(h,u=()=>{}){if(!n)throw u()||new Error("Cannot append data flow node, no parent exist!");return n.addChild(h),n=h,h}function a(h,u){return o(h,()=>new Error(`Cannot append a transform because no (inherited) data are available! ${u?JSON.stringify(u):""}`))}function l(h,u){for(const d of h){let f;try{f=Fme(d,u)}catch(g){throw console.warn(g),new Error(`Cannot initialize "${d.type}" transform: ${g}`)}f.behavior&Fu&&a(new sx),a(f)}}const c=h=>{if(t.push(n),h.spec.data){const u=Hwe(h.spec.data)?new lZ(h.spec.data,h,h.context.getNamedDataFromProvider):Nwe(h.spec.data,h);n=u,s.addDataSource(u,h)}if(h.spec.transform&&l(h.spec.transform,h),h instanceof Ss){if(!n)throw new Error("A unit view has no (inherited) data source");const u=$we(h);if(u){r.push(u.rewrite);for(const f of u.transforms)a(f)}h.mark.isPickingParticipant()&&(a(new sx),a(new aG({type:"identifier"})));const d=new sG({type:"collect",groupby:h.getFacetFields(),sort:jwe(h,u==null?void 0:u.rewrittenEncoding)});o(d),s.addCollector(d,h)}nG(h.spec)};return c.postOrder=h=>{n=t.pop()},i.visit(c),r.forEach(h=>h()),s}function $we(i){var e;const t=[],n={},s=[];for(const[o,a]of Object.entries(i.getEncoding())){const l=o;hv(l)&&pj(a)&&s.push({channel:l,chromPosDef:a})}const r=YD(s,o=>a0(o.channel),o=>o.chromPosDef.chrom);for(const[o,a]of r.entries())for(const[l,c]of a.entries()){const h=[],u=[],d=[];for(const{channel:f,chromPosDef:g}of c){const p=b=>b.replace(/[^A-Za-z0-9_]/g,""),m=["_linearized_",p(g.chrom),"_",p(g.pos)].join(""),v={...((e=i.spec.encoding)==null?void 0:e[f])??i.getEncoding()[f]??{},field:m};delete v.chrom,delete v.pos,!v.type&&g.type&&(v.type=g.type),n[f]=v,h.push(g.pos),d.push(g.offset??0),u.push(m)}t.push(new sx),t.push(new rG({type:"linearizeGenomicCoordinate",channel:o,chrom:l,pos:h,offset:d,as:u},i))}return t.length?{transforms:t,rewrittenEncoding:n,rewrite:()=>{i.spec.encoding={...i.spec.encoding,...n},Sq(i.mark,"encoding")}}:void 0}function jwe(i,e){var t;const n={...i.getEncoding(),...e}.x;if(yo(n)&&(t=i.getScaleResolution("x"))!=null&&t.isZoomable()){if(tw(n))return{field:n.field};if(!iw(n))throw new Error("A zoomable x channel must be mapped to a field.")}}function hZ(i,e=void 0){if(i.parent!==e)return!1;for(const t of i.children)if(!hZ(t,i))return!1;return!0}function iN(i,e=!1){if(i.behavior&lO&&(e=!0),i instanceof sx)if(e)e=!1;else{const t=i.children[0];i.excise(),t&&iN(t,e);return}i.behavior&Qc&&(e=!1);for(let t=0,n=i.children.length;t<n;t++)iN(i.children[t],e||n>1)}function qwe(i){const e=[...i._dataSourcesByHost.entries()],t=new Map;for(const n of e){const s=n[1];s.identifier&&!t.has(s.identifier)&&t.set(s.identifier,s)}i._dataSourcesByHost.clear();for(let[n,s]of e){const r=t.get(s.identifier);r&&(r.adoptChildrenOf(s),s=r),i.addDataSource(s,n)}}function Gwe(i){if(iN(i),!hZ(i))throw new Error("Encountered a bug! There's a problem in the data flow structure.")}function Kwe(i){for(const e of i.dataSources)Gwe(e);qwe(i)}function Zwe(i){i.visit(t=>{t instanceof Ss&&t.resolve("scale")});const e=new Set;i.visit(t=>{for(const n of Object.values(t.resolutions.scale)){const s=n.name;if(s&&e.has(s))throw new Error(`The same scale name "${s}" occurs in multiple scale resolutions!`);e.add(s)}}),i.visit(t=>{t instanceof Ss&&t.resolve("axis")}),i.visit(t=>t.onScalesResolved())}function Ywe(i){for(const e of nw){const t=i.getScaleResolution(e);t&&!t.name&&t.isZoomable()&&(t.name=`${e}_at_root`)}}async function Qwe(i,e,t){var n;if(!i.import.url)throw new Error("Cannot import, not an import spec: "+JSON.stringify(i));const s=JD({baseURL:e}),r=i.import.url,o=JSON.parse(await s.load(r).catch(a=>{throw new Error(`Could not load imported view spec: ${r} 
Reason: ${a.message}`)}));if(t.isViewSpec(o))return o.baseUrl=(n=r.match(/^[^?#]*\//))==null?void 0:n[0],o;throw new Error(`The imported spec "${r}" is not a view spec: ${JSON.stringify(i)}`)}async function uZ(i){const e=[];i.visit(t=>{if(t instanceof Kq)return e.push(t),Mq});for(const t of e){const n=t.context,s=await Qwe(t.spec,t.getBaseUrl(),n),r=n.createView(s,t.parent,t.name);t.parent.replaceChild(t,r),await uZ(r)}}class dZ{constructor(e){this.globalOptions=e}pushView(e,t){}popView(e){}renderMark(e,t){}}class I9 extends dZ{constructor(e,t){super(e),this.webGLHelper=t,this.buffer=[],this.coords=void 0,this.views=new Set}pushView(e,t){this.views.add(e),this.coords=t}renderMark(e,t){if(this.globalOptions.picking&&!e.isPickingParticipant())return;const n=e.render(t);n&&this.buffer.push({mark:e,callback:n,coords:this.coords,clipRect:t.clipRect})}renderDeferred(){if(this.batch||this._buildBatch(),this.batch.length==0)return;const e=this.webGLHelper.gl,t=this.globalOptions.picking;e.bindFramebuffer(e.FRAMEBUFFER,t?this.webGLHelper._pickingBufferInfo.framebuffer:null),this.webGLHelper.clearAll();for(const n of this.views)n.onBeforeRender();for(const n of this.batch)n();t&&e.bindFramebuffer(e.FRAMEBUFFER,null)}_buildBatch(){this.batch=[];let e=!0,t=!0;const n=o=>()=>{e&&o()},s=o=>()=>{e&&t&&o()},r=YD(this.buffer,o=>o.mark);for(const[o,a]of r.entries()){if(!o.isReady())continue;this.batch.push(()=>{e=o.unitView.getEffectiveOpacity()>0}),this.batch.push(...o.prepareRender(this.globalOptions).map(c=>n(c)));let l;for(const c of a){const h=c.coords;h.equals(l)||this.batch.push(n(()=>{t=o.setViewport(h,c.clipRect)})),this.batch.push(s(c.callback)),l=c.coords}}}}class Xwe extends dZ{constructor(...e){super({}),this.contexts=e}pushView(e,t){for(const n of this.contexts)n.pushView(e,t)}popView(e){for(const t of this.contexts)t.popView(e)}renderMark(e,t){for(const n of this.contexts)n.renderMark(e,t)}}class Jwe{constructor(e,t){this.point=e,this.uiEvent=t,this.stopped=!1,this.target=void 0}stopPropagation(){this.stopped=!0}get type(){return this.uiEvent.type}}class eye{constructor(e,t){this.x=e,this.y=t}equals(e){return e?e===this||e.x===this.x&&e.y===this.y:!1}}const tye=i=>new Promise(e=>setTimeout(e,i));function iye(i){const e=i.requestAnimationFrame||window.requestAnimationFrame,t=i.signal,n=()=>new Promise((s,r)=>{if(t!=null&&t.aborted)return r("aborted");const o=performance.now(),a=o+(i.duration||1e3),l=typeof i.from=="number"?i.from:0,c=typeof i.to=="number"?i.to:1,h=i.easingFunction||(p=>p),u=p=>(p-o)/(a-o),d=p=>p*(c-l)+l,f=p=>Math.max(0,Math.min(1,p)),g=p=>{t!=null&&t.aborted?r("aborted"):(i.onUpdate(d(h(f(u(p))))),p<a?e(g):(i.onUpdate(d(h(1))),s()))};e(g)});return i.delay?t!=null&&t.aborted?Promise.reject("aborted"):tye(i.delay).then(n):n()}class nye{constructor(e){this._renderCallback=e,this._renderRequested=!1,this._warn=!1,this.transitions=[]}requestTransition(e){this.cancelTransition(e),this.transitions.push(e),this.requestRender()}cancelTransition(e){const t=this.transitions.indexOf(e);t>=0&&this.transitions.splice(t,1)}requestRender(){this._renderRequested?this._warn&&console.warn("Render already requested!"):(this._renderRequested=!0,window.requestAnimationFrame(e=>{this._renderRequested=!1;const t=this.transitions;this.transitions=[];let n;for(;n=t.shift();)n(e);this._renderCallback(e)}))}transition(e){return iye({requestAnimationFrame:t=>this.requestTransition(t),...e})}}function fZ(){const i=e=>e;return i.invert=e=>e,i.copy=fZ,i.invertRange=()=>{},i}class sye{constructor(e){this.genomes=new Map,this.genomeSpy=e}async initialize(e){const t=new kpe(e);return this.genomes.set(t.name,t),Promise.all([...this.genomes.values()].map(n=>n.load(this.genomeSpy.spec.baseUrl)))}getGenome(e){if(!this.genomes.size)throw new Error("No genomes have been configured!");if(e){const t=this.genomes.get(e);if(!t)throw new Error(`No genome with the name ${e} has been configured!`);return t}else{if(this.genomes.size>1)throw new Error("Cannot pick a default genome! More than one have been configured!");return this.genomes.values().next().value}}}const rye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAIAAAB7GkOtAAEFzklEQVR4AezcRXjr2BnG8b8SQ+gJOiA5d1NmZuZVuU133Zf3++6XxW27Ku7LzIzDrMgByxQGaxwfWVFGMly088z7e76Zi5bu6nvP+Y4sKwgC2n4KP4QfgEcvAVdZGHfuM++Fj8HHwUZERO6aMTocsMGhl4C7bbrzr7C5N0REFAC30nct7qwhdH8REQXAfKf7FrjTLPpJ7EPuMhERycB36XD+hX0/DuzSlsnw3OfyilcwAA/vn/yzQQMoUHg9r59hhn7Oz/njH9ncJAiAXNj9P2qTxdhARETufgDYNs4fsH/Cv2jL53nzm1lcZH2dngKCP/Gnn/LTEiXg+Tw/Q+btvJ1+/vlPfvYz/v1vEwA26w4fs8lm4R4GgIiIAmB5GdvGnmbuh9Rq8MIXcuMGpVJ6AFhEXNwneOI//OfnSz8fL49/jI+9lJcecjjJJD15Ho8+yo9/TKUCb7J5vY1tcw+JiOgMILYJcDpNuFQKq5+neMrFbRXLnI+fu7im6KlSCS9fqXDBccLb31siIgqARBOu1SiV8DzKZbpr0nRxWxnQqs8tv51lol/2Xf63qlS6euOpKYZIREQ7ANOHTYdu1SDL/wMOlguFlxW+Hf8dujMX9ryrNx4KEREFgGXd9BQoWu97S0vLbU36T4EOD6NwGf78R0REAZBoxWaJ3qqDA9Kcx3p9YXW1sLLSCoBM5jIV+i7/gwCWl8Nbzs0xLCIiCgDbDiub7b8JMF3exT3kMOM4a3bLmuNczoX22ScpPluK33KIREQUALmc2QS0KjGqT3BxzWKf2VmKhl0sEhD0ngKZS5ZKOgAQERmVAEg05KhVBwFXnXJ62eWLRYoGrRofv8yGHsv/gwOYmwtvtryMiIgMLQCSxwCHh92mQNGg/4gjEwCTxRZMRdOhPfbSl/86/hURGbUAmJ4eaAoULf/N/OeibDsKgPhf0AOgIiLXIQASbTn+la3ICSfRSS+xru84YY2NpU+BqtXwYr4PU1PaAYiIjFoAxNpy9NKGajV5/HvMcTwApqYuf2X+govboJG+/I82GiIiMiIBsLAQdualpStfCIg/AJqc/9DWewqUfABUy38RkREKgPjpbKJtc8xxdAIc7/dXAyBlCnR8HIuSbFYHACIioxgA6e+EODqKr+tPOU0GQHwKtMmm2SvUqcdzpNmM3SCXQ0RERicAVlbCFj07C81m/CjYrP1T5z/pUyArnALFJ0k6/hURGdEASL4XyNQRR2b5n5z/9JsCRdfQA6AiIqMdAClTIM+Ljn/POEsGQHIK5BF+ZGurZpb/+/uxS09PIyIiIxgApiYnYX/fjIDcrc7x79xc6vyn27NArY/qBXAiItcjAMbGnrkJOLzo4rH3/6yvR8v/vlMgz3tKb4AQEbkWAZBo1Ftb3vb25s6mi3vOeXyRn2S+5GuqRMk9cLd2Wp9u7O5CoRBedH4eEREZzQCIdgCZDJTLZd/f8Xe2m9u95z/JKdB2dXunsuP7uzr+FRG5HgGQz8fadbPpV6t+zW9VvLv3DQDLotwol+vlet2/HvMfEREFQLxdW1Cp16v1amWx0jMArOitotHf8hu+v+c3Gj5zc+HllpcREZFRDoD4AzvVWq1Sq1zOf9bW6CkKgPLr/Uqj0njkA/HLiYjIsGQYwMxMuAlYW+Oz//8/X/4/L3lJcvlvQdBrChR896vf1QHAdSIi2gEkm/Yg85/kFOjC5KQOAERERkEGPjT4McC6w/rfYQ6KS93nPx9K3QS8ulVPgdMJE8tCRESGGgAbDGBhAcdhw4YlWIUiqcv/b8Gn2UgNgI0iWGB3MkBERIYdAJ9iMO8Je3e7iu1Klbjg9HS7+5syV3AsRERk2AGQZzB52/TudhVhjVSpF8ybT0X5kUNERIZrjMGtJpb/gyuaCiPk+hARUQAYzq0GwMzVEZCIiAybFQQBIiLyrN4BiIiIAqAK34T3wxp8CX7N0+zZAQYCQRzF4bfMAQroCKETRMfYvWRHqFt0kI4wkaaQDQQ7+33mDPPz9wBwAQAgAAAIAAALU3KeWwEu+dglp7yNATqEADT35Np+/zGNAHQOEIDWgFsyBQAbAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAH8iAAAIAAACAIAAACAAAAgAAAIAgAAAULLPD9v0CYCSKXOO6RYAJaPff40ASg75tnm+5QLACAyAAAAgAAAMtdasBAAuAADKkJcHO3eZ3Uh2wFH8GtRkZmb2kXrCWUNWHGbmxAwyW2RmtpXSyOrwfJ9X93f+ghW8K6xZSP3LRvgvf4bvw/fgl7wq8iUlSaqlYgn2P62SgWYqcjBXWSAkyQBUXMCv/ysDST73d5j7/P6csEiSAajYgcy/LzWX7Z3rZQ5WkCSFGICKJ/jrp/cBh4f7f/9xam4q9ffUe94jSQo2ABWH8BPIzM9n5uYyf9/KHGe+zbd76UWSFG4AKtLp1YWF/dLOjjiqp94AxIAkA/D8zNISi4vXCwtn1L/hTTTCJ0n+EWx1lZWVaIn9wgwz0aaYInCSZACKRdbXWVtjdXWSySmmppnuppvASZIB2NxkY4N0mkJhnPFok0wSPkkyAFtbpW1ujjASbYyxDjoInCQZgNNTdnfZ2WFvb4ihYYajIUkKPwCZTGn7+3XU9dM/wMAgg4RPkgxAPk8uRzbbQ08vvX30VVNN4CTJANzfc3BAoRCtm+7yCJ8kGYCjo9dBO+0ddHTSSfgkyQCcnXF6yslJE01ttEXzGnDxIMkAXFxwfh6tmeZoLbQgKRZkAK6uymugIVojjUiKBRmA29vSbm4+8KGOumhIkmIRgLu70u7v3/O+PCRJ4Qfg8fF1kCDhJaAlKTYBeH7m5aV0D7XU1lATDUlS+AEoFl9XQhVV0ZAkhR+AqqrSqquBIsUXXqIhSQo/ALW1pdXUAE88lYckKRYBSCR484aqqgceykOSFH4AIu/elXfL7Q030ZAkxSIAHz6UVld3xdU119E9kqRYBKC+noaGaJdcXnARDUlSLALQ1FRac/MZZ6ecnnCCJCkWAWhpobU12jXXxxxHO+ccSVL4AWhvL62jg0TigIPykCSFH4Dqarq6SuvuLlDIkcuSRZIUfgAiPT309tLXlyWbIRPNH4NKUjwC0NdHfz8DA0+Jqj32dtndYQdJUvgB+PCBwUGGhhgZ2WFnm+1oSJLCD0BkZITR0Wh58ptspknbgHiQZAD6+hgfZ2KC4eE06XXW11hDkhR+ACITE0xOMj29xdYqqyuspEkjSbEXgwAMDzMzU9rU1DLLUQCiEiBJCkItX2x2lu3tod3d5P5d63XrW94iKQ5kAJp6elKpVDKTSWbbkr9Nfo2vETxJMgDJ8j5+TGXzyVxyND/KFpKkkAPQD0lIlQPw7l3qs+8k8glylHaHJCnAANR/OvcrTzqAkQQfeQ3AHwiNJBmAmX8596NN8C8+g1xlewRCkgxAz3+98H/Hv6v7lwbk4ZEvNUlSVbFYRJLkH8FiQpL0D/buAqqtNd/7+DcUSQrBQ4TgGg6NNEyZqZ13pvJed3dZet3d71123WXZdR13OX7OSIVOE6BKC6USCMGC9oS2+z6bTUIoFkrP9Ib+P+u3Uk+C/X/7efZOycHEanzwy/Aq643CS/Cn8MPQBQWk6YU/htNg2jTrmDZJDnwV/Cn087TNwz/B14Ips9TBL8I5duwe/AUcA9Nq/o8TQshVQL3gTMaDIQF9azPKWl6IwdhywuxOIJlOstZ0MkIIkT0FkN4BLihhcO3ov8Im/DAGseVEeFK1cDBZAFksnowQQmRVAYxAL7iYck71Hy9Ln/4zbK7C6IBkHrBzFggkUyoFIIQQz+KVwL30O/v7nH19rnf1NTf3wTCbej9JHoi9SSzKGPRgcOI8ylEUE2g8JhxmYABNS9v8cQd4TwvLvp2thMPh4eHhRCJRWVnZ0dFRVVW11bMzzMOn2Lk6OISy7dOKRLhy5cHUVDw/P15XN+PzIYQQWVQAceJfevClvl41/Qf6XAV91dUPLRYyKQDF72fsc3pi00ZpBAlasfrwsYYJuHWLM2d4/XUePgRaqQpwOkAgkMmkPXPmzJtvvnn58uXFxcWampqxsbETJ05UVFRsUwBP0gF1y2H7Ahgf54031DObHh2dtlimOztZWqKri2whhJACGGDgLd46c+dMX99CzO2mtpaurkwLoLiYQIBYjLHPqhooX7TkkefE6cBhx06ahQVCIT3nzjE4VaaP/oMHCQQwm9nO1NSUGv2qA954443p6Wmv15ubm+t2uw8fPszjPsJ68+Rt3QGvwImlJZRaqCNDg4P09vLaa/H+/nh5eXxxEaeTjg727ycrCCGkAAoosGBZYCHW309dHfX1NDRQUUGGmpqW1wFjxGKTX/ximLADhxPnKU6RJhRayeAgvC9AYDk1NWRgZmZmYmLi7t27k5OTwMDAgN/vV02AYbvD9dIt1hYaXISX4FTsP15+qVqrLqGkkEIysbDAzAyjo3FNi09MxCMRxseZnpYCyBpCSAG00OLBM8jgzbmbsStXaGykuZnDh8lcIKAKwMilG5ecOI1FwAEOsOzmzdUCwOslEFhJZgoKCvbv319SUsIytftfVFRksVi2LoBtpr+G7hb0xLjwMhcufFlr76LLi7eRRjJhtVJeTk3N9NTUtM2maoDsIoSQAjBjbqf9Bjeucz129TwtLQwM0N6uT7cMmc3GRpCesbHwzMoiQKWSytnZ1el/v8xJILn5kzGHw9HS0hIMBvPy8hYWFurq6jo7OxsaGmC9byJNof7rdTRWxOP0vKRGv4pjMu8UXUGCKhYsmS59vF4WF+NtbfEy0/TgJIWF2XT4L4SQAlBaaW2hpZnmy4nLUzduoDI4mGkBGGprjY0gldgbb4QJG4uAE5xITf/he7nGWV89Nhs7cejQoZycnKampkQiYbPZVAHU19fzBDRW9fSo0W+6cKHg5t2TnDSmfzXVZKi0lBdfnKiqmpy8MW39UOLf7Nhs+m9mESGEFEAeeU00NdLYQMPUzesMDenx+cjLI2Ppi4C+K31GATivO0OhDqMAjAN/PR4PO1RaWnry5MmpqamlpSX18/z8/N1O/y9/WY1+lhPkPcb076STHamqGqgaHGLobnCUr+uipobsIoSQAlDqqVepo+7i3EVteJjbt7lzh8bGHczVffvw+03GyYBYLDwediaczj5VAI5QiCV3g7H5o6nbJBM7U1ZWxhPTSDGpektOf4/WHiRohB0aNA320nul8sr1/++hrY2mJrKOEEL+N9ASSmqoceOuppq7d/Xcu8d2ND1pnE413zW//77fHyUajoTDw+Fr13rvThfNqd9fDlbrun/+DvskaBhMKtPTqenvmMw3Rn8XXfvZzxZMjydqip7hTE9uT+jg3H2fj85OSkrIOkIIKQBFjX4VFy599I+M6HnwgHW0tKxnXORzMRD4XZ8v3BgOR8PRaPg3Dx4MGZs/DQ1b3OHTVwg/lD7Adcnpr2/9p6a/C9dOn9YII5fyLvUcuT7Y3U1XF14vQgiRjVtAyuoLuJaWiEaNnRycTnZoqCkQahxTsQyM1X506LW8Xw4H/r8jUG4PlDfzDJhYs/W/UgA9PUEOd9Gl8gIvkKKRIVepy9ftm+vOzTl8+ILqgOwlhJACsGK1YVMpoSQ+Po7KxMROC2B+nlCoIhQKhEK/0fhXFY7PePI/E1G/sh+02/PsDhxFFD2b0a8MDaWmvwdPV/K6TwwaO+CiqrvqePfxfd1VOd3dORbLebKWEEIKQKmgQqWc8vjkJFNTKlvOVY11QiEjnqGhoZPek46I93ok4vyhL4S0kB27ylGOZnp/O2dic9PTqenvnDJ3pV/1r5Hyd/DtUMmWmqFbj6PbceyQIweMnCVrCSGkAMooK6VUhfh14nFmZnY0bwcGCIW4eFG/7aCj09tZH/E6IhFGRsKmsAOHscXUQgtfecnpbx6MBJNX/bs0F2neC9/BdrzQnUwnVXAMcpL5EtlJCCEFUEyxFasK8/PMzel59IicHDKgyiIUWknR2xV+/P58f8DrNc4nJyKR0P2VRYADhxUrOxePx43XAeTm5rITxta/8cqvIEf06a8F07f+Tej+H9v1XXdaGjFUru2AL5CFhBBSAIUUGkFZWFhJURHbW53+d+5wAr9f8/vxO+rr8XqJRFTunDsXYqUDjnGMnZidne3p6RkcHEwkElVVVZ2dnW1tbWRoaCg1/TvoCGorV/6wI4Vrp7+DdOXrOuARWUUIIQVgwaJixozy9ttGMimAq1dXC+AABwIE/Ph9+ACjAIyE765uBLXSSsbOnj376quv9vb2Liws1NfXT05OWiyW2tpatjU9TU+PMf2dk2Zj9KuYMe/s9WhzbK0UvlZPdhJCSAHkkptPvooJk7a0hJHtTE6ubv1XPLD78RvBUFi40gEjI0sjnwk9XN0IKqaYDESj0YGBgQsXLrz00kuapjU1NVmt1paWlkwKwBj9Kub/iATPnlw+99vq5DYqm47+JqgkpRshxN4nBaDsY5+KaoKlhw9RefQo882fkYjpNH7j8N+GjZSWFqMA1O3dixfDhI0OOM5xMnD//v25ubmpqSk1/YGRkZGZmRm1FGBbly+nLvwPvv9IF21BbndsNfqVpuUgBfDcEUIKwIRJBUXTkrdbuXRptQACyWP/tPOrST6fUQAqoWjIWAGoZLIRVFRUVFZW5nK5SkpK4vF4c3OzzWZTP89k7cCtW/T1AV3vvxNEBRNbaIQmHvPHPBeEEFIAj3ikoqGRk4PJpOdxx0mKxVZ2fhZDHIdmmo0CYL3S0pWNoGj0wcJCiFl78oRwCSVsqaKioqOjY3x8vLi4eHFx0e12BwKB1tZWtnhmBk3T35q2Jdq4yO2L8EdwfOsCeG4JIaQAHvDACPv2Gdniu26FQkyHOKQSXbmKNEiwjDI21NHB+DgWCw8f3oMw2BmzE3qRF9nO4cOHLRZLe3t7IpGorKz0eDxqEZDRN4Ts1COE2IaQAkiQMIKSn29kszEbDeMN6aEPgxnzNofzx4/j8RjnFUJgB4eeaBt2thNYpmmayWTCsG0BvKBHCLE9IQWwwMIiiyooZvNKHmdHGcUeAiM7kjxyf2h0QDKlZGSL6a/YN/+1EEKIHDY3x5zKPPPk5LB/vx6LhfUewcXk9J/giUUgvJwQz5QQQsgKYIYZI1itKpu+BCyUzGV2Z3UR4IB2nhEhhJACmGRyiikVSkspKdGzoYPL+VUypPGsvG85f48QQmxNtoDGGZ9gYpJJystXIoTY84QUwDjjY4ypLLCAzaanogIhxJ4npABGGBllVIWiIhwOqqqorEQIsecJKYC73L3HvQgRqqtxOnG5EELseUIKYJTR29y+w50YMWpqVPQaEELseUIKYIihW9xSwWajvp66OimAvU8IIQUQJ36Tm4MMqhqgqYmGBr0DhBB7npACuMa161wfYOB+qZnmZhW9BoQQe5uQAhhn/CpXjQ6gvZ22NlpbsVgQQuxtQgpgmGFVAFe4Mu+w0tGBx6PXgBBCiD0nd92vc61Y22lf6rRffeEFvQPMZoQQe56QAvDhS5BwdDjc3v6aAwf6PZ4RhBB7nZACMLyr7F01vhq3113j9dZAH/TDIkKIvU5IAeDD4XU4fI4aOzXghhroh+sIIfYwIQXQBl7wgZd2cCcLwGiCfhhDCLH3CCmAYvAlk4NSBO82pn/aUqAPEggh9hIhBeBLHv67SFe9nJq0JugnuwkhhDBpmoYQQgh5IVgaIYQQUgCmjXIY/gzukrke+C3wg2mzZPK4Rk7BX8Ntnoj6Z38C74Zq+Bn4ArtzAX4FmsCUWerhF+EcG/hx+Ev4LAyzVlR/ezme8WPkwnfDh8lEDP4W3gsm6ITfhStsYhT+Kvk0fPAHG1wcZnraqYDvYnMP4b/gW1P/4ImfzPNg03eWKS1e+H24yjv1kX0P/N7az/8p+Hf4Xih9Sg+RbgD+GI7tfuyY4TvhP2CerX0GfhSsO3zOJ+EfYIrtDcMfwaHN7+o74P1PswA0NpCHkcw1QSN69rE7juQd1bIXzKx+NXwCPZ9Ev30ZvV7FQT3iK8eMkXeEGw5Ap367qgw6wKPfPn31yVif1h0V7uHLQDOXb4TNGIe6Q2s/zKkOGGAXjLtoIOvNw1W4podDxtpEzw0Y0G/1tOnB9RxP/6CejGmIXb6zLO9kAaSmv4U1OvRZwS39llGepjxoSKaXXUjdC89hAWjrVkp5WxWACQrAt9HoblLZTQFYocHoALLY4iLXrnHNz7VkB/wuKUMqRg3oMWog2gZ27DxP6iG4ixWACfGEKwCLyjs5/Vt4XAF0ZFYAuzh230UBOJN34XwuCyC9A85zfphhLV8jj2/Me6wCvj31hefTk/L+1BWljZ+lcQZ3an+juJiuLioq2FyceA89k0ymHf43UNCVesiNvX/TMwBnSeOCI2zo28egiqcskdBHv8rVWq6BUQCzrHdjNUYNfLKNNpVKKslIxu+XGLzOWp3gSXtHvD91CuCt9S8cpzX1gcjU6CiRCBMTzM+ztERODmYzJSU4HNTVkZcHFCdHfxDKSDmzflf7/OrEN9VR58CBMjvL8DDRqPqJ/hC5uRQVYbfrnzlWK7szPj5+7969iYmJ2dnZJXXnUFBQYLVabTab2+0uUW/IU6Ge/L17q++lffvYv5/yclwu3G629b/sfQdYFGnW9SmBJgoNKJIzggKCIKLojDppZ76dmY3On3POOeecc845rRu+71t3djbNrI6ZIAgiUTI0OTTdQHdD/ef1LmUrdFMdGNedPs996oEOVV1vOOfe+4Zqxs6yaoNAFTnPwfIg1FWGh9WFNjZgscQdOhRXWhrH9wLCzAzGxiC/1uN5+muzspCXByBV2F/Z7qgAhrzMgDotG8ziIpxOSGtJTMShQ8jPR0aGmaaeDhR+jMJ5FBija/x6Y6P6hb4xh7lWtK5gxUtDqoEKo7X7JpmPADuCxBtP2/tlX5cYAe5hb1ze8WeIKSAdE9rEXdz9FJ9SAC5b2FrghW8Y7J8niwp2I53iYhT/KorvbgsAa5Ed/rXX4Bud6PwxfjyIQRwQAfglnmWvW8P3LuOLAD7wqwHZu39f3cm/Um+FE5ub29Tfg94F9OYr6l+Cf/Q+jQOc/bjaj/4KVFAGUpEaugD40IBKoMq7LOQru2nACW+Vv2yS1B4+RH8/ezV5VLGzIQCpqYraSkpw7BjNSP6U7PXjh7e57gAOnMGZ9/T3LO0PtUePMDiIqSksL4sA0NVQ5y8rQ02N2uY2KJD0u7q6BgYGRkdHZ2dnKQAbGxuaplEAyPtHjhwpKCg4evRoVVVVIkkqaHiX0uwsVldFAIT4yKfqLqqqeDuB1vPgtgbwZPX1eP99WDqacf8+r6Uuur7OO4nLzIyraow98XVZELo3WInt7WzVSnEpA/y1IgD8tXTs+GtZp5WVVfn5wv5+/BcjCOBRB9SvYn8ZGnrOXRAtJwnwtLwNEsieRVBYiMIOFN7eFoCKCvXzTp+Gb3Sg44f44RjGkMDvR6PwS+osgG8BCF0DXofArwAYrd4E+4dXAACn7lzRVvpi+o7HtHsVu+4ddEcbS8p8CQCtC12/ioUF4L33VIcnF7Bl7wYq8BCGBjDwK/gVd3EBit5X36dnYRLkL82HBvhgfx3hh/C+lwA0YR4msQU8gsQBN1kONEMGkpEctAD40IBKmt+vGBpwQllA4I03N6OjA2RnupxknJWVGDegwZ1ggZDF0aPkkRNzc/VnztTFxNTtqE5fveEeUKqXFtmLlu9cO9zaigcP0NeH8XFtYUEXAbBaVXhByiCV8BXKQGAgHfU3Nzd3dHT09PQMDQ1NT08vLy9vbm7qum6xWKxWa1ZWVnFx8fHjxycnJxsbG7MNgg6xlPhrLRZsbdGHIPGRhlSXobadOcOYMMB6Fg2g36Xn5GDp/t2M69e1O3fQ2cmyYmYyPi4hvvhy/Hg8pgAbVA3n7CGJuHED9+6hq0u1TZstcWXD4rFsRm3akzQ9I4NlTrYtHh+vbmiorq2thj8UAMdEAFZXH7ISqSvd3eq0/G2GEFIARMt57xQGvnjhAjVgbwGgkdR/BUvuRH5eyVVtrSrY3TCPeeY52NG+i++i8Liw/y574/8AvnAA30/GajDs77seTWvA5f0aBHbB5dJdriSXxcJGv3vK1WD/UuwCegZ0CEQGlABQ3mmPH/sSAHk8PT/khlu+pqJ4c/itUKXn0APPB18Mn/svXgzN0ICZeAQON9ClZEAFATSRAWoAlSDxpZiXwBu/fh23bqGlhe5tNrKLUJGBjAQkQIfT4Zx2TA+PDk0ODuZOT9fZ7XVud/3581HP989x+ADfyF7NdnzqcNz8acadO8XD9/PyFtOaVE93uehgeAYH56Za58hQ6v/4eOoNkyABsf/169dv3brV0tLCIIDkTk//0KFD8fHxFACn0zkzM/P48eNHjx6NjY0tLCwwMrhw4QIlIWD2v3ZNlRLpj8THSOWVV+jukHoU+y8vq5iABcjj0pJytC0Wn91hGH6YIzOTxdC30dys8VrXr6csbCYiFUhdX1+P646Lm4qDDZiCshPAKewOXVdaRQH49FP+4DJPUSkaWaexiKUuUh0nlice93cuDg1Vzc5WOzerPalRpwpA+A8C5ueHbt0aunvX2dZGIU+YWGS3z0R9EpKiEOXcck4tTfUs9ayTGFggBAMCaqE/UDVYTmIMeByK/fl1HhlL+aYdagAA45vmmVYLH3/gLeyKVL7zmY0BkKolCnOvrrqI/+qy/OiqxZKIjjS6JGxNBsFmP91NzifI4aIBdBrWhf15rK7e9dmTpH4xJhNZB/wa/cRABwN1UxrgFchcQOjgfXnzPs06tUbKPoqjWcgKzHmXaPrEifXY2I6+voHR74kA8EiTsYF4xOPnFnTfSFu3b5NrWJn1qD+Jk/zNLAf2agCrWJ3EJO+ly9Z16JPoeldaPXIOw4Lz4MEkHLcdzptLjuvX34y/efw9nS2FTkVsLBMbpH02NvIqo4IJUpX40eYFgEl/+v5k/2vXrg0ODp4+ffrkyZNlZWWZmZkJKo9MN3SVXj8jg9bW1rt3766trR04cIBZoLfeeovZoQCGRuhK81dSA1ZW8MYbOHkSpaXMdLNrUADYAdmo+LPVZ27eVPfGvBm5nO8GiA2Fzo3u9uzm5qqFU3nIk4pgwE1/Im4xToWDU9t2yreoM3Rgzd69ywo9h3NVqMpBDpuiB54FLIxilK20d7C32lFa7a4u2CzAJtAIP8iYxfEbg0M3W4ZvfdzS3Hzcc7QK58pQlotcdhkKAJsKeZlXue68bmfskpLCaIC0sNd4gKpwMQZXW6R+mg8B2MSmvE0NYGnL13Y//+V9Zn8fSew0efmzEAC2ue5u+j8Shbnsdhex6YqJuxLznSSyEkufvMwoj7Ge5sX+KfAFCrZoAI2+oAOGBtDf2cH+IsVsTCg+JxFAqHPeNB/vhHHuCBvPs9SfMm4n7wtT8w/x3GEeLLJz59jbmSHh2Ry9vW2UgbEBkQGaIQMWWBB+6CGWC6uZ3Y7My1omU1zAhbM4ewIn8pEfhzgA61gnWXSjm/08ai2q7kYd7wUC0xpAAXDcufPXs2+91aAzwcPiIDdaLCQ7XlY1VZdLJVSWWWCDg6qOFhdVkZoAXf729nb6/mT/hoYGuvZnz56trq7mkG8cfXPA4XCMjIzk5+dTD9g/Hjx4IGPCOTk5dXV1MAlqFJMe5FP2tbfeUpmNs2dVrt9qNWYQqM5IyqMYfPQRi1Qy7EGks1yufper19Xd/frEa6dwqhSlVlh16MtY1qDxXxC92wLwF3yFXeMsWTbIdKSzWl/BK01oYg0CkDpl/+1BTzWq82x5VderFPuLNfleaXgTx24eG7o5NHJvJAUJbCQ1qOGgEDmY414UAP5CthM2G2rVp85PeXWVEBsd3UsAWIqGBpBvxiUI2DX5TMIR4yVQeALynV3xBV+v/SdlAePfmdGYVHntsxCAvj42R0ZhJDJJR7pWVtxs4B6PJf7Kr0lOth06pFEhqaJsB7W1NQ0NNVFRNdib20jjYmQGcfF3FQBJ/tCY9fOd/zEXBPhgMx1hxfi4wftiySOLivFxwVsAVN4jUOTn0ygALG0aq2alt7e5t7d/QrE/zVsG2E/CxvyhY2aGIsWMNr1FzmStRe1pnKYGHMZhbIP9mcXCO6RXAKByvRI3QASkARv/em3sUuWFV/7q2bOv0HXeBsc1lX+ytqa6PPmTHMsEOhszO78ZAWBuh/kfevednZ3M/NTW1jK/f/HixVSv79LZZ+o/OTmZKRQODnOImJpRWFjINFFlZaWpIGBignXKUuJPZKjH3qSmqZw/D29Qzfi6283fxG7Bz1PJ2DEDFwCK4sDG6OBf6c95A+dexatkWJ+rFG/AJ5aW6CCyJA+hjMEcG56wv1GnPC21ZA5zVJf4uXhc3xYAD3Bux4rQSbK/soM3D9a01Gxgg84+2wMFIBOZRlOkDHCof1abZYNnSn+F5Sa1aQJeAqC8NNGAnQJguP9qwpjxHdP4CG9fAb4B2AMhqNcVrf+eD7BjdkcyfLyw3wIgSVuG7a2t5Gm2cSZh3IWF7vj4xNH45ssrhy8vHaqf4lsSHxyZnz+xulpz7twJEwEp1drgcw6nSRBAGSfHeY/DCPurmiiuheR/LJYwerR6GKeOsxU+O9KbNDSr6BjnvKk/xHy9lJoIAI/Ug6Xe3juUgcmnMmAMEePnBOPK21I1CfDX84fRJfRmf2/K4FsQrD9LPa9hT5wBzh7G+WqcOLlLZdNXZkCgOrsw18qKMhNgTp/ePfP7zPUXFRXJJB/F/jvAgIAywDlC/Fh3dzcHivlFfr20tNTMZVQpsRdI0plKz/Hq3cCmRJ3gxdgxlWzYbIYbax4D9q/8OLHh3W+/W/9KPWk6mC6g6zIuzSNzJh541rCGHYhBDLUBgkVANMADdbzk3Ugg7K8q/T7YgDlKRA1gO9nphdC/ydKzOB86TUtbWR6G1KbHo4b6/aKgQJL5KhyclzEAGQr2+iJpR9x/hqQorBb29znR6Ns+JADOYOnk0lMJ+OoLXAdAF6O5mXlGagB5mblIOlFkZ1damivhkeVfnHvNsgLLwoQ+MaANPHr8aGbmxyfsjhpX/Ak9K+18JeLNUhmNzCApIB55iZ2BGAeOTbj/Wz5e8IFNIA9be330gNef/srK4H2h/gHbUdWDG71zPirHGi6QUGjbMkCb7+u7SRmYUuzvPVOIn8MLx/S0TPzXoDF1SzefdQkzEA0wLQBnoeyED8GnM8d0vTgnWF+nDwyXy1wAM2Oz2Tjxn2l9RgBkefK7b4op4Ac49ksB4KgAv8iv7xSAsV1bEUuJhH74MD0t5OQg3Qk4oe24lWQoArNalU+2sMBEFhnQWwDysDeYpqdzzZZJ9g8y26dpqjSTkmgTqxN96LuN29QAnpZxwAFf/WVFNOBZARjdpn4eOyBI1pPhG3SkeAtxehw0sCrFyOMmgwBW4HyLHYYGlJTsdP99DP+anKLzPcCJgHERghcuAHQxjKQtLl1CUxPDUlKw6/CUK7HD8u9+v8Uy8K5ljiXVp/cVaoXdq90112tObJ2oRCUkZo/fuyaMoeDp7SwQryJTPN1wG8O/Qv08+gjYfUwQ/D5g3z0LJMiGfGdM2W56/ZrXOjAfO5LNAz0Y68WHvXikNODUXzloTS/MPHymOK/46CHF+7SDOLgfGRfyvmHrfX3D5eVkqbn5+T+8cLV/QGTAXY7S8he7aNrtJj2RpGhpirfS6dNJ3t+8BpjEnwZ0v3x14IAy8V7FTPx899LSEmf18JiWlkbHPz09nZM+fYe2GfwAPymLBhYXF/nFvRur0wkpJYeD7K/IPe0B8ACaj2xmLC1WuaX8PL9LPfPCn8DeSEbeYeTnoIBMGvyIT2amLEpYu3//Jm4y6c9Z8+RLOu80iv3uSuCA0gCPd3oTyn7dnmkSFXKsremkes2jHdg8oG1pJmrT51CwW1JAXgKwhS1j/g/FXD7qb5nqd+EbVxMD04BLPzcrgdkW6YzTm2R6p7paLZfgeNSZM8yIufAtl+aKOeWKiclJseS8hxMckOEUguM4XugurLlRA4E5DTCmA01P60YQIAJgDP/aYUdx047hX3Na/JE/DTjD7/hlf4FvAXACo4Yld43GPx79+jffsXJuYEZGQVHB0fLC5PJCHDqI/cRGwdG+jbLejb4B9+NJi23u4MJU0p+MH4hPQGY8QEuAsswXuOkFGYo8BXDkg3RjREL7oQFSxWEE53c6ngAAB3iZ60+iz+sbMvmHnyQ4NYhf5BmwA38Sz6Bxfd0oJeXXJ32CPwDcAzQfYekPobC8rMKFzU1aoAIA5AnvhjTqL+vRGLt4PDOdnd/H9xkHMMIzBIB/k0F3yXyuKw0wB413abNRTRUtra6ynLSNDd0jSaQtBAjvrD4ZblQiAAZSQjtC/TwuYxmFtXtn/y/DF74ugvJSbgUh0ej4OEWV96+82Lo6lhwbGtnfBZfFsmWxaDExugaNLn+BXsAxGTp3ye5k3IBpDRBWl7lAWPGaD0rvxhj+lTleyhgU+8PH2A2Wj2AxOqCRXfuHUNzvxOX/9vF/+29YAmCFNy7ADBKAk0ApUFaF0hiU0hX/X9/u+ST9WlpWlsa+QQXt62PpMRskEXrYN5Xg6Xt7edR6e8v7+spHR+3Rs9Vvud6qiFJjABVIKQdywjkcrAUTAdBcLkkHW2ChIVCsA3gxGuB5AtnvIWYb8AvjY6R+fpHgpPgopjF94y4ZXAycHnvg8oOCywUoK4BP/Aco8ENEfHxQA2M/Af6wtI7gNcBqpXfIMlK0mpvL/jo4OjroHGRyRtx/SfeRIupQ93zez7P3Nk7kA5rsBDE7qwTAbldCycXXbverm5uXgiJYbwGAsSDAEADRAJkzFLQAfA0GXkYBYDFTdhmQxsWxIEheEgSR+tmbeVSdWJn0NdCno0HgftZfexO+QZ5/OhLQ3m43pgPZKqzy1wQmUHxe8j9BTJeN3fmqDoxKtNBx9YMx4N2rwLmQRn8P1uNUCRT7M+FO+93zvT3zPb29VzfZvkj9chQZYDHukfzRTJKqUL/3MX4+t0KR/rsyx5RHdr+ft/mgenDkXB3CpK/wIbjH52maUWKm8lOeDzybqN7EMbNlLVQVzKStvDDUNvsmQ5bMTNX2SaNk68nJtampgcnJgZWBFKTQ/WcvZhyvQWN2yOTGfeT6tjaVHGbvGR3lKemUpi5a0u3JybwceanroOVK1P1vRCEIUKoksX/kCKaNuUC1tQvaorj/PBruv1SKT/wSduJtAC+1AIgzQmH3Tq6JAIgGbAuAj7birQFvmh0KZmV7toOA4YpUkWKkpJie/Xl5J/tf9pli71ACQO7/b/HUgNCJzQprIxpLvWSgzN3b09XT23cVO2UgLS0Eh3QX6o+Zy6reJn05eve0F6wBMTE0aStsOeJABLyXYwOAF6MB4stL0l9CAddeQ8fubTAdxC/y6+L+7+EKiQEbX9tgMn0NJUCtmbLWQ9psWzdf23nAmK8pfa+/ruZwk6qZNpiaImGr0ezBweXu7ubF5iUsUdzSkEaPhBN49mT/hQW1Eu7uXTqFaixyNKFCdf+abHqiMvStx8U9ZI1EDyGqH98JKQiYvrtkzAcdLloU9n9m3fAvNKL9d1rGWqo2pqdZo0zFiADQkrwFwLcGmEFqqqEBpLMpsr/z8eOh8bShXBn+PSbuv/o9e+CNPf7XvfcB6gAxKR+KB86FrgEEk2BNaHpGBly9PZ09A5QByQXJUZSAdx4IOPzV0/M8+2uzGce2SZ/2WU37uQ2chUnExzN3zk4ry33pCa5gJaAyxWllLwoJCir1L6u9Vp8AvsFsj5H657IAGQ8wtdKbUTQTKZpm1+wr+gpz0Lum3nSEF5qc1YzCXISq+AH4QFYWjRkhcgU1gGLABkrS4DTC/ul+WSUwjvECFGAvtLbiyf4UuNdu4UoITkFkl6HfTqWhAOgsKGYmLBNQAuBz6Nj8UPD6kxTQFmfsPhEAmvE2L/e5FAA2xJQUcVQp43TOqb2sWlcO1EZAmuuJOtD0sHgjJSWGAKi03+jw8MiofTh3eD3a81Qcwg1t356ykoEMmrcM9Gz09Hb2DvVffRoKUN0uXlQdxjQ+/lgFxQb1b86kG/6+8QeCAt1TmkS6koqmnw6faAfuBBYBWK1UOx4XlxbnMT+DGQccptZDWKCov0HZi0J0dDRn/qQ9wcITcFsI7vTALYB8zRnlB/gxADIdKNWM0rP009QkKQ7qzs3MzWgzNt3GiY0MCkLh/fDGSxcAC5R1+89l5eQoq6lBZ6di6sVFepCzmGUcQPk3s2iEzfvBA7UpBk7XUgCUVVczy/RsOUxgFbgWtK4/JfmeXuX+c+3eiH1h5OCIkt7CeiP7/7kUAJY1q7CgQA3Okm+Yd9N1hgKuo0ddhS7XATUGwBFgskZYIHsA06jxrP+Jyclx2xrnkxnsr9QorNB8tHwJAsICujw0QwZ47Fnv6X3QOyoy4HZTGkwLAGlF1cMPfqAqZGPaupP6Q1n6y04qbjrBLsoOwL66a/ksoFuxv7IMmAcFUVrU0hJ9wFGMcmyvGtV+NhyUgWJhf3WswwsEN3nmvH5u6kBa59R+LuziCq/jPjaUZiJhfHx8ii4wwK9wsyBODDV5Gdno3z0zwyIa0ob60FetV/tpxMwUyYRaHAdeAy5BHa2h9glfDt1FIBbKLEC7GeGvq5N1tpS3LQLKTGy7BBYeUzKQxXsVFZyDLhGk/ty8gJvALQQLLwHo0cEVG1NTk9Pz4wfHKcPyBgnw8yoADLJIUlVVsNnUPn/NzbINoaukxFVgdV1xWX75lsUyAk8OHaRwTHAXnteoAWvj67bZ2anZ9cm5SRS/bW74N7Dra+aD4JCRi1zaMzKw1tO7NDjBvhDIiKKu06gaB/Omn6d+cmXIWQ7lo7PZM/Cbtk9zyI7JN47dZSLTKB+P7ulARzOa7+HmCG4DM0Cm+UE3WYJJ+RrEYA96mAfgMk4KJJ4FL92GNuaIuDqprqZO2J/HEN3a0GSdLJTH5V3c55k7fXIvoN7eXi4EI61zuu9O9n/48CH3jeCyYfr+/Bi/yK+b3OpDlsaQkPqd/d3opiOdoqXsOpI/hakudNlgY0m+mv8qJEvWCFj3MUFUAli2LdZ4okZ3N5xOVjE1fud2EzS2WjJ/EpISkGBmv0KXS31pfV1FpkpFYmOF/Z8Bs3B3pnBLD0UAZG9JGmWXHhY38JiZnZsunUZhuZH9/7wKAMEIjlrMqmU1tLfLriPuoiJ3Xp4rlxHAty2DOfhODiueDVc5dyFBBEDnMa9L+3Nzc7Y5B2pz8CX1KusnLOyvmWvqEgSEF+ylNC8Z6JWnQNoCYWmgPNeb+sO6/WdmJouZNUmK9pCgKVqyOY8VVgAMCEa0EVLSfdy3nX/72IXZ0b88ij8RgAvNcEe5ckND8w8ftqOdp+Wo4AmcYLGQGljqvARVpxOdLWiZxvRq8WpKQ0rJ6RLF/vF4sSDRc/sHuvzMEty/f5/PA2BWhwO83OSHi36Z5dd1fWVlhe/yLXlgAHfa5H5Bx44d446hatqoGaSk0OuSodS5u3db0cqSoctchSpqQApSGOTR5WcuRbbYfIiHAxg4n34+qTGp7nSdEoCcfU8Q5QEWL7vd2uphanJ+XlXuiRP8/cp3NNj//n15losExMyLcpAMMDUczqhUtr9WLDQ+Tp4x+ijPqTNDRK+Uu9TcHADCEASsPJgTrFo28KUiefXzLQCshHPnFPvLbqsDA2yXGwMDroGB2fh4S/Z3LP0q00fvSJEb57xXVobC1AcOiAYsFhf/1z/Z/N2i+9/iNujhcf8dgRD69rrCiwg/JJ9FAVCG3jJAZGB2rx4BlAMVPH5xm/pJDQgrWNKsQ5LPxAQeLj20wEJGpo8pa5jpkk9isj+6X2/sPNf0tYGmRJxFYGDzGB+Xx0V1jnRq0Oywc7SNvMDBANIcx4eZ9GPSg/KwlrVG9reetvJ4KONQOPgrVHDjT2Z1uLKX2f+2tjZN07jZPff8YXaIY7wUAA788gMMDvguX6+vrz916lRNTQ13DYJ58MOTk+J4dXd2slgWsch0mWweTsmkR72ABabR+CJ1eiZlJq4xThVUY0pJeQk+ExwxckHT07GdndQAB+lYJoAyGmC+i9Th8VAV6DWSpulTVKKSzgSd6jSkmZkVInthMOdJ2lGjtPHxJBmlCS4XE9G8Fh/3VtHefqb81x7+V55Hv/t66AKQ3bH6V+cVjJcYDn++BUBckjfeYI2SHmQ9hnt83DU1FT81ZXn82DI4yIqhAMhe0HwXDQ3sKFAIeih4oLh4kE/cG4q1hmf497/62TzP9xsp+Oky/hX2BdtBAI8rpYAhA7sh2qB+2mko6qcniH0AuxwduNlZtW63pYV+/n2yM1NAZGcdugMOe870iROL9fX66cbvTjUlxiXFrZ9AYMMAbB5OJ9WVF3jw6AGTGAwp6BUyjiHT8RI22MhrK8dycLKp5cwJ6+mKlJJDb6hSePHg0764CzTZn9TPlcDc6ZNbAzG9w2Fe7wfCcGyAue5XXnmF7N/U1MSvqAmg5iEPKWT6Q9P4N3cfnXBMSCmxIigALriWsUwxZu1sHS1F9aWWU3XWM8dT6kqsQPpnVhoyINzZZekaT+hce/BobXjiQ5AQGEJyKNtiUQKwtESXkfNHKu353LyTm0VTBswl3FSnP3ZM+SJMpvFsbJcMUakrsq2IZWKiZrn/1KlHjY3fXDybihDAUxqE/6c4K/wq8OabL4P7XwD8Kdo+C4BMEJE5WFR4sv/EhKttyn1lyvKVSVaDzPSiMfdJ547dm548fb0gZxkkOg6UDB4oHogqHkTsUWF/hDzQ/Dt9LdarUvZCoEFT8zXhKQNKlaFsl/IqN9ifxxglAGnYT9TXK+aJiaEYUO7Z6RbX1xddioiQq7ZuVfFBbS08pxKSEpNOBzExk16CrtOPk0G22ZGR2dkhOLrU0KDFQodLXTj/ouwu0F5fb62uTgGswBl4owg+UASz7xQFGSQVkf3p73OXf+7zzEmD8gQYeSYwnwpAkaioqOBQATM/3DKaD43hJxEoGFW/+qo8sIxur314+IHNxgwc1PY3miq95GRVUDnV8vDkoZqaloYGKSiKZZTZZV55CA0JPbjQeSG+Mz6tO40JQ675Gm0enWu+tmr1eGJiojc3E+1ahjujEOfZ1OtQdxZnj+CIyS3m6IswCiLbMxrgqMriL/d5Dh1iJi3F48k6tFJSsnq8kbQUH9eQlpqfmufvXl41HwSkPwQytv9nxunzgWiTjgl7P8314yXXnank5C9ZvvqBZaxBqQIlurOT0RpDe8kXMeG7+7YH2h6jwmrzsuKBgZKB1X4X3i8OPf/zwy/6WB9MVNP8fxl/AJh5a1+LPrpS2F8dvVEmpO91PJyGzwLM+dGBY/tnOMdQWzzRhATWpzysV6cnMIhCOnRsDQgC9OusVsVx5eX0J3gNiQmU7CQlkfL4lrh/bEUtgPAaj8f2WnpfSjO1QlB0NUiQ9zm0y0Hd8vJyzgWSh8LLujB5KDxHhvlMGNkv2kj9B6MBZD4eWdysCbpWKyvgVQgKAJWSBcUUCeuJH8jOvr9dULTGPZbGC4qUhYJVoBPRndFNnU1MT9FTY+jGAXympxxLjk1scriCQ77M+JOdGe9Wo9ok+xubNlME2SL4B1Niy8tuj2eKxclbJ7vwRTZF5hoGkrM4WUDGFYJ+NK4kON4uUpqIbCmbInxuEK0YptfsHBiXy+pypVomK2O+HBMz9j6GRiTrx5lC7M/yfCLZ9ybQBShuuAcxOHB4YPB3DqJcUb8yOjshwCd75yszgwzsO2KBE8+Q1zvPUn8mPluQe+VR24zgxemkM0pVYMcTlKDksHZ4DWvBz72gMdk9NYXFRaacRADoZPAyjPR5NEimZVsAeMzyzWplynZHK1Dv9ZUKZSGBa7vOnDnD4V+6/0wZM/VvCIDxCDBGA6EvP2PGTMZk6Awr74pX0TQJlaQ+vOdGS0FJWVX4Z7/Q2Z/oVIYuYAqyXpZZKRtsi1h0wikCwMweM/4yGTq4hDC/ydY4PQ27HR6POAmKWuidUwEJBhZxWpwd9lAEgKguVAZaNo+0g58nATgHbAGaqRmbbrfGdmjhJKBEi6XCgop3lJ/C5u5wsD8zccD2yhoLYnxOsT8GeKQTgeJGw/3/nCABBt7dZv8cvCAwjcc+RvMVsiUjmRbqrCPaXpgAjDjgPQjq8Syi5CXfMN63qL/CA3I9gwDsNyiKdKdo/rFDLKVk0YgdiFKvhogxEQBlBmT7z3CvwaafoMwP9opETYUdRwoBbwFIwOdPADaBxwD8rzon+1MDYOFWQJrFoltAMF23vEzqp+/PdB1jVXor6kMBxr9kfzFFPOL+0wH4POJd7/AkgofeAuAbEYx7ieW72Ddsebn/63hB0MPOgt4CEA68rQz/6aUSAB6HfY7cCvuLbe8EaoG+PYPEaqVTZOwip4b1AgETiOL+M4pE8asiAPic4ueT/XW8OIhvG8Ge6PoMBKBrWwAG8AsFQwA+Z25nNMq9BIDHMZ8U4HKJBuzY1d1rx1CRhiDcf0kBqeRm8TPDvxFE4FIaEMGLF0vM70z+vFBfREPYkA78dnwOEQ3imJcAfApMQBblk+0LtIID+gFjD3ojAlAaoFsgWFxUmR+7HSkpNIYCu+ygXeUndB2X5M8okpGYJe6/OkMoiGBzP915/ecpWIgCfq2yvWEBfgPtcxtSGUUVLNL3qQD1F1WIEURDUOUVB1xX64Bu47YTTo7B1KP+MA4DpH6dg8CUgURYRANAzM4az+xRxM3JCbvOff7Av/s/P4AmGX9Ugz6lpXi5UK8Mf3ef11/+QWURRBBBBOEWAOKECACmNqfaP22/PnPdBhttXpvnloQVqHC5LNQAJoIsUCPAPKrZgi0taqegnh7qg5q6VVDA0WDz07FmMDOIzAFcHjQmoGRnIzFx//Psf0JZBBFEEEFEAAQ4CX1L79js6Njq6LjZ0TPTs4CFaUyPYrQPfTmunCfrAOos/RbLA4s2+zGGhtDZqfbtfvAAdXVqDXBFxe7T+yp8uf8ZyiLBXAQRRBDBC18J3FGvdWyld6Cgx1KDVk/nQCcHAx5rj7lT5xH3kWRXssv16yxXHlrW2jA/rzI/8nSS6mo0NlID1KxQ01gCBoEBdYwggggiiOCFCoAN6KA1NDx4suxaVt0t9PXdmrzVoXUcKjh08DcddLkSYq64Y9buqKWiNpvK+F+4gNpaJQBnzwb0mEOD/TfwWSOCCCKIIAJN13Vs4wfb1g1gdJTpHZXcHxigp69PTzcvLn7D6fxva2uXLZYP4uIuyLY/+flqpSIjALr/TP68dIgggggiiEQAD8T9F/YnyOwczi0r05non5jAzIyLezI5HJb1b1ssX46JjZVdCRkiyK6EkYmbLyUiiCCCiADMKOoXDfCCpumyFQmzPXNzrrFl1xWn5TtXLd9MtMR+RXYljHj9LzciiCCCiAB0bNv8rsssrFaa+zF+thPcBYsFCUAlXlpEEEEEEURwAEDnNvt3+Vxkp9FcLo0LwX62ExwseJkRQQQRRBBB9JyR/d+d/eugcBKAy6UsweW1E9xLiwgiiCCCCKKN5M/sLuz/d409HLa2FPvX0DZRjvJMZELDS68BEUQQQQQRAeh8nv0Hn9vAgezf4FZGkP0TkADgZdeACCKIIIKIAOz0/UvwLOJcKHEBNC+8vBoQQQQRRBDBgQ5g2szWqm5gVwEgNLyUiCCCCCKICADMOPEuwK0MiGhABBFEEMEvzFYQn09EEEEEEUTWAUQQQQQRRBARALQAfwYoAjRT5oUfAX8cOBbo12DuC9nA7wC+CTiggFd3ntIkaoC/CfTBBLR9ts/gGsHDiWBxD/gHwLvAwTD91uvAHwKOBHX/2cAfAW7ue+2+ppoVbiMofAj8diB5r2sUAX8aaMY+oVj1fbSGu1v4Pksc8JuAXzX7iNP/C3zN92lfCOSXHAX+AtARdGF9AFx50ZvBhY4qYAwYV4ZVhBtV25ZorE+bB7r3ZzpSBMPAgirkoHDaa8rANXX8hUc90CCGwOEBVoBlwI4XiG7sByLQTYrVyy8AWUC1Yn8lA3cQVhxTp1ZWAcBbAGjTCAQTiMAMepQAoARIQVA4C7i8NOAXGmWK93GKx+C607IyrOAFYgpoRQT7pwGE9osuAEYQYMQB4UGS4f4/53MtKAHAjwCPySBgALiLCPbEgJcANAadWRQNkFDgNn5RccTL909DUFgRQwgIKQZeV+yPFoQf+xib6y+Bf/9ShALRz6efWoAheScaiYlqx/+CAqT5bdvGKeKB6n6Mt3sLQApS6lB3CIdgDhsbuHsX09PYRjWtCNWnkOn9fPnK7Qhg4VlW14BvYDd0deHOIyM0qQGOwg8uwxw2NzE6CpsNS0tYW+O/UmyqwLKykJOD8ICnHhtThbK8rApI1+H1yDajdsxUkRn0XEXvmirbEmWXTNXd5R3XiKMGrMB1Da51uMTDhAYtDWlsD1ZYzf/U68A0QkQ2cM5E7ZrA48fo78fKirR3of5TKC/ECVPFshPL7VjuxzJMopBX9NlcDYr5Bkyj5QZaprwjgGKgPpRuMYKRKUwtYnENa5vYjEZ0EpLYinKRexiHYQLNuw8CtG17FwfykS+nwvo6hoZUD2SNuFyIikJSEjIyFGulpiJ0sLqnprC4qC5ExMXxtKpjFxYC6EGPHXYIYFG8so2GvTRgZgbNzXA6jbINgYbAJtk/MDCwurqanJx89OjRoqKiYAXA0AAyGSkmMxMlJaiuxsmTptilrExR1dj3MTaChyDykMdG8A7egTm0tuKTT/BQfZfItaLqHVRVoWpnqRhZINoAnuKDnQXHkr5zB8rcSMIJqaiQBeDRI/T0qObHFrKwoOpSBIAtkMzMRsKSq6xEXh6Ch8eDzk709WF4mJcRnVECYLEgOdl4IpsqoZSUsAgA70jZPREA3kHWeZwPRgAI/sKzZ6kBytw2PABRhCK2hzfxpumfGroGZLFRmKtdE3Tw8cdoa8PcHIT9UdWA108I+wcnAGSulU+xYjPF/jRTzfUDk/fKjsYe13pTCUCW1A+Kg+4WpP4udA1gYAIT85h3wsm6jkFMkpaU8aOMAhQUohyoAp6l5je8//RTYoOiAVGIakDDe3gvpmeQjp3S48lJxdEiAGx1ZK3SUtUpyFpBY2REdT2enITG7s1+R8THIz1dqcvx49212T849ANKHRRinmtjDXvFAb29bEo8t8+C/YYdOGiyz/Z88sknHR0dCwsLhw4dqquru3TpUgn7bpACACT3osIVPTObskAHs6KCaqUczzNnTHVZqsX4OJR9nx7rJVzKQhYVuxKV2AsTE6pFdnTgww95QYpG9SuoJvvHIQ47kPSsBizu+ntcLqF+GiMLNpQTqrOGCDkrew6bnzwxE/PzcDiUAIhuigtSXq7u6PRpVSTBgCxz7x7a29HdjcFBnktdRgQgNlYxPqOM4mIcO0Zt4GUoBiEKAOWG7M+m2fMp5mzRJXiXGkBjDSK4KINKqDTAJTLAs7+BN47gCJ3BYzgW0E+9BswEyf6XERZQfVnldCZ+/GMqQS1qSf1kolM4FVLwxahO2fcAZ1DsH/zFSZuK/Wk3sD4l7E8LEg/x8DZu38d9+g9Ugtn42fjk+KioKJfLpS/qWVeyilGcicfAGPAbYOCLAEwJgKEBRXoR3cql2y2HWRfsHXTESNbkaFIGBcBqpc+lWMtmU07ZuXMIAqR+9vD793ly+l4kQPY7ht009m1xc+cWGh6ff3xVv4qjMTvb2N/fKxe0uqoa1Ecfwf72Lp/Af5ZTmhWAlpaWH//4x6Ojo8XFxZubm5mZmeYFwBuq9PjFy5dZmJ7x8fn29vn2H40x/GHsozozdXVPMGtE7SUp0m7eZLOg8lMAeGQkuKc/QiOrsirJ+2JlKIMPFHhpwE927VrC+yIA9BHCAdLvjRv49FOeWLUQNrNsZJch6yAOMjhd96zPL86PLo729q4NDZHDWXhslvQYAmf/69dZgGhpwYMHMQ4Hw7oj9fWJiYmapq2trc3Ozo4MDq5SG0ZHeWuqyC5eDDHrRPYXy/lb9X/wO1n/82qPbwEwjexs0QCxrsddZH8xlhhM48gRmvn0cBvwCa1ztRsWi5LlkCFkSSP7k8tI/WKxiEXQYK2trNBIVdXVZIKvK/ORH2Oqj6KfkBC2tKLcDdtX4p8r/X3fzP7o+lgI08aGb+HWNVy7i7vzqfNVVVVnC85arVYRgLm5ucetjz8c/DAJo8A//rcH0n4v86S0HdL57+Rsfi+VgQzHDYfjxrXDt28rsmBTYj2QmlmYlAH2OqoCO4XdDk1TV6mtRUAg6bN7s5PT/aLjxfOfOqXYj+7/1hZPq/r8T35iX1+3H7DPvjbrQLbZwZa4pxpAf1Fsl+b7TgDsz7TP4uLi1NQU2R9g23w8OTnJUGB9fT2OpB2oAJDh2cKoTtROeoIsPYdjoZ8xL51NvkczA/L2+LjYzIiKCikAtDM44599WJsUAEZdzBFXo1oEAH7hHQS0wws2m0H9tIzkf13/3pXvf/f7YeEBnlg0IHYj+RLqK1BBlyQFKQxOGfbOYGYQg+1oZ2KO3Yzkw6iUfgObEMyPLdC7uXWLGsAOSuqvvXSprKwsOzv74MGDFACn02mz2Zj1Y9z3iD9IREZyTwwOggLPIe4/j2eys7Kys28fvvsbZ3+mAaw+BA0mTN1uEQCb61rX+M80oAlNMAEWHeWTR9PsPwDc68TdT/7y9/DaaxRFJR0hoq3NEACmsw32598IBcL+y8tRfz3qOFIqkQLabgOGQmUM9uh9hgXkfbHpq2lvXqmvdwx8hODBPt6GNkYAi6mLzD+cPn2azTU9PT0mJoZMxLb68OHD5NvJzFSc/g2nexNrf5KUVEdXhpoWeNWstq067jhWb7SoJvveeygqUmkZEYDpadWCeVdMI7DjS8cj9/BC5h0vo4fThSX119erWD4zk8xIAWBl8XXPo0f227ft8QWORAfM43+olQ+E06k7HBppluczoBvjOG/DNNjdY+Pj4w8+gd1uT01N5TBAQkICXw8mAhCPzQjfGaRQAvs/GqOiMmLkzSsnZE9YLEYQQHu49VAEgEGAL1+SekPqFyOE+qkBZkaNZEaQ2CgUGLV5Z34KCuYbG6/Mn3HhzwK/D6FgdpbRIR1/xc9k/4u4SFWrQQ1dwnSkUwAo6kyA8j6oB1vYGhwfpDsi4wHmBYBKSC9GOig70quvvsoeVVlZWVBQkJKScuDAAdb0+Pg4O1VaWhqdrC5+nvUiQwLMe4bm/sfMZeXm5ubk51qLinrCIgAyOORyiQx0XruWM9MpGmDmtIzmyX1Op8l5IesP8eD7aL2He3P/LkcNkPDSVKAQwOZksL8FFoP9WekIDZL/oQakfMD6SzmDlHzfk0bogDK3oWmhzzNh+zJuCK866uscR+ucDxAsRjFKj6cXvY/x+NVq1VZfe+01ZqLZMrdlboW5aYYCVILey73lieXDiV+oSyzVk5O1wKvG0exw3Ot20LF64w3U1Sl2Zsu3WKgHinDYOfm3w8HkrGIT5kj5BxOkJsGQWno4T8XQ4ZVXVBKppoY9i6eVmyEnOnJyVuPjV7/1U/wDIGBJFt9faUDoc5ooscz21NTUuN3u+fn5jIwM/s1X6CaGOg2UHZSyR3GllmwsLFANePOmBABguRtxwFpHh5EI8iUABvszm12IQiP/AxNIezYOcDCCM9j/wYOKCr2xcfrUGfeVM27UIkRQDvv6VCNht72Ak2R/0QAN2vaPSWM0wCiV7D+HOYbGvb2bpLCREeVJmFJll4tBEONQ/niKeX19fVNTEzWg1Cv8YiIo8wmio6MdDsf09PQsy45ETReRoxzseAGCzojh/lehpLC4sKCkgNQ52Nvbs6w0QAyhoLJSgoCN6OgutzsXP9MA5s2wB0h8ZqcEPkDfIzxiUxrRRnDpEgWAFipHG2S5uNiAc8L+tSE3JmETseSK5BRdaUB5SBMHJ4FsMyNtxg1VrtfVNdfVr6+fZKwKDUFhHvOMeun30BXNz8/nLBQ2Wrop2AabMVlpaGgoLy/v0ZcfTelTs5idxwX6TEFMkl//I7aN1x0uVi7ZubERBuihUwyokyxSMg95n92V4i2OPH/PniDL8Vu9vYqJSHzsSlSOV19VaW2vm1E+1sGDKky3j2PxMQLC+8CvigDQVBXroe6qyZs75fF4cnJy6BfSQSwvLz9p2guM3ktelFFrN9h1xYMzDRkNliCgd6GX7C9WjnI8i5kZSf2rI51o8f1pvLhZ/9IQgLa2T7cdf1I1y+HMGTaSraUzm5vlm9AQyBDwBVmjuX10M17jDZHKORmEGWneCEeUG9FosL8B+obsD2QiEtyIa4SBKUOH+XmJrkx0UF5jaIh0U1pXd+zYsdraWrL/bgqdy7fGWLy9vbO8ZX6Lv29yknwZtPtvWcrgfZUnlJeWF1CH2B967oZJAAhpl/n5g5ubXUAunJQBxk/hmhC+hjX6oX1aH4/IUe6/RABhSf2TTdgmDfcfut8NcXWz6iLGAf1kJNN8n8UMSaRiLzCQMlL/cbbCerolm/V1ntuax1OEGAQFFrsTThJaUlISuZ5ZCLL/jpHBwxwSYJoCgENzOHXnOtaDXCtVb8WpEkX9tJ0gx7CzMLBgA2BXokdpsymKoTO7J4SvqBns6nRh2XjotZD9d6L0MFY0LELZiMlSWnduM79z1el4AgC3Ibi9c1XVQXjjLHyAzv7Zs2c57sLMMKuA3mHYFoJR5MToVNJMqaj3oJUxGHDtmvdo8HOzeoT6afRDa7Z9/6IAJyTUbW7O37mj7O7d7jt3DkyMnWkS9lfH7+QjcHz9WQFYmZtbnplZmZ5ejltbyUQmyZ3Bii8HlgpBBycVqSMYsdtVtbPvmQKFgnLBhgvQxyfLc2QfPsC36FVlcYSG4Lfm5ujFBCoADO0M9/8kysmatOiKIrI/bbS/v2fhZxrA0Y4waAAN6ARyty09TGuByPu9Wi+PC1jA0XC4/+3thgCw3f6M/fWGeMT7/jnBRAApqEjRUhgEhLYIKg64CrwL3xDqp032JL+J+jrmUPTcVIQEdgExfRvYAe+31Ie1A5quBVmE9cpwyu+8AyaFSNwycW5xkU3clABQJ6gWdKEI9qncXH/JwzpgEfgz/lJAbYBDGZzyBz50YMapOTmG8QTOPwZc8cH+NJgTAIEMA4R5JfD6uhpZoanAKi5OGRBcEDD5+LExGuw9c25wUNhf5VXImHSyxBAYVi1Rd+qK784P3pmPvTPvmqu6JOyv8+gRCddCFQBieXm5bmmlBMvUQ7J/tu+I2wILLRrRMr1SdNRsOsZu59XoRrFGGdPRdYIPMOjmB/gx/rHGb/G7DkfQ7n/i6hFhfxWlxUepgFqCgFtPgwAJy0LHgpcGXAyZ+sWvJPWLkQJCd/8ZURnsn6pbhfp5pLSHbSKORADr6ylQ7M8jQoUVIKv8E1+TG0n9ck9NivrrGAGUwGOu1H2664lI5IQu/vgZ+8zS0hLn/OycgsLsP6emsPvI4lB+PlFLDFI1/wXUYF68nzKwsjhVQEWwU0i/MOkKUS3oQiUl0X9Vo3b+KfUN+MeVZ9hf/r7mwLDj1zucX1BBgLC/2kbzA//sT/xjhIIgBEDKjabrSl9YoDwGpNhUehkNljjgoetpECCju0wpGVM/CSP1T8cZAWAOuEPLyrpTX39nYcHBtkflFvefVTmF4JBJ8ybmhNWVL68ur6yusNfSi2Gex8/vdMHlhtsDjwyKSzLN5BQgKgaNAkCokTS/iNoGXC75YqDTTQ33v2Gb/SlvACgAEgRM9fcbo8FKm8MEEYAcdURpaOwPDX3oE1vCEo7Whur+2+0G+0fNLzXoaso/zc+kZA2BRQUy/EvjRNJkPZm0mIAEeltSg5o0moADjFTA6iu9YWSzKlwnSP00RgDAPVNF7vvFDC1D1vp0bXQNDw9zWjojV6ahmY7Ydqxn7t+/z0lxnKqYgxwOkvHzvN/gd4nIhj8Y3qq3D2smO+ZwKL5jB+RwAhMp8vtN1rcPATDYf1PTyIf8bfpXy64D35jGlQMY/+q3L2+evnwaNM1LAD4zRJsITxWBiaKyUAJukQUFRhxgb2szggAuEAOM1D/fBMklKPdfNp8Tu1tZyWUQnDVI/WamQX9KnhpCRlL2Ki0b5pyJRSySiVh+AAuP0um7Oe1gdI660Diws7GxwSn/HN+P8aEejKnpR/AzhLqANLKg3P+UdTWqQSNxGlPMngYBs4+MIEDxVDigP5sIiguW+gk6Kjvdf1roqX/ee4N+RrH/akP9ag7cY6wgEgTdTA2mUA7YgGU/+Z/+lJR7KclL8bB/i2GBRreI9WixGGvK2Yk0s7piVRqAV4Hrz007MVL/MdO5Qv00UXottF13jugqcKTfZtNsnJfMMQB2Qg5NceaPTAPlLPXu7u579+6N94+z43MNIGeUB7dTkKlvsfuIBRJ9GzOVjcFPWijsTww+O2GTxKTzV0mK7AYUvv1t/J8o4Ks+Bv1ftABIhKoITEwB84Hue2VMCWUQMPN0Sqh1odiY/GOBxXD/tQDKoc+gfmOrEA7d0/YFq2Im2pLiibEpTE1jmqKZlRXIOgB+QeKt2VlGzQyoGT4z0e8jSzHC3kUPa1Pclvj4gNYB2GxP3f+m7ey/kILACALmGATYfhYEkDgQJox5aUBDoOyvwYDB/mywOHoyVPZ/8MAQgOOu4w0PGxpGGhpmRmDvIk1oFADWUXq6oubi4j3rlZ3btm1TPO4cAf5WSspCUsriNxl2aPRDDQFgG2Aim92FiazKSmOlt18xSBUN8JX6H+2NfxOK+uv1ekbh4dpzjSP5c5hb19ctvZbrvddn/sYM5yhTCThLjU4MFy0ODg4udi/KlDle3XcgFSYN0HVlhKbJ0dQKT29oGi28e7vpHP2qqVEXuolt/DpcBiAaAPy8CYAk0LwF4N8icPCLxv4QH38so8G0tEdFDx9qZH+m3eq3ff9A5pt3bFM/j492lvYLFAC61GTNIQw54DhRwnwUO69p15zMwm7PMavBQbpRnDzHmJpDwTsn9nLWV2dnJ6cAcfkfiNRUyX4G4f4f8mQa2f/nnSkJApQAtBtBAFsDwgIfAmDS8RewkTLzIwJAsQ0x+0/dRUeHmgne1pY1kHHqw1OnurMahr6XNDWlka9dLtnvSaiZF2KzJaOaEQDF/t62suKUCOCbhSkL30xZXNRWVrTNLRLPFrZkXqNqBkVFqKjgyKRsKrIXDcZva0Ai4DDkzEj9N6rMjzJWdLjYX2Y/n184H9Mck9aZlt+XP544/iDzgeN/OjajNmNcMcn2ZOZ8mtB0HMd56bM4G4YOqvtdX00RpREWi2RgzUTeYt5p2DDu76kbWfHnGnEU5PIvJAiIlov6z4khN4ktnm7p6yHMATfWhXFWCedHliyUHOo/2ttbzrHfDGQEMvFfYFA/bRj+oYWJ/e3qiC34B12hTnR2o5t8RDY+dowsYXYNtczuVMxC1/LRI/pNpHiG0vSkOM2Lc+mwDSZb+dadO3eYXeXfIEgWDDT4GXOgHBvu/6vb7L9zUpORBVpmImjiZ0FAIxrDqKqiAc9CN1+bQv3UACoBjtaJAJhy+nytkurspAZYZmfrfvjFuvbEUw++Vz84yJH2Y9HRTMdxJJMuLYMARc1s2NPTqp9wTroPnNqOm23P2fIyberI8szQzJX5wz9G8ZeRRLqiALjgojJMOaco7etU95ER2eyMRKbEgNg7C0RzAKrPGdmsMvdxet9iXsXpn17N7UnmdGbdaH7rxq1/3tKSmvrb33t7xl497/zTzs18tRkch3wZbTD1z4qp0Cv2fTtocpYxG0Jyr2ZmRjJ09h45oDGt6h+fAq+E/HvDt132FvDNbdPNXT1aPrBrYxARdbmUiqrSoYUAIwigsa/2P+5fHuReBuW8hPj+ZH81D9osfrrN/tPh3i9cD8X9Z9dlqM0tsR7gAZXg4knmo6hsAaxFZ2mTc+n+s6C4M+rdu3c5wMsJSBQDLvPjIu+trS36/hMTE319fWT/27dvy9Q3zv6kePjYBbfKl/s/3KPe88r+74CmkXQoACoISJ0pwc80QO2CECb0PCMAekBazhyKCIDh/ivfn8egIKooY1Mu4Hu/53vDlZU/LSv7Wm0tZ1sxo+1yubj1CpdhM/Dqp1RMTKhIeWuLxKEGiX0jXRkqgTVh/9VVm7YydX7FVvrlFVv2EduRNFvaQdvB2LFYCgBHLTmAxK7Cm2JbeszCp1dL9pf13juq2EcWaJw0aKT+tZkj5H1x/2P1WHM94D8BH5hUTY2XuXHjfNTtxsarr702E1235Dzg3NK3mIxPRCJbi+kdpUzMAuqFvwBGFt0sLMhkdImMzfQ7cXNVHtVul+wcQwGfyyq7gJZQqF/bVQN04B0EA2re8tracmLickKCHkwKaIcSyORe3j7bN41lEYoqM2EqgwHa2NiU3jw8Nrw+yvyGTQ0f2auqkqoqURmII/+JYn+s7P1DtCDYP3gB4HYo3ISgGc0d6GDGj72N7lZNTeBiabOp9ufx2FtafvSjH5FxuA8EN1fhdE8KgKz+/TcTEx81NFh/rfWjP/zhFlmPtFxUZHInX8YMJLq0XlweAJGJTHH/dy8DyUGvrzvd7h6gBCOUAdkmOoyJoODCOIP96fXhaH2o7j91l2zb1yeL7M+dO8dllsePH2fhc9cNvsKMNhfcMy/HDZr4CuWZWzYxV8PEHTXYzGZ88UARLWkFX1mx2ZZttt+wYsvJtGWm29IpABabBf8PHnjmMc8UIjOl9Ip06ENjQwxKlMCXqDVQewkAzeqd+h/qi3lTpv3odSRi35kM79p/2+SeZJoEGiy3jo64JpJtQmpqYY5LaeK+oBVIA1KBDB8L6RkwUZjZgyiZ9AlkTYAJUCpk9idvhyrCM/A8u2+yO25HK5Rlhsz+OzTg+8B/DnR/SnqB/f3LDsdycvLysWOs6hDHAHRATXOQOQh0eTAzQ85gaVIeg/a3ZV3YL4+PX8kZv/9nx91jY5vnS6ovv2M2+aM/FwG49oP9QxEAbohIAaDdxd3jx9U8VKZtT50KfGsGTeOXqbiyCetWf//DJzv/kP25x5Ou68709Jmioh++9VZHnaOjoWOLQyqs9fJyn4nvHX7ceg/e6AFoCmCQngO/5MWtRgsL6QcoARDDVNh8OmA6qAwe3WRj9iczYOL7KwsODocsBIUaUyHNNnIHDu7DwRmNjL3gBeoxX6EecPLVA6bYmTJiFfDqAezGukzLzFzJzPwKEIcVr4GCs4j+o9FHcETWEpL9F7HI5KmHMsdaJrvV1flNalslAqBeGKn/U4r6VeaHHc1fNltHENA9HtKuGr52Oll+bW0aNzkg5SYm8mey8fNIY1vmK4xhyMb8W/N1MrMCYLXjgmNnbocixNwp1Yj+E3sE64WRsVktYpGzFVHIx9TuZ2wG9JIoukbi3qh+pfr37qNlFDbgIAKEFuZcECv4pz9Fc/MScfgwE5SKpUlAIQ4CFxbqLMDaWjhuakNs4snJmJpSgRJeB9KCebhGUpIxI6j/j/yIWfLT75yWjR+EfczDBPsHQ/2hCAA3oLiJmzTKQP7R9aYm7oJMGieBB3VFlvalS3RJ2HzloTNs0Gsu11pUlP5kBPIn+fltR6faT9ycKJrBF77AgqWT7tvzrYA3BlDRA/QCwwEkpoRY3YChAeGi/6A123D/HXAY7j+7a7AqNK3KeXKSOldYWMhtNrivGTWAurtzEw4qMeMwTsFias7R3886Ug3bIZRk/lGQHRAkK8NRwA3YgD8KAWfL2GDjEDxDgcG1Qf429SPn5pQr5hMJQOroqLW1NaG11UlyKHKXGckf+EDu801SA74Ac5ANb/Un06K03glmzru7NbbcHQJAAqAAkGPJLWyt/BKCQec0rO2IT2Y18SxKdBUpgcVCT4A8SAmiJJMEZfyNMVMAw28UjOJieQIHT6LESuZBMDJgu1pZUcLA12Wz3vz30POPgT8SrsZtaMBvD3TFYlcXd6hettuXjxxZYrHyrkMXADIXm8z6+nJS0t3h4anpD/+OanYxbyOUpysxm9w7hoxxxIxnux9VIb0KBaSufaFsLXynMgRg0if7f4pPb+AGBeBI2Qo3EKRRA/LzQ5Ao9hgKCJsv29zMDBuf7nbjyRzE1vT0lpwbrYWtbVobowyqNNNMbLhmb7dHDMHBEABaPl4YFrBgCAB9tzDM/ZdVoOQRgBke7sPKHVgN9t+5uQ13PeP0ds7Q5TQtGPs9mRWAZWU7EQPkefvkyEUuE3TMoQ9iEEtLsnzMrwDAbif7pz4x59b/S6//RFF/Curuwfht2i6t8RPRJXzy3BD2QQguwSfYShdPnhzc2PjWo0e/t7W1RYtf+3SNzCkCwD8sFhKyKht5oiKDJWrZ+fNBbdT9r4/gWjZ9XlUU9PQZnPHUHo8qHHmMF/NyLCIOy7Nf0DFiWZkEU3n8ZbJ3I/md5+GvZ6vgmBCFS9Mo8HQRZD9ItUlc3xmAFlbXJtDQiCrIeyczkP2BZe5Us7jIv2X0ItStIJIrx6wJtw/ldjomRvS/P++JSeI3QkY1MA6MVeER/6IlvshHNush64dif1K/WHrpIps1jQJA6g49OiHTMJw2appuyGD0SAt+rCJ7rZWulOyuw7Zu3m2GuP/jwU9L6HnxAgAj+bOGNRw9Far7T6ytydQ3LsAmv3OHpXwKuG9wvSs/xpEAmTQd4D4cZp8Er3ZNQKJafGesa3W54BcjrakdLVbOx+nrm3jrSn0q6lqUyb1ou9b0e8BHV2AHrsCAseXO3gLQ5aloT/H0FqaOaGVfP3TIUXbEWep0lbrc75KZlK1jnVHaHOa6YYuN5SCXKiry9i/9EgJGE+DKwKceXL0KVhAjD7pK5DvqAVWFLYJqc+ECA3DlGzHvFeiiJXkIMMuZ0dMPf8iUIJNCssqSzYMyz8sp9q9pQl8jkBoK+4cONnh5NvhabS23KlvOyWGSAGIhRgCsMI5nXiu6dqfoTt9Zy+q7775OuolByMgEqoDf/kPgTwHlCDOuARfMaoAOA8NAIYKAsL+4/9biBfH9KQD0JIKmft1XTVss85jnqF4r6GS1LCa6hPppZtcZu0N1/wWDz8QBLwAsh/C6/yKxYvT6OduKOxlQCfyu2EuMfwKZM+dz5vhvAW4D/XgGunr4l8mt1jRoNACm1jS1I5VTMVtTLa1WAG1X6toUkdcCmg9iOiSPKcEVYf+3gTlhf5o3/jV2x/376uFI9+5VPXz4/mD1+V95553V48VrpWuuIpdH97g1twsuCgAf5DJzbab/p/3N15pbWpbYYEknDG7J4YGhBvAAUReZQmK6n346+VqVv8ySYlKIfY8KU1/PGDzguYskd8oGJZYqQsdrcFDFdszvaZo8I50np0goXZlvBLIBDSjbd+ov2GuS/dzcUmLikt2+lNmOx2rjgTAsBHuMx91aN+mmLWca77/PYUB126q5hyUIUHgT0BF+/AHgX+2tAToM/IMgHxzLwV7D908pWiDvi5GITNxZwOKwiU1x/FkpQxhC7Tlx/5n8Cdj9tyEkvGgBMNifzIKjDcL+yusJAWQQMf0JONsKfqFvQ/LgPt2uC4AFiAG6fdCC7o80GN9wVihN6InEpMwXRoBWWFutFICszay38Bbm2gDa3wP/3rX93QauPMQV9B/HZbR/wNECYxagppnYQFOjAHDs6/r1WNu5d9n6L7EDcM8D6OR9SiLdf5euBGAFK5OuyXZXO5zgxDby6sKC8tqDQT2QVCN0rLz+lRVKrzyPm96ALJ1TXhFfCQI8gwy/FRQwFyQP4pZHsjHdRNVSJ6+qwZWkz8jxLwWa4A8shzfftJWVzTl/ZeH3L+LLauJTaAKggZjF7BSmhjGMjBwORaoRFR7Dg3jsMzKAGX8aoMPA6eDZXxx/HpMLDfbniJGZtFIw0ifUL+sMFN8Z7r9JrIXH/ReMemlABT5TsGUaAsA+GR73HzC2AHOOj3OAl09b5XZM0b5JhHMuuCCDHwMgq414Bp8CINYeMEvwZhewsIQlQNbk+/bvVoBWZYmtidVz1bIqxZz30f3X0B1zGUAtUAbpMaS80lJey/8vJv3SP2aS3Barxnb1qioZftSgxSKW5t3OqxqrNmY2+AA77hW6ubnOtI0e9EZA5UD+F+WJ7bDbKQBUX1mhTZpSpRQKmNZ77TXVoiYmVHixvi77uDHdxJOrSyyHzu/mUAE0KfOP5bSo3rS+x7GPx75YSv0zH1VF+2mLlG6J3YxR/HDO8/A9GrX/4wHmr2bK9z9YIJkfnceKihBcAc2fS8hkN6lfDFYreV/cf/aygN3/OYQBL04AjOw/2yd7qXn33+w0cIBrfbkFE6d7cjoQfIB7W/IB3NyISYZqyA67L9Eq2Wb/GHXEPZgHb5AemOwrBYuFvh4v5GtimbA/WoB+sGWwUOiAm2F/JQAw3KCTsjerTgVITt6zKTscpF9FkohTo73+W6PL5eJCCq6mprKyCVNcKJrBQ+b50PYJubnK9gfGVkMSJDHCo1hKaKtDr5AuVbXN/uf81QOzlkwMPMCD7lM9y8e/QA+UTTFAAdB2fS9ajOoqA82hRzqhf18PyFHYc0xYAxqCZH9x/xPy5kn94vvT9Qn4xjRTL85gxmB/O+w4eUnc/wAaqD2c7r9gSjQAnylYFPvi/gMyB5xFSmbhLnuc38lJPhwK3vX52pz5w3e5xbHah4NeIX2unByfjmeelwDQbgFbaEYz74V7JBzH8SQk+aD01i50UeoYBKD0uOwqtXsK6L6ifmWtT7fpN9+LxoEiq/F6ivlZFLJLAKkY8wuw2bhzeHpGhmW3VAFXs7e3t7PcuMNVXJyHt8KSllxFcEHAi4YWinLJnChpzyMY4VCiFdZpTLO6xfmurq1+yv6F/q7JhsSvt5S1tDNFLxOfTCPaz10kIIHGZrQgWwLZ7T8BLuNlh47QwIFxw/ePz517Qv1uWlElnL6bRxzifD/81tT2EmJ0BtWYj+H+AwG7/0sIG16EABjsz05isL+5bK8JMiMtlZTQhxpub+fOxlx6zdVefJ6t90IwPniP+0C0trY2NzerVWCAqfnmR4CLT0OBttttH69//AiPClBAH78c5YUo9N5izwYb32WNy6pyJCfTv+AP83mV1m3bCrgHaL6I1YQGsGBkU9TBwSW0t38rMTF9eTmdq9YPH+YgOXcx4VAKd4Q29s9guVEGTp0iTakyS0oKjX71l4z6jQwTyy0rSy0160Qn652JPpKtLGzMRGbWqay8pjxrk1Wxfy78YxnLk2WTM03ZW41qrz82lfDsBkqvhFPQaFhZpHwrA37vz4sG3AziHePtWdrz9Zhj6Ow5v+wvjj8tLuf2+fM3z59fSDlvb61yt/ptHixMEnYxihE4DPZnW2HDMeZ9BrDhwWL43X/BnDrlZwe6SEb+h8kQ8xt/mgUZlp1yfBxzc9zmgQMATPEz1ZOdnc3N4DgpiEt/mfPhHm1MZHODezqzaGhgdZDP9l5wlCrjARixjLRZ2qgBP1r5UQlKKADUszzkMRqgo6BDd8BBARjEIGucTW7V4sLpV9VVTpygz+xPAOYDY3/NBLHqfjmvoEAJ0+SkPG244w85HF8bHk7PyUlLT+dMKkMAuIMeU2qPFbpOn3adOcNi894i5SWSAQ0hg1EcGwsdOaYP+/tXPsJHD/GQKaBVrDqtk1VVJztP5+Y25b5y7hVkYk8crz2+2Lh4oNF5oKnpflFR2LaDpi6JYXlYtkYytrXS8cLxDfiCB/i2D4fmDwM//cbsLl/OFV3zLwDMshm+f0zW3z937ttZ56bvnpu3V9tdcPlvGFnI4hyRIASgG92GAAAg74v7TyIIxv1fRdjR8yLcfw88hvuvBqjCBRlcWVjA2trGnTsff/wxaYtZiyNHjtCfFQHgQxooCXRmlxgZNzbKfHOzu68kYfWCq80y3GaZa0v0LN63tgy1kOiLUMR8cypSRQCccNIlHMUogwCVz62/yKvwWv5mtbcAAwGwv2aeWPfiWFL5+joTQapJcn/HT+4MaFo6n2PKCbJUUAoA8/7M/2xtzeTnb3LiP7WSpcUbslh8FZLA9HsHATv2Hwd3/oKkYKebUfyWljhuRTGgs7Hlco2wNHLSmE1ki+6src091piHQ7mAX0KPAhqR25j7SuMrBxpdBwoLDwCt4RKAZCSLUdyNh5dyKPiFhl8GrsAPPMB3nmnJ/xQCzB6+csUv+xP/zPe8WAbjZP85zL079duHzjfcPT8zVzPn0BzYC1/BV9awRtpSYyqmMYlJg/35dfH9xd8MlKTF9gPL+Iwwhann5/7L5j/hBfM5Gxtq1gej366u7icjAdwKlP4sh0XJZcxmbLEH0/WtqFDzzZnOaGpSymEObRZL24ULbfHxA/wKswA9PYt8WMr4gzZPG9OtFlhk6uc61tWQclEdfw/ZglchZfpb5tZqlv21cPvXdBI5ZYY6xfzZ8LCKBrhf3urqPEtxa4s/mZwhz7aRZBFviJGMv1u57PNKvt/77cB/xn7it++8dk4I6RCWA9mfZcI4wFjGwBaRnc23PJWVnTExuQAtzydLH1TsL5bdmP1KBg5ADM1hEQAmf5i4oD19fJ3dLgKww79+DwHibYSIGvhFvQeYhYGPgIPqojU4DLOohcAYaudIvVrNCFUxV8EG58Z/VjsvohbBw/d36QYK9beicwpHYMlTvC/uf6AQ938dLwF8N6Xtp77oW/giGyZpUVEw+03YwUKWSd8MqIeGwE07l5a4167iM4uFwiBzDSWMN78Kj3gItIkxaOD55Wlfwppzc5x56nC5ZMYhyYAiZzwObO90iW7q3fd9FfBJZbvjfSj86h4TaClP1OKxMZaWiqAYHRkCEBuryuzQIeodRWLvmT8fYDdYfb3h1cnfxv7go53XzpWXQkBBAU22/RUBoEyyzkUah4EuQDTg5O5DSo1eloRM4BUYGoC7oQsAUxYJSIhHfCxiN1ifTidtD802hy8geJi5Yr2ykPFByOcO/ipG6v9hK7K65UN0GEg69ARTU4MRANpLgcs+g6FejPahhiZLosiMKv28T+DJc3MVpclGTBL+6jq7KeleNn/+/+y9B1wU2bru/S8FGhAkJ4liAAOimJ0czz5p9rlnNt64z3dzzjnnnHPO+Y4n3JmTdpysM86YYVRMgAhKjgJNqu9Zs37UbYWWohsanKlnv7umraaraq1a63ned721akkezNY3uj32h2kQF1qfWacwNNDfL9a060GqdPa1mboGOYQihhV57uG/QeNy2d/C/vjbS69lJwMV4nEBUJ0lJcXhHW5cHXKP9YqyVu5yiouNRV8rr9xsKSASWx9l/w1YFD6qAZ/EKQDek6BSAvskaPQlAU7GXpcrLQANshXJ5TTGz/6xl+MKt86x5TyN57DARowxPjbRAjM8HTgZrQR5LZxsAdcbRhW1rCrS0uxCpTb29QTAvtJsudMOZiLY/wERsDKgniW32S4I7PnMHu+vBPuH4aS/DhM/7GhGfAgwFLFe6ks+n2HMh28as4hbAOy7UVxcOyUgeqMP4RshVgSZPr+IHdt5FBsW7Fr5s1jchXNst3N6pp62RK1/+G8f96CFUAvcYC1gc2HxwWP/L1gAT91XHK6PfhdivSJA83wEINvBKmAD0THIYD/9QwxNMGEnoHvu51OPGtYtRuAcWPbvIYDBDaw9rbgdIQABAiwHTdBsbHWQxALYVOc441e5ep3r7bTz5VIPFBWZD6uMAN58fst3ATqgBWM3n9pI3lL/eRgjgXDX/3H9YyP8OmPrBFnw22U+6mp9w3FxH0u1neb0AAOTTHbQcZ7zH2z8yH3hBb1tjh//cerq/JRv/SNAgAABAiRFe/B8mmmzFl3pOHtesfNc7LPnXxUECBAgQCAAz7MQd5hpS04hcw9btrB9O/X1Zhai4/DVQYAAAQIEAnCSBagwtnGjyfraBRB27OCrhgABAgQIBKBxMfYX7OoKoRBfTQQIECBAIACFPIpCAgQIECDA1wAbCBAgQIAAgQAECBAgQICvDxzXdQkQIECAAEEEECBAgAABvt4CMAz/Hn4EnEetBv48XMEvRuE/wjfAgTT4/+CXiAbHh5XDt+E/wG3fJ145i/N00dEB/xCOgQOvwL+GfnxhAv4L/AQ4UA9/HW7gIeYaSjTG4H/AX/XfrtZhGR1/9jr8G+/ufg5/CrYtp8W0w9+HIz7OtB/+BtyIcnGvwb+DIXyiCf4i1IIDu+EvQTP+8Dn8SagCBw7A34q+atl78Idhawxd0fFnb2CIo48n4R78IzgOIfhN8A4eVoluDsPfhTaWQBj+O7wRB3mFDHPyzlMdARTA8XnbRoCvyote2ozRru3TW0bXn7OVDTnGDBiEIWMGAaqssTqomD96PgGeSgHYDMfhmDF2E+Crwv7MU7+1u1/hV6R57L8BmIUhGJQlpMTrH1vnKTonwfKy/hEIQMo89R+HBlYHAX6RNcA96/5726eujP6Z1rJ/NkIE+7sE8DTA2kojK6oABEg6FTUJ8D2ioAb2LVjUKspxRuE7RCANfgJY8HOHR9HWRksLIyMYeCM/Bcd58dHfwSkfZ10MGzaQnExaGllZ5OVRUkJ6OkvAx+mSkqiuXnQBVwfcKAfogE95BC9DnlfKaCeeWCSlUg87gWi/9V9FDk4yyWmkbWZzHnkllGSQ4b96/KL9NG1dHvvLXq83d8Q//De/hdjAhhRSVMYssmwZ9TluDXCIgJrwxYv09GDZnwM5bKeRU4O3GLzIkJ1yrxazf7+vSm2Hz+K/LA+vQfaSvalpwXpCu2AvPvH5AlU/ANu9k0aetWqYqu9RBZdh1lsv8ciRGN5H0ELLda5PMRUhLNvZeGCpst6DT/BACN7w05tsQ4sDh6FqkTrxEIZ3iBcLSkSjJwC+NWAn1PjrgQvrJg0a/SyKePcuH3zA2bP09WF9f6qP8eIxji34XYxd3xMAkb5de7W01HTD2tonLGXn63QpKRw/rharQ/k9wAINeBnw1exgHH4ZD/ug3tdvF1bRz0QVAJFjAQWllG5lay21IsoVE4CxMaP07W/TBrNou7eNmnb27cM//Dc/fmZxAUgn3StjNdUqo/7pK+/rLk2258/z/e9z6xaQzSs55OS8BUgABhk6z+AdTCt87rnHVoZ1o1aqpwHx4zX/vSlSA3YZs4hBAw4Yg0XJTj2xqoiqt6nq4DYG7NmjvmQ0YDnoo+8MZz7iozHGcKzv/2NUVfkrq6cBKXDSR2+KXwMOweFodbKiGhCyR/clAJ4G7Nv3a+EkvOkJwPJ7/gh8NxVO+omau7v55BM+/ZT33+f69f3sF/Uf57gslVS/J/bOSlQ4jiHrTZsM4xcWUlHBjh20t3P4sFECixhOV1amHq2mrMPaHu3/AHfhLLy8zBN7GrBPtrzfelWUGjUCEDlmk11IYQUV29neSmsDDbvZvTICIPa3Nv05kNdOZrv5l38B8N/8SI0aAWxiU2QZdUEHOagPvjRAcKNqQDhMVxfXrvH22477LcP+8/7FqaEhpAGDP4TaExw6xPR0xI+XKlwbfE58eHW59XgFWmJhf4vPoB32w4Enn1Usbewyt3+I8c6Skti1SwH1soIA3cE73DnHuSaaqNpK1Td1UFW+77J2wAVojI0ClolDMr9nmYxjDNPTM/9rAv816yebeM9r0yLKlV+71MFTnGFRvzWx/y52ifetWacsBrySmsrJZ2jEPi7pYdadnQxPDoWHHgw8uHNn6NIldu826jMxYYLyykpiw717nDuHFYBXX0Unf8xptPW4rvAKqfDMwuWgw4SHGe6h5zM+u8hFucaddGrPNNP11BM/pLeytraa/1jz5s9t/5u//MtWDu7eVTNb2QLCYmWcYWaSySGGHvDgNrcvcUlNTp+N5whWA+IIBQzFW3Nz5tlfbQvm5rD7JQN4X0U9zAFfu1w4D6fgraGL2a1Q/zTO8tF9txqQn09f37htHsZqavAH3VO1KutZeJJiLFE4Ia062AiyN+Lo6yf87Y0CF8bg+/A9bbvP3L6t0Daf/M1s9i0AkXqxG08DcnJWUABcIjE5aXx/a5cuacBBYz7W5J0RKxoRSuHEY9H5LLMTTKgb3uNeCy0XJi9cuDA1NkZSkumMW7YYRz42NDdbATD27LOsf0RWUaQAWHK8z/1b3LrCFflTAwyI/eU1q3CVVBIPJJW2b/f2FhTUFBQU3N28+cW2EdvlV1AA/jUWi5RRbWCccbUBCdtNbkoALnBBCufiKiwooCCLrFg1wAXHY3lL8dq6WGFwBwcd7Z8LpZGbq/1kZrpPvj8R+DVP6knD8JayDvxN4M2nUQO2brUmAcC2EMmAfwGw1C8NGGVUdZt4AWgEquEgXjOI8TAL8PKyOPUiXOjn4ve5ffsG+Qrc5bTtZKdfAXB5FDvjLE/UMzjMw/P9z57dwhbP96+gIm52W0QDbOfvp1/N5TKX00l/l3dv3JC8qbUo7jRNLga8/o3Xf9j4w3O/d9YKgJSgrs5HRi4B8F1FkQIgxu+g4ypX88jToKqI8nM+zyW3lNI4BcBz7hzXKTpbVFhYWFBY2N46Yrt8vU0Fr1TpomiA2sBDHqoNiC+aadYde5/3FQrIUVILlNN0hCNAzBoglrcaQMGX7D8/CmFVQVvttOYyj/8D34KNUUvwU0uw/yngz3o/ego1wGPsy5eZ6uqy7cTE5kVF+ECk+++JSeJ7k38N8CkALy3Lnb42woXvIUfgwoUyeJ2GAxyQBqhV+xIAd+nzOCv7wJx1/K2Jayz1y/ffwQ7iQx7eyXIXErBYTFF/JpkiArGbQgG1Hfmm9+/HKADT4UOHwsNn7509t9cKgNmWlz/KE2ukAf6ryEMZZfvYV0JJMsnSy1/hV8SPqqVaaiUM5ZQTE2z61/ZtNcqSYv2vJHXLltlbt+xu2b59Kx1jLlZGuflim73stVGm6FpN8AY3lOdQAQ9z2MGJWQPk6Q8NGQ1gZ2QCAMv+ngB4wsBvW8j+wnbmUblECc8v9qPtC3loPSMjA08D5JB5iSI/AtBHn3X/de9ISkq8+y+ULvgUU92XEoEQlPpv5b294n3L/s70dMM8+6sj+5oH4OIH7gr2Sl2r5/5vmkr2Rn7qqEvAE9tppO1hj/wEebVgAk/roMWGsBGAQzXhGrksSgZYGx31X4PrEWo9ysaL9LexDVDv6qKrm258I3r6d7qCirLSstLSUsrKSE/3Rn0TOQEqREhcL9JXARULyhtQ6cQmAwzEms5ichLL8qNjjijeNUNAXgRgtQHL/makQqiALNkKZdQcnlo8ytueRxAOsxQWH/3fvBmf2LhRJuWwps+x139iuru74MCua9nfEfvfv6/OZdlfWxZDUvyPPMfbWK9e9Xz/pJHx4/PP/BziECsEJ/qTGp4bmEuuHfANh03XnZrCdWNYBVk/PFQ5PXxoemjIHWpxur1kwEsvrU4NrmoVRUACqWigmGJFAJYZRWLxp39TSVUbrUyqrKyooLJS1n/tWuyp4Dg6nDSghJJ88tUSFOuMMSYZ0Ic88lgOJp1JPV8AjAxaT38sN6fioWX/jZMIc3hDQGO5uQ9NEJCN85A9sBljbAKDTbGzz9ON0lJL3cbp7+4eV2vwkwqeYca6/7IY079paY/bSvamyH3Oajk4ov4vfX+amuTKeOyvRuZLANwETzK/fdvz/RW5HOc5z/1PJMElkyzplwGOYz5pK4sBc3Pls7OHDs2qgw/9kB+eOzfpJQMaGha5FvvJWfcaYAUyk0zAMuMEE/GnfyupEevLUrWxZgSAOFPBLrFAPV4ykEKKTQ/I5phjOfiYj1Wwaaaxw0nGdPez3zIs3wlv2f3Thv1FL5u+3D9LutlPlrVXPeb/Lcssp7PUHXXBecpSwRKAiCBAAuDD/R9hxKbyjJWXJ14ABMfPQPpncAT4uyvVxJ27d637bww89n/CQHpSwgclXDx0dhret+5/hxlvFe9b919cvBpnjdZdRhn1GC03V2Rto8aYsfcQEgBjp+dOawjISwZUV/vIq6xLDUgiydNI0aK1ONO/gHH/qdSW4mJsEFBU1N7ebb/fv183InEuyRRT8iJlgFUCeQb4xk1uypE5zemwE8aFIasBSi/knMppIrsJwYFb2P3P52h/D7mnsNgse9MW2BMA/3B83NGnNBU80dWl1rBkKthz/2NP/4ZChvTT08nI0DYeAXCffJMqoRFjBn8y/qM7wPi4N/Qv7qmhxhv9JzqS1oz9+/ocO+FLduuWEhTeYz+KXBL8Mqw73Omks4ceMBxdVhZ9VqY/Fi3hkNEAd2jYGW4eaPZmBsgkMLBOZcAlKqSOYcIywDKjLJ70ryyffOv22+yLPloNmO3utn/if1KYywqgjz4xs/EfQffKRjxEwwJu0W/VhC5zuRWoNt//BFyaYWCAb/3bgT/xb+eH0l7jt8HPwrXkpG+9ff3n3qbVHi3riFqJLIa75fhQ9acrCEhL8zRAMWHE86BRBKCffhsB3OWueDz29O+WLeYRwLw864usLPvHDh9hn8f+otM88jz2DxEiOpLWhv3FApb6pQHNzRIrb+Qnh5xEsv8009e4pkcbr3JVo9tqMHV11NaybVuctZKqHMYQQ8MMa3vnzj1PAF55RY607ZRrLwP+K+o+93vpteP+YqnNbM4gIy73f2rKsr/3mK/+ZU3tuL192v6VBCAxuM51NQDRh+5XCSU24SEB8P+gtpRjBGeERluZb4vluxj6Oer/wJVs9g1CNgafaj+zg/xsLrk5vParUAMO2Pno8bC/fw14jacAkQLgJY28WcHRHv9/5JebNrFcyHOTb/PwISUlsvXM/g4RuH7dsr/Zgsf+1rVaQgAShe97/2V01Dl/3rD/+fOVbqU38qMqX/E8V/OiHx1D/WOMPeCB3P8rXJEcFe0a0N0/etQ9cMCEgHFC9CENsAIgu3hxbD4ZoFOsmEvrOAv/sfLsP8poCy2ttHbQAeg2FVJYQAExYN6338AGkb01LDZt8oKA/lu34kwF+8ccc3ICNNv5Epf0AdjN7u1sl7MO+BeAYbKHaRyen4Y52MzQVWYmTmQ3vpnDkez5Yg7SK/ZXk9jGNu3UV1jHXC1jxw784LMovcG3Bnwf/h3rHcXFlsaNU97V9dALAti5k0cxy+yKzf4V+4sF4sCZhR+dqOR7xP9s398ki3K8vj6P/QmHRf2W/f1M109K4POIpxDeATtcdedO+tmzO365ft+Vfcdrjh8PHdcdW41o/xQWn8se8/2VzJRXe3fz3f4t/31nVW5t7WYNOh854qMb+utttdQOu8NDjhEAzTCKTAbU1BA/NmywtuAfK+37K6l0jnPNNPfQk056NdVibfnI8aV/t1r3P3J6uqjfaoDCWPV0/6ngW/jHLSwcptwpue0qoHx/OQFnOdtJp2RbnaeOuhpqeAIOEYkRGDZ6z4xl+Q6GPsZkgMnOOWRSvXDIphks+8szMF+hr+oheRmDM3/cB/v70IDfAUNPTSpYAoDnOkgAorn/upuP6MYawCOc95Zk/0b/L4EIPfFgHvt3dpZT7uV+8YEkN5E18w7eM9L1k5OlP/ZrS//vjoqKmrIDDcXP1pC1SmddhP1d3Jn8mfGS8f6S/l9X8sef3/Kz5eV527eW7K2sLDHNayMrBDsQZDv8xdGLX2qANaeoyCU+JCVZW/CPZaJ1wUdvprQEUo6/xsc0SiYfGdjP/j3sETmKuONJ/1rfX/EfEXDLyx2rATk5bW2D/lPBp/CJJpnXk6Y+nRrdPdqzuUfccZ3rYcLP8Zx9GGG5TyEPz5v7yFQvJ8fOASPHyxOoMWibRZbdn0zyMp4TrPTB/r41IPupSgWPRU8FP+7+W9FYI7yF8C6/B2NdLIpkaCQa/tGyBj489lcdpZHmsX8uSyQbEz4E1DAJDVjMzl7u77/8K/8nP/9sbe2OsbEcBV4vv2zpa4WxyW4Woo/M0czNPZu/0/7vfzG7qrSgYItchm3bTAqooYHSUlYCG9loNcBaa0dr5KviQqH4Dr4R1VtKCo6Dq//oH7IYm6zwhSxyYGSCiX7673HvBjfEj4DI8ShHrYMcT/pX9Gfcf7dCWx6F++UQkGRg9tKg/1TwW/jBFVlkZ5o+Pj32v8b6d/dn7c7amrRVYzIa/FHnOcIR23/8o3yIP/Kz/JHfjoVlf20rsM/5W7LFsr8sx9sfU1jmxBedPi1Qo/Y0oLkZr/1ECoCaqHX/Tfo3Pd1Qv/3BGqF/G40XshuzeQOcKLe3cqXmdnR0eLlfwGP/nez02aqSEvuOjO1wwAoAnZ189lnf6aMff+yKtTT8K3vmmWXViYsPnPTeZrcAM+GZ8e7x/u7+v0qHCO5W0ecmulSdDg+7L7xgnyCOv5/luXmHnP+XEG5qGvQSwipv/D1EJiGZtJ9ky8epBezvCYB9UyZQTrnIUe6/BEAOsnyNuNK/bq2NAJyFzdsGBtKAS5fsL/wIwCWWQGolJ89OnD0Lf5yWGnBdw8O9va//yut5bXn57flbDm+pKq6qoWYve2N5wGnMGM/A6ci5vk69a1g+MgKwQUAO3v5lt2oHi6+FBkQKgNeEIlPB9tHPx0f/U1PX9NVaDbDN/7BejHd5YsJjfzUrkb6X+/VB/WsjAPMaMDPjNjc7GzYwOcl5R93SCoD0+8CBlT/twlWM7J2ZYcamAZQHrqAio/vMpe6PGBiQPjm6moICrxm5xAW5lp4A/IAfnDvn2lGgrCx3717igS7Q2qT3afm4YTdR3pWv9lRCiXrVDnbI8dc/de3xpH8JUzlVaWcATC2kpU05Ng8crqgI3b1rf7QCqeCTwNG/T+VP2JPNzXH/PmfPnv+VN3e35RU+yKuZKX711YrMzHT84QqP4mELY2EeggOjdq4vMxPJ2VcMy98l++6jQ0AapND+MDlXsPfRmR/ZdnxNX/naaEDkjK6OjsdTwbPMLv78D6ypAMSrAQ4+4LH/zZsKWD32Fwv4jyWT1uolSeJ7KZi18atXpQFif5l2686uIKoiP0aBgkeRmvSgn/6OL74wQ85lZSYXLHpeof5ykIPeE0GfT34emRAuww+qowlAWhq5xtKQ6d+xcSO/BpKJgIPjLZZSRFE55ZIxWfyzf8veKhP7h6j8VfLsqRbQUqXVgP929+5fnvf5tGMluuURqARcabxu9Oxs//f/ykcfdYbDZGSQm4sCP584tXCAa+z/MmZpHoYwGeA/n625XpeQWUyBYX+1BLH/fXJOWSnFyczkxRc5ciSBb3pwYpv678ZxQie+VLAEAFF/ZCrYc/9VpY+8QWINsSfi0+rNvWhpWfS5zzLKolH/H4WTcGxtBGAhiebnu8eOORKAyUlZ7507VgNsHCD6FRLm64iPppnuoquFlg46uHXL+JxdXVYA4j+zbQKRCeEbD254yYDsg2T4Y+mFMKqZxsk0MJZGcnLs3MhPQXJkd/WWSyykMN75GV6/hcpTlR0YW8Bp3j+noZKcCrFyW9uYj1SwD9Qt+CSxHBigX6KfeuFCODfXlQDI6upiFoBBxn6A8Br8WhhE7P8uOfB7oQUL/gUMAl+Q8wV/BX4DBpw4sfR5nQT0yuiTwLW179tRT5HhD/aP9St7HGvxpIKHOzuxDaKnh8LChe6/hGK9zadfeQ3o7/fYX+SpgVnL/voQbbJYWZS0c9JaVo1o/tgxFcDGAe3t9z/7zAqA2ebkkLCXwdmHUoopzicf742gw8OsKDazOXJ22PXrPVlZTna2GQ560T9LLxCAxnTwLCb8yIKPK4yxMS9yT0/fdGnTJf7XJfgr0d94lo19q/0tZq/iIxUcSyNwa2sddSTZwMDMmTN6eWJeHlYDSkvdJd3mFh7F7Cxzc+wtc/dyEX72ND87Q1L5/W9x9k3K6ikDOrWfn/+56Q19yXkv0vYtyl6lzIEi7HsHEsH7MYQCqaTKD1AsaF8DJaEbYQR/GGXUvlYPML4KabIYHnaI1ACvQQwUJln3X1syM22YYMd/vuIa4LH/vXty+R957tNdXvtJWuOq2bHDCoC2WgT46tVBbyBIr88MhRLn6CSRFCJk3wpn3uY4NcXMjGxln0yqoMJqwHwyYMpmg7M2cIAno4HFsCstgv3T1uuAcET6t6L6Nx6vhE/haPS26UI3vA2VD7j6q+/4TAXHUM6GBgmAtZ6WlvPnDfvn5cmcZY+lVVYqp+/W1wODsssMNf3FHX90RzY/nkO6Pe0XMPiAgZ8lZ7I9548fzsZSFZnGbHyzHpFFlswmflRTffT10CO/Xp1lSfbXX+rv1doB+/yz3KA4nwf1mlPb/qS2lAWj/zYIXp8asPh8vr8JjbADn7h0ybK/PkibPfbXwyYxeA9JrCGsKtbVWQHQVhqg12d6CeHnn1+5E/mIVSeZnGJqllk7IdB7rH4FR4GEfezzgoAzs2e+TAYkZR3fmJ2UtDW2FMcfN2Zwfr0mBT0fnl8RTx4xT4BGd4pcDIqgUvYOxcX/6cGDWFLBPsrppqU5ERpw/XqfBMDash/Q2rbNLSmx76wffNc+BfS7c04eMY978k0MGGhm8Jr215U0lZhHgHgVcrHsb7brFKqPQgqLKMokU5zeQYc49za3a6ld8hVb+stOOu0b13UEbWOIACBybUe1o4e2Rd29m9K+fcHzP+sE7tJh1xGE/dC4vFzawuc+3QM11MQWOyatC208ciQyDohMCB88iB/E/3YO+zI40QAgSjb+WEYGq4PIV0Rc7XfOnevLygplp6RkQw5x4OC6fDCks9NL/xYW/tiXT3jyoyU+AuOKa9hJYQ8etPtIBcc+DulpwPe/f+GC6w0E7dq1vAZmW62dAqZt0nRado55BCgDbx0Ya527c3fnuHYSQA6W/Y2tX5RSWkGF+LWJJlH/da7rswj9CZmhbrqbaW6h5Ra3AP29jqDjxD8rWM1APNjd2Xm/M6Nze6e6UuRa8uub/Z0oO2U+IHr02H9gYAc7Gtyoz306+ELSmj8PZhlAyQArALLJTz+NfDBU/XDl4RAJ9f7LXL7JTRtO2teBUli4OnKHeCIyIXz7dkpWVkp2YSgbXoENy3lMo6+v78aNG8PDw+np6dXV1eXl5YnXAN/uv/eiB389R39q7dKltrawj1RwrKiv94KAyfOCHQgy26KiZfd0bwpYNiU5To6IHgMePsR+NTm+IXISgAs/aYMA1i+2YmbJ7WSn2Pw+9y9xSRJpl1ErppgFuMc9zRs/xzl1KzvrTb/VEXSc+CcE6L7Q1dVz/37Pg5zume715/4vl/1907XH/jduqF15T/6kkRb9NOsuAojCbSkpkQnhgcuXI+OAePy+URjDYizy7PaRhjHG1KBF/Re5eJ7zIhn7ICrV1fasK6kBEd5uCSURCeGSCxceZr/8zWzIgiO+b+GDBw/ef//9ixcv9vb2bt68ua6u7vnnn9+xY8eKNFJ3pdO/yckepUfJjrkLEtxmSrBRjNmbNyUiPlLBMY7MRSYDutrarAbIXnuNpKTlOXmieBsE5Ni5vk42Lp4wDAxg2V/asMG1Wm/Zn3TWL/LJ381u3QF1ljOcUU8R+08zrfoSs8uvzyIriSTtUZO2a2tLJM5yVhGDfX3IXvbWUmszyfFrABdm+nt7+76Eide96GA9oA/6wW580bKDkIdFHlFw44aX+6WPhv4Gy/7lpEP/cqg/L/Jj0jqaFJKVFRkHdLS0RMYBMcd2p7DotR9x8OBNBBNFXeWqmixiqcOHjZ+5Zw8FBauaEtrFLu8VER/wwbvvvv0uy8O1a9c+++yzd99999atWyUlJWNjWmEwd9u2bRs2bFh5jY4//bvNuv9ORobvJyTm14nk5k17GCsAK39DRCIRGtDcPOoNBB096l80I8d52GmJfj4CGBhw7H7r+8u8Kv6f8APWO5S76qZbbVUOmrwlyYA+y9NXx7HvzZYAqEPZl+tp9P8LvrjBDeAoRxUoiK10hJWaFZx0mf/TLxhQtRu7V81+HcDSTBec8s/+rzseLf9uFsPAgMf+Ysj6U/WG/ck6wFmM4eAT+z0BsCdLSkQO0L9nXFQUGQe0tNy17C97+eUY1+c5FYX9rQCMM25fdzPGGMXFZjTgyBHT6UUHq4/Ip0IVLLNMyP25d+/elStXXNeVBlRWVnZ3dw8NDUkGVly44hr/keG5/8tZ4q6sDPubvDx1dT+p4NjLtm2bupk1JaIiB4J27PAf0WPdfxsBWHtMGEofewuQg/CqyzpHGmmi8jBh+1nekl1Co4IKxQcZZFgBGGVUHpVuuT5vZrN9sdIJTmi7gQ3xu4ieBnzrSv/rL/ZP1U3zzXU2/nPKY39/zCz29xBNAK5f59Ilw/4dHaUvlx44ldfAhQNcWOaATz3sBxYKwNprQKTKe3GAthcu9NpRIJmmSsaAX9Vx/uuv8l+jv1J582YKSigtNRQgx//AASMAycmrUtRHXd1kkiMTwuo2y3x1eXIoFNLgj3IAjuOkpaWlpKQkRRuzSHwoEDFnJyfHSwAss615QUB/f+ypYH+IDALGmpqsBngy4Ace+yfNpFpPX8z42Fd7yLZfPXXvZiii6HmeTyVVF7+FLXLwdTc0fCrjUaiAGpGxL1ZqoEHKoZ+s7Auib9/u/N4/7fRe/WZUdX0g/G74Xf47Mj846PhayUPtpqvLyAB0vtv5n5EtF2VQv4o5gJ8kOlLs175RW2sjAEDbs7Dpoo0D5J2v6InF/qmpZGSYAaaSEtOMamp09kSVE/t4nI0DJplcboxcUVGxe/duufxdXV3y+pUD2Lp1q/TA/0X7v+I34J3lNgPrsae2aa9q2mZV/BOe46WCdV/27pVCt80fcmREqh3/bbGlihDljRutBugEOulduNBD7nmbDPDVFCzFpwzyDTZKtXRzI5ebzcrScZxULwLwU8UxNKm9slXUgFd5tZBCla6W2g46euiRB6PuOstsEklppKlo+oMKKrazXeOc9dRrPx7iK2J5OZbwf7IAeqGKhLv//nuTDzgyx+85XmXFkRSnF+L9phFiePW1wX+Dby8YBJYbPjtLWRnh8DSchXTY1GLiAPnoHuI6sRUA9Uv7Fhi7KHl0xHu66OPd6ifqP3nkSQPwC1tJB8bHx/Py8gYHBzdt2lRTU3No8cWMGuO7Yu9GGXzbZ/XY9G+drN26OKpd0bhPOJFhv7Iy0unJyVlohzZsJmBFb4uHwkITgKpJSAPgIuRC3gPJwMInkhsXFYDiQRqH2MCGUkojlmRS2VUCRkdzwLD/Rjb6rOJGloM9skSMBanRyv3vpLOX3hFG1HTnmFOhFB9kkSXlU/GrqdZn/Hcq35mA56tANgdbZVmJFQD/vckvFmpAY0LYX0iKfczX8fGqmhT7RUwQl8kdm54GhsDEAZAuC7M1tEInlgD4GOpZuXKGIcRiqKNuD3ummV5ms3GeffZZ8f7o6GhqaqrWM/B70bHfGVsGH9WT3M63LF1PeS6wz7bmLIwId+60LaFt3vaxas1v2zaZndIlnIdcKwNhqkJLnHPPoDEGsW9SIgJlZdafycE+/u+7ik8m3vf3AfkrMvuKw1FGIwUgk8xlTvdd3k3aUSWbFwD7IUFY+d6EI/NxjldZJSTFmPdzoqxZ5muvb1gPHYMuLw7AWGHsJ44Jq386+YyhmI5T8CWWe9Gh1a6ekCXqdl/xo++W0D9/0LtQ4eu2xBSVRejVEFyA3Hnb/ORaHYQhGCQaQiHL/jK/COEboTV7UUT8rcY/QhmQAAFIWG9yfNBpKHEC4KNfOqwJbs4LgLYvQQYB1i06wQpAzwq/Cd0bBYIKEoTbNgLAbF8iOgbnbeYJxbLsn008CLBVNi8Am3mK4bC2SCIKBqLs0MQW+aqrNiV4CVyeFwBtXybAukWbJWr/SST/3cGLLEYS1/cjBoJgH1GwlPsPDmRjLId4EGALVMGs2T71cGRreHLXZSGGhzl16l+fOsUPfkBjIydf4qcxcNjClhd44ZExPpenDgECBAgQIIno+N1YL7sX3vLcs+d4roqqOup4mhEgQIAAAZKe50mYeXaO++/yTzD2PLBzhhkXl6ccAQIECBAg6STR8QZfVQQIECBAgKTGryX7BwgQIECApEIWQxZfbQQIECBAgA18fRAgQIAAAQIBCBAgQIAAjuu6fF0RIECAAEEEECBAgAABAgE4DX8YtoDzqL0J/wfmeBxOAi0Z3lit06bAT8N/hB6w6IP/Dr8R8lboFPHDWV2Liln43/AmOFAMfxA+Wt8FibR9ROAm/At4A0IxVIfjw47An4cPeTJGMU3tG6vTSiC+s0cv62H4u9DG0rgH/wiOQwh+E7yDQQf8Q8zOVPi2dsZ0wcv7rcV34LdBJjjwCvxr6E/EiRfiV+G3RlzIv4GBZV9HGvx/8EtfxwhgH9SxSqiZt0KwyIc675xPJwKUwAEisAP2z9vKo3L+0AeIDS5rCZcAwasg1isKoc7YaiAUIQCRqIPOebtFvAjgJJZkUqBBtnBZ7G6M9UAbK4e0eeqXZQbsHyAQgJV3/2Wr6v7nL4iPIjVggqcJwVtvGxYVgE3zGtCj7QreVEv9+2EbMeBt1hJv8/VEgKRTiyQBuoiCN2EDHhpZPsYYe8CDAQZGGBlnfJrpOebsWijppGeRlU9+CSUppBCJXfPsv4dlYHCQe/fo62N0lKkpu4w6GRnk5FBczPz6Wamwc94WojxCA84yj+lp7t7lwQOGhpicZG6OlBQ2b6aoiIoKc4plYmJi4sqVK52dnYAW9tLqvlrikZhhr03FHx9nZoaNG0lPJztbpfa3eN6CRjELP8+jKIbniIbGlWZ/3cTubgYGzK1Uhc/O4jimzlVLKldBAaWlppgR2A4HrAAsLFU17P+Ennt0wydYqAXuY18VVfjDZ5/R3h55tv2k7OdHDpD6SB2cijqo+x0fqulsZGMaaZlk5pJbRJG2+ISPs8f2cvbDRNZRY5Sz3INPHo2x34AO+HTBzhiqy/vlApxqXDQDMMqjeBnyHm2qp3ycdeF5G72f+k8CjBGBVyA38nD+L4U0+AmWi8ZoAuBDA96MbyXPDjpuc1vb+9zvo2+YYQnAFFMurhWATWzKJruAgi1sUT/czvY8e5cyoQ5rfiGaaGri5k3TR0UcIyN4ApCZSV6eYX+7BPy2bZ77nxc99uict3tgjnzjBq2t3L8vShJ5GwGwa36XlFBdze7d1NezHHz00UenT5++desW6Iq2aY3fV199NVlXu1zcvs21a9y5Q1cX/f08fIgnALbU9vK2b/fJG1E0oPhJd/+tFaV+1YkKZSXNarkq3BMAK+fS3fJyVZy5oampQM489R+ATYuWav9+0zC6v0d3H3cQcsiROyL/I4Ol9fv6dT75hNOnwWAz7Of1AzKd3UdvXtCnfxPRYJdZ38xm9YUSSsopr6ZaXQN/8H92nzgEh4GlBMDTgAULJnoaELK/XX512V9GgXl3PUtowMsLCuBPebzz+hIAHxrwChYxiGCa/eNVEgAoaKEA4T/DKfjlK1d+mtghum+i6RrXbnGrjbYuunrpHWLoIQ8jBUAdT52wkEK18q1sraFmL3v3s3/Dvg1Y9i/BF+T1nz3LpUtcvWqoUDQtPz0cRhBNSwDkMJaViQTFLOn792sl9Zq0tBqiIt3TgIGBznPnXHtkEZNOZEnWdc2Rc3ONH7pzp9k/PMxzz+H4IUDp1E25/9KATz/91HXdI0eOpKWlVVZW7hZTLwuffsr581jl6+igt5exMSsAxlNWqcWSujx9NTjI4cPL5A1PA4qiLoDqrqjjL8a/fNnomYrT1kZnpxEAVWykAOhuqtqlu5WV7NhhpKKuTh88378yWqnS0owG9PTQ/V16vqeKOsIRudgi2ROcWDKwVBOQffyxaVy8YKjfHK2iwndVWozAdwkBTxIALzKWY1RJ5Q527GJXHXX6J9Hh/+z+cUi2vLN0wAVoXLDzIjTGdsGGhWMos8e7Ly/nV95ZLfv7/6kPDXgZYrwUUuHkquUA5EyJd/LzXRi31/IpXGmEv0BMuMGNc5xTf2mmWZ/vcMfFBeOPlmSaLrxhg7rz3OTkxMjIxI3hXv2NWrx8HIULnXT2VvYeqTuSU5fDPvxAPVLutOman3/OlSviffXqPLbJjXJwJsOTg+HBzj6J0TV5cfIra/r6tKR6zTPP5GRlER07oPP+/c4zZzrPnr1y/ryOnE+fOCevxjCJAoCRkXBn5/1b5+4byRkYMLSrL0SyPjA0NNTT09Pa2qqBIEBxwIMHDxQEsCycOcOHHxoNuHhR5ZKOKsYRcYhBwrPhgZGBeyP3RsSPMgnD5KRRhYYGVhDuijr+ukG6gypLc7PulDTVjtLkkptOUTLJc+5cOBweDY8O9KnJ3CAnx7j/7e1qAPUDAw1Hj1oBeBKqqmwcIJMzf5nLYn9r8j+IDsv+0ibD/rt26SDGDhwgJjxDCA4RBdNMjzE2wMBFLsrkG+1kp7yoBzw4xKE97CE+nCAEB7EIECSBjV+cnu7Kc7T4xBu1Owk1LBMi/dOcPsvZ85y/whUwbmh1tXGU9UHemyJmx5EAIOobHjbU1NlJa+v4lcEr7bT3JPUM7Rsarxs/UXeiKKWIJaEDXbggEpQGyBEupliO0ja2iQ0lKg7OBBN99N3l7k1uXuu4ltE9WDOSWTO1s2YOnoEcoqOjLuVM5+SZzq4znZfPydeUSm7dKrlUbRkBEF23tYkXxMMDYXGxPG59J4koLGQJqBJSNeKfm5vbpkMYaczLyMgIhUL4x9WrGpMWi6ngqcPhgzwjJ7GCCtGlBGCSSZW6lVZxXHNHs6nrpCSys20iZB2yv+6dkXDdx3PnTNFAZREpl1KaR56GCo0AMBcmPMyw+Fs39NbgrTH9fWdnaV9fw+how9TUgRMnjMg9GZ4A9PSEb96M1IBUUqPVtGV/bXWrLPXLvHP5xz/Bw1Y4zAK4uBKAUUb76e+kU87Tda530KHP2iNh0LcSH2LCP8JDNYEGBALgwfVIYdx3YiiK7y/2/5APz3BGPktKiukme/YYiamoMMSYlRUpAIZD1RM7OuQCq5uJBIaH976XVPcwvy5cVD0Nx6F86aHZ5mZ1Tf1YZKGlKw9zuJZafbYDu+OMq7urIykE0M7BqcGaj2pqZmuyZrOYhWcgn8XQCmfy8s7U1Z3u7Lw8OmoKsm+fGU2RkonqJQCSLvmsKtH0tLhrxFxJTY08cT8CUFFRUVtbK69fvA/oswZ/quSf+sTDh7bUosvk4fHneUmDGOIFKV8BBeJKyZ4cRnGHTSE29zWb2Ki8HOlY/AKwssM+IHdeKmrDOLWGTDIbaJCru4Md8n9VIt1KFcrFlbANMthFl1pXCy3yNm533G4YmW0IZzTMFubPbOQZSOFJSEmxGiAB0LZtpM3TgKMcZQH6+w31W/Z3XSz16wj6RdzjsVWLaoBETgLQQ494X15LFVUXuKBbqZ1TTDk4IUIS+xjP/lXTAJc4EQiAG/fK7d64v0Z+5Ptb9hczyiE7dIj6ehGcfGc5zosOhhg/uqXFKERZmXFS6+o+27dvCqZB2xNQzRPQ3m6GOES+IAY8znFpwGOrV4pKdrNbHUnxgcRAnWfnmZ3MgbVnoJBHcRPOYOx0Xd0XAwPY/PHBg6Sl4UF0KqqfnDQCJvUa6Ow0nCLC8IGsrKzjx4+npKTs0ngCKnjZgQMH8vPz8QkNOok0pT8PHhw4ceToTx194adeOL7juKjBo2SpnUjNxdV90e0Yk8aqru7dIxwmFFqp7uYQN/r7JWNK4UgDVJWie4mZRufrqded0l3bwAYehTRAA1vVVG9hyxd80TDccODDAxJ1ZmAWTkA60WDv3HwyoFtjaIpTvSCgggoegaV+mWoauQB28EdteoW4qoToGGBAXovKmE32x3wsJ0Y9S2GKzQ8rxo377KU83XBjcFMDJPlh/xg0oIkm9RSN/IhuRJTPPMPzz3P8uOHN6M83GsZXh6quFglqa/0z8eOleQHQVlYT9ckf9eGuLnXmMsrk/4rrDfsvgKhfpr40wog6uboQn8LsvD0LxczjmqV+zLbFcXjxRaamzIUthIjUDm3l5DBw9yHj4yau8QcFAaWlpcoEgI5QkJSUxGJ4CUZgeH4bBgOJzd27koHMUGZNeU1ded3h8sOW/SNvl8pbQ41IRJVzffa6odrBQYaHJVzrhf3t4I9Y9sIF6ZN8f7G/JFxbjXdvZCOLIYccfVtOeRFFknZJXcPDBj7ACoDZPrPExCxPAGQPW1psEKAWoq1CDebxxRd4o/9qQd7gT2I8VUVvz/CMtrqzs8w+5OE97ikakEbqOl/hlZU8e/xMunGjMTVja/oM9nOkrZbX7y6zUQYC4LKSuMtdEY1Ccjvu39DA0aNGA559Fj/YvNn88d69aiGeWnyxtACMjRkNEKNBFlnqKk92i0QWROJzmLPm5dibItj/duSwQTRs2IDjGLP/MeYT32PjWxtL/n0Jws9AI/wkC/GtRwVgRDY+PtzTM9LdPez25VVu31KxpaqialPq4hqrChFdGsETJiclZbJ1NM9LEYniGBGtRqhA5KoRPIVxZjRmKYj9v8E3pOi2dIThw3kB0PbHiQpLTPX1XjLg9uBtbyBI0uLNQ7DsLzO32Rv8yc9P5DiFwiCx/yijffR9l++qi0nOlR3ZwQ65MutolCQt7TGzyS5jkTvjQ/wDFgGS/LcJ//Wq+FTjlS202Ai7rs70lMOHn3D/fgFOYWwmYmBk4VCMjQN+Z9QMsDVwcKyxLJy3QYAnAB/Os387/jAwYARISmRELCMjSrDzWdRdWRD2zn6ECBzxBOAxDRgZGdb/a4eGS5iby922I3dLZV40bvZcL+ujichk8fa7/n6nt9dIr33eVKUuLIyBFu1Ylsn/tLTguqIz+xCwpWCfMOzvYQY+8CcAQmkpXjLgvfciB4JKKY188kffc9BQv7HduxM/Sq1qkVLZWTW3uHWDG9qqx/kRADdmVX8WTsJ/jUsA7AerAVYMVpf9Aw3wUVtJ7krXvtwTRQBttLXSap8qqqkxud9QKP6O0AZTRENyMtZgmOF++u9z33Pz/eISzDGPD+AMdPqfgyXuam/HDBAfKKe4WDzo8znfIfg+kXgeWCgAhRjzMA4jjA2/NjYyMibhkQBUVOSWluZg8TcfP9VDHk4wMckkQmam0af09Lie07961RFr68PICNPTRlykfKLNbdsk+8uTgYcPuXvXVF9rK6ARvJ3slMNr5Sp2nIZZ/MAKgLWRq1cjNeCLpg2W/U1kUl6+cPAnwaihRnlgOf6ifvUydTfpgW7uJjatrtf/i1CML4RCYnm1LjkE2noRgD6o1cnszkTkewMNcBP7LqAHPBDzdtHl4ooNKiqU8hUhxNwgre/RuHTTE6PpfNnZdtaxeogdw62nPoss/OMK4EUA3X6lqQ37CH5zM/aZdCN9VVX+J3oMwg+isL/w91gE6bLiseLiMZAJOZBrtsLNxSdj6+700WcnT8lVV3XFMjRsa+nCdxw7KdpOfJuask+XGopUNrunxwzklZUtQ07u36ezk9lZOfLyZ6uoqqaa+PEpvuA4kU8EtfS3lDglJW5JSU9J8+X9Nv0rXrPUb3NTa/WQShllqp9SSlVRI4yor+m2SrgWVpfL2mHLFtMM8vKorKSoyIu07E51De1cXfYPNMBdi5fByfUWxfTQY2eViWfUEhKB9HQ53WIfaY58ybOcVR5qjDGxntzJcsptLO8f/tlfjuH580YAPvmE9r5NPHfUPvFq6XUB2omCQRghxPIwNm9CrrHFIMdfLu0lLt3ghhxG9j7Pjh3qhDFyxFn45LxmHqRdvFg6c116l7LF8H9/P61X2l2RpSTh4UPpgVhSwuz3+Z++PpGvzVXYHGyCu4ZN7To2IfzDHyoTYC6jqaTpUvGlS8W9vXDMUL8r9lftRYGTkMH3IopUS/nkSwDU3dTpBhjwBGBdZHUOHTLhuJqBjaMsDh60O0UK2rmK7B9ogLtGbwNVixxmeIghQNQgXzM/P1FOiR1vamsTjwxPDv+AH8gzUpgsX1JOkwRAW9kKMsvEBGfPcu6c8f21vTFSzIsHOXaMo0YDSATGYHReAP4F/PNODFzuubgzzIj6Bxm8x70WWi5w4Vz6Ofaf4MgRt77eDGHHgHNwGj76YN/tM2/U91RWmvubkkI4bGjz+nVTIf3yltXP8/JMfasq/GBkhKEhmX2wJ5dcsdsadIr6evdLAQh3d6c2N1/pvVJyu6TlWklzc8mt6uptPgZ/7Cmc1WR/W0VZZMnsgKc63SijLMAo/jHqh/0zl9wROSQrDVg48UI748JF778B/Df0xAnAOOMPeSgDM9aXkWFdwISguhp10cFBpqfFx9MDZgL9da7beNnTgEoqNX66ne0ppBAHdBJNVzp92lCeIoC+gl28etD4OGrix4+TIERGAO4/ARdrEy7vzDI7yaRoVYNyrQWtP1c2VbLtxQ0KTXSFUqnYnsM7Lev8S8Mff+MbfV++d8fEeaEQdg6Ejfa+8x3mmpt1OxTvi1J9pfvGx42p4YAGiTPIkK1Jp7ADQZe7u/9qT89fLLxa8hdLejpKfmdGxuUDB4oPHNikb30kTtxVdnnSSZelkWZ7nGRexgK8hU/0wltLsv+PL8L3v41E4xTCp8Z8IGD/d+CNhArAFFOyaaZtKsja45iN9q/o2Bj53+gQr83MGMYpKKClBb1gp79fzq8sk0wJgMRAAqBguZZa+6IIYsXlyxoFwWrAVN1Bkb6I1ZgYNtHsPwfuc+A+YuFZfkECIPew5yd7/njJz/y85hpUVW2tqdm1b19qrCm4wT/J9RdKX3zx548de66hwYZ3jqe/jiPytPnwCSMI9++bf1dWsiTUaqyBhFmWSiprAbWc9v37L3V3X+rpyfje9y53Xu5r+mH6c0eL9+8p3r/3RFXVepicmkyyNUBxnrVY31PWC6c86o/O/hZrLgBv8QkyHwjY/9vQmNAIYI45F1fmPRdv7ckN8x0I80S8CMVY/DqeCHWKl14yA09lZXY4yNBQZyddXaNDQ4oGZEUUyf1vpbWbbgXOMb9NRQfW4T7/nKmtNXaqm5Gf0lISgctQHyEA7lEWgZM8s7G+OTROxif5P//fPy7cUlheXr4j27wy7TCHJYcsH8dzOFGrV51qVocq+/FhD2X7y80DUEZysXPNhoZ8CYDrMjdntmBbjYPDWiAc5vKdvZfvdF++3eP+i9Pf+M7xX5P8nd+4/3LxgWKZ96q49QM3usp8lyUQCocb//t3//t/58l4lnWDvfdgLzGgJRvOf53YPxUaEz0EZLuubMGj+UuEpu/AJFHwEhZ+BMAbyZU7KvffvvBAAiBXVBpgXzXXPWae9eukc5hhXV0aaTXUsHzI6ZLDOjaGEZvaWk6coKSEBGEL/Bv4hfk+7pzF/Qc8ihBzjeYKHz5kYKCv85/33bx59WJL1m52q/gT7sSLvBhDOuS4tSSx/yJZtpwcOwXCG9XxOx1arcZOTZAM6KZYYw3gTfjaf/v2qzv37Szt2l3a1TX5z85f/lOXi5OL7SRhtZm1XQXT8/ptNOBN71g2fiQEL74Nb4DD04BGYNeyNeAGtADnvzbs70BobXIAdtRH8fskk+Ewk5PGRAqP4BcWf8h4ZgV9j8xM9u0z9uCBqN+anHa7ZIr6dxtt6j/ppBdQUEGF/y4dmdCyNmWfdxb5JQ4FsAVKIAuGMXD+GO5dIlevEJdiJaq3l7t3uXqVz/OHT5/+ZIyxjc7GLLI8AfDPUn8b/jSkRp9Ua83qv67AmP/aDIUkGGHCajUyVhjOkkVtb7eve3O0VTOu3Vdb1VVV1rXP7epyytrM5ADXCMAxjvk/z2poQOS4v5quupuMGHDStqWXIuO4dS8Ay9SAG8YEtdwg67vqApBBhjV14NFRZCMjFBYuETeo9/+4HWZ0oRVOyTqVyH076hgo0/hDcbGxhgbDgurfN25QXi550OD9Pe5d5aodDlpsyliKTwFAAiBTH0woSqwGWAGwqFj4KWKhhJISQ83DwzQ1N+WRJ9nbyU4V3xc3RiCLlYd9YEBb0ZpajWyEEd25RK5PPDnpuf8mbDrqmvm++/btK+2alPegGjQPhjpqTMaqqFrD1fCHGLIP/9j5zzL1uDj4NB9eejqelqyO/OQPN75uz/w4aykA2WTbx/j66BscpL/fEO/27U96JreGmh/jx6aZjihJJ5wCGqOsWPcMfAhzy0zu2eUIjKvuugwN0dRk50b10rt45/AhAN80ApBiBCDRsOyv7XU/PCP2V4air4+bN2luxi7PqbDICoDFWg5rZGXJdGt0iQMM9NOvmyJ9In5ULSOrb+3OHSqprKfeWG09nRM2ghxvarKTA+w0hRChtaq0HnpUP6olQFqu7iYjBmz2LitzfT8xH389OgH7J0IA8sm3E3lucMOb3Tk9TXJyVA2opVZdfdadBYt7kWnik4u54idgBj5m+VBPOXIEXdm1axIAuVFyNhVQxyYAP5oCsnSsAKxRBJAO4376R34+RUXk5RmPsXfE0IccSSzWXAN0WZLnwkIJlCRZdKv4bJLJeJ8FKoJj+IFdz8eamN2yv2wTm9i3zyaQtL3Tf8dqgATgCEdYC6h+rHgPMgjoSuy8MOLG060B65/9Xdda5IsjEzrykwAB2MKWUkrLKVdMOjY+Zl/ucusWu3YtuHsRg44bXJs69tscn4FZjH0SG9fYZGVy8ty0GaWOkm/8Jk/EcyH4fwKwJv2gZGpqS2trSXv77YkJtmzh8OEl+od0yr6Ja2RkMkxYtvID6rFBXnVJCaWl0tXwVLiNNvtKwTrqiBmb4Rgc9TWhz77tRzY+zlHM4I9dVMfGjlYDjL3/vicA2lZQkXjVbKFFAZx915Z9rFndbTObE8CnT6cGOKwTqMPJ7LPOKdZWlv2dtReAJJKqqLIzreROacDh+nW2bjVdW5Tr3T2fIjYFISBKBGDt8zik2N6FZJKJASkQkq2RAPTJaS35vLWktVUacHt0VP6qhtDt9F4n2sCn5M6ag2ONdQKJUkUFlZWmrbS03OLWda5XU11GWQ45xIBkOGaNJeGt8+UN/lhjHlYArD28ccNbM0Cm9pNIsrVrn13jmiJsQKGzVMp7MjXQgPXL/mNjcrtQR52edhzvnXgJ8P0TKwCCqL+GGjkp8uO6u4euXDEdJTtbD8pbxfN7967DNTywCRqwINsGAfMacBED+xIICgt58mwd+8oB3YyZmSyyMsmUEQP2G+NvkGi0GqONLa1b5lq3XGjd8lFbaHY2LNd+505qa+3Ei532Eh+ba9Xba5eBQfGZWmA66awfVFfbl3koYOyb7WuiSSQr9n+e5/0MBPXTr5S+4kh57iqapX6OLi0Ara3e254XDP54cJxIDbg9dttLBhzmcMLIVn3KrrCts0vHxf672V1LrZRyxfnUBeep1wCH9YPOTrq76euzg7G5uYYSHWcF2d9ZLwKgTruHPTa/+h7vXbhAVpao3ziehw6p5N7lRi3NHbgG1+GPY0EFNBjzQN58HDBrjCti/+9/nxs32LaNhgYOHoy6TndLi6RC3diOn9qXasU0D2Cmvb19YmIiMzOzsrKSBOCKx/5mm9KaUt5aXjlWeYkqOYYqukom7RN7zePSYwua377N3btyQaiiWKW2mcP1gpISM1Bo5+5dvHiRi9lki/pd3EMcyiPvyWsQfc7nIkf54+OMP3/o+dCxkB/2n5gQ70cZ/Fm4ZoCnAWfORGaDFaastgY85KG8fumUyvgJn6hzqd0e5KCEai97iRMLeuS6hP9rdlhvUNtS51SAqe4HW7ao6chTTQj7J14ABLXLHnrkaavhfjb32enTYn9VgjxQ9XGRlGRgkcHkcNgubsiNeQGwOAAN8xaJIm8sSGhuviov7ld/1fRf+2rJ3bt1pse7+xdfmBc4NDXpfsgLVuxcSeVyOzDoDP1nzpy5fv366OhoXl7e3r17n3322VAoxKribY/9zVbQ9cv7U8glAVDJxFE5OSQlLfI2CsVhZ8+K5kzyW9CvVHDfk4ETFWvX1YleTSsZHlY7OM1pF1eE3kef/Nwqqh6TAX1rV/mX73+BC9IABXPJe5KTjiW9cOyFDcc2kOZz2pfigCiDP7DoQNBoW1tkMmC587AG/e3zFoWXwikj0kyziqk4wFstWRqwYjdxQY90wXn6RoQc1haTk6YBp6YaP99xTNz94IGhnXPnaG5Wy0lONrFuZSXl5cSCe95//XW9soiPCRMAReJqnRNMzDCzkY2fT37+3nszAwPcu4eyAhUVFBWZCCg9XWwlbRD1O6Oj9PS4nZ3GBTSZgx7uQi40RNgOHkepHQtqbp5tapprarqufizq15lU6XJ3y8p0G8zNcF3pj9l565a6u7hQ/6znmV3s2sGOGEZC5KF++OGHn376aV9fn96vMDQ0lJGRcfTo0UQIwAAexD52tE0E0dTf9OmnJuwZGzM+dEmJqV7XNf/s7JTeoVBMfzA4iHxGhWj6YTnlsJ5Gj9UmFCSqKagXue5Ua+v7vD/AwD3u3eCGdFrEJ4oX284xN8WUyLGXXpVd317hijIHodra5OP3ko51JR+9/2xu6ZKDP9b3jzL4swChUKQG3Jy66QmAiJjlIBf+DZF4AKcWvuNhmmm7AGQnndI55UX0T4m3TneMY9IAXe2qOteu+zRqwNphZoYf/AAF4xrgz8lRbxS1iZGMV2tpB7UwOcEarZUTHPvb8G7K/LD/tkdY/48kTADsQNCzPCslSCMtm+wmmi5fvqcuJ/UrLTXhT1YWaWlWACST6vWqKOf+fdrb70gnHM6bVd0p89z/aNVV0c+J5s2zzVs2NO9OY+zS6CX3gw90FJ1JsZa5DVYA5P7buWDygUdG1IU0enuAAzFE0PL6Ozo6rl279vHHH4OilrsKAvbs2bPqAnCehVAtiY366Zfc3mq9pVJK5kT3BQWmeq3wdXerBcr/MBUgV1rc0UDDPvatL/ffYts202dcl5QUNm8WN4vZW2lVrLOFLXnkKW7zBGCMMRVc5CgJnNK+/YfChw+fOXYs6fjx5NLSJDj2xKDcc/9VaQsGf6Jg61ZPA+TTRWaDl+uJ/y54BYv70V7cKQFQGSWB97kfJiz9s2M+dsFkbRPAqq7Lc0RFgHrohh6YA3Uw09N+4RfkfKn1SgAMtQ0MyCPTfhviHjnCgQPs3UuMOLUc9pexRgJg5wS8zMtZZBVSKGezhZY7I3cuXepQl7Prd4mhVEWua99YoIoyYrCJut1UbuMnRFViN7X4/RTzBDRR3VS9oWlD2qBRGnVIOUp32u7Q1mZOIKcyFDLnmJw0J5ieLqJoNwfFgHbB8RieNJ/9EtPT0xigNICGoLRnbm5uw4YNJBYiBXHBJJPS2s1svvbg2g8eTFy5Iv/CEz4bFBlJPsEucZxKLQ3QTWF9QmN3ipMzMkz0VlYmNRttbb0yqzJdCRGSe+4JwEMezjJLUpIR+9pa9Sr1rbEjR85UVCRDEiQT1TP3nvtsa/Mx+BNlIGikq8sOBFlTsMty8EOEsP1vNKSQoh4kr1/6V0WVAlaFrRJvfSZR+Aj+GYsjwE9Dj9UAWTjcHQ4PhsMY1xD7bivvOeeaGuNiyEuUZWURGyY/mfyE/4rsyQjBNpZE0mqHW/LXXuAF23ZrqGmjrZPOHnoGRwdHBcLqwA6OunQW6eVslounjiS1kMdnV4VdgqduQ7OxquYqT2nUSXQiOU0DEwMPJx5OM6ZTiOizqNHB1dt1JepCCgJiSv9KU7KLioqqq6vl9ff29ioDXFVVpT3+2L8i6mGNxQKVV+wvZlTp9Pkud/t6+oZ7xvqYBlTwYjbXU1RBhb6V/yjxe+LgT3L0L/x+k0x82LHDrltJVZX6jYIs7t+XiIVHR8MmPpgzXSs1m4wy+2dUVuondvkBeRZDcMYKgNl6pP6TkevP2+c+Cy6ZvdIV6aId/PH7mikJgER1drYFimktxoQCC11yHTw6Usz34SUeqk4jTbquhmqnHUgJ1Hp9phx+cqmT+8Ib8A4JgI8Ljv0YL63Sia0AeBowOSnr3TI59IIJMaen5REaLzQnh9JSBbcmOdfQIDGI4VLsdawwkuKcz+OfoZSotEPV4uVeeocYGmMsHCEAtqHLS5WHXkqpBEMfeDLC0GSMZnDRb1/kRSmHfc9BN92DDI4zPs20TqFOruNbhVCYv5vd8WUr6zTuLyWwSeD6+vq9foO6kyyGHPtFrFCJxBGqNI0U2xEhece24HIhLYOUUWYXQlBVxHCFaXDS308y4OSKzA1+8UW2bxdbm9xRdzeDg4yN2QEiEzmGQnak1SSUysrUvSJXH+2FM48LQKO3/ryoP+MSb16GSWzKSq6G/8UhpEm6GAUo1r+7DMVQQrNNCfibTZ7sfcl/X/zvbL+QfmeSmUuuuoMcKZaDRh8n94X/xh+AB98mBiT2gv/bon/34mqe2Hb7KasBU1M9h6b6qqZGRowAzMzgOEYAsrIM6VdWmoazlJfY6P864kdSTNM6HZYPB0caIJtgoo++YYbFUJ4AJJNsG7pIvIACfKJ53u7ioZJK2QgjVmZ0Ok8AdHzrSRE35PKnp6fX1taOj49v3rx5+/btehg05kaevRJ3N4ssBZeKbB7wwD5/ZV8XLAFQwfPIEzc5OLFdYVr0K3wbvhnxZcbKtlQxu2xykp4ehoYMeU9NiXaNAKSkGAHIzqagYNE38d2fjwN+z6MqlXSZH78MsjYsrEyyLBw7Znw51wWG4DKUQLEx18FZQktJ8SmREgA7rBQbTvo/uQ8UhyGEHyTggv0f4KWEnDgFymT7ptg3NTFhBGBiQgJg6D4UUlCKX3rgpP/riB9Jyx/XcYgP8vTlg8uIE90RArAA9hWJrCYKvwTLxhEfu+Kq3rhXLPkmj2Kjdvn7SYo+rd48YdkycRfO4CGEcJvQJZBdJk5ETuS/7gkA7MdDNMIMLVJ/LiuOkP+9sWNdXXAoyq6E1dSULC1Nhn/4KkICBMCHBjisHzTPj/+MEA0BAtwhAg/h8rxNsrKwA0GexZ5WC/AUY8oaTwmSWICwE37oPmQR5LF+cGPe979KgAB+cWne2llxDDyqAQQa8HXE9NMtABo+/piP+53+9d4Qm+YtQAD/eMYYf5UY4LJyyITfaiwGrMPTu+v8gr9hjP+QmLO+Zox/t77umH8BaKX1Ez65xCUceMg83k3szfeBN419dfC6Mf49FuuutjfCr5P5y4X9Rtk6LUckAgQIkMTzRMK+HP8aM/eBH8WC55/nq4YAAQIECATgJAuww9hXHAECBAgQCEBjwP5fTwQIECAQgEIeRSFfAwQIECBAgA18fRAgQIAAAQIBCBAgQIAAjuu6fE0QIECAAAGCCCBAgAABAmxwwL+9CP8Cenkczhrb47gOfwdOrNyRnZWwZ+DvQktMa8CdhN8G3yGR8FHyDfC6KRUXWZ9wlml74C/DVVYUw/Dv4UfAgZ3w5+AyfjAL/xveBAeK4Q/CR8SJhHVFZ40sOn4Rvg2pkAW/A74Hq3oTnAUWRAAJQ5UxKiGN9YJ0qJq3SHTzNOPgvB1gfcJleUgyxsaoHTpAAB9wWEsEApAKlZZt15Mm2UsK8Qh+BT6DMZ5CVEcIwFcFSdae6p4dIECQA6iytv6CEhYIgOxX4QtixzRcIrHIiWD/bNYz3PgFIAgFnnYE7n/sawLfvUtnJwMDTE7OL3D8IhRg0UjsePCAnh4GBzFrA4fNwe06fxkZ5ORQWEhx8XIHyz0UQyXfqWS0BO4nJVFezqFDJB7nztHRsWVmxggAWUW8jodGhFR4B9qhzWzZEykS34fXTj1arkz4BkLjp3AMA27BF3AV9rM0bt682dnZqcUstaJ9SkqKlrQsLS3Vcmb4QB99t7k9zTR47J/O1gYi8CyxYGBg4MGDB9pqfc3JyUmtsO84ji5Pa65lZWXl5+eXlJSkpqYSK9xovfLhQ9ra6O5mZITpaTW/jZmZSYWFSWVl5OX56OXuo60vGoYXDDnvhPqIhhDlALPw8zyKYniOaGhkRTDOeAcdPfQMMxwmPMdcCikZZOSRV0ppAQWsHFTrugNigqEhwwGCt4JuZSWx4tSiKYBJIpFFRGdsXKk74BA/1P7b29vVI9RP1R1c11Vf0LKDBQUF5eXl+pAoAdA9uXCBq1dpb6evj/FxXBdeiLfNSUhu3aK1lXv3zJ2XtEgAtNMKgPq5BCA31y70SlUVO3aoUcRw36vMj9+u4vz9lBTsgr0J1oDPPuOHP6S5uWp6upJDlXxzYdX9GFTCF/Ar0D6vAbshv8Xs5bVGODlftEz7G97CfEflfUos9dvtn+EJkNT2nD9//urVq2pbotqpqSm1Kq1mrBXtd+/effDgQTWvJ7UFht7n/c/5fJLJL6k/jYOv0mAJ//+n7jzAokizd38KUERUGhHMNJKlQR1QEAzj5GfdnHdvjk+8Oeecc8453/vf8E8zOzlgwKwgTZLUKCCSJEuy7s86Q03ZQFNd3Yzs2e9hR+jqrq4633ve857zfeU9AHR2dnZ0dPT09PT39w8NDY2Pj4cFAEIUj10jSvEMTgIVwUDiZc3N0tCAK0pfn4yN8aRJ3C9px46kvWVJB78vB0SHpLndv19vlYsYUGAFAIkUAFZGoD0R5hteEbuxEWSDNLRKa7d0szO8PlHVFFOfKgr081Q2nupaKqW7JA43orVVgkHp6IBhwgPBAA0Awk0G/QsLecI/JDA+AQCDac3a6O+8kvxjo9wBvLK5paWFedHX18c8nZmZefr0aXJyMkxoz549zNbCwkIeSM7UWOcAACeqrZXLl3l+NpPkwMCsb8onZobEaC0t3HPuPFOf3EL6+3cNDe3YOr5ly5OEhKeLiwmzsymTMztGMjIWuPPQdp70zXOUAwE5fNhDAGD4+QI7fmNmcZF/8T4aS74EI17i2nx46i9+kTPxdT0ZWWZfEcm2RpCxFAO6nzwJBIOBxgDPSV76VtvkV37guDnBYDC7qVoDAEKeVEkkA1tra2svX758584dkgC8B0KNb4G2oCo5weTk5Llz5yLA6025eUNufCQf9R0akYo3pOK0VKyg/f9TcWnQ7oGGhgYCEufT3d2Nuw8ODo6NjXFWdgBITU1NT0/fvXs3xCc3N7eoqCgQCBw7diyJlC7GJACvvnRJrl+H3+CHwE/ynJFIAEivStx/LOlAEtAvB4Wf8jvFfSoABBhrxIACRjSwZSPQbuLLum6uDd+/Ile40UEJkur1Su+IjCxsXkhgZj55mkb+Krt52mixFPdJX6VUEgkkBuPaX73KfQASuAMyPMzDuzeJyNbN83A/5j2TdXBQamokNzcuAcCOATu4kvG8A/ZNMGIl/nV1dbC0u3fvMinu37/PtJ2amiIDYLYyEfbt28csgK6RHFRVVREP1jMAcGe4P599tvVKQ7VUl0gJMZ/nU/NgcbiAeDDSbe45b3v3LmFud+e9nJyh/YWSeYpH5gPLPD1ZiHVPnkxNTEwND/c/fNjY82lGV1M+MEqugC9IZaVEowOAnn7xP0Pe8f3N5Jk6CCRfjunHhUL+iYN6GjyVfsXHwZ+CzC8NAP1TYkBjYyj4i1AwFDACRaap4o96GYGs6a4RDL7Z9DA7mOEfLCwkXQgwJIKRyN26cuXKZ599hj+dPXsWHkEM4HH2ZAP8CdgFcEkt33zzzRXVzFtyC1x4NnwdEH+gn0GiHgP1a71+/frt27fxdf6bDEBEoDl4OXx/06ZNeMLs7CyKUIdlTICCggL+48GDB8QJvH8nOaLnGMDH4YoXLsjFi5BP+GyOnPCJL3ExMXEocfPQ5qT6JGa7HAgLAK5SAXP9deD1QH+YPk+CuiAXrspVHgeSsDMBZlCxt2Lbtm0EAIgCYNTV1fWb3b8ZkhCBAWkINPD89GkwgPjLHQBjeoeShVl59IBY4sbU48edXV2dHzSTmIEZhoEigB7s8rEp62/e0D9N1jKc8eKFCxeYp0xJIJ6s9/DhwxB/rj/TFsIEeyM/YAogDZHBv/zyy0yWdQkAoC1zlLvEPDkhp8/JuSqpOiAHuOV7ZA/AKlEa8Z1kAkkETdxXX1+a11/8dYI8FJ9bC5IQAMi/QTcepQ+9hbGSG6ASDbe1DTd+GLqPUkSKCKc+fVpwB9cG7Opo7r6tcPwlBwBGjlRYiUgkRVOhxq9jcBB6/04wSABgsvEWX8B7p7wThLOSRDU2JWcX+/1fyc4ObNnCn/Miyiz4TX19PV711ltv4Tfw6O3btwOvfBDY+v777+NbBw4cYM5DMZY/Iwjo1yHgvg5e5tGQxBrxdRz9xo0bnICQAGVnHzp0CIKDJAXiEABgPYAOihDKFVQI6CdUEK6YBiqMnj59Gs3KcxqK+IMrgv5n5MxJOQmrhd8kSVKCJODhsF0ZEGHcjK725wwDxi8P+mOAPvreJblEGMANKisrcRJVnAEg0jKcp62tDWyCpRItgIIdsoOcYKtErUUgLdfXC5efGDDwJE1ePy0vvYRHKaVg8nODkIGCFy5ACgkKe/fKq6+uhvgcwvDpzw3aZZAqsLzIBh9iRmgMIBMlHQf9mRdQIv7JVCVF5vrDmbj++D+MLSUlBcZGohz/AIA0z9wAvHYtphdK4TE59oq8wvQQbwZ2K9uqq8t/dK3i7ALSXkmJoO2DzWhZy66ksbAA6Yf6kyrIvn0Pr1//qAEywG/xCHzBtQLAZFbw3fvwTj9wCiITWHCo9TbYi/Vx+wYSNQIxVWQtK1Y5qDuYbQaDBxuDp0c0BgSMHsM4b9QZ7e/A/Y2mpoL0YMlbhVkB/0wguzVQcTTy5YAywN1IKiHRpaWlJ0+eREsRy+AXo6Oj+ld+ArUEgDBZwEb/0fJDXwQAr8YHoUTh5ZcuXQLQOYGXXnqJrBbQAW7AdCKTHQDAenCHl5ElEACQjEhiSFwWFxeZFa+++irRIuokAHzp7sa3GIgYfBn4DYKGd1E7ciqw4aFfy/vN0oz6j8pHvb2mpgaWQFmIm4IKJyJccHyD688/4Z7IFOmSTkE4T/IAB4m68IMbCKGf6ru8dlzOnJFTp4Qqnc+n4iAlYOY4pcG7d+5kZwveWlYmVrjfYcO9/kfYPzci+m+x0L9GIhgaLPwMPnSVhEi4HmdOnTrFvNCiF65Ojs4sYAowX5gChAFuBEkwKtBx6prxDwBjY4RpaDu3mYnBnfaO/tTWrlyB/hMAApNXa15ByAFAuKPc4tUuoMmflLpnZxsZGQSJOaP2Yn1dIpkCoCVVVeLaVH5h9NsqEAHgy9J/NPzw0/V6sc4TJxr9/qA1JOjvv3U21P+X+jMzz2292PXhxe2Tt1871oM6GggEA4HsgC/bxzeMjF1oJvBoGER1dTUg6+z5ISTAMpjzgDKvIc1fLv3r6MhZjBn9cahh9XI+DofGfcGaEydOHDlypLiYfMaPry8rRY2TwRCWeDFsFIoEV6IGoA1C4FS08o85NGTQewYPQOSXg0BYmVlmo39cY0A4QBgb9Qm89Pzgr+3SToWfG0GVBVc57MiVuS8U4bngpAKU64nibeNtyMI90uMhAEAvoXfMD2ailnrJ7MU2KgAnT9IbwivkGSlJ7+/3DQ6mZ2auiPvOX255YehvrI6vNToiZ6QtpMLgO0AP9KNwotMyNezpwJVnnhIMIP7IQcxTAobdGUGjRLwDwPw8wM1IkjQaABji1ZCfSfaQ+ooeX0VLIthT1Tl0yKUjg1AmJC8hwZidfTr2/vXuWz40I5ICxKNoVaA73XdmFJePHVvXUrA2FzJSux849R8XtqDF4Kyst/mWfj+jhdH36wPTTxaebBrxf/X/+n/f+UBJIJAbQJET7E9bWcM5Wc2YsXgMKSSUAXKNr4SBLL7F7/krr6EUDL+2Gwxuy+3PA0DavS+kf8R3r4aLozXBH6n6cibKNMEayCY6g6xkgD54hDxFLky2CxUlBSYGaHHYdQ+rFmh/oHfHnJw00BlF0P13mjtJEx3z+KvWy2j1SIlXDFghw91I6I8NyzBNn/3Sj6qgsKLoH2Zcc03UYAyt460DMkDqMC7jaEHisMj5DzIv1x56yZD9VrPf8rmMFoT3M2u/970Jn28qMX16ekX0T97o60sU+k8xInVDoHASU1F4uLDa5oAEt5wMcVPgQ7we8sQkIi0mlYcelZeXxzkAgLg69BHBDPFmPT2ofcSAPW03Kt+Q6moivbb3msvlU9jHpExqmzkhJ1VSt2zeIt+Vvf9LTpwwR0eNhw8n79+9u0hOiEyB07guBX9Ow5/kNGsZYJ1LwfoRDP+sJh9a/nV3O65/Xd75OgvDHlx9cM8M3ssO3ssP9gz2VL5X/WQurfGdb83l7kkOFSQHJDlgZGa+LH/3vNVJVCarGIi5YBn+lGSZPG/oLfp7fRmvF81hjG6b/ps296du49VQoihFwHRQEkQEr8XLiQFucli4D3kxp0eIgv4wW4glIBGVA9cBAAPWfwUhEX5jzs8niLHJ3MSt2SSbvMOy2xgQIRK8eEPTp/ef2bctdZuyBFnFiAGEZFXeOIQDmbZ2AHATBvAvBjdBnY9B9V+WG4rQkyfcqbn09GfDp4i/WTaGmW5Wfp1aGjWRThxtDUBHgBUR/DkvL48kjIYIWckQS9vb20mImUQcwoE0UMQ/AECQGSgv3F0dnptaKflB/I4cmabMw0wPR39DpmRKe86gIRMyYQcAeo12Ze06mHUwtzY39+yWQMDs6jLa2tpbkA8RcJGQ4A5RqkDNodtfRi/QUpjJkeN8NEPcW0Aehx4He56VgIMI/v7g5pJgxZF/Har+Sdr75w//mZ82/u7Gnh4qAyjjhwKWpaSUyuoGs060zI4E8rwp6GMaBpR3QOts9B95yR8m/nirc0Jz8F1oC/o+Hkw1AqbjXsEEmHB0rQnDevgJY+INmQZMm5WE1edOtW8liDZ6DX1huO38IgHYL25tclIXNGk/Ow1rRnq6SbKa4plFRng1H4OQtbR+jc4INHKG12Bl6PB2rOvzNpyYz+dR5yFFJSeT5Qbiv/66ICFbA1DY+EZKhGwialVK/yWtRnZoRi0rc1YkNeRZ6BGzj0wXqYcMLMIs4AW8jESNNJqjOJY6meeW0KQVUzU+h9ybn1PSDy8Alz0S4bY2uokKEjoQrUFsfoah/1252yRNbdKGmDgog+AOVxCXIgBAK3Zn7vZn+r+dlVcsufn5eUxz0LQlFCJoUjchAHgpBWsAoEjL1FwH0+I5Y/+jTW7Lv04BaKsESx8Ge64GQ7Wjhcj87SUl5u7Ar3T+67kn21/5+mxGdnd20PDXhogBmaHp0tCuQCDHKJZVDT0HeQfKhrYDfSaFBH9REp0iO79HJlIhiNc7pf92//wX6G8dZXrCLz4CqoLLgt0iAs1hPcvhKMMwfk/OSwghfpAEKAMiEhAA1uzpvqQxQAyRK87X3BfGMvT/vtj2R9xpfvCc9nayHF0yrySK1cRGdrZZXCxHJX7GB+jqKcoYhAENAExYIIDMOBBAWI92VTSdPCTcrPWdmp7iTiEGyiqGSM1f8RYR4fUcCFWMKoLhe2A7Gg+1PZI5YibTmTJAhG1OGHPisP9o3aAdsqGM7imq6MqVBabE8oUaefmUtraq/bEVr6eW6JiGdMGhagLlSv9XM2QiXkMDKLOJAzmcy+g9AKyYqnHWDOThcWkFlBkeAwB5Db0WRVR64NzPIcYT40md1AExXLUWaenKGRwCkSnwJm27PD//s8eP/8Hwx29l7a7IOpSZmQdi7N2by9/5mtuu9U3SJwD9wTyXgjk33m49uz/5xKjKvx2gv47iYoJcoKenem8T05l2qZu5It9AmuaEzfNaGkj0Nx2a/kUg0JOT0yPCCKzOVdFPcBd8C6YAZYCJ27KJUmllEJg2VtIReNOwAsCOVlv6Z76a4t34CJgO3Q40+CMjoN5Q8oXLSJQG1nMghxMAlP7wtiQxsKdIAcAZA2yrlvsEgLA0Pl0rBe4DAKCv61so5XHbATVIrYZe4XLm5xvd3Y+HMqSa38QuOrQRnN8TNDQ+DNykv479E/juTBw6Z2iXgX/QIkHMwVwrUOzxkCVZ+2Rf/XQ9EjMXlsjKdV7WzzFHFOdWgjs7ZSfMhqSDMBAlIzD37OFkCY0ydGsIfBC+C58FQ1zJ5nTYJ/yWhf7GxtJ/gDI6aGullhUSRPsTFvTT2UScwyIEAPrcaMNjxa/KazT20Am9phzKy3ixdlVwLO8QHwnIJgf4kw74OI2ABACEGjhCVPs94Iv46O4pPIl5yy13UF1jQVedsPLw1q5bQ8hDh6sFsrRzJ/nhr8/OPhqt3TbcmPlgIDNzICMDVCQG5LJMlb/7UkcnuV58Z9QMXN9DKVg1ekgHczTu5V/rzVO7e9F/XJZ/BwB9xyBfOI+y87inpCQUCISoxdw0ZGmWQfZNf5rfH/DnBJpJEOzFw4zfvzpx1m4BBBN68PEw6AZ8n5+I8vwGMIVZK7bSdWrT/6dL3N8kYMRmeKoyHREhGhFsIDISvZH5cqwuFmM7I6U/vDnhTcLs8nMyBRUtqkHJ8sp01R+ePjXNZjfm5Yq5r3XIw78j8nfkxnFR+2rU7b50OOuaYpbNzDxNFrxs7y4EIJY1dkxOttUOwHGnquWpyMsxathBglgzPXUU1ZhfTE/YIAGAi0sCQlSAb+m8QGFhyrlFMkPohmJJFw3frPlQJ+EKQ9WdERpvofsQ6ZkMDNAB33Ill50holeyuEKkgGZhIeBvjHHmUDFQDxWLc47QZrNR9+Jj/cRluUwAYBwIjCn019S4EuQ038JEhDSdWUlThkS0HZbxSr0p2rsRtxrAbatb4m9zMzQGbN48MTdBAEAFii4AsJQMnv6MWi5yfy30N+1bSLsx0E8MuLi/de7Uq0Jn6JEjoAzXbHTT/ODszwZHBjPOTWZ9V1cATgisVBo5KZqSGeAsi8IYXIyoS8GzVilYB+x6nVb/zrkt/15zQL8pUinCOQUOHAicZ60WqP5z3RsIW/q/QMrj4PG/eZwY4GcnH+vA+ogBAOhHbIHpM2/pv6S/nrYz+j0QhSB0zGpmO3I8QScjJ+MD+UDp//Cxg6Loz8+Ybcwy+I6IUGOEvyjTidZAJaU/vAnozxvqO2sAiGCH5TDlpcfm4+mr09P/r29afuXvyPdJm8/8QW358QIrYC8NbnV1wp4poD/4xYImGtdIVBGACABM0JHe3k9bvv/00g8Sk4Ra81nPG/C2WyGNTwIxAwGcC8YIWyISkA3TV09UgEqjCIH+/InYQBBySWih8/R0UocbM8bqOuvo0+U6E1khBPZCMDIt3IYuXtaC0fqJZ9A+ywI6idqYtegBTJSnrG2qre2Q63+YWQ3UoGXBAiNXWTdWDDCETjnQX8fe4jGFfoZLejNjGTNR8MElk4jG7dCXsYSTA9XiXATOx9+IMBbiTs0Bt89GtIu/ECvhJhl7yVnA8eeajuulHoi5uv36XNUbdIbSG2TSmqmBQ9oeJT8aTBvMOhFW1lrAQ7SCpC2q+LonFYgAcGtdA4CWf13qP+9YCP5QRHFef+I8sp3/DMlfsfXoEoazVpxZSg+Q+HWs9RAryqeQBeQXujA//vhj6APeQyTAddDiWXLC6jBew01R9L+XPSsVZwX0p0hLDhKz8UEIx0pVtCahFMaDcSCH8yYEAN4TczMBAmaAln94zIx0Tsv/mxZoPy20nc9igPclzfS4ccmW0P/cORrYkTLIuZg7NLuQ4dO6MHbw4K/UvfMrn17/K7GUgq8wpkiphe06mCzwZ+YGkwG9iVQb+s8nfvwxpJrfA6OEfUiVuDYAnWofp0LzRfNo83sn3qPEgiptbwXB1UYwHPrNoZo9NUeMI2wNcEJOeG4QTz3SWtrfMjTUPjrKGu82vghuRngHDVZr8FuQBZPzM0THJlnRNn2Z+k+jNIL7Sv/T84cV+okBLlsUVVWbtUzIDi2LXADA7Fdi3BfeAVMVNJ57AcEj+BwGWAt1YkTntiQ1DKSGQq0miG2UfFl2SPm3sqzsW+Xl36qqylb01wBA7mAM0pVcmknYYIQRQIZ9AtFlnloKZuwduNOvZQAtBa9b+ZfTdxMAitB8lqA/37l7SNOPVY9ettlPkwRKmHr2c2YYkUMNBJmOe0ATCcXeDRRXQ09E+YH704nfk97zufizvRnp31yS/kVEsZvqMbxDU9RoDbmGT+Sn033FkzkPZ+bwnpibWUsWyAD0nTUFwTE89fwDvNBubXPjjeH+oD8xAGi2PxPuAxCr93MR5YP3xbP99gE51SosfKOTmozZmT/Rmwvl5yJQf/jgAzovCAP4YVQBAInsZXl5W8e2PR17Cu4X9Pyenv/15/8X9xqf0QCA0Py1P/u1Uz87lbsvt+RQyUtFL2WmeGk6IswgANxJuhM8Hmwba6v678H5U8Utl4Kic1tjABH0eaNVhGIhHaTK/b+9agD4rfJlGZVLcF8DQErOgEI/g5nv3uwePF1tZ7fhRTZ9GeZ8h3gHAM7JNBls+oFzMKLq/GBqkpySOjI1UlKIJnqYjBqjqMyd0jmSPnKm8Iyf/S6cDQCGAP3EgNHtg0A/VMaJNni4DoEv6IjS7HW5ui0EgwAQ9+5PO9UQF/amzf2X34ySZf9lW8FzCXGprP1hSOfnz59n6S8lPvt5AMgpugUQXVg2/V9ckv5RM1CEKRpT90NqJADQI0ShWHeQ3uT6+j+1jMPtHFZNPJkeq41MvKe+ebQrdgxHt763ttaeHu42VXRIDjcgn7orgOtAf4dVFslkg4yKjKCFiUcL7JYT5SylAR+Xb4dF2gH/APpJBZBeKUxDbqBSTCH35asENv5qaPC3tnaGQjQGfLJ3LzIdd5yrTaAl8frWz+5l75nwHxjLy5+QrinySoq3UT0UhRopoMl+c9r9kXUs6/T583I42fzjZut3Gp0xwNi/33webd+Rd9CiwaHvWKmCvIgAYJ8Sq6YvG58rP3LggUI/MSDaYpm5ZCpvqrkRQtXC3iF+AaC/H3/Cgchh90g5TQI+0yfRGPGDkchIFIZt4Dv7jLOdLNklvRzsAQajc65IBP15TVbWDK4bRv/RD1T8FxRD6rcMzJMKVN9dP60BgPDDu8VunJyu/g31sbWk+/4fuH9JPDYx2eYOOossExHdTscmZTb6Dx3dr7o/FeDLFy8i+KL8EjPQ2XEy+CCBRKMIC9Zd7s4fhviLSyaeTI8F9O135otEpa0YEeb319xvZy1gLLNE6+xAIUx81Y+tgPtQW9PI7cmO8yb8TAP9V6v1IzyT63FmpAKor2iwLgMA6Yzu/Y4LkNH4ExJICr9dVUVxyM4AyBrfffCACvCdW7eIdiYQQeg7exbty/1yM7plaP2g+Hct8dri6dO9lZUdZE6BObPYFBH2e3LGAJuczZgzU8YU3Si/Lr/+HVQJa7zA5h/muco+/Jzd2312SfeHA0RrSmWcbMYNlOvLMOc7eA4AvxK2K6DcE2p26JqJLS3lc0dLTehNPmpGtNU6hpmQwEk6+Rl3kUXgAP3BnQeBj7DandJ/hqJ/mPfyB7x6dMJqIdYKWJSmpWAGa3Sb7X7QkpJ4qv9zOfoRLuXRGnkx5gRNG/3bDs6w0T/oz5q9Omv7aPZdYNcR7U7jEPptWINOCAEOQOHXXnst1V34TF6y2SUDU7w924gDbdmUSgbvSSrjHf01CYjatMIl+CQnoWWuSGibBnzH4/n7Ebq9mRQ+n6bMzF8EWEiJyy1Muf80F7H3OxXt4vx8tqOhIERxiGAP8dcisG4H/awsfOUKz5YwqOcTwiFhfHfKOS4uIvVSbZghDMjJU7oHXB5y1s5RU6z/GWYbGYwjBmgtFcRgAB18mnaC4Lxfvn0kanMDoL/xDP1HM26cq0lT9C8t9fJkSHQbXYqvYo6aG+FITd9BLU4BQDuB6qequ7r2/OPiouwiSj0vyUsSpalEs7Bpk9ZriQHK/9hGHCLAYN4iKIc916b3am9/VT8L6o4sLRVxCuwMaMeEMh2vCx/s9vzm7puq2BAA4rn9Qxj93/DWYDR8Lv1vC9rSf6fV88f+tHQNsQfD0aNH6drUAEDnKFGBvTxVDmInH3FhduEX4NbWN4rS3nYz51i79Y33xFwGIcxYc9uG3xT5b66anLXIRRiSXds4DyGYRZZID0lM9ofWgFjNidFb9fx0uLoCtKk2NenzP3b5fOzNp7tRhu2xQTxgiwJ4gPZ0QQv41kxDMgB90J4R8euT9wclqN0fQqoE8a+qAuLxjDzZKXqsdXQb7+yIAXwEgAApZN8hPpxGcJDhhdj/UwATOgimWSuzWPCdc0feq64u51JRxPS234dWfeExWhDGlNlENl6jLwb3ORxjbnoOAIOyzHa2TX83UJj1s8yc/J1l/T7f6e3RVvt1JwmGtmsi3cAS7I5sfurOBM7yHbWBdl9799/s7vvzfZVb9A2cG+bpcyQTpSQXDHcW2j2Wgh8trQomsNCmGoMhuWoysX9ws7P8u/HtvnHf7vpfWJL+mevt778P0NP0TXsoWAAiAAd4GwuvSNq4a2+//bZuxEYxwE1Z2GcZ7ZsQSbIHAgn/weESpeH6HGgvftF+UE7AO/ovjwG/A9FhzeYNLXKJTmISHIbnz459eyElkzqUIqoG69J7cV0q2nwrvaHQ/xVvDYkg2zfRDkQqwKPc5ltbaeekMcnNk1aZaez4gpRPXEIp50BKJrb6SoMW9N8OA/eIRgZmmFYM6N3d22/2PzQe5u6xE60XYD+VBX5oP9JY0tgf2pFc5hs45puoyOCa53jb72Prktmdctia/RS8EmMuaJVeD/ccAL6//OEk35bxhl9rvrD7g86yTvg6SS5JTrTNegxokb3zH/+yF53zNyYwnkRzuq4+vT90/3rf9YbdDQNpA3/23LmG+U+ZY0wwEgncGHxCeKTd4t7WUpQ2ipPiUJ+9l4KXdJtYA4C+ibP8u+FNd2Gy0X/wyF5t+uQn/A6JnyUC+CJ7NoAINs0HcFFg6CNiTzdWonP7CAlu8NdejcyiM9aa6v4nWoeIdkc5jqUorRVp3hP/WbMUYUSLrylrirCi2qZz50SJ0WKPAZwTA7MZtDsxCyWLPEA7BWgK4KbLKkYMQAUiHeSycwe13sD0JsJLRCMDIIen1wBMEMR9GlUZDkNntpMA7N7t2/oVeBRG15n+UFZoNGGY5J+ZytEvxJLkB99RCJb5toW2f3az9v7Y2AEQSpU3T4nJdst0Bo1bxuxzs6SGV+pWvjssiyUA/CAM/fk3Wny6pD8eeGyMf8A5QrdNdJJodp3mcuAszPuhXl0TZvAeglBpZmQZzxad3+m6A4gAKExpJvPDRw/v9t29+qevHk87Xu579IFFqalLkWVC9ZqbrYeJtefKuQrKtmF6W6ylYOgPKRxkJMbyb7ej/LthzVhhr//WA1NSUaP0HwpJjxAUm/BMvg/C7nt+wlG6100jgHKIvMtl6EAG7wO4oPsRV4guNJXTYqQVaffGUQQeDtczIQvhbb2jv9d6gAK+Bi8YCqGAEe0OPHHeg1hXxjAwe8mMC9MMHTfWhzCDJpEZJS+wZTftyoAjRgYHJF8aeOCByAGybR9vsSJcEgM0AOjPe5A+w2gxjHvG044z7F/CXkcm8xZAekH2/STIsfV1PjM/mzamD7bf4IubwDfn9NprK5YmjIi3Trd/wEREM2PmnUQ0XsDLMBFhhuq6yFgCgJM98Q/9uYtGHWA6Y2brMJMN/Obz+Kri1kjVaEiAUfTfSOnrmyHLpGeMOcOic1aQs4Cwd6yXh3sQyoAYitrDI8NdfV1Vf7mqMquyfN+tu3dyttdCMBGCUFpBV6kfKR07e5w2OPJNz1vSh5eC5/zNdj9oIBDr3p/zzvLvi4f4yMY6jM8DQOpde8Mfsmvn6kQt0oQ9dcveM05XYPFKl837MEfd7VY3n9A93UBw90/14hCUBzYB1QDA4bwh2xV4vQzeYwAAqyNcD4pg9SJH1w39nVgs0bXJaS7DMJKStKXEbQ+iHquHRzTUKGQTRqTsxBSsgP+J2GHAMG7+E8NoNtJ7ftj5la88IvMnOYk1fHu3VxQxq2WUSEYNiKjWduOGQTzT3TNZCBKlMZU0MyaLBdl1yyzYfQRSr/tfkUZrxsaxsLH4PxRe90ln4NzKLCJHs+Ucib40SNr4Pn93dwsLU1DwaZKGObGCfMgYwuOa+5oB/fYt7alm6r7ZfW/JWywxr86vzi2bnx0b+6R5562PR5INYzotbRLFn2ZquD89A3iBw8zYVCBKwbEHAI0BlH9/WfSfB/LApv/z9oY/kHFH274uLUmwbMWeTu3FxMSdIStrIREWjwezoT/uC3mhwOCmh4GN5NiHgNoj8UNrkmQPvKdmAPEzV26OJgrGErk4cZ5RoBXhSCh0n4RLYrV+MqmISo6KrZp/qy7hLjjzfRizU8+M6jricoT1qLp3rAZ+LX6s2ZVJaQIkIWLaCQeXa7VrRQz4PAB0mfJfpel33mgy9h858kdLSy+WlJzZv39XnKK9d3KAOsIzRLnlOvqvX9cAwPDQUaKZMeksxS19NgAThNqbrGTspmVLr0QODtQnacc/AAD5OogCWlyKaopggCEkjXl/71ZLayuh22C3NzyNbafQfNKN9CIpGpXRxSeLcBWqpvyeDUkO5B6Q0wvMLbR+hC6YAhcXBUG3ujVJLOJhbGSoYL3vUX1fLKVgkhTrcMq/GlQ2fvkX8mKj/6Oy3WI1ffLT+YgYDM4+bxnNBmGL19W0/9L9cjA4DuUE/BvfpbmIdlJoDu9ALwBVx8hOTMbAU8D0WWBEAqRPniLJEwV0Q+n1sciNLaArGEsuypycpSGU/1t14dWEhf43iFq8WQxdQLzJG6s/BUub5DgNjOSbM3GHC6pfc3vAZXilPkGaOC0rGeRUNwSFrsIF+P5uIg3hhZ3FfOKj+DeBZsh5hkLUc+CIK8aAQv7XLmadKRflo2Kzt69j/1uXZo8aw2XGsJxhWVKM0B97DKCCUWlWThjPAsBHEx9NEgNAfx0Q32hMHwBAOoskzqJLElz6L4gHK84I2A95MNqp7qmuGziuwzOB24XFQRQJAQvtLWNIlEZ+Ak8Dx/s6O4PBJi4LOwzW1Jgiggp00Dz4wHhADkUqgH/ohrT2w4BIHUh1IBsEAIKBGdmbvSYBCtl9SxoOAcBz9ydv9ctC/230b9k/IRVvKP136sVoMkAz3TUwEa0HhEmQ6P4AAeKj1qDEtYHaYAdvSB8nGQC9pKQRMEpwBzrPTNBNKJ0t/+QKnAZTgl2Mrl27xgQgZtCLwt4VNKeiIMkLMtU4YSZArjbSkOQCu+FxA8J75Zpc75KbY9IWw0KwW1RgIZ+rPFywrY0gSZMctwdEEa2WutTW+A68GBwJhQAg1v3BK5EmwKDlGzqRhIFTxGNuDQjEPOVwN+uy9speHmLKBEF7RMujeZQryIH8DGOTBBnaUgtpBgVV6669XzXzgwu5/+8/XTP+lGH4cA7jjJxh97oXvh9cQAKaAQBin/R9Is4YwHBtTDQSWfyfi4+Ta2bMtGJ7LmcMgCdx8TUJRgjlNQRplmRybLwDwN8WWrX4VgzKHdrPo84UtUHQQiG4yZ33B3btGuay8Jik8nJutJASHjJXbY2mriKMNTL0vZaqesz6+SPPCwLqQ45VwdF8Te6+ij+p3f1+qdz47f+6fdXnAWBrvS39MwmdLAxJEWGR1BK6TbKJX0I0gFqFAAgILB4ajgijj7AQ10a/M23mIL5mFfg6O9NRzoJUKu6QJRB+yCrIEYEYSkTEBv4KLQL6ORmAiYnBgySJAfo0sRdl+lxqfIilSybgSys9lwi2FAhoumzofhH8+erVgrq6vKPp8kdF/qLnuD0uvi6ehiEJSc4GSkV/lnHRyM85aMc+0Ox+SxqwGFlVGzofdnVx07lNKDxAEveXkg8hWTeDwxNAH/YKBaf4phA1QTbks1wYnA9er3uOjnC50tO5SswgzpZACr8E4QwIH+GUi9bWBtel889vmmdPs9I2+c+IlBdf1eqBxgB0GHkh5hCuWCOlOyUzbrTcsNGfgnCUMHlY55Q+7Z0pwDWHe5EW6AJMTbwIvXAgbhAcCI2orKyMlJpEPH4BwPhiva4O6toAsQ7xYNxaxKzBwenHj69e/TQ5ecZq5TaIAVGeNmcD0hpEItyVE7WhX3/GWgq2+0HxaQ+rfxec5d+Na8w9m/7P2crPsmQfRZ6cVFvClWvoQwVwRBy0wTJcEIAgCY2Wg9MOxMIC/BvHJYGot4yUlk/kT7g7EK8BACUavwd3ECXQPTVZZuNScJ+2VGKAvEgjIwX6AEBoN5HM2hgafRMIA7yYLIbBf5PFsoDl4O3bVYf+4EzVr0iVeLbUf7d36wc7t9bW8rZ8JOm1gqagqPBP+DIxABWorIyBEs3Jud+OALenDZQ5xhsSlbnyJGpkXSRkCkb8hjhNAOaX7A6yyOytrsZ5CEUuV+SQ4h+RIyzpAjHZRGGcrj5yI65PMIj6JLwhzVTUBhDTSKc6OhKbm8tmisrN8sqWypOSeNRqb73SecUZA9CUXmwMSDQTK40vigGtziTgxIloWibTcWwyYwgWrTFkxvoEPZIw8gPmHf8kFSbxYrJwL5QAIZwyQ2PtbQ1H/7AAYH8fzwat5p1mZgYWFmprL8/OTo2PE+YNzpzchaUeLjaWNjo7mVZMJWBIvvY1gMLGfYaqwDGWgm8ol/cWAKD/G1//IZmz0X+gNJPZq2M1SoL/Ab64IyQd5yMtoPALK0GQoRKFC+KyAU+Vc1RL0B9qCd8nfsDuec+gZfg6/UV2ALD3edZFZ+S8iEh8LmkEUUpesAGzkGboDcBFf+oD+fBDwItzJWPGswE4HD2vs6OqqqOm5jevVKVuzdk67bl1rXzLlpFDWz6+I2+/ja8BmsQb8JrJBe4zN/gp3A4aUYjrTLqoLDeXA4FgggqxpK21lTIA4ZYbRCeYbgbHrad4g/pHaGGa8CnEgKhgjg0FEJbpCIJ7sSS4E47PxOZyUUhAC+LTuWIjI0n9/bnzh4rkdTSWo3K0oriiQBZ1fQM/67rqnDEAZvpiYwBB6IuCsDnR54wB0bQ449t4Oy0VUCsVgki1ycDQggjA/IlJx8UnJED88X8mIJtxScyWtGIhhSitA0mEEWPnLY7C3YVoDGzZ8uGNm0NDffgqfUFweYpAJAmkg3yIrf2aJvECx4YNwEt0mS0KJ06e+MYbZd3dxxwBID0+peDB+j5V863ClNvyr3XI/qHkjVX+Pb6G9N8sqSCFov9q6i28D4qBUIMaoNDM/Mc7QW1SgTfffBP2gRSDO4onI6vgTYjkEH94jVaGSS/QfBAfKAzg9KQCYBAMCJWJD0WGQnSC8uS547ZrTb6t+pIYDK0MAMRXyZPxYUoAQ2MXL5JAoc/gzZmbZgoKZo9YRZa8k6l3A6mpRup8pBrApgh/SClJSZlISZk7LXBn+D5ArKAJ8hB/EKTYiRo+zgkx3ZhUURrH6pNk8H/QaJ5Hh6L5MFFnZ5mQlIj4UihFZHDMW16gnyVRhmEgmywZ9YZ6AAuDe6eRg0ZmpEMfA47WnCEH91p0ijUBPMOHdIYXS7HYAYAzvPx02pBLdgwAa11dyfj/jbkzRxQ4aBzUGABgfjT20awzBnC5XBtzCvQnLQb3cXUSX2YE3AsyBGFirjElEYUgZ+g/xADmZjwCgLEyW6T8SxFYtmy3K8DeDe85exb3IpBM79p1ubEx9DZ9QRPop4R/ZpHPp08EIkbQg0ifCZOK+AMbYAUCzAZV0Oicyp8rKio0SkOho8eOHU1JORz/UrAOJkA03Z8brvz7fVluQQla6J96U76pHTnAUmSYwOFeffVVNBkAF3TW7aABZeCY30BDQGSJwfB1Crm8lf1cYkQGNB/kZupdBADyAD6O+UDyQQZA3kAS4H7Xwx9EFFT07zEbJA+n1dYP+4HAnPwYhIYaJ27BM/0RQYdytrO25k1508Mppyz9YUfVjq1JlcwWtDD4BxSJqQIEM610Tx4+DMWVYOD9ywBYxFe+CeIM/Au5yQ4AiP6EB3xGnzbjNfZXSRUFYfZ+YP70Sz+Nq1QcNQBANvVRw6wW4gWsQ3LmpNp1ynfkfC6JGAxp0BhA5HB587/n0WlSIjsMtQ3QH8mEMzHvm3J9XnZc12JAVCtMaWxDdoMVkYEB/VB+uL8GACYCUw9K5L3w674LiCUbOrQBlNsf++aTgmhLroeH+f29bQW9XV07Pr6/ZyvawmJaGt4VFgDwPQIAOXTWwD5aFLLxSwhIN32EZWWhlPRiiY8p+tOBGuoOTSmmM4WWlYLTlnXDaQDY1j2z8QMAa/puytab8o2bIrP2Rh0u9tLA4eDp6Dykn/YDYfR5AArEsRsEv9wybS4izDgDAHIQfq+V4XjEQbWt+sd4mT4Ckp9kj3gs3TG4Mf5MkQCQpMaJY2dJyaQxSc4V7Smn2L81hMa5PRXlzCCQWnQ3ZuYoM4uLo08B4yRivC8qXrNTG6k3X4ZJyGzUAAALJPbwQbwmNqOHksHmbloSmLW8kgDAJjHwfTJpNCLBzHBdkgvNWWk2cFHE0CEDZ8QgeKx587/n0WlS3DgMBWF+UucwOe8gV5JhEgbIzKLrLrMMjk/7A2k304HMWyVTpp69f+L6BgD28GeA/eAxg0xT4mFkjjAlBEeyZdBzvLd3fGCgDaIxOA7k85Bvg++akLCgK1MAqcJ0OZWp/RZgLLwjdOBAt0hIJF4BgHUsLEeAlfjmfXPdczD6FUvB31+5+zN988I3WdXMO2yg8u/zvPwJ4o/sA/oZD8WL7bdM1tkyLZP4WZmHv3g1XJWF7gzEGBgzIAxa4sI2hrHS5ZysCQTfDJ+G/GrF9iMGsxLxRwMAHBOAjqPB+ZinjPU0UiKGRGWkIAw1RwxgnCGtW/1KYl8XzP0diHwTVsbMk3JSbLtOAFga5RKtxbTDT+wBgEQGBYsCy0Pdy406V7wMtoL4EAgg65BmwvAJ6bgyAYA1R8R26BPezOzhlTAOnET7lPXG94O91hiAn0p8jOXHzM9SKV0ILQjhpbtv7QBA8hqqku4qYiTpqq5f35h2c2k0/X/2zjOuqXTb/98tVQIiIFEIwtBU0BksyH/G+Yin934O8++99zf/3st9dc+r++b23u89vdw+fYQpeKyoY4NANIAh5BAgkFD2/V122CcaxBDAwjzfWbMNO/t5kuDH9XvWWjvPYtMxyBXLHgX6Z6LA+YONnaYBRY/rfVjpWZR7NSCrnM1jEwA1Y1eeTq7t2vDL9Pdz+TKlpdTVablBeTnrR/5dsbFMsUUkokhTAkC6AJSWpi9tBsEJAnazYeityAiBf8kCsJdUPkEKQ+D/BH4I84RzJUUAth4Gw+K9GvAJniTG79UA79MjADXUNNHUSmuQ4JWzZykqkptWlC4BoLGRj32MjUITao0vy5jBZQ04DPlsNP5ledn7kGtkTzgjKd5/FsOjx2bzMSzA6SdTAIQ/RQM+yxOIZWOzEnL9r/LqaU6f5ez1kusTjfXJL+996Ut0dbl7ntiPY0OOF+GL8CVo3vA9ofI09bKVsAJR+B58d+m48Ij8wzeWrAS64FMYDAbDZkYAoprqk5wspLCKqtbJ1tD5UIzY4qkEtv0kyKoTBDSz0cylLPCfXTVEWOCR0YXsUWEwGIwAiDrqlJ1ppDFAIEx4hhkbmyeAO8uJoBBUPuKY+7kl+59sZQwGgxEA4cFzhCPOd7hXEQCbrYXBYDAYAXAppljGVsFgMBgM2/jgYDAYDAYjAAaDwWDIxSZDDAaDwWAiAIPBYDAYAbAet63CJPwqfCq7eTIZ8+mlF5jkoSzA78NXV3659b6P1cf/BfwrqMrw6lvw09Cx2kUrzlMN/xpezuqtr8o34SXIgb8J3yYD3oP/CM9k/OqF8HfhBxgMRgAMW26PgOqkZUb5sqViZf0q62cxy9+WwWAwAmDwyTJ3zWVQDhWQv5kyk6m+2EkzGAybKgAG60l8YYt1sxOqwQeVWQQBmeFdfomdbCyLj14ADAbzRTD1Zb148eKdO3cANahUJ271ZmIjGGd8lFEdo0RnmZ1n3sLKI6+IolJKnW2oCylkjXzjgUWAP035qLkNNLTRth6nfP48AwPMz+PCp6AEhy4E75DOAvQuT23VUbeHPcCtW9y+rYYLJBLk51Nejnpt1dbauCwu6iKGh3UR8bjT/cNp/7T6FqrfIYXqS1TfxAchnDbWxzi2gx0P+IDlt26VLy6Ww0hNjfrLprTATmGe+Xd59y53wfH+OjbDIZb4chYi+IekYzNv851FXHLgK7h0YTAYNl4A3nrrre7u7ps3bwLqP6nOZB//+Mdz5H3WQT/9t7g1xNAww2HCEoAZZlwB8OCRY5IA+PCpvWIzzbvYtS4BSNOAfPJPcUrT6iXICgliby+vv87cXIr3536P9I3VdoZlG9vUOehD4c+fPZt/+bIlOQmHkwLg9dLczLFjdHQgGBriwgWuXSMQIBJhdjbZ/2/PHhobefZZXcoD+MP7e0i9S/UrnE92wZQWnuQkaYRC+oDlr71WPj9fAXobUhm9pZWbDL/GazqC4/0/plcBMheAG9y4w50o0UUWt7O94hsVPnyS/7TWpLOL/GAbWORadAFGAAyGTRSAGzduaPkvDXjnnXcAtaLX8l9tYNWNnqzQOvEiF69w5QY3/PjvcCdEaIIJVwDcdqC72V1Djdbp+9l/kIOHOSxtWJ8AiCj8mdP1RQJTT33WAnD1KleucOYM16+73n9155uuAe812831wfpXuyd6e73nzqGpRketeFx9n/H5aGsjFiMvjyMlNzl9GglOXx9SiVDIEYBkA/KWFp2RbmiJ/vBfSEXFkgYUU/GdnPDkl/myNHieeckA9xIMSuTKL18uv3ixvLZWg3RmZQHQDAECL/NyZBdUf1mXpnYK+j1WQ33A3+O9S1waZDBCRAKg+M/7DW8NNbXUSp9kHjzAEEMhQhFGPFws4mvSCQwGw6YKgNb7agKutvRKBAGKA0ZGRtSwm6y4zvVees9x7hKXrnFtkEEgPz+/vLzc6/Hm5ubatp1IJKLR6K3xWwoRCilsokkPbnM7RKiDjvRQIOt3Is8iAdBRL8Ea6e+XAMgc778at1d9sjpUHeuOvfnmdE9PZcHZpiN4CyiYZXYkPvJ+//tvTkTz8uSxQzV573rfeiuvu/tA/rWaQ5SUOM3TFvz+SP+liDJHytORn09ZGQcOkMZCWmNfmdz0QvjSCCOOyeGuJABF0oB/8A/Kf/u3S4LBSZ2Jx5E4pSLx1nBpwBhjVD+nadHkmREn3k33m7x5hjP6G9EMkqJiip0OdHXU6W/HSZFZWH78ffT106+VwS52lVPOClxK/yErnk19ZDB8QAWgsLDQ4/HIQfv9fpAzqtCPOsnaUYqgm+53eEca0EcfsHfv3vr6ejUZ17TFxcV5eXkSAHW+lwCEQqFAIHDr1q2+SJ90YpRRLRUVJShZ4cXL+vha19e++cffvDp91REAHXPIIWNsW2v/pABA0ec+99kf/vAbZMV07/TwO9Pd3Z89dO5TinLkmLWwjRHTR9bjN8JvXL5MY+OVlvkLpb29JxquHTlCfT07dyIBCIXQG3j7bc6di6BIxOtFy+X9+7EsVkc+2nHTly45vlt2nwCEw/L+0gCKi8tFzRsVwf80qet0Rm8gFXcGhDOtjpnRR99ZzvbQc5rTcvTHOa6PP820ZnuFVyqo0N+O4gBH9RU7at0wyugn+aTO6w0/NNqZgR+SBccxAmAwAiBqa2sPHDigVb8cNKDMT2tr6zNyNGvkJjd76NFaTxrgx68m90eOHDl48KCKCpKBysrKkpISVwAUdoyOjkpyrl+/funSpQsXLmig3OICC7nkfoSPlFDCOoi1xn7Nf/wf9vYqEyXvL3uWZ9eU/HFsaIhfbG/9RryFbIm9F/uL3m+d/JkPPX/y+SMcabQaHQ8oscwnP0Kk1z8eCPQHJ6+3e/s6OzlxgoMHJcNIALTu372b+XkpgR4Po5BpcFCPpKusTmWlowGKGIYjw04EkLb8dyIAypcJBv06ky4ActaO6VLH+2fY1HOe+X76FQhe4EIrrZL2AxzQ8n+SSQV8fvwyXaDgoIwyIEJEz77Ii/pF6Xp9gExSbjPwg7V6f1kK/w+D4YMqAKWlpS+88IKyNHL9zppdjlvugLUQIfIjfqQbRd7mbT/+3bt3nzhxor29va2tTeoiOUkvKU9OTmr5f+XKlT179kgtVIU+s3hG63TnBqEP8SHWwUzrzMxAixJbrWM/CQLkXDIaO5P0/goCRsrLv9HSEh9chwD8vP2Rlzrk1DrprKEGG+GxPB10yCm/z/vnphtGRv79v7/m/+IXbS3/pQFu++S6OubmCATQO5HbR054dJSxMUcAMgkCZNHIZUcAxhhLTa/J9TsRQFtbuagor7gcTKqCJCc3FzeH43h/zUB1S3LazAgR0ij5eun6czynX4KsggqFegqAZH78AQJ6IzojtSiiSLO30NJOu4yVaVvpVFYYDEYAnCBAWRpVAgAt1ZWpZ40ocj/PeQX7/fRLUeT9Ozs7dTx27Fi663dQQHD48GHpTVlZmeRnYWGhp6fHWQx68frwNdOcvQC0SABaZwcGxt56yw0C5HPXtPzX7yPxYktcAnC9hexpL6J9Lx33JDRssFCmW95Qn/fllwfb2/0+Hw0N3EdNDQoCFBAgJiaIRqWcZIBbBuDyZdeDuwIQiSR9vdSuqqpyz56qam91QXxHMBh1ztfW3r/8lxN3RYUVOcx9TDE1yeQEE/vw6uM306yCPyCBr6MuSlQaIAEYOT+ix5q/kEIvXl0jtXjw7QBd3MtfQ5YtBoMRAP6cnD/MqfrlKsTfgy74PJmjFZwcZh99ivQBBRC6lUjeX0cehmoDJ0+enJ+fn5qaCofD165dk5YoKSwv0ESThUVWJFoTcwPMDbTaAwOe21fcIKCSSlZDJfHk2l9Hu6qqv6VlzmqZm2sle9rhODSRRhFFcnkFFMBveDxSREpL0ys0FBWxfTuS0YXZWRIJZJkg3XDy9Tt2jESTdeBDHEpZ/sv0vGNJ1+4IwPDw/QKgsXpzzoSaOTPPjHw6zHcxDwVQqM9LCjvYobycbOL8hHRikcUCCqSIueSyGl8jhQ5kmWIwGAF4jzSSp0ohDi8h0v9Zdax6y/8Nblzn+iKLyvYcOnRImZ/jx4+TGao9KFBQ/BFQLry//87cHU2lisIAA5IBsiMHu9W2B1oYGIjd/nMFAY4AnOJUhsv/iQk41mK3tJBose08sue/gM1KSN62sc0RuW3bkpaOZaHzOmLbSXPJrBQ8Gr3qFHKnmfbgcQsAsoMHlwRA4NPV7wbfd867aJQzluo6t/yboQDkuOdW3QqutKu0dF8pBoNh8wXgG6TxY/gLUukEMhSAGLEhhpxqHtDY2Lhv3z6VEyzLgsw9VbVKBSoINzQ0KAiQ69eEmjZ7ARBN0NoqAZBduZHMAskUXnA/NljAyEjKzT8qg8v7yy7sZ71YYPPIcTM2+jyOH5c10ihtc8q/09P3RAD605ouDganHA3QKTf/EyOW9P6yB9G8yglrybZhMBieNAEQEXj5wd5ffJ2VcZaH8hjzzCv7r3KCvkSWxU1EultUA1USkAAECGhCTZsgkU9+9i63pYGBv9IAWxow7wQBjgCsjFv7jceXxEPef58EALCeSg1wb9ksLh6ZGnEFwC3/6knHRDVuFui6KwDu8p+SkuTzVVVkw2oRgCvBBoNhswVgkAcQgSgFrJEw4RAhZ5cYr9er+3+0nGftaJRuB9IMBQUF8Xhcc44xpsmrqCJrapATl/fXDgz9ly5dJXlH0AEOkIbfnxSA99+HAwdsZ/lPipI9zRowcn3IWcsvshgMbnMiAGmcKwD607Gzw0kBSK0Au9kkssRZ/uvIBmtAx5J9HYPB8Bh2A51gQhYhAuzcuVO39Di3kGaBBmq4JnH2D9C0UaKsE2chr2NxsSoBMjn5OHHScGu/5OdrSNKeclzHPcusEwGoIOxEAFNTK0cAcxNFjgDcvTvuLP8jRFwhITsc7y8zGAxbSQBixKaZlgEej0cVXd3fSVYUL6FJAE2omWWsk4oKeX/H5Mvk/R0Z4F6uXUsu/wcGwPX+VVVbRABkRUXJL/QGhx3/nur9nU3rnBNLWSCWbPkLwB5PWgFgo1NADjYGg+FpEoAECceA/CWUwyErNNCZ4b5ps8RKCwIqK90gQBEGyyQSKbXfkpK05b/F08u2ba4GOAn90eDovTeA4uJcp3P3C4CrIpZFFpgisMGwVQXAxl5kUUc0+xJWtm4idbjmdKddL0VF9rIGyO9LABxLr/3K2zlqYevisjK2BO43wvTZwzPh8HB4eHgmGl1BAJzlvyw2XjgysjAyMjb247EQodQCwPojABMEGAxbRwCUOsghR0dgYYlFue6sSB2uOd1pNwAnAtCxttbNAjm7m0WjSQGQKUTY5Oy/9RjLABQWRu5GQqPahenH6d7f+Z27peDR0XHVAMKh8EJhXnoBIPsisMFg2EoCUECBY0B8Ce31RlbMLqEZUqfdqEyIqwFx4k4WSMfU2m8kkpL9LyraOg0pc3PdHM7E6MTdu9HR0eiD9nRwS8FjY5Oh0MREaMINIJAiw/qLwCYIMBi2jgB48BRT7Gzeqe0ctMVbNBolKzR2aglAc2pm2Yb52cbGpAbs23eNa04Q0B/qd5f/Tt8V55rUKbZMECCbvDs5Oqo9nydXjACEGwEEQy1jY1OTY5OkasX6U0AGw1bCCEAppTvZmdzONxIJh8NjY2Osnbm5OQ0cHx/XJEA55ZpTk7NB2KnV4Lw8JwjQl86WvL8Vi+Eu/22FC1sLdxXf/5XAr/961OdzBGCFmm4eeclS8LTvN8d+6lrXwIYKwDbABAGPC4Mhl42mkkov3t3s1rJaW/yrr4Cay8uba+t/1sLt27eDwaCGqwywne2aUzPvYtfGLoTdzSGGLly4Gb3ZP9B/69bta9eW4wNZUxNrpD6LJ+szncNlL6txglXJz0/m8Y9Xw88VFPycz2frp3TcUrCOVX9cxTM4AzWDiQDux2AwAlBFlfxFDTUePNOx6cHBQXWXVF/JtbYUVm8A9YcZGhoC9rLXcUPWRrsMVwBk/iG/f9Cv/+cXt+l81rXfLh5EkyyDMV/gYdRoRJbvIUX8amU+GLQspcGsmpqVV9o11Oxn/1f5KqIafKxj+X8A/heyLLB50jEYjADkkltHXT31jTRe5KJcv/Iq2tOtpqYm82+EqTH91atXtRmc/DHQQIPTKXDj918oK8MNAgLnA0u4yR/27s0iX/8SK9KMbEV+pDFr8P57ZVm8h3QBeKkaZDmwsHt36ge078sCfZyPH+UouY73l5VjMBiMAKyIXH8zzVo29tOvHM7Fixe1I5B2dFBPmEwSQcr8nDlz5vz58319fYAzlY4+fGwoNlggR+8IQPwf+odG/+Du9u/T+VlHALJbdx4jnRydzmDAoezmT6eah7FdebWkO4fAQ+/sqkb/kbRCVsZgMBgBqKCildYhhoIEu+k+e/astgXV13qVzT969OiuVfvHKmKQ91cvsN7eXpUBSilto+0QhzThJqUF5ApdDQjMz1NXl/T+Xi9bGjehA4FML3dGGAyGLUHuJm28qx5+o4yGCU8yeXHh4unTp+X9dUOn2ryoPYD2edY2n5Zlpd7yPzw8rGqBMj9a+7/33ntqDZ9Pfgcdxzh2mMM+fNibtgtnayuDg0Qit51b/g8dQg/Sh201XI+ewb6kVopeGAxbCBMBbLwGFFDQTvsUUwkSFtaF2QuvvfaabglVUVctYlQPUBygkoAyQrZty/tPTExIG1QxVvZfmR9d5ol6ni95/gQnpAGaig3E1YDUT67+5BUVTE+Tn09TEzt2APZW9v7CA39HZuquH3AMJgVkw5twio1jD3te5EVHDHaw4wIXVAxQhkedXqqqqrTVs3b6dAQgHo9Ho9FQKKScj1P1rf2vtUd6jrSfan+h8AVpAGlsfBwgj9/RsVnf1cqBv4FsdQ4t2f/lYXxpyX4Hg8GwUZgaQBz+KfwSG8de9n6YD5dQsotdPnzXuDYQG7i8hHZ50z7PrgDEYjHE59gTLhmdOlDfc7gtr+1E3tHOzo7c3Bw2Exsss/z9YGMwGAFIINtodrP7E3xC0UAddfvZP8hgkGCIUHQxOjM5M8+8s3uEpKKsu8z7htc3F/e98cb/7TmvL+fm5TXl5tLZufqq3AY+z4PJf/DTX4Dv8zC+kD6+BpnBYNhqGAHIhXk2lDzyVMhtoqmf/iGGRhgJE44SnWVWAmBh6QKP7Sm1SysTldUJv29u7n+88UZPT1NeHhIAHV944SHZmK4HvzZd2QQB9oPn9jmnDAbDVsEIwOKyAMyzOZRSeoQjsjHGxhmfZPInAmDnFVFUapVWnKgomXuHuTkSidhpq6dH3j9p7e1r/95Tvp7IJhFkP3juGudng8GwhTAC4Hj/OEvYNkksi41G9QDZyrn2fDhxQgLg2MS770oDnCBA1tbGgyjI9GwWFKT/YDAYthJGAOJLlgAWF5meJhZjdhaKCikspKCAR4bHo4yPqwFjZ8+6cYCU4ODBTa8G23zAMBgMJgK4eTMxNZUAxse5cYNgkEQCnvFSXs7OnZvodNMpK5MG6OUdG+nrkwa49YB9+9gwzJ0/BoPBCMDwcOLllxOBQAKYnOTmTS5cgPx8mpupq8Pn4xHj9bq5IHn9QDicmguqryczSuAfIdtAGuG/IDMYDFsEIwCz44noaOLPv5GYgOlpgkGorKSzjWPHlHbZLAGwH9a0RBpgWehBNNoPebK+pAbU1LAeDAaDwZDLKzBEYiiRCCTiTZU3pjsRh4upqmL/fo4epaODR4vFMs88Q1kZgQCxGLZ9DXIdGbhDZy579mAwGAyGrMnloxAhPhSPBw4n7lYjV2tZFBWhCKC+Xsv/x5xuLy1FtsxlRwAgF05BBevBYDAYTAqojETZc4m25xLRKDMzSAC2b6ekhCeS88sCoOMp/rKdO+BQIIgCOP5mupRGYQpQxSEFEZAAhPvcg44OKAClQGkXxoJb2BubAw539txp+v889OYL/GVqpCMVAAB3APltOh0J8wcKqeLtMwBhXgQAUD0A8v+UfMvrbwUAAAjAezk/VtzlL/EBAKooCnk8AAAtAIBoEAAAAAEAABAAAAABAAA8yVeyLNvtdpfLRSnV7/dns1mj0ZC4AQAByPPcObderw+HQ61WG4/H3vvVaiVxAwACsN/vt9utc26z2dTr9cVi0W63n0sCIGIgAN77JEmOx2NeOp1OYQ2HAiBu4BK42WwaY6y1tzV8CGs4FABxA98AhsPhZDK5Xq+9Xk9rPZ1OwzoajQRA3EAArLXL5dIYcz6flVKDwWA+n7daLQHwCMBjcOE8TVOtdbfbFQAAr4ECAPgnMACAAAAA7s0HoDFhsamH/bcAAAAASUVORK5CYII=",oye={thin:100,light:300,regular:400,normal:400,medium:500,bold:700,black:900};class aye{constructor(e){this._webGLHelper=e,this.fontRepository="https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/",this._fonts=new tf([],JSON.stringify),this._metadataPromises=new Map,this._fontPromises=new Map,this._promises=[],this._defaultFontEntry={metrics:vT(oG),texture:this._createTextureNow(rye)}}async waitUntilReady(){await Promise.all(this._promises)}getFont(e,t="normal",n="regular"){if(Xi(n)&&(n=oye[n.toLowerCase()],!n))throw new Error("Unknown font weight: "+n);const s={family:e,style:t,weight:n};let r=this._fonts.get(s);return r||(r={metrics:void 0,texture:void 0},this._fonts.set(s,r),this._promises.push(this._loadFontEntry(r,s))),r}async _loadFontEntry(e,t){try{const n=await this._loadMetadata(t.family),s=cye(n,t),r=this.fontRepository+T9(t.family)+"/"+s.replace(/\.\w+/,""),o=this._createTexture(r+".png"),a=this._loadFont(r+".json");e.texture=await o,e.metrics=await a}catch(n){console.log("Cannot load font. Using default.",n),e.metrics=this._defaultFontEntry.metrics,e.texture=this._defaultFontEntry.texture}}_loadFont(e){let t=this._fontPromises.get(e);return t||(t=fetch(e).then(n=>{if(!n.ok)throw new Error("Could not load font: "+n.status);return n}).then(n=>n.json()).then(n=>vT(n)),this._fontPromises.set(e,t)),t}_loadMetadata(e){const t=T9(e);let n=this._metadataPromises.get(t);return n||(n=fetch(this.fontRepository+t+"/METADATA.pb").then(s=>{if(!s.ok)throw new Error("Could not load font metadata: "+s.status);return s}).then(s=>s.text()).then(s=>lye(s)).catch(s=>{console.warn(s)}),this._metadataPromises.set(t,n)),n}getDefaultFont(){return this._defaultFontEntry}_createTexture(e){const t=this._webGLHelper.gl;return new Promise((n,s)=>{dv(t,{src:e,min:t.LINEAR},(r,o,a)=>{r?s(r):n(o)})})}_createTextureNow(e){const t=this._webGLHelper.gl;let n;const s=new Promise((r,o)=>{n=dv(t,{src:e,min:t.LINEAR},(a,l,c)=>{a?o(a):r(l)})});return this._promises.push(s),n}}function T9(i){return i.toLowerCase().replaceAll(/[^\w]/g,"")}function lye(i){const e=i.split(`
`),t=[];let n;for(const s of e)if(s.startsWith("fonts {")&&(n={name:void 0,style:void 0,weight:void 0,filename:void 0,post_script_name:void 0,full_name:void 0,copyright:void 0}),s.startsWith("}")&&(t.push(n),n=void 0),n){let r=s.match(/^\s*([A-Za-z_]+):[ ]?"(.*)"$/);if(r){const o=r[1];n[o]=r[2]}if(r=s.match(/^\s*([A-Za-z_]+):[ ]?(\d+)$/),r){const o=r[1];n[o]=+r[2]}}return t}function cye(i,e){let t,n=Number.POSITIVE_INFINITY;for(const s of i)if(e.family.localeCompare(s.name,void 0,{sensitivity:"accent"})==0&&e.style==s.style){const r=Math.abs(e.weight-s.weight);r<n&&(n=r,t=s)}return t==null?void 0:t.filename}function hye(i,e){const t=[];let n;for(const s of i.split(`
`))if(s.startsWith(">"))n={identifier:s.match(/>(\S+)/)[1],sequence:""},t.push(n);else if(n)n.sequence+=s.trim();else throw new Error("Invalid fasta file!");return t}class uye{constructor(e,t){this.animator=e,this.disabled=!!t,this.damping=.015,this.acceleration=.3,this.accelerationThreshold=100,this.lowerLimit=.5,this.loop=!1,this.momentum=0,this.timestamp=0,this.callback=null,this._transitionCallback=this.animate.bind(this),this.clear()}clear(){this.momentum=0,this.timestamp=null,this.loop=null,this.callback=null}cancel(){this.loop&&(this.animator.cancelTransition(this._transitionCallback),this.clear())}setMomentum(e,t){if(this.disabled){t(e);return}e*this.momentum<0?this.momentum=0:Math.abs(e)>this.accelerationThreshold?this.momentum=Vse([this.momentum,e],this.acceleration):this.momentum=e,this.callback=t,this.loop||this.animate()}animate(e){this.callback(this.momentum);const t=e-this.timestamp||0;this.timestamp=e;const n=Math.abs(this.momentum);this.momentum=Math.sign(this.momentum)*Math.max(0,n-((n*this.damping)**1.5+.04)*t),Math.abs(this.momentum)>this.lowerLimit?(this.loop=!0,this.animator.requestTransition(this._transitionCallback)):this.clear()}}function dye(i){const e={},t=["string","number","boolean"],n=["wheelDelta","wheelDeltaX","wheelDeltaY"];for(const s in i){const r=s;!n.includes(s)&&t.includes(typeof i[r])&&(e[r]=i[r])}return e}const N9=new Map;async function fye(i,e,t){const n=i.symbol;let s=N9.get(n)??await mye(i.symbol);return s?(N9.set(n,s),Lh`<div class="title"><strong>${s.name}</strong> ${s.description}</div><p class="summary">${s.summary}</p><p class="source">Source: NCBI RefSeq Gene</p>`):null}async function gye(i){console.log("Searching: "+i);const e={mode:"cors"},t=(await fetch(`https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=gene&term=${i}[GENE]&sort=relevance&retmode=json`,e).then(n=>n.json())).esearchresult.idlist[0];return t?(await fetch(`https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=gene&id=${t}&retmode=json`,e).then(n=>n.json())).result[t]:null}const pye=OO(gye,500);function mye(i){return pye(i)}const _ye=hs(".4~r"),bye=hs(".4~e");function vye(i){return i===null?Lh`<span class="na">NA</span>`:Xi(i)?i.substring(0,30):Number.isInteger(i)?""+i:yr(i)?Math.abs(i)>Math.pow(10,8)||Math.abs(i)<Math.pow(10,-8)?bye(i):_ye(i):GD(i)?i?"True":"False":"?"+typeof i+" "+i}async function wye(i,e,t){const n=(l,c)=>{var h;for(const[u,d]of Object.entries(e.encoders))if((h=d==null?void 0:d.accessor)!=null&&h.fields.includes(l))switch(u){case"color":case"fill":case"stroke":return Lh`<span class="color-legend" style="${`background-color: ${d(c)}`}"></span>`}return""},s=Object.entries(i).filter(([l,c])=>!l.startsWith("_"));if(s.length===0)return;const r=Lh`<table class="attributes">${s.map(([l,c])=>Lh`<tr><th>${l}</th><td>${vye(c)} ${n(l,i)}</td></tr>`)}</table>`,o=e.unitView.getTitleText(),a=o?Lh`<div class="title"><strong>${o}</strong></div>`:"";return Lh`${a}${r}`}class yye extends iG{constructor(e,t){super({vconcat:[]},e,void 0,"implicitRoot",1),t.parent=this,this.appendChild(t)}}ni("index",gR,["continuous"]);ni("locus",vae,["continuous"]);ni("null",fZ,[]);n$("fasta",hye);class Cye{constructor(e,t,n={}){this.container=e,this.spec=t,this.accessorFactory=new rhe,this.viewFactory=new ome,this.namedDataProviders=[],this.animator=new nye(()=>this.renderAll()),this.genomeStore=void 0,this.viewVisibilityPredicate=s=>s.isVisibleInSpec(),this._renderingContext=void 0,this._pickingContext=void 0,this._dirtyPickingBuffer=!1,this._currentHover=void 0,this._wheelInertia=new uye(this.animator),this._keyboardListeners=new Map,this._eventListeners=new Map,this._extraBroadcastListeners=new Map,this.tooltipHandlers={default:wye,refseqgene:fye,...n.tooltipHandlers??{}},this.viewRoot=void 0}registerNamedDataProvider(e){this.namedDataProviders.unshift(e)}getNamedDataFromProvider(e){for(const t of this.namedDataProviders){const n=t(e);if(n)return n}}updateNamedData(e,t){const n=this.viewRoot.context.dataFlow.findNamedDataSource(e);if(!n)throw new Error("No such named data source: "+e);n.dataSource.updateDynamicData(t);for(const s of n.hosts)s.visit(r=>{for(const o of Object.values(r.resolutions.scale))o.reconfigure()});this.animator.requestRender()}broadcast(e,t){var n;const s={type:e,payload:t};this.viewRoot.visit(r=>r.handleBroadcast(s)),(n=this._extraBroadcastListeners.get(e))==null||n.forEach(r=>r(s))}_prepareContainer(){this.container.classList.add("genome-spy"),this.container.classList.add("loading"),this._glHelper=new Cge(this.container,()=>{if(this.viewRoot){const e=this.viewRoot.getSize().addPadding(this.viewRoot.getOverhang()),t=n=>n.grow>0?void 0:n.px;return{width:t(e.width),height:t(e.height)}}}),this.loadingMessageElement=document.createElement("div"),this.loadingMessageElement.className="loading-message",this.loadingMessageElement.innerHTML='<div class="message">Loading<span class="ellipsis">...</span></div>',this.container.appendChild(this.loadingMessageElement),this.tooltip=new Ble(this.container),this.loadingMessageElement.querySelector(".message").addEventListener("transitionend",()=>{this.loadingMessageElement.style.display="none"})}destroy(){this.container.classList.remove("genome-spy"),this.container.classList.remove("loading");for(const[e,t]of this._keyboardListeners)for(const n of t)document.removeEventListener(e,n);for(this._glHelper.finalize();this.container.firstChild;)this.container.firstChild.remove()}async _prepareViewsAndData(){this.spec.genome&&(this.genomeStore=new sye(this),await this.genomeStore.initialize(this.spec.genome));const e=this,t={dataFlow:new cZ,accessorFactory:this.accessorFactory,glHelper:this._glHelper,animator:this.animator,genomeStore:this.genomeStore,fontManager:new aye(this._glHelper),requestLayoutReflow:()=>{},updateTooltip:this.updateTooltip.bind(this),getNamedDataFromProvider:this.getNamedDataFromProvider.bind(this),getCurrentHover:()=>this._currentHover,addKeyboardListener:(a,l)=>{document.addEventListener(a,l);let c=this._keyboardListeners.get(a);c||(c=[],this._keyboardListeners.set(a,c)),c.push(l)},addBroadcastListener(a,l){const c=e._extraBroadcastListeners;let h=c.get(a);h||(h=new Set,c.set(a,h)),h.add(l)},removeBroadcastListener(a,l){var c;(c=e._extraBroadcastListeners.get(a))==null||c.delete(l)},isViewConfiguredVisible:e.viewVisibilityPredicate,isViewSpec:a=>e.viewFactory.isViewSpec(a),createView:function(a,l,c){return e.viewFactory.createView(a,t,l,c)}},n=this.spec;n.datasets&&this.registerNamedDataProvider(a=>n.datasets[a]),this.viewRoot=t.createView(n,null,"viewRoot"),await uZ(this.viewRoot),(this.viewRoot instanceof Ss||this.viewRoot instanceof jh)&&(this.viewRoot=new yye(t,this.viewRoot)),Zwe(this.viewRoot),Ywe(this.viewRoot),this._glHelper.invalidateSize();const s=[];this.viewRoot.visit(a=>{a instanceof Ss&&s.push(a)});const r=Uwe(this.viewRoot,t.dataFlow);Kwe(r),this.broadcast("dataFlowBuilt",r),r.dataSources.forEach(a=>console.log(a.subtreeToString())),s.forEach(a=>a.mark.initializeEncoders());const o=Promise.all(s.map(a=>a.mark.initializeGraphics()));for(const a of s)r.addObserver(l=>{a.mark.initializeData(),a.mark.updateGraphicsData()},a);await t.fontManager.waitUntilReady(),r.initialize(),await Promise.all(r.dataSources.map(a=>a.load())),this.viewRoot.visit(a=>{for(const l of Object.values(a.resolutions.scale))l.reconfigure()}),this.broadcast("dataLoaded"),await o,this.viewRoot.visit(a=>{for(const l of Object.values(a.resolutions.scale))this._glHelper.createRangeTexture(l)});for(const a of s)a.mark.finalizeGraphicsInitialization();t.requestLayoutReflow=this.computeLayout.bind(this),this.viewRoot.visit(a=>CC(a,"size")),this._glHelper.invalidateSize()}async launch(){try{return this._prepareContainer(),await this._prepareViewsAndData(),this.registerMouseEvents(),this.computeLayout(),this.animator.requestRender(),this._glHelper.addEventListener("resize",()=>{this.computeLayout(),this.renderAll()}),!0}catch(e){const t=`${e.view?`At "${e.view.getPathString()}": `:""}${e.toString()}`;return console.error(e.stack),Sye(this.container,t),!1}finally{this.container.classList.remove("loading"),window.setTimeout(()=>{this.loadingMessageElement.style.display="none"},2e3)}}registerMouseEvents(){const e=this._glHelper.canvas,t=n=>{var s;if(n instanceof MouseEvent){n.type=="mousemove"&&(this.tooltip.handleMouseMove(n),this._tooltipUpdateRequested=!1,n.buttons==0&&this.renderPickingFramebuffer());const r=e.getBoundingClientRect(),o=new eye(n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop),a=l=>{this.viewRoot.propagateInteractionEvent(new Jwe(o,l)),this._tooltipUpdateRequested||this.tooltip.clear()};if(n.type!="wheel"&&this._wheelInertia.cancel(),n.type=="mousemove")this._handlePicking(o.x,o.y);else if(n.type=="mousedown"||n.type=="mouseup")this.renderPickingFramebuffer();else if(n.type=="wheel"){this._tooltipUpdateRequested=!1;const l=n;if(Math.abs(l.deltaX)>Math.abs(l.deltaY))this._currentHover=null,this._wheelInertia.cancel();else{const c=dye(l);this._wheelInertia.setMomentum(l.deltaY*(l.deltaMode?80:1),h=>{const u=new WheelEvent("wheel",{...c,deltaMode:0,deltaX:0,deltaY:h});a(u)}),l.preventDefault();return}}if(n.type=="click"){const l=this._currentHover?{type:n.type,viewPath:this._currentHover.mark.unitView.getAncestors().map(c=>c.name).reverse(),datum:this._currentHover.datum}:{type:n.type,viewPath:null,datum:null};(s=this._eventListeners.get("click"))==null||s.forEach(c=>c(l))}a(n)}};["mousedown","mouseup","wheel","click","mousemove","gesturechange","contextmenu"].forEach(n=>e.addEventListener(n,t)),e.addEventListener("mousedown",()=>{document.addEventListener("mouseup",()=>this.tooltip.popEnabledState(),{once:!0}),this.tooltip.pushEnabledState(!1)}),e.addEventListener("dragstart",n=>n.stopPropagation())}_handlePicking(e,t){var n;const s=this._glHelper.readPickingPixel(e,t),r=s[0]|s[1]<<8|s[2]<<16;if(r==0){this._currentHover=null;return}if(r!==((n=this._currentHover)==null?void 0:n.uniqueId)&&(this._currentHover=null),this._currentHover||this.viewRoot.visit(o=>{if(o instanceof Ss){if(o.mark.isPickingParticipant()){const a=o.mark.encoders.uniqueId.accessor;o.getCollector().visitData(l=>{a(l)==r&&(this._currentHover={mark:o.mark,datum:l,uniqueId:r})})}if(this._currentHover)return Y_}}),this._currentHover){const o=this._currentHover.mark;this.updateTooltip(this._currentHover.datum,async a=>{if(!o.isPickingParticipant())return;const l=o.properties.tooltip;if(l!==null){const c=(l==null?void 0:l.handler)??"default",h=this.tooltipHandlers[c];if(!h)throw new Error("No such tooltip handler: "+c);return h(a,o,l==null?void 0:l.params)}})}}updateTooltip(e,t){if(!this._tooltipUpdateRequested||!e)this.tooltip.updateWithDatum(e,t),this._tooltipUpdateRequested=!0;else throw new Error("Tooltip has already been updated! Duplicate event handler?")}computeLayout(){const e=this.viewRoot;if(!e)return;this.broadcast("layout");const t=this._glHelper.getLogicalCanvasSize();if(isNaN(t.width)||isNaN(t.height)){console.log(`NaN in canvas size: ${t.width}x${t.height}. Skipping computeLayout().`);return}this._renderingContext=new I9({picking:!1},this._glHelper),this._pickingContext=new I9({picking:!0},this._glHelper),e.render(new Xwe(this._renderingContext,this._pickingContext),kL.create(0,0,t.width,t.height)),this.broadcast("layoutComputed")}renderAll(){var e;(e=this._renderingContext)==null||e.renderDeferred(),this._dirtyPickingBuffer=!0}renderPickingFramebuffer(){this._dirtyPickingBuffer&&(this._pickingContext.renderDeferred(),this._dirtyPickingBuffer=!1)}getSearchableViews(){const e=[];return this.viewRoot.visit(t=>{t instanceof Ss&&t.getAccessor("search")&&e.push(t)}),e}getNamedScaleResolutions(){const e=new Map;return this.viewRoot.visit(t=>{for(const n of Object.values(t.resolutions.scale))n.name&&e.set(n.name,n)}),e}}function Sye(i,e){const t=document.createElement("div");t.className="message-box";const n=document.createElement("div");n.textContent=e,t.appendChild(n),i.appendChild(t)}const xye="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEuNSI+PHBhdGggZD0iTTQuNyAyMS4ycy40IDIuMyAxLjMgMy42QzcgMjYgOS44IDI4IDkuOCAyOHMzLjQtMi42IDYuNC04LjVjMCAwIDEgLjEgMS45LS40LjktLjYuOC0uNCAxLTEuMiAwIDAgMi45LjUgNi42IDAgMi4xLS4zIDQuMy0xIDYuMi0yLjUgMCAwLTEuMS0xLjctMi41LTUuMS0uNS0xLjMtMi0xLjgtNC42LTQuNmwtOC4yIDguNi0xMS45IDYuOXoiIGZpbGwtb3BhY2l0eT0iLjEiLz48cGF0aCBkPSJNMTIuNyAxNC44cy00LTEuOC0xMiAyLjdjMCAwIDEgMy43IDIuNSA1LjMgMS40IDEuNSAyLjMgMy42IDQuNiA0LjYgMCAwIDQuNy0zIDYuOS05LjJsMy0yczQuNyAyLjggMTIuNi0xLjZjMCAwLS42LTMuMy0zLTYtMi42LTMtMy44LTQuNy0zLjgtNC43cy00LjEgMi4zLTcuNSA5LjNsLTMuMyAxLjZ6IiBmaWxsPSIjN2ZiYmRkIi8+PHBhdGggZD0iTTEyLjQgMTUuNWMtLjctLjUtMi40LS44LTQuNC0uNC0yIC40LTQgMS4zLTQuOCAxLjgtLjUuMy0xLjIgMS0xLjIgMS40IDAgLjcuMyAxLjguOCAyLjQuMy4zLjcuNSAxLjQuNi44IDAgMi41LTEuNCAzLjUtMiAxLS42IDEuNi0uOCAyLjctMS4ybC0yLjkgMi40Yy0xLjMgMS4yLTIuMiAxLjUtMi40IDIuMyAwIC41IDAgMS40LjUgMS44LjQuNS42LjggMS42LjguNiAwIDEgMCAyLjYtMS41LjktLjkgMi4zLTMgMi43LTMuNy42LTEuMSAxLTIuMi43LTMtLjItMS0uNC0xLjQtLjgtMS43ek0xNy40IDE0LjJjLS4zLS41LS45LTEuMi0uMi0yLjVsMS45LTNjLjUtLjggMi0yLjMgMi42LTIuNi42LS40IDEuNS0uNiAyLS4yLjYuNCAxIDEgMS4zIDEuNS40LjYuNyAxLjMuMiAyLS43IDEtMS42LjktMi44IDEuNy0xLjIuOC0xLjkgMS4yLTIuNSAxLjlsMy44LTEuOGMxLjMtLjYgMi43LTEuMSAzLjQtLjcuOC41LjguNyAxIDEuNC4zIDEtLjIgMS45LS44IDIuNC0uNS42LTEuNS45LTIuNiAxLjItMS40LjQtNC41IDEtNS44LjUtMS4zLS41LTEuMy0xLjQtMS41LTEuOHoiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNMTIuNyAxNC44cy00LTEuOC0xMiAyLjdjMCAwIDEgMy43IDIuNSA1LjMgMS40IDEuNSAyLjMgMy42IDQuNiA0LjYgMCAwIDQuNy0zIDYuOS05LjJsMy0yczQuNyAyLjggMTIuNi0xLjZjMCAwLS42LTMuMy0zLTYtMi42LTMtMy44LTQuNy0zLjgtNC43cy00LjEgMi4zLTcuNSA5LjNsLTMuMyAxLjZ6IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iLjUiLz48cGF0aCBkPSJNMTIuNCAxNC45czIuMS0yIDMtMmMxLjEgMCAyLjMgMi43IDIuMyAzLjUgMCAuOC0yLjEgMi40LTMuMSAyLjMgMCAwIDAtMS4yLS43LTIuNi0uOC0xLjMtMS41LTEuMi0xLjUtMS4yeiIgZmlsbD0iIzdmYmJkZCIvPjxwYXRoIGQ9Ik0xMy44IDE1LjNjLjkuOC42IDIgMS40IDEuOCAxLS4yIDEuNC0uOCAxLjMtMS41IDAtLjcgMC0uOC0uNC0xLjYtLjMtLjctMS0xLjEtMi0uNS0uNy41LTEuNCAxLjMtMS40IDEuM3MuMi0uMyAxLjEuNXoiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNMTIuNCAxNC45czIuMS0yIDMtMmMxLjEgMCAyLjMgMi43IDIuMyAzLjUgMCAuOC0yLjEgMi40LTMuMSAyLjMgMCAwIDAtMS4yLS43LTIuNi0uOC0xLjMtMS41LTEuMi0xLjUtMS4yeiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9Ii41Ii8+PC9zdmc+";async function Dye(i,e,t={}){let n;if(Xi(i)){if(n=document.querySelector(i),!n)throw new Error(`No such element: ${i}`)}else if(i instanceof HTMLElement)n=i;else throw new Error(`Invalid element: ${i}`);let s;try{const r=ka(e)?e:await kye(e);if(r.baseUrl??(r.baseUrl=""),r.width??(r.width="container"),r.padding??(r.padding=10),n==document.body){const o=document.createElement("div");o.style.position="fixed",o.style.inset="0",o.style.overflow="hidden",n.appendChild(o),n=o}s=new Cye(n,r,t),Lye(s,t),await s.launch()}catch(r){n.innerText=r.toString(),console.error(r)}return{finalize(){for(s.destroy();n.firstChild;)n.firstChild.remove()},addEventListener(r,o){const a=s._eventListeners;let l=a.get(r);l||(l=new Set,a.set(r,l)),l.add(o)},removeEventListener(r,o){var a;(a=s._eventListeners.get(r))==null||a.delete(o)},getScaleResolutionByName(r){return s.getNamedScaleResolutions().get(r)},updateNamedData:s.updateNamedData.bind(s)}}function Lye(i,e){e.namedDataProvider&&i.registerNamedDataProvider(e.namedDataProvider)}async function kye(i){let e;try{e=JSON.parse(await JD().load(i))}catch(t){throw new Error(`Could not load or parse configuration: ${i}, reason: ${t.message}`)}if(!e.baseUrl){const t=i.match(/^[^?#]*\//);e.baseUrl=t&&t[0]||"./"}return e}function Aye(i,e,t=!0){let n,s=o=>{};return function(...a){return new Promise((l,c)=>{const h=()=>{clearTimeout(n),s=u=>{},l(i(...a))};t&&s("debounced"),clearTimeout(n),s=c,n=setTimeout(h,e)})}}const Eye=`{
  "data": {
    "sequence": { "start": 0, "stop": 60, "as": "x" }
  },
  "transform": [
    {
      "type": "formula",
      "expr": "sin((datum.x - 30) / 4) + (datum.x - 30) / 30",
      "as": "y"
    }
  ],
  "mark": "rect",
  "encoding": {
    "x": { "field": "x", "type": "index", "scale": { "padding": 0.1 } },
    "y": { "field": "y", "type": "quantitative" },
    "y2": { "datum": 0 },
    "color": {
      "field": "y",
      "type": "quantitative",
      "scale": {
        "type": "threshold",
        "domain": [0],
        "range": ["#ed553b", "#20639b"]
      }
    }
  }
}
`;function Iye(i,e){let t;return e.length===0?t=i:t=i.replace(/\{(\d+)\}/g,function(n,s){const r=s[0];return typeof e[r]<"u"?e[r]:n}),t}function _(i,e,...t){return Iye(e,t)}var CA;const OC="en";let rx=!1,ox=!1,PC=!1,gZ=!1,pZ=!1,VO=!1,my,SA=OC,Tye,mh;const ti=typeof self=="object"?self:typeof global=="object"?global:{};let qn;typeof ti.vscode<"u"&&typeof ti.vscode.process<"u"?qn=ti.vscode.process:typeof process<"u"&&(qn=process);const Nye=typeof((CA=qn==null?void 0:qn.versions)===null||CA===void 0?void 0:CA.electron)=="string"&&qn.type==="renderer";if(typeof navigator=="object"&&!Nye)mh=navigator.userAgent,rx=mh.indexOf("Windows")>=0,ox=mh.indexOf("Macintosh")>=0,VO=(mh.indexOf("Macintosh")>=0||mh.indexOf("iPad")>=0||mh.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,PC=mh.indexOf("Linux")>=0,pZ=!0,my=navigator.language,SA=my;else if(typeof qn=="object"){rx=qn.platform==="win32",ox=qn.platform==="darwin",PC=qn.platform==="linux",PC&&qn.env.SNAP&&qn.env.SNAP_REVISION,my=OC,SA=OC;const i=qn.env.VSCODE_NLS_CONFIG;if(i)try{const e=JSON.parse(i),t=e.availableLanguages["*"];my=e.locale,SA=t||OC,Tye=e._translationsConfigFile}catch{}gZ=!0}else console.error("Unable to resolve platform.");const On=rx,ht=ox,As=PC,Mp=gZ,mw=pZ,du=VO,Mye=mh,nN=function(){if(ti.setImmediate)return ti.setImmediate.bind(ti);if(typeof ti.postMessage=="function"&&!ti.importScripts){let t=[];ti.addEventListener("message",s=>{if(s.data&&s.data.vscodeSetImmediateId)for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a.id===s.data.vscodeSetImmediateId){t.splice(r,1),a.callback();return}}});let n=0;return s=>{const r=++n;t.push({id:r,callback:s}),ti.postMessage({vscodeSetImmediateId:r},"*")}}if(typeof(qn==null?void 0:qn.nextTick)=="function")return qn.nextTick.bind(qn);const e=Promise.resolve();return t=>e.then(t)}(),po=ox||VO?2:rx?1:3;let M9=!0,R9=!1;function mZ(){if(!R9){R9=!0;const i=new Uint8Array(2);i[0]=1,i[1]=2,M9=new Uint16Array(i.buffer)[0]===(2<<8)+1}return M9}const _Z="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function Rye(i=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of _Z)i.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const bZ=Rye();function ax(i){let e=bZ;if(i&&i instanceof RegExp)if(i.global)e=i;else{let t="g";i.ignoreCase&&(t+="i"),i.multiline&&(t+="m"),i.unicode&&(t+="u"),e=new RegExp(i.source,t)}return e.lastIndex=0,e}const Oye={maxLen:1e3,windowSize:15,timeBudget:150};function lx(i,e,t,n,s=Oye){if(t.length>s.maxLen){let c=i-s.maxLen/2;return c<0?c=0:n+=c,t=t.substring(c,i+s.maxLen/2),lx(i,e,t,n,s)}const r=Date.now(),o=i-1-n;let a=-1,l=null;for(let c=1;!(Date.now()-r>=s.timeBudget);c++){const h=o-s.windowSize*c;e.lastIndex=Math.max(0,h);const u=Pye(e,t,o,a);if(!u&&l||(l=u,h<=0))break;a=h}if(l){let c={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function Pye(i,e,t,n){let s;for(;s=i.exec(e);){const r=s.index||0;if(r<=t&&i.lastIndex>=t)return s;if(n>0&&r>n)return null}return null}const _h=8;class vZ{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class Fye{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class wZ{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class un{constructor(e,t,n,s){this.id=e,this.name=t,this.defaultValue=n,this.schema=s}compute(e,t,n){return n}}class v0{constructor(e,t=null){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0,this.deps=t}validate(e){return this.defaultValue}}class Qf{constructor(e,t,n,s){this.id=e,this.name=t,this.defaultValue=n,this.schema=s}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}}function Te(i,e){return typeof i>"u"?e:i==="false"?!1:!!i}class tt extends Qf{constructor(e,t,n,s=void 0){typeof s<"u"&&(s.type="boolean",s.default=n),super(e,t,n,s)}validate(e){return Te(e,this.defaultValue)}}function sN(i,e,t,n){if(typeof i>"u")return e;let s=parseInt(i,10);return isNaN(s)?e:(s=Math.max(t,s),s=Math.min(n,s),s|0)}class qt extends Qf{constructor(e,t,n,s,r,o=void 0){typeof o<"u"&&(o.type="integer",o.default=n,o.minimum=s,o.maximum=r),super(e,t,n,o),this.minimum=s,this.maximum=r}static clampedInt(e,t,n,s){return sN(e,t,n,s)}validate(e){return qt.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}class dl extends Qf{constructor(e,t,n,s,r){typeof r<"u"&&(r.type="number",r.default=n),super(e,t,n,r),this.validationFn=s}static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const n=parseFloat(e);return isNaN(n)?t:n}validate(e){return this.validationFn(dl.float(e,this.defaultValue))}}class $s extends Qf{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,s=void 0){typeof s<"u"&&(s.type="string",s.default=n),super(e,t,n,s)}validate(e){return $s.string(e,this.defaultValue)}}function ys(i,e,t){return typeof i!="string"||t.indexOf(i)===-1?e:i}class $i extends Qf{constructor(e,t,n,s,r=void 0){typeof r<"u"&&(r.type="string",r.enum=s,r.default=n),super(e,t,n,r),this._allowedValues=s}validate(e){return ys(e,this.defaultValue,this._allowedValues)}}class t_ extends un{constructor(e,t,n,s,r,o,a=void 0){typeof a<"u"&&(a.type="string",a.enum=r,a.default=s),super(e,t,n,a),this._allowedValues=r,this._convert=o}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function Bye(i){switch(i){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class Vye extends un{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[_("accessibilitySupport.auto","The editor will use platform APIs to detect when a Screen Reader is attached."),_("accessibilitySupport.on","The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled."),_("accessibilitySupport.off","The editor will never be optimized for usage with a Screen Reader.")],default:"auto",description:_("accessibilitySupport","Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}}class Wye extends un{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(19,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:_("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:_("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Te(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Te(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function zye(i){switch(i){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var mn;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(mn||(mn={}));function Hye(i){switch(i){case"line":return mn.Line;case"block":return mn.Block;case"underline":return mn.Underline;case"line-thin":return mn.LineThin;case"block-outline":return mn.BlockOutline;case"underline-thin":return mn.UnderlineThin}}class Uye extends v0{constructor(){super(126,[65,33])}compute(e,t,n){const s=["monaco-editor"];return t.get(33)&&s.push(t.get(33)),e.extraEditorClassName&&s.push(e.extraEditorClassName),t.get(65)==="default"?s.push("mouse-default"):t.get(65)==="copy"&&s.push("mouse-copy"),t.get(99)&&s.push("showUnused"),t.get(124)&&s.push("showDeprecated"),s.join(" ")}}class $ye extends tt{constructor(){super(32,"emptySelectionClipboard",!0,{description:_("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}}class jye extends un{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(35,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:_("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[_("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),_("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),_("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:_("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[_("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),_("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),_("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:_("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:_("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:ht},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:_("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:_("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Te(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":ys(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":ys(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Te(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Te(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Te(t.loop,this.defaultValue.loop)}}}class hr extends un{constructor(){super(44,"fontLigatures",hr.OFF,{anyOf:[{type:"boolean",description:_("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:_("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:_("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?hr.OFF:e==="true"?hr.ON:e:e?hr.ON:hr.OFF}}hr.OFF='"liga" off, "calt" off';hr.ON='"liga" on, "calt" on';class qye extends v0{constructor(){super(43)}compute(e,t,n){return e.fontInfo}}class Gye extends Qf{constructor(){super(45,"fontSize",us.fontSize,{type:"number",minimum:6,maximum:100,default:us.fontSize,description:_("fontSize","Controls the font size in pixels.")})}validate(e){let t=dl.float(e,this.defaultValue);return t===0?us.fontSize:dl.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}}class al extends un{constructor(){super(46,"fontWeight",us.fontWeight,{anyOf:[{type:"number",minimum:al.MINIMUM_VALUE,maximum:al.MAXIMUM_VALUE,errorMessage:_("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:al.SUGGESTION_VALUES}],default:us.fontWeight,description:_("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(qt.clampedInt(e,us.fontWeight,al.MINIMUM_VALUE,al.MAXIMUM_VALUE))}}al.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];al.MINIMUM_VALUE=1;al.MAXIMUM_VALUE=1e3;class Kye extends un{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[_("editor.gotoLocation.multiple.peek","Show peek view of the results (default)"),_("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a peek view"),_("editor.gotoLocation.multiple.goto","Go to the primary result and enable peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(50,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:_("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:_("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:_("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:_("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:_("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:_("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:_("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:_("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:_("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:_("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:_("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,n,s,r,o;if(!e||typeof e!="object")return this.defaultValue;const a=e;return{multiple:ys(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:ys(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(n=a.multipleTypeDefinitions)!==null&&n!==void 0?n:ys(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(s=a.multipleDeclarations)!==null&&s!==void 0?s:ys(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(r=a.multipleImplementations)!==null&&r!==void 0?r:ys(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(o=a.multipleReferences)!==null&&o!==void 0?o:ys(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:$s.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:$s.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:$s.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:$s.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:$s.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}class Zye extends un{constructor(){const e={enabled:!0,delay:300,sticky:!0,above:!0};super(52,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:_("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,description:_("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:_("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:_("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Te(t.enabled,this.defaultValue.enabled),delay:qt.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Te(t.sticky,this.defaultValue.sticky),above:Te(t.above,this.defaultValue.above)}}}class Rp extends v0{constructor(){super(129,[49,57,37,64,91,59,60,93,116,119,120,121,2])}compute(e,t,n){return Rp.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=e.scrollBeyondLastLine?t-1:0,s=(e.viewLineCount+n)/(e.pixelRatio*e.height),r=Math.floor(e.viewLineCount/s);return{typicalViewportLineCount:t,extraLinesBeyondLastLine:n,desiredRatio:s,minimapLineCount:r}}static _computeMinimapLayout(e,t){const n=e.outerWidth,s=e.outerHeight,r=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(r*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=t.stableMinimapLayoutInput,a=o&&e.outerHeight===o.outerHeight&&e.lineHeight===o.lineHeight&&e.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&e.pixelRatio===o.pixelRatio&&e.scrollBeyondLastLine===o.scrollBeyondLastLine&&e.minimap.enabled===o.minimap.enabled&&e.minimap.side===o.minimap.side&&e.minimap.size===o.minimap.size&&e.minimap.showSlider===o.minimap.showSlider&&e.minimap.renderCharacters===o.minimap.renderCharacters&&e.minimap.maxColumn===o.minimap.maxColumn&&e.minimap.scale===o.minimap.scale&&e.verticalScrollbarWidth===o.verticalScrollbarWidth&&e.isViewportWrapping===o.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,h=e.scrollBeyondLastLine,u=e.minimap.renderCharacters;let d=r>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const f=e.minimap.maxColumn,g=e.minimap.size,p=e.minimap.side,m=e.verticalScrollbarWidth,v=e.viewLineCount,b=e.remainingWidth,w=e.isViewportWrapping,y=u?2:3;let x=Math.floor(r*s);const k=x/r;let S=!1,L=!1,D=y*d,N=d/r,T=1;if(g==="fill"||g==="fit"){const{typicalViewportLineCount:Se,extraLinesBeyondLastLine:me,desiredRatio:Dt,minimapLineCount:ze}=Rp.computeContainedMinimapLineCount({viewLineCount:v,scrollBeyondLastLine:h,height:s,lineHeight:l,pixelRatio:r});if(v/ze>1)S=!0,L=!0,d=1,D=1,N=d/r;else{let Lt=!1,nt=d+1;if(g==="fit"){const Vi=Math.ceil((v+me)*D);w&&a&&b<=t.stableFitRemainingWidth?(Lt=!0,nt=t.stableFitMaxMinimapScale):Lt=Vi>x}if(g==="fill"||Lt){S=!0;const Vi=d;D=Math.min(l*r,Math.max(1,Math.floor(1/Dt))),w&&a&&b<=t.stableFitRemainingWidth&&(nt=t.stableFitMaxMinimapScale),d=Math.min(nt,Math.max(1,Math.floor(D/y))),d>Vi&&(T=Math.min(2,d/Vi)),N=d/r/T,x=Math.ceil(Math.max(Se,v+me)*D),w?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=b,t.stableFitMaxMinimapScale=d):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const $=Math.floor(f*N),U=Math.min($,Math.max(0,Math.floor((b-m-2)*N/(c+N)))+_h);let ee=Math.floor(r*U);const ce=ee/r;ee=Math.floor(ee*T);const fe=u?1:2,Ce=p==="left"?0:n-U-m;return{renderMinimap:fe,minimapLeft:Ce,minimapWidth:U,minimapHeightIsEditorHeight:S,minimapIsSampling:L,minimapScale:d,minimapLineHeight:D,minimapCanvasInnerWidth:ee,minimapCanvasInnerHeight:x,minimapCanvasOuterWidth:ce,minimapCanvasOuterHeight:k}}static computeLayout(e,t){const n=t.outerWidth|0,s=t.outerHeight|0,r=t.lineHeight|0,o=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,h=t.viewLineCount,u=e.get(121),d=u==="inherit"?e.get(120):u,f=d==="inherit"?e.get(116):d,g=e.get(119),p=e.get(2),m=t.isDominatedByLongLines,v=e.get(49),b=e.get(59).renderType!==0,w=e.get(60),y=e.get(93),x=e.get(64),k=e.get(91),S=k.verticalScrollbarSize,L=k.verticalHasArrows,D=k.arrowSize,N=k.horizontalScrollbarSize,T=e.get(57),$=e.get(37);let U;if(typeof T=="string"&&/^\d+(\.\d+)?ch$/.test(T)){const Ai=parseFloat(T.substr(0,T.length-2));U=qt.clampedInt(Ai*a,0,0,1e3)}else U=qt.clampedInt(T,0,0,1e3);$&&(U+=16);let ee=0;if(b){const Ai=Math.max(o,w);ee=Math.round(Ai*l)}let ce=0;v&&(ce=r);let fe=0,Ce=fe+ce,Se=Ce+ee,me=Se+U;const Dt=n-ce-ee-U;let ze=!1,Ge=!1,Lt=-1;p!==2&&(d==="inherit"&&m?(ze=!0,Ge=!0):f==="on"||f==="bounded"?Ge=!0:f==="wordWrapColumn"&&(Lt=g));const nt=Rp._computeMinimapLayout({outerWidth:n,outerHeight:s,lineHeight:r,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:y,minimap:x,verticalScrollbarWidth:S,viewLineCount:h,remainingWidth:Dt,isViewportWrapping:Ge},t.memory||new wZ);nt.renderMinimap!==0&&nt.minimapLeft===0&&(fe+=nt.minimapWidth,Ce+=nt.minimapWidth,Se+=nt.minimapWidth,me+=nt.minimapWidth);const Vi=Dt-nt.minimapWidth,wn=Math.max(1,Math.floor((Vi-S-2)/a)),Wn=L?D:0;return Ge&&(Lt=Math.max(1,wn),f==="bounded"&&(Lt=Math.min(Lt,g))),{width:n,height:s,glyphMarginLeft:fe,glyphMarginWidth:ce,lineNumbersLeft:Ce,lineNumbersWidth:ee,decorationsLeft:Se,decorationsWidth:U,contentLeft:me,contentWidth:Vi,minimap:nt,viewportColumn:wn,isWordWrapMinified:ze,isViewportWrapping:Ge,wrappingColumn:Lt,verticalScrollbarWidth:S,horizontalScrollbarHeight:N,overviewRuler:{top:Wn,width:S,height:s-2*Wn,right:0}}}}class Yye extends un{constructor(){const e={enabled:!0};super(56,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:_("codeActions","Enables the code action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Te(e.enabled,this.defaultValue.enabled)}}}class Qye extends un{constructor(){const e={enabled:!0,fontSize:0,fontFamily:""};super(125,"inlayHints",e,{"editor.inlayHints.enabled":{type:"boolean",default:e.enabled,description:_("inlayHints.enable","Enables the inlay hints in the editor.")},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:_("inlayHints.fontSize","Controls font size of inlay hints in the editor. A default of 90% of `#editor.fontSize#` is used when the configured value is less than `5` or greater than the editor font size.")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:_("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the `#editor.fontFamily#` is used.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Te(t.enabled,this.defaultValue.enabled),fontSize:qt.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:$s.string(t.fontFamily,this.defaultValue.fontFamily)}}}class Xye extends dl{constructor(){super(58,"lineHeight",us.lineHeight,e=>dl.clamp(e,0,150),{markdownDescription:_("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}}class Jye extends un{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",renderCharacters:!0,maxColumn:120,scale:1};super(64,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:_("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[_("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),_("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),_("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:_("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:_("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:_("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:_("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:_("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:_("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Te(t.enabled,this.defaultValue.enabled),size:ys(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:ys(t.side,this.defaultValue.side,["right","left"]),showSlider:ys(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Te(t.renderCharacters,this.defaultValue.renderCharacters),scale:qt.clampedInt(t.scale,1,1,3),maxColumn:qt.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}function eCe(i){return i==="ctrlCmd"?ht?"metaKey":"ctrlKey":"altKey"}class tCe extends un{constructor(){super(74,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:_("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:_("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:qt.clampedInt(t.top,0,0,1e3),bottom:qt.clampedInt(t.bottom,0,0,1e3)}}}class iCe extends un{constructor(){const e={enabled:!0,cycle:!1};super(75,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:_("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:_("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Te(t.enabled,this.defaultValue.enabled),cycle:Te(t.cycle,this.defaultValue.cycle)}}}class nCe extends v0{constructor(){super(127)}compute(e,t,n){return e.pixelRatio}}class sCe extends un{constructor(){const e={other:!0,comments:!1,strings:!1};super(78,"quickSuggestions",e,{anyOf:[{type:"boolean"},{type:"object",properties:{strings:{type:"boolean",default:e.strings,description:_("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{type:"boolean",default:e.comments,description:_("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{type:"boolean",default:e.other,description:_("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}}}],default:e,description:_("quickSuggestions","Controls whether suggestions should automatically show up while typing.")}),this.defaultValue=e}validate(e){if(typeof e=="boolean")return e;if(e&&typeof e=="object"){const t=e,n={other:Te(t.other,this.defaultValue.other),comments:Te(t.comments,this.defaultValue.comments),strings:Te(t.strings,this.defaultValue.strings)};return n.other&&n.comments&&n.strings?!0:!n.other&&!n.comments&&!n.strings?!1:n}return this.defaultValue}}class rCe extends un{constructor(){super(59,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[_("lineNumbers.off","Line numbers are not rendered."),_("lineNumbers.on","Line numbers are rendered as absolute number."),_("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),_("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:_("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}}function WO(i){const e=i.get(86);return e==="editable"?i.get(80):e!=="on"}class oCe extends un{constructor(){const e=[],t={type:"number",description:_("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(90,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:_("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:_("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){let t=[];for(let n of e)if(typeof n=="number")t.push({column:qt.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){const s=n;t.push({column:qt.clampedInt(s.column,0,0,1e4),color:s.color})}return t.sort((n,s)=>n.column-s.column),t}return this.defaultValue}}function O9(i,e){if(typeof i!="string")return e;switch(i){case"hidden":return 2;case"visible":return 3;default:return 1}}let aCe=class extends un{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(91,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[_("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),_("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),_("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:_("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[_("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),_("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),_("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:_("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:_("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:_("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:_("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,n=qt.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),s=qt.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:qt.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:O9(t.vertical,this.defaultValue.vertical),horizontal:O9(t.horizontal,this.defaultValue.horizontal),useShadows:Te(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Te(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Te(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Te(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Te(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:qt.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:s,verticalSliderSize:qt.clampedInt(t.verticalSliderSize,s,0,1e3),scrollByPage:Te(t.scrollByPage,this.defaultValue.scrollByPage)}}};class lCe extends un{constructor(){const e={enabled:!0,mode:"subwordSmart"};super(54,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:_("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Te(t.enabled,this.defaultValue.enabled),mode:ys(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"])}}}class cCe extends un{constructor(){const e={enabled:Kn.bracketPairColorizationOptions.enabled};super(12,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,description:_("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use 'workbench.colorCustomizations' to override the bracket highlight colors.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Te(e.enabled,this.defaultValue.enabled)}}}class hCe extends un{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(13,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[_("editor.guides.bracketPairs.true","Enables bracket pair guides."),_("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),_("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:_("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[_("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),_("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),_("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:_("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:_("editor.guides.highlightActiveBracketPair","Controls whether bracket pair guides are enabled or not.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:_("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:"boolean",default:e.highlightActiveIndentation,description:_("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:P9(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:P9(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Te(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Te(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Te(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation)}}}function P9(i,e,t){const n=t.indexOf(i);return n===-1?e:t[n]}class uCe extends un{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(105,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[_("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),_("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:_("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:_("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:_("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:_("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:_("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:_("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:_("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:_("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:_("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:_("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:_("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:ys(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Te(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Te(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Te(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Te(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:Te(t.showIcons,this.defaultValue.showIcons),showStatusBar:Te(t.showStatusBar,this.defaultValue.showStatusBar),preview:Te(t.preview,this.defaultValue.preview),previewMode:ys(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Te(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Te(t.showMethods,this.defaultValue.showMethods),showFunctions:Te(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Te(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Te(t.showDeprecated,this.defaultValue.showDeprecated),showFields:Te(t.showFields,this.defaultValue.showFields),showVariables:Te(t.showVariables,this.defaultValue.showVariables),showClasses:Te(t.showClasses,this.defaultValue.showClasses),showStructs:Te(t.showStructs,this.defaultValue.showStructs),showInterfaces:Te(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Te(t.showModules,this.defaultValue.showModules),showProperties:Te(t.showProperties,this.defaultValue.showProperties),showEvents:Te(t.showEvents,this.defaultValue.showEvents),showOperators:Te(t.showOperators,this.defaultValue.showOperators),showUnits:Te(t.showUnits,this.defaultValue.showUnits),showValues:Te(t.showValues,this.defaultValue.showValues),showConstants:Te(t.showConstants,this.defaultValue.showConstants),showEnums:Te(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Te(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Te(t.showKeywords,this.defaultValue.showKeywords),showWords:Te(t.showWords,this.defaultValue.showWords),showColors:Te(t.showColors,this.defaultValue.showColors),showFiles:Te(t.showFiles,this.defaultValue.showFiles),showReferences:Te(t.showReferences,this.defaultValue.showReferences),showFolders:Te(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Te(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Te(t.showSnippets,this.defaultValue.showSnippets),showUsers:Te(t.showUsers,this.defaultValue.showUsers),showIssues:Te(t.showIssues,this.defaultValue.showIssues)}}}class dCe extends un{constructor(){super(101,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:_("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Te(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}}}class fCe extends v0{constructor(){super(128,[80])}compute(e,t,n){return t.get(80)?!0:e.tabFocusMode}}function gCe(i){switch(i){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}}class pCe extends v0{constructor(){super(130,[129])}compute(e,t,n){const s=t.get(129);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:s.isWordWrapMinified,isViewportWrapping:s.isViewportWrapping,wrappingColumn:s.wrappingColumn}}}const mCe="Consolas, 'Courier New', monospace",_Ce="Menlo, Monaco, 'Courier New', monospace",bCe="'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback'",us={fontFamily:ht?_Ce:As?bCe:mCe,fontWeight:"normal",fontSize:ht?12:14,lineHeight:0,letterSpacing:0},Kn={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!1}},cp=[];function oe(i){return cp[i.id]=i,i}const Xf={acceptSuggestionOnCommitCharacter:oe(new tt(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:_("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:oe(new $i(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",_("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:_("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:oe(new Vye),accessibilityPageSize:oe(new qt(3,"accessibilityPageSize",10,1,1073741824,{description:_("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.")})),ariaLabel:oe(new $s(4,"ariaLabel",_("editorViewAccessibleLabel","Editor content"))),autoClosingBrackets:oe(new $i(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",_("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),_("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:_("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:oe(new $i(6,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",_("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:_("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:oe(new $i(7,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",_("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:_("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:oe(new $i(8,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",_("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),_("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:_("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:oe(new t_(9,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],Bye,{enumDescriptions:[_("editor.autoIndent.none","The editor will not insert indentation automatically."),_("editor.autoIndent.keep","The editor will keep the current line's indentation."),_("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),_("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),_("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:_("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:oe(new tt(10,"automaticLayout",!1)),autoSurround:oe(new $i(11,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[_("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),_("editor.autoSurround.quotes","Surround with quotes but not brackets."),_("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:_("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:oe(new cCe),bracketPairGuides:oe(new hCe),stickyTabStops:oe(new tt(103,"stickyTabStops",!1,{description:_("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:oe(new tt(14,"codeLens",!0,{description:_("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:oe(new $s(15,"codeLensFontFamily","",{description:_("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:oe(new qt(16,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:_("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to `0`, the 90% of `#editor.fontSize#` is used.")})),colorDecorators:oe(new tt(17,"colorDecorators",!0,{description:_("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),columnSelection:oe(new tt(18,"columnSelection",!1,{description:_("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:oe(new Wye),contextmenu:oe(new tt(20,"contextmenu",!0)),copyWithSyntaxHighlighting:oe(new tt(21,"copyWithSyntaxHighlighting",!0,{description:_("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:oe(new t_(22,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],zye,{description:_("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:oe(new tt(23,"cursorSmoothCaretAnimation",!1,{description:_("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:oe(new t_(24,"cursorStyle",mn.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],Hye,{description:_("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:oe(new qt(25,"cursorSurroundingLines",0,0,1073741824,{description:_("cursorSurroundingLines","Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:oe(new $i(26,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[_("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),_("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:_("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:oe(new qt(27,"cursorWidth",0,0,1073741824,{markdownDescription:_("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:oe(new tt(28,"disableLayerHinting",!1)),disableMonospaceOptimizations:oe(new tt(29,"disableMonospaceOptimizations",!1)),domReadOnly:oe(new tt(30,"domReadOnly",!1)),dragAndDrop:oe(new tt(31,"dragAndDrop",!0,{description:_("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:oe(new $ye),extraEditorClassName:oe(new $s(33,"extraEditorClassName","")),fastScrollSensitivity:oe(new dl(34,"fastScrollSensitivity",5,i=>i<=0?5:i,{markdownDescription:_("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:oe(new jye),fixedOverflowWidgets:oe(new tt(36,"fixedOverflowWidgets",!1)),folding:oe(new tt(37,"folding",!0,{description:_("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:oe(new $i(38,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[_("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),_("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:_("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:oe(new tt(39,"foldingHighlight",!0,{description:_("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:oe(new tt(40,"foldingImportsByDefault",!1,{description:_("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),unfoldOnClickAfterEndOfLine:oe(new tt(41,"unfoldOnClickAfterEndOfLine",!1,{description:_("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:oe(new $s(42,"fontFamily",us.fontFamily,{description:_("fontFamily","Controls the font family.")})),fontInfo:oe(new qye),fontLigatures2:oe(new hr),fontSize:oe(new Gye),fontWeight:oe(new al),formatOnPaste:oe(new tt(47,"formatOnPaste",!1,{description:_("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:oe(new tt(48,"formatOnType",!1,{description:_("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:oe(new tt(49,"glyphMargin",!0,{description:_("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:oe(new Kye),hideCursorInOverviewRuler:oe(new tt(51,"hideCursorInOverviewRuler",!1,{description:_("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:oe(new Zye),inDiffEditor:oe(new tt(53,"inDiffEditor",!1)),letterSpacing:oe(new dl(55,"letterSpacing",us.letterSpacing,i=>dl.clamp(i,-5,20),{description:_("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:oe(new Yye),lineDecorationsWidth:oe(new Qf(57,"lineDecorationsWidth",10)),lineHeight:oe(new Xye),lineNumbers:oe(new rCe),lineNumbersMinChars:oe(new qt(60,"lineNumbersMinChars",5,1,300)),linkedEditing:oe(new tt(61,"linkedEditing",!1,{description:_("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.")})),links:oe(new tt(62,"links",!0,{description:_("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:oe(new $i(63,"matchBrackets","always",["always","near","never"],{description:_("matchBrackets","Highlight matching brackets.")})),minimap:oe(new Jye),mouseStyle:oe(new $i(65,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:oe(new dl(66,"mouseWheelScrollSensitivity",1,i=>i===0?1:i,{markdownDescription:_("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:oe(new tt(67,"mouseWheelZoom",!1,{markdownDescription:_("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:oe(new tt(68,"multiCursorMergeOverlapping",!0,{description:_("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:oe(new t_(69,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],eCe,{markdownEnumDescriptions:[_("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),_("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:_({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the multicursor modifier. [Read more](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:oe(new $i(70,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[_("multiCursorPaste.spread","Each cursor pastes a single line of the text."),_("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:_("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),occurrencesHighlight:oe(new tt(71,"occurrencesHighlight",!0,{description:_("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:oe(new tt(72,"overviewRulerBorder",!0,{description:_("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:oe(new qt(73,"overviewRulerLanes",3,0,3)),padding:oe(new tCe),parameterHints:oe(new iCe),peekWidgetDefaultFocus:oe(new $i(76,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[_("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),_("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:_("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:oe(new tt(77,"definitionLinkOpensInPeek",!1,{description:_("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:oe(new sCe),quickSuggestionsDelay:oe(new qt(79,"quickSuggestionsDelay",10,0,1073741824,{description:_("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:oe(new tt(80,"readOnly",!1)),renameOnType:oe(new tt(81,"renameOnType",!1,{description:_("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:_("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:oe(new tt(82,"renderControlCharacters",!0,{description:_("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:oe(new tt(83,"renderFinalNewline",!0,{description:_("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:oe(new $i(84,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",_("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:_("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:oe(new tt(85,"renderLineHighlightOnlyWhenFocus",!1,{description:_("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:oe(new $i(86,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:oe(new $i(87,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",_("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),_("renderWhitespace.selection","Render whitespace characters only on selected text."),_("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:_("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:oe(new qt(88,"revealHorizontalRightPadding",30,0,1e3)),roundedSelection:oe(new tt(89,"roundedSelection",!0,{description:_("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:oe(new oCe),scrollbar:oe(new aCe),scrollBeyondLastColumn:oe(new qt(92,"scrollBeyondLastColumn",5,0,1073741824,{description:_("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:oe(new tt(93,"scrollBeyondLastLine",!0,{description:_("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:oe(new tt(94,"scrollPredominantAxis",!0,{description:_("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:oe(new tt(95,"selectionClipboard",!0,{description:_("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:As})),selectionHighlight:oe(new tt(96,"selectionHighlight",!0,{description:_("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:oe(new tt(97,"selectOnLineNumbers",!0)),showFoldingControls:oe(new $i(98,"showFoldingControls","mouseover",["always","mouseover"],{enumDescriptions:[_("showFoldingControls.always","Always show the folding controls."),_("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:_("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:oe(new tt(99,"showUnused",!0,{description:_("showUnused","Controls fading out of unused code.")})),showDeprecated:oe(new tt(124,"showDeprecated",!0,{description:_("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:oe(new Qye),snippetSuggestions:oe(new $i(100,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[_("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),_("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),_("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),_("snippetSuggestions.none","Do not show snippet suggestions.")],description:_("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:oe(new dCe),smoothScrolling:oe(new tt(102,"smoothScrolling",!1,{description:_("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:oe(new qt(104,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:oe(new uCe),inlineSuggest:oe(new lCe),suggestFontSize:oe(new qt(106,"suggestFontSize",0,0,1e3,{markdownDescription:_("suggestFontSize","Font size for the suggest widget. When set to `0`, the value of `#editor.fontSize#` is used.")})),suggestLineHeight:oe(new qt(107,"suggestLineHeight",0,0,1e3,{markdownDescription:_("suggestLineHeight","Line height for the suggest widget. When set to `0`, the value of `#editor.lineHeight#` is used. The minimum value is 8.")})),suggestOnTriggerCharacters:oe(new tt(108,"suggestOnTriggerCharacters",!0,{description:_("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:oe(new $i(109,"suggestSelection","recentlyUsed",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[_("suggestSelection.first","Always select the first suggestion."),_("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),_("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:_("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:oe(new $i(110,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[_("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),_("tabCompletion.off","Disable tab completions."),_("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:_("tabCompletion","Enables tab completions.")})),tabIndex:oe(new qt(111,"tabIndex",0,-1,1073741824)),unusualLineTerminators:oe(new $i(112,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[_("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),_("unusualLineTerminators.off","Unusual line terminators are ignored."),_("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:_("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:oe(new tt(113,"useShadowDOM",!0)),useTabStops:oe(new tt(114,"useTabStops",!0,{description:_("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordSeparators:oe(new $s(115,"wordSeparators",_Z,{description:_("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:oe(new $i(116,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[_("wordWrap.off","Lines will never wrap."),_("wordWrap.on","Lines will wrap at the viewport width."),_({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),_({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:_({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:oe(new $s(117,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:oe(new $s(118,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:oe(new qt(119,"wordWrapColumn",80,1,1073741824,{markdownDescription:_({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:oe(new $i(120,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:oe(new $i(121,"wordWrapOverride2","inherit",["off","on","inherit"])),wrappingIndent:oe(new t_(122,"wrappingIndent",1,"same",["none","same","indent","deepIndent"],gCe,{enumDescriptions:[_("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),_("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),_("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),_("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:_("wrappingIndent","Controls the indentation of wrapped lines.")})),wrappingStrategy:oe(new $i(123,"wrappingStrategy","simple",["simple","advanced"],{enumDescriptions:[_("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),_("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],description:_("wrappingStrategy","Controls the algorithm that computes wrapping points.")})),editorClassName:oe(new Uye),pixelRatio:oe(new nCe),tabFocusMode:oe(new fCe),layoutInfo:oe(new Rp),wrappingInfo:oe(new pCe)};class vCe{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const yZ=new vCe;function Ke(i){Bu(i)||yZ.onUnexpectedError(i)}function Fo(i){Bu(i)||yZ.onUnexpectedExternalError(i)}function F9(i){if(i instanceof Error){let{name:e,message:t}=i;const n=i.stacktrace||i.stack;return{$isError:!0,name:e,message:t,stack:n}}return i}const rN="Canceled";function Bu(i){return i instanceof Error&&i.name===rN&&i.message===rN}function w0(){const i=new Error(rN);return i.name=i.message,i}function yl(i){return i?new Error(`Illegal argument: ${i}`):new Error("Illegal argument")}function wCe(i){return i?new Error(`Illegal state: ${i}`):new Error("Illegal state")}class yCe extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}function vf(i){const e=this;let t=!1,n;return function(){return t||(t=!0,n=i.apply(e,arguments)),n}}var ct;(function(i){function e(b){return b&&typeof b=="object"&&typeof b[Symbol.iterator]=="function"}i.is=e;const t=Object.freeze([]);function n(){return t}i.empty=n;function*s(b){yield b}i.single=s;function r(b){return b||t}i.from=r;function o(b){return!b||b[Symbol.iterator]().next().done===!0}i.isEmpty=o;function a(b){return b[Symbol.iterator]().next().value}i.first=a;function l(b,w){for(const y of b)if(w(y))return!0;return!1}i.some=l;function c(b,w){for(const y of b)if(w(y))return y}i.find=c;function*h(b,w){for(const y of b)w(y)&&(yield y)}i.filter=h;function*u(b,w){let y=0;for(const x of b)yield w(x,y++)}i.map=u;function*d(...b){for(const w of b)for(const y of w)yield y}i.concat=d;function*f(b){for(const w of b)for(const y of w)yield y}i.concatNested=f;function g(b,w,y){let x=y;for(const k of b)x=w(x,k);return x}i.reduce=g;function*p(b,w,y=b.length){for(w<0&&(w+=b.length),y<0?y+=b.length:y>b.length&&(y=b.length);w<y;w++)yield b[w]}i.slice=p;function m(b,w=Number.POSITIVE_INFINITY){const y=[];if(w===0)return[y,b];const x=b[Symbol.iterator]();for(let k=0;k<w;k++){const S=x.next();if(S.done)return[y,i.empty()];y.push(S.value)}return[y,{[Symbol.iterator](){return x}}]}i.consume=m;function v(b,w,y=(x,k)=>x===k){const x=b[Symbol.iterator](),k=w[Symbol.iterator]();for(;;){const S=x.next(),L=k.next();if(S.done!==L.done)return!1;if(S.done)return!0;if(!y(S.value,L.value))return!1}}i.equals=v})(ct||(ct={}));class CCe extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function CZ(i){return typeof i.dispose=="function"&&i.dispose.length===0}function at(i){if(ct.is(i)){let e=[];for(const t of i)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new CCe(e);return Array.isArray(i)?[]:i}else if(i)return i.dispose(),i}function Kh(...i){return gt(()=>at(i))}function gt(i){return{dispose:vf(()=>{i()})}}class de{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}clear(){try{at(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?de.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}de.DISABLE_DISPOSED_WARNING=!1;class te{constructor(){this._store=new de,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}te.None=Object.freeze({dispose(){}});class Lr{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e}}class SCe{constructor(e){this.object=e}dispose(){}}let Ei=class oN{constructor(e){this.element=e,this.next=oN.Undefined,this.prev=oN.Undefined}};Ei.Undefined=new Ei(void 0);class _r{constructor(){this._first=Ei.Undefined,this._last=Ei.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Ei.Undefined}clear(){let e=this._first;for(;e!==Ei.Undefined;){const t=e.next;e.prev=Ei.Undefined,e.next=Ei.Undefined,e=t}this._first=Ei.Undefined,this._last=Ei.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new Ei(e);if(this._first===Ei.Undefined)this._first=n,this._last=n;else if(t){const r=this._last;this._last=n,n.prev=r,r.next=n}else{const r=this._first;this._first=n,n.next=r,r.prev=n}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(n))}}shift(){if(this._first!==Ei.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Ei.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Ei.Undefined&&e.next!==Ei.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Ei.Undefined&&e.next===Ei.Undefined?(this._first=Ei.Undefined,this._last=Ei.Undefined):e.next===Ei.Undefined?(this._last=this._last.prev,this._last.next=Ei.Undefined):e.prev===Ei.Undefined&&(this._first=this._first.next,this._first.prev=Ei.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Ei.Undefined;)yield e.element,e=e.next}}const xCe=ti.performance&&typeof ti.performance.now=="function";class $c{constructor(e){this._highResolution=xCe&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new $c(e)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?ti.performance.now():Date.now()}}var ke;(function(i){i.None=()=>te.None;function e(b){return(w,y=null,x)=>{let k=!1,S;return S=b(L=>{if(!k)return S?S.dispose():k=!0,w.call(y,L)},null,x),k&&S.dispose(),S}}i.once=e;function t(b,w){return l((y,x=null,k)=>b(S=>y.call(x,w(S)),null,k))}i.map=t;function n(b,w){return l((y,x=null,k)=>b(S=>{w(S),y.call(x,S)},null,k))}i.forEach=n;function s(b,w){return l((y,x=null,k)=>b(S=>w(S)&&y.call(x,S),null,k))}i.filter=s;function r(b){return b}i.signal=r;function o(...b){return(w,y=null,x)=>Kh(...b.map(k=>k(S=>w.call(y,S),null,x)))}i.any=o;function a(b,w,y){let x=y;return t(b,k=>(x=w(x,k),x))}i.reduce=a;function l(b){let w;const y=new z({onFirstListenerAdd(){w=b(y.fire,y)},onLastListenerRemove(){w.dispose()}});return y.event}function c(b,w,y=100,x=!1,k){let S,L,D,N=0;const T=new z({leakWarningThreshold:k,onFirstListenerAdd(){S=b($=>{N++,L=w(L,$),x&&!D&&(T.fire(L),L=void 0),clearTimeout(D),D=setTimeout(()=>{const U=L;L=void 0,D=void 0,(!x||N>1)&&T.fire(U),N=0},y)})},onLastListenerRemove(){S.dispose()}});return T.event}i.debounce=c;function h(b,w=(y,x)=>y===x){let y=!0,x;return s(b,k=>{const S=y||!w(k,x);return y=!1,x=k,S})}i.latch=h;function u(b,w){return[i.filter(b,w),i.filter(b,y=>!w(y))]}i.split=u;function d(b,w=!1,y=[]){let x=y.slice(),k=b(D=>{x?x.push(D):L.fire(D)});const S=()=>{x&&x.forEach(D=>L.fire(D)),x=null},L=new z({onFirstListenerAdd(){k||(k=b(D=>L.fire(D)))},onFirstListenerDidAdd(){x&&(w?setTimeout(S):S())},onLastListenerRemove(){k&&k.dispose(),k=null}});return L.event}i.buffer=d;class f{constructor(w){this.event=w}map(w){return new f(t(this.event,w))}forEach(w){return new f(n(this.event,w))}filter(w){return new f(s(this.event,w))}reduce(w,y){return new f(a(this.event,w,y))}latch(){return new f(h(this.event))}debounce(w,y=100,x=!1,k){return new f(c(this.event,w,y,x,k))}on(w,y,x){return this.event(w,y,x)}once(w,y,x){return e(this.event)(w,y,x)}}function g(b){return new f(b)}i.chain=g;function p(b,w,y=x=>x){const x=(...D)=>L.fire(y(...D)),k=()=>b.on(w,x),S=()=>b.removeListener(w,x),L=new z({onFirstListenerAdd:k,onLastListenerRemove:S});return L.event}i.fromNodeEventEmitter=p;function m(b,w,y=x=>x){const x=(...D)=>L.fire(y(...D)),k=()=>b.addEventListener(w,x),S=()=>b.removeEventListener(w,x),L=new z({onFirstListenerAdd:k,onLastListenerRemove:S});return L.event}i.fromDOMEventEmitter=m;function v(b){return new Promise(w=>e(b)(w))}i.toPromise=v})(ke||(ke={}));class PL{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${PL._idPool++}`}start(e){this._stopWatch=new $c(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}}PL._idPool=0;let z=class{constructor(e){var t;this._disposed=!1,this._options=e,this._leakageMon=void 0,this._perfMon=!((t=this._options)===null||t===void 0)&&t._profName?new PL(this._options._profName):void 0}get event(){return this._event||(this._event=(e,t,n)=>{var s;this._listeners||(this._listeners=new _r);const r=this._listeners.isEmpty();r&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);const o=this._listeners.push(t?[e,t]:e);r&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);const a=(s=this._leakageMon)===null||s===void 0?void 0:s.check(this._listeners.size),l=gt(()=>{a&&a(),this._disposed||(o(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))});return n instanceof de?n.add(l):Array.isArray(n)&&n.push(l),l}),this._event}fire(e){var t,n;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new _r);for(let s of this._listeners)this._deliveryQueue.push([s,e]);for((t=this._perfMon)===null||t===void 0||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[s,r]=this._deliveryQueue.shift();try{typeof s=="function"?s.call(void 0,r):s[0].call(s[1],r)}catch(o){Ke(o)}}(n=this._perfMon)===null||n===void 0||n.stop()}}dispose(){var e,t,n,s,r;this._disposed||(this._disposed=!0,(e=this._listeners)===null||e===void 0||e.clear(),(t=this._deliveryQueue)===null||t===void 0||t.clear(),(s=(n=this._options)===null||n===void 0?void 0:n.onLastListenerRemove)===null||s===void 0||s.call(n),(r=this._leakageMon)===null||r===void 0||r.dispose())}};class cx extends z{constructor(e){super(e),this._isPaused=0,this._eventQueue=new _r,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class DCe extends cx{constructor(e){var t;super(e),this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class zO{constructor(){this.buffers=[]}wrapEvent(e){return(t,n,s)=>e(r=>{const o=this.buffers[this.buffers.length-1];o?o.push(()=>t.call(n,r)):t.call(n,r)},void 0,s)}bufferEvents(e){const t=[];this.buffers.push(t);const n=e();return this.buffers.pop(),t.forEach(s=>s()),n}}class B9{constructor(){this.listening=!1,this.inputEvent=ke.None,this.inputEventListener=te.None,this.emitter=new z({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const SZ=Object.freeze(function(i,e){const t=setTimeout(i.bind(e),0);return{dispose(){clearTimeout(t)}}});var Xt;(function(i){function e(t){return t===i.None||t===i.Cancelled||t instanceof FC?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}i.isCancellationToken=e,i.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ke.None}),i.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:SZ})})(Xt||(Xt={}));class FC{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?SZ:(this._emitter||(this._emitter=new z),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class Na{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new FC),this._token}cancel(){this._token?this._token instanceof FC&&this._token.cancel():this._token=Xt.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof FC&&this._token.dispose():this._token=Xt.None}}class HO{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const BC=new HO,aN=new HO,lN=new HO,xZ=new Array(230),LCe=Object.create(null),kCe=Object.create(null),UO=[];for(let i=0;i<=193;i++)UO[i]=-1;(function(){const i="",e=[[0,1,0,"None",0,"unknown",0,"VK_UNKNOWN",i,i],[0,1,1,"Hyper",0,i,0,i,i,i],[0,1,2,"Super",0,i,0,i,i,i],[0,1,3,"Fn",0,i,0,i,i,i],[0,1,4,"FnLock",0,i,0,i,i,i],[0,1,5,"Suspend",0,i,0,i,i,i],[0,1,6,"Resume",0,i,0,i,i,i],[0,1,7,"Turbo",0,i,0,i,i,i],[0,1,8,"Sleep",0,i,0,"VK_SLEEP",i,i],[0,1,9,"WakeUp",0,i,0,i,i,i],[31,0,10,"KeyA",31,"A",65,"VK_A",i,i],[32,0,11,"KeyB",32,"B",66,"VK_B",i,i],[33,0,12,"KeyC",33,"C",67,"VK_C",i,i],[34,0,13,"KeyD",34,"D",68,"VK_D",i,i],[35,0,14,"KeyE",35,"E",69,"VK_E",i,i],[36,0,15,"KeyF",36,"F",70,"VK_F",i,i],[37,0,16,"KeyG",37,"G",71,"VK_G",i,i],[38,0,17,"KeyH",38,"H",72,"VK_H",i,i],[39,0,18,"KeyI",39,"I",73,"VK_I",i,i],[40,0,19,"KeyJ",40,"J",74,"VK_J",i,i],[41,0,20,"KeyK",41,"K",75,"VK_K",i,i],[42,0,21,"KeyL",42,"L",76,"VK_L",i,i],[43,0,22,"KeyM",43,"M",77,"VK_M",i,i],[44,0,23,"KeyN",44,"N",78,"VK_N",i,i],[45,0,24,"KeyO",45,"O",79,"VK_O",i,i],[46,0,25,"KeyP",46,"P",80,"VK_P",i,i],[47,0,26,"KeyQ",47,"Q",81,"VK_Q",i,i],[48,0,27,"KeyR",48,"R",82,"VK_R",i,i],[49,0,28,"KeyS",49,"S",83,"VK_S",i,i],[50,0,29,"KeyT",50,"T",84,"VK_T",i,i],[51,0,30,"KeyU",51,"U",85,"VK_U",i,i],[52,0,31,"KeyV",52,"V",86,"VK_V",i,i],[53,0,32,"KeyW",53,"W",87,"VK_W",i,i],[54,0,33,"KeyX",54,"X",88,"VK_X",i,i],[55,0,34,"KeyY",55,"Y",89,"VK_Y",i,i],[56,0,35,"KeyZ",56,"Z",90,"VK_Z",i,i],[22,0,36,"Digit1",22,"1",49,"VK_1",i,i],[23,0,37,"Digit2",23,"2",50,"VK_2",i,i],[24,0,38,"Digit3",24,"3",51,"VK_3",i,i],[25,0,39,"Digit4",25,"4",52,"VK_4",i,i],[26,0,40,"Digit5",26,"5",53,"VK_5",i,i],[27,0,41,"Digit6",27,"6",54,"VK_6",i,i],[28,0,42,"Digit7",28,"7",55,"VK_7",i,i],[29,0,43,"Digit8",29,"8",56,"VK_8",i,i],[30,0,44,"Digit9",30,"9",57,"VK_9",i,i],[21,0,45,"Digit0",21,"0",48,"VK_0",i,i],[3,1,46,"Enter",3,"Enter",13,"VK_RETURN",i,i],[9,1,47,"Escape",9,"Escape",27,"VK_ESCAPE",i,i],[1,1,48,"Backspace",1,"Backspace",8,"VK_BACK",i,i],[2,1,49,"Tab",2,"Tab",9,"VK_TAB",i,i],[10,1,50,"Space",10,"Space",32,"VK_SPACE",i,i],[83,0,51,"Minus",83,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[81,0,52,"Equal",81,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[87,0,53,"BracketLeft",87,"[",219,"VK_OEM_4","[","OEM_4"],[89,0,54,"BracketRight",89,"]",221,"VK_OEM_6","]","OEM_6"],[88,0,55,"Backslash",88,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,0,56,"IntlHash",0,i,0,i,i,i],[80,0,57,"Semicolon",80,";",186,"VK_OEM_1",";","OEM_1"],[90,0,58,"Quote",90,"'",222,"VK_OEM_7","'","OEM_7"],[86,0,59,"Backquote",86,"`",192,"VK_OEM_3","`","OEM_3"],[82,0,60,"Comma",82,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[84,0,61,"Period",84,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[85,0,62,"Slash",85,"/",191,"VK_OEM_2","/","OEM_2"],[8,1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",i,i],[59,1,64,"F1",59,"F1",112,"VK_F1",i,i],[60,1,65,"F2",60,"F2",113,"VK_F2",i,i],[61,1,66,"F3",61,"F3",114,"VK_F3",i,i],[62,1,67,"F4",62,"F4",115,"VK_F4",i,i],[63,1,68,"F5",63,"F5",116,"VK_F5",i,i],[64,1,69,"F6",64,"F6",117,"VK_F6",i,i],[65,1,70,"F7",65,"F7",118,"VK_F7",i,i],[66,1,71,"F8",66,"F8",119,"VK_F8",i,i],[67,1,72,"F9",67,"F9",120,"VK_F9",i,i],[68,1,73,"F10",68,"F10",121,"VK_F10",i,i],[69,1,74,"F11",69,"F11",122,"VK_F11",i,i],[70,1,75,"F12",70,"F12",123,"VK_F12",i,i],[0,1,76,"PrintScreen",0,i,0,i,i,i],[79,1,77,"ScrollLock",79,"ScrollLock",145,"VK_SCROLL",i,i],[7,1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",i,i],[19,1,79,"Insert",19,"Insert",45,"VK_INSERT",i,i],[14,1,80,"Home",14,"Home",36,"VK_HOME",i,i],[11,1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",i,i],[20,1,82,"Delete",20,"Delete",46,"VK_DELETE",i,i],[13,1,83,"End",13,"End",35,"VK_END",i,i],[12,1,84,"PageDown",12,"PageDown",34,"VK_NEXT",i,i],[17,1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",i],[15,1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",i],[18,1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",i],[16,1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",i],[78,1,89,"NumLock",78,"NumLock",144,"VK_NUMLOCK",i,i],[108,1,90,"NumpadDivide",108,"NumPad_Divide",111,"VK_DIVIDE",i,i],[103,1,91,"NumpadMultiply",103,"NumPad_Multiply",106,"VK_MULTIPLY",i,i],[106,1,92,"NumpadSubtract",106,"NumPad_Subtract",109,"VK_SUBTRACT",i,i],[104,1,93,"NumpadAdd",104,"NumPad_Add",107,"VK_ADD",i,i],[3,1,94,"NumpadEnter",3,i,0,i,i,i],[94,1,95,"Numpad1",94,"NumPad1",97,"VK_NUMPAD1",i,i],[95,1,96,"Numpad2",95,"NumPad2",98,"VK_NUMPAD2",i,i],[96,1,97,"Numpad3",96,"NumPad3",99,"VK_NUMPAD3",i,i],[97,1,98,"Numpad4",97,"NumPad4",100,"VK_NUMPAD4",i,i],[98,1,99,"Numpad5",98,"NumPad5",101,"VK_NUMPAD5",i,i],[99,1,100,"Numpad6",99,"NumPad6",102,"VK_NUMPAD6",i,i],[100,1,101,"Numpad7",100,"NumPad7",103,"VK_NUMPAD7",i,i],[101,1,102,"Numpad8",101,"NumPad8",104,"VK_NUMPAD8",i,i],[102,1,103,"Numpad9",102,"NumPad9",105,"VK_NUMPAD9",i,i],[93,1,104,"Numpad0",93,"NumPad0",96,"VK_NUMPAD0",i,i],[107,1,105,"NumpadDecimal",107,"NumPad_Decimal",110,"VK_DECIMAL",i,i],[92,0,106,"IntlBackslash",92,"OEM_102",226,"VK_OEM_102",i,i],[58,1,107,"ContextMenu",58,"ContextMenu",93,i,i,i],[0,1,108,"Power",0,i,0,i,i,i],[0,1,109,"NumpadEqual",0,i,0,i,i,i],[71,1,110,"F13",71,"F13",124,"VK_F13",i,i],[72,1,111,"F14",72,"F14",125,"VK_F14",i,i],[73,1,112,"F15",73,"F15",126,"VK_F15",i,i],[74,1,113,"F16",74,"F16",127,"VK_F16",i,i],[75,1,114,"F17",75,"F17",128,"VK_F17",i,i],[76,1,115,"F18",76,"F18",129,"VK_F18",i,i],[77,1,116,"F19",77,"F19",130,"VK_F19",i,i],[0,1,117,"F20",0,i,0,"VK_F20",i,i],[0,1,118,"F21",0,i,0,"VK_F21",i,i],[0,1,119,"F22",0,i,0,"VK_F22",i,i],[0,1,120,"F23",0,i,0,"VK_F23",i,i],[0,1,121,"F24",0,i,0,"VK_F24",i,i],[0,1,122,"Open",0,i,0,i,i,i],[0,1,123,"Help",0,i,0,i,i,i],[0,1,124,"Select",0,i,0,i,i,i],[0,1,125,"Again",0,i,0,i,i,i],[0,1,126,"Undo",0,i,0,i,i,i],[0,1,127,"Cut",0,i,0,i,i,i],[0,1,128,"Copy",0,i,0,i,i,i],[0,1,129,"Paste",0,i,0,i,i,i],[0,1,130,"Find",0,i,0,i,i,i],[0,1,131,"AudioVolumeMute",112,"AudioVolumeMute",173,"VK_VOLUME_MUTE",i,i],[0,1,132,"AudioVolumeUp",113,"AudioVolumeUp",175,"VK_VOLUME_UP",i,i],[0,1,133,"AudioVolumeDown",114,"AudioVolumeDown",174,"VK_VOLUME_DOWN",i,i],[105,1,134,"NumpadComma",105,"NumPad_Separator",108,"VK_SEPARATOR",i,i],[110,0,135,"IntlRo",110,"ABNT_C1",193,"VK_ABNT_C1",i,i],[0,1,136,"KanaMode",0,i,0,i,i,i],[0,0,137,"IntlYen",0,i,0,i,i,i],[0,1,138,"Convert",0,i,0,i,i,i],[0,1,139,"NonConvert",0,i,0,i,i,i],[0,1,140,"Lang1",0,i,0,i,i,i],[0,1,141,"Lang2",0,i,0,i,i,i],[0,1,142,"Lang3",0,i,0,i,i,i],[0,1,143,"Lang4",0,i,0,i,i,i],[0,1,144,"Lang5",0,i,0,i,i,i],[0,1,145,"Abort",0,i,0,i,i,i],[0,1,146,"Props",0,i,0,i,i,i],[0,1,147,"NumpadParenLeft",0,i,0,i,i,i],[0,1,148,"NumpadParenRight",0,i,0,i,i,i],[0,1,149,"NumpadBackspace",0,i,0,i,i,i],[0,1,150,"NumpadMemoryStore",0,i,0,i,i,i],[0,1,151,"NumpadMemoryRecall",0,i,0,i,i,i],[0,1,152,"NumpadMemoryClear",0,i,0,i,i,i],[0,1,153,"NumpadMemoryAdd",0,i,0,i,i,i],[0,1,154,"NumpadMemorySubtract",0,i,0,i,i,i],[0,1,155,"NumpadClear",0,i,0,i,i,i],[0,1,156,"NumpadClearEntry",0,i,0,i,i,i],[5,1,0,i,5,"Ctrl",17,"VK_CONTROL",i,i],[4,1,0,i,4,"Shift",16,"VK_SHIFT",i,i],[6,1,0,i,6,"Alt",18,"VK_MENU",i,i],[57,1,0,i,57,"Meta",0,"VK_COMMAND",i,i],[5,1,157,"ControlLeft",5,i,0,"VK_LCONTROL",i,i],[4,1,158,"ShiftLeft",4,i,0,"VK_LSHIFT",i,i],[6,1,159,"AltLeft",6,i,0,"VK_LMENU",i,i],[57,1,160,"MetaLeft",57,i,0,"VK_LWIN",i,i],[5,1,161,"ControlRight",5,i,0,"VK_RCONTROL",i,i],[4,1,162,"ShiftRight",4,i,0,"VK_RSHIFT",i,i],[6,1,163,"AltRight",6,i,0,"VK_RMENU",i,i],[57,1,164,"MetaRight",57,i,0,"VK_RWIN",i,i],[0,1,165,"BrightnessUp",0,i,0,i,i,i],[0,1,166,"BrightnessDown",0,i,0,i,i,i],[0,1,167,"MediaPlay",0,i,0,i,i,i],[0,1,168,"MediaRecord",0,i,0,i,i,i],[0,1,169,"MediaFastForward",0,i,0,i,i,i],[0,1,170,"MediaRewind",0,i,0,i,i,i],[114,1,171,"MediaTrackNext",119,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",i,i],[115,1,172,"MediaTrackPrevious",120,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",i,i],[116,1,173,"MediaStop",121,"MediaStop",178,"VK_MEDIA_STOP",i,i],[0,1,174,"Eject",0,i,0,i,i,i],[117,1,175,"MediaPlayPause",122,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",i,i],[0,1,176,"MediaSelect",123,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",i,i],[0,1,177,"LaunchMail",124,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",i,i],[0,1,178,"LaunchApp2",125,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",i,i],[0,1,179,"LaunchApp1",0,i,0,"VK_MEDIA_LAUNCH_APP1",i,i],[0,1,180,"SelectTask",0,i,0,i,i,i],[0,1,181,"LaunchScreenSaver",0,i,0,i,i,i],[0,1,182,"BrowserSearch",115,"BrowserSearch",170,"VK_BROWSER_SEARCH",i,i],[0,1,183,"BrowserHome",116,"BrowserHome",172,"VK_BROWSER_HOME",i,i],[112,1,184,"BrowserBack",117,"BrowserBack",166,"VK_BROWSER_BACK",i,i],[113,1,185,"BrowserForward",118,"BrowserForward",167,"VK_BROWSER_FORWARD",i,i],[0,1,186,"BrowserStop",0,i,0,"VK_BROWSER_STOP",i,i],[0,1,187,"BrowserRefresh",0,i,0,"VK_BROWSER_REFRESH",i,i],[0,1,188,"BrowserFavorites",0,i,0,"VK_BROWSER_FAVORITES",i,i],[0,1,189,"ZoomToggle",0,i,0,i,i,i],[0,1,190,"MailReply",0,i,0,i,i,i],[0,1,191,"MailForward",0,i,0,i,i,i],[0,1,192,"MailSend",0,i,0,i,i,i],[109,1,0,i,109,"KeyInComposition",229,i,i,i],[111,1,0,i,111,"ABNT_C2",194,"VK_ABNT_C2",i,i],[91,1,0,i,91,"OEM_8",223,"VK_OEM_8",i,i],[0,1,0,i,0,i,0,"VK_CLEAR",i,i],[0,1,0,i,0,i,0,"VK_KANA",i,i],[0,1,0,i,0,i,0,"VK_HANGUL",i,i],[0,1,0,i,0,i,0,"VK_JUNJA",i,i],[0,1,0,i,0,i,0,"VK_FINAL",i,i],[0,1,0,i,0,i,0,"VK_HANJA",i,i],[0,1,0,i,0,i,0,"VK_KANJI",i,i],[0,1,0,i,0,i,0,"VK_CONVERT",i,i],[0,1,0,i,0,i,0,"VK_NONCONVERT",i,i],[0,1,0,i,0,i,0,"VK_ACCEPT",i,i],[0,1,0,i,0,i,0,"VK_MODECHANGE",i,i],[0,1,0,i,0,i,0,"VK_SELECT",i,i],[0,1,0,i,0,i,0,"VK_PRINT",i,i],[0,1,0,i,0,i,0,"VK_EXECUTE",i,i],[0,1,0,i,0,i,0,"VK_SNAPSHOT",i,i],[0,1,0,i,0,i,0,"VK_HELP",i,i],[0,1,0,i,0,i,0,"VK_APPS",i,i],[0,1,0,i,0,i,0,"VK_PROCESSKEY",i,i],[0,1,0,i,0,i,0,"VK_PACKET",i,i],[0,1,0,i,0,i,0,"VK_DBE_SBCSCHAR",i,i],[0,1,0,i,0,i,0,"VK_DBE_DBCSCHAR",i,i],[0,1,0,i,0,i,0,"VK_ATTN",i,i],[0,1,0,i,0,i,0,"VK_CRSEL",i,i],[0,1,0,i,0,i,0,"VK_EXSEL",i,i],[0,1,0,i,0,i,0,"VK_EREOF",i,i],[0,1,0,i,0,i,0,"VK_PLAY",i,i],[0,1,0,i,0,i,0,"VK_ZOOM",i,i],[0,1,0,i,0,i,0,"VK_NONAME",i,i],[0,1,0,i,0,i,0,"VK_PA1",i,i],[0,1,0,i,0,i,0,"VK_OEM_CLEAR",i,i]];let t=[],n=[];for(const s of e){const[r,o,a,l,c,h,u,d,f,g]=s;if(n[a]||(n[a]=!0,LCe[l]=a,kCe[l.toLowerCase()]=a,o&&(UO[a]=c)),!t[c]){if(t[c]=!0,!h)throw new Error(`String representation missing for key code ${c} around scan code ${l}`);BC.define(c,h),aN.define(c,f||h),lN.define(c,g||f||h)}u&&(xZ[u]=c)}})();var Dd;(function(i){function e(a){return BC.keyCodeToStr(a)}i.toString=e;function t(a){return BC.strToKeyCode(a)}i.fromString=t;function n(a){return aN.keyCodeToStr(a)}i.toUserSettingsUS=n;function s(a){return lN.keyCodeToStr(a)}i.toUserSettingsGeneral=s;function r(a){return aN.strToKeyCode(a)||lN.strToKeyCode(a)}i.fromUserSettings=r;function o(a){if(a>=93&&a<=108)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return BC.keyCodeToStr(a)}i.toElectronAccelerator=o})(Dd||(Dd={}));function Ns(i,e){const t=(e&65535)<<16>>>0;return(i|t)>>>0}let Op;if(typeof ti.vscode<"u"&&typeof ti.vscode.process<"u"){const i=ti.vscode.process;Op={get platform(){return i.platform},get arch(){return i.arch},get env(){return i.env},cwd(){return i.cwd()},nextTick(e){return nN(e)}}}else typeof process<"u"?Op={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()},nextTick(i){return process.nextTick(i)}}:Op={get platform(){return On?"win32":ht?"darwin":"linux"},get arch(){},nextTick(i){return nN(i)},get env(){return{}},cwd(){return"/"}};const cN=Op.cwd,ACe=Op.env,Jf=Op.platform,ECe=65,ICe=97,TCe=90,NCe=122,Zh=46,$n=47,rr=92,ah=58,MCe=63;class DZ extends Error{constructor(e,t,n){let s;typeof t=="string"&&t.indexOf("not ")===0?(s="must not be",t=t.replace(/^not /,"")):s="must be";const r=e.indexOf(".")!==-1?"property":"argument";let o=`The "${e}" ${r} ${s} of type ${t}`;o+=`. Received type ${typeof n}`,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function on(i,e){if(typeof i!="string")throw new DZ(e,"string",i)}function bt(i){return i===$n||i===rr}function hN(i){return i===$n}function lh(i){return i>=ECe&&i<=TCe||i>=ICe&&i<=NCe}function hx(i,e,t,n){let s="",r=0,o=-1,a=0,l=0;for(let c=0;c<=i.length;++c){if(c<i.length)l=i.charCodeAt(c);else{if(n(l))break;l=$n}if(n(l)){if(!(o===c-1||a===1))if(a===2){if(s.length<2||r!==2||s.charCodeAt(s.length-1)!==Zh||s.charCodeAt(s.length-2)!==Zh){if(s.length>2){const h=s.lastIndexOf(t);h===-1?(s="",r=0):(s=s.slice(0,h),r=s.length-1-s.lastIndexOf(t)),o=c,a=0;continue}else if(s.length!==0){s="",r=0,o=c,a=0;continue}}e&&(s+=s.length>0?`${t}..`:"..",r=2)}else s.length>0?s+=`${t}${i.slice(o+1,c)}`:s=i.slice(o+1,c),r=c-o-1;o=c,a=0}else l===Zh&&a!==-1?++a:a=-1}return s}function LZ(i,e){if(e===null||typeof e!="object")throw new DZ("pathObject","Object",e);const t=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${n}`:`${t}${i}${n}`:n}const Ks={resolve(...i){let e="",t="",n=!1;for(let s=i.length-1;s>=-1;s--){let r;if(s>=0){if(r=i[s],on(r,"path"),r.length===0)continue}else e.length===0?r=cN():(r=ACe[`=${e}`]||cN(),(r===void 0||r.slice(0,2).toLowerCase()!==e.toLowerCase()&&r.charCodeAt(2)===rr)&&(r=`${e}\\`));const o=r.length;let a=0,l="",c=!1;const h=r.charCodeAt(0);if(o===1)bt(h)&&(a=1,c=!0);else if(bt(h))if(c=!0,bt(r.charCodeAt(1))){let u=2,d=u;for(;u<o&&!bt(r.charCodeAt(u));)u++;if(u<o&&u!==d){const f=r.slice(d,u);for(d=u;u<o&&bt(r.charCodeAt(u));)u++;if(u<o&&u!==d){for(d=u;u<o&&!bt(r.charCodeAt(u));)u++;(u===o||u!==d)&&(l=`\\\\${f}\\${r.slice(d,u)}`,a=u)}}}else a=1;else lh(h)&&r.charCodeAt(1)===ah&&(l=r.slice(0,2),a=2,o>2&&bt(r.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${r.slice(a)}\\${t}`,n=c,c&&e.length>0)break}return t=hx(t,!n,"\\",bt),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(i){on(i,"path");const e=i.length;if(e===0)return".";let t=0,n,s=!1;const r=i.charCodeAt(0);if(e===1)return hN(r)?"\\":i;if(bt(r))if(s=!0,bt(i.charCodeAt(1))){let a=2,l=a;for(;a<e&&!bt(i.charCodeAt(a));)a++;if(a<e&&a!==l){const c=i.slice(l,a);for(l=a;a<e&&bt(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!bt(i.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${i.slice(l)}\\`;a!==l&&(n=`\\\\${c}\\${i.slice(l,a)}`,t=a)}}}else t=1;else lh(r)&&i.charCodeAt(1)===ah&&(n=i.slice(0,2),t=2,e>2&&bt(i.charCodeAt(2))&&(s=!0,t=3));let o=t<e?hx(i.slice(t),!s,"\\",bt):"";return o.length===0&&!s&&(o="."),o.length>0&&bt(i.charCodeAt(e-1))&&(o+="\\"),n===void 0?s?`\\${o}`:o:s?`${n}\\${o}`:`${n}${o}`},isAbsolute(i){on(i,"path");const e=i.length;if(e===0)return!1;const t=i.charCodeAt(0);return bt(t)||e>2&&lh(t)&&i.charCodeAt(1)===ah&&bt(i.charCodeAt(2))},join(...i){if(i.length===0)return".";let e,t;for(let r=0;r<i.length;++r){const o=i[r];on(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let n=!0,s=0;if(typeof t=="string"&&bt(t.charCodeAt(0))){++s;const r=t.length;r>1&&bt(t.charCodeAt(1))&&(++s,r>2&&(bt(t.charCodeAt(2))?++s:n=!1))}if(n){for(;s<e.length&&bt(e.charCodeAt(s));)s++;s>=2&&(e=`\\${e.slice(s)}`)}return Ks.normalize(e)},relative(i,e){if(on(i,"from"),on(e,"to"),i===e)return"";const t=Ks.resolve(i),n=Ks.resolve(e);if(t===n||(i=t.toLowerCase(),e=n.toLowerCase(),i===e))return"";let s=0;for(;s<i.length&&i.charCodeAt(s)===rr;)s++;let r=i.length;for(;r-1>s&&i.charCodeAt(r-1)===rr;)r--;const o=r-s;let a=0;for(;a<e.length&&e.charCodeAt(a)===rr;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===rr;)l--;const c=l-a,h=o<c?o:c;let u=-1,d=0;for(;d<h;d++){const g=i.charCodeAt(s+d);if(g!==e.charCodeAt(a+d))break;g===rr&&(u=d)}if(d!==h){if(u===-1)return n}else{if(c>h){if(e.charCodeAt(a+d)===rr)return n.slice(a+d+1);if(d===2)return n.slice(a+d)}o>h&&(i.charCodeAt(s+d)===rr?u=d:d===2&&(u=3)),u===-1&&(u=0)}let f="";for(d=s+u+1;d<=r;++d)(d===r||i.charCodeAt(d)===rr)&&(f+=f.length===0?"..":"\\..");return a+=u,f.length>0?`${f}${n.slice(a,l)}`:(n.charCodeAt(a)===rr&&++a,n.slice(a,l))},toNamespacedPath(i){if(typeof i!="string")return i;if(i.length===0)return"";const e=Ks.resolve(i);if(e.length<=2)return i;if(e.charCodeAt(0)===rr){if(e.charCodeAt(1)===rr){const t=e.charCodeAt(2);if(t!==MCe&&t!==Zh)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(lh(e.charCodeAt(0))&&e.charCodeAt(1)===ah&&e.charCodeAt(2)===rr)return`\\\\?\\${e}`;return i},dirname(i){on(i,"path");const e=i.length;if(e===0)return".";let t=-1,n=0;const s=i.charCodeAt(0);if(e===1)return bt(s)?i:".";if(bt(s)){if(t=n=1,bt(i.charCodeAt(1))){let a=2,l=a;for(;a<e&&!bt(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&bt(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!bt(i.charCodeAt(a));)a++;if(a===e)return i;a!==l&&(t=n=a+1)}}}}else lh(s)&&i.charCodeAt(1)===ah&&(t=e>2&&bt(i.charCodeAt(2))?3:2,n=t);let r=-1,o=!0;for(let a=e-1;a>=n;--a)if(bt(i.charCodeAt(a))){if(!o){r=a;break}}else o=!1;if(r===-1){if(t===-1)return".";r=t}return i.slice(0,r)},basename(i,e){e!==void 0&&on(e,"ext"),on(i,"path");let t=0,n=-1,s=!0,r;if(i.length>=2&&lh(i.charCodeAt(0))&&i.charCodeAt(1)===ah&&(t=2),e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let o=e.length-1,a=-1;for(r=i.length-1;r>=t;--r){const l=i.charCodeAt(r);if(bt(l)){if(!s){t=r+1;break}}else a===-1&&(s=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=r):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(r=i.length-1;r>=t;--r)if(bt(i.charCodeAt(r))){if(!s){t=r+1;break}}else n===-1&&(s=!1,n=r+1);return n===-1?"":i.slice(t,n)},extname(i){on(i,"path");let e=0,t=-1,n=0,s=-1,r=!0,o=0;i.length>=2&&i.charCodeAt(1)===ah&&lh(i.charCodeAt(0))&&(e=n=2);for(let a=i.length-1;a>=e;--a){const l=i.charCodeAt(a);if(bt(l)){if(!r){n=a+1;break}continue}s===-1&&(r=!1,s=a+1),l===Zh?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||s===-1||o===0||o===1&&t===s-1&&t===n+1?"":i.slice(t,s)},format:LZ.bind(null,"\\"),parse(i){on(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.length;let n=0,s=i.charCodeAt(0);if(t===1)return bt(s)?(e.root=e.dir=i,e):(e.base=e.name=i,e);if(bt(s)){if(n=1,bt(i.charCodeAt(1))){let u=2,d=u;for(;u<t&&!bt(i.charCodeAt(u));)u++;if(u<t&&u!==d){for(d=u;u<t&&bt(i.charCodeAt(u));)u++;if(u<t&&u!==d){for(d=u;u<t&&!bt(i.charCodeAt(u));)u++;u===t?n=u:u!==d&&(n=u+1)}}}}else if(lh(s)&&i.charCodeAt(1)===ah){if(t<=2)return e.root=e.dir=i,e;if(n=2,bt(i.charCodeAt(2))){if(t===3)return e.root=e.dir=i,e;n=3}}n>0&&(e.root=i.slice(0,n));let r=-1,o=n,a=-1,l=!0,c=i.length-1,h=0;for(;c>=n;--c){if(s=i.charCodeAt(c),bt(s)){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),s===Zh?r===-1?r=c:h!==1&&(h=1):r!==-1&&(h=-1)}return a!==-1&&(r===-1||h===0||h===1&&r===a-1&&r===o+1?e.base=e.name=i.slice(o,a):(e.name=i.slice(o,r),e.base=i.slice(o,a),e.ext=i.slice(r,a))),o>0&&o!==n?e.dir=i.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},Qi={resolve(...i){let e="",t=!1;for(let n=i.length-1;n>=-1&&!t;n--){const s=n>=0?i[n]:cN();on(s,"path"),s.length!==0&&(e=`${s}/${e}`,t=s.charCodeAt(0)===$n)}return e=hx(e,!t,"/",hN),t?`/${e}`:e.length>0?e:"."},normalize(i){if(on(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===$n,t=i.charCodeAt(i.length-1)===$n;return i=hx(i,!e,"/",hN),i.length===0?e?"/":t?"./":".":(t&&(i+="/"),e?`/${i}`:i)},isAbsolute(i){return on(i,"path"),i.length>0&&i.charCodeAt(0)===$n},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){const n=i[t];on(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":Qi.normalize(e)},relative(i,e){if(on(i,"from"),on(e,"to"),i===e||(i=Qi.resolve(i),e=Qi.resolve(e),i===e))return"";const t=1,n=i.length,s=n-t,r=1,o=e.length-r,a=s<o?s:o;let l=-1,c=0;for(;c<a;c++){const u=i.charCodeAt(t+c);if(u!==e.charCodeAt(r+c))break;u===$n&&(l=c)}if(c===a)if(o>a){if(e.charCodeAt(r+c)===$n)return e.slice(r+c+1);if(c===0)return e.slice(r+c)}else s>a&&(i.charCodeAt(t+c)===$n?l=c:c===0&&(l=0));let h="";for(c=t+l+1;c<=n;++c)(c===n||i.charCodeAt(c)===$n)&&(h+=h.length===0?"..":"/..");return`${h}${e.slice(r+l)}`},toNamespacedPath(i){return i},dirname(i){if(on(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===$n;let t=-1,n=!0;for(let s=i.length-1;s>=1;--s)if(i.charCodeAt(s)===$n){if(!n){t=s;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":i.slice(0,t)},basename(i,e){e!==void 0&&on(e,"ext"),on(i,"path");let t=0,n=-1,s=!0,r;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let o=e.length-1,a=-1;for(r=i.length-1;r>=0;--r){const l=i.charCodeAt(r);if(l===$n){if(!s){t=r+1;break}}else a===-1&&(s=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=r):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(r=i.length-1;r>=0;--r)if(i.charCodeAt(r)===$n){if(!s){t=r+1;break}}else n===-1&&(s=!1,n=r+1);return n===-1?"":i.slice(t,n)},extname(i){on(i,"path");let e=-1,t=0,n=-1,s=!0,r=0;for(let o=i.length-1;o>=0;--o){const a=i.charCodeAt(o);if(a===$n){if(!s){t=o+1;break}continue}n===-1&&(s=!1,n=o+1),a===Zh?e===-1?e=o:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||n===-1||r===0||r===1&&e===n-1&&e===t+1?"":i.slice(e,n)},format:LZ.bind(null,"/"),parse(i){on(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.charCodeAt(0)===$n;let n;t?(e.root="/",n=1):n=0;let s=-1,r=0,o=-1,a=!0,l=i.length-1,c=0;for(;l>=n;--l){const h=i.charCodeAt(l);if(h===$n){if(!a){r=l+1;break}continue}o===-1&&(a=!1,o=l+1),h===Zh?s===-1?s=l:c!==1&&(c=1):s!==-1&&(c=-1)}if(o!==-1){const h=r===0&&t?1:r;s===-1||c===0||c===1&&s===o-1&&s===r+1?e.base=e.name=i.slice(h,o):(e.name=i.slice(h,s),e.base=i.slice(h,o),e.ext=i.slice(s,o))}return r>0?e.dir=i.slice(0,r-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Qi.win32=Ks.win32=Ks;Qi.posix=Ks.posix=Qi;const $O=Jf==="win32"?Ks.normalize:Qi.normalize,RCe=Jf==="win32"?Ks.resolve:Qi.resolve,OCe=Jf==="win32"?Ks.relative:Qi.relative,kZ=Jf==="win32"?Ks.dirname:Qi.dirname,Vd=Jf==="win32"?Ks.basename:Qi.basename,PCe=Jf==="win32"?Ks.extname:Qi.extname,VC=Jf==="win32"?Ks.sep:Qi.sep,FCe=/^\w[\w\d+.-]*$/,BCe=/^\//,VCe=/^\/\//;function V9(i,e){if(!i.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${i.authority}", path: "${i.path}", query: "${i.query}", fragment: "${i.fragment}"}`);if(i.scheme&&!FCe.test(i.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(i.path){if(i.authority){if(!BCe.test(i.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(VCe.test(i.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function WCe(i,e){return!i&&!e?"file":i}function zCe(i,e){switch(i){case"https":case"http":case"file":e?e[0]!==Qo&&(e=Qo+e):e=Qo;break}return e}const pi="",Qo="/",HCe=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class We{constructor(e,t,n,s,r,o=!1){typeof e=="object"?(this.scheme=e.scheme||pi,this.authority=e.authority||pi,this.path=e.path||pi,this.query=e.query||pi,this.fragment=e.fragment||pi):(this.scheme=WCe(e,o),this.authority=t||pi,this.path=zCe(this.scheme,n||pi),this.query=s||pi,this.fragment=r||pi,V9(this,o))}static isUri(e){return e instanceof We?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}get fsPath(){return ux(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:s,query:r,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=pi),n===void 0?n=this.authority:n===null&&(n=pi),s===void 0?s=this.path:s===null&&(s=pi),r===void 0?r=this.query:r===null&&(r=pi),o===void 0?o=this.fragment:o===null&&(o=pi),t===this.scheme&&n===this.authority&&s===this.path&&r===this.query&&o===this.fragment?this:new Ng(t,n,s,r,o)}static parse(e,t=!1){const n=HCe.exec(e);return n?new Ng(n[2]||pi,_y(n[4]||pi),_y(n[5]||pi),_y(n[7]||pi),_y(n[9]||pi),t):new Ng(pi,pi,pi,pi,pi)}static file(e){let t=pi;if(On&&(e=e.replace(/\\/g,Qo)),e[0]===Qo&&e[1]===Qo){const n=e.indexOf(Qo,2);n===-1?(t=e.substring(2),e=Qo):(t=e.substring(2,n),e=e.substring(n)||Qo)}return new Ng("file",t,e,pi,pi)}static from(e){const t=new Ng(e.scheme,e.authority,e.path,e.query,e.fragment);return V9(t,!0),t}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return On&&e.scheme==="file"?n=We.file(Ks.join(ux(e,!0),...t)).path:n=Qi.join(e.path,...t),e.with({path:n})}toString(e=!1){return uN(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof We)return e;{const t=new Ng(e);return t._formatted=e.external,t._fsPath=e._sep===AZ?e.fsPath:null,t}}else return e}}const AZ=On?1:void 0;class Ng extends We{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=ux(this,!1)),this._fsPath}toString(e=!1){return e?uN(this,!0):(this._formatted||(this._formatted=uN(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=AZ),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const EZ={[58]:"%3A",[47]:"%2F",[63]:"%3F",[35]:"%23",[91]:"%5B",[93]:"%5D",[64]:"%40",[33]:"%21",[36]:"%24",[38]:"%26",[39]:"%27",[40]:"%28",[41]:"%29",[42]:"%2A",[43]:"%2B",[44]:"%2C",[59]:"%3B",[61]:"%3D",[32]:"%20"};function W9(i,e){let t,n=-1;for(let s=0;s<i.length;s++){const r=i.charCodeAt(s);if(r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||r===45||r===46||r===95||r===126||e&&r===47)n!==-1&&(t+=encodeURIComponent(i.substring(n,s)),n=-1),t!==void 0&&(t+=i.charAt(s));else{t===void 0&&(t=i.substr(0,s));const o=EZ[r];o!==void 0?(n!==-1&&(t+=encodeURIComponent(i.substring(n,s)),n=-1),t+=o):n===-1&&(n=s)}}return n!==-1&&(t+=encodeURIComponent(i.substring(n))),t!==void 0?t:i}function UCe(i){let e;for(let t=0;t<i.length;t++){const n=i.charCodeAt(t);n===35||n===63?(e===void 0&&(e=i.substr(0,t)),e+=EZ[n]):e!==void 0&&(e+=i[t])}return e!==void 0?e:i}function ux(i,e){let t;return i.authority&&i.path.length>1&&i.scheme==="file"?t=`//${i.authority}${i.path}`:i.path.charCodeAt(0)===47&&(i.path.charCodeAt(1)>=65&&i.path.charCodeAt(1)<=90||i.path.charCodeAt(1)>=97&&i.path.charCodeAt(1)<=122)&&i.path.charCodeAt(2)===58?e?t=i.path.substr(1):t=i.path[1].toLowerCase()+i.path.substr(2):t=i.path,On&&(t=t.replace(/\//g,"\\")),t}function uN(i,e){const t=e?UCe:W9;let n="",{scheme:s,authority:r,path:o,query:a,fragment:l}=i;if(s&&(n+=s,n+=":"),(r||s==="file")&&(n+=Qo,n+=Qo),r){let c=r.indexOf("@");if(c!==-1){const h=r.substr(0,c);r=r.substr(c+1),c=h.indexOf(":"),c===-1?n+=t(h,!1):(n+=t(h.substr(0,c),!1),n+=":",n+=t(h.substr(c+1),!1)),n+="@"}r=r.toLowerCase(),c=r.indexOf(":"),c===-1?n+=t(r,!1):(n+=t(r.substr(0,c),!1),n+=r.substr(c))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const c=o.charCodeAt(1);c>=65&&c<=90&&(o=`/${String.fromCharCode(c+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const c=o.charCodeAt(0);c>=65&&c<=90&&(o=`${String.fromCharCode(c+32)}:${o.substr(2)}`)}n+=t(o,!0)}return a&&(n+="?",n+=t(a,!1)),l&&(n+="#",n+=e?l:W9(l,!1)),n}function IZ(i){try{return decodeURIComponent(i)}catch{return i.length>3?i.substr(0,3)+IZ(i.substr(3)):i}}const z9=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function _y(i){return i.match(z9)?i.replace(z9,e=>IZ(e)):i}class q{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new q(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return q.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return q.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return q.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){let n=e.lineNumber|0,s=t.lineNumber|0;if(n===s){let r=e.column|0,o=t.column|0;return r-o}return n-s}clone(){return new q(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new q(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}}let F=class Un{constructor(e,t,n,s){e>n||e===n&&t>s?(this.startLineNumber=n,this.startColumn=s,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=s)}isEmpty(){return Un.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Un.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}containsRange(e){return Un.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return Un.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return Un.plusRange(this,e)}static plusRange(e,t){let n,s,r,o;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,s=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,s=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,s=e.startColumn),t.endLineNumber>e.endLineNumber?(r=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(r=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(r=e.endLineNumber,o=e.endColumn),new Un(n,s,r,o)}intersectRanges(e){return Un.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn,a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,h=t.endColumn;return n<a?(n=a,s=l):n===a&&(s=Math.max(s,l)),r>c?(r=c,o=h):r===c&&(o=Math.min(o,h)),n>r||n===r&&s>o?null:new Un(n,s,r,o)}equalsRange(e){return Un.equalsRange(this,e)}static equalsRange(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return Un.getEndPosition(this)}static getEndPosition(e){return new q(e.endLineNumber,e.endColumn)}getStartPosition(){return Un.getStartPosition(this)}static getStartPosition(e){return new q(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new Un(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new Un(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return Un.collapseToStart(this)}static collapseToStart(e){return new Un(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}static fromPositions(e,t=e){return new Un(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new Un(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const r=e.startLineNumber|0,o=t.startLineNumber|0;if(r===o){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,h=t.endLineNumber|0;if(c===h){const u=e.endColumn|0,d=t.endColumn|0;return u-d}return c-h}return a-l}return r-o}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}};class Ve extends F{constructor(e,t,n,s){super(e,t,n,s),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Ve.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new Ve(this.startLineNumber,this.startColumn,e,t):new Ve(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new q(this.positionLineNumber,this.positionColumn)}setStartPosition(e,t){return this.getDirection()===0?new Ve(e,t,this.endLineNumber,this.endColumn):new Ve(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new Ve(e.lineNumber,e.column,t.lineNumber,t.column)}static liftSelection(e){return new Ve(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,s=e.length;n<s;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,s,r){return r===0?new Ve(e,t,n,s):new Ve(n,s,e,t)}}let FL=class{constructor(e,t,n){this._tokenBrand=void 0,this.offset=e|0,this.type=t,this.language=n}toString(){return"("+this.offset+", "+this.type+")"}};class jO{constructor(e,t){this._tokenizationResultBrand=void 0,this.tokens=e,this.endState=t}}class BL{constructor(e,t){this._tokenizationResult2Brand=void 0,this.tokens=e,this.endState=t}}var dN;(function(i){i[i.Unknown=0]="Unknown",i[i.Disabled=1]="Disabled",i[i.Enabled=2]="Enabled"})(dN||(dN={}));var fN;(function(i){i[i.KeepWhitespace=1]="KeepWhitespace",i[i.InsertAsSnippet=4]="InsertAsSnippet"})(fN||(fN={}));var gN;(function(i){i[i.Method=0]="Method",i[i.Function=1]="Function",i[i.Constructor=2]="Constructor",i[i.Field=3]="Field",i[i.Variable=4]="Variable",i[i.Class=5]="Class",i[i.Struct=6]="Struct",i[i.Interface=7]="Interface",i[i.Module=8]="Module",i[i.Property=9]="Property",i[i.Event=10]="Event",i[i.Operator=11]="Operator",i[i.Unit=12]="Unit",i[i.Value=13]="Value",i[i.Constant=14]="Constant",i[i.Enum=15]="Enum",i[i.EnumMember=16]="EnumMember",i[i.Keyword=17]="Keyword",i[i.Text=18]="Text",i[i.Color=19]="Color",i[i.File=20]="File",i[i.Reference=21]="Reference",i[i.Customcolor=22]="Customcolor",i[i.Folder=23]="Folder",i[i.TypeParameter=24]="TypeParameter",i[i.User=25]="User",i[i.Issue=26]="Issue",i[i.Snippet=27]="Snippet"})(gN||(gN={}));var pN;(function(i){i[i.Deprecated=1]="Deprecated"})(pN||(pN={}));var mN;(function(i){i[i.Invoke=0]="Invoke",i[i.TriggerCharacter=1]="TriggerCharacter",i[i.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(mN||(mN={}));var _N;(function(i){i[i.EXACT=0]="EXACT",i[i.ABOVE=1]="ABOVE",i[i.BELOW=2]="BELOW"})(_N||(_N={}));var bN;(function(i){i[i.NotSet=0]="NotSet",i[i.ContentFlush=1]="ContentFlush",i[i.RecoverFromMarkers=2]="RecoverFromMarkers",i[i.Explicit=3]="Explicit",i[i.Paste=4]="Paste",i[i.Undo=5]="Undo",i[i.Redo=6]="Redo"})(bN||(bN={}));var vN;(function(i){i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(vN||(vN={}));var wN;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(wN||(wN={}));var yN;(function(i){i[i.None=0]="None",i[i.Keep=1]="Keep",i[i.Brackets=2]="Brackets",i[i.Advanced=3]="Advanced",i[i.Full=4]="Full"})(yN||(yN={}));var CN;(function(i){i[i.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",i[i.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",i[i.accessibilitySupport=2]="accessibilitySupport",i[i.accessibilityPageSize=3]="accessibilityPageSize",i[i.ariaLabel=4]="ariaLabel",i[i.autoClosingBrackets=5]="autoClosingBrackets",i[i.autoClosingDelete=6]="autoClosingDelete",i[i.autoClosingOvertype=7]="autoClosingOvertype",i[i.autoClosingQuotes=8]="autoClosingQuotes",i[i.autoIndent=9]="autoIndent",i[i.automaticLayout=10]="automaticLayout",i[i.autoSurround=11]="autoSurround",i[i.bracketPairColorization=12]="bracketPairColorization",i[i.guides=13]="guides",i[i.codeLens=14]="codeLens",i[i.codeLensFontFamily=15]="codeLensFontFamily",i[i.codeLensFontSize=16]="codeLensFontSize",i[i.colorDecorators=17]="colorDecorators",i[i.columnSelection=18]="columnSelection",i[i.comments=19]="comments",i[i.contextmenu=20]="contextmenu",i[i.copyWithSyntaxHighlighting=21]="copyWithSyntaxHighlighting",i[i.cursorBlinking=22]="cursorBlinking",i[i.cursorSmoothCaretAnimation=23]="cursorSmoothCaretAnimation",i[i.cursorStyle=24]="cursorStyle",i[i.cursorSurroundingLines=25]="cursorSurroundingLines",i[i.cursorSurroundingLinesStyle=26]="cursorSurroundingLinesStyle",i[i.cursorWidth=27]="cursorWidth",i[i.disableLayerHinting=28]="disableLayerHinting",i[i.disableMonospaceOptimizations=29]="disableMonospaceOptimizations",i[i.domReadOnly=30]="domReadOnly",i[i.dragAndDrop=31]="dragAndDrop",i[i.emptySelectionClipboard=32]="emptySelectionClipboard",i[i.extraEditorClassName=33]="extraEditorClassName",i[i.fastScrollSensitivity=34]="fastScrollSensitivity",i[i.find=35]="find",i[i.fixedOverflowWidgets=36]="fixedOverflowWidgets",i[i.folding=37]="folding",i[i.foldingStrategy=38]="foldingStrategy",i[i.foldingHighlight=39]="foldingHighlight",i[i.foldingImportsByDefault=40]="foldingImportsByDefault",i[i.unfoldOnClickAfterEndOfLine=41]="unfoldOnClickAfterEndOfLine",i[i.fontFamily=42]="fontFamily",i[i.fontInfo=43]="fontInfo",i[i.fontLigatures=44]="fontLigatures",i[i.fontSize=45]="fontSize",i[i.fontWeight=46]="fontWeight",i[i.formatOnPaste=47]="formatOnPaste",i[i.formatOnType=48]="formatOnType",i[i.glyphMargin=49]="glyphMargin",i[i.gotoLocation=50]="gotoLocation",i[i.hideCursorInOverviewRuler=51]="hideCursorInOverviewRuler",i[i.hover=52]="hover",i[i.inDiffEditor=53]="inDiffEditor",i[i.inlineSuggest=54]="inlineSuggest",i[i.letterSpacing=55]="letterSpacing",i[i.lightbulb=56]="lightbulb",i[i.lineDecorationsWidth=57]="lineDecorationsWidth",i[i.lineHeight=58]="lineHeight",i[i.lineNumbers=59]="lineNumbers",i[i.lineNumbersMinChars=60]="lineNumbersMinChars",i[i.linkedEditing=61]="linkedEditing",i[i.links=62]="links",i[i.matchBrackets=63]="matchBrackets",i[i.minimap=64]="minimap",i[i.mouseStyle=65]="mouseStyle",i[i.mouseWheelScrollSensitivity=66]="mouseWheelScrollSensitivity",i[i.mouseWheelZoom=67]="mouseWheelZoom",i[i.multiCursorMergeOverlapping=68]="multiCursorMergeOverlapping",i[i.multiCursorModifier=69]="multiCursorModifier",i[i.multiCursorPaste=70]="multiCursorPaste",i[i.occurrencesHighlight=71]="occurrencesHighlight",i[i.overviewRulerBorder=72]="overviewRulerBorder",i[i.overviewRulerLanes=73]="overviewRulerLanes",i[i.padding=74]="padding",i[i.parameterHints=75]="parameterHints",i[i.peekWidgetDefaultFocus=76]="peekWidgetDefaultFocus",i[i.definitionLinkOpensInPeek=77]="definitionLinkOpensInPeek",i[i.quickSuggestions=78]="quickSuggestions",i[i.quickSuggestionsDelay=79]="quickSuggestionsDelay",i[i.readOnly=80]="readOnly",i[i.renameOnType=81]="renameOnType",i[i.renderControlCharacters=82]="renderControlCharacters",i[i.renderFinalNewline=83]="renderFinalNewline",i[i.renderLineHighlight=84]="renderLineHighlight",i[i.renderLineHighlightOnlyWhenFocus=85]="renderLineHighlightOnlyWhenFocus",i[i.renderValidationDecorations=86]="renderValidationDecorations",i[i.renderWhitespace=87]="renderWhitespace",i[i.revealHorizontalRightPadding=88]="revealHorizontalRightPadding",i[i.roundedSelection=89]="roundedSelection",i[i.rulers=90]="rulers",i[i.scrollbar=91]="scrollbar",i[i.scrollBeyondLastColumn=92]="scrollBeyondLastColumn",i[i.scrollBeyondLastLine=93]="scrollBeyondLastLine",i[i.scrollPredominantAxis=94]="scrollPredominantAxis",i[i.selectionClipboard=95]="selectionClipboard",i[i.selectionHighlight=96]="selectionHighlight",i[i.selectOnLineNumbers=97]="selectOnLineNumbers",i[i.showFoldingControls=98]="showFoldingControls",i[i.showUnused=99]="showUnused",i[i.snippetSuggestions=100]="snippetSuggestions",i[i.smartSelect=101]="smartSelect",i[i.smoothScrolling=102]="smoothScrolling",i[i.stickyTabStops=103]="stickyTabStops",i[i.stopRenderingLineAfter=104]="stopRenderingLineAfter",i[i.suggest=105]="suggest",i[i.suggestFontSize=106]="suggestFontSize",i[i.suggestLineHeight=107]="suggestLineHeight",i[i.suggestOnTriggerCharacters=108]="suggestOnTriggerCharacters",i[i.suggestSelection=109]="suggestSelection",i[i.tabCompletion=110]="tabCompletion",i[i.tabIndex=111]="tabIndex",i[i.unusualLineTerminators=112]="unusualLineTerminators",i[i.useShadowDOM=113]="useShadowDOM",i[i.useTabStops=114]="useTabStops",i[i.wordSeparators=115]="wordSeparators",i[i.wordWrap=116]="wordWrap",i[i.wordWrapBreakAfterCharacters=117]="wordWrapBreakAfterCharacters",i[i.wordWrapBreakBeforeCharacters=118]="wordWrapBreakBeforeCharacters",i[i.wordWrapColumn=119]="wordWrapColumn",i[i.wordWrapOverride1=120]="wordWrapOverride1",i[i.wordWrapOverride2=121]="wordWrapOverride2",i[i.wrappingIndent=122]="wrappingIndent",i[i.wrappingStrategy=123]="wrappingStrategy",i[i.showDeprecated=124]="showDeprecated",i[i.inlayHints=125]="inlayHints",i[i.editorClassName=126]="editorClassName",i[i.pixelRatio=127]="pixelRatio",i[i.tabFocusMode=128]="tabFocusMode",i[i.layoutInfo=129]="layoutInfo",i[i.wrappingInfo=130]="wrappingInfo"})(CN||(CN={}));var SN;(function(i){i[i.TextDefined=0]="TextDefined",i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(SN||(SN={}));var xN;(function(i){i[i.LF=0]="LF",i[i.CRLF=1]="CRLF"})(xN||(xN={}));var DN;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(DN||(DN={}));var LN;(function(i){i[i.Other=0]="Other",i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(LN||(LN={}));var kN;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(kN||(kN={}));var AN;(function(i){i[i.DependsOnKbLayout=-1]="DependsOnKbLayout",i[i.Unknown=0]="Unknown",i[i.Backspace=1]="Backspace",i[i.Tab=2]="Tab",i[i.Enter=3]="Enter",i[i.Shift=4]="Shift",i[i.Ctrl=5]="Ctrl",i[i.Alt=6]="Alt",i[i.PauseBreak=7]="PauseBreak",i[i.CapsLock=8]="CapsLock",i[i.Escape=9]="Escape",i[i.Space=10]="Space",i[i.PageUp=11]="PageUp",i[i.PageDown=12]="PageDown",i[i.End=13]="End",i[i.Home=14]="Home",i[i.LeftArrow=15]="LeftArrow",i[i.UpArrow=16]="UpArrow",i[i.RightArrow=17]="RightArrow",i[i.DownArrow=18]="DownArrow",i[i.Insert=19]="Insert",i[i.Delete=20]="Delete",i[i.Digit0=21]="Digit0",i[i.Digit1=22]="Digit1",i[i.Digit2=23]="Digit2",i[i.Digit3=24]="Digit3",i[i.Digit4=25]="Digit4",i[i.Digit5=26]="Digit5",i[i.Digit6=27]="Digit6",i[i.Digit7=28]="Digit7",i[i.Digit8=29]="Digit8",i[i.Digit9=30]="Digit9",i[i.KeyA=31]="KeyA",i[i.KeyB=32]="KeyB",i[i.KeyC=33]="KeyC",i[i.KeyD=34]="KeyD",i[i.KeyE=35]="KeyE",i[i.KeyF=36]="KeyF",i[i.KeyG=37]="KeyG",i[i.KeyH=38]="KeyH",i[i.KeyI=39]="KeyI",i[i.KeyJ=40]="KeyJ",i[i.KeyK=41]="KeyK",i[i.KeyL=42]="KeyL",i[i.KeyM=43]="KeyM",i[i.KeyN=44]="KeyN",i[i.KeyO=45]="KeyO",i[i.KeyP=46]="KeyP",i[i.KeyQ=47]="KeyQ",i[i.KeyR=48]="KeyR",i[i.KeyS=49]="KeyS",i[i.KeyT=50]="KeyT",i[i.KeyU=51]="KeyU",i[i.KeyV=52]="KeyV",i[i.KeyW=53]="KeyW",i[i.KeyX=54]="KeyX",i[i.KeyY=55]="KeyY",i[i.KeyZ=56]="KeyZ",i[i.Meta=57]="Meta",i[i.ContextMenu=58]="ContextMenu",i[i.F1=59]="F1",i[i.F2=60]="F2",i[i.F3=61]="F3",i[i.F4=62]="F4",i[i.F5=63]="F5",i[i.F6=64]="F6",i[i.F7=65]="F7",i[i.F8=66]="F8",i[i.F9=67]="F9",i[i.F10=68]="F10",i[i.F11=69]="F11",i[i.F12=70]="F12",i[i.F13=71]="F13",i[i.F14=72]="F14",i[i.F15=73]="F15",i[i.F16=74]="F16",i[i.F17=75]="F17",i[i.F18=76]="F18",i[i.F19=77]="F19",i[i.NumLock=78]="NumLock",i[i.ScrollLock=79]="ScrollLock",i[i.Semicolon=80]="Semicolon",i[i.Equal=81]="Equal",i[i.Comma=82]="Comma",i[i.Minus=83]="Minus",i[i.Period=84]="Period",i[i.Slash=85]="Slash",i[i.Backquote=86]="Backquote",i[i.BracketLeft=87]="BracketLeft",i[i.Backslash=88]="Backslash",i[i.BracketRight=89]="BracketRight",i[i.Quote=90]="Quote",i[i.OEM_8=91]="OEM_8",i[i.IntlBackslash=92]="IntlBackslash",i[i.Numpad0=93]="Numpad0",i[i.Numpad1=94]="Numpad1",i[i.Numpad2=95]="Numpad2",i[i.Numpad3=96]="Numpad3",i[i.Numpad4=97]="Numpad4",i[i.Numpad5=98]="Numpad5",i[i.Numpad6=99]="Numpad6",i[i.Numpad7=100]="Numpad7",i[i.Numpad8=101]="Numpad8",i[i.Numpad9=102]="Numpad9",i[i.NumpadMultiply=103]="NumpadMultiply",i[i.NumpadAdd=104]="NumpadAdd",i[i.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",i[i.NumpadSubtract=106]="NumpadSubtract",i[i.NumpadDecimal=107]="NumpadDecimal",i[i.NumpadDivide=108]="NumpadDivide",i[i.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",i[i.ABNT_C1=110]="ABNT_C1",i[i.ABNT_C2=111]="ABNT_C2",i[i.AudioVolumeMute=112]="AudioVolumeMute",i[i.AudioVolumeUp=113]="AudioVolumeUp",i[i.AudioVolumeDown=114]="AudioVolumeDown",i[i.BrowserSearch=115]="BrowserSearch",i[i.BrowserHome=116]="BrowserHome",i[i.BrowserBack=117]="BrowserBack",i[i.BrowserForward=118]="BrowserForward",i[i.MediaTrackNext=119]="MediaTrackNext",i[i.MediaTrackPrevious=120]="MediaTrackPrevious",i[i.MediaStop=121]="MediaStop",i[i.MediaPlayPause=122]="MediaPlayPause",i[i.LaunchMediaPlayer=123]="LaunchMediaPlayer",i[i.LaunchMail=124]="LaunchMail",i[i.LaunchApp2=125]="LaunchApp2",i[i.MAX_VALUE=126]="MAX_VALUE"})(AN||(AN={}));var EN;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(EN||(EN={}));var IN;(function(i){i[i.Unnecessary=1]="Unnecessary",i[i.Deprecated=2]="Deprecated"})(IN||(IN={}));var TN;(function(i){i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter"})(TN||(TN={}));var NN;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.TEXTAREA=1]="TEXTAREA",i[i.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",i[i.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",i[i.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",i[i.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",i[i.CONTENT_TEXT=6]="CONTENT_TEXT",i[i.CONTENT_EMPTY=7]="CONTENT_EMPTY",i[i.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",i[i.CONTENT_WIDGET=9]="CONTENT_WIDGET",i[i.OVERVIEW_RULER=10]="OVERVIEW_RULER",i[i.SCROLLBAR=11]="SCROLLBAR",i[i.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",i[i.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(NN||(NN={}));var MN;(function(i){i[i.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",i[i.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",i[i.TOP_CENTER=2]="TOP_CENTER"})(MN||(MN={}));var RN;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(RN||(RN={}));var ON;(function(i){i[i.Off=0]="Off",i[i.On=1]="On",i[i.Relative=2]="Relative",i[i.Interval=3]="Interval",i[i.Custom=4]="Custom"})(ON||(ON={}));var PN;(function(i){i[i.None=0]="None",i[i.Text=1]="Text",i[i.Blocks=2]="Blocks"})(PN||(PN={}));var FN;(function(i){i[i.Smooth=0]="Smooth",i[i.Immediate=1]="Immediate"})(FN||(FN={}));var BN;(function(i){i[i.Auto=1]="Auto",i[i.Hidden=2]="Hidden",i[i.Visible=3]="Visible"})(BN||(BN={}));var VN;(function(i){i[i.LTR=0]="LTR",i[i.RTL=1]="RTL"})(VN||(VN={}));var WN;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(WN||(WN={}));var zN;(function(i){i[i.File=0]="File",i[i.Module=1]="Module",i[i.Namespace=2]="Namespace",i[i.Package=3]="Package",i[i.Class=4]="Class",i[i.Method=5]="Method",i[i.Property=6]="Property",i[i.Field=7]="Field",i[i.Constructor=8]="Constructor",i[i.Enum=9]="Enum",i[i.Interface=10]="Interface",i[i.Function=11]="Function",i[i.Variable=12]="Variable",i[i.Constant=13]="Constant",i[i.String=14]="String",i[i.Number=15]="Number",i[i.Boolean=16]="Boolean",i[i.Array=17]="Array",i[i.Object=18]="Object",i[i.Key=19]="Key",i[i.Null=20]="Null",i[i.EnumMember=21]="EnumMember",i[i.Struct=22]="Struct",i[i.Event=23]="Event",i[i.Operator=24]="Operator",i[i.TypeParameter=25]="TypeParameter"})(zN||(zN={}));var HN;(function(i){i[i.Deprecated=1]="Deprecated"})(HN||(HN={}));var UN;(function(i){i[i.Hidden=0]="Hidden",i[i.Blink=1]="Blink",i[i.Smooth=2]="Smooth",i[i.Phase=3]="Phase",i[i.Expand=4]="Expand",i[i.Solid=5]="Solid"})(UN||(UN={}));var $N;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})($N||($N={}));var jN;(function(i){i[i.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",i[i.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",i[i.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",i[i.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(jN||(jN={}));var qN;(function(i){i[i.None=0]="None",i[i.Same=1]="Same",i[i.Indent=2]="Indent",i[i.DeepIndent=3]="DeepIndent"})(qN||(qN={}));class _w{static chord(e,t){return Ns(e,t)}}_w.CtrlCmd=2048;_w.Shift=1024;_w.Alt=512;_w.WinCtrl=256;function TZ(){return{editor:void 0,languages:void 0,CancellationTokenSource:Na,Emitter:z,KeyCode:AN,KeyMod:_w,Position:q,Range:F,Selection:Ve,SelectionDirection:VN,MarkerSeverity:EN,MarkerTag:IN,Uri:We,Token:FL}}var sa;(function(i){i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=e})(sa||(sa={}));const Wt=mt("instantiationService");function NZ(i,e,t,n){e[sa.DI_TARGET]===e?e[sa.DI_DEPENDENCIES].push({id:i,index:t,optional:n}):(e[sa.DI_DEPENDENCIES]=[{id:i,index:t,optional:n}],e[sa.DI_TARGET]=e)}function mt(i){if(sa.serviceIds.has(i))return sa.serviceIds.get(i);const e=function(t,n,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");NZ(e,t,s,!1)};return e.toString=()=>i,sa.serviceIds.set(i,e),e}function $Ce(i){return function(e,t,n){if(arguments.length!==3)throw new Error("@optional-decorator can only be used to decorate a parameter");NZ(i,e,n,!0)}}const ii=mt("codeEditorService");class wf{constructor(){this._zoomLevel=0,this._lastZoomLevelChangeTime=0,this._onDidChangeZoomLevel=new z,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this._zoomFactor=1}getZoomLevel(){return this._zoomLevel}getTimeSinceLastZoomLevelChanged(){return Date.now()-this._lastZoomLevelChangeTime}getZoomFactor(){return this._zoomFactor}getPixelRatio(){let e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}}wf.INSTANCE=new wf;function GN(){return wf.INSTANCE.getZoomLevel()}function jCe(){return wf.INSTANCE.getTimeSinceLastZoomLevelChanged()}function MZ(i){return wf.INSTANCE.onDidChangeZoomLevel(i)}function qCe(){return wf.INSTANCE.getZoomFactor()}function dx(){return wf.INSTANCE.getPixelRatio()}const bw=navigator.userAgent,ks=bw.indexOf("Firefox")>=0,Wd=bw.indexOf("AppleWebKit")>=0,fx=bw.indexOf("Chrome")>=0,ko=!fx&&bw.indexOf("Safari")>=0,GCe=!fx&&!ko&&Wd,A_=bw.indexOf("Android")>=0,RZ=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches,VL={clipboard:{writeText:Mp||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:Mp||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>Mp||RZ?0:navigator.keyboard||ko?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)};function KN(i,e){if(i===0)return null;const t=(i&65535)>>>0,n=(i&4294901760)>>>16;return n!==0?new gx([xA(t,e),xA(n,e)]):new gx([xA(t,e)])}function xA(i,e){const t=!!(i&2048),n=!!(i&256),s=e===2?n:t,r=!!(i&1024),o=!!(i&512),a=e===2?t:n,l=i&255;return new yf(s,r,o,a,l)}class yf{constructor(e,t,n,s,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=s,this.keyCode=r}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toChord(){return new gx([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class gx{constructor(e){if(e.length===0)throw yl("parts");this.parts=e}}class KCe{constructor(e,t,n,s,r,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=s,this.keyLabel=r,this.keyAriaLabel=o}}class ZCe{}function YCe(i){if(i.charCode){let t=String.fromCharCode(i.charCode).toUpperCase();return Dd.fromString(t)}const e=i.keyCode;if(e===3)return 7;if(ks){if(e===59)return 80;if(e===107)return 81;if(e===109)return 83;if(ht&&e===224)return 57}else if(Wd){if(e===91)return 57;if(ht&&e===93)return 57;if(!ht&&e===92)return 57}return xZ[e]||0}const QCe=ht?256:2048,XCe=512,JCe=1024,eSe=ht?2048:256;class li{constructor(e){this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=YCe(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=QCe),this.altKey&&(t|=XCe),this.shiftKey&&(t|=JCe),this.metaKey&&(t|=eSe),t|=e,t}_computeRuntimeKeybinding(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new yf(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}let ZN=!1,Mg=null;function tSe(i){if(!i.parent||i.parent===i)return null;try{let e=i.location,t=i.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return ZN=!0,null}catch{return ZN=!0,null}return i.parent}class YN{static getSameOriginWindowChain(){if(!Mg){Mg=[];let e=window,t;do t=tSe(e),t?Mg.push({window:e,iframeElement:e.frameElement||null}):Mg.push({window:e,iframeElement:null}),e=t;while(e)}return Mg.slice(0)}static hasDifferentOriginAncestor(){return Mg||this.getSameOriginWindowChain(),ZN}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,s=0,r=this.getSameOriginWindowChain();for(const o of r){if(n+=o.window.scrollY,s+=o.window.scrollX,o.window===t||!o.iframeElement)break;let a=o.iframeElement.getBoundingClientRect();n+=a.top,s+=a.left}return{top:n,left:s}}}class zr{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);let t=YN.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class vm{constructor(e,t=0,n=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t,e){let s=e,r=e;if(typeof s.wheelDeltaY<"u")this.deltaY=s.wheelDeltaY/120;else if(typeof r.VERTICAL_AXIS<"u"&&r.axis===r.VERTICAL_AXIS)this.deltaY=-r.detail/3;else if(e.type==="wheel"){const o=e;o.deltaMode===o.DOM_DELTA_LINE?ks&&!ht?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof s.wheelDeltaX<"u")ko&&On?this.deltaX=-(s.wheelDeltaX/120):this.deltaX=s.wheelDeltaX/120;else if(typeof r.HORIZONTAL_AXIS<"u"&&r.axis===r.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const o=e;o.deltaMode===o.DOM_DELTA_LINE?ks&&!ht?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}}var H9=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function iSe(i){return!!i&&typeof i.then=="function"}function kr(i){const e=new Na,t=i(e.token),n=new Promise((s,r)=>{const o=e.token.onCancellationRequested(()=>{o.dispose(),e.dispose(),r(w0())});Promise.resolve(t).then(a=>{o.dispose(),e.dispose(),s(a)},a=>{o.dispose(),e.dispose(),r(a)})});return new class{cancel(){e.cancel()}then(s,r){return n.then(s,r)}catch(s){return this.then(void 0,s)}finally(s){return n.finally(s)}}}function OZ(i,e,t){return Promise.race([i,new Promise(n=>e.onCancellationRequested(()=>n(t)))])}class nSe{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{this.queuedPromise=null;const n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(s=>{this.activePromise=null,t(s)},s=>{this.activePromise=null,n(s)})})}}class y0{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((n,s)=>{this.doResolve=n,this.doReject=s}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const n=this.task;return this.task=null,n()}})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve&&this.doResolve(null)},t),this.completionPromise}isTriggered(){return this.timeout!==null}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(w0()),this.completionPromise=null)}cancelTimeout(){this.timeout!==null&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancel()}}class sSe{constructor(e){this.delayer=new y0(e),this.throttler=new nSe}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}dispose(){this.delayer.dispose()}}function xv(i,e){return e?new Promise((t,n)=>{const s=setTimeout(()=>{r.dispose(),t()},i),r=e.onCancellationRequested(()=>{clearTimeout(s),r.dispose(),n(w0())})}):kr(t=>xv(i,t))}function wm(i,e=0){const t=setTimeout(i,e);return gt(()=>clearTimeout(t))}class Ms{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class vw{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}class fi{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}let QN;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?QN=i=>{const e=setTimeout(()=>{const n=Date.now()+15;i(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,n-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0,clearTimeout(e))}}}:QN=(i,e)=>{const t=requestIdleCallback(i,typeof e=="number"?{timeout:e}:void 0);let n=!1;return{dispose(){n||(n=!0,cancelIdleCallback(t))}}}})();class ab{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=QN(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}var XN;(function(i){function e(n){return H9(this,void 0,void 0,function*(){let s;const r=yield Promise.all(n.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return r})}i.settled=e;function t(n){return new Promise((s,r)=>H9(this,void 0,void 0,function*(){try{yield n(s,r)}catch(o){r(o)}}))}i.withAsyncBody=t})(XN||(XN={}));var it;(function(i){i.inMemory="inmemory",i.vscode="vscode",i.internal="private",i.walkThrough="walkThrough",i.walkThroughSnippet="walkThroughSnippet",i.http="http",i.https="https",i.file="file",i.mailto="mailto",i.untitled="untitled",i.data="data",i.command="command",i.vscodeRemote="vscode-remote",i.vscodeRemoteResource="vscode-remote-resource",i.userData="vscode-userdata",i.vscodeCustomEditor="vscode-custom-editor",i.vscodeNotebook="vscode-notebook",i.vscodeNotebookCell="vscode-notebook-cell",i.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",i.vscodeNotebookCellOutput="vscode-notebook-cell-output",i.vscodeInteractive="vscode-interactive",i.vscodeInteractiveInput="vscode-interactive-input",i.vscodeSettings="vscode-settings",i.vscodeWorkspaceTrust="vscode-workspace-trust",i.vscodeTerminal="vscode-terminal",i.webviewPanel="webview-panel",i.vscodeWebview="vscode-webview",i.extension="extension",i.vscodeFileResource="vscode-file",i.tmp="tmp"})(it||(it={}));class rSe{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)return this._delegate(e);const t=e.authority;let n=this._hosts[t];n&&n.indexOf(":")!==-1&&(n=`[${n}]`);const s=this._ports[t],r=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return typeof r=="string"&&(o+=`&tkn=${encodeURIComponent(r)}`),We.from({scheme:mw?this._preferredWebSchema:it.vscodeRemoteResource,authority:`${n}:${s}`,path:"/vscode-remote-resource",query:o})}}const PZ=new rSe;class Dv{asBrowserUri(e,t){const n=this.toUri(e,t);return n.scheme===it.vscodeRemote?PZ.rewrite(n):n.scheme===it.file&&(Mp||typeof ti.importScripts=="function"&&ti.origin===`${it.vscodeFileResource}://${Dv.FALLBACK_AUTHORITY}`)?n.with({scheme:it.vscodeFileResource,authority:n.authority||Dv.FALLBACK_AUTHORITY,query:null,fragment:null}):n}toUri(e,t){return We.isUri(e)?e:We.parse(t.toUrl(e))}}Dv.FALLBACK_AUTHORITY="vscode-app";const FZ=new Dv;function Rn(i){for(;i.firstChild;)i.firstChild.remove()}function qO(i){var e;return(e=i==null?void 0:i.isConnected)!==null&&e!==void 0?e:!1}class oSe{constructor(e,t,n,s){this._node=e,this._type=t,this._handler=n,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function ne(i,e,t,n){return new oSe(i,e,t,n)}function BZ(i){return function(e){return i(new zr(e))}}function aSe(i){return function(e){return i(new li(e))}}let Ji=function(e,t,n,s){let r=n;return t==="click"||t==="mousedown"?r=BZ(n):(t==="keydown"||t==="keypress"||t==="keyup")&&(r=aSe(n)),ne(e,t,r,s)},lSe=function(e,t,n){let s=BZ(t);return GO(e,s,n)};function GO(i,e,t){return ne(i,du&&VL.pointerEvents?Ae.POINTER_DOWN:Ae.MOUSE_DOWN,e,t)}function VZ(i,e,t){return ne(i,du&&VL.pointerEvents?Ae.POINTER_UP:Ae.MOUSE_UP,e,t)}function KO(i,e){return ne(i,"mouseout",t=>{let n=t.relatedTarget;for(;n&&n!==i;)n=n.parentNode;n!==i&&e(t)})}function cSe(i,e){return ne(i,"pointerout",t=>{let n=t.relatedTarget;for(;n&&n!==i;)n=n.parentNode;n!==i&&e(t)})}let DA=null;function hSe(i){if(!DA){const e=t=>setTimeout(()=>t(new Date().getTime()),0);DA=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}return DA.call(self,i)}let WZ,Al;class LA{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Ke(e)}}static sort(e,t){return t.priority-e.priority}}(function(){let i=[],e=null,t=!1,n=!1,s=()=>{for(t=!1,e=i,i=[],n=!0;e.length>0;)e.sort(LA.sort),e.shift().execute();n=!1};Al=(r,o=0)=>{let a=new LA(r,o);return i.push(a),t||(t=!0,hSe(s)),a},WZ=(r,o)=>{if(n){let a=new LA(r,o);return e.push(a),a}else return Al(r,o)}})();const uSe=8,dSe=function(i,e){return e};class fSe extends te{constructor(e,t,n,s=dSe,r=uSe){super();let o=null,a=0,l=this._register(new Ms),c=()=>{a=new Date().getTime(),n(o),o=null};this._register(ne(e,t,h=>{o=s(o,h);let u=new Date().getTime()-a;u>=r?(l.cancel(),c()):l.setIfNotSet(c,r-u)}))}}function ZO(i,e,t,n,s){return new fSe(i,e,t,n,s)}function YO(i){return document.defaultView.getComputedStyle(i,null)}function WL(i){if(i!==document.body)return new Vt(i.clientWidth,i.clientHeight);if(du&&window.visualViewport)return new Vt(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new Vt(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new Vt(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new Vt(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class di{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){let s=YO(e),r="0";return s&&(s.getPropertyValue?r=s.getPropertyValue(t):r=s.getAttribute(n)),di.convertToPixels(e,r)}static getBorderLeftWidth(e){return di.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return di.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return di.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return di.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return di.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return di.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return di.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return di.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return di.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return di.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return di.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return di.getDimension(e,"margin-bottom","marginBottom")}}class Vt{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new Vt(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof Vt?e:new Vt(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}function zZ(i){let e=i.offsetParent,t=i.offsetTop,n=i.offsetLeft;for(;(i=i.parentNode)!==null&&i!==document.body&&i!==document.documentElement;){t-=i.scrollTop;const s=UZ(i)?null:YO(i);s&&(n-=s.direction!=="rtl"?i.scrollLeft:-i.scrollLeft),i===e&&(n+=di.getBorderLeftWidth(i),t+=di.getBorderTopWidth(i),t+=i.offsetTop,n+=i.offsetLeft,e=i.offsetParent)}return{left:n,top:t}}function gSe(i,e,t){typeof e=="number"&&(i.style.width=`${e}px`),typeof t=="number"&&(i.style.height=`${t}px`)}function Nn(i){let e=i.getBoundingClientRect();return{left:e.left+Rc.scrollX,top:e.top+Rc.scrollY,width:e.width,height:e.height}}const Rc=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function lo(i){let e=di.getMarginLeft(i)+di.getMarginRight(i);return i.offsetWidth+e}function kA(i){let e=di.getBorderLeftWidth(i)+di.getBorderRightWidth(i),t=di.getPaddingLeft(i)+di.getPaddingRight(i);return i.offsetWidth-e-t}function pSe(i){let e=di.getBorderTopWidth(i)+di.getBorderBottomWidth(i),t=di.getPaddingTop(i)+di.getPaddingBottom(i);return i.offsetHeight-e-t}function JN(i){let e=di.getMarginTop(i)+di.getMarginBottom(i);return i.offsetHeight+e}function Cl(i,e){for(;i;){if(i===e)return!0;i=i.parentNode}return!1}function HZ(i,e,t){for(;i&&i.nodeType===i.ELEMENT_NODE;){if(i.classList.contains(e))return i;if(t){if(typeof t=="string"){if(i.classList.contains(t))return null}else if(i===t)return null}i=i.parentNode}return null}function U9(i,e,t){return!!HZ(i,e,t)}function UZ(i){return i&&!!i.host&&!!i.mode}function QO(i){return!!C0(i)}function C0(i){for(;i.parentNode;){if(i===document.body)return null;i=i.parentNode}return UZ(i)?i:null}function Pp(){let i=document.activeElement;for(;i!=null&&i.shadowRoot;)i=i.shadowRoot.activeElement;return i}function jr(i=document.getElementsByTagName("head")[0]){let e=document.createElement("style");return e.type="text/css",e.media="screen",i.appendChild(e),e}let AA=null;function $Z(){return AA||(AA=jr()),AA}function mSe(i){var e,t;return!((e=i==null?void 0:i.sheet)===null||e===void 0)&&e.rules?i.sheet.rules:!((t=i==null?void 0:i.sheet)===null||t===void 0)&&t.cssRules?i.sheet.cssRules:[]}function eM(i,e,t=$Z()){!t||!e||t.sheet.insertRule(i+"{"+e+"}",0)}function px(i,e=$Z()){if(!e)return;let t=mSe(e),n=[];for(let s=0;s<t.length;s++)t[s].selectorText.indexOf(i)!==-1&&n.push(s);for(let s=n.length-1;s>=0;s--)e.sheet.deleteRule(n[s])}function jZ(i){return typeof HTMLElement=="object"?i instanceof HTMLElement:i&&typeof i=="object"&&i.nodeType===1&&typeof i.nodeName=="string"}const Ae={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:Wd?"webkitAnimationStart":"animationstart",ANIMATION_END:Wd?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:Wd?"webkitAnimationIteration":"animationiteration"},Et={stop:function(i,e){i.preventDefault?i.preventDefault():i.returnValue=!1,e&&(i.stopPropagation?i.stopPropagation():i.cancelBubble=!0)}};function _Se(i){let e=[];for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)e[t]=i.scrollTop,i=i.parentNode;return e}function bSe(i,e){for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)i.scrollTop!==e[t]&&(i.scrollTop=e[t]),i=i.parentNode}class vSe extends te{constructor(e){super(),this._onDidFocus=this._register(new z),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new z),this.onDidBlur=this._onDidBlur.event;let t=Cl(document.activeElement,e),n=!1;const s=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},r=()=>{t&&(n=!0,window.setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{Cl(document.activeElement,e)!==t&&(t?r():s())},this._register(ne(e,Ae.FOCUS,s,!0)),this._register(ne(e,Ae.BLUR,r,!0))}}function ym(i){return new vSe(i)}function se(i,...e){if(i.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function wSe(i,e){return i.insertBefore(e,i.firstChild),e}function ww(i,...e){i.innerText="",se(i,...e)}const ySe=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var Lv;(function(i){i.HTML="http://www.w3.org/1999/xhtml",i.SVG="http://www.w3.org/2000/svg"})(Lv||(Lv={}));function qZ(i,e,t,...n){let s=ySe.exec(e);if(!s)throw new Error("Bad use of emmet");t=Object.assign({},t||{});let r=s[1]||"div",o;return i!==Lv.HTML?o=document.createElementNS(i,r):o=document.createElement(r),s[3]&&(o.id=s[3]),s[4]&&(o.className=s[4].replace(/\./g," ").trim()),Object.keys(t).forEach(a=>{const l=t[a];typeof l>"u"||(/^on\w+$/.test(a)?o[a]=l:a==="selected"?l&&o.setAttribute(a,"true"):o.setAttribute(a,l))}),o.append(...n),o}function ue(i,e,...t){return qZ(Lv.HTML,i,e,...t)}ue.SVG=function(i,e,...t){return qZ(Lv.SVG,i,e,...t)};function ur(...i){for(let e of i)e.style.display="",e.removeAttribute("aria-hidden")}function Cs(...i){for(let e of i)e.style.display="none",e.setAttribute("aria-hidden","true")}function CSe(i){return Array.prototype.slice.call(document.getElementsByTagName(i),0)}function $9(i){const e=window.devicePixelRatio*i;return Math.max(1,Math.floor(e))/window.devicePixelRatio}function GZ(i){window.open(i,"_blank","noopener")}function SSe(i){const e=()=>{i(),t=Al(e)};let t=Al(e);return gt(()=>t.dispose())}PZ.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function jc(i){return i?`url('${FZ.asBrowserUri(i).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function j9(i){return`'${i.replace(/'/g,"%27")}'`}class Ld extends z{constructor(){super(),this._subscriptions=new de,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(ne(window,"keydown",e=>{if(e.defaultPrevented)return;const t=new li(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(ne(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(ne(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(ne(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(ne(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(ne(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return Ld.instance||(Ld.instance=new Ld),Ld.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}function xSe(i,e){const t=window.matchMedia(i);typeof t.addEventListener=="function"?t.addEventListener("change",e):t.addListener(e)}function KZ(i){return!i||typeof i!="string"?!0:i.trim().length===0}const DSe=/{(\d+)}/g;function fo(i,...e){return e.length===0?i:i.replace(DSe,function(t,n){const s=parseInt(n,10);return isNaN(s)||s<0||s>=e.length?t:e[s]})}function XO(i){return i.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function wa(i){return i.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function ZZ(i,e){if(!i||!e)return i;const t=e.length;if(t===0||i.length===0)return i;let n=0;for(;i.indexOf(e,n)===n;)n=n+t;return i.substring(n)}function LSe(i,e){if(!i||!e)return i;const t=e.length,n=i.length;if(t===0||n===0)return i;let s=n,r=-1;for(;r=i.lastIndexOf(e,s-1),!(r===-1||r+t!==s);){if(r===0)return"";s=r}return i.substring(0,s)}function kSe(i){return i.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function YZ(i,e,t={}){if(!i)throw new Error("Cannot create regex from empty string");e||(i=wa(i)),t.wholeWord&&(/\B/.test(i.charAt(0))||(i="\\b"+i),/\B/.test(i.charAt(i.length-1))||(i=i+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(i,n)}function ASe(i){return i.source==="^"||i.source==="^$"||i.source==="$"||i.source==="^\\s*$"?!1:!!(i.exec("")&&i.lastIndex===0)}function EA(i){return(i.global?"g":"")+(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")}function El(i){return i.split(/\r\n|\r|\n/)}function Zs(i){for(let e=0,t=i.length;e<t;e++){const n=i.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function qi(i,e=0,t=i.length){for(let n=e;n<t;n++){const s=i.charCodeAt(n);if(s!==32&&s!==9)return i.substring(e,n)}return i.substring(e,t)}function S0(i,e=i.length-1){for(let t=e;t>=0;t--){const n=i.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function kv(i,e){return i<e?-1:i>e?1:0}function JO(i,e,t=0,n=i.length,s=0,r=e.length){for(;t<n&&s<r;t++,s++){let l=i.charCodeAt(t),c=e.charCodeAt(s);if(l<c)return-1;if(l>c)return 1}const o=n-t,a=r-s;return o<a?-1:o>a?1:0}function tM(i,e){return yw(i,e,0,i.length,0,e.length)}function yw(i,e,t=0,n=i.length,s=0,r=e.length){for(;t<n&&s<r;t++,s++){let l=i.charCodeAt(t),c=e.charCodeAt(s);if(l===c)continue;if(l>=128||c>=128)return JO(i.toLowerCase(),e.toLowerCase(),t,n,s,r);hp(l)&&(l-=32),hp(c)&&(c-=32);const h=l-c;if(h!==0)return h}const o=n-t,a=r-s;return o<a?-1:o>a?1:0}function hp(i){return i>=97&&i<=122}function Ch(i){return i>=65&&i<=90}function E_(i,e){return i.length===e.length&&yw(i,e)===0}function e5(i,e){const t=e.length;return e.length>i.length?!1:yw(i,e,0,t)===0}function Av(i,e){let t,n=Math.min(i.length,e.length);for(t=0;t<n;t++)if(i.charCodeAt(t)!==e.charCodeAt(t))return t;return n}function iM(i,e){let t,n=Math.min(i.length,e.length);const s=i.length-1,r=e.length-1;for(t=0;t<n;t++)if(i.charCodeAt(s-t)!==e.charCodeAt(r-t))return t;return n}function _n(i){return 55296<=i&&i<=56319}function Cm(i){return 56320<=i&&i<=57343}function t5(i,e){return(i-55296<<10)+(e-56320)+65536}function fc(i,e,t){const n=i.charCodeAt(t);if(_n(n)&&t+1<e){const s=i.charCodeAt(t+1);if(Cm(s))return t5(n,s)}return n}function Fp(i,e){const t=i.charCodeAt(e-1);if(Cm(t)&&e>1){const n=i.charCodeAt(e-2);if(_n(n))return t5(n,t)}return t}function mx(i,e){const t=Ic.getInstance(),n=e,s=i.length,r=fc(i,s,e);e+=r>=65536?2:1;let o=t.getGraphemeBreakType(r);for(;e<s;){const a=fc(i,s,e),l=t.getGraphemeBreakType(a);if(cb(o,l))break;e+=a>=65536?2:1,o=l}return e-n}function ESe(i,e){const t=Ic.getInstance(),n=e,s=Fp(i,e);e-=s>=65536?2:1;let r=t.getGraphemeBreakType(s);for(;e>0;){const o=Fp(i,e),a=t.getGraphemeBreakType(o);if(cb(a,r))break;e-=o>=65536?2:1,r=a}return n-e}const ISe=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u08BD\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE33\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDCFF]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD50-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function zL(i){return ISe.test(i)}const TSe=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD00-\uDDFF\uDE70-\uDED6])/;function NSe(i){return TSe.test(i)}const MSe=/^[\t\n\r\x20-\x7E]*$/;function i5(i){return MSe.test(i)}const QZ=/[\u2028\u2029]/;function XZ(i){return QZ.test(i)}function RSe(i){for(let e=0,t=i.length;e<t;e++)if(la(i.charCodeAt(e)))return!0;return!1}function la(i){return i=+i,i>=11904&&i<=55215||i>=63744&&i<=64255||i>=65281&&i<=65374}function lb(i){return i>=127462&&i<=127487||i===8986||i===8987||i===9200||i===9203||i>=9728&&i<=10175||i===11088||i===11093||i>=127744&&i<=128591||i>=128640&&i<=128764||i>=128992&&i<=129003||i>=129280&&i<=129535||i>=129648&&i<=129750}const OSe=String.fromCharCode(65279);function n5(i){return!!(i&&i.length>0&&i.charCodeAt(0)===65279)}function PSe(i,e=!1){return i?(e&&(i=i.replace(/\\./g,"")),i.toLowerCase()!==i):!1}function JZ(i){return i=i%(2*26),i<26?String.fromCharCode(97+i):String.fromCharCode(65+i-26)}function Rg(i){return Ic.getInstance().getGraphemeBreakType(i)}function cb(i,e){return i===0?e!==5&&e!==7:i===2&&e===3?!1:i===4||i===2||i===3||e===4||e===2||e===3?!0:!(i===8&&(e===8||e===9||e===11||e===12)||(i===11||i===9)&&(e===9||e===10)||(i===12||i===10)&&e===10||e===5||e===13||e===7||i===1||i===13&&e===14||i===6&&e===6)}class Ic{constructor(){this._data=FSe()}static getInstance(){return Ic._INSTANCE||(Ic._INSTANCE=new Ic),Ic._INSTANCE}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,n=t.length/3;let s=1;for(;s<=n;)if(e<t[3*s])s=2*s;else if(e>t[3*s+1])s=2*s+1;else return t[3*s+2];return 0}}Ic._INSTANCE=null;function FSe(){return JSON.parse("[0,0,0,51592,51592,11,44424,44424,11,72251,72254,5,7150,7150,7,48008,48008,11,55176,55176,11,128420,128420,14,3276,3277,5,9979,9980,14,46216,46216,11,49800,49800,11,53384,53384,11,70726,70726,5,122915,122916,5,129320,129327,14,2558,2558,5,5906,5908,5,9762,9763,14,43360,43388,8,45320,45320,11,47112,47112,11,48904,48904,11,50696,50696,11,52488,52488,11,54280,54280,11,70082,70083,1,71350,71350,7,73111,73111,5,127892,127893,14,128726,128727,14,129473,129474,14,2027,2035,5,2901,2902,5,3784,3789,5,6754,6754,5,8418,8420,5,9877,9877,14,11088,11088,14,44008,44008,5,44872,44872,11,45768,45768,11,46664,46664,11,47560,47560,11,48456,48456,11,49352,49352,11,50248,50248,11,51144,51144,11,52040,52040,11,52936,52936,11,53832,53832,11,54728,54728,11,69811,69814,5,70459,70460,5,71096,71099,7,71998,71998,5,72874,72880,5,119149,119149,7,127374,127374,14,128335,128335,14,128482,128482,14,128765,128767,14,129399,129400,14,129680,129685,14,1476,1477,5,2377,2380,7,2759,2760,5,3137,3140,7,3458,3459,7,4153,4154,5,6432,6434,5,6978,6978,5,7675,7679,5,9723,9726,14,9823,9823,14,9919,9923,14,10035,10036,14,42736,42737,5,43596,43596,5,44200,44200,11,44648,44648,11,45096,45096,11,45544,45544,11,45992,45992,11,46440,46440,11,46888,46888,11,47336,47336,11,47784,47784,11,48232,48232,11,48680,48680,11,49128,49128,11,49576,49576,11,50024,50024,11,50472,50472,11,50920,50920,11,51368,51368,11,51816,51816,11,52264,52264,11,52712,52712,11,53160,53160,11,53608,53608,11,54056,54056,11,54504,54504,11,54952,54952,11,68108,68111,5,69933,69940,5,70197,70197,7,70498,70499,7,70845,70845,5,71229,71229,5,71727,71735,5,72154,72155,5,72344,72345,5,73023,73029,5,94095,94098,5,121403,121452,5,126981,127182,14,127538,127546,14,127990,127990,14,128391,128391,14,128445,128449,14,128500,128505,14,128752,128752,14,129160,129167,14,129356,129356,14,129432,129442,14,129648,129651,14,129751,131069,14,173,173,4,1757,1757,1,2274,2274,1,2494,2494,5,2641,2641,5,2876,2876,5,3014,3016,7,3262,3262,7,3393,3396,5,3570,3571,7,3968,3972,5,4228,4228,7,6086,6086,5,6679,6680,5,6912,6915,5,7080,7081,5,7380,7392,5,8252,8252,14,9096,9096,14,9748,9749,14,9784,9786,14,9833,9850,14,9890,9894,14,9938,9938,14,9999,9999,14,10085,10087,14,12349,12349,14,43136,43137,7,43454,43456,7,43755,43755,7,44088,44088,11,44312,44312,11,44536,44536,11,44760,44760,11,44984,44984,11,45208,45208,11,45432,45432,11,45656,45656,11,45880,45880,11,46104,46104,11,46328,46328,11,46552,46552,11,46776,46776,11,47000,47000,11,47224,47224,11,47448,47448,11,47672,47672,11,47896,47896,11,48120,48120,11,48344,48344,11,48568,48568,11,48792,48792,11,49016,49016,11,49240,49240,11,49464,49464,11,49688,49688,11,49912,49912,11,50136,50136,11,50360,50360,11,50584,50584,11,50808,50808,11,51032,51032,11,51256,51256,11,51480,51480,11,51704,51704,11,51928,51928,11,52152,52152,11,52376,52376,11,52600,52600,11,52824,52824,11,53048,53048,11,53272,53272,11,53496,53496,11,53720,53720,11,53944,53944,11,54168,54168,11,54392,54392,11,54616,54616,11,54840,54840,11,55064,55064,11,65438,65439,5,69633,69633,5,69837,69837,1,70018,70018,7,70188,70190,7,70368,70370,7,70465,70468,7,70712,70719,5,70835,70840,5,70850,70851,5,71132,71133,5,71340,71340,7,71458,71461,5,71985,71989,7,72002,72002,7,72193,72202,5,72281,72283,5,72766,72766,7,72885,72886,5,73104,73105,5,92912,92916,5,113824,113827,4,119173,119179,5,121505,121519,5,125136,125142,5,127279,127279,14,127489,127490,14,127570,127743,14,127900,127901,14,128254,128254,14,128369,128370,14,128400,128400,14,128425,128432,14,128468,128475,14,128489,128494,14,128715,128720,14,128745,128745,14,128759,128760,14,129004,129023,14,129296,129304,14,129340,129342,14,129388,129392,14,129404,129407,14,129454,129455,14,129485,129487,14,129659,129663,14,129719,129727,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2363,2363,7,2402,2403,5,2507,2508,7,2622,2624,7,2691,2691,7,2786,2787,5,2881,2884,5,3006,3006,5,3072,3072,5,3170,3171,5,3267,3268,7,3330,3331,7,3406,3406,1,3538,3540,5,3655,3662,5,3897,3897,5,4038,4038,5,4184,4185,5,4352,4447,8,6068,6069,5,6155,6157,5,6448,6449,7,6742,6742,5,6783,6783,5,6966,6970,5,7042,7042,7,7143,7143,7,7212,7219,5,7412,7412,5,8206,8207,4,8294,8303,4,8596,8601,14,9410,9410,14,9742,9742,14,9757,9757,14,9770,9770,14,9794,9794,14,9828,9828,14,9855,9855,14,9882,9882,14,9900,9903,14,9929,9933,14,9963,9967,14,9987,9988,14,10006,10006,14,10062,10062,14,10175,10175,14,11744,11775,5,42607,42607,5,43043,43044,7,43263,43263,5,43444,43445,7,43569,43570,5,43698,43700,5,43766,43766,5,44032,44032,11,44144,44144,11,44256,44256,11,44368,44368,11,44480,44480,11,44592,44592,11,44704,44704,11,44816,44816,11,44928,44928,11,45040,45040,11,45152,45152,11,45264,45264,11,45376,45376,11,45488,45488,11,45600,45600,11,45712,45712,11,45824,45824,11,45936,45936,11,46048,46048,11,46160,46160,11,46272,46272,11,46384,46384,11,46496,46496,11,46608,46608,11,46720,46720,11,46832,46832,11,46944,46944,11,47056,47056,11,47168,47168,11,47280,47280,11,47392,47392,11,47504,47504,11,47616,47616,11,47728,47728,11,47840,47840,11,47952,47952,11,48064,48064,11,48176,48176,11,48288,48288,11,48400,48400,11,48512,48512,11,48624,48624,11,48736,48736,11,48848,48848,11,48960,48960,11,49072,49072,11,49184,49184,11,49296,49296,11,49408,49408,11,49520,49520,11,49632,49632,11,49744,49744,11,49856,49856,11,49968,49968,11,50080,50080,11,50192,50192,11,50304,50304,11,50416,50416,11,50528,50528,11,50640,50640,11,50752,50752,11,50864,50864,11,50976,50976,11,51088,51088,11,51200,51200,11,51312,51312,11,51424,51424,11,51536,51536,11,51648,51648,11,51760,51760,11,51872,51872,11,51984,51984,11,52096,52096,11,52208,52208,11,52320,52320,11,52432,52432,11,52544,52544,11,52656,52656,11,52768,52768,11,52880,52880,11,52992,52992,11,53104,53104,11,53216,53216,11,53328,53328,11,53440,53440,11,53552,53552,11,53664,53664,11,53776,53776,11,53888,53888,11,54000,54000,11,54112,54112,11,54224,54224,11,54336,54336,11,54448,54448,11,54560,54560,11,54672,54672,11,54784,54784,11,54896,54896,11,55008,55008,11,55120,55120,11,64286,64286,5,66272,66272,5,68900,68903,5,69762,69762,7,69817,69818,5,69927,69931,5,70003,70003,5,70070,70078,5,70094,70094,7,70194,70195,7,70206,70206,5,70400,70401,5,70463,70463,7,70475,70477,7,70512,70516,5,70722,70724,5,70832,70832,5,70842,70842,5,70847,70848,5,71088,71089,7,71102,71102,7,71219,71226,5,71231,71232,5,71342,71343,7,71453,71455,5,71463,71467,5,71737,71738,5,71995,71996,5,72000,72000,7,72145,72147,7,72160,72160,5,72249,72249,7,72273,72278,5,72330,72342,5,72752,72758,5,72850,72871,5,72882,72883,5,73018,73018,5,73031,73031,5,73109,73109,5,73461,73462,7,94031,94031,5,94192,94193,7,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,126976,126979,14,127184,127231,14,127344,127345,14,127405,127461,14,127514,127514,14,127561,127567,14,127778,127779,14,127896,127896,14,127985,127986,14,127995,127999,5,128326,128328,14,128360,128366,14,128378,128378,14,128394,128397,14,128405,128406,14,128422,128423,14,128435,128443,14,128453,128464,14,128479,128480,14,128484,128487,14,128496,128498,14,128640,128709,14,128723,128724,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129096,129103,14,129292,129292,14,129311,129311,14,129329,129330,14,129344,129349,14,129360,129374,14,129394,129394,14,129402,129402,14,129413,129425,14,129445,129450,14,129466,129471,14,129483,129483,14,129511,129535,14,129653,129655,14,129667,129670,14,129705,129711,14,129731,129743,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2307,2307,7,2366,2368,7,2382,2383,7,2434,2435,7,2497,2500,5,2519,2519,5,2563,2563,7,2631,2632,5,2677,2677,5,2750,2752,7,2763,2764,7,2817,2817,5,2879,2879,5,2891,2892,7,2914,2915,5,3008,3008,5,3021,3021,5,3076,3076,5,3146,3149,5,3202,3203,7,3264,3265,7,3271,3272,7,3298,3299,5,3390,3390,5,3402,3404,7,3426,3427,5,3535,3535,5,3544,3550,7,3635,3635,7,3763,3763,7,3893,3893,5,3953,3966,5,3981,3991,5,4145,4145,7,4157,4158,5,4209,4212,5,4237,4237,5,4520,4607,10,5970,5971,5,6071,6077,5,6089,6099,5,6277,6278,5,6439,6440,5,6451,6456,7,6683,6683,5,6744,6750,5,6765,6770,7,6846,6846,5,6964,6964,5,6972,6972,5,7019,7027,5,7074,7077,5,7083,7085,5,7146,7148,7,7154,7155,7,7222,7223,5,7394,7400,5,7416,7417,5,8204,8204,5,8233,8233,4,8288,8292,4,8413,8416,5,8482,8482,14,8986,8987,14,9193,9203,14,9654,9654,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9775,14,9792,9792,14,9800,9811,14,9825,9826,14,9831,9831,14,9852,9853,14,9872,9873,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9936,9936,14,9941,9960,14,9974,9974,14,9982,9985,14,9992,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10145,10145,14,11013,11015,14,11503,11505,5,12334,12335,5,12951,12951,14,42612,42621,5,43014,43014,5,43047,43047,7,43204,43205,5,43335,43345,5,43395,43395,7,43450,43451,7,43561,43566,5,43573,43574,5,43644,43644,5,43710,43711,5,43758,43759,7,44005,44005,5,44012,44012,7,44060,44060,11,44116,44116,11,44172,44172,11,44228,44228,11,44284,44284,11,44340,44340,11,44396,44396,11,44452,44452,11,44508,44508,11,44564,44564,11,44620,44620,11,44676,44676,11,44732,44732,11,44788,44788,11,44844,44844,11,44900,44900,11,44956,44956,11,45012,45012,11,45068,45068,11,45124,45124,11,45180,45180,11,45236,45236,11,45292,45292,11,45348,45348,11,45404,45404,11,45460,45460,11,45516,45516,11,45572,45572,11,45628,45628,11,45684,45684,11,45740,45740,11,45796,45796,11,45852,45852,11,45908,45908,11,45964,45964,11,46020,46020,11,46076,46076,11,46132,46132,11,46188,46188,11,46244,46244,11,46300,46300,11,46356,46356,11,46412,46412,11,46468,46468,11,46524,46524,11,46580,46580,11,46636,46636,11,46692,46692,11,46748,46748,11,46804,46804,11,46860,46860,11,46916,46916,11,46972,46972,11,47028,47028,11,47084,47084,11,47140,47140,11,47196,47196,11,47252,47252,11,47308,47308,11,47364,47364,11,47420,47420,11,47476,47476,11,47532,47532,11,47588,47588,11,47644,47644,11,47700,47700,11,47756,47756,11,47812,47812,11,47868,47868,11,47924,47924,11,47980,47980,11,48036,48036,11,48092,48092,11,48148,48148,11,48204,48204,11,48260,48260,11,48316,48316,11,48372,48372,11,48428,48428,11,48484,48484,11,48540,48540,11,48596,48596,11,48652,48652,11,48708,48708,11,48764,48764,11,48820,48820,11,48876,48876,11,48932,48932,11,48988,48988,11,49044,49044,11,49100,49100,11,49156,49156,11,49212,49212,11,49268,49268,11,49324,49324,11,49380,49380,11,49436,49436,11,49492,49492,11,49548,49548,11,49604,49604,11,49660,49660,11,49716,49716,11,49772,49772,11,49828,49828,11,49884,49884,11,49940,49940,11,49996,49996,11,50052,50052,11,50108,50108,11,50164,50164,11,50220,50220,11,50276,50276,11,50332,50332,11,50388,50388,11,50444,50444,11,50500,50500,11,50556,50556,11,50612,50612,11,50668,50668,11,50724,50724,11,50780,50780,11,50836,50836,11,50892,50892,11,50948,50948,11,51004,51004,11,51060,51060,11,51116,51116,11,51172,51172,11,51228,51228,11,51284,51284,11,51340,51340,11,51396,51396,11,51452,51452,11,51508,51508,11,51564,51564,11,51620,51620,11,51676,51676,11,51732,51732,11,51788,51788,11,51844,51844,11,51900,51900,11,51956,51956,11,52012,52012,11,52068,52068,11,52124,52124,11,52180,52180,11,52236,52236,11,52292,52292,11,52348,52348,11,52404,52404,11,52460,52460,11,52516,52516,11,52572,52572,11,52628,52628,11,52684,52684,11,52740,52740,11,52796,52796,11,52852,52852,11,52908,52908,11,52964,52964,11,53020,53020,11,53076,53076,11,53132,53132,11,53188,53188,11,53244,53244,11,53300,53300,11,53356,53356,11,53412,53412,11,53468,53468,11,53524,53524,11,53580,53580,11,53636,53636,11,53692,53692,11,53748,53748,11,53804,53804,11,53860,53860,11,53916,53916,11,53972,53972,11,54028,54028,11,54084,54084,11,54140,54140,11,54196,54196,11,54252,54252,11,54308,54308,11,54364,54364,11,54420,54420,11,54476,54476,11,54532,54532,11,54588,54588,11,54644,54644,11,54700,54700,11,54756,54756,11,54812,54812,11,54868,54868,11,54924,54924,11,54980,54980,11,55036,55036,11,55092,55092,11,55148,55148,11,55216,55238,9,65056,65071,5,65529,65531,4,68097,68099,5,68159,68159,5,69446,69456,5,69688,69702,5,69808,69810,7,69815,69816,7,69821,69821,1,69888,69890,5,69932,69932,7,69957,69958,7,70016,70017,5,70067,70069,7,70079,70080,7,70089,70092,5,70095,70095,5,70191,70193,5,70196,70196,5,70198,70199,5,70367,70367,5,70371,70378,5,70402,70403,7,70462,70462,5,70464,70464,5,70471,70472,7,70487,70487,5,70502,70508,5,70709,70711,7,70720,70721,7,70725,70725,7,70750,70750,5,70833,70834,7,70841,70841,7,70843,70844,7,70846,70846,7,70849,70849,7,71087,71087,5,71090,71093,5,71100,71101,5,71103,71104,5,71216,71218,7,71227,71228,7,71230,71230,7,71339,71339,5,71341,71341,5,71344,71349,5,71351,71351,5,71456,71457,7,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123628,123631,5,125252,125258,5,126980,126980,14,127183,127183,14,127245,127247,14,127340,127343,14,127358,127359,14,127377,127386,14,127462,127487,6,127491,127503,14,127535,127535,14,127548,127551,14,127568,127569,14,127744,127777,14,127780,127891,14,127894,127895,14,127897,127899,14,127902,127984,14,127987,127989,14,127991,127994,14,128000,128253,14,128255,128317,14,128329,128334,14,128336,128359,14,128367,128368,14,128371,128377,14,128379,128390,14,128392,128393,14,128398,128399,14,128401,128404,14,128407,128419,14,128421,128421,14,128424,128424,14,128433,128434,14,128444,128444,14,128450,128452,14,128465,128467,14,128476,128478,14,128481,128481,14,128483,128483,14,128488,128488,14,128495,128495,14,128499,128499,14,128506,128591,14,128710,128714,14,128721,128722,14,128725,128725,14,128728,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129664,129666,14,129671,129679,14,129686,129704,14,129712,129718,14,129728,129730,14,129744,129750,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2259,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3134,3136,5,3142,3144,5,3157,3158,5,3201,3201,5,3260,3260,5,3263,3263,5,3266,3266,5,3270,3270,5,3274,3275,7,3285,3286,5,3328,3329,5,3387,3388,5,3391,3392,7,3398,3400,7,3405,3405,5,3415,3415,5,3457,3457,5,3530,3530,5,3536,3537,7,3542,3542,5,3551,3551,5,3633,3633,5,3636,3642,5,3761,3761,5,3764,3772,5,3864,3865,5,3895,3895,5,3902,3903,7,3967,3967,7,3974,3975,5,3993,4028,5,4141,4144,5,4146,4151,5,4155,4156,7,4182,4183,7,4190,4192,5,4226,4226,5,4229,4230,5,4253,4253,5,4448,4519,9,4957,4959,5,5938,5940,5,6002,6003,5,6070,6070,7,6078,6085,7,6087,6088,7,6109,6109,5,6158,6158,4,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6848,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7673,5,8203,8203,4,8205,8205,13,8232,8232,4,8234,8238,4,8265,8265,14,8293,8293,4,8400,8412,5,8417,8417,5,8421,8432,5,8505,8505,14,8617,8618,14,9000,9000,14,9167,9167,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9776,9783,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9935,14,9937,9937,14,9939,9940,14,9961,9962,14,9968,9973,14,9975,9978,14,9981,9981,14,9986,9986,14,9989,9989,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10084,14,10133,10135,14,10160,10160,14,10548,10549,14,11035,11036,14,11093,11093,14,11647,11647,5,12330,12333,5,12336,12336,14,12441,12442,5,12953,12953,14,42608,42610,5,42654,42655,5,43010,43010,5,43019,43019,5,43045,43046,5,43052,43052,5,43188,43203,7,43232,43249,5,43302,43309,5,43346,43347,7,43392,43394,5,43443,43443,5,43446,43449,5,43452,43453,5,43493,43493,5,43567,43568,7,43571,43572,7,43587,43587,5,43597,43597,7,43696,43696,5,43703,43704,5,43713,43713,5,43756,43757,5,43765,43765,7,44003,44004,7,44006,44007,7,44009,44010,7,44013,44013,5,44033,44059,12,44061,44087,12,44089,44115,12,44117,44143,12,44145,44171,12,44173,44199,12,44201,44227,12,44229,44255,12,44257,44283,12,44285,44311,12,44313,44339,12,44341,44367,12,44369,44395,12,44397,44423,12,44425,44451,12,44453,44479,12,44481,44507,12,44509,44535,12,44537,44563,12,44565,44591,12,44593,44619,12,44621,44647,12,44649,44675,12,44677,44703,12,44705,44731,12,44733,44759,12,44761,44787,12,44789,44815,12,44817,44843,12,44845,44871,12,44873,44899,12,44901,44927,12,44929,44955,12,44957,44983,12,44985,45011,12,45013,45039,12,45041,45067,12,45069,45095,12,45097,45123,12,45125,45151,12,45153,45179,12,45181,45207,12,45209,45235,12,45237,45263,12,45265,45291,12,45293,45319,12,45321,45347,12,45349,45375,12,45377,45403,12,45405,45431,12,45433,45459,12,45461,45487,12,45489,45515,12,45517,45543,12,45545,45571,12,45573,45599,12,45601,45627,12,45629,45655,12,45657,45683,12,45685,45711,12,45713,45739,12,45741,45767,12,45769,45795,12,45797,45823,12,45825,45851,12,45853,45879,12,45881,45907,12,45909,45935,12,45937,45963,12,45965,45991,12,45993,46019,12,46021,46047,12,46049,46075,12,46077,46103,12,46105,46131,12,46133,46159,12,46161,46187,12,46189,46215,12,46217,46243,12,46245,46271,12,46273,46299,12,46301,46327,12,46329,46355,12,46357,46383,12,46385,46411,12,46413,46439,12,46441,46467,12,46469,46495,12,46497,46523,12,46525,46551,12,46553,46579,12,46581,46607,12,46609,46635,12,46637,46663,12,46665,46691,12,46693,46719,12,46721,46747,12,46749,46775,12,46777,46803,12,46805,46831,12,46833,46859,12,46861,46887,12,46889,46915,12,46917,46943,12,46945,46971,12,46973,46999,12,47001,47027,12,47029,47055,12,47057,47083,12,47085,47111,12,47113,47139,12,47141,47167,12,47169,47195,12,47197,47223,12,47225,47251,12,47253,47279,12,47281,47307,12,47309,47335,12,47337,47363,12,47365,47391,12,47393,47419,12,47421,47447,12,47449,47475,12,47477,47503,12,47505,47531,12,47533,47559,12,47561,47587,12,47589,47615,12,47617,47643,12,47645,47671,12,47673,47699,12,47701,47727,12,47729,47755,12,47757,47783,12,47785,47811,12,47813,47839,12,47841,47867,12,47869,47895,12,47897,47923,12,47925,47951,12,47953,47979,12,47981,48007,12,48009,48035,12,48037,48063,12,48065,48091,12,48093,48119,12,48121,48147,12,48149,48175,12,48177,48203,12,48205,48231,12,48233,48259,12,48261,48287,12,48289,48315,12,48317,48343,12,48345,48371,12,48373,48399,12,48401,48427,12,48429,48455,12,48457,48483,12,48485,48511,12,48513,48539,12,48541,48567,12,48569,48595,12,48597,48623,12,48625,48651,12,48653,48679,12,48681,48707,12,48709,48735,12,48737,48763,12,48765,48791,12,48793,48819,12,48821,48847,12,48849,48875,12,48877,48903,12,48905,48931,12,48933,48959,12,48961,48987,12,48989,49015,12,49017,49043,12,49045,49071,12,49073,49099,12,49101,49127,12,49129,49155,12,49157,49183,12,49185,49211,12,49213,49239,12,49241,49267,12,49269,49295,12,49297,49323,12,49325,49351,12,49353,49379,12,49381,49407,12,49409,49435,12,49437,49463,12,49465,49491,12,49493,49519,12,49521,49547,12,49549,49575,12,49577,49603,12,49605,49631,12,49633,49659,12,49661,49687,12,49689,49715,12,49717,49743,12,49745,49771,12,49773,49799,12,49801,49827,12,49829,49855,12,49857,49883,12,49885,49911,12,49913,49939,12,49941,49967,12,49969,49995,12,49997,50023,12,50025,50051,12,50053,50079,12,50081,50107,12,50109,50135,12,50137,50163,12,50165,50191,12,50193,50219,12,50221,50247,12,50249,50275,12,50277,50303,12,50305,50331,12,50333,50359,12,50361,50387,12,50389,50415,12,50417,50443,12,50445,50471,12,50473,50499,12,50501,50527,12,50529,50555,12,50557,50583,12,50585,50611,12,50613,50639,12,50641,50667,12,50669,50695,12,50697,50723,12,50725,50751,12,50753,50779,12,50781,50807,12,50809,50835,12,50837,50863,12,50865,50891,12,50893,50919,12,50921,50947,12,50949,50975,12,50977,51003,12,51005,51031,12,51033,51059,12,51061,51087,12,51089,51115,12,51117,51143,12,51145,51171,12,51173,51199,12,51201,51227,12,51229,51255,12,51257,51283,12,51285,51311,12,51313,51339,12,51341,51367,12,51369,51395,12,51397,51423,12,51425,51451,12,51453,51479,12,51481,51507,12,51509,51535,12,51537,51563,12,51565,51591,12,51593,51619,12,51621,51647,12,51649,51675,12,51677,51703,12,51705,51731,12,51733,51759,12,51761,51787,12,51789,51815,12,51817,51843,12,51845,51871,12,51873,51899,12,51901,51927,12,51929,51955,12,51957,51983,12,51985,52011,12,52013,52039,12,52041,52067,12,52069,52095,12,52097,52123,12,52125,52151,12,52153,52179,12,52181,52207,12,52209,52235,12,52237,52263,12,52265,52291,12,52293,52319,12,52321,52347,12,52349,52375,12,52377,52403,12,52405,52431,12,52433,52459,12,52461,52487,12,52489,52515,12,52517,52543,12,52545,52571,12,52573,52599,12,52601,52627,12,52629,52655,12,52657,52683,12,52685,52711,12,52713,52739,12,52741,52767,12,52769,52795,12,52797,52823,12,52825,52851,12,52853,52879,12,52881,52907,12,52909,52935,12,52937,52963,12,52965,52991,12,52993,53019,12,53021,53047,12,53049,53075,12,53077,53103,12,53105,53131,12,53133,53159,12,53161,53187,12,53189,53215,12,53217,53243,12,53245,53271,12,53273,53299,12,53301,53327,12,53329,53355,12,53357,53383,12,53385,53411,12,53413,53439,12,53441,53467,12,53469,53495,12,53497,53523,12,53525,53551,12,53553,53579,12,53581,53607,12,53609,53635,12,53637,53663,12,53665,53691,12,53693,53719,12,53721,53747,12,53749,53775,12,53777,53803,12,53805,53831,12,53833,53859,12,53861,53887,12,53889,53915,12,53917,53943,12,53945,53971,12,53973,53999,12,54001,54027,12,54029,54055,12,54057,54083,12,54085,54111,12,54113,54139,12,54141,54167,12,54169,54195,12,54197,54223,12,54225,54251,12,54253,54279,12,54281,54307,12,54309,54335,12,54337,54363,12,54365,54391,12,54393,54419,12,54421,54447,12,54449,54475,12,54477,54503,12,54505,54531,12,54533,54559,12,54561,54587,12,54589,54615,12,54617,54643,12,54645,54671,12,54673,54699,12,54701,54727,12,54729,54755,12,54757,54783,12,54785,54811,12,54813,54839,12,54841,54867,12,54869,54895,12,54897,54923,12,54925,54951,12,54953,54979,12,54981,55007,12,55009,55035,12,55037,55063,12,55065,55091,12,55093,55119,12,55121,55147,12,55149,55175,12,55177,55203,12,55243,55291,10,65024,65039,5,65279,65279,4,65520,65528,4,66045,66045,5,66422,66426,5,68101,68102,5,68152,68154,5,68325,68326,5,69291,69292,5,69632,69632,7,69634,69634,7,69759,69761,5]")}function BSe(i,e){if(i===0)return 0;const t=VSe(i,e);if(t!==void 0)return t;const n=Fp(e,i);return i-=WC(n),i}function VSe(i,e){let t=Fp(e,i);for(i-=WC(t);WSe(t)||t===65039||t===8419;){if(i===0)return;t=Fp(e,i),i-=WC(t)}if(lb(t)){if(i>=0){const n=Fp(e,i);n===8205&&(i-=WC(n))}return i}}function WC(i){return i>=65536?2:1}function WSe(i){return 127995<=i&&i<=127999}var q9,G9;class zSe{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}}class HSe{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?JO(e,this._value,0,e.length,this._from,this._to):yw(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class USe{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?JO(e,this._value,0,e.length,this._from,this._to):yw(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class $Se{constructor(e){this._ignorePathCasing=e,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new USe(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return tM(e,this._value.scheme);if(this._states[this._stateIdx]===2)return tM(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return kv(e,this._value.query);if(this._states[this._stateIdx]===5)return kv(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class by{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return(t=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get heightRight(){var e,t;return(t=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}}class Bp{constructor(e){this._iter=e}static forUris(e=()=>!1){return new Bp(new $Se(e))}static forStrings(){return new Bp(new zSe)}static forConfigKeys(){return new Bp(new HSe)}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let s;this._root||(this._root=new by,this._root.segment=n.value());const r=[];for(s=this._root;;){const a=n.cmp(s.segment);if(a>0)s.left||(s.left=new by,s.left.segment=n.value()),r.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new by,s.right.segment=n.value()),r.push([1,s]),s=s.right;else if(n.hasNext())n.next(),s.mid||(s.mid=new by,s.mid.segment=n.value()),r.push([0,s]),s=s.mid;else break}const o=s.value;s.value=t,s.key=e;for(let a=r.length-1;a>=0;a--){const l=r[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const h=r[a][0],u=r[a+1][0];if(h===1&&u===1)r[a][1]=l.rotateLeft();else if(h===-1&&u===-1)r[a][1]=l.rotateRight();else if(h===1&&u===-1)l.right=r[a+1][1]=r[a+1][1].rotateRight(),r[a][1]=l.rotateLeft();else if(h===-1&&u===1)l.left=r[a+1][1]=r[a+1][1].rotateLeft(),r[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(r[a-1][0]){case-1:r[a-1][1].left=r[a][1];break;case 1:r[a-1][1].right=r[a][1];break;case 0:r[a-1][1].mid=r[a][1];break}else this._root=r[0][1]}}return o}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const s=t.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var n;const s=this._iter.reset(e),r=[];let o=this._root;for(;o;){const a=s.cmp(o.segment);if(a>0)r.push([-1,o]),o=o.left;else if(a<0)r.push([1,o]),o=o.right;else if(s.hasNext())s.next(),r.push([0,o]),o=o.mid;else break}if(o){if(t?(o.left=void 0,o.mid=void 0,o.right=void 0,o.height=1):(o.key=void 0,o.value=void 0),!o.mid&&!o.value)if(o.left&&o.right){const a=this._min(o.right),{key:l,value:c,segment:h}=a;this._delete(a.key,!1),o.key=l,o.value=c,o.segment=h}else{const a=(n=o.left)!==null&&n!==void 0?n:o.right;if(r.length>0){const[l,c]=r[r.length-1];switch(l){case-1:c.left=a;break;case 0:c.mid=a;break;case 1:c.right=a;break}}else this._root=a}for(let a=r.length-1;a>=0;a--){const l=r[a][1];l.updateHeight();const c=l.balanceFactor();if(c>1?(l.right.balanceFactor()>=0||(l.right=r[a+1][1]=r[a+1][1].rotateRight()),r[a][1]=l.rotateLeft()):c<-1&&(l.left.balanceFactor()<=0||(l.left=r[a+1][1]=r[a+1][1].rotateLeft()),r[a][1]=l.rotateRight()),a>0)switch(r[a-1][0]){case-1:r[a-1][1].left=r[a][1];break;case 1:r[a-1][1].right=r[a][1];break;case 0:r[a-1][1].mid=r[a][1];break}else this._root=r[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let n=this._root,s;for(;n;){const r=t.cmp(n.segment);if(r>0)n=n.left;else if(r<0)n=n.right;else if(t.hasNext())t.next(),s=n.value||s,n=n.mid;else break}return n&&n.value||s}findSuperstr(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const s=t.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(e.left&&(yield*this._entries(e.left)),e.value&&(yield[e.key,e.value]),e.mid&&(yield*this._entries(e.mid)),e.right&&(yield*this._entries(e.right)))}}class jSe{constructor(e,t){this.uri=e,this.value=t}}class rs{constructor(e,t){this[q9]="ResourceMap",e instanceof rs?(this.map=new Map(e.map),this.toKey=t??rs.defaultToKey):(this.map=new Map,this.toKey=e??rs.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new jSe(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))===null||t===void 0?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(let[n,s]of this.map)e(s.value,s.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(q9=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}}rs.defaultToKey=i=>i.toString();class qSe{constructor(){this[G9]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let s=this._map.get(e);if(s)s.value=t,n!==0&&this.touch(s,n);else{switch(s={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(s);break;case 1:this.addItemFirst(s);break;case 2:this.addItemLast(s);break;default:this.addItemLast(s);break}this._map.set(e,s),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let s=this._head;for(;s;){if(t?e.bind(t)(s.value,s.key,this):e(s.value,s.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");s=s.next}}keys(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:n.key,done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return s}values(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:n.value,done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return s}entries(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:[n.key,n.value],done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return s}[(G9=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const n=e.next,s=e.previous;e===this._tail?(s.next=void 0,this._tail=s):(n.previous=s,s.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const n=e.next,s=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=s,s.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}class s5 extends qSe{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}const K9=typeof Buffer<"u";let IA;class HL{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static wrap(e){return K9&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new HL(e)}toString(){return K9?this.buffer.toString():(IA||(IA=new TextDecoder),IA.decode(this.buffer))}}function GSe(i,e){return i[e+0]<<0>>>0|i[e+1]<<8>>>0}function KSe(i,e,t){i[t+0]=e&255,e=e>>>8,i[t+1]=e&255}function $o(i,e){return i[e]*Math.pow(2,24)+i[e+1]*Math.pow(2,16)+i[e+2]*Math.pow(2,8)+i[e+3]}function jo(i,e,t){i[t+3]=e,e=e>>>8,i[t+2]=e,e=e>>>8,i[t+1]=e,e=e>>>8,i[t]=e}function Z9(i,e){return i[e]}function Y9(i,e,t){i[t]=e}function nM(i){let e=JSON.parse(i);return e=sM(e),e}function sM(i,e=0){if(!i||e>200)return i;if(typeof i=="object"){switch(i.$mid){case 1:return We.revive(i);case 2:return new RegExp(i.source,i.flags)}if(i instanceof HL||i instanceof Uint8Array)return i;if(Array.isArray(i))for(let t=0;t<i.length;++t)i[t]=sM(i[t],e+1);else for(const t in i)Object.hasOwnProperty.call(i,t)&&(i[t]=sM(i[t],e+1))}return i}function ZSe(i){return i.replace(/[\\/]/g,Qi.sep)}function YSe(i){return i.indexOf("/")===-1&&(i=ZSe(i)),/^[a-zA-Z]:(\/|$)/.test(i)&&(i="/"+i),i}function QSe(i,e,t,n=VC){if(i===e)return!0;if(!i||!e||e.length>i.length)return!1;if(t){if(!e5(i,e))return!1;if(e.length===i.length)return!0;let r=e.length;return e.charAt(e.length-1)===n&&r--,i.charAt(r)===n}return e.charAt(e.length-1)!==n&&(e+=n),i.indexOf(e)===0}function XSe(i){return i>=65&&i<=90||i>=97&&i<=122}function JSe(i){const e=$O(i);return On?i.length>3?!1:eY(e)&&(i.length===2||e.charCodeAt(2)===92):e===Qi.sep}function eY(i){return On?XSe(i.charCodeAt(0))&&i.charCodeAt(1)===58:!1}function TA(i){return ux(i,!0)}class exe{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:kv(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}joinPath(e,...t){return We.joinPath(e,...t)}basenameOrAuthority(e){return ya(e)||e.authority}basename(e){return Qi.basename(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===it.file?t=We.file(kZ(TA(e))).path:(t=Qi.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===it.file?t=We.file($O(TA(e))).path:t=Qi.normalize(e.path),e.with({path:t})}resolvePath(e,t){if(e.scheme===it.file){const n=We.file(RCe(TA(e),t));return e.with({authority:n.authority,path:n.path})}return t=YSe(t),e.with({path:Qi.resolve(e.path,t)})}}const Es=new exe(()=>!1),tY=Es.isEqual.bind(Es),iY=Es.basenameOrAuthority.bind(Es),ya=Es.basename.bind(Es),r5=Es.dirname.bind(Es);Es.joinPath.bind(Es);const txe=Es.normalizePath.bind(Es),Q9=Es.resolvePath.bind(Es);var fu;(function(i){i.META_DATA_LABEL="label",i.META_DATA_DESCRIPTION="description",i.META_DATA_SIZE="size",i.META_DATA_MIME="mime";function e(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,l]=o.split(":");a&&l&&n.set(a,l)});const r=t.path.substring(0,t.path.indexOf(";"));return r&&n.set(i.META_DATA_MIME,r),n}i.parseMetaData=e})(fu||(fu={}));function nY(i){return Array.isArray(i)}function Ca(i){return typeof i=="string"}function xs(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)&&!(i instanceof RegExp)&&!(i instanceof Date)}function Cf(i){return typeof i=="number"&&!isNaN(i)}function sY(i){return i===!0||i===!1}function cs(i){return typeof i>"u"}function ixe(i){return!Mr(i)}function Mr(i){return cs(i)||i===null}function Mi(i,e){if(!i)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function hb(i){return typeof i=="function"}function nxe(i,e){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)sxe(i[n],e[n])}function sxe(i,e){if(Ca(e)){if(typeof i!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(hb(e)){try{if(i instanceof e)return}catch{}if(!Mr(i)&&i.constructor===e||e.length===1&&e.call(void 0,i)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function rxe(i){let e=[],t=Object.getPrototypeOf(i);for(;Object.prototype!==t;)e=e.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return e}function o5(i){const e=[];for(const t of rxe(i))typeof i[t]=="function"&&e.push(t);return e}function oxe(i,e){const t=s=>function(){const r=Array.prototype.slice.call(arguments,0);return e(s,r)};let n={};for(const s of i)n[s]=t(s);return n}function kd(i){return i===null?void 0:i}function axe(i,e="Unreachable"){throw new Error(e)}const vn=mt("commandService"),Tt=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new z,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(i,e){if(!i)throw new Error("invalid command");if(typeof i=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:i,handler:e})}if(i.description){const o=[];for(let l of i.description.args)o.push(l.constraint);const a=i.handler;i.handler=function(l,...c){return nxe(c,o),a(l,...c)}}const{id:t}=i;let n=this._commands.get(t);n||(n=new _r,this._commands.set(t,n));let s=n.unshift(i),r=gt(()=>{s();const o=this._commands.get(t);o!=null&&o.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),r}registerCommandAlias(i,e){return Tt.registerCommand(i,(t,...n)=>t.get(vn).executeCommand(e,...n))}getCommand(i){const e=this._commands.get(i);if(!(!e||e.isEmpty()))return ct.first(e)}getCommands(){const i=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&i.set(e,t)}return i}};Tt.registerCommand("noop",()=>{});var _x;(function(i){i[i.API=0]="API",i[i.USER=1]="USER"})(_x||(_x={}));var X9=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const gu=mt("openerService"),lxe=Object.freeze({_serviceBrand:void 0,registerOpener(){return te.None},registerValidator(){return te.None},registerExternalUriResolver(){return te.None},setDefaultExternalOpener(){},registerExternalOpener(){return te.None},open(){return X9(this,void 0,void 0,function*(){return!1})},resolveExternalUri(i){return X9(this,void 0,void 0,function*(){return{resolved:i,dispose(){}}})}});function Qg(i,e){return We.isUri(i)?E_(i.scheme,e):e5(i,e+":")}var a5=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},bx=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},od=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};let rM=class{constructor(e){this._commandService=e}open(e,t){return od(this,void 0,void 0,function*(){if(!Qg(e,it.command))return!1;if(!(t!=null&&t.allowCommands))return!0;typeof e=="string"&&(e=We.parse(e));let n=[];try{n=nM(decodeURIComponent(e.query))}catch{try{n=nM(e.query)}catch{}}return Array.isArray(n)||(n=[n]),yield this._commandService.executeCommand(e.path,...n),!0})}};rM=a5([bx(0,vn)],rM);let oM=class{constructor(e){this._editorService=e}open(e,t){return od(this,void 0,void 0,function*(){typeof e=="string"&&(e=We.parse(e));let n;const s=/^L?(\d+)(?:,(\d+))?/.exec(e.fragment);return s&&(n={startLineNumber:parseInt(s[1]),startColumn:s[2]?parseInt(s[2]):1},e=e.with({fragment:""})),e.scheme===it.file&&(e=txe(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:n,context:t!=null&&t.fromUserGesture?_x.USER:_x.API},t==null?void 0:t.editorOptions)},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0})}};oM=a5([bx(0,ii)],oM);let aM=class{constructor(e,t){this._openers=new _r,this._validators=new _r,this._resolvers=new _r,this._resolvedUriTargets=new rs(n=>n.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new _r,this._defaultExternalOpener={openExternal:n=>od(this,void 0,void 0,function*(){return Qg(n,it.http)||Qg(n,it.https)?GZ(n):window.location.href=n,!0})},this._openers.push({open:(n,s)=>od(this,void 0,void 0,function*(){return s!=null&&s.openExternal||Qg(n,it.mailto)||Qg(n,it.http)||Qg(n,it.https)?(yield this._doOpenExternal(n,s),!0):!1})}),this._openers.push(new rM(t)),this._openers.push(new oM(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}open(e,t){var n;return od(this,void 0,void 0,function*(){const s=typeof e=="string"?We.parse(e):e,r=(n=this._resolvedUriTargets.get(s))!==null&&n!==void 0?n:e;for(const o of this._validators)if(!(yield o.shouldOpen(r)))return!1;for(const o of this._openers)if(yield o.open(e,t))return!0;return!1})}resolveExternalUri(e,t){return od(this,void 0,void 0,function*(){for(const n of this._resolvers)try{const s=yield n.resolveExternalUri(e,t);if(s)return this._resolvedUriTargets.has(s.resolved)||this._resolvedUriTargets.set(s.resolved,e),s}catch{}throw new Error("Could not resolve external URI: "+e.toString())})}_doOpenExternal(e,t){return od(this,void 0,void 0,function*(){const n=typeof e=="string"?We.parse(e):e;let s;try{s=(yield this.resolveExternalUri(n,t)).resolved}catch{s=n}let r;if(typeof e=="string"&&n.toString()===s.toString()?r=e:r=encodeURI(s.toString(!0)),t!=null&&t.allowContributedOpeners){const o=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(yield a.openExternal(r,{sourceUri:n,preferredOpenerId:o},Xt.None))return!0}return this._defaultExternalOpener.openExternal(r,{sourceUri:n},Xt.None)})}dispose(){this._validators.clear()}};aM=a5([bx(0,ii),bx(1,vn)],aM);function zC(i,e){if(!i)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function Ih(i){if(!i||typeof i!="object"||i instanceof RegExp)return i;const e=Array.isArray(i)?[]:{};return Object.keys(i).forEach(t=>{i[t]&&typeof i[t]=="object"?e[t]=Ih(i[t]):e[t]=i[t]}),e}function cxe(i){if(!i||typeof i!="object")return i;const e=[i];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const n in t)if(rY.call(t,n)){const s=t[n];typeof s=="object"&&!Object.isFrozen(s)&&e.push(s)}}return i}const rY=Object.prototype.hasOwnProperty;function hxe(i,e){return lM(i,e,new Set)}function lM(i,e,t){if(Mr(i))return i;const n=e(i);if(typeof n<"u")return n;if(nY(i)){const s=[];for(const r of i)s.push(lM(r,e,t));return s}if(xs(i)){if(t.has(i))throw new Error("Cannot clone recursive data-structure");t.add(i);const s={};for(let r in i)rY.call(i,r)&&(s[r]=lM(i[r],e,t));return t.delete(i),s}return i}function Ma(i,e,t=!0){return xs(i)?(xs(e)&&Object.keys(e).forEach(n=>{n in i?t&&(xs(i[n])&&xs(e[n])?Ma(i[n],e[n],t):i[n]=e[n]):i[n]=e[n]}),i):e}function ca(i,e){if(i===e)return!0;if(i==null||e===null||e===void 0||typeof i!=typeof e||typeof i!="object"||Array.isArray(i)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(i)){if(i.length!==e.length)return!1;for(t=0;t<i.length;t++)if(!ca(i[t],e[t]))return!1}else{const s=[];for(n in i)s.push(n);s.sort();const r=[];for(n in e)r.push(n);if(r.sort(),!ca(s,r))return!1;for(t=0;t<s.length;t++)if(!ca(i[s[t]],e[s[t]]))return!1}return!0}function $a(i,e,t){const n=e(i);return typeof n>"u"?t:n}const uxe={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class dxe extends te{constructor(e,t={}){super(),this._onDidUpdate=this._register(new z),this._editor=e,this._options=Ma(t,uxe,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=!!this._options.alwaysRevealFirst,this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(n=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(n=>{this.revealFirst=!0})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(t=>{!this._options.ignoreCharChanges&&t.charChanges?t.charChanges.forEach(n=>{this.ranges.push({rhs:!0,range:new F(n.modifiedStartLineNumber,n.modifiedStartColumn,n.modifiedEndLineNumber,n.modifiedEndColumn)})}):t.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new F(t.modifiedStartLineNumber,1,t.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new F(t.modifiedStartLineNumber,1,t.modifiedEndLineNumber+1,1)})}),this.ranges.sort((t,n)=>F.compareRangesUsingStarts(t.range,n.range)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1,n=this._editor.getPosition();if(!n){this.nextIdx=0;return}for(let s=0,r=this.ranges.length;s<r&&!t;s++){let o=this.ranges[s].range;n.isBeforeOrEqual(o.getStartPosition())&&(this.nextIdx=s+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,t){if(zC(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));let n=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{let s=n.range.getStartPosition();this._editor.setPosition(s),this._editor.revealRangeInCenter(n.range,t)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}const vx=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new z,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(i){i=Math.min(Math.max(-5,i),20),this._zoomLevel!==i&&(this._zoomLevel=i,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},fxe=ht?1.5:1.35,NA=8;class zd{constructor(e){this._bareFontInfoBrand=void 0,this.zoomLevel=e.zoomLevel,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}static createFromValidatedSettings(e,t,n,s){const r=e.get(42),o=e.get(46),a=e.get(45),l=e.get(44),c=e.get(58),h=e.get(55);return zd._create(r,o,a,l,c,h,t,n,s)}static _create(e,t,n,s,r,o,a,l,c){r===0?r=fxe*n:r<NA&&(r=r*n),r=Math.round(r),r<NA&&(r=NA);const h=1+(c?0:vx.getZoomLevel()*.1);return n*=h,r*=h,new zd({zoomLevel:a,pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:s,lineHeight:r,letterSpacing:o})}getId(){return this.zoomLevel+"-"+this.pixelRatio+"-"+this.fontFamily+"-"+this.fontWeight+"-"+this.fontSize+"-"+this.fontFeatureSettings+"-"+this.lineHeight+"-"+this.letterSpacing}getMassagedFontFamily(e){const t=zd._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const gxe=1;class cM extends zd{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=gxe,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}function pxe(i){return i&&typeof i.id=="string"}const UL={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};var Il;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(Il||(Il={}));var Sl;(function(i){i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter"})(Sl||(Sl={}));class HC{constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),this.indentSize=e.tabSize|0,this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&ca(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class Ev{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}var Hd;(function(i){i[i.Disabled=0]="Disabled",i[i.EnabledForActive=1]="EnabledForActive",i[i.Enabled=2]="Enabled"})(Hd||(Hd={}));class up{constructor(e,t,n){this.visibleColumn=e,this.className=t,this.horizontalLine=n}}class hM{constructor(e,t){this.top=e,this.endColumn=t}}class MA{constructor(e,t,n,s,r,o){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=s,this.isAutoWhitespaceEdit=r,this._isTracked=o}}class mxe{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}}function _xe(i){return l5(i,0)}function l5(i,e){switch(typeof i){case"object":return i===null?Tc(349,e):Array.isArray(i)?vxe(i,e):wxe(i,e);case"string":return c5(i,e);case"boolean":return bxe(i,e);case"number":return Tc(i,e);case"undefined":return Tc(937,e);default:return Tc(617,e)}}function Tc(i,e){return(e<<5)-e+i|0}function bxe(i,e){return Tc(i?433:863,e)}function c5(i,e){e=Tc(149417,e);for(let t=0,n=i.length;t<n;t++)e=Tc(i.charCodeAt(t),e);return e}function vxe(i,e){return e=Tc(104579,e),i.reduce((t,n)=>l5(n,t),e)}function wxe(i,e){return e=Tc(181387,e),Object.keys(i).sort().reduce((t,n)=>(t=c5(n,t),l5(i[n],t)),e)}function RA(i,e,t=32){const n=t-e,s=~((1<<n)-1);return(i<<e|(s&i)>>>n)>>>0}function J9(i,e=0,t=i.byteLength,n=0){for(let s=0;s<t;s++)i[e+s]=n}function yxe(i,e,t="0"){for(;i.length<e;)i=t+i;return i}function i_(i,e=32){return i instanceof ArrayBuffer?Array.from(new Uint8Array(i)).map(t=>t.toString(16).padStart(2,"0")).join(""):yxe((i>>>0).toString(16),e/4)}class $L{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const n=this._buff;let s=this._buffLen,r=this._leftoverHighSurrogate,o,a;for(r!==0?(o=r,a=-1,r=0):(o=e.charCodeAt(0),a=0);;){let l=o;if(_n(o))if(a+1<t){const c=e.charCodeAt(a+1);Cm(c)?(a++,l=t5(o,c)):l=65533}else{r=o;break}else Cm(o)&&(l=65533);if(s=this._push(n,s,l),a++,a<t)o=e.charCodeAt(a);else break}this._buffLen=s,this._leftoverHighSurrogate=r}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),i_(this._h0)+i_(this._h1)+i_(this._h2)+i_(this._h3)+i_(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,J9(this._buff,this._buffLen),this._buffLen>56&&(this._step(),J9(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=$L._bigBlock32,t=this._buffDV;for(let u=0;u<64;u+=4)e.setUint32(u,t.getUint32(u,!1),!1);for(let u=64;u<320;u+=4)e.setUint32(u,RA(e.getUint32(u-12,!1)^e.getUint32(u-32,!1)^e.getUint32(u-56,!1)^e.getUint32(u-64,!1),1),!1);let n=this._h0,s=this._h1,r=this._h2,o=this._h3,a=this._h4,l,c,h;for(let u=0;u<80;u++)u<20?(l=s&r|~s&o,c=1518500249):u<40?(l=s^r^o,c=1859775393):u<60?(l=s&r|s&o|r&o,c=2400959708):(l=s^r^o,c=3395469782),h=RA(n,5)+l+a+c+e.getUint32(u*4,!1)&4294967295,a=o,o=r,r=RA(s,30),s=n,n=h;this._h0=this._h0+n&4294967295,this._h1=this._h1+s&4294967295,this._h2=this._h2+r&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}}$L._bigBlock32=new DataView(new ArrayBuffer(320));function uo(i,e,t){return Math.min(Math.max(i,e),t)}const OA="**",e7="/",UC="[/\\\\]",$C="[^/\\\\]",Cxe=/\//g;function t7(i){switch(i){case 0:return"";case 1:return`${$C}*?`;default:return`(?:${UC}|${$C}+${UC}|${UC}${$C}+)*?`}}function i7(i,e){if(!i)return[];const t=[];let n=!1,s=!1,r="";for(const o of i){switch(o){case e:if(!n&&!s){t.push(r),r="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":s=!0;break;case"]":s=!1;break}r+=o}return r&&t.push(r),t}function oY(i){if(!i)return"";let e="";const t=i7(i,e7);if(t.every(n=>n===OA))e=".*";else{let n=!1;t.forEach((s,r)=>{if(s===OA){n||(e+=t7(2),n=!0);return}let o=!1,a="",l=!1,c="";for(const h of s){if(h!=="}"&&o){a+=h;continue}if(l&&(h!=="]"||!c)){let u;h==="-"?u=h:(h==="^"||h==="!")&&!c?u="^":h===e7?u="":u=wa(h),c+=u;continue}switch(h){case"{":o=!0;continue;case"[":l=!0;continue;case"}":const d=`(?:${i7(a,",").map(f=>oY(f)).join("|")})`;e+=d,o=!1,a="";break;case"]":e+="["+c+"]",l=!1,c="";break;case"?":e+=$C;continue;case"*":e+=t7(1);continue;default:e+=wa(h)}}r<t.length-1&&(t[r+1]!==OA||r+2<t.length)&&(e+=UC),n=!1})}return e}const Sxe=/^\*\*\/\*\.[\w\.-]+$/,xxe=/^\*\*\/([\w\.-]+)\/?$/,Dxe=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,Lxe=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,kxe=/^\*\*((\/[\w\.-]+)+)\/?$/,Axe=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,n7=new s5(1e4),s7=function(){return!1},xl=function(){return null};function h5(i,e){if(!i)return xl;let t;typeof i!="string"?t=i.pattern:t=i,t=t.trim();const n=`${t}_${!!e.trimForExclusions}`;let s=n7.get(n);if(s)return r7(s,i);let r;if(Sxe.test(t)){const o=t.substr(4);s=function(a,l){return typeof a=="string"&&a.endsWith(o)?t:null}}else(r=xxe.exec(PA(t,e)))?s=Exe(r[1],t):(e.trimForExclusions?Lxe:Dxe).test(t)?s=Ixe(t,e):(r=kxe.exec(PA(t,e)))?s=o7(r[1].substr(1),t,!0):(r=Axe.exec(PA(t,e)))?s=o7(r[1],t,!1):s=Txe(t);return n7.set(n,s),r7(s,i)}function r7(i,e){return typeof e=="string"?i:function(t,n){return QSe(t,e.base)?i(OCe(e.base,t),n):null}}function PA(i,e){return e.trimForExclusions&&i.endsWith("/**")?i.substr(0,i.length-2):i}function Exe(i,e){const t=`/${i}`,n=`\\${i}`,s=function(o,a){return typeof o!="string"?null:a?a===i?e:null:o===i||o.endsWith(t)||o.endsWith(n)?e:null},r=[i];return s.basenames=r,s.patterns=[e],s.allBasenames=r,s}function Ixe(i,e){const t=lY(i.slice(1,-1).split(",").map(a=>h5(a,e)).filter(a=>a!==xl),i),n=t.length;if(!n)return xl;if(n===1)return t[0];const s=function(a,l){for(let c=0,h=t.length;c<h;c++)if(t[c](a,l))return i;return null},r=t.find(a=>!!a.allBasenames);r&&(s.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function o7(i,e,t){const n=VC===Qi.sep,s=n?i:i.replace(Cxe,VC),r=VC+s,o=Qi.sep+i,a=t?function(l,c){return typeof l=="string"&&(l===s||l.endsWith(r)||!n&&(l===i||l.endsWith(o)))?e:null}:function(l,c){return typeof l=="string"&&(l===s||!n&&l===i)?e:null};return a.allPaths=[(t?"*/":"./")+i],a}function Txe(i){try{const e=new RegExp(`^${oY(i)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?i:null}}catch{return xl}}function Nxe(i,e,t){return!i||typeof e!="string"?!1:aY(i)(e,void 0,t)}function aY(i,e={}){if(!i)return s7;if(typeof i=="string"||Mxe(i)){const t=h5(i,e);if(t===xl)return s7;const n=function(s,r){return!!t(s,r)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return Rxe(i,e)}function Mxe(i){const e=i;return e&&typeof e.base=="string"&&typeof e.pattern=="string"}function Rxe(i,e){const t=lY(Object.getOwnPropertyNames(i).map(a=>Oxe(a,i[a],e)).filter(a=>a!==xl)),n=t.length;if(!n)return xl;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];const a=function(h,u){for(let d=0,f=t.length;d<f;d++){const g=t[d](h,u);if(g)return g}return null},l=t.find(h=>!!h.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((h,u)=>u.allPaths?h.concat(u.allPaths):h,[]);return c.length&&(a.allPaths=c),a}const s=function(a,l,c){let h;for(let u=0,d=t.length;u<d;u++){const f=t[u];f.requiresSiblings&&c&&(l||(l=Vd(a)),h||(h=l.substr(0,l.length-PCe(a).length)));const g=f(a,l,h,c);if(g)return g}return null},r=t.find(a=>!!a.allBasenames);r&&(s.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function Oxe(i,e,t){if(e===!1)return xl;const n=h5(i,t);if(n===xl)return xl;if(typeof e=="boolean")return n;if(e){const s=e.when;if(typeof s=="string"){const r=(o,a,l,c)=>{if(!c||!n(o,a))return null;const h=s.replace("$(basename)",l),u=c(h);return iSe(u)?u.then(d=>d?i:null):u?i:null};return r.requiresSiblings=!0,r}}return n}function lY(i,e){const t=i.filter(a=>!!a.basenames);if(t.length<2)return i;const n=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let s;if(e){s=[];for(let a=0,l=n.length;a<l;a++)s.push(e)}else s=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const r=function(a,l){if(typeof a!="string")return null;if(!l){let h;for(h=a.length;h>0;h--){const u=a.charCodeAt(h-1);if(u===47||u===92)break}l=a.substr(h)}const c=n.indexOf(l);return c!==-1?s[c]:null};r.basenames=n,r.patterns=s,r.allBasenames=n;const o=i.filter(a=>!a.basenames);return o.push(r),o}function cY(i,e,t,n){if(Array.isArray(i)){let s=0;for(const r of i){const o=cY(r,e,t,n);if(o===10)return o;o>s&&(s=o)}return s}else{if(typeof i=="string")return n?i==="*"?5:i===t?10:0:0;if(i){const{language:s,pattern:r,scheme:o,hasAccessToAllModels:a}=i;if(!n&&!a)return 0;let l=0;if(o)if(o===e.scheme)l=10;else if(o==="*")l=5;else return 0;if(s)if(s===t)l=10;else if(s==="*")l=Math.max(l,5);else return 0;if(r){let c;if(typeof r=="string"?c=r:c=Object.assign(Object.assign({},r),{base:$O(r.base)}),c===e.fsPath||Nxe(c,e.fsPath))l=10;else return 0}return l}else return 0}}const Rs=mt("modelService");function Pxe(i){return!i.isTooLargeForSyncing()&&!i.isForSimpleWidget}function hY(i){return typeof i=="string"?!1:Array.isArray(i)?i.every(hY):!!i.exclusive}class wi{constructor(){this._clock=0,this._entries=[],this._onDidChange=new z}get onDidChange(){return this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),gt(()=>{if(n){let s=this._entries.indexOf(n);s>=0&&(this._entries.splice(s,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(let n of this._entries)n._score>0&&t.push(n.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,n=>t.push(n.provider)),t}orderedGroups(e){const t=[];let n,s;return this._orderedForEach(e,r=>{n&&s===r._score?n.push(r.provider):(s=r._score,n=[r.provider],t.push(n))}),t}_orderedForEach(e,t){if(e){this._updateScores(e);for(const n of this._entries)n._score>0&&t(n)}}_updateScores(e){let t={uri:e.uri.toString(),language:e.getLanguageId()};if(!(this._lastCandidate&&this._lastCandidate.language===t.language&&this._lastCandidate.uri===t.uri)){this._lastCandidate=t;for(let n of this._entries)if(n._score=cY(n.selector,e.uri,e.getLanguageId(),Pxe(e)),hY(n.selector)&&n._score>0){for(let s of this._entries)s._score=0;n._score=1e3;break}this._entries.sort(wi._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0}}class Fxe{constructor(){this._map=new Map,this._promises=new Map,this._onDidChange=new z,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._map.set(e,t),this.fire([e]),gt(()=>{this._map.get(e)===t&&(this._map.delete(e),this.fire([e]))})}registerPromise(e,t){let n=null,s=!1;return this._promises.set(e,t.then(r=>{this._promises.delete(e),!(s||!r)&&(n=this.register(e,r))})),gt(()=>{s=!0,n&&n.dispose()})}getPromise(e){const t=this.get(e);if(t)return Promise.resolve(t);const n=this._promises.get(e);return n?n.then(s=>this.get(e)):null}get(e){return this._map.get(e)||null}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}let Bxe=class{constructor(){this._icons=new Map,this._onDidRegister=new z}add(e){const t=this._icons.get(e.id);t?e.description?t.description=e.description:console.error(`Duplicate registration of codicon ${e.id}`):(this._icons.set(e.id,e),this._onDidRegister.fire(e))}get(e){return this._icons.get(e)}get all(){return this._icons.values()}get onDidRegister(){return this._onDidRegister.event}};const uY=new Bxe,wx=uY;function Bo(i,e){return new be(i,e)}function Vxe(i){return i?i.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}class be{constructor(e,t,n){this.id=e,this.definition=t,this.description=n,uY.add(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}}var Gs;(function(i){i.iconNameSegment="[A-Za-z0-9]+",i.iconNameExpression="[A-Za-z0-9\\-]+",i.iconModifierExpression="~[A-Za-z]+";const e=new RegExp(`^(${i.iconNameExpression})(${i.iconModifierExpression})?$`);function t(r){if(r instanceof be)return["codicon","codicon-"+r.id];const o=e.exec(r.id);if(!o)return t(be.error);let[,a,l]=o;const c=["codicon","codicon-"+a];return l&&c.push("codicon-modifier-"+l.substr(1)),c}i.asClassNameArray=t;function n(r){return t(r).join(" ")}i.asClassName=n;function s(r){return"."+t(r).join(".")}i.asCSSSelector=s})(Gs||(Gs={}));(function(i){i.add=new i("add",{fontCharacter:"\\ea60"}),i.plus=new i("plus",i.add.definition),i.gistNew=new i("gist-new",i.add.definition),i.repoCreate=new i("repo-create",i.add.definition),i.lightbulb=new i("lightbulb",{fontCharacter:"\\ea61"}),i.lightBulb=new i("light-bulb",{fontCharacter:"\\ea61"}),i.repo=new i("repo",{fontCharacter:"\\ea62"}),i.repoDelete=new i("repo-delete",{fontCharacter:"\\ea62"}),i.gistFork=new i("gist-fork",{fontCharacter:"\\ea63"}),i.repoForked=new i("repo-forked",{fontCharacter:"\\ea63"}),i.gitPullRequest=new i("git-pull-request",{fontCharacter:"\\ea64"}),i.gitPullRequestAbandoned=new i("git-pull-request-abandoned",{fontCharacter:"\\ea64"}),i.recordKeys=new i("record-keys",{fontCharacter:"\\ea65"}),i.keyboard=new i("keyboard",{fontCharacter:"\\ea65"}),i.tag=new i("tag",{fontCharacter:"\\ea66"}),i.tagAdd=new i("tag-add",{fontCharacter:"\\ea66"}),i.tagRemove=new i("tag-remove",{fontCharacter:"\\ea66"}),i.person=new i("person",{fontCharacter:"\\ea67"}),i.personFollow=new i("person-follow",{fontCharacter:"\\ea67"}),i.personOutline=new i("person-outline",{fontCharacter:"\\ea67"}),i.personFilled=new i("person-filled",{fontCharacter:"\\ea67"}),i.gitBranch=new i("git-branch",{fontCharacter:"\\ea68"}),i.gitBranchCreate=new i("git-branch-create",{fontCharacter:"\\ea68"}),i.gitBranchDelete=new i("git-branch-delete",{fontCharacter:"\\ea68"}),i.sourceControl=new i("source-control",{fontCharacter:"\\ea68"}),i.mirror=new i("mirror",{fontCharacter:"\\ea69"}),i.mirrorPublic=new i("mirror-public",{fontCharacter:"\\ea69"}),i.star=new i("star",{fontCharacter:"\\ea6a"}),i.starAdd=new i("star-add",{fontCharacter:"\\ea6a"}),i.starDelete=new i("star-delete",{fontCharacter:"\\ea6a"}),i.starEmpty=new i("star-empty",{fontCharacter:"\\ea6a"}),i.comment=new i("comment",{fontCharacter:"\\ea6b"}),i.commentAdd=new i("comment-add",{fontCharacter:"\\ea6b"}),i.alert=new i("alert",{fontCharacter:"\\ea6c"}),i.warning=new i("warning",{fontCharacter:"\\ea6c"}),i.search=new i("search",{fontCharacter:"\\ea6d"}),i.searchSave=new i("search-save",{fontCharacter:"\\ea6d"}),i.logOut=new i("log-out",{fontCharacter:"\\ea6e"}),i.signOut=new i("sign-out",{fontCharacter:"\\ea6e"}),i.logIn=new i("log-in",{fontCharacter:"\\ea6f"}),i.signIn=new i("sign-in",{fontCharacter:"\\ea6f"}),i.eye=new i("eye",{fontCharacter:"\\ea70"}),i.eyeUnwatch=new i("eye-unwatch",{fontCharacter:"\\ea70"}),i.eyeWatch=new i("eye-watch",{fontCharacter:"\\ea70"}),i.circleFilled=new i("circle-filled",{fontCharacter:"\\ea71"}),i.primitiveDot=new i("primitive-dot",{fontCharacter:"\\ea71"}),i.closeDirty=new i("close-dirty",{fontCharacter:"\\ea71"}),i.debugBreakpoint=new i("debug-breakpoint",{fontCharacter:"\\ea71"}),i.debugBreakpointDisabled=new i("debug-breakpoint-disabled",{fontCharacter:"\\ea71"}),i.debugHint=new i("debug-hint",{fontCharacter:"\\ea71"}),i.primitiveSquare=new i("primitive-square",{fontCharacter:"\\ea72"}),i.edit=new i("edit",{fontCharacter:"\\ea73"}),i.pencil=new i("pencil",{fontCharacter:"\\ea73"}),i.info=new i("info",{fontCharacter:"\\ea74"}),i.issueOpened=new i("issue-opened",{fontCharacter:"\\ea74"}),i.gistPrivate=new i("gist-private",{fontCharacter:"\\ea75"}),i.gitForkPrivate=new i("git-fork-private",{fontCharacter:"\\ea75"}),i.lock=new i("lock",{fontCharacter:"\\ea75"}),i.mirrorPrivate=new i("mirror-private",{fontCharacter:"\\ea75"}),i.close=new i("close",{fontCharacter:"\\ea76"}),i.removeClose=new i("remove-close",{fontCharacter:"\\ea76"}),i.x=new i("x",{fontCharacter:"\\ea76"}),i.repoSync=new i("repo-sync",{fontCharacter:"\\ea77"}),i.sync=new i("sync",{fontCharacter:"\\ea77"}),i.clone=new i("clone",{fontCharacter:"\\ea78"}),i.desktopDownload=new i("desktop-download",{fontCharacter:"\\ea78"}),i.beaker=new i("beaker",{fontCharacter:"\\ea79"}),i.microscope=new i("microscope",{fontCharacter:"\\ea79"}),i.vm=new i("vm",{fontCharacter:"\\ea7a"}),i.deviceDesktop=new i("device-desktop",{fontCharacter:"\\ea7a"}),i.file=new i("file",{fontCharacter:"\\ea7b"}),i.fileText=new i("file-text",{fontCharacter:"\\ea7b"}),i.more=new i("more",{fontCharacter:"\\ea7c"}),i.ellipsis=new i("ellipsis",{fontCharacter:"\\ea7c"}),i.kebabHorizontal=new i("kebab-horizontal",{fontCharacter:"\\ea7c"}),i.mailReply=new i("mail-reply",{fontCharacter:"\\ea7d"}),i.reply=new i("reply",{fontCharacter:"\\ea7d"}),i.organization=new i("organization",{fontCharacter:"\\ea7e"}),i.organizationFilled=new i("organization-filled",{fontCharacter:"\\ea7e"}),i.organizationOutline=new i("organization-outline",{fontCharacter:"\\ea7e"}),i.newFile=new i("new-file",{fontCharacter:"\\ea7f"}),i.fileAdd=new i("file-add",{fontCharacter:"\\ea7f"}),i.newFolder=new i("new-folder",{fontCharacter:"\\ea80"}),i.fileDirectoryCreate=new i("file-directory-create",{fontCharacter:"\\ea80"}),i.trash=new i("trash",{fontCharacter:"\\ea81"}),i.trashcan=new i("trashcan",{fontCharacter:"\\ea81"}),i.history=new i("history",{fontCharacter:"\\ea82"}),i.clock=new i("clock",{fontCharacter:"\\ea82"}),i.folder=new i("folder",{fontCharacter:"\\ea83"}),i.fileDirectory=new i("file-directory",{fontCharacter:"\\ea83"}),i.symbolFolder=new i("symbol-folder",{fontCharacter:"\\ea83"}),i.logoGithub=new i("logo-github",{fontCharacter:"\\ea84"}),i.markGithub=new i("mark-github",{fontCharacter:"\\ea84"}),i.github=new i("github",{fontCharacter:"\\ea84"}),i.terminal=new i("terminal",{fontCharacter:"\\ea85"}),i.console=new i("console",{fontCharacter:"\\ea85"}),i.repl=new i("repl",{fontCharacter:"\\ea85"}),i.zap=new i("zap",{fontCharacter:"\\ea86"}),i.symbolEvent=new i("symbol-event",{fontCharacter:"\\ea86"}),i.error=new i("error",{fontCharacter:"\\ea87"}),i.stop=new i("stop",{fontCharacter:"\\ea87"}),i.variable=new i("variable",{fontCharacter:"\\ea88"}),i.symbolVariable=new i("symbol-variable",{fontCharacter:"\\ea88"}),i.array=new i("array",{fontCharacter:"\\ea8a"}),i.symbolArray=new i("symbol-array",{fontCharacter:"\\ea8a"}),i.symbolModule=new i("symbol-module",{fontCharacter:"\\ea8b"}),i.symbolPackage=new i("symbol-package",{fontCharacter:"\\ea8b"}),i.symbolNamespace=new i("symbol-namespace",{fontCharacter:"\\ea8b"}),i.symbolObject=new i("symbol-object",{fontCharacter:"\\ea8b"}),i.symbolMethod=new i("symbol-method",{fontCharacter:"\\ea8c"}),i.symbolFunction=new i("symbol-function",{fontCharacter:"\\ea8c"}),i.symbolConstructor=new i("symbol-constructor",{fontCharacter:"\\ea8c"}),i.symbolBoolean=new i("symbol-boolean",{fontCharacter:"\\ea8f"}),i.symbolNull=new i("symbol-null",{fontCharacter:"\\ea8f"}),i.symbolNumeric=new i("symbol-numeric",{fontCharacter:"\\ea90"}),i.symbolNumber=new i("symbol-number",{fontCharacter:"\\ea90"}),i.symbolStructure=new i("symbol-structure",{fontCharacter:"\\ea91"}),i.symbolStruct=new i("symbol-struct",{fontCharacter:"\\ea91"}),i.symbolParameter=new i("symbol-parameter",{fontCharacter:"\\ea92"}),i.symbolTypeParameter=new i("symbol-type-parameter",{fontCharacter:"\\ea92"}),i.symbolKey=new i("symbol-key",{fontCharacter:"\\ea93"}),i.symbolText=new i("symbol-text",{fontCharacter:"\\ea93"}),i.symbolReference=new i("symbol-reference",{fontCharacter:"\\ea94"}),i.goToFile=new i("go-to-file",{fontCharacter:"\\ea94"}),i.symbolEnum=new i("symbol-enum",{fontCharacter:"\\ea95"}),i.symbolValue=new i("symbol-value",{fontCharacter:"\\ea95"}),i.symbolRuler=new i("symbol-ruler",{fontCharacter:"\\ea96"}),i.symbolUnit=new i("symbol-unit",{fontCharacter:"\\ea96"}),i.activateBreakpoints=new i("activate-breakpoints",{fontCharacter:"\\ea97"}),i.archive=new i("archive",{fontCharacter:"\\ea98"}),i.arrowBoth=new i("arrow-both",{fontCharacter:"\\ea99"}),i.arrowDown=new i("arrow-down",{fontCharacter:"\\ea9a"}),i.arrowLeft=new i("arrow-left",{fontCharacter:"\\ea9b"}),i.arrowRight=new i("arrow-right",{fontCharacter:"\\ea9c"}),i.arrowSmallDown=new i("arrow-small-down",{fontCharacter:"\\ea9d"}),i.arrowSmallLeft=new i("arrow-small-left",{fontCharacter:"\\ea9e"}),i.arrowSmallRight=new i("arrow-small-right",{fontCharacter:"\\ea9f"}),i.arrowSmallUp=new i("arrow-small-up",{fontCharacter:"\\eaa0"}),i.arrowUp=new i("arrow-up",{fontCharacter:"\\eaa1"}),i.bell=new i("bell",{fontCharacter:"\\eaa2"}),i.bold=new i("bold",{fontCharacter:"\\eaa3"}),i.book=new i("book",{fontCharacter:"\\eaa4"}),i.bookmark=new i("bookmark",{fontCharacter:"\\eaa5"}),i.debugBreakpointConditionalUnverified=new i("debug-breakpoint-conditional-unverified",{fontCharacter:"\\eaa6"}),i.debugBreakpointConditional=new i("debug-breakpoint-conditional",{fontCharacter:"\\eaa7"}),i.debugBreakpointConditionalDisabled=new i("debug-breakpoint-conditional-disabled",{fontCharacter:"\\eaa7"}),i.debugBreakpointDataUnverified=new i("debug-breakpoint-data-unverified",{fontCharacter:"\\eaa8"}),i.debugBreakpointData=new i("debug-breakpoint-data",{fontCharacter:"\\eaa9"}),i.debugBreakpointDataDisabled=new i("debug-breakpoint-data-disabled",{fontCharacter:"\\eaa9"}),i.debugBreakpointLogUnverified=new i("debug-breakpoint-log-unverified",{fontCharacter:"\\eaaa"}),i.debugBreakpointLog=new i("debug-breakpoint-log",{fontCharacter:"\\eaab"}),i.debugBreakpointLogDisabled=new i("debug-breakpoint-log-disabled",{fontCharacter:"\\eaab"}),i.briefcase=new i("briefcase",{fontCharacter:"\\eaac"}),i.broadcast=new i("broadcast",{fontCharacter:"\\eaad"}),i.browser=new i("browser",{fontCharacter:"\\eaae"}),i.bug=new i("bug",{fontCharacter:"\\eaaf"}),i.calendar=new i("calendar",{fontCharacter:"\\eab0"}),i.caseSensitive=new i("case-sensitive",{fontCharacter:"\\eab1"}),i.check=new i("check",{fontCharacter:"\\eab2"}),i.checklist=new i("checklist",{fontCharacter:"\\eab3"}),i.chevronDown=new i("chevron-down",{fontCharacter:"\\eab4"}),i.dropDownButton=new i("drop-down-button",i.chevronDown.definition),i.chevronLeft=new i("chevron-left",{fontCharacter:"\\eab5"}),i.chevronRight=new i("chevron-right",{fontCharacter:"\\eab6"}),i.chevronUp=new i("chevron-up",{fontCharacter:"\\eab7"}),i.chromeClose=new i("chrome-close",{fontCharacter:"\\eab8"}),i.chromeMaximize=new i("chrome-maximize",{fontCharacter:"\\eab9"}),i.chromeMinimize=new i("chrome-minimize",{fontCharacter:"\\eaba"}),i.chromeRestore=new i("chrome-restore",{fontCharacter:"\\eabb"}),i.circleOutline=new i("circle-outline",{fontCharacter:"\\eabc"}),i.debugBreakpointUnverified=new i("debug-breakpoint-unverified",{fontCharacter:"\\eabc"}),i.circleSlash=new i("circle-slash",{fontCharacter:"\\eabd"}),i.circuitBoard=new i("circuit-board",{fontCharacter:"\\eabe"}),i.clearAll=new i("clear-all",{fontCharacter:"\\eabf"}),i.clippy=new i("clippy",{fontCharacter:"\\eac0"}),i.closeAll=new i("close-all",{fontCharacter:"\\eac1"}),i.cloudDownload=new i("cloud-download",{fontCharacter:"\\eac2"}),i.cloudUpload=new i("cloud-upload",{fontCharacter:"\\eac3"}),i.code=new i("code",{fontCharacter:"\\eac4"}),i.collapseAll=new i("collapse-all",{fontCharacter:"\\eac5"}),i.colorMode=new i("color-mode",{fontCharacter:"\\eac6"}),i.commentDiscussion=new i("comment-discussion",{fontCharacter:"\\eac7"}),i.compareChanges=new i("compare-changes",{fontCharacter:"\\eafd"}),i.creditCard=new i("credit-card",{fontCharacter:"\\eac9"}),i.dash=new i("dash",{fontCharacter:"\\eacc"}),i.dashboard=new i("dashboard",{fontCharacter:"\\eacd"}),i.database=new i("database",{fontCharacter:"\\eace"}),i.debugContinue=new i("debug-continue",{fontCharacter:"\\eacf"}),i.debugDisconnect=new i("debug-disconnect",{fontCharacter:"\\ead0"}),i.debugPause=new i("debug-pause",{fontCharacter:"\\ead1"}),i.debugRestart=new i("debug-restart",{fontCharacter:"\\ead2"}),i.debugStart=new i("debug-start",{fontCharacter:"\\ead3"}),i.debugStepInto=new i("debug-step-into",{fontCharacter:"\\ead4"}),i.debugStepOut=new i("debug-step-out",{fontCharacter:"\\ead5"}),i.debugStepOver=new i("debug-step-over",{fontCharacter:"\\ead6"}),i.debugStop=new i("debug-stop",{fontCharacter:"\\ead7"}),i.debug=new i("debug",{fontCharacter:"\\ead8"}),i.deviceCameraVideo=new i("device-camera-video",{fontCharacter:"\\ead9"}),i.deviceCamera=new i("device-camera",{fontCharacter:"\\eada"}),i.deviceMobile=new i("device-mobile",{fontCharacter:"\\eadb"}),i.diffAdded=new i("diff-added",{fontCharacter:"\\eadc"}),i.diffIgnored=new i("diff-ignored",{fontCharacter:"\\eadd"}),i.diffModified=new i("diff-modified",{fontCharacter:"\\eade"}),i.diffRemoved=new i("diff-removed",{fontCharacter:"\\eadf"}),i.diffRenamed=new i("diff-renamed",{fontCharacter:"\\eae0"}),i.diff=new i("diff",{fontCharacter:"\\eae1"}),i.discard=new i("discard",{fontCharacter:"\\eae2"}),i.editorLayout=new i("editor-layout",{fontCharacter:"\\eae3"}),i.emptyWindow=new i("empty-window",{fontCharacter:"\\eae4"}),i.exclude=new i("exclude",{fontCharacter:"\\eae5"}),i.extensions=new i("extensions",{fontCharacter:"\\eae6"}),i.eyeClosed=new i("eye-closed",{fontCharacter:"\\eae7"}),i.fileBinary=new i("file-binary",{fontCharacter:"\\eae8"}),i.fileCode=new i("file-code",{fontCharacter:"\\eae9"}),i.fileMedia=new i("file-media",{fontCharacter:"\\eaea"}),i.filePdf=new i("file-pdf",{fontCharacter:"\\eaeb"}),i.fileSubmodule=new i("file-submodule",{fontCharacter:"\\eaec"}),i.fileSymlinkDirectory=new i("file-symlink-directory",{fontCharacter:"\\eaed"}),i.fileSymlinkFile=new i("file-symlink-file",{fontCharacter:"\\eaee"}),i.fileZip=new i("file-zip",{fontCharacter:"\\eaef"}),i.files=new i("files",{fontCharacter:"\\eaf0"}),i.filter=new i("filter",{fontCharacter:"\\eaf1"}),i.flame=new i("flame",{fontCharacter:"\\eaf2"}),i.foldDown=new i("fold-down",{fontCharacter:"\\eaf3"}),i.foldUp=new i("fold-up",{fontCharacter:"\\eaf4"}),i.fold=new i("fold",{fontCharacter:"\\eaf5"}),i.folderActive=new i("folder-active",{fontCharacter:"\\eaf6"}),i.folderOpened=new i("folder-opened",{fontCharacter:"\\eaf7"}),i.gear=new i("gear",{fontCharacter:"\\eaf8"}),i.gift=new i("gift",{fontCharacter:"\\eaf9"}),i.gistSecret=new i("gist-secret",{fontCharacter:"\\eafa"}),i.gist=new i("gist",{fontCharacter:"\\eafb"}),i.gitCommit=new i("git-commit",{fontCharacter:"\\eafc"}),i.gitCompare=new i("git-compare",{fontCharacter:"\\eafd"}),i.gitMerge=new i("git-merge",{fontCharacter:"\\eafe"}),i.githubAction=new i("github-action",{fontCharacter:"\\eaff"}),i.githubAlt=new i("github-alt",{fontCharacter:"\\eb00"}),i.globe=new i("globe",{fontCharacter:"\\eb01"}),i.grabber=new i("grabber",{fontCharacter:"\\eb02"}),i.graph=new i("graph",{fontCharacter:"\\eb03"}),i.gripper=new i("gripper",{fontCharacter:"\\eb04"}),i.heart=new i("heart",{fontCharacter:"\\eb05"}),i.home=new i("home",{fontCharacter:"\\eb06"}),i.horizontalRule=new i("horizontal-rule",{fontCharacter:"\\eb07"}),i.hubot=new i("hubot",{fontCharacter:"\\eb08"}),i.inbox=new i("inbox",{fontCharacter:"\\eb09"}),i.issueClosed=new i("issue-closed",{fontCharacter:"\\eba4"}),i.issueReopened=new i("issue-reopened",{fontCharacter:"\\eb0b"}),i.issues=new i("issues",{fontCharacter:"\\eb0c"}),i.italic=new i("italic",{fontCharacter:"\\eb0d"}),i.jersey=new i("jersey",{fontCharacter:"\\eb0e"}),i.json=new i("json",{fontCharacter:"\\eb0f"}),i.kebabVertical=new i("kebab-vertical",{fontCharacter:"\\eb10"}),i.key=new i("key",{fontCharacter:"\\eb11"}),i.law=new i("law",{fontCharacter:"\\eb12"}),i.lightbulbAutofix=new i("lightbulb-autofix",{fontCharacter:"\\eb13"}),i.linkExternal=new i("link-external",{fontCharacter:"\\eb14"}),i.link=new i("link",{fontCharacter:"\\eb15"}),i.listOrdered=new i("list-ordered",{fontCharacter:"\\eb16"}),i.listUnordered=new i("list-unordered",{fontCharacter:"\\eb17"}),i.liveShare=new i("live-share",{fontCharacter:"\\eb18"}),i.loading=new i("loading",{fontCharacter:"\\eb19"}),i.location=new i("location",{fontCharacter:"\\eb1a"}),i.mailRead=new i("mail-read",{fontCharacter:"\\eb1b"}),i.mail=new i("mail",{fontCharacter:"\\eb1c"}),i.markdown=new i("markdown",{fontCharacter:"\\eb1d"}),i.megaphone=new i("megaphone",{fontCharacter:"\\eb1e"}),i.mention=new i("mention",{fontCharacter:"\\eb1f"}),i.milestone=new i("milestone",{fontCharacter:"\\eb20"}),i.mortarBoard=new i("mortar-board",{fontCharacter:"\\eb21"}),i.move=new i("move",{fontCharacter:"\\eb22"}),i.multipleWindows=new i("multiple-windows",{fontCharacter:"\\eb23"}),i.mute=new i("mute",{fontCharacter:"\\eb24"}),i.noNewline=new i("no-newline",{fontCharacter:"\\eb25"}),i.note=new i("note",{fontCharacter:"\\eb26"}),i.octoface=new i("octoface",{fontCharacter:"\\eb27"}),i.openPreview=new i("open-preview",{fontCharacter:"\\eb28"}),i.package_=new i("package",{fontCharacter:"\\eb29"}),i.paintcan=new i("paintcan",{fontCharacter:"\\eb2a"}),i.pin=new i("pin",{fontCharacter:"\\eb2b"}),i.play=new i("play",{fontCharacter:"\\eb2c"}),i.run=new i("run",{fontCharacter:"\\eb2c"}),i.plug=new i("plug",{fontCharacter:"\\eb2d"}),i.preserveCase=new i("preserve-case",{fontCharacter:"\\eb2e"}),i.preview=new i("preview",{fontCharacter:"\\eb2f"}),i.project=new i("project",{fontCharacter:"\\eb30"}),i.pulse=new i("pulse",{fontCharacter:"\\eb31"}),i.question=new i("question",{fontCharacter:"\\eb32"}),i.quote=new i("quote",{fontCharacter:"\\eb33"}),i.radioTower=new i("radio-tower",{fontCharacter:"\\eb34"}),i.reactions=new i("reactions",{fontCharacter:"\\eb35"}),i.references=new i("references",{fontCharacter:"\\eb36"}),i.refresh=new i("refresh",{fontCharacter:"\\eb37"}),i.regex=new i("regex",{fontCharacter:"\\eb38"}),i.remoteExplorer=new i("remote-explorer",{fontCharacter:"\\eb39"}),i.remote=new i("remote",{fontCharacter:"\\eb3a"}),i.remove=new i("remove",{fontCharacter:"\\eb3b"}),i.replaceAll=new i("replace-all",{fontCharacter:"\\eb3c"}),i.replace=new i("replace",{fontCharacter:"\\eb3d"}),i.repoClone=new i("repo-clone",{fontCharacter:"\\eb3e"}),i.repoForcePush=new i("repo-force-push",{fontCharacter:"\\eb3f"}),i.repoPull=new i("repo-pull",{fontCharacter:"\\eb40"}),i.repoPush=new i("repo-push",{fontCharacter:"\\eb41"}),i.report=new i("report",{fontCharacter:"\\eb42"}),i.requestChanges=new i("request-changes",{fontCharacter:"\\eb43"}),i.rocket=new i("rocket",{fontCharacter:"\\eb44"}),i.rootFolderOpened=new i("root-folder-opened",{fontCharacter:"\\eb45"}),i.rootFolder=new i("root-folder",{fontCharacter:"\\eb46"}),i.rss=new i("rss",{fontCharacter:"\\eb47"}),i.ruby=new i("ruby",{fontCharacter:"\\eb48"}),i.saveAll=new i("save-all",{fontCharacter:"\\eb49"}),i.saveAs=new i("save-as",{fontCharacter:"\\eb4a"}),i.save=new i("save",{fontCharacter:"\\eb4b"}),i.screenFull=new i("screen-full",{fontCharacter:"\\eb4c"}),i.screenNormal=new i("screen-normal",{fontCharacter:"\\eb4d"}),i.searchStop=new i("search-stop",{fontCharacter:"\\eb4e"}),i.server=new i("server",{fontCharacter:"\\eb50"}),i.settingsGear=new i("settings-gear",{fontCharacter:"\\eb51"}),i.settings=new i("settings",{fontCharacter:"\\eb52"}),i.shield=new i("shield",{fontCharacter:"\\eb53"}),i.smiley=new i("smiley",{fontCharacter:"\\eb54"}),i.sortPrecedence=new i("sort-precedence",{fontCharacter:"\\eb55"}),i.splitHorizontal=new i("split-horizontal",{fontCharacter:"\\eb56"}),i.splitVertical=new i("split-vertical",{fontCharacter:"\\eb57"}),i.squirrel=new i("squirrel",{fontCharacter:"\\eb58"}),i.starFull=new i("star-full",{fontCharacter:"\\eb59"}),i.starHalf=new i("star-half",{fontCharacter:"\\eb5a"}),i.symbolClass=new i("symbol-class",{fontCharacter:"\\eb5b"}),i.symbolColor=new i("symbol-color",{fontCharacter:"\\eb5c"}),i.symbolConstant=new i("symbol-constant",{fontCharacter:"\\eb5d"}),i.symbolEnumMember=new i("symbol-enum-member",{fontCharacter:"\\eb5e"}),i.symbolField=new i("symbol-field",{fontCharacter:"\\eb5f"}),i.symbolFile=new i("symbol-file",{fontCharacter:"\\eb60"}),i.symbolInterface=new i("symbol-interface",{fontCharacter:"\\eb61"}),i.symbolKeyword=new i("symbol-keyword",{fontCharacter:"\\eb62"}),i.symbolMisc=new i("symbol-misc",{fontCharacter:"\\eb63"}),i.symbolOperator=new i("symbol-operator",{fontCharacter:"\\eb64"}),i.symbolProperty=new i("symbol-property",{fontCharacter:"\\eb65"}),i.wrench=new i("wrench",{fontCharacter:"\\eb65"}),i.wrenchSubaction=new i("wrench-subaction",{fontCharacter:"\\eb65"}),i.symbolSnippet=new i("symbol-snippet",{fontCharacter:"\\eb66"}),i.tasklist=new i("tasklist",{fontCharacter:"\\eb67"}),i.telescope=new i("telescope",{fontCharacter:"\\eb68"}),i.textSize=new i("text-size",{fontCharacter:"\\eb69"}),i.threeBars=new i("three-bars",{fontCharacter:"\\eb6a"}),i.thumbsdown=new i("thumbsdown",{fontCharacter:"\\eb6b"}),i.thumbsup=new i("thumbsup",{fontCharacter:"\\eb6c"}),i.tools=new i("tools",{fontCharacter:"\\eb6d"}),i.triangleDown=new i("triangle-down",{fontCharacter:"\\eb6e"}),i.triangleLeft=new i("triangle-left",{fontCharacter:"\\eb6f"}),i.triangleRight=new i("triangle-right",{fontCharacter:"\\eb70"}),i.triangleUp=new i("triangle-up",{fontCharacter:"\\eb71"}),i.twitter=new i("twitter",{fontCharacter:"\\eb72"}),i.unfold=new i("unfold",{fontCharacter:"\\eb73"}),i.unlock=new i("unlock",{fontCharacter:"\\eb74"}),i.unmute=new i("unmute",{fontCharacter:"\\eb75"}),i.unverified=new i("unverified",{fontCharacter:"\\eb76"}),i.verified=new i("verified",{fontCharacter:"\\eb77"}),i.versions=new i("versions",{fontCharacter:"\\eb78"}),i.vmActive=new i("vm-active",{fontCharacter:"\\eb79"}),i.vmOutline=new i("vm-outline",{fontCharacter:"\\eb7a"}),i.vmRunning=new i("vm-running",{fontCharacter:"\\eb7b"}),i.watch=new i("watch",{fontCharacter:"\\eb7c"}),i.whitespace=new i("whitespace",{fontCharacter:"\\eb7d"}),i.wholeWord=new i("whole-word",{fontCharacter:"\\eb7e"}),i.window=new i("window",{fontCharacter:"\\eb7f"}),i.wordWrap=new i("word-wrap",{fontCharacter:"\\eb80"}),i.zoomIn=new i("zoom-in",{fontCharacter:"\\eb81"}),i.zoomOut=new i("zoom-out",{fontCharacter:"\\eb82"}),i.listFilter=new i("list-filter",{fontCharacter:"\\eb83"}),i.listFlat=new i("list-flat",{fontCharacter:"\\eb84"}),i.listSelection=new i("list-selection",{fontCharacter:"\\eb85"}),i.selection=new i("selection",{fontCharacter:"\\eb85"}),i.listTree=new i("list-tree",{fontCharacter:"\\eb86"}),i.debugBreakpointFunctionUnverified=new i("debug-breakpoint-function-unverified",{fontCharacter:"\\eb87"}),i.debugBreakpointFunction=new i("debug-breakpoint-function",{fontCharacter:"\\eb88"}),i.debugBreakpointFunctionDisabled=new i("debug-breakpoint-function-disabled",{fontCharacter:"\\eb88"}),i.debugStackframeActive=new i("debug-stackframe-active",{fontCharacter:"\\eb89"}),i.debugStackframeDot=new i("debug-stackframe-dot",{fontCharacter:"\\eb8a"}),i.debugStackframe=new i("debug-stackframe",{fontCharacter:"\\eb8b"}),i.debugStackframeFocused=new i("debug-stackframe-focused",{fontCharacter:"\\eb8b"}),i.debugBreakpointUnsupported=new i("debug-breakpoint-unsupported",{fontCharacter:"\\eb8c"}),i.symbolString=new i("symbol-string",{fontCharacter:"\\eb8d"}),i.debugReverseContinue=new i("debug-reverse-continue",{fontCharacter:"\\eb8e"}),i.debugStepBack=new i("debug-step-back",{fontCharacter:"\\eb8f"}),i.debugRestartFrame=new i("debug-restart-frame",{fontCharacter:"\\eb90"}),i.callIncoming=new i("call-incoming",{fontCharacter:"\\eb92"}),i.callOutgoing=new i("call-outgoing",{fontCharacter:"\\eb93"}),i.menu=new i("menu",{fontCharacter:"\\eb94"}),i.expandAll=new i("expand-all",{fontCharacter:"\\eb95"}),i.feedback=new i("feedback",{fontCharacter:"\\eb96"}),i.groupByRefType=new i("group-by-ref-type",{fontCharacter:"\\eb97"}),i.ungroupByRefType=new i("ungroup-by-ref-type",{fontCharacter:"\\eb98"}),i.account=new i("account",{fontCharacter:"\\eb99"}),i.bellDot=new i("bell-dot",{fontCharacter:"\\eb9a"}),i.debugConsole=new i("debug-console",{fontCharacter:"\\eb9b"}),i.library=new i("library",{fontCharacter:"\\eb9c"}),i.output=new i("output",{fontCharacter:"\\eb9d"}),i.runAll=new i("run-all",{fontCharacter:"\\eb9e"}),i.syncIgnored=new i("sync-ignored",{fontCharacter:"\\eb9f"}),i.pinned=new i("pinned",{fontCharacter:"\\eba0"}),i.githubInverted=new i("github-inverted",{fontCharacter:"\\eba1"}),i.debugAlt=new i("debug-alt",{fontCharacter:"\\eb91"}),i.serverProcess=new i("server-process",{fontCharacter:"\\eba2"}),i.serverEnvironment=new i("server-environment",{fontCharacter:"\\eba3"}),i.pass=new i("pass",{fontCharacter:"\\eba4"}),i.stopCircle=new i("stop-circle",{fontCharacter:"\\eba5"}),i.playCircle=new i("play-circle",{fontCharacter:"\\eba6"}),i.record=new i("record",{fontCharacter:"\\eba7"}),i.debugAltSmall=new i("debug-alt-small",{fontCharacter:"\\eba8"}),i.vmConnect=new i("vm-connect",{fontCharacter:"\\eba9"}),i.cloud=new i("cloud",{fontCharacter:"\\ebaa"}),i.merge=new i("merge",{fontCharacter:"\\ebab"}),i.exportIcon=new i("export",{fontCharacter:"\\ebac"}),i.graphLeft=new i("graph-left",{fontCharacter:"\\ebad"}),i.magnet=new i("magnet",{fontCharacter:"\\ebae"}),i.notebook=new i("notebook",{fontCharacter:"\\ebaf"}),i.redo=new i("redo",{fontCharacter:"\\ebb0"}),i.checkAll=new i("check-all",{fontCharacter:"\\ebb1"}),i.pinnedDirty=new i("pinned-dirty",{fontCharacter:"\\ebb2"}),i.passFilled=new i("pass-filled",{fontCharacter:"\\ebb3"}),i.circleLargeFilled=new i("circle-large-filled",{fontCharacter:"\\ebb4"}),i.circleLargeOutline=new i("circle-large-outline",{fontCharacter:"\\ebb5"}),i.combine=new i("combine",{fontCharacter:"\\ebb6"}),i.gather=new i("gather",{fontCharacter:"\\ebb6"}),i.table=new i("table",{fontCharacter:"\\ebb7"}),i.variableGroup=new i("variable-group",{fontCharacter:"\\ebb8"}),i.typeHierarchy=new i("type-hierarchy",{fontCharacter:"\\ebb9"}),i.typeHierarchySub=new i("type-hierarchy-sub",{fontCharacter:"\\ebba"}),i.typeHierarchySuper=new i("type-hierarchy-super",{fontCharacter:"\\ebbb"}),i.gitPullRequestCreate=new i("git-pull-request-create",{fontCharacter:"\\ebbc"}),i.runAbove=new i("run-above",{fontCharacter:"\\ebbd"}),i.runBelow=new i("run-below",{fontCharacter:"\\ebbe"}),i.notebookTemplate=new i("notebook-template",{fontCharacter:"\\ebbf"}),i.debugRerun=new i("debug-rerun",{fontCharacter:"\\ebc0"}),i.workspaceTrusted=new i("workspace-trusted",{fontCharacter:"\\ebc1"}),i.workspaceUntrusted=new i("workspace-untrusted",{fontCharacter:"\\ebc2"}),i.workspaceUnspecified=new i("workspace-unspecified",{fontCharacter:"\\ebc3"}),i.terminalCmd=new i("terminal-cmd",{fontCharacter:"\\ebc4"}),i.terminalDebian=new i("terminal-debian",{fontCharacter:"\\ebc5"}),i.terminalLinux=new i("terminal-linux",{fontCharacter:"\\ebc6"}),i.terminalPowershell=new i("terminal-powershell",{fontCharacter:"\\ebc7"}),i.terminalTmux=new i("terminal-tmux",{fontCharacter:"\\ebc8"}),i.terminalUbuntu=new i("terminal-ubuntu",{fontCharacter:"\\ebc9"}),i.terminalBash=new i("terminal-bash",{fontCharacter:"\\ebca"}),i.arrowSwap=new i("arrow-swap",{fontCharacter:"\\ebcb"}),i.copy=new i("copy",{fontCharacter:"\\ebcc"}),i.personAdd=new i("person-add",{fontCharacter:"\\ebcd"}),i.filterFilled=new i("filter-filled",{fontCharacter:"\\ebce"}),i.wand=new i("wand",{fontCharacter:"\\ebcf"}),i.debugLineByLine=new i("debug-line-by-line",{fontCharacter:"\\ebd0"}),i.inspect=new i("inspect",{fontCharacter:"\\ebd1"}),i.layers=new i("layers",{fontCharacter:"\\ebd2"}),i.layersDot=new i("layers-dot",{fontCharacter:"\\ebd3"}),i.layersActive=new i("layers-active",{fontCharacter:"\\ebd4"}),i.compass=new i("compass",{fontCharacter:"\\ebd5"}),i.compassDot=new i("compass-dot",{fontCharacter:"\\ebd6"}),i.compassActive=new i("compass-active",{fontCharacter:"\\ebd7"}),i.azure=new i("azure",{fontCharacter:"\\ebd8"}),i.issueDraft=new i("issue-draft",{fontCharacter:"\\ebd9"}),i.gitPullRequestClosed=new i("git-pull-request-closed",{fontCharacter:"\\ebda"}),i.gitPullRequestDraft=new i("git-pull-request-draft",{fontCharacter:"\\ebdb"}),i.debugAll=new i("debug-all",{fontCharacter:"\\ebdc"}),i.debugCoverage=new i("debug-coverage",{fontCharacter:"\\ebdd"}),i.runErrors=new i("run-errors",{fontCharacter:"\\ebde"}),i.folderLibrary=new i("folder-library",{fontCharacter:"\\ebdf"}),i.debugContinueSmall=new i("debug-continue-small",{fontCharacter:"\\ebe0"}),i.beakerStop=new i("beaker-stop",{fontCharacter:"\\ebe1"}),i.graphLine=new i("graph-line",{fontCharacter:"\\ebe2"}),i.graphScatter=new i("graph-scatter",{fontCharacter:"\\ebe3"}),i.pieChart=new i("pie-chart",{fontCharacter:"\\ebe4"}),i.bracket=new i("bracket",i.json.definition),i.bracketDot=new i("bracket-dot",{fontCharacter:"\\ebe5"}),i.bracketError=new i("bracket-error",{fontCharacter:"\\ebe6"}),i.lockSmall=new i("lock-small",{fontCharacter:"\\ebe7"}),i.azureDevops=new i("azure-devops",{fontCharacter:"\\ebe8"}),i.verifiedFilled=new i("verified-filled",{fontCharacter:"\\ebe9"})})(be||(be={}));class Rr{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&1792)>>>8}static getFontStyle(e){return(e&14336)>>>11}static getForeground(e){return(e&8372224)>>>14}static getBackground(e){return(e&4286578688)>>>23}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e),s=this.getFontStyle(e);return s&1&&(n+=" mtki"),s&2&&(n+=" mtkb"),s&4&&(n+=" mtku"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),s=this.getFontStyle(e);let r=`color: ${t[n]};`;return s&1&&(r+="font-style: italic;"),s&2&&(r+="font-weight: bold;"),s&4&&(r+="text-decoration: underline;"),r}}const Wxe=function(){let i=Object.create(null);return i[0]="symbol-method",i[1]="symbol-function",i[2]="symbol-constructor",i[3]="symbol-field",i[4]="symbol-variable",i[5]="symbol-class",i[6]="symbol-struct",i[7]="symbol-interface",i[8]="symbol-module",i[9]="symbol-property",i[10]="symbol-event",i[11]="symbol-operator",i[12]="symbol-unit",i[13]="symbol-value",i[14]="symbol-constant",i[15]="symbol-enum",i[16]="symbol-enum-member",i[17]="symbol-keyword",i[27]="symbol-snippet",i[18]="symbol-text",i[19]="symbol-color",i[20]="symbol-file",i[21]="symbol-reference",i[22]="symbol-customcolor",i[23]="symbol-folder",i[24]="symbol-type-parameter",i[25]="account",i[26]="issues",function(e){const t=i[e];let n=t&&wx.get(t);return n||(console.info("No codicon found for CompletionItemKind "+e),n=be.symbolProperty),n.classNames}}();let dY=function(){let i=Object.create(null);return i.method=0,i.function=1,i.constructor=2,i.field=3,i.variable=4,i.class=5,i.struct=6,i.interface=7,i.module=8,i.property=9,i.event=10,i.operator=11,i.unit=12,i.value=13,i.constant=14,i.enum=15,i["enum-member"]=16,i.enumMember=16,i.keyword=17,i.snippet=27,i.text=18,i.color=19,i.file=20,i.reference=21,i.customcolor=22,i.folder=23,i["type-parameter"]=24,i.typeParameter=24,i.account=25,i.issue=26,function(e,t){let n=i[e];return typeof n>"u"&&!t&&(n=9),n}}();var Or;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(Or||(Or={}));var a7;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(a7||(a7={}));var l7;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(l7||(l7={}));function zxe(i){return i&&We.isUri(i.uri)&&F.isIRange(i.range)&&(F.isIRange(i.originSelectionRange)||F.isIRange(i.targetSelectionRange))}var c7;(function(i){const e=new Map;e.set("file",0),e.set("module",1),e.set("namespace",2),e.set("package",3),e.set("class",4),e.set("method",5),e.set("property",6),e.set("field",7),e.set("constructor",8),e.set("enum",9),e.set("interface",10),e.set("function",11),e.set("variable",12),e.set("constant",13),e.set("string",14),e.set("number",15),e.set("boolean",16),e.set("array",17),e.set("object",18),e.set("key",19),e.set("null",20),e.set("enum-member",21),e.set("struct",22),e.set("event",23),e.set("operator",24),e.set("type-parameter",25);const t=new Map;t.set(0,"file"),t.set(1,"module"),t.set(2,"namespace"),t.set(3,"package"),t.set(4,"class"),t.set(5,"method"),t.set(6,"property"),t.set(7,"field"),t.set(8,"constructor"),t.set(9,"enum"),t.set(10,"interface"),t.set(11,"function"),t.set(12,"variable"),t.set(13,"constant"),t.set(14,"string"),t.set(15,"number"),t.set(16,"boolean"),t.set(17,"array"),t.set(18,"object"),t.set(19,"key"),t.set(20,"null"),t.set(21,"enum-member"),t.set(22,"struct"),t.set(23,"event"),t.set(24,"operator"),t.set(25,"type-parameter");function n(o){return e.get(o)}i.fromString=n;function s(o){return t.get(o)}i.toString=s;function r(o,a){const l=t.get(o);let c=l&&wx.get("symbol-"+l);return c||(console.info("No codicon found for SymbolKind "+o),c=be.symbolProperty),`${a?"inline":"block"} ${c.classNames}`}i.toCssClassName=r})(c7||(c7={}));class Sa{constructor(e){this.value=e}}Sa.Comment=new Sa("comment");Sa.Imports=new Sa("imports");Sa.Region=new Sa("region");var h7;(function(i){i[i.Other=0]="Other",i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(h7||(h7={}));const yx=new wi,uM=new wi,ta=new wi,u5=new wi,dM=new wi,Iv=new wi,fM=new wi,Cx=new wi,Hxe=new wi,Tv=new wi,Sx=new wi,xx=new wi,Dx=new wi,gM=new wi,pM=new wi,Dl=new wi,ub=new wi,Th=new wi,fY=new wi,gY=new wi,Sm=new wi,Uxe=new wi,mM=new wi,xm=new wi,pY=new wi,xi=new Fxe;class $xe{clone(){return this}equals(e){return this===e}}const jL=new $xe,pu="vs.editor.nullMode";function jxe(i,e,t,n){return new jO([new FL(n,"",i)],t)}function mY(i,e,t,n){let s=new Uint32Array(2);return s[0]=n,s[1]=(i<<0|0<<8|0<<11|1<<14|2<<23)>>>0,new BL(s,t===null?jL:t)}const qxe="editorWorkerService",Vu=mt(qxe),Os=mt("modeService"),Tl=mt("textModelService"),Gxe="$initialize";let u7=!1;function _M(i){mw&&(u7||(u7=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(i.message))}class Kxe{constructor(e,t,n,s){this.vsWorker=e,this.req=t,this.method=n,this.args=s,this.type=0}}class d7{constructor(e,t,n,s){this.vsWorker=e,this.seq=t,this.res=n,this.err=s,this.type=1}}class Zxe{constructor(e,t,n,s){this.vsWorker=e,this.req=t,this.eventName=n,this.arg=s,this.type=2}}class Yxe{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3}}class Qxe{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class Xxe{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const n=String(++this._lastSentReq);return new Promise((s,r)=>{this._pendingReplies[n]={resolve:s,reject:r},this._send(new Kxe(this._workerId,n,e,t))})}listen(e,t){let n=null;const s=new z({onFirstListenerAdd:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,s),this._send(new Zxe(this._workerId,n,e,t))},onLastListenerRemove:()=>{this._pendingEmitters.delete(n),this._send(new Qxe(this._workerId,n)),n=null}});return s.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}let t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){let t=e.req;this._handler.handleMessage(e.method,e.args).then(s=>{this._send(new d7(this._workerId,t,s,void 0))},s=>{s.detail instanceof Error&&(s.detail=F9(s.detail)),this._send(new d7(this._workerId,t,void 0,F9(s)))})}_handleSubscribeEventMessage(e){const t=e.req,n=this._handler.handleEvent(e.eventName,e.arg)(s=>{this._send(new Yxe(this._workerId,t,s))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){let t=[];if(e.type===0)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class Jxe extends te{constructor(e,t,n){super();let s=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",c=>{this._protocol.handleMessage(c)},c=>{s&&s(c)})),this._protocol=new Xxe({sendMessage:(c,h)=>{this._worker.postMessage(c,h)},handleMessage:(c,h)=>{if(typeof n[c]!="function")return Promise.reject(new Error("Missing method "+c+" on main thread host."));try{return Promise.resolve(n[c].apply(n,h))}catch(u){return Promise.reject(u)}},handleEvent:(c,h)=>{if(bY(c)){const u=n[c].call(n,h);if(typeof u!="function")throw new Error(`Missing dynamic event ${c} on main thread host.`);return u}if(_Y(c)){const u=n[c];if(typeof u!="function")throw new Error(`Missing event ${c} on main thread host.`);return u}throw new Error(`Malformed event name ${c}`)}}),this._protocol.setWorkerId(this._worker.getId());let r=null;typeof ti.require<"u"&&typeof ti.require.getConfig=="function"?r=ti.require.getConfig():typeof ti.requirejs<"u"&&(r=ti.requirejs.s.contexts._.config);const o=o5(n);this._onModuleLoaded=this._protocol.sendMessage(Gxe,[this._worker.getId(),JSON.parse(JSON.stringify(r)),t,o]);const a=(c,h)=>this._request(c,h),l=(c,h)=>this._protocol.listen(c,h);this._lazyProxy=new Promise((c,h)=>{s=h,this._onModuleLoaded.then(u=>{c(eDe(u,a,l))},u=>{h(u),this._onError("Worker failed to load "+t,u)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((n,s)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(n,s)},s)})}_onError(e,t){console.error(e),console.info(t)}}function _Y(i){return i[0]==="o"&&i[1]==="n"&&Ch(i.charCodeAt(2))}function bY(i){return/^onDynamic/.test(i)&&Ch(i.charCodeAt(9))}function eDe(i,e,t){const n=o=>function(){const a=Array.prototype.slice.call(arguments,0);return e(o,a)},s=o=>function(a){return t(o,a)};let r={};for(const o of i){if(bY(o)){r[o]=s(o);continue}if(_Y(o)){r[o]=t(o,void 0);continue}r[o]=n(o)}return r}var FA;const f7=(FA=window.trustedTypes)===null||FA===void 0?void 0:FA.createPolicy("defaultWorkerFactory",{createScriptURL:i=>i});function tDe(i,e){if(ti.MonacoEnvironment){if(typeof ti.MonacoEnvironment.getWorker=="function")return ti.MonacoEnvironment.getWorker(i,e);if(typeof ti.MonacoEnvironment.getWorkerUrl=="function"){const t=ti.MonacoEnvironment.getWorkerUrl(i,e);return new Worker(f7?f7.createScriptURL(t):t,{name:e})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function iDe(i){return typeof i.then=="function"}class nDe{constructor(e,t,n,s,r){this.id=t;const o=tDe("workerMain.js",n);iDe(o)?this.worker=o:this.worker=Promise.resolve(o),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(l){s(l.data)},a.onmessageerror=r,typeof a.addEventListener=="function"&&a.addEventListener("error",r)})}getId(){return this.id}postMessage(e,t){this.worker&&this.worker.then(n=>n.postMessage(e,t))}dispose(){this.worker&&this.worker.then(e=>e.terminate()),this.worker=null}}class qL{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,n){let s=++qL.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new nDe(e,s,this._label||"anonymous"+s,t,r=>{_M(r),this._webWorkerFailedBeforeError=r,n(r)})}}qL.LAST_WORKER_ID=0;var rn;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(rn||(rn={}));class BA{constructor(e){if(this._standardAutoClosingPairConditionalBrand=void 0,this.open=e.open,this.close=e.close,this._standardTokenMask=0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._standardTokenMask|=2;break;case"comment":this._standardTokenMask|=1;break;case"regex":this._standardTokenMask|=4;break}}isOK(e){return(this._standardTokenMask&e)===0}}class sDe{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)n_(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),n_(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),n_(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),n_(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&n_(this.autoClosingPairsCloseSingleChar,t.close,t)}}function n_(i,e,t){i.has(e)?i.get(e).push(t):i.set(e,[t])}function vy(i,e){let t=i.getCount(),n=i.findTokenIndexAtOffset(e),s=i.getLanguageId(n),r=n;for(;r+1<t&&i.getLanguageId(r+1)===s;)r++;let o=n;for(;o>0&&i.getLanguageId(o-1)===s;)o--;return new rDe(i,s,o,r+1,i.getStartOffset(o),i.getEndOffset(r))}class rDe{constructor(e,t,n,s,r,o){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=s,this.firstCharOffset=r,this._lastCharOffset=o}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}function Za(i){return(i&7)!==0}class Dm{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new BA(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new BA({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.colorizedBracketPairs?this._colorizedBracketPairs=g7(e.colorizedBracketPairs.map(t=>[t[0],t[1]])):e.brackets?this._colorizedBracketPairs=g7(e.brackets.map(t=>[t[0],t[1]]).filter(t=>!(t[0]==="<"&&t[1]===">"))):this._colorizedBracketPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new BA({open:t.open,close:t.close||""}))}this._autoCloseBefore=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:Dm.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}static shouldAutoClosePair(e,t,n){if(t.getTokenCount()===0)return!0;const s=t.findTokenIndexAtOffset(n-2),r=t.getStandardTokenType(s);return e.isOK(r)}getSurroundingPairs(){return this._surroundingPairs}getColorizedBrackets(){return this._colorizedBracketPairs}}Dm.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=`;:.,=}])> 
	`;function g7(i){return i.filter(([e,t])=>e!==""&&t!=="")}let VA;function vY(){return VA||(VA=new TextDecoder("UTF-16LE")),VA}let WA;function oDe(){return WA||(WA=new TextDecoder("UTF-16BE")),WA}let zA;function wY(){return zA||(zA=mZ()?vY():oDe()),zA}const yY=typeof TextDecoder<"u";let Sf,bM;yY?(Sf=i=>new lDe(i),bM=aDe):(Sf=i=>new cDe,bM=CY);function aDe(i,e,t){const n=new Uint16Array(i.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?CY(i,e,t):vY().decode(n)}function CY(i,e,t){let n=[],s=0;for(let r=0;r<t;r++){const o=GSe(i,e);e+=2,n[s++]=String.fromCharCode(o)}return n.join("")}class lDe{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return wY().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}write1(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||_n(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCII(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIIString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}class cDe{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCII(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCIIString(e){this._pieces[this._piecesLen++]=e}}class Lx{constructor(e,t,n,s,r,o){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=s,this.forwardRegex=r,this.reversedRegex=o,this._openSet=Lx._toSet(this.open),this._closeSet=Lx._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}function hDe(i){const e=i.length;i=i.map(o=>[o[0].toLowerCase(),o[1].toLowerCase()]);const t=[];for(let o=0;o<e;o++)t[o]=o;const n=(o,a)=>{const[l,c]=o,[h,u]=a;return l===h||l===u||c===h||c===u},s=(o,a)=>{const l=Math.min(o,a),c=Math.max(o,a);for(let h=0;h<e;h++)t[h]===c&&(t[h]=l)};for(let o=0;o<e;o++){const a=i[o];for(let l=o+1;l<e;l++){const c=i[l];n(a,c)&&s(t[o],t[l])}}const r=[];for(let o=0;o<e;o++){let a=[],l=[];for(let c=0;c<e;c++)if(t[c]===o){const[h,u]=i[c];a.push(h),l.push(u)}a.length>0&&r.push({open:a,close:l})}return r}class uDe{constructor(e,t){this._richEditBracketsBrand=void 0;const n=hDe(t);this.brackets=n.map((s,r)=>new Lx(e,r,s.open,s.close,dDe(s.open,s.close,n,r),fDe(s.open,s.close,n,r))),this.forwardRegex=gDe(this.brackets),this.reversedRegex=pDe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const s of this.brackets){for(const r of s.open)this.textIsBracket[r]=s,this.textIsOpenBracket[r]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,r.length);for(const r of s.close)this.textIsBracket[r]=s,this.textIsOpenBracket[r]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,r.length)}}}function SY(i,e,t,n){for(let s=0,r=e.length;s<r;s++){if(s===t)continue;const o=e[s];for(const a of o.open)a.indexOf(i)>=0&&n.push(a);for(const a of o.close)a.indexOf(i)>=0&&n.push(a)}}function xY(i,e){return i.length-e.length}function GL(i){if(i.length<=1)return i;const e=[],t=new Set;for(const n of i)t.has(n)||(e.push(n),t.add(n));return e}function dDe(i,e,t,n){let s=[];s=s.concat(i),s=s.concat(e);for(let r=0,o=s.length;r<o;r++)SY(s[r],t,n,s);return s=GL(s),s.sort(xY),s.reverse(),KL(s)}function fDe(i,e,t,n){let s=[];s=s.concat(i),s=s.concat(e);for(let r=0,o=s.length;r<o;r++)SY(s[r],t,n,s);return s=GL(s),s.sort(xY),s.reverse(),KL(s.map(d5))}function gDe(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=GL(e),KL(e)}function pDe(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=GL(e),KL(e.map(d5))}function mDe(i){const e=/^[\w ]+$/.test(i);return i=wa(i),e?`\\b${i}\\b`:i}function KL(i){let e=`(${i.map(mDe).join(")|(")})`;return YZ(e,!0)}const d5=function(){function i(n){if(yY){const s=new Uint16Array(n.length);let r=0;for(let o=n.length-1;o>=0;o--)s[r++]=n.charCodeAt(o);return wY().decode(s)}else{let s=[],r=0;for(let o=n.length-1;o>=0;o--)s[r++]=n.charAt(o);return s.join("")}}let e=null,t=null;return function(s){return e!==s&&(e=s,t=i(e)),t}}();class oo{static _findPrevBracketInText(e,t,n,s){let r=n.match(e);if(!r)return null;let o=n.length-(r.index||0),a=r[0].length,l=s+o;return new F(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,s,r){const a=d5(n).substring(n.length-r,n.length-s);return this._findPrevBracketInText(e,t,a,s)}static findNextBracketInText(e,t,n,s){let r=n.match(e);if(!r)return null;let o=r.index||0,a=r[0].length;if(a===0)return null;let l=s+o;return new F(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,s,r){const o=n.substring(s,r);return this.findNextBracketInText(e,t,o,s)}}class _De{constructor(e){this._richEditBrackets=e}getElectricCharacters(){let e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const s=n.charAt(n.length-1);e.push(s)}return e=e.filter((t,n,s)=>s.indexOf(t)===n),e}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const s=t.findTokenIndexAtOffset(n-1);if(Za(t.getStandardTokenType(s)))return null;const r=this._richEditBrackets.reversedRegex,o=t.getLineContent().substring(0,n-1)+e,a=oo.findPrevBracketInRange(r,1,o,0,o.length);if(!a)return null;const l=o.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const h=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(h)?{matchOpenBracket:l}:null}}function wy(i){return i.global&&(i.lastIndex=0),!0}class bDe{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&wy(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&wy(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&wy(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&wy(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class dp{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const n=dp._createOpenBracketRegExp(t[0]),s=dp._createCloseBracketRegExp(t[1]);n&&s&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:s})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,s){if(e>=3)for(let r=0,o=this._regExpRules.length;r<o;r++){let a=this._regExpRules[r];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:s},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&n.length>0&&s.length>0)for(let r=0,o=this._brackets.length;r<o;r++){let a=this._brackets[r];if(a.openRegExp.test(n)&&a.closeRegExp.test(s))return{indentAction:rn.IndentOutdent}}if(e>=2&&n.length>0){for(let r=0,o=this._brackets.length;r<o;r++)if(this._brackets[r].openRegExp.test(n))return{indentAction:rn.Indent}}return null}static _createOpenBracketRegExp(e){let t=wa(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",dp._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=wa(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,dp._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return Ke(t),null}}}class vDe{constructor(){this.data=new Map}add(e,t){zC(Ca(e)),zC(xs(t)),zC(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const kn=new vDe,ZL={JSONContribution:"base.contributions.json"};function wDe(i){return i.length>0&&i.charAt(i.length-1)==="#"?i.substring(0,i.length-1):i}class yDe{constructor(){this._onDidChangeSchema=new z,this.schemasById={}}registerSchema(e,t){this.schemasById[wDe(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const CDe=new yDe;kn.add(ZL.JSONContribution,CDe);const x0={Configuration:"base.contributions.configuration"},HA="vscode://schemas/settings/resourceLanguage",p7=kn.as(ZL.JSONContribution);class SDe{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new z,this._onDidUpdateConfiguration=new z,this.defaultValues={},this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:_("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.excludedConfigurationProperties={},p7.registerSchema(HA,this.resourceLanguageSettingsSchema)}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=this.doRegisterConfigurations(e,t);p7.registerSchema(HA,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(n)}registerOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t){const n=[];return e.forEach(s=>{n.push(...this.validateAndRegisterProperties(s,t,s.extensionInfo)),this.configurationContributors.push(s),this.registerJSONConfiguration(s)}),n}validateAndRegisterProperties(e,t=!0,n,s=3){var r;s=Mr(e.scope)?s:e.scope;let o=[],a=e.properties;if(a)for(let c in a){if(t&&kDe(c)){delete a[c];continue}const h=a[c];if(this.updatePropertyDefaultValue(c,h),f5.test(c)?h.scope=void 0:(h.scope=Mr(h.scope)?s:h.scope,h.restricted=Mr(h.restricted)?!!(!((r=n==null?void 0:n.restrictedConfigurations)===null||r===void 0)&&r.includes(c)):h.restricted),a[c].hasOwnProperty("included")&&!a[c].included){this.excludedConfigurationProperties[c]=a[c],delete a[c];continue}else this.configurationProperties[c]=a[c];!a[c].deprecationMessage&&a[c].markdownDeprecationMessage&&(a[c].deprecationMessage=a[c].markdownDeprecationMessage),o.push(c)}let l=e.allOf;if(l)for(let c of l)o.push(...this.validateAndRegisterProperties(c,t,n,s));return o}getConfigurationProperties(){return this.configurationProperties}registerJSONConfiguration(e){const t=n=>{let s=n.properties;if(s)for(const o in s)this.updateSchema(o,s[o]);let r=n.allOf;r&&r.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:_("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:_("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:HA};this.updatePropertyDefaultValue(t,n)}this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){let n=this.defaultValues[e];cs(n)&&(n=t.default),cs(n)&&(n=LDe(t.type)),t.default=n}}const xDe="\\[.*\\]$",f5=new RegExp(xDe);function DDe(i){return i.substring(1,i.length-1)}function LDe(i){switch(Array.isArray(i)?i[0]:i){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const DY=new SDe;kn.add(x0.Configuration,DY);function kDe(i){return i.trim()?f5.test(i)?_("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",i):DY.getConfigurationProperties()[i]!==void 0?_("config.property.duplicate","Cannot register '{0}'. This property is already registered.",i):null:_("config.property.empty","Cannot register an empty property")}const Fi=mt("configurationService");function LY(i,e){const t=Object.create(null);for(let n in i)g5(t,n,i[n],e);return t}function g5(i,e,t,n){const s=e.split("."),r=s.pop();let o=i;for(let a=0;a<s.length;a++){let l=s[a],c=o[l];switch(typeof c){case"undefined":c=o[l]=Object.create(null);break;case"object":break;default:n(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}o=c}if(typeof o=="object"&&o!==null)try{o[r]=t}catch{n(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}else n(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}function ADe(i,e){const t=e.split(".");kY(i,t)}function kY(i,e){const t=e.shift();if(e.length===0){delete i[t];return}if(Object.keys(i).indexOf(t)!==-1){const n=i[t];typeof n=="object"&&!Array.isArray(n)&&(kY(n,e),Object.keys(n).length===0&&delete i[t])}}function EDe(i,e,t){function n(o,a){let l=o;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const s=e.split("."),r=n(i,s);return typeof r>"u"?t:r}function IDe(){const i=kn.as(x0.Configuration).getConfigurationProperties();return Object.keys(i)}function TDe(){const i=Object.create(null),e=kn.as(x0.Configuration).getConfigurationProperties();for(let t in e){let n=e[t].default;g5(i,t,n,s=>console.error(`Conflict in default settings: ${s}`))}return i}class Sh{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}const AY=[];function eg(i,e,t){e instanceof Sh||(e=new Sh(e,[],t)),AY.push([i,e])}function NDe(){return AY}var MDe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},m7=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class UA{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const Cw=mt("languageConfigurationService");let kx=class extends te{constructor(e,t){super(),this.configurationService=e,this.modeService=t,this.onDidChangeEmitter=this._register(new z),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const n=new Set(Object.values(vM));this._register(this.configurationService.onDidChangeConfiguration(s=>{const r=s.change.keys.some(a=>n.has(a)),o=s.change.overrides.filter(([a,l])=>l.some(c=>n.has(c))).map(([a])=>this.modeService.validateLanguageId(a));if(r)this.configurations.clear(),this.onDidChangeEmitter.fire(new UA(void 0));else for(const a of o)a&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new UA(a)))})),this._register(Ii.onDidChange(s=>{this.configurations.delete(s.languageId),this.onDidChangeEmitter.fire(new UA(s.languageId))}))}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=RDe(e,this.configurationService,this.modeService),this.configurations.set(e,t)),t}};kx=MDe([m7(0,Fi),m7(1,Os)],kx);function RDe(i,e,t){let n=Ii.getLanguageConfiguration(i);if(!n){const a=t.validateLanguageId(i);if(!a)throw new Error("Unexpected languageId");n=new Nv(a,{})}const s=ODe(n.languageId,e),r=EY([n.underlyingConfig,s]);return new Nv(n.languageId,r)}const vM={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function ODe(i,e){const t=e.getValue(vM.brackets,{overrideIdentifier:i}),n=e.getValue(vM.colorizedBracketPairs,{overrideIdentifier:i});return{brackets:_7(t),colorizedBracketPairs:_7(n)}}function _7(i){if(Array.isArray(i))return i.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}class b7{constructor(e){this.languageId=e}}class PDe{constructor(){this._entries=new Map,this._onDidChange=new z,this.onDidChange=this._onDidChange.event}register(e,t,n=0){let s=this._entries.get(e);s||(s=new FDe(e),this._entries.set(e,s));const r=s.register(t,n);return this._onDidChange.fire(new b7(e)),gt(()=>{r.dispose(),this._onDidChange.fire(new b7(e))})}getLanguageConfiguration(e){let t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}getIndentationRules(e){const t=this.getLanguageConfiguration(e);return t&&t.indentationRules||null}_getElectricCharacterSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.electricCharacter||null}getElectricCharacters(e){let t=this._getElectricCharacterSupport(e);return t?t.getElectricCharacters():[]}onElectricCharacter(e,t,n){let s=vy(t,n-1),r=this._getElectricCharacterSupport(s.languageId);return r?r.onElectricCharacter(e,s,n-s.firstCharOffset):null}getComments(e){let t=this.getLanguageConfiguration(e);return t&&t.comments||null}_getCharacterPairSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.characterPair||null}getAutoClosingPairs(e){const t=this._getCharacterPairSupport(e);return new sDe(t?t.getAutoClosingPairs():[])}getAutoCloseBeforeSet(e){let t=this._getCharacterPairSupport(e);return t?t.getAutoCloseBeforeSet():Dm.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED}getSurroundingPairs(e){let t=this._getCharacterPairSupport(e);return t?t.getSurroundingPairs():[]}shouldAutoClosePair(e,t,n){const s=vy(t,n-1);return Dm.shouldAutoClosePair(e,s,n-s.firstCharOffset)}getWordDefinition(e){let t=this.getLanguageConfiguration(e);return ax(t&&t.wordDefinition||null)}getFoldingRules(e){let t=this.getLanguageConfiguration(e);return t?t.foldingRules:{}}getIndentRulesSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.indentRulesSupport||null}getPrecedingValidLine(e,t,n){let s=e.getLanguageIdAtPosition(t,0);if(t>1){let r,o=-1;for(r=t-1;r>=1;r--){if(e.getLanguageIdAtPosition(r,0)!==s)return o;let a=e.getLineContent(r);if(n.shouldIgnore(a)||/^\s+$/.test(a)||a===""){o=r;continue}return r}}return-1}getInheritIndentForLine(e,t,n,s=!0){if(e<4)return null;const r=this.getIndentRulesSupport(t.getLanguageId());if(!r)return null;if(n<=1)return{indentation:"",action:null};const o=this.getPrecedingValidLine(t,n,r);if(o<0)return null;if(o<1)return{indentation:"",action:null};const a=t.getLineContent(o);if(r.shouldIncrease(a)||r.shouldIndentNextLine(a))return{indentation:qi(a),action:rn.Indent,line:o};if(r.shouldDecrease(a))return{indentation:qi(a),action:null,line:o};{if(o===1)return{indentation:qi(t.getLineContent(o)),action:null,line:o};const l=o-1,c=r.getIndentMetadata(t.getLineContent(l));if(!(c&3)&&c&4){let h=0;for(let u=l-1;u>0;u--)if(!r.shouldIndentNextLine(t.getLineContent(u))){h=u;break}return{indentation:qi(t.getLineContent(h+1)),action:null,line:h+1}}if(s)return{indentation:qi(t.getLineContent(o)),action:null,line:o};for(let h=o;h>0;h--){const u=t.getLineContent(h);if(r.shouldIncrease(u))return{indentation:qi(u),action:rn.Indent,line:h};if(r.shouldIndentNextLine(u)){let d=0;for(let f=h-1;f>0;f--)if(!r.shouldIndentNextLine(t.getLineContent(h))){d=f;break}return{indentation:qi(t.getLineContent(d+1)),action:null,line:d+1}}else if(r.shouldDecrease(u))return{indentation:qi(u),action:null,line:h}}return{indentation:qi(t.getLineContent(1)),action:null,line:1}}}getGoodIndentForLine(e,t,n,s,r){if(e<4)return null;const o=this.getLanguageConfiguration(n);if(!o)return null;const a=this.getIndentRulesSupport(n);if(!a)return null;const l=this.getInheritIndentForLine(e,t,s),c=t.getLineContent(s);if(l){const h=l.line;if(h!==void 0){const u=o.onEnter(e,"",t.getLineContent(h),"");if(u){let d=qi(t.getLineContent(h));return u.removeText&&(d=d.substring(0,d.length-u.removeText)),u.indentAction===rn.Indent||u.indentAction===rn.IndentOutdent?d=r.shiftIndent(d):u.indentAction===rn.Outdent&&(d=r.unshiftIndent(d)),a.shouldDecrease(c)&&(d=r.unshiftIndent(d)),u.appendText&&(d+=u.appendText),qi(d)}}return a.shouldDecrease(c)?l.action===rn.Indent?l.indentation:r.unshiftIndent(l.indentation):l.action===rn.Indent?r.shiftIndent(l.indentation):l.indentation}return null}getIndentForEnter(e,t,n,s){if(e<4)return null;t.forceTokenization(n.startLineNumber);const r=t.getLineTokens(n.startLineNumber),o=vy(r,n.startColumn-1),a=o.getLineContent();let l=!1,c;o.firstCharOffset>0&&r.getLanguageId(0)!==o.languageId?(l=!0,c=a.substr(0,n.startColumn-1-o.firstCharOffset)):c=r.getLineContent().substring(0,n.startColumn-1);let h;n.isEmpty()?h=a.substr(n.startColumn-1-o.firstCharOffset):h=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-o.firstCharOffset);const u=this.getIndentRulesSupport(o.languageId);if(!u)return null;const d=c,f=qi(c),g={getLineTokens:b=>t.getLineTokens(b),getLanguageId:()=>t.getLanguageId(),getLanguageIdAtPosition:(b,w)=>t.getLanguageIdAtPosition(b,w),getLineContent:b=>b===n.startLineNumber?d:t.getLineContent(b)},p=qi(r.getLineContent()),m=this.getInheritIndentForLine(e,g,n.startLineNumber+1);if(!m){const b=l?p:f;return{beforeEnter:b,afterEnter:b}}let v=l?p:m.indentation;return m.action===rn.Indent&&(v=s.shiftIndent(v)),u.shouldDecrease(h)&&(v=s.unshiftIndent(v)),{beforeEnter:l?p:f,afterEnter:v}}getIndentActionForType(e,t,n,s,r){if(e<4)return null;const o=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn);if(o.firstCharOffset)return null;const a=this.getIndentRulesSupport(o.languageId);if(!a)return null;const l=o.getLineContent(),c=l.substr(0,n.startColumn-1-o.firstCharOffset);let h;if(n.isEmpty()?h=l.substr(n.startColumn-1-o.firstCharOffset):h=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-o.firstCharOffset),!a.shouldDecrease(c+h)&&a.shouldDecrease(c+s+h)){const u=this.getInheritIndentForLine(e,t,n.startLineNumber,!1);if(!u)return null;let d=u.indentation;return u.action!==rn.Indent&&(d=r.unshiftIndent(d)),d}return null}getIndentMetadata(e,t){const n=this.getIndentRulesSupport(e.getLanguageId());return!n||t<1||t>e.getLineCount()?null:n.getIndentMetadata(e.getLineContent(t))}getEnterAction(e,t,n){const s=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn),r=this.getLanguageConfiguration(s.languageId);if(!r)return null;const o=s.getLineContent(),a=o.substr(0,n.startColumn-1-s.firstCharOffset);let l;n.isEmpty()?l=o.substr(n.startColumn-1-s.firstCharOffset):l=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-s.firstCharOffset);let c="";if(n.startLineNumber>1&&s.firstCharOffset===0){const p=this.getScopedLineTokens(t,n.startLineNumber-1);p.languageId===s.languageId&&(c=p.getLineContent())}const h=r.onEnter(e,c,a,l);if(!h)return null;const u=h.indentAction;let d=h.appendText;const f=h.removeText||0;d?u===rn.Indent&&(d="	"+d):u===rn.Indent||u===rn.IndentOutdent?d="	":d="";let g=this.getIndentationAtPosition(t,n.startLineNumber,n.startColumn);return f&&(g=g.substring(0,g.length-f)),{indentAction:u,appendText:d,removeText:f,indentation:g}}getIndentationAtPosition(e,t,n){const s=e.getLineContent(t);let r=qi(s);return r.length>n-1&&(r=r.substring(0,n-1)),r}getScopedLineTokens(e,t,n){e.forceTokenization(t);const s=e.getLineTokens(t),r=typeof n>"u"?e.getLineMaxColumn(t)-1:n-1;return vy(s,r)}}const Ii=new PDe;class FDe{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const n=new v7(e,t,++this._order);return this._entries.push(n),this._resolved=null,gt(()=>{for(let s=0;s<this._entries.length;s++)if(this._entries[s]===n){this._entries.splice(s,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new Nv(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(v7.cmp),EY(this._entries.map(e=>e.configuration)))}}function EY(i){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of i)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class v7{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class Nv{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new dp(this.underlyingConfig):null,this.comments=Nv._handleComments(this.underlyingConfig),this.characterPair=new Dm(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||bZ,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new bDe(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{}}getWordDefinition(){return ax(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new uDe(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new _De(this.brackets)),this._electricCharacter}onEnter(e,t,n,s){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,s):null}static _handleComments(e){let t=e.comments;if(!t)return null;let n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){let[s,r]=t.blockComment;n.blockCommentStartToken=s,n.blockCommentEndToken=r}return n}}eg(Cw,kx);class bh{constructor(e,t,n,s){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=s}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class w7{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,s=e.length;n<s;n++)t[n]=e.charCodeAt(n);return t}}function BDe(i,e,t){return new ll(new w7(i),new w7(e)).ComputeDiff(t).changes}class Og{static Assert(e,t){if(!e)throw new Error(t)}}class Pg{static Copy(e,t,n,s,r){for(let o=0;o<r;o++)n[s+o]=e[t+o]}static Copy2(e,t,n,s,r){for(let o=0;o<r;o++)n[s+o]=e[t+o]}}class y7{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new bh(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class ll{constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[s,r,o]=ll._getElements(e),[a,l,c]=ll._getElements(t);this._hasStrings=o&&c,this._originalStringElements=s,this._originalElementsOrHash=r,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(ll._isStringArray(t)){const n=new Int32Array(t.length);for(let s=0,r=t.length;s<r;s++)n[s]=c5(t[s],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const n=ll._getStrictElement(this._originalSequence,e),s=ll._getStrictElement(this._modifiedSequence,t);return n===s}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,s,r){const o=[!1];let a=this.ComputeDiffRecursive(e,t,n,s,o);return r&&(a=this.PrettifyChanges(a)),{quitEarly:o[0],changes:a}}ComputeDiffRecursive(e,t,n,s,r){for(r[0]=!1;e<=t&&n<=s&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&s>=n&&this.ElementsAreEqual(t,s);)t--,s--;if(e>t||n>s){let u;return n<=s?(Og.Assert(e===t+1,"originalStart should only be one more than originalEnd"),u=[new bh(e,0,n,s-n+1)]):e<=t?(Og.Assert(n===s+1,"modifiedStart should only be one more than modifiedEnd"),u=[new bh(e,t-e+1,n,0)]):(Og.Assert(e===t+1,"originalStart should only be one more than originalEnd"),Og.Assert(n===s+1,"modifiedStart should only be one more than modifiedEnd"),u=[]),u}const o=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,s,o,a,r),c=o[0],h=a[0];if(l!==null)return l;if(!r[0]){const u=this.ComputeDiffRecursive(e,c,n,h,r);let d=[];return r[0]?d=[new bh(c+1,t-(c+1)+1,h+1,s-(h+1)+1)]:d=this.ComputeDiffRecursive(c+1,t,h+1,s,r),this.ConcatenateChanges(u,d)}return[new bh(e,t-e+1,n,s-n+1)]}WALKTRACE(e,t,n,s,r,o,a,l,c,h,u,d,f,g,p,m,v,b){let w=null,y=null,x=new y7,k=t,S=n,L=f[0]-m[0]-s,D=-1073741824,N=this.m_forwardHistory.length-1;do{const T=L+e;T===k||T<S&&c[T-1]<c[T+1]?(u=c[T+1],g=u-L-s,u<D&&x.MarkNextChange(),D=u,x.AddModifiedElement(u+1,g),L=T+1-e):(u=c[T-1]+1,g=u-L-s,u<D&&x.MarkNextChange(),D=u-1,x.AddOriginalElement(u,g+1),L=T-1-e),N>=0&&(c=this.m_forwardHistory[N],e=c[0],k=1,S=c.length-1)}while(--N>=-1);if(w=x.getReverseChanges(),b[0]){let T=f[0]+1,$=m[0]+1;if(w!==null&&w.length>0){const U=w[w.length-1];T=Math.max(T,U.getOriginalEnd()),$=Math.max($,U.getModifiedEnd())}y=[new bh(T,d-T+1,$,p-$+1)]}else{x=new y7,k=o,S=a,L=f[0]-m[0]-l,D=1073741824,N=v?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const T=L+r;T===k||T<S&&h[T-1]>=h[T+1]?(u=h[T+1]-1,g=u-L-l,u>D&&x.MarkNextChange(),D=u+1,x.AddOriginalElement(u+1,g+1),L=T+1-r):(u=h[T-1],g=u-L-l,u>D&&x.MarkNextChange(),D=u,x.AddModifiedElement(u+1,g+1),L=T-1-r),N>=0&&(h=this.m_reverseHistory[N],r=h[0],k=1,S=h.length-1)}while(--N>=-1);y=x.getChanges()}return this.ConcatenateChanges(w,y)}ComputeRecursionPoint(e,t,n,s,r,o,a){let l=0,c=0,h=0,u=0,d=0,f=0;e--,n--,r[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const g=t-e+(s-n),p=g+1,m=new Int32Array(p),v=new Int32Array(p),b=s-n,w=t-e,y=e-n,x=t-s,S=(w-b)%2===0;m[b]=e,v[w]=t,a[0]=!1;for(let L=1;L<=g/2+1;L++){let D=0,N=0;h=this.ClipDiagonalBound(b-L,L,b,p),u=this.ClipDiagonalBound(b+L,L,b,p);for(let $=h;$<=u;$+=2){$===h||$<u&&m[$-1]<m[$+1]?l=m[$+1]:l=m[$-1]+1,c=l-($-b)-y;const U=l;for(;l<t&&c<s&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(m[$]=l,l+c>D+N&&(D=l,N=c),!S&&Math.abs($-w)<=L-1&&l>=v[$])return r[0]=l,o[0]=c,U<=v[$]&&1447>0&&L<=1447+1?this.WALKTRACE(b,h,u,y,w,d,f,x,m,v,l,t,r,c,s,o,S,a):null}const T=(D-e+(N-n)-L)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(D,T))return a[0]=!0,r[0]=D,o[0]=N,T>0&&1447>0&&L<=1447+1?this.WALKTRACE(b,h,u,y,w,d,f,x,m,v,l,t,r,c,s,o,S,a):(e++,n++,[new bh(e,t-e+1,n,s-n+1)]);d=this.ClipDiagonalBound(w-L,L,w,p),f=this.ClipDiagonalBound(w+L,L,w,p);for(let $=d;$<=f;$+=2){$===d||$<f&&v[$-1]>=v[$+1]?l=v[$+1]-1:l=v[$-1],c=l-($-w)-x;const U=l;for(;l>e&&c>n&&this.ElementsAreEqual(l,c);)l--,c--;if(v[$]=l,S&&Math.abs($-b)<=L&&l<=m[$])return r[0]=l,o[0]=c,U>=m[$]&&1447>0&&L<=1447+1?this.WALKTRACE(b,h,u,y,w,d,f,x,m,v,l,t,r,c,s,o,S,a):null}if(L<=1447){let $=new Int32Array(u-h+2);$[0]=b-h+1,Pg.Copy2(m,h,$,1,u-h+1),this.m_forwardHistory.push($),$=new Int32Array(f-d+2),$[0]=w-d+1,Pg.Copy2(v,d,$,1,f-d+1),this.m_reverseHistory.push($)}}return this.WALKTRACE(b,h,u,y,w,d,f,x,m,v,l,t,r,c,s,o,S,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],s=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,r=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,o=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<s&&n.modifiedStart+n.modifiedLength<r&&(!o||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const c=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!c)break;n.originalStart++,n.modifiedStart++}let l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const n=e[t];let s=0,r=0;if(t>0){const u=e[t-1];s=u.originalStart+u.originalLength,r=u.modifiedStart+u.modifiedLength}const o=n.originalLength>0,a=n.modifiedLength>0;let l=0,c=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let u=1;;u++){const d=n.originalStart-u,f=n.modifiedStart-u;if(d<s||f<r||o&&!this.OriginalElementsAreEqual(d,d+n.originalLength)||a&&!this.ModifiedElementsAreEqual(f,f+n.modifiedLength))break;const p=(d===s&&f===r?5:0)+this._boundaryScore(d,n.originalLength,f,n.modifiedLength);p>c&&(c=p,l=u)}n.originalStart-=l,n.modifiedStart-=l;const h=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],h)){e[t-1]=h[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const s=e[t-1],r=e[t],o=r.originalStart-s.originalStart-s.originalLength,a=s.originalStart,l=r.originalStart+r.originalLength,c=l-a,h=s.modifiedStart,u=r.modifiedStart+r.modifiedLength,d=u-h;if(o<5&&c<20&&d<20){const f=this._findBetterContiguousSequence(a,c,h,d,o);if(f){const[g,p]=f;(g!==s.originalStart+s.originalLength||p!==s.modifiedStart+s.modifiedLength)&&(s.originalLength=g-s.originalStart,s.modifiedLength=p-s.modifiedStart,r.originalStart=g+o,r.modifiedStart=p+o,r.originalLength=l-r.originalStart,r.modifiedLength=u-r.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,s,r){if(t<r||s<r)return null;const o=e+t-r+1,a=n+s-r+1;let l=0,c=0,h=0;for(let u=e;u<o;u++)for(let d=n;d<a;d++){const f=this._contiguousSequenceScore(u,d,r);f>0&&f>l&&(l=f,c=u,h=d)}return l>0?[c,h]:null}_contiguousSequenceScore(e,t,n){let s=0;for(let r=0;r<n;r++){if(!this.ElementsAreEqual(e+r,t+r))return 0;s+=this._originalStringElements[e+r].length}return s}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,s){const r=this._OriginalRegionIsBoundary(e,t)?1:0,o=this._ModifiedRegionIsBoundary(n,s)?1:0;return r+o}ConcatenateChanges(e,t){let n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const s=new Array(e.length+t.length-1);return Pg.Copy(e,0,s,0,e.length-1),s[e.length-1]=n[0],Pg.Copy(t,1,s,e.length,t.length-1),s}else{const s=new Array(e.length+t.length);return Pg.Copy(e,0,s,0,e.length),Pg.Copy(t,0,s,e.length,t.length),s}}ChangesOverlap(e,t,n){if(Og.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),Og.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const s=e.originalStart;let r=e.originalLength;const o=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(r=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new bh(s,r,o,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,s){if(e>=0&&e<s)return e;const r=n,o=s-n-1,a=t%2===0;if(e<0){const l=r%2===0;return a===l?0:1}else{const l=o%2===0;return a===l?s-1:s-2}}}const VDe=3;function IY(i,e,t,n){return new ll(i,e,t).ComputeDiff(n)}class C7{constructor(e){const t=[],n=[];for(let s=0,r=e.length;s<r;s++)t[s]=wM(e[s],1),n[s]=yM(e[s],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const s=[],r=[],o=[];let a=0;for(let l=t;l<=n;l++){const c=this.lines[l],h=e?this._startColumns[l]:1,u=e?this._endColumns[l]:c.length+1;for(let d=h;d<u;d++)s[a]=c.charCodeAt(d-1),r[a]=l+1,o[a]=d,a++}return new WDe(s,r,o)}}class WDe{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}getElements(){return this._charCodes}getStartLineNumber(e){return this._lineNumbers[e]}getStartColumn(e){return this._columns[e]}getEndLineNumber(e){return this._lineNumbers[e]}getEndColumn(e){return this._columns[e]+1}}class Mv{constructor(e,t,n,s,r,o,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=s,this.modifiedStartLineNumber=r,this.modifiedStartColumn=o,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,n){let s,r,o,a,l,c,h,u;return e.originalLength===0?(s=0,r=0,o=0,a=0):(s=t.getStartLineNumber(e.originalStart),r=t.getStartColumn(e.originalStart),o=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1)),e.modifiedLength===0?(l=0,c=0,h=0,u=0):(l=n.getStartLineNumber(e.modifiedStart),c=n.getStartColumn(e.modifiedStart),h=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),u=n.getEndColumn(e.modifiedStart+e.modifiedLength-1)),new Mv(s,r,o,a,l,c,h,u)}}function zDe(i){if(i.length<=1)return i;const e=[i[0]];let t=e[0];for(let n=1,s=i.length;n<s;n++){const r=i[n],o=r.originalStart-(t.originalStart+t.originalLength),a=r.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(o,a)<VDe?(t.originalLength=r.originalStart+r.originalLength-t.originalStart,t.modifiedLength=r.modifiedStart+r.modifiedLength-t.modifiedStart):(e.push(r),t=r)}return e}class db{constructor(e,t,n,s,r){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=s,this.charChanges=r}static createFromDiffResult(e,t,n,s,r,o,a){let l,c,h,u,d;if(t.originalLength===0?(l=n.getStartLineNumber(t.originalStart)-1,c=0):(l=n.getStartLineNumber(t.originalStart),c=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(h=s.getStartLineNumber(t.modifiedStart)-1,u=0):(h=s.getStartLineNumber(t.modifiedStart),u=s.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),o&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&r()){const f=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),g=s.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);let p=IY(f,g,r,!0).changes;a&&(p=zDe(p)),d=[];for(let m=0,v=p.length;m<v;m++)d.push(Mv.createFromDiffChange(p[m],f,g))}return new db(l,c,h,u,d)}}class HDe{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new C7(e),this.modified=new C7(t),this.continueLineDiff=S7(n.maxComputationTime),this.continueCharDiff=S7(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};const e=IY(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(db.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}const s=[];let r=0,o=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,h=c?c.originalStart:this.originalLines.length,u=c?c.modifiedStart:this.modifiedLines.length;for(;r<h&&o<u;){const d=this.originalLines[r],f=this.modifiedLines[o];if(d!==f){{let g=wM(d,1),p=wM(f,1);for(;g>1&&p>1;){const m=d.charCodeAt(g-2),v=f.charCodeAt(p-2);if(m!==v)break;g--,p--}(g>1||p>1)&&this._pushTrimWhitespaceCharChange(s,r+1,1,g,o+1,1,p)}{let g=yM(d,1),p=yM(f,1);const m=d.length+1,v=f.length+1;for(;g<m&&p<v;){const b=d.charCodeAt(g-1),w=d.charCodeAt(p-1);if(b!==w)break;g++,p++}(g<m||p<v)&&this._pushTrimWhitespaceCharChange(s,r+1,g,m,o+1,p,v)}}r++,o++}c&&(s.push(db.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),r+=c.originalLength,o+=c.modifiedLength)}return{quitEarly:n,changes:s}}_pushTrimWhitespaceCharChange(e,t,n,s,r,o,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,s,r,o,a))return;let l;this.shouldComputeCharChanges&&(l=[new Mv(t,n,t,s,r,o,r,a)]),e.push(new db(t,t,r,r,l))}_mergeTrimWhitespaceCharChange(e,t,n,s,r,o,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===r?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=r,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new Mv(t,n,t,s,r,o,r,a)),!0):!1}}function wM(i,e){const t=Zs(i);return t===-1?e:t+1}function yM(i,e){const t=S0(i);return t===-1?e:t+2}function S7(i){if(i===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<i}function Ax(i){return i<0?0:i>255?255:i|0}function Fg(i){return i<0?0:i>4294967295?4294967295:i|0}class TY{constructor(e,t){this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class UDe{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=Fg(e);const n=this.values,s=this.prefixSum,r=t.length;return r===0?!1:(this.values=new Uint32Array(n.length+r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+r),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}changeValue(e,t){return e=Fg(e),t=Fg(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=Fg(e),t=Fg(t);const n=this.values,s=this.prefixSum;if(e>=n.length)return!1;let r=n.length-e;return t>=r&&(t=r),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=Fg(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,s=0,r=0,o=0;for(;t<=n;)if(s=t+(n-t)/2|0,r=this.prefixSum[s],o=r-this.values[s],e<o)n=s-1;else if(e>=r)t=s+1;else break;return new TY(s,e-o)}}class $De{constructor(e,t,n,s){this._uri=e,this._lines=t,this._eol=n,this._versionId=s,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new q(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let s=0;s<t;s++)n[s]=this._lines[s].length+e;this._lineStarts=new UDe(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.changeValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;let n=El(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);let s=new Uint32Array(n.length-1);for(let r=1;r<n.length;r++)this._lines.splice(e.lineNumber+r-1,0,n[r]),s[r-1]=n[r].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,s)}}class D0{constructor(e){let t=Ax(e);this._defaultValue=t,this._asciiMap=D0._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);for(let n=0;n<256;n++)t[n]=e;return t}set(e,t){let n=Ax(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}}class jDe{constructor(){this._actual=new D0(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}}class qDe{constructor(e,t,n){const s=new Uint8Array(e*t);for(let r=0,o=e*t;r<o;r++)s[r]=n;this._data=s,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}}class GDe{constructor(e){let t=0,n=0;for(let r=0,o=e.length;r<o;r++){let[a,l,c]=e[r];l>t&&(t=l),a>n&&(n=a),c>n&&(n=c)}t++,n++;let s=new qDe(n,t,0);for(let r=0,o=e.length;r<o;r++){let[a,l,c]=e[r];s.set(a,l,c)}this._states=s,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let $A=null;function KDe(){return $A===null&&($A=new GDe([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),$A}let s_=null;function ZDe(){if(s_===null){s_=new D0(0);const i=` 	<>'"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…`;for(let t=0;t<i.length;t++)s_.set(i.charCodeAt(t),1);const e=".,;";for(let t=0;t<e.length;t++)s_.set(e.charCodeAt(t),2)}return s_}class Ex{static _createLink(e,t,n,s,r){let o=r-1;do{const a=t.charCodeAt(o);if(e.get(a)!==2)break;o--}while(o>s);if(s>0){const a=t.charCodeAt(s-1),l=t.charCodeAt(o);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&o--}return{range:{startLineNumber:n,startColumn:s+1,endLineNumber:n,endColumn:o+2},url:t.substring(s,o+1)}}static computeLinks(e,t=KDe()){const n=ZDe();let s=[];for(let r=1,o=e.getLineCount();r<=o;r++){const a=e.getLineContent(r),l=a.length;let c=0,h=0,u=0,d=1,f=!1,g=!1,p=!1,m=!1;for(;c<l;){let v=!1;const b=a.charCodeAt(c);if(d===13){let w;switch(b){case 40:f=!0,w=0;break;case 41:w=f?0:1;break;case 91:p=!0,g=!0,w=0;break;case 93:p=!1,w=g?0:1;break;case 123:m=!0,w=0;break;case 125:w=m?0:1;break;case 39:w=u===34||u===96?0:1;break;case 34:w=u===39||u===96?0:1;break;case 96:w=u===39||u===34?0:1;break;case 42:w=u===42?1:0;break;case 124:w=u===124?1:0;break;case 32:w=p?0:1;break;default:w=n.get(b)}w===1&&(s.push(Ex._createLink(n,a,r,h,c)),v=!0)}else if(d===12){let w;b===91?(g=!0,w=0):w=n.get(b),w===1?v=!0:d=13}else d=t.nextState(d,b),d===0&&(v=!0);v&&(d=1,f=!1,g=!1,m=!1,h=c+1,u=b),c++}d===13&&s.push(Ex._createLink(n,a,r,h,l))}return s}}function YDe(i){return!i||typeof i.getLineCount!="function"||typeof i.getLineContent!="function"?[]:Ex.computeLinks(i)}class CM{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,n,s,r){if(e&&t){let o=this.doNavigateValueSet(t,r);if(o)return{range:e,value:o}}if(n&&s){let o=this.doNavigateValueSet(s,r);if(o)return{range:n,value:o}}return null}doNavigateValueSet(e,t){let n=this.numberReplace(e,t);return n!==null?n:this.textReplace(e,t)}numberReplace(e,t){let n=Math.pow(10,e.length-(e.lastIndexOf(".")+1)),s=Number(e),r=parseFloat(e);return!isNaN(s)&&!isNaN(r)&&s===r?s===0&&!t?null:(s=Math.floor(s*n),s+=t?n:-n,String(s/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let s=null;for(let r=0,o=e.length;s===null&&r<o;r++)s=this.valueSetReplace(e[r],t,n);return s}valueSetReplace(e,t,n){let s=e.indexOf(t);return s>=0?(s+=n?1:-1,s<0?s=e.length-1:s%=e.length,e[s]):null}}CM.INSTANCE=new CM;var Bg=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class QDe extends $De{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){let n=lx(e.column,ax(t),this._lines[e.lineNumber-1],0);return n?new F(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){const t=this._lines,n=this._wordenize.bind(this);let s=0,r="",o=0,a=[];return{*[Symbol.iterator](){for(;;)if(o<a.length){const l=r.substring(a[o].start,a[o].end);o+=1,yield l}else if(s<t.length)r=t[s],a=n(r,e),o=0,s+=1;else break}}}getLineWords(e,t){let n=this._lines[e-1],s=this._wordenize(n,t),r=[];for(const o of s)r.push({word:n.substring(o.start,o.end),startColumn:o.start+1,endColumn:o.end+1});return r}_wordenize(e,t){const n=[];let s;for(t.lastIndex=0;(s=t.exec(e))&&s[0].length!==0;)n.push({start:s.index,end:s.index+s[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);let t=this._eol,n=e.startLineNumber-1,s=e.endLineNumber-1,r=[];r.push(this._lines[n].substring(e.startColumn-1));for(let o=n+1;o<s;o++)r.push(this._lines[o]);return r.push(this._lines[s].substring(0,e.endColumn-1)),r.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!q.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,s=!1;if(t<1)t=1,n=1,s=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,s=!0;else{let r=this._lines[t-1].length+1;n<1?(n=1,s=!0):n>r&&(n=r,s=!0)}return s?{lineNumber:t,column:n}:e}}class xf{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){let e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new QDe(We.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}computeDiff(e,t,n,s){return Bg(this,void 0,void 0,function*(){const r=this._getModel(e),o=this._getModel(t);if(!r||!o)return null;const a=r.getLinesContent(),l=o.getLinesContent(),h=new HDe(a,l,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:n,shouldMakePrettyDiff:!0,maxComputationTime:s}).computeDiff(),u=h.changes.length>0?!1:this._modelsAreIdentical(r,o);return{quitEarly:h.quitEarly,identical:u,changes:h.changes}})}_modelsAreIdentical(e,t){const n=e.getLineCount(),s=t.getLineCount();if(n!==s)return!1;for(let r=1;r<=n;r++){const o=e.getLineContent(r),a=t.getLineContent(r);if(o!==a)return!1}return!0}computeMoreMinimalEdits(e,t){return Bg(this,void 0,void 0,function*(){const n=this._getModel(e);if(!n)return t;const s=[];let r;t=t.slice(0).sort((o,a)=>{if(o.range&&a.range)return F.compareRangesUsingStarts(o.range,a.range);let l=o.range?0:1,c=a.range?0:1;return l-c});for(let{range:o,text:a,eol:l}of t){if(typeof l=="number"&&(r=l),F.isEmpty(o)&&!a)continue;const c=n.getValueInRange(o);if(a=a.replace(/\r\n|\n|\r/g,n.eol),c===a)continue;if(Math.max(a.length,c.length)>xf._diffLimit){s.push({range:o,text:a});continue}const h=BDe(c,a,!1),u=n.offsetAt(F.lift(o).getStartPosition());for(const d of h){const f=n.positionAt(u+d.originalStart),g=n.positionAt(u+d.originalStart+d.originalLength),p={text:a.substr(d.modifiedStart,d.modifiedLength),range:{startLineNumber:f.lineNumber,startColumn:f.column,endLineNumber:g.lineNumber,endColumn:g.column}};n.getValueInRange(p.range)!==p.text&&s.push(p)}}return typeof r=="number"&&s.push({eol:r,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),s})}computeLinks(e){return Bg(this,void 0,void 0,function*(){let t=this._getModel(e);return t?YDe(t):null})}textualSuggest(e,t,n,s){return Bg(this,void 0,void 0,function*(){const r=new $c(!0),o=new RegExp(n,s),a=new Set;e:for(let l of e){const c=this._getModel(l);if(c){for(let h of c.words(o))if(!(h===t||!isNaN(Number(h)))&&(a.add(h),a.size>xf._suggestionsLimit))break e}}return{words:Array.from(a),duration:r.elapsed()}})}computeWordRanges(e,t,n,s){return Bg(this,void 0,void 0,function*(){let r=this._getModel(e);if(!r)return Object.create(null);const o=new RegExp(n,s),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){let c=r.getLineWords(l,o);for(const h of c){if(!isNaN(Number(h.word)))continue;let u=a[h.word];u||(u=[],a[h.word]=u),u.push({startLineNumber:l,startColumn:h.startColumn,endLineNumber:l,endColumn:h.endColumn})}}return a})}navigateValueSet(e,t,n,s,r){return Bg(this,void 0,void 0,function*(){let o=this._getModel(e);if(!o)return null;let a=new RegExp(s,r);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});let l=o.getValueInRange(t),c=o.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;let h=o.getValueInRange(c);return CM.INSTANCE.navigateValueSet(t,l,c,h,n)})}loadForeignModule(e,t,n){let o={host:oxe(n,(a,l)=>this._host.fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(o,t),Promise.resolve(o5(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(n){return Promise.reject(n)}}}xf._diffLimit=1e5;xf._suggestionsLimit=1e4;typeof importScripts=="function"&&(ti.monaco=TZ());const NY=mt("textResourceConfigurationService"),MY=mt("textResourcePropertiesService");function Ar(i,e=0){return i[i.length-(1+e)]}function XDe(i){if(i.length===0)throw new Error("Invalid tail call");return[i.slice(0,i.length-1),i[i.length-1]]}function Ll(i,e,t=(n,s)=>n===s){if(i===e)return!0;if(!i||!e||i.length!==e.length)return!1;for(let n=0,s=i.length;n<s;n++)if(!t(i[n],e[n]))return!1;return!0}function p5(i,e,t){let n=0,s=i.length-1;for(;n<=s;){const r=(n+s)/2|0,o=t(i[r],e);if(o<0)n=r+1;else if(o>0)s=r-1;else return r}return-(n+1)}function RY(i,e){let t=0,n=i.length;if(n===0)return 0;for(;t<n;){const s=Math.floor((t+n)/2);e(i[s])?n=s:t=s+1}return t}function SM(i,e,t){if(i=i|0,i>=e.length)throw new TypeError("invalid index");let n=e[Math.floor(e.length*Math.random())],s=[],r=[],o=[];for(let a of e){const l=t(a,n);l<0?s.push(a):l>0?r.push(a):o.push(a)}return i<s.length?SM(i,s,t):i<s.length+o.length?o[0]:SM(i-(s.length+o.length),r,t)}function x7(i,e){const t=[];let n;for(const s of i.slice(0).sort(e))!n||e(n[0],s)!==0?(n=[s],t.push(n)):n.push(s);return t}function YL(i){return i.filter(e=>!!e)}function OY(i){return!Array.isArray(i)||i.length===0}function kl(i){return Array.isArray(i)&&i.length>0}function Ix(i,e=t=>t){const t=new Set;return i.filter(n=>{const s=e(n);return t.has(s)?!1:(t.add(s),!0)})}function JDe(i,e){const t=eLe(i,e);if(t!==-1)return i[t]}function eLe(i,e){for(let t=i.length-1;t>=0;t--){const n=i[t];if(e(n))return t}return-1}function xM(i,e){return i.length>0?i[0]:e}function m5(i){return[].concat(...i)}function ss(i,e){let t=typeof e=="number"?i:0;typeof e=="number"?t=i:(t=0,e=i);const n=[];if(t<=e)for(let s=t;s<e;s++)n.push(s);else for(let s=t;s>e;s--)n.push(s);return n}function Rv(i,e,t){const n=i.slice(0,e),s=i.slice(e);return n.concat(t,s)}function jA(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.unshift(e))}function yy(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.push(e))}function PY(i){return Array.isArray(i)?i:[i]}function tLe(i,e,t){const n=FY(i,e),s=i.length,r=t.length;i.length=s+r;for(let o=s-1;o>=n;o--)i[o+r]=i[o];for(let o=0;o<r;o++)i[o+n]=t[o]}function D7(i,e,t,n){const s=FY(i,e),r=i.splice(s,t);return tLe(i,s,n),r}function FY(i,e){return e<0?Math.max(e+i.length,0):Math.min(e,i.length)}class fb{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){return this.items[this.firstIdx]}}const Jc=mt("logService");var ra;(function(i){i[i.Trace=0]="Trace",i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warning=3]="Warning",i[i.Error=4]="Error",i[i.Critical=5]="Critical",i[i.Off=6]="Off"})(ra||(ra={}));const BY=ra.Info;class iLe extends te{constructor(){super(...arguments),this.level=BY,this._onDidChangeLogLevel=this._register(new z)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}class nLe extends iLe{constructor(e=BY){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=ra.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=ra.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=ra.Info&&console.log("%c INFO","color: #33f",e,...t)}error(e,...t){this.getLevel()<=ra.Error&&console.log("%c  ERR","color: #f33",e,...t)}dispose(){}}class sLe extends te{constructor(e){super(),this.logger=e,this._register(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}error(e,...t){this.logger.error(e,...t)}}var rLe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},qA=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},DM=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const L7=60*1e3,k7=5*60*1e3;function fp(i,e){let t=i.getModel(e);return!(!t||t.isTooLargeForSyncing())}let LM=class extends te{constructor(e,t,n){super(),this._modelService=e,this._workerManager=this._register(new aLe(this._modelService)),this._logService=n,this._register(gY.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(s,r)=>fp(this._modelService,s.uri)?this._workerManager.withWorker().then(o=>o.computeLinks(s.uri)).then(o=>o&&{links:o}):Promise.resolve({links:[]})})),this._register(ta.register("*",new oLe(this._workerManager,t,this._modelService)))}dispose(){super.dispose()}computeDiff(e,t,n,s){return this._workerManager.withWorker().then(r=>r.computeDiff(e,t,n,s))}computeMoreMinimalEdits(e,t){if(kl(t)){if(!fp(this._modelService,e))return Promise.resolve(t);const n=$c.create(!0),s=this._workerManager.withWorker().then(r=>r.computeMoreMinimalEdits(e,t));return s.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),n.elapsed())),Promise.race([s,xv(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return fp(this._modelService,e)}navigateValueSet(e,t,n){return this._workerManager.withWorker().then(s=>s.navigateValueSet(e,t,n))}canComputeWordRanges(e){return fp(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(n=>n.computeWordRanges(e,t))}};LM=rLe([qA(0,Rs),qA(1,NY),qA(2,Jc)],LM);class oLe{constructor(e,t,n){this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}provideCompletionItems(e,t){return DM(this,void 0,void 0,function*(){const n=this._configurationService.getValue(e.uri,t,"editor");if(!n.wordBasedSuggestions)return;const s=[];if(n.wordBasedSuggestionsMode==="currentDocument")fp(this._modelService,e.uri)&&s.push(e.uri);else for(const u of this._modelService.getModels())fp(this._modelService,u.uri)&&(u===e?s.unshift(u.uri):(n.wordBasedSuggestionsMode==="allDocuments"||u.getLanguageId()===e.getLanguageId())&&s.push(u.uri));if(s.length===0)return;const r=Ii.getWordDefinition(e.getLanguageId()),o=e.getWordAtPosition(t),a=o?new F(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn):F.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),h=yield(yield this._workerManager.withWorker()).textualSuggest(s,o==null?void 0:o.word,r);if(h)return{duration:h.duration,suggestions:h.words.map(u=>({kind:18,label:u,insertText:u,range:{insert:l,replace:a}}))}})}}class aLe extends te{constructor(e){super(),this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new vw).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(k7/2)),this._register(this._modelService.onModelRemoved(n=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>k7&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new VY(this._modelService,!1,"editorWorkerService")),Promise.resolve(this._editorWorkerClient)}}class lLe extends te{constructor(e,t,n){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){let s=new vw;s.cancelAndSet(()=>this._checkStopModelSync(),Math.round(L7/2)),this._register(s)}}dispose(){for(let e in this._syncedModels)at(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const n of e){let s=n.toString();this._syncedModels[s]||this._beginModelSync(n,t),this._syncedModels[s]&&(this._syncedModelsLastUsedTime[s]=new Date().getTime())}}_checkStopModelSync(){let e=new Date().getTime(),t=[];for(let n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>L7&&t.push(n);for(const n of t)this._stopModelSync(n)}_beginModelSync(e,t){let n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;let s=e.toString();this._proxy.acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});const r=new de;r.add(n.onDidChangeContent(o=>{this._proxy.acceptModelChanged(s.toString(),o)})),r.add(n.onWillDispose(()=>{this._stopModelSync(s)})),r.add(gt(()=>{this._proxy.acceptRemovedModel(s)})),this._syncedModels[s]=r}_stopModelSync(e){let t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],at(t)}}class A7{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class GA{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}class VY extends te{constructor(e,t,n){super(),this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new qL(n),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new Jxe(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new GA(this)))}catch(e){_M(e),this._worker=new A7(new xf(new GA(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(_M(e),this._worker=new A7(new xf(new GA(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new lLe(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,t=!1){return DM(this,void 0,void 0,function*(){return this._disposed?Promise.reject(w0()):this._getProxy().then(n=>(this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n))})}computeDiff(e,t,n,s){return this._withSyncedResources([e,t],!0).then(r=>r.computeDiff(e.toString(),t.toString(),n,s))}computeMoreMinimalEdits(e,t){return this._withSyncedResources([e]).then(n=>n.computeMoreMinimalEdits(e.toString(),t))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}textualSuggest(e,t,n){return DM(this,void 0,void 0,function*(){const s=yield this._withSyncedResources(e),r=n.source,o=EA(n);return s.textualSuggest(e.map(a=>a.toString()),t,r,o)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(n=>{let s=this._modelService.getModel(e);if(!s)return Promise.resolve(null);let r=Ii.getWordDefinition(s.getLanguageId()),o=r.source,a=EA(r);return n.computeWordRanges(e.toString(),t,o,a)})}navigateValueSet(e,t,n){return this._withSyncedResources([e]).then(s=>{let r=this._modelService.getModel(e);if(!r)return null;let o=Ii.getWordDefinition(r.getLanguageId()),a=o.source,l=EA(o);return s.navigateValueSet(e.toString(),t,n,a,l)})}dispose(){super.dispose(),this._disposed=!0}}function cLe(i,e){return new hLe(i,e)}class hLe extends VY{constructor(e,t){super(e,t.keepIdleModels||!1,t.label),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(n){return Promise.reject(n)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?o5(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(n=>{this._foreignModuleCreateData=null;const s=(a,l)=>e.fmr(a,l),r=(a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)};let o={};for(const a of n)o[a]=r(a,s);return o})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}}class bn{constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=n}static createEmpty(e,t){const n=bn.defaultTokenMetadata,s=new Uint32Array(2);return s[0]=e.length,s[1]=n,new bn(s,e,t)}equals(e){return e instanceof bn?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const s=t<<1,r=s+(n<<1);for(let o=s;o<r;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],n=Rr.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return Rr.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return Rr.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return Rr.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[(e<<1)+1];return Rr.getInlineStyleFromMetadata(n,t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return bn.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new _5(this,e,t,n)}static convertToEndOffset(e,t){const s=(e.length>>>1)-1;for(let r=0;r<s;r++)e[r<<1]=e[r+1<<1];e[s<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,s=(e.length>>>1)-1;for(;n<s;){const r=n+Math.floor((s-n)/2),o=e[r<<1];if(o===t)return r+1;o<t?n=r+1:o>t&&(s=r)}return n}withInserted(e){if(e.length===0)return this;let t=0,n=0,s="";const r=new Array;let o=0;for(;;){let a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){s+=this._text.substring(o,a);const c=this._tokens[(t<<1)+1];r.push(s.length,c),t++,o=a}else if(l){if(l.offset>o){s+=this._text.substring(o,l.offset);const c=this._tokens[(t<<1)+1];r.push(s.length,c),o=l.offset}s+=l.text,r.push(s.length,l.tokenMetadata),n++}else break}return new bn(new Uint32Array(r),s,this._languageIdCodec)}}bn.defaultTokenMetadata=(0<<11|1<<14|2<<23)>>>0;class _5{constructor(e,t,n,s){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=s,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let r=this._firstTokenIndex,o=e.getCount();r<o&&!(e.getStartOffset(r)>=n);r++)this._tokensCount++}equals(e){return e instanceof _5?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}class br{constructor(e,t,n,s){this.startColumn=e,this.endColumn=t,this.className=n,this.type=s,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length,s=t.length;if(n!==s)return!1;for(let r=0;r<n;r++)if(!br._equals(e[r],t[r]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;const s=t+1,r=n+1,o=n-t,a=[];let l=0;for(const c of e)c.endColumn<=s||c.startColumn>=r||(a[l++]=new br(Math.max(1,c.startColumn-s+1),Math.min(o+1,c.endColumn-s+1),c.className,c.type));return a}static filter(e,t,n,s){if(e.length===0)return[];let r=[],o=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],h=c.range;if(h.endLineNumber<t||h.startLineNumber>t||h.isEmpty()&&(c.type===0||c.type===3))continue;const u=h.startLineNumber===t?h.startColumn:n,d=h.endLineNumber===t?h.endColumn:s;r[o++]=new br(u,d,c.inlineClassName,c.type)}return r}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const n=br._typeCompare(e.type,t.type);return n!==0?n:e.className!==t.className?e.className<t.className?-1:1:0}}class E7{constructor(e,t,n,s){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=s}}class Tx{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,s=e.length;n<s;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let s=0;for(;s+1<this.count&&this.stopOffsets[s]===this.stopOffsets[s+1];)s++;n.push(new E7(t,this.stopOffsets[s],this.classNames.join(" "),Tx._metadata(this.metadata))),t=this.stopOffsets[s]+1,this.stopOffsets.splice(0,s+1),this.classNames.splice(0,s+1),this.metadata.splice(0,s+1),this.count-=s+1}return this.count>0&&t<e&&(n.push(new E7(t,e-1,this.classNames.join(" "),Tx._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let s=0;s<this.count;s++)if(this.stopOffsets[s]>=e){this.stopOffsets.splice(s,0,e),this.classNames.splice(s,0,t),this.metadata.splice(s,0,n);break}this.count++}}class uLe{static normalize(e,t){if(t.length===0)return[];let n=[];const s=new Tx;let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];let c=l.startColumn,h=l.endColumn;const u=l.className,d=l.type===1?2:l.type===2?4:0;if(c>1){const p=e.charCodeAt(c-2);_n(p)&&c--}if(h>1){const p=e.charCodeAt(h-2);_n(p)&&h--}const f=c-1,g=h-2;r=s.consumeLowerThan(f,r,n),s.count===0&&(r=f),s.insert(g,u,d)}return s.consumeLowerThan(1073741824,r,n),n}}class cn{constructor(e,t,n){this._linePartBrand=void 0,this.endIndex=e,this.type=t,this.metadata=n}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class dLe{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class tg{constructor(e,t,n,s,r,o,a,l,c,h,u,d,f,g,p,m,v,b,w){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=s,this.isBasicASCII=r,this.containsRTL=o,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(br.compare),this.tabSize=h,this.startVisibleColumn=u,this.spaceWidth=d,this.stopRenderingLineAfter=p,this.renderWhitespace=m==="all"?4:m==="boundary"?1:m==="selection"?2:m==="trailing"?3:0,this.renderControlCharacters=v,this.fontLigatures=b,this.selectionsOnLine=w&&w.sort((k,S)=>k.startOffset<S.startOffset?-1:1);const y=Math.abs(g-d),x=Math.abs(f-d);y<x?(this.renderSpaceWidth=g,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=f,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&br.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class b5{constructor(e,t){this.partIndex=e,this.charIndex=t}}class tl{constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._absoluteOffsets=new Uint32Array(this.length)}static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}setColumnInfo(e,t,n,s){const r=(t<<16|n<<0)>>>0;this._data[e-1]=r,this._absoluteOffsets[e-1]=s+n}getAbsoluteOffset(e){return this._absoluteOffsets.length===0?0:this._absoluteOffsets[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=tl.getPartIndex(t),s=tl.getCharIndex(t);return new b5(n,s)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;let s=(e<<16|n<<0)>>>0,r=0,o=this.length-1;for(;r+1<o;){let p=r+o>>>1,m=this._data[p];if(m===s)return p;m>s?o=p:r=p}if(r===o)return r;let a=this._data[r],l=this._data[o];if(a===s)return r;if(l===s)return o;let c=tl.getPartIndex(a),h=tl.getCharIndex(a),u=tl.getPartIndex(l),d;c!==u?d=t:d=tl.getCharIndex(l);let f=n-h,g=d-n;return f<=g?r:o}}class kM{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}}function QL(i,e){if(i.lineContent.length===0){if(i.lineDecorations.length>0){e.appendASCIIString("<span>");let t=0,n=0,s=0;for(const o of i.lineDecorations)(o.type===1||o.type===2)&&(e.appendASCIIString('<span class="'),e.appendASCIIString(o.className),e.appendASCIIString('"></span>'),o.type===1&&(s|=1,t++),o.type===2&&(s|=2,n++));e.appendASCIIString("</span>");const r=new tl(1,t+n);return r.setColumnInfo(1,t,0,0),new kM(r,!1,s)}return e.appendASCIIString("<span><span></span></span>"),new kM(new tl(0,0),!1,0)}return yLe(pLe(i),e)}class fLe{constructor(e,t,n,s){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=s}}function XL(i){let e=Sf(1e4),t=QL(i,e);return new fLe(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class gLe{constructor(e,t,n,s,r,o,a,l,c,h,u,d,f,g,p){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=s,this.isOverflowing=r,this.parts=o,this.containsForeignElements=a,this.fauxIndentLength=l,this.tabSize=c,this.startVisibleColumn=h,this.containsRTL=u,this.spaceWidth=d,this.renderSpaceCharCode=f,this.renderWhitespace=g,this.renderControlCharacters=p}}function pLe(i){const e=i.lineContent;let t,n;i.stopRenderingLineAfter!==-1&&i.stopRenderingLineAfter<e.length?(t=!0,n=i.stopRenderingLineAfter):(t=!1,n=e.length);let s=mLe(i.lineTokens,i.fauxIndentLength,n);(i.renderWhitespace===4||i.renderWhitespace===1||i.renderWhitespace===2&&i.selectionsOnLine||i.renderWhitespace===3)&&(s=vLe(i,e,n,s));let r=0;if(i.lineDecorations.length>0){for(let o=0,a=i.lineDecorations.length;o<a;o++){const l=i.lineDecorations[o];l.type===3||l.type===1?r|=1:l.type===2&&(r|=2)}s=wLe(e,n,s,i.lineDecorations)}return i.containsRTL||(s=_Le(e,s,!i.isBasicASCII||i.fontLigatures)),i.renderControlCharacters&&!i.isBasicASCII&&(s=bLe(e,s)),new gLe(i.useMonospaceOptimizations,i.canUseHalfwidthRightwardsArrow,e,n,t,s,r,i.fauxIndentLength,i.tabSize,i.startVisibleColumn,i.containsRTL,i.spaceWidth,i.renderSpaceCharCode,i.renderWhitespace,i.renderControlCharacters)}function mLe(i,e,t){let n=[],s=0;e>0&&(n[s++]=new cn(e,"",0));for(let r=0,o=i.getCount();r<o;r++){const a=i.getEndOffset(r);if(a<=e)continue;const l=i.getClassName(r);if(a>=t){n[s++]=new cn(t,l,0);break}n[s++]=new cn(a,l,0)}return n}function _Le(i,e,t){let n=0,s=[],r=0;if(t)for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex;if(n+50<c){const h=l.type,u=l.metadata;let d=-1,f=n;for(let g=n;g<c;g++)i.charCodeAt(g)===32&&(d=g),d!==-1&&g-f>=50&&(s[r++]=new cn(d+1,h,u),f=d+1,d=-1);f!==c&&(s[r++]=new cn(c,h,u))}else s[r++]=l;n=c}else for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex;let h=c-n;if(h>50){const u=l.type,d=l.metadata,f=Math.ceil(h/50);for(let g=1;g<f;g++){let p=n+g*50;s[r++]=new cn(p,u,d)}s[r++]=new cn(c,u,d)}else s[r++]=l;n=c}return s}function WY(i){return i<32?i!==9:i===127||i>=8234&&i<=8238||i>=8294&&i<=8297||i>=8206&&i<=8207||i===1564}function bLe(i,e){let t=[],n=new cn(0,"",0),s=0;for(const r of e){const o=r.endIndex;for(;s<o;s++){const a=i.charCodeAt(s);WY(a)&&(s>n.endIndex&&(n=new cn(s,r.type,r.metadata),t.push(n)),n=new cn(s+1,"mtkcontrol",r.metadata),t.push(n))}s>n.endIndex&&(n=new cn(o,r.type,r.metadata),t.push(n))}return t}function vLe(i,e,t,n){const s=i.continuesWithWrappedLine,r=i.fauxIndentLength,o=i.tabSize,a=i.startVisibleColumn,l=i.useMonospaceOptimizations,c=i.selectionsOnLine,h=i.renderWhitespace===1,u=i.renderWhitespace===3,d=i.renderSpaceWidth!==i.spaceWidth;let f=[],g=0,p=0,m=n[p].type,v=n[p].endIndex;const b=n.length;let w=!1,y=Zs(e),x;y===-1?(w=!0,y=t,x=t):x=S0(e);let k=!1,S=0,L=c&&c[S],D=a%o;for(let T=r;T<t;T++){const $=e.charCodeAt(T);L&&T>=L.endOffset&&(S++,L=c&&c[S]);let U;if(T<y||T>x)U=!0;else if($===9)U=!0;else if($===32)if(h)if(k)U=!0;else{const ee=T+1<t?e.charCodeAt(T+1):0;U=ee===32||ee===9}else U=!0;else U=!1;if(U&&c&&(U=!!L&&L.startOffset<=T&&L.endOffset>T),U&&u&&(U=w||T>x),k){if(!U||!l&&D>=o){if(d){const ee=g>0?f[g-1].endIndex:r;for(let ce=ee+1;ce<=T;ce++)f[g++]=new cn(ce,"mtkw",1)}else f[g++]=new cn(T,"mtkw",1);D=D%o}}else(T===v||U&&T>r)&&(f[g++]=new cn(T,m,0),D=D%o);for($===9?D=o:la($)?D+=2:D++,k=U;T===v&&(p++,p<b);)m=n[p].type,v=n[p].endIndex}let N=!1;if(k)if(s&&h){let T=t>0?e.charCodeAt(t-1):0,$=t>1?e.charCodeAt(t-2):0;T===32&&$!==32&&$!==9||(N=!0)}else N=!0;if(N)if(d){const T=g>0?f[g-1].endIndex:r;for(let $=T+1;$<=t;$++)f[g++]=new cn($,"mtkw",1)}else f[g++]=new cn(t,"mtkw",1);else f[g++]=new cn(t,m,0);return f}function wLe(i,e,t,n){n.sort(br.compare);const s=uLe.normalize(i,n),r=s.length;let o=0,a=[],l=0,c=0;for(let u=0,d=t.length;u<d;u++){const f=t[u],g=f.endIndex,p=f.type,m=f.metadata;for(;o<r&&s[o].startOffset<g;){const v=s[o];if(v.startOffset>c&&(c=v.startOffset,a[l++]=new cn(c,p,m)),v.endOffset+1<=g)c=v.endOffset+1,a[l++]=new cn(c,p+" "+v.className,m|v.metadata),o++;else{c=g,a[l++]=new cn(c,p+" "+v.className,m|v.metadata);break}}g>c&&(c=g,a[l++]=new cn(c,p,m))}const h=t[t.length-1].endIndex;if(o<r&&s[o].startOffset===h)for(;o<r&&s[o].startOffset===h;){const u=s[o];a[l++]=new cn(c,u.className,u.metadata),o++}return a}function yLe(i,e){const t=i.fontIsMonospace,n=i.canUseHalfwidthRightwardsArrow,s=i.containsForeignElements,r=i.lineContent,o=i.len,a=i.isOverflowing,l=i.parts,c=i.fauxIndentLength,h=i.tabSize,u=i.startVisibleColumn,d=i.containsRTL,f=i.spaceWidth,g=i.renderSpaceCharCode,p=i.renderWhitespace,m=i.renderControlCharacters,v=new tl(o+1,l.length);let b=!1,w=0,y=u,x=0,k=0,S=0,L=0;d?e.appendASCIIString('<span dir="ltr">'):e.appendASCIIString("<span>");for(let D=0,N=l.length;D<N;D++){L+=S;const T=l[D],$=T.endIndex,U=T.type,ee=p!==0&&T.isWhitespace(),ce=ee&&!t&&(U==="mtkw"||!s),fe=w===$&&T.isPseudoAfter();if(x=0,e.appendASCIIString('<span class="'),e.appendASCIIString(ce?"mtkz":U),e.appendASCII(34),ee){let Ce=0;{let Se=w,me=y;for(;Se<$;Se++){const ze=(r.charCodeAt(Se)===9?h-me%h:1)|0;Ce+=ze,Se>=c&&(me+=ze)}}for(ce&&(e.appendASCIIString(' style="width:'),e.appendASCIIString(String(f*Ce)),e.appendASCIIString('px"')),e.appendASCII(62);w<$;w++){v.setColumnInfo(w+1,D-k,x,L),k=0;const Se=r.charCodeAt(w);let me;if(Se===9){me=h-y%h|0,!n||me>1?e.write1(8594):e.write1(65515);for(let Dt=2;Dt<=me;Dt++)e.write1(160)}else me=1,e.write1(g);x+=me,w>=c&&(y+=me)}S=Ce}else{let Ce=0;for(e.appendASCII(62);w<$;w++){v.setColumnInfo(w+1,D-k,x,L),k=0;const Se=r.charCodeAt(w);let me=1,Dt=1;switch(Se){case 9:me=h-y%h,Dt=me;for(let ze=1;ze<=me;ze++)e.write1(160);break;case 32:e.write1(160);break;case 60:e.appendASCIIString("&lt;");break;case 62:e.appendASCIIString("&gt;");break;case 38:e.appendASCIIString("&amp;");break;case 0:m?e.write1(9216):e.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.write1(65533);break;default:la(Se)&&Dt++,m&&Se<32?e.write1(9216+Se):m&&Se===127?e.write1(9249):m&&WY(Se)?(e.appendASCIIString("[U+"),e.appendASCIIString(CLe(Se)),e.appendASCIIString("]"),me=8):e.write1(Se)}x+=me,Ce+=me,w>=c&&(y+=Dt)}S=Ce}fe?k++:k=0,w>=o&&!b&&T.isPseudoAfter()&&(b=!0,v.setColumnInfo(w+1,D,x,L)),e.appendASCIIString("</span>")}return b||v.setColumnInfo(o+1,l.length-1,x,L),a&&e.appendASCIIString("<span>&hellip;</span>"),e.appendASCIIString("</span>"),new kM(v,d,s)}function CLe(i){return i.toString(16).toUpperCase().padStart(4,"0")}class I7{constructor(e,t,n,s){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=n|0,this.height=s|0}}class SLe{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e,t){const n=this.outputLineIndex>0?t:0;return new q(e+this.outputLineIndex,n+this.outputOffset+1)}}class gb{constructor(e,t,n,s,r){this.breakOffsets=e,this.breakOffsetsVisibleColumn=t,this.wrappedTextIndentLength=n,this.injectionOffsets=s,this.injectionOptions=r}getInputOffsetOfOutputPosition(e,t){let n=0;if(e===0?n=t:n=this.breakOffsets[e-1]+t,this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&n>this.injectionOffsets[s];s++)n<this.injectionOffsets[s]+this.injectionOptions[s].content.length?n=this.injectionOffsets[s]:n-=this.injectionOptions[s].content.length;return n}getOutputPositionOfInputOffset(e,t=2){let n=0;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&!(e<this.injectionOffsets[s]||t!==1&&e===this.injectionOffsets[s]);s++)n+=this.injectionOptions[s].content.length;return e+=n,this.getOutputPositionOfOffsetInUnwrappedLine(e,t)}getOutputPositionOfOffsetInUnwrappedLine(e,t=2){let n=0,s=this.breakOffsets.length-1,r=0,o=0;for(;n<=s;){r=n+(s-n)/2|0;const a=this.breakOffsets[r];if(o=r>0?this.breakOffsets[r-1]:0,t===0)if(e<=o)s=r-1;else if(e>a)n=r+1;else break;else if(e<o)s=r-1;else if(e>=a)n=r+1;else break}return new SLe(r,e-o)}outputPositionToOffsetInUnwrappedLine(e,t){let n=(e>0?this.breakOffsets[e-1]:0)+t;return e>0&&(n-=this.wrappedTextIndentLength),n}normalizeOffsetAroundInjections(e,t){const n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===2)return e===n.offsetInUnwrappedLine+n.length?n.offsetInUnwrappedLine+n.length:n.offsetInUnwrappedLine;if(t===1){let o=n.offsetInUnwrappedLine+n.length,a=n.injectedTextIndex;for(;a+1<this.injectionOffsets.length&&this.injectionOffsets[a+1]===this.injectionOffsets[a];)o+=this.injectionOptions[a+1].content.length,a++;return o}let s=n.offsetInUnwrappedLine,r=n.injectedTextIndex;for(;r-1>=0&&this.injectionOffsets[r-1]===this.injectionOffsets[r];)s-=this.injectionOptions[r-1].content.length,r++;return s}getInjectedText(e,t){const n=this.outputPositionToOffsetInUnwrappedLine(e,t),s=this.getInjectedTextAtOffset(n);return s?{options:this.injectionOptions[s.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let s=0;for(let r=0;r<t.length;r++){const o=n[r].content.length,a=t[r]+s,l=t[r]+s+o;if(a>e)break;if(e<=l)return{injectedTextIndex:r,offsetInUnwrappedLine:a,length:o};s+=o}}}}class xLe{constructor(e,t){this.tabSize=e,this.data=t}}class v5{constructor(e,t,n,s,r,o,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=s,this.startVisibleColumn=r,this.tokens=o,this.inlineDecorations=a}}class Cr{constructor(e,t,n,s,r,o,a,l,c,h){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=s,this.isBasicASCII=Cr.isBasicASCII(n,o),this.containsRTL=Cr.containsRTL(n,this.isBasicASCII,r),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=h}static isBasicASCII(e,t){return t?i5(e):!0}static containsRTL(e,t,n){return!t&&n?zL(e):!1}}class pb{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}}class DLe{constructor(e,t,n,s){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=s}toInlineDecoration(e){return new pb(new F(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class zY{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class HY{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static cmp(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}}function LLe(i){return Array.isArray(i)}function kLe(i){return!LLe(i)}function UY(i){return typeof i=="string"}function T7(i){return!UY(i)}function Xg(i){return!i}function Yh(i,e){return i.ignoreCase&&e?e.toLowerCase():e}function N7(i){return i.replace(/[&<>'"_]/g,"-")}function ALe(i,e){console.log(`${i.languageId}: ${e}`)}function Ft(i,e){return new Error(`${i.languageId}: ${e}`)}function Nh(i,e,t,n,s){const r=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let o=null;return e.replace(r,function(a,l,c,h,u,d,f,g,p){return Xg(c)?Xg(h)?!Xg(u)&&u<n.length?Yh(i,n[u]):!Xg(f)&&i&&typeof i[f]=="string"?i[f]:(o===null&&(o=s.split("."),o.unshift(s)),!Xg(d)&&d<o.length?Yh(i,o[d]):""):Yh(i,t):"$"})}function Cy(i,e){let t=e;for(;t&&t.length>0;){const n=i.tokenizer[t];if(n)return n;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return null}function ELe(i,e){let t=e;for(;t&&t.length>0;){if(i.stateNames[t])return!0;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return!1}const $Y=5;class Ov{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new Vp(e,t);let n=Vp.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let s=this._entries[n];return s||(s=new Vp(e,t),this._entries[n]=s,s)}}Ov._INSTANCE=new Ov($Y);class Vp{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return Vp._equals(this,e)}push(e){return Ov.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return Ov.create(this.parent,e)}}class mb{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new mb(this.languageId,this.state)}}class Mh{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(t!==null)return new _b(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new _b(e,t);let n=Vp.getStackElementId(e),s=this._entries[n];return s||(s=new _b(e,null),this._entries[n]=s,s)}}Mh._INSTANCE=new Mh($Y);class _b{constructor(e,t){this.stack=e,this.embeddedModeData=t}clone(){return(this.embeddedModeData?this.embeddedModeData.clone():null)===this.embeddedModeData?this:Mh.create(this.stack,this.embeddedModeData)}equals(e){return!(e instanceof _b)||!this.stack.equals(e.stack)?!1:this.embeddedModeData===null&&e.embeddedModeData===null?!0:this.embeddedModeData===null||e.embeddedModeData===null?!1:this.embeddedModeData.equals(e.embeddedModeData)}}class ILe{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterMode(e,t){this._languageId=t}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new FL(e,t,this._languageId)))}nestedModeTokenize(e,t,n,s){const r=n.languageId,o=n.state,a=xi.get(r);if(!a)return this.enterMode(s,r),this.emit(s,""),o;let l=a.tokenize(e,t,o,s);return this._tokens=this._tokens.concat(l.tokens),this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new jO(this._tokens,e)}}class Nx{constructor(e,t){this._modeService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterMode(e,t){this._currentLanguageId=this._modeService.languageIdCodec.encodeLanguageId(t)}emit(e,t){let n=this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){let s=e!==null?e.length:0,r=t.length,o=n!==null?n.length:0;if(s===0&&r===0&&o===0)return new Uint32Array(0);if(s===0&&r===0)return n;if(r===0&&o===0)return e;let a=new Uint32Array(s+r+o);e!==null&&a.set(e);for(let l=0;l<r;l++)a[s+l]=t[l];return n!==null&&a.set(n,s+r),a}nestedModeTokenize(e,t,n,s){const r=n.languageId,o=n.state,a=xi.get(r);if(!a)return this.enterMode(s,r),this.emit(s,""),o;let l=a.tokenize2(e,t,o,s);return this._prependTokens=Nx._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new BL(Nx._merge(this._prependTokens,this._tokens,null),e)}}class JL{constructor(e,t,n,s){this._modeService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=s,this._embeddedModes=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let r=!1;this._tokenizationRegistryListener=xi.onDidChange(o=>{if(r)return;let a=!1;for(let l=0,c=o.changedLanguages.length;l<c;l++){let h=o.changedLanguages[l];if(this._embeddedModes[h]){a=!0;break}}a&&(r=!0,xi.fire([this._languageId]),r=!1)})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){let e=[];for(let t in this._embeddedModes){const n=xi.get(t);if(n){if(n instanceof JL){const r=n.getLoadStatus();r.loaded===!1&&e.push(r.promise)}continue}const s=xi.getPromise(t);s&&e.push(s)}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){let e=Ov.create(null,this._lexer.start);return Mh.create(e,null)}tokenize(e,t,n,s){let r=new ILe,o=this._tokenize(e,t,n,s,r);return r.finalize(o)}tokenize2(e,t,n,s){let r=new Nx(this._modeService,this._standaloneThemeService.getColorTheme().tokenTheme),o=this._tokenize(e,t,n,s,r);return r.finalize(o)}_tokenize(e,t,n,s,r){return n.embeddedModeData?this._nestedTokenize(e,t,n,s,r):this._myTokenize(e,t,n,s,r)}_findLeavingNestedModeOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=Cy(this._lexer,t.stack.state),!n))throw Ft(this._lexer,"tokenizer state is not defined: "+t.stack.state);let s=-1,r=!1;for(const o of n){if(!T7(o.action)||o.action.nextEmbedded!=="@pop")continue;r=!0;let a=o.regex,l=o.regex.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){let h=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),h)}let c=e.search(a);c===-1||c!==0&&o.matchOnlyAtLineStart||(s===-1||c<s)&&(s=c)}if(!r)throw Ft(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return s}_nestedTokenize(e,t,n,s,r){let o=this._findLeavingNestedModeOffset(e,n);if(o===-1){let c=r.nestedModeTokenize(e,t,n.embeddedModeData,s);return Mh.create(n.stack,new mb(n.embeddedModeData.languageId,c))}let a=e.substring(0,o);a.length>0&&r.nestedModeTokenize(a,!1,n.embeddedModeData,s);let l=e.substring(o);return this._myTokenize(l,t,n,s+o,r)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,s,r){r.enterMode(s,this._languageId);const o=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=n.embeddedModeData,h=n.stack,u=0,d=null,f=!0;for(;f||u<l;){const g=u,p=h.depth,m=d?d.groups.length:0,v=h.state;let b=null,w=null,y=null,x=null,k=null;if(d){b=d.matches;const D=d.groups.shift();w=D.matched,y=D.action,x=d.rule,d.groups.length===0&&(d=null)}else{if(!f&&u>=l)break;f=!1;let D=this._lexer.tokenizer[v];if(!D&&(D=Cy(this._lexer,v),!D))throw Ft(this._lexer,"tokenizer state is not defined: "+v);let N=a.substr(u);for(const T of D)if((u===0||!T.matchOnlyAtLineStart)&&(b=N.match(T.regex),b)){w=b[0],y=T.action;break}}if(b||(b=[""],w=""),y||(u<l&&(b=[a.charAt(u)],w=b[0]),y=this._lexer.defaultToken),w===null)break;for(u+=w.length;kLe(y)&&T7(y)&&y.test;)y=y.test(w,b,v,u===l);let S=null;if(typeof y=="string"||Array.isArray(y))S=y;else if(y.group)S=y.group;else if(y.token!==null&&y.token!==void 0){if(y.tokenSubst?S=Nh(this._lexer,y.token,w,b,v):S=y.token,y.nextEmbedded)if(y.nextEmbedded==="@pop"){if(!c)throw Ft(this._lexer,"cannot pop embedded mode if not inside one");c=null}else{if(c)throw Ft(this._lexer,"cannot enter embedded mode from within an embedded mode");k=Nh(this._lexer,y.nextEmbedded,w,b,v)}if(y.goBack&&(u=Math.max(0,u-y.goBack)),y.switchTo&&typeof y.switchTo=="string"){let D=Nh(this._lexer,y.switchTo,w,b,v);if(D[0]==="@"&&(D=D.substr(1)),Cy(this._lexer,D))h=h.switchTo(D);else throw Ft(this._lexer,"trying to switch to a state '"+D+"' that is undefined in rule: "+this._safeRuleName(x))}else{if(y.transform&&typeof y.transform=="function")throw Ft(this._lexer,"action.transform not supported");if(y.next)if(y.next==="@push"){if(h.depth>=this._lexer.maxStack)throw Ft(this._lexer,"maximum tokenizer stack size reached: ["+h.state+","+h.parent.state+",...]");h=h.push(v)}else if(y.next==="@pop"){if(h.depth<=1)throw Ft(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(x));h=h.pop()}else if(y.next==="@popall")h=h.popall();else{let D=Nh(this._lexer,y.next,w,b,v);if(D[0]==="@"&&(D=D.substr(1)),Cy(this._lexer,D))h=h.push(D);else throw Ft(this._lexer,"trying to set a next state '"+D+"' that is undefined in rule: "+this._safeRuleName(x))}}y.log&&typeof y.log=="string"&&ALe(this._lexer,this._lexer.languageId+": "+Nh(this._lexer,y.log,w,b,v))}if(S===null)throw Ft(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(x));const L=D=>{let N=this._modeService.getModeIdForLanguageName(D);N&&(D=N);const T=this._getNestedEmbeddedModeData(D);if(u<l){const $=e.substr(u);return this._nestedTokenize($,t,Mh.create(h,T),s+u,r)}else return Mh.create(h,T)};if(Array.isArray(S)){if(d&&d.groups.length>0)throw Ft(this._lexer,"groups cannot be nested: "+this._safeRuleName(x));if(b.length!==S.length+1)throw Ft(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(x));let D=0;for(let N=1;N<b.length;N++)D+=b[N].length;if(D!==w.length)throw Ft(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(x));d={rule:x,matches:b,groups:[]};for(let N=0;N<S.length;N++)d.groups[N]={action:S[N],matched:b[N+1]};u-=w.length;continue}else{if(S==="@rematch"&&(u-=w.length,w="",b=null,S="",k!==null))return L(k);if(w.length===0){if(l===0||p!==h.depth||v!==h.state||(d?d.groups.length:0)!==m)continue;throw Ft(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(x))}let D=null;if(UY(S)&&S.indexOf("@brackets")===0){let N=S.substr(9),T=TLe(this._lexer,w);if(!T)throw Ft(this._lexer,"@brackets token returned but no bracket defined as: "+w);D=N7(T.token+N)}else{let N=S===""?"":S+this._lexer.tokenPostfix;D=N7(N)}g<o&&r.emit(g+s,D)}if(k!==null)return L(k)}return Mh.create(h,c)}_getNestedEmbeddedModeData(e){let t=this._locateMode(e);if(t){let n=xi.get(t);if(n)return new mb(t,n.getInitialState())}return new mb(t||pu,jL)}_locateMode(e){if(!e||!this._modeService.isRegisteredMode(e))return null;if(e===this._languageId)return e;const t=this._modeService.getModeId(e);return t&&(this._modeService.triggerMode(t),this._embeddedModes[t]=!0),t}}function TLe(i,e){if(!e)return null;e=Yh(i,e);let t=i.brackets;for(const n of t){if(n.open===e)return{token:n.token,bracketType:1};if(n.close===e)return{token:n.token,bracketType:-1}}return null}function NLe(i,e,t,n){return new JL(i,e,t,n)}var KA;const ZA=(KA=window.trustedTypes)===null||KA===void 0?void 0:KA.createPolicy("standaloneColorizer",{createHTML:i=>i});class w5{static colorizeElement(e,t,n,s){s=s||{};let r=s.theme||"vs",o=s.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();e.setTheme(r);let a=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+r;let l=c=>{var h;const u=(h=ZA==null?void 0:ZA.createHTML(c))!==null&&h!==void 0?h:c;n.innerHTML=u};return this.colorize(t,a||"",o,s).then(l,c=>console.error(c))}static colorize(e,t,n,s){const r=e.languageIdCodec;let o=4;s&&typeof s.tabSize=="number"&&(o=s.tabSize),n5(t)&&(t=t.substr(1));let a=El(t),l=e.getModeId(n);if(!l)return Promise.resolve(M7(a,o,r));e.triggerMode(l);const c=xi.get(l);if(c)return YA(a,o,c,r);const h=xi.getPromise(l);return h?new Promise((u,d)=>{h.then(f=>{YA(a,o,f,r).then(u,d)},d)}):new Promise((u,d)=>{let f=null,g=null;const p=()=>{f&&(f.dispose(),f=null),g&&(g.dispose(),g=null);const m=xi.get(l);if(m){YA(a,o,m,r).then(u,d);return}u(M7(a,o,r))};g=new Ms,g.cancelAndSet(p,500),f=xi.onDidChange(m=>{m.changedLanguages.indexOf(l)>=0&&p()})})}static colorizeLine(e,t,n,s,r=4){const o=Cr.isBasicASCII(e,t),a=Cr.containsRTL(e,o,n);return XL(new tg(!1,!0,e,!1,o,a,0,s,[],r,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,n=4){let s=e.getLineContent(t);e.forceTokenization(t);let o=e.getLineTokens(t).inflate();return this.colorizeLine(s,e.mightContainNonBasicASCII(),e.mightContainRTL(),o,n)}}function YA(i,e,t,n){return new Promise((s,r)=>{const o=()=>{const a=MLe(i,e,t,n);if(t instanceof JL){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(o,r);return}}s(a)};o()})}function M7(i,e,t){let n=[];const r=new Uint32Array(2);r[0]=0,r[1]=16793600;for(let o=0,a=i.length;o<a;o++){let l=i[o];r[0]=l.length;const c=new bn(r,l,t),h=Cr.isBasicASCII(l,!0),u=Cr.containsRTL(l,h,!0);let d=XL(new tg(!1,!0,l,!1,h,u,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(d.html),n.push("<br/>")}return n.join("")}function MLe(i,e,t,n){let s=[],r=t.getInitialState();for(let o=0,a=i.length;o<a;o++){let l=i[o],c=t.tokenize2(l,!0,r,0);bn.convertToEndOffset(c.tokens,l.length);let h=new bn(c.tokens,l,n);const u=Cr.isBasicASCII(l,!0),d=Cr.containsRTL(l,u,!0);let f=XL(new tg(!1,!0,l,!1,u,d,0,h.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));s=s.concat(f.html),s.push("<br/>"),r=c.endState}return s.join("")}var Pv;(function(i){i[i.Ignore=0]="Ignore",i[i.Info=1]="Info",i[i.Warning=2]="Warning",i[i.Error=3]="Error"})(Pv||(Pv={}));(function(i){const e="error",t="warning",n="warn",s="info",r="ignore";function o(l){return l?E_(e,l)?i.Error:E_(t,l)||E_(n,l)?i.Warning:E_(s,l)?i.Info:i.Ignore:i.Ignore}i.fromValue=o;function a(l){switch(l){case i.Error:return e;case i.Warning:return t;case i.Info:return s;default:return r}}i.toString=a})(Pv||(Pv={}));const vi=Pv;function y5(i){return i&&typeof i.getEditorType=="function"?i.getEditorType()===UL.ICodeEditor:!1}const jY=mt("IWorkspaceEditService");function RLe(i){return xs(i)&&(!!i.newUri||!!i.oldUri)}function OLe(i){return xs(i)&&We.isUri(i.resource)&&xs(i.edit)}class C5{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(OLe(t))return new qY(t.resource,t.edit,t.modelVersionId,t.metadata);if(RLe(t))return new PLe(t.oldUri,t.newUri,t.options,t.metadata);throw new Error("Unsupported edit")})}}class qY extends C5{constructor(e,t,n,s){super(s),this.resource=e,this.textEdit=t,this.versionId=n}}class PLe extends C5{constructor(e,t,n,s){super(s),this.oldResource=e,this.newResource=t,this.options=n}}const FLe=Object.prototype.hasOwnProperty;function BLe(i,e){for(let t in i)if(FLe.call(i,t)&&e({key:t,value:i[t]},function(){delete i[t]})===!1)return}class VLe{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);n&&n.forEach(t)}}const R7=new class{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new z,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(i){this._tabFocus!==i&&(this._tabFocus=i,this._onDidChangeTabFocus.fire(this._tabFocus))}},GY=Object.hasOwnProperty;class WLe{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class zLe{constructor(){this._values=[]}_read(e){return this._values[e]}_write(e,t){this._values[e]=t}}class gc{static readOptions(e){const t=e,n=new zLe;for(const s of cp){const r=s.name==="_never_"?void 0:t[s.name];n._write(s.id,r)}return n}static validateOptions(e){const t=new Fye;for(const n of cp)t._write(n.id,n.validate(e._read(n.id)));return t}static computeOptions(e,t){const n=new WLe;for(const s of cp)n._write(s.id,s.compute(t,n,e._read(s.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object")return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?Ll(e,t):!1;for(let n in e)if(!gc._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){const n=[];let s=!1;for(const r of cp){const o=!gc._deepEquals(e._read(r.id),t._read(r.id));n[r.id]=o,o&&(s=!0)}return s?new vZ(n):null}}function HLe(i){const e=i.wordWrap;e===!0?i.wordWrap="on":e===!1&&(i.wordWrap="off");const t=i.lineNumbers;t===!0?i.lineNumbers="on":t===!1&&(i.lineNumbers="off"),i.autoClosingBrackets===!1&&(i.autoClosingBrackets="never",i.autoClosingQuotes="never",i.autoSurround="never"),i.cursorBlinking==="visible"&&(i.cursorBlinking="solid");const r=i.renderWhitespace;r===!0?i.renderWhitespace="boundary":r===!1&&(i.renderWhitespace="none");const o=i.renderLineHighlight;o===!0?i.renderLineHighlight="line":o===!1&&(i.renderLineHighlight="none");const a=i.acceptSuggestionOnEnter;a===!0?i.acceptSuggestionOnEnter="on":a===!1&&(i.acceptSuggestionOnEnter="off");const l=i.tabCompletion;l===!1?i.tabCompletion="off":l===!0&&(i.tabCompletion="onlySnippets");const c=i.suggest;if(c&&typeof c.filteredTypes=="object"&&c.filteredTypes){const m={};m.method="showMethods",m.function="showFunctions",m.constructor="showConstructors",m.deprecated="showDeprecated",m.field="showFields",m.variable="showVariables",m.class="showClasses",m.struct="showStructs",m.interface="showInterfaces",m.module="showModules",m.property="showProperties",m.event="showEvents",m.operator="showOperators",m.unit="showUnits",m.value="showValues",m.constant="showConstants",m.enum="showEnums",m.enumMember="showEnumMembers",m.keyword="showKeywords",m.text="showWords",m.color="showColors",m.file="showFiles",m.reference="showReferences",m.folder="showFolders",m.typeParameter="showTypeParameters",m.snippet="showSnippets",BLe(m,v=>{const b=c.filteredTypes[v.key];b===!1&&(c[v.value]=b)})}const h=i.hover;h===!0?i.hover={enabled:!0}:h===!1&&(i.hover={enabled:!1});const u=i.parameterHints;u===!0?i.parameterHints={enabled:!0}:u===!1&&(i.parameterHints={enabled:!1});const d=i.autoIndent;d===!0?i.autoIndent="full":d===!1&&(i.autoIndent="advanced");const f=i.matchBrackets;f===!0?i.matchBrackets="always":f===!1&&(i.matchBrackets="never");const{renderIndentGuides:g,highlightActiveIndentGuide:p}=i;i.guides||(i.guides={}),g!==void 0&&(i.guides.indentation=!!g),p!==void 0&&(i.guides.highlightActiveIndentation=!!p)}function O7(i){const e=Ih(i);return HLe(e),e}class Mx extends te{constructor(e,t){super(),this._onDidChange=this._register(new z),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new z),this.onDidChangeFast=this._onDidChangeFast.event,this.isSimpleWidget=e,this._isDominatedByLongLines=!1,this._computeOptionsMemory=new wZ,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._rawOptions=O7(t),this._readOptions=gc.readOptions(this._rawOptions),this._validatedOptions=gc.validateOptions(this._readOptions),this._register(vx.onDidChangeZoomLevel(n=>this._recomputeOptions())),this._register(R7.onDidChangeTabFocus(n=>this._recomputeOptions()))}observeReferenceElement(e){}updatePixelRatio(){}_recomputeOptions(){const e=this.options,t=this._computeInternalOptions();if(!e)this.options=t;else{const n=gc.checkEquals(e,t);if(n===null)return;this.options=t,this._onDidChangeFast.fire(n),this._onDidChange.fire(n)}}getRawOptions(){return this._rawOptions}_computeInternalOptions(){const e=this._getEnvConfiguration(),t=zd.createFromValidatedSettings(this._validatedOptions,e.zoomLevel,e.pixelRatio,this.isSimpleWidget),n={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,fontInfo:this.readConfiguration(t),extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:R7.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport};return gc.computeOptions(this._validatedOptions,n)}static _subsetEquals(e,t){for(const n in t)if(GY.call(t,n)){const s=t[n],r=e[n];if(r===s)continue;if(Array.isArray(r)&&Array.isArray(s)){if(!Ll(r,s))return!1;continue}if(r&&typeof r=="object"&&s&&typeof s=="object"){if(!this._subsetEquals(r,s))return!1;continue}return!1}return!0}updateOptions(e){if(typeof e>"u")return;const t=O7(e);Mx._subsetEquals(this._rawOptions,t)||(this._rawOptions=Ma(this._rawOptions,t||{}),this._readOptions=gc.readOptions(this._rawOptions),this._validatedOptions=gc.validateOptions(this._readOptions),this._recomputeOptions())}setIsDominatedByLongLines(e){this._isDominatedByLongLines=e,this._recomputeOptions()}setMaxLineNumber(e){const t=Mx._digitCount(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}static _digitCount(e){let t=0;for(;e;)e=Math.floor(e/10),t++;return t||1}}const ULe=Object.freeze({id:"editor",order:5,type:"object",title:_("editorConfigurationTitle","Editor"),scope:5}),$Le=kn.as(x0.Configuration),Rx=Object.assign(Object.assign({},ULe),{properties:{"editor.tabSize":{type:"number",default:Kn.tabSize,minimum:1,markdownDescription:_("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:Kn.insertSpaces,markdownDescription:_("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:Kn.detectIndentation,markdownDescription:_("detectIndentation","Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:"boolean",default:Kn.trimAutoWhitespace,description:_("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Kn.largeFileOptimizations,description:_("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:_("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[_("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),_("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),_("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:_("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[_("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),_("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),_("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:_("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:_("stablePeek","Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:_("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.language.brackets":{type:"array",default:!1,description:_("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:_("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:_("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:"array",default:!1,description:_("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:_("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:_("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:_("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:50,description:_("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:_("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:_("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:_("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:_("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[_("wordWrap.off","Lines will never wrap."),_("wordWrap.on","Lines will wrap at the viewport width."),_("wordWrap.inherit","Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function jLe(i){return typeof i.type<"u"||typeof i.anyOf<"u"}for(const i of cp){const e=i.schema;if(typeof e<"u")if(jLe(e))Rx.properties[`editor.${i.name}`]=e;else for(let t in e)GY.call(e,t)&&(Rx.properties[t]=e[t])}let Sy=null;function KY(){return Sy===null&&(Sy=Object.create(null),Object.keys(Rx.properties).forEach(i=>{Sy[i]=!0})),Sy}function qLe(i){return KY()[`editor.${i}`]||!1}function GLe(i){return KY()[`diffEditor.${i}`]||!1}$Le.registerConfiguration(Rx);class Lm{static insert(e,t){return{range:new F(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}class Tr{constructor(e={},t=[],n=[]){this._contents=e,this._keys=t,this._overrides=n,this.isFrozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?EDe(this.contents,e):this.contents}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){const t=Ih(this.contents),n=Ih(this.overrides),s=[...this.keys];for(const r of e){this.mergeContents(t,r.contents);for(const o of r.overrides){const[a]=n.filter(l=>Ll(l.identifiers,o.identifiers));a?this.mergeContents(a.contents,o.contents):n.push(Ih(o))}for(const o of r.keys)s.indexOf(o)===-1&&s.push(o)}return new Tr(t,s,n)}freeze(){return this.isFrozen=!0,this}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;let n={};for(const s of Ix([...Object.keys(this.contents),...Object.keys(t)])){let r=this.contents[s],o=t[s];o&&(typeof r=="object"&&typeof o=="object"?(r=Ih(r),this.mergeContents(r,o)):r=o),n[s]=r}return new Tr(n,this.keys,this.overrides)}mergeContents(e,t){for(const n of Object.keys(t)){if(n in e&&xs(e[n])&&xs(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=Ih(t[n])}}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?cxe(e):e}getContentsForOverrideIdentifer(e){for(const t of this.overrides)if(t.identifiers.indexOf(e)!==-1)return t.contents;return null}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),g5(this.contents,e,t,n=>{throw new Error(n)})}removeValue(e){this.removeKey(e)&&ADe(this.contents,e)}addKey(e){let t=this.keys.length;for(let n=0;n<t;n++)e.indexOf(this.keys[n])===0&&(t=n);this.keys.splice(t,1,e)}removeKey(e){let t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1}}class KLe extends Tr{constructor(){const e=TDe(),t=IDe(),n=[];for(const s of Object.keys(e))f5.test(s)&&n.push({identifiers:[DDe(s).trim()],keys:Object.keys(e[s]),contents:LY(e[s],r=>console.error(`Conflict in default settings file: ${r}`))});super(e,t,n)}}let ZY=class YY{constructor(e,t,n=new Tr,s=new Tr,r=new rs,o=new Tr,a=new rs,l=!0){this._defaultConfiguration=e,this._localUserConfiguration=t,this._remoteUserConfiguration=n,this._workspaceConfiguration=s,this._folderConfigurations=r,this._memoryConfiguration=o,this._memoryConfigurationByResource=a,this._freeze=l,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new rs,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidateConfigurationModel(t,n).getValue(e)}updateValue(e,t,n={}){let s;n.resource?(s=this._memoryConfigurationByResource.get(n.resource),s||(s=new Tr,this._memoryConfigurationByResource.set(n.resource,s))):s=this._memoryConfiguration,t===void 0?s.removeValue(e):s.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}getConsolidateConfigurationModel(e,t){let n=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier?n.override(e.overrideIdentifier):n}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const s=t.getFolder(e);s&&(n=this.getFolderConsolidatedConfiguration(s.uri)||n);const r=this._memoryConfigurationByResource.get(e);r&&(n=n.merge(r))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),s=this._folderConfigurations.get(e);s?(t=n.merge(s),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:n,overrides:s,keys:r}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:s,keys:r}]),e},[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),n=this.parseConfigurationModel(e.user),s=this.parseConfigurationModel(e.workspace),r=e.folders.reduce((o,a)=>(o.set(We.revive(a[0]),this.parseConfigurationModel(a[1])),o),new rs);return new YY(t,n,new Tr,s,r,new Tr,new rs,!1)}static parseConfigurationModel(e){return new Tr(e.contents,e.keys,e.overrides).freeze()}};class ZLe{constructor(e,t,n,s){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=s,this._previousConfiguration=void 0;const r=new Set;e.keys.forEach(a=>r.add(a)),e.overrides.forEach(([,a])=>a.forEach(l=>r.add(l))),this.affectedKeys=[...r.values()];const o=new Tr;this.affectedKeys.forEach(a=>o.setValue(a,{})),this.affectedKeysTree=o.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=ZY.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var n;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)){if(t){const s=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(n=this.previous)===null||n===void 0?void 0:n.workspace):void 0,r=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!ca(s,r)}return!0}return!1}doesAffectedKeysTreeContains(e,t){let n=LY({[t]:!0},()=>{}),s;for(;typeof n=="object"&&(s=Object.keys(n)[0]);){if(e=e[s],!e)return!1;n=n[s]}return!0}}const YLe=/^(cursor|delete)/;class QLe extends te{constructor(e,t,n,s,r){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=s,this._logService=r,this._onDidUpdateKeybindings=this._register(new z),this._currentChord=null,this._currentChordChecker=new vw,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=gp.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new Ms,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:ke.None}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){const n=this.resolveKeyboardEvent(e);if(n.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[s]=n.getDispatchParts();if(s===null)return null;const r=this._contextKeyService.getContext(t),o=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(r,o,s)}_enterChordMode(e,t){this._currentChord={keypress:e,label:t},this._currentChordStatusMessage=this._notificationService.status(_("first.chord","({0}) was pressed. Waiting for second key of chord...",t));const n=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-n>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[s]=n.getSingleModifierDispatchParts();if(s)return this._ignoreSingleModifiers.has(s)?(this._log(`+ Ignoring single modifier ${s} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=gp.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=gp.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${s}.`),this._currentSingleModifier=s,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):s===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${s} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[r]=n.getParts();return this._ignoreSingleModifiers=new gp(r),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,n=!1){let s=!1;if(e.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let r=null,o=null;if(n){const[h]=e.getSingleModifierDispatchParts();r=h,o=h}else[r]=e.getDispatchParts(),o=this._currentChord?this._currentChord.keypress:null;if(r===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),s;const a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,o,r);return this._logService.trace("KeybindingService#dispatch",l,c==null?void 0:c.commandId),c&&c.enterChord?(s=!0,this._enterChordMode(r,l),s):(this._currentChord&&(!c||!c.commandId)&&(this._notificationService.status(_("missing.chord","The key combination ({0}, {1}) is not a command.",this._currentChord.label,l),{hideAfter:10*1e3}),s=!0),this._leaveChordMode(),c&&c.commandId&&(c.bubble||(s=!0),typeof c.commandArgs>"u"?this._commandService.executeCommand(c.commandId).then(void 0,h=>this._notificationService.warn(h)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,h=>this._notificationService.warn(h)),YLe.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding"})),s)}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}class gp{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}gp.EMPTY=new gp(null);let ek=Mye||"";const Pn=new Map;Pn.set("false",!1);Pn.set("true",!0);Pn.set("isMac",ht);Pn.set("isLinux",As);Pn.set("isWindows",On);Pn.set("isWeb",mw);Pn.set("isMacNative",ht&&!mw);Pn.set("isEdge",ek.indexOf("Edg/")>=0);Pn.set("isFirefox",ek.indexOf("Firefox")>=0);Pn.set("isChrome",ek.indexOf("Chrome")>=0);Pn.set("isSafari",ek.indexOf("Safari")>=0);const XLe=Object.prototype.hasOwnProperty;class xe{static has(e){return mu.create(e)}static equals(e,t){return km.create(e,t)}static regex(e,t){return Ox.create(e,t)}static not(e){return Df.create(e)}static and(...e){return Wh.create(e,null)}static or(...e){return Nc.create(e,null,!0)}static deserialize(e,t=!1){if(e)return this._deserializeOrExpression(e,t)}static _deserializeOrExpression(e,t){let n=e.split("||");return Nc.create(n.map(s=>this._deserializeAndExpression(s,t)),null,!0)}static _deserializeAndExpression(e,t){let n=e.split("&&");return Wh.create(n.map(s=>this._deserializeOne(s,t)),null)}static _deserializeOne(e,t){if(e=e.trim(),e.indexOf("!=")>=0){let n=e.split("!=");return tk.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("==")>=0){let n=e.split("==");return km.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("=~")>=0){let n=e.split("=~");return Ox.create(n[0].trim(),this._deserializeRegexValue(n[1],t))}if(e.indexOf(" in ")>=0){let n=e.split(" in ");return S5.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const n=e.split(">=");return sk.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const n=e.split(">");return nk.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const n=e.split("<=");return ok.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const n=e.split("<");return rk.create(n[0].trim(),n[1].trim())}return/^\!\s*/.test(e)?Df.create(e.substr(1).trim()):mu.create(e)}static _deserializeValue(e,t){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;let n=/^'([^']*)'$/.exec(e);return n?n[1].trim():e}static _deserializeRegexValue(e,t){if(KZ(e)){if(t)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}let n=e.indexOf("/"),s=e.lastIndexOf("/");if(n===s||n<0){if(t)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}let r=e.slice(n+1,s),o=e[s+1]==="i"?"i":"";try{return new RegExp(r,o)}catch(a){if(t)throw new Error(`bad regexp-value '${e}', parse error: ${a}`);return console.warn(`bad regexp-value '${e}', parse error: ${a}`),null}}}function JLe(i,e){const t=i?i.substituteConstants():void 0,n=e?e.substituteConstants():void 0;return!t&&!n?!0:!t||!n?!1:t.equals(n)}function Wp(i,e){return i.cmp(e)}class Sr{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return qr.INSTANCE}}Sr.INSTANCE=new Sr;class qr{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Sr.INSTANCE}}qr.INSTANCE=new qr;class mu{constructor(e,t){this.key=e,this.negated=t,this.type=2}static create(e,t=null){const n=Pn.get(e);return typeof n=="boolean"?n?qr.INSTANCE:Sr.INSTANCE:new mu(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:XY(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Pn.get(this.key);return typeof e=="boolean"?e?qr.INSTANCE:Sr.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=Df.create(this.key,this)),this.negated}}class km{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}static create(e,t,n=null){if(typeof t=="boolean")return t?mu.create(e,n):Df.create(e,n);const s=Pn.get(e);return typeof s=="boolean"?t===(s?"true":"false")?qr.INSTANCE:Sr.INSTANCE:new km(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:ig(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Pn.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?qr.INSTANCE:Sr.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=tk.create(this.key,this.value,this)),this.negated}}class S5{constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}static create(e,t){return new S5(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:ig(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.indexOf(n)>=0:typeof n=="string"&&typeof t=="object"&&t!==null?XLe.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=x5.create(this)),this.negated}}class x5{constructor(e){this._actual=e,this.type=11}static create(e){return new x5(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}class tk{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}static create(e,t,n=null){if(typeof t=="boolean")return t?Df.create(e,n):mu.create(e,n);const s=Pn.get(e);return typeof s=="boolean"?t===(s?"true":"false")?Sr.INSTANCE:qr.INSTANCE:new tk(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:ig(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Pn.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Sr.INSTANCE:qr.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=km.create(this.key,this.value,this)),this.negated}}class Df{constructor(e,t){this.key=e,this.negated=t,this.type=3}static create(e,t=null){const n=Pn.get(e);return typeof n=="boolean"?n?Sr.INSTANCE:qr.INSTANCE:new Df(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:XY(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Pn.get(this.key);return typeof e=="boolean"?e?Sr.INSTANCE:qr.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=mu.create(this.key,this)),this.negated}}function ik(i,e){if(typeof i=="string"){const t=parseFloat(i);isNaN(t)||(i=t)}return typeof i=="string"||typeof i=="number"?e(i):Sr.INSTANCE}class nk{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}static create(e,t,n=null){return ik(t,s=>new nk(e,s,n))}cmp(e){return e.type!==this.type?this.type-e.type:ig(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ok.create(this.key,this.value,this)),this.negated}}class sk{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}static create(e,t,n=null){return ik(t,s=>new sk(e,s,n))}cmp(e){return e.type!==this.type?this.type-e.type:ig(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=rk.create(this.key,this.value,this)),this.negated}}class rk{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}static create(e,t,n=null){return ik(t,s=>new rk(e,s,n))}cmp(e){return e.type!==this.type?this.type-e.type:ig(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=sk.create(this.key,this.value,this)),this.negated}}class ok{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}static create(e,t,n=null){return ik(t,s=>new ok(e,s,n))}cmp(e){return e.type!==this.type?this.type-e.type:ig(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=nk.create(this.key,this.value,this)),this.negated}}class Ox{constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}static create(e,t){return new Ox(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=D5.create(this)),this.negated}}class D5{constructor(e){this._actual=e,this.type=8}static create(e){return new D5(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}function QY(i){let e=null;for(let t=0,n=i.length;t<n;t++){const s=i[t].substituteConstants();if(i[t]!==s&&e===null){e=[];for(let r=0;r<t;r++)e[r]=i[r]}e!==null&&(e[t]=s)}return e===null?i:e}class Wh{constructor(e,t){this.expr=e,this.negated=t,this.type=6}static create(e,t){return Wh._normalizeArr(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const s=Wp(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=QY(this.expr);return e===this.expr?this:Wh.create(e,this.negated)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t){const n=[];let s=!1;for(const r of e)if(r){if(r.type===1){s=!0;continue}if(r.type===0)return Sr.INSTANCE;if(r.type===6){n.push(...r.expr);continue}n.push(r)}if(n.length===0&&s)return qr.INSTANCE;if(n.length!==0){if(n.length===1)return n[0];n.sort(Wp);for(let r=1;r<n.length;r++)n[r-1].equals(n[r])&&(n.splice(r,1),r--);if(n.length===1)return n[0];for(;n.length>1;){const r=n[n.length-1];if(r.type!==9)break;n.pop();const o=n.pop(),a=n.length===0,l=Nc.create(r.expr.map(c=>Wh.create([c,o],null)),null,a);l&&(n.push(l),n.sort(Wp))}return n.length===1?n[0]:new Wh(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(let t of this.expr)e.push(t.negate());this.negated=Nc.create(e,this,!0)}return this.negated}}class Nc{constructor(e,t){this.expr=e,this.negated=t,this.type=9}static create(e,t,n){return Nc._normalizeArr(e,t,n)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const s=Wp(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=QY(this.expr);return e===this.expr?this:Nc.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let s=[],r=!1;if(e){for(let o=0,a=e.length;o<a;o++){const l=e[o];if(l){if(l.type===0){r=!0;continue}if(l.type===1)return qr.INSTANCE;if(l.type===9){s=s.concat(l.expr);continue}s.push(l)}}if(s.length===0&&r)return Sr.INSTANCE;s.sort(Wp)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(n){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)JY(s[o],s[a])&&(s.splice(a,1),a--);if(s.length===1)return s[0]}return new Nc(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),s=[];for(const o of Px(t))for(const a of Px(n))s.push(Wh.create([o,a],null));const r=e.length===0;e.unshift(Nc.create(s,null,r))}this.negated=e[0]}return this.negated}}class De extends mu{constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?De._info.push(Object.assign(Object.assign({},n),{key:e})):n!==!0&&De._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}static all(){return De._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return km.create(this.key,e)}}De._info=[];const $e=mt("contextKeyService"),eke="setContext";function XY(i,e){return i<e?-1:i>e?1:0}function ig(i,e,t,n){return i<t?-1:i>t?1:e<n?-1:e>n?1:0}function JY(i,e){if(e.type===6&&i.type!==9&&i.type!==6){for(const s of e.expr)if(i.equals(s))return!0}const t=i.negate(),n=Px(t).concat(Px(e));n.sort(Wp);for(let s=0;s<n.length;s++){const o=n[s].negate();for(let a=s+1;a<n.length;a++){const l=n[a];if(o.equals(l))return!0}}return!1}function Px(i){return i.type===9?i.expr:[i]}class zp{constructor(e,t,n){this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(let s=0,r=e.length;s<r;s++){const o=e[s].command;o&&this._defaultBoundCommands.set(o,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=zp.combine(e,t);for(let s=0,r=this._keybindings.length;s<r;s++){let o=this._keybindings[s];o.keypressParts.length!==0&&(o.when&&o.when.type===0||this._addKeyPress(o.keypressParts[0],o))}}static _isTargetedForRemoval(e,t,n,s,r){return!(e.command!==s||t&&e.keypressParts[0]!==t||n&&e.keypressParts[1]!==n||r&&(!e.when||!JLe(r,e.when)))}static combine(e,t){e=e.slice(0);let n=[];for(const s of t){if(!s.command||s.command.length===0||s.command.charAt(0)!=="-"){n.push(s);continue}const r=s.command.substr(1),o=s.keypressParts[0],a=s.keypressParts[1],l=s.when;for(let c=e.length-1;c>=0;c--)this._isTargetedForRemoval(e[c],o,a,r,l)&&e.splice(c,1)}return e.concat(n)}_addKeyPress(e,t){const n=this._map.get(e);if(typeof n>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let s=n.length-1;s>=0;s--){let r=n[s];if(r.command===t.command)continue;const o=r.keypressParts.length>1,a=t.keypressParts.length>1;o&&a&&r.keypressParts[1]!==t.keypressParts[1]||zp.whenIsEntirelyIncluded(r.when,t.when)&&this._removeFromLookupMap(r)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let n=0,s=t.length;n<s;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:JY(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const n=this._lookupMap.get(e);if(typeof n>"u"||n.length===0)return null;if(n.length===1)return n[0];for(let s=n.length-1;s>=0;s--){const r=n[s];if(t.contextMatchesRules(r.when))return r}return n[n.length-1]}resolve(e,t,n){this._log(`| Resolving ${n}${t?` chorded from ${t}`:""}`);let s=null;if(t!==null){const o=this._map.get(t);if(typeof o>"u")return this._log("\\ No keybinding entries."),null;s=[];for(let a=0,l=o.length;a<l;a++){let c=o[a];c.keypressParts[1]===n&&s.push(c)}}else{const o=this._map.get(n);if(typeof o>"u")return this._log("\\ No keybinding entries."),null;s=o}let r=this._findCommand(e,s);return r?t===null&&r.keypressParts.length>1&&r.keypressParts[1]!==null?(this._log(`\\ From ${s.length} keybinding entries, matched chord, when: ${P7(r.when)}, source: ${F7(r)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${s.length} keybinding entries, matched ${r.command}, when: ${P7(r.when)}, source: ${F7(r)}.`),{enterChord:!1,leaveChord:r.keypressParts.length>1,commandId:r.command,commandArgs:r.commandArgs,bubble:r.bubble}):(this._log(`\\ From ${s.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){let s=t[n];if(zp.contextMatchesRules(e,s.when))return s}return null}static contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function P7(i){return i?`${i.serialize()}`:"no when condition"}function F7(i){return i.extensionId?i.isBuiltinExtension?`built-in extension ${i.extensionId}`:`user extension ${i.extensionId}`:i.isDefault?"built-in":"user"}class Fx{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(po===1){if(e&&e.win)return e.win}else if(po===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=Fx.bindToCurrentPlatform(e);if(t&&t.primary){const n=KN(t.primary,po);n&&this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let n=0,s=t.secondary.length;n<s;n++){const r=t.secondary[n],o=KN(r,po);o&&this._registerDefaultKeybinding(o,e.id,e.args,e.weight,-n-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),Tt.registerCommand(e)}static _mightProduceChar(e){return e>=21&&e<=30||e>=31&&e<=56?!0:e===80||e===81||e===82||e===83||e===84||e===85||e===86||e===110||e===111||e===87||e===88||e===89||e===90||e===91||e===92}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&Fx._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,n,s,r,o){po===1&&this._assertNoCtrlAlt(e.parts[0],t),this._coreKeybindings.push({keybinding:e.parts,command:t,commandArgs:n,when:o,weight1:s,weight2:r,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(ike)),this._cachedMergedKeybindings.slice(0)}}const ds=new Fx,tke={EditorModes:"platform.keybindingsRegistry"};kn.add(tke.EditorModes,ds);function ike(i,e){return i.weight1!==e.weight1?i.weight1-e.weight1:i.command<e.command?-1:i.command>e.command?1:i.weight2-e.weight2}class B7{constructor(e,t,n,s,r,o,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.keypressParts=e?AM(e.getDispatchParts()):[],e&&this.keypressParts.length===0&&(this.keypressParts=AM(e.getSingleModifierDispatchParts())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=s,this.isDefault=r,this.extensionId=o,this.isBuiltinExtension=a}}function AM(i){let e=[];for(let t=0,n=i.length;t<n;t++){const s=i[t];if(!s)return e;e.push(s)}return e}class L5{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=n(a);if(l===null)return null;s[r]=rke(a,l,this.modifierLabels[e])}return s.join(" ")}}const k5=new L5({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:_({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:_({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:_({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:_({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:_({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:_({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:_({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:_({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),nke=new L5({ctrlKey:_({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:_({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:_({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:_({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:_({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:_({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:_({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:_({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:_({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:_({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:_({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:_({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),ske=new L5({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});function rke(i,e,t){if(e===null)return"";const n=[];return i.ctrlKey&&n.push(t.ctrlKey),i.shiftKey&&n.push(t.shiftKey),i.altKey&&n.push(t.altKey),i.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}class oke extends ZCe{constructor(e,t){if(super(),t.length===0)throw yl("parts");this._os=e,this._parts=t}getLabel(){return k5.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return nke.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._parts.length>1||this._parts[0].isDuplicateModifierCase()?null:ske.toLabel(this._os,this._parts,e=>this._getElectronAccelerator(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){return new KCe(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}getSingleModifierDispatchParts(){return this._parts.map(e=>this._getSingleModifierDispatchPart(e))}}class Fv extends oke{constructor(e,t){super(t,e.parts)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return Dd.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":Dd.toString(e.keyCode)}_getElectronAccelerator(e){return Dd.toElectronAccelerator(e.keyCode)}_getDispatchPart(e){return Fv.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=Dd.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=UO[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 83;case 52:return 81;case 53:return 87;case 54:return 89;case 55:return 88;case 56:return 0;case 57:return 80;case 58:return 90;case 59:return 86;case 60:return 82;case 61:return 84;case 62:return 85;case 106:return 92}return 0}static _resolveSimpleUserBinding(e){if(!e)return null;if(e instanceof yf)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new yf(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveUserBinding(e,t){const n=AM(e.map(s=>this._resolveSimpleUserBinding(s)));return n.length>0?[new Fv(new gx(n),t)]:[]}}const Vn=mt("notificationService");class ake{}const eQ=mt("contextService");class lke{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}var V7;(function(i){i.noSelection=_("noSelection","No selection"),i.singleSelectionRange=_("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),i.singleSelection=_("singleSelection","Line {0}, Column {1}"),i.multiSelectionRange=_("multiSelectionRange","{0} selections ({1} characters selected)"),i.multiSelection=_("multiSelection","{0} selections"),i.emergencyConfOn=_("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),i.openingDocs=_("openingDocs","Now opening the Editor Accessibility documentation page."),i.readonlyDiffEditor=_("readonlyDiffEditor"," in a read-only pane of a diff editor."),i.editableDiffEditor=_("editableDiffEditor"," in a pane of a diff editor."),i.readonlyEditor=_("readonlyEditor"," in a read-only code editor"),i.editableEditor=_("editableEditor"," in a code editor"),i.changeConfigToOnMac=_("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),i.changeConfigToOnWinLinux=_("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),i.auto_on=_("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),i.auto_off=_("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),i.tabFocusModeOnMsg=_("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),i.tabFocusModeOnMsgNoKb=_("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),i.tabFocusModeOffMsg=_("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),i.tabFocusModeOffMsgNoKb=_("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),i.openDocMac=_("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),i.openDocWinLinux=_("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),i.outroMsg=_("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),i.showAccessibilityHelpAction=_("showAccessibilityHelpAction","Show Accessibility Help")})(V7||(V7={}));var W7;(function(i){i.inspectTokensAction=_("inspectTokens","Developer: Inspect Tokens")})(W7||(W7={}));var z7;(function(i){i.gotoLineActionLabel=_("gotoLineActionLabel","Go to Line/Column...")})(z7||(z7={}));var H7;(function(i){i.helpQuickAccessActionLabel=_("helpQuickAccess","Show all Quick Access Providers")})(H7||(H7={}));var U7;(function(i){i.quickCommandActionLabel=_("quickCommandActionLabel","Command Palette"),i.quickCommandHelp=_("quickCommandActionHelp","Show And Run Commands")})(U7||(U7={}));var $7;(function(i){i.quickOutlineActionLabel=_("quickOutlineActionLabel","Go to Symbol..."),i.quickOutlineByCategoryActionLabel=_("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})($7||($7={}));var Bx;(function(i){i.editorViewAccessibleLabel=_("editorViewAccessibleLabel","Editor content"),i.accessibilityHelpMessage=_("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(Bx||(Bx={}));var j7;(function(i){i.toggleHighContrast=_("toggleHighContrast","Toggle High Contrast Theme")})(j7||(j7={}));var EM;(function(i){i.bulkEditServiceSummary=_("bulkEditServiceSummary","Made {0} edits in {1} files")})(EM||(EM={}));var tQ=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},iQ=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},nQ=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class cke{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new z}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}function hke(i,e,t){return y5(i)?e(i):t(i)}let IM=class{constructor(e){this.modelService=e}setEditor(e){this.editor=e}createModelReference(e){let t=null;return this.editor&&(t=hke(this.editor,n=>this.findModel(n,e),n=>this.findModel(n.getOriginalEditor(),e)||this.findModel(n.getModifiedEditor(),e))),t?Promise.resolve(new SCe(new cke(t))):Promise.reject(new Error("Model not found"))}findModel(e,t){let n=this.modelService.getModel(t);return n&&n.uri.toString()!==t.toString()?null:n}};IM=tQ([iQ(0,Rs)],IM);class ak{show(){return ak.NULL_PROGRESS_RUNNER}showWhile(e,t){return nQ(this,void 0,void 0,function*(){yield e})}}ak.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class uke{confirm(e){return this.doConfirm(e).then(t=>({confirmed:t,checkboxChecked:!1}))}doConfirm(e){let t=e.message;return e.detail&&(t=t+`

`+e.detail),Promise.resolve(window.confirm(t))}show(e,t,n,s){return Promise.resolve({choice:0})}}class lk{info(e){return this.notify({severity:vi.Info,message:e})}warn(e){return this.notify({severity:vi.Warning,message:e})}error(e){return this.notify({severity:vi.Error,message:e})}notify(e){switch(e.severity){case vi.Error:console.error(e.message);break;case vi.Warning:console.warn(e.message);break;default:console.log(e.message);break}return lk.NO_OP}status(e,t){return te.None}}lk.NO_OP=new ake;class dke{constructor(e){this._onWillExecuteCommand=new z,this._onDidExecuteCommand=new z,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const n=Tt.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const s=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(s)}catch(s){return Promise.reject(s)}}}class sQ extends QLe{constructor(e,t,n,s,r,o){super(e,t,n,s,r),this._cachedResolver=null,this._dynamicKeybindings=[],this._register(ne(o,Ae.KEY_DOWN,a=>{const l=new li(a);this._dispatch(l,l.target)&&(l.preventDefault(),l.stopPropagation())})),this._register(ne(window,Ae.KEY_UP,a=>{const l=new li(a);this._singleModifierDispatch(l,l.target)&&l.preventDefault()}))}addDynamicKeybinding(e,t,n,s){const r=KN(t,po),o=new de;return r&&(this._dynamicKeybindings.push({keybinding:r.parts,command:e,when:s,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}),o.add(gt(()=>{for(let a=0;a<this._dynamicKeybindings.length;a++)if(this._dynamicKeybindings[a].command===e){this._dynamicKeybindings.splice(a,1),this.updateResolver({source:1});return}}))),o.add(Tt.registerCommand(e,n)),this.updateResolver({source:1}),o}updateResolver(e){this._cachedResolver=null,this._onDidUpdateKeybindings.fire(e)}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(ds.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new zp(e,t,n=>this._log(n))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){let n=[],s=0;for(const r of e){const o=r.when||void 0,a=r.keybinding;if(!a)n[s++]=new B7(void 0,r.command,r.commandArgs,o,t,null,!1);else{const l=Fv.resolveUserBinding(a,po);for(const c of l)n[s++]=new B7(c,r.command,r.commandArgs,o,t,null,!1)}}return n}resolveKeyboardEvent(e){let t=new yf(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode).toChord();return new Fv(t,po)}}function q7(i){return i&&typeof i=="object"&&(!i.overrideIdentifier||typeof i.overrideIdentifier=="string")&&(!i.resource||i.resource instanceof We)}class rQ{constructor(){this._onDidChangeConfiguration=new z,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new ZY(new KLe,new Tr)}getValue(e,t){const n=typeof e=="string"?e:void 0,s=q7(e)?e:q7(t)?t:{};return this._configuration.getValue(n,s,void 0)}updateValues(e){const t={data:this._configuration.toData()};let n=[];for(const s of e){const[r,o]=s;this.getValue(r)!==o&&(this._configuration.updateValue(r,o),n.push(r))}if(n.length>0){const s=new ZLe({keys:n,overrides:[]},t,this._configuration);s.source=7,s.sourceConfig=null,this._onDidChangeConfiguration.fire(s)}return Promise.resolve()}}class fke{constructor(e){this.configurationService=e,this._onDidChangeConfiguration=new z,this.configurationService.onDidChangeConfiguration(t=>{this._onDidChangeConfiguration.fire({affectedKeys:t.affectedKeys,affectsConfiguration:(n,s)=>t.affectsConfiguration(s)})})}getValue(e,t,n){const r=(q.isIPosition(t)?t:null)?typeof n=="string"?n:void 0:typeof t=="string"?t:void 0;return typeof r>"u"?this.configurationService.getValue():this.configurationService.getValue(r)}}let TM=class{constructor(e){this.configurationService=e}getEOL(e,t){const n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&typeof n=="string"&&n!=="auto"?n:As||ht?`
`:`\r
`}};TM=tQ([iQ(0,Fi)],TM);class gke{publicLog(e,t){return Promise.resolve(void 0)}publicLog2(e,t){return this.publicLog(e,t)}}class ck{constructor(){const e=We.from({scheme:ck.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new lke({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}}ck.SCHEME="inmemory";function Vx(i,e,t){if(!e||!(i instanceof rQ))return;let n=[];Object.keys(e).forEach(s=>{qLe(s)&&n.push([`editor.${s}`,e[s]]),t&&GLe(s)&&n.push([`diffEditor.${s}`,e[s]])}),n.length>0&&i.updateValues(n)}class pke{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return nQ(this,void 0,void 0,function*(){const n=new Map;for(let o of e){if(!(o instanceof qY))throw new Error("bad edit - only text edits are supported");const a=this._modelService.getModel(o.resource);if(!a)throw new Error("bad edit - model not found");if(typeof o.versionId=="number"&&a.getVersionId()!==o.versionId)throw new Error("bad state - model changed in the meantime");let l=n.get(a);l||(l=[],n.set(a,l)),l.push(Lm.replaceMove(F.lift(o.textEdit.range),o.textEdit.text))}let s=0,r=0;for(const[o,a]of n)o.pushStackElement(),o.pushEditOperations([],a,()=>[]),o.pushStackElement(),r+=1,s+=a.length;return{ariaSummary:fo(EM.bulkEditServiceSummary,s,r)}})}}class mke{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}}class _ke{constructor(e,t){this._codeEditorService=e,this._container=t,this.onDidLayout=ke.None}get dimension(){return this._dimension||(this._dimension=WL(window.document.body)),this._dimension}get container(){return this._container}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}}const G7=2e4;let ad,jC,NM,qC,MM;function bke(i){ad=document.createElement("div"),ad.className="monaco-aria-container";const e=()=>{const n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),ad.appendChild(n),n};jC=e(),NM=e();const t=()=>{const n=document.createElement("div");return n.className="monaco-status",n.setAttribute("role","complementary"),n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),ad.appendChild(n),n};qC=t(),MM=t(),i.appendChild(ad)}function ng(i){ad&&(jC.textContent!==i?(Rn(NM),zx(jC,i)):(Rn(jC),zx(NM,i)))}function Wx(i){ad&&(ht?ng(i):qC.textContent!==i?(Rn(MM),zx(qC,i)):(Rn(qC),zx(MM,i)))}function zx(i,e){Rn(i),e.length>G7&&(e=e.substr(0,G7)),i.textContent=e,i.style.visibility="hidden",i.style.visibility="visible"}const A5=mt("markerDecorationsService");var Hx=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class Io extends te{constructor(e,t="",n="",s=!0,r){super(),this._onDidChange=this._register(new z),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=s,this._actionCallback=r}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return Hx(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}}class Am extends te{constructor(){super(...arguments),this._onBeforeRun=this._register(new z),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new z),this.onDidRun=this._onDidRun.event}run(e,t){return Hx(this,void 0,void 0,function*(){if(!e.enabled)return;this._onBeforeRun.fire({action:e});let n;try{yield this.runAction(e,t)}catch(s){n=s}this._onDidRun.fire({action:e,error:n})})}runAction(e,t){return Hx(this,void 0,void 0,function*(){yield e.run(t)})}}class ha extends Io{constructor(e){super(ha.ID,e,e?"separator text":"separator"),this.checked=!1,this.enabled=!1}}ha.ID="vs.actions.separator";class E5{constructor(e,t,n,s){this.tooltip="",this.enabled=!0,this.checked=!1,this.id=e,this.label=t,this.class=s,this._actions=n}get actions(){return this._actions}dispose(){}run(){return Hx(this,void 0,void 0,function*(){})}}class hk extends Io{constructor(){super(hk.ID,_("submenu.empty","(empty)"),void 0,!1)}}hk.ID="vs.actions.empty";var ua;(function(i){i.DARK="dark",i.LIGHT="light",i.HIGH_CONTRAST="hc"})(ua||(ua={}));const si=mt("themeService");var RM;(function(i){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}i.isThemeColor=e})(RM||(RM={}));function dr(i){return{id:i}}var oi;(function(i){function e(a){return a&&typeof a=="object"&&typeof a.id=="string"&&(typeof a.color>"u"||RM.isThemeColor(a.color))}i.isThemeIcon=e;const t=new RegExp(`^\\$\\((${Gs.iconNameExpression}(?:${Gs.iconModifierExpression})?)\\)$`);function n(a){const l=t.exec(a);if(!l)return;let[,c]=l;return{id:c}}i.fromString=n;function s(a,l){let c=a.id;const h=c.lastIndexOf("~");return h!==-1&&(c=c.substring(0,h)),l&&(c=`${c}~${l}`),{id:c}}i.modify=s;function r(a,l){var c,h;return a.id===l.id&&((c=a.color)===null||c===void 0?void 0:c.id)===((h=l.color)===null||h===void 0?void 0:h.id)}i.isEqual=r;function o(a,l){return{id:a.id,color:l?dr(l):void 0}}i.asThemeIcon=o,i.asClassNameArray=Gs.asClassNameArray,i.asClassName=Gs.asClassName,i.asCSSSelector=Gs.asCSSSelector})(oi||(oi={}));function Ux(i){switch(i){case ua.DARK:return"vs-dark";case ua.HIGH_CONTRAST:return"hc-black";default:return"vs"}}const oQ={ThemingContribution:"base.contributions.theming"};class vke{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new z}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),gt(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}let aQ=new vke;kn.add(oQ.ThemingContribution,aQ);function Jt(i){return aQ.onColorThemeChange(i)}class wke extends te{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var yke=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},K7=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function I_(i){return i.command!==void 0}class Ue{constructor(e){this.id=Ue._idPool++,this._debugName=e}}Ue._idPool=0;Ue.CommandPalette=new Ue("CommandPalette");Ue.EditorContext=new Ue("EditorContext");Ue.SimpleEditorContext=new Ue("SimpleEditorContext");Ue.EditorContextCopy=new Ue("EditorContextCopy");Ue.EditorContextPeek=new Ue("EditorContextPeek");Ue.MenubarEditMenu=new Ue("MenubarEditMenu");Ue.MenubarCopy=new Ue("MenubarCopy");Ue.MenubarGoMenu=new Ue("MenubarGoMenu");Ue.MenubarSelectionMenu=new Ue("MenubarSelectionMenu");Ue.InlineCompletionsActions=new Ue("InlineCompletionsActions");const L0=mt("menuService"),da=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new z,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:i=>i===Ue.CommandPalette}}addCommand(i){return this.addCommands(ct.single(i))}addCommands(i){for(const e of i)this._commands.set(e.id,e);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),gt(()=>{let e=!1;for(const t of i)e=this._commands.delete(t.id)||e;e&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)})}getCommand(i){return this._commands.get(i)}getCommands(){const i=new Map;return this._commands.forEach((e,t)=>i.set(t,e)),i}appendMenuItem(i,e){return this.appendMenuItems(ct.single({id:i,item:e}))}appendMenuItems(i){const e=new Set,t=new _r;for(const{id:n,item:s}of i){let r=this._menuItems.get(n);r||(r=new _r,this._menuItems.set(n,r)),t.push(r.push(s)),e.add(n)}return this._onDidChangeMenu.fire(e),gt(()=>{if(t.size>0){for(let n of t)n();this._onDidChangeMenu.fire(e),t.clear()}})}getMenuItems(i){let e;return this._menuItems.has(i)?e=[...this._menuItems.get(i)]:e=[],i===Ue.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(i){const e=new Set;for(const t of i)I_(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||i.push({command:t})})}};class lQ extends E5{constructor(e,t,n,s){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,[],"submenu"),this.item=e,this._menuService=t,this._contextKeyService=n,this._options=s}get actions(){const e=[],t=this._menuService.createMenu(this.item.submenu,this._contextKeyService),n=t.getActions(this._options);t.dispose();for(const[,s]of n)s.length>0&&(e.push(...s),e.push(new ha));return e.length&&e.pop(),e}}let _u=class cQ{constructor(e,t,n,s,r){var o,a;if(this._commandService=r,this.id=e.id,this.label=n!=null&&n.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value,this.tooltip=(a=typeof e.tooltip=="string"?e.tooltip:(o=e.tooltip)===null||o===void 0?void 0:o.value)!==null&&a!==void 0?a:"",this.enabled=!e.precondition||s.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){const l=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=s.contextMatchesRules(l.condition),this.checked&&l.tooltip&&(this.tooltip=typeof l.tooltip=="string"?l.tooltip:l.tooltip.value),l.title&&(this.label=typeof l.title=="string"?l.title:l.title.value)}this.item=e,this.alt=t?new cQ(t,void 0,n,s,r):void 0,this._options=n,oi.isThemeIcon(e.icon)&&(this.class=Gs.asClassName(e.icon))}dispose(){}run(...e){var t,n;let s=[];return!((t=this._options)===null||t===void 0)&&t.arg&&(s=[...s,this._options.arg]),!((n=this._options)===null||n===void 0)&&n.shouldForwardArgs&&(s=[...s,...e]),this._commandService.executeCommand(this.id,...s)}};_u=yke([K7(3,$e),K7(4,vn)],_u);const k0=mt("telemetryService");class uk{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let n=t.kbExpr;this.precondition&&(n?n=xe.and(n,this.precondition):n=this.precondition);const s={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};ds.registerKeybindingRule(s)}}Tt.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){da.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class I5 extends uk{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n){return this._implementations.push({priority:e,name:t,implementation:n}),this._implementations.sort((s,r)=>r.priority-s.priority),{dispose:()=>{for(let s=0;s<this._implementations.length;s++)if(this._implementations[s].implementation===n){this._implementations.splice(s,1);return}}}}runCommand(e,t){const n=e.get(Jc);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const s of this._implementations){const r=s.implementation(e,t);if(r)return n.trace(`Command '${this.id}' was handled by '${s.name}'.`),typeof r=="boolean"?void 0:r}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class hQ extends uk{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class Zr extends uk{static bindToContribution(e){return class extends Zr{constructor(n){super(n),this._callback=n.handler}runEditorCommand(n,s,r){e(s)&&this._callback(e(s),r)}}}runCommand(e,t){const n=e.get(ii),s=n.getFocusedCodeEditor()||n.getActiveCodeEditor();if(s)return s.invokeWithinContext(r=>{if(r.get($e).contextMatchesRules(kd(this.precondition)))return this.runEditorCommand(r,s,t)})}}class gi extends Zr{constructor(e){super(gi.convertOptions(e)),this.label=e.label,this.alias=e.alias}static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(s){return s.menuId||(s.menuId=Ue.EditorContext),s.title||(s.title=e.label),s.when=xe.and(e.precondition,s.when),s}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(k0).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class uQ extends gi{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((n,s)=>s[0]-n[0]),{dispose:()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n][1]===t){this._implementations.splice(n,1);return}}}}run(e,t,n){for(const s of this._implementations){const r=s[1](e,t,n);if(r)return typeof r=="boolean"?void 0:r}}}function A0(i,e){Tt.registerCommand(i,function(t,...n){const[s,r]=n;Mi(We.isUri(s)),Mi(q.isIPosition(r));const o=t.get(Rs).getModel(s);if(o){const a=q.lift(r);return e(o,a,...n.slice(2))}return t.get(Tl).createModelReference(s).then(a=>new Promise((l,c)=>{try{const h=e(a.object.textEditorModel,q.lift(r),n.slice(2));l(h)}catch(h){c(h)}}).finally(()=>{a.dispose()}))})}function pe(i){return Pr.INSTANCE.registerEditorCommand(i),i}function rt(i){const e=new i;return Pr.INSTANCE.registerEditorAction(e),e}function dQ(i){return Pr.INSTANCE.registerEditorAction(i),i}function fQ(i){Pr.INSTANCE.registerEditorAction(i)}function Ps(i,e){Pr.INSTANCE.registerEditorContribution(i,e)}var Hp;(function(i){function e(o){return Pr.INSTANCE.getEditorCommand(o)}i.getEditorCommand=e;function t(){return Pr.INSTANCE.getEditorActions()}i.getEditorActions=t;function n(){return Pr.INSTANCE.getEditorContributions()}i.getEditorContributions=n;function s(o){return Pr.INSTANCE.getEditorContributions().filter(a=>o.indexOf(a.id)>=0)}i.getSomeEditorContributions=s;function r(){return Pr.INSTANCE.getDiffEditorContributions()}i.getDiffEditorContributions=r})(Hp||(Hp={}));const Cke={EditorCommonContributions:"editor.contributions"};class Pr{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}Pr.INSTANCE=new Pr;kn.add(Cke.EditorCommonContributions,Pr.INSTANCE);function Sw(i){return i.register(),i}const T5=Sw(new I5({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:Ue.MenubarEditMenu,group:"1_do",title:_({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:Ue.CommandPalette,group:"",title:_("undo","Undo"),order:1}]}));Sw(new hQ(T5,{id:"default:undo",precondition:void 0}));const N5=Sw(new I5({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:Ue.MenubarEditMenu,group:"1_do",title:_({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:Ue.CommandPalette,group:"",title:_("redo","Redo"),order:1}]}));Sw(new hQ(N5,{id:"default:redo",precondition:void 0}));const Ske=Sw(new I5({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:Ue.MenubarSelectionMenu,group:"1_basic",title:_({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:Ue.CommandPalette,group:"",title:_("selectAll","Select All"),order:1}]}));var xke=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Dke=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Bv=class{constructor(e,t){}dispose(){}};Bv.ID="editor.contrib.markerDecorations";Bv=xke([Dke(1,A5)],Bv);Ps(Bv.ID,Bv);class Lke{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class M5{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=this._bareFontInfo.getMassagedFontFamily(ko?us.fontFamily:null),t=document.createElement("div");t.style.position="absolute",t.style.top="-50000px",t.style.width="50000px";const n=document.createElement("div");n.style.fontFamily=e,n.style.fontWeight=this._bareFontInfo.fontWeight,n.style.fontSize=this._bareFontInfo.fontSize+"px",n.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,n.style.lineHeight=this._bareFontInfo.lineHeight+"px",n.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(n);const s=document.createElement("div");s.style.fontFamily=e,s.style.fontWeight="bold",s.style.fontSize=this._bareFontInfo.fontSize+"px",s.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,s.style.lineHeight=this._bareFontInfo.lineHeight+"px",s.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(s);const r=document.createElement("div");r.style.fontFamily=e,r.style.fontWeight=this._bareFontInfo.fontWeight,r.style.fontSize=this._bareFontInfo.fontSize+"px",r.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,r.style.lineHeight=this._bareFontInfo.lineHeight+"px",r.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",r.style.fontStyle="italic",t.appendChild(r);const o=[];for(const a of this._requests){let l;a.type===0&&(l=n),a.type===2&&(l=s),a.type===1&&(l=r),l.appendChild(document.createElement("br"));const c=document.createElement("span");M5._render(c,a),l.appendChild(c),o.push(c)}this._container=t,this._testElements=o}static _render(e,t){if(t.chr===" "){let n=" ";for(let s=0;s<8;s++)n+=n;e.innerText=n}else{let n=t.chr;for(let s=0;s<8;s++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const n=this._requests[e],s=this._testElements[e];n.fulfill(s.offsetWidth/256)}}}function kke(i,e){new M5(i,e).read()}class gQ extends te{constructor(e,t,n){super(),this.referenceDomElement=e,this.changeCallback=n,this.width=-1,this.height=-1,this.resizeObserver=null,this.measureReferenceDomElementToken=-1,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this.width}getHeight(){return this.height}startObserving(){typeof ResizeObserver<"u"?!this.resizeObserver&&this.referenceDomElement&&(this.resizeObserver=new ResizeObserver(e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()}),this.resizeObserver.observe(this.referenceDomElement)):this.measureReferenceDomElementToken===-1&&(this.measureReferenceDomElementToken=setInterval(()=>this.observe(),100))}stopObserving(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.measureReferenceDomElementToken!==-1&&(clearInterval(this.measureReferenceDomElementToken),this.measureReferenceDomElementToken=-1)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,s=0;t?(n=t.width,s=t.height):this.referenceDomElement&&(n=this.referenceDomElement.clientWidth,s=this.referenceDomElement.clientHeight),n=Math.max(5,n),s=Math.max(5,s),(this.width!==n||this.height!==s)&&(this.width=n,this.height=s,e&&this.changeCallback())}}class Z7{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}function Ake(){Lf.INSTANCE.clearCache()}class Lf extends te{constructor(){super(),this._onDidChange=this._register(new z),this.onDidChange=this._onDidChange.event,this._cache=new Z7,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearCache(){this._cache=new Z7,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const n of e)n.isTrusted||(t=!0,this._cache.remove(n));t&&this._onDidChange.fire()}readConfiguration(e){if(!this._cache.has(e)){let t=Lf._actualReadConfiguration(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new cM({zoomLevel:GN(),pixelRatio:dx(),fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}static createRequest(e,t,n,s){const r=new Lke(e,t);return n.push(r),s&&s.push(r),r}static _actualReadConfiguration(e){const t=[],n=[],s=this.createRequest("n",0,t,n),r=this.createRequest("ｍ",0,t,null),o=this.createRequest(" ",0,t,n),a=this.createRequest("0",0,t,n),l=this.createRequest("1",0,t,n),c=this.createRequest("2",0,t,n),h=this.createRequest("3",0,t,n),u=this.createRequest("4",0,t,n),d=this.createRequest("5",0,t,n),f=this.createRequest("6",0,t,n),g=this.createRequest("7",0,t,n),p=this.createRequest("8",0,t,n),m=this.createRequest("9",0,t,n),v=this.createRequest("→",0,t,n),b=this.createRequest("￫",0,t,null),w=this.createRequest("·",0,t,n),y=this.createRequest(String.fromCharCode(11825),0,t,null),x="|/-_ilm%";for(let T=0,$=x.length;T<$;T++)this.createRequest(x.charAt(T),0,t,n),this.createRequest(x.charAt(T),1,t,n),this.createRequest(x.charAt(T),2,t,n);kke(e,t);const k=Math.max(a.width,l.width,c.width,h.width,u.width,d.width,f.width,g.width,p.width,m.width);let S=e.fontFeatureSettings===hr.OFF;const L=n[0].width;for(let T=1,$=n.length;S&&T<$;T++){const U=L-n[T].width;if(U<-.001||U>.001){S=!1;break}}let D=!0;S&&b.width!==L&&(D=!1),b.width>v.width&&(D=!1);const N=jCe()>2e3;return new cM({zoomLevel:GN(),pixelRatio:dx(),fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:S,typicalHalfwidthCharacterWidth:s.width,typicalFullwidthCharacterWidth:r.width,canUseHalfwidthRightwardsArrow:D,spaceWidth:o.width,middotWidth:w.width,wsmiddotWidth:y.width,maxDigitWidth:k},N)}}Lf.INSTANCE=new Lf;class Fn extends Mx{constructor(e,t,n=null,s){super(e,t),this.accessibilityService=s,this._elementSizeObserver=this._register(new gQ(n,t.dimension,()=>this._recomputeOptions())),this._register(Lf.INSTANCE.onDidChange(()=>this._recomputeOptions())),this._validatedOptions.get(10)&&this._elementSizeObserver.startObserving(),this._register(MZ(r=>this._recomputeOptions())),this._register(this.accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions())),this._recomputeOptions()}static applyFontInfoSlow(e,t){e.style.fontFamily=t.getMassagedFontFamily(ko?us.fontFamily:null),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+"px",e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.lineHeight=t.lineHeight+"px",e.style.letterSpacing=t.letterSpacing+"px"}static applyFontInfo(e,t){e.setFontFamily(t.getMassagedFontFamily(ko?us.fontFamily:null)),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)}observeReferenceElement(e){this._elementSizeObserver.observe(e)}updatePixelRatio(){this._recomputeOptions()}static _getExtraEditorClassName(){let e="";return!ko&&!GCe&&(e+="no-user-select "),ko&&(e+="no-minimap-shadow "),ht&&(e+="mac "),e}_getEnvConfiguration(){return{extraEditorClassName:Fn._getExtraEditorClassName(),outerWidth:this._elementSizeObserver.getWidth(),outerHeight:this._elementSizeObserver.getHeight(),emptySelectionClipboard:Wd||ks,pixelRatio:dx(),zoomLevel:GN(),accessibilitySupport:this.accessibilityService.isScreenReaderOptimized()?2:this.accessibilityService.getAccessibilitySupport()}}readConfiguration(e){return Lf.INSTANCE.readConfiguration(e)}}class pQ{constructor(e){this.domNode=e,this._maxWidth=-1,this._width=-1,this._height=-1,this._top=-1,this._left=-1,this._bottom=-1,this._right=-1,this._fontFamily="",this._fontWeight="",this._fontSize=-1,this._fontFeatureSettings="",this._lineHeight=-1,this._letterSpacing=-100,this._className="",this._display="",this._position="",this._visibility="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth+"px")}setWidth(e){this._width!==e&&(this._width=e,this.domNode.style.width=this._width+"px")}setHeight(e){this._height!==e&&(this._height=e,this.domNode.style.height=this._height+"px")}setTop(e){this._top!==e&&(this._top=e,this.domNode.style.top=this._top+"px")}unsetTop(){this._top!==-1&&(this._top=-1,this.domNode.style.top="")}setLeft(e){this._left!==e&&(this._left=e,this.domNode.style.left=this._left+"px")}setBottom(e){this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom+"px")}setRight(e){this._right!==e&&(this._right=e,this.domNode.style.right=this._right+"px")}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize+"px")}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setLineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight+"px")}setLetterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing+"px")}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function ft(i){return new pQ(i)}function Zi(i,e,t){let n=null,s=null;if(typeof t.value=="function"?(n="value",s=t.value,s.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",s=t.get),!s)throw new Error("not supported");const r=`$memoize$${e}`;t[n]=function(...o){return this.hasOwnProperty(r)||Object.defineProperty(this,r,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,o)}),this[r]}}var Eke=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Ut;(function(i){i.Tap="-monaco-gesturetap",i.Change="-monaco-gesturechange",i.Start="-monaco-gesturestart",i.End="-monaco-gesturesend",i.Contextmenu="-monaco-gesturecontextmenu"})(Ut||(Ut={}));class kt extends te{constructor(){super(),this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(ne(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register(ne(document,"touchend",e=>this.onTouchEnd(e))),this._register(ne(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){return kt.isTouchDevice()?(kt.INSTANCE||(kt.INSTANCE=new kt),kt.INSTANCE.targets.push(e),{dispose:()=>{kt.INSTANCE.targets=kt.INSTANCE.targets.filter(t=>t!==e)}}):te.None}static ignoreTarget(e){return kt.isTouchDevice()?(kt.INSTANCE||(kt.INSTANCE=new kt),kt.INSTANCE.ignoreTargets.push(e),{dispose:()=>{kt.INSTANCE.ignoreTargets=kt.INSTANCE.ignoreTargets.filter(t=>t!==e)}}):te.None}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,s=e.targetTouches.length;n<s;n++){let r=e.targetTouches.item(n);this.activeTouches[r.identifier]={id:r.identifier,initialTarget:r.target,initialTimeStamp:t,initialPageX:r.pageX,initialPageY:r.pageY,rollingTimestamps:[t],rollingPageX:[r.pageX],rollingPageY:[r.pageY]};let o=this.newGestureEvent(Ut.Start,r.target);o.pageX=r.pageX,o.pageY=r.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){let t=Date.now(),n=Object.keys(this.activeTouches).length;for(let s=0,r=e.changedTouches.length;s<r;s++){let o=e.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("move of an UNKNOWN touch",o);continue}let a=this.activeTouches[o.identifier],l=Date.now()-a.initialTimeStamp;if(l<kt.HOLD_DELAY&&Math.abs(a.initialPageX-Ar(a.rollingPageX))<30&&Math.abs(a.initialPageY-Ar(a.rollingPageY))<30){let c=this.newGestureEvent(Ut.Tap,a.initialTarget);c.pageX=Ar(a.rollingPageX),c.pageY=Ar(a.rollingPageY),this.dispatchEvent(c)}else if(l>=kt.HOLD_DELAY&&Math.abs(a.initialPageX-Ar(a.rollingPageX))<30&&Math.abs(a.initialPageY-Ar(a.rollingPageY))<30){let c=this.newGestureEvent(Ut.Contextmenu,a.initialTarget);c.pageX=Ar(a.rollingPageX),c.pageY=Ar(a.rollingPageY),this.dispatchEvent(c)}else if(n===1){let c=Ar(a.rollingPageX),h=Ar(a.rollingPageY),u=Ar(a.rollingTimestamps)-a.rollingTimestamps[0],d=c-a.rollingPageX[0],f=h-a.rollingPageY[0];const g=this.targets.filter(p=>a.initialTarget instanceof Node&&p.contains(a.initialTarget));this.inertia(g,t,Math.abs(d)/u,d>0?1:-1,c,Math.abs(f)/u,f>0?1:-1,h)}this.dispatchEvent(this.newGestureEvent(Ut.End,a.initialTarget)),delete this.activeTouches[o.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===Ut.Tap){const t=new Date().getTime();let n=0;t-this._lastSetTapCountTime>kt.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===Ut.Change||e.type===Ut.Contextmenu)&&(this._lastSetTapCountTime=0);for(let t=0;t<this.ignoreTargets.length;t++)if(e.initialTarget instanceof Node&&this.ignoreTargets[t].contains(e.initialTarget))return;this.targets.forEach(t=>{e.initialTarget instanceof Node&&t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)})}inertia(e,t,n,s,r,o,a,l){this.handle=Al(()=>{let c=Date.now(),h=c-t,u=0,d=0,f=!0;n+=kt.SCROLL_FRICTION*h,o+=kt.SCROLL_FRICTION*h,n>0&&(f=!1,u=s*n*h),o>0&&(f=!1,d=a*o*h);let g=this.newGestureEvent(Ut.Change);g.translationX=u,g.translationY=d,e.forEach(p=>p.dispatchEvent(g)),f||this.inertia(e,c,n,s,r+u,o,a,l+d)})}onTouchMove(e){let t=Date.now();for(let n=0,s=e.changedTouches.length;n<s;n++){let r=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("end of an UNKNOWN touch",r);continue}let o=this.activeTouches[r.identifier],a=this.newGestureEvent(Ut.Change,o.initialTarget);a.translationX=r.pageX-Ar(o.rollingPageX),a.translationY=r.pageY-Ar(o.rollingPageY),a.pageX=r.pageX,a.pageY=r.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(r.pageX),o.rollingPageY.push(r.pageY),o.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}kt.SCROLL_FRICTION=-.005;kt.HOLD_DELAY=700;kt.CLEAR_TAP_COUNT_TIME=400;Eke([Zi],kt,"isTouchDevice",null);function E0(i,e){let t=new zr(e);return t.preventDefault(),{leftButton:t.leftButton,buttons:t.buttons,posx:t.posx,posy:t.posy}}class sg{constructor(){this._hooks=new de,this._mouseMoveEventMerger=null,this._mouseMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._mouseMoveEventMerger=null,this._mouseMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._mouseMoveEventMerger}startMonitoring(e,t,n,s,r){if(this.isMonitoring())return;this._mouseMoveEventMerger=n,this._mouseMoveCallback=s,this._onStopCallback=r;const o=YN.getSameOriginWindowChain(),a=du?"pointermove":"mousemove",l="mouseup",c=o.map(u=>u.window.document),h=C0(e);h&&c.unshift(h);for(const u of c)this._hooks.add(ZO(u,a,d=>{if(d.buttons!==t){this.stopMonitoring(!0);return}this._mouseMoveCallback(d)},(d,f)=>this._mouseMoveEventMerger(d,f))),this._hooks.add(ne(u,l,d=>this.stopMonitoring(!0)));if(YN.hasDifferentOriginAncestor()){let u=o[o.length-1];this._hooks.add(ne(u.window.document,"mouseout",d=>{new zr(d).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(ne(u.window.document,"mouseover",d=>{new zr(d).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(ne(u.window.document.body,"mouseleave",d=>{this.stopMonitoring(!0)}))}}}class R5{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new mQ(this.x-Rc.scrollX,this.y-Rc.scrollY)}}class mQ{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new R5(this.clientX+Rc.scrollX,this.clientY+Rc.scrollY)}}class Ike{constructor(e,t,n,s){this.x=e,this.y=t,this.width=n,this.height=s,this._editorPagePositionBrand=void 0}}function _Q(i){const e=Nn(i);return new Ike(e.left,e.top,e.width,e.height)}class kf extends zr{constructor(e,t){super(e),this._editorMouseEventBrand=void 0,this.pos=new R5(this.posx,this.posy),this.editorPos=_Q(t)}}class Tke{constructor(e){this._editorViewDomNode=e}_create(e){return new kf(e,this._editorViewDomNode)}onContextMenu(e,t){return ne(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return ne(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return ne(e,"mousedown",n=>{t(this._create(n))})}onMouseLeave(e,t){return KO(e,n=>{t(this._create(n))})}onMouseMoveThrottled(e,t,n,s){return ZO(e,"mousemove",t,(o,a)=>n(o,this._create(a)),s)}}class Nke{constructor(e){this._editorViewDomNode=e}_create(e){return new kf(e,this._editorViewDomNode)}onPointerUp(e,t){return ne(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return ne(e,"pointerdown",n=>{t(this._create(n))})}onPointerLeave(e,t){return cSe(e,n=>{t(this._create(n))})}onPointerMoveThrottled(e,t,n,s){return ZO(e,"pointermove",t,(o,a)=>n(o,this._create(a)),s)}}class Mke extends te{constructor(e){super(),this._editorViewDomNode=e,this._globalMouseMoveMonitor=this._register(new sg),this._keydownListener=null}startMonitoring(e,t,n,s,r){this._keydownListener=Ji(document,"keydown",a=>{a.toKeybinding().isModifierKey()||this._globalMouseMoveMonitor.stopMonitoring(!0,a.browserEvent)},!0);const o=(a,l)=>n(a,new kf(l,this._editorViewDomNode));this._globalMouseMoveMonitor.startMonitoring(e,t,o,s,a=>{this._keydownListener.dispose(),r(a)})}stopMonitoring(){this._globalMouseMoveMonitor.stopMonitoring(!0)}}class xw extends te{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,s=e.length;n<s;n++){let r=e[n];switch(r.type){case 0:this.onCompositionStart(r)&&(t=!0);break;case 1:this.onCompositionEnd(r)&&(t=!0);break;case 2:this.onConfigurationChanged(r)&&(t=!0);break;case 3:this.onCursorStateChanged(r)&&(t=!0);break;case 4:this.onDecorationsChanged(r)&&(t=!0);break;case 5:this.onFlushed(r)&&(t=!0);break;case 6:this.onFocusChanged(r)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(r)&&(t=!0);break;case 8:this.onLineMappingChanged(r)&&(t=!0);break;case 9:this.onLinesChanged(r)&&(t=!0);break;case 10:this.onLinesDeleted(r)&&(t=!0);break;case 11:this.onLinesInserted(r)&&(t=!0);break;case 12:this.onRevealRangeRequest(r)&&(t=!0);break;case 13:this.onScrollChanged(r)&&(t=!0);break;case 15:this.onTokensChanged(r)&&(t=!0);break;case 14:this.onThemeChanged(r)&&(t=!0);break;case 16:this.onTokensColorsChanged(r)&&(t=!0);break;case 17:this.onZonesChanged(r)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(r)}}t&&(this._shouldRender=!0)}}class Yr extends xw{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class Nl{static write(e,t){e instanceof pQ,e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){let n=[],s=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[s++]=this.read(e)),e=e.parentElement;const r=new Uint8Array(s);for(let o=0;o<s;o++)r[o]=n[s-o-1];return r}}class Rke{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class Oke extends Rke{constructor(e,t,n){super(e,t),this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class Pke{constructor(e,t,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n}}class dk{constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}static from(e){const t=new Array(e.length);for(let n=0,s=e.length;n<s;n++){const r=e[n];t[n]=new dk(r.left,r.width)}return t}toString(){return`[${this.left},${this.width}]`}}class Up{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class Fke{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class Bke{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class QA{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,s,r){const o=this._createRange();try{return o.setStart(e,t),o.setEnd(n,s),o.getClientRects()}catch{return null}finally{this._detachRange(o,r)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(Up.compare);let t=[],n=0,s=e[0];for(let r=1,o=e.length;r<o;r++){const a=e[r];s.left+s.width+.9>=a.left?s.width=Math.max(s.width,a.left+a.width-s.left):(t[n++]=s,s=a)}return t[n++]=s,t}static _createHorizontalRangesFromClientRects(e,t){if(!e||e.length===0)return null;const n=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];n[s]=new Up(Math.max(0,o.left-t),o.width)}return this._mergeAdjacentRanges(n)}static readHorizontalRanges(e,t,n,s,r,o,a){const c=e.children.length-1;if(0>c)return null;if(t=Math.min(c,Math.max(0,t)),s=Math.min(c,Math.max(0,s)),t===s&&n===r&&n===0&&!e.children[t].firstChild){const f=e.children[t].getClientRects();return this._createHorizontalRangesFromClientRects(f,o)}t!==s&&s>0&&r===0&&(s--,r=1073741824);let h=e.children[t].firstChild,u=e.children[s].firstChild;if((!h||!u)&&(!h&&n===0&&t>0&&(h=e.children[t-1].firstChild,n=1073741824),!u&&r===0&&s>0&&(u=e.children[s-1].firstChild,r=1073741824)),!h||!u)return null;n=Math.min(h.textContent.length,Math.max(0,n)),r=Math.min(u.textContent.length,Math.max(0,r));const d=this._readClientRects(h,n,u,r,a);return this._createHorizontalRangesFromClientRects(d,o)}}const Vke=function(){return Mp?!0:!(As||ks||ko)}();let $p=!0;class Y7{constructor(e,t){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectDeltaLeftRead=!1,this.endNode=t}get clientRectDeltaLeft(){return this._clientRectDeltaLeftRead||(this._clientRectDeltaLeftRead=!0,this._clientRectDeltaLeft=this._domNode.getBoundingClientRect().left),this._clientRectDeltaLeft}}class Q7{constructor(e,t){this.themeType=t;const n=e.options,s=n.get(43);this.renderWhitespace=n.get(87),this.renderControlCharacters=n.get(82),this.spaceWidth=s.spaceWidth,this.middotWidth=s.middotWidth,this.wsmiddotWidth=s.wsmiddotWidth,this.useMonospaceOptimizations=s.isMonospace&&!n.get(29),this.canUseHalfwidthRightwardsArrow=s.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(58),this.stopRenderingLineAfter=n.get(104),this.fontLigatures=n.get(44)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class cl{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=ft(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return this._options.themeType===ua.HIGH_CONTRAST||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,s){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const r=n.getViewLineRenderingData(e),o=this._options,a=br.filter(r.inlineDecorations,e,r.minColumn,r.maxColumn);let l=null;if(o.themeType===ua.HIGH_CONTRAST||this._options.renderWhitespace==="selection"){const d=n.selections;for(const f of d){if(f.endLineNumber<e||f.startLineNumber>e)continue;const g=f.startLineNumber===e?f.startColumn:r.minColumn,p=f.endLineNumber===e?f.endColumn:r.maxColumn;g<p&&(o.themeType===ua.HIGH_CONTRAST||this._options.renderWhitespace!=="selection"?a.push(new br(g,p,"inline-selected-text",0)):(l||(l=[]),l.push(new dLe(g-1,p-1))))}}const c=new tg(o.useMonospaceOptimizations,o.canUseHalfwidthRightwardsArrow,r.content,r.continuesWithWrappedLine,r.isBasicASCII,r.containsRTL,r.minColumn-1,r.tokens,a,r.tabSize,r.startVisibleColumn,o.spaceWidth,o.middotWidth,o.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==hr.OFF,l);if(this._renderedViewLine&&this._renderedViewLine.input.equals(c))return!1;s.appendASCIIString('<div style="top:'),s.appendASCIIString(String(t)),s.appendASCIIString("px;height:"),s.appendASCIIString(String(this._options.lineHeight)),s.appendASCIIString('px;" class="'),s.appendASCIIString(cl.CLASS_NAME),s.appendASCIIString('">');const h=QL(c,s);s.appendASCIIString("</div>");let u=null;return $p&&Vke&&r.isBasicASCII&&o.useMonospaceOptimizations&&h.containsForeignElements===0&&r.content.length<300&&c.lineTokens.getCount()<100&&(u=new xy(this._renderedViewLine?this._renderedViewLine.domNode:null,c,h.characterMapping)),u||(u=vQ(this._renderedViewLine?this._renderedViewLine.domNode:null,c,h.characterMapping,h.containsRTL,h.containsForeignElements)),this._renderedViewLine=u,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof xy:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof xy?this._renderedViewLine.monospaceAssumptionsAreValid():$p}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof xy&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,s){if(!this._renderedViewLine)return null;t=t|0,n=n|0,t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));const r=this._renderedViewLine.input.stopRenderingLineAfter|0;let o=!1;r!==-1&&t>r+1&&n>r+1&&(o=!0),r!==-1&&t>r+1&&(t=r+1),r!==-1&&n>r+1&&(n=r+1);const a=this._renderedViewLine.getVisibleRangesForRange(e,t,n,s);return a&&a.length>0?new Bke(o,a):null}getColumnOfNodeOffset(e,t,n){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,n):1}}cl.CLASS_NAME="view-line";class xy{constructor(e,t,n){this.domNode=e,this.input=t,this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(){return Math.round(this._getCharPosition(this._characterMapping.length))}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return $p;const e=this.getWidth(),t=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),$p=!1),$p}toSlowRenderedLine(){return vQ(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,s){const r=this._getCharPosition(t),o=this._getCharPosition(n);return[new Up(r,o-r)]}_getCharPosition(e){const t=this._characterMapping.getAbsoluteOffset(e);return this._charWidth*t}getColumnOfNodeOffset(e,t,n){const s=t.textContent.length;let r=-1;for(;t;)t=t.previousSibling,r++;return this._characterMapping.getColumn(new b5(r,n),s)}}class bQ{constructor(e,t,n,s,r){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=r,this._cachedWidth=-1,this._pixelOffsetCache=null,!s||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let o=0,a=this._characterMapping.length;o<=a;o++)this._pixelOffsetCache[o]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,s){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const r=this._readPixelOffset(this.domNode,e,t,s);if(r===-1)return null;const o=this._readPixelOffset(this.domNode,e,n,s);return o===-1?null:[new Up(r,o-r)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,s)}_readVisibleRangesForRange(e,t,n,s,r){if(n===s){const o=this._readPixelOffset(e,t,n,r);return o===-1?null:[new Up(o,0)]}else return this._readRawVisibleRangesForRange(e,n,s,r)}_readPixelOffset(e,t,n,s){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth();const r=this._getReadingTarget(e);return r.firstChild?r.firstChild.offsetWidth:0}if(this._pixelOffsetCache!==null){const r=this._pixelOffsetCache[n];if(r!==-1)return r;const o=this._actualReadPixelOffset(e,t,n,s);return this._pixelOffsetCache[n]=o,o}return this._actualReadPixelOffset(e,t,n,s)}_actualReadPixelOffset(e,t,n,s){if(this._characterMapping.length===0){const l=QA.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,s.clientRectDeltaLeft,s.endNode);return!l||l.length===0?-1:l[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth();const r=this._characterMapping.getDomPosition(n),o=QA.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,r.partIndex,r.charIndex,s.clientRectDeltaLeft,s.endNode);if(!o||o.length===0)return-1;const a=o[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getAbsoluteOffset(n),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,n,s){if(t===1&&n===this._characterMapping.length)return[new Up(0,this.getWidth())];const r=this._characterMapping.getDomPosition(t),o=this._characterMapping.getDomPosition(n);return QA.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,o.partIndex,o.charIndex,s.clientRectDeltaLeft,s.endNode)}getColumnOfNodeOffset(e,t,n){const s=t.textContent.length;let r=-1;for(;t;)t=t.previousSibling,r++;return this._characterMapping.getColumn(new b5(r,n),s)}}class Wke extends bQ{_readVisibleRangesForRange(e,t,n,s,r){const o=super._readVisibleRangesForRange(e,t,n,s,r);if(!o||o.length===0||n===s||n===1&&s===this._characterMapping.length)return o;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,s,r);if(a!==-1){const l=o[o.length-1];l.left<a&&(l.width=a-l.left)}}return o}}const vQ=function(){return Wd?zke:Hke}();function zke(i,e,t,n,s){return new Wke(i,e,t,n,s)}function Hke(i,e,t,n,s){return new bQ(i,e,t,n,s)}function Dy(i){return i.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class yn{constructor(e,t,n,s){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=s}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Dy(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Dy(this.oldText)}")`:`(replace@${this.oldPosition} "${Dy(this.oldText)}" with "${Dy(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const s=t.length;jo(e,s,n),n+=4;for(let r=0;r<s;r++)KSe(e,t.charCodeAt(r),n),n+=2;return n}static _readString(e,t){const n=$o(e,t);return t+=4,bM(e,t,n)}writeSize(){return 4+4+yn._writeStringSize(this.oldText)+yn._writeStringSize(this.newText)}write(e,t){return jo(e,this.oldPosition,t),t+=4,jo(e,this.newPosition,t),t+=4,t=yn._writeString(e,this.oldText,t),t=yn._writeString(e,this.newText,t),t}static read(e,t,n){const s=$o(e,t);t+=4;const r=$o(e,t);t+=4;const o=yn._readString(e,t);t+=yn._writeStringSize(o);const a=yn._readString(e,t);return t+=yn._writeStringSize(a),n.push(new yn(s,o,r,a)),t}}function Uke(i,e){return i===null||i.length===0?e:new Xa(i,e).compress()}class Xa{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),s=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(s),s=this._getCurr(++t);continue}if(s===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(s.oldEnd<=n.newPosition){this._acceptCurr(s),s=this._getCurr(++t);continue}if(n.newEnd<=s.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(s.oldPosition<n.newPosition){const[c,h]=Xa._splitCurr(s,n.newPosition-s.oldPosition);this._acceptCurr(c),s=h;continue}if(n.newPosition<s.oldPosition){const[c,h]=Xa._splitPrev(n,s.oldPosition-n.newPosition);this._acceptPrev(c),n=h;continue}let a,l;if(s.oldEnd===n.newEnd)a=n,l=s,n=this._getPrev(++e),s=this._getCurr(++t);else if(s.oldEnd<n.newEnd){const[c,h]=Xa._splitPrev(n,s.oldLength);a=c,l=s,n=h,s=this._getCurr(++t)}else{const[c,h]=Xa._splitCurr(s,n.newLength);a=n,l=c,n=this._getPrev(++e),s=h}this._result[this._resultLen++]=new yn(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const r=Xa._merge(this._result);return Xa._removeNoOps(r)}_acceptCurr(e){this._result[this._resultLen++]=Xa._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=Xa._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new yn(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new yn(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),s=e.newText.substr(t);return[new yn(e.oldPosition,e.oldText,e.newPosition,n),new yn(e.oldEnd,"",e.newPosition+t,s)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),s=e.oldText.substr(t);return[new yn(e.oldPosition,n,e.newPosition,e.newText),new yn(e.oldPosition+t,s,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;let t=[],n=0,s=e[0];for(let r=1;r<e.length;r++){const o=e[r];s.oldEnd===o.oldPosition?s=new yn(s.oldPosition,s.oldText+o.oldText,s.newPosition,s.newText+o.newText):(t[n++]=s,s=o)}return t[n++]=s,t}static _removeNoOps(e){if(e.length===0)return e;let t=[],n=0;for(let s=0;s<e.length;s++){const r=e[s];r.oldText!==r.newText&&(t[n++]=r)}return t}}function Vg(i){return i.toString()}class sn{constructor(e,t,n,s,r,o,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=s,this.beforeCursorState=r,this.afterCursorState=o,this.changes=a}static create(e,t){const n=e.getAlternativeVersionId(),s=OM(e);return new sn(n,n,s,s,t,t,[])}append(e,t,n,s,r){t.length>0&&(this.changes=Uke(this.changes,t)),this.afterEOL=n,this.afterVersionId=s,this.afterCursorState=r}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(jo(e,t?t.length:0,n),n+=4,t)for(const s of t)jo(e,s.selectionStartLineNumber,n),n+=4,jo(e,s.selectionStartColumn,n),n+=4,jo(e,s.positionLineNumber,n),n+=4,jo(e,s.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const s=$o(e,t);t+=4;for(let r=0;r<s;r++){const o=$o(e,t);t+=4;const a=$o(e,t);t+=4;const l=$o(e,t);t+=4;const c=$o(e,t);t+=4,n.push(new Ve(o,a,l,c))}return t}serialize(){let e=10+sn._writeSelectionsSize(this.beforeCursorState)+sn._writeSelectionsSize(this.afterCursorState)+4;for(const s of this.changes)e+=s.writeSize();const t=new Uint8Array(e);let n=0;jo(t,this.beforeVersionId,n),n+=4,jo(t,this.afterVersionId,n),n+=4,Y9(t,this.beforeEOL,n),n+=1,Y9(t,this.afterEOL,n),n+=1,n=sn._writeSelections(t,this.beforeCursorState,n),n=sn._writeSelections(t,this.afterCursorState,n),jo(t,this.changes.length,n),n+=4;for(const s of this.changes)n=s.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const s=$o(t,n);n+=4;const r=$o(t,n);n+=4;const o=Z9(t,n);n+=1;const a=Z9(t,n);n+=1;const l=[];n=sn._readSelections(t,n,l);const c=[];n=sn._readSelections(t,n,c);const h=$o(t,n);n+=4;const u=[];for(let d=0;d<h;d++)n=yn.read(t,n,u);return new sn(s,r,o,a,l,c,u)}}class wQ{constructor(e,t){this.model=e,this._data=sn.create(e,t)}get type(){return 0}get resource(){return We.isUri(this.model)?this.model:this.model.uri}get label(){return _("edit","Typing")}toString(){return(this._data instanceof sn?this._data:sn.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(We.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof sn}append(e,t,n,s,r){this._data instanceof sn&&this._data.append(e,t,n,s,r)}close(){this._data instanceof sn&&(this._data=this._data.serialize())}open(){this._data instanceof sn||(this._data=sn.deserialize(this._data))}undo(){if(We.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof sn&&(this._data=this._data.serialize());const e=sn.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(We.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof sn&&(this._data=this._data.serialize());const e=sn.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof sn&&(this._data=this._data.serialize()),this._data.byteLength+168}}class $ke{constructor(e,t){this.type=1,this.label=e,this._isOpen=!0,this._editStackElementsArr=t.slice(0),this._editStackElementsMap=new Map;for(const n of this._editStackElementsArr){const s=Vg(n.resource);this._editStackElementsMap.set(s,n)}this._delegate=null}get resources(){return this._editStackElementsArr.map(e=>e.resource)}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=Vg(e);return this._editStackElementsMap.has(t)}setModel(e){const t=Vg(We.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=Vg(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,s,r){const o=Vg(e.uri);this._editStackElementsMap.get(o).append(e,t,n,s,r)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=Vg(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(const t of this._editStackElementsArr)e.push(`${ya(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function OM(i){return i.getEOL()===`
`?0:1}function pc(i){return i?i instanceof wQ||i instanceof $ke:!1}class O5{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);pc(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);pc(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){const t=this._undoRedoService.getLastElement(this._model.uri);if(pc(t)&&t.canAppend(this._model))return t;const n=new wQ(this._model,e);return this._undoRedoService.pushElement(n),n}pushEOL(e){const t=this._getOrCreateEditStackElement(null);this._model.setEOL(e),t.append(this._model,[],OM(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n){const s=this._getOrCreateEditStackElement(e),r=this._model.applyEdits(t,!0),o=O5._computeCursorState(n,r),a=r.map((l,c)=>({index:c,textChange:l.textChange}));return a.sort((l,c)=>l.textChange.oldPosition===c.textChange.oldPosition?l.index-c.index:l.textChange.oldPosition-c.textChange.oldPosition),s.append(this._model,a.map(l=>l.textChange),OM(this._model),this._model.getAlternativeVersionId(),o),o}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return Ke(n),null}}}class jke{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function qke(i,e,t,n,s){s.spacesDiff=0,s.looksLikeAlignment=!1;let r;for(r=0;r<e&&r<n;r++){let d=i.charCodeAt(r),f=t.charCodeAt(r);if(d!==f)break}let o=0,a=0;for(let d=r;d<e;d++)i.charCodeAt(d)===32?o++:a++;let l=0,c=0;for(let d=r;d<n;d++)t.charCodeAt(d)===32?l++:c++;if(o>0&&a>0||l>0&&c>0)return;let h=Math.abs(a-c),u=Math.abs(o-l);if(h===0){s.spacesDiff=u,u>0&&0<=l-1&&l-1<i.length&&l<t.length&&t.charCodeAt(l)!==32&&i.charCodeAt(l-1)===32&&i.charCodeAt(i.length-1)===44&&(s.looksLikeAlignment=!0);return}if(u%h===0){s.spacesDiff=u/h;return}}function X7(i,e,t){const n=Math.min(i.getLineCount(),1e4);let s=0,r=0,o="",a=0;const l=[2,4,6,8,3,5,7],c=8;let h=[0,0,0,0,0,0,0,0,0],u=new jke;for(let g=1;g<=n;g++){let p=i.getLineLength(g),m=i.getLineContent(g);const v=p<=65536;let b=!1,w=0,y=0,x=0;for(let S=0,L=p;S<L;S++){let D=v?m.charCodeAt(S):i.getLineCharCode(g,S);if(D===9)x++;else if(D===32)y++;else{b=!0,w=S;break}}if(!b||(x>0?s++:y>1&&r++,qke(o,a,m,w,u),u.looksLikeAlignment&&!(t&&e===u.spacesDiff)))continue;let k=u.spacesDiff;k<=c&&h[k]++,o=m,a=w}let d=t;s!==r&&(d=s<r);let f=e;if(d){let g=d?0:.1*n;l.forEach(p=>{let m=h[p];m>g&&(g=m,f=p)}),f===4&&h[4]>0&&h[2]>0&&h[2]>=h[4]/2&&(f=2)}return{insertSpaces:d,tabSize:f}}function _s(i){return(i.metadata&1)>>>0}function Pt(i,e){i.metadata=i.metadata&254|e<<0}function Sn(i){return(i.metadata&2)>>>1===1}function Mt(i,e){i.metadata=i.metadata&253|(e?1:0)<<1}function yQ(i){return(i.metadata&4)>>>2===1}function J7(i,e){i.metadata=i.metadata&251|(e?1:0)<<2}function Gke(i){return(i.metadata&24)>>>3}function eV(i,e){i.metadata=i.metadata&231|e<<3}function Kke(i){return(i.metadata&32)>>>5===1}function tV(i,e){i.metadata=i.metadata&223|(e?1:0)<<5}class CQ{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,Pt(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,J7(this,!1),eV(this,1),tV(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,Mt(this,!1)}reset(e,t,n,s){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=s}setOptions(e){this.options=e;let t=this.options.className;J7(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),eV(this,this.options.stickiness),tV(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const je=new CQ(null,0,0);je.parent=je;je.left=je;je.right=je;Pt(je,0);class XA{constructor(){this.root=je,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,s,r){return this.root===je?[]:i2e(this,e,t,n,s,r)}search(e,t,n){return this.root===je?[]:t2e(this,e,t,n)}collectNodesFromOwner(e){return Jke(this,e)}collectNodesPostOrder(){return e2e(this)}insert(e){iV(this,e),this._normalizeDeltaIfNecessary()}delete(e){nV(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let s=0;for(;e!==this.root;)e===e.parent.right&&(s+=e.parent.delta),e=e.parent;const r=n.start+s,o=n.end+s;n.setCachedOffsets(r,o,t)}acceptReplace(e,t,n,s){const r=Qke(this,e,e+t);for(let o=0,a=r.length;o<a;o++){const l=r[o];nV(this,l)}this._normalizeDeltaIfNecessary(),Xke(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let o=0,a=r.length;o<a;o++){const l=r[o];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,Yke(l,e,e+t,n,s),l.maxEnd=l.end,iV(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,Zke(this))}}function Zke(i){let e=i.root,t=0;for(;e!==je;){if(e.left!==je&&!Sn(e.left)){e=e.left;continue}if(e.right!==je&&!Sn(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,bu(e),Mt(e,!0),Mt(e.left,!1),Mt(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Mt(i.root,!1)}function Wg(i,e,t,n){return i<t?!0:i>t||n===1?!1:n===2?!0:e}function Yke(i,e,t,n,s){const r=Gke(i),o=r===0||r===2,a=r===1||r===2,l=t-e,c=n,h=Math.min(l,c),u=i.start;let d=!1;const f=i.end;let g=!1;e<=u&&f<=t&&Kke(i)&&(i.start=e,d=!0,i.end=e,g=!0);{const m=s?1:l>0?2:0;!d&&Wg(u,o,e,m)&&(d=!0),!g&&Wg(f,a,e,m)&&(g=!0)}if(h>0&&!s){const m=l>c?2:0;!d&&Wg(u,o,e+h,m)&&(d=!0),!g&&Wg(f,a,e+h,m)&&(g=!0)}{const m=s?1:0;!d&&Wg(u,o,t,m)&&(i.start=e+c,d=!0),!g&&Wg(f,a,t,m)&&(i.end=e+c,g=!0)}const p=c-l;d||(i.start=Math.max(0,u+p)),g||(i.end=Math.max(0,f+p)),i.start>i.end&&(i.end=i.start)}function Qke(i,e,t){let n=i.root,s=0,r=0,o=0,a=0,l=[],c=0;for(;n!==je;){if(Sn(n)){Mt(n.left,!1),Mt(n.right,!1),n===n.parent.right&&(s-=n.parent.delta),n=n.parent;continue}if(!Sn(n.left)){if(r=s+n.maxEnd,r<e){Mt(n,!0);continue}if(n.left!==je){n=n.left;continue}}if(o=s+n.start,o>t){Mt(n,!0);continue}if(a=s+n.end,a>=e&&(n.setCachedOffsets(o,a,0),l[c++]=n),Mt(n,!0),n.right!==je&&!Sn(n.right)){s+=n.delta,n=n.right;continue}}return Mt(i.root,!1),l}function Xke(i,e,t,n){let s=i.root,r=0,o=0,a=0;const l=n-(t-e);for(;s!==je;){if(Sn(s)){Mt(s.left,!1),Mt(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),bu(s),s=s.parent;continue}if(!Sn(s.left)){if(o=r+s.maxEnd,o<e){Mt(s,!0);continue}if(s.left!==je){s=s.left;continue}}if(a=r+s.start,a>t){s.start+=l,s.end+=l,s.delta+=l,(s.delta<-1073741824||s.delta>1073741824)&&(i.requestNormalizeDelta=!0),Mt(s,!0);continue}if(Mt(s,!0),s.right!==je&&!Sn(s.right)){r+=s.delta,s=s.right;continue}}Mt(i.root,!1)}function Jke(i,e){let t=i.root,n=[],s=0;for(;t!==je;){if(Sn(t)){Mt(t.left,!1),Mt(t.right,!1),t=t.parent;continue}if(t.left!==je&&!Sn(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[s++]=t),Mt(t,!0),t.right!==je&&!Sn(t.right)){t=t.right;continue}}return Mt(i.root,!1),n}function e2e(i){let e=i.root,t=[],n=0;for(;e!==je;){if(Sn(e)){Mt(e.left,!1),Mt(e.right,!1),e=e.parent;continue}if(e.left!==je&&!Sn(e.left)){e=e.left;continue}if(e.right!==je&&!Sn(e.right)){e=e.right;continue}t[n++]=e,Mt(e,!0)}return Mt(i.root,!1),t}function t2e(i,e,t,n){let s=i.root,r=0,o=0,a=0,l=[],c=0;for(;s!==je;){if(Sn(s)){Mt(s.left,!1),Mt(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),s=s.parent;continue}if(s.left!==je&&!Sn(s.left)){s=s.left;continue}o=r+s.start,a=r+s.end,s.setCachedOffsets(o,a,n);let h=!0;if(e&&s.ownerId&&s.ownerId!==e&&(h=!1),t&&yQ(s)&&(h=!1),h&&(l[c++]=s),Mt(s,!0),s.right!==je&&!Sn(s.right)){r+=s.delta,s=s.right;continue}}return Mt(i.root,!1),l}function i2e(i,e,t,n,s,r){let o=i.root,a=0,l=0,c=0,h=0,u=[],d=0;for(;o!==je;){if(Sn(o)){Mt(o.left,!1),Mt(o.right,!1),o===o.parent.right&&(a-=o.parent.delta),o=o.parent;continue}if(!Sn(o.left)){if(l=a+o.maxEnd,l<e){Mt(o,!0);continue}if(o.left!==je){o=o.left;continue}}if(c=a+o.start,c>t){Mt(o,!0);continue}if(h=a+o.end,h>=e){o.setCachedOffsets(c,h,r);let f=!0;n&&o.ownerId&&o.ownerId!==n&&(f=!1),s&&yQ(o)&&(f=!1),f&&(u[d++]=o)}if(Mt(o,!0),o.right!==je&&!Sn(o.right)){a+=o.delta,o=o.right;continue}}return Mt(i.root,!1),u}function iV(i,e){if(i.root===je)return e.parent=je,e.left=je,e.right=je,Pt(e,0),i.root=e,i.root;n2e(i,e),vh(e.parent);let t=e;for(;t!==i.root&&_s(t.parent)===1;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;_s(n)===1?(Pt(t.parent,0),Pt(n,0),Pt(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,bb(i,t)),Pt(t.parent,0),Pt(t.parent.parent,1),vb(i,t.parent.parent))}else{const n=t.parent.parent.left;_s(n)===1?(Pt(t.parent,0),Pt(n,0),Pt(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,vb(i,t)),Pt(t.parent,0),Pt(t.parent.parent,1),bb(i,t.parent.parent))}return Pt(i.root,0),e}function n2e(i,e){let t=0,n=i.root;const s=e.start,r=e.end;for(;;)if(r2e(s,r,n.start+t,n.end+t)<0)if(n.left===je){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===je){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=je,e.right=je,Pt(e,1)}function nV(i,e){let t,n;if(e.left===je?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===je?(t=e.left,n=e):(n=s2e(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(i.requestNormalizeDelta=!0)),n===i.root){i.root=t,Pt(t,0),e.detach(),JA(),bu(t),i.root.parent=je;return}let s=_s(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,Pt(n,_s(e)),e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==je&&(n.left.parent=n),n.right!==je&&(n.right.parent=n)),e.detach(),s){vh(t.parent),n!==e&&(vh(n),vh(n.parent)),JA();return}vh(t),vh(t.parent),n!==e&&(vh(n),vh(n.parent));let r;for(;t!==i.root&&_s(t)===0;)t===t.parent.left?(r=t.parent.right,_s(r)===1&&(Pt(r,0),Pt(t.parent,1),bb(i,t.parent),r=t.parent.right),_s(r.left)===0&&_s(r.right)===0?(Pt(r,1),t=t.parent):(_s(r.right)===0&&(Pt(r.left,0),Pt(r,1),vb(i,r),r=t.parent.right),Pt(r,_s(t.parent)),Pt(t.parent,0),Pt(r.right,0),bb(i,t.parent),t=i.root)):(r=t.parent.left,_s(r)===1&&(Pt(r,0),Pt(t.parent,1),vb(i,t.parent),r=t.parent.left),_s(r.left)===0&&_s(r.right)===0?(Pt(r,1),t=t.parent):(_s(r.left)===0&&(Pt(r.right,0),Pt(r,1),bb(i,r),r=t.parent.left),Pt(r,_s(t.parent)),Pt(t.parent,0),Pt(r.left,0),vb(i,t.parent),t=i.root));Pt(t,0),JA()}function s2e(i){for(;i.left!==je;)i=i.left;return i}function JA(){je.parent=je,je.delta=0,je.start=0,je.end=0}function bb(i,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==je&&(t.left.parent=e),t.parent=e.parent,e.parent===je?i.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,bu(e),bu(t)}function vb(i,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(i.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==je&&(t.right.parent=e),t.parent=e.parent,e.parent===je?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,bu(e),bu(t)}function SQ(i){let e=i.end;if(i.left!==je){const t=i.left.maxEnd;t>e&&(e=t)}if(i.right!==je){const t=i.right.maxEnd+i.delta;t>e&&(e=t)}return e}function bu(i){i.maxEnd=SQ(i)}function vh(i){for(;i!==je;){const e=SQ(i);if(i.maxEnd===e)return;i.maxEnd=e,i=i.parent}}function r2e(i,e,t,n){return i===t?e-n:i-t}class PM{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==Pe)return P5(this.right);let e=this;for(;e.parent!==Pe&&e.parent.left!==e;)e=e.parent;return e.parent===Pe?Pe:e.parent}prev(){if(this.left!==Pe)return xQ(this.left);let e=this;for(;e.parent!==Pe&&e.parent.right!==e;)e=e.parent;return e.parent===Pe?Pe:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const Pe=new PM(null,0);Pe.parent=Pe;Pe.left=Pe;Pe.right=Pe;Pe.color=0;function P5(i){for(;i.left!==Pe;)i=i.left;return i}function xQ(i){for(;i.right!==Pe;)i=i.right;return i}function F5(i){return i===Pe?0:i.size_left+i.piece.length+F5(i.right)}function B5(i){return i===Pe?0:i.lf_left+i.piece.lineFeedCnt+B5(i.right)}function eE(){Pe.parent=Pe}function wb(i,e){let t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==Pe&&(t.left.parent=e),t.parent=e.parent,e.parent===Pe?i.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function yb(i,e){let t=e.left;e.left=t.right,t.right!==Pe&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===Pe?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function Ly(i,e){let t,n;if(e.left===Pe?(n=e,t=n.right):e.right===Pe?(n=e,t=n.left):(n=P5(e.right),t=n.right),n===i.root){i.root=t,t.color=0,e.detach(),eE(),i.root.parent=Pe;return}let s=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,T_(i,t)):(n.parent===e?t.parent=n:t.parent=n.parent,T_(i,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Pe&&(n.left.parent=n),n.right!==Pe&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,T_(i,n)),e.detach(),t.parent.left===t){let o=F5(t),a=B5(t);if(o!==t.parent.size_left||a!==t.parent.lf_left){let l=o-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=o,t.parent.lf_left=a,rc(i,t.parent,l,c)}}if(T_(i,t.parent),s){eE();return}let r;for(;t!==i.root&&t.color===0;)t===t.parent.left?(r=t.parent.right,r.color===1&&(r.color=0,t.parent.color=1,wb(i,t.parent),r=t.parent.right),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.right.color===0&&(r.left.color=0,r.color=1,yb(i,r),r=t.parent.right),r.color=t.parent.color,t.parent.color=0,r.right.color=0,wb(i,t.parent),t=i.root)):(r=t.parent.left,r.color===1&&(r.color=0,t.parent.color=1,yb(i,t.parent),r=t.parent.left),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.left.color===0&&(r.right.color=0,r.color=1,wb(i,r),r=t.parent.left),r.color=t.parent.color,t.parent.color=0,r.left.color=0,yb(i,t.parent),t=i.root));t.color=0,eE()}function sV(i,e){for(T_(i,e);e!==i.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,wb(i,e)),e.parent.color=0,e.parent.parent.color=1,yb(i,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,yb(i,e)),e.parent.color=0,e.parent.parent.color=1,wb(i,e.parent.parent))}i.root.color=0}function rc(i,e,t,n){for(;e!==i.root&&e!==Pe;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function T_(i,e){let t=0,n=0;if(e!==i.root){for(;e!==i.root&&e===e.parent.right;)e=e.parent;if(e!==i.root)for(e=e.parent,t=F5(e.left)-e.size_left,n=B5(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==i.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}class o2e extends D0{constructor(e){super(0);for(let t=0,n=e.length;t<n;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}}function a2e(i){let e={};return t=>(e.hasOwnProperty(t)||(e[t]=i(t)),e[t])}const Em=a2e(i=>new o2e(i)),l2e=999;class nd{constructor(e,t,n,s){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=s}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=c2e(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=YZ(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new h2e(t,this.wordSeparators?Em(this.wordSeparators):null,n?this.searchString:null)}}function c2e(i){if(!i||i.length===0)return!1;for(let e=0,t=i.length;e<t;e++)if(i.charCodeAt(e)===92){if(e++,e>=t)break;const s=i.charCodeAt(e);if(s===110||s===114||s===87)return!0}return!1}class h2e{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}function ld(i,e,t){if(!t)return new Ev(i,null);let n=[];for(let s=0,r=e.length;s<r;s++)n[s]=e[s];return new Ev(i,n)}class rV{constructor(e){let t=[],n=0;for(let s=0,r=e.length;s<r;s++)e.charCodeAt(s)===10&&(t[n++]=s);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,s=t.length-1;if(s===-1||e<=t[0])return 0;for(;n<s;){const r=n+((s-n)/2>>0);t[r]>=e?s=r-1:t[r+1]>=e?(n=r,s=r):n=r+1}return n+1}}class ky{static findMatches(e,t,n,s,r){const o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,n,new N_(o.wordSeparators,o.regex),s,r):this._doFindMatchesLineByLine(e,n,o,s,r):[]}static _getMultilineMatchRange(e,t,n,s,r,o){let a,l=0;s?(l=s.findLineFeedCountBeforeOffset(r),a=t+r+l):a=t+r;let c;if(s){let f=s.findLineFeedCountBeforeOffset(r+o.length)-l;c=a+o.length+f}else c=a+o.length;const h=e.getPositionAt(a),u=e.getPositionAt(c);return new F(h.lineNumber,h.column,u.lineNumber,u.column)}static _doFindMatchesMultiline(e,t,n,s,r){const o=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new rV(a):null,c=[];let h=0,u;for(n.reset(0);u=n.next(a);)if(c[h++]=ld(this._getMultilineMatchRange(e,o,a,l,u.index,u[0]),u,s),h>=r)return c;return c}static _doFindMatchesLineByLine(e,t,n,s,r){const o=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,c,t.startLineNumber,t.startColumn-1,a,o,s,r),o}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,o,s,r);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<r;c++)a=this._findMatchesInLine(n,e.getLineContent(c),c,0,a,o,s,r);if(a<r){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,c,t.endLineNumber,0,a,o,s,r)}return o}static _findMatchesInLine(e,t,n,s,r,o,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const d=e.simpleSearch,f=d.length,g=t.length;let p=-f;for(;(p=t.indexOf(d,p+f))!==-1;)if((!c||V5(c,t,g,p,f))&&(o[r++]=new Ev(new F(n,p+1+s,n,p+1+f+s),null),r>=l))return r;return r}const h=new N_(e.wordSeparators,e.regex);let u;h.reset(0);do if(u=h.next(t),u&&(o[r++]=ld(new F(n,u.index+1+s,n,u.index+1+u[0].length+s),u,a),r>=l))return r;while(u);return r}static findNextMatch(e,t,n,s){const r=t.parseSearchRequest();if(!r)return null;const o=new N_(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindNextMatchMultiline(e,n,o,s):this._doFindNextMatchLineByLine(e,n,o,s)}static _doFindNextMatchMultiline(e,t,n,s){const r=new q(t.lineNumber,1),o=e.getOffsetAt(r),a=e.getLineCount(),l=e.getValueInRange(new F(r.lineNumber,r.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new rV(l):null;n.reset(t.column-1);let h=n.next(l);return h?ld(this._getMultilineMatchRange(e,o,l,c,h.index,h[0]),h,s):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new q(1,1),n,s):null}static _doFindNextMatchLineByLine(e,t,n,s){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o),l=this._findFirstMatchInLine(n,a,o,t.column,s);if(l)return l;for(let c=1;c<=r;c++){const h=(o+c-1)%r,u=e.getLineContent(h+1),d=this._findFirstMatchInLine(n,u,h+1,1,s);if(d)return d}return null}static _findFirstMatchInLine(e,t,n,s,r){e.reset(s-1);const o=e.next(t);return o?ld(new F(n,o.index+1,n,o.index+1+o[0].length),o,r):null}static findPreviousMatch(e,t,n,s){const r=t.parseSearchRequest();if(!r)return null;const o=new N_(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindPreviousMatchMultiline(e,n,o,s):this._doFindPreviousMatchLineByLine(e,n,o,s)}static _doFindPreviousMatchMultiline(e,t,n,s){const r=this._doFindMatchesMultiline(e,new F(1,1,t.lineNumber,t.column),n,s,10*l2e);if(r.length>0)return r[r.length-1];const o=e.getLineCount();return t.lineNumber!==o||t.column!==e.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(e,new q(o,e.getLineMaxColumn(o)),n,s):null}static _doFindPreviousMatchLineByLine(e,t,n,s){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,o,s);if(l)return l;for(let c=1;c<=r;c++){const h=(r+o-c-1)%r,u=e.getLineContent(h+1),d=this._findLastMatchInLine(n,u,h+1,s);if(d)return d}return null}static _findLastMatchInLine(e,t,n,s){let r=null,o;for(e.reset(0);o=e.next(t);)r=ld(new F(n,o.index+1,n,o.index+1+o[0].length),o,s);return r}}function u2e(i,e,t,n,s){if(n===0)return!0;const r=e.charCodeAt(n-1);if(i.get(r)!==0||r===13||r===10)return!0;if(s>0){const o=e.charCodeAt(n);if(i.get(o)!==0)return!0}return!1}function d2e(i,e,t,n,s){if(n+s===t)return!0;const r=e.charCodeAt(n+s);if(i.get(r)!==0||r===13||r===10)return!0;if(s>0){const o=e.charCodeAt(n+s-1);if(i.get(o)!==0)return!0}return!1}function V5(i,e,t,n,s){return u2e(i,e,t,n,s)&&d2e(i,e,t,n,s)}class N_{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;const s=n.index,r=n[0].length;if(s===this._prevMatchStartIndex&&r===this._prevMatchLength){if(r===0){fc(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=s,this._prevMatchLength=r,!this._wordSeparators||V5(this._wordSeparators,e,t,s,r))return n}while(n);return null}}const Xl=65535;function DQ(i){let e;return i[i.length-1]<65536?e=new Uint16Array(i.length):e=new Uint32Array(i.length),e.set(i,0),e}class f2e{constructor(e,t,n,s,r){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=s,this.isBasicASCII=r}}function oc(i,e=!0){let t=[0],n=1;for(let s=0,r=i.length;s<r;s++){const o=i.charCodeAt(s);o===13?s+1<r&&i.charCodeAt(s+1)===10?(t[n++]=s+2,s++):t[n++]=s+1:o===10&&(t[n++]=s+1)}return e?DQ(t):t}function g2e(i,e){i.length=0,i[0]=0;let t=1,n=0,s=0,r=0,o=!0;for(let l=0,c=e.length;l<c;l++){const h=e.charCodeAt(l);h===13?l+1<c&&e.charCodeAt(l+1)===10?(r++,i[t++]=l+2,l++):(n++,i[t++]=l+1):h===10?(s++,i[t++]=l+1):o&&h!==9&&(h<32||h>126)&&(o=!1)}const a=new f2e(DQ(i),n,s,r,o);return i.length=0,a}class Ws{constructor(e,t,n,s,r){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=s,this.length=r}}class cd{constructor(e,t){this.buffer=e,this.lineStarts=t}}class p2e{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==Pe&&e.iterate(e.root,n=>(n!==Pe&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class m2e{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,n=this._cache;for(let s=0;s<n.length;s++){let r=n[s];if(r.node.parent===null||r.nodeStartOffset>=e){n[s]=null,t=!0;continue}}if(t){let s=[];for(const r of n)r!==null&&s.push(r);this._cache=s}}}class _2e{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new cd("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=Pe,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let s=null;for(let r=0,o=e.length;r<o;r++)if(e[r].buffer.length>0){e[r].lineStarts||(e[r].lineStarts=oc(e[r].buffer));let a=new Ws(r+1,{line:0,column:0},{line:e[r].lineStarts.length-1,column:e[r].buffer.length-e[r].lineStarts[e[r].lineStarts.length-1]},e[r].lineStarts.length-1,e[r].buffer.length);this._buffers.push(e[r]),s=this.rbInsertRight(s,a)}this._searchCache=new m2e(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=Xl,n=t-Math.floor(t/3),s=n*2,r="",o=0,a=[];if(this.iterate(this.root,l=>{let c=this.getNodeContent(l),h=c.length;if(o<=n||o+h<s)return r+=c,o+=h,!0;let u=r.replace(/\r\n|\r|\n/g,e);return a.push(new cd(u,oc(u))),r=c,o=h,!0}),o>0){let l=r.replace(/\r\n|\r|\n/g,e);a.push(new cd(l,oc(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new p2e(this,e)}getOffsetAt(e,t){let n=0,s=this.root;for(;s!==Pe;)if(s.left!==Pe&&s.lf_left+1>=e)s=s.left;else if(s.lf_left+s.piece.lineFeedCnt+1>=e){n+=s.size_left;let r=this.getAccumulatedValue(s,e-s.lf_left-2);return n+=r+t-1}else e-=s.lf_left+s.piece.lineFeedCnt,n+=s.size_left+s.piece.length,s=s.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0,s=e;for(;t!==Pe;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){let r=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+r.index,r.index===0){let o=this.getOffsetAt(n+1,1),a=s-o;return new q(n+1,a+1)}return new q(n+1,r.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===Pe){let r=this.getOffsetAt(n+1,1),o=s-e-r;return new q(n+1,o+1)}else t=t.right;return new q(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let n=this.nodeAt2(e.startLineNumber,e.startColumn),s=this.nodeAt2(e.endLineNumber,e.endColumn),r=this.getValueInRange2(n,s);return t?t!==this._EOL||!this._EOLNormalized?r.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?r:r.replace(/\r\n|\r|\n/g,t):r}getValueInRange2(e,t){if(e.node===t.node){let a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let n=e.node,s=this._buffers[n.piece.bufferIndex].buffer,r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start),o=s.substring(r+e.remainder,r+n.piece.length);for(n=n.next();n!==Pe;){let a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){o+=a.substring(l,l+t.remainder);break}else o+=a.substr(l,n.piece.length);n=n.next()}return o}getLinesContent(){let e=[],t=0,n="",s=!1;return this.iterate(this.root,r=>{if(r===Pe)return!0;const o=r.piece;let a=o.length;if(a===0)return!0;const l=this._buffers[o.bufferIndex].buffer,c=this._buffers[o.bufferIndex].lineStarts,h=o.start.line,u=o.end.line;let d=c[h]+o.start.column;if(s&&(l.charCodeAt(d)===10&&(d++,a--),e[t++]=n,n="",s=!1,a===0))return!0;if(h===u)return!this._EOLNormalized&&l.charCodeAt(d+a-1)===13?(s=!0,n+=l.substr(d,a-1)):n+=l.substr(d,a),!0;n+=this._EOLNormalized?l.substring(d,Math.max(d,c[h+1]-this._EOLLength)):l.substring(d,c[h+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let f=h+1;f<u;f++)n=this._EOLNormalized?l.substring(c[f],c[f+1]-this._EOLLength):l.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(c[u]+o.end.column-1)===13?(s=!0,o.end.column===0?t--:n=l.substr(c[u],o.end.column-1)):n=l.substr(c[u],o.end.column),!0}),s&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let n=this._buffers[t.piece.bufferIndex],s=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(s)}else{let t=this._buffers[e.node.piece.bufferIndex],s=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(s)}}getLineCharCode(e,t){let n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,s,r,o,a,l,c,h,u){let d=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),g=this.offsetInBuffer(e.piece.bufferIndex,r),p=this.offsetInBuffer(e.piece.bufferIndex,o),m,v={line:0,column:0},b,w;t._wordSeparators?(b=d.buffer.substring(g,p),w=y=>y+g,t.reset(0)):(b=d.buffer,w=y=>y,t.reset(g));do if(m=t.next(b),m){if(w(m.index)>=p)return h;this.positionInBuffer(e,w(m.index)-f,v);let y=this.getLineFeedCnt(e.piece.bufferIndex,r,v),x=v.line===r.line?v.column-r.column+s:v.column+1,k=x+m[0].length;if(u[h++]=ld(new F(n+y,x,n+y,k),m,l),w(m.index)+m[0].length>=p||h>=c)return h}while(m);return h}findMatchesLineByLine(e,t,n,s){const r=[];let o=0;const a=new N_(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];let c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let h=this.positionInBuffer(l.node,l.remainder),u=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,h,u,t,n,s,o,r),r;let d=e.startLineNumber,f=l.node;for(;f!==c.node;){let p=this.getLineFeedCnt(f.piece.bufferIndex,h,f.piece.end);if(p>=1){let v=this._buffers[f.piece.bufferIndex].lineStarts,b=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),w=v[h.line+p],y=d===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(f,a,d,y,h,this.positionInBuffer(f,w-b),t,n,s,o,r),o>=s)return r;d+=p}let m=d===e.startLineNumber?e.startColumn-1:0;if(d===e.endLineNumber){const v=this.getLineContent(d).substring(m,e.endColumn-1);return o=this._findMatchesInLine(t,a,v,e.endLineNumber,m,o,r,n,s),r}if(o=this._findMatchesInLine(t,a,this.getLineContent(d).substr(m),d,m,o,r,n,s),o>=s)return r;d++,l=this.nodeAt2(d,1),f=l.node,h=this.positionInBuffer(l.node,l.remainder)}if(d===e.endLineNumber){let p=d===e.startLineNumber?e.startColumn-1:0;const m=this.getLineContent(d).substring(p,e.endColumn-1);return o=this._findMatchesInLine(t,a,m,e.endLineNumber,p,o,r,n,s),r}let g=d===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(c.node,a,d,g,h,u,t,n,s,o,r),r}_findMatchesInLine(e,t,n,s,r,o,a,l,c){const h=e.wordSeparators;if(!l&&e.simpleSearch){const d=e.simpleSearch,f=d.length,g=n.length;let p=-f;for(;(p=n.indexOf(d,p+f))!==-1;)if((!h||V5(h,n,g,p,f))&&(a[o++]=new Ev(new F(s,p+1+r,s,p+1+f+r),null),o>=c))return o;return o}let u;t.reset(0);do if(u=t.next(n),u&&(a[o++]=ld(new F(s,u.index+1+r,s,u.index+1+u[0].length+r),u,l),o>=c))return o;while(u);return o}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==Pe){let{node:s,remainder:r,nodeStartOffset:o}=this.nodeAt(e),a=s.piece,l=a.bufferIndex,c=this.positionInBuffer(s,r);if(s.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&o+a.length===e&&t.length<Xl){this.appendToNode(s,t),this.computeBufferMetadata();return}if(o===e)this.insertContentToNodeLeft(t,s),this._searchCache.validate(e);else if(o+s.piece.length>e){let h=[],u=new Ws(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(s,r)===10){let p={line:u.start.line+1,column:0};u=new Ws(u.bufferIndex,p,u.end,this.getLineFeedCnt(u.bufferIndex,p,u.end),u.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(s,r-1)===13){let p=this.positionInBuffer(s,r-1);this.deleteNodeTail(s,p),t="\r"+t,s.piece.length===0&&h.push(s)}else this.deleteNodeTail(s,c);else this.deleteNodeTail(s,c);let d=this.createNewPieces(t);u.length>0&&this.rbInsertRight(s,u);let f=s;for(let g=0;g<d.length;g++)f=this.rbInsertRight(f,d[g]);this.deleteNodes(h)}else this.insertContentToNodeRight(t,s)}else{let s=this.createNewPieces(t),r=this.rbInsertLeft(null,s[0]);for(let o=1;o<s.length;o++)r=this.rbInsertRight(r,s[o])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===Pe)return;let n=this.nodeAt(e),s=this.nodeAt(e+t),r=n.node,o=s.node;if(r===o){let d=this.positionInBuffer(r,n.remainder),f=this.positionInBuffer(r,s.remainder);if(n.nodeStartOffset===e){if(t===r.piece.length){let g=r.next();Ly(this,r),this.validateCRLFWithPrevNode(g),this.computeBufferMetadata();return}this.deleteNodeHead(r,f),this._searchCache.validate(e),this.validateCRLFWithPrevNode(r),this.computeBufferMetadata();return}if(n.nodeStartOffset+r.piece.length===e+t){this.deleteNodeTail(r,d),this.validateCRLFWithNextNode(r),this.computeBufferMetadata();return}this.shrinkNode(r,d,f),this.computeBufferMetadata();return}let a=[],l=this.positionInBuffer(r,n.remainder);this.deleteNodeTail(r,l),this._searchCache.validate(e),r.piece.length===0&&a.push(r);let c=this.positionInBuffer(o,s.remainder);this.deleteNodeHead(o,c),o.piece.length===0&&a.push(o);let h=r.next();for(let d=h;d!==Pe&&d!==o;d=d.next())a.push(d);let u=r.piece.length===0?r.prev():r;this.deleteNodes(a),this.validateCRLFWithNextNode(u),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let o=t.piece,a={line:o.start.line+1,column:0},l=new Ws(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),o.length-1);t.piece=l,e+=`
`,rc(this,t,-1,-1),t.piece.length===0&&n.push(t)}let s=this.createNewPieces(e),r=this.rbInsertLeft(t,s[s.length-1]);for(let o=s.length-2;o>=0;o--)r=this.rbInsertLeft(r,s[o]);this.validateCRLFWithPrevNode(r),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);let n=this.createNewPieces(e),s=this.rbInsertRight(t,n[0]),r=s;for(let o=1;o<n.length;o++)r=this.rbInsertRight(r,n[o]);this.validateCRLFWithPrevNode(s)}positionInBuffer(e,t,n){let s=e.piece,r=e.piece.bufferIndex,o=this._buffers[r].lineStarts,l=o[s.start.line]+s.start.column+t,c=s.start.line,h=s.end.line,u=0,d=0,f=0;for(;c<=h&&(u=c+(h-c)/2|0,f=o[u],u!==h);)if(d=o[u+1],l<f)h=u-1;else if(l>=d)c=u+1;else break;return n?(n.line=u,n.column=l-f,null):{line:u,column:l-f}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;let s=this._buffers[e].lineStarts;if(n.line===s.length-1)return n.line-t.line;let r=s[n.line+1],o=s[n.line]+n.column;if(r>o+1)return n.line-t.line;let a=o-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)Ly(this,e[t])}createNewPieces(e){if(e.length>Xl){let h=[];for(;e.length>Xl;){const d=e.charCodeAt(Xl-1);let f;d===13||d>=55296&&d<=56319?(f=e.substring(0,Xl-1),e=e.substring(Xl-1)):(f=e.substring(0,Xl),e=e.substring(Xl));let g=oc(f);h.push(new Ws(this._buffers.length,{line:0,column:0},{line:g.length-1,column:f.length-g[g.length-1]},g.length-1,f.length)),this._buffers.push(new cd(f,g))}let u=oc(e);return h.push(new Ws(this._buffers.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this._buffers.push(new cd(e,u)),h}let t=this._buffers[0].buffer.length;const n=oc(e,!1);let s=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},s=this._lastChangeBufferPos;for(let h=0;h<n.length;h++)n[h]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let h=0;h<n.length;h++)n[h]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const r=this._buffers[0].buffer.length;let o=this._buffers[0].lineStarts.length-1,a=r-this._buffers[0].lineStarts[o],l={line:o,column:a},c=new Ws(0,s,l,this.getLineFeedCnt(0,s,l),r-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let n=this.root,s="",r=this._searchCache.get2(e);if(r){n=r.node;let o=this.getAccumulatedValue(n,e-r.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(r.nodeStartLineNumber+n.piece.lineFeedCnt===e)s=a.substring(l+o,l+n.piece.length);else{let c=this.getAccumulatedValue(n,e-r.nodeStartLineNumber);return a.substring(l+o,l+c-t)}}else{let o=0;const a=e;for(;n!==Pe;)if(n.left!==Pe&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this.getAccumulatedValue(n,e-n.lf_left-1),h=this._buffers[n.piece.bufferIndex].buffer,u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return o+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:o,nodeStartLineNumber:a-(e-1-n.lf_left)}),h.substring(u+l,u+c-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this._buffers[n.piece.bufferIndex].buffer,h=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);s=c.substring(h+l,h+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,o+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==Pe;){let o=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){let a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return s+=o.substring(l,l+a-t),s}else{let a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);s+=o.substr(a,n.piece.length)}n=n.next()}return s}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==Pe;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){let n=e.piece,s=this.positionInBuffer(e,t),r=s.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){let o=this.getLineFeedCnt(e.piece.bufferIndex,n.start,s);if(o!==r)return{index:o,remainder:0}}return{index:r,remainder:s.column}}getAccumulatedValue(e,t){if(t<0)return 0;let n=e.piece,s=this._buffers[n.bufferIndex].lineStarts,r=n.start.line+t+1;return r>n.end.line?s[n.end.line]+n.end.column-s[n.start.line]-n.start.column:s[r]-s[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,s=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.end),o=t,a=this.offsetInBuffer(n.bufferIndex,o),l=this.getLineFeedCnt(n.bufferIndex,n.start,o),c=l-s,h=a-r,u=n.length+h;e.piece=new Ws(n.bufferIndex,n.start,o,l,u),rc(this,e,h,c)}deleteNodeHead(e,t){const n=e.piece,s=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.start),o=t,a=this.getLineFeedCnt(n.bufferIndex,o,n.end),l=this.offsetInBuffer(n.bufferIndex,o),c=a-s,h=r-l,u=n.length+h;e.piece=new Ws(n.bufferIndex,o,n.end,a,u),rc(this,e,h,c)}shrinkNode(e,t,n){const s=e.piece,r=s.start,o=s.end,a=s.length,l=s.lineFeedCnt,c=t,h=this.getLineFeedCnt(s.bufferIndex,s.start,c),u=this.offsetInBuffer(s.bufferIndex,t)-this.offsetInBuffer(s.bufferIndex,r);e.piece=new Ws(s.bufferIndex,s.start,c,h,u),rc(this,e,u-a,h-l);let d=new Ws(s.bufferIndex,n,o,this.getLineFeedCnt(s.bufferIndex,n,o),this.offsetInBuffer(s.bufferIndex,o)-this.offsetInBuffer(s.bufferIndex,n)),f=this.rbInsertRight(e,d);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),s=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const r=oc(t,!1);for(let f=0;f<r.length;f++)r[f]+=s;if(n){let f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:s-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1));const o=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[o],l={line:o,column:a},c=e.piece.length+t.length,h=e.piece.lineFeedCnt,u=this.getLineFeedCnt(0,e.piece.start,l),d=u-h;e.piece=new Ws(e.piece.bufferIndex,e.piece.start,l,u,c),this._lastChangeBufferPos=l,rc(this,e,t.length,d)}nodeAt(e){let t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let s=0;for(;t!==Pe;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){s+=t.size_left;let r={node:t,remainder:e-t.size_left,nodeStartOffset:s};return this._searchCache.set(r),r}else e-=t.size_left+t.piece.length,s+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,s=0;for(;n!==Pe;)if(n.left!==Pe&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let r=this.getAccumulatedValue(n,e-n.lf_left-2),o=this.getAccumulatedValue(n,e-n.lf_left-1);return s+=n.size_left,{node:n,remainder:Math.min(r+t-1,o),nodeStartOffset:s}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let r=this.getAccumulatedValue(n,e-n.lf_left-2);if(r+t-1<=n.piece.length)return{node:n,remainder:r+t-1,nodeStartOffset:s};t-=n.piece.length-r;break}else e-=n.lf_left+n.piece.lineFeedCnt,s+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==Pe;){if(n.piece.lineFeedCnt>0){let r=this.getAccumulatedValue(n,0),o=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,r),nodeStartOffset:o}}else if(n.piece.length>=t-1){let r=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:r}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let n=this._buffers[e.piece.bufferIndex],s=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(s)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===Pe||e.piece.lineFeedCnt===0)return!1;let t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,s=t.start.line,r=n[s]+t.start.column;return s===n.length-1||n[s+1]>r+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(r)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===Pe||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let n=[],s=this._buffers[e.piece.bufferIndex].lineStarts,r;e.piece.end.column===0?r={line:e.piece.end.line-1,column:s[e.piece.end.line]-s[e.piece.end.line-1]-1}:r={line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Ws(e.piece.bufferIndex,e.piece.start,r,a,o),rc(this,e,-1,-1),e.piece.length===0&&n.push(e);let l={line:t.piece.start.line+1,column:0};const c=t.piece.length-1,h=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Ws(t.piece.bufferIndex,l,t.piece.end,h,c),rc(this,t,-1,-1),t.piece.length===0&&n.push(t);let u=this.createNewPieces(`\r
`);this.rbInsertRight(e,u[0]);for(let d=0;d<n.length;d++)Ly(this,n[d])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)Ly(this,n);else{const s=n.piece,r={line:s.start.line+1,column:0},o=s.length-1,a=this.getLineFeedCnt(s.bufferIndex,r,s.end);n.piece=new Ws(s.bufferIndex,r,s.end,a,o),rc(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===Pe)return t(Pe);let n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===Pe)return"";let t=this._buffers[e.piece.bufferIndex],n,s=e.piece,r=this.offsetInBuffer(s.bufferIndex,s.start),o=this.offsetInBuffer(s.bufferIndex,s.end);return n=t.buffer.substring(r,o),n}getPieceContent(e){let t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),s=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,s)}rbInsertRight(e,t){let n=new PM(t,1);if(n.left=Pe,n.right=Pe,n.parent=Pe,n.size_left=0,n.lf_left=0,this.root===Pe)this.root=n,n.color=0;else if(e.right===Pe)e.right=n,n.parent=e;else{let r=P5(e.right);r.left=n,n.parent=r}return sV(this,n),n}rbInsertLeft(e,t){let n=new PM(t,1);if(n.left=Pe,n.right=Pe,n.parent=Pe,n.size_left=0,n.lf_left=0,this.root===Pe)this.root=n,n.color=0;else if(e.left===Pe)e.left=n,n.parent=e;else{let s=xQ(e.left);s.right=n,n.parent=s}return sV(this,n),n}}function Im(i){let e=0,t=0,n=0,s=0;for(let r=0,o=i.length;r<o;r++){const a=i.charCodeAt(r);a===13?(e===0&&(t=r),e++,r+1<o&&i.charCodeAt(r+1)===10?(s|=2,r++):s|=3,n=r+1):a===10&&(s|=1,e===0&&(t=r),e++,n=r+1)}return e===0&&(t=i.length),[e,t,i.length-n,s]}function oV(i){return(i<<0|0<<8|0<<11|1<<14|2<<23)>>>0}const Jl=new Uint32Array(0).buffer;class tE{constructor(){this.tokens=[]}add(e,t){if(this.tokens.length>0){const n=this.tokens[this.tokens.length-1];if(n.startLineNumber+n.tokens.length-1+1===e){n.tokens.push(t);return}}this.tokens.push(new b2e(e,[t]))}}class $x{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){let t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),s=this._getEndCharacter(e-1);return new F(0,t+1,n,s+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const s=t+Math.floor((n-t)/2),r=this._getDeltaLine(s);if(r<e)t=s+1;else if(r>e)n=s-1;else{let o=s;for(;o>t&&this._getDeltaLine(o-1)===e;)o--;let a=s;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new aV(this._tokens.subarray(4*o,4*a+4))}}return this._getDeltaLine(t)===e?new aV(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,s){const r=this._tokens,o=this._tokenCount;let a=0,l=!1,c=0;for(let h=0;h<o;h++){const u=4*h,d=r[u],f=r[u+1],g=r[u+2],p=r[u+3];if((d>e||d===e&&g>=t)&&(d<n||d===n&&f<=s))l=!0;else{if(a===0&&(c=d),l){const m=4*a;r[m]=d-c,r[m+1]=f,r[m+2]=g,r[m+3]=p}a++}}return this._tokenCount=a,c}split(e,t,n,s){const r=this._tokens,o=this._tokenCount;let a=[],l=[],c=a,h=0,u=0;for(let d=0;d<o;d++){const f=4*d,g=r[f],p=r[f+1],m=r[f+2],v=r[f+3];if(g>e||g===e&&m>=t){if(g<n||g===n&&p<=s)continue;c!==l&&(c=l,h=0,u=g)}c[h++]=g-u,c[h++]=p,c[h++]=m,c[h++]=v}return[new $x(new Uint32Array(a)),new $x(new Uint32Array(l)),u]}acceptDeleteRange(e,t,n,s,r){const o=this._tokens,a=this._tokenCount,l=s-t;let c=0,h=!1;for(let u=0;u<a;u++){const d=4*u;let f=o[d],g=o[d+1],p=o[d+2];const m=o[d+3];if(f<t||f===t&&p<=n){c++;continue}else if(f===t&&g<n)f===s&&p>r?p-=r-n:p=n;else if(f===t&&g===n)if(f===s&&p>r)p-=r-n;else{h=!0;continue}else if(f<s||f===s&&g<r)if(f===s&&p>r)f===t?(g=n,p=g+(p-r)):(g=0,p=g+(p-r));else{h=!0;continue}else if(f>s){if(l===0&&!h){c=a;break}f-=l}else if(f===s&&g>=r)e&&f===0&&(g+=e,p+=e),f-=l,g-=r-n,p-=r-n;else throw new Error("Not possible!");const v=4*c;o[v]=f,o[v+1]=g,o[v+2]=p,o[v+3]=m,c++}this._tokenCount=c}acceptInsertText(e,t,n,s,r,o){const a=n===0&&s===1&&(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122),l=this._tokens,c=this._tokenCount;for(let h=0;h<c;h++){const u=4*h;let d=l[u],f=l[u+1],g=l[u+2];if(!(d<e||d===e&&g<t)){if(d===e&&g===t)if(a)g+=1;else continue;else if(d===e&&f<t&&t<g)n===0?g+=s:g=t;else{if(d===e&&f===t&&a)continue;if(d===e)if(d+=n,n===0)f+=s,g+=s;else{const p=g-f;f=r+(f-t),g=f+p}else d+=n}l[u]=d,l[u+1]=f,l[u+2]=g}}}}class aV{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}class jx{constructor(e,t){this.startLineNumber=e,this.tokens=t,this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}toString(){return this.tokens.toString(this.startLineNumber)}_updateEndLineNumber(){this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}isEmpty(){return this.tokens.isEmpty()}getLineTokens(e){return this.startLineNumber<=e&&e<=this.endLineNumber?this.tokens.getLineTokens(e-this.startLineNumber):null}getRange(){const e=this.tokens.getRange();return e&&new F(this.startLineNumber+e.startLineNumber,e.startColumn,this.startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;this.startLineNumber+=this.tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber,[s,r,o]=this.tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new jx(this.startLineNumber,s),new jx(this.startLineNumber+o,r)]}applyEdit(e,t){const[n,s,r]=Im(t);this.acceptEdit(e,n,s,r,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,s,r){this._acceptDeleteRange(e),this._acceptInsertText(new q(e.startLineNumber,e.startColumn),t,n,s,r),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;if(n<0){const r=n-t;this.startLineNumber-=r;return}const s=this.tokens.getMaxDeltaLine();if(!(t>=s+1)){if(t<0&&n>=s+1){this.startLineNumber=0,this.tokens.clear();return}if(t<0){const r=-t;this.startLineNumber-=r,this.tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this.tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,s,r){if(t===0&&n===0)return;const o=e.lineNumber-this.startLineNumber;if(o<0){this.startLineNumber+=t;return}const a=this.tokens.getMaxDeltaLine();o>=a+1||this.tokens.acceptInsertText(o,e.column-1,t,n,s,r)}}class b2e{constructor(e,t){this.startLineNumber=e,this.tokens=t}}function ec(i){return i instanceof Uint32Array?i:new Uint32Array(i)}class W5{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const r=t[0].getRange(),o=t[t.length-1].getRange();if(!r||!o)return e;n=e.plusRange(r).plusRange(o)}let s=null;for(let r=0,o=this._pieces.length;r<o;r++){const a=this._pieces[r];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){s=s||{index:r};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(r,1),r--,o--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){s=s||{index:r};continue}const[l,c]=a.split(n);if(l.isEmpty()){s=s||{index:r};continue}c.isEmpty()||(this._pieces.splice(r,1,l,c),r++,o++,s=s||{index:r})}return s=s||{index:this._pieces.length},t.length>0&&(this._pieces=Rv(this._pieces,s.index,t)),n}isComplete(){return this._isComplete}addSemanticTokens(e,t){const n=this._pieces;if(n.length===0)return t;const s=W5._findFirstPieceWithLine(n,e),r=n[s].getLineTokens(e);if(!r)return t;const o=t.getCount(),a=r.getCount();let l=0,c=[],h=0,u=0;const d=(f,g)=>{f!==u&&(u=f,c[h++]=f,c[h++]=g)};for(let f=0;f<a;f++){const g=r.getStartCharacter(f),p=r.getEndCharacter(f),m=r.getMetadata(f),v=((m&1?2048:0)|(m&2?4096:0)|(m&4?8192:0)|(m&8?8372224:0)|(m&16?4286578688:0))>>>0,b=~v>>>0;for(;l<o&&t.getEndOffset(l)<=g;)d(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<o&&t.getStartOffset(l)<g&&d(g,t.getMetadata(l));l<o&&t.getEndOffset(l)<p;)d(t.getEndOffset(l),t.getMetadata(l)&b|m&v),l++;if(l<o)d(p,t.getMetadata(l)&b|m&v),t.getEndOffset(l)===p&&l++;else{const w=Math.min(Math.max(0,l-1),o-1);d(p,t.getMetadata(w)&b|m&v)}}for(;l<o;)d(t.getEndOffset(l),t.getMetadata(l)),l++;return new bn(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,s=e.length-1;for(;n<s;){let r=n+Math.floor((s-n)/2);if(e[r].endLineNumber<t)n=r+1;else if(e[r].startLineNumber>t)s=r-1;else{for(;r>n&&e[r-1].startLineNumber<=t&&t<=e[r-1].endLineNumber;)r--;return r}}return n}acceptEdit(e,t,n,s,r){for(const o of this._pieces)o.acceptEdit(e,t,n,s,r)}}class Er{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}getTokens(e,t,n){let s=null;if(t<this._len&&(s=this._lineTokens[t]),s!==null&&s!==Jl)return new bn(ec(s),n,this._languageIdCodec);const r=new Uint32Array(2);return r[0]=n.length,r[1]=oV(this._languageIdCodec.encodeLanguageId(e)),new bn(r,n,this._languageIdCodec)}static _massageTokens(e,t,n){const s=n?ec(n):null;if(t===0){let r=!1;if(s&&s.length>1&&(r=Rr.getLanguageId(s[1])!==e),!r)return Jl}if(!s||s.length===0){const r=new Uint32Array(2);return r[0]=t,r[1]=oV(e),r.buffer}return s[s.length-2]=t,s.byteOffset===0&&s.byteLength===s.buffer.byteLength?s.buffer:s}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let n=[];for(let s=0;s<t;s++)n[s]=null;this._lineTokens=Rv(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,s,r){const o=Er._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,s);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=o,r?!Er._equals(a,o):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const n=ec(e),s=ec(t);if(n.length!==s.length)return!1;for(let r=0,o=n.length;r<o;r++)if(n[r]!==s[r])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new q(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=Er._delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=Er._deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let s=null;n<this._len&&(s=Er._deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=Er._append(this._lineTokens[t],s),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const s=e.lineNumber-1;if(!(s>=this._len)){if(t===0){this._lineTokens[s]=Er._insert(this._lineTokens[s],e.column-1,n);return}this._lineTokens[s]=Er._deleteEnding(this._lineTokens[s],e.column-1),this._lineTokens[s]=Er._insert(this._lineTokens[s],e.column-1,n),this._insertLines(e.lineNumber,t)}}static _deleteBeginning(e,t){return e===null||e===Jl?e:Er._delete(e,0,t)}static _deleteEnding(e,t){if(e===null||e===Jl)return e;const n=ec(e),s=n[n.length-2];return Er._delete(e,t,s)}static _delete(e,t,n){if(e===null||e===Jl||t===n)return e;const s=ec(e),r=s.length>>>1;if(t===0&&s[s.length-2]===n)return Jl;const o=bn.findIndexInTokensArray(s,t),a=o>0?s[o-1<<1]:0,l=s[o<<1];if(n<l){const f=n-t;for(let g=o;g<r;g++)s[g<<1]-=f;return e}let c,h;a!==t?(s[o<<1]=t,c=o+1<<1,h=t):(c=o<<1,h=a);const u=n-t;for(let f=o+1;f<r;f++){const g=s[f<<1]-u;g>h&&(s[c++]=g,s[c++]=s[(f<<1)+1],h=g)}if(c===s.length)return e;let d=new Uint32Array(c);return d.set(s.subarray(0,c),0),d.buffer}static _append(e,t){if(t===Jl)return e;if(e===Jl)return t;if(e===null)return e;if(t===null)return null;const n=ec(e),s=ec(t),r=s.length>>>1;let o=new Uint32Array(n.length+s.length);o.set(n,0);let a=n.length;const l=n[n.length-2];for(let c=0;c<r;c++)o[a++]=s[c<<1]+l,o[a++]=s[(c<<1)+1];return o.buffer}static _insert(e,t,n){if(e===null||e===Jl)return e;const s=ec(e),r=s.length>>>1;let o=bn.findIndexInTokensArray(s,t);o>0&&s[o-1<<1]===t&&o--;for(let a=o;a<r;a++)s[a<<1]+=n;return e}}class jp extends te{constructor(e,t,n,s,r,o,a){super(),this._onDidChangeContent=this._register(new z),this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=s,this._mightContainUnusualLineTerminators=r,this._pieceTree=new _2e(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let n=e+t;const s=this.getPositionAt(e),r=this.getPositionAt(n);return new F(s.lineNumber,s.column,r.lineNumber,r.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let n=this.getOffsetAt(e.startLineNumber,e.startColumn);return this.getOffsetAt(e.endLineNumber,e.endColumn)-n}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const s=e.startLineNumber,r=e.endLineNumber;for(let o=s;o<=r;o++){const a=this.getLineContent(o),l=o===s?e.startColumn-1:0,c=o===r?e.endColumn-1:a.length;for(let h=l;h<c;h++)_n(a.charCodeAt(h))?(n=n+1,h=h+1):n=n+1}return n+=this._getEndOfLine(t).length*(r-s),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=Zs(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=S0(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let s=this._mightContainRTL,r=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,a=!0,l=[];for(let p=0;p<e.length;p++){let m=e[p];a&&m._isTracked&&(a=!1);let v=m.range;if(m.text){let k=!0;o||(k=!i5(m.text),o=k),!s&&k&&(s=zL(m.text)),!r&&k&&(r=XZ(m.text))}let b="",w=0,y=0,x=0;if(m.text){let k;[w,y,x,k]=Im(m.text);const S=this.getEOL();k===0||k===(S===`\r
`?2:1)?b=m.text:b=m.text.replace(/\r\n|\r|\n/g,S)}l[p]={sortIndex:p,identifier:m.identifier||null,range:v,rangeOffset:this.getOffsetAt(v.startLineNumber,v.startColumn),rangeLength:this.getValueLengthInRange(v),text:b,eolCount:w,firstLineLength:y,lastLineLength:x,forceMoveMarkers:!!m.forceMoveMarkers,isAutoWhitespaceEdit:m.isAutoWhitespaceEdit||!1}}l.sort(jp._sortOpsAscending);let c=!1;for(let p=0,m=l.length-1;p<m;p++){let v=l[p].range.getEndPosition(),b=l[p+1].range.getStartPosition();if(b.isBeforeOrEqual(v)){if(b.isBefore(v))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));let h=n||t?jp._getInverseEditRanges(l):[],u=[];if(t)for(let p=0;p<l.length;p++){let m=l[p],v=h[p];if(m.isAutoWhitespaceEdit&&m.range.isEmpty())for(let b=v.startLineNumber;b<=v.endLineNumber;b++){let w="";b===v.startLineNumber&&(w=this.getLineContent(m.range.startLineNumber),Zs(w)!==-1)||u.push({lineNumber:b,oldContent:w})}}let d=null;if(n){let p=0;d=[];for(let m=0;m<l.length;m++){const v=l[m],b=h[m],w=this.getValueInRange(v.range),y=v.rangeOffset+p;p+=v.text.length-w.length,d[m]={sortIndex:v.sortIndex,identifier:v.identifier,range:b,text:w,textChange:new yn(v.rangeOffset,w,y,v.text)}}c||d.sort((m,v)=>m.sortIndex-v.sortIndex)}this._mightContainRTL=s,this._mightContainUnusualLineTerminators=r,this._mightContainNonBasicASCII=o;const f=this._doApplyEdits(l);let g=null;if(t&&u.length>0){u.sort((p,m)=>m.lineNumber-p.lineNumber),g=[];for(let p=0,m=u.length;p<m;p++){let v=u[p].lineNumber;if(p>0&&u[p-1].lineNumber===v)continue;let b=u[p].oldContent,w=this.getLineContent(v);w.length===0||w===b||Zs(w)!==-1||g.push(v)}}return this._onDidChangeContent.fire(),new mxe(d,f,g)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,s=e[e.length-1].range,r=new F(n.startLineNumber,n.startColumn,s.endLineNumber,s.endColumn);let o=n.startLineNumber,a=n.startColumn;const l=[];for(let f=0,g=e.length;f<g;f++){const p=e[f],m=p.range;t=t||p.forceMoveMarkers,l.push(this.getValueInRange(new F(o,a,m.startLineNumber,m.startColumn))),p.text.length>0&&l.push(p.text),o=m.endLineNumber,a=m.endColumn}const c=l.join(""),[h,u,d]=Im(c);return{sortIndex:0,identifier:e[0].identifier,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r,0),text:c,eolCount:h,firstLineLength:u,lastLineLength:d,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(jp._sortOpsDescending);let t=[];for(let n=0;n<e.length;n++){let s=e[n];const r=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,l=s.range.endColumn;if(r===a&&o===l&&s.text.length===0)continue;s.text?(this._pieceTree.delete(s.rangeOffset,s.rangeLength),this._pieceTree.insert(s.rangeOffset,s.text,!0)):this._pieceTree.delete(s.rangeOffset,s.rangeLength);const c=new F(r,o,a,l);t.push({range:c,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,s){return this._pieceTree.findMatchesLineByLine(e,t,n,s)}static _getInverseEditRanges(e){let t=[],n=0,s=0,r=null;for(let o=0,a=e.length;o<a;o++){let l=e[o],c,h;r?r.range.endLineNumber===l.range.startLineNumber?(c=n,h=s+(l.range.startColumn-r.range.endColumn)):(c=n+(l.range.startLineNumber-r.range.endLineNumber),h=l.range.startColumn):(c=l.range.startLineNumber,h=l.range.startColumn);let u;if(l.text.length>0){const d=l.eolCount+1;d===1?u=new F(c,h,c,h+l.firstLineLength):u=new F(c,h,c+d-1,l.lastLineLength+1)}else u=new F(c,h,c,h);n=u.endLineNumber,s=u.endColumn,t.push(u),r=l}return t}static _sortOpsAscending(e,t){let n=F.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){let n=F.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}}class v2e{constructor(e,t,n,s,r,o,a,l,c){this._chunks=e,this._bom=t,this._cr=n,this._lf=s,this._crlf=r,this._containsRTL=o,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e);let n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let r=0,o=n.length;r<o;r++){let a=n[r].buffer.replace(/\r\n|\r|\n/g,t),l=oc(a);n[r]=new cd(a,l)}const s=new jp(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:s,disposable:s}}}class w2e{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&n5(e)&&(this.BOM=OSe,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=g2e(this._tmpLineStarts,e);this.chunks.push(new cd(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&(this.isBasicASCII=t.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=zL(e)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=XZ(e))}finish(e=!0){return this._finish(),new v2e(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=oc(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class y2e{constructor(){this.changeType=1}}class xa{constructor(e,t,n,s,r){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=s,this.order=r}static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",s=0;for(const r of t)n+=e.substring(s,r.column-1),s=r.column-1,n+=r.options.content;return n+=e.substring(s),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new xa(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new xa(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,s)=>n.lineNumber===s.lineNumber?n.column===s.column?n.order-s.order:n.column-s.column:n.lineNumber-s.lineNumber),t}}class lV{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}}class C2e{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class S2e{constructor(e,t,n,s){this.changeType=4,this.injectedTexts=s,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class x2e{constructor(){this.changeType=5}}class Ud{constructor(e,t,n,s){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=s,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),s=t.versionId,r=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing;return new Ud(n,s,r,o)}}class LQ{constructor(e){this.changes=e}}class qx{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=Ud.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=qx._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new qx(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),s=t.eol,r=t.versionId,o=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush;return{changes:n,eol:s,versionId:r,isUndoing:o,isRedoing:a,isFlush:l}}}class D2e{constructor(){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0}_reset(e){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0,e&&this._setBeginState(0,e)}flush(e){this._reset(e)}get invalidLineStartIndex(){return this._invalidLineStartIndex}_invalidateLine(e){e<this._len&&(this._valid[e]=!1),e<this._invalidLineStartIndex&&(this._invalidLineStartIndex=e)}_isValid(e){return e<this._len?this._valid[e]:!1}getBeginState(e){return e<this._len?this._beginState[e]:null}_ensureLine(e){for(;e>=this._len;)this._beginState[this._len]=null,this._valid[this._len]=!1,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._beginState.splice(e,t),this._valid.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const n=[],s=[];for(let r=0;r<t;r++)n[r]=null,s[r]=!1;this._beginState=Rv(this._beginState,e,n),this._valid=Rv(this._valid,e,s),this._len+=t}_setValid(e,t){this._ensureLine(e),this._valid[e]=t}_setBeginState(e,t){this._ensureLine(e),this._beginState[e]=t}setEndState(e,t,n){if(this._setValid(t,!0),this._invalidLineStartIndex=t+1,t===e-1)return;const s=this.getBeginState(t+1);if(s===null||!n.equals(s)){this._setBeginState(t+1,n),this._invalidateLine(t+1);return}let r=t+1;for(;r<e&&this._isValid(r);)r++;this._invalidLineStartIndex=r}setFakeTokens(e){this._setValid(e,!1)}applyEdits(e,t){const n=e.endLineNumber-e.startLineNumber,r=Math.min(n,t);for(let o=r;o>=0;o--)this._invalidateLine(e.startLineNumber+o-1);this._acceptDeleteRange(e),this._acceptInsertText(new q(e.startLineNumber,e.startColumn),t)}_acceptDeleteRange(e){e.startLineNumber-1>=this._len||this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){e.lineNumber-1>=this._len||this._insertLines(e.lineNumber,t)}}class L2e extends te{constructor(e,t){super(),this._textModel=e,this._languageIdCodec=t,this._isDisposed=!1,this._tokenizationStateStore=new D2e,this._tokenizationSupport=null,this._register(xi.onDidChange(n=>{const s=this._textModel.getLanguageId();n.changedLanguages.indexOf(s)!==-1&&(this._resetTokenizationState(),this._textModel.clearTokens())})),this._register(this._textModel.onDidChangeContentFast(n=>{if(n.isFlush){this._resetTokenizationState();return}for(let s=0,r=n.changes.length;s<r;s++){const o=n.changes[s],[a]=Im(o.text);this._tokenizationStateStore.applyEdits(o.range,a)}this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeAttached(()=>{this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeLanguage(()=>{this._resetTokenizationState(),this._textModel.clearTokens()})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}_resetTokenizationState(){const[e,t]=k2e(this._textModel);this._tokenizationSupport=e,this._tokenizationStateStore.flush(t),this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&nN(()=>{this._isDisposed||this._revalidateTokensNow()})}_revalidateTokensNow(){const e=this._textModel.getLineCount(),t=1,n=new tE,s=$c.create(!1);let r=-1;for(;this._hasLinesToTokenize()&&!(s.elapsed()>t||(r=this._tokenizeOneInvalidLine(n),r>=e)););this._beginBackgroundTokenization(),this._textModel.setTokens(n.tokens,!this._hasLinesToTokenize())}tokenizeViewport(e,t){const n=new tE;this._tokenizeViewport(n,e,t),this._textModel.setTokens(n.tokens,!this._hasLinesToTokenize())}reset(){this._resetTokenizationState(),this._textModel.clearTokens()}forceTokenization(e){const t=new tE;this._updateTokensUntilLine(t,e),this._textModel.setTokens(t.tokens,!this._hasLinesToTokenize())}isCheapToTokenize(e){if(!this._tokenizationSupport)return!0;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return e>t?!1:e<t||this._textModel.getLineLength(e)<2048}_hasLinesToTokenize(){return this._tokenizationSupport?this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount():!1}_tokenizeOneInvalidLine(e){if(!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t}_updateTokensUntilLine(e,t){if(!this._tokenizationSupport)return;const n=this._textModel.getLanguageId(),s=this._textModel.getLineCount(),r=t-1;for(let o=this._tokenizationStateStore.invalidLineStartIndex;o<=r;o++){const a=this._textModel.getLineContent(o+1),l=this._tokenizationStateStore.getBeginState(o),c=iE(this._languageIdCodec,n,this._tokenizationSupport,a,!0,l);e.add(o+1,c.tokens),this._tokenizationStateStore.setEndState(s,o,c.endState),o=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,t,n){if(!this._tokenizationSupport||n<=this._tokenizationStateStore.invalidLineStartIndex)return;if(t<=this._tokenizationStateStore.invalidLineStartIndex){this._updateTokensUntilLine(e,n);return}let s=this._textModel.getLineFirstNonWhitespaceColumn(t);const r=[];let o=null;for(let c=t-1;s>1&&c>=1;c--){const h=this._textModel.getLineFirstNonWhitespaceColumn(c);if(h!==0&&h<s){if(o=this._tokenizationStateStore.getBeginState(c-1),o)break;r.push(this._textModel.getLineContent(c)),s=h}}o||(o=this._tokenizationSupport.getInitialState());const a=this._textModel.getLanguageId();let l=o;for(let c=r.length-1;c>=0;c--)l=iE(this._languageIdCodec,a,this._tokenizationSupport,r[c],!1,l).endState;for(let c=t;c<=n;c++){const h=this._textModel.getLineContent(c),u=iE(this._languageIdCodec,a,this._tokenizationSupport,h,!0,l);e.add(c,u.tokens),this._tokenizationStateStore.setFakeTokens(c-1),l=u.endState}}}function k2e(i){const e=i.getLanguageId();let t=i.isTooLargeForTokenization()?null:xi.get(e),n=null;if(t)try{n=t.getInitialState()}catch(s){Ke(s),t=null}return[t,n]}function iE(i,e,t,n,s,r){let o=null;if(t)try{o=t.tokenize2(n,s,r.clone(),0)}catch(a){Ke(a)}return o||(o=mY(i.encodeLanguageId(e),n,r,0)),bn.convertToEndOffset(o.tokens,n.length),o}function Qh(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}class et{constructor(e,t,n,s=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=Qh(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class Xo{constructor(e,t,n,s){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Qh(Math.max(Math.min(1,t),0),3),this.l=Qh(Math.max(Math.min(1,n),0),3),this.a=Qh(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,s=e.b/255,r=e.a,o=Math.max(t,n,s),a=Math.min(t,n,s);let l=0,c=0;const h=(a+o)/2,u=o-a;if(u>0){switch(c=Math.min(h<=.5?u/(2*h):u/(2-2*h),1),o){case t:l=(n-s)/u+(n<s?6:0);break;case n:l=(s-t)/u+2;break;case s:l=(t-n)/u+4;break}l*=60,l=Math.round(l)}return new Xo(l,c,h,r)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:s,a:r}=e;let o,a,l;if(n===0)o=a=l=s;else{const c=s<.5?s*(1+n):s+n-s*n,h=2*s-c;o=Xo._hue2rgb(h,c,t+1/3),a=Xo._hue2rgb(h,c,t),l=Xo._hue2rgb(h,c,t-1/3)}return new et(Math.round(o*255),Math.round(a*255),Math.round(l*255),r)}}class fl{constructor(e,t,n,s){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Qh(Math.max(Math.min(1,t),0),3),this.v=Qh(Math.max(Math.min(1,n),0),3),this.a=Qh(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,s=e.b/255,r=Math.max(t,n,s),o=Math.min(t,n,s),a=r-o,l=r===0?0:a/r;let c;return a===0?c=0:r===t?c=((n-s)/a%6+6)%6:r===n?c=(s-t)/a+2:c=(t-n)/a+4,new fl(Math.round(c*60),l,r,e.a)}static toRGBA(e){const{h:t,s:n,v:s,a:r}=e,o=s*n,a=o*(1-Math.abs(t/60%2-1)),l=s-o;let[c,h,u]=[0,0,0];return t<60?(c=o,h=a):t<120?(c=a,h=o):t<180?(h=o,u=a):t<240?(h=a,u=o):t<300?(c=a,u=o):t<=360&&(c=o,u=a),c=Math.round((c+l)*255),h=Math.round((h+l)*255),u=Math.round((u+l)*255),new et(c,h,u,r)}}class Z{constructor(e){if(e)if(e instanceof et)this.rgba=e;else if(e instanceof Xo)this._hsla=e,this.rgba=Xo.toRGBA(e);else if(e instanceof fl)this._hsva=e,this.rgba=fl.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(e){return Z.Format.CSS.parseHex(e)||Z.red}get hsla(){return this._hsla?this._hsla:Xo.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:fl.fromRGBA(this.rgba)}equals(e){return!!e&&et.equals(this.rgba,e.rgba)&&Xo.equals(this.hsla,e.hsla)&&fl.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=Z._relativeLuminanceForComponent(this.rgba.r),t=Z._relativeLuminanceForComponent(this.rgba.g),n=Z._relativeLuminanceForComponent(this.rgba.b),s=.2126*e+.7152*t+.0722*n;return Qh(s,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new Z(new Xo(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new Z(new Xo(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:s,a:r}=this.rgba;return new Z(new et(t,n,s,r*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new Z(new et(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return this._toString||(this._toString=Z.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const s=e.getRelativeLuminance(),r=t.getRelativeLuminance();return n=n*(r-s)/r,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const s=e.getRelativeLuminance(),r=t.getRelativeLuminance();return n=n*(s-r)/s,e.darken(n)}}Z.white=new Z(new et(255,255,255,1));Z.black=new Z(new et(0,0,0,1));Z.red=new Z(new et(255,0,0,1));Z.blue=new Z(new et(0,0,255,1));Z.cyan=new Z(new et(0,255,255,1));Z.lightgrey=new Z(new et(211,211,211,1));Z.transparent=new Z(new et(0,0,0,0));(function(i){(function(e){(function(t){function n(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:i.Format.CSS.formatRGBA(f)}t.formatRGB=n;function s(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}t.formatRGBA=s;function r(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:i.Format.CSS.formatHSLA(f)}t.formatHSL=r;function o(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(f){const g=f.toString(16);return g.length!==2?"0"+g:g}function l(f){return`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}`}t.formatHex=l;function c(f,g=!1){return g&&f.rgba.a===1?i.Format.CSS.formatHex(f):`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}${a(Math.round(f.rgba.a*255))}`}t.formatHexA=c;function h(f){return f.isOpaque()?i.Format.CSS.formatHex(f):i.Format.CSS.formatRGBA(f)}t.format=h;function u(f){const g=f.length;if(g===0||f.charCodeAt(0)!==35)return null;if(g===7){const p=16*d(f.charCodeAt(1))+d(f.charCodeAt(2)),m=16*d(f.charCodeAt(3))+d(f.charCodeAt(4)),v=16*d(f.charCodeAt(5))+d(f.charCodeAt(6));return new i(new et(p,m,v,1))}if(g===9){const p=16*d(f.charCodeAt(1))+d(f.charCodeAt(2)),m=16*d(f.charCodeAt(3))+d(f.charCodeAt(4)),v=16*d(f.charCodeAt(5))+d(f.charCodeAt(6)),b=16*d(f.charCodeAt(7))+d(f.charCodeAt(8));return new i(new et(p,m,v,b/255))}if(g===4){const p=d(f.charCodeAt(1)),m=d(f.charCodeAt(2)),v=d(f.charCodeAt(3));return new i(new et(16*p+p,16*m+m,16*v+v))}if(g===5){const p=d(f.charCodeAt(1)),m=d(f.charCodeAt(2)),v=d(f.charCodeAt(3)),b=d(f.charCodeAt(4));return new i(new et(16*p+p,16*m+m,16*v+v,(16*b+b)/255))}return null}t.parseHex=u;function d(f){switch(f){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(i.Format||(i.Format={}))})(Z||(Z={}));const Dw=mt("undoRedoService");class kQ{constructor(e,t){this.resource=e,this.elements=t}}class Tm{constructor(){this.id=Tm._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}Tm._ID=0;Tm.None=new Tm;class hl{constructor(){this.id=hl._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}hl._ID=0;hl.None=new hl;class cV{constructor(e,t,n){this.range=e,this.nestingLevel=t,this.isInvalid=n}}class A2e{constructor(e,t,n,s){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=s}}class E2e extends A2e{constructor(e,t,n,s,r){super(e,t,n,s),this.minVisibleColumnIndentation=r}}class I2e{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}}function T2e(i,e,t,n){return i!==t?bi(t-i,n):bi(0,n-e)}const qc=0;function N2e(i){return i===0}const vr=Math.pow(2,26);function bi(i,e){return i*vr+e}function Xh(i){const e=i,t=Math.floor(e/vr),n=e-t*vr;return new I2e(t,n)}function M2e(i){return Math.floor(i/vr)}function Cn(i,e){return e<vr?i+e:i-i%vr+e}function R2e(i,e){const t=i,n=e;if(n-t<=0)return qc;const r=Math.floor(t/vr),o=Math.floor(n/vr),a=n-o*vr;if(r===o){const l=t-r*vr;return bi(0,a-l)}else return bi(o-r,a)}function GC(i,e){return i<e}function Ad(i,e){return i<=e}function Ay(i,e){return i>=e}function Ey(i){return bi(i.lineNumber-1,i.column-1)}function Cb(i,e){const t=i,n=Math.floor(t/vr),s=t-n*vr,r=e,o=Math.floor(r/vr),a=r-o*vr;return new F(n+1,s+1,o+1,a+1)}function O2e(i){const e=El(i);return bi(e.length-1,e[e.length-1].length)}class hV{constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}}class P2e{constructor(e,t){this.documentLength=t,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(n=>z5.from(n))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):this.documentLength;return R2e(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?bi(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):bi(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=Xh(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?bi(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):bi(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(Ad(n,e)){this.nextEditIdx++;const s=Xh(n),r=Xh(this.translateOldToCur(t.endOffsetBeforeObj)),o=s.lineCount-r.lineCount;this.deltaOldToNewLineCount+=o;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=s.columnCount-r.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class z5{constructor(e,t,n){this.endOffsetBeforeObj=Xh(t),this.endOffsetAfterObj=Xh(Cn(e,n)),this.offsetObj=Xh(e)}static from(e){return new z5(e.startOffset,e.endOffset,e.newLength)}}class At{static visibleColumnFromColumn(e,t,n){const s=e.length,r=t-1<s?t-1:s;let o=0,a=0;for(;a<r;){const l=fc(e,r,a);if(a+=l>=65536?2:1,l===9)o=At.nextRenderTabStop(o,n);else{let c=Rg(l);for(;a<r;){const h=fc(e,r,a),u=Rg(h);if(cb(c,u))break;a+=h>=65536?2:1,c=u}la(l)||lb(l)?o=o+2:o=o+1}}return o}static visibleColumnsByColumns(e,t){const n=e.length;let s=new Array;s.push(-1);let r=0,o=0;for(;o<n;){const a=fc(e,n,o);if(o+=a>=65536?2:1,s.push(r),a>=65536&&s.push(r),a===9)r=At.nextRenderTabStop(r,t);else{let l=Rg(a);for(;o<n;){const c=fc(e,n,o),h=Rg(c);if(cb(l,h))break;o+=c>=65536?2:1,s.push(r),a>=65536&&s.push(r),l=h}la(a)||lb(a)?r=r+2:r=r+1}}return s.push(r),s}static visibleColumnFromColumn2(e,t,n){return this.visibleColumnFromColumn(t.getLineContent(n.lineNumber),n.column,e.tabSize)}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const s=e.length;let r=0,o=1,a=0;for(;a<s;){const l=fc(e,s,a);a+=l>=65536?2:1;let c;if(l===9)c=At.nextRenderTabStop(r,n);else{let u=Rg(l);for(;a<s;){const d=fc(e,s,a),f=Rg(d);if(cb(u,f))break;a+=d>=65536?2:1,u=f}la(l)||lb(l)?c=r+2:c=r+1}const h=a+1;if(c>=t){const u=t-r;return c-t<u?h:o}r=c,o=h}return s+1}static columnFromVisibleColumn2(e,t,n,s){let r=this.columnFromVisibleColumn(t.getLineContent(n),s,e.tabSize),o=t.getLineMinColumn(n);if(r<o)return o;let a=t.getLineMaxColumn(n);return r>a?a:r}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}const KC=new Array;class Ti{constructor(e,t){this.items=e,this.additionalItems=t}static create(e,t){if(e<=128&&t.length===0){let n=Ti.cache[e];return n||(n=new Ti(e,t),Ti.cache[e]=n),n}return new Ti(e,t)}static getEmpty(){return this.empty}add(e,t){const n=t.getKey(e);let s=n>>5;if(s===0){const o=1<<n|this.items;return o===this.items?this:Ti.create(o,this.additionalItems)}s--;const r=this.additionalItems.slice(0);for(;r.length<s;)r.push(0);return r[s]|=1<<(n&31),Ti.create(this.items,r)}merge(e){const t=this.items|e.items;if(this.additionalItems===KC&&e.additionalItems===KC)return t===this.items?this:t===e.items?e:Ti.create(t,KC);const n=new Array;for(let s=0;s<Math.max(this.additionalItems.length,e.additionalItems.length);s++){const r=this.additionalItems[s]||0,o=e.additionalItems[s]||0;n.push(r|o)}return Ti.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}}Ti.cache=new Array(129);Ti.empty=Ti.create(0,KC);const uV={getKey(i){return i}};class F2e{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class H5{constructor(e){this._length=e}get length(){return this._length}}class Vv extends H5{constructor(e,t,n,s,r){super(e),this.openingBracket=t,this.child=n,this.closingBracket=s,this.missingOpeningBracketIds=r}static create(e,t,n){let s=e.length;return t&&(s=Cn(s,t.length)),n&&(s=Cn(s,n.length)),new Vv(s,e,t,n,t?t.missingOpeningBracketIds:Ti.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=new Array;return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new Vv(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(Cn(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class Ml extends H5{constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}static create23(e,t,n,s=!1){let r=e.length,o=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(r=Cn(r,t.length),o=o.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");r=Cn(r,n.length),o=o.merge(n.missingOpeningBracketIds)}return s?new B2e(r,e.listHeight+1,e,t,n,o):new Wv(r,e.listHeight+1,e,t,n,o)}static getEmpty(){return new V2e(qc,0,[],Ti.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(0,n),n}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;let t=this,n;for(;t.kind===4&&(n=t.childrenLength)>0;)t=t.getChild(n-1);return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let s=1;s<e;s++){const r=this.getChild(s);t=Cn(t,r.length),n=n.merge(r.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,s=e;for(let r=0;r<this.childrenLength;r++){const o=this.getChild(r);o&&(n=Math.min(n,o.computeMinIndentation(s,t)),s=Cn(s,o.length))}return this.cachedMinIndentation=n,n}}class Wv extends Ml{constructor(e,t,n,s,r,o){super(e,t,o),this._item1=n,this._item2=s,this._item3=r}get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new Wv(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class B2e extends Wv{toMutable(){return new Wv(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class Gx extends Ml{constructor(e,t,n,s){super(e,t,s),this._children=n}get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new Gx(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class V2e extends Gx{toMutable(){return new Gx(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const W2e=[];class U5 extends H5{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return W2e}deepClone(){return this}}class Jg extends U5{get kind(){return 0}get missingOpeningBracketIds(){return Ti.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=Xh(e),s=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,r=M2e(Cn(e,this.length))+1;let o=Number.MAX_SAFE_INTEGER;for(let a=s;a<=r;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const h=At.visibleColumnFromColumn(c,l,t.getOptions().tabSize);o=Math.min(o,h)}return o}}class $d extends U5{constructor(e){super(e)}static create(e){const t=e,n=$d.cacheByLength.get(t);if(n)return n;const s=new $d(e);return $d.cacheByLength.set(t,s),s}get kind(){return 1}get missingOpeningBracketIds(){return Ti.getEmpty()}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}$d.cacheByLength=new Map;class z2e extends U5{constructor(e,t){super(t),this.missingOpeningBracketIds=e}get kind(){return 3}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class Rh{constructor(e,t,n,s,r){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=s,this.astNode=r}}class H2e{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new U2e(this.textModel,this.bracketTokens),this._offset=qc,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return bi(this.textBufferLineCount,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=Cn(this._offset,e);const t=Xh(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Cn(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class U2e{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const r=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=r.length,r}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const r=this.lineTokens,o=r.getCount();let a=null;if(this.lineTokenOffset<o){const l=r.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<o&&l===r.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=Rr.getTokenType(l)===0,h=r.getEndOffset(this.lineTokenOffset);if(c&&h!==this.lineCharOffset){const u=r.getLanguageId(this.lineTokenOffset),d=this.line.substring(this.lineCharOffset,h),f=this.bracketTokens.getSingleLanguageBracketTokens(u),g=f.regExpGlobal;if(g){g.lastIndex=0;const p=g.exec(d);p&&(a=f.getToken(p[0]),a&&(this.lineCharOffset+=p.index))}}if(n+=h-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=h}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}const s=T2e(e,t,this.lineIdx,this.lineCharOffset);return new Rh(s,0,-1,Ti.getEmpty(),new Jg(s))}}class $2e{constructor(e,t){this.text=e,this._offset=qc,this.idx=0;const s=t.getRegExpStr()?new RegExp(t.getRegExpStr()+`|
`,"g"):null,r=[];let o,a=0,l=0,c=0,h=0;const u=new Array;for(let g=0;g<60;g++)u.push(new Rh(bi(0,g),0,-1,Ti.getEmpty(),new Jg(bi(0,g))));const d=new Array;for(let g=0;g<60;g++)d.push(new Rh(bi(1,g),0,-1,Ti.getEmpty(),new Jg(bi(1,g))));if(s)for(s.lastIndex=0;(o=s.exec(e))!==null;){const g=o.index,p=o[0];if(p===`
`)a++,l=g+1;else{if(c!==g){let m;if(h===a){const v=g-c;if(v<u.length)m=u[v];else{const b=bi(0,v);m=new Rh(b,0,-1,Ti.getEmpty(),new Jg(b))}}else{const v=a-h,b=g-l;if(v===1&&b<d.length)m=d[b];else{const w=bi(v,b);m=new Rh(w,0,-1,Ti.getEmpty(),new Jg(w))}}r.push(m)}r.push(t.getToken(p)),c=g+p.length,h=a}}const f=e.length;if(c!==f){const g=h===a?bi(0,f-c):bi(a-h,f-l);r.push(new Rh(g,0,-1,Ti.getEmpty(),new Jg(g)))}this.length=bi(a,f-l),this.tokens=r}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new yCe}}class Kx{constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}static createFromLanguage(e,t){function n(l,c){return t.getKey(`${l}:::${c}`)}const s=e.characterPair.getColorizedBrackets(),r=new Map,o=new Set;for(const[l,c]of s){o.add(l);let h=r.get(c);const u=n(e.languageId,l);h||(h={openingBrackets:Ti.getEmpty(),first:u},r.set(c,h)),h.openingBrackets=h.openingBrackets.add(u,uV)}const a=new Map;for(const[l,c]of r){const h=bi(0,l.length);a.set(l,new Rh(h,2,c.first,c.openingBrackets,$d.create(h)))}for(const l of o){const c=bi(0,l.length),h=n(e.languageId,l);a.set(l,new Rh(c,1,h,Ti.getEmpty().add(h,uV),$d.create(c)))}return new Kx(a)}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>j2e(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"g"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e)}get isEmpty(){return this.map.size===0}}function j2e(i){const e=wa(i);return/^[\w ]+$/.test(i)?`\\b${e}\\b`:e}class q2e{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){const t=this.languageIdToBracketTokens.get(e);if(!t)return!1;const n=Kx.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider).getRegExpStr();return t.getRegExpStr()!==n}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=Kx.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function G2e(i){if(i.length===0)return null;if(i.length===1)return i[0];let e=0;function t(){if(e>=i.length)return null;const o=e,a=i[o].listHeight;for(e++;e<i.length&&i[e].listHeight===a;)e++;return e-o>=2?AQ(o===0&&e===i.length?i:i.slice(o,e),!1):i[o]}let n=t(),s=t();if(!s)return n;for(let o=t();o;o=t())dV(n,s)<=dV(s,o)?(n=nE(n,s),s=o):s=nE(s,o);return nE(n,s)}function AQ(i,e=!1){if(i.length===0)return null;if(i.length===1)return i[0];let t=i.length;for(;t>3;){const n=t>>1;for(let s=0;s<n;s++){const r=s<<1;i[s]=Ml.create23(i[r],i[r+1],r+3===t?i[r+2]:null,e)}t=n}return Ml.create23(i[0],i[1],t>=3?i[2]:null,e)}function dV(i,e){return Math.abs(i.listHeight-e.listHeight)}function nE(i,e){return i.listHeight===e.listHeight?Ml.create23(i,e,null,!1):i.listHeight>e.listHeight?K2e(i,e):Z2e(e,i)}function K2e(i,e){i=i.toMutable();let t=i;const n=new Array;let s;for(;;){if(e.listHeight===t.listHeight){s=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let r=n.length-1;r>=0;r--){const o=n[r];s?o.childrenLength>=3?s=Ml.create23(o.unappendChild(),s,null,!1):(o.appendChildOfSameHeight(s),s=void 0):o.handleChildrenChanged()}return s?Ml.create23(i,s,null,!1):i}function Z2e(i,e){i=i.toMutable();let t=i;const n=new Array;for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let s=e;for(let r=n.length-1;r>=0;r--){const o=n[r];s?o.childrenLength>=3?s=Ml.create23(s,o.unprependChild(),null,!1):(o.prependChildOfSameHeight(s),s=void 0):o.handleChildrenChanged()}return s?Ml.create23(s,i,null,!1):i}class Y2e{constructor(e){this.lastOffset=qc,this.nextNodes=[e],this.offsets=[qc],this.idxs=[]}readLongestNodeAt(e,t){if(GC(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=r_(this.nextNodes);if(!n)return;const s=r_(this.offsets);if(GC(e,s))return;if(GC(s,e))if(Cn(s,n.length)<=e)this.nextNodeAfterCurrent();else{const r=sE(n);r!==-1?(this.nextNodes.push(n.getChild(r)),this.offsets.push(s),this.idxs.push(r)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const r=sE(n);if(r===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(r)),this.offsets.push(s),this.idxs.push(r)}}}}nextNodeAfterCurrent(){for(;;){const e=r_(this.offsets),t=r_(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const n=r_(this.nextNodes),s=sE(n,this.idxs[this.idxs.length-1]);if(s!==-1){this.nextNodes.push(n.getChild(s)),this.offsets.push(Cn(e,t.length)),this.idxs[this.idxs.length-1]=s;break}else this.idxs.pop()}}}function sE(i,e=-1){for(;;){if(e++,e>=i.childrenLength)return-1;if(i.getChild(e))return e}}function r_(i){return i.length>0?i[i.length-1]:void 0}function fV(i,e,t,n){return new Q2e(i,e,t,n).parseDocument()}class Q2e{constructor(e,t,n,s){if(this.tokenizer=e,this.createImmutableLists=s,this._itemsConstructed=0,this._itemsFromCache=0,n&&s)throw new Error("Not supported");this.oldNodeReader=n?new Y2e(n):void 0,this.positionMapper=new P2e(t,e.length)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Ti.getEmpty());return e||(e=Ml.getEmpty()),e}parseList(e){const t=new Array;for(;;){const s=this.tokenizer.peek();if(!s||s.kind===2&&s.bracketIds.intersects(e))break;const r=this.parseChild(e);r.kind===4&&r.childrenLength===0||t.push(r)}return this.oldNodeReader?G2e(t):AQ(t,this.createImmutableLists)}parseChild(e){if(this.oldNodeReader){const n=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!N2e(n)){const s=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),r=>GC(r.length,n)?r.canBeReused(e):!1);if(s)return this._itemsFromCache++,this.tokenizer.skip(s.length),s}}this._itemsConstructed++;const t=this.tokenizer.read();switch(t.kind){case 2:return new z2e(t.bracketIds,t.length);case 0:return t.astNode;case 1:const n=e.merge(t.bracketIds),s=this.parseList(n),r=this.tokenizer.peek();return r&&r.kind===2&&(r.bracketId===t.bracketId||r.bracketIds.intersects(t.bracketIds))?(this.tokenizer.read(),Vv.create(t.astNode,s,r.astNode)):Vv.create(t.astNode,s,null);default:throw new Error("unexpected")}}}class X2e extends te{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.cache=this._register(new Lr),this.onDidChangeEmitter=new z,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(e.onDidChangeOptions(n=>{this.cache.clear(),this.updateCache()})),this._register(e.onDidChangeLanguage(n=>{this.cache.clear(),this.updateCache()})),this._register(this.languageConfigurationService.onDidChange(n=>{var s;(!n.languageId||!((s=this.cache.value)===null||s===void 0)&&s.object.didLanguageChange(n.languageId))&&(this.cache.clear(),this.updateCache())}))}get isDocumentSupported(){return this.textModel.getValueLength()<=5e6}updateCache(){if(this.bracketsRequested&&this.isDocumentSupported){if(!this.cache.value){const e=new de;this.cache.value=J2e(e.add(new eAe(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.cache.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.cache.clear(),this.onDidChangeEmitter.fire()}handleContentChanged(e){var t;(t=this.cache.value)===null||t===void 0||t.object.handleContentChanged(e)}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateCache(),((t=this.cache.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||[]}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateCache(),((t=this.cache.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||[]}getBracketsInRange(e){var t;return this.bracketsRequested=!0,this.updateCache(),((t=this.cache.value)===null||t===void 0?void 0:t.object.getBracketsInRange(e))||[]}}function J2e(i,e){return{object:i,dispose:()=>e==null?void 0:e.dispose()}}class eAe extends te{constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new z,this.denseKeyProvider=new F2e,this.brackets=new q2e(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this._register(e.onBackgroundTokenizationStateChanged(()=>{if(e.backgroundTokenizationState===2){const n=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,n||this.didChangeEmitter.fire()}})),this._register(e.onDidChangeTokens(({ranges:n})=>{const s=n.map(r=>new hV(bi(r.fromLineNumber-1,0),bi(r.toLineNumber,0),bi(r.toLineNumber-r.fromLineNumber+1,0)));this.astWithTokens=this.parseDocumentFromTextBuffer(s,this.astWithTokens,!1),this.initialAstWithoutTokens||this.didChangeEmitter.fire()})),e.backgroundTokenizationState===0){const n=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),s=new $2e(this.textModel.getValue(),n);this.initialAstWithoutTokens=fV(s,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else e.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):e.backgroundTokenizationState===1&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens)}didLanguageChange(e){return this.brackets.didLanguageChange(e)}handleContentChanged(e){const t=e.changes.map(n=>{const s=F.lift(n.range);return new hV(Ey(s.getStartPosition()),Ey(s.getEndPosition()),O2e(n.text))}).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(t,this.initialAstWithoutTokens,!1))}parseDocumentFromTextBuffer(e,t,n){const s=t,r=new H2e(this.textModel,this.brackets);return fV(r,e,s,n)}getBracketsInRange(e){const t=bi(e.startLineNumber-1,e.startColumn-1),n=bi(e.endLineNumber-1,e.endColumn-1),s=new Array,r=this.initialAstWithoutTokens||this.astWithTokens;return M_(r,qc,r.length,t,n,s),s}getBracketPairsInRange(e,t){const n=new Array,s=Ey(e.getStartPosition()),r=Ey(e.getEndPosition()),o=this.initialAstWithoutTokens||this.astWithTokens,a=new tAe(n,t,this.textModel);return EQ(o,qc,o.length,s,r,a),n}}function M_(i,e,t,n,s,r,o=0){if(i.kind===1){const a=Cb(e,t);r.push(new cV(a,o-1,!1))}else if(i.kind===3){const a=Cb(e,t);r.push(new cV(a,o-1,!0))}else if(i.kind===4)for(const a of i.children)t=Cn(e,a.length),Ad(e,s)&&Ay(t,n)&&M_(a,e,t,n,s,r,o),e=t;else if(i.kind===2){o++;{const a=i.openingBracket;t=Cn(e,a.length),Ad(e,s)&&Ay(t,n)&&M_(a,e,t,n,s,r,o),e=t}if(i.child){const a=i.child;t=Cn(e,a.length),Ad(e,s)&&Ay(t,n)&&M_(a,e,t,n,s,r,o),e=t}if(i.closingBracket){const a=i.closingBracket;t=Cn(e,a.length),Ad(e,s)&&Ay(t,n)&&M_(a,e,t,n,s,r,o),e=t}}}class tAe{constructor(e,t,n){this.result=e,this.includeMinIndentation=t,this.textModel=n}}function EQ(i,e,t,n,s,r,o=0){var a;if(i.kind===2){const c=Cn(e,i.openingBracket.length);let h=-1;r.includeMinIndentation&&(h=i.computeMinIndentation(e,r.textModel)),r.result.push(new E2e(Cb(e,t),Cb(e,c),i.closingBracket?Cb(Cn(c,((a=i.child)===null||a===void 0?void 0:a.length)||qc),t):void 0,o,h)),o++}let l=e;for(const c of i.children){const h=l;l=Cn(l,c.length),Ad(h,s)&&Ad(n,l)&&EQ(c,h,l,n,s,r,o)}}const IQ={ColorContribution:"base.contributions.colors"};class iAe{constructor(){this._onDidChangeSchema=new z,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,s=!1,r){let o={id:e,description:n,defaults:t,needsTransparency:s,deprecationMessage:r};this.colorsById[e]=o;let a={type:"string",description:n,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return r&&(a.deprecationMessage=r),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n&&n.defaults){const s=n.defaults[t.type];return ac(s,t)}}getColorSchema(){return this.colorSchema}toString(){let e=(t,n)=>{let s=t.indexOf(".")===-1?0:1,r=n.indexOf(".")===-1?0:1;return s!==r?s-r:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const fk=new iAe;kn.add(IQ.ColorContribution,fk);function V(i,e,t,n,s){return fk.registerColor(i,e,t,n,s)}const Ie=V("foreground",{dark:"#CCCCCC",light:"#616161",hc:"#FFFFFF"},_("foreground","Overall foreground color. This color is only used if not overridden by a component.")),nAe=V("errorForeground",{dark:"#F48771",light:"#A1260D",hc:"#F48771"},_("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),rE=V("icon.foreground",{dark:"#C5C5C5",light:"#424242",hc:"#FFFFFF"},_("iconForeground","The default color for icons in the workbench.")),vu=V("focusBorder",{dark:"#007FD4",light:"#0090F1",hc:"#F38518"},_("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),Pi=V("contrastBorder",{light:null,dark:null,hc:"#6FC3DF"},_("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Is=V("contrastActiveBorder",{light:null,dark:null,hc:vu},_("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),gk=V("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},_("textLinkForeground","Foreground color for links in text.")),pk=V("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},_("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),TQ=V("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hc:Z.black},_("textCodeBlockBackground","Background color for code blocks in text.")),Nm=V("widget.shadow",{dark:$t(Z.black,.36),light:$t(Z.black,.16),hc:null},_("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),NQ=V("input.background",{dark:"#3C3C3C",light:Z.white,hc:Z.black},_("inputBoxBackground","Input box background.")),MQ=V("input.foreground",{dark:Ie,light:Ie,hc:Ie},_("inputBoxForeground","Input box foreground.")),RQ=V("input.border",{dark:null,light:null,hc:Pi},_("inputBoxBorder","Input box border.")),FM=V("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hc:Pi},_("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),BM=V("inputOption.activeBackground",{dark:$t(vu,.4),light:$t(vu,.2),hc:Z.transparent},_("inputOption.activeBackground","Background color of activated options in input fields.")),VM=V("inputOption.activeForeground",{dark:Z.white,light:Z.black,hc:null},_("inputOption.activeForeground","Foreground color of activated options in input fields.")),$5=V("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hc:Z.black},_("inputValidationInfoBackground","Input validation background color for information severity.")),j5=V("inputValidation.infoForeground",{dark:null,light:null,hc:null},_("inputValidationInfoForeground","Input validation foreground color for information severity.")),q5=V("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hc:Pi},_("inputValidationInfoBorder","Input validation border color for information severity.")),OQ=V("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hc:Z.black},_("inputValidationWarningBackground","Input validation background color for warning severity.")),PQ=V("inputValidation.warningForeground",{dark:null,light:null,hc:null},_("inputValidationWarningForeground","Input validation foreground color for warning severity.")),FQ=V("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hc:Pi},_("inputValidationWarningBorder","Input validation border color for warning severity.")),BQ=V("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hc:Z.black},_("inputValidationErrorBackground","Input validation background color for error severity.")),VQ=V("inputValidation.errorForeground",{dark:null,light:null,hc:null},_("inputValidationErrorForeground","Input validation foreground color for error severity.")),WQ=V("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hc:Pi},_("inputValidationErrorBorder","Input validation border color for error severity.")),oE=V("dropdown.background",{dark:"#3C3C3C",light:Z.white,hc:Z.black},_("dropdownBackground","Dropdown background.")),gV=V("dropdown.foreground",{dark:"#F0F0F0",light:null,hc:Z.white},_("dropdownForeground","Dropdown foreground.")),sAe=V("button.foreground",{dark:Z.white,light:Z.white,hc:Z.white},_("buttonForeground","Button foreground color.")),WM=V("button.background",{dark:"#0E639C",light:"#007ACC",hc:null},_("buttonBackground","Button background color.")),rAe=V("button.hoverBackground",{dark:GQ(WM,.2),light:qQ(WM,.2),hc:null},_("buttonHoverBackground","Button background color when hovering.")),Sb=V("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hc:Z.black},_("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),xb=V("badge.foreground",{dark:Z.white,light:"#333",hc:Z.white},_("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),Lw=V("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hc:null},_("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),Db=V("scrollbarSlider.background",{dark:Z.fromHex("#797979").transparent(.4),light:Z.fromHex("#646464").transparent(.4),hc:$t(Pi,.6)},_("scrollbarSliderBackground","Scrollbar slider background color.")),Lb=V("scrollbarSlider.hoverBackground",{dark:Z.fromHex("#646464").transparent(.7),light:Z.fromHex("#646464").transparent(.7),hc:$t(Pi,.8)},_("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),kb=V("scrollbarSlider.activeBackground",{dark:Z.fromHex("#BFBFBF").transparent(.4),light:Z.fromHex("#000000").transparent(.6),hc:Pi},_("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),oAe=V("progressBar.background",{dark:Z.fromHex("#0E70C0"),light:Z.fromHex("#0E70C0"),hc:Pi},_("progressBarBackground","Background color of the progress bar that can show for long running operations.")),aAe=V("editorError.background",{dark:null,light:null,hc:null},_("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Ab=V("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hc:null},_("editorError.foreground","Foreground color of error squigglies in the editor.")),zQ=V("editorError.border",{dark:null,light:null,hc:Z.fromHex("#E47777").transparent(.8)},_("errorBorder","Border color of error boxes in the editor.")),lAe=V("editorWarning.background",{dark:null,light:null,hc:null},_("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Oc=V("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hc:null},_("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),mk=V("editorWarning.border",{dark:null,light:null,hc:Z.fromHex("#FFCC00").transparent(.8)},_("warningBorder","Border color of warning boxes in the editor.")),cAe=V("editorInfo.background",{dark:null,light:null,hc:null},_("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),fa=V("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hc:"#3794FF"},_("editorInfo.foreground","Foreground color of info squigglies in the editor.")),G5=V("editorInfo.border",{dark:null,light:null,hc:Z.fromHex("#3794FF").transparent(.8)},_("infoBorder","Border color of info boxes in the editor.")),hAe=V("editorHint.foreground",{dark:Z.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hc:null},_("editorHint.foreground","Foreground color of hint squigglies in the editor.")),uAe=V("editorHint.border",{dark:null,light:null,hc:Z.fromHex("#eeeeee").transparent(.8)},_("hintBorder","Border color of hint boxes in the editor.")),Ur=V("editor.background",{light:"#fffffe",dark:"#1E1E1E",hc:Z.black},_("editorBackground","Editor background color.")),Jh=V("editor.foreground",{light:"#333333",dark:"#BBBBBB",hc:Z.white},_("editorForeground","Editor default foreground color.")),To=V("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hc:"#0C141F"},_("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),eu=V("editorWidget.foreground",{dark:Ie,light:Ie,hc:Ie},_("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),jd=V("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hc:Pi},_("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),dAe=V("editorWidget.resizeBorder",{light:null,dark:null,hc:null},_("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),pV=V("quickInput.background",{dark:To,light:To,hc:To},_("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),fAe=V("quickInput.foreground",{dark:eu,light:eu,hc:eu},_("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),gAe=V("quickInputTitle.background",{dark:new Z(new et(255,255,255,.105)),light:new Z(new et(0,0,0,.06)),hc:"#000000"},_("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),pAe=V("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hc:Z.white},_("pickerGroupForeground","Quick picker color for grouping labels.")),mAe=V("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hc:Z.white},_("pickerGroupBorder","Quick picker color for grouping borders.")),_Ae=V("keybindingLabel.background",{dark:new Z(new et(128,128,128,.17)),light:new Z(new et(221,221,221,.4)),hc:Z.transparent},_("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),bAe=V("keybindingLabel.foreground",{dark:Z.fromHex("#CCCCCC"),light:Z.fromHex("#555555"),hc:Z.white},_("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),vAe=V("keybindingLabel.border",{dark:new Z(new et(51,51,51,.6)),light:new Z(new et(204,204,204,.4)),hc:new Z(new et(111,195,223))},_("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),wAe=V("keybindingLabel.bottomBorder",{dark:new Z(new et(68,68,68,.6)),light:new Z(new et(187,187,187,.4)),hc:new Z(new et(111,195,223))},_("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),tu=V("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hc:"#f3f518"},_("editorSelectionBackground","Color of the editor selection.")),yAe=V("editor.selectionForeground",{light:null,dark:null,hc:"#000000"},_("editorSelectionForeground","Color of the selected text for high contrast.")),K5=V("editor.inactiveSelectionBackground",{light:$t(tu,.5),dark:$t(tu,.5),hc:$t(tu,.5)},_("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),HQ=V("editor.selectionHighlightBackground",{light:bV(tu,Ur,.3,.6),dark:bV(tu,Ur,.3,.6),hc:null},_("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);V("editor.selectionHighlightBorder",{light:null,dark:null,hc:Is},_("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));const CAe=V("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hc:null},_("editorFindMatch","Color of the current search match.")),zM=V("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hc:null},_("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),SAe=V("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hc:null},_("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),xAe=V("editor.findMatchBorder",{light:null,dark:null,hc:Is},_("editorFindMatchBorder","Border color of the current search match.")),DAe=V("editor.findMatchHighlightBorder",{light:null,dark:null,hc:Is},_("findMatchHighlightBorder","Border color of the other search matches.")),LAe=V("editor.findRangeHighlightBorder",{dark:null,light:null,hc:$t(Is,.4)},_("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),kAe=V("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hc:"#ADD6FF26"},_("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),zv=V("editorHoverWidget.background",{light:To,dark:To,hc:To},_("hoverBackground","Background color of the editor hover.")),AAe=V("editorHoverWidget.foreground",{light:eu,dark:eu,hc:eu},_("hoverForeground","Foreground color of the editor hover.")),EAe=V("editorHoverWidget.border",{light:jd,dark:jd,hc:jd},_("hoverBorder","Border color of the editor hover.")),IAe=V("editorHoverWidget.statusBarBackground",{dark:GQ(zv,.2),light:qQ(zv,.05),hc:To},_("statusBarBackground","Background color of the editor hover status bar.")),TAe=V("editorLink.activeForeground",{dark:"#4E94CE",light:Z.blue,hc:Z.cyan},_("activeLinkForeground","Color of active links.")),qp=V("editorInlayHint.foreground",{dark:$t(xb,.8),light:$t(xb,.8),hc:xb},_("editorInlayHintForeground","Foreground color of inline hints")),Gp=V("editorInlayHint.background",{dark:$t(Sb,.6),light:$t(Sb,.3),hc:Sb},_("editorInlayHintBackground","Background color of inline hints"));V("editorInlayHint.typeForeground",{dark:qp,light:qp,hc:qp},_("editorInlayHintForegroundTypes","Foreground color of inline hints for types"));V("editorInlayHint.typeBackground",{dark:Gp,light:Gp,hc:Gp},_("editorInlayHintBackgroundTypes","Background color of inline hints for types"));V("editorInlayHint.parameterForeground",{dark:qp,light:qp,hc:qp},_("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters"));V("editorInlayHint.parameterBackground",{dark:Gp,light:Gp,hc:Gp},_("editorInlayHintBackgroundParameter","Background color of inline hints for parameters"));const NAe=V("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hc:"#FFCC00"},_("editorLightBulbForeground","The color used for the lightbulb actions icon.")),MAe=V("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},_("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),HM=new Z(new et(155,185,85,.2)),UM=new Z(new et(255,0,0,.2)),UQ=V("diffEditor.insertedTextBackground",{dark:HM,light:HM,hc:null},_("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),$Q=V("diffEditor.removedTextBackground",{dark:UM,light:UM,hc:null},_("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),RAe=V("diffEditor.insertedTextBorder",{dark:null,light:null,hc:"#33ff2eff"},_("diffEditorInsertedOutline","Outline color for the text that got inserted.")),OAe=V("diffEditor.removedTextBorder",{dark:null,light:null,hc:"#FF008F"},_("diffEditorRemovedOutline","Outline color for text that got removed.")),PAe=V("diffEditor.border",{dark:null,light:null,hc:Pi},_("diffEditorBorder","Border color between the two text editors.")),FAe=V("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hc:null},_("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),BAe=V("list.focusBackground",{dark:null,light:null,hc:null},_("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),VAe=V("list.focusForeground",{dark:null,light:null,hc:null},_("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),WAe=V("list.focusOutline",{dark:vu,light:vu,hc:Is},_("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),iu=V("list.activeSelectionBackground",{dark:"#094771",light:"#0060C0",hc:null},_("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),nu=V("list.activeSelectionForeground",{dark:Z.white,light:Z.white,hc:null},_("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),ZC=V("list.activeSelectionIconForeground",{dark:null,light:null,hc:null},_("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),zAe=V("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hc:null},_("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),HAe=V("list.inactiveSelectionForeground",{dark:null,light:null,hc:null},_("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),UAe=V("list.inactiveSelectionIconForeground",{dark:null,light:null,hc:null},_("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),$Ae=V("list.inactiveFocusBackground",{dark:null,light:null,hc:null},_("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),jAe=V("list.inactiveFocusOutline",{dark:null,light:null,hc:null},_("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),qAe=V("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hc:null},_("listHoverBackground","List/Tree background when hovering over items using the mouse.")),GAe=V("list.hoverForeground",{dark:null,light:null,hc:null},_("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),KAe=V("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hc:null},_("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),Kp=V("list.highlightForeground",{dark:"#18A3FF",light:"#0066BF",hc:vu},_("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),aE=V("list.focusHighlightForeground",{dark:Kp,light:DEe(iu,Kp,"#9DDDFF"),hc:Kp},_("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.")),ZAe=V("listFilterWidget.background",{light:"#efc1ad",dark:"#653723",hc:Z.black},_("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),YAe=V("listFilterWidget.outline",{dark:Z.transparent,light:Z.transparent,hc:"#f38518"},_("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),QAe=V("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hc:Pi},_("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),XAe=V("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hc:"#a9a9a9"},_("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),JAe=V("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hc:null},_("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),mV=V("quickInput.list.focusBackground",{dark:null,light:null,hc:null},"",void 0,_("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),YC=V("quickInputList.focusForeground",{dark:nu,light:nu,hc:nu},_("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),QC=V("quickInputList.focusIconForeground",{dark:ZC,light:ZC,hc:ZC},_("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),XC=V("quickInputList.focusBackground",{dark:Hv(mV,iu),light:Hv(mV,iu),hc:null},_("quickInput.listFocusBackground","Quick picker background color for the focused item.")),eEe=V("menu.border",{dark:null,light:null,hc:Pi},_("menuBorder","Border color of menus.")),tEe=V("menu.foreground",{dark:gV,light:Ie,hc:gV},_("menuForeground","Foreground color of menu items.")),iEe=V("menu.background",{dark:oE,light:oE,hc:oE},_("menuBackground","Background color of menu items.")),nEe=V("menu.selectionForeground",{dark:nu,light:nu,hc:nu},_("menuSelectionForeground","Foreground color of the selected menu item in menus.")),sEe=V("menu.selectionBackground",{dark:iu,light:iu,hc:iu},_("menuSelectionBackground","Background color of the selected menu item in menus.")),rEe=V("menu.selectionBorder",{dark:null,light:null,hc:Is},_("menuSelectionBorder","Border color of the selected menu item in menus.")),oEe=V("menu.separatorBackground",{dark:"#BBBBBB",light:"#888888",hc:Pi},_("menuSeparatorBackground","Color of a separator menu item in menus.")),aEe=V("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hc:null},_("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),lEe=V("editor.snippetTabstopHighlightBackground",{dark:new Z(new et(124,124,124,.3)),light:new Z(new et(10,50,100,.2)),hc:new Z(new et(124,124,124,.3))},_("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),cEe=V("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hc:null},_("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),hEe=V("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hc:null},_("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),uEe=V("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new Z(new et(10,50,100,.5)),hc:"#525252"},_("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet.")),Z5=V("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},_("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),dEe=V("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},_("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),jQ=V("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},_("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),fEe=V("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hc:"#ffffff"},_("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),_V=V("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hc:"#ffffff"},_("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),gEe=V("minimap.errorHighlight",{dark:new Z(new et(255,18,18,.7)),light:new Z(new et(255,18,18,.7)),hc:new Z(new et(255,50,50,1))},_("minimapError","Minimap marker color for errors.")),pEe=V("minimap.warningHighlight",{dark:Oc,light:Oc,hc:mk},_("overviewRuleWarning","Minimap marker color for warnings.")),mEe=V("minimap.background",{dark:null,light:null,hc:null},_("minimapBackground","Minimap background color.")),_Ee=V("minimap.foregroundOpacity",{dark:Z.fromHex("#000f"),light:Z.fromHex("#000f"),hc:Z.fromHex("#000f")},_("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),bEe=V("minimapSlider.background",{light:$t(Db,.5),dark:$t(Db,.5),hc:$t(Db,.5)},_("minimapSliderBackground","Minimap slider background color.")),vEe=V("minimapSlider.hoverBackground",{light:$t(Lb,.5),dark:$t(Lb,.5),hc:$t(Lb,.5)},_("minimapSliderHoverBackground","Minimap slider background color when hovering.")),wEe=V("minimapSlider.activeBackground",{light:$t(kb,.5),dark:$t(kb,.5),hc:$t(kb,.5)},_("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),yEe=V("problemsErrorIcon.foreground",{dark:Ab,light:Ab,hc:Ab},_("problemsErrorIconForeground","The color used for the problems error icon.")),CEe=V("problemsWarningIcon.foreground",{dark:Oc,light:Oc,hc:Oc},_("problemsWarningIconForeground","The color used for the problems warning icon.")),SEe=V("problemsInfoIcon.foreground",{dark:fa,light:fa,hc:fa},_("problemsInfoIconForeground","The color used for the problems info icon."));function xEe(i,e){var t,n,s;switch(i.op){case 0:return(t=ac(i.value,e))===null||t===void 0?void 0:t.darken(i.factor);case 1:return(n=ac(i.value,e))===null||n===void 0?void 0:n.lighten(i.factor);case 2:return(s=ac(i.value,e))===null||s===void 0?void 0:s.transparent(i.factor);case 3:for(const a of i.values){const l=ac(a,e);if(l)return l}return;case 5:return ac(e.defines(i.if)?i.then:i.else,e);case 4:const r=ac(i.value,e);if(!r)return;const o=ac(i.background,e);return o?r.isDarkerThan(o)?Z.getLighterColor(r,o,i.factor).transparent(i.transparency):Z.getDarkerColor(r,o,i.factor).transparent(i.transparency):r.transparent(i.factor*i.transparency);default:throw axe()}}function qQ(i,e){return{op:0,value:i,factor:e}}function GQ(i,e){return{op:1,value:i,factor:e}}function $t(i,e){return{op:2,value:i,factor:e}}function Hv(...i){return{op:3,values:i}}function DEe(i,e,t){return{op:5,if:i,then:e,else:t}}function bV(i,e,t,n){return{op:4,value:i,background:e,factor:t,transparency:n}}function ac(i,e){if(i!==null){if(typeof i=="string")return i[0]==="#"?Z.fromHex(i):e.getColor(i);if(i instanceof Z)return i;if(typeof i=="object")return xEe(i,e)}}const KQ="vscode://schemas/workbench-colors";let ZQ=kn.as(ZL.JSONContribution);ZQ.registerSchema(KQ,fk.getColorSchema());const vV=new fi(()=>ZQ.notifySchemaChanged(KQ),200);fk.onDidChangeSchema(()=>{vV.isScheduled()||vV.schedule()});const LEe=V("editor.lineHighlightBackground",{dark:null,light:null,hc:null},_("lineHighlight","Background color for the highlight of line at the cursor position.")),wV=V("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hc:"#f38518"},_("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),kEe=V("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hc:null},_("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),AEe=V("editor.rangeHighlightBorder",{dark:null,light:null,hc:Is},_("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),EEe=V("editor.symbolHighlightBackground",{dark:zM,light:zM,hc:null},_("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),IEe=V("editor.symbolHighlightBorder",{dark:null,light:null,hc:Is},_("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),YQ=V("editorCursor.foreground",{dark:"#AEAFAD",light:Z.black,hc:Z.white},_("caret","Color of the editor cursor.")),TEe=V("editorCursor.background",null,_("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),qd=V("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hc:"#e3e4e229"},_("editorWhitespaces","Color of whitespace characters in the editor.")),_k=V("editorIndentGuide.background",{dark:qd,light:qd,hc:qd},_("editorIndentGuides","Color of the editor indentation guides.")),bk=V("editorIndentGuide.activeBackground",{dark:qd,light:qd,hc:qd},_("editorActiveIndentGuide","Color of the active editor indentation guides.")),QQ=V("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hc:Z.white},_("editorLineNumbers","Color of editor line numbers.")),lE=V("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hc:Is},_("editorActiveLineNumber","Color of editor active line number"),!1,_("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),NEe=V("editorLineNumber.activeForeground",{dark:lE,light:lE,hc:lE},_("editorActiveLineNumber","Color of editor active line number")),MEe=V("editorRuler.foreground",{dark:"#5A5A5A",light:Z.lightgrey,hc:Z.white},_("editorRuler","Color of the editor rulers."));V("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hc:"#999999"},_("editorCodeLensForeground","Foreground color of editor CodeLens"));const REe=V("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hc:"#0064001a"},_("editorBracketMatchBackground","Background color behind matching brackets")),OEe=V("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hc:Pi},_("editorBracketMatchBorder","Color for matching brackets boxes")),PEe=V("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hc:"#7f7f7f4d"},_("editorOverviewRulerBorder","Color of the overview ruler border.")),FEe=V("editorOverviewRuler.background",null,_("editorOverviewRulerBackground","Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.")),BEe=V("editorGutter.background",{dark:Ur,light:Ur,hc:Ur},_("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),VEe=V("editorUnnecessaryCode.border",{dark:null,light:null,hc:Z.fromHex("#fff").transparent(.8)},_("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),WEe=V("editorUnnecessaryCode.opacity",{dark:Z.fromHex("#000a"),light:Z.fromHex("#0007"),hc:null},_("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),XQ=V("editorGhostText.border",{dark:null,light:null,hc:Z.fromHex("#fff").transparent(.8)},_("editorGhostTextBorder","Border color of ghost text in the editor.")),JQ=V("editorGhostText.foreground",{dark:Z.fromHex("#ffffff56"),light:Z.fromHex("#0007"),hc:null},_("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),cE=new Z(new et(0,122,204,.6));V("editorOverviewRuler.rangeHighlightForeground",{dark:cE,light:cE,hc:cE},_("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const zEe=V("editorOverviewRuler.errorForeground",{dark:new Z(new et(255,18,18,.7)),light:new Z(new et(255,18,18,.7)),hc:new Z(new et(255,50,50,1))},_("overviewRuleError","Overview ruler marker color for errors.")),HEe=V("editorOverviewRuler.warningForeground",{dark:Oc,light:Oc,hc:mk},_("overviewRuleWarning","Overview ruler marker color for warnings.")),UEe=V("editorOverviewRuler.infoForeground",{dark:fa,light:fa,hc:G5},_("overviewRuleInfo","Overview ruler marker color for infos.")),eX=V("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hc:"#FFD700"},_("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),tX=V("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hc:"#DA70D6"},_("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),iX=V("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hc:"#87CEFA"},_("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),nX=V("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),sX=V("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),rX=V("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),$Ee=V("editorBracketHighlight.unexpectedBracket.foreground",{dark:new Z(new et(255,18,18,.8)),light:new Z(new et(255,18,18,.8)),hc:new Z(new et(255,50,50,1))},_("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),jEe=V("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),qEe=V("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),GEe=V("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),KEe=V("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),ZEe=V("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),YEe=V("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),QEe=V("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),XEe=V("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),JEe=V("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),eIe=V("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),tIe=V("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),iIe=V("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));Jt((i,e)=>{const t=i.getColor(Ur);t&&e.addRule(`.monaco-editor, .monaco-editor-background, .monaco-editor .inputarea.ime-input { background-color: ${t}; }`);const n=i.getColor(Jh);n&&e.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${n}; }`);const s=i.getColor(BEe);s&&e.addRule(`.monaco-editor .margin { background-color: ${s}; }`);const r=i.getColor(kEe);r&&e.addRule(`.monaco-editor .rangeHighlight { background-color: ${r}; }`);const o=i.getColor(AEe);o&&e.addRule(`.monaco-editor .rangeHighlight { border: 1px ${i.type==="hc"?"dotted":"solid"} ${o}; }`);const a=i.getColor(EEe);a&&e.addRule(`.monaco-editor .symbolHighlight { background-color: ${a}; }`);const l=i.getColor(IEe);l&&e.addRule(`.monaco-editor .symbolHighlight { border: 1px ${i.type==="hc"?"dotted":"solid"} ${l}; }`);const c=i.getColor(qd);c&&(e.addRule(`.monaco-editor .mtkw { color: ${c} !important; }`),e.addRule(`.monaco-editor .mtkz { color: ${c} !important; }`))});class nIe extends te{constructor(e){super(),this.textModel=e,this.colorProvider=new oX,this.onDidChangeEmitter=new z,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.onDidChangeOptions(t=>{this.colorizationOptions=e.getOptions().bracketPairColorizationOptions})),this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}getDecorationsInRange(e,t,n){if(t===void 0)return[];if(!this.colorizationOptions.enabled)return[];const s=new Array,r=this.textModel.bracketPairs.getBracketsInRange(e);for(const o of r)s.push({id:`bracket${o.range.toString()}-${o.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(o)},ownerId:0,range:o.range});return s}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new F(1,1,this.textModel.getLineCount(),1),e,t):[]}}class oX{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}Jt((i,e)=>{const t=[eX,tX,iX,nX,sX,rX],n=new oX;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${i.getColor($Ee)}; }`);let s=t.map(r=>i.getColor(r)).filter(r=>!!r).filter(r=>!r.isTransparent());for(let r=0;r<30;r++){const o=s[r%s.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(r)} { color: ${o}; }`)}});var sIe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},hE=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function rIe(){return new w2e}function oIe(i){const e=rIe();return e.acceptChunk(i),e.finish()}function yV(i,e){return(typeof i=="string"?oIe(i):i).create(e)}let Iy=0;const aIe=999,lIe=1e4;class cIe{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,n=0;do{let s=this._source.read();if(s===null)return this._eos=!0,t===0?null:e.join("");if(s.length>0&&(e[t++]=s,n+=s.length),n>=64*1024)return e.join("")}while(!0)}}const o_=()=>{throw new Error("Invalid change accessor")};class mc{constructor(){this._searchCanceledBrand=void 0}}mc.INSTANCE=new mc;function Ty(i){return i instanceof mc?null:i}let Gr=class Ya extends te{constructor(e,t,n,s=null,r,o,a){super(),this._undoRedoService=r,this._modeService=o,this._languageConfigurationService=a,this._onWillDispose=this._register(new z),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new fIe(d=>this.handleBeforeFireDecorationsChangedEvent(d))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeLanguage=this._register(new z),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new z),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new z),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidChangeOptions=this._register(new z),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new z),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeContentOrInjectedText=this._register(new z),this.onDidChangeContentOrInjectedText=this._onDidChangeContentOrInjectedText.event,this._eventEmitter=this._register(new gIe),this._backgroundTokenizationState=0,this._onBackgroundTokenizationStateChanged=this._register(new z),this.onBackgroundTokenizationStateChanged=this._onBackgroundTokenizationStateChanged.event,this._register(this._eventEmitter.fastEvent(d=>{this._onDidChangeContentOrInjectedText.fire(d.rawContentChangedEvent)})),Iy++,this.id="$model"+Iy,this.isForSimpleWidget=t.isForSimpleWidget,typeof s>"u"||s===null?this._associatedResource=We.parse("inmemory://model/"+Iy):this._associatedResource=s,this._attachedEditorCount=0;const{textBuffer:l,disposable:c}=yV(e,t.defaultEOL);this._buffer=l,this._bufferDisposable=c,this._options=Ya.resolveOptions(this._buffer,t);const h=this._buffer.getLineCount(),u=this._buffer.getValueLengthInRange(new F(1,1,h,this._buffer.getLineLength(h)+1),0);t.largeFileOptimizations?this._isTooLargeForTokenization=u>Ya.LARGE_FILE_SIZE_THRESHOLD||h>Ya.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=u>Ya.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this._isDisposing=!1,this._languageId=n||pu,this._languageRegistryListener=this._languageConfigurationService.onDidChange(d=>{d.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}),this._instanceId=JZ(Iy),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new CV,this._commandManager=new O5(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._tokens=new Er(this._modeService.languageIdCodec),this._tokens2=new W5(this._modeService.languageIdCodec),this._tokenization=new L2e(this,this._modeService.languageIdCodec),this._bracketPairColorizer=this._register(new X2e(this,this._languageConfigurationService)),this._decorationProvider=this._register(new nIe(this)),this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))}static resolveOptions(e,t){if(t.detectIndentation){const n=X7(e,t.tabSize,t.insertSpaces);return new HC({tabSize:n.tabSize,indentSize:n.tabSize,insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new HC({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}onDidChangeContentFast(e){return this._eventEmitter.fastEvent(t=>e(t.contentChangedEvent))}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}get bracketPairs(){return this._bracketPairColorizer}get backgroundTokenizationState(){return this._backgroundTokenizationState}handleTokenizationProgress(e){if(this._backgroundTokenizationState===2)return;const t=e?2:1;this._backgroundTokenizationState!==t&&(this._backgroundTokenizationState=t,this._onBackgroundTokenizationStateChanged.fire())}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this._isDisposing=!1;const e=new jp([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this._bracketPairColorizer.handleContentChanged(t),!this._isDisposing&&this._eventEmitter.fire(new qx(e,t))}setValue(e){if(this._assertNotDisposed(),e===null)return;const{textBuffer:t,disposable:n}=yV(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,s,r,o,a){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:s}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:r,isRedoing:o,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),s=this.getValueLengthInRange(n),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._tokens.flush(),this._tokens2.flush(),this._decorations=Object.create(null),this._decorationsTree=new CV,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Ud([new y2e],this._versionId,!1,!1),this._createContentChanged2(new F(1,1,r,o),0,s,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),s=this.getValueLengthInRange(n),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Ud([new x2e],this._versionId,!1,!1),this._createContentChanged2(new F(1,1,r,o),0,s,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,s=t.length;n<s;n++){const r=t[n],o=r.range,a=r.cachedAbsoluteStart-r.start,l=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),c=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);r.cachedAbsoluteStart=l,r.cachedAbsoluteEnd=c,r.cachedVersionId=e,r.start=l-a,r.end=c-a,bu(r)}}onBeforeAttached(){this._attachedEditorCount++,this._attachedEditorCount===1&&this._onDidChangeAttached.fire(void 0)}onBeforeDetached(){this._attachedEditorCount--,this._attachedEditorCount===0&&this._onDidChangeAttached.fire(void 0)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let s=1;s<=n;s++){const r=this._buffer.getLineLength(s);r>=lIe?t+=r:e+=r}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();let t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,n=typeof e.indentSize<"u"?e.indentSize:this._options.indentSize,s=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,r=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new HC({tabSize:t,indentSize:n,insertSpaces:s,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:r,bracketPairColorizationOptions:o});if(this._options.equals(a))return;let l=this._options.createChangeEvent(a);this._options=a,this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();let n=X7(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}static _normalizeIndentationFromWhitespace(e,t,n){let s=0;for(let o=0;o<e.length;o++)e.charAt(o)==="	"?s+=t:s++;let r="";if(!n){let o=Math.floor(s/t);s=s%t;for(let a=0;a<o;a++)r+="	"}for(let o=0;o<s;o++)r+=" ";return r}static normalizeIndentation(e,t,n){let s=Zs(e);return s===-1&&(s=e.length),Ya._normalizeIndentationFromWhitespace(e.substring(0,s),t,n)+e.substring(s)}normalizeIndentation(e){return this._assertNotDisposed(),Ya.normalizeIndentation(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(QZ.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(n=>({range:n.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();let t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();let t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),s=this.getValueInRange(n,e);return t?this._buffer.getBOM()+s:s}createSnapshot(e=!1){return new cIe(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),s=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+s:s}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,s=e.startColumn;let r=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),o=Math.floor(typeof s=="number"&&!isNaN(s)?s:1);if(r<1)r=1,o=1;else if(r>t)r=t,o=this.getLineMaxColumn(r);else if(o<=1)o=1;else{const u=this.getLineMaxColumn(r);o>=u&&(o=u)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),h=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,h=1;else if(c>t)c=t,h=this.getLineMaxColumn(c);else if(h<=1)h=1;else{const u=this.getLineMaxColumn(c);h>=u&&(h=u)}return n===r&&s===o&&a===c&&l===h&&e instanceof F&&!(e instanceof Ve)?e:new F(r,o,c,h)}_isValidPosition(e,t,n){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const s=this._buffer.getLineCount();if(e>s)return!1;if(t===1)return!0;const r=this.getLineMaxColumn(e);if(t>r)return!1;if(n===1){const o=this._buffer.getLineCharCode(e,t-2);if(_n(o))return!1}return!0}_validatePosition(e,t,n){const s=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),r=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),o=this._buffer.getLineCount();if(s<1)return new q(1,1);if(s>o)return new q(o,this.getLineMaxColumn(o));if(r<=1)return new q(s,1);const a=this.getLineMaxColumn(s);if(r>=a)return new q(s,a);if(n===1){const l=this._buffer.getLineCharCode(s,r-2);if(_n(l))return new q(s,r-1)}return new q(s,r)}validatePosition(e){return this._assertNotDisposed(),e instanceof q&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const n=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(n,s,0)||!this._isValidPosition(r,o,0))return!1;if(t===1){const a=s>1?this._buffer.getLineCharCode(n,s-2):0,l=o>1&&o<=this._buffer.getLineLength(r)?this._buffer.getLineCharCode(r,o-2):0,c=_n(a),h=_n(l);return!c&&!h}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof F&&!(e instanceof Ve)&&this._isValidRange(e,1))return e;const n=this._validatePosition(e.startLineNumber,e.startColumn,0),s=this._validatePosition(e.endLineNumber,e.endColumn,0),r=n.lineNumber,o=n.column,a=s.lineNumber,l=s.column;{const c=o>1?this._buffer.getLineCharCode(r,o-2):0,h=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,u=_n(c),d=_n(h);return!u&&!d?new F(r,o,a,l):r===a&&o===l?new F(r,o-1,a,l-1):u&&d?new F(r,o-1,a,l+1):u?new F(r,o-1,a,l):new F(r,o,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();let n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new F(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,s){return this._buffer.findMatchesLineByLine(e,t,n,s)}findMatches(e,t,n,s,r,o,a=aIe){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(u=>F.isIRange(u))&&(l=t.map(u=>this.validateRange(u)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((u,d)=>u.startLineNumber-d.startLineNumber||u.startColumn-d.startColumn);const c=[];c.push(l.reduce((u,d)=>F.areIntersecting(u,d)?u.plusRange(d):(c.push(u),d)));let h;if(!n&&e.indexOf(`
`)<0){const d=new nd(e,n,s,r).parseSearchRequest();if(!d)return[];h=f=>this.findMatchesLineByLine(f,d,o,a)}else h=u=>ky.findMatches(this,new nd(e,n,s,r),u,o,a);return c.map(h).reduce((u,d)=>u.concat(d),[])}findNextMatch(e,t,n,s,r,o){this._assertNotDisposed();const a=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){const c=new nd(e,n,s,r).parseSearchRequest();if(!c)return null;const h=this.getLineCount();let u=new F(a.lineNumber,a.column,h,this.getLineMaxColumn(h)),d=this.findMatchesLineByLine(u,c,o,1);return ky.findNextMatch(this,new nd(e,n,s,r),a,o),d.length>0||(u=new F(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),d=this.findMatchesLineByLine(u,c,o,1),d.length>0)?d[0]:null}return ky.findNextMatch(this,new nd(e,n,s,r),a,o)}findPreviousMatch(e,t,n,s,r,o){this._assertNotDisposed();const a=this.validatePosition(t);return ky.findPreviousMatch(this,new nd(e,n,s,r),a,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof MA?e:new MA(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let s=t.map(o=>({range:this.validateRange(o.range),text:o.text})),r=!0;if(e)for(let o=0,a=e.length;o<a;o++){let l=e[o],c=!1;for(let h=0,u=s.length;h<u;h++){let d=s[h].range,f=d.startLineNumber>l.endLineNumber,g=l.startLineNumber>d.endLineNumber;if(!f&&!g){c=!0;break}}if(!c){r=!1;break}}if(r)for(let o=0,a=this._trimAutoWhitespaceLines.length;o<a;o++){let l=this._trimAutoWhitespaceLines[o],c=this.getLineMaxColumn(l),h=!0;for(let u=0,d=s.length;u<d;u++){let f=s[u].range,g=s[u].text;if(!(l<f.startLineNumber||l>f.endLineNumber)&&!(l===f.startLineNumber&&f.startColumn===c&&f.isEmpty()&&g&&g.length>0&&g.charAt(0)===`
`)&&!(l===f.startLineNumber&&f.startColumn===1&&f.isEmpty()&&g&&g.length>0&&g.charAt(g.length-1)===`
`)){h=!1;break}}if(h){const u=new F(l,1,l,c);t.push(new MA(null,u,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n)}_applyUndo(e,t,n,s){const r=e.map(o=>{const a=this.getPositionAt(o.newPosition),l=this.getPositionAt(o.newEnd);return{range:new F(a.lineNumber,a.column,l.lineNumber,l.column),text:o.oldText}});this._applyUndoRedoEdits(r,t,!0,!1,n,s)}_applyRedo(e,t,n,s){const r=e.map(o=>{const a=this.getPositionAt(o.oldPosition),l=this.getPositionAt(o.oldEnd);return{range:new F(a.lineNumber,a.column,l.lineNumber,l.column),text:o.newText}});this._applyUndoRedoEdits(r,t,!1,!0,n,s)}_applyUndoRedoEdits(e,t,n,s,r,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=s,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(r)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),s=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),r=this._buffer.getLineCount(),o=s.changes;if(this._trimAutoWhitespaceLines=s.trimAutoWhitespaceLineNumbers,o.length!==0){for(let c=0,h=o.length;c<h;c++){const u=o[c],[d,f,g]=Im(u.text);this._tokens.acceptEdit(u.range,d,f),this._tokens2.acceptEdit(u.range,d,f,g,u.text.length>0?u.text.charCodeAt(0):0),this._decorationsTree.acceptReplace(u.rangeOffset,u.rangeLength,u.text.length,u.forceMoveMarkers)}let a=[];this._increaseVersionId();let l=n;for(let c=0,h=o.length;c<h;c++){const u=o[c],[d]=Im(u.text);this._onDidChangeDecorations.fire();const f=u.range.startLineNumber,g=u.range.endLineNumber,p=g-f,m=d,v=Math.min(p,m),b=m-p,w=r-l-b+f,y=w,x=w+m,k=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new q(y,1)),this.getOffsetAt(new q(x,this.getLineMaxColumn(x))),0),S=xa.fromDecorations(k),L=new fb(S);for(let D=v;D>=0;D--){const N=f+D,T=w+D;L.takeFromEndWhile(U=>U.lineNumber>T);const $=L.takeFromEndWhile(U=>U.lineNumber===T);a.push(new lV(N,this.getLineContent(T),$))}if(v<p){const D=f+v;a.push(new C2e(D+1,g))}if(v<m){const D=new fb(S),N=f+v,T=m-v,$=r-l-T+N+1;let U=[],ee=[];for(let ce=0;ce<T;ce++){let fe=$+ce;ee[ce]=this.getLineContent(fe),D.takeWhile(Ce=>Ce.lineNumber<fe),U[ce]=D.takeWhile(Ce=>Ce.lineNumber===fe)}a.push(new S2e(N+1,f+m,ee,U))}l+=b}this._emitContentChangedEvent(new Ud(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return s.reverseEdits===null?void 0:s.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const n=[...e].map(s=>new lV(s,this.getLineContent(s),this._getInjectedTextInLine(s)));this._onDidChangeContentOrInjectedText.fire(new LQ(n))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){let n={addDecoration:(r,o)=>this._deltaDecorationsImpl(e,[],[{range:r,options:o}])[0],changeDecoration:(r,o)=>{this._changeDecorationImpl(r,o)},changeDecorationOptions:(r,o)=>{this._changeDecorationOptionsImpl(r,xV(o))},removeDecoration:r=>{this._deltaDecorationsImpl(e,[r],[])},deltaDecorations:(r,o)=>r.length===0&&o.length===0?[]:this._deltaDecorationsImpl(e,r,o)},s=null;try{s=t(n)}catch(r){Ke(r)}return n.addDecoration=o_,n.changeDecoration=o_,n.changeDecorationOptions=o_,n.removeDecoration=o_,n.deltaDecorations=o_,s}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const s=e?this._decorations[e]:null;if(!s)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:SV[n]}])[0]:null;if(!t)return this._decorationsTree.delete(s),delete this._decorations[s.id],null;const r=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),a=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);return this._decorationsTree.delete(s),s.reset(this.getVersionId(),o,a,r),s.setOptions(SV[n]),this._decorationsTree.insert(s),s.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,s=t.length;n<s;n++){const r=t[n];this._decorationsTree.delete(r),delete this._decorations[r.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,s=!1){let r=this.getLineCount(),o=Math.min(r,Math.max(1,e)),a=Math.min(r,Math.max(1,t)),l=this.getLineMaxColumn(a);const c=new F(o,1,a,l),h=this._getDecorationsInRange(c,n,s);return h.push(...this._decorationProvider.getDecorationsInRange(c,n,s)),h}getDecorationsInRange(e,t=0,n=!1){let s=this.validateRange(e);const r=this._getDecorationsInRange(s,t,n);return r.push(...this._decorationProvider.getDecorationsInRange(s,t,n)),r}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),s=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return xa.fromDecorations(s).filter(r=>r.lineNumber===e)}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}_getDecorationsInRange(e,t,n){const s=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),r=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,s,r,t,n)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;if(n.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(n.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const s=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),o=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),r,o,s),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.startLineNumber)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const s=!!(n.options.overviewRuler&&n.options.overviewRuler.color),r=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){const o=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.endLineNumber)}if(n.options.before||t.before){const o=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.startLineNumber)}s!==r?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n){const s=this.getVersionId(),r=t.length;let o=0;const a=n.length;let l=0,c=new Array(a);for(;o<r||l<a;){let h=null;if(o<r){do h=this._decorations[t[o++]];while(!h&&o<r);if(h){if(h.options.after){const u=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(u.endLineNumber)}if(h.options.before){const u=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(u.startLineNumber)}this._decorationsTree.delete(h),this._onDidChangeDecorations.checkAffectedAndFire(h.options)}}if(l<a){if(!h){const m=++this._lastDecorationId,v=`${this._instanceId};${m}`;h=new CQ(v,0,0),this._decorations[v]=h}const u=n[l],d=this._validateRangeRelaxedNoAllocations(u.range),f=xV(u.options),g=this._buffer.getOffsetAt(d.startLineNumber,d.startColumn),p=this._buffer.getOffsetAt(d.endLineNumber,d.endColumn);h.ownerId=e,h.reset(s,g,p,d),h.setOptions(f),h.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.endLineNumber),h.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(f),this._decorationsTree.insert(h),c[l]=h.id,l++}else h&&delete this._decorations[h.id]}return c}setTokens(e,t=!1){if(e.length!==0){let n=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];let a=0,l=0,c=!1;for(let h=0,u=o.tokens.length;h<u;h++){const d=o.startLineNumber+h;c?(this._tokens.setTokens(this._languageId,d-1,this._buffer.getLineLength(d),o.tokens[h],!1),l=d):this._tokens.setTokens(this._languageId,d-1,this._buffer.getLineLength(d),o.tokens[h],!0)&&(c=!0,a=d,l=d)}c&&n.push({fromLineNumber:a,toLineNumber:l})}n.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:n})}this.handleTokenizationProgress(t)}setSemanticTokens(e,t){this._tokens2.set(e,t),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]})}hasCompleteSemanticTokens(){return this._tokens2.isComplete()}hasSomeSemanticTokens(){return!this._tokens2.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._tokens2.setPartial(e,t);this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}tokenizeViewport(e,t){e=Math.max(1,e),t=Math.min(this._buffer.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._isDisposing||this._onDidChangeTokens.fire(e)}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){const t=this.getLineContent(e),n=this._tokens.getTokens(this._languageId,e-1,t);return this._tokens2.addSemanticTokens(e,n)}getLanguageId(){return this._languageId}setMode(e){if(this._languageId===e)return;let t={oldLanguage:this._languageId,newLanguage:e};this._languageId=e,this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}getLanguageIdAtPosition(e,t){const n=this.validatePosition(new q(e,t)),s=this.getLineTokens(n.lineNumber);return s.getLanguageId(s.findTokenIndexAtOffset(n.column-1))}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}getWordAtPosition(e){this._assertNotDisposed();const t=this.validatePosition(e),n=this.getLineContent(t.lineNumber),s=this._getLineTokens(t.lineNumber),r=s.findTokenIndexAtOffset(t.column-1),[o,a]=Ya._findLanguageBoundaries(s,r),l=lx(t.column,this.getLanguageConfiguration(s.getLanguageId(r)).getWordDefinition(),n.substring(o,a),o);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(r>0&&o===t.column-1){const[c,h]=Ya._findLanguageBoundaries(s,r-1),u=lx(t.column,this.getLanguageConfiguration(s.getLanguageId(r-1)).getWordDefinition(),n.substring(c,h),c);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn)return u}return null}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let s=0;for(let o=t;o>=0&&e.getLanguageId(o)===n;o--)s=e.getStartOffset(o);let r=e.getLineContent().length;for(let o=t,a=e.getCount();o<a&&e.getLanguageId(o)===n;o++)r=e.getEndOffset(o);return[s,r]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}findMatchingBracketUp(e,t){let n=e.toLowerCase(),s=this.validatePosition(t),r=this._getLineTokens(s.lineNumber),o=r.getLanguageId(r.findTokenIndexAtOffset(s.column-1)),a=this.getLanguageConfiguration(o).brackets;if(!a)return null;let l=a.textIsBracket[n];return l?Ty(this._findMatchingBracketUp(l,s,null)):null}matchBracket(e){return this._matchBracket(this.validatePosition(e))}_establishBracketSearchOffsets(e,t,n,s){const r=t.getCount(),o=t.getLanguageId(s);let a=Math.max(0,e.column-1-n.maxBracketLength);for(let c=s-1;c>=0;c--){const h=t.getEndOffset(c);if(h<=a)break;if(Za(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){a=h;break}}let l=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let c=s+1;c<r;c++){const h=t.getStartOffset(c);if(h>=l)break;if(Za(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){l=h;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e){const t=e.lineNumber,n=this._getLineTokens(t),s=this._buffer.getLineContent(t),r=n.findTokenIndexAtOffset(e.column-1);if(r<0)return null;const o=this.getLanguageConfiguration(n.getLanguageId(r)).brackets;if(o&&!Za(n.getStandardTokenType(r))){let{searchStartOffset:a,searchEndOffset:l}=this._establishBracketSearchOffsets(e,n,o,r),c=null;for(;;){const h=oo.findNextBracketInRange(o.forwardRegex,t,s,a,l);if(!h)break;if(h.startColumn<=e.column&&e.column<=h.endColumn){const u=s.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),d=this._matchFoundBracket(h,o.textIsBracket[u],o.textIsOpenBracket[u],null);if(d){if(d instanceof mc)return null;c=d}}a=h.endColumn-1}if(c)return c}if(r>0&&n.getStartOffset(r)===e.column-1){const a=r-1,l=this.getLanguageConfiguration(n.getLanguageId(a)).brackets;if(l&&!Za(n.getStandardTokenType(a))){let{searchStartOffset:c,searchEndOffset:h}=this._establishBracketSearchOffsets(e,n,l,a);const u=oo.findPrevBracketInRange(l.reversedRegex,t,s,c,h);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn){const d=s.substring(u.startColumn-1,u.endColumn-1).toLowerCase(),f=this._matchFoundBracket(u,l.textIsBracket[d],l.textIsOpenBracket[d],null);if(f)return f instanceof mc?null:f}}}return null}_matchFoundBracket(e,t,n,s){if(!t)return null;const r=n?this._findMatchingBracketDown(t,e.getEndPosition(),s):this._findMatchingBracketUp(t,e.getStartPosition(),s);return r?r instanceof mc?r:[e,r]:null}_findMatchingBracketUp(e,t,n){const s=e.languageId,r=e.reversedRegex;let o=-1,a=0;const l=(c,h,u,d)=>{for(;;){if(n&&++a%100===0&&!n())return mc.INSTANCE;const f=oo.findPrevBracketInRange(r,c,h,u,d);if(!f)break;const g=h.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(e.isOpen(g)?o++:e.isClose(g)&&o--,o===0)return f;d=f.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const h=this._getLineTokens(c),u=h.getCount(),d=this._buffer.getLineContent(c);let f=u-1,g=d.length,p=d.length;c===t.lineNumber&&(f=h.findTokenIndexAtOffset(t.column-1),g=t.column-1,p=t.column-1);let m=!0;for(;f>=0;f--){const v=h.getLanguageId(f)===s&&!Za(h.getStandardTokenType(f));if(v)m?g=h.getStartOffset(f):(g=h.getStartOffset(f),p=h.getEndOffset(f));else if(m&&g!==p){const b=l(c,d,g,p);if(b)return b}m=v}if(m&&g!==p){const v=l(c,d,g,p);if(v)return v}}return null}_findMatchingBracketDown(e,t,n){const s=e.languageId,r=e.forwardRegex;let o=1,a=0;const l=(h,u,d,f)=>{for(;;){if(n&&++a%100===0&&!n())return mc.INSTANCE;const g=oo.findNextBracketInRange(r,h,u,d,f);if(!g)break;const p=u.substring(g.startColumn-1,g.endColumn-1).toLowerCase();if(e.isOpen(p)?o++:e.isClose(p)&&o--,o===0)return g;d=g.endColumn-1}return null},c=this.getLineCount();for(let h=t.lineNumber;h<=c;h++){const u=this._getLineTokens(h),d=u.getCount(),f=this._buffer.getLineContent(h);let g=0,p=0,m=0;h===t.lineNumber&&(g=u.findTokenIndexAtOffset(t.column-1),p=t.column-1,m=t.column-1);let v=!0;for(;g<d;g++){const b=u.getLanguageId(g)===s&&!Za(u.getStandardTokenType(g));if(b)v||(p=u.getStartOffset(g)),m=u.getEndOffset(g);else if(v&&p!==m){const w=l(h,f,p,m);if(w)return w}v=b}if(v&&p!==m){const b=l(h,f,p,m);if(b)return b}}return null}findPrevBracket(e){const t=this.validatePosition(e);let n=null,s=null;for(let r=t.lineNumber;r>=1;r--){const o=this._getLineTokens(r),a=o.getCount(),l=this._buffer.getLineContent(r);let c=a-1,h=l.length,u=l.length;if(r===t.lineNumber){c=o.findTokenIndexAtOffset(t.column-1),h=t.column-1,u=t.column-1;const f=o.getLanguageId(c);n!==f&&(n=f,s=this.getLanguageConfiguration(n).brackets)}let d=!0;for(;c>=0;c--){const f=o.getLanguageId(c);if(n!==f){if(s&&d&&h!==u){const p=oo.findPrevBracketInRange(s.reversedRegex,r,l,h,u);if(p)return this._toFoundBracket(s,p);d=!1}n=f,s=this.getLanguageConfiguration(n).brackets}const g=!!s&&!Za(o.getStandardTokenType(c));if(g)d?h=o.getStartOffset(c):(h=o.getStartOffset(c),u=o.getEndOffset(c));else if(s&&d&&h!==u){const p=oo.findPrevBracketInRange(s.reversedRegex,r,l,h,u);if(p)return this._toFoundBracket(s,p)}d=g}if(s&&d&&h!==u){const f=oo.findPrevBracketInRange(s.reversedRegex,r,l,h,u);if(f)return this._toFoundBracket(s,f)}}return null}findNextBracket(e){const t=this.validatePosition(e),n=this.getLineCount();let s=null,r=null;for(let o=t.lineNumber;o<=n;o++){const a=this._getLineTokens(o),l=a.getCount(),c=this._buffer.getLineContent(o);let h=0,u=0,d=0;if(o===t.lineNumber){h=a.findTokenIndexAtOffset(t.column-1),u=t.column-1,d=t.column-1;const g=a.getLanguageId(h);s!==g&&(s=g,r=this.getLanguageConfiguration(s).brackets)}let f=!0;for(;h<l;h++){const g=a.getLanguageId(h);if(s!==g){if(r&&f&&u!==d){const m=oo.findNextBracketInRange(r.forwardRegex,o,c,u,d);if(m)return this._toFoundBracket(r,m);f=!1}s=g,r=this.getLanguageConfiguration(s).brackets}const p=!!r&&!Za(a.getStandardTokenType(h));if(p)f||(u=a.getStartOffset(h)),d=a.getEndOffset(h);else if(r&&f&&u!==d){const m=oo.findNextBracketInRange(r.forwardRegex,o,c,u,d);if(m)return this._toFoundBracket(r,m)}f=p}if(r&&f&&u!==d){const g=oo.findNextBracketInRange(r.forwardRegex,o,c,u,d);if(g)return this._toFoundBracket(r,g)}}return null}findEnclosingBrackets(e,t){let n;if(typeof t>"u")n=null;else{const f=Date.now();n=()=>Date.now()-f<=t}const s=this.validatePosition(e),r=this.getLineCount(),o=new Map;let a=[];const l=(f,g)=>{if(!o.has(f)){let p=[];for(let m=0,v=g?g.brackets.length:0;m<v;m++)p[m]=0;o.set(f,p)}a=o.get(f)};let c=0;const h=(f,g,p,m,v)=>{for(;;){if(n&&++c%100===0&&!n())return mc.INSTANCE;const b=oo.findNextBracketInRange(f.forwardRegex,g,p,m,v);if(!b)break;const w=p.substring(b.startColumn-1,b.endColumn-1).toLowerCase(),y=f.textIsBracket[w];if(y&&(y.isOpen(w)?a[y.index]++:y.isClose(w)&&a[y.index]--,a[y.index]===-1))return this._matchFoundBracket(b,y,!1,n);m=b.endColumn-1}return null};let u=null,d=null;for(let f=s.lineNumber;f<=r;f++){const g=this._getLineTokens(f),p=g.getCount(),m=this._buffer.getLineContent(f);let v=0,b=0,w=0;if(f===s.lineNumber){v=g.findTokenIndexAtOffset(s.column-1),b=s.column-1,w=s.column-1;const x=g.getLanguageId(v);u!==x&&(u=x,d=this.getLanguageConfiguration(u).brackets,l(u,d))}let y=!0;for(;v<p;v++){const x=g.getLanguageId(v);if(u!==x){if(d&&y&&b!==w){const S=h(d,f,m,b,w);if(S)return Ty(S);y=!1}u=x,d=this.getLanguageConfiguration(u).brackets,l(u,d)}const k=!!d&&!Za(g.getStandardTokenType(v));if(k)y||(b=g.getStartOffset(v)),w=g.getEndOffset(v);else if(d&&y&&b!==w){const S=h(d,f,m,b,w);if(S)return Ty(S)}y=k}if(d&&y&&b!==w){const x=h(d,f,m,b,w);if(x)return Ty(x)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.getValueInRange(t);n=n.toLowerCase();let s=e.textIsBracket[n];return s?{range:t,open:s.open,close:s.close,isOpen:e.textIsOpenBracket[n]}:null}static computeIndentLevel(e,t){let n=0,s=0,r=e.length;for(;s<r;){let o=e.charCodeAt(s);if(o===32)n++;else if(o===9)n=n-n%t+t;else break;s++}return s===r?-1:n}_computeIndentLevel(e){return Ya.computeIndentLevel(this._buffer.getLineContent(e+1),this._options.tabSize)}getActiveIndentGuide(e,t,n){this._assertNotDisposed();const s=this.getLineCount();if(e<1||e>s)throw new Error("Illegal value for lineNumber");const r=this.getLanguageConfiguration(this._languageId).foldingRules,o=!!(r&&r.offSide);let a=-2,l=-1,c=-2,h=-1;const u=S=>{if(a!==-1&&(a===-2||a>S-1)){a=-1,l=-1;for(let L=S-2;L>=0;L--){let D=this._computeIndentLevel(L);if(D>=0){a=L,l=D;break}}}if(c===-2){c=-1,h=-1;for(let L=S;L<s;L++){let D=this._computeIndentLevel(L);if(D>=0){c=L,h=D;break}}}};let d=-2,f=-1,g=-2,p=-1;const m=S=>{if(d===-2){d=-1,f=-1;for(let L=S-2;L>=0;L--){let D=this._computeIndentLevel(L);if(D>=0){d=L,f=D;break}}}if(g!==-1&&(g===-2||g<S-1)){g=-1,p=-1;for(let L=S;L<s;L++){let D=this._computeIndentLevel(L);if(D>=0){g=L,p=D;break}}}};let v=0,b=!0,w=0,y=!0,x=0,k=0;for(let S=0;b||y;S++){const L=e-S,D=e+S;S>1&&(L<1||L<t)&&(b=!1),S>1&&(D>s||D>n)&&(y=!1),S>5e4&&(b=!1,y=!1);let N=-1;if(b){const $=this._computeIndentLevel(L-1);$>=0?(c=L-1,h=$,N=Math.ceil($/this._options.indentSize)):(u(L),N=this._getIndentLevelForWhitespaceLine(o,l,h))}let T=-1;if(y){const $=this._computeIndentLevel(D-1);$>=0?(d=D-1,f=$,T=Math.ceil($/this._options.indentSize)):(m(D),T=this._getIndentLevelForWhitespaceLine(o,f,p))}if(S===0){k=N;continue}if(S===1){if(D<=s&&T>=0&&k+1===T){b=!1,v=D,w=D,x=T;continue}if(L>=1&&N>=0&&N-1===k){y=!1,v=L,w=L,x=N;continue}if(v=e,w=e,x=k,x===0)return{startLineNumber:v,endLineNumber:w,indent:x}}b&&(N>=x?v=L:b=!1),y&&(T>=x?w=D:y=!1)}return{startLineNumber:v,endLineNumber:w,indent:x}}getLinesBracketGuides(e,t,n,s){var r,o,a,l,c;const h=[],u=this._bracketPairColorizer.getBracketPairsInRangeWithMinIndentation(new F(e,1,t,this.getLineMaxColumn(t)));let d;if(n&&u.length>0){const v=e<=n.lineNumber&&n.lineNumber<=t?u.filter(b=>b.range.containsPosition(n)):this._bracketPairColorizer.getBracketPairsInRange(F.fromPositions(n));d=(r=JDe(v,b=>b.range.startLineNumber!==b.range.endLineNumber))===null||r===void 0?void 0:r.range}const f=new fb(u),g=new Array,p=new Array,m=new aX;for(let v=e;v<=t;v++){let b=new Array;p.length>0&&(b=b.concat(p),p.length=0),h.push(b);for(const y of f.takeWhile(x=>x.openingBracketRange.startLineNumber<=v)||[]){if(y.range.startLineNumber===y.range.endLineNumber)continue;const x=Math.min(this.getVisibleColumnFromPosition(y.openingBracketRange.getStartPosition()),this.getVisibleColumnFromPosition((a=(o=y.closingBracketRange)===null||o===void 0?void 0:o.getStartPosition())!==null&&a!==void 0?a:y.range.getEndPosition()),y.minVisibleColumnIndentation+1);let k=!1;y.closingBracketRange&&Zs(this.getLineContent(y.closingBracketRange.startLineNumber))<y.closingBracketRange.startColumn-1&&(k=!0);const S=y.openingBracketRange.getStartPosition(),L=(c=(l=y.closingBracketRange)===null||l===void 0?void 0:l.getStartPosition())!==null&&c!==void 0?c:y.range.getEndPosition();y.closingBracketRange===void 0?g[y.nestingLevel]=null:g[y.nestingLevel]={nestingLevel:y.nestingLevel,guideVisibleColumn:x,start:S,visibleStartColumn:this.getVisibleColumnFromPosition(S),end:L,visibleEndColumn:this.getVisibleColumnFromPosition(L),bracketPair:y,renderHorizontalEndLineAtTheBottom:k}}for(const y of g){if(!y)continue;const x=d&&y.bracketPair.range.equalsRange(d),k=m.getInlineClassNameOfLevel(y.nestingLevel)+(s.highlightActive&&x?" "+m.activeClassName:"");(x&&s.horizontalGuides!==Hd.Disabled||s.includeInactive&&s.horizontalGuides===Hd.Enabled)&&(y.start.lineNumber===v&&y.guideVisibleColumn<y.visibleStartColumn&&b.push(new up(y.guideVisibleColumn,k,new hM(!1,y.start.column))),y.end.lineNumber===v+1&&y.guideVisibleColumn<y.visibleEndColumn&&p.push(new up(y.guideVisibleColumn,k,new hM(!y.renderHorizontalEndLineAtTheBottom,y.end.column))))}let w=Number.MAX_SAFE_INTEGER;for(let y=g.length-1;y>=0;y--){const x=g[y];if(!x)continue;const k=s.highlightActive&&d&&x.bracketPair.range.equalsRange(d),S=m.getInlineClassNameOfLevel(x.nestingLevel)+(k?" "+m.activeClassName:"");(k||s.includeInactive)&&x.renderHorizontalEndLineAtTheBottom&&x.end.lineNumber===v+1&&p.push(new up(x.guideVisibleColumn,S,null)),!(x.end.lineNumber<=v||x.start.lineNumber>=v)&&(x.guideVisibleColumn>=w&&!k||(w=x.guideVisibleColumn,(k||s.includeInactive)&&b.push(new up(x.guideVisibleColumn,S,null))))}b.sort((y,x)=>y.visibleColumn-x.visibleColumn)}return h}getVisibleColumnFromPosition(e){return At.visibleColumnFromColumn(this.getLineContent(e.lineNumber),e.column,this._options.tabSize)+1}getLinesIndentGuides(e,t){this._assertNotDisposed();const n=this.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const s=this.getLanguageConfiguration(this._languageId).foldingRules,r=!!(s&&s.offSide);let o=new Array(t-e+1),a=-2,l=-1,c=-2,h=-1;for(let u=e;u<=t;u++){let d=u-e;const f=this._computeIndentLevel(u-1);if(f>=0){a=u-1,l=f,o[d]=Math.ceil(f/this._options.indentSize);continue}if(a===-2){a=-1,l=-1;for(let g=u-2;g>=0;g--){let p=this._computeIndentLevel(g);if(p>=0){a=g,l=p;break}}}if(c!==-1&&(c===-2||c<u-1)){c=-1,h=-1;for(let g=u;g<n;g++){let p=this._computeIndentLevel(g);if(p>=0){c=g,h=p;break}}}o[d]=this._getIndentLevelForWhitespaceLine(r,l,h)}return o}_getIndentLevelForWhitespaceLine(e,t,n){return t===-1||n===-1?0:t<n?1+Math.floor(t/this._options.indentSize):t===n?Math.ceil(n/this._options.indentSize):e?Math.ceil(n/this._options.indentSize):1+Math.floor(n/this._options.indentSize)}normalizePosition(e,t){return e}getLineIndentColumn(e){return hIe(this.getLineContent(e))+1}};Gr.MODEL_SYNC_LIMIT=50*1024*1024;Gr.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;Gr.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;Gr.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Kn.tabSize,indentSize:Kn.indentSize,insertSpaces:Kn.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Kn.trimAutoWhitespace,largeFileOptimizations:Kn.largeFileOptimizations,bracketPairColorizationOptions:Kn.bracketPairColorizationOptions};Gr=sIe([hE(4,Dw),hE(5,Os),hE(6,Cw)],Gr);function hIe(i){let e=0;for(const t of i)if(t===" "||t==="	")e++;else break;return e}class aX{constructor(){this.activeClassName="indent-active"}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}function uE(i){return!!(i.options.overviewRuler&&i.options.overviewRuler.color)}function dE(i){return!!i.options.after||!!i.options.before}class CV{constructor(){this._decorationsTree0=new XA,this._decorationsTree1=new XA,this._injectedTextDecorationsTree=new XA}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,s,r){const o=e.getVersionId(),a=this._intervalSearch(t,n,s,r,o);return this._ensureNodesHaveRanges(e,a)}_intervalSearch(e,t,n,s,r){const o=this._decorationsTree0.intervalSearch(e,t,n,s,r),a=this._decorationsTree1.intervalSearch(e,t,n,s,r),l=this._injectedTextDecorationsTree.intervalSearch(e,t,n,s,r);return o.concat(a).concat(l)}getInjectedTextInInterval(e,t,n,s){const r=e.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(t,n,s,!1,r);return this._ensureNodesHaveRanges(e,o).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const n=e.getVersionId(),s=this._injectedTextDecorationsTree.search(t,!1,n);return this._ensureNodesHaveRanges(e,s).filter(r=>r.options.showIfCollapsed||!r.range.isEmpty())}getAll(e,t,n,s){const r=e.getVersionId(),o=this._search(t,n,s,r);return this._ensureNodesHaveRanges(e,o)}_search(e,t,n,s){if(n)return this._decorationsTree1.search(e,t,s);{const r=this._decorationsTree0.search(e,t,s),o=this._decorationsTree1.search(e,t,s),a=this._injectedTextDecorationsTree.search(e,t,s);return r.concat(o).concat(a)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),s=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(s)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){dE(e)?this._injectedTextDecorationsTree.insert(e):uE(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){dE(e)?this._injectedTextDecorationsTree.delete(e):uE(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){dE(e)?this._injectedTextDecorationsTree.resolveNode(e,t):uE(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,s){this._decorationsTree0.acceptReplace(e,t,n,s),this._decorationsTree1.acceptReplace(e,t,n,s),this._injectedTextDecorationsTree.acceptReplace(e,t,n,s)}}function ch(i){return i.replace(/[^a-z0-9\-_]/gi," ")}class lX{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class uIe extends lX{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:Il.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;let n=e?t.getColor(e.id):null;return n?n.toString():""}}class dIe extends lX{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?Z.fromHex(e):t.getColor(e.id)}}class Uv{constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1}static from(e){return e instanceof Uv?e:new Uv(e)}}class lt{constructor(e){this.description=e.description,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?ch(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new uIe(e.overviewRuler):null,this.minimap=e.minimap?new dIe(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?ch(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?ch(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?ch(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?ch(e.marginClassName):null,this.inlineClassName=e.inlineClassName?ch(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?ch(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?ch(e.afterContentClassName):null,this.after=e.after?Uv.from(e.after):null,this.before=e.before?Uv.from(e.before):null}static register(e){return new lt(e)}static createDynamic(e){return new lt(e)}}lt.EMPTY=lt.register({description:"empty"});const SV=[lt.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),lt.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),lt.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),lt.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function xV(i){return i instanceof lt?i:lt.createDynamic(i)}class fIe extends te{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new z),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;if(this._deferredCnt--,this._deferredCnt===0){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);const t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(t)}(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}}class gIe extends te{constructor(){super(),this._fastEmitter=this._register(new z),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new z),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}const pIe=()=>!0,DV=()=>!1,mIe=i=>i===" "||i==="	";class go{constructor(e,t,n){this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const s=n.options,r=s.get(129);this.readOnly=s.get(80),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=s.get(103),this.lineHeight=s.get(58),this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=s.get(114),this.wordSeparators=s.get(115),this.emptySelectionClipboard=s.get(32),this.copyWithSyntaxHighlighting=s.get(21),this.multiCursorMergeOverlapping=s.get(68),this.multiCursorPaste=s.get(70),this.autoClosingBrackets=s.get(5),this.autoClosingQuotes=s.get(8),this.autoClosingDelete=s.get(6),this.autoClosingOvertype=s.get(7),this.autoSurround=s.get(11),this.autoIndent=s.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:go._getShouldAutoClose(e,this.autoClosingQuotes),bracket:go._getShouldAutoClose(e,this.autoClosingBrackets)},this.autoClosingPairs=Ii.getAutoClosingPairs(e);let o=go._getSurroundingPairs(e);if(o)for(const a of o)this.surroundingPairs[a.open]=a.close}static shouldRecreate(e){return e.hasChanged(129)||e.hasChanged(115)||e.hasChanged(32)||e.hasChanged(68)||e.hasChanged(70)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(114)||e.hasChanged(58)||e.hasChanged(80)}get electricChars(){if(!this._electricChars){this._electricChars={};let e=go._getElectricCharacters(this._languageId);if(e)for(const t of e)this._electricChars[t]=!0}return this._electricChars}normalizeIndentation(e){return Gr.normalizeIndentation(e,this.indentSize,this.insertSpaces)}static _getElectricCharacters(e){try{return Ii.getElectricCharacters(e)}catch(t){return Ke(t),null}}static _getShouldAutoClose(e,t){switch(t){case"beforeWhitespace":return mIe;case"languageDefined":return go._getLanguageDefinedShouldAutoClose(e);case"always":return pIe;case"never":return DV}}static _getLanguageDefinedShouldAutoClose(e){try{const t=Ii.getAutoCloseBeforeSet(e);return n=>t.indexOf(n)!==-1}catch(t){return Ke(t),DV}}static _getSurroundingPairs(e){try{return Ii.getSurroundingPairs(e)}catch(t){return Ke(t),null}}}class pn{constructor(e,t,n,s){this._singleCursorStateBrand=void 0,this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=t,this.position=n,this.leftoverVisibleColumns=s,this.selection=pn._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,s){return e?new pn(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new q(t,n),s):new pn(new F(t,n,t,n),s,new q(t,n),s)}static _computeSelection(e,t){let n,s,r,o;return e.isEmpty()?(n=e.startLineNumber,s=e.startColumn,r=t.lineNumber,o=t.column):t.isBeforeOrEqual(e.getStartPosition())?(n=e.endLineNumber,s=e.endColumn,r=t.lineNumber,o=t.column):(n=e.startLineNumber,s=e.startColumn,r=t.lineNumber,o=t.column),new Ve(n,s,r,o)}}class LV{constructor(e,t,n,s){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=s}}class _Ie{constructor(e){this.modelState=e,this.viewState=null}}class bIe{constructor(e){this.modelState=null,this.viewState=e}}class Qe{constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}static fromModelState(e){return new _Ie(e)}static fromViewState(e){return new bIe(e)}static fromModelSelection(e){const t=e.selectionStartLineNumber,n=e.selectionStartColumn,s=e.positionLineNumber,r=e.positionColumn,o=new pn(new F(t,n,t,n),0,new q(s,r),0);return Qe.fromModelState(o)}static fromModelSelections(e){let t=[];for(let n=0,s=e.length;n<s;n++)t[n]=this.fromModelSelection(e[n]);return t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class Hs{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}function ep(i){return i==="'"||i==='"'||i==="`"}class $v{static whitespaceVisibleColumn(e,t,n){const s=e.length;let r=0,o=-1,a=-1;for(let l=0;l<s;l++){if(l===t)return[o,a,r];switch(r%n===0&&(o=l,a=r),e.charCodeAt(l)){case 32:r+=1;break;case 9:r=At.nextRenderTabStop(r,n);break;default:return[-1,-1,-1]}}return t===s?[o,a,r]:[-1,-1,-1]}static atomicPosition(e,t,n,s){const r=e.length,[o,a,l]=$v.whitespaceVisibleColumn(e,t,n);if(l===-1)return-1;let c;switch(s){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%n===0)return t;c=l%n<=n/2;break}if(c){if(o===-1)return-1;let d=a;for(let f=o;f<r;++f){if(d===a+n)return o;switch(e.charCodeAt(f)){case 32:d+=1;break;case 9:d=At.nextRenderTabStop(d,n);break;default:return-1}}return d===a+n?o:-1}const h=At.nextRenderTabStop(l,n);let u=l;for(let d=t;d<r;d++){if(u===h)return d;switch(e.charCodeAt(d)){case 32:u+=1;break;case 9:u=At.nextRenderTabStop(u,n);break;default:return-1}}return u===h?r:-1}}class wh{constructor(e=null){this.hitTarget=e,this.type=0}}class $M{constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n,this.type=1}}var hd;(function(i){function e(t,n,s){const r=t.getPositionFromDOMInfo(n,s);return r?new $M(r,n,null):new wh(n)}i.createFromDOMInfo=e})(hd||(hd={}));class vIe{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class Go{constructor(e,t,n=0,s=null,r=null,o=null){this.element=e,this.type=t,this.mouseColumn=n,this.position=s,!r&&s&&(r=new F(s.lineNumber,s.column,s.lineNumber,s.column)),this.range=r,this.detail=o}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+e.detail}toString(){return Go.toString(this)}}class so{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}}class Mm{constructor(e,t,n){this.model=e.model;const s=e.configuration.options;this.layoutInfo=s.get(129),this.viewDomNode=t.viewDomNode,this.lineHeight=s.get(58),this.stickyTabStops=s.get(103),this.typicalHalfwidthCharacterWidth=s.get(43).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return Mm.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){const s=n.verticalOffset+n.height/2,r=e.model.getLineCount();let o=null,a,l=null;return n.afterLineNumber!==r&&(l=new q(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(o=new q(n.afterLineNumber,e.model.getLineMaxColumn(n.afterLineNumber))),l===null?a=o:o===null?a=l:t<s?a=o:a=l,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:o,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const s=this._context.model.getLineCount(),r=this._context.model.getLineMaxColumn(s);return{range:new F(s,r,s,r),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.model.getLineMaxColumn(t);return{range:new F(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return Mm._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class wIe{constructor(e,t,n){this.editorPos=t,this.pos=n,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+n.y-t.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+n.x-t.x-e.layoutInfo.contentLeft,this.isInMarginArea=n.x-t.x<e.layoutInfo.contentLeft&&n.x-t.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,En._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class Y5 extends wIe{constructor(e,t,n,s){super(e,t,n),this._ctx=e,s?(this.target=s,this.targetPath=Nl.collect(s,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}fulfill(e,t=null,n=null,s=null){let r=this.mouseColumn;return t&&t.column<this._ctx.model.getLineMaxColumn(t.lineNumber)&&(r=At.visibleColumnFromColumn(this._ctx.model.getLineContent(t.lineNumber),t.column,this._ctx.model.getTextModelOptions().tabSize)+1),new Go(this.target,e,r,t,n,s)}withTarget(e){return new Y5(this._ctx,this.editorPos,this.pos,e)}}const kV={isAfterLines:!0};function fE(i){return{isAfterLines:!1,horizontalDistanceToText:i}}class En{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,n=Nl.collect(t,this._viewHelper.viewDomNode);return!!(so.isChildOfContentWidgets(n)||so.isChildOfOverflowingContentWidgets(n)||so.isChildOfOverlayWidgets(n))}createMouseTarget(e,t,n,s){const r=new Mm(this._context,this._viewHelper,e),o=new Y5(r,t,n,s);try{return En._createMouseTarget(r,o,!1)}catch{return o.fulfill(0)}}static _createMouseTarget(e,t,n){if(t.target===null){if(n)return t.fulfill(0);const o=En._doHitTest(e,t);return o.type===1?En.createMouseTargetFromHitTestPosition(e,t,o.spanNode,o.position,o.injectedText):this._createMouseTarget(e,t.withTarget(o.hitTarget),!0)}const s=t;let r=null;return r=r||En._hitTestContentWidget(e,s),r=r||En._hitTestOverlayWidget(e,s),r=r||En._hitTestMinimap(e,s),r=r||En._hitTestScrollbarSlider(e,s),r=r||En._hitTestViewZone(e,s),r=r||En._hitTestMargin(e,s),r=r||En._hitTestViewCursor(e,s),r=r||En._hitTestTextArea(e,s),r=r||En._hitTestViewLines(e,s,n),r=r||En._hitTestScrollbar(e,s),r||t.fulfill(0)}static _hitTestContentWidget(e,t){if(so.isChildOfContentWidgets(t.targetPath)||so.isChildOfOverflowingContentWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfill(9,null,null,n):t.fulfill(0)}return null}static _hitTestOverlayWidget(e,t){if(so.isChildOfOverlayWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfill(12,null,null,n):t.fulfill(0)}return null}static _hitTestViewCursor(e,t){if(t.target){const n=e.lastRenderData.lastViewCursorsRenderData;for(const s of n)if(t.target===s.domNode)return t.fulfill(6,s.position,null,{mightBeForeignElement:!1})}if(t.isInContentArea){const n=e.lastRenderData.lastViewCursorsRenderData,s=t.mouseContentHorizontalOffset,r=t.mouseVerticalOffset;for(const o of n){if(s<o.contentLeft||s>o.contentLeft+o.width)continue;const a=e.getVerticalOffsetForLineNumber(o.position.lineNumber);if(a<=r&&r<=a+o.height)return t.fulfill(6,o.position,null,{mightBeForeignElement:!1})}}return null}static _hitTestViewZone(e,t){const n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){const s=t.isInContentArea?8:5;return t.fulfill(s,n.position,null,n)}return null}static _hitTestTextArea(e,t){return so.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfill(6,e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1}):t.fulfill(1,e.lastRenderData.lastTextareaPosition):null}static _hitTestMargin(e,t){if(t.isInMarginArea){const n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),s=n.range.getStartPosition();let r=Math.abs(t.pos.x-t.editorPos.x);const o={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:r};return r-=e.layoutInfo.glyphMarginLeft,r<=e.layoutInfo.glyphMarginWidth?t.fulfill(2,s,n.range,o):(r-=e.layoutInfo.glyphMarginWidth,r<=e.layoutInfo.lineNumbersWidth?t.fulfill(3,s,n.range,o):(r-=e.layoutInfo.lineNumbersWidth,t.fulfill(4,s,n.range,o)))}return null}static _hitTestViewLines(e,t,n){if(!so.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfill(7,new q(1,1),null,kV);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const r=e.model.getLineCount(),o=e.model.getLineMaxColumn(r);return t.fulfill(7,new q(r,o),null,kV)}if(n){if(so.isStrictChildOfViewLines(t.targetPath)){const r=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.model.getLineLength(r)===0){const a=e.getLineWidth(r),l=fE(t.mouseContentHorizontalOffset-a);return t.fulfill(7,new q(r,1),null,l)}const o=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>=o){const a=fE(t.mouseContentHorizontalOffset-o),l=new q(r,e.model.getLineMaxColumn(r));return t.fulfill(7,l,null,a)}}return t.fulfill(0)}const s=En._doHitTest(e,t);return s.type===1?En.createMouseTargetFromHitTestPosition(e,t,s.spanNode,s.position,s.injectedText):this._createMouseTarget(e,t.withTarget(s.hitTarget),!0)}static _hitTestMinimap(e,t){if(so.isChildOfMinimap(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.model.getLineMaxColumn(n);return t.fulfill(11,new q(n,s))}return null}static _hitTestScrollbarSlider(e,t){if(so.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.model.getLineMaxColumn(s);return t.fulfill(11,new q(s,r))}}return null}static _hitTestScrollbar(e,t){if(so.isChildOfScrollableElement(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.model.getLineMaxColumn(n);return t.fulfill(11,new q(n,s))}return null}getMouseColumn(e,t){const n=this._context.configuration.options,s=n.get(129),r=this._context.viewLayout.getCurrentScrollLeft()+t.x-e.x-s.contentLeft;return En._getMouseColumn(r,n.get(43).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,s,r){const o=s.lineNumber,a=s.column,l=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>l){const m=fE(t.mouseContentHorizontalOffset-l);return t.fulfill(7,s,null,m)}const c=e.visibleRangeForPosition(o,a);if(!c)return t.fulfill(0,s);const h=c.left;if(t.mouseContentHorizontalOffset===h)return t.fulfill(6,s,null,{mightBeForeignElement:!!r});const u=[];if(u.push({offset:c.left,column:a}),a>1){const m=e.visibleRangeForPosition(o,a-1);m&&u.push({offset:m.left,column:a-1})}const d=e.model.getLineMaxColumn(o);if(a<d){const m=e.visibleRangeForPosition(o,a+1);m&&u.push({offset:m.left,column:a+1})}u.sort((m,v)=>m.offset-v.offset);const f=t.pos.toClientCoordinates(),g=n.getBoundingClientRect(),p=g.left<=f.clientX&&f.clientX<=g.right;for(let m=1;m<u.length;m++){const v=u[m-1],b=u[m];if(v.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=b.offset){const w=new F(o,v.column,o,b.column);return t.fulfill(6,s,w,{mightBeForeignElement:!p||!!r})}}return t.fulfill(6,s,null,{mightBeForeignElement:!p||!!r})}static _doHitTestWithCaretRangeFromPoint(e,t){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.getVerticalOffsetForLineNumber(n)+Math.floor(e.lineHeight/2);let o=t.pos.y+(r-t.mouseVerticalOffset);o<=t.editorPos.y&&(o=t.editorPos.y+1),o>=t.editorPos.y+e.layoutInfo.height&&(o=t.editorPos.y+e.layoutInfo.height-1);const a=new R5(t.pos.x,o),l=this._actualDoHitTestWithCaretRangeFromPoint(e,a.toClientCoordinates());return l.type===1?l:this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const n=C0(e.viewDomNode);let s;if(n?typeof n.caretRangeFromPoint>"u"?s=yIe(n,t.clientX,t.clientY):s=n.caretRangeFromPoint(t.clientX,t.clientY):s=document.caretRangeFromPoint(t.clientX,t.clientY),!s||!s.startContainer)return new wh;const r=s.startContainer;if(r.nodeType===r.TEXT_NODE){const o=r.parentNode,a=o?o.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===cl.CLASS_NAME?hd.createFromDOMInfo(e,o,s.startOffset):new wh(r.parentNode)}else if(r.nodeType===r.ELEMENT_NODE){const o=r.parentNode,a=o?o.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===cl.CLASS_NAME?hd.createFromDOMInfo(e,r,r.textContent.length):new wh(r)}return new wh}static _doHitTestWithCaretPositionFromPoint(e,t){const n=document.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const s=n.offsetNode.parentNode,r=s?s.parentNode:null,o=r?r.parentNode:null;return(o&&o.nodeType===o.ELEMENT_NODE?o.className:null)===cl.CLASS_NAME?hd.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new wh(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const s=n.offsetNode.parentNode,r=s&&s.nodeType===s.ELEMENT_NODE?s.className:null,o=s?s.parentNode:null,a=o&&o.nodeType===o.ELEMENT_NODE?o.className:null;if(r===cl.CLASS_NAME){const l=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(l)return hd.createFromDOMInfo(e,l,0)}else if(a===cl.CLASS_NAME)return hd.createFromDOMInfo(e,n.offsetNode,0)}return new wh(n.offsetNode)}static _snapToSoftTabBoundary(e,t){const n=t.getLineContent(e.lineNumber),{tabSize:s}=t.getTextModelOptions(),r=$v.atomicPosition(n,e.column-1,s,2);return r!==-1?new q(e.lineNumber,r+1):e}static _doHitTest(e,t){let n=new wh;if(typeof document.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),n.type===1){const s=e.model.getInjectedTextAt(n.position),r=e.model.normalizePosition(n.position,2);(s||!r.equals(n.position))&&(n=new $M(r,n.spanNode,s))}return n.type===1&&e.stickyTabStops&&(n=new $M(this._snapToSoftTabBoundary(n.position,e.model),n.spanNode,n.injectedText)),n}}function yIe(i,e,t){const n=document.createRange();let s=i.elementFromPoint(e,t);if(s!==null){for(;s&&s.firstChild&&s.firstChild.nodeType!==s.firstChild.TEXT_NODE&&s.lastChild&&s.lastChild.firstChild;)s=s.lastChild;const r=s.getBoundingClientRect(),o=window.getComputedStyle(s,null).getPropertyValue("font"),a=s.innerText;let l=r.left,c=0,h;if(e>r.left+r.width)c=a.length;else{const u=Ed.getInstance();for(let d=0;d<a.length+1;d++){if(h=u.getCharWidth(a.charAt(d),o)/2,l+=h,e<l){c=d;break}l+=h}}n.setStart(s.firstChild,c),n.setEnd(s.firstChild,c)}return n}class Ed{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return Ed._INSTANCE||(Ed._INSTANCE=new Ed),Ed._INSTANCE}getCharWidth(e,t){const n=e+t;if(this._cache[n])return this._cache[n];const s=this._canvas.getContext("2d");s.font=t;const o=s.measureText(e).width;return this._cache[n]=o,o}}Ed._INSTANCE=null;function Zx(i){return function(e,t){let n=!1;return i&&(n=i.mouseTargetIsWidget(t)),n||t.preventDefault(),t}}class Af extends xw{constructor(e,t,n){super(),this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new En(this._context,n),this._mouseDownOperation=this._register(new CIe(this._context,this.viewController,this.viewHelper,(o,a)=>this._createMouseTarget(o,a),o=>this._getMouseColumn(o))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(129).height;const s=new Tke(this.viewHelper.viewDomNode);this._register(s.onContextMenu(this.viewHelper.viewDomNode,o=>this._onContextMenu(o,!0))),this._register(s.onMouseMoveThrottled(this.viewHelper.viewDomNode,o=>this._onMouseMove(o),Zx(this.mouseTargetFactory),Af.MOUSE_MOVE_MINIMUM_TIME)),this._register(s.onMouseUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(s.onMouseLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o))),this._register(s.onMouseDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o)));const r=o=>{if(this.viewController.emitMouseWheel(o),!this._context.configuration.options.get(67))return;const a=new vm(o);if(ht?(o.metaKey||o.ctrlKey)&&!o.shiftKey&&!o.altKey:o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.altKey){const c=vx.getZoomLevel(),h=a.deltaY>0?1:-1;vx.setZoomLevel(c+h),a.preventDefault(),a.stopPropagation()}};this._register(ne(this.viewHelper.viewDomNode,Ae.MOUSE_WHEEL,r,{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(129)){const t=this._context.configuration.options.get(129).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,t){const s=new mQ(e,t).toPageCoordinates(),r=_Q(this.viewHelper.viewDomNode);return s.y<r.y||s.y>r.y+r.height||s.x<r.x||s.x>r.x+r.width?null:this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),r,s,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){const s=C0(this.viewHelper.viewDomNode);s&&(n=s.elementsFromPoint(e.posx,e.posy).find(r=>this.viewHelper.viewDomNode.contains(r)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.editorPos,e.pos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e){const t=this._createMouseTarget(e,!0),n=t.type===6||t.type===7,s=t.type===2||t.type===3||t.type===4,r=t.type===3,o=this._context.configuration.options.get(97),a=t.type===8||t.type===5,l=t.type===9;let c=e.leftButton||e.middleButton;ht&&e.leftButton&&e.ctrlKey&&(c=!1);const h=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(c&&(n||r&&o))h(),this._mouseDownOperation.start(t.type,e);else if(s)e.preventDefault();else if(a){const u=t.detail;this.viewHelper.shouldSuppressMouseDownOnViewZone(u.viewZoneId)&&(h(),this._mouseDownOperation.start(t.type,e),e.preventDefault())}else l&&this.viewHelper.shouldSuppressMouseDownOnWidget(t.detail)&&(h(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:t})}}Af.MOUSE_MOVE_MINIMUM_TIME=100;class CIe extends te{constructor(e,t,n,s,r){super(),this._context=e,this._viewController=t,this._viewHelper=n,this._createMouseTarget=s,this._getMouseColumn=r,this._mouseMoveMonitor=this._register(new Mke(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new Ms),this._mouseState=new vk,this._currentSelection=new Ve(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!0);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):this._dispatchMouse(t,!0))}start(e,t){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const n=this._findMousePosition(t,!0);if(!n||!n.position)return;this._mouseState.trySetCount(t.detail,n.position),t.detail=this._mouseState.count;const s=this._context.configuration.options;if(!s.get(80)&&s.get(31)&&!s.get(18)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&n.type===6&&n.position&&this._currentSelection.containsPosition(n.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,Zx(null),r=>this._onMouseDownThenMove(r),r=>{const o=this._findMousePosition(this._lastMouseEvent,!0);r&&r instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:o?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(n,t.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,Zx(null),r=>this._onMouseDownThenMove(r),()=>this._stop()))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){this._isActive&&this._onScrollTimeout.setIfNotSet(()=>{if(!this._lastMouseEvent)return;const e=this._findMousePosition(this._lastMouseEvent,!1);e&&(this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0))},10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,n=this._context.model,s=this._context.viewLayout,r=this._getMouseColumn(e);if(e.posy<t.y){const a=Math.max(s.getCurrentScrollTop()-(t.y-e.posy),0),l=Mm.getZoneAtCoord(this._context,a);if(l){const h=this._helpPositionJumpOverViewZone(l);if(h)return new Go(null,13,r,h)}const c=s.getLineNumberAtVerticalOffset(a);return new Go(null,13,r,new q(c,1))}if(e.posy>t.y+t.height){const a=s.getCurrentScrollTop()+(e.posy-t.y),l=Mm.getZoneAtCoord(this._context,a);if(l){const h=this._helpPositionJumpOverViewZone(l);if(h)return new Go(null,13,r,h)}const c=s.getLineNumberAtVerticalOffset(a);return new Go(null,13,r,new q(c,n.getLineMaxColumn(c)))}const o=s.getLineNumberAtVerticalOffset(s.getCurrentScrollTop()+(e.posy-t.y));return e.posx<t.x?new Go(null,13,r,new q(o,1)):e.posx>t.x+t.width?new Go(null,13,r,new q(o,n.getLineMaxColumn(o))):null}_findMousePosition(e,t){const n=this._getPositionOutsideEditor(e);if(n)return n;const s=this._createMouseTarget(e,t);if(!s.position)return null;if(s.type===8||s.type===5){const o=this._helpPositionJumpOverViewZone(s.detail);if(o)return new Go(s.element,s.type,s.mouseColumn,o,null,s.detail)}return s}_helpPositionJumpOverViewZone(e){const t=new q(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,s=e.positionAfter;return n&&s?n.isBefore(t)?n:s:null}_dispatchMouse(e,t){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton})}}class vk{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const n=new Date().getTime();n-this._lastSetMouseDownCountTime>vk.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}vk.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var mo;(function(i){i.text="text/plain",i.binary="application/octet-stream",i.unknown="application/unknown",i.markdown="text/markdown",i.latex="text/latex"})(mo||(mo={}));let Gd=[],Q5=[],Yx=[];function Ny(i,e=!1){const t=SIe(i);Gd.push(t),t.userConfigured?Yx.push(t):Q5.push(t),e&&!t.userConfigured&&Gd.forEach(n=>{n.mime===t.mime||n.userConfigured||(t.extension&&n.extension===t.extension&&console.warn(`Overwriting extension <<${t.extension}>> to now point to mime <<${t.mime}>>`),t.filename&&n.filename===t.filename&&console.warn(`Overwriting filename <<${t.filename}>> to now point to mime <<${t.mime}>>`),t.filepattern&&n.filepattern===t.filepattern&&console.warn(`Overwriting filepattern <<${t.filepattern}>> to now point to mime <<${t.mime}>>`),t.firstline&&n.firstline===t.firstline&&console.warn(`Overwriting firstline <<${t.firstline}>> to now point to mime <<${t.mime}>>`))})}function SIe(i){return{id:i.id,mime:i.mime,filename:i.filename,extension:i.extension,filepattern:i.filepattern,firstline:i.firstline,userConfigured:i.userConfigured,filenameLowercase:i.filename?i.filename.toLowerCase():void 0,extensionLowercase:i.extension?i.extension.toLowerCase():void 0,filepatternLowercase:i.filepattern?aY(i.filepattern.toLowerCase()):void 0,filepatternOnPath:i.filepattern?i.filepattern.indexOf(Qi.sep)>=0:!1}}function xIe(i){i?(Gd=Gd.filter(e=>!e.userConfigured),Yx=[]):(Gd=[],Q5=[],Yx=[])}function DIe(i,e){let t;if(i)switch(i.scheme){case it.file:t=i.fsPath;break;case it.data:t=fu.parseMetaData(i).get(fu.META_DATA_LABEL);break;default:t=i.path}if(!t)return[mo.unknown];t=t.toLowerCase();const n=Vd(t),s=AV(t,n,Yx);if(s)return[s,mo.text];const r=AV(t,n,Q5);if(r)return[r,mo.text];if(e){const o=LIe(e);if(o)return[o,mo.text]}return[mo.unknown]}function AV(i,e,t){var n;let s=null,r=null,o=null;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){s=l;break}if(l.filepattern&&(!r||l.filepattern.length>r.filepattern.length)){const c=l.filepatternOnPath?i:e;!((n=l.filepatternLowercase)===null||n===void 0)&&n.call(l,c)&&(r=l)}l.extension&&(!o||l.extension.length>o.extension.length)&&e.endsWith(l.extensionLowercase)&&(o=l)}return s?s.mime:r?r.mime:o?o.mime:null}function LIe(i){if(n5(i)&&(i=i.substr(1)),i.length>0)for(let e=Gd.length-1;e>=0;e--){const t=Gd[e];if(!t.firstline)continue;const n=i.match(t.firstline);if(n&&n.length>0)return t.mime}return null}class an{constructor(e,t,n,s,r){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selectionStartPosition=s,this.selectionEndPosition=r}toString(){return"[ <"+this.value+">, selectionStart: "+this.selectionStart+", selectionEnd: "+this.selectionEnd+"]"}static readFromTextArea(e){return new an(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)}collapseSelection(){return new an(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const s=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,s,-1)}if(e>=this.selectionEnd){const s=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,s,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition(this.selectionStartPosition,t,1);const n=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,n,-1)}_finishDeduceEditorPosition(e,t,n){let s=0,r=-1;for(;(r=t.indexOf(`
`,r+1))!==-1;)s++;return[e,n*t.length,s]}static selectedText(e){return new an(e,0,e.length,null,null)}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};let s=e.value,r=e.selectionStart,o=e.selectionEnd,a=t.value,l=t.selectionStart,c=t.selectionEnd;const h=s.substring(o),u=a.substring(c),d=iM(h,u);a=a.substring(0,a.length-d),s=s.substring(0,s.length-d);const f=s.substring(0,r),g=a.substring(0,l),p=Av(f,g);if(a=a.substring(p),s=s.substring(p),l-=p,r-=p,c-=p,o-=p,n&&l===c&&s.length>0){let v=null;if(l===a.length?a.startsWith(s)&&(v=a.substring(s.length)):a.endsWith(s)&&(v=a.substring(0,a.length-s.length)),v!==null&&v.length>0&&(/\uFE0F/.test(v)||NSe(v)))return{text:v,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0}}if(l===c){if(s===a&&r===0&&o===s.length&&l===a.length&&a.indexOf(`
`)===-1&&RSe(a))return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const v=f.length-p;return{text:a,replacePrevCharCnt:v,replaceNextCharCnt:0,positionDelta:0}}const m=o-r;return{text:a,replacePrevCharCnt:m,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const n=Math.min(Av(e.value,t.value),e.selectionEnd),s=Math.min(iM(e.value,t.value),e.value.length-e.selectionEnd),r=e.value.substring(n,e.value.length-s),o=t.value.substring(n,t.value.length-s);e.selectionStart-n;const a=e.selectionEnd-n;t.selectionStart-n;const l=t.selectionEnd-n;return{text:o,replacePrevCharCnt:a,replaceNextCharCnt:r.length-a,positionDelta:l-o.length}}}an.EMPTY=new an("",0,0,null,null);class pp{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const n=e*t,s=n+1,r=n+t;return new F(s,1,r+1,1)}static fromEditorSelection(e,t,n,s,r){const o=pp._getPageOfLine(n.startLineNumber,s),a=pp._getRangeForPage(o,s),l=pp._getPageOfLine(n.endLineNumber,s),c=pp._getRangeForPage(l,s),h=a.intersectRanges(new F(1,1,n.startLineNumber,n.startColumn));let u=t.getValueInRange(h,1);const d=t.getLineCount(),f=t.getLineMaxColumn(d),g=c.intersectRanges(new F(n.endLineNumber,n.endColumn,d,f));let p=t.getValueInRange(g,1),m;if(o===l||o+1===l)m=t.getValueInRange(n,1);else{const v=a.intersectRanges(n),b=c.intersectRanges(n);m=t.getValueInRange(v,1)+String.fromCharCode(8230)+t.getValueInRange(b,1)}return r&&(u.length>500&&(u=u.substring(u.length-500,u.length)),p.length>500&&(p=p.substring(0,500)),m.length>2*500&&(m=m.substring(0,500)+String.fromCharCode(8230)+m.substring(m.length-500,m.length))),new an(u+m+p,u.length,u.length+m.length,new q(n.startLineNumber,n.startColumn),new q(n.endLineNumber,n.endColumn))}}var Qx;(function(i){i.Tap="-monaco-textarea-synthetic-tap"})(Qx||(Qx={}));class Xx{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}Xx.INSTANCE=new Xx;class kIe extends te{constructor(e,t){super(),this.textArea=t,this._onFocus=this._register(new z),this.onFocus=this._onFocus.event,this._onBlur=this._register(new z),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new z),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new z),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new z),this.onCut=this._onCut.event,this._onPaste=this._register(new z),this.onPaste=this._onPaste.event,this._onType=this._register(new z),this.onType=this._onType.event,this._onCompositionStart=this._register(new z),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new z),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new z),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new z),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._host=e,this._textArea=this._register(new AIe(t)),this._asyncTriggerCut=this._register(new fi(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new fi(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=an.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._isDoingComposition=!1,this._nextCommand=0;let n=null;this._register(Ji(t.domNode,"keydown",a=>{(a.keyCode===109||this._isDoingComposition&&a.keyCode===1)&&a.stopPropagation(),a.equals(9)&&a.preventDefault(),n=a,this._onKeyDown.fire(a)})),this._register(Ji(t.domNode,"keyup",a=>{this._onKeyUp.fire(a)})),this._register(ne(t.domNode,"compositionstart",a=>{if(!this._isDoingComposition){if(this._isDoingComposition=!0,ht&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===a.data&&(n&&n.equals(109)&&(n.code==="ArrowRight"||n.code==="ArrowLeft")||ks)){this._textAreaState=new an(this._textAreaState.value,this._textAreaState.selectionStart-1,this._textAreaState.selectionEnd,this._textAreaState.selectionStartPosition?new q(this._textAreaState.selectionStartPosition.lineNumber,this._textAreaState.selectionStartPosition.column-1):null,this._textAreaState.selectionEndPosition),this._onCompositionStart.fire({revealDeltaColumns:-1});return}if(A_){this._onCompositionStart.fire({revealDeltaColumns:-this._textAreaState.selectionStart});return}this._setAndWriteTextAreaState("compositionstart",an.EMPTY),this._onCompositionStart.fire({revealDeltaColumns:0})}}));const s=a=>{const l=this._textAreaState,c=an.readFromTextArea(this._textArea);return[c,an.deduceInput(l,c,a)]},r=()=>{const a=this._textAreaState,l=an.readFromTextArea(this._textArea);return[l,an.deduceAndroidCompositionInput(a,l)]},o=a=>{const l=this._textAreaState,c=an.selectedText(a),h={text:c.value,replacePrevCharCnt:l.selectionEnd-l.selectionStart,replaceNextCharCnt:0,positionDelta:0};return[c,h]};this._register(ne(t.domNode,"compositionupdate",a=>{if(A_){const[h,u]=r();this._textAreaState=h,this._onType.fire(u),this._onCompositionUpdate.fire(a);return}const[l,c]=o(a.data||"");this._textAreaState=l,this._onType.fire(c),this._onCompositionUpdate.fire(a)})),this._register(ne(t.domNode,"compositionend",a=>{if(!this._isDoingComposition)return;if(this._isDoingComposition=!1,A_){const[h,u]=r();this._textAreaState=h,this._onType.fire(u),this._onCompositionEnd.fire();return}const[l,c]=o(a.data||"");this._textAreaState=l,this._onType.fire(c),(fx||ks)&&(this._textAreaState=an.readFromTextArea(this._textArea)),this._onCompositionEnd.fire()})),this._register(ne(t.domNode,"input",()=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._isDoingComposition)return;const[a,l]=s(ht);l.replacePrevCharCnt===0&&l.text.length===1&&_n(l.text.charCodeAt(0))||(this._textAreaState=a,this._nextCommand===0?(l.text!==""||l.replacePrevCharCnt!==0)&&this._onType.fire(l):((l.text!==""||l.replacePrevCharCnt!==0)&&this._firePaste(l.text,null),this._nextCommand=0))})),this._register(ne(t.domNode,"cut",a=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(a),this._asyncTriggerCut.schedule()})),this._register(ne(t.domNode,"copy",a=>{this._ensureClipboardGetsEditorSelection(a)})),this._register(ne(t.domNode,"paste",a=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),a_.canUseTextData(a)){const[l,c]=a_.getTextData(a);l!==""&&this._firePaste(l,c)}else this._textArea.getSelectionStart()!==this._textArea.getSelectionEnd()&&this._setAndWriteTextAreaState("paste",an.EMPTY),this._nextCommand=1})),this._register(ne(t.domNode,"focus",()=>{const a=this._hasFocus;this._setHasFocus(!0),ko&&!a&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(ne(t.domNode,"blur",()=>{this._isDoingComposition&&(this._isDoingComposition=!1,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(ne(t.domNode,Qx.Tap,()=>{A_&&this._isDoingComposition&&(this._isDoingComposition=!1,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return ne(document,"selectionchange",t=>{if(!this._hasFocus||this._isDoingComposition||!fx)return;const n=Date.now(),s=n-e;if(e=n,s<5)return;const r=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),r<100||!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;const o=this._textArea.getValue();if(this._textAreaState.value!==o)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),h=this._host.deduceModelPosition(c[0],c[1],c[2]),u=this._textAreaState.deduceEditorPosition(l),d=this._host.deduceModelPosition(u[0],u[1],u[2]),f=new Ve(h.lineNumber,h.column,d.lineNumber,d.column);this._onSelectionChangeRequest.fire(f)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){const e=C0(this.textArea.domNode);e?this._setHasFocus(e.activeElement===this.textArea.domNode):qO(this.textArea.domNode)?this._setHasFocus(document.activeElement===this.textArea.domNode):this._setHasFocus(!1)}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._isDoingComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(a_.canUseTextData(e)),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};if(Xx.INSTANCE.set(ks?t.text.replace(/\r\n/g,`
`):t.text,n),!a_.canUseTextData(e)){this._setAndWriteTextAreaState("copy or cut",an.selectedText(t.text));return}a_.setTextData(e,t.text,t.html,n)}_firePaste(e,t){t||(t=Xx.INSTANCE.get(e)),this._onPaste.fire({text:e,metadata:t})}}class a_{static canUseTextData(e){return!!e.clipboardData}static getTextData(e){if(e.clipboardData){e.preventDefault();const t=e.clipboardData.getData(mo.text);let n=null;const s=e.clipboardData.getData("vscode-editor-data");if(typeof s=="string")try{n=JSON.parse(s),n.version!==1&&(n=null)}catch{}return[t,n]}throw new Error("ClipboardEventUtils.getTextData: Cannot use text data!")}static setTextData(e,t,n,s){if(e.clipboardData){e.clipboardData.setData(mo.text,t),typeof n=="string"&&e.clipboardData.setData("text/html",n),e.clipboardData.setData("vscode-editor-data",JSON.stringify(s)),e.preventDefault();return}throw new Error("ClipboardEventUtils.setTextData: Cannot use text data!")}}class AIe extends te{constructor(e){super(),this._actual=e,this._ignoreSelectionChangeTime=0}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.domNode.value}setValue(e,t){const n=this._actual.domNode;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return this._actual.domNode.selectionDirection==="backward"?this._actual.domNode.selectionEnd:this._actual.domNode.selectionStart}getSelectionEnd(){return this._actual.domNode.selectionDirection==="backward"?this._actual.domNode.selectionStart:this._actual.domNode.selectionEnd}setSelectionRange(e,t,n){const s=this._actual.domNode;let r=null;const o=C0(s);o?r=o.activeElement:r=document.activeElement;const a=r===s,l=s.selectionStart,c=s.selectionEnd;if(a&&l===t&&c===n){ks&&window.parent!==window&&s.focus();return}if(a){this.setIgnoreSelectionChangeTime("setSelectionRange"),s.setSelectionRange(t,n),ks&&window.parent!==window&&s.focus();return}try{const h=_Se(s);this.setIgnoreSelectionChangeTime("setSelectionRange"),s.focus(),s.setSelectionRange(t,n),bSe(s,h)}catch{}}}class EIe extends Af{constructor(e,t,n){super(e,t,n),this._register(kt.addTarget(this.viewHelper.linesContentDomNode)),this._register(ne(this.viewHelper.linesContentDomNode,Ut.Tap,r=>this.onTap(r))),this._register(ne(this.viewHelper.linesContentDomNode,Ut.Change,r=>this.onChange(r))),this._register(ne(this.viewHelper.linesContentDomNode,Ut.Contextmenu,r=>this._onContextMenu(new kf(r,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(ne(this.viewHelper.linesContentDomNode,"pointerdown",r=>{const o=r.pointerType;if(o==="mouse"){this._lastPointerType="mouse";return}else o==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const s=new Nke(this.viewHelper.viewDomNode);this._register(s.onPointerMoveThrottled(this.viewHelper.viewDomNode,r=>this._onMouseMove(r),Zx(this.mouseTargetFactory),Af.MOUSE_MOVE_MINIMUM_TIME)),this._register(s.onPointerUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(s.onPointerLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r))),this._register(s.onPointerDown(this.viewHelper.viewDomNode,r=>this._onMouseDown(r)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new kf(e,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1})}onChange(e){this._lastPointerType==="touch"&&this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e)}}class IIe extends Af{constructor(e,t,n){super(e,t,n),this._register(kt.addTarget(this.viewHelper.linesContentDomNode)),this._register(ne(this.viewHelper.linesContentDomNode,Ut.Tap,s=>this.onTap(s))),this._register(ne(this.viewHelper.linesContentDomNode,Ut.Change,s=>this.onChange(s))),this._register(ne(this.viewHelper.linesContentDomNode,Ut.Contextmenu,s=>this._onContextMenu(new kf(s,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new kf(e,this.viewHelper.viewDomNode),!1);if(t.position){const n=document.createEvent("CustomEvent");n.initEvent(Qx.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position)}}onChange(e){this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}}class TIe extends te{constructor(e,t,n){super(),du&&VL.pointerEvents?this.handler=this._register(new EIe(e,t,n)):window.TouchEvent?this.handler=this._register(new IIe(e,t,n)):this.handler=this._register(new Af(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class I0 extends xw{}class Rm extends I0{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new q(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(58);const t=e.get(59);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(83);const n=e.get(129);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const t=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new q(e,1));if(t.column!==1)return"";const n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(this._renderLineNumbers===2){const s=Math.abs(this._lastCursorModelPosition.lineNumber-n);return s===0?'<span class="relative-current-line-number">'+n+"</span>":String(s)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===n||n%10===0?String(n):"":String(n)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=As?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,r='<div class="'+Rm.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">',o=this._context.model.getLineCount(),a=[];for(let l=n;l<=s;l++){const c=l-n;if(!this._renderFinalNewline&&l===o&&this._context.model.getLineLength(l)===0){a[c]="";continue}const h=this._getLineRenderLineNumber(l);h?l===this._activeLineNumber?a[c]='<div class="active-line-number '+Rm.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+h+"</div>":a[c]=r+h+"</div>":a[c]=""}this._renderResult=a}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}Rm.CLASS_NAME="line-numbers";Jt((i,e)=>{const t=i.getColor(QQ);t&&e.addRule(`.monaco-editor .line-numbers { color: ${t}; }`);const n=i.getColor(NEe);n&&e.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${n}; }`)});class Ef extends Yr{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(129);this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=ft(document.createElement("div")),this._domNode.setClassName(Ef.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=ft(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(Ef.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(129);return this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}}Ef.CLASS_NAME="glyph-margin";Ef.OUTER_CLASS_NAME="margin";const Kd="monaco-mouse-cursor-text";class X5{constructor(e,t,n){this._visibleTextAreaBrand=void 0,this.top=e,this.left=t,this.width=n}setWidth(e){return new X5(this.top,this.left,e)}}const l_=ks;class NIe extends Yr{constructor(e,t,n){super(e),this._primaryCursorPosition=new q(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._viewHelper=n,this._scrollLeft=0,this._scrollTop=0;const s=this._context.configuration.options,r=s.get(129);this._setAccessibilityOptions(s),this._contentLeft=r.contentLeft,this._contentWidth=r.contentWidth,this._contentHeight=r.height,this._fontInfo=s.get(43),this._lineHeight=s.get(58),this._emptySelectionClipboard=s.get(32),this._copyWithSyntaxHighlighting=s.get(21),this._visibleTextArea=null,this._selections=[new Ve(1,1,1,1)],this._modelSelections=[new Ve(1,1,1,1)],this._lastRenderPosition=null,this.textArea=ft(document.createElement("textarea")),Nl.write(this.textArea,6),this.textArea.setClassName(`inputarea ${Kd}`),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(s)),this.textArea.setAttribute("tabindex",String(s.get(111))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",_("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),s.get(30)&&s.get(80)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=ft(document.createElement("div")),this.textAreaCover.setPosition("absolute");const o={getLineCount:()=>this._context.model.getLineCount(),getLineMaxColumn:l=>this._context.model.getLineMaxColumn(l),getValueInRange:(l,c)=>this._context.model.getValueInRange(l,c)},a={getDataToCopy:l=>{const c=this._context.model.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,On),h=this._context.model.getEOL(),u=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),d=Array.isArray(c)?c:null,f=Array.isArray(c)?c.join(h):c;let g,p=null;if(l&&this._copyWithSyntaxHighlighting&&f.length<65536){const m=this._context.model.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);m&&(g=m.html,p=m.mode)}return{isFromEmptySelection:u,multicursorText:d,text:f,html:g,mode:p}},getScreenReaderContent:l=>{if(this._accessibilitySupport===1){if(ht){const c=this._selections[0];if(c.isEmpty()){const h=c.getStartPosition();let u=this._getWordBeforePosition(h);if(u.length===0&&(u=this._getCharacterBeforePosition(h)),u.length>0)return new an(u,u.length,u.length,h,h)}}return an.EMPTY}if(A_){const c=this._selections[0];if(c.isEmpty()){const h=c.getStartPosition(),[u,d]=this._getAndroidWordAtPosition(h);if(u.length>0)return new an(u,d,d,h,h)}return an.EMPTY}return pp.fromEditorSelection(l,o,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(l,c,h)=>this._context.model.deduceModelPositionRelativeToViewPosition(l,c,h)};this._textAreaInput=this._register(new kIe(a,this.textArea)),this._register(this._textAreaInput.onKeyDown(l=>{this._viewController.emitKeyDown(l)})),this._register(this._textAreaInput.onKeyUp(l=>{this._viewController.emitKeyUp(l)})),this._register(this._textAreaInput.onPaste(l=>{let c=!1,h=null,u=null;l.metadata&&(c=this._emptySelectionClipboard&&!!l.metadata.isFromEmptySelection,h=typeof l.metadata.multicursorText<"u"?l.metadata.multicursorText:null,u=l.metadata.mode),this._viewController.paste(l.text,c,h,u)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(l=>{l.replacePrevCharCnt||l.replaceNextCharCnt||l.positionDelta?this._viewController.compositionType(l.text,l.replacePrevCharCnt,l.replaceNextCharCnt,l.positionDelta):this._viewController.type(l.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(l=>{this._viewController.setSelection(l)})),this._register(this._textAreaInput.onCompositionStart(l=>{const c=this._selections[0].startLineNumber,h=this._selections[0].startColumn+l.revealDeltaColumns;this._context.model.revealRange("keyboard",!0,new F(c,h,c,h),0,1);const u=this._viewHelper.visibleRangeForPositionRelativeToEditor(c,h);u&&(this._visibleTextArea=new X5(this._context.viewLayout.getVerticalOffsetForLineNumber(c),u.left,l_?0:1),this._render()),this.textArea.setClassName(`inputarea ${Kd} ime-input`),this._viewController.compositionStart(),this._context.model.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(l=>{this._visibleTextArea&&(this._visibleTextArea=this._visibleTextArea.setWidth(MIe(l.data,this._fontInfo)),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName(`inputarea ${Kd}`),this._viewController.compositionEnd(),this._context.model.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.model.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.model.setHasFocus(!1)}))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',n=this._context.model.getLineContent(e.lineNumber),s=Em(t);let r=!0,o=e.column,a=!0,l=e.column,c=0;for(;c<50&&(r||a);){if(r&&o<=1&&(r=!1),r){const h=n.charCodeAt(o-2);s.get(h)!==0?r=!1:o--}if(a&&l>n.length&&(a=!1),a){const h=n.charCodeAt(l-1);s.get(h)!==0?a=!1:l++}c++}return[n.substring(o-1,l-1),e.column-o]}_getWordBeforePosition(e){const t=this._context.model.getLineContent(e.lineNumber),n=Em(this._context.configuration.options.get(115));let s=e.column,r=0;for(;s>1;){const o=t.charCodeAt(s-2);if(n.get(o)!==0||r>50)return t.substring(s-1,e.column-1);r++,s--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const n=this._context.model.getLineContent(e.lineNumber).charAt(e.column-2);if(!_n(n.charCodeAt(0)))return n}return""}_getAriaLabel(e){return e.get(2)===1?_("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",As?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===Xf.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(129);return this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(43),this._lineHeight=t.get(58),this._emptySelectionClipboard=t.get(32),this._copyWithSyntaxHighlighting=t.get(21),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("tabindex",String(t.get(111))),(e.hasChanged(30)||e.hasChanged(80))&&(t.get(30)&&t.get(80)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}prepareRender(e){this._primaryCursorPosition=new q(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea){this._renderInsideEditor(null,this._visibleTextArea.top-this._scrollTop,this._contentLeft+this._visibleTextArea.left-this._scrollLeft,this._visibleTextArea.width,this._lineHeight);return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(ht){this._renderInsideEditor(this._primaryCursorPosition,t,e,l_?0:1,this._lineHeight);return}this._renderInsideEditor(this._primaryCursorPosition,t,e,l_?0:1,l_?0:1)}_renderInsideEditor(e,t,n,s,r){this._lastRenderPosition=e;const o=this.textArea,a=this.textAreaCover;Fn.applyFontInfo(o,this._fontInfo),o.setTop(t),o.setLeft(n),o.setWidth(s),o.setHeight(r),a.setTop(0),a.setLeft(0),a.setWidth(0),a.setHeight(0)}_renderAtTopLeft(){this._lastRenderPosition=null;const e=this.textArea,t=this.textAreaCover;if(Fn.applyFontInfo(e,this._fontInfo),e.setTop(0),e.setLeft(0),t.setTop(0),t.setLeft(0),l_){e.setWidth(0),e.setHeight(0),t.setWidth(0),t.setHeight(0);return}e.setWidth(1),e.setHeight(1),t.setWidth(1),t.setHeight(1);const n=this._context.configuration.options;n.get(49)?t.setClassName("monaco-editor-background textAreaCover "+Ef.OUTER_CLASS_NAME):n.get(59).renderType!==0?t.setClassName("monaco-editor-background textAreaCover "+Rm.CLASS_NAME):t.setClassName("monaco-editor-background textAreaCover")}}function MIe(i,e){const n=document.createElement("canvas").getContext("2d");n.font=RIe(e);const s=n.measureText(i);return ks?s.width+2:s.width}function RIe(i){return OIe("normal",i.fontWeight,i.fontSize,i.lineHeight,i.fontFamily)}function OIe(i,e,t,n,s){return`${i} normal ${e} ${t}px / ${n}px ${s}`}class ud{static columnSelect(e,t,n,s,r,o){let a=Math.abs(r-n)+1,l=n>r,c=s>o,h=s<o,u=[];for(let d=0;d<a;d++){let f=n+(l?-d:d),g=At.columnFromVisibleColumn2(e,t,f,s),p=At.columnFromVisibleColumn2(e,t,f,o),m=At.visibleColumnFromColumn2(e,t,new q(f,g)),v=At.visibleColumnFromColumn2(e,t,new q(f,p));h&&(m>o||v<s)||c&&(v>s||m<o)||u.push(new pn(new F(f,g,f,g),0,new q(f,p),0))}if(u.length===0)for(let d=0;d<a;d++){const f=n+(l?-d:d),g=t.getLineMaxColumn(f);u.push(new pn(new F(f,g,f,g),0,new q(f,g),0))}return{viewStates:u,reversed:l,fromLineNumber:n,fromVisualColumn:s,toLineNumber:r,toVisualColumn:o}}static columnSelectLeft(e,t,n){let s=n.toViewVisualColumn;return s>0&&s--,ud.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,s)}static columnSelectRight(e,t,n){let s=0;const r=Math.min(n.fromViewLineNumber,n.toViewLineNumber),o=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let l=r;l<=o;l++){const c=t.getLineMaxColumn(l),h=At.visibleColumnFromColumn2(e,t,new q(l,c));s=Math.max(s,h)}let a=n.toViewVisualColumn;return a<s&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,s){const r=s?e.pageSize:1,o=Math.max(1,n.toViewLineNumber-r);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}static columnSelectDown(e,t,n,s){const r=s?e.pageSize:1,o=Math.min(t.getLineCount(),n.toViewLineNumber+r);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}}class vs{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let s=t.getInverseEditOperations()[0].range;return new Ve(s.endLineNumber,s.endColumn,s.endLineNumber,s.endColumn)}}class My{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let s=t.getInverseEditOperations()[0].range;return new Ve(s.startLineNumber,s.startColumn,s.startLineNumber,s.startColumn)}}class JC{constructor(e,t,n,s,r=!1){this._range=e,this._text=t,this._columnDeltaOffset=s,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=r}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let s=t.getInverseEditOperations()[0].range;return new Ve(s.endLineNumber+this._lineNumberDeltaOffset,s.endColumn+this._columnDeltaOffset,s.endLineNumber+this._lineNumberDeltaOffset,s.endColumn+this._columnDeltaOffset)}}class cX{constructor(e,t,n,s=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=s,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class gE{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}class yt{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-ESe(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new q(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const s=e.getLineMinColumn(t.lineNumber),r=e.getLineContent(t.lineNumber),o=$v.atomicPosition(r,t.column-1,n,0);if(o!==-1&&o+1>=s)return new q(t.lineNumber,o+1)}return this.leftPosition(e,t)}static left(e,t,n){const s=e.stickyTabStops?yt.leftPositionAtomicSoftTabs(t,n,e.tabSize):yt.leftPosition(t,n);return new gE(s.lineNumber,s.column,0)}static moveLeft(e,t,n,s,r){let o,a;if(n.hasSelection()&&!s)o=n.selection.startLineNumber,a=n.selection.startColumn;else{const l=n.position.delta(void 0,-(r-1)),c=t.normalizePosition(yt.clipPositionColumn(l,t),0),h=yt.left(e,t,c);o=h.lineNumber,a=h.column}return n.move(s,o,a,0)}static clipPositionColumn(e,t){return new q(e.lineNumber,yt.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+mx(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new q(t,n)}static rightPositionAtomicSoftTabs(e,t,n,s,r){if(n<e.getLineIndentColumn(t)){const o=e.getLineContent(t),a=$v.atomicPosition(o,n-1,s,1);if(a!==-1)return new q(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const s=e.stickyTabStops?yt.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):yt.rightPosition(t,n.lineNumber,n.column);return new gE(s.lineNumber,s.column,0)}static moveRight(e,t,n,s,r){let o,a;if(n.hasSelection()&&!s)o=n.selection.endLineNumber,a=n.selection.endColumn;else{const l=n.position.delta(void 0,r-1),c=t.normalizePosition(yt.clipPositionColumn(l,t),1),h=yt.right(e,t,c);o=h.lineNumber,a=h.column}return n.move(s,o,a,0)}static vertical(e,t,n,s,r,o,a){const l=At.visibleColumnFromColumn(t.getLineContent(n),s,e.tabSize)+r,c=t.getLineCount(),h=n===1&&s===1,u=n===c&&s===t.getLineMaxColumn(n),d=o<n?h:u;return n=o,n<1?(n=1,a?s=t.getLineMinColumn(n):s=Math.min(t.getLineMaxColumn(n),s)):n>c?(n=c,a?s=t.getLineMaxColumn(n):s=Math.min(t.getLineMaxColumn(n),s)):s=At.columnFromVisibleColumn2(e,t,n,l),d?r=0:r=l-At.visibleColumnFromColumn(t.getLineContent(n),s,e.tabSize),new gE(n,s,r)}static down(e,t,n,s,r,o,a){return this.vertical(e,t,n,s,r,n+o,a)}static moveDown(e,t,n,s,r){let o,a;n.hasSelection()&&!s?(o=n.selection.endLineNumber,a=n.selection.endColumn):(o=n.position.lineNumber,a=n.position.column);let l=yt.down(e,t,o,a,n.leftoverVisibleColumns,r,!0);return n.move(s,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateDown(e,t,n){let s=n.selection,r=yt.down(e,t,s.selectionStartLineNumber,s.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),o=yt.down(e,t,s.positionLineNumber,s.positionColumn,n.leftoverVisibleColumns,1,!1);return new pn(new F(r.lineNumber,r.column,r.lineNumber,r.column),r.leftoverVisibleColumns,new q(o.lineNumber,o.column),o.leftoverVisibleColumns)}static up(e,t,n,s,r,o,a){return this.vertical(e,t,n,s,r,n-o,a)}static moveUp(e,t,n,s,r){let o,a;n.hasSelection()&&!s?(o=n.selection.startLineNumber,a=n.selection.startColumn):(o=n.position.lineNumber,a=n.position.column);let l=yt.up(e,t,o,a,n.leftoverVisibleColumns,r,!0);return n.move(s,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,n){let s=n.selection,r=yt.up(e,t,s.selectionStartLineNumber,s.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),o=yt.up(e,t,s.positionLineNumber,s.positionColumn,n.leftoverVisibleColumns,1,!1);return new pn(new F(r.lineNumber,r.column,r.lineNumber,r.column),r.leftoverVisibleColumns,new q(o.lineNumber,o.column),o.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,s){let r=n.position.lineNumber;for(;r>1&&this._isBlankLine(t,r);)r--;for(;r>1&&!this._isBlankLine(t,r);)r--;return n.move(s,r,t.getLineMinColumn(r),0)}static moveToNextBlankLine(e,t,n,s){const r=t.getLineCount();let o=n.position.lineNumber;for(;o<r&&this._isBlankLine(t,o);)o++;for(;o<r&&!this._isBlankLine(t,o);)o++;return n.move(s,o,t.getLineMinColumn(o),0)}static moveToBeginningOfLine(e,t,n,s){let r=n.position.lineNumber,o=t.getLineMinColumn(r),a=t.getLineFirstNonWhitespaceColumn(r)||o,l;return n.position.column===a?l=o:l=a,n.move(s,r,l,0)}static moveToEndOfLine(e,t,n,s,r){let o=n.position.lineNumber,a=t.getLineMaxColumn(o);return n.move(s,o,a,r?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,s){return n.move(s,1,1,0)}static moveToEndOfBuffer(e,t,n,s){let r=t.getLineCount(),o=t.getLineMaxColumn(r);return n.move(s,r,o,0)}}class If{static deleteRight(e,t,n,s){let r=[],o=e!==3;for(let a=0,l=s.length;a<l;a++){const c=s[a];let h=c;if(h.isEmpty()){let u=c.getPosition(),d=yt.right(t,n,u);h=new F(d.lineNumber,d.column,u.lineNumber,u.column)}if(h.isEmpty()){r[a]=null;continue}h.startLineNumber!==h.endLineNumber&&(o=!0),r[a]=new vs(h,"")}return[o,r]}static isAutoClosingPairDelete(e,t,n,s,r,o,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let l=0,c=o.length;l<c;l++){const h=o[l],u=h.getPosition();if(!h.isEmpty())return!1;const d=r.getLineContent(u.lineNumber);if(u.column<2||u.column>=d.length+1)return!1;const f=d.charAt(u.column-2),g=s.get(f);if(!g)return!1;if(ep(f)){if(n==="never")return!1}else if(t==="never")return!1;const p=d.charAt(u.column-1);let m=!1;for(const v of g)v.open===f&&v.close===p&&(m=!0);if(!m)return!1;if(e==="auto"){let v=!1;for(let b=0,w=a.length;b<w;b++){const y=a[b];if(u.lineNumber===y.startLineNumber&&u.column===y.startColumn){v=!0;break}}if(!v)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){let s=[];for(let r=0,o=n.length;r<o;r++){const a=n[r].getPosition(),l=new F(a.lineNumber,a.column-1,a.lineNumber,a.column+1);s[r]=new vs(l,"")}return[!0,s]}static deleteLeft(e,t,n,s,r){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,s,r))return this._runAutoClosingPairDelete(t,n,s);const o=[];let a=e!==2;for(let l=0,c=s.length;l<c;l++){let h=If.getDeleteRange(s[l],n,t);if(h.isEmpty()){o[l]=null;continue}h.startLineNumber!==h.endLineNumber&&(a=!0),o[l]=new vs(h,"")}return[a,o]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const s=e.getPosition();if(n.useTabStops&&s.column>1){const r=t.getLineContent(s.lineNumber),o=Zs(r),a=o===-1?r.length+1:o+1;if(s.column<=a){const l=At.visibleColumnFromColumn2(n,t,s),c=At.prevIndentTabStop(l,n.indentSize),h=At.columnFromVisibleColumn2(n,t,s.lineNumber,c);return new F(s.lineNumber,h,s.lineNumber,s.column)}}return F.fromPositions(If.getPositionAfterDeleteLeft(s,t),s)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=BSe(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){const n=e.lineNumber-1;return new q(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){let s=[],r=null;n.sort((o,a)=>q.compare(o.getStartPosition(),a.getEndPosition()));for(let o=0,a=n.length;o<a;o++){const l=n[o];if(l.isEmpty())if(e.emptySelectionClipboard){let c=l.getPosition(),h,u,d,f;c.lineNumber<t.getLineCount()?(h=c.lineNumber,u=1,d=c.lineNumber+1,f=1):c.lineNumber>1&&(r==null?void 0:r.endLineNumber)!==c.lineNumber?(h=c.lineNumber-1,u=t.getLineMaxColumn(c.lineNumber-1),d=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber)):(h=c.lineNumber,u=1,d=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber));let g=new F(h,u,d,f);r=g,g.isEmpty()?s[o]=null:s[o]=new vs(g,"")}else s[o]=null;else s[o]=new vs(l,"")}return new Hs(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class mi{static _createWord(e,t,n,s,r){return{start:s,end:r,wordType:t,nextCharClass:n}}static _findPreviousWordOnLine(e,t,n){let s=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(s,e,n)}static _doFindPreviousWordOnLine(e,t,n){let s=0;for(let r=n.column-2;r>=0;r--){let o=e.charCodeAt(r),a=t.get(o);if(a===0){if(s===2)return this._createWord(e,s,a,r+1,this._findEndOfWord(e,t,s,r+1));s=1}else if(a===2){if(s===1)return this._createWord(e,s,a,r+1,this._findEndOfWord(e,t,s,r+1));s=2}else if(a===1&&s!==0)return this._createWord(e,s,a,r+1,this._findEndOfWord(e,t,s,r+1))}return s!==0?this._createWord(e,s,1,0,this._findEndOfWord(e,t,s,0)):null}static _findEndOfWord(e,t,n,s){let r=e.length;for(let o=s;o<r;o++){let a=e.charCodeAt(o),l=t.get(a);if(l===1||n===1&&l===2||n===2&&l===0)return o}return r}static _findNextWordOnLine(e,t,n){let s=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(s,e,n)}static _doFindNextWordOnLine(e,t,n){let s=0,r=e.length;for(let o=n.column-1;o<r;o++){let a=e.charCodeAt(o),l=t.get(a);if(l===0){if(s===2)return this._createWord(e,s,l,this._findStartOfWord(e,t,s,o-1),o);s=1}else if(l===2){if(s===1)return this._createWord(e,s,l,this._findStartOfWord(e,t,s,o-1),o);s=2}else if(l===1&&s!==0)return this._createWord(e,s,l,this._findStartOfWord(e,t,s,o-1),o)}return s!==0?this._createWord(e,s,1,this._findStartOfWord(e,t,s,r-1),r):null}static _findStartOfWord(e,t,n,s){for(let r=s;r>=0;r--){let o=e.charCodeAt(r),a=t.get(o);if(a===1||n===1&&a===2||n===2&&a===0)return r+1}return 0}static moveWordLeft(e,t,n,s){let r=n.lineNumber,o=n.column;o===1&&r>1&&(r=r-1,o=t.getLineMaxColumn(r));let a=mi._findPreviousWordOnLine(e,t,new q(r,o));if(s===0)return new q(r,a?a.start+1:1);if(s===1)return a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=mi._findPreviousWordOnLine(e,t,new q(r,a.start+1))),new q(r,a?a.start+1:1);if(s===3){for(;a&&a.wordType===2;)a=mi._findPreviousWordOnLine(e,t,new q(r,a.start+1));return new q(r,a?a.start+1:1)}return a&&o<=a.end+1&&(a=mi._findPreviousWordOnLine(e,t,new q(r,a.start+1))),new q(r,a?a.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,s=e.getLineMaxColumn(n);if(t.column===1)return n>1?new q(n-1,e.getLineMaxColumn(n-1)):t;const r=e.getLineContent(n);for(let o=t.column-1;o>1;o--){const a=r.charCodeAt(o-2),l=r.charCodeAt(o-1);if(a===95&&l!==95)return new q(n,o);if(hp(a)&&Ch(l))return new q(n,o);if(Ch(a)&&Ch(l)&&o+1<s){const c=r.charCodeAt(o);if(hp(c))return new q(n,o)}}return new q(n,1)}static moveWordRight(e,t,n,s){let r=n.lineNumber,o=n.column,a=!1;o===t.getLineMaxColumn(r)&&r<t.getLineCount()&&(a=!0,r=r+1,o=1);let l=mi._findNextWordOnLine(e,t,new q(r,o));if(s===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=mi._findNextWordOnLine(e,t,new q(r,l.end+1))),l?o=l.end+1:o=t.getLineMaxColumn(r);else if(s===3){for(a&&(o=0);l&&(l.wordType===2||l.start+1<=o);)l=mi._findNextWordOnLine(e,t,new q(r,l.end+1));l?o=l.start+1:o=t.getLineMaxColumn(r)}else l&&!a&&o>=l.start+1&&(l=mi._findNextWordOnLine(e,t,new q(r,l.end+1))),l?o=l.start+1:o=t.getLineMaxColumn(r);return new q(r,o)}static _moveWordPartRight(e,t){const n=t.lineNumber,s=e.getLineMaxColumn(n);if(t.column===s)return n<e.getLineCount()?new q(n+1,1):t;const r=e.getLineContent(n);for(let o=t.column+1;o<s;o++){const a=r.charCodeAt(o-2),l=r.charCodeAt(o-1);if(a!==95&&l===95)return new q(n,o);if(hp(a)&&Ch(l))return new q(n,o);if(Ch(a)&&Ch(l)&&o+1<s){const c=r.charCodeAt(o);if(hp(c))return new q(n,o)}}return new q(n,s)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),s=t.column-2,r=S0(n,s);return r+1<s?new F(t.lineNumber,r+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,s=e.model,r=e.selection,o=e.whitespaceHeuristics;if(!r.isEmpty())return r;if(If.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const u=e.selection.getPosition();return new F(u.lineNumber,u.column-1,u.lineNumber,u.column+1)}const a=new q(r.positionLineNumber,r.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(o){let u=this._deleteWordLeftWhitespace(s,a);if(u)return u}let h=mi._findPreviousWordOnLine(n,s,a);return t===0?h?c=h.start+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l)):(h&&c<=h.end+1&&(h=mi._findPreviousWordOnLine(n,s,new q(l,h.start+1))),h?c=h.end+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l))),new F(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const s=new q(n.positionLineNumber,n.positionColumn);let r=this._deleteInsideWordWhitespace(t,s);return r||this._deleteInsideWordDetermineDeleteRange(e,t,s)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),s=n.length;if(s===0)return null;let r=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,r))return null;let o=Math.min(t.column-1,s-1);if(!this._charAtIsWhitespace(n,o))return null;for(;r>0&&this._charAtIsWhitespace(n,r-1);)r--;for(;o+1<s&&this._charAtIsWhitespace(n,o+1);)o++;return new F(t.lineNumber,r+1,t.lineNumber,o+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const s=t.getLineContent(n.lineNumber),r=s.length;if(r===0)return n.lineNumber>1?new F(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new F(n.lineNumber,1,n.lineNumber+1,1):new F(n.lineNumber,1,n.lineNumber,1);const o=u=>u.start+1<=n.column&&n.column<=u.end+1,a=(u,d)=>(u=Math.min(u,n.column),d=Math.max(d,n.column),new F(n.lineNumber,u,n.lineNumber,d)),l=u=>{let d=u.start+1,f=u.end+1,g=!1;for(;f-1<r&&this._charAtIsWhitespace(s,f-1);)g=!0,f++;if(!g)for(;d>1&&this._charAtIsWhitespace(s,d-2);)d--;return a(d,f)},c=mi._findPreviousWordOnLine(e,t,n);if(c&&o(c))return l(c);const h=mi._findNextWordOnLine(e,t,n);return h&&o(h)?l(h):c&&h?a(c.end+1,h.start+1):c?a(c.start+1,c.end+1):h?a(h.start+1,h.end+1):a(1,r+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),s=mi._moveWordPartLeft(e,n);return new F(n.lineNumber,n.column,s.lineNumber,s.column)}static _findFirstNonWhitespaceChar(e,t){let n=e.length;for(let s=t;s<n;s++){let r=e.charAt(s);if(r!==" "&&r!=="	")return s}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),s=t.column-1,r=this._findFirstNonWhitespaceChar(n,s);return s+1<r?new F(t.lineNumber,t.column,t.lineNumber,r+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,s=e.model,r=e.selection,o=e.whitespaceHeuristics;if(!r.isEmpty())return r;const a=new q(r.positionLineNumber,r.positionColumn);let l=a.lineNumber,c=a.column;const h=s.getLineCount(),u=s.getLineMaxColumn(l);if(l===h&&c===u)return null;if(o){let f=this._deleteWordRightWhitespace(s,a);if(f)return f}let d=mi._findNextWordOnLine(n,s,a);return t===2?d?c=d.end+1:c<u||l===h?c=u:(l++,d=mi._findNextWordOnLine(n,s,new q(l,1)),d?c=d.start+1:c=s.getLineMaxColumn(l)):(d&&c>=d.start+1&&(d=mi._findNextWordOnLine(n,s,new q(l,d.end+1))),d?c=d.start+1:c<u||l===h?c=u:(l++,d=mi._findNextWordOnLine(n,s,new q(l,1)),d?c=d.start+1:c=s.getLineMaxColumn(l))),new F(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),s=mi._moveWordPartRight(e,n);return new F(n.lineNumber,n.column,s.lineNumber,s.column)}static _createWordAtPosition(e,t,n){const s=new F(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(s),startColumn:s.startColumn,endColumn:s.endColumn}}static getWordAtPosition(e,t,n){const s=Em(t),r=mi._findPreviousWordOnLine(s,e,n);if(r&&r.wordType===1&&r.start<=n.column-1&&n.column-1<=r.end)return mi._createWordAtPosition(e,n.lineNumber,r);const o=mi._findNextWordOnLine(s,e,n);return o&&o.wordType===1&&o.start<=n.column-1&&n.column-1<=o.end?mi._createWordAtPosition(e,n.lineNumber,o):null}static word(e,t,n,s,r){const o=Em(e.wordSeparators);let a=mi._findPreviousWordOnLine(o,t,r),l=mi._findNextWordOnLine(o,t,r);if(!s){let f,g;return a&&a.wordType===1&&a.start<=r.column-1&&r.column-1<=a.end?(f=a.start+1,g=a.end+1):l&&l.wordType===1&&l.start<=r.column-1&&r.column-1<=l.end?(f=l.start+1,g=l.end+1):(a?f=a.end+1:f=1,l?g=l.start+1:g=t.getLineMaxColumn(r.lineNumber)),new pn(new F(r.lineNumber,f,r.lineNumber,g),0,new q(r.lineNumber,g),0)}let c,h;a&&a.wordType===1&&a.start<r.column-1&&r.column-1<a.end?(c=a.start+1,h=a.end+1):l&&l.wordType===1&&l.start<r.column-1&&r.column-1<l.end?(c=l.start+1,h=l.end+1):(c=r.column,h=r.column);let u=r.lineNumber,d;if(n.selectionStart.containsPosition(r))d=n.selectionStart.endColumn;else if(r.isBeforeOrEqual(n.selectionStart.getStartPosition())){d=c;let f=new q(u,d);n.selectionStart.containsPosition(f)&&(d=n.selectionStart.endColumn)}else{d=h;let f=new q(u,d);n.selectionStart.containsPosition(f)&&(d=n.selectionStart.startColumn)}return n.move(!0,u,d,0)}}class fn{static addCursorDown(e,t,n){let s=[],r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];s[r++]=new Qe(l.modelState,l.viewState),n?s[r++]=Qe.fromModelState(yt.translateDown(e.cursorConfig,e.model,l.modelState)):s[r++]=Qe.fromViewState(yt.translateDown(e.cursorConfig,e,l.viewState))}return s}static addCursorUp(e,t,n){let s=[],r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];s[r++]=new Qe(l.modelState,l.viewState),n?s[r++]=Qe.fromModelState(yt.translateUp(e.cursorConfig,e.model,l.modelState)):s[r++]=Qe.fromViewState(yt.translateUp(e.cursorConfig,e,l.viewState))}return s}static moveToBeginningOfLine(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=this._moveToLineStart(e,a,n)}return s}static _moveToLineStart(e,t,n){const s=t.viewState.position.column,r=t.modelState.position.column,o=s===r,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!o&&!(s===l)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return Qe.fromViewState(yt.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return Qe.fromModelState(yt.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,s){let r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=this._moveToLineEnd(e,l,n,s)}return r}static _moveToLineEnd(e,t,n,s){const r=t.viewState.position,o=e.getLineMaxColumn(r.lineNumber),a=r.column===o,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),h=o-r.column===c-l.column;return a||h?this._moveToLineEndByModel(e,t,n,s):this._moveToLineEndByView(e,t,n,s)}static _moveToLineEndByView(e,t,n,s){return Qe.fromViewState(yt.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,s))}static _moveToLineEndByModel(e,t,n,s){return Qe.fromModelState(yt.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,s))}static expandLineSelection(e,t){let n=[];for(let s=0,r=t.length;s<r;s++){const o=t[s],a=o.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=o.modelState.selection.endLineNumber,h;c===l?h=e.model.getLineMaxColumn(l):(c++,h=1),n[s]=Qe.fromModelState(new pn(new F(a,1,a,1),0,new q(c,h),0))}return n}static moveToBeginningOfBuffer(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=Qe.fromModelState(yt.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return s}static moveToEndOfBuffer(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=Qe.fromModelState(yt.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return s}static selectAll(e,t){const n=e.model.getLineCount(),s=e.model.getLineMaxColumn(n);return Qe.fromModelState(new pn(new F(1,1,1,1),0,new q(n,s),0))}static line(e,t,n,s,r){const o=e.model.validatePosition(s),a=r?e.coordinatesConverter.validateViewPosition(new q(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);if(!n||!t.modelState.hasSelection()){const c=e.model.getLineCount();let h=o.lineNumber+1,u=1;return h>c&&(h=c,u=e.model.getLineMaxColumn(h)),Qe.fromModelState(new pn(new F(o.lineNumber,1,h,u),0,new q(h,u),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(o.lineNumber<l)return Qe.fromViewState(t.viewState.move(t.modelState.hasSelection(),a.lineNumber,1,0));if(o.lineNumber>l){const c=e.getLineCount();let h=a.lineNumber+1,u=1;return h>c&&(h=c,u=e.getLineMaxColumn(h)),Qe.fromViewState(t.viewState.move(t.modelState.hasSelection(),h,u,0))}else{const c=t.modelState.selectionStart.getEndPosition();return Qe.fromModelState(t.modelState.move(t.modelState.hasSelection(),c.lineNumber,c.column,0))}}static word(e,t,n,s){const r=e.model.validatePosition(s);return Qe.fromModelState(mi.word(e.cursorConfig,e.model,t.modelState,n,r))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new Qe(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,s=t.viewState.position.column;return Qe.fromViewState(new pn(new F(n,s,n,s),0,new q(n,s),0))}static moveTo(e,t,n,s,r){const o=e.model.validatePosition(s),a=r?e.coordinatesConverter.validateViewPosition(new q(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);return Qe.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,s,r,o){switch(n){case 0:return o===4?this._moveHalfLineLeft(e,t,s):this._moveLeft(e,t,s,r);case 1:return o===4?this._moveHalfLineRight(e,t,s):this._moveRight(e,t,s,r);case 2:return o===2?this._moveUpByViewLines(e,t,s,r):this._moveUpByModelLines(e,t,s,r);case 3:return o===2?this._moveDownByViewLines(e,t,s,r):this._moveDownByModelLines(e,t,s,r);case 4:return o===2?t.map(a=>Qe.fromViewState(yt.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>Qe.fromModelState(yt.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 5:return o===2?t.map(a=>Qe.fromViewState(yt.moveToNextBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>Qe.fromModelState(yt.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 6:return this._moveToViewMinColumn(e,t,s);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,s);case 8:return this._moveToViewCenterColumn(e,t,s);case 9:return this._moveToViewMaxColumn(e,t,s);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,s);default:return null}}static viewportMove(e,t,n,s,r){const o=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(o);switch(n){case 11:{const l=this._firstLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 14:{let l=[];for(let c=0,h=t.length;c<h;c++){const u=t[c];l[c]=this.findPositionInViewportIfOutside(e,u,o,s)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,n,s){let r=t.viewState.position.lineNumber;if(n.startLineNumber<=r&&r<=n.endLineNumber-1)return new Qe(t.modelState,t.viewState);{let o;r>n.endLineNumber-1?o=n.endLineNumber-1:r<n.startLineNumber?o=n.startLineNumber:o=r;const a=yt.vertical(e.cursorConfig,e,r,t.viewState.position.column,t.viewState.leftoverVisibleColumns,o,!1);return Qe.fromViewState(t.viewState.move(s,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.min(t.endLineNumber,s+n-1)}static _lastLineNumberInRange(e,t,n){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.max(s,t.endLineNumber-n+1)}static _moveLeft(e,t,n,s){return t.map(r=>Qe.fromViewState(yt.moveLeft(e.cursorConfig,e,r.viewState,n,s)))}static _moveHalfLineLeft(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);s[r]=Qe.fromViewState(yt.moveLeft(e.cursorConfig,e,a.viewState,n,c))}return s}static _moveRight(e,t,n,s){return t.map(r=>Qe.fromViewState(yt.moveRight(e.cursorConfig,e,r.viewState,n,s)))}static _moveHalfLineRight(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);s[r]=Qe.fromViewState(yt.moveRight(e.cursorConfig,e,a.viewState,n,c))}return s}static _moveDownByViewLines(e,t,n,s){let r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Qe.fromViewState(yt.moveDown(e.cursorConfig,e,l.viewState,n,s))}return r}static _moveDownByModelLines(e,t,n,s){let r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Qe.fromModelState(yt.moveDown(e.cursorConfig,e.model,l.modelState,n,s))}return r}static _moveUpByViewLines(e,t,n,s){let r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Qe.fromViewState(yt.moveUp(e.cursorConfig,e,l.viewState,n,s))}return r}static _moveUpByModelLines(e,t,n,s){let r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Qe.fromModelState(yt.moveUp(e.cursorConfig,e.model,l.modelState,n,s))}return r}static _moveToViewPosition(e,t,n,s,r){return Qe.fromViewState(t.viewState.move(n,s,r,0))}static _moveToModelPosition(e,t,n,s,r){return Qe.fromModelState(t.modelState.move(n,s,r,0))}static _moveToViewMinColumn(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);s[r]=this._moveToViewPosition(e,a,n,l,c)}return s}static _moveToViewFirstNonWhitespaceColumn(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);s[r]=this._moveToViewPosition(e,a,n,l,c)}return s}static _moveToViewCenterColumn(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);s[r]=this._moveToViewPosition(e,a,n,l,c)}return s}static _moveToViewMaxColumn(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);s[r]=this._moveToViewPosition(e,a,n,l,c)}return s}static _moveToViewLastNonWhitespaceColumn(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);s[r]=this._moveToViewPosition(e,a,n,l,c)}return s}}var Jx;(function(i){const e=function(n){if(!xs(n))return!1;let s=n;return!(!Ca(s.to)||!cs(s.select)&&!sY(s.select)||!cs(s.by)&&!Ca(s.by)||!cs(s.value)&&!Cf(s.value))};i.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},i.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(n){if(!n.to)return null;let s;switch(n.to){case i.RawDirection.Left:s=0;break;case i.RawDirection.Right:s=1;break;case i.RawDirection.Up:s=2;break;case i.RawDirection.Down:s=3;break;case i.RawDirection.PrevBlankLine:s=4;break;case i.RawDirection.NextBlankLine:s=5;break;case i.RawDirection.WrappedLineStart:s=6;break;case i.RawDirection.WrappedLineFirstNonWhitespaceCharacter:s=7;break;case i.RawDirection.WrappedLineColumnCenter:s=8;break;case i.RawDirection.WrappedLineEnd:s=9;break;case i.RawDirection.WrappedLineLastNonWhitespaceCharacter:s=10;break;case i.RawDirection.ViewPortTop:s=11;break;case i.RawDirection.ViewPortBottom:s=13;break;case i.RawDirection.ViewPortCenter:s=12;break;case i.RawDirection.ViewPortIfOutside:s=14;break;default:return null}let r=0;switch(n.by){case i.RawUnit.Line:r=1;break;case i.RawUnit.WrappedLine:r=2;break;case i.RawUnit.Character:r=3;break;case i.RawUnit.HalfLine:r=4;break}return{direction:s,unit:r,select:!!n.select,value:n.value||1}}i.parse=t})(Jx||(Jx={}));const pE=Object.create(null);function Zu(i,e){if(e<=0)return"";pE[i]||(pE[i]=["",i]);const t=pE[i];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+i;return t[e]}class Oh{constructor(e,t){this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,n,s,r){const o=At.visibleColumnFromColumn(e,t,n);if(r){const a=Zu(" ",s),c=At.prevIndentTabStop(o,s)/s;return Zu(a,c)}else{const a="	",c=At.prevRenderTabStop(o,n)/n;return Zu(a,c)}}static shiftIndent(e,t,n,s,r){const o=At.visibleColumnFromColumn(e,t,n);if(r){const a=Zu(" ",s),c=At.nextIndentTabStop(o,s)/s;return Zu(a,c)}else{const a="	",c=At.nextRenderTabStop(o,n)/n;return Zu(a,c)}}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){const n=this._selection.startLineNumber;let s=this._selection.endLineNumber;this._selection.endColumn===1&&n!==s&&(s=s-1);const{tabSize:r,indentSize:o,insertSpaces:a}=this._opts,l=n===s;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,h=0;for(let u=n;u<=s;u++,c=h){h=0;let d=e.getLineContent(u),f=Zs(d);if(this._opts.isUnshift&&(d.length===0||f===0)||!l&&!this._opts.isUnshift&&d.length===0)continue;if(f===-1&&(f=d.length),u>1&&At.visibleColumnFromColumn(d,f+1,r)%o!==0&&e.isCheapToTokenize(u-1)){let m=Ii.getEnterAction(this._opts.autoIndent,e,new F(u-1,e.getLineMaxColumn(u-1),u-1,e.getLineMaxColumn(u-1)));if(m){if(h=c,m.appendText)for(let v=0,b=m.appendText.length;v<b&&h<o&&m.appendText.charCodeAt(v)===32;v++)h++;m.removeText&&(h=Math.max(0,h-m.removeText));for(let v=0;v<h&&!(f===0||d.charCodeAt(f-1)!==32);v++)f--}}if(this._opts.isUnshift&&f===0)continue;let g;this._opts.isUnshift?g=Oh.unshiftIndent(d,f+1,r,o,a):g=Oh.shiftIndent(d,f+1,r,o,a),this._addEditOperation(t,new F(u,1,u,f+1),g),u===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=f+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?Zu(" ",o):"	";for(let h=n;h<=s;h++){const u=e.getLineContent(h);let d=Zs(u);if(!(this._opts.isUnshift&&(u.length===0||d===0))&&!(!l&&!this._opts.isUnshift&&u.length===0)&&(d===-1&&(d=u.length),!(this._opts.isUnshift&&d===0)))if(this._opts.isUnshift){d=Math.min(d,o);for(let f=0;f<d;f++)if(u.charCodeAt(f)===9){d=f+1;break}this._addEditOperation(t,new F(h,1,h,d+1),"")}else this._addEditOperation(t,new F(h,1,h,1),c),h===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){let s=t.getInverseEditOperations()[0];return new Ve(s.range.endLineNumber,s.range.endColumn,s.range.endLineNumber,s.range.endColumn)}const n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){let s=this._selection.startColumn;return n.startColumn<=s?n:n.getDirection()===0?new Ve(n.startLineNumber,s,n.endLineNumber,n.endColumn):new Ve(n.endLineNumber,n.endColumn,n.startLineNumber,s)}return n}}class PIe{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new F(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new F(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){let n=t.getInverseEditOperations(),s=n[0].range,r=n[1].range;return new Ve(s.endLineNumber,s.endColumn,r.endLineNumber,r.endColumn-this._charAfterSelection.length)}}class _i{static indent(e,t,n){if(t===null||n===null)return[];let s=[];for(let r=0,o=n.length;r<o;r++)s[r]=new Oh(n[r],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return s}static outdent(e,t,n){let s=[];for(let r=0,o=n.length;r<o;r++)s[r]=new Oh(n[r],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return s}static shiftIndent(e,t,n){return n=n||1,Oh.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,n){return n=n||1,Oh.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,n,s){let r=[];for(let o=0,a=n.length;o<a;o++)r[o]=new vs(n[o],s[o]);return new Hs(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,s,r){let o=[];for(let a=0,l=n.length;a<l;a++){const c=n[a];let h=c.getPosition();if(r&&!c.isEmpty()&&(r=!1),r&&s.indexOf(`
`)!==s.length-1&&(r=!1),r){let u=new F(h.lineNumber,1,h.lineNumber,1);o[a]=new cX(u,s,c,!0)}else o[a]=new vs(c,s)}return new Hs(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,n,s,r){if(s||t.length===1)return null;if(r&&r.length===t.length)return r;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substr(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substr(0,n.length-1));let o=El(n);if(o.length===t.length)return o}return null}static paste(e,t,n,s,r,o){const a=this._distributePasteToCursors(e,n,s,r,o);return a?(n=n.sort(F.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,s,r)}static _goodIndentForLine(e,t,n){let s=null,r="";const o=Ii.getInheritIndentForLine(e.autoIndent,t,n,!1);if(o)s=o.action,r=o.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){const h=t.getLineContent(a);if(S0(h)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=Ii.getEnterAction(e.autoIndent,t,new F(a,l,a,l));c&&(r=c.indentation+c.appendText)}return s&&(s===rn.Indent&&(r=_i.shiftIndent(e,r)),s===rn.Outdent&&(r=_i.unshiftIndent(e,r)),r=e.normalizeIndentation(r)),r||null}static _replaceJumpToNextIndent(e,t,n,s){let r="",o=n.getStartPosition();if(e.insertSpaces){let a=At.visibleColumnFromColumn2(e,t,o),l=e.indentSize,c=l-a%l;for(let h=0;h<c;h++)r+=" "}else r="	";return new vs(n,r,s)}static tab(e,t,n){let s=[];for(let r=0,o=n.length;r<o;r++){const a=n[r];if(a.isEmpty()){let l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";let h=e.normalizeIndentation(c);if(!l.startsWith(h)){s[r]=new vs(new F(a.startLineNumber,1,a.startLineNumber,l.length+1),h,!0);continue}}s[r]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){let l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){s[r]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}s[r]=new Oh(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent})}}return s}static compositionType(e,t,n,s,r,o,a,l){const c=s.map(h=>this._compositionType(n,h,r,o,a,l));return new Hs(4,c,{shouldPushStackElementBefore:Ry(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,s,r,o){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-s),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+r),h=new F(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(h)===n&&o===0?null:new JC(h,n,0,o)}static _typeCommand(e,t,n){return n?new My(e,t,!0):new vs(e,t,!0)}static _enter(e,t,n,s){if(e.autoIndent===0)return _i._typeCommand(s,`
`,n);if(!t.isCheapToTokenize(s.getStartPosition().lineNumber)||e.autoIndent===1){let l=t.getLineContent(s.startLineNumber),c=qi(l).substring(0,s.startColumn-1);return _i._typeCommand(s,`
`+e.normalizeIndentation(c),n)}const r=Ii.getEnterAction(e.autoIndent,t,s);if(r){if(r.indentAction===rn.None)return _i._typeCommand(s,`
`+e.normalizeIndentation(r.indentation+r.appendText),n);if(r.indentAction===rn.Indent)return _i._typeCommand(s,`
`+e.normalizeIndentation(r.indentation+r.appendText),n);if(r.indentAction===rn.IndentOutdent){const l=e.normalizeIndentation(r.indentation),c=e.normalizeIndentation(r.indentation+r.appendText),h=`
`+c+`
`+l;return n?new My(s,h,!0):new JC(s,h,-1,c.length-l.length,!0)}else if(r.indentAction===rn.Outdent){const l=_i.unshiftIndent(e,r.indentation);return _i._typeCommand(s,`
`+e.normalizeIndentation(l+r.appendText),n)}}const o=t.getLineContent(s.startLineNumber),a=qi(o).substring(0,s.startColumn-1);if(e.autoIndent>=4){const l=Ii.getIndentForEnter(e.autoIndent,t,s,{unshiftIndent:c=>_i.unshiftIndent(e,c),shiftIndent:c=>_i.shiftIndent(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)});if(l){let c=At.visibleColumnFromColumn2(e,t,s.getEndPosition());const h=s.endColumn,u=t.getLineContent(s.endLineNumber),d=Zs(u);if(d>=0?s=s.setEndPosition(s.endLineNumber,Math.max(s.endColumn,d+1)):s=s.setEndPosition(s.endLineNumber,t.getLineMaxColumn(s.endLineNumber)),n)return new My(s,`
`+e.normalizeIndentation(l.afterEnter),!0);{let f=0;return h<=d+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),f=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new JC(s,`
`+e.normalizeIndentation(l.afterEnter),0,f,!0)}}}return _i._typeCommand(s,`
`+e.normalizeIndentation(a),n)}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let s=0,r=n.length;s<r;s++)if(!t.isCheapToTokenize(n[s].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,n,s){const r=Ii.getIndentationAtPosition(t,n.startLineNumber,n.startColumn),o=Ii.getIndentActionForType(e.autoIndent,t,n,s,{shiftIndent:a=>_i.shiftIndent(e,a),unshiftIndent:a=>_i.unshiftIndent(e,a)});if(o===null)return null;if(o!==e.normalizeIndentation(r)){const a=t.getLineFirstNonWhitespaceColumn(n.startLineNumber);return a===0?_i._typeCommand(new F(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(o)+s,!1):_i._typeCommand(new F(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(o)+t.getLineContent(n.startLineNumber).substring(a-1,n.startColumn-1)+s,!1)}return null}static _isAutoClosingOvertype(e,t,n,s,r){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(r))return!1;for(let o=0,a=n.length;o<a;o++){const l=n[o];if(!l.isEmpty())return!1;const c=l.getPosition(),h=t.getLineContent(c.lineNumber);if(h.charAt(c.column-1)!==r)return!1;const d=ep(r);if((c.column>2?h.charCodeAt(c.column-2):0)===92&&d)return!1;if(e.autoClosingOvertype==="auto"){let g=!1;for(let p=0,m=s.length;p<m;p++){const v=s[p];if(c.lineNumber===v.startLineNumber&&c.column===v.startColumn){g=!0;break}}if(!g)return!1}}return!0}static _runAutoClosingOvertype(e,t,n,s,r){let o=[];for(let a=0,l=s.length;a<l;a++){const h=s[a].getPosition(),u=new F(h.lineNumber,h.column,h.lineNumber,h.column+1);o[a]=new vs(u,r)}return new Hs(4,o,{shouldPushStackElementBefore:Ry(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),s=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],r=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],o=s.some(l=>t.startsWith(l.open)),a=r.some(l=>t.startsWith(l.close));return!o&&a}static _findAutoClosingPairOpen(e,t,n,s){const r=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(s);if(!r)return null;let o=null;for(const a of r)if(o===null||a.open.length>o.open.length){let l=!0;for(const c of n)if(t.getValueInRange(new F(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+s!==a.open){l=!1;break}l&&(o=a)}return o}static _findSubAutoClosingPairClose(e,t){if(t.open.length<=1)return"";const n=t.close.charAt(t.close.length-1),s=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let r=null;for(const o of s)o.open!==t.open&&t.open.includes(o.open)&&t.close.endsWith(o.close)&&(!r||o.open.length>r.open.length)&&(r=o);return r?r.close:""}static _getAutoClosingPairClose(e,t,n,s,r){const o=ep(s),a=o?e.autoClosingQuotes:e.autoClosingBrackets;if(a==="never")return null;const l=this._findAutoClosingPairOpen(e,t,n.map(d=>d.getPosition()),s);if(!l)return null;const c=this._findSubAutoClosingPairClose(e,l);let h=!0;const u=o?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;for(let d=0,f=n.length;d<f;d++){const g=n[d];if(!g.isEmpty())return null;const p=g.getPosition(),m=t.getLineContent(p.lineNumber),v=m.substring(p.column-1);if(v.startsWith(c)||(h=!1),m.length>p.column-1){const y=m.charAt(p.column-1);if(!_i._isBeforeClosingBrace(e,v)&&!u(y))return null}if(!t.isCheapToTokenize(p.lineNumber))return null;if(l.open.length===1&&(s==="'"||s==='"')&&a!=="always"){const y=Em(e.wordSeparators);if(r&&p.column>1&&y.get(m.charCodeAt(p.column-2))===0||!r&&p.column>2&&y.get(m.charCodeAt(p.column-3))===0)return null}t.forceTokenization(p.lineNumber);const b=t.getLineTokens(p.lineNumber);let w=!1;try{w=Ii.shouldAutoClosePair(l,b,r?p.column:p.column-1)}catch(y){Ke(y)}if(!w)return null}return h?l.close.substring(0,l.close.length-c.length):l.close}static _runAutoClosingOpenCharType(e,t,n,s,r,o,a){let l=[];for(let c=0,h=s.length;c<h;c++){const u=s[c];l[c]=new hX(u,r,o,a)}return new Hs(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return ep(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,n,s){if(!_i._shouldSurroundChar(e,s)||!e.surroundingPairs.hasOwnProperty(s))return!1;const r=ep(s);for(let o=0,a=n.length;o<a;o++){const l=n[o];if(l.isEmpty())return!1;let c=!0;for(let h=l.startLineNumber;h<=l.endLineNumber;h++){const u=t.getLineContent(h),d=h===l.startLineNumber?l.startColumn-1:0,f=h===l.endLineNumber?l.endColumn-1:u.length,g=u.substring(d,f);if(/[^ \t]/.test(g)){c=!1;break}}if(c)return!1;if(r&&l.startLineNumber===l.endLineNumber&&l.startColumn+1===l.endColumn){const h=t.getValueInRange(l);if(ep(h))return!1}}return!0}static _runSurroundSelectionType(e,t,n,s,r){let o=[];for(let a=0,l=s.length;a<l;a++){const c=s[a],h=t.surroundingPairs[r];o[a]=new PIe(c,r,h)}return new Hs(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,s,r){if(!t.electricChars.hasOwnProperty(r)||!s.isEmpty())return null;let o=s.getPosition();n.forceTokenization(o.lineNumber);let a=n.getLineTokens(o.lineNumber),l;try{l=Ii.onElectricCharacter(r,a,o.column)}catch(c){return Ke(c),null}if(!l)return null;if(l.matchOpenBracket){let c=(a.getLineContent()+r).lastIndexOf(l.matchOpenBracket)+1,h=n.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:o.lineNumber,column:c});if(h){if(h.startLineNumber===o.lineNumber)return null;let u=n.getLineContent(h.startLineNumber),d=qi(u),f=t.normalizeIndentation(d),g=n.getLineContent(o.lineNumber),p=n.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,m=g.substring(p-1,o.column-1),v=f+m+r,b=new F(o.lineNumber,1,o.lineNumber,o.column);const w=new vs(b,v);return new Hs(mE(v,e),[w],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,n,s,r,o){if(!s||Ve.selectionsArrEqual(s,r))return null;let a=null;for(const c of r){if(!c.isEmpty())return null;const h=c.getPosition(),u=n.getValueInRange(new F(h.lineNumber,h.column-1,h.lineNumber,h.column));if(a===null)a=u;else if(a!==u)return null}if(!a)return null;if(this._isAutoClosingOvertype(t,n,r,o,a)){const c=r.map(h=>new vs(new F(h.positionLineNumber,h.positionColumn,h.positionLineNumber,h.positionColumn+1),"",!1));return new Hs(4,c,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const l=this._getAutoClosingPairClose(t,n,r,a,!1);return l!==null?this._runAutoClosingOpenCharType(e,t,n,r,a,!1,l):null}static typeWithInterceptors(e,t,n,s,r,o,a){if(!e&&a===`
`){let h=[];for(let u=0,d=r.length;u<d;u++)h[u]=_i._enter(n,s,!1,r[u]);return new Hs(4,h,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(n,s,r)){let h=[],u=!1;for(let d=0,f=r.length;d<f;d++)if(h[d]=this._runAutoIndentType(n,s,r[d],a),!h[d]){u=!0;break}if(!u)return new Hs(4,h,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoClosingOvertype(n,s,r,o,a))return this._runAutoClosingOvertype(t,n,s,r,a);if(!e){const h=this._getAutoClosingPairClose(n,s,r,a,!0);if(h)return this._runAutoClosingOpenCharType(t,n,s,r,a,!0,h)}if(this._isSurroundSelectionType(n,s,r,a))return this._runSurroundSelectionType(t,n,s,r,a);if(!e&&this._isTypeInterceptorElectricChar(n,s,r)){const h=this._typeInterceptorElectricChar(t,n,s,r[0],a);if(h)return h}let l=[];for(let h=0,u=r.length;h<u;h++)l[h]=new vs(r[h],a);const c=mE(a,t);return new Hs(c,l,{shouldPushStackElementBefore:Ry(t,c),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,n,s,r){let o=[];for(let l=0,c=s.length;l<c;l++)o[l]=new vs(s[l],r);const a=mE(r,e);return new Hs(a,o,{shouldPushStackElementBefore:Ry(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];let s=[];for(let r=0,o=n.length;r<o;r++){let a=n[r].positionLineNumber;if(a===1)s[r]=new My(new F(1,1,1,1),`
`);else{a--;let l=t.getLineMaxColumn(a);s[r]=this._enter(e,t,!1,new F(a,l,a,l))}}return s}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];let s=[];for(let r=0,o=n.length;r<o;r++){const a=n[r].positionLineNumber;let l=t.getLineMaxColumn(a);s[r]=this._enter(e,t,!1,new F(a,l,a,l))}return s}static lineBreakInsert(e,t,n){let s=[];for(let r=0,o=n.length;r<o;r++)s[r]=this._enter(e,t,!0,n[r]);return s}}class hX extends JC{constructor(e,t,n,s){super(e,(n?t:"")+s,0,-s.length),this._openCharacter=t,this._closeCharacter=s,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){let s=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new F(s.startLineNumber,s.endColumn-this._closeCharacter.length,s.endLineNumber,s.endColumn),this.enclosingRange=new F(s.startLineNumber,s.endColumn-this._openCharacter.length-this._closeCharacter.length,s.endLineNumber,s.endColumn),super.computeCursorState(e,t)}}function mE(i,e){return i===" "?e===5||e===6?6:5:4}function Ry(i,e){return IV(i)&&!IV(e)?!0:i===5?!1:EV(i)!==EV(e)}function EV(i){return i===6||i===5?"space":i}function IV(i){return i===4||i===5||i===6}var G;(function(i){i.editorSimpleInput=new De("editorSimpleInput",!1,!0),i.editorTextFocus=new De("editorTextFocus",!1,_("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),i.focus=new De("editorFocus",!1,_("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),i.textInputFocus=new De("textInputFocus",!1,_("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),i.readOnly=new De("editorReadonly",!1,_("editorReadonly","Whether the editor is read only")),i.inDiffEditor=new De("inDiffEditor",!1,_("inDiffEditor","Whether the context is a diff editor")),i.columnSelection=new De("editorColumnSelection",!1,_("editorColumnSelection","Whether `editor.columnSelection` is enabled")),i.writable=i.readOnly.toNegated(),i.hasNonEmptySelection=new De("editorHasSelection",!1,_("editorHasSelection","Whether the editor has text selected")),i.hasOnlyEmptySelection=i.hasNonEmptySelection.toNegated(),i.hasMultipleSelections=new De("editorHasMultipleSelections",!1,_("editorHasMultipleSelections","Whether the editor has multiple selections")),i.hasSingleSelection=i.hasMultipleSelections.toNegated(),i.tabMovesFocus=new De("editorTabMovesFocus",!1,_("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),i.tabDoesNotMoveFocus=i.tabMovesFocus.toNegated(),i.isInWalkThroughSnippet=new De("isInEmbeddedEditor",!1,!0),i.canUndo=new De("canUndo",!1,!0),i.canRedo=new De("canRedo",!1,!0),i.hoverVisible=new De("editorHoverVisible",!1,_("editorHoverVisible","Whether the editor hover is visible")),i.inCompositeEditor=new De("inCompositeEditor",void 0,_("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),i.notInCompositeEditor=i.inCompositeEditor.toNegated(),i.languageId=new De("editorLangId","",_("editorLangId","The language identifier of the editor")),i.hasCompletionItemProvider=new De("editorHasCompletionItemProvider",!1,_("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),i.hasCodeActionsProvider=new De("editorHasCodeActionsProvider",!1,_("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),i.hasCodeLensProvider=new De("editorHasCodeLensProvider",!1,_("editorHasCodeLensProvider","Whether the editor has a code lens provider")),i.hasDefinitionProvider=new De("editorHasDefinitionProvider",!1,_("editorHasDefinitionProvider","Whether the editor has a definition provider")),i.hasDeclarationProvider=new De("editorHasDeclarationProvider",!1,_("editorHasDeclarationProvider","Whether the editor has a declaration provider")),i.hasImplementationProvider=new De("editorHasImplementationProvider",!1,_("editorHasImplementationProvider","Whether the editor has an implementation provider")),i.hasTypeDefinitionProvider=new De("editorHasTypeDefinitionProvider",!1,_("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),i.hasHoverProvider=new De("editorHasHoverProvider",!1,_("editorHasHoverProvider","Whether the editor has a hover provider")),i.hasDocumentHighlightProvider=new De("editorHasDocumentHighlightProvider",!1,_("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),i.hasDocumentSymbolProvider=new De("editorHasDocumentSymbolProvider",!1,_("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),i.hasReferenceProvider=new De("editorHasReferenceProvider",!1,_("editorHasReferenceProvider","Whether the editor has a reference provider")),i.hasRenameProvider=new De("editorHasRenameProvider",!1,_("editorHasRenameProvider","Whether the editor has a rename provider")),i.hasSignatureHelpProvider=new De("editorHasSignatureHelpProvider",!1,_("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),i.hasInlayHintsProvider=new De("editorHasInlayHintsProvider",!1,_("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),i.hasDocumentFormattingProvider=new De("editorHasDocumentFormattingProvider",!1,_("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),i.hasDocumentSelectionFormattingProvider=new De("editorHasDocumentSelectionFormattingProvider",!1,_("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),i.hasMultipleDocumentFormattingProvider=new De("editorHasMultipleDocumentFormattingProvider",!1,_("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),i.hasMultipleDocumentSelectionFormattingProvider=new De("editorHasMultipleDocumentSelectionFormattingProvider",!1,_("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(G||(G={}));const dt=0;class Ci extends Zr{runEditorCommand(e,t,n){const s=t._getViewModel();s&&this.runCoreEditorCommand(s,n||{})}}var eD;(function(i){const e=function(n){if(!xs(n))return!1;const s=n;return!(!Ca(s.to)||!cs(s.by)&&!Ca(s.by)||!cs(s.value)&&!Cf(s.value)||!cs(s.revealCursor)&&!sY(s.revealCursor))};i.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},i.RawDirection={Up:"up",Down:"down"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage"};function t(n){let s;switch(n.to){case i.RawDirection.Up:s=1;break;case i.RawDirection.Down:s=2;break;default:return null}let r;switch(n.by){case i.RawUnit.Line:r=1;break;case i.RawUnit.WrappedLine:r=2;break;case i.RawUnit.Page:r=3;break;case i.RawUnit.HalfPage:r=4;break;default:r=2}const o=Math.floor(n.value||1),a=!!n.revealCursor;return{direction:s,unit:r,value:o,revealCursor:a,select:!!n.select}}i.parse=t})(eD||(eD={}));var mp;(function(i){const e=function(t){if(!xs(t))return!1;const n=t;return!(!Cf(n.lineNumber)&&!Ca(n.lineNumber)||!cs(n.at)&&!Ca(n.at))};i.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},i.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(mp||(mp={}));class jM{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{const s=t.get(ii).getFocusedCodeEditor();return s&&s.hasTextFocus()?this._runEditorCommand(t,s,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{const s=document.activeElement;return s&&["input","textarea"].indexOf(s.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{const s=t.get(ii).getActiveCodeEditor();return s?(s.focus(),this._runEditorCommand(t,s,n)):!1})}_runEditorCommand(e,t,n){const s=this.runEditorCommand(e,t,n);return s||!0}}var nn;(function(i){class e extends Ci{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,[fn.moveTo(b,b.getPrimaryCursorState(),this._inSelectionMode,w.position,w.viewPosition)]),b.revealPrimaryCursor(w.source,!0)}}i.MoveTo=pe(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),i.MoveToSelect=pe(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends Ci{runCoreEditorCommand(b,w){b.model.pushStackElement();const y=this._getColumnSelectResult(b,b.getPrimaryCursorState(),b.getCursorColumnSelectData(),w);b.setCursorStates(w.source,3,y.viewStates.map(x=>Qe.fromViewState(x))),b.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:y.fromLineNumber,fromViewVisualColumn:y.fromVisualColumn,toViewLineNumber:y.toLineNumber,toViewVisualColumn:y.toVisualColumn}),y.reversed?b.revealTopMostCursor(w.source):b.revealBottomMostCursor(w.source)}}i.ColumnSelect=pe(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(v,b,w,y){const x=v.model.validatePosition(y.position),k=v.coordinatesConverter.validateViewPosition(new q(y.viewPosition.lineNumber,y.viewPosition.column),x);let S=y.doColumnSelect?w.fromViewLineNumber:k.lineNumber,L=y.doColumnSelect?w.fromViewVisualColumn:y.mouseColumn-1;return ud.columnSelect(v.cursorConfig,v,S,L,k.lineNumber,y.mouseColumn-1)}}),i.CursorColumnSelectLeft=pe(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(v,b,w,y){return ud.columnSelectLeft(v.cursorConfig,v,w)}}),i.CursorColumnSelectRight=pe(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(v,b,w,y){return ud.columnSelectRight(v.cursorConfig,v,w)}});class n extends t{constructor(b){super(b),this._isPaged=b.isPaged}_getColumnSelectResult(b,w,y,x){return ud.columnSelectUp(b.cursorConfig,b,y,this._isPaged)}}i.CursorColumnSelectUp=pe(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:3600,linux:{primary:0}}})),i.CursorColumnSelectPageUp=pe(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:3595,linux:{primary:0}}}));class s extends t{constructor(b){super(b),this._isPaged=b.isPaged}_getColumnSelectResult(b,w,y,x){return ud.columnSelectDown(b.cursorConfig,b,y,this._isPaged)}}i.CursorColumnSelectDown=pe(new s({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:3602,linux:{primary:0}}})),i.CursorColumnSelectPageDown=pe(new s({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:3596,linux:{primary:0}}}));class r extends Ci{constructor(){super({id:"cursorMove",precondition:void 0,description:Jx.description})}runCoreEditorCommand(b,w){const y=Jx.parse(w);y&&this._runCursorMove(b,w.source,y)}_runCursorMove(b,w,y){b.model.pushStackElement(),b.setCursorStates(w,3,r._move(b,b.getCursorStates(),y)),b.revealPrimaryCursor(w,!0)}static _move(b,w,y){const x=y.select,k=y.value;switch(y.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return fn.simpleMove(b,w,y.direction,x,k,y.unit);case 11:case 13:case 12:case 14:return fn.viewportMove(b,w,y.direction,x,k);default:return null}}}i.CursorMoveImpl=r,i.CursorMove=pe(new r);class o extends Ci{constructor(b){super(b),this._staticArgs=b.args}runCoreEditorCommand(b,w){let y=this._staticArgs;this._staticArgs.value===-1&&(y={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:b.cursorConfig.pageSize}),b.model.pushStackElement(),b.setCursorStates(w.source,3,fn.simpleMove(b,b.getCursorStates(),y.direction,y.select,y.value,y.unit)),b.revealPrimaryCursor(w.source,!0)}}i.CursorLeft=pe(new o({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),i.CursorLeftSelect=pe(new o({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:1039}})),i.CursorRight=pe(new o({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),i.CursorRightSelect=pe(new o({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:1041}})),i.CursorUp=pe(new o({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),i.CursorUpSelect=pe(new o({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),i.CursorPageUp=pe(new o({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:11}})),i.CursorPageUpSelect=pe(new o({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:1035}})),i.CursorDown=pe(new o({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),i.CursorDownSelect=pe(new o({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),i.CursorPageDown=pe(new o({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:12}})),i.CursorPageDownSelect=pe(new o({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:1036}})),i.CreateCursor=pe(new class extends Ci{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(v,b){let w;b.wholeLine?w=fn.line(v,v.getPrimaryCursorState(),!1,b.position,b.viewPosition):w=fn.moveTo(v,v.getPrimaryCursorState(),!1,b.position,b.viewPosition);const y=v.getCursorStates();if(y.length>1){const x=w.modelState?w.modelState.position:null,k=w.viewState?w.viewState.position:null;for(let S=0,L=y.length;S<L;S++){const D=y[S];if(!(x&&!D.modelState.selection.containsPosition(x))&&!(k&&!D.viewState.selection.containsPosition(k))){y.splice(S,1),v.model.pushStackElement(),v.setCursorStates(b.source,3,y);return}}}y.push(w),v.model.pushStackElement(),v.setCursorStates(b.source,3,y)}}),i.LastCursorMoveToSelect=pe(new class extends Ci{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(v,b){const w=v.getLastAddedCursorIndex(),y=v.getCursorStates(),x=y.slice(0);x[w]=fn.moveTo(v,y[w],!0,b.position,b.viewPosition),v.model.pushStackElement(),v.setCursorStates(b.source,3,x)}});class a extends Ci{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,fn.moveToBeginningOfLine(b,b.getCursorStates(),this._inSelectionMode)),b.revealPrimaryCursor(w.source,!0)}}i.CursorHome=pe(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),i.CursorHomeSelect=pe(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends Ci{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,this._exec(b.getCursorStates())),b.revealPrimaryCursor(w.source,!0)}_exec(b){const w=[];for(let y=0,x=b.length;y<x;y++){const k=b[y],S=k.modelState.position.lineNumber;w[y]=Qe.fromModelState(k.modelState.move(this._inSelectionMode,S,1,0))}return w}}i.CursorLineStart=pe(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:0,mac:{primary:287}}})),i.CursorLineStartSelect=pe(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends Ci{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,fn.moveToEndOfLine(b,b.getCursorStates(),this._inSelectionMode,w.sticky||!1)),b.revealPrimaryCursor(w.source,!0)}}i.CursorEnd=pe(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:dt,kbExpr:G.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:_("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),i.CursorEndSelect=pe(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:dt,kbExpr:G.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:_("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class h extends Ci{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,this._exec(b,b.getCursorStates())),b.revealPrimaryCursor(w.source,!0)}_exec(b,w){const y=[];for(let x=0,k=w.length;x<k;x++){const S=w[x],L=S.modelState.position.lineNumber,D=b.model.getLineMaxColumn(L);y[x]=Qe.fromModelState(S.modelState.move(this._inSelectionMode,L,D,0))}return y}}i.CursorLineEnd=pe(new h({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:0,mac:{primary:291}}})),i.CursorLineEndSelect=pe(new h({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:0,mac:{primary:1315}}}));class u extends Ci{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,fn.moveToBeginningOfBuffer(b,b.getCursorStates(),this._inSelectionMode)),b.revealPrimaryCursor(w.source,!0)}}i.CursorTop=pe(new u({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:2062,mac:{primary:2064}}})),i.CursorTopSelect=pe(new u({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:3086,mac:{primary:3088}}}));class d extends Ci{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,fn.moveToEndOfBuffer(b,b.getCursorStates(),this._inSelectionMode)),b.revealPrimaryCursor(w.source,!0)}}i.CursorBottom=pe(new d({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:2061,mac:{primary:2066}}})),i.CursorBottomSelect=pe(new d({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:3085,mac:{primary:3090}}}));class f extends Ci{constructor(){super({id:"editorScroll",precondition:void 0,description:eD.description})}runCoreEditorCommand(b,w){const y=eD.parse(w);y&&this._runEditorScroll(b,w.source,y)}_runEditorScroll(b,w,y){const x=this._computeDesiredScrollTop(b,y);if(y.revealCursor){const k=b.getCompletelyVisibleViewRangeAtScrollTop(x);b.setCursorStates(w,3,[fn.findPositionInViewportIfOutside(b,b.getPrimaryCursorState(),k,y.select)])}b.setScrollTop(x,0)}_computeDesiredScrollTop(b,w){if(w.unit===1){const k=b.getCompletelyVisibleViewRange(),S=b.coordinatesConverter.convertViewRangeToModelRange(k);let L;w.direction===1?L=Math.max(1,S.startLineNumber-w.value):L=Math.min(b.model.getLineCount(),S.startLineNumber+w.value);const D=b.coordinatesConverter.convertModelPositionToViewPosition(new q(L,1));return b.getVerticalOffsetForLineNumber(D.lineNumber)}let y;w.unit===3?y=b.cursorConfig.pageSize*w.value:w.unit===4?y=Math.round(b.cursorConfig.pageSize/2)*w.value:y=w.value;const x=(w.direction===1?-1:1)*y;return b.getScrollTop()+x*b.cursorConfig.lineHeight}}i.EditorScrollImpl=f,i.EditorScroll=pe(new f),i.ScrollLineUp=pe(new class extends Ci{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(v,b){i.EditorScroll._runEditorScroll(v,b.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),i.ScrollPageUp=pe(new class extends Ci{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(v,b){i.EditorScroll._runEditorScroll(v,b.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),i.ScrollLineDown=pe(new class extends Ci{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(v,b){i.EditorScroll._runEditorScroll(v,b.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),i.ScrollPageDown=pe(new class extends Ci{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(v,b){i.EditorScroll._runEditorScroll(v,b.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}});class g extends Ci{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,[fn.word(b,b.getPrimaryCursorState(),this._inSelectionMode,w.position)]),b.revealPrimaryCursor(w.source,!0)}}i.WordSelect=pe(new g({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),i.WordSelectDrag=pe(new g({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),i.LastCursorWordSelect=pe(new class extends Ci{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(v,b){const w=v.getLastAddedCursorIndex(),y=v.getCursorStates(),x=y.slice(0),k=y[w];x[w]=fn.word(v,k,k.modelState.hasSelection(),b.position),v.model.pushStackElement(),v.setCursorStates(b.source,3,x)}});class p extends Ci{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,[fn.line(b,b.getPrimaryCursorState(),this._inSelectionMode,w.position,w.viewPosition)]),b.revealPrimaryCursor(w.source,!1)}}i.LineSelect=pe(new p({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),i.LineSelectDrag=pe(new p({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class m extends Ci{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){const y=b.getLastAddedCursorIndex(),x=b.getCursorStates(),k=x.slice(0);k[y]=fn.line(b,x[y],this._inSelectionMode,w.position,w.viewPosition),b.model.pushStackElement(),b.setCursorStates(w.source,3,k)}}i.LastCursorLineSelect=pe(new m({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),i.LastCursorLineSelectDrag=pe(new m({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),i.ExpandLineSelection=pe(new class extends Ci{constructor(){super({id:"expandLineSelection",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:2090}})}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates(b.source,3,fn.expandLineSelection(v,v.getCursorStates())),v.revealPrimaryCursor(b.source,!0)}}),i.CancelSelection=pe(new class extends Ci{constructor(){super({id:"cancelSelection",precondition:G.hasNonEmptySelection,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates(b.source,3,[fn.cancelSelection(v,v.getPrimaryCursorState())]),v.revealPrimaryCursor(b.source,!0)}}),i.RemoveSecondaryCursors=pe(new class extends Ci{constructor(){super({id:"removeSecondaryCursors",precondition:G.hasMultipleSelections,kbOpts:{weight:dt+1,kbExpr:G.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates(b.source,3,[v.getPrimaryCursorState()]),v.revealPrimaryCursor(b.source,!0),Wx(_("removedCursor","Removed secondary cursors"))}}),i.RevealLine=pe(new class extends Ci{constructor(){super({id:"revealLine",precondition:void 0,description:mp.description})}runCoreEditorCommand(v,b){const w=b,y=w.lineNumber||0;let x=typeof y=="number"?y+1:parseInt(y)+1;x<1&&(x=1);const k=v.model.getLineCount();x>k&&(x=k);const S=new F(x,1,x,v.model.getLineMaxColumn(x));let L=0;if(w.at)switch(w.at){case mp.RawAtArgument.Top:L=3;break;case mp.RawAtArgument.Center:L=1;break;case mp.RawAtArgument.Bottom:L=4;break}const D=v.coordinatesConverter.convertModelRangeToViewRange(S);v.revealRange(b.source,!1,D,L,0)}}),i.SelectAll=new class extends jM{constructor(){super(Ske)}runDOMCommand(){ks&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(v,b,w){const y=b._getViewModel();y&&this.runCoreEditorCommand(y,w)}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates("keyboard",3,[fn.selectAll(v,v.getPrimaryCursorState())])}},i.SetSelection=pe(new class extends Ci{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates(b.source,3,[Qe.fromModelSelection(b.selection)])}})})(nn||(nn={}));const FIe=xe.and(G.textInputFocus,G.columnSelection);function T0(i,e){ds.registerKeybindingRule({id:i,primary:e,when:FIe,weight:dt+1})}T0(nn.CursorColumnSelectLeft.id,1039);T0(nn.CursorColumnSelectRight.id,1041);T0(nn.CursorColumnSelectUp.id,1040);T0(nn.CursorColumnSelectPageUp.id,1035);T0(nn.CursorColumnSelectDown.id,1042);T0(nn.CursorColumnSelectPageDown.id,1036);function TV(i){return i.register(),i}var Eb;(function(i){class e extends Zr{runEditorCommand(n,s,r){const o=s._getViewModel();o&&this.runCoreEditingCommand(s,o,r||{})}}i.CoreEditingCommand=e,i.LineBreakInsert=pe(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:G.writable,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,n,s){t.pushUndoStop(),t.executeCommands(this.id,_i.lineBreakInsert(n.cursorConfig,n.model,n.getCursorStates().map(r=>r.modelState.selection)))}}),i.Outdent=pe(new class extends e{constructor(){super({id:"outdent",precondition:G.writable,kbOpts:{weight:dt,kbExpr:xe.and(G.editorTextFocus,G.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,n,s){t.pushUndoStop(),t.executeCommands(this.id,_i.outdent(n.cursorConfig,n.model,n.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),i.Tab=pe(new class extends e{constructor(){super({id:"tab",precondition:G.writable,kbOpts:{weight:dt,kbExpr:xe.and(G.editorTextFocus,G.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,n,s){t.pushUndoStop(),t.executeCommands(this.id,_i.tab(n.cursorConfig,n.model,n.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),i.DeleteLeft=pe(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,n,s){const[r,o]=If.deleteLeft(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection),n.getCursorAutoClosedCharacters());r&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(2)}}),i.DeleteRight=pe(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:dt,kbExpr:G.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,n,s){const[r,o]=If.deleteRight(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection));r&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(3)}}),i.Undo=new class extends jM{constructor(){super(T5)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(t,n,s){if(!(!n.hasModel()||n.getOption(80)===!0))return n.getModel().undo()}},i.Redo=new class extends jM{constructor(){super(N5)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(t,n,s){if(!(!n.hasModel()||n.getOption(80)===!0))return n.getModel().redo()}}})(Eb||(Eb={}));class NV extends uk{constructor(e,t,n){super({id:e,precondition:void 0,description:n}),this._handlerId=t}runCommand(e,t){const n=e.get(ii).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}}function rg(i,e){TV(new NV("default:"+i,i)),TV(new NV(i,i,e))}rg("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});rg("replacePreviousChar");rg("compositionType");rg("compositionStart");rg("compositionEnd");rg("paste");rg("cut");class BIe{constructor(e,t,n,s){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=s}paste(e,t,n,s){this.commandDelegate.paste(e,t,n,s)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,s){this.commandDelegate.compositionType(e,t,n,s)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){nn.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new q(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,n=As&&t.get(95),s=t.get(18);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount===2?this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):s?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){nn.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){nn.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,t,n){e=this._validateViewColumn(e),nn.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),nn.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e){nn.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){nn.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){nn.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){nn.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){nn.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){nn.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){nn.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){nn.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){nn.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class wk{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown&&this.onKeyDown(e)}emitKeyUp(e){this.onKeyUp&&this.onKeyUp(e)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}emitMouseWheel(e){this.onMouseWheel&&this.onMouseWheel(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return wk.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){return new VIe(e.element,e.type,e.mouseColumn,e.position?t.convertViewPositionToModelPosition(e.position):null,e.range?t.convertViewRangeToModelRange(e.range):null,e.detail)}}class VIe{constructor(e,t,n,s,r,o){this.element=e,this.type=t,this.mouseColumn=n,this.position=s,this.range=r,this.detail=o}toString(){return Go.toString(this)}}var _E;class uX{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const n=this.getStartLineNumber(),s=this.getEndLineNumber();if(t<n){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>s)return null;let r=0,o=0;for(let l=n;l<=s;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(o===0?(r=c,o=1):o++)}if(e<n){let l=0;t<n?l=t-e+1:l=n-e,this._rendLineNumberStart-=l}return this._lines.splice(r,o)}onLinesChanged(e,t){if(this.getCount()===0)return!1;const n=this.getStartLineNumber(),s=this.getEndLineNumber();let r=!1;for(let o=e;o<=t;o++)o>=n&&o<=s&&(this._lines[o-this._rendLineNumberStart].onContentChanged(),r=!0);return r}onLinesInserted(e,t){if(this.getCount()===0)return null;const n=t-e+1,s=this.getStartLineNumber(),r=this.getEndLineNumber();if(e<=s)return this._rendLineNumberStart+=n,null;if(e>r)return null;if(n+e>r)return this._lines.splice(e-this._rendLineNumberStart,r-e+1);const o=[];for(let u=0;u<n;u++)o[u]=this._createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-n),h=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=l.concat(o).concat(c),h}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),n=this.getEndLineNumber();let s=!1;for(let r=0,o=e.length;r<o;r++){const a=e[r];if(a.toLineNumber<t||a.fromLineNumber>n)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(n,a.toLineNumber);for(let h=l;h<=c;h++){const u=h-this._rendLineNumberStart;this._lines[u].onTokensChanged(),s=!0}}return s}}class dX{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new uX(()=>this._host.createVisibleLine())}_createDomNode(){const e=ft(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(129)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,s=t.length;n<s;n++){const r=t[n].getDomNode();r&&this.domNode.domNode.removeChild(r)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,s=t.length;n<s;n++){const r=t[n].getDomNode();r&&this.domNode.domNode.removeChild(r)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),n=new Cc(this.domNode.domNode,this._host,e),s={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},r=n.render(s,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(r.rendLineNumberStart,r.lines)}}class Cc{constructor(e,t,n){this.domNode=e,this.host=t,this.viewportData=n}render(e,t,n,s){const r={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(r.rendLineNumberStart+r.linesLength-1<t||n<r.rendLineNumberStart){r.rendLineNumberStart=t,r.linesLength=n-t+1,r.lines=[];for(let o=t;o<=n;o++)r.lines[o-t]=this.host.createVisibleLine();return this._finishRendering(r,!0,s),r}if(this._renderUntouchedLines(r,Math.max(t-r.rendLineNumberStart,0),Math.min(n-r.rendLineNumberStart,r.linesLength-1),s,t),r.rendLineNumberStart>t){const o=t,a=Math.min(n,r.rendLineNumberStart-1);o<=a&&(this._insertLinesBefore(r,o,a,s,t),r.linesLength+=a-o+1)}else if(r.rendLineNumberStart<t){const o=Math.min(r.linesLength,t-r.rendLineNumberStart);o>0&&(this._removeLinesBefore(r,o),r.linesLength-=o)}if(r.rendLineNumberStart=t,r.rendLineNumberStart+r.linesLength-1<n){const o=r.rendLineNumberStart+r.linesLength,a=n;o<=a&&(this._insertLinesAfter(r,o,a,s,t),r.linesLength+=a-o+1)}else if(r.rendLineNumberStart+r.linesLength-1>n){const o=Math.max(0,n-r.rendLineNumberStart+1),l=r.linesLength-1-o+1;l>0&&(this._removeLinesAfter(r,l),r.linesLength-=l)}return this._finishRendering(r,!1,s),r}_renderUntouchedLines(e,t,n,s,r){const o=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=n;l++){const c=o+l;a[l].layoutLine(c,s[c-r])}}_insertLinesBefore(e,t,n,s,r){const o=[];let a=0;for(let l=t;l<=n;l++)o[a++]=this.host.createVisibleLine();e.lines=o.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){const s=e.lines[n].getDomNode();s&&this.domNode.removeChild(s)}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,s,r){const o=[];let a=0;for(let l=t;l<=n;l++)o[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(o)}_removeLinesAfter(e,t){const n=e.linesLength-t;for(let s=0;s<t;s++){const r=e.lines[n+s].getDomNode();r&&this.domNode.removeChild(r)}e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,s){Cc._ttPolicy&&(n=Cc._ttPolicy.createHTML(n));const r=this.domNode.lastChild;t||!r?this.domNode.innerHTML=n:r.insertAdjacentHTML("afterend",n);let o=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];s[a]&&(l.setDomNode(o),o=o.previousSibling)}}_finishRenderingInvalidLines(e,t,n){const s=document.createElement("div");Cc._ttPolicy&&(t=Cc._ttPolicy.createHTML(t)),s.innerHTML=t;for(let r=0;r<e.linesLength;r++){const o=e.lines[r];if(n[r]){const a=s.firstChild,l=o.getDomNode();l.parentNode.replaceChild(a,l),o.setDomNode(a)}}}_finishRendering(e,t,n){const s=Cc._sb,r=e.linesLength,o=e.lines,a=e.rendLineNumberStart,l=[];{s.reset();let c=!1;for(let h=0;h<r;h++){const u=o[h];l[h]=!1,!(u.getDomNode()||!u.renderLine(h+a,n[h],this.viewportData,s))&&(l[h]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,s.build(),l)}{s.reset();let c=!1;const h=[];for(let u=0;u<r;u++){const d=o[u];h[u]=!1,!(l[u]||!d.renderLine(u+a,n[u],this.viewportData,s))&&(h[u]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,s.build(),h)}}}Cc._ttPolicy=(_E=window.trustedTypes)===null||_E===void 0?void 0:_E.createPolicy("editorViewLayer",{createHTML:i=>i});Cc._sb=Sf(1e5);class fX extends Yr{constructor(e){super(e),this._visibleLines=new dX(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new WIe(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=t;s<=n;s++)this._visibleLines.getVisibleLine(s).onConfigurationChanged(e);return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,s=t.length;n<s;n++){const r=t[n];r.prepareRender(e),r.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class WIe{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(58),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=ft(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(58)}renderLine(e,t,n,s){let r="";for(let o=0,a=this._dynamicOverlays.length;o<a;o++){const l=this._dynamicOverlays[o];r+=l.render(n.startLineNumber,e)}return this._renderedContent===r?!1:(this._renderedContent=r,s.appendASCIIString('<div style="position:absolute;top:'),s.appendASCIIString(String(t)),s.appendASCIIString("px;width:100%;height:"),s.appendASCIIString(String(this._lineHeight)),s.appendASCIIString('px;">'),s.appendASCIIString(r),s.appendASCIIString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}class zIe extends fX{constructor(e){super(e);const n=this._context.configuration.options.get(129);this._contentWidth=n.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const n=this._context.configuration.options.get(129);return this._contentWidth=n.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class HIe extends fX{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(129);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),Fn.applyFontInfo(this.domNode,t.get(43))}onConfigurationChanged(e){const t=this._context.configuration.options;Fn.applyFontInfo(this.domNode,t.get(43));const n=t.get(129);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class c_{constructor(e,t){this._coordinateBrand=void 0,this.top=e,this.left=t}}class UIe extends Yr{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=ft(document.createElement("div")),Nl.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=ft(document.createElement("div")),Nl.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onLineMappingChanged(e);return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}addWidget(e){const t=new $Ie(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n){this._widgets[e.getId()].setPosition(t,n),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t];delete this._widgets[t];const s=n.domNode.domNode;s.parentNode.removeChild(s),s.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].render(e)}}let $Ie=class{constructor(e,t,n){this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=ft(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const s=this._context.configuration.options,r=s.get(129);this._fixedOverflowWidgets=s.get(36),this._contentWidth=r.contentWidth,this._contentLeft=r.contentLeft,this._lineHeight=s.get(58),this._range=null,this._viewRange=null,this._preference=[],this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(58),e.hasChanged(129)){const n=t.get(129);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(e){this._setPosition(this._range)}_setPosition(e){if(this._range=e,this._viewRange=null,this._range){const t=this._context.model.validateModelRange(this._range);(this._context.model.coordinatesConverter.modelPositionIsVisible(t.getStartPosition())||this._context.model.coordinatesConverter.modelPositionIsVisible(t.getEndPosition()))&&(this._viewRange=this._context.model.coordinatesConverter.convertModelRangeToViewRange(t))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth:this._contentWidth}setPosition(e,t){this._setPosition(e),this._preference=t,this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1}_layoutBoxInViewport(e,t,n,s,r){const o=e.top,a=o,l=t.top+this._lineHeight,c=r.viewportHeight-l,h=o-s,u=a>=s,d=l,f=c>=s;let g=e.left,p=t.left;return g+n>r.scrollLeft+r.viewportWidth&&(g=r.scrollLeft+r.viewportWidth-n),p+n>r.scrollLeft+r.viewportWidth&&(p=r.scrollLeft+r.viewportWidth-n),g<r.scrollLeft&&(g=r.scrollLeft),p<r.scrollLeft&&(p=r.scrollLeft),{fitsAbove:u,aboveTop:h,aboveLeft:g,fitsBelow:f,belowTop:d,belowLeft:p}}_layoutHorizontalSegmentInPage(e,t,n,s){const r=Math.max(0,t.left-s),o=Math.min(t.left+t.width+s,e.width);let a=t.left+n-Rc.scrollX;if(a+s>o){const l=a-(o-s);a-=l,n-=l}if(a<r){const l=a-r;a-=l,n-=l}return[n,a]}_layoutBoxInPage(e,t,n,s,r){const o=e.top-s,a=t.top+this._lineHeight,l=Nn(this._viewDomNode.domNode),c=l.top+o-Rc.scrollY,h=l.top+a-Rc.scrollY,u=WL(document.body),[d,f]=this._layoutHorizontalSegmentInPage(u,l,e.left-r.scrollLeft+this._contentLeft,n),[g,p]=this._layoutHorizontalSegmentInPage(u,l,t.left-r.scrollLeft+this._contentLeft,n),m=22,v=22,b=c>=m,w=h+s<=u.height-v;return this._fixedOverflowWidgets?{fitsAbove:b,aboveTop:Math.max(c,m),aboveLeft:f,fitsBelow:w,belowTop:h,belowLeft:p}:{fitsAbove:b,aboveTop:o,aboveLeft:d,fitsBelow:w,belowTop:a,belowLeft:g}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new c_(e.top,e.left+this._contentLeft)}_getTopAndBottomLeft(e){if(!this._viewRange)return[null,null];const t=e.linesVisibleRangesForRange(this._viewRange,!1);if(!t||t.length===0)return[null,null];let n=t[0],s=t[0];for(const u of t)u.lineNumber<n.lineNumber&&(n=u),u.lineNumber>s.lineNumber&&(s=u);let r=1073741824;for(const u of n.ranges)u.left<r&&(r=u.left);let o=1073741824;for(const u of s.ranges)u.left<o&&(o=u.left);const a=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.scrollTop,l=new c_(a,r),c=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.scrollTop,h=new c_(c,o);return[l,h]}_prepareRenderWidget(e){const[t,n]=this._getTopAndBottomLeft(e);if(!t||!n)return null;if(this._cachedDomNodeClientWidth===-1||this._cachedDomNodeClientHeight===-1){let r=null;if(typeof this._actual.beforeRender=="function"&&(r=bE(this._actual.beforeRender,this._actual)),r)this._cachedDomNodeClientWidth=r.width,this._cachedDomNodeClientHeight=r.height;else{const o=this.domNode.domNode;this._cachedDomNodeClientWidth=o.clientWidth,this._cachedDomNodeClientHeight=o.clientHeight}}let s;if(this.allowEditorOverflow?s=this._layoutBoxInPage(t,n,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e):s=this._layoutBoxInViewport(t,n,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e),this._preference)for(let r=1;r<=2;r++)for(const o of this._preference)if(o===1){if(!s)return null;if(r===2||s.fitsAbove)return{coordinate:new c_(s.aboveTop,s.aboveLeft),position:1}}else if(o===2){if(!s)return null;if(r===2||s.fitsBelow)return{coordinate:new c_(s.belowTop,s.belowLeft),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(t),position:0}:{coordinate:t,position:0};return null}onBeforeRender(e){!this._viewRange||!this._preference||this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&bE(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&bE(this._actual.afterRender,this._actual,this._renderData.position)}};function bE(i,e,...t){try{return i.call(e,...t)}catch{return null}}let qM=!0;class gX extends I0{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(129);this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new Ve(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=qM?this._selections.slice(0,1):this._selections,n=t.map(r=>r.positionLineNumber);n.sort((r,o)=>r-o),Ll(this._cursorLineNumbers,n)||(this._cursorLineNumbers=n,e=!0);const s=t.every(r=>r.isEmpty());return this._selectionIsEmpty!==s&&(this._selectionIsEmpty=s,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(129);return this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=this._renderOne(e),n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,r=this._cursorLineNumbers.length;let o=0;const a=[];for(let l=n;l<=s;l++){const c=l-n;for(;o<r&&this._cursorLineNumbers[o]<l;)o++;o<r&&this._cursorLineNumbers[o]===l?a[c]=t:a[c]=""}this._renderData=a}render(e,t){if(!this._renderData)return"";const n=t-e;return n>=this._renderData.length?"":this._renderData[n]}}class jIe extends gX{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderOther(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class qIe extends gX{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderThis(){return!0}_shouldRenderOther(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}Jt((i,e)=>{qM=!1;const t=i.getColor(LEe);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||i.defines(wV)){const n=i.getColor(wV);n&&(qM=!0,e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${n}; }`),i.type==="hc"&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});class GIe extends I0{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let n=[],s=0;for(let l=0,c=t.length;l<c;l++){const h=t[l];h.options.className&&(n[s++]=h)}n=n.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const h=l.options.className,u=c.options.className;return h<u?-1:h>u?1:F.compareRangesUsingStarts(l.range,c.range)});const r=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=[];for(let l=r;l<=o;l++){const c=l-r;a[c]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){const s=String(this._lineHeight),r=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber;for(let a=0,l=t.length;a<l;a++){const c=t[a];if(!c.options.isWholeLine)continue;const h='<div class="cdr '+c.options.className+'" style="left:0;width:100%;height:'+s+'px;"></div>',u=Math.max(c.range.startLineNumber,r),d=Math.min(c.range.endLineNumber,o);for(let f=u;f<=d;f++){const g=f-r;n[g]+=h}}}_renderNormalDecorations(e,t,n){const s=String(this._lineHeight),r=e.visibleRange.startLineNumber;let o=null,a=!1,l=null;for(let c=0,h=t.length;c<h;c++){const u=t[c];if(u.options.isWholeLine)continue;const d=u.options.className,f=!!u.options.showIfCollapsed;let g=u.range;if(f&&g.endColumn===1&&g.endLineNumber!==g.startLineNumber&&(g=new F(g.startLineNumber,g.startColumn,g.endLineNumber-1,this._context.model.getLineMaxColumn(g.endLineNumber-1))),o===d&&a===f&&F.areIntersectingOrTouching(l,g)){l=F.plusRange(l,g);continue}o!==null&&this._renderNormalDecoration(e,l,o,a,s,r,n),o=d,a=f,l=g}o!==null&&this._renderNormalDecoration(e,l,o,a,s,r,n)}_renderNormalDecoration(e,t,n,s,r,o,a){const l=e.linesVisibleRangesForRange(t,n==="findMatch");if(l)for(let c=0,h=l.length;c<h;c++){const u=l[c];if(u.outsideRenderedLine)continue;const d=u.lineNumber-o;if(s&&u.ranges.length===1){const f=u.ranges[0];f.width===0&&(u.ranges[0]=new dk(f.left,this._typicalHalfwidthCharacterWidth))}for(let f=0,g=u.ranges.length;f<g;f++){const p=u.ranges[f],m='<div class="cdr '+n+'" style="left:'+String(p.left)+"px;width:"+String(p.width)+"px;height:"+r+'px;"></div>';a[d]+=m}}}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class Qr extends te{onclick(e,t){this._register(ne(e,Ae.CLICK,n=>t(new zr(n))))}onmousedown(e,t){this._register(ne(e,Ae.MOUSE_DOWN,n=>t(new zr(n))))}onmouseover(e,t){this._register(ne(e,Ae.MOUSE_OVER,n=>t(new zr(n))))}onnonbubblingmouseout(e,t){this._register(KO(e,n=>t(new zr(n))))}onkeydown(e,t){this._register(ne(e,Ae.KEY_DOWN,n=>t(new li(n))))}onkeyup(e,t){this._register(ne(e,Ae.KEY_UP,n=>t(new li(n))))}oninput(e,t){this._register(ne(e,Ae.INPUT,t))}onblur(e,t){this._register(ne(e,Ae.BLUR,t))}onfocus(e,t){this._register(ne(e,Ae.FOCUS,t))}ignoreGesture(e){kt.ignoreTarget(e)}}const Om=11;class KIe extends Qr{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...e.icon.classNamesArray),this.domNode.style.position="absolute",this.domNode.style.width=Om+"px",this.domNode.style.height=Om+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._mouseMoveMonitor=this._register(new sg),this.onmousedown(this.bgDomNode,t=>this._arrowMouseDown(t)),this.onmousedown(this.domNode,t=>this._arrowMouseDown(t)),this._mousedownRepeatTimer=this._register(new vw),this._mousedownScheduleRepeatTimer=this._register(new Ms)}_arrowMouseDown(e){const t=()=>{this._mousedownRepeatTimer.cancelAndSet(()=>this._onActivate(),41.666666666666664)};this._onActivate(),this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancelAndSet(t,200),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,E0,n=>{},()=>{this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class ZIe extends te{constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Ms)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode&&this._domNode.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode&&this._domNode.setClassName(this._invisibleClassName+(e?" fade":"")))}}const YIe=140;class pX extends Qr{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new ZIe(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._mouseMoveMonitor=this._register(new sg),this._shouldRender=!0,this.domNode=ft(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this.onmousedown(this.domNode.domNode,t=>this._domNodeMouseDown(t))}_createArrow(e){const t=this._register(new KIe(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,s){this.slider=ft(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this.onmousedown(this.slider.domNode,r=>{r.leftButton&&(r.preventDefault(),this._sliderMouseDown(r,()=>{}))}),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodeMouseDown(e){e.target===this.domNode.domNode&&this._onMouseDown(e)}delegateMouseDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),s=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderMousePosition(e);n<=r&&r<=s?e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{})):this._onMouseDown(e)}_onMouseDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.browserEvent.offsetX=="number"&&typeof e.browserEvent.offsetY=="number")t=e.browserEvent.offsetX,n=e.browserEvent.offsetY;else{const r=Nn(this.domNode.domNode);t=e.posx-r.left,n=e.posy-r.top}const s=this._mouseDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{}))}_sliderMouseDown(e,t){const n=this._sliderMousePosition(e),s=this._sliderOrthogonalMousePosition(e),r=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,E0,o=>{const a=this._sliderOrthogonalMousePosition(o),l=Math.abs(a-s);if(On&&l>YIe){this._setDesiredScrollPositionNow(r.getScrollPosition());return}const h=this._sliderMousePosition(o)-n;this._setDesiredScrollPositionNow(r.getDesiredScrollPositionFromDelta(h))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd(),t()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const QIe=20;class jv{constructor(e,t,n,s,r,o){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=s,this._scrollSize=r,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new jv(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,s,r){const o=Math.max(0,n-e),a=Math.max(0,o-2*t),l=s>0&&s>n;if(!l)return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(QIe,Math.floor(n*a/s))),h=(a-c)/(s-n),u=r*h;return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:h,computedSliderPosition:Math.round(u)}}_refreshComputedValues(){const e=jv._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}const XIe=Bo("scrollbar-button-left",be.triangleLeft),JIe=Bo("scrollbar-button-right",be.triangleRight);class eTe extends pX{constructor(e,t,n){const s=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new jv(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,s.width,s.scrollWidth,r.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const o=(t.arrowSize-Om)/2,a=(t.horizontalScrollbarSize-Om)/2;this._createArrow({className:"scra",icon:XIe,top:a,left:o,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new vm(null,1,0))}),this._createArrow({className:"scra",icon:JIe,top:a,left:void 0,bottom:void 0,right:o,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new vm(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return e}_sliderMousePosition(e){return e.posx}_sliderOrthogonalMousePosition(e){return e.posy}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}const tTe=Bo("scrollbar-button-up",be.triangleUp),iTe=Bo("scrollbar-button-down",be.triangleDown);class nTe extends pX{constructor(e,t,n){const s=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new jv(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,s.height,s.scrollHeight,r.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const o=(t.arrowSize-Om)/2,a=(t.verticalScrollbarSize-Om)/2;this._createArrow({className:"scra",icon:tTe,top:o,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new vm(null,0,1))}),this._createArrow({className:"scra",icon:iTe,top:void 0,left:a,bottom:o,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new vm(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return t}_sliderMousePosition(e){return e.posy}_sliderOrthogonalMousePosition(e){return e.posx}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class tD{constructor(e,t,n,s,r,o){this._scrollStateBrand=void 0,e=e|0,t=t|0,n=n|0,s=s|0,r=r|0,o=o|0,this.rawScrollLeft=n,this.rawScrollTop=o,e<0&&(e=0),n+e>t&&(n=t-e),n<0&&(n=0),s<0&&(s=0),o+s>r&&(o=r-s),o<0&&(o=0),this.width=e,this.scrollWidth=t,this.scrollLeft=n,this.height=s,this.scrollHeight=r,this.scrollTop=o}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new tD(typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new tD(this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,s=this.scrollWidth!==e.scrollWidth,r=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:s,scrollLeftChanged:r,heightChanged:o,scrollHeightChanged:a,scrollTopChanged:l}}}class yk extends te{constructor(e,t){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new z),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e,this._scheduleAtNextAnimationFrame=t,this._state=new tD(0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){const n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let s;t?s=new qv(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):s=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{const n=this._state.withScrollPosition(e);this._smoothScrolling=qv.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}class MV{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}}function vE(i,e){const t=e-i;return function(n){return i+t*oTe(n)}}function sTe(i,e,t){return function(n){return n<t?i(n/t):e((n-t)/(1-t))}}class qv{constructor(e,t,n,s){this.from=e,this.to=t,this.duration=s,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let r,o;return e<t?(r=e+.75*n,o=t-.75*n):(r=e-.75*n,o=t+.75*n),sTe(vE(e,r),vE(o,t),.33)}return vE(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const n=this.scrollLeft(t),s=this.scrollTop(t);return new MV(n,s,!1)}return new MV(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return qv.start(e,t,n)}static start(e,t,n){n=n+10;const s=Date.now()-10;return new qv(e,t,s,n)}}function rTe(i){return Math.pow(i,3)}function oTe(i){return 1-rTe(1-i)}const aTe=500,RV=50;class lTe{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}}class GM{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,s=this._rear;do{const r=s===this._front?e:Math.pow(2,-n);if(e-=r,t+=this._memory[s].score*r,s===this._front)break;s=(this._capacity+s-1)%this._capacity,n++}while(!0);return t<=.5}accept(e,t,n){const s=new lTe(e,t,n);s.score=this._computeScore(s),this._front===-1&&this._rear===-1?(this._memory[0]=s,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=s)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}GM.INSTANCE=new GM;class mX extends Qr{constructor(e,t,n){super(),this._onScroll=this._register(new z),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new z),e.style.overflow="hidden",this._options=cTe(t),this._scrollable=n,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));const s={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new nTe(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new eTe(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=ft(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=ft(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=ft(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onnonbubblingmouseout(this._listenOnDomNode,r=>this._onMouseOut(r)),this._hideTimeout=this._register(new Ms),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=at(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarMouseDown(e){this._verticalScrollbar.delegateMouseDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,ht&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=at(this._mouseWheelToDispose),e)){const n=s=>{this._onMouseWheel(new vm(s))};this._mouseWheelToDispose.push(ne(this._listenOnDomNode,Ae.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){const t=GM.INSTANCE;{const r=window.devicePixelRatio/qCe();On||As?t.accept(Date.now(),e.deltaX/r,e.deltaY/r):t.accept(Date.now(),e.deltaX,e.deltaY)}let n=!1;if(e.deltaY||e.deltaX){let r=e.deltaY*this._options.mouseWheelScrollSensitivity,o=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(r)>=Math.abs(o)?o=0:r=0),this._options.flipAxes&&([r,o]=[o,r]);const a=!ht&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!o&&(o=r,r=0),e.browserEvent&&e.browserEvent.altKey&&(o=o*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);const l=this._scrollable.getFutureScrollPosition();let c={};if(r){const h=RV*r,u=l.scrollTop-(h<0?Math.floor(h):Math.ceil(h));this._verticalScrollbar.writeScrollPosition(c,u)}if(o){const h=RV*o,u=l.scrollLeft-(h<0?Math.floor(h):Math.ceil(h));this._horizontalScrollbar.writeScrollPosition(c,u)}c=this._scrollable.validateScrollPosition(c),(l.scrollLeft!==c.scrollLeft||l.scrollTop!==c.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(c):this._scrollable.setScrollPositionNow(c),n=!0)}let s=n;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,s=n?" left":"",r=t?" top":"",o=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${o}${r}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseOut(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),aTe)}}class J5 extends mX{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new yk(0,s=>Al(s));super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class eP extends mX{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class Ck extends J5{constructor(e,t){super(e,t),this._element=e,this.onScroll(n=>{n.scrollTopChanged&&(this._element.scrollTop=n.scrollTop),n.scrollLeftChanged&&(this._element.scrollLeft=n.scrollLeft)}),this.scanDomNode()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function cTe(i){const e={lazyRender:typeof i.lazyRender<"u"?i.lazyRender:!1,className:typeof i.className<"u"?i.className:"",useShadows:typeof i.useShadows<"u"?i.useShadows:!0,handleMouseWheel:typeof i.handleMouseWheel<"u"?i.handleMouseWheel:!0,flipAxes:typeof i.flipAxes<"u"?i.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof i.consumeMouseWheelIfScrollbarIsNeeded<"u"?i.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof i.alwaysConsumeMouseWheel<"u"?i.alwaysConsumeMouseWheel:!1,scrollYToX:typeof i.scrollYToX<"u"?i.scrollYToX:!1,mouseWheelScrollSensitivity:typeof i.mouseWheelScrollSensitivity<"u"?i.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof i.fastScrollSensitivity<"u"?i.fastScrollSensitivity:5,scrollPredominantAxis:typeof i.scrollPredominantAxis<"u"?i.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof i.mouseWheelSmoothScroll<"u"?i.mouseWheelSmoothScroll:!0,arrowSize:typeof i.arrowSize<"u"?i.arrowSize:11,listenOnDomNode:typeof i.listenOnDomNode<"u"?i.listenOnDomNode:null,horizontal:typeof i.horizontal<"u"?i.horizontal:1,horizontalScrollbarSize:typeof i.horizontalScrollbarSize<"u"?i.horizontalScrollbarSize:10,horizontalSliderSize:typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:0,horizontalHasArrows:typeof i.horizontalHasArrows<"u"?i.horizontalHasArrows:!1,vertical:typeof i.vertical<"u"?i.vertical:1,verticalScrollbarSize:typeof i.verticalScrollbarSize<"u"?i.verticalScrollbarSize:10,verticalHasArrows:typeof i.verticalHasArrows<"u"?i.verticalHasArrows:!1,verticalSliderSize:typeof i.verticalSliderSize<"u"?i.verticalSliderSize:0,scrollByPage:typeof i.scrollByPage<"u"?i.scrollByPage:!1};return e.horizontalSliderSize=typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof i.verticalSliderSize<"u"?i.verticalSliderSize:e.verticalScrollbarSize,ht&&(e.className+=" mac"),e}class hTe extends Yr{constructor(e,t,n,s){super(e);const r=this._context.configuration.options,o=r.get(91),a=r.get(66),l=r.get(34),c=r.get(94),h={listenOnDomNode:n.domNode,className:"editor-scrollable "+Ux(e.theme.type),useShadows:!1,lazyRender:!0,vertical:o.vertical,horizontal:o.horizontal,verticalHasArrows:o.verticalHasArrows,horizontalHasArrows:o.horizontalHasArrows,verticalScrollbarSize:o.verticalScrollbarSize,verticalSliderSize:o.verticalSliderSize,horizontalScrollbarSize:o.horizontalScrollbarSize,horizontalSliderSize:o.horizontalSliderSize,handleMouseWheel:o.handleMouseWheel,alwaysConsumeMouseWheel:o.alwaysConsumeMouseWheel,arrowSize:o.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:o.scrollByPage};this.scrollbar=this._register(new eP(t.domNode,h,this._context.viewLayout.getScrollable())),Nl.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=ft(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const u=(d,f,g)=>{const p={};if(f){const m=d.scrollTop;m&&(p.scrollTop=this._context.viewLayout.getCurrentScrollTop()+m,d.scrollTop=0)}if(g){const m=d.scrollLeft;m&&(p.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+m,d.scrollLeft=0)}this._context.model.setScrollPosition(p,1)};this._register(ne(n.domNode,"scroll",d=>u(n.domNode,!0,!0))),this._register(ne(t.domNode,"scroll",d=>u(t.domNode,!0,!1))),this._register(ne(s.domNode,"scroll",d=>u(s.domNode,!0,!1))),this._register(ne(this.scrollbarDomNode.domNode,"scroll",d=>u(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(129);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(64).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarMouseDown(e){this.scrollbar.delegateVerticalScrollbarMouseDown(e)}onConfigurationChanged(e){if(e.hasChanged(91)||e.hasChanged(66)||e.hasChanged(34)){const t=this._context.configuration.options,n=t.get(91),s=t.get(66),r=t.get(34),o=t.get(94),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:s,fastScrollSensitivity:r,scrollPredominantAxis:o};this.scrollbar.updateOptions(a)}return e.hasChanged(129)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+Ux(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}Jt((i,e)=>{const t=i.getColor(Lw);t&&e.addRule(`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${t} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${t} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${t} 6px 6px 6px -6px inset;
			}
		`);const n=i.getColor(Db);n&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${n};
			}
		`);const s=i.getColor(Lb);s&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${s};
			}
		`);const r=i.getColor(kb);r&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${r};
			}
		`)});class iD{constructor(e,t,n){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(n)}}class tP extends I0{_render(e,t,n){const s=[];for(let a=e;a<=t;a++){const l=a-e;s[l]=[]}if(n.length===0)return s;n.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let r=null,o=0;for(let a=0,l=n.length;a<l;a++){const c=n[a],h=c.className;let u=Math.max(c.startLineNumber,e)-e;const d=Math.min(c.endLineNumber,t)-e;r===h?(u=Math.max(o+1,u),o=Math.max(o,d)):(r=h,o=d);for(let f=u;f<=o;f++)s[f].push(r)}return s}}class uTe extends tP{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(129);this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(129);return this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],s=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.glyphMarginClassName;l&&(n[s++]=new iD(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){if(!this._glyphMargin){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=this._render(t,n,this._getDecorations(e)),r=this._lineHeight.toString(),o=this._glyphMarginLeft.toString(),a=this._glyphMarginWidth.toString(),l='" style="left:'+o+"px;width:"+a+"px;height:"+r+'px;"></div>',c=[];for(let h=t;h<=n;h++){const u=h-t,d=s[u];d.length===0?c[u]="":c[u]='<div class="cgmr codicon '+d.join(" ")+l}this._renderResult=c}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class dTe extends I0{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,n=t.get(130),s=t.get(43);this._lineHeight=t.get(58),this._spaceWidth=s.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130),s=t.get(43);return this._lineHeight=t.get(58),this._spaceWidth=s.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),!0}onCursorStateChanged(e){var t;const s=e.selections[0].getPosition();return!((t=this._primaryPosition)===null||t===void 0)&&t.equals(s)?!1:(this._primaryPosition=s,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,n,s,r;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const o=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,c=this._lineHeight,h=this._primaryPosition,u=this.getGuidesByLine(o,a,h),d=[];for(let f=o;f<=a;f++){const g=f-o,p=u[g];let m="";const v=(n=(t=e.visibleRangeForPosition(new q(f,1)))===null||t===void 0?void 0:t.left)!==null&&n!==void 0?n:0;for(const b of p){const w=v+(b.visibleColumn-1)*this._spaceWidth;if(w>l||this._maxIndentLeft>0&&w>this._maxIndentLeft)break;const y=b.horizontalLine?b.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",x=b.horizontalLine?((r=(s=e.visibleRangeForPosition(new q(f,b.horizontalLine.endColumn)))===null||s===void 0?void 0:s.left)!==null&&r!==void 0?r:w+this._spaceWidth)-w:this._spaceWidth;m+=`<div class="core-guide ${b.className} ${y}" style="left:${w}px;height:${c}px;width:${x}px"></div>`}d[g]=m}this._renderResult=d}getGuidesByLine(e,t,n){const s=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.model.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?Hd.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?Hd.EnabledForActive:Hd.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,r=this._bracketPairGuideOptions.indentation?this._context.model.getLinesIndentGuides(e,t):null;let o=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation&&n){const u=this._context.model.getActiveIndentGuide(n.lineNumber,e,t);o=u.startLineNumber,a=u.endLineNumber,l=u.indent}const{indentSize:c}=this._context.model.getTextModelOptions(),h=[];for(let u=e;u<=t;u++){const d=new Array;h.push(d);const f=s?s[u-e]:[],g=new fb(f),p=r?r[u-e]:[];for(let m=1;m<=p;m++){const v=(m-1)*c+1,b=f.length===0&&o<=u&&u<=a&&m===l;d.push(...g.takeWhile(y=>y.visibleColumn<v)||[]);const w=g.peek();(!w||w.visibleColumn!==v||w.horizontalLine)&&d.push(new up(v,b?"core-guide-indent-active":"core-guide-indent",null))}d.push(...g.takeWhile(m=>!0)||[])}return h}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}function Oy(i){if(!(i&&i.isTransparent()))return i}Jt((i,e)=>{const t=i.getColor(_k);t&&e.addRule(`.monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ${t} inset; }`);const n=i.getColor(bk)||t;n&&e.addRule(`.monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ${n} inset; }`);const s=[{bracketColor:eX,guideColor:jEe,guideColorActive:QEe},{bracketColor:tX,guideColor:qEe,guideColorActive:XEe},{bracketColor:iX,guideColor:GEe,guideColorActive:JEe},{bracketColor:nX,guideColor:KEe,guideColorActive:eIe},{bracketColor:sX,guideColor:ZEe,guideColorActive:tIe},{bracketColor:rX,guideColor:YEe,guideColorActive:iIe}],r=new aX;let o=s.map(a=>{var l,c;const h=i.getColor(a.bracketColor),u=i.getColor(a.guideColor),d=i.getColor(a.guideColorActive),f=Oy((l=Oy(u))!==null&&l!==void 0?l:h==null?void 0:h.transparent(.3)),g=Oy((c=Oy(d))!==null&&c!==void 0?c:h);if(!(!f||!g))return{guideColor:f,guideColorActive:g}}).filter(ixe);if(o.length>0){for(let a=0;a<30;a++){const l=o[a%o.length];e.addRule(`.monaco-editor .${r.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${r.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${r.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${r.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}});class fTe{constructor(){this._currentVisibleRange=new F(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class gTe{constructor(e,t,n,s,r,o){this.lineNumber=e,this.startColumn=t,this.endColumn=n,this.startScrollTop=s,this.stopScrollTop=r,this.scrollType=o,this.type="range",this.minLineNumber=e,this.maxLineNumber=e}}class pTe{constructor(e,t,n,s){this.selections=e,this.startScrollTop=t,this.stopScrollTop=n,this.scrollType=s,this.type="selections";let r=e[0].startLineNumber,o=e[0].endLineNumber;for(let a=1,l=e.length;a<l;a++){const c=e[a];r=Math.min(r,c.startLineNumber),o=Math.max(o,c.endLineNumber)}this.minLineNumber=r,this.maxLineNumber=o}}class Sk extends Yr{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new dX(this),this.domNode=this._visibleLines.domNode;const n=this._context.configuration,s=this._context.configuration.options,r=s.get(43),o=s.get(130);this._lineHeight=s.get(58),this._typicalHalfwidthCharacterWidth=r.typicalHalfwidthCharacterWidth,this._isViewportWrapping=o.isViewportWrapping,this._revealHorizontalRightPadding=s.get(88),this._cursorSurroundingLines=s.get(25),this._cursorSurroundingLinesStyle=s.get(26),this._canUseLayerHinting=!s.get(28),this._viewLineOptions=new Q7(n,this._context.theme.type),Nl.write(this.domNode,7),this.domNode.setClassName(`view-lines ${Kd}`),Fn.applyFontInfo(this.domNode,r),this._maxLineWidth=0,this._asyncUpdateLineWidths=new fi(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new fi(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new fTe,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new cl(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(130)&&(this._maxLineWidth=0);const t=this._context.configuration.options,n=t.get(43),s=t.get(130);return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=t.get(88),this._cursorSurroundingLines=t.get(25),this._cursorSurroundingLinesStyle=t.get(26),this._canUseLayerHinting=!t.get(28),Fn.applyFontInfo(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(129)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new Q7(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const n=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=n;r<=s;r++)this._visibleLines.getVisibleLine(r).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let s=!1;for(let r=t;r<=n;r++)s=this._visibleLines.getVisibleLine(r).onSelectionChanged()||s;return s}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=t;s<=n;s++)this._visibleLines.getVisibleLine(s).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new gTe(e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new pTe(e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const r=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.model.setScrollPosition(n,r),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.model.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const n=this._getViewLineDomNode(e);if(n===null)return null;const s=this._getLineNumberFor(n);if(s===-1||s<1||s>this._context.model.getLineCount())return null;if(this._context.model.getLineMaxColumn(s)===1)return new q(s,1);const r=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();if(s<r||s>o)return null;let a=this._visibleLines.getVisibleLine(s).getColumnOfNodeOffset(s,e,t);const l=this._context.model.getLineMinColumn(s);return a<l&&(a=l),new q(s,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===cl.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=t;s<=n;s++){const r=this._visibleLines.getVisibleLine(s);if(e===r.getDomNode())return s}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();return e<t||e>n?-1:this._visibleLines.getVisibleLine(e).getWidth()}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const n=e.endLineNumber,s=F.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!s)return null;let r=[],o=0;const a=new Y7(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new q(s.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),h=this._visibleLines.getEndLineNumber();for(let u=s.startLineNumber;u<=s.endLineNumber;u++){if(u<c||u>h)continue;const d=u===s.startLineNumber?s.startColumn:1,f=u===s.endLineNumber?s.endColumn:this._context.model.getLineMaxColumn(u),g=this._visibleLines.getVisibleLine(u).getVisibleRangesForRange(u,d,f,a);if(g){if(t&&u<n){const p=l;l=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new q(u+1,1)).lineNumber,p!==l&&(g.ranges[g.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}r[o++]=new Pke(g.outsideRenderedLine,u,dk.from(g.ranges))}}return o===0?null:r}_visibleRangesForLineRange(e,t,n){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,new Y7(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new Fke(t.outsideRenderedLine,t.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let s=1,r=!0;for(let o=t;o<=n;o++){const a=this._visibleLines.getVisibleLine(o);if(e&&!a.getWidthIsFast()){r=!1;continue}s=Math.max(s,a.getWidth())}return r&&t===1&&n===this._context.model.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(s),r}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const n=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=n;r<=s;r++){const o=this._visibleLines.getVisibleLine(r);if(o.needsMonospaceFontCheck()){const a=o.getWidth();a>t&&(t=a,e=r)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let r=n;r<=s;r++)this._visibleLines.getVisibleLine(r).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const s=this._computeScrollLeftToReveal(n);s&&(this._isViewportWrapping||this._ensureMaxLineWidth(s.maxHorizontalOffset),this._context.model.setScrollPosition({scrollLeft:s.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),As&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const n=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=n;r<=s;r++)if(this._visibleLines.getVisibleLine(r).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.model.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,s,r){const o=e.top,a=e.height,l=o+a;let c,h,u;if(s&&s.length>0){let g=s[0].startLineNumber,p=s[0].endLineNumber;for(let m=1,v=s.length;m<v;m++){const b=s[m];g=Math.min(g,b.startLineNumber),p=Math.max(p,b.endLineNumber)}c=!1,h=this._context.viewLayout.getVerticalOffsetForLineNumber(g),u=this._context.viewLayout.getVerticalOffsetForLineNumber(p)+this._lineHeight}else if(n)c=!0,h=this._context.viewLayout.getVerticalOffsetForLineNumber(n.startLineNumber),u=this._context.viewLayout.getVerticalOffsetForLineNumber(n.endLineNumber)+this._lineHeight;else return-1;if(!(t==="mouse"&&this._cursorSurroundingLinesStyle==="default")){const g=Math.min(a/this._lineHeight/2,this._cursorSurroundingLines);h-=g*this._lineHeight,u+=Math.max(0,g-1)*this._lineHeight}(r===0||r===4)&&(u+=this._lineHeight);let f;if(u-h>a){if(!c)return-1;f=h}else if(r===5||r===6)if(r===6&&o<=h&&u<=l)f=o;else{const g=Math.max(5*this._lineHeight,a*.2),p=h-g,m=u-a;f=Math.max(m,p)}else if(r===1||r===2)if(r===2&&o<=h&&u<=l)f=o;else{const g=(h+u)/2;f=Math.max(0,g-a/2)}else f=this._computeMinimumScrolling(o,l,h,u,r===3,r===4);return f}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),n=t.left,s=n+t.width;let r=1073741824,o=0;if(e.type==="range"){const l=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!l)return null;for(const c of l.ranges)r=Math.min(r,Math.round(c.left)),o=Math.max(o,Math.round(c.left+c.width))}else for(const l of e.selections){if(l.startLineNumber!==l.endLineNumber)return null;const c=this._visibleRangesForLineRange(l.startLineNumber,l.startColumn,l.endColumn);if(!c)return null;for(const h of c.ranges)r=Math.min(r,Math.round(h.left)),o=Math.max(o,Math.round(h.left+h.width))}return r=Math.max(0,r-Sk.HORIZONTAL_EXTRA_PX),o+=this._revealHorizontalRightPadding,e.type==="selections"&&o-r>t.width?null:{scrollLeft:this._computeMinimumScrolling(n,s,r,o),maxHorizontalOffset:o}}_computeMinimumScrolling(e,t,n,s,r,o){e=e|0,t=t|0,n=n|0,s=s|0,r=!!r,o=!!o;const a=t-e;if(s-n<a){if(r)return n;if(o)return Math.max(0,s-a);if(n<e)return n;if(s>t)return Math.max(0,s-a)}else return n;return e}}Sk.HORIZONTAL_EXTRA_PX=30;class mTe extends tP{constructor(e){super(),this._context=e;const n=this._context.configuration.options.get(129);this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const n=this._context.configuration.options.get(129);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],s=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.linesDecorationsClassName;l&&(n[s++]=new iD(a.range.startLineNumber,a.range.endLineNumber,l));const c=a.options.firstLineDecorationClassName;c&&(n[s++]=new iD(a.range.startLineNumber,a.range.startLineNumber,c))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=this._render(t,n,this._getDecorations(e)),r=this._decorationsLeft.toString(),o=this._decorationsWidth.toString(),a='" style="left:'+r+"px;width:"+o+'px;"></div>',l=[];for(let c=t;c<=n;c++){const h=c-t,u=s[h];let d="";for(let f=0,g=u.length;f<g;f++)d+='<div class="cldr '+u[f]+a;l[h]=d}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class _Te extends tP{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],s=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.marginClassName;l&&(n[s++]=new iD(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=this._render(t,n,this._getDecorations(e)),r=[];for(let o=t;o<=n;o++){const a=o-t,l=s[a];let c="";for(let h=0,u=l.length;h<u;h++)c+='<div class="cmdr '+l[h]+'" style=""></div>';r[a]=c}this._renderResult=r}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class Hr{constructor(e,t,n,s){this._rgba8Brand=void 0,this.r=Hr._clamp(e),this.g=Hr._clamp(t),this.b=Hr._clamp(n),this.a=Hr._clamp(s)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}Hr.Empty=new Hr(0,0,0,0);class kw extends te{constructor(){super(),this._onDidChange=new z,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(xi.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}static getInstance(){return this._INSTANCE||(this._INSTANCE=new kw),this._INSTANCE}_updateColorMap(){const e=xi.getColorMap();if(!e){this._colors=[Hr.Empty],this._backgroundIsLight=!0;return}this._colors=[Hr.Empty];for(let n=1;n<e.length;n++){const s=e[n].rgba;this._colors[n]=new Hr(s.r,s.g,s.b,Math.round(s.a*255))}let t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}kw._INSTANCE=null;const bTe=(()=>{const i=[];for(let e=32;e<=126;e++)i.push(e);return i.push(65533),i})(),vTe=(i,e)=>(i-=32,i<0||i>96?e<=2?(i+96)%96:96-1:i);class Gv{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=Gv.soften(e,12/15),this.charDataLight=Gv.soften(e,50/60)}static soften(e,t){let n=new Uint8ClampedArray(e.length);for(let s=0,r=e.length;s<r;s++)n[s]=Ax(e[s]*t);return n}renderChar(e,t,n,s,r,o,a,l,c,h,u){const d=1*this.scale,f=2*this.scale,g=u?1:f;if(t+d>e.width||n+g>e.height){console.warn("bad render request outside image data");return}const p=h?this.charDataLight:this.charDataNormal,m=vTe(s,c),v=e.width*4,b=a.r,w=a.g,y=a.b,x=r.r-b,k=r.g-w,S=r.b-y,L=Math.max(o,l),D=e.data;let N=m*d*f,T=n*v+t*4;for(let $=0;$<g;$++){let U=T;for(let ee=0;ee<d;ee++){const ce=p[N++]/255*(o/255);D[U++]=b+x*ce,D[U++]=w+k*ce,D[U++]=y+S*ce,D[U++]=L}T+=v}}blockRenderChar(e,t,n,s,r,o,a,l){const c=1*this.scale,h=2*this.scale,u=l?1:h;if(t+c>e.width||n+u>e.height){console.warn("bad render request outside image data");return}const d=e.width*4,f=.5*(r/255),g=o.r,p=o.g,m=o.b,v=s.r-g,b=s.g-p,w=s.b-m,y=g+v*f,x=p+b*f,k=m+w*f,S=Math.max(r,a),L=e.data;let D=n*d+t*4;for(let N=0;N<u;N++){let T=D;for(let $=0;$<c;$++)L[T++]=y,L[T++]=x,L[T++]=k,L[T++]=S;D+=d}}}const OV={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},PV=i=>{const e=new Uint8ClampedArray(i.length/2);for(let t=0;t<i.length;t+=2)e[t>>1]=OV[i[t]]<<4|OV[i[t+1]]&15;return e},FV={1:vf(()=>PV("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:vf(()=>PV("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class Ib{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return FV[e]?n=new Gv(FV[e](),e):n=Ib.createFromSampleData(Ib.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",n.fillStyle="#ffffff",n.font=`bold 16px ${e}`,n.textBaseline="middle";let s=0;for(const r of bTe)n.fillText(String.fromCharCode(r),s,16/2),s+=10;return n.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");let s=Ib._downsample(e,t);return new Gv(s,t)}static _downsampleChar(e,t,n,s,r){const o=1*r,a=2*r;let l=s,c=0;for(let h=0;h<a;h++){const u=h/a*16,d=(h+1)/a*16;for(let f=0;f<o;f++){const g=f/o*10,p=(f+1)/o*10;let m=0,v=0;for(let w=u;w<d;w++){const y=t+Math.floor(w)*3840,x=1-(w-Math.floor(w));for(let k=g;k<p;k++){const S=1-(k-Math.floor(k)),L=y+Math.floor(k)*4,D=S*x;v+=D,m+=e[L]*e[L+3]/255*D}}const b=m/v;c=Math.max(c,b),n[l++]=Ax(b)}}return c}static _downsample(e,t){const n=2*t*1*t,s=n*96,r=new Uint8ClampedArray(s);let o=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,r,o,t)),o+=n,a+=10*4;if(l>0){const c=255/l;for(let h=0;h<s;h++)r[h]*=c}return r}}const wTe=140,yTe=2;class Kv{constructor(e,t,n){const s=e.options,r=s.get(127),o=s.get(129),a=o.minimap,l=s.get(43),c=s.get(64);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=s.get(93),this.showSlider=c.showSlider,this.pixelRatio=r,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=s.get(58),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=o.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=vf(()=>Ib.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=Kv._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=Kv._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const n=e.getColor(mEe);return n?new Hr(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(_Ee);return t?Hr._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class Tb{constructor(e,t,n,s,r,o,a,l){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=s,this.sliderTop=r,this.sliderHeight=o,this.startLineNumber=a,this.endLineNumber=l}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(e,t,n,s,r,o,a,l,c,h,u){const d=e.pixelRatio,f=e.minimapLineHeight,g=Math.floor(e.canvasInnerHeight/f),p=e.lineHeight;if(e.minimapHeightIsEditorHeight){const x=l*e.lineHeight+(e.scrollBeyondLastLine?r-e.lineHeight:0),k=Math.max(1,Math.floor(r*r/x)),S=Math.max(0,e.minimapHeight-k),L=S/(h-r),D=c*L,N=S>0,T=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new Tb(c,h,N,L,D,k,1,Math.min(a,T))}let m;if(o&&n!==a){const x=n-t+1;m=Math.floor(x*f/d)}else{const x=r/p;m=Math.floor(x*f/d)}let v;e.scrollBeyondLastLine?v=(a-1)*f/d:v=Math.max(0,a*f/d-m),v=Math.min(e.minimapHeight-m,v);const b=v/(h-r),w=c*b;let y=0;if(e.scrollBeyondLastLine&&(y=r/p-1),g>=a+y){const k=a,S=v>0;return new Tb(c,h,S,b,w,m,1,k)}else{let x=Math.max(1,Math.floor(t-w*d/f));u&&u.scrollHeight===h&&(u.scrollTop>c&&(x=Math.min(x,u.startLineNumber)),u.scrollTop<c&&(x=Math.max(x,u.startLineNumber)));const k=Math.min(a,x+g-1),S=(c-s)/p,L=(t-x+S)*f/d;return new Tb(c,h,!0,b,L,m,x,k)}}}class nD{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}nD.INVALID=new nD(-1);class BV{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new uX(()=>nD.INVALID),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;const n=this._renderedLines._get().lines;for(let s=0,r=n.length;s<r;s++)if(n[s].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class iP{constructor(e,t,n,s){this._backgroundFillData=iP._createBackgroundFillData(t,n,s),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){const s=n.r,r=n.g,o=n.b,a=n.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let h=0;h<t;h++)for(let u=0;u<e;u++)l[c]=s,l[c+1]=r,l[c+2]=o,l[c+3]=a,c+=4;return l}}class Zv{constructor(e,t){this.samplingRatio=e,this.minimapLines=t}static compute(e,t,n){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const s=e.pixelRatio,r=e.lineHeight,o=e.scrollBeyondLastLine,{minimapLineCount:a}=Rp.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:o,height:e.editorHeight,lineHeight:r,pixelRatio:s}),l=t/a,c=l/2;if(!n||n.minimapLines.length===0){let w=[];if(w[0]=1,a>1){for(let y=0,x=a-1;y<x;y++)w[y]=Math.round(y*l+c);w[a-1]=t}return[new Zv(l,w),[]]}const h=n.minimapLines,u=h.length;let d=[],f=0,g=0,p=1;const m=10;let v=[],b=null;for(let w=0;w<a;w++){const y=Math.max(p,Math.round(w*l)),x=Math.max(y,Math.round((w+1)*l));for(;f<u&&h[f]<y;){if(v.length<m){const S=f+1+g;b&&b.type==="deleted"&&b._oldIndex===f-1?b.deleteToLineNumber++:(b={type:"deleted",_oldIndex:f,deleteFromLineNumber:S,deleteToLineNumber:S},v.push(b)),g--}f++}let k;if(f<u&&h[f]<=x)k=h[f],f++;else if(w===0?k=1:w+1===a?k=t:k=Math.round(w*l+c),v.length<m){const S=f+1+g;b&&b.type==="inserted"&&b._i===w-1?b.insertToLineNumber++:(b={type:"inserted",_i:w,insertFromLineNumber:S,insertToLineNumber:S},v.push(b)),g++}d[w]=k,p=k}if(v.length<m)for(;f<u;){const w=f+1+g;b&&b.type==="deleted"&&b._oldIndex===f-1?b.deleteToLineNumber++:(b={type:"deleted",_oldIndex:f,deleteFromLineNumber:w,deleteToLineNumber:w},v.push(b)),g--,f++}else v=[{type:"flush"}];return[new Zv(l,d),v]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let s=this.modelLineToMinimapLine(t)-1;for(;s+1<this.minimapLines.length&&this.minimapLines[s+1]<=t;)s++;if(n===s){const r=this.minimapLines[n];if(r<e||r>t)return null}return[n+1,s+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),s=this.modelLineToMinimapLine(t);return e!==t&&s===n&&(s===this.minimapLines.length?n>1&&n--:s++),[n,s]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let n=this.minimapLines.length,s=0;for(let r=this.minimapLines.length-1;r>=0&&!(this.minimapLines[r]<e.fromLineNumber);r--)this.minimapLines[r]<=e.toLineNumber?(this.minimapLines[r]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,r),s=Math.max(s,r)):this.minimapLines[r]-=t;return[n,s]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}class CTe extends Yr{constructor(e){super(e),this.tokensColorTracker=kw.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new Kv(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=Zv.compute(this.options,this._context.model.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new sD(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new Kv(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.toLineNumber);return t?this._actual.onLinesChanged(t[0],t[1]):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){if(this._samplingState){const[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._context.model.invalidateMinimapColorCache(),this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){let t=[];for(const n of e.ranges){const s=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);s&&t.push({fromLineNumber:s[0],toLineNumber:s[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));const s={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(s)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,n]=Zv.compute(this.options,this._context.model.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const s of n)switch(s.type){case"deleted":this._actual.onLinesDeleted(s.deleteFromLineNumber,s.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(s.insertFromLineNumber,s.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.model.getLineCount()}getRealLineCount(){return this._context.model.getLineCount()}getLineContent(e){return this._samplingState?this._context.model.getLineContent(this._samplingState.minimapLines[e-1]):this._context.model.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.model.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.model.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){let s=[];for(let r=0,o=t-e+1;r<o;r++)n[r]?s[r]=this._context.model.getViewLineData(this._samplingState.minimapLines[e+r-1]):s[r]=null;return s}return this._context.model.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new Ve(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){const r=this._samplingState.minimapLines[e-1],o=this._samplingState.minimapLines[t-1];n=new F(r,1,o,this._context.model.getLineMaxColumn(o))}else n=new F(e,1,t,this._context.model.getLineMaxColumn(t));const s=this._context.model.getDecorationsInViewport(n);if(this._samplingState){let r=[];for(const o of s){if(!o.options.minimap)continue;const a=o.range,l=this._samplingState.modelLineToMinimapLine(a.startLineNumber),c=this._samplingState.modelLineToMinimapLine(a.endLineNumber);r.push(new zY(new F(l,a.startColumn,c,a.endColumn),o.options))}return r}return s}getOptions(){return this._context.model.getTextModelOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.model.revealRange("mouse",!1,new F(e,1,e,1),1,0)}setScrollTop(e){this._context.model.setScrollPosition({scrollTop:e},1)}}class sD extends te{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(_V),this._domNode=ft(document.createElement("div")),Nl.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=ft(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=ft(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=ft(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=ft(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=ft(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._mouseDownListener=Ji(this._domNode.domNode,"mousedown",n=>{if(n.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.leftButton&&this._lastRenderData){const c=Nn(this._slider.domNode),h=c.top+c.height/2;this._startSliderDragging(n.buttons,n.posx,h,n.posy,this._lastRenderData.renderedLayout)}return}const r=this._model.options.minimapLineHeight,o=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.browserEvent.offsetY;let l=Math.floor(o/r)+this._lastRenderData.renderedLayout.startLineNumber;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderMouseMoveMonitor=new sg,this._sliderMouseDownListener=Ji(this._slider.domNode,"mousedown",n=>{n.preventDefault(),n.stopPropagation(),n.leftButton&&this._lastRenderData&&this._startSliderDragging(n.buttons,n.posx,n.posy,n.posy,this._lastRenderData.renderedLayout)}),this._gestureDisposable=kt.addTarget(this._domNode.domNode),this._sliderTouchStartListener=ne(this._domNode.domNode,Ut.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=ne(this._domNode.domNode,Ut.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=Ji(this._domNode.domNode,Ut.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n,s,r){this._slider.toggleClassName("active",!0);const o=(a,l)=>{const c=Math.abs(l-t);if(On&&c>wTe){this._model.setScrollTop(r.scrollTop);return}const h=a-n;this._model.setScrollTop(r.getDesiredScrollTopFromDelta(h))};s!==n&&o(s,t),this._sliderMouseMoveMonitor.startMonitoring(this._slider.domNode,e,E0,a=>o(a.posy,a.posx),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._mouseDownListener.dispose(),this._sliderMouseMoveMonitor.dispose(),this._sliderMouseDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){return this._model.options.showSlider==="always"?"minimap slider-always":"minimap slider-mouseover"}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new iP(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(_V),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const n=Tb.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(F.compareRangesUsingStarts);const n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((d,f)=>(d.options.zIndex||0)-(f.options.zIndex||0));const{canvasInnerWidth:s,canvasInnerHeight:r}=this._model.options,o=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,s,r);const h=new VV(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,h,e,o),this._renderDecorationsLineHighlights(c,n,h,e,o);const u=new VV(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,u,e,o,l,a,s),this._renderDecorationsHighlights(c,n,u,e,o,l,a,s)}}_renderSelectionLineHighlights(e,t,n,s,r){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let o=0,a=0;for(const l of t){const c=Math.max(s.startLineNumber,l.startLineNumber),h=Math.min(s.endLineNumber,l.endLineNumber);if(c>h)continue;for(let f=c;f<=h;f++)n.set(f,!0);const u=(c-s.startLineNumber)*r,d=(h-s.startLineNumber)*r+r;a>=u||(a>o&&e.fillRect(_h,o,e.canvas.width,a-o),o=u),a=d}a>o&&e.fillRect(_h,o,e.canvas.width,a-o)}_renderDecorationsLineHighlights(e,t,n,s,r){const o=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==Sl.Inline)continue;const h=Math.max(s.startLineNumber,l.range.startLineNumber),u=Math.min(s.endLineNumber,l.range.endLineNumber);if(h>u)continue;const d=c.getColor(this._theme);if(!d||d.isTransparent())continue;let f=o.get(d.toString());f||(f=d.transparent(.5).toString(),o.set(d.toString(),f)),e.fillStyle=f;for(let g=h;g<=u;g++){if(n.has(g))continue;n.set(g,!0);const p=(h-s.startLineNumber)*r;e.fillRect(_h,p,e.canvas.width,r)}}}_renderSelectionsHighlights(e,t,n,s,r,o,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const h=Math.max(s.startLineNumber,c.startLineNumber),u=Math.min(s.endLineNumber,c.endLineNumber);if(!(h>u))for(let d=h;d<=u;d++)this.renderDecorationOnLine(e,n,c,this._selectionColor,s,d,r,r,o,a,l)}}_renderDecorationsHighlights(e,t,n,s,r,o,a,l){for(const c of t){const h=c.options.minimap;if(!h)continue;const u=Math.max(s.startLineNumber,c.range.startLineNumber),d=Math.min(s.endLineNumber,c.range.endLineNumber);if(u>d)continue;const f=h.getColor(this._theme);if(!(!f||f.isTransparent()))for(let g=u;g<=d;g++)switch(h.position){case Sl.Inline:this.renderDecorationOnLine(e,n,c.range,f,s,g,r,r,o,a,l);continue;case Sl.Gutter:const p=(g-s.startLineNumber)*r,m=2;this.renderDecoration(e,f,m,p,yTe,r);continue}}}renderDecorationOnLine(e,t,n,s,r,o,a,l,c,h,u){const d=(o-r.startLineNumber)*l;if(d+a<0||d>this._model.options.canvasInnerHeight)return;const{startLineNumber:f,endLineNumber:g}=n,p=f===o?n.startColumn:1,m=g===o?n.endColumn:this._model.getLineMaxColumn(o),v=this.getXOffsetForPosition(t,o,p,c,h,u),b=this.getXOffsetForPosition(t,o,m,c,h,u);this.renderDecoration(e,s,v,d,b-v,a)}getXOffsetForPosition(e,t,n,s,r,o){if(n===1)return _h;if((n-1)*r>=o)return o;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[_h];let h=_h;for(let u=1;u<c.length+1;u++){const d=c.charCodeAt(u-1),f=d===9?s*r:la(d)?2*r:r,g=h+f;if(g>=o){l[u]=o;break}l[u]=g,h=g}e.set(t,l)}return n-1<l.length?l[n-1]:o}renderDecoration(e,t,n,s,r,o){e.fillStyle=t&&t.toString()||"",e.fillRect(n,s,r,o)}renderLines(e){const t=e.startLineNumber,n=e.endLineNumber,s=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const ce=this._lastRenderData._get();return new BV(e,ce.imageData,ce.lines)}const r=this._getBuffer();if(!r)return null;let[o,a,l]=sD._renderUntouchedLines(r,t,n,s,this._lastRenderData);const c=this._model.getMinimapLinesRenderingData(t,n,l),h=this._model.getOptions().tabSize,u=this._model.options.defaultBackgroundColor,d=this._model.options.backgroundColor,f=this._model.options.foregroundAlpha,g=this._model.tokensColorTracker,p=g.backgroundIsLight(),m=this._model.options.renderMinimap,v=this._model.options.charRenderer(),b=this._model.options.fontScale,w=this._model.options.minimapCharWidth,x=(m===1?2:2+1)*b,k=s>x?Math.floor((s-x)/2):0,S=d.a/255,L=new Hr(Math.round((d.r-u.r)*S+u.r),Math.round((d.g-u.g)*S+u.g),Math.round((d.b-u.b)*S+u.b),255);let D=0;const N=[];for(let ce=0,fe=n-t+1;ce<fe;ce++)l[ce]&&sD._renderLine(r,L,d.a,p,m,w,g,f,v,D,k,h,c[ce],b,s),N[ce]=new nD(D),D+=s;const T=o===-1?0:o,U=(a===-1?r.height:a)-T;return this._canvas.domNode.getContext("2d").putImageData(r,0,0,0,T,r.width,U),new BV(e,r,N)}static _renderUntouchedLines(e,t,n,s,r){const o=[];if(!r){for(let L=0,D=n-t+1;L<D;L++)o[L]=!0;return[-1,-1,o]}const a=r._get(),l=a.imageData.data,c=a.rendLineNumberStart,h=a.lines,u=h.length,d=e.width,f=e.data,g=(n-t+1)*s*d*4;let p=-1,m=-1,v=-1,b=-1,w=-1,y=-1,x=0;for(let L=t;L<=n;L++){const D=L-t,N=L-c,T=N>=0&&N<u?h[N].dy:-1;if(T===-1){o[D]=!0,x+=s;continue}const $=T*d*4,U=(T+s)*d*4,ee=x*d*4,ce=(x+s)*d*4;b===$&&y===ee?(b=U,y=ce):(v!==-1&&(f.set(l.subarray(v,b),w),p===-1&&v===0&&v===w&&(p=b),m===-1&&b===g&&v===w&&(m=v)),v=$,b=U,w=ee,y=ce),o[D]=!1,x+=s}v!==-1&&(f.set(l.subarray(v,b),w),p===-1&&v===0&&v===w&&(p=b),m===-1&&b===g&&v===w&&(m=v));const k=p===-1?-1:p/(d*4),S=m===-1?-1:m/(d*4);return[k,S,o]}static _renderLine(e,t,n,s,r,o,a,l,c,h,u,d,f,g,p){const m=f.content,v=f.tokens,b=e.width-o,w=p===1;let y=_h,x=0,k=0;for(let S=0,L=v.getCount();S<L;S++){const D=v.getEndOffset(S),N=v.getForeground(S),T=a.getColor(N);for(;x<D;x++){if(y>b)return;const $=m.charCodeAt(x);if($===9){const U=d-(x+k)%d;k+=U-1,y+=U*o}else if($===32)y+=o;else{const U=la($)?2:1;for(let ee=0;ee<U;ee++)if(r===2?c.blockRenderChar(e,y,h+u,T,l,t,n,w):c.renderChar(e,y,h+u,$,T,l,t,n,g,s,w),y+=o,y>b)return}}}}}class VV{constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let s=0,r=this._endLineNumber-this._startLineNumber+1;s<r;s++)this._values[s]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}Jt((i,e)=>{const t=i.getColor(bEe);t&&e.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${t}; }`);const n=i.getColor(vEe);n&&e.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${n}; }`);const s=i.getColor(wEe);s&&e.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${s}; }`);const r=i.getColor(Lw);r&&e.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${r} -6px 0 6px -6px inset; }`)});class STe extends Yr{constructor(e){super(e);const n=this._context.configuration.options.get(129);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._domNode=ft(document.createElement("div")),Nl.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const n=this._context.configuration.options.get(129);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0}addWidget(e){const t=ft(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference===t?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const s=this._widgets[t].domNode.domNode;delete this._widgets[t],s.parentNode.removeChild(s),this.setShouldRender()}}_renderWidget(e){const t=e.domNode;if(e.preference===null){t.unsetTop();return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){const n=t.domNode.clientHeight;t.setTop(this._editorHeight-n-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let n=0,s=t.length;n<s;n++){const r=t[n];this._renderWidget(this._widgets[r])}}}class xTe{constructor(e,t){const n=e.options;this.lineHeight=n.get(58),this.pixelRatio=n.get(127),this.overviewRulerLanes=n.get(73),this.renderBorder=n.get(72);const s=t.getColor(PEe);this.borderColor=s?s.toString():null,this.hideCursor=n.get(51);const r=t.getColor(YQ);this.cursorColor=r?r.transparent(.7).toString():null,this.themeType=t.type;const o=n.get(64),a=o.enabled,l=o.side,c=a?t.getColor(FEe)||xi.getDefaultBackground():null;c===null||l==="left"?this.backgroundColor=null:this.backgroundColor=Z.Format.CSS.formatHex(c);const u=n.get(129).overviewRuler;this.top=u.top,this.right=u.right,this.domWidth=u.width,this.domHeight=u.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[d,f]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=d,this.w=f}_initLanes(e,t,n){const s=t-e;if(n>=3){const r=Math.floor(s/3),o=Math.floor(s/3),a=s-r-o,l=e,c=l+r,h=l+r+a;return[[0,l,c,l,h,l,c,l],[0,r,a,r+a,o,r+a+o,a+o,r+a+o]]}else if(n===2){const r=Math.floor(s/2),o=s-r,a=e,l=a+r;return[[0,a,a,a,l,a,a,a],[0,r,r,r,o,r+o,r+o,r+o]]}else{const r=e,o=s;return[[0,r,r,r,r,r,r,r],[0,o,o,o,o,o,o,o]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class DTe extends Yr{constructor(e){super(e),this._domNode=ft(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=xi.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new xTe(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(q.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._context.model.invalidateOverviewRulerColorCache(),this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:"");return}const e=this._settings.canvasWidth,t=this._settings.canvasHeight,n=this._settings.lineHeight,s=this._context.viewLayout,r=this._context.viewLayout.getScrollHeight(),o=t/r,a=this._context.model.getAllOverviewRulerDecorations(this._context.theme),l=6*this._settings.pixelRatio|0,c=l/2|0,h=this._domNode.domNode.getContext("2d");this._settings.backgroundColor===null?h.clearRect(0,0,e,t):(h.fillStyle=this._settings.backgroundColor,h.fillRect(0,0,e,t));const u=this._settings.x,d=this._settings.w;a.sort(HY.cmp);for(const f of a){const g=f.color,p=f.data;h.fillStyle=g;let m=0,v=0,b=0;for(let w=0,y=p.length/3;w<y;w++){const x=p[3*w],k=p[3*w+1],S=p[3*w+2];let L=s.getVerticalOffsetForLineNumber(k)*o|0,D=(s.getVerticalOffsetForLineNumber(S)+n)*o|0;if(D-L<l){let T=(L+D)/2|0;T<c?T=c:T+c>t&&(T=t-c),L=T-c,D=T+c}L>b+1||x!==m?(w!==0&&h.fillRect(u[m],v,d[m],b-v),m=x,v=L,b=D):D>b&&(b=D)}h.fillRect(u[m],v,d[m],b-v)}if(!this._settings.hideCursor&&this._settings.cursorColor){const f=2*this._settings.pixelRatio|0,g=f/2|0,p=this._settings.x[7],m=this._settings.w[7];h.fillStyle=this._settings.cursorColor;let v=-100,b=-100;for(let w=0,y=this._cursorPositions.length;w<y;w++){const x=this._cursorPositions[w];let k=s.getVerticalOffsetForLineNumber(x.lineNumber)*o|0;k<g?k=g:k+g>t&&(k=t-g);const S=k-g,L=S+f;S>b+1?(w!==0&&h.fillRect(p,v,m,b-v),v=S,b=L):L>b&&(b=L)}h.fillRect(p,v,m,b-v)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(h.beginPath(),h.lineWidth=1,h.strokeStyle=this._settings.borderColor,h.moveTo(0,0),h.lineTo(0,t),h.stroke(),h.moveTo(0,0),h.lineTo(e,0),h.stroke())}}class WV{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class Yv{constructor(e,t,n){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.color=n,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class LTe{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(Yv.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),s=Math.floor(this._outerHeight),r=n/s,o=Math.floor(4*this._pixelRatio/2);let a=[];for(let l=0,c=this._zones.length;l<c;l++){const h=this._zones[l];if(!e){const b=h.getColorZones();if(b){a.push(b);continue}}const u=Math.floor(r*this._getVerticalOffsetForLine(h.startLineNumber)),d=Math.floor(r*(this._getVerticalOffsetForLine(h.endLineNumber)+t));let f=Math.floor((u+d)/2),g=d-f;g<o&&(g=o),f-g<0&&(f=g),f+g>n&&(f=n-g);const p=h.color;let m=this._color2Id[p];m||(m=++this._lastAssignedId,this._color2Id[p]=m,this._id2Color[m]=p);const v=new WV(f-g,f+g,m);h.setColorZone(v),a.push(v)}return this._colorZonesInvalid=!1,a.sort(WV.compare),a}}class kTe extends xw{constructor(e,t){super(),this._context=e;const n=this._context.configuration.options;this._domNode=ft(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new LTe(s=>this._context.viewLayout.getVerticalOffsetForLineNumber(s)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(58)),this._zoneManager.setPixelRatio(n.get(127)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(58)&&(this._zoneManager.setLineHeight(t.get(58)),this._render()),e.hasChanged(127)&&(this._zoneManager.setPixelRatio(t.get(127)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),s=this._zoneManager.getId2Color(),r=this._domNode.domNode.getContext("2d");return r.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(r,n,s,e),!0}_renderOneLane(e,t,n,s){let r=0,o=0,a=0;for(const l of t){const c=l.colorId,h=l.from,u=l.to;c!==r?(e.fillRect(0,o,s,a-o),r=c,e.fillStyle=n[r],o=h,a=u):a>=h?a=Math.max(a,u):(e.fillRect(0,o,s,a-o),o=h,a=u)}e.fillRect(0,o,s,a-o)}}class ATe extends Yr{constructor(e){super(e),this.domNode=ft(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:s}=this._context.model.getTextModelOptions(),r=s;let o=t-e;for(;o>0;){const a=ft(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(r),this.domNode.appendChild(a),this._renderedRulers.push(a),o--}return}let n=e-t;for(;n>0;){const s=this._renderedRulers.pop();this.domNode.removeChild(s),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){const s=this._renderedRulers[t],r=this._rulers[t];s.setBoxShadow(r.color?`1px 0 0 0 ${r.color} inset`:""),s.setHeight(Math.min(e.scrollHeight,1e6)),s.setLeft(r.column*this._typicalHalfwidthCharacterWidth)}}}Jt((i,e)=>{const t=i.getColor(MEe);t&&e.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${t} inset; }`)});class ETe extends Yr{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const n=this._context.configuration.options.get(91);this._useShadows=n.useShadows,this._domNode=ft(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(129);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.minimap.minimapWidth-t.verticalScrollbarWidth}onConfigurationChanged(e){const n=this._context.configuration.options.get(91);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}Jt((i,e)=>{const t=i.getColor(Lw);t&&e.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${t} 0 6px 6px -6px inset; }`)});class ITe{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class TTe{constructor(e,t){this.lineNumber=e,this.ranges=t}}function NTe(i){return new ITe(i)}function MTe(i){return new TTe(i.lineNumber,i.ranges.map(NTe))}class ui extends I0{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){const s=this._typicalHalfwidthCharacterWidth/4;let r=null,o=null;if(n&&n.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!r&&c<n.length;c++)n[c].lineNumber===a&&(r=n[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=n.length-1;!o&&c>=0;c--)n[c].lineNumber===l&&(o=n[c].ranges[0]);r&&!r.startStyle&&(r=null),o&&!o.startStyle&&(o=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],h=c.left,u=c.left+c.width,d={top:0,bottom:0},f={top:0,bottom:0};if(a>0){const g=t[a-1].ranges[0].left,p=t[a-1].ranges[0].left+t[a-1].ranges[0].width;Py(h-g)<s?d.top=2:h>g&&(d.top=1),Py(u-p)<s?f.top=2:g<u&&u<p&&(f.top=1)}else r&&(d.top=r.startStyle.top,f.top=r.endStyle.top);if(a+1<l){const g=t[a+1].ranges[0].left,p=t[a+1].ranges[0].left+t[a+1].ranges[0].width;Py(h-g)<s?d.bottom=2:g<h&&h<p&&(d.bottom=1),Py(u-p)<s?f.bottom=2:u<p&&(f.bottom=1)}else o&&(d.bottom=o.startStyle.bottom,f.bottom=o.endStyle.bottom);c.startStyle=d,c.endStyle=f}}_getVisibleRangesWithStyle(e,t,n){const r=(t.linesVisibleRangesForRange(e,!0)||[]).map(MTe);return!this._visibleRangesHaveGaps(r)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,r,n),r}_createSelectionPiece(e,t,n,s,r){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;left:"+s.toString()+"px;width:"+r.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,n,s){if(s.length===0)return;const r=!!s[0].ranges[0].startStyle,o=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),l=s[0].lineNumber,c=s[s.length-1].lineNumber;for(let h=0,u=s.length;h<u;h++){const d=s[h],f=d.lineNumber,g=f-t,p=n&&(f===c||f===l)?a:o,m=n&&f===l?1:0;let v="",b="";for(let w=0,y=d.ranges.length;w<y;w++){const x=d.ranges[w];if(r){const S=x.startStyle,L=x.endStyle;if(S.top===1||S.bottom===1){v+=this._createSelectionPiece(m,p,ui.SELECTION_CLASS_NAME,x.left-ui.ROUNDED_PIECE_WIDTH,ui.ROUNDED_PIECE_WIDTH);let D=ui.EDITOR_BACKGROUND_CLASS_NAME;S.top===1&&(D+=" "+ui.SELECTION_TOP_RIGHT),S.bottom===1&&(D+=" "+ui.SELECTION_BOTTOM_RIGHT),v+=this._createSelectionPiece(m,p,D,x.left-ui.ROUNDED_PIECE_WIDTH,ui.ROUNDED_PIECE_WIDTH)}if(L.top===1||L.bottom===1){v+=this._createSelectionPiece(m,p,ui.SELECTION_CLASS_NAME,x.left+x.width,ui.ROUNDED_PIECE_WIDTH);let D=ui.EDITOR_BACKGROUND_CLASS_NAME;L.top===1&&(D+=" "+ui.SELECTION_TOP_LEFT),L.bottom===1&&(D+=" "+ui.SELECTION_BOTTOM_LEFT),v+=this._createSelectionPiece(m,p,D,x.left+x.width,ui.ROUNDED_PIECE_WIDTH)}}let k=ui.SELECTION_CLASS_NAME;if(r){const S=x.startStyle,L=x.endStyle;S.top===0&&(k+=" "+ui.SELECTION_TOP_LEFT),S.bottom===0&&(k+=" "+ui.SELECTION_BOTTOM_LEFT),L.top===0&&(k+=" "+ui.SELECTION_TOP_RIGHT),L.bottom===0&&(k+=" "+ui.SELECTION_BOTTOM_RIGHT)}b+=this._createSelectionPiece(m,p,k,x.left,x.width)}e[g][0]+=v,e[g][1]+=b}}prepareRender(e){const t=[],n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let o=n;o<=s;o++){const a=o-n;t[a]=["",""]}const r=[];for(let o=0,a=this._selections.length;o<a;o++){const l=this._selections[o];if(l.isEmpty()){r[o]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[o]);r[o]=c,this._actualRenderOneSelection(t,n,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=r,this._renderResult=t.map(([o,a])=>o+a)}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}ui.SELECTION_CLASS_NAME="selected-text";ui.SELECTION_TOP_LEFT="top-left-radius";ui.SELECTION_BOTTOM_LEFT="bottom-left-radius";ui.SELECTION_TOP_RIGHT="top-right-radius";ui.SELECTION_BOTTOM_RIGHT="bottom-right-radius";ui.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";ui.ROUNDED_PIECE_WIDTH=10;Jt((i,e)=>{const t=i.getColor(tu);t&&e.addRule(`.monaco-editor .focused .selected-text { background-color: ${t}; }`);const n=i.getColor(K5);n&&e.addRule(`.monaco-editor .selected-text { background-color: ${n}; }`);const s=i.getColor(yAe);s&&!s.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${s}; }`)});function Py(i){return i<0?-i:i}class zV{constructor(e,t,n,s,r,o){this.top=e,this.left=t,this.width=n,this.height=s,this.textContent=r,this.textContentClassName=o}}class HV{constructor(e){this._context=e;const t=this._context.configuration.options,n=t.get(43);this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=ft(document.createElement("div")),this._domNode.setClassName(`cursor ${Kd}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Fn.applyFontInfo(this._domNode,n),this._domNode.setDisplay("none"),this._position=new q(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(43);return this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),Fn.applyFontInfo(this._domNode,n),!0}onCursorPositionChanged(e){return this._position=e,!0}_prepareRender(e){let t="";if(this._cursorStyle===mn.Line||this._cursorStyle===mn.LineThin){const d=e.visibleRangeForPosition(this._position);if(!d||d.outsideRenderedLine)return null;let f;if(this._cursorStyle===mn.Line){if(f=$9(this._lineCursorWidth>0?this._lineCursorWidth:2),f>2){const m=this._context.model.getLineContent(this._position.lineNumber),v=mx(m,this._position.column-1);t=m.substr(this._position.column-1,v)}}else f=$9(1);let g=d.left;f>=2&&g>=1&&(g-=1);const p=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta;return new zV(p,g,f,this._lineHeight,t,"")}const n=this._context.model.getLineContent(this._position.lineNumber),s=mx(n,this._position.column-1),r=e.linesVisibleRangesForRange(new F(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column+s),!1);if(!r||r.length===0)return null;const o=r[0];if(o.outsideRenderedLine||o.ranges.length===0)return null;const a=o.ranges[0],l=a.width<1?this._typicalHalfwidthCharacterWidth:a.width;let c="";if(this._cursorStyle===mn.Block){const d=this._context.model.getViewLineData(this._position.lineNumber);t=n.substr(this._position.column-1,s);const f=d.tokens.findTokenIndexAtOffset(this._position.column-1);c=d.tokens.getClassName(f)}let h=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta,u=this._lineHeight;return(this._cursorStyle===mn.Underline||this._cursorStyle===mn.UnderlineThin)&&(h+=this._lineHeight-2,u=2),new zV(h,a.left,l,u,t,c)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${Kd} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class Qv extends Yr{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new HV(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=ft(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new Ms,this._cursorFlatBlinkInterval=new vw,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,s=this._secondaryCursors.length;n<s;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length){const n=t.length-this._secondaryCursors.length;for(let s=0;s<n;s++){const r=new HV(this._context);this._domNode.domNode.insertBefore(r.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(r)}}else if(this._secondaryCursors.length>t.length){const n=this._secondaryCursors.length-t.length;for(let s=0;s<n;s++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let n=0;n<t.length;n++)this._secondaryCursors[n].onCursorPositionChanged(t[n])}onCursorStateChanged(e){const t=[];for(let s=0,r=e.selections.length;s<r;s++)t[s]=e.selections[s].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));const n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=n=>{for(let s=0,r=e.ranges.length;s<r;s++)if(e.ranges[s].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[s].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,n=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},Qv.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},Qv.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case mn.Line:e+=" cursor-line-style";break;case mn.Block:e+=" cursor-block-style";break;case mn.Underline:e+=" cursor-underline-style";break;case mn.LineThin:e+=" cursor-line-thin-style";break;case mn.BlockOutline:e+=" cursor-block-outline-style";break;case mn.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){let t=[],n=0;const s=this._primaryCursor.render(e);s&&(t[n++]=s);for(let r=0,o=this._secondaryCursors.length;r<o;r++){const a=this._secondaryCursors[r].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}}Qv.BLINK_INTERVAL=500;Jt((i,e)=>{const t=i.getColor(YQ);if(t){let n=i.getColor(TEe);n||(n=t.opposite()),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${t}; border-color: ${t}; color: ${n}; }`),i.type==="hc"&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${n}; border-right: 1px solid ${n}; }`)}});const wE=()=>{throw new Error("Invalid change accessor")};class RTe extends Yr{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(129);this._lineHeight=t.get(58),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=ft(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=ft(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const s of e)t.set(s.id,s);let n=!1;return this._context.model.changeWhitespace(s=>{const r=Object.keys(this._zones);for(let o=0,a=r.length;o<a;o++){const l=r[o],c=this._zones[l],h=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=h.isInHiddenArea;const u=t.get(l);u&&(u.afterLineNumber!==h.afterViewLineNumber||u.height!==h.heightInPx)&&(s.changeOneWhitespace(l,h.afterViewLineNumber,h.heightInPx),this._safeCallOnComputedHeight(c.delegate,h.heightInPx),n=!0)}}),n}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(129);return this._lineHeight=t.get(58),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(58)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return typeof e.afterColumn<"u"?e.afterColumn:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const o=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new q(o,this._context.model.getModelLineMaxColumn(o))}let n;t.column===this._context.model.getModelLineMaxColumn(t.lineNumber)?n=this._context.model.validateModelPosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.model.validateModelPosition({lineNumber:t.lineNumber,column:t.column+1});const s=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(t),r=this._context.model.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!r,afterViewLineNumber:s.lineNumber,heightInPx:r?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.model.changeWhitespace(n=>{const s={addZone:r=>(t=!0,this._addZone(n,r)),removeZone:r=>{r&&(t=this._removeZone(n,r)||t)},layoutZone:r=>{r&&(t=this._layoutZone(n,r)||t)}};OTe(e,s),s.addZone=wE,s.removeZone=wE,s.layoutZone=wE}),t}_addZone(e,t){const n=this._computeWhitespaceProps(t),r={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:ft(t.domNode),marginDomNode:t.marginDomNode?ft(t.marginDomNode):null};return this._safeCallOnComputedHeight(r.delegate,n.heightInPx),r.domNode.setPosition("absolute"),r.domNode.domNode.style.width="100%",r.domNode.setDisplay("none"),r.domNode.setAttribute("monaco-view-zone",r.whitespaceId),this.domNode.appendChild(r.domNode),r.marginDomNode&&(r.marginDomNode.setPosition("absolute"),r.marginDomNode.domNode.style.width="100%",r.marginDomNode.setDisplay("none"),r.marginDomNode.setAttribute("monaco-view-zone",r.whitespaceId),this.marginDomNode.appendChild(r.marginDomNode)),this._zones[r.whitespaceId]=r,this.setShouldRender(),r.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.parentNode.removeChild(n.domNode.domNode),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.parentNode.removeChild(n.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t],s=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=s.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,s.afterViewLineNumber,s.heightInPx),this._safeCallOnComputedHeight(n.delegate,s.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){Ke(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){Ke(n)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,n={};let s=!1;for(const o of t)this._zones[o.id].isInHiddenArea||(n[o.id]=o,s=!0);const r=Object.keys(this._zones);for(let o=0,a=r.length;o<a;o++){const l=r[o],c=this._zones[l];let h=0,u=0,d="none";n.hasOwnProperty(l)?(h=n[l].verticalOffset-e.bigNumbersDelta,u=n[l].height,d="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(n[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(h),c.domNode.setHeight(u),c.domNode.setDisplay(d),c.marginDomNode&&(c.marginDomNode.setTop(h),c.marginDomNode.setHeight(u),c.marginDomNode.setDisplay(d))}s&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function OTe(i,e){try{return i(e)}catch(t){Ke(t)}}class PTe{constructor(e){this._theme=e}get type(){return this._theme.type}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class FTe{constructor(e,t,n){this.configuration=e,this.theme=new PTe(t),this.model=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.model.addViewEventHandler(e)}removeEventHandler(e){this.model.removeViewEventHandler(e)}}class BTe{constructor(e,t,n,s){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=n,this._model=s,this.visibleRange=new F(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class VTe extends xw{constructor(e,t,n,s,r,o){super(),this._selections=[new Ve(1,1,1,1)],this._renderAnimationFrame=null;const a=new BIe(t,s,r,e);this._context=new FTe(t,n.getColorTheme(),s),this._configPixelRatio=this._context.configuration.options.get(127),this._context.addEventHandler(this),this._register(n.onDidColorThemeChange(p=>{this._context.theme.update(p),this._context.model.onDidColorThemeChange(),this.render(!0,!1)})),this._viewParts=[],this._textAreaHandler=new NIe(this._context,a,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=ft(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=ft(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=ft(document.createElement("div")),Nl.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new hTe(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new Sk(this._context,this._linesContent),this._viewZones=new RTe(this._context),this._viewParts.push(this._viewZones);const l=new DTe(this._context);this._viewParts.push(l);const c=new ETe(this._context);this._viewParts.push(c);const h=new zIe(this._context);this._viewParts.push(h),h.addDynamicOverlay(new jIe(this._context)),h.addDynamicOverlay(new ui(this._context)),h.addDynamicOverlay(new dTe(this._context)),h.addDynamicOverlay(new GIe(this._context));const u=new HIe(this._context);this._viewParts.push(u),u.addDynamicOverlay(new qIe(this._context)),u.addDynamicOverlay(new uTe(this._context)),u.addDynamicOverlay(new _Te(this._context)),u.addDynamicOverlay(new mTe(this._context)),u.addDynamicOverlay(new Rm(this._context));const d=new Ef(this._context);d.getDomNode().appendChild(this._viewZones.marginDomNode),d.getDomNode().appendChild(u.getDomNode()),this._viewParts.push(d),this._contentWidgets=new UIe(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new Qv(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new STe(this._context),this._viewParts.push(this._overlayWidgets);const f=new ATe(this._context);this._viewParts.push(f);const g=new CTe(this._context);if(this._viewParts.push(g),l){const p=this._scrollbar.getOverviewRulerLayoutInfo();p.parent.insertBefore(l.getDomNode(),p.insertBefore)}this._linesContent.appendChild(h.getDomNode()),this._linesContent.appendChild(f.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(c.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(g.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),o?o.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new TIe(this._context,a,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new vIe(e,t)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new q(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPositionRelativeToEditor:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new q(e,t)))}}_applyLayout(){const t=this._context.configuration.options.get(129);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(126)+" "+Ux(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this._configPixelRatio=this._context.configuration.options.get(127),this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=WZ(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){WTe(()=>this._actualRender())}_getViewPartsToRender(){let e=[],t=0;for(const n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_actualRender(){if(!qO(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;const t=this._context.viewLayout.getLinesViewportData();this._context.model.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const n=new BTe(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.model);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const s=new Oke(this._context.viewLayout,n,this._viewLines);for(const r of e)r.prepareRender(s);for(const r of e)r.render(s),r.onDidRender();Math.abs(dx()-this._configPixelRatio)>.001&&this._context.configuration.updatePixelRatio()}delegateVerticalScrollbarMouseDown(e){this._scrollbar.delegateVerticalScrollbarMouseDown(e)}restoreState(e){this._context.model.setScrollPosition({scrollTop:e.scrollTop},1),this._context.model.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.model.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,t){const n=this._context.model.validateModelPosition({lineNumber:e,column:t}),s=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();const r=this._viewLines.visibleRangeForPosition(new q(s.lineNumber,s.column));return r?r.left:-1}getTargetAtClientPoint(e,t){const n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?wk.convertViewToModelMouseTarget(n,this._context.model.coordinatesConverter):null}createOverviewRuler(e){return new kTe(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const n of this._viewParts)n.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){let t=e.position&&e.position.range||null;if(t===null){const s=e.position?e.position.position:null;s!==null&&(t=new F(s.lineNumber,s.column,s.lineNumber,s.column))}const n=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,t,n),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}function WTe(i){try{return i()}catch(e){Ke(e)}}class rD{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new pn(new F(1,1,1,1),0,new q(1,1),0),new pn(new F(1,1,1,1),0,new q(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Qe(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.getDirection()===0?new Ve(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new Ve(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,s){return t.equals(n)?s:e.normalizePosition(t,2)}static _validateViewState(e,t){const n=t.position,s=t.selectionStart.getStartPosition(),r=t.selectionStart.getEndPosition(),o=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,s,n,o),l=this._validatePositionWithCache(e,r,s,a);return n.equals(o)&&s.equals(a)&&r.equals(l)?t:new pn(F.fromPositions(a,l),t.selectionStartLeftoverVisibleColumns+s.column-a.column,o,t.leftoverVisibleColumns+n.column-o.column)}_setState(e,t,n){if(n&&(n=rD._validateViewState(e.viewModel,n)),t){const s=e.model.validateRange(t.selectionStart),r=t.selectionStart.equalsRange(s)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),a=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new pn(s,r,o,a)}else{if(!n)return;const s=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),r=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new pn(s,n.selectionStartLeftoverVisibleColumns,r,n.leftoverVisibleColumns)}if(n){const s=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),r=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new pn(s,t.selectionStartLeftoverVisibleColumns,r,t.leftoverVisibleColumns)}else{const s=e.coordinatesConverter.convertModelPositionToViewPosition(new q(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),r=e.coordinatesConverter.convertModelPositionToViewPosition(new q(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),o=new F(s.lineNumber,s.column,r.lineNumber,r.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new pn(o,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}class UV{constructor(e){this.context=e,this.primaryCursor=new rD(e),this.secondaryCursors=[],this.lastAddedCursorIndex=0}dispose(){this.primaryCursor.dispose(this.context),this.killSecondaryCursors()}startTrackingSelections(){this.primaryCursor.startTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].startTrackingSelection(this.context)}stopTrackingSelections(){this.primaryCursor.stopTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){this.primaryCursor.ensureValidState(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].ensureValidState(this.context)}readSelectionFromMarkers(){let e=[];e[0]=this.primaryCursor.readSelectionFromMarkers(this.context);for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].readSelectionFromMarkers(this.context);return e}getAll(){let e=[];e[0]=this.primaryCursor.asCursorState();for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].asCursorState();return e}getViewPositions(){let e=[];e[0]=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].viewState.position;return e}getTopMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++){const s=this.secondaryCursors[t].viewState.position;s.isBefore(e)&&(e=s)}return e}getBottomMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++){const s=this.secondaryCursors[t].viewState.position;e.isBeforeOrEqual(s)&&(e=s)}return e}getSelections(){let e=[];e[0]=this.primaryCursor.modelState.selection;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].modelState.selection;return e}getViewSelections(){let e=[];e[0]=this.primaryCursor.viewState.selection;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].viewState.selection;return e}setSelections(e){this.setStates(Qe.fromModelSelections(e))}getPrimaryCursor(){return this.primaryCursor.asCursorState()}setStates(e){e!==null&&(this.primaryCursor.setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.secondaryCursors.length,n=e.length;if(t<n){let s=n-t;for(let r=0;r<s;r++)this._addSecondaryCursor()}else if(t>n){let s=t-n;for(let r=0;r<s;r++)this._removeSecondaryCursor(this.secondaryCursors.length-1)}for(let s=0;s<n;s++)this.secondaryCursors[s].setState(this.context,e[s].modelState,e[s].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.secondaryCursors.push(new rD(this.context)),this.lastAddedCursorIndex=this.secondaryCursors.length}getLastAddedCursorIndex(){return this.secondaryCursors.length===0||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.secondaryCursors[e].dispose(this.context),this.secondaryCursors.splice(e,1)}_getAll(){let e=[];e[0]=this.primaryCursor;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t];return e}normalize(){if(this.secondaryCursors.length===0)return;let e=this._getAll(),t=[];for(let n=0,s=e.length;n<s;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort((n,s)=>n.selection.startLineNumber===s.selection.startLineNumber?n.selection.startColumn-s.selection.startColumn:n.selection.startLineNumber-s.selection.startLineNumber);for(let n=0;n<t.length-1;n++){const s=t[n],r=t[n+1],o=s.selection,a=r.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||o.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(o.getEndPosition()):l=a.getStartPosition().isBefore(o.getEndPosition()),l){const c=s.index<r.index?n:n+1,h=s.index<r.index?n+1:n,u=t[h].index,d=t[c].index,f=t[h].selection,g=t[c].selection;if(!f.equalsSelection(g)){const p=f.plusRange(g),m=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,v=g.selectionStartLineNumber===g.startLineNumber&&g.selectionStartColumn===g.startColumn;let b;u===this.lastAddedCursorIndex?(b=m,this.lastAddedCursorIndex=d):b=v;let w;b?w=new Ve(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn):w=new Ve(p.endLineNumber,p.endColumn,p.startLineNumber,p.startColumn),t[c].selection=w;const y=Qe.fromModelSelection(w);e[d].setState(this.context,y.modelState,y.viewState)}for(const p of t)p.index>u&&p.index--;e.splice(u,1),t.splice(h,1),this._removeSecondaryCursor(u-1),n--}}}}class zTe{constructor(){this.type=0}}class HTe{constructor(){this.type=1}}class UTe{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class $Te{constructor(e,t){this.type=3,this.selections=e,this.modelSelections=t}}class zg{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}}class Fy{constructor(){this.type=5}}class jTe{constructor(e){this.type=6,this.isFocused=e}}class qTe{constructor(){this.type=7}}class By{constructor(){this.type=8}}class _X{constructor(e,t){this.type=9,this.fromLineNumber=e,this.toLineNumber=t}}class KM{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class ZM{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class eS{constructor(e,t,n,s,r,o){this.type=12,this.source=e,this.range=t,this.selections=n,this.verticalType=s,this.revealHorizontal=r,this.scrollType=o}}class GTe{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class KTe{constructor(){this.type=14}}class ZTe{constructor(e){this.type=15,this.ranges=e}}class YTe{constructor(){this.type=16}}let QTe=class{constructor(){this.type=17}};class XTe extends te{constructor(){super(),this._onEvent=this._register(new z),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++)if(this._outgoingEvents[t].kind===e.kind){this._outgoingEvents[t]=this._outgoingEvents[t].merge(e);return}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new JTe),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}}class JTe{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class nP{constructor(e,t,n,s){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=s,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}merge(e){return e.kind!==0?this:new nP(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class sP{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}merge(e){return e.kind!==1?this:new sP(this.oldHasFocus,e.hasFocus)}}class rP{constructor(e,t,n,s,r,o,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=s,this.scrollWidth=r,this.scrollLeft=o,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}merge(e){return e.kind!==2?this:new rP(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class $V{constructor(){this.kind=3}isNoOp(){return!1}merge(e){return this}}class oD{constructor(e,t,n,s,r,o,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=s,this.source=r,this.reason=o,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length,s=t.length;if(n!==s)return!1;for(let r=0;r<n;r++)if(!e[r].equalsSelection(t[r]))return!1;return!0}isNoOp(){return oD._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}merge(e){return e.kind!==6?this:new oD(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class eNe{constructor(){this.kind=5}isNoOp(){return!1}merge(e){return this}}class yE{constructor(e,t){this.modelVersionId=e.getVersionId(),this.cursorState=t.getCursorStates()}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class jV{constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){let e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){let t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const s=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(s&&(t.push(s),s.startLineNumber!==s.endLineNumber))return!1}t.sort(F.compareRangesUsingStarts),e.sort(F.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}}class Pm extends te{constructor(e,t,n,s){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new LV(this._model,this._viewModel,this._coordinatesConverter,s),this._cursors=new UV(this.context),this._hasFocus=!1,this._isHandling=!1,this._isDoingComposition=!1,this._selectionsWhenCompositionStarted=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=at(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new LV(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){let e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,s){let r=!1;s!==null&&s.length>Pm.MAX_CURSOR_COUNT&&(s=s.slice(0,Pm.MAX_CURSOR_COUNT),r=!0);const o=new yE(this._model,this);return this._cursors.setStates(s),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,o,r)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,n,s){const r=this._cursors.getViewPositions();if(r.length>1){this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),0,n,s);return}else{const o=r[0],a=new F(o.lineNumber,o.column,o.lineNumber,o.column);this._emitCursorRevealRange(e,t,a,null,0,n,s)}}_revealPrimaryCursor(e,t,n,s,r){const o=this._cursors.getViewPositions();if(o.length>1)this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),n,s,r);else{const a=o[0],l=new F(a.lineNumber,a.column,a.lineNumber,a.column);this._emitCursorRevealRange(e,t,l,null,n,s,r)}}_emitCursorRevealRange(e,t,n,s,r,o,a){e.emitViewEvent(new eS(t,n,s,r,o,a))}saveState(){let e=[];const t=this._cursors.getSelections();for(let n=0,s=t.length;n<s;n++){const r=t[n];e.push({inSelectionMode:!r.isEmpty(),selectionStart:{lineNumber:r.selectionStartLineNumber,column:r.selectionStartColumn},position:{lineNumber:r.positionLineNumber,column:r.positionColumn}})}return e}restoreState(e,t){let n=[];for(let s=0,r=t.length;s<r;s++){const o=t[s];let a=1,l=1;o.position&&o.position.lineNumber&&(a=o.position.lineNumber),o.position&&o.position.column&&(l=o.position.column);let c=a,h=l;o.selectionStart&&o.selectionStart.lineNumber&&(c=o.selectionStart.lineNumber),o.selectionStart&&o.selectionStart.column&&(h=o.selectionStart.column),n.push({selectionStartLineNumber:c,selectionStartColumn:h,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,Qe.fromModelSelections(n)),this.revealPrimary(e,"restoreState",!0,1)}onModelContentChanged(e,t){if(t instanceof LQ){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{if(this._knownModelVersionId=t.versionId,this._isHandling)return;const n=t.containsEvent(1);if(this._prevEditOperationType=0,n)this._cursors.dispose(),this._cursors=new UV(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&t.resultingSelection&&t.resultingSelection.length>0){const s=Qe.fromModelSelections(t.resultingSelection);this.setStates(e,"modelChange",t.isUndoing?5:t.isRedoing?6:2,s)&&this._revealPrimaryCursor(e,"modelChange",0,!0,0)}else{const s=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Qe.fromModelSelections(s))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:At.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:At.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,s){this.setStates(e,t,s,Qe.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){let n=[],s=[];for(let a=0,l=e.length;a<l;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),s.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const r=this._model.deltaDecorations([],n),o=this._model.deltaDecorations([],s);this._autoClosedActions.push(new jV(this._model,r,o))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=tNe.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);let n=[],s=[];for(let r=0;r<e.commands.length;r++){const o=e.commands[r];o instanceof hX&&o.enclosingRange&&o.closeCharacterRange&&(n.push(o.closeCharacterRange),s.push(o.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,s),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,s,r){const o=new yE(this._model,this);if(o.equals(s))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new $Te(l,a)),!s||s.cursorState.length!==o.cursorState.length||o.cursorState.some((c,h)=>!c.modelState.equals(s.cursorState[h].modelState))){const c=s?s.cursorState.map(u=>u.modelState.selection):null,h=s?s.modelVersionId:0;e.emitOutgoingEvent(new oD(c,a,h,o.modelVersionId,t||"keyboard",n,r))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;let t=[];for(let n=0,s=e.length;n<s;n++){const r=e[n];if(!r.text||r.text.indexOf(`
`)>=0)return null;const o=r.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;const a=o[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,h=r.text.length-o[2].length-1,u=r.text.lastIndexOf(c,h-1);if(u===-1)return null;t.push([u,h])}return t}executeEdits(e,t,n,s){let r=null;t==="snippet"&&(r=this._findAutoClosingPairs(n)),r&&(n[0]._isTracked=!0);let o=[],a=[];const l=this._model.pushEditOperations(this.getSelections(),n,c=>{if(r)for(let u=0,d=r.length;u<d;u++){const[f,g]=r[u],p=c[u],m=p.range.startLineNumber,v=p.range.startColumn-1+f,b=p.range.startColumn-1+g;o.push(new F(m,b+1,m,b+2)),a.push(new F(m,v+1,m,b+2))}const h=s(c);return h&&(this._isHandling=!0),h});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),o.length>0&&this._pushAutoClosedAction(o,a)}_executeEdit(e,t,n,s=0){if(this.context.cursorConfig.readOnly)return;const r=new yE(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(o){Ke(o)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,s,r,!1)&&this._revealPrimaryCursor(t,n,0,!0,0)}setIsDoingComposition(e){this._isDoingComposition=e}getAutoClosedCharacters(){return jV.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._selectionsWhenCompositionStarted=this.getSelections().slice(0)}endComposition(e,t){this._executeEdit(()=>{t==="keyboard"&&(this._executeEditOperation(_i.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this._selectionsWhenCompositionStarted,this.getSelections(),this.getAutoClosedCharacters())),this._selectionsWhenCompositionStarted=null)},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){const s=t.length;let r=0;for(;r<s;){const o=mx(t,r),a=t.substr(r,o);this._executeEditOperation(_i.typeWithInterceptors(this._isDoingComposition,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),r+=o}}else this._executeEditOperation(_i.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,s,r,o){if(t.length===0&&n===0&&s===0){if(r!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new Ve(c.lineNumber,c.column+r,c.lineNumber,c.column+r)});this.setSelections(e,o,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(_i.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,s,r))},e,o)}paste(e,t,n,s,r){this._executeEdit(()=>{this._executeEditOperation(_i.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,s||[]))},e,r,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(If.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Hs(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new Hs(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}}Pm.MAX_CURSOR_COUNT=1e4;class tNe{static executeCommands(e,t,n){const s={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},r=this._innerExecuteCommands(s,n);for(let o=0,a=s.trackedRanges.length;o<a;o++)s.model._setTrackedRange(s.trackedRanges[o],null,0);return r}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(n.operations.length===0)return null;const s=n.operations,r=this._getLoserCursorMap(s);if(r.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;let o=[];for(let c=0,h=s.length;c<h;c++)r.hasOwnProperty(s[c].identifier.major.toString())||o.push(s[c]);n.hadTrackedEditOperation&&o.length>0&&(o[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,o,c=>{let h=[];for(let f=0;f<e.selectionsBefore.length;f++)h[f]=[];for(const f of c)f.identifier&&h[f.identifier.major].push(f);const u=(f,g)=>f.identifier.minor-g.identifier.minor;let d=[];for(let f=0;f<e.selectionsBefore.length;f++)h[f].length>0?(h[f].sort(u),d[f]=t[f].computeCursorState(e.model,{getInverseEditOperations:()=>h[f],getTrackedSelection:g=>{const p=parseInt(g,10),m=e.model._getTrackedRange(e.trackedRanges[p]);return e.trackedRangesDirection[p]===0?new Ve(m.startLineNumber,m.startColumn,m.endLineNumber,m.endColumn):new Ve(m.endLineNumber,m.endColumn,m.startLineNumber,m.startColumn)}})):d[f]=e.selectionsBefore[f];return d});a||(a=e.selectionsBefore);let l=[];for(let c in r)r.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,h)=>h-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],s=!1;for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a){const l=this._getEditOperationsFromCommand(e,r,a);n=n.concat(l.operations),s=s||l.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:s}}static _getEditOperationsFromCommand(e,t,n){let s=[],r=0;const o=(u,d,f=!1)=>{F.isEmpty(u)&&d===""||s.push({identifier:{major:t,minor:r++},range:u,text:d,forceMoveMarkers:f,isAutoWhitespaceEdit:n.insertsAutoWhitespace})};let a=!1;const h={addEditOperation:o,addTrackedEditOperation:(u,d,f)=>{a=!0,o(u,d,f)},trackSelection:(u,d)=>{const f=Ve.liftSelection(u);let g;if(f.isEmpty())if(typeof d=="boolean")d?g=2:g=3;else{const v=e.model.getLineMaxColumn(f.startLineNumber);f.startColumn===v?g=2:g=3}else g=1;const p=e.trackedRanges.length,m=e.model._setTrackedRange(null,f,g);return e.trackedRanges[p]=m,e.trackedRangesDirection[p]=f.getDirection(),p.toString()}};try{n.getEditOperations(e.model,h)}catch(u){return Ke(u),{operations:[],hadTrackedEditOperation:!1}}return{operations:s,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,s)=>-F.compareRangesUsingEnds(n.range,s.range));let t={};for(let n=1;n<e.length;n++){const s=e[n-1],r=e[n];if(F.getStartPosition(s.range).isBefore(F.getEndPosition(r.range))){let o;s.identifier.major>r.identifier.major?o=s.identifier.major:o=r.identifier.major,t[o.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===o&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}}class bX{constructor(e,t,n,s,r,o){this.id=e,this.label=t,this.alias=n,this._precondition=s,this._run=r,this._contextKeyService=o}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}}const qV={getInitialState:()=>jL,tokenize2:(i,e,t,n)=>mY(0,i,t,n)};function vX(i,e,t=qV){return nNe(i,e,t||qV)}function iNe(i,e,t,n,s,r,o){let a="<div>",l=n,c=0,h=!0;for(let u=0,d=e.getCount();u<d;u++){const f=e.getEndOffset(u);if(f<=n)continue;let g="";for(;l<f&&l<s;l++){const p=i.charCodeAt(l);switch(p){case 9:let m=r-(l+c)%r;for(c+=m-1;m>0;)o&&h?(g+="&#160;",h=!1):(g+=" ",h=!0),m--;break;case 60:g+="&lt;",h=!1;break;case 62:g+="&gt;",h=!1;break;case 38:g+="&amp;",h=!1;break;case 0:g+="&#00;",h=!1;break;case 65279:case 8232:case 8233:case 133:g+="�",h=!1;break;case 13:g+="&#8203",h=!1;break;case 32:o&&h?(g+="&#160;",h=!1):(g+=" ",h=!0);break;default:g+=String.fromCharCode(p),h=!1}}if(a+=`<span style="${e.getInlineStyle(u,t)}">${g}</span>`,f>s||l>=s)break}return a+="</div>",a}function nNe(i,e,t){let n='<div class="monaco-tokenized-source">';const s=El(i);let r=t.getInitialState();for(let o=0,a=s.length;o<a;o++){const l=s[o];o>0&&(n+="<br/>");const c=t.tokenize2(l,!0,r,0);bn.convertToEndOffset(c.tokens,l.length);const u=new bn(c.tokens,l,e).inflate();let d=0;for(let f=0,g=u.getCount();f<g;f++){const p=u.getClassName(f),m=u.getEndOffset(f);n+=`<span class="${p}">${XO(l.substring(d,m))}</span>`,d=m}r=c.endState}return n+="</div>",n}class sNe{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,s=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,s)}}class rNe{constructor(e,t,n,s,r){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=s,this.minWidth=r,this.prefixSum=0}}class Xv{constructor(e,t,n,s){this._instanceId=JZ(++Xv.INSTANCE_COUNT),this._pendingChanges=new sNe,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=s}static findInsertionIndex(e,t,n){let s=0,r=e.length;for(;s<r;){const o=s+r>>>1;t===e[o].afterLineNumber?n<e[o].ordinal?r=o:s=o+1:t<e[o].afterLineNumber?r=o:s=o+1}return s}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(s,r,o,a)=>{t=!0,s=s|0,r=r|0,o=o|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new rNe(l,s,r,o,a)),l},changeOneWhitespace:(s,r,o)=>{t=!0,r=r|0,o=o|0,this._pendingChanges.change({id:s,newAfterLineNumber:r,newHeight:o})},removeWhitespace:s=>{t=!0,this._pendingChanges.remove({id:s})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of n){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const s=new Set;for(const l of n)s.add(l.id);const r=new Map;for(const l of t)r.set(l.id,l);const o=l=>{let c=[];for(const h of l)if(!s.has(h.id)){if(r.has(h.id)){const u=r.get(h.id);h.afterLineNumber=u.newAfterLineNumber,h.height=u.newHeight}c.push(h)}return c},a=o(this._arr).concat(o(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=Xv.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,s=t.length;n<s;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const s=this._findWhitespaceIndex(e);if(s!==-1&&(this._arr[s].height!==n&&(this._arr[s].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,s-1)),this._arr[s].afterLineNumber!==t)){const r=this._arr[s];this._removeWhitespace(s),r.afterLineNumber=t,this._insertWhitespace(r)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,s=this._arr.length;n<s;n++){const r=this._arr[n].afterLineNumber;e<=r&&r<=t?this._arr[n].afterLineNumber=e-1:r>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,s=this._arr.length;n<s;n++){const r=this._arr[n].afterLineNumber;e<=r&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let n=0,s=t.length-1;for(;n<=s;){const o=(s-n|0)/2|0,a=n+o|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else s=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const n=this._findLastWhitespaceBeforeLineNumber(e)+1;return n<this._arr.length?n:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e){this._checkPendingChanges(),e=e|0;let t;e>1?t=this._lineHeight*(e-1):t=0;const n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e);return t+n+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,n=this._lineHeight;let s=1,r=t;for(;s<r;){const o=(s+r)/2|0,a=this.getVerticalOffsetForLineNumber(o)|0;if(e>=a+n)s=o+1;else{if(e>=a)return o;r=o}}return s>t?t:s}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this._lineHeight,s=this.getLineNumberAtOrAfterVerticalOffset(e)|0,r=this.getVerticalOffsetForLineNumber(s)|0;let o=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(s)|0;const l=this.getWhitespacesCount()|0;let c,h;a===-1?(a=l,h=o+1,c=0):(h=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let u=r,d=u;const f=5e5;let g=0;r>=f&&(g=Math.floor(r/f)*f,g=Math.floor(g/n)*n,d-=g);const p=[],m=e+(t-e)/2;let v=-1;for(let x=s;x<=o;x++){if(v===-1){const k=u,S=u+n;(k<=m&&m<S||k>m)&&(v=x)}for(u+=n,p[x-s]=d,d+=n;h===x;)d+=c,u+=c,a++,a>=l?h=o+1:(h=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(u>=t){o=x;break}}v===-1&&(v=o);const b=this.getVerticalOffsetForLineNumber(o)|0;let w=s,y=o;return w<y&&r<e&&w++,w<y&&b+n>t&&y--,{bigNumbersDelta:g,startLineNumber:s,endLineNumber:o,relativeVerticalOffset:p,centeredLineNumber:v,completelyVisibleStartLineNumber:w,completelyVisibleEndLineNumber:y}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n;t>=1?n=this._lineHeight*t:n=0;let s;return e>0?s=this.getWhitespacesAccumulatedHeight(e-1):s=0,n+s+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;const s=this.getVerticalOffsetForWhitespaceIndex(n),r=this.getHeightForWhitespaceIndex(n);if(e>=s+r)return-1;for(;t<n;){const o=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(e>=a+l)t=o+1;else{if(e>=a)return o;n=o}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const s=this.getHeightForWhitespaceIndex(t),r=this.getIdForWhitespaceIndex(t),o=this.getAfterLineNumberForWhitespaceIndex(t);return{id:r,afterLineNumber:o,verticalOffset:n,height:s}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),s=this.getWhitespacesCount()-1;if(n<0)return[];let r=[];for(let o=n;o<=s;o++){const a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(a>=t)break;r.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:a,height:l})}return r}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}}Xv.INSTANCE_COUNT=0;const oNe=125;class R_{constructor(e,t,n,s){e=e|0,t=t|0,n=n|0,s=s|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),s<0&&(s=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=s,this.scrollHeight=Math.max(n,s)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class aNe extends te{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new z),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new R_(0,0,0,0),this._scrollable=this._register(new yk(e,t)),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,s=t.contentHeight!==e.contentHeight;(n||s)&&this._onDidContentSizeChange.fire(new nP(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}}class lNe extends te{constructor(e,t,n){super(),this._configuration=e;const s=this._configuration.options,r=s.get(129),o=s.get(74);this._linesLayout=new Xv(t,s.get(58),o.top,o.bottom),this._scrollable=this._register(new aNe(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new R_(r.contentWidth,0,r.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(102)?oNe:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(58)&&this._linesLayout.setLineHeight(t.get(58)),e.hasChanged(74)){const n=t.get(74);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(129)){const n=t.get(129),s=n.contentWidth,r=n.height,o=this._scrollable.getScrollDimensions(),a=o.contentWidth;this._scrollable.setScrollDimensions(new R_(s,o.contentWidth,r,this._getContentHeight(s,r,a)))}else this._updateHeight();e.hasChanged(102)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const s=this._configuration.options.get(91);return s.horizontal===2||e>=t?0:s.horizontalScrollbarSize}_getContentHeight(e,t,n){const s=this._configuration.options;let r=this._linesLayout.getLinesTotalHeight();return s.get(93)?r+=Math.max(0,t-s.get(58)-s.get(74).bottom):r+=this._getHorizontalScrollbarHeight(e,n),r}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,s=e.contentWidth;this._scrollable.setScrollDimensions(new R_(t,e.contentWidth,n,this._getContentHeight(t,n,s)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new I7(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new I7(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(e){const t=this._configuration.options,n=t.get(130),s=t.get(43);if(n.isViewportWrapping){const r=t.get(129),o=t.get(64);return e>r.contentWidth+s.typicalHalfwidthCharacterWidth&&o.enabled&&o.side==="right"?e+r.verticalScrollbarWidth:e}else{const r=t.get(92)*s.typicalHalfwidthCharacterWidth,o=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+r,o)}}setMaxLineWidth(e){const t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new R_(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition();let t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),s=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-s,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e){return this._linesLayout.getVerticalOffsetForLineNumber(e)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}class cNe{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class hNe{constructor(e){this._counts=e,this._isValid=!1,this._validEndIndex=-1,this._modelToView=[],this._viewToModel=[]}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._counts.length;e<t;e++){const n=this._counts[e],s=e>0?this._modelToView[e-1]:0;this._modelToView[e]=s+n;for(let r=0;r<n;r++)this._viewToModel[s+r]=e}this._modelToView.length=this._counts.length,this._viewToModel.length=this._modelToView[this._modelToView.length-1],this._isValid=!0,this._validEndIndex=this._counts.length-1}}changeValue(e,t){this._counts[e]!==t&&(this._counts[e]=t,this._invalidate(e))}removeValues(e,t){this._counts.splice(e,t),this._invalidate(e)}insertValues(e,t){this._counts=Rv(this._counts,e,t),this._invalidate(e)}getTotalValue(){return this._ensureValid(),this._viewToModel.length}getAccumulatedValue(e){return this._ensureValid(),this._modelToView[e]}getIndexOf(e){this._ensureValid();const t=this._viewToModel[e],n=t>0?this._modelToView[t-1]:0;return new TY(t,e-n)}}class uNe{constructor(e,t,n,s,r,o,a,l,c){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=s,this.fontInfo=r,this.tabSize=o,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this._constructLines(!0,null)}dispose(){this.hiddenAreasIds=this.model.deltaDecorations(this.hiddenAreasIds,[])}createCoordinatesConverter(){return new cNe(this)}_constructLines(e,t){this.lines=[],e&&(this.hiddenAreasIds=[]);const n=this.model.getLinesContent(),s=this.model.getInjectedTextDecorations(this._editorId),r=n.length,o=this.createLineBreaksComputer(),a=new fb(xa.fromDecorations(s));for(let p=0;p<r;p++){const m=a.takeWhile(v=>v.lineNumber===p+1);o.addRequest(n[p],m,t?t[p]:null)}const l=o.finalize();let c=[],h=this.hiddenAreasIds.map(p=>this.model.getDecorationRange(p)).sort(F.compareRangesUsingStarts),u=1,d=0,f=-1,g=f+1<h.length?d+1:r+2;for(let p=0;p<r;p++){let m=p+1;m===g&&(f++,u=h[f].startLineNumber,d=h[f].endLineNumber,g=f+1<h.length?d+1:r+2);let v=m>=u&&m<=d,b=SE(l[p],!v);c[p]=b.getViewLineCount(),this.lines[p]=b}this._validModelVersionId=this.model.getVersionId(),this.prefixSumComputer=new hNe(c)}getHiddenAreas(){return this.hiddenAreasIds.map(e=>this.model.getDecorationRange(e))}_reduceRanges(e){if(e.length===0)return[];let t=e.map(o=>this.model.validateRange(o)).sort(F.compareRangesUsingStarts),n=[],s=t[0].startLineNumber,r=t[0].endLineNumber;for(let o=1,a=t.length;o<a;o++){let l=t[o];l.startLineNumber>r+1?(n.push(new F(s,1,r,1)),s=l.startLineNumber,r=l.endLineNumber):l.endLineNumber>r&&(r=l.endLineNumber)}return n.push(new F(s,1,r,1)),n}setHiddenAreas(e){let t=this._reduceRanges(e),n=this.hiddenAreasIds.map(u=>this.model.getDecorationRange(u)).sort(F.compareRangesUsingStarts);if(t.length===n.length){let u=!1;for(let d=0;d<t.length;d++)if(!t[d].equalsRange(n[d])){u=!0;break}if(!u)return!1}let s=[];for(const u of t)s.push({range:u,options:lt.EMPTY});this.hiddenAreasIds=this.model.deltaDecorations(this.hiddenAreasIds,s);let r=t,o=1,a=0,l=-1,c=l+1<r.length?a+1:this.lines.length+2,h=!1;for(let u=0;u<this.lines.length;u++){let d=u+1;d===c&&(l++,o=r[l].startLineNumber,a=r[l].endLineNumber,c=l+1<r.length?a+1:this.lines.length+2);let f=!1;if(d>=o&&d<=a?this.lines[u].isVisible()&&(this.lines[u]=this.lines[u].setVisible(!1),f=!0):(h=!0,this.lines[u].isVisible()||(this.lines[u]=this.lines[u].setVisible(!0),f=!0)),f){let g=this.lines[u].getViewLineCount();this.prefixSumComputer.changeValue(u,g)}}return h||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.lines.length?!1:this.lines[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.lines.length?1:this.lines[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,s){const r=this.fontInfo.equals(e),o=this.wrappingStrategy===t,a=this.wrappingColumn===n,l=this.wrappingIndent===s;if(r&&o&&a&&l)return!1;const c=r&&o&&!a&&l;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=s;let h=null;if(c){h=[];for(let u=0,d=this.lines.length;u<d;u++)h[u]=this.lines[u].getLineBreakData()}return this._constructLines(!1,h),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;let s=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,r=this.prefixSumComputer.getAccumulatedValue(n-1);return this.lines.splice(t-1,n-t+1),this.prefixSumComputer.removeValues(t-1,n-t+1),new KM(s,r)}onModelLinesInserted(e,t,n,s){if(!e||e<=this._validModelVersionId)return null;const r=t>2&&!this.lines[t-2].isVisible();let o=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,a=0,l=[],c=[];for(let h=0,u=s.length;h<u;h++){let d=SE(s[h],!r);l.push(d);let f=d.getViewLineCount();a+=f,c[h]=f}return this.lines=this.lines.slice(0,t-1).concat(l).concat(this.lines.slice(t-1)),this.prefixSumComputer.insertValues(t-1,c),new ZM(o,o+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];let s=t-1,r=this.lines[s].getViewLineCount(),o=this.lines[s].isVisible(),a=SE(n,o);this.lines[s]=a;let l=this.lines[s].getViewLineCount(),c=!1,h=0,u=-1,d=0,f=-1,g=0,p=-1;r>l?(h=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,u=h+l-1,g=u+1,p=g+(r-l)-1,c=!0):r<l?(h=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,u=h+r-1,d=u+1,f=d+(l-r)-1,c=!0):(h=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,u=h+l-1),this.prefixSumComputer.changeValue(s,l);const m=h<=u?new _X(h,u):null,v=d<=f?new ZM(d,f):null,b=g<=p?new KM(g,p):null;return[c,m,v,b]}acceptVersionId(e){this._validModelVersionId=e,this.lines.length===1&&!this.lines[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.prefixSumComputer.getTotalValue()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const s=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),o=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.getActiveIndentGuide(s.lineNumber,r.lineNumber,o.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,s=t.remainder;return new GV(n+1,s)}getMinColumnOfViewLine(e){return this.lines[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.lines[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new q(e.modelLineNumber,s)}getModelEndPositionOfViewLine(e){const t=this.lines[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new q(e.modelLineNumber,s)}getViewLineInfosGroupedByModelRanges(e,t){const n=this.getViewLineInfo(e),s=this.getViewLineInfo(t),r=new Array;let o=this.getModelStartPositionOfViewLine(n),a=new Array;for(let l=n.modelLineNumber;l<=s.modelLineNumber;l++){const c=this.lines[l-1];if(c.isVisible()){let h=l===n.modelLineNumber?n.modelLineWrappedLineIdx:0,u=l===s.modelLineNumber?s.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let d=h;d<u;d++)a.push(new GV(l,d))}if(!c.isVisible()&&o){const h=new q(l-1,this.model.getLineMaxColumn(l-1)+1),u=F.fromPositions(o,h);r.push(new KV(u,a)),a=[],o=null}else c.isVisible()&&!o&&(o=new q(l,1))}if(o){const l=F.fromPositions(o,this.getModelEndPositionOfViewLine(s));r.push(new KV(l,a))}return r}getViewLinesBracketGuides(e,t,n,s){const r=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,o=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.getLinesBracketGuides(l,a.modelRange.endLineNumber,r,s);for(const h of a.viewLines)if(h.isWrappedLineContinuation&&this.getMinColumnOfViewLine(h)===1)o.push([]);else{let u=c[h.modelLineNumber-l];u=u.map(d=>d.horizontalLine?new up(d.visibleColumn,d.className,new hM(d.horizontalLine.top,this.convertModelPositionToViewPosition(h.modelLineNumber,d.horizontalLine.endColumn).column)):d),o.push(u)}}return o}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let r=[],o=[],a=[];const l=n.lineNumber-1,c=s.lineNumber-1;let h=null;for(let g=l;g<=c;g++){const p=this.lines[g];if(p.isVisible()){let m=p.getViewLineNumberOfModelPosition(0,g===l?n.column:1),v=p.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(g+1)),b=v-m+1,w=0;b>1&&p.getViewLineMinColumn(this.model,g+1,v)===1&&(w=m===0?1:2),o.push(b),a.push(w),h===null&&(h=new q(g+1,0))}else h!==null&&(r=r.concat(this.model.getLinesIndentGuides(h.lineNumber,g)),h=null)}h!==null&&(r=r.concat(this.model.getLinesIndentGuides(h.lineNumber,s.lineNumber)),h=null);const u=t-e+1;let d=new Array(u),f=0;for(let g=0,p=r.length;g<p;g++){let m=r[g],v=Math.min(u-f,o[g]),b=a[g],w;b===2?w=0:b===1?w=1:w=v;for(let y=0;y<v;y++)y===w&&(m=0),d[f++]=m}return d}getViewLineContent(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,s=t.remainder;return this.lines[n].getViewLineContent(this.model,n+1,s)}getViewLineLength(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,s=t.remainder;return this.lines[n].getViewLineLength(this.model,n+1,s)}getViewLineMinColumn(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,s=t.remainder;return this.lines[n].getViewLineMinColumn(this.model,n+1,s)}getViewLineMaxColumn(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,s=t.remainder;return this.lines[n].getViewLineMaxColumn(this.model,n+1,s)}getViewLineData(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,s=t.remainder;return this.lines[n].getViewLineData(this.model,n+1,s)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let s=this.prefixSumComputer.getIndexOf(e-1),r=e,o=s.index,a=s.remainder,l=[];for(let c=o,h=this.model.getLineCount();c<h;c++){let u=this.lines[c];if(!u.isVisible())continue;let d=c===o?a:0,f=u.getViewLineCount()-d,g=!1;r+f>t&&(g=!0,f=t-r+1);let p=d+f;if(u.getViewLinesData(this.model,c+1,d,p,r-e,n,l),r+=f,g)break}return l}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);let s=this.prefixSumComputer.getIndexOf(e-1),r=s.index,o=s.remainder,a=this.lines[r],l=a.getViewLineMinColumn(this.model,r+1,o),c=a.getViewLineMaxColumn(this.model,r+1,o);t<l&&(t=l),t>c&&(t=c);let h=a.getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new q(r+1,h)).equals(n)?new q(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),s=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new F(n.lineNumber,n.column,s.lineNumber,s.column)}convertViewPositionToModelPosition(e,t){e=this._toValidViewLineNumber(e);let n=this.prefixSumComputer.getIndexOf(e-1),s=n.index,r=n.remainder,o=this.lines[s].getModelColumnOfViewPosition(r,t);return this.model.validatePosition(new q(s+1,o))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new F(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=2){const s=this.model.validatePosition(new q(e,t)),r=s.lineNumber,o=s.column;let a=r-1,l=!1;for(;a>0&&!this.lines[a].isVisible();)a--,l=!0;if(a===0&&!this.lines[a].isVisible())return new q(1,1);const c=1+(a===0?0:this.prefixSumComputer.getAccumulatedValue(a-1));let h;return l?h=this.lines[a].getViewPositionOfModelPosition(c,this.model.getLineMaxColumn(a+1),n):h=this.lines[r-1].getViewPositionOfModelPosition(c,o,n),h}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return F.fromPositions(n)}else{const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),s=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new F(n.lineNumber,n.column,s.lineNumber,s.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.lines[n].isVisible()){const r=1+(n===0?0:this.prefixSumComputer.getAccumulatedValue(n-1));return this.lines[n].getViewLineNumberOfModelPosition(r,t)}for(;n>0&&!this.lines[n].isVisible();)n--;if(n===0&&!this.lines[n].isVisible())return 1;const s=1+(n===0?0:this.prefixSumComputer.getAccumulatedValue(n-1));return this.lines[n].getViewLineNumberOfModelPosition(s,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n){const s=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),r=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(r.lineNumber-s.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new F(s.lineNumber,1,r.lineNumber,r.column),t,n);let o=[];const a=s.lineNumber-1,l=r.lineNumber-1;let c=null;for(let f=a;f<=l;f++)if(this.lines[f].isVisible())c===null&&(c=new q(f+1,f===a?s.column:1));else if(c!==null){const p=this.model.getLineMaxColumn(f);o=o.concat(this.model.getDecorationsInRange(new F(c.lineNumber,c.column,f,p),t,n)),c=null}c!==null&&(o=o.concat(this.model.getDecorationsInRange(new F(c.lineNumber,c.column,r.lineNumber,r.column),t,n)),c=null),o.sort((f,g)=>{const p=F.compareRangesUsingStarts(f.range,g.range);return p===0?f.id<g.id?-1:f.id>g.id?1:0:p});let h=[],u=0,d=null;for(const f of o){const g=f.id;d!==g&&(d=g,h[u++]=f)}return h}getInjectedTextAt(e){const t=this._toValidViewLineNumber(e.lineNumber),n=this.prefixSumComputer.getIndexOf(t-1),s=n.index,r=n.remainder;return this.lines[s].getInjectedTextAt(r,e.column)}normalizePosition(e,t){const n=this._toValidViewLineNumber(e.lineNumber),s=this.prefixSumComputer.getIndexOf(n-1),r=s.index,o=s.remainder;return this.lines[r].normalizePosition(this.model,r+1,o,e,t)}getLineIndentColumn(e){const t=this._toValidViewLineNumber(e),n=this.prefixSumComputer.getIndexOf(t-1),s=n.index;return n.remainder===0?this.model.getLineIndentColumn(s+1):0}}class GV{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}get isWrappedLineContinuation(){return this.modelLineWrappedLineIdx>0}}class KV{constructor(e,t){this.modelRange=e,this.viewLines=t}}class aD{constructor(){}isVisible(){return!0}setVisible(e){return e?this:lD.INSTANCE}getLineBreakData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){let s=e.getLineTokens(t),r=s.getLineContent();return new v5(r,!1,1,r.length+1,0,s.inflate(),null)}getViewLinesData(e,t,n,s,r,o,a){if(!o[r]){a[r]=null;return}a[r]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new q(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n,s,r){return s}getInjectedTextAt(e,t){return null}}aD.INSTANCE=new aD;class lD{constructor(){}isVisible(){return!1}setVisible(e){return e?aD.INSTANCE:this}getLineBreakData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,s,r,o,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n,s,r){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}lD.INSTANCE=new lD;class dNe{constructor(e,t){this._lineBreakData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getLineBreakData(){return this._lineBreakData}getViewLineCount(){return this._isVisible?this._lineBreakData.breakOffsets.length:0}getInputStartOffsetOfOutputLineIndex(e){return this._lineBreakData.getInputOffsetOfOutputPosition(e,0)}getInputEndOffsetOfOutputLineIndex(e,t,n){return n+1===this._lineBreakData.breakOffsets.length?e.getLineMaxColumn(t)-1:this._lineBreakData.getInputOffsetOfOutputPosition(n+1,0)}getViewLineContent(e,t,n){if(!this._isVisible)throw new Error("Not supported");const s=n>0?this._lineBreakData.breakOffsets[n-1]:0,r=n<this._lineBreakData.breakOffsets.length?this._lineBreakData.breakOffsets[n]:this._lineBreakData.breakOffsets[this._lineBreakData.breakOffsets.length-1];let o;if(this._lineBreakData.injectionOffsets!==null){const a=this._lineBreakData.injectionOffsets.map((l,c)=>new xa(0,0,l+1,this._lineBreakData.injectionOptions[c],0));o=xa.applyInjectedText(e.getLineContent(t),a).substring(s,r)}else o=e.getValueInRange({startLineNumber:t,startColumn:s+1,endLineNumber:t,endColumn:r+1});return n>0&&(o=ZV(this._lineBreakData.wrappedTextIndentLength)+o),o}getViewLineLength(e,t,n){if(!this._isVisible)throw new Error("Not supported");const s=n>0?this._lineBreakData.breakOffsets[n-1]:0;let o=(n<this._lineBreakData.breakOffsets.length?this._lineBreakData.breakOffsets[n]:this._lineBreakData.breakOffsets[this._lineBreakData.breakOffsets.length-1])-s;return n>0&&(o=this._lineBreakData.wrappedTextIndentLength+o),o}getViewLineMinColumn(e,t,n){if(!this._isVisible)throw new Error("Not supported");return this._getViewLineMinColumn(n)}_getViewLineMinColumn(e){return e>0?this._lineBreakData.wrappedTextIndentLength+1:1}getViewLineMaxColumn(e,t,n){if(!this._isVisible)throw new Error("Not supported");return this.getViewLineLength(e,t,n)+1}getViewLineData(e,t,n){if(!this._isVisible)throw new Error("Not supported");const s=this._lineBreakData,r=n>0?s.wrappedTextIndentLength:0,o=s.injectionOffsets,a=s.injectionOptions;let l,c,h;if(o){const p=e.getLineTokens(t).withInserted(o.map((w,y)=>({offset:w,text:a[y].content,tokenMetadata:bn.defaultTokenMetadata}))),m=n>0?s.breakOffsets[n-1]:0,v=s.breakOffsets[n];l=p.getLineContent().substring(m,v),c=p.sliceAndInflate(m,v,r),h=new Array;let b=0;for(let w=0;w<o.length;w++){const y=a[w].content.length,x=o[w]+b,k=o[w]+b+y;if(x>v)break;if(m<k){const S=a[w];if(S.inlineClassName){const L=n>0?s.wrappedTextIndentLength:0,D=L+Math.max(x-m,0),N=L+Math.min(k-m,v);D!==N&&h.push(new DLe(D,N,S.inlineClassName,S.inlineClassNameAffectsLetterSpacing))}}b+=y}}else{const p=this.getInputStartOffsetOfOutputLineIndex(n),m=this.getInputEndOffsetOfOutputLineIndex(e,t,n),v=e.getLineTokens(t);l=e.getValueInRange({startLineNumber:t,startColumn:p+1,endLineNumber:t,endColumn:m+1}),c=v.sliceAndInflate(p,m,r),h=null}n>0&&(l=ZV(s.wrappedTextIndentLength)+l);const u=n>0?s.wrappedTextIndentLength+1:1,d=l.length+1,f=n+1<this.getViewLineCount(),g=n===0?0:s.breakOffsetsVisibleColumn[n-1];return new v5(l,f,u,d,g,c,h)}getViewLinesData(e,t,n,s,r,o,a){if(!this._isVisible)throw new Error("Not supported");for(let l=n;l<s;l++){let c=r+l-n;if(!o[c]){a[c]=null;continue}a[c]=this.getViewLineData(e,t,l)}}getModelColumnOfViewPosition(e,t){if(!this._isVisible)throw new Error("Not supported");let n=t-1;return e>0&&(n<this._lineBreakData.wrappedTextIndentLength?n=0:n-=this._lineBreakData.wrappedTextIndentLength),this._lineBreakData.getInputOffsetOfOutputPosition(e,n)+1}getViewPositionOfModelPosition(e,t,n=2){if(!this._isVisible)throw new Error("Not supported");let s=this._lineBreakData.getOutputPositionOfInputOffset(t-1,n),r=s.outputLineIndex,o=s.outputOffset+1;return r>0&&(o+=this._lineBreakData.wrappedTextIndentLength),new q(e+r,o)}getViewLineNumberOfModelPosition(e,t){if(!this._isVisible)throw new Error("Not supported");const n=this._lineBreakData.getOutputPositionOfInputOffset(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n,s,r){if(this._lineBreakData.injectionOffsets!==null){const o=s.lineNumber-n,a=this._lineBreakData.outputPositionToOffsetInUnwrappedLine(n,s.column-1),l=this._lineBreakData.normalizeOffsetAroundInjections(a,r);if(l!==a)return this._lineBreakData.getOutputPositionOfOffsetInUnwrappedLine(l,r).toPosition(o,this._lineBreakData.wrappedTextIndentLength)}if(r===0){if(n>0&&s.column===this._getViewLineMinColumn(n))return new q(s.lineNumber-1,this.getViewLineMaxColumn(e,t,n-1))}else if(r===1){const o=this.getViewLineCount()-1;if(n<o&&s.column===this.getViewLineMaxColumn(e,t,n))return new q(s.lineNumber+1,this._getViewLineMinColumn(n+1))}return s}getInjectedTextAt(e,t){return this._lineBreakData.getInjectedText(e,t-1)}}let CE=[""];function ZV(i){if(i>=CE.length)for(let e=1;e<=i;e++)CE[e]=fNe(e);return CE[i]}function fNe(i){return new Array(i+1).join(" ")}function SE(i,e){return i===null?e?aD.INSTANCE:lD.INSTANCE:new dNe(i,e)}class gNe{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}class pNe{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new gNe(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,s){return!1}createLineBreaksComputer(){let e=[];return{addRequest:(t,n,s)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new KM(t,n)}onModelLinesInserted(e,t,n,s){return new ZM(t,n)}onModelLineChanged(e,t,n){return[!1,new _X(t,t),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const n=t-e+1;let s=new Array(n);for(let r=0;r<n;r++)s[r]=0;return s}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){let t=this.model.getLineTokens(e),n=t.getLineContent();return new v5(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){const s=this.model.getLineCount();e=Math.min(Math.max(1,e),s),t=Math.min(Math.max(1,t),s);let r=[];for(let o=e;o<=t;o++){let a=o-e;n[a]||(r[a]=null),r[a]=this.getViewLineData(o)}return r}getDecorationsInRange(e,t,n){return this.model.getDecorationsInRange(e,t,n)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class mNe{constructor(e,t,n,s,r){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=s,this._coordinatesConverter=r,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const s=e.range,r=e.options;let o;if(r.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new q(s.startLineNumber,1),0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new q(s.endLineNumber,this.model.getLineMaxColumn(s.endLineNumber)),1);o=new F(a.lineNumber,a.column,l.lineNumber,l.column)}else o=this._coordinatesConverter.convertModelRangeToViewRange(s,1);n=new zY(o,r),this._decorationsCache[t]=n}return n}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsViewportData(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}_getDecorationsViewportData(e){const t=this._linesCollection.getDecorationsInRange(e,this.editorId,WO(this.configuration.options)),n=e.startLineNumber,s=e.endLineNumber;let r=[],o=0,a=[];for(let l=n;l<=s;l++)a[l-n]=[];for(let l=0,c=t.length;l<c;l++){let h=t[l],u=h.options,d=this._getOrCreateViewModelDecoration(h),f=d.range;if(r[o++]=d,u.inlineClassName){let g=new pb(f,u.inlineClassName,u.inlineClassNameAffectsLetterSpacing?3:0),p=Math.max(n,f.startLineNumber),m=Math.min(s,f.endLineNumber);for(let v=p;v<=m;v++)a[v-n].push(g)}if(u.beforeContentClassName&&n<=f.startLineNumber&&f.startLineNumber<=s){let g=new pb(new F(f.startLineNumber,f.startColumn,f.startLineNumber,f.startColumn),u.beforeContentClassName,1);a[f.startLineNumber-n].push(g)}if(u.afterContentClassName&&n<=f.endLineNumber&&f.endLineNumber<=s){let g=new pb(new F(f.endLineNumber,f.endColumn,f.endLineNumber,f.endColumn),u.afterContentClassName,2);a[f.endLineNumber-n].push(g)}}return{decorations:r,inlineDecorations:a}}}const _Ne={ModesRegistry:"editor.modesRegistry"};class bNe{constructor(){this._onDidChangeLanguages=new z,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[],this._dynamicLanguages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return[].concat(this._languages).concat(this._dynamicLanguages)}}const Zd=new bNe;kn.add(_Ne.ModesRegistry,Zd);const N0="plaintext",vNe=".txt";Zd.registerLanguage({id:N0,extensions:[vNe],aliases:[_("plainText.alias","Plain Text"),"text"],mimetypes:[mo.text]});Ii.register(N0,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0);class wNe extends te{constructor(e,t,n,s,r,o){if(super(),this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new XTe,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new go(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._tokenizeViewportSoon=this._register(new fi(()=>this.tokenizeViewport(),50)),this._updateConfigurationViewLineCount=this._register(new fi(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStartLine=-1,this._viewportStartLineTrackedRange=null,this._viewportStartLineDelta=0,this.model.isTooLargeForTokenization())this._lines=new pNe(this.model);else{const a=this._configuration.options,l=a.get(43),c=a.get(123),h=a.get(130),u=a.get(122);this._lines=new uNe(this._editorId,this.model,s,r,l,this.model.getOptions().tabSize,c,h.wrappingColumn,u)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new Pm(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new lNe(this._configuration,this.getLineCount(),o)),this._register(this.viewLayout.onDidScroll(a=>{a.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitSingleViewEvent(new GTe(a)),this._eventDispatcher.emitOutgoingEvent(new rP(a.oldScrollWidth,a.oldScrollLeft,a.oldScrollHeight,a.oldScrollTop,a.scrollWidth,a.scrollLeft,a.scrollHeight,a.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(a=>{this._eventDispatcher.emitOutgoingEvent(a)})),this._decorations=new mNe(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(a=>{try{const l=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(l,a)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(kw.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new YTe)})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this.invalidateMinimapColorCache(),this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,null,1),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){const e=this.viewLayout.getLinesViewportData(),t=new F(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber)),n=this._toModelVisibleRanges(t);for(const s of n)this.model.tokenizeViewport(s.startLineNumber,s.endLineNumber)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new jTe(e)),this._eventDispatcher.emitOutgoingEvent(new sP(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new zTe)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new HTe)}onDidColorThemeChange(){this._eventDispatcher.emitSingleViewEvent(new KTe)}_onConfigurationChanged(e,t){let n=null;if(this._viewportStartLine!==-1){let h=new q(this._viewportStartLine,this.getLineMinColumn(this._viewportStartLine));n=this.coordinatesConverter.convertViewPositionToModelPosition(h)}let s=!1;const r=this._configuration.options,o=r.get(43),a=r.get(123),l=r.get(130),c=r.get(122);if(this._lines.setWrappingSettings(o,a,l.wrappingColumn,c)&&(e.emitViewEvent(new Fy),e.emitViewEvent(new By),e.emitViewEvent(new zg(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.getCurrentScrollTop()!==0&&(s=!0),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(80)&&(this._decorations.reset(),e.emitViewEvent(new zg(null))),e.emitViewEvent(new UTe(t)),this.viewLayout.onConfigurationChanged(t),s&&n){const h=this.coordinatesConverter.convertModelPositionToViewPosition(n),u=this.viewLayout.getVerticalOffsetForLineNumber(h.lineNumber);this.viewLayout.setScrollPosition({scrollTop:u+this._viewportStartLineDelta},1)}go.shouldRecreate(t)&&(this.cursorConfig=new go(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const t=this._eventDispatcher.beginEmitViewEvents();let n=!1,s=!1;const r=e.changes,o=e instanceof Ud?e.versionId:null,a=this._lines.createLineBreaksComputer();for(const h of r)switch(h.changeType){case 4:{for(let u=0;u<h.detail.length;u++){const d=h.detail[u];let f=h.injectedTexts[u];f&&(f=f.filter(g=>!g.ownerId||g.ownerId===this._editorId)),a.addRequest(d,f,null)}break}case 2:{let u=null;h.injectedText&&(u=h.injectedText.filter(d=>!d.ownerId||d.ownerId===this._editorId)),a.addRequest(h.detail,u,null);break}}const l=a.finalize();let c=0;for(const h of r)switch(h.changeType){case 1:{this._lines.onModelFlushed(),t.emitViewEvent(new Fy),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),n=!0;break}case 3:{const u=this._lines.onModelLinesDeleted(o,h.fromLineNumber,h.toLineNumber);u!==null&&(t.emitViewEvent(u),this.viewLayout.onLinesDeleted(u.fromLineNumber,u.toLineNumber)),n=!0;break}case 4:{const u=l.slice(c,c+h.detail.length);c+=h.detail.length;const d=this._lines.onModelLinesInserted(o,h.fromLineNumber,h.toLineNumber,u);d!==null&&(t.emitViewEvent(d),this.viewLayout.onLinesInserted(d.fromLineNumber,d.toLineNumber)),n=!0;break}case 2:{const u=l[c];c++;const[d,f,g,p]=this._lines.onModelLineChanged(o,h.lineNumber,u);s=d,f&&t.emitViewEvent(f),g&&(t.emitViewEvent(g),this.viewLayout.onLinesInserted(g.fromLineNumber,g.toLineNumber)),p&&(t.emitViewEvent(p),this.viewLayout.onLinesDeleted(p.fromLineNumber,p.toLineNumber));break}case 5:break}o!==null&&this._lines.acceptVersionId(o),this.viewLayout.onHeightMaybeChanged(),!n&&s&&(t.emitViewEvent(new By),t.emitViewEvent(new zg(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}if(this._viewportStartLine=-1,this._configuration.setMaxLineNumber(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&this._viewportStartLineTrackedRange){const t=this.model._getTrackedRange(this._viewportStartLineTrackedRange);if(t){const n=this.coordinatesConverter.convertModelPositionToViewPosition(t.getStartPosition()),s=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber);this.viewLayout.setScrollPosition({scrollTop:s+this._viewportStartLineDelta},1)}}try{const t=this._eventDispatcher.beginEmitViewEvents();this._cursor.onModelContentChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(this.model.onDidChangeTokens(e=>{let t=[];for(let n=0,s=e.ranges.length;n<s;n++){const r=e.ranges[n],o=this.coordinatesConverter.convertModelPositionToViewPosition(new q(r.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new q(r.toLineNumber,this.model.getLineMaxColumn(r.toLineNumber))).lineNumber;t[n]={fromLineNumber:o,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new ZTe(t)),e.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new qTe),this.cursorConfig=new go(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new go(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new Fy),t.emitViewEvent(new By),t.emitViewEvent(new zg(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new go(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new zg(e))}))}setHiddenAreas(e){let t=!1;try{const n=this._eventDispatcher.beginEmitViewEvents();t=this._lines.setHiddenAreas(e),t&&(n.emitViewEvent(new Fy),n.emitViewEvent(new By),n.emitViewEvent(new zg(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),t&&this._eventDispatcher.emitOutgoingEvent(new $V)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(129),t=this._configuration.options.get(58),n=Math.max(20,Math.round(e.height/t)),s=this.viewLayout.getLinesViewportData(),r=Math.max(1,s.completelyVisibleStartLineNumber-n),o=Math.min(this.getLineCount(),s.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new F(r,this.getLineMinColumn(r),o,this.getLineMaxColumn(o)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];let s=[],r=0,o=t.startLineNumber,a=t.startColumn,l=t.endLineNumber,c=t.endColumn;for(let h=0,u=n.length;h<u;h++){const d=n[h].startLineNumber,f=n[h].endLineNumber;f<o||d>l||(o<d&&(s[r++]=new F(o,a,d-1,this.model.getLineMaxColumn(d-1))),o=f+1,a=1)}return(o<l||o===l&&a<c)&&(s[r++]=new F(o,a,l,c)),s}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new F(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,s=t.completelyVisibleEndLineNumber;return new F(n,this.getLineMinColumn(n),s,this.getLineMaxColumn(s))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),s=this.coordinatesConverter.convertViewPositionToModelPosition(new q(n,this.getLineMinColumn(n))),r=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:s,firstPositionDeltaTop:r}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),s=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:s}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getTextModelOptions(){return this.model.getOptions()}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStartLine=e;let s=this.coordinatesConverter.convertViewPositionToModelPosition(new q(e,this.getLineMinColumn(e)));this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,new F(s.lineNumber,s.column,s.lineNumber,s.column),1);const r=this.viewLayout.getVerticalOffsetForLineNumber(e),o=this.viewLayout.getCurrentScrollTop();this._viewportStartLineDelta=o-r}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,s){return this._lines.getViewLinesBracketGuides(e,t,n,s)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=Zs(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=S0(this.getLineContent(e));return t===-1?0:t+2}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewLineRenderingData(e,t){let n=this.model.mightContainRTL(),s=this.model.mightContainNonBasicASCII(),r=this.getTabSize(),o=this._lines.getViewLineData(t),l=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return o.inlineDecorations&&(l=[...l,...o.inlineDecorations.map(c=>c.toInlineDecoration(t))]),new Cr(o.minColumn,o.maxColumn,o.content,o.continuesWithWrappedLine,n,s,o.tokens,l,r,o.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){let s=this._lines.getViewLinesData(e,t,n);return new xLe(this.getTabSize(),s)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,WO(this._configuration.options)),n=new yNe;for(const s of t){const r=s.options,o=r.overviewRuler;if(!o)continue;const a=o.position;if(a===0)continue;const l=o.getColor(e),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.startLineNumber,s.range.startColumn),h=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.endLineNumber,s.range.endColumn);n.accept(l,r.zIndex,c,h,a)}return n.asArray}invalidateOverviewRulerColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const n=t.options.overviewRuler;n&&n.invalidateCachedColor()}}invalidateMinimapColorCache(){const e=this.model.getAllDecorations();for(const t of e){const n=t.options.minimap;n&&n.invalidateCachedColor()}}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}getModelLineMaxColumn(e){return this.model.getLineMaxColumn(e)}validateModelPosition(e){return this.model.validatePosition(e)}validateModelRange(e){return this.model.validateRange(e)}deduceModelPositionRelativeToViewPosition(e,t,n){const s=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);const o=this.model.getOffsetAt(s)+t;return this.model.getPositionAt(o)}getEOL(){return this.model.getEOL()}getPlainTextToCopy(e,t,n){const s=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(F.compareRangesUsingStarts);let r=!1,o=!1;for(const l of e)l.isEmpty()?r=!0:o=!0;if(!o){if(!t)return"";const l=e.map(h=>h.startLineNumber);let c="";for(let h=0;h<l.length;h++)h>0&&l[h-1]===l[h]||(c+=this.model.getLineContent(l[h])+s);return c}if(r&&t){let l=[],c=0;for(const h of e){const u=h.startLineNumber;h.isEmpty()?u!==c&&l.push(this.model.getLineContent(u)):l.push(this.model.getValueInRange(h,n?2:0)),c=u}return l.length===1?l[0]:l}let a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,n?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const n=this.model.getLanguageId();if(n===N0||e.length!==1)return null;let s=e[0];if(s.isEmpty()){if(!t)return null;const h=s.startLineNumber;s=new F(h,this.model.getLineMinColumn(h),h,this.model.getLineMaxColumn(h))}const r=this._configuration.options.get(43),o=this._getColorMap(),l=/[:;\\\/<>]/.test(r.fontFamily)||r.fontFamily===us.fontFamily;let c;return l?c=us.fontFamily:(c=r.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${us.fontFamily}`),{mode:n,html:`<div style="color: ${o[1]};background-color: ${o[2]};font-family: ${c};font-weight: ${r.fontWeight};font-size: ${r.fontSize}px;line-height: ${r.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(s,o)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn,a=this.getTabSize();let l="";for(let c=n;c<=r;c++){const h=this.model.getLineTokens(c),u=h.getLineContent(),d=c===n?s-1:0,f=c===r?o-1:u.length;u===""?l+="<br>":l+=iNe(u,h.inflate(),t,d,f,a,On)}return l}_getColorMap(){let e=xi.getColorMap(),t=["#000000"];if(e)for(let n=1,s=e.length;n<s;n++)t[n]=Z.Format.CSS.formatHex(e[n]);return t}pushStackElement(){this.model.pushStackElement()}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){this._withViewEventsCollector(s=>this._cursor.setStates(s,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=0){this._withViewEventsCollector(s=>this._cursor.setSelections(s,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new eNe);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(s=>this._cursor.executeEdits(s,e,t,n))}startComposition(){this._cursor.setIsDoingComposition(!0),this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._cursor.setIsDoingComposition(!1),this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,s,r){this._executeCursorEdit(o=>this._cursor.compositionType(o,e,t,n,s,r))}paste(e,t,n,s){this._executeCursorEdit(r=>this._cursor.paste(r,e,t,n,s))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealPrimaryCursor(e,t){this._withViewEventsCollector(n=>this._cursor.revealPrimary(n,e,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new F(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new eS(e,n,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new F(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new eS(e,n,null,0,!0,0)))}revealRange(e,t,n,s,r){this._withViewEventsCollector(o=>o.emitViewEvent(new eS(e,n,null,s,t,r)))}getVerticalOffsetForLineNumber(e){return this.viewLayout.getVerticalOffsetForLineNumber(e)}getScrollTop(){return this.viewLayout.getCurrentScrollTop()}setScrollTop(e,t){this.viewLayout.setScrollPosition({scrollTop:e},t)}setScrollPosition(e,t){this.viewLayout.setScrollPosition(e,t)}deltaScrollNow(e,t){this.viewLayout.deltaScrollNow(e,t)}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new QTe),this._eventDispatcher.emitOutgoingEvent(new $V))}setMaxLineWidth(e){this.viewLayout.setMaxLineWidth(e)}_withViewEventsCollector(e){try{const t=this._eventDispatcher.beginEmitViewEvents();e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}class yNe{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,s,r){const o=this._asMap[e];if(o){const a=o.data,l=a[a.length-3],c=a[a.length-1];if(l===r&&c+1>=n){s>c&&(a[a.length-1]=s);return}a.push(r,n,s)}else{const a=new HY(e,t,[r,n,s]);this._asMap[e]=a,this.asArray.push(a)}}}class Jv{constructor(...e){this._entries=new Map;for(let[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}const tr=mt("accessibilityService"),CNe=new De("accessibilityModeEnabled",!1);class SNe extends D0{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let YM=[],QM=[];class oP{constructor(e,t){this.classifier=new SNe(e,t)}static create(e){return new oP(e.get(118),e.get(117))}createLineBreaksComputer(e,t,n,s){t=t|0,n=+n;const r=[],o=[],a=[];return{addRequest:(l,c,h)=>{r.push(l),o.push(c),a.push(h)},finalize:()=>{const l=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth;let c=[];for(let h=0,u=r.length;h<u;h++){const d=o[h],f=a[h];f&&!f.injectionOptions&&!d?c[h]=xNe(this.classifier,f,r[h],t,n,l,s):c[h]=DNe(this.classifier,r[h],d,t,n,l,s)}return YM.length=0,QM.length=0,c}}}}function xNe(i,e,t,n,s,r,o){if(s===-1)return null;const a=t.length;if(a<=1)return null;const l=e.breakOffsets,c=e.breakOffsetsVisibleColumn,h=wX(t,n,s,r,o),u=s-h;let d=YM,f=QM,g=0,p=0,m=0,v=s;const b=l.length;let w=0;if(w>=0){let y=Math.abs(c[w]-v);for(;w+1<b;){const x=Math.abs(c[w+1]-v);if(x>=y)break;y=x,w++}}for(;w<b;){let y=w<0?0:l[w],x=w<0?0:c[w];p>y&&(y=p,x=m);let k=0,S=0,L=0,D=0;if(x<=v){let T=x,$=y===0?0:t.charCodeAt(y-1),U=y===0?0:i.get($),ee=!0;for(let ce=y;ce<a;ce++){const fe=ce,Ce=t.charCodeAt(ce);let Se,me;if(_n(Ce)?(ce++,Se=0,me=2):(Se=i.get(Ce),me=Nb(Ce,T,n,r)),fe>p&&XM($,U,Ce,Se)&&(k=fe,S=T),T+=me,T>v){fe>p?(L=fe,D=T-me):(L=ce+1,D=T),T-S>u&&(k=0),ee=!1;break}$=Ce,U=Se}if(ee){g>0&&(d[g]=l[l.length-1],f[g]=c[l.length-1],g++);break}}if(k===0){let T=x,$=t.charCodeAt(y),U=i.get($),ee=!1;for(let ce=y-1;ce>=p;ce--){const fe=ce+1,Ce=t.charCodeAt(ce);if(Ce===9){ee=!0;break}let Se,me;if(Cm(Ce)?(ce--,Se=0,me=2):(Se=i.get(Ce),me=la(Ce)?r:1),T<=v){if(L===0&&(L=fe,D=T),T<=v-u)break;if(XM(Ce,Se,$,U)){k=fe,S=T;break}}T-=me,$=Ce,U=Se}if(k!==0){const ce=u-(D-S);if(ce<=n){const fe=t.charCodeAt(L);let Ce;_n(fe)?Ce=2:Ce=Nb(fe,D,n,r),ce-Ce<0&&(k=0)}}if(ee){w--;continue}}if(k===0&&(k=L,S=D),k<=p){const T=t.charCodeAt(p);_n(T)?(k=p+2,S=m+2):(k=p+1,S=m+Nb(T,m,n,r))}for(p=k,d[g]=k,m=S,f[g]=S,g++,v=S+u;w<0||w<b&&c[w]<S;)w++;let N=Math.abs(c[w]-v);for(;w+1<b;){const T=Math.abs(c[w+1]-v);if(T>=N)break;N=T,w++}}return g===0?null:(d.length=g,f.length=g,YM=e.breakOffsets,QM=e.breakOffsetsVisibleColumn,e.breakOffsets=d,e.breakOffsetsVisibleColumn=f,e.wrappedTextIndentLength=h,e)}function DNe(i,e,t,n,s,r,o){const a=xa.applyInjectedText(e,t);let l,c;if(t&&t.length>0?(l=t.map(S=>S.options),c=t.map(S=>S.column-1)):(l=null,c=null),s===-1)return l?new gb([a.length],[],0,c,l):null;const h=a.length;if(h<=1)return l?new gb([a.length],[],0,c,l):null;const u=wX(a,n,s,r,o),d=s-u;let f=[],g=[],p=0,m=0,v=0,b=s,w=a.charCodeAt(0),y=i.get(w),x=Nb(w,0,n,r),k=1;_n(w)&&(x+=1,w=a.charCodeAt(1),y=i.get(w),k++);for(let S=k;S<h;S++){const L=S,D=a.charCodeAt(S);let N,T;_n(D)?(S++,N=0,T=2):(N=i.get(D),T=Nb(D,x,n,r)),XM(w,y,D,N)&&(m=L,v=x),x+=T,x>b&&((m===0||x-v>d)&&(m=L,v=x-T),f[p]=m,g[p]=v,p++,b=v+d,m=0),w=D,y=N}return p===0&&(!t||t.length===0)?null:(f[p]=h,g[p]=x,new gb(f,g,u,c,l))}function Nb(i,e,t,n){return i===9?t-e%t:la(i)||i<32?n:1}function YV(i,e){return e-i%e}function XM(i,e,t,n){return t!==32&&(e===2||e===3&&n!==2||n===1||n===3&&e!==1)}function wX(i,e,t,n,s){let r=0;if(s!==0){const o=Zs(i);if(o!==-1){for(let l=0;l<o;l++){const c=i.charCodeAt(l)===9?YV(r,e):1;r+=c}const a=s===3?2:s===2?1:0;for(let l=0;l<a;l++){const c=YV(r,e);r+=c}r+n>t&&(r=0)}}return r}var xE;const DE=(xE=window.trustedTypes)===null||xE===void 0?void 0:xE.createPolicy("domLineBreaksComputer",{createHTML:i=>i});class aP{static create(){return new aP}constructor(){}createLineBreaksComputer(e,t,n,s){t=t|0,n=+n;let r=[],o=[];return{addRequest:(a,l,c)=>{r.push(a),o.push(l)},finalize:()=>LNe(r,e,t,n,s,o)}}}function LNe(i,e,t,n,s,r){var o;function a(L){const D=r[L];if(D){const N=xa.applyInjectedText(i[L],D),T=D.map(U=>U.options),$=D.map(U=>U.column-1);return new gb([N.length],[],0,$,T)}else return null}if(n===-1){const L=[];for(let D=0,N=i.length;D<N;D++)L[D]=a(D);return L}const l=Math.round(n*e.typicalHalfwidthCharacterWidth),h=Math.round(t*(s===3?2:s===2?1:0)),u=Math.ceil(e.spaceWidth*h),d=document.createElement("div");Fn.applyFontInfoSlow(d,e);const f=Sf(1e4),g=[],p=[],m=[],v=[],b=[];for(let L=0;L<i.length;L++){const D=xa.applyInjectedText(i[L],r[L]);let N=0,T=0,$=l;if(s!==0)if(N=Zs(D),N===-1)N=0;else{for(let fe=0;fe<N;fe++){const Ce=D.charCodeAt(fe)===9?t-T%t:1;T+=Ce}const ce=Math.ceil(e.spaceWidth*T);ce+e.typicalFullwidthCharacterWidth>l?(N=0,T=0):$=l-ce}const U=D.substr(N),ee=kNe(U,T,t,$,f,u);g[L]=N,p[L]=T,m[L]=U,v[L]=ee[0],b[L]=ee[1]}const w=f.build(),y=(o=DE==null?void 0:DE.createHTML(w))!==null&&o!==void 0?o:w;d.innerHTML=y,d.style.position="absolute",d.style.top="10000",d.style.wordWrap="break-word",document.body.appendChild(d);let x=document.createRange();const k=Array.prototype.slice.call(d.children,0);let S=[];for(let L=0;L<i.length;L++){const D=k[L],N=ANe(x,D,m[L],v[L]);if(N===null){S[L]=a(L);continue}const T=g[L],$=p[L]+h,U=b[L],ee=[];for(let Se=0,me=N.length;Se<me;Se++)ee[Se]=U[N[Se]];if(T!==0)for(let Se=0,me=N.length;Se<me;Se++)N[Se]+=T;let ce,fe;const Ce=r[L];Ce?(ce=Ce.map(Se=>Se.options),fe=Ce.map(Se=>Se.column-1)):(ce=null,fe=null),S[L]=new gb(N,ee,$,fe,ce)}return document.body.removeChild(d),S}function kNe(i,e,t,n,s,r){if(r!==0){let d=String(r);s.appendASCIIString('<div style="text-indent: -'),s.appendASCIIString(d),s.appendASCIIString("px; padding-left: "),s.appendASCIIString(d),s.appendASCIIString("px; box-sizing: border-box; width:")}else s.appendASCIIString('<div style="width:');s.appendASCIIString(String(n)),s.appendASCIIString('px;">');const o=i.length;let a=e,l=0,c=[],h=[],u=0<o?i.charCodeAt(0):0;s.appendASCIIString("<span>");for(let d=0;d<o;d++){d!==0&&d%16384===0&&s.appendASCIIString("</span><span>"),c[d]=l,h[d]=a;const f=u;u=d+1<o?i.charCodeAt(d+1):0;let g=1,p=1;switch(f){case 9:g=t-a%t,p=g;for(let m=1;m<=g;m++)m<g?s.write1(160):s.appendASCII(32);break;case 32:u===32?s.write1(160):s.appendASCII(32);break;case 60:s.appendASCIIString("&lt;");break;case 62:s.appendASCIIString("&gt;");break;case 38:s.appendASCIIString("&amp;");break;case 0:s.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:s.write1(65533);break;default:la(f)&&p++,f<32?s.write1(9216+f):s.write1(f)}l+=g,a+=p}return s.appendASCIIString("</span>"),c[i.length]=l,h[i.length]=a,s.appendASCIIString("</div>"),[c,h]}function ANe(i,e,t,n){if(t.length<=1)return null;const s=Array.prototype.slice.call(e.children,0),r=[];try{JM(i,s,n,0,null,t.length-1,null,r)}catch(o){return console.log(o),null}return r.length===0?null:(r.push(t.length),r)}function JM(i,e,t,n,s,r,o,a){if(n===r||(s=s||LE(i,e,t[n],t[n+1]),o=o||LE(i,e,t[r],t[r+1]),Math.abs(s[0].top-o[0].top)<=.1))return;if(n+1===r){a.push(r);return}const l=n+(r-n)/2|0,c=LE(i,e,t[l],t[l+1]);JM(i,e,t,n,s,l,c,a),JM(i,e,t,l,c,r,o,a)}function LE(i,e,t,n){return i.setStart(e[t/16384|0].firstChild,t%16384),i.setEnd(e[n/16384|0].firstChild,n%16384),i.getClientRects()}var ENe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Yu=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let INe=0,TNe=class{constructor(e,t,n,s,r){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=s,this.listenersToRemove=r}dispose(){at(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}},e1=class tS extends te{constructor(e,t,n,s,r,o,a,l,c,h){super(),this._onDidDispose=this._register(new z),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new z),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new z),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new z),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new z),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new z),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeConfiguration=this._register(new z),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new z),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new z),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new z),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new z),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new z),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new QV),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new QV),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new z),this.onWillType=this._onWillType.event,this._onDidType=this._register(new z),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new z),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new z),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new z),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new z),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new z),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new z),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new z),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new z),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onContextMenu=this._register(new z),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new z),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new z),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new z),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new z),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new z),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new z),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new z),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new z),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new z),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event;const u=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=u.overflowWidgetsDomNode,delete u.overflowWidgetsDomNode,this._id=++INe,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this.isSimpleWidget=n.isSimpleWidget||!1,this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(u,h)),this._register(this._configuration.onDidChange(f=>{this._onDidChangeConfiguration.fire(f);const g=this._configuration.options;if(f.hasChanged(129)){const p=g.get(129);this._onDidLayoutChange.fire(p)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=r,this._commandService=o,this._themeService=l,this._register(new NNe(this,this._contextKeyService)),this._register(new MNe(this,this._contextKeyService)),this._instantiationService=s.createChild(new Jv([$e,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new RNe(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={};let d;Array.isArray(n.contributions)?d=n.contributions:d=Hp.getEditorContributions();for(const f of d){if(this._contributions[f.id]){Ke(new Error(`Cannot have two contributions with the same id ${f.id}`));continue}try{const g=this._instantiationService.createInstance(f.ctor,this);this._contributions[f.id]=g}catch(g){Ke(g)}}Hp.getEditorActions().forEach(f=>{if(this._actions[f.id]){Ke(new Error(`Cannot have two actions with the same id ${f.id}`));return}const g=new bX(f.id,f.label,f.alias,kd(f.precondition),()=>this._instantiationService.invokeFunction(p=>Promise.resolve(f.runEditorCommand(p,this,null))),this._contextKeyService);this._actions[g.id]=g}),this._codeEditorService.addCodeEditor(this)}_createConfiguration(e,t){return new Fn(this.isSimpleWidget,e,this._domElement,t)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return UL.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const e=Object.keys(this._contributions);for(let t=0,n=e.length;t<n;t++){const s=e[t];this._contributions[s].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e)}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?mi.getWordAtPosition(this._modelData.model,this._configuration.options.get(115),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let n=0;return e&&e.lineEnding&&e.lineEnding===`
`?n=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const n=this.hasTextFocus(),s=this._detachModel();this._attachModel(t),n&&this.hasModel()&&this.focus();const r={oldModelUrl:s?s.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(r),this._postDetachModelCleanup(s)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(let n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetForPosition(e,t,n){const s=e.model.validatePosition({lineNumber:t,column:n}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber)}getTopForLineNumber(e){return this._modelData?tS._getVerticalOffsetForPosition(this._modelData,e,1):-1}getTopForPosition(e,t){return this._modelData?tS._getVerticalOffsetForPosition(this._modelData,e,t):-1}setHiddenAreas(e){this._modelData&&this._modelData.viewModel.setHiddenAreas(e.map(t=>F.lift(t)))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return At.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e){if(this._modelData){if(!q.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections("api",[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,s){if(!this._modelData)return;if(!F.isIRange(e))throw new Error("Invalid arguments");const r=this._modelData.model.validateRange(e),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(r);this._modelData.viewModel.revealRange("api",n,o,t,s)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,n){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new F(e,1,e,1),t,!1,n)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,s){if(!q.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new F(e.lineNumber,e.column,e.lineNumber,e.column),t,n,s)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e){const t=Ve.isISelection(e),n=F.isIRange(e);if(!t&&!n)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(e);else if(n){const s={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(s)}}_setSelectionImpl(e){if(!this._modelData)return;const t=new Ve(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections("api",[t])}revealLines(e,t,n=0){this._revealLines(e,t,0,n)}revealLinesInCenter(e,t,n=0){this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._revealLines(e,t,2,n)}revealLinesNearTop(e,t,n=0){this._revealLines(e,t,5,n)}_revealLines(e,t,n,s){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new F(e,1,t,1),n,!1,s)}revealRange(e,t=0,n=!1,s=!0){this._revealRange(e,n?1:0,s,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,n,s){if(!F.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(F.lift(e),t,n,s)}setSelections(e,t="api",n=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let s=0,r=e.length;s<r;s++)if(!Ve.isISelection(e[s]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;const e={},t=Object.keys(this._contributions);for(const r of t){const o=this._contributions[r];typeof o.saveViewState=="function"&&(e[r]=o.saveViewState())}const n=this._modelData.viewModel.saveCursorState(),s=this._modelData.viewModel.saveState();return{cursorState:n,viewState:s,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const n=t.cursorState;Array.isArray(n)?this._modelData.viewModel.restoreCursorState(n):this._modelData.viewModel.restoreCursorState([n]);const s=t.contributionsState||{},r=Object.keys(this._contributions);for(let a=0,l=r.length;a<l;a++){const c=r[a],h=this._contributions[c];typeof h.restoreViewState=="function"&&h.restoreViewState(s[c])}const o=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(o)}}getContribution(e){return this._contributions[e]||null}getActions(){const e=[],t=Object.keys(this._actions);for(let n=0,s=t.length;n<s;n++){const r=t[n];e.push(this._actions[r])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions[e]||null}trigger(e,t,n){switch(n=n||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const r=n;this._type(e,r.text||"");return}case"replacePreviousChar":{const r=n;this._compositionType(e,r.text||"",r.replaceCharCnt||0,0,0);return}case"compositionType":{const r=n;this._compositionType(e,r.text||"",r.replacePrevCharCnt||0,r.replaceNextCharCnt||0,r.positionDelta||0);return}case"paste":{const r=n;this._paste(e,r.text||"",r.pasteOnNewLine||!1,r.multicursorText||null,r.mode||null);return}case"cut":this._cut(e);return}const s=this.getAction(t);if(s){Promise.resolve(s.run()).then(void 0,Ke);return}this._modelData&&(this._triggerEditorCommand(e,t,n)||this._triggerCommand(t,n))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,n,s,r){this._modelData&&this._modelData.viewModel.compositionType(t,n,s,r,e)}_paste(e,t,n,s,r){if(!this._modelData||t.length===0)return;const o=this._modelData.viewModel.getSelection().getStartPosition();this._modelData.viewModel.paste(t,n,s,e);const a=this._modelData.viewModel.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new F(o.lineNumber,o.column,a.lineNumber,a.column),languageId:r})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){const s=Hp.getEditorCommand(t);return s?(n=n||{},n.source=e,this._instantiationService.invokeFunction(r=>{Promise.resolve(s.runEditorCommand(r,this,n)).then(void 0,Ke)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,n){if(!this._modelData||this._configuration.options.get(80))return!1;let s;return n?Array.isArray(n)?s=()=>n:s=n:s=()=>null,this._modelData.viewModel.executeEdits(e,t,s),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,WO(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(129)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarMouseDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarMouseDown(e)}layout(e){this._configuration.observeReferenceElement(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(n)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(n)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),n=this._configuration.options,s=n.get(129),r=tS._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),o=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+s.glyphMarginWidth+s.lineNumbersWidth+s.decorationsWidth-this.getScrollLeft();return{top:r,left:o,height:n.get(58)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){Fn.applyFontInfoSlow(e,this._configuration.options.get(43))}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setMaxLineNumber(e.getLineCount()),e.onBeforeAttached();const n=new wNe(this._id,this._configuration,e,aP.create(),oP.create(this._configuration.options),o=>Al(o));t.push(e.onDidChangeDecorations(o=>this._onDidChangeModelDecorations.fire(o))),t.push(e.onDidChangeLanguage(o=>{this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(o)})),t.push(e.onDidChangeLanguageConfiguration(o=>this._onDidChangeModelLanguageConfiguration.fire(o))),t.push(e.onDidChangeContent(o=>this._onDidChangeModelContent.fire(o))),t.push(e.onDidChangeOptions(o=>this._onDidChangeModelOptions.fire(o))),t.push(e.onWillDispose(()=>this.setModel(null))),t.push(n.onEvent(o=>{switch(o.kind){case 0:this._onDidContentSizeChange.fire(o);break;case 1:this._editorTextFocus.setValue(o.hasFocus);break;case 2:this._onDidScrollChange.fire(o);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{o.reachedMaxCursorCount&&this._notificationService.warn(_("cursors.maximum","The number of cursors has been limited to {0}.",Pm.MAX_CURSOR_COUNT));const a=[];for(let h=0,u=o.selections.length;h<u;h++)a[h]=o.selections[h].getPosition();const l={position:a[0],secondaryPositions:a.slice(1),reason:o.reason,source:o.source};this._onDidChangeCursorPosition.fire(l);const c={selection:o.selections[0],secondarySelections:o.selections.slice(1),modelVersionId:o.modelVersionId,oldSelections:o.oldSelections,oldModelVersionId:o.oldModelVersionId,source:o.source,reason:o.reason};this._onDidChangeCursorSelection.fire(c);break}}}));const[s,r]=this._createView(n);if(r){this._domElement.appendChild(s.domNode.domNode);let o=Object.keys(this._contentWidgets);for(let a=0,l=o.length;a<l;a++){const c=o[a];s.addContentWidget(this._contentWidgets[c])}o=Object.keys(this._overlayWidgets);for(let a=0,l=o.length;a<l;a++){const c=o[a];s.addOverlayWidget(this._overlayWidgets[c])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new TNe(e,n,s,r,t)}_createView(e){let t;this.isSimpleWidget?t={paste:(r,o,a,l)=>{this._paste("keyboard",r,o,a,l)},type:r=>{this._type("keyboard",r)},compositionType:(r,o,a,l)=>{this._compositionType("keyboard",r,o,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(r,o,a,l)=>{const c={text:r,pasteOnNewLine:o,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:r=>{const o={text:r};this._commandService.executeCommand("type",o)},compositionType:(r,o,a,l)=>{if(a||l){const c={text:r,replacePrevCharCnt:o,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:r,replaceCharCnt:o};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const n=new wk(e.coordinatesConverter);return n.onKeyDown=r=>this._onKeyDown.fire(r),n.onKeyUp=r=>this._onKeyUp.fire(r),n.onContextMenu=r=>this._onContextMenu.fire(r),n.onMouseMove=r=>this._onMouseMove.fire(r),n.onMouseLeave=r=>this._onMouseLeave.fire(r),n.onMouseDown=r=>this._onMouseDown.fire(r),n.onMouseUp=r=>this._onMouseUp.fire(r),n.onMouseDrag=r=>this._onMouseDrag.fire(r),n.onMouseDrop=r=>this._onMouseDrop.fire(r),n.onMouseDropCanceled=r=>this._onMouseDropCanceled.fire(r),n.onMouseWheel=r=>this._onMouseWheel.fire(r),[new VTe(t,this._configuration,this._themeService,e,n,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e&&e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}};e1=ENe([Yu(3,Wt),Yu(4,ii),Yu(5,vn),Yu(6,$e),Yu(7,si),Yu(8,Vn),Yu(9,tr)],e1);class QV extends te{constructor(){super(),this._onDidChangeToTrue=this._register(new z),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new z),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class NNe extends te{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=G.editorSimpleInput.bindTo(t),this._editorFocus=G.focus.bindTo(t),this._textInputFocus=G.textInputFocus.bindTo(t),this._editorTextFocus=G.editorTextFocus.bindTo(t),this._editorTabMovesFocus=G.tabMovesFocus.bindTo(t),this._editorReadonly=G.readOnly.bindTo(t),this._inDiffEditor=G.inDiffEditor.bindTo(t),this._editorColumnSelection=G.columnSelection.bindTo(t),this._hasMultipleSelections=G.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=G.hasNonEmptySelection.bindTo(t),this._canUndo=G.canUndo.bindTo(t),this._canRedo=G.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(128)),this._editorReadonly.set(e.get(80)),this._inDiffEditor.set(e.get(53)),this._editorColumnSelection.set(e.get(18))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class MNe extends te{constructor(e,t){super(),this._editor=e,this._contextKeyService=t,this._langId=G.languageId.bindTo(t),this._hasCompletionItemProvider=G.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=G.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=G.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=G.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=G.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=G.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=G.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=G.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=G.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=G.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=G.hasReferenceProvider.bindTo(t),this._hasRenameProvider=G.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=G.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=G.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=G.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=G.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=G.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=G.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=G.isInWalkThroughSnippet.bindTo(t);const n=()=>this._update();this._register(e.onDidChangeModel(n)),this._register(e.onDidChangeModelLanguage(n)),this._register(ta.onDidChange(n)),this._register(Dl.onDidChange(n)),this._register(gM.onDidChange(n)),this._register(Tv.onDidChange(n)),this._register(Sx.onDidChange(n)),this._register(xx.onDidChange(n)),this._register(Dx.onDidChange(n)),this._register(Iv.onDidChange(n)),this._register(Cx.onDidChange(n)),this._register(fM.onDidChange(n)),this._register(yx.onDidChange(n)),this._register(uM.onDidChange(n)),this._register(ub.onDidChange(n)),this._register(Th.onDidChange(n)),this._register(dM.onDidChange(n)),this._register(pM.onDidChange(n)),n()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(ta.has(e)),this._hasCodeActionsProvider.set(Dl.has(e)),this._hasCodeLensProvider.set(gM.has(e)),this._hasDefinitionProvider.set(Tv.has(e)),this._hasDeclarationProvider.set(Sx.has(e)),this._hasImplementationProvider.set(xx.has(e)),this._hasTypeDefinitionProvider.set(Dx.has(e)),this._hasHoverProvider.set(Iv.has(e)),this._hasDocumentHighlightProvider.set(Cx.has(e)),this._hasDocumentSymbolProvider.set(fM.has(e)),this._hasReferenceProvider.set(yx.has(e)),this._hasRenameProvider.set(uM.has(e)),this._hasSignatureHelpProvider.set(dM.has(e)),this._hasInlayHintsProvider.set(pM.has(e)),this._hasDocumentFormattingProvider.set(ub.has(e)||Th.has(e)),this._hasDocumentSelectionFormattingProvider.set(Th.has(e)),this._hasMultipleDocumentFormattingProvider.set(ub.all(e).length+Th.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(Th.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===it.walkThroughSnippet)})}}class RNe extends te{constructor(e){super(),this._onChange=this._register(new z),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(ym(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}const ONe=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),PNe=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function kE(i){return ONe+encodeURIComponent(i.toString())+PNe}const FNe=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),BNe=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function VNe(i){return FNe+encodeURIComponent(i.toString())+BNe}Jt((i,e)=>{const t=i.getColor(zQ);t&&e.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${t}; }`);const n=i.getColor(Ab);n&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${kE(n)}") repeat-x bottom left; }`);const s=i.getColor(aAe);s&&e.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${s}; }`);const r=i.getColor(mk);r&&e.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${r}; }`);const o=i.getColor(Oc);o&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${kE(o)}") repeat-x bottom left; }`);const a=i.getColor(lAe);a&&e.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${a}; }`);const l=i.getColor(G5);l&&e.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${l}; }`);const c=i.getColor(fa);c&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${kE(c)}") repeat-x bottom left; }`);const h=i.getColor(cAe);h&&e.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${h}; }`);const u=i.getColor(uAe);u&&e.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${u}; }`);const d=i.getColor(hAe);d&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${VNe(d)}") no-repeat bottom left; }`);const f=i.getColor(WEe);f&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${f.rgba.a}; }`);const g=i.getColor(VEe);g&&e.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${g}; }`);const p=i.getColor(Jh)||"inherit";e.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${p}}`)});class Bt{constructor(e,t,n){const s=r=>this.emitter.fire(r);this.emitter=new z({onFirstListenerAdd:()=>e.addEventListener(t,s,n),onLastListenerRemove:()=>e.removeEventListener(t,s,n)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}}function XV(i){return i.preventDefault(),i.stopPropagation(),i}var M0=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let WNe=!1;var cD;(function(i){i.North="north",i.South="south",i.East="east",i.West="west"})(cD||(cD={}));let zNe=4;const HNe=new z;let UNe=300;const $Ne=new z;class lP{constructor(){this.disposables=new de}get onPointerMove(){return this.disposables.add(new Bt(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new Bt(window,"mouseup")).event}dispose(){this.disposables.dispose()}}M0([Zi],lP.prototype,"onPointerMove",null);M0([Zi],lP.prototype,"onPointerUp",null);class cP{constructor(e){this.el=e,this.disposables=new de}get onPointerMove(){return this.disposables.add(new Bt(this.el,Ut.Change)).event}get onPointerUp(){return this.disposables.add(new Bt(this.el,Ut.End)).event}dispose(){this.disposables.dispose()}}M0([Zi],cP.prototype,"onPointerMove",null);M0([Zi],cP.prototype,"onPointerUp",null);class hD{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}}M0([Zi],hD.prototype,"onPointerMove",null);M0([Zi],hD.prototype,"onPointerUp",null);class Tn extends te{constructor(e,t,n){super(),this.hoverDelay=UNe,this.hoverDelayer=this._register(new y0(this.hoverDelay)),this._state=3,this._onDidEnablementChange=this._register(new z),this.onDidEnablementChange=this._onDidEnablementChange.event,this._onDidStart=this._register(new z),this.onDidStart=this._onDidStart.event,this._onDidChange=this._register(new z),this.onDidChange=this._onDidChange.event,this._onDidReset=this._register(new z),this.onDidReset=this._onDidReset.event,this._onDidEnd=this._register(new z),this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.orthogonalStartSashDisposables=this._register(new de),this.orthogonalStartDragHandleDisposables=this._register(new de),this.orthogonalEndSashDisposables=this._register(new de),this.orthogonalEndDragHandleDisposables=this._register(new de),this.el=se(e,ue(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),ht&&this.el.classList.add("mac");const s=this._register(new Bt(this.el,"mousedown")).event;this._register(s(u=>this.onPointerStart(u,new lP),this));const r=this._register(new Bt(this.el,"dblclick")).event;this._register(r(this.onPointerDoublePress,this));const o=this._register(new Bt(this.el,"mouseenter")).event;this._register(o(()=>Tn.onMouseEnter(this)));const a=this._register(new Bt(this.el,"mouseleave")).event;this._register(a(()=>Tn.onMouseLeave(this))),this._register(kt.addTarget(this.el));const l=ke.map(this._register(new Bt(this.el,Ut.Start)).event,u=>{var d;return Object.assign(Object.assign({},u),{target:(d=u.initialTarget)!==null&&d!==void 0?d:null})});this._register(l(u=>this.onPointerStart(u,new cP(this.el)),this));const c=this._register(new Bt(this.el,Ut.Tap)).event,h=ke.map(ke.filter(ke.debounce(c,(u,d)=>{var f;return{event:d,count:((f=u==null?void 0:u.count)!==null&&f!==void 0?f:0)+1}},250),({count:u})=>u===2),({event:u})=>{var d;return Object.assign(Object.assign({},u),{target:(d=u.initialTarget)!==null&&d!==void 0?d:null})});this._register(h(this.onPointerDoublePress,this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=zNe,this._register(HNe.event(u=>{this.size=u,this.layout()}))),this._register($Ne.event(u=>this.hoverDelay=u)),this.hidden=!1,this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",WNe),this.layout()}get state(){return this._state}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this._onDidEnablementChange.fire(e))}get orthogonalStartSash(){return this._orthogonalStartSash}set orthogonalStartSash(e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=se(this.el,ue(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(gt(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new Bt(this._orthogonalStartDragHandle,"mouseenter")).event(()=>Tn.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Bt(this._orthogonalStartDragHandle,"mouseleave")).event(()=>Tn.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange(t,this)),t(e.state)}this._orthogonalStartSash=e}get orthogonalEndSash(){return this._orthogonalEndSash}set orthogonalEndSash(e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=se(this.el,ue(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(gt(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new Bt(this._orthogonalEndDragHandle,"mouseenter")).event(()=>Tn.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Bt(this._orthogonalEndDragHandle,"mouseleave")).event(()=>Tn.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange(t,this)),t(e.state)}this._orthogonalEndSash=e}onPointerStart(e,t){Et.stop(e);let n=!1;if(!e.__orthogonalSashEvent){const g=this.getOrthogonalSash(e);g&&(n=!0,e.__orthogonalSashEvent=!0,g.onPointerStart(e,new hD(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new hD(t))),!this.state)return;const s=CSe("iframe");for(const g of s)g.style.pointerEvents="none";const r=e.pageX,o=e.pageY,a=e.altKey,l={startX:r,currentX:r,startY:o,currentY:o,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=jr(this.el),h=()=>{let g="";n?g="all-scroll":this.orientation===1?this.state===1?g="s-resize":this.state===2?g="n-resize":g=ht?"row-resize":"ns-resize":this.state===1?g="e-resize":this.state===2?g="w-resize":g=ht?"col-resize":"ew-resize",c.textContent=`* { cursor: ${g} !important; }`},u=new de;h(),n||this.onDidEnablementChange(h,null,u);const d=g=>{Et.stop(g,!1);const p={startX:r,currentX:g.pageX,startY:o,currentY:g.pageY,altKey:a};this._onDidChange.fire(p)},f=g=>{Et.stop(g,!1),this.el.removeChild(c),this.el.classList.remove("active"),this._onDidEnd.fire(),u.dispose();for(const p of s)p.style.pointerEvents="auto"};t.onPointerMove(d,null,u),t.onPointerUp(f,null,u),u.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&Tn.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&Tn.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){Tn.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}hide(){this.hidden=!0,this.el.style.display="none",this.el.setAttribute("aria-hidden","true")}getOrthogonalSash(e){if(!(!e.target||!(e.target instanceof HTMLElement))&&e.target.classList.contains("orthogonal-drag-handle"))return e.target.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const hP=mt("IEditorCancelService"),yX=new De("cancellableOperation",!1,_("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));eg(hP,class{constructor(){this._tokens=new WeakMap}add(i,e){let t=this._tokens.get(i);t||(t=i.invokeWithinContext(s=>{const r=yX.bindTo(s.get($e)),o=new _r;return{key:r,tokens:o}}),this._tokens.set(i,t));let n;return t.key.set(!0),n=t.tokens.push(e),()=>{n&&(n(),t.key.set(!t.tokens.isEmpty()),n=void 0)}}cancel(i){const e=this._tokens.get(i);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},!0);class jNe extends Na{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(n=>n.get(hP).add(e,this))}dispose(){this._unregister(),super.dispose()}}pe(new class extends Zr{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:yX})}runEditorCommand(i,e){i.get(hP).cancel(e)}});let qNe=class e4{constructor(e,t){if(this.flags=t,this.flags&1){const n=e.getModel();this.modelVersionId=n?fo("{0}#{1}",n.uri.toString(),n.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof e4))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new e4(e,this.flags))}};class GNe extends jNe{constructor(e,t,n,s){super(e,s),this._listener=new de,t&4&&this._listener.add(e.onDidChangeCursorPosition(r=>{(!n||!F.containsPosition(n,r.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(r=>{(!n||!F.containsRange(n,r.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(r=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(r=>this.cancel())),this._listener.add(e.onDidChangeModelContent(r=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class KNe extends Na{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}class Fm{constructor(e,t,n){this._visiblePosition=e,this._visiblePositionScrollDelta=t,this._cursorPosition=n}static capture(e){let t=null,n=0;if(e.getScrollTop()!==0){const s=e.getVisibleRanges();if(s.length>0){t=s[0].getStartPosition();const r=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-r}}return new Fm(t,n,e.getPosition())}restore(e){if(this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){const t=e.getPosition();if(!this._cursorPosition||!t)return;const n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n)}}const CX={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:mo.text,TERMINALS:"Terminals"};class ZNe{constructor(e){this.data=e}update(){}getData(){return this.data}}const lc={CurrentDragAndDropData:void 0};class Yd extends te{constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof Io&&this._register(t.onDidChange(s=>{this.element&&this.handleActionChangeEvent(s)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Am)),this._actionRunner}set actionRunner(e){this._actionRunner=e}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(kt.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,ks&&this._register(ne(e,Ae.DRAG_START,s=>{var r;return(r=s.dataTransfer)===null||r===void 0?void 0:r.setData(CX.TEXT,this._action.label)}))),this._register(ne(t,Ut.Tap,s=>this.onClick(s,!0))),this._register(ne(t,Ae.MOUSE_DOWN,s=>{n||Et.stop(s,!0),this._action.enabled&&s.button===0&&t.classList.add("active")})),ht&&this._register(ne(t,Ae.CONTEXT_MENU,s=>{s.button===0&&s.ctrlKey===!0&&this.onClick(s)})),this._register(ne(t,Ae.CLICK,s=>{Et.stop(s,!0),this.options&&this.options.isMenu||this.onClick(s)})),this._register(ne(t,Ae.DBLCLICK,s=>{Et.stop(s,!0)})),[Ae.MOUSE_UP,Ae.MOUSE_OUT].forEach(s=>{this._register(ne(t,s,r=>{Et.stop(r),t.classList.remove("active")}))})}onClick(e,t=!1){var n;Et.stop(e,!0);const s=Mr(this._context)?!((n=this.options)===null||n===void 0)&&n.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,s)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}updateTooltip(){}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),super.dispose()}}class uP extends Yd{constructor(e,t,n={}){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=se(this.element,ue("a.action-label"))),this.label&&(this._action.id===ha.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&(se(this.element,ue("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=_({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.label&&(this.label.title=e)}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label&&this.label.classList.remove("codicon")}updateEnabled(){this.getAction().enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element&&this.element.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element&&this.element.classList.add("disabled"))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}}var YNe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class Gc extends te{constructor(e,t={}){var n,s,r,o,a,l;super(),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new z),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new z({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new z),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new z),this.onBeforeRun=this._onBeforeRun.event,this.options=t,this._context=(n=t.context)!==null&&n!==void 0?n:null,this._orientation=(s=this.options.orientation)!==null&&s!==void 0?s:0,this._triggerKeys={keyDown:(o=(r=this.options.triggerKeys)===null||r===void 0?void 0:r.keyDown)!==null&&o!==void 0?o:!1,keys:(l=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&l!==void 0?l:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Am,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun(u=>this._onDidRun.fire(u))),this._register(this._actionRunner.onBeforeRun(u=>this._onBeforeRun.fire(u))),this._actionIds=[],this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",t.animated!==!1&&this.domNode.classList.add("animated");let c,h;switch(this._orientation){case 0:c=[15],h=[17];break;case 1:c=[16],h=[18],this.domNode.className+=" vertical";break}this._register(ne(this.domNode,Ae.KEY_DOWN,u=>{const d=new li(u);let f=!0;const g=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;c&&(d.equals(c[0])||d.equals(c[1]))?f=this.focusPrevious():h&&(d.equals(h[0])||d.equals(h[1]))?f=this.focusNext():d.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():d.equals(14)?f=this.focusFirst():d.equals(13)?f=this.focusLast():d.equals(2)&&g instanceof Yd&&g.trapsArrowNavigation?f=this.focusNext():this.isTriggerKeyEvent(d)?this._triggerKeys.keyDown?this.doTrigger(d):this.triggerKeyDown=!0:f=!1,f&&(d.preventDefault(),d.stopPropagation())})),this._register(ne(this.domNode,Ae.KEY_UP,u=>{const d=new li(u);this.isTriggerKeyEvent(d)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(d)),d.preventDefault(),d.stopPropagation()):(d.equals(2)||d.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register(ym(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(Pp()===this.domNode||!Cl(Pp(),this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role","toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(Cl(Pp(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.viewItems.forEach(t=>t.actionRunner=e))}getContainer(){return this.domNode}push(e,t={}){const n=Array.isArray(e)?e:[e];let s=Cf(t.index)?t.index:null;n.forEach(r=>{const o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation"),this.options.allowContextMenu||this._register(ne(o,Ae.CONTEXT_MENU,l=>{Et.stop(l,!0)}));let a;this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(r)),a||(a=new uP(this.context,r,t)),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(o),this.focusable&&a instanceof Yd&&this.viewItems.length===0&&a.setFocusable(!0),s===null||s<0||s>=this.actionsList.children.length?(this.actionsList.appendChild(o),this.viewItems.push(a),this._actionIds.push(r.id)):(this.actionsList.insertBefore(o,this.actionsList.children[s]),this.viewItems.splice(s,0,a),this._actionIds.splice(s,0,r.id),s++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem)}clear(){at(this.viewItems),this.viewItems=[],this._actionIds=[],Rn(this.actionsList)}length(){return this.viewItems.length}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const s=this.viewItems.findIndex(r=>r.isEnabled());this.focusedItem=s===-1?void 0:s,this.updateFocus()}else n!==void 0&&(this.focusedItem=n),this.updateFocus()}focusFirst(){return this.focusedItem=this.length()>1?1:0,this.focusPrevious()}focusLast(){return this.focusedItem=this.length()<2?0:this.length()-2,this.focusNext()}focusNext(){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const e=this.focusedItem;let t;do{if(this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=e,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,t=this.viewItems[this.focusedItem]}while(this.focusedItem!==e&&this.options.focusOnlyEnabledItems&&!t.isEnabled());return this.updateFocus(),!0}focusPrevious(){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const e=this.focusedItem;let t;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(this.options.preventLoopNavigation)return this.focusedItem=e,!1;this.focusedItem=this.viewItems.length-1}t=this.viewItems[this.focusedItem]}while(this.focusedItem!==e&&this.options.focusOnlyEnabledItems&&!t.isEnabled());return this.updateFocus(!0),!0}updateFocus(e,t){typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t});for(let n=0;n<this.viewItems.length;n++){const s=this.viewItems[n],r=s;if(n===this.focusedItem){let o=!0;hb(r.focus)||(o=!1),this.options.focusOnlyEnabledItems&&hb(s.isEnabled)&&!s.isEnabled()&&(o=!1),o?r.focus(e):this.actionsList.focus({preventScroll:t})}else hb(r.blur)&&r.blur()}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof Yd){const n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}run(e,t){return YNe(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){at(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}}const QNe={IconContribution:"base.contributions.icons"};class XNe{constructor(){this._onDidChange=new z,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:_("iconDefintion.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:_("iconDefintion.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${Gs.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,s){const r=this.iconsById[e];if(r){if(n&&!r.description){r.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return r}let o={id:e,description:n,defaults:t,deprecationMessage:s};this.iconsById[e]=o;let a={$ref:"#/definitions/icons"};return s&&(a.deprecationMessage=s),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconFont(e){return this.iconFontsById[e]}toString(){const e=(r,o)=>r.id.localeCompare(o.id),t=r=>{for(;oi.isThemeIcon(r.defaults);)r=this.iconsById[r.defaults.id];return`codicon codicon-${r?r.id:""}`};let n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const s=Object.keys(this.iconsById).map(r=>this.iconsById[r]);for(const r of s.filter(o=>!!o.description).sort(e))n.push(`|<i class="${t(r)}"></i>|${r.id}|${oi.isThemeIcon(r.defaults)?r.defaults.id:r.id}|${r.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const r of s.filter(o=>!oi.isThemeIcon(o.defaults)).sort(e))n.push(`|<i class="${t(r)}"></i>|${r.id}|`);return n.join(`
`)}}const Tf=new XNe;kn.add(QNe.IconContribution,Tf);function es(i,e,t,n){return Tf.registerIcon(i,e,t,n)}function JNe(){return Tf}function eMe(){for(const i of wx.all)Tf.registerIcon(i.id,i.definition,i.description);wx.onDidRegister(i=>Tf.registerIcon(i.id,i.definition,i.description))}eMe();const SX="vscode://schemas/icons";let xX=kn.as(ZL.JSONContribution);xX.registerSchema(SX,Tf.getIconSchema());const JV=new fi(()=>xX.notifySchemaChanged(SX),200);Tf.onDidChange(()=>{JV.isScheduled()||JV.schedule()});const tMe=es("widget-close",be.close,_("widgetClose","Icon for the close action in widgets."));var iMe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},nMe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},sMe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},AE;const Vy=3;class h_{constructor(e,t,n,s){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=n,this.modifiedLineEnd=s}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}}class EE{constructor(e){this.entries=e}}const rMe=es("diff-review-insert",be.add,_("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),oMe=es("diff-review-remove",be.remove,_("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),aMe=es("diff-review-close",be.close,_("diffReviewCloseIcon","Icon for 'Close' in diff review."));let uD=class sd extends te{constructor(e,t){super(),this._modeService=t,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=ft(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=ft(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new Gc(this.actionBarContainer.domNode)),this._actionBar.push(new Io("diffreview.close",_("label.close","Close"),"close-diff-review "+oi.asClassName(aMe),!0,()=>sMe(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=ft(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=ft(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new Ck(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{this._isVisible&&(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{this._isVisible&&this._render()})),this._register(Ji(this.domNode.domNode,"click",n=>{n.preventDefault();let s=HZ(n.target,"diff-review-row");s&&this._goToRow(s)})),this._register(Ji(this.domNode.domNode,"keydown",n=>{(n.equals(18)||n.equals(2066)||n.equals(530))&&(n.preventDefault(),this._goToRow(this._getNextRow())),(n.equals(16)||n.equals(2064)||n.equals(528))&&(n.preventDefault(),this._goToRow(this._getPrevRow())),(n.equals(9)||n.equals(2057)||n.equals(521)||n.equals(1033))&&(n.preventDefault(),this.hide()),(n.equals(10)||n.equals(3))&&(n.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let s=0,r=this._diffs.length;s<r;s++)if(this._diffs[s]===this._currentDiff){n=s;break}e=this._diffs.length+n-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new q(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let s=0,r=this._diffs.length;s<r;s++)if(this._diffs[s]===this._currentDiff){n=s;break}e=n+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new q(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1,t=this._getCurrentFocusedRow();if(t){let n=parseInt(t.getAttribute("data-line"),10);isNaN(n)||(e=n)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new q(e,1)),this._diffEditor.revealPosition(new q(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){let e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){let e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){let e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){let t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,n){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(n),this._content.setHeight(n),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||e.length===0)return[];const t=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel();return!t||!n?[]:sd._mergeAdjacent(e,t.getLineCount(),n.getLineCount())}static _mergeAdjacent(e,t,n){if(!e||e.length===0)return[];let s=[],r=0;for(let c=0,h=e.length;c<h;c++){const u=e[c],d=u.originalStartLineNumber,f=u.originalEndLineNumber,g=u.modifiedStartLineNumber,p=u.modifiedEndLineNumber;let m=[],v=0;{const b=f===0?d:d-1,w=p===0?g:g-1;let y=1,x=1;if(c>0){const L=e[c-1];L.originalEndLineNumber===0?y=L.originalStartLineNumber+1:y=L.originalEndLineNumber+1,L.modifiedEndLineNumber===0?x=L.modifiedStartLineNumber+1:x=L.modifiedEndLineNumber+1}let k=b-Vy+1,S=w-Vy+1;if(k<y){const L=y-k;k=k+L,S=S+L}if(S<x){const L=x-S;k=k+L,S=S+L}m[v++]=new h_(k,b,S,w)}f!==0&&(m[v++]=new h_(d,f,0,0)),p!==0&&(m[v++]=new h_(0,0,g,p));{const b=f===0?d+1:f+1,w=p===0?g+1:p+1;let y=t,x=n;if(c+1<h){const L=e[c+1];L.originalEndLineNumber===0?y=L.originalStartLineNumber:y=L.originalStartLineNumber-1,L.modifiedEndLineNumber===0?x=L.modifiedStartLineNumber:x=L.modifiedStartLineNumber-1}let k=b+Vy-1,S=w+Vy-1;if(k>y){const L=y-k;k=k+L,S=S+L}if(S>x){const L=x-S;k=k+L,S=S+L}m[v++]=new h_(b,k,w,S)}s[r++]=new EE(m)}let o=s[0].entries,a=[],l=0;for(let c=1,h=s.length;c<h;c++){const u=s[c].entries,d=o[o.length-1],f=u[0];if(d.getType()===0&&f.getType()===0&&f.originalLineStart<=d.originalLineEnd){o[o.length-1]=new h_(d.originalLineStart,f.originalLineEnd,d.modifiedLineStart,f.modifiedLineEnd),o=o.concat(u.slice(1));continue}a[l++]=new EE(o),o=u}return a[l++]=new EE(o),a}_findDiffIndex(e){const t=e.lineNumber;for(let n=0,s=this._diffs.length;n<s;n++){const r=this._diffs[n].entries,o=r[r.length-1].modifiedLineEnd;if(t<=o)return n}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),n=this._diffEditor.getOriginalEditor().getModel(),s=this._diffEditor.getModifiedEditor().getModel(),r=n.getOptions(),o=s.getOptions();if(!this._isVisible||!n||!s){Rn(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});const a=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[a]===this._currentDiff)return;this._currentDiff=this._diffs[a];const l=this._diffs[a].entries;let c=document.createElement("div");c.className="diff-review-table",c.setAttribute("role","list"),c.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),Fn.applyFontInfoSlow(c,t.get(43));let h=0,u=0,d=0,f=0;for(let S=0,L=l.length;S<L;S++){const D=l[S],N=D.originalLineStart,T=D.originalLineEnd,$=D.modifiedLineStart,U=D.modifiedLineEnd;N!==0&&(h===0||N<h)&&(h=N),T!==0&&(u===0||T>u)&&(u=T),$!==0&&(d===0||$<d)&&(d=$),U!==0&&(f===0||U>f)&&(f=U)}let g=document.createElement("div");g.className="diff-review-row";let p=document.createElement("div");p.className="diff-review-cell diff-review-summary";const m=u-h+1,v=f-d+1;p.appendChild(document.createTextNode(`${a+1}/${this._diffs.length}: @@ -${h},${m} +${d},${v} @@`)),g.setAttribute("data-line",String(d));const b=S=>S===0?_("no_lines_changed","no lines changed"):S===1?_("one_line_changed","1 line changed"):_("more_lines_changed","{0} lines changed",S),w=b(m),y=b(v);g.setAttribute("aria-label",_({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",a+1,this._diffs.length,h,w,d,y)),g.appendChild(p),g.setAttribute("role","listitem"),c.appendChild(g);const x=t.get(58);let k=d;for(let S=0,L=l.length;S<L;S++){const D=l[S];sd._renderSection(c,D,k,x,this._width,e,n,r,t,s,o,this._modeService.languageIdCodec),D.modifiedLineStart!==0&&(k=D.modifiedLineEnd)}Rn(this._content.domNode),this._content.domNode.appendChild(c),this.scrollbar.scanDomNode()}static _renderSection(e,t,n,s,r,o,a,l,c,h,u,d){const f=t.getType();let g="diff-review-row",p="";const m="diff-review-spacer";let v=null;switch(f){case 1:g="diff-review-row line-insert",p=" char-insert",v=rMe;break;case 2:g="diff-review-row line-delete",p=" char-delete",v=oMe;break}const b=t.originalLineStart,w=t.originalLineEnd,y=t.modifiedLineStart,x=t.modifiedLineEnd,k=Math.max(x-y,w-b),S=o.get(129),L=S.glyphMarginWidth+S.lineNumbersWidth,D=c.get(129),N=10+D.glyphMarginWidth+D.lineNumbersWidth;for(let T=0;T<=k;T++){const $=b===0?0:b+T,U=y===0?0:y+T,ee=document.createElement("div");ee.style.minWidth=r+"px",ee.className=g,ee.setAttribute("role","listitem"),U!==0&&(n=U),ee.setAttribute("data-line",String(n));let ce=document.createElement("div");ce.className="diff-review-cell",ce.style.height=`${s}px`,ee.appendChild(ce);const fe=document.createElement("span");fe.style.width=L+"px",fe.style.minWidth=L+"px",fe.className="diff-review-line-number"+p,$!==0?fe.appendChild(document.createTextNode(String($))):fe.innerText=" ",ce.appendChild(fe);const Ce=document.createElement("span");Ce.style.width=N+"px",Ce.style.minWidth=N+"px",Ce.style.paddingRight="10px",Ce.className="diff-review-line-number"+p,U!==0?Ce.appendChild(document.createTextNode(String(U))):Ce.innerText=" ",ce.appendChild(Ce);const Se=document.createElement("span");if(Se.className=m,v){const ze=document.createElement("span");ze.className=oi.asClassName(v),ze.innerText="  ",Se.appendChild(ze)}else Se.innerText="  ";ce.appendChild(Se);let me;if(U!==0){let ze=this._renderLine(h,c,u.tabSize,U,d);sd._ttPolicy&&(ze=sd._ttPolicy.createHTML(ze)),ce.insertAdjacentHTML("beforeend",ze),me=h.getLineContent(U)}else{let ze=this._renderLine(a,o,l.tabSize,$,d);sd._ttPolicy&&(ze=sd._ttPolicy.createHTML(ze)),ce.insertAdjacentHTML("beforeend",ze),me=a.getLineContent($)}me.length===0&&(me=_("blankLine","blank"));let Dt="";switch(f){case 0:$===U?Dt=_({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",me,$):Dt=_("equalLine","{0} original line {1} modified line {2}",me,$,U);break;case 1:Dt=_("insertLine","+ {0} modified line {1}",me,U);break;case 2:Dt=_("deleteLine","- {0} original line {1}",me,$);break}ee.setAttribute("aria-label",Dt),e.appendChild(ee)}}static _renderLine(e,t,n,s,r){const o=e.getLineContent(s),a=t.get(43),l=bn.createEmpty(o,r),c=Cr.isBasicASCII(o,e.mightContainNonBasicASCII()),h=Cr.containsRTL(o,c,e.mightContainRTL());return XL(new tg(a.isMonospace&&!t.get(29),a.canUseHalfwidthRightwardsArrow,o,!1,c,h,0,l,[],n,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(104),t.get(87),t.get(82),t.get(44)!==hr.OFF,null)).html}};uD._ttPolicy=(AE=window.trustedTypes)===null||AE===void 0?void 0:AE.createPolicy("diffReview",{createHTML:i=>i});uD=iMe([nMe(1,Os)],uD);Jt((i,e)=>{const t=i.getColor(QQ);t&&e.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${t}; }`);const n=i.getColor(Lw);n&&e.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${n} 0 -6px 6px -6px inset; }`)});class lMe extends gi{constructor(){super({id:"editor.action.diffReview.next",label:_("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:xe.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){const n=DX(e);n&&n.diffReviewNext()}}class cMe extends gi{constructor(){super({id:"editor.action.diffReview.prev",label:_("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:xe.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,t){const n=DX(e);n&&n.diffReviewPrev()}}function DX(i){const e=i.get(ii),t=e.listDiffEditors(),n=e.getActiveCodeEditor();if(!n)return null;for(let s=0,r=t.length;s<r;s++){const o=t[s];if(o.getModifiedEditor().getId()===n.getId()||o.getOriginalEditor().getId()===n.getId())return o}return null}rt(lMe);rt(cMe);const og=mt("contextViewService"),ag=mt("contextMenuService");var IE=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class hMe extends te{constructor(e,t,n,s,r,o){super(),this._viewZoneId=e,this._marginDomNode=t,this.editor=n,this.diff=s,this._contextMenuService=r,this._clipboardService=o,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=be.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const a=n.getOption(58),l=n.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${a}px`,this._diffActions.style.lineHeight=`${a}px`,this._marginDomNode.appendChild(this._diffActions);const c=[],h=s.modifiedEndLineNumber===0;c.push(new Io("diff.clipboard.copyDeletedContent",h?s.originalEndLineNumber>s.modifiedStartLineNumber?_("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):_("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):s.originalEndLineNumber>s.modifiedStartLineNumber?_("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):_("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>IE(this,void 0,void 0,function*(){const p=new F(s.originalStartLineNumber,1,s.originalEndLineNumber+1,1),m=s.originalModel.getValueInRange(p);yield this._clipboardService.writeText(m)})));let u=0,d;s.originalEndLineNumber>s.modifiedStartLineNumber&&(d=new Io("diff.clipboard.copyDeletedLineContent",h?_("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",s.originalStartLineNumber):_("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",s.originalStartLineNumber),void 0,!0,()=>IE(this,void 0,void 0,function*(){const p=s.originalModel.getLineContent(s.originalStartLineNumber+u);if(p===""){const m=s.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(m===0?`
`:`\r
`)}else yield this._clipboardService.writeText(p)})),c.push(d)),n.getOption(80)||c.push(new Io("diff.inline.revertChange",_("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>IE(this,void 0,void 0,function*(){const p=new F(s.originalStartLineNumber,1,s.originalEndLineNumber,s.originalModel.getLineMaxColumn(s.originalEndLineNumber)),m=s.originalModel.getValueInRange(p);if(s.modifiedEndLineNumber===0){const v=n.getModel().getLineMaxColumn(s.modifiedStartLineNumber);n.executeEdits("diffEditor",[{range:new F(s.modifiedStartLineNumber,v,s.modifiedStartLineNumber,v),text:l+m}])}else{const v=n.getModel().getLineMaxColumn(s.modifiedEndLineNumber);n.executeEdits("diffEditor",[{range:new F(s.modifiedStartLineNumber,1,s.modifiedEndLineNumber,v),text:m}])}})));const g=(p,m)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:p,y:m}),getActions:()=>(d&&(d.label=h?_("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",s.originalStartLineNumber+u):_("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",s.originalStartLineNumber+u)),c),autoSelectFirstItem:!0})};this._register(Ji(this._diffActions,"mousedown",p=>{const{top:m,height:v}=Nn(this._diffActions);let b=Math.floor(a/3);p.preventDefault(),g(p.posx,m+v+b)})),this._register(n.onMouseMove(p=>{p.target.type===8||p.target.type===5?p.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,u=this._updateLightBulbPosition(this._marginDomNode,p.event.browserEvent.y,a)):this.visibility=!1:this.visibility=!1})),this._register(n.onMouseDown(p=>{p.event.rightButton&&(p.target.type===8||p.target.type===5)&&p.target.detail.viewZoneId===this._viewZoneId&&(p.event.preventDefault(),u=this._updateLightBulbPosition(this._marginDomNode,p.event.browserEvent.y,a),g(p.event.posx,p.event.posy+a))}))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}_updateLightBulbPosition(e,t,n){const{top:s}=Nn(e),r=t-s,o=Math.floor(r/n),a=o*n;if(this._diffActions.style.top=`${a}px`,this.diff.viewLineCounts){let l=0;for(let c=0;c<this.diff.viewLineCounts.length;c++)if(l+=this.diff.viewLineCounts[c],o<l)return c}return o}}const lg=mt("clipboardService");class xk{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}}xk.None=Object.freeze({report(){}});const R0=mt("editorProgressService");var uMe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},tc=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},TE;class eW{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(t=>!this._zonesMap[String(t.id)])}clean(e){this._zones.length>0&&e.changeViewZones(t=>{for(const n of this._zones)t.removeZone(n)}),this._zones=[],this._zonesMap={},this._decorations=e.deltaDecorations(this._decorations,[])}apply(e,t,n,s){const r=s?Fm.capture(e):null;e.changeViewZones(o=>{var a;for(const l of this._zones)o.removeZone(l);for(const l of this._inlineDiffMargins)l.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let l=0,c=n.zones.length;l<c;l++){const h=n.zones[l];h.suppressMouseDown=!0;const u=o.addZone(h);this._zones.push(u),this._zonesMap[String(u)]=!0,n.zones[l].diff&&h.marginDomNode&&(h.suppressMouseDown=!1,((a=n.zones[l].diff)===null||a===void 0?void 0:a.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new hMe(u,h.marginDomNode,e,n.zones[l].diff,this._contextMenuService,this._clipboardService)))}}),r&&r.restore(e),this._decorations=e.deltaDecorations(this._decorations,n.decorations),t&&t.setZones(n.overviewZones)}}let dMe=0;const fMe=es("diff-insert",be.add,_("diffInsertIcon","Line decoration for inserts in the diff editor.")),LX=es("diff-remove",be.remove,_("diffRemoveIcon","Line decoration for removals in the diff editor.")),tW=(TE=window.trustedTypes)===null||TE===void 0?void 0:TE.createPolicy("diffEditorWidget",{createHTML:i=>i});let wu=class An extends te{constructor(e,t,n,s,r,o,a,l,c,h,u,d){super(),this._editorProgressService=d,this._onDidDispose=this._register(new z),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new z),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new z),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=r,this._codeEditorService=l,this._contextKeyService=this._register(o.createScoped(e)),this._instantiationService=a.createChild(new Jv([$e,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=c,this._notificationService=h,this._id=++dMe,this._state=0,this._updatingDiffProgress=null,this._domElement=e,t=t||{},this._options=sW(t,{enableSplitViewResizing:!0,renderSideBySide:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),typeof t.isInEmbeddedEditor<"u"?this._contextKeyService.createKey("isInEmbeddedDiffEditor",t.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new fi(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=An._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=ft(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(Ji(this._overviewDomElement,"mousedown",g=>{this._modifiedEditor.delegateVerticalScrollbarMouseDown(g)})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new eW(u,s),this._modifiedEditorState=new eW(u,s),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new gQ(this._containerDomElement,t.dimension,()=>this._onDidContainerSizeChanged())),t.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(t,n.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(t,n.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=a.createInstance(uD,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new Sc(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new nW(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(c.onDidColorThemeChange(g=>{this._strategy&&this._strategy.applyColors(g)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=An._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));const f=Hp.getDiffEditorContributions();for(const g of f)try{this._register(a.createInstance(g.ctor,this))}catch(p){Ke(p)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let n="monaco-diff-editor monaco-editor-background ";return t&&(n+="side-by-side "),n+=Ux(e.type),n}_recreateOverviewRulers(){this._options.renderOverviewRuler&&(this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),t);this._register(n.onDidScrollChange(r=>{this._isHandlingScrollEvent||!r.scrollTopChanged&&!r.scrollLeftChanged&&!r.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(r=>{n.getModel()&&(r.hasChanged(43)&&this._updateDecorationsRunner.schedule(),r.hasChanged(130)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const s=this._contextKeyService.createKey("isInDiffLeftEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>s.set(!0))),this._register(n.onDidBlurEditorWidget(()=>s.set(!1))),this._register(n.onDidContentSizeChange(r=>{const o=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+An.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:o,contentHeightChanged:r.contentHeightChanged,contentWidthChanged:r.contentWidthChanged})})),n}_createRightHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),t);this._register(n.onDidScrollChange(r=>{this._isHandlingScrollEvent||!r.scrollTopChanged&&!r.scrollLeftChanged&&!r.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(r=>{n.getModel()&&(r.hasChanged(43)&&this._updateDecorationsRunner.schedule(),r.hasChanged(130)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(n.onDidChangeModelOptions(r=>{r.tabSize&&this._updateDecorationsRunner.schedule()}));const s=this._contextKeyService.createKey("isInDiffRightEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>s.set(!0))),this._register(n.onDidBlurEditorWidget(()=>s.set(!1))),this._register(n.onDidContentSizeChange(r=>{const o=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+An.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:o,contentHeightChanged:r.contentHeightChanged,contentWidthChanged:r.contentWidthChanged})})),n}_createInnerEditor(e,t,n,s){return e.createInstance(e1,t,n,s)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return UL.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){const t=sW(e,this._options),n=_Me(this._options,t);this._options=t;const s=n.ignoreTrimWhitespace||n.renderIndicators,r=this._isVisible&&(n.maxComputationTime||n.maxFileSize);s?this._beginUpdateDecorations():r&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),n.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new Sc(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new nW(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=An._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),n.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._recreateOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e){this._modifiedEditor.setPosition(e)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e){this._modifiedEditor.setSelection(e)}setSelections(e){this._modifiedEditor.setSelections(e)}revealLines(e,t,n=0){this._modifiedEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._modifiedEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._modifiedEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,s=!0){this._modifiedEditor.revealRange(e,t,n,s)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){const e=this._originalEditor.saveViewState(),t=this._modifiedEditor.saveViewState();return{original:e,modified:t}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,n){this._modifiedEditor.trigger(e,t,n)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const e=this._elementSizeObserver.getHeight(),t=this._getReviewHeight(),n=An.ENTIRE_DIFF_OVERVIEW_WIDTH-2*An.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:An.ONE_OVERVIEW_WIDTH,right:n+An.ONE_OVERVIEW_WIDTH,height:e-t}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:An.ONE_OVERVIEW_WIDTH,height:e-t}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),An.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t?!0:!e||!t?!1:e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const e=this._originalEditor.getModel(),t=this._modifiedEditor.getModel();if(!e||!t)return;this._diffComputationToken++;const n=this._diffComputationToken,s=this._options.maxFileSize*1024*1024,r=o=>{const a=o.getValueLength();return s===0||a<=s};if(!r(e)||!r(t)){(!An._equals(e.uri,this._lastOriginalWarning)||!An._equals(t.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=t.uri,this._notificationService.warn(_("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._setState(1),this._editorWorkerService.computeDiff(e.uri,t.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then(o=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=o,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},o=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),n=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),s=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,t,n);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,s.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,s.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){const t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?t.wordWrapOverride1=this._options.diffWordWrap:t.wordWrapOverride1="off",e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.readOnly=!this._options.originalEditable,t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(e){const t=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(t.ariaLabel=e.modifiedAriaLabel),t.wordWrapOverride1=this._options.diffWordWrap,t.revealHorizontalRightPadding=Xf.revealHorizontalRightPadding.defaultValue+An.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const e=this._elementSizeObserver.getWidth(),t=this._elementSizeObserver.getHeight(),n=this._getReviewHeight(),s=this._strategy.layout();this._originalDomNode.style.width=s+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-s+"px",this._modifiedDomNode.style.left=s+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=t-n+"px",this._overviewDomElement.style.width=An.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-An.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(An.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:s,height:t-n}),this._modifiedEditor.layout({width:e-s-(this._options.renderOverviewRuler?An.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:t-n}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(t-n,e,n),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const t=this._modifiedEditor.getScrollTop(),n=this._modifiedEditor.getScrollHeight(),s=Math.max(0,e.height),r=Math.max(0,s-2*0),o=n>0?r/n:0,a=Math.max(0,Math.floor(e.height*o)),l=Math.floor(t*o);return{height:a,top:l}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){const n=this._diffComputationResult?this._diffComputationResult.changes:[];if(n.length===0||e<t(n[0]))return null;let s=0,r=n.length-1;for(;s<r;){const o=Math.floor((s+r)/2),a=t(n[o]),l=o+1<=r?t(n[o+1]):1073741824;e<a?r=o-1:e>=l?s=o+1:(s=o,r=o)}return n[s]}_getEquivalentLineForOriginalLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.originalStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),s=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),r=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,o=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-n;return a<=r?s+Math.min(a,o):s+o-r+a}_getEquivalentLineForModifiedLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.modifiedStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),s=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),r=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,o=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-s;return a<=o?n+Math.min(a,r):n+r-o+a}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};wu.ONE_OVERVIEW_WIDTH=15;wu.ENTIRE_DIFF_OVERVIEW_WIDTH=30;wu.UPDATE_DIFF_DECORATIONS_DELAY=200;wu=uMe([tc(3,lg),tc(4,Vu),tc(5,$e),tc(6,Wt),tc(7,ii),tc(8,si),tc(9,Vn),tc(10,ag),tc(11,R0)],wu);class kX extends te{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const t=(e.getColor(UQ)||HM).transparent(2),n=(e.getColor($Q)||UM).transparent(2),s=!t.equals(this._insertColor)||!n.equals(this._removeColor);return this._insertColor=t,this._removeColor=n,s}getEditorsDiffDecorations(e,t,n,s,r){r=r.sort((c,h)=>c.afterLineNumber-h.afterLineNumber),s=s.sort((c,h)=>c.afterLineNumber-h.afterLineNumber);const o=this._getViewZones(e,s,r,n),a=this._getOriginalEditorDecorations(e,t,n),l=this._getModifiedEditorDecorations(e,t,n);return{original:{decorations:a.decorations,overviewZones:a.overviewZones,zones:o.original},modified:{decorations:l.decorations,overviewZones:l.overviewZones,zones:o.modified}}}}class iW{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class Id{constructor(e,t,n,s,r){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=n,this._originalEditor=s,this._modifiedEditor=r}static _getViewLineCount(e,t,n){const s=e.getModel(),r=e._getViewModel();if(s&&r){const o=t1(s,r,t,n);return o.endLineNumber-o.startLineNumber+1}return n-t+1}getViewZones(){const e=this._originalEditor.getOption(58),t=this._modifiedEditor.getOption(58),n=this._originalEditor.getOption(130).wrappingColumn!==-1,s=this._modifiedEditor.getOption(130).wrappingColumn!==-1,r=n||s,o=this._originalEditor.getModel(),a=this._originalEditor._getViewModel().coordinatesConverter,l=this._modifiedEditor._getViewModel().coordinatesConverter,c={original:[],modified:[]};let h=0,u=0,d=0,f=0,g=0,p=0;const m=(k,S)=>k.afterLineNumber-S.afterLineNumber,v=(k,S)=>{if(S.domNode===null&&k.length>0){const L=k[k.length-1];if(L.afterLineNumber===S.afterLineNumber&&L.domNode===null){L.heightInLines+=S.heightInLines;return}}k.push(S)},b=new iW(this._modifiedForeignVZ),w=new iW(this._originalForeignVZ);let y=1,x=1;for(let k=0,S=this._lineChanges.length;k<=S;k++){const L=k<S?this._lineChanges[k]:null;L!==null?(d=L.originalStartLineNumber+(L.originalEndLineNumber>0?-1:0),f=L.modifiedStartLineNumber+(L.modifiedEndLineNumber>0?-1:0),u=L.originalEndLineNumber>0?Id._getViewLineCount(this._originalEditor,L.originalStartLineNumber,L.originalEndLineNumber):0,h=L.modifiedEndLineNumber>0?Id._getViewLineCount(this._modifiedEditor,L.modifiedStartLineNumber,L.modifiedEndLineNumber):0,g=Math.max(L.originalStartLineNumber,L.originalEndLineNumber),p=Math.max(L.modifiedStartLineNumber,L.modifiedEndLineNumber)):(d+=1e7+u,f+=1e7+h,g=d,p=f);let D=[],N=[];if(r){let U;L?L.originalEndLineNumber>0?U=L.originalStartLineNumber-y:U=L.modifiedStartLineNumber-x:U=o.getLineCount()-y;for(let ee=0;ee<U;ee++){const ce=y+ee,fe=x+ee,Ce=a.getModelLineViewLineCount(ce),Se=l.getModelLineViewLineCount(fe);Ce<Se?D.push({afterLineNumber:ce,heightInLines:Se-Ce,domNode:null,marginDomNode:null}):Ce>Se&&N.push({afterLineNumber:fe,heightInLines:Ce-Se,domNode:null,marginDomNode:null})}L&&(y=(L.originalEndLineNumber>0?L.originalEndLineNumber:L.originalStartLineNumber)+1,x=(L.modifiedEndLineNumber>0?L.modifiedEndLineNumber:L.modifiedStartLineNumber)+1)}for(;b.current&&b.current.afterLineNumber<=p;){let U;b.current.afterLineNumber<=f?U=d-f+b.current.afterLineNumber:U=g;let ee=null;L&&L.modifiedStartLineNumber<=b.current.afterLineNumber&&b.current.afterLineNumber<=L.modifiedEndLineNumber&&(ee=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),D.push({afterLineNumber:U,heightInLines:b.current.height/t,domNode:null,marginDomNode:ee}),b.advance()}for(;w.current&&w.current.afterLineNumber<=g;){let U;w.current.afterLineNumber<=d?U=f-d+w.current.afterLineNumber:U=p,N.push({afterLineNumber:U,heightInLines:w.current.height/e,domNode:null}),w.advance()}if(L!==null&&Zp(L)){const U=this._produceOriginalFromDiff(L,u,h);U&&D.push(U)}if(L!==null&&Yp(L)){const U=this._produceModifiedFromDiff(L,u,h);U&&N.push(U)}let T=0,$=0;for(D=D.sort(m),N=N.sort(m);T<D.length&&$<N.length;){const U=D[T],ee=N[$],ce=U.afterLineNumber-d,fe=ee.afterLineNumber-f;ce<fe?(v(c.original,U),T++):fe<ce?(v(c.modified,ee),$++):U.shouldNotShrink?(v(c.original,U),T++):ee.shouldNotShrink?(v(c.modified,ee),$++):U.heightInLines>=ee.heightInLines?(U.heightInLines-=ee.heightInLines,$++):(ee.heightInLines-=U.heightInLines,T++)}for(;T<D.length;)v(c.original,D[T]),T++;for(;$<N.length;)v(c.modified,N[$]),$++}return{original:Id._ensureDomNodes(c.original),modified:Id._ensureDomNodes(c.modified)}}static _ensureDomNodes(e){return e.map(t=>(t.domNode||(t.domNode=AX()),t))}}function _c(i,e,t,n,s){return{range:new F(i,e,t,n),options:s}}const ws={charDelete:lt.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:lt.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:lt.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:lt.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:lt.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"line-insert",isWholeLine:!0}),lineInsertWithSign:lt.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+oi.asClassName(fMe),marginClassName:"line-insert",isWholeLine:!0}),lineDelete:lt.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"line-delete",isWholeLine:!0}),lineDeleteWithSign:lt.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+oi.asClassName(LX),marginClassName:"line-delete",isWholeLine:!0}),lineDeleteMargin:lt.register({description:"diff-editor-line-delete-margin",marginClassName:"line-delete"})};class Sc extends kX{constructor(e,t){super(e),this._disableSash=t===!1,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new Tn(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(n=>this._onSashDrag(n)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){const t=e===!1;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?wu.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let s=Math.floor((e||.5)*n);const r=Math.floor(.5*n);return s=this._disableSash?r:s||r,n>Sc.MINIMUM_EDITOR_WIDTH*2?(s<Sc.MINIMUM_EDITOR_WIDTH&&(s=Sc.MINIMUM_EDITOR_WIDTH),s>n-Sc.MINIMUM_EDITOR_WIDTH&&(s=n-Sc.MINIMUM_EDITOR_WIDTH)):s=r,this._sashPosition!==s&&(this._sashPosition=s,this._sash.layout()),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?wu.ENTIRE_DIFF_OVERVIEW_WIDTH:0),s=this.layout((this._startSashPosition+(e.currentX-e.startX))/n);this._sashRatio=s/n,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,t,n){const s=this._dataSource.getOriginalEditor(),r=this._dataSource.getModifiedEditor();return new gMe(e,t,n,s,r).getViewZones()}_getOriginalEditorDecorations(e,t,n){const s=this._dataSource.getOriginalEditor(),r=String(this._removeColor),o={decorations:[],overviewZones:[]},a=s.getModel(),l=s._getViewModel();for(const c of e)if(Yp(c)){o.decorations.push({range:new F(c.originalStartLineNumber,1,c.originalEndLineNumber,1073741824),options:n?ws.lineDeleteWithSign:ws.lineDelete}),(!Zp(c)||!c.charChanges)&&o.decorations.push(_c(c.originalStartLineNumber,1,c.originalEndLineNumber,1073741824,ws.charDeleteWholeLine));const h=t1(a,l,c.originalStartLineNumber,c.originalEndLineNumber);if(o.overviewZones.push(new Yv(h.startLineNumber,h.endLineNumber,r)),c.charChanges){for(const u of c.charChanges)if(Yp(u))if(t)for(let d=u.originalStartLineNumber;d<=u.originalEndLineNumber;d++){let f,g;d===u.originalStartLineNumber?f=u.originalStartColumn:f=a.getLineFirstNonWhitespaceColumn(d),d===u.originalEndLineNumber?g=u.originalEndColumn:g=a.getLineLastNonWhitespaceColumn(d),o.decorations.push(_c(d,f,d,g,ws.charDelete))}else o.decorations.push(_c(u.originalStartLineNumber,u.originalStartColumn,u.originalEndLineNumber,u.originalEndColumn,ws.charDelete))}}return o}_getModifiedEditorDecorations(e,t,n){const s=this._dataSource.getModifiedEditor(),r=String(this._insertColor),o={decorations:[],overviewZones:[]},a=s.getModel(),l=s._getViewModel();for(const c of e)if(Zp(c)){o.decorations.push({range:new F(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,1073741824),options:n?ws.lineInsertWithSign:ws.lineInsert}),(!Yp(c)||!c.charChanges)&&o.decorations.push(_c(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,1073741824,ws.charInsertWholeLine));const h=t1(a,l,c.modifiedStartLineNumber,c.modifiedEndLineNumber);if(o.overviewZones.push(new Yv(h.startLineNumber,h.endLineNumber,r)),c.charChanges){for(const u of c.charChanges)if(Zp(u))if(t)for(let d=u.modifiedStartLineNumber;d<=u.modifiedEndLineNumber;d++){let f,g;d===u.modifiedStartLineNumber?f=u.modifiedStartColumn:f=a.getLineFirstNonWhitespaceColumn(d),d===u.modifiedEndLineNumber?g=u.modifiedEndColumn:g=a.getLineLastNonWhitespaceColumn(d),o.decorations.push(_c(d,f,d,g,ws.charInsert))}else o.decorations.push(_c(u.modifiedStartLineNumber,u.modifiedStartColumn,u.modifiedEndLineNumber,u.modifiedEndColumn,ws.charInsert))}}return o}}Sc.MINIMUM_EDITOR_WIDTH=100;class gMe extends Id{constructor(e,t,n,s,r){super(e,t,n,s,r)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,n){return n>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n-t,domNode:null}:null}_produceModifiedFromDiff(e,t,n){return t>n?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-n,domNode:null}:null}}class nW extends kX{constructor(e,t){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(n=>{this._decorationsLeft!==n.decorationsLeft&&(this._decorationsLeft=n.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,n,s){const r=this._dataSource.getOriginalEditor(),o=this._dataSource.getModifiedEditor();return new pMe(e,t,n,r,o,s).getViewZones()}_getOriginalEditorDecorations(e,t,n){const s=String(this._removeColor),r={decorations:[],overviewZones:[]},o=this._dataSource.getOriginalEditor(),a=o.getModel(),l=o._getViewModel();for(const c of e)if(Yp(c)){r.decorations.push({range:new F(c.originalStartLineNumber,1,c.originalEndLineNumber,1073741824),options:ws.lineDeleteMargin});const h=t1(a,l,c.originalStartLineNumber,c.originalEndLineNumber);r.overviewZones.push(new Yv(h.startLineNumber,h.endLineNumber,s))}return r}_getModifiedEditorDecorations(e,t,n){const s=this._dataSource.getModifiedEditor(),r=String(this._insertColor),o={decorations:[],overviewZones:[]},a=s.getModel(),l=s._getViewModel();for(const c of e)if(Zp(c)){o.decorations.push({range:new F(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,1073741824),options:n?ws.lineInsertWithSign:ws.lineInsert});const h=t1(a,l,c.modifiedStartLineNumber,c.modifiedEndLineNumber);if(o.overviewZones.push(new Yv(h.startLineNumber,h.endLineNumber,r)),c.charChanges){for(const u of c.charChanges)if(Zp(u))if(t)for(let d=u.modifiedStartLineNumber;d<=u.modifiedEndLineNumber;d++){let f,g;d===u.modifiedStartLineNumber?f=u.modifiedStartColumn:f=a.getLineFirstNonWhitespaceColumn(d),d===u.modifiedEndLineNumber?g=u.modifiedEndColumn:g=a.getLineLastNonWhitespaceColumn(d),o.decorations.push(_c(d,f,d,g,ws.charInsert))}else o.decorations.push(_c(u.modifiedStartLineNumber,u.modifiedStartColumn,u.modifiedEndLineNumber,u.modifiedEndColumn,ws.charInsert))}else o.decorations.push(_c(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,1073741824,ws.charInsertWholeLine))}return o}layout(){return Math.max(5,this._decorationsLeft)}}class pMe extends Id{constructor(e,t,n,s,r,o){super(e,t,n,s,r),this._originalModel=s.getModel(),this._renderIndicators=o,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,n){const s=document.createElement("div");return s.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n,domNode:document.createElement("div"),marginDomNode:s}}_produceModifiedFromDiff(e,t,n){const s=document.createElement("div");s.className=`view-lines line-delete ${Kd}`;const r=document.createElement("div");r.className="inline-deleted-margin-view-zone";const o={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:s,marginDomNode:r,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(o),o}_finalize(e){const t=this._modifiedEditor.getOptions(),n=this._modifiedEditor.getModel().getOptions().tabSize,s=t.get(43),r=t.get(29),o=s.typicalHalfwidthCharacterWidth,a=t.get(92),l=this._originalModel.mightContainNonBasicASCII(),c=this._originalModel.mightContainRTL(),h=t.get(58),d=t.get(129).decorationsWidth,f=t.get(104),g=t.get(87),p=t.get(82),m=t.get(44),v=this._lineBreaksComputer.finalize();let b=0;for(let w=0;w<this._pendingLineChange.length;w++){const y=this._pendingLineChange[w],x=this._pendingViewZones[w],k=x.domNode;Fn.applyFontInfoSlow(k,s);const S=x.marginDomNode;Fn.applyFontInfoSlow(S,s);const L=[];if(y.charChanges)for(const fe of y.charChanges)Yp(fe)&&L.push(new pb(new F(fe.originalStartLineNumber,fe.originalStartColumn,fe.originalEndLineNumber,fe.originalEndColumn),"char-delete",0));const D=L.length>0,N=Sf(1e4);let T=0,$=0,U=null;for(let fe=y.originalStartLineNumber;fe<=y.originalEndLineNumber;fe++){const Ce=fe-y.originalStartLineNumber,Se=this._originalModel.getLineTokens(fe),me=Se.getLineContent(),Dt=v[b++],ze=br.filter(L,fe,1,me.length+1);if(Dt){let Ge=0;for(const nt of Dt.breakOffsets){const Vi=Se.sliceAndInflate(Ge,nt,0),wn=me.substring(Ge,nt);T=Math.max(T,this._renderOriginalLine($++,wn,Vi,br.extractWrapped(ze,Ge,nt),D,l,c,s,r,h,d,f,g,p,m,n,N,S)),Ge=nt}for(U||(U=[]);U.length<Ce;)U[U.length]=1;U[Ce]=Dt.breakOffsets.length,x.heightInLines+=Dt.breakOffsets.length-1;const Lt=document.createElement("div");Lt.className="line-delete",e.original.push({afterLineNumber:fe,afterColumn:0,heightInLines:Dt.breakOffsets.length-1,domNode:AX(),marginDomNode:Lt})}else T=Math.max(T,this._renderOriginalLine($++,me,Se,ze,D,l,c,s,r,h,d,f,g,p,m,n,N,S))}T+=a;const ee=N.build(),ce=tW?tW.createHTML(ee):ee;if(k.innerHTML=ce,x.minWidthInPx=T*o,U){const fe=y.originalEndLineNumber-y.originalStartLineNumber;for(;U.length<=fe;)U[U.length]=1}x.diff.viewLineCounts=U}e.original.sort((w,y)=>w.afterLineNumber-y.afterLineNumber)}_renderOriginalLine(e,t,n,s,r,o,a,l,c,h,u,d,f,g,p,m,v,b){v.appendASCIIString('<div class="view-line'),r||v.appendASCIIString(" char-delete"),v.appendASCIIString('" style="top:'),v.appendASCIIString(String(e*h)),v.appendASCIIString('px;width:1000000px;">');const w=Cr.isBasicASCII(t,o),y=Cr.containsRTL(t,w,a),x=QL(new tg(l.isMonospace&&!c,l.canUseHalfwidthRightwardsArrow,t,!1,w,y,0,n,s,m,0,l.spaceWidth,l.middotWidth,l.wsmiddotWidth,d,f,g,p!==hr.OFF,null),v);if(v.appendASCIIString("</div>"),this._renderIndicators){const k=document.createElement("div");k.className=`delete-sign ${oi.asClassName(LX)}`,k.setAttribute("style",`position:absolute;top:${e*h}px;width:${u}px;height:${h}px;right:0;`),b.appendChild(k)}return x.characterMapping.getAbsoluteOffset(x.characterMapping.length)}}function mMe(i,e){return ys(i,e,["off","on","inherit"])}function Zp(i){return i.modifiedEndLineNumber>0}function Yp(i){return i.originalEndLineNumber>0}function AX(){const i=document.createElement("div");return i.className="diagonal-fill",i}function t1(i,e,t,n){const s=i.getLineCount();return t=Math.min(s,Math.max(1,t)),n=Math.min(s,Math.max(1,n)),e.coordinatesConverter.convertModelRangeToViewRange(new F(t,i.getLineMinColumn(t),n,i.getLineMaxColumn(n)))}function sW(i,e){return{enableSplitViewResizing:Te(i.enableSplitViewResizing,e.enableSplitViewResizing),renderSideBySide:Te(i.renderSideBySide,e.renderSideBySide),maxComputationTime:sN(i.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:sN(i.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:Te(i.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:Te(i.renderIndicators,e.renderIndicators),originalEditable:Te(i.originalEditable,e.originalEditable),diffCodeLens:Te(i.diffCodeLens,e.diffCodeLens),renderOverviewRuler:Te(i.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:mMe(i.diffWordWrap,e.diffWordWrap)}}function _Me(i,e){return{enableSplitViewResizing:i.enableSplitViewResizing!==e.enableSplitViewResizing,renderSideBySide:i.renderSideBySide!==e.renderSideBySide,maxComputationTime:i.maxComputationTime!==e.maxComputationTime,maxFileSize:i.maxFileSize!==e.maxFileSize,ignoreTrimWhitespace:i.ignoreTrimWhitespace!==e.ignoreTrimWhitespace,renderIndicators:i.renderIndicators!==e.renderIndicators,originalEditable:i.originalEditable!==e.originalEditable,diffCodeLens:i.diffCodeLens!==e.diffCodeLens,renderOverviewRuler:i.renderOverviewRuler!==e.renderOverviewRuler,diffWordWrap:i.diffWordWrap!==e.diffWordWrap}}Jt((i,e)=>{const t=i.getColor(UQ);t&&(e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${t}; }`));const n=i.getColor($Q);n&&(e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { background-color: ${n}; }`),e.addRule(`.monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: ${n}; }`),e.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${n}; }`));const s=i.getColor(RAe);s&&e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${i.type==="hc"?"dashed":"solid"} ${s}; }`);const r=i.getColor(OAe);r&&e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${i.type==="hc"?"dashed":"solid"} ${r}; }`);const o=i.getColor(Lw);o&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${o}; }`);const a=i.getColor(PAe);a&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${a}; }`);const l=i.getColor(Db);l&&e.addRule(`
			.monaco-diff-editor .diffViewport {
				background: ${l};
			}
		`);const c=i.getColor(Lb);c&&e.addRule(`
			.monaco-diff-editor .diffViewport:hover {
				background: ${c};
			}
		`);const h=i.getColor(kb);h&&e.addRule(`
			.monaco-diff-editor .diffViewport:active {
				background: ${h};
			}
		`);const u=i.getColor(FAe);e.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${u} 12.5%,
			#0000 12.5%, #0000 50%,
			${u} 50%, ${u} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});const Aw=mt("themeService"),Bi=mt("keybindingService");class bMe extends te{constructor(){super(),this._onCodeEditorAdd=this._register(new z),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new z),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new z),this._onDiffEditorRemove=this._register(new z),this._onDecorationTypeRegistered=this._register(new z),this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null)}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}setModelProperty(e,t,n){const s=e.toString();let r;this._modelProperties.has(s)?r=this._modelProperties.get(s):(r=new Map,this._modelProperties.set(s,r)),r.set(t,n)}getModelProperty(e,t){const n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}}var vMe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},wMe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class yMe{constructor(e,t,n){this._parent=e,this._editorId=t,this._styleSheet=n,this._refCount=0}ref(){this._refCount++}unref(){var e;this._refCount--,this._refCount===0&&((e=this._styleSheet.parentNode)===null||e===void 0||e.removeChild(this._styleSheet),this._parent._removeEditorStyleSheets(this._editorId))}insertRule(e,t){this._styleSheet.sheet.insertRule(e,t)}removeRulesContainingSelector(e){px(e,this._styleSheet)}}class CMe{constructor(e){this._styleSheet=e}ref(){}unref(){}insertRule(e,t){this._styleSheet.sheet.insertRule(e,t)}removeRulesContainingSelector(e){px(e,this._styleSheet)}}let t4=class extends bMe{constructor(e,t){super(),this._decorationOptionProviders=new Map,this._editorStyleSheets=new Map,this._globalStyleSheet=e||null,this._themeService=t}_getOrCreateGlobalStyleSheet(){return this._globalStyleSheet||(this._globalStyleSheet=new CMe(jr())),this._globalStyleSheet}_getOrCreateStyleSheet(e){if(!e)return this._getOrCreateGlobalStyleSheet();const t=e.getContainerDomNode();if(!QO(t))return this._getOrCreateGlobalStyleSheet();const n=e.getId();if(!this._editorStyleSheets.has(n)){const s=new yMe(this,n,jr(t));this._editorStyleSheets.set(n,s)}return this._editorStyleSheets.get(n)}_removeEditorStyleSheets(e){this._editorStyleSheets.delete(e)}registerDecorationType(e,t,n,s,r){let o=this._decorationOptionProviders.get(t);if(!o){const a=this._getOrCreateStyleSheet(r),l={styleSheet:a,key:t,parentTypeKey:s,options:n||Object.create(null)};s?o=new SMe(this._themeService,a,l):o=new xMe(e,this._themeService,a,l),this._decorationOptionProviders.set(t,o),this._onDecorationTypeRegistered.fire(t)}o.refCount++}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(n=>n.removeDecorations(e))))}resolveDecorationOptions(e,t){const n=this._decorationOptionProviders.get(e);if(!n)throw new Error("Unknown decoration type key: "+e);return n.getOptions(this,t)}};t4=vMe([wMe(1,si)],t4);class SMe{constructor(e,t,n){this._styleSheet=t,this._styleSheet.ref(),this._parentTypeKey=n.parentTypeKey,this.refCount=0,this._beforeContentRules=new dD(3,n,e),this._afterContentRules=new dD(4,n,e)}getOptions(e,t){const n=e.resolveDecorationOptions(this._parentTypeKey,!0);return this._beforeContentRules&&(n.beforeContentClassName=this._beforeContentRules.className),this._afterContentRules&&(n.afterContentClassName=this._afterContentRules.className),n}dispose(){this._beforeContentRules&&(this._beforeContentRules.dispose(),this._beforeContentRules=null),this._afterContentRules&&(this._afterContentRules.dispose(),this._afterContentRules=null),this._styleSheet.unref()}}class xMe{constructor(e,t,n,s){this._disposables=new de,this.description=e,this._styleSheet=n,this._styleSheet.ref(),this.refCount=0;const r=u=>{const d=new dD(u,s,t);if(this._disposables.add(d),d.hasContent)return d.className},o=u=>{const d=new dD(u,s,t);return this._disposables.add(d),d.hasContent?{className:d.className,hasLetterSpacing:d.hasLetterSpacing}:null};this.className=r(0);const a=o(1);if(a&&(this.inlineClassName=a.className,this.inlineClassNameAffectsLetterSpacing=a.hasLetterSpacing),this.beforeContentClassName=r(3),this.afterContentClassName=r(4),s.options.beforeInjectedText&&s.options.beforeInjectedText.contentText){const u=o(5);this.beforeInjectedText={content:s.options.beforeInjectedText.contentText,inlineClassName:u==null?void 0:u.className,inlineClassNameAffectsLetterSpacing:(u==null?void 0:u.hasLetterSpacing)||s.options.beforeInjectedText.affectsLetterSpacing}}if(s.options.afterInjectedText&&s.options.afterInjectedText.contentText){const u=o(6);this.afterInjectedText={content:s.options.afterInjectedText.contentText,inlineClassName:u==null?void 0:u.className,inlineClassNameAffectsLetterSpacing:(u==null?void 0:u.hasLetterSpacing)||s.options.afterInjectedText.affectsLetterSpacing}}this.glyphMarginClassName=r(2);const l=s.options;this.isWholeLine=!!l.isWholeLine,this.stickiness=l.rangeBehavior;const c=l.light&&l.light.overviewRulerColor||l.overviewRulerColor,h=l.dark&&l.dark.overviewRulerColor||l.overviewRulerColor;(typeof c<"u"||typeof h<"u")&&(this.overviewRuler={color:c||h,darkColor:h||c,position:l.overviewRulerLane||Il.Center})}getOptions(e,t){return t?{description:this.description,inlineClassName:this.inlineClassName,beforeContentClassName:this.beforeContentClassName,afterContentClassName:this.afterContentClassName,className:this.className,glyphMarginClassName:this.glyphMarginClassName,isWholeLine:this.isWholeLine,overviewRuler:this.overviewRuler,stickiness:this.stickiness,before:this.beforeInjectedText,after:this.afterInjectedText}:this}dispose(){this._disposables.dispose(),this._styleSheet.unref()}}const u_={color:"color:{0} !important;",opacity:"opacity:{0};",backgroundColor:"background-color:{0};",outline:"outline:{0};",outlineColor:"outline-color:{0};",outlineStyle:"outline-style:{0};",outlineWidth:"outline-width:{0};",border:"border:{0};",borderColor:"border-color:{0};",borderRadius:"border-radius:{0};",borderSpacing:"border-spacing:{0};",borderStyle:"border-style:{0};",borderWidth:"border-width:{0};",fontStyle:"font-style:{0};",fontWeight:"font-weight:{0};",fontSize:"font-size:{0};",fontFamily:"font-family:{0};",textDecoration:"text-decoration:{0};",cursor:"cursor:{0};",letterSpacing:"letter-spacing:{0};",gutterIconPath:"background:{0} center center no-repeat;",gutterIconSize:"background-size:{0};",contentText:"content:'{0}';",contentIconPath:"content:{0};",margin:"margin:{0};",padding:"padding:{0};",width:"width:{0};",height:"height:{0};",verticalAlign:"vertical-align:{0};"};class dD{constructor(e,t,n){this._theme=n.getColorTheme(),this._ruleType=e,this._providerArgs=t,this._usesThemeColors=!1,this._hasContent=!1,this._hasLetterSpacing=!1;let s=NE.getClassName(this._providerArgs.key,e);this._providerArgs.parentTypeKey&&(s=s+" "+NE.getClassName(this._providerArgs.parentTypeKey,e)),this._className=s,this._unThemedSelector=NE.getSelector(this._providerArgs.key,this._providerArgs.parentTypeKey,e),this._buildCSS(),this._usesThemeColors?this._themeListener=n.onDidColorThemeChange(r=>{this._theme=n.getColorTheme(),this._removeCSS(),this._buildCSS()}):this._themeListener=null}dispose(){this._hasContent&&(this._removeCSS(),this._hasContent=!1),this._themeListener&&(this._themeListener.dispose(),this._themeListener=null)}get hasContent(){return this._hasContent}get hasLetterSpacing(){return this._hasLetterSpacing}get className(){return this._className}_buildCSS(){const e=this._providerArgs.options;let t,n,s;switch(this._ruleType){case 0:t=this.getCSSTextForModelDecorationClassName(e),n=this.getCSSTextForModelDecorationClassName(e.light),s=this.getCSSTextForModelDecorationClassName(e.dark);break;case 1:t=this.getCSSTextForModelDecorationInlineClassName(e),n=this.getCSSTextForModelDecorationInlineClassName(e.light),s=this.getCSSTextForModelDecorationInlineClassName(e.dark);break;case 2:t=this.getCSSTextForModelDecorationGlyphMarginClassName(e),n=this.getCSSTextForModelDecorationGlyphMarginClassName(e.light),s=this.getCSSTextForModelDecorationGlyphMarginClassName(e.dark);break;case 3:t=this.getCSSTextForModelDecorationContentClassName(e.before),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.before),s=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.before);break;case 4:t=this.getCSSTextForModelDecorationContentClassName(e.after),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.after),s=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.after);break;case 5:t=this.getCSSTextForModelDecorationContentClassName(e.beforeInjectedText),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.beforeInjectedText),s=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.beforeInjectedText);break;case 6:t=this.getCSSTextForModelDecorationContentClassName(e.afterInjectedText),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.afterInjectedText),s=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.afterInjectedText);break;default:throw new Error("Unknown rule type: "+this._ruleType)}const r=this._providerArgs.styleSheet;let o=!1;t.length>0&&(r.insertRule(`${this._unThemedSelector} {${t}}`,0),o=!0),n.length>0&&(r.insertRule(`.vs${this._unThemedSelector} {${n}}`,0),o=!0),s.length>0&&(r.insertRule(`.vs-dark${this._unThemedSelector}, .hc-black${this._unThemedSelector} {${s}}`,0),o=!0),this._hasContent=o}_removeCSS(){this._providerArgs.styleSheet.removeRulesContainingSelector(this._unThemedSelector)}getCSSTextForModelDecorationClassName(e){if(!e)return"";const t=[];return this.collectCSSText(e,["backgroundColor"],t),this.collectCSSText(e,["outline","outlineColor","outlineStyle","outlineWidth"],t),this.collectBorderSettingsCSSText(e,t),t.join("")}getCSSTextForModelDecorationInlineClassName(e){if(!e)return"";const t=[];return this.collectCSSText(e,["fontStyle","fontWeight","textDecoration","cursor","color","opacity","letterSpacing"],t),e.letterSpacing&&(this._hasLetterSpacing=!0),t.join("")}getCSSTextForModelDecorationContentClassName(e){if(!e)return"";const t=[];if(typeof e<"u"){if(this.collectBorderSettingsCSSText(e,t),typeof e.contentIconPath<"u"&&t.push(fo(u_.contentIconPath,jc(We.revive(e.contentIconPath)))),typeof e.contentText=="string"){const s=e.contentText.match(/^.*$/m)[0].replace(/['\\]/g,"\\$&");t.push(fo(u_.contentText,s))}this.collectCSSText(e,["verticalAlign","fontStyle","fontWeight","fontSize","fontFamily","textDecoration","color","opacity","backgroundColor","margin","padding"],t),this.collectCSSText(e,["width","height"],t)&&t.push("display:inline-block;")}return t.join("")}getCSSTextForModelDecorationGlyphMarginClassName(e){if(!e)return"";const t=[];return typeof e.gutterIconPath<"u"&&(t.push(fo(u_.gutterIconPath,jc(We.revive(e.gutterIconPath)))),typeof e.gutterIconSize<"u"&&t.push(fo(u_.gutterIconSize,e.gutterIconSize))),t.join("")}collectBorderSettingsCSSText(e,t){return this.collectCSSText(e,["border","borderColor","borderRadius","borderSpacing","borderStyle","borderWidth"],t)?(t.push(fo("box-sizing: border-box;")),!0):!1}collectCSSText(e,t,n){const s=n.length;for(let r of t){const o=this.resolveValue(e[r]);typeof o=="string"&&n.push(fo(u_[r],o))}return n.length!==s}resolveValue(e){if(pxe(e)){this._usesThemeColors=!0;const t=this._theme.getColor(e.id);return t?t.toString():"transparent"}return e}}class NE{static getClassName(e,t){return"ced-"+e+"-"+t}static getSelector(e,t,n){let s=".monaco-editor ."+this.getClassName(e,n);return t&&(s=s+"."+this.getClassName(t,n)),n===3?s+="::before":n===4&&(s+="::after"),s}}var DMe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},rW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let fD=class extends t4{constructor(e,t,n){super(e,n),this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=t.createKey("editorIsOpen",!1),this._activeCodeEditor=null}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}openCodeEditor(e,t,n){return t?Promise.resolve(this.doOpenEditor(t,e)):Promise.resolve(null)}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const r=t.resource.scheme;if(r===it.http||r===it.https)return GZ(t.resource.toString()),e}return null}const s=t.options?t.options.selection:null;if(s)if(typeof s.endLineNumber=="number"&&typeof s.endColumn=="number")e.setSelection(s),e.revealRangeInCenter(s,1);else{const r={lineNumber:s.startLineNumber,column:s.startColumn};e.setPosition(r),e.revealPositionInCenter(r,1)}return e}findModel(e,t){const n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}};fD=DMe([rW(1,$e),rW(2,si)],fD);var dP=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Gt=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let LMe=0,oW=!1;function kMe(i){if(!i){if(oW)return;oW=!0}bke(i||document.body)}let gD=class extends e1{constructor(e,t,n,s,r,o,a,l,c,h){const u=Object.assign({},t);u.ariaLabel=u.ariaLabel||Bx.editorViewAccessibleLabel,u.ariaLabel=u.ariaLabel+";"+Bx.accessibilityHelpMessage,super(e,u,{},n,s,r,o,l,c,h),a instanceof sQ?this._standaloneKeybindingService=a:this._standaloneKeybindingService=null,kMe(u.ariaContainerElement)}addCommand(e,t,n){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;let s="DYNAMIC_"+ ++LMe,r=xe.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(s,e,t,r),s}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),te.None;const t=e.id,n=e.label,s=xe.and(xe.equals("editorId",this.getId()),xe.deserialize(e.precondition)),r=e.keybindings,o=xe.and(s,xe.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(f,...g)=>Promise.resolve(e.run(this,...g)),h=new de,u=this.getId()+":"+t;if(h.add(Tt.registerCommand(u,c)),a){let f={command:{id:u,title:n},when:s,group:a,order:l};h.add(da.appendMenuItem(Ue.EditorContext,f))}if(Array.isArray(r))for(const f of r)h.add(this._standaloneKeybindingService.addDynamicKeybinding(u,f,c,o));let d=new bX(u,n,n,s,c,this._contextKeyService);return this._actions[t]=d,h.add(gt(()=>{delete this._actions[t]})),h}_triggerCommand(e,t){if(this._codeEditorService instanceof fD)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};gD=dP([Gt(2,Wt),Gt(3,ii),Gt(4,vn),Gt(5,$e),Gt(6,Bi),Gt(7,si),Gt(8,Vn),Gt(9,tr)],gD);let i4=class extends gD{constructor(e,t,n,s,r,o,a,l,c,h,u,d,f,g,p){const m=Object.assign({},t);Vx(d,m,!1);const v=h.registerEditorContainer(e);typeof m.theme=="string"&&h.setTheme(m.theme),typeof m.autoDetectHighContrast<"u"&&h.setAutoDetectHighContrast(!!m.autoDetectHighContrast);let b=m.model;delete m.model,super(e,m,s,r,o,a,l,h,u,f),this._contextViewService=c,this._configurationService=d,this._standaloneThemeService=h,this._register(n),this._register(v);let w;if(typeof b>"u"?(w=EX(g,p,m.value||"",m.language||mo.text,void 0),this._ownsModel=!0):(w=b,this._ownsModel=!1),this._attachModel(w),w){let y={oldModelUrl:null,newModelUrl:w.uri};this._onDidChangeModel.fire(y)}}dispose(){super.dispose()}updateOptions(e){Vx(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_attachModel(e){super._attachModel(e),this._modelData&&this._contextViewService.setContainer(this._modelData.view.domNode.domNode)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};i4=dP([Gt(3,Wt),Gt(4,ii),Gt(5,vn),Gt(6,$e),Gt(7,Bi),Gt(8,og),Gt(9,Aw),Gt(10,Vn),Gt(11,Fi),Gt(12,tr),Gt(13,Rs),Gt(14,Os)],i4);let n4=class extends wu{constructor(e,t,n,s,r,o,a,l,c,h,u,d,f,g,p){const m=Object.assign({},t);Vx(d,m,!0);const v=h.registerEditorContainer(e);typeof m.theme=="string"&&h.setTheme(m.theme),typeof m.autoDetectHighContrast<"u"&&h.setAutoDetectHighContrast(!!m.autoDetectHighContrast),super(e,m,{},p,l,r,s,c,h,u,f,g),this._contextViewService=a,this._configurationService=d,this._standaloneThemeService=h,this._register(n),this._register(v),this._contextViewService.setContainer(this._containerDomElement)}dispose(){super.dispose()}updateOptions(e){Vx(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(gD,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};n4=dP([Gt(3,Wt),Gt(4,$e),Gt(5,Bi),Gt(6,og),Gt(7,Vu),Gt(8,ii),Gt(9,Aw),Gt(10,Vn),Gt(11,Fi),Gt(12,ag),Gt(13,R0),Gt(14,lg)],n4);function EX(i,e,t,n,s){if(t=t||"",!n){const r=t.indexOf(`
`);let o=t;return r!==-1&&(o=t.substring(0,r)),aW(i,t,e.createByFilepathOrFirstLine(s||null,o),s)}return aW(i,t,e.create(n),s)}function aW(i,e,t,n){return i.createModel(e,t,n)}const Qu=Object.prototype.hasOwnProperty;class AMe{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(pu,0),this._register(N0,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||pu}}class i1 extends te{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new z),this.onDidChange=this._onDidChange.event,i1.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new AMe,this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(Zd.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){i1.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},xIe();const e=Zd.getLanguages();this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{let n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(s=>{this._lowercaseNameMap[s.toLowerCase()]=n.identifier}),n.mimetypes.forEach(s=>{this._mimeTypesMap[s]=n.identifier})}),kn.as(x0.Configuration).registerOverrideIdentifiers(Zd.getLanguages().map(t=>t.id)),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;Qu.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let s=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),s=t.mimetypes[0]),s||(s=`text/x-${n}`,e.mimetypes.push(s)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(let a of t.extensions)Ny({id:n,mime:s,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(let a of t.filenames)Ny({id:n,mime:s,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(let a of t.filenamePatterns)Ny({id:n,mime:s,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{let l=new RegExp(a);ASe(l)||Ny({id:n,mime:s,firstline:l},this._warnOnOverwrite)}catch(l){Ke(l)}}e.aliases.push(n);let r=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?r=[null]:r=t.aliases),r!==null)for(const a of r)!a||a.length===0||e.aliases.push(a);let o=r!==null&&r.length>0;if(!(o&&r[0]===null)){let a=(o?r[0]:null)||n;(o||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration)}isRegisteredMode(e){return Qu.call(this._mimeTypesMap,e)?!0:Qu.call(this._languages,e)}getModeIdForLanguageNameLowercase(e){return Qu.call(this._lowercaseNameMap,e)?this._lowercaseNameMap[e]:null}extractModeIds(e){return e?e.split(",").map(t=>t.trim()).map(t=>Qu.call(this._mimeTypesMap,t)?this._mimeTypesMap[t]:t).filter(t=>Qu.call(this._languages,t)):[]}validateLanguageId(e){return!e||e===pu?pu:Qu.call(this._languages,e)?e:null}getModeIdsFromFilepathOrFirstLine(e,t){if(!e&&!t)return[];let n=DIe(e,t);return this.extractModeIds(n.join(","))}}i1.instanceCount=0;class lW{constructor(e,t){this._selector=t,this.languageId=this._selector();let n;this._onDidChange=new z({onFirstListenerAdd:()=>{n=e(()=>this._evaluate())},onLastListenerRemove:()=>{n.dispose()}}),this.onDidChange=this._onDidChange.event}_evaluate(){const e=this._selector();e!==this.languageId&&(this.languageId=e,this._onDidChange.fire(this.languageId))}}class n1 extends te{constructor(e=!1){super(),this._onDidEncounterLanguage=this._register(new z),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onLanguagesMaybeChanged=this._register(new z({leakWarningThreshold:200})),this.onLanguagesMaybeChanged=this._onLanguagesMaybeChanged.event,n1.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new i1(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onLanguagesMaybeChanged.fire()))}dispose(){n1.instanceCount--,super.dispose()}isRegisteredMode(e){return this._registry.isRegisteredMode(e)}getModeIdForLanguageName(e){return this._registry.getModeIdForLanguageNameLowercase(e)}getModeIdByFilepathOrFirstLine(e,t){const n=this._registry.getModeIdsFromFilepathOrFirstLine(e,t);return xM(n,null)}getModeId(e){const t=this._registry.extractModeIds(e);return xM(t,null)}validateLanguageId(e){return this._registry.validateLanguageId(e)}create(e){return new lW(this.onLanguagesMaybeChanged,()=>{const t=this.getModeId(e);return this._createModeAndGetLanguageIdentifier(t)})}createByFilepathOrFirstLine(e,t){return new lW(this.onLanguagesMaybeChanged,()=>{const n=this.getModeIdByFilepathOrFirstLine(e,t);return this._createModeAndGetLanguageIdentifier(n)})}_createModeAndGetLanguageIdentifier(e){const t=this.validateLanguageId(e||"plaintext")||pu;return this._getOrCreateMode(t),t}triggerMode(e){const t=this.getModeId(e);this._getOrCreateMode(t||"plaintext")}_getOrCreateMode(e){if(!this._encounteredLanguages.has(e)){this._encounteredLanguages.add(e);const t=this.validateLanguageId(e)||pu;this._onDidEncounterLanguage.fire(t)}}}n1.instanceCount=0;var EMe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ME=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let s4=class{constructor(e,t,n,s){this._legend=e,this._themeService=t,this._modeService=n,this._logService=s,this._hashTable=new bc,this._hasWarnedOverlappingTokens=!1}getMetadata(e,t,n){const s=this._modeService.languageIdCodec.encodeLanguageId(n),r=this._hashTable.get(e,t,s);let o;if(r)o=r.metadata,this._logService.getLevel()===ra.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${Rr.getForeground(o)}, fontStyle ${Rr.getFontStyle(o).toString(2)}`);else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let u=0;c>0&&u<this._legend.tokenModifiers.length;u++)c&1&&l.push(this._legend.tokenModifiers[u]),c=c>>1;c>0&&this._logService.getLevel()===ra.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),l.push("not-in-legend"));const h=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,n);if(typeof h>"u")o=2147483647;else{if(o=0,typeof h.italic<"u"){const u=(h.italic?1:0)<<11;o|=u|1}if(typeof h.bold<"u"){const u=(h.bold?2:0)<<11;o|=u|2}if(typeof h.underline<"u"){const u=(h.underline?4:0)<<11;o|=u|4}if(h.foreground){const u=h.foreground<<14;o|=u|8}o===0&&(o=2147483647)}}else this._logService.getLevel()===ra.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),o=2147483647,a="not-in-legend";this._hashTable.add(e,t,s,o),this._logService.getLevel()===ra.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${a}) / ${t} (${l.join(" ")}): foreground ${Rr.getForeground(o)}, fontStyle ${Rr.getFontStyle(o).toString(2)}`)}return o}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}};s4=EMe([ME(1,si),ME(2,Os),ME(3,Jc)],s4);function IMe(i,e,t){const n=i.data,s=i.data.length/5|0,r=Math.max(Math.ceil(s/1024),400),o=[];let a=0,l=1,c=0;for(;a<s;){const h=a;let u=Math.min(h+r,s);if(u<s){let w=u;for(;w-1>h&&n[5*w]===0;)w--;if(w-1===h){let y=u;for(;y+1<s&&n[5*y]===0;)y++;u=y}else u=w}let d=new Uint32Array((u-h)*4),f=0,g=0,p=0,m=0,v=0;for(;a<u;){const w=5*a,y=n[w],x=n[w+1],k=l+y|0,S=y===0?c+x|0:x,L=n[w+2],D=n[w+3],N=n[w+4],T=e.getMetadata(D,N,t);T!==2147483647&&(g===0&&(g=k),p===k&&v>S&&(e.warnOverlappingSemanticTokens(k,S+1),m<S?d[f-4+2]=S:f-=4),d[f]=k-g,d[f+1]=S,d[f+2]=S+L,d[f+3]=T,f+=4,p=k,m=S,v=S+L),l=k,c=S,a++}f!==d.length&&(d=d.subarray(0,f));const b=new jx(g,new $x(d));o.push(b)}return o}class TMe{constructor(e,t,n,s){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=s,this.next=null}}class bc{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=bc._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<bc._SIZES.length?2/3*this._currentLength:0),this._elements=[],bc._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const s=this._hashFunc(e,t,n);let r=this._elements[s];for(;r;){if(r.tokenTypeIndex===e&&r.tokenModifierSet===t&&r.languageId===n)return r;r=r.next}return null}add(e,t,n,s){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const r=this._elements;this._currentLengthIndex++,this._currentLength=bc._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<bc._SIZES.length?2/3*this._currentLength:0),this._elements=[],bc._nullOutEntries(this._elements,this._currentLength);for(const o of r){let a=o;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new TMe(e,t,n,s))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}bc._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];function NMe(i){for(let e=0,t=i.length;e<t;e+=4){const n=i[e+0],s=i[e+1],r=i[e+2],o=i[e+3];i[e+0]=o,i[e+1]=r,i[e+2]=s,i[e+3]=n}}function MMe(i){const e=new Uint8Array(i.buffer,i.byteOffset,i.length*4);return mZ()||NMe(e),HL.wrap(e)}function IX(i){const e=new Uint32Array(RMe(i));let t=0;if(e[t++]=i.id,i.type==="full")e[t++]=1,e[t++]=i.data.length,e.set(i.data,t),t+=i.data.length;else{e[t++]=2,e[t++]=i.deltas.length;for(const n of i.deltas)e[t++]=n.start,e[t++]=n.deleteCount,n.data?(e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length):e[t++]=0}return MMe(e)}function RMe(i){let e=0;if(e+=1+1,i.type==="full")e+=1+i.data.length;else{e+=1,e+=(1+1+1)*i.deltas.length;for(const t of i.deltas)t.data&&(e+=t.data.length)}return e}var yu=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function Dk(i){return i&&!!i.data}function TX(i){return i&&Array.isArray(i.edits)}class OMe{constructor(e,t){this.provider=e,this.tokens=t}}function NX(i){return xm.has(i)}function PMe(i){const e=xm.orderedGroups(i);return e.length>0?e[0]:[]}function MX(i,e,t,n){return yu(this,void 0,void 0,function*(){const s=PMe(i),r=yield Promise.all(s.map(o=>yu(this,void 0,void 0,function*(){let a;try{a=yield o.provideDocumentSemanticTokens(i,o===e?t:null,n)}catch(l){Fo(l),a=null}return(!a||!Dk(a)&&!TX(a))&&(a=null),new OMe(o,a)})));for(const o of r)if(o.tokens)return o;return r.length>0?r[0]:null})}function FMe(i){const e=xm.orderedGroups(i);return e.length>0?e[0]:null}class BMe{constructor(e,t){this.provider=e,this.tokens=t}}function RX(i){const e=pY.orderedGroups(i);return e.length>0?e[0]:[]}function OX(i,e,t){return yu(this,void 0,void 0,function*(){const n=RX(i),s=yield Promise.all(n.map(r=>yu(this,void 0,void 0,function*(){let o;try{o=yield r.provideDocumentRangeSemanticTokens(i,e,t)}catch(a){Fo(a),o=null}return(!o||!Dk(o))&&(o=null),new BMe(r,o)})));for(const r of s)if(r.tokens)return r;return s.length>0?s[0]:null})}Tt.registerCommand("_provideDocumentSemanticTokensLegend",(i,...e)=>yu(void 0,void 0,void 0,function*(){const[t]=e;Mi(t instanceof We);const n=i.get(Rs).getModel(t);if(!n)return;const s=FMe(n);return s?s[0].getLegend():i.get(vn).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)}));Tt.registerCommand("_provideDocumentSemanticTokens",(i,...e)=>yu(void 0,void 0,void 0,function*(){const[t]=e;Mi(t instanceof We);const n=i.get(Rs).getModel(t);if(!n)return;if(!NX(n))return i.get(vn).executeCommand("_provideDocumentRangeSemanticTokens",t,n.getFullModelRange());const s=yield MX(n,null,null,Xt.None);if(!s)return;const{provider:r,tokens:o}=s;if(!o||!Dk(o))return;const a=IX({id:0,type:"full",data:o.data});return o.resultId&&r.releaseDocumentSemanticTokens(o.resultId),a}));Tt.registerCommand("_provideDocumentRangeSemanticTokensLegend",(i,...e)=>yu(void 0,void 0,void 0,function*(){const[t,n]=e;Mi(t instanceof We);const s=i.get(Rs).getModel(t);if(!s)return;const r=RX(s);if(r.length===0)return;if(r.length===1)return r[0].getLegend();if(!n||!F.isIRange(n))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),r[0].getLegend();const o=yield OX(s,F.lift(n),Xt.None);if(o)return o.provider.getLegend()}));Tt.registerCommand("_provideDocumentRangeSemanticTokens",(i,...e)=>yu(void 0,void 0,void 0,function*(){const[t,n]=e;Mi(t instanceof We),Mi(F.isIRange(n));const s=i.get(Rs).getModel(t);if(!s)return;const r=yield OX(s,F.lift(n),Xt.None);if(!(!r||!r.tokens))return IX({id:0,type:"full",data:r.tokens.data})}));var VMe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Xu=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function hh(i){return i.toString()}function cW(i){const e=new $L,t=i.createSnapshot();let n;for(;n=t.read();)e.update(n);return e.digest()}class WMe{constructor(e,t,n){this._modelEventListeners=new de,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(s=>n(e,s)))}_disposeLanguageSelection(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(e){this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange(()=>this.model.setMode(e.languageId)),this.model.setMode(e.languageId)}}const zMe=As||ht?1:2;class HMe{constructor(e,t,n,s,r,o,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=s,this.heapSize=r,this.sha1=o,this.versionId=a,this.alternativeVersionId=l}}let pD=class O_ extends te{constructor(e,t,n,s,r,o,a){super(),this._configurationService=e,this._resourcePropertiesService=t,this._themeService=n,this._logService=s,this._undoRedoService=r,this._modeService=o,this._languageConfigurationService=a,this._onModelAdded=this._register(new z),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new z),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new z),this.onModelModeChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new $Me(this._themeService,this._modeService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration(()=>this._updateModelOptions())),this._updateModelOptions(),this._register(new UMe(this,this._themeService,this._configurationService,this._semanticStyling))}static _readModelOptions(e,t){var n;let s=Kn.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const f=parseInt(e.editor.tabSize,10);isNaN(f)||(s=f),s<1&&(s=1)}let r=s;if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const f=parseInt(e.editor.indentSize,10);isNaN(f)||(r=f),r<1&&(r=1)}let o=Kn.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(o=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let a=zMe;const l=e.eol;l===`\r
`?a=2:l===`
`&&(a=1);let c=Kn.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(c=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let h=Kn.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(h=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let u=Kn.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(u=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let d=Kn.bracketPairColorizationOptions;return!((n=e.editor)===null||n===void 0)&&n.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(d={enabled:!!e.editor.bracketPairColorization.enabled}),{isForSimpleWidget:t,tabSize:s,indentSize:r,insertSpaces:o,detectIndentation:h,defaultEOL:a,trimAutoWhitespace:c,largeFileOptimizations:u,bracketPairColorizationOptions:d}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&typeof n=="string"&&n!=="auto"?n:po===3||po===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,n){let s=this._modelCreationOptionsByLanguageAndResource[e+t];if(!s){const r=this._configurationService.getValue("editor",{overrideIdentifier:e,resource:t}),o=this._getEOL(t,e);s=O_._readModelOptions({editor:r,eol:o},n),this._modelCreationOptionsByLanguageAndResource[e+t]=s}return s}_updateModelOptions(){const e=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const t=Object.keys(this._models);for(let n=0,s=t.length;n<s;n++){const r=t[n],o=this._models[r],a=o.model.getLanguageId(),l=o.model.uri,c=e[a+l],h=this.getCreationOptions(a,l,o.model.isForSimpleWidget);O_._setModelOptionsForModel(o.model,h,c)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&ca(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(hh(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(hh(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(hh(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(n=>{n.sharesUndoRedoStack||t.push(n)}),t.sort((n,s)=>n.time-s.time);t.length>0&&this._disposedModelsHeapSize>e;){const n=t.shift();this._removeDisposedModel(n.uri),n.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,s){const r=this.getCreationOptions(t,n,s),o=new Gr(e,r,t,n,this._undoRedoService,this._modeService,this._languageConfigurationService);if(n&&this._disposedModels.has(hh(n))){const c=this._removeDisposedModel(n),h=this._undoRedoService.getElements(n),u=cW(o)===c.sha1;if(u||c.sharesUndoRedoStack){for(const d of h.past)pc(d)&&d.matchesResource(n)&&d.setModel(o);for(const d of h.future)pc(d)&&d.matchesResource(n)&&d.setModel(o);this._undoRedoService.setElementsValidFlag(n,!0,d=>pc(d)&&d.matchesResource(n)),u&&(o._overwriteVersionId(c.versionId),o._overwriteAlternativeVersionId(c.alternativeVersionId),o._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=hh(o.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new WMe(o,c=>this._onWillDispose(c),(c,h)=>this._onDidChangeLanguage(c,h));return this._models[a]=l,l}createModel(e,t,n,s=!1){let r;return t?(r=this._createModelData(e,t.languageId,n,s),this.setMode(r.model,t)):r=this._createModelData(e,N0,n,s),this._onModelAdded.fire(r.model),r.model}setMode(e,t){if(!t)return;const n=this._models[hh(e.uri)];n&&n.setLanguage(t)}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,s=t.length;n<s;n++){const r=t[n];e.push(this._models[r].model)}return e}getModel(e){const t=hh(e),n=this._models[t];return n?n.model:null}getSemanticTokensProviderStyling(e){return this._semanticStyling.get(e)}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===it.file||e.scheme===it.vscodeRemote||e.scheme===it.userData||e.scheme===it.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=hh(e.uri),n=this._models[t],s=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let r=!1,o=0;if(s||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const l=this._undoRedoService.getElements(e.uri);if(l.past.length>0||l.future.length>0){for(const c of l.past)pc(c)&&c.matchesResource(e.uri)&&(r=!0,o+=c.heapSize(e.uri),c.setModel(e.uri));for(const c of l.future)pc(c)&&c.matchesResource(e.uri)&&(r=!0,o+=c.heapSize(e.uri),c.setModel(e.uri))}}const a=O_.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(r)if(!s&&o>a){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}else this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,l=>pc(l)&&l.matchesResource(e.uri)),this._insertDisposedModel(new HMe(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),s,o,cW(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!s){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,s=e.getLanguageId(),r=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(s,e.uri,e.isForSimpleWidget);O_._setModelOptionsForModel(e,o,r),this._onModelModeChanged.fire({model:e,oldModeId:n})}};pD.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;pD=VMe([Xu(0,Fi),Xu(1,MY),Xu(2,si),Xu(3,Jc),Xu(4,Dw),Xu(5,Os),Xu(6,Cw)],pD);const PX="editor.semanticHighlighting";function hW(i,e,t){var n;const s=(n=t.getValue(PX,{overrideIdentifier:i.getLanguageId(),resource:i.uri}))===null||n===void 0?void 0:n.enabled;return typeof s=="boolean"?s:e.getColorTheme().semanticHighlighting}class UMe extends te{constructor(e,t,n,s){super(),this._watchers=Object.create(null),this._semanticStyling=s;const r=l=>{this._watchers[l.uri.toString()]=new Td(l,t,this._semanticStyling)},o=(l,c)=>{c.dispose(),delete this._watchers[l.uri.toString()]},a=()=>{for(let l of e.getModels()){const c=this._watchers[l.uri.toString()];hW(l,t,n)?c||r(l):c&&o(l,c)}};this._register(e.onModelAdded(l=>{hW(l,t,n)&&r(l)})),this._register(e.onModelRemoved(l=>{const c=this._watchers[l.uri.toString()];c&&o(l,c)})),this._register(n.onDidChangeConfiguration(l=>{l.affectsConfiguration(PX)&&a()})),this._register(t.onDidColorThemeChange(a))}}class $Me extends te{constructor(e,t,n){super(),this._themeService=e,this._modeService=t,this._logService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}get(e){return this._caches.has(e)||this._caches.set(e,new s4(e.getLegend(),this._themeService,this._modeService,this._logService)),this._caches.get(e)}}class jMe{constructor(e,t,n){this.provider=e,this.resultId=t,this.data=n}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}class Td extends te{constructor(e,t,n){super(),this._isDisposed=!1,this._model=e,this._semanticStyling=n,this._fetchDocumentSemanticTokens=this._register(new fi(()=>this._fetchDocumentSemanticTokensNow(),Td.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule()})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const s=()=>{at(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const r of xm.all(e))typeof r.onDidChange=="function"&&this._documentProvidersChangeListeners.push(r.onDidChange(()=>this._fetchDocumentSemanticTokens.schedule(0)))};s(),this._register(xm.onDidChange(()=>{s(),this._fetchDocumentSemanticTokens.schedule()})),this._register(t.onDidColorThemeChange(r=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule()})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!NX(this._model)){this._currentDocumentResponse&&this._model.setSemanticTokens(null,!1);return}const e=new Na,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,n=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,s=MX(this._model,t,n,e.token);this._currentDocumentRequestCancellationTokenSource=e;const r=[],o=this._model.onDidChangeContent(a=>{r.push(a)});s.then(a=>{if(this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),!a)this._setDocumentSemanticTokens(null,null,null,r);else{const{provider:l,tokens:c}=a,h=this._semanticStyling.get(l);this._setDocumentSemanticTokens(l,c||null,h,r)}},a=>{a&&(Bu(a)||typeof a.message=="string"&&a.message.indexOf("busy")!==-1)||Ke(a),this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),r.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule())})}static _copy(e,t,n,s,r){for(let o=0;o<r;o++)n[s+o]=e[t+o]}_setDocumentSemanticTokens(e,t,n,s){const r=this._currentDocumentResponse,o=()=>{s.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule()};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!n){this._model.setSemanticTokens(null,!1);return}if(!t){this._model.setSemanticTokens(null,!0),o();return}if(TX(t)){if(!r){this._model.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:r.data};else{let a=0;for(const d of t.edits)a+=(d.data?d.data.length:0)-d.deleteCount;const l=r.data,c=new Uint32Array(l.length+a);let h=l.length,u=c.length;for(let d=t.edits.length-1;d>=0;d--){const f=t.edits[d],g=h-(f.start+f.deleteCount);g>0&&(Td._copy(l,h-g,c,u-g,g),u-=g),f.data&&(Td._copy(f.data,0,c,u-f.data.length,f.data.length),u-=f.data.length),h=f.start}h>0&&Td._copy(l,0,c,0,h),t={resultId:t.resultId,data:c}}}if(Dk(t)){this._currentDocumentResponse=new jMe(e,t.resultId,t.data);const a=IMe(t,n,this._model.getLanguageId());if(s.length>0)for(const l of s)for(const c of a)for(const h of l.changes)c.applyEdit(h.range,h.text);this._model.setSemanticTokens(a,!0)}else this._model.setSemanticTokens(null,!0);o()}}Td.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY=300;class qMe{constructor(e,t,n,s,r){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=s,this.background=r}}function GMe(i){if(!i||!Array.isArray(i))return[];let e=[],t=0;for(let n=0,s=i.length;n<s;n++){let r=i[n],o=-1;if(typeof r.fontStyle=="string"){o=0;let c=r.fontStyle.split(" ");for(let h=0,u=c.length;h<u;h++)switch(c[h]){case"italic":o=o|1;break;case"bold":o=o|2;break;case"underline":o=o|4;break}}let a=null;typeof r.foreground=="string"&&(a=r.foreground);let l=null;typeof r.background=="string"&&(l=r.background),e[t++]=new qMe(r.token||"",n,o,a,l)}return e}function KMe(i,e){i.sort((h,u)=>{let d=JMe(h.token,u.token);return d!==0?d:h.index-u.index});let t=0,n="000000",s="ffffff";for(;i.length>=1&&i[0].token==="";){let h=i.shift();h.fontStyle!==-1&&(t=h.fontStyle),h.foreground!==null&&(n=h.foreground),h.background!==null&&(s=h.background)}let r=new YMe;for(let h of e)r.getId(h);let o=r.getId(n),a=r.getId(s),l=new fP(t,o,a),c=new gP(l);for(let h=0,u=i.length;h<u;h++){let d=i[h];c.insert(d.token,d.fontStyle,r.getId(d.foreground),r.getId(d.background))}return new FX(r,c)}const ZMe=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class YMe{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(ZMe);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=Z.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}}class FX{constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(GMe(e),t)}static createFromParsedTokenTheme(e,t){return KMe(e,t)}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(typeof n>"u"){let s=this._match(t),r=XMe(t);n=(s.metadata|r<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}}const QMe=/\b(comment|string|regex|regexp)\b/;function XMe(i){let e=i.match(QMe);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 4;case"regexp":return 4}throw new Error("Unexpected match for standard token type!")}function JMe(i,e){return i<e?-1:i>e?1:0}class fP{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}clone(){return new fP(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),n!==0&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}}class gP{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;let t=e.indexOf("."),n,s;t===-1?(n=e,s=""):(n=e.substring(0,t),s=e.substring(t+1));let r=this._children.get(n);return typeof r<"u"?r.match(s):this._mainRule}insert(e,t,n,s){if(e===""){this._mainRule.acceptOverwrite(t,n,s);return}let r=e.indexOf("."),o,a;r===-1?(o=e,a=""):(o=e.substring(0,r),a=e.substring(r+1));let l=this._children.get(o);typeof l>"u"&&(l=new gP(this._mainRule.clone()),this._children.set(o,l)),l.insert(a,t,n,s)}}function e4e(i){let e=[];for(let t=1,n=i.length;t<n;t++){let s=i[t];e[t]=`.mtk${t} { color: ${s}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.join(`
`)}const t4e={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Ur]:"#FFFFFE",[Jh]:"#000000",[K5]:"#E5EBF1",[_k]:"#D3D3D3",[bk]:"#939393",[HQ]:"#ADD6FF4D"}},i4e={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Ur]:"#1E1E1E",[Jh]:"#D4D4D4",[K5]:"#3A3D41",[_k]:"#404040",[bk]:"#707070",[HQ]:"#ADD6FF26"}},n4e={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Ur]:"#000000",[Jh]:"#FFFFFF",[_k]:"#FFFFFF",[bk]:"#FFFFFF"}};function s4e(){const i=new z,e=JNe();return e.onDidChange(()=>i.fire()),{onDidChange:i.event,getCSS(){const t={},n=r=>{let o=r.defaults;for(;oi.isThemeIcon(o);){const l=e.getIcon(o.id);if(!l)return;o=l.defaults}const a=o.fontId;if(a){const l=e.getIconFont(a);if(l)return t[a]=l,`.codicon-${r.id}:before { content: '${o.fontCharacter}'; font-family: ${j9(a)}; }`}return`.codicon-${r.id}:before { content: '${o.fontCharacter}'; }`},s=[];for(let r of e.getIcons()){const o=n(r);o&&s.push(o)}for(let r in t){const a=t[r].definition.src.map(l=>`${jc(l.location)} format('${l.format}')`).join(", ");s.push(`@font-face { src: ${a}; font-family: ${j9(r)}; font-display: block; }`)}return s.join(`
`)}}}const Nd="vs",mD="vs-dark",Qp="hc-black",r4e=kn.as(IQ.ColorContribution),o4e=kn.as(oQ.ThemingContribution);class BX{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;let n=t.base;e.length>0?(iS(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(let t in this.themeData.colors)e.set(t,Z.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){let t=r4(this.themeData.base);for(let n in t.colors)e.has(n)||e.set(n,Z.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){const n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=r4e.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)}get type(){switch(this.base){case Nd:return ua.LIGHT;case Qp:return ua.HIGH_CONTRAST;default:return ua.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){let r=r4(this.themeData.base);e=r.rules,r.encodedTokensColors&&(t=r.encodedTokensColors)}const n=this.themeData.colors["editor.foreground"],s=this.themeData.colors["editor.background"];if(n||s){const r={token:""};n&&(r.foreground=n),s&&(r.background=s),e.push(r)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=FX.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){const r=this.tokenTheme._match([e].concat(t).join(".")).metadata,o=Rr.getForeground(r),a=Rr.getFontStyle(r);return{foreground:o,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4)}}}function iS(i){return i===Nd||i===mD||i===Qp}function r4(i){switch(i){case Nd:return t4e;case mD:return i4e;case Qp:return n4e}}function RE(i){let e=r4(i);return new BX(i,e)}class a4e extends te{constructor(){super(),this._onColorThemeChange=this._register(new z),this.onDidColorThemeChange=this._onColorThemeChange.event,this._environment=Object.create(null),this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(Nd,RE(Nd)),this._knownThemes.set(mD,RE(mD)),this._knownThemes.set(Qp,RE(Qp));const e=s4e();this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(Nd),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),xSe("(forced-colors: active)",()=>{this._updateActualTheme()})}registerEditorContainer(e){return QO(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=jr(),this._globalStyleElement.className="monaco-colors",this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),te.None}_registerShadowDomContainer(e){const t=jr(e);return t.className="monaco-colors",t.textContent=this._allCSS,this._styleElements.push(t),{dispose:()=>{for(let n=0;n<this._styleElements.length;n++)if(this._styleElements[n]===t){this._styleElements.splice(n,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!iS(t.base)&&!iS(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new BX(e,t)),iS(e)&&this._knownThemes.forEach(n=>{n.base===e&&n.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(Nd),this._desiredTheme=t,this._updateActualTheme()}_updateActualTheme(){const e=this._autoDetectHighContrast&&window.matchMedia("(forced-colors: active)").matches?this._knownThemes.get(Qp):this._desiredTheme;this._theme!==e&&(this._theme=e,this._updateThemeOrColorMap())}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._updateActualTheme()}_updateThemeOrColorMap(){let e=[],t={},n={addRule:r=>{t[r]||(e.push(r),t[r]=!0)}};o4e.getThemingParticipants().forEach(r=>r(this._theme,n,this._environment));const s=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(e4e(s)),this._themeCSS=e.join(`
`),this._updateCSS(),xi.setColorMap(s),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}}var l4e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},c4e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Mb="data-keybinding-context";let pP=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}};class Bm extends pP{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}Bm.INSTANCE=new Bm;class s1 extends pP{constructor(e,t,n){super(e,null),this._configurationService=t,this._values=Bp.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(s=>{if(s.source===6){const r=Array.from(ct.map(this._values,([o])=>o));this._values.clear(),n.fire(new dW(r))}else{const r=[];for(const o of s.affectedKeys){const a=`config.${o}`,l=this._values.findSuperstr(a);l!==void 0&&(r.push(...ct.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(r.push(a),this._values.delete(a))}n.fire(new dW(r))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(s1._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(s1._keyPrefix.length),n=this._configurationService.getValue(t);let s;switch(typeof n){case"number":case"boolean":case"string":s=n;break;default:Array.isArray(n)?s=JSON.stringify(n):s=n}return this._values.set(e,s),s}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}s1._keyPrefix="config.";class h4e{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class uW{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}}class dW{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}}class u4e{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}}class VX{constructor(e){this._onDidChangeContext=new cx({merge:t=>new u4e(t)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new h4e(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new d4e(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return zp.contextMatchesRules(t,e)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new uW(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new uW(e))}getContext(e){return this._isDisposed?Bm.INSTANCE:this.getContextValuesContainer(f4e(e))}}let o4=class extends VX{constructor(e){super(0),this._contexts=new Map,this._toDispose=new de,this._lastContextId=0;const t=new s1(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?Bm.INSTANCE:this._contexts.get(e)||Bm.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");let t=++this._lastContextId;return this._contexts.set(t,new pP(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};o4=l4e([c4e(0,Fi)],o4);class d4e extends VX{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=new Lr,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(Mb)){let n="";this._domNode.classList&&(n=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${n?": "+n:""}`)}this._domNode.setAttribute(Mb,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(this._onDidChangeContext.fire,this._onDidChangeContext)}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(Mb),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?Bm.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function f4e(i){for(;i;){if(i.hasAttribute(Mb)){const e=i.getAttribute(Mb);return e?parseInt(e,10):NaN}i=i.parentElement}return 0}Tt.registerCommand(eke,function(i,e,t){i.get($e).createKey(String(e),t)});Tt.registerCommand({id:"getContextKeyInfo",handler(){return[...De.all()].sort((i,e)=>i.key.localeCompare(e.key))},description:{description:_("getContextKeyInfo","A command that returns information about context keys"),args:[]}});Tt.registerCommand("_generateContextKeyInfo",function(){const i=[],e=new Set;for(let t of De.all())e.has(t.key)||(e.add(t.key),i.push(t));i.sort((t,n)=>t.key.localeCompare(n.key)),console.log(JSON.stringify(i,void 0,2))});function fW(i){let e=i.definition;for(;e instanceof be;)e=e.definition;return`.codicon-${i.id}:before { content: '${e.fontCharacter}'; }`}var In;(function(i){function e(r,o){if(r.start>=o.end||o.start>=r.end)return{start:0,end:0};const a=Math.max(r.start,o.start),l=Math.min(r.end,o.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}i.intersect=e;function t(r){return r.end-r.start<=0}i.isEmpty=t;function n(r,o){return!t(e(r,o))}i.intersects=n;function s(r,o){const a=[],l={start:r.start,end:Math.min(o.start,r.end)},c={start:Math.max(o.end,r.start),end:r.end};return t(l)||a.push(l),t(c)||a.push(c),a}i.relativeComplement=s})(In||(In={}));var zh;(function(i){i[i.AVOID=0]="AVOID",i[i.ALIGN=1]="ALIGN"})(zh||(zh={}));function _p(i,e,t){const n=t.mode===zh.ALIGN?t.offset:t.offset+t.size,s=t.mode===zh.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=i-n?n:e<=s?s-e:Math.max(i-e,0):e<=s?s-e:e<=i-n?n:0}class Vm extends te{constructor(e,t){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=te.None,this.toDisposeOnSetContainer=te.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=ue(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,Cs(this.view),this.setContainer(e,t),this._register(gt(()=>this.setContainer(null,1)))}setContainer(e,t){var n;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(n=this.shadowRootHostElement)===null||n===void 0||n.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=t!==1,this.useShadowDOM=t===3,this.useShadowDOM){this.shadowRootHostElement=ue(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const r=document.createElement("style");r.textContent=g4e,this.shadowRoot.appendChild(r),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(ue("slot"))}else this.container.appendChild(this.view);const s=new de;Vm.BUBBLE_UP_EVENTS.forEach(r=>{s.add(Ji(this.container,r,o=>{this.onDOMEvent(o,!1)}))}),Vm.BUBBLE_DOWN_EVENTS.forEach(r=>{s.add(Ji(this.container,r,o=>{this.onDOMEvent(o,!0)},!0))}),this.toDisposeOnSetContainer=s}}show(e){this.isVisible()&&this.hide(),Rn(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2500",this.view.style.position=this.useFixedPosition?"fixed":"absolute",ur(this.view),this.toDisposeOnClean=e.render(this.view)||te.None,this.delegate=e,this.doLayout(),this.delegate.focus&&this.delegate.focus()}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(du&&VL.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;let e=this.delegate.getAnchor(),t;if(jZ(e)){let u=Nn(e);t={top:u.top,left:u.left,width:u.width,height:u.height}}else t={top:e.y,left:e.x,width:e.width||1,height:e.height||2};const n=lo(this.view),s=JN(this.view),r=this.delegate.anchorPosition||0,o=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;if(a===0){const u={offset:t.top-window.pageYOffset,size:t.height,position:r===0?0:1},d={offset:t.left,size:t.width,position:o===0?0:1,mode:zh.ALIGN};l=_p(window.innerHeight,s,u)+window.pageYOffset,In.intersects({start:l,end:l+s},{start:u.offset,end:u.offset+u.size})&&(d.mode=zh.AVOID),c=_p(window.innerWidth,n,d)}else{const u={offset:t.left,size:t.width,position:o===0?0:1},d={offset:t.top,size:t.height,position:r===0?0:1,mode:zh.ALIGN};c=_p(window.innerWidth,n,u),In.intersects({start:c,end:c+n},{start:u.offset,end:u.offset+u.size})&&(d.mode=zh.AVOID),l=_p(window.innerHeight,s,d)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(r===0?"bottom":"top"),this.view.classList.add(o===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const h=Nn(this.container);this.view.style.top=`${l-(this.useFixedPosition?Nn(this.view).top:h.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?Nn(this.view).left:h.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),Cs(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!Cl(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}Vm.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];Vm.BUBBLE_DOWN_EVENTS=["click"];let g4e=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	@font-face {
		font-family: "codicon";
		font-display: block;
		src: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;function WX(...i){return function(e,t){for(let n=0,s=i.length;n<s;n++){const r=i[n](e,t);if(r)return r}return null}}const mP=p4e.bind(void 0,!0);function p4e(i,e,t){if(!t||t.length<e.length)return null;let n;return i?n=e5(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function m4e(i,e){const t=e.toLowerCase().indexOf(i.toLowerCase());return t===-1?null:[{start:t,end:t+i.length}]}function _4e(i,e){return a4(i.toLowerCase(),e.toLowerCase(),0,0)}function a4(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]===e[n]){let s=null;return(s=a4(i,e,t+1,n+1))?HX({start:n,end:n+1},s):null}return a4(i,e,t,n+1)}function _P(i){return 97<=i&&i<=122}function Lk(i){return 65<=i&&i<=90}function bP(i){return 48<=i&&i<=57}function b4e(i){return i===32||i===9||i===10||i===13}const v4e=new Set;"`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?".split("").forEach(i=>v4e.add(i.charCodeAt(0)));function zX(i){return _P(i)||Lk(i)||bP(i)}function HX(i,e){return e.length===0?e=[i]:i.end===e[0].start?e[0].start=i.start:e.unshift(i),e}function UX(i,e){for(let t=e;t<i.length;t++){const n=i.charCodeAt(t);if(Lk(n)||bP(n)||t>0&&!zX(i.charCodeAt(t-1)))return t}return i.length}function l4(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]!==e[n].toLowerCase())return null;{let s=null,r=n+1;for(s=l4(i,e,t+1,n+1);!s&&(r=UX(e,r))<e.length;)s=l4(i,e,t+1,r),r++;return s===null?null:HX({start:n,end:n+1},s)}}function w4e(i){let e=0,t=0,n=0,s=0,r=0;for(let h=0;h<i.length;h++)r=i.charCodeAt(h),Lk(r)&&e++,_P(r)&&t++,zX(r)&&n++,bP(r)&&s++;const o=e/i.length,a=t/i.length,l=n/i.length,c=s/i.length;return{upperPercent:o,lowerPercent:a,alphaPercent:l,numericPercent:c}}function y4e(i){const{upperPercent:e,lowerPercent:t}=i;return t===0&&e>.6}function C4e(i){const{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:s}=i;return t>.2&&e<.8&&n>.6&&s<.2}function S4e(i){let e=0,t=0,n=0,s=0;for(let r=0;r<i.length;r++)n=i.charCodeAt(r),Lk(n)&&e++,_P(n)&&t++,b4e(n)&&s++;return(e===0||t===0)&&s===0?i.length<=30:e<=5}function $X(i,e){if(!e||(e=e.trim(),e.length===0)||!S4e(i)||e.length>60)return null;const t=w4e(e);if(!C4e(t)){if(!y4e(t))return null;e=e.toLowerCase()}let n=null,s=0;for(i=i.toLowerCase();s<e.length&&(n=l4(i,e,0,s))===null;)s=UX(e,s+1);return n}const x4e=WX(mP,$X,m4e),D4e=WX(mP,$X,_4e),gW=new s5(1e4);function pW(i,e,t=!1){if(typeof i!="string"||typeof e!="string")return null;let n=gW.get(i);n||(n=new RegExp(kSe(i),"i"),gW.set(i,n));const s=n.exec(e);return s?[{start:s.index,end:s.index+s[0].length}]:t?D4e(i,e):x4e(i,e)}function L4e(i,e,t,n,s,r){const o=Math.min(13,i.length);for(;t<o;t++){const a=r1(i,e,t,n,s,r,!1);if(a)return a}return[0,r]}function vP(i){if(typeof i>"u")return[];const e=[],t=i[1];for(let n=i.length-1;n>1;n--){const s=i[n]+t,r=e[e.length-1];r&&r.end===s?r.end=s+1:e.push({start:s,end:s+1})}return e}const Hh=128;function wP(){const i=[],e=[];for(let t=0;t<=Hh;t++)e[t]=0;for(let t=0;t<=Hh;t++)i.push(e.slice(0));return i}function jX(i){const e=[];for(let t=0;t<=i;t++)e[t]=0;return e}const qX=jX(2*Hh),c4=jX(2*Hh),ic=wP(),Ju=wP(),Wy=wP();function zy(i,e){if(e<0||e>=i.length)return!1;const t=i.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 40:case 91:return!0;case void 0:return!1;default:return!!lb(t)}}function mW(i,e){if(e<0||e>=i.length)return!1;switch(i.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function nS(i,e,t){return e[i]!==t[i]}function k4e(i,e,t,n,s,r,o=!1){for(;e<t&&s<r;)i[e]===n[s]&&(o&&(qX[e]=s),e+=1),s+=1;return e===t}var ga;(function(i){i.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}i.isDefault=e})(ga||(ga={}));function r1(i,e,t,n,s,r,o){const a=i.length>Hh?Hh:i.length,l=n.length>Hh?Hh:n.length;if(t>=a||r>=l||a-t>l-r||!k4e(e,t,a,s,r,l,!0))return;A4e(a,l,t,r,e,s);let c=1,h=1,u=t,d=r;const f=[!1];for(c=1,u=t;u<a;c++,u++){const b=qX[u],w=c4[u],y=u+1<a?c4[u+1]:l;for(h=b-r+1,d=b;d<y;h++,d++){let x=Number.MIN_SAFE_INTEGER,k=!1;d<=w&&(x=E4e(i,e,u,t,n,s,d,l,r,ic[c-1][h-1]===0,f));let S=0;x!==Number.MAX_SAFE_INTEGER&&(k=!0,S=x+Ju[c-1][h-1]);const L=d>b,D=L?Ju[c][h-1]+(ic[c][h-1]>0?-5:0):0,N=d>b+1&&ic[c][h-1]>0,T=N?Ju[c][h-2]+(ic[c][h-2]>0?-5:0):0;if(N&&(!L||T>=D)&&(!k||T>=S))Ju[c][h]=T,Wy[c][h]=3,ic[c][h]=0;else if(L&&(!k||D>=S))Ju[c][h]=D,Wy[c][h]=2,ic[c][h]=0;else if(k)Ju[c][h]=S,Wy[c][h]=1,ic[c][h]=ic[c-1][h-1]+1;else throw new Error("not possible")}}if(!f[0]&&!o)return;c--,h--;const g=[Ju[c][h],r];let p=0,m=0;for(;c>=1;){let b=h;do{const w=Wy[c][b];if(w===3)b=b-2;else if(w===2)b=b-1;else break}while(b>=1);p>1&&e[t+c-1]===s[r+h-1]&&!nS(b+r-1,n,s)&&p+1>ic[c][b]&&(b=h),b===h?p++:p=1,m||(m=b),c--,h=b-1,g.push(h)}l===a&&(g[0]+=2);const v=m-a;return g[0]-=v,g}function A4e(i,e,t,n,s,r){let o=i-1,a=e-1;for(;o>=t&&a>=n;)s[o]===r[a]&&(c4[o]=a,o--),a--}function E4e(i,e,t,n,s,r,o,a,l,c,h){if(e[t]!==r[o])return Number.MIN_SAFE_INTEGER;let u=1,d=!1;return o===t-n?u=i[t]===s[o]?7:5:nS(o,s,r)&&(o===0||!nS(o-1,s,r))?(u=i[t]===s[o]?7:5,d=!0):zy(r,o)&&(o===0||!zy(r,o-1))?u=5:(zy(r,o-1)||mW(r,o-1))&&(u=5,d=!0),u>1&&t===n&&(h[0]=!0),d||(d=nS(o,s,r)||zy(r,o-1)||mW(r,o-1)),t===n?o>l&&(u-=d?3:5):c?u+=d?2:0:u+=d?0:1,o+1===a&&(u-=d?3:5),u}function I4e(i,e,t,n,s,r,o){return T4e(i,e,t,n,s,r,!0,o)}function T4e(i,e,t,n,s,r,o,a){let l=r1(i,e,t,n,s,r,a);if(l&&!o)return l;if(i.length>=3){const c=Math.min(7,i.length-1);for(let h=t+1;h<c;h++){const u=N4e(i,h);if(u){const d=r1(u,u.toLowerCase(),t,n,s,r,a);d&&(d[0]-=3,(!l||d[0]>l[0])&&(l=d))}}}return l}function N4e(i,e){if(e+1>=i.length)return;const t=i[e],n=i[e+1];if(t!==n)return i.slice(0,e)+n+t+i.slice(e+2)}const Rb="$(",yP=new RegExp(`\\$\\(${Gs.iconNameExpression}(?:${Gs.iconModifierExpression})?\\)`,"g"),M4e=new RegExp(`(\\\\)?${yP.source}`,"g");function R4e(i){return i.replace(M4e,(e,t)=>t?e:`\\${e}`)}const O4e=new RegExp(`\\\\${yP.source}`,"g");function P4e(i){return i.replace(O4e,e=>`\\${e}`)}const F4e=new RegExp(`(\\s)?(\\\\)?${yP.source}(\\s)?`,"g");function B4e(i){return i.indexOf(Rb)===-1?i:i.replace(F4e,(e,t,n,s)=>n?e:t||s||"")}function Hy(i){const e=i.indexOf(Rb);return e===-1?{text:i}:V4e(i,e)}function V4e(i,e){const t=[];let n="";function s(d){if(d){n+=d;for(const f of d)t.push(a)}}let r=-1,o="",a=0,l,c,h=e;const u=i.length;for(s(i.substr(0,e));h<u;){if(l=i[h],c=i[h+1],l===Rb[0]&&c===Rb[1])r=h,s(o),o=Rb,h++;else if(l===")"&&r!==-1){const d=h-r+1;a+=d,r=-1,o=""}else r!==-1?/^[a-z0-9\-]$/i.test(l)?o+=l:(s(o),r=-1,o=""):s(l);h++}return s(o),{text:n,iconOffsets:t}}function Uy(i,e,t=!1){const{text:n,iconOffsets:s}=e;if(!s||s.length===0)return pW(i,n,t);const r=ZZ(n," "),o=n.length-r.length,a=pW(i,r,t);if(a)for(const l of a){const c=s[l.start+o]+o;l.start+=c,l.end+=c}return a}const h4=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,OE=/(&amp;)?(&amp;)([^\s&])/g,GX=Bo("menu-selection",be.check),KX=Bo("menu-submenu",be.chevronRight);var _D;(function(i){i[i.Right=0]="Right",i[i.Left=1]="Left"})(_D||(_D={}));let ZX=class P_ extends Gc{constructor(e,t,n={}){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const s=document.createElement("div");s.classList.add("monaco-menu"),s.setAttribute("role","presentation"),super(s,{orientation:1,actionViewItemProvider:a=>this.doGetActionViewItem(a,n,r),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...ht||As?[10]:[]],keyDown:!0}}),this.menuElement=s,this.actionsList.setAttribute("role","menu"),this.actionsList.tabIndex=0,this.menuDisposables=this._register(new de),this.initializeStyleSheet(e),this._register(kt.addTarget(s)),ne(s,Ae.KEY_DOWN,a=>{new li(a).equals(2)&&a.preventDefault()}),n.enableMnemonics&&this.menuDisposables.add(ne(s,Ae.KEY_DOWN,a=>{const l=a.key.toLocaleLowerCase();if(this.mnemonics.has(l)){Et.stop(a,!0);const c=this.mnemonics.get(l);if(c.length===1&&(c[0]instanceof _W&&c[0].container&&this.focusItemByElement(c[0].container),c[0].onClick(a)),c.length>1){const h=c.shift();h&&h.container&&(this.focusItemByElement(h.container),c.push(h)),this.mnemonics.set(l,c)}}})),As&&this._register(ne(s,Ae.KEY_DOWN,a=>{const l=new li(a);l.equals(14)||l.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),Et.stop(a,!0)):(l.equals(13)||l.equals(12))&&(this.focusedItem=0,this.focusPrevious(),Et.stop(a,!0))})),this._register(ne(this.domNode,Ae.MOUSE_OUT,a=>{let l=a.relatedTarget;Cl(l,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),a.stopPropagation())})),this._register(ne(this.actionsList,Ae.MOUSE_OVER,a=>{let l=a.target;if(!(!l||!Cl(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const c=this.focusedItem;this.setFocusedItem(l),c!==this.focusedItem&&this.updateFocus()}}})),this._register(kt.addTarget(this.actionsList)),this._register(ne(this.actionsList,Ut.Tap,a=>{let l=a.initialTarget;if(!(!l||!Cl(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const c=this.focusedItem;this.setFocusedItem(l),c!==this.focusedItem&&this.updateFocus()}}}));let r={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new Ck(s,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const o=this.scrollableElement.getDomNode();o.style.position="",this._register(ne(s,Ut.Change,a=>{Et.stop(a,!0);const l=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:l-a.translationY})})),this._register(ne(o,Ae.MOUSE_UP,a=>{a.preventDefault()})),s.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(a=>{var l;return!((l=n.submenuIds)===null||l===void 0)&&l.has(a.id)?(console.warn(`Found submenu cycle: ${a.id}`),!1):!0}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(a=>!(a instanceof PE)).forEach((a,l,c)=>{a.updatePositionInSet(l+1,c.length)})}initializeStyleSheet(e){QO(e)?(this.styleSheet=jr(e),this.styleSheet.textContent=bW):(P_.globalStyleSheet||(P_.globalStyleSheet=jr(),P_.globalStyleSheet.textContent=bW),this.styleSheet=P_.globalStyleSheet)}style(e){const t=this.getContainer(),n=e.foregroundColor?`${e.foregroundColor}`:"",s=e.backgroundColor?`${e.backgroundColor}`:"",r=e.borderColor?`1px solid ${e.borderColor}`:"",o=e.shadowColor?`0 2px 4px ${e.shadowColor}`:"";t.style.border=r,this.domNode.style.color=n,this.domNode.style.backgroundColor=s,t.style.boxShadow=o,this.viewItems&&this.viewItems.forEach(a=>{(a instanceof u4||a instanceof PE)&&a.style(e)})}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){let n=this.actionsList.children[t];if(e===n){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof ha)return new PE(t.context,e,{icon:!0});if(e instanceof E5){const s=new _W(e,e.actions,n,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}));if(t.enableMnemonics){const r=s.getMnemonic();if(r&&s.isEnabled()){let o=[];this.mnemonics.has(r)&&(o=this.mnemonics.get(r)),o.push(s),this.mnemonics.set(r,o)}}return s}else{const s={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const o=t.getKeyBinding(e);if(o){const a=o.getLabel();a&&(s.keybinding=a)}}const r=new u4(t.context,e,s);if(t.enableMnemonics){const o=r.getMnemonic();if(o&&r.isEnabled()){let a=[];this.mnemonics.has(o)&&(a=this.mnemonics.get(o)),a.push(r),this.mnemonics.set(o,a)}}return r}}};class u4 extends Yd{constructor(e,t,n={}){if(n.isMenu=!0,super(t,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){let s=this.getAction().label;if(s){let r=h4.exec(s);r&&(this.mnemonic=(r[1]?r[1]:r[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new fi(()=>{this.element&&(this._register(ne(this.element,Ae.MOUSE_UP,s=>{if(Et.stop(s,!0),ks){if(new zr(s).rightButton)return;this.onClick(s)}else setTimeout(()=>{this.onClick(s)},0)})),this._register(ne(this.element,Ae.CONTEXT_MENU,s=>{Et.stop(s,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=se(this.element,ue("a.action-menu-item")),this._action.id===ha.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=se(this.item,ue("span.menu-item-check"+GX.cssSelector)),this.check.setAttribute("role","none"),this.label=se(this.item,ue("span.action-label")),this.options.label&&this.options.keybinding&&(se(this.item,ue("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){if(this.label&&this.options.label){Rn(this.label);let e=B4e(this.getAction().label);if(e){const t=W4e(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t.replace(/&&/g,"&"));const n=h4.exec(e);if(n){e=XO(e),OE.lastIndex=0;let s=OE.exec(e);for(;s&&s[1];)s=OE.exec(e);const r=o=>o.replace(/&amp;&amp;/g,"&amp;");s?this.label.append(ZZ(r(e.substr(0,s.index))," "),ue("u",{"aria-hidden":"true"},s[3]),LSe(r(e.substr(s.index+s[0].length))," ")):this.label.innerText=r(e).trim(),this.item&&this.item.setAttribute("aria-keyshortcuts",(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,"&").trim()}}}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=_({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.item&&(this.item.title=e)}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.getAction().checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,s=e&&this.menuStyle.selectionBorderColor?`thin solid ${this.menuStyle.selectionBorderColor}`:"";this.item&&(this.item.style.color=t?t.toString():"",this.item.style.backgroundColor=n?n.toString():""),this.check&&(this.check.style.color=t?t.toString():""),this.container&&(this.container.style.border=s)}style(e){this.menuStyle=e,this.applyStyle()}}class _W extends u4{constructor(e,t,n,s){super(e,e,s),this.submenuActions=t,this.parentData=n,this.submenuOptions=s,this.mysubmenu=null,this.submenuDisposables=this._register(new de),this.mouseOver=!1,this.expandDirection=s&&s.expandDirection!==void 0?s.expandDirection:_D.Right,this.showScheduler=new fi(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new fi(()=>{this.element&&!Cl(Pp(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=se(this.item,ue("span.submenu-indicator"+KX.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(ne(this.element,Ae.KEY_UP,t=>{let n=new li(t);(n.equals(17)||n.equals(3))&&(Et.stop(t,!0),this.createSubmenu(!0))})),this._register(ne(this.element,Ae.KEY_DOWN,t=>{let n=new li(t);Pp()===this.item&&(n.equals(17)||n.equals(3))&&Et.stop(t,!0)})),this._register(ne(this.element,Ae.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(ne(this.element,Ae.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(ne(this.element,Ae.FOCUS_OUT,t=>{this.element&&!Cl(Pp(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!1)})))}updateEnabled(){}onClick(e){Et.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,s){const r={top:0,left:0};return r.left=_p(e.width,t.width,{position:s===_D.Right?0:1,offset:n.left,size:n.width}),r.left>=n.left&&r.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(r.left=n.left+10),n.top+=10,n.height=0),r.top=_p(e.height,t.height,{position:0,offset:n.top,size:0}),r.top+t.height===n.top&&r.top+n.height+t.height<=e.height&&(r.top+=n.height),r}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=se(this.element,ue("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new ZX(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new hk],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const s=this.element.getBoundingClientRect(),r={top:s.top-n,left:s.left,height:s.height+2*n,width:s.width},o=this.submenuContainer.getBoundingClientRect(),{top:a,left:l}=this.calculateSubmenuMenuLayout(new Vt(window.innerWidth,window.innerHeight),Vt.lift(o),r,this.expandDirection);this.submenuContainer.style.left=`${l-o.left}px`,this.submenuContainer.style.top=`${a-o.top}px`,this.submenuDisposables.add(ne(this.submenuContainer,Ae.KEY_UP,c=>{new li(c).equals(15)&&(Et.stop(c,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(ne(this.submenuContainer,Ae.KEY_DOWN,c=>{new li(c).equals(15)&&Et.stop(c,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){if(super.applyStyle(),!this.menuStyle)return;const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t?`${t}`:""),this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class PE extends uP{style(e){this.label&&(this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:"")}}function W4e(i){const e=h4,t=e.exec(i);if(!t)return i;const n=!t[1];return i.replace(e,n?"$2$3":"").trim()}let bW=`
.monaco-menu {
	font-size: 13px;

}

${fW(GX)}
${fW(KX)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 = √φ */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	opacity: 0.4;
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid #bbb;
	padding-top: 1px;
	margin-left: .8em;
	margin-right: .8em;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	padding: 0.5em 0 0 0;
	margin-bottom: 0.5em;
	width: 100%;
	height: 0px !important;
	margin-left: .8em !important;
	margin-right: .8em !important;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	border: thin solid transparent; /* prevents jumping behaviour on hover or focus */
}


/* High Contrast Theming */
:host-context(.hc-black) .context-view.monaco-menu-container {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: .5em 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 1.8em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	padding: 0.2em 0 0 0;
	margin-bottom: 0.2em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}

/* Arrows */
.monaco-scrollable-element > .scrollbar > .scra {
	cursor: pointer;
	font-size: 11px !important;
}

.monaco-scrollable-element > .visible {
	opacity: 1;

	/* Background rule added for IE9 - to allow clicks on dom node */
	background:rgba(0,0,0,0);

	transition: opacity 100ms linear;
}
.monaco-scrollable-element > .invisible {
	opacity: 0;
	pointer-events: none;
}
.monaco-scrollable-element > .invisible.fade {
	transition: opacity 800ms linear;
}

/* Scrollable Content Inset Shadow */
.monaco-scrollable-element > .shadow {
	position: absolute;
	display: none;
}
.monaco-scrollable-element > .shadow.top {
	display: block;
	top: 0;
	left: 3px;
	height: 3px;
	width: 100%;
	box-shadow: #DDD 0 6px 6px -6px inset;
}
.monaco-scrollable-element > .shadow.left {
	display: block;
	top: 3px;
	left: 0;
	height: 100%;
	width: 3px;
	box-shadow: #DDD 6px 0 6px -6px inset;
}
.monaco-scrollable-element > .shadow.top-left-corner {
	display: block;
	top: 0;
	left: 0;
	height: 3px;
	width: 3px;
}
.monaco-scrollable-element > .shadow.top.left {
	box-shadow: #DDD 6px 6px 6px -6px inset;
}

/* ---------- Default Style ---------- */

:host-context(.vs) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(100, 100, 100, .4);
}
:host-context(.vs-dark) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(121, 121, 121, .4);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(111, 195, 223, .6);
}

.monaco-scrollable-element > .scrollbar > .slider:hover {
	background: rgba(100, 100, 100, .7);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider:hover {
	background: rgba(111, 195, 223, .8);
}

.monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(0, 0, 0, .6);
}
:host-context(.vs-dark) .monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(191, 191, 191, .4);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(111, 195, 223, 1);
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.top {
	box-shadow: none;
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.left {
	box-shadow: #000 6px 0 6px -6px inset;
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.top.left {
	box-shadow: #000 6px 6px 6px -6px inset;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.top {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.left {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.top.left {
	box-shadow: none;
}
`;function Ko(i,e){const t=Object.create(null);for(let n in e){const s=e[n];s&&(t[n]=ac(s,i))}return t}function CP(i,e,t){function n(){const s=Ko(i.getColorTheme(),e);typeof t=="function"?t(s):t.style(s)}return n(),i.onDidColorThemeChange(n)}function z4e(i,e,t){return CP(e,{badgeBackground:(t==null?void 0:t.badgeBackground)||Sb,badgeForeground:(t==null?void 0:t.badgeForeground)||xb,badgeBorder:Pi},i)}function Nf(i,e,t){return CP(e,Object.assign(Object.assign({},kk),t||{}),i)}const kk={listFocusBackground:BAe,listFocusForeground:VAe,listFocusOutline:WAe,listActiveSelectionBackground:iu,listActiveSelectionForeground:nu,listActiveSelectionIconForeground:ZC,listFocusAndSelectionBackground:iu,listFocusAndSelectionForeground:nu,listInactiveSelectionBackground:zAe,listInactiveSelectionIconForeground:UAe,listInactiveSelectionForeground:HAe,listInactiveFocusBackground:$Ae,listInactiveFocusOutline:jAe,listHoverBackground:qAe,listHoverForeground:GAe,listDropBackground:KAe,listSelectionOutline:Is,listHoverOutline:Is,listFilterWidgetBackground:ZAe,listFilterWidgetOutline:YAe,listFilterWidgetNoMatchesOutline:QAe,listMatchesShadow:Nm,treeIndentGuidesStroke:XAe,tableColumnsBorder:JAe},H4e={shadowColor:Nm,borderColor:eEe,foregroundColor:tEe,backgroundColor:iEe,selectionForegroundColor:nEe,selectionBackgroundColor:sEe,selectionBorderColor:rEe,separatorColor:oEe};function U4e(i,e,t){return CP(e,Object.assign(Object.assign({},H4e),t),i)}class $4e{constructor(e,t,n,s,r){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=s,this.themeService=r,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let n,s=jZ(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:r=>{let o=e.getMenuClassName?e.getMenuClassName():"";o&&(r.className+=" "+o),this.options.blockMouse&&(this.block=r.appendChild(ue(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",ne(this.block,Ae.MOUSE_DOWN,c=>c.stopPropagation()));const a=new de,l=e.actionRunner||new Am;return l.onBeforeRun(this.onActionRun,this,a),l.onDidRun(this.onDidActionRun,this,a),n=new ZX(r,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:c=>this.keybindingService.lookupKeybinding(c.id)}),a.add(U4e(n,this.themeService)),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a),a.add(ne(window,Ae.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(ne(window,Ae.MOUSE_DOWN,c=>{if(c.defaultPrevented)return;let h=new zr(c),u=h.target;if(!h.rightButton){for(;u;){if(u===r)return;u=u.parentElement}this.contextViewService.hideContextView(!0)}})),Kh(a,n)},focus:()=>{n&&n.focus(!!e.autoSelectFirstItem)},onHide:r=>{e.onHide&&e.onHide(!!r),this.block&&(this.block.remove(),this.block=null),this.focusToReturn&&this.focusToReturn.focus()}},s,!!s)}onActionRun(e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(e){e.error&&!Bu(e.error)&&this.notificationService.error(e.error)}}var j4e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},d_=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let d4=class extends te{constructor(e,t,n,s,r){super(),this.contextMenuHandler=new $4e(n,e,t,s,r)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){this.contextMenuHandler.showContextMenu(e),Ld.getInstance().resetKeyStatus()}};d4=j4e([d_(0,k0),d_(1,Vn),d_(2,og),d_(3,Bi),d_(4,si)],d4);const Ak=mt("layoutService");var q4e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},G4e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let f4=class extends te{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=te.None,this.container=e.container,this.contextView=this._register(new Vm(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,n){t?t!==this.container&&(this.container=t,this.setContainer(t,n?3:2)):this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.contextView.show(e);const s=gt(()=>{this.currentViewDisposable===s&&this.hideContextView()});return this.currentViewDisposable=s,s}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}};f4=q4e([G4e(0,Ak)],f4);const YX=mt("dialogService");let K4e=class{constructor(e){this.incoming=new Map,this.outgoing=new Map,this.data=e}};class Z4e{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(let t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),s=this.lookupOrInsertNode(t);n.outgoing.set(this._hashFn(t),s),s.incoming.set(this._hashFn(e),n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(let n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new K4e(e),this._nodes.set(t,n)),n}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[t,n]of this._nodes)e.push(`${t}, (incoming)[${[...n.incoming.keys()].join(", ")}], (outgoing)[${[...n.outgoing.keys()].join(",")}]`);return e.join(`
`)}findCycleSlow(){for(let[e,t]of this._nodes){const n=new Set([e]),s=this._findCycle(t,n);if(s)return s}}_findCycle(e,t){for(let[n,s]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const r=this._findCycle(s,t);if(r)return r;t.delete(n)}}}class vW extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class bD{constructor(e=new Jv,t=!1,n){this._activeInstantiations=new Set,this._services=e,this._strict=t,this._parent=n,this._services.set(Wt,this)}createChild(e){return new bD(e,this._strict,this)}invokeFunction(e,...t){let n=_o.traceInvocation(e),s=!1;try{return e({get:(o,a)=>{if(s)throw wCe("service accessor is only valid during the invocation of its target method");const l=this._getOrCreateServiceInstance(o,n);if(!l&&a!==$Ce)throw new Error(`[invokeFunction] unknown service '${o}'`);return l}},...t)}finally{s=!0,n.stop()}}createInstance(e,...t){let n,s;return e instanceof Sh?(n=_o.traceCreation(e.ctor),s=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=_o.traceCreation(e),s=this._createInstance(e,t,n)),n.stop(),s}_createInstance(e,t=[],n){let s=sa.getServiceDependencies(e).sort((a,l)=>a.index-l.index),r=[];for(const a of s){let l=this._getOrCreateServiceInstance(a.id,n);if(!l&&this._strict&&!a.optional)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`);r.push(l)}let o=s.length>0?s[0].index:t.length;if(t.length!==o){console.warn(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);let a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return new e(...t,...r)}_setServiceInstance(e,t){if(this._services.get(e)instanceof Sh)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){let n=this._getServiceInstanceOrDescriptor(e);return n instanceof Sh?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){const s=new Z4e(a=>a.id.toString());let r=0;const o=[{id:e,desc:t,_trace:n}];for(;o.length;){const a=o.pop();if(s.lookupOrInsertNode(a),r++>1e3)throw new vW(s);for(let l of sa.getServiceDependencies(a.desc.ctor)){let c=this._getServiceInstanceOrDescriptor(l.id);if(!c&&!l.optional&&console.warn(`[createInstance] ${e} depends on ${l.id} which is NOT registered.`),c instanceof Sh){const h={id:l.id,desc:c,_trace:a._trace.branch(l.id,!0)};s.insertEdge(a,h),o.push(h)}}}for(;;){const a=s.roots();if(a.length===0){if(!s.isEmpty())throw new vW(s);break}for(const{data:l}of a){if(this._getServiceInstanceOrDescriptor(l.id)instanceof Sh){const h=this._createServiceInstanceWithOwner(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this._setServiceInstance(l.id,h)}s.removeNode(l)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],s,r){if(this._services.get(e)instanceof Sh)return this._createServiceInstance(t,n,s,r);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,s,r);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],n,s){if(n){const r=new ab(()=>this._createInstance(e,t,s));return new Proxy(Object.create(null),{get(o,a){if(a in o)return o[a];let l=r.value,c=l[a];return typeof c!="function"||(c=c.bind(l),o[a]=c),c},set(o,a,l){return r.value[a]=l,!0}})}else return this._createInstance(e,t,s)}}class _o{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return _o._None}static traceCreation(e){return _o._None}branch(e,t){let n=new _o(2,e.toString());return this._dep.push([e,t,n]),n}stop(){let e=Date.now()-this._start;_o._totals+=e;let t=!1;function n(r,o){let a=[],l=new Array(r+1).join("	");for(const[c,h,u]of o._dep)if(h&&u){t=!0,a.push(`${l}CREATES -> ${c}`);let d=n(r+1,u);d&&a.push(d)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}let s=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${_o._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(s.join(`
`))}}_o._None=new class extends _o{constructor(){super(-1,null)}stop(){}branch(){return this}};_o._totals=0;const Ew=mt("labelService");class Y4e{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(s=>s.splice(e,t,n))}}class ed extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function wW(i,e){const t=[];for(let n of e){if(i.start>=n.range.end)continue;if(i.end<n.range.start)break;const s=In.intersect(i,n.range);In.isEmpty(s)||t.push({range:s,size:n.size})}return t}function g4({start:i,end:e},t){return{start:i+t,end:e+t}}function Q4e(i){const e=[];let t=null;for(let n of i){const s=n.range.start,r=n.range.end,o=n.size;if(t&&o===t.size){t.range.end=r;continue}t={range:{start:s,end:r},size:o},e.push(t)}return e}function X4e(...i){return Q4e(i.reduce((e,t)=>e.concat(t),[]))}class yW{constructor(){this.groups=[],this._size=0}splice(e,t,n=[]){const s=n.length-t,r=wW({start:0,end:e},this.groups),o=wW({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:g4(l.range,s),size:l.size})),a=n.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=X4e(r,a,o),this._size=this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,n=0;for(let s of this.groups){const r=s.range.end-s.range.start,o=n+r*s.size;if(e<o)return t+Math.floor((e-n)/s.size);t+=r,n=o}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(let s of this.groups){const r=s.range.end-s.range.start,o=n+r;if(e<o)return t+(e-n)*s.size;t+=r*s.size,n=o}return-1}}function J4e(i){try{i.parentElement&&i.parentElement.removeChild(i)}catch{}}class e3e{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){const n=ue(".monaco-list-row"),r=this.getRenderer(e).renderTemplate(n);t={domNode:n,templateId:e,templateData:r}}return t}release(e){e&&this.releaseRow(e)}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(t.classList.remove("scrolling"),J4e(t)),this.getTemplateCache(n).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var cg=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const ja={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(i){return[i]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class Iw{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class t3e{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class i3e{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}}function n3e(i,e){return Array.isArray(i)&&Array.isArray(e)?Ll(i,e):i===e}class s3e{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,s)=>s,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}class Ra{constructor(e,t,n,s=ja){if(this.virtualDelegate=t,this.domId=`list_id_${++Ra.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new y0(50),this.splicing=!1,this.dragOverAnimationStopDisposable=te.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=te.None,this.onDragLeaveTimeout=te.None,this.disposables=new de,this._onDidChangeContentHeight=new z,this._horizontalScrolling=!1,s.horizontalScrolling&&s.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new yW;for(const o of n)this.renderers.set(o.templateId,o);this.cache=this.disposables.add(new e3e(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof s.mouseSupport=="boolean"?s.mouseSupport:!0),this._horizontalScrolling=$a(s,o=>o.horizontalScrolling,ja.horizontalScrolling),this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=typeof s.additionalScrollHeight>"u"?0:s.additionalScrollHeight,this.accessibilityProvider=new s3e(s.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",$a(s,o=>o.transformOptimization,ja.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(kt.addTarget(this.rowsContainer)),this.scrollable=new yk($a(s,o=>o.smoothScrolling,!1)?125:0,o=>Al(o)),this.scrollableElement=this.disposables.add(new eP(this.rowsContainer,{alwaysConsumeMouseWheel:$a(s,o=>o.alwaysConsumeMouseWheel,ja.alwaysConsumeMouseWheel),horizontal:1,vertical:$a(s,o=>o.verticalScrollMode,ja.verticalScrollMode),useShadows:$a(s,o=>o.useShadows,ja.useShadows),mouseWheelScrollSensitivity:s.mouseWheelScrollSensitivity,fastScrollSensitivity:s.fastScrollSensitivity},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(ne(this.rowsContainer,Ut.Change,o=>this.onTouchChange(o))),this.disposables.add(ne(this.scrollableElement.getDomNode(),"scroll",o=>o.target.scrollTop=0)),this.disposables.add(ne(this.domNode,"dragover",o=>this.onDragOver(this.toDragEvent(o)))),this.disposables.add(ne(this.domNode,"drop",o=>this.onDrop(this.toDragEvent(o)))),this.disposables.add(ne(this.domNode,"dragleave",o=>this.onDragLeave(this.toDragEvent(o)))),this.disposables.add(ne(this.domNode,"dragend",o=>this.onDragEnd(o))),this.setRowLineHeight=$a(s,o=>o.setRowLineHeight,ja.setRowLineHeight),this.setRowHeight=$a(s,o=>o.setRowHeight,ja.setRowHeight),this.supportDynamicHeights=$a(s,o=>o.supportDynamicHeights,ja.supportDynamicHeights),this.dnd=$a(s,o=>o.dnd,ja.dnd),this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:kA(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling),e.mouseWheelScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({fastScrollSensitivity:e.fastScrollSensitivity})}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){const s=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r={start:e,end:e+t},o=In.intersect(s,r),a=new Map;for(let k=o.start;k<o.end;k++){const S=this.items[k];if(S.dragStartDisposable.dispose(),S.row){let L=a.get(S.templateId);L||(L=[],a.set(S.templateId,L));const D=this.renderers.get(S.templateId);D&&D.disposeElement&&D.disposeElement(S.element,k,S.row.templateData,S.size),L.push(S.row)}S.row=null}const l={start:e+t,end:this.items.length},c=In.intersect(l,s),h=In.relativeComplement(l,s),u=n.map(k=>({id:String(this.itemId++),element:k,templateId:this.virtualDelegate.getTemplateId(k),size:this.virtualDelegate.getHeight(k),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(k),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:te.None}));let d;e===0&&t>=this.items.length?(this.rangeMap=new yW,this.rangeMap.splice(0,0,u),d=this.items,this.items=u):(this.rangeMap.splice(e,t,u),d=this.items.splice(e,t,...u));const f=n.length-t,g=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),p=g4(c,f),m=In.intersect(g,p);for(let k=m.start;k<m.end;k++)this.updateItemInDOM(this.items[k],k);const v=In.relativeComplement(p,g);for(const k of v)for(let S=k.start;S<k.end;S++)this.removeItemFromDOM(S);const b=h.map(k=>g4(k,f)),y=[{start:e,end:e+n.length},...b].map(k=>In.intersect(g,k)),x=this.getNextToLastElement(y);for(const k of y)for(let S=k.start;S<k.end;S++){const L=this.items[S],D=a.get(L.templateId),N=D==null?void 0:D.pop();this.insertItemInDOM(S,x,N)}for(const k of a.values())for(const S of k)this.cache.release(S);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),d.map(k=>k.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=Al(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10})}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let n={height:typeof e=="number"?e:pSe(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:kA(this.domNode)})}render(e,t,n,s,r,o=!1){const a=this.getRenderRange(t,n),l=In.relativeComplement(a,e),c=In.relativeComplement(e,a),h=this.getNextToLastElement(l);if(o){const u=In.intersect(e,a);for(let d=u.start;d<u.end;d++)this.updateItemInDOM(this.items[d],d)}for(const u of l)for(let d=u.start;d<u.end;d++)this.insertItemInDOM(d,h);for(const u of c)for(let d=u.start;d<u.end;d++)this.removeItemFromDOM(d);s!==void 0&&(this.rowsContainer.style.left=`-${s}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&r!==void 0&&(this.rowsContainer.style.width=`${Math.max(r,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t,n){const s=this.items[e];s.row||(s.row=n??this.cache.alloc(s.templateId));const r=this.accessibilityProvider.getRole(s.element)||"listitem";s.row.domNode.setAttribute("role",r);const o=this.accessibilityProvider.isChecked(s.element);typeof o<"u"&&s.row.domNode.setAttribute("aria-checked",String(!!o)),s.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(s.row.domNode,t):this.rowsContainer.appendChild(s.row.domNode)),this.updateItemInDOM(s,e);const a=this.renderers.get(s.templateId);if(!a)throw new Error(`No renderer found for template id ${s.templateId}`);a&&a.renderElement(s.element,e,s.row.templateData,s.size);const l=this.dnd.getDragURI(s.element);s.dragStartDisposable.dispose(),s.row.domNode.draggable=!!l,l&&(s.dragStartDisposable=ne(s.row.domNode,"dragstart",c=>this.onDragStart(s.element,l,c))),this.horizontalScrolling&&(this.measureItemWidth(s),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=ks?"-moz-fit-content":"fit-content",e.width=kA(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return ke.map(this.disposables.add(new Bt(this.domNode,"click")).event,e=>this.toMouseEvent(e))}get onMouseDblClick(){return ke.map(this.disposables.add(new Bt(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e))}get onMouseMiddleClick(){return ke.filter(ke.map(this.disposables.add(new Bt(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e)),e=>e.browserEvent.button===1)}get onMouseDown(){return ke.map(this.disposables.add(new Bt(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e))}get onContextMenu(){return ke.any(ke.map(this.disposables.add(new Bt(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e)),ke.map(this.disposables.add(new Bt(this.domNode,Ut.Contextmenu)).event,e=>this.toGestureEvent(e)))}get onTouchStart(){return ke.map(this.disposables.add(new Bt(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e))}get onTap(){return ke.map(this.disposables.add(new Bt(this.rowsContainer,Ut.Tap)).event,e=>this.toGestureEvent(e))}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){if(!n.dataTransfer)return;const s=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(CX.TEXT,t),n.dataTransfer.setDragImage){let r;this.dnd.getDragLabel&&(r=this.dnd.getDragLabel(s,n)),typeof r>"u"&&(r=String(s.length));const o=ue(".monaco-drag-image");o.textContent=r,document.body.appendChild(o),n.dataTransfer.setDragImage(o,-10,-10),setTimeout(()=>document.body.removeChild(o),0)}this.currentDragData=new Iw(s),lc.CurrentDragAndDropData=new t3e(s),this.dnd.onDragStart&&this.dnd.onDragStart(this.currentDragData,n)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),lc.CurrentDragAndDropData&&lc.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(lc.CurrentDragAndDropData)this.currentDragData=lc.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new i3e}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect===0?"copy":"move";let n;if(typeof t!="boolean"&&t.feedback?n=t.feedback:typeof e.index>"u"?n=[-1]:n=[e.index],n=Ix(n).filter(s=>s>=-1&&s<this.length).sort((s,r)=>s-r),n=n[0]===-1?[-1]:n,n3e(this.currentDragFeedback,n))return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=gt(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(const s of n){const r=this.items[s];r.dropTarget=!0,r.row&&r.row.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=gt(()=>{for(const s of n){const r=this.items[s];r.dropTarget=!1,r.row&&r.row.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=wm(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((n=(t=this.dnd).onDragLeave)===null||n===void 0||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,lc.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,lc.CurrentDragAndDropData=void 0,this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=te.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=zZ(this.domNode).top;this.dragOverAnimationDisposable=SSe(this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=wm(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;n instanceof HTMLElement&&n!==this.rowsContainer&&t.contains(n);){const s=n.getAttribute("data-index");if(s){const r=Number(s);if(!isNaN(r))return r}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){const s=this.getRenderRange(e,t);let r,o;e===this.elementTop(s.start)?(r=s.start,o=0):s.end-s.start>1&&(r=s.start+1,o=this.elementTop(r)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let h=l.start;h<l.end;h++){const u=this.probeDynamicHeight(h);u!==0&&this.rangeMap.splice(h,1,[this.items[h]]),a+=u,c=c||u!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const h=In.relativeComplement(s,l);for(const d of h)for(let f=d.start;f<d.end;f++)this.items[f].row&&this.removeItemFromDOM(f);const u=In.relativeComplement(l,s);for(const d of u)for(let f=d.start;f<d.end;f++){const g=f+1,p=g<this.items.length?this.items[g].row:null,m=p?p.domNode:null;this.insertItemInDOM(f,m)}for(let d=l.start;d<l.end;d++)this.items[d].row&&this.updateItemInDOM(this.items[d],d);if(typeof r=="number"){const d=this.scrollable.getFutureScrollPosition().scrollTop-e,f=this.elementTop(r)-o+d;this.setScrollTop(f,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const o=this.virtualDelegate.getDynamicHeight(t.element);if(o!==null){const a=t.size;return t.size=o,t.lastDynamicHeightWidth=this.renderWidth,o-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const n=t.size;if(!this.setRowHeight&&t.row){let o=t.row.domNode.offsetHeight;return t.size=o,t.lastDynamicHeightWidth=this.renderWidth,o-n}const s=this.cache.alloc(t.templateId);s.domNode.style.height="",this.rowsContainer.appendChild(s.domNode);const r=this.renderers.get(t.templateId);return r&&(r.renderElement(t.element,e,s.templateData,void 0),r.disposeElement&&r.disposeElement(t.element,e,s.templateData,void 0)),t.size=s.domNode.offsetHeight,this.virtualDelegate.setDynamicHeight&&this.virtualDelegate.setDynamicHeight(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(s.domNode),this.cache.release(s),t.size-n}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const n=this.items[t.end];return!n||!n.row?null:n.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){if(this.items){for(const e of this.items)if(e.row){const t=this.renderers.get(e.row.templateId);t&&(t.disposeElement&&t.disposeElement(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),at(this.disposables)}}Ra.InstanceCount=0;cg([Zi],Ra.prototype,"onMouseClick",null);cg([Zi],Ra.prototype,"onMouseDblClick",null);cg([Zi],Ra.prototype,"onMouseMiddleClick",null);cg([Zi],Ra.prototype,"onMouseDown",null);cg([Zi],Ra.prototype,"onContextMenu",null);cg([Zi],Ra.prototype,"onTouchStart",null);cg([Zi],Ra.prototype,"onTap",null);var hg=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},CW=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class r3e{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.trait}`}renderTemplate(e){return e}renderElement(e,t,n){const s=this.renderedElements.findIndex(r=>r.templateData===n);if(s>=0){const r=this.renderedElements[s];this.trait.unrender(n),r.index=t}else{const r={index:t,templateData:n};this.renderedElements.push(r)}this.trait.renderIndex(t,n)}splice(e,t,n){const s=[];for(const r of this.renderedElements)r.index<e?s.push(r):r.index>=e+t&&s.push({index:r.index+n-t,templateData:r.templateData});this.renderedElements=s}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}}let vD=class{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new z,this.onChange=this._onChange.event}get trait(){return this._trait}get renderer(){return new r3e(this)}splice(e,t,n){var s;t=Math.max(0,Math.min(t,this.length-e));const r=n.length-t,o=e+t,a=[...this.sortedIndexes.filter(c=>c<e),...n.map((c,h)=>c?h+e:-1).filter(c=>c!==-1),...this.sortedIndexes.filter(c=>c>=o).map(c=>c+r)],l=this.length+r;if(this.sortedIndexes.length>0&&a.length===0&&l>0){const c=(s=this.sortedIndexes.find(h=>h>=e))!==null&&s!==void 0?s:l-1;a.push(Math.min(c,l-1))}this.renderer.splice(e,t,n.length),this._set(a,a),this.length=l}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(xW),t)}_set(e,t,n){const s=this.indexes,r=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const o=p4(r,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:n}),s}get(){return this.indexes}contains(e){return p5(this.sortedIndexes,e,xW)>=0}dispose(){at(this._onChange)}};hg([Zi],vD.prototype,"renderer",null);class o3e extends vD{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class FE{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,n.map(()=>!1));const s=this.trait.get().map(o=>this.identityProvider.getId(this.view.element(o)).toString()),r=n.map(o=>s.indexOf(this.identityProvider.getId(o).toString())>-1);this.trait.splice(e,t,r)}}function Cu(i){return i.tagName==="INPUT"||i.tagName==="TEXTAREA"}function bp(i){return i.classList.contains("monaco-editor")?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:bp(i.parentElement)}class QX{constructor(e,t,n){this.list=e,this.view=t,this.disposables=new de,this.multipleSelectionDisposables=new de,this.onKeyDown.filter(s=>s.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===9).on(this.onEscape,this,this.disposables),n.multipleSelectionSupport!==!1&&this.onKeyDown.filter(s=>(ht?s.metaKey:s.ctrlKey)&&s.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return ke.chain(this.disposables.add(new Bt(this.view.domNode,"keydown")).event).filter(e=>!Cu(e.target)).map(e=>new li(e))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(t=>(ht?t.metaKey:t.ctrlKey)&&t.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(ss(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}hg([Zi],QX.prototype,"onKeyDown",null);var vp;(function(i){i[i.Idle=0]="Idle",i[i.Typing=1]="Typing"})(vp||(vp={}));const XX=new class{mightProducePrintableCharacter(i){return i.ctrlKey||i.metaKey||i.altKey?!1:i.keyCode>=31&&i.keyCode<=56||i.keyCode>=21&&i.keyCode<=30||i.keyCode>=93&&i.keyCode<=102||i.keyCode>=80&&i.keyCode<=90}};class a3e{constructor(e,t,n,s){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.delegate=s,this.enabled=!1,this.state=vp.Idle,this.automaticKeyboardNavigation=!0,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new de,this.disposables=new de,this.updateOptions(e.options)}updateOptions(e){(typeof e.enableKeyboardNavigation>"u"?!0:!!e.enableKeyboardNavigation)?this.enable():this.disable(),typeof e.automaticKeyboardNavigation<"u"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation)}enable(){if(this.enabled)return;const e=ke.chain(this.enabledDisposables.add(new Bt(this.view.domNode,"keydown")).event).filter(s=>!Cu(s.target)).filter(()=>this.automaticKeyboardNavigation||this.triggered).map(s=>new li(s)).filter(s=>this.delegate.mightProducePrintableCharacter(s)).forEach(s=>{s.stopPropagation(),s.preventDefault()}).map(s=>s.browserEvent.key).event,t=ke.debounce(e,()=>null,800);ke.reduce(ke.any(e,t),(s,r)=>r===null?null:(s||"")+r)(this.onInput,this,this.enabledDisposables),t(this.onClear,this,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const n=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));n&&ng(n)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=vp.Idle,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,s=this.state===vp.Idle?1:0;this.state=vp.Typing;for(let r=0;r<this.list.length;r++){const o=(n+r+s)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),l=a&&a.toString();if(typeof l>"u"||mP(e,l)){this.previouslyFocused=n,this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class l3e{constructor(e,t){this.list=e,this.view=t,this.disposables=new de,ke.chain(this.disposables.add(new Bt(t.domNode,"keydown")).event).filter(s=>!Cu(s.target)).map(s=>new li(s)).filter(s=>s.keyCode===2&&!s.ctrlKey&&!s.metaKey&&!s.shiftKey&&!s.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const s=n.querySelector("[tabIndex]");if(!s||!(s instanceof HTMLElement)||s.tabIndex===-1)return;const r=window.getComputedStyle(s);r.visibility==="hidden"||r.display==="none"||(e.preventDefault(),e.stopPropagation(),s.focus())}dispose(){this.disposables.dispose()}}function JX(i){return ht?i.browserEvent.metaKey:i.browserEvent.ctrlKey}function eJ(i){return i.browserEvent.shiftKey}function c3e(i){return i instanceof MouseEvent&&i.button===2}const SW={isSelectionSingleChangeEvent:JX,isSelectionRangeChangeEvent:eJ};class tJ{constructor(e){this.list=e,this.disposables=new de,this._onPointer=new z,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||SW),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(kt.addTarget(e.getHTMLElement()))),ke.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||SW))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){bp(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(bp(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||Cu(e.browserEvent.target)||bp(e.browserEvent.target))return;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(e))return this.changeSelection(e);if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),c3e(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(Cu(e.browserEvent.target)||bp(e.browserEvent.target)||this.isSelectionChangeEvent(e))return;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof n>"u"){const h=this.list.getFocus()[0];n=h??t,this.list.setAnchor(n)}const s=Math.min(n,t),r=Math.max(n,t),o=ss(s,r+1),a=this.list.getSelection(),l=d3e(p4(a,[n]),n);if(l.length===0)return;const c=p4(o,f3e(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const s=this.list.getSelection(),r=s.filter(o=>o!==t);this.list.setFocus([t]),this.list.setAnchor(t),s.length===r.length?this.list.setSelection([...r,t],e.browserEvent):this.list.setSelection(r,e.browserEvent)}}dispose(){this.disposables.dispose()}}class iJ{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&(e.listBackground.isOpaque()?n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`):ht||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.listFilterWidgetBackground&&n.push(`.monaco-list-type-filter { background-color: ${e.listFilterWidgetBackground} }`),e.listFilterWidgetOutline&&n.push(`.monaco-list-type-filter { border: 1px solid ${e.listFilterWidgetOutline}; }`),e.listFilterWidgetNoMatchesOutline&&n.push(`.monaco-list-type-filter.no-matches { border: 1px solid ${e.listFilterWidgetNoMatchesOutline}; }`),e.listMatchesShadow&&n.push(`.monaco-list-type-filter { box-shadow: 1px 1px 1px ${e.listMatchesShadow}; }`),e.tableColumnsBorder&&n.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
			}`),this.styleElement.textContent=n.join(`
`)}}const h3e={listFocusBackground:Z.fromHex("#7FB0D0"),listActiveSelectionBackground:Z.fromHex("#0E639C"),listActiveSelectionForeground:Z.fromHex("#FFFFFF"),listActiveSelectionIconForeground:Z.fromHex("#FFFFFF"),listFocusAndSelectionBackground:Z.fromHex("#094771"),listFocusAndSelectionForeground:Z.fromHex("#FFFFFF"),listInactiveSelectionBackground:Z.fromHex("#3F3F46"),listInactiveSelectionIconForeground:Z.fromHex("#FFFFFF"),listHoverBackground:Z.fromHex("#2A2D2E"),listDropBackground:Z.fromHex("#383B3D"),treeIndentGuidesStroke:Z.fromHex("#a9a9a9"),tableColumnsBorder:Z.fromHex("#cccccc").transparent(.2)},u3e={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function d3e(i,e){const t=i.indexOf(e);if(t===-1)return[];const n=[];let s=t-1;for(;s>=0&&i[s]===e-(t-s);)n.push(i[s--]);for(n.reverse(),s=t;s<i.length&&i[s]===e+(s-t);)n.push(i[s++]);return n}function p4(i,e){const t=[];let n=0,s=0;for(;n<i.length||s<e.length;)if(n>=i.length)t.push(e[s++]);else if(s>=e.length)t.push(i[n++]);else if(i[n]===e[s]){t.push(i[n]),n++,s++;continue}else i[n]<e[s]?t.push(i[n++]):t.push(e[s++]);return t}function f3e(i,e){const t=[];let n=0,s=0;for(;n<i.length||s<e.length;)if(n>=i.length)t.push(e[s++]);else if(s>=e.length)t.push(i[n++]);else if(i[n]===e[s]){n++,s++;continue}else i[n]<e[s]?t.push(i[n++]):s++;return t}const xW=(i,e)=>i-e;class g3e{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,s){let r=0;for(const o of this.renderers)o.renderElement(e,t,n[r++],s)}disposeElement(e,t,n,s){let r=0;for(const o of this.renderers)o.disposeElement&&o.disposeElement(e,t,n[r],s),r+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}class p3e{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,n){const s=this.accessibilityProvider.getAriaLabel(e);s?n.setAttribute("aria-label",s):n.removeAttribute("aria-label");const r=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof r=="number"?n.setAttribute("aria-level",`${r}`):n.removeAttribute("aria-level")}disposeTemplate(e){}}class m3e{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(e,t)}onDragOver(e,t,n,s){return this.dnd.onDragOver(e,t,n,s)}onDragLeave(e,t,n,s){var r,o;(o=(r=this.dnd).onDragLeave)===null||o===void 0||o.call(r,e,t,n,s)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}drop(e,t,n,s){this.dnd.drop(e,t,n,s)}}class Wl{constructor(e,t,n,s,r=u3e){var o;this.user=e,this._options=r,this.focus=new vD("focused"),this.anchor=new vD("anchor"),this.eventBufferer=new zO,this._ariaLabel="",this.disposables=new de,this._onDidDispose=new z,this.onDidDispose=this._onDidDispose.event;const a=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(o=this._options.accessibilityProvider)===null||o===void 0?void 0:o.getWidgetRole():"list";this.selection=new o3e(a!=="listbox"),Ma(r,h3e,!1);const l=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=r.accessibilityProvider,this.accessibilityProvider&&(l.push(new p3e(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant&&this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant,this,this.disposables)),s=s.map(h=>new g3e(h.templateId,[...l,h]));const c=Object.assign(Object.assign({},r),{dnd:r.dnd&&new m3e(this,r.dnd)});if(this.view=new Ra(t,n,s,c),this.view.domNode.setAttribute("role",a),r.styleController)this.styleController=r.styleController(this.view.domId);else{const h=jr(this.view.domNode);this.styleController=new iJ(h,this.view.domId)}if(this.spliceable=new Y4e([new FE(this.focus,this.view,r.identityProvider),new FE(this.selection,this.view,r.identityProvider),new FE(this.anchor,this.view,r.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new l3e(this,this.view)),(typeof r.keyboardSupport!="boolean"||r.keyboardSupport)&&(this.keyboardController=new QX(this,this.view,r),this.disposables.add(this.keyboardController)),r.keyboardNavigationLabelProvider){const h=r.keyboardNavigationDelegate||XX;this.typeLabelController=new a3e(this,this.view,r.keyboardNavigationLabelProvider,h),this.disposables.add(this.typeLabelController)}this.mouseController=this.createMouseController(r),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return ke.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e))}get onDidChangeSelection(){return ke.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e))}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=ke.chain(this.disposables.add(new Bt(this.view.domNode,"keydown")).event).map(r=>new li(r)).filter(r=>e=r.keyCode===58||r.shiftKey&&r.keyCode===68).map(XV).filter(()=>!1).event,n=ke.chain(this.disposables.add(new Bt(this.view.domNode,"keyup")).event).forEach(()=>e=!1).map(r=>new li(r)).filter(r=>r.keyCode===58||r.shiftKey&&r.keyCode===68).map(XV).map(({browserEvent:r})=>{const o=this.getFocus(),a=o.length?o[0]:void 0,l=typeof a<"u"?this.view.element(a):void 0,c=typeof a<"u"?this.view.domElement(a):this.view.domNode;return{index:a,element:l,anchor:c,browserEvent:r}}).event,s=ke.chain(this.view.onContextMenu).filter(r=>!e).map(({element:r,index:o,browserEvent:a})=>({element:r,index:o,anchor:{x:a.pageX+1,y:a.pageY},browserEvent:a})).event;return ke.any(t,n,s)}get onKeyDown(){return this.disposables.add(new Bt(this.view.domNode,"keydown")).event}get onDidFocus(){return ke.signal(this.disposables.add(new Bt(this.view.domNode,"focus",!0)).event)}createMouseController(e){return new tJ(this)}updateOptions(e={}){var t;this._options=Object.assign(Object.assign({},this._options),e),this.typeLabelController&&this.typeLabelController.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(t=this.keyboardController)===null||t===void 0||t.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new ed(this.user,`Invalid start index: ${e}`);if(t<0)throw new ed(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new ed(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new ed(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return xM(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new ed(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,s){if(this.length===0)return;const r=this.focus.get(),o=this.findNextIndex(r.length>0?r[0]+e:0,t,s);o>-1&&this.setFocus([o],n)}focusPrevious(e=1,t=!1,n,s){if(this.length===0)return;const r=this.focus.get(),o=this.findPreviousIndex(r.length>0?r[0]-e:0,t,s);o>-1&&this.setFocus([o],n)}focusNextPage(e,t){return CW(this,void 0,void 0,function*(){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const s=this.view.element(n),r=this.getFocusedElements()[0];if(r!==s){const o=this.findPreviousIndex(n,!1,t);o>-1&&r!==this.view.element(o)?this.setFocus([o],e):this.setFocus([n],e)}else{const o=this.view.getScrollTop();this.view.setScrollTop(o+this.view.renderHeight-this.view.elementHeight(n)),this.view.getScrollTop()!==o&&(this.setFocus([]),yield xv(0),yield this.focusNextPage(e,t))}})}focusPreviousPage(e,t){return CW(this,void 0,void 0,function*(){let n;const s=this.view.getScrollTop();s===0?n=this.view.indexAt(s):n=this.view.indexAfter(s-1);const r=this.view.element(n),o=this.getFocusedElements()[0];if(o!==r){const a=this.findNextIndex(n,!1,t);a>-1&&o!==this.view.element(a)?this.setFocus([a],e):this.setFocus([n],e)}else{const a=s;this.view.setScrollTop(s-this.view.renderHeight),this.view.getScrollTop()!==a&&(this.setFocus([]),yield xv(0),yield this.focusPreviousPage(e,t))}})}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const s=this.findNextIndex(e,!1,n);s>-1&&this.setFocus([s],t)}findNextIndex(e,t=!1,n){for(let s=0;s<this.length;s++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let s=0;s<this.length;s++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new ed(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),s=this.view.elementTop(e),r=this.view.elementHeight(e);if(Cf(t)){const o=r-this.view.renderHeight;this.view.setScrollTop(o*uo(t,0,1)+s)}else{const o=s+r,a=n+this.view.renderHeight;s<n&&o>=a||(s<n||o>=a&&r>=this.view.renderHeight?this.view.setScrollTop(s):o>=a&&this.view.setScrollTop(o-this.view.renderHeight))}}getRelativeTop(e){if(e<0||e>=this.length)throw new ed(this.user,`Invalid index ${e}`);const t=this.view.getScrollTop(),n=this.view.elementTop(e),s=this.view.elementHeight(e);if(n<t||n+s>t+this.view.renderHeight)return null;const r=s-this.view.renderHeight;return Math.abs((t-n)/r)}getHTMLElement(){return this.view.domNode}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let n;!((e=this.accessibilityProvider)===null||e===void 0)&&e.getActiveDescendantId&&(n=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",n||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}hg([Zi],Wl.prototype,"onDidChangeFocus",null);hg([Zi],Wl.prototype,"onDidChangeSelection",null);hg([Zi],Wl.prototype,"onContextMenu",null);hg([Zi],Wl.prototype,"onKeyDown",null);hg([Zi],Wl.prototype,"onDidFocus",null);class _3e{constructor(e,t){this.renderer=e,this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:te.None}}renderElement(e,t,n,s){if(n.disposable&&n.disposable.dispose(),!n.data)return;const r=this.modelProvider();if(r.isResolved(e))return this.renderer.renderElement(r.get(e),e,n.data,s);const o=new Na,a=r.resolve(e,o.token);n.disposable={dispose:()=>o.cancel()},this.renderer.renderPlaceholder(e,n.data),a.then(l=>this.renderer.renderElement(l,e,n.data,s))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class b3e{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function v3e(i,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new b3e(i,e.accessibilityProvider)})}class w3e{constructor(e,t,n,s,r={}){const o=()=>this.model,a=s.map(l=>new _3e(l,o));this.list=new Wl(e,t,n,a,v3e(o,r))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return ke.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return ke.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeSelection(){return ke.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(s=>this._model.get(s)),indexes:t,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,ss(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}const y3e={separatorBorder:Z.transparent};class nJ{constructor(e,t,n,s){this.container=e,this.view=t,this.disposable=s,this._cachedVisibleSize=void 0,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){e!==this.visible&&(e?(this.size=uo(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){return this.disposable.dispose(),this.view}}class C3e extends nJ{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class S3e extends nJ{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var cc;(function(i){i[i.Idle=0]="Idle",i[i.Busy=1]="Busy"})(cc||(cc={}));var wD;(function(i){i.Distribute={type:"distribute"};function e(n){return{type:"split",index:n}}i.Split=e;function t(n){return{type:"invisible",cachedVisibleSize:n}}i.Invisible=t})(wD||(wD={}));class sJ extends te{constructor(e,t={}){var n,s;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=cc.Idle,this._onDidSashChange=this._register(new z),this.onDidSashChange=this._onDidSashChange.event,this._onDidSashReset=this._register(new z),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.orientation=cs(t.orientation)?0:t.orientation,this.inverseAltBehavior=!!t.inverseAltBehavior,this.proportionalLayout=cs(t.proportionalLayout)?!0:!!t.proportionalLayout,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=se(this.el,ue(".sash-container")),this.viewContainer=ue(".split-view-container"),this.scrollable=new yk(125,Al),this.scrollableElement=this._register(new eP(this.viewContainer,{vertical:this.orientation===0?(n=t.scrollbarVisibility)!==null&&n!==void 0?n:1:2,horizontal:this.orientation===1?(s=t.scrollbarVisibility)!==null&&s!==void 0?s:1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(r=>{this.viewContainer.scrollTop=r.scrollTop,this.viewContainer.scrollLeft=r.scrollLeft})),se(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||y3e),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((r,o)=>{const a=cs(r.visible)||r.visible?r.size:{type:"invisible",cachedVisibleSize:r.size},l=r.view;this.doAddView(l,a,o,!0)}),this.contentSize=this.viewItems.reduce((r,o)=>r+o.size,0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}get orthogonalEndSash(){return this._orthogonalEndSash}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,s){this.doAddView(e,t,n,s)}layout(e,t){const n=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions)for(let s=0;s<this.viewItems.length;s++){const r=this.viewItems[s];r.size=uo(Math.round(this.proportions[s]*e),r.minimumSize,r.maximumSize)}else{const s=ss(this.viewItems.length),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,r,o)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}onSashStart({sash:e,start:t,alt:n}){for(const a of this.viewItems)a.enabled=!1;const s=this.sashItems.findIndex(a=>a.sash===e),r=Kh(ne(document.body,"keydown",a=>o(this.sashDragState.current,a.altKey)),ne(document.body,"keyup",()=>o(this.sashDragState.current,!1))),o=(a,l)=>{const c=this.viewItems.map(g=>g.size);let h=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(s===this.sashItems.length-1){const p=this.viewItems[s];h=(p.minimumSize-p.size)/2,u=(p.maximumSize-p.size)/2}else{const p=this.viewItems[s+1];h=(p.size-p.maximumSize)/2,u=(p.size-p.minimumSize)/2}let d,f;if(!l){const g=ss(s,-1),p=ss(s+1,this.viewItems.length),m=g.reduce((L,D)=>L+(this.viewItems[D].minimumSize-c[D]),0),v=g.reduce((L,D)=>L+(this.viewItems[D].viewMaximumSize-c[D]),0),b=p.length===0?Number.POSITIVE_INFINITY:p.reduce((L,D)=>L+(c[D]-this.viewItems[D].minimumSize),0),w=p.length===0?Number.NEGATIVE_INFINITY:p.reduce((L,D)=>L+(c[D]-this.viewItems[D].viewMaximumSize),0),y=Math.max(m,w),x=Math.min(b,v),k=this.findFirstSnapIndex(g),S=this.findFirstSnapIndex(p);if(typeof k=="number"){const L=this.viewItems[k],D=Math.floor(L.viewMinimumSize/2);d={index:k,limitDelta:L.visible?y-D:y+D,size:L.size}}if(typeof S=="number"){const L=this.viewItems[S],D=Math.floor(L.viewMinimumSize/2);f={index:S,limitDelta:L.visible?x+D:x-D,size:L.size}}}this.sashDragState={start:a,current:a,index:s,sizes:c,minDelta:h,maxDelta:u,alt:l,snapBefore:d,snapAfter:f,disposable:r}};o(t,n)}onSashChange({current:e}){const{index:t,start:n,sizes:s,alt:r,minDelta:o,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const h=e-n,u=this.resize(t,h,s,void 0,void 0,o,a,l,c);if(r){const d=t===this.sashItems.length-1,f=this.viewItems.map(w=>w.size),g=d?t:t+1,p=this.viewItems[g],m=p.size-p.maximumSize,v=p.size-p.minimumSize,b=d?t-1:t+1;this.resize(b,-u,f,void 0,void 0,m,v)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=uo(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(this.state!==cc.Idle)throw new Error("Cant modify splitview");if(this.state=cc.Busy,e<0||e>=this.viewItems.length)return;const n=ss(this.viewItems.length).filter(a=>a!==e),s=[...n.filter(a=>this.viewItems[a].priority===1),e],r=n.filter(a=>this.viewItems[a].priority===2),o=this.viewItems[e];t=Math.round(t),t=uo(t,o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=t,this.relayout(s,r),this.state=cc.Idle}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const n=Math.floor(t/e.length);for(const a of e)a.size=uo(n,a.minimumSize,a.maximumSize);const s=ss(this.viewItems.length),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);this.relayout(r,o)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,s){if(this.state!==cc.Idle)throw new Error("Cant modify splitview");this.state=cc.Busy;const r=ue(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(r):this.viewContainer.insertBefore(r,this.viewContainer.children.item(n));const o=e.onDidChange(d=>this.onViewChange(h,d)),a=gt(()=>this.viewContainer.removeChild(r)),l=Kh(o,a);let c;typeof t=="number"?c=t:t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize;const h=this.orientation===0?new C3e(r,e,c,l):new S3e(r,e,c,l);if(this.viewItems.splice(n,0,h),this.viewItems.length>1){let d={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash};const f=this.orientation===0?new Tn(this.sashContainer,{getHorizontalSashTop:L=>this.getSashPosition(L),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},d),{orientation:1})):new Tn(this.sashContainer,{getVerticalSashLeft:L=>this.getSashPosition(L),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},d),{orientation:0})),g=this.orientation===0?L=>({sash:f,start:L.startY,current:L.currentY,alt:L.altKey}):L=>({sash:f,start:L.startX,current:L.currentX,alt:L.altKey}),m=ke.map(f.onDidStart,g)(this.onSashStart,this),b=ke.map(f.onDidChange,g)(this.onSashChange,this),y=ke.map(f.onDidEnd,()=>this.sashItems.findIndex(L=>L.sash===f))(this.onSashEnd,this),x=f.onDidReset(()=>{const L=this.sashItems.findIndex(U=>U.sash===f),D=ss(L,-1),N=ss(L+1,this.viewItems.length),T=this.findFirstSnapIndex(D),$=this.findFirstSnapIndex(N);typeof T=="number"&&!this.viewItems[T].visible||typeof $=="number"&&!this.viewItems[$].visible||this._onDidSashReset.fire(L)}),k=Kh(m,b,y,x,f),S={sash:f,disposable:k};this.sashItems.splice(n-1,0,S)}r.appendChild(e.element);let u;typeof t!="number"&&t.type==="split"&&(u=[t.index]),s||this.relayout([n],u),this.state=cc.Idle,!s&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}relayout(e,t){const n=this.viewItems.reduce((s,r)=>s+r.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(h=>h.size),s,r,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const h=ss(e,-1),u=ss(e+1,this.viewItems.length);if(r)for(const S of r)jA(h,S),jA(u,S);if(s)for(const S of s)yy(h,S),yy(u,S);const d=h.map(S=>this.viewItems[S]),f=h.map(S=>n[S]),g=u.map(S=>this.viewItems[S]),p=u.map(S=>n[S]),m=h.reduce((S,L)=>S+(this.viewItems[L].minimumSize-n[L]),0),v=h.reduce((S,L)=>S+(this.viewItems[L].maximumSize-n[L]),0),b=u.length===0?Number.POSITIVE_INFINITY:u.reduce((S,L)=>S+(n[L]-this.viewItems[L].minimumSize),0),w=u.length===0?Number.NEGATIVE_INFINITY:u.reduce((S,L)=>S+(n[L]-this.viewItems[L].maximumSize),0),y=Math.max(m,w,o),x=Math.min(b,v,a);let k=!1;if(l){const S=this.viewItems[l.index],L=t>=l.limitDelta;k=L!==S.visible,S.setVisible(L,l.size)}if(!k&&c){const S=this.viewItems[c.index],L=t<c.limitDelta;k=L!==S.visible,S.setVisible(L,c.size)}if(k)return this.resize(e,t,n,s,r,o,a);t=uo(t,y,x);for(let S=0,L=t;S<d.length;S++){const D=d[S],N=uo(f[S]+L,D.minimumSize,D.maximumSize),T=N-f[S];L-=T,D.size=N}for(let S=0,L=t;S<g.length;S++){const D=g[S],N=uo(p[S]-L,D.minimumSize,D.maximumSize),T=N-p[S];L+=T,D.size=N}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let n=this.size-t;const s=ss(this.viewItems.length-1,-1),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);for(const a of o)jA(s,a);for(const a of r)yy(s,a);typeof e=="number"&&yy(s,e);for(let a=0;n!==0&&a<s.length;a++){const l=this.viewItems[s[a]],c=uo(l.size+n,l.minimumSize,l.maximumSize),h=c-l.size;n-=h,l.size=c}}layoutViews(){this.contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),s=[...this.viewItems].reverse();e=!1;const r=s.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const o=s.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],h=this.viewItems[l];a+=h.size;const u=!(t[l]&&o[l+1]),d=!(n[l]&&r[l+1]);if(u&&d){const f=ss(l,-1),g=ss(l+1,this.viewItems.length),p=this.findFirstSnapIndex(f),m=this.findFirstSnapIndex(g),v=typeof p=="number"&&!this.viewItems[p].visible,b=typeof m=="number"&&!this.viewItems[m].visible;v&&r[l]&&(a>0||this.startSnappingEnabled)?c.state=1:b&&t[l]&&(a<this.contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else u&&!d?c.state=1:!u&&d?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const n=this.viewItems[t];if(n.visible&&n.snap)return t}for(const t of e){const n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}dispose(){super.dispose(),this.viewItems.forEach(e=>e.dispose()),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[]}}class Tw{constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=Tw.TemplateId,this.renderedTemplates=new Set;const s=new Map(t.map(r=>[r.templateId,r]));this.renderers=[];for(const r of e){const o=s.get(r.templateId);if(!o)throw new Error(`Table cell renderer for template id ${r.templateId} not found.`);this.renderers.push(o)}}renderTemplate(e){const t=se(e,ue(".monaco-table-tr")),n=[],s=[];for(let o=0;o<this.columns.length;o++){const a=this.renderers[o],l=se(t,ue(".monaco-table-td",{"data-col-index":o}));l.style.width=`${this.getColumnSize(o)}px`,n.push(l),s.push(a.renderTemplate(l))}const r={container:e,cellContainers:n,cellTemplateData:s};return this.renderedTemplates.add(r),r}renderElement(e,t,n,s){for(let r=0;r<this.columns.length;r++){const a=this.columns[r].project(e);this.renderers[r].renderElement(a,t,n.cellTemplateData[r],s)}}disposeElement(e,t,n,s){for(let r=0;r<this.columns.length;r++){const o=this.renderers[r];if(o.disposeElement){const l=this.columns[r].project(e);o.disposeElement(l,t,n.cellTemplateData[r],s)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);Rn(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}}Tw.TemplateId="row";function x3e(i){return{getHeight(e){return i.getHeight(e)},getTemplateId(){return Tw.TemplateId}}}class D3e{constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new z,this.onDidLayout=this._onDidLayout.event,this.element=ue(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:ke.None}layout(e){this._onDidLayout.fire([this.index,e])}}class Ek{constructor(e,t,n,s,r,o){this.virtualDelegate=n,this.domId=`table_id_${++Ek.InstanceCount}`,this.cachedHeight=0,this.domNode=se(t,ue(`.monaco-table.${this.domId}`));const a=s.map((h,u)=>new D3e(h,u)),l={size:a.reduce((h,u)=>h+u.column.weight,0),views:a.map(h=>({size:h.column.weight,view:h}))};this.splitview=new sJ(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l}),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;const c=new Tw(s,r,h=>this.splitview.getViewSize(h));this.list=new Wl(e,this.domNode,x3e(n),[c],o),this.columnLayoutDisposable=ke.any(...a.map(h=>h.onDidLayout))(([h,u])=>c.layoutColumn(h,u)),this.styleElement=jr(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.splitview.dispose(),this.list.dispose(),this.columnLayoutDisposable.dispose()}}Ek.InstanceCount=0;var Ob;(function(i){i[i.Unknown=0]="Unknown",i[i.Twistie=1]="Twistie",i[i.Element=2]="Element"})(Ob||(Ob={}));class Fr extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class SP{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function xP(i){return typeof i=="object"&&"visibility"in i&&"data"in i}function o1(i){switch(i){case!0:return 1;case!1:return 0;default:return i}}function BE(i){return typeof i.collapsible=="boolean"}class L3e{constructor(e,t,n,s={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new zO,this._onDidChangeCollapseState=new z,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new z,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new z,this.onDidSplice=this._onDidSplice.event,this.collapseByDefault=typeof s.collapseByDefault>"u"?!1:s.collapseByDefault,this.filter=s.filter,this.autoExpandSingleChildren=typeof s.autoExpandSingleChildren>"u"?!1:s.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,n=ct.empty(),s={}){if(e.length===0)throw new Fr(this.user,"Invalid tree location");s.diffIdentityProvider?this.spliceSmart(s.diffIdentityProvider,e,t,n,s):this.spliceSimple(e,t,n,s)}spliceSmart(e,t,n,s,r,o){var a;s===void 0&&(s=ct.empty()),o===void 0&&(o=(a=r.diffDepth)!==null&&a!==void 0?a:0);const{parentNode:l}=this.getParentNodeWithListIndex(t);if(!l.lastDiffIds)return this.spliceSimple(t,n,s,r);const c=[...s],h=t[t.length-1],u=new ll({getElements:()=>l.lastDiffIds},{getElements:()=>[...l.children.slice(0,h),...c,...l.children.slice(h+n)].map(m=>e.getId(m.element).toString())}).ComputeDiff(!1);if(u.quitEarly)return l.lastDiffIds=void 0,this.spliceSimple(t,n,c,r);const d=t.slice(0,-1),f=(m,v,b)=>{if(o>0)for(let w=0;w<b;w++)m--,v--,this.spliceSmart(e,[...d,m,0],Number.MAX_SAFE_INTEGER,c[v].children,r,o-1)};let g=Math.min(l.children.length,h+n),p=c.length;for(const m of u.changes.sort((v,b)=>b.originalStart-v.originalStart))f(g,p,g-(m.originalStart+m.originalLength)),g=m.originalStart,p=m.modifiedStart-h,this.spliceSimple([...d,g],m.originalLength,ct.slice(c,p,p+m.modifiedLength),r);f(g,p,g)}spliceSimple(e,t,n=ct.empty(),{onDidCreateNode:s,onDidDeleteNode:r,diffIdentityProvider:o}){const{parentNode:a,listIndex:l,revealed:c,visible:h}=this.getParentNodeWithListIndex(e),u=[],d=ct.map(n,S=>this.createTreeNode(S,a,a.visible?1:0,c,u,s)),f=e[e.length-1],g=a.children.length>0;let p=0;for(let S=f;S>=0&&S<a.children.length;S--){const L=a.children[S];if(L.visible){p=L.visibleChildIndex;break}}const m=[];let v=0,b=0;for(const S of d)m.push(S),b+=S.renderNodeCount,S.visible&&(S.visibleChildIndex=p+v++);const w=D7(a.children,f,t,m);o?a.lastDiffIds?D7(a.lastDiffIds,f,t,m.map(S=>o.getId(S.element).toString())):a.lastDiffIds=a.children.map(S=>o.getId(S.element).toString()):a.lastDiffIds=void 0;let y=0;for(const S of w)S.visible&&y++;if(y!==0)for(let S=f+m.length;S<a.children.length;S++){const L=a.children[S];L.visible&&(L.visibleChildIndex-=y)}if(a.visibleChildrenCount+=v-y,c&&h){const S=w.reduce((L,D)=>L+(D.visible?D.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,b-S),this.list.splice(l,S,u)}if(w.length>0&&r){const S=L=>{r(L),L.children.forEach(S)};w.forEach(S)}const x=a.children.length>0;g!==x&&this.setCollapsible(e.slice(0,-1),x),this._onDidSplice.fire({insertedNodes:m,deletedNodes:w});let k=a;for(;k;){if(k.visibility===2){this.refilter();break}k=k.parent}}rerender(e){if(e.length===0)throw new Fr(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:s}=this.getTreeNodeWithListIndex(e);t.visible&&s&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:s}=this.getTreeNodeWithListIndex(e);return n&&s?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);const s={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const s=this.getTreeNode(e);typeof t>"u"&&(t=!s.collapsed);const r={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,r))}_setCollapseState(e,t){const{node:n,listIndex:s,revealed:r}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(n,s,r,t);if(n!==this.root&&this.autoExpandSingleChildren&&o&&!BE(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let l=0;l<n.children.length;l++)if(n.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return o}_setListNodeCollapseState(e,t,n,s){const r=this._setNodeCollapseState(e,s,!1);if(!n||!e.visible||!r)return r;const o=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=o-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),r}_setNodeCollapseState(e,t,n){let s;if(e===this.root?s=!1:(BE(t)?(s=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(s=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):s=!1,s&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!BE(t)&&t.recursive)for(const r of e.children)s=this._setNodeCollapseState(r,t,!0)||s;return s}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t)}createTreeNode(e,t,n,s,r,o){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,n);a.visibility=l,s&&r.push(a);const c=e.children||ct.empty(),h=s&&l!==0&&!a.collapsed,u=ct.map(c,g=>this.createTreeNode(g,a,l,h,r,o));let d=0,f=1;for(const g of u)a.children.push(g),f+=g.renderNodeCount,g.visible&&(g.visibleChildIndex=d++);return a.collapsible=a.collapsible||a.children.length>0,a.visibleChildrenCount=d,a.visible=l===2?d>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=f):(a.renderNodeCount=0,s&&r.pop()),o&&o(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,s=!0){let r;if(e!==this.root){if(r=this._filterNode(e,t),r===0)return e.visible=!1,e.renderNodeCount=0,!1;s&&n.push(e)}const o=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||r!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,r,n,s&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=r===2?a:r===1,e.visibility=r),e.visible?e.collapsed||(e.renderNodeCount+=n.length-o):(e.renderNodeCount=0,s&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):xP(n)?(e.filterData=n.data,o1(n.visibility)):(e.filterData=void 0,o1(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[n,...s]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(s,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[n,...s]=e;if(n<0||n>t.children.length)throw new Fr(this.user,"Invalid tree location");return this.getTreeNode(s,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:s,visible:r}=this.getParentNodeWithListIndex(e),o=e[e.length-1];if(o<0||o>t.children.length)throw new Fr(this.user,"Invalid tree location");const a=t.children[o];return{node:a,listIndex:n,revealed:s,visible:r&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,s=!0,r=!0){const[o,...a]=e;if(o<0||o>t.children.length)throw new Fr(this.user,"Invalid tree location");for(let l=0;l<o;l++)n+=t.children[l].renderNodeCount;return s=s&&!t.collapsed,r=r&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:s,visible:r}:this.getParentNodeWithListIndex(a,t.children[o],n+1,s,r)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:XDe(e)[0]}}const DW=Bo("tree-item-expanded",be.chevronDown),LW=Bo("tree-filter-on-type-on",be.listFilter),kW=Bo("tree-filter-on-type-off",be.listSelection),k3e=Bo("tree-filter-clear",be.close),yD=Bo("tree-item-loading",be.loading);class A3e extends Iw{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function VE(i){return i instanceof Iw?new A3e(i):i}class E3e{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=te.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(VE(e),t)}onDragOver(e,t,n,s,r=!0){const o=this.dnd.onDragOver(VE(e),t&&t.element,n,s),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return o;if(a&&typeof o!="boolean"&&o.autoExpand&&(this.autoExpandDisposable=wm(()=>{const d=this.modelProvider(),f=d.getNodeLocation(t);d.isCollapsed(f)&&d.setCollapsed(f,!1),this.autoExpandNode=void 0},500)),typeof o=="boolean"||!o.accept||typeof o.bubble>"u"||o.feedback){if(!r){const d=typeof o=="boolean"?o:o.accept,f=typeof o=="boolean"?void 0:o.effect;return{accept:d,effect:f,feedback:[n]}}return o}if(o.bubble===1){const d=this.modelProvider(),f=d.getNodeLocation(t),g=d.getParentNodeLocation(f),p=d.getNode(g),m=g&&d.getListIndex(g);return this.onDragOver(e,p,m,s,!1)}const l=this.modelProvider(),c=l.getNodeLocation(t),h=l.getListIndex(c),u=l.getListRenderCount(c);return Object.assign(Object.assign({},o),{feedback:ss(h,h+u)})}drop(e,t,n,s){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(VE(e),t&&t.element,n,s)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function I3e(i,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new E3e(i,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(t){const n=i(),s=n.getNodeLocation(t),r=n.getParentNodeLocation(s);return n.getNode(r).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}),enableKeyboardNavigation:e.simpleKeyboardNavigation})}class DP{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight&&this.delegate.setDynamicHeight(e.element,t)}}var a1;(function(i){i.None="none",i.OnHover="onHover",i.Always="always"})(a1||(a1={}));class T3e{constructor(e,t=[]){this._elements=t,this.onDidChange=ke.forEach(e,n=>this._elements=n)}get elements(){return this._elements}}class l1{constructor(e,t,n,s,r={}){this.renderer=e,this.modelProvider=t,this.activeNodes=s,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=l1.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new VLe,this.activeIndentNodes=new Set,this.indentGuidesDisposable=te.None,this.disposables=new de,this.templateId=e.templateId,this.updateOptions(r),ke.map(n,o=>o.node)(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState&&e.onDidChangeTwistieState(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"&&(this.indent=uo(e.indent,0,40)),typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==a1.None;if(t!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=t,this.indentGuidesDisposable.dispose(),t)){const n=new de;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=se(e,ue(".monaco-tl-row")),n=se(t,ue(".monaco-tl-indent")),s=se(t,ue(".monaco-tl-twistie")),r=se(t,ue(".monaco-tl-contents")),o=this.renderer.renderTemplate(r);return{container:e,indent:n,twistie:s,indentGuidesDisposable:te.None,templateData:o}}renderElement(e,t,n,s){typeof s=="number"&&(this.renderedNodes.set(e,{templateData:n,height:s}),this.renderedElements.set(e.element,e));const r=l1.DefaultIndent+(e.depth-1)*this.indent;n.twistie.style.paddingLeft=`${r}px`,n.indent.style.width=`${r+this.indent-16}px`,this.renderTwistie(e,n),typeof s=="number"&&this.renderIndentGuides(e,n),this.renderer.renderElement(e,t,n.templateData,s)}disposeElement(e,t,n,s){n.indentGuidesDisposable.dispose(),this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.templateData,s),typeof s=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))}renderTwistie(e,t){t.twistie.classList.remove(...DW.classNamesArray);let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(...DW.classNamesArray),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded")}renderIndentGuides(e,t){if(Rn(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new de,s=this.modelProvider();let r=e;for(;;){const o=s.getNodeLocation(r),a=s.getParentNodeLocation(o);if(!a)break;const l=s.getNode(a),c=ue(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(l)&&c.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(c):t.indent.insertBefore(c,t.indent.firstElementChild),this.renderedIndentGuides.add(l,c),n.add(gt(()=>this.renderedIndentGuides.delete(l,c))),r=l}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,n=this.modelProvider();e.forEach(s=>{const r=n.getNodeLocation(s);try{const o=n.getParentNodeLocation(r);s.collapsible&&s.children.length>0&&!s.collapsed?t.add(s):o&&t.add(n.getNode(o))}catch{}}),this.activeIndentNodes.forEach(s=>{t.has(s)||this.renderedIndentGuides.forEach(s,r=>r.classList.remove("active"))}),t.forEach(s=>{this.activeIndentNodes.has(s)||this.renderedIndentGuides.forEach(s,r=>r.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),at(this.disposables)}}l1.DefaultIndent=8;class N3e{constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new de,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}filter(e,t){if(this._filter){const r=this._filter.filter(e,t);if(this.tree.options.simpleKeyboardNavigation)return r;let o;if(typeof r=="boolean"?o=r?1:0:xP(r)?o=o1(r.visibility):o=r,o===0)return!1}if(this._totalCount++,this.tree.options.simpleKeyboardNavigation||!this._pattern)return this._matchCount++,{data:ga.Default,visibility:!0};const n=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),s=Array.isArray(n)?n:[n];for(const r of s){const o=r&&r.toString();if(typeof o>"u")return{data:ga.Default,visibility:!0};const a=r1(this._pattern,this._lowercasePattern,0,o,o.toLowerCase(),0,!0);if(a)return this._matchCount++,s.length===1?{data:a,visibility:!0}:{data:{label:o,score:a},visibility:!0}}return this.tree.options.filterOnType?2:{data:ga.Default,visibility:!0}}reset(){this._totalCount=0,this._matchCount=0}dispose(){at(this.disposables)}}class M3e{constructor(e,t,n,s,r){this.tree=e,this.view=n,this.filter=s,this.keyboardNavigationDelegate=r,this._enabled=!1,this._pattern="",this._empty=!1,this._onDidChangeEmptyState=new z,this.positionClassName="ne",this.automaticKeyboardNavigation=!0,this.triggered=!1,this._onDidChangePattern=new z,this.enabledDisposables=new de,this.disposables=new de,this.domNode=ue(`.monaco-list-type-filter.${this.positionClassName}`),this.domNode.draggable=!0,this.disposables.add(ne(this.domNode,"dragstart",()=>this.onDragStart())),this.messageDomNode=se(n.getHTMLElement(),ue(".monaco-list-type-filter-message")),this.labelDomNode=se(this.domNode,ue("span.label"));const o=se(this.domNode,ue(".controls"));this._filterOnType=!!e.options.filterOnType,this.filterOnTypeDomNode=se(o,ue("input.filter")),this.filterOnTypeDomNode.type="checkbox",this.filterOnTypeDomNode.checked=this._filterOnType,this.filterOnTypeDomNode.tabIndex=-1,this.updateFilterOnTypeTitleAndIcon(),this.disposables.add(ne(this.filterOnTypeDomNode,"input",()=>this.onDidChangeFilterOnType())),this.clearDomNode=se(o,ue("button.clear"+k3e.cssSelector)),this.clearDomNode.tabIndex=-1,this.clearDomNode.title=_("clear","Clear"),this.keyboardNavigationEventFilter=e.options.keyboardNavigationEventFilter,t.onDidSplice(this.onDidSpliceModel,this,this.disposables),this.updateOptions(e.options)}get enabled(){return this._enabled}get pattern(){return this._pattern}get filterOnType(){return this._filterOnType}updateOptions(e){e.simpleKeyboardNavigation?this.disable():this.enable(),typeof e.filterOnType<"u"&&(this._filterOnType=!!e.filterOnType,this.filterOnTypeDomNode.checked=this._filterOnType,this.updateFilterOnTypeTitleAndIcon()),typeof e.automaticKeyboardNavigation<"u"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation),this.tree.refilter(),this.render(),this.automaticKeyboardNavigation||this.onEventOrInput("")}enable(){if(this._enabled)return;const e=this.enabledDisposables.add(new Bt(this.view.getHTMLElement(),"keydown")),t=ke.chain(e.event).filter(s=>!Cu(s.target)||s.target===this.filterOnTypeDomNode).filter(s=>s.key!=="Dead"&&!/^Media/.test(s.key)).map(s=>new li(s)).filter(this.keyboardNavigationEventFilter||(()=>!0)).filter(()=>this.automaticKeyboardNavigation||this.triggered).filter(s=>this.keyboardNavigationDelegate.mightProducePrintableCharacter(s)&&!(s.keyCode===18||s.keyCode===16||s.keyCode===15||s.keyCode===17)||(this.pattern.length>0||this.triggered)&&(s.keyCode===9||s.keyCode===1)&&!s.altKey&&!s.ctrlKey&&!s.metaKey||s.keyCode===1&&(ht?s.altKey&&!s.metaKey:s.ctrlKey)&&!s.shiftKey).forEach(s=>{s.stopPropagation(),s.preventDefault()}).event,n=this.enabledDisposables.add(new Bt(this.clearDomNode,"click"));ke.chain(ke.any(t,n.event)).event(this.onEventOrInput,this,this.enabledDisposables),this.filter.pattern="",this.tree.refilter(),this.render(),this._enabled=!0,this.triggered=!1}disable(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.clear(),this.tree.refilter(),this.render(),this._enabled=!1,this.triggered=!1)}onEventOrInput(e){typeof e=="string"?this.onInput(e):e instanceof MouseEvent||e.keyCode===9||e.keyCode===1&&(ht?e.altKey:e.ctrlKey)?this.onInput(""):e.keyCode===1?this.onInput(this.pattern.length===0?"":this.pattern.substr(0,this.pattern.length-1)):this.onInput(this.pattern+e.browserEvent.key)}onInput(e){const t=this.view.getHTMLElement();e&&!this.domNode.parentElement?t.append(this.domNode):!e&&this.domNode.parentElement&&(this.domNode.remove(),this.tree.domFocus()),this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,s=>!ga.isDefault(s.filterData));const n=this.tree.getFocus();if(n.length>0){const s=n[0];this.tree.getRelativeTop(s)===null&&this.tree.reveal(s,.5)}this.render(),e||(this.triggered=!1)}onDragStart(){const e=this.view.getHTMLElement(),{left:t}=Nn(e),n=e.clientWidth,s=n/2,r=this.domNode.clientWidth,o=new de;let a=this.positionClassName;const l=()=>{switch(a){case"nw":this.domNode.style.top="4px",this.domNode.style.left="4px";break;case"ne":this.domNode.style.top="4px",this.domNode.style.left=`${n-r-6}px`;break}},c=u=>{u.preventDefault();const d=u.clientX-t;u.dataTransfer&&(u.dataTransfer.dropEffect="none"),d<s?a="nw":a="ne",l()},h=()=>{this.positionClassName=a,this.domNode.className=`monaco-list-type-filter ${this.positionClassName}`,this.domNode.style.top="",this.domNode.style.left="",at(o)};l(),this.domNode.classList.remove(a),this.domNode.classList.add("dragging"),o.add(gt(()=>this.domNode.classList.remove("dragging"))),o.add(ne(document,"dragover",u=>c(u))),o.add(ne(this.domNode,"dragend",()=>h())),lc.CurrentDragAndDropData=new ZNe("vscode-ui"),o.add(gt(()=>lc.CurrentDragAndDropData=void 0))}onDidSpliceModel(){!this._enabled||this.pattern.length===0||(this.tree.refilter(),this.render())}onDidChangeFilterOnType(){this.tree.updateOptions({filterOnType:this.filterOnTypeDomNode.checked}),this.tree.refilter(),this.tree.domFocus(),this.render(),this.updateFilterOnTypeTitleAndIcon()}updateFilterOnTypeTitleAndIcon(){this.filterOnType?(this.filterOnTypeDomNode.classList.remove(...kW.classNamesArray),this.filterOnTypeDomNode.classList.add(...LW.classNamesArray),this.filterOnTypeDomNode.title=_("disable filter on type","Disable Filter on Type")):(this.filterOnTypeDomNode.classList.remove(...LW.classNamesArray),this.filterOnTypeDomNode.classList.add(...kW.classNamesArray),this.filterOnTypeDomNode.title=_("enable filter on type","Enable Filter on Type"))}render(){const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&this.tree.options.filterOnType&&e?(this.messageDomNode.textContent=_("empty","No elements found"),this._empty=!0):(this.messageDomNode.innerText="",this._empty=!1),this.domNode.classList.toggle("no-matches",e),this.domNode.title=_("found","Matched {0} out of {1} elements",this.filter.matchCount,this.filter.totalCount),this.labelDomNode.textContent=this.pattern.length>16?"…"+this.pattern.substr(this.pattern.length-16):this.pattern,this._onDidChangeEmptyState.fire(this._empty)}shouldAllowFocus(e){return!this.enabled||!this.pattern||this.filterOnType||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!ga.isDefault(e.filterData)}dispose(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.dispose(),this._enabled=!1,this.triggered=!1),this._onDidChangePattern.dispose(),at(this.disposables)}}function AW(i){let e=Ob.Unknown;return U9(i.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=Ob.Twistie:U9(i.browserEvent.target,"monaco-tl-contents","monaco-tl-row")&&(e=Ob.Element),{browserEvent:i.browserEvent,element:i.element?i.element.element:null,target:e}}function sS(i,e){e(i),i.children.forEach(t=>sS(t,e))}class WE{constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new z,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){var n;!(!((n=t)===null||n===void 0)&&n.__forceEvent)&&Ll(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const s=this;this._onDidChange.fire({get elements(){return s.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=h=>l.delete(h);t.forEach(h=>sS(h,c)),this.set([...l.values()]);return}const n=new Set,s=l=>n.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>sS(l,s));const r=new Map,o=l=>r.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>sS(l,o));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!n.has(c))a.push(l);else{const u=r.get(c);u&&a.push(u)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class R3e extends tJ{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if(Cu(e.browserEvent.target)||bp(e.browserEvent.target))return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,s=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let r=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?r=this.tree.expandOnlyOnTwistieClick(t.element):r=!!this.tree.expandOnlyOnTwistieClick,r&&!s&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){const o=this.tree.model,a=o.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),o.setCollapsed(a,void 0,l),r&&s)return}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||super.onDoubleClick(e)}}class O3e extends Wl{constructor(e,t,n,s,r,o,a,l){super(e,t,n,s,l),this.focusTrait=r,this.selectionTrait=o,this.anchorTrait=a}createMouseController(e){return new R3e(this,e.tree)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;const s=[],r=[];let o;n.forEach((a,l)=>{this.focusTrait.has(a)&&s.push(e+l),this.selectionTrait.has(a)&&r.push(e+l),this.anchorTrait.has(a)&&(o=e+l)}),s.length>0&&super.setFocus(Ix([...super.getFocus(),...s])),r.length>0&&super.setSelection(Ix([...super.getSelection(),...r])),typeof o=="number"&&super.setAnchor(o)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(s=>this.element(s)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(s=>this.element(s)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class rJ{constructor(e,t,n,s,r={}){this._options=r,this.eventBufferer=new zO,this.disposables=new de,this._onWillRefilter=new z,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new z;const o=new DP(n),a=new B9,l=new B9,c=new T3e(l.event);this.renderers=s.map(d=>new l1(d,()=>this.model,a.event,c,r));for(let d of this.renderers)this.disposables.add(d);let h;r.keyboardNavigationLabelProvider&&(h=new N3e(this,r.keyboardNavigationLabelProvider,r.filter),r=Object.assign(Object.assign({},r),{filter:h}),this.disposables.add(h)),this.focus=new WE(()=>this.view.getFocusedElements()[0],r.identityProvider),this.selection=new WE(()=>this.view.getSelectedElements()[0],r.identityProvider),this.anchor=new WE(()=>this.view.getAnchorElement(),r.identityProvider),this.view=new O3e(e,t,o,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},I3e(()=>this.model,r)),{tree:this})),this.model=this.createModel(e,this.view,r),a.input=this.model.onDidChangeCollapseState;const u=ke.forEach(this.model.onDidSplice,d=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(d),this.selection.onDidModelSplice(d)})});if(u(()=>null,null,this.disposables),l.input=ke.chain(ke.any(u,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{const d=new Set;for(const f of this.focus.getNodes())d.add(f);for(const f of this.selection.getNodes())d.add(f);return[...d.values()]}).event,r.keyboardSupport!==!1){const d=ke.chain(this.view.onKeyDown).filter(f=>!Cu(f.target)).map(f=>new li(f));d.filter(f=>f.keyCode===15).on(this.onLeftArrow,this,this.disposables),d.filter(f=>f.keyCode===17).on(this.onRightArrow,this,this.disposables),d.filter(f=>f.keyCode===10).on(this.onSpace,this,this.disposables)}if(r.keyboardNavigationLabelProvider){const d=r.keyboardNavigationDelegate||XX;this.typeFilterController=new M3e(this,this.model,this.view,h,d),this.focusNavigationFilter=f=>this.typeFilterController.shouldAllowFocus(f),this.disposables.add(this.typeFilterController)}this.styleElement=jr(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===a1.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return ke.map(this.view.onMouseDblClick,AW)}get onPointer(){return ke.map(this.view.onPointer,AW)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(Object.assign(Object.assign({},this._options),{enableKeyboardNavigation:this._options.simpleKeyboardNavigation})),this.typeFilterController&&this.typeFilterController.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===a1.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){this.view.layout(e,t)}style(e){const t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const n=e.map(r=>this.model.getNode(r));this.selection.set(n,t);const s=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setSelection(s,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const n=e.map(r=>this.model.getNode(r));this.focus.set(n,t);const s=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setFocus(s,t,!0)}focusNext(e=1,t=!1,n,s=this.focusNavigationFilter){this.view.focusNext(e,t,n,s)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);n!==-1&&this.view.reveal(n,t)}getRelativeTop(e){const t=this.model.getListIndex(e);return t===-1?null:this.view.getRelativeTop(t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n);if(!this.model.setCollapsed(s,!0)){const o=this.model.getParentNodeLocation(s);if(!o)return;const a=this.model.getListIndex(o);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n);if(!this.model.setCollapsed(s,!1)){if(!n.children.some(l=>l.visible))return;const[o]=this.view.getFocus(),a=o+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n),r=e.browserEvent.altKey;this.model.setCollapsed(s,void 0,r)}dispose(){at(this.disposables),this.view.dispose()}}class LP{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new L3e(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare(s,r){return n.sorter.compare(s.element,r.element)}}),this.identityProvider=n.identityProvider}setChildren(e,t=ct.empty(),n={}){const s=this.getElementLocation(e);this._setChildren(s,this.preserveCollapseState(t),n)}_setChildren(e,t=ct.empty(),n){const s=new Set,r=new Set,o=l=>{var c;if(l.element===null)return;const h=l;if(s.add(h.element),this.nodes.set(h.element,h),this.identityProvider){const u=this.identityProvider.getId(h.element).toString();r.add(u),this.nodesByIdentity.set(u,h)}(c=n.onDidCreateNode)===null||c===void 0||c.call(n,h)},a=l=>{var c;if(l.element===null)return;const h=l;if(s.has(h.element)||this.nodes.delete(h.element),this.identityProvider){const u=this.identityProvider.getId(h.element).toString();r.has(u)||this.nodesByIdentity.delete(u)}(c=n.onDidDeleteNode)===null||c===void 0||c.call(n,h)};this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},n),{onDidCreateNode:o,onDidDeleteNode:a}))}preserveCollapseState(e=ct.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),ct.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){const o=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(o)}if(!n)return Object.assign(Object.assign({},t),{children:this.preserveCollapseState(t.children)});const s=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible,r=typeof t.collapsed<"u"?t.collapsed:n.collapsed;return Object.assign(Object.assign({},t),{collapsible:s,collapsed:r,children:this.preserveCollapseState(t.children)})})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const s=this.getElementLocation(e);return this.model.setCollapsed(s,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Fr(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Fr(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Fr(this.user,`Tree element not found: ${e}`);const n=this.model.getNodeLocation(t),s=this.model.getParentNodeLocation(n);return this.model.getNode(s).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Fr(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function rS(i){const e=[i.element],t=i.incompressible||!1;return{element:{elements:e,incompressible:t},children:ct.map(ct.from(i.children),rS),collapsible:i.collapsible,collapsed:i.collapsed}}function oS(i){const e=[i.element],t=i.incompressible||!1;let n,s;for(;[s,n]=ct.consume(ct.from(i.children),2),!(s.length!==1||s[0].incompressible);)i=s[0],e.push(i.element);return{element:{elements:e,incompressible:t},children:ct.map(ct.concat(s,n),oS),collapsible:i.collapsible,collapsed:i.collapsed}}function m4(i,e=0){let t;return e<i.element.elements.length-1?t=[m4(i,e+1)]:t=ct.map(ct.from(i.children),n=>m4(n,0)),e===0&&i.element.incompressible?{element:i.element.elements[e],children:t,incompressible:!0,collapsible:i.collapsible,collapsed:i.collapsed}:{element:i.element.elements[e],children:t,collapsible:i.collapsible,collapsed:i.collapsed}}function EW(i){return m4(i,0)}function oJ(i,e,t){return i.element===e?Object.assign(Object.assign({},i),{children:t}):Object.assign(Object.assign({},i),{children:ct.map(ct.from(i.children),n=>oJ(n,e,t))})}const P3e=i=>({getId(e){return e.elements.map(t=>i.getId(t).toString()).join("\0")}});class F3e{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new LP(e,t,n),this.enabled=typeof n.compressionEnabled>"u"?!0:n.compressionEnabled,this.identityProvider=n.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,t=ct.empty(),n){const s=n.diffIdentityProvider&&P3e(n.diffIdentityProvider);if(e===null){const f=ct.map(t,this.enabled?oS:rS);this._setChildren(null,f,{diffIdentityProvider:s,diffDepth:1/0});return}const r=this.nodes.get(e);if(!r)throw new Error("Unknown compressed tree node");const o=this.model.getNode(r),a=this.model.getParentNodeLocation(r),l=this.model.getNode(a),c=EW(o),h=oJ(c,e,t),u=(this.enabled?oS:rS)(h),d=l.children.map(f=>f===o?u:f);this._setChildren(l.element,d,{diffIdentityProvider:s,diffDepth:o.depth-l.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const n=this.model.getNode().children,s=ct.map(n,EW),r=ct.map(s,e?oS:rS);this._setChildren(null,r,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){const s=new Set,r=a=>{for(const l of a.element.elements)s.add(l),this.nodes.set(l,a.element)},o=a=>{for(const l of a.element.elements)s.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,Object.assign(Object.assign({},n),{onDidCreateNode:r,onDidDeleteNode:o}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const s=this.getCompressedNode(e);return this.model.setCollapsed(s,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Fr(this.user,`Tree element not found: ${e}`);return t}}const B3e=i=>i[i.length-1];class kP{constructor(e,t){this.unwrapper=e,this.node=t}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new kP(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}function V3e(i,e){return{splice(t,n,s){e.splice(t,n,s.map(r=>i.map(r)))},updateElementHeight(t,n){e.updateElementHeight(t,n)}}}function W3e(i,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(i(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(i(t),n)}}})}class z3e{constructor(e,t,n={}){this.rootRef=null,this.elementMapper=n.elementMapper||B3e;const s=r=>this.elementMapper(r.elements);this.nodeMapper=new SP(r=>new kP(s,r)),this.model=new F3e(e,V3e(this.nodeMapper,t),W3e(s,n))}get onDidSplice(){return ke.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidChangeCollapseState(){return ke.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return ke.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}setChildren(e,t=ct.empty(),n={}){this.model.setChildren(e,t,n)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var H3e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class AP extends rJ{constructor(e,t,n,s,r={}){super(e,t,n,s,r)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=ct.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new LP(e,t,n)}}class aJ{constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){const r=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);r.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,s)):(n.compressedTreeNode=r,this.renderer.renderCompressedElements(r,t,n.data,s))}disposeElement(e,t,n,s){n.compressedTreeNode?this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(n.compressedTreeNode,t,n.data,s):this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.data,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}H3e([Zi],aJ.prototype,"compressedTreeNodeProvider",null);function U3e(i,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=i().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}})}class lJ extends AP{constructor(e,t,n,s,r={}){const o=()=>this,a=s.map(l=>new aJ(o,l));super(e,t,n,a,U3e(o,r))}setChildren(e,t=ct.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t,n){return new z3e(e,t,n)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}var uh=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function zE(i){return Object.assign(Object.assign({},i),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function _4(i,e){return e.parent?e.parent===i?!0:_4(i,e.parent):!1}function $3e(i,e){return i===e||_4(i,e)||_4(e,i)}class EP{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new EP(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class j3e{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...yD.classNamesArray),!0):(t.classList.remove(...yD.classNamesArray),!1)}disposeElement(e,t,n,s){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function IW(i){return{browserEvent:i.browserEvent,elements:i.elements.map(e=>e.element)}}function TW(i){return{browserEvent:i.browserEvent,element:i.element&&i.element.element,target:i.target}}class q3e extends Iw{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function HE(i){return i instanceof Iw?new q3e(i):i}class G3e{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(HE(e),t)}onDragOver(e,t,n,s,r=!0){return this.dnd.onDragOver(HE(e),t&&t.element,n,s)}drop(e,t,n,s){this.dnd.drop(HE(e),t&&t.element,n,s)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function cJ(i){return i&&Object.assign(Object.assign({},i),{collapseByDefault:!0,identityProvider:i.identityProvider&&{getId(e){return i.identityProvider.getId(e.element)}},dnd:i.dnd&&new G3e(i.dnd),multipleSelectionController:i.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return i.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return i.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:i.accessibilityProvider&&Object.assign(Object.assign({},i.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:i.accessibilityProvider.getRole?e=>i.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:i.accessibilityProvider.isChecked?e=>{var t;return!!(!((t=i.accessibilityProvider)===null||t===void 0)&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return i.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return i.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:i.accessibilityProvider.getWidgetRole?()=>i.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:i.accessibilityProvider.getAriaLevel&&(e=>i.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:i.accessibilityProvider.getActiveDescendantId&&(e=>i.accessibilityProvider.getActiveDescendantId(e.element))}),filter:i.filter&&{filter(e,t){return i.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:i.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},i.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return i.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof i.expandOnlyOnTwistieClick>"u"?void 0:typeof i.expandOnlyOnTwistieClick!="function"?i.expandOnlyOnTwistieClick:e=>i.expandOnlyOnTwistieClick(e.element),additionalScrollHeight:i.additionalScrollHeight})}function b4(i,e){e(i),i.children.forEach(t=>b4(t,e))}class hJ{constructor(e,t,n,s,r,o={}){this.user=e,this.dataSource=r,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new z,this._onDidChangeNodeSlowState=new z,this.nodeMapper=new SP(a=>new EP(a)),this.disposables=new de,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=typeof o.autoExpandSingleChildren>"u"?!1:o.autoExpandSingleChildren,this.sorter=o.sorter,this.collapseByDefault=o.collapseByDefault,this.tree=this.createTree(e,t,n,s,o),this.root=zE({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return ke.map(this.tree.onDidChangeFocus,IW)}get onDidChangeSelection(){return ke.map(this.tree.onDidChangeSelection,IW)}get onMouseDblClick(){return ke.map(this.tree.onMouseDblClick,TW)}get onPointer(){return ke.map(this.tree.onPointer,TW)}get onDidFocus(){return this.tree.onDidFocus}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,n,s,r){const o=new DP(n),a=s.map(c=>new j3e(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=cJ(r)||{};return new AP(e,t,o,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return uh(this,void 0,void 0,function*(){this.refreshPromises.forEach(s=>s.cancel()),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,n=!1,s,r){return uh(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new Fr(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield ke.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(yield this.refreshAndRenderNode(o,t,s,r),n)try{this.tree.rerender(o)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}collapse(e,t=!1){const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}expand(e,t=!1){return uh(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new Fr(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield ke.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(yield this.root.refreshPromise,yield ke.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;const s=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(yield this.root.refreshPromise,yield ke.toPromise(this._onDidRender.event)),s})}setSelection(e,t){const n=e.map(s=>this.getDataNode(s));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const n=e.map(s=>this.getDataNode(s));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Fr(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,n,s){return uh(this,void 0,void 0,function*(){yield this.refreshNode(e,t,n),this.render(e,n,s)})}refreshNode(e,t,n){return uh(this,void 0,void 0,function*(){let s;return this.subTreeRefreshPromises.forEach((r,o)=>{!s&&$3e(o,e)&&(s=r.then(()=>this.refreshNode(e,t,n)))}),s||this.doRefreshSubTree(e,t,n)})}doRefreshSubTree(e,t,n){return uh(this,void 0,void 0,function*(){let s;e.refreshPromise=new Promise(r=>s=r),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const r=yield this.doRefreshNode(e,t,n);e.stale=!1,yield XN.settled(r.map(o=>this.doRefreshSubTree(o,t,n)))}finally{s()}})}doRefreshNode(e,t,n){return uh(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let s;if(!e.hasChildren)s=Promise.resolve(ct.empty());else{const r=xv(800);r.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},o=>null),s=this.doGetChildren(e).finally(()=>r.cancel())}try{const r=yield s;return this.setChildren(e,r,t,n)}catch(r){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),Bu(r))return[];throw r}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);return t||(t=kr(()=>uh(this,void 0,void 0,function*(){const n=yield this.dataSource.getChildren(e.element);return this.processChildren(n)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(Ke))}setChildren(e,t,n,s){const r=[...t];if(e.children.length===0&&r.length===0)return[];const o=new Map,a=new Map;for(const h of e.children)if(o.set(h.element,h),this.identityProvider){const u=this.tree.isCollapsed(h);a.set(h.id,{node:h,collapsed:u})}const l=[],c=r.map(h=>{const u=!!this.dataSource.hasChildren(h);if(!this.identityProvider){const p=zE({element:h,parent:e,hasChildren:u});return u&&this.collapseByDefault&&!this.collapseByDefault(h)&&(p.collapsedByDefault=!1,l.push(p)),p}const d=this.identityProvider.getId(h).toString(),f=a.get(d);if(f){const p=f.node;return o.delete(p.element),this.nodes.delete(p.element),this.nodes.set(h,p),p.element=h,p.hasChildren=u,n?f.collapsed?(p.children.forEach(m=>b4(m,v=>this.nodes.delete(v.element))),p.children.splice(0,p.children.length),p.stale=!0):l.push(p):u&&this.collapseByDefault&&!this.collapseByDefault(h)&&(p.collapsedByDefault=!1,l.push(p)),p}const g=zE({element:h,parent:e,id:d,hasChildren:u});return s&&s.viewState.focus&&s.viewState.focus.indexOf(d)>-1&&s.focus.push(g),s&&s.viewState.selection&&s.viewState.selection.indexOf(d)>-1&&s.selection.push(g),s&&s.viewState.expanded&&s.viewState.expanded.indexOf(d)>-1?l.push(g):u&&this.collapseByDefault&&!this.collapseByDefault(h)&&(g.collapsedByDefault=!1,l.push(g)),g});for(const h of o.values())b4(h,u=>this.nodes.delete(u.element));for(const h of c)this.nodes.set(h.element,h);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].collapsedByDefault=!1,l.push(c[0])),l}render(e,t,n){const s=e.children.map(o=>this.asTreeElement(o,t)),r=n&&Object.assign(Object.assign({},n),{diffIdentityProvider:n.diffIdentityProvider&&{getId(o){return n.diffIdentityProvider.getId(o.element)}}});this.tree.setChildren(e===this.root?null:e,s,r),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:n=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?ct.map(e.children,s=>this.asTreeElement(s,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}class IP{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new IP(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class K3e{constructor(e,t,n,s){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=s,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,s)}renderCompressedElements(e,t,n,s){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...yD.classNamesArray),!0):(t.classList.remove(...yD.classNamesArray),!1)}disposeElement(e,t,n,s){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,s)}disposeCompressedElements(e,t,n,s){this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=at(this.disposables)}}function Z3e(i){const e=i&&cJ(i);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return i.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}})})}class Y3e extends hJ{constructor(e,t,n,s,r,o,a={}){super(e,t,n,r,o,a),this.compressionDelegate=s,this.compressibleNodeMapper=new SP(l=>new IP(l)),this.filter=a.filter}createTree(e,t,n,s,r){const o=new DP(n),a=s.map(c=>new K3e(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=Z3e(r)||{};return new lJ(e,t,o,a,l)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const n=d=>this.identityProvider.getId(d).toString(),s=d=>{const f=new Set;for(const g of d){const p=this.tree.getCompressedTreeNode(g===this.root?null:g);if(p.element)for(const m of p.element.elements)f.add(n(m.element))}return f},r=s(this.tree.getSelection()),o=s(this.tree.getFocus());super.render(e,t);const a=this.getSelection();let l=!1;const c=this.getFocus();let h=!1;const u=d=>{const f=d.element;if(f)for(let g=0;g<f.elements.length;g++){const p=n(f.elements[g].element),m=f.elements[f.elements.length-1].element;r.has(p)&&a.indexOf(m)===-1&&(a.push(m),l=!0),o.has(p)&&c.indexOf(m)===-1&&(c.push(m),h=!0)}d.children.forEach(u)};u(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),h&&this.setFocus(c)}processChildren(e){return this.filter&&(e=ct.filter(e,t=>{const n=this.filter.filter(t,1),s=Q3e(n);if(s===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return s===1})),super.processChildren(e)}}function Q3e(i){return typeof i=="boolean"?i?1:0:xP(i)?o1(i.visibility):o1(i)}class X3e extends rJ{constructor(e,t,n,s,r,o={}){super(e,t,n,s,o),this.user=e,this.dataSource=r,this.identityProvider=o.identityProvider}createModel(e,t,n){return new LP(e,t,n)}}new De("isWindows",On,_("isWindows","Whether the operating system is Windows"));const J3e="inputFocus";var zl=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Xe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Xr=mt("listService");let v4=class{constructor(e){this._themeService=e,this.disposables=new de,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;const s=new iJ(jr(),"");this.disposables.add(Nf(s,this._themeService))}if(this.lists.some(s=>s.widget===e))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),e.getHTMLElement()===document.activeElement&&(this._lastFocusedWidget=e),Kh(e.onDidFocus(()=>this._lastFocusedWidget=e),gt(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(s=>s!==n),this._lastFocusedWidget===e&&(this._lastFocusedWidget=void 0)}))}dispose(){this.disposables.dispose()}};v4=zl([Xe(0,si)],v4);const uJ=new De("listFocus",!0),Ik=new De("listSupportsMultiselect",!0),dJ=xe.and(uJ,xe.not(J3e)),TP=new De("listHasSelectionOrFocus",!1),NP=new De("listDoubleSelection",!1),MP=new De("listMultiSelection",!1),Tk=new De("listSelectionNavigation",!1),fJ="listAutomaticKeyboardNavigation";function Nk(i,e){const t=i.createScoped(e.getHTMLElement());return uJ.bindTo(t),t}const ug="workbench.list.multiSelectModifier",w4="workbench.list.openMode",$r="workbench.list.horizontalScrolling",CD="workbench.list.keyboardNavigation",RP="workbench.list.automaticKeyboardNavigation",c1="workbench.tree.indent",SD="workbench.tree.renderIndentGuides",Da="workbench.list.smoothScrolling",Rl="workbench.list.mouseWheelScrollSensitivity",Ol="workbench.list.fastScrollSensitivity",xD="workbench.tree.expandMode";function Pl(i){return i.getValue(ug)==="alt"}class eRe extends te{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=Pl(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(ug)&&(this.useAltAsMultipleSelectionModifier=Pl(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:JX(e)}isSelectionRangeChangeEvent(e){return eJ(e)}}function Mk(i,e,t){var n;const s=new de;return[Object.assign(Object.assign({},i),{keyboardNavigationDelegate:{mightProducePrintableCharacter(o){return t.mightProducePrintableCharacter(o)}},smoothScrolling:!!e.getValue(Da),mouseWheelScrollSensitivity:e.getValue(Rl),fastScrollSensitivity:e.getValue(Ol),multipleSelectionController:(n=i.multipleSelectionController)!==null&&n!==void 0?n:s.add(new eRe(e))}),s]}let y4=class extends Wl{constructor(e,t,n,s,r,o,a,l,c,h){const u=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!c.getValue($r),[d,f]=Mk(r,c,h);super(e,t,n,s,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Ko(l.getColorTheme(),kk)),d),{horizontalScrolling:u})),this.disposables.add(f),this.contextKeyService=Nk(o,this),this.themeService=l,this.listSupportsMultiSelect=Ik.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),Tk.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this.listHasSelectionOrFocus=TP.bindTo(this.contextKeyService),this.listDoubleSelection=NP.bindTo(this.contextKeyService),this.listMultiSelection=MP.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Pl(c),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),r.overrideStyles&&this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const p=this.getSelection(),m=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(p.length>0||m.length>0),this.listMultiSelection.set(p.length>1),this.listDoubleSelection.set(p.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const p=this.getSelection(),m=this.getFocus();this.listHasSelectionOrFocus.set(p.length>0||m.length>0)})),this.disposables.add(c.onDidChangeConfiguration(p=>{p.affectsConfiguration(ug)&&(this._useAltAsMultipleSelectionModifier=Pl(c));let m={};if(p.affectsConfiguration($r)&&this.horizontalScrolling===void 0){const v=!!c.getValue($r);m=Object.assign(Object.assign({},m),{horizontalScrolling:v})}if(p.affectsConfiguration(Da)){const v=!!c.getValue(Da);m=Object.assign(Object.assign({},m),{smoothScrolling:v})}if(p.affectsConfiguration(Rl)){const v=c.getValue(Rl);m=Object.assign(Object.assign({},m),{mouseWheelScrollSensitivity:v})}if(p.affectsConfiguration(Ol)){const v=c.getValue(Ol);m=Object.assign(Object.assign({},m),{fastScrollSensitivity:v})}Object.keys(m).length>0&&this.updateOptions(m)})),this.navigator=new gJ(this,Object.assign({configurationService:c},r)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=Nf(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),super.dispose()}};y4=zl([Xe(5,$e),Xe(6,Xr),Xe(7,si),Xe(8,Fi),Xe(9,Bi)],y4);let NW=class extends w3e{constructor(e,t,n,s,r,o,a,l,c,h){const u=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!c.getValue($r),[d,f]=Mk(r,c,h);super(e,t,n,s,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Ko(l.getColorTheme(),kk)),d),{horizontalScrolling:u})),this.disposables=new de,this.disposables.add(f),this.contextKeyService=Nk(o,this),this.themeService=l,this.horizontalScrolling=r.horizontalScrolling,this.listSupportsMultiSelect=Ik.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),Tk.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this._useAltAsMultipleSelectionModifier=Pl(c),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),r.overrideStyles&&this.updateStyles(r.overrideStyles),r.overrideStyles&&this.disposables.add(Nf(this,l,r.overrideStyles)),this.disposables.add(c.onDidChangeConfiguration(p=>{p.affectsConfiguration(ug)&&(this._useAltAsMultipleSelectionModifier=Pl(c));let m={};if(p.affectsConfiguration($r)&&this.horizontalScrolling===void 0){const v=!!c.getValue($r);m=Object.assign(Object.assign({},m),{horizontalScrolling:v})}if(p.affectsConfiguration(Da)){const v=!!c.getValue(Da);m=Object.assign(Object.assign({},m),{smoothScrolling:v})}if(p.affectsConfiguration(Rl)){const v=c.getValue(Rl);m=Object.assign(Object.assign({},m),{mouseWheelScrollSensitivity:v})}if(p.affectsConfiguration(Ol)){const v=c.getValue(Ol);m=Object.assign(Object.assign({},m),{fastScrollSensitivity:v})}Object.keys(m).length>0&&this.updateOptions(m)})),this.navigator=new gJ(this,Object.assign({configurationService:c},r)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=Nf(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};NW=zl([Xe(5,$e),Xe(6,Xr),Xe(7,si),Xe(8,Fi),Xe(9,Bi)],NW);let MW=class extends Ek{constructor(e,t,n,s,r,o,a,l,c,h,u){const d=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!h.getValue($r),[f,g]=Mk(o,h,u);super(e,t,n,s,r,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Ko(c.getColorTheme(),kk)),f),{horizontalScrolling:d})),this.disposables=new de,this.disposables.add(g),this.contextKeyService=Nk(a,this),this.themeService=c,this.listSupportsMultiSelect=Ik.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),Tk.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=TP.bindTo(this.contextKeyService),this.listDoubleSelection=NP.bindTo(this.contextKeyService),this.listMultiSelection=MP.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Pl(h),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const m=this.getSelection(),v=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(m.length>0||v.length>0),this.listMultiSelection.set(m.length>1),this.listDoubleSelection.set(m.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const m=this.getSelection(),v=this.getFocus();this.listHasSelectionOrFocus.set(m.length>0||v.length>0)})),this.disposables.add(h.onDidChangeConfiguration(m=>{m.affectsConfiguration(ug)&&(this._useAltAsMultipleSelectionModifier=Pl(h));let v={};if(m.affectsConfiguration($r)&&this.horizontalScrolling===void 0){const b=!!h.getValue($r);v=Object.assign(Object.assign({},v),{horizontalScrolling:b})}if(m.affectsConfiguration(Da)){const b=!!h.getValue(Da);v=Object.assign(Object.assign({},v),{smoothScrolling:b})}if(m.affectsConfiguration(Rl)){const b=h.getValue(Rl);v=Object.assign(Object.assign({},v),{mouseWheelScrollSensitivity:b})}if(m.affectsConfiguration(Ol)){const b=h.getValue(Ol);v=Object.assign(Object.assign({},v),{fastScrollSensitivity:b})}Object.keys(v).length>0&&this.updateOptions(v)})),this.navigator=new tRe(this,Object.assign({configurationService:h},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=Nf(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};MW=zl([Xe(6,$e),Xe(7,Xr),Xe(8,si),Xe(9,Fi),Xe(10,Bi)],MW);class OP extends te{constructor(e,t){var n;super(),this.widget=e,this._onDidOpen=this._register(new z),this.onDidOpen=this._onDidOpen.event,this._register(ke.filter(this.widget.onDidChangeSelection,s=>s.browserEvent instanceof KeyboardEvent)(s=>this.onSelectionFromKeyboard(s))),this._register(this.widget.onPointer(s=>this.onPointer(s.element,s.browserEvent))),this._register(this.widget.onMouseDblClick(s=>this.onMouseDblClick(s.element,s.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t!=null&&t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(w4))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(()=>{this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(w4))!=="doubleClick"}))):this.openOnSingleClick=(n=t==null?void 0:t.openOnSingleClick)!==null&&n!==void 0?n:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,s=typeof t.pinned=="boolean"?t.pinned:!n,r=!1;this._open(this.getSelectedElement(),n,s,r,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const s=t.button===1,r=!0,o=s,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const r=!1,o=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}_open(e,t,n,s,r){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:s,element:e,browserEvent:r})}}class gJ extends OP{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class tRe extends OP{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class iRe extends OP{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}}function nRe(i,e){let t=!1;return n=>{if(t)return t=!1,!1;const s=e.softDispatch(n,i);return s&&s.enterChord?(t=!0,!1):(t=!1,!0)}}let RW=class extends AP{constructor(e,t,n,s,r,o,a,l,c,h,u){const{options:d,getAutomaticKeyboardNavigation:f,disposable:g}=Nw(t,r,o,c,h,u);super(e,t,n,s,d),this.disposables.add(g),this.internals=new Mf(this,r,f,r.overrideStyles,o,a,l,c,u),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};RW=zl([Xe(5,$e),Xe(6,Xr),Xe(7,si),Xe(8,Fi),Xe(9,Bi),Xe(10,tr)],RW);let OW=class extends lJ{constructor(e,t,n,s,r,o,a,l,c,h,u){const{options:d,getAutomaticKeyboardNavigation:f,disposable:g}=Nw(t,r,o,c,h,u);super(e,t,n,s,d),this.disposables.add(g),this.internals=new Mf(this,r,f,r.overrideStyles,o,a,l,c,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};OW=zl([Xe(5,$e),Xe(6,Xr),Xe(7,si),Xe(8,Fi),Xe(9,Bi),Xe(10,tr)],OW);let PW=class extends X3e{constructor(e,t,n,s,r,o,a,l,c,h,u,d){const{options:f,getAutomaticKeyboardNavigation:g,disposable:p}=Nw(t,o,a,h,u,d);super(e,t,n,s,r,f),this.disposables.add(p),this.internals=new Mf(this,o,g,o.overrideStyles,a,l,c,h,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};PW=zl([Xe(6,$e),Xe(7,Xr),Xe(8,si),Xe(9,Fi),Xe(10,Bi),Xe(11,tr)],PW);let C4=class extends hJ{constructor(e,t,n,s,r,o,a,l,c,h,u,d){const{options:f,getAutomaticKeyboardNavigation:g,disposable:p}=Nw(t,o,a,h,u,d);super(e,t,n,s,r,f),this.disposables.add(p),this.internals=new Mf(this,o,g,o.overrideStyles,a,l,c,h,d),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};C4=zl([Xe(6,$e),Xe(7,Xr),Xe(8,si),Xe(9,Fi),Xe(10,Bi),Xe(11,tr)],C4);let FW=class extends Y3e{constructor(e,t,n,s,r,o,a,l,c,h,u,d,f){const{options:g,getAutomaticKeyboardNavigation:p,disposable:m}=Nw(t,a,l,u,d,f);super(e,t,n,s,r,o,g),this.disposables.add(m),this.internals=new Mf(this,a,p,a.overrideStyles,l,c,h,u,f),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};FW=zl([Xe(7,$e),Xe(8,Xr),Xe(9,si),Xe(10,Fi),Xe(11,Bi),Xe(12,tr)],FW);function Nw(i,e,t,n,s,r){var o;const a=()=>{let g=!!t.getContextKeyValue(fJ);return g&&(g=!!n.getValue(RP)),g},l=r.isScreenReaderOptimized(),c=e.simpleKeyboardNavigation||l?"simple":n.getValue(CD),h=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!n.getValue($r),[u,d]=Mk(e,n,s),f=e.additionalScrollHeight;return{getAutomaticKeyboardNavigation:a,disposable:d,options:Object.assign(Object.assign({keyboardSupport:!1},u),{indent:typeof n.getValue(c1)=="number"?n.getValue(c1):void 0,renderIndentGuides:n.getValue(SD),smoothScrolling:!!n.getValue(Da),automaticKeyboardNavigation:a(),simpleKeyboardNavigation:c==="simple",filterOnType:c==="filter",horizontalScrolling:h,keyboardNavigationEventFilter:nRe(i,s),additionalScrollHeight:f,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(o=e.expandOnlyOnTwistieClick)!==null&&o!==void 0?o:n.getValue(xD)==="doubleClick"})}}let Mf=class{constructor(e,t,n,s,r,o,a,l,c){this.tree=e,this.themeService=a,this.disposables=[],this.contextKeyService=Nk(r,e),this.listSupportsMultiSelect=Ik.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),Tk.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.hasSelectionOrFocus=TP.bindTo(this.contextKeyService),this.hasDoubleSelection=NP.bindTo(this.contextKeyService),this.hasMultiSelection=MP.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=Pl(l);const u=new Set;u.add(fJ);const d=()=>{const g=c.isScreenReaderOptimized()?"simple":l.getValue(CD);e.updateOptions({simpleKeyboardNavigation:g==="simple",filterOnType:g==="filter"})};this.updateStyleOverrides(s),this.disposables.push(this.contextKeyService,o.register(e),e.onDidChangeSelection(()=>{const f=e.getSelection(),g=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(f.length>0||g.length>0),this.hasMultiSelection.set(f.length>1),this.hasDoubleSelection.set(f.length===2)})}),e.onDidChangeFocus(()=>{const f=e.getSelection(),g=e.getFocus();this.hasSelectionOrFocus.set(f.length>0||g.length>0)}),l.onDidChangeConfiguration(f=>{let g={};if(f.affectsConfiguration(ug)&&(this._useAltAsMultipleSelectionModifier=Pl(l)),f.affectsConfiguration(c1)){const p=l.getValue(c1);g=Object.assign(Object.assign({},g),{indent:p})}if(f.affectsConfiguration(SD)){const p=l.getValue(SD);g=Object.assign(Object.assign({},g),{renderIndentGuides:p})}if(f.affectsConfiguration(Da)){const p=!!l.getValue(Da);g=Object.assign(Object.assign({},g),{smoothScrolling:p})}if(f.affectsConfiguration(CD)&&d(),f.affectsConfiguration(RP)&&(g=Object.assign(Object.assign({},g),{automaticKeyboardNavigation:n()})),f.affectsConfiguration($r)&&t.horizontalScrolling===void 0){const p=!!l.getValue($r);g=Object.assign(Object.assign({},g),{horizontalScrolling:p})}if(f.affectsConfiguration(xD)&&t.expandOnlyOnTwistieClick===void 0&&(g=Object.assign(Object.assign({},g),{expandOnlyOnTwistieClick:l.getValue(xD)==="doubleClick"})),f.affectsConfiguration(Rl)){const p=l.getValue(Rl);g=Object.assign(Object.assign({},g),{mouseWheelScrollSensitivity:p})}if(f.affectsConfiguration(Ol)){const p=l.getValue(Ol);g=Object.assign(Object.assign({},g),{fastScrollSensitivity:p})}Object.keys(g).length>0&&e.updateOptions(g)}),this.contextKeyService.onDidChangeContext(f=>{f.affectsSome(u)&&e.updateOptions({automaticKeyboardNavigation:n()})}),c.onDidChangeScreenReaderOptimized(()=>d())),this.navigator=new iRe(e,Object.assign({configurationService:l},t)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){at(this.styler),this.styler=e?Nf(this.tree,this.themeService,e):te.None}dispose(){this.disposables=at(this.disposables),at(this.styler),this.styler=void 0}};Mf=zl([Xe(4,$e),Xe(5,Xr),Xe(6,si),Xe(7,Fi),Xe(8,tr)],Mf);const sRe=kn.as(x0.Configuration);sRe.registerConfiguration({id:"workbench",order:7,title:_("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[ug]:{type:"string",enum:["ctrlCmd","alt"],enumDescriptions:[_("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),_("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:_({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[w4]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:_({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[$r]:{type:"boolean",default:!1,description:_("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[c1]:{type:"number",default:8,minimum:0,maximum:40,description:_("tree indent setting","Controls tree indentation in pixels.")},[SD]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:_("render tree indent guides","Controls whether the tree should render indent guides.")},[Da]:{type:"boolean",default:!1,description:_("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[Rl]:{type:"number",default:1,description:_("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[Ol]:{type:"number",default:5,description:_("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[CD]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[_("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),_("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),_("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:_("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.")},[RP]:{type:"boolean",default:!0,markdownDescription:_("automatic keyboard navigation setting","Controls whether keyboard navigation in lists and trees is automatically triggered simply by typing. If set to `false`, keyboard navigation is only triggered when executing the `list.toggleKeyboardNavigation` command, for which you can assign a keyboard shortcut.")},[xD]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:_("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}}});var ai;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(ai||(ai={}));(function(i){function e(o,a){return a-o}i.compare=e;const t=Object.create(null);t[i.Error]=_("sev.error","Error"),t[i.Warning]=_("sev.warning","Warning"),t[i.Info]=_("sev.info","Info");function n(o){return t[o]||""}i.toString=n;function s(o){switch(o){case vi.Error:return i.Error;case vi.Warning:return i.Warning;case vi.Info:return i.Info;case vi.Ignore:return i.Hint}}i.fromSeverity=s;function r(o){switch(o){case i.Error:return vi.Error;case i.Warning:return vi.Warning;case i.Info:return vi.Info;case i.Hint:return vi.Ignore}}i.toSeverity=r})(ai||(ai={}));var DD;(function(i){const e="";function t(s){return n(s,!0)}i.makeKey=t;function n(s,r){let o=[e];return s.source?o.push(s.source.replace("¦","\\¦")):o.push(e),s.code?typeof s.code=="string"?o.push(s.code.replace("¦","\\¦")):o.push(s.code.value.replace("¦","\\¦")):o.push(e),s.severity!==void 0&&s.severity!==null?o.push(ai.toString(s.severity)):o.push(e),s.message&&r?o.push(s.message.replace("¦","\\¦")):o.push(e),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(e),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(e),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(e),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(e),o.push(e),o.join("¦")}i.makeKeyOptionalMessage=n})(DD||(DD={}));const Mw=mt("markerService");class rRe{constructor(){this._byResource=new rs,this._byOwner=new Map}set(e,t,n){let s=this._byResource.get(e);s||(s=new Map,this._byResource.set(e,s)),s.set(t,n);let r=this._byOwner.get(t);r||(r=new rs,this._byOwner.set(t,r)),r.set(e,n)}get(e,t){let n=this._byResource.get(e);return n==null?void 0:n.get(t)}delete(e,t){let n=!1,s=!1,r=this._byResource.get(e);r&&(n=r.delete(t));let o=this._byOwner.get(t);if(o&&(s=o.delete(e)),n!==s)throw new Error("illegal state");return n&&s}values(e){var t,n,s,r;return typeof e=="string"?(n=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&n!==void 0?n:ct.empty():We.isUri(e)?(r=(s=this._byResource.get(e))===null||s===void 0?void 0:s.values())!==null&&r!==void 0?r:ct.empty():ct.map(ct.concat(...this._byOwner.values()),o=>o[1])}}class oRe{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new rs,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const n=this._data.get(t);n&&this._substract(n);const s=this._resourceStats(t);this._add(s),this._data.set(t,s)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===it.inMemory||e.scheme===it.walkThrough||e.scheme===it.walkThroughSnippet)return t;for(const{severity:n}of this._service.read({resource:e}))n===ai.Error?t.errors+=1:n===ai.Warning?t.warnings+=1:n===ai.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class dd{constructor(){this._onMarkerChanged=new DCe({delay:0,merge:dd._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new rRe,this._stats=new oRe(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if(OY(n))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const s=[];for(const r of n){const o=dd._toMarker(e,t,r);o&&s.push(o)}this._data.set(t,e,s),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,n){let{code:s,severity:r,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:h,endColumn:u,relatedInformation:d,tags:f}=n;if(o)return l=l>0?l:1,c=c>0?c:1,h=h>=l?h:l,u=u>0?u:c,{resource:t,owner:e,code:s,severity:r,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:h,endColumn:u,relatedInformation:d,tags:f}}read(e=Object.create(null)){let{owner:t,resource:n,severities:s,take:r}=e;if((!r||r<0)&&(r=-1),t&&n){const o=this._data.get(n,t);if(o){const a=[];for(const l of o)if(dd._accept(l,s)){const c=a.push(l);if(r>0&&c===r)break}return a}else return[]}else if(!t&&!n){const o=[];for(let a of this._data.values())for(let l of a)if(dd._accept(l,s)){const c=o.push(l);if(r>0&&c===r)return o}return o}else{const o=this._data.values(n??t),a=[];for(const l of o)for(const c of l)if(dd._accept(c,s)){const h=a.push(c);if(r>0&&h===r)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new rs;for(let n of e)for(let s of n)t.set(s,!0);return Array.from(t.keys())}}var aS=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},wp;(function(i){i[i.None=0]="None",i[i.Initialized=1]="Initialized",i[i.Closed=2]="Closed"})(wp||(wp={}));class h1 extends te{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new z),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=wp.None,this.cache=new Map,this.flushDelayer=new sSe(h1.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,n;(t=e.changed)===null||t===void 0||t.forEach((s,r)=>this.accept(r,s)),(n=e.deleted)===null||n===void 0||n.forEach(s=>this.accept(s,void 0))}accept(e,t){if(this.state===wp.Closed)return;let n=!1;Mr(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire(e)}get(e,t){const n=this.cache.get(e);return Mr(n)?t:n}getBoolean(e,t){const n=this.get(e);return Mr(n)?t:n==="true"}getNumber(e,t){const n=this.get(e);return Mr(n)?t:parseInt(n,10)}set(e,t){return aS(this,void 0,void 0,function*(){if(this.state===wp.Closed)return;if(Mr(t))return this.delete(e);const n=String(t);if(this.cache.get(e)!==n)return this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger(()=>this.flushPending())})}delete(e){return aS(this,void 0,void 0,function*(){if(!(this.state===wp.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger(()=>this.flushPending())})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return aS(this,void 0,void 0,function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})})}dispose(){this.flushDelayer.dispose(),super.dispose()}}h1.DEFAULT_FLUSH_DELAY=100;class BW{constructor(){this.onDidChangeItemsExternal=ke.None,this.items=new Map}updateItems(e){return aS(this,void 0,void 0,function*(){e.insert&&e.insert.forEach((t,n)=>this.items.set(n,t)),e.delete&&e.delete.forEach(t=>this.items.delete(t))})}}const $y="__$__targetStorageMarker",dg=mt("storageService");var S4;(function(i){i[i.NONE=0]="NONE",i[i.SHUTDOWN=1]="SHUTDOWN"})(S4||(S4={}));class Rk extends te{constructor(e={flushInterval:Rk.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new cx),this._onDidChangeTarget=this._register(new cx),this._onWillSaveState=this._register(new z),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._globalKeyTargets=void 0}emitDidChangeValue(e,t){t===$y?(e===0?this._globalKeyTargets=void 0:e===1&&(this._workspaceKeyTargets=void 0),this._onDidChangeTarget.fire({scope:e})):this._onDidChangeValue.fire({scope:e,key:t,target:this.getKeyTargets(e)[t]})}get(e,t,n){var s;return(s=this.getStorage(t))===null||s===void 0?void 0:s.get(e,n)}getBoolean(e,t,n){var s;return(s=this.getStorage(t))===null||s===void 0?void 0:s.getBoolean(e,n)}getNumber(e,t,n){var s;return(s=this.getStorage(t))===null||s===void 0?void 0:s.getNumber(e,n)}store(e,t,n,s){if(Mr(t)){this.remove(e,n);return}this.withPausedEmitters(()=>{var r;this.updateKeyTarget(e,n,s),(r=this.getStorage(n))===null||r===void 0||r.set(e,t)})}remove(e,t){this.withPausedEmitters(()=>{var n;this.updateKeyTarget(e,t,void 0),(n=this.getStorage(t))===null||n===void 0||n.delete(e)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,n){var s,r;const o=this.getKeyTargets(t);typeof n=="number"?o[e]!==n&&(o[e]=n,(s=this.getStorage(t))===null||s===void 0||s.set($y,JSON.stringify(o))):typeof o[e]=="number"&&(delete o[e],(r=this.getStorage(t))===null||r===void 0||r.set($y,JSON.stringify(o)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get globalKeyTargets(){return this._globalKeyTargets||(this._globalKeyTargets=this.loadKeyTargets(0)),this._globalKeyTargets}getKeyTargets(e){return e===0?this.globalKeyTargets:this.workspaceKeyTargets}loadKeyTargets(e){const t=this.get($y,e);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}}Rk.DEFAULT_FLUSH_INTERVAL=60*1e3;class aRe extends Rk{constructor(){super(),this.globalStorage=this._register(new h1(new BW)),this.workspaceStorage=this._register(new h1(new BW)),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.globalStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e)))}getStorage(e){return e===0?this.globalStorage:this.workspaceStorage}}var pJ=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},lS=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let x4=class{constructor(e){this._commandService=e}createMenu(e,t,n){return new D4(e,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},n),this._commandService,t,this)}};x4=pJ([lS(0,vn)],x4);let D4=class tp{constructor(e,t,n,s,r){this._id=e,this._options=t,this._commandService=n,this._contextKeyService=s,this._menuService=r,this._disposables=new de,this._menuGroups=[],this._contextKeys=new Set,this._build();const o=new fi(()=>{this._build(),this._onDidChange.fire(this)},t.eventDebounceDelay);this._disposables.add(o),this._disposables.add(da.onDidChangeMenu(c=>{c.has(e)&&o.schedule()}));const a=this._disposables.add(new de),l=()=>{const c=new fi(()=>this._onDidChange.fire(this),t.eventDebounceDelay);a.add(c),a.add(s.onDidChangeContext(h=>{h.affectsSome(this._contextKeys)&&c.schedule()}))};this._onDidChange=new z({onFirstListenerAdd:l,onLastListenerRemove:a.clear.bind(a)}),this.onDidChange=this._onDidChange.event}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();const e=da.getMenuItems(this._id);let t;e.sort(tp._compareMenuItems);for(const n of e){const s=n.group||"";(!t||t[0]!==s)&&(t=[s,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeys(n)}}_collectContextKeys(e){if(tp._fillInKbExprKeys(e.when,this._contextKeys),I_(e)){if(e.command.precondition&&tp._fillInKbExprKeys(e.command.precondition,this._contextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;tp._fillInKbExprKeys(t,this._contextKeys)}}else this._options.emitEventsForSubmenuChanges&&da.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}getActions(e){const t=[];for(let n of this._menuGroups){const[s,r]=n,o=[];for(const a of r)if(this._contextKeyService.contextMatchesRules(a.when)){const l=I_(a)?new _u(a.command,a.alt,e,this._contextKeyService,this._commandService):new lQ(a,this._menuService,this._contextKeyService,e);o.push(l)}o.length>0&&t.push([s,o])}return t}static _fillInKbExprKeys(e,t){if(e)for(let n of e.keys())t.add(n)}static _compareMenuItems(e,t){let n=e.group,s=t.group;if(n!==s){if(n){if(!s)return-1}else return 1;if(n==="navigation")return-1;if(s==="navigation")return 1;let a=n.localeCompare(s);if(a!==0)return a}let r=e.order||0,o=t.order||0;return r<o?-1:r>o?1:tp._compareTitles(I_(e)?e.command.title:e.title,I_(t)?t.command.title:t.title)}static _compareTitles(e,t){const n=typeof e=="string"?e:e.original,s=typeof t=="string"?t:t.original;return n.localeCompare(s)}};D4=pJ([lS(2,vn),lS(3,$e),lS(4,L0)],D4);var lRe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},VW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class cRe extends te{constructor(e){super(),this.model=e,this._markersData=new Map,this._register(gt(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,t){const n=[...this._markersData.keys()];this._markersData.clear();const s=this.model.deltaDecorations(n,t);for(let r=0;r<s.length;r++)this._markersData.set(s[r],e[r]);return n.length!==0||s.length!==0}getMarker(e){return this._markersData.get(e.id)}}let L4=class extends te{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new z),this._markerDecorations=new rs,e.getModels().forEach(n=>this._onModelAdded(n)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const n=this._markerDecorations.get(t);n&&this._updateDecorations(n)})}_onModelAdded(e){const t=new cRe(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===it.inMemory||e.uri.scheme===it.internal||e.uri.scheme===it.vscode)&&this._markerService&&this._markerService.read({resource:e.uri}).map(n=>n.owner).forEach(n=>this._markerService.remove(n,[e.uri]))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});let n=t.map(s=>({range:this._createDecorationRange(e.model,s),options:this._createDecorationOption(s)}));e.update(t,n)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,t){let n=F.lift(t);return t.severity===ai.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),e.validateRange(n)}_createDecorationOption(e){let t,n,s,r,o;switch(e.severity){case ai.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",s=0;break;case ai.Warning:t="squiggly-warning",n=dr(HEe),s=20,o={color:dr(pEe),position:Sl.Inline};break;case ai.Info:t="squiggly-info",n=dr(UEe),s=10;break;case ai.Error:default:t="squiggly-error",n=dr(zEe),s=30,o={color:dr(gEe),position:Sl.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(r="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(r="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:Il.Right},minimap:o,zIndex:s,inlineClassName:r}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}};L4=lRe([VW(0,Rs),VW(1,Mw)],L4);var hRe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},WW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let k4=class extends te{constructor(e,t){super(),this._contextKeyService=e,this._configurationService=t,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new z,this._accessibilityModeEnabledContext=CNe.bindTo(this._contextKeyService);const n=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(s=>{s.affectsConfiguration("editor.accessibilitySupport")&&(n(),this._onDidChangeScreenReaderOptimized.fire())})),n(),this.onDidChangeScreenReaderOptimized(()=>n())}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}getAccessibilitySupport(){return this._accessibilitySupport}};k4=hRe([WW(0,$e),WW(1,Fi)],k4);var jy=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class uRe{constructor(){this.mapTextToType=new Map,this.findText=""}writeText(e,t){return jy(this,void 0,void 0,function*(){if(t){this.mapTextToType.set(t,e);return}try{return yield navigator.clipboard.writeText(e)}catch(r){console.error(r)}const n=document.activeElement,s=document.body.appendChild(ue("textarea",{"aria-hidden":!0}));s.style.height="1px",s.style.width="1px",s.style.position="absolute",s.value=e,s.focus(),s.select(),document.execCommand("copy"),n instanceof HTMLElement&&n.focus(),document.body.removeChild(s)})}readText(e){return jy(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(t){return console.error(t),""}})}readFindText(){return jy(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return jy(this,void 0,void 0,function*(){this.findText=e})}}var dRe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},zW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},qy=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function Gy(i){return i.scheme===it.file?i.fsPath:i.path}let mJ=0;class Ky{constructor(e,t,n,s,r,o,a){this.id=++mJ,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=s,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class HW{constructor(e,t){this.resourceLabel=e,this.reason=t}}class UW{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,s]of this.elements)(s.reason===0?e:t).push(s.resourceLabel);let n=[];return e.length>0&&n.push(_({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(_({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class fRe{constructor(e,t,n,s,r,o,a){this.id=++mJ,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=s,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,n){this.removedResources||(this.removedResources=new UW),this.removedResources.has(t)||this.removedResources.set(t,new HW(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new UW),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new HW(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class _J{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){let e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(const n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let n=0,s=this._past.length;n<s;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new kQ(e,t)}restoreSnapshot(e){const t=e.elements.length;let n=!0,s=0,r=-1;for(let a=0,l=this._past.length;a<l;a++,s++){const c=this._past[a];n&&(s>=t||c.id!==e.elements[s])&&(n=!1,r=0),!n&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let o=-1;for(let a=this._future.length-1;a>=0;a--,s++){const l=this._future[a];n&&(s>=t||l.id!==e.elements[s])&&(n=!1,o=a),!n&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}r!==-1&&(this._past=this._past.slice(0,r)),o!==-1&&(this._future=this._future.slice(o+1)),this.versionId++}getElements(){const e=[],t=[];for(const n of this._past)e.push(n.actual);for(const n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class UE{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const bJ=new _J("","");bJ.locked=!0;let LD=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);let t=[];for(const n of this._editStacks)t.push(n[1].toString());console.log(t.join(`
`))}pushElement(e,t=Tm.None,n=hl.None){if(e.type===0){const s=Gy(e.resource),r=this.getUriComparisonKey(e.resource);this._pushElement(new Ky(e,s,r,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{const s=new Set,r=[],o=[];for(const a of e.resources){const l=Gy(a),c=this.getUriComparisonKey(a);s.has(c)||(s.add(c),r.push(l),o.push(c))}r.length===1?this._pushElement(new Ky(e,r[0],o[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new fRe(e,r,o,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){const s=e.resourceLabels[t],r=e.strResources[t];let o;this._editStacks.has(r)?o=this._editStacks.get(r):(o=new _J(s,r),this._editStacks.set(r,o)),o.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const n=this._editStacks.get(t);if(n.hasFutureElements())return null;const s=n.getClosestPastElement();return s?s.actual:null}return null}_splitPastWorkspaceElement(e,t){const n=e.actual.split(),s=new Map;for(const r of n){const o=Gy(r.resource),a=this.getUriComparisonKey(r.resource),l=new Ky(r,o,a,0,0,0,0);s.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitPastWorkspaceElement(e,s)}}_splitFutureWorkspaceElement(e,t){const n=e.actual.split(),s=new Map;for(const r of n){const o=Gy(r.resource),a=this.getUriComparisonKey(r.resource),l=new Ky(r,o,a,0,0,0,0);s.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitFutureWorkspaceElement(e,s)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,n){const s=this.getUriComparisonKey(e);this._editStacks.has(s)&&this._editStacks.get(s).setElementsValidFlag(t,n)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new kQ(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestPastElement();o&&o.sourceId===e&&(!t||o.sourceOrder>t.sourceOrder)&&(t=o,n=s)}return[t,n]}canUndo(e){if(e instanceof hl){const[,n]=this._findClosestUndoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){Ke(e);for(const n of t.strResources)this.removeElements(n);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,s,r){const o=this._acquireLocks(n);let a;try{a=t()}catch(l){return o(),s.dispose(),this._onError(l,e)}return a?a.then(()=>(o(),s.dispose(),r()),l=>(o(),s.dispose(),this._onError(l,e))):(o(),s.dispose(),r())}_invokeWorkspacePrepare(e){return qy(this,void 0,void 0,function*(){if(typeof e.actual.prepareUndoRedo>"u")return te.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?te.None:t})}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(te.None);const n=e.actual.prepareUndoRedo();return n?CZ(n)?t(n):n.then(s=>t(s)):t(te.None)}_getAffectedEditStacks(e){const t=[];for(const n of e.strResources)t.push(this._editStacks.get(n)||bJ);return new UE(t)}_tryToSplitAndUndo(e,t,n,s){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(s),new Zy(this._undo(e,0,!0));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(s),new Zy}_checkWorkspaceUndo(e,t,n,s){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,_({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,_({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of n.editStacks)a.getClosestPastElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndUndo(e,t,null,_({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndUndo(e,t,null,_({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,_({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,n){const s=this._getAffectedEditStacks(t),r=this._checkWorkspaceUndo(e,t,s,!1);return r?r.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,s,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const n=t.getClosestPastElement();if(n){if(n===e){const s=t.getSecondClosestPastElement();if(s&&s.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,t,n,s){return qy(this,void 0,void 0,function*(){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){const a=yield this._dialogService.show(vi.Info,_("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),[_({key:"ok",comment:["{0} denotes a number that is > 1"]},"Undo in {0} Files",n.editStacks.length),_("nok","Undo this File"),_("cancel","Cancel")],{cancelId:2});if(a.choice===2)return;if(a.choice===1)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const l=this._checkWorkspaceUndo(e,t,n,!1);if(l)return l.returnValue;s=!0}let r;try{r=yield this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const o=this._checkWorkspaceUndo(e,t,n,!0);if(o)return r.dispose(),o.returnValue;for(const a of n.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),n,r,()=>this._continueUndoInGroup(t.groupId,s))})}_resourceUndo(e,t,n){if(!t.isValid){e.flushAllElements();return}if(e.locked){const s=_({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(s);return}return this._invokeResourcePrepare(t,s=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new UE([e]),s,()=>this._continueUndoInGroup(t.groupId,n))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestPastElement();o&&o.groupId===e&&(!t||o.groupOrder>t.groupOrder)&&(t=o,n=s)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;const[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof hl){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;const s=this._editStacks.get(e),r=s.getClosestPastElement();if(!r)return;if(r.groupId){const[a,l]=this._findClosestUndoElementInGroup(r.groupId);if(r!==a&&l)return this._undo(l,t,n)}if((r.sourceId!==t||r.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,r);try{return r.type===1?this._workspaceUndo(e,r,n):this._resourceUndo(s,r,n)}finally{}}_confirmAndContinueUndo(e,t,n){return qy(this,void 0,void 0,function*(){if((yield this._dialogService.show(vi.Info,_("confirmDifferentSource","Would you like to undo '{0}'?",n.label),[_("confirmDifferentSource.yes","Yes"),_("cancel","Cancel")],{cancelId:1})).choice!==1)return this._undo(e,t,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestFutureElement();o&&o.sourceId===e&&(!t||o.sourceOrder<t.sourceOrder)&&(t=o,n=s)}return[t,n]}canRedo(e){if(e instanceof hl){const[,n]=this._findClosestRedoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,s){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(s),new Zy(this._redo(e));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(s),new Zy}_checkWorkspaceRedo(e,t,n,s){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,_({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,_({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of n.editStacks)a.getClosestFutureElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndRedo(e,t,null,_({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndRedo(e,t,null,_({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,_({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const n=this._getAffectedEditStacks(t),s=this._checkWorkspaceRedo(e,t,n,!1);return s?s.returnValue:this._executeWorkspaceRedo(e,t,n)}_executeWorkspaceRedo(e,t,n){return qy(this,void 0,void 0,function*(){let s;try{s=yield this._invokeWorkspacePrepare(t)}catch(o){return this._onError(o,t)}const r=this._checkWorkspaceRedo(e,t,n,!0);if(r)return s.dispose(),r.returnValue;for(const o of n.editStacks)o.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,s,()=>this._continueRedoInGroup(t.groupId))})}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=_({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new UE([e]),n,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestFutureElement();o&&o.groupId===e&&(!t||o.groupOrder<t.groupOrder)&&(t=o,n=s)}return[t,n]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof hl){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){const[s,r]=this._findClosestRedoElementInGroup(n.groupId);if(n!==s&&r)return this._redo(r)}try{return n.type===1?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}};LD=dRe([zW(0,YX),zW(1,Vn)],LD);class Zy{constructor(e){this.returnValue=e}}eg(Dw,LD);const gRe=new RegExp(`(\\\\)?\\$\\((${Gs.iconNameExpression}(?:${Gs.iconModifierExpression})?)\\)`,"g");function Xp(i){const e=new Array;let t,n=0,s=0;for(;(t=gRe.exec(i))!==null;){s=t.index||0,e.push(i.substring(n,s)),n=(t.index||0)+t[0].length;const[,r,o]=t;e.push(r?`$(${o})`:pRe({id:o}))}return n<i.length&&e.push(i.substring(n)),e}function pRe(i){const e=ue("span");return e.classList.add(...Gs.asClassNameArray(i)),e}const mRe={buttonBackground:Z.fromHex("#0E639C"),buttonHoverBackground:Z.fromHex("#006BB3"),buttonForeground:Z.white};class $W extends te{constructor(e,t){super(),this._onDidClick=this._register(new z),this.options=t||Object.create(null),Ma(this.options,mRe,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),e.appendChild(this._element),this._register(kt.addTarget(this._element)),[Ae.CLICK,Ut.Tap].forEach(n=>{this._register(ne(this._element,n,s=>{if(!this.enabled){Et.stop(s);return}this._onDidClick.fire(s)}))}),this._register(ne(this._element,Ae.KEY_DOWN,n=>{const s=new li(n);let r=!1;this.enabled&&(s.equals(3)||s.equals(10))?(this._onDidClick.fire(n),r=!0):s.equals(9)&&(this._element.blur(),r=!0),r&&Et.stop(s,!0)})),this._register(ne(this._element,Ae.MOUSE_OVER,n=>{this._element.classList.contains("disabled")||this.setHoverBackground()})),this._register(ne(this._element,Ae.MOUSE_OUT,n=>{this.applyStyles()})),this.focusTracker=this._register(ym(this._element)),this._register(this.focusTracker.onDidFocus(()=>this.setHoverBackground())),this._register(this.focusTracker.onDidBlur(()=>this.applyStyles())),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let e;this.options.secondary?e=this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:e=this.buttonHoverBackground?this.buttonHoverBackground.toString():null,e&&(this._element.style.backgroundColor=e)}style(e){this.buttonForeground=e.buttonForeground,this.buttonBackground=e.buttonBackground,this.buttonHoverBackground=e.buttonHoverBackground,this.buttonSecondaryForeground=e.buttonSecondaryForeground,this.buttonSecondaryBackground=e.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=e.buttonSecondaryHoverBackground,this.buttonBorder=e.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let e,t;this.options.secondary?(t=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():"",e=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():""):(t=this.buttonForeground?this.buttonForeground.toString():"",e=this.buttonBackground?this.buttonBackground.toString():"");const n=this.buttonBorder?this.buttonBorder.toString():"";this._element.style.color=t,this._element.style.backgroundColor=e,this._element.style.borderWidth=n?"1px":"",this._element.style.borderStyle=n?"solid":"",this._element.style.borderColor=n}}get element(){return this._element}set label(e){this._element.classList.add("monaco-text-button"),this.options.supportIcons?ww(this._element,...Xp(e)):this._element.textContent=e,typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=e)}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}const _Re={badgeBackground:Z.fromHex("#4D4D4D"),badgeForeground:Z.fromHex("#FFFFFF")};class A4{constructor(e,t){this.count=0,this.options=t||Object.create(null),Ma(this.options,_Re,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=se(e,ue(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=fo(this.countFormat,this.count),this.element.title=fo(this.titleFormat,this.count),this.applyStyles()}style(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){const e=this.badgeBackground?this.badgeBackground.toString():"",t=this.badgeForeground?this.badgeForeground.toString():"",n=this.badgeBorder?this.badgeBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}}}const jW="done",qW="active",$E="infinite",GW="discrete",bRe={progressBarBackground:Z.fromHex("#0E70C0")};class vRe extends te{constructor(e,t){super(),this.options=t||Object.create(null),Ma(this.options,bRe,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this._register(this.showDelayedScheduler=new fi(()=>ur(this.element),0)),this.create(e)}create(e){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(qW,$E,GW),this.workedVal=0,this.totalWork=void 0}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(jW),this.element.classList.contains($E)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(GW,jW),this.element.classList.add(qW,$E),this}getContainer(){return this.element}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){const e=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=e}}}class PP{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const vJ=new PP("id#");const jE={},wRe=new PP("quick-input-button-icon-");function E4(i){if(!i)return;let e;const t=i.dark.toString();return jE[t]?e=jE[t]:(e=wRe.nextId(),eM(`.${e}`,`background-image: ${jc(i.light||i.dark)}`),eM(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${jc(i.dark)}`),jE[t]=e),e}const yRe={ctrlCmd:!1,alt:!1};var u1;(function(i){i[i.Blur=1]="Blur",i[i.Gesture=2]="Gesture",i[i.Other=3]="Other"})(u1||(u1={}));var qo;(function(i){i[i.NONE=0]="NONE",i[i.FIRST=1]="FIRST",i[i.SECOND=2]="SECOND",i[i.LAST=3]="LAST"})(qo||(qo={}));function CRe(i,e={}){const t=FP(e);return t.textContent=i,t}function SRe(i,e={}){const t=FP(e);return wJ(t,DRe(i,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function FP(i){const e=i.inline?"span":"div",t=document.createElement(e);return i.className&&(t.className=i.className),t}class xRe{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function wJ(i,e,t,n){let s;if(e.type===2)s=document.createTextNode(e.content||"");else if(e.type===3)s=document.createElement("b");else if(e.type===4)s=document.createElement("i");else if(e.type===7&&n)s=document.createElement("code");else if(e.type===5&&t){const r=document.createElement("a");r.href="#",t.disposables.add(Ji(r,"click",o=>{t.callback(String(e.index),o)})),s=r}else e.type===8?s=document.createElement("br"):e.type===1&&(s=i);s&&i!==s&&i.appendChild(s),s&&Array.isArray(e.children)&&e.children.forEach(r=>{wJ(s,r,t,n)})}function DRe(i,e){const t={type:1,children:[]};let n=0,s=t;const r=[],o=new xRe(i);for(;!o.eos();){let a=o.next();const l=a==="\\"&&I4(o.peek(),e)!==0;if(l&&(a=o.next()),!l&&LRe(a,e)&&a===o.peek()){o.advance(),s.type===2&&(s=r.pop());const c=I4(a,e);if(s.type===c||s.type===5&&c===6)s=r.pop();else{const h={type:c,children:[]};c===5&&(h.index=n,n++),s.children.push(h),r.push(s),s=h}}else if(a===`
`)s.type===2&&(s=r.pop()),s.children.push({type:8});else if(s.type!==2){const c={type:2,content:a};s.children.push(c),r.push(s),s=c}else s.content+=a}return s.type===2&&(s=r.pop()),t}function LRe(i,e){return I4(i,e)!==0}function I4(i,e){switch(i){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}class kRe{constructor(e,t=0,n=e.length,s=t-1){this.items=e,this.start=t,this.end=n,this.index=s}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class ARe{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._currentPosition()!==this._elements.length-1?this._navigator.next():null}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new kRe(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const f_=ue,ERe={inputBackground:Z.fromHex("#3C3C3C"),inputForeground:Z.fromHex("#CCCCCC"),inputValidationInfoBorder:Z.fromHex("#55AAFF"),inputValidationInfoBackground:Z.fromHex("#063B49"),inputValidationWarningBorder:Z.fromHex("#B89500"),inputValidationWarningBackground:Z.fromHex("#352A05"),inputValidationErrorBorder:Z.fromHex("#BE1100"),inputValidationErrorBackground:Z.fromHex("#5A1D1D")};class yJ extends Qr{constructor(e,t,n){var s;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new z),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new z),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n||Object.create(null),Ma(this.options,ERe,!1),this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(s=this.options.tooltip)!==null&&s!==void 0?s:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=se(e,f_(".monaco-inputbox.idle"));let r=this.options.flexibleHeight?"textarea":"input",o=se(this.element,f_(".ibwrapper"));if(this.input=se(o,f_(r+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=se(o,f_("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new J5(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),se(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(c=>this.input.scrollTop=c.scrollTop));const a=this._register(new Bt(document,"selectionchange")),l=ke.filter(a.event,()=>{const c=document.getSelection();return(c==null?void 0:c.anchorNode)===o});this._register(l(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this.ignoreGesture(this.input),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new Gc(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:JN(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return lo(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){const n=parseFloat(this.mirror.style.paddingLeft||"")||0,s=parseFloat(this.mirror.style.paddingRight||"")||0;t=n+s}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.options.flexibleHeight&&this.options.flexibleWidth?this.input.style.width=`calc(100% - ${e}px)`:this.input.style.paddingRight=e+"px",this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border=n.border?`1px solid ${n.border}`:"",(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,t=()=>e.style.width=lo(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:s=>{if(!this.message)return null;e=se(s,f_(".monaco-inputbox-container")),t();const r={inline:!0,className:"monaco-inputbox-message"},o=this.message.formatContent?SRe(this.message.content,r):CRe(this.message.content,r);o.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return o.style.backgroundColor=a.background?a.background.toString():"",o.style.color=a.foreground?a.foreground.toString():"",o.style.border=a.border?`1px solid ${a.border}`:"",se(e,o),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=_("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=_("alertWarningMessage","Warning: {0}",this.message.content):n=_("alertInfoMessage","Info: {0}",this.message.content),ng(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText=" ",this.layout()}style(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){const e=this.inputBackground?this.inputBackground.toString():"",t=this.inputForeground?this.inputForeground.toString():"",n=this.inputBorder?this.inputBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.input.style.backgroundColor="inherit",this.input.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=JN(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,s=t.selectionEnd,r=t.value;n!==null&&s!==null&&(this.value=r.substr(0,n)+e+r.substr(s),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}}class CJ extends yJ{constructor(e,t,n){const s=_({key:"history.inputbox.hint",comment:["Text will be prefixed with ⇅ plus a single space, then used as a hint where input field keeps history"]},"for history"),r=` or ⇅ ${s}`,o=` (⇅ ${s})`;super(e,t,n),this.history=new ARe(n.history,100);const a=()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(r)&&!this.placeholder.endsWith(o)&&this.history.getHistory().length){const l=this.placeholder.endsWith(")")?r:o,c=this.placeholder+l;n.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=c:this.setPlaceHolder(c)}};this.observer=new MutationObserver((l,c)=>{l.forEach(h=>{h.target.textContent||a()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>a()),this.onblur(this.input,()=>{const l=c=>{if(this.placeholder.endsWith(c)){const h=this.placeholder.slice(0,this.placeholder.length-c.length);return n.showPlaceholderOnFocus?this.placeholder=h:this.setPlaceHolder(h),!0}else return!1};l(o)||l(r)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),e&&(this.value=e,Wx(this.value))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,Wx(this.value))}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()||this.history.last()}}const IRe=ue;class TRe extends te{constructor(e){super(),this.parent=e,this.onKeyDown=t=>ne(this.inputBox.inputElement,Ae.KEY_DOWN,n=>{t(new li(n))}),this.onMouseDown=t=>ne(this.inputBox.inputElement,Ae.MOUSE_DOWN,n=>{t(new zr(n))}),this.onDidChange=t=>this.inputBox.onDidChange(t),this.container=se(this.parent,IRe(".quick-input-box")),this.inputBox=this._register(new yJ(this.container,void 0))}get value(){return this.inputBox.value}set value(e){this.inputBox.value=e}select(e=null){this.inputBox.select(e)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.inputBox.setPlaceHolder(e)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(e){this.inputBox.setAriaLabel(e)}get password(){return this.inputBox.inputElement.type==="password"}set password(e){this.inputBox.inputElement.type=e?"password":"text"}setAttribute(e,t){this.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===vi.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:e===vi.Info?1:e===vi.Warning?2:3,content:""})}stylesForType(e){return this.inputBox.stylesForType(e===vi.Info?1:e===vi.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(e){this.inputBox.style(e)}}class Su{constructor(e,t){this.supportIcons=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.domNode=document.createElement("span"),this.domNode.className="monaco-highlighted-label",e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t=[],n="",s){e||(e=""),s&&(e=Su.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&ca(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const n of this.highlights){if(n.end===n.start)continue;if(t<n.start){const o=this.text.substring(t,n.start);e.push(ue("span",void 0,...this.supportIcons?Xp(o):[o])),t=n.end}const s=this.text.substring(n.start,n.end),r=ue("span.highlight",void 0,...this.supportIcons?Xp(s):[s]);n.extraClasses&&r.classList.add(n.extraClasses),e.push(r),t=n.end}if(t<this.text.length){const n=this.text.substring(t);e.push(ue("span",void 0,...this.supportIcons?Xp(n):[n]))}ww(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let n=0,s=0;return e.replace(/\r\n|\r|\n/g,(r,o)=>{s=r===`\r
`?-1:0,o+=n;for(const a of t)a.end<=o||(a.start>=o&&(a.start+=s),a.end>=o&&(a.end+=s));return n+=s,"⏎"})}}class Wm{constructor(e="",t=!1){var n,s,r;if(this.value=e,typeof this.value!="string")throw yl("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(n=t.isTrusted)!==null&&n!==void 0?n:void 0,this.supportThemeIcons=(s=t.supportThemeIcons)!==null&&s!==void 0?s:!1,this.supportHtml=(r=t.supportHtml)!==null&&r!==void 0?r:!1)}appendText(e,t=0){return this.value+=NRe(this.supportThemeIcons?R4e(e):e).replace(/([ \t]+)/g,(n,s)=>"&nbsp;".repeat(s.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=t,this.value+="\n```\n",this}}function Pb(i){return SJ(i)?!i.value:Array.isArray(i)?i.every(Pb):!0}function SJ(i){return i instanceof Wm?!0:i&&typeof i=="object"?typeof i.value=="string"&&(typeof i.isTrusted=="boolean"||i.isTrusted===void 0)&&(typeof i.supportThemeIcons=="boolean"||i.supportThemeIcons===void 0):!1}function NRe(i){return i.replace(/[\\`*_{}[\]()#+\-!]/g,"\\$&")}function qE(i){return i&&i.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1")}function MRe(i){const e=[],t=i.split("|").map(s=>s.trim());i=t[0];const n=t[1];if(n){const s=/height=(\d+)/.exec(n),r=/width=(\d+)/.exec(n),o=s?s[1]:"",a=r?r[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(o));l&&e.push(`width="${a}"`),c&&e.push(`height="${o}"`)}return{href:i,dimensions:e}}var T4=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function RRe(i,e){Ca(e)?i.title=e:e!=null&&e.markdownNotSupportedFallback?i.title=e.markdownNotSupportedFallback:i.removeAttribute("title")}class ORe{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}update(e,t){var n;return T4(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let s;if(e===void 0||Ca(e)||e instanceof HTMLElement)s=e;else if(!hb(e.markdown))s=(n=e.markdown)!==null&&n!==void 0?n:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(_("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new Na;const r=this._cancellationTokenSource.token;if(s=yield e.markdown(r),this.isDisposed||r.isCancellationRequested)return}this.show(s,t)})}show(e,t){const n=this._hoverWidget;if(this.hasContent(e)){const s={content:e,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!n};this._hoverWidget=this.hoverDelegate.showHover(s,t)}n==null||n.dispose()}hasContent(e){return e?SJ(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}}function PRe(i,e,t){let n,s;const r=(h,u)=>{var d;h&&(s==null||s.dispose(),s=void 0),u&&(n==null||n.dispose(),n=void 0),(d=i.onDidHideHover)===null||d===void 0||d.call(i)},o=(h,u,d)=>new Ms(()=>T4(this,void 0,void 0,function*(){(!s||s.isDisposed)&&(s=new ORe(i,d||e,h>0),yield s.update(t,u))}),h),a=()=>{if(n)return;const h=new de,u=g=>r(!1,g.fromElement===e);h.add(ne(e,Ae.MOUSE_LEAVE,u,!0));const d=()=>r(!0,!0);h.add(ne(e,Ae.MOUSE_DOWN,d,!0));const f={targetElements:[e],dispose:()=>{}};if(i.placement===void 0||i.placement==="mouse"){const g=p=>f.x=p.x+10;h.add(ne(e,Ae.MOUSE_MOVE,g,!0))}h.add(o(i.delay,!1,f)),n=h},l=ne(e,Ae.MOUSE_OVER,a,!0);return{show:h=>{r(!1,!0),o(0,h)},hide:()=>{r(!0,!0)},update:h=>T4(this,void 0,void 0,function*(){t=h,yield s==null?void 0:s.update(t)}),dispose:()=>{l.dispose(),r(!0,!0)}}}class GE{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class BP extends te{constructor(e,t){super(),this.customHovers=new Map,this.domNode=this._register(new GE(se(e,ue(".monaco-icon-label")))),this.labelContainer=se(this.domNode.element,ue(".monaco-icon-label-container"));const n=se(this.labelContainer,ue("span.monaco-icon-name-container"));this.descriptionContainer=this._register(new GE(se(this.labelContainer,ue("span.monaco-icon-description-container")))),t!=null&&t.supportHighlights||t!=null&&t.supportIcons?this.nameNode=new VRe(n,!!t.supportIcons):this.nameNode=new FRe(n),t!=null&&t.supportDescriptionHighlights?this.descriptionNodeFactory=()=>new Su(se(this.descriptionContainer.element,ue("span.label-description")),!!t.supportIcons):this.descriptionNodeFactory=()=>this._register(new GE(se(this.descriptionContainer.element,ue("span.label-description")))),this.hoverDelegate=t==null?void 0:t.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,n){const s=["monaco-icon-label"];n&&(n.extraClasses&&s.push(...n.extraClasses),n.italic&&s.push("italic"),n.strikethrough&&s.push("strikethrough")),this.domNode.className=s.join(" "),this.setupHover(n!=null&&n.descriptionTitle?this.labelContainer:this.element,n==null?void 0:n.title),this.nameNode.setLabel(e,n),(t||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof Su?(this.descriptionNode.set(t||"",n?n.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,n==null?void 0:n.descriptionTitle)):(this.descriptionNode.textContent=t||"",this.setupHover(this.descriptionNode.element,(n==null?void 0:n.descriptionTitle)||""),this.descriptionNode.empty=!t))}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(!this.hoverDelegate)RRe(e,t);else{const s=PRe(this.hoverDelegate,e,t);s&&this.customHovers.set(e,s)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}}class FRe{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&ca(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=se(this.container,ue("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const s=e[n],r=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${n}`;se(this.container,ue("a.label-name",{id:r,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},s)),n<e.length-1&&se(this.container,ue("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}}function BRe(i,e,t){if(!t)return;let n=0;return i.map(s=>{const r={start:n,end:n+s.length},o=t.map(a=>In.intersect(r,a)).filter(a=>!In.isEmpty(a)).map(({start:a,end:l})=>({start:a-n,end:l-n}));return n=r.end+e.length,o})}class VRe{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&ca(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new Su(se(this.container,ue("a.label-name",{id:t==null?void 0:t.domId})),this.supportIcons)),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=(t==null?void 0:t.separator)||"/",s=BRe(e,n,t==null?void 0:t.matches);for(let r=0;r<e.length;r++){const o=e[r],a=s?s[r]:void 0,l=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${r}`,c=ue("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":r,role:"treeitem"});new Su(se(this.container,c),this.supportIcons).set(o,a,void 0,t==null?void 0:t.labelEscapeNewLines),r<e.length-1&&se(c,ue("span.label-separator",void 0,n))}}}}const Yy=ue;class VP{constructor(e,t,n){this.os=t,this.keyElements=new Set,this.options=n||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=se(e,Yy(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&VP.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){let[e,t]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),t&&(se(this.domNode,Yy("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,t,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){Rn(this.domNode),this.keyElements.clear()}renderPart(e,t,n){const s=k5.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,s.ctrlKey,!!(n!=null&&n.ctrlKey),s.separator),t.shiftKey&&this.renderKey(e,s.shiftKey,!!(n!=null&&n.shiftKey),s.separator),t.altKey&&this.renderKey(e,s.altKey,!!(n!=null&&n.altKey),s.separator),t.metaKey&&this.renderKey(e,s.metaKey,!!(n!=null&&n.metaKey),s.separator);const r=t.keyLabel;r&&this.renderKey(e,r,!!(n!=null&&n.keyCode),"")}renderKey(e,t,n,s){se(e,this.createKeyElement(t,n?".highlight":"")),s&&se(e,Yy("span.monaco-keybinding-key-separator",void 0,s))}renderUnbound(e){se(e,this.createKeyElement(_("unbound","Unbound")))}createKeyElement(e,t=""){const n=Yy("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),n}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){var e;if(this.element){for(const t of this.keyElements)this.labelBackground&&(t.style.backgroundColor=(e=this.labelBackground)===null||e===void 0?void 0:e.toString()),this.labelBorder&&(t.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(t.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(t.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&ca(e.firstPart,t.firstPart)&&ca(e.chordPart,t.chordPart)}}const KW=new ab(()=>{const i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:i,collatorIsNumeric:i.resolvedOptions().numeric}});function WRe(i,e,t=!1){const n=i||"",s=e||"",r=KW.value.collator.compare(n,s);return KW.value.collatorIsNumeric&&r===0&&n!==s?n<s?-1:1:r}function zRe(i,e,t){const n=i.toLowerCase(),s=e.toLowerCase(),r=HRe(i,e,t);if(r)return r;const o=n.endsWith(t),a=s.endsWith(t);if(o!==a)return o?-1:1;const l=WRe(n,s);return l!==0?l:n.localeCompare(s)}function HRe(i,e,t){const n=i.toLowerCase(),s=e.toLowerCase(),r=n.startsWith(t),o=s.startsWith(t);if(r!==o)return r?-1:1;if(r&&o){if(n.length<s.length)return-1;if(n.length>s.length)return 1}return 0}var xJ=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},URe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const Qa=ue;class $Re{constructor(e){this.hidden=!1,this._onChecked=new z,this.onChecked=this._onChecked.event,Object.assign(this,e)}get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}dispose(){this._onChecked.dispose()}}class Rw{get templateId(){return Rw.ID}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=se(e,Qa(".quick-input-list-entry"));const n=se(t.entry,Qa("label.quick-input-list-label"));t.toDisposeTemplate.push(Ji(n,Ae.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=se(n,Qa("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(Ji(t.checkbox,Ae.CHANGE,c=>{t.element.checked=t.checkbox.checked}));const s=se(n,Qa(".quick-input-list-rows")),r=se(s,Qa(".quick-input-list-row")),o=se(s,Qa(".quick-input-list-row"));t.label=new BP(r,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});const a=se(r,Qa(".quick-input-list-entry-keybinding"));t.keybinding=new VP(a,po);const l=se(o,Qa(".quick-input-list-label-meta"));return t.detail=new Su(l,!0),t.separator=se(t.entry,Qa(".quick-input-list-separator")),t.actionBar=new Gc(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,n){n.toDisposeElement=at(n.toDisposeElement),n.element=e,n.checkbox.checked=e.checked,n.toDisposeElement.push(e.onChecked(c=>n.checkbox.checked=c));const{labelHighlights:s,descriptionHighlights:r,detailHighlights:o}=e,a=Object.create(null);a.matches=s||[],a.descriptionTitle=e.saneDescription,a.descriptionMatches=r||[],a.extraClasses=e.item.iconClasses,a.italic=e.item.italic,a.strikethrough=e.item.strikethrough,n.label.setLabel(e.saneLabel,e.saneDescription,a),n.keybinding.set(e.item.keybinding),n.detail.set(e.saneDetail,o),e.separator&&e.separator.label?(n.separator.textContent=e.separator.label,n.separator.style.display=""):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!e.separator),n.actionBar.clear();const l=e.item.buttons;l&&l.length?(n.actionBar.push(l.map((c,h)=>{let u=c.iconClass||(c.iconPath?E4(c.iconPath):void 0);c.alwaysVisible&&(u=u?`${u} always-visible`:"always-visible");const d=new Io(`id-${h}`,"",u,!0,()=>URe(this,void 0,void 0,function*(){e.fireButtonTriggered({button:c,item:e.item})}));return d.tooltip=c.tooltip||"",d}),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){n.toDisposeElement=at(n.toDisposeElement)}disposeTemplate(e){e.toDisposeElement=at(e.toDisposeElement),e.toDisposeTemplate=at(e.toDisposeTemplate)}}Rw.ID="listelement";class jRe{getHeight(e){return e.saneDetail?44:22}getTemplateId(e){return Rw.ID}}var Si;(function(i){i[i.First=1]="First",i[i.Second=2]="Second",i[i.Last=3]="Last",i[i.Next=4]="Next",i[i.Previous=5]="Previous",i[i.NextPage=6]="NextPage",i[i.PreviousPage=7]="PreviousPage"})(Si||(Si={}));class WP{constructor(e,t,n){this.parent=e,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new z,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new z,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new z,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new z,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new z,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new z,this.onKeyDown=this._onKeyDown.event,this._onLeave=new z,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=se(this.parent,Qa(".quick-input-list"));const s=new jRe,r=new GRe;this.list=n.createList("QuickInput",this.container,s,[new Rw],{identityProvider:{getId:o=>o.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:r}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(o=>{const a=new li(o);switch(a.keyCode){case 10:this.toggleCheckbox();break;case 31:(ht?o.metaKey:o.ctrlKey)&&this.list.setFocus(ss(this.list.length));break;case 16:const l=this.list.getFocus();l.length===1&&l[0]===0&&this._onLeave.fire();break;case 18:const c=this.list.getFocus();c.length===1&&c[0]===this.list.length-1&&this._onLeave.fire();break}this._onKeyDown.fire(a)})),this.disposables.push(this.list.onMouseDown(o=>{o.browserEvent.button!==2&&o.browserEvent.preventDefault()})),this.disposables.push(ne(this.container,Ae.CLICK,o=>{(o.x||o.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(o=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(o=>{typeof o.index=="number"&&(o.browserEvent.preventDefault(),this.list.setSelection([o.index]))})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return ke.map(this.list.onDidChangeFocus,e=>e.elements.map(t=>t.item))}get onDidChangeSelection(){return ke.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let n=0,s=e.length;n<s;n++){const r=e[n];if(!r.hidden)if(r.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0;const t=this.elements;for(let n=0,s=t.length;n<s;n++)t[n].checked&&e++;return e}getVisibleCount(){let e=0;const t=this.elements;for(let n=0,s=t.length;n<s;n++)t[n].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=at(this.elementDisposables);const t=n=>this.fireButtonTriggered(n);this.inputElements=e,this.elements=e.reduce((n,s,r)=>{var o,a,l;if(s.type!=="separator"){const c=r&&e[r-1],h=s.label&&s.label.replace(/\r?\n/g," "),u=s.meta&&s.meta.replace(/\r?\n/g," "),d=s.description&&s.description.replace(/\r?\n/g," "),f=s.detail&&s.detail.replace(/\r?\n/g," "),g=s.ariaLabel||[h,d,f].map(p=>Vxe(p)).filter(p=>!!p).join(", ");n.push(new $Re({index:r,item:s,saneLabel:h,saneMeta:u,saneAriaLabel:g,saneDescription:d,saneDetail:f,labelHighlights:(o=s.highlights)===null||o===void 0?void 0:o.label,descriptionHighlights:(a=s.highlights)===null||a===void 0?void 0:a.description,detailHighlights:(l=s.highlights)===null||l===void 0?void 0:l.detail,checked:!1,separator:c&&c.type==="separator"?c:void 0,fireButtonTriggered:t}))}return n},[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map(n=>n.onChecked(()=>this.fireCheckedEvents()))),this.elementsToIndexes=this.elements.reduce((n,s,r)=>(n.set(s.item,r),n),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t))),e.length>0){const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){try{this._fireCheckedEvents=!1;const t=new Set;for(const n of e)t.add(n);for(const n of this.elements)n.checked=t.has(n.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===Si.Next&&this.list.getFocus()[0]===this.list.length-1&&(e=Si.First),e===Si.Previous&&this.list.getFocus()[0]===0&&(e=Si.Last),e===Si.Second&&this.list.length<2&&(e=Si.First),e){case Si.First:this.list.focusFirst();break;case Si.Second:this.list.focusNth(1);break;case Si.Last:this.list.focusLast();break;case Si.Next:this.list.focusNext();break;case Si.Previous:this.list.focusPrevious();break;case Si.NextPage:this.list.focusNextPage();break;case Si.PreviousPage:this.list.focusPreviousPage();break}const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(e){this.list.getHTMLElement().style.maxHeight=e?`calc(${Math.floor(e/44)*44}px)`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(n=>{n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!1;const s=n.index&&this.inputElements[n.index-1];n.separator=s&&s.type==="separator"?s:void 0});else{let n;this.elements.forEach(s=>{const r=this.matchOnLabel?kd(Uy(e,Hy(s.saneLabel))):void 0,o=this.matchOnDescription?kd(Uy(e,Hy(s.saneDescription||""))):void 0,a=this.matchOnDetail?kd(Uy(e,Hy(s.saneDetail||""))):void 0,l=this.matchOnMeta?kd(Uy(e,Hy(s.saneMeta||""))):void 0;if(r||o||a||l?(s.labelHighlights=r,s.descriptionHighlights=o,s.detailHighlights=a,s.hidden=!1):(s.labelHighlights=void 0,s.descriptionHighlights=void 0,s.detailHighlights=void 0,s.hidden=!s.item.alwaysShow),s.separator=void 0,!this.sortByLabel){const c=s.index&&this.inputElements[s.index-1];n=c&&c.type==="separator"?c:n,n&&!s.hidden&&(s.separator=n,n=void 0)}})}const t=this.elements.filter(n=>!n.hidden);if(this.sortByLabel&&e){const n=e.toLowerCase();t.sort((s,r)=>qRe(s,r,n))}return this.elementsToIndexes=t.reduce((n,s,r)=>(n.set(s.item,r),n),new Map),this.list.splice(0,this.list.length,t),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(t.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(const n of e)n.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=at(this.elementDisposables),this.disposables=at(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}style(e){this.list.style(e)}}xJ([Zi],WP.prototype,"onDidChangeFocus",null);xJ([Zi],WP.prototype,"onDidChangeSelection",null);function qRe(i,e,t){const n=i.labelHighlights||[],s=e.labelHighlights||[];return n.length&&!s.length?-1:!n.length&&s.length?1:n.length===0&&s.length===0?0:zRe(i.saneLabel,e.saneLabel,t)}class GRe{getWidgetAriaLabel(){return _("quickInput","Quick Input")}getAriaLabel(e){return e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(){return"option"}}var ZW=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const sr=ue,KRe=Bo("quick-input-back",be.arrowLeft),N4={iconClass:KRe.classNames,tooltip:_("quickInput.back","Back"),handle:-1};class Ok extends te{constructor(e){super(),this.ui=e,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=Ok.noPromptMessage,this._severity=vi.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new z),this.onDidHideEmitter=this._register(new z),this.onDisposeEmitter=this._register(new z),this.visibleDisposables=this._register(new de),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!du;this._ignoreFocusOut=e&&!du,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=u1.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText=" ");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this.busy&&!this.busyDelay&&(this.busyDelay=new Ms,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const s=this.buttons.filter(o=>o===N4);this.ui.leftActionBar.push(s.map((o,a)=>{const l=new Io(`id-${a}`,"",o.iconClass||E4(o.iconPath),!0,()=>ZW(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(o)}));return l.tooltip=o.tooltip||"",l}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const r=this.buttons.filter(o=>o!==N4);this.ui.rightActionBar.push(r.map((o,a)=>{const l=new Io(`id-${a}`,"",o.iconClass||E4(o.iconPath),!0,()=>ZW(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(o)}));return l.tooltip=o.tooltip||"",l}),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const n=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==n&&(this._lastValidationMessage=n,ww(this.ui.message,...Xp(n))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?_("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==vi.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.paddingBottom="4px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.paddingBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}Ok.noPromptMessage=_("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class d1 extends Ok{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new z),this.onWillAcceptEmitter=this._register(new z),this.onDidAcceptEmitter=this._register(new z),this.onDidCustomEmitter=this._register(new z),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=this.ui.isScreenReaderOptimized()?qo.NONE:qo.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new z),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new z),this.onDidTriggerItemButtonEmitter=this._register(new z),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e||"",this.update(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?yRe:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(Si.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{if(e===this.value)return;this._value=e,this.ui.list.filter(this.filterValue(this.ui.inputBox.value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(e)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(Si.Next),this.canSelectMany&&this.ui.list.domFocus(),Et.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(Si.Previous):this.ui.list.focus(Si.Last),this.canSelectMany&&this.ui.list.domFocus(),Et.stop(e,!0);break;case 12:this.ui.list.focus(Si.NextPage),this.canSelectMany&&this.ui.list.domFocus(),Et.stop(e,!0);break;case 11:this.ui.list.focus(Si.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),Et.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(Si.First),Et.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(Si.Last),Et.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&Ll(e,this._activeItems,(t,n)=>t===n)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&Ll(e,this._selectedItems,(n,s)=>n===s)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&Ll(e,this._selectedItems,(t,n)=>t===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return ne(this.ui.container,Ae.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new li(e),n=t.keyCode;this._quickNavigate.keybindings.some(o=>{const[a,l]=o.getParts();return l?!1:a.shiftKey&&n===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a.altKey&&n===6||a.ctrlKey&&n===5||a.metaKey&&n===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",t&&!this.description);const n={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!t,progressBar:!t,visibleCount:!0,count:this.canSelectMany,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");const s=this.ariaLabel||this.placeholder||d1.DEFAULT_ARIA_LABEL;if(this.ui.inputBox.ariaLabel!==s&&(this.ui.inputBox.ariaLabel=s),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case qo.NONE:this._itemActivation=qo.FIRST;break;case qo.SECOND:this.ui.list.focus(Si.Second),this._itemActivation=qo.FIRST;break;case qo.LAST:this.ui.list.focus(Si.Last),this._itemActivation=qo.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(Si.First)),this.keepScrollPosition&&(this.scrollTop=e)}}d1.DEFAULT_ARIA_LABEL=_("quickInputBox.ariaLabel","Type to narrow down results.");class Pk extends te{constructor(e){super(),this.options=e,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new z),this.onDidCustomEmitter=this._register(new z),this.onDidTriggerButtonEmitter=this._register(new z),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new z),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new z),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const e=t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey};this._register(ne(window,Ae.KEY_DOWN,e,!0)),this._register(ne(window,Ae.KEY_UP,e,!0)),this._register(ne(window,Ae.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;const e=se(this.parentElement,sr(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const t=jr(e),n=se(e,sr(".quick-input-titlebar")),s=this._register(new Gc(n));s.domNode.classList.add("quick-input-left-action-bar");const r=se(n,sr(".quick-input-title")),o=this._register(new Gc(n));o.domNode.classList.add("quick-input-right-action-bar");const a=se(e,sr(".quick-input-description")),l=se(e,sr(".quick-input-header")),c=se(l,sr("input.quick-input-check-all"));c.type="checkbox",this._register(Ji(c,Ae.CHANGE,N=>{const T=c.checked;S.setAllVisibleChecked(T)})),this._register(ne(c,Ae.CLICK,N=>{(N.x||N.y)&&f.setFocus()}));const h=se(l,sr(".quick-input-description")),u=se(l,sr(".quick-input-and-message")),d=se(u,sr(".quick-input-filter")),f=this._register(new TRe(d));f.setAttribute("aria-describedby",`${this.idPrefix}message`);const g=se(d,sr(".quick-input-visible-count"));g.setAttribute("aria-live","polite"),g.setAttribute("aria-atomic","true");const p=new A4(g,{countFormat:_({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")}),m=se(d,sr(".quick-input-count"));m.setAttribute("aria-live","polite");const v=new A4(m,{countFormat:_({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")}),b=se(l,sr(".quick-input-action")),w=new $W(b);w.label=_("ok","OK"),this._register(w.onDidClick(N=>{this.onDidAcceptEmitter.fire()}));const y=se(l,sr(".quick-input-action")),x=new $W(y);x.label=_("custom","Custom"),this._register(x.onDidClick(N=>{this.onDidCustomEmitter.fire()}));const k=se(u,sr(`#${this.idPrefix}message.quick-input-message`)),S=this._register(new WP(e,this.idPrefix+"list",this.options));this._register(S.onChangedAllVisibleChecked(N=>{c.checked=N})),this._register(S.onChangedVisibleCount(N=>{p.setCount(N)})),this._register(S.onChangedCheckedCount(N=>{v.setCount(N)})),this._register(S.onLeave(()=>{setTimeout(()=>{f.setFocus(),this.controller instanceof d1&&this.controller.canSelectMany&&S.clearFocus()},0)})),this._register(S.onDidChangeFocus(()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")}));const L=new vRe(e);L.getContainer().classList.add("quick-input-progress");const D=ym(e);return this._register(D),this._register(ne(e,Ae.FOCUS,N=>{this.previousFocusElement=N.relatedTarget instanceof HTMLElement?N.relatedTarget:void 0},!0)),this._register(D.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(u1.Blur),this.previousFocusElement=void 0})),this._register(ne(e,Ae.FOCUS,N=>{f.setFocus()})),this._register(ne(e,Ae.KEY_DOWN,N=>{const T=new li(N);switch(T.keyCode){case 3:Et.stop(N,!0),this.onDidAcceptEmitter.fire();break;case 9:Et.stop(N,!0),this.hide(u1.Gesture);break;case 2:if(!T.altKey&&!T.ctrlKey&&!T.metaKey){const $=[".action-label.codicon"];e.classList.contains("show-checkboxes")?$.push("input"):$.push("input[type=text]"),this.getUI().list.isDisplayed()&&$.push(".monaco-list");const U=e.querySelectorAll($.join(", "));T.shiftKey&&T.target===U[0]?(Et.stop(N,!0),U[U.length-1].focus()):!T.shiftKey&&T.target===U[U.length-1]&&(Et.stop(N,!0),U[0].focus())}break}})),this.ui={container:e,styleSheet:t,leftActionBar:s,titleBar:n,title:r,description1:a,description2:h,rightActionBar:o,checkAll:c,filterContainer:d,inputBox:f,visibleCountContainer:g,visibleCount:p,countContainer:m,count:v,okContainer:b,ok:w,message:k,customButtonContainer:y,customButton:x,list:S,progressBar:L,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:N=>this.show(N),hide:()=>this.hide(),setVisibilities:N=>this.setVisibilities(N),setComboboxAccessibility:N=>this.setComboboxAccessibility(N),setEnabled:N=>this.setEnabled(N),setContextKey:N=>this.options.setContextKey(N)},this.updateStyles(),this.ui}pick(e,t={},n=Xt.None){return new Promise((s,r)=>{let o=h=>{o=s,t.onKeyMods&&t.onKeyMods(a.keyMods),s(h)};if(n.isCancellationRequested){o(void 0);return}const a=this.createQuickPick();let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)o(a.selectedItems.slice()),a.hide();else{const h=a.activeItems[0];h&&(o(h),a.hide())}}),a.onDidChangeActive(h=>{const u=h[0];u&&t.onDidFocus&&t.onDidFocus(u)}),a.onDidChangeSelection(h=>{if(!a.canSelectMany){const u=h[0];u&&(o(u),a.hide())}}),a.onDidTriggerItemButton(h=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},h),{removeItem:()=>{const u=a.items.indexOf(h.item);if(u!==-1){const d=a.items.slice(),f=d.splice(u,1),g=a.activeItems.filter(m=>m!==f[0]),p=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=d,g&&(a.activeItems=g),a.keepScrollPosition=p}}}))),a.onDidChangeValue(h=>{l&&!h&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),n.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{at(c),o(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,a.quickNavigate=t.quickNavigate,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([h,u])=>{l=u,a.busy=!1,a.items=h,a.canSelectMany&&(a.selectedItems=h.filter(d=>d.type!=="separator"&&d.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,h=>{r(h),a.hide()})})}createQuickPick(){const e=this.getUI();return new d1(e)}show(e){const t=this.getUI();this.onShowEmitter.fire();const n=this.controller;this.controller=e,n&&n.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(vi.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),ww(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),t.inputBox.ariaLabel="";const s=this.options.backKeybindingLabel();N4.tooltip=s?_("quickInput.backWithKeybinding","Back ({0})",s):_("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList[e.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(e){if(e!==this.comboboxAccessibility){const t=this.getUI();this.comboboxAccessibility=e,this.comboboxAccessibility?(t.inputBox.setAttribute("role","combobox"),t.inputBox.setAttribute("aria-haspopup","true"),t.inputBox.setAttribute("aria-autocomplete","list"),t.inputBox.setAttribute("aria-activedescendant",t.list.getActiveDescendant()||"")):(t.inputBox.removeAttribute("role"),t.inputBox.removeAttribute("aria-haspopup"),t.inputBox.removeAttribute("aria-autocomplete"),t.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.getAction().enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.getAction().enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t;const n=this.controller;if(n){const s=!(!((t=this.ui)===null||t===void 0)&&t.container.contains(document.activeElement));this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",s||(this.previousFocusElement&&this.previousFocusElement.offsetParent?(this.previousFocusElement.focus(),this.previousFocusElement=void 0):this.options.returnFocus()),n.didHide(e)}}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,Pk.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,contrastBorder:s,widgetShadow:r}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e?e.toString():"",this.ui.container.style.backgroundColor=t?t.toString():"",this.ui.container.style.color=n?n.toString():"",this.ui.container.style.border=s?`1px solid ${s}`:"",this.ui.container.style.boxShadow=r?`0 0 8px 2px ${r}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);const o=[];this.styles.list.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const a=o.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}}Pk.MAX_WIDTH=600;var M4;(function(i){i[i.PRESERVE=0]="PRESERVE",i[i.LAST=1]="LAST"})(M4||(M4={}));const DJ={Quickaccess:"workbench.contributions.quickaccess"};class ZRe{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),gt(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return YL([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}}kn.add(DJ.Quickaccess,new ZRe);const LJ=mt("quickInputService");var YRe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},YW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let R4=class extends te{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=kn.as(DJ.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){var s;const[r,o]=this.getOrInstantiateProvider(e),a=this.visibleQuickAccess,l=a==null?void 0:a.descriptor;if(a&&o&&l===o){e!==o.prefix&&!(n!=null&&n.preserveValue)&&(a.picker.value=e),this.adjustValueSelection(a.picker,o,n);return}if(o&&!(n!=null&&n.preserveValue)){let g;if(a&&l&&l!==o){const p=a.value.substr(l.prefix.length);p&&(g=`${o.prefix}${p}`)}if(!g){const p=r==null?void 0:r.defaultFilterValue;p===M4.LAST?g=this.lastAcceptedPickerValues.get(o):typeof p=="string"&&(g=`${o.prefix}${p}`)}typeof g=="string"&&(e=g)}const c=new de,h=c.add(this.quickInputService.createQuickPick());h.value=e,this.adjustValueSelection(h,o,n),h.placeholder=o==null?void 0:o.placeholder,h.quickNavigate=n==null?void 0:n.quickNavigateConfiguration,h.hideInput=!!h.quickNavigate&&!a,(typeof(n==null?void 0:n.itemActivation)=="number"||n!=null&&n.quickNavigateConfiguration)&&(h.itemActivation=(s=n==null?void 0:n.itemActivation)!==null&&s!==void 0?s:qo.SECOND),h.contextKey=o==null?void 0:o.contextKey,h.filterValue=g=>g.substring(o?o.prefix.length:0),o!=null&&o.placeholder&&(h.ariaLabel=o==null?void 0:o.placeholder);let u,d;t&&(u=new Promise(g=>d=g),c.add(vf(h.onWillAccept)(g=>{g.veto(),h.hide()}))),c.add(this.registerPickerListeners(h,r,o,e));const f=c.add(new Na);if(r&&c.add(r.provide(h,f.token)),vf(h.onDidHide)(()=>{h.selectedItems.length===0&&f.cancel(),c.dispose(),d==null||d(h.selectedItems)}),h.show(),t)return u}adjustValueSelection(e,t,n){var s;let r;n!=null&&n.preserveValue?r=[e.value.length,e.value.length]:r=[(s=t==null?void 0:t.prefix.length)!==null&&s!==void 0?s:0,e.value.length],e.valueSelection=r}registerPickerListeners(e,t,n,s){const r=new de,o=this.visibleQuickAccess={picker:e,descriptor:n,value:s};return r.add(gt(()=>{o===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),r.add(e.onDidChangeValue(a=>{const[l]=this.getOrInstantiateProvider(a);l!==t?this.show(a,{preserveValue:!0}):o.value=a})),n&&r.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),r}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let n=this.mapProviderToDescriptor.get(t);return n||(n=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,n)),[n,t]}};R4=YRe([YW(0,LJ),YW(1,Wt)],R4);var QRe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},g_=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let O4=class extends wke{constructor(e,t,n,s,r){super(n),this.instantiationService=e,this.contextKeyService=t,this.accessibilityService=s,this.layoutService=r,this.contexts=new Map}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(R4))),this._quickAccess}createController(e=this.layoutService,t){var n,s;const r={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>{},setContextKey:a=>this.setContextKey(a),returnFocus:()=>e.focus(),createList:(a,l,c,h,u)=>this.instantiationService.createInstance(y4,a,l,c,h,u),styles:this.computeStyles()},o=this._register(new Pk(Object.assign(Object.assign({},r),t)));return o.layout(e.dimension,(s=(n=e.offset)===null||n===void 0?void 0:n.top)!==null&&s!==void 0?s:0),this._register(e.onDidLayout(a=>{var l,c;return o.layout(a,(c=(l=e.offset)===null||l===void 0?void 0:l.top)!==null&&c!==void 0?c:0)})),this._register(o.onShow(()=>this.resetContextKeys())),this._register(o.onHide(()=>this.resetContextKeys())),o}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new De(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t&&t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},n=Xt.None){return this.controller.pick(e,t,n)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},Ko(this.theme,{quickInputBackground:pV,quickInputForeground:fAe,quickInputTitleBackground:gAe,contrastBorder:Pi,widgetShadow:Nm})),inputBox:Ko(this.theme,{inputForeground:MQ,inputBackground:NQ,inputBorder:RQ,inputValidationInfoBackground:$5,inputValidationInfoForeground:j5,inputValidationInfoBorder:q5,inputValidationWarningBackground:OQ,inputValidationWarningForeground:PQ,inputValidationWarningBorder:FQ,inputValidationErrorBackground:BQ,inputValidationErrorForeground:VQ,inputValidationErrorBorder:WQ}),countBadge:Ko(this.theme,{badgeBackground:Sb,badgeForeground:xb,badgeBorder:Pi}),button:Ko(this.theme,{buttonForeground:sAe,buttonBackground:WM,buttonHoverBackground:rAe,buttonBorder:Pi}),progressBar:Ko(this.theme,{progressBarBackground:oAe}),keybindingLabel:Ko(this.theme,{keybindingLabelBackground:_Ae,keybindingLabelForeground:bAe,keybindingLabelBorder:vAe,keybindingLabelBottomBorder:wAe,keybindingLabelShadow:Nm}),list:Ko(this.theme,{listBackground:pV,listInactiveFocusForeground:YC,listInactiveSelectionIconForeground:QC,listInactiveFocusBackground:XC,listFocusOutline:Is,listInactiveFocusOutline:Is,pickerGroupBorder:mAe,pickerGroupForeground:pAe})}}};O4=QRe([g_(0,Wt),g_(1,$e),g_(2,si),g_(3,tr),g_(4,Ak)],O4);var kJ=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},fd=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let P4=class extends O4{constructor(e,t,n,s,r,o){super(t,n,s,r,o),this.host=void 0;const a=zm.get(e);this.host={_serviceBrand:void 0,get container(){return a.widget.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus()}}createController(){return super.createController(this.host)}};P4=kJ([fd(1,Wt),fd(2,$e),fd(3,si),fd(4,tr),fd(5,Ak)],P4);let F4=class{constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const n=t=this.instantiationService.createInstance(P4,e);this.mapEditorToService.set(e,t),vf(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}pick(e,t={},n=Xt.None){return this.activeService.pick(e,t,n)}createQuickPick(){return this.activeService.createQuickPick()}};F4=kJ([fd(0,Wt),fd(1,ii)],F4);class zm{constructor(e){this.editor=e,this.widget=new Fk(this.editor)}static get(e){return e.getContribution(zm.ID)}dispose(){this.widget.dispose()}}zm.ID="editor.controller.quickInput";class Fk{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return Fk.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}Fk.ID="editor.contrib.quickInputWidget";Ps(zm.ID,zm);var St;(function(i){const e=new Jv;class t{constructor(l,c){this._serviceId=l,this._factory=c,this._value=null}get id(){return this._serviceId}get(l){if(!this._value){if(l&&(this._value=l[this._serviceId.toString()]),this._value||(this._value=this._factory(l)),!this._value)throw new Error("Service "+this._serviceId+" is missing!");e.set(this._serviceId,this._value)}return this._value}}i.LazyStaticService=t;let n=[];function s(a,l){let c=new t(a,l);return n.push(c),c}function r(a){let l=new Jv;for(const[h,u]of NDe())l.set(h,u);for(let h in a)a.hasOwnProperty(h)&&l.set(mt(h),a[h]);n.forEach(h=>l.set(h.id,h.get(a)));let c=new bD(l,!0);return l.set(Wt,c),[l,c]}i.init=r,i.instantiationService=s(Wt,()=>new bD(e,!0));const o=new rQ;i.configurationService=s(Fi,()=>o),i.resourceConfigurationService=s(NY,()=>new fke(o)),i.resourcePropertiesService=s(MY,()=>new TM(o)),i.contextService=s(eQ,()=>new ck),i.labelService=s(Ew,()=>new mke),i.telemetryService=s(k0,()=>new gke),i.dialogService=s(YX,()=>new uke),i.notificationService=s(Vn,()=>new lk),i.markerService=s(Mw,()=>new dd),i.modeService=s(Os,a=>new n1),i.standaloneThemeService=s(Aw,()=>new a4e),i.logService=s(Jc,()=>new sLe(new nLe)),i.undoRedoService=s(Dw,a=>new LD(i.dialogService.get(a),i.notificationService.get(a))),i.languageConfigurationService=s(Cw,a=>new kx(i.configurationService.get(a),i.modeService.get(a))),i.modelService=s(Rs,a=>new pD(i.configurationService.get(a),i.resourcePropertiesService.get(a),i.standaloneThemeService.get(a),i.logService.get(a),i.undoRedoService.get(a),i.modeService.get(a),i.languageConfigurationService.get(a))),i.markerDecorationsService=s(A5,a=>new L4(i.modelService.get(a),i.markerService.get(a))),i.contextKeyService=s($e,a=>new o4(i.configurationService.get(a))),i.codeEditorService=s(ii,a=>new fD(null,i.contextKeyService.get(a),i.standaloneThemeService.get(a))),i.editorProgressService=s(R0,()=>new ak),i.storageService=s(dg,()=>new aRe),i.editorWorkerService=s(Vu,a=>new LM(i.modelService.get(a),i.resourceConfigurationService.get(a),i.logService.get(a)))})(St||(St={}));class XRe extends te{constructor(e,t){super();const[n,s]=St.init(t);this._serviceCollection=n,this._instantiationService=s;const r=this.get(Fi),o=this.get(Vn),a=this.get(k0),l=this.get(si),c=this.get(Jc),h=this.get($e);let u=(m,v)=>{let b=null;return t&&(b=t[m.toString()]),b||(b=v()),this._serviceCollection.set(m,b),b};u(tr,()=>new k4(h,r)),u(Xr,()=>new v4(l));let d=u(vn,()=>new dke(this._instantiationService)),f=u(Bi,()=>this._register(new sQ(h,d,a,o,c,e))),g=u(Ak,()=>new _ke(St.codeEditorService.get(ii),e));u(LJ,()=>new F4(s,St.codeEditorService.get(ii)));let p=u(og,()=>this._register(new f4(g)));u(lg,()=>new uRe),u(ag,()=>{const m=new d4(a,o,p,f,l);return m.configure({blockMouse:!1}),this._register(m)}),u(L0,()=>new x4(d)),u(jY,()=>new pke(St.modelService.get(Rs)))}get(e){let t=this._serviceCollection.get(e);if(!t)throw new Error("Missing service "+e);return t}set(e,t){this._serviceCollection.set(e,t)}has(e){return this._serviceCollection.has(e)}}function AJ(i,e,t){let n=new XRe(i,e),s=null;n.has(Tl)||(s=new IM(St.modelService.get()),n.set(Tl,s)),n.has(gu)||n.set(gu,new aM(n.get(ii),n.get(vn)));let r=t(n);return s&&s.setEditor(r),r}function JRe(i,e,t){return AJ(i,t||{},n=>new i4(i,e,n,n.get(Wt),n.get(ii),n.get(vn),n.get($e),n.get(Bi),n.get(og),n.get(Aw),n.get(Vn),n.get(Fi),n.get(tr),n.get(Rs),n.get(Os)))}function eOe(i){return St.codeEditorService.get().onCodeEditorAdd(e=>{i(e)})}function tOe(i,e,t){return AJ(i,t||{},n=>new n4(i,e,n,n.get(Wt),n.get($e),n.get(Bi),n.get(og),n.get(Vu),n.get(ii),n.get(Aw),n.get(Vn),n.get(Fi),n.get(ag),n.get(R0),n.get(lg)))}function iOe(i,e){return new dxe(i,e)}function nOe(i,e,t){return EX(St.modelService.get(),St.modeService.get(),i,e,t)}function sOe(i,e){St.modelService.get().setMode(i,St.modeService.get().create(e))}function rOe(i,e,t){i&&St.markerService.get().changeOne(e,i.uri,t)}function oOe(i){return St.markerService.get().read(i)}function aOe(i){return St.markerService.get().onMarkerChanged(i)}function lOe(i){return St.modelService.get().getModel(i)}function cOe(){return St.modelService.get().getModels()}function hOe(i){return St.modelService.get().onModelAdded(i)}function uOe(i){return St.modelService.get().onModelRemoved(i)}function dOe(i){return St.modelService.get().onModelModeChanged(e=>{i({model:e.model,oldLanguage:e.oldModeId})})}function fOe(i){return cLe(St.modelService.get(),i)}function gOe(i,e){const t=St.standaloneThemeService.get();return t.registerEditorContainer(i),w5.colorizeElement(t,St.modeService.get(),i,e)}function pOe(i,e,t){return St.standaloneThemeService.get().registerEditorContainer(document.body),w5.colorize(St.modeService.get(),i,e,t)}function mOe(i,e,t=4){return St.standaloneThemeService.get().registerEditorContainer(document.body),w5.colorizeModelLine(i,e,t)}function _Oe(i){let e=xi.get(i);return e||{getInitialState:()=>jL,tokenize:(t,n,s,r)=>jxe(i,t,s,r)}}function bOe(i,e){St.modeService.get().triggerMode(e);let n=_Oe(e),s=El(i),r=[],o=n.getInitialState();for(let a=0,l=s.length;a<l;a++){let c=s[a],h=n.tokenize(c,!0,o,0);r[a]=h.tokens,o=h.endState}return r}function vOe(i,e){St.standaloneThemeService.get().defineTheme(i,e)}function wOe(i){St.standaloneThemeService.get().setTheme(i)}function yOe(){Ake()}function COe(i,e){return Tt.registerCommand({id:i,handler:e})}function SOe(){return{create:JRe,onDidCreateEditor:eOe,createDiffEditor:tOe,createDiffNavigator:iOe,createModel:nOe,setModelLanguage:sOe,setModelMarkers:rOe,getModelMarkers:oOe,onDidChangeMarkers:aOe,getModels:cOe,getModel:lOe,onDidCreateModel:hOe,onWillDisposeModel:uOe,onDidChangeModelLanguage:dOe,createWebWorker:fOe,colorizeElement:gOe,colorize:pOe,colorizeModelLine:mOe,tokenize:bOe,defineTheme:vOe,setTheme:wOe,remeasureFonts:yOe,registerCommand:COe,AccessibilitySupport:dN,ContentWidgetPositionPreference:_N,CursorChangeReason:bN,DefaultEndOfLine:vN,EditorAutoIndentStrategy:yN,EditorOption:CN,EndOfLinePreference:SN,EndOfLineSequence:xN,MinimapPosition:TN,MouseTargetType:NN,OverlayWidgetPositionPreference:MN,OverviewRulerLane:RN,RenderLineNumbersType:ON,RenderMinimap:PN,ScrollbarVisibility:BN,ScrollType:FN,TextEditorCursorBlinkingStyle:UN,TextEditorCursorStyle:$N,TrackedRangeStickiness:jN,WrappingIndent:qN,ConfigurationChangedEvent:vZ,BareFontInfo:zd,FontInfo:cM,TextModelResolvedOptions:HC,FindMatch:Ev,EditorType:UL,EditorOptions:Xf}}function xOe(i,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!i(t))return!1;return!0}function Qy(i,e){return typeof i=="boolean"?i:e}function QW(i,e){return typeof i=="string"?i:e}function DOe(i){const e={};for(const t of i)e[t]=!0;return e}function XW(i,e=!1){e&&(i=i.map(function(n){return n.toLowerCase()}));const t=DOe(i);return e?function(n){return t[n.toLowerCase()]!==void 0&&t.hasOwnProperty(n.toLowerCase())}:function(n){return t[n]!==void 0&&t.hasOwnProperty(n)}}function B4(i,e){e=e.replace(/@@/g,"");let t=0,n;do n=!1,e=e.replace(/@(\w+)/g,function(r,o){n=!0;let a="";if(typeof i[o]=="string")a=i[o];else if(i[o]&&i[o]instanceof RegExp)a=i[o].source;else throw i[o]===void 0?Ft(i,"language definition does not contain attribute '"+o+"', used at: "+e):Ft(i,"attribute reference '"+o+"' must be a string, used at: "+e);return Xg(a)?"":"(?:"+a+")"}),t++;while(n&&t<5);e=e.replace(/\x01/g,"@");let s=(i.ignoreCase?"i":"")+(i.unicode?"u":"");return new RegExp(e,s)}function LOe(i,e,t,n){if(n<0)return i;if(n<e.length)return e[n];if(n>=100){n=n-100;let s=t.split(".");if(s.unshift(t),n<s.length)return s[n]}return null}function kOe(i,e,t,n){let s=-1,r=t,o=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(s=parseInt(o[3]),o[2]&&(s=s+100)),r=o[4]);let a="~",l=r;!r||r.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(o=r.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(a=o[1],l=o[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){let h=XW(l.split("|"),i.ignoreCase);c=function(u){return a==="~"?h(u):!h(u)}}else if(a==="@"||a==="!@"){let h=i[l];if(!h)throw Ft(i,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!xOe(function(d){return typeof d=="string"},h))throw Ft(i,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);let u=XW(h,i.ignoreCase);c=function(d){return a==="@"?u(d):!u(d)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){let h=B4(i,"^"+l+"$");c=function(u){return a==="~"?h.test(u):!h.test(u)}}else c=function(h,u,d,f){return B4(i,"^"+Nh(i,l,u,d,f)+"$").test(h)};else if(l.indexOf("$")<0){let h=Yh(i,l);c=function(u){return a==="=="?u===h:u!==h}}else{let h=Yh(i,l);c=function(u,d,f,g,p){let m=Nh(i,h,d,f,g);return a==="=="?u===m:u!==m}}return s===-1?{name:t,value:n,test:function(h,u,d,f){return c(h,h,u,d,f)}}:{name:t,value:n,test:function(h,u,d,f){let g=LOe(h,u,d,s);return c(g||"",h,u,d,f)}}}function V4(i,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw Ft(i,"a 'token' attribute must be of type string, in rule: "+e);{let n={token:t.token};if(t.token.indexOf("$")>=0&&(n.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")n.bracket=1;else if(t.bracket==="@close")n.bracket=-1;else throw Ft(i,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw Ft(i,"the next state must be a string value in rule: "+e);{let s=t.next;if(!/^(@pop|@push|@popall)$/.test(s)&&(s[0]==="@"&&(s=s.substr(1)),s.indexOf("$")<0&&!ELe(i,Nh(i,s,"",[],""))))throw Ft(i,"the next state '"+t.next+"' is not defined in rule: "+e);n.next=s}}return typeof t.goBack=="number"&&(n.goBack=t.goBack),typeof t.switchTo=="string"&&(n.switchTo=t.switchTo),typeof t.log=="string"&&(n.log=t.log),typeof t.nextEmbedded=="string"&&(n.nextEmbedded=t.nextEmbedded,i.usesEmbedded=!0),n}}else if(Array.isArray(t)){let n=[];for(let s=0,r=t.length;s<r;s++)n[s]=V4(i,e,t[s]);return{group:n}}else if(t.cases){let n=[];for(let r in t.cases)if(t.cases.hasOwnProperty(r)){const o=V4(i,e,t.cases[r]);r==="@default"||r==="@"||r===""?n.push({test:void 0,value:o,name:r}):r==="@eos"?n.push({test:function(a,l,c,h){return h},value:o,name:r}):n.push(kOe(i,e,r,o))}const s=i.defaultToken;return{test:function(r,o,a,l){for(const c of n)if(!c.test||c.test(r,o,a,l))return c.value;return s}}}else throw Ft(i,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class AOe{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let n;if(typeof t=="string")n=t;else if(t instanceof RegExp)n=t.source;else throw Ft(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=n.length>0&&n[0]==="^",this.name=this.name+": "+n,this.regex=B4(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")")}setAction(e,t){this.action=V4(e,this.name,t)}}function EOe(i,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");let t={};t.languageId=i,t.includeLF=Qy(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=Qy(e.ignoreCase,!1),t.unicode=Qy(e.unicode,!1),t.tokenPostfix=QW(e.tokenPostfix,"."+t.languageId),t.defaultToken=QW(e.defaultToken,"source"),t.usesEmbedded=!1;let n=e;n.languageId=i,n.includeLF=t.includeLF,n.ignoreCase=t.ignoreCase,n.unicode=t.unicode,n.noThrow=t.noThrow,n.usesEmbedded=t.usesEmbedded,n.stateNames=e.tokenizer,n.defaultToken=t.defaultToken;function s(o,a,l){for(const c of l){let h=c.include;if(h){if(typeof h!="string")throw Ft(t,"an 'include' attribute must be a string at: "+o);if(h[0]==="@"&&(h=h.substr(1)),!e.tokenizer[h])throw Ft(t,"include target '"+h+"' is not defined at: "+o);s(o+"."+h,a,e.tokenizer[h])}else{const u=new AOe(o);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(u.setRegex(n,c[0]),c.length>=3)if(typeof c[1]=="string")u.setAction(n,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const d=c[1];d.next=c[2],u.setAction(n,d)}else throw Ft(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+o);else u.setAction(n,c[1]);else{if(!c.regex)throw Ft(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+o);c.name&&typeof c.name=="string"&&(u.name=c.name),c.matchOnlyAtStart&&(u.matchOnlyAtLineStart=Qy(c.matchOnlyAtLineStart,!1)),u.setRegex(n,c.regex),u.setAction(n,c.action)}a.push(u)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw Ft(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(let o in e.tokenizer)if(e.tokenizer.hasOwnProperty(o)){t.start||(t.start=o);const a=e.tokenizer[o];t.tokenizer[o]=new Array,s("tokenizer."+o,t.tokenizer[o],a)}if(t.usesEmbedded=n.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw Ft(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];let r=[];for(let o of e.brackets){let a=o;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw Ft(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")r.push({token:a.token+t.tokenPostfix,open:Yh(t,a.open),close:Yh(t,a.close)});else throw Ft(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=r,t.noThrow=!0,t}function IOe(i){Zd.registerLanguage(i)}function TOe(){let i=[];return i=i.concat(Zd.getLanguages()),i}function NOe(i){return St.modeService.get().languageIdCodec.encodeLanguageId(i)}function MOe(i,e){let t=St.modeService.get().onDidEncounterLanguage(n=>{n===i&&(t.dispose(),e())});return t}function ROe(i,e){const t=St.modeService.get().validateLanguageId(i);if(!t)throw new Error(`Cannot set configuration for unknown language ${i}`);return Ii.register(t,e,100)}class OOe{constructor(e,t){this._languageId=e,this._actual=t}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n,s){if(typeof this._actual.tokenize=="function")return f1.adaptTokenize(this._languageId,this._actual,e,n,s);throw new Error("Not supported!")}tokenize2(e,t,n){let s=this._actual.tokenizeEncoded(e,n);return new BL(s.tokens,s.endState)}}class f1{constructor(e,t,n,s){this._languageId=e,this._actual=t,this._modeService=n,this._standaloneThemeService=s}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t,n){let s=[],r=0;for(let o=0,a=e.length;o<a;o++){const l=e[o];let c=l.startIndex;o===0?c=0:c<r&&(c=r),s[o]=new FL(c+n,l.scopes,t),r=c}return s}static adaptTokenize(e,t,n,s,r){let o=t.tokenize(n,s),a=f1._toClassicTokens(o.tokens,e,r),l;return o.endState.equals(s)?l=s:l=o.endState,new jO(a,l)}tokenize(e,t,n,s){return f1.adaptTokenize(this._languageId,this._actual,e,n,s)}_toBinaryTokens(e,t,n){const s=e.encodeLanguageId(this._languageId),r=this._standaloneThemeService.getColorTheme().tokenTheme;let o=[],a=0,l=0;for(let h=0,u=t.length;h<u;h++){const d=t[h],f=r.match(s,d.scopes);if(a>0&&o[a-1]===f)continue;let g=d.startIndex;h===0?g=0:g<l&&(g=l),o[a++]=g+n,o[a++]=f,l=g}let c=new Uint32Array(a);for(let h=0;h<a;h++)c[h]=o[h];return c}tokenize2(e,t,n,s){let r=this._actual.tokenize(e,n),o=this._toBinaryTokens(this._modeService.languageIdCodec,r.tokens,s),a;return r.endState.equals(n)?a=n:a=r.endState,new BL(o,a)}}function POe(i){return"tokenizeEncoded"in i}function EJ(i){return i&&typeof i.then=="function"}function FOe(i){if(i){const e=[null];for(let t=1,n=i.length;t<n;t++)e[t]=Z.fromHex(i[t]);St.standaloneThemeService.get().setColorMapOverride(e)}else St.standaloneThemeService.get().setColorMapOverride(null)}function BOe(i,e){const t=St.modeService.get().validateLanguageId(i);if(!t)throw new Error(`Cannot set tokens provider for unknown language ${i}`);const n=s=>POe(s)?new OOe(t,s):new f1(t,s,St.modeService.get(),St.standaloneThemeService.get());return EJ(e)?xi.registerPromise(i,e.then(s=>n(s))):xi.register(i,n(e))}function VOe(i,e){const t=n=>NLe(St.modeService.get(),St.standaloneThemeService.get(),i,EOe(i,n));return EJ(e)?xi.registerPromise(i,e.then(n=>t(n))):xi.register(i,t(e))}function WOe(i,e){return yx.register(i,e)}function zOe(i,e){return uM.register(i,e)}function HOe(i,e){return dM.register(i,e)}function UOe(i,e){return Iv.register(i,{provideHover:(t,n,s)=>{let r=t.getWordAtPosition(n);return Promise.resolve(e.provideHover(t,n,s)).then(o=>{if(o)return!o.range&&r&&(o.range=new F(n.lineNumber,r.startColumn,n.lineNumber,r.endColumn)),o.range||(o.range=new F(n.lineNumber,n.column,n.lineNumber,n.column)),o})}})}function $Oe(i,e){return fM.register(i,e)}function jOe(i,e){return Cx.register(i,e)}function qOe(i,e){return Hxe.register(i,e)}function GOe(i,e){return Tv.register(i,e)}function KOe(i,e){return xx.register(i,e)}function ZOe(i,e){return Dx.register(i,e)}function YOe(i,e){return gM.register(i,e)}function QOe(i,e,t){return Dl.register(i,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,provideCodeActions:(n,s,r,o)=>{let a=St.markerService.get().read({resource:n.uri}).filter(l=>F.areIntersectingOrTouching(l,s));return e.provideCodeActions(n,s,{markers:a,only:r.only},o)},resolveCodeAction:e.resolveCodeAction})}function XOe(i,e){return ub.register(i,e)}function JOe(i,e){return Th.register(i,e)}function e5e(i,e){return fY.register(i,e)}function t5e(i,e){return gY.register(i,e)}function i5e(i,e){return ta.register(i,e)}function n5e(i,e){return Sm.register(i,e)}function s5e(i,e){return mM.register(i,e)}function r5e(i,e){return Sx.register(i,e)}function o5e(i,e){return Uxe.register(i,e)}function a5e(i,e){return xm.register(i,e)}function l5e(i,e){return pY.register(i,e)}function c5e(i,e){return u5.register(i,e)}function h5e(i,e){return pM.register(i,e)}function u5e(){return{register:IOe,getLanguages:TOe,onLanguage:MOe,getEncodedLanguageId:NOe,setLanguageConfiguration:ROe,setColorMap:FOe,setTokensProvider:BOe,setMonarchTokensProvider:VOe,registerReferenceProvider:WOe,registerRenameProvider:zOe,registerCompletionItemProvider:i5e,registerSignatureHelpProvider:HOe,registerHoverProvider:UOe,registerDocumentSymbolProvider:$Oe,registerDocumentHighlightProvider:jOe,registerLinkedEditingRangeProvider:qOe,registerDefinitionProvider:GOe,registerImplementationProvider:KOe,registerTypeDefinitionProvider:ZOe,registerCodeLensProvider:YOe,registerCodeActionProvider:QOe,registerDocumentFormattingEditProvider:XOe,registerDocumentRangeFormattingEditProvider:JOe,registerOnTypeFormattingEditProvider:e5e,registerLinkProvider:t5e,registerColorProvider:n5e,registerFoldingRangeProvider:s5e,registerDeclarationProvider:r5e,registerSelectionRangeProvider:o5e,registerDocumentSemanticTokensProvider:a5e,registerDocumentRangeSemanticTokensProvider:l5e,registerInlineCompletionsProvider:c5e,registerInlayHintsProvider:h5e,DocumentHighlightKind:wN,CompletionItemKind:gN,CompletionItemTag:pN,CompletionItemInsertTextRule:fN,SymbolKind:zN,SymbolTag:HN,IndentAction:DN,CompletionTriggerKind:mN,SignatureHelpTriggerKind:WN,InlayHintKind:LN,InlineCompletionTriggerKind:kN,FoldingRangeKind:Sa}}class KE{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}var O0=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function d5e(i){const e=[],t=new Set,n=ub.ordered(i);for(const r of n)e.push(r),r.extensionId&&t.add(KE.toKey(r.extensionId));const s=Th.ordered(i);for(const r of s){if(r.extensionId){if(t.has(KE.toKey(r.extensionId)))continue;t.add(KE.toKey(r.extensionId))}e.push({displayName:r.displayName,extensionId:r.extensionId,provideDocumentFormattingEdits(o,a,l){return r.provideDocumentRangeFormattingEdits(o,o.getFullModelRange(),a,l)}})}return e}class g1{static setFormatterSelector(e){return{dispose:g1._selectors.unshift(e)}}static select(e,t,n){return O0(this,void 0,void 0,function*(){if(e.length===0)return;const s=ct.first(g1._selectors);if(s)return yield s(e,t,n)})}}g1._selectors=new _r;function f5e(i,e,t,n,s){return O0(this,void 0,void 0,function*(){const r=Th.ordered(e);for(const o of r){let a=yield Promise.resolve(o.provideDocumentRangeFormattingEdits(e,t,n,s)).catch(Fo);if(kl(a))return yield i.computeMoreMinimalEdits(e.uri,a)}})}function g5e(i,e,t,n){return O0(this,void 0,void 0,function*(){const s=d5e(e);for(const r of s){let o=yield Promise.resolve(r.provideDocumentFormattingEdits(e,t,n)).catch(Fo);if(kl(o))return yield i.computeMoreMinimalEdits(e.uri,o)}})}function p5e(i,e,t,n,s){const r=fY.ordered(e);return r.length===0||r[0].autoFormatTriggerCharacters.indexOf(n)<0?Promise.resolve(void 0):Promise.resolve(r[0].provideOnTypeFormattingEdits(e,t,n,s,Xt.None)).catch(Fo).then(o=>i.computeMoreMinimalEdits(e.uri,o))}Tt.registerCommand("_executeFormatRangeProvider",function(i,...e){return O0(this,void 0,void 0,function*(){const[t,n,s]=e;Mi(We.isUri(t)),Mi(F.isIRange(n));const r=i.get(Tl),o=i.get(Vu),a=yield r.createModelReference(t);try{return f5e(o,a.object.textEditorModel,F.lift(n),s,Xt.None)}finally{a.dispose()}})});Tt.registerCommand("_executeFormatDocumentProvider",function(i,...e){return O0(this,void 0,void 0,function*(){const[t,n]=e;Mi(We.isUri(t));const s=i.get(Tl),r=i.get(Vu),o=yield s.createModelReference(t);try{return g5e(r,o.object.textEditorModel,n,Xt.None)}finally{o.dispose()}})});Tt.registerCommand("_executeFormatOnTypeProvider",function(i,...e){return O0(this,void 0,void 0,function*(){const[t,n,s,r]=e;Mi(We.isUri(t)),Mi(q.isIPosition(n)),Mi(typeof s=="string");const o=i.get(Tl),a=i.get(Vu),l=yield o.createModelReference(t);try{return p5e(a,l.object.textEditorModel,q.lift(n),s,r)}finally{l.dispose()}})});var ZE;Xf.wrappingIndent.defaultValue=0;Xf.glyphMargin.defaultValue=!1;Xf.autoIndent.defaultValue=3;Xf.overviewRulerLanes.defaultValue=2;g1.setFormatterSelector((i,e,t)=>Promise.resolve(i[0]));const fs=TZ();fs.editor=SOe();fs.languages=u5e();fs.CancellationTokenSource;const m5e=fs.Emitter;fs.KeyCode;fs.KeyMod;fs.Position;const Uze=fs.Range;fs.Selection;fs.SelectionDirection;const $ze=fs.MarkerSeverity;fs.MarkerTag;fs.Uri;fs.Token;const _5e=fs.editor,Bk=fs.languages;(!((ZE=ti.MonacoEnvironment)===null||ZE===void 0)&&ZE.globalAPI||typeof define=="function"&&define.amd)&&(self.monaco=fs);typeof self.require<"u"&&typeof self.require.config=="function"&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const b5e="#/definitions/RootSpec",v5e="http://json-schema.org/draft-07/schema#",w5e={AggregateParams:{additionalProperties:!1,properties:{groupby:{description:"Which fields to use for grouping. Missing `groupby` results in a single group that includes all the data items.",items:{$ref:"#/definitions/Field"},type:"array"},type:{const:"aggregate",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},Align:{enum:["left","center","right"],type:"string"},Axis:{additionalProperties:!1,properties:{domain:{description:"A boolean flag indicating if the domain (the axis baseline) should be included as part of the axis.\n\n__Default value:__ `true`",type:"boolean"},domainCap:{description:'The stroke cap for the domain line\'s ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`',enum:["butt","round","square"],type:"string"},domainColor:{description:'Color of axis domain line.\n\n__Default value:__ `"gray"`.',type:"string"},domainDash:{description:"An array of alternating [stroke, space] lengths for dashed domain lines.",items:{type:"number"},type:"array"},domainDashOffset:{description:"The pixel offset at which to start drawing with the domain dash array.",type:"number"},domainWidth:{description:"Stroke width of axis domain line\n\n__Default value:__ `1`",type:"number"},format:{description:"The format specifier pattern for axis labels. Must be a legal [d3-format](https://github.com/d3/d3-format#locale_format) specifier.",type:"string"},grid:{description:"A boolean flag indicating if grid lines should be included as part of the axis.\n\n__Default value:__ `false`",type:"boolean"},gridCap:{description:'The stroke cap for the grid line\'s ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`',enum:["butt","round","square"],type:"string"},gridColor:{description:"Color of grid lines.\n\n__Default value:__ `lightgray`",type:"string"},gridDash:{description:"An array of alternating [stroke, space] lengths for dashed grid mark lines.",items:{type:"number"},type:"array"},gridDashOffset:{description:"The pixel offset at which to start drawing with the grid mark dash array.",type:"number"},gridOpacity:{description:"The opacity of the grid lines.\n\n__Default value:__ `1`",type:"number"},gridWidth:{description:"Width of the grid lines.\n\n__Default value:__ `1`",type:"number"},labelAlign:{$ref:"#/definitions/Align",description:"Horizontal text alignment of axis tick labels, overriding the default setting for the current axis orientation."},labelAngle:{description:"The rotation angle of the axis labels.\n\n__Default value:__ `-90` for nominal and ordinal fields; `0` otherwise.",maximum:360,minimum:-360,type:"number"},labelBaseline:{$ref:"#/definitions/Baseline",description:'Vertical text baseline of axis tick labels, overriding the default setting for the current axis orientation. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`.'},labelColor:{description:"The color of the tick label, can be in hex color code or regular color name.",type:"string"},labelFont:{description:"The font of the tick label.",type:"string"},labelFontSize:{description:"The font size of the label, in pixels.",minimum:0,type:"number"},labelFontStyle:{description:"Font style of the title.",type:"string"},labelFontWeight:{description:"Font weight of axis tick labels.",type:"string"},labelLimit:{description:"Maximum allowed pixel width of axis tick labels.\n\n__Default value:__ `180`",type:"number"},labelPadding:{description:"The padding, in pixels, between axis and text labels.\n\n__Default value:__ `2`",type:"number"},labels:{description:"A boolean flag indicating if labels should be included as part of the axis.\n\n__Default value:__ `true`.",type:"boolean"},maxExtent:{description:"The maximum extent in pixels that axis ticks and labels should use. This determines a maximum offset value for axis titles.\n\n__Default value:__ `undefined`.",type:"number"},minExtent:{description:"The minimum extent in pixels that axis ticks and labels should use. This determines a minimum offset value for axis titles.\n\n__Default value:__ `30` for y-axis; `undefined` for x-axis.",type:"number"},offset:{description:"The orthogonal offset in pixels by which to displace the axis from its position along the edge of the chart.",type:"number"},orient:{$ref:"#/definitions/AxisOrient",description:'The orientation of the axis. One of `"top"`, `"bottom"`, `"left"` or `"right"`. The orientation can be used to further specialize the axis type (e.g., a y axis oriented for the right edge of the chart).\n\n__Default value:__ `"bottom"` for x-axes and `"left"` for y-axes.'},tickCap:{description:'The stroke cap for the tick lines\' ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`',enum:["butt","round","square"],type:"string"},tickColor:{description:`The color of the axis's tick.

__Default value:__ \`"gray"\``,type:"string"},tickCount:{description:'A desired number of ticks, for axes visualizing quantitative scales. The resulting number may be different so that values are "nice" (multiples of `2`, `5`, `10`) and lie within the underlying scale\'s range.',minimum:0,type:"number"},tickDash:{description:"An array of alternating [stroke, space] lengths for dashed tick mark lines.",items:{type:"number"},type:"array"},tickDashOffset:{description:"The pixel offset at which to start drawing with the tick mark dash array.",type:"number"},tickMinStep:{description:"The minimum desired step between axis ticks, in terms of scale domain values. For example, a value of `1` indicates that ticks should not be less than 1 unit apart. If `tickMinStep` is specified, the `tickCount` value will be adjusted, if necessary, to enforce the minimum step value.",type:"number"},tickSize:{description:"The size in pixels of axis ticks.\n\n__Default value:__ `5`",minimum:0,type:"number"},tickWidth:{description:"The width, in pixels, of ticks.\n\n__Default value:__ `1`",minimum:0,type:"number"},ticks:{description:"Boolean value that determines whether the axis should include ticks.\n\n__Default value:__ `true`",type:"boolean"},title:{description:"A title for the axis (none by default).",type:"string"},titleColor:{description:"Color of the title, can be in hex color code or regular color name.",type:"string"},titleFont:{description:'Font of the title. (e.g., `"Helvetica Neue"`).',type:"string"},titleFontSize:{description:"Font size of the title.",minimum:0,type:"number"},titleFontStyle:{description:"Font style of the title.",type:"string"},titleFontWeight:{description:'Font weight of the title. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).',type:"string"},titleOpacity:{description:"Opacity of the axis title.",type:"number"},titlePadding:{description:"The padding, in pixels, between title and axis.",type:"number"},values:{description:"Explicitly set the visible axis tick and label values.",items:{},type:"array"}},type:"object"},AxisGenomeData:{additionalProperties:!1,properties:{channel:{$ref:"#/definitions/PrimaryPositionalChannel",description:"Which channel's scale domain to use"},type:{const:"axisGenome",type:"string"}},required:["type","channel"],type:"object"},AxisOrient:{enum:["top","bottom","left","right"],type:"string"},AxisTicksData:{additionalProperties:!1,properties:{axis:{$ref:"#/definitions/Axis",description:"Optional axis properties"},channel:{$ref:"#/definitions/PrimaryPositionalChannel",description:"Which channel's scale domain to listen to"},type:{const:"axisTicks",type:"string"}},required:["type","channel"],type:"object"},BamData:{additionalProperties:!1,properties:{channel:{$ref:"#/definitions/PrimaryPositionalChannel",description:`Which channel's scale domain to monitor.

__Default value:__ \`"x"\``},indexUrl:{description:'URL of the index file.\n\n__Default value:__ `url` + `".bai"`.',type:"string"},type:{const:"bam",type:"string"},url:{description:"URL of the BigBed file.",type:"string"},windowSize:{description:"Size of each chunk when fetching the BigBed file. Data is only fetched when the length of the visible domain smaller than the window size.\n\n__Default value:__ `10000`",type:"number"}},required:["type","url"],type:"object"},Baseline:{enum:["top","middle","bottom","alphabetic"],type:"string"},BigBedData:{additionalProperties:!1,properties:{channel:{$ref:"#/definitions/PrimaryPositionalChannel",description:`Which channel's scale domain to monitor.

__Default value:__ \`"x"\``},type:{const:"bigbed",type:"string"},url:{description:"URL of the BigBed file.",type:"string"},windowSize:{description:"Size of each chunk when fetching the BigBed file. Data is only fetched when the length of the visible domain smaller than the window size.\n\n__Default value:__ `1000000`",type:"number"}},required:["type","url"],type:"object"},BigWigData:{additionalProperties:!1,properties:{channel:{$ref:"#/definitions/PrimaryPositionalChannel",description:`Which channel's scale domain to monitor.

__Default value:__ \`"x"\``},pixelsPerBin:{description:"The approximate minimum width of each data bin, in pixels.\n\n__Default value:__ `2`",type:"number"},type:{const:"bigwig",type:"string"},url:{description:"URL of the BigWig file.",type:"string"}},required:["type","url"],type:"object"},Channel:{anyOf:[{$ref:"#/definitions/PositionalChannel"},{const:"color",type:"string"},{const:"fill",type:"string"},{const:"stroke",type:"string"},{const:"opacity",type:"string"},{const:"fillOpacity",type:"string"},{const:"strokeOpacity",type:"string"},{const:"strokeWidth",type:"string"},{const:"size",type:"string"},{const:"shape",type:"string"},{const:"text",type:"string"},{const:"angle",type:"string"},{const:"sample",type:"string"},{const:"uniqueId",type:"string"},{const:"search",type:"string"},{const:"facetIndex",type:"string"},{const:"semanticScore",type:"string"},{const:"dx",type:"string"},{const:"dy",type:"string"}]},ChromPosDef:{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/Axis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},chrom:{$ref:"#/definitions/FieldName",description:"The field having the chromosome or contig."},offset:{description:"An offset or offsets that allow for adjusting the numbering base. The offset is subtracted from the positions.\n\nGenomeSpy uses internally zero-based indexing with half-open intervals. UCSC-based formats (BED, etc.) generally use this scheme. However, for example, VCF files use one-based indexing and must be adjusted by setting the offset to `1`.\n\n**Default:** `0`",type:"number"},pos:{$ref:"#/definitions/FieldName",description:"The field having an intra-chromosomal position."},resolutionChannel:{$ref:"#/definitions/Channel",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{const:"locus",type:"string"}},required:["chrom","type"],type:"object"},ChromosomalLocus:{additionalProperties:!1,properties:{chrom:{description:'The name of the chromosome. For example: `"chr1"`, `"CHR1"`, or `"1"`.',type:"string"},pos:{description:"The zero-based position inside the chromosome or contig.",type:"number"}},required:["chrom"],type:"object"},CollectParams:{additionalProperties:!1,properties:{groupby:{description:"Arranges the data into consecutive batches based on the groups. This is mainly intended for internal use so that faceted data can be handled as batches.",items:{$ref:"#/definitions/Field"},type:"array"},sort:{$ref:"#/definitions/CompareParams",description:"The sort order."},type:{const:"collect",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},"ColorDef<string>":{$ref:"#/definitions/MarkPropDef%3Cstring%2C(string%7Cnull)%3E"},CompareParams:{additionalProperties:!1,properties:{field:{anyOf:[{items:{$ref:"#/definitions/Field"},type:"array"},{$ref:"#/definitions/Field"}],description:"The field(s) to sort by"},order:{anyOf:[{items:{$ref:"#/definitions/SortOrder"},type:"array"},{$ref:"#/definitions/SortOrder"}],description:'The order(s) to use: `"ascending"` (default), `"descending"`.'}},required:["field"],type:"object"},ComplexDomain:{description:"A complex domain that needs to be converted into a scalar domain before it is assigned to a scale.",items:{$ref:"#/definitions/ChromosomalLocus"},type:"array"},ConcatSpec:{additionalProperties:!1,properties:{baseUrl:{type:"string"},columns:{type:"number"},concat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["concat","columns"],type:"object"},Contig:{additionalProperties:!1,properties:{name:{type:"string"},size:{type:"number"}},required:["name","size"],type:"object"},CoverageParams:{additionalProperties:!1,properties:{as:{description:"The output field for the computed coverage.",type:"string"},asChrom:{description:"The output field for the chromosome.\n\n**Default:** Same as `chrom`",type:"string"},asEnd:{description:"The output field for the end coordinate.\n\n**Default:** Same as `end`",type:"string"},asStart:{description:"The output field for the start coordinate.\n\n**Default:** Same as `start`",type:"string"},chrom:{$ref:"#/definitions/Field",description:"An optional chromosome field that is passed through. TODO: groupby"},end:{$ref:"#/definitions/Field",description:"The field representing the end coordinate of the segment (exclusive)."},start:{$ref:"#/definitions/Field",description:"The field representing the start coordinate of the segment (inclusive)."},type:{const:"coverage",description:"The type of the transform to be applied",type:"string"},weight:{$ref:"#/definitions/Field",description:"A field representing an optional weight for the segment. Can be used with copy ratios, for example."}},required:["end","start","type"],type:"object"},CsvDataFormat:{additionalProperties:!1,properties:{parse:{anyOf:[{$ref:"#/definitions/Parse"},{type:"null"}],description:'If set to `null`, disable type inference based on the spec and only use type inference based on the data. Alternatively, a parsing directive object can be provided for explicit data types. Each property of the object corresponds to a field name, and the value to the desired data type (one of `"number"`, `"boolean"`, `"date"`, or null (do not parse the field)). For example, `"parse": {"modified_on": "date"}` parses the `modified_on` field in each input record a Date value.\n\nFor `"date"`, we parse data based using Javascript\'s [`Date.parse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse). For Specific date formats can be provided (e.g., `{foo: "date:\'%m%d%Y\'"}`), using the [d3-time-format syntax](https://github.com/d3/d3-time-format#locale_format). UTC date format parsing is supported similarly (e.g., `{foo: "utc:\'%m%d%Y\'"}`). See more about [UTC time](https://vega.github.io/vega-lite/docs/timeunit.html#utc)'},type:{description:'Type of input data: `"json"`, `"csv"`, `"tsv"`, `"dsv"`.\n\n__Default value:__  The default format type is determined by the extension of the file URL. If no extension is detected, `"json"` will be used by default.',enum:["csv","tsv"],type:"string"}},type:"object"},Data:{anyOf:[{$ref:"#/definitions/DataSource"},{$ref:"#/definitions/Generator"}]},DataFormat:{anyOf:[{$ref:"#/definitions/CsvDataFormat"},{$ref:"#/definitions/DsvDataFormat"},{$ref:"#/definitions/JsonDataFormat"},{$ref:"#/definitions/OtherDataFormat"}]},DataSource:{anyOf:[{$ref:"#/definitions/UrlData"},{$ref:"#/definitions/InlineData"},{$ref:"#/definitions/NamedData"},{$ref:"#/definitions/DynamicCallbackData"},{$ref:"#/definitions/LazyData"}]},DsvDataFormat:{additionalProperties:!1,properties:{delimiter:{description:"The delimiter between records. The delimiter must be a single character (i.e., a single 16-bit code unit); so, ASCII delimiters are fine, but emoji delimiters are not.",maxLength:1,minLength:1,type:"string"},parse:{anyOf:[{$ref:"#/definitions/Parse"},{type:"null"}],description:'If set to `null`, disable type inference based on the spec and only use type inference based on the data. Alternatively, a parsing directive object can be provided for explicit data types. Each property of the object corresponds to a field name, and the value to the desired data type (one of `"number"`, `"boolean"`, `"date"`, or null (do not parse the field)). For example, `"parse": {"modified_on": "date"}` parses the `modified_on` field in each input record a Date value.\n\nFor `"date"`, we parse data based using Javascript\'s [`Date.parse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse). For Specific date formats can be provided (e.g., `{foo: "date:\'%m%d%Y\'"}`), using the [d3-time-format syntax](https://github.com/d3/d3-time-format#locale_format). UTC date format parsing is supported similarly (e.g., `{foo: "utc:\'%m%d%Y\'"}`). See more about [UTC time](https://vega.github.io/vega-lite/docs/timeunit.html#utc)'},type:{const:"dsv",description:'Type of input data: `"json"`, `"csv"`, `"tsv"`, `"dsv"`.\n\n__Default value:__  The default format type is determined by the extension of the file URL. If no extension is detected, `"json"` will be used by default.',type:"string"}},required:["delimiter"],type:"object"},DynamicCallbackData:{additionalProperties:!1,properties:{dynamicCallbackSource:{description:"The View class has `getDynamicData()` methods that provides the data. This is intended for internal use.",type:"boolean"},format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for parsing the data."},name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"}},required:["dynamicCallbackSource"],type:"object"},DynamicOpacity:{additionalProperties:!1,description:"DynamicOpacity specifies a zoom-dependent behavior for view opacity. The opacity is interpolated between the specified stops.",properties:{channel:{$ref:"#/definitions/PrimaryPositionalChannel"},unitsPerPixel:{description:"Stops expressed as units (base pairs, for example) per pixel.",items:{type:"number"},type:"array"},values:{description:"Opacity values that match the given stops.",items:{type:"number"},type:"array"}},required:["unitsPerPixel","values"],type:"object"},Encoding:{additionalProperties:!1,properties:{angle:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:"Rotation angle of point and text marks."},color:{$ref:"#/definitions/ColorDef%3Cstring%3E",description:"Color of the marks – either fill or stroke color based on  the `filled` property of mark definition.\n\n_Note:_ 1) For fine-grained control over both fill and stroke colors of the marks, please use the `fill` and `stroke` channels. The `fill` or `stroke` encodings have higher precedence than `color`, thus may override the `color` encoding if conflicting encodings are specified. 2) See the scale documentation for more information about customizing [color scheme](https://vega.github.io/vega-lite/docs/scale.html#scheme)."},dx:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E"},dy:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E"},facetIndex:{$ref:"#/definitions/FieldDefWithoutScale%3Cstring%3E",description:"For internal use"},fill:{$ref:"#/definitions/ColorDef%3Cstring%3E",description:"Fill color of the marks.\n\n_Note:_ The `fill` encoding has higher precedence than `color`, thus may override the `color` encoding if conflicting encodings are specified."},fillOpacity:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:"Fill opacity of the marks."},opacity:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:"Opacity of the marks."},sample:{$ref:"#/definitions/FieldDefWithoutScale%3Cstring%3E",description:"Facet identifier for interactive filtering, sorting, and grouping in the App."},search:{$ref:"#/definitions/FieldDefWithoutScale%3Cstring%3E"},semanticScore:{$ref:"#/definitions/FieldDefWithoutScale%3Cstring%3E"},shape:{$ref:"#/definitions/ShapeDef%3Cstring%3E",description:'Shape of the mark.\n\nFor `point` marks the supported values include:\n- plotting shapes: `"circle"`, `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`, `"triangle-down"`, `"triangle-right"`, or `"triangle-left"`.\n- centered directional shape `"triangle"`'},size:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:'Size of the mark.\n- For `"point"` – the symbol size, or pixel area of the mark.\n- For `"text"` – the text\'s font size.'},stroke:{$ref:"#/definitions/ColorDef%3Cstring%3E",description:"Stroke color of the marks.\n\n_Note:_ The `stroke` encoding has higher precedence than `color`, thus may override the `color` encoding if conflicting encodings are specified."},strokeOpacity:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:"Stroke opacity of the marks."},strokeWidth:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:"Stroke width of the marks."},text:{$ref:"#/definitions/TextDef%3Cstring%3E",description:"Text of the `text` mark."},uniqueId:{$ref:"#/definitions/FieldDefWithoutScale%3Cstring%3E",description:"For internal use"},x:{$ref:"#/definitions/PositionDef%3Cstring%3E",description:"X coordinates of the marks.\n\nThe `value` of this channel can be a number between zero and one."},x2:{$ref:"#/definitions/Position2Def%3Cstring%3E",description:"X2 coordinates of the marks.\n\nThe `value` of this channel can be a number between zero and one."},y:{$ref:"#/definitions/PositionDef%3Cstring%3E",description:"Y coordinates of the marks.\n\nThe `value` of this channel can be a number between zero and one."},y2:{$ref:"#/definitions/Position2Def%3Cstring%3E",description:"Y2 coordinates of the marks.\n\nThe `value` of this channel can be a number between zero and one."}},type:"object"},ExprDef:{additionalProperties:!1,properties:{expr:{description:"An expression. Properties of the data can be accessed through the `datum` object.",type:"string"}},required:["expr"],type:"object"},Field:{description:"The name of the field or a JavaScript expression for accessing nested properties. Dots and brackets in the field name must be escaped.",type:"string"},"FieldDefWithoutScale<string>":{additionalProperties:!1,properties:{field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},type:"object"},FieldName:{type:"string"},FilterParams:{additionalProperties:!1,properties:{expr:{description:"An expression string. The data object is removed if the expression evaluates to false.",type:"string"},type:{const:"filter",description:"The type of the transform to be applied",type:"string"}},required:["expr","type"],type:"object"},FilterScoredLabelsParams:{additionalProperties:!1,properties:{channel:{description:'**Default:** `"x"`',enum:["x","y"],type:"string"},lane:{$ref:"#/definitions/Field",description:"An optional field representing element's lane, e.g., if transcripts are shown using a piled up layout."},padding:{description:"Padding (in pixels) around the element.\n\n**Default:** `0`",type:"number"},pos:{$ref:"#/definitions/Field",description:"The field representing element's position on the domain."},score:{$ref:"#/definitions/Field",description:"The field representing the score used for prioritization."},type:{const:"filterScoredLabels",description:"The type of the transform to be applied",type:"string"},width:{$ref:"#/definitions/Field",description:"The field representing element's width in pixels"}},required:["pos","score","type","width"],type:"object"},FlattenCompressedExonsParams:{additionalProperties:!1,properties:{as:{description:'Field names for the flattened exons.\n\n**Default:** `["exonStart", "exonEnd"]`',items:{type:"string"},maxItems:2,minItems:2,type:"array"},exons:{$ref:"#/definitions/Field",description:'The field containing the exons.\n\n**Default:** `"exons"`'},start:{$ref:"#/definitions/Field",description:'Start coordinate of the gene body.\n\n**Default:** `"start"`'},type:{const:"flattenCompressedExons",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},FlattenDelimitedParams:{additionalProperties:!1,properties:{as:{anyOf:[{items:{type:"string"},type:"array"},{type:"string"}],description:`The output field name(s) for the flattened field.

**Default:** the input fields.`},field:{anyOf:[{items:{$ref:"#/definitions/Field"},type:"array"},{$ref:"#/definitions/Field"}],description:"The field(s) to split and flatten"},separator:{anyOf:[{items:{type:"string"},type:"array"},{type:"string"}],description:"Separator(s) used on the field(s) TODO: Rename to delimiter"},type:{const:"flattenDelimited",description:"The type of the transform to be applied",type:"string"}},required:["field","separator","type"],type:"object"},FlattenSequenceParams:{additionalProperties:!1,properties:{as:{description:'Name of the fields where the zero-based index number and flattened sequence letter are written to.\n\n**Default:** `["pos", "sequence"]`',items:{type:"string"},maxItems:2,minItems:2,type:"array"},field:{$ref:"#/definitions/Field",description:'The field to flatten.\n\n**Default:** `"sequence"`'},type:{const:"flattenSequence",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},FontStyle:{enum:["normal","italic"],type:"string"},FontWeight:{anyOf:[{type:"number"},{const:"thin",type:"string"},{const:"light",type:"string"},{const:"regular",type:"string"},{const:"normal",type:"string"},{const:"medium",type:"string"},{const:"bold",type:"string"},{const:"black",type:"string"}]},FormulaParams:{additionalProperties:!1,properties:{as:{description:"The (new) field where the computed value is written to",type:"string"},expr:{description:"An expression string",type:"string"},type:{const:"formula",description:"The type of the transform to be applied",type:"string"}},required:["as","expr","type"],type:"object"},Generator:{$ref:"#/definitions/SequenceGenerator"},GenomeConfig:{additionalProperties:!1,properties:{baseUrl:{description:'Base url of data files: chromsizes, cytobands, and gene annotations.\n\n**Default:** `"https://genomespy.app/data/genomes/"`',type:"string"},contigs:{description:"As an alternative for chromSizes, the contigs can be provided inline.",items:{$ref:"#/definitions/Contig"},type:"array"},name:{description:"Name of the genome assembly, e.g., `hg19` or `hg38`.",type:"string"}},required:["name"],type:"object"},HConcatSpec:{additionalProperties:!1,properties:{baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},hconcat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["hconcat"],type:"object"},HandledTooltip:{additionalProperties:!1,properties:{handler:{type:"string"},params:{type:"object"}},required:["handler"],type:"object"},IdentifierParams:{additionalProperties:!1,properties:{as:{description:'**Default:** `"_uniqueId"`',type:"string"},type:{const:"identifier",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},ImportConfig:{additionalProperties:!1,properties:{name:{type:"string"},params:{type:"object"},url:{type:"string"}},type:"object"},ImportSpec:{additionalProperties:!1,properties:{import:{$ref:"#/definitions/ImportConfig"}},required:["import"],type:"object"},IndexedFastaData:{additionalProperties:!1,properties:{channel:{$ref:"#/definitions/PrimaryPositionalChannel",description:`Which channel's scale domain to monitor.

__Default value:__ \`"x"\``},indexUrl:{description:'URL of the index file.\n\n__Default value:__ `url` + `".fai"`.',type:"string"},type:{const:"indexedFasta",type:"string"},url:{description:"URL of the fasta file.",type:"string"},windowSize:{description:"Size of each chunk when fetching the fasta file. Data is only fetched when the length of the visible domain smaller than the window size.\n\n__Default value:__ `7000`",type:"number"}},required:["type","url"],type:"object"},InlineData:{additionalProperties:!1,properties:{format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for parsing the data."},name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"},values:{$ref:"#/definitions/InlineDataset",description:"The full data set, included inline. This can be an array of objects or primitive values, an object, or a string. Arrays of primitive values are ingested as objects with a `data` property. Strings are parsed according to the specified format type."}},required:["values"],type:"object"},InlineDataset:{anyOf:[{items:{type:"number"},type:"array"},{items:{type:"string"},type:"array"},{items:{type:"boolean"},type:"array"},{items:{type:"object"},type:"array"},{type:"string"},{type:"object"}]},JsonDataFormat:{additionalProperties:!1,properties:{parse:{anyOf:[{$ref:"#/definitions/Parse"},{type:"null"}],description:'If set to `null`, disable type inference based on the spec and only use type inference based on the data. Alternatively, a parsing directive object can be provided for explicit data types. Each property of the object corresponds to a field name, and the value to the desired data type (one of `"number"`, `"boolean"`, `"date"`, or null (do not parse the field)). For example, `"parse": {"modified_on": "date"}` parses the `modified_on` field in each input record a Date value.\n\nFor `"date"`, we parse data based using Javascript\'s [`Date.parse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse). For Specific date formats can be provided (e.g., `{foo: "date:\'%m%d%Y\'"}`), using the [d3-time-format syntax](https://github.com/d3/d3-time-format#locale_format). UTC date format parsing is supported similarly (e.g., `{foo: "utc:\'%m%d%Y\'"}`). See more about [UTC time](https://vega.github.io/vega-lite/docs/timeunit.html#utc)'},property:{description:'The JSON property containing the desired data. This parameter can be used when the loaded JSON file may have surrounding structure or meta-data. For example `"property": "values.features"` is equivalent to retrieving `json.values.features` from the loaded JSON object.',type:"string"},type:{const:"json",description:'Type of input data: `"json"`, `"csv"`, `"tsv"`, `"dsv"`.\n\n__Default value:__  The default format type is determined by the extension of the file URL. If no extension is detected, `"json"` will be used by default.',type:"string"}},type:"object"},LayerSpec:{additionalProperties:!1,properties:{aggregateSamples:{items:{anyOf:[{$ref:"#/definitions/UnitSpec"},{$ref:"#/definitions/LayerSpec"}]},type:"array"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},layer:{items:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpec"}]},type:"array"},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},view:{$ref:"#/definitions/ViewBackground"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["layer"],type:"object"},LazyData:{additionalProperties:!1,properties:{lazy:{$ref:"#/definitions/LazyDataParams"}},required:["lazy"],type:"object"},LazyDataParams:{anyOf:[{$ref:"#/definitions/AxisTicksData"},{$ref:"#/definitions/AxisGenomeData"},{$ref:"#/definitions/IndexedFastaData"},{$ref:"#/definitions/BigWigData"},{$ref:"#/definitions/BigBedData"},{$ref:"#/definitions/BamData"}]},LinearizeGenomicCoordinateParams:{additionalProperties:!1,properties:{as:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"The output field or fields for linearized coordinates."},channel:{description:'Get the genome assembly from the scale of the channel.\n\n**Default:** `"x"`',enum:["x","y"],type:"string"},chrom:{$ref:"#/definitions/Field",description:"The chromosome/contig field"},offset:{anyOf:[{type:"number"},{items:{type:"number"},type:"array"}],description:"An offset or offsets that allow for adjusting the numbering base. The offset is subtracted from the positions.\n\nGenomeSpy uses internally zero-based indexing with half-open intervals. UCSC-based formats (BED, etc.) generally use this scheme. However, for example, VCF files use one-based indexing and must be adjusted by setting the offset to `1`.\n\n**Default:** `0`"},pos:{anyOf:[{$ref:"#/definitions/Field"},{items:{$ref:"#/definitions/Field"},type:"array"}],description:"The field or fields that contain intra-chromosomal positions"},type:{const:"linearizeGenomicCoordinate",description:"The type of the transform to be applied",type:"string"}},required:["as","chrom","pos","type"],type:"object"},MarkConfigAndType:{additionalProperties:!1,properties:{align:{$ref:"#/definitions/Align",description:'The horizontal alignment of the text. One of `"left"`, `"center"`, or `"right"`.\n\n**Default value:** `"left"`'},angle:{description:"The rotation angle in degrees.\n\n**Default value:** `0`",type:"number"},baseline:{$ref:"#/definitions/Baseline",description:'The vertical alignment of the text.  One of `"top"`, `"middle"`, `"bottom"`.\n\n**Default value:** `"bottom"`'},buildIndex:{description:`Builds and index for efficient rendering of subsets of the data. The data must be sorted by the x coordinate.

TODO: This should be enabled automatically if the data are sorted.`,type:"boolean"},clip:{description:"If true, the mark is clipped to the UnitView's rectangle. By default, clipping is enabled for marks that have zoomable positional scales.",type:"boolean"},color:{type:"string"},color2:{description:"TODO",type:"string"},cornerRadius:{description:"Radius of the rounded corners.\n\n**Default value:** `0`",type:"number"},cornerRadiusBottomLeft:{description:"Radius of the bottom left rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},cornerRadiusBottomRight:{description:"Radius of the bottom right rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},cornerRadiusTopLeft:{description:"Radius of the top left rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},cornerRadiusTopRight:{description:"Radius of the top right rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},dx:{description:"The horizontal offset between the text and its anchor point, in pixels. Applied after the rotation by `angle`.",type:"number"},dy:{description:"The vertical offset between the text and its anchor point, in pixels. Applied after the rotation by `angle`.",type:"number"},fill:{type:"string"},fillGradientStrength:{description:"Gradient strength controls the amount of the gradient eye-candy effect in the fill color. Valid values are between 0 and 1.\n\n**Default value:** `0`",type:"number"},fillOpacity:{type:"number"},filled:{description:"Whether the `color` represents the `fill` color (`true`) or the `stroke` color (`false`).",type:"boolean"},fitToBand:{description:'If true, sets the secondary positional channel that allows the text to be squeezed (see the `squeeze` property). Can be used when: 1) `"band"`, `"index"`, or `"locus"` scale is being used and 2) only the primary positional channel is specified.\n\n**Default value:** `false`',type:"boolean"},flushX:{description:"If true, the text is kept inside the viewport when the range of `x` and `x2` intersect the viewport.",type:"boolean"},flushY:{description:"If true, the text is kept inside the viewport when the range of `y` and `y2` intersect the viewport.",type:"boolean"},font:{description:'The font typeface. GenomeSpy uses [SDF](https://github.com/Chlumsky/msdfgen) versions of [Google Fonts](https://fonts.google.com/). Check their availability at the [A-Frame Fonts](https://github.com/etiennepinchon/aframe-fonts/tree/master/fonts) repository. System fonts are **not** supported.\n\n**Default value:** `"Lato"`',type:"string"},fontStyle:{$ref:"#/definitions/FontStyle",description:'The font style. Valid values: `"normal"` and `"italic"`.\n\n**Default value:** `"normal"`'},fontWeight:{$ref:"#/definitions/FontWeight",description:'The font weight. The following strings and numbers are valid values: `"thin"` (`100`), `"light"` (`300`), `"regular"` (`400`), `"normal"` (`400`), `"medium"` (`500`), `"bold"` (`700`), `"black"` (`900`)\n\n**Default value:** `"regular"`'},geometricZoomBound:{description:"Enables geometric zooming. The value is the base two logarithmic zoom level where the maximum point size is reached.\n\n**Default value:** `0`",type:"number"},inwardStroke:{description:"Should the stroke only grow inwards, e.g, the diameter/outline is not affected by the stroke width. Thus, a point that has a zero size has no visible stroke. This allows strokes to be used with geometric zoom, etc.\n\n**Default value:** `false`",type:"boolean"},logoLetters:{description:"Stretch letters so that they can be used with [sequence logos](https://en.wikipedia.org/wiki/Sequence_logo), etc...",type:"boolean"},minBufferSize:{description:"Minimum size for WebGL buffers (number of data items). Allows for using `bufferSubData()` to update graphics.\n\nThis property is intended for internal use.",type:"number"},minHeight:{description:"The minimum height of a rectangle in pixels. The property clamps rectangles' heights.\n\n**Default value:** `0`",type:"number"},minLength:{description:"The minimum length of the rule in pixels. Use this property to ensure that very short ranged rules remain visible even when the user zooms out.\n\n**Default value:** `0`",type:"number"},minOpacity:{description:"Clamps the minimum size-dependent opacity. The property does not affect the `opacity` channel. Valid values are between `0` and `1`.\n\nWhen a rectangle would be smaller than what is specified in `minHeight` and `minWidth`, it is faded out proportionally. Example: a rectangle would be rendered as one pixel wide, but `minWidth` clamps it to five pixels. The rectangle is actually rendered as five pixels wide, but its opacity is multiplied by 0.2. With this setting, you can limit the factor to, for example, 0.5 to keep the rectangles more clearly visible.\n\n**Default value:** `0`",type:"number"},minSagittaLength:{description:"Minimum length of the arc's sagitta. Makes very short links more clearly visible.\n\n**Default value:** `1.5`",type:"number"},minWidth:{description:`The minimum width of a rectangle in pixels. The property clamps rectangles' widths when the viewport is zoomed out.

This property also reduces flickering of very narrow rectangles when zooming. The value should generally be at least one.

**Default value:** \`1\``,type:"number"},opacity:{type:"number"},paddingX:{description:"The horizontal padding, in pixels, when the `x2` channel is used for ranged text.\n\n**Default value:** `0`",type:"number"},paddingY:{description:"The vertical padding, in pixels, when the `y2` channel is used for ranged text.\n\n**Default value:** `0`",type:"number"},sagittaScaleFactor:{description:"Scaling factor of the arc's sagitta. The default value `1.0` produces roughly circular arcs.\n\n**Default value:** `1.0`",type:"number"},sampleFacetPadding:{description:"Padding between sample facet's upper/lower edge and the maximum point size. This property controls how tightly points are squeezed when facet's height is smaller than the maximum point size. The unit is a proportion of facet's height. The value must be between `0` and `0.5`. This property has no effect when sample faceting is not used.\n\n**Default value:** `0.1`",type:"number"},segments:{description:"The number of segments in the bézier curve. Affects the rendering quality and performance. Use a higher value for a smoother curve.\n\n**Default value:* `101`",type:"number"},semanticZoomFraction:{description:"TODO\n\n**Default value:** `0.02`",type:"number"},shape:{description:'One of `"circle"`, `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`, `"triangle-down"`, `"triangle-right"`, or `"triangle-left"`.\n\n**Default value:** `"circle"`',type:"string"},size:{description:"The font size in pixels.\n\n**Default value:** `11`",type:"number"},size2:{description:"TODO",type:"number"},squeeze:{description:"If the `squeeze` property is true and secondary positional channels (`x2` and/or `y2`) are used, the text is scaled to fit mark's width and/or height.\n\n**Default value:** `true`",type:"boolean"},stroke:{type:"string"},strokeCap:{description:'The style of stroke ends. Available choices: `"butt"`, `"round`", and `"square"`.\n\n**Default value:** `"butt"`',enum:["butt","square","round"],type:"string"},strokeDash:{description:"An array of of alternating stroke and gap lengths or `null` for solid strokes.\n\n**Default value:** `null`",items:{type:"number"},type:"array"},strokeDashOffset:{description:"An offset for the stroke dash pattern.\n\n**Default value:** `0`",type:"number"},strokeOpacity:{type:"number"},strokeWidth:{description:"The stroke width in pixels.",type:"number"},text:{$ref:"#/definitions/Scalar",description:'The text to display. The format of numeric data can be customized by setting a [format specifier](https://github.com/d3/d3-format#locale_format) to channel definition\'s `format` property.\n\n**Default value:** `""`'},tooltip:{$ref:"#/definitions/Tooltip",description:"TODO"},type:{$ref:"#/definitions/MarkType"},viewportEdgeFadeDistanceBottom:{type:"number"},viewportEdgeFadeDistanceLeft:{type:"number"},viewportEdgeFadeDistanceRight:{type:"number"},viewportEdgeFadeDistanceTop:{type:"number"},viewportEdgeFadeWidthBottom:{type:"number"},viewportEdgeFadeWidthLeft:{type:"number"},viewportEdgeFadeWidthRight:{type:"number"},viewportEdgeFadeWidthTop:{type:"number"},x:{type:"number"},x2:{type:"number"},xOffset:{description:"Offsets of the `x` and `x2` coordinates in pixels. The offset is applied after the viewport scaling and translation.\n\n**Default value:** `0`",type:"number"},y:{type:"number"},y2:{type:"number"},yOffset:{description:"Offsets of the `y` and `y2` coordinates in pixels. The offset is applied after the viewport scaling and translation.\n\n**Default value:** `0`",type:"number"}},required:["type"],type:"object"},"MarkPropDatumDef<Type>":{additionalProperties:!1,properties:{datum:{$ref:"#/definitions/Scalar",description:"A constant value in data domain."},resolutionChannel:{$ref:"#/definitions/Channel",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/Type"}},required:["type"],type:"object"},"MarkPropDatumDef<TypeForShape>":{additionalProperties:!1,properties:{datum:{$ref:"#/definitions/Scalar",description:"A constant value in data domain."},resolutionChannel:{$ref:"#/definitions/Channel",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/TypeForShape"}},required:["type"],type:"object"},"MarkPropDef<string,(string|null),TypeForShape>":{anyOf:[{$ref:"#/definitions/MarkPropFieldOrDatumOrExprDef%3Cstring%2CTypeForShape%3E"},{$ref:"#/definitions/ValueDef%3C(string%7Cnull)%3E"}]},"MarkPropDef<string,(string|null)>":{anyOf:[{$ref:"#/definitions/MarkPropFieldOrDatumOrExprDef%3Cstring%2CType%3E"},{$ref:"#/definitions/ValueDef%3C(string%7Cnull)%3E"}]},"MarkPropDef<string,number>":{anyOf:[{$ref:"#/definitions/MarkPropFieldOrDatumOrExprDef%3Cstring%2CType%3E"},{$ref:"#/definitions/ValueDef%3Cnumber%3E"}]},MarkPropExprDef:{additionalProperties:!1,properties:{expr:{description:"An expression. Properties of the data can be accessed through the `datum` object.",type:"string"},resolutionChannel:{$ref:"#/definitions/Channel",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},type:{$ref:"#/definitions/Type"}},required:["expr","type"],type:"object"},"MarkPropFieldDef<string,Type>":{additionalProperties:!1,description:"Field definition of a mark property, which can contain a legend.",properties:{field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},resolutionChannel:{$ref:"#/definitions/Channel",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/Type"}},required:["type"],type:"object"},"MarkPropFieldDef<string,TypeForShape>":{additionalProperties:!1,description:"Field definition of a mark property, which can contain a legend.",properties:{field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},resolutionChannel:{$ref:"#/definitions/Channel",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/TypeForShape"}},required:["type"],type:"object"},"MarkPropFieldOrDatumOrExprDef<string,Type>":{anyOf:[{$ref:"#/definitions/MarkPropFieldDef%3Cstring%2CType%3E"},{$ref:"#/definitions/MarkPropDatumDef%3CType%3E"},{$ref:"#/definitions/MarkPropExprDef"}]},"MarkPropFieldOrDatumOrExprDef<string,TypeForShape>":{anyOf:[{$ref:"#/definitions/MarkPropFieldDef%3Cstring%2CTypeForShape%3E"},{$ref:"#/definitions/MarkPropDatumDef%3CTypeForShape%3E"},{$ref:"#/definitions/MarkPropExprDef"}]},MarkType:{enum:["rect","point","rule","text","link"],type:"string"},MeasureTextParams:{additionalProperties:!1,properties:{as:{type:"string"},field:{$ref:"#/definitions/Field"},fontSize:{type:"number"},type:{const:"measureText",description:"The type of the transform to be applied",type:"string"}},required:["as","field","fontSize","type"],type:"object"},MergeFacetsParams:{additionalProperties:!1,properties:{type:{const:"mergeFacets",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},NamedData:{additionalProperties:!1,properties:{format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for parsing the data."},name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"}},required:["name"],type:"object"},NumericDomain:{items:{type:"number"},type:"array"},"NumericMarkPropDef<string>":{$ref:"#/definitions/MarkPropDef%3Cstring%2Cnumber%3E"},NumericValueDef:{$ref:"#/definitions/ValueDef%3Cnumber%3E"},OtherDataFormat:{additionalProperties:!1,description:'Other data format, such as `"fasta"`',properties:{type:{type:"string"}},required:["type"],type:"object"},PaddingConfig:{anyOf:[{$ref:"#/definitions/Paddings"},{type:"number"}]},Paddings:{additionalProperties:!1,properties:{bottom:{type:"number"},left:{type:"number"},right:{type:"number"},top:{type:"number"}},type:"object"},Parse:{additionalProperties:{$ref:"#/definitions/ParseValue"},type:"object"},ParseValue:{anyOf:[{type:"null"},{type:"string"},{const:"string",type:"string"},{const:"boolean",type:"string"},{const:"date",type:"string"},{const:"number",type:"string"}]},PileupParams:{additionalProperties:!1,properties:{as:{description:'The output field name for the computed lane.\n\n**Default:** `"lane"`.',type:"string"},end:{$ref:"#/definitions/Field",description:"The field representing the end coordinate of the segment (exclusive)."},preference:{$ref:"#/definitions/Field",description:"An optional field indicating the preferred lane. Use together with the `preferredOrder` property."},preferredOrder:{anyOf:[{items:{type:"string"},type:"array"},{items:{type:"number"},type:"array"},{items:{type:"boolean"},type:"array"}],description:"The order of the lane preferences. The first element contains the value that should place the segment on the first lane and so forth. If the preferred lane is occupied, the first available lane is taken."},spacing:{description:"The spacing between adjacent segments on the same lane in coordinate units.\n\n**Default:** `1`.",type:"number"},start:{$ref:"#/definitions/Field",description:"The field representing the start coordinate of the segment (inclusive)."},type:{const:"pileup",description:"The type of the transform to be applied",type:"string"}},required:["end","start","type"],type:"object"},"Position2Def<string>":{anyOf:[{additionalProperties:!1,properties:{band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},type:"object"},{$ref:"#/definitions/SecondaryChromPosDef"},{additionalProperties:!1,properties:{band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},datum:{$ref:"#/definitions/Scalar",description:"A constant value in data domain."},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},type:"object"},{additionalProperties:!1,properties:{band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},expr:{description:"An expression. Properties of the data can be accessed through the `datum` object.",type:"string"}},required:["expr"],type:"object"},{$ref:"#/definitions/PositionValueDef"}]},PositionDatumDef:{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/Axis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},datum:{$ref:"#/definitions/Scalar",description:"A constant value in data domain."},resolutionChannel:{$ref:"#/definitions/Channel",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/Type"}},required:["type"],type:"object"},"PositionDef<string>":{anyOf:[{$ref:"#/definitions/PositionFieldDef%3Cstring%3E"},{$ref:"#/definitions/ChromPosDef"},{$ref:"#/definitions/PositionDatumDef"},{$ref:"#/definitions/PositionExprDef"},{$ref:"#/definitions/PositionValueDef"}]},PositionExprDef:{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/Axis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},expr:{description:"An expression. Properties of the data can be accessed through the `datum` object.",type:"string"},type:{$ref:"#/definitions/Type"}},required:["expr","type"],type:"object"},"PositionFieldDef<string>":{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/Axis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},resolutionChannel:{$ref:"#/definitions/Channel",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/Type"}},required:["type"],type:"object"},PositionValueDef:{$ref:"#/definitions/NumericValueDef"},PositionalChannel:{anyOf:[{$ref:"#/definitions/PrimaryPositionalChannel"},{$ref:"#/definitions/SecondaryPositionalChannel"}]},PrimaryPositionalChannel:{enum:["x","y"],type:"string"},ProjectParams:{additionalProperties:!1,properties:{as:{description:"New names for the projected fields. If omitted, the names of the source fields are used.",items:{type:"string"},type:"array"},fields:{description:"The fields to be projected.",items:{$ref:"#/definitions/Field"},type:"array"},type:{const:"project",description:"The type of the transform to be applied",type:"string"}},required:["fields","type"],type:"object"},RegexExtractParams:{additionalProperties:!1,properties:{as:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"The new field or an array of fields where the extracted values are written."},field:{$ref:"#/definitions/Field",description:"The source field"},regex:{description:'A valid JavaScript regular expression with at least one group. For example: `"^Sample(\\\\d+)$"`.\n\nRead more at: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions',type:"string"},skipInvalidInput:{description:"Do not complain about invalid input. Just skip it and leave the new fields undefined on the affected datum.\n\n**Default:** `false`",type:"boolean"},type:{const:"regexExtract",description:"The type of the transform to be applied",type:"string"}},required:["as","field","regex","type"],type:"object"},RegexFoldParams:{additionalProperties:!1,properties:{asKey:{description:'**Default:** `"sample"`',type:"string"},asValue:{anyOf:[{items:{type:"string"},type:"array"},{type:"string"}],description:"A new column name for the extracted values."},columnRegex:{anyOf:[{items:{type:"string"},type:"array"},{type:"string"}],description:"A regular expression that matches to column names. The regex must have one capturing group that is used for extracting the key (e.g., a sample id) from the column name."},skipRegex:{description:"An optional regex that matches to fields that should not be included in the new folded data objects.",type:"string"},type:{const:"regexFold",description:"The type of the transform to be applied",type:"string"}},required:["asValue","columnRegex","type"],type:"object"},ResolutionBehavior:{description:'`"independent"` and `"shared"` behave similarly to Vega-Lite. `"excluded"` behaves like `"shared"`, but is not pulled towards the root. `"forced"` behaves like `"shared"`, but is forced towards the root even if the parent has `"independent"` behavior.',enum:["independent","shared","excluded","forced"],type:"string"},RootSpec:{anyOf:[{additionalProperties:!1,properties:{$schema:{type:"string"},aggregateSamples:{items:{anyOf:[{$ref:"#/definitions/UnitSpec"},{$ref:"#/definitions/LayerSpec"}]},type:"array"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},mark:{anyOf:[{$ref:"#/definitions/MarkType"},{$ref:"#/definitions/MarkConfigAndType"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},view:{$ref:"#/definitions/ViewBackground"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["mark"],type:"object"},{additionalProperties:!1,properties:{$schema:{type:"string"},aggregateSamples:{items:{anyOf:[{$ref:"#/definitions/UnitSpec"},{$ref:"#/definitions/LayerSpec"}]},type:"array"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},layer:{items:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpec"}]},type:"array"},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},view:{$ref:"#/definitions/ViewBackground"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["layer"],type:"object"},{additionalProperties:!1,properties:{$schema:{type:"string"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},samples:{$ref:"#/definitions/SampleDef",description:"Sample metadata definition. If the object is empty, the sample identifiers will be inferred from the data."},spec:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpec"}],description:"The view specification to be repeated for each sample."},stickySummaries:{type:"boolean"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["samples","spec"],type:"object"},{additionalProperties:!1,properties:{$schema:{type:"string"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},vconcat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["vconcat"],type:"object"},{additionalProperties:!1,properties:{$schema:{type:"string"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},hconcat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["hconcat"],type:"object"},{additionalProperties:!1,properties:{$schema:{type:"string"},baseUrl:{type:"string"},columns:{type:"number"},concat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["columns","concat"],type:"object"}]},SampleAttributeDef:{additionalProperties:!1,properties:{barScale:{$ref:"#/definitions/Scale",description:"An optional scale definition for mapping the attribute to the width of a metadata rectangle."},scale:{$ref:"#/definitions/Scale",description:"Scale definition for the (default) color channel"},type:{$ref:"#/definitions/Type",description:'The attribute type. One of `"nominal"`, `"ordinal"`, or `"quantitative"`.'},visible:{description:"Whether the attribute is visible by default.",type:"boolean"},width:{description:"Width of the column in pixels.",type:"number"}},required:["type"],type:"object"},SampleDef:{additionalProperties:!1,properties:{attributeLabelAngle:{description:"Angle to be added to the default label angle (-90).\n\n**Default value:** `0`",type:"number"},attributeLabelFont:{description:'The font typeface. GenomeSpy uses [SDF](https://github.com/Chlumsky/msdfgen) versions of [Google Fonts](https://fonts.google.com/). Check their availability at the [A-Frame Fonts](https://github.com/etiennepinchon/aframe-fonts/tree/master/fonts) repository. System fonts are **not** supported.\n\n**Default value:** `"Lato"`',type:"string"},attributeLabelFontSize:{description:"The font size in pixels.\n\n**Default value:** `11`",type:"number"},attributeLabelFontStyle:{$ref:"#/definitions/FontStyle",description:'The font style. Valid values: `"normal"` and `"italic"`.\n\n**Default value:** `"normal"`'},attributeLabelFontWeight:{$ref:"#/definitions/FontWeight",description:'The font weight. The following strings and numbers are valid values: `"thin"` (`100`), `"light"` (`300`), `"regular"` (`400`), `"normal"` (`400`), `"medium"` (`500`), `"bold"` (`700`), `"black"` (`900`)\n\n**Default value:** `"regular"`'},attributeSize:{description:"Default size (width) of the metadata attribute columns. Can be configured per attribute using the `attributes` property.\n\n**Default value:** `10`",type:"number"},attributeSpacing:{description:"Spacing between attribute columns in pixels.\n\n**Default value:** `1`",type:"number"},attributes:{additionalProperties:{$ref:"#/definitions/SampleAttributeDef"},description:"Explicitly specify the sample attributes.",type:"object"},data:{$ref:"#/definitions/Data",description:"Optional metadata about the samples."},labelAlign:{$ref:"#/definitions/Align",description:'The horizontal alignment of the text. One of `"left"`, `"center"`, or `"right"`.\n\n**Default value:** `"left"`'},labelFont:{description:'The font typeface. GenomeSpy uses [SDF](https://github.com/Chlumsky/msdfgen) versions of [Google Fonts](https://fonts.google.com/). Check their availability at the [A-Frame Fonts](https://github.com/etiennepinchon/aframe-fonts/tree/master/fonts) repository. System fonts are **not** supported.\n\n**Default value:** `"Lato"`',type:"string"},labelFontSize:{description:"The font size in pixels.\n\n**Default value:** `11`",type:"number"},labelFontStyle:{$ref:"#/definitions/FontStyle",description:'The font style. Valid values: `"normal"` and `"italic"`.\n\n**Default value:** `"normal"`'},labelFontWeight:{$ref:"#/definitions/FontWeight",description:'The font weight. The following strings and numbers are valid values: `"thin"` (`100`), `"light"` (`300`), `"regular"` (`400`), `"normal"` (`400`), `"medium"` (`500`), `"bold"` (`700`), `"black"` (`900`)\n\n**Default value:** `"regular"`'},labelLength:{description:"How much space in pixels to reserve for the labels.\n\n**Default:** `140`",type:"number"},labelTitleText:{description:'Text in the label title\n\n**Default:** `"Sample name"`',type:"string"}},type:"object"},SampleParams:{additionalProperties:!1,properties:{size:{description:"The maximum sample size.\n\n**Default:** `500`",type:"number"},type:{const:"sample",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},SampleSpec:{additionalProperties:!1,description:"A view specification for a SampleView. This is only functional in the GenomeSpy app.",properties:{baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},samples:{$ref:"#/definitions/SampleDef",description:"Sample metadata definition. If the object is empty, the sample identifiers will be inferred from the data."},spec:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpec"}],description:"The view specification to be repeated for each sample."},stickySummaries:{type:"boolean"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["samples","spec"],type:"object"},Scalar:{type:["string","number","boolean"]},ScalarDomain:{anyOf:[{$ref:"#/definitions/NumericDomain"},{items:{type:"string"},type:"array"},{items:{type:"boolean"},type:"array"}]},Scale:{additionalProperties:!1,properties:{align:{description:"The alignment of the steps within the scale range.\n\nThis value must lie in the range `[0,1]`. A value of `0.5` indicates that the steps should be centered within the range. A value of `0` or `1` may be used to shift the bands to one side, say to position them adjacent to an axis.\n\n__Default value:__ `0.5`",type:"number"},base:{description:"The logarithm base of the `log` scale (default `10`).",type:"number"},bins:{description:"An array of bin boundaries over the scale domain. If provided, axes and legends will use the bin boundaries to inform the choice of tick marks and text labels.",items:{type:"number"},type:"array"},clamp:{description:"If `true`, values that exceed the data domain are clamped to either the minimum or maximum range value\n\n__Default value:__ derived from the [scale config](https://vega.github.io/vega-lite/docs/config.html#scale-config)'s `clamp` (`true` by default).",type:"boolean"},constant:{description:"A constant determining the slope of the symlog function around zero. Only used for `symlog` scales.\n\n__Default value:__ `1`",type:"number"},domain:{anyOf:[{$ref:"#/definitions/ScalarDomain"},{$ref:"#/definitions/ComplexDomain"}],description:"Customized domain values.\n\nFor _quantitative_ fields, `domain` can take the form of a two-element array with minimum and maximum values.  [Piecewise scales](https://vega.github.io/vega-lite/docs/scale.html#piecewise) can be created by providing a `domain` with more than two entries.\n\nFor _temporal_ fields, `domain` can be a two-element array minimum and maximum values, in the form of either timestamps or the [DateTime definition objects](https://vega.github.io/vega-lite/docs/types.html#datetime).\n\nFor _ordinal_ and _nominal_ fields, `domain` can be an array that lists valid input values."},domainMax:{description:"Sets the maximum value in the scale domain, overriding the `domain` property. This property is only intended for use with scales having continuous domains.",type:"number"},domainMid:{description:"Inserts a single mid-point value into a two-element domain. The mid-point value must lie between the domain minimum and maximum values. This property can be useful for setting a midpoint for [diverging color scales](https://vega.github.io/vega-lite/docs/scale.html#piecewise). The domainMid property is only intended for use with scales supporting continuous, piecewise domains.",type:"number"},domainMin:{description:"Sets the minimum value in the scale domain, overriding the domain property. This property is only intended for use with scales having continuous domains.",type:"number"},exponent:{description:"The exponent of the `pow` scale.",type:"number"},interpolate:{anyOf:[{$ref:"#/definitions/ScaleInterpolate"},{$ref:"#/definitions/ScaleInterpolateParams"}],description:"The interpolation method for range values. By default, a general interpolator for numbers, dates, strings and colors (in HCL space) is used. For color ranges, this property allows interpolation in alternative color spaces. Legal values include `rgb`, `hsl`, `hsl-long`, `lab`, `hcl`, `hcl-long`, `cubehelix` and `cubehelix-long` ('-long' variants use longer paths in polar coordinate spaces). If object-valued, this property accepts an object with a string-valued _type_ property and an optional numeric _gamma_ property applicable to rgb and cubehelix interpolators. For more, see the [d3-interpolate documentation](https://github.com/d3/d3-interpolate).\n\n__Default value:__ `hcl`"},name:{description:"The name of the scale. Names are optional but allow the scales to be referenced and found with the API.",type:"string"},nice:{anyOf:[{type:"boolean"},{type:"number"},{additionalProperties:!1,properties:{interval:{type:"string"},step:{type:"number"}},required:["interval","step"],type:"object"}],description:"Extending the domain so that it starts and ends on nice round values. This method typically modifies the scale’s domain, and may only extend the bounds to the nearest round value. Nicing is useful if the domain is computed from data and may be irregular. For example, for a domain of _[0.201479…, 0.996679…]_, a nice domain might be _[0.2, 1.0]_.\n\nFor quantitative scales such as linear, `nice` can be either a boolean flag or a number. If `nice` is a number, it will represent a desired tick count. This allows greater control over the step size used to extend the bounds, guaranteeing that the returned ticks will exactly cover the domain.\n\n__Default value:__ `true` for unbinned _quantitative_ fields; `false` otherwise."},padding:{description:"For _[continuous](https://vega.github.io/vega-lite/docs/scale.html#continuous)_ scales, expands the scale domain to accommodate the specified number of pixels on each of the scale range. The scale range must represent pixels for this parameter to function as intended. Padding adjustment is performed prior to all other adjustments, including the effects of the `zero`, `nice`, `domainMin`, and `domainMax` properties.\n\nFor _[band](https://vega.github.io/vega-lite/docs/scale.html#band)_ scales, shortcut for setting `paddingInner` and `paddingOuter` to the same value.\n\nFor _[point](https://vega.github.io/vega-lite/docs/scale.html#point)_ scales, alias for `paddingOuter`.\n\n__Default value:__ For _continuous_ scales, derived from the [scale config](https://vega.github.io/vega-lite/docs/scale.html#config)'s `continuousPadding`. For _band and point_ scales, see `paddingInner` and `paddingOuter`.  By default, Vega-Lite sets padding such that _width/height = number of unique values * step_.",minimum:0,type:"number"},paddingInner:{description:`The inner padding (spacing) within each band step of band scales, as a fraction of the step size. This value must lie in the range [0,1].

For point scale, this property is invalid as point scales do not have internal band widths (only step sizes between bands).

__Default value:__ derived from the [scale config](https://vega.github.io/vega-lite/docs/scale.html#config)'s \`bandPaddingInner\`.`,maximum:1,minimum:0,type:"number"},paddingOuter:{description:"The outer padding (spacing) at the ends of the range of band and point scales, as a fraction of the step size. This value must lie in the range [0,1].\n\n__Default value:__ derived from the [scale config](https://vega.github.io/vega-lite/docs/scale.html#config)'s `bandPaddingOuter` for band scales and `pointPadding` for point scales. By default, Vega-Lite sets outer padding such that _width/height = number of unique values * step_.",maximum:1,minimum:0,type:"number"},range:{anyOf:[{items:{type:"number"},type:"array"},{items:{type:"string"},type:"array"},{type:"string"}],description:'The range of the scale. One of:\n\n- A string indicating a [pre-defined named scale range](https://vega.github.io/vega-lite/docs/scale.html#range-config) (e.g., example, `"symbol"`, or `"diverging"`).\n\n- For [continuous scales](https://vega.github.io/vega-lite/docs/scale.html#continuous), two-element array indicating  minimum and maximum values, or an array with more than two entries for specifying a [piecewise scale](https://vega.github.io/vega-lite/docs/scale.html#piecewise).\n\n- For [discrete](https://vega.github.io/vega-lite/docs/scale.html#discrete) and [discretizing](https://vega.github.io/vega-lite/docs/scale.html#discretizing) scales, an array of desired output values.\n\n__Notes:__\n\n1) For color scales you can also specify a color [`scheme`](https://vega.github.io/vega-lite/docs/scale.html#scheme) instead of `range`.\n\n2) Any directly specified `range` for `x` and `y` channels will be ignored. Range can be customized via the view\'s corresponding [size](https://vega.github.io/vega-lite/docs/size.html) (`width` and `height`).'},reverse:{description:"If true, reverses the order of the scale range.\n\n__Default value:__ `false`.",type:"boolean"},round:{description:"If `true`, rounds numeric output values to integers. This can be helpful for snapping to the pixel grid.\n\n__Default value:__ `false`.",type:"boolean"},scheme:{anyOf:[{type:"string"},{$ref:"#/definitions/SchemeParams"}],description:'A string indicating a color [scheme](https://vega.github.io/vega-lite/docs/scale.html#scheme) name (e.g., `"category10"` or `"blues"`) or a [scheme parameter object](https://vega.github.io/vega-lite/docs/scale.html#scheme-params).\n\nDiscrete color schemes may be used with [discrete](https://vega.github.io/vega-lite/docs/scale.html#discrete) or [discretizing](https://vega.github.io/vega-lite/docs/scale.html#discretizing) scales. Continuous color schemes are intended for use with color scales.\n\nFor the full list of supported schemes, please refer to the [Vega Scheme](https://vega.github.io/vega/docs/schemes/#reference) reference.'},type:{$ref:"#/definitions/ScaleType",description:'The type of scale.  Vega-Lite supports the following categories of scale types:\n\n1) [**Continuous Scales**](https://vega.github.io/vega-lite/docs/scale.html#continuous) -- mapping continuous domains to continuous output ranges ([`"linear"`](https://vega.github.io/vega-lite/docs/scale.html#linear), [`"pow"`](https://vega.github.io/vega-lite/docs/scale.html#pow), [`"sqrt"`](https://vega.github.io/vega-lite/docs/scale.html#sqrt), [`"symlog"`](https://vega.github.io/vega-lite/docs/scale.html#symlog), [`"log"`](https://vega.github.io/vega-lite/docs/scale.html#log), [`"time"`](https://vega.github.io/vega-lite/docs/scale.html#time), [`"utc"`](https://vega.github.io/vega-lite/docs/scale.html#utc).\n\n2) [**Discrete Scales**](https://vega.github.io/vega-lite/docs/scale.html#discrete) -- mapping discrete domains to discrete ([`"ordinal"`](https://vega.github.io/vega-lite/docs/scale.html#ordinal)) or continuous ([`"band"`](https://vega.github.io/vega-lite/docs/scale.html#band) and [`"point"`](https://vega.github.io/vega-lite/docs/scale.html#point)) output ranges.\n\n3) [**Discretizing Scales**](https://vega.github.io/vega-lite/docs/scale.html#discretizing) -- mapping continuous domains to discrete output ranges [`"bin-ordinal"`](https://vega.github.io/vega-lite/docs/scale.html#bin-ordinal), [`"quantile"`](https://vega.github.io/vega-lite/docs/scale.html#quantile), [`"quantize"`](https://vega.github.io/vega-lite/docs/scale.html#quantize) and [`"threshold"`](https://vega.github.io/vega-lite/docs/scale.html#threshold).\n\n__Default value:__ please see the [scale type table](https://vega.github.io/vega-lite/docs/scale.html#type).'},zero:{description:"If `true`, ensures that a zero baseline value is included in the scale domain.\n\n__Default value:__ `true` for x and y channels if the quantitative field is not binned and no custom `domain` is provided; `false` otherwise.\n\n__Note:__ Log, time, and utc scales do not support `zero`.",type:"boolean"},zoom:{anyOf:[{type:"boolean"},{$ref:"#/definitions/ZoomParams"}],description:"If `true` and the scale is used on a positional channel, it can bee zoomed and translated interactively."}},type:"object"},ScaleInterpolate:{enum:["rgb","lab","hcl","hsl","hsl-long","hcl-long","cubehelix","cubehelix-long"],type:"string"},ScaleInterpolateParams:{additionalProperties:!1,properties:{gamma:{type:"number"},type:{enum:["rgb","cubehelix","cubehelix-long"],type:"string"}},required:["type"],type:"object"},ScaleType:{enum:["null","linear","log","pow","sqrt","symlog","identity","sequential","quantize","threshold","ordinal","point","band","index","locus"],type:"string"},SchemeParams:{additionalProperties:!1,properties:{count:{description:'The number of colors to use in the scheme. This can be useful for scale types such as `"quantize"`, which use the length of the scale range to determine the number of discrete bins for the scale domain.',type:"number"},extent:{description:"The extent of the color range to use. For example `[0.2, 1]` will rescale the color scheme such that color values in the range _[0, 0.2)_ are excluded from the scheme.",items:{type:"number"},type:"array"},name:{description:'A color scheme name for ordinal scales (e.g., `"category10"` or `"blues"`).\n\nFor the full list of supported schemes, please refer to the [Vega Scheme](https://vega.github.io/vega/docs/schemes/#reference) reference.',type:"string"}},required:["name"],type:"object"},SecondaryChromPosDef:{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/Axis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},chrom:{$ref:"#/definitions/FieldName",description:"The field having the chromosome or contig."},offset:{description:"An offset or offsets that allow for adjusting the numbering base. The offset is subtracted from the positions.\n\nGenomeSpy uses internally zero-based indexing with half-open intervals. UCSC-based formats (BED, etc.) generally use this scheme. However, for example, VCF files use one-based indexing and must be adjusted by setting the offset to `1`.\n\n**Default:** `0`",type:"number"},pos:{$ref:"#/definitions/FieldName",description:"The field having an intra-chromosomal position."},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},required:["chrom"],type:"object"},SecondaryPositionalChannel:{enum:["x2","y2"],type:"string"},SequenceGenerator:{additionalProperties:!1,properties:{name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"},sequence:{$ref:"#/definitions/SequenceParams",description:"Generate a sequence of numbers."}},required:["sequence"],type:"object"},SequenceParams:{additionalProperties:!1,properties:{as:{$ref:"#/definitions/FieldName",description:'The name of the generated sequence field.\n\n__Default value:__ `"data"`'},start:{description:"The starting value of the sequence (inclusive).",type:"number"},step:{description:"The step value between sequence entries.\n\n__Default value:__ `1`",type:"number"},stop:{description:"The ending value of the sequence (exclusive).",type:"number"}},required:["start","stop"],type:"object"},"ShapeDef<string>":{$ref:"#/definitions/MarkPropDef%3Cstring%2C(string%7Cnull)%2CTypeForShape%3E"},SizeDef:{additionalProperties:!1,properties:{grow:{description:"Share of the remaining space",type:"number"},px:{description:"Size in pixels",type:"number"}},type:"object"},SortOrder:{enum:["ascending","descending"],type:"string"},StackParams:{additionalProperties:!1,properties:{as:{description:'Fields to write the stacked values.\n\n**Default:** `["y0", "y1"]`',items:{type:"string"},type:"array"},baseField:{$ref:"#/definitions/Field",description:'The field that contains the base or amino acid. Used for information content calculation when the offset is `"information"`. The data objects that have `null` in the baseField are considered gaps and they are taken into account when scaling the the locus\' information content.'},cardinality:{description:'Cardinality, e.g., the number if distinct bases or amino acids. Used for information content calculation when the offset is `"information"`.\n\n**Default:** `4`',type:"number"},field:{$ref:"#/definitions/Field",description:"The field to stack. If no field is defined, a constant value of one is assumed."},groupby:{description:"The fields to be used for forming groups for different stacks.",items:{$ref:"#/definitions/Field"},type:"array"},offset:{description:'How to offset the values in a stack. `"zero"` (default) starts stacking at 0. `"center"` centers the values around zero. `"normalize"` computes intra-stack percentages and normalizes the values to the range of `[0, 1]`. `"information"` computes a layout for a sequence logo. The total height of the stack reflects the group\'s information content.',enum:["zero","center","normalize","information"],type:"string"},sort:{$ref:"#/definitions/CompareParams",description:"The sort order of data in each stack."},type:{const:"stack",description:"The type of the transform to be applied",type:"string"}},required:["as","groupby","type"],type:"object"},Step:{additionalProperties:!1,properties:{step:{type:"number"}},required:["step"],type:"object"},StringDatumDef:{additionalProperties:!1,properties:{datum:{$ref:"#/definitions/Scalar",description:"A constant value in data domain."},format:{description:`When used with the default \`"number"\` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.

- If the format type is \`"number"\` (e.g., for quantitative fields), this is D3's [number format pattern](https://github.com/d3/d3-format#locale_format).

See the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.`,type:"string"},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},type:"object"},"StringFieldDef<string>":{additionalProperties:!1,properties:{field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},format:{description:`When used with the default \`"number"\` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.

- If the format type is \`"number"\` (e.g., for quantitative fields), this is D3's [number format pattern](https://github.com/d3/d3-format#locale_format).

See the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.`,type:"string"},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},type:"object"},"TextDef<string>":{anyOf:[{$ref:"#/definitions/StringFieldDef%3Cstring%3E"},{$ref:"#/definitions/StringDatumDef"},{$ref:"#/definitions/ExprDef"}]},Title:{additionalProperties:!1,properties:{align:{$ref:"#/definitions/Align",description:'Horizontal text alignment for title text. One of `"left"`, `"center"`, or `"right"`.'},anchor:{$ref:"#/definitions/TitleAnchor",description:'The anchor position for placing the title and subtitle text. One of `"start"`, `"middle"`, or `"end"`. For example, with an orientation of top these anchor positions map to a left-, center-, or right-aligned title.'},angle:{description:"Angle in degrees of title and subtitle text.",type:"number"},baseline:{$ref:"#/definitions/Baseline",description:'Vertical text baseline for title and subtitle text. One of `"alphabetic"` (default), `"top"`, `"middle"`, or `"bottom"`.'},color:{description:"Text color for title text.",type:"string"},dx:{description:"Delta offset for title and subtitle text x-coordinate.",type:"number"},dy:{description:"Delta offset for title and subtitle text y-coordinate.",type:"number"},font:{description:"Font name for title text.",type:"string"},fontSize:{description:"Font size in pixels for title text.",minimum:0,type:"number"},fontStyle:{$ref:"#/definitions/FontStyle",description:"Font style for title text."},fontWeight:{$ref:"#/definitions/FontWeight",description:'Font weight for title text. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},frame:{$ref:"#/definitions/TitleFrame",description:'The reference frame for the anchor position, one of `"bounds"` (to anchor relative to the full bounding box) or `"group"` (to anchor relative to the group width or height).'},offset:{description:"The orthogonal offset in pixels by which to displace the title group from its position along the edge of the chart.",type:"number"},orient:{$ref:"#/definitions/TitleOrient",description:'Default title orientation (`"top"`, `"bottom"`, `"left"`, or `"right"`)'},style:{description:'A mark style property to apply to the title text mark. If not specified, a default style of `"group-title"` is applied.',type:"string"},text:{description:"The title text.",type:"string"}},required:["text"],type:"object"},TitleAnchor:{enum:[null,"start","middle","end"],type:["null","string"]},TitleFrame:{enum:["bounds","group"],type:"string"},TitleOrient:{enum:["none","left","right","top","bottom"],type:"string"},Tooltip:{anyOf:[{$ref:"#/definitions/HandledTooltip"},{type:"null"}]},TransformParams:{anyOf:[{$ref:"#/definitions/AggregateParams"},{$ref:"#/definitions/CollectParams"},{$ref:"#/definitions/CoverageParams"},{$ref:"#/definitions/FlattenDelimitedParams"},{$ref:"#/definitions/FormulaParams"},{$ref:"#/definitions/FilterParams"},{$ref:"#/definitions/FilterScoredLabelsParams"},{$ref:"#/definitions/FlattenCompressedExonsParams"},{$ref:"#/definitions/FlattenSequenceParams"},{$ref:"#/definitions/IdentifierParams"},{$ref:"#/definitions/LinearizeGenomicCoordinateParams"},{$ref:"#/definitions/MeasureTextParams"},{$ref:"#/definitions/MergeFacetsParams"},{$ref:"#/definitions/PileupParams"},{$ref:"#/definitions/ProjectParams"},{$ref:"#/definitions/RegexExtractParams"},{$ref:"#/definitions/RegexFoldParams"},{$ref:"#/definitions/SampleParams"},{$ref:"#/definitions/StackParams"}]},Type:{enum:["quantitative","ordinal","nominal","index","locus"],type:"string"},TypeForShape:{enum:["ordinal","nominal"],type:"string"},UnitSpec:{additionalProperties:!1,properties:{aggregateSamples:{items:{anyOf:[{$ref:"#/definitions/UnitSpec"},{$ref:"#/definitions/LayerSpec"}]},type:"array"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},mark:{anyOf:[{$ref:"#/definitions/MarkType"},{$ref:"#/definitions/MarkConfigAndType"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},view:{$ref:"#/definitions/ViewBackground"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["mark"],type:"object"},UrlData:{additionalProperties:!1,properties:{format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for parsing the data."},name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"},url:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"An URL or an array of URLs from which to load the data set. Use the `format.type` property to ensure the loaded data is correctly parsed."}},required:["url"],type:"object"},VConcatSpec:{additionalProperties:!1,properties:{baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},vconcat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["vconcat"],type:"object"},"ValueDef<(string|null)>":{additionalProperties:!1,properties:{value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"`, values between `0` to `1` for opacity).',type:["string","null"]}},required:["value"],type:"object"},"ValueDef<number>":{additionalProperties:!1,properties:{value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"`, values between `0` to `1` for opacity).',type:"number"}},required:["value"],type:"object"},ViewBackground:{additionalProperties:!1,properties:{cornerRadius:{description:"Radius of the rounded corners.\n\n**Default value:** `0`",type:"number"},cornerRadiusBottomLeft:{description:"Radius of the bottom left rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},cornerRadiusBottomRight:{description:"Radius of the bottom right rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},cornerRadiusTopLeft:{description:"Radius of the top left rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},cornerRadiusTopRight:{description:"Radius of the top right rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},fill:{type:"string"},fillOpacity:{type:"number"},minHeight:{description:"The minimum height of a rectangle in pixels. The property clamps rectangles' heights.\n\n**Default value:** `0`",type:"number"},minOpacity:{description:"Clamps the minimum size-dependent opacity. The property does not affect the `opacity` channel. Valid values are between `0` and `1`.\n\nWhen a rectangle would be smaller than what is specified in `minHeight` and `minWidth`, it is faded out proportionally. Example: a rectangle would be rendered as one pixel wide, but `minWidth` clamps it to five pixels. The rectangle is actually rendered as five pixels wide, but its opacity is multiplied by 0.2. With this setting, you can limit the factor to, for example, 0.5 to keep the rectangles more clearly visible.\n\n**Default value:** `0`",type:"number"},minWidth:{description:`The minimum width of a rectangle in pixels. The property clamps rectangles' widths when the viewport is zoomed out.

This property also reduces flickering of very narrow rectangles when zooming. The value should generally be at least one.

**Default value:** \`1\``,type:"number"},stroke:{type:"string"},strokeOpacity:{type:"number"},strokeWidth:{type:"number"},x2:{type:"number"},y2:{type:"number"}},type:"object"},ViewOpacityDef:{anyOf:[{type:"number"},{$ref:"#/definitions/DynamicOpacity"}]},ViewSpec:{anyOf:[{$ref:"#/definitions/UnitSpec"},{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/SampleSpec"},{$ref:"#/definitions/VConcatSpec"},{$ref:"#/definitions/HConcatSpec"},{$ref:"#/definitions/ConcatSpec"}]},ZoomParams:{additionalProperties:!1,properties:{extent:{anyOf:[{$ref:"#/definitions/ScalarDomain"},{$ref:"#/definitions/ComplexDomain"}],description:"The boundaries that limit the zoom and pan interactions."}},type:"object"}},JW={$ref:b5e,$schema:v5e,definitions:w5e},y5e="@genome-spy/playground",C5e="0.32.1",S5e="A playground for testing GenomeSpy visualizations",x5e={dev:"vite",build:"vite build",serve:"vite preview"},D5e="Kari Lavikka",L5e="MIT",k5e={"@fortawesome/fontawesome-free":"^6.1.1","@fortawesome/fontawesome-svg-core":"^6.1.1","@fortawesome/free-solid-svg-icons":"^6.1.1","@genome-spy/core":"^0.32.1",lit:"^2.0.2","lit-html":"^2.4.0","monaco-editor":"^0.30.1","vega-loader":"^4.4.0"},ez={name:y5e,private:!0,version:C5e,description:S5e,scripts:x5e,author:D5e,license:L5e,dependencies:k5e},A5e="modulepreload",E5e=function(i,e){return new URL(i,e).href},tz={},I5e=function(e,t,n){if(!t||t.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(r=>{if(r=E5e(r,n),r in tz)return;tz[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let h=s.length-1;h>=0;h--){const u=s[h];if(u.href===r&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":A5e,o||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),o)return new Promise((h,u)=>{c.addEventListener("load",h),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())};var T5e=function(){function i(e,t,n){this._onDidChange=new m5e,this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(n)}return Object.defineProperty(i.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"modeConfiguration",{get:function(){return this._modeConfiguration},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"diagnosticsOptions",{get:function(){return this._diagnosticsOptions},enumerable:!1,configurable:!0}),i.prototype.setDiagnosticsOptions=function(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)},i.prototype.setModeConfiguration=function(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)},i}(),N5e={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},M5e={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},IJ=new T5e("json",N5e,M5e);Bk.json={jsonDefaults:IJ};function R5e(){return I5e(()=>import("./jsonMode-750e80e6.js"),[],import.meta.url)}Bk.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});Bk.onLanguage("json",function(){R5e().then(function(i){return i.setupMode(IJ)})});const iz=65535,xc=16777215,nz=4278190080;class p1{constructor(e,t,n){if(e.length!==t.length||e.length>iz)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Uint32Array(Math.ceil(e.length/32)),this._types=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],t=(n,s)=>{let r=e[e.length-1];return this.getStartLineNumber(r)<=n&&this.getEndLineNumber(r)>=s};for(let n=0,s=this._startIndexes.length;n<s;n++){let r=this._startIndexes[n],o=this._endIndexes[n];if(r>xc||o>xc)throw new Error("startLineNumber or endLineNumber must not exceed "+xc);for(;e.length>0&&!t(r,o);)e.pop();let a=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=r+((a&255)<<24),this._endIndexes[n]=o+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&xc}getEndLineNumber(e){return this._endIndexes[e]&xc}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){let t=e/32|0,n=e%32;return(this._collapseStates[t]&1<<n)!==0}setCollapsed(e,t){let n=e/32|0,s=e%32,r=this._collapseStates[n];t?this._collapseStates[n]=r|1<<s:this._collapseStates[n]=r&~(1<<s)}setCollapsedAllOfType(e,t){let n=!1;if(this._types)for(let s=0;s<this._types.length;s++)this._types[s]===e&&(this.setCollapsed(s,t),n=!0);return n}toRegion(e){return new O5e(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((this._startIndexes[e]&nz)>>>24)+((this._endIndexes[e]&nz)>>>16);return t===iz?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,n=this._startIndexes.length;if(n===0)return-1;for(;t<n;){let s=Math.floor((t+n)/2);e<this.getStartLineNumber(s)?n=s:t=s+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}}class O5e{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class P5e{constructor(e,t){this._updateEventEmitter=new z,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new p1(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}get regions(){return this._regions}get textModel(){return this._textModel}get isInitialized(){return this._isInitialized}toggleCollapseState(e){if(!e.length)return;e=e.sort((n,s)=>n.regionIndex-s.regionIndex);const t={};this._decorationProvider.changeDecorations(n=>{let s=0,r=-1,o=-1;const a=l=>{for(;s<l;){const c=this._regions.getEndLineNumber(s),h=this._regions.isCollapsed(s);c<=r&&n.changeDecorationOptions(this._editorDecorationIds[s],this._decorationProvider.getDecorationOption(h,c<=o)),h&&c>o&&(o=c),s++}};for(let l of e){let c=l.regionIndex,h=this._editorDecorationIds[c];if(h&&!t[h]){t[h]=!0,a(c);let u=!this._regions.isCollapsed(c);this._regions.setCollapsed(c,u),r=Math.max(r,this._regions.getEndLineNumber(c))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}update(e,t=[]){let n=[],s=(u,d)=>{for(let f of t)if(u<f&&f<=d)return!0;return!1},r=-1,o=(u,d)=>{const f=e.getStartLineNumber(u),g=e.getEndLineNumber(u);d||(d=e.isCollapsed(u)),d&&s(f,g)&&(d=!1),e.setCollapsed(u,d);const p=this._textModel.getLineMaxColumn(f),m={startLineNumber:f,startColumn:Math.max(p-1,1),endLineNumber:f,endColumn:p};n.push({range:m,options:this._decorationProvider.getDecorationOption(d,g<=r)}),d&&g>r&&(r=g)},a=0,l=()=>{for(;a<this._regions.length;){let u=this._regions.isCollapsed(a);if(a++,u)return a-1}return-1},c=0,h=l();for(;h!==-1&&c<e.length;){let u=this._textModel.getDecorationRange(this._editorDecorationIds[h]);if(u){let d=u.startLineNumber;if(u.startColumn===Math.max(u.endColumn-1,1)&&this._textModel.getLineMaxColumn(d)===u.endColumn)for(;c<e.length;){let f=e.getStartLineNumber(c);if(d>=f)o(c,d===f),c++;else break}}h=l()}for(;c<e.length;)o(c,!1),c++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,n),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}getMemento(){let e=[];for(let t=0;t<this._regions.length;t++)if(this._regions.isCollapsed(t)){let n=this._textModel.getDecorationRange(this._editorDecorationIds[t]);if(n){let s=n.startLineNumber,r=n.endLineNumber+this._regions.getEndLineNumber(t)-this._regions.getStartLineNumber(t);e.push({startLineNumber:s,endLineNumber:r})}}if(e.length>0)return e}applyMemento(e){if(!Array.isArray(e))return;let t=[];for(let n of e){let s=this.getRegionAtLine(n.startLineNumber);s&&!s.isCollapsed&&t.push(s)}this.toggleCollapseState(t)}dispose(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}getAllRegionsAtLine(e,t){let n=[];if(this._regions){let s=this._regions.findRange(e),r=1;for(;s>=0;){let o=this._regions.toRegion(s);(!t||t(o,r))&&n.push(o),r++,s=o.parentIndex}}return n}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let n=[],s=e?e.regionIndex+1:0,r=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const o=[];for(let a=s,l=this._regions.length;a<l;a++){let c=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<r){for(;o.length>0&&!c.containedBy(o[o.length-1]);)o.pop();o.push(c),t(c,o.length)&&n.push(c)}else break}}else for(let o=s,a=this._regions.length;o<a;o++){let l=this._regions.toRegion(o);if(this._regions.getStartLineNumber(o)<r)(!t||t(l))&&n.push(l);else break}return n}}function F5e(i,e,t){let n=[];for(let s of t){let r=i.getRegionAtLine(s);if(r){const o=!r.isCollapsed;if(n.push(r),e>1){let a=i.getRegionsInside(r,(l,c)=>l.isCollapsed!==o&&c<e);n.push(...a)}}}i.toggleCollapseState(n)}function P0(i,e,t=Number.MAX_VALUE,n){let s=[];if(n&&n.length>0)for(let r of n){let o=i.getRegionAtLine(r);if(o&&(o.isCollapsed!==e&&s.push(o),t>1)){let a=i.getRegionsInside(o,(l,c)=>l.isCollapsed!==e&&c<t);s.push(...a)}}else{let r=i.getRegionsInside(null,(o,a)=>o.isCollapsed!==e&&a<t);s.push(...r)}i.toggleCollapseState(s)}function TJ(i,e,t,n){let s=[];for(let r of n){let o=i.getAllRegionsAtLine(r,(a,l)=>a.isCollapsed!==e&&l<=t);s.push(...o)}i.toggleCollapseState(s)}function B5e(i,e,t){let n=[];for(let s of t){let r=i.getAllRegionsAtLine(s,o=>o.isCollapsed!==e);r.length>0&&n.push(r[0])}i.toggleCollapseState(n)}function V5e(i,e,t,n){let s=(o,a)=>a===e&&o.isCollapsed!==t&&!n.some(l=>o.containsLine(l)),r=i.getRegionsInside(null,s);i.toggleCollapseState(r)}function NJ(i,e,t){let n=[];for(let o of t)n.push(i.getAllRegionsAtLine(o,void 0)[0]);let s=o=>n.every(a=>!a.containedBy(o)&&!o.containedBy(a))&&o.isCollapsed!==e,r=i.getRegionsInside(null,s);i.toggleCollapseState(r)}function zP(i,e,t){let n=i.textModel,s=i.regions,r=[];for(let o=s.length-1;o>=0;o--)if(t!==s.isCollapsed(o)){let a=s.getStartLineNumber(o);e.test(n.getLineContent(a))&&r.push(s.toRegion(o))}i.toggleCollapseState(r)}function HP(i,e,t){let n=i.regions,s=[];for(let r=n.length-1;r>=0;r--)t!==n.isCollapsed(r)&&e===n.getType(r)&&s.push(n.toRegion(r));i.toggleCollapseState(s)}function W5e(i,e){let t=null,n=e.getRegionAtLine(i);if(n!==null&&(t=n.startLineNumber,i===t)){let s=n.parentIndex;s!==-1?t=e.regions.getStartLineNumber(s):t=null}return t}function z5e(i,e){let t=e.getRegionAtLine(i);if(t!==null&&t.startLineNumber===i){if(i!==t.startLineNumber)return t.startLineNumber;{let n=t.parentIndex,s=0;for(n!==-1&&(s=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=s)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<i)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function H5e(i,e){let t=e.getRegionAtLine(i);if(t!==null&&t.startLineNumber===i){let n=t.parentIndex,s=0;if(n!==-1)s=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;s=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=s)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>i)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}class U5e{constructor(e){this._updateEventEmitter=new z,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}updateHiddenRanges(){let e=!1,t=[],n=0,s=0,r=Number.MAX_VALUE,o=-1,a=this._foldingModel.regions;for(;n<a.length;n++){if(!a.isCollapsed(n))continue;let l=a.getStartLineNumber(n)+1,c=a.getEndLineNumber(n);r<=l&&c<=o||(!e&&s<this._hiddenRanges.length&&this._hiddenRanges[s].startLineNumber===l&&this._hiddenRanges[s].endLineNumber===c?(t.push(this._hiddenRanges[s]),s++):(e=!0,t.push(new F(l,1,c,1))),r=l,o=c)}(e||s<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyMemento(e){if(!Array.isArray(e)||e.length===0)return!1;let t=[];for(let n of e){if(!n.startLineNumber||!n.endLineNumber)return!1;t.push(new F(n.startLineNumber+1,1,n.endLineNumber,1))}return this.applyHiddenRanges(t),!0}getMemento(){return this._hiddenRanges.map(e=>({startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber}))}applyHiddenRanges(e){this._hiddenRanges=e,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return sz(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1,n=this._foldingModel.textModel,s=null,r=o=>((!s||!$5e(o,s))&&(s=sz(this._hiddenRanges,o)),s?s.startLineNumber-1:null);for(let o=0,a=e.length;o<a;o++){let l=e[o],c=r(l.startLineNumber);c&&(l=l.setStartPosition(c,n.getLineMaxColumn(c)),t=!0);let h=r(l.endLineNumber);h&&(l=l.setEndPosition(h,n.getLineMaxColumn(h)),t=!0),e[o]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function $5e(i,e){return i>=e.startLineNumber&&i<=e.endLineNumber}function sz(i,e){let t=RY(i,n=>e<n.startLineNumber)-1;return t>=0&&i[t].endLineNumber>=e?i[t]:null}const j5e=5e3,q5e="indent";class G5e{constructor(e){this.editorModel=e,this.id=q5e}dispose(){}compute(e){let t=Ii.getFoldingRules(this.editorModel.getLanguageId()),n=t&&!!t.offSide,s=t&&t.markers;return Promise.resolve(Z5e(this.editorModel,n,s))}}let K5e=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,n){if(e>xc||t>xc)return;let s=this._length;this._startIndexes[s]=e,this._endIndexes[s]=t,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(e){if(this._length<=this._foldingRangesLimit){let t=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let s=this._length-1,r=0;s>=0;s--,r++)t[r]=this._startIndexes[s],n[r]=this._endIndexes[s];return new p1(t,n)}else{let t=0,n=this._indentOccurrences.length;for(let a=0;a<this._indentOccurrences.length;a++){let l=this._indentOccurrences[a];if(l){if(l+t>this._foldingRangesLimit){n=a;break}t+=l}}const s=e.getOptions().tabSize;let r=new Uint32Array(this._foldingRangesLimit),o=new Uint32Array(this._foldingRangesLimit);for(let a=this._length-1,l=0;a>=0;a--){let c=this._startIndexes[a],h=e.getLineContent(c),u=Gr.computeIndentLevel(h,s);(u<n||u===n&&t++<this._foldingRangesLimit)&&(r[l]=c,o[l]=this._endIndexes[a],l++)}return new p1(r,o)}}};function Z5e(i,e,t,n=j5e){const s=i.getOptions().tabSize;let r=new K5e(n),o;t&&(o=new RegExp(`(${t.start.source})|(?:${t.end.source})`));let a=[],l=i.getLineCount()+1;a.push({indent:-1,endAbove:l,line:l});for(let c=i.getLineCount();c>0;c--){let h=i.getLineContent(c),u=Gr.computeIndentLevel(h,s),d=a[a.length-1];if(u===-1){e&&(d.endAbove=c);continue}let f;if(o&&(f=h.match(o)))if(f[1]){let g=a.length-1;for(;g>0&&a[g].indent!==-2;)g--;if(g>0){a.length=g+1,d=a[g],r.insertFirst(c,d.line,u),d.line=c,d.indent=u,d.endAbove=c;continue}}else{a.push({indent:-2,endAbove:c,line:c});continue}if(d.indent>u){do a.pop(),d=a[a.length-1];while(d.indent>u);let g=d.endAbove-1;g-c>=1&&r.insertFirst(c,g,u)}d.indent===u?d.endAbove=c:a.push({indent:u,endAbove:c,line:c})}return r.toIndentRanges(i)}const Y5e=5e3,Q5e={},MJ="syntax";class X5e{constructor(e,t,n,s=Y5e){this.editorModel=e,this.providers=t,this.limit=s,this.id=MJ;for(const r of t)typeof r.onDidChange=="function"&&(this.disposables||(this.disposables=new de),this.disposables.add(r.onDidChange(n)))}compute(e){return J5e(this.providers,this.editorModel,e).then(t=>t?RJ(t,this.limit):null)}dispose(){var e;(e=this.disposables)===null||e===void 0||e.dispose()}}function J5e(i,e,t){let n=null,s=i.map((r,o)=>Promise.resolve(r.provideFoldingRanges(e,Q5e,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(n)||(n=[]);let l=e.getLineCount();for(let c of a)c.start>0&&c.end>c.start&&c.end<=l&&n.push({start:c.start,end:c.end,rank:o,kind:c.kind})}},Fo));return Promise.all(s).then(r=>n)}class ePe{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,n,s){if(e>xc||t>xc)return;let r=this._length;this._startIndexes[r]=e,this._endIndexes[r]=t,this._nestingLevels[r]=s,this._types[r]=n,this._length++,s<30&&(this._nestingLevelCounts[s]=(this._nestingLevelCounts[s]||0)+1)}toIndentRanges(){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let n=0;n<this._length;n++)e[n]=this._startIndexes[n],t[n]=this._endIndexes[n];return new p1(e,t,this._types)}else{let e=0,t=this._nestingLevelCounts.length;for(let o=0;o<this._nestingLevelCounts.length;o++){let a=this._nestingLevelCounts[o];if(a){if(a+e>this._foldingRangesLimit){t=o;break}e+=a}}let n=new Uint32Array(this._foldingRangesLimit),s=new Uint32Array(this._foldingRangesLimit),r=[];for(let o=0,a=0;o<this._length;o++){let l=this._nestingLevels[o];(l<t||l===t&&e++<this._foldingRangesLimit)&&(n[a]=this._startIndexes[o],s[a]=this._endIndexes[o],r[a]=this._types[o],a++)}return new p1(n,s,r)}}}function RJ(i,e){let t=i.sort((o,a)=>{let l=o.start-a.start;return l===0&&(l=o.rank-a.rank),l}),n=new ePe(e),s,r=[];for(let o of t)if(!s)s=o,n.add(o.start,o.end,o.kind&&o.kind.value,r.length);else if(o.start>s.start)if(o.end<=s.end)r.push(s),s=o,n.add(o.start,o.end,o.kind&&o.kind.value,r.length);else{if(o.start>s.end){do s=r.pop();while(s&&o.start>s.end);s&&r.push(s),s=o}n.add(o.start,o.end,o.kind&&o.kind.value,r.length)}return n.toIndentRanges()}const OJ="init";class tPe{constructor(e,t,n,s){if(this.editorModel=e,this.id=OJ,t.length){let r=o=>({range:{startLineNumber:o.startLineNumber,startColumn:0,endLineNumber:o.endLineNumber,endColumn:e.getLineLength(o.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1}});this.decorationIds=e.deltaDecorations([],t.map(r)),this.timeout=setTimeout(n,s)}}dispose(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),typeof this.timeout=="number"&&(clearTimeout(this.timeout),this.timeout=void 0)}compute(e){let t=[];if(this.decorationIds)for(let n of this.decorationIds){let s=this.editorModel.getDecorationRange(n);s&&t.push({start:s.startLineNumber,end:s.endLineNumber,rank:1})}return Promise.resolve(RJ(t,Number.MAX_VALUE))}}const UP=es("folding-expanded",be.chevronDown,_("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),$P=es("folding-collapsed",be.chevronRight,_("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin."));class bo{constructor(e){this.editor=e,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}getDecorationOption(e,t){return t?bo.HIDDEN_RANGE_DECORATION:e?this.showFoldingHighlights?bo.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:bo.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?bo.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:bo.EXPANDED_VISUAL_DECORATION}deltaDecorations(e,t){return this.editor.deltaDecorations(e,t)}changeDecorations(e){return this.editor.changeDecorations(e)}}bo.COLLAPSED_VISUAL_DECORATION=lt.register({description:"folding-collapsed-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:oi.asClassName($P)});bo.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=lt.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:oi.asClassName($P)});bo.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=lt.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:oi.asClassName(UP)});bo.EXPANDED_VISUAL_DECORATION=lt.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+oi.asClassName(UP)});bo.HIDDEN_RANGE_DECORATION=lt.register({description:"folding-hidden-range-decoration",stickiness:1});var iPe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},nPe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const gs=new De("foldingEnabled",!1);let Hm=class PJ extends te{constructor(e,t){super(),this.contextKeyService=t,this.localToDispose=this._register(new de),this.editor=e;const n=this.editor.getOptions();this._isEnabled=n.get(37),this._useFoldingProviders=n.get(38)!=="indentation",this._unfoldOnClickAfterEndOfLine=n.get(41),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=n.get(40),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingStateMemento=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new bo(e),this.foldingDecorationProvider.autoHideFoldingControls=n.get(98)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=n.get(39),this.foldingEnabled=gs.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(s=>{if(s.hasChanged(37)&&(this._isEnabled=this.editor.getOptions().get(37),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),s.hasChanged(98)||s.hasChanged(39)){const r=this.editor.getOptions();this.foldingDecorationProvider.autoHideFoldingControls=r.get(98)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=r.get(39),this.onModelContentChanged()}s.hasChanged(38)&&(this._useFoldingProviders=this.editor.getOptions().get(38)!=="indentation",this.onFoldingStrategyChanged()),s.hasChanged(41)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(41)),s.hasChanged(40)&&(this._foldingImportsByDefault=this.editor.getOptions().get(40))})),this.onModelChanged()}static get(e){return e.getContribution(PJ.ID)}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel||!e||e.lineCount!==t.getLineCount()||(this._currentModelHasFoldedImports=!!e.foldedImports,!e.collapsedRegions))return;(e.provider===MJ||e.provider===OJ)&&(this.foldingStateMemento=e);const n=e.collapsedRegions;if(this.hiddenRangeModel.applyMemento(n)){const s=this.getFoldingModel();s&&s.then(r=>{if(r){this._restoringViewState=!0;try{r.applyMemento(n)}finally{this._restoringViewState=!1}}}).then(void 0,Ke)}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new P5e(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new U5e(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new y0(200),this.cursorChangedScheduler=new fi(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(mM.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(()=>this.onModelContentChanged())),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.foldingStateMemento=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.onModelContentChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.onModelContentChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new G5e(e),this._useFoldingProviders&&this.foldingModel){let t=mM.ordered(this.foldingModel.textModel);if(t.length===0&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions)return this.rangeProvider=new tPe(e,this.foldingStateMemento.collapsedRegions,()=>{this.foldingStateMemento=null,this.onFoldingStrategyChanged()},3e4);t.length>0&&(this.rangeProvider=new X5e(e,t,()=>this.onModelContentChanged()))}return this.foldingStateMemento=null,this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onModelContentChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=this.getRangeProvider(e.textModel);let n=this.foldingRegionPromise=kr(s=>t.compute(s));return n.then(s=>{if(s&&n===this.foldingRegionPromise){let r;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const l=s.setCollapsedAllOfType(Sa.Imports.value,!0);l&&(r=Fm.capture(this.editor),this._currentModelHasFoldedImports=l)}let o=this.editor.getSelections(),a=o?o.map(l=>l.startLineNumber):[];e.update(s,a),r&&r.restore(this.editor)}return e})}).then(void 0,e=>(Ke(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){let n=this.editor.getSelections();if(n&&n.length>0){let s=[];for(let r of n){let o=r.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(o)&&s.push(...t.getAllRegionsAtLine(o,a=>a.isCollapsed&&o>a.startLineNumber))}s.length&&(t.toggleCollapseState(s),this.reveal(n[0].getPosition()))}}}).then(void 0,Ke)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let n=!1;switch(e.target.type){case 4:const s=e.target.detail,r=e.target.element.offsetLeft;if(s.offsetX-r<5)return;n=!0;break;case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){let a=this.editor.getModel();if(a&&t.startColumn===a.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}onEditorMouseUp(e){const t=this.getFoldingModel();if(!t||!this.mouseDownInfo||!e.target)return;let n=this.mouseDownInfo.lineNumber,s=this.mouseDownInfo.iconClicked,r=e.target.range;if(!(!r||r.startLineNumber!==n)){if(s){if(e.target.type!==4)return}else{let o=this.editor.getModel();if(!o||r.startColumn!==o.getLineMaxColumn(n))return}t.then(o=>{if(o){let a=o.getRegionAtLine(n);if(a&&a.startLineNumber===n){let l=a.isCollapsed;if(s||l){let c=e.event.altKey,h=[];if(c){let u=f=>!f.containedBy(a)&&!a.containedBy(f),d=o.getRegionsInside(null,u);for(const f of d)f.isCollapsed&&h.push(f);h.length===0&&(h=d)}else{let u=e.event.middleButton||e.event.shiftKey;if(u)for(const d of o.getRegionsInside(a))d.isCollapsed===l&&h.push(d);(l||!u||h.length===0)&&h.push(a)}o.toggleCollapseState(h),this.reveal({lineNumber:n,column:1})}}}}).then(void 0,Ke)}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};Hm.ID="editor.contrib.folding";Hm=iPe([nPe(1,$e)],Hm);class Fs extends gi{runEditorCommand(e,t,n){let s=Hm.get(t);if(!s)return;let r=s.getFoldingModel();if(r)return this.reportTelemetry(e,t),r.then(o=>{if(o){this.invoke(s,o,t,n);const a=t.getSelection();a&&s.reveal(a.getStartPosition())}})}getSelectedLines(e){let t=e.getSelections();return t?t.map(n=>n.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(n=>n+1):this.getSelectedLines(t)}run(e,t){}}function FJ(i){if(!cs(i)){if(!xs(i))return!1;const e=i;if(!cs(e.levels)&&!Cf(e.levels)||!cs(e.direction)&&!Ca(e.direction)||!cs(e.selectionLines)&&(!nY(e.selectionLines)||!e.selectionLines.every(Cf)))return!1}return!0}class sPe extends Fs{constructor(){super({id:"editor.unfold",label:_("unfoldAction.label","Unfold"),alias:"Unfold",precondition:gs,kbOpts:{kbExpr:G.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:FJ,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,s){let r=s&&s.levels||1,o=this.getLineNumbers(s,n);s&&s.direction==="up"?TJ(t,!1,r,o):P0(t,!1,r,o)}}class rPe extends Fs{constructor(){super({id:"editor.unfoldRecursively",label:_("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:gs,kbOpts:{kbExpr:G.editorTextFocus,primary:Ns(2089,2137),weight:100}})}invoke(e,t,n,s){P0(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))}}class oPe extends Fs{constructor(){super({id:"editor.fold",label:_("foldAction.label","Fold"),alias:"Fold",precondition:gs,kbOpts:{kbExpr:G.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:FJ,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,s){let r=this.getLineNumbers(s,n);const o=s&&s.levels,a=s&&s.direction;typeof o!="number"&&typeof a!="string"?B5e(t,!0,r):a==="up"?TJ(t,!0,o||1,r):P0(t,!0,o||1,r)}}class aPe extends Fs{constructor(){super({id:"editor.toggleFold",label:_("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:gs,kbOpts:{kbExpr:G.editorTextFocus,primary:Ns(2089,2090),weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);F5e(t,1,s)}}class lPe extends Fs{constructor(){super({id:"editor.foldRecursively",label:_("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:gs,kbOpts:{kbExpr:G.editorTextFocus,primary:Ns(2089,2135),weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);P0(t,!0,Number.MAX_VALUE,s)}}class cPe extends Fs{constructor(){super({id:"editor.foldAllBlockComments",label:_("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:gs,kbOpts:{kbExpr:G.editorTextFocus,primary:Ns(2089,2133),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())HP(t,Sa.Comment.value,!0);else{const s=n.getModel();if(!s)return;const r=Ii.getComments(s.getLanguageId());if(r&&r.blockCommentStartToken){let o=new RegExp("^\\s*"+wa(r.blockCommentStartToken));zP(t,o,!0)}}}}class hPe extends Fs{constructor(){super({id:"editor.foldAllMarkerRegions",label:_("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:gs,kbOpts:{kbExpr:G.editorTextFocus,primary:Ns(2089,2077),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())HP(t,Sa.Region.value,!0);else{const s=n.getModel();if(!s)return;const r=Ii.getFoldingRules(s.getLanguageId());if(r&&r.markers&&r.markers.start){let o=new RegExp(r.markers.start);zP(t,o,!0)}}}}class uPe extends Fs{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:_("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:gs,kbOpts:{kbExpr:G.editorTextFocus,primary:Ns(2089,2078),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())HP(t,Sa.Region.value,!1);else{const s=n.getModel();if(!s)return;const r=Ii.getFoldingRules(s.getLanguageId());if(r&&r.markers&&r.markers.start){let o=new RegExp(r.markers.start);zP(t,o,!1)}}}}class dPe extends Fs{constructor(){super({id:"editor.foldAllExcept",label:_("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:gs,kbOpts:{kbExpr:G.editorTextFocus,primary:Ns(2089,2131),weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);NJ(t,!0,s)}}class fPe extends Fs{constructor(){super({id:"editor.unfoldAllExcept",label:_("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:gs,kbOpts:{kbExpr:G.editorTextFocus,primary:Ns(2089,2129),weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);NJ(t,!1,s)}}class gPe extends Fs{constructor(){super({id:"editor.foldAll",label:_("foldAllAction.label","Fold All"),alias:"Fold All",precondition:gs,kbOpts:{kbExpr:G.editorTextFocus,primary:Ns(2089,2069),weight:100}})}invoke(e,t,n){P0(t,!0)}}class pPe extends Fs{constructor(){super({id:"editor.unfoldAll",label:_("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:gs,kbOpts:{kbExpr:G.editorTextFocus,primary:Ns(2089,2088),weight:100}})}invoke(e,t,n){P0(t,!1)}}class Rf extends Fs{getFoldingLevel(){return parseInt(this.id.substr(Rf.ID_PREFIX.length))}invoke(e,t,n){V5e(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))}}Rf.ID_PREFIX="editor.foldLevel";Rf.ID=i=>Rf.ID_PREFIX+i;class mPe extends Fs{constructor(){super({id:"editor.gotoParentFold",label:_("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:gs,kbOpts:{kbExpr:G.editorTextFocus,weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);if(s.length>0){let r=W5e(s[0],t);r!==null&&n.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}class _Pe extends Fs{constructor(){super({id:"editor.gotoPreviousFold",label:_("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:gs,kbOpts:{kbExpr:G.editorTextFocus,weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);if(s.length>0){let r=z5e(s[0],t);r!==null&&n.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}class bPe extends Fs{constructor(){super({id:"editor.gotoNextFold",label:_("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:gs,kbOpts:{kbExpr:G.editorTextFocus,weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);if(s.length>0){let r=H5e(s[0],t);r!==null&&n.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}Ps(Hm.ID,Hm);rt(sPe);rt(rPe);rt(oPe);rt(lPe);rt(gPe);rt(pPe);rt(cPe);rt(hPe);rt(uPe);rt(dPe);rt(fPe);rt(aPe);rt(mPe);rt(_Pe);rt(bPe);for(let i=1;i<=7;i++)fQ(new Rf({id:Rf.ID(i),label:_("foldLevelAction.label","Fold Level {0}",i),alias:`Fold Level ${i}`,precondition:gs,kbOpts:{kbExpr:G.editorTextFocus,primary:Ns(2089,2048|21+i),weight:100}}));const vPe=V("editor.foldBackground",{light:$t(tu,.3),dark:$t(tu,.3),hc:null},_("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),wPe=V("editorGutter.foldingControlForeground",{dark:rE,light:rE,hc:rE},_("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));Jt((i,e)=>{const t=i.getColor(vPe);t&&e.addRule(`.monaco-editor .folded-background { background-color: ${t}; }`);const n=i.getColor(wPe);n&&e.addRule(`
		.monaco-editor .cldr${oi.asCSSSelector(UP)},
		.monaco-editor .cldr${oi.asCSSSelector($P)} {
			color: ${n} !important;
		}
		`)});class jn{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getCurrentMatchesPosition(e){let t=this._editor.getModel().getDecorationsInRange(e);for(const n of t){const s=n.options;if(s===jn._FIND_MATCH_DECORATION||s===jn._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(n.id)}return 0}setCurrentFindMatch(e){let t=null,n=0;if(e)for(let s=0,r=this._decorations.length;s<r;s++){let o=this._editor.getModel().getDecorationRange(this._decorations[s]);if(e.equalsRange(o)){t=this._decorations[s],n=s+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(s=>{if(this._highlightedDecorationId!==null&&(s.changeDecorationOptions(this._highlightedDecorationId,jn._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,s.changeDecorationOptions(this._highlightedDecorationId,jn._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(s.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let r=this._editor.getModel().getDecorationRange(t);if(r.startLineNumber!==r.endLineNumber&&r.endColumn===1){let o=r.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(o);r=new F(r.startLineNumber,r.startColumn,o,a)}this._rangeHighlightDecorationId=s.addDecoration(r,jn._RANGE_HIGHLIGHT_DECORATION)}}),n}set(e,t){this._editor.changeDecorations(n=>{let s=jn._FIND_MATCH_DECORATION,r=[];if(e.length>1e3){s=jn._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),c=this._editor.getLayoutInfo().height/a,h=Math.max(2,Math.ceil(3/c));let u=e[0].range.startLineNumber,d=e[0].range.endLineNumber;for(let f=1,g=e.length;f<g;f++){const p=e[f].range;d+h>=p.startLineNumber?p.endLineNumber>d&&(d=p.endLineNumber):(r.push({range:new F(u,1,d,1),options:jn._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),u=p.startLineNumber,d=p.endLineNumber)}r.push({range:new F(u,1,d,1),options:jn._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let o=new Array(e.length);for(let a=0,l=e.length;a<l;a++)o[a]={range:e[a].range,options:s};this._decorations=n.deltaDecorations(this._decorations,o),this._overviewRulerApproximateDecorations=n.deltaDecorations(this._overviewRulerApproximateDecorations,r),this._rangeHighlightDecorationId&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>n.removeDecoration(a)),this._findScopeDecorationIds=[]),t!=null&&t.length&&(this._findScopeDecorationIds=t.map(a=>n.addDecoration(a,jn._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){let n=this._decorations[t],s=this._editor.getModel().getDecorationRange(n);if(!(!s||s.endLineNumber>e.lineNumber)){if(s.endLineNumber<e.lineNumber)return s;if(!(s.endColumn>e.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,n=this._decorations.length;t<n;t++){let s=this._decorations[t],r=this._editor.getModel().getDecorationRange(s);if(!(!r||r.startLineNumber<e.lineNumber)){if(r.startLineNumber>e.lineNumber)return r;if(!(r.startColumn<e.column))return r}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}jn._CURRENT_FIND_MATCH_DECORATION=lt.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:dr(Z5),position:Il.Center},minimap:{color:dr(jQ),position:Sl.Inline}});jn._FIND_MATCH_DECORATION=lt.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:dr(Z5),position:Il.Center},minimap:{color:dr(jQ),position:Sl.Inline}});jn._FIND_MATCH_NO_OVERVIEW_DECORATION=lt.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});jn._FIND_MATCH_ONLY_OVERVIEW_DECORATION=lt.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:dr(Z5),position:Il.Center}});jn._RANGE_HIGHLIGHT_DECORATION=lt.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});jn._FIND_SCOPE_DECORATION=lt.register({description:"find-scope",className:"findScope",isWholeLine:!0});class yPe{constructor(e,t,n){this._editorSelection=e,this._ranges=t,this._replaceStrings=n,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){let n=[];for(let o=0;o<this._ranges.length;o++)n.push({range:this._ranges[o],text:this._replaceStrings[o]});n.sort((o,a)=>F.compareRangesUsingStarts(o.range,a.range));let s=[],r=n[0];for(let o=1;o<n.length;o++)r.range.endLineNumber===n[o].range.startLineNumber&&r.range.endColumn===n[o].range.startColumn?(r.range=r.range.plusRange(n[o].range),r.text=r.text+n[o].text):(s.push(r),r=n[o]);s.push(r);for(const o of s)t.addEditOperation(o.range,o.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}function BJ(i,e){if(i&&i[0]!==""){const t=rz(i,e,"-"),n=rz(i,e,"_");return t&&!n?oz(i,e,"-"):!t&&n?oz(i,e,"_"):i[0].toUpperCase()===i[0]?e.toUpperCase():i[0].toLowerCase()===i[0]?e.toLowerCase():PSe(i[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):i[0][0].toUpperCase()!==i[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function rz(i,e,t){return i[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&i[0].split(t).length===e.split(t).length}function oz(i,e,t){const n=e.split(t),s=i[0].split(t);let r="";return n.forEach((o,a)=>{r+=BJ([s[a]],o)+t}),r.slice(0,-1)}class az{constructor(e){this.staticValue=e,this.kind=0}}class CPe{constructor(e){this.pieces=e,this.kind=1}}class Um{constructor(e){!e||e.length===0?this._state=new az(""):e.length===1&&e[0].staticValue!==null?this._state=new az(e[0].staticValue):this._state=new CPe(e)}static fromStaticValue(e){return new Um([Qd.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}buildReplaceString(e,t){if(this._state.kind===0)return t?BJ(e,this._state.staticValue):this._state.staticValue;let n="";for(let s=0,r=this._state.pieces.length;s<r;s++){let o=this._state.pieces[s];if(o.staticValue!==null){n+=o.staticValue;continue}let a=Um._substitute(o.matchIndex,e);if(o.caseOps!==null&&o.caseOps.length>0){let l=[],c=o.caseOps.length,h=0;for(let u=0,d=a.length;u<d;u++){if(h>=c){l.push(a.slice(u));break}switch(o.caseOps[h]){case"U":l.push(a[u].toUpperCase());break;case"u":l.push(a[u].toUpperCase()),h++;break;case"L":l.push(a[u].toLowerCase());break;case"l":l.push(a[u].toLowerCase()),h++;break;default:l.push(a[u])}}a=l.join("")}n+=a}return n}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let n="";for(;e>0;){if(e<t.length)return(t[e]||"")+n;n=String(e%10)+n,e=Math.floor(e/10)}return"$"+n}}class Qd{constructor(e,t,n){this.staticValue=e,this.matchIndex=t,!n||n.length===0?this.caseOps=null:this.caseOps=n.slice(0)}static staticValue(e){return new Qd(e,-1,null)}static caseOps(e,t){return new Qd(null,e,t)}}class SPe{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,n){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=Qd.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=Qd.caseOps(e,n),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=Qd.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new Um(this._result)}}function xPe(i){if(!i||i.length===0)return new Um(null);let e=[],t=new SPe(i);for(let n=0,s=i.length;n<s;n++){let r=i.charCodeAt(n);if(r===92){if(n++,n>=s)break;let o=i.charCodeAt(n);switch(o){case 92:t.emitUnchanged(n-1),t.emitStatic("\\",n+1);break;case 110:t.emitUnchanged(n-1),t.emitStatic(`
`,n+1);break;case 116:t.emitUnchanged(n-1),t.emitStatic("	",n+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(n-1),t.emitStatic("",n+1),e.push(String.fromCharCode(o));break}continue}if(r===36){if(n++,n>=s)break;let o=i.charCodeAt(n);if(o===36){t.emitUnchanged(n-1),t.emitStatic("$",n+1);continue}if(o===48||o===38){t.emitUnchanged(n-1),t.emitMatchIndex(0,n+1,e),e.length=0;continue}if(49<=o&&o<=57){let a=o-48;if(n+1<s){let l=i.charCodeAt(n+1);if(48<=l&&l<=57){n++,a=a*10+(l-48),t.emitUnchanged(n-2),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}t.emitUnchanged(n-1),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}}return t.finalize()}const fg=new De("findWidgetVisible",!1),Vk=new De("findInputFocussed",!1),jP=new De("replaceInputFocussed",!1),Xy={primary:545,mac:{primary:2593}},Jy={primary:565,mac:{primary:2613}},eC={primary:560,mac:{primary:2608}},tC={primary:554,mac:{primary:2602}},iC={primary:558,mac:{primary:2606}},Ht={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},Uh=19999,DPe=240;class Fb{constructor(e,t){this._toDispose=new de,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new Ms,this._decorations=new jn(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new fi(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(n=>{(n.reason===3||n.reason===5||n.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(n=>{this._ignoreModelContentChanged||(n.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(n=>this._onStateChanged(n))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,at(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},DPe)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let n=null;typeof t<"u"?t!==null&&(Array.isArray(t)?n=t:n=[t]):n=this._decorations.getFindScopes(),n!==null&&(n=n.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new F(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));let s=this._findMatches(n,!1,Uh);this._decorations.set(s,n);const r=this._editor.getSelection();let o=this._decorations.getCurrentMatchesPosition(r);if(o===0&&s.length>0){const a=RY(s.map(l=>l.range),l=>F.compareRangesUsingStarts(l,r)>=0);o=a>0?a-1+1:o}this._state.changeMatchInfo(o,this._decorations.getCount(),void 0),e&&this._editor.getOption(35).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){let t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:n,column:s}=e,r=this._editor.getModel();return t||s===1?(n===1?n=r.getLineCount():n--,s=r.getLineMaxColumn(n)):s--,new q(n,s)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const h=this._decorations.matchAfterPosition(e);h&&this._setCurrentFindMatch(h);return}if(this._decorations.getCount()<Uh){let h=this._decorations.matchBeforePosition(e);h&&h.isEmpty()&&h.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),h=this._decorations.matchBeforePosition(e)),h&&this._setCurrentFindMatch(h);return}if(this._cannotFind())return;let n=this._decorations.getFindScope(),s=Fb._getSearchRange(this._editor.getModel(),n);s.getEndPosition().isBefore(e)&&(e=s.getEndPosition()),e.isBefore(s.getStartPosition())&&(e=s.getEndPosition());let{lineNumber:r,column:o}=e,a=this._editor.getModel(),l=new q(r,o),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,!1);if(c&&c.range.isEmpty()&&c.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,!1)),!!c){if(!t&&!s.containsRange(c.range))return this._moveToPrevMatch(c.range.getStartPosition(),!0);this._setCurrentFindMatch(c.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:n,column:s}=e,r=this._editor.getModel();return t||s===r.getLineMaxColumn(n)?(n===r.getLineCount()?n=1:n++,s=1):s++,new q(n,s)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const n=this._decorations.matchBeforePosition(e);n&&this._setCurrentFindMatch(n);return}if(this._decorations.getCount()<Uh){let n=this._decorations.matchAfterPosition(e);n&&n.isEmpty()&&n.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),n=this._decorations.matchAfterPosition(e)),n&&this._setCurrentFindMatch(n);return}let t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,n,s=!1){if(this._cannotFind())return null;let r=this._decorations.getFindScope(),o=Fb._getSearchRange(this._editor.getModel(),r);o.getEndPosition().isBefore(e)&&(e=o.getStartPosition()),e.isBefore(o.getStartPosition())&&(e=o.getStartPosition());let{lineNumber:a,column:l}=e,c=this._editor.getModel(),h=new q(a,l),u=c.findNextMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t);return n&&u&&u.range.isEmpty()&&u.range.getStartPosition().equals(h)&&(h=this._nextSearchPosition(h),u=c.findNextMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t)),u?!s&&!o.containsRange(u.range)?this._getNextMatch(u.range.getEndPosition(),t,n,!0):u:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?xPe(this._state.replaceString):Um.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let e=this._getReplacePattern(),t=this._editor.getSelection(),n=this._getNextMatch(t.getStartPosition(),!0,!1);if(n)if(t.equalsRange(n.range)){let s=e.buildReplaceString(n.matches,this._state.preserveCase),r=new vs(t,s);this._executeEditorCommand("replace",r),this._decorations.setStartPosition(new q(t.startLineNumber,t.startColumn+s.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(n.range)}_findMatches(e,t,n){const s=(e||[null]).map(r=>Fb._getSearchRange(this._editor.getModel(),r));return this._editor.getModel().findMatches(this._state.searchString,s,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t,n)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=Uh?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new nd(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null).parseSearchRequest();if(!t)return;let n=t.regex;if(!n.multiline){let u="mu";n.ignoreCase&&(u+="i"),n.global&&(u+="g"),n=new RegExp(n.source,u)}const s=this._editor.getModel(),r=s.getValue(1),o=s.getFullModelRange(),a=this._getReplacePattern();let l;const c=this._state.preserveCase;a.hasReplacementPatterns||c?l=r.replace(n,function(){return a.buildReplaceString(arguments,c)}):l=r.replace(n,a.buildReplaceString(null,c));let h=new cX(o,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",h)}_regularReplaceAll(e){const t=this._getReplacePattern();let n=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),s=[];for(let o=0,a=n.length;o<a;o++)s[o]=t.buildReplaceString(n[o].matches,this._state.preserveCase);let r=new yPe(this._editor.getSelection(),n.map(o=>o.range),s);this._executeEditorCommand("replaceAll",r)}selectAllMatches(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes(),n=this._findMatches(e,!1,1073741824).map(r=>new Ve(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn)),s=this._editor.getSelection();for(let r=0,o=n.length;r<o;r++)if(n[r].equalsRange(s)){n=[s].concat(n.slice(0,r)).concat(n.slice(r+1));break}this._editor.setSelections(n)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}const LPe={inputActiveOptionBorder:Z.fromHex("#007ACC00"),inputActiveOptionForeground:Z.fromHex("#FFFFFF"),inputActiveOptionBackground:Z.fromHex("#0E639C50")};class Ow extends Qr{constructor(e){super(),this._onChange=this._register(new z),this.onChange=this._onChange.event,this._onKeyDown=this._register(new z),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},LPe),e),this._checked=this._opts.isChecked;const t=["monaco-custom-checkbox"];this._opts.icon&&t.push(...Gs.asClassNameArray(this._opts.icon)),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault()}),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 2+2+2+16}style(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),e.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=e.inputActiveOptionForeground),e.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=e.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"transparent",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"transparent")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}const kPe=_("caseDescription","Match Case"),APe=_("wordsDescription","Match Whole Word"),EPe=_("regexDescription","Use Regular Expression");class VJ extends Ow{constructor(e){super({icon:be.caseSensitive,title:kPe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class WJ extends Ow{constructor(e){super({icon:be.wholeWord,title:APe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class zJ extends Ow{constructor(e){super({icon:be.regex,title:EPe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Wk extends Qr{constructor(e,t,n,s){super(),this._hideSoon=this._register(new fi(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=n,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const r=s.getColorTheme().getColor(FM),o=s.getColorTheme().getColor(VM),a=s.getColorTheme().getColor(BM);this.caseSensitive=this._register(new VJ({appendTitle:this._keybindingLabelFor(Ht.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:r,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new WJ({appendTitle:this._keybindingLabelFor(Ht.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:r,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new zJ({appendTitle:this._keybindingLabelFor(Ht.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:r,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(l=>{let c=!1;l.isRegex&&(this.regex.checked=this._state.isRegex,c=!0),l.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,c=!0),l.matchCase&&(this.caseSensitive.checked=this._state.matchCase,c=!0),!this._state.isRevealed&&c&&this._revealTemporarily()})),this._register(KO(this._domNode,l=>this._onMouseOut())),this._register(ne(this._domNode,"mouseover",l=>this._onMouseOver())),this._applyTheme(s.getColorTheme()),this._register(s.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return Wk.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseOut(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(FM),inputActiveOptionForeground:e.getColor(VM),inputActiveOptionBackground:e.getColor(BM)};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}}Wk.ID="editor.contrib.findOptionsWidget";Jt((i,e)=>{const t=i.getColor(To);t&&e.addRule(`.monaco-editor .findOptionsWidget { background-color: ${t}; }`);const n=i.getColor(eu);n&&e.addRule(`.monaco-editor .findOptionsWidget { color: ${n}; }`);const s=i.getColor(Nm);s&&e.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${s}; }`);const r=i.getColor(Pi);r&&e.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${r}; }`)});function nC(i,e){return i===1?!0:i===2?!1:e}class IPe extends te{constructor(){super(),this._onFindReplaceStateChange=this._register(new z),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return nC(this._isRegexOverride,this._isRegex)}get wholeWord(){return nC(this._wholeWordOverride,this._wholeWord)}get matchCase(){return nC(this._matchCaseOverride,this._matchCase)}get preserveCase(){return nC(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(e,t,n){let s={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},r=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,s.matchesPosition=!0,r=!0),this._matchesCount!==t&&(this._matchesCount=t,s.matchesCount=!0,r=!0),typeof n<"u"&&(F.equalsRange(this._currentMatch,n)||(this._currentMatch=n,s.currentMatch=!0,r=!0)),r&&this._onFindReplaceStateChange.fire(s)}change(e,t,n=!0){var s;let r={moveCursor:t,updateHistory:n,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},o=!1;const a=this.isRegex,l=this.wholeWord,c=this.matchCase,h=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,r.searchString=!0,o=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,r.replaceString=!0,o=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,r.isRevealed=!0,o=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,r.isReplaceRevealed=!0,o=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(!((s=e.searchScope)===null||s===void 0)&&s.every(u=>{var d;return(d=this._searchScope)===null||d===void 0?void 0:d.some(f=>!F.equalsRange(f,u))})||(this._searchScope=e.searchScope,r.searchScope=!0,o=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,r.loop=!0,o=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,a!==this.isRegex&&(o=!0,r.isRegex=!0),l!==this.wholeWord&&(o=!0,r.wholeWord=!0),c!==this.matchCase&&(o=!0,r.matchCase=!0),h!==this.preserveCase&&(o=!0,r.preserveCase=!0),o&&this._onFindReplaceStateChange.fire(r)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=Uh}}const TPe=_("defaultLabel","input");class NPe extends Qr{constructor(e,t,n,s){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this._onDidOptionChange=this._register(new z),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new z),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new z),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new z),this._onKeyUp=this._register(new z),this._onCaseSensitiveKeyDown=this._register(new z),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new z),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.contextViewProvider=t,this.placeholder=s.placeholder||"",this.validation=s.validation,this.label=s.label||TPe,this.inputActiveOptionBorder=s.inputActiveOptionBorder,this.inputActiveOptionForeground=s.inputActiveOptionForeground,this.inputActiveOptionBackground=s.inputActiveOptionBackground,this.inputBackground=s.inputBackground,this.inputForeground=s.inputForeground,this.inputBorder=s.inputBorder,this.inputValidationInfoBorder=s.inputValidationInfoBorder,this.inputValidationInfoBackground=s.inputValidationInfoBackground,this.inputValidationInfoForeground=s.inputValidationInfoForeground,this.inputValidationWarningBorder=s.inputValidationWarningBorder,this.inputValidationWarningBackground=s.inputValidationWarningBackground,this.inputValidationWarningForeground=s.inputValidationWarningForeground,this.inputValidationErrorBorder=s.inputValidationErrorBorder,this.inputValidationErrorBackground=s.inputValidationErrorBackground,this.inputValidationErrorForeground=s.inputValidationErrorForeground;const r=s.appendCaseSensitiveLabel||"",o=s.appendWholeWordsLabel||"",a=s.appendRegexLabel||"",l=s.history||[],c=!!s.flexibleHeight,h=!!s.flexibleWidth,u=s.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new CJ(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:l,showHistoryHint:s.showHistoryHint,flexibleHeight:c,flexibleWidth:h,flexibleMaxHeight:u})),this.regex=this._register(new zJ({appendTitle:a,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.regex.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(g=>{this._onRegexKeyDown.fire(g)})),this.wholeWords=this._register(new WJ({appendTitle:o,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.wholeWords.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new VJ({appendTitle:r,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.caseSensitive.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(g=>{this._onCaseSensitiveKeyDown.fire(g)})),this._showOptionButtons&&(this.inputBox.paddingRight=this.caseSensitive.width()+this.wholeWords.width()+this.regex.width());let d=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,g=>{if(g.equals(15)||g.equals(17)||g.equals(9)){let p=d.indexOf(document.activeElement);if(p>=0){let m=-1;g.equals(17)?m=(p+1)%d.length:g.equals(15)&&(p===0?m=d.length-1:m=p-1),g.equals(9)?(d[p].blur(),this.inputBox.focus()):m>=0&&d[m].focus(),Et.stop(g,!0)}}});let f=document.createElement("div");f.className="controls",f.style.display=this._showOptionButtons?"block":"none",f.appendChild(this.caseSensitive.domNode),f.appendChild(this.wholeWords.domNode),f.appendChild(this.regex.domNode),this.domNode.appendChild(f),e&&e.appendChild(this.domNode),this._register(ne(this.inputBox.inputElement,"compositionstart",g=>{this.imeSessionInProgress=!0})),this._register(ne(this.inputBox.inputElement,"compositionend",g=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,g=>this._onKeyDown.fire(g)),this.onkeyup(this.inputBox.inputElement,g=>this._onKeyUp.fire(g)),this.oninput(this.inputBox.inputElement,g=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,g=>this._onMouseDown.fire(g))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.regex.style(e),this.wholeWords.style(e),this.caseSensitive.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive.checked}setCaseSensitive(e){this.caseSensitive.checked=e}getWholeWords(){return this.wholeWords.checked}setWholeWords(e){this.wholeWords.checked=e}getRegex(){return this.regex.checked}setRegex(e){this.regex.checked=e,this.validate()}focusOnCaseSensitive(){this.caseSensitive.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}clearMessage(){this.inputBox.hideMessage()}}const MPe=_("defaultLabel","input"),RPe=_("label.preserveCaseCheckbox","Preserve Case");class OPe extends Ow{constructor(e){super({icon:be.preserveCase,title:RPe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class PPe extends Qr{constructor(e,t,n,s){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new z),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new z),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new z),this._onInput=this._register(new z),this._onKeyUp=this._register(new z),this._onPreserveCaseKeyDown=this._register(new z),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=s.placeholder||"",this.validation=s.validation,this.label=s.label||MPe,this.inputActiveOptionBorder=s.inputActiveOptionBorder,this.inputActiveOptionForeground=s.inputActiveOptionForeground,this.inputActiveOptionBackground=s.inputActiveOptionBackground,this.inputBackground=s.inputBackground,this.inputForeground=s.inputForeground,this.inputBorder=s.inputBorder,this.inputValidationInfoBorder=s.inputValidationInfoBorder,this.inputValidationInfoBackground=s.inputValidationInfoBackground,this.inputValidationInfoForeground=s.inputValidationInfoForeground,this.inputValidationWarningBorder=s.inputValidationWarningBorder,this.inputValidationWarningBackground=s.inputValidationWarningBackground,this.inputValidationWarningForeground=s.inputValidationWarningForeground,this.inputValidationErrorBorder=s.inputValidationErrorBorder,this.inputValidationErrorBackground=s.inputValidationErrorBackground,this.inputValidationErrorForeground=s.inputValidationErrorForeground;const r=s.appendPreserveCaseLabel||"",o=s.history||[],a=!!s.flexibleHeight,l=!!s.flexibleWidth,c=s.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new CJ(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:o,showHistoryHint:s.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c})),this.preserveCase=this._register(new OPe({appendTitle:r,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.preserveCase.onChange(d=>{this._onDidOptionChange.fire(d),!d&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(d=>{this._onPreserveCaseKeyDown.fire(d)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let h=[this.preserveCase.domNode];this.onkeydown(this.domNode,d=>{if(d.equals(15)||d.equals(17)||d.equals(9)){let f=h.indexOf(document.activeElement);if(f>=0){let g=-1;d.equals(17)?g=(f+1)%h.length:d.equals(15)&&(f===0?g=h.length-1:g=f-1),d.equals(9)?(h[f].blur(),this.inputBox.focus()):g>=0&&h[g].focus(),Et.stop(d,!0)}}});let u=document.createElement("div");u.className="controls",u.style.display=this._showOptionButtons?"block":"none",u.appendChild(this.preserveCase.domNode),this.domNode.appendChild(u),e&&e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,d=>this._onKeyDown.fire(d)),this.onkeyup(this.inputBox.inputElement,d=>this._onKeyUp.fire(d)),this.oninput(this.inputBox.inputElement,d=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,d=>this._onMouseDown.fire(d))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.preserveCase.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox&&this.inputBox.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.inputBox.width=e,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}class co{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,t=0,n=this.value.charCodeAt(e),s;if(s=co._table[n],typeof s=="number")return this.pos+=1,{type:s,pos:e,len:1};if(co.isDigitCharacter(n)){s=8;do t+=1,n=this.value.charCodeAt(e+t);while(co.isDigitCharacter(n));return this.pos+=t,{type:s,pos:e,len:t}}if(co.isVariableCharacter(n)){s=9;do n=this.value.charCodeAt(e+ ++t);while(co.isVariableCharacter(n)||co.isDigitCharacter(n));return this.pos+=t,{type:s,pos:e,len:t}}s=10;do t+=1,n=this.value.charCodeAt(e+t);while(!isNaN(n)&&typeof co._table[n]>"u"&&!co.isDigitCharacter(n)&&!co.isVariableCharacter(n));return this.pos+=t,{type:s,pos:e,len:t}}}co._table={[36]:0,[58]:1,[44]:2,[123]:3,[125]:4,[92]:5,[47]:6,[124]:7,[43]:11,[45]:12,[63]:13};class F0{constructor(){this._children=[]}appendChild(e){return e instanceof qs&&this._children[this._children.length-1]instanceof qs?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:n}=e,s=n.children.indexOf(e),r=n.children.slice(0);r.splice(s,1,...t),n._children=r,function o(a,l){for(const c of a)c.parent=l,o(c.children,c)}(t,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof zk)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}class qs extends F0{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new qs(this.value)}}class HJ extends F0{}class vo extends HJ{constructor(e){super(),this.index=e}static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Pw?this._children[0]:void 0}clone(){let e=new vo(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}class Pw extends F0{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof qs&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let e=new Pw;return this.options.forEach(e.appendChild,e),e}}class qP extends F0{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let n=!1,s=e.replace(this.regexp,function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!n&&this._children.some(r=>r instanceof Zo&&!!r.elseValue)&&(s=this._replace([])),s}_replace(e){let t="";for(const n of this._children)if(n instanceof Zo){let s=e[n.index]||"";s=n.resolve(s),t+=s}else t+=n.toString();return t}toString(){return""}clone(){let e=new qP;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}class Zo extends F0{constructor(e,t,n,s){super(),this.index=e,this.shorthandName=t,this.ifValue=n,this.elseValue=s}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(n=>n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((n,s)=>s===0?n.toLowerCase():n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()).join(""):e}clone(){return new Zo(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class m1 extends HJ{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new qs(t)],!0):!1}clone(){const e=new m1(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}function lz(i,e){const t=[...i];for(;t.length>0;){const n=t.shift();if(!e(n))break;t.unshift(...n.children)}}class zk extends F0{get placeholderInfo(){if(!this._placeholders){let e=[],t;this.walk(function(n){return n instanceof vo&&(e.push(n),t=!t||t.index<n.index?n:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,n=!1;return this.walk(s=>s===e?(n=!0,!1):(t+=s.len(),!0)),n?t:-1}fullLen(e){let t=0;return lz([e],n=>(t+=n.len(),!0)),t}enclosingPlaceholders(e){let t=[],{parent:n}=e;for(;n;)n instanceof vo&&t.push(n),n=n.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof m1&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){let e=new zk;return this._children=this.children.map(t=>t.clone()),e}walk(e){lz(this.children,e)}}class Hk{constructor(){this._scanner=new co,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,n){this._scanner.text(e),this._token=this._scanner.next();const s=new zk;for(;this._parse(s););const r=new Map,o=[];let a=0;s.walk(l=>(l instanceof vo&&(a+=1,l.isFinalTabstop?r.set(0,void 0):!r.has(l.index)&&l.children.length>0?r.set(l.index,l.children):o.push(l)),!0));for(const l of o){const c=r.get(l.index);if(c){const h=new vo(l.index);h.transform=l.transform;for(const u of c)h.appendChild(u.clone());s.replace(l,[h])}}return n||(n=a>0&&t),!r.has(0)&&n&&s.appendChild(new vo(0)),s}_accept(e,t){if(e===void 0||this._token.type===e){let n=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const s=this._scanner.next();if(s.type!==0&&s.type!==4&&s.type!==5)return!1}this._token=this._scanner.next()}const n=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new qs(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new vo(Number(t)):new m1(t)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);const r=new vo(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new qs("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else if(r.index>0&&this._accept(7)){const o=new Pw;for(;;){if(this._parseChoiceElement(o)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(o),this._accept(4)))return e.appendChild(r),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(n)}_parseChoiceElement(e){const t=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let s;if((s=this._accept(5,!0))?s=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||s:s=this._accept(void 0,!0),!s)return this._backTo(t),!1;n.push(s)}return n.length===0?(this._backTo(t),!1):(e.appendChild(new qs(n.join(""))),!0)}_parseComplexVariable(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);const r=new m1(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new qs("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(n)}_parseTransform(e){let t=new qP,n="",s="";for(;!this._accept(6);){let r;if(r=this._accept(5,!0)){r=this._accept(6,!0)||r,n+=r;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let r;if(r=this._accept(5,!0)){r=this._accept(5,!0)||this._accept(6,!0)||r,t.appendChild(new qs(r));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){s+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,s)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let s=this._accept(8,!0);if(s)if(n){if(this._accept(4))return e.appendChild(new Zo(Number(s))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new Zo(Number(s))),!0;else return this._backTo(t),!1;if(this._accept(6)){let r=this._accept(9,!0);return!r||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new Zo(Number(s),r)),!0)}else if(this._accept(11)){let r=this._until(4);if(r)return e.appendChild(new Zo(Number(s),void 0,r,void 0)),!0}else if(this._accept(12)){let r=this._until(4);if(r)return e.appendChild(new Zo(Number(s),void 0,void 0,r)),!0}else if(this._accept(13)){let r=this._until(1);if(r){let o=this._until(4);if(o)return e.appendChild(new Zo(Number(s),void 0,r,o)),!0}}else{let r=this._until(4);if(r)return e.appendChild(new Zo(Number(s),void 0,void 0,r)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new qs(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}var Bb=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const Je={Visible:new De("suggestWidgetVisible",!1,_("suggestWidgetVisible","Whether suggestion are visible")),DetailsVisible:new De("suggestWidgetDetailsVisible",!1,_("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new De("suggestWidgetMultipleSuggestions",!1,_("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new De("suggestionMakesTextEdit",!0,_("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new De("acceptSuggestionOnEnter",!0,_("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new De("suggestionHasInsertAndReplaceRange",!1,_("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new De("suggestionInsertMode",void 0,{type:"string",description:_("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new De("suggestionCanResolve",!1,_("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},xu=new Ue("suggestWidgetStatusBar");class FPe{constructor(e,t,n,s){this.position=e,this.completion=t,this.container=n,this.provider=s,this.isInvalid=!1,this.score=ga.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:t.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),F.isIRange(t.range)?(this.editStart=new q(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new q(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new q(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||F.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new q(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new q(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new q(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||F.spansMultipleLines(t.range.insert)||F.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof s.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(e){return Bb(this,void 0,void 0,function*(){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._isResolved=!1});this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(n=>{Object.assign(this.completion,n),this._isResolved=!0,t.dispose()},n=>{Bu(n)&&(this._resolveCache=void 0,this._isResolved=!1)})}return this._resolveCache})}}class kD{constructor(e=2,t=new Set,n=new Set,s=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=n,this.showDeprecated=s}}kD.default=new kD;let BPe;function VPe(){return BPe}class WPe{constructor(e,t,n,s){this.items=e,this.needsClipboard=t,this.durations=n,this.disposable=s}}function UJ(i,e,t=kD.default,n={triggerKind:0},s=Xt.None){return Bb(this,void 0,void 0,function*(){const r=new $c(!0);e=e.clone();const o=i.getWordAtPosition(e),a=o?new F(e.lineNumber,o.startColumn,e.lineNumber,o.endColumn):F.fromPositions(e),l={replace:a,insert:a.setEndPosition(e.lineNumber,e.column)},c=[],h=new de,u=[];let d=!1;const f=(p,m,v)=>{var b,w,y;if(m){for(let x of m.suggestions)if(!t.kindFilter.has(x.kind)){if(!t.showDeprecated&&(!((b=x==null?void 0:x.tags)===null||b===void 0)&&b.includes(1)))continue;x.range||(x.range=l),x.sortText||(x.sortText=typeof x.label=="string"?x.label:x.label.label),!d&&x.insertTextRules&&x.insertTextRules&4&&(d=Hk.guessNeedsClipboard(x.insertText)),c.push(new FPe(e,x,m,p))}CZ(m)&&h.add(m),u.push({providerName:(w=p._debugDisplayName)!==null&&w!==void 0?w:"unkown_provider",elapsedProvider:(y=m.duration)!==null&&y!==void 0?y:-1,elapsedOverall:v.elapsed()})}},g=(()=>Bb(this,void 0,void 0,function*(){}))();for(let p of ta.orderedGroups(i)){let m=c.length;if(yield Promise.all(p.map(v=>Bb(this,void 0,void 0,function*(){if(!(t.providerFilter.size>0&&!t.providerFilter.has(v)))try{const b=new $c(!0),w=yield v.provideCompletionItems(i,e,n,s);f(v,w,b)}catch(b){Fo(b)}}))),m!==c.length||s.isCancellationRequested)break}return yield g,s.isCancellationRequested?(h.dispose(),Promise.reject(w0())):new WPe(c.sort($J(t.snippetSortOrder)),d,{entries:u,elapsed:r.elapsed()},h)})}function GP(i,e){if(i.sortTextLow&&e.sortTextLow){if(i.sortTextLow<e.sortTextLow)return-1;if(i.sortTextLow>e.sortTextLow)return 1}return i.completion.label<e.completion.label?-1:i.completion.label>e.completion.label?1:i.completion.kind-e.completion.kind}function zPe(i,e){if(i.completion.kind!==e.completion.kind){if(i.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return GP(i,e)}function HPe(i,e){if(i.completion.kind!==e.completion.kind){if(i.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return GP(i,e)}const Uk=new Map;Uk.set(0,zPe);Uk.set(2,HPe);Uk.set(1,GP);function $J(i){return Uk.get(i)}Tt.registerCommand("_executeCompletionItemProvider",(i,...e)=>Bb(void 0,void 0,void 0,function*(){const[t,n,s,r]=e;Mi(We.isUri(t)),Mi(q.isIPosition(n)),Mi(typeof s=="string"||!s),Mi(typeof r=="number"||!r);const o=yield i.get(Tl).createModelReference(t);try{const a={incomplete:!1,suggestions:[]},l=[],c=yield UJ(o.object.textEditorModel,q.lift(n),void 0,{triggerCharacter:s,triggerKind:s?1:0});for(const h of c.items)l.length<(r??0)&&l.push(h.resolve(Xt.None)),a.incomplete=a.incomplete||h.container.incomplete,a.suggestions.push(h.completion);try{return yield Promise.all(l),a}finally{setTimeout(()=>c.disposable.dispose(),100)}}finally{o.dispose()}}));const W4=new class{constructor(){this.onlyOnceSuggestions=[]}provideCompletionItems(){let e={suggestions:this.onlyOnceSuggestions.slice(0)};return this.onlyOnceSuggestions.length=0,e}};ta.register("*",W4);function UPe(i,e){setTimeout(()=>{W4.onlyOnceSuggestions.push(...e),i.getContribution("editor.contrib.suggestController").triggerSuggest(new Set().add(W4))},0)}var jJ=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},qJ=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const _1="historyNavigationWidget",GJ="historyNavigationForwardsEnabled",KJ="historyNavigationBackwardsEnabled";function $Pe(i,e,t){new De(t,e).bindTo(i)}function jPe(i,e){return i.createScoped(e.target)}function ZJ(i,e){return i.getContext(document.activeElement).getValue(e)}function YJ(i,e){const t=jPe(i,e);$Pe(t,e,_1);const n=new De(GJ,!0).bindTo(t),s=new De(KJ,!0).bindTo(t);return{scopedContextKeyService:t,historyNavigationForwardsEnablement:n,historyNavigationBackwardsEnablement:s}}let z4=class extends NPe{constructor(e,t,n,s,r=!1){super(e,t,r,n),this._register(YJ(s,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};z4=jJ([qJ(3,$e)],z4);let H4=class extends PPe{constructor(e,t,n,s,r=!1){super(e,t,r,n),this._register(YJ(s,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};H4=jJ([qJ(3,$e)],H4);ds.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:xe.and(xe.has(_1),xe.equals(KJ,!0),Je.Visible.isEqualTo(!1)),primary:16,secondary:[528],handler:i=>{const e=ZJ(i.get($e),_1);e&&e.historyNavigator.showPreviousValue()}});ds.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:xe.and(xe.has(_1),xe.equals(GJ,!0),Je.Visible.isEqualTo(!1)),primary:18,secondary:[530],handler:i=>{const e=ZJ(i.get($e),_1);e&&e.historyNavigator.showNextValue()}});function cz(i){var e,t;return((e=i.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=i.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}var qPe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const GPe=es("find-selection",be.selection,_("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),hz=es("find-collapsed",be.chevronRight,_("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),uz=es("find-expanded",be.chevronDown,_("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),KPe=es("find-replace",be.replace,_("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),ZPe=es("find-replace-all",be.replaceAll,_("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),YPe=es("find-previous-match",be.arrowUp,_("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),QPe=es("find-next-match",be.arrowDown,_("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),XPe=_("label.find","Find"),JPe=_("placeholder.find","Find"),eFe=_("label.previousMatchButton","Previous Match"),tFe=_("label.nextMatchButton","Next Match"),iFe=_("label.toggleSelectionFind","Find in Selection"),nFe=_("label.closeButton","Close"),sFe=_("label.replace","Replace"),rFe=_("placeholder.replace","Replace"),oFe=_("label.replaceButton","Replace"),aFe=_("label.replaceAllButton","Replace All"),lFe=_("label.toggleReplaceButton","Toggle Replace"),cFe=_("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",Uh),hFe=_("label.matchesLocation","{0} of {1}"),dz=_("label.noResults","No results"),qa=419,uFe=275,dFe=uFe-54;let p_=69;const fFe=33,fz="ctrlEnterReplaceAll.windows.donotask",gz=ht?256:2048;class YE{constructor(e){this.afterLineNumber=e,this.heightInPx=fFe,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function pz(i,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionStart>0){i.stopPropagation();return}}function mz(i,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionEnd<t.value.length){i.stopPropagation();return}}class $k extends Qr{constructor(e,t,n,s,r,o,a,l,c){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=n,this._contextViewProvider=s,this._keybindingService=r,this._contextKeyService=o,this._storageService=l,this._notificationService=c,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(fz,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new y0(500),this._register(gt(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(h=>this._onStateChanged(h))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(h=>{if(h.hasChanged(80)&&(this._codeEditor.getOption(80)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),h.hasChanged(129)&&this._tryUpdateWidgetWidth(),h.hasChanged(2)&&this.updateAccessibilitySupport(),h.hasChanged(35)){const u=this._codeEditor.getOption(35).addExtraSpaceOnTop;u&&!this._viewZone&&(this._viewZone=new YE(0),this._showViewZone()),!u&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>qPe(this,void 0,void 0,function*(){if(this._isVisible){let h=yield this._controller.getGlobalBufferTerm();h&&h!==this._state.searchString&&(this._state.change({searchString:h},!1),this._findInput.select())}}))),this._findInputFocused=Vk.bindTo(o),this._findFocusTracker=this._register(ym(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=jP.bindTo(o),this._replaceFocusTracker=this._register(ym(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(35).addExtraSpaceOnTop&&(this._viewZone=new YE(0)),this._applyTheme(a.getColorTheme()),this._register(a.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(h=>{if(h.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return $k.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(80)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=lo(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){let t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Ke)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=p_+"px",this._state.matchesCount>=Uh?this._matchesCount.title=cFe:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=Uh&&(t+="+");let n=String(this._state.matchesPosition);n==="0"&&(n="?"),e=fo(hFe,n,t)}else e=dz;this._matchesCount.appendChild(document.createTextNode(e)),ng(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),p_=Math.max(p_,this._matchesCount.clientWidth)}_getAriaLabel(e,t,n){if(e===dz)return n===""?_("ariaSearchNoResultEmpty","{0} found",e):_("ariaSearchNoResult","{0} found for '{1}'",e,n);if(t){const s=_("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,n,t.startLineNumber+":"+t.startColumn),r=this._codeEditor.getModel();return r&&t.startLineNumber<=r.getLineCount()&&t.startLineNumber>=1?`${r.getLineContent(t.startLineNumber)}, ${s}`:s}return _("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,n)}_updateToggleSelectionFindButton(){let e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,n=this._toggleSelectionFind.checked;this._isVisible&&(n||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let n=!this._codeEditor.getOption(80);this._toggleReplaceBtn.setEnabled(this._isVisible&&n)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(35).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":const n=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=n;break}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(35).seedSearchStringFromSelection&&e){const n=this._codeEditor.getDomNode();if(n){const s=Nn(n),r=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),o=s.left+(r?r.left:0),a=r?r.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const l=zZ(this._domNode).left;o>l&&(t=!1);const c=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());s.left+(c?c.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(35).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const n=this._viewZone;this._viewZoneId!==void 0||!n||this._codeEditor.changeViewZones(s=>{n.heightInPx=this._getHeight(),this._viewZoneId=s.addZone(n),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+n.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(35).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new YE(0));const n=this._viewZone;this._codeEditor.changeViewZones(s=>{if(this._viewZoneId!==void 0){const r=this._getHeight();if(r===n.heightInPx)return;let o=r-n.heightInPx;n.heightInPx=r,s.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o);return}else{let r=this._getHeight();if(r-=this._codeEditor.getOption(74).top,r<=0)return;n.heightInPx=r,this._viewZoneId=s.addZone(n),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+r)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(FM),inputActiveOptionBackground:e.getColor(BM),inputActiveOptionForeground:e.getColor(VM),inputBackground:e.getColor(NQ),inputForeground:e.getColor(MQ),inputBorder:e.getColor(RQ),inputValidationInfoBackground:e.getColor($5),inputValidationInfoForeground:e.getColor(j5),inputValidationInfoBorder:e.getColor(q5),inputValidationWarningBackground:e.getColor(OQ),inputValidationWarningForeground:e.getColor(PQ),inputValidationWarningBorder:e.getColor(FQ),inputValidationErrorBackground:e.getColor(BQ),inputValidationErrorForeground:e.getColor(VQ),inputValidationErrorBorder:e.getColor(WQ)};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}_tryUpdateWidgetWidth(){if(!this._isVisible||!qO(this._domNode))return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const n=e.width,s=e.minimap.minimapWidth;let r=!1,o=!1,a=!1;if(this._resized&&lo(this._domNode)>qa){this._domNode.style.maxWidth=`${n-28-s-15}px`,this._replaceInput.width=lo(this._findInput.domNode);return}if(qa+28+s>=n&&(o=!0),qa+28+s-p_>=n&&(a=!0),qa+28+s-p_>=n+50&&(r=!0),this._domNode.classList.toggle("collapsed-find-widget",r),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",o),!a&&!r&&(this._domNode.style.maxWidth=`${n-28-s-15}px`),this._resized){this._findInput.inputBox.layout();let l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=lo(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const n=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!F.equalsRange(t,n)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(gz|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return pz(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return mz(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(gz|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{On&&Mp&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(_("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(fz,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return pz(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return mz(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new z4(null,this._contextViewProvider,{width:dFe,label:XPe,placeholder:JPe,appendCaseSensitiveLabel:this._keybindingLabelFor(Ht.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(Ht.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(Ht.ToggleRegexCommand),validation:l=>{if(l.length===0||!this._findInput.getRegex())return null;try{return new RegExp(l,"gu"),null}catch(c){return{content:c.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>cz(this._keybindingService)},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(l=>this._onFindInputKeyDown(l))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(l=>{l.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),l.preventDefault())})),this._register(this._findInput.onRegexKeyDown(l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),l.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(l=>{this._tryUpdateHeight()&&this._showViewZone()})),As&&this._register(this._findInput.onMouseDown(l=>this._onFindInputMouseDown(l))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new Hg({label:eFe+this._keybindingLabelFor(Ht.PreviousMatchFindAction),icon:YPe,onTrigger:()=>{this._codeEditor.getAction(Ht.PreviousMatchFindAction).run().then(void 0,Ke)}})),this._nextBtn=this._register(new Hg({label:tFe+this._keybindingLabelFor(Ht.NextMatchFindAction),icon:QPe,onTrigger:()=>{this._codeEditor.getAction(Ht.NextMatchFindAction).run().then(void 0,Ke)}}));let n=document.createElement("div");n.className="find-part",n.appendChild(this._findInput.domNode);const s=document.createElement("div");s.className="find-actions",n.appendChild(s),s.appendChild(this._matchesCount),s.appendChild(this._prevBtn.domNode),s.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new Ow({icon:GPe,title:iFe+this._keybindingLabelFor(Ht.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let l=this._codeEditor.getSelections();l.map(c=>(c.endColumn===1&&c.endLineNumber>c.startLineNumber&&(c=c.setEndPosition(c.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(c.endLineNumber-1))),c.isEmpty()?null:c)).filter(c=>!!c),l.length&&this._state.change({searchScope:l},!0)}}else this._state.change({searchScope:null},!0)})),s.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new Hg({label:nFe+this._keybindingLabelFor(Ht.CloseFindWidgetCommand),icon:tMe,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),l.preventDefault())}})),s.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new H4(null,void 0,{label:sFe,placeholder:rFe,appendPreserveCaseLabel:this._keybindingLabelFor(Ht.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>cz(this._keybindingService)},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(l=>this._onReplaceInputKeyDown(l))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(l=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(l=>{l.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),l.preventDefault())})),this._replaceBtn=this._register(new Hg({label:oFe+this._keybindingLabelFor(Ht.ReplaceOneAction),icon:KPe,onTrigger:()=>{this._controller.replace()},onKeyDown:l=>{l.equals(1026)&&(this._closeBtn.focus(),l.preventDefault())}})),this._replaceAllBtn=this._register(new Hg({label:aFe+this._keybindingLabelFor(Ht.ReplaceAllAction),icon:ZPe,onTrigger:()=>{this._controller.replaceAll()}}));let r=document.createElement("div");r.className="replace-part",r.appendChild(this._replaceInput.domNode);const o=document.createElement("div");o.className="replace-actions",r.appendChild(o),o.appendChild(this._replaceBtn.domNode),o.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new Hg({label:lFe,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=lo(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=`${qa}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(n),this._domNode.appendChild(r),this._resizeSash=new Tn(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let a=qa;this._register(this._resizeSash.onDidStart(()=>{a=lo(this._domNode)})),this._register(this._resizeSash.onDidChange(l=>{this._resized=!0;let c=a+l.startX-l.currentX;if(c<qa)return;const h=parseFloat(YO(this._domNode).maxWidth)||0;c>h||(this._domNode.style.width=`${c}px`,this._isReplaceVisible&&(this._replaceInput.width=lo(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const l=lo(this._domNode);if(l<qa)return;let c=qa;if(!this._resized||l===qa){const h=this._codeEditor.getLayoutInfo();c=h.width-28-h.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${c}px`,this._isReplaceVisible&&(this._replaceInput.width=lo(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}}$k.ID="editor.contrib.findWidget";class Hg extends Qr{constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+oi.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,n=>{this._opts.onTrigger(),n.preventDefault()}),this.onkeydown(this._domNode,n=>{if(n.equals(10)||n.equals(3)){this._opts.onTrigger(),n.preventDefault();return}this._opts.onKeyDown&&this._opts.onKeyDown(n)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...oi.asClassNameArray(hz)),this._domNode.classList.add(...oi.asClassNameArray(uz))):(this._domNode.classList.remove(...oi.asClassNameArray(uz)),this._domNode.classList.add(...oi.asClassNameArray(hz)))}}Jt((i,e)=>{const t=(g,p)=>{p&&e.addRule(`.monaco-editor ${g} { background-color: ${p}; }`)};t(".findMatch",i.getColor(zM)),t(".currentFindMatch",i.getColor(CAe)),t(".findScope",i.getColor(SAe));const n=i.getColor(To);t(".find-widget",n);const s=i.getColor(Nm);s&&e.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${s}; }`);const r=i.getColor(DAe);r&&e.addRule(`.monaco-editor .findMatch { border: 1px ${i.type==="hc"?"dotted":"solid"} ${r}; box-sizing: border-box; }`);const o=i.getColor(xAe);o&&e.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${o}; padding: 1px; box-sizing: border-box; }`);const a=i.getColor(LAe);a&&e.addRule(`.monaco-editor .findScope { border: 1px ${i.type==="hc"?"dashed":"solid"} ${a}; }`);const l=i.getColor(Pi);l&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${l}; }`);const c=i.getColor(eu);c&&e.addRule(`.monaco-editor .find-widget { color: ${c}; }`);const h=i.getColor(nAe);h&&e.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${h}; }`);const u=i.getColor(dAe);if(u)e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${u}; }`);else{const g=i.getColor(jd);g&&e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${g}; }`)}const d=i.getColor(aEe);d&&e.addRule(`
		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: ${d} !important;
		}
	`);const f=i.getColor(vu);f&&e.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${f}; }`)});var QJ=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Ja=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},$m=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const gFe=524288;function U4(i,e="single",t=!1){if(!i.hasModel())return null;const n=i.getSelection();if(e==="single"&&n.startLineNumber===n.endLineNumber||e==="multiple"){if(n.isEmpty()){const s=i.getConfiguredWordAtPosition(n.getStartPosition());if(s&&t===!1)return s.word}else if(i.getModel().getValueLengthInRange(n)<gFe)return i.getModel().getValueInRange(n)}return null}let xr=class XJ extends te{constructor(e,t,n,s){super(),this._editor=e,this._findWidgetVisible=fg.bindTo(t),this._contextKeyService=t,this._storageService=n,this._clipboardService=s,this._updateHistoryDelayer=new y0(500),this._state=this._register(new IPe),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(r=>this._onStateChanged(r))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{let r=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),r&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(35).loop})}))}get editor(){return this._editor}static get(e){return e.getContribution(XJ.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!Vk.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=wa(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e){return $m(this,void 0,void 0,function*(){if(this.disposeModel(),!this._editor.hasModel())return;let t={isRevealed:!0};if(e.seedSearchStringFromSelection==="single"){let n=U4(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);n&&(this._state.isRegex?t.searchString=wa(n):t.searchString=n)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){let n=U4(this._editor,e.seedSearchStringFromSelection);n&&(t.searchString=n)}if(!t.searchString&&e.seedSearchStringFromGlobalClipboard){let n=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;n&&(t.searchString=n)}if(e.forceRevealReplace?t.isReplaceRevealed=!0:this._findWidgetVisible.get()||(t.isReplaceRevealed=!1),e.updateSearchScope){let n=this._editor.getSelections();n.some(s=>!s.isEmpty())&&(t.searchScope=n)}t.loop=e.loop,this._state.change(t,!1),this._model||(this._model=new Fb(this._editor,this._state))})}start(e){return this._start(e)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}getGlobalBufferTerm(){return $m(this,void 0,void 0,function*(){return this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""})}setGlobalBufferTerm(e){this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};xr.ID="editor.contrib.findController";xr=QJ([Ja(1,$e),Ja(2,dg),Ja(3,lg)],xr);let $4=class extends xr{constructor(e,t,n,s,r,o,a,l){super(e,n,a,l),this._contextViewService=t,this._keybindingService=s,this._themeService=r,this._notificationService=o,this._widget=null,this._findOptionsWidget=null}_start(e){const t=Object.create(null,{_start:{get:()=>super._start}});return $m(this,void 0,void 0,function*(){this._widget||this._createFindWidget();const n=this._editor.getSelection();let s=!1;switch(this._editor.getOption(35).autoFindInSelection){case"always":s=!0;break;case"never":s=!1;break;case"multiline":s=!!n&&n.startLineNumber!==n.endLineNumber;break}e.updateSearchScope=s,yield t._start.call(this,e),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())})}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new $k(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new Wk(this._editor,this._state,this._keybindingService,this._themeService))}};$4=QJ([Ja(1,og),Ja(2,$e),Ja(3,Bi),Ja(4,si),Ja(5,Vn),Ja(6,dg),Ja(7,lg)],$4);const pFe=dQ(new uQ({id:Ht.StartFindAction,label:_("startFindAction","Find"),alias:"Find",precondition:xe.or(G.focus,xe.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:Ue.MenubarEditMenu,group:"3_find",title:_({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));pFe.addImplementation(0,(i,e,t)=>{const n=xr.get(e);return n?n.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop}):!1});class mFe extends gi{constructor(){super({id:Ht.StartFindWithSelection,label:_("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return $m(this,void 0,void 0,function*(){let n=xr.get(t);n&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),n.setGlobalBufferTerm(n.getState().searchString))})}}class JJ extends gi{run(e,t){return $m(this,void 0,void 0,function*(){let n=xr.get(t);n&&!this._run(n)&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getState().searchString.length===0&&t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(n))})}}class _Fe extends JJ{constructor(){super({id:Ht.NextMatchFindAction,label:_("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:G.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:xe.and(G.focus,Vk),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}class bFe extends JJ{constructor(){super({id:Ht.PreviousMatchFindAction,label:_("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:G.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:xe.and(G.focus,Vk),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class eee extends gi{run(e,t){return $m(this,void 0,void 0,function*(){let n=xr.get(t);if(!n)return;const s=t.getOption(35).seedSearchStringFromSelection==="selection";let r=null;t.getOption(35).seedSearchStringFromSelection!=="never"&&(r=U4(t,"single",s)),r&&n.setSearchString(r),this._run(n)||(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:s,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(n))})}}class vFe extends eee{constructor(){super({id:Ht.NextSelectionMatchFindAction,label:_("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:G.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class wFe extends eee{constructor(){super({id:Ht.PreviousSelectionMatchFindAction,label:_("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:G.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const yFe=dQ(new uQ({id:Ht.StartFindReplaceAction,label:_("startReplace","Replace"),alias:"Replace",precondition:xe.or(G.focus,xe.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:Ue.MenubarEditMenu,group:"3_find",title:_({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));yFe.addImplementation(0,(i,e,t)=>{if(!e.hasModel()||e.getOption(80))return!1;const n=xr.get(e);if(!n)return!1;const s=e.getSelection(),r=n.isFindInputFocused(),o=!s.isEmpty()&&s.startLineNumber===s.endLineNumber&&e.getOption(35).seedSearchStringFromSelection!=="never"&&!r,a=r||o?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:o?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop})});Ps(xr.ID,$4);rt(mFe);rt(_Fe);rt(bFe);rt(vFe);rt(wFe);const Oa=Zr.bindToContribution(xr.get);pe(new Oa({id:Ht.CloseFindWidgetCommand,precondition:fg,handler:i=>i.closeFindWidget(),kbOpts:{weight:100+5,kbExpr:xe.and(G.focus,xe.not("isComposing")),primary:9,secondary:[1033]}}));pe(new Oa({id:Ht.ToggleCaseSensitiveCommand,precondition:void 0,handler:i=>i.toggleCaseSensitive(),kbOpts:{weight:100+5,kbExpr:G.focus,primary:Xy.primary,mac:Xy.mac,win:Xy.win,linux:Xy.linux}}));pe(new Oa({id:Ht.ToggleWholeWordCommand,precondition:void 0,handler:i=>i.toggleWholeWords(),kbOpts:{weight:100+5,kbExpr:G.focus,primary:Jy.primary,mac:Jy.mac,win:Jy.win,linux:Jy.linux}}));pe(new Oa({id:Ht.ToggleRegexCommand,precondition:void 0,handler:i=>i.toggleRegex(),kbOpts:{weight:100+5,kbExpr:G.focus,primary:eC.primary,mac:eC.mac,win:eC.win,linux:eC.linux}}));pe(new Oa({id:Ht.ToggleSearchScopeCommand,precondition:void 0,handler:i=>i.toggleSearchScope(),kbOpts:{weight:100+5,kbExpr:G.focus,primary:tC.primary,mac:tC.mac,win:tC.win,linux:tC.linux}}));pe(new Oa({id:Ht.TogglePreserveCaseCommand,precondition:void 0,handler:i=>i.togglePreserveCase(),kbOpts:{weight:100+5,kbExpr:G.focus,primary:iC.primary,mac:iC.mac,win:iC.win,linux:iC.linux}}));pe(new Oa({id:Ht.ReplaceOneAction,precondition:fg,handler:i=>i.replace(),kbOpts:{weight:100+5,kbExpr:G.focus,primary:3094}}));pe(new Oa({id:Ht.ReplaceOneAction,precondition:fg,handler:i=>i.replace(),kbOpts:{weight:100+5,kbExpr:xe.and(G.focus,jP),primary:3}}));pe(new Oa({id:Ht.ReplaceAllAction,precondition:fg,handler:i=>i.replaceAll(),kbOpts:{weight:100+5,kbExpr:G.focus,primary:2563}}));pe(new Oa({id:Ht.ReplaceAllAction,precondition:fg,handler:i=>i.replaceAll(),kbOpts:{weight:100+5,kbExpr:xe.and(G.focus,jP),primary:void 0,mac:{primary:2051}}}));pe(new Oa({id:Ht.SelectAllMatchesAction,precondition:fg,handler:i=>i.selectAllMatches(),kbOpts:{weight:100+5,kbExpr:G.focus,primary:515}}));function B0(i,e){const t=e.filter(n=>!i.find(s=>s.equals(n)));if(t.length>=1){const n=t.map(r=>`line ${r.viewState.position.lineNumber} column ${r.viewState.position.column}`).join(", "),s=t.length===1?_("cursorAdded","Cursor added: {0}",n):_("cursorsAdded","Cursors added: {0}",n);Wx(s)}}class CFe extends gi{constructor(){super({id:"editor.action.insertCursorAbove",label:_("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:G.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:Ue.MenubarSelectionMenu,group:"3_multi",title:_({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,n){if(!t.hasModel())return;let s=!0;n&&n.logicalLine===!1&&(s=!1);const r=t._getViewModel();if(r.cursorConfig.readOnly)return;r.pushStackElement();const o=r.getCursorStates();r.setCursorStates(n.source,3,fn.addCursorUp(r,o,s)),r.revealTopMostCursor(n.source),B0(o,r.getCursorStates())}}class SFe extends gi{constructor(){super({id:"editor.action.insertCursorBelow",label:_("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:G.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:Ue.MenubarSelectionMenu,group:"3_multi",title:_({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,n){if(!t.hasModel())return;let s=!0;n&&n.logicalLine===!1&&(s=!1);const r=t._getViewModel();if(r.cursorConfig.readOnly)return;r.pushStackElement();const o=r.getCursorStates();r.setCursorStates(n.source,3,fn.addCursorDown(r,o,s)),r.revealBottomMostCursor(n.source),B0(o,r.getCursorStates())}}class xFe extends gi{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:_("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:G.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:Ue.MenubarSelectionMenu,group:"3_multi",title:_({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,n){if(!e.isEmpty()){for(let s=e.startLineNumber;s<e.endLineNumber;s++){let r=t.getLineMaxColumn(s);n.push(new Ve(s,r,s,r))}e.endColumn>1&&n.push(new Ve(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const n=t.getModel(),s=t.getSelections(),r=t._getViewModel(),o=r.getCursorStates();let a=[];s.forEach(l=>this.getCursorsForSelection(l,n,a)),a.length>0&&t.setSelections(a),B0(o,r.getCursorStates())}}class DFe extends gi{constructor(){super({id:"editor.action.addCursorsToBottom",label:_("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),s=t.getModel().getLineCount();let r=[];for(let l=n[0].startLineNumber;l<=s;l++)r.push(new Ve(l,n[0].startColumn,l,n[0].endColumn));const o=t._getViewModel(),a=o.getCursorStates();r.length>0&&t.setSelections(r),B0(a,o.getCursorStates())}}class LFe extends gi{constructor(){super({id:"editor.action.addCursorsToTop",label:_("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections();let s=[];for(let a=n[0].startLineNumber;a>=1;a--)s.push(new Ve(a,n[0].startColumn,a,n[0].endColumn));const r=t._getViewModel(),o=r.getCursorStates();s.length>0&&t.setSelections(s),B0(o,r.getCursorStates())}}class sC{constructor(e,t,n){this.selections=e,this.revealRange=t,this.revealScrollType=n}}class b1{constructor(e,t,n,s,r,o,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=n,this.searchText=s,this.wholeWord=r,this.matchCase=o,this.currentMatch=a}static create(e,t){if(!e.hasModel())return null;const n=t.getState();if(!e.hasTextFocus()&&n.isRevealed&&n.searchString.length>0)return new b1(e,t,!1,n.searchString,n.wholeWord,n.matchCase,null);let s=!1,r,o;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(s=!0,r=!0,o=!0):(r=n.wholeWord,o=n.matchCase);const l=e.getSelection();let c,h=null;if(l.isEmpty()){const u=e.getConfiguredWordAtPosition(l.getStartPosition());if(!u)return null;c=u.word,h=new Ve(l.startLineNumber,u.startColumn,l.startLineNumber,u.endColumn)}else c=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new b1(e,t,s,c,r,o,h)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new sC(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new sC(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const s=this.currentMatch;return this.currentMatch=null,s}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(115):null,!1);return n?new Ve(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new sC(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new sC(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const s=this.currentMatch;return this.currentMatch=null,s}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(115):null,!1);return n?new Ve(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}selectAll(){return this._editor.hasModel()?(this.findController.highlightFindOptions(),this._editor.getModel().findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(115):null,!1,1073741824)):[]}}class Of extends te{constructor(e){super(),this._sessionDispose=this._register(new de),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}static get(e){return e.getContribution(Of.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=b1.create(this._editor,e);if(!t)return;this._session=t;const n={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(n.wholeWordOverride=1,n.matchCaseOverride=1,n.isRegexOverride=2),e.getState().change(n,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(s=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(s=>{(s.matchCase||s.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const n=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return n?new Ve(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const s=e.getState().matchCase;if(!tee(this._editor.getModel(),t,s)){const o=this._editor.getModel();let a=[];for(let l=0,c=t.length;l<c;l++)a[l]=this._expandEmptyToWord(o,t[l]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const n=e.getState();if(n.isRevealed&&n.searchString.length>0&&n.isRegex)t=this._editor.getModel().findMatches(n.searchString,!0,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(115):null,!1,1073741824);else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll()}if(n.searchScope){const s=n.searchScope;let r=[];t.forEach(o=>{s.forEach(a=>{o.range.endLineNumber<=a.endLineNumber&&o.range.startLineNumber>=a.startLineNumber&&r.push(o)})}),t=r}if(t.length>0){const s=this._editor.getSelection();for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a.range.intersectRanges(s)){t[r]=t[0],t[0]=a;break}}this._setSelections(t.map(r=>new Ve(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn)))}}}Of.ID="editor.contrib.multiCursorController";class V0 extends gi{run(e,t){const n=Of.get(t);if(!n)return;const s=xr.get(t);if(!s)return;const r=t._getViewModel();if(r){const o=r.getCursorStates();this._run(n,s),B0(o,r.getCursorStates())}}}class kFe extends V0{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:_("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:G.focus,primary:2082,weight:100},menuOpts:{menuId:Ue.MenubarSelectionMenu,group:"3_multi",title:_({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class AFe extends V0{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:_("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:Ue.MenubarSelectionMenu,group:"3_multi",title:_({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class EFe extends V0{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:_("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:G.focus,primary:Ns(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class IFe extends V0{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:_("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class TFe extends V0{constructor(){super({id:"editor.action.selectHighlights",label:_("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:G.focus,primary:3114,weight:100},menuOpts:{menuId:Ue.MenubarSelectionMenu,group:"3_multi",title:_({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class NFe extends V0{constructor(){super({id:"editor.action.changeAll",label:_("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:xe.and(G.writable,G.editorTextFocus),kbOpts:{kbExpr:G.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class _z{constructor(e,t,n,s){this.searchText=e,this.matchCase=t,this.wordSeparators=n,this.modelVersionId=s}static softEquals(e,t){return!e&&!t?!0:!e||!t?!1:e.searchText===t.searchText&&e.matchCase===t.matchCase&&e.wordSeparators===t.wordSeparators&&e.modelVersionId===t.modelVersionId}}class Pc extends te{constructor(e){super(),this.editor=e,this._isEnabled=e.getOption(96),this.decorations=[],this.updateSoon=this._register(new fi(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(t=>{this._isEnabled=e.getOption(96)})),this._register(e.onDidChangeCursorSelection(t=>{this._isEnabled&&(t.selection.isEmpty()?t.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(t=>{this._setState(null)})),this._register(e.onDidChangeModelContent(t=>{this._isEnabled&&this.updateSoon.schedule()})),this._register(xr.get(e).getState().onFindReplaceStateChange(t=>{this._update()}))}_update(){this._setState(Pc._createState(this._isEnabled,this.editor))}static _createState(e,t){if(!e||!t.hasModel())return null;const n=t.getSelection();if(n.startLineNumber!==n.endLineNumber)return null;const s=Of.get(t);if(!s)return null;const r=xr.get(t);if(!r)return null;let o=s.getSession(r);if(!o){const c=t.getSelections();if(c.length>1){const u=r.getState().matchCase;if(!tee(t.getModel(),c,u))return null}o=b1.create(t,r)}if(!o||o.currentMatch||/^[ \t]+$/.test(o.searchText)||o.searchText.length>200)return null;const a=r.getState(),l=a.matchCase;if(a.isRevealed){let c=a.searchString;l||(c=c.toLowerCase());let h=o.searchText;if(l||(h=h.toLowerCase()),c===h&&o.matchCase===a.matchCase&&o.wholeWord===a.wholeWord&&!a.isRegex)return null}return new _z(o.searchText,o.matchCase,o.wholeWord?t.getOption(115):null,t.getModel().getVersionId())}_setState(e){if(_z.softEquals(this.state,e)){this.state=e;return}if(this.state=e,!this.state){this.decorations=this.editor.deltaDecorations(this.decorations,[]);return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const n=Cx.has(t)&&this.editor.getOption(71);let s=t.findMatches(this.state.searchText,!0,!1,this.state.matchCase,this.state.wordSeparators,!1).map(l=>l.range);s.sort(F.compareRangesUsingStarts);let r=this.editor.getSelections();r.sort(F.compareRangesUsingStarts);let o=[];for(let l=0,c=0,h=s.length,u=r.length;l<h;){const d=s[l];if(c>=u)o.push(d),l++;else{const f=F.compareRangesUsingStarts(d,r[c]);f<0?((r[c].isEmpty()||!F.areIntersecting(d,r[c]))&&o.push(d),l++):(f>0||l++,c++)}}const a=o.map(l=>({range:l,options:n?Pc._SELECTION_HIGHLIGHT:Pc._SELECTION_HIGHLIGHT_OVERVIEW}));this.decorations=this.editor.deltaDecorations(this.decorations,a)}dispose(){this._setState(null),super.dispose()}}Pc.ID="editor.contrib.selectionHighlighter";Pc._SELECTION_HIGHLIGHT_OVERVIEW=lt.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",minimap:{color:dr(fEe),position:Sl.Inline},overviewRuler:{color:dr(dEe),position:Il.Center}});Pc._SELECTION_HIGHLIGHT=lt.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"});function tee(i,e,t){const n=bz(i,e[0],!t);for(let s=1,r=e.length;s<r;s++){const o=e[s];if(o.isEmpty())return!1;const a=bz(i,o,!t);if(n!==a)return!1}return!0}function bz(i,e,t){const n=i.getValueInRange(e);return t?n.toLowerCase():n}Ps(Of.ID,Of);Ps(Pc.ID,Pc);rt(CFe);rt(SFe);rt(xFe);rt(kFe);rt(AFe);rt(EFe);rt(IFe);rt(TFe);rt(NFe);rt(DFe);rt(LFe);const MFe=V("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hc:"#A0A0A0"},_("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class RFe extends gi{constructor(){super({id:"editor.action.jumpToBracket",label:_("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:G.editorTextFocus,primary:3160,weight:100}})}run(e,t){let n=pa.get(t);n&&n.jumpToBracket()}}class OFe extends gi{constructor(){super({id:"editor.action.selectToBracket",label:_("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,n){const s=pa.get(t);if(!s)return;let r=!0;n&&n.selectBrackets===!1&&(r=!1),s.selectToBracket(r)}}class PFe{constructor(e,t,n){this.position=e,this.brackets=t,this.options=n}}class pa extends te{constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=[],this._updateBracketsSoon=this._register(new fi(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(63),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._decorations=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(63)&&(this._matchBrackets=this._editor.getOption(63),this._decorations=this._editor.deltaDecorations(this._decorations,[]),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}static get(e){return e.getContribution(pa.ID)}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(n=>{const s=n.getStartPosition(),r=e.matchBracket(s);let o=null;if(r)r[0].containsPosition(s)?o=r[1].getStartPosition():r[1].containsPosition(s)&&(o=r[0].getStartPosition());else{const a=e.findEnclosingBrackets(s);if(a)o=a[0].getStartPosition();else{const l=e.findNextBracket(s);l&&l.range&&(o=l.range.getStartPosition())}}return o?new Ve(o.lineNumber,o.column,o.lineNumber,o.column):new Ve(s.lineNumber,s.column,s.lineNumber,s.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=[];this._editor.getSelections().forEach(s=>{const r=s.getStartPosition();let o=t.matchBracket(r);if(!o&&(o=t.findEnclosingBrackets(r),!o)){const c=t.findNextBracket(r);c&&c.range&&(o=t.matchBracket(c.range.getStartPosition()))}let a=null,l=null;if(o){o.sort(F.compareRangesUsingStarts);const[c,h]=o;if(a=e?c.getStartPosition():c.getEndPosition(),l=e?h.getEndPosition():h.getStartPosition(),h.containsPosition(r)){const u=a;a=l,l=u}}a&&l&&n.push(new Ve(a.lineNumber,a.column,l.lineNumber,l.column))}),n.length>0&&(this._editor.setSelections(n),this._editor.revealRange(n[0]))}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();let e=[],t=0;for(const n of this._lastBracketsData){let s=n.brackets;s&&(e[t++]={range:s[0],options:n.options},e[t++]={range:s[1],options:n.options})}this._decorations=this._editor.deltaDecorations(this._decorations,e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),n=t.getVersionId();let s=[];this._lastVersionId===n&&(s=this._lastBracketsData);let r=[],o=0;for(let u=0,d=e.length;u<d;u++){let f=e[u];f.isEmpty()&&(r[o++]=f.getStartPosition())}r.length>1&&r.sort(q.compare);let a=[],l=0,c=0,h=s.length;for(let u=0,d=r.length;u<d;u++){let f=r[u];for(;c<h&&s[c].position.isBefore(f);)c++;if(c<h&&s[c].position.equals(f))a[l++]=s[c];else{let g=t.matchBracket(f),p=pa._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!g&&this._matchBrackets==="always"&&(g=t.findEnclosingBrackets(f,20),p=pa._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new PFe(f,g,p)}}this._lastBracketsData=a,this._lastVersionId=n}}pa.ID="editor.contrib.bracketMatchingController";pa._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=lt.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:dr(MFe),position:Il.Center}});pa._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=lt.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});Ps(pa.ID,pa);rt(OFe);rt(RFe);Jt((i,e)=>{const t=i.getColor(REe);t&&e.addRule(`.monaco-editor .bracket-match { background-color: ${t}; }`);const n=i.getColor(OEe);n&&e.addRule(`.monaco-editor .bracket-match { border: 1px solid ${n}; }`)});da.appendMenuItem(Ue.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:_({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});function j4(i,e){return!!i[e]}class QE{constructor(e,t){this.target=e.target,this.hasTriggerModifier=j4(e.event,t.triggerModifier),this.hasSideBySideModifier=j4(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class vz{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=j4(e,t.triggerModifier)}}class rC{constructor(e,t,n,s){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=n,this.triggerSideBySideModifier=s}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function wz(i){return i==="altKey"?ht?new rC(57,"metaKey",6,"altKey"):new rC(5,"ctrlKey",6,"altKey"):ht?new rC(6,"altKey",57,"metaKey"):new rC(6,"altKey",5,"ctrlKey")}class FFe extends te{constructor(e){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new z),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new z),this.onExecute=this._onExecute.event,this._onCancel=this._register(new z),this.onCancel=this._onCancel.event,this._editor=e,this._opts=wz(this._editor.getOption(69)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(t=>{if(t.hasChanged(69)){const n=wz(this._editor.getOption(69));if(this._opts.equals(n))return;this._opts=n,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(t=>this._onEditorMouseMove(new QE(t,this._opts)))),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(new QE(t,this._opts)))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(new QE(t,this._opts)))),this._register(this._editor.onKeyDown(t=>this._onEditorKeyDown(new vz(t,this._opts)))),this._register(this._editor.onKeyUp(t=>this._onEditorKeyUp(new vz(t,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(t=>this._onDidChangeCursorSelection(t))),this._register(this._editor.onDidChangeModel(t=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(t=>{(t.scrollTopChanged||t.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}var BFe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},td=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Pf=class extends e1{constructor(e,t,n,s,r,o,a,l,c,h){super(e,Object.assign(Object.assign({},n.getRawOptions()),{overflowWidgetsDomNode:n.getOverflowWidgetsDomNode()}),{},s,r,o,a,l,c,h),this._parentEditor=n,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(n.onDidChangeConfiguration(u=>this._onParentConfigurationChanged(u)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){Ma(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};Pf=BFe([td(3,Wt),td(4,ii),td(5,vn),td(6,$e),td(7,si),td(8,Vn),td(9,tr)],Pf);const yz=new Z(new et(0,122,204)),VFe={showArrow:!0,showFrame:!0,className:"",frameColor:yz,arrowColor:yz,keepEditorSelection:!1},WFe="vs.editor.contrib.zoneWidget";class zFe{constructor(e,t,n,s,r,o){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=n,this.heightInLines=s,this._onDomNodeTop=r,this._onComputedHeight=o}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}class HFe{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}class jk{constructor(e){this._editor=e,this._ruleName=jk._IdGenerator.nextId(),this._decorations=[],this._color=null,this._height=-1}dispose(){this.hide(),px(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){px(this._ruleName),eM(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){this._decorations=this._editor.deltaDecorations(this._decorations,[{range:F.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._editor.deltaDecorations(this._decorations,[])}}jk._IdGenerator=new PP(".arrow-decoration-");class UFe{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._positionMarkerId=[],this._viewZone=null,this._disposables=new de,this.container=null,this._isShowing=!1,this.editor=e,this.options=Ih(t),Ma(this.options,VFe,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(n=>{const s=this._getWidth(n);this.domNode.style.width=s+"px",this.domNode.style.left=this._getLeft(n)+"px",this._onWidth(s)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this.editor.deltaDecorations(this._positionMarkerId,[]),this._positionMarkerId=[],this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new jk(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){let e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){let e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){if(this.domNode.style.height=`${e}px`,this.container){let t=e-this._decoratingElementsHeight();this.container.style.height=`${t}px`;const n=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(n))}this._resizeSash&&this._resizeSash.layout()}get position(){const[e]=this._positionMarkerId;if(!e)return;const t=this.editor.getModel();if(!t)return;const n=t.getDecorationRange(e);if(n)return n.getStartPosition()}show(e,t){const n=F.isIRange(e)?F.lift(e):F.fromPositions(e);this._isShowing=!0,this._showImpl(n,t),this._isShowing=!1,this._positionMarkerId=this.editor.deltaDecorations(this._positionMarkerId,[{range:n,options:lt.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()}_decoratingElementsHeight(){let e=this.editor.getOption(58),t=0;if(this.options.showArrow){let n=Math.round(e/3);t+=2*n}if(this.options.showFrame){let n=Math.round(e/9);t+=2*n}return t}_showImpl(e,t){const n=e.getStartPosition(),s=this.editor.getLayoutInfo(),r=this._getWidth(s);this.domNode.style.width=`${r}px`,this.domNode.style.left=this._getLeft(s)+"px";const o=document.createElement("div");o.style.overflow="hidden";const a=this.editor.getOption(58),l=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,l);let c=0,h=0;if(this._arrow&&this.options.showArrow&&(c=Math.round(a/3),this._arrow.height=c,this._arrow.show(n)),this.options.showFrame&&(h=Math.round(a/9)),this.editor.changeViewZones(f=>{this._viewZone&&f.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new zFe(o,n.lineNumber,n.column,t,g=>this._onViewZoneTop(g),g=>this._onViewZoneHeight(g)),this._viewZone.id=f.addZone(this._viewZone),this._overlayWidget=new HFe(WFe+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const f=this.options.frameWidth?this.options.frameWidth:h;this.container.style.borderTopWidth=f+"px",this.container.style.borderBottomWidth=f+"px"}let u=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=c+"px",this.container.style.height=u+"px",this.container.style.overflow="hidden"),this._doLayout(u,r),this.options.keepEditorSelection||this.editor.setSelection(e);const d=this.editor.getModel();if(d){const f=e.endLineNumber+1;f<=d.getLineCount()?this.revealLine(f,!1):this.revealLine(d.getLineCount(),!0)}}revealLine(e,t){t?this.editor.revealLineInCenter(e,0):this.editor.revealLine(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new Tn(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.hide(),this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){let n=(t.currentY-e.startY)/this.editor.getOption(58),s=n<0?Math.ceil(n):Math.floor(n),r=e.heightInLines+s;r>5&&r<35&&this._relayout(r)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}class $Fe extends Am{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new z),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=se(e,ue(".monaco-dropdown")),this._label=se(this._element,ue(".dropdown-label"));let n=t.labelRenderer;n||(n=r=>(r.textContent=t.label||"",null));for(const r of[Ae.CLICK,Ae.MOUSE_DOWN,Ut.Tap])this._register(ne(this.element,r,o=>Et.stop(o,!0)));for(const r of[Ae.MOUSE_DOWN,Ut.Tap])this._register(ne(this._label,r,o=>{o instanceof MouseEvent&&o.detail>1||(this.visible?this.hide():this.show())}));this._register(ne(this._label,Ae.KEY_UP,r=>{const o=new li(r);(o.equals(3)||o.equals(10))&&(Et.stop(r,!0),this.visible?this.hide():this.show())}));const s=n(this._label);s&&this._register(s),this._register(kt.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class jFe extends $Fe{constructor(e,t){super(e,t),this._actions=[],this._contextMenuProvider=t.contextMenuProvider,this.actions=t.actions||[],this.actionProvider=t.actionProvider,this.menuClassName=t.menuClassName||"",this.menuAsChild=!!t.menuAsChild}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:e=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class iee extends Yd{constructor(e,t,n,s=Object.create(null)){super(null,e,s),this.actionItem=null,this._onDidChangeVisibility=this._register(new z),this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=s,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=r=>{this.element=se(r,ue("a.action-label"));let o=[];return typeof this.options.classNames=="string"?o=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(o=this.options.classNames),o.find(a=>a==="icon")||o.push("codicon"),this.element.classList.add(...o),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",null},n=Array.isArray(this.menuActionsOrProvider),s={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new jFe(e,s)),this._register(this.dropdownMenu.onDidChangeVisibility(r=>{var o;(o=this.element)===null||o===void 0||o.setAttribute("aria-expanded",`${r}`),this._onDidChangeVisibility.fire(r)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const r=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return r.options.anchorAlignmentProvider()}})}this.updateEnabled()}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}updateEnabled(){var e,t;const n=!this.getAction().enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",n),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",n)}}var KP=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},il=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},nee=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function qFe(i,e,t,n,s,r,o){const a=i.getActions(e);return KFe(a,t,!1,typeof n=="string"?c=>c===n:n,s,r,o),GFe(a)}function GFe(i){const e=new de;for(const[,t]of i)for(const n of t)e.add(n);return e}function KFe(i,e,t,n=a=>a==="navigation",s=Number.MAX_SAFE_INTEGER,r=()=>!1,o=!1){let a,l;Array.isArray(e)?(a=e,l=e):(a=e.primary,l=e.secondary);const c=new Set;for(const[h,u]of i){let d;n(h)?(d=a,d.length>0&&o&&d.push(new ha)):(d=l,d.length>0&&d.push(new ha));for(let f of u){t&&(f=f instanceof _u&&f.alt?f.alt:f);const g=d.push(f);f instanceof E5&&c.add({group:h,action:f,index:g-1})}}for(const{group:h,action:u,index:d}of c){const f=n(h)?a:l,g=u.actions;(g.length<=1||f.length+g.length-2<=s)&&r(u,h,f.length)&&f.splice(d,1,...g)}if(a!==l&&a.length>s){const h=a.splice(s,a.length-s);l.unshift(...h,new ha)}}let jm=class extends uP{constructor(e,t,n,s,r){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable}),this._keybindingService=n,this._notificationService=s,this._contextKeyService=r,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new Lr),this._altKey=Ld.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(e){return nee(this,void 0,void 0,function*(){e.preventDefault(),e.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}})}render(e){super.render(e),e.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);let t=!1,n=this._altKey.keyStatus.altKey||(On||As)&&this._altKey.keyStatus.shiftKey;const s=()=>{const r=t&&n;r!==this._wantsAltCommand&&(this._wantsAltCommand=r,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._menuItemAction.alt&&this._register(this._altKey.event(r=>{n=r.altKey||(On||As)&&r.shiftKey,s()})),this._register(ne(e,"mouseleave",r=>{t=!1,s()})),this._register(ne(e,"mouseenter",r=>{t=!0,s()}))}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}updateTooltip(){if(this.label){const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),n=this._commandAction.tooltip||this._commandAction.label;let s=t?_("titleAndKb","{0} ({1})",n,t):n;if(!this._wantsAltCommand&&this._menuItemAction.alt){const r=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,o=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),a=o&&o.getLabel(),l=a?_("titleAndKb","{0} ({1})",r,a):r;s+=`
[${k5.modifierLabels[po].altKey}] ${l}`}this.label.title=s}}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){var t;this._itemClassDispose.value=void 0;const{element:n,label:s}=this;if(!n||!s)return;const r=this._commandAction.checked&&(!((t=e.toggled)===null||t===void 0)&&t.icon)?e.toggled.icon:e.icon;if(r)if(oi.isThemeIcon(r)){const o=oi.asClassNameArray(r);s.classList.add(...o),this._itemClassDispose.value=gt(()=>{s.classList.remove(...o)})}else r.light&&s.style.setProperty("--menu-entry-icon-light",jc(r.light)),r.dark&&s.style.setProperty("--menu-entry-icon-dark",jc(r.dark)),s.classList.add("icon"),this._itemClassDispose.value=gt(()=>{s.classList.remove("icon"),s.style.removeProperty("--menu-entry-icon-light"),s.style.removeProperty("--menu-entry-icon-dark")})}};jm=KP([il(2,Bi),il(3,Vn),il(4,$e)],jm);let q4=class extends iee{constructor(e,t,n){var s,r;const o=Object.assign({},t??Object.create(null),{menuAsChild:(s=t==null?void 0:t.menuAsChild)!==null&&s!==void 0?s:!1,classNames:(r=t==null?void 0:t.classNames)!==null&&r!==void 0?r:oi.isThemeIcon(e.item.icon)?oi.asClassName(e.item.icon):void 0});super(e,{getActions:()=>e.actions},n,o)}render(e){if(super.render(e),this.element){e.classList.add("menu-entry");const{icon:t}=this._action.item;t&&!oi.isThemeIcon(t)&&(this.element.classList.add("icon"),t.light&&this.element.style.setProperty("--menu-entry-icon-light",jc(t.light)),t.dark&&this.element.style.setProperty("--menu-entry-icon-dark",jc(t.dark)))}}};q4=KP([il(2,ag)],q4);let G4=class extends Yd{constructor(e,t,n,s,r,o,a,l){var c,h,u;super(null,e),this._keybindingService=n,this._notificationService=s,this._contextMenuService=r,this._menuService=o,this._instaService=a,this._storageService=l,this._container=null,this._storageKey=`${e.item.submenu._debugName}_lastActionId`;let d,f=l.get(this._storageKey,1);f&&(d=e.actions.find(p=>f===p.id)),d||(d=e.actions[0]),this._defaultAction=this._instaService.createInstance(jm,d,void 0);const g=Object.assign({},t??Object.create(null),{menuAsChild:(c=t==null?void 0:t.menuAsChild)!==null&&c!==void 0?c:!0,classNames:(h=t==null?void 0:t.classNames)!==null&&h!==void 0?h:["codicon","codicon-chevron-down"],actionRunner:(u=t==null?void 0:t.actionRunner)!==null&&u!==void 0?u:new Am});this._dropdown=new iee(e,e.actions,this._contextMenuService,g),this._dropdown.actionRunner.onDidRun(p=>{p.action instanceof _u&&this.update(p.action)})}update(e){this._storageService.store(this._storageKey,e.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(jm,e,void 0),this._defaultAction.actionRunner=new class extends Am{runAction(t,n){return nee(this,void 0,void 0,function*(){yield t.run(void 0)})}},this._container&&this._defaultAction.render(wSe(this._container,ue(".action-container")))}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=ue(".action-container");this._defaultAction.render(se(this._container,t)),this._register(ne(t,Ae.KEY_DOWN,s=>{const r=new li(s);r.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),r.stopPropagation())}));const n=ue(".dropdown-action-container");this._dropdown.render(se(this._container,n)),this._register(ne(n,Ae.KEY_DOWN,s=>{var r;const o=new li(s);o.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(r=this._defaultAction.element)===null||r===void 0||r.focus(),o.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};G4=KP([il(2,Bi),il(3,Vn),il(4,ag),il(5,L0),il(6,Wt),il(7,dg)],G4);function ZFe(i,e,t){return e instanceof _u?i.createInstance(jm,e,void 0):e instanceof lQ?e.item.rememberDefaultAction?i.createInstance(G4,e,t):i.createInstance(q4,e,t):void 0}var see=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ree=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const oee=mt("IPeekViewService");eg(oee,class{constructor(){this._widgets=new Map}addExclusiveWidget(i,e){const t=this._widgets.get(i);t&&(t.listener.dispose(),t.widget.dispose());const n=()=>{const s=this._widgets.get(i);s&&s.widget===e&&(s.listener.dispose(),this._widgets.delete(i))};this._widgets.set(i,{widget:e,listener:e.onDidClose(n)})}});var Qs;(function(i){i.inPeekEditor=new De("inReferenceSearchEditor",!0,_("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),i.notInPeekEditor=i.inPeekEditor.toNegated()})(Qs||(Qs={}));let v1=class{constructor(e,t){e instanceof Pf&&Qs.inPeekEditor.bindTo(t)}dispose(){}};v1.ID="editor.contrib.referenceController";v1=see([ree(1,$e)],v1);Ps(v1.ID,v1);function YFe(i){let e=i.get(ii).getFocusedCodeEditor();return e instanceof Pf?e.getParentEditor():e}const QFe={headerBackgroundColor:Z.white,primaryHeadingColor:Z.fromHex("#333333"),secondaryHeadingColor:Z.fromHex("#6c6c6cb3")};let AD=class extends UFe{constructor(e,t,n){super(e,t),this.instantiationService=n,this._onDidClose=new z,this.onDidClose=this._onDidClose.event,Ma(this.options,QFe,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){let t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();let e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=ue(".head"),this._bodyElement=ue(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){const n=ue(".peekview-title");this.options.supportOnTitleClick&&(n.classList.add("clickable"),Ji(n,"click",o=>this._onTitleClick(o))),se(this._headElement,n),this._fillTitleIcon(n),this._primaryHeading=ue("span.filename"),this._secondaryHeading=ue("span.dirname"),this._metaHeading=ue("span.meta"),se(n,this._primaryHeading,this._secondaryHeading,this._metaHeading);const s=ue(".peekview-actions");se(this._headElement,s);const r=this._getActionBarOptions();this._actionbarWidget=new Gc(s,r),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new Io("peekview.close",_("label.close","Close"),be.close.classNames,!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:ZFe.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:Rn(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,ur(this._metaHeading)):Cs(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const n=Math.ceil(this.editor.getOption(58)*1.2),s=Math.round(e-(n+2));this._doLayoutHead(n,t),this._doLayoutBody(s,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};AD=see([ree(2,Wt)],AD);const XFe=V("peekViewTitle.background",{dark:$t(fa,.1),light:$t(fa,.1),hc:null},_("peekViewTitleBackground","Background color of the peek view title area.")),aee=V("peekViewTitleLabel.foreground",{dark:Z.white,light:Z.black,hc:Z.white},_("peekViewTitleForeground","Color of the peek view title.")),lee=V("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hc:"#FFFFFF99"},_("peekViewTitleInfoForeground","Color of the peek view title info.")),JFe=V("peekView.border",{dark:fa,light:fa,hc:Pi},_("peekViewBorder","Color of the peek view borders and arrow.")),cee=V("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hc:Z.black},_("peekViewResultsBackground","Background color of the peek view result list.")),eBe=V("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hc:Z.white},_("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),tBe=V("peekViewResult.fileForeground",{dark:Z.white,light:"#1E1E1E",hc:Z.white},_("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),iBe=V("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hc:null},_("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),nBe=V("peekViewResult.selectionForeground",{dark:Z.white,light:"#6C6C6C",hc:Z.white},_("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list.")),cS=V("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hc:Z.black},_("peekViewEditorBackground","Background color of the peek view editor.")),sBe=V("peekViewEditorGutter.background",{dark:cS,light:cS,hc:cS},_("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),rBe=V("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hc:null},_("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),oBe=V("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hc:null},_("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),aBe=V("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hc:Is},_("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));var lBe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class Du{constructor(e,t,n,s){this.isProviderFirst=e,this.parent=t,this.link=n,this._rangeCallback=s,this.id=vJ.nextId()}get uri(){return this.link.uri}get range(){var e,t;return(t=(e=this._range)!==null&&e!==void 0?e:this.link.targetSelectionRange)!==null&&t!==void 0?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=(e=this.parent.getPreview(this))===null||e===void 0?void 0:e.preview(this.range);return t?_({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",ya(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):_("aria.oneReference","symbol in {0} on line {1} at column {2}",ya(this.uri),this.range.startLineNumber,this.range.startColumn)}}class cBe{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const n=this._modelReference.object.textEditorModel;if(!n)return;const{startLineNumber:s,startColumn:r,endLineNumber:o,endColumn:a}=e,l=n.getWordUntilPosition({lineNumber:s,column:r-t}),c=new F(s,l.startColumn,s,r),h=new F(o,a,o,1073741824),u=n.getValueInRange(c).replace(/^\s+/,""),d=n.getValueInRange(e),f=n.getValueInRange(h).replace(/\s+$/,"");return{value:u+d+f,highlight:{start:u.length,end:u.length+d.length}}}}class w1{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new rs}dispose(){at(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?_("aria.fileReferences.1","1 symbol in {0}, full path {1}",ya(this.uri),this.uri.fsPath):_("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,ya(this.uri),this.uri.fsPath)}resolve(e){return lBe(this,void 0,void 0,function*(){if(this._previews.size!==0)return this;for(let t of this.children)if(!this._previews.has(t.uri))try{const n=yield e.createModelReference(t.uri);this._previews.set(t.uri,new cBe(n))}catch(n){Ke(n)}return this})}}class Ys{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new z,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[n]=e;e.sort(Ys._compareReferences);let s;for(let r of e)if((!s||!Es.isEqual(s.uri,r.uri,!0))&&(s=new w1(this,r.uri),this.groups.push(s)),s.children.length===0||Ys._compareReferences(r,s.children[s.children.length-1])!==0){const o=new Du(n===r,s,r,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(o),s.children.push(o)}}dispose(){at(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new Ys(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?_("aria.result.0","No results found"):this.references.length===1?_("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?_("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):_("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:n}=e,s=n.children.indexOf(e),r=n.children.length,o=n.parent.groups.length;return o===1||t&&s+1<r||!t&&s>0?(t?s=(s+1)%r:s=(s+r-1)%r,n.children[s]):(s=n.parent.groups.indexOf(n),t?(s=(s+1)%o,n.parent.groups[s].children[0]):(s=(s+o-1)%o,n.parent.groups[s].children[n.parent.groups[s].children.length-1]))}nearestReference(e,t){const n=this.references.map((s,r)=>({idx:r,prefixLen:Av(s.uri.toString(),e.toString()),offsetDist:Math.abs(s.range.startLineNumber-t.lineNumber)*100+Math.abs(s.range.startColumn-t.column)})).sort((s,r)=>s.prefixLen>r.prefixLen?-1:s.prefixLen<r.prefixLen?1:s.offsetDist<r.offsetDist?-1:s.offsetDist>r.offsetDist?1:0)[0];if(n)return this.references[n.idx]}referenceAt(e,t){for(const n of this.references)if(n.uri.toString()===e.toString()&&F.containsPosition(n.range,t))return n}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return Es.compare(e.uri,t.uri)||F.compareRangesUsingStarts(e.range,t.range)}}function hee(i){if(!i)return;typeof i=="string"&&(i=We.file(i));const e=ya(i)||(i.scheme===it.file?i.fsPath:i.path);return On&&JSe(e)?K4(e):e}function K4(i){return eY(i)?i.charAt(0).toUpperCase()+i.slice(1):i}var qk=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},y1=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Z4=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof Ys||e instanceof w1}getChildren(e){if(e instanceof Ys)return e.groups;if(e instanceof w1)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};Z4=qk([y1(0,Tl)],Z4);class hBe{getHeight(){return 23}getTemplateId(e){return e instanceof w1?C1.id:Fw.id}}let Y4=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof Du){const n=(t=e.parent.getPreview(e))===null||t===void 0?void 0:t.preview(e.range);if(n)return n.value}return ya(e.uri)}};Y4=qk([y1(0,Bi)],Y4);class uBe{getId(e){return e instanceof Du?e.id:e.uri}}let Q4=class extends te{constructor(e,t,n){super(),this._uriLabel=t;const s=document.createElement("div");s.classList.add("reference-file"),this.file=this._register(new BP(s,{supportHighlights:!0})),this.badge=new A4(se(s,ue(".count"))),this._register(z4e(this.badge,n)),e.appendChild(s)}set(e,t){let n=r5(e.uri);this.file.setLabel(hee(e.uri),this._uriLabel.getUriLabel(n,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});const s=e.children.length;this.badge.setCount(s),s>1?this.badge.setTitleFormat(_("referencesCount","{0} references",s)):this.badge.setTitleFormat(_("referenceCount","{0} reference",s))}};Q4=qk([y1(1,Ew),y1(2,si)],Q4);let C1=class uee{constructor(e){this._instantiationService=e,this.templateId=uee.id}renderTemplate(e){return this._instantiationService.createInstance(Q4,e)}renderElement(e,t,n){n.set(e.element,vP(e.filterData))}disposeTemplate(e){e.dispose()}};C1.id="FileReferencesRenderer";C1=qk([y1(0,Wt)],C1);class dBe{constructor(e){this.label=new Su(e,!1)}set(e,t){var n;const s=(n=e.parent.getPreview(e))===null||n===void 0?void 0:n.preview(e.range);if(!s||!s.value)this.label.set(`${ya(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:r,highlight:o}=s;t&&!ga.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(r,vP(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(r,[o]))}}}class Fw{constructor(){this.templateId=Fw.id}renderTemplate(e){return new dBe(e)}renderElement(e,t,n){n.set(e.element,e.filterData)}disposeTemplate(){}}Fw.id="OneReferenceRenderer";class fBe{getWidgetAriaLabel(){return _("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var gBe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},nc=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Cz=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class Gk{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new de,this._callOnModelChange=new de,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e){for(let t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],n=[];for(let r=0,o=e.children.length;r<o;r++){let a=e.children[r];this._decorationIgnoreSet.has(a.id)||a.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:a.range,options:Gk.DecorationOptions}),n.push(r))}const s=this._editor.deltaDecorations([],t);for(let r=0;r<s.length;r++)this._decorations.set(s[r],e.children[n[r]])}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(let[n,s]of this._decorations){const r=t.getDecorationRange(n);if(!r)continue;let o=!1;if(!F.equalsRange(r,s.range)){if(F.spansMultipleLines(r))o=!0;else{const a=s.range.endColumn-s.range.startColumn,l=r.endColumn-r.startColumn;a!==l&&(o=!0)}o?(this._decorationIgnoreSet.add(s.id),e.push(n)):s.range=r}}for(let n=0,s=e.length;n<s;n++)this._decorations.delete(e[n]);this._editor.deltaDecorations(e,[])}}removeDecorations(){this._editor.deltaDecorations([...this._decorations.keys()],[]),this._decorations.clear()}}Gk.DecorationOptions=lt.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class pBe{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,n;try{const s=JSON.parse(e);t=s.ratio,n=s.heightInLines}catch{}return{ratio:t||.7,heightInLines:n||18}}}class mBe extends C4{}let X4=class extends AD{constructor(e,t,n,s,r,o,a,l,c,h,u,d){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},o),this._defaultTreeKeyboardSupport=t,this.layoutData=n,this._textModelResolverService=r,this._instantiationService=o,this._peekViewService=a,this._uriLabel=l,this._undoRedoService=c,this._keybindingService=h,this._modeService=u,this._languageConfigurationService=d,this._disposeOnNewModel=new de,this._callOnDispose=new de,this._onDidSelectReference=new z,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new Vt(0,0),this._applyTheme(s.getColorTheme()),this._callOnDispose.add(s.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),at(this._preview),at(this._previewNotAvailableMessage),at(this._tree),at(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(JFe)||Z.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(XFe)||Z.transparent,primaryHeadingColor:e.getColor(aee),secondaryHeadingColor:e.getColor(lee)})}show(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=se(e,ue("div.messages")),Cs(this._messageContainer),this._splitView=new sJ(e,{orientation:1}),this._previewContainer=se(e,ue("div.preview.inline"));let t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(Pf,this._previewContainer,t,this.editor),Cs(this._previewContainer),this._previewNotAvailableMessage=new Gr(_("missingPreviewMessage","no preview available"),Gr.DEFAULT_CREATION_OPTIONS,null,null,this._undoRedoService,this._modeService,this._languageConfigurationService),this._treeContainer=se(e,ue("div.ref-tree.inline"));const n={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new fBe,keyboardNavigationLabelProvider:this._instantiationService.createInstance(Y4),identityProvider:new uBe,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:cee}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(Ji(this._treeContainer,"keydown",r=>{r.equals(9)&&(this._keybindingService.dispatchEvent(r,r.target),r.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(mBe,"ReferencesWidget",this._treeContainer,new hBe,[this._instantiationService.createInstance(C1),this._instantiationService.createInstance(Fw)],this._instantiationService.createInstance(Z4),n),this._splitView.addView({onDidChange:ke.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:r=>{this._preview.layout({height:this._dim.height,width:r})}},wD.Distribute),this._splitView.addView({onDidChange:ke.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:r=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${r}px`,this._tree.layout(this._dim.height,r)}},wD.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let s=(r,o)=>{r instanceof Du&&(o==="show"&&this._revealReference(r,!1),this._onDidSelectReference.fire({element:r,kind:o,source:"tree"}))};this._tree.onDidOpen(r=>{r.sideBySide?s(r.element,"side"):r.editorOptions.pinned?s(r.element,"goto"):s(r.element,"show")}),Cs(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new Vt(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=_("noResults","No results"),ur(this._messageContainer),Promise.resolve(void 0)):(Cs(this._messageContainer),this._decorationsManager=new Gk(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:n}=e;if(t.detail!==2)return;const s=this._getFocusedReference();s&&this._onDidSelectReference.fire({element:{uri:s.uri,range:n.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),ur(this._treeContainer),ur(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof Du)return e;if(e instanceof w1&&e.children.length>0)return e.children[0]}revealReference(e){return Cz(this,void 0,void 0,function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})})}_revealReference(e,t){return Cz(this,void 0,void 0,function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==it.inMemory?this.setTitle(iY(e.uri),this._uriLabel.getUriLabel(r5(e.uri))):this.setTitle(_("peekView.alternateTitle","References"));const n=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent),this._tree.reveal(e));const s=yield n;if(!this._model){s.dispose();return}at(this._previewModelReference);const r=s.object;if(r){const o=this._preview.getModel()===r.textEditorModel?0:1,a=F.lift(e.range).collapseToStart();this._previewModelReference=s,this._preview.setModel(r.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,o)}else this._preview.setModel(this._previewNotAvailableMessage),s.dispose()})}};X4=gBe([nc(3,si),nc(4,Tl),nc(5,Wt),nc(6,oee),nc(7,Ew),nc(8,Dw),nc(9,Bi),nc(10,Os),nc(11,Cw)],X4);Jt((i,e)=>{const t=i.getColor(rBe);t&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { background-color: ${t}; }`);const n=i.getColor(oBe);n&&e.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { background-color: ${n}; }`);const s=i.getColor(aBe);s&&e.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { border: 2px solid ${s}; box-sizing: border-box; }`);const r=i.getColor(Is);r&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { border: 1px dotted ${r}; box-sizing: border-box; }`);const o=i.getColor(cee);o&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree { background-color: ${o}; }`);const a=i.getColor(eBe);a&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree { color: ${a}; }`);const l=i.getColor(tBe);l&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .reference-file { color: ${l}; }`);const c=i.getColor(iBe);c&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: ${c}; }`);const h=i.getColor(nBe);h&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: ${h} !important; }`);const u=i.getColor(cS);u&&e.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {	background-color: ${u};}`);const d=i.getColor(sBe);d&&e.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .margin {	background-color: ${d};}`)});var _Be=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Ug=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Sz=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const gg=new De("referenceSearchVisible",!1,_("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let qm=class J4{constructor(e,t,n,s,r,o,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=s,this._notificationService=r,this._instantiationService=o,this._storageService=a,this._configurationService=l,this._disposables=new de,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=gg.bindTo(n)}static get(e){return e.getContribution(J4.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)===null||e===void 0||e.dispose(),(t=this._model)===null||t===void 0||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,n){let s;if(this._widget&&(s=this._widget.position),this.closeWidget(),s&&e.containsPosition(s))return;this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const r="peekViewLayout",o=pBe.fromJSON(this._storageService.get(r,0,"{}"));this._widget=this._instantiationService.createInstance(X4,this._editor,this._defaultTreeKeyboardSupport,o),this._widget.setTitle(_("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(r,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{let{element:c,kind:h}=l;if(c)switch(h){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(c,!1,!1);break;case"side":this.openReference(c,!0,!1);break;case"goto":n?this._gotoReference(c):this.openReference(c,!1,!0);break}}));const a=++this._requestIdPool;t.then(l=>{var c;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(c=this._model)===null||c===void 0||c.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(_("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let h=this._editor.getModel().uri,u=new q(e.startLineNumber,e.startColumn),d=this._model.nearestReference(h,u);if(d)return this._widget.setSelection(d).then(()=>{this._widget&&this._editor.getOption(76)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return Sz(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const n=this._model.nearestReference(this._editor.getModel().uri,t);if(!n)return;const s=this._model.nextOrPreviousReference(n,e),r=this._editor.hasTextFocus(),o=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(s),yield this._gotoReference(s),r?this._editor.focus():this._widget&&o&&this._widget.focusOnPreviewEditor()})}revealReference(e){return Sz(this,void 0,void 0,function*(){!this._editor.hasModel()||!this._model||!this._widget||(yield this._widget.revealReference(e))})}closeWidget(e=!0){var t,n;(t=this._widget)===null||t===void 0||t.dispose(),(n=this._model)===null||n===void 0||n.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const t=F.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:t}},this._editor).then(n=>{var s;if(this._ignoreModelChangeEvent=!1,!n||!this._widget){this.closeWidget();return}if(this._editor===n)this._widget.show(t),this._widget.focusOnReferenceTree();else{const r=J4.get(n),o=this._model.clone();this.closeWidget(),n.focus(),r.toggleWidget(t,kr(a=>Promise.resolve(o)),(s=this._peekMode)!==null&&s!==void 0?s:!1)}},n=>{this._ignoreModelChangeEvent=!1,Ke(n)})}openReference(e,t,n){t||this.closeWidget();const{uri:s,range:r}=e;this._editorService.openCodeEditor({resource:s,options:{selection:r,pinned:n}},this._editor,t)}};qm.ID="editor.contrib.referencesController";qm=_Be([Ug(2,$e),Ug(3,ii),Ug(4,Vn),Ug(5,Wt),Ug(6,dg),Ug(7,Fi)],qm);function pg(i,e){const t=YFe(i);if(!t)return;let n=qm.get(t);n&&e(n)}ds.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:Ns(2089,60),when:xe.or(gg,Qs.inPeekEditor),handler(i){pg(i,e=>{e.changeFocusBetweenPreviewAndReferences()})}});ds.registerCommandAndKeybindingRule({id:"goToNextReference",weight:100-10,primary:62,secondary:[70],when:xe.or(gg,Qs.inPeekEditor),handler(i){pg(i,e=>{e.goToNextOrPreviousReference(!0)})}});ds.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:100-10,primary:1086,secondary:[1094],when:xe.or(gg,Qs.inPeekEditor),handler(i){pg(i,e=>{e.goToNextOrPreviousReference(!1)})}});Tt.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");Tt.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");Tt.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");Tt.registerCommand("closeReferenceSearch",i=>pg(i,e=>e.closeWidget()));ds.registerKeybindingRule({id:"closeReferenceSearch",weight:100-101,primary:9,secondary:[1033],when:xe.and(Qs.inPeekEditor,xe.not("config.editor.stablePeek"))});ds.registerKeybindingRule({id:"closeReferenceSearch",weight:200+50,primary:9,secondary:[1033],when:xe.and(gg,xe.not("config.editor.stablePeek"))});ds.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:xe.and(gg,dJ),handler(i){var e;const n=(e=i.get(Xr).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof Du&&pg(i,s=>s.revealReference(n[0]))}});ds.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:xe.and(gg,dJ),handler(i){var e;const n=(e=i.get(Xr).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof Du&&pg(i,s=>s.openReference(n[0],!0,!0))}});Tt.registerCommand("openReference",i=>{var e;const n=(e=i.get(Xr).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof Du&&pg(i,s=>s.openReference(n[0],!1,!0))});var dee=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},F_=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const ZP=new De("hasSymbols",!1,_("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),Kk=mt("ISymbolNavigationService");let e3=class{constructor(e,t,n,s){this._editorService=t,this._notificationService=n,this._keybindingService=s,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=ZP.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)===null||e===void 0||e.dispose(),(t=this._currentMessage)===null||t===void 0||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const n=new t3(this._editorService),s=n.onDidChange(r=>{if(this._ignoreEditorChange)return;const o=this._editorService.getActiveCodeEditor();if(!o)return;const a=o.getModel(),l=o.getPosition();if(!a||!l)return;let c=!1,h=!1;for(const u of t.references)if(tY(u.uri,a.uri))c=!0,h=h||F.containsPosition(u.range,l);else if(c)break;(!c||!h)&&this.reset()});this._currentState=Kh(n,s)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:F.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;(e=this._currentMessage)===null||e===void 0||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),n=t?_("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):_("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(n)}};e3=dee([F_(0,$e),F_(1,ii),F_(2,Vn),F_(3,Bi)],e3);eg(Kk,e3,!0);pe(new class extends Zr{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:ZP,kbOpts:{weight:100,primary:70}})}runEditorCommand(i,e){return i.get(Kk).revealNext(e)}});ds.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:ZP,primary:9,handler(i){i.get(Kk).reset()}});let t3=class{constructor(e){this._listener=new Map,this._disposables=new de,this._onDidChange=new z,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),at(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,Kh(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))===null||t===void 0||t.dispose(),this._listener.delete(e)}};t3=dee([F_(0,ii)],t3);var bBe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},vBe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Mo=class i3{constructor(e,t){this._messageWidget=new Lr,this._messageListeners=new de,this._editor=e,this._visible=i3.MESSAGE_VISIBLE.bindTo(t),this._editorListener=this._editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit())}static get(e){return e.getContribution(i3.ID)}dispose(){this._editorListener.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){ng(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new xz(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(new Ms(()=>this.closeMessage(),3e3));let n;this._messageListeners.add(this._editor.onMouseMove(s=>{s.target.position&&(n?n.containsPosition(s.target.position)||this.closeMessage():n=new F(t.lineNumber-3,1,s.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(xz.fadeOut(this._messageWidget.value))}_onDidAttemptReadOnlyEdit(){this._editor.hasModel()&&this.showMessage(_("editor.readonly","Cannot edit in read-only editor"),this._editor.getPosition())}};Mo.ID="editor.contrib.messageController";Mo.MESSAGE_VISIBLE=new De("messageVisible",!1,_("messageVisible","Whether the editor is currently showing an inline message"));Mo=bBe([vBe(1,$e)],Mo);const wBe=Zr.bindToContribution(Mo.get);pe(new wBe({id:"leaveEditorMessage",precondition:Mo.MESSAGE_VISIBLE,handler:i=>i.closeMessage(),kbOpts:{weight:100+30,primary:9}}));let xz=class{constructor(e,{lineNumber:t,column:n},s){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:n-1},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage");const r=document.createElement("div");r.classList.add("anchor","top"),this._domNode.appendChild(r);const o=document.createElement("div");o.classList.add("message"),o.textContent=s,this._domNode.appendChild(o);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(e){let t;const n=()=>{e.dispose(),clearTimeout(t),e.getDomNode().removeEventListener("animationend",n)};return t=setTimeout(n,110),e.getDomNode().addEventListener("animationend",n),e.getDomNode().classList.add("fadeOut"),{dispose:n}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2]}}afterRender(e){this._domNode.classList.toggle("below",e===2)}};Ps(Mo.ID,Mo);Jt((i,e)=>{const t=i.getColor(q5);if(t){let r=i.type===ua.HIGH_CONTRAST?2:1;e.addRule(`.monaco-editor .monaco-editor-overlaymessage .anchor.below { border-top-color: ${t}; }`),e.addRule(`.monaco-editor .monaco-editor-overlaymessage .anchor.top { border-bottom-color: ${t}; }`),e.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { border: ${r}px solid ${t}; }`)}const n=i.getColor($5);n&&e.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { background-color: ${n}; }`);const s=i.getColor(j5);s&&e.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { color: ${s}; }`)});var fee=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function Bw(i,e,t,n){const r=t.ordered(i).map(o=>Promise.resolve(n(o,i,e)).then(void 0,a=>{Fo(a)}));return Promise.all(r).then(o=>{const a=[];for(let l of o)Array.isArray(l)?a.push(...l):l&&a.push(l);return a})}function YP(i,e,t){return Bw(i,e,Tv,(n,s,r)=>n.provideDefinition(s,r,t))}function gee(i,e,t){return Bw(i,e,Sx,(n,s,r)=>n.provideDeclaration(s,r,t))}function pee(i,e,t){return Bw(i,e,xx,(n,s,r)=>n.provideImplementation(s,r,t))}function mee(i,e,t){return Bw(i,e,Dx,(n,s,r)=>n.provideTypeDefinition(s,r,t))}function Zk(i,e,t,n){return Bw(i,e,yx,(s,r,o)=>fee(this,void 0,void 0,function*(){const a=yield s.provideReferences(r,o,{includeDeclaration:!0},n);if(!t||!a||a.length!==2)return a;const l=yield s.provideReferences(r,o,{includeDeclaration:!1},n);return l&&l.length===1?l:a}))}function Vw(i){return fee(this,void 0,void 0,function*(){const e=yield i(),t=new Ys(e,""),n=t.references.map(s=>s.link);return t.dispose(),n})}A0("_executeDefinitionProvider",(i,e)=>Vw(()=>YP(i,e,Xt.None)));A0("_executeDeclarationProvider",(i,e)=>Vw(()=>gee(i,e,Xt.None)));A0("_executeImplementationProvider",(i,e)=>Vw(()=>pee(i,e,Xt.None)));A0("_executeTypeDefinitionProvider",(i,e)=>Vw(()=>mee(i,e,Xt.None)));A0("_executeReferenceProvider",(i,e)=>Vw(()=>Zk(i,e,!1,Xt.None)));var No=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},XE,JE,eI,tI,iI,nI,sI,rI;da.appendMenuItem(Ue.EditorContext,{submenu:Ue.EditorContextPeek,title:_("peek.submenu","Peek"),group:"navigation",order:100});const _ee=new Set;function Pa(i){const e=new i;return fQ(e),_ee.add(e.id),e}class W0 extends gi{constructor(e,t){super(t),this._configuration=e}run(e,t){if(!t.hasModel())return Promise.resolve(void 0);const n=e.get(Vn),s=e.get(ii),r=e.get(R0),o=e.get(Kk),a=t.getModel(),l=t.getPosition(),c=new GNe(t,5),h=OZ(this._getLocationModel(a,l,c.token),c.token).then(u=>No(this,void 0,void 0,function*(){if(!u||c.token.isCancellationRequested)return;ng(u.ariaMessage);let d;if(u.referenceAt(a.uri,l)){const g=this._getAlternativeCommand(t);g!==this.id&&_ee.has(g)&&(d=t.getAction(g))}const f=u.references.length;if(f===0){if(!this._configuration.muteMessage){const g=a.getWordAtPosition(l);Mo.get(t).showMessage(this._getNoResultFoundMessage(g),l)}}else if(f===1&&d)d.run();else return this._onResult(s,o,t,u)}),u=>{n.error(u)}).finally(()=>{c.dispose()});return r.showWhile(h,250),h}_onResult(e,t,n,s){return No(this,void 0,void 0,function*(){const r=this._getGoToPreference(n);if(!(n instanceof Pf)&&(this._configuration.openInPeek||r==="peek"&&s.references.length>1))this._openInPeek(n,s);else{const o=s.firstReference(),a=s.references.length>1&&r==="gotoAndPeek",l=yield this._openReference(n,e,o,this._configuration.openToSide,!a);a&&l?this._openInPeek(l,s):s.dispose(),r==="goto"&&t.put(o)}})}_openReference(e,t,n,s,r){return No(this,void 0,void 0,function*(){let o;if(zxe(n)&&(o=n.targetSelectionRange),o||(o=n.range),!o)return;const a=yield t.openCodeEditor({resource:n.uri,options:{selection:F.collapseToStart(o),selectionRevealType:3}},e,s);if(a){if(r){const l=a.getModel(),c=a.deltaDecorations([],[{range:o,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&a.deltaDecorations(c,[])},350)}return a}})}_openInPeek(e,t){let n=qm.get(e);n&&e.hasModel()?n.toggleWidget(e.getSelection(),kr(s=>Promise.resolve(t)),this._configuration.openInPeek):t.dispose()}}class Yk extends W0{_getLocationModel(e,t,n){return No(this,void 0,void 0,function*(){return new Ys(yield YP(e,t,n),_("def.title","Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?_("noResultWord","No definition found for '{0}'",e.word):_("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleDefinitions}}const bee=mw&&!RZ?2118:70;Pa((XE=class n3 extends Yk{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:n3.id,label:_("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:xe.and(G.hasDefinitionProvider,G.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:G.editorTextFocus,primary:bee,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),Tt.registerCommandAlias("editor.action.goToDeclaration",n3.id)}},XE.id="editor.action.revealDefinition",XE));Pa((JE=class s3 extends Yk{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:s3.id,label:_("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:xe.and(G.hasDefinitionProvider,G.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:G.editorTextFocus,primary:Ns(2089,bee),weight:100}}),Tt.registerCommandAlias("editor.action.openDeclarationToTheSide",s3.id)}},JE.id="editor.action.revealDefinitionAside",JE));Pa((eI=class r3 extends Yk{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:r3.id,label:_("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:xe.and(G.hasDefinitionProvider,Qs.notInPeekEditor,G.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:G.editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:Ue.EditorContextPeek,group:"peek",order:2}}),Tt.registerCommandAlias("editor.action.previewDeclaration",r3.id)}},eI.id="editor.action.peekDefinition",eI));class vee extends W0{_getLocationModel(e,t,n){return No(this,void 0,void 0,function*(){return new Ys(yield gee(e,t,n),_("decl.title","Declarations"))})}_getNoResultFoundMessage(e){return e&&e.word?_("decl.noResultWord","No declaration found for '{0}'",e.word):_("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(50).multipleDeclarations}}Pa((tI=class wee extends vee{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:wee.id,label:_("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:xe.and(G.hasDeclarationProvider,G.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(e){return e&&e.word?_("decl.noResultWord","No declaration found for '{0}'",e.word):_("decl.generic.noResults","No declaration found")}},tI.id="editor.action.revealDeclaration",tI));Pa(class extends vee{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:_("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:xe.and(G.hasDeclarationProvider,Qs.notInPeekEditor,G.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Ue.EditorContextPeek,group:"peek",order:3}})}});class yee extends W0{_getLocationModel(e,t,n){return No(this,void 0,void 0,function*(){return new Ys(yield mee(e,t,n),_("typedef.title","Type Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?_("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):_("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleTypeDefinitions}}Pa((iI=class Cee extends yee{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Cee.ID,label:_("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:xe.and(G.hasTypeDefinitionProvider,G.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:G.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},iI.ID="editor.action.goToTypeDefinition",iI));Pa((nI=class See extends yee{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:See.ID,label:_("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:xe.and(G.hasTypeDefinitionProvider,Qs.notInPeekEditor,G.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Ue.EditorContextPeek,group:"peek",order:4}})}},nI.ID="editor.action.peekTypeDefinition",nI));class xee extends W0{_getLocationModel(e,t,n){return No(this,void 0,void 0,function*(){return new Ys(yield pee(e,t,n),_("impl.title","Implementations"))})}_getNoResultFoundMessage(e){return e&&e.word?_("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):_("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(50).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(50).multipleImplementations}}Pa((sI=class Dee extends xee{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Dee.ID,label:_("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:xe.and(G.hasImplementationProvider,G.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:G.editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},sI.ID="editor.action.goToImplementation",sI));Pa((rI=class Lee extends xee{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:Lee.ID,label:_("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:xe.and(G.hasImplementationProvider,Qs.notInPeekEditor,G.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:G.editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:Ue.EditorContextPeek,group:"peek",order:5}})}},rI.ID="editor.action.peekImplementation",rI));class kee extends W0{_getNoResultFoundMessage(e){return e?_("references.no","No references found for '{0}'",e.word):_("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(50).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(50).multipleReferences}}Pa(class extends kee{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:_("goToReferences.label","Go to References"),alias:"Go to References",precondition:xe.and(G.hasReferenceProvider,Qs.notInPeekEditor,G.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:G.editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(e,t,n){return No(this,void 0,void 0,function*(){return new Ys(yield Zk(e,t,!0,n),_("ref.title","References"))})}});Pa(class extends kee{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:_("references.action.label","Peek References"),alias:"Peek References",precondition:xe.and(G.hasReferenceProvider,Qs.notInPeekEditor,G.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Ue.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,n){return No(this,void 0,void 0,function*(){return new Ys(yield Zk(e,t,!1,n),_("ref.title","References"))})}});class yBe extends W0{constructor(e,t,n){super(e,{id:"editor.action.goToLocation",label:_("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:xe.and(Qs.notInPeekEditor,G.isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=n}_getLocationModel(e,t,n){return No(this,void 0,void 0,function*(){return new Ys(this._references,_("generic.title","Locations"))})}_getNoResultFoundMessage(e){return e&&_("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return(t=this._gotoMultipleBehaviour)!==null&&t!==void 0?t:e.getOption(50).multipleReferences}_getAlternativeCommand(){return""}}Tt.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:We},{name:"position",description:"The position at which to start",constraint:q.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(i,e,t,n,s,r,o)=>No(void 0,void 0,void 0,function*(){Mi(We.isUri(e)),Mi(q.isIPosition(t)),Mi(Array.isArray(n)),Mi(typeof s>"u"||typeof s=="string"),Mi(typeof o>"u"||typeof o=="boolean");const a=i.get(ii),l=yield a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(y5(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(c=>{const h=new class extends yBe{_getNoResultFoundMessage(u){return r||super._getNoResultFoundMessage(u)}}({muteMessage:!r,openInPeek:!!o,openToSide:!1},n,s);c.get(Wt).invokeFunction(h.run.bind(h),l)})})});Tt.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:We},{name:"position",description:"The position at which to start",constraint:q.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(i,e,t,n,s)=>No(void 0,void 0,void 0,function*(){i.get(vn).executeCommand("editor.action.goToLocations",e,t,n,s,void 0,!0)})});Tt.registerCommand({id:"editor.action.findReferences",handler:(i,e,t)=>{Mi(We.isUri(e)),Mi(q.isIPosition(t));const n=i.get(ii);return n.openCodeEditor({resource:e},n.getFocusedCodeEditor()).then(s=>{if(!y5(s)||!s.hasModel())return;const r=qm.get(s);if(!r)return;const o=kr(l=>Zk(s.getModel(),q.lift(t),!1,l).then(c=>new Ys(c,_("ref.title","References")))),a=new F(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(r.toggleWidget(a,o,!1))})}});Tt.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");da.appendMenuItems([{id:Ue.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:_({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:Ue.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:_({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:Ue.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:_({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:Ue.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:_({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:Ue.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:_({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}]);var CBe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Dz=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Ff=class B_{constructor(e,t,n){this.textModelResolverService=t,this.modeService=n,this.toUnhook=new de,this.toUnhookForKeyboard=new de,this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e;let s=new FFe(e);this.toUnhook.add(s),this.toUnhook.add(s.onMouseMoveOrRelevantKeyDown(([r,o])=>{this.startFindDefinitionFromMouse(r,kd(o))})),this.toUnhook.add(s.onExecute(r=>{this.isEnabled(r)&&this.gotoDefinition(r.target.position,r.hasSideBySideModifier).then(()=>{this.removeLinkDecorations()},o=>{this.removeLinkDecorations(),Ke(o)})})),this.toUnhook.add(s.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(B_.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then(()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const n=e.target.position;this.startFindDefinition(n)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const n=e?(t=this.editor.getModel())===null||t===void 0?void 0:t.getWordAtPosition(e):null;if(!n)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===n.startColumn&&this.currentWordAtPosition.endColumn===n.endColumn&&this.currentWordAtPosition.word===n.word)return Promise.resolve(0);this.currentWordAtPosition=n;let s=new qNe(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=kr(r=>this.findDefinition(e,r)),this.previousPromise.then(r=>{if(!r||!r.length||!s.validate(this.editor)){this.removeLinkDecorations();return}if(r.length>1)this.addDecoration(new F(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn),new Wm().appendText(_("multipleResults","Click to show {0} definitions.",r.length)));else{let o=r[0];if(!o.uri)return;this.textModelResolverService.createModelReference(o.uri).then(a=>{if(!a.object||!a.object.textEditorModel){a.dispose();return}const{object:{textEditorModel:l}}=a,{startLineNumber:c}=o.range;if(c<1||c>l.getLineCount()){a.dispose();return}const h=this.getPreviewValue(l,c,o);let u;o.originSelectionRange?u=F.lift(o.originSelectionRange):u=new F(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn);const d=this.modeService.getModeIdByFilepathOrFirstLine(l.uri);this.addDecoration(u,new Wm().appendCodeblock(d||"",h)),a.dispose()})}}).then(void 0,Ke)}getPreviewValue(e,t,n){let s=n.targetSelectionRange?n.range:this.getPreviewRangeBasedOnBrackets(e,t);return s.endLineNumber-s.startLineNumber>=B_.MAX_SOURCE_PREVIEW_LINES&&(s=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,s)}stripIndentationFromPreviewRange(e,t,n){let r=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<n.endLineNumber;a++){const l=e.getLineFirstNonWhitespaceColumn(a);r=Math.min(r,l)}return e.getValueInRange(n).replace(new RegExp(`^\\s{${r-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const n=e.getLineFirstNonWhitespaceColumn(t),s=Math.min(e.getLineCount(),t+B_.MAX_SOURCE_PREVIEW_LINES);let r=t+1;for(;r<s;r++){let o=e.getLineFirstNonWhitespaceColumn(r);if(n===o)break}return new F(t,1,r+1,1)}getPreviewRangeBasedOnBrackets(e,t){const n=Math.min(e.getLineCount(),t+B_.MAX_SOURCE_PREVIEW_LINES),s=[];let r=!0,o=e.findNextBracket(new q(t,1));for(;o!==null;){if(s.length===0)s.push(o);else{const h=s[s.length-1];if(h.open[0]===o.open[0]&&h.isOpen&&!o.isOpen?s.pop():s.push(o),s.length===0)if(r)r=!1;else return new F(t,1,o.range.endLineNumber+1,1)}const a=e.getLineMaxColumn(t);let l=o.range.endLineNumber,c=o.range.endColumn;if(a===o.range.endColumn&&(l++,c=1),l>n)return new F(t,1,n+1,1);o=e.findNextBracket(new q(l,c))}return new F(t,1,n+1,1)}addDecoration(e,t){const n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[n])}removeLinkDecorations(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&e.target.type===6&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&Tv.has(this.editor.getModel())}findDefinition(e,t){const n=this.editor.getModel();return n?YP(n,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(n=>{const s=!t&&this.editor.getOption(77)&&!this.isInPeekEditor(n);return new Yk({openToSide:t,openInPeek:s,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(n,this.editor)})}isInPeekEditor(e){const t=e.get($e);return Qs.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}};Ff.ID="editor.contrib.gotodefinitionatposition";Ff.MAX_SOURCE_PREVIEW_LINES=8;Ff=CBe([Dz(1,Tl),Dz(2,Os)],Ff);Ps(Ff.ID,Ff);Jt((i,e)=>{const t=i.getColor(TAe);t&&e.addRule(`.monaco-editor .goto-definition-link { color: ${t} !important; }`)});const oC=ue;class Aee extends te{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this._scrollbar=this._register(new Ck(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this._scrollbar.getDomNode())}onContentsChanged(){this._scrollbar.scanDomNode()}}class QP extends te{constructor(e,t,n){super(),this.actionContainer=se(e,oC("div.action-container")),this.action=se(this.actionContainer,oC("a.action")),this.action.setAttribute("href","#"),this.action.setAttribute("role","button"),t.iconClass&&se(this.action,oC(`span.icon.${t.iconClass}`));const s=se(this.action,oC("span"));s.textContent=n?`${t.label} (${n})`:t.label,this._register(ne(this.actionContainer,Ae.MOUSE_DOWN,r=>{r.stopPropagation(),r.preventDefault(),t.run(this.actionContainer)})),this.setEnabled(!0)}static render(e,t,n){return new QP(e,t,n)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function SBe(i,e){const t=[],s=Sm.ordered(i).reverse().map(r=>Promise.resolve(r.provideDocumentColors(i,e)).then(o=>{if(Array.isArray(o))for(let a of o)t.push({colorInfo:a,provider:r})}));return Promise.all(s).then(()=>t)}function Lz(i,e,t,n){return Promise.resolve(t.provideColorPresentations(i,e,n))}Tt.registerCommand("_executeDocumentColorProvider",function(i,...e){const[t]=e;if(!(t instanceof We))throw yl();const n=i.get(Rs).getModel(t);if(!n)throw yl();const s=[],o=Sm.ordered(n).reverse().map(a=>Promise.resolve(a.provideDocumentColors(n,Xt.None)).then(l=>{if(Array.isArray(l))for(let c of l)s.push({range:c.range,color:[c.color.red,c.color.green,c.color.blue,c.color.alpha]})}));return Promise.all(o).then(()=>s)});Tt.registerCommand("_executeColorPresentationProvider",function(i,...e){const[t,n]=e,{uri:s,range:r}=n;if(!(s instanceof We)||!Array.isArray(t)||t.length!==4||!F.isIRange(r))throw yl();const[o,a,l,c]=t,h=i.get(Rs).getModel(s);if(!h)throw yl();const u={range:r,color:{red:o,green:a,blue:l,alpha:c}},d=[],g=Sm.ordered(h).reverse().map(p=>Promise.resolve(p.provideColorPresentations(h,u,Xt.None)).then(m=>{Array.isArray(m)&&d.push(...m)}));return Promise.all(g).then(()=>d)});var xBe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},kz=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const DBe=500;let Bf=class Eee extends te{constructor(e,t,n){super(),this._editor=e,this._codeEditorService=t,this._configurationService=n,this._localToDispose=this._register(new de),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=[],this._decorationsTypes=new Set,this._register(e.onDidChangeModel(()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()})),this._register(e.onDidChangeModelLanguage(()=>this.onModelChanged())),this._register(Sm.onDidChange(()=>this.onModelChanged())),this._register(e.onDidChangeConfiguration(()=>{let s=this._isEnabled;this._isEnabled=this.isEnabled(),s!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),n=this._configurationService.getValue(t);if(n&&typeof n=="object"){const s=n.colorDecorators;if(s&&s.enable!==void 0&&!s.enable)return s.enable}return this._editor.getOption(17)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const e=this._editor.getModel();!e||!Sm.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new Ms,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},Eee.RECOMPUTE_TIME))})),this.beginCompute())}beginCompute(){this._computePromise=kr(e=>{const t=this._editor.getModel();return t?SBe(t,e):Promise.resolve([])}),this._computePromise.then(e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null},Ke)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(n=>({range:{startLineNumber:n.colorInfo.range.startLineNumber,startColumn:n.colorInfo.range.startColumn,endLineNumber:n.colorInfo.range.endLineNumber,endColumn:n.colorInfo.range.endColumn},options:lt.EMPTY}));this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((n,s)=>this._colorDatas.set(n,e[s]))}updateColorDecorators(e){let t=[],n={};for(let s=0;s<e.length&&t.length<DBe;s++){const{red:r,green:o,blue:a,alpha:l}=e[s].colorInfo.color,c=new et(Math.round(r*255),Math.round(o*255),Math.round(a*255),l);let h=_xe(`rgba(${c.r},${c.g},${c.b},${c.a})`).toString(16),u=`rgba(${c.r}, ${c.g}, ${c.b}, ${c.a})`,d="colorBox-"+h;!this._decorationsTypes.has(d)&&!n[d]&&this._codeEditorService.registerDecorationType("color-detector-color",d,{before:{contentText:" ",border:"solid 0.1em #000",margin:"0.1em 0.2em 0 0.2em",width:"0.8em",height:"0.8em",backgroundColor:u},dark:{before:{border:"solid 0.1em #eee"}}},void 0,this._editor),n[d]=!0,t.push({range:{startLineNumber:e[s].colorInfo.range.startLineNumber,startColumn:e[s].colorInfo.range.startColumn,endLineNumber:e[s].colorInfo.range.endLineNumber,endColumn:e[s].colorInfo.range.endColumn},options:this._codeEditorService.resolveDecorationOptions(d,!0)})}this._decorationsTypes.forEach(s=>{n[s]||this._codeEditorService.removeDecorationType(s)}),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,t)}removeAllDecorations(){this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,[]),this._decorationsTypes.forEach(e=>{this._codeEditorService.removeDecorationType(e)})}getColorData(e){const t=this._editor.getModel();if(!t)return null;const n=t.getDecorationsInRange(F.fromPositions(e,e)).filter(s=>this._colorDatas.has(s.id));return n.length===0?null:this._colorDatas.get(n[0].id)}};Bf.ID="editor.contrib.colorDetector";Bf.RECOMPUTE_TIME=1e3;Bf=xBe([kz(1,ii),kz(2,Fi)],Bf);Ps(Bf.ID,Bf);class LBe{constructor(e,t,n){this.presentationIndex=n,this._onColorFlushed=new z,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new z,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new z,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){for(let n=0;n<this.colorPresentations.length;n++)if(t.toLowerCase()===this.colorPresentations[n].label){this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}}const oa=ue;class kBe extends te{constructor(e,t,n){super(),this.model=t,this.domNode=oa(".colorpicker-header"),se(e,this.domNode),this.pickedColorNode=se(this.domNode,oa(".picked-color"));const s=_("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",s);const r=se(this.domNode,oa(".original-color"));r.style.backgroundColor=Z.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=n.getColorTheme().getColor(zv)||Z.white,this._register(Jt((o,a)=>{this.backgroundColor=o.getColor(zv)||Z.white})),this._register(ne(this.pickedColorNode,Ae.CLICK,()=>this.model.selectNextColorPresentation())),this._register(ne(r,Ae.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=Z.Format.CSS.format(t.color)||"",this.pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter())}onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=Z.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend(oa(".codicon.codicon-color-mode"))}}class ABe extends te{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this.domNode=oa(".colorpicker-body"),se(e,this.domNode),this.saturationBox=new EBe(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new IBe(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new TBe(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const n=this.model.color.hsva;this.model.color=new Z(new fl(n.h,e,t,n.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new Z(new fl(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,n=(1-e)*360;this.model.color=new Z(new fl(n===360?0:n,t.s,t.v,t.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}class EBe extends te{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this._onDidChange=new z,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new z,this.onColorFlushed=this._onColorFlushed.event,this.domNode=oa(".saturation-wrap"),se(e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",se(this.domNode,this.canvas),this.selection=oa(".saturation-selection"),se(this.domNode,this.selection),this.layout(),this._register(GO(this.domNode,s=>this.onMouseDown(s))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onMouseDown(e){this.monitor=this._register(new sg);const t=Nn(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.buttons,E0,s=>this.onDidChangePosition(s.posx-t.left,s.posy-t.top),()=>null);const n=VZ(document,()=>{this._onColorFlushed.fire(),n.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const n=Math.max(0,Math.min(1,e/this.width)),s=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,s),this._onDidChange.fire({s:n,v:s})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new Z(new fl(e.h,1,1,1)),n=this.canvas.getContext("2d"),s=n.createLinearGradient(0,0,this.canvas.width,0);s.addColorStop(0,"rgba(255, 255, 255, 1)"),s.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),s.addColorStop(1,"rgba(255, 255, 255, 0)");const r=n.createLinearGradient(0,0,0,this.canvas.height);r.addColorStop(0,"rgba(0, 0, 0, 0)"),r.addColorStop(1,"rgba(0, 0, 0, 1)"),n.rect(0,0,this.canvas.width,this.canvas.height),n.fillStyle=Z.Format.CSS.format(t),n.fill(),n.fillStyle=s,n.fill(),n.fillStyle=r,n.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}class Iee extends te{constructor(e,t){super(),this.model=t,this._onDidChange=new z,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new z,this.onColorFlushed=this._onColorFlushed.event,this.domNode=se(e,oa(".strip")),this.overlay=se(this.domNode,oa(".overlay")),this.slider=se(this.domNode,oa(".slider")),this.slider.style.top="0px",this._register(GO(this.domNode,n=>this.onMouseDown(n))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onMouseDown(e){const t=this._register(new sg),n=Nn(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.buttons,E0,r=>this.onDidChangeTop(r.posy-n.top),()=>null);const s=VZ(document,()=>{this._onColorFlushed.fire(),s.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}class IBe extends Iee{constructor(e,t){super(e,t),this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){const{r:t,g:n,b:s}=e.rgba,r=new Z(new et(t,n,s,1)),o=new Z(new et(t,n,s,0));this.overlay.style.background=`linear-gradient(to bottom, ${r} 0%, ${o} 100%)`}getValue(e){return e.hsva.a}}class TBe extends Iee{constructor(e,t){super(e,t),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class NBe extends Qr{constructor(e,t,n,s){super(),this.model=t,this.pixelRatio=n,this._register(MZ(()=>this.layout()));const r=oa(".colorpicker-widget");e.appendChild(r);const o=new kBe(r,this.model,s);this.body=new ABe(r,this.model,this.pixelRatio),this._register(o),this._register(this.body)}layout(){this.body.layout()}}var MBe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},RBe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Az=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class OBe{constructor(e,t,n,s){this.owner=e,this.range=t,this.model=n,this.provider=s,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let o3=class{constructor(e,t,n){this._editor=e,this._hover=t,this._themeService=n}computeSync(e,t){return[]}computeAsync(e,t,n){return Az(this,void 0,void 0,function*(){if(!this._editor.hasModel())return[];const s=Bf.get(this._editor);for(const r of t){if(r.options.description!=="color-detector-color")continue;const o=s.getColorData(r.range.getStartPosition());if(o)return[yield this._createColorHover(this._editor.getModel(),o.colorInfo,o.provider)]}return[]})}_createColorHover(e,t,n){return Az(this,void 0,void 0,function*(){const s=e.getValueInRange(t.range),{red:r,green:o,blue:a,alpha:l}=t.color,c=new et(Math.round(r*255),Math.round(o*255),Math.round(a*255),l),h=new Z(c),u=yield Lz(e,t,n,Xt.None),d=new LBe(h,[],0);return d.colorPresentations=u||[],d.guessColorPresentation(h,s),new OBe(this,F.lift(t.range),d,n)})}renderHoverParts(e,t,n){if(e.length===0||!this._editor.hasModel())return te.None;const s=new de,r=e[0],o=this._editor.getModel(),a=r.model,l=s.add(new NBe(t,a,this._editor.getOption(127),this._themeService));let c=new F(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn);const h=()=>{let d,f;if(a.presentation.textEdit){d=[a.presentation.textEdit],f=new F(a.presentation.textEdit.range.startLineNumber,a.presentation.textEdit.range.startColumn,a.presentation.textEdit.range.endLineNumber,a.presentation.textEdit.range.endColumn);const g=this._editor.getModel()._setTrackedRange(null,f,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",d),f=this._editor.getModel()._getTrackedRange(g)||f}else d=[{identifier:null,range:c,text:a.presentation.label,forceMoveMarkers:!1}],f=c.setEndPosition(c.endLineNumber,c.startColumn+a.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",d);a.presentation.additionalTextEdits&&(d=[...a.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",d),this._hover.hide()),this._editor.pushUndoStop(),c=f},u=d=>Lz(o,{range:c,color:{red:d.rgba.r/255,green:d.rgba.g/255,blue:d.rgba.b/255,alpha:d.rgba.a}},r.provider,Xt.None).then(f=>{a.colorPresentations=f||[]});return s.add(a.onColorFlushed(d=>{u(d).then(h)})),s.add(a.onDidChangeColor(u)),this._hover.setColorPicker(l),s}};o3=MBe([RBe(2,si)],o3);class Tee{constructor(e,t,n,s,r){this._computer=e,this._state=0,this._hoverTime=r,this._firstWaitScheduler=new fi(()=>this._triggerAsyncComputation(),0),this._secondWaitScheduler=new fi(()=>this._triggerSyncComputation(),0),this._loadingMessageScheduler=new fi(()=>this._showLoadingMessage(),0),this._asyncComputationPromise=null,this._asyncComputationPromiseDone=!1,this._completeCallback=t,this._errorCallback=n,this._progressCallback=s}setHoverTime(e){this._hoverTime=e}_firstWaitTime(){return this._hoverTime/2}_secondWaitTime(){return this._hoverTime/2}_loadingMessageTime(){return 3*this._hoverTime}_triggerAsyncComputation(){this._state=2,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncComputationPromiseDone=!1,this._asyncComputationPromise=kr(e=>this._computer.computeAsync(e)),this._asyncComputationPromise.then(e=>{this._asyncComputationPromiseDone=!0,this._withAsyncResult(e)},e=>this._onError(e))):this._asyncComputationPromiseDone=!0}_triggerSyncComputation(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncComputationPromiseDone?(this._state=0,this._onComplete(this._computer.getResult())):(this._state=3,this._onProgress(this._computer.getResult()))}_showLoadingMessage(){this._state===3&&this._onProgress(this._computer.getResultWithLoadingMessage())}_withAsyncResult(e){e&&this._computer.onResult(e,!1),this._state===3&&(this._state=0,this._onComplete(this._computer.getResult()))}_onComplete(e){this._completeCallback(e)}_onError(e){this._errorCallback?this._errorCallback(e):Ke(e)}_onProgress(e){this._progressCallback(e)}start(e){if(e===0)this._state===0&&(this._state=1,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._loadingMessageScheduler.cancel(),this._state===1&&this._firstWaitScheduler.cancel(),this._state===2&&(this._secondWaitScheduler.cancel(),this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null)),this._state===3&&this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null),this._state=0}}class Ez{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}class oI{constructor(e,t,n){this.priority=e,this.owner=t,this.range=n,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */function PBe(i){if(Array.isArray(i)){for(var e=0,t=Array(i.length);e<i.length;e++)t[e]=i[e];return t}else return Array.from(i)}var FBe=Object.hasOwnProperty,Iz=Object.setPrototypeOf,BBe=Object.isFrozen,VBe=Object.getPrototypeOf,WBe=Object.getOwnPropertyDescriptor,Xs=Object.freeze,Kc=Object.seal,zBe=Object.create,Nee=typeof Reflect<"u"&&Reflect,ED=Nee.apply,a3=Nee.construct;ED||(ED=function(e,t,n){return e.apply(t,n)});Xs||(Xs=function(e){return e});Kc||(Kc=function(e){return e});a3||(a3=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(PBe(t))))});var HBe=La(Array.prototype.forEach),Tz=La(Array.prototype.pop),m_=La(Array.prototype.push),rd=La(String.prototype.toLowerCase),Nz=La(String.prototype.match),dh=La(String.prototype.replace),UBe=La(String.prototype.indexOf),$Be=La(String.prototype.trim),sc=La(RegExp.prototype.test),Mz=jBe(TypeError);function La(i){return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return ED(i,e,n)}}function jBe(i){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return a3(i,t)}}function xt(i,e){Iz&&Iz(i,null);for(var t=e.length;t--;){var n=e[t];if(typeof n=="string"){var s=rd(n);s!==n&&(BBe(e)||(e[t]=s),n=s)}i[n]=!0}return i}function id(i){var e=zBe(null),t=void 0;for(t in i)ED(FBe,i,[t])&&(e[t]=i[t]);return e}function aC(i,e){for(;i!==null;){var t=WBe(i,e);if(t){if(t.get)return La(t.get);if(typeof t.value=="function")return La(t.value)}i=VBe(i)}function n(s){return console.warn("fallback value for",s),null}return n}var Rz=Xs(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),aI=Xs(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),lI=Xs(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),qBe=Xs(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),cI=Xs(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),GBe=Xs(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Oz=Xs(["#text"]),Pz=Xs(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),hI=Xs(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Fz=Xs(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),lC=Xs(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),KBe=Kc(/\{\{[\s\S]*|[\s\S]*\}\}/gm),ZBe=Kc(/<%[\s\S]*|[\s\S]*%>/gm),YBe=Kc(/^data-[\-\w.\u00B7-\uFFFF]/),QBe=Kc(/^aria-[\-\w]+$/),XBe=Kc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),JBe=Kc(/^(?:\w+script|data):/i),e6e=Kc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),V_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};function Ga(i){if(Array.isArray(i)){for(var e=0,t=Array(i.length);e<i.length;e++)t[e]=i[e];return t}else return Array.from(i)}var t6e=function(){return typeof window>"u"?null:window},i6e=function(e,t){if((typeof e>"u"?"undefined":V_(e))!=="object"||typeof e.createPolicy!="function")return null;var n=null,s="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(s)&&(n=t.currentScript.getAttribute(s));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function Mee(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t6e(),e=function(E){return Mee(E)};if(e.version="2.3.1",e.removed=[],!i||!i.document||i.document.nodeType!==9)return e.isSupported=!1,e;var t=i.document,n=i.document,s=i.DocumentFragment,r=i.HTMLTemplateElement,o=i.Node,a=i.Element,l=i.NodeFilter,c=i.NamedNodeMap,h=c===void 0?i.NamedNodeMap||i.MozNamedAttrMap:c,u=i.Text,d=i.Comment,f=i.DOMParser,g=i.trustedTypes,p=a.prototype,m=aC(p,"cloneNode"),v=aC(p,"nextSibling"),b=aC(p,"childNodes"),w=aC(p,"parentNode");if(typeof r=="function"){var y=n.createElement("template");y.content&&y.content.ownerDocument&&(n=y.content.ownerDocument)}var x=i6e(g,t),k=x&&zn?x.createHTML(""):"",S=n,L=S.implementation,D=S.createNodeIterator,N=S.createDocumentFragment,T=S.getElementsByTagName,$=t.importNode,U={};try{U=id(n).documentMode?n.documentMode:{}}catch{}var ee={};e.isSupported=typeof w=="function"&&L&&typeof L.createHTMLDocument<"u"&&U!==9;var ce=KBe,fe=ZBe,Ce=YBe,Se=QBe,me=JBe,Dt=e6e,ze=XBe,Ge=null,Lt=xt({},[].concat(Ga(Rz),Ga(aI),Ga(lI),Ga(cI),Ga(Oz))),nt=null,Vi=xt({},[].concat(Ga(Pz),Ga(hI),Ga(Fz),Ga(lC))),wn=null,Wn=null,Ai=!0,J=!0,ye=!1,he=!1,W=!1,ot=!1,Me=!1,vt=!1,pt=!1,ei=!0,zn=!1,eh=!0,eo=!0,nr=!1,en={},Bs=null,to=xt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ps=null,Fa=xt({},["audio","video","img","source","image","track"]),C=null,A=xt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),I="http://www.w3.org/1998/Math/MathML",j="http://www.w3.org/2000/svg",Y="http://www.w3.org/1999/xhtml",ae=Y,_e=!1,_t=null,ci=n.createElement("form"),Rt=function(E){_t&&_t===E||((!E||(typeof E>"u"?"undefined":V_(E))!=="object")&&(E={}),E=id(E),Ge="ALLOWED_TAGS"in E?xt({},E.ALLOWED_TAGS):Lt,nt="ALLOWED_ATTR"in E?xt({},E.ALLOWED_ATTR):Vi,C="ADD_URI_SAFE_ATTR"in E?xt(id(A),E.ADD_URI_SAFE_ATTR):A,ps="ADD_DATA_URI_TAGS"in E?xt(id(Fa),E.ADD_DATA_URI_TAGS):Fa,Bs="FORBID_CONTENTS"in E?xt({},E.FORBID_CONTENTS):to,wn="FORBID_TAGS"in E?xt({},E.FORBID_TAGS):{},Wn="FORBID_ATTR"in E?xt({},E.FORBID_ATTR):{},en="USE_PROFILES"in E?E.USE_PROFILES:!1,Ai=E.ALLOW_ARIA_ATTR!==!1,J=E.ALLOW_DATA_ATTR!==!1,ye=E.ALLOW_UNKNOWN_PROTOCOLS||!1,he=E.SAFE_FOR_TEMPLATES||!1,W=E.WHOLE_DOCUMENT||!1,vt=E.RETURN_DOM||!1,pt=E.RETURN_DOM_FRAGMENT||!1,ei=E.RETURN_DOM_IMPORT!==!1,zn=E.RETURN_TRUSTED_TYPE||!1,Me=E.FORCE_BODY||!1,eh=E.SANITIZE_DOM!==!1,eo=E.KEEP_CONTENT!==!1,nr=E.IN_PLACE||!1,ze=E.ALLOWED_URI_REGEXP||ze,ae=E.NAMESPACE||Y,he&&(J=!1),pt&&(vt=!0),en&&(Ge=xt({},[].concat(Ga(Oz))),nt=[],en.html===!0&&(xt(Ge,Rz),xt(nt,Pz)),en.svg===!0&&(xt(Ge,aI),xt(nt,hI),xt(nt,lC)),en.svgFilters===!0&&(xt(Ge,lI),xt(nt,hI),xt(nt,lC)),en.mathMl===!0&&(xt(Ge,cI),xt(nt,Fz),xt(nt,lC))),E.ADD_TAGS&&(Ge===Lt&&(Ge=id(Ge)),xt(Ge,E.ADD_TAGS)),E.ADD_ATTR&&(nt===Vi&&(nt=id(nt)),xt(nt,E.ADD_ATTR)),E.ADD_URI_SAFE_ATTR&&xt(C,E.ADD_URI_SAFE_ATTR),E.FORBID_CONTENTS&&(Bs===to&&(Bs=id(Bs)),xt(Bs,E.FORBID_CONTENTS)),eo&&(Ge["#text"]=!0),W&&xt(Ge,["html","head","body"]),Ge.table&&(xt(Ge,["tbody"]),delete wn.tbody),Xs&&Xs(E),_t=E)},Ot=xt({},["mi","mo","mn","ms","mtext"]),hi=xt({},["foreignobject","desc","title","annotation-xml"]),$l=xt({},aI);xt($l,lI),xt($l,qBe);var Ba=xt({},cI);xt(Ba,GBe);var bg=function(E){var H=w(E);(!H||!H.tagName)&&(H={namespaceURI:Y,tagName:"template"});var X=rd(E.tagName),ie=rd(H.tagName);if(E.namespaceURI===j)return H.namespaceURI===Y?X==="svg":H.namespaceURI===I?X==="svg"&&(ie==="annotation-xml"||Ot[ie]):!!$l[X];if(E.namespaceURI===I)return H.namespaceURI===Y?X==="math":H.namespaceURI===j?X==="math"&&hi[ie]:!!Ba[X];if(E.namespaceURI===Y){if(H.namespaceURI===j&&!hi[ie]||H.namespaceURI===I&&!Ot[ie])return!1;var we=xt({},["title","style","font","a","script"]);return!Ba[X]&&(we[X]||!$l[X])}return!1},Vs=function(E){m_(e.removed,{element:E});try{E.parentNode.removeChild(E)}catch{try{E.outerHTML=k}catch{E.remove()}}},Wu=function(E,H){try{m_(e.removed,{attribute:H.getAttributeNode(E),from:H})}catch{m_(e.removed,{attribute:null,from:H})}if(H.removeAttribute(E),E==="is"&&!nt[E])if(vt||pt)try{Vs(H)}catch{}else try{H.setAttribute(E,"")}catch{}},vg=function(E){var H=void 0,X=void 0;if(Me)E="<remove></remove>"+E;else{var ie=Nz(E,/^[\r\n\t ]+/);X=ie&&ie[0]}var we=x?x.createHTML(E):E;if(ae===Y)try{H=new f().parseFromString(we,"text/html")}catch{}if(!H||!H.documentElement){H=L.createDocument(ae,"template",null);try{H.documentElement.innerHTML=_e?"":we}catch{}}var Fe=H.body||H.documentElement;return E&&X&&Fe.insertBefore(n.createTextNode(X),Fe.childNodes[0]||null),ae===Y?T.call(H,W?"html":"body")[0]:W?H.documentElement:Fe},wg=function(E){return D.call(E.ownerDocument||E,E,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},st=function(E){return E instanceof u||E instanceof d?!1:typeof E.nodeName!="string"||typeof E.textContent!="string"||typeof E.removeChild!="function"||!(E.attributes instanceof h)||typeof E.removeAttribute!="function"||typeof E.setAttribute!="function"||typeof E.namespaceURI!="string"||typeof E.insertBefore!="function"},Va=function(E){return(typeof o>"u"?"undefined":V_(o))==="object"?E instanceof o:E&&(typeof E>"u"?"undefined":V_(E))==="object"&&typeof E.nodeType=="number"&&typeof E.nodeName=="string"},M=function(E,H,X){ee[E]&&HBe(ee[E],function(ie){ie.call(e,H,X,_t)})},K=function(E){var H=void 0;if(M("beforeSanitizeElements",E,null),st(E)||Nz(E.nodeName,/[\u0080-\uFFFF]/))return Vs(E),!0;var X=rd(E.nodeName);if(M("uponSanitizeElement",E,{tagName:X,allowedTags:Ge}),!Va(E.firstElementChild)&&(!Va(E.content)||!Va(E.content.firstElementChild))&&sc(/<[/\w]/g,E.innerHTML)&&sc(/<[/\w]/g,E.textContent)||X==="select"&&sc(/<template/i,E.innerHTML))return Vs(E),!0;if(!Ge[X]||wn[X]){if(eo&&!Bs[X]){var ie=w(E)||E.parentNode,we=b(E)||E.childNodes;if(we&&ie)for(var Fe=we.length,He=Fe-1;He>=0;--He)ie.insertBefore(m(we[He],!0),v(E))}return Vs(E),!0}return E instanceof a&&!bg(E)||(X==="noscript"||X==="noembed")&&sc(/<\/no(script|embed)/i,E.innerHTML)?(Vs(E),!0):(he&&E.nodeType===3&&(H=E.textContent,H=dh(H,ce," "),H=dh(H,fe," "),E.textContent!==H&&(m_(e.removed,{element:E.cloneNode()}),E.textContent=H)),M("afterSanitizeElements",E,null),!1)},Q=function(E,H,X){if(eh&&(H==="id"||H==="name")&&(X in n||X in ci))return!1;if(!(J&&!Wn[H]&&sc(Ce,H))){if(!(Ai&&sc(Se,H))){if(!nt[H]||Wn[H])return!1;if(!C[H]){if(!sc(ze,dh(X,Dt,""))){if(!((H==="src"||H==="xlink:href"||H==="href")&&E!=="script"&&UBe(X,"data:")===0&&ps[E])){if(!(ye&&!sc(me,dh(X,Dt,"")))){if(X)return!1}}}}}}return!0},R=function(E){var H=void 0,X=void 0,ie=void 0,we=void 0;M("beforeSanitizeAttributes",E,null);var Fe=E.attributes;if(Fe){var He={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:nt};for(we=Fe.length;we--;){H=Fe[we];var qe=H,ge=qe.name,Re=qe.namespaceURI;if(X=$Be(H.value),ie=rd(ge),He.attrName=ie,He.attrValue=X,He.keepAttr=!0,He.forceKeepAttr=void 0,M("uponSanitizeAttribute",E,He),X=He.attrValue,!He.forceKeepAttr&&(Wu(ge,E),!!He.keepAttr)){if(sc(/\/>/i,X)){Wu(ge,E);continue}he&&(X=dh(X,ce," "),X=dh(X,fe," "));var Wi=E.nodeName.toLowerCase();if(Q(Wi,ie,X))try{Re?E.setAttributeNS(Re,ge,X):E.setAttribute(ge,X),Tz(e.removed)}catch{}}}M("afterSanitizeAttributes",E,null)}},B=function O(E){var H=void 0,X=wg(E);for(M("beforeSanitizeShadowDOM",E,null);H=X.nextNode();)M("uponSanitizeShadowNode",H,null),!K(H)&&(H.content instanceof s&&O(H.content),R(H));M("afterSanitizeShadowDOM",E,null)};return e.sanitize=function(O,E){var H=void 0,X=void 0,ie=void 0,we=void 0,Fe=void 0;if(_e=!O,_e&&(O="<!-->"),typeof O!="string"&&!Va(O)){if(typeof O.toString!="function")throw Mz("toString is not a function");if(O=O.toString(),typeof O!="string")throw Mz("dirty is not a string, aborting")}if(!e.isSupported){if(V_(i.toStaticHTML)==="object"||typeof i.toStaticHTML=="function"){if(typeof O=="string")return i.toStaticHTML(O);if(Va(O))return i.toStaticHTML(O.outerHTML)}return O}if(ot||Rt(E),e.removed=[],typeof O=="string"&&(nr=!1),!nr)if(O instanceof o)H=vg("<!---->"),X=H.ownerDocument.importNode(O,!0),X.nodeType===1&&X.nodeName==="BODY"||X.nodeName==="HTML"?H=X:H.appendChild(X);else{if(!vt&&!he&&!W&&O.indexOf("<")===-1)return x&&zn?x.createHTML(O):O;if(H=vg(O),!H)return vt?null:k}H&&Me&&Vs(H.firstChild);for(var He=wg(nr?O:H);ie=He.nextNode();)ie.nodeType===3&&ie===we||K(ie)||(ie.content instanceof s&&B(ie.content),R(ie),we=ie);if(we=null,nr)return O;if(vt){if(pt)for(Fe=N.call(H.ownerDocument);H.firstChild;)Fe.appendChild(H.firstChild);else Fe=H;return ei&&(Fe=$.call(t,Fe,!0)),Fe}var qe=W?H.outerHTML:H.innerHTML;return he&&(qe=dh(qe,ce," "),qe=dh(qe,fe," ")),x&&zn?x.createHTML(qe):qe},e.setConfig=function(O){Rt(O),ot=!0},e.clearConfig=function(){_t=null,ot=!1},e.isValidAttribute=function(O,E,H){_t||Rt({});var X=rd(O),ie=rd(E);return Q(X,ie,H)},e.addHook=function(O,E){typeof E=="function"&&(ee[O]=ee[O]||[],m_(ee[O],E))},e.removeHook=function(O){ee[O]&&Tz(ee[O])},e.removeHooks=function(O){ee[O]&&(ee[O]=[])},e.removeAllHooks=function(){ee={}},e}var Hl=Mee();Hl.version;Hl.isSupported;const n6e=Hl.sanitize;Hl.setConfig;Hl.clearConfig;Hl.isValidAttribute;const Bz=Hl.addHook,Vz=Hl.removeHook;Hl.removeHooks;Hl.removeAllHooks;let Ul;(function(){function i(e){Ul=e()}i.amd=!0,function(e,t){typeof exports=="object"&&typeof module<"u"?module.exports=t():typeof i=="function"&&i.amd?i(t):(e=typeof globalThis<"u"?globalThis:e||self,e.marked=t())}(this,function(){function e(M,K){for(var Q=0;Q<K.length;Q++){var R=K[Q];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(M,R.key,R)}}function t(M,K,Q){return K&&e(M.prototype,K),Q&&e(M,Q),M}function n(M,K){if(M){if(typeof M=="string")return s(M,K);var Q=Object.prototype.toString.call(M).slice(8,-1);if(Q==="Object"&&M.constructor&&(Q=M.constructor.name),Q==="Map"||Q==="Set")return Array.from(M);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return s(M,K)}}function s(M,K){(K==null||K>M.length)&&(K=M.length);for(var Q=0,R=new Array(K);Q<K;Q++)R[Q]=M[Q];return R}function r(M,K){var Q=typeof Symbol<"u"&&M[Symbol.iterator]||M["@@iterator"];if(Q)return(Q=Q.call(M)).next.bind(Q);if(Array.isArray(M)||(Q=n(M))||K&&M&&typeof M.length=="number"){Q&&(M=Q);var R=0;return function(){return R>=M.length?{done:!0}:{done:!1,value:M[R++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o={exports:{}};function a(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function l(M){o.exports.defaults=M}o.exports={defaults:a(),getDefaults:a,changeDefaults:l};var c=/[&<>"']/,h=/[&<>"']/g,u=/[<>"']|&(?!#?\w+;)/,d=/[<>"']|&(?!#?\w+;)/g,f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=function(K){return f[K]};function p(M,K){if(K){if(c.test(M))return M.replace(h,g)}else if(u.test(M))return M.replace(d,g);return M}var m=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function v(M){return M.replace(m,function(K,Q){return Q=Q.toLowerCase(),Q==="colon"?":":Q.charAt(0)==="#"?Q.charAt(1)==="x"?String.fromCharCode(parseInt(Q.substring(2),16)):String.fromCharCode(+Q.substring(1)):""})}var b=/(^|[^\[])\^/g;function w(M,K){M=M.source||M,K=K||"";var Q={replace:function(B,O){return O=O.source||O,O=O.replace(b,"$1"),M=M.replace(B,O),Q},getRegex:function(){return new RegExp(M,K)}};return Q}var y=/[^\w:]/g,x=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function k(M,K,Q){if(M){var R;try{R=decodeURIComponent(v(Q)).replace(y,"").toLowerCase()}catch{return null}if(R.indexOf("javascript:")===0||R.indexOf("vbscript:")===0||R.indexOf("data:")===0)return null}K&&!x.test(Q)&&(Q=T(K,Q));try{Q=encodeURI(Q).replace(/%25/g,"%")}catch{return null}return Q}var S={},L=/^[^:]+:\/*[^/]*$/,D=/^([^:]+:)[\s\S]*$/,N=/^([^:]+:\/*[^/]*)[\s\S]*$/;function T(M,K){S[" "+M]||(L.test(M)?S[" "+M]=M+"/":S[" "+M]=ce(M,"/",!0)),M=S[" "+M];var Q=M.indexOf(":")===-1;return K.substring(0,2)==="//"?Q?K:M.replace(D,"$1")+K:K.charAt(0)==="/"?Q?K:M.replace(N,"$1")+K:M+K}var $={exec:function(){}};function U(M){for(var K=1,Q,R;K<arguments.length;K++){Q=arguments[K];for(R in Q)Object.prototype.hasOwnProperty.call(Q,R)&&(M[R]=Q[R])}return M}function ee(M,K){var Q=M.replace(/\|/g,function(O,E,H){for(var X=!1,ie=E;--ie>=0&&H[ie]==="\\";)X=!X;return X?"|":" |"}),R=Q.split(/ \|/),B=0;if(R[0].trim()||R.shift(),R[R.length-1].trim()||R.pop(),R.length>K)R.splice(K);else for(;R.length<K;)R.push("");for(;B<R.length;B++)R[B]=R[B].trim().replace(/\\\|/g,"|");return R}function ce(M,K,Q){var R=M.length;if(R===0)return"";for(var B=0;B<R;){var O=M.charAt(R-B-1);if(O===K&&!Q)B++;else if(O!==K&&Q)B++;else break}return M.substr(0,R-B)}function fe(M,K){if(M.indexOf(K[1])===-1)return-1;for(var Q=M.length,R=0,B=0;B<Q;B++)if(M[B]==="\\")B++;else if(M[B]===K[0])R++;else if(M[B]===K[1]&&(R--,R<0))return B;return-1}function Ce(M){M&&M.sanitize&&!M.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Se(M,K){if(K<1)return"";for(var Q="";K>1;)K&1&&(Q+=M),K>>=1,M+=M;return Q+M}var me={escape:p,unescape:v,edit:w,cleanUrl:k,resolveUrl:T,noopTest:$,merge:U,splitCells:ee,rtrim:ce,findClosingBracket:fe,checkSanitizeDeprecation:Ce,repeatString:Se},Dt=o.exports.defaults,ze=me.rtrim,Ge=me.splitCells,Lt=me.escape,nt=me.findClosingBracket;function Vi(M,K,Q,R){var B=K.href,O=K.title?Lt(K.title):null,E=M[1].replace(/\\([\[\]])/g,"$1");if(M[0].charAt(0)!=="!"){R.state.inLink=!0;var H={type:"link",raw:Q,href:B,title:O,text:E,tokens:R.inlineTokens(E,[])};return R.state.inLink=!1,H}else return{type:"image",raw:Q,href:B,title:O,text:Lt(E)}}function wn(M,K){var Q=M.match(/^(\s+)(?:```)/);if(Q===null)return K;var R=Q[1];return K.split(`
`).map(function(B){var O=B.match(/^\s+/);if(O===null)return B;var E=O[0];return E.length>=R.length?B.slice(R.length):B}).join(`
`)}var Wn=function(){function M(Q){this.options=Q||Dt}var K=M.prototype;return K.space=function(R){var B=this.rules.block.newline.exec(R);if(B)return B[0].length>1?{type:"space",raw:B[0]}:{raw:`
`}},K.code=function(R){var B=this.rules.block.code.exec(R);if(B){var O=B[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:B[0],codeBlockStyle:"indented",text:this.options.pedantic?O:ze(O,`
`)}}},K.fences=function(R){var B=this.rules.block.fences.exec(R);if(B){var O=B[0],E=wn(O,B[3]||"");return{type:"code",raw:O,lang:B[2]?B[2].trim():B[2],text:E}}},K.heading=function(R){var B=this.rules.block.heading.exec(R);if(B){var O=B[2].trim();if(/#$/.test(O)){var E=ze(O,"#");(this.options.pedantic||!E||/ $/.test(E))&&(O=E.trim())}var H={type:"heading",raw:B[0],depth:B[1].length,text:O,tokens:[]};return this.lexer.inline(H.text,H.tokens),H}},K.hr=function(R){var B=this.rules.block.hr.exec(R);if(B)return{type:"hr",raw:B[0]}},K.blockquote=function(R){var B=this.rules.block.blockquote.exec(R);if(B){var O=B[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:B[0],tokens:this.lexer.blockTokens(O,[]),text:O}}},K.list=function(R){var B=this.rules.block.list.exec(R);if(B){var O,E,H,X,ie,we,Fe,He,qe,ge,Re=B[1].trim(),Wi=Re.length>1,wt={type:"list",raw:"",ordered:Wi,start:Wi?+Re.slice(0,-1):"",loose:!1,items:[]};Re=Wi?"\\d{1,9}\\"+Re.slice(-1):"\\"+Re,this.options.pedantic&&(Re=Wi?Re:"[*+-]");for(var Hn=new RegExp("^( {0,3}"+Re+")((?: [^\\n]*| *)(?:\\n[^\\n]*)*(?:\\n|$))");R&&!(this.rules.block.hr.test(R)||!(B=Hn.exec(R)));){qe=B[2].split(`
`),this.options.pedantic?(X=2,ge=qe[0].trimLeft()):(X=B[2].search(/[^ ]/),X=B[1].length+(X>4?1:X),ge=qe[0].slice(X-B[1].length)),we=!1,O=B[0],!qe[0]&&/^ *$/.test(qe[1])&&(O=B[1]+qe.slice(0,2).join(`
`)+`
`,wt.loose=!0,qe=[]);var jl=new RegExp("^ {0,"+Math.min(3,X-1)+"}(?:[*+-]|\\d{1,9}[.)])");for(ie=1;ie<qe.length;ie++){if(He=qe[ie],this.options.pedantic&&(He=He.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),jl.test(He)){O=B[1]+qe.slice(0,ie).join(`
`)+`
`;break}if(!we){He.trim()||(we=!0),He.search(/[^ ]/)>=X?ge+=`
`+He.slice(X):ge+=`
`+He;continue}if(He.search(/[^ ]/)>=X||!He.trim()){ge+=`
`+He.slice(X);continue}else{O=B[1]+qe.slice(0,ie).join(`
`)+`
`;break}}wt.loose||(Fe?wt.loose=!0:/\n *\n *$/.test(O)&&(Fe=!0)),this.options.gfm&&(E=/^\[[ xX]\] /.exec(ge),E&&(H=E[0]!=="[ ] ",ge=ge.replace(/^\[[ xX]\] +/,""))),wt.items.push({type:"list_item",raw:O,task:!!E,checked:H,loose:!1,text:ge}),wt.raw+=O,R=R.slice(O.length)}wt.items[wt.items.length-1].raw=O.trimRight(),wt.items[wt.items.length-1].text=ge.trimRight(),wt.raw=wt.raw.trimRight();var tn=wt.items.length;for(ie=0;ie<tn;ie++)this.lexer.state.top=!1,wt.items[ie].tokens=this.lexer.blockTokens(wt.items[ie].text,[]),wt.items[ie].tokens.some(function(zu){return zu.type==="space"})&&(wt.loose=!0,wt.items[ie].loose=!0);return wt}},K.html=function(R){var B=this.rules.block.html.exec(R);if(B){var O={type:"html",raw:B[0],pre:!this.options.sanitizer&&(B[1]==="pre"||B[1]==="script"||B[1]==="style"),text:B[0]};return this.options.sanitize&&(O.type="paragraph",O.text=this.options.sanitizer?this.options.sanitizer(B[0]):Lt(B[0]),O.tokens=[],this.lexer.inline(O.text,O.tokens)),O}},K.def=function(R){var B=this.rules.block.def.exec(R);if(B){B[3]&&(B[3]=B[3].substring(1,B[3].length-1));var O=B[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:O,raw:B[0],href:B[2],title:B[3]}}},K.table=function(R){var B=this.rules.block.table.exec(R);if(B){var O={type:"table",header:Ge(B[1]).map(function(Fe){return{text:Fe}}),align:B[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:B[3]?B[3].replace(/\n$/,"").split(`
`):[]};if(O.header.length===O.align.length){O.raw=B[0];var E=O.align.length,H,X,ie,we;for(H=0;H<E;H++)/^ *-+: *$/.test(O.align[H])?O.align[H]="right":/^ *:-+: *$/.test(O.align[H])?O.align[H]="center":/^ *:-+ *$/.test(O.align[H])?O.align[H]="left":O.align[H]=null;for(E=O.rows.length,H=0;H<E;H++)O.rows[H]=Ge(O.rows[H],O.header.length).map(function(Fe){return{text:Fe}});for(E=O.header.length,X=0;X<E;X++)O.header[X].tokens=[],this.lexer.inlineTokens(O.header[X].text,O.header[X].tokens);for(E=O.rows.length,X=0;X<E;X++)for(we=O.rows[X],ie=0;ie<we.length;ie++)we[ie].tokens=[],this.lexer.inlineTokens(we[ie].text,we[ie].tokens);return O}}},K.lheading=function(R){var B=this.rules.block.lheading.exec(R);if(B){var O={type:"heading",raw:B[0],depth:B[2].charAt(0)==="="?1:2,text:B[1],tokens:[]};return this.lexer.inline(O.text,O.tokens),O}},K.paragraph=function(R){var B=this.rules.block.paragraph.exec(R);if(B){var O={type:"paragraph",raw:B[0],text:B[1].charAt(B[1].length-1)===`
`?B[1].slice(0,-1):B[1],tokens:[]};return this.lexer.inline(O.text,O.tokens),O}},K.text=function(R){var B=this.rules.block.text.exec(R);if(B){var O={type:"text",raw:B[0],text:B[0],tokens:[]};return this.lexer.inline(O.text,O.tokens),O}},K.escape=function(R){var B=this.rules.inline.escape.exec(R);if(B)return{type:"escape",raw:B[0],text:Lt(B[1])}},K.tag=function(R){var B=this.rules.inline.tag.exec(R);if(B)return!this.lexer.state.inLink&&/^<a /i.test(B[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(B[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(B[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(B[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:B[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(B[0]):Lt(B[0]):B[0]}},K.link=function(R){var B=this.rules.inline.link.exec(R);if(B){var O=B[2].trim();if(!this.options.pedantic&&/^</.test(O)){if(!/>$/.test(O))return;var E=ze(O.slice(0,-1),"\\");if((O.length-E.length)%2===0)return}else{var H=nt(B[2],"()");if(H>-1){var X=B[0].indexOf("!")===0?5:4,ie=X+B[1].length+H;B[2]=B[2].substring(0,H),B[0]=B[0].substring(0,ie).trim(),B[3]=""}}var we=B[2],Fe="";if(this.options.pedantic){var He=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(we);He&&(we=He[1],Fe=He[3])}else Fe=B[3]?B[3].slice(1,-1):"";return we=we.trim(),/^</.test(we)&&(this.options.pedantic&&!/>$/.test(O)?we=we.slice(1):we=we.slice(1,-1)),Vi(B,{href:we&&we.replace(this.rules.inline._escapes,"$1"),title:Fe&&Fe.replace(this.rules.inline._escapes,"$1")},B[0],this.lexer)}},K.reflink=function(R,B){var O;if((O=this.rules.inline.reflink.exec(R))||(O=this.rules.inline.nolink.exec(R))){var E=(O[2]||O[1]).replace(/\s+/g," ");if(E=B[E.toLowerCase()],!E||!E.href){var H=O[0].charAt(0);return{type:"text",raw:H,text:H}}return Vi(O,E,O[0],this.lexer)}},K.emStrong=function(R,B,O){O===void 0&&(O="");var E=this.rules.inline.emStrong.lDelim.exec(R);if(E&&!(E[3]&&O.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var H=E[1]||E[2]||"";if(!H||H&&(O===""||this.rules.inline.punctuation.exec(O))){var X=E[0].length-1,ie,we,Fe=X,He=0,qe=E[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(qe.lastIndex=0,B=B.slice(-1*R.length+X);(E=qe.exec(B))!=null;)if(ie=E[1]||E[2]||E[3]||E[4]||E[5]||E[6],!!ie){if(we=ie.length,E[3]||E[4]){Fe+=we;continue}else if((E[5]||E[6])&&X%3&&!((X+we)%3)){He+=we;continue}if(Fe-=we,!(Fe>0)){if(we=Math.min(we,we+Fe+He),Math.min(X,we)%2){var ge=R.slice(1,X+E.index+we);return{type:"em",raw:R.slice(0,X+E.index+we+1),text:ge,tokens:this.lexer.inlineTokens(ge,[])}}var Re=R.slice(2,X+E.index+we-1);return{type:"strong",raw:R.slice(0,X+E.index+we+1),text:Re,tokens:this.lexer.inlineTokens(Re,[])}}}}}},K.codespan=function(R){var B=this.rules.inline.code.exec(R);if(B){var O=B[2].replace(/\n/g," "),E=/[^ ]/.test(O),H=/^ /.test(O)&&/ $/.test(O);return E&&H&&(O=O.substring(1,O.length-1)),O=Lt(O,!0),{type:"codespan",raw:B[0],text:O}}},K.br=function(R){var B=this.rules.inline.br.exec(R);if(B)return{type:"br",raw:B[0]}},K.del=function(R){var B=this.rules.inline.del.exec(R);if(B)return{type:"del",raw:B[0],text:B[2],tokens:this.lexer.inlineTokens(B[2],[])}},K.autolink=function(R,B){var O=this.rules.inline.autolink.exec(R);if(O){var E,H;return O[2]==="@"?(E=Lt(this.options.mangle?B(O[1]):O[1]),H="mailto:"+E):(E=Lt(O[1]),H=E),{type:"link",raw:O[0],text:E,href:H,tokens:[{type:"text",raw:E,text:E}]}}},K.url=function(R,B){var O;if(O=this.rules.inline.url.exec(R)){var E,H;if(O[2]==="@")E=Lt(this.options.mangle?B(O[0]):O[0]),H="mailto:"+E;else{var X;do X=O[0],O[0]=this.rules.inline._backpedal.exec(O[0])[0];while(X!==O[0]);E=Lt(O[0]),O[1]==="www."?H="http://"+E:H=E}return{type:"link",raw:O[0],text:E,href:H,tokens:[{type:"text",raw:E,text:E}]}}},K.inlineText=function(R,B){var O=this.rules.inline.text.exec(R);if(O){var E;return this.lexer.state.inRawBlock?E=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(O[0]):Lt(O[0]):O[0]:E=Lt(this.options.smartypants?B(O[0]):O[0]),{type:"text",raw:O[0],text:E}}},M}(),Ai=me.noopTest,J=me.edit,ye=me.merge,he={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:Ai,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/};he._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,he._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,he.def=J(he.def).replace("label",he._label).replace("title",he._title).getRegex(),he.bullet=/(?:[*+-]|\d{1,9}[.)])/,he.listItemStart=J(/^( *)(bull) */).replace("bull",he.bullet).getRegex(),he.list=J(he.list).replace(/bull/g,he.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+he.def.source+")").getRegex(),he._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",he._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,he.html=J(he.html,"i").replace("comment",he._comment).replace("tag",he._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),he.paragraph=J(he._paragraph).replace("hr",he.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",he._tag).getRegex(),he.blockquote=J(he.blockquote).replace("paragraph",he.paragraph).getRegex(),he.normal=ye({},he),he.gfm=ye({},he.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)\\|?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),he.gfm.table=J(he.gfm.table).replace("hr",he.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",he._tag).getRegex(),he.pedantic=ye({},he.normal,{html:J(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",he._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ai,paragraph:J(he.normal._paragraph).replace("hr",he.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",he.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var W={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Ai,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Ai,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};W._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",W.punctuation=J(W.punctuation).replace(/punctuation/g,W._punctuation).getRegex(),W.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,W.escapedEmSt=/\\\*|\\_/g,W._comment=J(he._comment).replace("(?:-->|$)","-->").getRegex(),W.emStrong.lDelim=J(W.emStrong.lDelim).replace(/punct/g,W._punctuation).getRegex(),W.emStrong.rDelimAst=J(W.emStrong.rDelimAst,"g").replace(/punct/g,W._punctuation).getRegex(),W.emStrong.rDelimUnd=J(W.emStrong.rDelimUnd,"g").replace(/punct/g,W._punctuation).getRegex(),W._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,W._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,W._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,W.autolink=J(W.autolink).replace("scheme",W._scheme).replace("email",W._email).getRegex(),W._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,W.tag=J(W.tag).replace("comment",W._comment).replace("attribute",W._attribute).getRegex(),W._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,W._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,W._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,W.link=J(W.link).replace("label",W._label).replace("href",W._href).replace("title",W._title).getRegex(),W.reflink=J(W.reflink).replace("label",W._label).getRegex(),W.reflinkSearch=J(W.reflinkSearch,"g").replace("reflink",W.reflink).replace("nolink",W.nolink).getRegex(),W.normal=ye({},W),W.pedantic=ye({},W.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:J(/^!?\[(label)\]\((.*?)\)/).replace("label",W._label).getRegex(),reflink:J(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",W._label).getRegex()}),W.gfm=ye({},W.normal,{escape:J(W.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),W.gfm.url=J(W.gfm.url,"i").replace("email",W.gfm._extended_email).getRegex(),W.breaks=ye({},W.gfm,{br:J(W.br).replace("{2,}","*").getRegex(),text:J(W.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var ot={block:he,inline:W},Me=Wn,vt=o.exports.defaults,pt=ot.block,ei=ot.inline,zn=me.repeatString;function eh(M){return M.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function eo(M){var K="",Q,R,B=M.length;for(Q=0;Q<B;Q++)R=M.charCodeAt(Q),Math.random()>.5&&(R="x"+R.toString(16)),K+="&#"+R+";";return K}var nr=function(){function M(Q){this.tokens=[],this.tokens.links=Object.create(null),this.options=Q||vt,this.options.tokenizer=this.options.tokenizer||new Me,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var R={block:pt.normal,inline:ei.normal};this.options.pedantic?(R.block=pt.pedantic,R.inline=ei.pedantic):this.options.gfm&&(R.block=pt.gfm,this.options.breaks?R.inline=ei.breaks:R.inline=ei.gfm),this.tokenizer.rules=R}M.lex=function(R,B){var O=new M(B);return O.lex(R)},M.lexInline=function(R,B){var O=new M(B);return O.inlineTokens(R)};var K=M.prototype;return K.lex=function(R){R=R.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(R,this.tokens);for(var B;B=this.inlineQueue.shift();)this.inlineTokens(B.src,B.tokens);return this.tokens},K.blockTokens=function(R,B){var O=this;B===void 0&&(B=[]),this.options.pedantic&&(R=R.replace(/^ +$/gm,""));for(var E,H,X,ie;R;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Fe){return(E=Fe.call({lexer:O},R,B))?(R=R.substring(E.raw.length),B.push(E),!0):!1}))){if(E=this.tokenizer.space(R)){R=R.substring(E.raw.length),E.type&&B.push(E);continue}if(E=this.tokenizer.code(R)){R=R.substring(E.raw.length),H=B[B.length-1],H&&(H.type==="paragraph"||H.type==="text")?(H.raw+=`
`+E.raw,H.text+=`
`+E.text,this.inlineQueue[this.inlineQueue.length-1].src=H.text):B.push(E);continue}if(E=this.tokenizer.fences(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.heading(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.hr(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.blockquote(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.list(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.html(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.def(R)){R=R.substring(E.raw.length),H=B[B.length-1],H&&(H.type==="paragraph"||H.type==="text")?(H.raw+=`
`+E.raw,H.text+=`
`+E.raw,this.inlineQueue[this.inlineQueue.length-1].src=H.text):this.tokens.links[E.tag]||(this.tokens.links[E.tag]={href:E.href,title:E.title});continue}if(E=this.tokenizer.table(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.lheading(R)){R=R.substring(E.raw.length),B.push(E);continue}if(X=R,this.options.extensions&&this.options.extensions.startBlock&&function(){var Fe=1/0,He=R.slice(1),qe=void 0;O.options.extensions.startBlock.forEach(function(ge){qe=ge.call({lexer:this},He),typeof qe=="number"&&qe>=0&&(Fe=Math.min(Fe,qe))}),Fe<1/0&&Fe>=0&&(X=R.substring(0,Fe+1))}(),this.state.top&&(E=this.tokenizer.paragraph(X))){H=B[B.length-1],ie&&H.type==="paragraph"?(H.raw+=`
`+E.raw,H.text+=`
`+E.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=H.text):B.push(E),ie=X.length!==R.length,R=R.substring(E.raw.length);continue}if(E=this.tokenizer.text(R)){R=R.substring(E.raw.length),H=B[B.length-1],H&&H.type==="text"?(H.raw+=`
`+E.raw,H.text+=`
`+E.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=H.text):B.push(E);continue}if(R){var we="Infinite loop on byte: "+R.charCodeAt(0);if(this.options.silent){console.error(we);break}else throw new Error(we)}}return this.state.top=!0,B},K.inline=function(R,B){this.inlineQueue.push({src:R,tokens:B})},K.inlineTokens=function(R,B){var O=this;B===void 0&&(B=[]);var E,H,X,ie=R,we,Fe,He;if(this.tokens.links){var qe=Object.keys(this.tokens.links);if(qe.length>0)for(;(we=this.tokenizer.rules.inline.reflinkSearch.exec(ie))!=null;)qe.includes(we[0].slice(we[0].lastIndexOf("[")+1,-1))&&(ie=ie.slice(0,we.index)+"["+zn("a",we[0].length-2)+"]"+ie.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(we=this.tokenizer.rules.inline.blockSkip.exec(ie))!=null;)ie=ie.slice(0,we.index)+"["+zn("a",we[0].length-2)+"]"+ie.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(we=this.tokenizer.rules.inline.escapedEmSt.exec(ie))!=null;)ie=ie.slice(0,we.index)+"++"+ie.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;R;)if(Fe||(He=""),Fe=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Re){return(E=Re.call({lexer:O},R,B))?(R=R.substring(E.raw.length),B.push(E),!0):!1}))){if(E=this.tokenizer.escape(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.tag(R)){R=R.substring(E.raw.length),H=B[B.length-1],H&&E.type==="text"&&H.type==="text"?(H.raw+=E.raw,H.text+=E.text):B.push(E);continue}if(E=this.tokenizer.link(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.reflink(R,this.tokens.links)){R=R.substring(E.raw.length),H=B[B.length-1],H&&E.type==="text"&&H.type==="text"?(H.raw+=E.raw,H.text+=E.text):B.push(E);continue}if(E=this.tokenizer.emStrong(R,ie,He)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.codespan(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.br(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.del(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.autolink(R,eo)){R=R.substring(E.raw.length),B.push(E);continue}if(!this.state.inLink&&(E=this.tokenizer.url(R,eo))){R=R.substring(E.raw.length),B.push(E);continue}if(X=R,this.options.extensions&&this.options.extensions.startInline&&function(){var Re=1/0,Wi=R.slice(1),wt=void 0;O.options.extensions.startInline.forEach(function(Hn){wt=Hn.call({lexer:this},Wi),typeof wt=="number"&&wt>=0&&(Re=Math.min(Re,wt))}),Re<1/0&&Re>=0&&(X=R.substring(0,Re+1))}(),E=this.tokenizer.inlineText(X,eh)){R=R.substring(E.raw.length),E.raw.slice(-1)!=="_"&&(He=E.raw.slice(-1)),Fe=!0,H=B[B.length-1],H&&H.type==="text"?(H.raw+=E.raw,H.text+=E.text):B.push(E);continue}if(R){var ge="Infinite loop on byte: "+R.charCodeAt(0);if(this.options.silent){console.error(ge);break}else throw new Error(ge)}}return B},t(M,null,[{key:"rules",get:function(){return{block:pt,inline:ei}}}]),M}(),en=o.exports.defaults,Bs=me.cleanUrl,to=me.escape,ps=function(){function M(Q){this.options=Q||en}var K=M.prototype;return K.code=function(R,B,O){var E=(B||"").match(/\S*/)[0];if(this.options.highlight){var H=this.options.highlight(R,E);H!=null&&H!==R&&(O=!0,R=H)}return R=R.replace(/\n$/,"")+`
`,E?'<pre><code class="'+this.options.langPrefix+to(E,!0)+'">'+(O?R:to(R,!0))+`</code></pre>
`:"<pre><code>"+(O?R:to(R,!0))+`</code></pre>
`},K.blockquote=function(R){return`<blockquote>
`+R+`</blockquote>
`},K.html=function(R){return R},K.heading=function(R,B,O,E){return this.options.headerIds?"<h"+B+' id="'+this.options.headerPrefix+E.slug(O)+'">'+R+"</h"+B+`>
`:"<h"+B+">"+R+"</h"+B+`>
`},K.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},K.list=function(R,B,O){var E=B?"ol":"ul",H=B&&O!==1?' start="'+O+'"':"";return"<"+E+H+`>
`+R+"</"+E+`>
`},K.listitem=function(R){return"<li>"+R+`</li>
`},K.checkbox=function(R){return"<input "+(R?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},K.paragraph=function(R){return"<p>"+R+`</p>
`},K.table=function(R,B){return B&&(B="<tbody>"+B+"</tbody>"),`<table>
<thead>
`+R+`</thead>
`+B+`</table>
`},K.tablerow=function(R){return`<tr>
`+R+`</tr>
`},K.tablecell=function(R,B){var O=B.header?"th":"td",E=B.align?"<"+O+' align="'+B.align+'">':"<"+O+">";return E+R+"</"+O+`>
`},K.strong=function(R){return"<strong>"+R+"</strong>"},K.em=function(R){return"<em>"+R+"</em>"},K.codespan=function(R){return"<code>"+R+"</code>"},K.br=function(){return this.options.xhtml?"<br/>":"<br>"},K.del=function(R){return"<del>"+R+"</del>"},K.link=function(R,B,O){if(R=Bs(this.options.sanitize,this.options.baseUrl,R),R===null)return O;var E='<a href="'+to(R)+'"';return B&&(E+=' title="'+B+'"'),E+=">"+O+"</a>",E},K.image=function(R,B,O){if(R=Bs(this.options.sanitize,this.options.baseUrl,R),R===null)return O;var E='<img src="'+R+'" alt="'+O+'"';return B&&(E+=' title="'+B+'"'),E+=this.options.xhtml?"/>":">",E},K.text=function(R){return R},M}(),Fa=function(){function M(){}var K=M.prototype;return K.strong=function(R){return R},K.em=function(R){return R},K.codespan=function(R){return R},K.del=function(R){return R},K.html=function(R){return R},K.text=function(R){return R},K.link=function(R,B,O){return""+O},K.image=function(R,B,O){return""+O},K.br=function(){return""},M}(),C=function(){function M(){this.seen={}}var K=M.prototype;return K.serialize=function(R){return R.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},K.getNextSafeSlug=function(R,B){var O=R,E=0;if(this.seen.hasOwnProperty(O)){E=this.seen[R];do E++,O=R+"-"+E;while(this.seen.hasOwnProperty(O))}return B||(this.seen[R]=E,this.seen[O]=0),O},K.slug=function(R,B){B===void 0&&(B={});var O=this.serialize(R);return this.getNextSafeSlug(O,B.dryrun)},M}(),A=ps,I=Fa,j=C,Y=o.exports.defaults,ae=me.unescape,_e=function(){function M(Q){this.options=Q||Y,this.options.renderer=this.options.renderer||new A,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new I,this.slugger=new j}M.parse=function(R,B){var O=new M(B);return O.parse(R)},M.parseInline=function(R,B){var O=new M(B);return O.parseInline(R)};var K=M.prototype;return K.parse=function(R,B){B===void 0&&(B=!0);var O="",E,H,X,ie,we,Fe,He,qe,ge,Re,Wi,wt,Hn,jl,tn,zu,Hw,Hu,Uu,Uw=R.length;for(E=0;E<Uw;E++){if(Re=R[E],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Re.type]&&(Uu=this.options.extensions.renderers[Re.type].call({parser:this},Re),Uu!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Re.type))){O+=Uu||"";continue}switch(Re.type){case"space":continue;case"hr":{O+=this.renderer.hr();continue}case"heading":{O+=this.renderer.heading(this.parseInline(Re.tokens),Re.depth,ae(this.parseInline(Re.tokens,this.textRenderer)),this.slugger);continue}case"code":{O+=this.renderer.code(Re.text,Re.lang,Re.escaped);continue}case"table":{for(qe="",He="",ie=Re.header.length,H=0;H<ie;H++)He+=this.renderer.tablecell(this.parseInline(Re.header[H].tokens),{header:!0,align:Re.align[H]});for(qe+=this.renderer.tablerow(He),ge="",ie=Re.rows.length,H=0;H<ie;H++){for(Fe=Re.rows[H],He="",we=Fe.length,X=0;X<we;X++)He+=this.renderer.tablecell(this.parseInline(Fe[X].tokens),{header:!1,align:Re.align[X]});ge+=this.renderer.tablerow(He)}O+=this.renderer.table(qe,ge);continue}case"blockquote":{ge=this.parse(Re.tokens),O+=this.renderer.blockquote(ge);continue}case"list":{for(Wi=Re.ordered,wt=Re.start,Hn=Re.loose,ie=Re.items.length,ge="",H=0;H<ie;H++)tn=Re.items[H],zu=tn.checked,Hw=tn.task,jl="",tn.task&&(Hu=this.renderer.checkbox(zu),Hn?tn.tokens.length>0&&tn.tokens[0].type==="paragraph"?(tn.tokens[0].text=Hu+" "+tn.tokens[0].text,tn.tokens[0].tokens&&tn.tokens[0].tokens.length>0&&tn.tokens[0].tokens[0].type==="text"&&(tn.tokens[0].tokens[0].text=Hu+" "+tn.tokens[0].tokens[0].text)):tn.tokens.unshift({type:"text",text:Hu}):jl+=Hu),jl+=this.parse(tn.tokens,Hn),ge+=this.renderer.listitem(jl,Hw,zu);O+=this.renderer.list(ge,Wi,wt);continue}case"html":{O+=this.renderer.html(Re.text);continue}case"paragraph":{O+=this.renderer.paragraph(this.parseInline(Re.tokens));continue}case"text":{for(ge=Re.tokens?this.parseInline(Re.tokens):Re.text;E+1<Uw&&R[E+1].type==="text";)Re=R[++E],ge+=`
`+(Re.tokens?this.parseInline(Re.tokens):Re.text);O+=B?this.renderer.paragraph(ge):ge;continue}default:{var yg='Token with "'+Re.type+'" type was not found.';if(this.options.silent){console.error(yg);return}else throw new Error(yg)}}}return O},K.parseInline=function(R,B){B=B||this.renderer;var O="",E,H,X,ie=R.length;for(E=0;E<ie;E++){if(H=R[E],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[H.type]&&(X=this.options.extensions.renderers[H.type].call({parser:this},H),X!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(H.type))){O+=X||"";continue}switch(H.type){case"escape":{O+=B.text(H.text);break}case"html":{O+=B.html(H.text);break}case"link":{O+=B.link(H.href,H.title,this.parseInline(H.tokens,B));break}case"image":{O+=B.image(H.href,H.title,H.text);break}case"strong":{O+=B.strong(this.parseInline(H.tokens,B));break}case"em":{O+=B.em(this.parseInline(H.tokens,B));break}case"codespan":{O+=B.codespan(H.text);break}case"br":{O+=B.br();break}case"del":{O+=B.del(this.parseInline(H.tokens,B));break}case"text":{O+=B.text(H.text);break}default:{var we='Token with "'+H.type+'" type was not found.';if(this.options.silent){console.error(we);return}else throw new Error(we)}}}return O},M}(),_t=nr,ci=_e,Rt=Wn,Ot=ps,hi=Fa,$l=C,Ba=me.merge,bg=me.checkSanitizeDeprecation,Vs=me.escape,Wu=o.exports.getDefaults,vg=o.exports.changeDefaults,wg=o.exports.defaults;function st(M,K,Q){if(typeof M>"u"||M===null)throw new Error("marked(): input parameter is undefined or null");if(typeof M!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(M)+", string expected");if(typeof K=="function"&&(Q=K,K=null),K=Ba({},st.defaults,K||{}),bg(K),Q){var R=K.highlight,B;try{B=_t.lex(M,K)}catch(X){return Q(X)}var O=function(ie){var we;if(!ie)try{K.walkTokens&&st.walkTokens(B,K.walkTokens),we=ci.parse(B,K)}catch(Fe){ie=Fe}return K.highlight=R,ie?Q(ie):Q(null,we)};if(!R||R.length<3||(delete K.highlight,!B.length))return O();var E=0;st.walkTokens(B,function(X){X.type==="code"&&(E++,setTimeout(function(){R(X.text,X.lang,function(ie,we){if(ie)return O(ie);we!=null&&we!==X.text&&(X.text=we,X.escaped=!0),E--,E===0&&O()})},0))}),E===0&&O();return}try{var H=_t.lex(M,K);return K.walkTokens&&st.walkTokens(H,K.walkTokens),ci.parse(H,K)}catch(X){if(X.message+=`
Please report this to https://github.com/markedjs/marked.`,K.silent)return"<p>An error occurred:</p><pre>"+Vs(X.message+"",!0)+"</pre>";throw X}}st.options=st.setOptions=function(M){return Ba(st.defaults,M),vg(st.defaults),st},st.getDefaults=Wu,st.defaults=wg,st.use=function(){for(var M=this,K=arguments.length,Q=new Array(K),R=0;R<K;R++)Q[R]=arguments[R];var B=Ba.apply(void 0,[{}].concat(Q)),O=st.defaults.extensions||{renderers:{},childTokens:{}},E;Q.forEach(function(H){if(H.extensions&&(E=!0,H.extensions.forEach(function(ie){if(!ie.name)throw new Error("extension name required");if(ie.renderer){var we=O.renderers?O.renderers[ie.name]:null;we?O.renderers[ie.name]=function(){for(var Fe=arguments.length,He=new Array(Fe),qe=0;qe<Fe;qe++)He[qe]=arguments[qe];var ge=ie.renderer.apply(this,He);return ge===!1&&(ge=we.apply(this,He)),ge}:O.renderers[ie.name]=ie.renderer}if(ie.tokenizer){if(!ie.level||ie.level!=="block"&&ie.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");O[ie.level]?O[ie.level].unshift(ie.tokenizer):O[ie.level]=[ie.tokenizer],ie.start&&(ie.level==="block"?O.startBlock?O.startBlock.push(ie.start):O.startBlock=[ie.start]:ie.level==="inline"&&(O.startInline?O.startInline.push(ie.start):O.startInline=[ie.start]))}ie.childTokens&&(O.childTokens[ie.name]=ie.childTokens)})),H.renderer&&function(){var ie=st.defaults.renderer||new Ot,we=function(qe){var ge=ie[qe];ie[qe]=function(){for(var Re=arguments.length,Wi=new Array(Re),wt=0;wt<Re;wt++)Wi[wt]=arguments[wt];var Hn=H.renderer[qe].apply(ie,Wi);return Hn===!1&&(Hn=ge.apply(ie,Wi)),Hn}};for(var Fe in H.renderer)we(Fe);B.renderer=ie}(),H.tokenizer&&function(){var ie=st.defaults.tokenizer||new Rt,we=function(qe){var ge=ie[qe];ie[qe]=function(){for(var Re=arguments.length,Wi=new Array(Re),wt=0;wt<Re;wt++)Wi[wt]=arguments[wt];var Hn=H.tokenizer[qe].apply(ie,Wi);return Hn===!1&&(Hn=ge.apply(ie,Wi)),Hn}};for(var Fe in H.tokenizer)we(Fe);B.tokenizer=ie}(),H.walkTokens){var X=st.defaults.walkTokens;B.walkTokens=function(ie){H.walkTokens.call(M,ie),X&&X(ie)}}E&&(B.extensions=O),st.setOptions(B)})},st.walkTokens=function(M,K){for(var Q=function(){var E=B.value;switch(K(E),E.type){case"table":{for(var H=r(E.header),X;!(X=H()).done;){var ie=X.value;st.walkTokens(ie.tokens,K)}for(var we=r(E.rows),Fe;!(Fe=we()).done;)for(var He=Fe.value,qe=r(He),ge;!(ge=qe()).done;){var Re=ge.value;st.walkTokens(Re.tokens,K)}break}case"list":{st.walkTokens(E.items,K);break}default:st.defaults.extensions&&st.defaults.extensions.childTokens&&st.defaults.extensions.childTokens[E.type]?st.defaults.extensions.childTokens[E.type].forEach(function(Wi){st.walkTokens(E[Wi],K)}):E.tokens&&st.walkTokens(E.tokens,K)}},R=r(M),B;!(B=R()).done;)Q()},st.parseInline=function(M,K){if(typeof M>"u"||M===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof M!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(M)+", string expected");K=Ba({},st.defaults,K||{}),bg(K);try{var Q=_t.lexInline(M,K);return K.walkTokens&&st.walkTokens(Q,K.walkTokens),ci.parseInline(Q,K)}catch(R){if(R.message+=`
Please report this to https://github.com/markedjs/marked.`,K.silent)return"<p>An error occurred:</p><pre>"+Vs(R.message+"",!0)+"</pre>";throw R}},st.Parser=ci,st.parser=ci.parse,st.Renderer=Ot,st.TextRenderer=hi,st.Lexer=_t,st.lexer=_t.lex,st.Tokenizer=Rt,st.Slugger=$l,st.parse=st;var Va=st;return Va})})();Ul.Parser;Ul.parser;var s6e=Ul.Renderer;Ul.TextRenderer;Ul.Lexer;Ul.lexer;Ul.Tokenizer;Ul.Slugger;var r6e=Ul.parse;function o6e(i,e={},t={}){var n;const s=new de;let r=!1;const o=s.add(new Na),a=FP(e),l=function(p){let m;try{m=nM(decodeURIComponent(p))}catch{}return m?(m=hxe(m,v=>{if(i.uris&&i.uris[v])return We.revive(i.uris[v])}),encodeURIComponent(JSON.stringify(m))):p},c=function(p,m){const v=i.uris&&i.uris[p];if(!v)return p;let b=We.revive(v);return m?p.startsWith(it.data+":")?p:FZ.asBrowserUri(b).toString(!0):We.parse(p).toString()===b.toString()?p:(b.query&&(b=b.with({query:l(b.query)})),b.toString())};let h;const u=new Promise(p=>h=p),d=new s6e;if(d.image=(p,m,v)=>{let b=[],w=[];if(p){({href:p,dimensions:b}=MRe(p)),p=c(p,!0);try{const y=We.parse(p);e.baseUrl&&y.scheme===it.file&&(p=Q9(e.baseUrl,p).toString())}catch{}w.push(`src="${p}"`)}return v&&w.push(`alt="${v}"`),m&&w.push(`title="${m}"`),b.length&&(w=w.concat(b)),"<img "+w.join(" ")+">"},d.link=(p,m,v)=>(p===v&&(v=qE(v)),p=c(p,!1),e.baseUrl&&(/^\w[\w\d+.-]*:/.test(p)||(p=Q9(e.baseUrl,p).toString())),m=qE(m),p=qE(p),!p||p.match(/^data:|javascript:/i)||p.match(/^command:/i)&&!i.isTrusted||p.match(/^command:(\/\/\/)?_workbench\.downloadResource/i)?v:(p=p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="#" data-href="${p}" title="${m||p}">${v}</a>`)),d.paragraph=p=>`<p>${p}</p>`,e.codeBlockRenderer&&(d.code=(p,m)=>{const v=e.codeBlockRenderer(m,p),b=vJ.nextId();return OZ(Promise.all([v,u]),o.token).then(w=>{var y;if(!r&&w){const x=a.querySelector(`div[data-code="${b}"]`);x&&ww(x,w[0]),(y=e.asyncRenderCallback)===null||y===void 0||y.call(e)}}).catch(()=>{}),`<div class="code" data-code="${b}">${XO(p)}</div>`}),e.actionHandler){const p=e.actionHandler.disposables.add(new Bt(a,"click")),m=e.actionHandler.disposables.add(new Bt(a,"auxclick"));e.actionHandler.disposables.add(ke.any(p.event,m.event)(v=>{const b=new zr(v);if(!b.leftButton&&!b.middleButton)return;let w=b.target;if(!(w.tagName!=="A"&&(w=w.parentElement,!w||w.tagName!=="A")))try{const y=w.dataset.href;y&&e.actionHandler.callback(y,b)}catch(y){Ke(y)}finally{b.preventDefault()}}))}i.supportHtml||(t.sanitizer=p=>(i.isTrusted?p.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?p:"",t.sanitize=!0,t.silent=!0),t.renderer=d;let f=(n=i.value)!==null&&n!==void 0?n:"";f.length>1e5&&(f=`${f.substr(0,1e5)}…`),i.supportThemeIcons&&(f=P4e(f));let g=r6e(f,t);if(i.supportThemeIcons&&(g=Xp(g).map(m=>typeof m=="string"?m:m.outerHTML).join("")),a.innerHTML=a6e(i,g),h(),e.asyncRenderCallback)for(const p of a.getElementsByTagName("img")){const m=s.add(ne(p,"load",()=>{m.dispose(),e.asyncRenderCallback()}))}return{element:a,dispose:()=>{r=!0,o.cancel(),s.dispose()}}}function a6e(i,e){const{config:t,allowedSchemes:n}=l6e(i);Bz("uponSanitizeAttribute",(r,o)=>{if(o.attrName==="style"||o.attrName==="class"){if(r.tagName==="SPAN"){if(o.attrName==="style"){o.keepAttr=/^(color\:#[0-9a-fA-F]+;)?(background-color\:#[0-9a-fA-F]+;)?$/.test(o.attrValue);return}else if(o.attrName==="class"){o.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(o.attrValue);return}}o.keepAttr=!1;return}});const s=document.createElement("a");Bz("afterSanitizeAttributes",r=>{for(const o of["href","src"])r.hasAttribute(o)&&(s.href=r.getAttribute(o),n.includes(s.protocol.replace(/:$/,""))||r.removeAttribute(o))});try{return n6e(e,Object.assign(Object.assign({},t),{RETURN_TRUSTED_TYPE:!0}))}finally{Vz("uponSanitizeAttribute"),Vz("afterSanitizeAttributes")}}function l6e(i){const e=[it.http,it.https,it.mailto,it.data,it.file,it.vscodeFileResource,it.vscodeRemote,it.vscodeRemoteResource];return i.isTrusted&&e.push(it.command),{config:{ALLOWED_TAGS:["ul","li","p","b","i","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"],ALLOWED_ATTR:["href","data-href","target","title","src","alt","class","style","data-code","width","height","align"],ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}var c6e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Wz=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},h6e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},uI;let Vf=class Ree{constructor(e,t,n){this._options=e,this._modeService=t,this._openerService=n,this._onDidRenderAsync=new z,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const s=new de;return{element:s.add(o6e(e,Object.assign(Object.assign({},this._getRenderOptions(e,s)),t),n)).element,dispose:()=>s.dispose()}}_getRenderOptions(e,t){return{baseUrl:this._options.baseUrl,codeBlockRenderer:(n,s)=>h6e(this,void 0,void 0,function*(){var r,o,a,l;let c;n?c=this._modeService.getModeIdForLanguageName(n):this._options.editor&&(c=(r=this._options.editor.getModel())===null||r===void 0?void 0:r.getLanguageId()),c||(c="plaintext"),this._modeService.triggerMode(c);const h=(o=yield xi.getPromise(c))!==null&&o!==void 0?o:void 0,u=document.createElement("span");if(u.innerHTML=(l=(a=Ree._ttpTokenizer)===null||a===void 0?void 0:a.createHTML(s,this._modeService.languageIdCodec,h))!==null&&l!==void 0?l:vX(s,this._modeService.languageIdCodec,h),this._options.editor){const d=this._options.editor.getOption(43);Fn.applyFontInfoSlow(u,d)}else this._options.codeBlockFontFamily&&(u.style.fontFamily=this._options.codeBlockFontFamily);return u}),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:n=>this._openerService.open(n,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:e.isTrusted}).catch(Ke),disposables:t}}}};Vf._ttpTokenizer=(uI=window.trustedTypes)===null||uI===void 0?void 0:uI.createPolicy("tokenizeToString",{createHTML(i,e,t){return vX(i,e,t)}});Vf=c6e([Wz(1,Os),Wz(2,gu)],Vf);function Oee(i,e,t){const s=Iv.ordered(i).map(r=>Promise.resolve(r.provideHover(i,e,t)).then(o=>o&&u6e(o)?o:void 0,o=>{Fo(o)}));return Promise.all(s).then(YL)}A0("_executeHoverProvider",(i,e)=>Oee(i,e,Xt.None));function u6e(i){const e=typeof i.range<"u",t=typeof i.contents<"u"&&i.contents&&i.contents.length>0;return e&&t}var d6e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},dI=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},f6e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const zz=ue;class cC{constructor(e,t,n){this.owner=e,this.range=t,this.contents=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let l3=class{constructor(e,t,n,s,r){this._editor=e,this._hover=t,this._modeService=n,this._openerService=s,this._configurationService=r}createLoadingMessage(e){return new cC(this,e.range,[new Wm().appendText(_("modesContentHover.loading","Loading..."))])}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),s=e.range.startLineNumber,r=n.getLineMaxColumn(s),o=[];for(const h of t){const u=h.range.startLineNumber===s?h.range.startColumn:1,d=h.range.endLineNumber===s?h.range.endColumn:r,f=h.options.hoverMessage;if(!f||Pb(f))continue;const g=new F(e.range.startLineNumber,u,e.range.startLineNumber,d);o.push(new cC(this,g,PY(f)))}const a=n.getLineLength(s),l=n.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),c=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:l});return typeof c=="number"&&a>=c&&o.push(new cC(this,e.range,[{value:_("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}])),o}computeAsync(e,t,n){return f6e(this,void 0,void 0,function*(){if(!this._editor.hasModel()||e.type!==1)return Promise.resolve([]);const s=this._editor.getModel();if(!Iv.has(s))return Promise.resolve([]);const r=yield Oee(s,new q(e.range.startLineNumber,e.range.startColumn),n),o=[];for(const a of r){if(Pb(a.contents))continue;const l=a.range?F.lift(a.range):e.range;o.push(new cC(this,l,a.contents))}return o})}renderHoverParts(e,t,n){const s=new de;for(const r of e)for(const o of r.contents){if(Pb(o))continue;const a=zz("div.hover-row.markdown-hover"),l=se(a,zz("div.hover-contents")),c=s.add(new Vf({editor:this._editor},this._modeService,this._openerService));s.add(c.onDidRenderAsync(()=>{l.className="hover-contents code-hover-contents",this._hover.onContentsChanged()}));const h=s.add(c.render(o));l.appendChild(h.element),t.appendChild(a)}return s}};l3=d6e([dI(2,Os),dI(3,gu),dI(4,Fi)],l3);class It{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+It.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new It(this.value+It.sep+e)}}It.sep=".";It.None=new It("@@none@@");It.Empty=new It("");It.QuickFix=new It("quickfix");It.Refactor=new It("refactor");It.Source=new It("source");It.SourceOrganizeImports=It.Source.append("organizeImports");It.SourceFixAll=It.Source.append("fixAll");function g6e(i,e){return!(i.include&&!i.include.intersects(e)||i.excludes&&i.excludes.some(t=>Pee(e,t,i.include))||!i.includeSourceActions&&It.Source.contains(e))}function p6e(i,e){const t=e.kind?new It(e.kind):void 0;return!(i.include&&(!t||!i.include.contains(t))||i.excludes&&t&&i.excludes.some(n=>Pee(t,n,i.include))||!i.includeSourceActions&&t&&It.Source.contains(t)||i.onlyIncludePreferredActions&&!e.isPreferred)}function Pee(i,e,t){return!(!e.contains(i)||t&&e.contains(t))}class gd{constructor(e,t,n){this.kind=e,this.apply=t,this.preferred=n}static fromUser(e,t){return!e||typeof e!="object"?new gd(t.kind,t.apply,!1):new gd(gd.getKindFromUser(e,t.kind),gd.getApplyFromUser(e,t.apply),gd.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new It(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}}var XP=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const m6e="editor.action.codeAction",_6e="editor.action.refactor",b6e="editor.action.sourceAction",Fee="editor.action.organizeImports",Bee="editor.action.fixAll";class Vee{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return XP(this,void 0,void 0,function*(){if(!((t=this.provider)===null||t===void 0)&&t.resolveCodeAction&&!this.action.edit){let n;try{n=yield this.provider.resolveCodeAction(this.action,e)}catch(s){Fo(s)}n&&(this.action.edit=n.edit)}return this})}}class JP extends te{constructor(e,t,n){super(),this.documentation=t,this._register(n),this.allActions=[...e].sort(JP.codeActionsComparator),this.validActions=this.allActions.filter(({action:s})=>!s.disabled)}static codeActionsComparator({action:e},{action:t}){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:kl(e.diagnostics)?kl(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:kl(t.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&It.QuickFix.contains(new It(e.kind))&&!!e.isPreferred)}}const Hz={actions:[],documentation:void 0};function eF(i,e,t,n,s){var r;const o=t.filter||{},a={only:(r=o.include)===null||r===void 0?void 0:r.value,trigger:t.type},l=new KNe(i,s),c=v6e(i,o),h=new de,u=c.map(f=>XP(this,void 0,void 0,function*(){try{n.report(f);const g=yield f.provideCodeActions(i,e,a,l.token);if(g&&h.add(g),l.token.isCancellationRequested)return Hz;const p=((g==null?void 0:g.actions)||[]).filter(v=>v&&p6e(o,v)),m=w6e(f,p,o.include);return{actions:p.map(v=>new Vee(v,f)),documentation:m}}catch(g){if(Bu(g))throw g;return Fo(g),Hz}})),d=Dl.onDidChange(()=>{const f=Dl.all(i);Ll(f,c)||l.cancel()});return Promise.all(u).then(f=>{const g=m5(f.map(m=>m.actions)),p=YL(f.map(m=>m.documentation));return new JP(g,p,h)}).finally(()=>{d.dispose(),l.dispose()})}function v6e(i,e){return Dl.all(i).filter(t=>t.providedCodeActionKinds?t.providedCodeActionKinds.some(n=>g6e(e,new It(n))):!0)}function w6e(i,e,t){if(!i.documentation)return;const n=i.documentation.map(s=>({kind:new It(s.kind),command:s.command}));if(t){let s;for(const r of n)r.kind.contains(t)&&(s?s.kind.contains(r.kind)&&(s=r):s=r);if(s)return s==null?void 0:s.command}for(const s of e)if(s.kind){for(const r of n)if(r.kind.contains(new It(s.kind)))return r.command}}Tt.registerCommand("_executeCodeActionProvider",function(i,e,t,n,s){return XP(this,void 0,void 0,function*(){if(!(e instanceof We))throw yl();const r=i.get(Rs).getModel(e);if(!r)throw yl();const o=Ve.isISelection(t)?Ve.liftSelection(t):F.isIRange(t)?r.validateRange(t):void 0;if(!o)throw yl();const a=typeof n=="string"?new It(n):void 0,l=yield eF(r,o,{type:1,filter:{includeSourceActions:!0,include:a}},xk.None,Xt.None),c=[],h=Math.min(l.validActions.length,typeof s=="number"?s:0);for(let u=0;u<h;u++)c.push(l.validActions[u].resolve(Xt.None));try{return yield Promise.all(c),l.validActions.map(u=>u.action)}finally{setTimeout(()=>l.dispose(),100)}})});class ID{constructor(e){this.executor=e,this._didRun=!1}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}var y6e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Uz=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},C6e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class $z extends Io{constructor(e,t){super(e.command?e.command.id:e.title,S6e(e.title),void 0,!e.disabled,t),this.action=e}}function S6e(i){return i.replace(/\r\n|\r|\n/g," ")}let c3=class extends te{constructor(e,t,n,s){super(),this._editor=e,this._delegate=t,this._contextMenuService=n,this._visible=!1,this._showingActions=this._register(new Lr),this._keybindingResolver=new Qk({getKeybindings:()=>s.getKeybindings()})}get isVisible(){return this._visible}show(e,t,n,s){return C6e(this,void 0,void 0,function*(){const r=s.includeDisabledActions?t.allActions:t.validActions;if(!r.length){this._visible=!1;return}if(!this._editor.getDomNode())throw this._visible=!1,w0();this._visible=!0,this._showingActions.value=t;const o=this.getMenuActions(e,r,t.documentation),a=q.isIPosition(n)?this._toCoords(n):n||{x:0,y:0},l=this._keybindingResolver.getResolver(),c=this._editor.getOption(113);this._contextMenuService.showContextMenu({domForShadowRoot:c?this._editor.getDomNode():void 0,getAnchor:()=>a,getActions:()=>o,onHide:()=>{this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:h=>h instanceof $z?l(h.action):void 0})})}getMenuActions(e,t,n){var s,r;const o=h=>new $z(h.action,()=>this._delegate.onSelectCodeAction(h)),a=t.map(o),l=[...n],c=this._editor.getModel();if(c&&a.length)for(const h of Dl.all(c))h._getAdditionalMenuItems&&l.push(...h._getAdditionalMenuItems({trigger:e.type,only:(r=(s=e.filter)===null||s===void 0?void 0:s.include)===null||r===void 0?void 0:r.value},t.map(u=>u.action)));return l.length&&a.push(new ha,...l.map(h=>o(new Vee({title:h.title,command:h},void 0)))),a}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),n=Nn(this._editor.getDomNode()),s=n.left+t.left,r=n.top+t.top+t.height;return{x:s,y:r}}};c3=y6e([Uz(2,ag),Uz(3,Bi)],c3);class Qk{constructor(e){this._keybindingProvider=e}getResolver(){const e=new ID(()=>this._keybindingProvider.getKeybindings().filter(t=>Qk.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let n=t.commandArgs;return t.command===Fee?n={kind:It.SourceOrganizeImports.value}:t.command===Bee&&(n={kind:It.SourceFixAll.value}),Object.assign({resolvedKeybinding:t.resolvedKeybinding},gd.fromUser(n,{kind:It.None,apply:"never"}))}));return t=>{if(t.kind){const n=this.bestKeybindingForCodeAction(t,e.getValue());return n==null?void 0:n.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const n=new It(e.kind);return t.filter(s=>s.kind.contains(n)).filter(s=>s.preferred?e.isPreferred:!0).reduceRight((s,r)=>s?s.kind.contains(r.kind)?r:s:r,void 0)}}Qk.codeActionCommands=[_6e,m6e,b6e,Fee,Bee];var x6e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},D6e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Vb;(function(i){i.Hidden={type:0};class e{constructor(n,s,r,o){this.actions=n,this.trigger=s,this.editorPosition=r,this.widgetPosition=o,this.type=1}}i.Showing=e})(Vb||(Vb={}));let TD=class Wee extends te{constructor(e,t,n,s){super(),this._editor=e,this._quickFixActionId=t,this._preferredFixActionId=n,this._keybindingService=s,this._onClick=this._register(new z),this.onClick=this._onClick.event,this._state=Vb.Hidden,this._domNode=document.createElement("div"),this._domNode.className=be.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(r=>{const o=this._editor.getModel();(this.state.type!==1||!o||this.state.editorPosition.lineNumber>=o.getLineCount())&&this.hide()})),kt.ignoreTarget(this._domNode),this._register(lSe(this._domNode,r=>{if(this.state.type!==1)return;this._editor.focus(),r.preventDefault();const{top:o,height:a}=Nn(this._domNode),l=this._editor.getOption(58);let c=Math.floor(l/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(c+=l),this._onClick.fire({x:r.posx,y:o+a+c,actions:this.state.actions,trigger:this.state.trigger})})),this._register(ne(this._domNode,"mouseenter",r=>{if((r.buttons&1)!==1)return;this.hide();const o=new sg;o.startMonitoring(r.target,r.buttons,E0,()=>{},()=>{o.dispose()})})),this._register(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(56)&&!this._editor.getOption(56).enabled&&this.hide()})),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,n){if(e.validActions.length<=0)return this.hide();const s=this._editor.getOptions();if(!s.get(56).enabled)return this.hide();const r=this._editor.getModel();if(!r)return this.hide();const{lineNumber:o,column:a}=r.validatePosition(n),l=r.getOptions().tabSize,c=s.get(43),h=r.getLineContent(o),u=Gr.computeIndentLevel(h,l),d=c.spaceWidth*u>22,f=p=>p>2&&this._editor.getTopForLineNumber(p)===this._editor.getTopForLineNumber(p-1);let g=o;if(!d){if(o>1&&!f(o-1))g-=1;else if(!f(o+1))g+=1;else if(a*c.spaceWidth<22)return this.hide()}this.state=new Vb.Showing(e,t,n,{position:{lineNumber:g,column:1},preference:Wee._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=Vb.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this.state.type===1&&this.state.actions.hasAutoFix){this._domNode.classList.remove(...be.lightBulb.classNamesArray),this._domNode.classList.add(...be.lightbulbAutofix.classNamesArray);const t=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(t){this.title=_("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",t.getLabel());return}}this._domNode.classList.remove(...be.lightbulbAutofix.classNamesArray),this._domNode.classList.add(...be.lightBulb.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._quickFixActionId);e?this.title=_("codeActionWithKb","Show Code Actions ({0})",e.getLabel()):this.title=_("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}};TD._posPref=[0];TD=x6e([D6e(3,Bi)],TD);Jt((i,e)=>{var t;const n=(t=i.getColor(Ur))===null||t===void 0?void 0:t.transparent(.7),s=i.getColor(NAe);s&&e.addRule(`
		.monaco-editor .contentWidgets ${be.lightBulb.cssSelector} {
			color: ${s};
			background-color: ${n};
		}`);const r=i.getColor(MAe);r&&e.addRule(`
		.monaco-editor .contentWidgets ${be.lightbulbAutofix.cssSelector} {
			color: ${r};
			background-color: ${n};
		}`)});var L6e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},k6e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},fI=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},A6e=globalThis&&globalThis.__classPrivateFieldSet||function(i,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!s:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(i,t):s?s.value=t:e.set(i,t),t},E6e=globalThis&&globalThis.__classPrivateFieldGet||function(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)},hS;let h3=class extends te{constructor(e,t,n,s,r){super(),this._editor=e,this.delegate=s,this._activeCodeActions=this._register(new Lr),hS.set(this,!1),this._codeActionWidget=new ID(()=>this._register(r.createInstance(c3,this._editor,{onSelectCodeAction:o=>fI(this,void 0,void 0,function*(){this.delegate.applyCodeAction(o,!0)})}))),this._lightBulbWidget=new ID(()=>{const o=this._register(r.createInstance(TD,this._editor,t,n));return this._register(o.onClick(a=>this.showCodeActionList(a.trigger,a.actions,a,{includeDisabledActions:!1}))),o})}dispose(){A6e(this,hS,!0,"f"),super.dispose()}update(e){var t,n,s;return fI(this,void 0,void 0,function*(){if(e.type!==1){(t=this._lightBulbWidget.rawValue)===null||t===void 0||t.hide();return}let r;try{r=yield e.actions}catch(o){Ke(o);return}if(!E6e(this,hS,"f"))if(this._lightBulbWidget.getValue().update(r,e.trigger,e.position),e.trigger.type===1){if(!((n=e.trigger.filter)===null||n===void 0)&&n.include){const a=this.tryGetValidActionToApply(e.trigger,r);if(a){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(a,!1)}finally{r.dispose()}return}if(e.trigger.context){const l=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,r);if(l&&l.action.disabled){Mo.get(this._editor).showMessage(l.action.disabled,e.trigger.context.position),r.dispose();return}}}const o=!!(!((s=e.trigger.filter)===null||s===void 0)&&s.include);if(e.trigger.context&&(!r.allActions.length||!o&&!r.validActions.length)){Mo.get(this._editor).showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=r,r.dispose();return}this._activeCodeActions.value=r,this._codeActionWidget.getValue().show(e.trigger,r,e.position,{includeDisabledActions:o})}else this._codeActionWidget.getValue().isVisible?r.dispose():this._activeCodeActions.value=r})}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:n})=>n.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}showCodeActionList(e,t,n,s){return fI(this,void 0,void 0,function*(){this._codeActionWidget.getValue().show(e,t,n,s)})}};hS=new WeakMap;h3=L6e([k6e(4,Wt)],h3);var gI=globalThis&&globalThis.__classPrivateFieldGet||function(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)},I6e=globalThis&&globalThis.__classPrivateFieldSet||function(i,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!s:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(i,t):s?s.value=t:e.set(i,t),t},ip;const zee=new De("supportedCodeAction","");class T6e extends te{constructor(e,t,n,s=250){super(),this._editor=e,this._markerService=t,this._signalChange=n,this._delay=s,this._autoTriggerTimer=this._register(new Ms),this._register(this._markerService.onMarkerChanged(r=>this._onMarkerChanges(r))),this._register(this._editor.onDidChangeCursorPosition(()=>this._onCursorChange()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(n=>tY(n,t.uri))&&this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_getRangeOfMarker(e){const t=this._editor.getModel();if(t)for(const n of this._markerService.read({resource:t.uri})){const s=t.validateRange(n);if(F.intersectRanges(s,e))return F.lift(s)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=this._editor.getSelection();if(n.isEmpty()&&e.type===2){const{lineNumber:s,column:r}=n.getPosition(),o=t.getLineContent(s);if(o.length===0)return;if(r===1){if(/\s/.test(o[0]))return}else if(r===t.getLineMaxColumn(s)){if(/\s/.test(o[o.length-1]))return}else if(/\s/.test(o[r-2])&&/\s/.test(o[r-1]))return}return n}_createEventAndSignalChange(e,t){const n=this._editor.getModel();if(!t||!n){this._signalChange(void 0);return}const s=this._getRangeOfMarker(t),r=s?s.getStartPosition():t.getStartPosition(),o={trigger:e,selection:t,position:r};return this._signalChange(o),o}}var pd;(function(i){i.Empty={type:0};class e{constructor(n,s,r,o){this.trigger=n,this.rangeOrSelection=s,this.position=r,this._cancellablePromise=o,this.type=1,this.actions=o.catch(a=>{if(Bu(a))return N6e;throw a})}cancel(){this._cancellablePromise.cancel()}}i.Triggered=e})(pd||(pd={}));const N6e={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class M6e extends te{constructor(e,t,n,s){super(),this._editor=e,this._markerService=t,this._progressService=s,this._codeActionOracle=this._register(new Lr),this._state=pd.Empty,this._onDidChangeState=this._register(new z),this.onDidChangeState=this._onDidChangeState.event,ip.set(this,!1),this._supportedCodeActions=zee.bindTo(n),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(Dl.onDidChange(()=>this._update())),this._update()}dispose(){gI(this,ip,"f")||(I6e(this,ip,!0,"f"),super.dispose(),this.setState(pd.Empty,!0))}_update(){if(gI(this,ip,"f"))return;this._codeActionOracle.value=void 0,this.setState(pd.Empty);const e=this._editor.getModel();if(e&&Dl.has(e)&&!this._editor.getOption(80)){const t=[];for(const n of Dl.all(e))Array.isArray(n.providedCodeActionKinds)&&t.push(...n.providedCodeActionKinds);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new T6e(this._editor,this._markerService,n=>{var s;if(!n){this.setState(pd.Empty);return}const r=kr(o=>eF(e,n.selection,n.trigger,xk.None,o));n.trigger.type===1&&((s=this._progressService)===null||s===void 0||s.showWhile(r,250)),this.setState(new pd.Triggered(n.trigger,n.selection,n.position,r))},void 0),this._codeActionOracle.value.trigger({type:2})}else this._supportedCodeActions.reset()}trigger(e){this._codeActionOracle.value&&this._codeActionOracle.value.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!gI(this,ip,"f")&&this._onDidChangeState.fire(e))}}ip=new WeakMap;var R6e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},hC=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Hee=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function O6e(i){return xe.regex(zee.keys()[0],new RegExp("(\\s|^)"+wa(i.value)+"\\b"))}_("args.schema.kind","Kind of the code action to run."),_("args.schema.apply","Controls when the returned actions are applied."),_("args.schema.apply.first","Always apply the first returned code action."),_("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),_("args.schema.apply.never","Do not apply the returned code actions."),_("args.schema.preferred","Controls if only preferred code actions should be returned.");let S1=class Uee extends te{constructor(e,t,n,s,r){super(),this._instantiationService=r,this._editor=e,this._model=this._register(new M6e(this._editor,t,n,s)),this._register(this._model.onDidChangeState(o=>this.update(o))),this._ui=new ID(()=>this._register(new h3(e,Ww.Id,Xk.Id,{applyCodeAction:(o,a)=>Hee(this,void 0,void 0,function*(){try{yield this._applyCodeAction(o)}finally{a&&this._trigger({type:2,filter:{}})}})},this._instantiationService)))}static get(e){return e.getContribution(Uee.ID)}update(e){this._ui.getValue().update(e)}showCodeActions(e,t,n){return this._ui.getValue().showCodeActionList(e,t,n,{includeDisabledActions:!1})}manualTriggerAtCurrentPosition(e,t,n){if(!this._editor.hasModel())return;Mo.get(this._editor).closeMessage();const s=this._editor.getPosition();this._trigger({type:1,filter:t,autoApply:n,context:{notAvailableMessage:e,position:s}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e){return this._instantiationService.invokeFunction(P6e,e,this._editor)}};S1.ID="editor.contrib.quickFixController";S1=R6e([hC(1,Mw),hC(2,$e),hC(3,R0),hC(4,Wt)],S1);function P6e(i,e,t){return Hee(this,void 0,void 0,function*(){const n=i.get(jY),s=i.get(vn),r=i.get(k0),o=i.get(Vn);if(r.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred}),yield e.resolve(Xt.None),e.action.edit&&(yield n.apply(C5.convert(e.action.edit),{editor:t,label:e.action.title})),e.action.command)try{yield s.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(a){const l=F6e(a);o.error(typeof l=="string"?l:_("applyCodeActionFailed","An unknown error occurred while applying the code action"))}})}function F6e(i){return typeof i=="string"?i:i instanceof Error&&typeof i.message=="string"?i.message:void 0}function $ee(i,e,t,n){if(i.hasModel()){const s=S1.get(i);s&&s.manualTriggerAtCurrentPosition(e,t,n)}}class Ww extends gi{constructor(){super({id:Ww.Id,label:_("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:xe.and(G.writable,G.hasCodeActionsProvider),kbOpts:{kbExpr:G.editorTextFocus,primary:2132,weight:100}})}run(e,t){return $ee(t,_("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0)}}Ww.Id="editor.action.quickFix";class Xk extends gi{constructor(){super({id:Xk.Id,label:_("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:xe.and(G.writable,O6e(It.QuickFix)),kbOpts:{kbExpr:G.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}run(e,t){return $ee(t,_("editor.action.autoFix.noneMessage","No auto fixes available"),{include:It.QuickFix,onlyIncludePreferredActions:!0},"ifSingle")}}Xk.Id="editor.action.autoFix";var jee=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},qee=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class jz{constructor(e,t,n){this.marker=e,this.index=t,this.total=n}}let u3=class Gee{constructor(e,t){this._markerService=t,this._onDidChange=new z,this.onDidChange=this._onDidChange.event,this._dispoables=new de,this._markers=[],this._nextIdx=-1,We.isUri(e)?this._resourceFilter=s=>s.toString()===e.toString():e&&(this._resourceFilter=e);const n=()=>{this._markers=this._markerService.read({resource:We.isUri(e)?e:void 0,severities:ai.Error|ai.Warning|ai.Info}),typeof e=="function"&&(this._markers=this._markers.filter(s=>this._resourceFilter(s.resource))),this._markers.sort(Gee._compareMarker)};n(),this._dispoables.add(t.onMarkerChanged(s=>{(!this._resourceFilter||s.some(r=>this._resourceFilter(r)))&&(n(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new jz(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,n){let s=!1,r=this._markers.findIndex(o=>o.resource.toString()===e.uri.toString());r<0&&(r=p5(this._markers,{resource:e.uri},(o,a)=>kv(o.resource.toString(),a.resource.toString())),r<0&&(r=~r));for(let o=r;o<this._markers.length;o++){let a=F.lift(this._markers[o]);if(a.isEmpty()){const l=e.getWordAtPosition(a.getStartPosition());l&&(a=new F(a.startLineNumber,l.startColumn,a.startLineNumber,l.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=o,s=!0;break}if(this._markers[o].resource.toString()!==e.uri.toString())break}s||(this._nextIdx=n?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,n){if(this._markers.length===0)return!1;let s=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,n,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),s!==this._nextIdx}find(e,t){let n=this._markers.findIndex(s=>s.resource.toString()===e.toString());if(!(n<0)){for(;n<this._markers.length;n++)if(F.containsPosition(this._markers[n],t))return new jz(this._markers[n],n+1,this._markers.length)}}static _compareMarker(e,t){let n=kv(e.resource.toString(),t.resource.toString());return n===0&&(n=ai.compare(e.severity,t.severity)),n===0&&(n=F.compareRangesUsingStarts(e,t)),n}};u3=jee([qee(1,Mw)],u3);const Kee=mt("IMarkerNavigationService");let d3=class{constructor(e){this._markerService=e,this._provider=new _r}getMarkerList(e){for(let t of this._provider){const n=t.getMarkerList(e);if(n)return n}return new u3(e,this._markerService)}};d3=jee([qee(0,Mw)],d3);eg(Kee,d3,!0);var f3;(function(i){function e(t){switch(t){case vi.Ignore:return"severity-ignore "+be.info.classNames;case vi.Info:return be.info.classNames;case vi.Warning:return be.warning.classNames;case vi.Error:return be.error.classNames;default:return""}}i.className=e})(f3||(f3={}));Jt((i,e)=>{const t=i.getColor(yEe);if(t){const r=be.error.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${r},
			.markers-panel .marker-icon${r},
			.text-search-provider-messages .providerMessage ${r},
			.extensions-viewlet > .extensions ${r} {
				color: ${t};
			}
		`)}const n=i.getColor(CEe);if(n){const r=be.warning.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${r},
			.markers-panel .marker-icon${r},
			.extensions-viewlet > .extensions ${r},
			.extension-editor ${r},
			.text-search-provider-messages .providerMessage ${r},
			.preferences-editor ${r} {
				color: ${n};
			}
		`)}const s=i.getColor(SEe);if(s){const r=be.info.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${r},
			.markers-panel .marker-icon${r},
			.extensions-viewlet > .extensions ${r},
			.text-search-provider-messages .providerMessage ${r},
			.extension-editor ${r} {
				color: ${s};
			}
		`)}});var B6e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},$g=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class V6e{constructor(e,t,n,s,r){this._openerService=s,this._labelService=r,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new de,this._editor=t;const o=document.createElement("div");o.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),o.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),o.appendChild(this._relatedBlock),this._disposables.add(Ji(this._relatedBlock,"click",a=>{a.preventDefault();const l=this._relatedDiagnostics.get(a.target);l&&n(l)})),this._scrollable=new J5(o,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:3,verticalScrollbarSize:3}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{o.style.left=`-${a.scrollLeft}px`,o.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){at(this._disposables)}update(e){const{source:t,message:n,relatedInformation:s,code:r}=e;let o=((t==null?void 0:t.length)||0)+2;r&&(typeof r=="string"?o+=r.length:o+=r.value.length);const a=El(n);this._lines=a.length,this._longestLineLength=0;for(const d of a)this._longestLineLength=Math.max(d.length+o,this._longestLineLength);Rn(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(const d of a)l=document.createElement("div"),l.innerText=d,d===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||r){const d=document.createElement("span");if(d.classList.add("details"),l.appendChild(d),t){const f=document.createElement("span");f.innerText=t,f.classList.add("source"),d.appendChild(f)}if(r)if(typeof r=="string"){const f=document.createElement("span");f.innerText=`(${r})`,f.classList.add("code"),d.appendChild(f)}else{this._codeLink=ue("a.code-link"),this._codeLink.setAttribute("href",`${r.target.toString()}`),this._codeLink.onclick=g=>{this._openerService.open(r.target,{allowCommands:!0}),g.preventDefault(),g.stopPropagation()};const f=se(this._codeLink,ue("span"));f.innerText=r.value,d.appendChild(this._codeLink)}}if(Rn(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),kl(s)){const d=this._relatedBlock.appendChild(document.createElement("div"));d.style.paddingTop=`${Math.floor(this._editor.getOption(58)*.66)}px`,this._lines+=1;for(const f of s){let g=document.createElement("div"),p=document.createElement("a");p.classList.add("filename"),p.innerText=`${hee(f.resource)}(${f.startLineNumber}, ${f.startColumn}): `,p.title=this._labelService.getUriLabel(f.resource),this._relatedDiagnostics.set(p,f);let m=document.createElement("span");m.innerText=f.message,g.appendChild(p),g.appendChild(m),this._lines+=1,d.appendChild(g)}}const c=this._editor.getOption(43),h=Math.ceil(c.typicalFullwidthCharacterWidth*this._longestLineLength*.75),u=c.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:h,scrollHeight:u})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case ai.Error:t=_("Error","Error");break;case ai.Warning:t=_("Warning","Warning");break;case ai.Info:t=_("Info","Info");break;case ai.Hint:t=_("Hint","Hint");break}let n=_("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const s=this._editor.getModel();return s&&e.startLineNumber<=s.getLineCount()&&e.startLineNumber>=1&&(n=`${s.getLineContent(e.startLineNumber)}, ${n}`),n}}let Gm=class Zee extends AD{constructor(e,t,n,s,r,o,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},r),this._themeService=t,this._openerService=n,this._menuService=s,this._contextKeyService=o,this._labelService=a,this._callOnDispose=new de,this._onDidSelectRelatedInformation=new z,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=ai.Warning,this._backgroundColor=Z.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(U6e);let t=g3,n=W6e;this._severity===ai.Warning?(t=p3,n=z6e):this._severity===ai.Info&&(t=m3,n=H6e);const s=e.getColor(t),r=e.getColor(n);this.style({arrowColor:s,frameColor:s,headerBackgroundColor:r,primaryHeadingColor:e.getColor(aee),secondaryHeadingColor:e.getColor(lee)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(s=>this.editor.focus()));const t=[],n=this._menuService.createMenu(Zee.TitleMenu,this._contextKeyService);qFe(n,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),n.dispose()}_fillTitleIcon(e){this._icon=se(e,ue(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new V6e(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,n){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let s=F.lift(e);const r=this.editor.getPosition();let o=r&&s.containsPosition(r)?r:s.getStartPosition();super.show(o,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const l=n>1?_("problems","{0} of {1} problems",t,n):_("change","{0} of {1} problem",t,n);this.setTitle(ya(a.uri),l)}this._icon.className=`codicon ${f3.className(ai.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(o,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};Gm.TitleMenu=new Ue("gotoErrorTitleMenu");Gm=B6e([$g(1,si),$g(2,gu),$g(3,L0),$g(4,Wt),$g(5,$e),$g(6,Ew)],Gm);let qz=Hv(Ab,zQ),Gz=Hv(Oc,mk),Kz=Hv(fa,G5);const g3=V("editorMarkerNavigationError.background",{dark:qz,light:qz,hc:Pi},_("editorMarkerNavigationError","Editor marker navigation widget error color.")),W6e=V("editorMarkerNavigationError.headerBackground",{dark:$t(g3,.1),light:$t(g3,.1),hc:null},_("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),p3=V("editorMarkerNavigationWarning.background",{dark:Gz,light:Gz,hc:Pi},_("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),z6e=V("editorMarkerNavigationWarning.headerBackground",{dark:$t(p3,.1),light:$t(p3,.1),hc:"#0C141F"},_("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),m3=V("editorMarkerNavigationInfo.background",{dark:Kz,light:Kz,hc:Pi},_("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),H6e=V("editorMarkerNavigationInfo.headerBackground",{dark:$t(m3,.1),light:$t(m3,.1),hc:null},_("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),U6e=V("editorMarkerNavigation.background",{dark:Ur,light:Ur,hc:Ur},_("editorMarkerNavigationBackground","Editor marker navigation widget background."));Jt((i,e)=>{const t=i.getColor(gk);t&&e.addRule(`.monaco-editor .marker-widget a.code-link span { color: ${t}; }`);const n=i.getColor(pk);n&&e.addRule(`.monaco-editor .marker-widget a.code-link span:hover { color: ${n}; }`)});var $6e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},uC=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Yee=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};let Lu=class uS{constructor(e,t,n,s,r){this._markerNavigationService=t,this._contextKeyService=n,this._editorService=s,this._instantiationService=r,this._sessionDispoables=new de,this._editor=e,this._widgetVisible=Qee.bindTo(this._contextKeyService)}static get(e){return e.getContribution(uS.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(Gm,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(n=>{var s,r,o;(!(!((s=this._model)===null||s===void 0)&&s.selected)||!F.containsPosition((r=this._model)===null||r===void 0?void 0:r.selected.marker,n.position))&&((o=this._model)===null||o===void 0||o.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const n=this._model.find(this._editor.getModel().uri,this._widget.position);n?this._widget.updateMarker(n.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(n=>{this._editorService.openCodeEditor({resource:n.resource,options:{pinned:!0,revealIfOpened:!0,selection:F.lift(n).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new q(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(e,t){return Yee(this,void 0,void 0,function*(){if(this._editor.hasModel()){const n=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(n.move(e,this._editor.getModel(),this._editor.getPosition()),!n.selected)return;if(n.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const s=yield this._editorService.openCodeEditor({resource:n.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:n.selected.marker}},this._editor);s&&(uS.get(s).close(),uS.get(s).nagivate(e,t))}else this._widget.showAtMarker(n.selected.marker,n.selected.index,n.selected.total)}})}};Lu.ID="editor.contrib.markerController";Lu=$6e([uC(1,Kee),uC(2,$e),uC(3,ii),uC(4,Wt)],Lu);class Jk extends gi{constructor(e,t,n){super(n),this._next=e,this._multiFile=t}run(e,t){return Yee(this,void 0,void 0,function*(){t.hasModel()&&Lu.get(t).nagivate(this._next,this._multiFile)})}}class Fc extends Jk{constructor(){super(!0,!1,{id:Fc.ID,label:Fc.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:G.focus,primary:578,weight:100},menuOpts:{menuId:Gm.TitleMenu,title:Fc.LABEL,icon:es("marker-navigation-next",be.arrowDown,_("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}Fc.ID="editor.action.marker.next";Fc.LABEL=_("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class Km extends Jk{constructor(){super(!1,!1,{id:Km.ID,label:Km.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:G.focus,primary:1602,weight:100},menuOpts:{menuId:Gm.TitleMenu,title:Fc.LABEL,icon:es("marker-navigation-previous",be.arrowUp,_("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}Km.ID="editor.action.marker.prev";Km.LABEL=_("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class j6e extends Jk{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:_("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:G.focus,primary:66,weight:100},menuOpts:{menuId:Ue.MenubarGoMenu,title:_({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class q6e extends Jk{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:_("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:G.focus,primary:1090,weight:100},menuOpts:{menuId:Ue.MenubarGoMenu,title:_({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}Ps(Lu.ID,Lu);rt(Fc);rt(Km);rt(j6e);rt(q6e);const Qee=new De("markersNavigationVisible",!1),G6e=Zr.bindToContribution(Lu.get);pe(new G6e({id:"closeMarkersNavigation",precondition:Qee,handler:i=>i.close(),kbOpts:{weight:100+50,kbExpr:G.focus,primary:9,secondary:[1033]}}));var K6e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Zz=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const ro=ue;class Z6e{constructor(e,t,n){this.owner=e,this.range=t,this.marker=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const Yz={type:1,filter:{include:It.QuickFix}};let _3=class{constructor(e,t,n,s){this._editor=e,this._hover=t,this._markerDecorationsService=n,this._openerService=s,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),s=e.range.startLineNumber,r=n.getLineMaxColumn(s),o=[];for(const a of t){const l=a.range.startLineNumber===s?a.range.startColumn:1,c=a.range.endLineNumber===s?a.range.endColumn:r,h=this._markerDecorationsService.getMarker(n.uri,a);if(!h)continue;const u=new F(e.range.startLineNumber,l,e.range.startLineNumber,c);o.push(new Z6e(this,u,h))}return o}renderHoverParts(e,t,n){if(!e.length)return te.None;const s=new de;e.forEach(o=>t.appendChild(this.renderMarkerHover(o,s)));const r=e.length===1?e[0]:e.sort((o,a)=>ai.compare(o.marker.severity,a.marker.severity))[0];return this.renderMarkerStatusbar(r,n,s),s}renderMarkerHover(e,t){const n=ro("div.hover-row"),s=se(n,ro("div.marker.hover-contents")),{source:r,message:o,code:a,relatedInformation:l}=e.marker;this._editor.applyFontInfo(s);const c=se(s,ro("span"));if(c.style.whiteSpace="pre-wrap",c.innerText=o,r||a)if(a&&typeof a!="string"){const h=ro("span");if(r){const g=se(h,ro("span"));g.innerText=r}const u=se(h,ro("a.code-link"));u.setAttribute("href",a.target.toString()),t.add(ne(u,"click",g=>{this._openerService.open(a.target,{allowCommands:!0}),g.preventDefault(),g.stopPropagation()}));const d=se(u,ro("span"));d.innerText=a.value;const f=se(s,h);f.style.opacity="0.6",f.style.paddingLeft="6px"}else{const h=se(s,ro("span"));h.style.opacity="0.6",h.style.paddingLeft="6px",h.innerText=r&&a?`${r}(${a})`:r||`(${a})`}if(kl(l))for(const{message:h,resource:u,startLineNumber:d,startColumn:f}of l){const g=se(s,ro("div"));g.style.marginTop="8px";const p=se(g,ro("a"));p.innerText=`${ya(u)}(${d}, ${f}): `,p.style.cursor="pointer",t.add(ne(p,"click",v=>{v.stopPropagation(),v.preventDefault(),this._openerService&&this._openerService.open(u,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:d,startColumn:f}}}).catch(Ke)}));const m=se(g,ro("span"));m.innerText=h,this._editor.applyFontInfo(m)}return n}renderMarkerStatusbar(e,t,n){if((e.marker.severity===ai.Error||e.marker.severity===ai.Warning||e.marker.severity===ai.Info)&&t.addAction({label:_("view problem","View Problem"),commandId:Fc.ID,run:()=>{this._hover.hide(),Lu.get(this._editor).showAtMarker(e.marker),this._editor.focus()}}),!this._editor.getOption(80)){const s=t.append(ro("div"));this.recentMarkerCodeActionsInfo&&(DD.makeKey(this.recentMarkerCodeActionsInfo.marker)===DD.makeKey(e.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(s.textContent=_("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const r=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?te.None:n.add(wm(()=>s.textContent=_("checkingForQuickFixes","Checking for quick fixes..."),200));s.textContent||(s.textContent=String.fromCharCode(160));const o=this.getCodeActions(e.marker);n.add(gt(()=>o.cancel())),o.then(a=>{if(r.dispose(),this.recentMarkerCodeActionsInfo={marker:e.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),s.textContent=_("noQuickFixes","No quick fixes available");return}s.style.display="none";let l=!1;n.add(gt(()=>{l||a.dispose()})),t.addAction({label:_("quick fixes","Quick Fix..."),commandId:Ww.Id,run:c=>{l=!0;const h=S1.get(this._editor),u=Nn(c);this._hover.hide(),h.showCodeActions(Yz,a,{x:u.left+6,y:u.top+u.height+6})}})},Ke)}}getCodeActions(e){return kr(t=>eF(this._editor.getModel(),new F(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),Yz,xk.None,t))}};_3=K6e([Zz(2,A5),Zz(3,gu)],_3);Jt((i,e)=>{const t=i.getColor(gk);t&&e.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${t}; }`);const n=i.getColor(pk);n&&e.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${n}; }`)});const Xee="editor.action.inlineSuggest.commit";class Jee{constructor(e,t,n=0){this.lineNumber=e,this.parts=t,this.additionalReservedLineCount=n}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],n=e.substr(0,t.column-1);return Q6e(n,this.parts.map(r=>({range:{startLineNumber:1,endLineNumber:1,startColumn:r.column,endColumn:r.column},text:r.lines.join(`
`)}))).substring(this.parts[0].column-1)}}class Y6e{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}function Q6e(i,e){const t=new Y6e(i),n=e.map(s=>{const r=F.lift(s.range);return{startOffset:t.getOffset(r.getStartPosition()),endOffset:t.getOffset(r.getEndPosition()),text:s.text}});n.sort((s,r)=>r.startOffset-s.startOffset);for(const s of n)i=i.substring(0,s.startOffset)+s.text+i.substring(s.endOffset);return i}class Qz{constructor(e,t,n){this.column=e,this.lines=t,this.preview=n}}class ete extends te{constructor(e){super(),this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new z,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(105)&&this._expanded===void 0&&this.onDidChangeEmitter.fire()}))}setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}}function X6e(i,e){return i===e?!0:!i||!e?!1:i.range.equalsRange(e.range)&&i.text===e.text&&i.command===e.command}function tte(i,e,t,n,s=0){if(i.range.startLineNumber!==i.range.endLineNumber)return;const r=e.getLineContent(i.range.startLineNumber),o=qi(r).length;if(i.range.startColumn-1<=o){const f=qi(i.text).length,g=r.substring(i.range.startColumn-1,o),p=F.fromPositions(i.range.getStartPosition().delta(0,g.length),i.range.getEndPosition()),m=i.text.startsWith(g)?i.text.substring(g.length):i.text.substring(f);i={range:p,text:m,command:i.command}}const l=e.getValueInRange(i.range),c=J6e(l,i.text);if(!c)return;const h=i.range.startLineNumber,u=new Array;if(t==="prefix"){const f=c.filter(g=>g.originalLength===0);if(f.length>1||f.length===1&&f[0].originalStart!==l.length)return}const d=i.text.length-s;for(const f of c){const g=i.range.startColumn+f.originalStart+f.originalLength;if(t==="subwordSmart"&&n&&n.lineNumber===i.range.startLineNumber&&g<n.column||f.originalLength>0)return;if(f.modifiedLength===0)continue;const p=f.modifiedStart+f.modifiedLength,m=Math.max(f.modifiedStart,Math.min(p,d)),v=i.text.substring(f.modifiedStart,m),b=i.text.substring(m,Math.max(f.modifiedStart,p));if(v.length>0){const w=El(v);u.push(new Qz(g,w,!1))}if(b.length>0){const w=El(b);u.push(new Qz(g,w,!0))}}return new Jee(h,u,0)}let Ka;function J6e(i,e){if((Ka==null?void 0:Ka.originalValue)===i&&(Ka==null?void 0:Ka.newValue)===e)return Ka==null?void 0:Ka.changes;{const t=e8e(i,e);return Ka={originalValue:i,newValue:e,changes:t},t}}function e8e(i,e){if(i.length>5e3||e.length>5e3)return;function t(l){let c=0;for(let h=0,u=l.length;h<u;h++){const d=l.charCodeAt(h);d>c&&(c=d)}return c}const n=Math.max(t(i),t(e));function s(l){if(l<0)throw new Error("unexpected");return n+l+1}function r(l){let c=0,h=0;const u=new Int32Array(l.length);for(let d=0,f=l.length;d<f;d++){const g=h*100+c;l[d]==="("?(u[d]=s(2*g),c++):l[d]===")"?(u[d]=s(2*g+1),c===1&&h++,c=Math.max(c-1,0)):u[d]=l.charCodeAt(d)}return u}const o=r(i),a=r(e);return new ll({getElements:()=>o},{getElements:()=>a}).ComputeDiff(!1).changes}var t8e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},i8e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},vc=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};let b3=class extends te{constructor(e,t,n){super(),this.editor=e,this.cache=t,this.commandService=n,this.onDidChangeEmitter=new z,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new Lr),this.active=!1,this.disposed=!1,this._register(n.onDidExecuteCommand(s=>{new Set([T5.id,N5.id,Eb.Tab.id,Eb.DeleteLeft.id,Eb.DeleteRight.id,Xee,"acceptSelectedSuggestion"]).has(s.commandId)&&e.hasTextFocus()&&this.handleUserInput()})),this._register(this.editor.onDidType(s=>{this.handleUserInput()})),this._register(this.editor.onDidChangeCursorPosition(s=>{this.session&&!this.session.isValid&&this.hide()})),this._register(gt(()=>{this.disposed=!0})),this._register(this.editor.onDidBlurEditorWidget(()=>{this.hide()}))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout(()=>{this.disposed||this.startSessionIfTriggered()},0)}get session(){return this.completionSession.value}get ghostText(){var e;return(e=this.session)===null||e===void 0?void 0:e.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(e){var t;(t=this.session)===null||t===void 0||t.setExpanded(e)}setActive(e){var t;this.active=e,e&&((t=this.session)===null||t===void 0||t.scheduleAutomaticUpdate())}startSessionIfTriggered(){this.editor.getOption(54).enabled&&(this.session&&this.session.isValid||this.trigger(Or.Automatic))}trigger(e){if(this.completionSession.value){e===Or.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext();return}this.completionSession.value=new n8e(this.editor,this.editor.getPosition(),()=>this.active,this.commandService,this.cache,e),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(()=>{this.onDidChangeEmitter.fire()}))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var e;(e=this.session)===null||e===void 0||e.commitCurrentCompletion()}showNext(){var e;(e=this.session)===null||e===void 0||e.showNextInlineCompletion()}showPrevious(){var e;(e=this.session)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return vc(this,void 0,void 0,function*(){const t=yield(e=this.session)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};b3=t8e([i8e(2,vn)],b3);class n8e extends ete{constructor(e,t,n,s,r,o){super(e),this.triggerPosition=t,this.shouldUpdate=n,this.commandService=s,this.cache=r,this.initialTriggerKind=o,this.minReservedLineCount=0,this.updateOperation=this._register(new Lr),this.updateSoon=this._register(new fi(()=>{let l=this.initialTriggerKind;return this.initialTriggerKind=Or.Automatic,this.update(l)},50)),this.currentlySelectedCompletionId=void 0;let a;this._register(this.onDidChange(()=>{const l=this.currentCompletion;if(l&&l.sourceInlineCompletion!==a){a=l.sourceInlineCompletion;const c=l.sourceProvider;c.handleItemDidShow&&c.handleItemDidShow(l.sourceInlineCompletions,a)}})),this._register(gt(()=>{this.cache.clear()})),this._register(this.editor.onDidChangeCursorPosition(l=>{this.cache.value&&this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeModelContent(l=>{this.scheduleAutomaticUpdate()})),this._register(u5.onDidChange(()=>{this.updateSoon.schedule()})),this.scheduleAutomaticUpdate()}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value||this.cache.value.completions.length===0)return 0;const e=this.cache.value.completions.findIndex(t=>t.semanticId===this.currentlySelectedCompletionId);return e===-1?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(this.cache.value)return this.cache.value.completions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){var e;return vc(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){const n=(this.fixAndGetIndexOfCurrentSelection()+1)%t.length;this.currentlySelectedCompletionId=t[n].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}showPreviousInlineCompletion(){var e;return vc(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){const n=(this.fixAndGetIndexOfCurrentSelection()+t.length-1)%t.length;this.currentlySelectedCompletionId=t[n].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}ensureUpdateWithExplicitContext(){var e;return vc(this,void 0,void 0,function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===Or.Explicit?yield this.updateOperation.value.promise:yield this.update(Or.Explicit):((e=this.cache.value)===null||e===void 0?void 0:e.triggerKind)!==Or.Explicit&&(yield this.update(Or.Explicit))})}hasMultipleInlineCompletions(){var e;return vc(this,void 0,void 0,function*(){return yield this.ensureUpdateWithExplicitContext(),(((e=this.cache.value)===null||e===void 0?void 0:e.completions.length)||0)>1})}get ghostText(){const e=this.currentCompletion,t=this.editor.getOptions().get(54).mode;return e?tte(e,this.editor.getModel(),t,this.editor.getPosition()):void 0}get currentCompletion(){const e=this.currentCachedCompletion;if(e)return e.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule()}update(e){return vc(this,void 0,void 0,function*(){if(!this.shouldUpdate())return;const t=this.editor.getPosition(),n=kr(r=>vc(this,void 0,void 0,function*(){let o;try{o=yield nte(t,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},r)}catch(a){Ke(a);return}r.isCancellationRequested||(this.cache.setValue(this.editor,o,e),this.onDidChangeEmitter.fire())})),s=new ite(n,e);this.updateOperation.value=s,yield n,this.updateOperation.value===s&&this.updateOperation.clear()})}takeOwnership(e){this._register(e)}commitCurrentCompletion(){if(!this.ghostText)return;const e=this.currentCompletion;e&&this.commit(e)}commit(e){const t=this.cache.clearAndLeak();this.editor.executeEdits("inlineSuggestion.accept",[Lm.replaceMove(e.range,e.text)]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally(()=>{t==null||t.dispose()}).then(void 0,Fo):t==null||t.dispose(),this.onDidChangeEmitter.fire()}}class ite{constructor(e,t){this.promise=e,this.triggerKind=t}dispose(){this.promise.cancel()}}class s8e extends te{constructor(e,t,n,s){super(),this.triggerKind=s;const r=e.deltaDecorations([],t.items.map(o=>({range:o.range,options:{description:"inline-completion-tracking-range"}})));this._register(gt(()=>{e.deltaDecorations(r,[])})),this.completions=t.items.map((o,a)=>new r8e(o,r[a])),this._register(e.onDidChangeModelContent(()=>{let o=!1;const a=e.getModel();for(const l of this.completions){const c=a.getDecorationRange(l.decorationId);if(!c){Ke(new Error("Decoration has no range"));continue}l.synchronizedRange.equalsRange(c)||(o=!0,l.synchronizedRange=c)}o&&n()})),this._register(t)}}class r8e{constructor(e,t){this.inlineCompletion=e,this.decorationId=t,this.semanticId=JSON.stringify({text:this.inlineCompletion.text,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}toLiveInlineCompletion(){return{text:this.inlineCompletion.text,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion}}}function o8e(i,e){const t=e.getWordAtPosition(i),n=e.getLineMaxColumn(i.lineNumber);return t?new F(i.lineNumber,t.startColumn,i.lineNumber,n):F.fromPositions(i,i.with(void 0,n))}function nte(i,e,t,n=Xt.None){return vc(this,void 0,void 0,function*(){const s=o8e(i,e),r=u5.all(e),o=yield Promise.all(r.map(l=>vc(this,void 0,void 0,function*(){const c=yield l.provideInlineCompletions(e,i,t,n);return{completions:c,provider:l,dispose:()=>{c&&l.freeInlineCompletions(c)}}}))),a=new Map;for(const l of o){const c=l.completions;if(c)for(const h of c.items.map(u=>({text:u.text,range:u.range?F.lift(u.range):s,command:u.command,sourceProvider:l.provider,sourceInlineCompletions:c,sourceInlineCompletion:u})))h.range.startLineNumber===h.range.endLineNumber&&a.set(JSON.stringify({text:h.text,range:h.range}),h)}return{items:[...a.values()],dispose:()=>{for(const l of o)l.dispose()}}})}function ND(i,e){if(!e)return e;const t=i.getValueInRange(e.range),n=Av(t,e.text),s=i.getOffsetAt(e.range.getStartPosition())+n,r=i.getPositionAt(s),o=t.substr(n),a=iM(o,e.text),l=i.getPositionAt(Math.max(s,i.getOffsetAt(e.range.getEndPosition())-a));return{range:F.fromPositions(r,l),text:e.text.substr(n,e.text.length-n-a)}}const dn=new Uint8Array(16),ns=[];for(let i=0;i<256;i++)ns.push(i.toString(16).padStart(2,"0"));let v3;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?v3=crypto.getRandomValues.bind(crypto):v3=function(i){for(let e=0;e<i.length;e++)i[e]=Math.floor(Math.random()*256);return i};function a8e(){v3(dn),dn[6]=dn[6]&15|64,dn[8]=dn[8]&63|128;let i=0,e="";return e+=ns[dn[i++]],e+=ns[dn[i++]],e+=ns[dn[i++]],e+=ns[dn[i++]],e+="-",e+=ns[dn[i++]],e+=ns[dn[i++]],e+="-",e+=ns[dn[i++]],e+=ns[dn[i++]],e+="-",e+=ns[dn[i++]],e+=ns[dn[i++]],e+="-",e+=ns[dn[i++]],e+=ns[dn[i++]],e+=ns[dn[i++]],e+=ns[dn[i++]],e+=ns[dn[i++]],e+=ns[dn[i++]],e}const Xz="code-workspace";function Jz(i){const e=i;return typeof(e==null?void 0:e.id)=="string"&&We.isUri(e.uri)}function l8e(i){if(i.configuration)return{id:i.id,configPath:i.configuration};if(i.folders.length===1)return{id:i.id,uri:i.folders[0].uri}}class c8e{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){let n=t.resolve(e);if(n!==void 0)return n}}}class h8e{constructor(e,t,n,s){this._model=e,this._selection=t,this._selectionIdx=n,this._overtypingCapturer=s}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let n=this._model.getValueInRange(this._selection)||void 0,s=this._selection.startLineNumber!==this._selection.endLineNumber;if(!n&&this._overtypingCapturer){const r=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);r&&(n=r.value,s=r.multiline)}if(n&&s&&e.snippet){const r=this._model.getLineContent(this._selection.startLineNumber),o=qi(r,0,this._selection.startColumn-1);let a=o;e.snippet.walk(c=>c===e?!1:(c instanceof qs&&(a=qi(El(c.value).pop())),!0));const l=Av(a,o);n=n.replace(/(\r\n|\r|\n)(.*)/g,(c,h,u)=>`${h}${a.substr(l)}${u}`)}return n}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const n=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return n&&n.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber)}}}}class u8e{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return Vd(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const n=Vd(this._model.uri.fsPath),s=n.lastIndexOf(".");return s<=0?n:n.slice(0,s)}else{if(t==="TM_DIRECTORY")return kZ(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(r5(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}class d8e{constructor(e,t,n,s){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=n,this._spread=s}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(t){if(this._spread){const n=t.split(/\r\n|\n|\r/).filter(s=>!KZ(s));if(n.length===this._selectionCount)return n[this._selectionIdx]}return t}}}class f8e{constructor(e,t){this._model=e,this._selection=t}resolve(e){const{name:t}=e,n=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),s=Ii.getComments(n);if(s){if(t==="LINE_COMMENT")return s.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return s.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return s.blockCommentEndToken||void 0}}}class gl{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return gl.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return gl.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return gl.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return gl.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3))}}gl.dayNames=[_("Sunday","Sunday"),_("Monday","Monday"),_("Tuesday","Tuesday"),_("Wednesday","Wednesday"),_("Thursday","Thursday"),_("Friday","Friday"),_("Saturday","Saturday")];gl.dayNamesShort=[_("SundayShort","Sun"),_("MondayShort","Mon"),_("TuesdayShort","Tue"),_("WednesdayShort","Wed"),_("ThursdayShort","Thu"),_("FridayShort","Fri"),_("SaturdayShort","Sat")];gl.monthNames=[_("January","January"),_("February","February"),_("March","March"),_("April","April"),_("May","May"),_("June","June"),_("July","July"),_("August","August"),_("September","September"),_("October","October"),_("November","November"),_("December","December")];gl.monthNamesShort=[_("JanuaryShort","Jan"),_("FebruaryShort","Feb"),_("MarchShort","Mar"),_("AprilShort","Apr"),_("MayShort","May"),_("JuneShort","Jun"),_("JulyShort","Jul"),_("AugustShort","Aug"),_("SeptemberShort","Sep"),_("OctoberShort","Oct"),_("NovemberShort","Nov"),_("DecemberShort","Dec")];class g8e{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=l8e(this._workspaceService.getWorkspace());if(t){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(Jz(e))return Vd(e.uri.path);let t=Vd(e.configPath.path);return t.endsWith(Xz)&&(t=t.substr(0,t.length-Xz.length-1)),t}_resoveWorkspacePath(e){if(Jz(e))return K4(e.uri.fsPath);let t=Vd(e.configPath.path),n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?K4(n):"/"}}class p8e{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return a8e()}}Jt((i,e)=>{function t(n){const s=i.getColor(n);return s?s.toString():"transparent"}e.addRule(`.monaco-editor .snippet-placeholder { background-color: ${t(lEe)}; outline-color: ${t(cEe)}; }`),e.addRule(`.monaco-editor .finish-snippet-placeholder { background-color: ${t(hEe)}; outline-color: ${t(uEe)}; }`)});class ho{constructor(e,t,n,s){this._editor=e,this._snippet=t,this._offset=n,this._snippetLineLeadingWhitespace=s,this._nestingLevel=1,this._placeholderGroups=x7(t.placeholders,vo.compareByIndex),this._placeholderGroupsIdx=-1}dispose(){this._placeholderDecorations&&this._editor.deltaDecorations([...this._placeholderDecorations.values()],[]),this._placeholderGroups.length=0}_initDecorations(){if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const n of this._snippet.placeholders){const s=this._snippet.offset(n),r=this._snippet.fullLen(n),o=F.fromPositions(e.getPositionAt(this._offset+s),e.getPositionAt(this._offset+s+r)),a=n.isFinalTabstop?ho._decor.inactiveFinal:ho._decor.inactive,l=t.addDecoration(o,a);this._placeholderDecorations.set(n,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let s=[];for(const r of this._placeholderGroups[this._placeholderGroupsIdx])if(r.transform){const o=this._placeholderDecorations.get(r),a=this._editor.getModel().getDecorationRange(o),l=this._editor.getModel().getValueInRange(a),c=r.transform.resolve(l).split(/\r\n|\r|\n/);for(let h=1;h<c.length;h++)c[h]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+c[h]);s.push(Lm.replace(a,c.join(this._editor.getModel().getEOL())))}s.length>0&&this._editor.executeEdits("snippet.placeholderTransform",s)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const n=this._editor.getModel().changeDecorations(s=>{const r=new Set,o=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const l=this._placeholderDecorations.get(a),c=this._editor.getModel().getDecorationRange(l);o.push(new Ve(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),s.changeDecorationOptions(l,a.isFinalTabstop?ho._decor.activeFinal:ho._decor.active),r.add(a);for(const h of this._snippet.enclosingPlaceholders(a)){const u=this._placeholderDecorations.get(h);s.changeDecorationOptions(u,h.isFinalTabstop?ho._decor.activeFinal:ho._decor.active),r.add(h)}}for(const[a,l]of this._placeholderDecorations)r.has(a)||s.changeDecorationOptions(l,a.isFinalTabstop?ho._decor.inactiveFinal:ho._decor.inactive);return o});return t?this.move(e):n??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof vo){const n=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(n).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let n;for(const s of t){if(s.isFinalTabstop)break;n||(n=[],e.set(s.index,n));const r=this._placeholderDecorations.get(s),o=this._editor.getModel().getDecorationRange(r);if(!o){e.delete(s.index);break}n.push(o)}}return e}get choice(){return this._placeholderGroups[this._placeholderGroupsIdx][0].choice}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(n=>{for(const s of this._placeholderGroups[this._placeholderGroupsIdx]){const r=e.shift();console.assert(!r._placeholderDecorations);const o=r._snippet.placeholderInfo.last.index;for(const l of r._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=s.index+(o+1)/this._nestingLevel:l.index=s.index+l.index/this._nestingLevel;this._snippet.replace(s,r._snippet.children);const a=this._placeholderDecorations.get(s);n.removeDecoration(a),this._placeholderDecorations.delete(s);for(const l of r._snippet.placeholders){const c=r._snippet.offset(l),h=r._snippet.fullLen(l),u=F.fromPositions(t.getPositionAt(r._offset+c),t.getPositionAt(r._offset+c+h)),d=n.addDecoration(u,ho._decor.inactive);this._placeholderDecorations.set(l,d)}}this._placeholderGroups=x7(this._snippet.placeholders,vo.compareByIndex)})}}ho._decor={active:lt.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:lt.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:lt.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:lt.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const eH={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};class el{constructor(e,t,n=eH){this._templateMerges=[],this._snippets=[],this._editor=e,this._template=t,this._options=n}static adjustWhitespace(e,t,n,s,r){const o=e.getLineContent(t.lineNumber),a=qi(o,0,t.column-1);let l;return n.walk(c=>{if(!(c instanceof qs)||c.parent instanceof Pw)return!0;const h=c.value.split(/\r\n|\r|\n/);if(s){const d=n.offset(c);if(d===0)h[0]=e.normalizeIndentation(h[0]);else{l=l??n.toString();let f=l.charCodeAt(d-1);(f===10||f===13)&&(h[0]=e.normalizeIndentation(a+h[0]))}for(let f=1;f<h.length;f++)h[f]=e.normalizeIndentation(a+h[f])}const u=h.join(e.getEOL());return u!==c.value&&(c.parent.replace(c,[new qs(u)]),l=void 0),!0}),a}static adjustSelection(e,t,n,s){if(n!==0||s!==0){const{positionLineNumber:r,positionColumn:o}=t,a=o-n,l=o+s,c=e.validateRange({startLineNumber:r,startColumn:a,endLineNumber:r,endColumn:l});t=Ve.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,t.getDirection())}return t}static createEditsAndSnippets(e,t,n,s,r,o,a,l){const c=[],h=[];if(!e.hasModel())return{edits:c,snippets:h};const u=e.getModel(),d=e.invokeWithinContext(y=>y.get(eQ)),f=e.invokeWithinContext(y=>new u8e(y.get(Ew),u)),g=()=>a;let p=0,m=u.getValueInRange(el.adjustSelection(u,e.getSelection(),n,0)),v=u.getValueInRange(el.adjustSelection(u,e.getSelection(),0,s)),b=u.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber);const w=e.getSelections().map((y,x)=>({selection:y,idx:x})).sort((y,x)=>F.compareRangesUsingStarts(y.selection,x.selection));for(const{selection:y,idx:x}of w){let k=el.adjustSelection(u,y,n,0),S=el.adjustSelection(u,y,0,s);m!==u.getValueInRange(k)&&(k=y),v!==u.getValueInRange(S)&&(S=y);const L=y.setStartPosition(k.startLineNumber,k.startColumn).setEndPosition(S.endLineNumber,S.endColumn),D=new Hk().parse(t,!0,r),N=L.getStartPosition(),T=el.adjustWhitespace(u,N,D,o||x>0&&b!==u.getLineFirstNonWhitespaceColumn(y.positionLineNumber),!0);D.resolveVariables(new c8e([f,new d8e(g,x,w.length,e.getOption(70)==="spread"),new h8e(u,y,x,l),new f8e(u,y),new gl,new g8e(d),new p8e]));const $=u.getOffsetAt(N)+p;p+=D.toString().length-u.getValueLengthInRange(L),c[x]=Lm.replace(L,D.toString()),c[x].identifier={major:x,minor:0},h[x]=new ho(e,D,$,T)}return{edits:c,snippets:h}}dispose(){at(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=el.createEditsAndSnippets(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer);this._snippets=t,this._editor.executeEdits("snippet",e,n=>this._snippets[0].hasPlaceholder?this._move(!0):n.filter(s=>!!s.identifier).map(s=>Ve.fromPositions(s.range.getEndPosition()))),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=eH){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:n,snippets:s}=el.createEditsAndSnippets(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer);this._editor.executeEdits("snippet",n,r=>{for(const o of this._snippets)o.merge(s);return console.assert(s.length===0),this._snippets[0].hasPlaceholder?this._move(void 0):r.filter(o=>!!o.identifier).map(o=>Ve.fromPositions(o.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const n of this._snippets){const s=n.move(e);t.push(...s)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get choice(){return this._snippets[0].choice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;let t=new Map;for(const n of this._snippets){const s=n.computePossibleSelections();if(t.size===0)for(const[r,o]of s){o.sort(F.compareRangesUsingStarts);for(const a of e)if(o[0].containsRange(a)){t.set(r,[]);break}}if(t.size===0)return!1;t.forEach((r,o)=>{r.push(...s.get(o))})}e.sort(F.compareRangesUsingStarts);for(let[n,s]of t){if(s.length!==e.length){t.delete(n);continue}s.sort(F.compareRangesUsingStarts);for(let r=0;r<s.length;r++)if(!s[r].containsRange(e[r])){t.delete(n);continue}}return t.size>0}}var m8e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},tH=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const iH={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let xn=class W_{constructor(e,t,n){this._editor=e,this._logService=t,this._snippetListener=new de,this._modelVersionId=-1,this._inSnippet=W_.InSnippetMode.bindTo(n),this._hasNextTabstop=W_.HasNextTabstop.bindTo(n),this._hasPrevTabstop=W_.HasPrevTabstop.bindTo(n)}static get(e){return e.getContribution(W_.ID)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)===null||e===void 0||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t>"u"?iH:Object.assign(Object.assign({},iH),t))}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){this._editor.hasModel()&&(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session?this._session.merge(e,t):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new el(this._editor,e,t),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(n=>n.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState())))}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{choice:e}=this._session;if(!e){this._currentChoice=void 0;return}if(this._currentChoice!==e){this._currentChoice=e,this._editor.setSelections(this._editor.getSelections().map(n=>Ve.fromPositions(n.getStartPosition())));const[t]=e.options;UPe(this._editor,e.options.map((n,s)=>({kind:13,label:n.value,insertText:n.value,sortText:"a".repeat(s+1),range:F.fromPositions(this._editor.getPosition(),this._editor.getPosition().delta(0,t.value.length))})))}}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),(t=this._session)===null||t===void 0||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}};xn.ID="snippetController2";xn.InSnippetMode=new De("inSnippetMode",!1,_("inSnippetMode","Whether the editor in current in snippet mode"));xn.HasNextTabstop=new De("hasNextTabstop",!1,_("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));xn.HasPrevTabstop=new De("hasPrevTabstop",!1,_("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));xn=m8e([tH(1,Jc),tH(2,$e)],xn);Ps(xn.ID,xn);const e2=Zr.bindToContribution(xn.get);pe(new e2({id:"jumpToNextSnippetPlaceholder",precondition:xe.and(xn.InSnippetMode,xn.HasNextTabstop),handler:i=>i.next(),kbOpts:{weight:100+30,kbExpr:G.editorTextFocus,primary:2}}));pe(new e2({id:"jumpToPrevSnippetPlaceholder",precondition:xe.and(xn.InSnippetMode,xn.HasPrevTabstop),handler:i=>i.prev(),kbOpts:{weight:100+30,kbExpr:G.editorTextFocus,primary:1026}}));pe(new e2({id:"leaveSnippet",precondition:xn.InSnippetMode,handler:i=>i.cancel(!0),kbOpts:{weight:100+30,kbExpr:G.editorTextFocus,primary:9,secondary:[1033]}}));pe(new e2({id:"acceptSnippet",precondition:xn.InSnippetMode,handler:i=>i.finish()}));var _8e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},nH=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class tF{constructor(e){this.name=e}select(e,t,n){if(n.length===0)return 0;let s=n[0].score[0];for(let r=0;r<n.length;r++){const{score:o,completion:a}=n[r];if(o[0]!==s)break;if(a.preselect)return r}return 0}}class ste extends tF{constructor(){super("first")}memorize(e,t,n){}toJSON(){}fromJSON(){}}class b8e extends tF{constructor(){super("recentlyUsed"),this._cache=new s5(300,.66),this._seq=0}memorize(e,t,n){const s=`${e.getLanguageId()}/${n.textLabel}`;this._cache.set(s,{touch:this._seq++,type:n.completion.kind,insertText:n.completion.insertText})}select(e,t,n){if(n.length===0)return 0;const s=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(s))return super.select(e,t,n);let r=n[0].score[0],o=-1,a=-1,l=-1;for(let c=0;c<n.length&&n[c].score[0]===r;c++){const h=`${e.getLanguageId()}/${n[c].textLabel}`,u=this._cache.peek(h);if(u&&u.touch>l&&u.type===n[c].completion.kind&&u.insertText===n[c].completion.insertText&&(l=u.touch,a=c),n[c].completion.preselect&&o===-1)return o=c}return a!==-1?a:o!==-1?o:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();let t=0;for(const[n,s]of e)s.touch=t,s.type=typeof s.type=="number"?s.type:dY(s.type),this._cache.set(n,s);this._seq=this._cache.size}}class v8e extends tF{constructor(){super("recentlyUsedByPrefix"),this._trie=Bp.forStrings(),this._seq=0}memorize(e,t,n){const{word:s}=e.getWordUntilPosition(t),r=`${e.getLanguageId()}/${s}`;this._trie.set(r,{type:n.completion.kind,insertText:n.completion.insertText,touch:this._seq++})}select(e,t,n){let{word:s}=e.getWordUntilPosition(t);if(!s)return super.select(e,t,n);let r=`${e.getLanguageId()}/${s}`,o=this._trie.get(r);if(o||(o=this._trie.findSubstr(r)),o)for(let a=0;a<n.length;a++){let{kind:l,insertText:c}=n[a].completion;if(l===o.type&&c===o.insertText)return a}return super.select(e,t,n)}toJSON(){let e=[];return this._trie.forEach((t,n)=>e.push([n,t])),e.sort((t,n)=>-(t[1].touch-n[1].touch)).forEach((t,n)=>t[1].touch=n),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,n]of e)n.type=typeof n.type=="number"?n.type:dY(n.type),this._trie.set(t,n)}}}let x1=class dS{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new de,this._persistSoon=new fi(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(n=>{n.reason===S4.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,n){this._withStrategy(e,t).memorize(e,t,n),this._persistSoon.schedule()}select(e,t,n){return this._withStrategy(e,t).select(e,t,n)}_withStrategy(e,t){var n;const s=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((n=this._strategy)===null||n===void 0?void 0:n.name)!==s){this._saveState();const r=dS._strategyCtors.get(s)||ste;this._strategy=new r;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get(`${dS._storagePrefix}/${s}`,a);l&&this._strategy.fromJSON(JSON.parse(l))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,n=JSON.stringify(this._strategy);this._storageService.store(`${dS._storagePrefix}/${this._strategy.name}`,n,t,1)}}};x1._strategyCtors=new Map([["recentlyUsedByPrefix",v8e],["recentlyUsed",b8e],["first",ste]]);x1._storagePrefix="suggest/memories";x1=_8e([nH(0,dg),nH(1,Fi)],x1);const rte=mt("ISuggestMemories");eg(rte,x1,!0);var w8e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},y8e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let D1=class ote{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=ote.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(n=>n.hasChanged(110)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(110)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const n=this._editor.getModel(),s=this._editor.getSelection(),r=n.getWordAtPosition(s.getStartPosition());if(!r){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(r.endColumn===s.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};D1.AtEnd=new De("atEndOfWord",!1);D1=w8e([y8e(1,$e)],D1);var C8e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},S8e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Wf=class fS{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=fS.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)===null||e===void 0||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},n){if(e.items.length===0){this.reset();return}if(fS._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=n,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,n){let s=n;for(;s=(s+t.items.length+(e?1:-1))%t.items.length,!(s===n||!t.items[s].completion.additionalTextEdits););return s}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=fS._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};Wf.OtherSuggestions=new De("hasOtherSuggestions",!1);Wf=C8e([S8e(1,$e)],Wf);class x8e{constructor(e,t,n){this._disposables=new de,this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(s=>{if(this._active&&!t.isFrozen()){const r=s.charCodeAt(s.length-1);this._active.acceptCharacters.has(r)&&e.getOption(0)&&n(this._active.item)}}))}_onItem(e){if(!e||!kl(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new jDe;for(const n of e.item.completion.commitCharacters)n.length>0&&t.add(n.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}var D8e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class Ir{provideSelectionRanges(e,t){return D8e(this,void 0,void 0,function*(){const n=[];for(const s of t){const r=[];n.push(r);const o=new Map;yield new Promise(a=>Ir._bracketsRightYield(a,0,e,s,o)),yield new Promise(a=>Ir._bracketsLeftYield(a,0,e,s,o,r))}return n})}static _bracketsRightYield(e,t,n,s,r){const o=new Map,a=Date.now();for(;;){if(t>=Ir._maxRounds){e();break}if(!s){e();break}let l=n.findNextBracket(s);if(!l){e();break}if(Date.now()-a>Ir._maxDuration){setTimeout(()=>Ir._bracketsRightYield(e,t+1,n,s,r));break}const h=l.close[0];if(l.isOpen){let u=o.has(h)?o.get(h):0;o.set(h,u+1)}else{let u=o.has(h)?o.get(h):0;if(u-=1,o.set(h,Math.max(0,u)),u<0){let d=r.get(h);d||(d=new _r,r.set(h,d)),d.push(l.range)}}s=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,n,s,r,o){const a=new Map,l=Date.now();for(;;){if(t>=Ir._maxRounds&&r.size===0){e();break}if(!s){e();break}let c=n.findPrevBracket(s);if(!c){e();break}if(Date.now()-l>Ir._maxDuration){setTimeout(()=>Ir._bracketsLeftYield(e,t+1,n,s,r,o));break}const u=c.close[0];if(c.isOpen){let d=a.has(u)?a.get(u):0;if(d-=1,a.set(u,Math.max(0,d)),d<0){let f=r.get(u);if(f){let g=f.shift();f.size===0&&r.delete(u);const p=F.fromPositions(c.range.getEndPosition(),g.getStartPosition()),m=F.fromPositions(c.range.getStartPosition(),g.getEndPosition());o.push({range:p}),o.push({range:m}),Ir._addBracketLeading(n,m,o)}}}else{let d=a.has(u)?a.get(u):0;a.set(u,d+1)}s=c.range.getStartPosition()}}static _addBracketLeading(e,t,n){if(t.startLineNumber===t.endLineNumber)return;const s=t.startLineNumber,r=e.getLineFirstNonWhitespaceColumn(s);r!==0&&r!==t.startColumn&&(n.push({range:F.fromPositions(new q(s,r),t.getEndPosition())}),n.push({range:F.fromPositions(new q(s,1),t.getEndPosition())}));const o=s-1;if(o>0){const a=e.getLineFirstNonWhitespaceColumn(o);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(o)&&(n.push({range:F.fromPositions(new q(o,a),t.getEndPosition())}),n.push({range:F.fromPositions(new q(o,1),t.getEndPosition())}))}}}Ir._maxDuration=30;Ir._maxRounds=2;var L8e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class nl{static create(e,t){return L8e(this,void 0,void 0,function*(){if(!t.getOption(105).localityBonus||!t.hasModel())return nl.None;const n=t.getModel(),s=t.getPosition();if(!e.canComputeWordRanges(n.uri))return nl.None;const[r]=yield new Ir().provideSelectionRanges(n,[s]);if(r.length===0)return nl.None;const o=yield e.computeWordRanges(n.uri,r[0].range);if(!o)return nl.None;const a=n.getWordUntilPosition(s);return delete o[a.word],new class extends nl{distance(l,c){if(!s.equals(t.getPosition()))return 0;if(c.kind===17)return 2<<20;let h=typeof c.label=="string"?c.label:c.label.label,u=o[h];if(OY(u))return 2<<20;let d=p5(u,F.fromPositions(l),F.compareRangesUsingStarts),f=d>=0?u[d]:u[Math.max(0,~d-1)],g=r.length;for(const p of r){if(!F.containsRange(p.range,f))break;g-=1}return g}}})}}nl.None=new class extends nl{distance(){return 0}};class md{constructor(e,t,n,s,r,o,a){this.clipboardText=a,this._snippetCompareFn=md._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=s,this._options=r,this._refilterKind=1,this._lineContext=n,o==="top"?this._snippetCompareFn=md._compareCompletionItemsSnippetsUp:o==="bottom"&&(this._snippetCompareFn=md._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();const e=new Set;for(let[t,n]of this._providerInfo)n&&e.add(t);return e}adopt(e){let t=[];for(let n=0;n<this._items.length;)e.has(this._items[n].provider)?n++:(t.push(this._items[n]),this._items[n]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;const e=[],{leadingLineContent:t,characterCountDelta:n}=this._lineContext;let s="",r="";const o=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||o.length>2e3?r1:I4e;for(let c=0;c<o.length;c++){const h=o[c];if(h.isInvalid)continue;this._providerInfo.set(h.provider,!!h.container.incomplete);const u=h.position.column-h.editStart.column,d=u+n-(h.position.column-this._column);if(s.length!==d&&(s=d===0?"":t.slice(-d),r=s.toLowerCase()),h.word=s,d===0)h.score=ga.Default;else{let f=0;for(;f<u;){const g=s.charCodeAt(f);if(g===32||g===9)f+=1;else break}if(f>=d)h.score=ga.Default;else if(typeof h.completion.filterText=="string"){let g=l(s,r,f,h.completion.filterText,h.filterTextLow,0,!1);if(!g)continue;tM(h.completion.filterText,h.textLabel)===0?h.score=g:(h.score=L4e(s,r,f,h.textLabel,h.labelLow,0),h.score[0]=g[0])}else{let g=l(s,r,f,h.textLabel,h.labelLow,0,!1);if(!g)continue;h.score=g}}h.idx=c,h.distance=this._wordDistance.distance(h.position,h.completion),a.push(h),e.push(h.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?SM(e.length-.85,e,(c,h)=>c-h):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return md._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return md._compareCompletionItems(e,t)}}var k8e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},jg=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},A8e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class qg{constructor(e,t,n,s){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.auto=n,this.shy=s}static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),n=e.getPosition();t.tokenizeIfCheap(n.lineNumber);const s=t.getWordAtPosition(n);return!(!s||s.endColumn!==n.column||!isNaN(Number(s.word)))}}function E8e(i,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const n=t.getValue("editor.inlineSuggest.allowQuickSuggestions");return n!==void 0?!!n:!1}function I8e(i,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const n=t.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters");return n!==void 0?!!n:!1}let w3=class ate{constructor(e,t,n,s,r,o,a){this._editor=e,this._editorWorkerService=t,this._clipboardService=n,this._telemetryService=s,this._logService=r,this._contextKeyService=o,this._configurationService=a,this._toDispose=new de,this._quickSuggestDelay=10,this._triggerCharacterListener=new de,this._triggerQuickSuggest=new Ms,this._state=0,this._completionDisposables=new de,this._onDidCancel=new z,this._onDidTrigger=new z,this._onDidSuggest=new z,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new Ve(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters(),this._updateQuickSuggest()})),this._toDispose.add(ta.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(c=>{this._onCursorChange(c)}));let l=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{l=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{l=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{l||this._refilterCompletionItems()})),this._updateTriggerCharacters(),this._updateQuickSuggest()}dispose(){at(this._triggerCharacterListener),at([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateQuickSuggest(){this._quickSuggestDelay=this._editor.getOption(79),(isNaN(this._quickSuggestDelay)||!this._quickSuggestDelay&&this._quickSuggestDelay!==0||this._quickSuggestDelay<0)&&(this._quickSuggestDelay=10)}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(80)||!this._editor.hasModel()||!this._editor.getOption(108))return;const e=new Map;for(const n of ta.all(this._editor.getModel()))for(const s of n.triggerCharacters||[]){let r=e.get(s);r||(r=new Set,r.add(VPe()),e.set(s,r)),r.add(n)}const t=n=>{if(!I8e(this._editor,this._contextKeyService,this._configurationService)||qg.shouldAutoTrigger(this._editor))return;if(!n){const o=this._editor.getPosition();n=this._editor.getModel().getLineContent(o.lineNumber).substr(0,o.column-1)}let s="";Cm(n.charCodeAt(n.length-1))?_n(n.charCodeAt(n.length-2))&&(s=n.substr(n.length-2)):s=n.charAt(n.length-1);const r=e.get(s);if(r){const o=this._completionModel?{items:this._completionModel.adopt(r),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,triggerCharacter:s},!!this._completionModel,r,o)}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(t))}get state(){return this._state}cancel(e=!1){var t;this._state!==0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)===null||t===void 0||t.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._state!==0&&(!this._editor.hasModel()||!ta.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._state===2,shy:!1},!0))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._state===0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._state!==0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._state===0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){this._editor.getOption(78)!==!1&&(this._editor.getOption(105).snippetsPreventQuickSuggestions&&xn.get(this._editor).isInSnippet()||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._state!==0||!qg.shouldAutoTrigger(this._editor)||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),n=this._editor.getOption(78);if(n!==!1){if(n!==!0){e.tokenizeIfCheap(t.lineNumber);const s=e.getLineTokens(t.lineNumber),r=s.getStandardTokenType(s.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(!(n.other&&r===0||n.comments&&r===1||n.strings&&r===2))return}E8e(this._editor,this._contextKeyService,this._configurationService)&&ta.has(e)&&this.trigger({auto:!0,shy:!1})}},this._quickSuggestDelay)))}_refilterCompletionItems(){Promise.resolve().then(()=>{if(this._state===0||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),n=new qg(e,t,this._state===2,!1);this._onNewContext(n)})}trigger(e,t=!1,n,s){var r;if(!this._editor.hasModel())return;const o=this._editor.getModel(),a=e.auto,l=new qg(o,this._editor.getPosition(),a,e.shy);this.cancel(t),this._state=a?2:1,this._onDidTrigger.fire({auto:a,shy:e.shy,position:this._editor.getPosition()}),this._context=l;let c={triggerKind:(r=e.triggerKind)!==null&&r!==void 0?r:0};e.triggerCharacter&&(c={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new Na;const h=this._editor.getOption(100);let u=1;switch(h){case"top":u=0;break;case"bottom":u=2;break}const{itemKind:d,showDeprecated:f}=ate._createSuggestFilter(this._editor),g=nl.create(this._editorWorkerService,this._editor),p=UJ(o,this._editor.getPosition(),new kD(u,d,n,f),c,this._requestToken.token);Promise.all([p,g]).then(([m,v])=>A8e(this,void 0,void 0,function*(){var b;if((b=this._requestToken)===null||b===void 0||b.dispose(),!this._editor.hasModel())return;let w=s==null?void 0:s.clipboardText;if(!w&&m.needsClipboard&&(w=yield this._clipboardService.readText()),this._state===0)return;const y=this._editor.getModel();let x=m.items;if(s){const S=$J(u);x=x.concat(s.items).sort(S)}const k=new qg(y,this._editor.getPosition(),a,e.shy);this._completionModel=new md(x,this._context.column,{leadingLineContent:k.leadingLineContent,characterCountDelta:k.column-this._context.column},v,this._editor.getOption(105),this._editor.getOption(100),w),this._completionDisposables.add(m.disposable),this._onNewContext(k),this._reportDurationsTelemetry(m.durations)})).catch(Ke)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static _createSuggestFilter(e){const t=new Set;e.getOption(100)==="none"&&t.add(27);const s=e.getOption(105);return s.showMethods||t.add(0),s.showFunctions||t.add(1),s.showConstructors||t.add(2),s.showFields||t.add(3),s.showVariables||t.add(4),s.showClasses||t.add(5),s.showStructs||t.add(6),s.showInterfaces||t.add(7),s.showModules||t.add(8),s.showProperties||t.add(9),s.showEvents||t.add(10),s.showOperators||t.add(11),s.showUnits||t.add(12),s.showValues||t.add(13),s.showConstants||t.add(14),s.showEnums||t.add(15),s.showEnumMembers||t.add(16),s.showKeywords||t.add(17),s.showWords||t.add(18),s.showColors||t.add(19),s.showFiles||t.add(20),s.showReferences||t.add(21),s.showColors||t.add(22),s.showFolders||t.add(23),s.showTypeParameters||t.add(24),s.showSnippets||t.add(27),s.showUsers||t.add(25),s.showIssues||t.add(26),{itemKind:t,showDeprecated:s.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(qi(e.leadingLineContent)!==qi(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1},!0):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){const t=new Set(ta.all(this._editor.getModel()));for(let s of this._completionModel.allProvider)t.delete(s);const n=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1},!0,t,{items:n,clipboardText:this._completionModel.clipboardText});return}if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&e.leadingWord.word.length!==0){const{incomplete:t}=this._completionModel,n=this._completionModel.adopt(t);this.trigger({auto:this._state===2,shy:!1,triggerKind:2},!0,t,{items:n,clipboardText:this._completionModel.clipboardText})}else{let t=this._completionModel.lineContext,n=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){if(qg.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.auto,shy:!1},!0);return}if(this._context.auto){this.cancel();return}else if(this._completionModel.lineContext=t,n=this._completionModel.items.length>0,n&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,isFrozen:n})}}}}};w3=k8e([jg(1,Vu),jg(2,lg),jg(3,k0),jg(4,Jc),jg(5,$e),jg(6,Fi)],w3);class t2{constructor(e,t){this._disposables=new de,this._lastOvertyped=[],this._empty=!0,this._disposables.add(e.onWillType(()=>{if(!this._empty||!e.hasModel())return;const n=e.getSelections(),s=n.length;let r=!1;for(let a=0;a<s;a++)if(!n[a].isEmpty()){r=!0;break}if(!r)return;this._lastOvertyped=[];const o=e.getModel();for(let a=0;a<s;a++){const l=n[a];if(o.getValueLengthInRange(l)>t2._maxSelectionLength)return;this._lastOvertyped[a]={value:o.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}this._empty=!1})),this._disposables.add(t.onDidCancel(n=>{!this._empty&&!n.retrigger&&(this._empty=!0)}))}getLastOvertypedInfo(e){if(!this._empty&&e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}t2._maxSelectionLength=51200;var T8e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},pI=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class iF extends jm{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=_("ddd","{0} ({1})",this._action.label,iF.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return(t=e.getLabel())===null||t===void 0?void 0:t.replace(/\benter\b/gi,"⏎")}}let y3=class{constructor(e,t,n,s){this._menuService=n,this._contextKeyService=s,this._menuDisposables=new de,this.element=se(e,ue(".suggest-status-bar"));const r=o=>o instanceof _u?t.createInstance(iF,o,void 0):void 0;this._leftActions=new Gc(this.element,{actionViewItemProvider:r}),this._rightActions=new Gc(this.element,{actionViewItemProvider:r}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(xu,this._contextKeyService),t=()=>{const n=[],s=[];for(let[r,o]of e.getActions())r==="left"?n.push(...o):s.push(...o);this._leftActions.clear(),this._leftActions.push(n),this._rightActions.clear(),this._rightActions.push(s)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};y3=T8e([pI(1,Wt),pI(2,L0),pI(3,$e)],y3);const N8e=V("symbolIcon.arrayForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),M8e=V("symbolIcon.booleanForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),R8e=V("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},_("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),O8e=V("symbolIcon.colorForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),P8e=V("symbolIcon.constantForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),F8e=V("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},_("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),B8e=V("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},_("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),V8e=V("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},_("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),W8e=V("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},_("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),z8e=V("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},_("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),H8e=V("symbolIcon.fileForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),U8e=V("symbolIcon.folderForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),$8e=V("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},_("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),j8e=V("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},_("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),q8e=V("symbolIcon.keyForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),G8e=V("symbolIcon.keywordForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),K8e=V("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},_("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Z8e=V("symbolIcon.moduleForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Y8e=V("symbolIcon.namespaceForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Q8e=V("symbolIcon.nullForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),X8e=V("symbolIcon.numberForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),J8e=V("symbolIcon.objectForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e9e=V("symbolIcon.operatorForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),t9e=V("symbolIcon.packageForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),i9e=V("symbolIcon.propertyForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),n9e=V("symbolIcon.referenceForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),s9e=V("symbolIcon.snippetForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),r9e=V("symbolIcon.stringForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),o9e=V("symbolIcon.structForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),a9e=V("symbolIcon.textForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),l9e=V("symbolIcon.typeParameterForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),c9e=V("symbolIcon.unitForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),h9e=V("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},_("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));Jt((i,e)=>{const t=i.getColor(N8e);t&&e.addRule(`${be.symbolArray.cssSelector} { color: ${t}; }`);const n=i.getColor(M8e);n&&e.addRule(`${be.symbolBoolean.cssSelector} { color: ${n}; }`);const s=i.getColor(R8e);s&&e.addRule(`${be.symbolClass.cssSelector} { color: ${s}; }`);const r=i.getColor(K8e);r&&e.addRule(`${be.symbolMethod.cssSelector} { color: ${r}; }`);const o=i.getColor(O8e);o&&e.addRule(`${be.symbolColor.cssSelector} { color: ${o}; }`);const a=i.getColor(P8e);a&&e.addRule(`${be.symbolConstant.cssSelector} { color: ${a}; }`);const l=i.getColor(F8e);l&&e.addRule(`${be.symbolConstructor.cssSelector} { color: ${l}; }`);const c=i.getColor(B8e);c&&e.addRule(`
			${be.symbolValue.cssSelector},${be.symbolEnum.cssSelector} { color: ${c}; }`);const h=i.getColor(V8e);h&&e.addRule(`${be.symbolEnumMember.cssSelector} { color: ${h}; }`);const u=i.getColor(W8e);u&&e.addRule(`${be.symbolEvent.cssSelector} { color: ${u}; }`);const d=i.getColor(z8e);d&&e.addRule(`${be.symbolField.cssSelector} { color: ${d}; }`);const f=i.getColor(H8e);f&&e.addRule(`${be.symbolFile.cssSelector} { color: ${f}; }`);const g=i.getColor(U8e);g&&e.addRule(`${be.symbolFolder.cssSelector} { color: ${g}; }`);const p=i.getColor($8e);p&&e.addRule(`${be.symbolFunction.cssSelector} { color: ${p}; }`);const m=i.getColor(j8e);m&&e.addRule(`${be.symbolInterface.cssSelector} { color: ${m}; }`);const v=i.getColor(q8e);v&&e.addRule(`${be.symbolKey.cssSelector} { color: ${v}; }`);const b=i.getColor(G8e);b&&e.addRule(`${be.symbolKeyword.cssSelector} { color: ${b}; }`);const w=i.getColor(Z8e);w&&e.addRule(`${be.symbolModule.cssSelector} { color: ${w}; }`);const y=i.getColor(Y8e);y&&e.addRule(`${be.symbolNamespace.cssSelector} { color: ${y}; }`);const x=i.getColor(Q8e);x&&e.addRule(`${be.symbolNull.cssSelector} { color: ${x}; }`);const k=i.getColor(X8e);k&&e.addRule(`${be.symbolNumber.cssSelector} { color: ${k}; }`);const S=i.getColor(J8e);S&&e.addRule(`${be.symbolObject.cssSelector} { color: ${S}; }`);const L=i.getColor(e9e);L&&e.addRule(`${be.symbolOperator.cssSelector} { color: ${L}; }`);const D=i.getColor(t9e);D&&e.addRule(`${be.symbolPackage.cssSelector} { color: ${D}; }`);const N=i.getColor(i9e);N&&e.addRule(`${be.symbolProperty.cssSelector} { color: ${N}; }`);const T=i.getColor(n9e);T&&e.addRule(`${be.symbolReference.cssSelector} { color: ${T}; }`);const $=i.getColor(s9e);$&&e.addRule(`${be.symbolSnippet.cssSelector} { color: ${$}; }`);const U=i.getColor(r9e);U&&e.addRule(`${be.symbolString.cssSelector} { color: ${U}; }`);const ee=i.getColor(o9e);ee&&e.addRule(`${be.symbolStruct.cssSelector} { color: ${ee}; }`);const ce=i.getColor(a9e);ce&&e.addRule(`${be.symbolText.cssSelector} { color: ${ce}; }`);const fe=i.getColor(l9e);fe&&e.addRule(`${be.symbolTypeParameter.cssSelector} { color: ${fe}; }`);const Ce=i.getColor(c9e);Ce&&e.addRule(`${be.symbolUnit.cssSelector} { color: ${Ce}; }`);const Se=i.getColor(h9e);Se&&e.addRule(`${be.symbolVariable.cssSelector} { color: ${Se}; }`)});class lte{constructor(){this._onDidWillResize=new z,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new z,this.onDidResize=this._onDidResize.event,this._sashListener=new de,this._size=new Vt(0,0),this._minSize=new Vt(0,0),this._maxSize=new Vt(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new Tn(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new Tn(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new Tn(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:cD.North}),this._southSash=new Tn(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:cD.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,n=0;this._sashListener.add(ke.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,n=0)})),this._sashListener.add(ke.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,n=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(s=>{e&&(n=s.currentX-s.startX,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(s=>{e&&(n=-(s.currentX-s.startX),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(s=>{e&&(t=-(s.currentY-s.startY),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(s=>{e&&(t=s.currentY-s.startY,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(ke.any(this._eastSash.onDidReset,this._westSash.onDidReset)(s=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(ke.any(this._northSash.onDidReset,this._southSash.onDidReset)(s=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,n,s){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=n?3:0,this._westSash.state=s?3:0}layout(e=this.size.height,t=this.size.width){const{height:n,width:s}=this._minSize,{height:r,width:o}=this._maxSize;e=Math.max(n,Math.min(r,e)),t=Math.max(s,Math.min(o,t));const a=new Vt(t,e);Vt.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}var u9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},d9e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function nF(i){return!!i&&!!(i.completion.documentation||i.completion.detail&&i.completion.detail!==i.completion.label)}let C3=class{constructor(e,t){this._editor=e,this._onDidClose=new z,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new z,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new de,this._renderDisposeable=new de,this._borderWidth=1,this._size=new Vt(330,0),this.domNode=ue(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(Vf,{editor:e}),this._body=ue(".body"),this._scrollbar=new Ck(this._body,{}),se(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=se(this._body,ue(".header")),this._close=se(this._header,ue("span"+be.close.cssSelector)),this._close.title=_("details.close","Close"),this._type=se(this._header,ue("p.type")),this._docs=se(this._body,ue("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(43)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(43),n=t.getMassagedFontFamily(ko?us.fontFamily:null),s=e.get(106)||t.fontSize,r=e.get(107)||t.lineHeight,o=t.fontWeight,a=`${s}px`,l=`${r}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${r/s}`,this.domNode.style.fontWeight=o,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=n,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){const e=this._editor.getOption(107)||this._editor.getOption(43).lineHeight,t=this._borderWidth,n=t*2;return{lineHeight:e,borderWidth:t,borderHeight:n,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=_("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var n,s;this._renderDisposeable.clear();let{detail:r,documentation:o}=e.completion;if(t){let a="";a+=`score: ${e.score[0]}
`,a+=`prefix: ${(n=e.word)!==null&&n!==void 0?n:"(no prefix)"}
`,a+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,a+=`distance: ${e.distance} (localityBonus-setting)
`,a+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,a+=`commit_chars: ${(s=e.completion.commitCharacters)===null||s===void 0?void 0:s.join("")}
`,o=new Wm().appendCodeblock("empty",a),r=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!nF(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),r){const a=r.length>1e5?`${r.substr(0,1e5)}…`:r;this._type.textContent=a,this._type.title=a,ur(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(a))}else Rn(this._type),this._type.title="",Cs(this._type),this.domNode.classList.add("no-type");if(Rn(this._docs),typeof o=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=o;else if(o){this._docs.classList.add("markdown-docs"),Rn(this._docs);const a=this._markdownRenderer.render(o);this._docs.appendChild(a.element),this._renderDisposeable.add(a),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=a=>{a.preventDefault(),a.stopPropagation()},this._close.onclick=a=>{a.preventDefault(),a.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(e,t){const n=new Vt(e,t);Vt.equals(n,this._size)||(this._size=n,gSe(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};C3=u9e([d9e(1,Wt)],C3);class f9e{constructor(e,t){this.widget=e,this._editor=t,this._disposables=new de,this._added=!1,this._resizable=new lte,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let n,s,r=0,o=0;this._disposables.add(this._resizable.onDidWillResize(()=>{n=this._topLeft,s=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(n&&s){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(o=s.width-a.dimension.width,l=!0),a.north&&(r=s.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:n.top+r,left:n.left+o})}a.done&&(n=void 0,s=void 0,r=0,o=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(a=this._userSize)!==null&&a!==void 0?a:this.widget.size)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e){var t;const n=Nn(e);this._anchorBox=n,this._placeAtAnchor(this._anchorBox,(t=this._userSize)!==null&&t!==void 0?t:this.widget.size)}_placeAtAnchor(e,t){var n;const s=WL(document.body),r=this.widget.getLayoutInfo(),o=new Vt(220,2*r.lineHeight),a=e.top,l=function(){const b=s.width-(e.left+e.width+r.borderWidth+r.horizontalPadding),w=-r.borderWidth+e.left+e.width,y=new Vt(b,s.height-e.top-r.borderHeight-r.verticalPadding),x=y.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:a,left:w,fit:b-t.width,maxSizeTop:y,maxSizeBottom:x,minSize:o.with(Math.min(b,o.width))}}(),c=function(){const b=e.left-r.borderWidth-r.horizontalPadding,w=Math.max(r.horizontalPadding,e.left-t.width-r.borderWidth),y=new Vt(b,s.height-e.top-r.borderHeight-r.verticalPadding),x=y.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:a,left:w,fit:b-t.width,maxSizeTop:y,maxSizeBottom:x,minSize:o.with(Math.min(b,o.width))}}(),h=function(){const b=e.left,w=-r.borderWidth+e.top+e.height,y=new Vt(e.width-r.borderHeight,s.height-e.top-e.height-r.verticalPadding);return{top:w,left:b,fit:y.height-t.height,maxSizeBottom:y,maxSizeTop:y,minSize:o.with(y.width)}}(),u=[l,c,h],d=(n=u.find(b=>b.fit>=0))!==null&&n!==void 0?n:u.sort((b,w)=>w.fit-b.fit)[0],f=e.top+e.height-r.borderHeight;let g,p=t.height;const m=Math.max(d.maxSizeTop.height,d.maxSizeBottom.height);p>m&&(p=m);let v;p<=d.maxSizeTop.height?(g=!0,v=d.maxSizeTop):(g=!1,v=d.maxSizeBottom),this._applyTopLeft({left:d.left,top:g?d.top:f-p}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!g,d===l,g,d!==l),this._resizable.minSize=d.minSize,this._resizable.maxSize=v,this._resizable.layout(p,Math.min(v.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}}var Mc;(function(i){i[i.FILE=0]="FILE",i[i.FOLDER=1]="FOLDER",i[i.ROOT_FOLDER=2]="ROOT_FOLDER"})(Mc||(Mc={}));function dC(i,e,t,n){const s=n===Mc.ROOT_FOLDER?["rootfolder-icon"]:n===Mc.FOLDER?["folder-icon"]:["file-icon"];if(t){let r;if(t.scheme===it.data?r=fu.parseMetaData(t).get(fu.META_DATA_LABEL):r=sH(iY(t).toLowerCase()),n===Mc.FOLDER)s.push(`${r}-name-folder-icon`);else{if(r){if(s.push(`${r}-name-file-icon`),r.length<=255){const a=r.split(".");for(let l=1;l<a.length;l++)s.push(`${a.slice(l).join(".")}-ext-file-icon`)}s.push("ext-file-icon")}const o=g9e(i,e,t);o&&s.push(`${sH(o)}-lang-file-icon`)}}return s}function g9e(i,e,t){if(!t)return null;let n=null;if(t.scheme===it.data){const r=fu.parseMetaData(t).get(fu.META_DATA_MIME);r&&(n=e.getModeId(r))}else{const s=i.getModel(t);s&&(n=s.getLanguageId())}return n&&n!==N0?n:e.getModeIdByFilepathOrFirstLine(t)}function sH(i){return i.replace(/[\11\12\14\15\40]/g,"/")}var p9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},mI=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},__;function cte(i){return`suggest-aria-id:${i}`}const m9e=es("suggest-more-info",be.chevronRight,_("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),_9e=new(__=class gS{extract(e,t){if(e.textLabel.match(gS._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(gS._regexStrict))return t[0]=e.completion.detail,!0;if(typeof e.completion.documentation=="string"){const n=gS._regexRelaxed.exec(e.completion.documentation);if(n&&(n.index===0||n.index+n[0].length===e.completion.documentation.length))return t[0]=n[0],!0}return!1}},__._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,__._regexStrict=new RegExp(`^${__._regexRelaxed.source}$`,"i"),__);let S3=class{constructor(e,t,n,s){this._editor=e,this._modelService=t,this._modeService=n,this._themeService=s,this._onDidToggleDetails=new z,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=Object.create(null);t.disposables=new de,t.root=e,t.root.classList.add("show-file-icons"),t.icon=se(e,ue(".icon")),t.colorspan=se(t.icon,ue("span.colorspan"));const n=se(e,ue(".contents")),s=se(n,ue(".main"));t.iconContainer=se(s,ue(".icon-label.codicon")),t.left=se(s,ue("span.left")),t.right=se(s,ue("span.right")),t.iconLabel=new BP(t.left,{supportHighlights:!0,supportIcons:!0}),t.disposables.add(t.iconLabel),t.parametersLabel=se(t.left,ue("span.signature-label")),t.qualifierLabel=se(t.left,ue("span.qualifier-label")),t.detailsLabel=se(t.right,ue("span.details-label")),t.readMore=se(t.right,ue("span.readMore"+oi.asCSSSelector(m9e))),t.readMore.title=_("readMore","Read More");const r=()=>{const o=this._editor.getOptions(),a=o.get(43),l=a.getMassagedFontFamily(ko?us.fontFamily:null),c=a.fontFeatureSettings,h=o.get(106)||a.fontSize,u=o.get(107)||a.lineHeight,d=a.fontWeight,f=`${h}px`,g=`${u}px`;t.root.style.fontSize=f,t.root.style.fontWeight=d,s.style.fontFamily=l,s.style.fontFeatureSettings=c,s.style.lineHeight=g,t.icon.style.height=g,t.icon.style.width=g,t.readMore.style.height=g,t.readMore.style.width=g};return r(),t.disposables.add(this._editor.onDidChangeConfiguration(o=>{(o.hasChanged(43)||o.hasChanged(106)||o.hasChanged(107))&&r()})),t}renderElement(e,t,n){const{completion:s}=e;n.root.id=cte(t),n.colorspan.style.backgroundColor="";const r={labelEscapeNewLines:!0,matches:vP(e.score)};let o=[];if(s.kind===19&&_9e.extract(e,o))n.icon.className="icon customcolor",n.iconContainer.className="icon hide",n.colorspan.style.backgroundColor=o[0];else if(s.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){n.icon.className="icon hide",n.iconContainer.className="icon hide";const a=dC(this._modelService,this._modeService,We.from({scheme:"fake",path:e.textLabel}),Mc.FILE),l=dC(this._modelService,this._modeService,We.from({scheme:"fake",path:s.detail}),Mc.FILE);r.extraClasses=a.length>l.length?a:l}else s.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(n.icon.className="icon hide",n.iconContainer.className="icon hide",r.extraClasses=m5([dC(this._modelService,this._modeService,We.from({scheme:"fake",path:e.textLabel}),Mc.FOLDER),dC(this._modelService,this._modeService,We.from({scheme:"fake",path:s.detail}),Mc.FOLDER)])):(n.icon.className="icon hide",n.iconContainer.className="",n.iconContainer.classList.add("suggest-icon",...Wxe(s.kind).split(" ")));s.tags&&s.tags.indexOf(1)>=0&&(r.extraClasses=(r.extraClasses||[]).concat(["deprecated"]),r.matches=[]),n.iconLabel.setLabel(e.textLabel,void 0,r),typeof s.label=="string"?(n.parametersLabel.textContent="",n.detailsLabel.textContent=_I(s.detail||""),n.root.classList.add("string-label")):(n.parametersLabel.textContent=_I(s.label.detail||""),n.detailsLabel.textContent=_I(s.label.description||""),n.root.classList.remove("string-label")),this._editor.getOption(105).showInlineDetails?ur(n.detailsLabel):Cs(n.detailsLabel),nF(e)?(n.right.classList.add("can-expand-details"),ur(n.readMore),n.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},n.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(n.right.classList.remove("can-expand-details"),Cs(n.readMore),n.readMore.onmousedown=null,n.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};S3=p9e([mI(1,Rs),mI(2,Os),mI(3,si)],S3);function _I(i){return i.replace(/\r\n|\r|\n/g,"")}var b9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},fC=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},v9e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const w9e=V("editorSuggestWidget.background",{dark:To,light:To,hc:To},_("editorSuggestWidgetBackground","Background color of the suggest widget.")),y9e=V("editorSuggestWidget.border",{dark:jd,light:jd,hc:jd},_("editorSuggestWidgetBorder","Border color of the suggest widget.")),C9e=V("editorSuggestWidget.foreground",{dark:Jh,light:Jh,hc:Jh},_("editorSuggestWidgetForeground","Foreground color of the suggest widget.")),S9e=V("editorSuggestWidget.selectedForeground",{dark:YC,light:YC,hc:YC},_("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget.")),x9e=V("editorSuggestWidget.selectedIconForeground",{dark:QC,light:QC,hc:QC},_("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget.")),D9e=V("editorSuggestWidget.selectedBackground",{dark:XC,light:XC,hc:XC},_("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget.")),L9e=V("editorSuggestWidget.highlightForeground",{dark:Kp,light:Kp,hc:Kp},_("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),k9e=V("editorSuggestWidget.focusHighlightForeground",{dark:aE,light:aE,hc:aE},_("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));class A9e{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof Pf}`}restore(){var e;const t=(e=this._service.get(this._key,0))!==null&&e!==void 0?e:"";try{const n=JSON.parse(t);if(Vt.is(n))return Vt.lift(n)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}let L1=class x3{constructor(e,t,n,s,r){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new Ms,this._disposables=new de,this._onDidSelect=new z,this._onDidFocus=new z,this._onDidHide=new z,this._onDidShow=new z,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new z,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new lte,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new E9e(this,e),this._persistedSize=new A9e(t,e);class o{constructor(f,g,p=!1,m=!1){this.persistedSize=f,this.currentSize=g,this.persistHeight=p,this.persistWidth=m}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new o(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(d=>{var f,g,p,m;if(this._resize(d.dimension.width,d.dimension.height),a&&(a.persistHeight=a.persistHeight||!!d.north||!!d.south,a.persistWidth=a.persistWidth||!!d.east||!!d.west),!!d.done){if(a){const{itemHeight:v,defaultSize:b}=this.getLayoutInfo(),w=Math.round(v/2);let{width:y,height:x}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-x)<=w)&&(x=(g=(f=a.persistedSize)===null||f===void 0?void 0:f.height)!==null&&g!==void 0?g:b.height),(!a.persistWidth||Math.abs(a.currentSize.width-y)<=w)&&(y=(m=(p=a.persistedSize)===null||p===void 0?void 0:p.width)!==null&&m!==void 0?m:b.width),this._persistedSize.store(new Vt(y,x))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=se(this.element.domNode,ue(".message")),this._listElement=se(this.element.domNode,ue(".tree"));const l=r.createInstance(C3,this.editor);l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new f9e(l,this.editor);const c=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(105).showIcons);c();const h=r.createInstance(S3,this.editor);this._disposables.add(h),this._disposables.add(h.onDidToggleDetails(()=>this.toggleDetails())),this._list=new Wl("SuggestWidget",this._listElement,{getHeight:d=>this.getLayoutInfo().itemHeight,getTemplateId:d=>"suggestion"},[h],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,accessibilityProvider:{getRole:()=>"option",getAriaLabel:d=>{if(d.isResolved&&this._isDetailsVisible()){const{documentation:f,detail:g}=d.completion,p=fo("{0}{1}",g||"",f?typeof f=="string"?f:f.value:"");return _("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",d.textLabel,p)}else return d.textLabel},getWidgetAriaLabel:()=>_("suggest","Suggest"),getWidgetRole:()=>"listbox"}}),this._status=r.createInstance(y3,this.element.domNode);const u=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(105).showStatusBar);u(),this._disposables.add(Nf(this._list,s,{listInactiveFocusBackground:D9e,listInactiveFocusOutline:Is})),this._disposables.add(s.onDidColorThemeChange(d=>this._onThemeChange(d))),this._onThemeChange(s.getColorTheme()),this._disposables.add(this._list.onMouseDown(d=>this._onListMouseDownOrTap(d))),this._disposables.add(this._list.onTap(d=>this._onListMouseDownOrTap(d))),this._disposables.add(this._list.onDidChangeSelection(d=>this._onListSelection(d))),this._disposables.add(this._list.onDidChangeFocus(d=>this._onListFocus(d))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(d=>{d.hasChanged(105)&&(u(),c())})),this._ctxSuggestWidgetVisible=Je.Visible.bindTo(n),this._ctxSuggestWidgetDetailsVisible=Je.DetailsVisible.bindTo(n),this._ctxSuggestWidgetMultipleSuggestions=Je.MultipleSuggestions.bindTo(n),this._disposables.add(Ji(this._details.widget.domNode,"keydown",d=>{this._onDetailsKeydown.fire(d)})),this._disposables.add(this.editor.onMouseDown(d=>this._onEditorMouseDown(d)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const n=this._completionModel;n&&(this._onDidSelect.fire({item:e,index:t,model:n}),this.editor.focus())}_onThemeChange(e){const t=e.getColor(w9e);t&&(this.element.domNode.style.backgroundColor=t.toString(),this._messageElement.style.backgroundColor=t.toString(),this._details.widget.domNode.style.backgroundColor=t.toString());const n=e.getColor(y9e);n&&(this.element.domNode.style.borderColor=n.toString(),this._messageElement.style.borderColor=n.toString(),this._status.element.style.borderTopColor=n.toString(),this._details.widget.domNode.style.borderColor=n.toString(),this._detailsBorderColor=n.toString());const s=e.getColor(vu);s&&(this._detailsFocusBorderColor=s.toString()),this._details.widget.borderWidth=e.type==="hc"?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0});return}if(!this._completionModel)return;const n=e.elements[0],s=e.indexes[0];n!==this._focusedItem&&((t=this._currentSuggestionDetails)===null||t===void 0||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=n,this._list.reveal(s),this._currentSuggestionDetails=kr(r=>v9e(this,void 0,void 0,function*(){const o=wm(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250);r.onCancellationRequested(()=>o.dispose());const a=yield n.resolve(r);return o.dispose(),a})),this._currentSuggestionDetails.then(()=>{s>=this._list.length||n!==this._list.element(s)||(this._ignoreFocusEvents=!0,this._list.splice(s,1,[n]),this._list.setFocus([s]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:cte(s)}))}).catch(Ke)),this._onDidFocus.fire({item:n,index:s,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:Cs(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=x3.LOADING_MESSAGE,Cs(this._listElement,this._status.element),ur(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=x3.NO_SUGGESTIONS_MESSAGE,Cs(this._listElement,this._status.element),ur(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:Cs(this._messageElement),ur(this._listElement,this._status.element),this._show();break;case 4:Cs(this._messageElement),ur(this._listElement,this._status.element),this._show();break;case 5:Cs(this._messageElement),ur(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=wm(()=>this._setState(1),t)))}showSuggestions(e,t,n,s){var r,o;if(this._contentWidget.setPosition(this.editor.getPosition()),(r=this._loadingTimeout)===null||r===void 0||r.dispose(),(o=this._currentSuggestionDetails)===null||o===void 0||o.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),n&&this._state!==2&&this._state!==0){this._setState(4);return}const a=this._completionModel.items.length,l=a===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(a>1),l){this._setState(s?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(n?4:3),this._list.reveal(t,0),this._list.setFocus([t]),this._layout(this.element.size),this._detailsBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsBorderColor)}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._detailsBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsBorderColor)):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._detailsFocusBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsFocusBorderColor))}toggleDetails(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(nF(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),n=Math.ceil(this.getLayoutInfo().itemHeight*4.3);t&&t.height<n&&this._persistedSize.store(t.with(void 0,n))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&this._details.show(),this._positionDetails())}_layout(e){var t,n,s;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const r=WL(document.body),o=this.getLayoutInfo();e||(e=o.defaultSize);let a=e.height,l=e.width;if(this._status.element.style.lineHeight=`${o.itemHeight}px`,this._state===2||this._state===1)a=o.itemHeight+o.borderHeight,l=o.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new Vt(l,a),this._contentWidget.setPreference(2);else{const c=r.width-o.borderHeight-2*o.horizontalPadding;l>c&&(l=c);const h=this._completionModel?this._completionModel.stats.pLabelLen*o.typicalHalfwidthCharacterWidth:l,u=o.statusBarHeight+this._list.contentHeight+o.borderHeight,d=o.itemHeight+o.statusBarHeight,f=Nn(this.editor.getDomNode()),g=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),p=f.top+g.top+g.height,m=Math.min(r.height-p-o.verticalPadding,u),v=f.top+g.top-o.verticalPadding,b=Math.min(v,u);let w=Math.min(Math.max(b,m)+o.borderHeight,u);a===((t=this._cappedHeight)===null||t===void 0?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<d&&(a=d),a>w&&(a=w);const y=150;a>m||this._forceRenderingAbove&&v>y?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),w=b):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),w=m),this.element.preferredSize=new Vt(h,o.defaultSize.height),this.element.maxSize=new Vt(c,w),this.element.minSize=new Vt(220,d),this._cappedHeight=a===u?{wanted:(s=(n=this._cappedHeight)===null||n===void 0?void 0:n.wanted)!==null&&s!==void 0?s:e.height,capped:a}:void 0}this._resize(l,a)}_resize(e,t){const{width:n,height:s}=this.element.maxSize;e=Math.min(n,e),t=Math.min(s,t);const{statusBarHeight:r}=this.getLayoutInfo();this._list.layout(t-r,e),this._listElement.style.height=`${t-r}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode)}getLayoutInfo(){const e=this.editor.getOption(43),t=uo(this.editor.getOption(107)||e.lineHeight,8,1e3),n=!this.editor.getOption(105).showStatusBar||this._state===2||this._state===1?0:t,s=this._details.widget.borderWidth,r=2*s;return{itemHeight:t,statusBarHeight:n,borderWidth:s,borderHeight:r,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new Vt(430,n+12*t+r)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};L1.LOADING_MESSAGE=_("suggestWidget.loading","Loading...");L1.NO_SUGGESTIONS_MESSAGE=_("suggestWidget.noSuggestions","No suggestions.");L1=b9e([fC(1,dg),fC(2,$e),fC(3,si),fC(4,Wt)],L1);class E9e{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:n,horizontalPadding:s}=this._widget.getLayoutInfo();return new Vt(t+2*n+s,e+2*n)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}Jt((i,e)=>{const t=i.getColor(L9e);t&&e.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-highlighted-label .highlight { color: ${t}; }`);const n=i.getColor(k9e);t&&e.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .monaco-highlighted-label .highlight { color: ${n}; }`);const s=i.getColor(C9e);s&&e.addRule(`.monaco-editor .suggest-widget, .monaco-editor .suggest-details { color: ${s}; }`);const r=i.getColor(S9e);r&&e.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused { color: ${r}; }`);const o=i.getColor(x9e);o&&e.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .codicon { color: ${o}; }`);const a=i.getColor(gk);a&&e.addRule(`.monaco-editor .suggest-details a { color: ${a}; }`);const l=i.getColor(pk);l&&e.addRule(`.monaco-editor .suggest-details a:hover { color: ${l}; }`);const c=i.getColor(TQ);c&&e.addRule(`.monaco-editor .suggest-details code { background-color: ${c}; }`)});var I9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},b_=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class T9e{constructor(e,t){if(this._model=e,this._position=t,e.getLineMaxColumn(t.lineNumber)!==t.column){const s=e.getOffsetAt(t),r=e.getPositionAt(s+1);this._marker=e.deltaDecorations([],[{range:F.fromPositions(t,r),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}let Ao=class hte{constructor(e,t,n,s,r,o){this._memoryService=t,this._commandService=n,this._contextKeyService=s,this._instantiationService=r,this._logService=o,this._lineSuffix=new Lr,this._toDispose=new de,this._selectors=new N9e(h=>h.priority),this.editor=e,this.model=r.createInstance(w3,this.editor);const a=Je.InsertMode.bindTo(s);a.set(e.getOption(105).insertMode),this.model.onDidTrigger(()=>a.set(e.getOption(105).insertMode)),this.widget=this._toDispose.add(new ab(()=>{const h=this._instantiationService.createInstance(L1,this.editor);this._toDispose.add(h),this._toDispose.add(h.onDidSelect(p=>this._insertSuggestion(p,0),this));const u=new x8e(this.editor,h,p=>this._insertSuggestion(p,2));this._toDispose.add(u),this._toDispose.add(this.model.onDidSuggest(p=>{p.completionModel.items.length===0&&u.reset()}));const d=Je.MakesTextEdit.bindTo(this._contextKeyService),f=Je.HasInsertAndReplaceRange.bindTo(this._contextKeyService),g=Je.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(gt(()=>{d.reset(),f.reset(),g.reset()})),this._toDispose.add(h.onDidFocus(({item:p})=>{const m=this.editor.getPosition(),v=p.editStart.column,b=m.column;let w=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!p.completion.additionalTextEdits&&!(p.completion.insertTextRules&4)&&b-v===p.completion.insertText.length&&(w=this.editor.getModel().getValueInRange({startLineNumber:m.lineNumber,startColumn:v,endLineNumber:m.lineNumber,endColumn:b})!==p.completion.insertText),d.set(w),f.set(!q.equals(p.editInsertEnd,p.editReplaceEnd)),g.set(!!p.provider.resolveCompletionItem||!!p.completion.documentation||p.completion.detail!==p.completion.label)})),this._toDispose.add(h.onDetailsKeyDown(p=>{if(p.toKeybinding().equals(new yf(!0,!1,!1,!1,33))||ht&&p.toKeybinding().equals(new yf(!1,!1,!1,!0,33))){p.stopPropagation();return}p.toKeybinding().isModifierKey()||this.editor.focus()})),h})),this._overtypingCapturer=this._toDispose.add(new ab(()=>this._toDispose.add(new t2(this.editor,this.model)))),this._alternatives=this._toDispose.add(new ab(()=>this._toDispose.add(new Wf(this.editor,this._contextKeyService)))),this._toDispose.add(r.createInstance(D1,e)),this._toDispose.add(this.model.onDidTrigger(h=>{this.widget.value.showTriggered(h.auto,h.shy?250:50),this._lineSuffix.value=new T9e(this.editor.getModel(),h.position)})),this._toDispose.add(this.model.onDidSuggest(h=>{if(!h.shy){let u=-1;for(const d of this._selectors.itemsOrderedByPriorityDesc)if(u=d.select(this.editor.getModel(),this.editor.getPosition(),h.completionModel.items),u!==-1)break;u===-1&&(u=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),h.completionModel.items)),this.widget.value.showSuggestions(h.completionModel,u,h.isFrozen,h.auto)}})),this._toDispose.add(this.model.onDidCancel(h=>{h.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));let l=Je.AcceptSuggestionsOnEnter.bindTo(s),c=()=>{const h=this.editor.getOption(1);l.set(h==="on"||h==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>c())),c()}static get(e){return e.getContribution(hte.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const n=this.editor.getModel(),s=n.getAlternativeVersionId(),{item:r}=e,o=[],a=new Na;t&1||this.editor.pushUndoStop();const l=this.getOverwriteInfo(r,!!(t&8));if(this._memoryService.memorize(n,this.editor.getPosition(),r),Array.isArray(r.completion.additionalTextEdits)){const h=Fm.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",r.completion.additionalTextEdits.map(u=>Lm.replace(F.lift(u.range),u.text))),h.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!r.isResolved){const h=new $c(!0);let u;const d=n.onDidChangeContent(m=>{if(m.isFlush){a.cancel(),d.dispose();return}for(let v of m.changes){const b=F.getEndPosition(v.range);(!u||q.isBefore(b,u))&&(u=b)}});let f=t;t|=2;let g=!1,p=this.editor.onWillType(()=>{p.dispose(),g=!0,f&2||this.editor.pushUndoStop()});o.push(r.resolve(a.token).then(()=>{if(!r.completion.additionalTextEdits||a.token.isCancellationRequested||u&&r.completion.additionalTextEdits.some(v=>q.isBefore(u,F.getStartPosition(v.range))))return!1;g&&this.editor.pushUndoStop();const m=Fm.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",r.completion.additionalTextEdits.map(v=>Lm.replace(F.lift(v.range),v.text))),m.restoreRelativeVerticalPositionOfCursor(this.editor),(g||!(f&2))&&this.editor.pushUndoStop(),!0}).then(m=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",h.elapsed(),m),d.dispose(),p.dispose()}))}let{insertText:c}=r.completion;r.completion.insertTextRules&4||(c=Hk.escape(c)),xn.get(this.editor).insert(c,{overwriteBefore:l.overwriteBefore,overwriteAfter:l.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(r.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),r.completion.command?r.completion.command.id===zw.id?this.model.trigger({auto:!0,shy:!1},!0):(o.push(this._commandService.executeCommand(r.completion.command.id,...r.completion.command.arguments?[...r.completion.command.arguments]:[]).catch(Ke)),this.model.cancel()):this.model.cancel(),t&4&&this._alternatives.value.set(e,h=>{for(a.cancel();n.canUndo();){s!==n.getAlternativeVersionId()&&n.undo(),this._insertSuggestion(h,3|(t&8?8:0));break}}),this._alertCompletionItem(r),Promise.all(o).finally(()=>{this.model.clear(),a.dispose()})}getOverwriteInfo(e,t){Mi(this.editor.hasModel());let n=this.editor.getOption(105).insertMode==="replace";t&&(n=!n);const s=e.position.column-e.editStart.column,r=(n?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,o=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:s+o,overwriteAfter:r+a}}_alertCompletionItem(e){if(kl(e.completion.additionalTextEdits)){let t=_("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);ng(t)}}triggerSuggest(e){this.editor.hasModel()&&(this.model.trigger({auto:!1,shy:!1},!1,e),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),n=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},s=r=>{if(r.completion.insertTextRules&4||r.completion.additionalTextEdits)return!0;const o=this.editor.getPosition(),a=r.editStart.column,l=o.column;return l-a!==r.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:o.lineNumber,startColumn:a,endLineNumber:o.lineNumber,endColumn:l})!==r.completion.insertText};ke.once(this.model.onDidTrigger)(r=>{let o=[];ke.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{at(o),n()},void 0,o),this.model.onDidSuggest(({completionModel:a})=>{if(at(o),a.items.length===0){n();return}const l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),c=a.items[l];if(!s(c)){n();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:c,model:a},7)},void 0,o)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const n=this.widget.value.getFocusedItem();let s=0;e&&(s|=4),t&&(s|=8),this._insertSuggestion(n,s)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};Ao.ID="editor.contrib.suggestController";Ao=I9e([b_(1,rte),b_(2,vn),b_(3,$e),b_(4,Wt),b_(5,Jc)],Ao);class N9e{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,n)=>this.prioritySelector(n)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class zw extends gi{constructor(){super({id:zw.id,label:_("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:xe.and(G.writable,G.hasCompletionItemProvider),kbOpts:{kbExpr:G.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t){const n=Ao.get(t);n&&n.triggerSuggest()}}zw.id="editor.action.triggerSuggest";Ps(Ao.ID,Ao);rt(zw);const Jr=100+90,ir=Zr.bindToContribution(Ao.get);pe(new ir({id:"acceptSelectedSuggestion",precondition:Je.Visible,handler(i){i.acceptSelectedSuggestion(!0,!1)}}));ds.registerKeybindingRule({id:"acceptSelectedSuggestion",when:xe.and(Je.Visible,G.textInputFocus),primary:2,weight:Jr});ds.registerKeybindingRule({id:"acceptSelectedSuggestion",when:xe.and(Je.Visible,G.textInputFocus,Je.AcceptSuggestionsOnEnter,Je.MakesTextEdit),primary:3,weight:Jr});da.appendMenuItem(xu,{command:{id:"acceptSelectedSuggestion",title:_("accept.insert","Insert")},group:"left",order:1,when:Je.HasInsertAndReplaceRange.toNegated()});da.appendMenuItem(xu,{command:{id:"acceptSelectedSuggestion",title:_("accept.insert","Insert")},group:"left",order:1,when:xe.and(Je.HasInsertAndReplaceRange,Je.InsertMode.isEqualTo("insert"))});da.appendMenuItem(xu,{command:{id:"acceptSelectedSuggestion",title:_("accept.replace","Replace")},group:"left",order:1,when:xe.and(Je.HasInsertAndReplaceRange,Je.InsertMode.isEqualTo("replace"))});pe(new ir({id:"acceptAlternativeSelectedSuggestion",precondition:xe.and(Je.Visible,G.textInputFocus),kbOpts:{weight:Jr,kbExpr:G.textInputFocus,primary:1027,secondary:[1026]},handler(i){i.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:xu,group:"left",order:2,when:xe.and(Je.HasInsertAndReplaceRange,Je.InsertMode.isEqualTo("insert")),title:_("accept.replace","Replace")},{menuId:xu,group:"left",order:2,when:xe.and(Je.HasInsertAndReplaceRange,Je.InsertMode.isEqualTo("replace")),title:_("accept.insert","Insert")}]}));Tt.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");pe(new ir({id:"hideSuggestWidget",precondition:Je.Visible,handler:i=>i.cancelSuggestWidget(),kbOpts:{weight:Jr,kbExpr:G.textInputFocus,primary:9,secondary:[1033]}}));pe(new ir({id:"selectNextSuggestion",precondition:xe.and(Je.Visible,Je.MultipleSuggestions),handler:i=>i.selectNextSuggestion(),kbOpts:{weight:Jr,kbExpr:G.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));pe(new ir({id:"selectNextPageSuggestion",precondition:xe.and(Je.Visible,Je.MultipleSuggestions),handler:i=>i.selectNextPageSuggestion(),kbOpts:{weight:Jr,kbExpr:G.textInputFocus,primary:12,secondary:[2060]}}));pe(new ir({id:"selectLastSuggestion",precondition:xe.and(Je.Visible,Je.MultipleSuggestions),handler:i=>i.selectLastSuggestion()}));pe(new ir({id:"selectPrevSuggestion",precondition:xe.and(Je.Visible,Je.MultipleSuggestions),handler:i=>i.selectPrevSuggestion(),kbOpts:{weight:Jr,kbExpr:G.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));pe(new ir({id:"selectPrevPageSuggestion",precondition:xe.and(Je.Visible,Je.MultipleSuggestions),handler:i=>i.selectPrevPageSuggestion(),kbOpts:{weight:Jr,kbExpr:G.textInputFocus,primary:11,secondary:[2059]}}));pe(new ir({id:"selectFirstSuggestion",precondition:xe.and(Je.Visible,Je.MultipleSuggestions),handler:i=>i.selectFirstSuggestion()}));pe(new ir({id:"toggleSuggestionDetails",precondition:Je.Visible,handler:i=>i.toggleSuggestionDetails(),kbOpts:{weight:Jr,kbExpr:G.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:xu,group:"right",order:1,when:xe.and(Je.DetailsVisible,Je.CanResolve),title:_("detail.more","show less")},{menuId:xu,group:"right",order:1,when:xe.and(Je.DetailsVisible.toNegated(),Je.CanResolve),title:_("detail.less","show more")}]}));pe(new ir({id:"toggleExplainMode",precondition:Je.Visible,handler:i=>i.toggleExplainMode(),kbOpts:{weight:100,primary:2133}}));pe(new ir({id:"toggleSuggestionFocus",precondition:Je.Visible,handler:i=>i.toggleSuggestionFocus(),kbOpts:{weight:Jr,kbExpr:G.textInputFocus,primary:2570,mac:{primary:778}}}));pe(new ir({id:"insertBestCompletion",precondition:xe.and(G.textInputFocus,xe.equals("config.editor.tabCompletion","on"),D1.AtEnd,Je.Visible.toNegated(),Wf.OtherSuggestions.toNegated(),xn.InSnippetMode.toNegated()),handler:(i,e)=>{i.triggerSuggestAndAcceptBest(xs(e)?Object.assign({fallback:"tab"},e):{fallback:"tab"})},kbOpts:{weight:Jr,primary:2}}));pe(new ir({id:"insertNextSuggestion",precondition:xe.and(G.textInputFocus,xe.equals("config.editor.tabCompletion","on"),Wf.OtherSuggestions,Je.Visible.toNegated(),xn.InSnippetMode.toNegated()),handler:i=>i.acceptNextSuggestion(),kbOpts:{weight:Jr,kbExpr:G.textInputFocus,primary:2}}));pe(new ir({id:"insertPrevSuggestion",precondition:xe.and(G.textInputFocus,xe.equals("config.editor.tabCompletion","on"),Wf.OtherSuggestions,Je.Visible.toNegated(),xn.InSnippetMode.toNegated()),handler:i=>i.acceptPrevSuggestion(),kbOpts:{weight:Jr,kbExpr:G.textInputFocus,primary:1026}}));rt(class extends gi{constructor(){super({id:"editor.action.resetSuggestSize",label:_("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(i,e){Ao.get(e).resetWidgetSize()}});function M9e(i,e){return{object:i,dispose:()=>e==null?void 0:e.dispose()}}function R9e(i,e){return(t,n)=>e(i(t),i(n))}function O9e(){return(i,e)=>i-e}function P9e(i,e){let t;for(const n of i)(t===void 0||e(n,t)>0)&&(t=n);return t}class F9e extends te{constructor(e,t){super(),this.editor=e,this.suggestControllerPreselector=t,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentInlineCompletion=void 0,this.onDidChangeEmitter=new z,this.onDidChange=this.onDidChangeEmitter.event,this.setInactiveDelayed=this._register(new fi(()=>{this.isSuggestWidgetVisible||this._isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())},100)),this._register(e.onKeyDown(s=>{s.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(s=>{s.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const n=Ao.get(this.editor);if(n){this._register(n.registerSelector({priority:100,select:(o,a,l)=>{const c=this.editor.getModel(),h=ND(c,this.suggestControllerPreselector());if(!h)return-1;const u=q.lift(a),d=l.map((g,p)=>{const m=rH(n,u,g,this.isShiftKeyPressed),v=ND(c,m);if(!v)return;const b=B9e(h.range,v.range)&&h.text.startsWith(v.text);return{index:p,valid:b,prefixLength:v.text.length,suggestItem:g}}).filter(g=>g&&g.valid),f=P9e(d,R9e(g=>g.prefixLength,O9e()));return f?f.index:-1}}));let s=!1;const r=()=>{s||(s=!0,this._register(n.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(n.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.update(this._isActive)})),this._register(n.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(ke.once(n.model.onDidTrigger)(o=>{r()}))}this.update(this._isActive)}get state(){if(this._isActive)return{selectedItemAsInlineCompletion:this._currentInlineCompletion}}update(e){const t=this.getInlineCompletion();let n=!1;X6e(this._currentInlineCompletion,t)||(this._currentInlineCompletion=t,n=!0),this._isActive!==e&&(this._isActive=e,n=!0),n&&this.onDidChangeEmitter.fire()}getInlineCompletion(){const e=Ao.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem();if(t)return rH(e,this.editor.getPosition(),t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=Ao.get(this.editor);e&&e.stopForceRenderingAbove()}forceRenderingAbove(){const e=Ao.get(this.editor);e&&e.forceRenderingAbove()}}function B9e(i,e){return i.startLineNumber===e.startLineNumber&&i.startColumn===e.startColumn&&(i.endLineNumber<e.endLineNumber||i.endLineNumber===e.endLineNumber&&i.endColumn<=e.endColumn)}function rH(i,e,t,n){if(Array.isArray(t.completion.additionalTextEdits)&&t.completion.additionalTextEdits.length>0)return{text:"",range:F.fromPositions(e,e)};let{insertText:s}=t.completion;if(t.completion.insertTextRules&4){const o=new Hk().parse(s),a=i.editor.getModel();if(o.children.length>100)return;el.adjustWhitespace(a,e,o,!0,!0),s=o.toString()}const r=i.getOverwriteInfo(t,n);return{text:s,range:F.fromPositions(e.delta(0,-r.overwriteBefore),e.delta(0,Math.max(r.overwriteAfter,0)))}}var oH=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class V9e extends ete{constructor(e,t){super(e),this.cache=t,this.suggestionInlineCompletionSource=this._register(new F9e(this.editor,()=>{var n,s;return(s=(n=this.cache.value)===null||n===void 0?void 0:n.completions[0])===null||s===void 0?void 0:s.toLiveInlineCompletion()})),this.updateOperation=this._register(new Lr),this.updateCacheSoon=this._register(new fi(()=>this.updateCache(),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange(()=>{this.updateCacheSoon.schedule(),this.suggestionInlineCompletionSource.state||(this.minReservedLineCount=0);const s=this.ghostText;s&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,W9e(s.parts.map(r=>r.lines.length-1)))),this.minReservedLineCount>=1&&this.isSuggestionPreviewEnabled()?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()})),this._register(this.cache.onDidChange(()=>{this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeCursorPosition(n=>{this.isSuggestionPreviewEnabled()&&(this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire())})),this._register(gt(()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove()))}get isActive(){return this.suggestionInlineCompletionSource.state!==void 0}isSuggestionPreviewEnabled(){return this.editor.getOption(105).preview}updateCache(){return oH(this,void 0,void 0,function*(){const e=this.suggestionInlineCompletionSource.state;if(!e||!e.selectedItemAsInlineCompletion)return;const t={text:e.selectedItemAsInlineCompletion.text,range:e.selectedItemAsInlineCompletion.range},n=this.editor.getPosition(),s=kr(o=>oH(this,void 0,void 0,function*(){let a;try{a=yield nte(n,this.editor.getModel(),{triggerKind:Or.Automatic,selectedSuggestionInfo:t},o)}catch(l){Ke(l);return}o.isCancellationRequested||(this.cache.setValue(this.editor,a,Or.Automatic),this.onDidChangeEmitter.fire())})),r=new ite(s,Or.Automatic);this.updateOperation.value=r,yield s,this.updateOperation.value===r&&this.updateOperation.clear()})}get ghostText(){var e,t;if(!this.isSuggestionPreviewEnabled())return;const n=this.suggestionInlineCompletionSource.state,s=ND(this.editor.getModel(),n==null?void 0:n.selectedItemAsInlineCompletion),r=ND(this.editor.getModel(),(t=(e=this.cache.value)===null||e===void 0?void 0:e.completions[0])===null||t===void 0?void 0:t.toLiveInlineCompletion()),o=r&&s&&r.text.startsWith(s.text)&&r.range.equalsRange(s.range)?r:s||r,a=s?((o==null?void 0:o.text.length)||0)-s.text.length:0;return(h=>{const u=this.editor.getOptions().get(105).previewMode;return h?tte(h,this.editor.getModel(),u,this.editor.getPosition(),a)||new Jee(h.range.endLineNumber,[],this.minReservedLineCount):void 0})(o)}}function W9e(i){return i.reduce((e,t)=>e+t,0)}var z9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},H9e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},U9e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class $9e extends te{constructor(){super(...arguments),this.onDidChangeEmitter=new z,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new Lr)}get targetModel(){var e;return(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object}setTargetModel(e){var t;((t=this.currentModelRef.value)===null||t===void 0?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?M9e(e,e.onDidChange(()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()})):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=(t=(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object)===null||t===void 0?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var t;(t=this.targetModel)===null||t===void 0||t.setExpanded(e)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}}let D3=class extends $9e{constructor(e,t){super(),this.editor=e,this.commandService=t,this.sharedCache=this._register(new j9e),this.suggestWidgetAdapterModel=this._register(new V9e(this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(new b3(this.editor,this.sharedCache,this.commandService)),this._register(this.suggestWidgetAdapterModel.onDidChange(()=>{this.updateModel()})),this.updateModel()}get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(e){var t;const n=(t=this.activeInlineCompletionsModel)===null||t===void 0?void 0:t.ghostText;return n?n.parts.some(s=>e.containsPosition(new q(n.lineNumber,s.column))):!1}triggerInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.trigger(Or.Explicit)}commitInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.commitCurrentSuggestion()}hideInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.hide()}showNextInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showNext()}showPreviousInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showPrevious()}hasMultipleInlineCompletions(){var e;return U9e(this,void 0,void 0,function*(){const t=yield(e=this.activeInlineCompletionsModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};D3=z9e([H9e(1,vn)],D3);class j9e extends te{constructor(){super(...arguments),this.onDidChangeEmitter=new z,this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new Lr)}get value(){return this.cache.value}setValue(e,t,n){this.cache.value=new s8e(e,t,()=>this.onDidChangeEmitter.fire(),n)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}}var ute=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Wb=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},bI;const aH=(bI=window.trustedTypes)===null||bI===void 0?void 0:bI.createPolicy("editorGhostText",{createHTML:i=>i});let L3=class extends te{constructor(e,t,n,s){super(),this.editor=e,this.model=t,this.instantiationService=n,this.modeService=s,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(k3,this.editor)),this.additionalLinesWidget=this._register(new q9e(this.editor,this.modeService.languageIdCodec)),this.viewMoreContentWidget=void 0,this._register(this.editor.onDidChangeConfiguration(r=>{(r.hasChanged(29)||r.hasChanged(104)||r.hasChanged(87)||r.hasChanged(82)||r.hasChanged(44)||r.hasChanged(43)||r.hasChanged(58))&&this.update()})),this._register(gt(()=>{var r;this.disposed=!0,this.update(),(r=this.viewMoreContentWidget)===null||r===void 0||r.dispose(),this.viewMoreContentWidget=void 0})),this._register(t.onDidChange(()=>{this.update()})),this.update()}shouldShowHoverAtViewZone(e){return this.additionalLinesWidget.viewZoneId===e}update(){var e;const t=this.model.ghostText;if(!this.editor.hasModel()||!t||this.disposed){this.partsWidget.clear(),this.additionalLinesWidget.clear();return}const n=new Array,s=new Array;function r(c,h){if(s.length>0){const u=s[s.length-1];h&&u.decorations.push(new br(u.content.length+1,u.content.length+1+c[0].length,h,0)),u.content+=c[0],c=c.slice(1)}for(const u of c)s.push({content:u,decorations:h?[new br(1,u.length+1,h,0)]:[]})}const o=this.editor.getModel().getLineContent(t.lineNumber);this.editor.getModel().getLineTokens(t.lineNumber);let a,l=0;for(const c of t.parts){let h=c.lines;a===void 0?(n.push({column:c.column,text:h[0],preview:c.preview}),h=h.slice(1)):r([o.substring(l,c.column-1)],void 0),h.length>0&&(r(h,"ghost-text"),a===void 0&&c.column<=o.length&&(a=c.column)),l=c.column-1}a!==void 0&&r([o.substring(l)],void 0),this.partsWidget.setParts(t.lineNumber,n,a!==void 0?{column:a,length:o.length+1-a}:void 0),this.additionalLinesWidget.updateLines(t.lineNumber,s,t.additionalReservedLineCount),t.parts.some(c=>c.lines.length<0)?this.viewMoreContentWidget=this.renderViewMoreLines(new q(t.lineNumber,this.editor.getModel().getLineMaxColumn(t.lineNumber)),"",0):((e=this.viewMoreContentWidget)===null||e===void 0||e.dispose(),this.viewMoreContentWidget=void 0)}renderViewMoreLines(e,t,n){const s=this.editor.getOption(43),r=document.createElement("div");r.className="suggest-preview-additional-widget",Fn.applyFontInfoSlow(r,s);const o=document.createElement("span");o.className="content-spacer",o.append(t),r.append(o);const a=document.createElement("span");a.className="content-newline suggest-preview-text",a.append("⏎  "),r.append(a);const l=new de,c=document.createElement("div");return c.className="button suggest-preview-text",c.append(`+${n} lines…`),l.add(Ji(c,"mousedown",h=>{var u;(u=this.model)===null||u===void 0||u.setExpanded(!0),h.preventDefault(),this.editor.focus()})),r.append(c),new Y9e(this.editor,e,r,l)}};L3=ute([Wb(2,Wt),Wb(3,Os)],L3);let k3=class{constructor(e,t,n,s){this.editor=e,this.codeEditorService=t,this.themeService=n,this.contextKeyService=s,this.decorationIds=[],this.disposableStore=new de}dispose(){this.clear(),this.disposableStore.dispose()}clear(){this.editor.deltaDecorations(this.decorationIds,[]),this.disposableStore.clear()}setParts(e,t,n){this.disposableStore.clear();const s=this.themeService.getColorTheme(),r=s.getColor(JQ);let o,a;r&&(o=String(r.rgba.a),a=Z.Format.CSS.format(dte(r)));const l=s.getColor(XQ);let c;l&&(c=`2px dashed ${l}`);const h=this.editor.getModel();if(!h)return;const{tabSize:u}=h.getOptions(),d=h.getLineContent(e)||"";let f=0,g="";const p=new Array;n&&p.push({range:F.fromPositions(new q(e,n.column),new q(e,n.column+n.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});const m=this.contextKeyService.getContextKeyValue("config.editor.useInjectedText"),v=m===void 0?!0:!!m;this.decorationIds=this.editor.deltaDecorations(this.decorationIds,t.map(b=>{g+=d.substring(f,b.column-1),f=b.column-1;const w=v?b.text:this.renderSingleLineText(b.text,g,u,!1),y=this.disposableStore.add(Z9e(this.codeEditorService,"ghost-text","0-ghost-text-",{after:{contentText:w,opacity:o,color:a,border:c,fontWeight:b.preview?"bold":"normal"}}));return{range:F.fromPositions(new q(e,b.column)),options:v?{description:"ghost-text",after:{content:w,inlineClassName:b.preview?"ghost-text-decoration-preview":"ghost-text-decoration"},showIfCollapsed:!0}:Object.assign({},y.resolve())}}).concat(p))}renderSingleLineText(e,t,n,s){const r=t+e,o=At.visibleColumnsByColumns(r,n);let a="",l=t.length+1;for(const c of e){if(c==="	"){const h=o[l+1]-o[l];if(s){a+="→";for(let u=1;u<h;u++)a+=" "}else for(let u=0;u<h;u++)a+=" "}else c===" "?s?a+="·":a+=" ":a+=c;l+=1}return a}};k3=ute([Wb(1,ii),Wb(2,si),Wb(3,$e)],k3);function dte(i){const{r:e,b:t,g:n}=i.rgba;return new Z(new et(e,n,t,255))}class q9e{constructor(e,t){this.editor=e,this.languageIdCodec=t,this._viewZoneId=void 0}get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,n){const s=this.editor.getModel();if(!s)return;const{tabSize:r}=s.getOptions();this.editor.changeViewZones(o=>{this._viewZoneId&&(o.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,n);if(a>0){const l=document.createElement("div");G9e(l,r,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=o.addZone({afterLineNumber:e,heightInLines:a,domNode:l})}})}}function G9e(i,e,t,n,s){const r=n.get(29),o=n.get(104),a="none",l=n.get(82),c=n.get(44),h=n.get(43),u=n.get(58),d=Sf(1e4);d.appendASCIIString('<div class="suggest-preview-text">');for(let p=0,m=t.length;p<m;p++){const v=t[p],b=v.content;d.appendASCIIString('<div class="view-line'),d.appendASCIIString('" style="top:'),d.appendASCIIString(String(p*u)),d.appendASCIIString('px;width:1000000px;">');const w=i5(b),y=zL(b),x=bn.createEmpty(b,s);QL(new tg(h.isMonospace&&!r,h.canUseHalfwidthRightwardsArrow,b,!1,w,y,0,x,v.decorations,e,0,h.spaceWidth,h.middotWidth,h.wsmiddotWidth,o,a,l,c!==hr.OFF,null),d),d.appendASCIIString("</div>")}d.appendASCIIString("</div>"),Fn.applyFontInfoSlow(i,h);const f=d.build(),g=aH?aH.createHTML(f):f;i.innerHTML=g}let K9e=0;function Z9e(i,e,t,n){const s=t+K9e++;return i.registerDecorationType(e,s,n),{dispose(){i.removeDecorationType(s)},resolve(){return i.resolveDecorationOptions(s,!0)}}}class Y9e extends te{constructor(e,t,n,s){super(),this.editor=e,this.position=t,this.domNode=n,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(s),this._register(gt(()=>{this.editor.removeContentWidget(this)})),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}}Jt((i,e)=>{const t=i.getColor(JQ);if(t){const s=String(t.rgba.a),r=Z.Format.CSS.format(dte(t));e.addRule(`.monaco-editor .ghost-text-decoration { opacity: ${s} !important; color: ${r} !important; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { opacity: ${s} !important; color: ${r} !important; }`)}const n=i.getColor(XQ);n&&(e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${n}; }`),e.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${n}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${n}; }`))});var fte=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},A3=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},i2=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};let hn=class gte extends te{constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.triggeredExplicitly=!1,this.activeController=this._register(new Lr),this._register(this.editor.onDidChangeModel(()=>{this.updateModelController()})),this._register(this.editor.onDidChangeConfiguration(n=>{n.hasChanged(105)&&this.updateModelController(),n.hasChanged(54)&&this.updateModelController()})),this.updateModelController()}static get(e){return e.getContribution(gte.ID)}get activeModel(){var e;return(e=this.activeController.value)===null||e===void 0?void 0:e.model}updateModelController(){const e=this.editor.getOption(105),t=this.editor.getOption(54);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(E3,this.editor):void 0}shouldShowHoverAt(e){var t;return((t=this.activeModel)===null||t===void 0?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,n;return((n=(t=this.activeController.value)===null||t===void 0?void 0:t.widget)===null||n===void 0?void 0:n.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),(e=this.activeModel)===null||e===void 0||e.triggerInlineCompletion()}commit(){var e;(e=this.activeModel)===null||e===void 0||e.commitInlineCompletion()}hide(){var e;(e=this.activeModel)===null||e===void 0||e.hideInlineCompletion()}showNextInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return i2(this,void 0,void 0,function*(){const t=yield(e=this.activeModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};hn.inlineSuggestionVisible=new De("inlineSuggestionVisible",!1,_("inlineSuggestionVisible","Whether an inline suggestion is visible"));hn.inlineSuggestionHasIndentation=new De("inlineSuggestionHasIndentation",!1,_("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));hn.inlineSuggestionHasIndentationLessThanTabSize=new De("inlineSuggestionHasIndentationLessThanTabSize",!0,_("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));hn.ID="editor.contrib.ghostTextController";hn=fte([A3(1,Wt)],hn);class Q9e{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=hn.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=hn.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=hn.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)}}let E3=class extends te{constructor(e,t,n){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=n,this.contextKeys=new Q9e(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(D3,this.editor)),this.widget=this._register(this.instantiationService.createInstance(L3,this.editor,this.model)),this._register(gt(()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)})),this._register(this.model.onDidChange(()=>{this.updateContextKeys()})),this.updateContextKeys()}updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(((e=this.model.activeInlineCompletionsModel)===null||e===void 0?void 0:e.ghostText)!==void 0);let t=!1,n=!0;const s=this.model.inlineCompletionsModel.ghostText;if(this.model.activeInlineCompletionsModel&&s&&s.parts.length>0){const{column:r,lines:o}=s.parts[0],a=o[0],l=this.editor.getModel().getLineIndentColumn(s.lineNumber);if(r<=l){let h=Zs(a);h===-1&&(h=a.length-1),t=h>0;const u=this.editor.getModel().getOptions().tabSize;n=At.visibleColumnFromColumn(a,h+1,u)<u}}this.contextKeys.inlineCompletionSuggestsIndentation.set(t),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(n)}};E3=fte([A3(1,Wt),A3(2,$e)],E3);const pte=Zr.bindToContribution(hn.get),k1=new pte({id:Xee,precondition:hn.inlineSuggestionVisible,handler(i){i.commit(),i.editor.focus()}});pe(k1);ds.registerKeybindingRule({primary:2,weight:200,id:k1.id,when:xe.and(k1.precondition,G.tabMovesFocus.toNegated(),hn.inlineSuggestionHasIndentationLessThanTabSize)});pe(new pte({id:"editor.action.inlineSuggest.hide",precondition:hn.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler(i){i.hide()}}));class Zm extends gi{constructor(){super({id:Zm.ID,label:_("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:xe.and(G.writable,hn.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}run(e,t){return i2(this,void 0,void 0,function*(){const n=hn.get(t);n&&(n.showNextInlineCompletion(),t.focus())})}}Zm.ID="editor.action.inlineSuggest.showNext";class Ym extends gi{constructor(){super({id:Ym.ID,label:_("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:xe.and(G.writable,hn.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}run(e,t){return i2(this,void 0,void 0,function*(){const n=hn.get(t);n&&(n.showPreviousInlineCompletion(),t.focus())})}}Ym.ID="editor.action.inlineSuggest.showPrevious";class X9e extends gi{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:_("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:G.writable})}run(e,t){return i2(this,void 0,void 0,function*(){const n=hn.get(t);n&&n.trigger()})}}Ps(hn.ID,hn);rt(X9e);rt(Zm);rt(Ym);var J9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Gg=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class e7e{constructor(e,t,n){this.owner=e,this.range=t,this.controller=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}}let I3=class{constructor(e,t,n,s,r,o,a,l){this._editor=e,this._hover=t,this._commandService=n,this._menuService=s,this._contextKeyService=r,this._modeService=o,this._openerService=a,this.accessibilityService=l}suggestHoverAnchor(e){const t=hn.get(this._editor);if(!t)return null;if(e.target.type===8){const n=e.target.detail;if(t.shouldShowHoverAtViewZone(n.viewZoneId))return new oI(1e3,this,F.fromPositions(n.positionBefore||n.position,n.positionBefore||n.position))}return e.target.type===7&&e.target.range&&t.shouldShowHoverAt(e.target.range)?new oI(1e3,this,e.target.range):e.target.type===6&&e.target.range&&e.target.detail&&e.target.detail.mightBeForeignElement&&t.shouldShowHoverAt(e.target.range)?new oI(1e3,this,e.target.range):null}computeSync(e,t){const n=hn.get(this._editor);return n&&n.shouldShowHoverAt(e.range)?[new e7e(this,e.range,n)]:[]}renderHoverParts(e,t,n){const s=new de,r=e[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(r,t,s);const o=s.add(this._menuService.createMenu(Ue.InlineCompletionsActions,this._contextKeyService)),a=n.addAction({label:_("showNextInlineSuggestion","Next"),commandId:Zm.ID,run:()=>this._commandService.executeCommand(Zm.ID)}),l=n.addAction({label:_("showPreviousInlineSuggestion","Previous"),commandId:Ym.ID,run:()=>this._commandService.executeCommand(Ym.ID)});n.addAction({label:_("acceptInlineSuggestion","Accept"),commandId:k1.id,run:()=>this._commandService.executeCommand(k1.id)});const c=[a,l];for(const h of c)h.setEnabled(!1);r.hasMultipleSuggestions().then(h=>{for(const u of c)u.setEnabled(h)});for(const[h,u]of o.getActions())for(const d of u)d instanceof _u&&n.addAction({label:d.label,commandId:d.item.id,run:()=>this._commandService.executeCommand(d.item.id)});return s}renderScreenReaderText(e,t,n){var s,r;const o=ue,a=o("div.hover-row.markdown-hover"),l=se(a,o("div.hover-contents")),c=n.add(new Vf({editor:this._editor},this._modeService,this._openerService)),h=d=>{n.add(c.onDidRenderAsync(()=>{l.className="hover-contents code-hover-contents",this._hover.onContentsChanged()}));const f=_("inlineSuggestionFollows","Suggestion:"),g=n.add(c.render(new Wm().appendText(f).appendCodeblock("text",d)));l.replaceChildren(g.element)},u=(r=(s=e.controller.activeModel)===null||s===void 0?void 0:s.inlineCompletionsModel)===null||r===void 0?void 0:r.ghostText;if(u){const d=this._editor.getModel().getLineContent(u.lineNumber);h(u.renderForScreenReader(d))}t.appendChild(a)}};I3=J9e([Gg(2,vn),Gg(3,L0),Gg(4,$e),Gg(5,Os),Gg(6,gu),Gg(7,tr)],I3);var mte=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},pS=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},lH=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const cH=ue;let T3=class extends te{constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=cH("div.hover-row.status-bar"),this.actionsElement=se(this.hoverElement,cH("div.actions"))}get hasContent(){return this._hasContent}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;return this._hasContent=!0,this._register(QP.render(this.actionsElement,e,n))}append(e){const t=se(this.actionsElement,e);return this._hasContent=!0,t}};T3=mte([pS(0,Bi)],T3);class MD{constructor(e,t){this._participants=t,this._editor=e,this._result=[],this._anchor=null}setAnchor(e){this._anchor=e,this._result=[]}clearResult(){this._result=[]}static _getLineDecorations(e,t){if(t.type!==1)return[];const n=e.getModel(),s=t.range.startLineNumber,r=n.getLineMaxColumn(s);return e.getLineDecorations(s).filter(o=>{if(o.options.isWholeLine)return!0;const a=o.range.startLineNumber===s?o.range.startColumn:1,l=o.range.endLineNumber===s?o.range.endColumn:r;return!(a>t.range.startColumn||t.range.endColumn>l)})}computeAsync(e){return lH(this,void 0,void 0,function*(){const t=this._anchor;if(!this._editor.hasModel()||!t)return Promise.resolve([]);const n=MD._getLineDecorations(this._editor,t),s=yield Promise.all(this._participants.map(r=>this._computeAsync(r,n,t,e)));return m5(s)})}_computeAsync(e,t,n,s){return lH(this,void 0,void 0,function*(){return e.computeAsync?e.computeAsync(n,t,s):[]})}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=MD._getLineDecorations(this._editor,this._anchor);let t=[];for(const n of this._participants)t=t.concat(n.computeSync(this._anchor,e));return YL(t)}onResult(e,t){t?this._result=e.concat(this._result):this._result=this._result.concat(e)}getResult(){return this._result.slice(0)}getResultWithLoadingMessage(){if(this._anchor){for(const e of this._participants)if(e.createLoadingMessage){const t=e.createLoadingMessage(this._anchor);if(t)return this._result.slice(0).concat([t])}}return this._result.slice(0)}}let $h=class N3 extends Qr{constructor(e,t,n,s,r){super(),this._hoverVisibleKey=t,this._keybindingService=s,this._contextKeyService=r,this.allowEditorOverflow=!0,this._participants=[n.createInstance(o3,e,this),n.createInstance(l3,e,this),n.createInstance(I3,e,this),n.createInstance(_3,e,this)],this._editor=e,this._isVisible=!1,this._stoleFocus=!1,this._renderDisposable=null,this._hover=this._register(new Aee),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this.onkeydown(this._hover.containerDomNode,o=>{o.equals(9)&&this.hide()}),this._register(this._editor.onDidChangeConfiguration(o=>{o.hasChanged(43)&&this._updateFont()})),this._editor.onDidLayoutChange(()=>this.layout()),this.layout(),this._editor.addContentWidget(this),this._showAtPosition=null,this._showAtRange=null,this._stoleFocus=!1,this._messages=[],this._lastAnchor=null,this._computer=new MD(this._editor,this._participants),this._highlightDecorations=[],this._isChangingDecorations=!1,this._shouldFocus=!1,this._colorPicker=null,this._preferAbove=this._editor.getOption(52).above,this._hoverOperation=new Tee(this._computer,o=>this._withResult(o,!0),null,o=>this._withResult(o,!1),this._editor.getOption(52).delay),this._register(Ji(this.getDomNode(),Ae.FOCUS,()=>{this._colorPicker&&this.getDomNode().classList.add("colorpicker-hover")})),this._register(Ji(this.getDomNode(),Ae.BLUR,()=>{this.getDomNode().classList.remove("colorpicker-hover")})),this._register(e.onDidChangeConfiguration(()=>{this._hoverOperation.setHoverTime(this._editor.getOption(52).delay),this._preferAbove=this._editor.getOption(52).above})),this._register(xi.onDidChange(()=>{this._isVisible&&this._lastAnchor&&this._messages.length>0&&(this._hover.contentsDomNode.textContent="",this._renderMessages(this._lastAnchor,this._messages))}))}dispose(){this._hoverOperation.cancel(),this._editor.removeContentWidget(this),super.dispose()}getId(){return N3.ID}getDomNode(){return this._hover.containerDomNode}_shouldShowAt(e){const t=e.target.type;if(t===6)return!0;if(t===7){const n=this._editor.getOption(43).typicalHalfwidthCharacterWidth/2,s=e.target.detail;if(s&&!s.isAfterLines&&typeof s.horizontalDistanceToText=="number"&&s.horizontalDistanceToText<n)return!0}return!1}maybeShowAt(e){var t;const n=[];for(const s of this._participants)if(typeof s.suggestHoverAnchor=="function"){const r=s.suggestHoverAnchor(e);r&&n.push(r)}if(this._shouldShowAt(e)&&e.target.range){const r=[...((t=e.target.element)===null||t===void 0?void 0:t.classList.values())||[]].find(o=>o.startsWith("ced-colorBox"))&&e.target.range.endColumn-e.target.range.startColumn===1?new F(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1):e.target.range;n.push(new Ez(0,r))}return n.length===0?!1:(n.sort((s,r)=>r.priority-s.priority),this._startShowingAt(n[0],0,!1),!0)}_showAt(e,t,n){this._showAtPosition=e,this._showAtRange=t,this._hoverVisibleKey.set(!0),this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._editor.render(),this._stoleFocus=n,n&&this._hover.containerDomNode.focus()}getPosition(){if(this._isVisible){let e=this._preferAbove;return!e&&this._contextKeyService.getContextKeyValue(Je.Visible.key)&&(e=!0),{position:this._showAtPosition,range:this._showAtRange,preference:e?[1,2]:[2,1]}}return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont(),this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:n}=this._editor.getOption(43);this._hover.contentsDomNode.style.fontSize=`${t}px`,this._hover.contentsDomNode.style.lineHeight=`${n/t}`,this._hover.contentsDomNode.style.maxHeight=`${e}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(this._editor.getLayoutInfo().width*.66,500)}px`}onModelDecorationsChanged(){this._isChangingDecorations||this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._colorPicker||this._hoverOperation.start(0))}startShowingAtRange(e,t,n){this._startShowingAt(new Ez(0,e),t,n)}_startShowingAt(e,t,n){if(!(this._lastAnchor&&this._lastAnchor.equals(e))){if(this._hoverOperation.cancel(),this._isVisible)if(!this._showAtPosition||!this._lastAnchor||!e.canAdoptVisibleHover(this._lastAnchor,this._showAtPosition))this.hide();else{const s=this._messages.filter(r=>r.isValidForHoverAnchor(e));if(s.length===0)this.hide();else{if(s.length===this._messages.length)return;this._renderMessages(e,s)}}this._lastAnchor=e,this._computer.setAnchor(e),this._shouldFocus=n,this._hoverOperation.start(t)}}hide(){this._lastAnchor=null,this._hoverOperation.cancel(),this._isVisible&&(setTimeout(()=>{this._isVisible||this._hoverVisibleKey.set(!1)},0),this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus()),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1,this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null}isColorPickerVisible(){return!!this._colorPicker}setColorPicker(e){this._colorPicker=e}onContentsChanged(){this._hover.onContentsChanged()}_withResult(e,t){this._messages=e,this._lastAnchor&&this._messages.length>0?this._renderMessages(this._lastAnchor,this._messages):t&&this.hide()}_renderMessages(e,t){this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null;let n=1073741824,s=t[0].range,r=null,o=document.createDocumentFragment();const a=new de,l=new Map;for(const h of t)n=Math.min(n,h.range.startColumn),s=F.plusRange(s,h.range),h.forceShowAtRange&&(r=h.range),l.has(h.owner)||l.set(h.owner,[]),l.get(h.owner).push(h);const c=a.add(new T3(this._keybindingService));for(const[h,u]of l)a.add(h.renderHoverParts(u,o,c));c.hasContent&&o.appendChild(c.hoverElement),this._renderDisposable=a,o.hasChildNodes()&&(r?this._showAt(r.getStartPosition(),r,this._shouldFocus):this._showAt(new q(e.range.startLineNumber,n),s,this._shouldFocus),this._updateContents(o)),this._colorPicker&&this._colorPicker.layout(),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,s?[{range:s,options:N3._DECORATION_OPTIONS}]:[]),this._isChangingDecorations=!1}};$h.ID="editor.contrib.modesContentHoverWidget";$h._DECORATION_OPTIONS=lt.register({description:"content-hover-highlight",className:"hoverHighlight"});$h=mte([pS(2,Wt),pS(3,Bi),pS(4,$e)],$h);const hH=ue;class t7e{constructor(e){this._editor=e,this._lineNumber=-1,this._result=[]}setLineNumber(e){this._lineNumber=e,this._result=[]}clearResult(){this._result=[]}computeSync(){const e=s=>({value:s}),t=this._editor.getLineDecorations(this._lineNumber),n=[];if(!t)return n;for(const s of t){if(!s.options.glyphMarginClassName)continue;const r=s.options.glyphMarginHoverMessage;!r||Pb(r)||n.push(...PY(r).map(e))}return n}onResult(e,t){this._result=this._result.concat(e)}getResult(){return this._result}getResultWithLoadingMessage(){return this.getResult()}}class Md extends Qr{constructor(e,t,n=lxe){super(),this._renderDisposeables=this._register(new de),this._editor=e,this._isVisible=!1,this._messages=[],this._lastLineNumber=-1,this._hover=this._register(new Aee),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new Vf({editor:this._editor},t,n)),this._computer=new t7e(this._editor),this._hoverOperation=new Tee(this._computer,s=>this._withResult(s),void 0,s=>this._withResult(s),300),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(43)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._hoverOperation.cancel(),this._editor.removeOverlayWidget(this),super.dispose()}getId(){return Md.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(e),s=this._editor.getScrollTop(),r=this._editor.getOption(58),o=this._hover.containerDomNode.clientHeight,a=n-s-(o-r)/2;this._hover.containerDomNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start(0))}startShowingAt(e){this._lastLineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=e,this._computer.setLineNumber(e),this._hoverOperation.start(0))}hide(){this._lastLineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const n=document.createDocumentFragment();for(const s of t){const r=hH("div.hover-row.markdown-hover"),o=se(r,hH("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(s.value));o.appendChild(a.element),n.appendChild(r)}this._updateContents(n),this._showAt(e)}}Md.ID="editor.contrib.modesGlyphHoverWidget";var i7e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},gC=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let zf=class _te{constructor(e,t,n,s,r){this._editor=e,this._instantiationService=t,this._openerService=n,this._modeService=s,this._toUnhook=new de,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(o=>{o.hasChanged(52)&&(this._unhookEvents(),this._hookEvents())}),this._hoverVisibleKey=G.hoverVisible.bindTo(r)}static get(e){return e.getContribution(_te.ID)}_hookEvents(){const e=()=>this._hideWidgets(),t=this._editor.getOption(52);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(n=>this._onEditorMouseDown(n))),this._toUnhook.add(this._editor.onMouseUp(n=>this._onEditorMouseUp(n))),this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n))),this._toUnhook.add(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged()))):(this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))),this._toUnhook.add(this._editor.onMouseLeave(e)),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(n=>this._onEditorScrollChanged(n)))}_unhookEvents(){this._toUnhook.clear()}_onModelDecorationsChanged(){var e,t;(e=this._contentWidget)===null||e===void 0||e.onModelDecorationsChanged(),(t=this._glyphWidget)===null||t===void 0||t.onModelDecorationsChanged()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target.type;if(t===9&&e.target.detail===$h.ID){this._hoverClicked=!0;return}t===12&&e.target.detail===Md.ID||(t!==12&&e.target.detail!==Md.ID&&(this._hoverClicked=!1),this._hideWidgets())}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseMove(e){var t,n,s,r,o;let a=e.target.type;if(this._isMouseDown&&this._hoverClicked||this._isHoverSticky&&a===9&&e.target.detail===$h.ID||this._isHoverSticky&&!(!((n=(t=e.event.browserEvent.view)===null||t===void 0?void 0:t.getSelection())===null||n===void 0)&&n.isCollapsed)||!this._isHoverSticky&&a===9&&e.target.detail===$h.ID&&(!((s=this._contentWidget)===null||s===void 0)&&s.isColorPickerVisible())||this._isHoverSticky&&a===12&&e.target.detail===Md.ID)return;if(!this._isHoverEnabled){this._hideWidgets();return}if(this._getOrCreateContentWidget().maybeShowAt(e)){(r=this._glyphWidget)===null||r===void 0||r.hide();return}if(a===2&&e.target.position){(o=this._contentWidget)===null||o===void 0||o.hide(),this._glyphWidget||(this._glyphWidget=new Md(this._editor,this._modeService,this._openerService)),this._glyphWidget.startShowingAt(e.target.position.lineNumber);return}this._hideWidgets()}_onKeyDown(e){e.keyCode!==5&&e.keyCode!==6&&e.keyCode!==57&&e.keyCode!==4&&this._hideWidgets()}_hideWidgets(){var e,t,n;this._isMouseDown&&this._hoverClicked&&(!((e=this._contentWidget)===null||e===void 0)&&e.isColorPickerVisible())||(this._hoverClicked=!1,(t=this._glyphWidget)===null||t===void 0||t.hide(),(n=this._contentWidget)===null||n===void 0||n.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance($h,this._editor,this._hoverVisibleKey)),this._contentWidget}isColorPickerVisible(){var e;return((e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,n){this._getOrCreateContentWidget().startShowingAtRange(e,t,n)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),(e=this._glyphWidget)===null||e===void 0||e.dispose(),(t=this._contentWidget)===null||t===void 0||t.dispose()}};zf.ID="editor.contrib.hover";zf=i7e([gC(1,Wt),gC(2,gu),gC(3,Os),gC(4,$e)],zf);class n7e extends gi{constructor(){super({id:"editor.action.showHover",label:_({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:G.editorTextFocus,primary:Ns(2089,2087),weight:100}})}run(e,t){if(!t.hasModel())return;let n=zf.get(t);if(!n)return;const s=t.getPosition(),r=new F(s.lineNumber,s.column,s.lineNumber,s.column),o=t.getOption(2)===2;n.showContentHover(r,1,o)}}class s7e extends gi{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:_({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){let n=zf.get(t);if(!n)return;const s=t.getPosition();if(!s)return;const r=new F(s.lineNumber,s.column,s.lineNumber,s.column);Ff.get(t).startFindDefinitionFromCursor(s).then(()=>{n.showContentHover(r,1,!0)})}}Ps(zf.ID,zf);rt(n7e);rt(s7e);Jt((i,e)=>{const t=i.getColor(kAe);t&&e.addRule(`.monaco-editor .hoverHighlight { background-color: ${t}; }`);const n=i.getColor(zv);n&&e.addRule(`.monaco-editor .monaco-hover { background-color: ${n}; }`);const s=i.getColor(EAe);s&&(e.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${s}; }`),e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${s.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${s.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${s.transparent(.5)}; }`));const r=i.getColor(gk);r&&e.addRule(`.monaco-editor .monaco-hover a { color: ${r}; }`);const o=i.getColor(pk);o&&e.addRule(`.monaco-editor .monaco-hover a:hover { color: ${o}; }`);const a=i.getColor(AAe);a&&e.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);const l=i.getColor(IAe);l&&e.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${l}; }`);const c=i.getColor(TQ);c&&e.addRule(`.monaco-editor .monaco-hover code { background-color: ${c}; }`)});function r7e(){return new Worker(""+new URL("json.worker-5aea2fd8.js",import.meta.url).href)}self.MonacoEnvironment={getWorker(i,e){if(e==="json")return new r7e;throw new Error("Unsupported language: "+e)}};class o7e extends Cp{constructor(){super();H0(this,"_editor");H0(this,"_initialValue")}set value(t){this._editor?this._editor.setValue(t):this._initialValue=t}get value(){var t;return((t=this._editor)==null?void 0:t.getValue())??this._initialValue}createRenderRoot(){return this}disconnectedCallback(){var t,n,s;(t=this._editor)==null||t.dispose(),(s=(n=this._editor)==null?void 0:n.getModel())==null||s.dispose()}render(){return ln}firstUpdated(){this._editor=_5e.create(this,{value:this._initialValue,language:"json",minimap:{enabled:!1}}),this._editor.getModel().onDidChangeContent(()=>{this.dispatchEvent(new CustomEvent("change",{detail:{}}))}),new ResizeObserver(n=>{this._editor.layout()}).observe(this)}}customElements.define("code-editor",o7e);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function*a7e(i,e){if(i!==void 0){let t=0;for(const n of i)yield e(n,t++)}}function z0(i,e,t){return i.fields=e||[],i.fname=t,i}function l7e(i){return i.length===1?c7e(i[0]):h7e(i)}const c7e=i=>function(e){return e[i]},h7e=i=>{const e=i.length;return function(t){for(let n=0;n<e;++n)t=t[i[n]];return t}};function Xd(i){throw Error(i)}function u7e(i){const e=[],t=i.length;let n=null,s=0,r="",o,a,l;i=i+"";function c(){e.push(r+i.substring(o,a)),r="",o=a+1}for(o=a=0;a<t;++a)if(l=i[a],l==="\\")r+=i.substring(o,a),r+=i.substring(++a,++a),o=a;else if(l===n)c(),n=null,s=-1;else{if(n)continue;o===s&&l==='"'||o===s&&l==="'"?(o=a+1,n=l):l==="."&&!s?a>o?c():o=a+1:l==="["?(a>o&&c(),s=o=a+1):l==="]"&&(s||Xd("Access path missing open bracket: "+i),s>0&&c(),s=0,o=a+1)}return s&&Xd("Access path missing closing bracket: "+i),n&&Xd("Access path missing closing quote: "+i),a>o&&(a++,c()),e}function bte(i,e,t){const n=u7e(i);return i=n.length===1?n[0]:i,z0((t&&t.get||l7e)(n),[i],e||i)}bte("id");const vte=z0(i=>i,[],"identity");z0(()=>0,[],"zero");z0(()=>1,[],"one");z0(()=>!0,[],"true");z0(()=>!1,[],"false");var wte=Array.isArray;function sF(i){return i===Object(i)}function uH(i){return i==null||i===""?null:+i}function yte(i){return typeof i=="function"}function d7e(i){for(let e,t,n=1,s=arguments.length;n<s;++n){e=arguments[n];for(t in e)i[t]=e[t]}return i}const f7e=Object.prototype.hasOwnProperty;function Cte(i,e){return f7e.call(i,e)}function g7e(i){return Object.prototype.toString.call(i)==="[object Date]"}function p7e(i){return i&&yte(i[Symbol.iterator])}function m7e(i){return typeof i=="number"}function M3(i){return typeof i=="string"}function Ste(i){return wte(i)?"["+i.map(Ste)+"]":sF(i)||M3(i)?JSON.stringify(i).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):i}function _7e(i){return i==null||i===""?null:!i||i==="false"||i==="0"?!1:!!i}const b7e=i=>m7e(i)||g7e(i)?i:Date.parse(i);function v7e(i,e){return e=e||b7e,i==null||i===""?null:e(i)}function w7e(i){return i==null||i===""?null:i+""}var dH={},vI={},wI=34,v_=10,yI=13;function xte(i){return new Function("d","return {"+i.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function y7e(i,e){var t=xte(i);return function(n,s){return e(t(n),s,i)}}function fH(i){var e=Object.create(null),t=[];return i.forEach(function(n){for(var s in n)s in e||t.push(e[s]=s)}),t}function ar(i,e){var t=i+"",n=t.length;return n<e?new Array(e-n+1).join(0)+t:t}function C7e(i){return i<0?"-"+ar(-i,6):i>9999?"+"+ar(i,6):ar(i,4)}function S7e(i){var e=i.getUTCHours(),t=i.getUTCMinutes(),n=i.getUTCSeconds(),s=i.getUTCMilliseconds();return isNaN(i)?"Invalid Date":C7e(i.getUTCFullYear())+"-"+ar(i.getUTCMonth()+1,2)+"-"+ar(i.getUTCDate(),2)+(s?"T"+ar(e,2)+":"+ar(t,2)+":"+ar(n,2)+"."+ar(s,3)+"Z":n?"T"+ar(e,2)+":"+ar(t,2)+":"+ar(n,2)+"Z":t||e?"T"+ar(e,2)+":"+ar(t,2)+"Z":"")}function x7e(i){var e=new RegExp('["'+i+`
\r]`),t=i.charCodeAt(0);function n(u,d){var f,g,p=s(u,function(m,v){if(f)return f(m,v-1);g=m,f=d?y7e(m,d):xte(m)});return p.columns=g||[],p}function s(u,d){var f=[],g=u.length,p=0,m=0,v,b=g<=0,w=!1;u.charCodeAt(g-1)===v_&&--g,u.charCodeAt(g-1)===yI&&--g;function y(){if(b)return vI;if(w)return w=!1,dH;var k,S=p,L;if(u.charCodeAt(S)===wI){for(;p++<g&&u.charCodeAt(p)!==wI||u.charCodeAt(++p)===wI;);return(k=p)>=g?b=!0:(L=u.charCodeAt(p++))===v_?w=!0:L===yI&&(w=!0,u.charCodeAt(p)===v_&&++p),u.slice(S+1,k-1).replace(/""/g,'"')}for(;p<g;){if((L=u.charCodeAt(k=p++))===v_)w=!0;else if(L===yI)w=!0,u.charCodeAt(p)===v_&&++p;else if(L!==t)continue;return u.slice(S,k)}return b=!0,u.slice(S,g)}for(;(v=y())!==vI;){for(var x=[];v!==dH&&v!==vI;)x.push(v),v=y();d&&(x=d(x,m++))==null||f.push(x)}return f}function r(u,d){return u.map(function(f){return d.map(function(g){return h(f[g])}).join(i)})}function o(u,d){return d==null&&(d=fH(u)),[d.map(h).join(i)].concat(r(u,d)).join(`
`)}function a(u,d){return d==null&&(d=fH(u)),r(u,d).join(`
`)}function l(u){return u.map(c).join(`
`)}function c(u){return u.map(h).join(i)}function h(u){return u==null?"":u instanceof Date?S7e(u):e.test(u+="")?'"'+u.replace(/"/g,'""')+'"':u}return{parse:n,parseRows:s,format:o,formatBody:a,formatRows:l,formatRow:c,formatValue:h}}function D7e(i){return i}function L7e(i){if(i==null)return D7e;var e,t,n=i.scale[0],s=i.scale[1],r=i.translate[0],o=i.translate[1];return function(a,l){l||(e=t=0);var c=2,h=a.length,u=new Array(h);for(u[0]=(e+=a[0])*n+r,u[1]=(t+=a[1])*s+o;c<h;)u[c]=a[c],++c;return u}}function k7e(i,e){for(var t,n=i.length,s=n-e;s<--n;)t=i[s],i[s++]=i[n],i[n]=t}function A7e(i,e){return typeof e=="string"&&(e=i.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(t){return gH(i,t)})}:gH(i,e)}function gH(i,e){var t=e.id,n=e.bbox,s=e.properties==null?{}:e.properties,r=Dte(i,e);return t==null&&n==null?{type:"Feature",properties:s,geometry:r}:n==null?{type:"Feature",id:t,properties:s,geometry:r}:{type:"Feature",id:t,bbox:n,properties:s,geometry:r}}function Dte(i,e){var t=L7e(i.transform),n=i.arcs;function s(h,u){u.length&&u.pop();for(var d=n[h<0?~h:h],f=0,g=d.length;f<g;++f)u.push(t(d[f],f));h<0&&k7e(u,g)}function r(h){return t(h)}function o(h){for(var u=[],d=0,f=h.length;d<f;++d)s(h[d],u);return u.length<2&&u.push(u[0]),u}function a(h){for(var u=o(h);u.length<4;)u.push(u[0]);return u}function l(h){return h.map(a)}function c(h){var u=h.type,d;switch(u){case"GeometryCollection":return{type:u,geometries:h.geometries.map(c)};case"Point":d=r(h.coordinates);break;case"MultiPoint":d=h.coordinates.map(r);break;case"LineString":d=o(h.arcs);break;case"MultiLineString":d=h.arcs.map(o);break;case"Polygon":d=l(h.arcs);break;case"MultiPolygon":d=h.arcs.map(l);break;default:return null}return{type:u,coordinates:d}}return c(e)}function E7e(i,e){var t={},n={},s={},r=[],o=-1;e.forEach(function(c,h){var u=i.arcs[c<0?~c:c],d;u.length<3&&!u[1][0]&&!u[1][1]&&(d=e[++o],e[o]=c,e[h]=d)}),e.forEach(function(c){var h=a(c),u=h[0],d=h[1],f,g;if(f=s[u])if(delete s[f.end],f.push(c),f.end=d,g=n[d]){delete n[g.start];var p=g===f?f:f.concat(g);n[p.start=f.start]=s[p.end=g.end]=p}else n[f.start]=s[f.end]=f;else if(f=n[d])if(delete n[f.start],f.unshift(c),f.start=u,g=s[u]){delete s[g.end];var m=g===f?f:g.concat(f);n[m.start=g.start]=s[m.end=f.end]=m}else n[f.start]=s[f.end]=f;else f=[c],n[f.start=u]=s[f.end=d]=f});function a(c){var h=i.arcs[c<0?~c:c],u=h[0],d;return i.transform?(d=[0,0],h.forEach(function(f){d[0]+=f[0],d[1]+=f[1]})):d=h[h.length-1],c<0?[d,u]:[u,d]}function l(c,h){for(var u in c){var d=c[u];delete h[d.start],delete d.start,delete d.end,d.forEach(function(f){t[f<0?~f:f]=1}),r.push(d)}}return l(s,n),l(n,s),e.forEach(function(c){t[c<0?~c:c]||r.push([c])}),r}function I7e(i){return Dte(i,T7e.apply(this,arguments))}function T7e(i,e,t){var n,s,r;if(arguments.length>1)n=N7e(i,e,t);else for(s=0,n=new Array(r=i.arcs.length);s<r;++s)n[s]=s;return{type:"MultiLineString",arcs:E7e(i,n)}}function N7e(i,e,t){var n=[],s=[],r;function o(u){var d=u<0?~u:u;(s[d]||(s[d]=[])).push({i:u,g:r})}function a(u){u.forEach(o)}function l(u){u.forEach(a)}function c(u){u.forEach(l)}function h(u){switch(r=u,u.type){case"GeometryCollection":u.geometries.forEach(h);break;case"LineString":a(u.arcs);break;case"MultiLineString":case"Polygon":l(u.arcs);break;case"MultiPolygon":c(u.arcs);break}}return h(e),s.forEach(t==null?function(u){n.push(u[0].i)}:function(u){t(u[0].g,u[u.length-1].g)&&n.push(u[0].i)}),n}var M7e=Math.sqrt(50),R7e=Math.sqrt(10),O7e=Math.sqrt(2);function P7e(i,e,t){var n=Math.abs(e-i)/Math.max(0,t),s=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),r=n/s;return r>=M7e?s*=10:r>=R7e?s*=5:r>=O7e&&(s*=2),e<i?-s:s}function F7e(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function RD(i,e){if((t=(i=e?i.toExponential(e-1):i.toExponential()).indexOf("e"))<0)return null;var t,n=i.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+i.slice(t+1)]}function Qm(i){return i=RD(Math.abs(i)),i?i[1]:NaN}function B7e(i,e){return function(t,n){for(var s=t.length,r=[],o=0,a=i[0],l=0;s>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),r.push(t.substring(s-=a,s+a)),!((l+=a+1)>n));)a=i[o=(o+1)%i.length];return r.reverse().join(e)}}function V7e(i){return function(e){return e.replace(/[0-9]/g,function(t){return i[+t]})}}var W7e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function A1(i){if(!(e=W7e.exec(i)))throw new Error("invalid format: "+i);var e;return new rF({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}A1.prototype=rF.prototype;function rF(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}rF.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function z7e(i){e:for(var e=i.length,t=1,n=-1,s;t<e;++t)switch(i[t]){case".":n=s=t;break;case"0":n===0&&(n=t),s=t;break;default:if(!+i[t])break e;n>0&&(n=0);break}return n>0?i.slice(0,n)+i.slice(s+1):i}var Lte;function H7e(i,e){var t=RD(i,e);if(!t)return i+"";var n=t[0],s=t[1],r=s-(Lte=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return r===o?n:r>o?n+new Array(r-o+1).join("0"):r>0?n.slice(0,r)+"."+n.slice(r):"0."+new Array(1-r).join("0")+RD(i,Math.max(0,e+r-1))[0]}function pH(i,e){var t=RD(i,e);if(!t)return i+"";var n=t[0],s=t[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const mH={"%":(i,e)=>(i*100).toFixed(e),b:i=>Math.round(i).toString(2),c:i=>i+"",d:F7e,e:(i,e)=>i.toExponential(e),f:(i,e)=>i.toFixed(e),g:(i,e)=>i.toPrecision(e),o:i=>Math.round(i).toString(8),p:(i,e)=>pH(i*100,e),r:pH,s:H7e,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function _H(i){return i}var bH=Array.prototype.map,vH=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function U7e(i){var e=i.grouping===void 0||i.thousands===void 0?_H:B7e(bH.call(i.grouping,Number),i.thousands+""),t=i.currency===void 0?"":i.currency[0]+"",n=i.currency===void 0?"":i.currency[1]+"",s=i.decimal===void 0?".":i.decimal+"",r=i.numerals===void 0?_H:V7e(bH.call(i.numerals,String)),o=i.percent===void 0?"%":i.percent+"",a=i.minus===void 0?"−":i.minus+"",l=i.nan===void 0?"NaN":i.nan+"";function c(u){u=A1(u);var d=u.fill,f=u.align,g=u.sign,p=u.symbol,m=u.zero,v=u.width,b=u.comma,w=u.precision,y=u.trim,x=u.type;x==="n"?(b=!0,x="g"):mH[x]||(w===void 0&&(w=12),y=!0,x="g"),(m||d==="0"&&f==="=")&&(m=!0,d="0",f="=");var k=p==="$"?t:p==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",S=p==="$"?n:/[%p]/.test(x)?o:"",L=mH[x],D=/[defgprs%]/.test(x);w=w===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function N(T){var $=k,U=S,ee,ce,fe;if(x==="c")U=L(T)+U,T="";else{T=+T;var Ce=T<0||1/T<0;if(T=isNaN(T)?l:L(Math.abs(T),w),y&&(T=z7e(T)),Ce&&+T==0&&g!=="+"&&(Ce=!1),$=(Ce?g==="("?g:a:g==="-"||g==="("?"":g)+$,U=(x==="s"?vH[8+Lte/3]:"")+U+(Ce&&g==="("?")":""),D){for(ee=-1,ce=T.length;++ee<ce;)if(fe=T.charCodeAt(ee),48>fe||fe>57){U=(fe===46?s+T.slice(ee+1):T.slice(ee))+U,T=T.slice(0,ee);break}}}b&&!m&&(T=e(T,1/0));var Se=$.length+T.length+U.length,me=Se<v?new Array(v-Se+1).join(d):"";switch(b&&m&&(T=e(me+T,me.length?v-U.length:1/0),me=""),f){case"<":T=$+T+U+me;break;case"=":T=$+me+T+U;break;case"^":T=me.slice(0,Se=me.length>>1)+$+T+U+me.slice(Se);break;default:T=me+$+T+U;break}return r(T)}return N.toString=function(){return u+""},N}function h(u,d){var f=c((u=A1(u),u.type="f",u)),g=Math.max(-8,Math.min(8,Math.floor(Qm(d)/3)))*3,p=Math.pow(10,-g),m=vH[8+g/3];return function(v){return f(p*v)+m}}return{format:c,formatPrefix:h}}var pC,kte,Ate;$7e({thousands:",",grouping:[3],currency:["$",""]});function $7e(i){return pC=U7e(i),kte=pC.format,Ate=pC.formatPrefix,pC}function j7e(i){return Math.max(0,-Qm(Math.abs(i)))}function q7e(i,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Qm(e)/3)))*3-Qm(Math.abs(i)))}function G7e(i,e){return i=Math.abs(i),e=Math.abs(e)-i,Math.max(0,Qm(e)-Qm(i))+1}var CI=new Date,SI=new Date;function ts(i,e,t,n){function s(r){return i(r=arguments.length===0?new Date:new Date(+r)),r}return s.floor=function(r){return i(r=new Date(+r)),r},s.ceil=function(r){return i(r=new Date(r-1)),e(r,1),i(r),r},s.round=function(r){var o=s(r),a=s.ceil(r);return r-o<a-r?o:a},s.offset=function(r,o){return e(r=new Date(+r),o==null?1:Math.floor(o)),r},s.range=function(r,o,a){var l=[],c;if(r=s.ceil(r),a=a==null?1:Math.floor(a),!(r<o)||!(a>0))return l;do l.push(c=new Date(+r)),e(r,a),i(r);while(c<r&&r<o);return l},s.filter=function(r){return ts(function(o){if(o>=o)for(;i(o),!r(o);)o.setTime(o-1)},function(o,a){if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!r(o););else for(;--a>=0;)for(;e(o,1),!r(o););})},t&&(s.count=function(r,o){return CI.setTime(+r),SI.setTime(+o),i(CI),i(SI),Math.floor(t(CI,SI))},s.every=function(r){return r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?s.filter(n?function(o){return n(o)%r===0}:function(o){return s.count(0,o)%r===0}):s}),s}var OD=ts(function(){},function(i,e){i.setTime(+i+e)},function(i,e){return e-i});OD.every=function(i){return i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?ts(function(e){e.setTime(Math.floor(e/i)*i)},function(e,t){e.setTime(+e+t*i)},function(e,t){return(t-e)/i}):OD};const Ete=OD;OD.range;const E1=1e3,ku=E1*60,I1=ku*60,oF=I1*24,Ite=oF*7;var Tte=ts(function(i){i.setTime(i-i.getMilliseconds())},function(i,e){i.setTime(+i+e*E1)},function(i,e){return(e-i)/E1},function(i){return i.getUTCSeconds()});const Nte=Tte;Tte.range;var Mte=ts(function(i){i.setTime(i-i.getMilliseconds()-i.getSeconds()*E1)},function(i,e){i.setTime(+i+e*ku)},function(i,e){return(e-i)/ku},function(i){return i.getMinutes()});const K7e=Mte;Mte.range;var Rte=ts(function(i){i.setTime(i-i.getMilliseconds()-i.getSeconds()*E1-i.getMinutes()*ku)},function(i,e){i.setTime(+i+e*I1)},function(i,e){return(e-i)/I1},function(i){return i.getHours()});const Z7e=Rte;Rte.range;var Ote=ts(i=>i.setHours(0,0,0,0),(i,e)=>i.setDate(i.getDate()+e),(i,e)=>(e-i-(e.getTimezoneOffset()-i.getTimezoneOffset())*ku)/oF,i=>i.getDate()-1);const zb=Ote;Ote.range;function mg(i){return ts(function(e){e.setDate(e.getDate()-(e.getDay()+7-i)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ku)/Ite})}var aF=mg(0),PD=mg(1),Y7e=mg(2),Q7e=mg(3),Xm=mg(4),X7e=mg(5),J7e=mg(6);aF.range;PD.range;Y7e.range;Q7e.range;Xm.range;X7e.range;J7e.range;var Pte=ts(function(i){i.setDate(1),i.setHours(0,0,0,0)},function(i,e){i.setMonth(i.getMonth()+e)},function(i,e){return e.getMonth()-i.getMonth()+(e.getFullYear()-i.getFullYear())*12},function(i){return i.getMonth()});const wH=Pte;Pte.range;var lF=ts(function(i){i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,e){i.setFullYear(i.getFullYear()+e)},function(i,e){return e.getFullYear()-i.getFullYear()},function(i){return i.getFullYear()});lF.every=function(i){return!isFinite(i=Math.floor(i))||!(i>0)?null:ts(function(e){e.setFullYear(Math.floor(e.getFullYear()/i)*i),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*i)})};const Jm=lF;lF.range;var Fte=ts(function(i){i.setUTCSeconds(0,0)},function(i,e){i.setTime(+i+e*ku)},function(i,e){return(e-i)/ku},function(i){return i.getUTCMinutes()});const eVe=Fte;Fte.range;var Bte=ts(function(i){i.setUTCMinutes(0,0,0)},function(i,e){i.setTime(+i+e*I1)},function(i,e){return(e-i)/I1},function(i){return i.getUTCHours()});const tVe=Bte;Bte.range;var Vte=ts(function(i){i.setUTCHours(0,0,0,0)},function(i,e){i.setUTCDate(i.getUTCDate()+e)},function(i,e){return(e-i)/oF},function(i){return i.getUTCDate()-1});const Hb=Vte;Vte.range;function _g(i){return ts(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-i)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/Ite})}var cF=_g(0),FD=_g(1),iVe=_g(2),nVe=_g(3),e0=_g(4),sVe=_g(5),rVe=_g(6);cF.range;FD.range;iVe.range;nVe.range;e0.range;sVe.range;rVe.range;var Wte=ts(function(i){i.setUTCDate(1),i.setUTCHours(0,0,0,0)},function(i,e){i.setUTCMonth(i.getUTCMonth()+e)},function(i,e){return e.getUTCMonth()-i.getUTCMonth()+(e.getUTCFullYear()-i.getUTCFullYear())*12},function(i){return i.getUTCMonth()});const yH=Wte;Wte.range;var hF=ts(function(i){i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,e){i.setUTCFullYear(i.getUTCFullYear()+e)},function(i,e){return e.getUTCFullYear()-i.getUTCFullYear()},function(i){return i.getUTCFullYear()});hF.every=function(i){return!isFinite(i=Math.floor(i))||!(i>0)?null:ts(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/i)*i),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*i)})};const t0=hF;hF.range;const T1="year",N1="quarter",M1="month",R1="week",O1="date",n2="day",uF="dayofyear",P1="hours",F1="minutes",B1="seconds",s2="milliseconds",oVe=[T1,N1,M1,R1,O1,n2,uF,P1,F1,B1,s2];oVe.reduce((i,e,t)=>(i[e]=1+t,i),{});const aVe={[T1]:Jm,[N1]:wH.every(3),[M1]:wH,[R1]:aF,[O1]:zb,[n2]:zb,[uF]:zb,[P1]:Z7e,[F1]:K7e,[B1]:Nte,[s2]:Ete},lVe={[T1]:t0,[N1]:yH.every(3),[M1]:yH,[R1]:cF,[O1]:Hb,[n2]:Hb,[uF]:Hb,[P1]:tVe,[F1]:eVe,[B1]:Nte,[s2]:Ete};function cVe(i){return aVe[i]}function hVe(i){return lVe[i]}function xI(i){if(0<=i.y&&i.y<100){var e=new Date(-1,i.m,i.d,i.H,i.M,i.S,i.L);return e.setFullYear(i.y),e}return new Date(i.y,i.m,i.d,i.H,i.M,i.S,i.L)}function DI(i){if(0<=i.y&&i.y<100){var e=new Date(Date.UTC(-1,i.m,i.d,i.H,i.M,i.S,i.L));return e.setUTCFullYear(i.y),e}return new Date(Date.UTC(i.y,i.m,i.d,i.H,i.M,i.S,i.L))}function w_(i,e,t){return{y:i,m:e,d:t,H:0,M:0,S:0,L:0}}function zte(i){var e=i.dateTime,t=i.date,n=i.time,s=i.periods,r=i.days,o=i.shortDays,a=i.months,l=i.shortMonths,c=y_(s),h=C_(s),u=y_(r),d=C_(r),f=y_(o),g=C_(o),p=y_(a),m=C_(a),v=y_(l),b=C_(l),w={a:Ce,A:Se,b:me,B:Dt,c:null,d:kH,e:kH,f:MVe,g:UVe,G:jVe,H:IVe,I:TVe,j:NVe,L:Hte,m:RVe,M:OVe,p:ze,q:Ge,Q:IH,s:TH,S:PVe,u:FVe,U:BVe,V:VVe,w:WVe,W:zVe,x:null,X:null,y:HVe,Y:$Ve,Z:qVe,"%":EH},y={a:Lt,A:nt,b:Vi,B:wn,c:null,d:AH,e:AH,f:YVe,g:oWe,G:lWe,H:GVe,I:KVe,j:ZVe,L:$te,m:QVe,M:XVe,p:Wn,q:Ai,Q:IH,s:TH,S:JVe,u:eWe,U:tWe,V:iWe,w:nWe,W:sWe,x:null,X:null,y:rWe,Y:aWe,Z:cWe,"%":EH},x={a:N,A:T,b:$,B:U,c:ee,d:DH,e:DH,f:LVe,g:xH,G:SH,H:LH,I:LH,j:CVe,L:DVe,m:yVe,M:SVe,p:D,q:wVe,Q:AVe,s:EVe,S:xVe,u:pVe,U:mVe,V:_Ve,w:gVe,W:bVe,x:ce,X:fe,y:xH,Y:SH,Z:vVe,"%":kVe};w.x=k(t,w),w.X=k(n,w),w.c=k(e,w),y.x=k(t,y),y.X=k(n,y),y.c=k(e,y);function k(J,ye){return function(he){var W=[],ot=-1,Me=0,vt=J.length,pt,ei,zn;for(he instanceof Date||(he=new Date(+he));++ot<vt;)J.charCodeAt(ot)===37&&(W.push(J.slice(Me,ot)),(ei=CH[pt=J.charAt(++ot)])!=null?pt=J.charAt(++ot):ei=pt==="e"?" ":"0",(zn=ye[pt])&&(pt=zn(he,ei)),W.push(pt),Me=ot+1);return W.push(J.slice(Me,ot)),W.join("")}}function S(J,ye){return function(he){var W=w_(1900,void 0,1),ot=L(W,J,he+="",0),Me,vt;if(ot!=he.length)return null;if("Q"in W)return new Date(W.Q);if("s"in W)return new Date(W.s*1e3+("L"in W?W.L:0));if(ye&&!("Z"in W)&&(W.Z=0),"p"in W&&(W.H=W.H%12+W.p*12),W.m===void 0&&(W.m="q"in W?W.q:0),"V"in W){if(W.V<1||W.V>53)return null;"w"in W||(W.w=1),"Z"in W?(Me=DI(w_(W.y,0,1)),vt=Me.getUTCDay(),Me=vt>4||vt===0?FD.ceil(Me):FD(Me),Me=Hb.offset(Me,(W.V-1)*7),W.y=Me.getUTCFullYear(),W.m=Me.getUTCMonth(),W.d=Me.getUTCDate()+(W.w+6)%7):(Me=xI(w_(W.y,0,1)),vt=Me.getDay(),Me=vt>4||vt===0?PD.ceil(Me):PD(Me),Me=zb.offset(Me,(W.V-1)*7),W.y=Me.getFullYear(),W.m=Me.getMonth(),W.d=Me.getDate()+(W.w+6)%7)}else("W"in W||"U"in W)&&("w"in W||(W.w="u"in W?W.u%7:"W"in W?1:0),vt="Z"in W?DI(w_(W.y,0,1)).getUTCDay():xI(w_(W.y,0,1)).getDay(),W.m=0,W.d="W"in W?(W.w+6)%7+W.W*7-(vt+5)%7:W.w+W.U*7-(vt+6)%7);return"Z"in W?(W.H+=W.Z/100|0,W.M+=W.Z%100,DI(W)):xI(W)}}function L(J,ye,he,W){for(var ot=0,Me=ye.length,vt=he.length,pt,ei;ot<Me;){if(W>=vt)return-1;if(pt=ye.charCodeAt(ot++),pt===37){if(pt=ye.charAt(ot++),ei=x[pt in CH?ye.charAt(ot++):pt],!ei||(W=ei(J,he,W))<0)return-1}else if(pt!=he.charCodeAt(W++))return-1}return W}function D(J,ye,he){var W=c.exec(ye.slice(he));return W?(J.p=h.get(W[0].toLowerCase()),he+W[0].length):-1}function N(J,ye,he){var W=f.exec(ye.slice(he));return W?(J.w=g.get(W[0].toLowerCase()),he+W[0].length):-1}function T(J,ye,he){var W=u.exec(ye.slice(he));return W?(J.w=d.get(W[0].toLowerCase()),he+W[0].length):-1}function $(J,ye,he){var W=v.exec(ye.slice(he));return W?(J.m=b.get(W[0].toLowerCase()),he+W[0].length):-1}function U(J,ye,he){var W=p.exec(ye.slice(he));return W?(J.m=m.get(W[0].toLowerCase()),he+W[0].length):-1}function ee(J,ye,he){return L(J,e,ye,he)}function ce(J,ye,he){return L(J,t,ye,he)}function fe(J,ye,he){return L(J,n,ye,he)}function Ce(J){return o[J.getDay()]}function Se(J){return r[J.getDay()]}function me(J){return l[J.getMonth()]}function Dt(J){return a[J.getMonth()]}function ze(J){return s[+(J.getHours()>=12)]}function Ge(J){return 1+~~(J.getMonth()/3)}function Lt(J){return o[J.getUTCDay()]}function nt(J){return r[J.getUTCDay()]}function Vi(J){return l[J.getUTCMonth()]}function wn(J){return a[J.getUTCMonth()]}function Wn(J){return s[+(J.getUTCHours()>=12)]}function Ai(J){return 1+~~(J.getUTCMonth()/3)}return{format:function(J){var ye=k(J+="",w);return ye.toString=function(){return J},ye},parse:function(J){var ye=S(J+="",!1);return ye.toString=function(){return J},ye},utcFormat:function(J){var ye=k(J+="",y);return ye.toString=function(){return J},ye},utcParse:function(J){var ye=S(J+="",!0);return ye.toString=function(){return J},ye}}}var CH={"-":"",_:" ",0:"0"},is=/^\s*\d+/,uVe=/^%/,dVe=/[\\^$*+?|[\]().{}]/g;function Qt(i,e,t){var n=i<0?"-":"",s=(n?-i:i)+"",r=s.length;return n+(r<t?new Array(t-r+1).join(e)+s:s)}function fVe(i){return i.replace(dVe,"\\$&")}function y_(i){return new RegExp("^(?:"+i.map(fVe).join("|")+")","i")}function C_(i){return new Map(i.map((e,t)=>[e.toLowerCase(),t]))}function gVe(i,e,t){var n=is.exec(e.slice(t,t+1));return n?(i.w=+n[0],t+n[0].length):-1}function pVe(i,e,t){var n=is.exec(e.slice(t,t+1));return n?(i.u=+n[0],t+n[0].length):-1}function mVe(i,e,t){var n=is.exec(e.slice(t,t+2));return n?(i.U=+n[0],t+n[0].length):-1}function _Ve(i,e,t){var n=is.exec(e.slice(t,t+2));return n?(i.V=+n[0],t+n[0].length):-1}function bVe(i,e,t){var n=is.exec(e.slice(t,t+2));return n?(i.W=+n[0],t+n[0].length):-1}function SH(i,e,t){var n=is.exec(e.slice(t,t+4));return n?(i.y=+n[0],t+n[0].length):-1}function xH(i,e,t){var n=is.exec(e.slice(t,t+2));return n?(i.y=+n[0]+(+n[0]>68?1900:2e3),t+n[0].length):-1}function vVe(i,e,t){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return n?(i.Z=n[1]?0:-(n[2]+(n[3]||"00")),t+n[0].length):-1}function wVe(i,e,t){var n=is.exec(e.slice(t,t+1));return n?(i.q=n[0]*3-3,t+n[0].length):-1}function yVe(i,e,t){var n=is.exec(e.slice(t,t+2));return n?(i.m=n[0]-1,t+n[0].length):-1}function DH(i,e,t){var n=is.exec(e.slice(t,t+2));return n?(i.d=+n[0],t+n[0].length):-1}function CVe(i,e,t){var n=is.exec(e.slice(t,t+3));return n?(i.m=0,i.d=+n[0],t+n[0].length):-1}function LH(i,e,t){var n=is.exec(e.slice(t,t+2));return n?(i.H=+n[0],t+n[0].length):-1}function SVe(i,e,t){var n=is.exec(e.slice(t,t+2));return n?(i.M=+n[0],t+n[0].length):-1}function xVe(i,e,t){var n=is.exec(e.slice(t,t+2));return n?(i.S=+n[0],t+n[0].length):-1}function DVe(i,e,t){var n=is.exec(e.slice(t,t+3));return n?(i.L=+n[0],t+n[0].length):-1}function LVe(i,e,t){var n=is.exec(e.slice(t,t+6));return n?(i.L=Math.floor(n[0]/1e3),t+n[0].length):-1}function kVe(i,e,t){var n=uVe.exec(e.slice(t,t+1));return n?t+n[0].length:-1}function AVe(i,e,t){var n=is.exec(e.slice(t));return n?(i.Q=+n[0],t+n[0].length):-1}function EVe(i,e,t){var n=is.exec(e.slice(t));return n?(i.s=+n[0],t+n[0].length):-1}function kH(i,e){return Qt(i.getDate(),e,2)}function IVe(i,e){return Qt(i.getHours(),e,2)}function TVe(i,e){return Qt(i.getHours()%12||12,e,2)}function NVe(i,e){return Qt(1+zb.count(Jm(i),i),e,3)}function Hte(i,e){return Qt(i.getMilliseconds(),e,3)}function MVe(i,e){return Hte(i,e)+"000"}function RVe(i,e){return Qt(i.getMonth()+1,e,2)}function OVe(i,e){return Qt(i.getMinutes(),e,2)}function PVe(i,e){return Qt(i.getSeconds(),e,2)}function FVe(i){var e=i.getDay();return e===0?7:e}function BVe(i,e){return Qt(aF.count(Jm(i)-1,i),e,2)}function Ute(i){var e=i.getDay();return e>=4||e===0?Xm(i):Xm.ceil(i)}function VVe(i,e){return i=Ute(i),Qt(Xm.count(Jm(i),i)+(Jm(i).getDay()===4),e,2)}function WVe(i){return i.getDay()}function zVe(i,e){return Qt(PD.count(Jm(i)-1,i),e,2)}function HVe(i,e){return Qt(i.getFullYear()%100,e,2)}function UVe(i,e){return i=Ute(i),Qt(i.getFullYear()%100,e,2)}function $Ve(i,e){return Qt(i.getFullYear()%1e4,e,4)}function jVe(i,e){var t=i.getDay();return i=t>=4||t===0?Xm(i):Xm.ceil(i),Qt(i.getFullYear()%1e4,e,4)}function qVe(i){var e=i.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Qt(e/60|0,"0",2)+Qt(e%60,"0",2)}function AH(i,e){return Qt(i.getUTCDate(),e,2)}function GVe(i,e){return Qt(i.getUTCHours(),e,2)}function KVe(i,e){return Qt(i.getUTCHours()%12||12,e,2)}function ZVe(i,e){return Qt(1+Hb.count(t0(i),i),e,3)}function $te(i,e){return Qt(i.getUTCMilliseconds(),e,3)}function YVe(i,e){return $te(i,e)+"000"}function QVe(i,e){return Qt(i.getUTCMonth()+1,e,2)}function XVe(i,e){return Qt(i.getUTCMinutes(),e,2)}function JVe(i,e){return Qt(i.getUTCSeconds(),e,2)}function eWe(i){var e=i.getUTCDay();return e===0?7:e}function tWe(i,e){return Qt(cF.count(t0(i)-1,i),e,2)}function jte(i){var e=i.getUTCDay();return e>=4||e===0?e0(i):e0.ceil(i)}function iWe(i,e){return i=jte(i),Qt(e0.count(t0(i),i)+(t0(i).getUTCDay()===4),e,2)}function nWe(i){return i.getUTCDay()}function sWe(i,e){return Qt(FD.count(t0(i)-1,i),e,2)}function rWe(i,e){return Qt(i.getUTCFullYear()%100,e,2)}function oWe(i,e){return i=jte(i),Qt(i.getUTCFullYear()%100,e,2)}function aWe(i,e){return Qt(i.getUTCFullYear()%1e4,e,4)}function lWe(i,e){var t=i.getUTCDay();return i=t>=4||t===0?e0(i):e0.ceil(i),Qt(i.getUTCFullYear()%1e4,e,4)}function cWe(){return"+0000"}function EH(){return"%"}function IH(i){return+i}function TH(i){return Math.floor(+i/1e3)}var Kg,qte,Gte,Kte,Zte;hWe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hWe(i){return Kg=zte(i),qte=Kg.format,Gte=Kg.parse,Kte=Kg.utcFormat,Zte=Kg.utcParse,Kg}function z_(i){const e={};return t=>e[t]||(e[t]=i(t))}function uWe(i,e){return t=>{const n=i(t),s=n.indexOf(e);if(s<0)return n;let r=dWe(n,s);const o=r<n.length?n.slice(r):"";for(;--r>s;)if(n[r]!=="0"){++r;break}return n.slice(0,r)+o}}function dWe(i,e){let t=i.lastIndexOf("e"),n;if(t>0)return t;for(t=i.length;--t>e;)if(n=i.charCodeAt(t),n>=48&&n<=57)return t+1}function fWe(i){const e=z_(i.format),t=i.formatPrefix;return{format:e,formatPrefix:t,formatFloat(n){const s=A1(n||",");if(s.precision==null){switch(s.precision=12,s.type){case"%":s.precision-=2;break;case"e":s.precision-=1;break}return uWe(e(s),e(".1f")(1)[1])}else return e(s)},formatSpan(n,s,r,o){o=A1(o??",f");const a=P7e(n,s,r),l=Math.max(Math.abs(n),Math.abs(s));let c;if(o.precision==null)switch(o.type){case"s":return isNaN(c=q7e(a,l))||(o.precision=c),t(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(c=G7e(a,l))||(o.precision=c-(o.type==="e"));break}case"f":case"%":{isNaN(c=j7e(a))||(o.precision=c-(o.type==="%")*2);break}}return e(o)}}}gWe();function gWe(){return fWe({format:kte,formatPrefix:Ate})}function NH(i,e,t){t=t||{},sF(t)||Xd("Invalid time multi-format specifier: ".concat(t));const n=e(B1),s=e(F1),r=e(P1),o=e(O1),a=e(R1),l=e(M1),c=e(N1),h=e(T1),u=i(t[s2]||".%L"),d=i(t[B1]||":%S"),f=i(t[F1]||"%I:%M"),g=i(t[P1]||"%I %p"),p=i(t[O1]||t[n2]||"%a %d"),m=i(t[R1]||"%b %d"),v=i(t[M1]||"%B"),b=i(t[N1]||"%B"),w=i(t[T1]||"%Y");return y=>(n(y)<y?u:s(y)<y?d:r(y)<y?f:o(y)<y?g:l(y)<y?a(y)<y?p:m:h(y)<y?c(y)<y?v:b:w)(y)}function Yte(i){const e=z_(i.format),t=z_(i.utcFormat);return{timeFormat:n=>M3(n)?e(n):NH(e,cVe,n),utcFormat:n=>M3(n)?t(n):NH(t,hVe,n),timeParse:z_(i.parse),utcParse:z_(i.utcParse)}}let R3;pWe();function pWe(){return R3=Yte({format:qte,parse:Gte,utcFormat:Kte,utcParse:Zte})}function mWe(i){return Yte(zte(i))}function _We(i){return arguments.length?R3=mWe(i):R3}const bWe=i=>i!=null&&i===i,vWe=i=>i==="true"||i==="false"||i===!0||i===!1,wWe=i=>!Number.isNaN(Date.parse(i)),Qte=i=>!Number.isNaN(+i)&&!(i instanceof Date),yWe=i=>Qte(i)&&Number.isInteger(+i),MH={boolean:_7e,integer:uH,number:uH,date:v7e,string:w7e,unknown:vte},mC=[vWe,yWe,Qte,wWe],CWe=["boolean","integer","number","date"];function SWe(i,e){if(!i||!i.length)return"unknown";const t=i.length,n=mC.length,s=mC.map((r,o)=>o+1);for(let r=0,o=0,a,l;r<t;++r)for(l=e?i[r][e]:i[r],a=0;a<n;++a)if(s[a]&&bWe(l)&&!mC[a](l)&&(s[a]=0,++o,o===mC.length))return"string";return CWe[s.reduce((r,o)=>r===0?o:r,0)-1]}function xWe(i,e){return e.reduce((t,n)=>(t[n]=SWe(i,n),t),{})}function RH(i){const e=function(t,n){const s={delimiter:i};return dF(t,n?d7e(n,s):s)};return e.responseType="text",e}function dF(i,e){return e.header&&(i=e.header.map(Ste).join(e.delimiter)+`
`+i),x7e(e.delimiter).parse(i+"")}dF.responseType="text";function DWe(i){return typeof Buffer=="function"&&yte(Buffer.isBuffer)?Buffer.isBuffer(i):!1}function fF(i,e){const t=e&&e.property?bte(e.property):vte;return sF(i)&&!DWe(i)?LWe(t(i),e):t(JSON.parse(i))}fF.responseType="json";function LWe(i,e){return!wte(i)&&p7e(i)&&(i=[...i]),e&&e.copy?JSON.parse(JSON.stringify(i)):i}const kWe={interior:(i,e)=>i!==e,exterior:(i,e)=>i===e};function Xte(i,e){let t,n,s,r;return i=fF(i,e),e&&e.feature?(t=A7e,s=e.feature):e&&e.mesh?(t=I7e,s=e.mesh,r=kWe[e.filter]):Xd("Missing TopoJSON feature or mesh parameter."),n=(n=i.objects[s])?t(i,n,r):Xd("Invalid TopoJSON object: "+s),n&&n.features||[n]}Xte.responseType="json";const LI={dsv:dF,csv:RH(","),tsv:RH("	"),json:fF,topojson:Xte};function AWe(i,e){return arguments.length>1?(LI[i]=e,this):Cte(LI,i)?LI[i]:null}function EWe(i,e,t,n){e=e||{};const s=AWe(e.type||"json");return s||Xd("Unknown data format type: "+e.type),i=s(i,e),e.parse&&IWe(i,e.parse,t,n),Cte(i,"columns")&&delete i.columns,i}function IWe(i,e,t,n){if(!i.length)return;const s=_We();t=t||s.timeParse,n=n||s.utcParse;let r=i.columns||Object.keys(i[0]),o,a,l,c,h,u;e==="auto"&&(e=xWe(i,r)),r=Object.keys(e);const d=r.map(f=>{const g=e[f];let p,m;if(g&&(g.startsWith("date:")||g.startsWith("utc:")))return p=g.split(/:(.+)?/,2),m=p[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(p[0]==="utc"?n:t)(m);if(!MH[g])throw Error("Illegal format pattern: "+f+":"+g);return MH[g]});for(l=0,h=i.length,u=r.length;l<h;++l)for(o=i[l],c=0;c<u;++c)a=r[c],o[a]=d[c](o[a])}var wc;class Jte extends Cp{constructor(){super();vF(this,wc,void 0);H0(this,"files");this.missingFiles=new Set}createRenderRoot(){return this}render(){return Us`
            <ul class="tabs">
                ${Object.keys(this.files).map(t=>Us`
                            <li
                                data-name=${t}
                                class=${t==U0(this,wc)?"selected":""}
                            >
                                <a
                                    href="#"
                                    @click=${n=>this._changeTab(n)}
                                    >${t}</a
                                >
                            </li>
                        `)}
                <li class=${U0(this,wc)===void 0?"selected":""}>
                    <a
                        href="#"
                        @click=${t=>this._changeTab(t)}
                        >Add new files</a
                    >
                </li>
                <li style="flex-grow: 1"></li>
            </ul>

            <div class="tab-pages">
                ${Object.keys(this.files).map(t=>Us`
                        <div
                            class=${t==U0(this,wc)?"selected":""}
                        >
                            ${NWe(this.files[t].data)}
                        </div>
                    `)}

                <div class=${U0(this,wc)===void 0?"selected":""}>
                    ${this.missingFiles.size?Us`<div class="missing-files">
                              <p>Please add the following files:</p>
                              <ul>
                                  ${a7e(this.missingFiles,t=>Us`<li>${t}</li>`)}
                              </ul>
                          </div>`:ln}
                    ${TWe(t=>this._handleFiles(t))}
                </div>
            </div>
        `}async _handleFiles(t){const s=t.target.files;for(const r of s){const o=await MWe(r),a=EWe(o,{type:RWe(o,r.name),parse:"auto"});this.files[r.name]={metadata:r,data:a},r2(this,wc,r.name)}this.requestUpdate(),this.dispatchEvent(new CustomEvent("upload",{detail:{}}))}_changeTab(t){const s=t.target.parentElement.dataset.name;r2(this,wc,s),t.preventDefault(),this.requestUpdate()}}wc=new WeakMap,H0(Jte,"properties",{missingFiles:{type:Set,attribute:!1}});customElements.define("file-pane",Jte);function TWe(i){return Us` <form class="upload-form">
        <input
            type="file"
            multiple
            accept=".csv,.tsv,.txt,.json"
            id="fileInput"
            @change=${i}
            style="display:none"
        />
        <div id="upload-button-wrapper">
            <button
                class="btn"
                @click=${e=>{document.getElementById("fileInput").click(),e.preventDefault(),e.stopPropagation()}}
            >
                Choose files
            </button>
        </div>

        <p>
            The added file becomes a named datasource, which can be accessed as
            follows:
        </p>

        <pre>
"data": {
    "name": "filename.csv"
}
</pre
        >

        <p>
            N.B. All data processing takes place in your web browser. Nothing is
            uploaded anywhere.
        </p>
    </form>`}function NWe(i){const e=Object.keys(i[0]),t=i.slice(0,30),n=e.map(a=>"text-align: "+(typeof i[0][a]=="number"?"right":"left")),s=a=>Us`
        <tr>
            ${e.map((l,c)=>Us`<td style=${n[c]}>${a[l]}</td> `)}
        </tr>
    `,r=()=>Us`
        <tr>
            ${e.map((a,l)=>Us`<td style=${n[l]}>...</td> `)}
        </tr>
    `;return Us`
        <table class="data-sample-table">
            <thead>
                ${(()=>Us`
        <tr>
            ${e.map((a,l)=>Us`<th style=${n[l]}>${a}</th> `)}
        </tr>
    `)()}
            </thead>
            <tbody>
                ${t.map(s)}
                ${t.length<i.length?r():""}
            </tbody>
        </table>
    `}function MWe(i){return new Promise((e,t)=>{let n=new FileReader;n.onload=()=>e(n.result),n.onerror=t,n.readAsText(i)})}function RWe(i,e){return/\.json$/.test(e)?"json":i.indexOf("	")>=0?"tsv":"csv"}function eie(i){if(typeof i=="object"&&i!==null){i.description&&(i.markdownDescription=i.description);for(const e in i)i.hasOwnProperty(e)&&(i[e]=eie(i[e]))}return i}FWe();const tie="playgroundSpec",iie=UH(),nie=UH(),sie={};let gF=new Set,kI,OWe=window.localStorage.getItem(tie)||Eye,OH="";const mS=["stacked","parallel","full"];let O3=mS[0];function PWe(){O3=mS[(mS.indexOf(O3)+1)%mS.length],mF(),window.dispatchEvent(new Event("resize"))}function FWe(){eie(JW),Bk.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:"http://myserver/foo-schema.json",fileMatch:["*"],schema:JW}]})}function BWe(i){let e=sie[i];return e||gF.add(i),e==null?void 0:e.data}async function pF(i=!1){var t;gF=new Set;const e=(t=nie.value)==null?void 0:t.value;window.localStorage.setItem(tie,e);try{const n=JSON.parse(e),s=JSON.stringify(n);if(s===OH&&!i)return;OH=s,kI&&kI.finalize(),kI=await Dye(iie.value,n,{namedDataProvider:BWe}),mF()}catch(n){console.log(n)}}const VWe=()=>Us`
    <div class="toolbar">
        <img
            title="GenomeSpy"
            alt="GenomeSpy"
            src="${xye}"
            class="genome-spy-icon"
        />
        <span class="title">
            <span>GenomeSpy Playground</span>
        </span>
        <button @click=${PWe}>
            ${nB(pse).node[0]}
            <span>Toggle layout</span>
        </button>
        <span class="spacer"></span>
        <a
            class="version"
            href="https://github.com/genome-spy/genome-spy/releases/tag/v${ez.version}"
            >v${ez.version}</a
        >
        <a href="https://genomespy.app/docs/" target="_blank"
            >${nB(fse).node[0]} <span>Docs</span></a
        >
    </div>
`,WWe=Aye(()=>pF(),500,!1),zWe=()=>Us`
    <section id="playground-layout" class="${O3}">
        ${VWe()}
        <section id="editor-pane">
            <code-editor
                ${NF(nie)}
                @change=${WWe}
                .value=${OWe}
            ></code-editor>
        </section>
        <section id="genome-spy-pane">
            <div ${NF(iie)}></div>
        </section>
        <section id="file-pane">
            <file-pane
                @upload=${pF}
                .files=${sie}
                .missingFiles=${gF}
            ></file-pane>
        </section>
    </section>
`;function mF(){zH(zWe(),document.body)}mF();pF();export{$ze as M,Uze as R,_5e as e,Bk as l};
